var zg=Object.defineProperty;var Yg=(e,t,n)=>t in e?zg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Aa=(e,t,n)=>(Yg(e,typeof t!="symbol"?t+"":t,n),n),Tc=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var we=(e,t,n)=>(Tc(e,t,"read from private field"),n?n.call(e):t.get(e)),Xe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},bt=(e,t,n,r)=>(Tc(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var Ic=(e,t,n,r)=>({set _(i){bt(e,t,i,n)},get _(){return we(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Te(){}function ph(e){return e()}function kc(){return Object.create(null)}function ln(e){e.forEach(ph)}function bh(e){return typeof e=="function"}function Zi(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function jg(e){return Object.keys(e).length===0}function P(e,t){e.appendChild(t)}function $e(e,t,n){e.insertBefore(t,n||null)}function Ce(e){e.parentNode&&e.parentNode.removeChild(e)}function Si(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function W(e){return document.createElement(e)}function pe(e){return document.createTextNode(e)}function le(){return pe(" ")}function gh(){return pe("")}function fe(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function q(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ft(e){return e===""?null:+e}function Wg(e){return Array.from(e.childNodes)}function nn(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ne(e,t){e.value=t??""}function wt(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function pn(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ao(e){const t=e.querySelector(":checked");return t&&t.__value}function Dc(e,t){return new e(t)}let xi;function bi(e){xi=e}function yh(){if(!xi)throw new Error("Function called outside component initialization");return xi}function Yo(e){yh().$$.on_mount.push(e)}function jo(e){yh().$$.on_destroy.push(e)}const dr=[],Sr=[];let br=[];const Rc=[],Xg=Promise.resolve();let gu=!1;function Kg(){gu||(gu=!0,Xg.then(wh))}function Gn(e){br.push(e)}const Is=new Set;let ur=0;function wh(){if(ur!==0)return;const e=xi;do{try{for(;ur<dr.length;){const t=dr[ur];ur++,bi(t),Zg(t.$$)}}catch(t){throw dr.length=0,ur=0,t}for(bi(null),dr.length=0,ur=0;Sr.length;)Sr.pop()();for(let t=0;t<br.length;t+=1){const n=br[t];Is.has(n)||(Is.add(n),n())}br.length=0}while(dr.length);for(;Rc.length;)Rc.pop()();gu=!1,Is.clear(),bi(e)}function Zg(e){if(e.fragment!==null){e.update(),ln(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Gn)}}function Qg(e){const t=[],n=[];br.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),br=t}const ja=new Set;let Tn;function Al(){Tn={r:0,c:[],p:Tn}}function Pl(){Tn.r||ln(Tn.c),Tn=Tn.p}function yn(e,t){e&&e.i&&(ja.delete(e),e.i(t))}function xr(e,t,n,r){if(e&&e.o){if(ja.has(e))return;ja.add(e),Tn.c.push(()=>{ja.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Dn(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Bc(e){e&&e.c()}function yu(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Gn(()=>{const a=e.$$.on_mount.map(ph).filter(bh);e.$$.on_destroy?e.$$.on_destroy.push(...a):ln(a),e.$$.on_mount=[]}),i.forEach(Gn)}function wu(e,t){const n=e.$$;n.fragment!==null&&(Qg(n.after_update),ln(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Jg(e,t){e.$$.dirty[0]===-1&&(dr.push(e),Kg(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Qi(e,t,n,r,i,a,o=null,s=[-1]){const u=xi;bi(e);const c=e.$$={fragment:null,ctx:[],props:a,update:Te,not_equal:i,bound:kc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:kc(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},(d,f,...h)=>{const m=h.length?h[0]:f;return c.ctx&&i(c.ctx[d],c.ctx[d]=m)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](m),l&&Jg(e,d)),f}):[],c.update(),l=!0,ln(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const d=Wg(t.target);c.fragment&&c.fragment.l(d),d.forEach(Ce)}else c.fragment&&c.fragment.c();t.intro&&yn(e.$$.fragment),yu(e,t.target,t.anchor),wh()}bi(u)}class Ji{constructor(){Aa(this,"$$");Aa(this,"$$set")}$destroy(){wu(this,1),this.$destroy=Te}$on(t,n){if(!bh(n))return Te;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!jg(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ey="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ey);function Oc(e,t,n){const r=new URLSearchParams(e.location.search);r.set(t,n);const i=`${e.location.protocol}//${e.location.host}${e.location.pathname}?${r.toString()}`;e.history.pushState({path:i},"",i)}function ty(e,t){return new URLSearchParams(e.location.search).get(t)}class Mt{constructor(t=!1){this.eventMap={},this.eventsSuspended=t==!0}addListener(t,n,r={}){if(typeof t=="string"&&t.length<1||t instanceof String&&t.length<1||typeof t!="string"&&!(t instanceof String)&&t!==Mt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof n!="function")throw new TypeError("The callback must be a function.");const i=new Lc(t,this,n,r);return this.eventMap[t]||(this.eventMap[t]=[]),r.prepend?this.eventMap[t].unshift(i):this.eventMap[t].push(i),i}addOneTimeListener(t,n,r={}){r.remaining=1,this.addListener(t,n,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(t,n){return t===void 0?this.eventMap[Mt.ANY_EVENT]&&this.eventMap[Mt.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[t]&&this.eventMap[t].length>0?n instanceof Lc?this.eventMap[t].filter(i=>i===n).length>0:typeof n=="function"?this.eventMap[t].filter(i=>i.callback===n).length>0:n==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(t){return this.eventMap[t]||[]}suspendEvent(t){this.getListeners(t).forEach(n=>{n.suspended=!0})}unsuspendEvent(t){this.getListeners(t).forEach(n=>{n.suspended=!1})}getListenerCount(t){return this.getListeners(t).length}emit(t,...n){if(typeof t!="string"&&!(t instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],i=this.eventMap[Mt.ANY_EVENT]||[];return this.eventMap[t]&&(i=i.concat(this.eventMap[t])),i.forEach(a=>{if(a.suspended)return;let o=[...n];Array.isArray(a.arguments)&&(o=o.concat(a.arguments)),a.remaining>0&&(r.push(a.callback.apply(a.context,o)),a.count++),--a.remaining<1&&a.remove()}),r}removeListener(t,n,r={}){if(t===void 0){this.eventMap={};return}else if(!this.eventMap[t])return;let i=this.eventMap[t].filter(a=>n&&a.callback!==n||r.remaining&&r.remaining!==a.remaining||r.context&&r.context!==a.context);i.length?this.eventMap[t]=i:delete this.eventMap[t]}async waitFor(t,n={}){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((r,i)=>{let a,o=this.addListener(t,()=>{clearTimeout(a),r()},{remaining:1});n.duration!==1/0&&(a=setTimeout(()=>{o.remove(),i("The duration expired before the event was emitted.")},n.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Lc{constructor(t,n,r,i={}){if(typeof t!="string"&&!(t instanceof String)&&t!==Mt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");i.arguments!==void 0&&!Array.isArray(i.arguments)&&(i.arguments=[i.arguments]),i=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},i),i.duration!==1/0&&setTimeout(()=>this.remove(),i.duration),this.arguments=i.arguments,this.callback=r,this.context=i.context,this.count=0,this.event=t,this.remaining=parseInt(i.remaining)>=1?parseInt(i.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class ${static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),$.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),$.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),$.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),$.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class hr{constructor(t,n={}){this.duration=D.defaults.note.duration,this.attack=D.defaults.note.attack,this.release=D.defaults.note.release,n.duration!=null&&(this.duration=n.duration),n.attack!=null&&(this.attack=n.attack),n.rawAttack!=null&&(this.attack=F.from7bitToFloat(n.rawAttack)),n.release!=null&&(this.release=n.release),n.rawRelease!=null&&(this.release=F.from7bitToFloat(n.rawRelease)),Number.isInteger(t)?this.identifier=F.toNoteIdentifier(t):this.identifier=t}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(t){const n=F.getNoteDetails(t);if(D.validation&&!t)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(t){if(D.validation&&(t=t.toUpperCase(),!["C","D","E","F","G","A","B"].includes(t)))throw new Error("Invalid name value");this._name=t}get accidental(){return this._accidental}set accidental(t){if(D.validation&&(t=t.toLowerCase(),!["#","##","b","bb"].includes(t)))throw new Error("Invalid accidental value");this._accidental=t}get octave(){return this._octave}set octave(t){if(D.validation&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid octave value");this._octave=t}get duration(){return this._duration}set duration(t){if(D.validation&&(t=parseFloat(t),isNaN(t)||t===null||t<0))throw new RangeError("Invalid duration value.");this._duration=t}get attack(){return this._attack}set attack(t){if(D.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid attack value.");this._attack=t}get release(){return this._release}set release(t){if(D.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid release value.");this._release=t}get rawAttack(){return F.fromFloatTo7Bit(this._attack)}set rawAttack(t){this._attack=F.from7bitToFloat(t)}get rawRelease(){return F.fromFloatTo7Bit(this._release)}set rawRelease(t){this._release=F.from7bitToFloat(t)}get number(){return F.toNoteNumber(this.identifier)}getOffsetNumber(t=0,n=0){return D.validation&&(t=parseInt(t)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+t*12+n,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class F{static toNoteNumber(t,n=0){if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");typeof t!="string"&&(t="");const r=this.getNoteDetails(t);if(!r)throw new TypeError("Invalid note identifier");const i={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let a=(r.octave+1+n)*12;if(a+=i[r.name],r.accidental&&(r.accidental.startsWith("b")?a-=r.accidental.length:a+=r.accidental.length),a<0||a>127)throw new RangeError("Invalid octaveOffset value");return a}static getNoteDetails(t){Number.isInteger(t)&&(t=this.toNoteIdentifier(t));const n=t.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const r=n[1].toUpperCase(),i=parseInt(n[3]);let a=n[2].toLowerCase();return a=a===""?void 0:a,{accidental:a,identifier:r+(a||"")+i,name:r,octave:i}}static sanitizeChannels(t){let n;if(D.validation){if(t==="all")n=["all"];else if(t==="none")return[]}return Array.isArray(t)?n=t:n=[t],n.indexOf("all")>-1&&(n=$.MIDI_CHANNEL_NUMBERS),n.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(t){let n=!1;const r=parseFloat(t);return isNaN(r)?!1:(typeof t=="string"&&t.substring(0,1)==="+"?r>=0&&(n=D.time+r):r>=0&&(n=r),n)}static guessNoteNumber(t,n){n=parseInt(n)||0;let r=!1;if(Number.isInteger(t)&&t>=0&&t<=127)r=parseInt(t);else if(parseInt(t)>=0&&parseInt(t)<=127)r=parseInt(t);else if(typeof t=="string"||t instanceof String)try{r=this.toNoteNumber(t.trim(),n)}catch{return!1}return r}static toNoteIdentifier(t,n){if(t=parseInt(t),isNaN(t)||t<0||t>127)throw new RangeError("Invalid note number");if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=Math.floor(t/12-1)+n;return r[t%12]+i.toString()}static buildNote(t,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,t instanceof hr)return t;let r=this.guessNoteNumber(t,n.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${t})`);return n.octaveOffset=void 0,new hr(r,n)}static buildNoteArray(t,n={}){let r=[];return Array.isArray(t)||(t=[t]),t.forEach(i=>{r.push(this.buildNote(i,n))}),r}static from7bitToFloat(t){return t===1/0&&(t=127),t=parseInt(t)||0,Math.min(Math.max(t/127,0),1)}static fromFloatTo7Bit(t){return t===1/0&&(t=1),t=parseFloat(t)||0,Math.min(Math.max(Math.round(t*127),0),127)}static fromMsbLsbToFloat(t,n=0){D.validation&&(t=Math.min(Math.max(parseInt(t)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127));const r=((t<<7)+n)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(t){D.validation&&(t=Math.min(Math.max(parseFloat(t)||0,0),1));const n=Math.round(t*16383);return{msb:n>>7,lsb:n&127}}static offsetNumber(t,n=0,r=0){if(D.validation){if(t=parseInt(t),isNaN(t))throw new Error("Invalid note number");n=parseInt(n)||0,r=parseInt(r)||0}return Math.min(Math.max(t+n*12+r,0),127)}static getPropertyByValue(t,n){return Object.keys(t).find(r=>t[r]===n)}static getCcNameByNumber(t){if(!(D.validation&&(t=parseInt(t),!(t>=0&&t<=127))))return $.CONTROL_CHANGE_MESSAGES[t].name}static getCcNumberByName(t){let n=$.CONTROL_CHANGE_MESSAGES.find(r=>r.name===t);return n?n.number:$.MIDI_CONTROL_CHANGE_MESSAGES[t]}static getChannelModeByNumber(t){if(!(t>=120&&t<=127))return!1;for(let n in $.CHANNEL_MODE_MESSAGES)if($.CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&t===$.CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class ny extends Mt{constructor(t,n){super(),this._output=t,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(t,n={time:0}){return this.output.send(t,n),this}sendKeyAftertouch(t,n,r={}){if(D.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(n=F.fromFloatTo7Bit(n));const i=D.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(t)||(t=[t]),F.buildNoteArray(t).forEach(a=>{this.send([($.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),a.getOffsetNumber(i),n],{time:F.toTimestamp(r.time)})}),this}sendControlChange(t,n,r={}){if(typeof t=="string"&&(t=F.getCcNumberByName(t)),Array.isArray(n)||(n=[n]),D.validation){if(t===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(n=n.map(i=>{const a=Math.min(Math.max(parseInt(i),0),127);if(isNaN(a))throw new TypeError("Values must be integers between 0 and 127");return a}),n.length===2&&t>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((i,a)=>{this.send([($.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t+a*32,n[a]],{time:F.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(t,n={}){return this.sendControlChange(99,t[0],n),this.sendControlChange(98,t[1],n),this}_deselectRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_deselectNonRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_selectRegisteredParameter(t,n={}){return this.sendControlChange(101,t[0],n),this.sendControlChange(100,t[1],n),this}_setCurrentParameter(t,n={}){return t=[].concat(t),this.sendControlChange(6,t[0],n),t.length<2?this:(this.sendControlChange(38,t[1],n),this)}sendRpnDecrement(t,n={}){if(Array.isArray(t)||(t=$.REGISTERED_PARAMETERS[t]),D.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames($.REGISTERED_PARAMETERS).forEach(i=>{$.REGISTERED_PARAMETERS[i][0]===t[0]&&$.REGISTERED_PARAMETERS[i][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(t,n={}){if(Array.isArray(t)||(t=$.REGISTERED_PARAMETERS[t]),D.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames($.REGISTERED_PARAMETERS).forEach(i=>{$.REGISTERED_PARAMETERS[i][0]===t[0]&&$.REGISTERED_PARAMETERS[i][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(t,n={}){this.sendNoteOn(t,n);const r=Array.isArray(t)?t:[t];for(let i of r)if(parseInt(i.duration)>0){const a={time:(F.toTimestamp(n.time)||D.time)+parseInt(i.duration),release:i.release,rawRelease:i.rawRelease};this.sendNoteOff(i,a)}else if(parseInt(n.duration)>0){const a={time:(F.toTimestamp(n.time)||D.time)+parseInt(n.duration),release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(i,a)}return this}sendNoteOff(t,n={}){if(D.validation){if(n.rawRelease!=null&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(n.release!=null&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawRelease!=null?r=n.rawRelease:isNaN(n.release)||(r=Math.round(n.release*127));const i=D.octaveOffset+this.output.octaveOffset+this.octaveOffset;return F.buildNoteArray(t,{rawRelease:parseInt(r)}).forEach(a=>{this.send([($.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),a.getOffsetNumber(i),a.rawRelease],{time:F.toTimestamp(n.time)})}),this}stopNote(t,n={}){return this.sendNoteOff(t,n)}sendNoteOn(t,n={}){if(D.validation){if(n.rawAttack!=null&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(n.attack!=null&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawAttack!=null?r=n.rawAttack:isNaN(n.attack)||(r=Math.round(n.attack*127));const i=D.octaveOffset+this.output.octaveOffset+this.octaveOffset;return F.buildNoteArray(t,{rawAttack:r}).forEach(a=>{this.send([($.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),a.getOffsetNumber(i),a.rawAttack],{time:F.toTimestamp(n.time)})}),this}sendChannelMode(t,n=0,r={}){if(typeof t=="string"&&(t=$.CHANNEL_MODE_MESSAGES[t]),D.validation){if(t===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(t)||!(t>=120&&t<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([($.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t,n],{time:F.toTimestamp(r.time)}),this}sendOmniMode(t,n={}){return t===void 0||t?this.sendChannelMode("omnimodeon",0,n):this.sendChannelMode("omnimodeoff",0,n),this}sendChannelAftertouch(t,n={}){if(D.validation){if(isNaN(parseFloat(t)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return n.rawValue||(t=F.fromFloatTo7Bit(t)),this.send([($.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(t)],{time:F.toTimestamp(n.time)}),this}sendMasterTuning(t,n={}){if(t=parseFloat(t)||0,D.validation&&!(t>-65&&t<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(t)+64,i=t-Math.floor(t);i=Math.round((i+1)/2*16383);let a=i>>7&127,o=i&127;return this.sendRpnValue("channelcoarsetuning",r,n),this.sendRpnValue("channelfinetuning",[a,o],n),this}sendModulationRange(t,n,r={}){if(D.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(n!=null&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[t,n],r),this}sendNrpnValue(t,n,r={}){if(n=[].concat(n),D.validation){if(!Array.isArray(t)||!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(t,r),this._setCurrentParameter(n,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(t,n={}){if(D.validation)if(n.rawValue&&Array.isArray(t)){if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(t)){if(!(t>=0&&t<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(t)||t===null)throw new RangeError("Invalid pitch bend value.");if(!(t>=-1&&t<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let r=0,i=0;if(n.rawValue&&Array.isArray(t))r=t[0],i=t[1];else if(n.rawValue&&!Array.isArray(t))r=t;else{const a=F.fromFloatToMsbLsb((t+1)/2);r=a.msb,i=a.lsb}return this.send([($.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),i,r],{time:F.toTimestamp(n.time)}),this}sendPitchBendRange(t,n,r={}){if(D.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[t,n],r),this}sendProgramChange(t,n={}){if(t=parseInt(t)||0,D.validation&&!(t>=0&&t<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([($.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),t],{time:F.toTimestamp(n.time)}),this}sendRpnValue(t,n,r={}){if(Array.isArray(t)||(t=$.REGISTERED_PARAMETERS[t]),D.validation){if(!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(t,r),this._setCurrentParameter(n,r),this._deselectRegisteredParameter(r),this}sendTuningBank(t,n={}){if(D.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",t,n),this}sendTuningProgram(t,n={}){if(D.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",t,n),this}sendLocalControl(t,n={}){return t?this.sendChannelMode("localcontrol",127,n):this.sendChannelMode("localcontrol",0,n)}sendAllNotesOff(t={}){return this.sendChannelMode("allnotesoff",0,t)}sendAllSoundOff(t={}){return this.sendChannelMode("allsoundoff",0,t)}sendResetAllControllers(t={}){return this.sendChannelMode("resetallcontrollers",0,t)}sendPolyphonicMode(t,n={}){return t==="mono"?this.sendChannelMode("monomodeon",0,n):this.sendChannelMode("polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class vu extends Mt{constructor(t){super(),this._midiOutput=t,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new ny(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(t){let n={timestamp:D.time};t.port.connection==="open"?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):t.port.connection==="closed"&&t.port.state==="connected"?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):t.port.connection==="closed"&&t.port.state==="disconnected"?(n.type="disconnected",n.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",n)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught:",t.port.connection,t.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(t){return Promise.reject(t)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(t,n={time:0},r=0){if(t instanceof vh&&(t=F.isNode?t.data:t.rawData),t instanceof Uint8Array&&F.isNode&&(t=Array.from(t)),D.validation){if(!Array.isArray(t)&&!(t instanceof Uint8Array)&&(t=[t],Array.isArray(n)&&(t=t.concat(n)),n=isNaN(r)?{time:0}:{time:r}),!(parseInt(t[0])>=128&&parseInt(t[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");t.slice(1).forEach(i=>{if(i=parseInt(i),!(i>=0&&i<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(t,F.toTimestamp(n.time)),this}sendSysex(t,n=[],r={}){if(t=[].concat(t),n instanceof Uint8Array){const i=new Uint8Array(1+t.length+n.length+1);i[0]=$.SYSTEM_MESSAGES.sysex,i.set(Uint8Array.from(t),1),i.set(n,1+t.length),i[i.length-1]=$.SYSTEM_MESSAGES.sysexend,this.send(i,{time:r.time})}else{const i=t.concat(n,$.SYSTEM_MESSAGES.sysexend);this.send([$.SYSTEM_MESSAGES.sysex].concat(i),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():D.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(t,n={}){if(D.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([$.SYSTEM_MESSAGES.timecode,t],{time:n.time}),this}sendSongPosition(t=0,n={}){t=Math.floor(t)||0;var r=t>>7&127,i=t&127;return this.send([$.SYSTEM_MESSAGES.songposition,r,i],{time:n.time}),this}sendSongSelect(t=0,n={}){if(D.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([$.SYSTEM_MESSAGES.songselect,t],{time:n.time}),this}sendTuneRequest(t={}){return this.send([$.SYSTEM_MESSAGES.tunerequest],{time:t.time}),this}sendClock(t={}){return this.send([$.SYSTEM_MESSAGES.clock],{time:t.time}),this}sendStart(t={}){return this.send([$.SYSTEM_MESSAGES.start],{time:t.time}),this}sendContinue(t={}){return this.send([$.SYSTEM_MESSAGES.continue],{time:t.time}),this}sendStop(t={}){return this.send([$.SYSTEM_MESSAGES.stop],{time:t.time}),this}sendActiveSensing(t={}){return this.send([$.SYSTEM_MESSAGES.activesensing],{time:t.time}),this}sendReset(t={}){return this.send([$.SYSTEM_MESSAGES.reset],{time:t.time}),this}sendTuningRequest(t={}){return D.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(t)}sendKeyAftertouch(t,n,r={}){return r.channels==null&&(r.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendKeyAftertouch(t,n,r)}),this}sendControlChange(t,n,r={},i={}){if(D.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const a=r;r=i,r.channels=a,r.channels==="all"&&(r.channels=$.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendControlChange(t,n,r)}),this}sendPitchBendRange(t=0,n=0,r={}){return r.channels==null&&(r.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendPitchBendRange(t,n,r)}),this}setPitchBendRange(t=0,n=0,r="all",i={}){return D.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=$.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(t,n,i)}sendRpnValue(t,n,r={}){return r.channels==null&&(r.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendRpnValue(t,n,r)}),this}setRegisteredParameter(t,n=[],r="all",i={}){return D.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=$.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(t,n,i)}sendChannelAftertouch(t,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=$.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendChannelAftertouch(t,n)}),this}sendPitchBend(t,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=$.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPitchBend(t,n)}),this}sendProgramChange(t=0,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=$.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendProgramChange(t,n)}),this}sendModulationRange(t,n,r={}){return r.channels==null&&(r.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendModulationRange(t,n,r)}),this}setModulationRange(t=0,n=0,r="all",i={}){return D.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=$.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(t,n,i)}sendMasterTuning(t,n={}){return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendMasterTuning(t,n)}),this}setMasterTuning(t,n={},r={}){return D.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=n,r.channels==="all"&&(r.channels=$.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(t,r)}sendTuningProgram(t,n={}){return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningProgram(t,n)}),this}setTuningProgram(t,n="all",r={}){return D.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=n,r.channels==="all"&&(r.channels=$.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(t,r)}sendTuningBank(t=0,n={}){return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningBank(t,n)}),this}setTuningBank(t,n="all",r={}){return D.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=n,r.channels==="all"&&(r.channels=$.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(t,r)}sendChannelMode(t,n=0,r={},i={}){if(D.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const a=r;r=i,r.channels=a,r.channels==="all"&&(r.channels=$.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendChannelMode(t,n,r)}),this}sendAllSoundOff(t={}){return t.channels==null&&(t.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendAllSoundOff(t)}),this}sendAllNotesOff(t={}){return t.channels==null&&(t.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendAllNotesOff(t)}),this}sendResetAllControllers(t={},n={}){if(D.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=$.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendResetAllControllers(t)}),this}sendPolyphonicMode(t,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=$.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPolyphonicMode(t,n)}),this}sendLocalControl(t,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=$.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendLocalControl(t,n)}),this}sendOmniMode(t,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=$.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendOmniMode(t,n)}),this}sendNrpnValue(t,n,r={}){return r.channels==null&&(r.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendNrpnValue(t,n,r)}),this}setNonRegisteredParameter(t,n=[],r="all",i={}){return D.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=$.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(t,n,i)}sendRpnIncrement(t,n={}){return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnIncrement(t,n)}),this}incrementRegisteredParameter(t,n="all",r={}){return D.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=$.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(t,r)}sendRpnDecrement(t,n={}){return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnDecrement(t,n)}),this}decrementRegisteredParameter(t,n="all",r={}){return D.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=$.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(t,r)}sendNoteOff(t,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=$.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOff(t,n)}),this}stopNote(t,n){return this.sendNoteOff(t,n)}playNote(t,n={},r={}){if(D.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=$.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].playNote(t,n)}),this}sendNoteOn(t,n={},r={}){if(D.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=$.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOn(t,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Fc{constructor(t=[],n={}){this.destinations=[],this.types=[...Object.keys($.SYSTEM_MESSAGES),...Object.keys($.CHANNEL_MESSAGES)],this.channels=$.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(t)||(t=[t]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),D.validation&&(t.forEach(r=>{if(!(r instanceof vu))throw new TypeError("Destinations must be of type 'Output'.")}),n.types!==void 0&&n.types.forEach(r=>{if(!$.SYSTEM_MESSAGES.hasOwnProperty(r)&&!$.CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),n.channels!==void 0&&n.channels.forEach(r=>{if(!$.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=t,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(t){this.suspended||this.types.includes(t.type)&&(t.channel&&!this.channels.includes(t.channel)||this.destinations.forEach(n=>{D.validation&&!(n instanceof vu)||n.send(t)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class ry extends Mt{constructor(t,n){super(),this._input=t,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(t){const n=Object.assign({},t);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(t){const n=Object.assign({},t);n.type=n.message.type||"unknownmessage";const r=t.message.dataBytes[0],i=t.message.dataBytes[1];if(n.type==="noteoff"||n.type==="noteon"&&i===0)this.notesState[r]=!1,n.type="noteoff",n.note=new hr(F.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+D.octaveOffset),{rawAttack:0,rawRelease:i}),n.value=F.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if(n.type==="noteon")this.notesState[r]=!0,n.note=new hr(F.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+D.octaveOffset),{rawAttack:i}),n.value=F.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if(n.type==="keyaftertouch")n.note=new hr(F.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+D.octaveOffset)),n.value=F.from7bitToFloat(i),n.rawValue=i,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=r;else if(n.type==="controlchange"){n.controller={number:r,name:$.CONTROL_CHANGE_MESSAGES[r].name,description:$.CONTROL_CHANGE_MESSAGES[r].description,position:$.CONTROL_CHANGE_MESSAGES[r].position},n.subtype=n.controller.name||"controller"+r,n.value=F.from7bitToFloat(i),n.rawValue=i;const a=Object.assign({},n);a.type=`${n.type}-controller${r}`,delete a.subtype,this.emit(a.type,a);const o=Object.assign({},n);o.type=`${n.type}-`+$.CONTROL_CHANGE_MESSAGES[r].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else n.type==="programchange"?(n.value=r,n.rawValue=n.value):n.type==="channelaftertouch"?(n.value=F.from7bitToFloat(r),n.rawValue=r):n.type==="pitchbend"?(n.value=((i<<7)+r-8192)/8192,n.rawValue=(i<<7)+r):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(t){const n=Object.assign({},t);n.type=n.controller.name,n.type==="localcontrol"&&(n.value=n.message.data[2]===127,n.rawValue=n.message.data[2]),n.type==="omnimodeon"?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="omnimodeoff"&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),n.type==="monomodeon"?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="polymodeon"&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(t){const n=t.message.dataBytes[0],r=t.message.dataBytes[1];n===99||n===101?(this._nrpnBuffer=[],this._rpnBuffer=[],n===99?this._nrpnBuffer=[t.message]:r!==127&&(this._rpnBuffer=[t.message])):n===98||n===100?n===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(t.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(t.message):this._rpnBuffer=[]):(n===6||n===38||n===96||n===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],t):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],t):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(t){return t===6||t===38||t===96||t===97||t===98||t===99||t===100||t===101}_dispatchParameterNumberEvent(t,n,r,i){t=t==="nrpn"?"nrpn":"rpn";const a={target:i.target,timestamp:i.timestamp,message:i.message,parameterMsb:n,parameterLsb:r,value:F.from7bitToFloat(i.message.dataBytes[1]),rawValue:i.message.dataBytes[1]};t==="rpn"?a.parameter=Object.keys($.REGISTERED_PARAMETERS).find(u=>$.REGISTERED_PARAMETERS[u][0]===n&&$.REGISTERED_PARAMETERS[u][1]===r):a.parameter=(n<<7)+r;const o=$.CONTROL_CHANGE_MESSAGES[i.message.dataBytes[0]].name;a.type=`${t}-${o}`,this.emit(a.type,a);const s=Object.assign({},a);s.type==="nrpn-dataincrement"?s.type="nrpn-databuttonincrement":s.type==="nrpn-datadecrement"?s.type="nrpn-databuttondecrement":s.type==="rpn-dataincrement"?s.type="rpn-databuttonincrement":s.type==="rpn-datadecrement"&&(s.type="rpn-databuttondecrement"),this.emit(s.type,s),a.type=t,a.subtype=o,this.emit(a.type,a)}getChannelModeByNumber(t){return D.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),t=Math.floor(t)),F.getChannelModeByNumber(t)}getCcNameByNumber(t){if(D.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),t=parseInt(t),!(t>=0&&t<=127)))throw new RangeError("Invalid control change number.");return F.getCcNameByNumber(t)}getNoteState(t){t instanceof hr&&(t=t.identifier);const n=F.guessNoteNumber(t,D.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(t){this.validation&&(t=!!t),this.parameterNumberEventsEnabled=t}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class vh{constructor(t){this.rawData=t,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=F.getPropertyByValue($.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=F.getPropertyByValue($.SYSTEM_MESSAGES,this.command)),this.statusByte===$.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class iy extends Mt{constructor(t){super(),this._midiInput=t,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new ry(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(t){let n={timestamp:D.time,target:this,port:this};t.port.connection==="open"?(n.type="opened",this.emit("opened",n)):t.port.connection==="closed"&&t.port.state==="connected"?(n.type="closed",this.emit("closed",n)):t.port.connection==="closed"&&t.port.state==="disconnected"?(n.type="disconnected",n.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",n)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught: ",t.port.connection,t.port.state)}_onMidiMessage(t){const n=new vh(t.data),r={port:this,target:this,message:n,timestamp:t.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",r),n.isSystemMessage?this._parseEvent(r):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(r),this._forwarders.forEach(i=>i.forward(n))}_parseEvent(t){const n=Object.assign({},t);n.type=n.message.type||"unknownmidimessage",n.type==="songselect"&&(n.song=t.data[1]+1,n.value=t.data[1],n.rawValue=n.value),this.emit(n.type,n)}async open(){try{await this._midiInput.open()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}getChannelModeByNumber(){D.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(t,n,r={}){if(D.validation&&typeof r=="function"){let i=n!=null?[].concat(n):void 0;n=r,r={channels:i}}if($.CHANNEL_EVENTS.includes(t)){r.channels===void 0&&(r.channels=$.MIDI_CHANNEL_NUMBERS);let i=[];return F.sanitizeChannels(r.channels).forEach(a=>{i.push(this.channels[a].addListener(t,n,r))}),i}else return super.addListener(t,n,r)}addOneTimeListener(t,n,r={}){return r.remaining=1,this.addListener(t,n,r)}on(t,n,r,i){return this.addListener(t,n,r,i)}hasListener(t,n,r={}){if(D.validation&&typeof r=="function"){let i=[].concat(n);n=r,r={channels:i}}return $.CHANNEL_EVENTS.includes(t)?(r.channels===void 0&&(r.channels=$.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).every(i=>this.channels[i].hasListener(t,n))):super.hasListener(t,n)}removeListener(t,n,r={}){if(D.validation&&typeof r=="function"){let i=[].concat(n);n=r,r={channels:i}}if(r.channels===void 0&&(r.channels=$.MIDI_CHANNEL_NUMBERS),t==null)return F.sanitizeChannels(r.channels).forEach(i=>{this.channels[i]&&this.channels[i].removeListener()}),super.removeListener();$.CHANNEL_EVENTS.includes(t)?F.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].removeListener(t,n,r)}):super.removeListener(t,n,r)}addForwarder(t,n={}){let r;return t instanceof Fc?r=t:r=new Fc(t,n),this._forwarders.push(r),r}removeForwarder(t){this._forwarders=this._forwarders.filter(n=>n!==t)}hasForwarder(t){return this._forwarders.includes(t)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return D.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class ay extends Mt{constructor(){super(),this.defaults={note:{attack:F.from7bitToFloat(64),release:F.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(t={},n=!1){if(F.isNode){try{window.navigator}catch{let s=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,s)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=t.validation!==!1,this.validation&&(typeof t=="function"&&(t={callback:t,sysex:n}),n&&(t.sysex=!0)),this.enabled)return typeof t.callback=="function"&&t.callback(),Promise.resolve();const r={timestamp:this.time,target:this,type:"error",error:void 0},i={timestamp:this.time,target:this,type:"midiaccessgranted"},a={timestamp:this.time,target:this,type:"enabled"};try{typeof t.requestMIDIAccessFunction=="function"?this.interface=await t.requestMIDIAccessFunction({sysex:t.sysex,software:t.software}):this.interface=await navigator.requestMIDIAccess({sysex:t.sysex,software:t.software})}catch(o){return r.error=o,this.emit("error",r),typeof t.callback=="function"&&t.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",i),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return r.error=o,this.emit("error",r),typeof t.callback=="function"&&t.callback(o),Promise.reject(o)}return this.emit("enabled",a),typeof t.callback=="function"&&t.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let t={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",t),this.removeListener()})}getInputById(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(n.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(this._disconnectedInputs[r].id===t.toString())return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(this.inputs[r].id===t.toString())return this.inputs[r]}getInputByName(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(n.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(~this._disconnectedInputs[r].name.indexOf(t))return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(~this.inputs[r].name.indexOf(t))return this.inputs[r]}getOutputByName(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(n.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(~this._disconnectedOutputs[r].name.indexOf(t))return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(~this.outputs[r].name.indexOf(t))return this.outputs[r]}getOutputById(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(n.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(this._disconnectedOutputs[r].id===t.toString())return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(this.outputs[r].id===t.toString())return this.outputs[r]}noteNameToNumber(t){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),F.toNoteNumber(t,this.octaveOffset)}getOctave(t){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),t=parseInt(t)),!isNaN(t)&&t>=0&&t<=127?F.getNoteDetails(F.offsetNumber(t,this.octaveOffset)).octave:!1}sanitizeChannels(t){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),F.sanitizeChannels(t)}toMIDIChannels(t){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),F.sanitizeChannels(t)}guessNoteNumber(t){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),F.guessNoteNumber(t,this.octaveOffset)}getValidNoteArray(t,n={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),F.buildNoteArray(t,n)}convertToTimestamp(t){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),F.toTimestamp(t)}async _destroyInputsAndOutputs(){let t=[];return this.inputs.forEach(n=>t.push(n.destroy())),this.outputs.forEach(n=>t.push(n.destroy())),Promise.all(t).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(t){this._updateInputsAndOutputs();let n={timestamp:t.timeStamp,type:t.port.state,target:this};if(t.port.state==="connected"&&t.port.connection==="open"){t.port.type==="output"?n.port=this.getOutputById(t.port.id):t.port.type==="input"&&(n.port=this.getInputById(t.port.id)),this.emit(t.port.state,n);const r=Object.assign({},n);r.type="portschanged",this.emit(r.type,r)}else if(t.port.state==="disconnected"&&t.port.connection==="pending"){t.port.type==="input"?n.port=this.getInputById(t.port.id,{disconnected:!0}):t.port.type==="output"&&(n.port=this.getOutputById(t.port.id,{disconnected:!0})),this.emit(t.port.state,n);const r=Object.assign({},n);r.type="portschanged",this.emit(r.type,r)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let n=this._inputs.length-1;n>=0;n--){const r=this._inputs[n];Array.from(this.interface.inputs.values()).find(a=>a===r._midiInput)||(this._disconnectedInputs.push(r),this._inputs.splice(n,1))}let t=[];return this.interface.inputs.forEach(n=>{if(!this._inputs.find(r=>r._midiInput===n)){let r=this._disconnectedInputs.find(i=>i._midiInput===n);r||(r=new iy(n)),this._inputs.push(r),t.push(r.open())}}),Promise.all(t)}async _updateOutputs(){if(!this.interface)return;for(let n=this._outputs.length-1;n>=0;n--){const r=this._outputs[n];Array.from(this.interface.outputs.values()).find(a=>a===r._midiOutput)||(this._disconnectedOutputs.push(r),this._outputs.splice(n,1))}let t=[];return this.interface.outputs.forEach(n=>{if(!this._outputs.find(r=>r._midiOutput===n)){let r=this._disconnectedOutputs.find(i=>i._midiOutput===n);r||(r=new vu(n)),this._outputs.push(r),t.push(r.open())}}),Promise.all(t)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),F.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),F.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.9"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),$.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),$.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),$.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),$.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),$.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const D=new ay;D.constructor=null;const Mh=new Map,_h=new Map,oy=new Map,sy=new Map;function uy(e){return Mh.get(e)}function Eh(e){return _h.get(e)}const ly=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],cy=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],fy=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of ly)Mh.set(e.pitch,e),_h.set(e.label,e);for(const e of cy)oy.set(e.number,e);for(const e of fy){const t=`${e.number}-${e.subnumber}`;sy.set(t,e)}var dy={value:()=>{}};function Sh(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Wa(n)}function Wa(e){this._=e}function hy(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Wa.prototype=Sh.prototype={constructor:Wa,on:function(e,t){var n=this._,r=hy(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=my(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Gc(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Gc(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Wa(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function my(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Gc(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=dy,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Mu="http://www.w3.org/1999/xhtml";const Uc={svg:"http://www.w3.org/2000/svg",xhtml:Mu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Uc.hasOwnProperty(t)?{space:Uc[t],local:e}:e}function py(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Mu&&t.documentElement.namespaceURI===Mu?t.createElement(e):t.createElementNS(n,e)}}function by(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xh(e){var t=Wo(e);return(t.local?by:py)(t)}function gy(){}function Nl(e){return e==null?gy:function(){return this.querySelector(e)}}function yy(e){typeof e!="function"&&(e=Nl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),u,c,l=0;l<o;++l)(u=a[l])&&(c=e.call(u,u.__data__,l,a))&&("__data__"in u&&(c.__data__=u.__data__),s[l]=c);return new ht(r,this._parents)}function Ah(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wy(){return[]}function Ph(e){return e==null?wy:function(){return this.querySelectorAll(e)}}function vy(e){return function(){var t=e.apply(this,arguments);return t==null?[]:Ah(t)}}function My(e){typeof e=="function"?e=vy(e):e=Ph(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&(r.push(e.call(u,u.__data__,c,o)),i.push(u));return new ht(r,i)}function Nh(e){return function(){return this.matches(e)}}function Ch(e){return function(t){return t.matches(e)}}var _y=Array.prototype.find;function Ey(e){return function(){return _y.call(this.children,e)}}function Sy(){return this.firstElementChild}function xy(e){return this.select(e==null?Sy:Ey(typeof e=="function"?e:Ch(e)))}var Ay=Array.prototype.filter;function Py(){return this.children}function Ny(e){return function(){return Ay.call(this.children,e)}}function Cy(e){return this.selectAll(e==null?Py:Ny(typeof e=="function"?e:Ch(e)))}function $y(e){typeof e!="function"&&(e=Nh(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new ht(r,this._parents)}function $h(e){return new Array(e.length)}function Ty(){return new ht(this._enter||this._groups.map($h),this._parents)}function oo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}oo.prototype={constructor:oo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Iy(e){return function(){return e}}function ky(e,t,n,r,i,a){for(var o=0,s,u=t.length,c=a.length;o<c;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new oo(e,a[o]);for(;o<u;++o)(s=t[o])&&(i[o]=s)}function Dy(e,t,n,r,i,a,o){var s,u,c=new Map,l=t.length,d=a.length,f=new Array(l),h;for(s=0;s<l;++s)(u=t[s])&&(f[s]=h=o.call(u,u.__data__,s,t)+"",c.has(h)?i[s]=u:c.set(h,u));for(s=0;s<d;++s)h=o.call(e,a[s],s,a)+"",(u=c.get(h))?(r[s]=u,u.__data__=a[s],c.delete(h)):n[s]=new oo(e,a[s]);for(s=0;s<l;++s)(u=t[s])&&c.get(f[s])===u&&(i[s]=u)}function Ry(e){return e.__data__}function By(e,t){if(!arguments.length)return Array.from(this,Ry);var n=t?Dy:ky,r=this._parents,i=this._groups;typeof e!="function"&&(e=Iy(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),c=0;c<a;++c){var l=r[c],d=i[c],f=d.length,h=Ah(e.call(l,l&&l.__data__,c,r)),m=h.length,p=s[c]=new Array(m),b=o[c]=new Array(m),w=u[c]=new Array(f);n(l,d,p,b,w,h,t);for(var y=0,v=0,g,M;y<m;++y)if(g=p[y]){for(y>=v&&(v=y+1);!(M=b[v])&&++v<m;);g._next=M||null}}return o=new ht(o,r),o._enter=s,o._exit=u,o}function Oy(){return new ht(this._exit||this._groups.map($h),this._parents)}function Ly(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Fy(e){if(!(e instanceof ht))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],c=n[s],l=u.length,d=o[s]=new Array(l),f,h=0;h<l;++h)(f=u[h]||c[h])&&(d[h]=f);for(;s<r;++s)o[s]=t[s];return new ht(o,this._parents)}function Gy(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Uy(e){e||(e=qy);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),c,l=0;l<s;++l)(c=o[l])&&(u[l]=c);u.sort(t)}return new ht(i,this._parents).order()}function qy(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Hy(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Vy(){return Array.from(this)}function zy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Yy(){let e=0;for(const t of this)++e;return e}function jy(){return!this.node()}function Wy(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Xy(e){return function(){this.removeAttribute(e)}}function Ky(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zy(e,t){return function(){this.setAttribute(e,t)}}function Qy(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Jy(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function e2(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function t2(e,t){var n=Wo(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ky:Xy:typeof t=="function"?n.local?e2:Jy:n.local?Qy:Zy)(n,t))}function Th(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function n2(e){return function(){this.style.removeProperty(e)}}function r2(e,t,n){return function(){this.style.setProperty(e,t,n)}}function i2(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function a2(e,t,n){return arguments.length>1?this.each((t==null?n2:typeof t=="function"?i2:r2)(e,t,n??"")):Ar(this.node(),e)}function Ar(e,t){return e.style.getPropertyValue(t)||Th(e).getComputedStyle(e,null).getPropertyValue(t)}function o2(e){return function(){delete this[e]}}function s2(e,t){return function(){this[e]=t}}function u2(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function l2(e,t){return arguments.length>1?this.each((t==null?o2:typeof t=="function"?u2:s2)(e,t)):this.node()[e]}function Ih(e){return e.trim().split(/^|\s+/)}function Cl(e){return e.classList||new kh(e)}function kh(e){this._node=e,this._names=Ih(e.getAttribute("class")||"")}kh.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Dh(e,t){for(var n=Cl(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Rh(e,t){for(var n=Cl(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function c2(e){return function(){Dh(this,e)}}function f2(e){return function(){Rh(this,e)}}function d2(e,t){return function(){(t.apply(this,arguments)?Dh:Rh)(this,e)}}function h2(e,t){var n=Ih(e+"");if(arguments.length<2){for(var r=Cl(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?d2:t?c2:f2)(n,t))}function m2(){this.textContent=""}function p2(e){return function(){this.textContent=e}}function b2(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function g2(e){return arguments.length?this.each(e==null?m2:(typeof e=="function"?b2:p2)(e)):this.node().textContent}function y2(){this.innerHTML=""}function w2(e){return function(){this.innerHTML=e}}function v2(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function M2(e){return arguments.length?this.each(e==null?y2:(typeof e=="function"?v2:w2)(e)):this.node().innerHTML}function _2(){this.nextSibling&&this.parentNode.appendChild(this)}function E2(){return this.each(_2)}function S2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function x2(){return this.each(S2)}function A2(e){var t=typeof e=="function"?e:xh(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function P2(){return null}function N2(e,t){var n=typeof e=="function"?e:xh(e),r=t==null?P2:typeof t=="function"?t:Nl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function C2(){var e=this.parentNode;e&&e.removeChild(this)}function $2(){return this.each(C2)}function T2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function I2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function k2(e){return this.select(e?I2:T2)}function D2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function R2(e){return function(t){e.call(this,t,this.__data__)}}function B2(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function O2(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function L2(e,t,n){return function(){var r=this.__on,i,a=R2(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function F2(e,t,n){var r=B2(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,l;u<c;++u)for(i=0,l=s[u];i<a;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}return}for(s=t?L2:O2,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Bh(e,t,n){var r=Th(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function G2(e,t){return function(){return Bh(this,e,t)}}function U2(e,t){return function(){return Bh(this,e,t.apply(this,arguments))}}function q2(e,t){return this.each((typeof t=="function"?U2:G2)(e,t))}function*H2(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var V2=[null];function ht(e,t){this._groups=e,this._parents=t}function ea(){return new ht([[document.documentElement]],V2)}function z2(){return this}ht.prototype=ea.prototype={constructor:ht,select:yy,selectAll:My,selectChild:xy,selectChildren:Cy,filter:$y,data:By,enter:Ty,exit:Oy,join:Ly,merge:Fy,selection:z2,order:Gy,sort:Uy,call:Hy,nodes:Vy,node:zy,size:Yy,empty:jy,each:Wy,attr:t2,style:a2,property:l2,classed:h2,text:g2,html:M2,raise:E2,lower:x2,append:A2,insert:N2,remove:$2,clone:k2,datum:D2,on:F2,dispatch:q2,[Symbol.iterator]:H2};function $l(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Oh(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ta(){}var Ai=.7,so=1/Ai,gr="\\s*([+-]?\\d+)\\s*",Pi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y2=/^#([0-9a-f]{3,8})$/,j2=new RegExp("^rgb\\("+[gr,gr,gr]+"\\)$"),W2=new RegExp("^rgb\\("+[Bt,Bt,Bt]+"\\)$"),X2=new RegExp("^rgba\\("+[gr,gr,gr,Pi]+"\\)$"),K2=new RegExp("^rgba\\("+[Bt,Bt,Bt,Pi]+"\\)$"),Z2=new RegExp("^hsl\\("+[Pi,Bt,Bt]+"\\)$"),Q2=new RegExp("^hsla\\("+[Pi,Bt,Bt,Pi]+"\\)$"),qc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$l(ta,Ni,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Hc,formatHex:Hc,formatHsl:J2,formatRgb:Vc,toString:Vc});function Hc(){return this.rgb().formatHex()}function J2(){return Lh(this).formatHsl()}function Vc(){return this.rgb().formatRgb()}function Ni(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Y2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?zc(t):n===3?new Ke(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Pa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Pa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=j2.exec(e))?new Ke(t[1],t[2],t[3],1):(t=W2.exec(e))?new Ke(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=X2.exec(e))?Pa(t[1],t[2],t[3],t[4]):(t=K2.exec(e))?Pa(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Z2.exec(e))?Wc(t[1],t[2]/100,t[3]/100,1):(t=Q2.exec(e))?Wc(t[1],t[2]/100,t[3]/100,t[4]):qc.hasOwnProperty(e)?zc(qc[e]):e==="transparent"?new Ke(NaN,NaN,NaN,0):null}function zc(e){return new Ke(e>>16&255,e>>8&255,e&255,1)}function Pa(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ke(e,t,n,r)}function ew(e){return e instanceof ta||(e=Ni(e)),e?(e=e.rgb(),new Ke(e.r,e.g,e.b,e.opacity)):new Ke}function _u(e,t,n,r){return arguments.length===1?ew(e):new Ke(e,t,n,r??1)}function Ke(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}$l(Ke,_u,Oh(ta,{brighter:function(e){return e=e==null?so:Math.pow(so,e),new Ke(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Ai:Math.pow(Ai,e),new Ke(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yc,formatHex:Yc,formatRgb:jc,toString:jc}));function Yc(){return"#"+ks(this.r)+ks(this.g)+ks(this.b)}function jc(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ks(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Wc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new It(e,t,n,r)}function Lh(e){if(e instanceof It)return new It(e.h,e.s,e.l,e.opacity);if(e instanceof ta||(e=Ni(e)),!e)return new It;if(e instanceof It)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new It(o,s,u,e.opacity)}function Fh(e,t,n,r){return arguments.length===1?Lh(e):new It(e,t,n,r??1)}function It(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$l(It,Fh,Oh(ta,{brighter:function(e){return e=e==null?so:Math.pow(so,e),new It(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ai:Math.pow(Ai,e),new It(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ke(Ds(e>=240?e-240:e+120,i,r),Ds(e,i,r),Ds(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Ds(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Gh=e=>()=>e;function tw(e,t){return function(n){return e+n*t}}function nw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function rw(e){return(e=+e)==1?Uh:function(t,n){return n-t?nw(t,n,e):Gh(isNaN(t)?n:t)}}function Uh(e,t){var n=t-e;return n?tw(e,n):Gh(isNaN(e)?t:e)}const Eu=function e(t){var n=rw(t);function r(i,a){var o=n((i=_u(i)).r,(a=_u(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),c=Uh(i.opacity,a.opacity);return function(l){return i.r=o(l),i.g=s(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function mn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Su=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rs=new RegExp(Su.source,"g");function iw(e){return function(){return e}}function aw(e){return function(t){return e(t)+""}}function ow(e,t){var n=Su.lastIndex=Rs.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(r=Su.exec(e))&&(i=Rs.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:mn(r,i)})),n=Rs.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?aw(u[0].x):iw(t):(t=u.length,function(c){for(var l=0,d;l<t;++l)s[(d=u[l]).i]=d.x(c);return s.join("")})}var Xc=180/Math.PI,xu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qh(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Xc,skewX:Math.atan(u)*Xc,scaleX:o,scaleY:s}}var Na;function sw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xu:qh(t.a,t.b,t.c,t.d,t.e,t.f)}function uw(e){return e==null||(Na||(Na=document.createElementNS("http://www.w3.org/2000/svg","g")),Na.setAttribute("transform",e),!(e=Na.transform.baseVal.consolidate()))?xu:(e=e.matrix,qh(e.a,e.b,e.c,e.d,e.e,e.f))}function Hh(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,l,d,f,h,m){if(c!==d||l!==f){var p=h.push("translate(",null,t,null,n);m.push({i:p-4,x:mn(c,d)},{i:p-2,x:mn(l,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(c,l,d,f){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:mn(c,l)})):l&&d.push(i(d)+"rotate("+l+r)}function s(c,l,d,f){c!==l?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:mn(c,l)}):l&&d.push(i(d)+"skewX("+l+r)}function u(c,l,d,f,h,m){if(c!==d||l!==f){var p=h.push(i(h)+"scale(",null,",",null,")");m.push({i:p-4,x:mn(c,d)},{i:p-2,x:mn(l,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(c,l){var d=[],f=[];return c=e(c),l=e(l),a(c.translateX,c.translateY,l.translateX,l.translateY,d,f),o(c.rotate,l.rotate,d,f),s(c.skewX,l.skewX,d,f),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,d,f),c=l=null,function(h){for(var m=-1,p=f.length,b;++m<p;)d[(b=f[m]).i]=b.x(h);return d.join("")}}}var lw=Hh(sw,"px, ","px)","deg)"),cw=Hh(uw,", ",")",")"),Pr=0,ri=0,Wr=0,Vh=1e3,uo,ii,lo=0,Un=0,Xo=0,Ci=typeof performance=="object"&&performance.now?performance:Date,zh=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Tl(){return Un||(zh(fw),Un=Ci.now()+Xo)}function fw(){Un=0}function co(){this._call=this._time=this._next=null}co.prototype=Yh.prototype={constructor:co,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Tl():+n)+(t==null?0:+t),!this._next&&ii!==this&&(ii?ii._next=this:uo=this,ii=this),this._call=e,this._time=n,Au()},stop:function(){this._call&&(this._call=null,this._time=1/0,Au())}};function Yh(e,t,n){var r=new co;return r.restart(e,t,n),r}function dw(){Tl(),++Pr;for(var e=uo,t;e;)(t=Un-e._time)>=0&&e._call.call(null,t),e=e._next;--Pr}function Kc(){Un=(lo=Ci.now())+Xo,Pr=ri=0;try{dw()}finally{Pr=0,mw(),Un=0}}function hw(){var e=Ci.now(),t=e-lo;t>Vh&&(Xo-=t,lo=e)}function mw(){for(var e,t=uo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:uo=n);ii=e,Au(r)}function Au(e){if(!Pr){ri&&(ri=clearTimeout(ri));var t=e-Un;t>24?(e<1/0&&(ri=setTimeout(Kc,e-Ci.now()-Xo)),Wr&&(Wr=clearInterval(Wr))):(Wr||(lo=Ci.now(),Wr=setInterval(hw,Vh)),Pr=1,zh(Kc))}}function Zc(e,t,n){var r=new co;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var pw=Sh("start","end","cancel","interrupt"),bw=[],jh=0,Qc=1,Pu=2,Xa=3,Jc=4,Nu=5,Ka=6;function Ko(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;gw(e,n,{name:t,index:r,group:i,on:pw,tween:bw,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:jh})}function Il(e,t){var n=Pt(e,t);if(n.state>jh)throw new Error("too late; already scheduled");return n}function qt(e,t){var n=Pt(e,t);if(n.state>Xa)throw new Error("too late; already running");return n}function Pt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function gw(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Yh(a,0,n.time);function a(c){n.state=Qc,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var l,d,f,h;if(n.state!==Qc)return u();for(l in r)if(h=r[l],h.name===n.name){if(h.state===Xa)return Zc(o);h.state===Jc?(h.state=Ka,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=Ka,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(Zc(function(){n.state===Xa&&(n.state=Jc,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Pu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pu){for(n.state=Xa,i=new Array(f=n.tween.length),l=0,d=-1;l<f;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Nu,1),d=-1,f=i.length;++d<f;)i[d].call(e,l);n.state===Nu&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Ka,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function yw(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Pu&&r.state<Nu,r.state=Ka,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function ww(e){return this.each(function(){yw(this,e)})}function vw(e,t){var n,r;return function(){var i=qt(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Mw(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=qt(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=s;break}u===c&&i.push(s)}a.tween=i}}function _w(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Pt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?vw:Mw)(n,e,t))}function kl(e,t,n){var r=e._id;return e.each(function(){var i=qt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Pt(i,r).value[t]}}function Wh(e,t){var n;return(typeof t=="number"?mn:t instanceof Ni?Eu:(n=Ni(t))?(t=n,Eu):ow)(e,t)}function Ew(e){return function(){this.removeAttribute(e)}}function Sw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xw(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function Aw(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function Pw(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function Nw(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function Cw(e,t){var n=Wo(e),r=n==="transform"?cw:Wh;return this.attrTween(e,typeof t=="function"?(n.local?Nw:Pw)(n,r,kl(this,"attr."+e,t)):t==null?(n.local?Sw:Ew)(n):(n.local?Aw:xw)(n,r,t))}function $w(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Tw(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Iw(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Tw(e,a)),n}return i._value=t,i}function kw(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&$w(e,a)),n}return i._value=t,i}function Dw(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Wo(e);return this.tween(n,(r.local?Iw:kw)(r,t))}function Rw(e,t){return function(){Il(this,e).delay=+t.apply(this,arguments)}}function Bw(e,t){return t=+t,function(){Il(this,e).delay=t}}function Ow(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rw:Bw)(t,e)):Pt(this.node(),t).delay}function Lw(e,t){return function(){qt(this,e).duration=+t.apply(this,arguments)}}function Fw(e,t){return t=+t,function(){qt(this,e).duration=t}}function Gw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Lw:Fw)(t,e)):Pt(this.node(),t).duration}function Uw(e,t){if(typeof t!="function")throw new Error;return function(){qt(this,e).ease=t}}function qw(e){var t=this._id;return arguments.length?this.each(Uw(t,e)):Pt(this.node(),t).ease}function Hw(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;qt(this,e).ease=n}}function Vw(e){if(typeof e!="function")throw new Error;return this.each(Hw(this._id,e))}function zw(e){typeof e!="function"&&(e=Nh(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new rn(r,this._parents,this._name,this._id)}function Yw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],c=n[s],l=u.length,d=o[s]=new Array(l),f,h=0;h<l;++h)(f=u[h]||c[h])&&(d[h]=f);for(;s<r;++s)o[s]=t[s];return new rn(o,this._parents,this._name,this._id)}function jw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ww(e,t,n){var r,i,a=jw(t)?Il:qt;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function Xw(e,t){var n=this._id;return arguments.length<2?Pt(this.node(),n).on.on(e):this.each(Ww(n,e,t))}function Kw(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Zw(){return this.on("end.remove",Kw(this._id))}function Qw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Nl(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,c=a[o]=new Array(u),l,d,f=0;f<u;++f)(l=s[f])&&(d=e.call(l,l.__data__,f,s))&&("__data__"in l&&(d.__data__=l.__data__),c[f]=d,Ko(c[f],t,n,f,c,Pt(l,n)));return new rn(a,this._parents,t,n)}function Jw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ph(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],c=u.length,l,d=0;d<c;++d)if(l=u[d]){for(var f=e.call(l,l.__data__,d,u),h,m=Pt(l,n),p=0,b=f.length;p<b;++p)(h=f[p])&&Ko(h,t,n,p,f,m);a.push(f),o.push(l)}return new rn(a,o,t,n)}var e3=ea.prototype.constructor;function t3(){return new e3(this._groups,this._parents)}function n3(e,t){var n,r,i;return function(){var a=Ar(this,e),o=(this.style.removeProperty(e),Ar(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Xh(e){return function(){this.style.removeProperty(e)}}function r3(e,t,n){var r,i=n+"",a;return function(){var o=Ar(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function i3(e,t,n){var r,i,a;return function(){var o=Ar(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Ar(this,e))),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}function a3(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var u=qt(this,e),c=u.on,l=u.value[a]==null?s||(s=Xh(t)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(o,i=l),u.on=r}}function o3(e,t,n){var r=(e+="")=="transform"?lw:Wh;return t==null?this.styleTween(e,n3(e,r)).on("end.style."+e,Xh(e)):typeof t=="function"?this.styleTween(e,i3(e,r,kl(this,"style."+e,t))).each(a3(this._id,e)):this.styleTween(e,r3(e,r,t),n).on("end.style."+e,null)}function s3(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function u3(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&s3(e,o,n)),r}return a._value=t,a}function l3(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,u3(e,t,n??""))}function c3(e){return function(){this.textContent=e}}function f3(e){return function(){var t=e(this);this.textContent=t??""}}function d3(e){return this.tween("text",typeof e=="function"?f3(kl(this,"text",e)):c3(e==null?"":e+""))}function h3(e){return function(t){this.textContent=e.call(this,t)}}function m3(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&h3(i)),t}return r._value=e,r}function p3(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,m3(e))}function b3(){for(var e=this._name,t=this._id,n=Kh(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,c=0;c<s;++c)if(u=o[c]){var l=Pt(u,t);Ko(u,e,n,c,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new rn(r,this._parents,e,n)}function g3(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var c=qt(this,r),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),i===0&&a()})}var y3=0;function rn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Kh(){return++y3}var Nn=ea.prototype;rn.prototype={constructor:rn,select:Qw,selectAll:Jw,filter:zw,merge:Yw,selection:t3,transition:b3,call:Nn.call,nodes:Nn.nodes,node:Nn.node,size:Nn.size,empty:Nn.empty,each:Nn.each,on:Xw,attr:Cw,attrTween:Dw,style:o3,styleTween:l3,text:d3,textTween:p3,remove:Zw,tween:_w,delay:Ow,duration:Gw,ease:qw,easeVarying:Vw,end:g3,[Symbol.iterator]:Nn[Symbol.iterator]};function w3(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var v3={time:null,delay:0,duration:250,ease:w3};function M3(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function _3(e){var t,n;e instanceof rn?(t=e._id,e=e._name):(t=Kh(),(n=v3).time=Tl(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&Ko(u,e,t,c,o,n||M3(u,t));return new rn(r,this._parents,e,t)}ea.prototype.interrupt=ww;ea.prototype.transition=_3;function ai(e,t,n){this.k=e,this.x=t,this.y=n}ai.prototype={constructor:ai,scale:function(e){return e===1?this:new ai(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ai(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ai.prototype;var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var S3={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,s="",u,c,l=0;for(;l<r.length;)o=i.indexOf(r.charAt(l++))<<18|i.indexOf(r.charAt(l++))<<12|(u=i.indexOf(r.charAt(l++)))<<6|(c=i.indexOf(r.charAt(l++))),s+=u===64?String.fromCharCode(o>>16&255):c===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return s},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(s){i(n.Uint8(new Uint8Array(s.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let s=0;s<a;s++)o[s]=i.charCodeAt(s);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(u){return this.pointer+=u,this.pointer},readInt:function(u){if(u=Math.min(u,this.data.byteLength-this.pointer),u<1)return-1;let c=0;if(u>1)for(let l=1;l<=u-1;l++)c+=this.data.getUint8(this.pointer)*Math.pow(256,u-l),this.pointer++;return c+=this.data.getUint8(this.pointer),this.pointer++,c},readStr:function(u){let c="";for(let l=1;l<=u;l++)c+=String.fromCharCode(this.readInt(1));return c},readIntVLV:function(){let u=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)u=this.readInt(1);else{let c=[];for(;this.data.getUint8(this.pointer)>=128;)c.push(this.readInt(1)-128);let l=this.readInt(1);for(let d=1;d<=c.length;d++)u+=c[c.length-d]*Math.pow(128,d);u+=l}return u}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),s=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=s):a.timeDivision=o*256+s;for(let u=1;u<=a.tracks;u++){a.track[u-1]={event:[]};let c=i.readInt(4);if(c===-1)break;if(c!==1297379947)return!1;i.readInt(4);let l=0,d=!1,f,h;for(;!d&&(l++,a.track[u-1].event[l-1]={},a.track[u-1].event[l-1].deltaTime=i.readIntVLV(),f=i.readInt(1),f!==-1);)if(f>=128?h=f:(f=h,i.movePointer(-1)),f===255){a.track[u-1].event[l-1].type=255,a.track[u-1].event[l-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[u-1].event[l-1].metaType){case 47:case-1:d=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[u-1].event[l-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[u-1].event[l-1].data=i.readInt(m);break;case 84:a.track[u-1].event[l-1].data=[],a.track[u-1].event[l-1].data[0]=i.readInt(1),a.track[u-1].event[l-1].data[1]=i.readInt(1),a.track[u-1].event[l-1].data[2]=i.readInt(1),a.track[u-1].event[l-1].data[3]=i.readInt(1),a.track[u-1].event[l-1].data[4]=i.readInt(1);break;case 88:a.track[u-1].event[l-1].data=[],a.track[u-1].event[l-1].data[0]=i.readInt(1),a.track[u-1].event[l-1].data[1]=i.readInt(1),a.track[u-1].event[l-1].data[2]=i.readInt(1),a.track[u-1].event[l-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[u-1].event[l-1].data=this.customInterpreter(a.track[u-1].event[l-1].metaType,i,m)),(this.customInterpreter===null||a.track[u-1].event[l-1].data===!1)&&(i.readInt(m),a.track[u-1].event[l-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(f=f.toString(16).split(""),f[1]||f.unshift("0"),a.track[u-1].event[l-1].type=parseInt(f[0],16),a.track[u-1].event[l-1].channel=parseInt(f[1],16),a.track[u-1].event[l-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[u-1].event[l-1].data=this.customInterpreter(a.track[u-1].event[l-1].type,i,!1)),this.customInterpreter===null||a.track[u-1].event[l-1].data===!1){let m=i.readIntVLV();a.track[u-1].event[l-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[u-1].event[l-1].data=[],a.track[u-1].event[l-1].data[0]=i.readInt(1),a.track[u-1].event[l-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[u-1].event[l-1].data=i.readInt(1);break;case-1:d=!0;break;default:if(this.customInterpreter!==null&&(a.track[u-1].event[l-1].data=this.customInterpreter(a.track[u-1].event[l-1].metaType,i,!1)),this.customInterpreter===null||a.track[u-1].event[l-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(S3);function Zh(e){return 1/(e/60)}const Qh=[],x3=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of x3)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;Qh.push({type:e,dots:t,duration:n})}Qh.sort((e,t)=>e.duration-t.duration);function A3(e,t,n,r){e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.stroke()}class oe{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>Eh(r).pitch),this.stringCount=n.length}}new oe("E stand.",["E2","A2","D3","G3","B3","E4"]),new oe("Drop D",["D2","A2","D3","G3","B3","E4"]),new oe("Drop C",["C2","G2","C3","F3","A3","D4"]),new oe("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new oe("1 down",["D2","G2","C3","F3","A3","D4"]),new oe("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new oe("2 down",["C2","F2","A#2","D#3","G3","C4"]),new oe("DADGAG",["D2","A2","D3","G3","A3","D4"]),new oe("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new oe("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new oe("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new oe("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new oe("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new oe("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new oe("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new oe("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new oe("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new oe("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new oe("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new oe("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new oe("E stand.",["E1","A1","D2","G2"]),new oe("Drop D",["D1","A1","D2","G2"]),new oe("1/2 down",["D#1","G#1","C#2","F#2"]),new oe("1 down",["D1","G1","C2","F2"]),new oe("1 1/2 down",["C#1","F#1","B1","E2"]),new oe("2 down",["C1","F1","A#1","D#2"]),new oe("B stand.",["B0","E1","A1","D2","G2"]),new oe("Drop A",["A0","D1","A1","D2","G2"]),new oe("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new oe("1 down",["A0","D1","G1","C2","F2"]),new oe("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new oe("2 down",["G0","C1","F1","A#1","D#2"]),new oe("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new oe("Drop E",["E0","A0","D1","A1","D2","G2"]),new oe("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new oe("1 down",["E1","A0","D1","G1","C2","F2"]),new oe("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new oe("2 down",["D0","G0","C1","F1","A#1","D#2"]),new oe("Hawaii",["G4","C4","E4","A4"]),new oe("Low G",["G3","C4","E4","A4"]),new oe("D-tuning",["A4","D4","F#4","B4"]),new oe("Canadian",["A3","D4","F#4","B4"]),new oe("Bariton",["D3","G3","B3","E4"]);function Jh(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function em(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var tm=[0,2,4,-1,1,3,5],nm=tm.map(e=>Math.floor(e*7/12));function rm(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=tm[t]+7*n;if(r===void 0)return[i*a];const o=r-nm[t]-4*n;return[i*a,i*o]}var P3=[3,0,4,1,5,2,6];function N3(e){const[t,n,r]=e,i=P3[C3(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+nm[i];return{step:i,alt:a,oct:o,dir:r}}function C3(e){const t=(e+1)%7;return t<0?7+t:t}var ef=(e,t)=>Array(Math.abs(t)+1).join(e),Cu=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),$3="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",T3="(AA|A|P|M|m|d|dd)([-+]?\\d+)",I3=new RegExp("^"+$3+"|"+T3+"$");function k3(e){const t=I3.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var tf={};function fo(e){return typeof e=="string"?tf[e]||(tf[e]=D3(e)):em(e)?fo(B3(e)):Jh(e)?fo(e.name):Cu}var nf=[0,2,4,5,7,9,11],im="PMMPPMM";function D3(e){const t=k3(e);if(t[0]==="")return Cu;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=im[i];if(a==="M"&&r==="P")return Cu;const o=a==="M"?"majorable":"perfectable",s=""+n+r,u=n<0?-1:1,c=n===8||n===-8?n:u*(i+1),l=R3(o,r),d=Math.floor((Math.abs(n)-1)/7),f=u*(nf[i]+l+12*d),h=(u*(nf[i]+l)%12+12)%12,m=rm({step:i,alt:l,oct:d,dir:u});return{empty:!1,name:s,num:n,q:r,step:i,alt:l,dir:u,type:o,simple:c,semitones:f,chroma:h,coord:m,oct:d}}function R3(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function B3(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,s=i<0?"-":"",u=im[t]==="M"?"majorable":"perfectable";return s+o+O3(u,n)}function O3(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?ef("A",t):ef("d",e==="perfectable"?t:t+1)}var rf=(e,t)=>Array(Math.abs(t)+1).join(e),am=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),af=new Map,L3=e=>"CDEFGAB".charAt(e),F3=e=>e<0?rf("b",-e):rf("#",e),G3=e=>e[0]==="b"?-e.length:e.length;function $i(e){const t=JSON.stringify(e),n=af.get(t);if(n)return n;const r=typeof e=="string"?z3(e):em(e)?$i(Y3(e)):Jh(e)?$i(e.name):am;return af.set(t,r),r}var U3=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function q3(e){const t=U3.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function H3(e){return $i(N3(e))}var V3=(e,t)=>(e%t+t)%t,Bs=[0,2,4,5,7,9,11];function z3(e){const t=q3(e);if(t[0]===""||t[3]!=="")return am;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=G3(r),s=i.length?+i:void 0,u=rm({step:a,alt:o,oct:s}),c=n+r+i,l=n+r,d=(Bs[a]+o+120)%12,f=s===void 0?V3(Bs[a]+o,12)-12*99:Bs[a]+o+12*(s+1),h=f>=0&&f<=127?f:null,m=s===void 0?null:Math.pow(2,(f-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:d,coord:u,freq:m,height:f,letter:n,midi:h,name:c,oct:s,pc:l,step:a}}function Y3(e){const{step:t,alt:n,oct:r}=e,i=L3(t);if(!i)return"";const a=i+F3(n);return r||r===0?a+r:a}function j3(e,t){const n=$i(e),r=Array.isArray(t)?t:fo(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return H3(a).name}function om(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var wn={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},sm=e=>Number(e).toString(2).padStart(12,"0"),of=e=>parseInt(e,2),W3=/^[01]{12}$/;function um(e){return W3.test(e)}var X3=e=>typeof e=="number"&&e>=0&&e<=4095,K3=e=>e&&um(e.chroma),sf={[wn.chroma]:wn};function Dl(e){const t=um(e)?e:X3(e)?sm(e):Array.isArray(e)?t5(e):K3(e)?e.chroma:wn.chroma;return sf[t]=sf[t]||e5(t)}var Z3=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function Q3(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(Z3[n]);return t}function J3(e){const t=e.split("");return t.map((n,r)=>om(r,t).join(""))}function e5(e){const t=of(e),n=J3(e).map(of).filter(a=>a>=2048).sort()[0],r=sm(n),i=Q3(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function t5(e){if(e.length===0)return wn.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=$i(e[r]),t.empty&&(t=fo(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var n5=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],r5=n5;({...wn});var lm=[],Za={};function i5(e,t,n){const r=o5(e),i={...Dl(e),name:n||"",quality:r,intervals:e,aliases:t};lm.push(i),i.name&&(Za[i.name]=i),Za[i.setNum]=i,Za[i.chroma]=i,i.aliases.forEach(a=>a5(i,a))}function a5(e,t){Za[t]=e}function o5(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}r5.forEach(([e,t,n])=>i5(e.split(" "),n.split(" "),t));lm.sort((e,t)=>e.setNum-t.setNum);var s5=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],u5=s5;({...wn});var cm=[],Qa={};function l5(e,t,n){const r=f5(e),i={...Dl(e),name:n||"",quality:r,intervals:e,aliases:t};cm.push(i),i.name&&(Qa[i.name]=i),Qa[i.setNum]=i,Qa[i.chroma]=i,i.aliases.forEach(a=>c5(i,a))}function c5(e,t){Qa[t]=e}function f5(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}u5.forEach(([e,t,n])=>l5(e.split(" "),n.split(" "),t));cm.sort((e,t)=>e.setNum-t.setNum);var d5=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],h5=d5,m5={...wn,intervals:[],aliases:[]},gi={};function p5(e){return gi[e]||m5}function b5(e,t,n=[]){const r={...Dl(e),name:t,intervals:e,aliases:n};return gi[r.name]=r,gi[r.setNum]=r,gi[r.chroma]=r,r.aliases.forEach(i=>g5(r,i)),r}function g5(e,t){gi[t]=e}h5.forEach(([e,t,...n])=>b5(e.split(" "),t,n));var Rl=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],uf={...wn,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},y5=Rl.map(w5),$u={};y5.forEach(e=>{$u[e.name]=e,e.aliases.forEach(t=>{$u[t]=e})});function fm(e){return typeof e=="string"?$u[e.toLowerCase()]||uf:e&&e.name?fm(e.name):uf}function w5(e){const[t,n,r,i,a,o,s]=e,u=s?[s]:[],c=Number(n).toString(2);return{empty:!1,intervals:p5(i).intervals,modeNum:t,chroma:c,normalized:c,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:u}}function dm(e){return(t,n)=>{const r=fm(t);if(r.empty)return[];const i=om(r.modeNum,e),a=r.intervals.map(o=>j3(n,o));return i.map((o,s)=>a[s]+o)}}dm(Rl.map(e=>e[4]));dm(Rl.map(e=>e[5]));class dn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>Eh(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="°",s-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="°",s-=12;const u=uy(i).name;n.set(i,{number:a,letterString:`${u}${o}`})}return[...n.values()].map(r=>r.letterString)}}new dn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new dn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new dn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new dn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new dn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new dn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new dn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new dn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function v5(e,t=1){const n=Fh(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>v5(e,.5));const M5=Eu("black","steelblue");Array.from({length:12}).map((e,t)=>M5(t/11));var hm={exports:{}};(function(e,t){(function(n,r){r()})(Xr,function(){function n(c,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,l,d){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){u(f.response,l,d)},f.onerror=function(){console.error("could not download file")},f.send()}function i(c){var l=new XMLHttpRequest;l.open("HEAD",c,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function a(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(l)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Xr=="object"&&Xr.global===Xr?Xr:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(c,l,d){var f=o.URL||o.webkitURL,h=document.createElement("a");l=l||c.name||"download",h.download=l,h.rel="noopener",typeof c=="string"?(h.href=c,h.origin===location.origin?a(h):i(h.href)?r(c,l,d):a(h,h.target="_blank")):(h.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(h.href)},4e4),setTimeout(function(){a(h)},0))}:"msSaveOrOpenBlob"in navigator?function(c,l,d){if(l=l||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),l);else if(i(c))r(c,l,d);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){a(f)})}}:function(c,l,d,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return r(c,l,d);var h=c.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||h&&m||s)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var v=b.result;v=p?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=v:location=v,f=null},b.readAsDataURL(c)}else{var w=o.URL||o.webkitURL,y=w.createObjectURL(c);f?f.location=y:location.href=y,f=null,setTimeout(function(){w.revokeObjectURL(y)},4e4)}});o.saveAs=u.saveAs=u,e.exports=u})})(hm);var _5=hm.exports;const Bl=E3(_5);function lf(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function E5(e,t,n,r,i,a){const o=new Float64Array(a),s=(a-1)/(i-r);for(let u=0;u<e.length;++u){const c=e[u],l=t(c,u,e),d=n(c,u,e);if(!(Number.isFinite(l)&&Number.isFinite(d)))continue;const f=(l-r)*s,h=Math.floor(f),m=h+1;0<=h&&m<a?(o[h]+=(m-f)*d,o[m]+=(f-h)*d):h===-1?o[m]+=(f-h)*d:m===a&&(o[h]+=(m-f)*d)}return o}function cf(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);S5(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,s=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:s}}function S5(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),s=.6318/n,u=1.997/n,c=Float64Array.of(-a*Math.cos(s),a*Math.sin(s),-a*Math.cos(-s),a*Math.sin(-s),-o*Math.cos(u),o*Math.sin(u),-o*Math.cos(-u),o*Math.sin(-u)),l=n*2.5066282746310007,d=Float64Array.of(i[0],i[1],0,0,0,0,0,0),f=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let h,m;for(m=2;m<8;m+=2){for(d[m]=c[m]*d[m-2]-c[m+1]*d[m-1],d[m+1]=c[m]*d[m-1]+c[m+1]*d[m-2],h=m-2;h>0;h-=2)d[h]+=c[m]*d[h-2]-c[m+1]*d[h-1],d[h+1]+=c[m]*d[h-1]+c[m+1]*d[h-2];for(h=0;h<=m;h+=2)d[h]+=i[m]*f[h]-i[m+1]*f[h+1],d[h+1]+=i[m]*f[h+1]+i[m+1]*f[h];for(f[m+2]=c[m]*f[m]-c[m+1]*f[m+1],f[m+3]=c[m]*f[m+1]+c[m+1]*f[m],h=m;h>0;h-=2)f[h]+=c[m]*f[h-2]-c[m+1]*f[h-1],f[h+1]+=c[m]*f[h-1]+c[m+1]*f[h-2]}for(m=0;m<4;++m)h=m<<1,t[m]=d[h]/l,e[m+1]=f[h+2]}function x5(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),s=i,u=A5){const c=r*2,l=r*3,d=r*4,f=r*n;let h,m;for(u(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,h=d;m<n;++m,h+=r)i[m]=e.b_causal[0]*t[h]+e.b_causal[1]*t[h-r]+e.b_causal[2]*t[h-c]+e.b_causal[3]*t[h-l]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(u(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,h=f-r*5;m<n;++m,h-=r)a[m]=e.b_anticausal[1]*t[h+r]+e.b_anticausal[2]*t[h+c]+e.b_anticausal[3]*t[h+l]+e.b_anticausal[4]*t[h+d]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,h=0;m<n;++m,h+=r)s[h]=i[m]+a[n-m-1];else for(m=0,h=0;m<n;++m,h+=r)s[h]=Math.max(0,i[m]+a[n-m-1]);return s}function A5(e,t,n,r,i,a,o,s,u,c,l,d=.5){const f=Math.abs(r)*n,h=r<0?f+r:0;let m,p,b;for(p=0;p<s;++p)for(c[p]=p<=a?i[p]:0,b=1;b<=s&&b<=p;++b)c[p]-=o[b]*c[p-b];for(b=0;b<s;++b)for(e[b]=0,p=1;p<=b;++p)m=h+r*p,m>=0&&m<f&&(e[b]+=c[b-p]*t[m]);const w=t[h],y=Math.ceil(l*10);for(p=0;p<y;++p){for(b=0;b<s;++b)e[b]+=c[b]*w;if(u-=Math.abs(c[0]),u<=d)break;for(c[s]=p+s<=a?i[p+s]:0,b=1;b<=s;++b)c[s]-=o[b]*c[s-b];for(b=0;b<s;++b)c[b]=c[b+1]}}function P5(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const s=t(e[o],o,e);s!=null&&(i===void 0?s>=s&&(i=a=s):(s<i&&(i=s),s>a&&(a=s)))}return[i-n,a+n]}function N5(e,t){const n=e.map(t).filter(c=>c!=null&&c>=c);n.sort((c,l)=>c-l);const r=C5(n),i=ff(n,.25),a=ff(n,.75),o=n.length,s=(a-i)/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function C5(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const s=e[o];r=s-i,i+=r/++n,a+=r*(s-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function ff(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function $5(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=lf(t.x,w=>w),o=lf(t.weight,()=>1/e.length);let s=t.bandwidth??n*N5(e,a);const[u,c]=t.extent??P5(e,a,r*s),l=E5(e,a,o,u,c,i),d=(c-u)/(i-1),f=l.some(w=>w<0);let h=cf(s/d,f),m;function*p(w="x",y="y"){const v=b.grid(),g=1/d;for(let M=0;M<i;++M)yield{[w]:u+M*d,[y]:v[M]*g}}const b={[Symbol.iterator]:p,points:p,grid:()=>m||(m=x5(h,l,i)),extent:()=>[u,c],bandwidth(w){return arguments.length?(w!==s&&(s=w,m=null,h=cf(s/d,f)),b):s}};return b}function Ur(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function na(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function _n(){}var qn=.7,Nr=1/qn,yr="\\s*([+-]?\\d+)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",T5=/^#([0-9a-f]{3,8})$/,I5=new RegExp(`^rgb\\(${yr},${yr},${yr}\\)$`),k5=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),D5=new RegExp(`^rgba\\(${yr},${yr},${yr},${Ti}\\)$`),R5=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${Ti}\\)$`),B5=new RegExp(`^hsl\\(${Ti},${Ot},${Ot}\\)$`),O5=new RegExp(`^hsla\\(${Ti},${Ot},${Ot},${Ti}\\)$`),df={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ur(_n,Hn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hf,formatHex:hf,formatHex8:L5,formatHsl:F5,formatRgb:mf,toString:mf});function hf(){return this.rgb().formatHex()}function L5(){return this.rgb().formatHex8()}function F5(){return mm(this).formatHsl()}function mf(){return this.rgb().formatRgb()}function Hn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=T5.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pf(t):n===3?new Re(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ca(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ca(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=I5.exec(e))?new Re(t[1],t[2],t[3],1):(t=k5.exec(e))?new Re(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=D5.exec(e))?Ca(t[1],t[2],t[3],t[4]):(t=R5.exec(e))?Ca(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=B5.exec(e))?yf(t[1],t[2]/100,t[3]/100,1):(t=O5.exec(e))?yf(t[1],t[2]/100,t[3]/100,t[4]):df.hasOwnProperty(e)?pf(df[e]):e==="transparent"?new Re(NaN,NaN,NaN,0):null}function pf(e){return new Re(e>>16&255,e>>8&255,e&255,1)}function Ca(e,t,n,r){return r<=0&&(e=t=n=NaN),new Re(e,t,n,r)}function Ol(e){return e instanceof _n||(e=Hn(e)),e?(e=e.rgb(),new Re(e.r,e.g,e.b,e.opacity)):new Re}function vn(e,t,n,r){return arguments.length===1?Ol(e):new Re(e,t,n,r??1)}function Re(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ur(Re,vn,na(_n,{brighter(e){return e=e==null?Nr:Math.pow(Nr,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qn:Math.pow(qn,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Re(Rn(this.r),Rn(this.g),Rn(this.b),ho(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bf,formatHex:bf,formatHex8:G5,formatRgb:gf,toString:gf}));function bf(){return`#${In(this.r)}${In(this.g)}${In(this.b)}`}function G5(){return`#${In(this.r)}${In(this.g)}${In(this.b)}${In((isNaN(this.opacity)?1:this.opacity)*255)}`}function gf(){const e=ho(this.opacity);return`${e===1?"rgb(":"rgba("}${Rn(this.r)}, ${Rn(this.g)}, ${Rn(this.b)}${e===1?")":`, ${e})`}`}function ho(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function In(e){return e=Rn(e),(e<16?"0":"")+e.toString(16)}function yf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new vt(e,t,n,r)}function mm(e){if(e instanceof vt)return new vt(e.h,e.s,e.l,e.opacity);if(e instanceof _n||(e=Hn(e)),!e)return new vt;if(e instanceof vt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new vt(o,s,u,e.opacity)}function Tu(e,t,n,r){return arguments.length===1?mm(e):new vt(e,t,n,r??1)}function vt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ur(vt,Tu,na(_n,{brighter(e){return e=e==null?Nr:Math.pow(Nr,e),new vt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qn:Math.pow(qn,e),new vt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Re(Os(e>=240?e-240:e+120,i,r),Os(e,i,r),Os(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new vt(wf(this.h),$a(this.s),$a(this.l),ho(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ho(this.opacity);return`${e===1?"hsl(":"hsla("}${wf(this.h)}, ${$a(this.s)*100}%, ${$a(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wf(e){return e=(e||0)%360,e<0?e+360:e}function $a(e){return Math.max(0,Math.min(1,e||0))}function Os(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const pm=Math.PI/180,bm=180/Math.PI,mo=18,gm=.96422,ym=1,wm=.82521,vm=4/29,wr=6/29,Mm=3*wr*wr,U5=wr*wr*wr;function _m(e){if(e instanceof Lt)return new Lt(e.l,e.a,e.b,e.opacity);if(e instanceof Jt)return Em(e);e instanceof Re||(e=Ol(e));var t=Us(e.r),n=Us(e.g),r=Us(e.b),i=Ls((.2225045*t+.7168786*n+.0606169*r)/ym),a,o;return t===n&&n===r?a=o=i:(a=Ls((.4360747*t+.3850649*n+.1430804*r)/gm),o=Ls((.0139322*t+.0971045*n+.7141733*r)/wm)),new Lt(116*i-16,500*(a-i),200*(i-o),e.opacity)}function Iu(e,t,n,r){return arguments.length===1?_m(e):new Lt(e,t,n,r??1)}function Lt(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ur(Lt,Iu,na(_n,{brighter(e){return new Lt(this.l+mo*(e??1),this.a,this.b,this.opacity)},darker(e){return new Lt(this.l-mo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=gm*Fs(t),e=ym*Fs(e),n=wm*Fs(n),new Re(Gs(3.1338561*t-1.6168667*e-.4906146*n),Gs(-.9787684*t+1.9161415*e+.033454*n),Gs(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Ls(e){return e>U5?Math.pow(e,1/3):e/Mm+vm}function Fs(e){return e>wr?e*e*e:Mm*(e-vm)}function Gs(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Us(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function q5(e){if(e instanceof Jt)return new Jt(e.h,e.c,e.l,e.opacity);if(e instanceof Lt||(e=_m(e)),e.a===0&&e.b===0)return new Jt(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*bm;return new Jt(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ku(e,t,n,r){return arguments.length===1?q5(e):new Jt(e,t,n,r??1)}function Jt(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Em(e){if(isNaN(e.h))return new Lt(e.l,0,0,e.opacity);var t=e.h*pm;return new Lt(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ur(Jt,ku,na(_n,{brighter(e){return new Jt(this.h,this.c,this.l+mo*(e??1),this.opacity)},darker(e){return new Jt(this.h,this.c,this.l-mo*(e??1),this.opacity)},rgb(){return Em(this).rgb()}}));var Sm=-.14861,Ll=1.78277,Fl=-.29227,Zo=-.90649,Ii=1.97294,vf=Ii*Zo,Mf=Ii*Ll,_f=Ll*Fl-Zo*Sm;function H5(e){if(e instanceof Bn)return new Bn(e.h,e.s,e.l,e.opacity);e instanceof Re||(e=Ol(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(_f*r+vf*t-Mf*n)/(_f+vf-Mf),a=r-i,o=(Ii*(n-i)-Fl*a)/Zo,s=Math.sqrt(o*o+a*a)/(Ii*i*(1-i)),u=s?Math.atan2(o,a)*bm-120:NaN;return new Bn(u<0?u+360:u,s,i,e.opacity)}function Ft(e,t,n,r){return arguments.length===1?H5(e):new Bn(e,t,n,r??1)}function Bn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ur(Bn,Ft,na(_n,{brighter(e){return e=e==null?Nr:Math.pow(Nr,e),new Bn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qn:Math.pow(qn,e),new Bn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*pm,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Re(255*(t+n*(Sm*r+Ll*i)),255*(t+n*(Fl*r+Zo*i)),255*(t+n*(Ii*r)),this.opacity)}}));function ze(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ra(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qo(e){let t,n,r;e.length!==2?(t=ze,n=(s,u)=>ze(e(s),u),r=(s,u)=>e(s)-u):(t=e===ze||e===ra?e:V5,n=e,r=e);function i(s,u,c=0,l=s.length){if(c<l){if(t(u,u)!==0)return l;do{const d=c+l>>>1;n(s[d],u)<0?c=d+1:l=d}while(c<l)}return c}function a(s,u,c=0,l=s.length){if(c<l){if(t(u,u)!==0)return l;do{const d=c+l>>>1;n(s[d],u)<=0?c=d+1:l=d}while(c<l)}return c}function o(s,u,c=0,l=s.length){const d=i(s,u,c,l-1);return d>c&&r(s[d-1],u)>-r(s[d],u)?d-1:d}return{left:i,center:o,right:a}}function V5(){return 0}function xm(e){return e===null?NaN:+e}function*z5(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Y5=Qo(ze),Jo=Y5.right;Qo(xm).center;function j5(e,t){let n=0;for(let r of e)r!=null&&(r=+r)>=r&&++n;return n}function W5(e){return e.length|0}function X5(e){return!(e>0)}function K5(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function Z5(e){return t=>e(...t)}function Q5(...e){const t=typeof e[e.length-1]=="function"&&Z5(e.pop());e=e.map(K5);const n=e.map(W5),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(X5))return a;for(;;){a.push(i.map((s,u)=>e[u][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function J5(e,t){var n=0;return Float64Array.from(e,r=>n+=+r||0)}function Am(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function e7(e,t){const n=Am(e,t);return n&&Math.sqrt(n)}function Et(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Vn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,s=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);s&&(n[r++]=s),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class zn extends Map{constructor(t,n=Cm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Du(this,t))}has(t){return super.has(Du(this,t))}set(t,n){return super.set(Pm(this,t),n)}delete(t){return super.delete(Nm(this,t))}}class es extends Set{constructor(t,n=Cm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Du(this,t))}add(t){return super.add(Pm(this,t))}delete(t){return super.delete(Nm(this,t))}}function Du({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Pm({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Nm({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Cm(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ki(e){return e}function $m(e,...t){return ts(e,ki,ki,t)}function t7(e,...t){return ts(e,Array.from,ki,t)}function yi(e,t,...n){return ts(e,ki,t,n)}function n7(e,t,...n){return ts(e,Array.from,t,n)}function ts(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new zn,u=r[o++];let c=-1;for(const l of a){const d=u(l,++c,a),f=s.get(d);f?f.push(l):s.set(d,[l])}for(const[l,d]of s)s.set(l,i(d,o));return t(s)}(e,0)}function r7(e,t){return Array.from(t,n=>e[n])}function Ru(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const s=po(o[i],o[a]);if(s)return s}})):(n=e.map(n),r.sort((i,a)=>po(n[i],n[a]))),r7(e,r)}return e.sort(Tm(n))}function Tm(e=ze){if(e===ze)return po;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function po(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Gl(e,t,n){return(t.length!==2?Ru(yi(e,t,n),([r,i],[a,o])=>ze(i,o)||ze(r,a)):Ru($m(e,n),([r,i],[a,o])=>t(i,o)||ze(r,a))).map(([r])=>r)}var i7=Array.prototype,a7=i7.slice;function qs(e){return()=>e}const o7=Math.sqrt(50),s7=Math.sqrt(10),u7=Math.sqrt(2);function bo(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=o7?10:a>=s7?5:a>=u7?2:1;let s,u,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(e*c),u=Math.round(t*c),s/c<e&&++s,u/c>t&&--u,c=-c):(c=Math.pow(10,i)*o,s=Math.round(e/c),u=Math.round(t/c),s*c<e&&++s,u*c>t&&--u),u<s&&.5<=n&&n<2?bo(e,t,n*2):[s,u,c]}function Di(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?bo(t,e,n):bo(e,t,n);if(!(a>=i))return[];const s=a-i+1,u=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)u[c]=(a-c)/-o;else for(let c=0;c<s;++c)u[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)u[c]=(i+c)/-o;else for(let c=0;c<s;++c)u[c]=(i+c)*o;return u}function Cr(e,t,n){return t=+t,e=+e,n=+n,bo(e,t,n)[2]}function Bu(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Cr(t,e,n):Cr(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function l7(e,t,n){let r;for(;;){const i=Cr(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function c7(e){return Math.max(1,Math.ceil(Math.log(j5(e))/Math.LN2)+1)}function f7(){var e=ki,t=Et,n=c7;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,u,c=new Array(o);for(a=0;a<o;++a)c[a]=e(i[a],a,i);var l=t(c),d=l[0],f=l[1],h=n(c,d,f);if(!Array.isArray(h)){const v=f,g=+h;if(t===Et&&([d,f]=l7(d,f,g)),h=Di(d,f,g),h[0]<=d&&(u=Cr(d,f,g)),h[h.length-1]>=f)if(v>=f&&t===Et){const M=Cr(d,f,g);isFinite(M)&&(M>0?f=(Math.floor(f/M)+1)*M:M<0&&(f=(Math.ceil(f*-M)+1)/-M))}else h.pop()}for(var m=h.length,p=0,b=m;h[p]<=d;)++p;for(;h[b-1]>f;)--b;(p||b<m)&&(h=h.slice(p,b),m=b-p);var w=new Array(m+1),y;for(a=0;a<=m;++a)y=w[a]=[],y.x0=a>0?h[a-1]:d,y.x1=a<m?h[a]:f;if(isFinite(u)){if(u>0)for(a=0;a<o;++a)(s=c[a])!=null&&d<=s&&s<=f&&w[Math.min(m,Math.floor((s-d)/u))].push(i[a]);else if(u<0){for(a=0;a<o;++a)if((s=c[a])!=null&&d<=s&&s<=f){const v=Math.floor((d-s)*u);w[Math.min(m,v+(h[v]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=c[a])!=null&&d<=s&&s<=f&&w[Jo(h,s,0,m)].push(i[a]);return w}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:qs(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:qs([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:qs(Array.isArray(i)?a7.call(i):i),r):n},r}function Je(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function d7(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function an(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function h7(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Im(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?po:Tm(i);r>n;){if(r-n>600){const u=r-n+1,c=t-n+1,l=Math.log(u),d=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*d*(u-d)/u)*(c-u/2<0?-1:1),h=Math.max(n,Math.floor(t-c*d/u+f)),m=Math.min(r,Math.floor(t+(u-c)*d/u+f));Im(e,t,h,m,i)}const a=e[t];let o=n,s=r;for(Kr(e,n,t),i(e[r],a)>0&&Kr(e,n,r);o<s;){for(Kr(e,o,s),++o,--s;i(e[o],a)<0;)++o;for(;i(e[s],a)>0;)--s}i(e[n],a)===0?Kr(e,n,s):(++s,Kr(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Kr(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function km(e,t=ze){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?ze(o,i)>0:ze(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function go(e,t,n){if(e=Float64Array.from(z5(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return an(e);if(t>=1)return Je(e);var r,i=(r-1)*t,a=Math.floor(i),o=Je(Im(e,a).subarray(0,a+1)),s=an(e.subarray(a+1));return o+(s-o)*(i-a)}}function m7(e,t,n=xm){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function Dm(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function Ou(e,t){return go(e,.5,t)}function*p7(e){for(const t of e)yield*t}function Rm(e){return Array.from(p7(e))}function b7(e,t){const n=new zn;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function g7(e,t=y7){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function y7(e,t){return[e,t]}function On(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Yn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function yo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function w7(e){return e}var v7=3,Ef=1e-6;function M7(e){return"translate("+e+",0)"}function _7(e){return t=>+e(t)}function E7(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function S7(){return!this.__axis}function x7(e,t){var n=[],r=null,i=null,a=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1,l="y",d=M7;function f(h){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):w7),b=Math.max(a,0)+s,w=t.range(),y=+w[0]+u,v=+w[w.length-1]+u,g=(t.bandwidth?E7:_7)(t.copy(),u),M=h.selection?h.selection():h,_=M.selectAll(".domain").data([null]),x=M.selectAll(".tick").data(m,t).order(),A=x.exit(),N=x.enter().append("g").attr("class","tick"),B=x.select("line"),S=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(N),B=B.merge(N.append("line").attr("stroke","currentColor").attr(l+"2",c*a)),S=S.merge(N.append("text").attr("fill","currentColor").attr(l,c*b).attr("dy","0.71em")),h!==M&&(_=_.transition(h),x=x.transition(h),B=B.transition(h),S=S.transition(h),A=A.transition(h).attr("opacity",Ef).attr("transform",function(U){return isFinite(U=g(U))?d(U+u):this.getAttribute("transform")}),N.attr("opacity",Ef).attr("transform",function(U){var L=this.parentNode.__axis;return d((L&&isFinite(L=L(U))?L:g(U))+u)})),A.remove(),_.attr("d",o?"M"+y+","+c*o+"V"+u+"H"+v+"V"+c*o:"M"+y+","+u+"H"+v),x.attr("opacity",1).attr("transform",function(U){return d(g(U)+u)}),B.attr(l+"2",c*a),S.attr(l,c*b).text(p),M.filter(S7).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),M.each(function(){this.__axis=g})}return f.scale=function(h){return arguments.length?(t=h,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),f):n.slice()},f.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),f):r&&r.slice()},f.tickFormat=function(h){return arguments.length?(i=h,f):i},f.tickSize=function(h){return arguments.length?(a=o=+h,f):a},f.tickSizeInner=function(h){return arguments.length?(a=+h,f):a},f.tickSizeOuter=function(h){return arguments.length?(o=+h,f):o},f.tickPadding=function(h){return arguments.length?(s=+h,f):s},f.offset=function(h){return arguments.length?(u=+h,f):u},f}function A7(e){return x7(v7,e)}var P7={value:()=>{}};function Bm(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ja(n)}function Ja(e){this._=e}function N7(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ja.prototype=Bm.prototype={constructor:Ja,on:function(e,t){var n=this._,r=N7(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=C7(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Sf(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Sf(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ja(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function C7(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Sf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=P7,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Lu="http://www.w3.org/1999/xhtml";const $r={svg:"http://www.w3.org/2000/svg",xhtml:Lu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ns(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$r.hasOwnProperty(t)?{space:$r[t],local:e}:e}function $7(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Lu&&t.documentElement.namespaceURI===Lu?t.createElement(e):t.createElementNS(n,e)}}function T7(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rs(e){var t=ns(e);return(t.local?T7:$7)(t)}function I7(){}function Ul(e){return e==null?I7:function(){return this.querySelector(e)}}function k7(e){typeof e!="function"&&(e=Ul(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),u,c,l=0;l<o;++l)(u=a[l])&&(c=e.call(u,u.__data__,l,a))&&("__data__"in u&&(c.__data__=u.__data__),s[l]=c);return new et(r,this._parents)}function D7(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function R7(){return[]}function Om(e){return e==null?R7:function(){return this.querySelectorAll(e)}}function B7(e){return function(){return D7(e.apply(this,arguments))}}function O7(e){typeof e=="function"?e=B7(e):e=Om(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&(r.push(e.call(u,u.__data__,c,o)),i.push(u));return new et(r,i)}function Lm(e){return function(){return this.matches(e)}}function Fm(e){return function(t){return t.matches(e)}}var L7=Array.prototype.find;function F7(e){return function(){return L7.call(this.children,e)}}function G7(){return this.firstElementChild}function U7(e){return this.select(e==null?G7:F7(typeof e=="function"?e:Fm(e)))}var q7=Array.prototype.filter;function H7(){return Array.from(this.children)}function V7(e){return function(){return q7.call(this.children,e)}}function z7(e){return this.selectAll(e==null?H7:V7(typeof e=="function"?e:Fm(e)))}function Y7(e){typeof e!="function"&&(e=Lm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new et(r,this._parents)}function Gm(e){return new Array(e.length)}function j7(){return new et(this._enter||this._groups.map(Gm),this._parents)}function wo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wo.prototype={constructor:wo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function W7(e){return function(){return e}}function X7(e,t,n,r,i,a){for(var o=0,s,u=t.length,c=a.length;o<c;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new wo(e,a[o]);for(;o<u;++o)(s=t[o])&&(i[o]=s)}function K7(e,t,n,r,i,a,o){var s,u,c=new Map,l=t.length,d=a.length,f=new Array(l),h;for(s=0;s<l;++s)(u=t[s])&&(f[s]=h=o.call(u,u.__data__,s,t)+"",c.has(h)?i[s]=u:c.set(h,u));for(s=0;s<d;++s)h=o.call(e,a[s],s,a)+"",(u=c.get(h))?(r[s]=u,u.__data__=a[s],c.delete(h)):n[s]=new wo(e,a[s]);for(s=0;s<l;++s)(u=t[s])&&c.get(f[s])===u&&(i[s]=u)}function Z7(e){return e.__data__}function Q7(e,t){if(!arguments.length)return Array.from(this,Z7);var n=t?K7:X7,r=this._parents,i=this._groups;typeof e!="function"&&(e=W7(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),c=0;c<a;++c){var l=r[c],d=i[c],f=d.length,h=J7(e.call(l,l&&l.__data__,c,r)),m=h.length,p=s[c]=new Array(m),b=o[c]=new Array(m),w=u[c]=new Array(f);n(l,d,p,b,w,h,t);for(var y=0,v=0,g,M;y<m;++y)if(g=p[y]){for(y>=v&&(v=y+1);!(M=b[v])&&++v<m;);g._next=M||null}}return o=new et(o,r),o._enter=s,o._exit=u,o}function J7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ev(){return new et(this._exit||this._groups.map(Gm),this._parents)}function tv(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function nv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var c=n[u],l=r[u],d=c.length,f=s[u]=new Array(d),h,m=0;m<d;++m)(h=c[m]||l[m])&&(f[m]=h);for(;u<i;++u)s[u]=n[u];return new et(s,this._parents)}function rv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function iv(e){e||(e=av);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),c,l=0;l<s;++l)(c=o[l])&&(u[l]=c);u.sort(t)}return new et(i,this._parents).order()}function av(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ov(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sv(){return Array.from(this)}function uv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function lv(){let e=0;for(const t of this)++e;return e}function cv(){return!this.node()}function fv(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function dv(e){return function(){this.removeAttribute(e)}}function hv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mv(e,t){return function(){this.setAttribute(e,t)}}function pv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function bv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yv(e,t){var n=ns(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?hv:dv:typeof t=="function"?n.local?gv:bv:n.local?pv:mv)(n,t))}function Um(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wv(e){return function(){this.style.removeProperty(e)}}function vv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Mv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function _v(e,t,n){return arguments.length>1?this.each((t==null?wv:typeof t=="function"?Mv:vv)(e,t,n??"")):Tr(this.node(),e)}function Tr(e,t){return e.style.getPropertyValue(t)||Um(e).getComputedStyle(e,null).getPropertyValue(t)}function Ev(e){return function(){delete this[e]}}function Sv(e,t){return function(){this[e]=t}}function xv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Av(e,t){return arguments.length>1?this.each((t==null?Ev:typeof t=="function"?xv:Sv)(e,t)):this.node()[e]}function qm(e){return e.trim().split(/^|\s+/)}function ql(e){return e.classList||new Hm(e)}function Hm(e){this._node=e,this._names=qm(e.getAttribute("class")||"")}Hm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vm(e,t){for(var n=ql(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function zm(e,t){for(var n=ql(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Pv(e){return function(){Vm(this,e)}}function Nv(e){return function(){zm(this,e)}}function Cv(e,t){return function(){(t.apply(this,arguments)?Vm:zm)(this,e)}}function $v(e,t){var n=qm(e+"");if(arguments.length<2){for(var r=ql(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Cv:t?Pv:Nv)(n,t))}function Tv(){this.textContent=""}function Iv(e){return function(){this.textContent=e}}function kv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Dv(e){return arguments.length?this.each(e==null?Tv:(typeof e=="function"?kv:Iv)(e)):this.node().textContent}function Rv(){this.innerHTML=""}function Bv(e){return function(){this.innerHTML=e}}function Ov(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Lv(e){return arguments.length?this.each(e==null?Rv:(typeof e=="function"?Ov:Bv)(e)):this.node().innerHTML}function Fv(){this.nextSibling&&this.parentNode.appendChild(this)}function Gv(){return this.each(Fv)}function Uv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qv(){return this.each(Uv)}function Hv(e){var t=typeof e=="function"?e:rs(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Vv(){return null}function zv(e,t){var n=typeof e=="function"?e:rs(e),r=t==null?Vv:typeof t=="function"?t:Ul(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Yv(){var e=this.parentNode;e&&e.removeChild(this)}function jv(){return this.each(Yv)}function Wv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kv(e){return this.select(e?Xv:Wv)}function Zv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Qv(e){return function(t){e.call(this,t,this.__data__)}}function Jv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function e6(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function t6(e,t,n){return function(){var r=this.__on,i,a=Qv(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function n6(e,t,n){var r=Jv(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,l;u<c;++u)for(i=0,l=s[u];i<a;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}return}for(s=t?t6:e6,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Ym(e,t,n){var r=Um(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function r6(e,t){return function(){return Ym(this,e,t)}}function i6(e,t){return function(){return Ym(this,e,t.apply(this,arguments))}}function a6(e,t){return this.each((typeof t=="function"?i6:r6)(e,t))}function*o6(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var jm=[null];function et(e,t){this._groups=e,this._parents=t}function ia(){return new et([[document.documentElement]],jm)}function s6(){return this}et.prototype=ia.prototype={constructor:et,select:k7,selectAll:O7,selectChild:U7,selectChildren:z7,filter:Y7,data:Q7,enter:j7,exit:ev,join:tv,merge:nv,selection:s6,order:rv,sort:iv,call:ov,nodes:sv,node:uv,size:lv,empty:cv,each:fv,attr:yv,style:_v,property:Av,classed:$v,text:Dv,html:Lv,raise:Gv,lower:qv,append:Hv,insert:zv,remove:jv,clone:Kv,datum:Zv,on:n6,dispatch:a6,[Symbol.iterator]:o6};function wi(e){return typeof e=="string"?new et([[document.querySelector(e)]],[document.documentElement]):new et([[e]],jm)}function u6(e){let t;for(;t=e.sourceEvent;)e=t;return e}function l6(e,t){if(e=u6(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function c6(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function f6(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return c6((n-r/t)*t,o,i,a,s)}}const is=e=>()=>e;function Wm(e,t){return function(n){return e+n*t}}function d6(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Hl(e,t){var n=t-e;return n?Wm(e,n>180||n<-180?n-360*Math.round(n/360):n):is(isNaN(e)?t:e)}function h6(e){return(e=+e)==1?Ge:function(t,n){return n-t?d6(t,n,e):is(isNaN(t)?n:t)}}function Ge(e,t){var n=t-e;return n?Wm(e,n):is(isNaN(e)?t:e)}const jn=function e(t){var n=h6(t);function r(i,a){var o=n((i=vn(i)).r,(a=vn(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),c=Ge(i.opacity,a.opacity);return function(l){return i.r=o(l),i.g=s(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function m6(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=vn(t[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=e(r),i=e(i),a=e(a),s.opacity=1,function(u){return s.r=r(u),s.g=i(u),s.b=a(u),s+""}}}var p6=m6(f6);function b6(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function g6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function y6(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=aa(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function w6(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Fe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function v6(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=aa(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Fu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hs=new RegExp(Fu.source,"g");function M6(e){return function(){return e}}function _6(e){return function(t){return e(t)+""}}function Xm(e,t){var n=Fu.lastIndex=Hs.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(r=Fu.exec(e))&&(i=Hs.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:Fe(r,i)})),n=Hs.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?_6(u[0].x):M6(t):(t=u.length,function(c){for(var l=0,d;l<t;++l)s[(d=u[l]).i]=d.x(c);return s.join("")})}function aa(e,t){var n=typeof t,r;return t==null||n==="boolean"?is(t):(n==="number"?Fe:n==="string"?(r=Hn(t))?(t=r,jn):Xm:t instanceof Hn?jn:t instanceof Date?w6:g6(t)?b6:Array.isArray(t)?y6:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?v6:Fe)(e,t)}function Vl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var xf=180/Math.PI,Gu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Km(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*xf,skewX:Math.atan(u)*xf,scaleX:o,scaleY:s}}var Ta;function E6(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gu:Km(t.a,t.b,t.c,t.d,t.e,t.f)}function S6(e){return e==null||(Ta||(Ta=document.createElementNS("http://www.w3.org/2000/svg","g")),Ta.setAttribute("transform",e),!(e=Ta.transform.baseVal.consolidate()))?Gu:(e=e.matrix,Km(e.a,e.b,e.c,e.d,e.e,e.f))}function Zm(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,l,d,f,h,m){if(c!==d||l!==f){var p=h.push("translate(",null,t,null,n);m.push({i:p-4,x:Fe(c,d)},{i:p-2,x:Fe(l,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(c,l,d,f){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Fe(c,l)})):l&&d.push(i(d)+"rotate("+l+r)}function s(c,l,d,f){c!==l?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Fe(c,l)}):l&&d.push(i(d)+"skewX("+l+r)}function u(c,l,d,f,h,m){if(c!==d||l!==f){var p=h.push(i(h)+"scale(",null,",",null,")");m.push({i:p-4,x:Fe(c,d)},{i:p-2,x:Fe(l,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(c,l){var d=[],f=[];return c=e(c),l=e(l),a(c.translateX,c.translateY,l.translateX,l.translateY,d,f),o(c.rotate,l.rotate,d,f),s(c.skewX,l.skewX,d,f),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,d,f),c=l=null,function(h){for(var m=-1,p=f.length,b;++m<p;)d[(b=f[m]).i]=b.x(h);return d.join("")}}}var x6=Zm(E6,"px, ","px)","deg)"),A6=Zm(S6,", ",")",")");function P6(e){return function(t,n){var r=e((t=Tu(t)).h,(n=Tu(n)).h),i=Ge(t.s,n.s),a=Ge(t.l,n.l),o=Ge(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const N6=P6(Hl);function C6(e,t){var n=Ge((e=Iu(e)).l,(t=Iu(t)).l),r=Ge(e.a,t.a),i=Ge(e.b,t.b),a=Ge(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function $6(e){return function(t,n){var r=e((t=ku(t)).h,(n=ku(n)).h),i=Ge(t.c,n.c),a=Ge(t.l,n.l),o=Ge(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const T6=$6(Hl);function Qm(e){return function t(n){n=+n;function r(i,a){var o=e((i=Ft(i)).h,(a=Ft(a)).h),s=Ge(i.s,a.s),u=Ge(i.l,a.l),c=Ge(i.opacity,a.opacity);return function(l){return i.h=o(l),i.s=s(l),i.l=u(Math.pow(l,n)),i.opacity=c(l),i+""}}return r.gamma=t,r}(1)}Qm(Hl);var zl=Qm(Ge);function as(e,t){t===void 0&&(t=e,e=aa);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function St(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Ir=0,oi=0,Zr=0,Jm=1e3,vo,si,Mo=0,Wn=0,os=0,Ri=typeof performance=="object"&&performance.now?performance:Date,e0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yl(){return Wn||(e0(I6),Wn=Ri.now()+os)}function I6(){Wn=0}function _o(){this._call=this._time=this._next=null}_o.prototype=t0.prototype={constructor:_o,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Yl():+n)+(t==null?0:+t),!this._next&&si!==this&&(si?si._next=this:vo=this,si=this),this._call=e,this._time=n,Uu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uu())}};function t0(e,t,n){var r=new _o;return r.restart(e,t,n),r}function k6(){Yl(),++Ir;for(var e=vo,t;e;)(t=Wn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ir}function Af(){Wn=(Mo=Ri.now())+os,Ir=oi=0;try{k6()}finally{Ir=0,R6(),Wn=0}}function D6(){var e=Ri.now(),t=e-Mo;t>Jm&&(os-=t,Mo=e)}function R6(){for(var e,t=vo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vo=n);si=e,Uu(r)}function Uu(e){if(!Ir){oi&&(oi=clearTimeout(oi));var t=e-Wn;t>24?(e<1/0&&(oi=setTimeout(Af,e-Ri.now()-os)),Zr&&(Zr=clearInterval(Zr))):(Zr||(Mo=Ri.now(),Zr=setInterval(D6,Jm)),Ir=1,e0(Af))}}function Pf(e,t,n){var r=new _o;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var B6=Bm("start","end","cancel","interrupt"),O6=[],n0=0,Nf=1,qu=2,eo=3,Cf=4,Hu=5,to=6;function ss(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;L6(e,n,{name:t,index:r,group:i,on:B6,tween:O6,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:n0})}function jl(e,t){var n=Nt(e,t);if(n.state>n0)throw new Error("too late; already scheduled");return n}function Ht(e,t){var n=Nt(e,t);if(n.state>eo)throw new Error("too late; already running");return n}function Nt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function L6(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=t0(a,0,n.time);function a(c){n.state=Nf,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var l,d,f,h;if(n.state!==Nf)return u();for(l in r)if(h=r[l],h.name===n.name){if(h.state===eo)return Pf(o);h.state===Cf?(h.state=to,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=to,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(Pf(function(){n.state===eo&&(n.state=Cf,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=qu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===qu){for(n.state=eo,i=new Array(f=n.tween.length),l=0,d=-1;l<f;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Hu,1),d=-1,f=i.length;++d<f;)i[d].call(e,l);n.state===Hu&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=to,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function F6(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>qu&&r.state<Hu,r.state=to,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function G6(e){return this.each(function(){F6(this,e)})}function U6(e,t){var n,r;return function(){var i=Ht(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function q6(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Ht(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=s;break}u===c&&i.push(s)}a.tween=i}}function H6(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Nt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?U6:q6)(n,e,t))}function Wl(e,t,n){var r=e._id;return e.each(function(){var i=Ht(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Nt(i,r).value[t]}}function r0(e,t){var n;return(typeof t=="number"?Fe:t instanceof Hn?jn:(n=Hn(t))?(t=n,jn):Xm)(e,t)}function V6(e){return function(){this.removeAttribute(e)}}function z6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Y6(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function j6(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function W6(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function X6(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function K6(e,t){var n=ns(e),r=n==="transform"?A6:r0;return this.attrTween(e,typeof t=="function"?(n.local?X6:W6)(n,r,Wl(this,"attr."+e,t)):t==null?(n.local?z6:V6)(n):(n.local?j6:Y6)(n,r,t))}function Z6(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Q6(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function J6(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Q6(e,a)),n}return i._value=t,i}function eM(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Z6(e,a)),n}return i._value=t,i}function tM(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ns(e);return this.tween(n,(r.local?J6:eM)(r,t))}function nM(e,t){return function(){jl(this,e).delay=+t.apply(this,arguments)}}function rM(e,t){return t=+t,function(){jl(this,e).delay=t}}function iM(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nM:rM)(t,e)):Nt(this.node(),t).delay}function aM(e,t){return function(){Ht(this,e).duration=+t.apply(this,arguments)}}function oM(e,t){return t=+t,function(){Ht(this,e).duration=t}}function sM(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?aM:oM)(t,e)):Nt(this.node(),t).duration}function uM(e,t){if(typeof t!="function")throw new Error;return function(){Ht(this,e).ease=t}}function lM(e){var t=this._id;return arguments.length?this.each(uM(t,e)):Nt(this.node(),t).ease}function cM(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ht(this,e).ease=n}}function fM(e){if(typeof e!="function")throw new Error;return this.each(cM(this._id,e))}function dM(e){typeof e!="function"&&(e=Lm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new on(r,this._parents,this._name,this._id)}function hM(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],c=n[s],l=u.length,d=o[s]=new Array(l),f,h=0;h<l;++h)(f=u[h]||c[h])&&(d[h]=f);for(;s<r;++s)o[s]=t[s];return new on(o,this._parents,this._name,this._id)}function mM(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function pM(e,t,n){var r,i,a=mM(t)?jl:Ht;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function bM(e,t){var n=this._id;return arguments.length<2?Nt(this.node(),n).on.on(e):this.each(pM(n,e,t))}function gM(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function yM(){return this.on("end.remove",gM(this._id))}function wM(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ul(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,c=a[o]=new Array(u),l,d,f=0;f<u;++f)(l=s[f])&&(d=e.call(l,l.__data__,f,s))&&("__data__"in l&&(d.__data__=l.__data__),c[f]=d,ss(c[f],t,n,f,c,Nt(l,n)));return new on(a,this._parents,t,n)}function vM(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Om(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],c=u.length,l,d=0;d<c;++d)if(l=u[d]){for(var f=e.call(l,l.__data__,d,u),h,m=Nt(l,n),p=0,b=f.length;p<b;++p)(h=f[p])&&ss(h,t,n,p,f,m);a.push(f),o.push(l)}return new on(a,o,t,n)}var MM=ia.prototype.constructor;function _M(){return new MM(this._groups,this._parents)}function EM(e,t){var n,r,i;return function(){var a=Tr(this,e),o=(this.style.removeProperty(e),Tr(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function i0(e){return function(){this.style.removeProperty(e)}}function SM(e,t,n){var r,i=n+"",a;return function(){var o=Tr(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function xM(e,t,n){var r,i,a;return function(){var o=Tr(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Tr(this,e))),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}function AM(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var u=Ht(this,e),c=u.on,l=u.value[a]==null?s||(s=i0(t)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(o,i=l),u.on=r}}function PM(e,t,n){var r=(e+="")=="transform"?x6:r0;return t==null?this.styleTween(e,EM(e,r)).on("end.style."+e,i0(e)):typeof t=="function"?this.styleTween(e,xM(e,r,Wl(this,"style."+e,t))).each(AM(this._id,e)):this.styleTween(e,SM(e,r,t),n).on("end.style."+e,null)}function NM(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function CM(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&NM(e,o,n)),r}return a._value=t,a}function $M(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,CM(e,t,n??""))}function TM(e){return function(){this.textContent=e}}function IM(e){return function(){var t=e(this);this.textContent=t??""}}function kM(e){return this.tween("text",typeof e=="function"?IM(Wl(this,"text",e)):TM(e==null?"":e+""))}function DM(e){return function(t){this.textContent=e.call(this,t)}}function RM(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&DM(i)),t}return r._value=e,r}function BM(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,RM(e))}function OM(){for(var e=this._name,t=this._id,n=a0(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,c=0;c<s;++c)if(u=o[c]){var l=Nt(u,t);ss(u,e,n,c,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new on(r,this._parents,e,n)}function LM(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var c=Ht(this,r),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),i===0&&a()})}var FM=0;function on(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function a0(){return++FM}var Yt=ia.prototype;on.prototype={constructor:on,select:wM,selectAll:vM,selectChild:Yt.selectChild,selectChildren:Yt.selectChildren,filter:dM,merge:hM,selection:_M,transition:OM,call:Yt.call,nodes:Yt.nodes,node:Yt.node,size:Yt.size,empty:Yt.empty,each:Yt.each,on:bM,attr:K6,attrTween:tM,style:PM,styleTween:$M,text:kM,textTween:BM,remove:yM,tween:H6,delay:iM,duration:sM,ease:lM,easeVarying:fM,end:LM,[Symbol.iterator]:Yt[Symbol.iterator]};function GM(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var UM={time:null,delay:0,duration:250,ease:GM};function qM(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function HM(e){var t,n;e instanceof on?(t=e._id,e=e._name):(t=a0(),(n=UM).time=Yl(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&ss(u,e,t,c,o,n||qM(u,t));return new on(r,this._parents,e,t)}ia.prototype.interrupt=G6;ia.prototype.transition=HM;const Vu=Math.PI,zu=2*Vu,Cn=1e-6,VM=zu-Cn;function o0(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function zM(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return o0;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class YM{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?o0:zM(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,u=r-t,c=i-n,l=o-t,d=s-n,f=l*l+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Cn)if(!(Math.abs(d*u-c*l)>Cn)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,m=i-s,p=u*u+c*c,b=h*h+m*m,w=Math.sqrt(p),y=Math.sqrt(f),v=a*Math.tan((Vu-Math.acos((p+f-b)/(2*w*y)))/2),g=v/y,M=v/w;Math.abs(g-1)>Cn&&this._append`L${t+g*l},${n+g*d}`,this._append`A${a},${a},0,0,${+(d*h>l*m)},${this._x1=t+M*u},${this._y1=n+M*c}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),c=t+s,l=n+u,d=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${c},${l}`:(Math.abs(this._x1-c)>Cn||Math.abs(this._y1-l)>Cn)&&this._append`L${c},${l}`,r&&(f<0&&(f=f%zu+zu),f>VM?this._append`A${r},${r},0,1,${d},${t-s},${n-u}A${r},${r},0,1,${d},${this._x1=c},${this._y1=l}`:f>Cn&&this._append`A${r},${r},0,${+(f>=Vu)},${d},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Yu(e=3){return new YM(+e)}function jM(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Eo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function kr(e){return e=Eo(Math.abs(e)),e?e[1]:NaN}function WM(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function XM(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var KM=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bi(e){if(!(t=KM.exec(e)))throw new Error("invalid format: "+e);var t;return new Xl({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bi.prototype=Xl.prototype;function Xl(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ZM(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var s0;function QM(e,t){var n=Eo(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(s0=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Eo(e,Math.max(0,t+a-1))[0]}function $f(e,t){var n=Eo(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Tf={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:jM,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>$f(e*100,t),r:$f,s:QM,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function If(e){return e}var kf=Array.prototype.map,Df=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function JM(e){var t=e.grouping===void 0||e.thousands===void 0?If:WM(kf.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?If:XM(kf.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(d){d=Bi(d);var f=d.fill,h=d.align,m=d.sign,p=d.symbol,b=d.zero,w=d.width,y=d.comma,v=d.precision,g=d.trim,M=d.type;M==="n"?(y=!0,M="g"):Tf[M]||(v===void 0&&(v=12),g=!0,M="g"),(b||f==="0"&&h==="=")&&(b=!0,f="0",h="=");var _=p==="$"?n:p==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",x=p==="$"?r:/[%p]/.test(M)?o:"",A=Tf[M],N=/[defgprs%]/.test(M);v=v===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function B(S){var U=_,L=x,V,E,k;if(M==="c")L=A(S)+L,S="";else{S=+S;var z=S<0||1/S<0;if(S=isNaN(S)?u:A(Math.abs(S),v),g&&(S=ZM(S)),z&&+S==0&&m!=="+"&&(z=!1),U=(z?m==="("?m:s:m==="-"||m==="("?"":m)+U,L=(M==="s"?Df[8+s0/3]:"")+L+(z&&m==="("?")":""),N){for(V=-1,E=S.length;++V<E;)if(k=S.charCodeAt(V),48>k||k>57){L=(k===46?i+S.slice(V+1):S.slice(V))+L,S=S.slice(0,V);break}}}y&&!b&&(S=t(S,1/0));var X=U.length+S.length+L.length,G=X<w?new Array(w-X+1).join(f):"";switch(y&&b&&(S=t(G+S,G.length?w-L.length:1/0),G=""),h){case"<":S=U+S+L+G;break;case"=":S=U+G+S+L;break;case"^":S=G.slice(0,X=G.length>>1)+U+S+L+G.slice(X);break;default:S=G+U+S+L;break}return a(S)}return B.toString=function(){return d+""},B}function l(d,f){var h=c((d=Bi(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(kr(f)/3)))*3,p=Math.pow(10,-m),b=Df[8+m/3];return function(w){return h(p*w)+b}}return{format:c,formatPrefix:l}}var Ia,qr,u0;e4({thousands:",",grouping:[3],currency:["$",""]});function e4(e){return Ia=JM(e),qr=Ia.format,u0=Ia.formatPrefix,Ia}function t4(e){return Math.max(0,-kr(Math.abs(e)))}function n4(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kr(t)/3)))*3-kr(Math.abs(e)))}function r4(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,kr(t)-kr(e))+1}var ce=1e-6,l0=1e-12,me=Math.PI,Ae=me/2,Rf=me/4,tt=me*2,Ue=180/me,Se=me/180,ve=Math.abs,Hr=Math.atan,sn=Math.atan2,he=Math.cos,c0=Math.exp,So=Math.log,Vs=Math.pow,se=Math.sin,st=Math.sign||function(e){return e>0?1:e<0?-1:0},Ye=Math.sqrt,Kl=Math.tan;function f0(e){return e>1?0:e<-1?me:Math.acos(e)}function mt(e){return e>1?Ae:e<-1?-Ae:Math.asin(e)}function ut(){}function xo(e,t){e&&Of.hasOwnProperty(e.type)&&Of[e.type](e,t)}var Bf={Feature:function(e,t){xo(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)xo(n[r].geometry,t)}},Of={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ju(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ju(n[r],t,0)},Polygon:function(e,t){Lf(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Lf(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)xo(n[r],t)}};function ju(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Lf(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ju(e[n],t,1);t.polygonEnd()}function $n(e,t){e&&Bf.hasOwnProperty(e.type)?Bf[e.type](e,t):xo(e,t)}function Wu(e){return[sn(e[1],e[0]),mt(e[2])]}function Dr(e){var t=e[0],n=e[1],r=he(n);return[r*he(t),r*se(t),se(n)]}function ka(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ao(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function zs(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Da(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Xu(e){var t=Ye(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Ku(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Zu(e,t){return ve(e)>me&&(e-=Math.round(e/tt)*tt),[e,t]}Zu.invert=Zu;function d0(e,t,n){return(e%=tt)?t||n?Ku(Gf(e),Uf(t,n)):Gf(e):t||n?Uf(t,n):Zu}function Ff(e){return function(t,n){return t+=e,ve(t)>me&&(t-=Math.round(t/tt)*tt),[t,n]}}function Gf(e){var t=Ff(e);return t.invert=Ff(-e),t}function Uf(e,t){var n=he(e),r=se(e),i=he(t),a=se(t);function o(s,u){var c=he(u),l=he(s)*c,d=se(s)*c,f=se(u),h=f*n+l*r;return[sn(d*i-h*a,l*n-f*r),mt(h*i+d*a)]}return o.invert=function(s,u){var c=he(u),l=he(s)*c,d=se(s)*c,f=se(u),h=f*i-d*a;return[sn(d*i+f*a,l*n+h*r),mt(h*n-l*r)]},o}function i4(e){e=d0(e[0]*Se,e[1]*Se,e.length>2?e[2]*Se:0);function t(n){return n=e(n[0]*Se,n[1]*Se),n[0]*=Ue,n[1]*=Ue,n}return t.invert=function(n){return n=e.invert(n[0]*Se,n[1]*Se),n[0]*=Ue,n[1]*=Ue,n},t}function a4(e,t,n,r,i,a){if(n){var o=he(t),s=se(t),u=r*n;i==null?(i=t+r*tt,a=t-u/2):(i=qf(o,i),a=qf(o,a),(r>0?i<a:i>a)&&(i+=r*tt));for(var c,l=i;r>0?l>a:l<a;l-=u)c=Wu([o,-s*he(l),-s*se(l)]),e.point(c[0],c[1])}}function qf(e,t){t=Dr(t),t[0]-=e,Xu(t);var n=f0(-t[1]);return((-t[2]<0?-n:n)+tt-ce)%tt}function h0(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ut,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function no(e,t){return ve(e[0]-t[0])<ce&&ve(e[1]-t[1])<ce}function Ra(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function m0(e,t,n,r,i){var a=[],o=[],s,u;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,b=m[0],w=m[p],y;if(no(b,w)){if(!b[2]&&!w[2]){for(i.lineStart(),s=0;s<p;++s)i.point((b=m[s])[0],b[1]);i.lineEnd();return}w[0]+=2*ce}a.push(y=new Ra(b,m,null,!0)),o.push(y.o=new Ra(b,null,y,!1)),a.push(y=new Ra(w,m,null,!1)),o.push(y.o=new Ra(w,null,y,!0))}}),!!a.length){for(o.sort(t),Hf(a),Hf(o),s=0,u=o.length;s<u;++s)o[s].e=n=!n;for(var c=a[0],l,d;;){for(var f=c,h=!0;f.v;)if((f=f.n)===c)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(s=0,u=l.length;s<u;++s)i.point((d=l[s])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(l=f.p.z,s=l.length-1;s>=0;--s)i.point((d=l[s])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,l=f.z,h=!h}while(!f.v);i.lineEnd()}}}function Hf(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Ys(e){return ve(e[0])<=me?e[0]:st(e[0])*((ve(e[0])+me)%tt-me)}function o4(e,t){var n=Ys(t),r=t[1],i=se(r),a=[se(n),-he(n),0],o=0,s=0,u=new Vn;i===1?r=Ae+ce:i===-1&&(r=-Ae-ce);for(var c=0,l=e.length;c<l;++c)if(f=(d=e[c]).length)for(var d,f,h=d[f-1],m=Ys(h),p=h[1]/2+Rf,b=se(p),w=he(p),y=0;y<f;++y,m=g,b=_,w=x,h=v){var v=d[y],g=Ys(v),M=v[1]/2+Rf,_=se(M),x=he(M),A=g-m,N=A>=0?1:-1,B=N*A,S=B>me,U=b*_;if(u.add(sn(U*N*se(B),w*x+U*he(B))),o+=S?A+N*tt:A,S^m>=n^g>=n){var L=Ao(Dr(h),Dr(v));Xu(L);var V=Ao(a,L);Xu(V);var E=(S^A>=0?-1:1)*mt(V[2]);(r>E||r===E&&(L[0]||L[1]))&&(s+=S^A>=0?1:-1)}}return(o<-ce||o<ce&&u<-l0)^s&1}function p0(e,t,n,r){return function(i){var a=t(i),o=h0(),s=t(o),u=!1,c,l,d,f={point:h,lineStart:p,lineEnd:b,polygonStart:function(){f.point=w,f.lineStart=y,f.lineEnd=v,l=[],c=[]},polygonEnd:function(){f.point=h,f.lineStart=p,f.lineEnd=b,l=Rm(l);var g=o4(c,r);l.length?(u||(i.polygonStart(),u=!0),m0(l,u4,g,n,i)):g&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),l=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(g,M){e(g,M)&&i.point(g,M)}function m(g,M){a.point(g,M)}function p(){f.point=m,a.lineStart()}function b(){f.point=h,a.lineEnd()}function w(g,M){d.push([g,M]),s.point(g,M)}function y(){s.lineStart(),d=[]}function v(){w(d[0][0],d[0][1]),s.lineEnd();var g=s.clean(),M=o.result(),_,x=M.length,A,N,B;if(d.pop(),c.push(d),d=null,!!x){if(g&1){if(N=M[0],(A=N.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),_=0;_<A;++_)i.point((B=N[_])[0],B[1]);i.lineEnd()}return}x>1&&g&2&&M.push(M.pop().concat(M.shift())),l.push(M.filter(s4))}}return f}}function s4(e){return e.length>1}function u4(e,t){return((e=e.x)[0]<0?e[1]-Ae-ce:Ae-e[1])-((t=t.x)[0]<0?t[1]-Ae-ce:Ae-t[1])}const Vf=p0(function(){return!0},l4,f4,[-me,-Ae]);function l4(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var s=a>0?me:-me,u=ve(a-t);ve(u-me)<ce?(e.point(t,n=(n+o)/2>0?Ae:-Ae),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(a,n),i=0):r!==s&&u>=me&&(ve(t-r)<ce&&(t-=r*ce),ve(a-s)<ce&&(a-=s*ce),n=c4(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=a,n=o),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function c4(e,t,n,r){var i,a,o=se(e-n);return ve(o)>ce?Hr((se(t)*(a=he(r))*se(n)-se(r)*(i=he(t))*se(e))/(i*a*o)):(t+r)/2}function f4(e,t,n,r){var i;if(e==null)i=n*Ae,r.point(-me,i),r.point(0,i),r.point(me,i),r.point(me,0),r.point(me,-i),r.point(0,-i),r.point(-me,-i),r.point(-me,0),r.point(-me,i);else if(ve(e[0]-t[0])>ce){var a=e[0]<t[0]?me:-me;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function d4(e){var t=he(e),n=2*Se,r=t>0,i=ve(t)>ce;function a(l,d,f,h){a4(h,e,n,f,l,d)}function o(l,d){return he(l)*he(d)>t}function s(l){var d,f,h,m,p;return{lineStart:function(){m=h=!1,p=1},point:function(b,w){var y=[b,w],v,g=o(b,w),M=r?g?0:c(b,w):g?c(b+(b<0?me:-me),w):0;if(!d&&(m=h=g)&&l.lineStart(),g!==h&&(v=u(d,y),(!v||no(d,v)||no(y,v))&&(y[2]=1)),g!==h)p=0,g?(l.lineStart(),v=u(y,d),l.point(v[0],v[1])):(v=u(d,y),l.point(v[0],v[1],2),l.lineEnd()),d=v;else if(i&&d&&r^g){var _;!(M&f)&&(_=u(y,d,!0))&&(p=0,r?(l.lineStart(),l.point(_[0][0],_[0][1]),l.point(_[1][0],_[1][1]),l.lineEnd()):(l.point(_[1][0],_[1][1]),l.lineEnd(),l.lineStart(),l.point(_[0][0],_[0][1],3)))}g&&(!d||!no(d,y))&&l.point(y[0],y[1]),d=y,h=g,f=M},lineEnd:function(){h&&l.lineEnd(),d=null},clean:function(){return p|(m&&h)<<1}}}function u(l,d,f){var h=Dr(l),m=Dr(d),p=[1,0,0],b=Ao(h,m),w=ka(b,b),y=b[0],v=w-y*y;if(!v)return!f&&l;var g=t*w/v,M=-t*y/v,_=Ao(p,b),x=Da(p,g),A=Da(b,M);zs(x,A);var N=_,B=ka(x,N),S=ka(N,N),U=B*B-S*(ka(x,x)-1);if(!(U<0)){var L=Ye(U),V=Da(N,(-B-L)/S);if(zs(V,x),V=Wu(V),!f)return V;var E=l[0],k=d[0],z=l[1],X=d[1],G;k<E&&(G=E,E=k,k=G);var O=k-E,Y=ve(O-me)<ce,H=Y||O<ce;if(!Y&&X<z&&(G=z,z=X,X=G),H?Y?z+X>0^V[1]<(ve(V[0]-E)<ce?z:X):z<=V[1]&&V[1]<=X:O>me^(E<=V[0]&&V[0]<=k)){var T=Da(N,(-B+L)/S);return zs(T,x),[V,Wu(T)]}}}function c(l,d){var f=r?e:me-e,h=0;return l<-f?h|=1:l>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return p0(o,s,a,r?[0,-e]:[-me,e-me])}function h4(e,t,n,r,i,a){var o=e[0],s=e[1],u=t[0],c=t[1],l=0,d=1,f=u-o,h=c-s,m;if(m=n-o,!(!f&&m>0)){if(m/=f,f<0){if(m<l)return;m<d&&(d=m)}else if(f>0){if(m>d)return;m>l&&(l=m)}if(m=i-o,!(!f&&m<0)){if(m/=f,f<0){if(m>d)return;m>l&&(l=m)}else if(f>0){if(m<l)return;m<d&&(d=m)}if(m=r-s,!(!h&&m>0)){if(m/=h,h<0){if(m<l)return;m<d&&(d=m)}else if(h>0){if(m>d)return;m>l&&(l=m)}if(m=a-s,!(!h&&m<0)){if(m/=h,h<0){if(m>d)return;m>l&&(l=m)}else if(h>0){if(m<l)return;m<d&&(d=m)}return l>0&&(e[0]=o+l*f,e[1]=s+l*h),d<1&&(t[0]=o+d*f,t[1]=s+d*h),!0}}}}}var ui=1e9,Ba=-ui;function b0(e,t,n,r){function i(c,l){return e<=c&&c<=n&&t<=l&&l<=r}function a(c,l,d,f){var h=0,m=0;if(c==null||(h=o(c,d))!==(m=o(l,d))||u(c,l)<0^d>0)do f.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+d+4)%4)!==m);else f.point(l[0],l[1])}function o(c,l){return ve(c[0]-e)<ce?l>0?0:3:ve(c[0]-n)<ce?l>0?2:1:ve(c[1]-t)<ce?l>0?1:0:l>0?3:2}function s(c,l){return u(c.x,l.x)}function u(c,l){var d=o(c,1),f=o(l,1);return d!==f?d-f:d===0?l[1]-c[1]:d===1?c[0]-l[0]:d===2?c[1]-l[1]:l[0]-c[0]}return function(c){var l=c,d=h0(),f,h,m,p,b,w,y,v,g,M,_,x={point:A,lineStart:U,lineEnd:L,polygonStart:B,polygonEnd:S};function A(E,k){i(E,k)&&l.point(E,k)}function N(){for(var E=0,k=0,z=h.length;k<z;++k)for(var X=h[k],G=1,O=X.length,Y=X[0],H,T,Z=Y[0],ne=Y[1];G<O;++G)H=Z,T=ne,Y=X[G],Z=Y[0],ne=Y[1],T<=r?ne>r&&(Z-H)*(r-T)>(ne-T)*(e-H)&&++E:ne<=r&&(Z-H)*(r-T)<(ne-T)*(e-H)&&--E;return E}function B(){l=d,f=[],h=[],_=!0}function S(){var E=N(),k=_&&E,z=(f=Rm(f)).length;(k||z)&&(c.polygonStart(),k&&(c.lineStart(),a(null,null,1,c),c.lineEnd()),z&&m0(f,s,E,a,c),c.polygonEnd()),l=c,f=h=m=null}function U(){x.point=V,h&&h.push(m=[]),M=!0,g=!1,y=v=NaN}function L(){f&&(V(p,b),w&&g&&d.rejoin(),f.push(d.result())),x.point=A,g&&l.lineEnd()}function V(E,k){var z=i(E,k);if(h&&m.push([E,k]),M)p=E,b=k,w=z,M=!1,z&&(l.lineStart(),l.point(E,k));else if(z&&g)l.point(E,k);else{var X=[y=Math.max(Ba,Math.min(ui,y)),v=Math.max(Ba,Math.min(ui,v))],G=[E=Math.max(Ba,Math.min(ui,E)),k=Math.max(Ba,Math.min(ui,k))];h4(X,G,e,t,n,r)?(g||(l.lineStart(),l.point(X[0],X[1])),l.point(G[0],G[1]),z||l.lineEnd(),_=!1):z&&(l.lineStart(),l.point(E,k),_=!1)}y=E,v=k,g=z}return x}}const Qu=e=>e;var js=new Vn,Ju=new Vn,g0,y0,el,tl,Qt={point:ut,lineStart:ut,lineEnd:ut,polygonStart:function(){Qt.lineStart=m4,Qt.lineEnd=b4},polygonEnd:function(){Qt.lineStart=Qt.lineEnd=Qt.point=ut,js.add(ve(Ju)),Ju=new Vn},result:function(){var e=js/2;return js=new Vn,e}};function m4(){Qt.point=p4}function p4(e,t){Qt.point=w0,g0=el=e,y0=tl=t}function w0(e,t){Ju.add(tl*e-el*t),el=e,tl=t}function b4(){w0(g0,y0)}var Rr=1/0,Po=Rr,Oi=-Rr,No=Oi,Co={point:g4,lineStart:ut,lineEnd:ut,polygonStart:ut,polygonEnd:ut,result:function(){var e=[[Rr,Po],[Oi,No]];return Oi=No=-(Po=Rr=1/0),e}};function g4(e,t){e<Rr&&(Rr=e),e>Oi&&(Oi=e),t<Po&&(Po=t),t>No&&(No=t)}var nl=0,rl=0,li=0,$o=0,To=0,mr=0,il=0,al=0,ci=0,v0,M0,kt,Dt,ot={point:Xn,lineStart:zf,lineEnd:Yf,polygonStart:function(){ot.lineStart=v4,ot.lineEnd=M4},polygonEnd:function(){ot.point=Xn,ot.lineStart=zf,ot.lineEnd=Yf},result:function(){var e=ci?[il/ci,al/ci]:mr?[$o/mr,To/mr]:li?[nl/li,rl/li]:[NaN,NaN];return nl=rl=li=$o=To=mr=il=al=ci=0,e}};function Xn(e,t){nl+=e,rl+=t,++li}function zf(){ot.point=y4}function y4(e,t){ot.point=w4,Xn(kt=e,Dt=t)}function w4(e,t){var n=e-kt,r=t-Dt,i=Ye(n*n+r*r);$o+=i*(kt+e)/2,To+=i*(Dt+t)/2,mr+=i,Xn(kt=e,Dt=t)}function Yf(){ot.point=Xn}function v4(){ot.point=_4}function M4(){_0(v0,M0)}function _4(e,t){ot.point=_0,Xn(v0=kt=e,M0=Dt=t)}function _0(e,t){var n=e-kt,r=t-Dt,i=Ye(n*n+r*r);$o+=i*(kt+e)/2,To+=i*(Dt+t)/2,mr+=i,i=Dt*e-kt*t,il+=i*(kt+e),al+=i*(Dt+t),ci+=i*3,Xn(kt=e,Dt=t)}function E0(e){this._context=e}E0.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,tt);break}}},result:ut};var ol=new Vn,Ws,S0,x0,fi,di,Li={point:ut,lineStart:function(){Li.point=E4},lineEnd:function(){Ws&&A0(S0,x0),Li.point=ut},polygonStart:function(){Ws=!0},polygonEnd:function(){Ws=null},result:function(){var e=+ol;return ol=new Vn,e}};function E4(e,t){Li.point=A0,S0=fi=e,x0=di=t}function A0(e,t){fi-=e,di-=t,ol.add(Ye(fi*fi+di*di)),fi=e,di=t}let jf,Io,Wf,Xf;class Kf{constructor(t){this._append=t==null?P0:S4(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Wf||this._append!==Io){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Wf=r,Io=this._append,Xf=this._,this._=i}this._+=Xf;break}}}result(){const t=this._;return this._="",t.length?t:null}}function P0(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function S4(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return P0;if(t!==jf){const n=10**t;jf=t,Io=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return Io}function N0(e,t){let n=3,r=4.5,i,a;function o(s){return s&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),$n(s,i(a))),a.result()}return o.area=function(s){return $n(s,i(Qt)),Qt.result()},o.measure=function(s){return $n(s,i(Li)),Li.result()},o.bounds=function(s){return $n(s,i(Co)),Co.result()},o.centroid=function(s){return $n(s,i(ot)),ot.result()},o.projection=function(s){return arguments.length?(i=s==null?(e=null,Qu):(e=s).stream,o):e},o.context=function(s){return arguments.length?(a=s==null?(t=null,new Kf(n)):new E0(t=s),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(a.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return t===null&&(a=new Kf(n)),o},o.projection(e).digits(n).context(t)}function sl(e){return{stream:us(e)}}function us(e){return function(t){var n=new ul;for(var r in e)n[r]=e[r];return n.stream=t,n}}function ul(){}ul.prototype={constructor:ul,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Zl(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),$n(n,e.stream(Co)),t(Co.result()),r!=null&&e.clipExtent(r),e}function Ql(e,t,n){return Zl(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,u])},n)}function C0(e,t,n){return Ql(e,[[0,0],t],n)}function $0(e,t,n){return Zl(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];e.scale(150*a).translate([o,s])},n)}function T0(e,t,n){return Zl(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,s])},n)}var Zf=16,x4=he(30*Se);function Qf(e,t){return+t?P4(e,t):A4(e)}function A4(e){return us({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function P4(e,t){function n(r,i,a,o,s,u,c,l,d,f,h,m,p,b){var w=c-r,y=l-i,v=w*w+y*y;if(v>4*t&&p--){var g=o+f,M=s+h,_=u+m,x=Ye(g*g+M*M+_*_),A=mt(_/=x),N=ve(ve(_)-1)<ce||ve(a-d)<ce?(a+d)/2:sn(M,g),B=e(N,A),S=B[0],U=B[1],L=S-r,V=U-i,E=y*L-w*V;(E*E/v>t||ve((w*L+y*V)/v-.5)>.3||o*f+s*h+u*m<x4)&&(n(r,i,a,o,s,u,S,U,N,g/=x,M/=x,_,p,b),b.point(S,U),n(S,U,N,g,M,_,c,l,d,f,h,m,p,b))}}return function(r){var i,a,o,s,u,c,l,d,f,h,m,p,b={point:w,lineStart:y,lineEnd:g,polygonStart:function(){r.polygonStart(),b.lineStart=M},polygonEnd:function(){r.polygonEnd(),b.lineStart=y}};function w(A,N){A=e(A,N),r.point(A[0],A[1])}function y(){d=NaN,b.point=v,r.lineStart()}function v(A,N){var B=Dr([A,N]),S=e(A,N);n(d,f,l,h,m,p,d=S[0],f=S[1],l=A,h=B[0],m=B[1],p=B[2],Zf,r),r.point(d,f)}function g(){b.point=w,r.lineEnd()}function M(){y(),b.point=_,b.lineEnd=x}function _(A,N){v(i=A,N),a=d,o=f,s=h,u=m,c=p,b.point=v}function x(){n(d,f,l,h,m,p,a,o,i,s,u,c,Zf,r),b.lineEnd=g,g()}return b}}var N4=us({point:function(e,t){this.stream.point(e*Se,t*Se)}});function C4(e){return us({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function $4(e,t,n,r,i){function a(o,s){return o*=r,s*=i,[t+e*o,n-e*s]}return a.invert=function(o,s){return[(o-t)/e*r,(n-s)/e*i]},a}function Jf(e,t,n,r,i,a){if(!a)return $4(e,t,n,r,i);var o=he(a),s=se(a),u=o*e,c=s*e,l=o/e,d=s/e,f=(s*n-o*t)/e,h=(s*t+o*n)/e;function m(p,b){return p*=r,b*=i,[u*p-c*b+t,n-c*p-u*b]}return m.invert=function(p,b){return[r*(l*p-d*b+f),i*(h-d*p-l*b)]},m}function En(e){return I0(function(){return e})()}function I0(e){var t,n=150,r=480,i=250,a=0,o=0,s=0,u=0,c=0,l,d=0,f=1,h=1,m=null,p=Vf,b=null,w,y,v,g=Qu,M=.5,_,x,A,N,B;function S(E){return A(E[0]*Se,E[1]*Se)}function U(E){return E=A.invert(E[0],E[1]),E&&[E[0]*Ue,E[1]*Ue]}S.stream=function(E){return N&&B===E?N:N=N4(C4(l)(p(_(g(B=E)))))},S.preclip=function(E){return arguments.length?(p=E,m=void 0,V()):p},S.postclip=function(E){return arguments.length?(g=E,b=w=y=v=null,V()):g},S.clipAngle=function(E){return arguments.length?(p=+E?d4(m=E*Se):(m=null,Vf),V()):m*Ue},S.clipExtent=function(E){return arguments.length?(g=E==null?(b=w=y=v=null,Qu):b0(b=+E[0][0],w=+E[0][1],y=+E[1][0],v=+E[1][1]),V()):b==null?null:[[b,w],[y,v]]},S.scale=function(E){return arguments.length?(n=+E,L()):n},S.translate=function(E){return arguments.length?(r=+E[0],i=+E[1],L()):[r,i]},S.center=function(E){return arguments.length?(a=E[0]%360*Se,o=E[1]%360*Se,L()):[a*Ue,o*Ue]},S.rotate=function(E){return arguments.length?(s=E[0]%360*Se,u=E[1]%360*Se,c=E.length>2?E[2]%360*Se:0,L()):[s*Ue,u*Ue,c*Ue]},S.angle=function(E){return arguments.length?(d=E%360*Se,L()):d*Ue},S.reflectX=function(E){return arguments.length?(f=E?-1:1,L()):f<0},S.reflectY=function(E){return arguments.length?(h=E?-1:1,L()):h<0},S.precision=function(E){return arguments.length?(_=Qf(x,M=E*E),V()):Ye(M)},S.fitExtent=function(E,k){return Ql(S,E,k)},S.fitSize=function(E,k){return C0(S,E,k)},S.fitWidth=function(E,k){return $0(S,E,k)},S.fitHeight=function(E,k){return T0(S,E,k)};function L(){var E=Jf(n,0,0,f,h,d).apply(null,t(a,o)),k=Jf(n,r-E[0],i-E[1],f,h,d);return l=d0(s,u,c),x=Ku(t,k),A=Ku(l,x),_=Qf(x,M),V()}function V(){return N=B=null,S}return function(){return t=e.apply(this,arguments),S.invert=t.invert&&U,L()}}function Jl(e){var t=0,n=me/3,r=I0(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Se,n=a[1]*Se):[t*Ue,n*Ue]},i}function T4(e){var t=he(e);function n(r,i){return[r*t,se(i)/t]}return n.invert=function(r,i){return[r/t,mt(i*t)]},n}function I4(e,t){var n=se(e),r=(n+se(t))/2;if(ve(r)<ce)return T4(e);var i=1+n*(2*r-n),a=Ye(i)/r;function o(s,u){var c=Ye(i-2*r*se(u))/r;return[c*se(s*=r),a-c*he(s)]}return o.invert=function(s,u){var c=a-u,l=sn(s,ve(c))*st(c);return c*r<0&&(l-=me*st(s)*st(c)),[l/r,mt((i-(s*s+c*c)*r*r)/(2*r))]},o}function ko(){return Jl(I4).scale(155.424).center([0,33.6442])}function k0(){return ko().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function k4(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function D4(){var e,t,n=k0(),r,i=ko().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=ko().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,u,c={point:function(f,h){u=[f,h]}};function l(f){var h=f[0],m=f[1];return u=null,r.point(h,m),u||(a.point(h,m),u)||(s.point(h,m),u)}l.invert=function(f){var h=n.scale(),m=n.translate(),p=(f[0]-m[0])/h,b=(f[1]-m[1])/h;return(b>=.12&&b<.234&&p>=-.425&&p<-.214?i:b>=.166&&b<.234&&p>=-.214&&p<-.115?o:n).invert(f)},l.stream=function(f){return e&&t===f?e:e=k4([n.stream(t=f),i.stream(f),o.stream(f)])},l.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),d()):n.precision()},l.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),l.translate(n.translate())):n.scale()},l.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),m=+f[0],p=+f[1];return r=n.translate(f).clipExtent([[m-.455*h,p-.238*h],[m+.455*h,p+.238*h]]).stream(c),a=i.translate([m-.307*h,p+.201*h]).clipExtent([[m-.425*h+ce,p+.12*h+ce],[m-.214*h-ce,p+.234*h-ce]]).stream(c),s=o.translate([m-.205*h,p+.212*h]).clipExtent([[m-.214*h+ce,p+.166*h+ce],[m-.115*h-ce,p+.234*h-ce]]).stream(c),d()},l.fitExtent=function(f,h){return Ql(l,f,h)},l.fitSize=function(f,h){return C0(l,f,h)},l.fitWidth=function(f,h){return $0(l,f,h)},l.fitHeight=function(f,h){return T0(l,f,h)};function d(){return e=t=null,l}return l.scale(1070)}function D0(e){return function(t,n){var r=he(t),i=he(n),a=e(r*i);return a===1/0?[2,0]:[a*i*se(t),a*se(n)]}}function oa(e){return function(t,n){var r=Ye(t*t+n*n),i=e(r),a=se(i),o=he(i);return[sn(t*a,r*o),mt(r&&n*a/r)]}}var R0=D0(function(e){return Ye(2/(1+e))});R0.invert=oa(function(e){return 2*mt(e/2)});function R4(){return En(R0).scale(124.75).clipAngle(180-.001)}var B0=D0(function(e){return(e=f0(e))&&e/se(e)});B0.invert=oa(function(e){return e});function B4(){return En(B0).scale(79.4188).clipAngle(180-.001)}function ls(e,t){return[e,So(Kl((Ae+t)/2))]}ls.invert=function(e,t){return[e,2*Hr(c0(t))-Ae]};function O4(){return O0(ls).scale(961/tt)}function O0(e){var t=En(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,s,u,c;t.scale=function(d){return arguments.length?(r(d),l()):r()},t.translate=function(d){return arguments.length?(i(d),l()):i()},t.center=function(d){return arguments.length?(n(d),l()):n()},t.clipExtent=function(d){return arguments.length?(d==null?o=s=u=c=null:(o=+d[0][0],s=+d[0][1],u=+d[1][0],c=+d[1][1]),l()):o==null?null:[[o,s],[u,c]]};function l(){var d=me*r(),f=t(i4(t.rotate()).invert([0,0]));return a(o==null?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===ls?[[Math.max(f[0]-d,o),s],[Math.min(f[0]+d,u),c]]:[[o,Math.max(f[1]-d,s)],[u,Math.min(f[1]+d,c)]])}return l()}function Oa(e){return Kl((Ae+e)/2)}function L4(e,t){var n=he(e),r=e===t?se(e):So(n/he(t))/So(Oa(t)/Oa(e)),i=n*Vs(Oa(e),r)/r;if(!r)return ls;function a(o,s){i>0?s<-Ae+ce&&(s=-Ae+ce):s>Ae-ce&&(s=Ae-ce);var u=i/Vs(Oa(s),r);return[u*se(r*o),i-u*he(r*o)]}return a.invert=function(o,s){var u=i-s,c=st(r)*Ye(o*o+u*u),l=sn(o,ve(u))*st(u);return u*r<0&&(l-=me*st(o)*st(u)),[l/r,2*Hr(Vs(i/c,1/r))-Ae]},a}function F4(){return Jl(L4).scale(109.5).parallels([30,30])}function Do(e,t){return[e,t]}Do.invert=Do;function G4(){return En(Do).scale(152.63)}function U4(e,t){var n=he(e),r=e===t?se(e):(n-he(t))/(t-e),i=n/r+e;if(ve(r)<ce)return Do;function a(o,s){var u=i-s,c=r*o;return[u*se(c),i-u*he(c)]}return a.invert=function(o,s){var u=i-s,c=sn(o,ve(u))*st(u);return u*r<0&&(c-=me*st(o)*st(u)),[c/r,i-st(r)*Ye(o*o+u*u)]},a}function q4(){return Jl(U4).scale(131.154).center([0,13.9389])}var vi=1.340264,Mi=-.081106,_i=893e-6,Ei=.003796,Ro=Ye(3)/2,H4=12;function L0(e,t){var n=mt(Ro*se(t)),r=n*n,i=r*r*r;return[e*he(n)/(Ro*(vi+3*Mi*r+i*(7*_i+9*Ei*r))),n*(vi+Mi*r+i*(_i+Ei*r))]}L0.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,s,u;a<H4&&(s=n*(vi+Mi*r+i*(_i+Ei*r))-t,u=vi+3*Mi*r+i*(7*_i+9*Ei*r),n-=o=s/u,r=n*n,i=r*r*r,!(ve(o)<l0));++a);return[Ro*e*(vi+3*Mi*r+i*(7*_i+9*Ei*r))/he(n),mt(se(n)/Ro)]};function V4(){return En(L0).scale(177.158)}function F0(e,t){var n=he(t),r=he(e)*n;return[n*se(e)/r,se(t)/r]}F0.invert=oa(Hr);function z4(){return En(F0).scale(144.049).clipAngle(60)}function G0(e,t){return[he(t)*se(e),se(t)]}G0.invert=oa(mt);function Y4(){return En(G0).scale(249.5).clipAngle(90+ce)}function U0(e,t){var n=he(t),r=1+he(e)*n;return[n*se(e)/r,se(t)/r]}U0.invert=oa(function(e){return 2*Hr(e)});function j4(){return En(U0).scale(250).clipAngle(142)}function q0(e,t){return[So(Kl((Ae+t)/2)),-e]}q0.invert=function(e,t){return[-t,2*Hr(c0(e))-Ae]};function W4(){var e=O0(q0),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Vt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function cs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ll=Symbol("implicit");function ec(){var e=new zn,t=[],n=[],r=ll;function i(a){let o=e.get(a);if(o===void 0){if(r!==ll)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new zn;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return ec(t,n).unknown(r)},Vt.apply(i,arguments),i}function fs(){var e=ec().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,u=0,c=0,l=.5;delete e.unknown;function d(){var f=t().length,h=i<r,m=h?i:r,p=h?r:i;a=(p-m)/Math.max(1,f-u+c*2),s&&(a=Math.floor(a)),m+=(p-m-a*(f-u))*l,o=a*(1-u),s&&(m=Math.round(m),o=Math.round(o));var b=On(f).map(function(w){return m+a*w});return n(h?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(f){return arguments.length?(s=!!f,d()):s},e.padding=function(f){return arguments.length?(u=Math.min(1,c=+f),d()):u},e.paddingInner=function(f){return arguments.length?(u=Math.min(1,f),d()):u},e.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),d()):l},e.copy=function(){return fs(t(),[r,i]).round(s).paddingInner(u).paddingOuter(c).align(l)},Vt.apply(d(),arguments)}function H0(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return H0(t())},e}function X4(){return H0(fs.apply(null,arguments).paddingInner(1))}function K4(e){return function(){return e}}function cl(e){return+e}var ed=[0,1];function lt(e){return e}function fl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:K4(isNaN(t)?NaN:.5)}function Z4(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Q4(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=fl(i,r),a=n(o,a)):(r=fl(r,i),a=n(a,o)),function(s){return a(r(s))}}function J4(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=fl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var u=Jo(e,s,1,r)-1;return a[u](i[u](s))}}function sa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ds(){var e=ed,t=ed,n=aa,r,i,a,o=lt,s,u,c;function l(){var f=Math.min(e.length,t.length);return o!==lt&&(o=Z4(e[0],e[f-1])),s=f>2?J4:Q4,u=c=null,d}function d(f){return f==null||isNaN(f=+f)?a:(u||(u=s(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(i((c||(c=s(t,e.map(r),Fe)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,cl),l()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),l()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=Vl,l()},d.clamp=function(f){return arguments.length?(o=f?!0:lt,l()):o!==lt},d.interpolate=function(f){return arguments.length?(n=f,l()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,h){return r=f,i=h,l()}}function V0(){return ds()(lt,lt)}function e9(e,t,n,r){var i=Bu(e,t,n),a;switch(r=Bi(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=n4(i,o))&&(r.precision=a),u0(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=r4(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=t4(i))&&(r.precision=a-(r.type==="%")*2);break}}return qr(r)}function ua(e){var t=e.domain;return e.ticks=function(n){var r=t();return Di(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return e9(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],u,c,l=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);l-- >0;){if(c=Cr(o,s,n),c===u)return r[i]=o,r[a]=s,t(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;u=c}return e},e}function tc(){var e=V0();return e.copy=function(){return sa(e,tc())},Vt.apply(e,arguments),ua(e)}function z0(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,cl),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return z0(e).unknown(t)},e=arguments.length?Array.from(e,cl):[0,1],ua(n)}function Y0(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function td(e){return Math.log(e)}function nd(e){return Math.exp(e)}function t9(e){return-Math.log(-e)}function n9(e){return-Math.exp(-e)}function r9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function i9(e){return e===10?r9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function a9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rd(e){return(t,n)=>-e(-t,n)}function j0(e){const t=e(td,nd),n=t.domain;let r=10,i,a;function o(){return i=a9(r),a=i9(r),n()[0]<0?(i=rd(i),a=rd(a),e(t9,n9)):e(td,nd),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const u=n();let c=u[0],l=u[u.length-1];const d=l<c;d&&([c,l]=[l,c]);let f=i(c),h=i(l),m,p;const b=s==null?10:+s;let w=[];if(!(r%1)&&h-f<b){if(f=Math.floor(f),h=Math.ceil(h),c>0){for(;f<=h;++f)for(m=1;m<r;++m)if(p=f<0?m/a(-f):m*a(f),!(p<c)){if(p>l)break;w.push(p)}}else for(;f<=h;++f)for(m=r-1;m>=1;--m)if(p=f>0?m/a(-f):m*a(f),!(p<c)){if(p>l)break;w.push(p)}w.length*2<b&&(w=Di(c,l,b))}else w=Di(f,h,Math.min(h-f,b)).map(a);return d?w.reverse():w},t.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Bi(u)).precision==null&&(u.trim=!0),u=qr(u)),s===1/0)return u;const c=Math.max(1,r*s/t.ticks().length);return l=>{let d=l/a(Math.round(i(l)));return d*r<r-.5&&(d*=r),d<=c?u(l):""}},t.nice=()=>n(Y0(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),t}function W0(){const e=j0(ds()).domain([1,10]);return e.copy=()=>sa(e,W0()).base(e.base()),Vt.apply(e,arguments),e}function id(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ad(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function X0(e){var t=1,n=e(id(t),ad(t));return n.constant=function(r){return arguments.length?e(id(t=+r),ad(t)):t},ua(n)}function K0(){var e=X0(ds());return e.copy=function(){return sa(e,K0()).constant(e.constant())},Vt.apply(e,arguments)}function od(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function o9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function s9(e){return e<0?-e*e:e*e}function Z0(e){var t=e(lt,lt),n=1;function r(){return n===1?e(lt,lt):n===.5?e(o9,s9):e(od(n),od(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ua(t)}function Q0(){var e=Z0(ds());return e.copy=function(){return sa(e,Q0()).exponent(e.exponent())},Vt.apply(e,arguments),e}function J0(){var e=[],t=[],n=[],r;function i(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=m7(e,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Jo(n,o)]}return a.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ze),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return J0().domain(e).range(t).unknown(r)},Vt.apply(a,arguments)}function e1(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Jo(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return e1().domain(e).range(t).unknown(n)},Vt.apply(i,arguments)}const Xs=new Date,Ks=new Date;function Ie(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const u=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return u;let c;do u.push(c=new Date(+a)),t(a,s),e(a);while(c<a&&a<o);return u},i.filter=a=>Ie(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Xs.setTime(+a),Ks.setTime(+o),e(Xs),e(Ks),Math.floor(n(Xs,Ks))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Bo=Ie(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Bo.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ie(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Bo);Bo.range;const en=1e3,ct=en*60,tn=ct*60,un=tn*24,nc=un*7,sd=un*30,Zs=un*365,_t=Ie(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*en)},(e,t)=>(t-e)/en,e=>e.getUTCSeconds());_t.range;const la=Ie(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*en)},(e,t)=>{e.setTime(+e+t*ct)},(e,t)=>(t-e)/ct,e=>e.getMinutes());la.range;const ca=Ie(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ct)},(e,t)=>(t-e)/ct,e=>e.getUTCMinutes());ca.range;const fa=Ie(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*en-e.getMinutes()*ct)},(e,t)=>{e.setTime(+e+t*tn)},(e,t)=>(t-e)/tn,e=>e.getHours());fa.range;const da=Ie(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*tn)},(e,t)=>(t-e)/tn,e=>e.getUTCHours());da.range;const er=Ie(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ct)/un,e=>e.getDate()-1);er.range;const hs=Ie(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/un,e=>e.getUTCDate()-1);hs.range;const ms=Ie(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/un,e=>Math.floor(e/un));ms.range;function tr(e){return Ie(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ct)/nc)}const Br=tr(0),Fi=tr(1),t1=tr(2),n1=tr(3),Kn=tr(4),r1=tr(5),i1=tr(6);Br.range;Fi.range;t1.range;n1.range;Kn.range;r1.range;i1.range;function nr(e){return Ie(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/nc)}const Or=nr(0),Gi=nr(1),a1=nr(2),o1=nr(3),Zn=nr(4),s1=nr(5),u1=nr(6);Or.range;Gi.range;a1.range;o1.range;Zn.range;s1.range;u1.range;const ha=Ie(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ha.range;const ma=Ie(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ma.range;const xt=Ie(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());xt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ie(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});xt.range;const At=Ie(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());At.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ie(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});At.range;function l1(e,t,n,r,i,a){const o=[[_t,1,en],[_t,5,5*en],[_t,15,15*en],[_t,30,30*en],[a,1,ct],[a,5,5*ct],[a,15,15*ct],[a,30,30*ct],[i,1,tn],[i,3,3*tn],[i,6,6*tn],[i,12,12*tn],[r,1,un],[r,2,2*un],[n,1,nc],[t,1,sd],[t,3,3*sd],[e,1,Zs]];function s(c,l,d){const f=l<c;f&&([c,l]=[l,c]);const h=d&&typeof d.range=="function"?d:u(c,l,d),m=h?h.range(c,+l+1):[];return f?m.reverse():m}function u(c,l,d){const f=Math.abs(l-c)/d,h=Qo(([,,b])=>b).right(o,f);if(h===o.length)return e.every(Bu(c/Zs,l/Zs,d));if(h===0)return Bo.every(Math.max(Bu(c,l,d),1));const[m,p]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return m.every(p)}return[s,u]}const[u9,l9]=l1(At,ma,Or,ms,da,ca),[c9,f9]=l1(xt,ha,Br,er,fa,la);function Qs(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Js(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Qr(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function d9(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,c=Jr(i),l=ei(i),d=Jr(a),f=ei(a),h=Jr(o),m=ei(o),p=Jr(s),b=ei(s),w=Jr(u),y=ei(u),v={a:z,A:X,b:G,B:O,c:null,d:hd,e:hd,f:R9,g:z9,G:j9,H:I9,I:k9,j:D9,L:c1,m:B9,M:O9,p:Y,q:H,Q:bd,s:gd,S:L9,u:F9,U:G9,V:U9,w:q9,W:H9,x:null,X:null,y:V9,Y:Y9,Z:W9,"%":pd},g={a:T,A:Z,b:ne,B:ee,c:null,d:md,e:md,f:Q9,g:u8,G:c8,H:X9,I:K9,j:Z9,L:d1,m:J9,M:e8,p:K,q:Q,Q:bd,s:gd,S:t8,u:n8,U:r8,V:i8,w:a8,W:o8,x:null,X:null,y:s8,Y:l8,Z:f8,"%":pd},M={a:B,A:S,b:U,B:L,c:V,d:fd,e:fd,f:N9,g:cd,G:ld,H:dd,I:dd,j:S9,L:P9,m:E9,M:x9,p:N,q:_9,Q:$9,s:T9,S:A9,u:g9,U:y9,V:w9,w:b9,W:v9,x:E,X:k,y:cd,Y:ld,Z:M9,"%":C9};v.x=_(n,v),v.X=_(r,v),v.c=_(t,v),g.x=_(n,g),g.X=_(r,g),g.c=_(t,g);function _(I,j){return function(R){var C=[],re=-1,te=0,J=I.length,de,ae,We;for(R instanceof Date||(R=new Date(+R));++re<J;)I.charCodeAt(re)===37&&(C.push(I.slice(te,re)),(ae=ud[de=I.charAt(++re)])!=null?de=I.charAt(++re):ae=de==="e"?" ":"0",(We=j[de])&&(de=We(R,ae)),C.push(de),te=re+1);return C.push(I.slice(te,re)),C.join("")}}function x(I,j){return function(R){var C=Qr(1900,void 0,1),re=A(C,I,R+="",0),te,J;if(re!=R.length)return null;if("Q"in C)return new Date(C.Q);if("s"in C)return new Date(C.s*1e3+("L"in C?C.L:0));if(j&&!("Z"in C)&&(C.Z=0),"p"in C&&(C.H=C.H%12+C.p*12),C.m===void 0&&(C.m="q"in C?C.q:0),"V"in C){if(C.V<1||C.V>53)return null;"w"in C||(C.w=1),"Z"in C?(te=Js(Qr(C.y,0,1)),J=te.getUTCDay(),te=J>4||J===0?Gi.ceil(te):Gi(te),te=hs.offset(te,(C.V-1)*7),C.y=te.getUTCFullYear(),C.m=te.getUTCMonth(),C.d=te.getUTCDate()+(C.w+6)%7):(te=Qs(Qr(C.y,0,1)),J=te.getDay(),te=J>4||J===0?Fi.ceil(te):Fi(te),te=er.offset(te,(C.V-1)*7),C.y=te.getFullYear(),C.m=te.getMonth(),C.d=te.getDate()+(C.w+6)%7)}else("W"in C||"U"in C)&&("w"in C||(C.w="u"in C?C.u%7:"W"in C?1:0),J="Z"in C?Js(Qr(C.y,0,1)).getUTCDay():Qs(Qr(C.y,0,1)).getDay(),C.m=0,C.d="W"in C?(C.w+6)%7+C.W*7-(J+5)%7:C.w+C.U*7-(J+6)%7);return"Z"in C?(C.H+=C.Z/100|0,C.M+=C.Z%100,Js(C)):Qs(C)}}function A(I,j,R,C){for(var re=0,te=j.length,J=R.length,de,ae;re<te;){if(C>=J)return-1;if(de=j.charCodeAt(re++),de===37){if(de=j.charAt(re++),ae=M[de in ud?j.charAt(re++):de],!ae||(C=ae(I,R,C))<0)return-1}else if(de!=R.charCodeAt(C++))return-1}return C}function N(I,j,R){var C=c.exec(j.slice(R));return C?(I.p=l.get(C[0].toLowerCase()),R+C[0].length):-1}function B(I,j,R){var C=h.exec(j.slice(R));return C?(I.w=m.get(C[0].toLowerCase()),R+C[0].length):-1}function S(I,j,R){var C=d.exec(j.slice(R));return C?(I.w=f.get(C[0].toLowerCase()),R+C[0].length):-1}function U(I,j,R){var C=w.exec(j.slice(R));return C?(I.m=y.get(C[0].toLowerCase()),R+C[0].length):-1}function L(I,j,R){var C=p.exec(j.slice(R));return C?(I.m=b.get(C[0].toLowerCase()),R+C[0].length):-1}function V(I,j,R){return A(I,t,j,R)}function E(I,j,R){return A(I,n,j,R)}function k(I,j,R){return A(I,r,j,R)}function z(I){return o[I.getDay()]}function X(I){return a[I.getDay()]}function G(I){return u[I.getMonth()]}function O(I){return s[I.getMonth()]}function Y(I){return i[+(I.getHours()>=12)]}function H(I){return 1+~~(I.getMonth()/3)}function T(I){return o[I.getUTCDay()]}function Z(I){return a[I.getUTCDay()]}function ne(I){return u[I.getUTCMonth()]}function ee(I){return s[I.getUTCMonth()]}function K(I){return i[+(I.getUTCHours()>=12)]}function Q(I){return 1+~~(I.getUTCMonth()/3)}return{format:function(I){var j=_(I+="",v);return j.toString=function(){return I},j},parse:function(I){var j=x(I+="",!1);return j.toString=function(){return I},j},utcFormat:function(I){var j=_(I+="",g);return j.toString=function(){return I},j},utcParse:function(I){var j=x(I+="",!0);return j.toString=function(){return I},j}}}var ud={"-":"",_:" ",0:"0"},Oe=/^\s*\d+/,h9=/^%/,m9=/[\\^$*+?|[\]().{}]/g;function ge(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function p9(e){return e.replace(m9,"\\$&")}function Jr(e){return new RegExp("^(?:"+e.map(p9).join("|")+")","i")}function ei(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function b9(e,t,n){var r=Oe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function g9(e,t,n){var r=Oe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function y9(e,t,n){var r=Oe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function w9(e,t,n){var r=Oe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function v9(e,t,n){var r=Oe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ld(e,t,n){var r=Oe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function cd(e,t,n){var r=Oe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function M9(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _9(e,t,n){var r=Oe.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function E9(e,t,n){var r=Oe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function fd(e,t,n){var r=Oe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function S9(e,t,n){var r=Oe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function dd(e,t,n){var r=Oe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function x9(e,t,n){var r=Oe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function A9(e,t,n){var r=Oe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function P9(e,t,n){var r=Oe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function N9(e,t,n){var r=Oe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function C9(e,t,n){var r=h9.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $9(e,t,n){var r=Oe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function T9(e,t,n){var r=Oe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function hd(e,t){return ge(e.getDate(),t,2)}function I9(e,t){return ge(e.getHours(),t,2)}function k9(e,t){return ge(e.getHours()%12||12,t,2)}function D9(e,t){return ge(1+er.count(xt(e),e),t,3)}function c1(e,t){return ge(e.getMilliseconds(),t,3)}function R9(e,t){return c1(e,t)+"000"}function B9(e,t){return ge(e.getMonth()+1,t,2)}function O9(e,t){return ge(e.getMinutes(),t,2)}function L9(e,t){return ge(e.getSeconds(),t,2)}function F9(e){var t=e.getDay();return t===0?7:t}function G9(e,t){return ge(Br.count(xt(e)-1,e),t,2)}function f1(e){var t=e.getDay();return t>=4||t===0?Kn(e):Kn.ceil(e)}function U9(e,t){return e=f1(e),ge(Kn.count(xt(e),e)+(xt(e).getDay()===4),t,2)}function q9(e){return e.getDay()}function H9(e,t){return ge(Fi.count(xt(e)-1,e),t,2)}function V9(e,t){return ge(e.getFullYear()%100,t,2)}function z9(e,t){return e=f1(e),ge(e.getFullYear()%100,t,2)}function Y9(e,t){return ge(e.getFullYear()%1e4,t,4)}function j9(e,t){var n=e.getDay();return e=n>=4||n===0?Kn(e):Kn.ceil(e),ge(e.getFullYear()%1e4,t,4)}function W9(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ge(t/60|0,"0",2)+ge(t%60,"0",2)}function md(e,t){return ge(e.getUTCDate(),t,2)}function X9(e,t){return ge(e.getUTCHours(),t,2)}function K9(e,t){return ge(e.getUTCHours()%12||12,t,2)}function Z9(e,t){return ge(1+hs.count(At(e),e),t,3)}function d1(e,t){return ge(e.getUTCMilliseconds(),t,3)}function Q9(e,t){return d1(e,t)+"000"}function J9(e,t){return ge(e.getUTCMonth()+1,t,2)}function e8(e,t){return ge(e.getUTCMinutes(),t,2)}function t8(e,t){return ge(e.getUTCSeconds(),t,2)}function n8(e){var t=e.getUTCDay();return t===0?7:t}function r8(e,t){return ge(Or.count(At(e)-1,e),t,2)}function h1(e){var t=e.getUTCDay();return t>=4||t===0?Zn(e):Zn.ceil(e)}function i8(e,t){return e=h1(e),ge(Zn.count(At(e),e)+(At(e).getUTCDay()===4),t,2)}function a8(e){return e.getUTCDay()}function o8(e,t){return ge(Gi.count(At(e)-1,e),t,2)}function s8(e,t){return ge(e.getUTCFullYear()%100,t,2)}function u8(e,t){return e=h1(e),ge(e.getUTCFullYear()%100,t,2)}function l8(e,t){return ge(e.getUTCFullYear()%1e4,t,4)}function c8(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Zn(e):Zn.ceil(e),ge(e.getUTCFullYear()%1e4,t,4)}function f8(){return"+0000"}function pd(){return"%"}function bd(e){return+e}function gd(e){return Math.floor(+e/1e3)}var lr,rc,pa;d8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function d8(e){return lr=d9(e),rc=lr.format,lr.parse,pa=lr.utcFormat,lr.utcParse,lr}function h8(e){return new Date(e)}function m8(e){return e instanceof Date?+e:+new Date(+e)}function ic(e,t,n,r,i,a,o,s,u,c){var l=V0(),d=l.invert,f=l.domain,h=c(".%L"),m=c(":%S"),p=c("%I:%M"),b=c("%I %p"),w=c("%a %d"),y=c("%b %d"),v=c("%B"),g=c("%Y");function M(_){return(u(_)<_?h:s(_)<_?m:o(_)<_?p:a(_)<_?b:r(_)<_?i(_)<_?w:y:n(_)<_?v:g)(_)}return l.invert=function(_){return new Date(d(_))},l.domain=function(_){return arguments.length?f(Array.from(_,m8)):f().map(h8)},l.ticks=function(_){var x=f();return e(x[0],x[x.length-1],_??10)},l.tickFormat=function(_,x){return x==null?M:c(x)},l.nice=function(_){var x=f();return(!_||typeof _.range!="function")&&(_=t(x[0],x[x.length-1],_??10)),_?f(Y0(x,_)):l},l.copy=function(){return sa(l,ic(e,t,n,r,i,a,o,s,u,c))},l}function p8(){return Vt.apply(ic(c9,f9,xt,ha,Br,er,fa,la,_t,rc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function b8(){return Vt.apply(ic(u9,l9,At,ma,Or,hs,da,ca,_t,pa).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ps(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function bs(){var e=0,t=.5,n=1,r=1,i,a,o,s,u,c=lt,l,d=!1,f;function h(p){return isNaN(p=+p)?f:(p=.5+((p=+l(p))-a)*(r*p<r*a?s:u),c(d?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=l(e=+e),a=l(t=+t),o=l(n=+n),s=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(d=!!p,h):d},h.interpolator=function(p){return arguments.length?(c=p,h):c};function m(p){return function(b){var w,y,v;return arguments.length?([w,y,v]=b,c=as(p,[w,y,v]),h):[c(0),c(.5),c(1)]}}return h.range=m(aa),h.rangeRound=m(Vl),h.unknown=function(p){return arguments.length?(f=p,h):f},function(p){return l=p,i=p(e),a=p(t),o=p(n),s=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,h}}function m1(){var e=ua(bs()(lt));return e.copy=function(){return ps(e,m1())},cs.apply(e,arguments)}function p1(){var e=j0(bs()).domain([.1,1,10]);return e.copy=function(){return ps(e,p1()).base(e.base())},cs.apply(e,arguments)}function b1(){var e=X0(bs());return e.copy=function(){return ps(e,b1()).constant(e.constant())},cs.apply(e,arguments)}function g1(){var e=Z0(bs());return e.copy=function(){return ps(e,g1()).exponent(e.exponent())},cs.apply(e,arguments)}function ue(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const g8=ue("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),y8=ue("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),w8=ue("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),v8=ue("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),M8=ue("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),_8=ue("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),E8=ue("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),S8=ue("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),x8=ue("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),A8=ue("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),P8=ue("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),_e=e=>p6(e[e.length-1]);var y1=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ue);const w1=_e(y1);var v1=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ue);const M1=_e(v1);var _1=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ue);const E1=_e(_1);var S1=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ue);const x1=_e(S1);var dl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ue);const Oo=_e(dl);var A1=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ue);const P1=_e(A1);var hl=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ue);const Ui=_e(hl);var N1=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ue);const C1=_e(N1);var $1=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ue);const T1=_e($1);var I1=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ue);const k1=_e(I1);var D1=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ue);const R1=_e(D1);var B1=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ue);const O1=_e(B1);var L1=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ue);const F1=_e(L1);var G1=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ue);const U1=_e(G1);var q1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ue);const H1=_e(q1);var V1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ue);const z1=_e(V1);var Y1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ue);const j1=_e(Y1);var W1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ue);const X1=_e(W1);var K1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ue);const Z1=_e(K1);var Q1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ue);const J1=_e(Q1);var ep=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ue);const tp=_e(ep);var np=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ue);const rp=_e(np);var ip=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ue);const ap=_e(ip);var op=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ue);const sp=_e(op);var up=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ue);const lp=_e(up);var cp=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ue);const fp=_e(cp);var dp=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ue);const hp=_e(dp);function mp(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const pp=zl(Ft(300,.5,0),Ft(-240,.5,1));var bp=zl(Ft(-100,.75,.35),Ft(80,1.5,.8)),gp=zl(Ft(260,.75,.35),Ft(80,1.5,.8)),La=Ft();function yp(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return La.h=360*e-100,La.s=1.5-1.5*t,La.l=.8-.9*t,La+""}var Fa=vn(),N8=Math.PI/3,C8=Math.PI*2/3;function wp(e){var t;return e=(.5-e)*Math.PI,Fa.r=255*(t=Math.sin(e))*t,Fa.g=255*(t=Math.sin(e+N8))*t,Fa.b=255*(t=Math.sin(e+C8))*t,Fa+""}function vp(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function gs(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Mp=gs(ue("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var _p=gs(ue("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ep=gs(ue("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Sp=gs(ue("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const xp=Math.cos,ac=Math.min,Lo=Math.sin,ke=Math.sqrt,Fo=Math.PI,ys=2*Fo,$8=ke(3),Ap={draw(e,t){const n=ke(t+ac(t/28,.75))*.59436,r=n/2,i=r*$8;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},oc={draw(e,t){const n=ke(t/Fo);e.moveTo(n,0),e.arc(0,0,n,0,ys)}},Pp={draw(e,t){const n=ke(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Np=ke(1/3),T8=Np*2,Cp={draw(e,t){const n=ke(t/T8),r=n*Np;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},$p={draw(e,t){const n=ke(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Tp={draw(e,t){const n=ke(t-ac(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Ip={draw(e,t){const n=ke(t),r=-n/2;e.rect(r,r,n,n)}},kp={draw(e,t){const n=ke(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},I8=.8908130915292852,Dp=Lo(Fo/10)/Lo(7*Fo/10),k8=Lo(ys/10)*Dp,D8=-xp(ys/10)*Dp,Rp={draw(e,t){const n=ke(t*I8),r=k8*n,i=D8*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=ys*a/5,s=xp(o),u=Lo(o);e.lineTo(u*n,-s*n),e.lineTo(s*r-u*i,u*r+s*i)}e.closePath()}},eu=ke(3),Bp={draw(e,t){const n=-ke(t/(eu*3));e.moveTo(0,n*2),e.lineTo(-eu*n,-n),e.lineTo(eu*n,-n),e.closePath()}},R8=ke(3),Op={draw(e,t){const n=ke(t)*.6824,r=n/2,i=n*R8/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},rt=-.5,at=ke(3)/2,ml=1/ke(12),B8=(ml/2+1)*3,Lp={draw(e,t){const n=ke(t/B8),r=n/2,i=n*ml,a=r,o=n*ml+n,s=-a,u=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,u),e.lineTo(rt*r-at*i,at*r+rt*i),e.lineTo(rt*a-at*o,at*a+rt*o),e.lineTo(rt*s-at*u,at*s+rt*u),e.lineTo(rt*r+at*i,rt*i-at*r),e.lineTo(rt*a+at*o,rt*o-at*a),e.lineTo(rt*s+at*u,rt*u-at*s),e.closePath()}},Fp={draw(e,t){const n=ke(t-ac(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},O8=[oc,Pp,Cp,Ip,Rp,Bp,Lp],L8=[oc,Tp,Fp,Op,Ap,kp,$p];function hi(e,t,n){this.k=e,this.x=t,this.y=n}hi.prototype={constructor:hi,scale:function(e){return e===1?this:new hi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new hi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};hi.prototype;var Ho,Vo,zo,Mr,Wi,kn,Xi,_r,Ki,yt,Tt,Er;class F8{constructor(){Xe(this,Ho,.03);Xe(this,Vo,.5);Xe(this,zo,200);Xe(this,Mr,!1);Xe(this,Wi,null);Xe(this,kn,null);Xe(this,Xi,4);Xe(this,_r,1/0);Xe(this,Ki,void 0);Xe(this,yt,null);Xe(this,Tt,new AudioContext);Xe(this,Er,null);Aa(this,"_scheduler",()=>{const t=we(this,Xi),n=60/we(this,kn);let r=we(this,Ki)+we(this,yt)*n;for(;r<we(this,Tt).currentTime+we(this,Vo);)if(we(this,yt)<we(this,_r)-1){r+=n;const i=we(this,yt)%t===t-1||we(this,yt)===-1,a=r-we(this,Tt).currentTime,o=performance.now()+a*1e3;this._playSound(r,o,i),Ic(this,yt)._++}we(this,yt)<we(this,_r)-1?bt(this,Wi,setTimeout(this._scheduler,we(this,zo))):this.stop()})}get bpm(){return we(this,kn)}get beatCount(){return we(this,yt)}onClick(t){bt(this,Er,t)}start(t,n=4,r=1/0){if(!t||Number.isNaN(+t)){console.error(`[Metronome] Invalid bpm ${t}`);return}if(!n||Number.isNaN(+n)){console.error(`[Metronome] Invalid accent ${n}`);return}if(!r||Number.isNaN(+r)){console.error(`[Metronome] Invalid maxBeeps ${r}`);return}we(this,Tt).state==="suspended"&&we(this,Tt).resume(),bt(this,kn,+t),bt(this,Xi,+n),bt(this,_r,+r),bt(this,Mr,!0),console.log(`Metronome @ ${t}bpm, accent every ${n}. beat, limited to ${r}`),bt(this,yt,-1),bt(this,Ki,we(this,Tt).currentTime),this._scheduler()}stop(){console.log("[Metronome] stopped"),clearTimeout(we(this,Wi)),bt(this,Mr,!1)}toggle(t,n=4){we(this,Mr)?this.stop():(t===void 0&&(t=we(this,kn)),this.start(t,n))}_playSound(t,n,r){we(this,Er)&&we(this,Er).call(this,t,n,r);const i=we(this,Tt).createOscillator();i.connect(we(this,Tt).destination);const a=r?300:200;i.frequency.value=a,i.start(t),i.stop(t+we(this,Ho))}}Ho=new WeakMap,Vo=new WeakMap,zo=new WeakMap,Mr=new WeakMap,Wi=new WeakMap,kn=new WeakMap,Xi=new WeakMap,_r=new WeakMap,Ki=new WeakMap,yt=new WeakMap,Tt=new WeakMap,Er=new WeakMap;function G8(e,t,n){const r=e.slice();return r[28]=t[n],r}function yd(e,t,n){const r=e.slice();return r[28]=t[n],r}function wd(e){let t,n=e[28]+"",r;return{c(){t=W("option"),r=pe(n),t.__value=e[28],Ne(t,t.__value)},m(i,a){$e(i,t,a),P(t,r)},p:Te,d(i){i&&Ce(t)}}}function U8(e){let t;return{c(){t=W("option"),t.textContent=`1/${e[28]} note`,t.__value=e[28],Ne(t,t.__value)},m(n,r){$e(n,t,r)},p:Te,d(n){n&&Ce(t)}}}function q8(e){let t,n,r,i,a,o=e[1].length+"",s,u,c,l,d,f,h,m,p,b,w,y,v,g,M,_,x,A,N,B,S,U,L,V,E,k,z,X=e[7]?"area":"bars",G,O,Y,H,T,Z,ne,ee,K,Q,I,j,R,C,re,te,J,de=Dn(e[9]),ae=[];for(let ie=0;ie<de.length;ie+=1)ae[ie]=wd(yd(e,de,ie));let We=Dn([16,32,64,128]),Me=[];for(let ie=0;ie<4;ie+=1)Me[ie]=U8(G8(e,We,ie));return{c(){t=W("main"),n=W("h2"),n.textContent="Live-Subdivision",r=le(),i=W("p"),a=pe("Connect a MIDI instrument (currently "),s=pe(o),u=pe(` connected), choose
        your tempo and subdivision, and start playing. The bar chart will show you
        how often you hit each time bin and the last `),c=pe(e[6]),l=pe(` notes will be
        shown as ticks that fade out one new notes come in (from red for new to blue
        for old). You can play freely, use the integrated metronome, or play a song
        in the background (in another tab). All notes will be timed relative to the
        first one, but you can adjust all notes to make them earlier or later in
        case you messed up the first one.`),d=le(),f=W("div"),h=W("label"),m=pe(`tempo
            `),p=W("input"),b=le(),w=W("label"),y=pe(`grid
            `),v=W("select");for(let ie=0;ie<ae.length;ie+=1)ae[ie].c();g=le(),M=W("label"),_=pe(`binning
            `),x=W("select");for(let ie=0;ie<4;ie+=1)Me[ie].c();A=le(),N=W("label"),B=pe(`adjust
            `),S=W("input"),U=le(),L=W("label"),V=pe(`note ticks
            `),E=W("input"),k=le(),z=W("button"),G=pe(X),O=le(),Y=W("div"),H=W("canvas"),T=le(),Z=W("div"),ne=W("button"),ne.textContent="reset",ee=le(),K=W("button"),K.textContent="export",Q=le(),I=W("button"),I.textContent="import",j=le(),R=W("input"),C=le(),re=W("button"),re.textContent="metronome",q(i,"class","explanation"),q(p,"type","number"),q(p,"step","1"),q(p,"min","10"),q(p,"max","400"),wt(p,"width","55px"),q(h,"title","The tempo in beats per minute (bpm)"),e[3]===void 0&&Gn(()=>e[15].call(v)),q(w,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[4]===void 0&&Gn(()=>e[16].call(x)),q(M,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),q(S,"type","number"),q(S,"step","0.01"),q(S,"min","-2"),q(S,"max","2"),wt(S,"width","55px"),q(N,"title","Shift all notes by an amount in seconds"),q(E,"type","number"),q(E,"step","1"),q(E,"min","0"),q(E,"max","100"),wt(E,"width","55px"),q(L,"title","The number of most recent notes that are shown as ticks."),q(z,"title","Toggle between bars and area"),q(f,"class","control"),wt(H,"width",mi+"px"),wt(H,"height",pl+"px"),q(Y,"class","visualization"),q(ne,"title","Clear all played notes"),q(K,"title","Export all data and settings"),q(I,"title","Export all data and settings"),q(R,"type","file"),q(R,"id","file-input"),wt(R,"display","none"),q(re,"title","Toggle metronome (click)"),q(Z,"class","control"),q(t,"class","demo")},m(ie,Ee){$e(ie,t,Ee),P(t,n),P(t,r),P(t,i),P(i,a),P(i,s),P(i,u),P(i,c),P(i,l),P(t,d),P(t,f),P(f,h),P(h,m),P(h,p),Ne(p,e[2]),P(f,b),P(f,w),P(w,y),P(w,v);for(let ye=0;ye<ae.length;ye+=1)ae[ye]&&ae[ye].m(v,null);pn(v,e[3],!0),P(f,g),P(f,M),P(M,_),P(M,x);for(let ye=0;ye<4;ye+=1)Me[ye]&&Me[ye].m(x,null);pn(x,e[4],!0),P(f,A),P(f,N),P(N,B),P(N,S),Ne(S,e[5]),P(f,U),P(f,L),P(L,V),P(L,E),Ne(E,e[6]),P(f,k),P(f,z),P(z,G),P(t,O),P(t,Y),P(Y,H),e[20](H),P(t,T),P(t,Z),P(Z,ne),P(Z,ee),P(Z,K),P(Z,Q),P(Z,I),P(Z,j),P(Z,R),P(Z,C),P(Z,re),te||(J=[fe(p,"input",e[14]),fe(p,"change",e[11]),fe(v,"change",e[15]),fe(v,"change",e[11]),fe(x,"change",e[16]),fe(x,"change",e[11]),fe(S,"input",e[17]),fe(S,"change",e[11]),fe(E,"input",e[18]),fe(E,"change",e[11]),fe(z,"click",e[19]),fe(ne,"click",e[21]),fe(K,"click",e[12]),fe(I,"click",e[22]),fe(R,"input",e[13]),fe(re,"click",e[23])],te=!0)},p(ie,Ee){if(Ee[0]&2&&o!==(o=ie[1].length+"")&&nn(s,o),Ee[0]&64&&nn(c,ie[6]),Ee[0]&4&&ft(p.value)!==ie[2]&&Ne(p,ie[2]),Ee[0]&512){de=Dn(ie[9]);let ye;for(ye=0;ye<de.length;ye+=1){const fn=yd(ie,de,ye);ae[ye]?ae[ye].p(fn,Ee):(ae[ye]=wd(fn),ae[ye].c(),ae[ye].m(v,null))}for(;ye<ae.length;ye+=1)ae[ye].d(1);ae.length=de.length}Ee[0]&520&&pn(v,ie[3]),Ee[0]&16&&pn(x,ie[4]),Ee[0]&32&&ft(S.value)!==ie[5]&&Ne(S,ie[5]),Ee[0]&64&&ft(E.value)!==ie[6]&&Ne(E,ie[6]),Ee[0]&128&&X!==(X=ie[7]?"area":"bars")&&nn(G,X)},i:Te,o:Te,d(ie){ie&&Ce(t),Si(ae,ie),Si(Me,ie),e[20](null),te=!1,ln(J)}}}let mi=1e3,pl=1e3;function H8(e,t,n){const r=["4:2","4:3","4:4","4:5","3:2","3:3","3:4","3:5"],i=Math.PI*2;let a,o=new F8,s=[],u=120,c=r[0],l=64,d=0,f=1,h=!1,m=0,p=[];const b=()=>{n(1,s=[]),D.inputs.length<1?console.warn("No MIDI device detected"):(D.inputs.forEach((E,k)=>{console.log(`MIDI device ${k}: ${E.name}`),E.addListener("noteon",w)}),n(1,s=[...D.inputs]))},w=E=>{p.length===0&&(m=E.timestamp);const k=(E.timestamp-m)/1e3;p.push(k),y()},y=()=>{const E=mi/2,k=pl/2,z=mi*.4,X=z*.8,G=z*.9,O=z*1.1,Y=z*.95,H=Math.PI/2,T=a.getContext("2d"),Z=window.devicePixelRatio,ne=a.getBoundingClientRect();n(0,a.width=ne.width*Z,a),n(0,a.height=ne.height*Z,a),T.scale(Z,Z),n(0,a.style.width=`${ne.width}px`,a),n(0,a.style.height=`${ne.height}px`,a),T.clearRect(0,0,mi,pl);const[ee,K]=c.split(":").map(J=>+J),Q=Zh(u)*ee,I=p.map(J=>J+d),R=I.map(J=>J%Q).map(J=>J/Q*i),C=mi*.08;if(!h){T.fillStyle="#f8f8f8",T.strokeStyle="#aaa";const J=l*ee/4,ae=f7().domain([0,i]).thresholds(On(J).map(Me=>Me/J*i))(R),We=Je(ae,Me=>Me.length);for(const Me of ae){if(Me.length===0)continue;const ie=Me.length/We*C,Ee=z+ie,ye=Me.x0-H,fn=Math.cos(ye),xa=Math.sin(ye),jr=Me.x1-H,Hg=Math.cos(jr),Vg=Math.sin(jr);T.beginPath(),T.moveTo(E+fn*z,k+xa*z),T.lineTo(E+fn*Ee,k+xa*Ee),T.arc(E,k,Ee,ye,jr),T.lineTo(E+Hg*z,k+Vg*z),T.closePath(),T.fill(),T.stroke()}}if(h&&R.length>0){let J=4/l;const Me=$5(R,{bandwidth:J,pad:.1,bins:360}).bandwidth(J),ie=Je([...Me],Ee=>Ee.y);console.log([...Me]),T.beginPath();for(const Ee of Me){const ye=Ee.x-H,fn=z+Ee.y/ie*C,xa=Math.cos(ye),jr=Math.sin(ye);T.lineTo(E+xa*fn,k+jr*fn)}T.closePath(),T.fillStyle="#e4f0fa",T.fill(),T.strokeStyle="#aaa",T.stroke()}if(f>0){T.lineWidth=3;const J=ae=>Ui(1-ae),de=I.slice(-f);for(const[ae,We]of de.entries()){const Me=We/Q*i-H,ie=Math.cos(Me),Ee=Math.sin(Me);T.strokeStyle=J(ae/de.length),T.beginPath(),T.moveTo(E+ie*z,k+Ee*z),T.lineTo(E+ie*O,k+Ee*O),T.stroke()}}T.strokeStyle="#aaa",T.fillStyle="white",A3(T,E,k,z),T.lineWidth=2,T.fill(),T.stroke();const re=On(ee).map(J=>i/ee*J-H),te=On(ee*K).map(J=>i/(ee*K)*J-H);T.beginPath(),T.lineWidth=2;for(const J of re){const de=Math.cos(J),ae=Math.sin(J);T.moveTo(E+de*X,k+ae*X),T.lineTo(E+de*Y,k+ae*Y)}T.stroke(),T.lineWidth=1,T.beginPath();for(const J of te){const de=Math.cos(J),ae=Math.sin(J);T.moveTo(E+de*G,k+ae*G),T.lineTo(E+de*Y,k+ae*Y)}T.stroke()},v=()=>{const k=JSON.stringify({tempo:u,grid:c,binNote:l,adjustTime:d,noteTickLimit:f,noteOnTimes:p,showKde:h},void 0,2),z=new Blob([k],{type:"text/plain;charset=utf-8"});Bl(z,"live-subdivision.json")},g=async E=>{const z=await E.target.files[0].text(),X=JSON.parse(z);(p.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,u=X.tempo),n(3,c=X.grid),n(4,l=X.binNote),n(5,d=X.adjustTime),n(6,f=X.noteTickLimit),n(8,p=X.noteOnTimes),n(7,h=X.showKde??!1),y())};Yo(()=>{D.enable().then(b).catch(E=>alert(E)),y()}),jo(()=>{for(const E of D.inputs)E.removeListener()});function M(){u=ft(this.value),n(2,u)}function _(){c=ao(this),n(3,c),n(9,r)}function x(){l=ao(this),n(4,l)}function A(){d=ft(this.value),n(5,d)}function N(){f=ft(this.value),n(6,f)}const B=()=>{n(7,h=!h),y()};function S(E){Sr[E?"unshift":"push"](()=>{a=E,n(0,a)})}return[a,s,u,c,l,d,f,h,p,r,o,y,v,g,M,_,x,A,N,B,S,()=>{confirm("Reset played notes?")&&(n(8,p=[]),y())},()=>document.querySelector("#file-input").click(),()=>{o.toggle(u,+c.split(":")[0])}]}class V8 extends Ji{constructor(t){super(),Qi(this,t,H8,q8,Zi,{},null,[-1,-1])}}function Qn(e){return e!=null&&!Number.isNaN(e)}function Gt(e,t){return+Qn(t)-+Qn(e)||ze(e,t)}function Go(e,t){return+Qn(t)-+Qn(e)||ra(e,t)}function Gp(e){return e!=null&&`${e}`!=""}function Up(e){return isFinite(e)?e:NaN}function sc(e){return e>0&&isFinite(e)?e:NaN}function qp(e){return e<0&&isFinite(e)?e:NaN}function z8(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${Y8(e.getUTCFullYear())}-${Zt(e.getUTCMonth()+1,2)}-${Zt(e.getUTCDate(),2)}${n||r||i||a?`T${Zt(n,2)}:${Zt(r,2)}${i||a?`:${Zt(i,2)}${a?`.${Zt(a,3)}`:""}`:""}Z`:""}`}function Y8(e){return e<0?`-${Zt(-e,6)}`:e>9999?`+${Zt(e,6)}`:Zt(e,4)}function Zt(e,t){return`${e}`.padStart(t,"0")}const j8=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Hp(e,t){return j8.test(e+="")?new Date(e):typeof t=="function"?t(e):t}function Lr(e){if(e==null)return;const t=e[0],n=e[e.length-1];return ra(t,n)}const pr=1e3,bn=pr*60,gn=bn*60,Ut=gn*24,$t=Ut*7,Ln=Ut*30,hn=Ut*365,tu=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",pr],["5 seconds",5*pr],["15 seconds",15*pr],["30 seconds",30*pr],["minute",bn],["5 minutes",5*bn],["15 minutes",15*bn],["30 minutes",30*bn],["hour",gn],["3 hours",3*gn],["6 hours",6*gn],["12 hours",12*gn],["day",Ut],["2 days",2*Ut],["week",$t],["2 weeks",2*$t],["month",Ln],["3 months",3*Ln],["6 months",6*Ln],["year",hn],["2 years",2*hn],["5 years",5*hn],["10 years",10*hn],["20 years",20*hn],["50 years",50*hn],["100 years",100*hn]],uc=new Map([["second",pr],["minute",bn],["hour",gn],["day",Ut],["monday",$t],["tuesday",$t],["wednesday",$t],["thursday",$t],["friday",$t],["saturday",$t],["sunday",$t],["week",$t],["month",Ln],["year",hn]]),Vp=new Map([["second",_t],["minute",la],["hour",fa],["day",er],["monday",Fi],["tuesday",t1],["wednesday",n1],["thursday",Kn],["friday",r1],["saturday",i1],["sunday",Br],["week",Br],["month",ha],["year",xt]]),lc=new Map([["second",_t],["minute",ca],["hour",da],["day",ms],["monday",Gi],["tuesday",a1],["wednesday",o1],["thursday",Zn],["friday",s1],["saturday",u1],["sunday",Or],["week",Or],["month",ma],["year",At]]),ba=Symbol("intervalDuration"),ws=Symbol("intervalType");for(const[e,t]of Vp)t[ba]=uc.get(e),t[ws]="time";for(const[e,t]of lc)t[ba]=uc.get(e),t[ws]="utc";const pi=[["year",At,"utc"],["month",ma,"utc"],["day",ms,"utc",6*Ln],["hour",da,"utc",3*Ut],["minute",ca,"utc",6*gn],["second",_t,"utc",30*bn]],ro=[["year",xt,"time"],["month",ha,"time"],["day",er,"time",6*Ln],["hour",fa,"time",3*Ut],["minute",la,"time",6*gn],["second",_t,"time",30*bn]],W8=[pi[0],ro[0],pi[1],ro[1],pi[2],ro[2],...pi.slice(3)];function zp(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=lc.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function Yp(e){return Wp(zp(e),"time")}function jp(e){return Wp(zp(e),"utc")}function Wp([e,t],n){let r=(n==="time"?Vp:lc).get(e);return t>1&&(r=r.every(t),r[ba]=uc.get(e)*t,r[ws]=n),r}function vd(e,t){if(!(t>1))return;const n=e[ba];if(!tu.some(([,i])=>i===n)||n%Ut===0&&Ut<n&&n<Ln)return;const[r]=tu[Qo(([,i])=>Math.log(i)).center(tu,Math.log(n*t))];return(e[ws]==="time"?Yp:jp)(r)}function Md(e,t,n){const r=t==="time"?rc:pa;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=X8(n);switch(e){case"millisecond":return cr(r(".%L"),r(":%M:%S"),i);case"second":return cr(r(":%S"),r("%-I:%M"),i);case"minute":return cr(r("%-I:%M"),r("%p"),i);case"hour":return cr(r("%-I %p"),r("%b %-d"),i);case"day":return cr(r("%-d"),r("%b"),i);case"month":return cr(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function X8(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function K8(e){return e==="time"?ro:e==="utc"?pi:W8}function Z8(e,t,n){const r=Je(g7(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return Md("millisecond","utc",n);for(const[i,a,o,s]of K8(e)){if(r>s||i==="hour"&&!r)break;if(t.every(u=>a.floor(u)>=u))return Md(i,o,n)}}function cr(e,t,n){return(r,i,a)=>{const o=e(r,i),s=t(r,i),u=i-Lr(a);return i!==u&&a[u]!==void 0&&s===t(a[u],u)?o:n(o,s)}}const qi=Object.getPrototypeOf(Uint8Array),Q8=Object.prototype.toString,Xp=Symbol("reindex");function dt(e,t,n){const r=typeof t;return r==="string"?_d(e,Kp(t),n):r==="function"?_d(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Be(e,ga(t),n):typeof(t==null?void 0:t.transform)=="function"?Ed(t.transform(e),n):J8(Ed(t,n),e==null?void 0:e[Xp])}function J8(e,t){return t?hc(e,t):e}function _d(e,t,n){return Be(e,(n==null?void 0:n.prototype)instanceof qi?e_(t):t,n)}function Ed(e,t){return t===void 0?nt(e):e instanceof t?e:t.prototype instanceof qi&&!(e instanceof qi)?t.from(e,fc):t.from(e)}function e_(e){return(t,n)=>fc(e(t,n))}const io=[null],Kp=e=>t=>t[e],cc={transform:Sn},je={transform:e=>e},t_=()=>1,n_=()=>!0,qe=e=>e==null?e:`${e}`,xe=e=>e==null?e:+e,Zp=e=>e?e[0]:void 0,r_=e=>e?e[1]:void 0,ga=e=>()=>e;function i_(e){const t=+`${e}`.slice(1)/100;return(n,r)=>go(n,t,r)}function Sd(e){return e instanceof qi?e:Be(e,fc,Float64Array)}function fc(e){return e==null?NaN:Number(e)}function a_(e){return Be(e,o_)}function o_(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Hp(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Jn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:Ms(e)?[void 0,e]:[e,void 0]}function Ze(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function Qp(e,t,n){if(e!=null)return Ct(e,t,n)}function Ct(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function nt(e){return e==null||e instanceof Array||e instanceof qi?e:Array.from(e)}function Be(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Hi(e,t=Array){return e instanceof t?e.slice():t.from(e)}function Jp({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function eb({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function tb(e){return Jp(e)||eb(e)||e.interval!==void 0}function rr(e){return(e==null?void 0:e.toString)===Q8}function bl(e){return rr(e)&&(e.type!==void 0||e.domain!==void 0)}function dc(e){return rr(e)&&typeof e.transform!="function"}function Vi(e){return dc(e)&&e.value===void 0&&e.channel===void 0}function nb(e,t,n,r=je){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function rb(e,t){return e===void 0&&t===void 0?[Zp,r_]:[e,t]}function s_({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Jn(t)),e===void 0&&([e]=Jn(n)),e}function Sn(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function hc(e,t){return Be(t,n=>e[n],e.constructor)}function u_(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Ga(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gl(e){let t;return[{transform:()=>t,label:ya(e)},n=>t=n]}function l_(e){return e==null?[e]:gl(e)}function ya(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function ib(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return pt(r)||pt(i)?Be(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Be(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function c_(e,t){const n=ab(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Be(e,n):e}function ab(e,t){const n=mc(e,t);return n&&(r=>Qn(r)?n.floor(r):r)}function mc(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>On(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>On(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?Yp:jp)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function wa(e,t){if(e=mc(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function f_(e,t){if(e=wa(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function d_(e){return typeof(e==null?void 0:e.range)=="function"}function vs(e){return e===void 0||dc(e)?e:{value:e}}function h_(e){return e==null?null:{transform:t=>dt(t,e,Float64Array),label:ya(e)}}function ir(e){return e&&typeof e[Symbol.iterator]=="function"}function ob(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function xd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function pt(e){for(const t of e)if(t!=null)return t instanceof Date}function m_(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&Hp(t)}function p_(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function b_(e){for(const t of e)if(t!=null)return typeof t=="number"}function nu(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const g_=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Ms(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||g_.has(e))}function y_(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Ve(e){return e==null||zi(e)}function zi(e){return/^\s*none\s*$/i.test(e)}function w_(e){return/^\s*round\s*$/i.test(e)}function yl(e,t){return Qp(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function pc(e="middle"){return yl(e,"frameAnchor")}function v_(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function M_(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function sb(e){return ir(e)?M_(e):e}function ub(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Ct(e,"clip",["frame","sphere"])),e}const Rt=Symbol("position"),cn=Symbol("color"),va=Symbol("radius"),Ma=Symbol("length"),_a=Symbol("opacity"),_s=Symbol("symbol"),lb=Symbol("projection"),Pe=new Map([["x",Rt],["y",Rt],["fx",Rt],["fy",Rt],["r",va],["color",cn],["opacity",_a],["symbol",_s],["length",Ma],["projection",lb]]);function __(e){return e===Rt||e===lb}function E_(e){return e===Rt||e===va||e===Ma||e===_a}const S_=Math.sqrt(3),x_=2/S_,A_={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*x_,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},cb=new Map([["asterisk",Ap],["circle",oc],["cross",Pp],["diamond",Cp],["diamond2",$p],["hexagon",A_],["plus",Tp],["square",Ip],["square2",kp],["star",Rp],["times",Fp],["triangle",Bp],["triangle2",Op],["wye",Lp]]);function fb(e){return e&&typeof e.draw=="function"}function P_(e){return fb(e)?!0:typeof e!="string"?!1:cb.has(e.toLowerCase())}function bc(e){if(e==null||fb(e))return e;const t=cb.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function db({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=hb(e)),t!=null&&!Vi(t)&&(r=ru(r,pb(t))),n&&(r=ru(r,mb))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||Vi(t))&&{sort:t},transform:ru(r,o)}}function Uo({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=hb(e)),t!=null&&!Vi(t)&&(r=iu(r,pb(t))),n&&(r=iu(r,mb))),{...i,...(t===null||Vi(t))&&{sort:t},initializer:iu(r,a)}}function ru(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,nt(n),r,i)}}function iu(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,s,u,c,l,d;return{data:s=n,facets:u=r,channels:o}=e.call(this,n,r,i,...a),{data:l=s,facets:d=u,channels:c}=t.call(this,s,u,{...i,...o},...a),{data:l,facets:d,channels:{...o,...c}}}}function hb(e){return(t,n)=>{const r=dt(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function mb(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function pb(e){return(typeof e=="function"&&e.length!==1?N_:C_)(e)}function N_(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function C_(e){let t,n;({channel:t,value:e,order:n}={...vs(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?Go:Gt),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Gt;break;case"descending":n=Go;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let s;if(t===void 0)s=dt(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(s=o[t],!s)return{};s=s.value}const u=(c,l)=>n(s[c],s[l]);return{data:i,facets:a.map(c=>c.slice().sort(u))}}}function $_(e,t,n=T_){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&rr(e))return I_(e);if(typeof e=="function")return k_(e);if(/^p\d{2}$/i.test(e))return Kt(i_(e));switch(`${e}`.toLowerCase()){case"first":return R_;case"last":return B_;case"identity":return D_;case"count":return Pd;case"distinct":return O_;case"sum":return t==null?Pd:L_;case"proportion":return Nd(t,"data");case"proportion-facet":return Nd(t,"facet");case"deviation":return Kt(e7);case"min":return Kt(an);case"min-index":return Kt(h7);case"max":return Kt(Je);case"max-index":return Kt(d7);case"mean":return Ad(Dm);case"median":return Ad(Ou);case"variance":return Kt(Am);case"mode":return Kt(b7)}return n(e)}function T_(e){throw new Error(`invalid reduce: ${e}`)}function I_(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function k_(e){return{reduceIndex(t,n,r){return e(hc(n,t),r)}}}function Kt(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function Ad(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return pt(n)?new Date(r):r}}}const D_={reduceIndex(e,t){return hc(t,e)}},R_={reduceIndex(e,t){return t[e[0]]}},B_={reduceIndex(e,t){return t[e[e.length-1]]}},Pd={label:"Frequency",reduceIndex(e){return e.length}},O_={label:"Distinct",reduceIndex(e,t){const n=new es;for(const r of e)n.add(t[r]);return n.size}},L_=Kt(Yn);function Nd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Yn(n,a=>r[a])/i}}function Yi(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=ya(r)},s){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),bb(s,{scale:t,type:n,value:dt(e,r),label:o,filter:i,hint:a})}function F_(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Yi(t,r,n)]))}function G_(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Be(a,o)]}));return n.channels=e,n}function bb(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&nu(r,Ms)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&nu(r,y_)?null:"opacity";break;case"symbol":n!==!0&&nu(r,P_)?(t.scale=null,t.value=Be(r,bc)):t.scale="symbol";break;default:t.scale=Pe.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Pe.has(n))throw new Error(`unknown scale: ${n}`);return t}function U_(e,t,n,r,i){const{order:a,reverse:o,reduce:s=!0,limit:u}=i;for(const c in i){if(!Pe.has(c))continue;let{value:l,order:d=a,reverse:f=o,reduce:h=s,limit:m=u}=vs(i[c]);const p=l==null?void 0:l.startsWith("-");if(p&&(l=l.slice(1)),d=d===void 0?p!==(l==="width"||l==="height")?yb:gb:V_(d),h==null||h===!1)continue;const b=c==="fx"||c==="fy"?H_(t,r[c]):q_(n,c);if(!b)throw new Error(`missing channel for scale: ${c}`);const w=b.value,[y=0,v=1/0]=ir(m)?m:m<0?[m]:[0,m];if(l==null)b.domain=()=>{let g=Array.from(new es(w));return f&&(g=g.reverse()),(y!==0||v!==1/0)&&(g=g.slice(y,v)),g};else{const g=l==="data"?e:l==="height"?Cd(n,"y1","y2"):l==="width"?Cd(n,"x1","x2"):wl(n,l,l==="y"?"y2":l==="x"?"x2":void 0),M=$_(h===!0?"max":h,g);b.domain=()=>{let _=n7(Sn(w),x=>M.reduceIndex(x,g),x=>w[x]);return d&&_.sort(d),f&&_.reverse(),(y!==0||v!==1/0)&&(_=_.slice(y,v)),_.map(Zp)}}}}function q_(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function H_(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const s of e[a])i[s]=o}return t}function Cd(e,t,n){const r=wl(e,t),i=wl(e,n);return Be(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function wl(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function V_(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return gb;case"descending":return yb}throw new Error(`invalid order: ${e}`)}function gb([e,t],[n,r]){return Gt(t,r)||Gt(e,n)}function yb([e,t],[n,r]){return Go(t,r)||Gt(e,n)}function $d(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function gc(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:ub(n)}}function He(e,{document:t}){return wi(rs(e).call(t.documentElement))}let vl=0,Ml;function z_(){const e=vl;return vl=0,Ml=void 0,e}function Fn(e){e!==Ml&&(Ml=e,console.warn(e),++vl)}const wb=Math.PI,jt=2*wb,Td=.618;function Y_({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let s,u,c="frame";if(rr(e)){let M;if({type:e,domain:u,inset:M,insetTop:n=M!==void 0?M:n,insetRight:r=M!==void 0?M:r,insetBottom:i=M!==void 0?M:i,insetLeft:a=M!==void 0?M:a,clip:c=c,...s}=e,e==null)return}typeof e!="function"&&({type:e}=vb(e));const{width:l,height:d,marginLeft:f,marginRight:h,marginTop:m,marginBottom:p}=o,b=l-f-h-a-r,w=d-m-p-n-i;if(e=e==null?void 0:e({width:b,height:w,clip:c,...s}),e==null)return;c=j_(c,f,m,l-h,d-p);let y=f+a,v=m+n,g;if(u!=null){const[[M,_],[x,A]]=N0(e).bounds(u),N=Math.min(b/(x-M),w/(A-_));N>0?(y-=(N*(M+x)-b)/2,v-=(N*(_+A)-w)/2,g=sl({point(B,S){this.stream.point(B*N+y,S*N+v)}})):Fn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return g??(g=y===0&&v===0?Mb():sl({point(M,_){this.stream.point(M+y,_+v)}})),{stream:M=>e.stream(g.stream(c(M)))}}function vb(e){switch(`${e}`.toLowerCase()){case"albers-usa":return gt(D4,.7463,.4673);case"albers":return Ua(k0,.7463,.4673);case"azimuthal-equal-area":return gt(R4,4,4);case"azimuthal-equidistant":return gt(B4,jt,jt);case"conic-conformal":return Ua(F4,jt,jt);case"conic-equal-area":return Ua(ko,6.1702,2.9781);case"conic-equidistant":return Ua(q4,7.312,3.6282);case"equal-earth":return gt(V4,5.4133,2.6347);case"equirectangular":return gt(G4,jt,wb);case"gnomonic":return gt(z4,3.4641,3.4641);case"identity":return{type:Mb};case"reflect-y":return{type:W_};case"mercator":return gt(O4,jt,jt);case"orthographic":return gt(Y4,2,2);case"stereographic":return gt(j4,2,2);case"transverse-mercator":return gt(W4,jt,jt);default:throw new Error(`unknown projection type: ${e}`)}}function j_(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return b0(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function gt(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:s})=>{var c,l,d;const u=e();return o!=null&&((c=u.precision)==null||c.call(u,o)),a!=null&&((l=u.rotate)==null||l.call(u,a)),typeof s=="number"&&((d=u.clipAngle)==null||d.call(u,s)),u.scale(Math.min(r/t,i/n)),u.translate([r/2,i/2]),u},aspectRatio:n/t}}function Ua(e,t,n){const{type:r,aspectRatio:i}=gt(e,t,n);return{type:a=>{const{parallels:o,domain:s,width:u,height:c}=a,l=r(a);return o!=null&&(l.parallels(o),s===void 0&&l.fitSize([u,c],{type:"Sphere"})),l},aspectRatio:i}}const Mb=ga({stream:e=>e}),W_=ga(sl({point(e,t){this.stream.point(e,-t)}}));function X_(e,t,n,r){const i=n[e],a=n[t],o=i.length,s=n[e]=new Float64Array(o).fill(NaN),u=n[t]=new Float64Array(o).fill(NaN);let c;const l=r.stream({point(d,f){s[c]=d,u[c]=f}});for(c=0;c<o;++c)l.point(i[c],a[c])}function K_({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(rr(e)&&(e=e.type),e!=null)}function Z_(e){if(typeof(e==null?void 0:e.stream)=="function")return Td;if(rr(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=vb(e);if(t)return t}return Td}}function Q_(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,s){t.push(o),n.push(s)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)$n(o,a);return[r,i]}const _b=new Map([["accent",y8],["category10",g8],["dark2",w8],["observable10",v8],["paired",M8],["pastel1",_8],["pastel2",E8],["set1",S8],["set2",x8],["set3",A8],["tableau10",P8]]);function J_(e){return e!=null&&_b.has(`${e}`.toLowerCase())}const Id=new Map([..._b,["brbg",Wt(y1,w1)],["prgn",Wt(v1,M1)],["piyg",Wt(_1,E1)],["puor",Wt(S1,x1)],["rdbu",Wt(dl,Oo)],["rdgy",Wt(A1,P1)],["rdylbu",Wt(hl,Ui)],["rdylgn",Wt(N1,C1)],["spectral",Wt($1,T1)],["burd",kd(dl,Oo)],["buylrd",kd(hl,Ui)],["blues",De(np,rp)],["greens",De(ip,ap)],["greys",De(op,sp)],["oranges",De(dp,hp)],["purples",De(up,lp)],["reds",De(cp,fp)],["turbo",Xt(vp)],["viridis",Xt(Mp)],["magma",Xt(_p)],["inferno",Xt(Ep)],["plasma",Xt(Sp)],["cividis",Xt(mp)],["cubehelix",Xt(pp)],["warm",Xt(bp)],["cool",Xt(gp)],["bugn",De(I1,k1)],["bupu",De(D1,R1)],["gnbu",De(B1,O1)],["orrd",De(L1,F1)],["pubu",De(q1,H1)],["pubugn",De(G1,U1)],["purd",De(V1,z1)],["rdpu",De(Y1,j1)],["ylgn",De(K1,Z1)],["ylgnbu",De(W1,X1)],["ylorbr",De(Q1,J1)],["ylorrd",De(ep,tp)],["rainbow",Dd(yp)],["sinebow",Dd(wp)]]);function De(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?St(t,n):e[n])}function Wt(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?St(t,n):e[n])}function kd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?St(r=>t(1-r),n):e[n].slice().reverse())}function Xt(e){return({length:t})=>St(e,Math.max(2,Math.floor(t)))}function Dd(e){return({length:t})=>St(e,Math.floor(t)+1).slice(0,-1)}function Eb(e){const t=`${e}`.toLowerCase();if(!Id.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return Id.get(t)}function Es(e,t){const n=Eb(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function eE(e,t="greys"){const n=new Set,[r,i]=Es(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Rd=new Map([["brbg",w1],["prgn",M1],["piyg",E1],["puor",x1],["rdbu",Oo],["rdgy",P1],["rdylbu",Ui],["rdylgn",C1],["spectral",T1],["burd",e=>Oo(1-e)],["buylrd",e=>Ui(1-e)],["blues",rp],["greens",ap],["greys",sp],["purples",lp],["reds",fp],["oranges",hp],["turbo",vp],["viridis",Mp],["magma",_p],["inferno",Ep],["plasma",Sp],["cividis",mp],["cubehelix",pp],["warm",bp],["cool",gp],["bugn",k1],["bupu",R1],["gnbu",O1],["orrd",F1],["pubugn",U1],["pubu",H1],["purd",z1],["rdpu",j1],["ylgnbu",X1],["ylgn",Z1],["ylorbr",J1],["ylorrd",tp],["rainbow",yp],["sinebow",wp]]);function yc(e){const t=`${e}`.toLowerCase();if(!Rd.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Rd.get(t)}const tE=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function nE(e){return e!=null&&tE.has(`${e}`.toLowerCase())}const Sb=e=>t=>e(1-t),au=[0,1],Bd=new Map([["number",Fe],["rgb",jn],["hsl",N6],["hcl",T6],["lab",C6]]);function xb(e){const t=`${e}`.toLowerCase();if(!Bd.has(t))throw new Error(`unknown interpolator: ${t}`);return Bd.get(t)}function Ea(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:s=Pb(e,n),unknown:u,round:c,scheme:l,interval:d,range:f=Pe.get(e)===va?hE(n,s):Pe.get(e)===Ma?mE(n,s):Pe.get(e)===_a?au:void 0,interpolate:h=Pe.get(e)===cn?l==null&&f!==void 0?jn:yc(l!==void 0?l:r==="cyclical"?"rainbow":"turbo"):c?Vl:Fe,reverse:m}){if(d=wa(d,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof h!="function"&&(h=xb(h)),m=!!m,f!==void 0){const p=(s=nt(s)).length,b=(f=nt(f)).length;if(p!==b){if(h.length===1)throw new Error("invalid piecewise interpolator");h=as(h,f),f=void 0}}if(h.length===1?(m&&(h=Sb(h),m=!1),f===void 0&&(f=Float64Array.from(s,(p,b)=>b/(s.length-1)),f.length===2&&(f=au)),t.interpolate((f===au?ga:vc)(h))):t.interpolate(h),o){const[p,b]=Et(s);(p>0||b<0)&&(s=Hi(s),Lr(s)!==Math.sign(p)?s[s.length-1]=0:s[0]=0)}return m&&(s=yo(s)),t.domain(s).unknown(u),i&&(t.nice(rE(i,r)),s=t.domain()),f!==void 0&&t.range(f),a&&t.clamp(a),{type:r,domain:s,range:f,scale:t,interpolate:h,interval:d}}function rE(e,t){return e===!0?void 0:typeof e=="number"?e:f_(e,t)}function iE(e,t,n){return Ea(e,tc(),t,n)}function aE(e,t,n){return Ab(e,t,{...n,exponent:.5})}function Ab(e,t,{exponent:n=1,...r}){return Ea(e,Q0().exponent(n),t,{...r,type:"pow"})}function oE(e,t,{base:n=10,domain:r=pE(t),...i}){return Ea(e,W0().base(n),t,{...i,domain:r})}function sE(e,t,{constant:n=1,...r}){return Ea(e,K0().constant(n),t,r)}function uE(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=bE(t),unknown:s,interpolate:u,reverse:c}){return n===void 0&&(n=u!==void 0?St(u,i):Pe.get(e)===cn?Es(a,i):void 0),o.length>0&&(o=J0(o,n===void 0?{length:i}:n).quantiles()),wc(e,t,{domain:o,range:n,reverse:c,unknown:s})}function lE(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=Pb(e,t),unknown:o,interpolate:s,reverse:u}){const[c,l]=Et(a);let d;return n===void 0?(d=Di(c,l,r),d[0]<=c&&d.splice(0,1),d[d.length-1]>=l&&d.pop(),r=d.length+1,n=s!==void 0?St(s,r):Pe.get(e)===cn?Es(i,r):void 0):(d=St(Fe(c,l),r+1).slice(1,-1),c instanceof Date&&(d=d.map(f=>new Date(f)))),Lr(nt(a))<0&&d.reverse(),wc(e,t,{domain:d,range:n,reverse:u,unknown:o})}function wc(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?St(a,n.length+1):Pe.get(e)===cn?Es(i,n.length+1):void 0,reverse:s}){n=nt(n);const u=Lr(n);if(!isNaN(u)&&!cE(n,u))throw new Error(`the ${e} scale has a non-monotonic domain`);return s&&(o=yo(o)),{type:"threshold",scale:e1(u<0?yo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function cE(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=ra(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function fE(e){return{type:"identity",scale:E_(Pe.get(e))?z0():t=>t}}function ji(e,t=Up){return e.length?[an(e,({value:n})=>n===void 0?n:an(n,t)),Je(e,({value:n})=>n===void 0?n:Je(n,t))]:[0,1]}function Pb(e,t){const n=Pe.get(e);return(n===va||n===_a||n===Ma?dE:ji)(t)}function dE(e){return[0,e.length?Je(e,({value:t})=>t===void 0?t:Je(t,Up)):1]}function hE(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=go(e,.5,({value:o})=>o===void 0?NaN:go(o,.25,sc)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/Je(i);return a<1?i.map(o=>o*a):i}function mE(e,t){const n=Ou(e,({value:a})=>a===void 0?NaN:Ou(a,Math.abs)),r=t.map(a=>12*a/n),i=60/Je(r);return i<1?r.map(a=>a*i):r}function pE(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return ji(e,sc);if(n<0)return ji(e,qp)}return[1,10]}function bE(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function vc(e){return(t,n)=>r=>e(t+r*(n-t))}function Ss(e,t,n,r,{type:i,nice:a,clamp:o,domain:s=ji(r),unknown:u,pivot:c=0,scheme:l,range:d,symmetric:f=!0,interpolate:h=Pe.get(e)===cn?l==null&&d!==void 0?jn:yc(l!==void 0?l:"rdbu"):Fe,reverse:m}){c=+c,s=nt(s);let[p,b]=s;if(s.length>2&&Fn(`Warning: the diverging ${e} scale domain contains extra elements.`),ra(p,b)<0&&([p,b]=[b,p],m=!m),p=Math.min(p,c),b=Math.max(b,c),typeof h!="function"&&(h=xb(h)),d!==void 0&&(h=h.length===1?vc(h)(...d):as(h,d)),m&&(h=Sb(h)),f){const w=n.apply(c),y=w-n.apply(p),v=n.apply(b)-w;y<v?p=n.invert(w-v):y>v&&(b=n.invert(w+y))}return t.domain([p,c,b]).unknown(u).interpolator(h),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,b],pivot:c,interpolate:h,scale:t}}function gE(e,t,n){return Ss(e,m1(),ME,t,n)}function yE(e,t,n){return Nb(e,t,{...n,exponent:.5})}function Nb(e,t,{exponent:n=1,...r}){return Ss(e,g1().exponent(n=+n),SE(n),t,{...r,type:"diverging-pow"})}function wE(e,t,{base:n=10,pivot:r=1,domain:i=ji(t,r<0?qp:sc),...a}){return Ss(e,p1().base(n=+n),_E,t,{domain:i,pivot:r,...a})}function vE(e,t,{constant:n=1,...r}){return Ss(e,b1().constant(n=+n),xE(n),t,r)}const ME={apply(e){return e},invert(e){return e}},_E={apply:Math.log,invert:Math.exp},EE={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function SE(e){return e===.5?EE:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function xE(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Cb(e,t,n,r){return Ea(e,t,n,r)}function AE(e,t,n){return Cb(e,p8(),t,n)}function PE(e,t,n){return Cb(e,b8(),t,n)}const Sa=Symbol("ordinal");function $b(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:s,hint:u}){return i=wa(i,r),a===void 0&&(a=Ib(n,i,e)),(r==="categorical"||r===Sa)&&(r="ordinal"),s&&(a=yo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:u,interval:i}}function NE(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:s,...u}){r=wa(r,n),i===void 0&&(i=Ib(t,r,e));let c;if(Pe.get(e)===_s)c=TE(t),a=a===void 0?IE(c):Be(a,bc);else if(Pe.get(e)===cn&&(a===void 0&&(n==="ordinal"||n===Sa)&&(a=eE(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const l=yc(o),d=a[0],f=a[1]-a[0];a=({length:h})=>St(m=>l(d+f*m),h)}else a=Eb(o);if(s===ll)throw new Error(`implicit unknown on ${e} scale is not supported`);return $b(e,ec().unknown(s),t,{...u,type:n,domain:i,range:a,hint:c})}function CE(e,t,{align:n=.5,padding:r=.5,...i}){return Tb(X4().align(n).padding(r),t,i,e)}function $E(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return Tb(fs().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function Tb(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=$b(r,e,t,n),e.round=i,e}function Ib(e,t,n){const r=new es;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Et(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Pe.get(n)===Rt)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Ru(r,Gt)}function Od(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function TE(e){return{fill:Od(e,"fill"),stroke:Od(e,"stroke")}}function IE(e){return Ve(e.fill)?L8:O8}function _l(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:s,nice:u,clamp:c,zero:l,align:d,padding:f,projection:h,facet:{label:m=t}={},...p}={}){const b={};for(const[w,y]of e){const v=p[w],g=OE(w,y,{round:Pe.get(w)===Rt?s:void 0,nice:u,clamp:c,zero:l,align:d,padding:f,projection:h,...v});if(g){let{label:M=w==="fx"||w==="fy"?m:t,percent:_,transform:x,inset:A,insetTop:N=A!==void 0?A:w==="y"?r:0,insetRight:B=A!==void 0?A:w==="x"?i:0,insetBottom:S=A!==void 0?A:w==="y"?a:0,insetLeft:U=A!==void 0?A:w==="x"?o:0}=v||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");g.percent=!!_,g.label=M===void 0?DE(y,g):M,g.transform=x,w==="x"||w==="fx"?(g.insetLeft=+U,g.insetRight=+B):(w==="y"||w==="fy")&&(g.insetTop=+N,g.insetBottom=+S),b[w]=g}}return b}function Ld(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:s,label:u}=i;t[r]=qE(i),n[r]=a,a.type=o,s!=null&&(a.interval=s),u!=null&&(a.label=u)}return n}function kE(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?Mc(t):t;i&&Fd(i,o),a&&Gd(a,o);const s=i||a?kb(e,t):t;n&&Fd(n,s),r&&Gd(r,s)}function DE(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!ar(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function RE(e){return Math.sign(Lr(e.domain()))*Math.sign(Lr(e.range()))}function Mc(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:s,marginRight:u,marginBottom:c,marginLeft:l}}=e;return{marginTop:Math.max(t,s),marginRight:Math.max(n,u),marginBottom:Math.max(r,c),marginLeft:Math.max(i,l),width:a,height:o}}function kb({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:u}=Mc(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:s,height:t?t.scale.bandwidth()+r+a:u,facet:{width:s,height:u}}}function Fd(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,s=a+n,u=i-o-r;e.range=[s,Math.max(s,u)],ar(e)||(e.range=Rb(e)),e.scale.range(e.range)}Db(e)}function Gd(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,s=a+n,u=i-o-r;e.range=[Math.max(s,u),s],ar(e)?e.range.reverse():e.range=Rb(e),e.scale.range(e.range)}Db(e)}function Db(e){e.round===void 0&&FE(e)&&BE(e)<=30&&e.scale.round(!0)}function BE({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,s=Math.abs(r-n)/Math.max(1,o+a*2);return(s-Math.floor(s))*o}function Rb(e){const t=e.scale.domain().length+Bb(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function OE(e,t=[],n={}){const r=LE(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&ar({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(pt)?Fn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${fr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${fr(r)}".`):i.some(m_)?Fn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${fr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${fr(r)}".`):i.some(p_)&&Fn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${fr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${fr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=qa(t,n,Sd);break;case"identity":switch(Pe.get(e)){case Rt:n=qa(t,n,Sd);break;case _s:n=qa(t,n,GE);break}break;case"utc":case"time":n=qa(t,n,a_);break}switch(r){case"diverging":return gE(e,t,n);case"diverging-sqrt":return yE(e,t,n);case"diverging-pow":return Nb(e,t,n);case"diverging-log":return wE(e,t,n);case"diverging-symlog":return vE(e,t,n);case"categorical":case"ordinal":case Sa:return NE(e,t,n);case"cyclical":case"sequential":case"linear":return iE(e,t,n);case"sqrt":return aE(e,t,n);case"threshold":return wc(e,t,n);case"quantile":return uE(e,t,n);case"quantize":return lE(e,t,n);case"pow":return Ab(e,t,n);case"log":return oE(e,t,n);case"symlog":return sE(e,t,n);case"utc":return PE(e,t,n);case"time":return AE(e,t,n);case"point":return CE(e,t,n);case"band":return $E(e,t,n);case"identity":return fE(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function fr(e){return typeof e=="symbol"?e.description:e}function Ud(e){return typeof e=="string"?`${e}`.toLowerCase():e}const qd={toString:()=>"projection"};function LE(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:s}){if(n=Ud(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&s!=null&&(n=qd);for(const c of t){const l=Ud(c.type);if(l!==void 0){if(n===void 0)n=l;else if(n!==l)throw new Error(`scale incompatible with channel: ${n} !== ${l}`)}}if(n===qd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:c})=>c!==void 0))return;const u=Pe.get(e);if(u===va)return"sqrt";if(u===_a||u===Ma)return"linear";if(u===_s)return"ordinal";if((r||i||[]).length>2)return ou(u);if(r!==void 0){if(xd(r))return ou(u);if(pt(r))return"utc"}else{const c=t.map(({value:l})=>l).filter(l=>l!==void 0);if(c.some(xd))return ou(u);if(c.some(pt))return"utc"}if(u===cn){if(o!=null||nE(a))return"diverging";if(J_(a))return"categorical"}return"linear"}function ou(e){switch(e){case Rt:return"point";case cn:return Sa;default:return"ordinal"}}function ar({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Sa}function Bb({type:e}){return e==="threshold"}function FE({type:e}){return e==="point"||e==="band"}function Mn(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function qa(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function GE(e){return Be(e,bc)}function UE(e){return t=>{if(!Pe.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function qE({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:s,pivot:u}){if(t==="identity")return{type:"identity",apply:l=>l,invert:l=>l};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Hi(n),...r!==void 0&&{range:Hi(r)},...o!==void 0&&{transform:o},...s&&{percent:s},...c!==void 0&&{unknown:c},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...u!==void 0&&{pivot:u,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:l=>e(l),...e.invert&&{invert:l=>e.invert(l)}}}function HE(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const VE=HE(e=>new Intl.NumberFormat(e));function zE(e="en-US"){const t=VE(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function YE(e){return z8(e,"Invalid Date")}function jE(e="en-US"){const t=zE(e);return n=>(n instanceof Date?YE:typeof n=="number"?t:qe)(n)}const Fr=jE(),Qe=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let WE=0;function Hd(){return`plot-clip-${++WE}`}function XE(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:s,fillOpacity:u,stroke:c,strokeWidth:l,strokeOpacity:d,strokeLinejoin:f,strokeLinecap:h,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:b,opacity:w,mixBlendMode:y,imageFilter:v,paintOrder:g,pointerEvents:M,shapeRendering:_,channels:x},{ariaLabel:A,fill:N="currentColor",fillOpacity:B,stroke:S="none",strokeOpacity:U,strokeWidth:L,strokeLinecap:V,strokeLinejoin:E,strokeMiterlimit:k,paintOrder:z}){N===null&&(s=null,u=null),S===null&&(c=null,d=null),Ve(N)?!Ve(S)&&(!Ve(s)||x!=null&&x.fill)&&(S="none"):Ve(S)&&(!Ve(c)||x!=null&&x.stroke)&&(N="none");const[X,G]=Jn(s,N),[O,Y]=Ze(u,B),[H,T]=Jn(c,S),[Z,ne]=Ze(d,U),[ee,K]=Ze(w);zi(T)||(l===void 0&&(l=L),h===void 0&&(h=V),f===void 0&&(f=E),m===void 0&&!w_(f)&&(m=k),!zi(G)&&g===void 0&&(g=z));const[Q,I]=Ze(l);return N!==null&&(e.fill=Le(G,"currentColor"),e.fillOpacity=ti(Y,1)),S!==null&&(e.stroke=Le(T,"none"),e.strokeWidth=ti(I,1),e.strokeOpacity=ti(ne,1),e.strokeLinejoin=Le(f,"miter"),e.strokeLinecap=Le(h,"butt"),e.strokeMiterlimit=ti(m,4),e.strokeDasharray=Le(p,"none"),e.strokeDashoffset=Le(b,"0")),e.target=qe(o),e.ariaLabel=qe(A),e.ariaDescription=qe(i),e.ariaHidden=qe(a),e.opacity=ti(K,1),e.mixBlendMode=Le(y,"normal"),e.imageFilter=Le(v,"none"),e.paintOrder=Le(g,"normal"),e.pointerEvents=Le(M,"auto"),e.shapeRendering=Le(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:X,scale:"auto",optional:!0},fillOpacity:{value:O,scale:"auto",optional:!0},stroke:{value:H,scale:"auto",optional:!0},strokeOpacity:{value:Z,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:ee,scale:"auto",optional:!0}}}function KE(e,t){t&&e.filter(n=>Gp(t[n])).append("title").call(ZE,t)}function ZE(e,t){t&&e.text(n=>Fr(t[n]))}function Vr(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:s,strokeOpacity:u,strokeWidth:c,opacity:l,href:d}){r&&be(e,"aria-label",f=>r[f]),a&&be(e,"fill",f=>a[f]),o&&be(e,"fill-opacity",f=>o[f]),s&&be(e,"stroke",f=>s[f]),u&&be(e,"stroke-opacity",f=>u[f]),c&&be(e,"stroke-width",f=>c[f]),l&&be(e,"opacity",f=>l[f]),d&&JE(e,f=>d[f],t),n||KE(e,i)}function QE(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:s,marginLeft:u,marginRight:c,marginTop:l,marginBottom:d}=n,f=Hd();i=`url(#${f})`,e=He("svg:g",r).call(h=>h.append("svg:clipPath").attr("id",f).append("rect").attr("x",u).attr("y",l).attr("width",o-c-u).attr("height",s-l-d)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const s=Hd();i=`url(#${s})`,e.append("clipPath").attr("id",s).append("path").attr("d",N0(o)({type:"Sphere"}));break}}be(e,"aria-label",t.ariaLabel),be(e,"aria-description",t.ariaDescription),be(e,"aria-hidden",t.ariaHidden),be(e,"clip-path",i)}function or(e,t,n,r){QE(e,t,n,r),be(e,"fill",t.fill),be(e,"fill-opacity",t.fillOpacity),be(e,"stroke",t.stroke),be(e,"stroke-width",t.strokeWidth),be(e,"stroke-opacity",t.strokeOpacity),be(e,"stroke-linejoin",t.strokeLinejoin),be(e,"stroke-linecap",t.strokeLinecap),be(e,"stroke-miterlimit",t.strokeMiterlimit),be(e,"stroke-dasharray",t.strokeDasharray),be(e,"stroke-dashoffset",t.strokeDashoffset),be(e,"shape-rendering",t.shapeRendering),be(e,"filter",t.imageFilter),be(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;be(e,"pointer-events",i)}function sr(e,t){eS(e,"mix-blend-mode",t.mixBlendMode),be(e,"opacity",t.opacity)}function JE(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS($r.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS($r.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function be(e,t,n){n!=null&&e.attr(t,n)}function eS(e,t,n){n!=null&&e.style(t,n)}function xn(e,t,{x:n,y:r},i=Qe,a=Qe){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function Le(e,t){if((e=qe(e))!==t)return e}function ti(e,t){if((e=xe(e))!==t)return e}const tS=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function _c(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!tS.test(e))throw new Error(`invalid class name: ${e}`);return e}function Ec(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function xs({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function nS(e,t,n={}){let r=.5-Qe,i=.5+Qe,a=.5+Qe,o=.5-Qe;for(const{marginTop:p,marginRight:b,marginBottom:w,marginLeft:y}of t)p>r&&(r=p),b>i&&(i=b),w>a&&(a=w),y>o&&(o=y);let{margin:s,marginTop:u=s!==void 0?s:r,marginRight:c=s!==void 0?s:i,marginBottom:l=s!==void 0?s:a,marginLeft:d=s!==void 0?s:o}=n;u=+u,c=+c,l=+l,d=+d;let{width:f=640,height:h=rS(e,n,{width:f,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,u-r+l-a)}=n;f=+f,h=+h;const m={width:f,height:h,marginTop:u,marginRight:c,marginBottom:l,marginLeft:d};if(e.fx||e.fy){let{margin:p,marginTop:b=p!==void 0?p:u,marginRight:w=p!==void 0?p:c,marginBottom:y=p!==void 0?p:l,marginLeft:v=p!==void 0?p:d}=n.facet??{};b=+b,w=+w,y=+y,v=+v,m.facet={marginTop:b,marginRight:w,marginBottom:y,marginLeft:v}}return m}function rS({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:s,marginRightDefault:u,marginBottomDefault:c,marginLeftDefault:l}){const d=n?n.scale.domain().length:1,f=Z_(i);if(f){const m=r?r.scale.domain().length:1,p=(1.1*d-.1)/(1.1*m-.1)*f,b=Math.max(.1,Math.min(10,p));return Math.round((o-l-u)*b+s+c)}const h=t?ar(t)?t.scale.domain().length:Math.max(7,17/d):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=Vd("y",t)/(Vd("x",e)*a),p=r?r.scale.bandwidth():1,b=n?n.scale.bandwidth():1,w=p*(o-l-u)-e.insetLeft-e.insetRight;return(m*w+t.insetTop+t.insetBottom)/b+s+c}return!!(t||n)*Math.max(1,Math.min(60,h*d))*20+!!r*30+60}function Vd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const s=t.scale.exponent();i=u=>Math.pow(u,s);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Et(r);return Math.abs(i(o)-i(a))}function iS(e,t){const{fx:n,fy:r}=_l(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?Q5(i,a).map(([o,s],u)=>({x:o,y:s,i:u})):i?i.map((o,s)=>({x:o,i:s})):a?a.map((o,s)=>({y:o,i:s})):void 0}function aS(e,{x:t,y:n}){return t&&(t=El(t)),n&&(n=El(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Sc(e,{fx:t,fy:n}){const r=Sn(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?yi(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?yi(r,o=>(o.fx=i[o[0]],o),o=>i[o]):yi(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function oS(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function sS(e){const t=[],n=new Uint32Array(Yn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const uS=new Map([["top",su],["right",cu],["bottom",uu],["left",lu],["top-left",Ha(su,lu)],["top-right",Ha(su,cu)],["bottom-left",Ha(uu,lu)],["bottom-right",Ha(uu,cu)],["top-empty",fS],["right-empty",mS],["bottom-empty",dS],["left-empty",hS],["empty",pS]]);function lS(e){if(e==null)return null;const t=uS.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const zd=new WeakMap;function El(e){let t=zd.get(e);return t||zd.set(e,t=new zn(Be(e,(n,r)=>[n,r]))),t}function An(e,t){return El(e).get(t)}function cS(e,t,n){return t=Ga(t),n=Ga(n),e.find(r=>Object.is(Ga(r.x),t)&&Object.is(Ga(r.y),n))}function As(e,t,n){var r;return(r=cS(e,t,n))==null?void 0:r.empty}function su(e,{y:t},{y:n}){return t?An(t,n)===0:!0}function uu(e,{y:t},{y:n}){return t?An(t,n)===t.length-1:!0}function lu(e,{x:t},{x:n}){return t?An(t,n)===0:!0}function cu(e,{x:t},{x:n}){return t?An(t,n)===t.length-1:!0}function fS(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=An(t,r);if(a>0)return As(e,n,t[a-1])}function dS(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=An(t,r);if(a<t.length-1)return As(e,n,t[a+1])}function hS(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=An(t,n);if(a>0)return As(e,t[a-1],r)}function mS(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=An(t,n);if(a<t.length-1)return As(e,t[a+1],r)}function pS(e,t,{empty:n}){return n}function Ha(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function fu(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class zt{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:s,fy:u,sort:c,dx:l=0,dy:d=0,margin:f=0,marginTop:h=f,marginRight:m=f,marginBottom:p=f,marginLeft:b=f,clip:w=i==null?void 0:i.clip,channels:y,tip:v,render:g}=r;if(this.data=t,this.sort=Vi(c)?c:null,this.initializer=Uo(r).initializer,this.transform=this.initializer?r.transform:db(r).transform,a===null||a===!1?this.facet=null:(this.facet=Ct(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===io&&typeof s=="string"?[s]:s,this.fy=t===io&&typeof u=="string"?[u]:u),this.facetAnchor=lS(o),n=sb(n),y!==void 0&&(n={...bS(y),...n}),i!==void 0&&(n={...XE(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([M,_])=>{if(dc(_.value)){const{value:x,label:A=_.label,scale:N=_.scale}=_.value;_={..._,label:A,scale:N,value:x}}if(t===io&&typeof _.value=="string"){const{value:x}=_;_={..._,value:[x]}}return[M,_]}).filter(([M,{value:_,optional:x}])=>{if(_!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${M}`)})),this.dx=+l,this.dy=+d,this.marginTop=+h,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+b,this.clip=ub(w),this.tip=gS(v),this.facet==="super"){if(s||u)throw new Error("super-faceting cannot use fx or fy");for(const M in this.channels){const{scale:_}=n[M];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}g!=null&&(this.render=Lb(g,this.render))}initialize(t,n,r){let i=nt(this.data);t===void 0&&i!=null&&(t=[Sn(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=nt(i)),t!==void 0&&(t.original=a);const o=F_(this.channels,i);return this.sort!=null&&U_(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=Qn}=n[i];if(a!==null){const o=r[i];t=t.filter(s=>a(o[s]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&X_(i,a,n,r.projection)}}scale(t,n,r){const i=G_(t,n);return r.projection&&this.project(t,i,r),i}}function Ob(...e){return e.plot=zt.prototype.plot,e}function Lb(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,s){return e.call(this,n,r,i,a,o,(u,c,l,d,f)=>t.call(this,u,c,l,d,f,s))}}function bS(e){return Object.fromEntries(Object.entries(sb(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:vs(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function gS(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Ct(e,"tip",["x","y","xy"]):e}function Ps(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:rr(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Yd=new WeakMap;function xc(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:s,render:u,...c}={}){return o=+o,i!=null&&(n??(n=null),s={...s,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),s={...s,py:{value:a,scale:"y"}}),{x:n,y:r,channels:s,...c,render:Lb(function(l,d,f,h,m,p){m={...m,pointerSticky:!1};const b=m.ownerSVGElement,{data:w}=m.getMarkState(this);let y=Yd.get(b);y||Yd.set(b,y={sticky:!1,roots:[],renders:[]});let v=y.renders.push(T)-1;const{x:g,y:M,fx:_,fy:x}=d;let A=_?_(l.fx)-h.marginLeft:0,N=x?x(l.fy)-h.marginTop:0;g!=null&&g.bandwidth&&(A+=g.bandwidth()/2),M!=null&&M.bandwidth&&(N+=M.bandwidth()/2);const B=l.fi!=null;let S;if(B){let K=y.facetStates;K||(y.facetStates=K=new Map),S=K.get(this),S||K.set(this,S=new Map)}const[U,L]=xs(this,h),{px:V,py:E}=f,k=V?K=>V[K]:Fb(f,U),z=E?K=>E[K]:Gb(f,L);let X,G,O,Y;function H(K,Q){if(B)if(Y&&(Y=cancelAnimationFrame(Y)),K==null)S.delete(l.fi);else{S.set(l.fi,Q),Y=requestAnimationFrame(()=>{Y=null;for(const[I,j]of S)if(j<Q||j===Q&&I<l.fi){K=null;break}T(K)});return}T(K)}function T(K){if(X===K&&O===y.sticky)return;X=K,O=m.pointerSticky=y.sticky;const Q=X==null?[]:[X];B&&(Q.fx=l.fx,Q.fy=l.fy,Q.fi=l.fi);const I=p(Q,d,f,h,m);if(G){if(B){const j=G.parentNode,R=G.getAttribute("transform"),C=I.getAttribute("transform");R?I.setAttribute("transform",R):I.removeAttribute("transform"),C?j.setAttribute("transform",C):j.removeAttribute("transform"),I.removeAttribute("aria-label"),I.removeAttribute("aria-description"),I.removeAttribute("aria-hidden")}G.replaceWith(I)}return y.roots[v]=G=I,X==null&&(S==null?void 0:S.size)>1||m.dispatchValue(X==null?null:w[X]),I}function Z(K){if(y.sticky||K.pointerType==="mouse"&&K.buttons===1)return;let[Q,I]=l6(K);Q-=A,I-=N;const j=Q<h.marginLeft||Q>h.width-h.marginRight?1:e,R=I<h.marginTop||I>h.height-h.marginBottom?1:t;let C=null,re=o*o;for(const te of l){const J=j*(k(te)-Q),de=R*(z(te)-I),ae=J*J+de*de;ae<=re&&(C=te,re=ae)}if(C!=null&&(e!==1||t!==1)){const te=k(C)-Q,J=z(C)-I;re=te*te+J*J}H(C,re)}function ne(K){K.pointerType==="mouse"&&X!=null&&(y.sticky&&y.roots.some(Q=>Q==null?void 0:Q.contains(K.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(Q=>Q(null))):(y.sticky=!0,T(X)),K.stopImmediatePropagation()))}function ee(K){K.pointerType==="mouse"&&(y.sticky||H(null))}return b.addEventListener("pointerenter",Z),b.addEventListener("pointermove",Z),b.addEventListener("pointerdown",ne),b.addEventListener("pointerleave",ee),T(null)},u)}}function yS(e){return xc(1,1,e)}function wS(e){return xc(1,.01,e)}function jd(e){return xc(.01,1,e)}function Fb({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Gb({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Ub(e){return ar(e)&&e.interval===void 0?void 0:"tabular-nums"}function vS(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:s=0,marginBottom:u=16+r,marginLeft:c=0,style:l,ticks:d=(i-c-s)/64,tickFormat:f,fontVariant:h=Ub(e),round:m=!0,opacity:p,className:b}=t;const w=gc(t);b=_c(b),p=Ze(p)[1],f===null&&(f=()=>null);const y=He("svg",w).attr("class",`${b}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(U=>U.append("style").text(`:where(.${b}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${b}-ramp text) {
  white-space: pre;
}`)).call(Ec,l);let v=U=>U.selectAll(".tick line").attr("y1",o+u-a),g;const M=m?(U,L)=>U.rangeRound(L):(U,L)=>U.range(L),{type:_,domain:x,range:A,interpolate:N,scale:B,pivot:S}=e;if(N){const U=A===void 0?N:as(N.length===1?vc(N):N,A);g=M(B.copy(),St(Fe(c,i-s),Math.min(x.length+(S!==void 0),A===void 0?1/0:A.length)));const L=256,V=w.document.createElement("canvas");V.width=L,V.height=1;const E=V.getContext("2d");for(let k=0,z=L-1;k<L;++k)E.fillStyle=U(k/z),E.fillRect(k,0,1,1);y.append("image").attr("opacity",p).attr("x",c).attr("y",o).attr("width",i-c-s).attr("height",a-o-u).attr("preserveAspectRatio","none").attr("xlink:href",V.toDataURL())}else if(_==="threshold"){const U=x,L=f===void 0?V=>V:typeof f=="string"?qr(f):f;g=M(tc().domain([-1,A.length-1]),[c,i-s]),y.append("g").attr("fill-opacity",p).selectAll().data(A).enter().append("rect").attr("x",(V,E)=>g(E-1)).attr("y",o).attr("width",(V,E)=>g(E)-g(E-1)).attr("height",a-o-u).attr("fill",V=>V),d=Be(U,(V,E)=>E),f=V=>L(U[V],V)}else g=M(fs().domain(x),[c,i-s]),y.append("g").attr("fill-opacity",p).selectAll().data(x).enter().append("rect").attr("x",g).attr("y",o).attr("width",Math.max(0,g.bandwidth()-1)).attr("height",a-o-u).attr("fill",B),v=()=>{};return y.append("g").attr("transform",`translate(0,${a-u})`).call(A7(g).ticks(Array.isArray(d)?null:d,typeof f=="string"?f:void 0).tickFormat(typeof f=="function"?f:void 0).tickSize(r).tickValues(Array.isArray(d)?d:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Le(h,"normal")).call(v).call(U=>U.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const qb=Math.PI/180;function Hb(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=du(n),e.markerMid=du(r),e.markerEnd=du(i)}function du(e){if(e==null||e===!1)return null;if(e===!0)return Xd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Wd("auto");case"arrow-reverse":return Wd("auto-start-reverse");case"dot":return MS;case"circle":case"circle-fill":return Xd;case"circle-stroke":return _S;case"tick":return hu("auto");case"tick-x":return hu(90);case"tick-y":return hu(0)}throw new Error(`invalid marker: ${e}`)}function Wd(e){return(t,n)=>He("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function MS(e,t){return He("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Xd(e,t){return He("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function _S(e,t){return He("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function hu(e){return(t,n)=>He("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let ES=0;function Vb(e,t,{stroke:n},r){return SS(e,t,n&&(i=>n[i]),r)}function SS(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const s=new Map;function u(c){return function(l){const d=a(l);let f=s.get(c);f||s.set(c,f=new Map);let h=f.get(d);if(!h){const m=this.parentNode.insertBefore(c(d,o),this),p=`plot-marker-${++ES}`;m.setAttribute("id",p),f.set(d,h=`url(#${p})`)}return h}}t&&e.attr("marker-start",u(t)),n&&e.attr("marker-mid",u(n)),r&&e.attr("marker-end",u(r))}function zb({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=jb(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function Yb({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=jb(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function jb(e,t,n){return e===void 0&&t===void 0&&n===void 0?Qe?[1,0]:[.5,.5]:[t,n]}function Wb(e,{interval:t}){return e={...vs(e)},e.interval=mc(e.interval===void 0?t:e.interval),e}function Xb(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:s,interval:u}=Wb(i,n);if(s==null||u==null&&!r)return n;const c=ya(i);if(u==null){let h;const m={transform:p=>h||(h=dt(p,s)),label:c};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let l,d;function f(h){return d!==void 0&&h===l?d:d=Be(dt(l=h,s),m=>u.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:f,label:c}:a,[`${e}2`]:o===void 0?{transform:h=>f(h).map(m=>u.offset(m)),label:c}:o})}function Kb(e,t,n){const{[e]:r}=n,{value:i,interval:a}=Wb(r,n);return i==null||a==null?n:t({...n,[e]:{label:ya(r),transform:o=>{const s=Be(dt(o,i),c=>a.floor(c)),u=s.map(c=>a.offset(c));return s.map(pt(s)?(c,l)=>c==null||isNaN(c=+c)||(l=u[l],l==null)||isNaN(l=+l)?void 0:new Date((c+l)/2):(c,l)=>c==null||(l=u[l],l==null)?NaN:(+c+ +l)/2)}}})}function Zb(e={}){return Xb("x",zb,e)}function Qb(e={}){return Xb("y",Yb,e)}function xS(e={}){return Kb("x",zb,e)}function AS(e={}){return Kb("y",Yb,e)}const Jb={ariaLabel:"rule",fill:null,stroke:"currentColor"};class PS extends zt{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:s=o,insetBottom:u=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},Ps(n,"x"),Jb),this.insetTop=xe(s),this.insetBottom=xe(u),Hb(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y1:c,y2:l}=r,{width:d,height:f,marginTop:h,marginRight:m,marginLeft:p,marginBottom:b}=i,{insetTop:w,insetBottom:y}=this;return He("svg:g",a).call(or,this,i,a).call(xn,this,{x:u&&o},Qe,0).call(v=>v.selectAll().data(t).enter().append("line").call(sr,this).attr("x1",u?g=>u[g]:(p+d-m)/2).attr("x2",u?g=>u[g]:(p+d-m)/2).attr("y1",c&&!Mn(s)?g=>c[g]+w:h+w).attr("y2",l&&!Mn(s)?s.bandwidth?g=>l[g]+s.bandwidth()-y:g=>l[g]-y:f-b-y).call(Vr,this,r).call(Vb,this,r,a)).node()}}class NS extends zt{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:s=o,insetLeft:u=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Ps(n,"y"),Jb),this.insetRight=xe(s),this.insetLeft=xe(u),Hb(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{y:u,x1:c,x2:l}=r,{width:d,height:f,marginTop:h,marginRight:m,marginLeft:p,marginBottom:b}=i,{insetLeft:w,insetRight:y}=this;return He("svg:g",a).call(or,this,i,a).call(xn,this,{y:u&&s},0,Qe).call(v=>v.selectAll().data(t).enter().append("line").call(sr,this).attr("x1",c&&!Mn(o)?g=>c[g]+w:p+w).attr("x2",l&&!Mn(o)?o.bandwidth?g=>l[g]+o.bandwidth()-y:g=>l[g]-y:d-m-y).attr("y1",u?g=>u[g]:(h+f-b)/2).attr("y2",u?g=>u[g]:(h+f-b)/2).call(Vr,this,r).call(Vb,this,r,a)).node()}}function CS(e,t){let{x:n=je,y:r,y1:i,y2:a,...o}=Qb(t);return[i,a]=eg(r,i,a),new PS(e,{...o,x:n,y1:i,y2:a})}function Ns(e,t){let{y:n=je,x:r,x1:i,x2:a,...o}=Zb(t);return[i,a]=eg(r,i,a),new NS(e,{...o,y:n,x1:i,x2:a})}function eg(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function tg(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const $S={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},ng="­";class Ac extends zt{constructor(t,n={}){const{x:r,y:i,text:a=ir(t)&&ob(t)?je:cc,frameAnchor:o,textAnchor:s=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:u=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:l=1/0,textOverflow:d,monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:b,fontWeight:w,rotate:y}=n,[v,g]=Ze(y,0),[M,_]=BS(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:M,optional:!0},rotate:{value:h_(v),optional:!0},text:{value:a,filter:Gp,optional:!0}},n,$S),this.rotate=g,this.textAnchor=Le(s,"middle"),this.lineAnchor=Ct(u,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+l,this.textOverflow=rg(d),this.monospace=!!f,this.fontFamily=qe(h),this.fontSize=_,this.fontStyle=qe(p),this.fontVariant=qe(b),this.fontWeight=qe(w),this.frameAnchor=pc(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${l}`);this.splitLines=og(this),this.clipLine=sg(this)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:c,rotate:l,text:d,title:f,fontSize:h}=r,{rotate:m}=this,[p,b]=xs(this,i);return He("svg:g",a).call(or,this,i,a).call(ag,this,d,i).call(xn,this,{x:u&&o,y:c&&s}).call(w=>w.selectAll().data(t).enter().append("text").call(sr,this).call(TS,this,d,f).attr("transform",tg`translate(${u?y=>u[y]:p},${c?y=>c[y]:b})${l?y=>` rotate(${l[y]})`:m?` rotate(${m})`:""}`).call(be,"font-size",h&&(y=>h[y])).call(Vr,this,r)).node()}}function rg(e){return e==null?null:Ct(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function TS(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:s,clipLine:u}=t;e.each(function(c){const l=s(Fr(n[c])??"").map(u),d=l.length,f=i==="top"?.71:i==="bottom"?1-d:(164-d*100)/200;if(d>1){let h=0;for(let m=0;m<d;++m){if(++h,!l[m])continue;const p=this.ownerDocument.createElementNS($r.svg,"tspan");p.setAttribute("x",0),m===h-1?p.setAttribute("y",`${(f+m)*a}em`):p.setAttribute("dy",`${h*a}em`),p.textContent=l[m],this.appendChild(p),h=0}}else f&&this.setAttribute("y",`${f*a}em`),this.textContent=l[0];if(o&&!r&&l[0]!==n[c]){const h=this.ownerDocument.createElementNS($r.svg,"title");h.textContent=n[c],this.appendChild(h)}})}function ig(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=rb(t,n)),new Ac(e,{...r,x:t,y:n})}function IS(e,{x:t=je,...n}={}){return new Ac(e,AS({...n,x:t}))}function kS(e,{y:t=je,...n}={}){return new Ac(e,xS({...n,y:t}))}function ag(e,t,n){be(e,"text-anchor",t.textAnchor),be(e,"font-family",t.fontFamily),be(e,"font-size",t.fontSize),be(e,"font-style",t.fontStyle),be(e,"font-variant",t.fontVariant===void 0?DS(n):t.fontVariant),be(e,"font-weight",t.fontWeight)}function DS(e){return e&&(b_(e)||pt(e))?"tabular-nums":void 0}const RS=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function BS(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),RS.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function OS(e,t,n){const r=[];let i,a=0;for(const[o,s,u]of LS(e)){if(i===void 0&&(i=o),a>i&&n(e,i,s)>t&&(r.push(e.slice(i,a)+(e[a-1]===ng?"-":"")),i=o),u){r.push(e.slice(i,s)),i=void 0;continue}a=s}return r}function*LS(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case ng:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Kd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Pc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=zr(e,i))r+=Kd[e[i]]??(lg(e,i)?120:Kd.e);return r}function Nc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=zr(e,i))r+=lg(e,i)?126:63;return r}function og({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?Nc:Pc,i=t*100;return a=>OS(a,i,r)}function sg({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?Nc:Pc,i=t*100;switch(n){case"clip-start":return a=>Qd(a,i,r,"");case"clip-end":return a=>Zd(a,i,r,"");case"ellipsis-start":return a=>Qd(a,i,r,vr);case"ellipsis-middle":return a=>FS(a,i,r,vr);case"ellipsis-end":return a=>Zd(a,i,r,vr)}}const vr="…";function Gr(e,t,n,r){const i=[];let a=0;for(let o=0,s=0,u=e.length;o<u;o=s){s=zr(e,o);const c=n(e,o,s);if(a+c>t){for(a+=r;a>t&&o>0;)s=o,o=i.pop(),a-=n(e,o,s);return[o,t-a]}a+=c,i.push(o)}return[-1,0]}function Zd(e,t,n,r){e=e.trim();const i=n(r),[a]=Gr(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function FS(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,s]=Gr(e,t/2,n,a),[u]=Gr(e,i-t/2-s+a,n,-a);return u<0?r:e.slice(0,o).trimEnd()+r+e.slice(zr(e,u)).trimStart()}function Qd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=Gr(e,i-t+a,n,-a);return o<0?r:r+e.slice(zr(e,o)).trimStart()}const Sl=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Jd=new RegExp("\\p{Extended_Pictographic}","uy");function zr(e,t){return t+=GS(e,t)?2:1,qS(e,t)&&(t=Sl.lastIndex),US(e,t)?zr(e,t+1):t}function ug(e,t){return e.charCodeAt(t)<128}function GS(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function US(e,t){return e.charCodeAt(t)===8205}function qS(e,t){return ug(e,t)?!1:(Sl.lastIndex=t,Sl.test(e))}function lg(e,t){return ug(e,t)?!1:(Jd.lastIndex=t,Jd.test(e))}const HS={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},cg=3.5,VS=cg*5,fg={draw(e,t,n){const r=t*n/VS;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},zS={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},YS=new Map([["arrow",fg],["spike",zS]]);function jS(e){return e&&typeof e.draw=="function"}function WS(e){if(jS(e))return e;const t=YS.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class dg extends zt{constructor(t,n={}){const{x:r,y:i,r:a=cg,length:o,rotate:s,shape:u=fg,anchor:c="middle",frameAnchor:l}=n,[d,f]=Ze(o,12),[h,m]=Ze(s,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:d,scale:"length",optional:!0},rotate:{value:h,optional:!0}},n,HS),this.r=+a,this.length=f,this.rotate=m,this.shape=WS(u),this.anchor=Ct(c,"anchor",["start","middle","end"]),this.frameAnchor=pc(l)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:c,length:l,rotate:d}=r,{length:f,rotate:h,anchor:m,shape:p,r:b}=this,[w,y]=xs(this,i);return He("svg:g",a).call(or,this,i,a).call(xn,this,{x:u&&o,y:c&&s}).call(v=>v.selectAll().data(t).enter().append("path").call(sr,this).attr("transform",tg`translate(${u?g=>u[g]:w},${c?g=>c[g]:y})${d?g=>` rotate(${d[g]})`:h?` rotate(${h})`:""}${m==="start"?"":m==="end"?l?g=>` translate(0,${l[g]})`:` translate(0,${f})`:l?g=>` translate(0,${l[g]/2})`:` translate(0,${f/2})`}`).attr("d",l?g=>{const M=Yu();return p.draw(M,l[g],b),M}:(()=>{const g=Yu();return p.draw(g,f,b),g})()).call(Vr,this,r)).node()}}function XS(e,t={}){const{x:n=je,...r}=t;return new dg(e,{...r,x:n})}function KS(e,t={}){const{y:n=je,...r}=t;return new dg(e,{...r,y:n})}function Pn(e,t){return arguments.length<2&&!ir(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Cs({anchor:e}={},t){return e===void 0?t[0]:Ct(e,"anchor",t)}function hg(e){return Cs(e,["left","right"])}function mg(e){return Cs(e,["right","left"])}function pg(e){return Cs(e,["bottom","top"])}function bg(e){return Cs(e,["top","bottom"])}function gg(){const[e,t]=Pn(...arguments);return wg("y",hg(t),e,t)}function ZS(){const[e,t]=Pn(...arguments);return wg("fy",mg(t),e,t)}function yg(){const[e,t]=Pn(...arguments);return vg("x",pg(t),e,t)}function QS(){const[e,t]=Pn(...arguments);return vg("fx",bg(t),e,t)}function wg(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:u=r,fillOpacity:c=i,textAnchor:l,textStroke:d,textStrokeOpacity:f,textStrokeWidth:h,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:b,x:w,margin:y,marginTop:v=y===void 0?20:y,marginRight:g=y===void 0?t==="right"?40:0:y,marginBottom:M=y===void 0?20:y,marginLeft:_=y===void 0?t==="left"?40:0:y,label:x,labelAnchor:A,labelArrow:N,labelOffset:B,...S}){return m=xe(m),p=xe(p),b=xe(b),A!==void 0&&(A=Ct(A,"labelAnchor",["center","top","bottom"])),N=Ng(N),Ob(m&&!Ve(a)?JS(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:m,tickPadding:p,tickRotate:b,x:w,...S}):null,Ve(u)?null:tx(e,t,n,{fill:u,fillOpacity:c,stroke:d,strokeOpacity:f,strokeWidth:h,textAnchor:l,tickSize:m,tickPadding:p,tickRotate:b,x:w,marginTop:v,marginRight:g,marginBottom:M,marginLeft:_,...S}),!Ve(u)&&x!==null?ig([],Sg({fill:u,fillOpacity:c,...S},function(U,L,V,E,k){const z=E[e],{marginTop:X,marginRight:G,marginBottom:O,marginLeft:Y}=e==="y"&&k.inset||k,H=A??(z.bandwidth?"center":"top"),T=B??(t==="right"?G:Y)-3;return H==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=H,this.frameAnchor=`${H}-${t}`,this.rotate=0),this.dy=H==="top"?3-X:H==="bottom"?O-3:0,this.dx=t==="right"?T:-T,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Pg(e,z,{anchor:t,label:x,labelAnchor:H,labelArrow:N})]}}}})):null)}function vg(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:u=r,fillOpacity:c=i,textAnchor:l,textStroke:d,textStrokeOpacity:f,textStrokeWidth:h,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:b,y:w,margin:y,marginTop:v=y===void 0?t==="top"?30:0:y,marginRight:g=y===void 0?20:y,marginBottom:M=y===void 0?t==="bottom"?30:0:y,marginLeft:_=y===void 0?20:y,label:x,labelAnchor:A,labelArrow:N,labelOffset:B,...S}){return m=xe(m),p=xe(p),b=xe(b),A!==void 0&&(A=Ct(A,"labelAnchor",["center","left","right"])),N=Ng(N),Ob(m&&!Ve(a)?ex(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:m,tickPadding:p,tickRotate:b,y:w,...S}):null,Ve(u)?null:nx(e,t,n,{fill:u,fillOpacity:c,stroke:d,strokeOpacity:f,strokeWidth:h,textAnchor:l,tickSize:m,tickPadding:p,tickRotate:b,y:w,marginTop:v,marginRight:g,marginBottom:M,marginLeft:_,...S}),!Ve(u)&&x!==null?ig([],Sg({fill:u,fillOpacity:c,...S},function(U,L,V,E,k){const z=E[e],{marginTop:X,marginRight:G,marginBottom:O,marginLeft:Y}=e==="x"&&k.inset||k,H=A??(z.bandwidth?"center":"right"),T=B??(t==="top"?X:O)-3;return H==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${H}`,this.textAnchor=H==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-T:T,this.dx=H==="right"?G-3:H==="left"?3-Y:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Pg(e,z,{anchor:t,label:x,labelAnchor:H,labelArrow:N})]}}}})):null)}function JS(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:c=0,insetLeft:l=c,insetRight:d=c,dx:f=0,y:h=e==="y"?void 0:null,...m}){return Yr(KS,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:s,y:h,...m,dx:t==="left"?+f-Qe+ +l:+f+Qe-d,anchor:"start",length:u,shape:t==="left"?cx:fx})}function ex(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:c=0,insetTop:l=c,insetBottom:d=c,dy:f=0,x:h=e==="x"?void 0:null,...m}){return Yr(XS,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:s,x:h,...m,dy:t==="bottom"?+f-Qe-d:+f+Qe+ +l,anchor:"start",length:u,shape:t==="bottom"?ux:lx})}function tx(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*qb):0),text:u,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:l=o>60?"top":o<-60?"bottom":"middle",fontVariant:d,inset:f=0,insetLeft:h=f,insetRight:m=f,dx:p=0,y:b=e==="y"?void 0:null,...w}){return Yr(kS,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:u,textAnchor:c,lineAnchor:l,fontVariant:d,rotate:o,y:b,...w,dx:t==="left"?+p-a-s+ +h:+p+ +a+ +s-m},function(y,v,g,M,_){d===void 0&&(this.fontVariant=Ag(y)),u===void 0&&(_.text=xg(y,v,g,M,t))})}function nx(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*qb):0),text:u,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:l=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:d,inset:f=0,insetTop:h=f,insetBottom:m=f,dy:p=0,x:b=e==="x"?void 0:null,...w}){return Yr(IS,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:u===void 0?null:u,textAnchor:c,lineAnchor:l,fontVariant:d,rotate:o,x:b,...w,dy:t==="bottom"?+p+ +a+ +s-m:+p-a-s+ +h},function(y,v,g,M,_){d===void 0&&(this.fontVariant=Ag(y)),u===void 0&&(_.text=xg(y,v,g,M,t))})}function rx(){const[e,t]=Pn(...arguments);return Mg("y",hg(t),e,t)}function ix(){const[e,t]=Pn(...arguments);return Mg("fy",mg(t),e,t)}function ax(){const[e,t]=Pn(...arguments);return _g("x",pg(t),e,t)}function ox(){const[e,t]=Pn(...arguments);return _g("fx",bg(t),e,t)}function Mg(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...s}){return Yr(Ns,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{y:r,x1:a,x2:o,...Eg(s)})}function _g(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...s}){return Yr(CS,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{x:r,y1:a,y2:o,...Eg(s)})}function Eg({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function Sg({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:u,shapeRendering:c,clip:l=!1},d){return[,e]=Jn(e),[,t]=Ze(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:u,shapeRendering:c,clip:l,initializer:d}}function Yr(e,t,n,r,i,a){let o;function s(l,d,f,h,m,p){const b=l==null&&(t==="fx"||t==="fy"),{[t]:w}=h;if(!w)throw new Error(`missing scale: ${t}`);const y=w.domain();let{interval:v,ticks:g,tickFormat:M,tickSpacing:_=t==="x"?80:35}=i;if(typeof g=="string"&&Cg(w)&&(v=g,g=void 0),g===void 0&&(g=wa(v,w.type)??sx(w,_)),l==null){if(ir(g))l=nt(g);else if(d_(g))l=mu(g,...Et(y));else if(w.interval){let A=w.interval;if(w.ticks){const[N,B]=Et(y),S=(B-N)/A[ba];A=vd(A,S/g)??A,l=mu(A,N,B)}else{l=y;const N=l.length;A=vd(A,N/g)??A,A!==w.interval&&(l=mu(A,...Et(l)))}if(A===w.interval){const N=Math.round(l.length/g);N>1&&(l=l.filter((B,S)=>S%N===0))}}else w.ticks?l=w.ticks(g):l=y;if(!w.ticks&&l.length&&l!==y){const A=new es(y);l=l.filter(N=>A.has(N)),l.length||Fn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?d=[Sn(l)]:o[t]={scale:t,value:je}}a==null||a.call(this,w,l,g,M,o);const x=Object.fromEntries(Object.entries(o).map(([A,N])=>[A,{...N,value:dt(l,N.value)}]));return b&&(d=p.filterFacets(l,x)),{data:l,facets:d,channels:x}}const u=Uo(i).initializer,c=e(n,Uo({...i,initializer:s},u));return n==null?(o=c.channels,c.channels={}):o={},r!==void 0&&Object.assign(c,r),c.clip===void 0&&(c.clip=!1),c}function sx(e,t){const[n,r]=Et(e.range());return(r-n)/t}function xg(e,t,n,r,i){return{value:Cc(e,t,n,r,i)}}function Cc(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&pt(t)?Z8(e.type,t,i)??Fr:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Fr:typeof r=="string"?(pt(e.domain())?pa:qr)(r):ga(r)}function mu(e,t,n){return e.range(t,e.offset(e.floor(n)))}const ux={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},lx={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},cx={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},fx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function Ag(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Pg(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&Cg(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!a)return r;if(a===!0){const o=RE(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function Ng(e="auto"){return Ve(e)?!1:typeof e=="boolean"?e:Ct(e,"labelArrow",["auto","up","right","down","left"])}function Cg(e){return pt(e.domain())}function eh(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function dx(e,{opacity:t,...n}={}){if(!ar(e)&&!Bb(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return $g(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",Ze(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function hx(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(l=>(l=e.hint)==null?void 0:l.stroke)()!==void 0?e.hint.stroke:Ve(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...s}={},u){const[d,f]=Jn(t),[h,m]=Jn(r),p=eh(u,d),b=eh(u,h),w=o*o*Math.PI;return n=Ze(n)[1],i=Ze(i)[1],a=Ze(a)[1],$g(e,s,(y,v,g,M)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",g).attr("height",M).attr("fill",d==="color"?_=>p.scale(_):f).attr("fill-opacity",n).attr("stroke",h==="color"?_=>b.scale(_):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",_=>{const x=Yu();return e.scale(_).draw(x,w),x}))}function $g(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=Ub(e),swatchSize:o=15,swatchWidth:s=o,swatchHeight:u=o,marginLeft:c=0,className:l,style:d,width:f}=t;const h=gc(t);l=_c(l),i=Cc(e.scale,e.domain,void 0,i);const m=He("div",h).attr("class",`${l}-swatches ${l}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${l}-swatches-columns .${l}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${l}-swatches-columns .${l}-swatch::before) {
  flex-shrink: 0;
}
:where(.${l}-swatches-columns .${l}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${l}-swatch`).call(n,e,s,u).call(b=>b.append("div").attr("class",`${l}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${l}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${l}-swatches-wrap .${l}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${l}-swatch`).call(n,e,s,u).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(b=>b.insert("style","*").text(`:where(.${l}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${l}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",c?`${+c}px`:null).style("width",f===void 0?null:`${+f}px`).style("font-variant",Le(a,"normal")).call(Ec,d).node()}const xl=new Map([["symbol",hx],["color",Ig],["opacity",px]]);function mx(e,t,n={}){return(r,i)=>{if(!xl.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return xl.get(r)(e[r],Tg(t,n[r],i),a=>e[a])}}function Tg({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return v_(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function Ig(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return dx(e,n);case"ramp":return vS(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function px({type:e,interpolate:t,...n},{legend:r=!0,color:i=vn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return Ig({type:e,...n,interpolate:bx(i)},{legend:r,...a})}function bx(e){const{r:t,g:n,b:r}=vn(e)||vn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function gx(e,t,n){const r=[];for(const[i,a]of xl){const o=n[i];if(o!=null&&o.legend&&i in e){const s=a(e[i],Tg(t,e[i],o),u=>e[u]);s!=null&&r.push(s)}}return r}const yx={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},wx={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class vx extends zt{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:s=r,rx:u,ry:c}=t;super(io,void 0,t,n==null?yx:wx),this.anchor=Qp(n,"anchor",["top","right","bottom","left"]),this.insetTop=xe(i),this.insetRight=xe(a),this.insetBottom=xe(o),this.insetLeft=xe(s),this.rx=xe(u),this.ry=xe(c)}render(t,n,r,i,a){const{marginTop:o,marginRight:s,marginBottom:u,marginLeft:c,width:l,height:d}=i,{anchor:f,insetTop:h,insetRight:m,insetBottom:p,insetLeft:b,rx:w,ry:y}=this,v=c+b,g=l-s-m,M=o+h,_=d-u-p;return He(f?"svg:line":"svg:rect",a).datum(0).call(or,this,i,a).call(sr,this).call(Vr,this,r).call(xn,this,{}).call(f==="left"?x=>x.attr("x1",v).attr("x2",v).attr("y1",M).attr("y2",_):f==="right"?x=>x.attr("x1",g).attr("x2",g).attr("y1",M).attr("y2",_):f==="top"?x=>x.attr("x1",v).attr("x2",g).attr("y1",M).attr("y2",M):f==="bottom"?x=>x.attr("x1",v).attr("x2",g).attr("y1",_).attr("y2",_):x=>x.attr("x",v).attr("y",M).attr("width",g-v).attr("height",_-M).attr("rx",w).attr("ry",y)).node()}}function Mx(e){return new vx(e)}const pu={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},_x=new Set(["geometry","href","src","ariaLabel","scales"]);class Ex extends zt{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ir(t)&&ob(t)&&(n={...n,title:je});const{x:r,y:i,x1:a,x2:o,y1:s,y2:u,anchor:c,preferredAnchor:l="bottom",monospace:d,fontFamily:f=d?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:m,fontVariant:p,fontWeight:b,lineHeight:w=1,lineWidth:y=20,frameAnchor:v,format:g,textAnchor:M="start",textOverflow:_,textPadding:x=8,title:A,pointerSize:N=12,pathFilter:B="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:s!=null&&u!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:s,scale:"y",optional:u==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:u,scale:"y",optional:s==null},title:{value:A,optional:!0}},n,pu),this.anchor=yl(c,"anchor"),this.preferredAnchor=yl(l,"preferredAnchor"),this.frameAnchor=pc(v),this.textAnchor=Le(M,"middle"),this.textPadding=+x,this.pointerSize=+N,this.pathFilter=qe(B),this.lineHeight=+w,this.lineWidth=+y,this.textOverflow=rg(_),this.monospace=!!d,this.fontFamily=qe(f),this.fontSize=xe(h),this.fontStyle=qe(m),this.fontVariant=qe(p),this.fontWeight=qe(b);for(const S in pu)S in this.channels&&(this[S]=pu[S]);this.splitLines=og(this),this.clipLine=sg(this),this.format={...g}}render(t,n,r,i,a){const o=this,{x:s,y:u,fx:c,fy:l}=n,{ownerSVGElement:d,document:f}=a,{anchor:h,monospace:m,lineHeight:p,lineWidth:b}=this,{textPadding:w,pointerSize:y,pathFilter:v}=this,{marginTop:g,marginLeft:M}=i,{x1:_,y1:x,x2:A,y2:N,x:B=_??A,y:S=x??N}=r,U=c?c(t.fx)-M:0,L=l?l(t.fy)-g:0,[V,E]=xs(this,i),k=Fb(r,V),z=Gb(r,E),X=m?Nc:Pc,G=X(vr);let O,Y;"title"in r?(O=r.channels,Y=Cx):(O=Nx.call(this,r,n),Y=$x);const H=He("svg:g",a).call(or,this,i,a).call(ag,this).call(xn,this,{x:B&&s,y:S&&u}).call(ne=>ne.selectAll().data(t).enter().append("g").attr("transform",ee=>`translate(${Math.round(k(ee))},${Math.round(z(ee))})`).call(sr,this).call(ee=>ee.append("path").attr("filter",v)).call(ee=>ee.append("text").each(function(K){const Q=wi(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const I=Y.call(o,K,t,O,n,r);if(typeof I=="string")for(const j of o.splitLines(I))T(Q,{value:o.clipLine(j)});else{const j=new Set;for(const R of I){const{label:C=""}=R;C&&j.has(C)||(j.add(C),T(Q,R))}}})));function T(ne,{label:ee,value:K,color:Q,opacity:I}){ee??(ee=""),K??(K="");const j=Q!=null||I!=null;let R,C=b*100;const[re]=Gr(ee,C,X,G);if(re>=0)ee=ee.slice(0,re).trimEnd()+vr,R=K.trim(),K="";else{(ee||!K&&!j)&&(K=" "+K);const[J]=Gr(K,C-X(ee),X,G);J>=0&&(R=K.trim(),K=K.slice(0,J).trimEnd()+vr)}const te=ne.append("tspan").attr("x",0).attr("dy",`${p}em`).text("​");ee&&te.append("tspan").attr("font-weight","bold").text(ee),K&&te.append(()=>f.createTextNode(K)),j&&te.append("tspan").text(" ■").attr("fill",Q).attr("fill-opacity",I).style("user-select","none"),R&&te.append("title").text(R)}function Z(){const{width:ne,height:ee}=i.facet??i;H.selectChildren().each(function(K){let{x:Q,width:I,height:j}=this.getBBox();I=Math.round(I),j=Math.round(j);let R=h;if(R===void 0){const te=k(K)+U,J=z(K)+L,de=te+I+y+w*2<ne,ae=te-I-y-w*2>0,We=J+j+y+w*2<ee,Me=J-j-y-w*2>0;R=de&&ae?We&&Me?o.preferredAnchor:Me?"bottom":"top":We&&Me?de?"left":"right":(de||ae)&&(We||Me)?`${Me?"bottom":"top"}-${de?"left":"right"}`:o.preferredAnchor}const C=this.firstChild,re=this.lastChild;if(C.setAttribute("d",Px(R,y,w,I,j)),Q)for(const te of re.childNodes)te.setAttribute("x",-Q);re.setAttribute("y",`${+xx(R,re.childNodes.length,p).toFixed(6)}em`),re.setAttribute("transform",`translate(${Ax(R,y,w,I,j)})`)}),H.attr("visibility",null)}return t.length&&(H.attr("visibility","hidden"),d.isConnected?Promise.resolve().then(Z):typeof requestAnimationFrame<"u"&&requestAnimationFrame(Z)),H.node()}}function Sx(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=rb(t,n)),new Ex(e,{...r,x:t,y:n})}function xx(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Ax(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Px(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function Nx({channels:e},t){var i,a;const n={};let r=this.format;r=th(r,e,"x"),r=th(r,e,"y"),this.format=r;for(const o in r){const s=r[o];if(!(s===null||s===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const u=$d(e,o);u&&(n[o]=u)}}for(const o in e){if(o in n||o in r||_x.has(o))continue;const s=$d(e,o);s&&(n[o]=s)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const s=this.format[o];if(typeof s=="string"){const u=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(pt(u)?pa:qr)(s)}else if(s===void 0||s===!0){const u=t[o];this.format[o]=u!=null&&u.bandwidth?Cc(u,u.domain()):Fr}}return n}function th(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([s])=>s===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function Cx(e,t,{title:n}){return Fr(n.value[e],e)}function*$x(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:qo(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:rh(r,n,"x"),value:nh(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:rh(r,n,"y"),value:nh(this.format.y2,n.y1,o,e)};else{const s=o.value[e],u=o.scale;if(!Qn(s)&&u==null)continue;yield{label:qo(r,n,a),value:this.format[a](s,e),color:u==="color"?i[a][e]:null,opacity:u==="opacity"?i[a][e]:null}}}}function nh(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(n.value[r],r)}`}function rh(e,t,n){const r=qo(e,t,`${n}1`,n),i=qo(e,t,`${n}2`,n);return r===i?r:`${r}–${i}`}function qo(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function $s(e={}){var G;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:s}=e,u=_c(e.className),c=e.marks===void 0?[]:ah(e.marks);c.push(...Lx(c));const l=Bx(t,e),d=new Map;for(const O of c){const Y=oh(O,l,e);Y&&d.set(O,Y)}const f=new Map;l&&ni(f,[l],e),ni(f,d,e);const h=ah(Fx(c,f,e));for(const O of h){const Y=oh(O,l,e);Y&&d.set(O,Y)}c.unshift(...h);let m=iS(f,e);if(m!==void 0){const O=l?fu(m,l):void 0;for(const H of c){if(H.facet===null||H.facet==="super")continue;const T=d.get(H);T!==void 0&&(T.facetsIndex=H.fx!=null||H.fy!=null?fu(m,T):O)}const Y=new Set;for(const{facetsIndex:H}of d.values())H==null||H.forEach((T,Z)=>{(T==null?void 0:T.length)>0&&Y.add(Z)});m.forEach(0<Y.size&&Y.size<m.length?(H,T)=>H.empty=!Y.has(T):H=>H.empty=!1);for(const H of c)if(H.facet==="exclude"){const T=d.get(H);T!==void 0&&(T.facetsIndex=sS(T.facetsIndex))}}for(const O of Pe.keys())bl(e[O])&&O!=="fx"&&O!=="fy"&&f.set(O,[]);const p=new Map;for(const O of c){if(p.has(O))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:Y,channels:H}=d.get(O)??{},{data:T,facets:Z,channels:ne}=O.initialize(Y,H,e);$c(ne,e),p.set(O,{data:T,facets:Z,channels:ne})}const b=_l(ni(f,p,e),e),w=nS(b,c,e);kE(b,w);const y=Ld(b),{fx:v,fy:g}=y,M=v||g?kb(b,w):w,_=v||g?Yx(y,w):w,x=gc(e),A=x.document,N=rs("svg").call(A.documentElement);let B=N;x.ownerSVGElement=N,x.className=u,x.projection=Y_(e,M),x.filterFacets=(O,Y)=>fu(m,{channels:Y,groups:Sc(O,Y)}),x.getMarkState=O=>{const Y=p.get(O),H=d.get(O);return{...Y,channels:{...Y.channels,...H==null?void 0:H.channels}}},x.dispatchValue=O=>{B.value!==O&&(B.value=O,B.dispatchEvent(new Event("input",{bubbles:!0})))};const S=new Set;for(const[O,Y]of p)if(O.initializer!=null){const H=O.facet==="super"?_:M,T=O.initializer(Y.data,Y.facets,Y.channels,y,H,x);if(T.data!==void 0&&(Y.data=T.data),T.facets!==void 0&&(Y.facets=T.facets),T.channels!==void 0){const{fx:Z,fy:ne,...ee}=T.channels;Rx(ee),Object.assign(Y.channels,ee);for(const K of Object.values(ee)){const{scale:Q}=K;Q!=null&&!__(Pe.get(Q))&&(kg(K,e),S.add(Q))}(Z!=null||ne!=null)&&d.set(O,!0)}}if(S.size){const O=new Map;ni(O,p,e,Z=>S.has(Z)),ni(f,p,e,Z=>S.has(Z));const Y=zx(_l(O,e),b),{scales:H,...T}=Ld(Y);Object.assign(b,Y),Object.assign(y,T),Object.assign(y.scales,H)}let U,L;m!==void 0&&(U={x:v==null?void 0:v.domain(),y:g==null?void 0:g.domain()},m=aS(m,U),L=oS(v,g,w));for(const[O,Y]of p)Y.values=O.scale(Y.channels,y,x);const{width:V,height:E}=w;wi(N).attr("class",u).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",V).attr("height",E).attr("viewBox",`0 0 ${V} ${E}`).attr("aria-label",o).attr("aria-description",s).call(O=>O.append("style").text(`:where(.${u}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${u} text),
:where(.${u} tspan) {
  white-space: pre;
}`)).call(Ec,n);for(const O of c){const{channels:Y,values:H,facets:T}=p.get(O);if(m===void 0||O.facet==="super"){let Z=null;if(T&&(Z=T[0],Z=O.filter(Z,Y,H),Z.length===0))continue;const ne=O.render(Z,y,H,_,x);if(ne==null)continue;N.appendChild(ne)}else{let Z;for(const ne of m){if(!(((G=O.facetAnchor)==null?void 0:G.call(O,m,U,ne))??!ne.empty))continue;let ee=null;if(T){const Q=d.has(O);if(ee=T[Q?ne.i:0],ee=O.filter(ee,Y,H),ee.length===0)continue;!Q&&ee===T[0]&&(ee=u_(ee)),ee.fx=ne.x,ee.fy=ne.y,ee.fi=ne.i}const K=O.render(ee,y,H,M,x);if(K!=null){(Z??(Z=wi(N).append("g"))).append(()=>K).datum(ne);for(const Q of["aria-label","aria-description","aria-hidden","transform"])K.hasAttribute(Q)&&(Z.attr(Q,K.getAttribute(Q)),K.removeAttribute(Q))}}Z==null||Z.selectChildren().attr("transform",L)}}const k=gx(b,x,e),{figure:z=r!=null||i!=null||a!=null||k.length>0}=e;z&&(B=A.createElement("figure"),B.className=`${u}-figure`,B.style.maxWidth="initial",r!=null&&B.append(ih(A,r,"h2")),i!=null&&B.append(ih(A,i,"h3")),B.append(...k,N),a!=null&&B.append(Tx(A,a))),B.scale=UE(y.scales),B.legend=mx(b,x,e);const X=z_();return X>0&&wi(N).append("text").attr("x",V).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${X.toLocaleString("en-US")} warning${X===1?"":"s"}. Please check the console.`),B}function ih(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Tx(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Ix({marks:e=[],...t}={}){return $s({...t,marks:[...e,this]})}zt.prototype.plot=Ix;function ah(e){return e.flat(1/0).filter(t=>t!=null).map(kx)}function kx(e){return typeof e.render=="function"?e:new Dx(e)}class Dx extends zt{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function $c(e,t){for(const n in e)kg(e[n],t);return e}function kg(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:s=a?u=>u*100:ab(o,i)}=t[n]??{};s!=null&&(e.value=Be(e.value,s),e.transform=!1)}function Rx(e){for(const t in e)bb(t,e[t])}function ni(e,t,n,r=n_){var i,a;for(const{channels:o}of t.values())for(const s in o){const u=o[s],{scale:c}=u;if(c!=null&&r(c))if(c==="projection"){if(!K_(n)){const l=((i=n.x)==null?void 0:i.domain)===void 0,d=((a=n.y)==null?void 0:a.domain)===void 0;if(l||d){const[f,h]=Q_(u);l&&bu(e,"x",f),d&&bu(e,"y",h)}}}else bu(e,c,u)}return e}function bu(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function Bx(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=nt(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=Yi(i,{value:n,scale:"fx"})),r!=null&&(a.fy=Yi(i,{value:r,scale:"fy"})),$c(a,t);const o=Sc(i,a);return{channels:a,groups:o,data:e.data}}function oh(e,t,n){var u;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const c=nt(e.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const l={};return r!=null&&(l.fx=Yi(c,{value:r,scale:"fx"})),i!=null&&(l.fy=Yi(c,{value:i,scale:"fy"})),$c(l,n),{channels:l,groups:Sc(c,l)}}if(t===void 0)return;const{channels:a,groups:o,data:s}=t;if(e.facet!=="auto"||e.data===s)return{channels:a,groups:o};s.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((u=nt(e.data))==null?void 0:u.length)===s.length&&Fn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Ox(e,t={}){return Uo({...t,x:null,y:null},(n,r,i,a,o,s)=>s.getMarkState(e))}function Lx(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?wS:/^y$/i.test(i)?jd:yS,r=i(Ox(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===jd?"left":"bottom");const o=Sx(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function Fx(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:s={},axis:u,grid:c,facet:l={},facet:{axis:d=u,grid:f}=l,x:{axis:h=u,grid:m=h===null?null:c}=i,y:{axis:p=u,grid:b=p===null?null:c}=a,fx:{axis:w=d,grid:y=w===null?null:f}=o,fy:{axis:v=d,grid:g=v===null?null:f}=s}=n;(r||!bl(i)&&!sh("x",e))&&(h=m=null),(r||!bl(a)&&!sh("y",e))&&(p=b=null),t.has("fx")||(w=y=null),t.has("fy")||(v=g=null),h===void 0&&(h=!Ya(e,"x")),p===void 0&&(p=!Ya(e,"y")),w===void 0&&(w=!Ya(e,"fx")),v===void 0&&(v=!Ya(e,"fy")),h===!0&&(h="bottom"),p===!0&&(p="left"),w===!0&&(w=h==="top"||h===null?"bottom":"top"),v===!0&&(v=p==="right"||p===null?"left":"right");const M=[];return za(M,g,ix,s),Va(M,v,ZS,"right","left",l,s),za(M,y,ox,o),Va(M,w,QS,"top","bottom",l,o),za(M,b,rx,a),Va(M,p,gg,"left","right",n,a),za(M,m,ax,i),Va(M,h,yg,"bottom","top",n,i),M}function Va(e,t,n,r,i,a,o){if(!t)return;const s=Gx(t);o=Ux(s?r:t,a,o);const{line:u}=o;(n===gg||n===yg)&&u&&!zi(u)&&e.push(Mx(qx(o))),e.push(n(o)),s&&e.push(n({...o,anchor:i,label:null}))}function za(e,t,n,r){!t||zi(t)||e.push(n(Hx(t,r)))}function Gx(e){return/^\s*both\s*$/i.test(e)}function Ux(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:u,fontVariant:c,ariaLabel:l,ariaDescription:d,label:f=t.label,labelAnchor:h,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:u,fontVariant:c,ariaLabel:l,ariaDescription:d,label:f,labelAnchor:h,labelArrow:m,labelOffset:p}}function qx(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function Hx(e,{stroke:t=Ms(e)?e:void 0,ticks:n=Vx(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function Vx(e){switch(typeof e){case"number":return!0;case"string":return!Ms(e)}return ir(e)||typeof(e==null?void 0:e.range)=="function"}function Ya(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function sh(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function zx(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function Yx({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:u}=Mc(n),c=e&&uh(e),l=t&&uh(t);return{marginTop:t?l[0]:r,marginRight:e?s-c[1]:i,marginBottom:t?u-l[1]:a,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:s,height:u}}function uh(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}function jx(e={}){return Jp(e)?e:{...e,x:je}}function Wx(e={}){return eb(e)?e:{...e,y:je}}function Xx(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const s of t)for(const u of s)r[u]&&++i,r[u]=1;if(i===0)return{data:e,facets:t};e=Hi(e);const a=e[Xp]=new Uint32Array(n+i);t=t.map(s=>Hi(s,Uint32Array));let o=n;r.fill(0);for(const s of t)for(let u=0,c=s.length;u<c;++u){const l=s[u];r[l]?(s[u]=o,e[o]=e[l],a[o]=l,++o):a[l]=l,r[l]=1}return{data:e,facets:t}}function Kx(e={},t={}){arguments.length===1&&([e,t]=Dg(e));const{y1:n,y:r=n,x:i,...a}=t,[o,s,u,c]=Rg(r,i,"y","x",e,a);return{...o,y1:n,y:s,x1:u,x2:c,x:ib(u,c)}}function Zx(e={},t={}){arguments.length===1&&([e,t]=Dg(e));const{x1:n,x:r=n,y:i,...a}=t,[o,s,u,c]=Rg(r,i,"x","y",e,a);return{...o,x1:n,x:s,y1:u,y2:c,y:ib(u,c)}}function Qx({x:e,x1:t,x2:n,...r}={}){return r=Ps(r,"y"),t===void 0&&n===void 0?Kx({x:e,...r}):([t,n]=nb(e,t,n),{...r,x1:t,x2:n})}function Jx({y:e,y1:t,y2:n,...r}={}){return r=Ps(r,"x"),t===void 0&&n===void 0?Zx({y:e,...r}):([t,n]=nb(e,t,n),{...r,y1:t,y2:n})}function Dg(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const eA={length:!0};function Rg(e,t=t_,n,r,{offset:i,order:a,reverse:o},s){if(t===null)throw new Error(`stack requires ${r}`);const u=s_(s),[c,l]=l_(e),[d,f]=gl(t),[h,m]=gl(t);return d.hint=h.hint=eA,i=tA(i),a=iA(a,i,r),[db(s,(p,b,w)=>{({data:p,facets:b}=Xx(p,b));const y=e==null?void 0:l(c_(dt(p,e),w==null?void 0:w[n])),v=dt(p,t,Float64Array),g=dt(p,u),M=a&&a(p,y,v,g),_=p.length,x=f(new Float64Array(_)),A=m(new Float64Array(_)),N=[];for(const B of b){const S=y?Array.from($m(B,U=>y[U]).values()):[B];if(M)for(const U of S)U.sort(M);for(const U of S){let L=0,V=0;o&&U.reverse();for(const E of U){const k=v[E];k<0?L=A[E]=(x[E]=L)+k:k>0?V=A[E]=(x[E]=V)+k:A[E]=x[E]=V}}N.push(S)}return i&&i(N,x,A,g),{data:p,facets:b}}),c,d,h]}function tA(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return nA;case"center":case"silhouette":return rA;case"wiggle":return Og}throw new Error(`unknown offset: ${e}`)}}function Bg(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function nA(e,t,n){for(const r of e)for(const i of r){const[a,o]=Bg(i,n);for(const s of i){const u=1/(o-a||1);t[s]=u*(t[s]-a),n[s]=u*(n[s]-a)}}}function rA(e,t,n){for(const r of e){for(const i of r){const[a,o]=Bg(i,n);for(const s of i){const u=(o+a)/2;t[s]-=u,n[s]-=u}}Lg(r,t,n)}Fg(e,t,n)}function Og(e,t,n,r){for(const i of e){const a=new zn;let o=0;for(const s of i){let u=-1;const c=s.map(h=>Math.abs(n[h]-t[h])),l=s.map(h=>{u=r?r[h]:++u;const m=n[h]-t[h],p=a.has(u)?m-a.get(u):0;return a.set(u,m),p}),d=[0,...J5(l)];for(const h of s)t[h]+=o,n[h]+=o;const f=Yn(c);f&&(o-=Yn(c,(h,m)=>(l[m]/2+d[m])*h)/f)}Lg(i,t,n)}Fg(e,t,n)}function Lg(e,t,n){const r=an(e,i=>an(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function Fg(e,t,n){const r=e.length;if(r===1)return;const i=e.map(s=>s.flat()),a=i.map(s=>(an(s,u=>t[u])+Je(s,u=>n[u]))/2),o=an(a);for(let s=0;s<r;s++){const u=o-a[s];for(const c of i[s])t[c]+=u,n[c]+=u}}function iA(e,t,n){if(e===void 0&&t===Og)return lh(Gt);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?Go:Gt;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return aA(i);case"z":return oA(i);case"sum":return sA(i);case"appearance":return uA(i);case"inside-out":return lh(i)}return ch(Kp(e))}if(typeof e=="function")return(e.length===1?ch:lA)(e);if(Array.isArray(e))return cA(e);throw new Error(`invalid order: ${e}`)}}function aA(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function oA(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function sA(e){return Ts(e,(t,n,r,i)=>Gl(Sn(t),a=>Yn(a,o=>r[o]),a=>i[a]))}function uA(e){return Ts(e,(t,n,r,i)=>Gl(Sn(t),a=>n[km(a,o=>r[o])],a=>i[a]))}function lh(e){return Ts(e,(t,n,r,i)=>{const a=Sn(t),o=Gl(a,d=>n[km(d,f=>r[f])],d=>i[d]),s=yi(a,d=>Yn(d,f=>r[f]),d=>i[d]),u=[],c=[];let l=0;for(const d of o)l<0?(l+=s.get(d),u.push(d)):(l-=s.get(d),c.push(d));return c.reverse().concat(u)})}function ch(e){return t=>{const n=dt(t,e);return(r,i)=>Gt(n[r],n[i])}}function lA(e){return t=>(n,r)=>e(t[n],t[r])}function cA(e){return Ts(Gt,()=>e)}function Ts(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new zn(t(n,r,i,a).map((s,u)=>[s,u]));return(s,u)=>e(o.get(a[s]),o.get(a[u]))}}class Gg extends zt{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:s=a,insetBottom:u=a,insetLeft:c=a,rx:l,ry:d}=r;this.insetTop=xe(o),this.insetRight=xe(s),this.insetBottom=xe(u),this.insetLeft=xe(c),this.rx=Le(l,"auto"),this.ry=Le(d,"auto")}render(t,n,r,i,a){const{rx:o,ry:s}=this;return He("svg:g",a).call(or,this,i,a).call(this._transform,this,n).call(u=>u.selectAll().data(t).enter().append("rect").call(sr,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(be,"rx",o).call(be,"ry",s).call(Vr,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:s}=this,u=n&&t?t.bandwidth():a-r-i;return Math.max(0,u-o-s)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:s}=this,u=n&&t?t.bandwidth():a-r-i;return Math.max(0,u-o-s)}}const Ug={ariaLabel:"bar"};class fA extends Gg{constructor(t,n={}){const{x1:r,x2:i,y:a}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},n,Ug)}_transform(t,n,{x:r}){t.call(xn,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:a}=this;return Mn(t)?i+a:o=>Math.min(n[o],r[o])+a}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:a,width:o}){const{insetLeft:s,insetRight:u}=this;return Mn(t)?o-i-a-s-u:c=>Math.max(0,Math.abs(r[c]-n[c])-s-u)}}class dA extends Gg{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,Ug)}_transform(t,n,{y:r}){t.call(xn,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return Mn(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:s,insetBottom:u}=this;return Mn(t)?o-i-a-s-u:c=>Math.max(0,Math.abs(r[c]-n[c])-s-u)}}function hA(e,t={}){return tb(t)||(t={...t,y:cc,x2:je}),new fA(e,Qx(Zb(jx(t))))}function qg(e,t={}){return tb(t)||(t={...t,x:cc,y2:je}),new dA(e,Jx(Qb(Wx(t))))}function mA(e){return 60*1/e}function pA(e,t,n){const r=e.slice();return r[21]=t[n],r}function bA(e,t,n){const r=e.slice();return r[21]=t[n],r}function gA(e){let t;return{c(){t=W("option"),t.textContent=`1/${e[21]} note`,t.__value=e[21],Ne(t,t.__value)},m(n,r){$e(n,t,r)},p:Te,d(n){n&&Ce(t)}}}function yA(e){let t;return{c(){t=W("option"),t.textContent=`1/${e[21]} note`,t.__value=e[21],Ne(t,t.__value)},m(n,r){$e(n,t,r)},p:Te,d(n){n&&Ce(t)}}}function fh(e){let t,n,r=e[7].toFixed(1)+"",i,a;return{c(){t=W("div"),n=pe("estimated: "),i=pe(r),a=pe(" bpm"),q(t,"class","svelte-1ruiyqw")},m(o,s){$e(o,t,s),P(t,n),P(t,i),P(t,a)},p(o,s){s&128&&r!==(r=o[7].toFixed(1)+"")&&nn(i,r)},d(o){o&&Ce(t)}}}function wA(e){let t,n,r,i,a,o=e[1].length+"",s,u,c,l,d,f,h,m,p,b,w,y,v,g,M,_,x,A,N,B,S,U,L,V,E,k,z,X,G,O,Y,H,T,Z,ne,ee=Dn([16,32,64,128]),K=[];for(let R=0;R<4;R+=1)K[R]=gA(bA(e,ee,R));let Q=Dn([16,32,64,128]),I=[];for(let R=0;R<4;R+=1)I[R]=yA(pA(e,Q,R));let j=e[7]&&fh(e);return{c(){t=W("main"),n=W("h2"),n.textContent="Tempo Drift",r=le(),i=W("p"),a=pe("Connect a MIDI instrument (currently "),s=pe(o),u=pe(` connected), choose
        your tempo, and start playing. The time between two note onsets will be shown
        as a bar, so you can see how well you still hit, for example, quarter notes
        after playing for some time. Bar heights are either exact or rounded to the
        closest, for example, 64th note (binning dropdown). You can filter very short
        inter-note times, which happen whan playing two notes at roughly the same
        time as in a chord.`),c=le(),l=W("div"),d=W("label"),f=pe(`tempo
            `),h=W("input"),m=le(),p=W("label"),b=pe(`binning
            `),w=W("select"),y=W("option"),y.textContent="off";for(let R=0;R<4;R+=1)K[R].c();v=le(),g=W("label"),M=pe(`filtering
            `),_=W("select"),x=W("option"),x.textContent="off";for(let R=0;R<4;R+=1)I[R].c();A=le(),N=W("label"),B=pe(`bars
            `),S=W("input"),U=le(),L=W("div"),V=le(),j&&j.c(),E=le(),k=W("div"),z=W("button"),z.textContent="reset",X=le(),G=W("button"),G.textContent="export",O=le(),Y=W("button"),Y.textContent="import",H=le(),T=W("input"),q(i,"class","explanation"),q(h,"type","number"),q(h,"step","1"),q(h,"min","10"),q(h,"max","400"),wt(h,"width","55px"),q(d,"title","The tempo in beats per minute (bpm)"),y.__value=0,Ne(y,y.__value),e[3]===void 0&&Gn(()=>e[12].call(w)),q(p,"title","You can change between seeing exact bar heights and binned (rounded) heights."),x.__value=0,Ne(x,x.__value),e[4]===void 0&&Gn(()=>e[13].call(_)),q(g,"title","You can filter out bars that are shorter than a given note duration."),q(S,"type","number"),q(S,"step","25"),q(S,"min","25"),q(S,"max","1000"),wt(S,"width","55px"),q(N,"title","The number of most recent notes that are shown as bars."),q(l,"class","control svelte-1ruiyqw"),q(L,"class","visualization svelte-1ruiyqw"),q(z,"title","Clear all played notes"),q(G,"title","Export all data and settings"),q(Y,"title","Export all data and settings"),q(T,"type","file"),q(T,"id","file-input"),wt(T,"display","none"),q(k,"class","control svelte-1ruiyqw"),q(t,"class","demo")},m(R,C){$e(R,t,C),P(t,n),P(t,r),P(t,i),P(i,a),P(i,s),P(i,u),P(t,c),P(t,l),P(l,d),P(d,f),P(d,h),Ne(h,e[2]),P(l,m),P(l,p),P(p,b),P(p,w),P(w,y);for(let re=0;re<4;re+=1)K[re]&&K[re].m(w,null);pn(w,e[3],!0),P(l,v),P(l,g),P(g,M),P(g,_),P(_,x);for(let re=0;re<4;re+=1)I[re]&&I[re].m(_,null);pn(_,e[4],!0),P(l,A),P(l,N),P(N,B),P(N,S),Ne(S,e[5]),P(t,U),P(t,L),e[15](L),P(t,V),j&&j.m(t,null),P(t,E),P(t,k),P(k,z),P(k,X),P(k,G),P(k,O),P(k,Y),P(k,H),P(k,T),Z||(ne=[fe(h,"input",e[11]),fe(h,"change",e[8]),fe(w,"change",e[12]),fe(w,"change",e[8]),fe(_,"change",e[13]),fe(_,"change",e[8]),fe(S,"input",e[14]),fe(S,"change",e[8]),fe(z,"click",e[16]),fe(G,"click",e[9]),fe(Y,"click",e[17]),fe(T,"input",e[10])],Z=!0)},p(R,[C]){C&2&&o!==(o=R[1].length+"")&&nn(s,o),C&4&&ft(h.value)!==R[2]&&Ne(h,R[2]),C&8&&pn(w,R[3]),C&16&&pn(_,R[4]),C&32&&ft(S.value)!==R[5]&&Ne(S,R[5]),R[7]?j?j.p(R,C):(j=fh(R),j.c(),j.m(t,E)):j&&(j.d(1),j=null)},i:Te,o:Te,d(R){R&&Ce(t),Si(K,R),Si(I,R),e[15](null),j&&j.d(),Z=!1,ln(ne)}}}let vA=1e3,MA=600;function _A(e,t,n){let r,i=[],a=120,o=64,s=0,u=50,c=0,l=[],d=0;const f=()=>{n(1,i=[]),D.inputs.length<1?console.warn("No MIDI device detected"):(D.inputs.forEach((A,N)=>{console.log(`MIDI device ${N}: ${A.name}`),A.addListener("noteon",h)}),n(1,i=[...D.inputs]))},h=A=>{l.length===0&&(c=A.timestamp);const N=(A.timestamp-c)/1e3;l.push(N),m()},m=()=>{const A=Zh(a),N=A/4,B=A/2,S=A*2,U=A*4,L=[0,N,B,A,S],V=["0","𝅘𝅥𝅯","𝅘𝅥𝅮","𝅘𝅥","𝅗𝅥"];let E=l.map((G,O)=>O===0?0:G-l[O-1]);if(s!==0){const G=U/s;E=E.filter(O=>O>=G)}let k=E;if(o!==0){const G=U/o;k=E.map(O=>Math.round(O/G)*G)}const z=$s({width:vA,height:MA,marginLeft:35,marginRight:1,x:{axis:!1},y:{ticks:L,tickFormat:G=>{const O=L.indexOf(G);return V[O]},domain:[0,S*1.1],tickSize:0},marks:[qg(k.slice(-u),{x:(G,O)=>O,y:G=>G,fill:"#ddd",inset:0,dx:.5}),Ns(L,{stroke:"#888"})]});n(0,r.textContent="",r),r.appendChild(z);const X=E.filter(G=>G>.8*N&&G<1.25*A).slice(-24).map(G=>G<.6*A?G*2:G>1.5*A?G/2:G);n(7,d=mA(Dm(X)))},p=()=>{const N=JSON.stringify({tempo:a,binNote:o,filterNote:s,barLimit:u,noteOnTimes:l},void 0,2),B=new Blob([N],{type:"text/plain;charset=utf-8"});Bl(B,"tempo-drift.json")},b=async A=>{const B=await A.target.files[0].text(),S=JSON.parse(B);(l.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,a=S.tempo),n(3,o=S.binNote),n(4,s=S.filterNote),n(5,u=S.barLimit),n(6,l=S.noteOnTimes),m())};Yo(()=>{D.enable().then(f).catch(A=>alert(A)),m()}),jo(()=>{for(const A of D.inputs)A.removeListener()});function w(){a=ft(this.value),n(2,a)}function y(){o=ao(this),n(3,o)}function v(){s=ao(this),n(4,s)}function g(){u=ft(this.value),n(5,u)}function M(A){Sr[A?"unshift":"push"](()=>{r=A,n(0,r)})}return[r,i,a,o,s,u,l,d,m,p,b,w,y,v,g,M,()=>{confirm("Reset played notes?")&&(n(6,l=[]),m())},()=>document.querySelector("#file-input").click()]}class EA extends Ji{constructor(t){super(),Qi(this,t,_A,wA,Zi,{})}}function SA(e){let t,n,r,i,a,o=e[1].length+"",s,u,c,l,d,f,h,m,p=e[2]?"on":"off",b,w,y,v,g,M,_,x,A,N,B,S,U,L,V,E,k,z;return{c(){t=W("main"),n=W("h2"),n.textContent="Dynamics",r=le(),i=W("p"),a=pe("Connect a MIDI instrument (currently "),s=pe(o),u=pe(` connected) and
        start playing. The loudness of each note will be shown as a bar. Bar heights
        are either exact or rounded to the
        `),c=W("a"),c.textContent="closest rough dynamics",l=pe(", for example a forte."),d=le(),f=W("div"),h=W("button"),m=pe("binning is "),b=pe(p),w=le(),y=W("label"),v=pe(`bars
            `),g=W("input"),M=le(),_=W("div"),x=le(),A=W("div"),N=W("button"),N.textContent="reset",B=le(),S=W("button"),S.textContent="export",U=le(),L=W("button"),L.textContent="import",V=le(),E=W("input"),q(c,"href","https://en.wikipedia.org/wiki/Dynamics_(music)"),q(i,"class","explanation"),q(h,"title","You can change between seeing exact bar heights and binned (rounded) heights."),q(g,"type","number"),q(g,"step","25"),q(g,"min","25"),q(g,"max","1000"),wt(g,"width","55px"),q(y,"title","The number of most recent notes that are shown as bars."),q(f,"class","control svelte-1p166uy"),q(_,"class","visualization svelte-1p166uy"),q(N,"title","Clear all played notes"),q(S,"title","Export all data and settings"),q(L,"title","Export all data and settings"),q(E,"type","file"),q(E,"id","file-input"),wt(E,"display","none"),q(A,"class","control svelte-1p166uy"),q(t,"class","demo")},m(X,G){$e(X,t,G),P(t,n),P(t,r),P(t,i),P(i,a),P(i,s),P(i,u),P(i,c),P(i,l),P(t,d),P(t,f),P(f,h),P(h,m),P(h,b),P(f,w),P(f,y),P(y,v),P(y,g),Ne(g,e[3]),P(t,M),P(t,_),e[10](_),P(t,x),P(t,A),P(A,N),P(A,B),P(A,S),P(A,U),P(A,L),P(A,V),P(A,E),k||(z=[fe(h,"click",e[8]),fe(g,"input",e[9]),fe(g,"change",e[5]),fe(N,"click",e[11]),fe(S,"click",e[6]),fe(L,"click",e[12]),fe(E,"input",e[7])],k=!0)},p(X,[G]){G&2&&o!==(o=X[1].length+"")&&nn(s,o),G&4&&p!==(p=X[2]?"on":"off")&&nn(b,p),G&8&&ft(g.value)!==X[3]&&Ne(g,X[3])},i:Te,o:Te,d(X){X&&Ce(t),e[10](null),k=!1,ln(z)}}}let xA=1e3,AA=600;function PA(e,t,n){let r,i=[];const o=new Map([[0,"silent"],[16,"ppp"],[32,"pp"],[48,"p"],[64,"mp"],[80,"mf"],[96,"f"],[112,"ff"],[127,"fff"]]);let s=!0,u=50,c=[];const l=()=>{console.log("MIDI enabled"),n(1,i=[]),D.inputs.length<1?console.warn("No MIDI device detected"):(D.inputs.forEach((g,M)=>{console.log(`MIDI device ${M}: ${g.name}`),g.addListener("noteon",d)}),n(1,i=[...D.inputs]))},d=g=>{c.push(g.rawVelocity),f()},f=()=>{console.log("draw");let g=c;s&&(g=c.map(x=>{for(const A of o.keys())if(x<=A)return A}));const M=[...o.keys()],_=$s({width:xA,height:AA,marginLeft:45,marginRight:1,x:{axis:!1},y:{ticks:M,tickFormat:x=>o.get(x),domain:[0,128],tickSize:0},marks:[qg(g.slice(-u),{x:(x,A)=>A,y:x=>x,fill:"#ddd",inset:0,dx:.5}),Ns(M,{stroke:"#888"})]});n(0,r.textContent="",r),r.appendChild(_)},h=()=>{const M=JSON.stringify({isBinning:s,barLimit:u,noteOnTimes:c},void 0,2),_=new Blob([M],{type:"text/plain;charset=utf-8"});Bl(_,"tempo-drift.json")},m=async g=>{const _=await g.target.files[0].text(),x=JSON.parse(_);(c.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,s=x.isBinning),n(3,u=x.barLimit),n(4,c=x.noteOnTimes),f())};Yo(()=>{D.enable().then(l).catch(g=>alert(g)),f()}),jo(()=>{for(const g of D.inputs)g.removeListener()});const p=()=>{n(2,s=!s),f()};function b(){u=ft(this.value),n(3,u)}function w(g){Sr[g?"unshift":"push"](()=>{r=g,n(0,r)})}return[r,i,s,u,c,f,h,m,p,b,w,()=>{confirm("Reset played notes?")&&(n(4,c=[]),f())},()=>document.querySelector("#file-input").click()]}class NA extends Ji{constructor(t){super(),Qi(this,t,PA,SA,Zi,{})}}function CA(e){let t,n,r,i,a,o=e[1].length+"",s,u,c,l,d,f,h=e[2]?"hidden":"shown",m,p,b,w,y,v,g,M;return{c(){t=W("main"),n=W("h2"),n.textContent="Improvisation Intervals",r=le(),i=W("p"),a=pe("Connect a MIDI instrument (currently "),s=pe(o),u=pe(` connected) and
        start playing. The bar chart below shows how often you played each interval:
        when you go up in pitch, the bar of the played interval in the top half will
        increase. If you go down, it will show up in the bottom half. Colors denote
        the type of interval, so you can quickly see if you play, for example, more
        major or minor intervals.`),c=le(),l=W("div"),d=W("button"),f=pe("unison "),m=pe(h),p=le(),b=W("div"),w=le(),y=W("div"),v=W("button"),v.textContent="reset",q(i,"class","explanation"),q(d,"title","Toggle filtering unison intervals"),q(l,"class","control svelte-13613lz"),q(b,"class","visualization svelte-13613lz"),q(v,"title","Clear all played notes"),q(y,"class","control svelte-13613lz"),q(t,"class","demo")},m(_,x){$e(_,t,x),P(t,n),P(t,r),P(t,i),P(i,a),P(i,s),P(i,u),P(t,c),P(t,l),P(l,d),P(d,f),P(d,m),P(t,p),P(t,b),e[6](b),P(t,w),P(t,y),P(y,v),g||(M=[fe(d,"click",e[5]),fe(v,"click",e[7])],g=!0)},p(_,[x]){x&2&&o!==(o=_[1].length+"")&&nn(s,o),x&4&&h!==(h=_[2]?"hidden":"shown")&&nn(m,h)},i:Te,o:Te,d(_){_&&Ce(t),e[6](null),g=!1,ln(M)}}}let $A=1e3,TA=650;function IA(e,t,n){let r,i=[],a=!0,o=[];const s=[{semitones:0,name:"Unison",short:"P1",type:"perfect"},{semitones:1,name:"Minor 2nd",short:"m2",type:"minor"},{semitones:2,name:"Major 2nd",short:"M2",type:"major"},{semitones:3,name:"Minor 3rd",short:"m3",type:"minor"},{semitones:4,name:"Major 3rd",short:"M3",type:"major"},{semitones:5,name:"Perfect 4th",short:"P4",type:"perfect"},{semitones:6,name:"Augmented 4th",short:"A4",type:"tritone"},{semitones:7,name:"Perfect 5th",short:"P5",type:"perfect"},{semitones:8,name:"Minor 6th",short:"m6",type:"minor"},{semitones:9,name:"Major 6th",short:"M6",type:"major"},{semitones:10,name:"Minor 7th",short:"m7",type:"minor"},{semitones:11,name:"Major 7th",short:"M7",type:"major"},{semitones:12,name:"Perfect 8ve",short:"P8",type:"perfect"}],u=()=>{n(1,i=[]),D.inputs.length<1?console.warn("No MIDI device detected"):(D.inputs.forEach((m,p)=>{console.log(`MIDI device ${p}: ${m.name}`),m.addListener("noteon",c)}),n(1,i=[...D.inputs]))},c=m=>{const p={number:m.note.number,velocity:m.rawVelocity,time:m.timestamp};o.push(p),l()},l=()=>{let m=o.map((w,y)=>y===0?0:w.number-o[y-1].number);a&&(m=m.filter(w=>w!==0)),m=m.map(w=>{if(Math.abs(w)<=12)return w;{const y=w>0?12:-12;for(;Math.abs(w)>12;)w-=y;return w}});const p=t7(m,w=>w).map(([w,y])=>({interval:w,count:y.length})),b=$s({width:$A,height:TA,marginLeft:120,marginRight:10,color:{legend:!0,domain:["minor","major","perfect","tritone"],range:["#7da2e8","#ed796a","gold","#ccc"]},x:{},y:{tickFormat:w=>w>=0?s[w].name:s[-w].name,domain:On(-12,13,1),label:`🡸 going down ${" ".repeat(75)} going up 🡺     `,reverse:!0},marks:[Ns([-12,0,12],{stroke:"#888",strokeWidth:1.5}),hA(p,{x:"count",y:"interval",fill:w=>s[Math.abs(w.interval)].type,dx:.5,rx:4})]});n(0,r.textContent="",r),r.appendChild(b)};Yo(()=>{D.enable().then(u).catch(m=>alert(m)),l()}),jo(()=>{for(const m of D.inputs)m.removeListener()});const d=()=>{n(2,a=!a),l()};function f(m){Sr[m?"unshift":"push"](()=>{r=m,n(0,r)})}return[r,i,a,o,l,d,f,()=>{confirm("Reset played notes?")&&(n(3,o=[]),l())}]}class kA extends Ji{constructor(t){super(),Qi(this,t,IA,CA,Zi,{})}}function dh(e,t,n){const r=e.slice();return r[7]=t[n],r}function DA(e){let t,n,r,i,a,o,s=e[1]&&hh(e);return{c(){t=W("button"),t.textContent="< back",n=le(),s&&s.c(),r=gh()},m(u,c){$e(u,t,c),$e(u,n,c),s&&s.m(u,c),$e(u,r,c),i=!0,a||(o=fe(t,"click",e[5]),a=!0)},p(u,c){u[1]?s?(s.p(u,c),c&2&&yn(s,1)):(s=hh(u),s.c(),yn(s,1),s.m(r.parentNode,r)):s&&(Al(),xr(s,1,1,()=>{s=null}),Pl())},i(u){i||(yn(s),i=!0)},o(u){xr(s),i=!1},d(u){u&&(Ce(t),Ce(n),Ce(r)),s&&s.d(u),a=!1,o()}}}function RA(e){let t,n,r,i=Dn(e[2]),a=[];for(let o=0;o<i.length;o+=1)a[o]=mh(dh(e,i,o));return{c(){t=W("p"),t.textContent=`This page contains a collection of small tools (demos) that are each
      tailored to a specific musical skill and sometimes also specific kind of
      musical data.`,n=le(),r=W("div");for(let o=0;o<a.length;o+=1)a[o].c();q(t,"class","explanation"),q(r,"class","grid svelte-1i1prs")},m(o,s){$e(o,t,s),$e(o,n,s),$e(o,r,s);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null)},p(o,s){if(s&6){i=Dn(o[2]);let u;for(u=0;u<i.length;u+=1){const c=dh(o,i,u);a[u]?a[u].p(c,s):(a[u]=mh(c),a[u].c(),a[u].m(r,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:Te,o:Te,d(o){o&&(Ce(t),Ce(n),Ce(r)),Si(a,o)}}}function BA(e){let t,n,r;return{c(){t=W("input"),q(t,"type","password"),q(t,"placeholder","password")},m(i,a){$e(i,t,a),Ne(t,e[0]),n||(r=fe(t,"input",e[3]),n=!0)},p(i,a){a&1&&t.value!==i[0]&&Ne(t,i[0])},i:Te,o:Te,d(i){i&&Ce(t),n=!1,r()}}}function hh(e){let t,n,r;var i=e[1].component;function a(o,s){return{}}return i&&(t=Dc(i,a())),{c(){t&&Bc(t.$$.fragment),n=gh()},m(o,s){t&&yu(t,o,s),$e(o,n,s),r=!0},p(o,s){if(s&2&&i!==(i=o[1].component)){if(t){Al();const u=t;xr(u.$$.fragment,1,0,()=>{wu(u,1)}),Pl()}i?(t=Dc(i,a()),Bc(t.$$.fragment),yn(t.$$.fragment,1),yu(t,n.parentNode,n)):t=null}},i(o){r||(t&&yn(t.$$.fragment,o),r=!0)},o(o){t&&xr(t.$$.fragment,o),r=!1},d(o){o&&Ce(n),t&&wu(t,o)}}}function mh(e){let t,n,r,i=e[7].description+"",a,o,s,u;function c(){return e[4](e[7])}return{c(){t=W("div"),n=W("h2"),n.textContent=`${e[7].title}`,r=le(),a=pe(i),o=le(),q(n,"class","svelte-1i1prs"),q(t,"class","card svelte-1i1prs")},m(l,d){$e(l,t,d),P(t,n),P(t,r),P(t,a),P(t,o),s||(u=fe(t,"click",c),s=!0)},p(l,d){e=l},d(l){l&&Ce(t),s=!1,u()}}}function OA(e){let t,n,r,i,a,o;const s=[BA,RA,DA],u=[];function c(l,d){return l[0]!==LA?0:l[1]?2:1}return i=c(e),a=u[i]=s[i](e),{c(){t=W("main"),n=W("h1"),n.textContent="Data-Driven Music Education Demos",r=le(),a.c()},m(l,d){$e(l,t,d),P(t,n),P(t,r),u[i].m(t,null),o=!0},p(l,[d]){let f=i;i=c(l),i===f?u[i].p(l,d):(Al(),xr(u[f],1,1,()=>{u[f]=null}),Pl(),a=u[i],a?a.p(l,d):(a=u[i]=s[i](l),a.c()),yn(a,1),a.m(t,null))},i(l){o||(yn(a),o=!0)},o(l){xr(a),o=!1},d(l){l&&Ce(t),u[i].d()}}}let LA="rhyvis";function FA(e,t,n){const r=[{id:"sub-division",title:"Sub-Division",description:"Learn rhythmic playing in different sub-divisions",component:V8},{id:"tempo-drift",title:"Tempo Drift",description:"Keep your tempo constant over a longer stretch of playing",component:EA},{id:"dynamics",title:"Dynamics",description:"Check how well you control the loudness of notes",component:NA},{id:"improvisation-intervals",title:"Improvisation Intervals",description:"See how often you use different intervals in improvisation",component:kA}];let i=null;const a=ty(window,"d");a&&a!==""&&(i=r.filter(l=>l.id===a)[0]);let o=localStorage.getItem("pwd")??"";window.onpopstate=l=>{i!==null&&n(1,i=null)};function s(){o=this.value,n(0,o)}const u=l=>{n(1,i=l),Oc(window,"d",l.id)},c=()=>{n(1,i=null),Oc(window,"d","")};return e.$$.update=()=>{e.$$.dirty&1&&localStorage.setItem("pwd",o)},[o,i,r,s,u,c]}class GA extends Ji{constructor(t){super(),Qi(this,t,FA,OA,Zi,{})}}new GA({target:document.getElementById("app")});

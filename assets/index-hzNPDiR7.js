var _2=Object.defineProperty;var y2=(t,e,n)=>e in t?_2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yn=(t,e,n)=>(y2(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function $t(){}function yd(t){return t()}function ku(){return Object.create(null)}function ke(t){t.forEach(yd)}function wd(t){return typeof t=="function"}function Vt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function w2(t){return Object.keys(t).length===0}function b(t,e){t.appendChild(e)}function Z(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function Li(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function gl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function at(t){return document.createTextNode(t)}function O(){return at(" ")}function mn(){return at("")}function dt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function B(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function fe(t){return t===""?null:+t}function v2(t){return Array.from(t.childNodes)}function qt(t,e){e=""+e,t.data!==e&&(t.data=e)}function et(t,e){t.value=e??""}function oe(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function Ht(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Dn(t){const e=t.querySelector(":checked");return e&&e.__value}class vd{constructor(e=!1){yn(this,"is_svg",!1);yn(this,"e");yn(this,"n");yn(this,"t");yn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=gl(n.nodeName):this.e=k(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)Z(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(j)}}let Er;function $r(t){Er=t}function xd(){if(!Er)throw new Error("Function called outside component initialization");return Er}function Da(t){xd().$$.on_mount.push(t)}function si(t){xd().$$.after_update.push(t)}const ki=[],Xe=[];let Ei=[];const Su=[],x2=Promise.resolve();let bl=!1;function $2(){bl||(bl=!0,x2.then($d))}function Ne(t){Ei.push(t)}const Ef=new Set;let _i=0;function $d(){if(_i!==0)return;const t=Er;do{try{for(;_i<ki.length;){const e=ki[_i];_i++,$r(e),M2(e.$$)}}catch(e){throw ki.length=0,_i=0,e}for($r(null),ki.length=0,_i=0;Xe.length;)Xe.pop()();for(let e=0;e<Ei.length;e+=1){const n=Ei[e];Ef.has(n)||(Ef.add(n),n())}Ei.length=0}while(ki.length);for(;Su.length;)Su.pop()();bl=!1,Ef.clear(),$r(t)}function M2(t){if(t.fragment!==null){t.update(),ke(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ne)}}function k2(t){const e=[],n=[];Ei.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ei=e}const Bo=new Set;let Gn;function Jt(){Gn={r:0,c:[],p:Gn}}function te(){Gn.r||ke(Gn.c),Gn=Gn.p}function K(t,e){t&&t.i&&(Bo.delete(t),t.i(e))}function tt(t,e,n,i){if(t&&t.o){if(Bo.has(t))return;Bo.add(t),Gn.c.push(()=>{Bo.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function _e(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ct(t){t&&t.c()}function lt(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),Ne(()=>{const o=t.$$.on_mount.map(yd).filter(wd);t.$$.on_destroy?t.$$.on_destroy.push(...o):ke(o),t.$$.on_mount=[]}),r.forEach(Ne)}function st(t,e){const n=t.$$;n.fragment!==null&&(k2(n.after_update),ke(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function S2(t,e){t.$$.dirty[0]===-1&&(ki.push(t),$2(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Gt(t,e,n,i,r,o,a=null,f=[-1]){const l=Er;$r(t);const s=t.$$={fragment:null,ctx:[],props:o,update:$t,not_equal:r,bound:ku(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ku(),dirty:f,skip_bound:!1,root:e.target||l.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(h,c,...d)=>{const p=d.length?d[0]:c;return s.ctx&&r(s.ctx[h],s.ctx[h]=p)&&(!s.skip_bound&&s.bound[h]&&s.bound[h](p),u&&S2(t,h)),c}):[],s.update(),u=!0,ke(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const h=v2(e.target);s.fragment&&s.fragment.l(h),h.forEach(j)}else s.fragment&&s.fragment.c();e.intro&&K(t.$$.fragment),lt(t,e.target,e.anchor),$d()}$r(l)}class Xt{constructor(){yn(this,"$$");yn(this,"$$set")}$destroy(){st(this,1),this.$destroy=$t}$on(e,n){if(!wd(n))return $t;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!w2(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const T2="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(T2);const C2="modulepreload",E2=function(t){return"/rhythm-vis/"+t},Tu={},yi=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");r=Promise.all(n.map(a=>{if(a=E2(a),a in Tu)return;Tu[a]=!0;const f=a.endsWith(".css"),l=f?'[rel="stylesheet"]':"";if(!!i)for(let h=o.length-1;h>=0;h--){const c=o[h];if(c.href===a&&(!f||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=f?"stylesheet":C2,f||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),f)return new Promise((h,c)=>{u.addEventListener("load",h),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function A2(t){if(t){if(t=new Uint8Array(t.buffer||t),D2(t))return"wav";if(N2(t))return"mp3";if(L2(t))return"flac";if(I2(t))return"m4a";if(R2(t))return"opus";if(F2(t))return"oga";if(P2(t))return"qoa"}}function N2(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function D2(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function F2(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function L2(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function I2(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function R2(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function P2(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let O2=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,i){i==null&&(i=0);for(var r=this._channelData[n],o=i,a=0;o<this.length&&a<e.length;o++,a++)e[a]=r[o]}copyToChannel(e,n,i){var r=this._channelData[n];i||(i=0);for(var o=i,a=0;o<this.length&&a<e.length;o++,a++)r[o]=e[a]}};const U2=globalThis.AudioBuffer||O2;async function B2(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=A2(t);if(!e)throw Error("Cannot detect audio format");if(!ne[e])throw Error("Missing decoder for "+e+" format");return ne[e](t)}const ne={async oga(t){let{decoder:e}=ne.oga;if(e)await e.reset();else{let{OggVorbisDecoder:n}=await yi(()=>import("./index-80X4-PF7.js"),__vite__mapDeps([0,1,2]));await(ne.oga.decoder=e=new n).ready}return t&&wi(await e.decodeFile(t))},async mp3(t){let{decoder:e}=ne.mp3;if(e)await e.reset();else{const{MPEGDecoder:n}=await yi(()=>import("./index-N31zRiPy.js"),__vite__mapDeps([3,1]));await(ne.mp3.decoder=e=new n).ready}return t&&wi(await e.decode(t))},async flac(t){let{decoder:e}=ne.flac;if(e)await e.reset();else{const{FLACDecoder:n}=await yi(()=>import("./index-0IqLv6Dx.js"),__vite__mapDeps([4,1,2]));await(ne.flac.decoder=e=new n).ready}return t&&wi(await e.decode(t))},async opus(t){let{decoder:e}=ne.opus;if(e)await e.reset();else{const{OggOpusDecoder:n}=await yi(()=>import("./index-wuL82X2L.js"),__vite__mapDeps([5,1,2]));await(ne.opus.decoder=e=new n).ready}return t&&wi(await e.decodeFile(t))},async wav(t){let{decode:e}=ne.wav;if(!e){let n=await yi(()=>import("./index-_QbdJGPJ.js").then(i=>i.i),__vite__mapDeps([]));e=ne.wav.decode=n.default.decode}return t&&wi(await e(t))},async qoa(t){let{decode:e}=ne.qoa;return e||(ne.qoa.decode=e=(await yi(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),t&&wi(await e(t))}};function wi({channelData:t,sampleRate:e}){let n=new U2({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let i=0;i<t.length;i++)n.getChannelData(i).set(t[i]);return n}var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Md(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z2=q2;function q2(t,e){e=e||{};var n=t.numberOfChannels,i=t.sampleRate,r=e.float32?3:1,o=r===3?32:16,a;return n===2?a=H2(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),Y2(a,r,i,n,o)}function Y2(t,e,n,i,r){var o=r/8,a=i*o,f=new ArrayBuffer(44+t.length*o),l=new DataView(f);return _o(l,0,"RIFF"),l.setUint32(4,36+t.length*o,!0),_o(l,8,"WAVE"),_o(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,e,!0),l.setUint16(22,i,!0),l.setUint32(24,n,!0),l.setUint32(28,n*a,!0),l.setUint16(32,a,!0),l.setUint16(34,r,!0),_o(l,36,"data"),l.setUint32(40,t.length*o,!0),e===1?V2(l,44,t):W2(l,44,t),f}function H2(t,e){for(var n=t.length+e.length,i=new Float32Array(n),r=0,o=0;r<n;)i[r++]=t[o],i[r++]=e[o],o++;return i}function W2(t,e,n){for(var i=0;i<n.length;i++,e+=4)t.setFloat32(e,n[i],!0)}function V2(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?r*32768:r*32767,!0)}}function _o(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}const G2=Md(z2);function Ii(t=16,e=.5,n=0,i=0,r=!1,o=0){const a=[];for(let f=0;f<t;++f){let l;r?l=f>=n?i:0:l=f===n?i:0,a.push(f*e+o+l)}return a}async function kd(t){const n=await(await fetch(t)).arrayBuffer();return await B2(n)}function Sd(t,e,n=1){const i=e.at(-1)+n,r=t.getChannelData(0),o=new Float32Array(Math.ceil(i*t.sampleRate));for(const a of e){const f=Math.round(a*t.sampleRate);let l=1;for(let s=0;s<r.length;++s)l=Math.max(0,l-2/40100),o[f+s]=r[s]*l}return o}function X2(t,e,n){const i=new AudioBuffer({sampleRate:e,length:t.length});i.copyToChannel(t,0);const r=new Blob([G2(i)],{type:"audio/wav"});n.src=window.URL.createObjectURL(r)}function ds(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function ae(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fa(t){let e,n,i;t.length!==2?(e=ae,n=(f,l)=>ae(t(f),l),i=(f,l)=>t(f)-l):(e=t===ae||t===Wr?t:j2,n=t,i=t);function r(f,l,s=0,u=f.length){if(s<u){if(e(l,l)!==0)return u;do{const h=s+u>>>1;n(f[h],l)<0?s=h+1:u=h}while(s<u)}return s}function o(f,l,s=0,u=f.length){if(s<u){if(e(l,l)!==0)return u;do{const h=s+u>>>1;n(f[h],l)<=0?s=h+1:u=h}while(s<u)}return s}function a(f,l,s=0,u=f.length){const h=r(f,l,s,u-1);return h>s&&i(f[h-1],l)>-i(f[h],l)?h-1:h}return{left:r,center:a,right:o}}function j2(){return 0}function Td(t){return t===null?NaN:+t}function*Z2(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const K2=Fa(ae),Q2=K2.right;Fa(Td).center;const La=Q2;function ps(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function J2(t){return t.length|0}function tb(t){return!(t>0)}function eb(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function nb(t){return e=>t(...e)}function ib(...t){const e=typeof t[t.length-1]=="function"&&nb(t.pop());t=t.map(eb);const n=t.map(J2),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(tb))return o;for(;;){o.push(r.map((f,l)=>t[l][f]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?o.map(e):o;r[a--]=0}}}function rb(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function Ia(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let f of t)(f=e(f,++a,t))!=null&&(f=+f)>=f&&(i=f-r,r+=i/++n,o+=i*(f-r))}if(n>1)return o/(n-1)}function Ra(t,e){const n=Ia(t,e);return n&&Math.sqrt(n)}function ye(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class Jn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=e+o,f=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);f&&(n[i++]=f),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class ti extends Map{constructor(e,n=Ad){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(_l(this,e))}has(e){return super.has(_l(this,e))}set(e,n){return super.set(Cd(this,e),n)}delete(e){return super.delete(Ed(this,e))}}class Pa extends Set{constructor(e,n=Ad){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(_l(this,e))}add(e){return super.add(Cd(this,e))}delete(e){return super.delete(Ed(this,e))}}function _l({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Cd({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Ed({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Ad(t){return t!==null&&typeof t=="object"?t.valueOf():t}function jo(t){return t}function Oa(t,...e){return Ua(t,jo,jo,e)}function Nd(t,...e){return Ua(t,Array.from,jo,e)}function Ai(t,e,...n){return Ua(t,jo,e,n)}function ob(t,e,...n){return Ua(t,Array.from,e,n)}function Ua(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const f=new ti,l=i[a++];let s=-1;for(const u of o){const h=l(u,++s,o),c=f.get(h);c?c.push(u):f.set(h,[u])}for(const[u,h]of f)f.set(u,r(h,a));return e(f)}(t,0)}function ab(t,e){return Array.from(e,n=>t[n])}function Ar(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,o)=>o);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,o)=>{for(const a of e){const f=Zo(a[r],a[o]);if(f)return f}})):(n=t.map(n),i.sort((r,o)=>Zo(n[r],n[o]))),ab(t,i)}return t.sort(Dd(n))}function Dd(t=ae){if(t===ae)return Zo;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Zo(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function ms(t,e,n){return(e.length!==2?Ar(Ai(t,e,n),([i,r],[o,a])=>ae(r,a)||ae(i,o)):Ar(Oa(t,n),([i,r],[o,a])=>e(r,a)||ae(i,o))).map(([i])=>i)}const fb=Math.sqrt(50),lb=Math.sqrt(10),sb=Math.sqrt(2);function Ko(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=fb?10:o>=lb?5:o>=sb?2:1;let f,l,s;return r<0?(s=Math.pow(10,-r)/a,f=Math.round(t*s),l=Math.round(e*s),f/s<t&&++f,l/s>e&&--l,s=-s):(s=Math.pow(10,r)*a,f=Math.round(t/s),l=Math.round(e/s),f*s<t&&++f,l*s>e&&--l),l<f&&.5<=n&&n<2?Ko(t,e,n*2):[f,l,s]}function Nr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,a]=i?Ko(e,t,n):Ko(t,e,n);if(!(o>=r))return[];const f=o-r+1,l=new Array(f);if(i)if(a<0)for(let s=0;s<f;++s)l[s]=(o-s)/-a;else for(let s=0;s<f;++s)l[s]=(o-s)*a;else if(a<0)for(let s=0;s<f;++s)l[s]=(r+s)/-a;else for(let s=0;s<f;++s)l[s]=(r+s)*a;return l}function Qo(t,e,n){return e=+e,t=+t,n=+n,Ko(t,e,n)[2]}function yl(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?Qo(e,t,n):Qo(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function ub(t){return Math.max(1,Math.ceil(Math.log(ps(t))/Math.LN2)+1)}function ce(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function cb(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);return i}function un(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function hb(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);return i}function Fd(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?Zo:Dd(r);i>n;){if(i-n>600){const l=i-n+1,s=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(l-h)/l)*(s-l/2<0?-1:1),d=Math.max(n,Math.floor(e-s*h/l+c)),p=Math.min(i,Math.floor(e+(l-s)*h/l+c));Fd(t,e,d,p,r)}const o=t[e];let a=n,f=i;for(fr(t,n,e),r(t[i],o)>0&&fr(t,n,i);a<f;){for(fr(t,a,f),++a,--f;r(t[a],o)<0;)++a;for(;r(t[f],o)>0;)--f}r(t[n],o)===0?fr(t,n,f):(++f,fr(t,f,i)),f<=e&&(n=f+1),e<=f&&(i=f-1)}return t}function fr(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Ld(t,e=ae){let n,i=!1;if(e.length===1){let r;for(const o of t){const a=e(o);(i?ae(a,r)>0:ae(a,a)===0)&&(n=o,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function Ri(t,e,n){if(t=Float64Array.from(Z2(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return un(t);if(e>=1)return ce(t);var i,r=(i-1)*e,o=Math.floor(r),a=ce(Fd(t,o).subarray(0,o+1)),f=un(t.subarray(o+1));return a+(f-a)*(r-o)}}function db(t,e,n=Td){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t),f=+n(t[o+1],o+1,t);return a+(f-a)*(r-o)}}function pb(t,e,n){const i=ps(t),r=Ri(t,.75)-Ri(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function Id(t,e,n){const i=ps(t),r=Ra(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function Vr(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function wl(t,e){return Ri(t,.5,e)}function*mb(t){for(const e of t)yield*e}function Rd(t){return Array.from(mb(t))}function gb(t,e){const n=new ti;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[o,a]of n)a>r&&(r=a,i=o);return i}function bb(t,e=_b){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function _b(t,e){return[t,e]}function vl(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function Fn(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function Jo(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function yb(t){return t}var Af=1,Nf=2,xl=3,yo=4,Cu=1e-6;function wb(t){return"translate("+t+",0)"}function vb(t){return"translate(0,"+t+")"}function xb(t){return e=>+t(e)}function $b(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Mb(){return!this.__axis}function kb(t,e){var n=[],i=null,r=null,o=6,a=6,f=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===Af||t===yo?-1:1,u=t===yo||t===Nf?"x":"y",h=t===Af||t===xl?wb:vb;function c(d){var p=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):yb),g=Math.max(o,0)+f,w=e.range(),y=+w[0]+l,x=+w[w.length-1]+l,_=(e.bandwidth?$b:xb)(e.copy(),l),$=d.selection?d.selection():d,M=$.selectAll(".domain").data([null]),v=$.selectAll(".tick").data(p,e).order(),S=v.exit(),C=v.enter().append("g").attr("class","tick"),L=v.select("line"),T=v.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),v=v.merge(C),L=L.merge(C.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),T=T.merge(C.append("text").attr("fill","currentColor").attr(u,s*g).attr("dy",t===Af?"0em":t===xl?"0.71em":"0.32em")),d!==$&&(M=M.transition(d),v=v.transition(d),L=L.transition(d),T=T.transition(d),S=S.transition(d).attr("opacity",Cu).attr("transform",function(I){return isFinite(I=_(I))?h(I+l):this.getAttribute("transform")}),C.attr("opacity",Cu).attr("transform",function(I){var D=this.parentNode.__axis;return h((D&&isFinite(D=D(I))?D:_(I))+l)})),S.remove(),M.attr("d",t===yo||t===Nf?a?"M"+s*a+","+y+"H"+l+"V"+x+"H"+s*a:"M"+l+","+y+"V"+x:a?"M"+y+","+s*a+"V"+l+"H"+x+"V"+s*a:"M"+y+","+l+"H"+x),v.attr("opacity",1).attr("transform",function(I){return h(_(I)+l)}),L.attr(u+"2",s*o),T.attr(u,s*g).text(m),$.filter(Mb).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Nf?"start":t===yo?"end":"middle"),$.each(function(){this.__axis=_})}return c.scale=function(d){return arguments.length?(e=d,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),c):n.slice()},c.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),c):i&&i.slice()},c.tickFormat=function(d){return arguments.length?(r=d,c):r},c.tickSize=function(d){return arguments.length?(o=a=+d,c):o},c.tickSizeInner=function(d){return arguments.length?(o=+d,c):o},c.tickSizeOuter=function(d){return arguments.length?(a=+d,c):a},c.tickPadding=function(d){return arguments.length?(f=+d,c):f},c.offset=function(d){return arguments.length?(l=+d,c):l},c}function Sb(t){return kb(xl,t)}var Tb={value:()=>{}};function Pd(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new zo(n)}function zo(t){this._=t}function Cb(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}zo.prototype=Pd.prototype={constructor:zo,on:function(t,e){var n=this._,i=Cb(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=Eb(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=Eu(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Eu(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new zo(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Eb(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Eu(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Tb,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var $l="http://www.w3.org/1999/xhtml";const Pi={svg:"http://www.w3.org/2000/svg",xhtml:$l,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ba(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pi.hasOwnProperty(e)?{space:Pi[e],local:t}:t}function Ab(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$l&&e.documentElement.namespaceURI===$l?e.createElement(t):e.createElementNS(n,t)}}function Nb(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function za(t){var e=Ba(t);return(e.local?Nb:Ab)(e)}function Db(){}function gs(t){return t==null?Db:function(){return this.querySelector(t)}}function Fb(t){typeof t!="function"&&(t=gs(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,f=i[r]=new Array(a),l,s,u=0;u<a;++u)(l=o[u])&&(s=t.call(l,l.__data__,u,o))&&("__data__"in l&&(s.__data__=l.__data__),f[u]=s);return new he(i,this._parents)}function Lb(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ib(){return[]}function Od(t){return t==null?Ib:function(){return this.querySelectorAll(t)}}function Rb(t){return function(){return Lb(t.apply(this,arguments))}}function Pb(t){typeof t=="function"?t=Rb(t):t=Od(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],f=a.length,l,s=0;s<f;++s)(l=a[s])&&(i.push(t.call(l,l.__data__,s,a)),r.push(l));return new he(i,r)}function Ud(t){return function(){return this.matches(t)}}function Bd(t){return function(e){return e.matches(t)}}var Ob=Array.prototype.find;function Ub(t){return function(){return Ob.call(this.children,t)}}function Bb(){return this.firstElementChild}function zb(t){return this.select(t==null?Bb:Ub(typeof t=="function"?t:Bd(t)))}var qb=Array.prototype.filter;function Yb(){return Array.from(this.children)}function Hb(t){return function(){return qb.call(this.children,t)}}function Wb(t){return this.selectAll(t==null?Yb:Hb(typeof t=="function"?t:Bd(t)))}function Vb(t){typeof t!="function"&&(t=Ud(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,f=i[r]=[],l,s=0;s<a;++s)(l=o[s])&&t.call(l,l.__data__,s,o)&&f.push(l);return new he(i,this._parents)}function zd(t){return new Array(t.length)}function Gb(){return new he(this._enter||this._groups.map(zd),this._parents)}function ta(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ta.prototype={constructor:ta,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Xb(t){return function(){return t}}function jb(t,e,n,i,r,o){for(var a=0,f,l=e.length,s=o.length;a<s;++a)(f=e[a])?(f.__data__=o[a],i[a]=f):n[a]=new ta(t,o[a]);for(;a<l;++a)(f=e[a])&&(r[a]=f)}function Zb(t,e,n,i,r,o,a){var f,l,s=new Map,u=e.length,h=o.length,c=new Array(u),d;for(f=0;f<u;++f)(l=e[f])&&(c[f]=d=a.call(l,l.__data__,f,e)+"",s.has(d)?r[f]=l:s.set(d,l));for(f=0;f<h;++f)d=a.call(t,o[f],f,o)+"",(l=s.get(d))?(i[f]=l,l.__data__=o[f],s.delete(d)):n[f]=new ta(t,o[f]);for(f=0;f<u;++f)(l=e[f])&&s.get(c[f])===l&&(r[f]=l)}function Kb(t){return t.__data__}function Qb(t,e){if(!arguments.length)return Array.from(this,Kb);var n=e?Zb:jb,i=this._parents,r=this._groups;typeof t!="function"&&(t=Xb(t));for(var o=r.length,a=new Array(o),f=new Array(o),l=new Array(o),s=0;s<o;++s){var u=i[s],h=r[s],c=h.length,d=Jb(t.call(u,u&&u.__data__,s,i)),p=d.length,m=f[s]=new Array(p),g=a[s]=new Array(p),w=l[s]=new Array(c);n(u,h,m,g,w,d,e);for(var y=0,x=0,_,$;y<p;++y)if(_=m[y]){for(y>=x&&(x=y+1);!($=g[x])&&++x<p;);_._next=$||null}}return a=new he(a,i),a._enter=f,a._exit=l,a}function Jb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function t_(){return new he(this._exit||this._groups.map(zd),this._parents)}function e_(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function n_(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),f=new Array(r),l=0;l<a;++l)for(var s=n[l],u=i[l],h=s.length,c=f[l]=new Array(h),d,p=0;p<h;++p)(d=s[p]||u[p])&&(c[p]=d);for(;l<r;++l)f[l]=n[l];return new he(f,this._parents)}function i_(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function r_(t){t||(t=o_);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],f=a.length,l=r[o]=new Array(f),s,u=0;u<f;++u)(s=a[u])&&(l[u]=s);l.sort(e)}return new he(r,this._parents).order()}function o_(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function a_(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function f_(){return Array.from(this)}function l_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function s_(){let t=0;for(const e of this)++t;return t}function u_(){return!this.node()}function c_(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,f;o<a;++o)(f=r[o])&&t.call(f,f.__data__,o,r);return this}function h_(t){return function(){this.removeAttribute(t)}}function d_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function p_(t,e){return function(){this.setAttribute(t,e)}}function m_(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function g_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function b_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function __(t,e){var n=Ba(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?d_:h_:typeof e=="function"?n.local?b_:g_:n.local?m_:p_)(n,e))}function qd(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function y_(t){return function(){this.style.removeProperty(t)}}function w_(t,e,n){return function(){this.style.setProperty(t,e,n)}}function v_(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function x_(t,e,n){return arguments.length>1?this.each((e==null?y_:typeof e=="function"?v_:w_)(t,e,n??"")):Oi(this.node(),t)}function Oi(t,e){return t.style.getPropertyValue(e)||qd(t).getComputedStyle(t,null).getPropertyValue(e)}function $_(t){return function(){delete this[t]}}function M_(t,e){return function(){this[t]=e}}function k_(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function S_(t,e){return arguments.length>1?this.each((e==null?$_:typeof e=="function"?k_:M_)(t,e)):this.node()[t]}function Yd(t){return t.trim().split(/^|\s+/)}function bs(t){return t.classList||new Hd(t)}function Hd(t){this._node=t,this._names=Yd(t.getAttribute("class")||"")}Hd.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Wd(t,e){for(var n=bs(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Vd(t,e){for(var n=bs(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function T_(t){return function(){Wd(this,t)}}function C_(t){return function(){Vd(this,t)}}function E_(t,e){return function(){(e.apply(this,arguments)?Wd:Vd)(this,t)}}function A_(t,e){var n=Yd(t+"");if(arguments.length<2){for(var i=bs(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?E_:e?T_:C_)(n,e))}function N_(){this.textContent=""}function D_(t){return function(){this.textContent=t}}function F_(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function L_(t){return arguments.length?this.each(t==null?N_:(typeof t=="function"?F_:D_)(t)):this.node().textContent}function I_(){this.innerHTML=""}function R_(t){return function(){this.innerHTML=t}}function P_(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function O_(t){return arguments.length?this.each(t==null?I_:(typeof t=="function"?P_:R_)(t)):this.node().innerHTML}function U_(){this.nextSibling&&this.parentNode.appendChild(this)}function B_(){return this.each(U_)}function z_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q_(){return this.each(z_)}function Y_(t){var e=typeof t=="function"?t:za(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function H_(){return null}function W_(t,e){var n=typeof t=="function"?t:za(t),i=e==null?H_:typeof e=="function"?e:gs(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function V_(){var t=this.parentNode;t&&t.removeChild(this)}function G_(){return this.each(V_)}function X_(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function j_(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Z_(t){return this.select(t?j_:X_)}function K_(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Q_(t){return function(e){t.call(this,e,this.__data__)}}function J_(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function ty(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function ey(t,e,n){return function(){var i=this.__on,r,o=Q_(e);if(i){for(var a=0,f=i.length;a<f;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ny(t,e,n){var i=J_(t+""),r,o=i.length,a;if(arguments.length<2){var f=this.node().__on;if(f){for(var l=0,s=f.length,u;l<s;++l)for(r=0,u=f[l];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(f=e?ey:ty,r=0;r<o;++r)this.each(f(i[r],e,n));return this}function Gd(t,e,n){var i=qd(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function iy(t,e){return function(){return Gd(this,t,e)}}function ry(t,e){return function(){return Gd(this,t,e.apply(this,arguments))}}function oy(t,e){return this.each((typeof e=="function"?ry:iy)(t,e))}function*ay(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var Xd=[null];function he(t,e){this._groups=t,this._parents=e}function Gr(){return new he([[document.documentElement]],Xd)}function fy(){return this}he.prototype=Gr.prototype={constructor:he,select:Fb,selectAll:Pb,selectChild:zb,selectChildren:Wb,filter:Vb,data:Qb,enter:Gb,exit:t_,join:e_,merge:n_,selection:fy,order:i_,sort:r_,call:a_,nodes:f_,node:l_,size:s_,empty:u_,each:c_,attr:__,style:x_,property:S_,classed:A_,text:L_,html:O_,raise:B_,lower:q_,append:Y_,insert:W_,remove:G_,clone:Z_,datum:K_,on:ny,dispatch:oy,[Symbol.iterator]:ay};function Mr(t){return typeof t=="string"?new he([[document.querySelector(t)]],[document.documentElement]):new he([[t]],Xd)}function ly(t){let e;for(;e=t.sourceEvent;)t=e;return t}function sy(t,e){if(t=ly(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ji(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Pn(){}var ei=.7,Ui=1/ei,Ni="\\s*([+-]?\\d+)\\s*",Dr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uy=/^#([0-9a-f]{3,8})$/,cy=new RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),hy=new RegExp(`^rgb\\(${Ve},${Ve},${Ve}\\)$`),dy=new RegExp(`^rgba\\(${Ni},${Ni},${Ni},${Dr}\\)$`),py=new RegExp(`^rgba\\(${Ve},${Ve},${Ve},${Dr}\\)$`),my=new RegExp(`^hsl\\(${Dr},${Ve},${Ve}\\)$`),gy=new RegExp(`^hsla\\(${Dr},${Ve},${Ve},${Dr}\\)$`),Au={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ji(Pn,ni,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Nu,formatHex:Nu,formatHex8:by,formatHsl:_y,formatRgb:Du,toString:Du});function Nu(){return this.rgb().formatHex()}function by(){return this.rgb().formatHex8()}function _y(){return jd(this).formatHsl()}function Du(){return this.rgb().formatRgb()}function ni(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=uy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Fu(e):n===3?new It(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?wo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?wo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cy.exec(t))?new It(e[1],e[2],e[3],1):(e=hy.exec(t))?new It(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=dy.exec(t))?wo(e[1],e[2],e[3],e[4]):(e=py.exec(t))?wo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=my.exec(t))?Ru(e[1],e[2]/100,e[3]/100,1):(e=gy.exec(t))?Ru(e[1],e[2]/100,e[3]/100,e[4]):Au.hasOwnProperty(t)?Fu(Au[t]):t==="transparent"?new It(NaN,NaN,NaN,0):null}function Fu(t){return new It(t>>16&255,t>>8&255,t&255,1)}function wo(t,e,n,i){return i<=0&&(t=e=n=NaN),new It(t,e,n,i)}function _s(t){return t instanceof Pn||(t=ni(t)),t?(t=t.rgb(),new It(t.r,t.g,t.b,t.opacity)):new It}function Ln(t,e,n,i){return arguments.length===1?_s(t):new It(t,e,n,i??1)}function It(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Ji(It,Ln,Xr(Pn,{brighter(t){return t=t==null?Ui:Math.pow(Ui,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ei:Math.pow(ei,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new It(Zn(this.r),Zn(this.g),Zn(this.b),ea(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lu,formatHex:Lu,formatHex8:yy,formatRgb:Iu,toString:Iu}));function Lu(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}`}function yy(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}${Xn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Iu(){const t=ea(this.opacity);return`${t===1?"rgb(":"rgba("}${Zn(this.r)}, ${Zn(this.g)}, ${Zn(this.b)}${t===1?")":`, ${t})`}`}function ea(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xn(t){return t=Zn(t),(t<16?"0":"")+t.toString(16)}function Ru(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ce(t,e,n,i)}function jd(t){if(t instanceof Ce)return new Ce(t.h,t.s,t.l,t.opacity);if(t instanceof Pn||(t=ni(t)),!t)return new Ce;if(t instanceof Ce)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,f=o-r,l=(o+r)/2;return f?(e===o?a=(n-i)/f+(n<i)*6:n===o?a=(i-e)/f+2:a=(e-n)/f+4,f/=l<.5?o+r:2-o-r,a*=60):f=l>0&&l<1?0:a,new Ce(a,f,l,t.opacity)}function Ml(t,e,n,i){return arguments.length===1?jd(t):new Ce(t,e,n,i??1)}function Ce(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ji(Ce,Ml,Xr(Pn,{brighter(t){return t=t==null?Ui:Math.pow(Ui,t),new Ce(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ei:Math.pow(ei,t),new Ce(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new It(Df(t>=240?t-240:t+120,r,i),Df(t,r,i),Df(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ce(Pu(this.h),vo(this.s),vo(this.l),ea(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ea(this.opacity);return`${t===1?"hsl(":"hsla("}${Pu(this.h)}, ${vo(this.s)*100}%, ${vo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Pu(t){return t=(t||0)%360,t<0?t+360:t}function vo(t){return Math.max(0,Math.min(1,t||0))}function Df(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Zd=Math.PI/180,Kd=180/Math.PI,na=18,Qd=.96422,Jd=1,t0=.82521,e0=4/29,Di=6/29,n0=3*Di*Di,wy=Di*Di*Di;function i0(t){if(t instanceof Ge)return new Ge(t.l,t.a,t.b,t.opacity);if(t instanceof fn)return r0(t);t instanceof It||(t=_s(t));var e=Rf(t.r),n=Rf(t.g),i=Rf(t.b),r=Ff((.2225045*e+.7168786*n+.0606169*i)/Jd),o,a;return e===n&&n===i?o=a=r:(o=Ff((.4360747*e+.3850649*n+.1430804*i)/Qd),a=Ff((.0139322*e+.0971045*n+.7141733*i)/t0)),new Ge(116*r-16,500*(o-r),200*(r-a),t.opacity)}function kl(t,e,n,i){return arguments.length===1?i0(t):new Ge(t,e,n,i??1)}function Ge(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}Ji(Ge,kl,Xr(Pn,{brighter(t){return new Ge(this.l+na*(t??1),this.a,this.b,this.opacity)},darker(t){return new Ge(this.l-na*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Qd*Lf(e),t=Jd*Lf(t),n=t0*Lf(n),new It(If(3.1338561*e-1.6168667*t-.4906146*n),If(-.9787684*e+1.9161415*t+.033454*n),If(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Ff(t){return t>wy?Math.pow(t,1/3):t/n0+e0}function Lf(t){return t>Di?t*t*t:n0*(t-e0)}function If(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Rf(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vy(t){if(t instanceof fn)return new fn(t.h,t.c,t.l,t.opacity);if(t instanceof Ge||(t=i0(t)),t.a===0&&t.b===0)return new fn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Kd;return new fn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Sl(t,e,n,i){return arguments.length===1?vy(t):new fn(t,e,n,i??1)}function fn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function r0(t){if(isNaN(t.h))return new Ge(t.l,0,0,t.opacity);var e=t.h*Zd;return new Ge(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ji(fn,Sl,Xr(Pn,{brighter(t){return new fn(this.h,this.c,this.l+na*(t??1),this.opacity)},darker(t){return new fn(this.h,this.c,this.l-na*(t??1),this.opacity)},rgb(){return r0(this).rgb()}}));var o0=-.14861,ys=1.78277,ws=-.29227,qa=-.90649,Fr=1.97294,Ou=Fr*qa,Uu=Fr*ys,Bu=ys*ws-qa*o0;function xy(t){if(t instanceof Kn)return new Kn(t.h,t.s,t.l,t.opacity);t instanceof It||(t=_s(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Bu*i+Ou*e-Uu*n)/(Bu+Ou-Uu),o=i-r,a=(Fr*(n-r)-ws*o)/qa,f=Math.sqrt(a*a+o*o)/(Fr*r*(1-r)),l=f?Math.atan2(a,o)*Kd-120:NaN;return new Kn(l<0?l+360:l,f,r,t.opacity)}function je(t,e,n,i){return arguments.length===1?xy(t):new Kn(t,e,n,i??1)}function Kn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ji(Kn,je,Xr(Pn,{brighter(t){return t=t==null?Ui:Math.pow(Ui,t),new Kn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ei:Math.pow(ei,t),new Kn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Zd,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new It(255*(e+n*(o0*i+ys*r)),255*(e+n*(ws*i+qa*r)),255*(e+n*(Fr*i)),this.opacity)}}));function $y(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function My(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,f=i<e-1?t[i+2]:2*o-r;return $y((n-i/e)*e,a,r,o,f)}}const Ya=t=>()=>t;function a0(t,e){return function(n){return t+n*e}}function ky(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function vs(t,e){var n=e-t;return n?a0(t,n>180||n<-180?n-360*Math.round(n/360):n):Ya(isNaN(t)?e:t)}function Sy(t){return(t=+t)==1?Wt:function(e,n){return n-e?ky(e,n,t):Ya(isNaN(e)?n:e)}}function Wt(t,e){var n=e-t;return n?a0(t,n):Ya(isNaN(t)?e:t)}const ii=function t(e){var n=Sy(e);function i(r,o){var a=n((r=Ln(r)).r,(o=Ln(o)).r),f=n(r.g,o.g),l=n(r.b,o.b),s=Wt(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=f(u),r.b=l(u),r.opacity=s(u),r+""}}return i.gamma=t,i}(1);function Ty(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),o=new Array(n),a,f;for(a=0;a<n;++a)f=Ln(e[a]),i[a]=f.r||0,r[a]=f.g||0,o[a]=f.b||0;return i=t(i),r=t(r),o=t(o),f.opacity=1,function(l){return f.r=i(l),f.g=r(l),f.b=o(l),f+""}}}var Cy=Ty(My);function Ey(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function Ay(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ny(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=jr(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(f){for(a=0;a<i;++a)o[a]=r[a](f);return o}}function Dy(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Yt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Fy(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=jr(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Tl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pf=new RegExp(Tl.source,"g");function Ly(t){return function(){return t}}function Iy(t){return function(e){return t(e)+""}}function f0(t,e){var n=Tl.lastIndex=Pf.lastIndex=0,i,r,o,a=-1,f=[],l=[];for(t=t+"",e=e+"";(i=Tl.exec(t))&&(r=Pf.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),f[a]?f[a]+=o:f[++a]=o),(i=i[0])===(r=r[0])?f[a]?f[a]+=r:f[++a]=r:(f[++a]=null,l.push({i:a,x:Yt(i,r)})),n=Pf.lastIndex;return n<e.length&&(o=e.slice(n),f[a]?f[a]+=o:f[++a]=o),f.length<2?l[0]?Iy(l[0].x):Ly(e):(e=l.length,function(s){for(var u=0,h;u<e;++u)f[(h=l[u]).i]=h.x(s);return f.join("")})}function jr(t,e){var n=typeof e,i;return e==null||n==="boolean"?Ya(e):(n==="number"?Yt:n==="string"?(i=ni(e))?(e=i,ii):f0:e instanceof ni?ii:e instanceof Date?Dy:Ay(e)?Ey:Array.isArray(e)?Ny:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Fy:Yt)(t,e)}function xs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var zu=180/Math.PI,Cl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function l0(t,e,n,i,r,o){var a,f,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,l/=f),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*zu,skewX:Math.atan(l)*zu,scaleX:a,scaleY:f}}var xo;function Ry(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Cl:l0(e.a,e.b,e.c,e.d,e.e,e.f)}function Py(t){return t==null||(xo||(xo=document.createElementNS("http://www.w3.org/2000/svg","g")),xo.setAttribute("transform",t),!(t=xo.transform.baseVal.consolidate()))?Cl:(t=t.matrix,l0(t.a,t.b,t.c,t.d,t.e,t.f))}function s0(t,e,n,i){function r(s){return s.length?s.pop()+" ":""}function o(s,u,h,c,d,p){if(s!==h||u!==c){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:Yt(s,h)},{i:m-2,x:Yt(u,c)})}else(h||c)&&d.push("translate("+h+e+c+n)}function a(s,u,h,c){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),c.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Yt(s,u)})):u&&h.push(r(h)+"rotate("+u+i)}function f(s,u,h,c){s!==u?c.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Yt(s,u)}):u&&h.push(r(h)+"skewX("+u+i)}function l(s,u,h,c,d,p){if(s!==h||u!==c){var m=d.push(r(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Yt(s,h)},{i:m-2,x:Yt(u,c)})}else(h!==1||c!==1)&&d.push(r(d)+"scale("+h+","+c+")")}return function(s,u){var h=[],c=[];return s=t(s),u=t(u),o(s.translateX,s.translateY,u.translateX,u.translateY,h,c),a(s.rotate,u.rotate,h,c),f(s.skewX,u.skewX,h,c),l(s.scaleX,s.scaleY,u.scaleX,u.scaleY,h,c),s=u=null,function(d){for(var p=-1,m=c.length,g;++p<m;)h[(g=c[p]).i]=g.x(d);return h.join("")}}}var Oy=s0(Ry,"px, ","px)","deg)"),Uy=s0(Py,", ",")",")");function By(t){return function(e,n){var i=t((e=Ml(e)).h,(n=Ml(n)).h),r=Wt(e.s,n.s),o=Wt(e.l,n.l),a=Wt(e.opacity,n.opacity);return function(f){return e.h=i(f),e.s=r(f),e.l=o(f),e.opacity=a(f),e+""}}}const zy=By(vs);function qy(t,e){var n=Wt((t=kl(t)).l,(e=kl(e)).l),i=Wt(t.a,e.a),r=Wt(t.b,e.b),o=Wt(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=o(a),t+""}}function Yy(t){return function(e,n){var i=t((e=Sl(e)).h,(n=Sl(n)).h),r=Wt(e.c,n.c),o=Wt(e.l,n.l),a=Wt(e.opacity,n.opacity);return function(f){return e.h=i(f),e.c=r(f),e.l=o(f),e.opacity=a(f),e+""}}}const Hy=Yy(vs);function u0(t){return function e(n){n=+n;function i(r,o){var a=t((r=je(r)).h,(o=je(o)).h),f=Wt(r.s,o.s),l=Wt(r.l,o.l),s=Wt(r.opacity,o.opacity);return function(u){return r.h=a(u),r.s=f(u),r.l=l(Math.pow(u,n)),r.opacity=s(u),r+""}}return i.gamma=e,i}(1)}u0(vs);var $s=u0(Wt);function Ha(t,e){e===void 0&&(e=t,t=jr);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(a){var f=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[f](a-f)}}function De(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Bi=0,pr=0,lr=0,c0=1e3,ia,mr,ra=0,ri=0,Wa=0,Lr=typeof performance=="object"&&performance.now?performance:Date,h0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ms(){return ri||(h0(Wy),ri=Lr.now()+Wa)}function Wy(){ri=0}function oa(){this._call=this._time=this._next=null}oa.prototype=d0.prototype={constructor:oa,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ms():+n)+(e==null?0:+e),!this._next&&mr!==this&&(mr?mr._next=this:ia=this,mr=this),this._call=t,this._time=n,El()},stop:function(){this._call&&(this._call=null,this._time=1/0,El())}};function d0(t,e,n){var i=new oa;return i.restart(t,e,n),i}function Vy(){Ms(),++Bi;for(var t=ia,e;t;)(e=ri-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Bi}function qu(){ri=(ra=Lr.now())+Wa,Bi=pr=0;try{Vy()}finally{Bi=0,Xy(),ri=0}}function Gy(){var t=Lr.now(),e=t-ra;e>c0&&(Wa-=e,ra=t)}function Xy(){for(var t,e=ia,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ia=n);mr=t,El(i)}function El(t){if(!Bi){pr&&(pr=clearTimeout(pr));var e=t-ri;e>24?(t<1/0&&(pr=setTimeout(qu,t-Lr.now()-Wa)),lr&&(lr=clearInterval(lr))):(lr||(ra=Lr.now(),lr=setInterval(Gy,c0)),Bi=1,h0(qu))}}function Yu(t,e,n){var i=new oa;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var jy=Pd("start","end","cancel","interrupt"),Zy=[],p0=0,Hu=1,Al=2,qo=3,Wu=4,Nl=5,Yo=6;function Va(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Ky(t,n,{name:e,index:i,group:r,on:jy,tween:Zy,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:p0})}function ks(t,e){var n=Re(t,e);if(n.state>p0)throw new Error("too late; already scheduled");return n}function Ke(t,e){var n=Re(t,e);if(n.state>qo)throw new Error("too late; already running");return n}function Re(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ky(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=d0(o,0,n.time);function o(s){n.state=Hu,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,h,c,d;if(n.state!==Hu)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===qo)return Yu(a);d.state===Wu?(d.state=Yo,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=Yo,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(Yu(function(){n.state===qo&&(n.state=Wu,n.timer.restart(f,n.delay,n.time),f(s))}),n.state=Al,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Al){for(n.state=qo,r=new Array(c=n.tween.length),u=0,h=-1;u<c;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function f(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(l),n.state=Nl,1),h=-1,c=r.length;++h<c;)r[h].call(t,u);n.state===Nl&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Yo,n.timer.stop(),delete i[e];for(var s in i)return;delete t.__transition}}function Qy(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>Al&&i.state<Nl,i.state=Yo,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function Jy(t){return this.each(function(){Qy(this,t)})}function tw(t,e){var n,i;return function(){var r=Ke(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,f=i.length;a<f;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function ew(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Ke(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var f={name:e,value:n},l=0,s=r.length;l<s;++l)if(r[l].name===e){r[l]=f;break}l===s&&r.push(f)}o.tween=r}}function nw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Re(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?tw:ew)(n,t,e))}function Ss(t,e,n){var i=t._id;return t.each(function(){var r=Ke(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Re(r,i).value[e]}}function m0(t,e){var n;return(typeof e=="number"?Yt:e instanceof ni?ii:(n=ni(e))?(e=n,ii):f0)(t,e)}function iw(t){return function(){this.removeAttribute(t)}}function rw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ow(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function aw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function fw(t,e,n){var i,r,o;return function(){var a,f=n(this),l;return f==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=f+"",a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,f)))}}function lw(t,e,n){var i,r,o;return function(){var a,f=n(this),l;return f==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=f+"",a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,f)))}}function sw(t,e){var n=Ba(t),i=n==="transform"?Uy:m0;return this.attrTween(t,typeof e=="function"?(n.local?lw:fw)(n,i,Ss(this,"attr."+t,e)):e==null?(n.local?rw:iw)(n):(n.local?aw:ow)(n,i,e))}function uw(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function cw(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function hw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&cw(t,o)),n}return r._value=e,r}function dw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&uw(t,o)),n}return r._value=e,r}function pw(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Ba(t);return this.tween(n,(i.local?hw:dw)(i,e))}function mw(t,e){return function(){ks(this,t).delay=+e.apply(this,arguments)}}function gw(t,e){return e=+e,function(){ks(this,t).delay=e}}function bw(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mw:gw)(e,t)):Re(this.node(),e).delay}function _w(t,e){return function(){Ke(this,t).duration=+e.apply(this,arguments)}}function yw(t,e){return e=+e,function(){Ke(this,t).duration=e}}function ww(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?_w:yw)(e,t)):Re(this.node(),e).duration}function vw(t,e){if(typeof e!="function")throw new Error;return function(){Ke(this,t).ease=e}}function xw(t){var e=this._id;return arguments.length?this.each(vw(e,t)):Re(this.node(),e).ease}function $w(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ke(this,t).ease=n}}function Mw(t){if(typeof t!="function")throw new Error;return this.each($w(this._id,t))}function kw(t){typeof t!="function"&&(t=Ud(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,f=i[r]=[],l,s=0;s<a;++s)(l=o[s])&&t.call(l,l.__data__,s,o)&&f.push(l);return new cn(i,this._parents,this._name,this._id)}function Sw(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),f=0;f<o;++f)for(var l=e[f],s=n[f],u=l.length,h=a[f]=new Array(u),c,d=0;d<u;++d)(c=l[d]||s[d])&&(h[d]=c);for(;f<i;++f)a[f]=e[f];return new cn(a,this._parents,this._name,this._id)}function Tw(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Cw(t,e,n){var i,r,o=Tw(e)?ks:Ke;return function(){var a=o(this,t),f=a.on;f!==i&&(r=(i=f).copy()).on(e,n),a.on=r}}function Ew(t,e){var n=this._id;return arguments.length<2?Re(this.node(),n).on.on(t):this.each(Cw(n,t,e))}function Aw(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Nw(){return this.on("end.remove",Aw(this._id))}function Dw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=gs(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var f=i[a],l=f.length,s=o[a]=new Array(l),u,h,c=0;c<l;++c)(u=f[c])&&(h=t.call(u,u.__data__,c,f))&&("__data__"in u&&(h.__data__=u.__data__),s[c]=h,Va(s[c],e,n,c,s,Re(u,n)));return new cn(o,this._parents,e,n)}function Fw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Od(t));for(var i=this._groups,r=i.length,o=[],a=[],f=0;f<r;++f)for(var l=i[f],s=l.length,u,h=0;h<s;++h)if(u=l[h]){for(var c=t.call(u,u.__data__,h,l),d,p=Re(u,n),m=0,g=c.length;m<g;++m)(d=c[m])&&Va(d,e,n,m,c,p);o.push(c),a.push(u)}return new cn(o,a,e,n)}var Lw=Gr.prototype.constructor;function Iw(){return new Lw(this._groups,this._parents)}function Rw(t,e){var n,i,r;return function(){var o=Oi(this,t),a=(this.style.removeProperty(t),Oi(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function g0(t){return function(){this.style.removeProperty(t)}}function Pw(t,e,n){var i,r=n+"",o;return function(){var a=Oi(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function Ow(t,e,n){var i,r,o;return function(){var a=Oi(this,t),f=n(this),l=f+"";return f==null&&(l=f=(this.style.removeProperty(t),Oi(this,t))),a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,f))}}function Uw(t,e){var n,i,r,o="style."+e,a="end."+o,f;return function(){var l=Ke(this,t),s=l.on,u=l.value[o]==null?f||(f=g0(e)):void 0;(s!==n||r!==u)&&(i=(n=s).copy()).on(a,r=u),l.on=i}}function Bw(t,e,n){var i=(t+="")=="transform"?Oy:m0;return e==null?this.styleTween(t,Rw(t,i)).on("end.style."+t,g0(t)):typeof e=="function"?this.styleTween(t,Ow(t,i,Ss(this,"style."+t,e))).each(Uw(this._id,t)):this.styleTween(t,Pw(t,i,e),n).on("end.style."+t,null)}function zw(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function qw(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&zw(t,a,n)),i}return o._value=e,o}function Yw(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,qw(t,e,n??""))}function Hw(t){return function(){this.textContent=t}}function Ww(t){return function(){var e=t(this);this.textContent=e??""}}function Vw(t){return this.tween("text",typeof t=="function"?Ww(Ss(this,"text",t)):Hw(t==null?"":t+""))}function Gw(t){return function(e){this.textContent=t.call(this,e)}}function Xw(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Gw(r)),e}return i._value=t,i}function jw(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Xw(t))}function Zw(){for(var t=this._name,e=this._id,n=b0(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],f=a.length,l,s=0;s<f;++s)if(l=a[s]){var u=Re(l,e);Va(l,t,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new cn(i,this._parents,t,n)}function Kw(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var f={value:a},l={value:function(){--r===0&&o()}};n.each(function(){var s=Ke(this,i),u=s.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(l)),s.on=e}),r===0&&o()})}var Qw=0;function cn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function b0(){return++Qw}var Je=Gr.prototype;cn.prototype={constructor:cn,select:Dw,selectAll:Fw,selectChild:Je.selectChild,selectChildren:Je.selectChildren,filter:kw,merge:Sw,selection:Iw,transition:Zw,call:Je.call,nodes:Je.nodes,node:Je.node,size:Je.size,empty:Je.empty,each:Je.each,on:Ew,attr:sw,attrTween:pw,style:Bw,styleTween:Yw,text:Vw,textTween:jw,remove:Nw,tween:nw,delay:bw,duration:ww,ease:xw,easeVarying:Mw,end:Kw,[Symbol.iterator]:Je[Symbol.iterator]};function Jw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var tv={time:null,delay:0,duration:250,ease:Jw};function ev(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function nv(t){var e,n;t instanceof cn?(e=t._id,t=t._name):(e=b0(),(n=tv).time=Ms(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],f=a.length,l,s=0;s<f;++s)(l=a[s])&&Va(l,t,e,s,a,n||ev(l,e));return new cn(i,this._parents,t,e)}Gr.prototype.interrupt=Jy;Gr.prototype.transition=nv;const Dl=Math.PI,Fl=2*Dl,Wn=1e-6,iv=Fl-Wn;function _0(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function rv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return _0;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class y0{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?_0:rv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,f=this._y1,l=i-e,s=r-n,u=a-e,h=f-n,c=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(c>Wn)if(!(Math.abs(h*l-s*u)>Wn)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=i-a,p=r-f,m=l*l+s*s,g=d*d+p*p,w=Math.sqrt(m),y=Math.sqrt(c),x=o*Math.tan((Dl-Math.acos((m+c-g)/(2*w*y)))/2),_=x/y,$=x/w;Math.abs(_-1)>Wn&&this._append`L${e+_*u},${n+_*h}`,this._append`A${o},${o},0,0,${+(h*d>u*p)},${this._x1=e+$*l},${this._y1=n+$*s}`}}arc(e,n,i,r,o,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let f=i*Math.cos(r),l=i*Math.sin(r),s=e+f,u=n+l,h=1^a,c=a?r-o:o-r;this._x1===null?this._append`M${s},${u}`:(Math.abs(this._x1-s)>Wn||Math.abs(this._y1-u)>Wn)&&this._append`L${s},${u}`,i&&(c<0&&(c=c%Fl+Fl),c>iv?this._append`A${i},${i},0,1,${h},${e-f},${n-l}A${i},${i},0,1,${h},${this._x1=s},${this._y1=u}`:c>Wn&&this._append`A${i},${i},0,${+(c>=Dl)},${h},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Mn(t=3){return new y0(+t)}function ov(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function aa(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function zi(t){return t=aa(Math.abs(t)),t?t[1]:NaN}function av(t,e){return function(n,i){for(var r=n.length,o=[],a=0,f=t[0],l=0;r>0&&f>0&&(l+f+1>i&&(f=Math.max(1,i-l)),o.push(n.substring(r-=f,r+f)),!((l+=f+1)>i));)f=t[a=(a+1)%t.length];return o.reverse().join(e)}}function fv(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var lv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ir(t){if(!(e=lv.exec(t)))throw new Error("invalid format: "+t);var e;return new Ts({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ir.prototype=Ts.prototype;function Ts(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ts.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sv(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var w0;function uv(t,e){var n=aa(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(w0=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+aa(t,Math.max(0,e+o-1))[0]}function Vu(t,e){var n=aa(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Gu={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ov,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Vu(t*100,e),r:Vu,s:uv,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Xu(t){return t}var ju=Array.prototype.map,Zu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function cv(t){var e=t.grouping===void 0||t.thousands===void 0?Xu:av(ju.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Xu:fv(ju.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function s(h){h=Ir(h);var c=h.fill,d=h.align,p=h.sign,m=h.symbol,g=h.zero,w=h.width,y=h.comma,x=h.precision,_=h.trim,$=h.type;$==="n"?(y=!0,$="g"):Gu[$]||(x===void 0&&(x=12),_=!0,$="g"),(g||c==="0"&&d==="=")&&(g=!0,c="0",d="=");var M=m==="$"?n:m==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",v=m==="$"?i:/[%p]/.test($)?a:"",S=Gu[$],C=/[defgprs%]/.test($);x=x===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function L(T){var I=M,D=v,H,E,R;if($==="c")D=S(T)+D,T="";else{T=+T;var N=T<0||1/T<0;if(T=isNaN(T)?l:S(Math.abs(T),x),_&&(T=sv(T)),N&&+T==0&&p!=="+"&&(N=!1),I=(N?p==="("?p:f:p==="-"||p==="("?"":p)+I,D=($==="s"?Zu[8+w0/3]:"")+D+(N&&p==="("?")":""),C){for(H=-1,E=T.length;++H<E;)if(R=T.charCodeAt(H),48>R||R>57){D=(R===46?r+T.slice(H+1):T.slice(H))+D,T=T.slice(0,H);break}}}y&&!g&&(T=e(T,1/0));var V=I.length+T.length+D.length,W=V<w?new Array(w-V+1).join(c):"";switch(y&&g&&(T=e(W+T,W.length?w-D.length:1/0),W=""),d){case"<":T=I+T+D+W;break;case"=":T=I+W+T+D;break;case"^":T=W.slice(0,V=W.length>>1)+I+T+D+W.slice(V);break;default:T=W+I+T+D;break}return o(T)}return L.toString=function(){return h+""},L}function u(h,c){var d=s((h=Ir(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(zi(c)/3)))*3,m=Math.pow(10,-p),g=Zu[8+p/3];return function(w){return d(m*w)+g}}return{format:s,formatPrefix:u}}var $o,tr,v0;hv({thousands:",",grouping:[3],currency:["$",""]});function hv(t){return $o=cv(t),tr=$o.format,v0=$o.formatPrefix,$o}function dv(t){return Math.max(0,-zi(Math.abs(t)))}function pv(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zi(e)/3)))*3-zi(Math.abs(t)))}function mv(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zi(e)-zi(t))+1}var bt=1e-6,x0=1e-12,wt=Math.PI,Ct=wt/2,Ku=wt/4,de=wt*2,Zt=180/wt,Tt=wt/180,xt=Math.abs,er=Math.atan,hn=Math.atan2,yt=Math.cos,$0=Math.exp,fa=Math.log,Of=Math.pow,gt=Math.sin,we=Math.sign||function(t){return t>0?1:t<0?-1:0},le=Math.sqrt,Cs=Math.tan;function M0(t){return t>1?0:t<-1?wt:Math.acos(t)}function Me(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function ve(){}function la(t,e){t&&Ju.hasOwnProperty(t.type)&&Ju[t.type](t,e)}var Qu={Feature:function(t,e){la(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)la(n[i].geometry,e)}},Ju={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ll(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ll(n[i],e,0)},Polygon:function(t,e){tc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)tc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)la(n[i],e)}};function Ll(t,e,n){var i=-1,r=t.length-n,o;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function tc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ll(t[n],e,1);e.polygonEnd()}function Vn(t,e){t&&Qu.hasOwnProperty(t.type)?Qu[t.type](t,e):la(t,e)}function Il(t){return[hn(t[1],t[0]),Me(t[2])]}function qi(t){var e=t[0],n=t[1],i=yt(n);return[i*yt(e),i*gt(e),gt(n)]}function Mo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function sa(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Uf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ko(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Rl(t){var e=le(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Pl(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function Ol(t,e){return xt(t)>wt&&(t-=Math.round(t/de)*de),[t,e]}Ol.invert=Ol;function k0(t,e,n){return(t%=de)?e||n?Pl(nc(t),ic(e,n)):nc(t):e||n?ic(e,n):Ol}function ec(t){return function(e,n){return e+=t,xt(e)>wt&&(e-=Math.round(e/de)*de),[e,n]}}function nc(t){var e=ec(t);return e.invert=ec(-t),e}function ic(t,e){var n=yt(t),i=gt(t),r=yt(e),o=gt(e);function a(f,l){var s=yt(l),u=yt(f)*s,h=gt(f)*s,c=gt(l),d=c*n+u*i;return[hn(h*r-d*o,u*n-c*i),Me(d*r+h*o)]}return a.invert=function(f,l){var s=yt(l),u=yt(f)*s,h=gt(f)*s,c=gt(l),d=c*r-h*o;return[hn(h*r+c*o,u*n+d*i),Me(d*n-u*i)]},a}function gv(t){t=k0(t[0]*Tt,t[1]*Tt,t.length>2?t[2]*Tt:0);function e(n){return n=t(n[0]*Tt,n[1]*Tt),n[0]*=Zt,n[1]*=Zt,n}return e.invert=function(n){return n=t.invert(n[0]*Tt,n[1]*Tt),n[0]*=Zt,n[1]*=Zt,n},e}function bv(t,e,n,i,r,o){if(n){var a=yt(e),f=gt(e),l=i*n;r==null?(r=e+i*de,o=e-l/2):(r=rc(a,r),o=rc(a,o),(i>0?r<o:r>o)&&(r+=i*de));for(var s,u=r;i>0?u>o:u<o;u-=l)s=Il([a,-f*yt(u),-f*gt(u)]),t.point(s[0],s[1])}}function rc(t,e){e=qi(e),e[0]-=t,Rl(e);var n=M0(-e[1]);return((-e[2]<0?-n:n)+de-bt)%de}function S0(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:ve,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Ho(t,e){return xt(t[0]-e[0])<bt&&xt(t[1]-e[1])<bt}function So(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function T0(t,e,n,i,r){var o=[],a=[],f,l;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],w=p[m],y;if(Ho(g,w)){if(!g[2]&&!w[2]){for(r.lineStart(),f=0;f<m;++f)r.point((g=p[f])[0],g[1]);r.lineEnd();return}w[0]+=2*bt}o.push(y=new So(g,p,null,!0)),a.push(y.o=new So(g,null,y,!1)),o.push(y=new So(w,p,null,!1)),a.push(y.o=new So(w,null,y,!0))}}),!!o.length){for(a.sort(e),oc(o),oc(a),f=0,l=a.length;f<l;++f)a[f].e=n=!n;for(var s=o[0],u,h;;){for(var c=s,d=!0;c.v;)if((c=c.n)===s)return;u=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(d)for(f=0,l=u.length;f<l;++f)r.point((h=u[f])[0],h[1]);else i(c.x,c.n.x,1,r);c=c.n}else{if(d)for(u=c.p.z,f=u.length-1;f>=0;--f)r.point((h=u[f])[0],h[1]);else i(c.x,c.p.x,-1,r);c=c.p}c=c.o,u=c.z,d=!d}while(!c.v);r.lineEnd()}}}function oc(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Bf(t){return xt(t[0])<=wt?t[0]:we(t[0])*((xt(t[0])+wt)%de-wt)}function _v(t,e){var n=Bf(e),i=e[1],r=gt(i),o=[gt(n),-yt(n),0],a=0,f=0,l=new Jn;r===1?i=Ct+bt:r===-1&&(i=-Ct-bt);for(var s=0,u=t.length;s<u;++s)if(c=(h=t[s]).length)for(var h,c,d=h[c-1],p=Bf(d),m=d[1]/2+Ku,g=gt(m),w=yt(m),y=0;y<c;++y,p=_,g=M,w=v,d=x){var x=h[y],_=Bf(x),$=x[1]/2+Ku,M=gt($),v=yt($),S=_-p,C=S>=0?1:-1,L=C*S,T=L>wt,I=g*M;if(l.add(hn(I*C*gt(L),w*v+I*yt(L))),a+=T?S+C*de:S,T^p>=n^_>=n){var D=sa(qi(d),qi(x));Rl(D);var H=sa(o,D);Rl(H);var E=(T^S>=0?-1:1)*Me(H[2]);(i>E||i===E&&(D[0]||D[1]))&&(f+=T^S>=0?1:-1)}}return(a<-bt||a<bt&&l<-x0)^f&1}function C0(t,e,n,i){return function(r){var o=e(r),a=S0(),f=e(a),l=!1,s,u,h,c={point:d,lineStart:m,lineEnd:g,polygonStart:function(){c.point=w,c.lineStart=y,c.lineEnd=x,u=[],s=[]},polygonEnd:function(){c.point=d,c.lineStart=m,c.lineEnd=g,u=Rd(u);var _=_v(s,i);u.length?(l||(r.polygonStart(),l=!0),T0(u,wv,_,n,r)):_&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(_,$){t(_,$)&&r.point(_,$)}function p(_,$){o.point(_,$)}function m(){c.point=p,o.lineStart()}function g(){c.point=d,o.lineEnd()}function w(_,$){h.push([_,$]),f.point(_,$)}function y(){f.lineStart(),h=[]}function x(){w(h[0][0],h[0][1]),f.lineEnd();var _=f.clean(),$=a.result(),M,v=$.length,S,C,L;if(h.pop(),s.push(h),h=null,!!v){if(_&1){if(C=$[0],(S=C.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),M=0;M<S;++M)r.point((L=C[M])[0],L[1]);r.lineEnd()}return}v>1&&_&2&&$.push($.pop().concat($.shift())),u.push($.filter(yv))}}return c}}function yv(t){return t.length>1}function wv(t,e){return((t=t.x)[0]<0?t[1]-Ct-bt:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-bt:Ct-e[1])}const ac=C0(function(){return!0},vv,$v,[-wt,-Ct]);function vv(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var f=o>0?wt:-wt,l=xt(o-e);xt(l-wt)<bt?(t.point(e,n=(n+a)/2>0?Ct:-Ct),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(o,n),r=0):i!==f&&l>=wt&&(xt(e-i)<bt&&(e-=i*bt),xt(o-f)<bt&&(o-=f*bt),n=xv(e,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(f,n),r=0),t.point(e=o,n=a),i=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function xv(t,e,n,i){var r,o,a=gt(t-n);return xt(a)>bt?er((gt(e)*(o=yt(i))*gt(n)-gt(i)*(r=yt(e))*gt(t))/(r*o*a)):(e+i)/2}function $v(t,e,n,i){var r;if(t==null)r=n*Ct,i.point(-wt,r),i.point(0,r),i.point(wt,r),i.point(wt,0),i.point(wt,-r),i.point(0,-r),i.point(-wt,-r),i.point(-wt,0),i.point(-wt,r);else if(xt(t[0]-e[0])>bt){var o=t[0]<e[0]?wt:-wt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function Mv(t){var e=yt(t),n=6*Tt,i=e>0,r=xt(e)>bt;function o(u,h,c,d){bv(d,t,n,c,u,h)}function a(u,h){return yt(u)*yt(h)>e}function f(u){var h,c,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(g,w){var y=[g,w],x,_=a(g,w),$=i?_?0:s(g,w):_?s(g+(g<0?wt:-wt),w):0;if(!h&&(p=d=_)&&u.lineStart(),_!==d&&(x=l(h,y),(!x||Ho(h,x)||Ho(y,x))&&(y[2]=1)),_!==d)m=0,_?(u.lineStart(),x=l(y,h),u.point(x[0],x[1])):(x=l(h,y),u.point(x[0],x[1],2),u.lineEnd()),h=x;else if(r&&h&&i^_){var M;!($&c)&&(M=l(y,h,!0))&&(m=0,i?(u.lineStart(),u.point(M[0][0],M[0][1]),u.point(M[1][0],M[1][1]),u.lineEnd()):(u.point(M[1][0],M[1][1]),u.lineEnd(),u.lineStart(),u.point(M[0][0],M[0][1],3)))}_&&(!h||!Ho(h,y))&&u.point(y[0],y[1]),h=y,d=_,c=$},lineEnd:function(){d&&u.lineEnd(),h=null},clean:function(){return m|(p&&d)<<1}}}function l(u,h,c){var d=qi(u),p=qi(h),m=[1,0,0],g=sa(d,p),w=Mo(g,g),y=g[0],x=w-y*y;if(!x)return!c&&u;var _=e*w/x,$=-e*y/x,M=sa(m,g),v=ko(m,_),S=ko(g,$);Uf(v,S);var C=M,L=Mo(v,C),T=Mo(C,C),I=L*L-T*(Mo(v,v)-1);if(!(I<0)){var D=le(I),H=ko(C,(-L-D)/T);if(Uf(H,v),H=Il(H),!c)return H;var E=u[0],R=h[0],N=u[1],V=h[1],W;R<E&&(W=E,E=R,R=W);var G=R-E,A=xt(G-wt)<bt,Y=A||G<bt;if(!A&&V<N&&(W=N,N=V,V=W),Y?A?N+V>0^H[1]<(xt(H[0]-E)<bt?N:V):N<=H[1]&&H[1]<=V:G>wt^(E<=H[0]&&H[0]<=R)){var X=ko(C,(-L+D)/T);return Uf(X,v),[H,Il(X)]}}}function s(u,h){var c=i?t:wt-t,d=0;return u<-c?d|=1:u>c&&(d|=2),h<-c?d|=4:h>c&&(d|=8),d}return C0(a,f,o,i?[0,-t]:[-wt,t-wt])}function kv(t,e,n,i,r,o){var a=t[0],f=t[1],l=e[0],s=e[1],u=0,h=1,c=l-a,d=s-f,p;if(p=n-a,!(!c&&p>0)){if(p/=c,c<0){if(p<u)return;p<h&&(h=p)}else if(c>0){if(p>h)return;p>u&&(u=p)}if(p=r-a,!(!c&&p<0)){if(p/=c,c<0){if(p>h)return;p>u&&(u=p)}else if(c>0){if(p<u)return;p<h&&(h=p)}if(p=i-f,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>u&&(u=p)}if(p=o-f,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<h&&(h=p)}return u>0&&(t[0]=a+u*c,t[1]=f+u*d),h<1&&(e[0]=a+h*c,e[1]=f+h*d),!0}}}}}var gr=1e9,To=-gr;function E0(t,e,n,i){function r(s,u){return t<=s&&s<=n&&e<=u&&u<=i}function o(s,u,h,c){var d=0,p=0;if(s==null||(d=a(s,h))!==(p=a(u,h))||l(s,u)<0^h>0)do c.point(d===0||d===3?t:n,d>1?i:e);while((d=(d+h+4)%4)!==p);else c.point(u[0],u[1])}function a(s,u){return xt(s[0]-t)<bt?u>0?0:3:xt(s[0]-n)<bt?u>0?2:1:xt(s[1]-e)<bt?u>0?1:0:u>0?3:2}function f(s,u){return l(s.x,u.x)}function l(s,u){var h=a(s,1),c=a(u,1);return h!==c?h-c:h===0?u[1]-s[1]:h===1?s[0]-u[0]:h===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,h=S0(),c,d,p,m,g,w,y,x,_,$,M,v={point:S,lineStart:I,lineEnd:D,polygonStart:L,polygonEnd:T};function S(E,R){r(E,R)&&u.point(E,R)}function C(){for(var E=0,R=0,N=d.length;R<N;++R)for(var V=d[R],W=1,G=V.length,A=V[0],Y,X,nt=A[0],J=A[1];W<G;++W)Y=nt,X=J,A=V[W],nt=A[0],J=A[1],X<=i?J>i&&(nt-Y)*(i-X)>(J-X)*(t-Y)&&++E:J<=i&&(nt-Y)*(i-X)<(J-X)*(t-Y)&&--E;return E}function L(){u=h,c=[],d=[],M=!0}function T(){var E=C(),R=M&&E,N=(c=Rd(c)).length;(R||N)&&(s.polygonStart(),R&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),N&&T0(c,f,E,o,s),s.polygonEnd()),u=s,c=d=p=null}function I(){v.point=H,d&&d.push(p=[]),$=!0,_=!1,y=x=NaN}function D(){c&&(H(m,g),w&&_&&h.rejoin(),c.push(h.result())),v.point=S,_&&u.lineEnd()}function H(E,R){var N=r(E,R);if(d&&p.push([E,R]),$)m=E,g=R,w=N,$=!1,N&&(u.lineStart(),u.point(E,R));else if(N&&_)u.point(E,R);else{var V=[y=Math.max(To,Math.min(gr,y)),x=Math.max(To,Math.min(gr,x))],W=[E=Math.max(To,Math.min(gr,E)),R=Math.max(To,Math.min(gr,R))];kv(V,W,t,e,n,i)?(_||(u.lineStart(),u.point(V[0],V[1])),u.point(W[0],W[1]),N||u.lineEnd(),M=!1):N&&(u.lineStart(),u.point(E,R),M=!1)}y=E,x=R,_=N}return v}}const Ul=t=>t;var zf=new Jn,Bl=new Jn,A0,N0,zl,ql,$n={point:ve,lineStart:ve,lineEnd:ve,polygonStart:function(){$n.lineStart=Sv,$n.lineEnd=Cv},polygonEnd:function(){$n.lineStart=$n.lineEnd=$n.point=ve,zf.add(xt(Bl)),Bl=new Jn},result:function(){var t=zf/2;return zf=new Jn,t}};function Sv(){$n.point=Tv}function Tv(t,e){$n.point=D0,A0=zl=t,N0=ql=e}function D0(t,e){Bl.add(ql*t-zl*e),zl=t,ql=e}function Cv(){D0(A0,N0)}const fc=$n;var Yi=1/0,ua=Yi,Rr=-Yi,ca=Rr,Ev={point:Av,lineStart:ve,lineEnd:ve,polygonStart:ve,polygonEnd:ve,result:function(){var t=[[Yi,ua],[Rr,ca]];return Rr=ca=-(ua=Yi=1/0),t}};function Av(t,e){t<Yi&&(Yi=t),t>Rr&&(Rr=t),e<ua&&(ua=e),e>ca&&(ca=e)}const ha=Ev;var Yl=0,Hl=0,br=0,da=0,pa=0,Si=0,Wl=0,Vl=0,_r=0,F0,L0,qe,Ye,Ee={point:oi,lineStart:lc,lineEnd:sc,polygonStart:function(){Ee.lineStart=Fv,Ee.lineEnd=Lv},polygonEnd:function(){Ee.point=oi,Ee.lineStart=lc,Ee.lineEnd=sc},result:function(){var t=_r?[Wl/_r,Vl/_r]:Si?[da/Si,pa/Si]:br?[Yl/br,Hl/br]:[NaN,NaN];return Yl=Hl=br=da=pa=Si=Wl=Vl=_r=0,t}};function oi(t,e){Yl+=t,Hl+=e,++br}function lc(){Ee.point=Nv}function Nv(t,e){Ee.point=Dv,oi(qe=t,Ye=e)}function Dv(t,e){var n=t-qe,i=e-Ye,r=le(n*n+i*i);da+=r*(qe+t)/2,pa+=r*(Ye+e)/2,Si+=r,oi(qe=t,Ye=e)}function sc(){Ee.point=oi}function Fv(){Ee.point=Iv}function Lv(){I0(F0,L0)}function Iv(t,e){Ee.point=I0,oi(F0=qe=t,L0=Ye=e)}function I0(t,e){var n=t-qe,i=e-Ye,r=le(n*n+i*i);da+=r*(qe+t)/2,pa+=r*(Ye+e)/2,Si+=r,r=Ye*t-qe*e,Wl+=r*(qe+t),Vl+=r*(Ye+e),_r+=r*3,oi(qe=t,Ye=e)}const uc=Ee;function R0(t){this._context=t}R0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,de);break}}},result:ve};var Gl=new Jn,qf,P0,O0,yr,wr,ma={point:ve,lineStart:function(){ma.point=Rv},lineEnd:function(){qf&&U0(P0,O0),ma.point=ve},polygonStart:function(){qf=!0},polygonEnd:function(){qf=null},result:function(){var t=+Gl;return Gl=new Jn,t}};function Rv(t,e){ma.point=U0,P0=yr=t,O0=wr=e}function U0(t,e){yr-=t,wr-=e,Gl.add(le(yr*yr+wr*wr)),yr=t,wr=e}const cc=ma;let hc,ga,dc,pc;class mc{constructor(e){this._append=e==null?B0:Pv(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==dc||this._append!==ga){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,dc=i,ga=this._append,pc=this._,this._=r}this._+=pc;break}}}result(){const e=this._;return this._="",e.length?e:null}}function B0(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Pv(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return B0;if(e!==hc){const n=10**e;hc=e,ga=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return ga}function Ga(t,e){let n=3,i=4.5,r,o;function a(f){return f&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),Vn(f,r(o))),o.result()}return a.area=function(f){return Vn(f,r(fc)),fc.result()},a.measure=function(f){return Vn(f,r(cc)),cc.result()},a.bounds=function(f){return Vn(f,r(ha)),ha.result()},a.centroid=function(f){return Vn(f,r(uc)),uc.result()},a.projection=function(f){return arguments.length?(r=f==null?(t=null,Ul):(t=f).stream,a):t},a.context=function(f){return arguments.length?(o=f==null?(e=null,new mc(n)):new R0(e=f),typeof i!="function"&&o.pointRadius(i),a):e},a.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(o.pointRadius(+f),+f),a):i},a.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const l=Math.floor(f);if(!(l>=0))throw new RangeError(`invalid digits: ${f}`);n=l}return e===null&&(o=new mc(n)),a},a.projection(t).digits(n).context(e)}function Xl(t){return{stream:Xa(t)}}function Xa(t){return function(e){var n=new jl;for(var i in t)n[i]=t[i];return n.stream=e,n}}function jl(){}jl.prototype={constructor:jl,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Es(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Vn(n,t.stream(ha)),e(ha.result()),i!=null&&t.clipExtent(i),t}function As(t,e,n){return Es(t,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),f=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([f,l])},n)}function z0(t,e,n){return As(t,[[0,0],e],n)}function q0(t,e,n){return Es(t,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,f=-o*i[0][1];t.scale(150*o).translate([a,f])},n)}function Y0(t,e,n){return Es(t,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],f=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,f])},n)}var gc=16,Ov=yt(30*Tt);function bc(t,e){return+e?Bv(t,e):Uv(t)}function Uv(t){return Xa({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Bv(t,e){function n(i,r,o,a,f,l,s,u,h,c,d,p,m,g){var w=s-i,y=u-r,x=w*w+y*y;if(x>4*e&&m--){var _=a+c,$=f+d,M=l+p,v=le(_*_+$*$+M*M),S=Me(M/=v),C=xt(xt(M)-1)<bt||xt(o-h)<bt?(o+h)/2:hn($,_),L=t(C,S),T=L[0],I=L[1],D=T-i,H=I-r,E=y*D-w*H;(E*E/x>e||xt((w*D+y*H)/x-.5)>.3||a*c+f*d+l*p<Ov)&&(n(i,r,o,a,f,l,T,I,C,_/=v,$/=v,M,m,g),g.point(T,I),n(T,I,C,_,$,M,s,u,h,c,d,p,m,g))}}return function(i){var r,o,a,f,l,s,u,h,c,d,p,m,g={point:w,lineStart:y,lineEnd:_,polygonStart:function(){i.polygonStart(),g.lineStart=$},polygonEnd:function(){i.polygonEnd(),g.lineStart=y}};function w(S,C){S=t(S,C),i.point(S[0],S[1])}function y(){h=NaN,g.point=x,i.lineStart()}function x(S,C){var L=qi([S,C]),T=t(S,C);n(h,c,u,d,p,m,h=T[0],c=T[1],u=S,d=L[0],p=L[1],m=L[2],gc,i),i.point(h,c)}function _(){g.point=w,i.lineEnd()}function $(){y(),g.point=M,g.lineEnd=v}function M(S,C){x(r=S,C),o=h,a=c,f=d,l=p,s=m,g.point=x}function v(){n(h,c,u,d,p,m,o,a,r,f,l,s,gc,i),g.lineEnd=_,_()}return g}}var zv=Xa({point:function(t,e){this.stream.point(t*Tt,e*Tt)}});function qv(t){return Xa({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function Yv(t,e,n,i,r){function o(a,f){return a*=i,f*=r,[e+t*a,n-t*f]}return o.invert=function(a,f){return[(a-e)/t*i,(n-f)/t*r]},o}function _c(t,e,n,i,r,o){if(!o)return Yv(t,e,n,i,r);var a=yt(o),f=gt(o),l=a*t,s=f*t,u=a/t,h=f/t,c=(f*n-a*e)/t,d=(f*e+a*n)/t;function p(m,g){return m*=i,g*=r,[l*m-s*g+e,n-s*m-l*g]}return p.invert=function(m,g){return[i*(u*m-h*g+c),r*(d-h*m-u*g)]},p}function On(t){return H0(function(){return t})()}function H0(t){var e,n=150,i=480,r=250,o=0,a=0,f=0,l=0,s=0,u,h=0,c=1,d=1,p=null,m=ac,g=null,w,y,x,_=Ul,$=.5,M,v,S,C,L;function T(E){return S(E[0]*Tt,E[1]*Tt)}function I(E){return E=S.invert(E[0],E[1]),E&&[E[0]*Zt,E[1]*Zt]}T.stream=function(E){return C&&L===E?C:C=zv(qv(u)(m(M(_(L=E)))))},T.preclip=function(E){return arguments.length?(m=E,p=void 0,H()):m},T.postclip=function(E){return arguments.length?(_=E,g=w=y=x=null,H()):_},T.clipAngle=function(E){return arguments.length?(m=+E?Mv(p=E*Tt):(p=null,ac),H()):p*Zt},T.clipExtent=function(E){return arguments.length?(_=E==null?(g=w=y=x=null,Ul):E0(g=+E[0][0],w=+E[0][1],y=+E[1][0],x=+E[1][1]),H()):g==null?null:[[g,w],[y,x]]},T.scale=function(E){return arguments.length?(n=+E,D()):n},T.translate=function(E){return arguments.length?(i=+E[0],r=+E[1],D()):[i,r]},T.center=function(E){return arguments.length?(o=E[0]%360*Tt,a=E[1]%360*Tt,D()):[o*Zt,a*Zt]},T.rotate=function(E){return arguments.length?(f=E[0]%360*Tt,l=E[1]%360*Tt,s=E.length>2?E[2]%360*Tt:0,D()):[f*Zt,l*Zt,s*Zt]},T.angle=function(E){return arguments.length?(h=E%360*Tt,D()):h*Zt},T.reflectX=function(E){return arguments.length?(c=E?-1:1,D()):c<0},T.reflectY=function(E){return arguments.length?(d=E?-1:1,D()):d<0},T.precision=function(E){return arguments.length?(M=bc(v,$=E*E),H()):le($)},T.fitExtent=function(E,R){return As(T,E,R)},T.fitSize=function(E,R){return z0(T,E,R)},T.fitWidth=function(E,R){return q0(T,E,R)},T.fitHeight=function(E,R){return Y0(T,E,R)};function D(){var E=_c(n,0,0,c,d,h).apply(null,e(o,a)),R=_c(n,i-E[0],r-E[1],c,d,h);return u=k0(f,l,s),v=Pl(e,R),S=Pl(u,v),M=bc(v,$),H()}function H(){return C=L=null,T}return function(){return e=t.apply(this,arguments),T.invert=e.invert&&I,D()}}function Ns(t){var e=0,n=wt/3,i=H0(t),r=i(e,n);return r.parallels=function(o){return arguments.length?i(e=o[0]*Tt,n=o[1]*Tt):[e*Zt,n*Zt]},r}function Hv(t){var e=yt(t);function n(i,r){return[i*e,gt(r)/e]}return n.invert=function(i,r){return[i/e,Me(r*e)]},n}function Wv(t,e){var n=gt(t),i=(n+gt(e))/2;if(xt(i)<bt)return Hv(t);var r=1+n*(2*i-n),o=le(r)/i;function a(f,l){var s=le(r-2*i*gt(l))/i;return[s*gt(f*=i),o-s*yt(f)]}return a.invert=function(f,l){var s=o-l,u=hn(f,xt(s))*we(s);return s*i<0&&(u-=wt*we(f)*we(s)),[u/i,Me((r-(f*f+s*s)*i*i)/(2*i))]},a}function ba(){return Ns(Wv).scale(155.424).center([0,33.6442])}function W0(){return ba().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Vv(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Gv(){var t,e,n=W0(),i,r=ba().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=ba().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,l,s={point:function(c,d){l=[c,d]}};function u(c){var d=c[0],p=c[1];return l=null,i.point(d,p),l||(o.point(d,p),l)||(f.point(d,p),l)}u.invert=function(c){var d=n.scale(),p=n.translate(),m=(c[0]-p[0])/d,g=(c[1]-p[1])/d;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?r:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(c)},u.stream=function(c){return t&&e===c?t:t=Vv([n.stream(e=c),r.stream(c),a.stream(c)])},u.precision=function(c){return arguments.length?(n.precision(c),r.precision(c),a.precision(c),h()):n.precision()},u.scale=function(c){return arguments.length?(n.scale(c),r.scale(c*.35),a.scale(c),u.translate(n.translate())):n.scale()},u.translate=function(c){if(!arguments.length)return n.translate();var d=n.scale(),p=+c[0],m=+c[1];return i=n.translate(c).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(s),o=r.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+bt,m+.12*d+bt],[p-.214*d-bt,m+.234*d-bt]]).stream(s),f=a.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+bt,m+.166*d+bt],[p-.115*d-bt,m+.234*d-bt]]).stream(s),h()},u.fitExtent=function(c,d){return As(u,c,d)},u.fitSize=function(c,d){return z0(u,c,d)},u.fitWidth=function(c,d){return q0(u,c,d)},u.fitHeight=function(c,d){return Y0(u,c,d)};function h(){return t=e=null,u}return u.scale(1070)}function V0(t){return function(e,n){var i=yt(e),r=yt(n),o=t(i*r);return o===1/0?[2,0]:[o*r*gt(e),o*gt(n)]}}function Zr(t){return function(e,n){var i=le(e*e+n*n),r=t(i),o=gt(r),a=yt(r);return[hn(e*o,i*a),Me(i&&n*o/i)]}}var G0=V0(function(t){return le(2/(1+t))});G0.invert=Zr(function(t){return 2*Me(t/2)});function Xv(){return On(G0).scale(124.75).clipAngle(180-.001)}var X0=V0(function(t){return(t=M0(t))&&t/gt(t)});X0.invert=Zr(function(t){return t});function jv(){return On(X0).scale(79.4188).clipAngle(180-.001)}function ja(t,e){return[t,fa(Cs((Ct+e)/2))]}ja.invert=function(t,e){return[t,2*er($0(e))-Ct]};function Zv(){return j0(ja).scale(961/de)}function j0(t){var e=On(t),n=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null,f,l,s;e.scale=function(h){return arguments.length?(i(h),u()):i()},e.translate=function(h){return arguments.length?(r(h),u()):r()},e.center=function(h){return arguments.length?(n(h),u()):n()},e.clipExtent=function(h){return arguments.length?(h==null?a=f=l=s=null:(a=+h[0][0],f=+h[0][1],l=+h[1][0],s=+h[1][1]),u()):a==null?null:[[a,f],[l,s]]};function u(){var h=wt*i(),c=e(gv(e.rotate()).invert([0,0]));return o(a==null?[[c[0]-h,c[1]-h],[c[0]+h,c[1]+h]]:t===ja?[[Math.max(c[0]-h,a),f],[Math.min(c[0]+h,l),s]]:[[a,Math.max(c[1]-h,f)],[l,Math.min(c[1]+h,s)]])}return u()}function Co(t){return Cs((Ct+t)/2)}function Kv(t,e){var n=yt(t),i=t===e?gt(t):fa(n/yt(e))/fa(Co(e)/Co(t)),r=n*Of(Co(t),i)/i;if(!i)return ja;function o(a,f){r>0?f<-Ct+bt&&(f=-Ct+bt):f>Ct-bt&&(f=Ct-bt);var l=r/Of(Co(f),i);return[l*gt(i*a),r-l*yt(i*a)]}return o.invert=function(a,f){var l=r-f,s=we(i)*le(a*a+l*l),u=hn(a,xt(l))*we(l);return l*i<0&&(u-=wt*we(a)*we(l)),[u/i,2*er(Of(r/s,1/i))-Ct]},o}function Qv(){return Ns(Kv).scale(109.5).parallels([30,30])}function _a(t,e){return[t,e]}_a.invert=_a;function Jv(){return On(_a).scale(152.63)}function t3(t,e){var n=yt(t),i=t===e?gt(t):(n-yt(e))/(e-t),r=n/i+t;if(xt(i)<bt)return _a;function o(a,f){var l=r-f,s=i*a;return[l*gt(s),r-l*yt(s)]}return o.invert=function(a,f){var l=r-f,s=hn(a,xt(l))*we(l);return l*i<0&&(s-=wt*we(a)*we(l)),[s/i,r-we(i)*le(a*a+l*l)]},o}function e3(){return Ns(t3).scale(131.154).center([0,13.9389])}var kr=1.340264,Sr=-.081106,Tr=893e-6,Cr=.003796,ya=le(3)/2,n3=12;function Z0(t,e){var n=Me(ya*gt(e)),i=n*n,r=i*i*i;return[t*yt(n)/(ya*(kr+3*Sr*i+r*(7*Tr+9*Cr*i))),n*(kr+Sr*i+r*(Tr+Cr*i))]}Z0.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,o=0,a,f,l;o<n3&&(f=n*(kr+Sr*i+r*(Tr+Cr*i))-e,l=kr+3*Sr*i+r*(7*Tr+9*Cr*i),n-=a=f/l,i=n*n,r=i*i*i,!(xt(a)<x0));++o);return[ya*t*(kr+3*Sr*i+r*(7*Tr+9*Cr*i))/yt(n),Me(gt(n)/ya)]};function i3(){return On(Z0).scale(177.158)}function K0(t,e){var n=yt(e),i=yt(t)*n;return[n*gt(t)/i,gt(e)/i]}K0.invert=Zr(er);function r3(){return On(K0).scale(144.049).clipAngle(60)}function Q0(t,e){return[yt(e)*gt(t),gt(e)]}Q0.invert=Zr(Me);function o3(){return On(Q0).scale(249.5).clipAngle(90+bt)}function J0(t,e){var n=yt(e),i=1+yt(t)*n;return[n*gt(t)/i,gt(e)/i]}J0.invert=Zr(function(t){return 2*er(t)});function a3(){return On(J0).scale(250).clipAngle(142)}function tp(t,e){return[fa(Cs((Ct+e)/2)),-t]}tp.invert=function(t,e){return[-e,2*er($0(t))-Ct]};function f3(){var t=j0(tp),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function Qe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Za(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Zl=Symbol("implicit");function Ds(){var t=new ti,e=[],n=[],i=Zl;function r(o){let a=t.get(o);if(a===void 0){if(i!==Zl)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new ti;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Ds(e,n).unknown(i)},Qe.apply(r,arguments),r}function Ka(){var t=Ds().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,o,a,f=!1,l=0,s=0,u=.5;delete t.unknown;function h(){var c=e().length,d=r<i,p=d?r:i,m=d?i:r;o=(m-p)/Math.max(1,c-l+s*2),f&&(o=Math.floor(o)),p+=(m-p-o*(c-l))*u,a=o*(1-l),f&&(p=Math.round(p),a=Math.round(a));var g=vl(c).map(function(w){return p+o*w});return n(d?g.reverse():g)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([i,r]=c,i=+i,r=+r,h()):[i,r]},t.rangeRound=function(c){return[i,r]=c,i=+i,r=+r,f=!0,h()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(c){return arguments.length?(f=!!c,h()):f},t.padding=function(c){return arguments.length?(l=Math.min(1,s=+c),h()):l},t.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),h()):l},t.paddingOuter=function(c){return arguments.length?(s=+c,h()):s},t.align=function(c){return arguments.length?(u=Math.max(0,Math.min(1,c)),h()):u},t.copy=function(){return Ka(e(),[i,r]).round(f).paddingInner(l).paddingOuter(s).align(u)},Qe.apply(h(),arguments)}function ep(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ep(e())},t}function l3(){return ep(Ka.apply(null,arguments).paddingInner(1))}function s3(t){return function(){return t}}function Kl(t){return+t}var yc=[0,1];function xe(t){return t}function Ql(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:s3(isNaN(e)?NaN:.5)}function u3(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function c3(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=Ql(r,i),o=n(a,o)):(i=Ql(i,r),o=n(o,a)),function(f){return o(i(f))}}function h3(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=Ql(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(f){var l=La(t,f,1,i)-1;return o[l](r[l](f))}}function Kr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qa(){var t=yc,e=yc,n=jr,i,r,o,a=xe,f,l,s;function u(){var c=Math.min(t.length,e.length);return a!==xe&&(a=u3(t[0],t[c-1])),f=c>2?h3:c3,l=s=null,h}function h(c){return c==null||isNaN(c=+c)?o:(l||(l=f(t.map(i),e,n)))(i(a(c)))}return h.invert=function(c){return a(r((s||(s=f(e,t.map(i),Yt)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,Kl),u()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),u()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),n=xs,u()},h.clamp=function(c){return arguments.length?(a=c?!0:xe,u()):a!==xe},h.interpolate=function(c){return arguments.length?(n=c,u()):n},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,d){return i=c,r=d,u()}}function np(){return Qa()(xe,xe)}function d3(t,e,n,i){var r=yl(t,e,n),o;switch(i=Ir(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=pv(r,a))&&(i.precision=o),v0(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=mv(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=dv(r))&&(i.precision=o-(i.type==="%")*2);break}}return tr(i)}function Qr(t){var e=t.domain;return t.ticks=function(n){var i=e();return Nr(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return d3(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,a=i[r],f=i[o],l,s,u=10;for(f<a&&(s=a,a=f,f=s,s=r,r=o,o=s);u-- >0;){if(s=Qo(a,f,n),s===l)return i[r]=a,i[o]=f,e(i);if(s>0)a=Math.floor(a/s)*s,f=Math.ceil(f/s)*s;else if(s<0)a=Math.ceil(a*s)/s,f=Math.floor(f*s)/s;else break;l=s}return t},t}function Fs(){var t=np();return t.copy=function(){return Kr(t,Fs())},Qe.apply(t,arguments),Qr(t)}function ip(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,Kl),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return ip(t).unknown(e)},t=arguments.length?Array.from(t,Kl):[0,1],Qr(n)}function rp(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],o=t[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),t[n]=e.floor(r),t[i]=e.ceil(o),t}function wc(t){return Math.log(t)}function vc(t){return Math.exp(t)}function p3(t){return-Math.log(-t)}function m3(t){return-Math.exp(-t)}function g3(t){return isFinite(t)?+("1e"+t):t<0?0:t}function b3(t){return t===10?g3:t===Math.E?Math.exp:e=>Math.pow(t,e)}function _3(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function xc(t){return(e,n)=>-t(-e,n)}function op(t){const e=t(wc,vc),n=e.domain;let i=10,r,o;function a(){return r=_3(i),o=b3(i),n()[0]<0?(r=xc(r),o=xc(o),t(p3,m3)):t(wc,vc),e}return e.base=function(f){return arguments.length?(i=+f,a()):i},e.domain=function(f){return arguments.length?(n(f),a()):n()},e.ticks=f=>{const l=n();let s=l[0],u=l[l.length-1];const h=u<s;h&&([s,u]=[u,s]);let c=r(s),d=r(u),p,m;const g=f==null?10:+f;let w=[];if(!(i%1)&&d-c<g){if(c=Math.floor(c),d=Math.ceil(d),s>0){for(;c<=d;++c)for(p=1;p<i;++p)if(m=c<0?p/o(-c):p*o(c),!(m<s)){if(m>u)break;w.push(m)}}else for(;c<=d;++c)for(p=i-1;p>=1;--p)if(m=c>0?p/o(-c):p*o(c),!(m<s)){if(m>u)break;w.push(m)}w.length*2<g&&(w=Nr(s,u,g))}else w=Nr(c,d,Math.min(d-c,g)).map(o);return h?w.reverse():w},e.tickFormat=(f,l)=>{if(f==null&&(f=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Ir(l)).precision==null&&(l.trim=!0),l=tr(l)),f===1/0)return l;const s=Math.max(1,i*f/e.ticks().length);return u=>{let h=u/o(Math.round(r(u)));return h*i<i-.5&&(h*=i),h<=s?l(u):""}},e.nice=()=>n(rp(n(),{floor:f=>o(Math.floor(r(f))),ceil:f=>o(Math.ceil(r(f)))})),e}function ap(){const t=op(Qa()).domain([1,10]);return t.copy=()=>Kr(t,ap()).base(t.base()),Qe.apply(t,arguments),t}function $c(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Mc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function fp(t){var e=1,n=t($c(e),Mc(e));return n.constant=function(i){return arguments.length?t($c(e=+i),Mc(e)):e},Qr(n)}function lp(){var t=fp(Qa());return t.copy=function(){return Kr(t,lp()).constant(t.constant())},Qe.apply(t,arguments)}function kc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function y3(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function w3(t){return t<0?-t*t:t*t}function sp(t){var e=t(xe,xe),n=1;function i(){return n===1?t(xe,xe):n===.5?t(y3,w3):t(kc(n),kc(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},Qr(e)}function up(){var t=sp(Qa());return t.copy=function(){return Kr(t,up()).exponent(t.exponent())},Qe.apply(t,arguments),t}function cp(){var t=[],e=[],n=[],i;function r(){var a=0,f=Math.max(1,e.length);for(n=new Array(f-1);++a<f;)n[a-1]=db(t,a/f);return o}function o(a){return a==null||isNaN(a=+a)?i:e[La(n,a)]}return o.invertExtent=function(a){var f=e.indexOf(a);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let f of a)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(ae),r()},o.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return cp().domain(t).range(e).unknown(i)},Qe.apply(o,arguments)}function hp(){var t=[.5],e=[0,1],n,i=1;function r(o){return o!=null&&o<=o?e[La(t,o,0,i)]:n}return r.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return hp().domain(t).range(e).unknown(n)},Qe.apply(r,arguments)}const Yf=new Date,Hf=new Date;function Nt(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const a=r(o),f=r.ceil(o);return o-a<f-o?a:f},r.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,f)=>{const l=[];if(o=r.ceil(o),f=f==null?1:Math.floor(f),!(o<a)||!(f>0))return l;let s;do l.push(s=new Date(+o)),e(o,f),t(o);while(s<o&&o<a);return l},r.filter=o=>Nt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,f)=>{if(a>=a)if(f<0)for(;++f<=0;)for(;e(a,-1),!o(a););else for(;--f>=0;)for(;e(a,1),!o(a););}),n&&(r.count=(o,a)=>(Yf.setTime(+o),Hf.setTime(+a),t(Yf),t(Hf),Math.floor(n(Yf,Hf))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const wa=Nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);wa.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):wa);wa.range;const ln=1e3,$e=ln*60,sn=$e*60,dn=sn*24,Ls=dn*7,Sc=dn*30,Wf=dn*365,Ae=Nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ln)},(t,e)=>(e-t)/ln,t=>t.getUTCSeconds());Ae.range;const Jr=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ln)},(t,e)=>{t.setTime(+t+e*$e)},(t,e)=>(e-t)/$e,t=>t.getMinutes());Jr.range;const to=Nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*$e)},(t,e)=>(e-t)/$e,t=>t.getUTCMinutes());to.range;const eo=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ln-t.getMinutes()*$e)},(t,e)=>{t.setTime(+t+e*sn)},(t,e)=>(e-t)/sn,t=>t.getHours());eo.range;const no=Nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*sn)},(t,e)=>(e-t)/sn,t=>t.getUTCHours());no.range;const ui=Nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*$e)/dn,t=>t.getDate()-1);ui.range;const Ja=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/dn,t=>t.getUTCDate()-1);Ja.range;const tf=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/dn,t=>Math.floor(t/dn));tf.range;function ci(t){return Nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*$e)/Ls)}const Hi=ci(0),Pr=ci(1),dp=ci(2),pp=ci(3),ai=ci(4),mp=ci(5),gp=ci(6);Hi.range;Pr.range;dp.range;pp.range;ai.range;mp.range;gp.range;function hi(t){return Nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Ls)}const Wi=hi(0),Or=hi(1),bp=hi(2),_p=hi(3),fi=hi(4),yp=hi(5),wp=hi(6);Wi.range;Or.range;bp.range;_p.range;fi.range;yp.range;wp.range;const io=Nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());io.range;const ro=Nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ro.range;const Fe=Nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fe.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Fe.range;const Le=Nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Le.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Le.range;function vp(t,e,n,i,r,o){const a=[[Ae,1,ln],[Ae,5,5*ln],[Ae,15,15*ln],[Ae,30,30*ln],[o,1,$e],[o,5,5*$e],[o,15,15*$e],[o,30,30*$e],[r,1,sn],[r,3,3*sn],[r,6,6*sn],[r,12,12*sn],[i,1,dn],[i,2,2*dn],[n,1,Ls],[e,1,Sc],[e,3,3*Sc],[t,1,Wf]];function f(s,u,h){const c=u<s;c&&([s,u]=[u,s]);const d=h&&typeof h.range=="function"?h:l(s,u,h),p=d?d.range(s,+u+1):[];return c?p.reverse():p}function l(s,u,h){const c=Math.abs(u-s)/h,d=Fa(([,,g])=>g).right(a,c);if(d===a.length)return t.every(yl(s/Wf,u/Wf,h));if(d===0)return wa.every(Math.max(yl(s,u,h),1));const[p,m]=a[c/a[d-1][2]<a[d][2]/c?d-1:d];return p.every(m)}return[f,l]}const[v3,xp]=vp(Le,ro,Wi,tf,no,to),[x3,$3]=vp(Fe,io,Hi,ui,eo,Jr);function Vf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Gf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function M3(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,f=t.months,l=t.shortMonths,s=ur(r),u=cr(r),h=ur(o),c=cr(o),d=ur(a),p=cr(a),m=ur(f),g=cr(f),w=ur(l),y=cr(l),x={a:N,A:V,b:W,B:G,c:null,d:Dc,e:Dc,f:G3,g:i6,G:o6,H:H3,I:W3,j:V3,L:$p,m:X3,M:j3,p:A,q:Y,Q:Ic,s:Rc,S:Z3,u:K3,U:Q3,V:J3,w:t6,W:e6,x:null,X:null,y:n6,Y:r6,Z:a6,"%":Lc},_={a:X,A:nt,b:J,B:rt,c:null,d:Fc,e:Fc,f:u6,g:w6,G:x6,H:f6,I:l6,j:s6,L:kp,m:c6,M:h6,p:q,q:z,Q:Ic,s:Rc,S:d6,u:p6,U:m6,V:g6,w:b6,W:_6,x:null,X:null,y:y6,Y:v6,Z:$6,"%":Lc},$={a:L,A:T,b:I,B:D,c:H,d:Ac,e:Ac,f:B3,g:Ec,G:Cc,H:Nc,I:Nc,j:R3,L:U3,m:I3,M:P3,p:C,q:L3,Q:q3,s:Y3,S:O3,u:E3,U:A3,V:N3,w:C3,W:D3,x:E,X:R,y:Ec,Y:Cc,Z:F3,"%":z3};x.x=M(n,x),x.X=M(i,x),x.c=M(e,x),_.x=M(n,_),_.X=M(i,_),_.c=M(e,_);function M(F,U){return function(Q){var P=[],ht=-1,ot=0,pt=F.length,ft,ut,Ot;for(Q instanceof Date||(Q=new Date(+Q));++ht<pt;)F.charCodeAt(ht)===37&&(P.push(F.slice(ot,ht)),(ut=Tc[ft=F.charAt(++ht)])!=null?ft=F.charAt(++ht):ut=ft==="e"?" ":"0",(Ot=U[ft])&&(ft=Ot(Q,ut)),P.push(ft),ot=ht+1);return P.push(F.slice(ot,ht)),P.join("")}}function v(F,U){return function(Q){var P=sr(1900,void 0,1),ht=S(P,F,Q+="",0),ot,pt;if(ht!=Q.length)return null;if("Q"in P)return new Date(P.Q);if("s"in P)return new Date(P.s*1e3+("L"in P?P.L:0));if(U&&!("Z"in P)&&(P.Z=0),"p"in P&&(P.H=P.H%12+P.p*12),P.m===void 0&&(P.m="q"in P?P.q:0),"V"in P){if(P.V<1||P.V>53)return null;"w"in P||(P.w=1),"Z"in P?(ot=Gf(sr(P.y,0,1)),pt=ot.getUTCDay(),ot=pt>4||pt===0?Or.ceil(ot):Or(ot),ot=Ja.offset(ot,(P.V-1)*7),P.y=ot.getUTCFullYear(),P.m=ot.getUTCMonth(),P.d=ot.getUTCDate()+(P.w+6)%7):(ot=Vf(sr(P.y,0,1)),pt=ot.getDay(),ot=pt>4||pt===0?Pr.ceil(ot):Pr(ot),ot=ui.offset(ot,(P.V-1)*7),P.y=ot.getFullYear(),P.m=ot.getMonth(),P.d=ot.getDate()+(P.w+6)%7)}else("W"in P||"U"in P)&&("w"in P||(P.w="u"in P?P.u%7:"W"in P?1:0),pt="Z"in P?Gf(sr(P.y,0,1)).getUTCDay():Vf(sr(P.y,0,1)).getDay(),P.m=0,P.d="W"in P?(P.w+6)%7+P.W*7-(pt+5)%7:P.w+P.U*7-(pt+6)%7);return"Z"in P?(P.H+=P.Z/100|0,P.M+=P.Z%100,Gf(P)):Vf(P)}}function S(F,U,Q,P){for(var ht=0,ot=U.length,pt=Q.length,ft,ut;ht<ot;){if(P>=pt)return-1;if(ft=U.charCodeAt(ht++),ft===37){if(ft=U.charAt(ht++),ut=$[ft in Tc?U.charAt(ht++):ft],!ut||(P=ut(F,Q,P))<0)return-1}else if(ft!=Q.charCodeAt(P++))return-1}return P}function C(F,U,Q){var P=s.exec(U.slice(Q));return P?(F.p=u.get(P[0].toLowerCase()),Q+P[0].length):-1}function L(F,U,Q){var P=d.exec(U.slice(Q));return P?(F.w=p.get(P[0].toLowerCase()),Q+P[0].length):-1}function T(F,U,Q){var P=h.exec(U.slice(Q));return P?(F.w=c.get(P[0].toLowerCase()),Q+P[0].length):-1}function I(F,U,Q){var P=w.exec(U.slice(Q));return P?(F.m=y.get(P[0].toLowerCase()),Q+P[0].length):-1}function D(F,U,Q){var P=m.exec(U.slice(Q));return P?(F.m=g.get(P[0].toLowerCase()),Q+P[0].length):-1}function H(F,U,Q){return S(F,e,U,Q)}function E(F,U,Q){return S(F,n,U,Q)}function R(F,U,Q){return S(F,i,U,Q)}function N(F){return a[F.getDay()]}function V(F){return o[F.getDay()]}function W(F){return l[F.getMonth()]}function G(F){return f[F.getMonth()]}function A(F){return r[+(F.getHours()>=12)]}function Y(F){return 1+~~(F.getMonth()/3)}function X(F){return a[F.getUTCDay()]}function nt(F){return o[F.getUTCDay()]}function J(F){return l[F.getUTCMonth()]}function rt(F){return f[F.getUTCMonth()]}function q(F){return r[+(F.getUTCHours()>=12)]}function z(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var U=M(F+="",x);return U.toString=function(){return F},U},parse:function(F){var U=v(F+="",!1);return U.toString=function(){return F},U},utcFormat:function(F){var U=M(F+="",_);return U.toString=function(){return F},U},utcParse:function(F){var U=v(F+="",!0);return U.toString=function(){return F},U}}}var Tc={"-":"",_:" ",0:"0"},Pt=/^\s*\d+/,k3=/^%/,S3=/[\\^$*+?|[\]().{}]/g;function vt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function T3(t){return t.replace(S3,"\\$&")}function ur(t){return new RegExp("^(?:"+t.map(T3).join("|")+")","i")}function cr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function C3(t,e,n){var i=Pt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function E3(t,e,n){var i=Pt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function A3(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function N3(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function D3(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Cc(t,e,n){var i=Pt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ec(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function F3(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function L3(t,e,n){var i=Pt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function I3(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Ac(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function R3(t,e,n){var i=Pt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Nc(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function P3(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function O3(t,e,n){var i=Pt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function U3(t,e,n){var i=Pt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function B3(t,e,n){var i=Pt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function z3(t,e,n){var i=k3.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function q3(t,e,n){var i=Pt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Y3(t,e,n){var i=Pt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Dc(t,e){return vt(t.getDate(),e,2)}function H3(t,e){return vt(t.getHours(),e,2)}function W3(t,e){return vt(t.getHours()%12||12,e,2)}function V3(t,e){return vt(1+ui.count(Fe(t),t),e,3)}function $p(t,e){return vt(t.getMilliseconds(),e,3)}function G3(t,e){return $p(t,e)+"000"}function X3(t,e){return vt(t.getMonth()+1,e,2)}function j3(t,e){return vt(t.getMinutes(),e,2)}function Z3(t,e){return vt(t.getSeconds(),e,2)}function K3(t){var e=t.getDay();return e===0?7:e}function Q3(t,e){return vt(Hi.count(Fe(t)-1,t),e,2)}function Mp(t){var e=t.getDay();return e>=4||e===0?ai(t):ai.ceil(t)}function J3(t,e){return t=Mp(t),vt(ai.count(Fe(t),t)+(Fe(t).getDay()===4),e,2)}function t6(t){return t.getDay()}function e6(t,e){return vt(Pr.count(Fe(t)-1,t),e,2)}function n6(t,e){return vt(t.getFullYear()%100,e,2)}function i6(t,e){return t=Mp(t),vt(t.getFullYear()%100,e,2)}function r6(t,e){return vt(t.getFullYear()%1e4,e,4)}function o6(t,e){var n=t.getDay();return t=n>=4||n===0?ai(t):ai.ceil(t),vt(t.getFullYear()%1e4,e,4)}function a6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vt(e/60|0,"0",2)+vt(e%60,"0",2)}function Fc(t,e){return vt(t.getUTCDate(),e,2)}function f6(t,e){return vt(t.getUTCHours(),e,2)}function l6(t,e){return vt(t.getUTCHours()%12||12,e,2)}function s6(t,e){return vt(1+Ja.count(Le(t),t),e,3)}function kp(t,e){return vt(t.getUTCMilliseconds(),e,3)}function u6(t,e){return kp(t,e)+"000"}function c6(t,e){return vt(t.getUTCMonth()+1,e,2)}function h6(t,e){return vt(t.getUTCMinutes(),e,2)}function d6(t,e){return vt(t.getUTCSeconds(),e,2)}function p6(t){var e=t.getUTCDay();return e===0?7:e}function m6(t,e){return vt(Wi.count(Le(t)-1,t),e,2)}function Sp(t){var e=t.getUTCDay();return e>=4||e===0?fi(t):fi.ceil(t)}function g6(t,e){return t=Sp(t),vt(fi.count(Le(t),t)+(Le(t).getUTCDay()===4),e,2)}function b6(t){return t.getUTCDay()}function _6(t,e){return vt(Or.count(Le(t)-1,t),e,2)}function y6(t,e){return vt(t.getUTCFullYear()%100,e,2)}function w6(t,e){return t=Sp(t),vt(t.getUTCFullYear()%100,e,2)}function v6(t,e){return vt(t.getUTCFullYear()%1e4,e,4)}function x6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?fi(t):fi.ceil(t),vt(t.getUTCFullYear()%1e4,e,4)}function $6(){return"+0000"}function Lc(){return"%"}function Ic(t){return+t}function Rc(t){return Math.floor(+t/1e3)}var vi,Is,oo;M6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function M6(t){return vi=M3(t),Is=vi.format,vi.parse,oo=vi.utcFormat,vi.utcParse,vi}function k6(t){return new Date(t)}function S6(t){return t instanceof Date?+t:+new Date(+t)}function Rs(t,e,n,i,r,o,a,f,l,s){var u=np(),h=u.invert,c=u.domain,d=s(".%L"),p=s(":%S"),m=s("%I:%M"),g=s("%I %p"),w=s("%a %d"),y=s("%b %d"),x=s("%B"),_=s("%Y");function $(M){return(l(M)<M?d:f(M)<M?p:a(M)<M?m:o(M)<M?g:i(M)<M?r(M)<M?w:y:n(M)<M?x:_)(M)}return u.invert=function(M){return new Date(h(M))},u.domain=function(M){return arguments.length?c(Array.from(M,S6)):c().map(k6)},u.ticks=function(M){var v=c();return t(v[0],v[v.length-1],M??10)},u.tickFormat=function(M,v){return v==null?$:s(v)},u.nice=function(M){var v=c();return(!M||typeof M.range!="function")&&(M=e(v[0],v[v.length-1],M??10)),M?c(rp(v,M)):u},u.copy=function(){return Kr(u,Rs(t,e,n,i,r,o,a,f,l,s))},u}function T6(){return Qe.apply(Rs(x3,$3,Fe,io,Hi,ui,eo,Jr,Ae,Is).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function C6(){return Qe.apply(Rs(v3,xp,Le,ro,Wi,Ja,no,to,Ae,oo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ef(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function nf(){var t=0,e=.5,n=1,i=1,r,o,a,f,l,s=xe,u,h=!1,c;function d(m){return isNaN(m=+m)?c:(m=.5+((m=+u(m))-o)*(i*m<i*o?f:l),s(h?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,r=u(t=+t),o=u(e=+e),a=u(n=+n),f=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(h=!!m,d):h},d.interpolator=function(m){return arguments.length?(s=m,d):s};function p(m){return function(g){var w,y,x;return arguments.length?([w,y,x]=g,s=Ha(m,[w,y,x]),d):[s(0),s(.5),s(1)]}}return d.range=p(jr),d.rangeRound=p(xs),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return u=m,r=m(t),o=m(e),a=m(n),f=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,d}}function Tp(){var t=Qr(nf()(xe));return t.copy=function(){return ef(t,Tp())},Za.apply(t,arguments)}function Cp(){var t=op(nf()).domain([.1,1,10]);return t.copy=function(){return ef(t,Cp()).base(t.base())},Za.apply(t,arguments)}function Ep(){var t=fp(nf());return t.copy=function(){return ef(t,Ep()).constant(t.constant())},Za.apply(t,arguments)}function Ap(){var t=sp(nf());return t.copy=function(){return ef(t,Ap()).exponent(t.exponent())},Za.apply(t,arguments)}function _t(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const E6=_t("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),A6=_t("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),N6=_t("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),D6=_t("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),F6=_t("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),L6=_t("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),I6=_t("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),R6=_t("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),P6=_t("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),O6=_t("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Mt=t=>Cy(t[t.length-1]);var Np=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(_t);const Dp=Mt(Np);var Fp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(_t);const Lp=Mt(Fp);var Ip=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(_t);const Rp=Mt(Ip);var Pp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(_t);const Op=Mt(Pp);var Jl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(_t);const va=Mt(Jl);var Up=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(_t);const Bp=Mt(Up);var ts=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(_t);const xa=Mt(ts);var zp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(_t);const qp=Mt(zp);var Yp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(_t);const Hp=Mt(Yp);var Wp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(_t);const Vp=Mt(Wp);var Gp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(_t);const Xp=Mt(Gp);var jp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(_t);const Zp=Mt(jp);var Kp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(_t);const Qp=Mt(Kp);var Jp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(_t);const t1=Mt(Jp);var e1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(_t);const n1=Mt(e1);var i1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(_t);const r1=Mt(i1);var o1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(_t);const a1=Mt(o1);var f1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(_t);const l1=Mt(f1);var s1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(_t);const u1=Mt(s1);var c1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(_t);const h1=Mt(c1);var d1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(_t);const p1=Mt(d1);var m1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(_t);const g1=Mt(m1);var b1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(_t);const _1=Mt(b1);var y1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(_t);const w1=Mt(y1);var v1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(_t);const x1=Mt(v1);var $1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(_t);const M1=Mt($1);var k1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(_t);const S1=Mt(k1);function T1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const C1=$s(je(300,.5,0),je(-240,.5,1));var E1=$s(je(-100,.75,.35),je(80,1.5,.8)),A1=$s(je(260,.75,.35),je(80,1.5,.8)),Eo=je();function N1(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Eo.h=360*t-100,Eo.s=1.5-1.5*e,Eo.l=.8-.9*e,Eo+""}var Ao=Ln(),U6=Math.PI/3,B6=Math.PI*2/3;function D1(t){var e;return t=(.5-t)*Math.PI,Ao.r=255*(e=Math.sin(t))*e,Ao.g=255*(e=Math.sin(t+U6))*e,Ao.b=255*(e=Math.sin(t+B6))*e,Ao+""}function F1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function rf(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const L1=rf(_t("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var I1=rf(_t("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),R1=rf(_t("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),P1=rf(_t("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function xi(t){return function(){return t}}const O1=Math.cos,Ps=Math.min,$a=Math.sin,Dt=Math.sqrt,Pc=1e-12,Ma=Math.PI,of=2*Ma;function z6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new y0(e)}function q6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function U1(t){this._context=t}U1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function af(t){return new U1(t)}function Y6(t){return t[0]}function H6(t){return t[1]}function W6(t,e){var n=xi(!0),i=null,r=af,o=null,a=z6(f);t=typeof t=="function"?t:t===void 0?Y6:xi(t),e=typeof e=="function"?e:e===void 0?H6:xi(e);function f(l){var s,u=(l=q6(l)).length,h,c=!1,d;for(i==null&&(o=r(d=a())),s=0;s<=u;++s)!(s<u&&n(h=l[s],s,l))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,s,l),+e(h,s,l));if(d)return o=null,d+""||null}return f.x=function(l){return arguments.length?(t=typeof l=="function"?l:xi(+l),f):t},f.y=function(l){return arguments.length?(e=typeof l=="function"?l:xi(+l),f):e},f.defined=function(l){return arguments.length?(n=typeof l=="function"?l:xi(!!l),f):n},f.curve=function(l){return arguments.length?(r=l,i!=null&&(o=r(i)),f):r},f.context=function(l){return arguments.length?(l==null?i=o=null:o=r(i=l),f):i},f}class B1{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function V6(t){return new B1(t,!0)}function G6(t){return new B1(t,!1)}const X6=Dt(3),z1={draw(t,e){const n=Dt(e+Ps(e/28,.75))*.59436,i=n/2,r=i*X6;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Ur={draw(t,e){const n=Dt(e/Ma);t.moveTo(n,0),t.arc(0,0,n,0,of)}},q1={draw(t,e){const n=Dt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Y1=Dt(1/3),j6=Y1*2,H1={draw(t,e){const n=Dt(e/j6),i=n*Y1;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},W1={draw(t,e){const n=Dt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},V1={draw(t,e){const n=Dt(e-Ps(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},G1={draw(t,e){const n=Dt(e),i=-n/2;t.rect(i,i,n,n)}},X1={draw(t,e){const n=Dt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},Z6=.8908130915292852,j1=$a(Ma/10)/$a(7*Ma/10),K6=$a(of/10)*j1,Q6=-O1(of/10)*j1,Z1={draw(t,e){const n=Dt(e*Z6),i=K6*n,r=Q6*n;t.moveTo(0,-n),t.lineTo(i,r);for(let o=1;o<5;++o){const a=of*o/5,f=O1(a),l=$a(a);t.lineTo(l*n,-f*n),t.lineTo(f*i-l*r,l*i+f*r)}t.closePath()}},Xf=Dt(3),K1={draw(t,e){const n=-Dt(e/(Xf*3));t.moveTo(0,n*2),t.lineTo(-Xf*n,-n),t.lineTo(Xf*n,-n),t.closePath()}},J6=Dt(3),Q1={draw(t,e){const n=Dt(e)*.6824,i=n/2,r=n*J6/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},ge=-.5,be=Dt(3)/2,es=1/Dt(12),t4=(es/2+1)*3,J1={draw(t,e){const n=Dt(e/t4),i=n/2,r=n*es,o=i,a=n*es+n,f=-o,l=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(f,l),t.lineTo(ge*i-be*r,be*i+ge*r),t.lineTo(ge*o-be*a,be*o+ge*a),t.lineTo(ge*f-be*l,be*f+ge*l),t.lineTo(ge*i+be*r,ge*r-be*i),t.lineTo(ge*o+be*a,ge*a-be*o),t.lineTo(ge*f+be*l,ge*l-be*f),t.closePath()}},tm={draw(t,e){const n=Dt(e-Ps(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},e4=[Ur,q1,H1,G1,Z1,K1,J1],n4=[Ur,V1,tm,Q1,z1,X1,W1];function In(){}function ka(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ff(t){this._context=t}ff.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ka(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ka(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function i4(t){return new ff(t)}function em(t){this._context=t}em.prototype={areaStart:In,areaEnd:In,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ka(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function r4(t){return new em(t)}function nm(t){this._context=t}nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ka(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function o4(t){return new nm(t)}function im(t,e){this._basis=new ff(t),this._beta=e}im.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],o=t[n]-i,a=e[n]-r,f=-1,l;++f<=n;)l=f/n,this._basis.point(this._beta*t[f]+(1-this._beta)*(i+l*o),this._beta*e[f]+(1-this._beta)*(r+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const a4=function t(e){function n(i){return e===1?new ff(i):new im(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Sa(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Os(t,e){this._context=t,this._k=(1-e)/6}Os.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Sa(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Sa(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const f4=function t(e){function n(i){return new Os(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Us(t,e){this._context=t,this._k=(1-e)/6}Us.prototype={areaStart:In,areaEnd:In,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Sa(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const l4=function t(e){function n(i){return new Us(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Bs(t,e){this._context=t,this._k=(1-e)/6}Bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Sa(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const s4=function t(e){function n(i){return new Bs(i,e)}return n.tension=function(i){return t(+i)},n}(0);function zs(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Pc){var f=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*f-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*f-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Pc){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function rm(t,e){this._context=t,this._alpha=e}rm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:zs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const u4=function t(e){function n(i){return e?new rm(i,e):new Os(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function om(t,e){this._context=t,this._alpha=e}om.prototype={areaStart:In,areaEnd:In,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:zs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const c4=function t(e){function n(i){return e?new om(i,e):new Us(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function am(t,e){this._context=t,this._alpha=e}am.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:zs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const h4=function t(e){function n(i){return e?new am(i,e):new Bs(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function fm(t){this._context=t}fm.prototype={areaStart:In,areaEnd:In,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function d4(t){return new fm(t)}function Oc(t){return t<0?-1:1}function Uc(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),f=(o*r+a*i)/(i+r);return(Oc(o)+Oc(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(f))||0}function Bc(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function jf(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,f=(o-i)/3;t._context.bezierCurveTo(i+f,r+f*e,o-f,a-f*n,o,a)}function Ta(t){this._context=t}Ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jf(this,this._t0,Bc(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,jf(this,Bc(this,n=Uc(this,t,e)),n);break;default:jf(this,this._t0,n=Uc(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function lm(t){this._context=new sm(t)}(lm.prototype=Object.create(Ta.prototype)).point=function(t,e){Ta.prototype.point.call(this,e,t)};function sm(t){this._context=t}sm.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};function p4(t){return new Ta(t)}function m4(t){return new lm(t)}function um(t){this._context=t}um.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=zc(t),r=zc(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function zc(t){var e,n=t.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/o[e-1],o[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function g4(t){return new um(t)}function lf(t,e){this._context=t,this._t=e}lf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function b4(t){return new lf(t,.5)}function _4(t){return new lf(t,0)}function y4(t){return new lf(t,1)}function vr(t,e,n){this.k=t,this.x=e,this.y=n}vr.prototype={constructor:vr,scale:function(t){return t===1?this:new vr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new vr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};vr.prototype;function Rn(t){return t!=null&&!Number.isNaN(t)}function Ie(t,e){return+Rn(e)-+Rn(t)||ae(t,e)}function Ca(t,e){return+Rn(e)-+Rn(t)||Wr(t,e)}function qs(t){return t!=null&&`${t}`!=""}function cm(t){return isFinite(t)?t:NaN}function sf(t){return t>0&&isFinite(t)?t:NaN}function Ys(t){return t<0&&isFinite(t)?t:NaN}function w4(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${v4(t.getUTCFullYear())}-${an(t.getUTCMonth()+1,2)}-${an(t.getUTCDate(),2)}${n||i||r||o?`T${an(n,2)}:${an(i,2)}${r||o?`:${an(r,2)}${o?`.${an(o,3)}`:""}`:""}Z`:""}`}function v4(t){return t<0?`-${an(-t,6)}`:t>9999?`+${an(t,6)}`:an(t,4)}function an(t,e){return`${t}`.padStart(e,"0")}const x4=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function hm(t,e){return x4.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Ti=1e3,kn=Ti*60,Sn=kn*60,Ze=Sn*24,ze=Ze*7,Qn=Ze*30,xn=Ze*365,Zf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ti],["5 seconds",5*Ti],["15 seconds",15*Ti],["30 seconds",30*Ti],["minute",kn],["5 minutes",5*kn],["15 minutes",15*kn],["30 minutes",30*kn],["hour",Sn],["3 hours",3*Sn],["6 hours",6*Sn],["12 hours",12*Sn],["day",Ze],["2 days",2*Ze],["week",ze],["2 weeks",2*ze],["month",Qn],["3 months",3*Qn],["6 months",6*Qn],["year",xn],["2 years",2*xn],["5 years",5*xn],["10 years",10*xn],["20 years",20*xn],["50 years",50*xn],["100 years",100*xn]],Hs=new Map([["second",Ti],["minute",kn],["hour",Sn],["day",Ze],["monday",ze],["tuesday",ze],["wednesday",ze],["thursday",ze],["friday",ze],["saturday",ze],["sunday",ze],["week",ze],["month",Qn],["year",xn]]),dm=new Map([["second",Ae],["minute",Jr],["hour",eo],["day",ui],["monday",Pr],["tuesday",dp],["wednesday",pp],["thursday",ai],["friday",mp],["saturday",gp],["sunday",Hi],["week",Hi],["month",io],["year",Fe]]),Ws=new Map([["second",Ae],["minute",to],["hour",no],["day",tf],["monday",Or],["tuesday",bp],["wednesday",_p],["thursday",fi],["friday",yp],["saturday",wp],["sunday",Wi],["week",Wi],["month",ro],["year",Le]]),ao=Symbol("intervalDuration"),uf=Symbol("intervalType");for(const[t,e]of dm)e[ao]=Hs.get(t),e[uf]="time";for(const[t,e]of Ws)e[ao]=Hs.get(t),e[uf]="utc";const xr=[["year",Le,"utc"],["month",ro,"utc"],["day",tf,"utc",6*Qn],["hour",no,"utc",3*Ze],["minute",to,"utc",6*Sn],["second",Ae,"utc",30*kn]],Wo=[["year",Fe,"time"],["month",io,"time"],["day",ui,"time",6*Qn],["hour",eo,"time",3*Ze],["minute",Jr,"time",6*Sn],["second",Ae,"time",30*kn]],$4=[xr[0],Wo[0],xr[1],Wo[1],xr[2],Wo[2],...xr.slice(3)];function pm(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const i=/^(?:(\d+)\s+)/.exec(e);switch(i&&(e=e.slice(i[0].length),n=+i[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let r=Ws.get(e);if(!r)throw new Error(`unknown interval: ${t}`);if(n>1&&!r.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function mm(t){return gm(pm(t),"time")}function Vs(t){return gm(pm(t),"utc")}function gm([t,e],n){let i=(n==="time"?dm:Ws).get(t);return e>1&&(i=i.every(e),i[ao]=Hs.get(t)*e,i[uf]=n),i}function qc(t,e){if(!(e>1))return;const n=t[ao];if(!Zf.some(([,r])=>r===n)||n%Ze===0&&Ze<n&&n<Qn)return;const[i]=Zf[Fa(([,r])=>Math.log(r)).center(Zf,Math.log(n*e))];return(t[uf]==="time"?mm:Vs)(i)}function Yc(t,e,n){const i=e==="time"?Is:oo;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=M4(n);switch(t){case"millisecond":return $i(i(".%L"),i(":%M:%S"),r);case"second":return $i(i(":%S"),i("%-I:%M"),r);case"minute":return $i(i("%-I:%M"),i("%p"),r);case"hour":return $i(i("%-I %p"),i("%b %-d"),r);case"day":return $i(i("%-d"),i("%b"),r);case"month":return $i(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function M4(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function k4(t){return t==="time"?Wo:t==="utc"?xr:$4}function S4(t,e,n){const i=ce(bb(e,(r,o)=>Math.abs(o-r)));if(i<1e3)return Yc("millisecond","utc",n);for(const[r,o,a,f]of k4(t)){if(i>f||r==="hour"&&!i)break;if(e.every(l=>o.floor(l)>=l))return Yc(r,a,n)}}function $i(t,e,n){return(i,r,o)=>{const a=t(i,r),f=e(i,r),l=r-Gi(o);return r!==l&&o[l]!==void 0&&f===e(o[l],l)?a:n(a,f)}}const Br=Object.getPrototypeOf(Uint8Array),T4=Object.prototype.toString,bm=Symbol("reindex");function Rt(t,e,n){const i=typeof e;return i==="string"?Hc(t,_m(e),n):i==="function"?Hc(t,e,n):i==="number"||e instanceof Date||i==="boolean"?At(t,fo(e),n):typeof(e==null?void 0:e.transform)=="function"?Wc(e.transform(t),n):C4(Wc(e,n),t==null?void 0:t[bm])}function C4(t,e){return e?Zs(t,e):t}function Hc(t,e,n){return At(t,(n==null?void 0:n.prototype)instanceof Br?E4(e):e,n)}function Wc(t,e){return e===void 0?pe(t):t instanceof e?t:e.prototype instanceof Br&&!(t instanceof Br)?e.from(t,js):e.from(t)}function E4(t){return(e,n)=>js(t(e,n))}const Vo=[null],_m=t=>e=>e[t],Gs={transform:gn},jt={transform:t=>t},A4=()=>1,N4=()=>!0,Kt=t=>t==null?t:`${t}`,St=t=>t==null?t:+t,Xs=t=>t?t[0]:void 0,ns=t=>t?t[1]:void 0,fo=t=>()=>t;function D4(t){const e=+`${t}`.slice(1)/100;return(n,i)=>Ri(n,e,i)}function He(t){return t instanceof Br?t:At(t,js,Float64Array)}function js(t){return t==null?NaN:Number(t)}function F4(t){return At(t,ym)}function ym(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?hm(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function pn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:df(t)?[void 0,t]:[t,void 0]}function Qt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function wm(t,e,n){if(t!=null)return Pe(t,e,n)}function Pe(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function pe(t){return t==null||t instanceof Array||t instanceof Br?t:Array.from(t)}function At(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function zr(t,e=Array){return t instanceof e?t.slice():e.from(t)}function L4({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function vm({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function I4(t){return L4(t)||vm(t)||t.interval!==void 0}function Un(t){return(t==null?void 0:t.toString)===T4}function is(t){return Un(t)&&(t.type!==void 0||t.domain!==void 0)}function cf(t){return Un(t)&&typeof t.transform!="function"}function Vi(t){return cf(t)&&t.value===void 0&&t.channel===void 0}function R4(t,e,n,i=jt){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function hf(t,e){return t===void 0&&e===void 0?[Xs,ns]:[t,e]}function xm({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=pn(e)),t===void 0&&([t]=pn(n)),t}function gn(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function Zs(t,e){return At(e,n=>t[n],t.constructor)}function P4(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function jn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function O4(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Ea(t){let e;return[{transform:()=>e,label:di(t)},n=>e=n]}function rn(t){return t==null?[t]:Ea(t)}function di(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function rs(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return se(i)||se(r)?At(i,(o,a)=>new Date((+i[a]+ +r[a])/2)):At(i,(o,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function $m(t,e){const n=Mm(e==null?void 0:e.interval,e==null?void 0:e.type);return n?At(t,n):t}function Mm(t,e){const n=Ks(t,e);return n&&(i=>Rn(i)?n.floor(i):i)}function Ks(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>vl(Math.ceil(i*n),r*n).map(o=>o/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>vl(Math.ceil(i/n),r/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?mm:Vs)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function nr(t,e){if(t=Ks(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function U4(t,e){if(t=nr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function B4(t){return Ci(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function Ci(t){return typeof(t==null?void 0:t.range)=="function"}function lo(t){return t===void 0||cf(t)?t:{value:t}}function z4(t){return t==null?null:{transform:e=>Rt(e,t,Float64Array),label:di(t)}}function Bn(t){return t&&typeof t[Symbol.iterator]=="function"}function km(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Vc(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function se(t){for(const e of t)if(e!=null)return e instanceof Date}function q4(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&hm(e)}function Y4(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function H4(t){for(const e of t)if(e!=null)return typeof e=="number"}function Kf(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const W4=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function df(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||W4.has(t))}function V4(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function ie(t){return t==null||qr(t)}function qr(t){return/^\s*none\s*$/i.test(t)}function G4(t){return/^\s*round\s*$/i.test(t)}function os(t,e){return wm(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function pf(t="middle"){return os(t,"frameAnchor")}function Gi(t){if(t==null)return;const e=t[0],n=t[t.length-1];return Wr(e,n)}function X4(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const o=i[r];n===t?n={...n,[r]:o}:n[r]=o}return n}function j4(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function Sm(t){return Bn(t)?j4(t):t}const We=Symbol("position"),bn=Symbol("color"),so=Symbol("radius"),uo=Symbol("length"),co=Symbol("opacity"),mf=Symbol("symbol"),Tm=Symbol("projection"),Et=new Map([["x",We],["y",We],["fx",We],["fy",We],["r",so],["color",bn],["opacity",co],["symbol",mf],["length",uo],["projection",Tm]]);function Z4(t){return t===We||t===Tm}function K4(t){return t===We||t===so||t===uo||t===co}const Q4=Math.sqrt(3),J4=2/Q4,t5={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*J4,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},Qs=new Map([["asterisk",z1],["circle",Ur],["cross",q1],["diamond",H1],["diamond2",W1],["hexagon",t5],["plus",V1],["square",G1],["square2",X1],["star",Z1],["times",tm],["triangle",K1],["triangle2",Q1],["wye",J1]]);function Js(t){return t&&typeof t.draw=="function"}function e5(t){return Js(t)?!0:typeof t!="string"?!1:Qs.has(t.toLowerCase())}function tu(t){if(t==null||Js(t))return t;const e=Qs.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function n5(t){if(t==null||Js(t))return[void 0,t];if(typeof t=="string"){const e=Qs.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function gf({filter:t,sort:e,reverse:n,transform:i,initializer:r,...o}={},a){if(i===void 0&&(t!=null&&(i=Cm(t)),e!=null&&!Vi(e)&&(i=Qf(i,eu(e))),n&&(i=Qf(i,Em))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||Vi(e))&&{sort:e},transform:Qf(i,a)}}function Xi({filter:t,sort:e,reverse:n,initializer:i,...r}={},o){return i===void 0&&(t!=null&&(i=Cm(t)),e!=null&&!Vi(e)&&(i=Jf(i,eu(e))),n&&(i=Jf(i,Em))),{...r,...(e===null||Vi(e))&&{sort:e},initializer:Jf(i,o)}}function Qf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,pe(n),i,r)}}function Jf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...o){let a,f,l,s,u,h;return{data:f=n,facets:l=i,channels:a}=t.call(this,n,i,r,...o),{data:u=f,facets:h=l,channels:s}=e.call(this,f,l,{...r,...a},...o),{data:u,facets:h,channels:{...a,...s}}}}function i5(t,e){return(t.initializer!=null?Xi:gf)(t,e)}function Cm(t){return(e,n)=>{const i=Rt(e,t);return{data:e,facets:n.map(r=>r.filter(o=>i[o]))}}}function Em(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function r5(t,{sort:e,...n}={}){return{...(cf(t)&&t.channel!==void 0?Xi:i5)(n,eu(t)),sort:Vi(e)?e:null}}function eu(t){return(typeof t=="function"&&t.length!==1?o5:a5)(t)}function o5(t){return(e,n)=>{const i=(r,o)=>t(e[r],e[o]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function a5(t){let e,n;({channel:e,value:t,order:n}={...lo(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Ca:Ie),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Ie;break;case"descending":n=Ca;break;default:throw new Error(`invalid order: ${n}`)}return(r,o,a)=>{let f;if(e===void 0)f=Rt(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(f=a[e],!f)return{};f=f.value}const l=(s,u)=>n(f[s],f[u]);return{data:r,facets:o.map(s=>s.slice().sort(l))}}}function No(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function f5(t,e,n=Am){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",p5]),e.href!=null&&t.href===void 0&&i.push(["href",iu]),i.filter(([,r])=>r!==void 0).map(([r,o])=>o===null?l5(r):n(r,o,e))}function Am(t,e,n,i=Nm){let r;Un(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const o=i(t,e,n),[a,f]=Ea(o.label);let l;return{name:t,output:r===void 0?a:{value:a,scale:r},initialize(s){o.initialize(s),l=f([])},scope(s,u){o.scope(s,u)},reduce(s,u){l.push(o.reduce(s,u))}}}function l5(t){return{name:t,initialize(){},scope(){},reduce(){}}}function Nm(t,e,n,i=nu){const r=O4(t,n),o=i(e,r);let a,f;return{label:di(o===Aa?null:r,o.label),initialize(l){a=r===void 0?l:Rt(l,r),o.scope==="data"&&(f=o.reduceIndex(gn(l),a))},scope(l,s){o.scope===l&&(f=o.reduceIndex(s,a))},reduce(l,s){return o.scope==null?o.reduceIndex(l,a,s):o.reduceIndex(l,a,f,s)}}}function Gc(t,e){return e?Ar(Oa(t,n=>e[n]),Xs):[[,t]]}function nu(t,e,n=s5){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&Un(t))return h5(t);if(typeof t=="function")return d5(t);if(/^p\d{2}$/i.test(t))return on(D4(t));switch(`${t}`.toLowerCase()){case"first":return iu;case"last":return m5;case"identity":return Dm;case"count":return Aa;case"distinct":return g5;case"sum":return e==null?Aa:b5;case"proportion":return jc(e,"data");case"proportion-facet":return jc(e,"facet");case"deviation":return on(Ra);case"min":return on(un);case"min-index":return on(hb);case"max":return on(ce);case"max-index":return on(cb);case"mean":return Xc(Vr);case"median":return Xc(wl);case"variance":return on(Ia);case"mode":return on(gb)}return n(t)}function s5(t){throw new Error(`invalid reduce: ${t}`)}function u5(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function c5(t,e,n){if(e){const i=e.output.transform(),r=(o,a)=>Ie(i[o],i[a]);t.forEach(o=>o.sort(r))}n&&t.forEach(i=>i.reverse())}function h5(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function d5(t){return{reduceIndex(e,n,i){return t(Zs(n,e),i)}}}function on(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function Xc(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return se(n)?new Date(i):i}}}const Dm={reduceIndex(t,e){return Zs(e,t)}},iu={reduceIndex(t,e){return e[t[0]]}},p5={reduceIndex(t,e){const i=Ar(Ai(t,o=>o.length,o=>e[o]),ns),r=i.slice(-5).reverse();if(r.length<i.length){const o=i.slice(0,-4);r[4]=[` ${o.length.toLocaleString("en-US")} more`,Fn(o,ns)]}return r.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},m5={reduceIndex(t,e){return e[t[t.length-1]]}},Aa={label:"Frequency",reduceIndex(t){return t.length}},g5={label:"Distinct",reduceIndex(t,e){const n=new Pa;for(const i of t)n.add(e[i]);return n.size}},b5=on(Fn);function jc(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>Fn(n,o=>i[o])/r}}function Yr(t,{scale:e,type:n,value:i,filter:r,hint:o,label:a=di(i)},f){return o===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(o=i.hint),Fm(f,{scale:e,type:n,value:Rt(t,i),label:a,filter:r,hint:o})}function _5(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,Yr(e,i,n)]))}function y5(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:o}])=>{const a=r==null?null:e[r];return[i,a==null?o:At(o,a)]}));return n.channels=t,n}function Fm(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&Kf(i,df)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&Kf(i,V4)?null:"opacity";break;case"symbol":n!==!0&&Kf(i,e5)?(e.scale=null,e.value=At(i,tu)):e.scale="symbol";break;default:e.scale=Et.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Et.has(n))throw new Error(`unknown scale: ${n}`);return e}function w5(t,e,n,i,r){const{order:o,reverse:a,reduce:f=!0,limit:l}=r;for(const s in r){if(!Et.has(s))continue;let{value:u,order:h=o,reverse:c=a,reduce:d=f,limit:p=l}=lo(r[s]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),h=h===void 0?m!==(u==="width"||u==="height")?Im:Lm:$5(h),d==null||d===!1)continue;const g=s==="fx"||s==="fy"?x5(e,i[s]):v5(n,s);if(!g)throw new Error(`missing channel for scale: ${s}`);const w=g.value,[y=0,x=1/0]=Bn(p)?p:p<0?[p]:[0,p];if(u==null)g.domain=()=>{let _=Array.from(new Pa(w));return c&&(_=_.reverse()),(y!==0||x!==1/0)&&(_=_.slice(y,x)),_};else{const _=u==="data"?t:u==="height"?Zc(n,"y1","y2"):u==="width"?Zc(n,"x1","x2"):as(n,u,u==="y"?"y2":u==="x"?"x2":void 0),$=nu(d===!0?"max":d,_);g.domain=()=>{let M=ob(gn(w),v=>$.reduceIndex(v,_),v=>w[v]);return h&&M.sort(h),c&&M.reverse(),(y!==0||x!==1/0)&&(M=M.slice(y,x)),M.map(Xs)}}}}function v5(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function x5(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let o=0;o<n.length;++o){const a=i[n[o][0]];for(const f of t[o])r[f]=a}return e}function Zc(t,e,n){const i=as(t,e),r=as(t,n);return At(r,(o,a)=>Math.abs(o-i[a]),Float64Array)}function as(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function $5(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return Lm;case"descending":return Im}throw new Error(`invalid order: ${t}`)}function Lm([t,e],[n,i]){return Ie(e,i)||Ie(t,n)}function Im([t,e],[n,i]){return Ca(e,i)||Ie(t,n)}function Kc(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function M5(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,o)=>r!==i[o]))&&(n=i,e=t(...i)),e)}const k5=M5(t=>new Intl.NumberFormat(t));function S5(t="en-US"){const e=k5(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function T5(t){return w4(t,"Invalid Date")}function C5(t="en-US"){const e=S5(t);return n=>(n instanceof Date?T5:typeof n=="number"?e:Kt)(n)}const li=C5();let fs=0,ls;function E5(){const t=fs;return fs=0,ls=void 0,t}function Tn(t){t!==ls&&(ls=t,console.warn(t),++fs)}const re=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let A5=0;function Qc(){return`plot-clip-${++A5}`}function N5(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:o,target:a,fill:f,fillOpacity:l,stroke:s,strokeWidth:u,strokeOpacity:h,strokeLinejoin:c,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:g,opacity:w,mixBlendMode:y,imageFilter:x,paintOrder:_,pointerEvents:$,shapeRendering:M,channels:v},{ariaLabel:S,fill:C="currentColor",fillOpacity:L,stroke:T="none",strokeOpacity:I,strokeWidth:D,strokeLinecap:H,strokeLinejoin:E,strokeMiterlimit:R,paintOrder:N}){C===null&&(f=null,l=null),T===null&&(s=null,h=null),ie(C)?!ie(T)&&(!ie(f)||v!=null&&v.fill)&&(T="none"):ie(T)&&(!ie(s)||v!=null&&v.stroke)&&(C="none");const[V,W]=pn(f,C),[G,A]=Qt(l,L),[Y,X]=pn(s,T),[nt,J]=Qt(h,I),[rt,q]=Qt(w);qr(X)||(u===void 0&&(u=D),d===void 0&&(d=H),c===void 0&&(c=E),p===void 0&&!G4(c)&&(p=R),!qr(W)&&_===void 0&&(_=N));const[z,F]=Qt(u);return C!==null&&(t.fill=zt(W,"currentColor"),t.fillOpacity=hr(A,1)),T!==null&&(t.stroke=zt(X,"none"),t.strokeWidth=hr(F,1),t.strokeOpacity=hr(J,1),t.strokeLinejoin=zt(c,"miter"),t.strokeLinecap=zt(d,"butt"),t.strokeMiterlimit=hr(p,4),t.strokeDasharray=zt(m,"none"),t.strokeDashoffset=zt(g,"0")),t.target=Kt(a),t.ariaLabel=Kt(S),t.ariaDescription=Kt(r),t.ariaHidden=Kt(o),t.opacity=hr(q,1),t.mixBlendMode=zt(y,"normal"),t.imageFilter=zt(x,"none"),t.paintOrder=zt(_,"normal"),t.pointerEvents=zt($,"auto"),t.shapeRendering=zt(M,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:V,scale:"auto",optional:!0},fillOpacity:{value:G,scale:"auto",optional:!0},stroke:{value:Y,scale:"auto",optional:!0},strokeOpacity:{value:nt,scale:"auto",optional:!0},strokeWidth:{value:z,optional:!0},opacity:{value:rt,scale:"auto",optional:!0}}}function D5(t,e){e&&t.filter(n=>qs(e[n])).append("title").call(L5,e)}function F5(t,e){e&&t.filter(([n])=>qs(e[n])).append("title").call(I5,e)}function L5(t,e){e&&t.text(n=>li(e[n]))}function I5(t,e){e&&t.text(([n])=>li(e[n]))}function _n(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:f,strokeOpacity:l,strokeWidth:s,opacity:u,href:h}){i&&mt(t,"aria-label",c=>i[c]),o&&mt(t,"fill",c=>o[c]),a&&mt(t,"fill-opacity",c=>a[c]),f&&mt(t,"stroke",c=>f[c]),l&&mt(t,"stroke-opacity",c=>l[c]),s&&mt(t,"stroke-width",c=>s[c]),u&&mt(t,"opacity",c=>u[c]),h&&Pm(t,c=>h[c],e),n||D5(t,r)}function R5(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:f,strokeOpacity:l,strokeWidth:s,opacity:u,href:h}){i&&mt(t,"aria-label",([c])=>i[c]),o&&mt(t,"fill",([c])=>o[c]),a&&mt(t,"fill-opacity",([c])=>a[c]),f&&mt(t,"stroke",([c])=>f[c]),l&&mt(t,"stroke-opacity",([c])=>l[c]),s&&mt(t,"stroke-width",([c])=>s[c]),u&&mt(t,"opacity",([c])=>u[c]),h&&Pm(t,([c])=>h[c],e),n||F5(t,r)}function P5({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:o,strokeWidth:a,opacity:f,href:l},{tip:s}){return[t,s?void 0:e,n,i,r,o,a,f,l].filter(u=>u!==void 0)}function O5(t,e,n){const i=Oa(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&Tn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*U5(t,e,n,i){const{z:r}=n,{z:o}=i,a=P5(i,n),f=[...e,...a];for(const l of o?O5(t,o,r):[t]){let s,u;t:for(const h of l){for(const c of f)if(!Rn(c[h])){u&&u.push(-1);continue t}if(s===void 0){u&&(yield u),s=a.map(c=>jn(c[h])),u=[h];continue}u.push(h);for(let c=0;c<a.length;++c)if(jn(a[c][h])!==s[c]){yield u,s=a.map(p=>jn(p[h])),u=[h];continue t}}u&&(yield u)}}function Rm(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=Pe(t,"clip",["frame","sphere"])),t}function B5(t,e,n,i){let r;const{clip:o=i.clip}=e;switch(o){case"frame":{const{width:a,height:f,marginLeft:l,marginRight:s,marginTop:u,marginBottom:h}=n,c=Qc();r=`url(#${c})`,t=Ft("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",c).append("rect").attr("x",l).attr("y",u).attr("width",a-s-l).attr("height",f-u-h)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=i;if(!a)throw new Error('the "sphere" clip option requires a projection');const f=Qc();r=`url(#${f})`,t.append("clipPath").attr("id",f).append("path").attr("d",Ga(a)({type:"Sphere"}));break}}mt(t,"aria-label",e.ariaLabel),mt(t,"aria-description",e.ariaDescription),mt(t,"aria-hidden",e.ariaHidden),mt(t,"clip-path",r)}function Oe(t,e,n,i){B5(t,e,n,i),mt(t,"fill",e.fill),mt(t,"fill-opacity",e.fillOpacity),mt(t,"stroke",e.stroke),mt(t,"stroke-width",e.strokeWidth),mt(t,"stroke-opacity",e.strokeOpacity),mt(t,"stroke-linejoin",e.strokeLinejoin),mt(t,"stroke-linecap",e.strokeLinecap),mt(t,"stroke-miterlimit",e.strokeMiterlimit),mt(t,"stroke-dasharray",e.strokeDasharray),mt(t,"stroke-dashoffset",e.strokeDashoffset),mt(t,"shape-rendering",e.shapeRendering),mt(t,"filter",e.imageFilter),mt(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;mt(t,"pointer-events",r)}function Ue(t,e){z5(t,"mix-blend-mode",e.mixBlendMode),mt(t,"opacity",e.opacity)}function Pm(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const o=this.ownerDocument.createElementNS(Pi.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Pi.xlink,"href",r),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function mt(t,e,n){n!=null&&t.attr(e,n)}function z5(t,e,n){n!=null&&t.style(e,n)}function Se(t,e,{x:n,y:i},r=re,o=re){r+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(o+=i.bandwidth()/2),(r||o)&&t.attr("transform",`translate(${r},${o})`)}function zt(t,e){if((t=Kt(t))!==e)return t}function hr(t,e){if((t=St(t))!==e)return t}const q5=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function ru(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!q5.test(t))throw new Error(`invalid class name: ${t}`);return t}function ou(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function ho({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-o:(i+n-o)/2]}function au(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Rm(n)}}function Ft(t,{document:e}){return Mr(za(t).call(e.documentElement))}const Om=Math.PI,tn=2*Om,Jc=.618;function Y5({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let f,l,s="frame";if(Un(t)){let $;if({type:t,domain:l,inset:$,insetTop:n=$!==void 0?$:n,insetRight:i=$!==void 0?$:i,insetBottom:r=$!==void 0?$:r,insetLeft:o=$!==void 0?$:o,clip:s=s,...f}=t,t==null)return}typeof t!="function"&&({type:t}=Um(t));const{width:u,height:h,marginLeft:c,marginRight:d,marginTop:p,marginBottom:m}=a,g=u-c-d-o-i,w=h-p-m-n-r;if(t=t==null?void 0:t({width:g,height:w,clip:s,...f}),t==null)return;s=H5(s,c,p,u-d,h-m);let y=c+o,x=p+n,_;if(l!=null){const[[$,M],[v,S]]=Ga(t).bounds(l),C=Math.min(g/(v-$),w/(S-M));C>0?(y-=(C*($+v)-g)/2,x-=(C*(M+S)-w)/2,_=Xl({point(L,T){this.stream.point(L*C+y,T*C+x)}})):Tn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return _??(_=y===0&&x===0?Bm():Xl({point($,M){this.stream.point($+y,M+x)}})),{stream:$=>t.stream(_.stream(s($)))}}function Um(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Te(Gv,.7463,.4673);case"albers":return Do(W0,.7463,.4673);case"azimuthal-equal-area":return Te(Xv,4,4);case"azimuthal-equidistant":return Te(jv,tn,tn);case"conic-conformal":return Do(Qv,tn,tn);case"conic-equal-area":return Do(ba,6.1702,2.9781);case"conic-equidistant":return Do(e3,7.312,3.6282);case"equal-earth":return Te(i3,5.4133,2.6347);case"equirectangular":return Te(Jv,tn,Om);case"gnomonic":return Te(r3,3.4641,3.4641);case"identity":return{type:Bm};case"reflect-y":return{type:W5};case"mercator":return Te(Zv,tn,tn);case"orthographic":return Te(o3,2,2);case"stereographic":return Te(a3,2,2);case"transverse-mercator":return Te(f3,tn,tn);default:throw new Error(`unknown projection type: ${t}`)}}function H5(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return E0(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function Te(t,e,n){return{type:({width:i,height:r,rotate:o,precision:a=.15,clip:f})=>{var s,u,h;const l=t();return a!=null&&((s=l.precision)==null||s.call(l,a)),o!=null&&((u=l.rotate)==null||u.call(l,o)),typeof f=="number"&&((h=l.clipAngle)==null||h.call(l,f)),l.scale(Math.min(i/e,r/n)),l.translate([i/2,r/2]),l},aspectRatio:n/e}}function Do(t,e,n){const{type:i,aspectRatio:r}=Te(t,e,n);return{type:o=>{const{parallels:a,domain:f,width:l,height:s}=o,u=i(o);return a!=null&&(u.parallels(a),f===void 0&&u.fitSize([l,s],{type:"Sphere"})),u},aspectRatio:r}}const Bm=fo({stream:t=>t}),W5=fo(Xl({point(t,e){this.stream.point(t,-e)}}));function V5(t,e,n,i){const r=n[t],o=n[e],a=r.length,f=n[t]=new Float64Array(a).fill(NaN),l=n[e]=new Float64Array(a).fill(NaN);let s;const u=i.stream({point(h,c){f[s]=h,l[s]=c}});for(s=0;s<a;++s)u.point(r[s],o[s])}function G5({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(Un(t)&&(t=t.type),t!=null)}function X5(t){if(typeof(t==null?void 0:t.stream)=="function")return Jc;if(Un(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=Um(t);if(e)return e}return Jc}}function j5(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},o={point(a,f){e.push(a),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)Vn(a,o);return[i,r]}const Z5=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],zm=new Map([["accent",A6],["category10",E6],["dark2",N6],["observable10",Z5],["paired",D6],["pastel1",F6],["pastel2",L6],["set1",I6],["set2",R6],["set3",P6],["tableau10",O6]]);function K5(t){return t!=null&&zm.has(`${t}`.toLowerCase())}const th=new Map([...zm,["brbg",en(Np,Dp)],["prgn",en(Fp,Lp)],["piyg",en(Ip,Rp)],["puor",en(Pp,Op)],["rdbu",en(Jl,va)],["rdgy",en(Up,Bp)],["rdylbu",en(ts,xa)],["rdylgn",en(zp,qp)],["spectral",en(Yp,Hp)],["burd",eh(Jl,va)],["buylrd",eh(ts,xa)],["blues",Lt(m1,g1)],["greens",Lt(b1,_1)],["greys",Lt(y1,w1)],["oranges",Lt(k1,S1)],["purples",Lt(v1,x1)],["reds",Lt($1,M1)],["turbo",nn(F1)],["viridis",nn(L1)],["magma",nn(I1)],["inferno",nn(R1)],["plasma",nn(P1)],["cividis",nn(T1)],["cubehelix",nn(C1)],["warm",nn(E1)],["cool",nn(A1)],["bugn",Lt(Wp,Vp)],["bupu",Lt(Gp,Xp)],["gnbu",Lt(jp,Zp)],["orrd",Lt(Kp,Qp)],["pubu",Lt(e1,n1)],["pubugn",Lt(Jp,t1)],["purd",Lt(i1,r1)],["rdpu",Lt(o1,a1)],["ylgn",Lt(s1,u1)],["ylgnbu",Lt(f1,l1)],["ylorbr",Lt(c1,h1)],["ylorrd",Lt(d1,p1)],["rainbow",nh(N1)],["sinebow",nh(D1)]]);function Lt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?De(e,n):t[n])}function en(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?De(e,n):t[n])}function eh(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?De(i=>e(1-i),n):t[n].slice().reverse())}function nn(t){return({length:e})=>De(t,Math.max(2,Math.floor(e)))}function nh(t){return({length:e})=>De(t,Math.floor(e)+1).slice(0,-1)}function qm(t){const e=`${t}`.toLowerCase();if(!th.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return th.get(e)}function bf(t,e){const n=qm(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function Q5(t,e="greys"){const n=new Set,[i,r]=bf(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(r);else if(o===!1)n.add(i);else return;return[...n]}const ih=new Map([["brbg",Dp],["prgn",Lp],["piyg",Rp],["puor",Op],["rdbu",va],["rdgy",Bp],["rdylbu",xa],["rdylgn",qp],["spectral",Hp],["burd",t=>va(1-t)],["buylrd",t=>xa(1-t)],["blues",g1],["greens",_1],["greys",w1],["purples",x1],["reds",M1],["oranges",S1],["turbo",F1],["viridis",L1],["magma",I1],["inferno",R1],["plasma",P1],["cividis",T1],["cubehelix",C1],["warm",E1],["cool",A1],["bugn",Vp],["bupu",Xp],["gnbu",Zp],["orrd",Qp],["pubugn",t1],["pubu",n1],["purd",r1],["rdpu",a1],["ylgnbu",l1],["ylgn",u1],["ylorbr",h1],["ylorrd",p1],["rainbow",N1],["sinebow",D1]]);function fu(t){const e=`${t}`.toLowerCase();if(!ih.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return ih.get(e)}const J5=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function t8(t){return t!=null&&J5.has(`${t}`.toLowerCase())}const Ym=t=>e=>t(1-e),tl=[0,1],rh=new Map([["number",Yt],["rgb",ii],["hsl",zy],["hcl",Hy],["lab",qy]]);function Hm(t){const e=`${t}`.toLowerCase();if(!rh.has(e))throw new Error(`unknown interpolator: ${e}`);return rh.get(e)}function po(t,e,n,{type:i,nice:r,clamp:o,zero:a,domain:f=Vm(t,n),unknown:l,round:s,scheme:u,interval:h,range:c=Et.get(t)===so?c8(n,f):Et.get(t)===uo?h8(n,f):Et.get(t)===co?tl:void 0,interpolate:d=Et.get(t)===bn?u==null&&c!==void 0?ii:fu(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):s?xs:Yt,reverse:p}){if(h=nr(h,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof d!="function"&&(d=Hm(d)),p=!!p,c!==void 0){const m=(f=pe(f)).length,g=(c=pe(c)).length;if(m!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ha(d,c),c=void 0}}if(d.length===1?(p&&(d=Ym(d),p=!1),c===void 0&&(c=Float64Array.from(f,(m,g)=>g/(f.length-1)),c.length===2&&(c=tl)),e.interpolate((c===tl?fo:su)(d))):e.interpolate(d),a){const[m,g]=ye(f);(m>0||g<0)&&(f=zr(f),Gi(f)!==Math.sign(m)?f[f.length-1]=0:f[0]=0)}return p&&(f=Jo(f)),e.domain(f).unknown(l),r&&(e.nice(e8(r,i)),f=e.domain()),c!==void 0&&e.range(c),o&&e.clamp(o),{type:i,domain:f,range:c,scale:e,interpolate:d,interval:h}}function e8(t,e){return t===!0?void 0:typeof t=="number"?t:U4(t,e)}function n8(t,e,n){return po(t,Fs(),e,n)}function i8(t,e,n){return Wm(t,e,{...n,exponent:.5})}function Wm(t,e,{exponent:n=1,...i}){return po(t,up().exponent(n),e,{...i,type:"pow"})}function r8(t,e,{base:n=10,domain:i=d8(e),...r}){return po(t,ap().base(n),e,{...r,domain:i})}function o8(t,e,{constant:n=1,...i}){return po(t,lp().constant(n),e,i)}function a8(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:o="rdylbu",domain:a=p8(e),unknown:f,interpolate:l,reverse:s}){return n===void 0&&(n=l!==void 0?De(l,r):Et.get(t)===bn?bf(o,r):void 0),a.length>0&&(a=cp(a,n===void 0?{length:r}:n).quantiles()),lu(t,e,{domain:a,range:n,reverse:s,unknown:f})}function f8(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:o=Vm(t,e),unknown:a,interpolate:f,reverse:l}){const[s,u]=ye(o);let h;return n===void 0?(h=Nr(s,u,i),h[0]<=s&&h.splice(0,1),h[h.length-1]>=u&&h.pop(),i=h.length+1,n=f!==void 0?De(f,i):Et.get(t)===bn?bf(r,i):void 0):(h=De(Yt(s,u),i+1).slice(1,-1),s instanceof Date&&(h=h.map(c=>new Date(c)))),Gi(pe(o))<0&&h.reverse(),lu(t,e,{domain:h,range:n,reverse:l,unknown:a})}function lu(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:o,range:a=o!==void 0?De(o,n.length+1):Et.get(t)===bn?bf(r,n.length+1):void 0,reverse:f}){n=pe(n);const l=Gi(n);if(!isNaN(l)&&!l8(n,l))throw new Error(`the ${t} scale has a non-monotonic domain`);return f&&(a=Jo(a)),{type:"threshold",scale:hp(l<0?Jo(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function l8(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const o=Wr(r,r=t[n]);if(o!==0&&o!==e)return!1}return!0}function s8(t){return{type:"identity",scale:K4(Et.get(t))?ip():e=>e}}function Hr(t,e=cm){return t.length?[un(t,({value:n})=>n===void 0?n:un(n,e)),ce(t,({value:n})=>n===void 0?n:ce(n,e))]:[0,1]}function Vm(t,e){const n=Et.get(t);return(n===so||n===co||n===uo?u8:Hr)(e)}function u8(t){return[0,t.length?ce(t,({value:e})=>e===void 0?e:ce(e,cm)):1]}function c8(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=Ri(t,.5,({value:a})=>a===void 0?NaN:Ri(a,.25,sf)),r=e.map(a=>3*Math.sqrt(a/i)),o=30/ce(r);return o<1?r.map(a=>a*o):r}function h8(t,e){const n=wl(t,({value:o})=>o===void 0?NaN:wl(o,Math.abs)),i=e.map(o=>12*o/n),r=60/ce(i);return r<1?i.map(o=>o*r):i}function d8(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Hr(t,sf);if(n<0)return Hr(t,Ys)}return[1,10]}function p8(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function su(t){return(e,n)=>i=>t(e+i*(n-e))}function _f(t,e,n,i,{type:r,nice:o,clamp:a,domain:f=Hr(i),unknown:l,pivot:s=0,scheme:u,range:h,symmetric:c=!0,interpolate:d=Et.get(t)===bn?u==null&&h!==void 0?ii:fu(u!==void 0?u:"rdbu"):Yt,reverse:p}){s=+s,f=pe(f);let[m,g]=f;if(f.length>2&&Tn(`Warning: the diverging ${t} scale domain contains extra elements.`),Wr(m,g)<0&&([m,g]=[g,m],p=!p),m=Math.min(m,s),g=Math.max(g,s),typeof d!="function"&&(d=Hm(d)),h!==void 0&&(d=d.length===1?su(d)(...h):Ha(d,h)),p&&(d=Ym(d)),c){const w=n.apply(s),y=w-n.apply(m),x=n.apply(g)-w;y<x?m=n.invert(w-x):y>x&&(g=n.invert(w+y))}return e.domain([m,s,g]).unknown(l).interpolator(d),a&&e.clamp(a),o&&e.nice(o),{type:r,domain:[m,g],pivot:s,interpolate:d,scale:e}}function m8(t,e,n){return _f(t,Tp(),y8,e,n)}function g8(t,e,n){return Gm(t,e,{...n,exponent:.5})}function Gm(t,e,{exponent:n=1,...i}){return _f(t,Ap().exponent(n=+n),x8(n),e,{...i,type:"diverging-pow"})}function b8(t,e,{base:n=10,pivot:i=1,domain:r=Hr(e,i<0?Ys:sf),...o}){return _f(t,Cp().base(n=+n),w8,e,{domain:r,pivot:i,...o})}function _8(t,e,{constant:n=1,...i}){return _f(t,Ep().constant(n=+n),$8(n),e,i)}const y8={apply(t){return t},invert(t){return t}},w8={apply:Math.log,invert:Math.exp},v8={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function x8(t){return t===.5?v8:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function $8(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function Xm(t,e,n,i){return po(t,e,n,i)}function M8(t,e,n){return Xm(t,T6(),e,n)}function k8(t,e,n){return Xm(t,C6(),e,n)}const mo=Symbol("ordinal");function jm(t,e,n,{type:i,interval:r,domain:o,range:a,reverse:f,hint:l}){return r=nr(r,i),o===void 0&&(o=Km(n,r,t)),(i==="categorical"||i===mo)&&(i="ordinal"),f&&(o=Jo(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:i,domain:o,range:a,scale:e,hint:l,interval:r}}function S8(t,e,{type:n,interval:i,domain:r,range:o,scheme:a,unknown:f,...l}){i=nr(i,n),r===void 0&&(r=Km(e,i,t));let s;if(Et.get(t)===mf)s=E8(e),o=o===void 0?A8(s):At(o,tu);else if(Et.get(t)===bn&&(o===void 0&&(n==="ordinal"||n===mo)&&(o=Q5(r,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const u=fu(a),h=o[0],c=o[1]-o[0];o=({length:d})=>De(p=>u(h+c*p),d)}else o=qm(a);if(f===Zl)throw new Error(`implicit unknown on ${t} scale is not supported`);return jm(t,Ds().unknown(f),e,{...l,type:n,domain:r,range:o,hint:s})}function T8(t,e,{align:n=.5,padding:i=.5,...r}){return Zm(l3().align(n).padding(i),e,r,t)}function C8(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:o=t==="fx"||t==="fy"?0:i,...a}){return Zm(Ka().align(n).paddingInner(r).paddingOuter(o),e,a,t)}function Zm(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=jm(i,t,e,n),t.round=r,t}function Km(t,e,n){const i=new Pa;for(const{value:r,domain:o}of t){if(o!==void 0)return o();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,o]=ye(i).map(e.floor,e);return e.range(r,e.offset(o))}if(i.size>1e4&&Et.get(n)===We)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Ar(i,Ie)}function oh(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function E8(t){return{fill:oh(t,"fill"),stroke:oh(t,"stroke")}}function A8(t){return ie(t.fill)?n4:e4}function ss(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:o=n,insetLeft:a=n,round:f,nice:l,clamp:s,zero:u,align:h,padding:c,projection:d,facet:{label:p=e}={},...m}={}){const g={};for(const[w,y]of t){const x=m[w],_=I8(w,y,{round:Et.get(w)===We?f:void 0,nice:l,clamp:s,zero:u,align:h,padding:c,projection:d,...x});if(_){let{label:$=w==="fx"||w==="fy"?p:e,percent:M,transform:v,inset:S,insetTop:C=S!==void 0?S:w==="y"?i:0,insetRight:L=S!==void 0?S:w==="x"?r:0,insetBottom:T=S!==void 0?S:w==="y"?o:0,insetLeft:I=S!==void 0?S:w==="x"?a:0}=x||{};if(v==null)v=void 0;else if(typeof v!="function")throw new Error("invalid scale transform; not a function");_.percent=!!M,_.label=$===void 0?D8(y,_):$,_.transform=v,w==="x"||w==="fx"?(_.insetLeft=+I,_.insetRight=+L):(w==="y"||w==="fy")&&(_.insetTop=+C,_.insetBottom=+T),g[w]=_}}return g}function ah(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:o,type:a,interval:f,label:l}=r;e[i]=B8(r),n[i]=o,o.type=a,f!=null&&(o.interval=f),l!=null&&(o.label=l)}return n}function N8(t,e){const{x:n,y:i,fx:r,fy:o}=t,a=r||o?uu(e):e;r&&fh(r,a),o&&lh(o,a);const f=r||o?Qm(t,e):e;n&&fh(n,f),i&&lh(i,f)}function D8(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!pi(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function F8(t){return Math.sign(Gi(t.domain()))*Math.sign(Gi(t.range()))}function uu(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:o,height:a,facet:{marginTop:f,marginRight:l,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(e,f),marginRight:Math.max(n,l),marginBottom:Math.max(i,s),marginLeft:Math.max(r,u),width:o,height:a}}function Qm({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:f,height:l}=uu(n);return{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+r:f,height:e?e.scale.bandwidth()+i+o:l,facet:{width:f,height:l}}}function fh(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:o=0,marginRight:a=0}=e,f=o+n,l=r-a-i;t.range=[f,Math.max(f,l)],pi(t)||(t.range=tg(t)),t.scale.range(t.range)}Jm(t)}function lh(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:o=0,marginBottom:a=0}=e,f=o+n,l=r-a-i;t.range=[Math.max(f,l),f],pi(t)?t.range.reverse():t.range=tg(t),t.scale.range(t.range)}Jm(t)}function Jm(t){t.round===void 0&&P8(t)&&L8(t)<=30&&t.scale.round(!0)}function L8({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,f=Math.abs(i-n)/Math.max(1,a+o*2);return(f-Math.floor(f))*a}function tg(t){const e=t.scale.domain().length+eg(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,o)=>n+o/(e-1)*(i-n))}function I8(t,e=[],n={}){const i=R8(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&pi({type:i})){const r=e.map(({value:o})=>o).filter(o=>o!==void 0);r.some(se)?Tn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Mi(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Mi(i)}".`):r.some(q4)?Tn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Mi(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Mi(i)}".`):r.some(Y4)&&Tn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Mi(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Mi(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Fo(e,n,He);break;case"identity":switch(Et.get(t)){case We:n=Fo(e,n,He);break;case mf:n=Fo(e,n,O8);break}break;case"utc":case"time":n=Fo(e,n,F4);break}switch(i){case"diverging":return m8(t,e,n);case"diverging-sqrt":return g8(t,e,n);case"diverging-pow":return Gm(t,e,n);case"diverging-log":return b8(t,e,n);case"diverging-symlog":return _8(t,e,n);case"categorical":case"ordinal":case mo:return S8(t,e,n);case"cyclical":case"sequential":case"linear":return n8(t,e,n);case"sqrt":return i8(t,e,n);case"threshold":return lu(t,e,n);case"quantile":return a8(t,e,n);case"quantize":return f8(t,e,n);case"pow":return Wm(t,e,n);case"log":return r8(t,e,n);case"symlog":return o8(t,e,n);case"utc":return k8(t,e,n);case"time":return M8(t,e,n);case"point":return T8(t,e,n);case"band":return C8(t,e,n);case"identity":return s8(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Mi(t){return typeof t=="symbol"?t.description:t}function sh(t){return typeof t=="string"?`${t}`.toLowerCase():t}const uh={toString:()=>"projection"};function R8(t,e,{type:n,domain:i,range:r,scheme:o,pivot:a,projection:f}){if(n=sh(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&f!=null&&(n=uh);for(const s of e){const u=sh(s.type);if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}}if(n===uh)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:s})=>s!==void 0))return;const l=Et.get(t);if(l===so)return"sqrt";if(l===co||l===uo)return"linear";if(l===mf)return"ordinal";if((i||r||[]).length>2)return el(l);if(i!==void 0){if(Vc(i))return el(l);if(se(i))return"utc"}else{const s=e.map(({value:u})=>u).filter(u=>u!==void 0);if(s.some(Vc))return el(l);if(s.some(se))return"utc"}if(l===bn){if(a!=null||t8(o))return"diverging";if(K5(o))return"categorical"}return"linear"}function el(t){switch(t){case We:return"point";case bn:return mo;default:return"ordinal"}}function pi({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===mo}function eg({type:t}){return t==="threshold"}function P8({type:t}){return t==="point"||t==="band"}function ji(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Fo(t,{domain:e,...n},i){var r;for(const o of t)o.value!==void 0&&(e===void 0&&(e=(r=o.value)==null?void 0:r.domain),o.value=i(o.value));return{domain:e===void 0?e:i(e),...n}}function O8(t){return At(t,tu)}function U8(t){return e=>{if(!Et.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function B8({scale:t,type:e,domain:n,range:i,interpolate:r,interval:o,transform:a,percent:f,pivot:l}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const s=t.unknown?t.unknown():void 0;return{type:e,domain:zr(n),...i!==void 0&&{range:zr(i)},...a!==void 0&&{transform:a},...f&&{percent:f},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function z8(t,e,n={}){let i=.5-re,r=.5+re,o=.5+re,a=.5-re;for(const{marginTop:m,marginRight:g,marginBottom:w,marginLeft:y}of e)m>i&&(i=m),g>r&&(r=g),w>o&&(o=w),y>a&&(a=y);let{margin:f,marginTop:l=f!==void 0?f:i,marginRight:s=f!==void 0?f:r,marginBottom:u=f!==void 0?f:o,marginLeft:h=f!==void 0?f:a}=n;l=+l,s=+s,u=+u,h=+h;let{width:c=640,height:d=q8(t,n,{width:c,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,l-i+u-o)}=n;c=+c,d=+d;const p={width:c,height:d,marginTop:l,marginRight:s,marginBottom:u,marginLeft:h};if(t.fx||t.fy){let{margin:m,marginTop:g=m!==void 0?m:l,marginRight:w=m!==void 0?m:s,marginBottom:y=m!==void 0?m:u,marginLeft:x=m!==void 0?m:h}=n.facet??{};g=+g,w=+w,y=+y,x=+x,p.facet={marginTop:g,marginRight:w,marginBottom:y,marginLeft:x}}return p}function q8({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:o},{width:a,marginTopDefault:f,marginRightDefault:l,marginBottomDefault:s,marginLeftDefault:u}){const h=n?n.scale.domain().length:1,c=X5(r);if(c){const p=i?i.scale.domain().length:1,m=(1.1*h-.1)/(1.1*p-.1)*c,g=Math.max(.1,Math.min(10,m));return Math.round((a-u-l)*g+f+s)}const d=e?pi(e)?e.scale.domain().length:Math.max(7,17/h):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=ch("y",e)/(ch("x",t)*o),m=i?i.scale.bandwidth():1,g=n?n.scale.bandwidth():1,w=m*(a-u-l)-t.insetLeft-t.insetRight;return(p*w+e.insetTop+e.insetBottom)/g+f+s}return!!(e||n)*Math.max(1,Math.min(60,d*h))*20+!!i*30+60}function ch(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const f=e.scale.exponent();r=l=>Math.pow(l,f);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=ye(i);return Math.abs(r(a)-r(o))}function Y8(t,e){const{fx:n,fy:i}=ss(t,e),r=n==null?void 0:n.scale.domain(),o=i==null?void 0:i.scale.domain();return r&&o?ib(r,o).map(([a,f],l)=>({x:a,y:f,i:l})):r?r.map((a,f)=>({x:a,i:f})):o?o.map((a,f)=>({y:a,i:f})):void 0}function H8(t,{x:e,y:n}){return e&&(e=us(e)),n&&(n=us(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function cu(t,{fx:e,fy:n}){const i=gn(t),r=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?Ai(i,a=>(a.fx=r[a[0]],a.fy=o[a[0]],a),a=>r[a],a=>o[a]):e?Ai(i,a=>(a.fx=r[a[0]],a),a=>r[a]):Ai(i,a=>(a.fy=o[a[0]],a),a=>o[a])}function W8(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:o})=>`translate(${t(r)-i},${e(o)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function V8(t){const e=[],n=new Uint32Array(Fn(t,i=>i.length));for(const i of t){let r=0;for(const o of t)i!==o&&(n.set(o,r),r+=o.length);e.push(n.slice(0,r))}return e}const G8=new Map([["top",nl],["right",ol],["bottom",il],["left",rl],["top-left",Lo(nl,rl)],["top-right",Lo(nl,ol)],["bottom-left",Lo(il,rl)],["bottom-right",Lo(il,ol)],["top-empty",Z8],["right-empty",J8],["bottom-empty",K8],["left-empty",Q8],["empty",t7]]);function X8(t){if(t==null)return null;const e=G8.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const hh=new WeakMap;function us(t){let e=hh.get(t);return e||hh.set(t,e=new ti(At(t,(n,i)=>[n,i]))),e}function zn(t,e){return us(t).get(e)}function j8(t,e,n){return e=jn(e),n=jn(n),t.find(i=>Object.is(jn(i.x),e)&&Object.is(jn(i.y),n))}function yf(t,e,n){var i;return(i=j8(t,e,n))==null?void 0:i.empty}function nl(t,{y:e},{y:n}){return e?zn(e,n)===0:!0}function il(t,{y:e},{y:n}){return e?zn(e,n)===e.length-1:!0}function rl(t,{x:e},{x:n}){return e?zn(e,n)===0:!0}function ol(t,{x:e},{x:n}){return e?zn(e,n)===e.length-1:!0}function Z8(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=zn(e,i);if(o>0)return yf(t,n,e[o-1])}function K8(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=zn(e,i);if(o<e.length-1)return yf(t,n,e[o+1])}function Q8(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=zn(e,n);if(o>0)return yf(t,e[o-1],i)}function J8(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=zn(e,n);if(o<e.length-1)return yf(t,e[o+1],i)}function t7(t,e,{empty:n}){return n}function Lo(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function al(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:o})=>{var a;return((a=i.get(r))==null?void 0:a.get(o))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class ue{constructor(e,n={},i={},r){const{facet:o="auto",facetAnchor:a,fx:f,fy:l,sort:s,dx:u=0,dy:h=0,margin:c=0,marginTop:d=c,marginRight:p=c,marginBottom:m=c,marginLeft:g=c,clip:w=r==null?void 0:r.clip,channels:y,tip:x,render:_}=i;if(this.data=e,this.sort=Vi(s)?s:null,this.initializer=Xi(i).initializer,this.transform=this.initializer?i.transform:gf(i).transform,o===null||o===!1?this.facet=null:(this.facet=Pe(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===Vo&&typeof f=="string"?[f]:f,this.fy=e===Vo&&typeof l=="string"?[l]:l),this.facetAnchor=X8(a),n=Sm(n),y!==void 0&&(n={...e7(y),...n}),r!==void 0&&(n={...N5(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([$,M])=>{if(cf(M.value)){const{value:v,label:S=M.label,scale:C=M.scale}=M.value;M={...M,label:S,scale:C,value:v}}if(e===Vo&&typeof M.value=="string"){const{value:v}=M;M={...M,value:[v]}}return[$,M]}).filter(([$,{value:M,optional:v}])=>{if(M!=null)return!0;if(v)return!1;throw new Error(`missing channel value: ${$}`)})),this.dx=+u,this.dy=+h,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+g,this.clip=Rm(w),this.tip=n7(x),this.facet==="super"){if(f||l)throw new Error("super-faceting cannot use fx or fy");for(const $ in this.channels){const{scale:M}=n[$];if(!(M!=="x"&&M!=="y"))throw new Error("super-faceting cannot use x or y")}}_!=null&&(this.render=ig(_,this.render))}initialize(e,n,i){let r=pe(this.data);e===void 0&&r!=null&&(e=[gn(r)]);const o=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=pe(r)),e!==void 0&&(e.original=o);const a=_5(this.channels,r);return this.sort!=null&&w5(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:o=Rn}=n[r];if(o!==null){const a=i[r];e=e.filter(f=>o(a[f]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const o=r.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&V5(r,o,n,i.projection)}}scale(e,n,i){const r=y5(e,n);return i.projection&&this.project(e,r,i),r}}function ng(...t){return t.plot=ue.prototype.plot,t}function ig(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,o,a,f){return t.call(this,n,i,r,o,a,(l,s,u,h,c)=>e.call(this,l,s,u,h,c,f))}}function e7(t){return Object.fromEntries(Object.entries(Sm(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:lo(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function n7(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Pe(t,"tip",["x","y","xy"]):t}function wf(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:Un(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const dh=new WeakMap;function hu(t,e,{x:n,y:i,px:r,py:o,maxRadius:a=40,channels:f,render:l,...s}={}){return a=+a,r!=null&&(n??(n=null),f={...f,px:{value:r,scale:"x"}}),o!=null&&(i??(i=null),f={...f,py:{value:o,scale:"y"}}),{x:n,y:i,channels:f,...s,render:ig(function(u,h,c,d,p,m){p={...p,pointerSticky:!1};const g=p.ownerSVGElement,{data:w}=p.getMarkState(this);let y=dh.get(g);y||dh.set(g,y={sticky:!1,roots:[],renders:[]});let x=y.renders.push(X)-1;const{x:_,y:$,fx:M,fy:v}=h;let S=M?M(u.fx)-d.marginLeft:0,C=v?v(u.fy)-d.marginTop:0;_!=null&&_.bandwidth&&(S+=_.bandwidth()/2),$!=null&&$.bandwidth&&(C+=$.bandwidth()/2);const L=u.fi!=null;let T;if(L){let q=y.facetStates;q||(y.facetStates=q=new Map),T=q.get(this),T||q.set(this,T=new Map)}const[I,D]=ho(this,d),{px:H,py:E}=c,R=H?q=>H[q]:rg(c,I),N=E?q=>E[q]:og(c,D);let V,W,G,A;function Y(q,z){if(L)if(A&&(A=cancelAnimationFrame(A)),q==null)T.delete(u.fi);else{T.set(u.fi,z),A=requestAnimationFrame(()=>{A=null;for(const[F,U]of T)if(U<z||U===z&&F<u.fi){q=null;break}X(q)});return}X(q)}function X(q){if(V===q&&G===y.sticky)return;V=q,G=p.pointerSticky=y.sticky;const z=V==null?[]:[V];L&&(z.fx=u.fx,z.fy=u.fy,z.fi=u.fi);const F=m(z,h,c,d,p);if(W){if(L){const U=W.parentNode,Q=W.getAttribute("transform"),P=F.getAttribute("transform");Q?F.setAttribute("transform",Q):F.removeAttribute("transform"),P?U.setAttribute("transform",P):U.removeAttribute("transform"),F.removeAttribute("aria-label"),F.removeAttribute("aria-description"),F.removeAttribute("aria-hidden")}W.replaceWith(F)}return y.roots[x]=W=F,V==null&&(T==null?void 0:T.size)>1||p.dispatchValue(V==null?null:w[V]),F}function nt(q){if(y.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[z,F]=sy(q);z-=S,F-=C;const U=z<d.marginLeft||z>d.width-d.marginRight?1:t,Q=F<d.marginTop||F>d.height-d.marginBottom?1:e;let P=null,ht=a*a;for(const ot of u){const pt=U*(R(ot)-z),ft=Q*(N(ot)-F),ut=pt*pt+ft*ft;ut<=ht&&(P=ot,ht=ut)}if(P!=null&&(t!==1||e!==1)){const ot=R(P)-z,pt=N(P)-F;ht=ot*ot+pt*pt}Y(P,ht)}function J(q){q.pointerType==="mouse"&&V!=null&&(y.sticky&&y.roots.some(z=>z==null?void 0:z.contains(q.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(z=>z(null))):(y.sticky=!0,X(V)),q.stopImmediatePropagation()))}function rt(q){q.pointerType==="mouse"&&(y.sticky||Y(null))}return g.addEventListener("pointerenter",nt),g.addEventListener("pointermove",nt),g.addEventListener("pointerdown",J),g.addEventListener("pointerleave",rt),X(null)},l)}}function i7(t){return hu(1,1,t)}function r7(t){return hu(1,.01,t)}function ph(t){return hu(.01,1,t)}function rg({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function og({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function ag(t){return pi(t)&&t.interval===void 0?void 0:"tabular-nums"}function o7(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:o=44+i,marginTop:a=18,marginRight:f=0,marginBottom:l=16+i,marginLeft:s=0,style:u,ticks:h=(r-s-f)/64,tickFormat:c,fontVariant:d=ag(t),round:p=!0,opacity:m,className:g}=e;const w=au(e);g=ru(g),m=Qt(m)[1],c===null&&(c=()=>null);const y=Ft("svg",w).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",o).attr("viewBox",`0 0 ${r} ${o}`).call(I=>I.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(ou,u);let x=I=>I.selectAll(".tick line").attr("y1",a+l-o),_;const $=p?(I,D)=>I.rangeRound(D):(I,D)=>I.range(D),{type:M,domain:v,range:S,interpolate:C,scale:L,pivot:T}=t;if(C){const I=S===void 0?C:Ha(C.length===1?su(C):C,S);_=$(L.copy(),De(Yt(s,r-f),Math.min(v.length+(T!==void 0),S===void 0?1/0:S.length)));const D=256,H=w.document.createElement("canvas");H.width=D,H.height=1;const E=H.getContext("2d");for(let R=0,N=D-1;R<D;++R)E.fillStyle=I(R/N),E.fillRect(R,0,1,1);y.append("image").attr("opacity",m).attr("x",s).attr("y",a).attr("width",r-s-f).attr("height",o-a-l).attr("preserveAspectRatio","none").attr("xlink:href",H.toDataURL())}else if(M==="threshold"){const I=v,D=c===void 0?H=>H:typeof c=="string"?tr(c):c;_=$(Fs().domain([-1,S.length-1]),[s,r-f]),y.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",(H,E)=>_(E-1)).attr("y",a).attr("width",(H,E)=>_(E)-_(E-1)).attr("height",o-a-l).attr("fill",H=>H),h=At(I,(H,E)=>E),c=H=>D(I[H],H)}else _=$(Ka().domain(v),[s,r-f]),y.append("g").attr("fill-opacity",m).selectAll().data(v).enter().append("rect").attr("x",_).attr("y",a).attr("width",Math.max(0,_.bandwidth()-1)).attr("height",o-a-l).attr("fill",L),x=()=>{};return y.append("g").attr("transform",`translate(0,${o-l})`).call(Sb(_).ticks(Array.isArray(h)?null:h,typeof c=="string"?c:void 0).tickFormat(typeof c=="function"?c:void 0).tickSize(i).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",zt(d,"normal")).call(x).call(I=>I.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const fg=Math.PI/180;function go(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=fl(n),t.markerMid=fl(i),t.markerEnd=fl(r)}function fl(t){if(t==null||t===!1)return null;if(t===!0)return gh;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return mh("auto");case"arrow-reverse":return mh("auto-start-reverse");case"dot":return a7;case"circle":case"circle-fill":return gh;case"circle-stroke":return f7;case"tick":return ll("auto");case"tick-x":return ll(90);case"tick-y":return ll(0)}throw new Error(`invalid marker: ${t}`)}function mh(t){return(e,n)=>Ft("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function a7(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function gh(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function f7(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function ll(t){return(e,n)=>Ft("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(i=>i.append("path").attr("d","M0,-3v6")).node()}let l7=0;function vf(t,e,{stroke:n},i){return lg(t,e,n&&(r=>n[r]),i)}function s7(t,e,{stroke:n},i){return lg(t,e,n&&(([r])=>n[r]),i)}function lg(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},o=()=>r,a){const f=new Map;function l(s){return function(u){const h=o(u);let c=f.get(s);c||f.set(s,c=new Map);let d=c.get(h);if(!d){const p=this.parentNode.insertBefore(s(h,a),this),m=`plot-marker-${++l7}`;p.setAttribute("id",m),c.set(h,d=`url(#${m})`)}return d}}e&&t.attr("marker-start",l(e)),n&&t.attr("marker-mid",l(n)),i&&t.attr("marker-end",l(i))}function du({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=ug(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function sg({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=ug(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function ug(t,e,n){return t===void 0&&e===void 0&&n===void 0?re?[1,0]:[.5,.5]:[e,n]}function cg(t,{interval:e}){return t={...lo(t)},t.interval=Ks(t.interval===void 0?e:t.interval),t}function hg(t,e,n,i){const{[t]:r,[`${t}1`]:o,[`${t}2`]:a}=n,{value:f,interval:l}=cg(r,n);if(f==null||l==null&&!i)return n;const s=di(r);if(l==null){let d;const p={transform:m=>d||(d=Rt(m,f)),label:s};return{...n,[t]:void 0,[`${t}1`]:o===void 0?p:o,[`${t}2`]:a===void 0&&!(o===a&&i)?p:a}}let u,h;function c(d){return h!==void 0&&d===u?h:h=At(Rt(u=d,f),p=>l.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:c,label:s}:o,[`${t}2`]:a===void 0?{transform:d=>c(d).map(p=>l.offset(p)),label:s}:a})}function dg(t,e,n){const{[t]:i}=n,{value:r,interval:o}=cg(i,n);return r==null||o==null?n:e({...n,[t]:{label:di(i),transform:a=>{const f=At(Rt(a,r),s=>o.floor(s)),l=f.map(s=>o.offset(s));return f.map(se(f)?(s,u)=>s==null||isNaN(s=+s)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((s+u)/2):(s,u)=>s==null||(u=l[u],u==null)?NaN:(+s+ +u)/2)}}})}function u7(t={}){return hg("x",du,t)}function pg(t={}){return hg("y",sg,t)}function c7(t={}){return dg("x",du,t)}function h7(t={}){return dg("y",sg,t)}const mg={ariaLabel:"rule",fill:null,stroke:"currentColor"};class d7 extends ue{constructor(e,n={}){const{x:i,y1:r,y2:o,inset:a=0,insetTop:f=a,insetBottom:l=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},wf(n,"x"),mg),this.insetTop=St(f),this.insetBottom=St(l),go(this,n)}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y1:s,y2:u}=i,{width:h,height:c,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=r,{insetTop:w,insetBottom:y}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{x:l&&a},re,0).call(x=>x.selectAll().data(e).enter().append("line").call(Ue,this).attr("x1",l?_=>l[_]:(m+h-p)/2).attr("x2",l?_=>l[_]:(m+h-p)/2).attr("y1",s&&!ji(f)?_=>s[_]+w:d+w).attr("y2",u&&!ji(f)?f.bandwidth?_=>u[_]+f.bandwidth()-y:_=>u[_]-y:c-g-y).call(_n,this,i).call(vf,this,i,o)).node()}}class p7 extends ue{constructor(e,n={}){const{x1:i,x2:r,y:o,inset:a=0,insetRight:f=a,insetLeft:l=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},wf(n,"y"),mg),this.insetRight=St(f),this.insetLeft=St(l),go(this,n)}render(e,n,i,r,o){const{x:a,y:f}=n,{y:l,x1:s,x2:u}=i,{width:h,height:c,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=r,{insetLeft:w,insetRight:y}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{y:l&&f},0,re).call(x=>x.selectAll().data(e).enter().append("line").call(Ue,this).attr("x1",s&&!ji(a)?_=>s[_]+w:m+w).attr("x2",u&&!ji(a)?a.bandwidth?_=>u[_]+a.bandwidth()-y:_=>u[_]-y:h-p-y).attr("y1",l?_=>l[_]:(d+c-g)/2).attr("y2",l?_=>l[_]:(d+c-g)/2).call(_n,this,i).call(vf,this,i,o)).node()}}function pu(t,e){let{x:n=jt,y:i,y1:r,y2:o,...a}=pg(e);return[r,o]=gg(i,r,o),new d7(t,{...a,x:n,y1:r,y2:o})}function m7(t,e){let{y:n=jt,x:i,x1:r,x2:o,...a}=u7(e);return[r,o]=gg(i,r,o),new p7(t,{...a,y:n,x1:r,x2:o})}function gg(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function mu(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let o=0;o<n;++o)r+=e[o](i)+t[o+1];return r}}const g7={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},bg="";class gu extends ue{constructor(e,n={}){const{x:i,y:r,text:o=Bn(e)&&km(e)?jt:Gs,frameAnchor:a,textAnchor:f=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:l=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:u=1/0,textOverflow:h,monospace:c,fontFamily:d=c?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:g,fontWeight:w,rotate:y}=n,[x,_]=Qt(y,0),[$,M]=x7(p);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:$,optional:!0},rotate:{value:z4(x),optional:!0},text:{value:o,filter:qs,optional:!0}},n,g7),this.rotate=_,this.textAnchor=zt(f,"middle"),this.lineAnchor=Pe(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+u,this.textOverflow=_g(h),this.monospace=!!c,this.fontFamily=Kt(d),this.fontSize=M,this.fontStyle=Kt(m),this.fontVariant=Kt(g),this.fontWeight=Kt(w),this.frameAnchor=pf(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=wg(this),this.clipLine=vg(this)}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y:s,rotate:u,text:h,title:c,fontSize:d}=i,{rotate:p}=this,[m,g]=ho(this,r);return Ft("svg:g",o).call(Oe,this,r,o).call(yg,this,h,r).call(Se,this,{x:l&&a,y:s&&f}).call(w=>w.selectAll().data(e).enter().append("text").call(Ue,this).call(b7,this,h,c).attr("transform",mu`translate(${l?y=>l[y]:m},${s?y=>s[y]:g})${u?y=>` rotate(${u[y]})`:p?` rotate(${p})`:""}`).call(mt,"font-size",d&&(y=>d[y])).call(_n,this,i)).node()}}function _g(t){return t==null?null:Pe(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function b7(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:o,textOverflow:a,splitLines:f,clipLine:l}=e;t.each(function(s){const u=f(li(n[s])??"").map(l),h=u.length,c=r==="top"?.71:r==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let p=0;p<h;++p){if(++d,!u[p])continue;const m=this.ownerDocument.createElementNS(Pi.svg,"tspan");m.setAttribute("x",0),p===d-1?m.setAttribute("y",`${(c+p)*o}em`):m.setAttribute("dy",`${d*o}em`),m.textContent=u[p],this.appendChild(m),d=0}}else c&&this.setAttribute("y",`${c*o}em`),this.textContent=u[0];if(a&&!i&&u[0]!==n[s]){const d=this.ownerDocument.createElementNS(Pi.svg,"title");d.textContent=n[s],this.appendChild(d)}})}function bu(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=hf(e,n)),new gu(t,{...i,x:e,y:n})}function _7(t,{x:e=jt,...n}={}){return new gu(t,h7({...n,x:e}))}function y7(t,{y:e=jt,...n}={}){return new gu(t,c7({...n,y:e}))}function yg(t,e,n){mt(t,"text-anchor",e.textAnchor),mt(t,"font-family",e.fontFamily),mt(t,"font-size",e.fontSize),mt(t,"font-style",e.fontStyle),mt(t,"font-variant",e.fontVariant===void 0?w7(n):e.fontVariant),mt(t,"font-weight",e.fontWeight)}function w7(t){return t&&(H4(t)||se(t))?"tabular-nums":void 0}const v7=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function x7(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),v7.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function $7(t,e,n){const i=[];let r,o=0;for(const[a,f,l]of M7(t)){if(r===void 0&&(r=a),o>r&&n(t,r,f)>e&&(i.push(t.slice(r,o)+(t[o-1]===bg?"-":"")),r=a),l){i.push(t.slice(r,f)),r=void 0;continue}o=f}return i}function*M7(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case bg:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const bh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function _u(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=ir(t,r))i+=bh[t[r]]??($g(t,r)?120:bh.e);return i}function yu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=ir(t,r))i+=$g(t,r)?126:63;return i}function wg({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const i=t?yu:_u,r=e*100;return o=>$7(o,r,i)}function vg({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const i=t?yu:_u,r=e*100;switch(n){case"clip-start":return o=>yh(o,r,i,"");case"clip-end":return o=>_h(o,r,i,"");case"ellipsis-start":return o=>yh(o,r,i,Fi);case"ellipsis-middle":return o=>k7(o,r,i,Fi);case"ellipsis-end":return o=>_h(o,r,i,Fi)}}const Fi="";function Zi(t,e,n,i){const r=[];let o=0;for(let a=0,f=0,l=t.length;a<l;a=f){f=ir(t,a);const s=n(t,a,f);if(o+s>e){for(o+=i;o>e&&a>0;)f=a,a=r.pop(),o-=n(t,a,f);return[a,e-o]}o+=s,r.push(a)}return[-1,0]}function _h(t,e,n,i){t=t.trim();const r=n(i),[o]=Zi(t,e,n,r);return o<0?t:t.slice(0,o).trimEnd()+i}function k7(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i)/2,[a,f]=Zi(t,e/2,n,o),[l]=Zi(t,r-e/2-f+o,n,-o);return l<0?i:t.slice(0,a).trimEnd()+i+t.slice(ir(t,l)).trimStart()}function yh(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i),[a]=Zi(t,r-e+o,n,-o);return a<0?i:i+t.slice(ir(t,a)).trimStart()}const cs=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,wh=new RegExp("\\p{Extended_Pictographic}","uy");function ir(t,e){return e+=S7(t,e)?2:1,C7(t,e)&&(e=cs.lastIndex),T7(t,e)?ir(t,e+1):e}function xg(t,e){return t.charCodeAt(e)<128}function S7(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function T7(t,e){return t.charCodeAt(e)===8205}function C7(t,e){return xg(t,e)?!1:(cs.lastIndex=e,cs.test(t))}function $g(t,e){return xg(t,e)?!1:(wh.lastIndex=e,wh.test(t))}const E7={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},Mg=3.5,A7=Mg*5,kg={draw(t,e,n){const i=e*n/A7;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},N7={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},D7=new Map([["arrow",kg],["spike",N7]]);function F7(t){return t&&typeof t.draw=="function"}function L7(t){if(F7(t))return t;const e=D7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class Sg extends ue{constructor(e,n={}){const{x:i,y:r,r:o=Mg,length:a,rotate:f,shape:l=kg,anchor:s="middle",frameAnchor:u}=n,[h,c]=Qt(a,12),[d,p]=Qt(f,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,E7),this.r=+o,this.length=c,this.rotate=p,this.shape=L7(l),this.anchor=Pe(s,"anchor",["start","middle","end"]),this.frameAnchor=pf(u)}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y:s,length:u,rotate:h}=i,{length:c,rotate:d,anchor:p,shape:m,r:g}=this,[w,y]=ho(this,r);return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{x:l&&a,y:s&&f}).call(x=>x.selectAll().data(e).enter().append("path").call(Ue,this).attr("transform",mu`translate(${l?_=>l[_]:w},${s?_=>s[_]:y})${h?_=>` rotate(${h[_]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?u?_=>` translate(0,${u[_]})`:` translate(0,${c})`:u?_=>` translate(0,${u[_]/2})`:` translate(0,${c/2})`}`).attr("d",u?_=>{const $=Mn();return m.draw($,u[_],g),$}:(()=>{const _=Mn();return m.draw(_,c,g),_})()).call(_n,this,i)).node()}}function I7(t,e={}){const{x:n=jt,...i}=e;return new Sg(t,{...i,x:n})}function R7(t,e={}){const{y:n=jt,...i}=e;return new Sg(t,{...i,y:n})}function qn(t,e){return arguments.length<2&&!Bn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function xf({anchor:t}={},e){return t===void 0?e[0]:Pe(t,"anchor",e)}function Tg(t){return xf(t,["left","right"])}function Cg(t){return xf(t,["right","left"])}function Eg(t){return xf(t,["bottom","top"])}function Ag(t){return xf(t,["top","bottom"])}function Ng(){const[t,e]=qn(...arguments);return Fg("y",Tg(e),t,e)}function P7(){const[t,e]=qn(...arguments);return Fg("fy",Cg(e),t,e)}function Dg(){const[t,e]=qn(...arguments);return Lg("x",Eg(e),t,e)}function O7(){const[t,e]=qn(...arguments);return Lg("fx",Ag(e),t,e)}function Fg(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:f=1,fill:l=i,fillOpacity:s=r,textAnchor:u,textStroke:h,textStrokeOpacity:c,textStrokeWidth:d,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:g,x:w,margin:y,marginTop:x=y===void 0?20:y,marginRight:_=y===void 0?e==="right"?40:0:y,marginBottom:$=y===void 0?20:y,marginLeft:M=y===void 0?e==="left"?40:0:y,label:v,labelAnchor:S,labelArrow:C,labelOffset:L,...T}){return p=St(p),m=St(m),g=St(g),S!==void 0&&(S=Pe(S,"labelAnchor",["center","top","bottom"])),C=qg(C),ng(p&&!ie(o)?U7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:g,x:w,...T}):null,ie(l)?null:z7(t,e,n,{fill:l,fillOpacity:s,stroke:h,strokeOpacity:c,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:g,x:w,marginTop:x,marginRight:_,marginBottom:$,marginLeft:M,...T}),!ie(l)&&v!==null?bu([],Og({fill:l,fillOpacity:s,...T},function(I,D,H,E,R){const N=E[t],{marginTop:V,marginRight:W,marginBottom:G,marginLeft:A}=t==="y"&&R.inset||R,Y=S??(N.bandwidth?"center":"top"),X=L??(e==="right"?W:A)-3;return Y==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=Y,this.frameAnchor=`${Y}-${e}`,this.rotate=0),this.dy=Y==="top"?3-V:Y==="bottom"?G-3:0,this.dx=e==="right"?X:-X,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[zg(t,N,{anchor:e,label:v,labelAnchor:Y,labelArrow:C})]}}}})):null)}function Lg(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:f=1,fill:l=i,fillOpacity:s=r,textAnchor:u,textStroke:h,textStrokeOpacity:c,textStrokeWidth:d,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:g,y:w,margin:y,marginTop:x=y===void 0?e==="top"?30:0:y,marginRight:_=y===void 0?20:y,marginBottom:$=y===void 0?e==="bottom"?30:0:y,marginLeft:M=y===void 0?20:y,label:v,labelAnchor:S,labelArrow:C,labelOffset:L,...T}){return p=St(p),m=St(m),g=St(g),S!==void 0&&(S=Pe(S,"labelAnchor",["center","left","right"])),C=qg(C),ng(p&&!ie(o)?B7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:g,y:w,...T}):null,ie(l)?null:q7(t,e,n,{fill:l,fillOpacity:s,stroke:h,strokeOpacity:c,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:g,y:w,marginTop:x,marginRight:_,marginBottom:$,marginLeft:M,...T}),!ie(l)&&v!==null?bu([],Og({fill:l,fillOpacity:s,...T},function(I,D,H,E,R){const N=E[t],{marginTop:V,marginRight:W,marginBottom:G,marginLeft:A}=t==="x"&&R.inset||R,Y=S??(N.bandwidth?"center":"right"),X=L??(e==="top"?V:G)-3;return Y==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${Y}`,this.textAnchor=Y==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-X:X,this.dx=Y==="right"?W-3:Y==="left"?3-A:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[zg(t,N,{anchor:e,label:v,labelAnchor:Y,labelArrow:C})]}}}})):null)}function U7(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:f=e,tickSize:l,inset:s=0,insetLeft:u=s,insetRight:h=s,dx:c=0,y:d=t==="y"?void 0:null,...p}){return rr(R7,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:o,facetAnchor:a,frameAnchor:f,y:d,...p,dx:e==="left"?+c-re+ +u:+c+re-h,anchor:"start",length:l,shape:e==="left"?Z7:K7})}function B7(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:f=e,tickSize:l,inset:s=0,insetTop:u=s,insetBottom:h=s,dy:c=0,x:d=t==="x"?void 0:null,...p}){return rr(I7,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:o,strokeLinecap:r,facetAnchor:a,frameAnchor:f,x:d,...p,dy:e==="bottom"?+c-re-h:+c+re+ +u,anchor:"start",length:l,shape:e==="bottom"?X7:j7})}function z7(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*fg):0),text:l,textAnchor:s=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:h,inset:c=0,insetLeft:d=c,insetRight:p=c,dx:m=0,y:g=t==="y"?void 0:null,...w}){return rr(y7,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l,textAnchor:s,lineAnchor:u,fontVariant:h,rotate:a,y:g,...w,dx:e==="left"?+m-o-f+ +d:+m+ +o+ +f-p},function(y,x,_,$,M){h===void 0&&(this.fontVariant=Bg(y)),l===void 0&&(M.text=Ug(y,x,_,$,e))})}function q7(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*fg):0),text:l,textAnchor:s=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:h,inset:c=0,insetTop:d=c,insetBottom:p=c,dy:m=0,x:g=t==="x"?void 0:null,...w}){return rr(_7,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:s,lineAnchor:u,fontVariant:h,rotate:a,x:g,...w,dy:e==="bottom"?+m+ +o+ +f-p:+m-o-f+ +d},function(y,x,_,$,M){h===void 0&&(this.fontVariant=Bg(y)),l===void 0&&(M.text=Ug(y,x,_,$,e))})}function Y7(){const[t,e]=qn(...arguments);return Ig("y",Tg(e),t,e)}function H7(){const[t,e]=qn(...arguments);return Ig("fy",Cg(e),t,e)}function W7(){const[t,e]=qn(...arguments);return Rg("x",Eg(e),t,e)}function V7(){const[t,e]=qn(...arguments);return Rg("fx",Ag(e),t,e)}function Ig(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:o=e==="left"?r:null,x2:a=e==="right"?r:null,...f}){return rr(m7,t,e,`${t}-grid`,n,{y:i,x1:o,x2:a,...Pg(f)})}function Rg(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:o=e==="top"?r:null,y2:a=e==="bottom"?r:null,...f}){return rr(pu,t,e,`${t}-grid`,n,{x:i,y1:o,y2:a,...Pg(f)})}function Pg({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...o}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...o}}function Og({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:l,shapeRendering:s,clip:u=!1},h){return[,t]=pn(t),[,e]=Qt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:l,shapeRendering:s,clip:u,initializer:h}}function rr(t,e,n,i,r,o,a){let f;function l(h,c,d,p,m,g){const w=h==null&&(e==="fx"||e==="fy"),{[e]:y}=p;if(!y)throw new Error(`missing scale: ${e}`);const x=y.domain();let{interval:_,ticks:$,tickFormat:M,tickSpacing:v=e==="x"?80:35}=o;if(typeof $=="string"&&Yg(y)&&(_=$,$=void 0),$===void 0&&($=nr(_,y.type)??G7(y,v)),h==null){if(Bn($))h=pe($);else if(Ci($))h=sl($,...ye(x));else if(y.interval){let C=y.interval;if(y.ticks){const[L,T]=ye(x),I=(T-L)/C[ao];C=qc(C,I/$)??C,h=sl(C,L,T)}else{h=x;const L=h.length;C=qc(C,L/$)??C,C!==y.interval&&(h=sl(C,...ye(h)))}if(C===y.interval){const L=Math.round(h.length/$);L>1&&(h=h.filter((T,I)=>I%L===0))}}else y.ticks?h=y.ticks($):h=x;if(!y.ticks&&h.length&&h!==x){const C=new Pa(x);h=h.filter(L=>C.has(L)),h.length||Tn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?c=[gn(h)]:f[e]={scale:e,value:jt}}a==null||a.call(this,y,h,$,M,f);const S=Object.fromEntries(Object.entries(f).map(([C,L])=>[C,{...L,value:Rt(h,L.value)}]));return w&&(c=g.filterFacets(h,S)),{data:h,facets:c,channels:S}}const s=Xi(o).initializer,u=t(r,Xi({...o,initializer:l},s));return r==null?(f=u.channels,u.channels={}):f={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function G7(t,e){const[n,i]=ye(t.range());return(i-n)/e}function Ug(t,e,n,i,r){return{value:wu(t,e,n,i,r)}}function wu(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&se(e)?S4(t.type,e,r)??li:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?li:typeof i=="string"?(se(t.domain())?oo:tr)(i):fo(i)}function sl(t,e,n){return t.range(e,t.offset(t.floor(n)))}const X7={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},j7={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},Z7={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},K7={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function Bg(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function zg(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:o}={}){if(!(i==null||i.inferred&&Yg(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[]/.test(i)),!o)return i;if(o===!0){const a=F8(e);a&&(o=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${i}`;case"right":return`${i} `;case"up":return n==="right"?`${i} `:` ${i}`;case"down":return n==="right"?`${i} `:` ${i}`}return i}}function qg(t="auto"){return ie(t)?!1:typeof t=="boolean"?t:Pe(t,"labelArrow",["auto","up","right","down","left"])}function Yg(t){return se(t.domain())}function vh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function Q7(t,{opacity:e,...n}={}){if(!pi(t)&&!eg(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return Hg(t,n,(i,r,o,a)=>i.append("svg").attr("width",o).attr("height",a).attr("fill",r.scale).attr("fill-opacity",Qt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function J7(t,{fill:e=(s=>(s=t.hint)==null?void 0:s.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:ie(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:o=1.5,r:a=4.5,...f}={},l){const[h,c]=pn(e),[d,p]=pn(i),m=vh(l,h),g=vh(l,d),w=a*a*Math.PI;return n=Qt(n)[1],r=Qt(r)[1],o=Qt(o)[1],Hg(t,f,(y,x,_,$)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",_).attr("height",$).attr("fill",h==="color"?M=>m.scale(M):c).attr("fill-opacity",n).attr("stroke",d==="color"?M=>g.scale(M):p).attr("stroke-opacity",r).attr("stroke-width",o).append("path").attr("d",M=>{const v=Mn();return t.scale(M).draw(v,w),v}))}function Hg(t,e={},n){let{columns:i,tickFormat:r,fontVariant:o=ag(t),swatchSize:a=15,swatchWidth:f=a,swatchHeight:l=a,marginLeft:s=0,className:u,style:h,width:c}=e;const d=au(e);u=ru(u),r=wu(t.scale,t.domain,void 0,r);const p=Ft("div",d).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,f,l).call(g=>g.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,f,l).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),p.call(g=>g.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",s?`${+s}px`:null).style("width",c===void 0?null:`${+c}px`).style("font-variant",zt(o,"normal")).call(ou,h).node()}const hs=new Map([["symbol",J7],["color",Vg],["opacity",e9]]);function t9(t,e,n={}){return(i,r)=>{if(!hs.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return hs.get(i)(t[i],Wg(e,n[i],r),o=>t[o])}}function Wg({className:t,...e},{label:n,ticks:i,tickFormat:r}={},o){return X4(o,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function Vg(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return Q7(t,n);case"ramp":return o7(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function e9({type:t,interpolate:e,...n},{legend:i=!0,color:r=Ln(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return Vg({type:t,...n,interpolate:n9(r)},{legend:i,...o})}function n9(t){const{r:e,g:n,b:i}=Ln(t)||Ln(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function i9(t,e,n){const i=[];for(const[r,o]of hs){const a=n[r];if(a!=null&&a.legend&&r in t){const f=o(t[r],Wg(e,t[r],a),l=>t[l]);f!=null&&i.push(f)}}return i}const r9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},o9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class a9 extends ue{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:o=i,insetBottom:a=i,insetLeft:f=i,rx:l,ry:s}=e;super(Vo,void 0,e,n==null?r9:o9),this.anchor=wm(n,"anchor",["top","right","bottom","left"]),this.insetTop=St(r),this.insetRight=St(o),this.insetBottom=St(a),this.insetLeft=St(f),this.rx=St(l),this.ry=St(s)}render(e,n,i,r,o){const{marginTop:a,marginRight:f,marginBottom:l,marginLeft:s,width:u,height:h}=r,{anchor:c,insetTop:d,insetRight:p,insetBottom:m,insetLeft:g,rx:w,ry:y}=this,x=s+g,_=u-f-p,$=a+d,M=h-l-m;return Ft(c?"svg:line":"svg:rect",o).datum(0).call(Oe,this,r,o).call(Ue,this).call(_n,this,i).call(Se,this,{}).call(c==="left"?v=>v.attr("x1",x).attr("x2",x).attr("y1",$).attr("y2",M):c==="right"?v=>v.attr("x1",_).attr("x2",_).attr("y1",$).attr("y2",M):c==="top"?v=>v.attr("x1",x).attr("x2",_).attr("y1",$).attr("y2",$):c==="bottom"?v=>v.attr("x1",x).attr("x2",_).attr("y1",M).attr("y2",M):v=>v.attr("x",x).attr("y",$).attr("width",_-x).attr("height",M-$).attr("rx",w).attr("ry",y)).node()}}function f9(t){return new a9(t)}const ul={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},l9=new Set(["geometry","href","src","ariaLabel","scales"]);class s9 extends ue{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Bn(e)&&km(e)&&(n={...n,title:jt});const{x:i,y:r,x1:o,x2:a,y1:f,y2:l,anchor:s,preferredAnchor:u="bottom",monospace:h,fontFamily:c=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:m,fontWeight:g,lineHeight:w=1,lineWidth:y=20,frameAnchor:x,format:_,textAnchor:$="start",textOverflow:M,textPadding:v=8,title:S,pointerSize:C=12,pathFilter:L="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:f!=null&&l!=null?null:r,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:f,scale:"y",optional:l==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:l,scale:"y",optional:f==null},title:{value:S,optional:!0}},n,ul),this.anchor=os(s,"anchor"),this.preferredAnchor=os(u,"preferredAnchor"),this.frameAnchor=pf(x),this.textAnchor=zt($,"middle"),this.textPadding=+v,this.pointerSize=+C,this.pathFilter=Kt(L),this.lineHeight=+w,this.lineWidth=+y,this.textOverflow=_g(M),this.monospace=!!h,this.fontFamily=Kt(c),this.fontSize=St(d),this.fontStyle=Kt(p),this.fontVariant=Kt(m),this.fontWeight=Kt(g);for(const T in ul)T in this.channels&&(this[T]=ul[T]);this.splitLines=wg(this),this.clipLine=vg(this),this.format={..._}}render(e,n,i,r,o){const a=this,{x:f,y:l,fx:s,fy:u}=n,{ownerSVGElement:h,document:c}=o,{anchor:d,monospace:p,lineHeight:m,lineWidth:g}=this,{textPadding:w,pointerSize:y,pathFilter:x}=this,{marginTop:_,marginLeft:$}=r,{x1:M,y1:v,x2:S,y2:C,x:L=M??S,y:T=v??C}=i,I=s?s(e.fx)-$:0,D=u?u(e.fy)-_:0,[H,E]=ho(this,r),R=rg(i,H),N=og(i,E),V=p?yu:_u,W=V(Fi);let G,A;"title"in i?(G=i.channels,A=m9):(G=p9.call(this,i,n),A=g9);const Y=Ft("svg:g",o).call(Oe,this,r,o).call(yg,this).call(Se,this,{x:L&&f,y:T&&l}).call(J=>J.selectAll().data(e).enter().append("g").attr("transform",rt=>`translate(${Math.round(R(rt))},${Math.round(N(rt))})`).call(Ue,this).call(rt=>rt.append("path").attr("filter",x)).call(rt=>rt.append("text").each(function(q){const z=Mr(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const F=A.call(a,q,e,G,n,i);if(typeof F=="string")for(const U of a.splitLines(F))X(z,{value:a.clipLine(U)});else{const U=new Set;for(const Q of F){const{label:P=""}=Q;P&&U.has(P)||(U.add(P),X(z,Q))}}})));function X(J,{label:rt,value:q,color:z,opacity:F}){rt??(rt=""),q??(q="");const U=z!=null||F!=null;let Q,P=g*100;const[ht]=Zi(rt,P,V,W);if(ht>=0)rt=rt.slice(0,ht).trimEnd()+Fi,Q=q.trim(),q="";else{(rt||!q&&!U)&&(q=" "+q);const[pt]=Zi(q,P-V(rt),V,W);pt>=0&&(Q=q.trim(),q=q.slice(0,pt).trimEnd()+Fi)}const ot=J.append("tspan").attr("x",0).attr("dy",`${m}em`).text("");rt&&ot.append("tspan").attr("font-weight","bold").text(rt),q&&ot.append(()=>c.createTextNode(q)),U&&ot.append("tspan").text(" ").attr("fill",z).attr("fill-opacity",F).style("user-select","none"),Q&&ot.append("title").text(Q)}function nt(){const{width:J,height:rt}=r.facet??r;Y.selectChildren().each(function(q){let{x:z,width:F,height:U}=this.getBBox();F=Math.round(F),U=Math.round(U);let Q=d;if(Q===void 0){const ot=R(q)+I,pt=N(q)+D,ft=ot+F+y+w*2<J,ut=ot-F-y-w*2>0,Ot=pt+U+y+w*2<rt,me=pt-U-y-w*2>0;Q=ft&&ut?Ot&&me?a.preferredAnchor:me?"bottom":"top":Ot&&me?ft?"left":"right":(ft||ut)&&(Ot||me)?`${me?"bottom":"top"}-${ft?"left":"right"}`:a.preferredAnchor}const P=this.firstChild,ht=this.lastChild;if(P.setAttribute("d",d9(Q,y,w,F,U)),z)for(const ot of ht.childNodes)ot.setAttribute("x",-z);ht.setAttribute("y",`${+c9(Q,ht.childNodes.length,m).toFixed(6)}em`),ht.setAttribute("transform",`translate(${h9(Q,y,w,F,U)})`)}),Y.attr("visibility",null)}return e.length&&(Y.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(nt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(nt)),Y.node()}}function u9(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=hf(e,n)),new s9(t,{...i,x:e,y:n})}function c9(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function h9(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function d9(t,e,n,i,r){const o=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function p9({channels:t},e){var r,o;const n={};let i=this.format;i=xh(i,t,"x"),i=xh(i,t,"y"),this.format=i;for(const a in i){const f=i[a];if(!(f===null||f===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const l=Kc(t,a);l&&(n[a]=l)}}for(const a in t){if(a in n||a in i||l9.has(a))continue;const f=Kc(t,a);f&&(n[a]=f)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const a in n){const f=this.format[a];if(typeof f=="string"){const l=((r=n[a])==null?void 0:r.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(se(l)?oo:tr)(f)}else if(f===void 0||f===!0){const l=e[a];this.format[a]=l!=null&&l.bandwidth?wu(l,l.domain()):li}}return n}function xh(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([f])=>f===n)+1,0,[i,a],[r,a]),Object.fromEntries(o)}function m9(t,e,{title:n}){return li(n.value[t],t)}function*g9(t,e,n,i,r){for(const o in n){if(o==="fx"||o==="fy"){yield{label:Na(i,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Mh(i,n,"x"),value:$h(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Mh(i,n,"y"),value:$h(this.format.y2,n.y1,a,t)};else{const f=a.value[t],l=a.scale;if(!Rn(f)&&l==null)continue;yield{label:Na(i,n,o),value:this.format[o](f,t),color:l==="color"?r[o][t]:null,opacity:l==="opacity"?r[o][t]:null}}}}function $h(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}${t(n.value[i],i)}`}function Mh(t,e,n){const i=Na(t,e,`${n}1`,n),r=Na(t,e,`${n}2`,n);return i===r?i:`${i}${r}`}function Na(t,e,n,i=n){const r=e[n],o=t[(r==null?void 0:r.scale)??n];return String((o==null?void 0:o.label)??(r==null?void 0:r.label)??i)}function Yn(t={}){var W;const{facet:e,style:n,title:i,subtitle:r,caption:o,ariaLabel:a,ariaDescription:f}=t,l=ru(t.className),s=t.marks===void 0?[]:Sh(t.marks);s.push(...M9(s));const u=x9(e,t),h=new Map;for(const G of s){const A=Th(G,u,t);A&&h.set(G,A)}const c=new Map;u&&dr(c,[u],t),dr(c,h,t);const d=Sh(k9(s,c,t));for(const G of d){const A=Th(G,u,t);A&&h.set(G,A)}s.unshift(...d);let p=Y8(c,t);if(p!==void 0){const G=u?al(p,u):void 0;for(const Y of s){if(Y.facet===null||Y.facet==="super")continue;const X=h.get(Y);X!==void 0&&(X.facetsIndex=Y.fx!=null||Y.fy!=null?al(p,X):G)}const A=new Set;for(const{facetsIndex:Y}of h.values())Y==null||Y.forEach((X,nt)=>{(X==null?void 0:X.length)>0&&A.add(nt)});p.forEach(0<A.size&&A.size<p.length?(Y,X)=>Y.empty=!A.has(X):Y=>Y.empty=!1);for(const Y of s)if(Y.facet==="exclude"){const X=h.get(Y);X!==void 0&&(X.facetsIndex=V8(X.facetsIndex))}}for(const G of Et.keys())is(t[G])&&G!=="fx"&&G!=="fy"&&c.set(G,[]);const m=new Map;for(const G of s){if(m.has(G))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:A,channels:Y}=h.get(G)??{},{data:X,facets:nt,channels:J}=G.initialize(A,Y,t);vu(J,t),m.set(G,{data:X,facets:nt,channels:J})}const g=ss(dr(c,m,t),t),w=z8(g,s,t);N8(g,w);const y=ah(g),{fx:x,fy:_}=y,$=x||_?Qm(g,w):w,M=x||_?D9(y,w):w,v=au(t),S=v.document,C=za("svg").call(S.documentElement);let L=C;v.ownerSVGElement=C,v.className=l,v.projection=Y5(t,$),v.filterFacets=(G,A)=>al(p,{channels:A,groups:cu(G,A)}),v.getMarkState=G=>{const A=m.get(G),Y=h.get(G);return{...A,channels:{...A.channels,...Y==null?void 0:Y.channels}}},v.dispatchValue=G=>{L.value!==G&&(L.value=G,L.dispatchEvent(new Event("input",{bubbles:!0})))};const T=new Set;for(const[G,A]of m)if(G.initializer!=null){const Y=G.facet==="super"?M:$,X=G.initializer(A.data,A.facets,A.channels,y,Y,v);if(X.data!==void 0&&(A.data=X.data),X.facets!==void 0&&(A.facets=X.facets),X.channels!==void 0){const{fx:nt,fy:J,...rt}=X.channels;v9(rt),Object.assign(A.channels,rt);for(const q of Object.values(rt)){const{scale:z}=q;z!=null&&!Z4(Et.get(z))&&(Gg(q,t),T.add(z))}(nt!=null||J!=null)&&h.set(G,!0)}}if(T.size){const G=new Map;dr(G,m,t,nt=>T.has(nt)),dr(c,m,t,nt=>T.has(nt));const A=N9(ss(G,t),g),{scales:Y,...X}=ah(A);Object.assign(g,A),Object.assign(y,X),Object.assign(y.scales,Y)}let I,D;p!==void 0&&(I={x:x==null?void 0:x.domain(),y:_==null?void 0:_.domain()},p=H8(p,I),D=W8(x,_,w));for(const[G,A]of m)A.values=G.scale(A.channels,y,v);const{width:H,height:E}=w;Mr(C).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",H).attr("height",E).attr("viewBox",`0 0 ${H} ${E}`).attr("aria-label",a).attr("aria-description",f).call(G=>G.append("style").text(`:where(.${l}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${l} text),
:where(.${l} tspan) {
  white-space: pre;
}`)).call(ou,n);for(const G of s){const{channels:A,values:Y,facets:X}=m.get(G);if(p===void 0||G.facet==="super"){let nt=null;if(X&&(nt=X[0],nt=G.filter(nt,A,Y),nt.length===0))continue;const J=G.render(nt,y,Y,M,v);if(J==null)continue;C.appendChild(J)}else{let nt;for(const J of p){if(!(((W=G.facetAnchor)==null?void 0:W.call(G,p,I,J))??!J.empty))continue;let rt=null;if(X){const z=h.has(G);if(rt=X[z?J.i:0],rt=G.filter(rt,A,Y),rt.length===0)continue;!z&&rt===X[0]&&(rt=P4(rt)),rt.fx=J.x,rt.fy=J.y,rt.fi=J.i}const q=G.render(rt,y,Y,$,v);if(q!=null){(nt??(nt=Mr(C).append("g"))).append(()=>q).datum(J);for(const z of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(z)&&(nt.attr(z,q.getAttribute(z)),q.removeAttribute(z))}}nt==null||nt.selectChildren().attr("transform",D)}}const R=i9(g,v,t),{figure:N=i!=null||r!=null||o!=null||R.length>0}=t;N&&(L=S.createElement("figure"),L.className=`${l}-figure`,L.style.maxWidth="initial",i!=null&&L.append(kh(S,i,"h2")),r!=null&&L.append(kh(S,r,"h3")),L.append(...R,C),o!=null&&L.append(b9(S,o))),L.scale=U8(y.scales),L.legend=t9(g,v,t);const V=E5();return V>0&&Mr(C).append("text").attr("x",H).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${V.toLocaleString("en-US")} warning${V===1?"":"s"}. Please check the console.`),L}function kh(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function b9(t,e){const n=t.createElement("figcaption");return n.append(e),n}function _9({marks:t=[],...e}={}){return Yn({...e,marks:[...t,this]})}ue.prototype.plot=_9;function Sh(t){return t.flat(1/0).filter(e=>e!=null).map(y9)}function y9(t){return typeof t.render=="function"?t:new w9(t)}class w9 extends ue{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function vu(t,e){for(const n in t)Gg(t[n],e);return t}function Gg(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:o,interval:a,transform:f=o?l=>l*100:Mm(a,r)}=e[n]??{};f!=null&&(t.value=At(t.value,f),t.transform=!1)}function v9(t){for(const e in t)Fm(e,t[e])}function dr(t,e,n,i=N4){var r,o;for(const{channels:a}of e.values())for(const f in a){const l=a[f],{scale:s}=l;if(s!=null&&i(s))if(s==="projection"){if(!G5(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,h=((o=n.y)==null?void 0:o.domain)===void 0;if(u||h){const[c,d]=j5(l);u&&cl(t,"x",c),h&&cl(t,"y",d)}}}else cl(t,s,l)}return t}function cl(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function x9(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=pe(t.data);if(r==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Yr(r,{value:n,scale:"fx"})),i!=null&&(o.fy=Yr(r,{value:i,scale:"fy"})),vu(o,e);const a=cu(r,o);return{channels:o,groups:a,data:t.data}}function Th(t,e,n){var l;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const s=pe(t.data??i??r);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const u={};return i!=null&&(u.fx=Yr(s,{value:i,scale:"fx"})),r!=null&&(u.fy=Yr(s,{value:r,scale:"fy"})),vu(u,n),{channels:u,groups:cu(s,u)}}if(e===void 0)return;const{channels:o,groups:a,data:f}=e;if(t.facet!=="auto"||t.data===f)return{channels:o,groups:a};f.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((l=pe(t.data))==null?void 0:l.length)===f.length&&Tn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function $9(t,e={}){return Xi({...e,x:null,y:null},(n,i,r,o,a,f)=>f.getMarkState(t))}function M9(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r,preferredAnchor:o}=i;r=/^x$/i.test(r)?r7:/^y$/i.test(r)?ph:i7,i=r($9(n,i)),i.title=null,o===void 0&&(i.preferredAnchor=r===ph?"left":"bottom");const a=u9(n.data,i);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function k9(t,e,n){let{projection:i,x:r={},y:o={},fx:a={},fy:f={},axis:l,grid:s,facet:u={},facet:{axis:h=l,grid:c}=u,x:{axis:d=l,grid:p=d===null?null:s}=r,y:{axis:m=l,grid:g=m===null?null:s}=o,fx:{axis:w=h,grid:y=w===null?null:c}=a,fy:{axis:x=h,grid:_=x===null?null:c}=f}=n;(i||!is(r)&&!Ch("x",t))&&(d=p=null),(i||!is(o)&&!Ch("y",t))&&(m=g=null),e.has("fx")||(w=y=null),e.has("fy")||(x=_=null),d===void 0&&(d=!Po(t,"x")),m===void 0&&(m=!Po(t,"y")),w===void 0&&(w=!Po(t,"fx")),x===void 0&&(x=!Po(t,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),w===!0&&(w=d==="top"||d===null?"bottom":"top"),x===!0&&(x=m==="right"||m===null?"left":"right");const $=[];return Ro($,_,H7,f),Io($,x,P7,"right","left",u,f),Ro($,y,V7,a),Io($,w,O7,"top","bottom",u,a),Ro($,g,Y7,o),Io($,m,Ng,"left","right",n,o),Ro($,p,W7,r),Io($,d,Dg,"bottom","top",n,r),$}function Io(t,e,n,i,r,o,a){if(!e)return;const f=S9(e);a=T9(f?i:e,o,a);const{line:l}=a;(n===Ng||n===Dg)&&l&&!qr(l)&&t.push(f9(C9(a))),t.push(n(a)),f&&t.push(n({...a,anchor:r,label:null}))}function Ro(t,e,n,i){!e||qr(e)||t.push(n(E9(e,i)))}function S9(t){return/^\s*both\s*$/i.test(t)}function T9(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:l,fontVariant:s,ariaLabel:u,ariaDescription:h,label:c=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:l,fontVariant:s,ariaLabel:u,ariaDescription:h,label:c,labelAnchor:d,labelArrow:p,labelOffset:m}}function C9(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function E9(t,{stroke:e=df(t)?t:void 0,ticks:n=A9(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:o}}function A9(t){switch(typeof t){case"number":return!0;case"string":return!df(t)}return Bn(t)||typeof(t==null?void 0:t.range)=="function"}function Po(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function Ch(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function N9(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function D9({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:f,height:l}=uu(n),s=t&&Eh(t),u=e&&Eh(e);return{marginTop:e?u[0]:i,marginRight:t?f-s[1]:r,marginBottom:e?l-u[1]:o,marginLeft:t?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:l}}function Eh(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const F9=new Map([["basis",i4],["basis-closed",r4],["basis-open",o4],["bundle",a4],["bump-x",V6],["bump-y",G6],["cardinal",f4],["cardinal-closed",l4],["cardinal-open",s4],["catmull-rom",u4],["catmull-rom-closed",c4],["catmull-rom-open",h4],["linear",af],["linear-closed",d4],["monotone-x",p4],["monotone-y",m4],["natural",g4],["step",b4],["step-after",y4],["step-before",_4]]);function L9(t=af,e){if(typeof t=="function")return t;const n=F9.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function Xg(t=Ki,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Ki:L9(t,e)}function Ki(t){return af(t)}function I9(t={y:"count"},e={}){[t,e]=U9(t,e);const{x:n,y:i}=e;return O9(B9(n,e,jt),null,null,i,t,du(e))}function R9(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=iu}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function P9(t={}){return R9(I9,"y",wf(t,"x"))}function O9(t,e,n,i,{data:r=Dm,filter:o=Aa,sort:a,reverse:f,...l}={},s={}){t=Ah(t),e=Ah(e),l=q9(l,s),r=Kg(r,jt),a=a==null?void 0:jg("sort",a,s),o=o==null?void 0:Zg("filter",o,s),n!=null&&No(l,"x","x1","x2")&&(n=null),i!=null&&No(l,"y","y1","y2")&&(i=null);const[u,h]=rn(t),[c,d]=rn(t),[p,m]=rn(e),[g,w]=rn(e),[y,x]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[_,$]=rn(y),{x:M,y:v,z:S,fill:C,stroke:L,x1:T,x2:I,y1:D,y2:H,domain:E,cumulative:R,thresholds:N,interval:V,...W}=s,[G,A]=rn(S),[Y]=pn(C),[X]=pn(L),[nt,J]=rn(Y),[rt,q]=rn(X);return{..."z"in s&&{z:G||S},..."fill"in s&&{fill:nt||C},..."stroke"in s&&{stroke:rt||L},...gf(W,(z,F,U)=>{const Q=$m(Rt(z,y),U==null?void 0:U[x]),P=Rt(z,S),ht=Rt(z,Y),ot=Rt(z,X),pt=u5(l,{z:P,fill:ht,stroke:ot}),ft=[],ut=[],Ot=Q&&$([]),me=P&&A([]),mi=ht&&J([]),gi=ot&&q([]),Ut=t&&h([]),ee=t&&d([]),Bt=e&&m([]),Cf=e&&w([]),d2=W9(t,e,z);let p2=0;for(const bi of l)bi.initialize(z);a&&a.initialize(z),o&&o.initialize(z);for(const bi of F){const Mu=[];for(const or of l)or.scope("facet",bi);a&&a.scope("facet",bi),o&&o.scope("facet",bi);for(const[or,m2]of Gc(bi,pt))for(const[g2,bo]of Gc(m2,Q))for(const[Be,Hn]of d2(bo))if(!(o&&!o.reduce(Be,Hn))){Mu.push(p2++),ut.push(r.reduceIndex(Be,z,Hn)),Q&&Ot.push(g2),P&&me.push(pt===P?or:P[(Be.length>0?Be:bo)[0]]),ht&&mi.push(pt===ht?or:ht[(Be.length>0?Be:bo)[0]]),ot&&gi.push(pt===ot?or:ot[(Be.length>0?Be:bo)[0]]),Ut&&(Ut.push(Hn.x1),ee.push(Hn.x2)),Bt&&(Bt.push(Hn.y1),Cf.push(Hn.y2));for(const b2 of l)b2.reduce(Be,Hn);a&&a.reduce(Be)}ft.push(Mu)}return c5(ft,a,f),{data:ut,facets:ft}}),...!No(l,"x")&&(u?{x1:u,x2:c,x:rs(u,c)}:{x:M,x1:T,x2:I}),...!No(l,"y")&&(p?{y1:p,y2:g,y:rs(p,g)}:{y:v,y1:D,y2:H}),..._&&{[x]:_},...Object.fromEntries(l.map(({name:z,output:F})=>[z,F]))}}function U9({cumulative:t,domain:e,thresholds:n,interval:i,...r},o){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...o}]}function B9(t,{cumulative:e,domain:n,thresholds:i,interval:r},o){return t={...lo(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=o),t.thresholds=z9(t.thresholds,t.interval),t}function Ah(t){if(t==null)return;const{value:e,cumulative:n,domain:i=ye,thresholds:r}=t,o=a=>{let f=Rt(a,e),l;if(se(f)||H9(r)){f=At(f,ym,Float64Array);let[u,h]=typeof i=="function"?i(f):i,c=typeof r=="function"&&!Ci(r)?r(f,u,h):r;typeof c=="number"&&(c=xp(u,h,c)),Ci(c)&&(i===ye&&(u=c.floor(u),h=c.offset(c.floor(h))),c=c.range(u,c.offset(h))),l=c}else{f=He(f);let[u,h]=typeof i=="function"?i(f):i,c=typeof r=="function"&&!Ci(r)?r(f,u,h):r;if(typeof c=="number")if(i===ye){let d=Qo(u,h,c);if(isFinite(d))if(d>0){let p=Math.round(u/d),m=Math.round(h/d);p*d<=u||--p,m*d>h||++m;let g=m-p+1;c=new Float64Array(g);for(let w=0;w<g;++w)c[w]=(p+w)*d}else if(d<0){d=-d;let p=Math.round(u*d),m=Math.round(h*d);p/d<=u||--p,m/d>h||++m;let g=m-p+1;c=new Float64Array(g);for(let w=0;w<g;++w)c[w]=(p+w)/d}else c=[u];else c=[u]}else c=Nr(u,h,c);else Ci(c)&&(i===ye&&(u=c.floor(u),h=c.offset(c.floor(h))),c=c.range(u,c.offset(h)));l=c}const s=[];if(l.length===1)s.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)s.push([l[u-1],l[u]]);return s.bin=(n<0?G9:n>0?V9:xu)(s,l,f),s};return o.label=di(e),o}function z9(t,e,n=Nh){if(t===void 0)return e===void 0?n:nr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return pb;case"scott":return Id;case"sturges":return ub;case"auto":return Nh}return Vs(t)}return t}function q9(t,e){return f5(t,e,jg)}function jg(t,e,n){return Am(t,e,n,Zg)}function Zg(t,e,n){return Nm(t,e,n,Kg)}function Kg(t,e){return nu(t,e,Y9)}function Y9(t){switch(`${t}`.toLowerCase()){case"x":return X9;case"x1":return Z9;case"x2":return K9;case"y":return j9;case"y1":return Q9;case"y2":return J9}throw new Error(`invalid bin reduce: ${t}`)}function Nh(t,e,n){return Math.min(200,Id(t,e,n))}function H9(t){return B4(t)||Bn(t)&&se(t)}function W9(t,e,n){const i=t==null?void 0:t(n),r=e==null?void 0:e(n);return i&&r?function*(o){const a=i.bin(o);for(const[f,[l,s]]of i.entries()){const u=r.bin(a[f]);for(const[h,[c,d]]of r.entries())yield[u[h],{data:n,x1:l,y1:c,x2:s,y2:d}]}}:i?function*(o){const a=i.bin(o);for(const[f,[l,s]]of i.entries())yield[a[f],{data:n,x1:l,x2:s}]}:function*(o){const a=r.bin(o);for(const[f,[l,s]]of r.entries())yield[a[f],{data:n,y1:l,y2:s}]}}function xu(t,e,n){return e=He(e),i=>{var o;const r=t.map(()=>[]);for(const a of i)(o=r[La(e,n[a])-1])==null||o.push(a);return r}}function V9(t,e,n){const i=xu(t,e,n);return r=>{const o=i(r);for(let a=1,f=o.length;a<f;++a){const l=o[a-1],s=o[a];for(const u of l)s.push(u)}return o}}function G9(t,e,n){const i=xu(t,e,n);return r=>{const o=i(r);for(let a=o.length-2;a>=0;--a){const f=o[a+1],l=o[a];for(const s of f)l.push(s)}return o}}function Qg(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const X9={reduceIndex(t,e,{x1:n,x2:i}){return Qg(n,i)}},j9={reduceIndex(t,e,{y1:n,y2:i}){return Qg(n,i)}},Z9={reduceIndex(t,e,{x1:n}){return n}},K9={reduceIndex(t,e,{x2:n}){return n}},Q9={reduceIndex(t,e,{y1:n}){return n}},J9={reduceIndex(t,e,{y2:n}){return n}};function tx(t={}){return vm(t)?t:{...t,y:jt}}function ex(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const f of e)for(const l of f)i[l]&&++r,i[l]=1;if(r===0)return{data:t,facets:e};t=zr(t);const o=t[bm]=new Uint32Array(n+r);e=e.map(f=>zr(f,Uint32Array));let a=n;i.fill(0);for(const f of e)for(let l=0,s=f.length;l<s;++l){const u=f[l];i[u]?(f[l]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,i[u]=1}return{data:t,facets:e}}function nx(t={},e={}){arguments.length===1&&([t,e]=rx(t));const{x1:n,x:i=n,y:r,...o}=e,[a,f,l,s]=ax(i,r,"x","y",t,o);return{...a,x1:n,x:f,y1:l,y2:s,y:rs(l,s)}}function ix({y:t,y1:e,y2:n,...i}={}){return i=wf(i,"x"),e===void 0&&n===void 0?nx({y:t,...i}):([e,n]=R4(t,e,n),{...i,y1:e,y2:n})}function rx(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const ox={length:!0};function ax(t,e=A4,n,i,{offset:r,order:o,reverse:a},f){if(e===null)throw new Error(`stack requires ${i}`);const l=xm(f),[s,u]=rn(t),[h,c]=Ea(e),[d,p]=Ea(e);return h.hint=d.hint=ox,r=fx(r),o=ux(o,r,i),[gf(f,(m,g,w)=>{({data:m,facets:g}=ex(m,g));const y=t==null?void 0:u($m(Rt(m,t),w==null?void 0:w[n])),x=Rt(m,e,Float64Array),_=Rt(m,l),$=o&&o(m,y,x,_),M=m.length,v=c(new Float64Array(M)),S=p(new Float64Array(M)),C=[];for(const L of g){const T=y?Array.from(Oa(L,I=>y[I]).values()):[L];if($)for(const I of T)I.sort($);for(const I of T){let D=0,H=0;a&&I.reverse();for(const E of I){const R=x[E];R<0?D=S[E]=(v[E]=D)+R:R>0?H=S[E]=(v[E]=H)+R:S[E]=v[E]=H}}C.push(T)}return r&&r(C,v,S,_),{data:m,facets:g}}),s,h,d]}function fx(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return lx;case"center":case"silhouette":return sx;case"wiggle":return t2}throw new Error(`unknown offset: ${t}`)}}function Jg(t,e){let n=0,i=0;for(const r of t){const o=e[r];o<n&&(n=o),o>i&&(i=o)}return[n,i]}function lx(t,e,n){for(const i of t)for(const r of i){const[o,a]=Jg(r,n);for(const f of r){const l=1/(a-o||1);e[f]=l*(e[f]-o),n[f]=l*(n[f]-o)}}}function sx(t,e,n){for(const i of t){for(const r of i){const[o,a]=Jg(r,n);for(const f of r){const l=(a+o)/2;e[f]-=l,n[f]-=l}}e2(i,e,n)}n2(t,e,n)}function t2(t,e,n,i){for(const r of t){const o=new ti;let a=0;for(const f of r){let l=-1;const s=f.map(d=>Math.abs(n[d]-e[d])),u=f.map(d=>{l=i?i[d]:++l;const p=n[d]-e[d],m=o.has(l)?p-o.get(l):0;return o.set(l,p),m}),h=[0,...rb(u)];for(const d of f)e[d]+=a,n[d]+=a;const c=Fn(s);c&&(a-=Fn(s,(d,p)=>(u[p]/2+h[p])*d)/c)}e2(r,e,n)}n2(t,e,n)}function e2(t,e,n){const i=un(t,r=>un(r,o=>e[o]));for(const r of t)for(const o of r)e[o]-=i,n[o]-=i}function n2(t,e,n){const i=t.length;if(i===1)return;const r=t.map(f=>f.flat()),o=r.map(f=>(un(f,l=>e[l])+ce(f,l=>n[l]))/2),a=un(o);for(let f=0;f<i;f++){const l=a-o[f];for(const s of r[f])e[s]+=l,n[s]+=l}}function ux(t,e,n){if(t===void 0&&e===t2)return Dh(Ie);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?Ca:Ie;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return cx(r);case"z":return hx(r);case"sum":return dx(r);case"appearance":return px(r);case"inside-out":return Dh(r)}return Fh(_m(t))}if(typeof t=="function")return(t.length===1?Fh:mx)(t);if(Array.isArray(t))return gx(t);throw new Error(`invalid order: ${t}`)}}function cx(t){return(e,n,i)=>(r,o)=>t(i[r],i[o])}function hx(t){return(e,n,i,r)=>(o,a)=>t(r[o],r[a])}function dx(t){return $f(t,(e,n,i,r)=>ms(gn(e),o=>Fn(o,a=>i[a]),o=>r[o]))}function px(t){return $f(t,(e,n,i,r)=>ms(gn(e),o=>n[Ld(o,a=>i[a])],o=>r[o]))}function Dh(t){return $f(t,(e,n,i,r)=>{const o=gn(e),a=ms(o,h=>n[Ld(h,c=>i[c])],h=>r[h]),f=Ai(o,h=>Fn(h,c=>i[c]),h=>r[h]),l=[],s=[];let u=0;for(const h of a)u<0?(u+=f.get(h),l.push(h)):(u-=f.get(h),s.push(h));return s.reverse().concat(l)})}function Fh(t){return e=>{const n=Rt(e,t);return(i,r)=>Ie(n[i],n[r])}}function mx(t){return e=>(n,i)=>t(e[n],e[i])}function gx(t){return $f(Ie,()=>t)}function $f(t,e){return(n,i,r,o)=>{if(!o)throw new Error("missing channel: z");const a=new ti(e(n,i,r,o).map((f,l)=>[f,l]));return(f,l)=>t(a.get(o[f]),a.get(o[l]))}}const bx={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class _x extends ue{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,curve:f,tension:l}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,bx),this.curve=Xg(f,l),go(this,n)}project(e,n,i){this.curve!==Ki&&super.project(e,n,i)}render(e,n,i,r,o){const{x1:a,y1:f,x2:l=a,y2:s=f}=i,{curve:u}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,n).call(h=>h.selectAll().data(e).enter().append("path").call(Ue,this).attr("d",u===Ki&&o.projection?yx(o.projection,a,f,l,s):c=>{const d=Mn(),p=u(d);return p.lineStart(),p.point(a[c],f[c]),p.point(l[c],s[c]),p.lineEnd(),d}).call(_n,this,i).call(vf,this,i,o)).node()}}function yx(t,e,n,i,r){const o=Ga(t);return e=He(e),n=He(n),i=He(i),r=He(r),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function i2(t,{x:e,x1:n,x2:i,y:r,y1:o,y2:a,...f}={}){return[n,i]=Lh(e,n,i),[o,a]=Lh(r,o,a),new _x(t,{...f,x1:n,x2:i,y1:o,y2:a})}function Lh(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class r2 extends ue{constructor(e,n,i={},r){super(e,n,i,r);const{inset:o=0,insetTop:a=o,insetRight:f=o,insetBottom:l=o,insetLeft:s=o,rx:u,ry:h}=i;this.insetTop=St(a),this.insetRight=St(f),this.insetBottom=St(l),this.insetLeft=St(s),this.rx=zt(u,"auto"),this.ry=zt(h,"auto")}render(e,n,i,r,o){const{rx:a,ry:f}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(this._transform,this,n).call(l=>l.selectAll().data(e).enter().append("rect").call(Ue,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(mt,"rx",a).call(mt,"ry",f).call(_n,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?o=>n[o]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?o=>n[o]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:o}){const{insetLeft:a,insetRight:f}=this,l=n&&e?e.bandwidth():o-i-r;return Math.max(0,l-a-f)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:o}){const{insetTop:a,insetBottom:f}=this,l=n&&e?e.bandwidth():o-i-r;return Math.max(0,l-a-f)}}const wx={ariaLabel:"bar"};class vx extends r2{constructor(e,n={}){const{x:i,y1:r,y2:o}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,wx)}_transform(e,n,{y:i}){e.call(Se,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:o}=this;return ji(e)?r+o:a=>Math.min(n[a],i[a])+o}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:o,height:a}){const{insetTop:f,insetBottom:l}=this;return ji(e)?a-r-o-f-l:s=>Math.max(0,Math.abs(i[s]-n[s])-f-l)}}function xx(t,e={}){return I4(e)||(e={...e,x:Gs,y2:jt}),new vx(t,ix(pg(tx(e))))}const $x={ariaLabel:"cell"};class Mx extends r2{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,$x)}_transform(e,n){e.call(Se,n,{},0,0)}}function kx(t,{x:e,y:n,...i}={}){return[e,n]=hf(e,n),new Mx(t,{...i,x:e,y:n})}const Sx={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Tx(t){return t.sort===void 0&&t.reverse===void 0?r5({channel:"-r"},t):t}class Cx extends ue{constructor(e,n={}){const{x:i,y:r,r:o,rotate:a,symbol:f=Ur,frameAnchor:l}=n,[s,u]=Qt(a,0),[h,c]=n5(f),[d,p]=Qt(o,h==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:sf,optional:!0},rotate:{value:s,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},Tx(n),Sx),this.r=p,this.rotate=u,this.symbol=c,this.frameAnchor=pf(l);const{channels:m}=this,{symbol:g}=m;if(g){const{fill:w,stroke:y}=m;g.hint={fill:w?w.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:y?y.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y:s,r:u,rotate:h,symbol:c}=i,{r:d,rotate:p,symbol:m}=this,[g,w]=ho(this,r),y=m===Ur,x=u?void 0:d*d*Math.PI;return Ys(d)&&(e=[]),Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{x:l&&a,y:s&&f}).call(_=>_.selectAll().data(e).enter().append(y?"circle":"path").call(Ue,this).call(y?$=>{$.attr("cx",l?M=>l[M]:g).attr("cy",s?M=>s[M]:w).attr("r",u?M=>u[M]:d)}:$=>{$.attr("transform",mu`translate(${l?M=>l[M]:g},${s?M=>s[M]:w})${h?M=>` rotate(${h[M]})`:p?` rotate(${p})`:""}`).attr("d",u&&c?M=>{const v=Mn();return c[M].draw(v,u[M]*u[M]*Math.PI),v}:u?M=>{const v=Mn();return m.draw(v,u[M]*u[M]*Math.PI),v}:c?M=>{const v=Mn();return c[M].draw(v,x),v}:(()=>{const M=Mn();return m.draw(M,x),M})())}).call(_n,this,i)).node()}}function o2(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=hf(e,n)),new Cx(t,{...i,x:e,y:n})}const Ex={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Ax extends ue{constructor(e,n={}){const{x:i,y:r,z:o,curve:a,tension:f}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:xm(n),optional:!0}},n,Ex),this.z=o,this.curve=Xg(a,f),go(this,n)}filter(e){return e}project(e,n,i){this.curve!==Ki&&super.project(e,n,i)}render(e,n,i,r,o){const{x:a,y:f}=i,{curve:l}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,n).call(s=>s.selectAll().data(U5(e,[a,f],this,i)).enter().append("path").call(Ue,this).call(R5,this,i).call(s7,this,i,o).attr("d",l===Ki&&o.projection?Nx(o.projection,a,f):W6().curve(l).defined(u=>u>=0).x(u=>a[u]).y(u=>f[u]))).node()}}function Nx(t,e,n){const i=Ga(t);return e=He(e),n=He(n),r=>{let o=[];const a=[o];for(const f of r)f===-1?(o=[],a.push(o)):o.push([e[f],n[f]]);return i({type:"MultiLineString",coordinates:a})}}function Dx(t,{x:e=Gs,y:n=jt,...i}={}){return new Ax(t,P9({...i,x:e,y:n}))}const Fx={ariaLabel:"tick",fill:null,stroke:"currentColor"};class Lx extends ue{constructor(e,n,i){super(e,n,i,Fx),go(this,i)}render(e,n,i,r,o){return Ft("svg:g",o).call(Oe,this,r,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Ue,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(_n,this,i).call(vf,this,i,o)).node()}}class Ix extends Lx{constructor(e,n={}){const{x:i,y:r,inset:o=0,insetTop:a=o,insetBottom:f=o}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=St(a),this.insetBottom=St(f)}_transform(e,n,{x:i}){e.call(Se,n,{x:i},re,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?o=>n[o]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:i-r-o}}function a2(t,{x:e=jt,...n}={}){return new Ix(t,{...n,x:e})}function Rx(t){let e,n,i,r;return{c(){e=k("main"),n=k("div"),B(n,"width",i=t[0]+"px"),B(n,"height",r=t[1]+"px"),oe(e,"width",t[0]+"px"),oe(e,"margin","auto")},m(o,a){Z(o,e,a),b(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&B(n,"width",i),a&2&&r!==(r=o[1]+"px")&&B(n,"height",r),a&1&&oe(e,"width",o[0]+"px")},i:$t,o:$t,d(o){o&&j(e),t[4](null)}}}function Px(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;si(()=>{const l=Yn({width:r,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[a2(i,{x:s=>s})]});n(2,a.textContent="",a),a.appendChild(l)});function f(l){Xe[l?"unshift":"push"](()=>{a=l,n(2,a)})}return t.$$set=l=>{"pattern"in l&&n(3,i=l.pattern),"width"in l&&n(0,r=l.width),"height"in l&&n(1,o=l.height)},[r,o,a,i,f]}class Cn extends Xt{constructor(e){super(),Gt(this,e,Px,Rx,Vt,{pattern:3,width:0,height:1})}}function Ox(t){let e,n,i,r;return{c(){e=k("main"),n=k("div"),B(n,"width",i=t[0]+"px"),B(n,"height",r=t[1]+"px"),oe(e,"width",t[0]+"px"),oe(e,"margin","auto")},m(o,a){Z(o,e,a),b(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&B(n,"width",i),a&2&&r!==(r=o[1]+"px")&&B(n,"height",r),a&1&&oe(e,"width",o[0]+"px")},i:$t,o:$t,d(o){o&&j(e),t[4](null)}}}function Ux(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;si(()=>{const l=i.map((u,h)=>h===0?0:u-i[h-1]),s=Yn({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[xx(l,{x:(u,h)=>h+1,y:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function f(l){Xe[l?"unshift":"push"](()=>{a=l,n(2,a)})}return t.$$set=l=>{"pattern"in l&&n(3,i=l.pattern),"width"in l&&n(0,r=l.width),"height"in l&&n(1,o=l.height)},[r,o,a,i,f]}class En extends Xt{constructor(e){super(),Gt(this,e,Ux,Ox,Vt,{pattern:3,width:0,height:1})}}function Bx(t){let e,n,i,r;return{c(){e=k("main"),n=k("div"),B(n,"width",i=t[0]+"px"),B(n,"height",r=t[1]+"px"),oe(e,"width",t[0]+"px"),oe(e,"margin","auto")},m(o,a){Z(o,e,a),b(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&B(n,"width",i),a&2&&r!==(r=o[1]+"px")&&B(n,"height",r),a&1&&oe(e,"width",o[0]+"px")},i:$t,o:$t,d(o){o&&j(e),t[4](null)}}}function zx(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;si(()=>{const l=i.map((u,h)=>h===0?0:u-i[h-1]),s=Yn({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[kx(l,{x:(u,h)=>h+1,fill:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function f(l){Xe[l?"unshift":"push"](()=>{a=l,n(2,a)})}return t.$$set=l=>{"pattern"in l&&n(3,i=l.pattern),"width"in l&&n(0,r=l.width),"height"in l&&n(1,o=l.height)},[r,o,a,i,f]}class An extends Xt{constructor(e){super(),Gt(this,e,zx,Bx,Vt,{pattern:3,width:0,height:1})}}function qx(t){let e,n,i,r;return{c(){e=k("main"),n=k("div"),B(n,"width",i=t[0]+"px"),B(n,"height",r=t[1]+"px"),oe(e,"width",t[0]+"px"),oe(e,"margin","auto")},m(o,a){Z(o,e,a),b(e,n),t[6](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&B(n,"width",i),a&2&&r!==(r=o[1]+"px")&&B(n,"height",r),a&1&&oe(e,"width",o[0]+"px")},i:$t,o:$t,d(o){o&&j(e),t[6](null)}}}function Yx(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{width:o=800}=e,{height:a=50}=e,f,l=null,s;const u=async p=>{n(5,l=await kd(p)),console.log(`Loaded ${p}, sr= ${l.sampleRate}`),s=l.sampleRate};let h=null;const c=(p,m)=>{m&&(h=Sd(m,p,.5))};si(()=>{if(n(2,f.textContent="",f),!h)return;const p=Yn({width:o,height:a,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[Dx(h,{x:(m,g)=>g/s,y:m=>m})]});f.appendChild(p)});function d(p){Xe[p?"unshift":"push"](()=>{f=p,n(2,f)})}return t.$$set=p=>{"pattern"in p&&n(3,i=p.pattern),"audioFile"in p&&n(4,r=p.audioFile),"width"in p&&n(0,o=p.width),"height"in p&&n(1,a=p.height)},t.$$.update=()=>{t.$$.dirty&16&&u(r),t.$$.dirty&40&&c(i,l)},[o,a,f,i,r,l,d]}class Nn extends Xt{constructor(e){super(),Gt(this,e,Yx,qx,Vt,{pattern:3,audioFile:4,width:0,height:1})}}function Hx(t){let e,n,i,r,o,a;return{c(){e=k("main"),n=k("audio"),i=O(),r=k("button"),r.textContent="play audio (p)",n.controls=!1},m(f,l){Z(f,e,l),b(e,n),t[6](n),b(e,i),b(e,r),o||(a=dt(r,"click",t[1]),o=!0)},p:$t,i:$t,o:$t,d(f){f&&j(e),t[6](null),o=!1,a()}}}function Wx(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{currentTrialNumber:o=-1}=e,a=null;const f=async d=>{n(5,a=await kd(d)),console.log(`Loaded ${d}, sr= ${a.sampleRate}`)};let l=null,s;const u=(d,p)=>{p&&s&&(l=Sd(p,d),X2(l,p.sampleRate,s))},h=()=>{s&&(s.pause(),n(0,s.currentTime=0,s),s.play())};Da(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&h()})});function c(d){Xe[d?"unshift":"push"](()=>{s=d,n(0,s)})}return t.$$set=d=>{"pattern"in d&&n(2,i=d.pattern),"audioFile"in d&&n(3,r=d.audioFile),"currentTrialNumber"in d&&n(4,o=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(r),t.$$.dirty&4&&console.log(i),t.$$.dirty&16&&o>-1&&window.setTimeout(h,200),t.$$.dirty&36&&u(i,a)},[s,h,i,r,o,a,c]}class Qi extends Xt{constructor(e){super(),Gt(this,e,Wx,Hx,Vt,{pattern:2,audioFile:3,currentTrialNumber:4})}}function Ih(t,e,n){const i=t.slice();return i[8]=e[n],i}function Rh(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=k("option"),i=at(n),e.__value=t[8],et(e,e.__value)},m(r,o){Z(r,e,o),b(e,i)},p:$t,d(r){r&&j(e)}}}function Vx(t){let e,n,i,r,o,a,f,l=(Go*1e3).toFixed(0)+"",s,u,h,c,d,p,m,g,w=t[0].toFixed(1)+"",y,x,_=(t[2]*1e3).toFixed(1)+"",$,M,v,S,C,L,T,I,D,H,E,R,N,V,W,G,A,Y,X,nt,J=_e(t[5]),rt=[];for(let q=0;q<J.length;q+=1)rt[q]=Rh(Ih(t,J,q));return D=new Qi({props:{pattern:t[1],audioFile:t[3]}}),E=new Nn({props:{pattern:t[1],audioFile:t[3],width:Oo,height:Uo}}),N=new Cn({props:{pattern:t[1],width:Oo,height:Uo}}),W=new En({props:{pattern:t[1],width:Oo,height:Uo}}),A=new An({props:{pattern:t[1],width:Oo,height:Uo}}),{c(){e=k("main"),n=k("h2"),n.textContent="Playground",i=O(),r=k("p"),r.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=O(),a=k("div"),f=at("inter-onset interval (IOI): "),s=at(l),u=at(" milliseconds ("),h=at(t[4]),c=at(` bpm)
    `),d=k("label"),p=at(`deviation as percent of IOI
      `),m=k("input"),g=O(),y=at(w),x=at(`
      (`),$=at(_),M=at(" milliseconds)"),v=O(),S=k("label"),C=at(`instrument sample:
      `),L=k("select");for(let q=0;q<rt.length;q+=1)rt[q].c();T=O(),I=k("div"),ct(D.$$.fragment),H=O(),ct(E.$$.fragment),R=O(),ct(N.$$.fragment),V=O(),ct(W.$$.fragment),G=O(),ct(A.$$.fragment),B(m,"type","range"),B(m,"min","-20"),B(m,"max","20"),B(m,"step","1"),B(d,"class","svelte-1sot113"),t[3]===void 0&&Ne(()=>t[7].call(L)),B(S,"class","svelte-1sot113"),B(I,"class","stimuli svelte-1sot113")},m(q,z){Z(q,e,z),b(e,n),b(e,i),b(e,r),b(e,o),b(e,a),b(a,f),b(a,s),b(a,u),b(a,h),b(a,c),b(a,d),b(d,p),b(d,m),et(m,t[0]),b(d,g),b(d,y),b(d,x),b(d,$),b(d,M),b(a,v),b(a,S),b(S,C),b(S,L);for(let F=0;F<rt.length;F+=1)rt[F]&&rt[F].m(L,null);Ht(L,t[3],!0),b(e,T),b(e,I),lt(D,I,null),b(I,H),lt(E,I,null),b(I,R),lt(N,I,null),b(I,V),lt(W,I,null),b(I,G),lt(A,I,null),Y=!0,X||(nt=[dt(m,"change",t[6]),dt(m,"input",t[6]),dt(L,"change",t[7])],X=!0)},p(q,[z]){if((!Y||z&16)&&qt(h,q[4]),z&1&&et(m,q[0]),(!Y||z&1)&&w!==(w=q[0].toFixed(1)+"")&&qt(y,w),(!Y||z&4)&&_!==(_=(q[2]*1e3).toFixed(1)+"")&&qt($,_),z&32){J=_e(q[5]);let ot;for(ot=0;ot<J.length;ot+=1){const pt=Ih(q,J,ot);rt[ot]?rt[ot].p(pt,z):(rt[ot]=Rh(pt),rt[ot].c(),rt[ot].m(L,null))}for(;ot<rt.length;ot+=1)rt[ot].d(1);rt.length=J.length}z&40&&Ht(L,q[3]);const F={};z&2&&(F.pattern=q[1]),z&8&&(F.audioFile=q[3]),D.$set(F);const U={};z&2&&(U.pattern=q[1]),z&8&&(U.audioFile=q[3]),E.$set(U);const Q={};z&2&&(Q.pattern=q[1]),N.$set(Q);const P={};z&2&&(P.pattern=q[1]),W.$set(P);const ht={};z&2&&(ht.pattern=q[1]),A.$set(ht)},i(q){Y||(K(D.$$.fragment,q),K(E.$$.fragment,q),K(N.$$.fragment,q),K(W.$$.fragment,q),K(A.$$.fragment,q),Y=!0)},o(q){tt(D.$$.fragment,q),tt(E.$$.fragment,q),tt(N.$$.fragment,q),tt(W.$$.fragment,q),tt(A.$$.fragment,q),Y=!1},d(q){q&&j(e),Li(rt,q),st(D),st(E),st(N),st(W),st(A),X=!1,ke(nt)}}}let Oo=600,Uo=100,Go=.5,Gx=6,Xx=3,jx=!0,Zx=0;function Kx(t,e,n){let i,r;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],f=5,l=[];function s(){f=fe(this.value),n(0,f)}function u(){a=Dn(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=f/100*Go),t.$$.dirty&6&&(n(1,l=Ii(Gx,Go,Xx,r,jx,Zx)),console.log("generated pattern",l))},n(4,i=1/Go*60),[f,l,r,a,i,o,s,u]}class Qx extends Xt{constructor(e){super(),Gt(this,e,Kx,Vx,Vt,{})}}var f2={exports:{}};(function(t,e){(function(n,i){i()})(ar,function(){function n(s,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function i(s,u,h){var c=new XMLHttpRequest;c.open("GET",s),c.responseType="blob",c.onload=function(){l(c.response,u,h)},c.onerror=function(){console.error("could not download file")},c.send()}function r(s){var u=new XMLHttpRequest;u.open("HEAD",s,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ar=="object"&&ar.global===ar?ar:void 0,f=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(s,u,h){var c=a.URL||a.webkitURL,d=document.createElement("a");u=u||s.name||"download",d.download=u,d.rel="noopener",typeof s=="string"?(d.href=s,d.origin===location.origin?o(d):r(d.href)?i(s,u,h):o(d,d.target="_blank")):(d.href=c.createObjectURL(s),setTimeout(function(){c.revokeObjectURL(d.href)},4e4),setTimeout(function(){o(d)},0))}:"msSaveOrOpenBlob"in navigator?function(s,u,h){if(u=u||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(n(s,h),u);else if(r(s))i(s,u,h);else{var c=document.createElement("a");c.href=s,c.target="_blank",setTimeout(function(){o(c)})}}:function(s,u,h,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof s=="string")return i(s,u,h);var d=s.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||d&&p||f)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var x=g.result;x=m?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=x:location=x,c=null},g.readAsDataURL(s)}else{var w=a.URL||a.webkitURL,y=w.createObjectURL(s);c?c.location=y:location.href=y,c=null,setTimeout(function(){w.revokeObjectURL(y)},4e4)}});a.saveAs=l.saveAs=l,t.exports=l})})(f2);var Jx=f2.exports;const l2=Md(Jx);function kt(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}kt.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const i=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+i+" mode."),this.tasks[n][e.operation][i][e.direction](e)};kt.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};kt.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};kt.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=s2(0,t.length-1);return this.activate(t[e]),this};kt.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=s2(0,t.length-1);this.activate(t[e])};kt.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};kt.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};kt.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};kt.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};kt.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};kt.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};kt.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};kt.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};kt.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};kt.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};kt.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};kt.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};kt.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};kt.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let i=1;i<this.stairs[t].val.length;i++)(n===1&&this.stairs[t].val[i]>this.stairs[t].val[i-1]||n===-1&&this.stairs[t].val[i]<this.stairs[t].val[i-1])&&(e[e.length]=this.stairs[t].val[i-1],n=n*-1);return e.shift(),e};kt.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};kt.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let i=0;i<e.length;i++)n=n+e[i];return n/e.length};const $u=function(){};$u.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};$u.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};kt.prototype.checkErr=new $u;function s2(t,e){return Math.floor(Math.random()*(e-t+1))+t}function Ph(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,y,x,_,$,M,v,S,C,L,T,I,D,H,E,R,N,V,W,G,A,Y,X,nt,J,rt,q;return{c(){e=k("div"),n=k("label"),i=at(`ID:
        `),r=k("input"),o=O(),a=k("label"),f=at(`Age:
        `),l=k("select"),s=k("option"),s.textContent="20-24",u=k("option"),u.textContent="25-29",h=k("option"),h.textContent="30-34",c=k("option"),c.textContent="35-39",d=k("option"),d.textContent="40-44",p=k("option"),p.textContent="45-49",m=k("option"),m.textContent="50-54",g=k("option"),g.textContent="55-60",w=O(),y=k("label"),x=at(`Gender:
        `),_=k("input"),$=O(),M=k("label"),v=at(`Highest finished education (select the best fitting one):
        `),S=k("select"),C=k("option"),C.textContent="none",L=k("option"),L.textContent="high school",T=k("option"),T.textContent="bachelor",I=k("option"),I.textContent="master",D=k("option"),D.textContent="phd",H=O(),E=k("label"),R=at(`Which music instruments do you play?
        `),N=k("input"),V=O(),W=k("label"),G=at(`For how many years do you roughly play it/them?
        `),A=k("input"),Y=O(),X=k("label"),nt=at(`How many years of experience do you have with visualization?
        `),J=k("input"),B(r,"type","text"),B(r,"placeholder","ID"),B(n,"class","svelte-u6a8gr"),s.__value="20-24",et(s,s.__value),u.__value="25-29",et(u,u.__value),h.__value="30-34",et(h,h.__value),c.__value="35-39",et(c,c.__value),d.__value="40-44",et(d,d.__value),p.__value="45-49",et(p,p.__value),m.__value="50-54",et(m,m.__value),g.__value="55-60",et(g,g.__value),t[6]===void 0&&Ne(()=>t[23].call(l)),B(a,"class","svelte-u6a8gr"),B(_,"type","text"),B(_,"placeholder","m, f, d, or self-describe"),B(y,"class","svelte-u6a8gr"),C.__value="none",et(C,C.__value),L.__value="highs",et(L,L.__value),T.__value="bachelor",et(T,T.__value),I.__value="master",et(I,I.__value),D.__value="phd",et(D,D.__value),t[8]===void 0&&Ne(()=>t[25].call(S)),B(M,"class","svelte-u6a8gr"),B(N,"type","text"),B(N,"placeholder","free text"),B(E,"class","svelte-u6a8gr"),B(A,"type","number"),B(A,"min","0"),B(A,"step","1"),B(W,"class","svelte-u6a8gr"),B(J,"type","number"),B(J,"min","0"),B(J,"step","1"),B(X,"class","svelte-u6a8gr"),B(e,"class","demo-form svelte-u6a8gr")},m(z,F){Z(z,e,F),b(e,n),b(n,i),b(n,r),et(r,t[5]),b(e,o),b(e,a),b(a,f),b(a,l),b(l,s),b(l,u),b(l,h),b(l,c),b(l,d),b(l,p),b(l,m),b(l,g),Ht(l,t[6],!0),b(e,w),b(e,y),b(y,x),b(y,_),et(_,t[7]),b(e,$),b(e,M),b(M,v),b(M,S),b(S,C),b(S,L),b(S,T),b(S,I),b(S,D),Ht(S,t[8],!0),b(e,H),b(e,E),b(E,R),b(E,N),et(N,t[9]),b(e,V),b(e,W),b(W,G),b(W,A),et(A,t[10]),b(e,Y),b(e,X),b(X,nt),b(X,J),et(J,t[11]),rt||(q=[dt(r,"input",t[22]),dt(l,"change",t[23]),dt(_,"input",t[24]),dt(S,"change",t[25]),dt(N,"input",t[26]),dt(A,"input",t[27]),dt(J,"input",t[28])],rt=!0)},p(z,F){F[0]&32&&r.value!==z[5]&&et(r,z[5]),F[0]&64&&Ht(l,z[6]),F[0]&128&&_.value!==z[7]&&et(_,z[7]),F[0]&256&&Ht(S,z[8]),F[0]&512&&N.value!==z[9]&&et(N,z[9]),F[0]&1024&&fe(A.value)!==z[10]&&et(A,z[10]),F[0]&2048&&fe(J.value)!==z[11]&&et(J,z[11])},d(z){z&&j(e),rt=!1,ke(q)}}}function Oh(t){let e,n,i,r,o=t[14]&&Uh(t);return{c(){e=k("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=O(),o&&o.c(),i=mn()},m(a,f){Z(a,e,f),Z(a,n,f),o&&o.m(a,f),Z(a,i,f),r=!0},p(a,f){a[14]?o?(o.p(a,f),f[0]&16384&&K(o,1)):(o=Uh(a),o.c(),K(o,1),o.m(i.parentNode,i)):o&&(Jt(),tt(o,1,1,()=>{o=null}),te())},i(a){r||(K(o),r=!0)},o(a){tt(o),r=!1},d(a){a&&(j(e),j(n),j(i)),o&&o.d(a)}}}function Uh(t){let e,n,i,r,o=t[4]+1+"",a,f,l=t[2].length+"",s,u,h,c,d=t[13]+1+"",p,m,g,w,y,x;const _=[e$,t$],$=[];function M(v,S){return v[17]==="audio"?0:v[16]===!1?1:-1}return~(g=M(t))&&(w=$[g]=_[g](t)),{c(){e=k("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=O(),i=k("p"),r=at("Test number "),a=at(o),f=at(" / "),s=at(l),u=O(),h=k("p"),c=at("Trial number "),p=at(d),m=O(),w&&w.c(),y=mn()},m(v,S){Z(v,e,S),Z(v,n,S),Z(v,i,S),b(i,r),b(i,a),b(i,f),b(i,s),Z(v,u,S),Z(v,h,S),b(h,c),b(h,p),Z(v,m,S),~g&&$[g].m(v,S),Z(v,y,S),x=!0},p(v,S){(!x||S[0]&16)&&o!==(o=v[4]+1+"")&&qt(a,o),(!x||S[0]&4)&&l!==(l=v[2].length+"")&&qt(s,l),(!x||S[0]&8192)&&d!==(d=v[13]+1+"")&&qt(p,d);let C=g;g=M(v),g===C?~g&&$[g].p(v,S):(w&&(Jt(),tt($[C],1,1,()=>{$[C]=null}),te()),~g?(w=$[g],w?w.p(v,S):(w=$[g]=_[g](v),w.c()),K(w,1),w.m(y.parentNode,y)):w=null)},i(v){x||(K(w),x=!0)},o(v){tt(w),x=!1},d(v){v&&(j(e),j(n),j(i),j(u),j(h),j(m),j(y)),~g&&$[g].d(v)}}}function t$(t){let e,n,i,r;const o=[o$,r$,i$,n$],a=[];function f(l,s){return l[17]==="waveform"?0:l[17]==="tick"?1:l[17]==="bar"?2:l[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=mn()},m(l,s){~e&&a[e].m(l,s),Z(l,i,s),r=!0},p(l,s){let u=e;e=f(l),e===u?~e&&a[e].p(l,s):(n&&(Jt(),tt(a[u],1,1,()=>{a[u]=null}),te()),~e?(n=a[e],n?n.p(l,s):(n=a[e]=o[e](l),n.c()),K(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(K(n),r=!0)},o(l){tt(n),r=!1},d(l){l&&j(i),~e&&a[e].d(l)}}}function e$(t){let e,n,i,r;return e=new Qi({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ct(e.$$.fragment),n=O(),i=k("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){lt(e,o,a),Z(o,n,a),Z(o,i,a),r=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){r||(K(e.$$.fragment,o),r=!0)},o(o){tt(e.$$.fragment,o),r=!1},d(o){o&&(j(n),j(i)),st(e,o)}}}function n$(t){let e,n;return e=new An({props:{pattern:t[0],width:Mf,height:kf}}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function i$(t){let e,n;return e=new En({props:{pattern:t[0],width:Mf,height:kf}}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function r$(t){let e,n;return e=new Cn({props:{pattern:t[0],width:Mf,height:kf}}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function o$(t){let e,n;return e=new Nn({props:{pattern:t[0],audioFile:t[1],width:Mf,height:kf}}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function Bh(t){let e,n,i,r,o,a;return{c(){e=k("div"),n=k("label"),i=at(`Any final feedback?
        `),r=k("textarea")},m(f,l){Z(f,e,l),b(e,n),b(n,i),b(n,r),et(r,t[12]),o||(a=dt(r,"input",t[29]),o=!0)},p(f,l){l[0]&4096&&et(r,f[12])},d(f){f&&j(e),o=!1,a()}}}function zh(t){let e,n,i,r,o,a;return{c(){e=k("div"),e.textContent="Thanks for participating!",n=O(),i=k("div"),r=k("button"),r.textContent="Download results"},m(f,l){Z(f,e,l),Z(f,n,l),Z(f,i,l),b(i,r),o||(a=dt(r,"click",t[19]),o=!0)},p:$t,d(f){f&&(j(e),j(n),j(i)),o=!1,a()}}}function qh(t){let e,n,i;return{c(){e=k("button"),e.textContent="next step (PageDown)"},m(r,o){Z(r,e,o),n||(i=dt(e,"click",t[18]),n=!0)},p:$t,d(r){r&&j(e),n=!1,i()}}}function a$(t){let e,n,i,r,o,a,f,l,s=t[3]==="demo"&&Ph(t),u=t[3]==="tests"&&Oh(t),h=t[3]==="feedback"&&Bh(t),c=t[3]==="done"&&zh(t),d=!t[15]&&t[3]!=="done"&&qh(t);return{c(){e=k("main"),n=k("h2"),n.textContent="Study",i=O(),s&&s.c(),r=O(),u&&u.c(),o=O(),h&&h.c(),a=O(),c&&c.c(),f=O(),d&&d.c(),B(e,"class","svelte-u6a8gr")},m(p,m){Z(p,e,m),b(e,n),b(e,i),s&&s.m(e,null),b(e,r),u&&u.m(e,null),b(e,o),h&&h.m(e,null),b(e,a),c&&c.m(e,null),b(e,f),d&&d.m(e,null),l=!0},p(p,m){p[3]==="demo"?s?s.p(p,m):(s=Ph(p),s.c(),s.m(e,r)):s&&(s.d(1),s=null),p[3]==="tests"?u?(u.p(p,m),m[0]&8&&K(u,1)):(u=Oh(p),u.c(),K(u,1),u.m(e,o)):u&&(Jt(),tt(u,1,1,()=>{u=null}),te()),p[3]==="feedback"?h?h.p(p,m):(h=Bh(p),h.c(),h.m(e,a)):h&&(h.d(1),h=null),p[3]==="done"?c?c.p(p,m):(c=zh(p),c.c(),c.m(e,f)):c&&(c.d(1),c=null),!p[15]&&p[3]!=="done"?d?d.p(p,m):(d=qh(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(p){l||(K(u),l=!0)},o(p){tt(u),l=!1},d(p){p&&j(e),s&&s.d(),u&&u.d(),h&&h.d(),c&&c.d(),d&&d.d()}}}let Yh=.5;const hl=20;let f$=6,l$=!0,s$=0,Mf=600,kf=100;function u$(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[1]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],f="start",l=0,s,u="",h="20-24",c="m",d="master",p="",m=0,g=0,w="",y=0,x,_={},$=[],M,v,S=!1,C=!1,L=!1,T="tick",I=hl,D=3,H=[],E=[],R=0;const N=[];Da(()=>{document.querySelector("html").addEventListener("keyup",J)});const V=()=>{v=new kt({ratio:{firstVal:hl,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,hl],direction:-1,reversalLimit:5,verbosity:1}}),v.init()};function W(){f==="start"?(n(2,a=ds(a)),n(3,f="demo")):f==="demo"?(n(3,f="tests"),n(4,l=0)):f==="tests"?l<a.length?(n(17,T=a[l].stimulus),n(1,o=a[l].audioFile),G()):n(3,f="feedback"):f==="feedback"&&n(3,f="done")}function G(){V(),n(13,y=0),x=0,M=0,n(14,S=!0),E=[],$=[],s=new Date,A()}function A(){console.log("Starting trial "+y),_={},n(15,C=!0),Y()}function Y(){let ut=Math.round(v.getLast("ratio"));ut=Math.random()<.5?ut:-ut,_.deviation=ut,n(20,I=ut),console.log("generated pattern",H),n(16,L=!0),window.setTimeout(()=>{n(16,L=!1)},1e3)}function X(ft){if(!C)return;n(15,C=!1),_.decisionChoice=ft,_.errorCode=0;const ut=M;(_.decisionChoice==0&&_.deviation<0||_.decisionChoice==1&&_.deviation>0)&&_.errorCode==0&&M++,_.errorCode==0&&(v.next(ut!=M),$[$.length]=_),_.errorCode==0&&x++,n(13,y++,y),v.reversalLimitReached("ratio")?nt():A()}function nt(){n(14,S=!1),rt(),E=[],R=v.getFinalVal("ratio");for(let ut=0;ut<$.length;ut++)E[ut]=$[ut].deviation;console.log(E);const ft=new Date;N.push({encoding:T,audioFile:o,final:R,data:E,score:M,testNumber:l,trialCount:y+1,trials:$,validTrialCount:x+1,testTimeSeconds:(ft-s)/1e3}),n(4,l++,l)}function J(ft){switch(console.log(ft.key),ft.key){case"ArrowLeft":X(0);break;case"ArrowRight":X(1);break;case"PageDown":!C&&f!=="done"&&W()}}function rt(){`${M}`,y+1,`${(M/(y+1)*100).toFixed(1)}${v.getFinalVal("ratio")}`}function q(){const ft={demographics:{partID:u,partAge:h,partGender:c,partEduation:d,partMusicInstr:p,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:w},date:new Date().toISOString(),tests:N};console.log(ft);const ut=JSON.stringify(ft,void 0,2),Ot=new Blob([ut],{type:"text/plain;charset=utf-8"});l2(Ot,"results.json")}function z(){u=this.value,n(5,u)}function F(){h=Dn(this),n(6,h)}function U(){c=this.value,n(7,c)}function Q(){d=Dn(this),n(8,d)}function P(){p=this.value,n(9,p)}function ht(){m=fe(this.value),n(10,m)}function ot(){g=fe(this.value),n(11,g)}function pt(){w=this.value,n(12,w)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=I/100*Yh),t.$$.dirty[0]&2097153&&(n(0,H=Ii(f$,Yh,D,i,l$,s$)),console.log("generated pattern",H))},[H,o,a,f,l,u,h,c,d,p,m,g,w,y,S,C,L,T,W,q,I,i,z,F,U,Q,P,ht,ot,pt]}class c$ extends Xt{constructor(e){super(),Gt(this,e,u$,a$,Vt,{},null,[-1,-1])}}function Hh(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,y,x,_,$,M,v,S,C,L,T,I,D,H,E,R,N,V,W,G,A,Y,X,nt,J,rt,q;return{c(){e=k("div"),n=k("label"),i=at(`ID:
        `),r=k("input"),o=O(),a=k("label"),f=at(`Age:
        `),l=k("select"),s=k("option"),s.textContent="20-24",u=k("option"),u.textContent="25-29",h=k("option"),h.textContent="30-34",c=k("option"),c.textContent="35-39",d=k("option"),d.textContent="40-44",p=k("option"),p.textContent="45-49",m=k("option"),m.textContent="50-54",g=k("option"),g.textContent="55-60",w=O(),y=k("label"),x=at(`Gender:
        `),_=k("input"),$=O(),M=k("label"),v=at(`Highest finished education (select the best fitting one):
        `),S=k("select"),C=k("option"),C.textContent="none",L=k("option"),L.textContent="high school",T=k("option"),T.textContent="bachelor",I=k("option"),I.textContent="master",D=k("option"),D.textContent="phd",H=O(),E=k("label"),R=at(`Which music instruments do you play?
        `),N=k("input"),V=O(),W=k("label"),G=at(`For how many years do you roughly play it/them?
        `),A=k("input"),Y=O(),X=k("label"),nt=at(`How many years of experience do you have with visualization?
        `),J=k("input"),B(r,"type","text"),B(r,"placeholder","ID"),B(n,"class","svelte-u6a8gr"),s.__value="20-24",et(s,s.__value),u.__value="25-29",et(u,u.__value),h.__value="30-34",et(h,h.__value),c.__value="35-39",et(c,c.__value),d.__value="40-44",et(d,d.__value),p.__value="45-49",et(p,p.__value),m.__value="50-54",et(m,m.__value),g.__value="55-60",et(g,g.__value),t[6]===void 0&&Ne(()=>t[23].call(l)),B(a,"class","svelte-u6a8gr"),B(_,"type","text"),B(_,"placeholder","m, f, d, or self-describe"),B(y,"class","svelte-u6a8gr"),C.__value="none",et(C,C.__value),L.__value="highs",et(L,L.__value),T.__value="bachelor",et(T,T.__value),I.__value="master",et(I,I.__value),D.__value="phd",et(D,D.__value),t[8]===void 0&&Ne(()=>t[25].call(S)),B(M,"class","svelte-u6a8gr"),B(N,"type","text"),B(N,"placeholder","free text"),B(E,"class","svelte-u6a8gr"),B(A,"type","number"),B(A,"min","0"),B(A,"step","1"),B(W,"class","svelte-u6a8gr"),B(J,"type","number"),B(J,"min","0"),B(J,"step","1"),B(X,"class","svelte-u6a8gr"),B(e,"class","demo-form svelte-u6a8gr")},m(z,F){Z(z,e,F),b(e,n),b(n,i),b(n,r),et(r,t[5]),b(e,o),b(e,a),b(a,f),b(a,l),b(l,s),b(l,u),b(l,h),b(l,c),b(l,d),b(l,p),b(l,m),b(l,g),Ht(l,t[6],!0),b(e,w),b(e,y),b(y,x),b(y,_),et(_,t[7]),b(e,$),b(e,M),b(M,v),b(M,S),b(S,C),b(S,L),b(S,T),b(S,I),b(S,D),Ht(S,t[8],!0),b(e,H),b(e,E),b(E,R),b(E,N),et(N,t[9]),b(e,V),b(e,W),b(W,G),b(W,A),et(A,t[10]),b(e,Y),b(e,X),b(X,nt),b(X,J),et(J,t[11]),rt||(q=[dt(r,"input",t[22]),dt(l,"change",t[23]),dt(_,"input",t[24]),dt(S,"change",t[25]),dt(N,"input",t[26]),dt(A,"input",t[27]),dt(J,"input",t[28])],rt=!0)},p(z,F){F[0]&32&&r.value!==z[5]&&et(r,z[5]),F[0]&64&&Ht(l,z[6]),F[0]&128&&_.value!==z[7]&&et(_,z[7]),F[0]&256&&Ht(S,z[8]),F[0]&512&&N.value!==z[9]&&et(N,z[9]),F[0]&1024&&fe(A.value)!==z[10]&&et(A,z[10]),F[0]&2048&&fe(J.value)!==z[11]&&et(J,z[11])},d(z){z&&j(e),rt=!1,ke(q)}}}function Wh(t){let e,n,i,r,o=t[14]&&Vh(t);return{c(){e=k("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=O(),o&&o.c(),i=mn()},m(a,f){Z(a,e,f),Z(a,n,f),o&&o.m(a,f),Z(a,i,f),r=!0},p(a,f){a[14]?o?(o.p(a,f),f[0]&16384&&K(o,1)):(o=Vh(a),o.c(),K(o,1),o.m(i.parentNode,i)):o&&(Jt(),tt(o,1,1,()=>{o=null}),te())},i(a){r||(K(o),r=!0)},o(a){tt(o),r=!1},d(a){a&&(j(e),j(n),j(i)),o&&o.d(a)}}}function Vh(t){let e,n,i,r,o=t[4]+1+"",a,f,l=t[2].length+"",s,u,h,c,d=t[13]+1+"",p,m,g,w,y,x;const _=[d$,h$],$=[];function M(v,S){return v[17]==="audio"?0:v[16]===!1?1:-1}return~(g=M(t))&&(w=$[g]=_[g](t)),{c(){e=k("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=O(),i=k("p"),r=at("Test number "),a=at(o),f=at(" / "),s=at(l),u=O(),h=k("p"),c=at("Trial number "),p=at(d),m=O(),w&&w.c(),y=mn()},m(v,S){Z(v,e,S),Z(v,n,S),Z(v,i,S),b(i,r),b(i,a),b(i,f),b(i,s),Z(v,u,S),Z(v,h,S),b(h,c),b(h,p),Z(v,m,S),~g&&$[g].m(v,S),Z(v,y,S),x=!0},p(v,S){(!x||S[0]&16)&&o!==(o=v[4]+1+"")&&qt(a,o),(!x||S[0]&4)&&l!==(l=v[2].length+"")&&qt(s,l),(!x||S[0]&8192)&&d!==(d=v[13]+1+"")&&qt(p,d);let C=g;g=M(v),g===C?~g&&$[g].p(v,S):(w&&(Jt(),tt($[C],1,1,()=>{$[C]=null}),te()),~g?(w=$[g],w?w.p(v,S):(w=$[g]=_[g](v),w.c()),K(w,1),w.m(y.parentNode,y)):w=null)},i(v){x||(K(w),x=!0)},o(v){tt(w),x=!1},d(v){v&&(j(e),j(n),j(i),j(u),j(h),j(m),j(y)),~g&&$[g].d(v)}}}function h$(t){let e,n,i,r;const o=[b$,g$,m$,p$],a=[];function f(l,s){return l[17]==="waveform"?0:l[17]==="tick"?1:l[17]==="bar"?2:l[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=mn()},m(l,s){~e&&a[e].m(l,s),Z(l,i,s),r=!0},p(l,s){let u=e;e=f(l),e===u?~e&&a[e].p(l,s):(n&&(Jt(),tt(a[u],1,1,()=>{a[u]=null}),te()),~e?(n=a[e],n?n.p(l,s):(n=a[e]=o[e](l),n.c()),K(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(K(n),r=!0)},o(l){tt(n),r=!1},d(l){l&&j(i),~e&&a[e].d(l)}}}function d$(t){let e,n,i,r;return e=new Qi({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ct(e.$$.fragment),n=O(),i=k("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){lt(e,o,a),Z(o,n,a),Z(o,i,a),r=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){r||(K(e.$$.fragment,o),r=!0)},o(o){tt(e.$$.fragment,o),r=!1},d(o){o&&(j(n),j(i)),st(e,o)}}}function p$(t){let e,n;return e=new An({props:{pattern:t[0],width:Sf,height:Tf}}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function m$(t){let e,n;return e=new En({props:{pattern:t[0],width:Sf,height:Tf}}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function g$(t){let e,n;return e=new Cn({props:{pattern:t[0],width:Sf,height:Tf}}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function b$(t){let e,n;return e=new Nn({props:{pattern:t[0],audioFile:t[1],width:Sf,height:Tf}}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function Gh(t){let e,n,i,r,o,a;return{c(){e=k("div"),n=k("label"),i=at(`Any final feedback?
        `),r=k("textarea")},m(f,l){Z(f,e,l),b(e,n),b(n,i),b(n,r),et(r,t[12]),o||(a=dt(r,"input",t[29]),o=!0)},p(f,l){l[0]&4096&&et(r,f[12])},d(f){f&&j(e),o=!1,a()}}}function Xh(t){let e,n,i,r,o,a;return{c(){e=k("div"),e.textContent="Thanks for participating!",n=O(),i=k("div"),r=k("button"),r.textContent="Download results"},m(f,l){Z(f,e,l),Z(f,n,l),Z(f,i,l),b(i,r),o||(a=dt(r,"click",t[19]),o=!0)},p:$t,d(f){f&&(j(e),j(n),j(i)),o=!1,a()}}}function jh(t){let e,n,i;return{c(){e=k("button"),e.textContent="next step (PageDown)"},m(r,o){Z(r,e,o),n||(i=dt(e,"click",t[18]),n=!0)},p:$t,d(r){r&&j(e),n=!1,i()}}}function _$(t){let e,n,i,r,o,a,f,l,s=t[3]==="demo"&&Hh(t),u=t[3]==="tests"&&Wh(t),h=t[3]==="feedback"&&Gh(t),c=t[3]==="done"&&Xh(t),d=!t[15]&&t[3]!=="done"&&jh(t);return{c(){e=k("main"),n=k("h2"),n.textContent="Study (Within-Participant Variance)",i=O(),s&&s.c(),r=O(),u&&u.c(),o=O(),h&&h.c(),a=O(),c&&c.c(),f=O(),d&&d.c(),B(e,"class","svelte-u6a8gr")},m(p,m){Z(p,e,m),b(e,n),b(e,i),s&&s.m(e,null),b(e,r),u&&u.m(e,null),b(e,o),h&&h.m(e,null),b(e,a),c&&c.m(e,null),b(e,f),d&&d.m(e,null),l=!0},p(p,m){p[3]==="demo"?s?s.p(p,m):(s=Hh(p),s.c(),s.m(e,r)):s&&(s.d(1),s=null),p[3]==="tests"?u?(u.p(p,m),m[0]&8&&K(u,1)):(u=Wh(p),u.c(),K(u,1),u.m(e,o)):u&&(Jt(),tt(u,1,1,()=>{u=null}),te()),p[3]==="feedback"?h?h.p(p,m):(h=Gh(p),h.c(),h.m(e,a)):h&&(h.d(1),h=null),p[3]==="done"?c?c.p(p,m):(c=Xh(p),c.c(),c.m(e,f)):c&&(c.d(1),c=null),!p[15]&&p[3]!=="done"?d?d.p(p,m):(d=jh(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(p){l||(K(u),l=!0)},o(p){tt(u),l=!1},d(p){p&&j(e),s&&s.d(),u&&u.d(),h&&h.d(),c&&c.d(),d&&d.d()}}}let Zh=.5;const dl=20;let y$=6,w$=!0,v$=0,Sf=600,Tf=100;function x$(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],f="start",l=0,s,u="",h="20-24",c="m",d="master",p="",m=0,g=0,w="",y=0,x,_={},$=[],M,v,S=!1,C=!1,L=!1,T="tick",I=dl,D=3,H=[],E=[],R=0;const N=[];Da(()=>{document.querySelector("html").addEventListener("keyup",J)});const V=()=>{v=new kt({ratio:{firstVal:dl,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,dl],direction:-1,reversalLimit:5,verbosity:1}}),v.init()};function W(){f==="start"?(n(2,a=ds(a)),n(3,f="demo")):f==="demo"?(n(3,f="tests"),n(4,l=0)):f==="tests"?l<a.length?(n(17,T=a[l].stimulus),n(1,o=a[l].audioFile),G()):n(3,f="feedback"):f==="feedback"&&n(3,f="done")}function G(){V(),n(13,y=0),x=0,M=0,n(14,S=!0),E=[],$=[],s=new Date,A()}function A(){console.log("Starting trial "+y),_={},n(15,C=!0),Y()}function Y(){let ut=Math.round(v.getLast("ratio"));ut=Math.random()<.5?ut:-ut,_.deviation=ut,n(20,I=ut),console.log("generated pattern",H),n(16,L=!0),window.setTimeout(()=>{n(16,L=!1)},1e3)}function X(ft){if(!C)return;n(15,C=!1),_.decisionChoice=ft,_.errorCode=0;const ut=M;(_.decisionChoice==0&&_.deviation<0||_.decisionChoice==1&&_.deviation>0)&&_.errorCode==0&&M++,_.errorCode==0&&(v.next(ut!=M),$[$.length]=_),_.errorCode==0&&x++,n(13,y++,y),v.reversalLimitReached("ratio")?nt():A()}function nt(){n(14,S=!1),rt(),E=[],R=v.getFinalVal("ratio");for(let ut=0;ut<$.length;ut++)E[ut]=$[ut].deviation;console.log(E);const ft=new Date;N.push({encoding:T,audioFile:o,final:R,data:E,score:M,testNumber:l,trialCount:y+1,trials:$,validTrialCount:x+1,testTimeSeconds:(ft-s)/1e3}),n(4,l++,l)}function J(ft){switch(console.log(ft.key),ft.key){case"ArrowLeft":X(0);break;case"ArrowRight":X(1);break;case"PageDown":!C&&f!=="done"&&W()}}function rt(){`${M}`,y+1,`${(M/(y+1)*100).toFixed(1)}${v.getFinalVal("ratio")}`}function q(){const ft={demographics:{partID:u,partAge:h,partGender:c,partEduation:d,partMusicInstr:p,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:w},date:new Date().toISOString(),tests:N};console.log(ft);const ut=JSON.stringify(ft,void 0,2),Ot=new Blob([ut],{type:"text/plain;charset=utf-8"});l2(Ot,"results.json")}function z(){u=this.value,n(5,u)}function F(){h=Dn(this),n(6,h)}function U(){c=this.value,n(7,c)}function Q(){d=Dn(this),n(8,d)}function P(){p=this.value,n(9,p)}function ht(){m=fe(this.value),n(10,m)}function ot(){g=fe(this.value),n(11,g)}function pt(){w=this.value,n(12,w)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=I/100*Zh),t.$$.dirty[0]&2097153&&(n(0,H=Ii(y$,Zh,D,i,w$,v$)),console.log("generated pattern",H))},[H,o,a,f,l,u,h,c,d,p,m,g,w,y,S,C,L,T,W,q,I,i,z,F,U,Q,P,ht,ot,pt]}class $$ extends Xt{constructor(e){super(),Gt(this,e,x$,_$,Vt,{},null,[-1,-1])}}function M$(t){let e,n,i;return{c(){e=k("div"),B(e,"width",n=t[0]+"px"),B(e,"height",i=t[1]+"px")},m(r,o){Z(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&B(e,"width",n),o&2&&i!==(i=r[1]+"px")&&B(e,"height",i)},i:$t,o:$t,d(r){r&&j(e),t[6](null)}}}function k$(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:f=100}=e,l;si(()=>{console.log(o);const u=Yn({width:a,height:f,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[a2(i,{x:h=>h}),bu(i,{x:h=>h,dx:7,y:(h,c)=>c,text:(h,c)=>`P${c+1}`})]});n(2,l.textContent="",l),l.appendChild(u)});function s(u){Xe[u?"unshift":"push"](()=>{l=u,n(2,l)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,f=u.height)},[a,f,l,i,r,o,s]}class u2 extends Xt{constructor(e){super(),Gt(this,e,k$,M$,Vt,{data:3,domain:4,title:5,width:0,height:1})}}function S$(t){let e,n,i;return{c(){e=k("div"),B(e,"width",n=t[0]+"px"),B(e,"height",i=t[1]+"px")},m(r,o){Z(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&B(e,"width",n),o&2&&i!==(i=r[1]+"px")&&B(e,"height",i)},i:$t,o:$t,d(r){r&&j(e),t[5](null)}}}function T$(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;si(()=>{const s=i.map(h=>({encoding:h.encoding,...f(h.finals)})),u=Yn({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[o2(s,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),i2(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),pu([0])]});n(2,a.textContent="",a),a.appendChild(u)});function f(s){const u=s.length,h=Vr(s),p=1.96*(Ra(s)/Math.sqrt(u)),m=h-p,g=h+p;return{mean:h,low:m,high:g}}function l(s){Xe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,f,l]}class c2 extends Xt{constructor(e){super(),Gt(this,e,T$,S$,Vt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function C$(t){let e,n,i;return{c(){e=k("div"),B(e,"width",n=t[0]+"px"),B(e,"height",i=t[1]+"px")},m(r,o){Z(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&B(e,"width",n),o&2&&i!==(i=r[1]+"px")&&B(e,"height",i)},i:$t,o:$t,d(r){r&&j(e),t[5](null)}}}function E$(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;si(()=>{const s=i.map(h=>({encoding:h.encoding,...f(h.trialCounts)})),u=Yn({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:s.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[o2(s,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),i2(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),pu([0])]});n(2,a.textContent="",a),a.appendChild(u)});function f(s){const u=s.length,h=Vr(s),p=1.96*(Ra(s)/Math.sqrt(u)),m=h-p,g=h+p;return{mean:h,low:m,high:g}}function l(s){Xe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,f,l]}class h2 extends Xt{constructor(e){super(),Gt(this,e,E$,C$,Vt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Kh(t,e,n){const i=t.slice();return i[8]=e[n],i}function Qh(t,e,n){const i=t.slice();return i[11]=e[n],i}function Jh(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new u2({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=k("b"),i=at(n),r=O(),ct(o.$$.fragment)},m(f,l){Z(f,e,l),b(e,i),Z(f,r,l),lt(o,f,l),a=!0},p(f,l){(!a||l&4)&&n!==(n=f[11].encoding+"")&&qt(i,n);const s={};l&4&&(s.data=f[11].finals),l&4&&(s.title=f[11].encoding),l&2&&(s.domain=[0,f[1]]),o.$set(s)},i(f){a||(K(o.$$.fragment,f),a=!0)},o(f){tt(o.$$.fragment,f),a=!1},d(f){f&&(j(e),j(r)),st(o,f)}}}function td(t){let e,n,i,r=t[8].demographics.partID+"",o,a,f,l,s=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",u;return{c(){e=k("div"),n=k("b"),i=at("P"),o=at(r),a=at(":"),f=O(),l=new vd(!1),u=O(),l.a=u,oe(e,"text-align","left")},m(h,c){Z(h,e,c),b(e,n),b(n,i),b(n,o),b(n,a),b(e,f),l.m(s,e),b(e,u)},p(h,c){c&1&&r!==(r=h[8].demographics.partID+"")&&qt(o,r),c&1&&s!==(s=h[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&l.p(s)},d(h){h&&j(e)}}}function A$(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,y,x,_,$,M,v,S,C,L,T;h=new c2({props:{stimuli:t[2]}}),g=new h2({props:{stimuli:t[2]}});let I=_e(t[2]),D=[];for(let N=0;N<I.length;N+=1)D[N]=Jh(Qh(t,I,N));const H=N=>tt(D[N],1,1,()=>{D[N]=null});let E=_e(t[0]),R=[];for(let N=0;N<E.length;N+=1)R[N]=td(Kh(t,E,N));return{c(){e=k("main"),n=k("h2"),n.textContent="Analysis",i=O(),r=k("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=O(),a=k("input"),f=O(),l=k("div"),s=k("h3"),s.textContent="Mean and CI of Final Values",u=O(),ct(h.$$.fragment),c=O(),d=k("div"),p=k("h3"),p.textContent="Mean and CI of Trial Counts",m=O(),ct(g.$$.fragment),w=O(),y=k("div"),x=k("h3"),x.textContent="Final Values for Each Stimulus and All Participants",_=O();for(let N=0;N<D.length;N+=1)D[N].c();$=O(),M=k("div"),v=k("h3"),v.textContent="Feedback",S=O();for(let N=0;N<R.length;N+=1)R[N].c();B(a,"type","file"),B(a,"accept",".json"),a.multiple=!0},m(N,V){Z(N,e,V),b(e,n),b(e,i),b(e,r),b(e,o),b(e,a),b(e,f),b(e,l),b(l,s),b(l,u),lt(h,l,null),b(e,c),b(e,d),b(d,p),b(d,m),lt(g,d,null),b(e,w),b(e,y),b(y,x),b(y,_);for(let W=0;W<D.length;W+=1)D[W]&&D[W].m(y,null);b(e,$),b(e,M),b(M,v),b(M,S);for(let W=0;W<R.length;W+=1)R[W]&&R[W].m(M,null);C=!0,L||(T=dt(a,"input",t[3]),L=!0)},p(N,[V]){const W={};V&4&&(W.stimuli=N[2]),h.$set(W);const G={};if(V&4&&(G.stimuli=N[2]),g.$set(G),V&6){I=_e(N[2]);let A;for(A=0;A<I.length;A+=1){const Y=Qh(N,I,A);D[A]?(D[A].p(Y,V),K(D[A],1)):(D[A]=Jh(Y),D[A].c(),K(D[A],1),D[A].m(y,null))}for(Jt(),A=I.length;A<D.length;A+=1)H(A);te()}if(V&1){E=_e(N[0]);let A;for(A=0;A<E.length;A+=1){const Y=Kh(N,E,A);R[A]?R[A].p(Y,V):(R[A]=td(Y),R[A].c(),R[A].m(M,null))}for(;A<R.length;A+=1)R[A].d(1);R.length=E.length}},i(N){if(!C){K(h.$$.fragment,N),K(g.$$.fragment,N);for(let V=0;V<I.length;V+=1)K(D[V]);C=!0}},o(N){tt(h.$$.fragment,N),tt(g.$$.fragment,N),D=D.filter(Boolean);for(let V=0;V<D.length;V+=1)tt(D[V]);C=!1},d(N){N&&j(e),st(h),st(g),Li(D,N),Li(R,N),L=!1,T()}}}function N$(t,e,n){let i,r,o,a=[];const f=async u=>{const h=[],c=[];for(const d of u.target.files){const p=await d.text();h.push(JSON.parse(p)),c.push(d.name)}n(0,a=h),console.log(a)},l=u=>{if(u.lenght===0)return[];const h=[];for(const c of u)for(const d of c.tests){let p=d.encoding;(d.encoding==="audio"||d.encoding==="waveform")&&(p=`${d.encoding} + ${d.audioFile.startsWith("./Fluid")?"piano":"drums"}`),h.push({...c.demographics,...d,date:c.date,testType:p})}return console.log(h),h},s=u=>{if(u.length===0)return[];const h=Nd(u,c=>c.testType).map(([c,d])=>{const p=d.map(m=>m.final);return{encoding:c,finals:p,finalMean:Vr(p),finalVar:Ia(p),trialCounts:d.map(m=>m.trialCount)}});return console.log(h),h};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=l(a)),t.$$.dirty&16&&n(2,r=s(i)),t.$$.dirty&16&&n(1,o=ce(i.map(u=>Math.abs(u.final))))},[a,o,r,f,i]}class D$ extends Xt{constructor(e){super(),Gt(this,e,N$,A$,Vt,{})}}function ed(t,e,n){const i=t.slice();return i[8]=e[n],i}function nd(t,e,n){const i=t.slice();return i[11]=e[n],i}function id(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new u2({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=k("b"),i=at(n),r=O(),ct(o.$$.fragment)},m(f,l){Z(f,e,l),b(e,i),Z(f,r,l),lt(o,f,l),a=!0},p(f,l){(!a||l&4)&&n!==(n=f[11].encoding+"")&&qt(i,n);const s={};l&4&&(s.data=f[11].finals),l&4&&(s.title=f[11].encoding),l&2&&(s.domain=[0,f[1]]),o.$set(s)},i(f){a||(K(o.$$.fragment,f),a=!0)},o(f){tt(o.$$.fragment,f),a=!1},d(f){f&&(j(e),j(r)),st(o,f)}}}function rd(t){let e,n,i,r=t[8].demographics.partID+"",o,a,f,l,s=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",u;return{c(){e=k("div"),n=k("b"),i=at("P"),o=at(r),a=at(":"),f=O(),l=new vd(!1),u=O(),l.a=u,oe(e,"text-align","left")},m(h,c){Z(h,e,c),b(e,n),b(n,i),b(n,o),b(n,a),b(e,f),l.m(s,e),b(e,u)},p(h,c){c&1&&r!==(r=h[8].demographics.partID+"")&&qt(o,r),c&1&&s!==(s=h[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&l.p(s)},d(h){h&&j(e)}}}function F$(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,y,x,_,$,M,v,S,C,L,T;h=new c2({props:{stimuli:t[2]}}),g=new h2({props:{stimuli:t[2]}});let I=_e(t[2]),D=[];for(let N=0;N<I.length;N+=1)D[N]=id(nd(t,I,N));const H=N=>tt(D[N],1,1,()=>{D[N]=null});let E=_e(t[0]),R=[];for(let N=0;N<E.length;N+=1)R[N]=rd(ed(t,E,N));return{c(){e=k("main"),n=k("h2"),n.textContent="Analysis (Within-Participant Variance)",i=O(),r=k("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=O(),a=k("input"),f=O(),l=k("div"),s=k("h3"),s.textContent="Mean and CI of Final Values",u=O(),ct(h.$$.fragment),c=O(),d=k("div"),p=k("h3"),p.textContent="Mean and CI of Trial Counts",m=O(),ct(g.$$.fragment),w=O(),y=k("div"),x=k("h3"),x.textContent="Final Values for Each Stimulus and All Participants",_=O();for(let N=0;N<D.length;N+=1)D[N].c();$=O(),M=k("div"),v=k("h3"),v.textContent="Feedback",S=O();for(let N=0;N<R.length;N+=1)R[N].c();B(a,"type","file"),B(a,"accept",".json"),a.multiple=!0},m(N,V){Z(N,e,V),b(e,n),b(e,i),b(e,r),b(e,o),b(e,a),b(e,f),b(e,l),b(l,s),b(l,u),lt(h,l,null),b(e,c),b(e,d),b(d,p),b(d,m),lt(g,d,null),b(e,w),b(e,y),b(y,x),b(y,_);for(let W=0;W<D.length;W+=1)D[W]&&D[W].m(y,null);b(e,$),b(e,M),b(M,v),b(M,S);for(let W=0;W<R.length;W+=1)R[W]&&R[W].m(M,null);C=!0,L||(T=dt(a,"input",t[3]),L=!0)},p(N,[V]){const W={};V&4&&(W.stimuli=N[2]),h.$set(W);const G={};if(V&4&&(G.stimuli=N[2]),g.$set(G),V&6){I=_e(N[2]);let A;for(A=0;A<I.length;A+=1){const Y=nd(N,I,A);D[A]?(D[A].p(Y,V),K(D[A],1)):(D[A]=id(Y),D[A].c(),K(D[A],1),D[A].m(y,null))}for(Jt(),A=I.length;A<D.length;A+=1)H(A);te()}if(V&1){E=_e(N[0]);let A;for(A=0;A<E.length;A+=1){const Y=ed(N,E,A);R[A]?R[A].p(Y,V):(R[A]=rd(Y),R[A].c(),R[A].m(M,null))}for(;A<R.length;A+=1)R[A].d(1);R.length=E.length}},i(N){if(!C){K(h.$$.fragment,N),K(g.$$.fragment,N);for(let V=0;V<I.length;V+=1)K(D[V]);C=!0}},o(N){tt(h.$$.fragment,N),tt(g.$$.fragment,N),D=D.filter(Boolean);for(let V=0;V<D.length;V+=1)tt(D[V]);C=!1},d(N){N&&j(e),st(h),st(g),Li(D,N),Li(R,N),L=!1,T()}}}function L$(t,e,n){let i,r,o,a=[];const f=async u=>{const h=[],c=[];for(const d of u.target.files){const p=await d.text();h.push(JSON.parse(p)),c.push(d.name)}n(0,a=h),console.log(a)},l=u=>{if(u.lenght===0)return[];const h=[];for(const c of u)for(const d of c.tests){let p=d.encoding;(d.encoding==="audio"||d.encoding==="waveform")&&(p=`${d.encoding} + ${d.audioFile.startsWith("./Fluid")?"piano":"drums"}`),h.push({...c.demographics,...d,date:c.date,testType:p})}return console.log(h),h},s=u=>{if(u.length===0)return[];const h=Nd(u,c=>c.testType).map(([c,d])=>{const p=d.map(m=>m.final);return{encoding:c,finals:p,finalMean:Vr(p),finalVar:Ia(p),trialCounts:d.map(m=>m.trialCount)}});return console.log(h),h};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=l(a)),t.$$.dirty&16&&n(2,r=s(i)),t.$$.dirty&16&&n(1,o=ce(i.map(u=>Math.abs(u.final))))},[a,o,r,f,i]}class I$ extends Xt{constructor(e){super(),Gt(this,e,L$,F$,Vt,{})}}function od(t,e,n){const i=t.slice();return i[8]=e[n],i}function ad(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=k("option"),i=at(n),e.__value=t[8],et(e,e.__value)},m(r,o){Z(r,e,o),b(e,i)},p:$t,d(r){r&&j(e)}}}function R$(t){let e,n,i,r,o,a,f,l,s=(t[1]*1e3).toFixed(1)+"",u,h,c,d,p,m,g,w,y,x,_,$,M,v,S,C,L,T,I,D,H,E,R,N,V,W,G,A,Y,X,nt,J,rt,q,z=_e(t[5]),F=[];for(let U=0;U<z.length;U+=1)F[U]=ad(od(t,z,U));return M=new Qi({props:{pattern:t[3],audioFile:t[2]}}),S=new Qi({props:{pattern:t[4],audioFile:t[2]}}),L=new Nn({props:{pattern:t[3],audioFile:t[2],width:wn,height:vn}}),I=new Nn({props:{pattern:t[4],audioFile:t[2],width:wn,height:vn}}),H=new Cn({props:{pattern:t[3],width:wn,height:vn}}),R=new Cn({props:{pattern:t[4],width:wn,height:vn}}),V=new En({props:{pattern:t[3],width:wn,height:vn}}),G=new En({props:{pattern:t[4],width:wn,height:vn}}),Y=new An({props:{pattern:t[3],width:wn,height:vn}}),nt=new An({props:{pattern:t[4],width:wn,height:vn}}),{c(){e=k("main"),n=k("h2"),n.textContent="Examples",i=O(),r=k("div"),o=k("label"),a=at(`deviation
      `),f=k("input"),l=at(`
      (`),u=at(s),h=at(" milliseconds)"),c=O(),d=k("label"),p=at(`instrument sample:
      `),m=k("select");for(let U=0;U<F.length;U+=1)F[U].c();g=O(),w=k("div"),y=k("h2"),y.textContent="early fourth note",x=O(),_=k("h2"),_.textContent="late fourth note",$=O(),ct(M.$$.fragment),v=O(),ct(S.$$.fragment),C=O(),ct(L.$$.fragment),T=O(),ct(I.$$.fragment),D=O(),ct(H.$$.fragment),E=O(),ct(R.$$.fragment),N=O(),ct(V.$$.fragment),W=O(),ct(G.$$.fragment),A=O(),ct(Y.$$.fragment),X=O(),ct(nt.$$.fragment),B(f,"type","range"),B(f,"min","0"),B(f,"max","20"),B(f,"step","1"),B(o,"class","svelte-1kjj0oz"),t[2]===void 0&&Ne(()=>t[7].call(m)),B(d,"class","svelte-1kjj0oz"),B(w,"class","stimuli svelte-1kjj0oz")},m(U,Q){Z(U,e,Q),b(e,n),b(e,i),b(e,r),b(r,o),b(o,a),b(o,f),et(f,t[0]),b(o,l),b(o,u),b(o,h),b(r,c),b(r,d),b(d,p),b(d,m);for(let P=0;P<F.length;P+=1)F[P]&&F[P].m(m,null);Ht(m,t[2],!0),b(e,g),b(e,w),b(w,y),b(w,x),b(w,_),b(w,$),lt(M,w,null),b(w,v),lt(S,w,null),b(w,C),lt(L,w,null),b(w,T),lt(I,w,null),b(w,D),lt(H,w,null),b(w,E),lt(R,w,null),b(w,N),lt(V,w,null),b(w,W),lt(G,w,null),b(w,A),lt(Y,w,null),b(w,X),lt(nt,w,null),J=!0,rt||(q=[dt(f,"change",t[6]),dt(f,"input",t[6]),dt(m,"change",t[7])],rt=!0)},p(U,[Q]){if(Q&1&&et(f,U[0]),(!J||Q&2)&&s!==(s=(U[1]*1e3).toFixed(1)+"")&&qt(u,s),Q&32){z=_e(U[5]);let Ut;for(Ut=0;Ut<z.length;Ut+=1){const ee=od(U,z,Ut);F[Ut]?F[Ut].p(ee,Q):(F[Ut]=ad(ee),F[Ut].c(),F[Ut].m(m,null))}for(;Ut<F.length;Ut+=1)F[Ut].d(1);F.length=z.length}Q&36&&Ht(m,U[2]);const P={};Q&8&&(P.pattern=U[3]),Q&4&&(P.audioFile=U[2]),M.$set(P);const ht={};Q&16&&(ht.pattern=U[4]),Q&4&&(ht.audioFile=U[2]),S.$set(ht);const ot={};Q&8&&(ot.pattern=U[3]),Q&4&&(ot.audioFile=U[2]),L.$set(ot);const pt={};Q&16&&(pt.pattern=U[4]),Q&4&&(pt.audioFile=U[2]),I.$set(pt);const ft={};Q&8&&(ft.pattern=U[3]),H.$set(ft);const ut={};Q&16&&(ut.pattern=U[4]),R.$set(ut);const Ot={};Q&8&&(Ot.pattern=U[3]),V.$set(Ot);const me={};Q&16&&(me.pattern=U[4]),G.$set(me);const mi={};Q&8&&(mi.pattern=U[3]),Y.$set(mi);const gi={};Q&16&&(gi.pattern=U[4]),nt.$set(gi)},i(U){J||(K(M.$$.fragment,U),K(S.$$.fragment,U),K(L.$$.fragment,U),K(I.$$.fragment,U),K(H.$$.fragment,U),K(R.$$.fragment,U),K(V.$$.fragment,U),K(G.$$.fragment,U),K(Y.$$.fragment,U),K(nt.$$.fragment,U),J=!0)},o(U){tt(M.$$.fragment,U),tt(S.$$.fragment,U),tt(L.$$.fragment,U),tt(I.$$.fragment,U),tt(H.$$.fragment,U),tt(R.$$.fragment,U),tt(V.$$.fragment,U),tt(G.$$.fragment,U),tt(Y.$$.fragment,U),tt(nt.$$.fragment,U),J=!1},d(U){U&&j(e),Li(F,U),st(M),st(S),st(L),st(I),st(H),st(R),st(V),st(G),st(Y),st(nt),rt=!1,ke(q)}}}let wn=600,vn=100,pl=.5,fd=6,ld=3,sd=!0,ud=0;function P$(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=20,f=[],l=[];function s(){a=fe(this.value),n(0,a)}function u(){o=Dn(this),n(2,o),n(5,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=a/100*pl),t.$$.dirty&2&&n(3,f=Ii(fd,pl,ld,-i,sd,ud)),t.$$.dirty&2&&n(4,l=Ii(fd,pl,ld,i,sd,ud))},[a,i,o,f,l,r,s,u]}class O$ extends Xt{constructor(e){super(),Gt(this,e,P$,R$,Vt,{})}}function Xo(t,e){return new URLSearchParams(t.location.search).get(e)}function cd(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,y,x;return{c(){e=k("div"),n=k("div"),i=k("p"),i.textContent=`Please click + or - until this rectangle has the size of a credit
          card.`,r=O(),o=k("p"),a=k("button"),a.textContent="+",f=O(),l=k("button"),l.textContent="-",s=O(),u=gl("svg"),h=gl("rect"),g=O(),w=k("div"),w.textContent=`Please also set your screen brightness and audio volume to comfortable
        levels and avoid sunlight or artificial light reflecting from your
        screen.`,B(h,"width",c=t[0]*.52),B(h,"height",d=t[18]*2),B(h,"fill","#ccc"),B(h,"rx","8"),B(u,"width",p=t[0]*.52+"px"),B(u,"height",m=t[18]*2+"px")},m(_,$){Z(_,e,$),b(e,n),b(n,i),b(n,r),b(n,o),b(o,a),b(o,f),b(o,l),b(n,s),b(n,u),b(u,h),b(e,g),b(e,w),y||(x=[dt(a,"click",t[25]),dt(l,"click",t[26])],y=!0)},p(_,$){$[0]&1&&c!==(c=_[0]*.52)&&B(h,"width",c),$[0]&262144&&d!==(d=_[18]*2)&&B(h,"height",d),$[0]&1&&p!==(p=_[0]*.52+"px")&&B(u,"width",p),$[0]&262144&&m!==(m=_[18]*2+"px")&&B(u,"height",m)},d(_){_&&j(e),y=!1,ke(x)}}}function hd(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,y,x,_,$,M,v,S,C,L,T,I,D,H,E,R,N,V,W,G,A,Y,X;return{c(){e=k("div"),n=k("label"),i=at(`Age in years:
        `),r=k("select"),o=k("option"),o.textContent="20-24",a=k("option"),a.textContent="25-29",f=k("option"),f.textContent="30-34",l=k("option"),l.textContent="35-39",s=k("option"),s.textContent="40-44",u=k("option"),u.textContent="45-49",h=k("option"),h.textContent="50-54",c=k("option"),c.textContent="55-60",d=O(),p=k("label"),m=at(`Gender:
        `),g=k("input"),w=O(),y=k("label"),x=at(`Highest finished education (select the best fitting one):
        `),_=k("select"),$=k("option"),$.textContent="none",M=k("option"),M.textContent="high school",v=k("option"),v.textContent="bachelor",S=k("option"),S.textContent="master",C=k("option"),C.textContent="phd",L=O(),T=k("label"),I=at(`Which music instruments do you play? Please separate by comma, if you do
        not play any, write 'none'.
        `),D=k("input"),H=O(),E=k("label"),R=at(`For how many years do you roughly play it/them?
        `),N=k("input"),V=O(),W=k("label"),G=at(`How many years of experience do you have with information visualization?
        `),A=k("input"),o.__value="20-24",et(o,o.__value),a.__value="25-29",et(a,a.__value),f.__value="30-34",et(f,f.__value),l.__value="35-39",et(l,l.__value),s.__value="40-44",et(s,s.__value),u.__value="45-49",et(u,u.__value),h.__value="50-54",et(h,h.__value),c.__value="55-60",et(c,c.__value),t[6]===void 0&&Ne(()=>t[27].call(r)),B(n,"class","svelte-11tlnfp"),B(g,"type","text"),B(g,"placeholder","m, f, d, or self-describe"),B(p,"class","svelte-11tlnfp"),$.__value="none",et($,$.__value),M.__value="highs",et(M,M.__value),v.__value="bachelor",et(v,v.__value),S.__value="master",et(S,S.__value),C.__value="phd",et(C,C.__value),t[8]===void 0&&Ne(()=>t[29].call(_)),B(y,"class","svelte-11tlnfp"),B(D,"type","text"),B(D,"placeholder","free text"),B(T,"class","svelte-11tlnfp"),B(N,"type","number"),B(N,"min","0"),B(N,"step","1"),B(E,"class","svelte-11tlnfp"),B(A,"type","number"),B(A,"min","0"),B(A,"step","1"),B(W,"class","svelte-11tlnfp"),B(e,"class","demo-form svelte-11tlnfp")},m(nt,J){Z(nt,e,J),b(e,n),b(n,i),b(n,r),b(r,o),b(r,a),b(r,f),b(r,l),b(r,s),b(r,u),b(r,h),b(r,c),Ht(r,t[6],!0),b(e,d),b(e,p),b(p,m),b(p,g),et(g,t[7]),b(e,w),b(e,y),b(y,x),b(y,_),b(_,$),b(_,M),b(_,v),b(_,S),b(_,C),Ht(_,t[8],!0),b(e,L),b(e,T),b(T,I),b(T,D),et(D,t[9]),b(e,H),b(e,E),b(E,R),b(E,N),et(N,t[10]),b(e,V),b(e,W),b(W,G),b(W,A),et(A,t[11]),Y||(X=[dt(r,"change",t[27]),dt(g,"input",t[28]),dt(_,"change",t[29]),dt(D,"input",t[30]),dt(N,"input",t[31]),dt(A,"input",t[32])],Y=!0)},p(nt,J){J[0]&64&&Ht(r,nt[6]),J[0]&128&&g.value!==nt[7]&&et(g,nt[7]),J[0]&256&&Ht(_,nt[8]),J[0]&512&&D.value!==nt[9]&&et(D,nt[9]),J[0]&1024&&fe(N.value)!==nt[10]&&et(N,nt[10]),J[0]&2048&&fe(A.value)!==nt[11]&&et(A,nt[11])},d(nt){nt&&j(e),Y=!1,ke(X)}}}function dd(t){let e,n,i,r,o,a,f=t[14]&&pd(t);return{c(){e=k("p"),e.textContent=`You will be presented with a sequence of six piano notes which should have
      equal distances in time.`,n=O(),i=k("p"),i.innerHTML=`The <b>fourth note</b> might be played <b>too early or too late</b>, also
      affecting the ones after.`,r=O(),f&&f.c(),o=mn()},m(l,s){Z(l,e,s),Z(l,n,s),Z(l,i,s),Z(l,r,s),f&&f.m(l,s),Z(l,o,s),a=!0},p(l,s){l[14]?f?(f.p(l,s),s[0]&16384&&K(f,1)):(f=pd(l),f.c(),K(f,1),f.m(o.parentNode,o)):f&&(Jt(),tt(f,1,1,()=>{f=null}),te())},i(l){a||(K(f),a=!0)},o(l){tt(f),a=!1},d(l){l&&(j(e),j(n),j(i),j(r),j(o)),f&&f.d(l)}}}function pd(t){let e,n,i,r,o=t[5]+1+"",a,f,l=t[3].length+"",s,u,h,c,d=t[13]+1+"",p,m,g,w,y,x;const _=[B$,U$],$=[];function M(v,S){return v[17]==="audio"?0:v[16]===!1?1:-1}return~(g=M(t))&&(w=$[g]=_[g](t)),{c(){e=k("p"),e.textContent=`Use the arrow keys on your keyboard: left for too early, right for too
        late.`,n=O(),i=k("p"),r=at("Test number "),a=at(o),f=at(" / "),s=at(l),u=O(),h=k("p"),c=at("Trial number "),p=at(d),m=O(),w&&w.c(),y=mn()},m(v,S){Z(v,e,S),Z(v,n,S),Z(v,i,S),b(i,r),b(i,a),b(i,f),b(i,s),Z(v,u,S),Z(v,h,S),b(h,c),b(h,p),Z(v,m,S),~g&&$[g].m(v,S),Z(v,y,S),x=!0},p(v,S){(!x||S[0]&32)&&o!==(o=v[5]+1+"")&&qt(a,o),(!x||S[0]&8)&&l!==(l=v[3].length+"")&&qt(s,l),(!x||S[0]&8192)&&d!==(d=v[13]+1+"")&&qt(p,d);let C=g;g=M(v),g===C?~g&&$[g].p(v,S):(w&&(Jt(),tt($[C],1,1,()=>{$[C]=null}),te()),~g?(w=$[g],w?w.p(v,S):(w=$[g]=_[g](v),w.c()),K(w,1),w.m(y.parentNode,y)):w=null)},i(v){x||(K(w),x=!0)},o(v){tt(w),x=!1},d(v){v&&(j(e),j(n),j(i),j(u),j(h),j(m),j(y)),~g&&$[g].d(v)}}}function U$(t){let e,n,i,r;const o=[H$,Y$,q$,z$],a=[];function f(l,s){return l[17]==="waveform"?0:l[17]==="tick"?1:l[17]==="bar"?2:l[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=mn()},m(l,s){~e&&a[e].m(l,s),Z(l,i,s),r=!0},p(l,s){let u=e;e=f(l),e===u?~e&&a[e].p(l,s):(n&&(Jt(),tt(a[u],1,1,()=>{a[u]=null}),te()),~e?(n=a[e],n?n.p(l,s):(n=a[e]=o[e](l),n.c()),K(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(K(n),r=!0)},o(l){tt(n),r=!1},d(l){l&&j(i),~e&&a[e].d(l)}}}function B$(t){let e,n,i,r;return e=new Qi({props:{pattern:[...t[1].slice(0,t[1].length-1),t[1].at(-1)+Math.random()*1e-4],audioFile:t[2],currentTrialNumber:t[13]}}),{c(){ct(e.$$.fragment),n=O(),i=k("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){lt(e,o,a),Z(o,n,a),Z(o,i,a),r=!0},p(o,a){const f={};a[0]&2&&(f.pattern=[...o[1].slice(0,o[1].length-1),o[1].at(-1)+Math.random()*1e-4]),a[0]&4&&(f.audioFile=o[2]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){r||(K(e.$$.fragment,o),r=!0)},o(o){tt(e.$$.fragment,o),r=!1},d(o){o&&(j(n),j(i)),st(e,o)}}}function z$(t){let e,n,i,r,o,a,f,l,s,u,h;return n=new An({props:{pattern:t[19],width:t[0]/2,height:t[18]/2}}),r=new An({props:{pattern:t[20],width:t[0]/2,height:t[18]/2}}),u=new An({props:{pattern:t[1],width:t[0],height:t[18]}}),{c(){e=k("div"),ct(n.$$.fragment),i=O(),ct(r.$$.fragment),o=O(),a=k("div"),a.textContent="Example for early",f=O(),l=k("div"),l.textContent="Example for late",s=O(),ct(u.$$.fragment),B(e,"class","vis-example svelte-11tlnfp")},m(c,d){Z(c,e,d),lt(n,e,null),b(e,i),lt(r,e,null),b(e,o),b(e,a),b(e,f),b(e,l),Z(c,s,d),lt(u,c,d),h=!0},p(c,d){const p={};d[0]&1&&(p.width=c[0]/2),d[0]&262144&&(p.height=c[18]/2),n.$set(p);const m={};d[0]&1&&(m.width=c[0]/2),d[0]&262144&&(m.height=c[18]/2),r.$set(m);const g={};d[0]&2&&(g.pattern=c[1]),d[0]&1&&(g.width=c[0]),d[0]&262144&&(g.height=c[18]),u.$set(g)},i(c){h||(K(n.$$.fragment,c),K(r.$$.fragment,c),K(u.$$.fragment,c),h=!0)},o(c){tt(n.$$.fragment,c),tt(r.$$.fragment,c),tt(u.$$.fragment,c),h=!1},d(c){c&&(j(e),j(s)),st(n),st(r),st(u,c)}}}function q$(t){let e,n,i,r,o,a,f,l,s,u,h;return n=new En({props:{pattern:t[19],width:t[0]/2,height:t[18]/2}}),r=new En({props:{pattern:t[20],width:t[0]/2,height:t[18]/2}}),u=new En({props:{pattern:t[1],width:t[0],height:t[18]}}),{c(){e=k("div"),ct(n.$$.fragment),i=O(),ct(r.$$.fragment),o=O(),a=k("div"),a.textContent="Example for early",f=O(),l=k("div"),l.textContent="Example for late",s=O(),ct(u.$$.fragment),B(e,"class","vis-example svelte-11tlnfp")},m(c,d){Z(c,e,d),lt(n,e,null),b(e,i),lt(r,e,null),b(e,o),b(e,a),b(e,f),b(e,l),Z(c,s,d),lt(u,c,d),h=!0},p(c,d){const p={};d[0]&1&&(p.width=c[0]/2),d[0]&262144&&(p.height=c[18]/2),n.$set(p);const m={};d[0]&1&&(m.width=c[0]/2),d[0]&262144&&(m.height=c[18]/2),r.$set(m);const g={};d[0]&2&&(g.pattern=c[1]),d[0]&1&&(g.width=c[0]),d[0]&262144&&(g.height=c[18]),u.$set(g)},i(c){h||(K(n.$$.fragment,c),K(r.$$.fragment,c),K(u.$$.fragment,c),h=!0)},o(c){tt(n.$$.fragment,c),tt(r.$$.fragment,c),tt(u.$$.fragment,c),h=!1},d(c){c&&(j(e),j(s)),st(n),st(r),st(u,c)}}}function Y$(t){let e,n,i,r,o,a,f,l,s,u,h;return n=new Cn({props:{pattern:t[19],width:t[0]/2,height:t[18]/2}}),r=new Cn({props:{pattern:t[20],width:t[0]/2,height:t[18]/2}}),u=new Cn({props:{pattern:t[1],width:t[0],height:t[18]}}),{c(){e=k("div"),ct(n.$$.fragment),i=O(),ct(r.$$.fragment),o=O(),a=k("div"),a.textContent="Example for early",f=O(),l=k("div"),l.textContent="Example for late",s=O(),ct(u.$$.fragment),B(e,"class","vis-example svelte-11tlnfp")},m(c,d){Z(c,e,d),lt(n,e,null),b(e,i),lt(r,e,null),b(e,o),b(e,a),b(e,f),b(e,l),Z(c,s,d),lt(u,c,d),h=!0},p(c,d){const p={};d[0]&1&&(p.width=c[0]/2),d[0]&262144&&(p.height=c[18]/2),n.$set(p);const m={};d[0]&1&&(m.width=c[0]/2),d[0]&262144&&(m.height=c[18]/2),r.$set(m);const g={};d[0]&2&&(g.pattern=c[1]),d[0]&1&&(g.width=c[0]),d[0]&262144&&(g.height=c[18]),u.$set(g)},i(c){h||(K(n.$$.fragment,c),K(r.$$.fragment,c),K(u.$$.fragment,c),h=!0)},o(c){tt(n.$$.fragment,c),tt(r.$$.fragment,c),tt(u.$$.fragment,c),h=!1},d(c){c&&(j(e),j(s)),st(n),st(r),st(u,c)}}}function H$(t){let e,n,i,r,o,a,f,l,s,u,h;return n=new Nn({props:{pattern:t[19],audioFile:t[2],width:t[0]/2,height:t[18]/2}}),r=new Nn({props:{pattern:t[20],audioFile:t[2],width:t[0]/2,height:t[18]/2}}),u=new Nn({props:{pattern:t[1],audioFile:t[2],width:t[0],height:t[18]}}),{c(){e=k("div"),ct(n.$$.fragment),i=O(),ct(r.$$.fragment),o=O(),a=k("div"),a.textContent="Example for early",f=O(),l=k("div"),l.textContent="Example for late",s=O(),ct(u.$$.fragment),B(e,"class","vis-example svelte-11tlnfp")},m(c,d){Z(c,e,d),lt(n,e,null),b(e,i),lt(r,e,null),b(e,o),b(e,a),b(e,f),b(e,l),Z(c,s,d),lt(u,c,d),h=!0},p(c,d){const p={};d[0]&4&&(p.audioFile=c[2]),d[0]&1&&(p.width=c[0]/2),d[0]&262144&&(p.height=c[18]/2),n.$set(p);const m={};d[0]&4&&(m.audioFile=c[2]),d[0]&1&&(m.width=c[0]/2),d[0]&262144&&(m.height=c[18]/2),r.$set(m);const g={};d[0]&2&&(g.pattern=c[1]),d[0]&4&&(g.audioFile=c[2]),d[0]&1&&(g.width=c[0]),d[0]&262144&&(g.height=c[18]),u.$set(g)},i(c){h||(K(n.$$.fragment,c),K(r.$$.fragment,c),K(u.$$.fragment,c),h=!0)},o(c){tt(n.$$.fragment,c),tt(r.$$.fragment,c),tt(u.$$.fragment,c),h=!1},d(c){c&&(j(e),j(s)),st(n),st(r),st(u,c)}}}function md(t){let e,n,i,r,o,a;return{c(){e=k("div"),n=k("label"),i=at(`Do you have any final feedback/comments?
        `),r=k("textarea")},m(f,l){Z(f,e,l),b(e,n),b(n,i),b(n,r),et(r,t[12]),o||(a=dt(r,"input",t[33]),o=!0)},p(f,l){l[0]&4096&&et(r,f[12])},d(f){f&&j(e),o=!1,a()}}}function gd(t){let e,n,i;return{c(){e=k("div"),e.textContent="Thanks for participating!",n=O(),i=k("a"),i.textContent="click here to get your compensation",B(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){Z(r,e,o),Z(r,n,o),Z(r,i,o)},d(r){r&&(j(e),j(n),j(i))}}}function bd(t){let e,n,i;return{c(){e=k("button"),e.textContent="next step",B(e,"class","next-btn svelte-11tlnfp")},m(r,o){Z(r,e,o),n||(i=dt(e,"click",t[21]),n=!0)},p:$t,d(r){r&&j(e),n=!1,i()}}}function W$(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p=t[4]==="start"&&cd(t),m=t[4]==="demo"&&hd(t),g=t[4]==="tests"&&dd(t),w=t[4]==="feedback"&&md(t),y=t[4]==="done"&&gd(),x=!t[15]&&t[4]!=="done"&&bd(t);return{c(){e=k("main"),n=k("h2"),n.textContent="Study (Prolific)",i=O(),p&&p.c(),r=O(),m&&m.c(),o=O(),g&&g.c(),a=O(),w&&w.c(),f=O(),y&&y.c(),l=O(),x&&x.c(),s=O(),u=k("button"),u.textContent="asdasdsa",B(e,"class","svelte-11tlnfp")},m(_,$){Z(_,e,$),b(e,n),b(e,i),p&&p.m(e,null),b(e,r),m&&m.m(e,null),b(e,o),g&&g.m(e,null),b(e,a),w&&w.m(e,null),b(e,f),y&&y.m(e,null),b(e,l),x&&x.m(e,null),b(e,s),b(e,u),h=!0,c||(d=dt(u,"click",t[22]),c=!0)},p(_,$){_[4]==="start"?p?p.p(_,$):(p=cd(_),p.c(),p.m(e,r)):p&&(p.d(1),p=null),_[4]==="demo"?m?m.p(_,$):(m=hd(_),m.c(),m.m(e,o)):m&&(m.d(1),m=null),_[4]==="tests"?g?(g.p(_,$),$[0]&16&&K(g,1)):(g=dd(_),g.c(),K(g,1),g.m(e,a)):g&&(Jt(),tt(g,1,1,()=>{g=null}),te()),_[4]==="feedback"?w?w.p(_,$):(w=md(_),w.c(),w.m(e,f)):w&&(w.d(1),w=null),_[4]==="done"?y||(y=gd(),y.c(),y.m(e,l)):y&&(y.d(1),y=null),!_[15]&&_[4]!=="done"?x?x.p(_,$):(x=bd(_),x.c(),x.m(e,s)):x&&(x.d(1),x=null)},i(_){h||(K(g),h=!0)},o(_){tt(g),h=!1},d(_){_&&j(e),p&&p.d(),m&&m.d(),g&&g.d(),w&&w.d(),y&&y.d(),x&&x.d(),c=!1,d()}}}const V$="http://193.196.55.123:8080/store";let _d=.5;const ml=20;let G$=6,X$=!0,j$=0;function Z$(t,e,n){let i,r,o=Xo(window,"PROLIFIC_PID"),a=Xo(window,"STUDY_ID"),f=Xo(window,"SESSION_ID");console.log({partID:o,studyID:a,sessionID:f});const l=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let s=l[0],u=[{stimulus:"audio",audioFile:l[0]},{stimulus:"waveform",audioFile:l[0]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}];const h=[0,.5,1,1.4,1.9,2.4],c=[0,.5,1,1.6,2.1,2.6];let d="start",p=0,m,g="",w="",y="",x="",_=0,$=0,M="",v=0,S,C={},L=[],T,I,D=!1,H=!1,E=!1,R="tick",N=ml,V=3,W=600,G=[],A=[],Y=0;const X=[];Da(()=>{document.querySelector("html").addEventListener("keyup",Q)});const nt=()=>{I=new kt({ratio:{firstVal:ml,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,ml],direction:-1,reversalLimit:5,verbosity:1}}),I.init()};function J(){d==="start"?(n(3,u=ds(u)),n(4,d="demo")):d==="demo"?g==""||w==""||y==""||x==""?alert("please fill the form first"):(n(4,d="tests"),n(5,p=0)):d==="tests"?(ht(),p<u.length?(n(17,R=u[p].stimulus),n(2,s=u[p].audioFile),rt()):n(4,d="feedback")):d==="feedback"&&(ht(),n(4,d="done"))}function rt(){nt(),n(13,v=0),S=0,T=0,n(14,D=!0),A=[],L=[],m=new Date,q()}function q(){console.log("Starting trial "+v),C={},n(15,H=!0),z()}function z(){let Bt=Math.round(I.getLast("ratio"));Bt=Math.random()<.5?Bt:-Bt,C.deviation=Bt,n(23,N=Bt),console.log("generated pattern",G),n(16,E=!0),window.setTimeout(()=>{n(16,E=!1)},1e3)}function F(ee){if(!H)return;n(15,H=!1),C.decisionChoice=ee,C.errorCode=0;const Bt=T;(C.decisionChoice==0&&C.deviation<0||C.decisionChoice==1&&C.deviation>0)&&C.errorCode==0&&T++,C.errorCode==0&&(I.next(Bt!=T),L[L.length]=C),C.errorCode==0&&S++,n(13,v++,v),I.reversalLimitReached("ratio")?U():q()}function U(){n(14,D=!1),P(),A=[],Y=I.getFinalVal("ratio");for(let Bt=0;Bt<L.length;Bt++)A[Bt]=L[Bt].deviation;console.log(A);const ee=new Date;X.push({encoding:R,audioFile:s,final:Y,data:A,score:T,testNumber:p,trialCount:v+1,trials:L,validTrialCount:S+1,testTimeSeconds:(ee-m)/1e3}),n(5,p++,p)}function Q(ee){switch(ee.key){case"ArrowLeft":H&&F(0);break;case"ArrowRight":H&&F(1);break;case"PageDown":!H&&d!=="done"&&J()}}function P(){`${T}`,v+1,`${(T/(v+1)*100).toFixed(1)}${I.getFinalVal("ratio")}`}function ht(){const ee={studyStep:d,demographics:{partID:o,studyID:a,sessionID:f,partAge:g,partGender:w,partEduation:y,partMusicInstr:x,partMusicInstrYears:_,partVisExperienceYears:$,partFeedback:M,visWidth:W},date:new Date().toISOString(),tests:X};console.log("saving data",ee);const Bt=JSON.stringify(ee,void 0,2);fetch(V$,{method:"POST",headers:{"Content-Type":"application/json"},body:Bt}).then(Cf=>{console.log("Data saved:",Cf)})}const ot=()=>n(0,W*=1.05),pt=()=>n(0,W*=.95);function ft(){g=Dn(this),n(6,g)}function ut(){w=this.value,n(7,w)}function Ot(){y=Dn(this),n(8,y)}function me(){x=this.value,n(9,x)}function mi(){_=fe(this.value),n(10,_)}function gi(){$=fe(this.value),n(11,$)}function Ut(){M=this.value,n(12,M)}return t.$$.update=()=>{t.$$.dirty[0]&8388608&&n(24,i=N/100*_d),t.$$.dirty[0]&1&&n(18,r=W/6),t.$$.dirty[0]&16777218&&(n(1,G=Ii(G$,_d,V,i,X$,j$)),console.log("generated pattern",G))},[W,G,s,u,d,p,g,w,y,x,_,$,M,v,D,H,E,R,r,h,c,J,ht,N,i,ot,pt,ft,ut,Ot,me,mi,gi,Ut]}class K$ extends Xt{constructor(e){super(),Gt(this,e,Z$,W$,Vt,{},null,[-1,-1])}}function Q$(t){let e,n;return e=new K$({}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function J$(t){let e,n;return e=new I$({}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function tM(t){let e,n;return e=new $$({}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function eM(t){let e,n;return e=new D$({}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function nM(t){let e,n;return e=new c$({}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function iM(t){let e,n;return e=new O$({}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function rM(t){let e,n;return e=new Qx({}),{c(){ct(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(K(e.$$.fragment,i),n=!0)},o(i){tt(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function oM(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,y,x,_,$,M,v;const S=[rM,iM,nM,eM,tM,J$,Q$],C=[];function L(T,I){return T[0]==="playground"?0:T[0]==="examples"?1:T[0]==="study"?2:T[0]==="analysis"?3:T[0]==="study_variance"?4:T[0]==="analysis_variance"?5:T[0]==="study_prolific"?6:-1}return~(x=L(t))&&(_=C[x]=S[x](t)),{c(){e=k("main"),n=k("h1"),n.textContent="Rhythm Error Sensitivity Study",i=O(),r=k("div"),o=k("button"),o.textContent="Playground",a=O(),f=k("button"),f.textContent="Examples",l=O(),s=k("button"),s.textContent="Study",u=O(),h=k("button"),h.textContent="Analysis",c=O(),d=k("button"),d.textContent="Study (variance)",p=O(),m=k("button"),m.textContent="Analysis (variance)",g=O(),w=k("button"),w.textContent="Study (Prolific)",y=O(),_&&_.c()},m(T,I){Z(T,e,I),b(e,n),b(e,i),b(e,r),b(r,o),b(r,a),b(r,f),b(r,l),b(r,s),b(r,u),b(r,h),b(r,c),b(r,d),b(r,p),b(r,m),b(r,g),b(r,w),b(e,y),~x&&C[x].m(e,null),$=!0,M||(v=[dt(o,"click",t[1]),dt(f,"click",t[2]),dt(s,"click",t[3]),dt(h,"click",t[4]),dt(d,"click",t[5]),dt(m,"click",t[6]),dt(w,"click",t[7])],M=!0)},p(T,[I]){let D=x;x=L(T),x!==D&&(_&&(Jt(),tt(C[D],1,1,()=>{C[D]=null}),te()),~x?(_=C[x],_||(_=C[x]=S[x](T),_.c()),K(_,1),_.m(e,null)):_=null)},i(T){$||(K(_),$=!0)},o(T){tt(_),$=!1},d(T){T&&j(e),~x&&C[x].d(),M=!1,ke(v)}}}function aM(t,e,n){let i=Xo(window,"p")??"study_prolific";return[i,()=>n(0,i="playground"),()=>n(0,i="examples"),()=>n(0,i="study"),()=>n(0,i="analysis"),()=>n(0,i="study_variance"),()=>n(0,i="analysis_variance"),()=>n(0,i="study_prolific")]}class fM extends Xt{constructor(e){super(),Gt(this,e,aM,oM,Vt,{})}}new fM({target:document.getElementById("app")});export{Md as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-80X4-PF7.js","assets/utilities-Hwv_Urkd.js","assets/index-TlZAmOeR.js","assets/index-N31zRiPy.js","assets/index-0IqLv6Dx.js","assets/index-wuL82X2L.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
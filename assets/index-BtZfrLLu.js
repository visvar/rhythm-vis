var Qi=Object.defineProperty;var Zi=(n,e,t)=>e in n?Qi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var It=(n,e,t)=>(Zi(n,typeof e!="symbol"?e+"":e,t),t),Zn=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var N=(n,e,t)=>(Zn(n,e,"read from private field"),t?t.call(n):e.get(n)),U=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},J=(n,e,t,r)=>(Zn(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);var er=(n,e,t,r)=>({set _(i){J(n,e,i,t)},get _(){return N(n,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function ne(){}function jr(n){return n()}function tr(){return Object.create(null)}function We(n){n.forEach(jr)}function zr(n){return typeof n=="function"}function Yr(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function ea(n){return Object.keys(n).length===0}function y(n,e){n.appendChild(e)}function te(n,e,t){n.insertBefore(e,t||null)}function X(n){n.parentNode&&n.parentNode.removeChild(n)}function yn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function A(n){return document.createElement(n)}function H(n){return document.createTextNode(n)}function L(){return H(" ")}function Wr(){return H("")}function k(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function P(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Le(n){return n===""?null:+n}function ta(n){return Array.from(n.childNodes)}function na(n,e){e=""+e,n.data!==e&&(n.data=e)}function le(n,e){n.value=e??""}function De(n,e,t,r){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function Tt(n,e,t){for(let r=0;r<n.options.length;r+=1){const i=n.options[r];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function nr(n){const e=n.querySelector(":checked");return e&&e.__value}function rr(n,e){return new n(e)}let ft;function lt(n){ft=n}function Xr(){if(!ft)throw new Error("Function called outside component initialization");return ft}function ra(n){Xr().$$.on_mount.push(n)}function ia(n){Xr().$$.on_destroy.push(n)}const ke=[],Mn=[];let Fe=[];const ir=[],aa=Promise.resolve();let En=!1;function sa(){En||(En=!0,aa.then(Kr))}function ht(n){Fe.push(n)}const ln=new Set;let Oe=0;function Kr(){if(Oe!==0)return;const n=ft;do{try{for(;Oe<ke.length;){const e=ke[Oe];Oe++,lt(e),oa(e.$$)}}catch(e){throw ke.length=0,Oe=0,e}for(lt(null),ke.length=0,Oe=0;Mn.length;)Mn.pop()();for(let e=0;e<Fe.length;e+=1){const t=Fe[e];ln.has(t)||(ln.add(t),t())}Fe.length=0}while(ke.length);for(;ir.length;)ir.pop()();En=!1,ln.clear(),lt(n)}function oa(n){if(n.fragment!==null){n.update(),We(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(ht)}}function la(n){const e=[],t=[];Fe.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Fe=e}const kt=new Set;let Se;function Fn(){Se={r:0,c:[],p:Se}}function $n(){Se.r||We(Se.c),Se=Se.p}function we(n,e){n&&n.i&&(kt.delete(n),n.i(e))}function je(n,e,t,r){if(n&&n.o){if(kt.has(n))return;kt.add(n),Se.c.push(()=>{kt.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function ut(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function ar(n){n&&n.c()}function wn(n,e,t){const{fragment:r,after_update:i}=n.$$;r&&r.m(e,t),ht(()=>{const a=n.$$.on_mount.map(jr).filter(zr);n.$$.on_destroy?n.$$.on_destroy.push(...a):We(a),n.$$.on_mount=[]}),i.forEach(ht)}function vn(n,e){const t=n.$$;t.fragment!==null&&(la(t.after_update),We(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ua(n,e){n.$$.dirty[0]===-1&&(ke.push(n),sa(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Jr(n,e,t,r,i,a,s=null,o=[-1]){const l=ft;lt(n);const u=n.$$={fragment:null,ctx:[],props:a,update:ne,not_equal:i,bound:tr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:tr(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=t?t(n,e.props||{},(h,f,...d)=>{const E=d.length?d[0]:f;return u.ctx&&i(u.ctx[h],u.ctx[h]=E)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](E),c&&ua(n,h)),f}):[],u.update(),c=!0,We(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const h=ta(e.target);u.fragment&&u.fragment.l(h),h.forEach(X)}else u.fragment&&u.fragment.c();e.intro&&we(n.$$.fragment),wn(n,e.target,e.anchor),Kr()}lt(l)}class Qr{constructor(){It(this,"$$");It(this,"$$set")}$destroy(){vn(this,1),this.$destroy=ne}$on(e,t){if(!zr(t))return ne;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ea(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ca="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ca);class ee{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,t,r={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==ee.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof t!="function")throw new TypeError("The callback must be a function.");const i=new sr(e,this,t,r);return this.eventMap[e]||(this.eventMap[e]=[]),r.prepend?this.eventMap[e].unshift(i):this.eventMap[e].push(i),i}addOneTimeListener(e,t,r={}){r.remaining=1,this.addListener(e,t,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return e===void 0?this.eventMap[ee.ANY_EVENT]&&this.eventMap[ee.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[e]&&this.eventMap[e].length>0?t instanceof sr?this.eventMap[e].filter(i=>i===t).length>0:typeof t=="function"?this.eventMap[e].filter(i=>i.callback===t).length>0:t==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(t=>{t.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],i=this.eventMap[ee.ANY_EVENT]||[];return this.eventMap[e]&&(i=i.concat(this.eventMap[e])),i.forEach(a=>{if(a.suspended)return;let s=[...t];Array.isArray(a.arguments)&&(s=s.concat(a.arguments)),a.remaining>0&&(r.push(a.callback.apply(a.context,s)),a.count++),--a.remaining<1&&a.remove()}),r}removeListener(e,t,r={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let i=this.eventMap[e].filter(a=>t&&a.callback!==t||r.remaining&&r.remaining!==a.remaining||r.context&&r.context!==a.context);i.length?this.eventMap[e]=i:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((r,i)=>{let a,s=this.addListener(e,()=>{clearTimeout(a),r()},{remaining:1});t.duration!==1/0&&(a=setTimeout(()=>{s.remove(),i("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class sr{constructor(e,t,r,i={}){if(typeof e!="string"&&!(e instanceof String)&&e!==ee.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");i.arguments!==void 0&&!Array.isArray(i.arguments)&&(i.arguments=[i.arguments]),i=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},i),i.duration!==1/0&&setTimeout(()=>this.remove(),i.duration),this.arguments=i.arguments,this.callback=r,this.context=i.context,this.count=0,this.event=e,this.remaining=parseInt(i.remaining)>=1?parseInt(i.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class m{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),m.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),m.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),m.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),m.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Ge{constructor(e,t={}){this.duration=b.defaults.note.duration,this.attack=b.defaults.note.attack,this.release=b.defaults.note.release,t.duration!=null&&(this.duration=t.duration),t.attack!=null&&(this.attack=t.attack),t.rawAttack!=null&&(this.attack=p.from7bitToFloat(t.rawAttack)),t.release!=null&&(this.release=t.release),t.rawRelease!=null&&(this.release=p.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=p.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const t=p.getNoteDetails(e);if(b.validation&&!e)throw new Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if(b.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(b.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(b.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(b.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(b.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(b.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return p.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=p.from7bitToFloat(e)}get rawRelease(){return p.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=p.from7bitToFloat(e)}get number(){return p.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return b.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+e*12+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class p{static toNoteNumber(e,t=0){if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const r=this.getNoteDetails(e);if(!r)throw new TypeError("Invalid note identifier");const i={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let a=(r.octave+1+t)*12;if(a+=i[r.name],r.accidental&&(r.accidental.startsWith("b")?a-=r.accidental.length:a+=r.accidental.length),a<0||a>127)throw new RangeError("Invalid octaveOffset value");return a}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw new TypeError("Invalid note identifier");const r=t[1].toUpperCase(),i=parseInt(t[3]);let a=t[2].toLowerCase();return a=a===""?void 0:a,{accidental:a,identifier:r+(a||"")+i,name:r,octave:i}}static sanitizeChannels(e){let t;if(b.validation){if(e==="all")t=["all"];else if(e==="none")return[]}return Array.isArray(e)?t=e:t=[e],t.indexOf("all")>-1&&(t=m.MIDI_CHANNEL_NUMBERS),t.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(e){let t=!1;const r=parseFloat(e);return isNaN(r)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?r>=0&&(t=b.time+r):r>=0&&(t=r),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let r=!1;if(Number.isInteger(e)&&e>=0&&e<=127)r=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)r=parseInt(e);else if(typeof e=="string"||e instanceof String)try{r=this.toNoteNumber(e.trim(),t)}catch{return!1}return r}static toNoteIdentifier(e,t){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(t=t==null?0:parseInt(t),isNaN(t))throw new RangeError("Invalid octaveOffset value");const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=Math.floor(e/12-1)+t;return r[e%12]+i.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof Ge)return e;let r=this.guessNoteNumber(e,t.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new Ge(r,t)}static buildNoteArray(e,t={}){let r=[];return Array.isArray(e)||(e=[e]),e.forEach(i=>{r.push(this.buildNote(i,t))}),r}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,t=0){b.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));const r=((e<<7)+t)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(e){b.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const t=Math.round(e*16383);return{msb:t>>7,lsb:t&127}}static offsetNumber(e,t=0,r=0){if(b.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");t=parseInt(t)||0,r=parseInt(r)||0}return Math.min(Math.max(e+t*12+r,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(r=>e[r]===t)}static getCcNameByNumber(e){if(!(b.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return m.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let t=m.CONTROL_CHANGE_MESSAGES.find(r=>r.name===e);return t?t.number:m.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in m.CHANNEL_MODE_MESSAGES)if(m.CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===m.CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class fa extends ee{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,r={}){if(b.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(t)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(t=p.fromFloatTo7Bit(t));const i=b.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),p.buildNoteArray(e).forEach(a=>{this.send([(m.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),a.getOffsetNumber(i),t],{time:p.toTimestamp(r.time)})}),this}sendControlChange(e,t,r={}){if(typeof e=="string"&&(e=p.getCcNumberByName(e)),Array.isArray(t)||(t=[t]),b.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(t=t.map(i=>{const a=Math.min(Math.max(parseInt(i),0),127);if(isNaN(a))throw new TypeError("Values must be integers between 0 and 127");return a}),t.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((i,a)=>{this.send([(m.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+a*32,t[a]],{time:p.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2?this:(this.sendControlChange(38,e[1],t),this)}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=m.REGISTERED_PARAMETERS[e]),b.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(m.REGISTERED_PARAMETERS).forEach(i=>{m.REGISTERED_PARAMETERS[i][0]===e[0]&&m.REGISTERED_PARAMETERS[i][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=m.REGISTERED_PARAMETERS[e]),b.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(m.REGISTERED_PARAMETERS).forEach(i=>{m.REGISTERED_PARAMETERS[i][0]===e[0]&&m.REGISTERED_PARAMETERS[i][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){this.sendNoteOn(e,t);const r=Array.isArray(e)?e:[e];for(let i of r)if(parseInt(i.duration)>0){const a={time:(p.toTimestamp(t.time)||b.time)+parseInt(i.duration),release:i.release,rawRelease:i.rawRelease};this.sendNoteOff(i,a)}else if(parseInt(t.duration)>0){const a={time:(p.toTimestamp(t.time)||b.time)+parseInt(t.duration),release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(i,a)}return this}sendNoteOff(e,t={}){if(b.validation){if(t.rawRelease!=null&&!(t.rawRelease>=0&&t.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(t.release!=null&&!(t.release>=0&&t.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;t.rawRelease!=null?r=t.rawRelease:isNaN(t.release)||(r=Math.round(t.release*127));const i=b.octaveOffset+this.output.octaveOffset+this.octaveOffset;return p.buildNoteArray(e,{rawRelease:parseInt(r)}).forEach(a=>{this.send([(m.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),a.getOffsetNumber(i),a.rawRelease],{time:p.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if(b.validation){if(t.rawAttack!=null&&!(t.rawAttack>=0&&t.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(t.attack!=null&&!(t.attack>=0&&t.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;t.rawAttack!=null?r=t.rawAttack:isNaN(t.attack)||(r=Math.round(t.attack*127));const i=b.octaveOffset+this.output.octaveOffset+this.octaveOffset;return p.buildNoteArray(e,{rawAttack:r}).forEach(a=>{this.send([(m.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),a.getOffsetNumber(i),a.rawAttack],{time:p.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,r={}){if(typeof e=="string"&&(e=m.CHANNEL_MODE_MESSAGES[e]),b.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(m.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:p.toTimestamp(r.time)}),this}sendOmniMode(e,t={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if(b.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return t.rawValue||(e=p.fromFloatTo7Bit(e)),this.send([(m.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:p.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,b.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(e)+64,i=e-Math.floor(e);i=Math.round((i+1)/2*16383);let a=i>>7&127,s=i&127;return this.sendRpnValue("channelcoarsetuning",r,t),this.sendRpnValue("channelfinetuning",[a,s],t),this}sendModulationRange(e,t,r={}){if(b.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(t!=null&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],r),this}sendNrpnValue(e,t,r={}){if(t=[].concat(t),b.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,r),this._setCurrentParameter(t,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(e,t={}){if(b.validation)if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let r=0,i=0;if(t.rawValue&&Array.isArray(e))r=e[0],i=e[1];else if(t.rawValue&&!Array.isArray(e))r=e;else{const a=p.fromFloatToMsbLsb((e+1)/2);r=a.msb,i=a.lsb}return this.send([(m.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),i,r],{time:p.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,r={}){if(b.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],r),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,b.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(m.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:p.toTimestamp(t.time)}),this}sendRpnValue(e,t,r={}){if(Array.isArray(e)||(e=m.REGISTERED_PARAMETERS[e]),b.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,r),this._setCurrentParameter(t,r),this._deselectRegisteredParameter(r),this}sendTuningBank(e,t={}){if(b.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if(b.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return e==="mono"?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class _n extends ee{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new fa(this,t);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:b.time};e.port.connection==="open"?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,t={time:0},r=0){if(e instanceof Zr&&(e=p.isNode?e.data:e.rawData),e instanceof Uint8Array&&p.isNode&&(e=Array.from(e)),b.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(r)?{time:0}:{time:r}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(i=>{if(i=parseInt(i),!(i>=0&&i<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,p.toTimestamp(t.time)),this}sendSysex(e,t=[],r={}){if(e=[].concat(e),t instanceof Uint8Array){const i=new Uint8Array(1+e.length+t.length+1);i[0]=m.SYSTEM_MESSAGES.sysex,i.set(Uint8Array.from(e),1),i.set(t,1+e.length),i[i.length-1]=m.SYSTEM_MESSAGES.sysexend,this.send(i,{time:r.time})}else{const i=e.concat(t,m.SYSTEM_MESSAGES.sysexend);this.send([m.SYSTEM_MESSAGES.sysex].concat(i),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():b.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if(b.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([m.SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){e=Math.floor(e)||0;var r=e>>7&127,i=e&127;return this.send([m.SYSTEM_MESSAGES.songposition,r,i],{time:t.time}),this}sendSongSelect(e=0,t={}){if(b.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([m.SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([m.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([m.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([m.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([m.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([m.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([m.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([m.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return b.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendKeyAftertouch(e,t,r)}),this}sendControlChange(e,t,r={},i={}){if(b.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const a=r;r=i,r.channels=a,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendControlChange(e,t,r)}),this}sendPitchBendRange(e=0,t=0,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendPitchBendRange(e,t,r)}),this}setPitchBendRange(e=0,t=0,r="all",i={}){return b.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,i)}sendRpnValue(e,t,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendRpnValue(e,t,r)}),this}setRegisteredParameter(e,t=[],r="all",i={}){return b.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,i)}sendChannelAftertouch(e,t={},r={}){if(b.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const i=t;t=r,t.channels=i,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},r={}){if(b.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const i=t;t=r,t.channels=i,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},r={}){if(b.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const i=t;t=r,t.channels=i,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendProgramChange(e,t)}),this}sendModulationRange(e,t,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendModulationRange(e,t,r)}),this}setModulationRange(e=0,t=0,r="all",i={}){return b.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,i)}sendMasterTuning(e,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},r={}){return b.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,r)}sendTuningProgram(e,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",r={}){return b.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,r)}sendTuningBank(e=0,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",r={}){return b.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,r)}sendChannelMode(e,t=0,r={},i={}){if(b.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const a=r;r=i,r.channels=a,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendChannelMode(e,t,r)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if(b.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const r=e;e=t,e.channels=r,e.channels==="all"&&(e.channels=m.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},r={}){if(b.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const i=t;t=r,t.channels=i,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},r={}){if(b.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const i=t;t=r,t.channels=i,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},r={}){if(b.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const i=t;t=r,t.channels=i,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,r={}){return r.channels==null&&(r.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendNrpnValue(e,t,r)}),this}setNonRegisteredParameter(e,t=[],r="all",i={}){return b.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,i)}sendRpnIncrement(e,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",r={}){return b.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,r)}sendRpnDecrement(e,t={}){return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",r={}){return b.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=t,r.channels==="all"&&(r.channels=m.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,r)}sendNoteOff(e,t={},r={}){if(b.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const i=t;t=r,t.channels=i,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},r={}){if(b.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||t==="all")){const i=t;t=r,t.channels=i,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].playNote(e,t)}),this}sendNoteOn(e,t={},r={}){if(b.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const i=t;t=r,t.channels=i,t.channels==="all"&&(t.channels=m.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class or{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(m.SYSTEM_MESSAGES),...Object.keys(m.CHANNEL_MESSAGES)],this.channels=m.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),b.validation&&(e.forEach(r=>{if(!(r instanceof _n))throw new TypeError("Destinations must be of type 'Output'.")}),t.types!==void 0&&t.types.forEach(r=>{if(!m.SYSTEM_MESSAGES.hasOwnProperty(r)&&!m.CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),t.channels!==void 0&&t.channels.forEach(r=>{if(!m.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{b.validation&&!(t instanceof _n)||t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class ha extends ee{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmessage";const r=e.message.dataBytes[0],i=e.message.dataBytes[1];if(t.type==="noteoff"||t.type==="noteon"&&i===0)this.notesState[r]=!1,t.type="noteoff",t.note=new Ge(p.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+b.octaveOffset),{rawAttack:0,rawRelease:i}),t.value=p.from7bitToFloat(i),t.rawValue=i,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if(t.type==="noteon")this.notesState[r]=!0,t.note=new Ge(p.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+b.octaveOffset),{rawAttack:i}),t.value=p.from7bitToFloat(i),t.rawValue=i,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if(t.type==="keyaftertouch")t.note=new Ge(p.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+b.octaveOffset)),t.value=p.from7bitToFloat(i),t.rawValue=i,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=r;else if(t.type==="controlchange"){t.controller={number:r,name:m.CONTROL_CHANGE_MESSAGES[r].name,description:m.CONTROL_CHANGE_MESSAGES[r].description,position:m.CONTROL_CHANGE_MESSAGES[r].position},t.subtype=t.controller.name||"controller"+r,t.value=p.from7bitToFloat(i),t.rawValue=i;const a=Object.assign({},t);a.type=`${t.type}-controller${r}`,delete a.subtype,this.emit(a.type,a);const s=Object.assign({},t);s.type=`${t.type}-`+m.CONTROL_CHANGE_MESSAGES[r].name,delete s.subtype,s.type.indexOf("controller")!==0&&this.emit(s.type,s),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else t.type==="programchange"?(t.value=r,t.rawValue=t.value):t.type==="channelaftertouch"?(t.value=p.from7bitToFloat(r),t.rawValue=r):t.type==="pitchbend"?(t.value=((i<<7)+r-8192)/8192,t.rawValue=(i<<7)+r):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){const t=Object.assign({},e);t.type=t.controller.name,t.type==="localcontrol"&&(t.value=t.message.data[2]===127,t.rawValue=t.message.data[2]),t.type==="omnimodeon"?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="omnimodeoff"&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),t.type==="monomodeon"?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):t.type==="polymodeon"&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){const t=e.message.dataBytes[0],r=e.message.dataBytes[1];t===99||t===101?(this._nrpnBuffer=[],this._rpnBuffer=[],t===99?this._nrpnBuffer=[e.message]:r!==127&&(this._rpnBuffer=[e.message])):t===98||t===100?t===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(t===6||t===38||t===96||t===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,t,r,i){e=e==="nrpn"?"nrpn":"rpn";const a={target:i.target,timestamp:i.timestamp,message:i.message,parameterMsb:t,parameterLsb:r,value:p.from7bitToFloat(i.message.dataBytes[1]),rawValue:i.message.dataBytes[1]};e==="rpn"?a.parameter=Object.keys(m.REGISTERED_PARAMETERS).find(l=>m.REGISTERED_PARAMETERS[l][0]===t&&m.REGISTERED_PARAMETERS[l][1]===r):a.parameter=(t<<7)+r;const s=m.CONTROL_CHANGE_MESSAGES[i.message.dataBytes[0]].name;a.type=`${e}-${s}`,this.emit(a.type,a);const o=Object.assign({},a);o.type==="nrpn-dataincrement"?o.type="nrpn-databuttonincrement":o.type==="nrpn-datadecrement"?o.type="nrpn-databuttondecrement":o.type==="rpn-dataincrement"?o.type="rpn-databuttonincrement":o.type==="rpn-datadecrement"&&(o.type="rpn-databuttondecrement"),this.emit(o.type,o),a.type=e,a.subtype=s,this.emit(a.type,a)}getChannelModeByNumber(e){return b.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),p.getChannelModeByNumber(e)}getCcNameByNumber(e){if(b.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return p.getCcNameByNumber(e)}getNoteState(e){e instanceof Ge&&(e=e.identifier);const t=p.guessNoteNumber(e,b.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Zr{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=p.getPropertyByValue(m.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=p.getPropertyByValue(m.SYSTEM_MESSAGES,this.command)),this.statusByte===m.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class ma extends ee{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let t=1;t<=16;t++)this.channels[t]=new ha(this,t);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:b.time,target:this,port:this};e.port.connection==="open"?(t.type="opened",this.emit("opened",t)):e.port.connection==="closed"&&e.port.state==="connected"?(t.type="closed",this.emit("closed",t)):e.port.connection==="closed"&&e.port.state==="disconnected"?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const t=new Zr(e.data),r={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",r),t.isSystemMessage?this._parseEvent(r):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(r),this._forwarders.forEach(i=>i.forward(t))}_parseEvent(e){const t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage",t.type==="songselect"&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){b.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,r={}){if(b.validation&&typeof r=="function"){let i=t!=null?[].concat(t):void 0;t=r,r={channels:i}}if(m.CHANNEL_EVENTS.includes(e)){r.channels===void 0&&(r.channels=m.MIDI_CHANNEL_NUMBERS);let i=[];return p.sanitizeChannels(r.channels).forEach(a=>{i.push(this.channels[a].addListener(e,t,r))}),i}else return super.addListener(e,t,r)}addOneTimeListener(e,t,r={}){return r.remaining=1,this.addListener(e,t,r)}on(e,t,r,i){return this.addListener(e,t,r,i)}hasListener(e,t,r={}){if(b.validation&&typeof r=="function"){let i=[].concat(t);t=r,r={channels:i}}return m.CHANNEL_EVENTS.includes(e)?(r.channels===void 0&&(r.channels=m.MIDI_CHANNEL_NUMBERS),p.sanitizeChannels(r.channels).every(i=>this.channels[i].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,r={}){if(b.validation&&typeof r=="function"){let i=[].concat(t);t=r,r={channels:i}}if(r.channels===void 0&&(r.channels=m.MIDI_CHANNEL_NUMBERS),e==null)return p.sanitizeChannels(r.channels).forEach(i=>{this.channels[i]&&this.channels[i].removeListener()}),super.removeListener();m.CHANNEL_EVENTS.includes(e)?p.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].removeListener(e,t,r)}):super.removeListener(e,t,r)}addForwarder(e,t={}){let r;return e instanceof or?r=e:r=new or(e,t),this._forwarders.push(r),r}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return b.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class da extends ee{constructor(){super(),this.defaults={note:{attack:p.from7bitToFloat(64),release:p.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},t=!1){if(p.isNode){try{window.navigator}catch{let o=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,o)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:t}),t&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const r={timestamp:this.time,target:this,type:"error",error:void 0},i={timestamp:this.time,target:this,type:"midiaccessgranted"},a={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(s){return r.error=s,this.emit("error",r),typeof e.callback=="function"&&e.callback(s),Promise.reject(s)}this.emit("midiaccessgranted",i),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(s){return r.error=s,this.emit("error",r),typeof e.callback=="function"&&e.callback(s),Promise.reject(s)}return this.emit("enabled",a),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(this._disconnectedInputs[r].id===e.toString())return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(this.inputs[r].id===e.toString())return this.inputs[r]}getInputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(~this._disconnectedInputs[r].name.indexOf(e))return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(~this.inputs[r].name.indexOf(e))return this.inputs[r]}getOutputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(~this._disconnectedOutputs[r].name.indexOf(e))return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(~this.outputs[r].name.indexOf(e))return this.outputs[r]}getOutputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(this._disconnectedOutputs[r].id===e.toString())return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(this.outputs[r].id===e.toString())return this.outputs[r]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),p.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?p.getNoteDetails(p.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),p.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),p.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),p.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,t={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),p.buildNoteArray(e,t)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),p.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(t=>e.push(t.destroy())),this.outputs.forEach(t=>e.push(t.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let t={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?t.port=this.getOutputById(e.port.id):e.port.type==="input"&&(t.port=this.getInputById(e.port.id)),this.emit(e.port.state,t);const r=Object.assign({},t);r.type="portschanged",this.emit(r.type,r)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?t.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(t.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,t);const r=Object.assign({},t);r.type="portschanged",this.emit(r.type,r)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let t=this._inputs.length-1;t>=0;t--){const r=this._inputs[t];Array.from(this.interface.inputs.values()).find(a=>a===r._midiInput)||(this._disconnectedInputs.push(r),this._inputs.splice(t,1))}let e=[];return this.interface.inputs.forEach(t=>{if(!this._inputs.find(r=>r._midiInput===t)){let r=this._disconnectedInputs.find(i=>i._midiInput===t);r||(r=new ma(t)),this._inputs.push(r),e.push(r.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let t=this._outputs.length-1;t>=0;t--){const r=this._outputs[t];Array.from(this.interface.outputs.values()).find(a=>a===r._midiOutput)||(this._disconnectedOutputs.push(r),this._outputs.splice(t,1))}let e=[];return this.interface.outputs.forEach(t=>{if(!this._outputs.find(r=>r._midiOutput===t)){let r=this._disconnectedOutputs.find(i=>i._midiOutput===t);r||(r=new _n(t)),this._outputs.push(r),e.push(r.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),p.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),p.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.9"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),m.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),m.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),m.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),m.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),m.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const b=new da;b.constructor=null;const ei=new Map,ti=new Map,ba=new Map,pa=new Map;function ga(n){return ei.get(n)}function ni(n){return ti.get(n)}const ya=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],Ma=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],Ea=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const n of ya)ei.set(n.pitch,n),ti.set(n.label,n);for(const n of Ma)ba.set(n.number,n);for(const n of Ea){const e=`${n.number}-${n.subnumber}`;pa.set(e,n)}var wa={value:()=>{}};function ri(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Gt(t)}function Gt(n){this._=n}function va(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Gt.prototype=ri.prototype={constructor:Gt,on:function(n,e){var t=this._,r=va(n+"",t),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(n=r[a]).type)&&(i=_a(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(n=r[a]).type)t[i]=lr(t[i],n.name,e);else if(e==null)for(i in t)t[i]=lr(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Gt(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,a;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=this._[n],r=0,i=a.length;r<i;++r)a[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,a=r.length;i<a;++i)r[i].value.apply(e,t)}};function _a(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function lr(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=wa,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Pn="http://www.w3.org/1999/xhtml";const ur={svg:"http://www.w3.org/2000/svg",xhtml:Pn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tn(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),ur.hasOwnProperty(e)?{space:ur[e],local:n}:n}function Pa(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Pn&&e.documentElement.namespaceURI===Pn?e.createElement(n):e.createElementNS(t,n)}}function Aa(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function ii(n){var e=tn(n);return(e.local?Aa:Pa)(e)}function Sa(){}function Un(n){return n==null?Sa:function(){return this.querySelector(n)}}function Na(n){typeof n!="function"&&(n=Un(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var a=e[i],s=a.length,o=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=a[c])&&(u=n.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),o[c]=u);return new K(r,this._parents)}function ai(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function xa(){return[]}function si(n){return n==null?xa:function(){return this.querySelectorAll(n)}}function Ca(n){return function(){var e=n.apply(this,arguments);return e==null?[]:ai(e)}}function Ia(n){typeof n=="function"?n=Ca(n):n=si(n);for(var e=this._groups,t=e.length,r=[],i=[],a=0;a<t;++a)for(var s=e[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&(r.push(n.call(l,l.__data__,u,s)),i.push(l));return new K(r,i)}function oi(n){return function(){return this.matches(n)}}function li(n){return function(e){return e.matches(n)}}var Ta=Array.prototype.find;function Ra(n){return function(){return Ta.call(this.children,n)}}function Ba(){return this.firstElementChild}function Da(n){return this.select(n==null?Ba:Ra(typeof n=="function"?n:li(n)))}var Oa=Array.prototype.filter;function ka(){return this.children}function Ga(n){return function(){return Oa.call(this.children,n)}}function La(n){return this.selectAll(n==null?ka:Ga(typeof n=="function"?n:li(n)))}function Fa(n){typeof n!="function"&&(n=oi(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&n.call(l,l.__data__,u,a)&&o.push(l);return new K(r,this._parents)}function ui(n){return new Array(n.length)}function $a(){return new K(this._enter||this._groups.map(ui),this._parents)}function qt(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}qt.prototype={constructor:qt,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Ua(n){return function(){return n}}function Ha(n,e,t,r,i,a){for(var s=0,o,l=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):t[s]=new qt(n,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function qa(n,e,t,r,i,a,s){var o,l,u=new Map,c=e.length,h=a.length,f=new Array(c),d;for(o=0;o<c;++o)(l=e[o])&&(f[o]=d=s.call(l,l.__data__,o,e)+"",u.has(d)?i[o]=l:u.set(d,l));for(o=0;o<h;++o)d=s.call(n,a[o],o,a)+"",(l=u.get(d))?(r[o]=l,l.__data__=a[o],u.delete(d)):t[o]=new qt(n,a[o]);for(o=0;o<c;++o)(l=e[o])&&u.get(f[o])===l&&(i[o]=l)}function Va(n){return n.__data__}function ja(n,e){if(!arguments.length)return Array.from(this,Va);var t=e?qa:Ha,r=this._parents,i=this._groups;typeof n!="function"&&(n=Ua(n));for(var a=i.length,s=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],h=i[u],f=h.length,d=ai(n.call(c,c&&c.__data__,u,r)),E=d.length,v=o[u]=new Array(E),C=s[u]=new Array(E),B=l[u]=new Array(f);t(c,h,v,C,B,d,e);for(var D=0,x=0,V,O;D<E;++D)if(V=v[D]){for(D>=x&&(x=D+1);!(O=C[x])&&++x<E;);V._next=O||null}}return s=new K(s,r),s._enter=o,s._exit=l,s}function za(){return new K(this._exit||this._groups.map(ui),this._parents)}function Ya(n,e,t){var r=this.enter(),i=this,a=this.exit();return r=typeof n=="function"?n(r):r.append(n+""),e!=null&&(i=e(i)),t==null?a.remove():t(a),r&&i?r.merge(i).order():i}function Wa(n){if(!(n instanceof K))throw new Error("invalid merge");for(var e=this._groups,t=n._groups,r=e.length,i=t.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l=e[o],u=t[o],c=l.length,h=s[o]=new Array(c),f,d=0;d<c;++d)(f=l[d]||u[d])&&(h[d]=f);for(;o<r;++o)s[o]=e[o];return new K(s,this._parents)}function Xa(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Ka(n){n||(n=Ja);function e(h,f){return h&&f?n(h.__data__,f.__data__):!h-!f}for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a){for(var s=t[a],o=s.length,l=i[a]=new Array(o),u,c=0;c<o;++c)(u=s[c])&&(l[c]=u);l.sort(e)}return new K(i,this._parents).order()}function Ja(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function Qa(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function Za(){return Array.from(this)}function es(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function ts(){let n=0;for(const e of this)++n;return n}function ns(){return!this.node()}function rs(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],a=0,s=i.length,o;a<s;++a)(o=i[a])&&n.call(o,o.__data__,a,i);return this}function is(n){return function(){this.removeAttribute(n)}}function as(n){return function(){this.removeAttributeNS(n.space,n.local)}}function ss(n,e){return function(){this.setAttribute(n,e)}}function os(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function ls(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function us(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function cs(n,e){var t=tn(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?as:is:typeof e=="function"?t.local?us:ls:t.local?os:ss)(t,e))}function ci(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function fs(n){return function(){this.style.removeProperty(n)}}function hs(n,e,t){return function(){this.style.setProperty(n,e,t)}}function ms(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function ds(n,e,t){return arguments.length>1?this.each((e==null?fs:typeof e=="function"?ms:hs)(n,e,t??"")):ze(this.node(),n)}function ze(n,e){return n.style.getPropertyValue(e)||ci(n).getComputedStyle(n,null).getPropertyValue(e)}function bs(n){return function(){delete this[n]}}function ps(n,e){return function(){this[n]=e}}function gs(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function ys(n,e){return arguments.length>1?this.each((e==null?bs:typeof e=="function"?gs:ps)(n,e)):this.node()[n]}function fi(n){return n.trim().split(/^|\s+/)}function Hn(n){return n.classList||new hi(n)}function hi(n){this._node=n,this._names=fi(n.getAttribute("class")||"")}hi.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function mi(n,e){for(var t=Hn(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function di(n,e){for(var t=Hn(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function Ms(n){return function(){mi(this,n)}}function Es(n){return function(){di(this,n)}}function ws(n,e){return function(){(e.apply(this,arguments)?mi:di)(this,n)}}function vs(n,e){var t=fi(n+"");if(arguments.length<2){for(var r=Hn(this.node()),i=-1,a=t.length;++i<a;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?ws:e?Ms:Es)(t,e))}function _s(){this.textContent=""}function Ps(n){return function(){this.textContent=n}}function As(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function Ss(n){return arguments.length?this.each(n==null?_s:(typeof n=="function"?As:Ps)(n)):this.node().textContent}function Ns(){this.innerHTML=""}function xs(n){return function(){this.innerHTML=n}}function Cs(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function Is(n){return arguments.length?this.each(n==null?Ns:(typeof n=="function"?Cs:xs)(n)):this.node().innerHTML}function Ts(){this.nextSibling&&this.parentNode.appendChild(this)}function Rs(){return this.each(Ts)}function Bs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ds(){return this.each(Bs)}function Os(n){var e=typeof n=="function"?n:ii(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ks(){return null}function Gs(n,e){var t=typeof n=="function"?n:ii(n),r=e==null?ks:typeof e=="function"?e:Un(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function Ls(){var n=this.parentNode;n&&n.removeChild(this)}function Fs(){return this.each(Ls)}function $s(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Us(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function Hs(n){return this.select(n?Us:$s)}function qs(n){return arguments.length?this.property("__data__",n):this.node().__data__}function Vs(n){return function(e){n.call(this,e,this.__data__)}}function js(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function zs(n){return function(){var e=this.__on;if(e){for(var t=0,r=-1,i=e.length,a;t<i;++t)a=e[t],(!n.type||a.type===n.type)&&a.name===n.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Ys(n,e,t){return function(){var r=this.__on,i,a=Vs(e);if(r){for(var s=0,o=r.length;s<o;++s)if((i=r[s]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=t),i.value=e;return}}this.addEventListener(n.type,a,t),i={type:n.type,name:n.name,value:e,listener:a,options:t},r?r.push(i):this.__on=[i]}}function Ws(n,e,t){var r=js(n+""),i,a=r.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,c;l<u;++l)for(i=0,c=o[l];i<a;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(o=e?Ys:zs,i=0;i<a;++i)this.each(o(r[i],e,t));return this}function bi(n,e,t){var r=ci(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function Xs(n,e){return function(){return bi(this,n,e)}}function Ks(n,e){return function(){return bi(this,n,e.apply(this,arguments))}}function Js(n,e){return this.each((typeof e=="function"?Ks:Xs)(n,e))}function*Qs(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var Zs=[null];function K(n,e){this._groups=n,this._parents=e}function Pt(){return new K([[document.documentElement]],Zs)}function eo(){return this}K.prototype=Pt.prototype={constructor:K,select:Na,selectAll:Ia,selectChild:Da,selectChildren:La,filter:Fa,data:ja,enter:$a,exit:za,join:Ya,merge:Wa,selection:eo,order:Xa,sort:Ka,call:Qa,nodes:Za,node:es,size:ts,empty:ns,each:rs,attr:cs,style:ds,property:ys,classed:vs,text:Ss,html:Is,raise:Rs,lower:Ds,append:Os,insert:Gs,remove:Fs,clone:Hs,datum:qs,on:Ws,dispatch:Js,[Symbol.iterator]:Qs};function qn(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function pi(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function At(){}var mt=.7,Vt=1/mt,$e="\\s*([+-]?\\d+)\\s*",dt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",to=/^#([0-9a-f]{3,8})$/,no=new RegExp("^rgb\\("+[$e,$e,$e]+"\\)$"),ro=new RegExp("^rgb\\("+[ce,ce,ce]+"\\)$"),io=new RegExp("^rgba\\("+[$e,$e,$e,dt]+"\\)$"),ao=new RegExp("^rgba\\("+[ce,ce,ce,dt]+"\\)$"),so=new RegExp("^hsl\\("+[dt,ce,ce]+"\\)$"),oo=new RegExp("^hsla\\("+[dt,ce,ce,dt]+"\\)$"),cr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qn(At,bt,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:fr,formatHex:fr,formatHsl:lo,formatRgb:hr,toString:hr});function fr(){return this.rgb().formatHex()}function lo(){return gi(this).formatHsl()}function hr(){return this.rgb().formatRgb()}function bt(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=to.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?mr(e):t===3?new q(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Rt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Rt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=no.exec(n))?new q(e[1],e[2],e[3],1):(e=ro.exec(n))?new q(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=io.exec(n))?Rt(e[1],e[2],e[3],e[4]):(e=ao.exec(n))?Rt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=so.exec(n))?pr(e[1],e[2]/100,e[3]/100,1):(e=oo.exec(n))?pr(e[1],e[2]/100,e[3]/100,e[4]):cr.hasOwnProperty(n)?mr(cr[n]):n==="transparent"?new q(NaN,NaN,NaN,0):null}function mr(n){return new q(n>>16&255,n>>8&255,n&255,1)}function Rt(n,e,t,r){return r<=0&&(n=e=t=NaN),new q(n,e,t,r)}function uo(n){return n instanceof At||(n=bt(n)),n?(n=n.rgb(),new q(n.r,n.g,n.b,n.opacity)):new q}function An(n,e,t,r){return arguments.length===1?uo(n):new q(n,e,t,r??1)}function q(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}qn(q,An,pi(At,{brighter:function(n){return n=n==null?Vt:Math.pow(Vt,n),new q(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=n==null?mt:Math.pow(mt,n),new q(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dr,formatHex:dr,formatRgb:br,toString:br}));function dr(){return"#"+un(this.r)+un(this.g)+un(this.b)}function br(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(n===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(n===1?")":", "+n+")")}function un(n){return n=Math.max(0,Math.min(255,Math.round(n)||0)),(n<16?"0":"")+n.toString(16)}function pr(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new ue(n,e,t,r)}function gi(n){if(n instanceof ue)return new ue(n.h,n.s,n.l,n.opacity);if(n instanceof At||(n=bt(n)),!n)return new ue;if(n instanceof ue)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new ue(s,o,l,n.opacity)}function yi(n,e,t,r){return arguments.length===1?gi(n):new ue(n,e,t,r??1)}function ue(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}qn(ue,yi,pi(At,{brighter:function(n){return n=n==null?Vt:Math.pow(Vt,n),new ue(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=n==null?mt:Math.pow(mt,n),new ue(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new q(cn(n>=240?n-240:n+120,i,r),cn(n,i,r),cn(n<120?n+240:n-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(n===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(n===1?")":", "+n+")")}}));function cn(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Mi=n=>()=>n;function co(n,e){return function(t){return n+t*e}}function fo(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function ho(n){return(n=+n)==1?Ei:function(e,t){return t-e?fo(e,t,n):Mi(isNaN(e)?t:e)}}function Ei(n,e){var t=e-n;return t?co(n,t):Mi(isNaN(n)?e:n)}const Sn=function n(e){var t=ho(e);function r(i,a){var s=t((i=An(i)).r,(a=An(a)).r),o=t(i.g,a.g),l=t(i.b,a.b),u=Ei(i.opacity,a.opacity);return function(c){return i.r=s(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=n,r}(1);function Ee(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var Nn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fn=new RegExp(Nn.source,"g");function mo(n){return function(){return n}}function bo(n){return function(e){return n(e)+""}}function po(n,e){var t=Nn.lastIndex=fn.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(n=n+"",e=e+"";(r=Nn.exec(n))&&(i=fn.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:Ee(r,i)})),t=fn.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?bo(l[0].x):mo(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)o[(h=l[c]).i]=h.x(u);return o.join("")})}var gr=180/Math.PI,xn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wi(n,e,t,r,i,a){var s,o,l;return(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s),(l=n*t+e*r)&&(t-=n*l,r-=e*l),(o=Math.sqrt(t*t+r*r))&&(t/=o,r/=o,l/=o),n*r<e*t&&(n=-n,e=-e,l=-l,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,n)*gr,skewX:Math.atan(l)*gr,scaleX:s,scaleY:o}}var Bt;function go(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?xn:wi(e.a,e.b,e.c,e.d,e.e,e.f)}function yo(n){return n==null||(Bt||(Bt=document.createElementNS("http://www.w3.org/2000/svg","g")),Bt.setAttribute("transform",n),!(n=Bt.transform.baseVal.consolidate()))?xn:(n=n.matrix,wi(n.a,n.b,n.c,n.d,n.e,n.f))}function vi(n,e,t,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,h,f,d,E){if(u!==h||c!==f){var v=d.push("translate(",null,e,null,t);E.push({i:v-4,x:Ee(u,h)},{i:v-2,x:Ee(c,f)})}else(h||f)&&d.push("translate("+h+e+f+t)}function s(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Ee(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function o(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Ee(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function l(u,c,h,f,d,E){if(u!==h||c!==f){var v=d.push(i(d)+"scale(",null,",",null,")");E.push({i:v-4,x:Ee(u,h)},{i:v-2,x:Ee(c,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=n(u),c=n(c),a(u.translateX,u.translateY,c.translateX,c.translateY,h,f),s(u.rotate,c.rotate,h,f),o(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var E=-1,v=f.length,C;++E<v;)h[(C=f[E]).i]=C.x(d);return h.join("")}}}var Mo=vi(go,"px, ","px)","deg)"),Eo=vi(yo,", ",")",")"),Ye=0,rt=0,tt=0,_i=1e3,jt,it,zt=0,Ie=0,nn=0,pt=typeof performance=="object"&&performance.now?performance:Date,Pi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Vn(){return Ie||(Pi(wo),Ie=pt.now()+nn)}function wo(){Ie=0}function Yt(){this._call=this._time=this._next=null}Yt.prototype=Ai.prototype={constructor:Yt,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Vn():+t)+(e==null?0:+e),!this._next&&it!==this&&(it?it._next=this:jt=this,it=this),this._call=n,this._time=t,Cn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cn())}};function Ai(n,e,t){var r=new Yt;return r.restart(n,e,t),r}function vo(){Vn(),++Ye;for(var n=jt,e;n;)(e=Ie-n._time)>=0&&n._call.call(null,e),n=n._next;--Ye}function yr(){Ie=(zt=pt.now())+nn,Ye=rt=0;try{vo()}finally{Ye=0,Po(),Ie=0}}function _o(){var n=pt.now(),e=n-zt;e>_i&&(nn-=e,zt=n)}function Po(){for(var n,e=jt,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:jt=t);it=n,Cn(r)}function Cn(n){if(!Ye){rt&&(rt=clearTimeout(rt));var e=n-Ie;e>24?(n<1/0&&(rt=setTimeout(yr,n-pt.now()-nn)),tt&&(tt=clearInterval(tt))):(tt||(zt=pt.now(),tt=setInterval(_o,_i)),Ye=1,Pi(yr))}}function Mr(n,e,t){var r=new Yt;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var Ao=ri("start","end","cancel","interrupt"),So=[],Si=0,Er=1,In=2,Lt=3,wr=4,Tn=5,Ft=6;function rn(n,e,t,r,i,a){var s=n.__transition;if(!s)n.__transition={};else if(t in s)return;No(n,t,{name:e,index:r,group:i,on:Ao,tween:So,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Si})}function jn(n,e){var t=re(n,e);if(t.state>Si)throw new Error("too late; already scheduled");return t}function he(n,e){var t=re(n,e);if(t.state>Lt)throw new Error("too late; already running");return t}function re(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function No(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=Ai(a,0,t.time);function a(u){t.state=Er,t.timer.restart(s,t.delay,t.time),t.delay<=u&&s(u-t.delay)}function s(u){var c,h,f,d;if(t.state!==Er)return l();for(c in r)if(d=r[c],d.name===t.name){if(d.state===Lt)return Mr(s);d.state===wr?(d.state=Ft,d.timer.stop(),d.on.call("interrupt",n,n.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Ft,d.timer.stop(),d.on.call("cancel",n,n.__data__,d.index,d.group),delete r[c])}if(Mr(function(){t.state===Lt&&(t.state=wr,t.timer.restart(o,t.delay,t.time),o(u))}),t.state=In,t.on.call("start",n,n.__data__,t.index,t.group),t.state===In){for(t.state=Lt,i=new Array(f=t.tween.length),c=0,h=-1;c<f;++c)(d=t.tween[c].value.call(n,n.__data__,t.index,t.group))&&(i[++h]=d);i.length=h+1}}function o(u){for(var c=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(l),t.state=Tn,1),h=-1,f=i.length;++h<f;)i[h].call(n,c);t.state===Tn&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=Ft,t.timer.stop(),delete r[e];for(var u in r)return;delete n.__transition}}function xo(n,e){var t=n.__transition,r,i,a=!0,s;if(t){e=e==null?null:e+"";for(s in t){if((r=t[s]).name!==e){a=!1;continue}i=r.state>In&&r.state<Tn,r.state=Ft,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[s]}a&&delete n.__transition}}function Co(n){return this.each(function(){xo(this,n)})}function Io(n,e){var t,r;return function(){var i=he(this,n),a=i.tween;if(a!==t){r=t=a;for(var s=0,o=r.length;s<o;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function To(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var a=he(this,n),s=a.tween;if(s!==r){i=(r=s).slice();for(var o={name:e,value:t},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=o;break}l===u&&i.push(o)}a.tween=i}}function Ro(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=re(this.node(),t).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===n)return s.value;return null}return this.each((e==null?Io:To)(t,n,e))}function zn(n,e,t){var r=n._id;return n.each(function(){var i=he(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return re(i,r).value[e]}}function Ni(n,e){var t;return(typeof e=="number"?Ee:e instanceof bt?Sn:(t=bt(e))?(e=t,Sn):po)(n,e)}function Bo(n){return function(){this.removeAttribute(n)}}function Do(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Oo(n,e,t){var r,i=t+"",a;return function(){var s=this.getAttribute(n);return s===i?null:s===r?a:a=e(r=s,t)}}function ko(n,e,t){var r,i=t+"",a;return function(){var s=this.getAttributeNS(n.space,n.local);return s===i?null:s===r?a:a=e(r=s,t)}}function Go(n,e,t){var r,i,a;return function(){var s,o=t(this),l;return o==null?void this.removeAttribute(n):(s=this.getAttribute(n),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function Lo(n,e,t){var r,i,a;return function(){var s,o=t(this),l;return o==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),l=o+"",s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o)))}}function Fo(n,e){var t=tn(n),r=t==="transform"?Eo:Ni;return this.attrTween(n,typeof e=="function"?(t.local?Lo:Go)(t,r,zn(this,"attr."+n,e)):e==null?(t.local?Do:Bo)(t):(t.local?ko:Oo)(t,r,e))}function $o(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function Uo(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function Ho(n,e){var t,r;function i(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&Uo(n,a)),t}return i._value=e,i}function qo(n,e){var t,r;function i(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&$o(n,a)),t}return i._value=e,i}function Vo(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=tn(n);return this.tween(t,(r.local?Ho:qo)(r,e))}function jo(n,e){return function(){jn(this,n).delay=+e.apply(this,arguments)}}function zo(n,e){return e=+e,function(){jn(this,n).delay=e}}function Yo(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?jo:zo)(e,n)):re(this.node(),e).delay}function Wo(n,e){return function(){he(this,n).duration=+e.apply(this,arguments)}}function Xo(n,e){return e=+e,function(){he(this,n).duration=e}}function Ko(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?Wo:Xo)(e,n)):re(this.node(),e).duration}function Jo(n,e){if(typeof e!="function")throw new Error;return function(){he(this,n).ease=e}}function Qo(n){var e=this._id;return arguments.length?this.each(Jo(e,n)):re(this.node(),e).ease}function Zo(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;he(this,n).ease=t}}function el(n){if(typeof n!="function")throw new Error;return this.each(Zo(this._id,n))}function tl(n){typeof n!="function"&&(n=oi(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var a=e[i],s=a.length,o=r[i]=[],l,u=0;u<s;++u)(l=a[u])&&n.call(l,l.__data__,u,a)&&o.push(l);return new be(r,this._parents,this._name,this._id)}function nl(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,a=Math.min(r,i),s=new Array(r),o=0;o<a;++o)for(var l=e[o],u=t[o],c=l.length,h=s[o]=new Array(c),f,d=0;d<c;++d)(f=l[d]||u[d])&&(h[d]=f);for(;o<r;++o)s[o]=e[o];return new be(s,this._parents,this._name,this._id)}function rl(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function il(n,e,t){var r,i,a=rl(e)?jn:he;return function(){var s=a(this,n),o=s.on;o!==r&&(i=(r=o).copy()).on(e,t),s.on=i}}function al(n,e){var t=this._id;return arguments.length<2?re(this.node(),t).on.on(n):this.each(il(t,n,e))}function sl(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function ol(){return this.on("end.remove",sl(this._id))}function ll(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Un(n));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var o=r[s],l=o.length,u=a[s]=new Array(l),c,h,f=0;f<l;++f)(c=o[f])&&(h=n.call(c,c.__data__,f,o))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,rn(u[f],e,t,f,u,re(c,t)));return new be(a,this._parents,e,t)}function ul(n){var e=this._name,t=this._id;typeof n!="function"&&(n=si(n));for(var r=this._groups,i=r.length,a=[],s=[],o=0;o<i;++o)for(var l=r[o],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=n.call(c,c.__data__,h,l),d,E=re(c,t),v=0,C=f.length;v<C;++v)(d=f[v])&&rn(d,e,t,v,f,E);a.push(f),s.push(c)}return new be(a,s,e,t)}var cl=Pt.prototype.constructor;function fl(){return new cl(this._groups,this._parents)}function hl(n,e){var t,r,i;return function(){var a=ze(this,n),s=(this.style.removeProperty(n),ze(this,n));return a===s?null:a===t&&s===r?i:i=e(t=a,r=s)}}function xi(n){return function(){this.style.removeProperty(n)}}function ml(n,e,t){var r,i=t+"",a;return function(){var s=ze(this,n);return s===i?null:s===r?a:a=e(r=s,t)}}function dl(n,e,t){var r,i,a;return function(){var s=ze(this,n),o=t(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(n),ze(this,n))),s===l?null:s===r&&l===i?a:(i=l,a=e(r=s,o))}}function bl(n,e){var t,r,i,a="style."+e,s="end."+a,o;return function(){var l=he(this,n),u=l.on,c=l.value[a]==null?o||(o=xi(e)):void 0;(u!==t||i!==c)&&(r=(t=u).copy()).on(s,i=c),l.on=r}}function pl(n,e,t){var r=(n+="")=="transform"?Mo:Ni;return e==null?this.styleTween(n,hl(n,r)).on("end.style."+n,xi(n)):typeof e=="function"?this.styleTween(n,dl(n,r,zn(this,"style."+n,e))).each(bl(this._id,n)):this.styleTween(n,ml(n,r,e),t).on("end.style."+n,null)}function gl(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function yl(n,e,t){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&gl(n,s,t)),r}return a._value=e,a}function Ml(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,yl(n,e,t??""))}function El(n){return function(){this.textContent=n}}function wl(n){return function(){var e=n(this);this.textContent=e??""}}function vl(n){return this.tween("text",typeof n=="function"?wl(zn(this,"text",n)):El(n==null?"":n+""))}function _l(n){return function(e){this.textContent=n.call(this,e)}}function Pl(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&_l(i)),e}return r._value=n,r}function Al(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,Pl(n))}function Sl(){for(var n=this._name,e=this._id,t=Ci(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)if(l=s[u]){var c=re(l,e);rn(l,n,t,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new be(r,this._parents,n,t)}function Nl(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--i===0&&a()}};t.each(function(){var u=he(this,r),c=u.on;c!==n&&(e=(n=c).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),i===0&&a()})}var xl=0;function be(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function Ci(){return++xl}var Ae=Pt.prototype;be.prototype={constructor:be,select:ll,selectAll:ul,filter:tl,merge:nl,selection:fl,transition:Sl,call:Ae.call,nodes:Ae.nodes,node:Ae.node,size:Ae.size,empty:Ae.empty,each:Ae.each,on:al,attr:Fo,attrTween:Vo,style:pl,styleTween:Ml,text:vl,textTween:Al,remove:ol,tween:Ro,delay:Yo,duration:Ko,ease:Qo,easeVarying:el,end:Nl,[Symbol.iterator]:Ae[Symbol.iterator]};function Cl(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Il={time:null,delay:0,duration:250,ease:Cl};function Tl(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function Rl(n){var e,t;n instanceof be?(e=n._id,n=n._name):(e=Ci(),(t=Il).time=Vn(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],o=s.length,l,u=0;u<o;++u)(l=s[u])&&rn(l,n,e,u,s,t||Tl(l,e));return new be(r,this._parents,n,e)}Pt.prototype.interrupt=Co;Pt.prototype.transition=Rl;function at(n,e,t){this.k=n,this.x=e,this.y=t}at.prototype={constructor:at,scale:function(n){return n===1?this:new at(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new at(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};at.prototype;var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dl={exports:{}};(function(n){(function(){const e=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let s,o="",l,u,c=0;for(;c<r.length;)s=i.indexOf(r.charAt(c++))<<18|i.indexOf(r.charAt(c++))<<12|(l=i.indexOf(r.charAt(c++)))<<6|(u=i.indexOf(r.charAt(c++))),o+=l===64?String.fromCharCode(s>>16&255):u===64?String.fromCharCode(s>>16&255,s>>8&255):String.fromCharCode(s>>16&255,s>>8&255,s&255);return o},t={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return t.Uint8(r);if(typeof r=="string")return t.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return t.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let s=new FileReader;s.readAsArrayBuffer(a.target.files[0]),s.onload=function(o){i(t.Uint8(new Uint8Array(o.target.result)))}})},Base64:function(r){r=String(r);let i=e(r),a=i.length,s=new Uint8Array(new ArrayBuffer(a));for(let o=0;o<a;o++)s[o]=i.charCodeAt(o);return t.Uint8(s)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(l){return this.pointer+=l,this.pointer},readInt:function(l){if(l=Math.min(l,this.data.byteLength-this.pointer),l<1)return-1;let u=0;if(l>1)for(let c=1;c<=l-1;c++)u+=this.data.getUint8(this.pointer)*Math.pow(256,l-c),this.pointer++;return u+=this.data.getUint8(this.pointer),this.pointer++,u},readStr:function(l){let u="";for(let c=1;c<=l;c++)u+=String.fromCharCode(this.readInt(1));return u},readIntVLV:function(){let l=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)l=this.readInt(1);else{let u=[];for(;this.data.getUint8(this.pointer)>=128;)u.push(this.readInt(1)-128);let c=this.readInt(1);for(let h=1;h<=u.length;h++)l+=u[u.length-h]*Math.pow(128,h);l+=c}return l}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let s=i.readInt(1),o=i.readInt(1);s>=128?(a.timeDivision=[],a.timeDivision[0]=s-128,a.timeDivision[1]=o):a.timeDivision=s*256+o;for(let l=1;l<=a.tracks;l++){a.track[l-1]={event:[]};let u=i.readInt(4);if(u===-1)break;if(u!==1297379947)return!1;i.readInt(4);let c=0,h=!1,f,d;for(;!h&&(c++,a.track[l-1].event[c-1]={},a.track[l-1].event[c-1].deltaTime=i.readIntVLV(),f=i.readInt(1),f!==-1);)if(f>=128?d=f:(f=d,i.movePointer(-1)),f===255){a.track[l-1].event[c-1].type=255,a.track[l-1].event[c-1].metaType=i.readInt(1);let E=i.readIntVLV();switch(a.track[l-1].event[c-1].metaType){case 47:case-1:h=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[l-1].event[c-1].data=i.readStr(E);break;case 33:case 89:case 81:a.track[l-1].event[c-1].data=i.readInt(E);break;case 84:a.track[l-1].event[c-1].data=[],a.track[l-1].event[c-1].data[0]=i.readInt(1),a.track[l-1].event[c-1].data[1]=i.readInt(1),a.track[l-1].event[c-1].data[2]=i.readInt(1),a.track[l-1].event[c-1].data[3]=i.readInt(1),a.track[l-1].event[c-1].data[4]=i.readInt(1);break;case 88:a.track[l-1].event[c-1].data=[],a.track[l-1].event[c-1].data[0]=i.readInt(1),a.track[l-1].event[c-1].data[1]=i.readInt(1),a.track[l-1].event[c-1].data[2]=i.readInt(1),a.track[l-1].event[c-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[l-1].event[c-1].data=this.customInterpreter(a.track[l-1].event[c-1].metaType,i,E)),(this.customInterpreter===null||a.track[l-1].event[c-1].data===!1)&&(i.readInt(E),a.track[l-1].event[c-1].data=i.readInt(E),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(f=f.toString(16).split(""),f[1]||f.unshift("0"),a.track[l-1].event[c-1].type=parseInt(f[0],16),a.track[l-1].event[c-1].channel=parseInt(f[1],16),a.track[l-1].event[c-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[l-1].event[c-1].data=this.customInterpreter(a.track[l-1].event[c-1].type,i,!1)),this.customInterpreter===null||a.track[l-1].event[c-1].data===!1){let E=i.readIntVLV();a.track[l-1].event[c-1].data=i.readInt(E),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[l-1].event[c-1].data=[],a.track[l-1].event[c-1].data[0]=i.readInt(1),a.track[l-1].event[c-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[l-1].event[c-1].data=i.readInt(1);break;case-1:h=!0;break;default:if(this.customInterpreter!==null&&(a.track[l-1].event[c-1].data=this.customInterpreter(a.track[l-1].event[c-1].metaType,i,!1)),this.customInterpreter===null||a.track[l-1].event[c-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};n.exports=t})()})(Dl);function Ol(n){return 1/(n/60)}const Ii=[],kl=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const n of kl)for(let e=0;e<4;e++){let t=n,r=n;for(let i=0;i<e;i++)r/=2,t+=r;Ii.push({type:n,dots:e,duration:t})}Ii.sort((n,e)=>n.duration-e.duration);function Gl(n,e,t,r){n.beginPath(),n.arc(e,t,r,0,2*Math.PI),n.stroke()}class w{constructor(e,t){this.name=e,this.notes=t,this.short=t.join(" "),this.pitches=t.map(r=>ni(r).pitch),this.stringCount=t.length}}new w("E stand.",["E2","A2","D3","G3","B3","E4"]),new w("Drop D",["D2","A2","D3","G3","B3","E4"]),new w("Drop C",["C2","G2","C3","F3","A3","D4"]),new w("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new w("1 down",["D2","G2","C3","F3","A3","D4"]),new w("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new w("2 down",["C2","F2","A#2","D#3","G3","C4"]),new w("DADGAG",["D2","A2","D3","G3","A3","D4"]),new w("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new w("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new w("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new w("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new w("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new w("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new w("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new w("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new w("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new w("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new w("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new w("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new w("E stand.",["E1","A1","D2","G2"]),new w("Drop D",["D1","A1","D2","G2"]),new w("1/2 down",["D#1","G#1","C#2","F#2"]),new w("1 down",["D1","G1","C2","F2"]),new w("1 1/2 down",["C#1","F#1","B1","E2"]),new w("2 down",["C1","F1","A#1","D#2"]),new w("B stand.",["B0","E1","A1","D2","G2"]),new w("Drop A",["A0","D1","A1","D2","G2"]),new w("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new w("1 down",["A0","D1","G1","C2","F2"]),new w("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new w("2 down",["G0","C1","F1","A#1","D#2"]),new w("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new w("Drop E",["E0","A0","D1","A1","D2","G2"]),new w("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new w("1 down",["E1","A0","D1","G1","C2","F2"]),new w("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new w("2 down",["D0","G0","C1","F1","A#1","D#2"]),new w("Hawaii",["G4","C4","E4","A4"]),new w("Low G",["G3","C4","E4","A4"]),new w("D-tuning",["A4","D4","F#4","B4"]),new w("Canadian",["A3","D4","F#4","B4"]),new w("Bariton",["D3","G3","B3","E4"]);function Ti(n){return n!==null&&typeof n=="object"&&"name"in n&&typeof n.name=="string"}function Ri(n){return n!==null&&typeof n=="object"&&"step"in n&&typeof n.step=="number"&&"alt"in n&&typeof n.alt=="number"&&!isNaN(n.step)&&!isNaN(n.alt)}var Bi=[0,2,4,-1,1,3,5],Di=Bi.map(n=>Math.floor(n*7/12));function Oi(n){const{step:e,alt:t,oct:r,dir:i=1}=n,a=Bi[e]+7*t;if(r===void 0)return[i*a];const s=r-Di[e]-4*t;return[i*a,i*s]}var Ll=[3,0,4,1,5,2,6];function Fl(n){const[e,t,r]=n,i=Ll[$l(e)],a=Math.floor((e+1)/7);if(t===void 0)return{step:i,alt:a,dir:r};const s=t+4*a+Di[i];return{step:i,alt:a,oct:s,dir:r}}function $l(n){const e=(n+1)%7;return e<0?7+e:e}var vr=(n,e)=>Array(Math.abs(e)+1).join(n),Rn=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),Ul="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",Hl="(AA|A|P|M|m|d|dd)([-+]?\\d+)",ql=new RegExp("^"+Ul+"|"+Hl+"$");function Vl(n){const e=ql.exec(`${n}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var _r={};function Wt(n){return typeof n=="string"?_r[n]||(_r[n]=jl(n)):Ri(n)?Wt(Yl(n)):Ti(n)?Wt(n.name):Rn}var Pr=[0,2,4,5,7,9,11],ki="PMMPPMM";function jl(n){const e=Vl(n);if(e[0]==="")return Rn;const t=+e[0],r=e[1],i=(Math.abs(t)-1)%7,a=ki[i];if(a==="M"&&r==="P")return Rn;const s=a==="M"?"majorable":"perfectable",o=""+t+r,l=t<0?-1:1,u=t===8||t===-8?t:l*(i+1),c=zl(s,r),h=Math.floor((Math.abs(t)-1)/7),f=l*(Pr[i]+c+12*h),d=(l*(Pr[i]+c)%12+12)%12,E=Oi({step:i,alt:c,oct:h,dir:l});return{empty:!1,name:o,num:t,q:r,step:i,alt:c,dir:l,type:s,simple:u,semitones:f,chroma:d,coord:E,oct:h}}function zl(n,e){return e==="M"&&n==="majorable"||e==="P"&&n==="perfectable"?0:e==="m"&&n==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(n==="perfectable"?e.length:e.length+1):0}function Yl(n){const{step:e,alt:t,oct:r=0,dir:i}=n;if(!i)return"";const a=e+1+7*r,s=a===0?e+1:a,o=i<0?"-":"",l=ki[e]==="M"?"majorable":"perfectable";return o+s+Wl(l,t)}function Wl(n,e){return e===0?n==="majorable"?"M":"P":e===-1&&n==="majorable"?"m":e>0?vr("A",e):vr("d",n==="perfectable"?e:e+1)}var Ar=(n,e)=>Array(Math.abs(e)+1).join(n),Gi=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Sr=new Map,Xl=n=>"CDEFGAB".charAt(n),Kl=n=>n<0?Ar("b",-n):Ar("#",n),Jl=n=>n[0]==="b"?-n.length:n.length;function gt(n){const e=JSON.stringify(n),t=Sr.get(e);if(t)return t;const r=typeof n=="string"?nu(n):Ri(n)?gt(ru(n)):Ti(n)?gt(n.name):Gi;return Sr.set(e,r),r}var Ql=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Zl(n){const e=Ql.exec(n);return e?[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]:["","","",""]}function eu(n){return gt(Fl(n))}var tu=(n,e)=>(n%e+e)%e,hn=[0,2,4,5,7,9,11];function nu(n){const e=Zl(n);if(e[0]===""||e[3]!=="")return Gi;const t=e[0],r=e[1],i=e[2],a=(t.charCodeAt(0)+3)%7,s=Jl(r),o=i.length?+i:void 0,l=Oi({step:a,alt:s,oct:o}),u=t+r+i,c=t+r,h=(hn[a]+s+120)%12,f=o===void 0?tu(hn[a]+s,12)-12*99:hn[a]+s+12*(o+1),d=f>=0&&f<=127?f:null,E=o===void 0?null:Math.pow(2,(f-69)/12)*440;return{empty:!1,acc:r,alt:s,chroma:h,coord:l,freq:E,height:f,letter:t,midi:d,name:u,oct:o,pc:c,step:a}}function ru(n){const{step:e,alt:t,oct:r}=n,i=Xl(e);if(!i)return"";const a=i+Kl(t);return r||r===0?a+r:a}function iu(n,e){const t=gt(n),r=Array.isArray(e)?e:Wt(e).coord;if(t.empty||!r||r.length<2)return"";const i=t.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return eu(a).name}function Li(n,e){const t=e.length,r=(n%t+t)%t;return e.slice(r,t).concat(e.slice(0,r))}var ve={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Fi=n=>Number(n).toString(2).padStart(12,"0"),Nr=n=>parseInt(n,2),au=/^[01]{12}$/;function $i(n){return au.test(n)}var su=n=>typeof n=="number"&&n>=0&&n<=4095,ou=n=>n&&$i(n.chroma),xr={[ve.chroma]:ve};function Yn(n){const e=$i(n)?n:su(n)?Fi(n):Array.isArray(n)?hu(n):ou(n)?n.chroma:ve.chroma;return xr[e]=xr[e]||fu(e)}var lu=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function uu(n){const e=[];for(let t=0;t<12;t++)n.charAt(t)==="1"&&e.push(lu[t]);return e}function cu(n){const e=n.split("");return e.map((t,r)=>Li(r,e).join(""))}function fu(n){const e=Nr(n),t=cu(n).map(Nr).filter(a=>a>=2048).sort()[0],r=Fi(t),i=uu(n);return{empty:!1,name:"",setNum:e,chroma:n,normalized:r,intervals:i}}function hu(n){if(n.length===0)return ve.chroma;let e;const t=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<n.length;r++)e=gt(n[r]),e.empty&&(e=Wt(n[r])),e.empty||(t[e.chroma]=1);return t.join("")}var mu=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],du=mu;({...ve});var Ui=[],$t={};function bu(n,e,t){const r=gu(n),i={...Yn(n),name:t||"",quality:r,intervals:n,aliases:e};Ui.push(i),i.name&&($t[i.name]=i),$t[i.setNum]=i,$t[i.chroma]=i,i.aliases.forEach(a=>pu(i,a))}function pu(n,e){$t[e]=n}function gu(n){const e=t=>n.indexOf(t)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}du.forEach(([n,e,t])=>bu(n.split(" "),t.split(" "),e));Ui.sort((n,e)=>n.setNum-e.setNum);var yu=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],Mu=yu;({...ve});var Hi=[],Ut={};function Eu(n,e,t){const r=vu(n),i={...Yn(n),name:t||"",quality:r,intervals:n,aliases:e};Hi.push(i),i.name&&(Ut[i.name]=i),Ut[i.setNum]=i,Ut[i.chroma]=i,i.aliases.forEach(a=>wu(i,a))}function wu(n,e){Ut[e]=n}function vu(n){const e=t=>n.indexOf(t)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}Mu.forEach(([n,e,t])=>Eu(n.split(" "),t.split(" "),e));Hi.sort((n,e)=>n.setNum-e.setNum);var _u=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],Pu=_u,Au={...ve,intervals:[],aliases:[]},ct={};function Su(n){return ct[n]||Au}function Nu(n,e,t=[]){const r={...Yn(n),name:e,intervals:n,aliases:t};return ct[r.name]=r,ct[r.setNum]=r,ct[r.chroma]=r,r.aliases.forEach(i=>xu(r,i)),r}function xu(n,e){ct[e]=n}Pu.forEach(([n,e,...t])=>Nu(n.split(" "),e,t));var Wn=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Cr={...ve,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Cu=Wn.map(Iu),Bn={};Cu.forEach(n=>{Bn[n.name]=n,n.aliases.forEach(e=>{Bn[e]=n})});function qi(n){return typeof n=="string"?Bn[n.toLowerCase()]||Cr:n&&n.name?qi(n.name):Cr}function Iu(n){const[e,t,r,i,a,s,o]=n,l=o?[o]:[],u=Number(t).toString(2);return{empty:!1,intervals:Su(i).intervals,modeNum:e,chroma:u,normalized:u,name:i,setNum:t,alt:r,triad:a,seventh:s,aliases:l}}function Vi(n){return(e,t)=>{const r=qi(e);if(r.empty)return[];const i=Li(r.modeNum,n),a=r.intervals.map(s=>iu(t,s));return i.map((s,o)=>a[o]+s)}}Vi(Wn.map(n=>n[4]));Vi(Wn.map(n=>n[5]));class Me{constructor(e,t){this.name=e,this.notes=t,this.short=t.join(" "),this.pitches=t.map(r=>ni(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=t.length}getNumbers(){const e=this.pitchesSorted,t=new Map;for(const[r,i]of e.entries()){let a=r+1,s="",o=i-12;for(;o>0&&t.has(o);)a=t.get(o).number,s+="",o-=12;t.set(i,{number:a,numberString:`${a}${s}`})}return[...t.values()].map(r=>r.numberString)}getLetters(){const e=this.pitchesSorted,t=new Map;for(const[r,i]of e.entries()){let a=r+1,s="",o=i-12;for(;o>0&&t.has(o);)a=t.get(o).number,s+="",o-=12;const l=ga(i).name;t.set(i,{number:a,letterString:`${l}${s}`})}return[...t.values()].map(r=>r.letterString)}}new Me("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Me("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Me("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Me("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Me("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Me("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Me("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Me("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function Tu(n,e=1){const t=yi(n);return t.s=e,t.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(n=>Tu(n,.5));const Ru=Sn("black","steelblue");Array.from({length:12}).map((n,e)=>Ru(e/11));var ji={exports:{}};(function(n,e){(function(t,r){r()})(nt,function(){function t(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,h){var f=new XMLHttpRequest;f.open("GET",u),f.responseType="blob",f.onload=function(){l(f.response,c,h)},f.onerror=function(){console.error("could not download file")},f.send()}function i(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof nt=="object"&&nt.global===nt?nt:void 0,o=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,c,h){var f=s.URL||s.webkitURL,d=document.createElement("a");c=c||u.name||"download",d.download=c,d.rel="noopener",typeof u=="string"?(d.href=u,d.origin===location.origin?a(d):i(d.href)?r(u,c,h):a(d,d.target="_blank")):(d.href=f.createObjectURL(u),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,h){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,h),c);else if(i(u))r(u,c,h);else{var f=document.createElement("a");f.href=u,f.target="_blank",setTimeout(function(){a(f)})}}:function(u,c,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,h);var d=u.type==="application/octet-stream",E=/constructor/i.test(s.HTMLElement)||s.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||d&&E||o)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var x=C.result;x=v?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=x:location=x,f=null},C.readAsDataURL(u)}else{var B=s.URL||s.webkitURL,D=B.createObjectURL(u);f?f.location=D:location.href=D,f=null,setTimeout(function(){B.revokeObjectURL(D)},4e4)}});s.saveAs=l.saveAs=l,n.exports=l})})(ji);var Bu=ji.exports;const Du=Bl(Bu);function Ht(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Ou(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function zi(n){let e,t,r;n.length!==2?(e=Ht,t=(o,l)=>Ht(n(o),l),r=(o,l)=>n(o)-l):(e=n===Ht||n===Ou?n:ku,t=n,r=n);function i(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;t(o[h],l)<0?u=h+1:c=h}while(u<c)}return u}function a(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;t(o[h],l)<=0?u=h+1:c=h}while(u<c)}return u}function s(o,l,u=0,c=o.length){const h=i(o,l,u,c-1);return h>u&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:i,center:s,right:a}}function ku(){return 0}function Gu(n){return n===null?NaN:+n}const Lu=zi(Ht),Fu=Lu.right;zi(Gu).center;function $u(n,e){let t=0;for(let r of n)r!=null&&(r=+r)>=r&&++t;return t}function mn(n,e){let t,r;if(e===void 0)for(const i of n)i!=null&&(t===void 0?i>=i&&(t=r=i):(t>i&&(t=i),r<i&&(r=i)));else{let i=-1;for(let a of n)(a=e(a,++i,n))!=null&&(t===void 0?a>=a&&(t=r=a):(t>a&&(t=a),r<a&&(r=a)))}return[t,r]}function Uu(n){return n}var Hu=Array.prototype,qu=Hu.slice;function dn(n){return()=>n}const Vu=Math.sqrt(50),ju=Math.sqrt(10),zu=Math.sqrt(2);function Xt(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Vu?10:a>=ju?5:a>=zu?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(n*u),l=Math.round(e*u),o/u<n&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(n/u),l=Math.round(e/u),o*u<n&&++o,l*u>e&&--l),l<o&&.5<=t&&t<2?Xt(n,e,t*2):[o,l,u]}function Yu(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,a,s]=r?Xt(e,n,t):Xt(n,e,t);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function Dn(n,e,t){return e=+e,n=+n,t=+t,Xt(n,e,t)[2]}function Wu(n,e,t){let r;for(;;){const i=Dn(n,e,t);if(i===r||i===0||!isFinite(i))return[n,e];i>0?(n=Math.floor(n/i)*i,e=Math.ceil(e/i)*i):i<0&&(n=Math.ceil(n*i)/i,e=Math.floor(e*i)/i),r=i}}function Xu(n){return Math.max(1,Math.ceil(Math.log($u(n))/Math.LN2)+1)}function Ku(){var n=Uu,e=mn,t=Xu;function r(i){Array.isArray(i)||(i=Array.from(i));var a,s=i.length,o,l,u=new Array(s);for(a=0;a<s;++a)u[a]=n(i[a],a,i);var c=e(u),h=c[0],f=c[1],d=t(u,h,f);if(!Array.isArray(d)){const x=f,V=+d;if(e===mn&&([h,f]=Wu(h,f,V)),d=Yu(h,f,V),d[0]<=h&&(l=Dn(h,f,V)),d[d.length-1]>=f)if(x>=f&&e===mn){const O=Dn(h,f,V);isFinite(O)&&(O>0?f=(Math.floor(f/O)+1)*O:O<0&&(f=(Math.ceil(f*-O)+1)/-O))}else d.pop()}for(var E=d.length,v=0,C=E;d[v]<=h;)++v;for(;d[C-1]>f;)--C;(v||C<E)&&(d=d.slice(v,C),E=C-v);var B=new Array(E+1),D;for(a=0;a<=E;++a)D=B[a]=[],D.x0=a>0?d[a-1]:h,D.x1=a<E?d[a]:f;if(isFinite(l)){if(l>0)for(a=0;a<s;++a)(o=u[a])!=null&&h<=o&&o<=f&&B[Math.min(E,Math.floor((o-h)/l))].push(i[a]);else if(l<0){for(a=0;a<s;++a)if((o=u[a])!=null&&h<=o&&o<=f){const x=Math.floor((h-o)*l);B[Math.min(E,x+(d[x]<=o))].push(i[a])}}}else for(a=0;a<s;++a)(o=u[a])!=null&&h<=o&&o<=f&&B[Fu(d,o,0,E)].push(i[a]);return B}return r.value=function(i){return arguments.length?(n=typeof i=="function"?i:dn(i),r):n},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:dn([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(t=typeof i=="function"?i:dn(Array.isArray(i)?qu.call(i):i),r):t},r}function Ju(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function bn(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,a=new Array(i);++r<i;)a[r]=n+r*t;return a}function Xn(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Yi(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function St(){}var yt=.7,Kt=1/yt,Ue="\\s*([+-]?\\d+)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qu=/^#([0-9a-f]{3,8})$/,Zu=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),ec=new RegExp(`^rgb\\(${fe},${fe},${fe}\\)$`),tc=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${Mt}\\)$`),nc=new RegExp(`^rgba\\(${fe},${fe},${fe},${Mt}\\)$`),rc=new RegExp(`^hsl\\(${Mt},${fe},${fe}\\)$`),ic=new RegExp(`^hsla\\(${Mt},${fe},${fe},${Mt}\\)$`),Ir={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xn(St,Et,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Tr,formatHex:Tr,formatHex8:ac,formatHsl:sc,formatRgb:Rr,toString:Rr});function Tr(){return this.rgb().formatHex()}function ac(){return this.rgb().formatHex8()}function sc(){return Wi(this).formatHsl()}function Rr(){return this.rgb().formatRgb()}function Et(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Qu.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?Br(e):t===3?new F(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Dt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Dt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Zu.exec(n))?new F(e[1],e[2],e[3],1):(e=ec.exec(n))?new F(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=tc.exec(n))?Dt(e[1],e[2],e[3],e[4]):(e=nc.exec(n))?Dt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rc.exec(n))?kr(e[1],e[2]/100,e[3]/100,1):(e=ic.exec(n))?kr(e[1],e[2]/100,e[3]/100,e[4]):Ir.hasOwnProperty(n)?Br(Ir[n]):n==="transparent"?new F(NaN,NaN,NaN,0):null}function Br(n){return new F(n>>16&255,n>>8&255,n&255,1)}function Dt(n,e,t,r){return r<=0&&(n=e=t=NaN),new F(n,e,t,r)}function oc(n){return n instanceof St||(n=Et(n)),n?(n=n.rgb(),new F(n.r,n.g,n.b,n.opacity)):new F}function On(n,e,t,r){return arguments.length===1?oc(n):new F(n,e,t,r??1)}function F(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Xn(F,On,Yi(St,{brighter(n){return n=n==null?Kt:Math.pow(Kt,n),new F(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?yt:Math.pow(yt,n),new F(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new F(Ce(this.r),Ce(this.g),Ce(this.b),Jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dr,formatHex:Dr,formatHex8:lc,formatRgb:Or,toString:Or}));function Dr(){return`#${Ne(this.r)}${Ne(this.g)}${Ne(this.b)}`}function lc(){return`#${Ne(this.r)}${Ne(this.g)}${Ne(this.b)}${Ne((isNaN(this.opacity)?1:this.opacity)*255)}`}function Or(){const n=Jt(this.opacity);return`${n===1?"rgb(":"rgba("}${Ce(this.r)}, ${Ce(this.g)}, ${Ce(this.b)}${n===1?")":`, ${n})`}`}function Jt(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ce(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ne(n){return n=Ce(n),(n<16?"0":"")+n.toString(16)}function kr(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Z(n,e,t,r)}function Wi(n){if(n instanceof Z)return new Z(n.h,n.s,n.l,n.opacity);if(n instanceof St||(n=Et(n)),!n)return new Z;if(n instanceof Z)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(t-r)/o+(t<r)*6:t===a?s=(r-e)/o+2:s=(e-t)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Z(s,o,l,n.opacity)}function uc(n,e,t,r){return arguments.length===1?Wi(n):new Z(n,e,t,r??1)}function Z(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Xn(Z,uc,Yi(St,{brighter(n){return n=n==null?Kt:Math.pow(Kt,n),new Z(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?yt:Math.pow(yt,n),new Z(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new F(pn(n>=240?n-240:n+120,i,r),pn(n,i,r),pn(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Z(Gr(this.h),Ot(this.s),Ot(this.l),Jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Jt(this.opacity);return`${n===1?"hsl(":"hsla("}${Gr(this.h)}, ${Ot(this.s)*100}%, ${Ot(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Gr(n){return n=(n||0)%360,n<0?n+360:n}function Ot(n){return Math.max(0,Math.min(1,n||0))}function pn(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Kn=n=>()=>n;function cc(n,e){return function(t){return n+t*e}}function fc(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function hc(n){return(n=+n)==1?Xi:function(e,t){return t-e?fc(e,t,n):Kn(isNaN(e)?t:e)}}function Xi(n,e){var t=e-n;return t?cc(n,t):Kn(isNaN(n)?e:n)}const Lr=function n(e){var t=hc(e);function r(i,a){var s=t((i=On(i)).r,(a=On(a)).r),o=t(i.g,a.g),l=t(i.b,a.b),u=Xi(i.opacity,a.opacity);return function(c){return i.r=s(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=n,r}(1);function mc(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(a){for(i=0;i<t;++i)r[i]=n[i]*(1-a)+e[i]*a;return r}}function dc(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function bc(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),a=new Array(t),s;for(s=0;s<r;++s)i[s]=Jn(n[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function pc(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function kn(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function gc(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=Jn(n[i],e[i]):r[i]=e[i];return function(a){for(i in t)r[i]=t[i](a);return r}}var Gn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gn=new RegExp(Gn.source,"g");function yc(n){return function(){return n}}function Mc(n){return function(e){return n(e)+""}}function Ec(n,e){var t=Gn.lastIndex=gn.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(n=n+"",e=e+"";(r=Gn.exec(n))&&(i=gn.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:kn(r,i)})),t=gn.lastIndex;return t<e.length&&(a=e.slice(t),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Mc(l[0].x):yc(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)o[(h=l[c]).i]=h.x(u);return o.join("")})}function Jn(n,e){var t=typeof e,r;return e==null||t==="boolean"?Kn(e):(t==="number"?kn:t==="string"?(r=Et(e))?(e=r,Lr):Ec:e instanceof Et?Lr:e instanceof Date?pc:dc(e)?mc:Array.isArray(e)?bc:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gc:kn)(n,e)}function st(n,e,t){this.k=n,this.x=e,this.y=t}st.prototype={constructor:st,scale:function(n){return n===1?this:new st(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new st(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};st.prototype;var Qt,Zt,en,He,wt,xe,vt,qe,_t,Q,oe,Ve;class wc{constructor(){U(this,Qt,.03);U(this,Zt,.5);U(this,en,200);U(this,He,!1);U(this,wt,null);U(this,xe,null);U(this,vt,4);U(this,qe,1/0);U(this,_t,void 0);U(this,Q,null);U(this,oe,new AudioContext);U(this,Ve,null);It(this,"_scheduler",()=>{const e=N(this,vt),t=60/N(this,xe);let r=N(this,_t)+N(this,Q)*t;for(;r<N(this,oe).currentTime+N(this,Zt);)if(N(this,Q)<N(this,qe)-1){r+=t;const i=N(this,Q)%e===e-1||N(this,Q)===-1,a=r-N(this,oe).currentTime,s=performance.now()+a*1e3;this._playSound(r,s,i),er(this,Q)._++}N(this,Q)<N(this,qe)-1?J(this,wt,setTimeout(this._scheduler,N(this,en))):this.stop()})}get bpm(){return N(this,xe)}get beatCount(){return N(this,Q)}onClick(e){J(this,Ve,e)}start(e,t=4,r=1/0){if(!e||Number.isNaN(+e)){console.error(`[Metronome] Invalid bpm ${e}`);return}if(!t||Number.isNaN(+t)){console.error(`[Metronome] Invalid accent ${t}`);return}if(!r||Number.isNaN(+r)){console.error(`[Metronome] Invalid maxBeeps ${r}`);return}N(this,oe).state==="suspended"&&N(this,oe).resume(),J(this,xe,+e),J(this,vt,+t),J(this,qe,+r),J(this,He,!0),console.log(`Metronome @ ${e}bpm, accent every ${t}. beat, limited to ${r}`),J(this,Q,-1),J(this,_t,N(this,oe).currentTime),this._scheduler()}stop(){console.log("[Metronome] stopped"),clearTimeout(N(this,wt)),J(this,He,!1)}toggle(e,t=4){N(this,He)?this.stop():(e===void 0&&(e=N(this,xe)),this.start(e,t))}_playSound(e,t,r){N(this,Ve)&&N(this,Ve).call(this,e,t,r);const i=N(this,oe).createOscillator();i.connect(N(this,oe).destination);const a=r?300:200;i.frequency.value=a,i.start(e),i.stop(e+N(this,Qt))}}Qt=new WeakMap,Zt=new WeakMap,en=new WeakMap,He=new WeakMap,wt=new WeakMap,xe=new WeakMap,vt=new WeakMap,qe=new WeakMap,_t=new WeakMap,Q=new WeakMap,oe=new WeakMap,Ve=new WeakMap;function vc(n,e,t){const r=n.slice();return r[25]=e[t],r}function Fr(n,e,t){const r=n.slice();return r[25]=e[t],r}function $r(n){let e,t=n[25]+"",r;return{c(){e=A("option"),r=H(t),e.__value=n[25],le(e,e.__value)},m(i,a){te(i,e,a),y(e,r)},p:ne,d(i){i&&X(e)}}}function _c(n){let e;return{c(){e=A("option"),e.textContent=`1/${n[25]} note`,e.__value=n[25],le(e,e.__value)},m(t,r){te(t,e,r)},p:ne,d(t){t&&X(e)}}}function Pc(n){let e,t,r,i,a,s=b.inputs.length+"",o,l,u,c,h,f,d,E,v,C,B,D,x,V,O,Nt,ie,xt,Te,an,$,S,I,R,T,Xe,_e,ae,pe,M,se,Pe,j,Ke,me,Je,de,Ct,Re,Qe,Ze,ge=ut(n[7]),G=[];for(let _=0;_<ge.length;_+=1)G[_]=$r(Fr(n,ge,_));let sn=ut([16,32,64,128]),ye=[];for(let _=0;_<4;_+=1)ye[_]=_c(vc(n,sn,_));return{c(){e=A("main"),t=A("h2"),t.textContent="Live-Subdivision",r=L(),i=A("p"),a=H("Connect a MIDI instrument (currently "),o=H(s),l=H(` connected),
        choose your tempo and subdivision, and start playing. The bar chart will
        show you how often you hit each time bin and the last `),u=H(n[5]),c=H(` notes
        will be shown as ticks that fade out one new notes come in.`),h=L(),f=A("div"),d=A("label"),E=H(`tempo
            `),v=A("input"),C=L(),B=A("label"),D=H(`grid
            `),x=A("select");for(let _=0;_<G.length;_+=1)G[_].c();V=L(),O=A("label"),Nt=H(`binning
            `),ie=A("select");for(let _=0;_<4;_+=1)ye[_].c();xt=L(),Te=A("label"),an=H(`adjust
            `),$=A("input"),S=L(),I=A("label"),R=H(`note limit
            `),T=A("input"),Xe=L(),_e=A("div"),ae=A("canvas"),pe=L(),M=A("div"),se=A("button"),se.textContent="reset",Pe=L(),j=A("button"),j.textContent="export",Ke=L(),me=A("button"),me.textContent="import",Je=L(),de=A("input"),Ct=L(),Re=A("button"),Re.textContent="metronome",P(v,"type","number"),P(v,"step","1"),P(v,"min","10"),P(v,"max","400"),De(v,"width","55px"),P(d,"title","The tempo in beats per minute (bpm)"),n[2]===void 0&&ht(()=>n[13].call(x)),P(B,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),n[3]===void 0&&ht(()=>n[14].call(ie)),P(O,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),P($,"type","number"),P($,"step","0.01"),P($,"min","-2"),P($,"max","2"),De($,"width","55px"),P(Te,"title","Shift all notes by an amount in seconds"),P(T,"type","number"),P(T,"step","1"),P(T,"min","0"),P(T,"max","100"),De(T,"width","55px"),P(I,"title","Number of notes that are shown as ticks"),P(f,"class","control"),De(ae,"width",ot+"px"),De(ae,"height",Ln+"px"),P(_e,"class","visualization"),P(se,"title","Clear all played notes"),P(j,"title","Export all data and settings"),P(me,"title","Export all data and settings"),P(de,"type","file"),P(de,"id","file-input"),De(de,"display","none"),P(Re,"title","Toggle metronome (click)"),P(M,"class","control"),P(e,"class","demo")},m(_,z){te(_,e,z),y(e,t),y(e,r),y(e,i),y(i,a),y(i,o),y(i,l),y(i,u),y(i,c),y(e,h),y(e,f),y(f,d),y(d,E),y(d,v),le(v,n[1]),y(f,C),y(f,B),y(B,D),y(B,x);for(let g=0;g<G.length;g+=1)G[g]&&G[g].m(x,null);Tt(x,n[2],!0),y(f,V),y(f,O),y(O,Nt),y(O,ie);for(let g=0;g<4;g+=1)ye[g]&&ye[g].m(ie,null);Tt(ie,n[3],!0),y(f,xt),y(f,Te),y(Te,an),y(Te,$),le($,n[4]),y(f,S),y(f,I),y(I,R),y(I,T),le(T,n[5]),y(e,Xe),y(e,_e),y(_e,ae),n[17](ae),y(e,pe),y(e,M),y(M,se),y(M,Pe),y(M,j),y(M,Ke),y(M,me),y(M,Je),y(M,de),y(M,Ct),y(M,Re),Qe||(Ze=[k(v,"input",n[12]),k(v,"change",n[9]),k(x,"change",n[13]),k(x,"change",n[9]),k(ie,"change",n[14]),k(ie,"change",n[9]),k($,"input",n[15]),k($,"change",n[9]),k(T,"input",n[16]),k(T,"change",n[9]),k(se,"click",n[18]),k(j,"click",n[10]),k(me,"click",n[19]),k(de,"input",n[11]),k(Re,"click",n[20])],Qe=!0)},p(_,[z]){if(z&32&&na(u,_[5]),z&2&&Le(v.value)!==_[1]&&le(v,_[1]),z&128){ge=ut(_[7]);let g;for(g=0;g<ge.length;g+=1){const Y=Fr(_,ge,g);G[g]?G[g].p(Y,z):(G[g]=$r(Y),G[g].c(),G[g].m(x,null))}for(;g<G.length;g+=1)G[g].d(1);G.length=ge.length}z&132&&Tt(x,_[2]),z&8&&Tt(ie,_[3]),z&16&&Le($.value)!==_[4]&&le($,_[4]),z&32&&Le(T.value)!==_[5]&&le(T,_[5])},i:ne,o:ne,d(_){_&&X(e),yn(G,_),yn(ye,_),n[17](null),Qe=!1,We(Ze)}}}let ot=1e3,Ln=1e3;function Ac(n,e,t){const r=["4:2","4:3","4:4","4:5","3:2"],i=Math.PI*2;let a,s=new wc,o=120,l=r[0],u=64,c=0,h=12,f=0,d=[];const E=()=>{b.inputs.length<1?console.warn("No MIDI device detected"):b.inputs.forEach((S,I)=>{console.log(`MIDI device ${I}: ${S.name}`),S.addListener("noteon",v)})},v=S=>{d.length===0&&(f=S.timestamp);const I=(S.timestamp-f)/1e3;d.push(I),C()},C=()=>{console.log("draw");const S=ot/2,I=Ln/2,R=ot*.4,T=R*.8,Xe=R*.9,_e=R*1.1,ae=R*.95,pe=Math.PI/2,M=a.getContext("2d"),se=window.devicePixelRatio,Pe=a.getBoundingClientRect();t(0,a.width=Pe.width*se,a),t(0,a.height=Pe.height*se,a),M.scale(se,se),t(0,a.style.width=`${Pe.width}px`,a),t(0,a.style.height=`${Pe.height}px`,a),M.clearRect(0,0,ot,Ln);const[j,Ke]=l.split(":").map(g=>+g),me=Ol(o)*j,Je=d.map(g=>g+c);M.fillStyle="#f8f8f8",M.strokeStyle="#aaa";const de=u*j/4,Ct=Ku().domain([0,i]).thresholds(bn(de).map(g=>g/de*i)),Qe=Je.map(g=>g%me).map(g=>g/me*i),Ze=Ct(Qe),ge=Ju(Ze,g=>g.length),G=ot*.08;for(const g of Ze){if(g.length===0)continue;const Y=g.length/ge*G,W=R+Y,Be=g.x0-pe,et=Math.cos(Be),Qn=Math.sin(Be),on=g.x1-pe,Ki=Math.cos(on),Ji=Math.sin(on);M.beginPath(),M.moveTo(S+et*R,I+Qn*R),M.lineTo(S+et*W,I+Qn*W),M.arc(S,I,W,Be,on),M.lineTo(S+Ki*R,I+Ji*R),M.closePath(),M.fill(),M.stroke()}M.lineWidth=3;const sn=Jn("#00000044","black"),ye=Je.slice(-h);for(const[g,Y]of ye.entries()){const W=Y/me*i-pe,Be=Math.cos(W),et=Math.sin(W);M.strokeStyle=sn(g/ye.length),M.beginPath(),M.moveTo(S+Be*R,I+et*R),M.lineTo(S+Be*_e,I+et*_e),M.stroke()}Gl(M,S,I,R),M.lineWidth=2,M.fillStyle="white",M.fill(),M.strokeStyle="#aaa",M.stroke();const _=bn(j).map(g=>i/j*g-pe),z=bn(j*Ke).map(g=>i/(j*Ke)*g-pe);M.beginPath(),M.lineWidth=2;for(const g of _){const Y=Math.cos(g),W=Math.sin(g);M.moveTo(S+Y*T,I+W*T),M.lineTo(S+Y*ae,I+W*ae)}M.stroke(),M.lineWidth=1,M.beginPath();for(const g of z){const Y=Math.cos(g),W=Math.sin(g);M.moveTo(S+Y*Xe,I+W*Xe),M.lineTo(S+Y*ae,I+W*ae)}M.stroke()},B=()=>{const I=JSON.stringify({tempo:o,grid:l,binNote:u,adjustTime:c,noteTickLimit:h,noteOnTimes:d},void 0,2),R=new Blob([I],{type:"text/plain;charset=utf-8"});Du(R,"live-subdivision.json")},D=async S=>{const R=await S.target.files[0].text(),T=JSON.parse(R);(d.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(t(1,o=T.tempo),t(2,l=T.grid),t(3,u=T.binNote),t(4,c=T.adjustTime),t(5,h=T.noteTickLimit),t(6,d=T.noteOnTimes),C())};ra(()=>{b.enable().then(E).catch(S=>alert(S)),C()}),ia(()=>{for(const S of b.inputs)S.removeListener()});function x(){o=Le(this.value),t(1,o)}function V(){l=nr(this),t(2,l),t(7,r)}function O(){u=nr(this),t(3,u)}function Nt(){c=Le(this.value),t(4,c)}function ie(){h=Le(this.value),t(5,h)}function xt(S){Mn[S?"unshift":"push"](()=>{a=S,t(0,a)})}return[a,o,l,u,c,h,d,r,s,C,B,D,x,V,O,Nt,ie,xt,()=>{confirm("Reset played notes?")&&(t(6,d=[]),C())},()=>document.querySelector("#file-input").click(),()=>{s.toggle(o,+l.split(":")[0])}]}class Sc extends Qr{constructor(e){super(),Jr(this,e,Ac,Pc,Yr,{})}}function Ur(n,e,t){const r=new URLSearchParams(n.location.search);r.set(e,t);const i=`${n.location.protocol}//${n.location.host}${n.location.pathname}?${r.toString()}`;n.history.pushState({path:i},"",i)}function Nc(n,e){return new URLSearchParams(n.location.search).get(e)}function Hr(n,e,t){const r=n.slice();return r[7]=e[t],r}function xc(n){let e,t,r,i,a,s,o=n[1]&&qr(n);return{c(){e=A("button"),e.textContent="< back",t=L(),o&&o.c(),r=Wr()},m(l,u){te(l,e,u),te(l,t,u),o&&o.m(l,u),te(l,r,u),i=!0,a||(s=k(e,"click",n[5]),a=!0)},p(l,u){l[1]?o?(o.p(l,u),u&2&&we(o,1)):(o=qr(l),o.c(),we(o,1),o.m(r.parentNode,r)):o&&(Fn(),je(o,1,1,()=>{o=null}),$n())},i(l){i||(we(o),i=!0)},o(l){je(o),i=!1},d(l){l&&(X(e),X(t),X(r)),o&&o.d(l),a=!1,s()}}}function Cc(n){let e,t=ut(n[2]),r=[];for(let i=0;i<t.length;i+=1)r[i]=Vr(Hr(n,t,i));return{c(){e=A("div");for(let i=0;i<r.length;i+=1)r[i].c();P(e,"class","grid svelte-mahk4y")},m(i,a){te(i,e,a);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(i,a){if(a&6){t=ut(i[2]);let s;for(s=0;s<t.length;s+=1){const o=Hr(i,t,s);r[s]?r[s].p(o,a):(r[s]=Vr(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},i:ne,o:ne,d(i){i&&X(e),yn(r,i)}}}function Ic(n){let e,t,r;return{c(){e=A("input"),P(e,"type","password"),P(e,"placeholder","password")},m(i,a){te(i,e,a),le(e,n[0]),t||(r=k(e,"input",n[3]),t=!0)},p(i,a){a&1&&e.value!==i[0]&&le(e,i[0])},i:ne,o:ne,d(i){i&&X(e),t=!1,r()}}}function qr(n){let e,t,r;var i=n[1].component;function a(s,o){return{}}return i&&(e=rr(i,a())),{c(){e&&ar(e.$$.fragment),t=Wr()},m(s,o){e&&wn(e,s,o),te(s,t,o),r=!0},p(s,o){if(o&2&&i!==(i=s[1].component)){if(e){Fn();const l=e;je(l.$$.fragment,1,0,()=>{vn(l,1)}),$n()}i?(e=rr(i,a()),ar(e.$$.fragment),we(e.$$.fragment,1),wn(e,t.parentNode,t)):e=null}},i(s){r||(e&&we(e.$$.fragment,s),r=!0)},o(s){e&&je(e.$$.fragment,s),r=!1},d(s){s&&X(t),e&&vn(e,s)}}}function Vr(n){let e,t,r,i,a,s,o;function l(){return n[4](n[7])}return{c(){e=A("div"),t=A("h2"),t.textContent=`${n[7].title}`,r=L(),i=A("div"),i.textContent=`${n[7].description}`,a=L(),P(t,"class","svelte-mahk4y"),P(e,"class","card svelte-mahk4y")},m(u,c){te(u,e,c),y(e,t),y(e,r),y(e,i),y(e,a),s||(o=k(e,"click",l),s=!0)},p(u,c){n=u},d(u){u&&X(e),s=!1,o()}}}function Tc(n){let e,t,r,i,a,s;const o=[Ic,Cc,xc],l=[];function u(c,h){return c[0]!==Rc?0:c[1]?2:1}return i=u(n),a=l[i]=o[i](n),{c(){e=A("main"),t=A("h1"),t.textContent="Data-Driven Music Education Demos",r=L(),a.c()},m(c,h){te(c,e,h),y(e,t),y(e,r),l[i].m(e,null),s=!0},p(c,[h]){let f=i;i=u(c),i===f?l[i].p(c,h):(Fn(),je(l[f],1,1,()=>{l[f]=null}),$n(),a=l[i],a?a.p(c,h):(a=l[i]=o[i](c),a.c()),we(a,1),a.m(e,null))},i(c){s||(we(a),s=!0)},o(c){je(a),s=!1},d(c){c&&X(e),l[i].d()}}}let Rc="rhyvis";function Bc(n,e,t){const r=[{id:"live-subdivision",title:"Live Sub-Division",description:"Learn rhythmic playing in different sub-divisions in real-time",component:Sc}];let i=null;const a=Nc(window,"d");console.log({param:a}),a&&a!==""&&(i=r.filter(c=>c.id===a)[0]);let s=localStorage.getItem("pwd")??"";function o(){s=this.value,t(0,s)}const l=c=>{t(1,i=c),Ur(window,"d",c.id)},u=()=>{t(1,i=null),Ur(window,"d","")};return n.$$.update=()=>{n.$$.dirty&1&&localStorage.setItem("pwd",s)},[s,i,r,o,l,u]}class Dc extends Qr{constructor(e){super(),Jr(this,e,Bc,Tc,Yr,{})}}new Dc({target:document.getElementById("app")});

var mm=Object.defineProperty;var ym=(t,e,n)=>e in t?mm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Wa=(t,e,n)=>(ym(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Mt(){}function fh(t){return t()}function qs(){return Object.create(null)}function ln(t){t.forEach(fh)}function ch(t){return typeof t=="function"}function ke(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function bm(t){return Object.keys(t).length===0}function I(t,e){t.appendChild(e)}function lt(t,e,n){t.insertBefore(e,n||null)}function st(t){t.parentNode&&t.parentNode.removeChild(t)}function ri(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function j(t){return document.createElement(t)}function pt(t){return document.createTextNode(t)}function ft(){return pt(" ")}function sh(){return pt("")}function Vt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function dt(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _m(t){return t===""?null:+t}function wm(t){return Array.from(t.childNodes)}function nn(t,e){e=""+e,t.data!==e&&(t.data=e)}function ii(t,e){t.value=e??""}function on(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function er(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Af(t){const e=t.querySelector(":checked");return e&&e.__value}let oi;function Kr(t){oi=t}function uh(){if(!oi)throw new Error("Function called outside component initialization");return oi}function vm(t){uh().$$.on_mount.push(t)}function vi(t){uh().$$.after_update.push(t)}const tr=[],an=[];let or=[];const Ys=[],xm=Promise.resolve();let Cf=!1;function Mm(){Cf||(Cf=!0,xm.then(lh))}function ur(t){or.push(t)}const Ha=new Set;let Vn=0;function lh(){if(Vn!==0)return;const t=oi;do{try{for(;Vn<tr.length;){const e=tr[Vn];Vn++,Kr(e),$m(e.$$)}}catch(e){throw tr.length=0,Vn=0,e}for(Kr(null),tr.length=0,Vn=0;an.length;)an.pop()();for(let e=0;e<or.length;e+=1){const n=or[e];Ha.has(n)||(Ha.add(n),n())}or.length=0}while(tr.length);for(;Ys.length;)Ys.pop()();Cf=!1,Ha.clear(),Kr(t)}function $m(t){if(t.fragment!==null){t.update(),ln(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ur)}}function Sm(t){const e=[],n=[];or.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),or=e}const uo=new Set;let xn;function Sr(){xn={r:0,c:[],p:xn}}function Tr(){xn.r||ln(xn.c),xn=xn.p}function ut(t,e){t&&t.i&&(uo.delete(t),t.i(e))}function gt(t,e,n,r){if(t&&t.o){if(uo.has(t))return;uo.add(t),xn.c.push(()=>{uo.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function ve(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Bt(t){t&&t.c()}function Rt(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),ur(()=>{const o=t.$$.on_mount.map(fh).filter(ch);t.$$.on_destroy?t.$$.on_destroy.push(...o):ln(o),t.$$.on_mount=[]}),i.forEach(ur)}function Ft(t,e){const n=t.$$;n.fragment!==null&&(Sm(n.after_update),ln(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Tm(t,e){t.$$.dirty[0]===-1&&(tr.push(t),Mm(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ee(t,e,n,r,i,o,a=null,f=[-1]){const c=oi;Kr(t);const s=t.$$={fragment:null,ctx:[],props:o,update:Mt,not_equal:i,bound:qs(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:qs(),dirty:f,skip_bound:!1,root:e.target||c.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(h,l,...d)=>{const p=d.length?d[0]:l;return s.ctx&&i(s.ctx[h],s.ctx[h]=p)&&(!s.skip_bound&&s.bound[h]&&s.bound[h](p),u&&Tm(t,h)),l}):[],s.update(),u=!0,ln(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const h=wm(e.target);s.fragment&&s.fragment.l(h),h.forEach(st)}else s.fragment&&s.fragment.c();e.intro&&ut(t.$$.fragment),Rt(t,e.target,e.anchor),lh()}Kr(c)}class Ae{constructor(){Wa(this,"$$");Wa(this,"$$set")}$destroy(){Ft(this,1),this.$destroy=Mt}$on(e,n){if(!ch(n))return Mt;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!bm(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const km="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(km);const Em="modulepreload",Am=function(t){return"/rhythm-vis/"+t},Ws={},Xn=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Am(o),o in Ws)return;Ws[o]=!0;const a=o.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===o&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${f}`))return;const s=document.createElement("link");if(s.rel=a?"stylesheet":Em,a||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),a)return new Promise((u,h)=>{s.addEventListener("load",u),s.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function Cm(t){if(t){if(t=new Uint8Array(t.buffer||t),Dm(t))return"wav";if(Nm(t))return"mp3";if(Rm(t))return"flac";if(Fm(t))return"m4a";if(Im(t))return"opus";if(Lm(t))return"oga";if(Pm(t))return"qoa"}}function Nm(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function Dm(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function Lm(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function Rm(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function Fm(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function Im(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function Pm(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let Om=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,r){r==null&&(r=0);for(var i=this._channelData[n],o=r,a=0;o<this.length&&a<e.length;o++,a++)e[a]=i[o]}copyToChannel(e,n,r){var i=this._channelData[n];r||(r=0);for(var o=r,a=0;o<this.length&&a<e.length;o++,a++)i[o]=e[a]}};const Um=globalThis.AudioBuffer||Om;async function Bm(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=Cm(t);if(!e)throw Error("Cannot detect audio format");if(!tn[e])throw Error("Missing decoder for "+e+" format");return tn[e](t)}const tn={async oga(t){let{OggVorbisDecoder:e}=await Xn(()=>import("./index-9c926572.js"),["assets/index-9c926572.js","assets/utilities-fec2a8a2.js","assets/index-0047a0ad.js"]);const n=new e;return await n.ready,(tn.oga=async r=>r&&jn(await n.decodeFile(r)))(t)},async mp3(t){const{MPEGDecoder:e}=await Xn(()=>import("./index-de0d28e5.js"),["assets/index-de0d28e5.js","assets/utilities-fec2a8a2.js"]),n=new e;return await n.ready,(tn.mp3=r=>r&&jn(n.decode(r)))(t)},async flac(t){const{FLACDecoder:e}=await Xn(()=>import("./index-8323b3b9.js"),["assets/index-8323b3b9.js","assets/utilities-fec2a8a2.js","assets/index-0047a0ad.js"]),n=new e;return await n.ready,(tn.mp3=async r=>r&&jn(await n.decode(r)))(t)},async opus(t){const{OggOpusDecoder:e}=await Xn(()=>import("./index-548ab73d.js"),["assets/index-548ab73d.js","assets/utilities-fec2a8a2.js","assets/index-0047a0ad.js"]),n=new e;return await n.ready,(tn.opus=async r=>r&&jn(await n.decodeFile(r)))(t)},async wav(t){let e=await Xn(()=>import("./index-31b38393.js").then(r=>r.i),[]),{decode:n}=e.default;return(tn.wav=r=>r&&jn(n(r)))(t)},async qoa(t){let{decode:e}=await Xn(()=>import("./index-12ef46d6.js"),[]);return(tn.qoa=n=>n&&jn(e(n)))(t)}};function jn({channelData:t,sampleRate:e}){let n=new Um({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let r=0;r<t.length;r++)n.getChannelData(r).set(t[r]);return n}var Fr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zm=qm;function qm(t,e){e=e||{};var n=t.numberOfChannels,r=t.sampleRate,i=e.float32?3:1,o=i===3?32:16,a;return n===2?a=Wm(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),Ym(a,i,r,n,o)}function Ym(t,e,n,r,i){var o=i/8,a=r*o,f=new ArrayBuffer(44+t.length*o),c=new DataView(f);return Wi(c,0,"RIFF"),c.setUint32(4,36+t.length*o,!0),Wi(c,8,"WAVE"),Wi(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,e,!0),c.setUint16(22,r,!0),c.setUint32(24,n,!0),c.setUint32(28,n*a,!0),c.setUint16(32,a,!0),c.setUint16(34,i,!0),Wi(c,36,"data"),c.setUint32(40,t.length*o,!0),e===1?Gm(c,44,t):Hm(c,44,t),f}function Wm(t,e){for(var n=t.length+e.length,r=new Float32Array(n),i=0,o=0;i<n;)r[i++]=t[o],r[i++]=e[o],o++;return r}function Hm(t,e,n){for(var r=0;r<n.length;r++,e+=4)t.setFloat32(e,n[r],!0)}function Gm(t,e,n){for(var r=0;r<n.length;r++,e+=2){var i=Math.max(-1,Math.min(1,n[r]));t.setInt16(e,i<0?i*32768:i*32767,!0)}}function Wi(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}const Vm=hh(zm);function dh(t=16,e=.5,n=0,r=0,i=0){const o=[];for(let a=0;a<t;++a){const f=a===n?r:0;o.push(a*e+i+f)}return o}async function ph(t){const n=await(await fetch(t)).arrayBuffer();return await Bm(n)}function gh(t,e){const n=e.at(-1)+1,r=t.getChannelData(0),i=new Float32Array(Math.ceil(n*t.sampleRate));for(const o of e){const a=Math.round(o*t.sampleRate);for(let f=0;f<r.length;++f)i[a+f]=r[f]}return i}function Xm(t,e,n){const r=new AudioBuffer({sampleRate:e,length:t.length});r.copyToChannel(t,0);const i=new Blob([Vm(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function Wt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function na(t){let e,n,r;t.length!==2?(e=Wt,n=(f,c)=>Wt(t(f),c),r=(f,c)=>t(f)-c):(e=t===Wt||t===xi?t:jm,n=t,r=t);function i(f,c,s=0,u=f.length){if(s<u){if(e(c,c)!==0)return u;do{const h=s+u>>>1;n(f[h],c)<0?s=h+1:u=h}while(s<u)}return s}function o(f,c,s=0,u=f.length){if(s<u){if(e(c,c)!==0)return u;do{const h=s+u>>>1;n(f[h],c)<=0?s=h+1:u=h}while(s<u)}return s}function a(f,c,s=0,u=f.length){const h=i(f,c,s,u-1);return h>s&&r(f[h-1],c)>-r(f[h],c)?h-1:h}return{left:i,center:a,right:o}}function jm(){return 0}function mh(t){return t===null?NaN:+t}function*Zm(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const Km=na(Wt),Qm=Km.right;na(mh).center;const ra=Qm;function Ec(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function Jm(t){return t.length|0}function t2(t){return!(t>0)}function e2(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function n2(t){return e=>t(...e)}function r2(...t){const e=typeof t[t.length-1]=="function"&&n2(t.pop());t=t.map(e2);const n=t.map(Jm),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(t2))return o;for(;;){o.push(i.map((f,c)=>t[c][f]));let a=r;for(;++i[a]===n[a];){if(a===0)return e?o.map(e):o;i[a--]=0}}}function i2(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function yh(t,e){let n=0,r,i=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let f of t)(f=e(f,++a,t))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,o+=r*(f-i))}if(n>1)return o/(n-1)}function bh(t,e){const n=yh(t,e);return n&&Math.sqrt(n)}function te(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Cn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=e+o,f=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);f&&(n[r++]=f),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,i=e[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Nn extends Map{constructor(e,n=vh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Nf(this,e))}has(e){return super.has(Nf(this,e))}set(e,n){return super.set(_h(this,e),n)}delete(e){return super.delete(wh(this,e))}}class ia extends Set{constructor(e,n=vh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Nf(this,e))}add(e){return super.add(_h(this,e))}delete(e){return super.delete(wh(this,e))}}function Nf({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function _h({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function wh({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function vh(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Df(t){return t}function oa(t,...e){return Ac(t,Df,Df,e)}function ar(t,e,...n){return Ac(t,Df,e,n)}function o2(t,e,...n){return Ac(t,Array.from,e,n)}function Ac(t,e,n,r){return function i(o,a){if(a>=r.length)return n(o);const f=new Nn,c=r[a++];let s=-1;for(const u of o){const h=c(u,++s,o),l=f.get(h);l?l.push(u):f.set(h,[u])}for(const[u,h]of f)f.set(u,i(h,a));return e(f)}(t,0)}function a2(t,e){return Array.from(e,n=>t[n])}function ai(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,o)=>o);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,o)=>{for(const a of e){const f=bo(a[i],a[o]);if(f)return f}})):(n=t.map(n),r.sort((i,o)=>bo(n[i],n[o]))),a2(t,r)}return t.sort(xh(n))}function xh(t=Wt){if(t===Wt)return bo;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function bo(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Cc(t,e,n){return(e.length!==2?ai(ar(t,e,n),([r,i],[o,a])=>Wt(i,a)||Wt(r,o)):ai(oa(t,n),([r,i],[o,a])=>e(i,a)||Wt(r,o))).map(([r])=>r)}const f2=Math.sqrt(50),c2=Math.sqrt(10),s2=Math.sqrt(2);function _o(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=f2?10:o>=c2?5:o>=s2?2:1;let f,c,s;return i<0?(s=Math.pow(10,-i)/a,f=Math.round(t*s),c=Math.round(e*s),f/s<t&&++f,c/s>e&&--c,s=-s):(s=Math.pow(10,i)*a,f=Math.round(t/s),c=Math.round(e/s),f*s<t&&++f,c*s>e&&--c),c<f&&.5<=n&&n<2?_o(t,e,n*2):[f,c,s]}function fi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?_o(e,t,n):_o(t,e,n);if(!(o>=i))return[];const f=o-i+1,c=new Array(f);if(r)if(a<0)for(let s=0;s<f;++s)c[s]=(o-s)/-a;else for(let s=0;s<f;++s)c[s]=(o-s)*a;else if(a<0)for(let s=0;s<f;++s)c[s]=(i+s)/-a;else for(let s=0;s<f;++s)c[s]=(i+s)*a;return c}function wo(t,e,n){return e=+e,t=+t,n=+n,_o(t,e,n)[2]}function Lf(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?wo(e,t,n):wo(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function u2(t){return Math.max(1,Math.ceil(Math.log(Ec(t))/Math.LN2)+1)}function ue(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function l2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Ye(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function h2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Mh(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?bo:xh(i);r>n;){if(r-n>600){const c=r-n+1,s=e-n+1,u=Math.log(c),h=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*h*(c-h)/c)*(s-c/2<0?-1:1),d=Math.max(n,Math.floor(e-s*h/c+l)),p=Math.min(r,Math.floor(e+(c-s)*h/c+l));Mh(t,e,d,p,i)}const o=t[e];let a=n,f=r;for(Ir(t,n,e),i(t[r],o)>0&&Ir(t,n,r);a<f;){for(Ir(t,a,f),++a,--f;i(t[a],o)<0;)++a;for(;i(t[f],o)>0;)--f}i(t[n],o)===0?Ir(t,n,f):(++f,Ir(t,f,r)),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Ir(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function $h(t,e=Wt){let n,r=!1;if(e.length===1){let i;for(const o of t){const a=e(o);(r?Wt(a,i)>0:Wt(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function lr(t,e,n){if(t=Float64Array.from(Zm(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Ye(t);if(e>=1)return ue(t);var r,i=(r-1)*e,o=Math.floor(i),a=ue(Mh(t,o).subarray(0,o+1)),f=Ye(t.subarray(o+1));return a+(f-a)*(i-o)}}function d2(t,e,n=mh){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),f=+n(t[o+1],o+1,t);return a+(f-a)*(i-o)}}function p2(t,e,n){const r=Ec(t),i=lr(t,.75)-lr(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function Sh(t,e,n){const r=Ec(t),i=bh(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function g2(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Rf(t,e){return lr(t,.5,e)}function*m2(t){for(const e of t)yield*e}function Th(t){return Array.from(m2(t))}function y2(t,e){const n=new Nn;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function b2(t,e=_2){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function _2(t,e){return[t,e]}function Ff(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function fn(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function vo(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function w2(t){return t}var Ga=1,Va=2,If=3,Hi=4,Hs=1e-6;function v2(t){return"translate("+t+",0)"}function x2(t){return"translate(0,"+t+")"}function M2(t){return e=>+t(e)}function $2(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function S2(){return!this.__axis}function T2(t,e){var n=[],r=null,i=null,o=6,a=6,f=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===Ga||t===Hi?-1:1,u=t===Hi||t===Va?"x":"y",h=t===Ga||t===If?v2:x2;function l(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),g=i??(e.tickFormat?e.tickFormat.apply(e,n):w2),m=Math.max(o,0)+f,_=e.range(),y=+_[0]+c,v=+_[_.length-1]+c,b=(e.bandwidth?$2:M2)(e.copy(),c),w=d.selection?d.selection():d,x=w.selectAll(".domain").data([null]),$=w.selectAll(".tick").data(p,e).order(),E=$.exit(),k=$.enter().append("g").attr("class","tick"),A=$.select("line"),M=$.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(k),A=A.merge(k.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),M=M.merge(k.append("text").attr("fill","currentColor").attr(u,s*m).attr("dy",t===Ga?"0em":t===If?"0.71em":"0.32em")),d!==w&&(x=x.transition(d),$=$.transition(d),A=A.transition(d),M=M.transition(d),E=E.transition(d).attr("opacity",Hs).attr("transform",function(L){return isFinite(L=b(L))?h(L+c):this.getAttribute("transform")}),k.attr("opacity",Hs).attr("transform",function(L){var F=this.parentNode.__axis;return h((F&&isFinite(F=F(L))?F:b(L))+c)})),E.remove(),x.attr("d",t===Hi||t===Va?a?"M"+s*a+","+y+"H"+c+"V"+v+"H"+s*a:"M"+c+","+y+"V"+v:a?"M"+y+","+s*a+"V"+c+"H"+v+"V"+s*a:"M"+y+","+c+"H"+v),$.attr("opacity",1).attr("transform",function(L){return h(b(L)+c)}),A.attr(u+"2",s*o),M.attr(u,s*m).text(g),w.filter(S2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Va?"start":t===Hi?"end":"middle"),w.each(function(){this.__axis=b})}return l.scale=function(d){return arguments.length?(e=d,l):e},l.ticks=function(){return n=Array.from(arguments),l},l.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),l):n.slice()},l.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),l):r&&r.slice()},l.tickFormat=function(d){return arguments.length?(i=d,l):i},l.tickSize=function(d){return arguments.length?(o=a=+d,l):o},l.tickSizeInner=function(d){return arguments.length?(o=+d,l):o},l.tickSizeOuter=function(d){return arguments.length?(a=+d,l):a},l.tickPadding=function(d){return arguments.length?(f=+d,l):f},l.offset=function(d){return arguments.length?(c=+d,l):c},l}function k2(t){return T2(If,t)}var E2={value:()=>{}};function kh(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new lo(n)}function lo(t){this._=t}function A2(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}lo.prototype=kh.prototype={constructor:lo,on:function(t,e){var n=this._,r=A2(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=C2(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Gs(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Gs(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new lo(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function C2(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Gs(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=E2,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Pf="http://www.w3.org/1999/xhtml";const hr={svg:"http://www.w3.org/2000/svg",xhtml:Pf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function aa(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),hr.hasOwnProperty(e)?{space:hr[e],local:t}:t}function N2(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Pf&&e.documentElement.namespaceURI===Pf?e.createElement(t):e.createElementNS(n,t)}}function D2(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function fa(t){var e=aa(t);return(e.local?D2:N2)(e)}function L2(){}function Nc(t){return t==null?L2:function(){return this.querySelector(t)}}function R2(t){typeof t!="function"&&(t=Nc(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,f=r[i]=new Array(a),c,s,u=0;u<a;++u)(c=o[u])&&(s=t.call(c,c.__data__,u,o))&&("__data__"in c&&(s.__data__=c.__data__),f[u]=s);return new jt(r,this._parents)}function F2(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function I2(){return[]}function Eh(t){return t==null?I2:function(){return this.querySelectorAll(t)}}function P2(t){return function(){return F2(t.apply(this,arguments))}}function O2(t){typeof t=="function"?t=P2(t):t=Eh(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],f=a.length,c,s=0;s<f;++s)(c=a[s])&&(r.push(t.call(c,c.__data__,s,a)),i.push(c));return new jt(r,i)}function Ah(t){return function(){return this.matches(t)}}function Ch(t){return function(e){return e.matches(t)}}var U2=Array.prototype.find;function B2(t){return function(){return U2.call(this.children,t)}}function z2(){return this.firstElementChild}function q2(t){return this.select(t==null?z2:B2(typeof t=="function"?t:Ch(t)))}var Y2=Array.prototype.filter;function W2(){return Array.from(this.children)}function H2(t){return function(){return Y2.call(this.children,t)}}function G2(t){return this.selectAll(t==null?W2:H2(typeof t=="function"?t:Ch(t)))}function V2(t){typeof t!="function"&&(t=Ah(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,f=r[i]=[],c,s=0;s<a;++s)(c=o[s])&&t.call(c,c.__data__,s,o)&&f.push(c);return new jt(r,this._parents)}function Nh(t){return new Array(t.length)}function X2(){return new jt(this._enter||this._groups.map(Nh),this._parents)}function xo(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xo.prototype={constructor:xo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function j2(t){return function(){return t}}function Z2(t,e,n,r,i,o){for(var a=0,f,c=e.length,s=o.length;a<s;++a)(f=e[a])?(f.__data__=o[a],r[a]=f):n[a]=new xo(t,o[a]);for(;a<c;++a)(f=e[a])&&(i[a]=f)}function K2(t,e,n,r,i,o,a){var f,c,s=new Map,u=e.length,h=o.length,l=new Array(u),d;for(f=0;f<u;++f)(c=e[f])&&(l[f]=d=a.call(c,c.__data__,f,e)+"",s.has(d)?i[f]=c:s.set(d,c));for(f=0;f<h;++f)d=a.call(t,o[f],f,o)+"",(c=s.get(d))?(r[f]=c,c.__data__=o[f],s.delete(d)):n[f]=new xo(t,o[f]);for(f=0;f<u;++f)(c=e[f])&&s.get(l[f])===c&&(i[f]=c)}function Q2(t){return t.__data__}function J2(t,e){if(!arguments.length)return Array.from(this,Q2);var n=e?K2:Z2,r=this._parents,i=this._groups;typeof t!="function"&&(t=j2(t));for(var o=i.length,a=new Array(o),f=new Array(o),c=new Array(o),s=0;s<o;++s){var u=r[s],h=i[s],l=h.length,d=ty(t.call(u,u&&u.__data__,s,r)),p=d.length,g=f[s]=new Array(p),m=a[s]=new Array(p),_=c[s]=new Array(l);n(u,h,g,m,_,d,e);for(var y=0,v=0,b,w;y<p;++y)if(b=g[y]){for(y>=v&&(v=y+1);!(w=m[v])&&++v<p;);b._next=w||null}}return a=new jt(a,r),a._enter=f,a._exit=c,a}function ty(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ey(){return new jt(this._exit||this._groups.map(Nh),this._parents)}function ny(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ry(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),f=new Array(i),c=0;c<a;++c)for(var s=n[c],u=r[c],h=s.length,l=f[c]=new Array(h),d,p=0;p<h;++p)(d=s[p]||u[p])&&(l[p]=d);for(;c<i;++c)f[c]=n[c];return new jt(f,this._parents)}function iy(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function oy(t){t||(t=ay);function e(h,l){return h&&l?t(h.__data__,l.__data__):!h-!l}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],f=a.length,c=i[o]=new Array(f),s,u=0;u<f;++u)(s=a[u])&&(c[u]=s);c.sort(e)}return new jt(i,this._parents).order()}function ay(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function fy(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function cy(){return Array.from(this)}function sy(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function uy(){let t=0;for(const e of this)++t;return t}function ly(){return!this.node()}function hy(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,f;o<a;++o)(f=i[o])&&t.call(f,f.__data__,o,i);return this}function dy(t){return function(){this.removeAttribute(t)}}function py(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gy(t,e){return function(){this.setAttribute(t,e)}}function my(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function yy(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function by(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _y(t,e){var n=aa(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?py:dy:typeof e=="function"?n.local?by:yy:n.local?my:gy)(n,e))}function Dh(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function wy(t){return function(){this.style.removeProperty(t)}}function vy(t,e,n){return function(){this.style.setProperty(t,e,n)}}function xy(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function My(t,e,n){return arguments.length>1?this.each((e==null?wy:typeof e=="function"?xy:vy)(t,e,n??"")):dr(this.node(),t)}function dr(t,e){return t.style.getPropertyValue(e)||Dh(t).getComputedStyle(t,null).getPropertyValue(e)}function $y(t){return function(){delete this[t]}}function Sy(t,e){return function(){this[t]=e}}function Ty(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ky(t,e){return arguments.length>1?this.each((e==null?$y:typeof e=="function"?Ty:Sy)(t,e)):this.node()[t]}function Lh(t){return t.trim().split(/^|\s+/)}function Dc(t){return t.classList||new Rh(t)}function Rh(t){this._node=t,this._names=Lh(t.getAttribute("class")||"")}Rh.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Fh(t,e){for(var n=Dc(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ih(t,e){for(var n=Dc(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ey(t){return function(){Fh(this,t)}}function Ay(t){return function(){Ih(this,t)}}function Cy(t,e){return function(){(e.apply(this,arguments)?Fh:Ih)(this,t)}}function Ny(t,e){var n=Lh(t+"");if(arguments.length<2){for(var r=Dc(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Cy:e?Ey:Ay)(n,e))}function Dy(){this.textContent=""}function Ly(t){return function(){this.textContent=t}}function Ry(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Fy(t){return arguments.length?this.each(t==null?Dy:(typeof t=="function"?Ry:Ly)(t)):this.node().textContent}function Iy(){this.innerHTML=""}function Py(t){return function(){this.innerHTML=t}}function Oy(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Uy(t){return arguments.length?this.each(t==null?Iy:(typeof t=="function"?Oy:Py)(t)):this.node().innerHTML}function By(){this.nextSibling&&this.parentNode.appendChild(this)}function zy(){return this.each(By)}function qy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yy(){return this.each(qy)}function Wy(t){var e=typeof t=="function"?t:fa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Hy(){return null}function Gy(t,e){var n=typeof t=="function"?t:fa(t),r=e==null?Hy:typeof e=="function"?e:Nc(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Vy(){var t=this.parentNode;t&&t.removeChild(this)}function Xy(){return this.each(Vy)}function jy(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zy(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ky(t){return this.select(t?Zy:jy)}function Qy(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Jy(t){return function(e){t.call(this,e,this.__data__)}}function tb(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function eb(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function nb(t,e,n){return function(){var r=this.__on,i,o=Jy(e);if(r){for(var a=0,f=r.length;a<f;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function rb(t,e,n){var r=tb(t+""),i,o=r.length,a;if(arguments.length<2){var f=this.node().__on;if(f){for(var c=0,s=f.length,u;c<s;++c)for(i=0,u=f[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(f=e?nb:eb,i=0;i<o;++i)this.each(f(r[i],e,n));return this}function Ph(t,e,n){var r=Dh(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ib(t,e){return function(){return Ph(this,t,e)}}function ob(t,e){return function(){return Ph(this,t,e.apply(this,arguments))}}function ab(t,e){return this.each((typeof e=="function"?ob:ib)(t,e))}function*fb(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Oh=[null];function jt(t,e){this._groups=t,this._parents=e}function Mi(){return new jt([[document.documentElement]],Oh)}function cb(){return this}jt.prototype=Mi.prototype={constructor:jt,select:R2,selectAll:O2,selectChild:q2,selectChildren:G2,filter:V2,data:J2,enter:X2,exit:ey,join:ny,merge:ry,selection:cb,order:iy,sort:oy,call:fy,nodes:cy,node:sy,size:uy,empty:ly,each:hy,attr:_y,style:My,property:ky,classed:Ny,text:Fy,html:Uy,raise:zy,lower:Yy,append:Wy,insert:Gy,remove:Xy,clone:Ky,datum:Qy,on:rb,dispatch:ab,[Symbol.iterator]:fb};function Qr(t){return typeof t=="string"?new jt([[document.querySelector(t)]],[document.documentElement]):new jt([[t]],Oh)}function sb(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ub(t,e){if(t=sb(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function kr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function hn(){}var Dn=.7,pr=1/Dn,fr="\\s*([+-]?\\d+)\\s*",ci="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lb=/^#([0-9a-f]{3,8})$/,hb=new RegExp(`^rgb\\(${fr},${fr},${fr}\\)$`),db=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),pb=new RegExp(`^rgba\\(${fr},${fr},${fr},${ci}\\)$`),gb=new RegExp(`^rgba\\(${$e},${$e},${$e},${ci}\\)$`),mb=new RegExp(`^hsl\\(${ci},${$e},${$e}\\)$`),yb=new RegExp(`^hsla\\(${ci},${$e},${$e},${ci}\\)$`),Vs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kr(hn,Ln,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Xs,formatHex:Xs,formatHex8:bb,formatHsl:_b,formatRgb:js,toString:js});function Xs(){return this.rgb().formatHex()}function bb(){return this.rgb().formatHex8()}function _b(){return Uh(this).formatHsl()}function js(){return this.rgb().formatRgb()}function Ln(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=lb.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Zs(e):n===3?new Et(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Gi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=hb.exec(t))?new Et(e[1],e[2],e[3],1):(e=db.exec(t))?new Et(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=pb.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=gb.exec(t))?Gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mb.exec(t))?Js(e[1],e[2]/100,e[3]/100,1):(e=yb.exec(t))?Js(e[1],e[2]/100,e[3]/100,e[4]):Vs.hasOwnProperty(t)?Zs(Vs[t]):t==="transparent"?new Et(NaN,NaN,NaN,0):null}function Zs(t){return new Et(t>>16&255,t>>8&255,t&255,1)}function Gi(t,e,n,r){return r<=0&&(t=e=n=NaN),new Et(t,e,n,r)}function Lc(t){return t instanceof hn||(t=Ln(t)),t?(t=t.rgb(),new Et(t.r,t.g,t.b,t.opacity)):new Et}function cn(t,e,n,r){return arguments.length===1?Lc(t):new Et(t,e,n,r??1)}function Et(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}kr(Et,cn,$i(hn,{brighter(t){return t=t==null?pr:Math.pow(pr,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Dn:Math.pow(Dn,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Et(kn(this.r),kn(this.g),kn(this.b),Mo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ks,formatHex:Ks,formatHex8:wb,formatRgb:Qs,toString:Qs}));function Ks(){return`#${Mn(this.r)}${Mn(this.g)}${Mn(this.b)}`}function wb(){return`#${Mn(this.r)}${Mn(this.g)}${Mn(this.b)}${Mn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qs(){const t=Mo(this.opacity);return`${t===1?"rgb(":"rgba("}${kn(this.r)}, ${kn(this.g)}, ${kn(this.b)}${t===1?")":`, ${t})`}`}function Mo(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function kn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mn(t){return t=kn(t),(t<16?"0":"")+t.toString(16)}function Js(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ce(t,e,n,r)}function Uh(t){if(t instanceof ce)return new ce(t.h,t.s,t.l,t.opacity);if(t instanceof hn||(t=Ln(t)),!t)return new ce;if(t instanceof ce)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,f=o-i,c=(o+i)/2;return f?(e===o?a=(n-r)/f+(n<r)*6:n===o?a=(r-e)/f+2:a=(e-n)/f+4,f/=c<.5?o+i:2-o-i,a*=60):f=c>0&&c<1?0:a,new ce(a,f,c,t.opacity)}function Of(t,e,n,r){return arguments.length===1?Uh(t):new ce(t,e,n,r??1)}function ce(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}kr(ce,Of,$i(hn,{brighter(t){return t=t==null?pr:Math.pow(pr,t),new ce(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Dn:Math.pow(Dn,t),new ce(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Et(Xa(t>=240?t-240:t+120,i,r),Xa(t,i,r),Xa(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ce(tu(this.h),Vi(this.s),Vi(this.l),Mo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mo(this.opacity);return`${t===1?"hsl(":"hsla("}${tu(this.h)}, ${Vi(this.s)*100}%, ${Vi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function tu(t){return t=(t||0)%360,t<0?t+360:t}function Vi(t){return Math.max(0,Math.min(1,t||0))}function Xa(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Bh=Math.PI/180,zh=180/Math.PI,$o=18,qh=.96422,Yh=1,Wh=.82521,Hh=4/29,cr=6/29,Gh=3*cr*cr,vb=cr*cr*cr;function Vh(t){if(t instanceof Se)return new Se(t.l,t.a,t.b,t.opacity);if(t instanceof Be)return Xh(t);t instanceof Et||(t=Lc(t));var e=Qa(t.r),n=Qa(t.g),r=Qa(t.b),i=ja((.2225045*e+.7168786*n+.0606169*r)/Yh),o,a;return e===n&&n===r?o=a=i:(o=ja((.4360747*e+.3850649*n+.1430804*r)/qh),a=ja((.0139322*e+.0971045*n+.7141733*r)/Wh)),new Se(116*i-16,500*(o-i),200*(i-a),t.opacity)}function Uf(t,e,n,r){return arguments.length===1?Vh(t):new Se(t,e,n,r??1)}function Se(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}kr(Se,Uf,$i(hn,{brighter(t){return new Se(this.l+$o*(t??1),this.a,this.b,this.opacity)},darker(t){return new Se(this.l-$o*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=qh*Za(e),t=Yh*Za(t),n=Wh*Za(n),new Et(Ka(3.1338561*e-1.6168667*t-.4906146*n),Ka(-.9787684*e+1.9161415*t+.033454*n),Ka(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function ja(t){return t>vb?Math.pow(t,1/3):t/Gh+Hh}function Za(t){return t>cr?t*t*t:Gh*(t-Hh)}function Ka(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Qa(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function xb(t){if(t instanceof Be)return new Be(t.h,t.c,t.l,t.opacity);if(t instanceof Se||(t=Vh(t)),t.a===0&&t.b===0)return new Be(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*zh;return new Be(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Bf(t,e,n,r){return arguments.length===1?xb(t):new Be(t,e,n,r??1)}function Be(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Xh(t){if(isNaN(t.h))return new Se(t.l,0,0,t.opacity);var e=t.h*Bh;return new Se(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}kr(Be,Bf,$i(hn,{brighter(t){return new Be(this.h,this.c,this.l+$o*(t??1),this.opacity)},darker(t){return new Be(this.h,this.c,this.l-$o*(t??1),this.opacity)},rgb(){return Xh(this).rgb()}}));var jh=-.14861,Rc=1.78277,Fc=-.29227,ca=-.90649,si=1.97294,eu=si*ca,nu=si*Rc,ru=Rc*Fc-ca*jh;function Mb(t){if(t instanceof En)return new En(t.h,t.s,t.l,t.opacity);t instanceof Et||(t=Lc(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(ru*r+eu*e-nu*n)/(ru+eu-nu),o=r-i,a=(si*(n-i)-Fc*o)/ca,f=Math.sqrt(a*a+o*o)/(si*i*(1-i)),c=f?Math.atan2(a,o)*zh-120:NaN;return new En(c<0?c+360:c,f,i,t.opacity)}function Te(t,e,n,r){return arguments.length===1?Mb(t):new En(t,e,n,r??1)}function En(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}kr(En,Te,$i(hn,{brighter(t){return t=t==null?pr:Math.pow(pr,t),new En(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Dn:Math.pow(Dn,t),new En(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Bh,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Et(255*(e+n*(jh*r+Rc*i)),255*(e+n*(Fc*r+ca*i)),255*(e+n*(si*r)),this.opacity)}}));function $b(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function Sb(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,f=r<e-1?t[r+2]:2*o-i;return $b((n-r/e)*e,a,i,o,f)}}const sa=t=>()=>t;function Zh(t,e){return function(n){return t+n*e}}function Tb(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ic(t,e){var n=e-t;return n?Zh(t,n>180||n<-180?n-360*Math.round(n/360):n):sa(isNaN(t)?e:t)}function kb(t){return(t=+t)==1?It:function(e,n){return n-e?Tb(e,n,t):sa(isNaN(e)?n:e)}}function It(t,e){var n=e-t;return n?Zh(t,n):sa(isNaN(t)?e:t)}const Rn=function t(e){var n=kb(e);function r(i,o){var a=n((i=cn(i)).r,(o=cn(o)).r),f=n(i.g,o.g),c=n(i.b,o.b),s=It(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=f(u),i.b=c(u),i.opacity=s(u),i+""}}return r.gamma=t,r}(1);function Eb(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a,f;for(a=0;a<n;++a)f=cn(e[a]),r[a]=f.r||0,i[a]=f.g||0,o[a]=f.b||0;return r=t(r),i=t(i),o=t(o),f.opacity=1,function(c){return f.r=r(c),f.g=i(c),f.b=o(c),f+""}}}var Ab=Eb(Sb);function Cb(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Nb(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Db(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Si(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(f){for(a=0;a<r;++a)o[a]=i[a](f);return o}}function Lb(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Lt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Rb(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Si(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var zf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ja=new RegExp(zf.source,"g");function Fb(t){return function(){return t}}function Ib(t){return function(e){return t(e)+""}}function Kh(t,e){var n=zf.lastIndex=Ja.lastIndex=0,r,i,o,a=-1,f=[],c=[];for(t=t+"",e=e+"";(r=zf.exec(t))&&(i=Ja.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),f[a]?f[a]+=o:f[++a]=o),(r=r[0])===(i=i[0])?f[a]?f[a]+=i:f[++a]=i:(f[++a]=null,c.push({i:a,x:Lt(r,i)})),n=Ja.lastIndex;return n<e.length&&(o=e.slice(n),f[a]?f[a]+=o:f[++a]=o),f.length<2?c[0]?Ib(c[0].x):Fb(e):(e=c.length,function(s){for(var u=0,h;u<e;++u)f[(h=c[u]).i]=h.x(s);return f.join("")})}function Si(t,e){var n=typeof e,r;return e==null||n==="boolean"?sa(e):(n==="number"?Lt:n==="string"?(r=Ln(e))?(e=r,Rn):Kh:e instanceof Ln?Rn:e instanceof Date?Lb:Nb(e)?Cb:Array.isArray(e)?Db:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Rb:Lt)(t,e)}function Pc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var iu=180/Math.PI,qf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qh(t,e,n,r,i,o){var a,f,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(f=Math.sqrt(n*n+r*r))&&(n/=f,r/=f,c/=f),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*iu,skewX:Math.atan(c)*iu,scaleX:a,scaleY:f}}var Xi;function Pb(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?qf:Qh(e.a,e.b,e.c,e.d,e.e,e.f)}function Ob(t){return t==null||(Xi||(Xi=document.createElementNS("http://www.w3.org/2000/svg","g")),Xi.setAttribute("transform",t),!(t=Xi.transform.baseVal.consolidate()))?qf:(t=t.matrix,Qh(t.a,t.b,t.c,t.d,t.e,t.f))}function Jh(t,e,n,r){function i(s){return s.length?s.pop()+" ":""}function o(s,u,h,l,d,p){if(s!==h||u!==l){var g=d.push("translate(",null,e,null,n);p.push({i:g-4,x:Lt(s,h)},{i:g-2,x:Lt(u,l)})}else(h||l)&&d.push("translate("+h+e+l+n)}function a(s,u,h,l){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),l.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Lt(s,u)})):u&&h.push(i(h)+"rotate("+u+r)}function f(s,u,h,l){s!==u?l.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Lt(s,u)}):u&&h.push(i(h)+"skewX("+u+r)}function c(s,u,h,l,d,p){if(s!==h||u!==l){var g=d.push(i(d)+"scale(",null,",",null,")");p.push({i:g-4,x:Lt(s,h)},{i:g-2,x:Lt(u,l)})}else(h!==1||l!==1)&&d.push(i(d)+"scale("+h+","+l+")")}return function(s,u){var h=[],l=[];return s=t(s),u=t(u),o(s.translateX,s.translateY,u.translateX,u.translateY,h,l),a(s.rotate,u.rotate,h,l),f(s.skewX,u.skewX,h,l),c(s.scaleX,s.scaleY,u.scaleX,u.scaleY,h,l),s=u=null,function(d){for(var p=-1,g=l.length,m;++p<g;)h[(m=l[p]).i]=m.x(d);return h.join("")}}}var Ub=Jh(Pb,"px, ","px)","deg)"),Bb=Jh(Ob,", ",")",")");function zb(t){return function(e,n){var r=t((e=Of(e)).h,(n=Of(n)).h),i=It(e.s,n.s),o=It(e.l,n.l),a=It(e.opacity,n.opacity);return function(f){return e.h=r(f),e.s=i(f),e.l=o(f),e.opacity=a(f),e+""}}}const qb=zb(Ic);function Yb(t,e){var n=It((t=Uf(t)).l,(e=Uf(e)).l),r=It(t.a,e.a),i=It(t.b,e.b),o=It(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=r(a),t.b=i(a),t.opacity=o(a),t+""}}function Wb(t){return function(e,n){var r=t((e=Bf(e)).h,(n=Bf(n)).h),i=It(e.c,n.c),o=It(e.l,n.l),a=It(e.opacity,n.opacity);return function(f){return e.h=r(f),e.c=i(f),e.l=o(f),e.opacity=a(f),e+""}}}const Hb=Wb(Ic);function td(t){return function e(n){n=+n;function r(i,o){var a=t((i=Te(i)).h,(o=Te(o)).h),f=It(i.s,o.s),c=It(i.l,o.l),s=It(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=f(u),i.l=c(Math.pow(u,n)),i.opacity=s(u),i+""}}return r.gamma=e,r}(1)}td(Ic);var Oc=td(It);function ua(t,e){e===void 0&&(e=t,t=Si);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var f=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[f](a-f)}}function le(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var gr=0,Yr=0,Pr=0,ed=1e3,So,Wr,To=0,Fn=0,la=0,ui=typeof performance=="object"&&performance.now?performance:Date,nd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Uc(){return Fn||(nd(Gb),Fn=ui.now()+la)}function Gb(){Fn=0}function ko(){this._call=this._time=this._next=null}ko.prototype=rd.prototype={constructor:ko,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Uc():+n)+(e==null?0:+e),!this._next&&Wr!==this&&(Wr?Wr._next=this:So=this,Wr=this),this._call=t,this._time=n,Yf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yf())}};function rd(t,e,n){var r=new ko;return r.restart(t,e,n),r}function Vb(){Uc(),++gr;for(var t=So,e;t;)(e=Fn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gr}function ou(){Fn=(To=ui.now())+la,gr=Yr=0;try{Vb()}finally{gr=0,jb(),Fn=0}}function Xb(){var t=ui.now(),e=t-To;e>ed&&(la-=e,To=t)}function jb(){for(var t,e=So,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:So=n);Wr=t,Yf(r)}function Yf(t){if(!gr){Yr&&(Yr=clearTimeout(Yr));var e=t-Fn;e>24?(t<1/0&&(Yr=setTimeout(ou,t-ui.now()-la)),Pr&&(Pr=clearInterval(Pr))):(Pr||(To=ui.now(),Pr=setInterval(Xb,ed)),gr=1,nd(ou))}}function au(t,e,n){var r=new ko;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Zb=kh("start","end","cancel","interrupt"),Kb=[],id=0,fu=1,Wf=2,ho=3,cu=4,Hf=5,po=6;function ha(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Qb(t,n,{name:e,index:r,group:i,on:Zb,tween:Kb,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:id})}function Bc(t,e){var n=ge(t,e);if(n.state>id)throw new Error("too late; already scheduled");return n}function Ce(t,e){var n=ge(t,e);if(n.state>ho)throw new Error("too late; already running");return n}function ge(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Qb(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=rd(o,0,n.time);function o(s){n.state=fu,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,h,l,d;if(n.state!==fu)return c();for(u in r)if(d=r[u],d.name===n.name){if(d.state===ho)return au(a);d.state===cu?(d.state=po,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=po,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(au(function(){n.state===ho&&(n.state=cu,n.timer.restart(f,n.delay,n.time),f(s))}),n.state=Wf,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Wf){for(n.state=ho,i=new Array(l=n.tween.length),u=0,h=-1;u<l;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function f(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(c),n.state=Hf,1),h=-1,l=i.length;++h<l;)i[h].call(t,u);n.state===Hf&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=po,n.timer.stop(),delete r[e];for(var s in r)return;delete t.__transition}}function Jb(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>Wf&&r.state<Hf,r.state=po,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function t_(t){return this.each(function(){Jb(this,t)})}function e_(t,e){var n,r;return function(){var i=Ce(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,f=r.length;a<f;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function n_(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ce(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var f={name:e,value:n},c=0,s=i.length;c<s;++c)if(i[c].name===e){i[c]=f;break}c===s&&i.push(f)}o.tween=i}}function r_(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ge(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?e_:n_)(n,t,e))}function zc(t,e,n){var r=t._id;return t.each(function(){var i=Ce(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return ge(i,r).value[e]}}function od(t,e){var n;return(typeof e=="number"?Lt:e instanceof Ln?Rn:(n=Ln(e))?(e=n,Rn):Kh)(t,e)}function i_(t){return function(){this.removeAttribute(t)}}function o_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function a_(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function f_(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function c_(t,e,n){var r,i,o;return function(){var a,f=n(this),c;return f==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=f+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,f)))}}function s_(t,e,n){var r,i,o;return function(){var a,f=n(this),c;return f==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=f+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,f)))}}function u_(t,e){var n=aa(t),r=n==="transform"?Bb:od;return this.attrTween(t,typeof e=="function"?(n.local?s_:c_)(n,r,zc(this,"attr."+t,e)):e==null?(n.local?o_:i_)(n):(n.local?f_:a_)(n,r,e))}function l_(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function h_(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function d_(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&h_(t,o)),n}return i._value=e,i}function p_(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&l_(t,o)),n}return i._value=e,i}function g_(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=aa(t);return this.tween(n,(r.local?d_:p_)(r,e))}function m_(t,e){return function(){Bc(this,t).delay=+e.apply(this,arguments)}}function y_(t,e){return e=+e,function(){Bc(this,t).delay=e}}function b_(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?m_:y_)(e,t)):ge(this.node(),e).delay}function __(t,e){return function(){Ce(this,t).duration=+e.apply(this,arguments)}}function w_(t,e){return e=+e,function(){Ce(this,t).duration=e}}function v_(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?__:w_)(e,t)):ge(this.node(),e).duration}function x_(t,e){if(typeof e!="function")throw new Error;return function(){Ce(this,t).ease=e}}function M_(t){var e=this._id;return arguments.length?this.each(x_(e,t)):ge(this.node(),e).ease}function $_(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ce(this,t).ease=n}}function S_(t){if(typeof t!="function")throw new Error;return this.each($_(this._id,t))}function T_(t){typeof t!="function"&&(t=Ah(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,f=r[i]=[],c,s=0;s<a;++s)(c=o[s])&&t.call(c,c.__data__,s,o)&&f.push(c);return new We(r,this._parents,this._name,this._id)}function k_(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),f=0;f<o;++f)for(var c=e[f],s=n[f],u=c.length,h=a[f]=new Array(u),l,d=0;d<u;++d)(l=c[d]||s[d])&&(h[d]=l);for(;f<r;++f)a[f]=e[f];return new We(a,this._parents,this._name,this._id)}function E_(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function A_(t,e,n){var r,i,o=E_(e)?Bc:Ce;return function(){var a=o(this,t),f=a.on;f!==r&&(i=(r=f).copy()).on(e,n),a.on=i}}function C_(t,e){var n=this._id;return arguments.length<2?ge(this.node(),n).on.on(t):this.each(A_(n,t,e))}function N_(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function D_(){return this.on("end.remove",N_(this._id))}function L_(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Nc(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var f=r[a],c=f.length,s=o[a]=new Array(c),u,h,l=0;l<c;++l)(u=f[l])&&(h=t.call(u,u.__data__,l,f))&&("__data__"in u&&(h.__data__=u.__data__),s[l]=h,ha(s[l],e,n,l,s,ge(u,n)));return new We(o,this._parents,e,n)}function R_(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Eh(t));for(var r=this._groups,i=r.length,o=[],a=[],f=0;f<i;++f)for(var c=r[f],s=c.length,u,h=0;h<s;++h)if(u=c[h]){for(var l=t.call(u,u.__data__,h,c),d,p=ge(u,n),g=0,m=l.length;g<m;++g)(d=l[g])&&ha(d,e,n,g,l,p);o.push(l),a.push(u)}return new We(o,a,e,n)}var F_=Mi.prototype.constructor;function I_(){return new F_(this._groups,this._parents)}function P_(t,e){var n,r,i;return function(){var o=dr(this,t),a=(this.style.removeProperty(t),dr(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function ad(t){return function(){this.style.removeProperty(t)}}function O_(t,e,n){var r,i=n+"",o;return function(){var a=dr(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function U_(t,e,n){var r,i,o;return function(){var a=dr(this,t),f=n(this),c=f+"";return f==null&&(c=f=(this.style.removeProperty(t),dr(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,f))}}function B_(t,e){var n,r,i,o="style."+e,a="end."+o,f;return function(){var c=Ce(this,t),s=c.on,u=c.value[o]==null?f||(f=ad(e)):void 0;(s!==n||i!==u)&&(r=(n=s).copy()).on(a,i=u),c.on=r}}function z_(t,e,n){var r=(t+="")=="transform"?Ub:od;return e==null?this.styleTween(t,P_(t,r)).on("end.style."+t,ad(t)):typeof e=="function"?this.styleTween(t,U_(t,r,zc(this,"style."+t,e))).each(B_(this._id,t)):this.styleTween(t,O_(t,r,e),n).on("end.style."+t,null)}function q_(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Y_(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&q_(t,a,n)),r}return o._value=e,o}function W_(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Y_(t,e,n??""))}function H_(t){return function(){this.textContent=t}}function G_(t){return function(){var e=t(this);this.textContent=e??""}}function V_(t){return this.tween("text",typeof t=="function"?G_(zc(this,"text",t)):H_(t==null?"":t+""))}function X_(t){return function(e){this.textContent=t.call(this,e)}}function j_(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&X_(i)),e}return r._value=t,r}function Z_(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,j_(t))}function K_(){for(var t=this._name,e=this._id,n=fd(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,c,s=0;s<f;++s)if(c=a[s]){var u=ge(c,e);ha(c,t,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new We(r,this._parents,t,n)}function Q_(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var f={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var s=Ce(this,r),u=s.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(c)),s.on=e}),i===0&&o()})}var J_=0;function We(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function fd(){return++J_}var Le=Mi.prototype;We.prototype={constructor:We,select:L_,selectAll:R_,selectChild:Le.selectChild,selectChildren:Le.selectChildren,filter:T_,merge:k_,selection:I_,transition:K_,call:Le.call,nodes:Le.nodes,node:Le.node,size:Le.size,empty:Le.empty,each:Le.each,on:C_,attr:u_,attrTween:g_,style:z_,styleTween:W_,text:V_,textTween:Z_,remove:D_,tween:r_,delay:b_,duration:v_,ease:M_,easeVarying:S_,end:Q_,[Symbol.iterator]:Le[Symbol.iterator]};function tw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ew={time:null,delay:0,duration:250,ease:tw};function nw(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function rw(t){var e,n;t instanceof We?(e=t._id,t=t._name):(e=fd(),(n=ew).time=Uc(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,c,s=0;s<f;++s)(c=a[s])&&ha(c,t,e,s,a,n||nw(c,e));return new We(r,this._parents,t,e)}Mi.prototype.interrupt=t_;Mi.prototype.transition=rw;const Gf=Math.PI,Vf=2*Gf,wn=1e-6,iw=Vf-wn;function cd(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ow(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return cd;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class sd{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?cd:ow(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,f=this._y1,c=r-e,s=i-n,u=a-e,h=f-n,l=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(l>wn)if(!(Math.abs(h*c-s*u)>wn)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,p=i-f,g=c*c+s*s,m=d*d+p*p,_=Math.sqrt(g),y=Math.sqrt(l),v=o*Math.tan((Gf-Math.acos((g+l-m)/(2*_*y)))/2),b=v/y,w=v/_;Math.abs(b-1)>wn&&this._append`L${e+b*u},${n+b*h}`,this._append`A${o},${o},0,0,${+(h*d>u*p)},${this._x1=e+w*c},${this._y1=n+w*s}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),c=r*Math.sin(i),s=e+f,u=n+c,h=1^a,l=a?i-o:o-i;this._x1===null?this._append`M${s},${u}`:(Math.abs(this._x1-s)>wn||Math.abs(this._y1-u)>wn)&&this._append`L${s},${u}`,r&&(l<0&&(l=l%Vf+Vf),l>iw?this._append`A${r},${r},0,1,${h},${e-f},${n-c}A${r},${r},0,1,${h},${this._x1=s},${this._y1=u}`:l>wn&&this._append`A${r},${r},0,${+(l>=Gf)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Xf(t=3){return new sd(+t)}function aw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Eo(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function mr(t){return t=Eo(Math.abs(t)),t?t[1]:NaN}function fw(t,e){return function(n,r){for(var i=n.length,o=[],a=0,f=t[0],c=0;i>0&&f>0&&(c+f+1>r&&(f=Math.max(1,r-c)),o.push(n.substring(i-=f,i+f)),!((c+=f+1)>r));)f=t[a=(a+1)%t.length];return o.reverse().join(e)}}function cw(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var sw=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function li(t){if(!(e=sw.exec(t)))throw new Error("invalid format: "+t);var e;return new qc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}li.prototype=qc.prototype;function qc(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}qc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function uw(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ud;function lw(t,e){var n=Eo(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(ud=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Eo(t,Math.max(0,e+o-1))[0]}function su(t,e){var n=Eo(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const uu={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:aw,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>su(t*100,e),r:su,s:lw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function lu(t){return t}var hu=Array.prototype.map,du=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hw(t){var e=t.grouping===void 0||t.thousands===void 0?lu:fw(hu.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?lu:cw(hu.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function s(h){h=li(h);var l=h.fill,d=h.align,p=h.sign,g=h.symbol,m=h.zero,_=h.width,y=h.comma,v=h.precision,b=h.trim,w=h.type;w==="n"?(y=!0,w="g"):uu[w]||(v===void 0&&(v=12),b=!0,w="g"),(m||l==="0"&&d==="=")&&(m=!0,l="0",d="=");var x=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",$=g==="$"?r:/[%p]/.test(w)?a:"",E=uu[w],k=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function A(M){var L=x,F=$,O,S,U;if(w==="c")F=E(M)+F,M="";else{M=+M;var R=M<0||1/M<0;if(M=isNaN(M)?c:E(Math.abs(M),v),b&&(M=uw(M)),R&&+M==0&&p!=="+"&&(R=!1),L=(R?p==="("?p:f:p==="-"||p==="("?"":p)+L,F=(w==="s"?du[8+ud/3]:"")+F+(R&&p==="("?")":""),k){for(O=-1,S=M.length;++O<S;)if(U=M.charCodeAt(O),48>U||U>57){F=(U===46?i+M.slice(O+1):M.slice(O))+F,M=M.slice(0,O);break}}}y&&!m&&(M=e(M,1/0));var Y=L.length+M.length+F.length,P=Y<_?new Array(_-Y+1).join(l):"";switch(y&&m&&(M=e(P+M,P.length?_-F.length:1/0),P=""),d){case"<":M=L+M+F+P;break;case"=":M=L+P+M+F;break;case"^":M=P.slice(0,Y=P.length>>1)+L+M+F+P.slice(Y);break;default:M=P+L+M+F;break}return o(M)}return A.toString=function(){return h+""},A}function u(h,l){var d=s((h=li(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(mr(l)/3)))*3,g=Math.pow(10,-p),m=du[8+p/3];return function(_){return d(g*_)+m}}return{format:s,formatPrefix:u}}var ji,Er,ld;dw({thousands:",",grouping:[3],currency:["$",""]});function dw(t){return ji=hw(t),Er=ji.format,ld=ji.formatPrefix,ji}function pw(t){return Math.max(0,-mr(Math.abs(t)))}function gw(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mr(e)/3)))*3-mr(Math.abs(t)))}function mw(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,mr(e)-mr(t))+1}var tt=1e-6,hd=1e-12,rt=Math.PI,vt=rt/2,pu=rt/4,Zt=rt*2,Ut=180/rt,wt=rt/180,ht=Math.abs,Ar=Math.atan,He=Math.atan2,nt=Math.cos,dd=Math.exp,Ao=Math.log,tf=Math.pow,Q=Math.sin,ee=Math.sign||function(t){return t>0?1:t<0?-1:0},Ht=Math.sqrt,Yc=Math.tan;function pd(t){return t>1?0:t<-1?rt:Math.acos(t)}function oe(t){return t>1?vt:t<-1?-vt:Math.asin(t)}function ne(){}function Co(t,e){t&&mu.hasOwnProperty(t.type)&&mu[t.type](t,e)}var gu={Feature:function(t,e){Co(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Co(n[r].geometry,e)}},mu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){jf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)jf(n[r],e,0)},Polygon:function(t,e){yu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)yu(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Co(n[r],e)}};function jf(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function yu(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)jf(t[n],e,1);e.polygonEnd()}function vn(t,e){t&&gu.hasOwnProperty(t.type)?gu[t.type](t,e):Co(t,e)}function Zf(t){return[He(t[1],t[0]),oe(t[2])]}function yr(t){var e=t[0],n=t[1],r=nt(n);return[r*nt(e),r*Q(e),Q(n)]}function Zi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function No(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ef(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ki(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Kf(t){var e=Ht(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Qf(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function Jf(t,e){return ht(t)>rt&&(t-=Math.round(t/Zt)*Zt),[t,e]}Jf.invert=Jf;function gd(t,e,n){return(t%=Zt)?e||n?Qf(_u(t),wu(e,n)):_u(t):e||n?wu(e,n):Jf}function bu(t){return function(e,n){return e+=t,ht(e)>rt&&(e-=Math.round(e/Zt)*Zt),[e,n]}}function _u(t){var e=bu(t);return e.invert=bu(-t),e}function wu(t,e){var n=nt(t),r=Q(t),i=nt(e),o=Q(e);function a(f,c){var s=nt(c),u=nt(f)*s,h=Q(f)*s,l=Q(c),d=l*n+u*r;return[He(h*i-d*o,u*n-l*r),oe(d*i+h*o)]}return a.invert=function(f,c){var s=nt(c),u=nt(f)*s,h=Q(f)*s,l=Q(c),d=l*i-h*o;return[He(h*i+l*o,u*n+d*r),oe(d*n-u*r)]},a}function yw(t){t=gd(t[0]*wt,t[1]*wt,t.length>2?t[2]*wt:0);function e(n){return n=t(n[0]*wt,n[1]*wt),n[0]*=Ut,n[1]*=Ut,n}return e.invert=function(n){return n=t.invert(n[0]*wt,n[1]*wt),n[0]*=Ut,n[1]*=Ut,n},e}function bw(t,e,n,r,i,o){if(n){var a=nt(e),f=Q(e),c=r*n;i==null?(i=e+r*Zt,o=e-c/2):(i=vu(a,i),o=vu(a,o),(r>0?i<o:i>o)&&(i+=r*Zt));for(var s,u=i;r>0?u>o:u<o;u-=c)s=Zf([a,-f*nt(u),-f*Q(u)]),t.point(s[0],s[1])}}function vu(t,e){e=yr(e),e[0]-=t,Kf(e);var n=pd(-e[1]);return((-e[2]<0?-n:n)+Zt-tt)%Zt}function md(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:ne,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function go(t,e){return ht(t[0]-e[0])<tt&&ht(t[1]-e[1])<tt}function Qi(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function yd(t,e,n,r,i){var o=[],a=[],f,c;if(t.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],_=p[g],y;if(go(m,_)){if(!m[2]&&!_[2]){for(i.lineStart(),f=0;f<g;++f)i.point((m=p[f])[0],m[1]);i.lineEnd();return}_[0]+=2*tt}o.push(y=new Qi(m,p,null,!0)),a.push(y.o=new Qi(m,null,y,!1)),o.push(y=new Qi(_,p,null,!1)),a.push(y.o=new Qi(_,null,y,!0))}}),!!o.length){for(a.sort(e),xu(o),xu(a),f=0,c=a.length;f<c;++f)a[f].e=n=!n;for(var s=o[0],u,h;;){for(var l=s,d=!0;l.v;)if((l=l.n)===s)return;u=l.z,i.lineStart();do{if(l.v=l.o.v=!0,l.e){if(d)for(f=0,c=u.length;f<c;++f)i.point((h=u[f])[0],h[1]);else r(l.x,l.n.x,1,i);l=l.n}else{if(d)for(u=l.p.z,f=u.length-1;f>=0;--f)i.point((h=u[f])[0],h[1]);else r(l.x,l.p.x,-1,i);l=l.p}l=l.o,u=l.z,d=!d}while(!l.v);i.lineEnd()}}}function xu(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function nf(t){return ht(t[0])<=rt?t[0]:ee(t[0])*((ht(t[0])+rt)%Zt-rt)}function _w(t,e){var n=nf(e),r=e[1],i=Q(r),o=[Q(n),-nt(n),0],a=0,f=0,c=new Cn;i===1?r=vt+tt:i===-1&&(r=-vt-tt);for(var s=0,u=t.length;s<u;++s)if(l=(h=t[s]).length)for(var h,l,d=h[l-1],p=nf(d),g=d[1]/2+pu,m=Q(g),_=nt(g),y=0;y<l;++y,p=b,m=x,_=$,d=v){var v=h[y],b=nf(v),w=v[1]/2+pu,x=Q(w),$=nt(w),E=b-p,k=E>=0?1:-1,A=k*E,M=A>rt,L=m*x;if(c.add(He(L*k*Q(A),_*$+L*nt(A))),a+=M?E+k*Zt:E,M^p>=n^b>=n){var F=No(yr(d),yr(v));Kf(F);var O=No(o,F);Kf(O);var S=(M^E>=0?-1:1)*oe(O[2]);(r>S||r===S&&(F[0]||F[1]))&&(f+=M^E>=0?1:-1)}}return(a<-tt||a<tt&&c<-hd)^f&1}function bd(t,e,n,r){return function(i){var o=e(i),a=md(),f=e(a),c=!1,s,u,h,l={point:d,lineStart:g,lineEnd:m,polygonStart:function(){l.point=_,l.lineStart=y,l.lineEnd=v,u=[],s=[]},polygonEnd:function(){l.point=d,l.lineStart=g,l.lineEnd=m,u=Th(u);var b=_w(s,r);u.length?(c||(i.polygonStart(),c=!0),yd(u,vw,b,n,i)):b&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=s=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(b,w){t(b,w)&&i.point(b,w)}function p(b,w){o.point(b,w)}function g(){l.point=p,o.lineStart()}function m(){l.point=d,o.lineEnd()}function _(b,w){h.push([b,w]),f.point(b,w)}function y(){f.lineStart(),h=[]}function v(){_(h[0][0],h[0][1]),f.lineEnd();var b=f.clean(),w=a.result(),x,$=w.length,E,k,A;if(h.pop(),s.push(h),h=null,!!$){if(b&1){if(k=w[0],(E=k.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),x=0;x<E;++x)i.point((A=k[x])[0],A[1]);i.lineEnd()}return}$>1&&b&2&&w.push(w.pop().concat(w.shift())),u.push(w.filter(ww))}}return l}}function ww(t){return t.length>1}function vw(t,e){return((t=t.x)[0]<0?t[1]-vt-tt:vt-t[1])-((e=e.x)[0]<0?e[1]-vt-tt:vt-e[1])}const Mu=bd(function(){return!0},xw,$w,[-rt,-vt]);function xw(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var f=o>0?rt:-rt,c=ht(o-e);ht(c-rt)<tt?(t.point(e,n=(n+a)/2>0?vt:-vt),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(o,n),i=0):r!==f&&c>=rt&&(ht(e-r)<tt&&(e-=r*tt),ht(o-f)<tt&&(o-=f*tt),n=Mw(e,n,o,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),i=0),t.point(e=o,n=a),r=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function Mw(t,e,n,r){var i,o,a=Q(t-n);return ht(a)>tt?Ar((Q(e)*(o=nt(r))*Q(n)-Q(r)*(i=nt(e))*Q(t))/(i*o*a)):(e+r)/2}function $w(t,e,n,r){var i;if(t==null)i=n*vt,r.point(-rt,i),r.point(0,i),r.point(rt,i),r.point(rt,0),r.point(rt,-i),r.point(0,-i),r.point(-rt,-i),r.point(-rt,0),r.point(-rt,i);else if(ht(t[0]-e[0])>tt){var o=t[0]<e[0]?rt:-rt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Sw(t){var e=nt(t),n=6*wt,r=e>0,i=ht(e)>tt;function o(u,h,l,d){bw(d,t,n,l,u,h)}function a(u,h){return nt(u)*nt(h)>e}function f(u){var h,l,d,p,g;return{lineStart:function(){p=d=!1,g=1},point:function(m,_){var y=[m,_],v,b=a(m,_),w=r?b?0:s(m,_):b?s(m+(m<0?rt:-rt),_):0;if(!h&&(p=d=b)&&u.lineStart(),b!==d&&(v=c(h,y),(!v||go(h,v)||go(y,v))&&(y[2]=1)),b!==d)g=0,b?(u.lineStart(),v=c(y,h),u.point(v[0],v[1])):(v=c(h,y),u.point(v[0],v[1],2),u.lineEnd()),h=v;else if(i&&h&&r^b){var x;!(w&l)&&(x=c(y,h,!0))&&(g=0,r?(u.lineStart(),u.point(x[0][0],x[0][1]),u.point(x[1][0],x[1][1]),u.lineEnd()):(u.point(x[1][0],x[1][1]),u.lineEnd(),u.lineStart(),u.point(x[0][0],x[0][1],3)))}b&&(!h||!go(h,y))&&u.point(y[0],y[1]),h=y,d=b,l=w},lineEnd:function(){d&&u.lineEnd(),h=null},clean:function(){return g|(p&&d)<<1}}}function c(u,h,l){var d=yr(u),p=yr(h),g=[1,0,0],m=No(d,p),_=Zi(m,m),y=m[0],v=_-y*y;if(!v)return!l&&u;var b=e*_/v,w=-e*y/v,x=No(g,m),$=Ki(g,b),E=Ki(m,w);ef($,E);var k=x,A=Zi($,k),M=Zi(k,k),L=A*A-M*(Zi($,$)-1);if(!(L<0)){var F=Ht(L),O=Ki(k,(-A-F)/M);if(ef(O,$),O=Zf(O),!l)return O;var S=u[0],U=h[0],R=u[1],Y=h[1],P;U<S&&(P=S,S=U,U=P);var C=U-S,B=ht(C-rt)<tt,z=B||C<tt;if(!B&&Y<R&&(P=R,R=Y,Y=P),z?B?R+Y>0^O[1]<(ht(O[0]-S)<tt?R:Y):R<=O[1]&&O[1]<=Y:C>rt^(S<=O[0]&&O[0]<=U)){var W=Ki(k,(-A+F)/M);return ef(W,$),[O,Zf(W)]}}}function s(u,h){var l=r?t:rt-t,d=0;return u<-l?d|=1:u>l&&(d|=2),h<-l?d|=4:h>l&&(d|=8),d}return bd(a,f,o,r?[0,-t]:[-rt,t-rt])}function Tw(t,e,n,r,i,o){var a=t[0],f=t[1],c=e[0],s=e[1],u=0,h=1,l=c-a,d=s-f,p;if(p=n-a,!(!l&&p>0)){if(p/=l,l<0){if(p<u)return;p<h&&(h=p)}else if(l>0){if(p>h)return;p>u&&(u=p)}if(p=i-a,!(!l&&p<0)){if(p/=l,l<0){if(p>h)return;p>u&&(u=p)}else if(l>0){if(p<u)return;p<h&&(h=p)}if(p=r-f,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>u&&(u=p)}if(p=o-f,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<h&&(h=p)}return u>0&&(t[0]=a+u*l,t[1]=f+u*d),h<1&&(e[0]=a+h*l,e[1]=f+h*d),!0}}}}}var Hr=1e9,Ji=-Hr;function _d(t,e,n,r){function i(s,u){return t<=s&&s<=n&&e<=u&&u<=r}function o(s,u,h,l){var d=0,p=0;if(s==null||(d=a(s,h))!==(p=a(u,h))||c(s,u)<0^h>0)do l.point(d===0||d===3?t:n,d>1?r:e);while((d=(d+h+4)%4)!==p);else l.point(u[0],u[1])}function a(s,u){return ht(s[0]-t)<tt?u>0?0:3:ht(s[0]-n)<tt?u>0?2:1:ht(s[1]-e)<tt?u>0?1:0:u>0?3:2}function f(s,u){return c(s.x,u.x)}function c(s,u){var h=a(s,1),l=a(u,1);return h!==l?h-l:h===0?u[1]-s[1]:h===1?s[0]-u[0]:h===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,h=md(),l,d,p,g,m,_,y,v,b,w,x,$={point:E,lineStart:L,lineEnd:F,polygonStart:A,polygonEnd:M};function E(S,U){i(S,U)&&u.point(S,U)}function k(){for(var S=0,U=0,R=d.length;U<R;++U)for(var Y=d[U],P=1,C=Y.length,B=Y[0],z,W,J=B[0],Z=B[1];P<C;++P)z=J,W=Z,B=Y[P],J=B[0],Z=B[1],W<=r?Z>r&&(J-z)*(r-W)>(Z-W)*(t-z)&&++S:Z<=r&&(J-z)*(r-W)<(Z-W)*(t-z)&&--S;return S}function A(){u=h,l=[],d=[],x=!0}function M(){var S=k(),U=x&&S,R=(l=Th(l)).length;(U||R)&&(s.polygonStart(),U&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),R&&yd(l,f,S,o,s),s.polygonEnd()),u=s,l=d=p=null}function L(){$.point=O,d&&d.push(p=[]),w=!0,b=!1,y=v=NaN}function F(){l&&(O(g,m),_&&b&&h.rejoin(),l.push(h.result())),$.point=E,b&&u.lineEnd()}function O(S,U){var R=i(S,U);if(d&&p.push([S,U]),w)g=S,m=U,_=R,w=!1,R&&(u.lineStart(),u.point(S,U));else if(R&&b)u.point(S,U);else{var Y=[y=Math.max(Ji,Math.min(Hr,y)),v=Math.max(Ji,Math.min(Hr,v))],P=[S=Math.max(Ji,Math.min(Hr,S)),U=Math.max(Ji,Math.min(Hr,U))];Tw(Y,P,t,e,n,r)?(b||(u.lineStart(),u.point(Y[0],Y[1])),u.point(P[0],P[1]),R||u.lineEnd(),x=!1):R&&(u.lineStart(),u.point(S,U),x=!1)}y=S,v=U,b=R}return $}}const tc=t=>t;var rf=new Cn,ec=new Cn,wd,vd,nc,rc,en={point:ne,lineStart:ne,lineEnd:ne,polygonStart:function(){en.lineStart=kw,en.lineEnd=Aw},polygonEnd:function(){en.lineStart=en.lineEnd=en.point=ne,rf.add(ht(ec)),ec=new Cn},result:function(){var t=rf/2;return rf=new Cn,t}};function kw(){en.point=Ew}function Ew(t,e){en.point=xd,wd=nc=t,vd=rc=e}function xd(t,e){ec.add(rc*t-nc*e),nc=t,rc=e}function Aw(){xd(wd,vd)}const $u=en;var br=1/0,Do=br,hi=-br,Lo=hi,Cw={point:Nw,lineStart:ne,lineEnd:ne,polygonStart:ne,polygonEnd:ne,result:function(){var t=[[br,Do],[hi,Lo]];return hi=Lo=-(Do=br=1/0),t}};function Nw(t,e){t<br&&(br=t),t>hi&&(hi=t),e<Do&&(Do=e),e>Lo&&(Lo=e)}const Ro=Cw;var ic=0,oc=0,Gr=0,Fo=0,Io=0,nr=0,ac=0,fc=0,Vr=0,Md,$d,_e,we,se={point:In,lineStart:Su,lineEnd:Tu,polygonStart:function(){se.lineStart=Rw,se.lineEnd=Fw},polygonEnd:function(){se.point=In,se.lineStart=Su,se.lineEnd=Tu},result:function(){var t=Vr?[ac/Vr,fc/Vr]:nr?[Fo/nr,Io/nr]:Gr?[ic/Gr,oc/Gr]:[NaN,NaN];return ic=oc=Gr=Fo=Io=nr=ac=fc=Vr=0,t}};function In(t,e){ic+=t,oc+=e,++Gr}function Su(){se.point=Dw}function Dw(t,e){se.point=Lw,In(_e=t,we=e)}function Lw(t,e){var n=t-_e,r=e-we,i=Ht(n*n+r*r);Fo+=i*(_e+t)/2,Io+=i*(we+e)/2,nr+=i,In(_e=t,we=e)}function Tu(){se.point=In}function Rw(){se.point=Iw}function Fw(){Sd(Md,$d)}function Iw(t,e){se.point=Sd,In(Md=_e=t,$d=we=e)}function Sd(t,e){var n=t-_e,r=e-we,i=Ht(n*n+r*r);Fo+=i*(_e+t)/2,Io+=i*(we+e)/2,nr+=i,i=we*t-_e*e,ac+=i*(_e+t),fc+=i*(we+e),Vr+=i*3,In(_e=t,we=e)}const ku=se;function Td(t){this._context=t}Td.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Zt);break}}},result:ne};var cc=new Cn,of,kd,Ed,Xr,jr,Po={point:ne,lineStart:function(){Po.point=Pw},lineEnd:function(){of&&Ad(kd,Ed),Po.point=ne},polygonStart:function(){of=!0},polygonEnd:function(){of=null},result:function(){var t=+cc;return cc=new Cn,t}};function Pw(t,e){Po.point=Ad,kd=Xr=t,Ed=jr=e}function Ad(t,e){Xr-=t,jr-=e,cc.add(Ht(Xr*Xr+jr*jr)),Xr=t,jr=e}const Eu=Po;let Au,Oo,Cu,Nu;class Du{constructor(e){this._append=e==null?Cd:Ow(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Cu||this._append!==Oo){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Cu=r,Oo=this._append,Nu=this._,this._=i}this._+=Nu;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Cd(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ow(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Cd;if(e!==Au){const n=10**e;Au=e,Oo=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Oo}function Wc(t,e){let n=3,r=4.5,i,o;function a(f){return f&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),vn(f,i(o))),o.result()}return a.area=function(f){return vn(f,i($u)),$u.result()},a.measure=function(f){return vn(f,i(Eu)),Eu.result()},a.bounds=function(f){return vn(f,i(Ro)),Ro.result()},a.centroid=function(f){return vn(f,i(ku)),ku.result()},a.projection=function(f){return arguments.length?(i=f==null?(t=null,tc):(t=f).stream,a):t},a.context=function(f){return arguments.length?(o=f==null?(e=null,new Du(n)):new Td(e=f),typeof r!="function"&&o.pointRadius(r),a):e},a.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(o.pointRadius(+f),+f),a):r},a.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const c=Math.floor(f);if(!(c>=0))throw new RangeError(`invalid digits: ${f}`);n=c}return e===null&&(o=new Du(n)),a},a.projection(t).digits(n).context(e)}function sc(t){return{stream:da(t)}}function da(t){return function(e){var n=new uc;for(var r in t)n[r]=t[r];return n.stream=e,n}}function uc(){}uc.prototype={constructor:uc,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Hc(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),vn(n,t.stream(Ro)),e(Ro.result()),r!=null&&t.clipExtent(r),t}function Gc(t,e,n){return Hc(t,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),f=+e[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([f,c])},n)}function Nd(t,e,n){return Gc(t,[[0,0],e],n)}function Dd(t,e,n){return Hc(t,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,f=-o*r[0][1];t.scale(150*o).translate([a,f])},n)}function Ld(t,e,n){return Hc(t,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],f=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,f])},n)}var Lu=16,Uw=nt(30*wt);function Ru(t,e){return+e?zw(t,e):Bw(t)}function Bw(t){return da({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function zw(t,e){function n(r,i,o,a,f,c,s,u,h,l,d,p,g,m){var _=s-r,y=u-i,v=_*_+y*y;if(v>4*e&&g--){var b=a+l,w=f+d,x=c+p,$=Ht(b*b+w*w+x*x),E=oe(x/=$),k=ht(ht(x)-1)<tt||ht(o-h)<tt?(o+h)/2:He(w,b),A=t(k,E),M=A[0],L=A[1],F=M-r,O=L-i,S=y*F-_*O;(S*S/v>e||ht((_*F+y*O)/v-.5)>.3||a*l+f*d+c*p<Uw)&&(n(r,i,o,a,f,c,M,L,k,b/=$,w/=$,x,g,m),m.point(M,L),n(M,L,k,b,w,x,s,u,h,l,d,p,g,m))}}return function(r){var i,o,a,f,c,s,u,h,l,d,p,g,m={point:_,lineStart:y,lineEnd:b,polygonStart:function(){r.polygonStart(),m.lineStart=w},polygonEnd:function(){r.polygonEnd(),m.lineStart=y}};function _(E,k){E=t(E,k),r.point(E[0],E[1])}function y(){h=NaN,m.point=v,r.lineStart()}function v(E,k){var A=yr([E,k]),M=t(E,k);n(h,l,u,d,p,g,h=M[0],l=M[1],u=E,d=A[0],p=A[1],g=A[2],Lu,r),r.point(h,l)}function b(){m.point=_,r.lineEnd()}function w(){y(),m.point=x,m.lineEnd=$}function x(E,k){v(i=E,k),o=h,a=l,f=d,c=p,s=g,m.point=v}function $(){n(h,l,u,d,p,g,o,a,i,f,c,s,Lu,r),m.lineEnd=b,b()}return m}}var qw=da({point:function(t,e){this.stream.point(t*wt,e*wt)}});function Yw(t){return da({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function Ww(t,e,n,r,i){function o(a,f){return a*=r,f*=i,[e+t*a,n-t*f]}return o.invert=function(a,f){return[(a-e)/t*r,(n-f)/t*i]},o}function Fu(t,e,n,r,i,o){if(!o)return Ww(t,e,n,r,i);var a=nt(o),f=Q(o),c=a*t,s=f*t,u=a/t,h=f/t,l=(f*n-a*e)/t,d=(f*e+a*n)/t;function p(g,m){return g*=r,m*=i,[c*g-s*m+e,n-s*g-c*m]}return p.invert=function(g,m){return[r*(u*g-h*m+l),i*(d-h*g-u*m)]},p}function dn(t){return Rd(function(){return t})()}function Rd(t){var e,n=150,r=480,i=250,o=0,a=0,f=0,c=0,s=0,u,h=0,l=1,d=1,p=null,g=Mu,m=null,_,y,v,b=tc,w=.5,x,$,E,k,A;function M(S){return E(S[0]*wt,S[1]*wt)}function L(S){return S=E.invert(S[0],S[1]),S&&[S[0]*Ut,S[1]*Ut]}M.stream=function(S){return k&&A===S?k:k=qw(Yw(u)(g(x(b(A=S)))))},M.preclip=function(S){return arguments.length?(g=S,p=void 0,O()):g},M.postclip=function(S){return arguments.length?(b=S,m=_=y=v=null,O()):b},M.clipAngle=function(S){return arguments.length?(g=+S?Sw(p=S*wt):(p=null,Mu),O()):p*Ut},M.clipExtent=function(S){return arguments.length?(b=S==null?(m=_=y=v=null,tc):_d(m=+S[0][0],_=+S[0][1],y=+S[1][0],v=+S[1][1]),O()):m==null?null:[[m,_],[y,v]]},M.scale=function(S){return arguments.length?(n=+S,F()):n},M.translate=function(S){return arguments.length?(r=+S[0],i=+S[1],F()):[r,i]},M.center=function(S){return arguments.length?(o=S[0]%360*wt,a=S[1]%360*wt,F()):[o*Ut,a*Ut]},M.rotate=function(S){return arguments.length?(f=S[0]%360*wt,c=S[1]%360*wt,s=S.length>2?S[2]%360*wt:0,F()):[f*Ut,c*Ut,s*Ut]},M.angle=function(S){return arguments.length?(h=S%360*wt,F()):h*Ut},M.reflectX=function(S){return arguments.length?(l=S?-1:1,F()):l<0},M.reflectY=function(S){return arguments.length?(d=S?-1:1,F()):d<0},M.precision=function(S){return arguments.length?(x=Ru($,w=S*S),O()):Ht(w)},M.fitExtent=function(S,U){return Gc(M,S,U)},M.fitSize=function(S,U){return Nd(M,S,U)},M.fitWidth=function(S,U){return Dd(M,S,U)},M.fitHeight=function(S,U){return Ld(M,S,U)};function F(){var S=Fu(n,0,0,l,d,h).apply(null,e(o,a)),U=Fu(n,r-S[0],i-S[1],l,d,h);return u=gd(f,c,s),$=Qf(e,U),E=Qf(u,$),x=Ru($,w),O()}function O(){return k=A=null,M}return function(){return e=t.apply(this,arguments),M.invert=e.invert&&L,F()}}function Vc(t){var e=0,n=rt/3,r=Rd(t),i=r(e,n);return i.parallels=function(o){return arguments.length?r(e=o[0]*wt,n=o[1]*wt):[e*Ut,n*Ut]},i}function Hw(t){var e=nt(t);function n(r,i){return[r*e,Q(i)/e]}return n.invert=function(r,i){return[r/e,oe(i*e)]},n}function Gw(t,e){var n=Q(t),r=(n+Q(e))/2;if(ht(r)<tt)return Hw(t);var i=1+n*(2*r-n),o=Ht(i)/r;function a(f,c){var s=Ht(i-2*r*Q(c))/r;return[s*Q(f*=r),o-s*nt(f)]}return a.invert=function(f,c){var s=o-c,u=He(f,ht(s))*ee(s);return s*r<0&&(u-=rt*ee(f)*ee(s)),[u/r,oe((i-(f*f+s*s)*r*r)/(2*r))]},a}function Uo(){return Vc(Gw).scale(155.424).center([0,33.6442])}function Fd(){return Uo().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Vw(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Xw(){var t,e,n=Fd(),r,i=Uo().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Uo().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,c,s={point:function(l,d){c=[l,d]}};function u(l){var d=l[0],p=l[1];return c=null,r.point(d,p),c||(o.point(d,p),c)||(f.point(d,p),c)}u.invert=function(l){var d=n.scale(),p=n.translate(),g=(l[0]-p[0])/d,m=(l[1]-p[1])/d;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?i:m>=.166&&m<.234&&g>=-.214&&g<-.115?a:n).invert(l)},u.stream=function(l){return t&&e===l?t:t=Vw([n.stream(e=l),i.stream(l),a.stream(l)])},u.precision=function(l){return arguments.length?(n.precision(l),i.precision(l),a.precision(l),h()):n.precision()},u.scale=function(l){return arguments.length?(n.scale(l),i.scale(l*.35),a.scale(l),u.translate(n.translate())):n.scale()},u.translate=function(l){if(!arguments.length)return n.translate();var d=n.scale(),p=+l[0],g=+l[1];return r=n.translate(l).clipExtent([[p-.455*d,g-.238*d],[p+.455*d,g+.238*d]]).stream(s),o=i.translate([p-.307*d,g+.201*d]).clipExtent([[p-.425*d+tt,g+.12*d+tt],[p-.214*d-tt,g+.234*d-tt]]).stream(s),f=a.translate([p-.205*d,g+.212*d]).clipExtent([[p-.214*d+tt,g+.166*d+tt],[p-.115*d-tt,g+.234*d-tt]]).stream(s),h()},u.fitExtent=function(l,d){return Gc(u,l,d)},u.fitSize=function(l,d){return Nd(u,l,d)},u.fitWidth=function(l,d){return Dd(u,l,d)},u.fitHeight=function(l,d){return Ld(u,l,d)};function h(){return t=e=null,u}return u.scale(1070)}function Id(t){return function(e,n){var r=nt(e),i=nt(n),o=t(r*i);return o===1/0?[2,0]:[o*i*Q(e),o*Q(n)]}}function Ti(t){return function(e,n){var r=Ht(e*e+n*n),i=t(r),o=Q(i),a=nt(i);return[He(e*o,r*a),oe(r&&n*o/r)]}}var Pd=Id(function(t){return Ht(2/(1+t))});Pd.invert=Ti(function(t){return 2*oe(t/2)});function jw(){return dn(Pd).scale(124.75).clipAngle(180-.001)}var Od=Id(function(t){return(t=pd(t))&&t/Q(t)});Od.invert=Ti(function(t){return t});function Zw(){return dn(Od).scale(79.4188).clipAngle(180-.001)}function pa(t,e){return[t,Ao(Yc((vt+e)/2))]}pa.invert=function(t,e){return[t,2*Ar(dd(e))-vt]};function Kw(){return Ud(pa).scale(961/Zt)}function Ud(t){var e=dn(t),n=e.center,r=e.scale,i=e.translate,o=e.clipExtent,a=null,f,c,s;e.scale=function(h){return arguments.length?(r(h),u()):r()},e.translate=function(h){return arguments.length?(i(h),u()):i()},e.center=function(h){return arguments.length?(n(h),u()):n()},e.clipExtent=function(h){return arguments.length?(h==null?a=f=c=s=null:(a=+h[0][0],f=+h[0][1],c=+h[1][0],s=+h[1][1]),u()):a==null?null:[[a,f],[c,s]]};function u(){var h=rt*r(),l=e(yw(e.rotate()).invert([0,0]));return o(a==null?[[l[0]-h,l[1]-h],[l[0]+h,l[1]+h]]:t===pa?[[Math.max(l[0]-h,a),f],[Math.min(l[0]+h,c),s]]:[[a,Math.max(l[1]-h,f)],[c,Math.min(l[1]+h,s)]])}return u()}function to(t){return Yc((vt+t)/2)}function Qw(t,e){var n=nt(t),r=t===e?Q(t):Ao(n/nt(e))/Ao(to(e)/to(t)),i=n*tf(to(t),r)/r;if(!r)return pa;function o(a,f){i>0?f<-vt+tt&&(f=-vt+tt):f>vt-tt&&(f=vt-tt);var c=i/tf(to(f),r);return[c*Q(r*a),i-c*nt(r*a)]}return o.invert=function(a,f){var c=i-f,s=ee(r)*Ht(a*a+c*c),u=He(a,ht(c))*ee(c);return c*r<0&&(u-=rt*ee(a)*ee(c)),[u/r,2*Ar(tf(i/s,1/r))-vt]},o}function Jw(){return Vc(Qw).scale(109.5).parallels([30,30])}function Bo(t,e){return[t,e]}Bo.invert=Bo;function tv(){return dn(Bo).scale(152.63)}function ev(t,e){var n=nt(t),r=t===e?Q(t):(n-nt(e))/(e-t),i=n/r+t;if(ht(r)<tt)return Bo;function o(a,f){var c=i-f,s=r*a;return[c*Q(s),i-c*nt(s)]}return o.invert=function(a,f){var c=i-f,s=He(a,ht(c))*ee(c);return c*r<0&&(s-=rt*ee(a)*ee(c)),[s/r,i-ee(r)*Ht(a*a+c*c)]},o}function nv(){return Vc(ev).scale(131.154).center([0,13.9389])}var Jr=1.340264,ti=-.081106,ei=893e-6,ni=.003796,zo=Ht(3)/2,rv=12;function Bd(t,e){var n=oe(zo*Q(e)),r=n*n,i=r*r*r;return[t*nt(n)/(zo*(Jr+3*ti*r+i*(7*ei+9*ni*r))),n*(Jr+ti*r+i*(ei+ni*r))]}Bd.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,o=0,a,f,c;o<rv&&(f=n*(Jr+ti*r+i*(ei+ni*r))-e,c=Jr+3*ti*r+i*(7*ei+9*ni*r),n-=a=f/c,r=n*n,i=r*r*r,!(ht(a)<hd));++o);return[zo*t*(Jr+3*ti*r+i*(7*ei+9*ni*r))/nt(n),oe(Q(n)/zo)]};function iv(){return dn(Bd).scale(177.158)}function zd(t,e){var n=nt(e),r=nt(t)*n;return[n*Q(t)/r,Q(e)/r]}zd.invert=Ti(Ar);function ov(){return dn(zd).scale(144.049).clipAngle(60)}function qd(t,e){return[nt(e)*Q(t),Q(e)]}qd.invert=Ti(oe);function av(){return dn(qd).scale(249.5).clipAngle(90+tt)}function Yd(t,e){var n=nt(e),r=1+nt(t)*n;return[n*Q(t)/r,Q(e)/r]}Yd.invert=Ti(function(t){return 2*Ar(t)});function fv(){return dn(Yd).scale(250).clipAngle(142)}function Wd(t,e){return[Ao(Yc((vt+e)/2)),-t]}Wd.invert=function(t,e){return[-e,2*Ar(dd(t))-vt]};function cv(){var t=Ud(Wd),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ne(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ga(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const lc=Symbol("implicit");function Xc(){var t=new Nn,e=[],n=[],r=lc;function i(o){let a=t.get(o);if(a===void 0){if(r!==lc)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Nn;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Xc(e,n).unknown(r)},Ne.apply(i,arguments),i}function ma(){var t=Xc().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,f=!1,c=0,s=0,u=.5;delete t.unknown;function h(){var l=e().length,d=i<r,p=d?i:r,g=d?r:i;o=(g-p)/Math.max(1,l-c+s*2),f&&(o=Math.floor(o)),p+=(g-p-o*(l-c))*u,a=o*(1-c),f&&(p=Math.round(p),a=Math.round(a));var m=Ff(l).map(function(_){return p+o*_});return n(d?m.reverse():m)}return t.domain=function(l){return arguments.length?(e(l),h()):e()},t.range=function(l){return arguments.length?([r,i]=l,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(l){return[r,i]=l,r=+r,i=+i,f=!0,h()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(l){return arguments.length?(f=!!l,h()):f},t.padding=function(l){return arguments.length?(c=Math.min(1,s=+l),h()):c},t.paddingInner=function(l){return arguments.length?(c=Math.min(1,l),h()):c},t.paddingOuter=function(l){return arguments.length?(s=+l,h()):s},t.align=function(l){return arguments.length?(u=Math.max(0,Math.min(1,l)),h()):u},t.copy=function(){return ma(e(),[r,i]).round(f).paddingInner(c).paddingOuter(s).align(u)},Ne.apply(h(),arguments)}function Hd(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Hd(e())},t}function sv(){return Hd(ma.apply(null,arguments).paddingInner(1))}function uv(t){return function(){return t}}function hc(t){return+t}var Iu=[0,1];function re(t){return t}function dc(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:uv(isNaN(e)?NaN:.5)}function lv(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function hv(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=dc(i,r),o=n(a,o)):(r=dc(r,i),o=n(o,a)),function(f){return o(r(f))}}function dv(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=dc(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(f){var c=ra(t,f,1,r)-1;return o[c](i[c](f))}}function ki(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ya(){var t=Iu,e=Iu,n=Si,r,i,o,a=re,f,c,s;function u(){var l=Math.min(t.length,e.length);return a!==re&&(a=lv(t[0],t[l-1])),f=l>2?dv:hv,c=s=null,h}function h(l){return l==null||isNaN(l=+l)?o:(c||(c=f(t.map(r),e,n)))(r(a(l)))}return h.invert=function(l){return a(i((s||(s=f(e,t.map(r),Lt)))(l)))},h.domain=function(l){return arguments.length?(t=Array.from(l,hc),u()):t.slice()},h.range=function(l){return arguments.length?(e=Array.from(l),u()):e.slice()},h.rangeRound=function(l){return e=Array.from(l),n=Pc,u()},h.clamp=function(l){return arguments.length?(a=l?!0:re,u()):a!==re},h.interpolate=function(l){return arguments.length?(n=l,u()):n},h.unknown=function(l){return arguments.length?(o=l,h):o},function(l,d){return r=l,i=d,u()}}function Gd(){return ya()(re,re)}function pv(t,e,n,r){var i=Lf(t,e,n),o;switch(r=li(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=gw(i,a))&&(r.precision=o),ld(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=mw(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=pw(i))&&(r.precision=o-(r.type==="%")*2);break}}return Er(r)}function Ei(t){var e=t.domain;return t.ticks=function(n){var r=e();return fi(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return pv(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],f=r[o],c,s,u=10;for(f<a&&(s=a,a=f,f=s,s=i,i=o,o=s);u-- >0;){if(s=wo(a,f,n),s===c)return r[i]=a,r[o]=f,e(r);if(s>0)a=Math.floor(a/s)*s,f=Math.ceil(f/s)*s;else if(s<0)a=Math.ceil(a*s)/s,f=Math.floor(f*s)/s;else break;c=s}return t},t}function jc(){var t=Gd();return t.copy=function(){return ki(t,jc())},Ne.apply(t,arguments),Ei(t)}function Vd(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,hc),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return Vd(t).unknown(e)},t=arguments.length?Array.from(t,hc):[0,1],Ei(n)}function Xd(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function Pu(t){return Math.log(t)}function Ou(t){return Math.exp(t)}function gv(t){return-Math.log(-t)}function mv(t){return-Math.exp(-t)}function yv(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bv(t){return t===10?yv:t===Math.E?Math.exp:e=>Math.pow(t,e)}function _v(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Uu(t){return(e,n)=>-t(-e,n)}function jd(t){const e=t(Pu,Ou),n=e.domain;let r=10,i,o;function a(){return i=_v(r),o=bv(r),n()[0]<0?(i=Uu(i),o=Uu(o),t(gv,mv)):t(Pu,Ou),e}return e.base=function(f){return arguments.length?(r=+f,a()):r},e.domain=function(f){return arguments.length?(n(f),a()):n()},e.ticks=f=>{const c=n();let s=c[0],u=c[c.length-1];const h=u<s;h&&([s,u]=[u,s]);let l=i(s),d=i(u),p,g;const m=f==null?10:+f;let _=[];if(!(r%1)&&d-l<m){if(l=Math.floor(l),d=Math.ceil(d),s>0){for(;l<=d;++l)for(p=1;p<r;++p)if(g=l<0?p/o(-l):p*o(l),!(g<s)){if(g>u)break;_.push(g)}}else for(;l<=d;++l)for(p=r-1;p>=1;--p)if(g=l>0?p/o(-l):p*o(l),!(g<s)){if(g>u)break;_.push(g)}_.length*2<m&&(_=fi(s,u,m))}else _=fi(l,d,Math.min(d-l,m)).map(o);return h?_.reverse():_},e.tickFormat=(f,c)=>{if(f==null&&(f=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=li(c)).precision==null&&(c.trim=!0),c=Er(c)),f===1/0)return c;const s=Math.max(1,r*f/e.ticks().length);return u=>{let h=u/o(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=s?c(u):""}},e.nice=()=>n(Xd(n(),{floor:f=>o(Math.floor(i(f))),ceil:f=>o(Math.ceil(i(f)))})),e}function Zd(){const t=jd(ya()).domain([1,10]);return t.copy=()=>ki(t,Zd()).base(t.base()),Ne.apply(t,arguments),t}function Bu(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function zu(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Kd(t){var e=1,n=t(Bu(e),zu(e));return n.constant=function(r){return arguments.length?t(Bu(e=+r),zu(e)):e},Ei(n)}function Qd(){var t=Kd(ya());return t.copy=function(){return ki(t,Qd()).constant(t.constant())},Ne.apply(t,arguments)}function qu(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function wv(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vv(t){return t<0?-t*t:t*t}function Jd(t){var e=t(re,re),n=1;function r(){return n===1?t(re,re):n===.5?t(wv,vv):t(qu(n),qu(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ei(e)}function t0(){var t=Jd(ya());return t.copy=function(){return ki(t,t0()).exponent(t.exponent())},Ne.apply(t,arguments),t}function e0(){var t=[],e=[],n=[],r;function i(){var a=0,f=Math.max(1,e.length);for(n=new Array(f-1);++a<f;)n[a-1]=d2(t,a/f);return o}function o(a){return a==null||isNaN(a=+a)?r:e[ra(n,a)]}return o.invertExtent=function(a){var f=e.indexOf(a);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let f of a)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(Wt),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return e0().domain(t).range(e).unknown(r)},Ne.apply(o,arguments)}function n0(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[ra(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return n0().domain(t).range(e).unknown(n)},Ne.apply(i,arguments)}const af=new Date,ff=new Date;function St(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),f=i.ceil(o);return o-a<f-o?a:f},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,f)=>{const c=[];if(o=i.ceil(o),f=f==null?1:Math.floor(f),!(o<a)||!(f>0))return c;let s;do c.push(s=new Date(+o)),e(o,f),t(o);while(s<o&&o<a);return c},i.filter=o=>St(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,f)=>{if(a>=a)if(f<0)for(;++f<=0;)for(;e(a,-1),!o(a););else for(;--f>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(af.setTime(+o),ff.setTime(+a),t(af),t(ff),Math.floor(n(af,ff))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const qo=St(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);qo.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?St(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):qo);qo.range;const ze=1e3,ie=ze*60,qe=ie*60,Ge=qe*24,Zc=Ge*7,Yu=Ge*30,cf=Ge*365,xe=St(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ze)},(t,e)=>(e-t)/ze,t=>t.getUTCSeconds());xe.range;const ba=St(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ze)},(t,e)=>{t.setTime(+t+e*ie)},(t,e)=>(e-t)/ie,t=>t.getMinutes());ba.range;const Ai=St(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ie)},(t,e)=>(e-t)/ie,t=>t.getUTCMinutes());Ai.range;const _a=St(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ze-t.getMinutes()*ie)},(t,e)=>{t.setTime(+t+e*qe)},(t,e)=>(e-t)/qe,t=>t.getHours());_a.range;const Ci=St(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*qe)},(t,e)=>(e-t)/qe,t=>t.getUTCHours());Ci.range;const Bn=St(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ie)/Ge,t=>t.getDate()-1);Bn.range;const wa=St(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ge,t=>t.getUTCDate()-1);wa.range;const va=St(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ge,t=>Math.floor(t/Ge));va.range;function zn(t){return St(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ie)/Zc)}const _r=zn(0),di=zn(1),r0=zn(2),i0=zn(3),Pn=zn(4),o0=zn(5),a0=zn(6);_r.range;di.range;r0.range;i0.range;Pn.range;o0.range;a0.range;function qn(t){return St(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Zc)}const wr=qn(0),pi=qn(1),f0=qn(2),c0=qn(3),On=qn(4),s0=qn(5),u0=qn(6);wr.range;pi.range;f0.range;c0.range;On.range;s0.range;u0.range;const Ni=St(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Ni.range;const Di=St(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Di.range;const he=St(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());he.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:St(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});he.range;const de=St(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());de.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:St(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});de.range;function l0(t,e,n,r,i,o){const a=[[xe,1,ze],[xe,5,5*ze],[xe,15,15*ze],[xe,30,30*ze],[o,1,ie],[o,5,5*ie],[o,15,15*ie],[o,30,30*ie],[i,1,qe],[i,3,3*qe],[i,6,6*qe],[i,12,12*qe],[r,1,Ge],[r,2,2*Ge],[n,1,Zc],[e,1,Yu],[e,3,3*Yu],[t,1,cf]];function f(s,u,h){const l=u<s;l&&([s,u]=[u,s]);const d=h&&typeof h.range=="function"?h:c(s,u,h),p=d?d.range(s,+u+1):[];return l?p.reverse():p}function c(s,u,h){const l=Math.abs(u-s)/h,d=na(([,,m])=>m).right(a,l);if(d===a.length)return t.every(Lf(s/cf,u/cf,h));if(d===0)return qo.every(Math.max(Lf(s,u,h),1));const[p,g]=a[l/a[d-1][2]<a[d][2]/l?d-1:d];return p.every(g)}return[f,c]}const[xv,h0]=l0(de,Di,wr,va,Ci,Ai),[Mv,$v]=l0(he,Ni,_r,Bn,_a,ba);function sf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function uf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Or(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Sv(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,f=t.months,c=t.shortMonths,s=Ur(i),u=Br(i),h=Ur(o),l=Br(o),d=Ur(a),p=Br(a),g=Ur(f),m=Br(f),_=Ur(c),y=Br(c),v={a:R,A:Y,b:P,B:C,c:null,d:ju,e:ju,f:Xv,g:i6,G:a6,H:Hv,I:Gv,j:Vv,L:d0,m:jv,M:Zv,p:B,q:z,Q:Qu,s:Ju,S:Kv,u:Qv,U:Jv,V:t6,w:e6,W:n6,x:null,X:null,y:r6,Y:o6,Z:f6,"%":Ku},b={a:W,A:J,b:Z,B:X,c:null,d:Zu,e:Zu,f:l6,g:v6,G:M6,H:c6,I:s6,j:u6,L:g0,m:h6,M:d6,p:D,q,Q:Qu,s:Ju,S:p6,u:g6,U:m6,V:y6,w:b6,W:_6,x:null,X:null,y:w6,Y:x6,Z:$6,"%":Ku},w={a:A,A:M,b:L,B:F,c:O,d:Vu,e:Vu,f:zv,g:Gu,G:Hu,H:Xu,I:Xu,j:Pv,L:Bv,m:Iv,M:Ov,p:k,q:Fv,Q:Yv,s:Wv,S:Uv,u:Cv,U:Nv,V:Dv,w:Av,W:Lv,x:S,X:U,y:Gu,Y:Hu,Z:Rv,"%":qv};v.x=x(n,v),v.X=x(r,v),v.c=x(e,v),b.x=x(n,b),b.X=x(r,b),b.c=x(e,b);function x(N,H){return function(V){var T=[],ot=-1,G=0,at=N.length,bt,Dt,bn;for(V instanceof Date||(V=new Date(+V));++ot<at;)N.charCodeAt(ot)===37&&(T.push(N.slice(G,ot)),(Dt=Wu[bt=N.charAt(++ot)])!=null?bt=N.charAt(++ot):Dt=bt==="e"?" ":"0",(bn=H[bt])&&(bt=bn(V,Dt)),T.push(bt),G=ot+1);return T.push(N.slice(G,ot)),T.join("")}}function $(N,H){return function(V){var T=Or(1900,void 0,1),ot=E(T,N,V+="",0),G,at;if(ot!=V.length)return null;if("Q"in T)return new Date(T.Q);if("s"in T)return new Date(T.s*1e3+("L"in T?T.L:0));if(H&&!("Z"in T)&&(T.Z=0),"p"in T&&(T.H=T.H%12+T.p*12),T.m===void 0&&(T.m="q"in T?T.q:0),"V"in T){if(T.V<1||T.V>53)return null;"w"in T||(T.w=1),"Z"in T?(G=uf(Or(T.y,0,1)),at=G.getUTCDay(),G=at>4||at===0?pi.ceil(G):pi(G),G=wa.offset(G,(T.V-1)*7),T.y=G.getUTCFullYear(),T.m=G.getUTCMonth(),T.d=G.getUTCDate()+(T.w+6)%7):(G=sf(Or(T.y,0,1)),at=G.getDay(),G=at>4||at===0?di.ceil(G):di(G),G=Bn.offset(G,(T.V-1)*7),T.y=G.getFullYear(),T.m=G.getMonth(),T.d=G.getDate()+(T.w+6)%7)}else("W"in T||"U"in T)&&("w"in T||(T.w="u"in T?T.u%7:"W"in T?1:0),at="Z"in T?uf(Or(T.y,0,1)).getUTCDay():sf(Or(T.y,0,1)).getDay(),T.m=0,T.d="W"in T?(T.w+6)%7+T.W*7-(at+5)%7:T.w+T.U*7-(at+6)%7);return"Z"in T?(T.H+=T.Z/100|0,T.M+=T.Z%100,uf(T)):sf(T)}}function E(N,H,V,T){for(var ot=0,G=H.length,at=V.length,bt,Dt;ot<G;){if(T>=at)return-1;if(bt=H.charCodeAt(ot++),bt===37){if(bt=H.charAt(ot++),Dt=w[bt in Wu?H.charAt(ot++):bt],!Dt||(T=Dt(N,V,T))<0)return-1}else if(bt!=V.charCodeAt(T++))return-1}return T}function k(N,H,V){var T=s.exec(H.slice(V));return T?(N.p=u.get(T[0].toLowerCase()),V+T[0].length):-1}function A(N,H,V){var T=d.exec(H.slice(V));return T?(N.w=p.get(T[0].toLowerCase()),V+T[0].length):-1}function M(N,H,V){var T=h.exec(H.slice(V));return T?(N.w=l.get(T[0].toLowerCase()),V+T[0].length):-1}function L(N,H,V){var T=_.exec(H.slice(V));return T?(N.m=y.get(T[0].toLowerCase()),V+T[0].length):-1}function F(N,H,V){var T=g.exec(H.slice(V));return T?(N.m=m.get(T[0].toLowerCase()),V+T[0].length):-1}function O(N,H,V){return E(N,e,H,V)}function S(N,H,V){return E(N,n,H,V)}function U(N,H,V){return E(N,r,H,V)}function R(N){return a[N.getDay()]}function Y(N){return o[N.getDay()]}function P(N){return c[N.getMonth()]}function C(N){return f[N.getMonth()]}function B(N){return i[+(N.getHours()>=12)]}function z(N){return 1+~~(N.getMonth()/3)}function W(N){return a[N.getUTCDay()]}function J(N){return o[N.getUTCDay()]}function Z(N){return c[N.getUTCMonth()]}function X(N){return f[N.getUTCMonth()]}function D(N){return i[+(N.getUTCHours()>=12)]}function q(N){return 1+~~(N.getUTCMonth()/3)}return{format:function(N){var H=x(N+="",v);return H.toString=function(){return N},H},parse:function(N){var H=$(N+="",!1);return H.toString=function(){return N},H},utcFormat:function(N){var H=x(N+="",b);return H.toString=function(){return N},H},utcParse:function(N){var H=$(N+="",!0);return H.toString=function(){return N},H}}}var Wu={"-":"",_:" ",0:"0"},Ct=/^\s*\d+/,Tv=/^%/,kv=/[\\^$*+?|[\]().{}]/g;function ct(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Ev(t){return t.replace(kv,"\\$&")}function Ur(t){return new RegExp("^(?:"+t.map(Ev).join("|")+")","i")}function Br(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Av(t,e,n){var r=Ct.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Cv(t,e,n){var r=Ct.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Nv(t,e,n){var r=Ct.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Dv(t,e,n){var r=Ct.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Lv(t,e,n){var r=Ct.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Hu(t,e,n){var r=Ct.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Gu(t,e,n){var r=Ct.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Rv(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Fv(t,e,n){var r=Ct.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Iv(t,e,n){var r=Ct.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Vu(t,e,n){var r=Ct.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Pv(t,e,n){var r=Ct.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Xu(t,e,n){var r=Ct.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Ov(t,e,n){var r=Ct.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Uv(t,e,n){var r=Ct.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Bv(t,e,n){var r=Ct.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function zv(t,e,n){var r=Ct.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function qv(t,e,n){var r=Tv.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Yv(t,e,n){var r=Ct.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Wv(t,e,n){var r=Ct.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ju(t,e){return ct(t.getDate(),e,2)}function Hv(t,e){return ct(t.getHours(),e,2)}function Gv(t,e){return ct(t.getHours()%12||12,e,2)}function Vv(t,e){return ct(1+Bn.count(he(t),t),e,3)}function d0(t,e){return ct(t.getMilliseconds(),e,3)}function Xv(t,e){return d0(t,e)+"000"}function jv(t,e){return ct(t.getMonth()+1,e,2)}function Zv(t,e){return ct(t.getMinutes(),e,2)}function Kv(t,e){return ct(t.getSeconds(),e,2)}function Qv(t){var e=t.getDay();return e===0?7:e}function Jv(t,e){return ct(_r.count(he(t)-1,t),e,2)}function p0(t){var e=t.getDay();return e>=4||e===0?Pn(t):Pn.ceil(t)}function t6(t,e){return t=p0(t),ct(Pn.count(he(t),t)+(he(t).getDay()===4),e,2)}function e6(t){return t.getDay()}function n6(t,e){return ct(di.count(he(t)-1,t),e,2)}function r6(t,e){return ct(t.getFullYear()%100,e,2)}function i6(t,e){return t=p0(t),ct(t.getFullYear()%100,e,2)}function o6(t,e){return ct(t.getFullYear()%1e4,e,4)}function a6(t,e){var n=t.getDay();return t=n>=4||n===0?Pn(t):Pn.ceil(t),ct(t.getFullYear()%1e4,e,4)}function f6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ct(e/60|0,"0",2)+ct(e%60,"0",2)}function Zu(t,e){return ct(t.getUTCDate(),e,2)}function c6(t,e){return ct(t.getUTCHours(),e,2)}function s6(t,e){return ct(t.getUTCHours()%12||12,e,2)}function u6(t,e){return ct(1+wa.count(de(t),t),e,3)}function g0(t,e){return ct(t.getUTCMilliseconds(),e,3)}function l6(t,e){return g0(t,e)+"000"}function h6(t,e){return ct(t.getUTCMonth()+1,e,2)}function d6(t,e){return ct(t.getUTCMinutes(),e,2)}function p6(t,e){return ct(t.getUTCSeconds(),e,2)}function g6(t){var e=t.getUTCDay();return e===0?7:e}function m6(t,e){return ct(wr.count(de(t)-1,t),e,2)}function m0(t){var e=t.getUTCDay();return e>=4||e===0?On(t):On.ceil(t)}function y6(t,e){return t=m0(t),ct(On.count(de(t),t)+(de(t).getUTCDay()===4),e,2)}function b6(t){return t.getUTCDay()}function _6(t,e){return ct(pi.count(de(t)-1,t),e,2)}function w6(t,e){return ct(t.getUTCFullYear()%100,e,2)}function v6(t,e){return t=m0(t),ct(t.getUTCFullYear()%100,e,2)}function x6(t,e){return ct(t.getUTCFullYear()%1e4,e,4)}function M6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?On(t):On.ceil(t),ct(t.getUTCFullYear()%1e4,e,4)}function $6(){return"+0000"}function Ku(){return"%"}function Qu(t){return+t}function Ju(t){return Math.floor(+t/1e3)}var Zn,Kc,Li;S6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function S6(t){return Zn=Sv(t),Kc=Zn.format,Zn.parse,Li=Zn.utcFormat,Zn.utcParse,Zn}function T6(t){return new Date(t)}function k6(t){return t instanceof Date?+t:+new Date(+t)}function Qc(t,e,n,r,i,o,a,f,c,s){var u=Gd(),h=u.invert,l=u.domain,d=s(".%L"),p=s(":%S"),g=s("%I:%M"),m=s("%I %p"),_=s("%a %d"),y=s("%b %d"),v=s("%B"),b=s("%Y");function w(x){return(c(x)<x?d:f(x)<x?p:a(x)<x?g:o(x)<x?m:r(x)<x?i(x)<x?_:y:n(x)<x?v:b)(x)}return u.invert=function(x){return new Date(h(x))},u.domain=function(x){return arguments.length?l(Array.from(x,k6)):l().map(T6)},u.ticks=function(x){var $=l();return t($[0],$[$.length-1],x??10)},u.tickFormat=function(x,$){return $==null?w:s($)},u.nice=function(x){var $=l();return(!x||typeof x.range!="function")&&(x=e($[0],$[$.length-1],x??10)),x?l(Xd($,x)):u},u.copy=function(){return ki(u,Qc(t,e,n,r,i,o,a,f,c,s))},u}function E6(){return Ne.apply(Qc(Mv,$v,he,Ni,_r,Bn,_a,ba,xe,Kc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function A6(){return Ne.apply(Qc(xv,h0,de,Di,wr,wa,Ci,Ai,xe,Li).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xa(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ma(){var t=0,e=.5,n=1,r=1,i,o,a,f,c,s=re,u,h=!1,l;function d(g){return isNaN(g=+g)?l:(g=.5+((g=+u(g))-o)*(r*g<r*o?f:c),s(h?Math.max(0,Math.min(1,g)):g))}d.domain=function(g){return arguments.length?([t,e,n]=g,i=u(t=+t),o=u(e=+e),a=u(n=+n),f=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,d):[t,e,n]},d.clamp=function(g){return arguments.length?(h=!!g,d):h},d.interpolator=function(g){return arguments.length?(s=g,d):s};function p(g){return function(m){var _,y,v;return arguments.length?([_,y,v]=m,s=ua(g,[_,y,v]),d):[s(0),s(.5),s(1)]}}return d.range=p(Si),d.rangeRound=p(Pc),d.unknown=function(g){return arguments.length?(l=g,d):l},function(g){return u=g,i=g(t),o=g(e),a=g(n),f=i===o?0:.5/(o-i),c=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function y0(){var t=Ei(Ma()(re));return t.copy=function(){return xa(t,y0())},ga.apply(t,arguments)}function b0(){var t=jd(Ma()).domain([.1,1,10]);return t.copy=function(){return xa(t,b0()).base(t.base())},ga.apply(t,arguments)}function _0(){var t=Kd(Ma());return t.copy=function(){return xa(t,_0()).constant(t.constant())},ga.apply(t,arguments)}function w0(){var t=Jd(Ma());return t.copy=function(){return xa(t,w0()).exponent(t.exponent())},ga.apply(t,arguments)}function et(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const C6=et("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),N6=et("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),D6=et("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),L6=et("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),R6=et("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),F6=et("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),I6=et("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),P6=et("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),O6=et("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),U6=et("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),mt=t=>Ab(t[t.length-1]);var v0=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(et);const x0=mt(v0);var M0=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(et);const $0=mt(M0);var S0=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(et);const T0=mt(S0);var k0=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(et);const E0=mt(k0);var pc=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(et);const Yo=mt(pc);var A0=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(et);const C0=mt(A0);var gc=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(et);const Wo=mt(gc);var N0=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(et);const D0=mt(N0);var L0=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(et);const R0=mt(L0);var F0=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(et);const I0=mt(F0);var P0=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(et);const O0=mt(P0);var U0=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(et);const B0=mt(U0);var z0=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(et);const q0=mt(z0);var Y0=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(et);const W0=mt(Y0);var H0=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(et);const G0=mt(H0);var V0=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(et);const X0=mt(V0);var j0=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(et);const Z0=mt(j0);var K0=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(et);const Q0=mt(K0);var J0=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(et);const t1=mt(J0);var e1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(et);const n1=mt(e1);var r1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(et);const i1=mt(r1);var o1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(et);const a1=mt(o1);var f1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(et);const c1=mt(f1);var s1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(et);const u1=mt(s1);var l1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(et);const h1=mt(l1);var d1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(et);const p1=mt(d1);var g1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(et);const m1=mt(g1);function y1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const b1=Oc(Te(300,.5,0),Te(-240,.5,1));var _1=Oc(Te(-100,.75,.35),Te(80,1.5,.8)),w1=Oc(Te(260,.75,.35),Te(80,1.5,.8)),eo=Te();function v1(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return eo.h=360*t-100,eo.s=1.5-1.5*e,eo.l=.8-.9*e,eo+""}var no=cn(),B6=Math.PI/3,z6=Math.PI*2/3;function x1(t){var e;return t=(.5-t)*Math.PI,no.r=255*(e=Math.sin(t))*e,no.g=255*(e=Math.sin(t+B6))*e,no.b=255*(e=Math.sin(t+z6))*e,no+""}function M1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function $a(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const $1=$a(et("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var S1=$a(et("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),T1=$a(et("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),k1=$a(et("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Kn(t){return function(){return t}}const E1=Math.cos,Jc=Math.min,Ho=Math.sin,Tt=Math.sqrt,tl=1e-12,Go=Math.PI,Sa=2*Go;function q6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new sd(e)}function Y6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function A1(t){this._context=t}A1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ta(t){return new A1(t)}function W6(t){return t[0]}function H6(t){return t[1]}function G6(t,e){var n=Kn(!0),r=null,i=Ta,o=null,a=q6(f);t=typeof t=="function"?t:t===void 0?W6:Kn(t),e=typeof e=="function"?e:e===void 0?H6:Kn(e);function f(c){var s,u=(c=Y6(c)).length,h,l=!1,d;for(r==null&&(o=i(d=a())),s=0;s<=u;++s)!(s<u&&n(h=c[s],s,c))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(h,s,c),+e(h,s,c));if(d)return o=null,d+""||null}return f.x=function(c){return arguments.length?(t=typeof c=="function"?c:Kn(+c),f):t},f.y=function(c){return arguments.length?(e=typeof c=="function"?c:Kn(+c),f):e},f.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Kn(!!c),f):n},f.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),f):i},f.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),f):r},f}class C1{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function V6(t){return new C1(t,!0)}function X6(t){return new C1(t,!1)}const j6=Tt(3),N1={draw(t,e){const n=Tt(e+Jc(e/28,.75))*.59436,r=n/2,i=r*j6;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},ts={draw(t,e){const n=Tt(e/Go);t.moveTo(n,0),t.arc(0,0,n,0,Sa)}},D1={draw(t,e){const n=Tt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},L1=Tt(1/3),Z6=L1*2,R1={draw(t,e){const n=Tt(e/Z6),r=n*L1;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},F1={draw(t,e){const n=Tt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},I1={draw(t,e){const n=Tt(e-Jc(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},P1={draw(t,e){const n=Tt(e),r=-n/2;t.rect(r,r,n,n)}},O1={draw(t,e){const n=Tt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},K6=.8908130915292852,U1=Ho(Go/10)/Ho(7*Go/10),Q6=Ho(Sa/10)*U1,J6=-E1(Sa/10)*U1,B1={draw(t,e){const n=Tt(e*K6),r=Q6*n,i=J6*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=Sa*o/5,f=E1(a),c=Ho(a);t.lineTo(c*n,-f*n),t.lineTo(f*r-c*i,c*r+f*i)}t.closePath()}},lf=Tt(3),z1={draw(t,e){const n=-Tt(e/(lf*3));t.moveTo(0,n*2),t.lineTo(-lf*n,-n),t.lineTo(lf*n,-n),t.closePath()}},t3=Tt(3),q1={draw(t,e){const n=Tt(e)*.6824,r=n/2,i=n*t3/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},Qt=-.5,Jt=Tt(3)/2,mc=1/Tt(12),e3=(mc/2+1)*3,Y1={draw(t,e){const n=Tt(e/e3),r=n/2,i=n*mc,o=r,a=n*mc+n,f=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(f,c),t.lineTo(Qt*r-Jt*i,Jt*r+Qt*i),t.lineTo(Qt*o-Jt*a,Jt*o+Qt*a),t.lineTo(Qt*f-Jt*c,Jt*f+Qt*c),t.lineTo(Qt*r+Jt*i,Qt*i-Jt*r),t.lineTo(Qt*o+Jt*a,Qt*a-Jt*o),t.lineTo(Qt*f+Jt*c,Qt*c-Jt*f),t.closePath()}},W1={draw(t,e){const n=Tt(e-Jc(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},n3=[ts,D1,R1,P1,B1,z1,Y1],r3=[ts,I1,W1,q1,N1,O1,F1];function sn(){}function Vo(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ka(t){this._context=t}ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function i3(t){return new ka(t)}function H1(t){this._context=t}H1.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Vo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function o3(t){return new H1(t)}function G1(t){this._context=t}G1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Vo(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function a3(t){return new G1(t)}function V1(t,e){this._basis=new ka(t),this._beta=e}V1.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],o=t[n]-r,a=e[n]-i,f=-1,c;++f<=n;)c=f/n,this._basis.point(this._beta*t[f]+(1-this._beta)*(r+c*o),this._beta*e[f]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const f3=function t(e){function n(r){return e===1?new ka(r):new V1(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function Xo(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function es(t,e){this._context=t,this._k=(1-e)/6}es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Xo(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Xo(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const c3=function t(e){function n(r){return new es(r,e)}return n.tension=function(r){return t(+r)},n}(0);function ns(t,e){this._context=t,this._k=(1-e)/6}ns.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Xo(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const s3=function t(e){function n(r){return new ns(r,e)}return n.tension=function(r){return t(+r)},n}(0);function rs(t,e){this._context=t,this._k=(1-e)/6}rs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xo(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const u3=function t(e){function n(r){return new rs(r,e)}return n.tension=function(r){return t(+r)},n}(0);function is(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>tl){var f=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*f-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*f-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>tl){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function X1(t,e){this._context=t,this._alpha=e}X1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:is(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const l3=function t(e){function n(r){return e?new X1(r,e):new es(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function j1(t,e){this._context=t,this._alpha=e}j1.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:is(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const h3=function t(e){function n(r){return e?new j1(r,e):new ns(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Z1(t,e){this._context=t,this._alpha=e}Z1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:is(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const d3=function t(e){function n(r){return e?new Z1(r,e):new rs(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function K1(t){this._context=t}K1.prototype={areaStart:sn,areaEnd:sn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function p3(t){return new K1(t)}function el(t){return t<0?-1:1}function nl(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),f=(o*i+a*r)/(r+i);return(el(o)+el(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(f))||0}function rl(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function hf(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,f=(o-r)/3;t._context.bezierCurveTo(r+f,i+f*e,o-f,a-f*n,o,a)}function jo(t){this._context=t}jo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hf(this,this._t0,rl(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,hf(this,rl(this,n=nl(this,t,e)),n);break;default:hf(this,this._t0,n=nl(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Q1(t){this._context=new J1(t)}(Q1.prototype=Object.create(jo.prototype)).point=function(t,e){jo.prototype.point.call(this,e,t)};function J1(t){this._context=t}J1.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function g3(t){return new jo(t)}function m3(t){return new Q1(t)}function tp(t){this._context=t}tp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=il(t),i=il(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function il(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function y3(t){return new tp(t)}function Ea(t,e){this._context=t,this._t=e}Ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function b3(t){return new Ea(t,.5)}function _3(t){return new Ea(t,0)}function w3(t){return new Ea(t,1)}function Zr(t,e,n){this.k=t,this.x=e,this.y=n}Zr.prototype={constructor:Zr,scale:function(t){return t===1?this:new Zr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Zr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Zr.prototype;function un(t){return t!=null&&!Number.isNaN(t)}function pe(t,e){return+un(e)-+un(t)||Wt(t,e)}function Zo(t,e){return+un(e)-+un(t)||xi(t,e)}function os(t){return t!=null&&`${t}`!=""}function ep(t){return isFinite(t)?t:NaN}function as(t){return t>0&&isFinite(t)?t:NaN}function np(t){return t<0&&isFinite(t)?t:NaN}function v3(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${x3(t.getUTCFullYear())}-${Ue(t.getUTCMonth()+1,2)}-${Ue(t.getUTCDate(),2)}${n||r||i||o?`T${Ue(n,2)}:${Ue(r,2)}${i||o?`:${Ue(i,2)}${o?`.${Ue(o,3)}`:""}`:""}Z`:""}`}function x3(t){return t<0?`-${Ue(-t,6)}`:t>9999?`+${Ue(t,6)}`:Ue(t,4)}function Ue(t,e){return`${t}`.padStart(e,"0")}const M3=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function rp(t,e){return M3.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const rr=1e3,$n=rr*60,Sn=$n*60,Ve=Sn*24,be=Ve*7,An=Ve*30,Je=Ve*365,df=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",rr],["5 seconds",5*rr],["15 seconds",15*rr],["30 seconds",30*rr],["minute",$n],["5 minutes",5*$n],["15 minutes",15*$n],["30 minutes",30*$n],["hour",Sn],["3 hours",3*Sn],["6 hours",6*Sn],["12 hours",12*Sn],["day",Ve],["2 days",2*Ve],["week",be],["2 weeks",2*be],["month",An],["3 months",3*An],["6 months",6*An],["year",Je],["2 years",2*Je],["5 years",5*Je],["10 years",10*Je],["20 years",20*Je],["50 years",50*Je],["100 years",100*Je]],fs=new Map([["second",rr],["minute",$n],["hour",Sn],["day",Ve],["monday",be],["tuesday",be],["wednesday",be],["thursday",be],["friday",be],["saturday",be],["sunday",be],["week",be],["month",An],["year",Je]]),ip=new Map([["second",xe],["minute",ba],["hour",_a],["day",Bn],["monday",di],["tuesday",r0],["wednesday",i0],["thursday",Pn],["friday",o0],["saturday",a0],["sunday",_r],["week",_r],["month",Ni],["year",he]]),op=new Map([["second",xe],["minute",Ai],["hour",Ci],["day",va],["monday",pi],["tuesday",f0],["wednesday",c0],["thursday",On],["friday",s0],["saturday",u0],["sunday",wr],["week",wr],["month",Di],["year",de]]),Ri=Symbol("intervalDuration"),Aa=Symbol("intervalType");for(const[t,e]of ip)e[Ri]=fs.get(t),e[Aa]="time";for(const[t,e]of op)e[Ri]=fs.get(t),e[Aa]="utc";const $3=[["year",de,"utc"],["year",he,"time"],["month",Di,"utc"],["month",Ni,"time"],["day",va,"utc",6*An],["day",Bn,"time",6*An],["hour",Ci,"utc",3*Ve],["minute",Ai,"utc",6*Sn],["second",xe,"utc",30*$n]];function ap(t,e,n){let r=`${t}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const o=/^(?:(\d+)\s+)/.exec(r);switch(o&&(r=r.slice(o[0].length),i=+o[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let a=e.get(r);if(!a)throw new Error(`unknown interval: ${t}`);if(i>1){if(!a.every)throw new Error(`non-periodic interval: ${r}`);a=a.every(i),a[Ri]=fs.get(r)*i,a[Aa]=n}return a}function fp(t){return ap(t,ip,"time")}function cs(t){return ap(t,op,"utc")}function ol(t,e){if(!(e>1))return;const n=t[Ri];if(!df.some(([,i])=>i===n)||n%Ve===0&&Ve<n&&n<An)return;const[r]=df[na(([,i])=>Math.log(i)).center(df,Math.log(n*e))];return(t[Aa]==="time"?fp:cs)(r)}function al(t,e,n){const r=e==="time"?Kc:Li;if(n==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=S3(n);switch(t){case"millisecond":return Qn(r(".%L"),r(":%M:%S"),i);case"second":return Qn(r(":%S"),r("%-I:%M"),i);case"minute":return Qn(r("%-I:%M"),r("%p"),i);case"hour":return Qn(r("%-I %p"),r("%b %-d"),i);case"day":return Qn(r("%-d"),r("%b"),i);case"month":return Qn(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function S3(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function T3(t,e){const n=ue(b2(t,(r,i)=>Math.abs(i-r)));if(n<1e3)return al("millisecond","utc",e);for(const[r,i,o,a]of $3){if(n>a||r==="hour"&&!n)break;if(t.every(f=>i.floor(f)>=f))return al(r,o,e)}}function Qn(t,e,n){return(r,i,o)=>{const a=t(r,i),f=e(r,i),c=i-xr(o);return i!==c&&o[c]!==void 0&&f===e(o[c],c)?a:n(a,f)}}const gi=Object.getPrototypeOf(Uint8Array),k3=Object.prototype.toString,cp=Symbol("reindex");function At(t,e,n){const r=typeof e;return r==="string"?fl(t,sp(e),n):r==="function"?fl(t,e,n):r==="number"||e instanceof Date||r==="boolean"?$t(t,Fi(e),n):typeof(e==null?void 0:e.transform)=="function"?cl(e.transform(t),n):E3(cl(e,n),t==null?void 0:t[cp])}function E3(t,e){return e?ps(t,e):t}function fl(t,e,n){return $t(t,(n==null?void 0:n.prototype)instanceof gi?A3(e):e,n)}function cl(t,e){return e===void 0?Kt(t):t instanceof e?t:e.prototype instanceof gi&&!(t instanceof gi)?e.from(t,ls):e.from(t)}function A3(t){return(e,n)=>ls(t(e,n))}const mo=[null],sp=t=>e=>e[t],ss={transform:je},Pt={transform:t=>t},C3=()=>1,N3=()=>!0,zt=t=>t==null?t:`${t}`,yt=t=>t==null?t:+t,us=t=>t?t[0]:void 0,yc=t=>t?t[1]:void 0,Fi=t=>()=>t;function D3(t){const e=+`${t}`.slice(1)/100;return(n,r)=>lr(n,e,r)}function vr(t){return t instanceof gi?t:$t(t,ls,Float64Array)}function ls(t){return t==null?NaN:Number(t)}function L3(t){return $t(t,up)}function up(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?rp(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function Xe(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:Ca(t)?[void 0,t]:[t,void 0]}function Xt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function lp(t,e,n){if(t!=null)return me(t,e,n)}function me(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function Kt(t){return t==null||t instanceof Array||t instanceof gi?t:Array.from(t)}function $t(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function mi(t,e=Array){return t instanceof e?t.slice():e.from(t)}function R3({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function hp({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function F3(t){return R3(t)||hp(t)||t.interval!==void 0}function pn(t){return(t==null?void 0:t.toString)===k3}function bc(t){return pn(t)&&(t.type!==void 0||t.domain!==void 0)}function hs(t){return pn(t)&&typeof t.transform!="function"}function yi(t){return hs(t)&&t.value===void 0&&t.channel===void 0}function I3(t,e,n,r=Pt){return e===void 0&&n===void 0?(e=0,n=t===void 0?r:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function ds(t,e){return t===void 0&&e===void 0?[us,yc]:[t,e]}function dp({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Xe(e)),t===void 0&&([t]=Xe(n)),t}function je(t){const e=t.length,n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function ps(t,e){return $t(e,n=>t[n],t.constructor)}function P3(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function Tn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function O3(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Ko(t){let e;return[{transform:()=>e,label:Yn(t)},n=>e=n]}function Pe(t){return t==null?[t]:Ko(t)}function Yn(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function _c(t,e){return{transform(n){const r=t.transform(n),i=e.transform(n);return Gt(r)||Gt(i)?$t(r,(o,a)=>new Date((+r[a]+ +i[a])/2)):$t(r,(o,a)=>(+r[a]+ +i[a])/2,Float64Array)},label:t.label}}function pp(t,e){const n=gp(e==null?void 0:e.interval,e==null?void 0:e.type);return n?$t(t,n):t}function gp(t,e){const n=gs(t,e);return n&&(r=>un(r)?n.floor(r):r)}function gs(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Ff(Math.ceil(r*n),i*n).map(o=>o/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Ff(Math.ceil(r/n),i/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?fp:cs)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function Cr(t,e){if(t=gs(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function U3(t,e){if(t=Cr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function B3(t){return ir(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function ir(t){return typeof(t==null?void 0:t.range)=="function"}function Ii(t){return t===void 0||hs(t)?t:{value:t}}function z3(t){return t==null?null:{transform:e=>At(e,t,Float64Array),label:Yn(t)}}function gn(t){return t&&typeof t[Symbol.iterator]=="function"}function mp(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function sl(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function Gt(t){for(const e of t)if(e!=null)return e instanceof Date}function q3(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&rp(e)}function Y3(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function W3(t){for(const e of t)if(e!=null)return typeof e=="number"}function pf(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}const H3=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Ca(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||H3.has(t))}function G3(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function qt(t){return t==null||bi(t)}function bi(t){return/^\s*none\s*$/i.test(t)}function V3(t){return/^\s*round\s*$/i.test(t)}function yp(t,e){return lp(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function ms(t="middle"){return yp(t,"frameAnchor")}function xr(t){if(t==null)return;const e=t[0],n=t[t.length-1];return xi(e,n)}function X3(t={},...e){let n=t;for(const r of e)for(const i in r)if(n[i]===void 0){const o=r[i];n===t?n={...n,[i]:o}:n[i]=o}return n}function j3(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[r,n]}))}function bp(t){return gn(t)?j3(t):t}const Me=Symbol("position"),Ze=Symbol("color"),Pi=Symbol("radius"),Oi=Symbol("length"),Ui=Symbol("opacity"),Na=Symbol("symbol"),_p=Symbol("projection"),xt=new Map([["x",Me],["y",Me],["fx",Me],["fy",Me],["r",Pi],["color",Ze],["opacity",Ui],["symbol",Na],["length",Oi],["projection",_p]]);function Z3(t){return t===Me||t===_p}function K3(t){return t===Me||t===Pi||t===Oi||t===Ui}const Q3=Math.sqrt(3),J3=2/Q3,t5={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*J3,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},wp=new Map([["asterisk",N1],["circle",ts],["cross",D1],["diamond",R1],["diamond2",F1],["hexagon",t5],["plus",I1],["square",P1],["square2",O1],["star",B1],["times",W1],["triangle",z1],["triangle2",q1],["wye",Y1]]);function vp(t){return t&&typeof t.draw=="function"}function e5(t){return vp(t)?!0:typeof t!="string"?!1:wp.has(t.toLowerCase())}function ys(t){if(t==null||vp(t))return t;const e=wp.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function bs({filter:t,sort:e,reverse:n,transform:r,initializer:i,...o}={},a){if(r===void 0&&(t!=null&&(r=xp(t)),e!=null&&!yi(e)&&(r=gf(r,$p(e))),n&&(r=gf(r,Mp))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||yi(e))&&{sort:e},transform:gf(r,a)}}function Qo({filter:t,sort:e,reverse:n,initializer:r,...i}={},o){return r===void 0&&(t!=null&&(r=xp(t)),e!=null&&!yi(e)&&(r=mf(r,$p(e))),n&&(r=mf(r,Mp))),{...i,...(e===null||yi(e))&&{sort:e},initializer:mf(r,o)}}function gf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i){return{data:n,facets:r}=t.call(this,n,r,i),e.call(this,Kt(n),r,i)}}function mf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i,...o){let a,f,c,s,u,h;return{data:f=n,facets:c=r,channels:a}=t.call(this,n,r,i,...o),{data:u=f,facets:h=c,channels:s}=e.call(this,f,c,{...i,...a},...o),{data:u,facets:h,channels:{...a,...s}}}}function xp(t){return(e,n)=>{const r=At(e,t);return{data:e,facets:n.map(i=>i.filter(o=>r[o]))}}}function Mp(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function $p(t){return(typeof t=="function"&&t.length!==1?n5:r5)(t)}function n5(t){return(e,n)=>{const r=(i,o)=>t(e[i],e[o]);return{data:e,facets:n.map(i=>i.slice().sort(r))}}}function r5(t){let e,n;({channel:e,value:t,order:n}={...Ii(t)});const r=e==null?void 0:e.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?Zo:pe),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=pe;break;case"descending":n=Zo;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,a)=>{let f;if(e===void 0)f=At(i,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(f=a[e],!f)return{};f=f.value}const c=(s,u)=>n(f[s],f[u]);return{data:i,facets:o.map(s=>s.slice().sort(c))}}}function ro(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function i5(t,e,n=Sp){const r=Object.entries(t);return e.title!=null&&t.title===void 0&&r.push(["title",l5]),e.href!=null&&t.href===void 0&&r.push(["href",ws]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?o5(i):n(i,o,e))}function Sp(t,e,n,r=Tp){let i;pn(e)&&"reduce"in e&&(i=e.scale,e=e.reduce);const o=r(t,e,n),[a,f]=Ko(o.label);let c;return{name:t,output:i===void 0?a:{value:a,scale:i},initialize(s){o.initialize(s),c=f([])},scope(s,u){o.scope(s,u)},reduce(s,u){c.push(o.reduce(s,u))}}}function o5(t){return{name:t,initialize(){},scope(){},reduce(){}}}function Tp(t,e,n,r=_s){const i=O3(t,n),o=r(e,i);let a,f;return{label:Yn(o===Jo?null:i,o.label),initialize(c){a=i===void 0?c:At(c,i),o.scope==="data"&&(f=o.reduceIndex(je(c),a))},scope(c,s){o.scope===c&&(f=o.reduceIndex(s,a))},reduce(c,s){return o.scope==null?o.reduceIndex(c,a,s):o.reduceIndex(c,a,f,s)}}}function ul(t,e){return e?ai(oa(t,n=>e[n]),us):[[,t]]}function _s(t,e,n=a5){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&pn(t))return s5(t);if(typeof t=="function")return u5(t);if(/^p\d{2}$/i.test(t))return Oe(D3(t));switch(`${t}`.toLowerCase()){case"first":return ws;case"last":return h5;case"identity":return kp;case"count":return Jo;case"distinct":return d5;case"sum":return e==null?Jo:p5;case"proportion":return hl(e,"data");case"proportion-facet":return hl(e,"facet");case"deviation":return Oe(bh);case"min":return Oe(Ye);case"min-index":return Oe(h2);case"max":return Oe(ue);case"max-index":return Oe(l2);case"mean":return ll(g2);case"median":return ll(Rf);case"variance":return Oe(yh);case"mode":return Oe(y2)}return n(t)}function a5(t){throw new Error(`invalid reduce: ${t}`)}function f5(t,e){for(const n in e){const r=e[n];if(r!==void 0&&!t.some(i=>i.name===n))return r}}function c5(t,e,n){if(e){const r=e.output.transform(),i=(o,a)=>pe(r[o],r[a]);t.forEach(o=>o.sort(i))}n&&t.forEach(r=>r.reverse())}function s5(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function u5(t){return{reduceIndex(e,n,r){return t(ps(n,e),r)}}}function Oe(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function ll(t){return{reduceIndex(e,n){const r=t(e,i=>n[i]);return Gt(n)?new Date(r):r}}}const kp={reduceIndex(t,e){return ps(e,t)}},ws={reduceIndex(t,e){return e[t[0]]}},l5={reduceIndex(t,e){const r=ai(ar(t,o=>o.length,o=>e[o]),yc),i=r.slice(-5).reverse();if(i.length<r.length){const o=r.slice(0,-4);i[5-1]=[` ${o.length.toLocaleString("en-US")} more`,fn(o,yc)]}return i.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},h5={reduceIndex(t,e){return e[t[t.length-1]]}},Jo={label:"Frequency",reduceIndex(t){return t.length}},d5={label:"Distinct",reduceIndex(t,e){const n=new ia;for(const r of t)n.add(e[r]);return n.size}},p5=Oe(fn);function hl(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:e,reduceIndex:(n,r,i=1)=>fn(n,o=>r[o])/i}}function _i(t,{scale:e,type:n,value:r,filter:i,hint:o,label:a=Yn(r)},f){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),Ep(f,{scale:e,type:n,value:At(t,r),label:a,filter:i,hint:o})}function g5(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,_i(e,r,n)]))}function m5(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:o}])=>{const a=i==null?null:e[i];return[r,a==null?o:$t(o,a)]}));return n.channels=t,n}function Ep(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&pf(r,Ca)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&pf(r,G3)?null:"opacity";break;case"symbol":n!==!0&&pf(r,e5)?(e.scale=null,e.value=$t(r,ys)):e.scale="symbol";break;default:e.scale=xt.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!xt.has(n))throw new Error(`unknown scale: ${n}`);return e}function y5(t,e,n,r,i){const{order:o,reverse:a,reduce:f=!0,limit:c}=i;for(const s in i){if(!xt.has(s))continue;let{value:u,order:h=o,reverse:l=a,reduce:d=f,limit:p=c}=Ii(i[s]);const g=u==null?void 0:u.startsWith("-");if(g&&(u=u.slice(1)),h=h===void 0?g!==(u==="width"||u==="height")?Cp:Ap:w5(h),d==null||d===!1)continue;const m=s==="fx"||s==="fy"?_5(e,r[s]):b5(n,s);if(!m)throw new Error(`missing channel for scale: ${s}`);const _=m.value,[y=0,v=1/0]=gn(p)?p:p<0?[p]:[0,p];if(u==null)m.domain=()=>{let b=Array.from(new ia(_));return l&&(b=b.reverse()),(y!==0||v!==1/0)&&(b=b.slice(y,v)),b};else{const b=u==="data"?t:u==="height"?dl(n,"y1","y2"):u==="width"?dl(n,"x1","x2"):wc(n,u,u==="y"?"y2":u==="x"?"x2":void 0),w=_s(d===!0?"max":d,b);m.domain=()=>{let x=o2(je(_),$=>w.reduceIndex($,b),$=>_[$]);return h&&x.sort(h),l&&x.reverse(),(y!==0||v!==1/0)&&(x=x.slice(y,v)),x.map(us)}}}}function b5(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function _5(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let o=0;o<n.length;++o){const a=r[n[o][0]];for(const f of t[o])i[f]=a}return e}function dl(t,e,n){const r=wc(t,e),i=wc(t,n);return $t(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function wc(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function w5(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return Ap;case"descending":return Cp}throw new Error(`invalid order: ${t}`)}function Ap([t,e],[n,r]){return pe(e,r)||pe(t,n)}function Cp([t,e],[n,r]){return Zo(e,r)||pe(t,n)}function pl(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function v5(t){let e,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,o)=>i!==r[o]))&&(n=r,e=t(...r)),e)}const x5=v5(t=>new Intl.NumberFormat(t));function M5(t="en-US"){const e=x5(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function $5(t){return v3(t,"Invalid Date")}function S5(t="en-US"){const e=M5(t);return n=>(n instanceof Date?$5:typeof n=="number"?e:zt)(n)}const Un=S5();let vc=0,xc;function T5(){const t=vc;return vc=0,xc=void 0,t}function rn(t){t!==xc&&(xc=t,console.warn(t),++vc)}const Yt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let k5=0;function gl(){return`plot-clip-${++k5}`}function E5(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:f,fillOpacity:c,stroke:s,strokeWidth:u,strokeOpacity:h,strokeLinejoin:l,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:g,strokeDashoffset:m,opacity:_,mixBlendMode:y,imageFilter:v,paintOrder:b,pointerEvents:w,shapeRendering:x,channels:$},{ariaLabel:E,fill:k="currentColor",fillOpacity:A,stroke:M="none",strokeOpacity:L,strokeWidth:F,strokeLinecap:O,strokeLinejoin:S,strokeMiterlimit:U,paintOrder:R}){k===null&&(f=null,c=null),M===null&&(s=null,h=null),qt(k)?!qt(M)&&(!qt(f)||$!=null&&$.fill)&&(M="none"):qt(M)&&(!qt(s)||$!=null&&$.stroke)&&(k="none");const[Y,P]=Xe(f,k),[C,B]=Xt(c,A),[z,W]=Xe(s,M),[J,Z]=Xt(h,L),[X,D]=Xt(_);bi(W)||(u===void 0&&(u=F),d===void 0&&(d=O),l===void 0&&(l=S),p===void 0&&!V3(l)&&(p=U),!bi(P)&&b===void 0&&(b=R));const[q,N]=Xt(u);return k!==null&&(t.fill=Nt(P,"currentColor"),t.fillOpacity=zr(B,1)),M!==null&&(t.stroke=Nt(W,"none"),t.strokeWidth=zr(N,1),t.strokeOpacity=zr(Z,1),t.strokeLinejoin=Nt(l,"miter"),t.strokeLinecap=Nt(d,"butt"),t.strokeMiterlimit=zr(p,4),t.strokeDasharray=Nt(g,"none"),t.strokeDashoffset=Nt(m,"0")),t.target=zt(a),t.ariaLabel=zt(E),t.ariaDescription=zt(i),t.ariaHidden=zt(o),t.opacity=zr(D,1),t.mixBlendMode=Nt(y,"normal"),t.imageFilter=Nt(v,"none"),t.paintOrder=Nt(b,"normal"),t.pointerEvents=Nt(w,"auto"),t.shapeRendering=Nt(x,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:Y,scale:"auto",optional:!0},fillOpacity:{value:C,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:J,scale:"auto",optional:!0},strokeWidth:{value:q,optional:!0},opacity:{value:X,scale:"auto",optional:!0}}}function A5(t,e){e&&t.filter(n=>os(e[n])).append("title").call(N5,e)}function C5(t,e){e&&t.filter(([n])=>os(e[n])).append("title").call(D5,e)}function N5(t,e){e&&t.text(n=>Un(e[n]))}function D5(t,e){e&&t.text(([n])=>Un(e[n]))}function Wn(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:c,strokeWidth:s,opacity:u,href:h}){r&&K(t,"aria-label",l=>r[l]),o&&K(t,"fill",l=>o[l]),a&&K(t,"fill-opacity",l=>a[l]),f&&K(t,"stroke",l=>f[l]),c&&K(t,"stroke-opacity",l=>c[l]),s&&K(t,"stroke-width",l=>s[l]),u&&K(t,"opacity",l=>u[l]),h&&Dp(t,l=>h[l],e),n||A5(t,i)}function L5(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:c,strokeWidth:s,opacity:u,href:h}){r&&K(t,"aria-label",([l])=>r[l]),o&&K(t,"fill",([l])=>o[l]),a&&K(t,"fill-opacity",([l])=>a[l]),f&&K(t,"stroke",([l])=>f[l]),c&&K(t,"stroke-opacity",([l])=>c[l]),s&&K(t,"stroke-width",([l])=>s[l]),u&&K(t,"opacity",([l])=>u[l]),h&&Dp(t,([l])=>h[l],e),n||C5(t,i)}function R5({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:f,href:c},{tip:s}){return[t,s?void 0:e,n,r,i,o,a,f,c].filter(u=>u!==void 0)}function F5(t,e,n){const r=oa(t,i=>e[i]);return n===void 0&&r.size>1+t.length>>1&&rn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*I5(t,e,n,r){const{z:i}=n,{z:o}=r,a=R5(r,n),f=[...e,...a];for(const c of o?F5(t,o,i):[t]){let s,u;t:for(const h of c){for(const l of f)if(!un(l[h])){u&&u.push(-1);continue t}if(s===void 0){u&&(yield u),s=a.map(l=>Tn(l[h])),u=[h];continue}u.push(h);for(let l=0;l<a.length;++l)if(Tn(a[l][h])!==s[l]){yield u,s=a.map(p=>Tn(p[h])),u=[h];continue t}}u&&(yield u)}}function Np(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=me(t,"clip",["frame","sphere"])),t}function P5(t,e,n,r){let i;const{clip:o=r.clip}=e;switch(o){case"frame":{const{width:a,height:f,marginLeft:c,marginRight:s,marginTop:u,marginBottom:h}=n,l=gl();i=`url(#${l})`,t=Ot("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",l).append("rect").attr("x",c).attr("y",u).attr("width",a-s-c).attr("height",f-u-h)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=r;if(!a)throw new Error('the "sphere" clip option requires a projection');const f=gl();i=`url(#${f})`,t.append("clipPath").attr("id",f).append("path").attr("d",Wc(a)({type:"Sphere"}));break}}K(t,"aria-label",e.ariaLabel),K(t,"aria-description",e.ariaDescription),K(t,"aria-hidden",e.ariaHidden),K(t,"clip-path",i)}function Ke(t,e,n,r){P5(t,e,n,r),K(t,"fill",e.fill),K(t,"fill-opacity",e.fillOpacity),K(t,"stroke",e.stroke),K(t,"stroke-width",e.strokeWidth),K(t,"stroke-opacity",e.strokeOpacity),K(t,"stroke-linejoin",e.strokeLinejoin),K(t,"stroke-linecap",e.strokeLinecap),K(t,"stroke-miterlimit",e.strokeMiterlimit),K(t,"stroke-dasharray",e.strokeDasharray),K(t,"stroke-dashoffset",e.strokeDashoffset),K(t,"shape-rendering",e.shapeRendering),K(t,"filter",e.imageFilter),K(t,"paint-order",e.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=e;K(t,"pointer-events",i)}function Qe(t,e){O5(t,"mix-blend-mode",e.mixBlendMode),K(t,"opacity",e.opacity)}function Dp(t,e,n){t.each(function(r){const i=e(r);if(i!=null){const o=this.ownerDocument.createElementNS(hr.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(hr.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function K(t,e,n){n!=null&&t.attr(e,n)}function O5(t,e,n){n!=null&&t.style(e,n)}function De(t,e,{x:n,y:r},i=Yt,o=Yt){i+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&t.attr("transform",`translate(${i},${o})`)}function Nt(t,e){if((t=zt(t))!==e)return t}function zr(t,e){if((t=yt(t))!==e)return t}const U5=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function vs(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!U5.test(t))throw new Error(`invalid class name: ${t}`);return t}function xs(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function Da({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-i:(a+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-o:(r+n-o)/2]}function Ms(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Np(n)}}function Ot(t,{document:e}){return Qr(fa(t).call(e.documentElement))}const Lp=Math.PI,Re=2*Lp,ml=.618;function B5({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let f,c,s="frame";if(pn(t)){let w;if({type:t,domain:c,inset:w,insetTop:n=w!==void 0?w:n,insetRight:r=w!==void 0?w:r,insetBottom:i=w!==void 0?w:i,insetLeft:o=w!==void 0?w:o,clip:s=s,...f}=t,t==null)return}typeof t!="function"&&({type:t}=Rp(t));const{width:u,height:h,marginLeft:l,marginRight:d,marginTop:p,marginBottom:g}=a,m=u-l-d-o-r,_=h-p-g-n-i;if(t=t==null?void 0:t({width:m,height:_,clip:s,...f}),t==null)return;s=z5(s,l,p,u-d,h-g);let y=l+o,v=p+n,b;if(c!=null){const[[w,x],[$,E]]=Wc(t).bounds(c),k=Math.min(m/($-w),_/(E-x));k>0?(y-=(k*(w+$)-m)/2,v-=(k*(x+E)-_)/2,b=sc({point(A,M){this.stream.point(A*k+y,M*k+v)}})):rn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return b??(b=y===0&&v===0?Fp():sc({point(w,x){this.stream.point(w+y,x+v)}})),{stream:w=>t.stream(b.stream(s(w)))}}function Rp(t){switch(`${t}`.toLowerCase()){case"albers-usa":return fe(Xw,.7463,.4673);case"albers":return io(Fd,.7463,.4673);case"azimuthal-equal-area":return fe(jw,4,4);case"azimuthal-equidistant":return fe(Zw,Re,Re);case"conic-conformal":return io(Jw,Re,Re);case"conic-equal-area":return io(Uo,6.1702,2.9781);case"conic-equidistant":return io(nv,7.312,3.6282);case"equal-earth":return fe(iv,5.4133,2.6347);case"equirectangular":return fe(tv,Re,Lp);case"gnomonic":return fe(ov,3.4641,3.4641);case"identity":return{type:Fp};case"reflect-y":return{type:q5};case"mercator":return fe(Kw,Re,Re);case"orthographic":return fe(av,2,2);case"stereographic":return fe(fv,2,2);case"transverse-mercator":return fe(cv,Re,Re);default:throw new Error(`unknown projection type: ${t}`)}}function z5(t,e,n,r,i){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return _d(e,n,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function fe(t,e,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:f})=>{var s,u,h;const c=t();return a!=null&&((s=c.precision)==null||s.call(c,a)),o!=null&&((u=c.rotate)==null||u.call(c,o)),typeof f=="number"&&((h=c.clipAngle)==null||h.call(c,f)),c.scale(Math.min(r/e,i/n)),c.translate([r/2,i/2]),c},aspectRatio:n/e}}function io(t,e,n){const{type:r,aspectRatio:i}=fe(t,e,n);return{type:o=>{const{parallels:a,domain:f,width:c,height:s}=o,u=r(o);return a!=null&&(u.parallels(a),f===void 0&&u.fitSize([c,s],{type:"Sphere"})),u},aspectRatio:i}}const Fp=Fi({stream:t=>t}),q5=Fi(sc({point(t,e){this.stream.point(t,-e)}}));function Y5(t,e,n,r){const i=n[t],o=n[e],a=i.length,f=n[t]=new Float64Array(a).fill(NaN),c=n[e]=new Float64Array(a).fill(NaN);let s;const u=r.stream({point(h,l){f[s]=h,c[s]=l}});for(s=0;s<a;++s)u.point(i[s],o[s])}function W5({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(pn(t)&&(t=t.type),t!=null)}function H5(t){if(typeof(t==null?void 0:t.stream)=="function")return ml;if(pn(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=Rp(t);if(e)return e}return ml}}function G5(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},o={point(a,f){e.push(a),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)vn(a,o);return[r,i]}const Ip=new Map([["accent",N6],["category10",C6],["dark2",D6],["paired",L6],["pastel1",R6],["pastel2",F6],["set1",I6],["set2",P6],["set3",O6],["tableau10",U6]]);function V5(t){return t!=null&&Ip.has(`${t}`.toLowerCase())}const yl=new Map([...Ip,["brbg",Fe(v0,x0)],["prgn",Fe(M0,$0)],["piyg",Fe(S0,T0)],["puor",Fe(k0,E0)],["rdbu",Fe(pc,Yo)],["rdgy",Fe(A0,C0)],["rdylbu",Fe(gc,Wo)],["rdylgn",Fe(N0,D0)],["spectral",Fe(L0,R0)],["burd",bl(pc,Yo)],["buylrd",bl(gc,Wo)],["blues",kt(o1,a1)],["greens",kt(f1,c1)],["greys",kt(s1,u1)],["oranges",kt(g1,m1)],["purples",kt(l1,h1)],["reds",kt(d1,p1)],["turbo",Ie(M1)],["viridis",Ie($1)],["magma",Ie(S1)],["inferno",Ie(T1)],["plasma",Ie(k1)],["cividis",Ie(y1)],["cubehelix",Ie(b1)],["warm",Ie(_1)],["cool",Ie(w1)],["bugn",kt(F0,I0)],["bupu",kt(P0,O0)],["gnbu",kt(U0,B0)],["orrd",kt(z0,q0)],["pubu",kt(H0,G0)],["pubugn",kt(Y0,W0)],["purd",kt(V0,X0)],["rdpu",kt(j0,Z0)],["ylgn",kt(J0,t1)],["ylgnbu",kt(K0,Q0)],["ylorbr",kt(e1,n1)],["ylorrd",kt(r1,i1)],["rainbow",_l(v1)],["sinebow",_l(x1)]]);function kt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?le(e,n):t[n])}function Fe(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?le(e,n):t[n])}function bl(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?le(r=>e(1-r),n):t[n].slice().reverse())}function Ie(t){return({length:e})=>le(t,Math.max(2,Math.floor(e)))}function _l(t){return({length:e})=>le(t,Math.floor(e)+1).slice(0,-1)}function Pp(t){const e=`${t}`.toLowerCase();if(!yl.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return yl.get(e)}function La(t,e){const n=Pp(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function X5(t,e="greys"){const n=new Set,[r,i]=La(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const wl=new Map([["brbg",x0],["prgn",$0],["piyg",T0],["puor",E0],["rdbu",Yo],["rdgy",C0],["rdylbu",Wo],["rdylgn",D0],["spectral",R0],["burd",t=>Yo(1-t)],["buylrd",t=>Wo(1-t)],["blues",a1],["greens",c1],["greys",u1],["purples",h1],["reds",p1],["oranges",m1],["turbo",M1],["viridis",$1],["magma",S1],["inferno",T1],["plasma",k1],["cividis",y1],["cubehelix",b1],["warm",_1],["cool",w1],["bugn",I0],["bupu",O0],["gnbu",B0],["orrd",q0],["pubugn",W0],["pubu",G0],["purd",X0],["rdpu",Z0],["ylgnbu",Q0],["ylgn",t1],["ylorbr",n1],["ylorrd",i1],["rainbow",v1],["sinebow",x1]]);function $s(t){const e=`${t}`.toLowerCase();if(!wl.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return wl.get(e)}const j5=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Z5(t){return t!=null&&j5.has(`${t}`.toLowerCase())}const Op=t=>e=>t(1-e),yf=[0,1],vl=new Map([["number",Lt],["rgb",Rn],["hsl",qb],["hcl",Hb],["lab",Yb]]);function Up(t){const e=`${t}`.toLowerCase();if(!vl.has(e))throw new Error(`unknown interpolator: ${e}`);return vl.get(e)}function Bi(t,e,n,{type:r,nice:i,clamp:o,zero:a,domain:f=zp(t,n),unknown:c,round:s,scheme:u,interval:h,range:l=xt.get(t)===Pi?f8(n,f):xt.get(t)===Oi?c8(n,f):xt.get(t)===Ui?yf:void 0,interpolate:d=xt.get(t)===Ze?u==null&&l!==void 0?Rn:$s(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):s?Pc:Lt,reverse:p}){if(h=Cr(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=Up(d)),p=!!p,l!==void 0){const g=(f=Kt(f)).length,m=(l=Kt(l)).length;if(g!==m){if(d.length===1)throw new Error("invalid piecewise interpolator");d=ua(d,l),l=void 0}}if(d.length===1?(p&&(d=Op(d),p=!1),l===void 0&&(l=Float64Array.from(f,(g,m)=>m/(f.length-1)),l.length===2&&(l=yf)),e.interpolate((l===yf?Fi:Ts)(d))):e.interpolate(d),a){const[g,m]=te(f);(g>0||m<0)&&(f=mi(f),xr(f)!==Math.sign(g)?f[f.length-1]=0:f[0]=0)}return p&&(f=vo(f)),e.domain(f).unknown(c),i&&(e.nice(K5(i,r)),f=e.domain()),l!==void 0&&e.range(l),o&&e.clamp(o),{type:r,domain:f,range:l,scale:e,interpolate:d,interval:h}}function K5(t,e){return t===!0?void 0:typeof t=="number"?t:U3(t,e)}function Q5(t,e,n){return Bi(t,jc(),e,n)}function J5(t,e,n){return Bp(t,e,{...n,exponent:.5})}function Bp(t,e,{exponent:n=1,...r}){return Bi(t,t0().exponent(n),e,{...r,type:"pow"})}function t8(t,e,{base:n=10,domain:r=s8(e),...i}){return Bi(t,Zd().base(n),e,{...i,domain:r})}function e8(t,e,{constant:n=1,...r}){return Bi(t,Qd().constant(n),e,r)}function n8(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:a=u8(e),unknown:f,interpolate:c,reverse:s}){return n===void 0&&(n=c!==void 0?le(c,i):xt.get(t)===Ze?La(o,i):void 0),a.length>0&&(a=e0(a,n===void 0?{length:i}:n).quantiles()),Ss(t,e,{domain:a,range:n,reverse:s,unknown:f})}function r8(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=zp(t,e),unknown:a,interpolate:f,reverse:c}){const[s,u]=te(o);let h;return n===void 0?(h=fi(s,u,r),h[0]<=s&&h.splice(0,1),h[h.length-1]>=u&&h.pop(),r=h.length+1,n=f!==void 0?le(f,r):xt.get(t)===Ze?La(i,r):void 0):(h=le(Lt(s,u),r+1).slice(1,-1),s instanceof Date&&(h=h.map(l=>new Date(l)))),xr(Kt(o))<0&&h.reverse(),Ss(t,e,{domain:h,range:n,reverse:c,unknown:a})}function Ss(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?le(o,n.length+1):xt.get(t)===Ze?La(i,n.length+1):void 0,reverse:f}){n=Kt(n);const c=xr(n);if(!isNaN(c)&&!i8(n,c))throw new Error(`the ${t} scale has a non-monotonic domain`);return f&&(a=vo(a)),{type:"threshold",scale:n0(c<0?vo(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function i8(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const o=xi(i,i=t[n]);if(o!==0&&o!==e)return!1}return!0}function o8(t){return{type:"identity",scale:K3(xt.get(t))?Vd():e=>e}}function wi(t,e=ep){return t.length?[Ye(t,({value:n})=>n===void 0?n:Ye(n,e)),ue(t,({value:n})=>n===void 0?n:ue(n,e))]:[0,1]}function zp(t,e){const n=xt.get(t);return(n===Pi||n===Ui||n===Oi?a8:wi)(e)}function a8(t){return[0,t.length?ue(t,({value:e})=>e===void 0?e:ue(e,ep)):1]}function f8(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=lr(t,.5,({value:a})=>a===void 0?NaN:lr(a,.25,as)),i=e.map(a=>3*Math.sqrt(a/r)),o=30/ue(i);return o<1?i.map(a=>a*o):i}function c8(t,e){const n=Rf(t,({value:o})=>o===void 0?NaN:Rf(o,Math.abs)),r=e.map(o=>12*o/n),i=60/ue(r);return i<1?r.map(o=>o*i):r}function s8(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return wi(t,as);if(n<0)return wi(t,np)}return[1,10]}function u8(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function Ts(t){return(e,n)=>r=>t(e+r*(n-e))}function Ra(t,e,n,r,{type:i,nice:o,clamp:a,domain:f=wi(r),unknown:c,pivot:s=0,scheme:u,range:h,symmetric:l=!0,interpolate:d=xt.get(t)===Ze?u==null&&h!==void 0?Rn:$s(u!==void 0?u:"rdbu"):Lt,reverse:p}){s=+s,f=Kt(f);let[g,m]=f;if(f.length>2&&rn(`Warning: the diverging ${t} scale domain contains extra elements.`),xi(g,m)<0&&([g,m]=[m,g],p=!p),g=Math.min(g,s),m=Math.max(m,s),typeof d!="function"&&(d=Up(d)),h!==void 0&&(d=d.length===1?Ts(d)(...h):ua(d,h)),p&&(d=Op(d)),l){const _=n.apply(s),y=_-n.apply(g),v=n.apply(m)-_;y<v?g=n.invert(_-v):y>v&&(m=n.invert(_+y))}return e.domain([g,s,m]).unknown(c).interpolator(d),a&&e.clamp(a),o&&e.nice(o),{type:i,domain:[g,m],pivot:s,interpolate:d,scale:e}}function l8(t,e,n){return Ra(t,y0(),g8,e,n)}function h8(t,e,n){return qp(t,e,{...n,exponent:.5})}function qp(t,e,{exponent:n=1,...r}){return Ra(t,w0().exponent(n=+n),b8(n),e,{...r,type:"diverging-pow"})}function d8(t,e,{base:n=10,pivot:r=1,domain:i=wi(e,r<0?np:as),...o}){return Ra(t,b0().base(n=+n),m8,e,{domain:i,pivot:r,...o})}function p8(t,e,{constant:n=1,...r}){return Ra(t,_0().constant(n=+n),_8(n),e,r)}const g8={apply(t){return t},invert(t){return t}},m8={apply:Math.log,invert:Math.exp},y8={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function b8(t){return t===.5?y8:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function _8(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function Yp(t,e,n,r){return Bi(t,e,n,r)}function w8(t,e,n){return Yp(t,E6(),e,n)}function v8(t,e,n){return Yp(t,A6(),e,n)}const zi=Symbol("ordinal");function Wp(t,e,n,{type:r,interval:i,domain:o,range:a,reverse:f,hint:c}){return i=Cr(i,r),o===void 0&&(o=Gp(n,i,t)),(r==="categorical"||r===zi)&&(r="ordinal"),f&&(o=vo(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:r,domain:o,range:a,scale:e,hint:c,interval:i}}function x8(t,e,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:f,...c}){r=Cr(r,n),i===void 0&&(i=Gp(e,r,t));let s;if(xt.get(t)===Na)s=S8(e),o=o===void 0?T8(s):$t(o,ys);else if(xt.get(t)===Ze&&(o===void 0&&(n==="ordinal"||n===zi)&&(o=X5(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"tableau10"),a!==void 0))if(o!==void 0){const u=$s(a),h=o[0],l=o[1]-o[0];o=({length:d})=>le(p=>u(h+l*p),d)}else o=Pp(a);if(f===lc)throw new Error(`implicit unknown on ${t} scale is not supported`);return Wp(t,Xc().unknown(f),e,{...c,type:n,domain:i,range:o,hint:s})}function M8(t,e,{align:n=.5,padding:r=.5,...i}){return Hp(sv().align(n).padding(r),e,i,t)}function $8(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=t==="fx"||t==="fy"?0:r,...a}){return Hp(ma().align(n).paddingInner(i).paddingOuter(o),e,a,t)}function Hp(t,e,n,r){let{round:i}=n;return i!==void 0&&t.round(i=!!i),t=Wp(r,t,e,n),t.round=i,t}function Gp(t,e,n){const r=new ia;for(const{value:i,domain:o}of t){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(e!==void 0){const[i,o]=te(r).map(e.floor,e);return e.range(i,e.offset(o))}if(r.size>1e4&&xt.get(n)===Me)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return ai(r,pe)}function xl(t,e){let n;for(const{hint:r}of t){const i=r==null?void 0:r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function S8(t){return{fill:xl(t,"fill"),stroke:xl(t,"stroke")}}function T8(t){return qt(t.fill)?r3:n3}function Mc(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:f,nice:c,clamp:s,zero:u,align:h,padding:l,projection:d,facet:{label:p=e}={},...g}={}){const m={};for(const[_,y]of t){const v=g[_],b=C8(_,y,{round:xt.get(_)===Me?f:void 0,nice:c,clamp:s,zero:u,align:h,padding:l,projection:d,...v});if(b){let{label:w=_==="fx"||_==="fy"?p:e,percent:x,transform:$,inset:E,insetTop:k=E!==void 0?E:_==="y"?r:0,insetRight:A=E!==void 0?E:_==="x"?i:0,insetBottom:M=E!==void 0?E:_==="y"?o:0,insetLeft:L=E!==void 0?E:_==="x"?a:0}=v||{};if($==null)$=void 0;else if(typeof $!="function")throw new Error("invalid scale transform; not a function");b.percent=!!x,b.label=w===void 0?E8(y,b):w,b.transform=$,_==="x"||_==="fx"?(b.insetLeft=+L,b.insetRight=+A):(_==="y"||_==="fy")&&(b.insetTop=+k,b.insetBottom=+M),m[_]=b}}return m}function Ml(t){const e={},n={scales:e};for(const[r,i]of Object.entries(t)){const{scale:o,type:a,interval:f,label:c}=i;e[r]=F8(i),n[r]=o,o.type=a,f!=null&&(o.interval=f),c!=null&&(o.label=c)}return n}function k8(t,e){const{x:n,y:r,fx:i,fy:o}=t,a=i||o?ks(e):e;i&&$l(i,a),o&&Sl(o,a);const f=i||o?Vp(t,e):e;n&&$l(n,f),r&&Sl(r,f)}function E8(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Hn(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function ks(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:f,marginRight:c,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(e,f),marginRight:Math.max(n,c),marginBottom:Math.max(r,s),marginLeft:Math.max(i,u),width:o,height:a}}function Vp({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:c}=ks(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+i:f,height:e?e.scale.bandwidth()+r+o:c,facet:{width:f,height:c}}}function $l(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:o=0,marginRight:a=0}=e,f=o+n,c=i-a-r;t.range=[f,Math.max(f,c)],Hn(t)||(t.range=jp(t)),t.scale.range(t.range)}Xp(t)}function Sl(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:o=0,marginBottom:a=0}=e,f=o+n,c=i-a-r;t.range=[Math.max(f,c),f],Hn(t)?t.range.reverse():t.range=jp(t),t.scale.range(t.range)}Xp(t)}function Xp(t){t.round===void 0&&D8(t)&&A8(t)<=30&&t.scale.round(!0)}function A8({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-i,f=Math.abs(r-n)/Math.max(1,a+o*2);return(f-Math.floor(f))*a}function jp(t){const e=t.scale.domain().length+Zp(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(i,o)=>n+o/(e-1)*(r-n))}function C8(t,e=[],n={}){const r=N8(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&Hn({type:r})){const i=e.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Gt)?rn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Jn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Jn(r)}".`):i.some(q3)?rn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Jn(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Jn(r)}".`):i.some(Y3)&&rn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Jn(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Jn(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=oo(e,n,vr);break;case"identity":switch(xt.get(t)){case Me:n=oo(e,n,vr);break;case Na:n=oo(e,n,L8);break}break;case"utc":case"time":n=oo(e,n,L3);break}switch(r){case"diverging":return l8(t,e,n);case"diverging-sqrt":return h8(t,e,n);case"diverging-pow":return qp(t,e,n);case"diverging-log":return d8(t,e,n);case"diverging-symlog":return p8(t,e,n);case"categorical":case"ordinal":case zi:return x8(t,e,n);case"cyclical":case"sequential":case"linear":return Q5(t,e,n);case"sqrt":return J5(t,e,n);case"threshold":return Ss(t,e,n);case"quantile":return n8(t,e,n);case"quantize":return r8(t,e,n);case"pow":return Bp(t,e,n);case"log":return t8(t,e,n);case"symlog":return e8(t,e,n);case"utc":return v8(t,e,n);case"time":return w8(t,e,n);case"point":return M8(t,e,n);case"band":return $8(t,e,n);case"identity":return o8(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Jn(t){return typeof t=="symbol"?t.description:t}const Tl={toString:()=>"projection"};function N8(t,e,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:f}){if(t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&f!=null&&(n=Tl);for(const{type:s}of e)if(s!==void 0){if(n===void 0)n=s;else if(n!==s)throw new Error(`scale incompatible with channel: ${n} !== ${s}`)}if(n===Tl)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:s})=>s!==void 0))return;const c=xt.get(t);if(c===Pi)return"sqrt";if(c===Ui||c===Oi)return"linear";if(c===Na)return"ordinal";if((r||i||[]).length>2)return bf(c);if(r!==void 0){if(sl(r))return bf(c);if(Gt(r))return"utc"}else{const s=e.map(({value:u})=>u).filter(u=>u!==void 0);if(s.some(sl))return bf(c);if(s.some(Gt))return"utc"}if(c===Ze){if(a!=null||Z5(o))return"diverging";if(V5(o))return"categorical"}return"linear"}function bf(t){switch(t){case Me:return"point";case Ze:return zi;default:return"ordinal"}}function Hn({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===zi}function Zp({type:t}){return t==="threshold"}function D8({type:t}){return t==="point"||t==="band"}function Mr(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function oo(t,{domain:e,...n},r){for(const i of t)i.value!==void 0&&(i.value=r(i.value));return{domain:e===void 0?e:r(e),...n}}function L8(t){return $t(t,ys)}function R8(t){return e=>{if(!xt.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function F8({scale:t,type:e,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:f,pivot:c}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const s=t.unknown?t.unknown():void 0;return{type:e,domain:mi(n),...r!==void 0&&{range:mi(r)},...a!==void 0&&{transform:a},...f&&{percent:f},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...c!==void 0&&{pivot:c,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function I8(t,e,n={}){let r=.5-Yt,i=.5+Yt,o=.5+Yt,a=.5-Yt;for(const{marginTop:g,marginRight:m,marginBottom:_,marginLeft:y}of e)g>r&&(r=g),m>i&&(i=m),_>o&&(o=_),y>a&&(a=y);let{margin:f,marginTop:c=f!==void 0?f:r,marginRight:s=f!==void 0?f:i,marginBottom:u=f!==void 0?f:o,marginLeft:h=f!==void 0?f:a}=n;c=+c,s=+s,u=+u,h=+h;let{width:l=640,height:d=P8(t,n,{width:l,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,c-r+u-o)}=n;l=+l,d=+d;const p={width:l,height:d,marginTop:c,marginRight:s,marginBottom:u,marginLeft:h};if(t.fx||t.fy){let{margin:g,marginTop:m=g!==void 0?g:c,marginRight:_=g!==void 0?g:s,marginBottom:y=g!==void 0?g:u,marginLeft:v=g!==void 0?g:h}=n.facet??{};m=+m,_=+_,y=+y,v=+v,p.facet={marginTop:m,marginRight:_,marginBottom:y,marginLeft:v}}return p}function P8({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:f,marginRightDefault:c,marginBottomDefault:s,marginLeftDefault:u}){const h=n?n.scale.domain().length:1,l=H5(i);if(l){const p=r?r.scale.domain().length:1,g=(1.1*h-.1)/(1.1*p-.1)*l,m=Math.max(.1,Math.min(10,g));return Math.round((a-u-c)*m+f+s)}const d=e?Hn(e)?e.scale.domain().length:Math.max(7,17/h):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=kl("y",e)/(kl("x",t)*o),g=r?r.scale.bandwidth():1,m=n?n.scale.bandwidth():1,_=g*(a-u-c)-t.insetLeft-t.insetRight;return(p*_+e.insetTop+e.insetBottom)/m+f+s}return!!(e||n)*Math.max(1,Math.min(60,d*h))*20+!!r*30+60}function kl(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const f=e.scale.exponent();i=c=>Math.pow(c,f);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=te(r);return Math.abs(i(a)-i(o))}function O8(t,e){const{fx:n,fy:r}=Mc(t,e),i=n==null?void 0:n.scale.domain(),o=r==null?void 0:r.scale.domain();return i&&o?r2(i,o).map(([a,f],c)=>({x:a,y:f,i:c})):i?i.map((a,f)=>({x:a,i:f})):o?o.map((a,f)=>({y:a,i:f})):void 0}function U8(t,{x:e,y:n}){return e&&(e=$c(e)),n&&(n=$c(n)),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,i)=>e.get(r.x)-e.get(i.x)||n.get(r.y)-n.get(i.y):e?(r,i)=>e.get(r.x)-e.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Es(t,{fx:e,fy:n}){const r=je(t),i=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?ar(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):e?ar(r,a=>(a.fx=i[a[0]],a),a=>i[a]):ar(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function B8(t,e,{marginTop:n,marginLeft:r}){return t&&e?({x:i,y:o})=>`translate(${t(i)-r},${e(o)-n})`:t?({x:i})=>`translate(${t(i)-r},0)`:({y:i})=>`translate(0,${e(i)-n})`}function z8(t){const e=[],n=new Uint32Array(fn(t,r=>r.length));for(const r of t){let i=0;for(const o of t)r!==o&&(n.set(o,i),i+=o.length);e.push(n.slice(0,i))}return e}const q8=new Map([["top",_f],["right",xf],["bottom",wf],["left",vf],["top-left",ao(_f,vf)],["top-right",ao(_f,xf)],["bottom-left",ao(wf,vf)],["bottom-right",ao(wf,xf)],["top-empty",H8],["right-empty",X8],["bottom-empty",G8],["left-empty",V8],["empty",j8]]);function Y8(t){if(t==null)return null;const e=q8.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const El=new WeakMap;function $c(t){let e=El.get(t);return e||El.set(t,e=new Nn($t(t,(n,r)=>[n,r]))),e}function mn(t,e){return $c(t).get(e)}function W8(t,e,n){return e=Tn(e),n=Tn(n),t.find(r=>Object.is(Tn(r.x),e)&&Object.is(Tn(r.y),n))}function Fa(t,e,n){var r;return(r=W8(t,e,n))==null?void 0:r.empty}function _f(t,{y:e},{y:n}){return e?mn(e,n)===0:!0}function wf(t,{y:e},{y:n}){return e?mn(e,n)===e.length-1:!0}function vf(t,{x:e},{x:n}){return e?mn(e,n)===0:!0}function xf(t,{x:e},{x:n}){return e?mn(e,n)===e.length-1:!0}function H8(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=mn(e,r);if(o>0)return Fa(t,n,e[o-1])}function G8(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=mn(e,r);if(o<e.length-1)return Fa(t,n,e[o+1])}function V8(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=mn(e,n);if(o>0)return Fa(t,e[o-1],r)}function X8(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=mn(e,n);if(o<e.length-1)return Fa(t,e[o+1],r)}function j8(t,e,{empty:n}){return n}function ao(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Mf(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:i,y:o})=>{var a;return((a=r.get(i))==null?void 0:a.get(o))??[]}):e?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}class ae{constructor(e,n={},r={},i){const{facet:o="auto",facetAnchor:a,fx:f,fy:c,sort:s,dx:u=0,dy:h=0,margin:l=0,marginTop:d=l,marginRight:p=l,marginBottom:g=l,marginLeft:m=l,clip:_=i==null?void 0:i.clip,channels:y,tip:v,render:b}=r;if(this.data=e,this.sort=yi(s)?s:null,this.initializer=Qo(r).initializer,this.transform=this.initializer?r.transform:bs(r).transform,o===null||o===!1?this.facet=null:(this.facet=me(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===mo&&typeof f=="string"?[f]:f,this.fy=e===mo&&typeof c=="string"?[c]:c),this.facetAnchor=Y8(a),n=bp(n),y!==void 0&&(n={...Z8(y),...n}),i!==void 0&&(n={...E5(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([w,x])=>{if(hs(x.value)){const{value:$,label:E=x.label,scale:k=x.scale}=x.value;x={...x,label:E,scale:k,value:$}}if(e===mo&&typeof x.value=="string"){const{value:$}=x;x={...x,value:[$]}}return[w,x]}).filter(([w,{value:x,optional:$}])=>{if(x!=null)return!0;if($)return!1;throw new Error(`missing channel value: ${w}`)})),this.dx=+u,this.dy=+h,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+g,this.marginLeft=+m,this.clip=Np(_),this.tip=K8(v),this.facet==="super"){if(f||c)throw new Error("super-faceting cannot use fx or fy");for(const w in this.channels){const{scale:x}=n[w];if(!(x!=="x"&&x!=="y"))throw new Error("super-faceting cannot use x or y")}}b!=null&&(this.render=Qp(b,this.render))}initialize(e,n,r){let i=Kt(this.data);e===void 0&&i!=null&&(e=[je(i)]);const o=e;this.transform!=null&&({facets:e,data:i}=this.transform(i,e,r),i=Kt(i)),e!==void 0&&(e.original=o);const a=g5(this.channels,i);return this.sort!=null&&y5(i,e,a,n,this.sort),{data:i,facets:e,channels:a}}filter(e,n,r){for(const i in n){const{filter:o=un}=n[i];if(o!==null){const a=r[i];e=e.filter(f=>o(a[f]))}}return e}project(e,n,r){for(const i in e)if(e[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&Y5(i,o,n,r.projection)}}scale(e,n,r){const i=m5(e,n);return r.projection&&this.project(e,i,r),i}}function Kp(...t){return t.plot=ae.prototype.plot,t}function Qp(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,o,a,f){return t.call(this,n,r,i,o,a,(c,s,u,h,l)=>e.call(this,c,s,u,h,l,f))}}function Z8(t){return Object.fromEntries(Object.entries(bp(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:Ii(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function K8(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?me(t,"tip",["x","y","xy"]):t}function Ia(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:pn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const Al=new WeakMap;function As(t,e,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:f,render:c,...s}={}){return a=+a,i!=null&&(n??(n=null),f={...f,px:{value:i,scale:"x"}}),o!=null&&(r??(r=null),f={...f,py:{value:o,scale:"y"}}),{x:n,y:r,channels:f,...s,render:Qp(function(u,h,l,d,p,g){p={...p,pointerSticky:!1};const m=p.ownerSVGElement,{data:_}=p.getMarkState(this);let y=Al.get(m);y||Al.set(m,y={sticky:!1,roots:[],renders:[]});let v=y.renders.push(W)-1;const{x:b,y:w,fx:x,fy:$}=h;let E=x?x(u.fx)-d.marginLeft:0,k=$?$(u.fy)-d.marginTop:0;b!=null&&b.bandwidth&&(E+=b.bandwidth()/2),w!=null&&w.bandwidth&&(k+=w.bandwidth()/2);const A=u.fi!=null;let M;if(A){let D=y.facetStates;D||(y.facetStates=D=new Map),M=D.get(this),M||D.set(this,M=new Map)}const[L,F]=Da(this,d),{px:O,py:S}=l,U=O?D=>O[D]:Jp(l,L),R=S?D=>S[D]:tg(l,F);let Y,P,C,B;function z(D,q){if(A)if(B&&(B=cancelAnimationFrame(B)),D==null)M.delete(u.fi);else{M.set(u.fi,q),B=requestAnimationFrame(()=>{B=null;for(const[N,H]of M)if(H<q||H===q&&N<u.fi){D=null;break}W(D)});return}W(D)}function W(D){if(Y===D&&C===y.sticky)return;Y=D,C=p.pointerSticky=y.sticky;const q=Y==null?[]:[Y];A&&(q.fx=u.fx,q.fy=u.fy,q.fi=u.fi);const N=g(q,h,l,d,p);if(P){if(A){const H=P.parentNode,V=P.getAttribute("transform"),T=N.getAttribute("transform");V?N.setAttribute("transform",V):N.removeAttribute("transform"),T?H.setAttribute("transform",T):H.removeAttribute("transform"),N.removeAttribute("aria-label"),N.removeAttribute("aria-description"),N.removeAttribute("aria-hidden")}P.replaceWith(N)}return y.roots[v]=P=N,Y==null&&(M==null?void 0:M.size)>1||p.dispatchValue(Y==null?null:_[Y]),N}function J(D){if(y.sticky||D.pointerType==="mouse"&&D.buttons===1)return;let[q,N]=ub(D);q-=E,N-=k;const H=q<d.marginLeft||q>d.width-d.marginRight?1:t,V=N<d.marginTop||N>d.height-d.marginBottom?1:e;let T=null,ot=a*a;for(const G of u){const at=H*(U(G)-q),bt=V*(R(G)-N),Dt=at*at+bt*bt;Dt<=ot&&(T=G,ot=Dt)}if(T!=null&&(t!==1||e!==1)){const G=U(T)-q,at=R(T)-N;ot=G*G+at*at}z(T,ot)}function Z(D){D.pointerType==="mouse"&&Y!=null&&(y.sticky&&y.roots.some(q=>q==null?void 0:q.contains(D.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(q=>q(null))):(y.sticky=!0,W(Y)),D.stopImmediatePropagation()))}function X(D){D.pointerType==="mouse"&&(y.sticky||z(null))}return m.addEventListener("pointerenter",J),m.addEventListener("pointermove",J),m.addEventListener("pointerdown",Z),m.addEventListener("pointerleave",X),W(null)},c)}}function Q8(t){return As(1,1,t)}function J8(t){return As(1,.01,t)}function t4(t){return As(.01,1,t)}function Jp({x1:t,x2:e,x:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function tg({y1:t,y2:e,y:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function eg(t){return Hn(t)&&t.interval===void 0?void 0:"tabular-nums"}function e4(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:f=0,marginBottom:c=16+r,marginLeft:s=0,style:u,ticks:h=(i-s-f)/64,tickFormat:l,fontVariant:d=eg(t),round:p=!0,opacity:g,className:m}=e;const _=Ms(e);m=vs(m),g=Xt(g)[1],l===null&&(l=()=>null);const y=Ot("svg",_).attr("class",`${m}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(L=>L.append("style").text(`.${m}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${m}-ramp text {
  white-space: pre;
}`)).call(xs,u);let v=L=>L.selectAll(".tick line").attr("y1",a+c-o),b;const w=p?(L,F)=>L.rangeRound(F):(L,F)=>L.range(F),{type:x,domain:$,range:E,interpolate:k,scale:A,pivot:M}=t;if(k){const L=E===void 0?k:ua(k.length===1?Ts(k):k,E);b=w(A.copy(),le(Lt(s,i-f),Math.min($.length+(M!==void 0),E===void 0?1/0:E.length)));const F=256,O=_.document.createElement("canvas");O.width=F,O.height=1;const S=O.getContext("2d");for(let U=0,R=F-1;U<F;++U)S.fillStyle=L(U/R),S.fillRect(U,0,1,1);y.append("image").attr("opacity",g).attr("x",s).attr("y",a).attr("width",i-s-f).attr("height",o-a-c).attr("preserveAspectRatio","none").attr("xlink:href",O.toDataURL())}else if(x==="threshold"){const L=$,F=l===void 0?O=>O:typeof l=="string"?Er(l):l;b=w(jc().domain([-1,E.length-1]),[s,i-f]),y.append("g").attr("fill-opacity",g).selectAll().data(E).enter().append("rect").attr("x",(O,S)=>b(S-1)).attr("y",a).attr("width",(O,S)=>b(S)-b(S-1)).attr("height",o-a-c).attr("fill",O=>O),h=$t(L,(O,S)=>S),l=O=>F(L[O],O)}else b=w(ma().domain($),[s,i-f]),y.append("g").attr("fill-opacity",g).selectAll().data($).enter().append("rect").attr("x",b).attr("y",a).attr("width",Math.max(0,b.bandwidth()-1)).attr("height",o-a-c).attr("fill",A),v=()=>{};return y.append("g").attr("transform",`translate(0,${o-c})`).call(k2(b).ticks(Array.isArray(h)?null:h,typeof l=="string"?l:void 0).tickFormat(typeof l=="function"?l:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Nt(d,"normal")).call(v).call(L=>L.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const ng=Math.PI/180;function Pa(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=$f(n),t.markerMid=$f(r),t.markerEnd=$f(i)}function $f(t){if(t==null||t===!1)return null;if(t===!0)return Nl;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Cl("auto");case"arrow-reverse":return Cl("auto-start-reverse");case"dot":return n4;case"circle":case"circle-fill":return Nl;case"circle-stroke":return r4}throw new Error(`invalid marker: ${t}`)}function Cl(t){return(e,n)=>Ot("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function n4(t,e){return Ot("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Nl(t,e){return Ot("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function r4(t,e){return Ot("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let i4=0;function Cs(t,e,{stroke:n},r){return rg(t,e,n&&(i=>n[i]),r)}function o4(t,e,{stroke:n},r){return rg(t,e,n&&(([i])=>n[i]),r)}function rg(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},o=()=>i,a){const f=new Map;function c(s){return function(u){const h=o(u);let l=f.get(s);l||f.set(s,l=new Map);let d=l.get(h);if(!d){const p=this.parentNode.insertBefore(s(h,a),this),g=`plot-marker-${++i4}`;p.setAttribute("id",g),l.set(h,d=`url(#${g})`)}return d}}e&&t.attr("marker-start",c(e)),n&&t.attr("marker-mid",c(n)),r&&t.attr("marker-end",c(r))}function Ns({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=og(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function ig({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=og(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function og(t,e,n){return t===void 0&&e===void 0&&n===void 0?Yt?[1,0]:[.5,.5]:[e,n]}function ag(t,{interval:e}){return t={...Ii(t)},t.interval=gs(t.interval===void 0?e:t.interval),t}function fg(t,e,n,r){const{[t]:i,[`${t}1`]:o,[`${t}2`]:a}=n,{value:f,interval:c}=ag(i,n);if(f==null||c==null&&!r)return n;const s=Yn(i);if(c==null){let d;const p={transform:g=>d||(d=At(g,f)),label:s};return{...n,[t]:void 0,[`${t}1`]:o===void 0?p:o,[`${t}2`]:a===void 0?p:a}}let u,h;function l(d){return h!==void 0&&d===u?h:h=$t(At(u=d,f),p=>c.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:l,label:s}:o,[`${t}2`]:a===void 0?{transform:d=>l(d).map(p=>c.offset(p)),label:s}:a})}function cg(t,e,n){const{[t]:r}=n,{value:i,interval:o}=ag(r,n);return i==null||o==null?n:e({...n,[t]:{label:Yn(r),transform:a=>{const f=$t(At(a,i),s=>o.floor(s)),c=f.map(s=>o.offset(s));return f.map(Gt(f)?(s,u)=>s==null||isNaN(s=+s)||(u=c[u],u==null)||isNaN(u=+u)?void 0:new Date((s+u)/2):(s,u)=>s==null||(u=c[u],u==null)?NaN:(+s+ +u)/2)}}})}function a4(t={}){return fg("x",Ns,t)}function sg(t={}){return fg("y",ig,t)}function f4(t={}){return cg("x",Ns,t)}function c4(t={}){return cg("y",ig,t)}const ug={ariaLabel:"rule",fill:null,stroke:"currentColor"};class s4 extends ae{constructor(e,n={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:f=a,insetBottom:c=a}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Ia(n,"x"),ug),this.insetTop=yt(f),this.insetBottom=yt(c),Pa(this,n)}render(e,n,r,i,o){const{x:a,y:f}=n,{x:c,y1:s,y2:u}=r,{width:h,height:l,marginTop:d,marginRight:p,marginLeft:g,marginBottom:m}=i,{insetTop:_,insetBottom:y}=this;return Ot("svg:g",o).call(Ke,this,i,o).call(De,this,{x:c&&a},Yt,0).call(v=>v.selectAll().data(e).enter().append("line").call(Qe,this).attr("x1",c?b=>c[b]:(g+h-p)/2).attr("x2",c?b=>c[b]:(g+h-p)/2).attr("y1",s&&!Mr(f)?b=>s[b]+_:d+_).attr("y2",u&&!Mr(f)?f.bandwidth?b=>u[b]+f.bandwidth()-y:b=>u[b]-y:l-m-y).call(Wn,this,r).call(Cs,this,r,o)).node()}}class u4 extends ae{constructor(e,n={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:f=a,insetLeft:c=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Ia(n,"y"),ug),this.insetRight=yt(f),this.insetLeft=yt(c),Pa(this,n)}render(e,n,r,i,o){const{x:a,y:f}=n,{y:c,x1:s,x2:u}=r,{width:h,height:l,marginTop:d,marginRight:p,marginLeft:g,marginBottom:m}=i,{insetLeft:_,insetRight:y}=this;return Ot("svg:g",o).call(Ke,this,i,o).call(De,this,{y:c&&f},0,Yt).call(v=>v.selectAll().data(e).enter().append("line").call(Qe,this).attr("x1",s&&!Mr(a)?b=>s[b]+_:g+_).attr("x2",u&&!Mr(a)?a.bandwidth?b=>u[b]+a.bandwidth()-y:b=>u[b]-y:h-p-y).attr("y1",c?b=>c[b]:(d+l-m)/2).attr("y2",c?b=>c[b]:(d+l-m)/2).call(Wn,this,r).call(Cs,this,r,o)).node()}}function l4(t,e){let{x:n=Pt,y:r,y1:i,y2:o,...a}=sg(e);return[i,o]=lg(r,i,o),new s4(t,{...a,x:n,y1:i,y2:o})}function Sc(t,e){let{y:n=Pt,x:r,x1:i,x2:o,...a}=a4(e);return[i,o]=lg(r,i,o),new u4(t,{...a,y:n,x1:i,x2:o})}function lg(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function hg(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)typeof e[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let o=0;o<n;++o)i+=e[o](r)+t[o+1];return i}}const h4={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},dg="";class Ds extends ae{constructor(e,n={}){const{x:r,y:i,text:o=gn(e)&&mp(e)?Pt:ss,frameAnchor:a,textAnchor:f=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:c=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:u=1/0,textOverflow:h,monospace:l,fontFamily:d=l?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:g,fontVariant:m,fontWeight:_,rotate:y}=n,[v,b]=Xt(y,0),[w,x]=b4(p);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:w,optional:!0},rotate:{value:z3(v),optional:!0},text:{value:o,filter:os,optional:!0}},n,h4),this.rotate=b,this.textAnchor=Nt(f,"middle"),this.lineAnchor=me(c,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+u,this.textOverflow=pg(h),this.monospace=!!l,this.fontFamily=zt(d),this.fontSize=x,this.fontStyle=zt(g),this.fontVariant=zt(m),this.fontWeight=zt(_),this.frameAnchor=ms(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=yg(this),this.clipLine=bg(this)}render(e,n,r,i,o){const{x:a,y:f}=n,{x:c,y:s,rotate:u,text:h,title:l,fontSize:d}=r,{rotate:p}=this,[g,m]=Da(this,i);return Ot("svg:g",o).call(Ke,this,i,o).call(mg,this,h,i).call(De,this,{x:c&&a,y:s&&f}).call(_=>_.selectAll().data(e).enter().append("text").call(Qe,this).call(d4,this,h,l).attr("transform",hg`translate(${c?y=>c[y]:g},${s?y=>s[y]:m})${u?y=>` rotate(${u[y]})`:p?` rotate(${p})`:""}`).call(K,"font-size",d&&(y=>d[y])).call(Wn,this,r)).node()}}function pg(t){return t==null?null:me(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function d4(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:f,clipLine:c}=e;t.each(function(s){const u=f(Un(n[s])??"").map(c),h=u.length,l=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let p=0;p<h;++p){if(++d,!u[p])continue;const g=this.ownerDocument.createElementNS(hr.svg,"tspan");g.setAttribute("x",0),p===d-1?g.setAttribute("y",`${(l+p)*o}em`):g.setAttribute("dy",`${d*o}em`),g.textContent=u[p],this.appendChild(g),d=0}}else l&&this.setAttribute("y",`${l*o}em`),this.textContent=u[0];if(a&&!r&&u[0]!==n[s]){const d=this.ownerDocument.createElementNS(hr.svg,"title");d.textContent=n[s],this.appendChild(d)}})}function gg(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=ds(e,n)),new Ds(t,{...r,x:e,y:n})}function p4(t,{x:e=Pt,...n}={}){return new Ds(t,c4({...n,x:e}))}function g4(t,{y:e=Pt,...n}={}){return new Ds(t,f4({...n,y:e}))}function mg(t,e,n){K(t,"text-anchor",e.textAnchor),K(t,"font-family",e.fontFamily),K(t,"font-size",e.fontSize),K(t,"font-style",e.fontStyle),K(t,"font-variant",e.fontVariant===void 0?m4(n):e.fontVariant),K(t,"font-weight",e.fontWeight)}function m4(t){return t&&(W3(t)||Gt(t))?"tabular-nums":void 0}const y4=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function b4(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),y4.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function _4(t,e,n){const r=[];let i,o=0;for(const[a,f,c]of w4(t)){if(i===void 0&&(i=a),o>i&&n(t,i,f)>e&&(r.push(t.slice(i,o)+(t[o-1]===dg?"-":"")),i=a),c){r.push(t.slice(i,f)),i=void 0;continue}o=f}return r}function*w4(t){let e=0,n=0;const r=t.length;for(;n<r;){let i=1;switch(t[n]){case dg:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++i;case`
`:yield[e,n,!0],n+=i,e=n;break;default:++n;break}}yield[e,n,!0]}const Dl={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Ls(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Nr(t,i))r+=Dl[t[i]]??(wg(t,i)?120:Dl.e);return r}function Rs(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Nr(t,i))r+=wg(t,i)?200:100;return r}function yg({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const r=t?Rs:Ls,i=e*100;return o=>_4(o,i,r)}function bg({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const r=t?Rs:Ls,i=e*100;switch(n){case"clip-start":return o=>Rl(o,i,r,"");case"clip-end":return o=>Ll(o,i,r,"");case"ellipsis-start":return o=>Rl(o,i,r,sr);case"ellipsis-middle":return o=>v4(o,i,r,sr);case"ellipsis-end":return o=>Ll(o,i,r,sr)}}const sr="";function $r(t,e,n,r){const i=[];let o=0;for(let a=0,f=0,c=t.length;a<c;a=f){f=Nr(t,a);const s=n(t,a,f);if(o+s>e){for(o+=r;o>e&&a>0;)f=a,a=i.pop(),o-=n(t,a,f);return[a,e-o]}o+=s,i.push(a)}return[-1,0]}function Ll(t,e,n,r){t=t.trim();const i=n(r),[o]=$r(t,e,n,i);return o<0?t:t.slice(0,o).trimEnd()+r}function v4(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const o=n(r)/2,[a,f]=$r(t,e/2,n,o),[c]=$r(t,i-e/2-f+o,n,-o);return c<0?r:t.slice(0,a).trimEnd()+r+t.slice(Nr(t,c)).trimStart()}function Rl(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const o=n(r),[a]=$r(t,i-e+o,n,-o);return a<0?r:r+t.slice(Nr(t,a)).trimStart()}const Tc=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Fl=/\p{Extended_Pictographic}/uy;function Nr(t,e){return e+=x4(t,e)?2:1,$4(t,e)&&(e=Tc.lastIndex),M4(t,e)?Nr(t,e+1):e}function _g(t,e){return t.charCodeAt(e)<128}function x4(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function M4(t,e){return t.charCodeAt(e)===8205}function $4(t,e){return _g(t,e)?!1:(Tc.lastIndex=e,Tc.test(t))}function wg(t,e){return _g(t,e)?!1:(Fl.lastIndex=e,Fl.test(t))}const S4={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},vg=3.5,T4=vg*5,xg={draw(t,e,n){const r=e*n/T4;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},k4={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},E4=new Map([["arrow",xg],["spike",k4]]);function A4(t){return t&&typeof t.draw=="function"}function C4(t){if(A4(t))return t;const e=E4.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class Mg extends ae{constructor(e,n={}){const{x:r,y:i,r:o=vg,length:a,rotate:f,shape:c=xg,anchor:s="middle",frameAnchor:u}=n,[h,l]=Xt(a,12),[d,p]=Xt(f,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,S4),this.r=+o,this.length=l,this.rotate=p,this.shape=C4(c),this.anchor=me(s,"anchor",["start","middle","end"]),this.frameAnchor=ms(u)}render(e,n,r,i,o){const{x:a,y:f}=n,{x:c,y:s,length:u,rotate:h}=r,{length:l,rotate:d,anchor:p,shape:g,r:m}=this,[_,y]=Da(this,i);return Ot("svg:g",o).call(Ke,this,i,o).call(De,this,{x:c&&a,y:s&&f}).call(v=>v.selectAll().data(e).enter().append("path").call(Qe,this).attr("transform",hg`translate(${c?b=>c[b]:_},${s?b=>s[b]:y})${h?b=>` rotate(${h[b]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?u?b=>` translate(0,${u[b]})`:` translate(0,${l})`:u?b=>` translate(0,${u[b]/2})`:` translate(0,${l/2})`}`).attr("d",u?b=>{const w=Xf();return g.draw(w,u[b],m),w}:(()=>{const b=Xf();return g.draw(b,l,m),b})()).call(Wn,this,r)).node()}}function N4(t,e={}){const{x:n=Pt,...r}=e;return new Mg(t,{...r,x:n})}function D4(t,e={}){const{y:n=Pt,...r}=e;return new Mg(t,{...r,y:n})}function yn(t,e){return arguments.length<2&&!gn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Oa({anchor:t}={},e){return t===void 0?e[0]:me(t,"anchor",e)}function $g(t){return Oa(t,["left","right"])}function Sg(t){return Oa(t,["right","left"])}function Tg(t){return Oa(t,["bottom","top"])}function kg(t){return Oa(t,["top","bottom"])}function Eg(){const[t,e]=yn(...arguments);return Cg("y",$g(e),t,e)}function L4(){const[t,e]=yn(...arguments);return Cg("fy",Sg(e),t,e)}function Ag(){const[t,e]=yn(...arguments);return Ng("x",Tg(e),t,e)}function R4(){const[t,e]=yn(...arguments);return Ng("fx",kg(e),t,e)}function Cg(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:c=r,fillOpacity:s=i,textAnchor:u,textStroke:h,textStrokeOpacity:l,textStrokeWidth:d,tickSize:p=t==="y"?6:0,tickPadding:g,tickRotate:m,x:_,margin:y,marginTop:v=y===void 0?20:y,marginRight:b=y===void 0?e==="right"?40:0:y,marginBottom:w=y===void 0?20:y,marginLeft:x=y===void 0?e==="left"?40:0:y,label:$,labelAnchor:E,labelArrow:k,labelOffset:A,...M}){return p=yt(p),g=yt(g),m=yt(m),E!==void 0&&(E=me(E,"labelAnchor",["center","top","bottom"])),k=Ug(k),Kp(p&&!qt(o)?F4(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:g,tickRotate:m,x:_,...M}):null,qt(c)?null:P4(t,e,n,{fill:c,fillOpacity:s,stroke:h,strokeOpacity:l,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:m,x:_,marginTop:v,marginRight:b,marginBottom:w,marginLeft:x,...M}),!qt(c)&&$!==null?gg([],Fg({fill:c,fillOpacity:s,...M},function(L,F,O,S,U){const R=S[t],{marginTop:Y,marginRight:P,marginBottom:C,marginLeft:B}=t==="y"&&U.inset||U,z=E??(R.bandwidth?"center":"top"),W=A??(e==="right"?P:B)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${e}`,this.rotate=0),this.dy=z==="top"?3-Y:z==="bottom"?C-3:0,this.dx=e==="right"?W:-W,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Og(t,R,{anchor:e,label:$,labelAnchor:z,labelArrow:k})]}}}})):null)}function Ng(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:c=r,fillOpacity:s=i,textAnchor:u,textStroke:h,textStrokeOpacity:l,textStrokeWidth:d,tickSize:p=t==="x"?6:0,tickPadding:g,tickRotate:m,y:_,margin:y,marginTop:v=y===void 0?e==="top"?30:0:y,marginRight:b=y===void 0?20:y,marginBottom:w=y===void 0?e==="bottom"?30:0:y,marginLeft:x=y===void 0?20:y,label:$,labelAnchor:E,labelArrow:k,labelOffset:A,...M}){return p=yt(p),g=yt(g),m=yt(m),E!==void 0&&(E=me(E,"labelAnchor",["center","left","right"])),k=Ug(k),Kp(p&&!qt(o)?I4(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:g,tickRotate:m,y:_,...M}):null,qt(c)?null:O4(t,e,n,{fill:c,fillOpacity:s,stroke:h,strokeOpacity:l,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:g,tickRotate:m,y:_,marginTop:v,marginRight:b,marginBottom:w,marginLeft:x,...M}),!qt(c)&&$!==null?gg([],Fg({fill:c,fillOpacity:s,...M},function(L,F,O,S,U){const R=S[t],{marginTop:Y,marginRight:P,marginBottom:C,marginLeft:B}=t==="x"&&U.inset||U,z=E??(R.bandwidth?"center":"right"),W=A??(e==="top"?Y:C)-3;return z==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-W:W,this.dx=z==="right"?P-3:z==="left"?3-B:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Og(t,R,{anchor:e,label:$,labelAnchor:z,labelArrow:k})]}}}})):null)}function F4(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:f=e,tickSize:c,inset:s=0,insetLeft:u=s,insetRight:h=s,dx:l=0,y:d=t==="y"?void 0:null,...p}){return Dr(D4,t,e,`${t}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:f,y:d,...p,dx:e==="left"?+l-Yt+ +u:+l+Yt-h,anchor:"start",length:c,shape:e==="left"?G4:V4})}function I4(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:f=e,tickSize:c,inset:s=0,insetTop:u=s,insetBottom:h=s,dy:l=0,x:d=t==="x"?void 0:null,...p}){return Dr(N4,t,e,`${t}-axis tick`,n,{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:f,x:d,...p,dy:e==="bottom"?+l-Yt-h:+l+Yt+ +u,anchor:"start",length:c,shape:e==="bottom"?W4:H4})}function P4(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*ng):0),text:c,textAnchor:s=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:h,inset:l=0,insetLeft:d=l,insetRight:p=l,dx:g=0,y:m=t==="y"?void 0:null,..._}){return Dr(g4,t,e,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:c,textAnchor:s,lineAnchor:u,fontVariant:h,rotate:a,y:m,..._,dx:e==="left"?+g-o-f+ +d:+g+ +o+ +f-p},function(y,v,b,w,x){h===void 0&&(this.fontVariant=Pg(y)),c===void 0&&(x.text=Ig(y,v,b,w,e))})}function O4(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*ng):0),text:c,textAnchor:s=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:h,inset:l=0,insetTop:d=l,insetBottom:p=l,dy:g=0,x:m=t==="x"?void 0:null,..._}){return Dr(p4,t,e,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:c===void 0?null:c,textAnchor:s,lineAnchor:u,fontVariant:h,rotate:a,x:m,..._,dy:e==="bottom"?+g+ +o+ +f-p:+g-o-f+ +d},function(y,v,b,w,x){h===void 0&&(this.fontVariant=Pg(y)),c===void 0&&(x.text=Ig(y,v,b,w,e))})}function U4(){const[t,e]=yn(...arguments);return Dg("y",$g(e),t,e)}function B4(){const[t,e]=yn(...arguments);return Dg("fy",Sg(e),t,e)}function z4(){const[t,e]=yn(...arguments);return Lg("x",Tg(e),t,e)}function q4(){const[t,e]=yn(...arguments);return Lg("fx",kg(e),t,e)}function Dg(t,e,n,{y:r=t==="y"?void 0:null,x:i=null,x1:o=e==="left"?i:null,x2:a=e==="right"?i:null,...f}){return Dr(Sc,t,e,`${t}-grid`,n,{y:r,x1:o,x2:a,...Rg(f)})}function Lg(t,e,n,{x:r=t==="x"?void 0:null,y:i=null,y1:o=e==="top"?i:null,y2:a=e==="bottom"?i:null,...f}){return Dr(l4,t,e,`${t}-grid`,n,{x:r,y1:o,y2:a,...Rg(f)})}function Rg({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function Fg({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:c,shapeRendering:s,clip:u=!1},h){return[,t]=Xe(t),[,e]=Xt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:c,shapeRendering:s,clip:u,initializer:h}}function Dr(t,e,n,r,i,o,a){let f;function c(h,l,d,p,g,m){const _=h==null&&(e==="fx"||e==="fy"),{[e]:y}=p;if(!y)throw new Error(`missing scale: ${e}`);const v=y.domain();let{interval:b,ticks:w,tickFormat:x,tickSpacing:$=e==="x"?80:35}=o;if(typeof w=="string"&&Bg(y)&&(b=w,w=void 0),w===void 0&&(w=Cr(b,y.type)??Y4(y,$)),h==null){if(gn(w))h=Kt(w);else if(ir(w))h=Sf(w,...te(v));else if(y.interval){let k=y.interval;if(y.ticks){const[A,M]=te(v),L=(M-A)/k[Ri];k=ol(k,L/w)??k,h=Sf(k,A,M)}else{h=v;const A=h.length;k=ol(k,A/w)??k,k!==y.interval&&(h=Sf(k,...te(h)))}if(k===y.interval){const A=Math.round(h.length/w);A>1&&(h=h.filter((M,L)=>L%A===0))}}else y.ticks?h=y.ticks(w):h=v;if(!y.ticks&&h.length&&h!==v){const k=new ia(v);h=h.filter(A=>k.has(A)),h.length||rn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?l=[je(h)]:f[e]={scale:e,value:Pt}}a==null||a.call(this,y,h,w,x,f);const E=Object.fromEntries(Object.entries(f).map(([k,A])=>[k,{...A,value:At(h,A.value)}]));return _&&(l=m.filterFacets(h,E)),{data:h,facets:l,channels:E}}const s=Qo(o).initializer,u=t(i,Qo({...o,initializer:c},s));return i==null?(f=u.channels,u.channels={}):f={},u.ariaLabel=r,u.clip===void 0&&(u.clip=!1),u}function Y4(t,e){const[n,r]=te(t.range());return(r-n)/e}function Ig(t,e,n,r,i){return{value:Fs(t,e,n,r,i)}}function Fs(t,e,n,r,i){return typeof r=="function"?r:r===void 0&&e&&Gt(e)?T3(e,i)??Un:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,r):r===void 0?Un:typeof r=="string"?(Gt(t.domain())?Li:Er)(r):Fi(r)}function Sf(t,e,n){return t.range(e,t.offset(t.floor(n)))}const W4={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},H4={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},G4={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},V4={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function Pg(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function X4(t){return Math.sign(xr(t.domain()))*Math.sign(xr(t.range()))}function Og(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&Bg(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[]/.test(r)),!o)return r;if(o===!0){const a=X4(e);a&&(o=/x$/.test(t)||i==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function Ug(t="auto"){return qt(t)?!1:typeof t=="boolean"?t:me(t,"labelArrow",["auto","up","right","down","left"])}function Bg(t){return Gt(t.domain())}function Il(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function j4(t,{opacity:e,...n}={}){if(!Hn(t)&&!Zp(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return zg(t,n,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",Xt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Z4(t,{fill:e=(s=>(s=t.hint)==null?void 0:s.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:qt(e)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...f}={},c){const[h,l]=Xe(e),[d,p]=Xe(r),g=Il(c,h),m=Il(c,d),_=a*a*Math.PI;return n=Xt(n)[1],i=Xt(i)[1],o=Xt(o)[1],zg(t,f,(y,v,b,w)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",b).attr("height",w).attr("fill",h==="color"?x=>g.scale(x):l).attr("fill-opacity",n).attr("stroke",d==="color"?x=>m.scale(x):p).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",x=>{const $=Xf();return t.scale(x).draw($,_),$}))}function zg(t,e={},n){let{columns:r,tickFormat:i,fontVariant:o=eg(t),swatchSize:a=15,swatchWidth:f=a,swatchHeight:c=a,marginLeft:s=0,className:u,style:h,width:l}=e;const d=Ms(e);u=vs(u),i=Fs(t.scale,t.domain,void 0,i);const p=Ot("div",d).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let g;return r!=null?(g=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,f,c).call(m=>m.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(g=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,f,c).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(m=>m.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${g}`)).style("margin-left",s?`${+s}px`:null).style("width",l===void 0?null:`${+l}px`).style("font-variant",Nt(o,"normal")).call(xs,h).node()}const kc=new Map([["symbol",Z4],["color",Yg],["opacity",Q4]]);function K4(t,e,n={}){return(r,i)=>{if(!kc.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return kc.get(r)(t[r],qg(e,n[r],i),o=>t[o])}}function qg({className:t,...e},{label:n,ticks:r,tickFormat:i}={},o){return X3(o,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function Yg(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return j4(t,n);case"ramp":return e4(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function Q4({type:t,interpolate:e,...n},{legend:r=!0,color:i=cn(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return Yg({type:t,...n,interpolate:J4(i)},{legend:r,...o})}function J4(t){const{r:e,g:n,b:r}=cn(t)||cn(0,0,0);return i=>`rgba(${e},${n},${r},${i})`}function t7(t,e,n){const r=[];for(const[i,o]of kc){const a=n[i];if(a!=null&&a.legend&&i in t){const f=o(t[i],qg(e,t[i],a),c=>t[c]);f!=null&&r.push(f)}}return r}const e7={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},n7={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class r7 extends ae{constructor(e={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:o=r,insetBottom:a=r,insetLeft:f=r,rx:c,ry:s}=e;super(mo,void 0,e,n==null?e7:n7),this.anchor=lp(n,"anchor",["top","right","bottom","left"]),this.insetTop=yt(i),this.insetRight=yt(o),this.insetBottom=yt(a),this.insetLeft=yt(f),this.rx=yt(c),this.ry=yt(s)}render(e,n,r,i,o){const{marginTop:a,marginRight:f,marginBottom:c,marginLeft:s,width:u,height:h}=i,{anchor:l,insetTop:d,insetRight:p,insetBottom:g,insetLeft:m,rx:_,ry:y}=this,v=s+m,b=u-f-p,w=a+d,x=h-c-g;return Ot(l?"svg:line":"svg:rect",o).datum(0).call(Ke,this,i,o).call(Qe,this).call(Wn,this,r).call(De,this,{}).call(l==="left"?$=>$.attr("x1",v).attr("x2",v).attr("y1",w).attr("y2",x):l==="right"?$=>$.attr("x1",b).attr("x2",b).attr("y1",w).attr("y2",x):l==="top"?$=>$.attr("x1",v).attr("x2",b).attr("y1",w).attr("y2",w):l==="bottom"?$=>$.attr("x1",v).attr("x2",b).attr("y1",x).attr("y2",x):$=>$.attr("x",v).attr("y",w).attr("width",b-v).attr("height",x-w).attr("rx",_).attr("ry",y)).node()}}function i7(t){return new r7(t)}const Tf={ariaLabel:"tip",fill:"white",stroke:"currentColor"},o7=new Set(["geometry","href","src","ariaLabel","scales"]);class a7 extends ae{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&gn(e)&&mp(e)&&(n={...n,title:Pt});const{x:r,y:i,x1:o,x2:a,y1:f,y2:c,anchor:s,monospace:u,fontFamily:h=u?"ui-monospace, monospace":void 0,fontSize:l,fontStyle:d,fontVariant:p,fontWeight:g,lineHeight:m=1,lineWidth:_=20,frameAnchor:y,format:v,textAnchor:b="start",textOverflow:w,textPadding:x=8,title:$,pointerSize:E=12,pathFilter:k="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:f!=null&&c!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:f,scale:"y",optional:c==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:c,scale:"y",optional:f==null},title:{value:$,optional:!0}},n,Tf),this.anchor=yp(s,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=ms(y),this.textAnchor=Nt(b,"middle"),this.textPadding=+x,this.pointerSize=+E,this.pathFilter=zt(k),this.lineHeight=+m,this.lineWidth=+_,this.textOverflow=pg(w),this.monospace=!!u,this.fontFamily=zt(h),this.fontSize=yt(l),this.fontStyle=zt(d),this.fontVariant=zt(p),this.fontWeight=zt(g);for(const A in Tf)A in this.channels&&(this[A]=Tf[A]);this.splitLines=yg(this),this.clipLine=bg(this),this.format={...v}}render(e,n,r,i,o){const a=this,{x:f,y:c,fx:s,fy:u}=n,{ownerSVGElement:h,document:l}=o,{anchor:d,monospace:p,lineHeight:g,lineWidth:m}=this,{textPadding:_,pointerSize:y,pathFilter:v}=this,{marginTop:b,marginLeft:w}=i,{x1:x,y1:$,x2:E,y2:k,x:A=x??E,y:M=$??k}=r,L=s?s(e.fx)-w:0,F=u?u(e.fy)-b:0,[O,S]=Da(this,i),U=Jp(r,O),R=tg(r,S),Y=p?Rs:Ls,P=Y(sr);let C,B;"title"in r?(C=r.channels,B=h7):(C=l7.call(this,r,n),B=d7);const z=Ot("svg:g",o).call(Ke,this,i,o).call(mg,this).call(De,this,{x:A&&f,y:M&&c}).call(Z=>Z.selectAll().data(e).enter().append("g").attr("transform",X=>`translate(${Math.round(U(X))},${Math.round(R(X))})`).call(Qe,this).call(X=>X.append("path").attr("filter",v)).call(X=>X.append("text").each(function(D){const q=Qr(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const N=B.call(a,D,e,C,n,r);if(typeof N=="string")for(const H of a.splitLines(N))W(q,{value:a.clipLine(H)});else{const H=new Set;for(const V of N){const{label:T=""}=V;T&&H.has(T)||(H.add(T),W(q,V))}}})));function W(Z,{label:X,value:D,color:q,opacity:N}){X??(X=""),D??(D="");const H=q!=null||N!=null;let V,T=m*100;const[ot]=$r(X,T,Y,P);if(ot>=0)X=X.slice(0,ot).trimEnd()+sr,V=D.trim(),D="";else{(X||!D&&!H)&&(D=" "+D);const[at]=$r(D,T-Y(X),Y,P);at>=0&&(D=D.slice(0,at).trimEnd()+sr,V=D.trim())}const G=Z.append("tspan").attr("x",0).attr("dy",`${g}em`).text("");X&&G.append("tspan").attr("font-weight","bold").text(X),D&&G.append(()=>l.createTextNode(D)),H&&G.append("tspan").text(" ").attr("fill",q).attr("fill-opacity",N).style("user-select","none"),V&&G.append("title").text(V)}function J(){const{width:Z,height:X}=i.facet??i;z.selectChildren().each(function(D){let{x:q,width:N,height:H}=this.getBBox();N=Math.round(N),H=Math.round(H);let V=d;if(V===void 0){V=a.previousAnchor;const G=U(D)+L,at=R(D)+F,bt=G+N+_*2<Z,Dt=G-N-_*2>0,bn=at+H+y+_*2+7<X,qi=at-H-y-_*2>0,qa=(/-left$/.test(V)?bt||!Dt:bt&&!Dt)?"left":"right",Ya=(/^top-/.test(V)?bn||!qi:bn&&!qi)?"top":"bottom";V=a.previousAnchor=`${Ya}-${qa}`}const T=this.firstChild,ot=this.lastChild;if(T.setAttribute("d",u7(V,y,_,N,H)),q)for(const G of ot.childNodes)G.setAttribute("x",-q);ot.setAttribute("y",`${+c7(V,ot.childNodes.length,g).toFixed(6)}em`),ot.setAttribute("transform",`translate(${s7(V,y,_,N,H)})`)}),z.attr("visibility",null)}return e.length&&(z.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(J):typeof requestAnimationFrame<"u"&&requestAnimationFrame(J)),z.node()}}function f7(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=ds(e,n)),new a7(t,{...r,x:e,y:n})}function c7(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function s7(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}function u7(t,e,n,r,i){const o=r+n*2,a=i+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function l7({channels:t},e){var i,o;const n={};let r=this.format;r=Pl(r,t,"x"),r=Pl(r,t,"y"),this.format=r;for(const a in r){const f=r[a];if(!(f===null||f===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const c=pl(t,a);c&&(n[a]=c)}}for(const a in t){if(a in n||a in r||o7.has(a))continue;const f=pl(t,a);f&&(n[a]=f)}this.facet&&(e.fx&&!("fx"in r)&&(n.fx=!0),e.fy&&!("fy"in r)&&(n.fy=!0));for(const a in n){const f=this.format[a];if(typeof f=="string"){const c=((i=n[a])==null?void 0:i.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(Gt(c)?Li:Er)(f)}else if(f===void 0||f===!0){const c=e[a];this.format[a]=c!=null&&c.bandwidth?Fs(c,c.domain()):Un}}return n}function Pl(t,e,n){if(!(n in t))return t;const r=`${n}1`,i=`${n}2`;if((r in t||!(r in e))&&(i in t||!(i in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([f])=>f===n)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function h7(t,e,{title:n}){return Un(n.value[t],t)}function*d7(t,e,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:ta(r,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Ul(r,n,"x"),value:Ol(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Ul(r,n,"y"),value:Ol(this.format.y2,n.y1,a,t)};else{const f=a.value[t],c=a.scale;if(!un(f)&&c==null)continue;yield{label:ta(r,n,o),value:this.format[o](f,t),color:c==="color"?i[o][t]:null,opacity:c==="opacity"?i[o][t]:null}}}}function Ol(t,e,n,r){var i;return(i=n.hint)!=null&&i.length?`${t(n.value[r]-e.value[r],r)}`:`${t(e.value[r],r)}${t(n.value[r],r)}`}function Ul(t,e,n){const r=ta(t,e,`${n}1`,n),i=ta(t,e,`${n}2`,n);return r===i?r:`${r}${i}`}function ta(t,e,n,r=n){const i=e[n],o=t[(i==null?void 0:i.scale)??n];return String((o==null?void 0:o.label)??(i==null?void 0:i.label)??r)}function Lr(t={}){var P;const{facet:e,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:f}=t,c=vs(t.className),s=t.marks===void 0?[]:zl(t.marks);s.push(...v7(s));const u=_7(e,t),h=new Map;for(const C of s){const B=ql(C,u,t);B&&h.set(C,B)}const l=new Map;u&&qr(l,[u],t),qr(l,h,t);const d=zl(x7(s,l,t));for(const C of d){const B=ql(C,u,t);B&&h.set(C,B)}s.unshift(...d);let p=O8(l,t);if(p!==void 0){const C=u?Mf(p,u):void 0;for(const z of s){if(z.facet===null||z.facet==="super")continue;const W=h.get(z);W!==void 0&&(W.facetsIndex=z.fx!=null||z.fy!=null?Mf(p,W):C)}const B=new Set;for(const{facetsIndex:z}of h.values())z==null||z.forEach((W,J)=>{(W==null?void 0:W.length)>0&&B.add(J)});p.forEach(0<B.size&&B.size<p.length?(z,W)=>z.empty=!B.has(W):z=>z.empty=!1);for(const z of s)if(z.facet==="exclude"){const W=h.get(z);W!==void 0&&(W.facetsIndex=z8(W.facetsIndex))}}for(const C of xt.keys())bc(t[C])&&C!=="fx"&&C!=="fy"&&l.set(C,[]);const g=new Map;for(const C of s){if(g.has(C))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:B,channels:z}=h.get(C)??{},{data:W,facets:J,channels:Z}=C.initialize(B,z,t);Is(Z,t),g.set(C,{data:W,facets:J,channels:Z})}const m=Mc(qr(l,g,t),t),_=I8(m,s,t);k8(m,_);const y=Ml(m),{fx:v,fy:b}=y,w=v||b?Vp(m,_):_,x=v||b?A7(y,_):_,$=Ms(t),E=$.document,k=fa("svg").call(E.documentElement);let A=k;$.ownerSVGElement=k,$.className=c,$.projection=B5(t,w),$.filterFacets=(C,B)=>Mf(p,{channels:B,groups:Es(C,B)}),$.getMarkState=C=>{const B=g.get(C),z=h.get(C);return{...B,channels:{...B.channels,...z==null?void 0:z.channels}}},$.dispatchValue=C=>{A.value!==C&&(A.value=C,A.dispatchEvent(new Event("input",{bubbles:!0})))};const M=new Set;for(const[C,B]of g)if(C.initializer!=null){const z=C.facet==="super"?x:w,W=C.initializer(B.data,B.facets,B.channels,y,z,$);if(W.data!==void 0&&(B.data=W.data),W.facets!==void 0&&(B.facets=W.facets),W.channels!==void 0){const{fx:J,fy:Z,...X}=W.channels;b7(X),Object.assign(B.channels,X);for(const D of Object.values(X)){const{scale:q}=D;q!=null&&!Z3(xt.get(q))&&(Wg(D,t),M.add(q))}(J!=null||Z!=null)&&h.set(C,!0)}}if(M.size){const C=new Map;qr(C,g,t,J=>M.has(J)),qr(l,g,t,J=>M.has(J));const B=E7(Mc(C,t),m),{scales:z,...W}=Ml(B);Object.assign(m,B),Object.assign(y,W),Object.assign(y.scales,z)}let L,F;p!==void 0&&(L={x:v==null?void 0:v.domain(),y:b==null?void 0:b.domain()},p=U8(p,L),F=B8(v,b,_));for(const[C,B]of g)B.values=C.scale(B.channels,y,$);const{width:O,height:S}=_;Qr(k).attr("class",c).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",O).attr("height",S).attr("viewBox",`0 0 ${O} ${S}`).attr("aria-label",a).attr("aria-description",f).call(C=>C.append("style").text(`.${c} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${c} text,
.${c} tspan {
  white-space: pre;
}`)).call(xs,n);for(const C of s){const{channels:B,values:z,facets:W}=g.get(C);if(p===void 0||C.facet==="super"){let J=null;if(W&&(J=W[0],J=C.filter(J,B,z),J.length===0))continue;const Z=C.render(J,y,z,x,$);if(Z==null)continue;k.appendChild(Z)}else{let J;for(const Z of p){if(!(((P=C.facetAnchor)==null?void 0:P.call(C,p,L,Z))??!Z.empty))continue;let X=null;if(W){const q=h.has(C);if(X=W[q?Z.i:0],X=C.filter(X,B,z),X.length===0)continue;!q&&X===W[0]&&(X=P3(X)),X.fx=Z.x,X.fy=Z.y,X.fi=Z.i}const D=C.render(X,y,z,w,$);if(D!=null){(J??(J=Qr(k).append("g"))).append(()=>D).datum(Z);for(const q of["aria-label","aria-description","aria-hidden","transform"])D.hasAttribute(q)&&(J.attr(q,D.getAttribute(q)),D.removeAttribute(q))}}J==null||J.selectChildren().attr("transform",F)}}const U=t7(m,$,t),{figure:R=r!=null||i!=null||o!=null||U.length>0}=t;R&&(A=E.createElement("figure"),A.className=`${c}-figure`,A.style.maxWidth="initial",r!=null&&A.append(Bl(E,r,"h2")),i!=null&&A.append(Bl(E,i,"h3")),A.append(...U,k),o!=null&&A.append(p7(E,o))),A.scale=R8(y.scales),A.legend=K4(m,$,t);const Y=T5();return Y>0&&Qr(k).append("text").attr("x",O).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${Y.toLocaleString("en-US")} warning${Y===1?"":"s"}. Please check the console.`),A}function Bl(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(e),r}function p7(t,e){const n=t.createElement("figcaption");return n.append(e),n}function g7({marks:t=[],...e}={}){return Lr({...e,marks:[...t,this]})}ae.prototype.plot=g7;function zl(t){return t.flat(1/0).filter(e=>e!=null).map(m7)}function m7(t){return typeof t.render=="function"?t:new y7(t)}class y7 extends ae{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Is(t,e){for(const n in t)Wg(t[n],e);return t}function Wg(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:i,percent:o,interval:a,transform:f=o?c=>c*100:gp(a,i)}=e[n]??{};f!=null&&(t.value=$t(t.value,f),t.transform=!1)}function b7(t){for(const e in t)Ep(e,t[e])}function qr(t,e,n,r=N3){var i,o;for(const{channels:a}of e.values())for(const f in a){const c=a[f],{scale:s}=c;if(s!=null&&r(s))if(s==="projection"){if(!W5(n)){const u=((i=n.x)==null?void 0:i.domain)===void 0,h=((o=n.y)==null?void 0:o.domain)===void 0;if(u||h){const[l,d]=G5(c);u&&kf(t,"x",l),h&&kf(t,"y",d)}}}else kf(t,s,c)}return t}function kf(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function _7(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const i=Kt(t.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=_i(i,{value:n,scale:"fx"})),r!=null&&(o.fy=_i(i,{value:r,scale:"fy"})),Is(o,e);const a=Es(i,o);return{channels:o,groups:a,data:t.data}}function ql(t,e,n){var c;if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const s=Kt(t.data??r??i);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const u={};return r!=null&&(u.fx=_i(s,{value:r,scale:"fx"})),i!=null&&(u.fy=_i(s,{value:i,scale:"fy"})),Is(u,n),{channels:u,groups:Es(s,u)}}if(e===void 0)return;const{channels:o,groups:a,data:f}=e;if(t.facet!=="auto"||t.data===f)return{channels:o,groups:a};f.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((c=Kt(t.data))==null?void 0:c.length)===f.length&&rn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function w7(t,e={}){return Qo({...e,x:null,y:null},(n,r,i,o,a,f)=>f.getMarkState(t))}function v7(t){const e=[];for(const n of t){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?J8:/^y$/i.test(i)?t4:Q8,r=i(w7(n,r)),r.title=null;const o=f7(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,e.push(o)}}return e}function x7(t,e,n){let{projection:r,x:i={},y:o={},fx:a={},fy:f={},axis:c,grid:s,facet:u={},facet:{axis:h=c,grid:l}=u,x:{axis:d=c,grid:p=d===null?null:s}=i,y:{axis:g=c,grid:m=g===null?null:s}=o,fx:{axis:_=h,grid:y=_===null?null:l}=a,fy:{axis:v=h,grid:b=v===null?null:l}=f}=n;(r||!bc(i)&&!Yl("x",t))&&(d=p=null),(r||!bc(o)&&!Yl("y",t))&&(g=m=null),e.has("fx")||(_=y=null),e.has("fy")||(v=b=null),d===void 0&&(d=!so(t,"x")),g===void 0&&(g=!so(t,"y")),_===void 0&&(_=!so(t,"fx")),v===void 0&&(v=!so(t,"fy")),d===!0&&(d="bottom"),g===!0&&(g="left"),_===!0&&(_=d==="top"||d===null?"bottom":"top"),v===!0&&(v=g==="right"||g===null?"left":"right");const w=[];return co(w,b,B4,f),fo(w,v,L4,"right","left",u,f),co(w,y,q4,a),fo(w,_,R4,"top","bottom",u,a),co(w,m,U4,o),fo(w,g,Eg,"left","right",n,o),co(w,p,z4,i),fo(w,d,Ag,"bottom","top",n,i),w}function fo(t,e,n,r,i,o,a){if(!e)return;const f=M7(e);a=$7(f?r:e,o,a);const{line:c}=a;(n===Eg||n===Ag)&&c&&!bi(c)&&t.push(i7(S7(a))),t.push(n(a)),f&&t.push(n({...a,anchor:i,label:null}))}function co(t,e,n,r){!e||bi(e)||t.push(n(T7(e,r)))}function M7(t){return/^\s*both\s*$/i.test(t)}function $7(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:c,fontVariant:s,ariaLabel:u,ariaDescription:h,label:l=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:g}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:c,fontVariant:s,ariaLabel:u,ariaDescription:h,label:l,labelAnchor:d,labelArrow:p,labelOffset:g}}function S7(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function T7(t,{stroke:e=Ca(t)?t:void 0,ticks:n=k7(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function k7(t){switch(typeof t){case"number":return!0;case"string":return!Ca(t)}return gn(t)||typeof(t==null?void 0:t.range)=="function"}function so(t,e){const n=`${e}-axis `;return t.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function Yl(t,e){for(const n of e)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===t||i==="projection")return!0}return!1}function E7(t,e){for(const n in t){const r=t[n],i=e[n];r.label===void 0&&i&&(r.label=i.label)}return t}function A7({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:c}=ks(n),s=t&&Wl(t),u=e&&Wl(e);return{marginTop:e?u[0]:r,marginRight:t?f-s[1]:i,marginBottom:e?c-u[1]:o,marginLeft:t?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:c}}function Wl(t){const e=t.domain();let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const C7=new Map([["basis",i3],["basis-closed",o3],["basis-open",a3],["bundle",f3],["bump-x",V6],["bump-y",X6],["cardinal",c3],["cardinal-closed",s3],["cardinal-open",u3],["catmull-rom",l3],["catmull-rom-closed",h3],["catmull-rom-open",d3],["linear",Ta],["linear-closed",p3],["monotone-x",g3],["monotone-y",m3],["natural",y3],["step",b3],["step-after",w3],["step-before",_3]]);function N7(t=Ta,e){if(typeof t=="function")return t;const n=C7.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function D7(t=ea,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?ea:N7(t,e)}function ea(t){return Ta(t)}function L7(t={y:"count"},e={}){[t,e]=P7(t,e);const{x:n,y:r}=e;return I7(O7(n,e,Pt),null,null,r,t,Ns(e))}function R7(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=ws}=n,i={filter:null};return n[e]!=null&&(i[e]=r),n[`${e}1`]!=null&&(i[`${e}1`]=r),n[`${e}2`]!=null&&(i[`${e}2`]=r),t(i,n)}function F7(t={}){return R7(L7,"y",Ia(t,"x"))}function I7(t,e,n,r,{data:i=kp,filter:o=Jo,sort:a,reverse:f,...c}={},s={}){t=Hl(t),e=Hl(e),c=B7(c,s),i=Vg(i,Pt),a=a==null?void 0:Hg("sort",a,s),o=o==null?void 0:Gg("filter",o,s),n!=null&&ro(c,"x","x1","x2")&&(n=null),r!=null&&ro(c,"y","y1","y2")&&(r=null);const[u,h]=Pe(t),[l,d]=Pe(t),[p,g]=Pe(e),[m,_]=Pe(e),[y,v]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[b,w]=Pe(y),{x,y:$,z:E,fill:k,stroke:A,x1:M,x2:L,y1:F,y2:O,domain:S,cumulative:U,thresholds:R,interval:Y,...P}=s,[C,B]=Pe(E),[z]=Xe(k),[W]=Xe(A),[J,Z]=Pe(z),[X,D]=Pe(W);return{..."z"in s&&{z:C||E},..."fill"in s&&{fill:J||k},..."stroke"in s&&{stroke:X||A},...bs(P,(q,N,H)=>{const V=pp(At(q,y),H==null?void 0:H[v]),T=At(q,E),ot=At(q,z),G=At(q,W),at=f5(c,{z:T,fill:ot,stroke:G}),bt=[],Dt=[],bn=V&&w([]),qi=T&&B([]),qa=ot&&Z([]),Ya=G&&D([]),Us=t&&h([]),sm=t&&d([]),Bs=e&&g([]),um=e&&_([]),lm=Y7(t==null?void 0:t(q),e==null?void 0:e(q));let hm=0;for(const Gn of c)Gn.initialize(q);a&&a.initialize(q),o&&o.initialize(q);for(const Gn of N){const zs=[];for(const Rr of c)Rr.scope("facet",Gn);a&&a.scope("facet",Gn),o&&o.scope("facet",Gn);for(const[Rr,dm]of ul(Gn,at))for(const[pm,Yi]of ul(dm,V))for(const[ye,_n]of lm(Yi))if(!(o&&!o.reduce(ye,_n))){zs.push(hm++),Dt.push(i.reduceIndex(ye,q,_n)),V&&bn.push(pm),T&&qi.push(at===T?Rr:T[(ye.length>0?ye:Yi)[0]]),ot&&qa.push(at===ot?Rr:ot[(ye.length>0?ye:Yi)[0]]),G&&Ya.push(at===G?Rr:G[(ye.length>0?ye:Yi)[0]]),Us&&(Us.push(_n.x1),sm.push(_n.x2)),Bs&&(Bs.push(_n.y1),um.push(_n.y2));for(const gm of c)gm.reduce(ye,_n);a&&a.reduce(ye)}bt.push(zs)}return c5(bt,a,f),{data:Dt,facets:bt}}),...!ro(c,"x")&&(u?{x1:u,x2:l,x:_c(u,l)}:{x,x1:M,x2:L}),...!ro(c,"y")&&(p?{y1:p,y2:m,y:_c(p,m)}:{y:$,y1:F,y2:O}),...b&&{[v]:b},...Object.fromEntries(c.map(({name:q,output:N})=>[q,N]))}}function P7({cumulative:t,domain:e,thresholds:n,interval:r,...i},o){return[i,{cumulative:t,domain:e,thresholds:n,interval:r,...o}]}function O7(t,{cumulative:e,domain:n,thresholds:r,interval:i},o){return t={...Ii(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=r),t.interval===void 0&&(t.interval=i),t.value===void 0&&(t.value=o),t.thresholds=U7(t.thresholds,t.interval),t}function Hl(t){if(t==null)return;const{value:e,cumulative:n,domain:r=te,thresholds:i}=t,o=a=>{let f=At(a,e),c;if(Gt(f)||q7(i)){f=$t(f,up,Float64Array);let[u,h]=typeof r=="function"?r(f):r,l=typeof i=="function"&&!ir(i)?i(f,u,h):i;typeof l=="number"&&(l=h0(u,h,l)),ir(l)&&(r===te&&(u=l.floor(u),h=l.offset(l.floor(h))),l=l.range(u,l.offset(h))),c=l}else{f=vr(f);let[u,h]=typeof r=="function"?r(f):r,l=typeof i=="function"&&!ir(i)?i(f,u,h):i;if(typeof l=="number")if(r===te){let d=wo(u,h,l);if(isFinite(d))if(d>0){let p=Math.round(u/d),g=Math.round(h/d);p*d<=u||--p,g*d>h||++g;let m=g-p+1;l=new Float64Array(m);for(let _=0;_<m;++_)l[_]=(p+_)*d}else if(d<0){d=-d;let p=Math.round(u*d),g=Math.round(h*d);p/d<=u||--p,g/d>h||++g;let m=g-p+1;l=new Float64Array(m);for(let _=0;_<m;++_)l[_]=(p+_)/d}else l=[u];else l=[u]}else l=fi(u,h,l);else ir(l)&&(r===te&&(u=l.floor(u),h=l.offset(l.floor(h))),l=l.range(u,l.offset(h)));c=l}const s=[];if(c.length===1)s.push([c[0],c[0]]);else for(let u=1;u<c.length;++u)s.push([c[u-1],c[u]]);return s.bin=(n<0?H7:n>0?W7:Ps)(s,c,f),s};return o.label=Yn(e),o}function U7(t,e,n=Gl){if(t===void 0)return e===void 0?n:Cr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return p2;case"scott":return Sh;case"sturges":return u2;case"auto":return Gl}return cs(t)}return t}function B7(t,e){return i5(t,e,Hg)}function Hg(t,e,n){return Sp(t,e,n,Gg)}function Gg(t,e,n){return Tp(t,e,n,Vg)}function Vg(t,e){return _s(t,e,z7)}function z7(t){switch(`${t}`.toLowerCase()){case"x":return G7;case"x1":return X7;case"x2":return j7;case"y":return V7;case"y1":return Z7;case"y2":return K7}throw new Error(`invalid bin reduce: ${t}`)}function Gl(t,e,n){return Math.min(200,Sh(t,e,n))}function q7(t){return B3(t)||gn(t)&&Gt(t)}function Y7(t,e){return t&&e?function*(n){const r=t.bin(n);for(const[i,[o,a]]of t.entries()){const f=e.bin(r[i]);for(const[c,[s,u]]of e.entries())yield[f[c],{x1:o,y1:s,x2:a,y2:u}]}}:t?function*(n){const r=t.bin(n);for(const[i,[o,a]]of t.entries())yield[r[i],{x1:o,x2:a}]}:function*(n){const r=e.bin(n);for(const[i,[o,a]]of e.entries())yield[r[i],{y1:o,y2:a}]}}function Ps(t,e,n){return e=vr(e),r=>{var o;const i=t.map(()=>[]);for(const a of r)(o=i[ra(e,n[a])-1])==null||o.push(a);return i}}function W7(t,e,n){const r=Ps(t,e,n);return i=>{const o=r(i);for(let a=1,f=o.length;a<f;++a){const c=o[a-1],s=o[a];for(const u of c)s.push(u)}return o}}function H7(t,e,n){const r=Ps(t,e,n);return i=>{const o=r(i);for(let a=o.length-2;a>=0;--a){const f=o[a+1],c=o[a];for(const s of f)c.push(s)}return o}}function Xg(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const G7={reduceIndex(t,e,{x1:n,x2:r}){return Xg(n,r)}},V7={reduceIndex(t,e,{y1:n,y2:r}){return Xg(n,r)}},X7={reduceIndex(t,e,{x1:n}){return n}},j7={reduceIndex(t,e,{x2:n}){return n}},Z7={reduceIndex(t,e,{y1:n}){return n}},K7={reduceIndex(t,e,{y2:n}){return n}};function Q7(t={}){return hp(t)?t:{...t,y:Pt}}function J7(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,r=new Uint8Array(n);let i=0;for(const f of e)for(const c of f)r[c]&&++i,r[c]=1;if(i===0)return{data:t,facets:e};t=mi(t);const o=t[cp]=new Uint32Array(n+i);e=e.map(f=>mi(f,Uint32Array));let a=n;r.fill(0);for(const f of e)for(let c=0,s=f.length;c<s;++c){const u=f[c];r[u]?(f[c]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,r[u]=1}return{data:t,facets:e}}function t9(t={},e={}){arguments.length===1&&([t,e]=n9(t));const{x1:n,x:r=n,y:i,...o}=e,[a,f,c,s]=i9(r,i,"x","y",t,o);return{...a,x1:n,x:f,y1:c,y2:s,y:_c(c,s)}}function e9({y:t,y1:e,y2:n,...r}={}){return r=Ia(r,"x"),e===void 0&&n===void 0?t9({y:t,...r}):([e,n]=I3(t,e,n),{...r,y1:e,y2:n})}function n9(t){const{offset:e,order:n,reverse:r,...i}=t;return[{offset:e,order:n,reverse:r},i]}const r9={length:!0};function i9(t,e=C3,n,r,{offset:i,order:o,reverse:a},f){if(e===null)throw new Error(`stack requires ${r}`);const c=dp(f),[s,u]=Pe(t),[h,l]=Ko(e),[d,p]=Ko(e);return h.hint=d.hint=r9,i=o9(i),o=c9(o,i,r),[bs(f,(g,m,_)=>{({data:g,facets:m}=J7(g,m));const y=t==null?void 0:u(pp(At(g,t),_==null?void 0:_[n])),v=At(g,e,Float64Array),b=At(g,c),w=o&&o(g,y,v,b),x=g.length,$=l(new Float64Array(x)),E=p(new Float64Array(x)),k=[];for(const A of m){const M=y?Array.from(oa(A,L=>y[L]).values()):[A];if(w)for(const L of M)L.sort(w);for(const L of M){let F=0,O=0;a&&L.reverse();for(const S of L){const U=v[S];U<0?F=E[S]=($[S]=F)+U:U>0?O=E[S]=($[S]=O)+U:E[S]=$[S]=O}}k.push(M)}return i&&i(k,$,E,b),{data:g,facets:m}}),s,h,d]}function o9(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return a9;case"center":case"silhouette":return f9;case"wiggle":return Zg}throw new Error(`unknown offset: ${t}`)}}function jg(t,e){let n=0,r=0;for(const i of t){const o=e[i];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function a9(t,e,n){for(const r of t)for(const i of r){const[o,a]=jg(i,n);for(const f of i){const c=1/(a-o||1);e[f]=c*(e[f]-o),n[f]=c*(n[f]-o)}}}function f9(t,e,n){for(const r of t){for(const i of r){const[o,a]=jg(i,n);for(const f of i){const c=(a+o)/2;e[f]-=c,n[f]-=c}}Kg(r,e,n)}Qg(t,e,n)}function Zg(t,e,n,r){for(const i of t){const o=new Nn;let a=0;for(const f of i){let c=-1;const s=f.map(d=>Math.abs(n[d]-e[d])),u=f.map(d=>{c=r?r[d]:++c;const p=n[d]-e[d],g=o.has(c)?p-o.get(c):0;return o.set(c,p),g}),h=[0,...i2(u)];for(const d of f)e[d]+=a,n[d]+=a;const l=fn(s);l&&(a-=fn(s,(d,p)=>(u[p]/2+h[p])*d)/l)}Kg(i,e,n)}Qg(t,e,n)}function Kg(t,e,n){const r=Ye(t,i=>Ye(i,o=>e[o]));for(const i of t)for(const o of i)e[o]-=r,n[o]-=r}function Qg(t,e,n){const r=t.length;if(r===1)return;const i=t.map(f=>f.flat()),o=i.map(f=>(Ye(f,c=>e[c])+ue(f,c=>n[c]))/2),a=Ye(o);for(let f=0;f<r;f++){const c=a-o[f];for(const s of i[f])e[s]+=c,n[s]+=c}}function c9(t,e,n){if(t===void 0&&e===Zg)return Vl(pe);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),i=r?Zo:pe;switch((r?t.slice(1):t).toLowerCase()){case"value":case n:return s9(i);case"z":return u9(i);case"sum":return l9(i);case"appearance":return h9(i);case"inside-out":return Vl(i)}return Xl(sp(t))}if(typeof t=="function")return(t.length===1?Xl:d9)(t);if(Array.isArray(t))return p9(t);throw new Error(`invalid order: ${t}`)}}function s9(t){return(e,n,r)=>(i,o)=>t(r[i],r[o])}function u9(t){return(e,n,r,i)=>(o,a)=>t(i[o],i[a])}function l9(t){return Ua(t,(e,n,r,i)=>Cc(je(e),o=>fn(o,a=>r[a]),o=>i[o]))}function h9(t){return Ua(t,(e,n,r,i)=>Cc(je(e),o=>n[$h(o,a=>r[a])],o=>i[o]))}function Vl(t){return Ua(t,(e,n,r,i)=>{const o=je(e),a=Cc(o,h=>n[$h(h,l=>r[l])],h=>i[h]),f=ar(o,h=>fn(h,l=>r[l]),h=>i[h]),c=[],s=[];let u=0;for(const h of a)u<0?(u+=f.get(h),c.push(h)):(u-=f.get(h),s.push(h));return s.reverse().concat(c)})}function Xl(t){return e=>{const n=At(e,t);return(r,i)=>pe(n[r],n[i])}}function d9(t){return e=>(n,r)=>t(e[n],e[r])}function p9(t){return Ua(pe,()=>t)}function Ua(t,e){return(n,r,i,o)=>{if(!o)throw new Error("missing channel: z");const a=new Nn(e(n,r,i,o).map((f,c)=>[f,c]));return(f,c)=>t(a.get(o[f]),a.get(o[c]))}}class Jg extends ae{constructor(e,n,r={},i){super(e,n,r,i);const{inset:o=0,insetTop:a=o,insetRight:f=o,insetBottom:c=o,insetLeft:s=o,rx:u,ry:h}=r;this.insetTop=yt(a),this.insetRight=yt(f),this.insetBottom=yt(c),this.insetLeft=yt(s),this.rx=Nt(u,"auto"),this.ry=Nt(h,"auto")}render(e,n,r,i,o){const{rx:a,ry:f}=this;return Ot("svg:g",o).call(Ke,this,i,o).call(this._transform,this,n).call(c=>c.selectAll().data(e).enter().append("rect").call(Qe,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(K,"rx",a).call(K,"ry",f).call(Wn,this,r)).node()}_x(e,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?o=>n[o]+i:r+i}_y(e,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?o=>n[o]+i:r+i}_width({x:e},{x:n},{marginRight:r,marginLeft:i,width:o}){const{insetLeft:a,insetRight:f}=this,c=n&&e?e.bandwidth():o-r-i;return Math.max(0,c-a-f)}_height({y:e},{y:n},{marginTop:r,marginBottom:i,height:o}){const{insetTop:a,insetBottom:f}=this,c=n&&e?e.bandwidth():o-r-i;return Math.max(0,c-a-f)}}const g9={ariaLabel:"bar"};class m9 extends Jg{constructor(e,n={}){const{x:r,y1:i,y2:o}=n;super(e,{y1:{value:i,scale:"y"},y2:{value:o,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,g9)}_transform(e,n,{y:r}){e.call(De,n,{y:r},0,0)}_y({y:e},{y1:n,y2:r},{marginTop:i}){const{insetTop:o}=this;return Mr(e)?i+o:a=>Math.min(n[a],r[a])+o}_height({y:e},{y1:n,y2:r},{marginTop:i,marginBottom:o,height:a}){const{insetTop:f,insetBottom:c}=this;return Mr(e)?a-i-o-f-c:s=>Math.max(0,Math.abs(r[s]-n[s])-f-c)}}function y9(t,e={}){return F3(e)||(e={...e,x:ss,y2:Pt}),new m9(t,e9(sg(Q7(e))))}const b9={ariaLabel:"cell"};class _9 extends Jg{constructor(e,{x:n,y:r,...i}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,b9)}_transform(e,n){e.call(De,n,{},0,0)}}function w9(t,{x:e,y:n,...r}={}){return[e,n]=ds(e,n),new _9(t,{...r,x:e,y:n})}const v9={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class x9 extends ae{constructor(e,n={}){const{x:r,y:i,z:o,curve:a,tension:f}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:dp(n),optional:!0}},n,v9),this.z=o,this.curve=D7(a,f),Pa(this,n)}filter(e){return e}project(e,n,r){this.curve!==ea&&super.project(e,n,r)}render(e,n,r,i,o){const{x:a,y:f}=r,{curve:c}=this;return Ot("svg:g",o).call(Ke,this,i,o).call(De,this,n).call(s=>s.selectAll().data(I5(e,[a,f],this,r)).enter().append("path").call(Qe,this).call(L5,this,r).call(o4,this,r,o).attr("d",c===ea&&o.projection?M9(o.projection,a,f):G6().curve(c).defined(u=>u>=0).x(u=>a[u]).y(u=>f[u]))).node()}}function M9(t,e,n){const r=Wc(t);return e=vr(e),n=vr(n),i=>{let o=[];const a=[o];for(const f of i)f===-1?(o=[],a.push(o)):o.push([e[f],n[f]]);return r({type:"MultiLineString",coordinates:a})}}function tm(t,{x:e=ss,y:n=Pt,...r}={}){return new x9(t,F7({...r,x:e,y:n}))}const $9={ariaLabel:"tick",fill:null,stroke:"currentColor"};class S9 extends ae{constructor(e,n,r){super(e,n,r,$9),Pa(this,r)}render(e,n,r,i,o){return Ot("svg:g",o).call(Ke,this,i,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Qe,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Wn,this,r).call(Cs,this,r,o)).node()}}class T9 extends S9{constructor(e,n={}){const{x:r,y:i,inset:o=0,insetTop:a=o,insetBottom:f=o}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=yt(a),this.insetBottom=yt(f)}_transform(e,n,{x:r}){e.call(De,n,{x:r},Yt,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&e?o=>n[o]+i:r+i}_y2({y:e},{y:n},{height:r,marginBottom:i}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:r-i-o}}function k9(t,{x:e=Pt,...n}={}){return new T9(t,{...n,x:e})}function E9(t){let e,n,r,i,o,a;return{c(){e=j("main"),n=j("div"),o=ft(),a=j("div"),a.textContent=`Each note is represented by a tick placed at its onset time from left to
        right. A smaller gap followed by a larger one indicates an early note.`,dt(n,"width",r=t[0]+"px"),dt(n,"height",i=t[1]+"px"),on(e,"width",t[0]+"px")},m(f,c){lt(f,e,c),I(e,n),t[4](n),I(e,o),I(e,a)},p(f,[c]){c&1&&r!==(r=f[0]+"px")&&dt(n,"width",r),c&2&&i!==(i=f[1]+"px")&&dt(n,"height",i),c&1&&on(e,"width",f[0]+"px")},i:Mt,o:Mt,d(f){f&&st(e),t[4](null)}}}function A9(t,e,n){let{pattern:r}=e,{width:i=800}=e,{height:o=100}=e,a;vi(()=>{const c=Lr({width:i,height:o,marginLeft:50,x:{axis:!1},y:{axis:!1},marks:[k9(r,{x:s=>s})]});n(2,a.textContent="",a),a.appendChild(c)});function f(c){an[c?"unshift":"push"](()=>{a=c,n(2,a)})}return t.$$set=c=>{"pattern"in c&&n(3,r=c.pattern),"width"in c&&n(0,i=c.width),"height"in c&&n(1,o=c.height)},[i,o,a,r,f]}class em extends Ae{constructor(e){super(),Ee(this,e,A9,E9,ke,{pattern:3,width:0,height:1})}}function C9(t){let e,n,r,i,o,a;return{c(){e=j("main"),n=j("div"),o=ft(),a=j("div"),a.textContent=`For each note but the first, the bars' height shows the distance to the
    previous note. A smaller bar followed by a larger one indicates an early
    note.`,dt(n,"width",r=t[0]+"px"),dt(n,"height",i=t[1]+"px"),on(e,"width",t[0]+"px")},m(f,c){lt(f,e,c),I(e,n),t[4](n),I(e,o),I(e,a)},p(f,[c]){c&1&&r!==(r=f[0]+"px")&&dt(n,"width",r),c&2&&i!==(i=f[1]+"px")&&dt(n,"height",i),c&1&&on(e,"width",f[0]+"px")},i:Mt,o:Mt,d(f){f&&st(e),t[4](null)}}}function N9(t,e,n){let{pattern:r}=e,{width:i=800}=e,{height:o=100}=e,a;vi(()=>{const c=r.map((u,h)=>h===0?0:u-r[h-1]),s=Lr({width:i,height:o,marginLeft:50,y:{axis:!1},marks:[y9(c,{x:(u,h)=>h+1,y:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function f(c){an[c?"unshift":"push"](()=>{a=c,n(2,a)})}return t.$$set=c=>{"pattern"in c&&n(3,r=c.pattern),"width"in c&&n(0,i=c.width),"height"in c&&n(1,o=c.height)},[i,o,a,r,f]}class nm extends Ae{constructor(e){super(),Ee(this,e,N9,C9,ke,{pattern:3,width:0,height:1})}}function D9(t){let e,n,r,i,o,a;return{c(){e=j("main"),n=j("div"),o=ft(),a=j("div"),a.textContent=`For each note but the first, the rectangles' color shows the distance to the
    previous note. A brighter recangle followed by a darker one indicates an
    early note.`,dt(n,"width",r=t[0]+"px"),dt(n,"height",i=t[1]+"px"),on(e,"width",t[0]+"px")},m(f,c){lt(f,e,c),I(e,n),t[4](n),I(e,o),I(e,a)},p(f,[c]){c&1&&r!==(r=f[0]+"px")&&dt(n,"width",r),c&2&&i!==(i=f[1]+"px")&&dt(n,"height",i),c&1&&on(e,"width",f[0]+"px")},i:Mt,o:Mt,d(f){f&&st(e),t[4](null)}}}function L9(t,e,n){let{pattern:r}=e,{width:i=800}=e,{height:o=100}=e,a;vi(()=>{const c=r.map((u,h)=>h===0?0:u-r[h-1]),s=Lr({width:i,height:o,marginLeft:50,y:{axis:!1},color:{scheme:"Greys"},marks:[w9(c,{x:(u,h)=>h+1,fill:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function f(c){an[c?"unshift":"push"](()=>{a=c,n(2,a)})}return t.$$set=c=>{"pattern"in c&&n(3,r=c.pattern),"width"in c&&n(0,i=c.width),"height"in c&&n(1,o=c.height)},[i,o,a,r,f]}class rm extends Ae{constructor(e){super(),Ee(this,e,L9,D9,ke,{pattern:3,width:0,height:1})}}function R9(t){let e,n,r,i,o,a;return{c(){e=j("main"),n=j("div"),o=ft(),a=j("div"),a.textContent=`The waveform of the audio showing the loudness over time time from left to
    right. Note onsets show up as peaks. A smaller gap between peaks followed by
    a larger one indicates an early note.`,dt(n,"width",r=t[0]+"px"),dt(n,"height",i=t[1]+"px"),on(e,"width",t[0]+"px")},m(f,c){lt(f,e,c),I(e,n),t[6](n),I(e,o),I(e,a)},p(f,[c]){c&1&&r!==(r=f[0]+"px")&&dt(n,"width",r),c&2&&i!==(i=f[1]+"px")&&dt(n,"height",i),c&1&&on(e,"width",f[0]+"px")},i:Mt,o:Mt,d(f){f&&st(e),t[6](null)}}}function F9(t,e,n){let{pattern:r}=e,{audioFile:i}=e,{width:o=800}=e,{height:a=50}=e,f,c=null,s;const u=async p=>{n(5,c=await ph(p)),console.log(`Loaded ${p}, sr= ${c.sampleRate}`),s=c.sampleRate};let h=null;const l=(p,g)=>{g&&(h=gh(g,p))};vi(()=>{if(n(2,f.textContent="",f),!h)return;const p=Lr({width:o,height:a,marginLeft:0,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[tm(h,{x:(g,m)=>m/s,y:g=>g})]});f.appendChild(p)});function d(p){an[p?"unshift":"push"](()=>{f=p,n(2,f)})}return t.$$set=p=>{"pattern"in p&&n(3,r=p.pattern),"audioFile"in p&&n(4,i=p.audioFile),"width"in p&&n(0,o=p.width),"height"in p&&n(1,a=p.height)},t.$$.update=()=>{t.$$.dirty&16&&u(i),t.$$.dirty&40&&l(r,c)},[o,a,f,r,i,c,d]}class im extends Ae{constructor(e){super(),Ee(this,e,F9,R9,ke,{pattern:3,audioFile:4,width:0,height:1})}}function I9(t){let e,n,r,i,o,a;return{c(){e=j("main"),n=j("audio"),r=ft(),i=j("button"),i.textContent="play audio",n.controls=!1},m(f,c){lt(f,e,c),I(e,n),t[6](n),I(e,r),I(e,i),o||(a=Vt(i,"click",t[1]),o=!0)},p:Mt,i:Mt,o:Mt,d(f){f&&st(e),t[6](null),o=!1,a()}}}function P9(t,e,n){let{pattern:r}=e,{audioFile:i}=e,{currentTrialNumber:o=-1}=e,a=null;const f=async d=>{n(5,a=await ph(d)),console.log(`Loaded ${d}, sr= ${a.sampleRate}`)};let c=null,s;const u=(d,p)=>{p&&s&&(c=gh(p,d),Xm(c,p.sampleRate,s),console.log("rendered audio and attached to element"))},h=()=>{s&&(console.log("play"),s.pause(),n(0,s.currentTime=0,s),s.play())};function l(d){an[d?"unshift":"push"](()=>{s=d,n(0,s)})}return t.$$set=d=>{"pattern"in d&&n(2,r=d.pattern),"audioFile"in d&&n(3,i=d.audioFile),"currentTrialNumber"in d&&n(4,o=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(i),t.$$.dirty&4&&console.log(r),t.$$.dirty&16&&o>-1&&window.setTimeout(h,200),t.$$.dirty&36&&u(r,a)},[s,h,r,i,o,a,l]}class om extends Ae{constructor(e){super(),Ee(this,e,P9,I9,ke,{pattern:2,audioFile:3,currentTrialNumber:4})}}function jl(t,e,n){const r=t.slice();return r[8]=e[n],r}function Zl(t){let e,n=t[8].substring(0,30)+"",r;return{c(){e=j("option"),r=pt(n),e.__value=t[8],ii(e,e.__value)},m(i,o){lt(i,e,o),I(e,r)},p:Mt,d(i){i&&st(e)}}}function O9(t){let e,n,r,i,o,a,f,c=(yo*1e3).toFixed(0)+"",s,u,h,l,d,p,g,m,_=t[0].toFixed(1)+"",y,v,b=(t[2]*1e3).toFixed(1)+"",w,x,$,E,k,A,M,L,F,O,S,U,R,Y,P,C,B,z,W,J,Z=ve(t[5]),X=[];for(let D=0;D<Z.length;D+=1)X[D]=Zl(jl(t,Z,D));return F=new om({props:{pattern:t[1],audioFile:t[3]}}),S=new im({props:{pattern:t[1],audioFile:t[3],height:100}}),R=new em({props:{pattern:t[1]}}),P=new nm({props:{pattern:t[1]}}),B=new rm({props:{pattern:t[1]}}),{c(){e=j("main"),n=j("h2"),n.textContent="Playground",r=ft(),i=j("p"),i.textContent="All stimuli (audio and visualizations) and configurable deviation.",o=ft(),a=j("div"),f=pt("IOI = "),s=pt(c),u=pt(" milliseconds ("),h=pt(t[4]),l=pt(` bpm)
    `),d=j("label"),p=pt(`deviation as percent of IOI
      `),g=j("input"),m=ft(),y=pt(_),v=pt(`
      (`),w=pt(b),x=pt(" milliseconds)"),$=ft(),E=j("label"),k=pt(`Sample:
      `),A=j("select");for(let D=0;D<X.length;D+=1)X[D].c();M=ft(),L=j("div"),Bt(F.$$.fragment),O=ft(),Bt(S.$$.fragment),U=ft(),Bt(R.$$.fragment),Y=ft(),Bt(P.$$.fragment),C=ft(),Bt(B.$$.fragment),dt(g,"type","range"),dt(g,"min","-15"),dt(g,"max","15"),dt(g,"step","1"),dt(d,"class","svelte-1sot113"),t[3]===void 0&&ur(()=>t[7].call(A)),dt(E,"class","svelte-1sot113"),dt(L,"class","stimuli svelte-1sot113")},m(D,q){lt(D,e,q),I(e,n),I(e,r),I(e,i),I(e,o),I(e,a),I(a,f),I(a,s),I(a,u),I(a,h),I(a,l),I(a,d),I(d,p),I(d,g),ii(g,t[0]),I(d,m),I(d,y),I(d,v),I(d,w),I(d,x),I(a,$),I(a,E),I(E,k),I(E,A);for(let N=0;N<X.length;N+=1)X[N]&&X[N].m(A,null);er(A,t[3],!0),I(e,M),I(e,L),Rt(F,L,null),I(L,O),Rt(S,L,null),I(L,U),Rt(R,L,null),I(L,Y),Rt(P,L,null),I(L,C),Rt(B,L,null),z=!0,W||(J=[Vt(g,"change",t[6]),Vt(g,"input",t[6]),Vt(A,"change",t[7])],W=!0)},p(D,[q]){if((!z||q&16)&&nn(h,D[4]),q&1&&ii(g,D[0]),(!z||q&1)&&_!==(_=D[0].toFixed(1)+"")&&nn(y,_),(!z||q&4)&&b!==(b=(D[2]*1e3).toFixed(1)+"")&&nn(w,b),q&32){Z=ve(D[5]);let G;for(G=0;G<Z.length;G+=1){const at=jl(D,Z,G);X[G]?X[G].p(at,q):(X[G]=Zl(at),X[G].c(),X[G].m(A,null))}for(;G<X.length;G+=1)X[G].d(1);X.length=Z.length}q&40&&er(A,D[3]);const N={};q&2&&(N.pattern=D[1]),q&8&&(N.audioFile=D[3]),F.$set(N);const H={};q&2&&(H.pattern=D[1]),q&8&&(H.audioFile=D[3]),S.$set(H);const V={};q&2&&(V.pattern=D[1]),R.$set(V);const T={};q&2&&(T.pattern=D[1]),P.$set(T);const ot={};q&2&&(ot.pattern=D[1]),B.$set(ot)},i(D){z||(ut(F.$$.fragment,D),ut(S.$$.fragment,D),ut(R.$$.fragment,D),ut(P.$$.fragment,D),ut(B.$$.fragment,D),z=!0)},o(D){gt(F.$$.fragment,D),gt(S.$$.fragment,D),gt(R.$$.fragment,D),gt(P.$$.fragment,D),gt(B.$$.fragment,D),z=!1},d(D){D&&st(e),ri(X,D),Ft(F),Ft(S),Ft(R),Ft(P),Ft(B),W=!1,ln(J)}}}let yo=.5,U9=6,B9=3,z9=0;function q9(t,e,n){let r,i;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],f=5,c=[];function s(){f=_m(this.value),n(0,f)}function u(){a=Af(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,i=f/100*yo),t.$$.dirty&6&&(n(1,c=dh(U9,yo,B9,i,z9)),console.log("generated pattern",c))},n(4,r=1/yo*60),[f,c,i,a,r,o,s,u]}class Y9 extends Ae{constructor(e){super(),Ee(this,e,q9,O9,ke,{})}}var am={exports:{}};(function(t,e){(function(n,r){r()})(Fr,function(){function n(s,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function r(s,u,h){var l=new XMLHttpRequest;l.open("GET",s),l.responseType="blob",l.onload=function(){c(l.response,u,h)},l.onerror=function(){console.error("could not download file")},l.send()}function i(s){var u=new XMLHttpRequest;u.open("HEAD",s,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Fr=="object"&&Fr.global===Fr?Fr:void 0,f=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(s,u,h){var l=a.URL||a.webkitURL,d=document.createElement("a");u=u||s.name||"download",d.download=u,d.rel="noopener",typeof s=="string"?(d.href=s,d.origin===location.origin?o(d):i(d.href)?r(s,u,h):o(d,d.target="_blank")):(d.href=l.createObjectURL(s),setTimeout(function(){l.revokeObjectURL(d.href)},4e4),setTimeout(function(){o(d)},0))}:"msSaveOrOpenBlob"in navigator?function(s,u,h){if(u=u||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(n(s,h),u);else if(i(s))r(s,u,h);else{var l=document.createElement("a");l.href=s,l.target="_blank",setTimeout(function(){o(l)})}}:function(s,u,h,l){if(l=l||open("","_blank"),l&&(l.document.title=l.document.body.innerText="downloading..."),typeof s=="string")return r(s,u,h);var d=s.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||d&&p||f)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var v=m.result;v=g?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=v:location=v,l=null},m.readAsDataURL(s)}else{var _=a.URL||a.webkitURL,y=_.createObjectURL(s);l?l.location=y:location.href=y,l=null,setTimeout(function(){_.revokeObjectURL(y)},4e4)}});a.saveAs=c.saveAs=c,t.exports=c})})(am);var W9=am.exports;const H9=hh(W9);function _t(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}_t.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const r=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][e.operation][r][e.direction](e)};_t.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};_t.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};_t.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=fm(0,t.length-1);return this.activate(t[e]),this};_t.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=fm(0,t.length-1);this.activate(t[e])};_t.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};_t.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};_t.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};_t.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};_t.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};_t.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};_t.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};_t.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};_t.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};_t.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};_t.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};_t.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};_t.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};_t.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let r=1;r<this.stairs[t].val.length;r++)(n===1&&this.stairs[t].val[r]>this.stairs[t].val[r-1]||n===-1&&this.stairs[t].val[r]<this.stairs[t].val[r-1])&&(e[e.length]=this.stairs[t].val[r-1],n=n*-1);return e.shift(),e};_t.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};_t.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<e.length;r++)n=n+e[r];return n/e.length};const Os=function(){};Os.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};Os.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};_t.prototype.checkErr=new Os;function fm(t,e){return Math.floor(Math.random()*(e-t+1))+t}function Kl(t){let e,n,r;return{c(){e=j("button"),e.textContent="toogle absolute"},m(i,o){lt(i,e,o),n||(r=Vt(e,"click",t[8]),n=!0)},p:Mt,d(i){i&&st(e),n=!1,r()}}}function G9(t){let e,n,r,i,o,a=t[2]===null&&Kl(t);return{c(){e=j("main"),n=j("div"),o=ft(),a&&a.c(),dt(n,"width",r=t[0]+"px"),dt(n,"height",i=t[1]+"px")},m(f,c){lt(f,e,c),I(e,n),t[7](n),I(e,o),a&&a.m(e,null)},p(f,[c]){c&1&&r!==(r=f[0]+"px")&&dt(n,"width",r),c&2&&i!==(i=f[1]+"px")&&dt(n,"height",i),f[2]===null?a?a.p(f,c):(a=Kl(f),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:Mt,o:Mt,d(f){f&&st(e),t[7](null),a&&a.d()}}}function V9(t,e,n){let{data:r=[]}=e,{final:i=0}=e,{width:o=800}=e,{height:a=150}=e,{showAbsolute:f=null}=e,c,s=!1;vi(()=>{const l=Lr({width:o,height:a,marginLeft:50,x:{axis:!0,label:"step"},y:{axis:!0},marks:[tm(s?r.map(d=>Math.abs(d)):r,{x:(d,p)=>p,y:d=>d}),Sc([i],{stroke:"red",strokeDasharray:"2 3"}),Sc([0])]});n(3,c.textContent="",c),c.appendChild(l)});function u(l){an[l?"unshift":"push"](()=>{c=l,n(3,c)})}const h=()=>{n(4,s=!s)};return t.$$set=l=>{"data"in l&&n(5,r=l.data),"final"in l&&n(6,i=l.final),"width"in l&&n(0,o=l.width),"height"in l&&n(1,a=l.height),"showAbsolute"in l&&n(2,f=l.showAbsolute)},[o,a,f,c,s,r,i,u,h]}class cm extends Ae{constructor(e){super(),Ee(this,e,V9,G9,ke,{data:5,final:6,width:0,height:1,showAbsolute:2})}}function Ql(t,e,n){const r=t.slice();return r[33]=e[n],r}function Jl(t,e,n){const r=t.slice();return r[36]=e[n],r}function th(t){let e,n=t[36]+"",r;return{c(){e=j("option"),r=pt(n),e.__value=t[36],ii(e,e.__value)},m(i,o){lt(i,e,o),I(e,r)},p:Mt,d(i){i&&st(e)}}}function eh(t){let e,n=t[33].substring(0,30)+"",r;return{c(){e=j("option"),r=pt(n),e.__value=t[33],ii(e,e.__value)},m(i,o){lt(i,e,o),I(e,r)},p:Mt,d(i){i&&st(e)}}}function X9(t){let e,n,r,i,o;return i=new cm({props:{data:t[6],final:t[7]}}),{c(){e=j("p"),n=pt(t[8]),r=ft(),Bt(i.$$.fragment)},m(a,f){lt(a,e,f),I(e,n),lt(a,r,f),Rt(i,a,f),o=!0},p(a,f){(!o||f[0]&256)&&nn(n,a[8]);const c={};f[0]&64&&(c.data=a[6]),f[0]&128&&(c.final=a[7]),i.$set(c)},i(a){o||(ut(i.$$.fragment,a),o=!0)},o(a){gt(i.$$.fragment,a),o=!1},d(a){a&&(st(e),st(r)),Ft(i,a)}}}function j9(t){let e,n,r,i,o=t[2]+1+"",a,f,c,s,u,h;const l=[K9,Z9],d=[];function p(g,m){return g[5]==="audio"?0:g[4]===!1?1:-1}return~(c=p(t))&&(s=d[c]=l[c](t)),{c(){e=j("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=ft(),r=j("p"),i=pt("Trial number "),a=pt(o),f=ft(),s&&s.c(),u=sh()},m(g,m){lt(g,e,m),lt(g,n,m),lt(g,r,m),I(r,i),I(r,a),lt(g,f,m),~c&&d[c].m(g,m),lt(g,u,m),h=!0},p(g,m){(!h||m[0]&4)&&o!==(o=g[2]+1+"")&&nn(a,o);let _=c;c=p(g),c===_?~c&&d[c].p(g,m):(s&&(Sr(),gt(d[_],1,1,()=>{d[_]=null}),Tr()),~c?(s=d[c],s?s.p(g,m):(s=d[c]=l[c](g),s.c()),ut(s,1),s.m(u.parentNode,u)):s=null)},i(g){h||(ut(s),h=!0)},o(g){gt(s),h=!1},d(g){g&&(st(e),st(n),st(r),st(f),st(u)),~c&&d[c].d(g)}}}function Z9(t){let e,n,r,i;const o=[ex,tx,J9,Q9],a=[];function f(c,s){return c[5]==="waveform"?0:c[5]==="tick"?1:c[5]==="bar"?2:c[5]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),r=sh()},m(c,s){~e&&a[e].m(c,s),lt(c,r,s),i=!0},p(c,s){let u=e;e=f(c),e===u?~e&&a[e].p(c,s):(n&&(Sr(),gt(a[u],1,1,()=>{a[u]=null}),Tr()),~e?(n=a[e],n?n.p(c,s):(n=a[e]=o[e](c),n.c()),ut(n,1),n.m(r.parentNode,r)):n=null)},i(c){i||(ut(n),i=!0)},o(c){gt(n),i=!1},d(c){c&&st(r),~e&&a[e].d(c)}}}function K9(t){let e,n,r,i;return e=new om({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[2]}}),{c(){Bt(e.$$.fragment),n=ft(),r=j("p"),r.textContent="You can play the audio as many times as you like."},m(o,a){Rt(e,o,a),lt(o,n,a),lt(o,r,a),i=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&4&&(f.currentTrialNumber=o[2]),e.$set(f)},i(o){i||(ut(e.$$.fragment,o),i=!0)},o(o){gt(e.$$.fragment,o),i=!1},d(o){o&&(st(n),st(r)),Ft(e,o)}}}function Q9(t){let e,n;return e=new rm({props:{pattern:t[0],width:Ba,height:za}}),{c(){Bt(e.$$.fragment)},m(r,i){Rt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(ut(e.$$.fragment,r),n=!0)},o(r){gt(e.$$.fragment,r),n=!1},d(r){Ft(e,r)}}}function J9(t){let e,n;return e=new nm({props:{pattern:t[0],width:Ba,height:za}}),{c(){Bt(e.$$.fragment)},m(r,i){Rt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(ut(e.$$.fragment,r),n=!0)},o(r){gt(e.$$.fragment,r),n=!1},d(r){Ft(e,r)}}}function tx(t){let e,n;return e=new em({props:{pattern:t[0],width:Ba,height:za}}),{c(){Bt(e.$$.fragment)},m(r,i){Rt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(ut(e.$$.fragment,r),n=!0)},o(r){gt(e.$$.fragment,r),n=!1},d(r){Ft(e,r)}}}function ex(t){let e,n;return e=new im({props:{pattern:t[0],audioFile:t[1],width:Ba,height:za}}),{c(){Bt(e.$$.fragment)},m(r,i){Rt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),i[0]&2&&(o.audioFile=r[1]),e.$set(o)},i(r){n||(ut(e.$$.fragment,r),n=!0)},o(r){gt(e.$$.fragment,r),n=!1},d(r){Ft(e,r)}}}function nx(t){let e,n,r,i,o,a,f,c,s,u,h,l,d,p,g,m,_,y,v,b,w,x,$,E,k,A=ve(t[10]),M=[];for(let R=0;R<A.length;R+=1)M[R]=th(Jl(t,A,R));let L=ve(t[9]),F=[];for(let R=0;R<L.length;R+=1)F[R]=eh(Ql(t,L,R));const O=[j9,X9],S=[];function U(R,Y){return R[3]?0:R[6].length>0?1:-1}return~(w=U(t))&&(x=S[w]=O[w](t)),{c(){e=j("main"),n=j("h2"),n.textContent="Study",r=ft(),i=j("p"),i.innerHTML=`You will be presented with a sequence of six notes which should have
        equal distances. The <b>fourth note</b> might be played too early or too
        late.`,o=ft(),a=j("div"),f=j("label"),c=pt(`Encoding:
            `),s=j("select");for(let R=0;R<M.length;R+=1)M[R].c();u=ft(),h=j("label"),l=pt(`Sample:
            `),d=j("select");for(let R=0;R<F.length;R+=1)F[R].c();g=ft(),m=j("button"),_=pt("Start"),y=ft(),v=j("button"),v.textContent="Download results",b=ft(),x&&x.c(),s.disabled=t[3],t[5]===void 0&&ur(()=>t[15].call(s)),d.disabled=p=t[5]!=="audio"&&t[5]!=="waveform",t[1]===void 0&&ur(()=>t[16].call(d)),m.disabled=t[3]},m(R,Y){lt(R,e,Y),I(e,n),I(e,r),I(e,i),I(e,o),I(e,a),I(a,f),I(f,c),I(f,s);for(let P=0;P<M.length;P+=1)M[P]&&M[P].m(s,null);er(s,t[5],!0),I(a,u),I(a,h),I(h,l),I(h,d);for(let P=0;P<F.length;P+=1)F[P]&&F[P].m(d,null);er(d,t[1],!0),I(a,g),I(a,m),I(m,_),I(a,y),I(a,v),I(e,b),~w&&S[w].m(e,null),$=!0,E||(k=[Vt(s,"change",t[15]),Vt(d,"change",t[16]),Vt(m,"click",t[12]),Vt(v,"click",t[17])],E=!0)},p(R,Y){if(Y[0]&1024){A=ve(R[10]);let C;for(C=0;C<A.length;C+=1){const B=Jl(R,A,C);M[C]?M[C].p(B,Y):(M[C]=th(B),M[C].c(),M[C].m(s,null))}for(;C<M.length;C+=1)M[C].d(1);M.length=A.length}if((!$||Y[0]&8)&&(s.disabled=R[3]),Y[0]&1056&&er(s,R[5]),Y[0]&512){L=ve(R[9]);let C;for(C=0;C<L.length;C+=1){const B=Ql(R,L,C);F[C]?F[C].p(B,Y):(F[C]=eh(B),F[C].c(),F[C].m(d,null))}for(;C<F.length;C+=1)F[C].d(1);F.length=L.length}(!$||Y[0]&1056&&p!==(p=R[5]!=="audio"&&R[5]!=="waveform"))&&(d.disabled=p),Y[0]&514&&er(d,R[1]),(!$||Y[0]&8)&&(m.disabled=R[3]);let P=w;w=U(R),w===P?~w&&S[w].p(R,Y):(x&&(Sr(),gt(S[P],1,1,()=>{S[P]=null}),Tr()),~w?(x=S[w],x?x.p(R,Y):(x=S[w]=O[w](R),x.c()),ut(x,1),x.m(e,null)):x=null)},i(R){$||(ut(x),$=!0)},o(R){gt(x),$=!1},d(R){R&&st(e),ri(M,R),ri(F,R),~w&&S[w].d(),E=!1,ln(k)}}}let nh=.5;const Ef=15;let rx=6,ix=0,Ba=600,za=100;function ox(t,e,n){let r;const i=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=i[0],a,f,c,s=[],u,h,l=!1,d=!1,p=!1,g=["audio","waveform","tick","bar","color"],m="tick",_=Ef,y=4-1,v=[],b=[],w=0,x="";const $=[];vm(()=>{document.querySelector("html").addEventListener("keyup",O)});const E=()=>{h=new _t({ratio:{firstVal:Ef,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Ef],direction:-1,reversalLimit:5,verbosity:1}}),h.init()};function k(){E(),n(2,a=0),f=0,u=0,n(3,l=!0),A()}function A(){console.log("Starting trial "+a),c={},d=!0,M()}function M(){let C=Math.round(h.getLast("ratio"));C=Math.random()<.5?C:-C,c.deviation=C,n(13,_=C),console.log("generated pattern",v),n(4,p=!0),window.setTimeout(()=>{n(4,p=!1)},1e3)}function L(P){if(!d)return;d=!1,c.decisionChoice=P,c.errorCode=0;const C=u;(c.decisionChoice==0&&c.deviation<0||c.decisionChoice==1&&c.deviation>0)&&c.errorCode==0&&u++,c.errorCode==0&&(h.next(C!=u),s[s.length]=c),c.errorCode==0&&f++,n(2,a++,a),h.reversalLimitReached("ratio")?F():A()}function F(){n(3,l=!1),S(),n(6,b=[]),n(7,w=h.getFinalVal("ratio"));for(let P=0;P<s.length;P++)n(6,b[P]=s[P].deviation,b);console.log(b),$.push({encoding:m,audioFile:o,final:w,data:b,score:u,trialCount:a+1,trials:s,validTrialCount:f+1}),console.log("results (all)",$)}function O(P){switch(P.key){case"ArrowLeft":L(0);break;case"ArrowRight":L(1);break}}function S(){n(8,x=`You scored ${u} / ${a+1} (${(u/(a+1)*100).toFixed(1)}%) Your end difficulty was ${h.getFinalVal("ratio")}`)}function U(){m=Af(this),n(5,m),n(10,g)}function R(){o=Af(this),n(1,o),n(9,i)}const Y=()=>{const P=JSON.stringify($),C=new Blob([P],{type:"text/plain;charset=utf-8"});H9(C,"results.json")};return t.$$.update=()=>{t.$$.dirty[0]&8192&&n(14,r=_/100*nh),t.$$.dirty[0]&16385&&(n(0,v=dh(rx,nh,y,r,ix)),console.log("generated pattern",v))},[v,o,a,l,p,m,b,w,x,i,g,$,k,_,r,U,R,Y]}class ax extends Ae{constructor(e){super(),Ee(this,e,ox,nx,ke,{},null,[-1,-1])}}function rh(t,e,n){const r=t.slice();return r[3]=e[n],r[5]=n,r}function ih(t,e,n){const r=t.slice();return r[6]=e[n],r}function oh(t){let e=t[6].encoding+"",n,r,i=t[6].final.toFixed(2)+"",o,a,f,c;return f=new cm({props:{data:t[6].data,final:t[6].final,showAbsolute:!0,height:120}}),{c(){n=pt(e),r=pt(`
        (final: `),o=pt(i),a=pt(`)
        `),Bt(f.$$.fragment)},m(s,u){lt(s,n,u),lt(s,r,u),lt(s,o,u),lt(s,a,u),Rt(f,s,u),c=!0},p(s,u){(!c||u&1)&&e!==(e=s[6].encoding+"")&&nn(n,e),(!c||u&1)&&i!==(i=s[6].final.toFixed(2)+"")&&nn(o,i);const h={};u&1&&(h.data=s[6].data),u&1&&(h.final=s[6].final),f.$set(h)},i(s){c||(ut(f.$$.fragment,s),c=!0)},o(s){gt(f.$$.fragment,s),c=!1},d(s){s&&(st(n),st(r),st(o),st(a)),Ft(f,s)}}}function ah(t){let e,n=t[1][t[5]]+"",r,i,o,a,f=ve(t[3]),c=[];for(let u=0;u<f.length;u+=1)c[u]=oh(ih(t,f,u));const s=u=>gt(c[u],1,1,()=>{c[u]=null});return{c(){e=j("div"),r=pt(n),i=ft();for(let u=0;u<c.length;u+=1)c[u].c();o=ft()},m(u,h){lt(u,e,h),I(e,r),I(e,i);for(let l=0;l<c.length;l+=1)c[l]&&c[l].m(e,null);I(e,o),a=!0},p(u,h){if((!a||h&2)&&n!==(n=u[1][u[5]]+"")&&nn(r,n),h&1){f=ve(u[3]);let l;for(l=0;l<f.length;l+=1){const d=ih(u,f,l);c[l]?(c[l].p(d,h),ut(c[l],1)):(c[l]=oh(d),c[l].c(),ut(c[l],1),c[l].m(e,o))}for(Sr(),l=f.length;l<c.length;l+=1)s(l);Tr()}},i(u){if(!a){for(let h=0;h<f.length;h+=1)ut(c[h]);a=!0}},o(u){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)gt(c[h]);a=!1},d(u){u&&st(e),ri(c,u)}}}function fx(t){let e,n,r,i,o,a,f,c,s=ve(t[0]),u=[];for(let l=0;l<s.length;l+=1)u[l]=ah(rh(t,s,l));const h=l=>gt(u[l],1,1,()=>{u[l]=null});return{c(){e=j("main"),n=j("h2"),n.textContent="Analysis",r=ft(),i=j("input"),o=ft();for(let l=0;l<u.length;l+=1)u[l].c();dt(i,"type","file")},m(l,d){lt(l,e,d),I(e,n),I(e,r),I(e,i),I(e,o);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(e,null);a=!0,f||(c=Vt(i,"input",t[2]),f=!0)},p(l,[d]){if(d&3){s=ve(l[0]);let p;for(p=0;p<s.length;p+=1){const g=rh(l,s,p);u[p]?(u[p].p(g,d),ut(u[p],1)):(u[p]=ah(g),u[p].c(),ut(u[p],1),u[p].m(e,null))}for(Sr(),p=s.length;p<u.length;p+=1)h(p);Tr()}},i(l){if(!a){for(let d=0;d<s.length;d+=1)ut(u[d]);a=!0}},o(l){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)gt(u[d]);a=!1},d(l){l&&st(e),ri(u,l),f=!1,c()}}}function cx(t,e,n){let r=[],i=[];const o=async a=>{const f=[],c=[];for(const s of a.target.files){const u=await s.text();f.push(JSON.parse(u)),c.push(s.name)}console.log("data",f,i),n(0,r=f),n(1,i=c)};return t.$$.update=()=>{t.$$.dirty&1&&console.log(r)},[r,i,o]}class sx extends Ae{constructor(e){super(),Ee(this,e,cx,fx,ke,{})}}function ux(t){let e,n;return e=new sx({}),{c(){Bt(e.$$.fragment)},m(r,i){Rt(e,r,i),n=!0},i(r){n||(ut(e.$$.fragment,r),n=!0)},o(r){gt(e.$$.fragment,r),n=!1},d(r){Ft(e,r)}}}function lx(t){let e,n;return e=new ax({}),{c(){Bt(e.$$.fragment)},m(r,i){Rt(e,r,i),n=!0},i(r){n||(ut(e.$$.fragment,r),n=!0)},o(r){gt(e.$$.fragment,r),n=!1},d(r){Ft(e,r)}}}function hx(t){let e,n;return e=new Y9({}),{c(){Bt(e.$$.fragment)},m(r,i){Rt(e,r,i),n=!0},i(r){n||(ut(e.$$.fragment,r),n=!0)},o(r){gt(e.$$.fragment,r),n=!1},d(r){Ft(e,r)}}}function dx(t){let e,n,r,i,o,a,f,c,s,u,h,l,d,p,g;const m=[hx,lx,ux],_=[];function y(v,b){return v[0]==="playground"?0:v[0]==="study"?1:v[0]==="analysis"?2:-1}return~(h=y(t))&&(l=_[h]=m[h](t)),{c(){e=j("main"),n=j("h1"),n.textContent="Rhythm Error Perception Study",r=ft(),i=j("div"),o=j("button"),o.textContent="Playground",a=ft(),f=j("button"),f.textContent="Study",c=ft(),s=j("button"),s.textContent="Analysis",u=ft(),l&&l.c()},m(v,b){lt(v,e,b),I(e,n),I(e,r),I(e,i),I(i,o),I(i,a),I(i,f),I(i,c),I(i,s),I(e,u),~h&&_[h].m(e,null),d=!0,p||(g=[Vt(o,"click",t[1]),Vt(f,"click",t[2]),Vt(s,"click",t[3])],p=!0)},p(v,[b]){let w=h;h=y(v),h!==w&&(l&&(Sr(),gt(_[w],1,1,()=>{_[w]=null}),Tr()),~h?(l=_[h],l||(l=_[h]=m[h](v),l.c()),ut(l,1),l.m(e,null)):l=null)},i(v){d||(ut(l),d=!0)},o(v){gt(l),d=!1},d(v){v&&st(e),~h&&_[h].d(),p=!1,ln(g)}}}function px(t,e,n){let r="analysis";return[r,()=>n(0,r="playground"),()=>n(0,r="study"),()=>n(0,r="analysis")]}class gx extends Ae{constructor(e){super(),Ee(this,e,px,dx,ke,{})}}new gx({target:document.getElementById("app")});export{hh as g};

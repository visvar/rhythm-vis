var Fg=Object.defineProperty;var Rg=(t,e,n)=>e in t?Fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fn=(t,e,n)=>(Rg(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function $t(){}function Oh(t){return t()}function lc(){return Object.create(null)}function nn(t){t.forEach(Oh)}function Uh(t){return typeof t=="function"}function ne(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ig(t){return Object.keys(t).length===0}function $(t,e){t.appendChild(e)}function ht(t,e,n){t.insertBefore(e,n||null)}function ut(t){t.parentNode&&t.parentNode.removeChild(t)}function Lo(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function O(t){return document.createElement(t)}function Pg(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function pt(t){return document.createTextNode(t)}function K(){return pt(" ")}function Qs(){return pt("")}function kt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Z(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Mr(t){return t===""?null:+t}function Og(t){return Array.from(t.childNodes)}function gn(t,e){e=""+e,t.data!==e&&(t.data=e)}function bt(t,e){t.value=e??""}function Qt(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function dn(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Fo(t){const e=t.querySelector(":checked");return e&&e.__value}class Ug{constructor(e=!1){fn(this,"is_svg",!1);fn(this,"e");fn(this,"n");fn(this,"t");fn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,r=null){this.e||(this.is_svg?this.e=Pg(n.nodeName):this.e=O(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)ht(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(ut)}}let bi;function li(t){bi=t}function Bh(){if(!bi)throw new Error("Function called outside component initialization");return bi}function zh(t){Bh().$$.on_mount.push(t)}function Qn(t){Bh().$$.after_update.push(t)}const pr=[],Ie=[];let yr=[];const hc=[],Bg=Promise.resolve();let rs=!1;function zg(){rs||(rs=!0,Bg.then(qh))}function zn(t){yr.push(t)}const _f=new Set;let fr=0;function qh(){if(fr!==0)return;const t=bi;do{try{for(;fr<pr.length;){const e=pr[fr];fr++,li(e),qg(e.$$)}}catch(e){throw pr.length=0,fr=0,e}for(li(null),pr.length=0,fr=0;Ie.length;)Ie.pop()();for(let e=0;e<yr.length;e+=1){const n=yr[e];_f.has(n)||(_f.add(n),n())}yr.length=0}while(pr.length);for(;hc.length;)hc.pop()();rs=!1,_f.clear(),li(t)}function qg(t){if(t.fragment!==null){t.update(),nn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(zn)}}function Hg(t){const e=[],n=[];yr.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),yr=e}const To=new Set;let Ln;function Br(){Ln={r:0,c:[],p:Ln}}function zr(){Ln.r||nn(Ln.c),Ln=Ln.p}function tt(t,e){t&&t.i&&(To.delete(t),t.i(e))}function st(t,e,n,r){if(t&&t.o){if(To.has(t))return;To.add(t),Ln.c.push(()=>{To.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function pn(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function vt(t){t&&t.c()}function _t(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),zn(()=>{const o=t.$$.on_mount.map(Oh).filter(Uh);t.$$.on_destroy?t.$$.on_destroy.push(...o):nn(o),t.$$.on_mount=[]}),i.forEach(zn)}function wt(t,e){const n=t.$$;n.fragment!==null&&(Hg(n.after_update),nn(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Wg(t,e){t.$$.dirty[0]===-1&&(pr.push(t),zg(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function re(t,e,n,r,i,o,a=null,f=[-1]){const s=bi;li(t);const u=t.$$={fragment:null,ctx:[],props:o,update:$t,not_equal:i,bound:lc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:lc(),dirty:f,skip_bound:!1,root:e.target||s.$$.root};a&&a(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,l,...d)=>{const p=d.length?d[0]:l;return u.ctx&&i(u.ctx[h],u.ctx[h]=p)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](p),c&&Wg(t,h)),l}):[],u.update(),c=!0,nn(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const h=Og(e.target);u.fragment&&u.fragment.l(h),h.forEach(ut)}else u.fragment&&u.fragment.c();e.intro&&tt(t.$$.fragment),_t(t,e.target,e.anchor),qh()}li(s)}class ie{constructor(){fn(this,"$$");fn(this,"$$set")}$destroy(){wt(this,1),this.$destroy=$t}$on(e,n){if(!Uh(n))return $t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Ig(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yg="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yg);const Gg="modulepreload",Vg=function(t){return"/rhythm-vis/"+t},dc={},sr=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Vg(o),o in dc)return;dc[o]=!0;const a=o.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const h=i[c];if(h.href===o&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${f}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Gg,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function Xg(t){if(t){if(t=new Uint8Array(t.buffer||t),Zg(t))return"wav";if(jg(t))return"mp3";if(Qg(t))return"flac";if(Jg(t))return"m4a";if(t2(t))return"opus";if(Kg(t))return"oga";if(e2(t))return"qoa"}}function jg(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function Zg(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function Kg(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function Qg(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function Jg(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function t2(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function e2(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let n2=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,r){r==null&&(r=0);for(var i=this._channelData[n],o=r,a=0;o<this.length&&a<e.length;o++,a++)e[a]=i[o]}copyToChannel(e,n,r){var i=this._channelData[n];r||(r=0);for(var o=r,a=0;o<this.length&&a<e.length;o++,a++)i[o]=e[a]}};const r2=globalThis.AudioBuffer||n2;async function i2(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=Xg(t);if(!e)throw Error("Cannot detect audio format");if(!ln[e])throw Error("Missing decoder for "+e+" format");return ln[e](t)}const ln={async oga(t){let{OggVorbisDecoder:e}=await sr(()=>import("./index-47e20db5.js"),["assets/index-47e20db5.js","assets/utilities-5d08a4cf.js","assets/index-0047a0ad.js"]);const n=new e;return await n.ready,(ln.oga=async r=>r&&ur(await n.decodeFile(r)))(t)},async mp3(t){const{MPEGDecoder:e}=await sr(()=>import("./index-642641d5.js"),["assets/index-642641d5.js","assets/utilities-5d08a4cf.js"]),n=new e;return await n.ready,(ln.mp3=r=>r&&ur(n.decode(r)))(t)},async flac(t){const{FLACDecoder:e}=await sr(()=>import("./index-cf4bfc1f.js"),["assets/index-cf4bfc1f.js","assets/utilities-5d08a4cf.js","assets/index-0047a0ad.js"]),n=new e;return await n.ready,(ln.mp3=async r=>r&&ur(await n.decode(r)))(t)},async opus(t){const{OggOpusDecoder:e}=await sr(()=>import("./index-b5e1dd24.js"),["assets/index-b5e1dd24.js","assets/utilities-5d08a4cf.js","assets/index-0047a0ad.js"]),n=new e;return await n.ready,(ln.opus=async r=>r&&ur(await n.decodeFile(r)))(t)},async wav(t){let e=await sr(()=>import("./index-3228477b.js").then(r=>r.i),[]),{decode:n}=e.default;return(ln.wav=r=>r&&ur(n(r)))(t)},async qoa(t){let{decode:e}=await sr(()=>import("./index-12ef46d6.js"),[]);return(ln.qoa=n=>n&&ur(e(n)))(t)}};function ur({channelData:t,sampleRate:e}){let n=new r2({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let r=0;r<t.length;r++)n.getChannelData(r).set(t[r]);return n}var jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o2=a2;function a2(t,e){e=e||{};var n=t.numberOfChannels,r=t.sampleRate,i=e.float32?3:1,o=i===3?32:16,a;return n===2?a=s2(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),f2(a,i,r,n,o)}function f2(t,e,n,r,i){var o=i/8,a=r*o,f=new ArrayBuffer(44+t.length*o),s=new DataView(f);return ro(s,0,"RIFF"),s.setUint32(4,36+t.length*o,!0),ro(s,8,"WAVE"),ro(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,e,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*a,!0),s.setUint16(32,a,!0),s.setUint16(34,i,!0),ro(s,36,"data"),s.setUint32(40,t.length*o,!0),e===1?c2(s,44,t):u2(s,44,t),f}function s2(t,e){for(var n=t.length+e.length,r=new Float32Array(n),i=0,o=0;i<n;)r[i++]=t[o],r[i++]=e[o],o++;return r}function u2(t,e,n){for(var r=0;r<n.length;r++,e+=4)t.setFloat32(e,n[r],!0)}function c2(t,e,n){for(var r=0;r<n.length;r++,e+=2){var i=Math.max(-1,Math.min(1,n[r]));t.setInt16(e,i<0?i*32768:i*32767,!0)}}function ro(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}const l2=Hh(o2);function Ro(t=16,e=.5,n=0,r=0,i=!1,o=0){const a=[];for(let f=0;f<t;++f){let s;i?s=f>=n?r:0:s=f===n?r:0,a.push(f*e+o+s)}return a}async function Wh(t){const n=await(await fetch(t)).arrayBuffer();return await i2(n)}function Yh(t,e,n=1){const r=e.at(-1)+n,i=t.getChannelData(0),o=new Float32Array(Math.ceil(r*t.sampleRate));for(const a of e){const f=Math.round(a*t.sampleRate);for(let s=0;s<i.length;++s)o[f+s]=i[s]}return o}function h2(t,e,n){const r=new AudioBuffer({sampleRate:e,length:t.length});r.copyToChannel(t,0);const i=new Blob([l2(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function d2(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function Xt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Li(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $a(t){let e,n,r;t.length!==2?(e=Xt,n=(f,s)=>Xt(t(f),s),r=(f,s)=>t(f)-s):(e=t===Xt||t===Li?t:p2,n=t,r=t);function i(f,s,u=0,c=f.length){if(u<c){if(e(s,s)!==0)return c;do{const h=u+c>>>1;n(f[h],s)<0?u=h+1:c=h}while(u<c)}return u}function o(f,s,u=0,c=f.length){if(u<c){if(e(s,s)!==0)return c;do{const h=u+c>>>1;n(f[h],s)<=0?u=h+1:c=h}while(u<c)}return u}function a(f,s,u=0,c=f.length){const h=i(f,s,u,c-1);return h>u&&r(f[h-1],s)>-r(f[h],s)?h-1:h}return{left:i,center:a,right:o}}function p2(){return 0}function Gh(t){return t===null?NaN:+t}function*m2(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const g2=$a(Xt),b2=g2.right;$a(Gh).center;const Sa=b2;function Js(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function y2(t){return t.length|0}function _2(t){return!(t>0)}function w2(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function v2(t){return e=>t(...e)}function x2(...t){const e=typeof t[t.length-1]=="function"&&v2(t.pop());t=t.map(w2);const n=t.map(y2),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(_2))return o;for(;;){o.push(i.map((f,s)=>t[s][f]));let a=r;for(;++i[a]===n[a];){if(a===0)return e?o.map(e):o;i[a--]=0}}}function M2(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function tu(t,e){let n=0,r,i=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let f of t)(f=e(f,++a,t))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,o+=r*(f-i))}if(n>1)return o/(n-1)}function Ta(t,e){const n=tu(t,e);return n&&Math.sqrt(n)}function se(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class qn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=e+o,f=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);f&&(n[r++]=f),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,i=e[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Hn extends Map{constructor(e,n=jh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(is(this,e))}has(e){return super.has(is(this,e))}set(e,n){return super.set(Vh(this,e),n)}delete(e){return super.delete(Xh(this,e))}}class ka extends Set{constructor(e,n=jh){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(is(this,e))}add(e){return super.add(Vh(this,e))}delete(e){return super.delete(Xh(this,e))}}function is({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Vh({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Xh({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function jh(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Io(t){return t}function Ea(t,...e){return Ca(t,Io,Io,e)}function $2(t,...e){return Ca(t,Array.from,Io,e)}function _r(t,e,...n){return Ca(t,Io,e,n)}function S2(t,e,...n){return Ca(t,Array.from,e,n)}function Ca(t,e,n,r){return function i(o,a){if(a>=r.length)return n(o);const f=new Hn,s=r[a++];let u=-1;for(const c of o){const h=s(c,++u,o),l=f.get(h);l?l.push(c):f.set(h,[c])}for(const[c,h]of f)f.set(c,i(h,a));return e(f)}(t,0)}function T2(t,e){return Array.from(e,n=>t[n])}function yi(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,o)=>o);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,o)=>{for(const a of e){const f=Po(a[i],a[o]);if(f)return f}})):(n=t.map(n),r.sort((i,o)=>Po(n[i],n[o]))),T2(t,r)}return t.sort(Zh(n))}function Zh(t=Xt){if(t===Xt)return Po;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Po(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function eu(t,e,n){return(e.length!==2?yi(_r(t,e,n),([r,i],[o,a])=>Xt(i,a)||Xt(r,o)):yi(Ea(t,n),([r,i],[o,a])=>e(i,a)||Xt(r,o))).map(([r])=>r)}const k2=Math.sqrt(50),E2=Math.sqrt(10),C2=Math.sqrt(2);function Oo(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=k2?10:o>=E2?5:o>=C2?2:1;let f,s,u;return i<0?(u=Math.pow(10,-i)/a,f=Math.round(t*u),s=Math.round(e*u),f/u<t&&++f,s/u>e&&--s,u=-u):(u=Math.pow(10,i)*a,f=Math.round(t/u),s=Math.round(e/u),f*u<t&&++f,s*u>e&&--s),s<f&&.5<=n&&n<2?Oo(t,e,n*2):[f,s,u]}function _i(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?Oo(e,t,n):Oo(t,e,n);if(!(o>=i))return[];const f=o-i+1,s=new Array(f);if(r)if(a<0)for(let u=0;u<f;++u)s[u]=(o-u)/-a;else for(let u=0;u<f;++u)s[u]=(o-u)*a;else if(a<0)for(let u=0;u<f;++u)s[u]=(i+u)/-a;else for(let u=0;u<f;++u)s[u]=(i+u)*a;return s}function Uo(t,e,n){return e=+e,t=+t,n=+n,Oo(t,e,n)[2]}function os(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Uo(e,t,n):Uo(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function A2(t){return Math.max(1,Math.ceil(Math.log(Js(t))/Math.LN2)+1)}function de(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function N2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Ze(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function D2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Kh(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Po:Zh(i);r>n;){if(r-n>600){const s=r-n+1,u=e-n+1,c=Math.log(s),h=.5*Math.exp(2*c/3),l=.5*Math.sqrt(c*h*(s-h)/s)*(u-s/2<0?-1:1),d=Math.max(n,Math.floor(e-u*h/s+l)),p=Math.min(r,Math.floor(e+(s-u)*h/s+l));Kh(t,e,d,p,i)}const o=t[e];let a=n,f=r;for(Zr(t,n,e),i(t[r],o)>0&&Zr(t,n,r);a<f;){for(Zr(t,a,f),++a,--f;i(t[a],o)<0;)++a;for(;i(t[f],o)>0;)--f}i(t[n],o)===0?Zr(t,n,f):(++f,Zr(t,f,r)),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Zr(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Qh(t,e=Xt){let n,r=!1;if(e.length===1){let i;for(const o of t){const a=e(o);(r?Xt(a,i)>0:Xt(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function $r(t,e,n){if(t=Float64Array.from(m2(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Ze(t);if(e>=1)return de(t);var r,i=(r-1)*e,o=Math.floor(i),a=de(Kh(t,o).subarray(0,o+1)),f=Ze(t.subarray(o+1));return a+(f-a)*(i-o)}}function L2(t,e,n=Gh){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),f=+n(t[o+1],o+1,t);return a+(f-a)*(i-o)}}function F2(t,e,n){const r=Js(t),i=$r(t,.75)-$r(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function Jh(t,e,n){const r=Js(t),i=Ta(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function Aa(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function as(t,e){return $r(t,.5,e)}function*R2(t){for(const e of t)yield*e}function td(t){return Array.from(R2(t))}function I2(t,e){const n=new Hn;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function P2(t,e=O2){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function O2(t,e){return[t,e]}function fs(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function yn(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Bo(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function U2(t){return t}var wf=1,vf=2,ss=3,io=4,pc=1e-6;function B2(t){return"translate("+t+",0)"}function z2(t){return"translate(0,"+t+")"}function q2(t){return e=>+t(e)}function H2(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function W2(){return!this.__axis}function Y2(t,e){var n=[],r=null,i=null,o=6,a=6,f=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===wf||t===io?-1:1,c=t===io||t===vf?"x":"y",h=t===wf||t===ss?B2:z2;function l(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):U2),g=Math.max(o,0)+f,y=e.range(),b=+y[0]+s,x=+y[y.length-1]+s,_=(e.bandwidth?H2:q2)(e.copy(),s),v=d.selection?d.selection():d,w=v.selectAll(".domain").data([null]),M=v.selectAll(".tick").data(p,e).order(),E=M.exit(),C=M.enter().append("g").attr("class","tick"),D=M.select("line"),T=M.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(C),D=D.merge(C.append("line").attr("stroke","currentColor").attr(c+"2",u*o)),T=T.merge(C.append("text").attr("fill","currentColor").attr(c,u*g).attr("dy",t===wf?"0em":t===ss?"0.71em":"0.32em")),d!==v&&(w=w.transition(d),M=M.transition(d),D=D.transition(d),T=T.transition(d),E=E.transition(d).attr("opacity",pc).attr("transform",function(F){return isFinite(F=_(F))?h(F+s):this.getAttribute("transform")}),C.attr("opacity",pc).attr("transform",function(F){var R=this.parentNode.__axis;return h((R&&isFinite(R=R(F))?R:_(F))+s)})),E.remove(),w.attr("d",t===io||t===vf?a?"M"+u*a+","+b+"H"+s+"V"+x+"H"+u*a:"M"+s+","+b+"V"+x:a?"M"+b+","+u*a+"V"+s+"H"+x+"V"+u*a:"M"+b+","+s+"H"+x),M.attr("opacity",1).attr("transform",function(F){return h(_(F)+s)}),D.attr(c+"2",u*o),T.attr(c,u*g).text(m),v.filter(W2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===vf?"start":t===io?"end":"middle"),v.each(function(){this.__axis=_})}return l.scale=function(d){return arguments.length?(e=d,l):e},l.ticks=function(){return n=Array.from(arguments),l},l.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),l):n.slice()},l.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),l):r&&r.slice()},l.tickFormat=function(d){return arguments.length?(i=d,l):i},l.tickSize=function(d){return arguments.length?(o=a=+d,l):o},l.tickSizeInner=function(d){return arguments.length?(o=+d,l):o},l.tickSizeOuter=function(d){return arguments.length?(a=+d,l):a},l.tickPadding=function(d){return arguments.length?(f=+d,l):f},l.offset=function(d){return arguments.length?(s=+d,l):s},l}function G2(t){return Y2(ss,t)}var V2={value:()=>{}};function ed(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ko(n)}function ko(t){this._=t}function X2(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ko.prototype=ed.prototype={constructor:ko,on:function(t,e){var n=this._,r=X2(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=j2(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=mc(n[i],t.name,e);else if(e==null)for(i in n)n[i]=mc(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ko(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function j2(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function mc(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=V2,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var us="http://www.w3.org/1999/xhtml";const Sr={svg:"http://www.w3.org/2000/svg",xhtml:us,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Na(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Sr.hasOwnProperty(e)?{space:Sr[e],local:t}:t}function Z2(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===us&&e.documentElement.namespaceURI===us?e.createElement(t):e.createElementNS(n,t)}}function K2(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Da(t){var e=Na(t);return(e.local?K2:Z2)(e)}function Q2(){}function nu(t){return t==null?Q2:function(){return this.querySelector(t)}}function J2(t){typeof t!="function"&&(t=nu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,f=r[i]=new Array(a),s,u,c=0;c<a;++c)(s=o[c])&&(u=t.call(s,s.__data__,c,o))&&("__data__"in s&&(u.__data__=s.__data__),f[c]=u);return new Jt(r,this._parents)}function tb(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function eb(){return[]}function nd(t){return t==null?eb:function(){return this.querySelectorAll(t)}}function nb(t){return function(){return tb(t.apply(this,arguments))}}function rb(t){typeof t=="function"?t=nb(t):t=nd(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],f=a.length,s,u=0;u<f;++u)(s=a[u])&&(r.push(t.call(s,s.__data__,u,a)),i.push(s));return new Jt(r,i)}function rd(t){return function(){return this.matches(t)}}function id(t){return function(e){return e.matches(t)}}var ib=Array.prototype.find;function ob(t){return function(){return ib.call(this.children,t)}}function ab(){return this.firstElementChild}function fb(t){return this.select(t==null?ab:ob(typeof t=="function"?t:id(t)))}var sb=Array.prototype.filter;function ub(){return Array.from(this.children)}function cb(t){return function(){return sb.call(this.children,t)}}function lb(t){return this.selectAll(t==null?ub:cb(typeof t=="function"?t:id(t)))}function hb(t){typeof t!="function"&&(t=rd(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,f=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&f.push(s);return new Jt(r,this._parents)}function od(t){return new Array(t.length)}function db(){return new Jt(this._enter||this._groups.map(od),this._parents)}function zo(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}zo.prototype={constructor:zo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function pb(t){return function(){return t}}function mb(t,e,n,r,i,o){for(var a=0,f,s=e.length,u=o.length;a<u;++a)(f=e[a])?(f.__data__=o[a],r[a]=f):n[a]=new zo(t,o[a]);for(;a<s;++a)(f=e[a])&&(i[a]=f)}function gb(t,e,n,r,i,o,a){var f,s,u=new Map,c=e.length,h=o.length,l=new Array(c),d;for(f=0;f<c;++f)(s=e[f])&&(l[f]=d=a.call(s,s.__data__,f,e)+"",u.has(d)?i[f]=s:u.set(d,s));for(f=0;f<h;++f)d=a.call(t,o[f],f,o)+"",(s=u.get(d))?(r[f]=s,s.__data__=o[f],u.delete(d)):n[f]=new zo(t,o[f]);for(f=0;f<c;++f)(s=e[f])&&u.get(l[f])===s&&(i[f]=s)}function bb(t){return t.__data__}function yb(t,e){if(!arguments.length)return Array.from(this,bb);var n=e?gb:mb,r=this._parents,i=this._groups;typeof t!="function"&&(t=pb(t));for(var o=i.length,a=new Array(o),f=new Array(o),s=new Array(o),u=0;u<o;++u){var c=r[u],h=i[u],l=h.length,d=_b(t.call(c,c&&c.__data__,u,r)),p=d.length,m=f[u]=new Array(p),g=a[u]=new Array(p),y=s[u]=new Array(l);n(c,h,m,g,y,d,e);for(var b=0,x=0,_,v;b<p;++b)if(_=m[b]){for(b>=x&&(x=b+1);!(v=g[x])&&++x<p;);_._next=v||null}}return a=new Jt(a,r),a._enter=f,a._exit=s,a}function _b(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function wb(){return new Jt(this._exit||this._groups.map(od),this._parents)}function vb(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function xb(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),f=new Array(i),s=0;s<a;++s)for(var u=n[s],c=r[s],h=u.length,l=f[s]=new Array(h),d,p=0;p<h;++p)(d=u[p]||c[p])&&(l[p]=d);for(;s<i;++s)f[s]=n[s];return new Jt(f,this._parents)}function Mb(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function $b(t){t||(t=Sb);function e(h,l){return h&&l?t(h.__data__,l.__data__):!h-!l}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],f=a.length,s=i[o]=new Array(f),u,c=0;c<f;++c)(u=a[c])&&(s[c]=u);s.sort(e)}return new Jt(i,this._parents).order()}function Sb(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Tb(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function kb(){return Array.from(this)}function Eb(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Cb(){let t=0;for(const e of this)++t;return t}function Ab(){return!this.node()}function Nb(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,f;o<a;++o)(f=i[o])&&t.call(f,f.__data__,o,i);return this}function Db(t){return function(){this.removeAttribute(t)}}function Lb(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fb(t,e){return function(){this.setAttribute(t,e)}}function Rb(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ib(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Pb(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ob(t,e){var n=Na(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Lb:Db:typeof e=="function"?n.local?Pb:Ib:n.local?Rb:Fb)(n,e))}function ad(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ub(t){return function(){this.style.removeProperty(t)}}function Bb(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zb(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function qb(t,e,n){return arguments.length>1?this.each((e==null?Ub:typeof e=="function"?zb:Bb)(t,e,n??"")):Tr(this.node(),t)}function Tr(t,e){return t.style.getPropertyValue(e)||ad(t).getComputedStyle(t,null).getPropertyValue(e)}function Hb(t){return function(){delete this[t]}}function Wb(t,e){return function(){this[t]=e}}function Yb(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Gb(t,e){return arguments.length>1?this.each((e==null?Hb:typeof e=="function"?Yb:Wb)(t,e)):this.node()[t]}function fd(t){return t.trim().split(/^|\s+/)}function ru(t){return t.classList||new sd(t)}function sd(t){this._node=t,this._names=fd(t.getAttribute("class")||"")}sd.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ud(t,e){for(var n=ru(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function cd(t,e){for(var n=ru(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Vb(t){return function(){ud(this,t)}}function Xb(t){return function(){cd(this,t)}}function jb(t,e){return function(){(e.apply(this,arguments)?ud:cd)(this,t)}}function Zb(t,e){var n=fd(t+"");if(arguments.length<2){for(var r=ru(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?jb:e?Vb:Xb)(n,e))}function Kb(){this.textContent=""}function Qb(t){return function(){this.textContent=t}}function Jb(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ty(t){return arguments.length?this.each(t==null?Kb:(typeof t=="function"?Jb:Qb)(t)):this.node().textContent}function ey(){this.innerHTML=""}function ny(t){return function(){this.innerHTML=t}}function ry(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function iy(t){return arguments.length?this.each(t==null?ey:(typeof t=="function"?ry:ny)(t)):this.node().innerHTML}function oy(){this.nextSibling&&this.parentNode.appendChild(this)}function ay(){return this.each(oy)}function fy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sy(){return this.each(fy)}function uy(t){var e=typeof t=="function"?t:Da(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cy(){return null}function ly(t,e){var n=typeof t=="function"?t:Da(t),r=e==null?cy:typeof e=="function"?e:nu(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function hy(){var t=this.parentNode;t&&t.removeChild(this)}function dy(){return this.each(hy)}function py(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function my(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gy(t){return this.select(t?my:py)}function by(t){return arguments.length?this.property("__data__",t):this.node().__data__}function yy(t){return function(e){t.call(this,e,this.__data__)}}function _y(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function wy(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function vy(t,e,n){return function(){var r=this.__on,i,o=yy(e);if(r){for(var a=0,f=r.length;a<f;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function xy(t,e,n){var r=_y(t+""),i,o=r.length,a;if(arguments.length<2){var f=this.node().__on;if(f){for(var s=0,u=f.length,c;s<u;++s)for(i=0,c=f[s];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(f=e?vy:wy,i=0;i<o;++i)this.each(f(r[i],e,n));return this}function ld(t,e,n){var r=ad(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function My(t,e){return function(){return ld(this,t,e)}}function $y(t,e){return function(){return ld(this,t,e.apply(this,arguments))}}function Sy(t,e){return this.each((typeof e=="function"?$y:My)(t,e))}function*Ty(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var hd=[null];function Jt(t,e){this._groups=t,this._parents=e}function Fi(){return new Jt([[document.documentElement]],hd)}function ky(){return this}Jt.prototype=Fi.prototype={constructor:Jt,select:J2,selectAll:rb,selectChild:fb,selectChildren:lb,filter:hb,data:yb,enter:db,exit:wb,join:vb,merge:xb,selection:ky,order:Mb,sort:$b,call:Tb,nodes:kb,node:Eb,size:Cb,empty:Ab,each:Nb,attr:Ob,style:qb,property:Gb,classed:Zb,text:ty,html:iy,raise:ay,lower:sy,append:uy,insert:ly,remove:dy,clone:gy,datum:by,on:xy,dispatch:Sy,[Symbol.iterator]:Ty};function hi(t){return typeof t=="string"?new Jt([[document.querySelector(t)]],[document.documentElement]):new Jt([[t]],hd)}function Ey(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Cy(t,e){if(t=Ey(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function qr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ri(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xn(){}var Wn=.7,kr=1/Wn,wr="\\s*([+-]?\\d+)\\s*",wi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ay=/^#([0-9a-f]{3,8})$/,Ny=new RegExp(`^rgb\\(${wr},${wr},${wr}\\)$`),Dy=new RegExp(`^rgb\\(${Fe},${Fe},${Fe}\\)$`),Ly=new RegExp(`^rgba\\(${wr},${wr},${wr},${wi}\\)$`),Fy=new RegExp(`^rgba\\(${Fe},${Fe},${Fe},${wi}\\)$`),Ry=new RegExp(`^hsl\\(${wi},${Fe},${Fe}\\)$`),Iy=new RegExp(`^hsla\\(${wi},${Fe},${Fe},${wi}\\)$`),gc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qr(xn,Yn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bc,formatHex:bc,formatHex8:Py,formatHsl:Oy,formatRgb:yc,toString:yc});function bc(){return this.rgb().formatHex()}function Py(){return this.rgb().formatHex8()}function Oy(){return dd(this).formatHsl()}function yc(){return this.rgb().formatRgb()}function Yn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ay.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?_c(e):n===3?new Ft(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?oo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?oo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ny.exec(t))?new Ft(e[1],e[2],e[3],1):(e=Dy.exec(t))?new Ft(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ly.exec(t))?oo(e[1],e[2],e[3],e[4]):(e=Fy.exec(t))?oo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ry.exec(t))?xc(e[1],e[2]/100,e[3]/100,1):(e=Iy.exec(t))?xc(e[1],e[2]/100,e[3]/100,e[4]):gc.hasOwnProperty(t)?_c(gc[t]):t==="transparent"?new Ft(NaN,NaN,NaN,0):null}function _c(t){return new Ft(t>>16&255,t>>8&255,t&255,1)}function oo(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ft(t,e,n,r)}function iu(t){return t instanceof xn||(t=Yn(t)),t?(t=t.rgb(),new Ft(t.r,t.g,t.b,t.opacity)):new Ft}function _n(t,e,n,r){return arguments.length===1?iu(t):new Ft(t,e,n,r??1)}function Ft(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}qr(Ft,_n,Ri(xn,{brighter(t){return t=t==null?kr:Math.pow(kr,t),new Ft(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wn:Math.pow(Wn,t),new Ft(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ft(On(this.r),On(this.g),On(this.b),qo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wc,formatHex:wc,formatHex8:Uy,formatRgb:vc,toString:vc}));function wc(){return`#${Fn(this.r)}${Fn(this.g)}${Fn(this.b)}`}function Uy(){return`#${Fn(this.r)}${Fn(this.g)}${Fn(this.b)}${Fn((isNaN(this.opacity)?1:this.opacity)*255)}`}function vc(){const t=qo(this.opacity);return`${t===1?"rgb(":"rgba("}${On(this.r)}, ${On(this.g)}, ${On(this.b)}${t===1?")":`, ${t})`}`}function qo(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function On(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Fn(t){return t=On(t),(t<16?"0":"")+t.toString(16)}function xc(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new be(t,e,n,r)}function dd(t){if(t instanceof be)return new be(t.h,t.s,t.l,t.opacity);if(t instanceof xn||(t=Yn(t)),!t)return new be;if(t instanceof be)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,f=o-i,s=(o+i)/2;return f?(e===o?a=(n-r)/f+(n<r)*6:n===o?a=(r-e)/f+2:a=(e-n)/f+4,f/=s<.5?o+i:2-o-i,a*=60):f=s>0&&s<1?0:a,new be(a,f,s,t.opacity)}function cs(t,e,n,r){return arguments.length===1?dd(t):new be(t,e,n,r??1)}function be(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}qr(be,cs,Ri(xn,{brighter(t){return t=t==null?kr:Math.pow(kr,t),new be(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wn:Math.pow(Wn,t),new be(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ft(xf(t>=240?t-240:t+120,i,r),xf(t,i,r),xf(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new be(Mc(this.h),ao(this.s),ao(this.l),qo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qo(this.opacity);return`${t===1?"hsl(":"hsla("}${Mc(this.h)}, ${ao(this.s)*100}%, ${ao(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Mc(t){return t=(t||0)%360,t<0?t+360:t}function ao(t){return Math.max(0,Math.min(1,t||0))}function xf(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const pd=Math.PI/180,md=180/Math.PI,Ho=18,gd=.96422,bd=1,yd=.82521,_d=4/29,vr=6/29,wd=3*vr*vr,By=vr*vr*vr;function vd(t){if(t instanceof Re)return new Re(t.l,t.a,t.b,t.opacity);if(t instanceof Ve)return xd(t);t instanceof Ft||(t=iu(t));var e=Tf(t.r),n=Tf(t.g),r=Tf(t.b),i=Mf((.2225045*e+.7168786*n+.0606169*r)/bd),o,a;return e===n&&n===r?o=a=i:(o=Mf((.4360747*e+.3850649*n+.1430804*r)/gd),a=Mf((.0139322*e+.0971045*n+.7141733*r)/yd)),new Re(116*i-16,500*(o-i),200*(i-a),t.opacity)}function ls(t,e,n,r){return arguments.length===1?vd(t):new Re(t,e,n,r??1)}function Re(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}qr(Re,ls,Ri(xn,{brighter(t){return new Re(this.l+Ho*(t??1),this.a,this.b,this.opacity)},darker(t){return new Re(this.l-Ho*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=gd*$f(e),t=bd*$f(t),n=yd*$f(n),new Ft(Sf(3.1338561*e-1.6168667*t-.4906146*n),Sf(-.9787684*e+1.9161415*t+.033454*n),Sf(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Mf(t){return t>By?Math.pow(t,1/3):t/wd+_d}function $f(t){return t>vr?t*t*t:wd*(t-_d)}function Sf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Tf(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zy(t){if(t instanceof Ve)return new Ve(t.h,t.c,t.l,t.opacity);if(t instanceof Re||(t=vd(t)),t.a===0&&t.b===0)return new Ve(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*md;return new Ve(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function hs(t,e,n,r){return arguments.length===1?zy(t):new Ve(t,e,n,r??1)}function Ve(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function xd(t){if(isNaN(t.h))return new Re(t.l,0,0,t.opacity);var e=t.h*pd;return new Re(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}qr(Ve,hs,Ri(xn,{brighter(t){return new Ve(this.h,this.c,this.l+Ho*(t??1),this.opacity)},darker(t){return new Ve(this.h,this.c,this.l-Ho*(t??1),this.opacity)},rgb(){return xd(this).rgb()}}));var Md=-.14861,ou=1.78277,au=-.29227,La=-.90649,vi=1.97294,$c=vi*La,Sc=vi*ou,Tc=ou*au-La*Md;function qy(t){if(t instanceof Un)return new Un(t.h,t.s,t.l,t.opacity);t instanceof Ft||(t=iu(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Tc*r+$c*e-Sc*n)/(Tc+$c-Sc),o=r-i,a=(vi*(n-i)-au*o)/La,f=Math.sqrt(a*a+o*o)/(vi*i*(1-i)),s=f?Math.atan2(a,o)*md-120:NaN;return new Un(s<0?s+360:s,f,i,t.opacity)}function Pe(t,e,n,r){return arguments.length===1?qy(t):new Un(t,e,n,r??1)}function Un(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}qr(Un,Pe,Ri(xn,{brighter(t){return t=t==null?kr:Math.pow(kr,t),new Un(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wn:Math.pow(Wn,t),new Un(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*pd,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ft(255*(e+n*(Md*r+ou*i)),255*(e+n*(au*r+La*i)),255*(e+n*(vi*r)),this.opacity)}}));function Hy(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function Wy(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,f=r<e-1?t[r+2]:2*o-i;return Hy((n-r/e)*e,a,i,o,f)}}const Fa=t=>()=>t;function $d(t,e){return function(n){return t+n*e}}function Yy(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function fu(t,e){var n=e-t;return n?$d(t,n>180||n<-180?n-360*Math.round(n/360):n):Fa(isNaN(t)?e:t)}function Gy(t){return(t=+t)==1?Bt:function(e,n){return n-e?Yy(e,n,t):Fa(isNaN(e)?n:e)}}function Bt(t,e){var n=e-t;return n?$d(t,n):Fa(isNaN(t)?e:t)}const Gn=function t(e){var n=Gy(e);function r(i,o){var a=n((i=_n(i)).r,(o=_n(o)).r),f=n(i.g,o.g),s=n(i.b,o.b),u=Bt(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=f(c),i.b=s(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function Vy(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a,f;for(a=0;a<n;++a)f=_n(e[a]),r[a]=f.r||0,i[a]=f.g||0,o[a]=f.b||0;return r=t(r),i=t(i),o=t(o),f.opacity=1,function(s){return f.r=r(s),f.g=i(s),f.b=o(s),f+""}}}var Xy=Vy(Wy);function jy(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Zy(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ky(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Ii(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(f){for(a=0;a<r;++a)o[a]=i[a](f);return o}}function Qy(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ut(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Jy(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ii(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var ds=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kf=new RegExp(ds.source,"g");function t_(t){return function(){return t}}function e_(t){return function(e){return t(e)+""}}function Sd(t,e){var n=ds.lastIndex=kf.lastIndex=0,r,i,o,a=-1,f=[],s=[];for(t=t+"",e=e+"";(r=ds.exec(t))&&(i=kf.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),f[a]?f[a]+=o:f[++a]=o),(r=r[0])===(i=i[0])?f[a]?f[a]+=i:f[++a]=i:(f[++a]=null,s.push({i:a,x:Ut(r,i)})),n=kf.lastIndex;return n<e.length&&(o=e.slice(n),f[a]?f[a]+=o:f[++a]=o),f.length<2?s[0]?e_(s[0].x):t_(e):(e=s.length,function(u){for(var c=0,h;c<e;++c)f[(h=s[c]).i]=h.x(u);return f.join("")})}function Ii(t,e){var n=typeof e,r;return e==null||n==="boolean"?Fa(e):(n==="number"?Ut:n==="string"?(r=Yn(e))?(e=r,Gn):Sd:e instanceof Yn?Gn:e instanceof Date?Qy:Zy(e)?jy:Array.isArray(e)?Ky:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Jy:Ut)(t,e)}function su(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var kc=180/Math.PI,ps={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Td(t,e,n,r,i,o){var a,f,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(f=Math.sqrt(n*n+r*r))&&(n/=f,r/=f,s/=f),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*kc,skewX:Math.atan(s)*kc,scaleX:a,scaleY:f}}var fo;function n_(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ps:Td(e.a,e.b,e.c,e.d,e.e,e.f)}function r_(t){return t==null||(fo||(fo=document.createElementNS("http://www.w3.org/2000/svg","g")),fo.setAttribute("transform",t),!(t=fo.transform.baseVal.consolidate()))?ps:(t=t.matrix,Td(t.a,t.b,t.c,t.d,t.e,t.f))}function kd(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,h,l,d,p){if(u!==h||c!==l){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:Ut(u,h)},{i:m-2,x:Ut(c,l)})}else(h||l)&&d.push("translate("+h+e+l+n)}function a(u,c,h,l){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),l.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Ut(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function f(u,c,h,l){u!==c?l.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Ut(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function s(u,c,h,l,d,p){if(u!==h||c!==l){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Ut(u,h)},{i:m-2,x:Ut(c,l)})}else(h!==1||l!==1)&&d.push(i(d)+"scale("+h+","+l+")")}return function(u,c){var h=[],l=[];return u=t(u),c=t(c),o(u.translateX,u.translateY,c.translateX,c.translateY,h,l),a(u.rotate,c.rotate,h,l),f(u.skewX,c.skewX,h,l),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,l),u=c=null,function(d){for(var p=-1,m=l.length,g;++p<m;)h[(g=l[p]).i]=g.x(d);return h.join("")}}}var i_=kd(n_,"px, ","px)","deg)"),o_=kd(r_,", ",")",")");function a_(t){return function(e,n){var r=t((e=cs(e)).h,(n=cs(n)).h),i=Bt(e.s,n.s),o=Bt(e.l,n.l),a=Bt(e.opacity,n.opacity);return function(f){return e.h=r(f),e.s=i(f),e.l=o(f),e.opacity=a(f),e+""}}}const f_=a_(fu);function s_(t,e){var n=Bt((t=ls(t)).l,(e=ls(e)).l),r=Bt(t.a,e.a),i=Bt(t.b,e.b),o=Bt(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=r(a),t.b=i(a),t.opacity=o(a),t+""}}function u_(t){return function(e,n){var r=t((e=hs(e)).h,(n=hs(n)).h),i=Bt(e.c,n.c),o=Bt(e.l,n.l),a=Bt(e.opacity,n.opacity);return function(f){return e.h=r(f),e.c=i(f),e.l=o(f),e.opacity=a(f),e+""}}}const c_=u_(fu);function Ed(t){return function e(n){n=+n;function r(i,o){var a=t((i=Pe(i)).h,(o=Pe(o)).h),f=Bt(i.s,o.s),s=Bt(i.l,o.l),u=Bt(i.opacity,o.opacity);return function(c){return i.h=a(c),i.s=f(c),i.l=s(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=e,r}(1)}Ed(fu);var uu=Ed(Bt);function Ra(t,e){e===void 0&&(e=t,t=Ii);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var f=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[f](a-f)}}function _e(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var Er=0,ri=0,Kr=0,Cd=1e3,Wo,ii,Yo=0,Vn=0,Ia=0,xi=typeof performance=="object"&&performance.now?performance:Date,Ad=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function cu(){return Vn||(Ad(l_),Vn=xi.now()+Ia)}function l_(){Vn=0}function Go(){this._call=this._time=this._next=null}Go.prototype=Nd.prototype={constructor:Go,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?cu():+n)+(e==null?0:+e),!this._next&&ii!==this&&(ii?ii._next=this:Wo=this,ii=this),this._call=t,this._time=n,ms()},stop:function(){this._call&&(this._call=null,this._time=1/0,ms())}};function Nd(t,e,n){var r=new Go;return r.restart(t,e,n),r}function h_(){cu(),++Er;for(var t=Wo,e;t;)(e=Vn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Er}function Ec(){Vn=(Yo=xi.now())+Ia,Er=ri=0;try{h_()}finally{Er=0,p_(),Vn=0}}function d_(){var t=xi.now(),e=t-Yo;e>Cd&&(Ia-=e,Yo=t)}function p_(){for(var t,e=Wo,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Wo=n);ii=t,ms(r)}function ms(t){if(!Er){ri&&(ri=clearTimeout(ri));var e=t-Vn;e>24?(t<1/0&&(ri=setTimeout(Ec,t-xi.now()-Ia)),Kr&&(Kr=clearInterval(Kr))):(Kr||(Yo=xi.now(),Kr=setInterval(d_,Cd)),Er=1,Ad(Ec))}}function Cc(t,e,n){var r=new Go;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var m_=ed("start","end","cancel","interrupt"),g_=[],Dd=0,Ac=1,gs=2,Eo=3,Nc=4,bs=5,Co=6;function Pa(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;b_(t,n,{name:e,index:r,group:i,on:m_,tween:g_,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Dd})}function lu(t,e){var n=Me(t,e);if(n.state>Dd)throw new Error("too late; already scheduled");return n}function Oe(t,e){var n=Me(t,e);if(n.state>Eo)throw new Error("too late; already running");return n}function Me(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function b_(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Nd(o,0,n.time);function o(u){n.state=Ac,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,h,l,d;if(n.state!==Ac)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Eo)return Cc(a);d.state===Nc?(d.state=Co,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Co,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(Cc(function(){n.state===Eo&&(n.state=Nc,n.timer.restart(f,n.delay,n.time),f(u))}),n.state=gs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===gs){for(n.state=Eo,i=new Array(l=n.tween.length),c=0,h=-1;c<l;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function f(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=bs,1),h=-1,l=i.length;++h<l;)i[h].call(t,c);n.state===bs&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=Co,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function y_(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>gs&&r.state<bs,r.state=Co,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function __(t){return this.each(function(){y_(this,t)})}function w_(t,e){var n,r;return function(){var i=Oe(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,f=r.length;a<f;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function v_(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Oe(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var f={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=f;break}s===u&&i.push(f)}o.tween=i}}function x_(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Me(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?w_:v_)(n,t,e))}function hu(t,e,n){var r=t._id;return t.each(function(){var i=Oe(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Me(i,r).value[e]}}function Ld(t,e){var n;return(typeof e=="number"?Ut:e instanceof Yn?Gn:(n=Yn(e))?(e=n,Gn):Sd)(t,e)}function M_(t){return function(){this.removeAttribute(t)}}function $_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function S_(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function T_(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function k_(t,e,n){var r,i,o;return function(){var a,f=n(this),s;return f==null?void this.removeAttribute(t):(a=this.getAttribute(t),s=f+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,f)))}}function E_(t,e,n){var r,i,o;return function(){var a,f=n(this),s;return f==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),s=f+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,f)))}}function C_(t,e){var n=Na(t),r=n==="transform"?o_:Ld;return this.attrTween(t,typeof e=="function"?(n.local?E_:k_)(n,r,hu(this,"attr."+t,e)):e==null?(n.local?$_:M_)(n):(n.local?T_:S_)(n,r,e))}function A_(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function N_(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function D_(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&N_(t,o)),n}return i._value=e,i}function L_(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&A_(t,o)),n}return i._value=e,i}function F_(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Na(t);return this.tween(n,(r.local?D_:L_)(r,e))}function R_(t,e){return function(){lu(this,t).delay=+e.apply(this,arguments)}}function I_(t,e){return e=+e,function(){lu(this,t).delay=e}}function P_(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?R_:I_)(e,t)):Me(this.node(),e).delay}function O_(t,e){return function(){Oe(this,t).duration=+e.apply(this,arguments)}}function U_(t,e){return e=+e,function(){Oe(this,t).duration=e}}function B_(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?O_:U_)(e,t)):Me(this.node(),e).duration}function z_(t,e){if(typeof e!="function")throw new Error;return function(){Oe(this,t).ease=e}}function q_(t){var e=this._id;return arguments.length?this.each(z_(e,t)):Me(this.node(),e).ease}function H_(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Oe(this,t).ease=n}}function W_(t){if(typeof t!="function")throw new Error;return this.each(H_(this._id,t))}function Y_(t){typeof t!="function"&&(t=rd(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,f=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&f.push(s);return new Ke(r,this._parents,this._name,this._id)}function G_(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),f=0;f<o;++f)for(var s=e[f],u=n[f],c=s.length,h=a[f]=new Array(c),l,d=0;d<c;++d)(l=s[d]||u[d])&&(h[d]=l);for(;f<r;++f)a[f]=e[f];return new Ke(a,this._parents,this._name,this._id)}function V_(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function X_(t,e,n){var r,i,o=V_(e)?lu:Oe;return function(){var a=o(this,t),f=a.on;f!==r&&(i=(r=f).copy()).on(e,n),a.on=i}}function j_(t,e){var n=this._id;return arguments.length<2?Me(this.node(),n).on.on(t):this.each(X_(n,t,e))}function Z_(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function K_(){return this.on("end.remove",Z_(this._id))}function Q_(t){var e=this._name,n=this._id;typeof t!="function"&&(t=nu(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var f=r[a],s=f.length,u=o[a]=new Array(s),c,h,l=0;l<s;++l)(c=f[l])&&(h=t.call(c,c.__data__,l,f))&&("__data__"in c&&(h.__data__=c.__data__),u[l]=h,Pa(u[l],e,n,l,u,Me(c,n)));return new Ke(o,this._parents,e,n)}function J_(t){var e=this._name,n=this._id;typeof t!="function"&&(t=nd(t));for(var r=this._groups,i=r.length,o=[],a=[],f=0;f<i;++f)for(var s=r[f],u=s.length,c,h=0;h<u;++h)if(c=s[h]){for(var l=t.call(c,c.__data__,h,s),d,p=Me(c,n),m=0,g=l.length;m<g;++m)(d=l[m])&&Pa(d,e,n,m,l,p);o.push(l),a.push(c)}return new Ke(o,a,e,n)}var tw=Fi.prototype.constructor;function ew(){return new tw(this._groups,this._parents)}function nw(t,e){var n,r,i;return function(){var o=Tr(this,t),a=(this.style.removeProperty(t),Tr(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Fd(t){return function(){this.style.removeProperty(t)}}function rw(t,e,n){var r,i=n+"",o;return function(){var a=Tr(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function iw(t,e,n){var r,i,o;return function(){var a=Tr(this,t),f=n(this),s=f+"";return f==null&&(s=f=(this.style.removeProperty(t),Tr(this,t))),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,f))}}function ow(t,e){var n,r,i,o="style."+e,a="end."+o,f;return function(){var s=Oe(this,t),u=s.on,c=s.value[o]==null?f||(f=Fd(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(a,i=c),s.on=r}}function aw(t,e,n){var r=(t+="")=="transform"?i_:Ld;return e==null?this.styleTween(t,nw(t,r)).on("end.style."+t,Fd(t)):typeof e=="function"?this.styleTween(t,iw(t,r,hu(this,"style."+t,e))).each(ow(this._id,t)):this.styleTween(t,rw(t,r,e),n).on("end.style."+t,null)}function fw(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function sw(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&fw(t,a,n)),r}return o._value=e,o}function uw(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,sw(t,e,n??""))}function cw(t){return function(){this.textContent=t}}function lw(t){return function(){var e=t(this);this.textContent=e??""}}function hw(t){return this.tween("text",typeof t=="function"?lw(hu(this,"text",t)):cw(t==null?"":t+""))}function dw(t){return function(e){this.textContent=t.call(this,e)}}function pw(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&dw(i)),e}return r._value=t,r}function mw(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,pw(t))}function gw(){for(var t=this._name,e=this._id,n=Rd(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,s,u=0;u<f;++u)if(s=a[u]){var c=Me(s,e);Pa(s,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ke(r,this._parents,t,n)}function bw(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var f={value:a},s={value:function(){--i===0&&o()}};n.each(function(){var u=Oe(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(s)),u.on=e}),i===0&&o()})}var yw=0;function Ke(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Rd(){return++yw}var Be=Fi.prototype;Ke.prototype={constructor:Ke,select:Q_,selectAll:J_,selectChild:Be.selectChild,selectChildren:Be.selectChildren,filter:Y_,merge:G_,selection:ew,transition:gw,call:Be.call,nodes:Be.nodes,node:Be.node,size:Be.size,empty:Be.empty,each:Be.each,on:j_,attr:C_,attrTween:F_,style:aw,styleTween:uw,text:hw,textTween:mw,remove:K_,tween:x_,delay:P_,duration:B_,ease:q_,easeVarying:W_,end:bw,[Symbol.iterator]:Be[Symbol.iterator]};function _w(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ww={time:null,delay:0,duration:250,ease:_w};function vw(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function xw(t){var e,n;t instanceof Ke?(e=t._id,t=t._name):(e=Rd(),(n=ww).time=cu(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,s,u=0;u<f;++u)(s=a[u])&&Pa(s,t,e,u,a,n||vw(s,e));return new Ke(r,this._parents,t,e)}Fi.prototype.interrupt=__;Fi.prototype.transition=xw;const ys=Math.PI,_s=2*ys,Nn=1e-6,Mw=_s-Nn;function Id(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $w(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Id;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Pd{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Id:$w(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,f=this._y1,s=r-e,u=i-n,c=a-e,h=f-n,l=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(l>Nn)if(!(Math.abs(h*s-u*c)>Nn)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,p=i-f,m=s*s+u*u,g=d*d+p*p,y=Math.sqrt(m),b=Math.sqrt(l),x=o*Math.tan((ys-Math.acos((m+l-g)/(2*y*b)))/2),_=x/b,v=x/y;Math.abs(_-1)>Nn&&this._append`L${e+_*c},${n+_*h}`,this._append`A${o},${o},0,0,${+(h*d>c*p)},${this._x1=e+v*s},${this._y1=n+v*u}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),s=r*Math.sin(i),u=e+f,c=n+s,h=1^a,l=a?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Nn||Math.abs(this._y1-c)>Nn)&&this._append`L${u},${c}`,r&&(l<0&&(l=l%_s+_s),l>Mw?this._append`A${r},${r},0,1,${h},${e-f},${n-s}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:l>Nn&&this._append`A${r},${r},0,${+(l>=ys)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function mn(t=3){return new Pd(+t)}function Sw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vo(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Cr(t){return t=Vo(Math.abs(t)),t?t[1]:NaN}function Tw(t,e){return function(n,r){for(var i=n.length,o=[],a=0,f=t[0],s=0;i>0&&f>0&&(s+f+1>r&&(f=Math.max(1,r-s)),o.push(n.substring(i-=f,i+f)),!((s+=f+1)>r));)f=t[a=(a+1)%t.length];return o.reverse().join(e)}}function kw(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ew=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mi(t){if(!(e=Ew.exec(t)))throw new Error("invalid format: "+t);var e;return new du({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Mi.prototype=du.prototype;function du(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}du.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cw(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Od;function Aw(t,e){var n=Vo(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Od=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Vo(t,Math.max(0,e+o-1))[0]}function Dc(t,e){var n=Vo(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Lc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Sw,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Dc(t*100,e),r:Dc,s:Aw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Fc(t){return t}var Rc=Array.prototype.map,Ic=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Nw(t){var e=t.grouping===void 0||t.thousands===void 0?Fc:Tw(Rc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Fc:kw(Rc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"−":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Mi(h);var l=h.fill,d=h.align,p=h.sign,m=h.symbol,g=h.zero,y=h.width,b=h.comma,x=h.precision,_=h.trim,v=h.type;v==="n"?(b=!0,v="g"):Lc[v]||(x===void 0&&(x=12),_=!0,v="g"),(g||l==="0"&&d==="=")&&(g=!0,l="0",d="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",M=m==="$"?r:/[%p]/.test(v)?a:"",E=Lc[v],C=/[defgprs%]/.test(v);x=x===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function D(T){var F=w,R=M,q,S,U;if(v==="c")R=E(T)+R,T="";else{T=+T;var P=T<0||1/T<0;if(T=isNaN(T)?s:E(Math.abs(T),x),_&&(T=Cw(T)),P&&+T==0&&p!=="+"&&(P=!1),F=(P?p==="("?p:f:p==="-"||p==="("?"":p)+F,R=(v==="s"?Ic[8+Od/3]:"")+R+(P&&p==="("?")":""),C){for(q=-1,S=T.length;++q<S;)if(U=T.charCodeAt(q),48>U||U>57){R=(U===46?i+T.slice(q+1):T.slice(q))+R,T=T.slice(0,q);break}}}b&&!g&&(T=e(T,1/0));var Y=F.length+T.length+R.length,V=Y<y?new Array(y-Y+1).join(l):"";switch(b&&g&&(T=e(V+T,V.length?y-R.length:1/0),V=""),d){case"<":T=F+T+R+V;break;case"=":T=F+V+T+R;break;case"^":T=V.slice(0,Y=V.length>>1)+F+T+R+V.slice(Y);break;default:T=V+F+T+R;break}return o(T)}return D.toString=function(){return h+""},D}function c(h,l){var d=u((h=Mi(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Cr(l)/3)))*3,m=Math.pow(10,-p),g=Ic[8+p/3];return function(y){return d(m*y)+g}}return{format:u,formatPrefix:c}}var so,Hr,Ud;Dw({thousands:",",grouping:[3],currency:["$",""]});function Dw(t){return so=Nw(t),Hr=so.format,Ud=so.formatPrefix,so}function Lw(t){return Math.max(0,-Cr(Math.abs(t)))}function Fw(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cr(e)/3)))*3-Cr(Math.abs(t)))}function Rw(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Cr(e)-Cr(t))+1}var ot=1e-6,Bd=1e-12,lt=Math.PI,Et=lt/2,Pc=lt/4,te=lt*2,Ht=180/lt,Tt=lt/180,yt=Math.abs,Wr=Math.atan,Qe=Math.atan2,ct=Math.cos,zd=Math.exp,Xo=Math.log,Ef=Math.pow,rt=Math.sin,ue=Math.sign||function(t){return t>0?1:t<0?-1:0},jt=Math.sqrt,pu=Math.tan;function qd(t){return t>1?0:t<-1?lt:Math.acos(t)}function pe(t){return t>1?Et:t<-1?-Et:Math.asin(t)}function ce(){}function jo(t,e){t&&Uc.hasOwnProperty(t.type)&&Uc[t.type](t,e)}var Oc={Feature:function(t,e){jo(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)jo(n[r].geometry,e)}},Uc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ws(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ws(n[r],e,0)},Polygon:function(t,e){Bc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Bc(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)jo(n[r],e)}};function ws(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function Bc(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ws(t[n],e,1);e.polygonEnd()}function Dn(t,e){t&&Oc.hasOwnProperty(t.type)?Oc[t.type](t,e):jo(t,e)}function vs(t){return[Qe(t[1],t[0]),pe(t[2])]}function Ar(t){var e=t[0],n=t[1],r=ct(n);return[r*ct(e),r*rt(e),rt(n)]}function uo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Zo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Cf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function co(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xs(t){var e=jt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ms(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function $s(t,e){return yt(t)>lt&&(t-=Math.round(t/te)*te),[t,e]}$s.invert=$s;function Hd(t,e,n){return(t%=te)?e||n?Ms(qc(t),Hc(e,n)):qc(t):e||n?Hc(e,n):$s}function zc(t){return function(e,n){return e+=t,yt(e)>lt&&(e-=Math.round(e/te)*te),[e,n]}}function qc(t){var e=zc(t);return e.invert=zc(-t),e}function Hc(t,e){var n=ct(t),r=rt(t),i=ct(e),o=rt(e);function a(f,s){var u=ct(s),c=ct(f)*u,h=rt(f)*u,l=rt(s),d=l*n+c*r;return[Qe(h*i-d*o,c*n-l*r),pe(d*i+h*o)]}return a.invert=function(f,s){var u=ct(s),c=ct(f)*u,h=rt(f)*u,l=rt(s),d=l*i-h*o;return[Qe(h*i+l*o,c*n+d*r),pe(d*n-c*r)]},a}function Iw(t){t=Hd(t[0]*Tt,t[1]*Tt,t.length>2?t[2]*Tt:0);function e(n){return n=t(n[0]*Tt,n[1]*Tt),n[0]*=Ht,n[1]*=Ht,n}return e.invert=function(n){return n=t.invert(n[0]*Tt,n[1]*Tt),n[0]*=Ht,n[1]*=Ht,n},e}function Pw(t,e,n,r,i,o){if(n){var a=ct(e),f=rt(e),s=r*n;i==null?(i=e+r*te,o=e-s/2):(i=Wc(a,i),o=Wc(a,o),(r>0?i<o:i>o)&&(i+=r*te));for(var u,c=i;r>0?c>o:c<o;c-=s)u=vs([a,-f*ct(c),-f*rt(c)]),t.point(u[0],u[1])}}function Wc(t,e){e=Ar(e),e[0]-=t,xs(e);var n=qd(-e[1]);return((-e[2]<0?-n:n)+te-ot)%te}function Wd(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:ce,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Ao(t,e){return yt(t[0]-e[0])<ot&&yt(t[1]-e[1])<ot}function lo(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Yd(t,e,n,r,i){var o=[],a=[],f,s;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],b;if(Ao(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),f=0;f<m;++f)i.point((g=p[f])[0],g[1]);i.lineEnd();return}y[0]+=2*ot}o.push(b=new lo(g,p,null,!0)),a.push(b.o=new lo(g,null,b,!1)),o.push(b=new lo(y,p,null,!1)),a.push(b.o=new lo(y,null,b,!0))}}),!!o.length){for(a.sort(e),Yc(o),Yc(a),f=0,s=a.length;f<s;++f)a[f].e=n=!n;for(var u=o[0],c,h;;){for(var l=u,d=!0;l.v;)if((l=l.n)===u)return;c=l.z,i.lineStart();do{if(l.v=l.o.v=!0,l.e){if(d)for(f=0,s=c.length;f<s;++f)i.point((h=c[f])[0],h[1]);else r(l.x,l.n.x,1,i);l=l.n}else{if(d)for(c=l.p.z,f=c.length-1;f>=0;--f)i.point((h=c[f])[0],h[1]);else r(l.x,l.p.x,-1,i);l=l.p}l=l.o,c=l.z,d=!d}while(!l.v);i.lineEnd()}}}function Yc(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Af(t){return yt(t[0])<=lt?t[0]:ue(t[0])*((yt(t[0])+lt)%te-lt)}function Ow(t,e){var n=Af(e),r=e[1],i=rt(r),o=[rt(n),-ct(n),0],a=0,f=0,s=new qn;i===1?r=Et+ot:i===-1&&(r=-Et-ot);for(var u=0,c=t.length;u<c;++u)if(l=(h=t[u]).length)for(var h,l,d=h[l-1],p=Af(d),m=d[1]/2+Pc,g=rt(m),y=ct(m),b=0;b<l;++b,p=_,g=w,y=M,d=x){var x=h[b],_=Af(x),v=x[1]/2+Pc,w=rt(v),M=ct(v),E=_-p,C=E>=0?1:-1,D=C*E,T=D>lt,F=g*w;if(s.add(Qe(F*C*rt(D),y*M+F*ct(D))),a+=T?E+C*te:E,T^p>=n^_>=n){var R=Zo(Ar(d),Ar(x));xs(R);var q=Zo(o,R);xs(q);var S=(T^E>=0?-1:1)*pe(q[2]);(r>S||r===S&&(R[0]||R[1]))&&(f+=T^E>=0?1:-1)}}return(a<-ot||a<ot&&s<-Bd)^f&1}function Gd(t,e,n,r){return function(i){var o=e(i),a=Wd(),f=e(a),s=!1,u,c,h,l={point:d,lineStart:m,lineEnd:g,polygonStart:function(){l.point=y,l.lineStart=b,l.lineEnd=x,c=[],u=[]},polygonEnd:function(){l.point=d,l.lineStart=m,l.lineEnd=g,c=td(c);var _=Ow(u,r);c.length?(s||(i.polygonStart(),s=!0),Yd(c,Bw,_,n,i)):_&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(_,v){t(_,v)&&i.point(_,v)}function p(_,v){o.point(_,v)}function m(){l.point=p,o.lineStart()}function g(){l.point=d,o.lineEnd()}function y(_,v){h.push([_,v]),f.point(_,v)}function b(){f.lineStart(),h=[]}function x(){y(h[0][0],h[0][1]),f.lineEnd();var _=f.clean(),v=a.result(),w,M=v.length,E,C,D;if(h.pop(),u.push(h),h=null,!!M){if(_&1){if(C=v[0],(E=C.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),w=0;w<E;++w)i.point((D=C[w])[0],D[1]);i.lineEnd()}return}M>1&&_&2&&v.push(v.pop().concat(v.shift())),c.push(v.filter(Uw))}}return l}}function Uw(t){return t.length>1}function Bw(t,e){return((t=t.x)[0]<0?t[1]-Et-ot:Et-t[1])-((e=e.x)[0]<0?e[1]-Et-ot:Et-e[1])}const Gc=Gd(function(){return!0},zw,Hw,[-lt,-Et]);function zw(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var f=o>0?lt:-lt,s=yt(o-e);yt(s-lt)<ot?(t.point(e,n=(n+a)/2>0?Et:-Et),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(o,n),i=0):r!==f&&s>=lt&&(yt(e-r)<ot&&(e-=r*ot),yt(o-f)<ot&&(o-=f*ot),n=qw(e,n,o,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),i=0),t.point(e=o,n=a),r=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function qw(t,e,n,r){var i,o,a=rt(t-n);return yt(a)>ot?Wr((rt(e)*(o=ct(r))*rt(n)-rt(r)*(i=ct(e))*rt(t))/(i*o*a)):(e+r)/2}function Hw(t,e,n,r){var i;if(t==null)i=n*Et,r.point(-lt,i),r.point(0,i),r.point(lt,i),r.point(lt,0),r.point(lt,-i),r.point(0,-i),r.point(-lt,-i),r.point(-lt,0),r.point(-lt,i);else if(yt(t[0]-e[0])>ot){var o=t[0]<e[0]?lt:-lt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Ww(t){var e=ct(t),n=6*Tt,r=e>0,i=yt(e)>ot;function o(c,h,l,d){Pw(d,t,n,l,c,h)}function a(c,h){return ct(c)*ct(h)>e}function f(c){var h,l,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(g,y){var b=[g,y],x,_=a(g,y),v=r?_?0:u(g,y):_?u(g+(g<0?lt:-lt),y):0;if(!h&&(p=d=_)&&c.lineStart(),_!==d&&(x=s(h,b),(!x||Ao(h,x)||Ao(b,x))&&(b[2]=1)),_!==d)m=0,_?(c.lineStart(),x=s(b,h),c.point(x[0],x[1])):(x=s(h,b),c.point(x[0],x[1],2),c.lineEnd()),h=x;else if(i&&h&&r^_){var w;!(v&l)&&(w=s(b,h,!0))&&(m=0,r?(c.lineStart(),c.point(w[0][0],w[0][1]),c.point(w[1][0],w[1][1]),c.lineEnd()):(c.point(w[1][0],w[1][1]),c.lineEnd(),c.lineStart(),c.point(w[0][0],w[0][1],3)))}_&&(!h||!Ao(h,b))&&c.point(b[0],b[1]),h=b,d=_,l=v},lineEnd:function(){d&&c.lineEnd(),h=null},clean:function(){return m|(p&&d)<<1}}}function s(c,h,l){var d=Ar(c),p=Ar(h),m=[1,0,0],g=Zo(d,p),y=uo(g,g),b=g[0],x=y-b*b;if(!x)return!l&&c;var _=e*y/x,v=-e*b/x,w=Zo(m,g),M=co(m,_),E=co(g,v);Cf(M,E);var C=w,D=uo(M,C),T=uo(C,C),F=D*D-T*(uo(M,M)-1);if(!(F<0)){var R=jt(F),q=co(C,(-D-R)/T);if(Cf(q,M),q=vs(q),!l)return q;var S=c[0],U=h[0],P=c[1],Y=h[1],V;U<S&&(V=S,S=U,U=V);var H=U-S,L=yt(H-lt)<ot,z=L||H<ot;if(!L&&Y<P&&(V=P,P=Y,Y=V),z?L?P+Y>0^q[1]<(yt(q[0]-S)<ot?P:Y):P<=q[1]&&q[1]<=Y:H>lt^(S<=q[0]&&q[0]<=U)){var G=co(C,(-D+R)/T);return Cf(G,M),[q,vs(G)]}}}function u(c,h){var l=r?t:lt-t,d=0;return c<-l?d|=1:c>l&&(d|=2),h<-l?d|=4:h>l&&(d|=8),d}return Gd(a,f,o,r?[0,-t]:[-lt,t-lt])}function Yw(t,e,n,r,i,o){var a=t[0],f=t[1],s=e[0],u=e[1],c=0,h=1,l=s-a,d=u-f,p;if(p=n-a,!(!l&&p>0)){if(p/=l,l<0){if(p<c)return;p<h&&(h=p)}else if(l>0){if(p>h)return;p>c&&(c=p)}if(p=i-a,!(!l&&p<0)){if(p/=l,l<0){if(p>h)return;p>c&&(c=p)}else if(l>0){if(p<c)return;p<h&&(h=p)}if(p=r-f,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>c&&(c=p)}if(p=o-f,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<h&&(h=p)}return c>0&&(t[0]=a+c*l,t[1]=f+c*d),h<1&&(e[0]=a+h*l,e[1]=f+h*d),!0}}}}}var oi=1e9,ho=-oi;function Vd(t,e,n,r){function i(u,c){return t<=u&&u<=n&&e<=c&&c<=r}function o(u,c,h,l){var d=0,p=0;if(u==null||(d=a(u,h))!==(p=a(c,h))||s(u,c)<0^h>0)do l.point(d===0||d===3?t:n,d>1?r:e);while((d=(d+h+4)%4)!==p);else l.point(c[0],c[1])}function a(u,c){return yt(u[0]-t)<ot?c>0?0:3:yt(u[0]-n)<ot?c>0?2:1:yt(u[1]-e)<ot?c>0?1:0:c>0?3:2}function f(u,c){return s(u.x,c.x)}function s(u,c){var h=a(u,1),l=a(c,1);return h!==l?h-l:h===0?c[1]-u[1]:h===1?u[0]-c[0]:h===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,h=Wd(),l,d,p,m,g,y,b,x,_,v,w,M={point:E,lineStart:F,lineEnd:R,polygonStart:D,polygonEnd:T};function E(S,U){i(S,U)&&c.point(S,U)}function C(){for(var S=0,U=0,P=d.length;U<P;++U)for(var Y=d[U],V=1,H=Y.length,L=Y[0],z,G,J=L[0],Q=L[1];V<H;++V)z=J,G=Q,L=Y[V],J=L[0],Q=L[1],G<=r?Q>r&&(J-z)*(r-G)>(Q-G)*(t-z)&&++S:Q<=r&&(J-z)*(r-G)<(Q-G)*(t-z)&&--S;return S}function D(){c=h,l=[],d=[],w=!0}function T(){var S=C(),U=w&&S,P=(l=td(l)).length;(U||P)&&(u.polygonStart(),U&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),P&&Yd(l,f,S,o,u),u.polygonEnd()),c=u,l=d=p=null}function F(){M.point=q,d&&d.push(p=[]),v=!0,_=!1,b=x=NaN}function R(){l&&(q(m,g),y&&_&&h.rejoin(),l.push(h.result())),M.point=E,_&&c.lineEnd()}function q(S,U){var P=i(S,U);if(d&&p.push([S,U]),v)m=S,g=U,y=P,v=!1,P&&(c.lineStart(),c.point(S,U));else if(P&&_)c.point(S,U);else{var Y=[b=Math.max(ho,Math.min(oi,b)),x=Math.max(ho,Math.min(oi,x))],V=[S=Math.max(ho,Math.min(oi,S)),U=Math.max(ho,Math.min(oi,U))];Yw(Y,V,t,e,n,r)?(_||(c.lineStart(),c.point(Y[0],Y[1])),c.point(V[0],V[1]),P||c.lineEnd(),w=!1):P&&(c.lineStart(),c.point(S,U),w=!1)}b=S,x=U,_=P}return M}}const Ss=t=>t;var Nf=new qn,Ts=new qn,Xd,jd,ks,Es,hn={point:ce,lineStart:ce,lineEnd:ce,polygonStart:function(){hn.lineStart=Gw,hn.lineEnd=Xw},polygonEnd:function(){hn.lineStart=hn.lineEnd=hn.point=ce,Nf.add(yt(Ts)),Ts=new qn},result:function(){var t=Nf/2;return Nf=new qn,t}};function Gw(){hn.point=Vw}function Vw(t,e){hn.point=Zd,Xd=ks=t,jd=Es=e}function Zd(t,e){Ts.add(Es*t-ks*e),ks=t,Es=e}function Xw(){Zd(Xd,jd)}const Vc=hn;var Nr=1/0,Ko=Nr,$i=-Nr,Qo=$i,jw={point:Zw,lineStart:ce,lineEnd:ce,polygonStart:ce,polygonEnd:ce,result:function(){var t=[[Nr,Ko],[$i,Qo]];return $i=Qo=-(Ko=Nr=1/0),t}};function Zw(t,e){t<Nr&&(Nr=t),t>$i&&($i=t),e<Ko&&(Ko=e),e>Qo&&(Qo=e)}const Jo=jw;var Cs=0,As=0,ai=0,ta=0,ea=0,mr=0,Ns=0,Ds=0,fi=0,Kd,Qd,Ce,Ae,ye={point:Xn,lineStart:Xc,lineEnd:jc,polygonStart:function(){ye.lineStart=Jw,ye.lineEnd=tv},polygonEnd:function(){ye.point=Xn,ye.lineStart=Xc,ye.lineEnd=jc},result:function(){var t=fi?[Ns/fi,Ds/fi]:mr?[ta/mr,ea/mr]:ai?[Cs/ai,As/ai]:[NaN,NaN];return Cs=As=ai=ta=ea=mr=Ns=Ds=fi=0,t}};function Xn(t,e){Cs+=t,As+=e,++ai}function Xc(){ye.point=Kw}function Kw(t,e){ye.point=Qw,Xn(Ce=t,Ae=e)}function Qw(t,e){var n=t-Ce,r=e-Ae,i=jt(n*n+r*r);ta+=i*(Ce+t)/2,ea+=i*(Ae+e)/2,mr+=i,Xn(Ce=t,Ae=e)}function jc(){ye.point=Xn}function Jw(){ye.point=ev}function tv(){Jd(Kd,Qd)}function ev(t,e){ye.point=Jd,Xn(Kd=Ce=t,Qd=Ae=e)}function Jd(t,e){var n=t-Ce,r=e-Ae,i=jt(n*n+r*r);ta+=i*(Ce+t)/2,ea+=i*(Ae+e)/2,mr+=i,i=Ae*t-Ce*e,Ns+=i*(Ce+t),Ds+=i*(Ae+e),fi+=i*3,Xn(Ce=t,Ae=e)}const Zc=ye;function t0(t){this._context=t}t0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,te);break}}},result:ce};var Ls=new qn,Df,e0,n0,si,ui,na={point:ce,lineStart:function(){na.point=nv},lineEnd:function(){Df&&r0(e0,n0),na.point=ce},polygonStart:function(){Df=!0},polygonEnd:function(){Df=null},result:function(){var t=+Ls;return Ls=new qn,t}};function nv(t,e){na.point=r0,e0=si=t,n0=ui=e}function r0(t,e){si-=t,ui-=e,Ls.add(jt(si*si+ui*ui)),si=t,ui=e}const Kc=na;let Qc,ra,Jc,tl;class el{constructor(e){this._append=e==null?i0:rv(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Jc||this._append!==ra){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Jc=r,ra=this._append,tl=this._,this._=i}this._+=tl;break}}}result(){const e=this._;return this._="",e.length?e:null}}function i0(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function rv(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return i0;if(e!==Qc){const n=10**e;Qc=e,ra=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return ra}function Oa(t,e){let n=3,r=4.5,i,o;function a(f){return f&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Dn(f,i(o))),o.result()}return a.area=function(f){return Dn(f,i(Vc)),Vc.result()},a.measure=function(f){return Dn(f,i(Kc)),Kc.result()},a.bounds=function(f){return Dn(f,i(Jo)),Jo.result()},a.centroid=function(f){return Dn(f,i(Zc)),Zc.result()},a.projection=function(f){return arguments.length?(i=f==null?(t=null,Ss):(t=f).stream,a):t},a.context=function(f){return arguments.length?(o=f==null?(e=null,new el(n)):new t0(e=f),typeof r!="function"&&o.pointRadius(r),a):e},a.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(o.pointRadius(+f),+f),a):r},a.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const s=Math.floor(f);if(!(s>=0))throw new RangeError(`invalid digits: ${f}`);n=s}return e===null&&(o=new el(n)),a},a.projection(t).digits(n).context(e)}function Fs(t){return{stream:Ua(t)}}function Ua(t){return function(e){var n=new Rs;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Rs(){}Rs.prototype={constructor:Rs,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function mu(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Dn(n,t.stream(Jo)),e(Jo.result()),r!=null&&t.clipExtent(r),t}function gu(t,e,n){return mu(t,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),f=+e[0][0]+(i-a*(r[1][0]+r[0][0]))/2,s=+e[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([f,s])},n)}function o0(t,e,n){return gu(t,[[0,0],e],n)}function a0(t,e,n){return mu(t,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,f=-o*r[0][1];t.scale(150*o).translate([a,f])},n)}function f0(t,e,n){return mu(t,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],f=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,f])},n)}var nl=16,iv=ct(30*Tt);function rl(t,e){return+e?av(t,e):ov(t)}function ov(t){return Ua({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function av(t,e){function n(r,i,o,a,f,s,u,c,h,l,d,p,m,g){var y=u-r,b=c-i,x=y*y+b*b;if(x>4*e&&m--){var _=a+l,v=f+d,w=s+p,M=jt(_*_+v*v+w*w),E=pe(w/=M),C=yt(yt(w)-1)<ot||yt(o-h)<ot?(o+h)/2:Qe(v,_),D=t(C,E),T=D[0],F=D[1],R=T-r,q=F-i,S=b*R-y*q;(S*S/x>e||yt((y*R+b*q)/x-.5)>.3||a*l+f*d+s*p<iv)&&(n(r,i,o,a,f,s,T,F,C,_/=M,v/=M,w,m,g),g.point(T,F),n(T,F,C,_,v,w,u,c,h,l,d,p,m,g))}}return function(r){var i,o,a,f,s,u,c,h,l,d,p,m,g={point:y,lineStart:b,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=v},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(E,C){E=t(E,C),r.point(E[0],E[1])}function b(){h=NaN,g.point=x,r.lineStart()}function x(E,C){var D=Ar([E,C]),T=t(E,C);n(h,l,c,d,p,m,h=T[0],l=T[1],c=E,d=D[0],p=D[1],m=D[2],nl,r),r.point(h,l)}function _(){g.point=y,r.lineEnd()}function v(){b(),g.point=w,g.lineEnd=M}function w(E,C){x(i=E,C),o=h,a=l,f=d,s=p,u=m,g.point=x}function M(){n(h,l,c,d,p,m,o,a,i,f,s,u,nl,r),g.lineEnd=_,_()}return g}}var fv=Ua({point:function(t,e){this.stream.point(t*Tt,e*Tt)}});function sv(t){return Ua({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function uv(t,e,n,r,i){function o(a,f){return a*=r,f*=i,[e+t*a,n-t*f]}return o.invert=function(a,f){return[(a-e)/t*r,(n-f)/t*i]},o}function il(t,e,n,r,i,o){if(!o)return uv(t,e,n,r,i);var a=ct(o),f=rt(o),s=a*t,u=f*t,c=a/t,h=f/t,l=(f*n-a*e)/t,d=(f*e+a*n)/t;function p(m,g){return m*=r,g*=i,[s*m-u*g+e,n-u*m-s*g]}return p.invert=function(m,g){return[r*(c*m-h*g+l),i*(d-h*m-c*g)]},p}function Mn(t){return s0(function(){return t})()}function s0(t){var e,n=150,r=480,i=250,o=0,a=0,f=0,s=0,u=0,c,h=0,l=1,d=1,p=null,m=Gc,g=null,y,b,x,_=Ss,v=.5,w,M,E,C,D;function T(S){return E(S[0]*Tt,S[1]*Tt)}function F(S){return S=E.invert(S[0],S[1]),S&&[S[0]*Ht,S[1]*Ht]}T.stream=function(S){return C&&D===S?C:C=fv(sv(c)(m(w(_(D=S)))))},T.preclip=function(S){return arguments.length?(m=S,p=void 0,q()):m},T.postclip=function(S){return arguments.length?(_=S,g=y=b=x=null,q()):_},T.clipAngle=function(S){return arguments.length?(m=+S?Ww(p=S*Tt):(p=null,Gc),q()):p*Ht},T.clipExtent=function(S){return arguments.length?(_=S==null?(g=y=b=x=null,Ss):Vd(g=+S[0][0],y=+S[0][1],b=+S[1][0],x=+S[1][1]),q()):g==null?null:[[g,y],[b,x]]},T.scale=function(S){return arguments.length?(n=+S,R()):n},T.translate=function(S){return arguments.length?(r=+S[0],i=+S[1],R()):[r,i]},T.center=function(S){return arguments.length?(o=S[0]%360*Tt,a=S[1]%360*Tt,R()):[o*Ht,a*Ht]},T.rotate=function(S){return arguments.length?(f=S[0]%360*Tt,s=S[1]%360*Tt,u=S.length>2?S[2]%360*Tt:0,R()):[f*Ht,s*Ht,u*Ht]},T.angle=function(S){return arguments.length?(h=S%360*Tt,R()):h*Ht},T.reflectX=function(S){return arguments.length?(l=S?-1:1,R()):l<0},T.reflectY=function(S){return arguments.length?(d=S?-1:1,R()):d<0},T.precision=function(S){return arguments.length?(w=rl(M,v=S*S),q()):jt(v)},T.fitExtent=function(S,U){return gu(T,S,U)},T.fitSize=function(S,U){return o0(T,S,U)},T.fitWidth=function(S,U){return a0(T,S,U)},T.fitHeight=function(S,U){return f0(T,S,U)};function R(){var S=il(n,0,0,l,d,h).apply(null,e(o,a)),U=il(n,r-S[0],i-S[1],l,d,h);return c=Hd(f,s,u),M=Ms(e,U),E=Ms(c,M),w=rl(M,v),q()}function q(){return C=D=null,T}return function(){return e=t.apply(this,arguments),T.invert=e.invert&&F,R()}}function bu(t){var e=0,n=lt/3,r=s0(t),i=r(e,n);return i.parallels=function(o){return arguments.length?r(e=o[0]*Tt,n=o[1]*Tt):[e*Ht,n*Ht]},i}function cv(t){var e=ct(t);function n(r,i){return[r*e,rt(i)/e]}return n.invert=function(r,i){return[r/e,pe(i*e)]},n}function lv(t,e){var n=rt(t),r=(n+rt(e))/2;if(yt(r)<ot)return cv(t);var i=1+n*(2*r-n),o=jt(i)/r;function a(f,s){var u=jt(i-2*r*rt(s))/r;return[u*rt(f*=r),o-u*ct(f)]}return a.invert=function(f,s){var u=o-s,c=Qe(f,yt(u))*ue(u);return u*r<0&&(c-=lt*ue(f)*ue(u)),[c/r,pe((i-(f*f+u*u)*r*r)/(2*r))]},a}function ia(){return bu(lv).scale(155.424).center([0,33.6442])}function u0(){return ia().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hv(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function dv(){var t,e,n=u0(),r,i=ia().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=ia().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,s,u={point:function(l,d){s=[l,d]}};function c(l){var d=l[0],p=l[1];return s=null,r.point(d,p),s||(o.point(d,p),s)||(f.point(d,p),s)}c.invert=function(l){var d=n.scale(),p=n.translate(),m=(l[0]-p[0])/d,g=(l[1]-p[1])/d;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(l)},c.stream=function(l){return t&&e===l?t:t=hv([n.stream(e=l),i.stream(l),a.stream(l)])},c.precision=function(l){return arguments.length?(n.precision(l),i.precision(l),a.precision(l),h()):n.precision()},c.scale=function(l){return arguments.length?(n.scale(l),i.scale(l*.35),a.scale(l),c.translate(n.translate())):n.scale()},c.translate=function(l){if(!arguments.length)return n.translate();var d=n.scale(),p=+l[0],m=+l[1];return r=n.translate(l).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(u),o=i.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+ot,m+.12*d+ot],[p-.214*d-ot,m+.234*d-ot]]).stream(u),f=a.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+ot,m+.166*d+ot],[p-.115*d-ot,m+.234*d-ot]]).stream(u),h()},c.fitExtent=function(l,d){return gu(c,l,d)},c.fitSize=function(l,d){return o0(c,l,d)},c.fitWidth=function(l,d){return a0(c,l,d)},c.fitHeight=function(l,d){return f0(c,l,d)};function h(){return t=e=null,c}return c.scale(1070)}function c0(t){return function(e,n){var r=ct(e),i=ct(n),o=t(r*i);return o===1/0?[2,0]:[o*i*rt(e),o*rt(n)]}}function Pi(t){return function(e,n){var r=jt(e*e+n*n),i=t(r),o=rt(i),a=ct(i);return[Qe(e*o,r*a),pe(r&&n*o/r)]}}var l0=c0(function(t){return jt(2/(1+t))});l0.invert=Pi(function(t){return 2*pe(t/2)});function pv(){return Mn(l0).scale(124.75).clipAngle(180-.001)}var h0=c0(function(t){return(t=qd(t))&&t/rt(t)});h0.invert=Pi(function(t){return t});function mv(){return Mn(h0).scale(79.4188).clipAngle(180-.001)}function Ba(t,e){return[t,Xo(pu((Et+e)/2))]}Ba.invert=function(t,e){return[t,2*Wr(zd(e))-Et]};function gv(){return d0(Ba).scale(961/te)}function d0(t){var e=Mn(t),n=e.center,r=e.scale,i=e.translate,o=e.clipExtent,a=null,f,s,u;e.scale=function(h){return arguments.length?(r(h),c()):r()},e.translate=function(h){return arguments.length?(i(h),c()):i()},e.center=function(h){return arguments.length?(n(h),c()):n()},e.clipExtent=function(h){return arguments.length?(h==null?a=f=s=u=null:(a=+h[0][0],f=+h[0][1],s=+h[1][0],u=+h[1][1]),c()):a==null?null:[[a,f],[s,u]]};function c(){var h=lt*r(),l=e(Iw(e.rotate()).invert([0,0]));return o(a==null?[[l[0]-h,l[1]-h],[l[0]+h,l[1]+h]]:t===Ba?[[Math.max(l[0]-h,a),f],[Math.min(l[0]+h,s),u]]:[[a,Math.max(l[1]-h,f)],[s,Math.min(l[1]+h,u)]])}return c()}function po(t){return pu((Et+t)/2)}function bv(t,e){var n=ct(t),r=t===e?rt(t):Xo(n/ct(e))/Xo(po(e)/po(t)),i=n*Ef(po(t),r)/r;if(!r)return Ba;function o(a,f){i>0?f<-Et+ot&&(f=-Et+ot):f>Et-ot&&(f=Et-ot);var s=i/Ef(po(f),r);return[s*rt(r*a),i-s*ct(r*a)]}return o.invert=function(a,f){var s=i-f,u=ue(r)*jt(a*a+s*s),c=Qe(a,yt(s))*ue(s);return s*r<0&&(c-=lt*ue(a)*ue(s)),[c/r,2*Wr(Ef(i/u,1/r))-Et]},o}function yv(){return bu(bv).scale(109.5).parallels([30,30])}function oa(t,e){return[t,e]}oa.invert=oa;function _v(){return Mn(oa).scale(152.63)}function wv(t,e){var n=ct(t),r=t===e?rt(t):(n-ct(e))/(e-t),i=n/r+t;if(yt(r)<ot)return oa;function o(a,f){var s=i-f,u=r*a;return[s*rt(u),i-s*ct(u)]}return o.invert=function(a,f){var s=i-f,u=Qe(a,yt(s))*ue(s);return s*r<0&&(u-=lt*ue(a)*ue(s)),[u/r,i-ue(r)*jt(a*a+s*s)]},o}function vv(){return bu(wv).scale(131.154).center([0,13.9389])}var di=1.340264,pi=-.081106,mi=893e-6,gi=.003796,aa=jt(3)/2,xv=12;function p0(t,e){var n=pe(aa*rt(e)),r=n*n,i=r*r*r;return[t*ct(n)/(aa*(di+3*pi*r+i*(7*mi+9*gi*r))),n*(di+pi*r+i*(mi+gi*r))]}p0.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,o=0,a,f,s;o<xv&&(f=n*(di+pi*r+i*(mi+gi*r))-e,s=di+3*pi*r+i*(7*mi+9*gi*r),n-=a=f/s,r=n*n,i=r*r*r,!(yt(a)<Bd));++o);return[aa*t*(di+3*pi*r+i*(7*mi+9*gi*r))/ct(n),pe(rt(n)/aa)]};function Mv(){return Mn(p0).scale(177.158)}function m0(t,e){var n=ct(e),r=ct(t)*n;return[n*rt(t)/r,rt(e)/r]}m0.invert=Pi(Wr);function $v(){return Mn(m0).scale(144.049).clipAngle(60)}function g0(t,e){return[ct(e)*rt(t),rt(e)]}g0.invert=Pi(pe);function Sv(){return Mn(g0).scale(249.5).clipAngle(90+ot)}function b0(t,e){var n=ct(e),r=1+ct(t)*n;return[n*rt(t)/r,rt(e)/r]}b0.invert=Pi(function(t){return 2*Wr(t)});function Tv(){return Mn(b0).scale(250).clipAngle(142)}function y0(t,e){return[Xo(pu((Et+e)/2)),-t]}y0.invert=function(t,e){return[-e,2*Wr(zd(t))-Et]};function kv(){var t=d0(y0),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ue(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function za(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Is=Symbol("implicit");function yu(){var t=new Hn,e=[],n=[],r=Is;function i(o){let a=t.get(o);if(a===void 0){if(r!==Is)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Hn;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return yu(e,n).unknown(r)},Ue.apply(i,arguments),i}function qa(){var t=yu().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,f=!1,s=0,u=0,c=.5;delete t.unknown;function h(){var l=e().length,d=i<r,p=d?i:r,m=d?r:i;o=(m-p)/Math.max(1,l-s+u*2),f&&(o=Math.floor(o)),p+=(m-p-o*(l-s))*c,a=o*(1-s),f&&(p=Math.round(p),a=Math.round(a));var g=fs(l).map(function(y){return p+o*y});return n(d?g.reverse():g)}return t.domain=function(l){return arguments.length?(e(l),h()):e()},t.range=function(l){return arguments.length?([r,i]=l,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(l){return[r,i]=l,r=+r,i=+i,f=!0,h()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(l){return arguments.length?(f=!!l,h()):f},t.padding=function(l){return arguments.length?(s=Math.min(1,u=+l),h()):s},t.paddingInner=function(l){return arguments.length?(s=Math.min(1,l),h()):s},t.paddingOuter=function(l){return arguments.length?(u=+l,h()):u},t.align=function(l){return arguments.length?(c=Math.max(0,Math.min(1,l)),h()):c},t.copy=function(){return qa(e(),[r,i]).round(f).paddingInner(s).paddingOuter(u).align(c)},Ue.apply(h(),arguments)}function _0(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return _0(e())},t}function Ev(){return _0(qa.apply(null,arguments).paddingInner(1))}function Cv(t){return function(){return t}}function Ps(t){return+t}var ol=[0,1];function le(t){return t}function Os(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Cv(isNaN(e)?NaN:.5)}function Av(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Nv(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Os(i,r),o=n(a,o)):(r=Os(r,i),o=n(o,a)),function(f){return o(r(f))}}function Dv(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Os(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(f){var s=Sa(t,f,1,r)-1;return o[s](i[s](f))}}function Oi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ha(){var t=ol,e=ol,n=Ii,r,i,o,a=le,f,s,u;function c(){var l=Math.min(t.length,e.length);return a!==le&&(a=Av(t[0],t[l-1])),f=l>2?Dv:Nv,s=u=null,h}function h(l){return l==null||isNaN(l=+l)?o:(s||(s=f(t.map(r),e,n)))(r(a(l)))}return h.invert=function(l){return a(i((u||(u=f(e,t.map(r),Ut)))(l)))},h.domain=function(l){return arguments.length?(t=Array.from(l,Ps),c()):t.slice()},h.range=function(l){return arguments.length?(e=Array.from(l),c()):e.slice()},h.rangeRound=function(l){return e=Array.from(l),n=su,c()},h.clamp=function(l){return arguments.length?(a=l?!0:le,c()):a!==le},h.interpolate=function(l){return arguments.length?(n=l,c()):n},h.unknown=function(l){return arguments.length?(o=l,h):o},function(l,d){return r=l,i=d,c()}}function w0(){return Ha()(le,le)}function Lv(t,e,n,r){var i=os(t,e,n),o;switch(r=Mi(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Fw(i,a))&&(r.precision=o),Ud(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Rw(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Lw(i))&&(r.precision=o-(r.type==="%")*2);break}}return Hr(r)}function Ui(t){var e=t.domain;return t.ticks=function(n){var r=e();return _i(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Lv(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],f=r[o],s,u,c=10;for(f<a&&(u=a,a=f,f=u,u=i,i=o,o=u);c-- >0;){if(u=Uo(a,f,n),u===s)return r[i]=a,r[o]=f,e(r);if(u>0)a=Math.floor(a/u)*u,f=Math.ceil(f/u)*u;else if(u<0)a=Math.ceil(a*u)/u,f=Math.floor(f*u)/u;else break;s=u}return t},t}function _u(){var t=w0();return t.copy=function(){return Oi(t,_u())},Ue.apply(t,arguments),Ui(t)}function v0(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ps),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return v0(t).unknown(e)},t=arguments.length?Array.from(t,Ps):[0,1],Ui(n)}function x0(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function al(t){return Math.log(t)}function fl(t){return Math.exp(t)}function Fv(t){return-Math.log(-t)}function Rv(t){return-Math.exp(-t)}function Iv(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Pv(t){return t===10?Iv:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Ov(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function sl(t){return(e,n)=>-t(-e,n)}function M0(t){const e=t(al,fl),n=e.domain;let r=10,i,o;function a(){return i=Ov(r),o=Pv(r),n()[0]<0?(i=sl(i),o=sl(o),t(Fv,Rv)):t(al,fl),e}return e.base=function(f){return arguments.length?(r=+f,a()):r},e.domain=function(f){return arguments.length?(n(f),a()):n()},e.ticks=f=>{const s=n();let u=s[0],c=s[s.length-1];const h=c<u;h&&([u,c]=[c,u]);let l=i(u),d=i(c),p,m;const g=f==null?10:+f;let y=[];if(!(r%1)&&d-l<g){if(l=Math.floor(l),d=Math.ceil(d),u>0){for(;l<=d;++l)for(p=1;p<r;++p)if(m=l<0?p/o(-l):p*o(l),!(m<u)){if(m>c)break;y.push(m)}}else for(;l<=d;++l)for(p=r-1;p>=1;--p)if(m=l>0?p/o(-l):p*o(l),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=_i(u,c,g))}else y=_i(l,d,Math.min(d-l,g)).map(o);return h?y.reverse():y},e.tickFormat=(f,s)=>{if(f==null&&(f=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=Mi(s)).precision==null&&(s.trim=!0),s=Hr(s)),f===1/0)return s;const u=Math.max(1,r*f/e.ticks().length);return c=>{let h=c/o(Math.round(i(c)));return h*r<r-.5&&(h*=r),h<=u?s(c):""}},e.nice=()=>n(x0(n(),{floor:f=>o(Math.floor(i(f))),ceil:f=>o(Math.ceil(i(f)))})),e}function $0(){const t=M0(Ha()).domain([1,10]);return t.copy=()=>Oi(t,$0()).base(t.base()),Ue.apply(t,arguments),t}function ul(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function cl(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function S0(t){var e=1,n=t(ul(e),cl(e));return n.constant=function(r){return arguments.length?t(ul(e=+r),cl(e)):e},Ui(n)}function T0(){var t=S0(Ha());return t.copy=function(){return Oi(t,T0()).constant(t.constant())},Ue.apply(t,arguments)}function ll(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Uv(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Bv(t){return t<0?-t*t:t*t}function k0(t){var e=t(le,le),n=1;function r(){return n===1?t(le,le):n===.5?t(Uv,Bv):t(ll(n),ll(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ui(e)}function E0(){var t=k0(Ha());return t.copy=function(){return Oi(t,E0()).exponent(t.exponent())},Ue.apply(t,arguments),t}function C0(){var t=[],e=[],n=[],r;function i(){var a=0,f=Math.max(1,e.length);for(n=new Array(f-1);++a<f;)n[a-1]=L2(t,a/f);return o}function o(a){return a==null||isNaN(a=+a)?r:e[Sa(n,a)]}return o.invertExtent=function(a){var f=e.indexOf(a);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let f of a)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(Xt),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return C0().domain(t).range(e).unknown(r)},Ue.apply(o,arguments)}function A0(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[Sa(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return A0().domain(t).range(e).unknown(n)},Ue.apply(i,arguments)}const Lf=new Date,Ff=new Date;function Nt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),f=i.ceil(o);return o-a<f-o?a:f},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,f)=>{const s=[];if(o=i.ceil(o),f=f==null?1:Math.floor(f),!(o<a)||!(f>0))return s;let u;do s.push(u=new Date(+o)),e(o,f),t(o);while(u<o&&o<a);return s},i.filter=o=>Nt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,f)=>{if(a>=a)if(f<0)for(;++f<=0;)for(;e(a,-1),!o(a););else for(;--f>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(Lf.setTime(+o),Ff.setTime(+a),t(Lf),t(Ff),Math.floor(n(Lf,Ff))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const fa=Nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);fa.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):fa);fa.range;const Xe=1e3,he=Xe*60,je=he*60,Je=je*24,wu=Je*7,hl=Je*30,Rf=Je*365,Ne=Nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Xe)},(t,e)=>(e-t)/Xe,t=>t.getUTCSeconds());Ne.range;const Wa=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xe)},(t,e)=>{t.setTime(+t+e*he)},(t,e)=>(e-t)/he,t=>t.getMinutes());Wa.range;const Bi=Nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*he)},(t,e)=>(e-t)/he,t=>t.getUTCMinutes());Bi.range;const Ya=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Xe-t.getMinutes()*he)},(t,e)=>{t.setTime(+t+e*je)},(t,e)=>(e-t)/je,t=>t.getHours());Ya.range;const zi=Nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*je)},(t,e)=>(e-t)/je,t=>t.getUTCHours());zi.range;const Jn=Nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*he)/Je,t=>t.getDate()-1);Jn.range;const Ga=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Je,t=>t.getUTCDate()-1);Ga.range;const Va=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Je,t=>Math.floor(t/Je));Va.range;function tr(t){return Nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*he)/wu)}const Dr=tr(0),Si=tr(1),N0=tr(2),D0=tr(3),jn=tr(4),L0=tr(5),F0=tr(6);Dr.range;Si.range;N0.range;D0.range;jn.range;L0.range;F0.range;function er(t){return Nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/wu)}const Lr=er(0),Ti=er(1),R0=er(2),I0=er(3),Zn=er(4),P0=er(5),O0=er(6);Lr.range;Ti.range;R0.range;I0.range;Zn.range;P0.range;O0.range;const qi=Nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());qi.range;const Hi=Nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Hi.range;const we=Nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());we.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});we.range;const ve=Nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ve.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ve.range;function U0(t,e,n,r,i,o){const a=[[Ne,1,Xe],[Ne,5,5*Xe],[Ne,15,15*Xe],[Ne,30,30*Xe],[o,1,he],[o,5,5*he],[o,15,15*he],[o,30,30*he],[i,1,je],[i,3,3*je],[i,6,6*je],[i,12,12*je],[r,1,Je],[r,2,2*Je],[n,1,wu],[e,1,hl],[e,3,3*hl],[t,1,Rf]];function f(u,c,h){const l=c<u;l&&([u,c]=[c,u]);const d=h&&typeof h.range=="function"?h:s(u,c,h),p=d?d.range(u,+c+1):[];return l?p.reverse():p}function s(u,c,h){const l=Math.abs(c-u)/h,d=$a(([,,g])=>g).right(a,l);if(d===a.length)return t.every(os(u/Rf,c/Rf,h));if(d===0)return fa.every(Math.max(os(u,c,h),1));const[p,m]=a[l/a[d-1][2]<a[d][2]/l?d-1:d];return p.every(m)}return[f,s]}const[zv,B0]=U0(ve,Hi,Lr,Va,zi,Bi),[qv,Hv]=U0(we,qi,Dr,Jn,Ya,Wa);function If(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Pf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Wv(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,f=t.months,s=t.shortMonths,u=Jr(i),c=ti(i),h=Jr(o),l=ti(o),d=Jr(a),p=ti(a),m=Jr(f),g=ti(f),y=Jr(s),b=ti(s),x={a:P,A:Y,b:V,B:H,c:null,d:yl,e:yl,f:d3,g:M3,G:S3,H:c3,I:l3,j:h3,L:z0,m:p3,M:m3,p:L,q:z,Q:vl,s:xl,S:g3,u:b3,U:y3,V:_3,w:w3,W:v3,x:null,X:null,y:x3,Y:$3,Z:T3,"%":wl},_={a:G,A:J,b:Q,B:j,c:null,d:_l,e:_l,f:A3,g:B3,G:q3,H:k3,I:E3,j:C3,L:H0,m:N3,M:D3,p:I,q:B,Q:vl,s:xl,S:L3,u:F3,U:R3,V:I3,w:P3,W:O3,x:null,X:null,y:U3,Y:z3,Z:H3,"%":wl},v={a:D,A:T,b:F,B:R,c:q,d:gl,e:gl,f:a3,g:ml,G:pl,H:bl,I:bl,j:n3,L:o3,m:e3,M:r3,p:C,q:t3,Q:s3,s:u3,S:i3,u:jv,U:Zv,V:Kv,w:Xv,W:Qv,x:S,X:U,y:ml,Y:pl,Z:Jv,"%":f3};x.x=w(n,x),x.X=w(r,x),x.c=w(e,x),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_);function w(k,N){return function(W){var A=[],et=-1,X=0,ft=k.length,dt,mt,oe;for(W instanceof Date||(W=new Date(+W));++et<ft;)k.charCodeAt(et)===37&&(A.push(k.slice(X,et)),(mt=dl[dt=k.charAt(++et)])!=null?dt=k.charAt(++et):mt=dt==="e"?" ":"0",(oe=N[dt])&&(dt=oe(W,mt)),A.push(dt),X=et+1);return A.push(k.slice(X,et)),A.join("")}}function M(k,N){return function(W){var A=Qr(1900,void 0,1),et=E(A,k,W+="",0),X,ft;if(et!=W.length)return null;if("Q"in A)return new Date(A.Q);if("s"in A)return new Date(A.s*1e3+("L"in A?A.L:0));if(N&&!("Z"in A)&&(A.Z=0),"p"in A&&(A.H=A.H%12+A.p*12),A.m===void 0&&(A.m="q"in A?A.q:0),"V"in A){if(A.V<1||A.V>53)return null;"w"in A||(A.w=1),"Z"in A?(X=Pf(Qr(A.y,0,1)),ft=X.getUTCDay(),X=ft>4||ft===0?Ti.ceil(X):Ti(X),X=Ga.offset(X,(A.V-1)*7),A.y=X.getUTCFullYear(),A.m=X.getUTCMonth(),A.d=X.getUTCDate()+(A.w+6)%7):(X=If(Qr(A.y,0,1)),ft=X.getDay(),X=ft>4||ft===0?Si.ceil(X):Si(X),X=Jn.offset(X,(A.V-1)*7),A.y=X.getFullYear(),A.m=X.getMonth(),A.d=X.getDate()+(A.w+6)%7)}else("W"in A||"U"in A)&&("w"in A||(A.w="u"in A?A.u%7:"W"in A?1:0),ft="Z"in A?Pf(Qr(A.y,0,1)).getUTCDay():If(Qr(A.y,0,1)).getDay(),A.m=0,A.d="W"in A?(A.w+6)%7+A.W*7-(ft+5)%7:A.w+A.U*7-(ft+6)%7);return"Z"in A?(A.H+=A.Z/100|0,A.M+=A.Z%100,Pf(A)):If(A)}}function E(k,N,W,A){for(var et=0,X=N.length,ft=W.length,dt,mt;et<X;){if(A>=ft)return-1;if(dt=N.charCodeAt(et++),dt===37){if(dt=N.charAt(et++),mt=v[dt in dl?N.charAt(et++):dt],!mt||(A=mt(k,W,A))<0)return-1}else if(dt!=W.charCodeAt(A++))return-1}return A}function C(k,N,W){var A=u.exec(N.slice(W));return A?(k.p=c.get(A[0].toLowerCase()),W+A[0].length):-1}function D(k,N,W){var A=d.exec(N.slice(W));return A?(k.w=p.get(A[0].toLowerCase()),W+A[0].length):-1}function T(k,N,W){var A=h.exec(N.slice(W));return A?(k.w=l.get(A[0].toLowerCase()),W+A[0].length):-1}function F(k,N,W){var A=y.exec(N.slice(W));return A?(k.m=b.get(A[0].toLowerCase()),W+A[0].length):-1}function R(k,N,W){var A=m.exec(N.slice(W));return A?(k.m=g.get(A[0].toLowerCase()),W+A[0].length):-1}function q(k,N,W){return E(k,e,N,W)}function S(k,N,W){return E(k,n,N,W)}function U(k,N,W){return E(k,r,N,W)}function P(k){return a[k.getDay()]}function Y(k){return o[k.getDay()]}function V(k){return s[k.getMonth()]}function H(k){return f[k.getMonth()]}function L(k){return i[+(k.getHours()>=12)]}function z(k){return 1+~~(k.getMonth()/3)}function G(k){return a[k.getUTCDay()]}function J(k){return o[k.getUTCDay()]}function Q(k){return s[k.getUTCMonth()]}function j(k){return f[k.getUTCMonth()]}function I(k){return i[+(k.getUTCHours()>=12)]}function B(k){return 1+~~(k.getUTCMonth()/3)}return{format:function(k){var N=w(k+="",x);return N.toString=function(){return k},N},parse:function(k){var N=M(k+="",!1);return N.toString=function(){return k},N},utcFormat:function(k){var N=w(k+="",_);return N.toString=function(){return k},N},utcParse:function(k){var N=M(k+="",!0);return N.toString=function(){return k},N}}}var dl={"-":"",_:" ",0:"0"},It=/^\s*\d+/,Yv=/^%/,Gv=/[\\^$*+?|[\]().{}]/g;function gt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Vv(t){return t.replace(Gv,"\\$&")}function Jr(t){return new RegExp("^(?:"+t.map(Vv).join("|")+")","i")}function ti(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Xv(t,e,n){var r=It.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function jv(t,e,n){var r=It.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Zv(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Kv(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Qv(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function pl(t,e,n){var r=It.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ml(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Jv(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function t3(t,e,n){var r=It.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function e3(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function gl(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function n3(t,e,n){var r=It.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function bl(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function r3(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function i3(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function o3(t,e,n){var r=It.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function a3(t,e,n){var r=It.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function f3(t,e,n){var r=Yv.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function s3(t,e,n){var r=It.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function u3(t,e,n){var r=It.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function yl(t,e){return gt(t.getDate(),e,2)}function c3(t,e){return gt(t.getHours(),e,2)}function l3(t,e){return gt(t.getHours()%12||12,e,2)}function h3(t,e){return gt(1+Jn.count(we(t),t),e,3)}function z0(t,e){return gt(t.getMilliseconds(),e,3)}function d3(t,e){return z0(t,e)+"000"}function p3(t,e){return gt(t.getMonth()+1,e,2)}function m3(t,e){return gt(t.getMinutes(),e,2)}function g3(t,e){return gt(t.getSeconds(),e,2)}function b3(t){var e=t.getDay();return e===0?7:e}function y3(t,e){return gt(Dr.count(we(t)-1,t),e,2)}function q0(t){var e=t.getDay();return e>=4||e===0?jn(t):jn.ceil(t)}function _3(t,e){return t=q0(t),gt(jn.count(we(t),t)+(we(t).getDay()===4),e,2)}function w3(t){return t.getDay()}function v3(t,e){return gt(Si.count(we(t)-1,t),e,2)}function x3(t,e){return gt(t.getFullYear()%100,e,2)}function M3(t,e){return t=q0(t),gt(t.getFullYear()%100,e,2)}function $3(t,e){return gt(t.getFullYear()%1e4,e,4)}function S3(t,e){var n=t.getDay();return t=n>=4||n===0?jn(t):jn.ceil(t),gt(t.getFullYear()%1e4,e,4)}function T3(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gt(e/60|0,"0",2)+gt(e%60,"0",2)}function _l(t,e){return gt(t.getUTCDate(),e,2)}function k3(t,e){return gt(t.getUTCHours(),e,2)}function E3(t,e){return gt(t.getUTCHours()%12||12,e,2)}function C3(t,e){return gt(1+Ga.count(ve(t),t),e,3)}function H0(t,e){return gt(t.getUTCMilliseconds(),e,3)}function A3(t,e){return H0(t,e)+"000"}function N3(t,e){return gt(t.getUTCMonth()+1,e,2)}function D3(t,e){return gt(t.getUTCMinutes(),e,2)}function L3(t,e){return gt(t.getUTCSeconds(),e,2)}function F3(t){var e=t.getUTCDay();return e===0?7:e}function R3(t,e){return gt(Lr.count(ve(t)-1,t),e,2)}function W0(t){var e=t.getUTCDay();return e>=4||e===0?Zn(t):Zn.ceil(t)}function I3(t,e){return t=W0(t),gt(Zn.count(ve(t),t)+(ve(t).getUTCDay()===4),e,2)}function P3(t){return t.getUTCDay()}function O3(t,e){return gt(Ti.count(ve(t)-1,t),e,2)}function U3(t,e){return gt(t.getUTCFullYear()%100,e,2)}function B3(t,e){return t=W0(t),gt(t.getUTCFullYear()%100,e,2)}function z3(t,e){return gt(t.getUTCFullYear()%1e4,e,4)}function q3(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Zn(t):Zn.ceil(t),gt(t.getUTCFullYear()%1e4,e,4)}function H3(){return"+0000"}function wl(){return"%"}function vl(t){return+t}function xl(t){return Math.floor(+t/1e3)}var cr,vu,Wi;W3({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function W3(t){return cr=Wv(t),vu=cr.format,cr.parse,Wi=cr.utcFormat,cr.utcParse,cr}function Y3(t){return new Date(t)}function G3(t){return t instanceof Date?+t:+new Date(+t)}function xu(t,e,n,r,i,o,a,f,s,u){var c=w0(),h=c.invert,l=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),b=u("%b %d"),x=u("%B"),_=u("%Y");function v(w){return(s(w)<w?d:f(w)<w?p:a(w)<w?m:o(w)<w?g:r(w)<w?i(w)<w?y:b:n(w)<w?x:_)(w)}return c.invert=function(w){return new Date(h(w))},c.domain=function(w){return arguments.length?l(Array.from(w,G3)):l().map(Y3)},c.ticks=function(w){var M=l();return t(M[0],M[M.length-1],w??10)},c.tickFormat=function(w,M){return M==null?v:u(M)},c.nice=function(w){var M=l();return(!w||typeof w.range!="function")&&(w=e(M[0],M[M.length-1],w??10)),w?l(x0(M,w)):c},c.copy=function(){return Oi(c,xu(t,e,n,r,i,o,a,f,s,u))},c}function V3(){return Ue.apply(xu(qv,Hv,we,qi,Dr,Jn,Ya,Wa,Ne,vu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function X3(){return Ue.apply(xu(zv,B0,ve,Hi,Lr,Ga,zi,Bi,Ne,Wi).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xa(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ja(){var t=0,e=.5,n=1,r=1,i,o,a,f,s,u=le,c,h=!1,l;function d(m){return isNaN(m=+m)?l:(m=.5+((m=+c(m))-o)*(r*m<r*o?f:s),u(h?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,i=c(t=+t),o=c(e=+e),a=c(n=+n),f=i===o?0:.5/(o-i),s=o===a?0:.5/(a-o),r=o<i?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(h=!!m,d):h},d.interpolator=function(m){return arguments.length?(u=m,d):u};function p(m){return function(g){var y,b,x;return arguments.length?([y,b,x]=g,u=Ra(m,[y,b,x]),d):[u(0),u(.5),u(1)]}}return d.range=p(Ii),d.rangeRound=p(su),d.unknown=function(m){return arguments.length?(l=m,d):l},function(m){return c=m,i=m(t),o=m(e),a=m(n),f=i===o?0:.5/(o-i),s=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function Y0(){var t=Ui(ja()(le));return t.copy=function(){return Xa(t,Y0())},za.apply(t,arguments)}function G0(){var t=M0(ja()).domain([.1,1,10]);return t.copy=function(){return Xa(t,G0()).base(t.base())},za.apply(t,arguments)}function V0(){var t=S0(ja());return t.copy=function(){return Xa(t,V0()).constant(t.constant())},za.apply(t,arguments)}function X0(){var t=k0(ja());return t.copy=function(){return Xa(t,X0()).exponent(t.exponent())},za.apply(t,arguments)}function at(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const j3=at("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Z3=at("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),K3=at("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Q3=at("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),J3=at("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),t6=at("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),e6=at("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),n6=at("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),r6=at("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),i6=at("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),xt=t=>Xy(t[t.length-1]);var j0=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(at);const Z0=xt(j0);var K0=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(at);const Q0=xt(K0);var J0=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(at);const tp=xt(J0);var ep=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(at);const np=xt(ep);var Us=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(at);const sa=xt(Us);var rp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(at);const ip=xt(rp);var Bs=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(at);const ua=xt(Bs);var op=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(at);const ap=xt(op);var fp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(at);const sp=xt(fp);var up=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(at);const cp=xt(up);var lp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(at);const hp=xt(lp);var dp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(at);const pp=xt(dp);var mp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(at);const gp=xt(mp);var bp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(at);const yp=xt(bp);var _p=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(at);const wp=xt(_p);var vp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(at);const xp=xt(vp);var Mp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(at);const $p=xt(Mp);var Sp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(at);const Tp=xt(Sp);var kp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(at);const Ep=xt(kp);var Cp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(at);const Ap=xt(Cp);var Np=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(at);const Dp=xt(Np);var Lp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(at);const Fp=xt(Lp);var Rp=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(at);const Ip=xt(Rp);var Pp=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(at);const Op=xt(Pp);var Up=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(at);const Bp=xt(Up);var zp=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(at);const qp=xt(zp);var Hp=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(at);const Wp=xt(Hp);function Yp(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const Gp=uu(Pe(300,.5,0),Pe(-240,.5,1));var Vp=uu(Pe(-100,.75,.35),Pe(80,1.5,.8)),Xp=uu(Pe(260,.75,.35),Pe(80,1.5,.8)),mo=Pe();function jp(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return mo.h=360*t-100,mo.s=1.5-1.5*e,mo.l=.8-.9*e,mo+""}var go=_n(),o6=Math.PI/3,a6=Math.PI*2/3;function Zp(t){var e;return t=(.5-t)*Math.PI,go.r=255*(e=Math.sin(t))*e,go.g=255*(e=Math.sin(t+o6))*e,go.b=255*(e=Math.sin(t+a6))*e,go+""}function Kp(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Za(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Qp=Za(at("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Jp=Za(at("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),t1=Za(at("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),e1=Za(at("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function lr(t){return function(){return t}}const n1=Math.cos,Mu=Math.min,ca=Math.sin,Dt=Math.sqrt,Ml=1e-12,la=Math.PI,Ka=2*la;function f6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Pd(e)}function s6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function r1(t){this._context=t}r1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Qa(t){return new r1(t)}function u6(t){return t[0]}function c6(t){return t[1]}function l6(t,e){var n=lr(!0),r=null,i=Qa,o=null,a=f6(f);t=typeof t=="function"?t:t===void 0?u6:lr(t),e=typeof e=="function"?e:e===void 0?c6:lr(e);function f(s){var u,c=(s=s6(s)).length,h,l=!1,d;for(r==null&&(o=i(d=a())),u=0;u<=c;++u)!(u<c&&n(h=s[u],u,s))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(h,u,s),+e(h,u,s));if(d)return o=null,d+""||null}return f.x=function(s){return arguments.length?(t=typeof s=="function"?s:lr(+s),f):t},f.y=function(s){return arguments.length?(e=typeof s=="function"?s:lr(+s),f):e},f.defined=function(s){return arguments.length?(n=typeof s=="function"?s:lr(!!s),f):n},f.curve=function(s){return arguments.length?(i=s,r!=null&&(o=i(r)),f):i},f.context=function(s){return arguments.length?(s==null?r=o=null:o=i(r=s),f):r},f}class i1{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function h6(t){return new i1(t,!0)}function d6(t){return new i1(t,!1)}const p6=Dt(3),o1={draw(t,e){const n=Dt(e+Mu(e/28,.75))*.59436,r=n/2,i=r*p6;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},ki={draw(t,e){const n=Dt(e/la);t.moveTo(n,0),t.arc(0,0,n,0,Ka)}},a1={draw(t,e){const n=Dt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},f1=Dt(1/3),m6=f1*2,s1={draw(t,e){const n=Dt(e/m6),r=n*f1;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},u1={draw(t,e){const n=Dt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},c1={draw(t,e){const n=Dt(e-Mu(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},l1={draw(t,e){const n=Dt(e),r=-n/2;t.rect(r,r,n,n)}},h1={draw(t,e){const n=Dt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},g6=.8908130915292852,d1=ca(la/10)/ca(7*la/10),b6=ca(Ka/10)*d1,y6=-n1(Ka/10)*d1,p1={draw(t,e){const n=Dt(e*g6),r=b6*n,i=y6*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=Ka*o/5,f=n1(a),s=ca(a);t.lineTo(s*n,-f*n),t.lineTo(f*r-s*i,s*r+f*i)}t.closePath()}},Of=Dt(3),m1={draw(t,e){const n=-Dt(e/(Of*3));t.moveTo(0,n*2),t.lineTo(-Of*n,-n),t.lineTo(Of*n,-n),t.closePath()}},_6=Dt(3),g1={draw(t,e){const n=Dt(e)*.6824,r=n/2,i=n*_6/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},ae=-.5,fe=Dt(3)/2,zs=1/Dt(12),w6=(zs/2+1)*3,b1={draw(t,e){const n=Dt(e/w6),r=n/2,i=n*zs,o=r,a=n*zs+n,f=-o,s=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(f,s),t.lineTo(ae*r-fe*i,fe*r+ae*i),t.lineTo(ae*o-fe*a,fe*o+ae*a),t.lineTo(ae*f-fe*s,fe*f+ae*s),t.lineTo(ae*r+fe*i,ae*i-fe*r),t.lineTo(ae*o+fe*a,ae*a-fe*o),t.lineTo(ae*f+fe*s,ae*s-fe*f),t.closePath()}},y1={draw(t,e){const n=Dt(e-Mu(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},v6=[ki,a1,s1,l1,p1,m1,b1],x6=[ki,c1,y1,g1,o1,h1,u1];function wn(){}function ha(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ja(t){this._context=t}Ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ha(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ha(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function M6(t){return new Ja(t)}function _1(t){this._context=t}_1.prototype={areaStart:wn,areaEnd:wn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ha(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $6(t){return new _1(t)}function w1(t){this._context=t}w1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ha(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function S6(t){return new w1(t)}function v1(t,e){this._basis=new Ja(t),this._beta=e}v1.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],o=t[n]-r,a=e[n]-i,f=-1,s;++f<=n;)s=f/n,this._basis.point(this._beta*t[f]+(1-this._beta)*(r+s*o),this._beta*e[f]+(1-this._beta)*(i+s*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const T6=function t(e){function n(r){return e===1?new Ja(r):new v1(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function da(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function $u(t,e){this._context=t,this._k=(1-e)/6}$u.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:da(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:da(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const k6=function t(e){function n(r){return new $u(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Su(t,e){this._context=t,this._k=(1-e)/6}Su.prototype={areaStart:wn,areaEnd:wn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:da(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const E6=function t(e){function n(r){return new Su(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Tu(t,e){this._context=t,this._k=(1-e)/6}Tu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:da(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const C6=function t(e){function n(r){return new Tu(r,e)}return n.tension=function(r){return t(+r)},n}(0);function ku(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Ml){var f=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*f-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*f-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>Ml){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function x1(t,e){this._context=t,this._alpha=e}x1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ku(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const A6=function t(e){function n(r){return e?new x1(r,e):new $u(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function M1(t,e){this._context=t,this._alpha=e}M1.prototype={areaStart:wn,areaEnd:wn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ku(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const N6=function t(e){function n(r){return e?new M1(r,e):new Su(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function $1(t,e){this._context=t,this._alpha=e}$1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ku(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const D6=function t(e){function n(r){return e?new $1(r,e):new Tu(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function S1(t){this._context=t}S1.prototype={areaStart:wn,areaEnd:wn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function L6(t){return new S1(t)}function $l(t){return t<0?-1:1}function Sl(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),f=(o*i+a*r)/(r+i);return($l(o)+$l(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(f))||0}function Tl(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Uf(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,f=(o-r)/3;t._context.bezierCurveTo(r+f,i+f*e,o-f,a-f*n,o,a)}function pa(t){this._context=t}pa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Uf(this,this._t0,Tl(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Uf(this,Tl(this,n=Sl(this,t,e)),n);break;default:Uf(this,this._t0,n=Sl(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function T1(t){this._context=new k1(t)}(T1.prototype=Object.create(pa.prototype)).point=function(t,e){pa.prototype.point.call(this,e,t)};function k1(t){this._context=t}k1.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function F6(t){return new pa(t)}function R6(t){return new T1(t)}function E1(t){this._context=t}E1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=kl(t),i=kl(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function kl(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function I6(t){return new E1(t)}function tf(t,e){this._context=t,this._t=e}tf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function P6(t){return new tf(t,.5)}function O6(t){return new tf(t,0)}function U6(t){return new tf(t,1)}function ci(t,e,n){this.k=t,this.x=e,this.y=n}ci.prototype={constructor:ci,scale:function(t){return t===1?this:new ci(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ci(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ci.prototype;function vn(t){return t!=null&&!Number.isNaN(t)}function xe(t,e){return+vn(e)-+vn(t)||Xt(t,e)}function ma(t,e){return+vn(e)-+vn(t)||Li(t,e)}function Eu(t){return t!=null&&`${t}`!=""}function C1(t){return isFinite(t)?t:NaN}function ef(t){return t>0&&isFinite(t)?t:NaN}function Cu(t){return t<0&&isFinite(t)?t:NaN}function B6(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${z6(t.getUTCFullYear())}-${Ge(t.getUTCMonth()+1,2)}-${Ge(t.getUTCDate(),2)}${n||r||i||o?`T${Ge(n,2)}:${Ge(r,2)}${i||o?`:${Ge(i,2)}${o?`.${Ge(o,3)}`:""}`:""}Z`:""}`}function z6(t){return t<0?`-${Ge(-t,6)}`:t>9999?`+${Ge(t,6)}`:Ge(t,4)}function Ge(t,e){return`${t}`.padStart(e,"0")}const q6=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function A1(t,e){return q6.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const gr=1e3,Rn=gr*60,In=Rn*60,tn=In*24,Ee=tn*7,Bn=tn*30,cn=tn*365,Bf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",gr],["5 seconds",5*gr],["15 seconds",15*gr],["30 seconds",30*gr],["minute",Rn],["5 minutes",5*Rn],["15 minutes",15*Rn],["30 minutes",30*Rn],["hour",In],["3 hours",3*In],["6 hours",6*In],["12 hours",12*In],["day",tn],["2 days",2*tn],["week",Ee],["2 weeks",2*Ee],["month",Bn],["3 months",3*Bn],["6 months",6*Bn],["year",cn],["2 years",2*cn],["5 years",5*cn],["10 years",10*cn],["20 years",20*cn],["50 years",50*cn],["100 years",100*cn]],Au=new Map([["second",gr],["minute",Rn],["hour",In],["day",tn],["monday",Ee],["tuesday",Ee],["wednesday",Ee],["thursday",Ee],["friday",Ee],["saturday",Ee],["sunday",Ee],["week",Ee],["month",Bn],["year",cn]]),N1=new Map([["second",Ne],["minute",Wa],["hour",Ya],["day",Jn],["monday",Si],["tuesday",N0],["wednesday",D0],["thursday",jn],["friday",L0],["saturday",F0],["sunday",Dr],["week",Dr],["month",qi],["year",we]]),D1=new Map([["second",Ne],["minute",Bi],["hour",zi],["day",Va],["monday",Ti],["tuesday",R0],["wednesday",I0],["thursday",Zn],["friday",P0],["saturday",O0],["sunday",Lr],["week",Lr],["month",Hi],["year",ve]]),Yi=Symbol("intervalDuration"),nf=Symbol("intervalType");for(const[t,e]of N1)e[Yi]=Au.get(t),e[nf]="time";for(const[t,e]of D1)e[Yi]=Au.get(t),e[nf]="utc";const H6=[["year",ve,"utc"],["year",we,"time"],["month",Hi,"utc"],["month",qi,"time"],["day",Va,"utc",6*Bn],["day",Jn,"time",6*Bn],["hour",zi,"utc",3*tn],["minute",Bi,"utc",6*In],["second",Ne,"utc",30*Rn]];function L1(t,e,n){let r=`${t}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const o=/^(?:(\d+)\s+)/.exec(r);switch(o&&(r=r.slice(o[0].length),i=+o[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let a=e.get(r);if(!a)throw new Error(`unknown interval: ${t}`);if(i>1){if(!a.every)throw new Error(`non-periodic interval: ${r}`);a=a.every(i),a[Yi]=Au.get(r)*i,a[nf]=n}return a}function F1(t){return L1(t,N1,"time")}function Nu(t){return L1(t,D1,"utc")}function El(t,e){if(!(e>1))return;const n=t[Yi];if(!Bf.some(([,i])=>i===n)||n%tn===0&&tn<n&&n<Bn)return;const[r]=Bf[$a(([,i])=>Math.log(i)).center(Bf,Math.log(n*e))];return(t[nf]==="time"?F1:Nu)(r)}function Cl(t,e,n){const r=e==="time"?vu:Wi;if(n==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=W6(n);switch(t){case"millisecond":return hr(r(".%L"),r(":%M:%S"),i);case"second":return hr(r(":%S"),r("%-I:%M"),i);case"minute":return hr(r("%-I:%M"),r("%p"),i);case"hour":return hr(r("%-I %p"),r("%b %-d"),i);case"day":return hr(r("%-d"),r("%b"),i);case"month":return hr(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function W6(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function Y6(t,e){const n=de(P2(t,(r,i)=>Math.abs(i-r)));if(n<1e3)return Cl("millisecond","utc",e);for(const[r,i,o,a]of H6){if(n>a||r==="hour"&&!n)break;if(t.every(f=>i.floor(f)>=f))return Cl(r,o,e)}}function hr(t,e,n){return(r,i,o)=>{const a=t(r,i),f=e(r,i),s=i-Rr(o);return i!==s&&o[s]!==void 0&&f===e(o[s],s)?a:n(a,f)}}const Ei=Object.getPrototypeOf(Uint8Array),G6=Object.prototype.toString,R1=Symbol("reindex");function Rt(t,e,n){const r=typeof e;return r==="string"?Al(t,I1(e),n):r==="function"?Al(t,e,n):r==="number"||e instanceof Date||r==="boolean"?At(t,Gi(e),n):typeof(e==null?void 0:e.transform)=="function"?Nl(e.transform(t),n):V6(Nl(e,n),t==null?void 0:t[R1])}function V6(t,e){return e?Ru(t,e):t}function Al(t,e,n){return At(t,(n==null?void 0:n.prototype)instanceof Ei?X6(e):e,n)}function Nl(t,e){return e===void 0?ee(t):t instanceof e?t:e.prototype instanceof Ei&&!(t instanceof Ei)?e.from(t,Fu):e.from(t)}function X6(t){return(e,n)=>Fu(t(e,n))}const No=[null],I1=t=>e=>e[t],Du={transform:rn},zt={transform:t=>t},j6=()=>1,Z6=()=>!0,Wt=t=>t==null?t:`${t}`,Mt=t=>t==null?t:+t,Lu=t=>t?t[0]:void 0,qs=t=>t?t[1]:void 0,Gi=t=>()=>t;function K6(t){const e=+`${t}`.slice(1)/100;return(n,r)=>$r(n,e,r)}function De(t){return t instanceof Ei?t:At(t,Fu,Float64Array)}function Fu(t){return t==null?NaN:Number(t)}function Q6(t){return At(t,P1)}function P1(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?A1(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function en(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:af(t)?[void 0,t]:[t,void 0]}function Yt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function O1(t,e,n){if(t!=null)return $e(t,e,n)}function $e(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function ee(t){return t==null||t instanceof Array||t instanceof Ei?t:Array.from(t)}function At(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Ci(t,e=Array){return t instanceof e?t.slice():e.from(t)}function J6({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function U1({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function t8(t){return J6(t)||U1(t)||t.interval!==void 0}function $n(t){return(t==null?void 0:t.toString)===G6}function Hs(t){return $n(t)&&(t.type!==void 0||t.domain!==void 0)}function rf(t){return $n(t)&&typeof t.transform!="function"}function Fr(t){return rf(t)&&t.value===void 0&&t.channel===void 0}function e8(t,e,n,r=zt){return e===void 0&&n===void 0?(e=0,n=t===void 0?r:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function of(t,e){return t===void 0&&e===void 0?[Lu,qs]:[t,e]}function B1({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=en(e)),t===void 0&&([t]=en(n)),t}function rn(t){const e=t.length,n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function Ru(t,e){return At(e,n=>t[n],t.constructor)}function n8(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function Pn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function r8(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function ga(t){let e;return[{transform:()=>e,label:nr(t)},n=>e=n]}function We(t){return t==null?[t]:ga(t)}function nr(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function Ws(t,e){return{transform(n){const r=t.transform(n),i=e.transform(n);return Zt(r)||Zt(i)?At(r,(o,a)=>new Date((+r[a]+ +i[a])/2)):At(r,(o,a)=>(+r[a]+ +i[a])/2,Float64Array)},label:t.label}}function z1(t,e){const n=q1(e==null?void 0:e.interval,e==null?void 0:e.type);return n?At(t,n):t}function q1(t,e){const n=Iu(t,e);return n&&(r=>vn(r)?n.floor(r):r)}function Iu(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>fs(Math.ceil(r*n),i*n).map(o=>o/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>fs(Math.ceil(r/n),i/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?F1:Nu)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function Yr(t,e){if(t=Iu(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function i8(t,e){if(t=Yr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function o8(t){return br(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function br(t){return typeof(t==null?void 0:t.range)=="function"}function Vi(t){return t===void 0||rf(t)?t:{value:t}}function a8(t){return t==null?null:{transform:e=>Rt(e,t,Float64Array),label:nr(t)}}function Sn(t){return t&&typeof t[Symbol.iterator]=="function"}function H1(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Dl(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function Zt(t){for(const e of t)if(e!=null)return e instanceof Date}function f8(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&A1(e)}function s8(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function u8(t){for(const e of t)if(e!=null)return typeof e=="number"}function zf(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}const c8=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function af(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||c8.has(t))}function l8(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Gt(t){return t==null||Ai(t)}function Ai(t){return/^\s*none\s*$/i.test(t)}function h8(t){return/^\s*round\s*$/i.test(t)}function W1(t,e){return O1(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function ff(t="middle"){return W1(t,"frameAnchor")}function Rr(t){if(t==null)return;const e=t[0],n=t[t.length-1];return Li(e,n)}function d8(t={},...e){let n=t;for(const r of e)for(const i in r)if(n[i]===void 0){const o=r[i];n===t?n={...n,[i]:o}:n[i]=o}return n}function p8(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[r,n]}))}function Y1(t){return Sn(t)?p8(t):t}const Le=Symbol("position"),on=Symbol("color"),Xi=Symbol("radius"),ji=Symbol("length"),Zi=Symbol("opacity"),sf=Symbol("symbol"),G1=Symbol("projection"),Ct=new Map([["x",Le],["y",Le],["fx",Le],["fy",Le],["r",Xi],["color",on],["opacity",Zi],["symbol",sf],["length",ji],["projection",G1]]);function m8(t){return t===Le||t===G1}function g8(t){return t===Le||t===Xi||t===ji||t===Zi}const b8=Math.sqrt(3),y8=2/b8,_8={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*y8,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},Pu=new Map([["asterisk",o1],["circle",ki],["cross",a1],["diamond",s1],["diamond2",u1],["hexagon",_8],["plus",c1],["square",l1],["square2",h1],["star",p1],["times",y1],["triangle",m1],["triangle2",g1],["wye",b1]]);function Ou(t){return t&&typeof t.draw=="function"}function w8(t){return Ou(t)?!0:typeof t!="string"?!1:Pu.has(t.toLowerCase())}function Uu(t){if(t==null||Ou(t))return t;const e=Pu.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function v8(t){if(t==null||Ou(t))return[void 0,t];if(typeof t=="string"){const e=Pu.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function uf({filter:t,sort:e,reverse:n,transform:r,initializer:i,...o}={},a){if(r===void 0&&(t!=null&&(r=V1(t)),e!=null&&!Fr(e)&&(r=qf(r,Bu(e))),n&&(r=qf(r,X1))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||Fr(e))&&{sort:e},transform:qf(r,a)}}function Ir({filter:t,sort:e,reverse:n,initializer:r,...i}={},o){return r===void 0&&(t!=null&&(r=V1(t)),e!=null&&!Fr(e)&&(r=Hf(r,Bu(e))),n&&(r=Hf(r,X1))),{...i,...(e===null||Fr(e))&&{sort:e},initializer:Hf(r,o)}}function qf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i){return{data:n,facets:r}=t.call(this,n,r,i),e.call(this,ee(n),r,i)}}function Hf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i,...o){let a,f,s,u,c,h;return{data:f=n,facets:s=r,channels:a}=t.call(this,n,r,i,...o),{data:c=f,facets:h=s,channels:u}=e.call(this,f,s,{...i,...a},...o),{data:c,facets:h,channels:{...a,...u}}}}function x8(t,e){return(t.initializer!=null?Ir:uf)(t,e)}function V1(t){return(e,n)=>{const r=Rt(e,t);return{data:e,facets:n.map(i=>i.filter(o=>r[o]))}}}function X1(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function M8(t,{sort:e,...n}={}){return{...(rf(t)&&t.channel!==void 0?Ir:x8)(n,Bu(t)),sort:Fr(e)?e:null}}function Bu(t){return(typeof t=="function"&&t.length!==1?$8:S8)(t)}function $8(t){return(e,n)=>{const r=(i,o)=>t(e[i],e[o]);return{data:e,facets:n.map(i=>i.slice().sort(r))}}}function S8(t){let e,n;({channel:e,value:t,order:n}={...Vi(t)});const r=e==null?void 0:e.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?ma:xe),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=xe;break;case"descending":n=ma;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,a)=>{let f;if(e===void 0)f=Rt(i,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(f=a[e],!f)return{};f=f.value}const s=(u,c)=>n(f[u],f[c]);return{data:i,facets:o.map(u=>u.slice().sort(s))}}}function bo(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function T8(t,e,n=j1){const r=Object.entries(t);return e.title!=null&&t.title===void 0&&r.push(["title",L8]),e.href!=null&&t.href===void 0&&r.push(["href",qu]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?k8(i):n(i,o,e))}function j1(t,e,n,r=Z1){let i;$n(e)&&"reduce"in e&&(i=e.scale,e=e.reduce);const o=r(t,e,n),[a,f]=ga(o.label);let s;return{name:t,output:i===void 0?a:{value:a,scale:i},initialize(u){o.initialize(u),s=f([])},scope(u,c){o.scope(u,c)},reduce(u,c){s.push(o.reduce(u,c))}}}function k8(t){return{name:t,initialize(){},scope(){},reduce(){}}}function Z1(t,e,n,r=zu){const i=r8(t,n),o=r(e,i);let a,f;return{label:nr(o===ba?null:i,o.label),initialize(s){a=i===void 0?s:Rt(s,i),o.scope==="data"&&(f=o.reduceIndex(rn(s),a))},scope(s,u){o.scope===s&&(f=o.reduceIndex(u,a))},reduce(s,u){return o.scope==null?o.reduceIndex(s,a,u):o.reduceIndex(s,a,f,u)}}}function Ll(t,e){return e?yi(Ea(t,n=>e[n]),Lu):[[,t]]}function zu(t,e,n=E8){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&$n(t))return N8(t);if(typeof t=="function")return D8(t);if(/^p\d{2}$/i.test(t))return Ye(K6(t));switch(`${t}`.toLowerCase()){case"first":return qu;case"last":return F8;case"identity":return K1;case"count":return ba;case"distinct":return R8;case"sum":return e==null?ba:I8;case"proportion":return Rl(e,"data");case"proportion-facet":return Rl(e,"facet");case"deviation":return Ye(Ta);case"min":return Ye(Ze);case"min-index":return Ye(D2);case"max":return Ye(de);case"max-index":return Ye(N2);case"mean":return Fl(Aa);case"median":return Fl(as);case"variance":return Ye(tu);case"mode":return Ye(I2)}return n(t)}function E8(t){throw new Error(`invalid reduce: ${t}`)}function C8(t,e){for(const n in e){const r=e[n];if(r!==void 0&&!t.some(i=>i.name===n))return r}}function A8(t,e,n){if(e){const r=e.output.transform(),i=(o,a)=>xe(r[o],r[a]);t.forEach(o=>o.sort(i))}n&&t.forEach(r=>r.reverse())}function N8(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function D8(t){return{reduceIndex(e,n,r){return t(Ru(n,e),r)}}}function Ye(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function Fl(t){return{reduceIndex(e,n){const r=t(e,i=>n[i]);return Zt(n)?new Date(r):r}}}const K1={reduceIndex(t,e){return Ru(e,t)}},qu={reduceIndex(t,e){return e[t[0]]}},L8={reduceIndex(t,e){const r=yi(_r(t,o=>o.length,o=>e[o]),qs),i=r.slice(-5).reverse();if(i.length<r.length){const o=r.slice(0,-4);i[5-1]=[`… ${o.length.toLocaleString("en-US")} more`,yn(o,qs)]}return i.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},F8={reduceIndex(t,e){return e[t[t.length-1]]}},ba={label:"Frequency",reduceIndex(t){return t.length}},R8={label:"Distinct",reduceIndex(t,e){const n=new ka;for(const r of t)n.add(e[r]);return n.size}},I8=Ye(yn);function Rl(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:e,reduceIndex:(n,r,i=1)=>yn(n,o=>r[o])/i}}function Ni(t,{scale:e,type:n,value:r,filter:i,hint:o,label:a=nr(r)},f){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),Q1(f,{scale:e,type:n,value:Rt(t,r),label:a,filter:i,hint:o})}function P8(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Ni(e,r,n)]))}function O8(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:o}])=>{const a=i==null?null:e[i];return[r,a==null?o:At(o,a)]}));return n.channels=t,n}function Q1(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&zf(r,af)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&zf(r,l8)?null:"opacity";break;case"symbol":n!==!0&&zf(r,w8)?(e.scale=null,e.value=At(r,Uu)):e.scale="symbol";break;default:e.scale=Ct.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Ct.has(n))throw new Error(`unknown scale: ${n}`);return e}function U8(t,e,n,r,i){const{order:o,reverse:a,reduce:f=!0,limit:s}=i;for(const u in i){if(!Ct.has(u))continue;let{value:c,order:h=o,reverse:l=a,reduce:d=f,limit:p=s}=Vi(i[u]);const m=c==null?void 0:c.startsWith("-");if(m&&(c=c.slice(1)),h=h===void 0?m!==(c==="width"||c==="height")?tm:J1:q8(h),d==null||d===!1)continue;const g=u==="fx"||u==="fy"?z8(e,r[u]):B8(n,u);if(!g)throw new Error(`missing channel for scale: ${u}`);const y=g.value,[b=0,x=1/0]=Sn(p)?p:p<0?[p]:[0,p];if(c==null)g.domain=()=>{let _=Array.from(new ka(y));return l&&(_=_.reverse()),(b!==0||x!==1/0)&&(_=_.slice(b,x)),_};else{const _=c==="data"?t:c==="height"?Il(n,"y1","y2"):c==="width"?Il(n,"x1","x2"):Ys(n,c,c==="y"?"y2":c==="x"?"x2":void 0),v=zu(d===!0?"max":d,_);g.domain=()=>{let w=S2(rn(y),M=>v.reduceIndex(M,_),M=>y[M]);return h&&w.sort(h),l&&w.reverse(),(b!==0||x!==1/0)&&(w=w.slice(b,x)),w.map(Lu)}}}}function B8(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function z8(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let o=0;o<n.length;++o){const a=r[n[o][0]];for(const f of t[o])i[f]=a}return e}function Il(t,e,n){const r=Ys(t,e),i=Ys(t,n);return At(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function Ys(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function q8(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return J1;case"descending":return tm}throw new Error(`invalid order: ${t}`)}function J1([t,e],[n,r]){return xe(e,r)||xe(t,n)}function tm([t,e],[n,r]){return ma(e,r)||xe(t,n)}function Pl(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function H8(t){let e,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,o)=>i!==r[o]))&&(n=r,e=t(...r)),e)}const W8=H8(t=>new Intl.NumberFormat(t));function Y8(t="en-US"){const e=W8(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function G8(t){return B6(t,"Invalid Date")}function V8(t="en-US"){const e=Y8(t);return n=>(n instanceof Date?G8:typeof n=="number"?e:Wt)(n)}const Kn=V8();let Gs=0,Vs;function X8(){const t=Gs;return Gs=0,Vs=void 0,t}function bn(t){t!==Vs&&(Vs=t,console.warn(t),++Gs)}const Vt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let j8=0;function Ol(){return`plot-clip-${++j8}`}function Z8(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:f,fillOpacity:s,stroke:u,strokeWidth:c,strokeOpacity:h,strokeLinejoin:l,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:g,opacity:y,mixBlendMode:b,imageFilter:x,paintOrder:_,pointerEvents:v,shapeRendering:w,channels:M},{ariaLabel:E,fill:C="currentColor",fillOpacity:D,stroke:T="none",strokeOpacity:F,strokeWidth:R,strokeLinecap:q,strokeLinejoin:S,strokeMiterlimit:U,paintOrder:P}){C===null&&(f=null,s=null),T===null&&(u=null,h=null),Gt(C)?!Gt(T)&&(!Gt(f)||M!=null&&M.fill)&&(T="none"):Gt(T)&&(!Gt(u)||M!=null&&M.stroke)&&(C="none");const[Y,V]=en(f,C),[H,L]=Yt(s,D),[z,G]=en(u,T),[J,Q]=Yt(h,F),[j,I]=Yt(y);Ai(G)||(c===void 0&&(c=R),d===void 0&&(d=q),l===void 0&&(l=S),p===void 0&&!h8(l)&&(p=U),!Ai(V)&&_===void 0&&(_=P));const[B,k]=Yt(c);return C!==null&&(t.fill=Ot(V,"currentColor"),t.fillOpacity=ei(L,1)),T!==null&&(t.stroke=Ot(G,"none"),t.strokeWidth=ei(k,1),t.strokeOpacity=ei(Q,1),t.strokeLinejoin=Ot(l,"miter"),t.strokeLinecap=Ot(d,"butt"),t.strokeMiterlimit=ei(p,4),t.strokeDasharray=Ot(m,"none"),t.strokeDashoffset=Ot(g,"0")),t.target=Wt(a),t.ariaLabel=Wt(E),t.ariaDescription=Wt(i),t.ariaHidden=Wt(o),t.opacity=ei(I,1),t.mixBlendMode=Ot(b,"normal"),t.imageFilter=Ot(x,"none"),t.paintOrder=Ot(_,"normal"),t.pointerEvents=Ot(v,"auto"),t.shapeRendering=Ot(w,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:Y,scale:"auto",optional:!0},fillOpacity:{value:H,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:J,scale:"auto",optional:!0},strokeWidth:{value:B,optional:!0},opacity:{value:j,scale:"auto",optional:!0}}}function K8(t,e){e&&t.filter(n=>Eu(e[n])).append("title").call(J8,e)}function Q8(t,e){e&&t.filter(([n])=>Eu(e[n])).append("title").call(t5,e)}function J8(t,e){e&&t.text(n=>Kn(e[n]))}function t5(t,e){e&&t.text(([n])=>Kn(e[n]))}function an(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:s,strokeWidth:u,opacity:c,href:h}){r&&nt(t,"aria-label",l=>r[l]),o&&nt(t,"fill",l=>o[l]),a&&nt(t,"fill-opacity",l=>a[l]),f&&nt(t,"stroke",l=>f[l]),s&&nt(t,"stroke-opacity",l=>s[l]),u&&nt(t,"stroke-width",l=>u[l]),c&&nt(t,"opacity",l=>c[l]),h&&nm(t,l=>h[l],e),n||K8(t,i)}function e5(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:s,strokeWidth:u,opacity:c,href:h}){r&&nt(t,"aria-label",([l])=>r[l]),o&&nt(t,"fill",([l])=>o[l]),a&&nt(t,"fill-opacity",([l])=>a[l]),f&&nt(t,"stroke",([l])=>f[l]),s&&nt(t,"stroke-opacity",([l])=>s[l]),u&&nt(t,"stroke-width",([l])=>u[l]),c&&nt(t,"opacity",([l])=>c[l]),h&&nm(t,([l])=>h[l],e),n||Q8(t,i)}function n5({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:f,href:s},{tip:u}){return[t,u?void 0:e,n,r,i,o,a,f,s].filter(c=>c!==void 0)}function r5(t,e,n){const r=Ea(t,i=>e[i]);return n===void 0&&r.size>1+t.length>>1&&bn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*i5(t,e,n,r){const{z:i}=n,{z:o}=r,a=n5(r,n),f=[...e,...a];for(const s of o?r5(t,o,i):[t]){let u,c;t:for(const h of s){for(const l of f)if(!vn(l[h])){c&&c.push(-1);continue t}if(u===void 0){c&&(yield c),u=a.map(l=>Pn(l[h])),c=[h];continue}c.push(h);for(let l=0;l<a.length;++l)if(Pn(a[l][h])!==u[l]){yield c,u=a.map(p=>Pn(p[h])),c=[h];continue t}}c&&(yield c)}}function em(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=$e(t,"clip",["frame","sphere"])),t}function o5(t,e,n,r){let i;const{clip:o=r.clip}=e;switch(o){case"frame":{const{width:a,height:f,marginLeft:s,marginRight:u,marginTop:c,marginBottom:h}=n,l=Ol();i=`url(#${l})`,t=Pt("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",l).append("rect").attr("x",s).attr("y",c).attr("width",a-u-s).attr("height",f-c-h)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=r;if(!a)throw new Error('the "sphere" clip option requires a projection');const f=Ol();i=`url(#${f})`,t.append("clipPath").attr("id",f).append("path").attr("d",Oa(a)({type:"Sphere"}));break}}nt(t,"aria-label",e.ariaLabel),nt(t,"aria-description",e.ariaDescription),nt(t,"aria-hidden",e.ariaHidden),nt(t,"clip-path",i)}function Se(t,e,n,r){o5(t,e,n,r),nt(t,"fill",e.fill),nt(t,"fill-opacity",e.fillOpacity),nt(t,"stroke",e.stroke),nt(t,"stroke-width",e.strokeWidth),nt(t,"stroke-opacity",e.strokeOpacity),nt(t,"stroke-linejoin",e.strokeLinejoin),nt(t,"stroke-linecap",e.strokeLinecap),nt(t,"stroke-miterlimit",e.strokeMiterlimit),nt(t,"stroke-dasharray",e.strokeDasharray),nt(t,"stroke-dashoffset",e.strokeDashoffset),nt(t,"shape-rendering",e.shapeRendering),nt(t,"filter",e.imageFilter),nt(t,"paint-order",e.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=e;nt(t,"pointer-events",i)}function Te(t,e){a5(t,"mix-blend-mode",e.mixBlendMode),nt(t,"opacity",e.opacity)}function nm(t,e,n){t.each(function(r){const i=e(r);if(i!=null){const o=this.ownerDocument.createElementNS(Sr.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Sr.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function nt(t,e,n){n!=null&&t.attr(e,n)}function a5(t,e,n){n!=null&&t.style(e,n)}function me(t,e,{x:n,y:r},i=Vt,o=Vt){i+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&t.attr("transform",`translate(${i},${o})`)}function Ot(t,e){if((t=Wt(t))!==e)return t}function ei(t,e){if((t=Mt(t))!==e)return t}const f5=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Hu(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!f5.test(t))throw new Error(`invalid class name: ${t}`);return t}function Wu(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function Ki({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-i:(a+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-o:(r+n-o)/2]}function Yu(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:em(n)}}function Pt(t,{document:e}){return hi(Da(t).call(e.documentElement))}const rm=Math.PI,ze=2*rm,Ul=.618;function s5({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let f,s,u="frame";if($n(t)){let v;if({type:t,domain:s,inset:v,insetTop:n=v!==void 0?v:n,insetRight:r=v!==void 0?v:r,insetBottom:i=v!==void 0?v:i,insetLeft:o=v!==void 0?v:o,clip:u=u,...f}=t,t==null)return}typeof t!="function"&&({type:t}=im(t));const{width:c,height:h,marginLeft:l,marginRight:d,marginTop:p,marginBottom:m}=a,g=c-l-d-o-r,y=h-p-m-n-i;if(t=t==null?void 0:t({width:g,height:y,clip:u,...f}),t==null)return;u=u5(u,l,p,c-d,h-m);let b=l+o,x=p+n,_;if(s!=null){const[[v,w],[M,E]]=Oa(t).bounds(s),C=Math.min(g/(M-v),y/(E-w));C>0?(b-=(C*(v+M)-g)/2,x-=(C*(w+E)-y)/2,_=Fs({point(D,T){this.stream.point(D*C+b,T*C+x)}})):bn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return _??(_=b===0&&x===0?om():Fs({point(v,w){this.stream.point(v+b,w+x)}})),{stream:v=>t.stream(_.stream(u(v)))}}function im(t){switch(`${t}`.toLowerCase()){case"albers-usa":return ge(dv,.7463,.4673);case"albers":return yo(u0,.7463,.4673);case"azimuthal-equal-area":return ge(pv,4,4);case"azimuthal-equidistant":return ge(mv,ze,ze);case"conic-conformal":return yo(yv,ze,ze);case"conic-equal-area":return yo(ia,6.1702,2.9781);case"conic-equidistant":return yo(vv,7.312,3.6282);case"equal-earth":return ge(Mv,5.4133,2.6347);case"equirectangular":return ge(_v,ze,rm);case"gnomonic":return ge($v,3.4641,3.4641);case"identity":return{type:om};case"reflect-y":return{type:c5};case"mercator":return ge(gv,ze,ze);case"orthographic":return ge(Sv,2,2);case"stereographic":return ge(Tv,2,2);case"transverse-mercator":return ge(kv,ze,ze);default:throw new Error(`unknown projection type: ${t}`)}}function u5(t,e,n,r,i){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return Vd(e,n,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function ge(t,e,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:f})=>{var u,c,h;const s=t();return a!=null&&((u=s.precision)==null||u.call(s,a)),o!=null&&((c=s.rotate)==null||c.call(s,o)),typeof f=="number"&&((h=s.clipAngle)==null||h.call(s,f)),s.scale(Math.min(r/e,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/e}}function yo(t,e,n){const{type:r,aspectRatio:i}=ge(t,e,n);return{type:o=>{const{parallels:a,domain:f,width:s,height:u}=o,c=r(o);return a!=null&&(c.parallels(a),f===void 0&&c.fitSize([s,u],{type:"Sphere"})),c},aspectRatio:i}}const om=Gi({stream:t=>t}),c5=Gi(Fs({point(t,e){this.stream.point(t,-e)}}));function l5(t,e,n,r){const i=n[t],o=n[e],a=i.length,f=n[t]=new Float64Array(a).fill(NaN),s=n[e]=new Float64Array(a).fill(NaN);let u;const c=r.stream({point(h,l){f[u]=h,s[u]=l}});for(u=0;u<a;++u)c.point(i[u],o[u])}function h5({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:($n(t)&&(t=t.type),t!=null)}function d5(t){if(typeof(t==null?void 0:t.stream)=="function")return Ul;if($n(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=im(t);if(e)return e}return Ul}}function p5(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},o={point(a,f){e.push(a),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)Dn(a,o);return[r,i]}const am=new Map([["accent",Z3],["category10",j3],["dark2",K3],["paired",Q3],["pastel1",J3],["pastel2",t6],["set1",e6],["set2",n6],["set3",r6],["tableau10",i6]]);function m5(t){return t!=null&&am.has(`${t}`.toLowerCase())}const Bl=new Map([...am,["brbg",qe(j0,Z0)],["prgn",qe(K0,Q0)],["piyg",qe(J0,tp)],["puor",qe(ep,np)],["rdbu",qe(Us,sa)],["rdgy",qe(rp,ip)],["rdylbu",qe(Bs,ua)],["rdylgn",qe(op,ap)],["spectral",qe(fp,sp)],["burd",zl(Us,sa)],["buylrd",zl(Bs,ua)],["blues",Lt(Lp,Fp)],["greens",Lt(Rp,Ip)],["greys",Lt(Pp,Op)],["oranges",Lt(Hp,Wp)],["purples",Lt(Up,Bp)],["reds",Lt(zp,qp)],["turbo",He(Kp)],["viridis",He(Qp)],["magma",He(Jp)],["inferno",He(t1)],["plasma",He(e1)],["cividis",He(Yp)],["cubehelix",He(Gp)],["warm",He(Vp)],["cool",He(Xp)],["bugn",Lt(up,cp)],["bupu",Lt(lp,hp)],["gnbu",Lt(dp,pp)],["orrd",Lt(mp,gp)],["pubu",Lt(_p,wp)],["pubugn",Lt(bp,yp)],["purd",Lt(vp,xp)],["rdpu",Lt(Mp,$p)],["ylgn",Lt(kp,Ep)],["ylgnbu",Lt(Sp,Tp)],["ylorbr",Lt(Cp,Ap)],["ylorrd",Lt(Np,Dp)],["rainbow",ql(jp)],["sinebow",ql(Zp)]]);function Lt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?_e(e,n):t[n])}function qe(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?_e(e,n):t[n])}function zl(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?_e(r=>e(1-r),n):t[n].slice().reverse())}function He(t){return({length:e})=>_e(t,Math.max(2,Math.floor(e)))}function ql(t){return({length:e})=>_e(t,Math.floor(e)+1).slice(0,-1)}function fm(t){const e=`${t}`.toLowerCase();if(!Bl.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Bl.get(e)}function cf(t,e){const n=fm(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function g5(t,e="greys"){const n=new Set,[r,i]=cf(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const Hl=new Map([["brbg",Z0],["prgn",Q0],["piyg",tp],["puor",np],["rdbu",sa],["rdgy",ip],["rdylbu",ua],["rdylgn",ap],["spectral",sp],["burd",t=>sa(1-t)],["buylrd",t=>ua(1-t)],["blues",Fp],["greens",Ip],["greys",Op],["purples",Bp],["reds",qp],["oranges",Wp],["turbo",Kp],["viridis",Qp],["magma",Jp],["inferno",t1],["plasma",e1],["cividis",Yp],["cubehelix",Gp],["warm",Vp],["cool",Xp],["bugn",cp],["bupu",hp],["gnbu",pp],["orrd",gp],["pubugn",yp],["pubu",wp],["purd",xp],["rdpu",$p],["ylgnbu",Tp],["ylgn",Ep],["ylorbr",Ap],["ylorrd",Dp],["rainbow",jp],["sinebow",Zp]]);function Gu(t){const e=`${t}`.toLowerCase();if(!Hl.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Hl.get(e)}const b5=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function y5(t){return t!=null&&b5.has(`${t}`.toLowerCase())}const sm=t=>e=>t(1-e),Wf=[0,1],Wl=new Map([["number",Ut],["rgb",Gn],["hsl",f_],["hcl",c_],["lab",s_]]);function um(t){const e=`${t}`.toLowerCase();if(!Wl.has(e))throw new Error(`unknown interpolator: ${e}`);return Wl.get(e)}function Qi(t,e,n,{type:r,nice:i,clamp:o,zero:a,domain:f=lm(t,n),unknown:s,round:u,scheme:c,interval:h,range:l=Ct.get(t)===Xi?C5(n,f):Ct.get(t)===ji?A5(n,f):Ct.get(t)===Zi?Wf:void 0,interpolate:d=Ct.get(t)===on?c==null&&l!==void 0?Gn:Gu(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):u?su:Ut,reverse:p}){if(h=Yr(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=um(d)),p=!!p,l!==void 0){const m=(f=ee(f)).length,g=(l=ee(l)).length;if(m!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ra(d,l),l=void 0}}if(d.length===1?(p&&(d=sm(d),p=!1),l===void 0&&(l=Float64Array.from(f,(m,g)=>g/(f.length-1)),l.length===2&&(l=Wf)),e.interpolate((l===Wf?Gi:Xu)(d))):e.interpolate(d),a){const[m,g]=se(f);(m>0||g<0)&&(f=Ci(f),Rr(f)!==Math.sign(m)?f[f.length-1]=0:f[0]=0)}return p&&(f=Bo(f)),e.domain(f).unknown(s),i&&(e.nice(_5(i,r)),f=e.domain()),l!==void 0&&e.range(l),o&&e.clamp(o),{type:r,domain:f,range:l,scale:e,interpolate:d,interval:h}}function _5(t,e){return t===!0?void 0:typeof t=="number"?t:i8(t,e)}function w5(t,e,n){return Qi(t,_u(),e,n)}function v5(t,e,n){return cm(t,e,{...n,exponent:.5})}function cm(t,e,{exponent:n=1,...r}){return Qi(t,E0().exponent(n),e,{...r,type:"pow"})}function x5(t,e,{base:n=10,domain:r=N5(e),...i}){return Qi(t,$0().base(n),e,{...i,domain:r})}function M5(t,e,{constant:n=1,...r}){return Qi(t,T0().constant(n),e,r)}function $5(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:a=D5(e),unknown:f,interpolate:s,reverse:u}){return n===void 0&&(n=s!==void 0?_e(s,i):Ct.get(t)===on?cf(o,i):void 0),a.length>0&&(a=C0(a,n===void 0?{length:i}:n).quantiles()),Vu(t,e,{domain:a,range:n,reverse:u,unknown:f})}function S5(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=lm(t,e),unknown:a,interpolate:f,reverse:s}){const[u,c]=se(o);let h;return n===void 0?(h=_i(u,c,r),h[0]<=u&&h.splice(0,1),h[h.length-1]>=c&&h.pop(),r=h.length+1,n=f!==void 0?_e(f,r):Ct.get(t)===on?cf(i,r):void 0):(h=_e(Ut(u,c),r+1).slice(1,-1),u instanceof Date&&(h=h.map(l=>new Date(l)))),Rr(ee(o))<0&&h.reverse(),Vu(t,e,{domain:h,range:n,reverse:s,unknown:a})}function Vu(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?_e(o,n.length+1):Ct.get(t)===on?cf(i,n.length+1):void 0,reverse:f}){n=ee(n);const s=Rr(n);if(!isNaN(s)&&!T5(n,s))throw new Error(`the ${t} scale has a non-monotonic domain`);return f&&(a=Bo(a)),{type:"threshold",scale:A0(s<0?Bo(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function T5(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const o=Li(i,i=t[n]);if(o!==0&&o!==e)return!1}return!0}function k5(t){return{type:"identity",scale:g8(Ct.get(t))?v0():e=>e}}function Di(t,e=C1){return t.length?[Ze(t,({value:n})=>n===void 0?n:Ze(n,e)),de(t,({value:n})=>n===void 0?n:de(n,e))]:[0,1]}function lm(t,e){const n=Ct.get(t);return(n===Xi||n===Zi||n===ji?E5:Di)(e)}function E5(t){return[0,t.length?de(t,({value:e})=>e===void 0?e:de(e,C1)):1]}function C5(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=$r(t,.5,({value:a})=>a===void 0?NaN:$r(a,.25,ef)),i=e.map(a=>3*Math.sqrt(a/r)),o=30/de(i);return o<1?i.map(a=>a*o):i}function A5(t,e){const n=as(t,({value:o})=>o===void 0?NaN:as(o,Math.abs)),r=e.map(o=>12*o/n),i=60/de(r);return i<1?r.map(o=>o*i):r}function N5(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Di(t,ef);if(n<0)return Di(t,Cu)}return[1,10]}function D5(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function Xu(t){return(e,n)=>r=>t(e+r*(n-e))}function lf(t,e,n,r,{type:i,nice:o,clamp:a,domain:f=Di(r),unknown:s,pivot:u=0,scheme:c,range:h,symmetric:l=!0,interpolate:d=Ct.get(t)===on?c==null&&h!==void 0?Gn:Gu(c!==void 0?c:"rdbu"):Ut,reverse:p}){u=+u,f=ee(f);let[m,g]=f;if(f.length>2&&bn(`Warning: the diverging ${t} scale domain contains extra elements.`),Li(m,g)<0&&([m,g]=[g,m],p=!p),m=Math.min(m,u),g=Math.max(g,u),typeof d!="function"&&(d=um(d)),h!==void 0&&(d=d.length===1?Xu(d)(...h):Ra(d,h)),p&&(d=sm(d)),l){const y=n.apply(u),b=y-n.apply(m),x=n.apply(g)-y;b<x?m=n.invert(y-x):b>x&&(g=n.invert(y+b))}return e.domain([m,u,g]).unknown(s).interpolator(d),a&&e.clamp(a),o&&e.nice(o),{type:i,domain:[m,g],pivot:u,interpolate:d,scale:e}}function L5(t,e,n){return lf(t,Y0(),P5,e,n)}function F5(t,e,n){return hm(t,e,{...n,exponent:.5})}function hm(t,e,{exponent:n=1,...r}){return lf(t,X0().exponent(n=+n),B5(n),e,{...r,type:"diverging-pow"})}function R5(t,e,{base:n=10,pivot:r=1,domain:i=Di(e,r<0?Cu:ef),...o}){return lf(t,G0().base(n=+n),O5,e,{domain:i,pivot:r,...o})}function I5(t,e,{constant:n=1,...r}){return lf(t,V0().constant(n=+n),z5(n),e,r)}const P5={apply(t){return t},invert(t){return t}},O5={apply:Math.log,invert:Math.exp},U5={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function B5(t){return t===.5?U5:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function z5(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function dm(t,e,n,r){return Qi(t,e,n,r)}function q5(t,e,n){return dm(t,V3(),e,n)}function H5(t,e,n){return dm(t,X3(),e,n)}const Ji=Symbol("ordinal");function pm(t,e,n,{type:r,interval:i,domain:o,range:a,reverse:f,hint:s}){return i=Yr(i,r),o===void 0&&(o=gm(n,i,t)),(r==="categorical"||r===Ji)&&(r="ordinal"),f&&(o=Bo(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:r,domain:o,range:a,scale:e,hint:s,interval:i}}function W5(t,e,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:f,...s}){r=Yr(r,n),i===void 0&&(i=gm(e,r,t));let u;if(Ct.get(t)===sf)u=V5(e),o=o===void 0?X5(u):At(o,Uu);else if(Ct.get(t)===on&&(o===void 0&&(n==="ordinal"||n===Ji)&&(o=g5(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"tableau10"),a!==void 0))if(o!==void 0){const c=Gu(a),h=o[0],l=o[1]-o[0];o=({length:d})=>_e(p=>c(h+l*p),d)}else o=fm(a);if(f===Is)throw new Error(`implicit unknown on ${t} scale is not supported`);return pm(t,yu().unknown(f),e,{...s,type:n,domain:i,range:o,hint:u})}function Y5(t,e,{align:n=.5,padding:r=.5,...i}){return mm(Ev().align(n).padding(r),e,i,t)}function G5(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=t==="fx"||t==="fy"?0:r,...a}){return mm(qa().align(n).paddingInner(i).paddingOuter(o),e,a,t)}function mm(t,e,n,r){let{round:i}=n;return i!==void 0&&t.round(i=!!i),t=pm(r,t,e,n),t.round=i,t}function gm(t,e,n){const r=new ka;for(const{value:i,domain:o}of t){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(e!==void 0){const[i,o]=se(r).map(e.floor,e);return e.range(i,e.offset(o))}if(r.size>1e4&&Ct.get(n)===Le)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return yi(r,xe)}function Yl(t,e){let n;for(const{hint:r}of t){const i=r==null?void 0:r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function V5(t){return{fill:Yl(t,"fill"),stroke:Yl(t,"stroke")}}function X5(t){return Gt(t.fill)?x6:v6}function Xs(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:f,nice:s,clamp:u,zero:c,align:h,padding:l,projection:d,facet:{label:p=e}={},...m}={}){const g={};for(const[y,b]of t){const x=m[y],_=Q5(y,b,{round:Ct.get(y)===Le?f:void 0,nice:s,clamp:u,zero:c,align:h,padding:l,projection:d,...x});if(_){let{label:v=y==="fx"||y==="fy"?p:e,percent:w,transform:M,inset:E,insetTop:C=E!==void 0?E:y==="y"?r:0,insetRight:D=E!==void 0?E:y==="x"?i:0,insetBottom:T=E!==void 0?E:y==="y"?o:0,insetLeft:F=E!==void 0?E:y==="x"?a:0}=x||{};if(M==null)M=void 0;else if(typeof M!="function")throw new Error("invalid scale transform; not a function");_.percent=!!w,_.label=v===void 0?Z5(b,_):v,_.transform=M,y==="x"||y==="fx"?(_.insetLeft=+F,_.insetRight=+D):(y==="y"||y==="fy")&&(_.insetTop=+C,_.insetBottom=+T),g[y]=_}}return g}function Gl(t){const e={},n={scales:e};for(const[r,i]of Object.entries(t)){const{scale:o,type:a,interval:f,label:s}=i;e[r]=r4(i),n[r]=o,o.type=a,f!=null&&(o.interval=f),s!=null&&(o.label=s)}return n}function j5(t,e){const{x:n,y:r,fx:i,fy:o}=t,a=i||o?ju(e):e;i&&Vl(i,a),o&&Xl(o,a);const f=i||o?bm(t,e):e;n&&Vl(n,f),r&&Xl(r,f)}function Z5(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!rr(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function ju(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:f,marginRight:s,marginBottom:u,marginLeft:c}}=t;return{marginTop:Math.max(e,f),marginRight:Math.max(n,s),marginBottom:Math.max(r,u),marginLeft:Math.max(i,c),width:o,height:a}}function bm({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:s}=ju(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+i:f,height:e?e.scale.bandwidth()+r+o:s,facet:{width:f,height:s}}}function Vl(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:o=0,marginRight:a=0}=e,f=o+n,s=i-a-r;t.range=[f,Math.max(f,s)],rr(t)||(t.range=_m(t)),t.scale.range(t.range)}ym(t)}function Xl(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:o=0,marginBottom:a=0}=e,f=o+n,s=i-a-r;t.range=[Math.max(f,s),f],rr(t)?t.range.reverse():t.range=_m(t),t.scale.range(t.range)}ym(t)}function ym(t){t.round===void 0&&t4(t)&&K5(t)<=30&&t.scale.round(!0)}function K5({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-i,f=Math.abs(r-n)/Math.max(1,a+o*2);return(f-Math.floor(f))*a}function _m(t){const e=t.scale.domain().length+wm(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(i,o)=>n+o/(e-1)*(r-n))}function Q5(t,e=[],n={}){const r=J5(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&rr({type:r})){const i=e.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Zt)?bn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${dr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${dr(r)}".`):i.some(f8)?bn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${dr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${dr(r)}".`):i.some(s8)&&bn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${dr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${dr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=_o(e,n,De);break;case"identity":switch(Ct.get(t)){case Le:n=_o(e,n,De);break;case sf:n=_o(e,n,e4);break}break;case"utc":case"time":n=_o(e,n,Q6);break}switch(r){case"diverging":return L5(t,e,n);case"diverging-sqrt":return F5(t,e,n);case"diverging-pow":return hm(t,e,n);case"diverging-log":return R5(t,e,n);case"diverging-symlog":return I5(t,e,n);case"categorical":case"ordinal":case Ji:return W5(t,e,n);case"cyclical":case"sequential":case"linear":return w5(t,e,n);case"sqrt":return v5(t,e,n);case"threshold":return Vu(t,e,n);case"quantile":return $5(t,e,n);case"quantize":return S5(t,e,n);case"pow":return cm(t,e,n);case"log":return x5(t,e,n);case"symlog":return M5(t,e,n);case"utc":return H5(t,e,n);case"time":return q5(t,e,n);case"point":return Y5(t,e,n);case"band":return G5(t,e,n);case"identity":return k5(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function dr(t){return typeof t=="symbol"?t.description:t}const jl={toString:()=>"projection"};function J5(t,e,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:f}){if(t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&f!=null&&(n=jl);for(const{type:u}of e)if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}if(n===jl)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:u})=>u!==void 0))return;const s=Ct.get(t);if(s===Xi)return"sqrt";if(s===Zi||s===ji)return"linear";if(s===sf)return"ordinal";if((r||i||[]).length>2)return Yf(s);if(r!==void 0){if(Dl(r))return Yf(s);if(Zt(r))return"utc"}else{const u=e.map(({value:c})=>c).filter(c=>c!==void 0);if(u.some(Dl))return Yf(s);if(u.some(Zt))return"utc"}if(s===on){if(a!=null||y5(o))return"diverging";if(m5(o))return"categorical"}return"linear"}function Yf(t){switch(t){case Le:return"point";case on:return Ji;default:return"ordinal"}}function rr({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Ji}function wm({type:t}){return t==="threshold"}function t4({type:t}){return t==="point"||t==="band"}function Pr(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function _o(t,{domain:e,...n},r){for(const i of t)i.value!==void 0&&(i.value=r(i.value));return{domain:e===void 0?e:r(e),...n}}function e4(t){return At(t,Uu)}function n4(t){return e=>{if(!Ct.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function r4({scale:t,type:e,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:f,pivot:s}){if(e==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const u=t.unknown?t.unknown():void 0;return{type:e,domain:Ci(n),...r!==void 0&&{range:Ci(r)},...a!==void 0&&{transform:a},...f&&{percent:f},...u!==void 0&&{unknown:u},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:c=>t(c),...t.invert&&{invert:c=>t.invert(c)}}}function i4(t,e,n={}){let r=.5-Vt,i=.5+Vt,o=.5+Vt,a=.5-Vt;for(const{marginTop:m,marginRight:g,marginBottom:y,marginLeft:b}of e)m>r&&(r=m),g>i&&(i=g),y>o&&(o=y),b>a&&(a=b);let{margin:f,marginTop:s=f!==void 0?f:r,marginRight:u=f!==void 0?f:i,marginBottom:c=f!==void 0?f:o,marginLeft:h=f!==void 0?f:a}=n;s=+s,u=+u,c=+c,h=+h;let{width:l=640,height:d=o4(t,n,{width:l,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,s-r+c-o)}=n;l=+l,d=+d;const p={width:l,height:d,marginTop:s,marginRight:u,marginBottom:c,marginLeft:h};if(t.fx||t.fy){let{margin:m,marginTop:g=m!==void 0?m:s,marginRight:y=m!==void 0?m:u,marginBottom:b=m!==void 0?m:c,marginLeft:x=m!==void 0?m:h}=n.facet??{};g=+g,y=+y,b=+b,x=+x,p.facet={marginTop:g,marginRight:y,marginBottom:b,marginLeft:x}}return p}function o4({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:f,marginRightDefault:s,marginBottomDefault:u,marginLeftDefault:c}){const h=n?n.scale.domain().length:1,l=d5(i);if(l){const p=r?r.scale.domain().length:1,m=(1.1*h-.1)/(1.1*p-.1)*l,g=Math.max(.1,Math.min(10,m));return Math.round((a-c-s)*g+f+u)}const d=e?rr(e)?e.scale.domain().length:Math.max(7,17/h):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=Zl("y",e)/(Zl("x",t)*o),m=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,y=m*(a-c-s)-t.insetLeft-t.insetRight;return(p*y+e.insetTop+e.insetBottom)/g+f+u}return!!(e||n)*Math.max(1,Math.min(60,d*h))*20+!!r*30+60}function Zl(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const f=e.scale.exponent();i=s=>Math.pow(s,f);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=se(r);return Math.abs(i(a)-i(o))}function a4(t,e){const{fx:n,fy:r}=Xs(t,e),i=n==null?void 0:n.scale.domain(),o=r==null?void 0:r.scale.domain();return i&&o?x2(i,o).map(([a,f],s)=>({x:a,y:f,i:s})):i?i.map((a,f)=>({x:a,i:f})):o?o.map((a,f)=>({y:a,i:f})):void 0}function f4(t,{x:e,y:n}){return e&&(e=js(e)),n&&(n=js(n)),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,i)=>e.get(r.x)-e.get(i.x)||n.get(r.y)-n.get(i.y):e?(r,i)=>e.get(r.x)-e.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Zu(t,{fx:e,fy:n}){const r=rn(t),i=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?_r(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):e?_r(r,a=>(a.fx=i[a[0]],a),a=>i[a]):_r(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function s4(t,e,{marginTop:n,marginLeft:r}){return t&&e?({x:i,y:o})=>`translate(${t(i)-r},${e(o)-n})`:t?({x:i})=>`translate(${t(i)-r},0)`:({y:i})=>`translate(0,${e(i)-n})`}function u4(t){const e=[],n=new Uint32Array(yn(t,r=>r.length));for(const r of t){let i=0;for(const o of t)r!==o&&(n.set(o,i),i+=o.length);e.push(n.slice(0,i))}return e}const c4=new Map([["top",Gf],["right",jf],["bottom",Vf],["left",Xf],["top-left",wo(Gf,Xf)],["top-right",wo(Gf,jf)],["bottom-left",wo(Vf,Xf)],["bottom-right",wo(Vf,jf)],["top-empty",d4],["right-empty",g4],["bottom-empty",p4],["left-empty",m4],["empty",b4]]);function l4(t){if(t==null)return null;const e=c4.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Kl=new WeakMap;function js(t){let e=Kl.get(t);return e||Kl.set(t,e=new Hn(At(t,(n,r)=>[n,r]))),e}function Tn(t,e){return js(t).get(e)}function h4(t,e,n){return e=Pn(e),n=Pn(n),t.find(r=>Object.is(Pn(r.x),e)&&Object.is(Pn(r.y),n))}function hf(t,e,n){var r;return(r=h4(t,e,n))==null?void 0:r.empty}function Gf(t,{y:e},{y:n}){return e?Tn(e,n)===0:!0}function Vf(t,{y:e},{y:n}){return e?Tn(e,n)===e.length-1:!0}function Xf(t,{x:e},{x:n}){return e?Tn(e,n)===0:!0}function jf(t,{x:e},{x:n}){return e?Tn(e,n)===e.length-1:!0}function d4(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=Tn(e,r);if(o>0)return hf(t,n,e[o-1])}function p4(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=Tn(e,r);if(o<e.length-1)return hf(t,n,e[o+1])}function m4(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=Tn(e,n);if(o>0)return hf(t,e[o-1],r)}function g4(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=Tn(e,n);if(o<e.length-1)return hf(t,e[o+1],r)}function b4(t,e,{empty:n}){return n}function wo(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Zf(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:i,y:o})=>{var a;return((a=r.get(i))==null?void 0:a.get(o))??[]}):e?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}class Kt{constructor(e,n={},r={},i){const{facet:o="auto",facetAnchor:a,fx:f,fy:s,sort:u,dx:c=0,dy:h=0,margin:l=0,marginTop:d=l,marginRight:p=l,marginBottom:m=l,marginLeft:g=l,clip:y=i==null?void 0:i.clip,channels:b,tip:x,render:_}=r;if(this.data=e,this.sort=Fr(u)?u:null,this.initializer=Ir(r).initializer,this.transform=this.initializer?r.transform:uf(r).transform,o===null||o===!1?this.facet=null:(this.facet=$e(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===No&&typeof f=="string"?[f]:f,this.fy=e===No&&typeof s=="string"?[s]:s),this.facetAnchor=l4(a),n=Y1(n),b!==void 0&&(n={...y4(b),...n}),i!==void 0&&(n={...Z8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([v,w])=>{if(rf(w.value)){const{value:M,label:E=w.label,scale:C=w.scale}=w.value;w={...w,label:E,scale:C,value:M}}if(e===No&&typeof w.value=="string"){const{value:M}=w;w={...w,value:[M]}}return[v,w]}).filter(([v,{value:w,optional:M}])=>{if(w!=null)return!0;if(M)return!1;throw new Error(`missing channel value: ${v}`)})),this.dx=+c,this.dy=+h,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+g,this.clip=em(y),this.tip=_4(x),this.facet==="super"){if(f||s)throw new Error("super-faceting cannot use fx or fy");for(const v in this.channels){const{scale:w}=n[v];if(!(w!=="x"&&w!=="y"))throw new Error("super-faceting cannot use x or y")}}_!=null&&(this.render=xm(_,this.render))}initialize(e,n,r){let i=ee(this.data);e===void 0&&i!=null&&(e=[rn(i)]);const o=e;this.transform!=null&&({facets:e,data:i}=this.transform(i,e,r),i=ee(i)),e!==void 0&&(e.original=o);const a=P8(this.channels,i);return this.sort!=null&&U8(i,e,a,n,this.sort),{data:i,facets:e,channels:a}}filter(e,n,r){for(const i in n){const{filter:o=vn}=n[i];if(o!==null){const a=r[i];e=e.filter(f=>o(a[f]))}}return e}project(e,n,r){for(const i in e)if(e[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&l5(i,o,n,r.projection)}}scale(e,n,r){const i=O8(e,n);return r.projection&&this.project(e,i,r),i}}function vm(...t){return t.plot=Kt.prototype.plot,t}function xm(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,o,a,f){return t.call(this,n,r,i,o,a,(s,u,c,h,l)=>e.call(this,s,u,c,h,l,f))}}function y4(t){return Object.fromEntries(Object.entries(Y1(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:Vi(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function _4(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?$e(t,"tip",["x","y","xy"]):t}function df(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:$n(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const Ql=new WeakMap;function Ku(t,e,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:f,render:s,...u}={}){return a=+a,i!=null&&(n??(n=null),f={...f,px:{value:i,scale:"x"}}),o!=null&&(r??(r=null),f={...f,py:{value:o,scale:"y"}}),{x:n,y:r,channels:f,...u,render:xm(function(c,h,l,d,p,m){p={...p,pointerSticky:!1};const g=p.ownerSVGElement,{data:y}=p.getMarkState(this);let b=Ql.get(g);b||Ql.set(g,b={sticky:!1,roots:[],renders:[]});let x=b.renders.push(G)-1;const{x:_,y:v,fx:w,fy:M}=h;let E=w?w(c.fx)-d.marginLeft:0,C=M?M(c.fy)-d.marginTop:0;_!=null&&_.bandwidth&&(E+=_.bandwidth()/2),v!=null&&v.bandwidth&&(C+=v.bandwidth()/2);const D=c.fi!=null;let T;if(D){let I=b.facetStates;I||(b.facetStates=I=new Map),T=I.get(this),T||I.set(this,T=new Map)}const[F,R]=Ki(this,d),{px:q,py:S}=l,U=q?I=>q[I]:Mm(l,F),P=S?I=>S[I]:$m(l,R);let Y,V,H,L;function z(I,B){if(D)if(L&&(L=cancelAnimationFrame(L)),I==null)T.delete(c.fi);else{T.set(c.fi,B),L=requestAnimationFrame(()=>{L=null;for(const[k,N]of T)if(N<B||N===B&&k<c.fi){I=null;break}G(I)});return}G(I)}function G(I){if(Y===I&&H===b.sticky)return;Y=I,H=p.pointerSticky=b.sticky;const B=Y==null?[]:[Y];D&&(B.fx=c.fx,B.fy=c.fy,B.fi=c.fi);const k=m(B,h,l,d,p);if(V){if(D){const N=V.parentNode,W=V.getAttribute("transform"),A=k.getAttribute("transform");W?k.setAttribute("transform",W):k.removeAttribute("transform"),A?N.setAttribute("transform",A):N.removeAttribute("transform"),k.removeAttribute("aria-label"),k.removeAttribute("aria-description"),k.removeAttribute("aria-hidden")}V.replaceWith(k)}return b.roots[x]=V=k,Y==null&&(T==null?void 0:T.size)>1||p.dispatchValue(Y==null?null:y[Y]),k}function J(I){if(b.sticky||I.pointerType==="mouse"&&I.buttons===1)return;let[B,k]=Cy(I);B-=E,k-=C;const N=B<d.marginLeft||B>d.width-d.marginRight?1:t,W=k<d.marginTop||k>d.height-d.marginBottom?1:e;let A=null,et=a*a;for(const X of c){const ft=N*(U(X)-B),dt=W*(P(X)-k),mt=ft*ft+dt*dt;mt<=et&&(A=X,et=mt)}if(A!=null&&(t!==1||e!==1)){const X=U(A)-B,ft=P(A)-k;et=X*X+ft*ft}z(A,et)}function Q(I){I.pointerType==="mouse"&&Y!=null&&(b.sticky&&b.roots.some(B=>B==null?void 0:B.contains(I.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(B=>B(null))):(b.sticky=!0,G(Y)),I.stopImmediatePropagation()))}function j(I){I.pointerType==="mouse"&&(b.sticky||z(null))}return g.addEventListener("pointerenter",J),g.addEventListener("pointermove",J),g.addEventListener("pointerdown",Q),g.addEventListener("pointerleave",j),G(null)},s)}}function w4(t){return Ku(1,1,t)}function v4(t){return Ku(1,.01,t)}function x4(t){return Ku(.01,1,t)}function Mm({x1:t,x2:e,x:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function $m({y1:t,y2:e,y:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Sm(t){return rr(t)&&t.interval===void 0?void 0:"tabular-nums"}function M4(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:f=0,marginBottom:s=16+r,marginLeft:u=0,style:c,ticks:h=(i-u-f)/64,tickFormat:l,fontVariant:d=Sm(t),round:p=!0,opacity:m,className:g}=e;const y=Yu(e);g=Hu(g),m=Yt(m)[1],l===null&&(l=()=>null);const b=Pt("svg",y).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(F=>F.append("style").text(`.${g}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${g}-ramp text {
  white-space: pre;
}`)).call(Wu,c);let x=F=>F.selectAll(".tick line").attr("y1",a+s-o),_;const v=p?(F,R)=>F.rangeRound(R):(F,R)=>F.range(R),{type:w,domain:M,range:E,interpolate:C,scale:D,pivot:T}=t;if(C){const F=E===void 0?C:Ra(C.length===1?Xu(C):C,E);_=v(D.copy(),_e(Ut(u,i-f),Math.min(M.length+(T!==void 0),E===void 0?1/0:E.length)));const R=256,q=y.document.createElement("canvas");q.width=R,q.height=1;const S=q.getContext("2d");for(let U=0,P=R-1;U<R;++U)S.fillStyle=F(U/P),S.fillRect(U,0,1,1);b.append("image").attr("opacity",m).attr("x",u).attr("y",a).attr("width",i-u-f).attr("height",o-a-s).attr("preserveAspectRatio","none").attr("xlink:href",q.toDataURL())}else if(w==="threshold"){const F=M,R=l===void 0?q=>q:typeof l=="string"?Hr(l):l;_=v(_u().domain([-1,E.length-1]),[u,i-f]),b.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",(q,S)=>_(S-1)).attr("y",a).attr("width",(q,S)=>_(S)-_(S-1)).attr("height",o-a-s).attr("fill",q=>q),h=At(F,(q,S)=>S),l=q=>R(F[q],q)}else _=v(qa().domain(M),[u,i-f]),b.append("g").attr("fill-opacity",m).selectAll().data(M).enter().append("rect").attr("x",_).attr("y",a).attr("width",Math.max(0,_.bandwidth()-1)).attr("height",o-a-s).attr("fill",D),x=()=>{};return b.append("g").attr("transform",`translate(0,${o-s})`).call(G2(_).ticks(Array.isArray(h)?null:h,typeof l=="string"?l:void 0).tickFormat(typeof l=="function"?l:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ot(d,"normal")).call(x).call(F=>F.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",u).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const Tm=Math.PI/180;function to(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=Kf(n),t.markerMid=Kf(r),t.markerEnd=Kf(i)}function Kf(t){if(t==null||t===!1)return null;if(t===!0)return th;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Jl("auto");case"arrow-reverse":return Jl("auto-start-reverse");case"dot":return $4;case"circle":case"circle-fill":return th;case"circle-stroke":return S4}throw new Error(`invalid marker: ${t}`)}function Jl(t){return(e,n)=>Pt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function $4(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function th(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function S4(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let T4=0;function pf(t,e,{stroke:n},r){return km(t,e,n&&(i=>n[i]),r)}function k4(t,e,{stroke:n},r){return km(t,e,n&&(([i])=>n[i]),r)}function km(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},o=()=>i,a){const f=new Map;function s(u){return function(c){const h=o(c);let l=f.get(u);l||f.set(u,l=new Map);let d=l.get(h);if(!d){const p=this.parentNode.insertBefore(u(h,a),this),m=`plot-marker-${++T4}`;p.setAttribute("id",m),l.set(h,d=`url(#${m})`)}return d}}e&&t.attr("marker-start",s(e)),n&&t.attr("marker-mid",s(n)),r&&t.attr("marker-end",s(r))}function Qu({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=Cm(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function Em({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=Cm(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function Cm(t,e,n){return t===void 0&&e===void 0&&n===void 0?Vt?[1,0]:[.5,.5]:[e,n]}function Am(t,{interval:e}){return t={...Vi(t)},t.interval=Iu(t.interval===void 0?e:t.interval),t}function Nm(t,e,n,r){const{[t]:i,[`${t}1`]:o,[`${t}2`]:a}=n,{value:f,interval:s}=Am(i,n);if(f==null||s==null&&!r)return n;const u=nr(i);if(s==null){let d;const p={transform:m=>d||(d=Rt(m,f)),label:u};return{...n,[t]:void 0,[`${t}1`]:o===void 0?p:o,[`${t}2`]:a===void 0?p:a}}let c,h;function l(d){return h!==void 0&&d===c?h:h=At(Rt(c=d,f),p=>s.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:l,label:u}:o,[`${t}2`]:a===void 0?{transform:d=>l(d).map(p=>s.offset(p)),label:u}:a})}function Dm(t,e,n){const{[t]:r}=n,{value:i,interval:o}=Am(r,n);return i==null||o==null?n:e({...n,[t]:{label:nr(r),transform:a=>{const f=At(Rt(a,i),u=>o.floor(u)),s=f.map(u=>o.offset(u));return f.map(Zt(f)?(u,c)=>u==null||isNaN(u=+u)||(c=s[c],c==null)||isNaN(c=+c)?void 0:new Date((u+c)/2):(u,c)=>u==null||(c=s[c],c==null)?NaN:(+u+ +c)/2)}}})}function E4(t={}){return Nm("x",Qu,t)}function Lm(t={}){return Nm("y",Em,t)}function C4(t={}){return Dm("x",Qu,t)}function A4(t={}){return Dm("y",Em,t)}const Fm={ariaLabel:"rule",fill:null,stroke:"currentColor"};class N4 extends Kt{constructor(e,n={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:f=a,insetBottom:s=a}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},df(n,"x"),Fm),this.insetTop=Mt(f),this.insetBottom=Mt(s),to(this,n)}render(e,n,r,i,o){const{x:a,y:f}=n,{x:s,y1:u,y2:c}=r,{width:h,height:l,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=i,{insetTop:y,insetBottom:b}=this;return Pt("svg:g",o).call(Se,this,i,o).call(me,this,{x:s&&a},Vt,0).call(x=>x.selectAll().data(e).enter().append("line").call(Te,this).attr("x1",s?_=>s[_]:(m+h-p)/2).attr("x2",s?_=>s[_]:(m+h-p)/2).attr("y1",u&&!Pr(f)?_=>u[_]+y:d+y).attr("y2",c&&!Pr(f)?f.bandwidth?_=>c[_]+f.bandwidth()-b:_=>c[_]-b:l-g-b).call(an,this,r).call(pf,this,r,o)).node()}}class D4 extends Kt{constructor(e,n={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:f=a,insetLeft:s=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},df(n,"y"),Fm),this.insetRight=Mt(f),this.insetLeft=Mt(s),to(this,n)}render(e,n,r,i,o){const{x:a,y:f}=n,{y:s,x1:u,x2:c}=r,{width:h,height:l,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=i,{insetLeft:y,insetRight:b}=this;return Pt("svg:g",o).call(Se,this,i,o).call(me,this,{y:s&&f},0,Vt).call(x=>x.selectAll().data(e).enter().append("line").call(Te,this).attr("x1",u&&!Pr(a)?_=>u[_]+y:m+y).attr("x2",c&&!Pr(a)?a.bandwidth?_=>c[_]+a.bandwidth()-b:_=>c[_]-b:h-p-b).attr("y1",s?_=>s[_]:(d+l-g)/2).attr("y2",s?_=>s[_]:(d+l-g)/2).call(an,this,r).call(pf,this,r,o)).node()}}function Ju(t,e){let{x:n=zt,y:r,y1:i,y2:o,...a}=Lm(e);return[i,o]=Rm(r,i,o),new N4(t,{...a,x:n,y1:i,y2:o})}function L4(t,e){let{y:n=zt,x:r,x1:i,x2:o,...a}=E4(e);return[i,o]=Rm(r,i,o),new D4(t,{...a,y:n,x1:i,x2:o})}function Rm(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function tc(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)typeof e[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let o=0;o<n;++o)i+=e[o](r)+t[o+1];return i}}const F4={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Im="­";class ec extends Kt{constructor(e,n={}){const{x:r,y:i,text:o=Sn(e)&&H1(e)?zt:Du,frameAnchor:a,textAnchor:f=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:s=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:u=1,lineWidth:c=1/0,textOverflow:h,monospace:l,fontFamily:d=l?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:g,fontWeight:y,rotate:b}=n,[x,_]=Yt(b,0),[v,w]=B4(p);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:v,optional:!0},rotate:{value:a8(x),optional:!0},text:{value:o,filter:Eu,optional:!0}},n,F4),this.rotate=_,this.textAnchor=Ot(f,"middle"),this.lineAnchor=$e(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+c,this.textOverflow=Pm(h),this.monospace=!!l,this.fontFamily=Wt(d),this.fontSize=w,this.fontStyle=Wt(m),this.fontVariant=Wt(g),this.fontWeight=Wt(y),this.frameAnchor=ff(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=Um(this),this.clipLine=Bm(this)}render(e,n,r,i,o){const{x:a,y:f}=n,{x:s,y:u,rotate:c,text:h,title:l,fontSize:d}=r,{rotate:p}=this,[m,g]=Ki(this,i);return Pt("svg:g",o).call(Se,this,i,o).call(Om,this,h,i).call(me,this,{x:s&&a,y:u&&f}).call(y=>y.selectAll().data(e).enter().append("text").call(Te,this).call(R4,this,h,l).attr("transform",tc`translate(${s?b=>s[b]:m},${u?b=>u[b]:g})${c?b=>` rotate(${c[b]})`:p?` rotate(${p})`:""}`).call(nt,"font-size",d&&(b=>d[b])).call(an,this,r)).node()}}function Pm(t){return t==null?null:$e(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function R4(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:f,clipLine:s}=e;t.each(function(u){const c=f(Kn(n[u])??"").map(s),h=c.length,l=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let p=0;p<h;++p){if(++d,!c[p])continue;const m=this.ownerDocument.createElementNS(Sr.svg,"tspan");m.setAttribute("x",0),p===d-1?m.setAttribute("y",`${(l+p)*o}em`):m.setAttribute("dy",`${d*o}em`),m.textContent=c[p],this.appendChild(m),d=0}}else l&&this.setAttribute("y",`${l*o}em`),this.textContent=c[0];if(a&&!r&&c[0]!==n[u]){const d=this.ownerDocument.createElementNS(Sr.svg,"title");d.textContent=n[u],this.appendChild(d)}})}function nc(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=of(e,n)),new ec(t,{...r,x:e,y:n})}function I4(t,{x:e=zt,...n}={}){return new ec(t,A4({...n,x:e}))}function P4(t,{y:e=zt,...n}={}){return new ec(t,C4({...n,y:e}))}function Om(t,e,n){nt(t,"text-anchor",e.textAnchor),nt(t,"font-family",e.fontFamily),nt(t,"font-size",e.fontSize),nt(t,"font-style",e.fontStyle),nt(t,"font-variant",e.fontVariant===void 0?O4(n):e.fontVariant),nt(t,"font-weight",e.fontWeight)}function O4(t){return t&&(u8(t)||Zt(t))?"tabular-nums":void 0}const U4=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function B4(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),U4.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function z4(t,e,n){const r=[];let i,o=0;for(const[a,f,s]of q4(t)){if(i===void 0&&(i=a),o>i&&n(t,i,f)>e&&(r.push(t.slice(i,o)+(t[o-1]===Im?"-":"")),i=a),s){r.push(t.slice(i,f)),i=void 0;continue}o=f}return r}function*q4(t){let e=0,n=0;const r=t.length;for(;n<r;){let i=1;switch(t[n]){case Im:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++i;case`
`:yield[e,n,!0],n+=i,e=n;break;default:++n;break}}yield[e,n,!0]}const eh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function rc(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Gr(t,i))r+=eh[t[i]]??(qm(t,i)?120:eh.e);return r}function ic(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Gr(t,i))r+=qm(t,i)?200:100;return r}function Um({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const r=t?ic:rc,i=e*100;return o=>z4(o,i,r)}function Bm({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const r=t?ic:rc,i=e*100;switch(n){case"clip-start":return o=>rh(o,i,r,"");case"clip-end":return o=>nh(o,i,r,"");case"ellipsis-start":return o=>rh(o,i,r,xr);case"ellipsis-middle":return o=>H4(o,i,r,xr);case"ellipsis-end":return o=>nh(o,i,r,xr)}}const xr="…";function Or(t,e,n,r){const i=[];let o=0;for(let a=0,f=0,s=t.length;a<s;a=f){f=Gr(t,a);const u=n(t,a,f);if(o+u>e){for(o+=r;o>e&&a>0;)f=a,a=i.pop(),o-=n(t,a,f);return[a,e-o]}o+=u,i.push(a)}return[-1,0]}function nh(t,e,n,r){t=t.trim();const i=n(r),[o]=Or(t,e,n,i);return o<0?t:t.slice(0,o).trimEnd()+r}function H4(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const o=n(r)/2,[a,f]=Or(t,e/2,n,o),[s]=Or(t,i-e/2-f+o,n,-o);return s<0?r:t.slice(0,a).trimEnd()+r+t.slice(Gr(t,s)).trimStart()}function rh(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const o=n(r),[a]=Or(t,i-e+o,n,-o);return a<0?r:r+t.slice(Gr(t,a)).trimStart()}const Zs=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,ih=/\p{Extended_Pictographic}/uy;function Gr(t,e){return e+=W4(t,e)?2:1,G4(t,e)&&(e=Zs.lastIndex),Y4(t,e)?Gr(t,e+1):e}function zm(t,e){return t.charCodeAt(e)<128}function W4(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function Y4(t,e){return t.charCodeAt(e)===8205}function G4(t,e){return zm(t,e)?!1:(Zs.lastIndex=e,Zs.test(t))}function qm(t,e){return zm(t,e)?!1:(ih.lastIndex=e,ih.test(t))}const V4={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},Hm=3.5,X4=Hm*5,Wm={draw(t,e,n){const r=e*n/X4;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},j4={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},Z4=new Map([["arrow",Wm],["spike",j4]]);function K4(t){return t&&typeof t.draw=="function"}function Q4(t){if(K4(t))return t;const e=Z4.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class Ym extends Kt{constructor(e,n={}){const{x:r,y:i,r:o=Hm,length:a,rotate:f,shape:s=Wm,anchor:u="middle",frameAnchor:c}=n,[h,l]=Yt(a,12),[d,p]=Yt(f,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,V4),this.r=+o,this.length=l,this.rotate=p,this.shape=Q4(s),this.anchor=$e(u,"anchor",["start","middle","end"]),this.frameAnchor=ff(c)}render(e,n,r,i,o){const{x:a,y:f}=n,{x:s,y:u,length:c,rotate:h}=r,{length:l,rotate:d,anchor:p,shape:m,r:g}=this,[y,b]=Ki(this,i);return Pt("svg:g",o).call(Se,this,i,o).call(me,this,{x:s&&a,y:u&&f}).call(x=>x.selectAll().data(e).enter().append("path").call(Te,this).attr("transform",tc`translate(${s?_=>s[_]:y},${u?_=>u[_]:b})${h?_=>` rotate(${h[_]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?c?_=>` translate(0,${c[_]})`:` translate(0,${l})`:c?_=>` translate(0,${c[_]/2})`:` translate(0,${l/2})`}`).attr("d",c?_=>{const v=mn();return m.draw(v,c[_],g),v}:(()=>{const _=mn();return m.draw(_,l,g),_})()).call(an,this,r)).node()}}function J4(t,e={}){const{x:n=zt,...r}=e;return new Ym(t,{...r,x:n})}function t7(t,e={}){const{y:n=zt,...r}=e;return new Ym(t,{...r,y:n})}function kn(t,e){return arguments.length<2&&!Sn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function mf({anchor:t}={},e){return t===void 0?e[0]:$e(t,"anchor",e)}function Gm(t){return mf(t,["left","right"])}function Vm(t){return mf(t,["right","left"])}function Xm(t){return mf(t,["bottom","top"])}function jm(t){return mf(t,["top","bottom"])}function Zm(){const[t,e]=kn(...arguments);return Qm("y",Gm(e),t,e)}function e7(){const[t,e]=kn(...arguments);return Qm("fy",Vm(e),t,e)}function Km(){const[t,e]=kn(...arguments);return Jm("x",Xm(e),t,e)}function n7(){const[t,e]=kn(...arguments);return Jm("fx",jm(e),t,e)}function Qm(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:s=r,fillOpacity:u=i,textAnchor:c,textStroke:h,textStrokeOpacity:l,textStrokeWidth:d,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:g,x:y,margin:b,marginTop:x=b===void 0?20:b,marginRight:_=b===void 0?e==="right"?40:0:b,marginBottom:v=b===void 0?20:b,marginLeft:w=b===void 0?e==="left"?40:0:b,label:M,labelAnchor:E,labelArrow:C,labelOffset:D,...T}){return p=Mt(p),m=Mt(m),g=Mt(g),E!==void 0&&(E=$e(E,"labelAnchor",["center","top","bottom"])),C=fg(C),vm(p&&!Gt(o)?r7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:g,x:y,...T}):null,Gt(s)?null:o7(t,e,n,{fill:s,fillOpacity:u,stroke:h,strokeOpacity:l,strokeWidth:d,textAnchor:c,tickSize:p,tickPadding:m,tickRotate:g,x:y,marginTop:x,marginRight:_,marginBottom:v,marginLeft:w,...T}),!Gt(s)&&M!==null?nc([],rg({fill:s,fillOpacity:u,...T},function(F,R,q,S,U){const P=S[t],{marginTop:Y,marginRight:V,marginBottom:H,marginLeft:L}=t==="y"&&U.inset||U,z=E??(P.bandwidth?"center":"top"),G=D??(e==="right"?V:L)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${e}`,this.rotate=0),this.dy=z==="top"?3-Y:z==="bottom"?H-3:0,this.dx=e==="right"?G:-G,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[ag(t,P,{anchor:e,label:M,labelAnchor:z,labelArrow:C})]}}}})):null)}function Jm(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:s=r,fillOpacity:u=i,textAnchor:c,textStroke:h,textStrokeOpacity:l,textStrokeWidth:d,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:g,y,margin:b,marginTop:x=b===void 0?e==="top"?30:0:b,marginRight:_=b===void 0?20:b,marginBottom:v=b===void 0?e==="bottom"?30:0:b,marginLeft:w=b===void 0?20:b,label:M,labelAnchor:E,labelArrow:C,labelOffset:D,...T}){return p=Mt(p),m=Mt(m),g=Mt(g),E!==void 0&&(E=$e(E,"labelAnchor",["center","left","right"])),C=fg(C),vm(p&&!Gt(o)?i7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:g,y,...T}):null,Gt(s)?null:a7(t,e,n,{fill:s,fillOpacity:u,stroke:h,strokeOpacity:l,strokeWidth:d,textAnchor:c,tickSize:p,tickPadding:m,tickRotate:g,y,marginTop:x,marginRight:_,marginBottom:v,marginLeft:w,...T}),!Gt(s)&&M!==null?nc([],rg({fill:s,fillOpacity:u,...T},function(F,R,q,S,U){const P=S[t],{marginTop:Y,marginRight:V,marginBottom:H,marginLeft:L}=t==="x"&&U.inset||U,z=E??(P.bandwidth?"center":"right"),G=D??(e==="top"?Y:H)-3;return z==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-G:G,this.dx=z==="right"?V-3:z==="left"?3-L:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[ag(t,P,{anchor:e,label:M,labelAnchor:z,labelArrow:C})]}}}})):null)}function r7(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:f=e,tickSize:s,inset:u=0,insetLeft:c=u,insetRight:h=u,dx:l=0,y:d=t==="y"?void 0:null,...p}){return Vr(t7,t,e,`${t}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:f,y:d,...p,dx:e==="left"?+l-Vt+ +c:+l+Vt-h,anchor:"start",length:s,shape:e==="left"?p7:m7})}function i7(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:f=e,tickSize:s,inset:u=0,insetTop:c=u,insetBottom:h=u,dy:l=0,x:d=t==="x"?void 0:null,...p}){return Vr(J4,t,e,`${t}-axis tick`,n,{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:f,x:d,...p,dy:e==="bottom"?+l-Vt-h:+l+Vt+ +c,anchor:"start",length:s,shape:e==="bottom"?h7:d7})}function o7(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*Tm):0),text:s,textAnchor:u=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:c=a>60?"top":a<-60?"bottom":"middle",fontVariant:h,inset:l=0,insetLeft:d=l,insetRight:p=l,dx:m=0,y:g=t==="y"?void 0:null,...y}){return Vr(P4,t,e,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:u,lineAnchor:c,fontVariant:h,rotate:a,y:g,...y,dx:e==="left"?+m-o-f+ +d:+m+ +o+ +f-p},function(b,x,_,v,w){h===void 0&&(this.fontVariant=og(b)),s===void 0&&(w.text=ig(b,x,_,v,e))})}function a7(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*Tm):0),text:s,textAnchor:u=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:h,inset:l=0,insetTop:d=l,insetBottom:p=l,dy:m=0,x:g=t==="x"?void 0:null,...y}){return Vr(I4,t,e,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:u,lineAnchor:c,fontVariant:h,rotate:a,x:g,...y,dy:e==="bottom"?+m+ +o+ +f-p:+m-o-f+ +d},function(b,x,_,v,w){h===void 0&&(this.fontVariant=og(b)),s===void 0&&(w.text=ig(b,x,_,v,e))})}function f7(){const[t,e]=kn(...arguments);return tg("y",Gm(e),t,e)}function s7(){const[t,e]=kn(...arguments);return tg("fy",Vm(e),t,e)}function u7(){const[t,e]=kn(...arguments);return eg("x",Xm(e),t,e)}function c7(){const[t,e]=kn(...arguments);return eg("fx",jm(e),t,e)}function tg(t,e,n,{y:r=t==="y"?void 0:null,x:i=null,x1:o=e==="left"?i:null,x2:a=e==="right"?i:null,...f}){return Vr(L4,t,e,`${t}-grid`,n,{y:r,x1:o,x2:a,...ng(f)})}function eg(t,e,n,{x:r=t==="x"?void 0:null,y:i=null,y1:o=e==="top"?i:null,y2:a=e==="bottom"?i:null,...f}){return Vr(Ju,t,e,`${t}-grid`,n,{x:r,y1:o,y2:a,...ng(f)})}function ng({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function rg({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:s,shapeRendering:u,clip:c=!1},h){return[,t]=en(t),[,e]=Yt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:s,shapeRendering:u,clip:c,initializer:h}}function Vr(t,e,n,r,i,o,a){let f;function s(h,l,d,p,m,g){const y=h==null&&(e==="fx"||e==="fy"),{[e]:b}=p;if(!b)throw new Error(`missing scale: ${e}`);const x=b.domain();let{interval:_,ticks:v,tickFormat:w,tickSpacing:M=e==="x"?80:35}=o;if(typeof v=="string"&&sg(b)&&(_=v,v=void 0),v===void 0&&(v=Yr(_,b.type)??l7(b,M)),h==null){if(Sn(v))h=ee(v);else if(br(v))h=Qf(v,...se(x));else if(b.interval){let C=b.interval;if(b.ticks){const[D,T]=se(x),F=(T-D)/C[Yi];C=El(C,F/v)??C,h=Qf(C,D,T)}else{h=x;const D=h.length;C=El(C,D/v)??C,C!==b.interval&&(h=Qf(C,...se(h)))}if(C===b.interval){const D=Math.round(h.length/v);D>1&&(h=h.filter((T,F)=>F%D===0))}}else b.ticks?h=b.ticks(v):h=x;if(!b.ticks&&h.length&&h!==x){const C=new ka(x);h=h.filter(D=>C.has(D)),h.length||bn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?l=[rn(h)]:f[e]={scale:e,value:zt}}a==null||a.call(this,b,h,v,w,f);const E=Object.fromEntries(Object.entries(f).map(([C,D])=>[C,{...D,value:Rt(h,D.value)}]));return y&&(l=g.filterFacets(h,E)),{data:h,facets:l,channels:E}}const u=Ir(o).initializer,c=t(i,Ir({...o,initializer:s},u));return i==null?(f=c.channels,c.channels={}):f={},c.ariaLabel=r,c.clip===void 0&&(c.clip=!1),c}function l7(t,e){const[n,r]=se(t.range());return(r-n)/e}function ig(t,e,n,r,i){return{value:oc(t,e,n,r,i)}}function oc(t,e,n,r,i){return typeof r=="function"?r:r===void 0&&e&&Zt(e)?Y6(e,i)??Kn:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,r):r===void 0?Kn:typeof r=="string"?(Zt(t.domain())?Wi:Hr)(r):Gi(r)}function Qf(t,e,n){return t.range(e,t.offset(t.floor(n)))}const h7={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},d7={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},p7={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},m7={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function og(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function g7(t){return Math.sign(Rr(t.domain()))*Math.sign(Rr(t.range()))}function ag(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&sg(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(r)),!o)return r;if(o===!0){const a=g7(e);a&&(o=/x$/.test(t)||i==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function fg(t="auto"){return Gt(t)?!1:typeof t=="boolean"?t:$e(t,"labelArrow",["auto","up","right","down","left"])}function sg(t){return Zt(t.domain())}function oh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function b7(t,{opacity:e,...n}={}){if(!rr(t)&&!wm(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return ug(t,n,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",Yt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function y7(t,{fill:e=(u=>(u=t.hint)==null?void 0:u.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=t.hint)==null?void 0:c.stroke)()!==void 0?t.hint.stroke:Gt(e)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...f}={},s){const[h,l]=en(e),[d,p]=en(r),m=oh(s,h),g=oh(s,d),y=a*a*Math.PI;return n=Yt(n)[1],i=Yt(i)[1],o=Yt(o)[1],ug(t,f,(b,x,_,v)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",_).attr("height",v).attr("fill",h==="color"?w=>m.scale(w):l).attr("fill-opacity",n).attr("stroke",d==="color"?w=>g.scale(w):p).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",w=>{const M=mn();return t.scale(w).draw(M,y),M}))}function ug(t,e={},n){let{columns:r,tickFormat:i,fontVariant:o=Sm(t),swatchSize:a=15,swatchWidth:f=a,swatchHeight:s=a,marginLeft:u=0,className:c,style:h,width:l}=e;const d=Yu(e);c=Hu(c),i=oc(t.scale,t.domain,void 0,i);const p=Pt("div",d).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let m;return r!=null?(m=`.${c}-swatches-columns .${c}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${c}-swatches-columns .${c}-swatch::before {
  flex-shrink: 0;
}
.${c}-swatches-columns .${c}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,t,f,s).call(g=>g.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(m=`.${c}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${c}-swatches-wrap .${c}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,t,f,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(g=>g.insert("style","*").text(`.${c}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${c}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",u?`${+u}px`:null).style("width",l===void 0?null:`${+l}px`).style("font-variant",Ot(o,"normal")).call(Wu,h).node()}const Ks=new Map([["symbol",y7],["color",lg],["opacity",w7]]);function _7(t,e,n={}){return(r,i)=>{if(!Ks.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return Ks.get(r)(t[r],cg(e,n[r],i),o=>t[o])}}function cg({className:t,...e},{label:n,ticks:r,tickFormat:i}={},o){return d8(o,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function lg(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return b7(t,n);case"ramp":return M4(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function w7({type:t,interpolate:e,...n},{legend:r=!0,color:i=_n(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return lg({type:t,...n,interpolate:v7(i)},{legend:r,...o})}function v7(t){const{r:e,g:n,b:r}=_n(t)||_n(0,0,0);return i=>`rgba(${e},${n},${r},${i})`}function x7(t,e,n){const r=[];for(const[i,o]of Ks){const a=n[i];if(a!=null&&a.legend&&i in t){const f=o(t[i],cg(e,t[i],a),s=>t[s]);f!=null&&r.push(f)}}return r}const M7={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},$7={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class S7 extends Kt{constructor(e={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:o=r,insetBottom:a=r,insetLeft:f=r,rx:s,ry:u}=e;super(No,void 0,e,n==null?M7:$7),this.anchor=O1(n,"anchor",["top","right","bottom","left"]),this.insetTop=Mt(i),this.insetRight=Mt(o),this.insetBottom=Mt(a),this.insetLeft=Mt(f),this.rx=Mt(s),this.ry=Mt(u)}render(e,n,r,i,o){const{marginTop:a,marginRight:f,marginBottom:s,marginLeft:u,width:c,height:h}=i,{anchor:l,insetTop:d,insetRight:p,insetBottom:m,insetLeft:g,rx:y,ry:b}=this,x=u+g,_=c-f-p,v=a+d,w=h-s-m;return Pt(l?"svg:line":"svg:rect",o).datum(0).call(Se,this,i,o).call(Te,this).call(an,this,r).call(me,this,{}).call(l==="left"?M=>M.attr("x1",x).attr("x2",x).attr("y1",v).attr("y2",w):l==="right"?M=>M.attr("x1",_).attr("x2",_).attr("y1",v).attr("y2",w):l==="top"?M=>M.attr("x1",x).attr("x2",_).attr("y1",v).attr("y2",v):l==="bottom"?M=>M.attr("x1",x).attr("x2",_).attr("y1",w).attr("y2",w):M=>M.attr("x",x).attr("y",v).attr("width",_-x).attr("height",w-v).attr("rx",y).attr("ry",b)).node()}}function T7(t){return new S7(t)}const Jf={ariaLabel:"tip",fill:"white",stroke:"currentColor"},k7=new Set(["geometry","href","src","ariaLabel","scales"]);class E7 extends Kt{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Sn(e)&&H1(e)&&(n={...n,title:zt});const{x:r,y:i,x1:o,x2:a,y1:f,y2:s,anchor:u,monospace:c,fontFamily:h=c?"ui-monospace, monospace":void 0,fontSize:l,fontStyle:d,fontVariant:p,fontWeight:m,lineHeight:g=1,lineWidth:y=20,frameAnchor:b,format:x,textAnchor:_="start",textOverflow:v,textPadding:w=8,title:M,pointerSize:E=12,pathFilter:C="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:f!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:f,scale:"y",optional:s==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:s,scale:"y",optional:f==null},title:{value:M,optional:!0}},n,Jf),this.anchor=W1(u,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=ff(b),this.textAnchor=Ot(_,"middle"),this.textPadding=+w,this.pointerSize=+E,this.pathFilter=Wt(C),this.lineHeight=+g,this.lineWidth=+y,this.textOverflow=Pm(v),this.monospace=!!c,this.fontFamily=Wt(h),this.fontSize=Mt(l),this.fontStyle=Wt(d),this.fontVariant=Wt(p),this.fontWeight=Wt(m);for(const D in Jf)D in this.channels&&(this[D]=Jf[D]);this.splitLines=Um(this),this.clipLine=Bm(this),this.format={...x}}render(e,n,r,i,o){const a=this,{x:f,y:s,fx:u,fy:c}=n,{ownerSVGElement:h,document:l}=o,{anchor:d,monospace:p,lineHeight:m,lineWidth:g}=this,{textPadding:y,pointerSize:b,pathFilter:x}=this,{marginTop:_,marginLeft:v}=i,{x1:w,y1:M,x2:E,y2:C,x:D=w??E,y:T=M??C}=r,F=u?u(e.fx)-v:0,R=c?c(e.fy)-_:0,[q,S]=Ki(this,i),U=Mm(r,q),P=$m(r,S),Y=p?ic:rc,V=Y(xr);let H,L;"title"in r?(H=r.channels,L=F7):(H=L7.call(this,r,n),L=R7);const z=Pt("svg:g",o).call(Se,this,i,o).call(Om,this).call(me,this,{x:D&&f,y:T&&s}).call(Q=>Q.selectAll().data(e).enter().append("g").attr("transform",j=>`translate(${Math.round(U(j))},${Math.round(P(j))})`).call(Te,this).call(j=>j.append("path").attr("filter",x)).call(j=>j.append("text").each(function(I){const B=hi(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const k=L.call(a,I,e,H,n,r);if(typeof k=="string")for(const N of a.splitLines(k))G(B,{value:a.clipLine(N)});else{const N=new Set;for(const W of k){const{label:A=""}=W;A&&N.has(A)||(N.add(A),G(B,W))}}})));function G(Q,{label:j,value:I,color:B,opacity:k}){j??(j=""),I??(I="");const N=B!=null||k!=null;let W,A=g*100;const[et]=Or(j,A,Y,V);if(et>=0)j=j.slice(0,et).trimEnd()+xr,W=I.trim(),I="";else{(j||!I&&!N)&&(I=" "+I);const[ft]=Or(I,A-Y(j),Y,V);ft>=0&&(I=I.slice(0,ft).trimEnd()+xr,W=I.trim())}const X=Q.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");j&&X.append("tspan").attr("font-weight","bold").text(j),I&&X.append(()=>l.createTextNode(I)),N&&X.append("tspan").text(" ■").attr("fill",B).attr("fill-opacity",k).style("user-select","none"),W&&X.append("title").text(W)}function J(){const{width:Q,height:j}=i.facet??i;z.selectChildren().each(function(I){let{x:B,width:k,height:N}=this.getBBox();k=Math.round(k),N=Math.round(N);let W=d;if(W===void 0){W=a.previousAnchor;const X=U(I)+F,ft=P(I)+R,dt=X+k+y*2<Q,mt=X-k-y*2>0,oe=ft+N+b+y*2+7<j,Cn=ft-N-b-y*2>0,ir=(/-left$/.test(W)?dt||!mt:dt&&!mt)?"left":"right",or=(/^top-/.test(W)?oe||!Cn:oe&&!Cn)?"top":"bottom";W=a.previousAnchor=`${or}-${ir}`}const A=this.firstChild,et=this.lastChild;if(A.setAttribute("d",D7(W,b,y,k,N)),B)for(const X of et.childNodes)X.setAttribute("x",-B);et.setAttribute("y",`${+A7(W,et.childNodes.length,m).toFixed(6)}em`),et.setAttribute("transform",`translate(${N7(W,b,y,k,N)})`)}),z.attr("visibility",null)}return e.length&&(z.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(J):typeof requestAnimationFrame<"u"&&requestAnimationFrame(J)),z.node()}}function C7(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=of(e,n)),new E7(t,{...r,x:e,y:n})}function A7(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function N7(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}function D7(t,e,n,r,i){const o=r+n*2,a=i+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function L7({channels:t},e){var i,o;const n={};let r=this.format;r=ah(r,t,"x"),r=ah(r,t,"y"),this.format=r;for(const a in r){const f=r[a];if(!(f===null||f===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const s=Pl(t,a);s&&(n[a]=s)}}for(const a in t){if(a in n||a in r||k7.has(a))continue;const f=Pl(t,a);f&&(n[a]=f)}this.facet&&(e.fx&&!("fx"in r)&&(n.fx=!0),e.fy&&!("fy"in r)&&(n.fy=!0));for(const a in n){const f=this.format[a];if(typeof f=="string"){const s=((i=n[a])==null?void 0:i.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(Zt(s)?Wi:Hr)(f)}else if(f===void 0||f===!0){const s=e[a];this.format[a]=s!=null&&s.bandwidth?oc(s,s.domain()):Kn}}return n}function ah(t,e,n){if(!(n in t))return t;const r=`${n}1`,i=`${n}2`;if((r in t||!(r in e))&&(i in t||!(i in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([f])=>f===n)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function F7(t,e,{title:n}){return Kn(n.value[t],t)}function*R7(t,e,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:ya(r,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:sh(r,n,"x"),value:fh(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:sh(r,n,"y"),value:fh(this.format.y2,n.y1,a,t)};else{const f=a.value[t],s=a.scale;if(!vn(f)&&s==null)continue;yield{label:ya(r,n,o),value:this.format[o](f,t),color:s==="color"?i[o][t]:null,opacity:s==="opacity"?i[o][t]:null}}}}function fh(t,e,n,r){var i;return(i=n.hint)!=null&&i.length?`${t(n.value[r]-e.value[r],r)}`:`${t(e.value[r],r)}–${t(n.value[r],r)}`}function sh(t,e,n){const r=ya(t,e,`${n}1`,n),i=ya(t,e,`${n}2`,n);return r===i?r:`${r}–${i}`}function ya(t,e,n,r=n){const i=e[n],o=t[(i==null?void 0:i.scale)??n];return String((o==null?void 0:o.label)??(i==null?void 0:i.label)??r)}function En(t={}){var V;const{facet:e,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:f}=t,s=Hu(t.className),u=t.marks===void 0?[]:ch(t.marks);u.push(...H7(u));const c=z7(e,t),h=new Map;for(const H of u){const L=lh(H,c,t);L&&h.set(H,L)}const l=new Map;c&&ni(l,[c],t),ni(l,h,t);const d=ch(W7(u,l,t));for(const H of d){const L=lh(H,c,t);L&&h.set(H,L)}u.unshift(...d);let p=a4(l,t);if(p!==void 0){const H=c?Zf(p,c):void 0;for(const z of u){if(z.facet===null||z.facet==="super")continue;const G=h.get(z);G!==void 0&&(G.facetsIndex=z.fx!=null||z.fy!=null?Zf(p,G):H)}const L=new Set;for(const{facetsIndex:z}of h.values())z==null||z.forEach((G,J)=>{(G==null?void 0:G.length)>0&&L.add(J)});p.forEach(0<L.size&&L.size<p.length?(z,G)=>z.empty=!L.has(G):z=>z.empty=!1);for(const z of u)if(z.facet==="exclude"){const G=h.get(z);G!==void 0&&(G.facetsIndex=u4(G.facetsIndex))}}for(const H of Ct.keys())Hs(t[H])&&H!=="fx"&&H!=="fy"&&l.set(H,[]);const m=new Map;for(const H of u){if(m.has(H))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:L,channels:z}=h.get(H)??{},{data:G,facets:J,channels:Q}=H.initialize(L,z,t);ac(Q,t),m.set(H,{data:G,facets:J,channels:Q})}const g=Xs(ni(l,m,t),t),y=i4(g,u,t);j5(g,y);const b=Gl(g),{fx:x,fy:_}=b,v=x||_?bm(g,y):y,w=x||_?K7(b,y):y,M=Yu(t),E=M.document,C=Da("svg").call(E.documentElement);let D=C;M.ownerSVGElement=C,M.className=s,M.projection=s5(t,v),M.filterFacets=(H,L)=>Zf(p,{channels:L,groups:Zu(H,L)}),M.getMarkState=H=>{const L=m.get(H),z=h.get(H);return{...L,channels:{...L.channels,...z==null?void 0:z.channels}}},M.dispatchValue=H=>{D.value!==H&&(D.value=H,D.dispatchEvent(new Event("input",{bubbles:!0})))};const T=new Set;for(const[H,L]of m)if(H.initializer!=null){const z=H.facet==="super"?w:v,G=H.initializer(L.data,L.facets,L.channels,b,z,M);if(G.data!==void 0&&(L.data=G.data),G.facets!==void 0&&(L.facets=G.facets),G.channels!==void 0){const{fx:J,fy:Q,...j}=G.channels;B7(j),Object.assign(L.channels,j);for(const I of Object.values(j)){const{scale:B}=I;B!=null&&!m8(Ct.get(B))&&(hg(I,t),T.add(B))}(J!=null||Q!=null)&&h.set(H,!0)}}if(T.size){const H=new Map;ni(H,m,t,J=>T.has(J)),ni(l,m,t,J=>T.has(J));const L=Z7(Xs(H,t),g),{scales:z,...G}=Gl(L);Object.assign(g,L),Object.assign(b,G),Object.assign(b.scales,z)}let F,R;p!==void 0&&(F={x:x==null?void 0:x.domain(),y:_==null?void 0:_.domain()},p=f4(p,F),R=s4(x,_,y));for(const[H,L]of m)L.values=H.scale(L.channels,b,M);const{width:q,height:S}=y;hi(C).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",q).attr("height",S).attr("viewBox",`0 0 ${q} ${S}`).attr("aria-label",a).attr("aria-description",f).call(H=>H.append("style").text(`.${s} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${s} text,
.${s} tspan {
  white-space: pre;
}`)).call(Wu,n);for(const H of u){const{channels:L,values:z,facets:G}=m.get(H);if(p===void 0||H.facet==="super"){let J=null;if(G&&(J=G[0],J=H.filter(J,L,z),J.length===0))continue;const Q=H.render(J,b,z,w,M);if(Q==null)continue;C.appendChild(Q)}else{let J;for(const Q of p){if(!(((V=H.facetAnchor)==null?void 0:V.call(H,p,F,Q))??!Q.empty))continue;let j=null;if(G){const B=h.has(H);if(j=G[B?Q.i:0],j=H.filter(j,L,z),j.length===0)continue;!B&&j===G[0]&&(j=n8(j)),j.fx=Q.x,j.fy=Q.y,j.fi=Q.i}const I=H.render(j,b,z,v,M);if(I!=null){(J??(J=hi(C).append("g"))).append(()=>I).datum(Q);for(const B of["aria-label","aria-description","aria-hidden","transform"])I.hasAttribute(B)&&(J.attr(B,I.getAttribute(B)),I.removeAttribute(B))}}J==null||J.selectChildren().attr("transform",R)}}const U=x7(g,M,t),{figure:P=r!=null||i!=null||o!=null||U.length>0}=t;P&&(D=E.createElement("figure"),D.className=`${s}-figure`,D.style.maxWidth="initial",r!=null&&D.append(uh(E,r,"h2")),i!=null&&D.append(uh(E,i,"h3")),D.append(...U,C),o!=null&&D.append(I7(E,o))),D.scale=n4(b.scales),D.legend=_7(g,M,t);const Y=X8();return Y>0&&hi(C).append("text").attr("x",q).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${Y.toLocaleString("en-US")} warning${Y===1?"":"s"}. Please check the console.`),D}function uh(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(e),r}function I7(t,e){const n=t.createElement("figcaption");return n.append(e),n}function P7({marks:t=[],...e}={}){return En({...e,marks:[...t,this]})}Kt.prototype.plot=P7;function ch(t){return t.flat(1/0).filter(e=>e!=null).map(O7)}function O7(t){return typeof t.render=="function"?t:new U7(t)}class U7 extends Kt{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function ac(t,e){for(const n in t)hg(t[n],e);return t}function hg(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:i,percent:o,interval:a,transform:f=o?s=>s*100:q1(a,i)}=e[n]??{};f!=null&&(t.value=At(t.value,f),t.transform=!1)}function B7(t){for(const e in t)Q1(e,t[e])}function ni(t,e,n,r=Z6){var i,o;for(const{channels:a}of e.values())for(const f in a){const s=a[f],{scale:u}=s;if(u!=null&&r(u))if(u==="projection"){if(!h5(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,h=((o=n.y)==null?void 0:o.domain)===void 0;if(c||h){const[l,d]=p5(s);c&&ts(t,"x",l),h&&ts(t,"y",d)}}}else ts(t,u,s)}return t}function ts(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function z7(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const i=ee(t.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Ni(i,{value:n,scale:"fx"})),r!=null&&(o.fy=Ni(i,{value:r,scale:"fy"})),ac(o,e);const a=Zu(i,o);return{channels:o,groups:a,data:t.data}}function lh(t,e,n){var s;if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const u=ee(t.data??r??i);if(u===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(u===null)return;const c={};return r!=null&&(c.fx=Ni(u,{value:r,scale:"fx"})),i!=null&&(c.fy=Ni(u,{value:i,scale:"fy"})),ac(c,n),{channels:c,groups:Zu(u,c)}}if(e===void 0)return;const{channels:o,groups:a,data:f}=e;if(t.facet!=="auto"||t.data===f)return{channels:o,groups:a};f.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((s=ee(t.data))==null?void 0:s.length)===f.length&&bn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function q7(t,e={}){return Ir({...e,x:null,y:null},(n,r,i,o,a,f)=>f.getMarkState(t))}function H7(t){const e=[];for(const n of t){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?v4:/^y$/i.test(i)?x4:w4,r=i(q7(n,r)),r.title=null;const o=C7(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,e.push(o)}}return e}function W7(t,e,n){let{projection:r,x:i={},y:o={},fx:a={},fy:f={},axis:s,grid:u,facet:c={},facet:{axis:h=s,grid:l}=c,x:{axis:d=s,grid:p=d===null?null:u}=i,y:{axis:m=s,grid:g=m===null?null:u}=o,fx:{axis:y=h,grid:b=y===null?null:l}=a,fy:{axis:x=h,grid:_=x===null?null:l}=f}=n;(r||!Hs(i)&&!hh("x",t))&&(d=p=null),(r||!Hs(o)&&!hh("y",t))&&(m=g=null),e.has("fx")||(y=b=null),e.has("fy")||(x=_=null),d===void 0&&(d=!Mo(t,"x")),m===void 0&&(m=!Mo(t,"y")),y===void 0&&(y=!Mo(t,"fx")),x===void 0&&(x=!Mo(t,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),y===!0&&(y=d==="top"||d===null?"bottom":"top"),x===!0&&(x=m==="right"||m===null?"left":"right");const v=[];return xo(v,_,s7,f),vo(v,x,e7,"right","left",c,f),xo(v,b,c7,a),vo(v,y,n7,"top","bottom",c,a),xo(v,g,f7,o),vo(v,m,Zm,"left","right",n,o),xo(v,p,u7,i),vo(v,d,Km,"bottom","top",n,i),v}function vo(t,e,n,r,i,o,a){if(!e)return;const f=Y7(e);a=G7(f?r:e,o,a);const{line:s}=a;(n===Zm||n===Km)&&s&&!Ai(s)&&t.push(T7(V7(a))),t.push(n(a)),f&&t.push(n({...a,anchor:i,label:null}))}function xo(t,e,n,r){!e||Ai(e)||t.push(n(X7(e,r)))}function Y7(t){return/^\s*both\s*$/i.test(t)}function G7(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:s,fontVariant:u,ariaLabel:c,ariaDescription:h,label:l=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:s,fontVariant:u,ariaLabel:c,ariaDescription:h,label:l,labelAnchor:d,labelArrow:p,labelOffset:m}}function V7(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function X7(t,{stroke:e=af(t)?t:void 0,ticks:n=j7(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function j7(t){switch(typeof t){case"number":return!0;case"string":return!af(t)}return Sn(t)||typeof(t==null?void 0:t.range)=="function"}function Mo(t,e){const n=`${e}-axis `;return t.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function hh(t,e){for(const n of e)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===t||i==="projection")return!0}return!1}function Z7(t,e){for(const n in t){const r=t[n],i=e[n];r.label===void 0&&i&&(r.label=i.label)}return t}function K7({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:s}=ju(n),u=t&&dh(t),c=e&&dh(e);return{marginTop:e?c[0]:r,marginRight:t?f-u[1]:i,marginBottom:e?s-c[1]:o,marginLeft:t?u[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:s}}function dh(t){const e=t.domain();let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const Q7=new Map([["basis",M6],["basis-closed",$6],["basis-open",S6],["bundle",T6],["bump-x",h6],["bump-y",d6],["cardinal",k6],["cardinal-closed",E6],["cardinal-open",C6],["catmull-rom",A6],["catmull-rom-closed",N6],["catmull-rom-open",D6],["linear",Qa],["linear-closed",L6],["monotone-x",F6],["monotone-y",R6],["natural",I6],["step",P6],["step-after",U6],["step-before",O6]]);function J7(t=Qa,e){if(typeof t=="function")return t;const n=Q7.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function dg(t=Ur,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Ur:J7(t,e)}function Ur(t){return Qa(t)}function t9(t={y:"count"},e={}){[t,e]=i9(t,e);const{x:n,y:r}=e;return r9(o9(n,e,zt),null,null,r,t,Qu(e))}function e9(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=qu}=n,i={filter:null};return n[e]!=null&&(i[e]=r),n[`${e}1`]!=null&&(i[`${e}1`]=r),n[`${e}2`]!=null&&(i[`${e}2`]=r),t(i,n)}function n9(t={}){return e9(t9,"y",df(t,"x"))}function r9(t,e,n,r,{data:i=K1,filter:o=ba,sort:a,reverse:f,...s}={},u={}){t=ph(t),e=ph(e),s=f9(s,u),i=gg(i,zt),a=a==null?void 0:pg("sort",a,u),o=o==null?void 0:mg("filter",o,u),n!=null&&bo(s,"x","x1","x2")&&(n=null),r!=null&&bo(s,"y","y1","y2")&&(r=null);const[c,h]=We(t),[l,d]=We(t),[p,m]=We(e),[g,y]=We(e),[b,x]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[_,v]=We(b),{x:w,y:M,z:E,fill:C,stroke:D,x1:T,x2:F,y1:R,y2:q,domain:S,cumulative:U,thresholds:P,interval:Y,...V}=u,[H,L]=We(E),[z]=en(C),[G]=en(D),[J,Q]=We(z),[j,I]=We(G);return{..."z"in u&&{z:H||E},..."fill"in u&&{fill:J||C},..."stroke"in u&&{stroke:j||D},...uf(V,(B,k,N)=>{const W=z1(Rt(B,b),N==null?void 0:N[x]),A=Rt(B,E),et=Rt(B,z),X=Rt(B,G),ft=C8(s,{z:A,fill:et,stroke:X}),dt=[],mt=[],oe=W&&v([]),Cn=A&&L([]),ir=et&&Q([]),or=X&&I([]),qt=t&&h([]),eo=t&&d([]),uc=e&&m([]),Eg=e&&y([]),Cg=c9(t==null?void 0:t(B),e==null?void 0:e(B));let Ag=0;for(const ar of s)ar.initialize(B);a&&a.initialize(B),o&&o.initialize(B);for(const ar of k){const cc=[];for(const Xr of s)Xr.scope("facet",ar);a&&a.scope("facet",ar),o&&o.scope("facet",ar);for(const[Xr,Ng]of Ll(ar,ft))for(const[Dg,no]of Ll(Ng,W))for(const[ke,An]of Cg(no))if(!(o&&!o.reduce(ke,An))){cc.push(Ag++),mt.push(i.reduceIndex(ke,B,An)),W&&oe.push(Dg),A&&Cn.push(ft===A?Xr:A[(ke.length>0?ke:no)[0]]),et&&ir.push(ft===et?Xr:et[(ke.length>0?ke:no)[0]]),X&&or.push(ft===X?Xr:X[(ke.length>0?ke:no)[0]]),qt&&(qt.push(An.x1),eo.push(An.x2)),uc&&(uc.push(An.y1),Eg.push(An.y2));for(const Lg of s)Lg.reduce(ke,An);a&&a.reduce(ke)}dt.push(cc)}return A8(dt,a,f),{data:mt,facets:dt}}),...!bo(s,"x")&&(c?{x1:c,x2:l,x:Ws(c,l)}:{x:w,x1:T,x2:F}),...!bo(s,"y")&&(p?{y1:p,y2:g,y:Ws(p,g)}:{y:M,y1:R,y2:q}),..._&&{[x]:_},...Object.fromEntries(s.map(({name:B,output:k})=>[B,k]))}}function i9({cumulative:t,domain:e,thresholds:n,interval:r,...i},o){return[i,{cumulative:t,domain:e,thresholds:n,interval:r,...o}]}function o9(t,{cumulative:e,domain:n,thresholds:r,interval:i},o){return t={...Vi(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=r),t.interval===void 0&&(t.interval=i),t.value===void 0&&(t.value=o),t.thresholds=a9(t.thresholds,t.interval),t}function ph(t){if(t==null)return;const{value:e,cumulative:n,domain:r=se,thresholds:i}=t,o=a=>{let f=Rt(a,e),s;if(Zt(f)||u9(i)){f=At(f,P1,Float64Array);let[c,h]=typeof r=="function"?r(f):r,l=typeof i=="function"&&!br(i)?i(f,c,h):i;typeof l=="number"&&(l=B0(c,h,l)),br(l)&&(r===se&&(c=l.floor(c),h=l.offset(l.floor(h))),l=l.range(c,l.offset(h))),s=l}else{f=De(f);let[c,h]=typeof r=="function"?r(f):r,l=typeof i=="function"&&!br(i)?i(f,c,h):i;if(typeof l=="number")if(r===se){let d=Uo(c,h,l);if(isFinite(d))if(d>0){let p=Math.round(c/d),m=Math.round(h/d);p*d<=c||--p,m*d>h||++m;let g=m-p+1;l=new Float64Array(g);for(let y=0;y<g;++y)l[y]=(p+y)*d}else if(d<0){d=-d;let p=Math.round(c*d),m=Math.round(h*d);p/d<=c||--p,m/d>h||++m;let g=m-p+1;l=new Float64Array(g);for(let y=0;y<g;++y)l[y]=(p+y)/d}else l=[c];else l=[c]}else l=_i(c,h,l);else br(l)&&(r===se&&(c=l.floor(c),h=l.offset(l.floor(h))),l=l.range(c,l.offset(h)));s=l}const u=[];if(s.length===1)u.push([s[0],s[0]]);else for(let c=1;c<s.length;++c)u.push([s[c-1],s[c]]);return u.bin=(n<0?h9:n>0?l9:fc)(u,s,f),u};return o.label=nr(e),o}function a9(t,e,n=mh){if(t===void 0)return e===void 0?n:Yr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return F2;case"scott":return Jh;case"sturges":return A2;case"auto":return mh}return Nu(t)}return t}function f9(t,e){return T8(t,e,pg)}function pg(t,e,n){return j1(t,e,n,mg)}function mg(t,e,n){return Z1(t,e,n,gg)}function gg(t,e){return zu(t,e,s9)}function s9(t){switch(`${t}`.toLowerCase()){case"x":return d9;case"x1":return m9;case"x2":return g9;case"y":return p9;case"y1":return b9;case"y2":return y9}throw new Error(`invalid bin reduce: ${t}`)}function mh(t,e,n){return Math.min(200,Jh(t,e,n))}function u9(t){return o8(t)||Sn(t)&&Zt(t)}function c9(t,e){return t&&e?function*(n){const r=t.bin(n);for(const[i,[o,a]]of t.entries()){const f=e.bin(r[i]);for(const[s,[u,c]]of e.entries())yield[f[s],{x1:o,y1:u,x2:a,y2:c}]}}:t?function*(n){const r=t.bin(n);for(const[i,[o,a]]of t.entries())yield[r[i],{x1:o,x2:a}]}:function*(n){const r=e.bin(n);for(const[i,[o,a]]of e.entries())yield[r[i],{y1:o,y2:a}]}}function fc(t,e,n){return e=De(e),r=>{var o;const i=t.map(()=>[]);for(const a of r)(o=i[Sa(e,n[a])-1])==null||o.push(a);return i}}function l9(t,e,n){const r=fc(t,e,n);return i=>{const o=r(i);for(let a=1,f=o.length;a<f;++a){const s=o[a-1],u=o[a];for(const c of s)u.push(c)}return o}}function h9(t,e,n){const r=fc(t,e,n);return i=>{const o=r(i);for(let a=o.length-2;a>=0;--a){const f=o[a+1],s=o[a];for(const u of f)s.push(u)}return o}}function bg(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const d9={reduceIndex(t,e,{x1:n,x2:r}){return bg(n,r)}},p9={reduceIndex(t,e,{y1:n,y2:r}){return bg(n,r)}},m9={reduceIndex(t,e,{x1:n}){return n}},g9={reduceIndex(t,e,{x2:n}){return n}},b9={reduceIndex(t,e,{y1:n}){return n}},y9={reduceIndex(t,e,{y2:n}){return n}};function _9(t={}){return U1(t)?t:{...t,y:zt}}function w9(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,r=new Uint8Array(n);let i=0;for(const f of e)for(const s of f)r[s]&&++i,r[s]=1;if(i===0)return{data:t,facets:e};t=Ci(t);const o=t[R1]=new Uint32Array(n+i);e=e.map(f=>Ci(f,Uint32Array));let a=n;r.fill(0);for(const f of e)for(let s=0,u=f.length;s<u;++s){const c=f[s];r[c]?(f[s]=a,t[a]=t[c],o[a]=c,++a):o[c]=c,r[c]=1}return{data:t,facets:e}}function v9(t={},e={}){arguments.length===1&&([t,e]=M9(t));const{x1:n,x:r=n,y:i,...o}=e,[a,f,s,u]=S9(r,i,"x","y",t,o);return{...a,x1:n,x:f,y1:s,y2:u,y:Ws(s,u)}}function x9({y:t,y1:e,y2:n,...r}={}){return r=df(r,"x"),e===void 0&&n===void 0?v9({y:t,...r}):([e,n]=e8(t,e,n),{...r,y1:e,y2:n})}function M9(t){const{offset:e,order:n,reverse:r,...i}=t;return[{offset:e,order:n,reverse:r},i]}const $9={length:!0};function S9(t,e=j6,n,r,{offset:i,order:o,reverse:a},f){if(e===null)throw new Error(`stack requires ${r}`);const s=B1(f),[u,c]=We(t),[h,l]=ga(e),[d,p]=ga(e);return h.hint=d.hint=$9,i=T9(i),o=C9(o,i,r),[uf(f,(m,g,y)=>{({data:m,facets:g}=w9(m,g));const b=t==null?void 0:c(z1(Rt(m,t),y==null?void 0:y[n])),x=Rt(m,e,Float64Array),_=Rt(m,s),v=o&&o(m,b,x,_),w=m.length,M=l(new Float64Array(w)),E=p(new Float64Array(w)),C=[];for(const D of g){const T=b?Array.from(Ea(D,F=>b[F]).values()):[D];if(v)for(const F of T)F.sort(v);for(const F of T){let R=0,q=0;a&&F.reverse();for(const S of F){const U=x[S];U<0?R=E[S]=(M[S]=R)+U:U>0?q=E[S]=(M[S]=q)+U:E[S]=M[S]=q}}C.push(T)}return i&&i(C,M,E,_),{data:m,facets:g}}),u,h,d]}function T9(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return k9;case"center":case"silhouette":return E9;case"wiggle":return _g}throw new Error(`unknown offset: ${t}`)}}function yg(t,e){let n=0,r=0;for(const i of t){const o=e[i];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function k9(t,e,n){for(const r of t)for(const i of r){const[o,a]=yg(i,n);for(const f of i){const s=1/(a-o||1);e[f]=s*(e[f]-o),n[f]=s*(n[f]-o)}}}function E9(t,e,n){for(const r of t){for(const i of r){const[o,a]=yg(i,n);for(const f of i){const s=(a+o)/2;e[f]-=s,n[f]-=s}}wg(r,e,n)}vg(t,e,n)}function _g(t,e,n,r){for(const i of t){const o=new Hn;let a=0;for(const f of i){let s=-1;const u=f.map(d=>Math.abs(n[d]-e[d])),c=f.map(d=>{s=r?r[d]:++s;const p=n[d]-e[d],m=o.has(s)?p-o.get(s):0;return o.set(s,p),m}),h=[0,...M2(c)];for(const d of f)e[d]+=a,n[d]+=a;const l=yn(u);l&&(a-=yn(u,(d,p)=>(c[p]/2+h[p])*d)/l)}wg(i,e,n)}vg(t,e,n)}function wg(t,e,n){const r=Ze(t,i=>Ze(i,o=>e[o]));for(const i of t)for(const o of i)e[o]-=r,n[o]-=r}function vg(t,e,n){const r=t.length;if(r===1)return;const i=t.map(f=>f.flat()),o=i.map(f=>(Ze(f,s=>e[s])+de(f,s=>n[s]))/2),a=Ze(o);for(let f=0;f<r;f++){const s=a-o[f];for(const u of i[f])e[u]+=s,n[u]+=s}}function C9(t,e,n){if(t===void 0&&e===_g)return gh(xe);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),i=r?ma:xe;switch((r?t.slice(1):t).toLowerCase()){case"value":case n:return A9(i);case"z":return N9(i);case"sum":return D9(i);case"appearance":return L9(i);case"inside-out":return gh(i)}return bh(I1(t))}if(typeof t=="function")return(t.length===1?bh:F9)(t);if(Array.isArray(t))return R9(t);throw new Error(`invalid order: ${t}`)}}function A9(t){return(e,n,r)=>(i,o)=>t(r[i],r[o])}function N9(t){return(e,n,r,i)=>(o,a)=>t(i[o],i[a])}function D9(t){return gf(t,(e,n,r,i)=>eu(rn(e),o=>yn(o,a=>r[a]),o=>i[o]))}function L9(t){return gf(t,(e,n,r,i)=>eu(rn(e),o=>n[Qh(o,a=>r[a])],o=>i[o]))}function gh(t){return gf(t,(e,n,r,i)=>{const o=rn(e),a=eu(o,h=>n[Qh(h,l=>r[l])],h=>i[h]),f=_r(o,h=>yn(h,l=>r[l]),h=>i[h]),s=[],u=[];let c=0;for(const h of a)c<0?(c+=f.get(h),s.push(h)):(c-=f.get(h),u.push(h));return u.reverse().concat(s)})}function bh(t){return e=>{const n=Rt(e,t);return(r,i)=>xe(n[r],n[i])}}function F9(t){return e=>(n,r)=>t(e[n],e[r])}function R9(t){return gf(xe,()=>t)}function gf(t,e){return(n,r,i,o)=>{if(!o)throw new Error("missing channel: z");const a=new Hn(e(n,r,i,o).map((f,s)=>[f,s]));return(f,s)=>t(a.get(o[f]),a.get(o[s]))}}const I9={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class P9 extends Kt{constructor(e,n={}){const{x1:r,y1:i,x2:o,y2:a,curve:f,tension:s}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,I9),this.curve=dg(f,s),to(this,n)}project(e,n,r){this.curve!==Ur&&super.project(e,n,r)}render(e,n,r,i,o){const{x1:a,y1:f,x2:s=a,y2:u=f}=r,{curve:c}=this;return Pt("svg:g",o).call(Se,this,i,o).call(me,this,n).call(h=>h.selectAll().data(e).enter().append("path").call(Te,this).attr("d",c===Ur&&o.projection?O9(o.projection,a,f,s,u):l=>{const d=mn(),p=c(d);return p.lineStart(),p.point(a[l],f[l]),p.point(s[l],u[l]),p.lineEnd(),d}).call(an,this,r).call(pf,this,r,o)).node()}}function O9(t,e,n,r,i){const o=Oa(t);return e=De(e),n=De(n),r=De(r),i=De(i),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[r[a],i[a]]]})}function xg(t,{x:e,x1:n,x2:r,y:i,y1:o,y2:a,...f}={}){return[n,r]=yh(e,n,r),[o,a]=yh(i,o,a),new P9(t,{...f,x1:n,x2:r,y1:o,y2:a})}function yh(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class Mg extends Kt{constructor(e,n,r={},i){super(e,n,r,i);const{inset:o=0,insetTop:a=o,insetRight:f=o,insetBottom:s=o,insetLeft:u=o,rx:c,ry:h}=r;this.insetTop=Mt(a),this.insetRight=Mt(f),this.insetBottom=Mt(s),this.insetLeft=Mt(u),this.rx=Ot(c,"auto"),this.ry=Ot(h,"auto")}render(e,n,r,i,o){const{rx:a,ry:f}=this;return Pt("svg:g",o).call(Se,this,i,o).call(this._transform,this,n).call(s=>s.selectAll().data(e).enter().append("rect").call(Te,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(nt,"rx",a).call(nt,"ry",f).call(an,this,r)).node()}_x(e,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?o=>n[o]+i:r+i}_y(e,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?o=>n[o]+i:r+i}_width({x:e},{x:n},{marginRight:r,marginLeft:i,width:o}){const{insetLeft:a,insetRight:f}=this,s=n&&e?e.bandwidth():o-r-i;return Math.max(0,s-a-f)}_height({y:e},{y:n},{marginTop:r,marginBottom:i,height:o}){const{insetTop:a,insetBottom:f}=this,s=n&&e?e.bandwidth():o-r-i;return Math.max(0,s-a-f)}}const U9={ariaLabel:"bar"};class B9 extends Mg{constructor(e,n={}){const{x:r,y1:i,y2:o}=n;super(e,{y1:{value:i,scale:"y"},y2:{value:o,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,U9)}_transform(e,n,{y:r}){e.call(me,n,{y:r},0,0)}_y({y:e},{y1:n,y2:r},{marginTop:i}){const{insetTop:o}=this;return Pr(e)?i+o:a=>Math.min(n[a],r[a])+o}_height({y:e},{y1:n,y2:r},{marginTop:i,marginBottom:o,height:a}){const{insetTop:f,insetBottom:s}=this;return Pr(e)?a-i-o-f-s:u=>Math.max(0,Math.abs(r[u]-n[u])-f-s)}}function z9(t,e={}){return t8(e)||(e={...e,x:Du,y2:zt}),new B9(t,x9(Lm(_9(e))))}const q9={ariaLabel:"cell"};class H9 extends Mg{constructor(e,{x:n,y:r,...i}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,q9)}_transform(e,n){e.call(me,n,{},0,0)}}function W9(t,{x:e,y:n,...r}={}){return[e,n]=of(e,n),new H9(t,{...r,x:e,y:n})}const Y9={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function G9(t){return t.sort===void 0&&t.reverse===void 0?M8({channel:"-r"},t):t}class V9 extends Kt{constructor(e,n={}){const{x:r,y:i,r:o,rotate:a,symbol:f=ki,frameAnchor:s}=n,[u,c]=Yt(a,0),[h,l]=v8(f),[d,p]=Yt(o,h==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:ef,optional:!0},rotate:{value:u,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},G9(n),Y9),this.r=p,this.rotate=c,this.symbol=l,this.frameAnchor=ff(s);const{channels:m}=this,{symbol:g}=m;if(g){const{fill:y,stroke:b}=m;g.hint={fill:y?y.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,i,o){const{x:a,y:f}=n,{x:s,y:u,r:c,rotate:h,symbol:l}=r,{r:d,rotate:p,symbol:m}=this,[g,y]=Ki(this,i),b=m===ki,x=c?void 0:d*d*Math.PI;return Cu(d)&&(e=[]),Pt("svg:g",o).call(Se,this,i,o).call(me,this,{x:s&&a,y:u&&f}).call(_=>_.selectAll().data(e).enter().append(b?"circle":"path").call(Te,this).call(b?v=>{v.attr("cx",s?w=>s[w]:g).attr("cy",u?w=>u[w]:y).attr("r",c?w=>c[w]:d)}:v=>{v.attr("transform",tc`translate(${s?w=>s[w]:g},${u?w=>u[w]:y})${h?w=>` rotate(${h[w]})`:p?` rotate(${p})`:""}`).attr("d",c&&l?w=>{const M=mn();return l[w].draw(M,c[w]*c[w]*Math.PI),M}:c?w=>{const M=mn();return m.draw(M,c[w]*c[w]*Math.PI),M}:l?w=>{const M=mn();return l[w].draw(M,x),M}:(()=>{const w=mn();return m.draw(w,x),w})())}).call(an,this,r)).node()}}function $g(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=of(e,n)),new V9(t,{...r,x:e,y:n})}const X9={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class j9 extends Kt{constructor(e,n={}){const{x:r,y:i,z:o,curve:a,tension:f}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:B1(n),optional:!0}},n,X9),this.z=o,this.curve=dg(a,f),to(this,n)}filter(e){return e}project(e,n,r){this.curve!==Ur&&super.project(e,n,r)}render(e,n,r,i,o){const{x:a,y:f}=r,{curve:s}=this;return Pt("svg:g",o).call(Se,this,i,o).call(me,this,n).call(u=>u.selectAll().data(i5(e,[a,f],this,r)).enter().append("path").call(Te,this).call(e5,this,r).call(k4,this,r,o).attr("d",s===Ur&&o.projection?Z9(o.projection,a,f):l6().curve(s).defined(c=>c>=0).x(c=>a[c]).y(c=>f[c]))).node()}}function Z9(t,e,n){const r=Oa(t);return e=De(e),n=De(n),i=>{let o=[];const a=[o];for(const f of i)f===-1?(o=[],a.push(o)):o.push([e[f],n[f]]);return r({type:"MultiLineString",coordinates:a})}}function K9(t,{x:e=Du,y:n=zt,...r}={}){return new j9(t,n9({...r,x:e,y:n}))}const Q9={ariaLabel:"tick",fill:null,stroke:"currentColor"};class J9 extends Kt{constructor(e,n,r){super(e,n,r,Q9),to(this,r)}render(e,n,r,i,o){return Pt("svg:g",o).call(Se,this,i,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Te,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(an,this,r).call(pf,this,r,o)).node()}}class tx extends J9{constructor(e,n={}){const{x:r,y:i,inset:o=0,insetTop:a=o,insetBottom:f=o}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Mt(a),this.insetBottom=Mt(f)}_transform(e,n,{x:r}){e.call(me,n,{x:r},Vt,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&e?o=>n[o]+i:r+i}_y2({y:e},{y:n},{height:r,marginBottom:i}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:r-i-o}}function Sg(t,{x:e=zt,...n}={}){return new tx(t,{...n,x:e})}function ex(t){let e,n,r,i,o,a;return{c(){e=O("main"),n=O("div"),o=K(),a=O("div"),a.textContent=`Each note is represented by a tick placed at its onset time from left to
        right. A smaller gap indicates an early note.`,Z(n,"width",r=t[0]+"px"),Z(n,"height",i=t[1]+"px"),Qt(e,"width",t[0]+"px"),Qt(e,"margin","auto")},m(f,s){ht(f,e,s),$(e,n),t[4](n),$(e,o),$(e,a)},p(f,[s]){s&1&&r!==(r=f[0]+"px")&&Z(n,"width",r),s&2&&i!==(i=f[1]+"px")&&Z(n,"height",i),s&1&&Qt(e,"width",f[0]+"px")},i:$t,o:$t,d(f){f&&ut(e),t[4](null)}}}function nx(t,e,n){let{pattern:r}=e,{width:i=800}=e,{height:o=100}=e,a;Qn(()=>{const s=En({width:i,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Sg(r,{x:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function f(s){Ie[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,f]}class _a extends ie{constructor(e){super(),re(this,e,nx,ex,ne,{pattern:3,width:0,height:1})}}function rx(t){let e,n,r,i,o,a;return{c(){e=O("main"),n=O("div"),o=K(),a=O("div"),a.textContent=`For each note but the first, the bars' height shows the distance to the
    previous note. A smaller bar indicates an early note.`,Z(n,"width",r=t[0]+"px"),Z(n,"height",i=t[1]+"px"),Qt(e,"width",t[0]+"px"),Qt(e,"margin","auto")},m(f,s){ht(f,e,s),$(e,n),t[4](n),$(e,o),$(e,a)},p(f,[s]){s&1&&r!==(r=f[0]+"px")&&Z(n,"width",r),s&2&&i!==(i=f[1]+"px")&&Z(n,"height",i),s&1&&Qt(e,"width",f[0]+"px")},i:$t,o:$t,d(f){f&&ut(e),t[4](null)}}}function ix(t,e,n){let{pattern:r}=e,{width:i=800}=e,{height:o=100}=e,a;Qn(()=>{const s=r.map((c,h)=>h===0?0:c-r[h-1]),u=En({width:i,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[z9(s,{x:(c,h)=>h+1,y:c=>c})]});n(2,a.textContent="",a),a.appendChild(u)});function f(s){Ie[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,f]}class wa extends ie{constructor(e){super(),re(this,e,ix,rx,ne,{pattern:3,width:0,height:1})}}function ox(t){let e,n,r,i,o,a;return{c(){e=O("main"),n=O("div"),o=K(),a=O("div"),a.textContent=`For each note but the first, the rectangles' color shows the distance to the
    previous note. A brighter recangle indicates an early note.`,Z(n,"width",r=t[0]+"px"),Z(n,"height",i=t[1]+"px"),Qt(e,"width",t[0]+"px"),Qt(e,"margin","auto")},m(f,s){ht(f,e,s),$(e,n),t[4](n),$(e,o),$(e,a)},p(f,[s]){s&1&&r!==(r=f[0]+"px")&&Z(n,"width",r),s&2&&i!==(i=f[1]+"px")&&Z(n,"height",i),s&1&&Qt(e,"width",f[0]+"px")},i:$t,o:$t,d(f){f&&ut(e),t[4](null)}}}function ax(t,e,n){let{pattern:r}=e,{width:i=800}=e,{height:o=100}=e,a;Qn(()=>{const s=r.map((c,h)=>h===0?0:c-r[h-1]),u=En({width:i,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[W9(s,{x:(c,h)=>h+1,fill:c=>c})]});n(2,a.textContent="",a),a.appendChild(u)});function f(s){Ie[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,f]}class va extends ie{constructor(e){super(),re(this,e,ax,ox,ne,{pattern:3,width:0,height:1})}}function fx(t){let e,n,r,i,o,a;return{c(){e=O("main"),n=O("div"),o=K(),a=O("div"),a.textContent=`The waveform of the audio showing the loudness over time time from left to
    right. Note onsets show up as peaks. A smaller gap between peaks indicates
    an early note.`,Z(n,"width",r=t[0]+"px"),Z(n,"height",i=t[1]+"px"),Qt(e,"width",t[0]+"px"),Qt(e,"margin","auto")},m(f,s){ht(f,e,s),$(e,n),t[6](n),$(e,o),$(e,a)},p(f,[s]){s&1&&r!==(r=f[0]+"px")&&Z(n,"width",r),s&2&&i!==(i=f[1]+"px")&&Z(n,"height",i),s&1&&Qt(e,"width",f[0]+"px")},i:$t,o:$t,d(f){f&&ut(e),t[6](null)}}}function sx(t,e,n){let{pattern:r}=e,{audioFile:i}=e,{width:o=800}=e,{height:a=50}=e,f,s=null,u;const c=async p=>{n(5,s=await Wh(p)),console.log(`Loaded ${p}, sr= ${s.sampleRate}`),u=s.sampleRate};let h=null;const l=(p,m)=>{m&&(h=Yh(m,p,.5))};Qn(()=>{if(n(2,f.textContent="",f),!h)return;const p=En({width:o,height:a,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[K9(h,{x:(m,g)=>g/u,y:m=>m})]});f.appendChild(p)});function d(p){Ie[p?"unshift":"push"](()=>{f=p,n(2,f)})}return t.$$set=p=>{"pattern"in p&&n(3,r=p.pattern),"audioFile"in p&&n(4,i=p.audioFile),"width"in p&&n(0,o=p.width),"height"in p&&n(1,a=p.height)},t.$$.update=()=>{t.$$.dirty&16&&c(i),t.$$.dirty&40&&l(r,s)},[o,a,f,r,i,s,d]}class xa extends ie{constructor(e){super(),re(this,e,sx,fx,ne,{pattern:3,audioFile:4,width:0,height:1})}}function ux(t){let e,n,r,i,o,a;return{c(){e=O("main"),n=O("audio"),r=K(),i=O("button"),i.textContent="play audio (p)",n.controls=!1},m(f,s){ht(f,e,s),$(e,n),t[6](n),$(e,r),$(e,i),o||(a=kt(i,"click",t[1]),o=!0)},p:$t,i:$t,o:$t,d(f){f&&ut(e),t[6](null),o=!1,a()}}}function cx(t,e,n){let{pattern:r}=e,{audioFile:i}=e,{currentTrialNumber:o=-1}=e,a=null;const f=async d=>{n(5,a=await Wh(d)),console.log(`Loaded ${d}, sr= ${a.sampleRate}`)};let s=null,u;const c=(d,p)=>{p&&u&&(s=Yh(p,d),h2(s,p.sampleRate,u))},h=()=>{u&&(u.pause(),n(0,u.currentTime=0,u),u.play())};zh(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&h()})});function l(d){Ie[d?"unshift":"push"](()=>{u=d,n(0,u)})}return t.$$set=d=>{"pattern"in d&&n(2,r=d.pattern),"audioFile"in d&&n(3,i=d.audioFile),"currentTrialNumber"in d&&n(4,o=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(i),t.$$.dirty&4&&console.log(r),t.$$.dirty&16&&o>-1&&window.setTimeout(h,200),t.$$.dirty&36&&c(r,a)},[u,h,r,i,o,a,l]}class Ma extends ie{constructor(e){super(),re(this,e,cx,ux,ne,{pattern:2,audioFile:3,currentTrialNumber:4})}}function _h(t,e,n){const r=t.slice();return r[8]=e[n],r}function wh(t){let e,n=t[8].substring(0,30)+"",r;return{c(){e=O("option"),r=pt(n),e.__value=t[8],bt(e,e.__value)},m(i,o){ht(i,e,o),$(e,r)},p:$t,d(i){i&&ut(e)}}}function lx(t){let e,n,r,i,o,a,f,s=(Do*1e3).toFixed(0)+"",u,c,h,l,d,p,m,g,y=t[0].toFixed(1)+"",b,x,_=(t[2]*1e3).toFixed(1)+"",v,w,M,E,C,D,T,F,R,q,S,U,P,Y,V,H,L,z,G,J,Q=pn(t[5]),j=[];for(let I=0;I<Q.length;I+=1)j[I]=wh(_h(t,Q,I));return R=new Ma({props:{pattern:t[1],audioFile:t[3]}}),S=new xa({props:{pattern:t[1],audioFile:t[3],width:$o,height:So}}),P=new _a({props:{pattern:t[1],width:$o,height:So}}),V=new wa({props:{pattern:t[1],width:$o,height:So}}),L=new va({props:{pattern:t[1],width:$o,height:So}}),{c(){e=O("main"),n=O("h2"),n.textContent="Playground",r=K(),i=O("p"),i.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=K(),a=O("div"),f=pt("inter-onset interval (IOI): "),u=pt(s),c=pt(" milliseconds ("),h=pt(t[4]),l=pt(` bpm)
    `),d=O("label"),p=pt(`deviation as percent of IOI
      `),m=O("input"),g=K(),b=pt(y),x=pt(`
      (`),v=pt(_),w=pt(" milliseconds)"),M=K(),E=O("label"),C=pt(`instrument sample:
      `),D=O("select");for(let I=0;I<j.length;I+=1)j[I].c();T=K(),F=O("div"),vt(R.$$.fragment),q=K(),vt(S.$$.fragment),U=K(),vt(P.$$.fragment),Y=K(),vt(V.$$.fragment),H=K(),vt(L.$$.fragment),Z(m,"type","range"),Z(m,"min","-20"),Z(m,"max","20"),Z(m,"step","1"),Z(d,"class","svelte-1sot113"),t[3]===void 0&&zn(()=>t[7].call(D)),Z(E,"class","svelte-1sot113"),Z(F,"class","stimuli svelte-1sot113")},m(I,B){ht(I,e,B),$(e,n),$(e,r),$(e,i),$(e,o),$(e,a),$(a,f),$(a,u),$(a,c),$(a,h),$(a,l),$(a,d),$(d,p),$(d,m),bt(m,t[0]),$(d,g),$(d,b),$(d,x),$(d,v),$(d,w),$(a,M),$(a,E),$(E,C),$(E,D);for(let k=0;k<j.length;k+=1)j[k]&&j[k].m(D,null);dn(D,t[3],!0),$(e,T),$(e,F),_t(R,F,null),$(F,q),_t(S,F,null),$(F,U),_t(P,F,null),$(F,Y),_t(V,F,null),$(F,H),_t(L,F,null),z=!0,G||(J=[kt(m,"change",t[6]),kt(m,"input",t[6]),kt(D,"change",t[7])],G=!0)},p(I,[B]){if((!z||B&16)&&gn(h,I[4]),B&1&&bt(m,I[0]),(!z||B&1)&&y!==(y=I[0].toFixed(1)+"")&&gn(b,y),(!z||B&4)&&_!==(_=(I[2]*1e3).toFixed(1)+"")&&gn(v,_),B&32){Q=pn(I[5]);let X;for(X=0;X<Q.length;X+=1){const ft=_h(I,Q,X);j[X]?j[X].p(ft,B):(j[X]=wh(ft),j[X].c(),j[X].m(D,null))}for(;X<j.length;X+=1)j[X].d(1);j.length=Q.length}B&40&&dn(D,I[3]);const k={};B&2&&(k.pattern=I[1]),B&8&&(k.audioFile=I[3]),R.$set(k);const N={};B&2&&(N.pattern=I[1]),B&8&&(N.audioFile=I[3]),S.$set(N);const W={};B&2&&(W.pattern=I[1]),P.$set(W);const A={};B&2&&(A.pattern=I[1]),V.$set(A);const et={};B&2&&(et.pattern=I[1]),L.$set(et)},i(I){z||(tt(R.$$.fragment,I),tt(S.$$.fragment,I),tt(P.$$.fragment,I),tt(V.$$.fragment,I),tt(L.$$.fragment,I),z=!0)},o(I){st(R.$$.fragment,I),st(S.$$.fragment,I),st(P.$$.fragment,I),st(V.$$.fragment,I),st(L.$$.fragment,I),z=!1},d(I){I&&ut(e),Lo(j,I),wt(R),wt(S),wt(P),wt(V),wt(L),G=!1,nn(J)}}}let $o=600,So=100,Do=.5,hx=6,dx=3,px=!0,mx=0;function gx(t,e,n){let r,i;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],f=5,s=[];function u(){f=Mr(this.value),n(0,f)}function c(){a=Fo(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,i=f/100*Do),t.$$.dirty&6&&(n(1,s=Ro(hx,Do,dx,i,px,mx)),console.log("generated pattern",s))},n(4,r=1/Do*60),[f,s,i,a,r,o,u,c]}class bx extends ie{constructor(e){super(),re(this,e,gx,lx,ne,{})}}var Tg={exports:{}};(function(t,e){(function(n,r){r()})(jr,function(){function n(u,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,c,h){var l=new XMLHttpRequest;l.open("GET",u),l.responseType="blob",l.onload=function(){s(l.response,c,h)},l.onerror=function(){console.error("could not download file")},l.send()}function i(u){var c=new XMLHttpRequest;c.open("HEAD",u,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function o(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(c)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof jr=="object"&&jr.global===jr?jr:void 0,f=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(u,c,h){var l=a.URL||a.webkitURL,d=document.createElement("a");c=c||u.name||"download",d.download=c,d.rel="noopener",typeof u=="string"?(d.href=u,d.origin===location.origin?o(d):i(d.href)?r(u,c,h):o(d,d.target="_blank")):(d.href=l.createObjectURL(u),setTimeout(function(){l.revokeObjectURL(d.href)},4e4),setTimeout(function(){o(d)},0))}:"msSaveOrOpenBlob"in navigator?function(u,c,h){if(c=c||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,h),c);else if(i(u))r(u,c,h);else{var l=document.createElement("a");l.href=u,l.target="_blank",setTimeout(function(){o(l)})}}:function(u,c,h,l){if(l=l||open("","_blank"),l&&(l.document.title=l.document.body.innerText="downloading..."),typeof u=="string")return r(u,c,h);var d=u.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||d&&p||f)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var x=g.result;x=m?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=x:location=x,l=null},g.readAsDataURL(u)}else{var y=a.URL||a.webkitURL,b=y.createObjectURL(u);l?l.location=b:location.href=b,l=null,setTimeout(function(){y.revokeObjectURL(b)},4e4)}});a.saveAs=s.saveAs=s,t.exports=s})})(Tg);var yx=Tg.exports;const _x=Hh(yx);function St(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}St.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const r=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][e.operation][r][e.direction](e)};St.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};St.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};St.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=kg(0,t.length-1);return this.activate(t[e]),this};St.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=kg(0,t.length-1);this.activate(t[e])};St.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};St.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};St.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};St.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};St.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};St.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};St.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};St.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};St.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};St.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};St.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};St.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};St.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};St.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let r=1;r<this.stairs[t].val.length;r++)(n===1&&this.stairs[t].val[r]>this.stairs[t].val[r-1]||n===-1&&this.stairs[t].val[r]<this.stairs[t].val[r-1])&&(e[e.length]=this.stairs[t].val[r-1],n=n*-1);return e.shift(),e};St.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};St.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<e.length;r++)n=n+e[r];return n/e.length};const sc=function(){};sc.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};sc.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};St.prototype.checkErr=new sc;function kg(t,e){return Math.floor(Math.random()*(e-t+1))+t}function vh(t){let e,n,r,i,o,a,f,s,u,c,h,l,d,p,m,g,y,b,x,_,v,w,M,E,C,D,T,F,R,q,S,U,P,Y,V,H,L,z,G,J,Q,j,I;return{c(){e=O("div"),n=O("label"),r=pt(`ID:
        `),i=O("input"),o=K(),a=O("label"),f=pt(`Age:
        `),s=O("select"),u=O("option"),u.textContent="20-24",c=O("option"),c.textContent="25-29",h=O("option"),h.textContent="30-34",l=O("option"),l.textContent="35-39",d=O("option"),d.textContent="40-44",p=O("option"),p.textContent="45-49",m=O("option"),m.textContent="50-54",g=O("option"),g.textContent="55-60",y=K(),b=O("label"),x=pt(`Gender:
        `),_=O("input"),v=K(),w=O("label"),M=pt(`Highest finished education (select the best fitting one):
        `),E=O("select"),C=O("option"),C.textContent="none",D=O("option"),D.textContent="high school",T=O("option"),T.textContent="bachelor",F=O("option"),F.textContent="master",R=O("option"),R.textContent="phd",q=K(),S=O("label"),U=pt(`Which music instruments do you play?
        `),P=O("input"),Y=K(),V=O("label"),H=pt(`For how many years do you roughly play it/them?
        `),L=O("input"),z=K(),G=O("label"),J=pt(`How many years of experience do you have with visualization?
        `),Q=O("input"),Z(i,"type","text"),Z(i,"placeholder","ID"),Z(n,"class","svelte-u6a8gr"),u.__value="20-24",bt(u,u.__value),c.__value="25-29",bt(c,c.__value),h.__value="30-34",bt(h,h.__value),l.__value="35-39",bt(l,l.__value),d.__value="40-44",bt(d,d.__value),p.__value="45-49",bt(p,p.__value),m.__value="50-54",bt(m,m.__value),g.__value="55-60",bt(g,g.__value),t[5]===void 0&&zn(()=>t[22].call(s)),Z(a,"class","svelte-u6a8gr"),Z(_,"type","text"),Z(_,"placeholder","m, f, d, or self-describe"),Z(b,"class","svelte-u6a8gr"),C.__value="none",bt(C,C.__value),D.__value="highs",bt(D,D.__value),T.__value="bachelor",bt(T,T.__value),F.__value="master",bt(F,F.__value),R.__value="phd",bt(R,R.__value),t[7]===void 0&&zn(()=>t[24].call(E)),Z(w,"class","svelte-u6a8gr"),Z(P,"type","text"),Z(P,"placeholder","free text"),Z(S,"class","svelte-u6a8gr"),Z(L,"type","number"),Z(L,"min","0"),Z(L,"step","1"),Z(V,"class","svelte-u6a8gr"),Z(Q,"type","number"),Z(Q,"min","0"),Z(Q,"step","1"),Z(G,"class","svelte-u6a8gr"),Z(e,"class","demo-form svelte-u6a8gr")},m(B,k){ht(B,e,k),$(e,n),$(n,r),$(n,i),bt(i,t[4]),$(e,o),$(e,a),$(a,f),$(a,s),$(s,u),$(s,c),$(s,h),$(s,l),$(s,d),$(s,p),$(s,m),$(s,g),dn(s,t[5],!0),$(e,y),$(e,b),$(b,x),$(b,_),bt(_,t[6]),$(e,v),$(e,w),$(w,M),$(w,E),$(E,C),$(E,D),$(E,T),$(E,F),$(E,R),dn(E,t[7],!0),$(e,q),$(e,S),$(S,U),$(S,P),bt(P,t[8]),$(e,Y),$(e,V),$(V,H),$(V,L),bt(L,t[9]),$(e,z),$(e,G),$(G,J),$(G,Q),bt(Q,t[10]),j||(I=[kt(i,"input",t[21]),kt(s,"change",t[22]),kt(_,"input",t[23]),kt(E,"change",t[24]),kt(P,"input",t[25]),kt(L,"input",t[26]),kt(Q,"input",t[27])],j=!0)},p(B,k){k[0]&16&&i.value!==B[4]&&bt(i,B[4]),k[0]&32&&dn(s,B[5]),k[0]&64&&_.value!==B[6]&&bt(_,B[6]),k[0]&128&&dn(E,B[7]),k[0]&256&&P.value!==B[8]&&bt(P,B[8]),k[0]&512&&Mr(L.value)!==B[9]&&bt(L,B[9]),k[0]&1024&&Mr(Q.value)!==B[10]&&bt(Q,B[10])},d(B){B&&ut(e),j=!1,nn(I)}}}function xh(t){let e,n,r,i,o=t[13]&&Mh(t);return{c(){e=O("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=K(),o&&o.c(),r=Qs()},m(a,f){ht(a,e,f),ht(a,n,f),o&&o.m(a,f),ht(a,r,f),i=!0},p(a,f){a[13]?o?(o.p(a,f),f[0]&8192&&tt(o,1)):(o=Mh(a),o.c(),tt(o,1),o.m(r.parentNode,r)):o&&(Br(),st(o,1,1,()=>{o=null}),zr())},i(a){i||(tt(o),i=!0)},o(a){st(o),i=!1},d(a){a&&(ut(e),ut(n),ut(r)),o&&o.d(a)}}}function Mh(t){let e,n,r,i,o=t[3]+1+"",a,f,s,u,c,h=t[12]+1+"",l,d,p,m,g,y;const b=[vx,wx],x=[];function _(v,w){return v[16]==="audio"?0:v[15]===!1?1:-1}return~(p=_(t))&&(m=x[p]=b[p](t)),{c(){e=O("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=K(),r=O("p"),i=pt("Test number "),a=pt(o),f=pt(" / 7"),s=K(),u=O("p"),c=pt("Trial number "),l=pt(h),d=K(),m&&m.c(),g=Qs()},m(v,w){ht(v,e,w),ht(v,n,w),ht(v,r,w),$(r,i),$(r,a),$(r,f),ht(v,s,w),ht(v,u,w),$(u,c),$(u,l),ht(v,d,w),~p&&x[p].m(v,w),ht(v,g,w),y=!0},p(v,w){(!y||w[0]&8)&&o!==(o=v[3]+1+"")&&gn(a,o),(!y||w[0]&4096)&&h!==(h=v[12]+1+"")&&gn(l,h);let M=p;p=_(v),p===M?~p&&x[p].p(v,w):(m&&(Br(),st(x[M],1,1,()=>{x[M]=null}),zr()),~p?(m=x[p],m?m.p(v,w):(m=x[p]=b[p](v),m.c()),tt(m,1),m.m(g.parentNode,g)):m=null)},i(v){y||(tt(m),y=!0)},o(v){st(m),y=!1},d(v){v&&(ut(e),ut(n),ut(r),ut(s),ut(u),ut(d),ut(g)),~p&&x[p].d(v)}}}function wx(t){let e,n,r,i;const o=[Sx,$x,Mx,xx],a=[];function f(s,u){return s[16]==="waveform"?0:s[16]==="tick"?1:s[16]==="bar"?2:s[16]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),r=Qs()},m(s,u){~e&&a[e].m(s,u),ht(s,r,u),i=!0},p(s,u){let c=e;e=f(s),e===c?~e&&a[e].p(s,u):(n&&(Br(),st(a[c],1,1,()=>{a[c]=null}),zr()),~e?(n=a[e],n?n.p(s,u):(n=a[e]=o[e](s),n.c()),tt(n,1),n.m(r.parentNode,r)):n=null)},i(s){i||(tt(n),i=!0)},o(s){st(n),i=!1},d(s){s&&ut(r),~e&&a[e].d(s)}}}function vx(t){let e,n,r,i;return e=new Ma({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[12]}}),{c(){vt(e.$$.fragment),n=K(),r=O("p"),r.textContent="You can play the audio as many times as you like."},m(o,a){_t(e,o,a),ht(o,n,a),ht(o,r,a),i=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&4096&&(f.currentTrialNumber=o[12]),e.$set(f)},i(o){i||(tt(e.$$.fragment,o),i=!0)},o(o){st(e.$$.fragment,o),i=!1},d(o){o&&(ut(n),ut(r)),wt(e,o)}}}function xx(t){let e,n;return e=new va({props:{pattern:t[0],width:bf,height:yf}}),{c(){vt(e.$$.fragment)},m(r,i){_t(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){wt(e,r)}}}function Mx(t){let e,n;return e=new wa({props:{pattern:t[0],width:bf,height:yf}}),{c(){vt(e.$$.fragment)},m(r,i){_t(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){wt(e,r)}}}function $x(t){let e,n;return e=new _a({props:{pattern:t[0],width:bf,height:yf}}),{c(){vt(e.$$.fragment)},m(r,i){_t(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){wt(e,r)}}}function Sx(t){let e,n;return e=new xa({props:{pattern:t[0],audioFile:t[1],width:bf,height:yf}}),{c(){vt(e.$$.fragment)},m(r,i){_t(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),i[0]&2&&(o.audioFile=r[1]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){wt(e,r)}}}function $h(t){let e,n,r,i,o,a;return{c(){e=O("div"),n=O("label"),r=pt(`Any final feedback?
        `),i=O("textarea")},m(f,s){ht(f,e,s),$(e,n),$(n,r),$(n,i),bt(i,t[11]),o||(a=kt(i,"input",t[28]),o=!0)},p(f,s){s[0]&2048&&bt(i,f[11])},d(f){f&&ut(e),o=!1,a()}}}function Sh(t){let e,n,r,i,o,a;return{c(){e=O("div"),e.textContent="Thanks for participating!",n=K(),r=O("div"),i=O("button"),i.textContent="Download results"},m(f,s){ht(f,e,s),ht(f,n,s),ht(f,r,s),$(r,i),o||(a=kt(i,"click",t[18]),o=!0)},p:$t,d(f){f&&(ut(e),ut(n),ut(r)),o=!1,a()}}}function Th(t){let e,n,r;return{c(){e=O("button"),e.textContent="next step (PageDown)"},m(i,o){ht(i,e,o),n||(r=kt(e,"click",t[17]),n=!0)},p:$t,d(i){i&&ut(e),n=!1,r()}}}function Tx(t){let e,n,r,i,o,a,f,s,u=t[2]==="demo"&&vh(t),c=t[2]==="tests"&&xh(t),h=t[2]==="feedback"&&$h(t),l=t[2]==="done"&&Sh(t),d=!t[14]&&t[2]!=="done"&&Th(t);return{c(){e=O("main"),n=O("h2"),n.textContent="Study",r=K(),u&&u.c(),i=K(),c&&c.c(),o=K(),h&&h.c(),a=K(),l&&l.c(),f=K(),d&&d.c(),Z(e,"class","svelte-u6a8gr")},m(p,m){ht(p,e,m),$(e,n),$(e,r),u&&u.m(e,null),$(e,i),c&&c.m(e,null),$(e,o),h&&h.m(e,null),$(e,a),l&&l.m(e,null),$(e,f),d&&d.m(e,null),s=!0},p(p,m){p[2]==="demo"?u?u.p(p,m):(u=vh(p),u.c(),u.m(e,i)):u&&(u.d(1),u=null),p[2]==="tests"?c?(c.p(p,m),m[0]&4&&tt(c,1)):(c=xh(p),c.c(),tt(c,1),c.m(e,o)):c&&(Br(),st(c,1,1,()=>{c=null}),zr()),p[2]==="feedback"?h?h.p(p,m):(h=$h(p),h.c(),h.m(e,a)):h&&(h.d(1),h=null),p[2]==="done"?l?l.p(p,m):(l=Sh(p),l.c(),l.m(e,f)):l&&(l.d(1),l=null),!p[14]&&p[2]!=="done"?d?d.p(p,m):(d=Th(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(p){s||(tt(c),s=!0)},o(p){st(c),s=!1},d(p){p&&ut(e),u&&u.d(),c&&c.d(),h&&h.d(),l&&l.d(),d&&d.d()}}}let kh=.5;const es=20;let kx=6,Ex=!0,Cx=0,bf=600,yf=100;function Ax(t,e,n){let r;const i=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=i[0],a=[{stimulus:"audio",audioFile:i[0]},{stimulus:"audio",audioFile:i[1]},{stimulus:"waveform",audioFile:i[0]},{stimulus:"waveform",audioFile:i[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],f="start",s=0,u,c="",h="20-24",l="m",d="master",p="",m=0,g=0,y="",b=0,x,_={},v=[],w,M,E=!1,C=!1,D=!1,T="tick",F=es,R=4-1,q=[],S=[],U=0;const P=[];zh(()=>{document.querySelector("html").addEventListener("keyup",Q)});const Y=()=>{M=new St({ratio:{firstVal:es,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,es],direction:-1,reversalLimit:5,verbosity:1}}),M.init()};function V(){f==="start"?(a=d2(a),n(2,f="demo")):f==="demo"?(n(2,f="tests"),n(3,s=0)):f==="tests"?s<a.length?(n(16,T=a[s].stimulus),n(1,o=a[s].audioFile),H()):n(2,f="feedback"):f==="feedback"&&n(2,f="done")}function H(){Y(),n(12,b=0),x=0,w=0,n(13,E=!0),S=[],v=[],u=new Date,L()}function L(){console.log("Starting trial "+b),_={},n(14,C=!0),z()}function z(){let mt=Math.round(M.getLast("ratio"));mt=Math.random()<.5?mt:-mt,_.deviation=mt,n(19,F=mt),console.log("generated pattern",q),n(15,D=!0),window.setTimeout(()=>{n(15,D=!1)},1e3)}function G(dt){if(!C)return;n(14,C=!1),_.decisionChoice=dt,_.errorCode=0;const mt=w;(_.decisionChoice==0&&_.deviation<0||_.decisionChoice==1&&_.deviation>0)&&_.errorCode==0&&w++,_.errorCode==0&&(M.next(mt!=w),v[v.length]=_),_.errorCode==0&&x++,n(12,b++,b),M.reversalLimitReached("ratio")?J():L()}function J(){n(13,E=!1),j(),S=[],U=M.getFinalVal("ratio");for(let mt=0;mt<v.length;mt++)S[mt]=v[mt].deviation;console.log(S);const dt=new Date;P.push({encoding:T,audioFile:o,final:U,data:S,score:w,testNumber:s,trialCount:b+1,trials:v,validTrialCount:x+1,testTimeSeconds:(dt-u)/1e3}),n(3,s++,s)}function Q(dt){switch(console.log(dt.key),dt.key){case"ArrowLeft":G(0);break;case"ArrowRight":G(1);break;case"PageDown":!C&&f!=="done"&&V()}}function j(){`${w}`,b+1,`${(w/(b+1)*100).toFixed(1)}${M.getFinalVal("ratio")}`}function I(){const dt={demographics:{partID:c,partAge:h,partGender:l,partEduation:d,partMusicInstr:p,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:y},date:new Date().toISOString(),tests:P};console.log(dt);const mt=JSON.stringify(dt),oe=new Blob([mt],{type:"text/plain;charset=utf-8"});_x(oe,"results.json")}function B(){c=this.value,n(4,c)}function k(){h=Fo(this),n(5,h)}function N(){l=this.value,n(6,l)}function W(){d=Fo(this),n(7,d)}function A(){p=this.value,n(8,p)}function et(){m=Mr(this.value),n(9,m)}function X(){g=Mr(this.value),n(10,g)}function ft(){y=this.value,n(11,y)}return t.$$.update=()=>{t.$$.dirty[0]&524288&&n(20,r=F/100*kh),t.$$.dirty[0]&1048577&&(n(0,q=Ro(kx,kh,R,r,Ex,Cx)),console.log("generated pattern",q))},[q,o,f,s,c,h,l,d,p,m,g,y,b,E,C,D,T,V,I,F,r,B,k,N,W,A,et,X,ft]}class Nx extends ie{constructor(e){super(),re(this,e,Ax,Tx,ne,{},null,[-1,-1])}}function Dx(t){let e,n,r;return{c(){e=O("div"),Z(e,"width",n=t[0]+"px"),Z(e,"height",r=t[1]+"px")},m(i,o){ht(i,e,o),t[6](e)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&Z(e,"width",n),o&2&&r!==(r=i[1]+"px")&&Z(e,"height",r)},i:$t,o:$t,d(i){i&&ut(e),t[6](null)}}}function Lx(t,e,n){let{data:r}=e,{domain:i}=e,{title:o=""}=e,{width:a=800}=e,{height:f=100}=e,s;Qn(()=>{console.log(o);const c=En({width:a,height:f,marginLeft:70,marginRight:10,x:{label:o,domain:i},y:{axis:!1,type:"band"},marks:[Sg(r,{x:h=>h}),nc(r,{x:h=>h,dx:7,y:(h,l)=>l,text:(h,l)=>`P${l+1}`})]});n(2,s.textContent="",s),s.appendChild(c)});function u(c){Ie[c?"unshift":"push"](()=>{s=c,n(2,s)})}return t.$$set=c=>{"data"in c&&n(3,r=c.data),"domain"in c&&n(4,i=c.domain),"title"in c&&n(5,o=c.title),"width"in c&&n(0,a=c.width),"height"in c&&n(1,f=c.height)},[a,f,s,r,i,o,u]}class Fx extends ie{constructor(e){super(),re(this,e,Lx,Dx,ne,{data:3,domain:4,title:5,width:0,height:1})}}function Rx(t){let e,n,r;return{c(){e=O("div"),Z(e,"width",n=t[0]+"px"),Z(e,"height",r=t[1]+"px")},m(i,o){ht(i,e,o),t[5](e)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&Z(e,"width",n),o&2&&r!==(r=i[1]+"px")&&Z(e,"height",r)},i:$t,o:$t,d(i){i&&ut(e),t[5](null)}}}function Ix(t,e,n){let{stimuli:r}=e,{width:i=800}=e,{height:o=200}=e,a;Qn(()=>{const u=r.map(h=>({encoding:h.encoding,...f(h.finals)})),c=En({width:i,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:u.sort((h,l)=>h.mean-l.mean).map(h=>h.encoding)},marks:[$g(u,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),xg(u,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Ju([0])]});n(2,a.textContent="",a),a.appendChild(c)});function f(u){const c=u.length,h=Aa(u),p=1.96*(Ta(u)/Math.sqrt(c)),m=h-p,g=h+p;return{mean:h,low:m,high:g}}function s(u){Ie[u?"unshift":"push"](()=>{a=u,n(2,a)})}return t.$$set=u=>{"stimuli"in u&&n(3,r=u.stimuli),"width"in u&&n(0,i=u.width),"height"in u&&n(1,o=u.height)},[i,o,a,r,f,s]}class Px extends ie{constructor(e){super(),re(this,e,Ix,Rx,ne,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Ox(t){let e,n,r;return{c(){e=O("div"),Z(e,"width",n=t[0]+"px"),Z(e,"height",r=t[1]+"px")},m(i,o){ht(i,e,o),t[5](e)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&Z(e,"width",n),o&2&&r!==(r=i[1]+"px")&&Z(e,"height",r)},i:$t,o:$t,d(i){i&&ut(e),t[5](null)}}}function Ux(t,e,n){let{stimuli:r}=e,{width:i=800}=e,{height:o=200}=e,a;Qn(()=>{const u=r.map(h=>({encoding:h.encoding,...f(h.trialCounts)})),c=En({width:i,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:u.sort((h,l)=>h.mean-l.mean).map(h=>h.encoding)},marks:[$g(u,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),xg(u,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Ju([0])]});n(2,a.textContent="",a),a.appendChild(c)});function f(u){const c=u.length,h=Aa(u),p=1.96*(Ta(u)/Math.sqrt(c)),m=h-p,g=h+p;return{mean:h,low:m,high:g}}function s(u){Ie[u?"unshift":"push"](()=>{a=u,n(2,a)})}return t.$$set=u=>{"stimuli"in u&&n(3,r=u.stimuli),"width"in u&&n(0,i=u.width),"height"in u&&n(1,o=u.height)},[i,o,a,r,f,s]}class Bx extends ie{constructor(e){super(),re(this,e,Ux,Ox,ne,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Eh(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ch(t,e,n){const r=t.slice();return r[11]=e[n],r}function Ah(t){let e,n=t[11].encoding+"",r,i,o,a;return o=new Fx({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=O("b"),r=pt(n),i=K(),vt(o.$$.fragment)},m(f,s){ht(f,e,s),$(e,r),ht(f,i,s),_t(o,f,s),a=!0},p(f,s){(!a||s&4)&&n!==(n=f[11].encoding+"")&&gn(r,n);const u={};s&4&&(u.data=f[11].finals),s&4&&(u.title=f[11].encoding),s&2&&(u.domain=[0,f[1]]),o.$set(u)},i(f){a||(tt(o.$$.fragment,f),a=!0)},o(f){st(o.$$.fragment,f),a=!1},d(f){f&&(ut(e),ut(i)),wt(o,f)}}}function Nh(t){let e,n,r,i=t[8].demographics.partID+"",o,a,f,s,u=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",c;return{c(){e=O("div"),n=O("b"),r=pt("P"),o=pt(i),a=pt(":"),f=K(),s=new Ug(!1),c=K(),s.a=c,Qt(e,"text-align","left")},m(h,l){ht(h,e,l),$(e,n),$(n,r),$(n,o),$(n,a),$(e,f),s.m(u,e),$(e,c)},p(h,l){l&1&&i!==(i=h[8].demographics.partID+"")&&gn(o,i),l&1&&u!==(u=h[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&s.p(u)},d(h){h&&ut(e)}}}function zx(t){let e,n,r,i,o,a,f,s,u,c,h,l,d,p,m,g,y,b,x,_,v,w,M,E,C,D,T;h=new Px({props:{stimuli:t[2]}}),g=new Bx({props:{stimuli:t[2]}});let F=pn(t[2]),R=[];for(let P=0;P<F.length;P+=1)R[P]=Ah(Ch(t,F,P));const q=P=>st(R[P],1,1,()=>{R[P]=null});let S=pn(t[0]),U=[];for(let P=0;P<S.length;P+=1)U[P]=Nh(Eh(t,S,P));return{c(){e=O("main"),n=O("h2"),n.textContent="Analysis",r=K(),i=O("p"),i.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=K(),a=O("input"),f=K(),s=O("div"),u=O("h3"),u.textContent="Mean and CI of Final Values",c=K(),vt(h.$$.fragment),l=K(),d=O("div"),p=O("h3"),p.textContent="Mean and CI of Trial Counts",m=K(),vt(g.$$.fragment),y=K(),b=O("div"),x=O("h3"),x.textContent="Final Values for Each Stimulus and All Participants",_=K();for(let P=0;P<R.length;P+=1)R[P].c();v=K(),w=O("div"),M=O("h3"),M.textContent="Feedback",E=K();for(let P=0;P<U.length;P+=1)U[P].c();Z(a,"type","file"),Z(a,"accept",".json"),a.multiple=!0},m(P,Y){ht(P,e,Y),$(e,n),$(e,r),$(e,i),$(e,o),$(e,a),$(e,f),$(e,s),$(s,u),$(s,c),_t(h,s,null),$(e,l),$(e,d),$(d,p),$(d,m),_t(g,d,null),$(e,y),$(e,b),$(b,x),$(b,_);for(let V=0;V<R.length;V+=1)R[V]&&R[V].m(b,null);$(e,v),$(e,w),$(w,M),$(w,E);for(let V=0;V<U.length;V+=1)U[V]&&U[V].m(w,null);C=!0,D||(T=kt(a,"input",t[3]),D=!0)},p(P,[Y]){const V={};Y&4&&(V.stimuli=P[2]),h.$set(V);const H={};if(Y&4&&(H.stimuli=P[2]),g.$set(H),Y&6){F=pn(P[2]);let L;for(L=0;L<F.length;L+=1){const z=Ch(P,F,L);R[L]?(R[L].p(z,Y),tt(R[L],1)):(R[L]=Ah(z),R[L].c(),tt(R[L],1),R[L].m(b,null))}for(Br(),L=F.length;L<R.length;L+=1)q(L);zr()}if(Y&1){S=pn(P[0]);let L;for(L=0;L<S.length;L+=1){const z=Eh(P,S,L);U[L]?U[L].p(z,Y):(U[L]=Nh(z),U[L].c(),U[L].m(w,null))}for(;L<U.length;L+=1)U[L].d(1);U.length=S.length}},i(P){if(!C){tt(h.$$.fragment,P),tt(g.$$.fragment,P);for(let Y=0;Y<F.length;Y+=1)tt(R[Y]);C=!0}},o(P){st(h.$$.fragment,P),st(g.$$.fragment,P),R=R.filter(Boolean);for(let Y=0;Y<R.length;Y+=1)st(R[Y]);C=!1},d(P){P&&ut(e),wt(h),wt(g),Lo(R,P),Lo(U,P),D=!1,T()}}}function qx(t,e,n){let r,i,o,a=[];const f=async c=>{const h=[],l=[];for(const d of c.target.files){const p=await d.text();h.push(JSON.parse(p)),l.push(d.name)}n(0,a=h),console.log(a)},s=c=>{if(c.lenght===0)return[];const h=[];for(const l of c)for(const d of l.tests){let p=d.encoding;(d.encoding==="audio"||d.encoding==="waveform")&&(p=`${d.encoding} + ${d.audioFile.startsWith("./Fluid")?"piano":"drums"}`),h.push({...l.demographics,...d,date:l.date,testType:p})}return console.log(h),h},u=c=>{if(c.length===0)return[];const h=$2(c,l=>l.testType).map(([l,d])=>{const p=d.map(m=>m.final);return{encoding:l,finals:p,finalMean:Aa(p),finalVar:tu(p),trialCounts:d.map(m=>m.trialCount)}});return console.log(h),h};return t.$$.update=()=>{t.$$.dirty&1&&n(4,r=s(a)),t.$$.dirty&16&&n(2,i=u(r)),t.$$.dirty&16&&n(1,o=de(r.map(c=>Math.abs(c.final))))},[a,o,i,f,r]}class Hx extends ie{constructor(e){super(),re(this,e,qx,zx,ne,{})}}function Dh(t,e,n){const r=t.slice();return r[8]=e[n],r}function Lh(t){let e,n=t[8].substring(0,30)+"",r;return{c(){e=O("option"),r=pt(n),e.__value=t[8],bt(e,e.__value)},m(i,o){ht(i,e,o),$(e,r)},p:$t,d(i){i&&ut(e)}}}function Wx(t){let e,n,r,i,o,a,f,s,u=(t[1]*1e3).toFixed(1)+"",c,h,l,d,p,m,g,y,b,x,_,v,w,M,E,C,D,T,F,R,q,S,U,P,Y,V,H,L,z,G,J,Q,j,I,B=pn(t[5]),k=[];for(let N=0;N<B.length;N+=1)k[N]=Lh(Dh(t,B,N));return w=new Ma({props:{pattern:t[3],audioFile:t[2]}}),E=new Ma({props:{pattern:t[4],audioFile:t[2]}}),D=new xa({props:{pattern:t[3],audioFile:t[2],width:sn,height:un}}),F=new xa({props:{pattern:t[4],audioFile:t[2],width:sn,height:un}}),q=new _a({props:{pattern:t[3],width:sn,height:un}}),U=new _a({props:{pattern:t[4],width:sn,height:un}}),Y=new wa({props:{pattern:t[3],width:sn,height:un}}),H=new wa({props:{pattern:t[4],width:sn,height:un}}),z=new va({props:{pattern:t[3],width:sn,height:un}}),J=new va({props:{pattern:t[4],width:sn,height:un}}),{c(){e=O("main"),n=O("h2"),n.textContent="Examples",r=K(),i=O("div"),o=O("label"),a=pt(`deviation
      `),f=O("input"),s=pt(`
      (`),c=pt(u),h=pt(" milliseconds)"),l=K(),d=O("label"),p=pt(`instrument sample:
      `),m=O("select");for(let N=0;N<k.length;N+=1)k[N].c();g=K(),y=O("div"),b=O("h2"),b.textContent="early fourth note",x=K(),_=O("h2"),_.textContent="late fourth note",v=K(),vt(w.$$.fragment),M=K(),vt(E.$$.fragment),C=K(),vt(D.$$.fragment),T=K(),vt(F.$$.fragment),R=K(),vt(q.$$.fragment),S=K(),vt(U.$$.fragment),P=K(),vt(Y.$$.fragment),V=K(),vt(H.$$.fragment),L=K(),vt(z.$$.fragment),G=K(),vt(J.$$.fragment),Z(f,"type","range"),Z(f,"min","0"),Z(f,"max","20"),Z(f,"step","1"),Z(o,"class","svelte-1kjj0oz"),t[2]===void 0&&zn(()=>t[7].call(m)),Z(d,"class","svelte-1kjj0oz"),Z(y,"class","stimuli svelte-1kjj0oz")},m(N,W){ht(N,e,W),$(e,n),$(e,r),$(e,i),$(i,o),$(o,a),$(o,f),bt(f,t[0]),$(o,s),$(o,c),$(o,h),$(i,l),$(i,d),$(d,p),$(d,m);for(let A=0;A<k.length;A+=1)k[A]&&k[A].m(m,null);dn(m,t[2],!0),$(e,g),$(e,y),$(y,b),$(y,x),$(y,_),$(y,v),_t(w,y,null),$(y,M),_t(E,y,null),$(y,C),_t(D,y,null),$(y,T),_t(F,y,null),$(y,R),_t(q,y,null),$(y,S),_t(U,y,null),$(y,P),_t(Y,y,null),$(y,V),_t(H,y,null),$(y,L),_t(z,y,null),$(y,G),_t(J,y,null),Q=!0,j||(I=[kt(f,"change",t[6]),kt(f,"input",t[6]),kt(m,"change",t[7])],j=!0)},p(N,[W]){if(W&1&&bt(f,N[0]),(!Q||W&2)&&u!==(u=(N[1]*1e3).toFixed(1)+"")&&gn(c,u),W&32){B=pn(N[5]);let qt;for(qt=0;qt<B.length;qt+=1){const eo=Dh(N,B,qt);k[qt]?k[qt].p(eo,W):(k[qt]=Lh(eo),k[qt].c(),k[qt].m(m,null))}for(;qt<k.length;qt+=1)k[qt].d(1);k.length=B.length}W&36&&dn(m,N[2]);const A={};W&8&&(A.pattern=N[3]),W&4&&(A.audioFile=N[2]),w.$set(A);const et={};W&16&&(et.pattern=N[4]),W&4&&(et.audioFile=N[2]),E.$set(et);const X={};W&8&&(X.pattern=N[3]),W&4&&(X.audioFile=N[2]),D.$set(X);const ft={};W&16&&(ft.pattern=N[4]),W&4&&(ft.audioFile=N[2]),F.$set(ft);const dt={};W&8&&(dt.pattern=N[3]),q.$set(dt);const mt={};W&16&&(mt.pattern=N[4]),U.$set(mt);const oe={};W&8&&(oe.pattern=N[3]),Y.$set(oe);const Cn={};W&16&&(Cn.pattern=N[4]),H.$set(Cn);const ir={};W&8&&(ir.pattern=N[3]),z.$set(ir);const or={};W&16&&(or.pattern=N[4]),J.$set(or)},i(N){Q||(tt(w.$$.fragment,N),tt(E.$$.fragment,N),tt(D.$$.fragment,N),tt(F.$$.fragment,N),tt(q.$$.fragment,N),tt(U.$$.fragment,N),tt(Y.$$.fragment,N),tt(H.$$.fragment,N),tt(z.$$.fragment,N),tt(J.$$.fragment,N),Q=!0)},o(N){st(w.$$.fragment,N),st(E.$$.fragment,N),st(D.$$.fragment,N),st(F.$$.fragment,N),st(q.$$.fragment,N),st(U.$$.fragment,N),st(Y.$$.fragment,N),st(H.$$.fragment,N),st(z.$$.fragment,N),st(J.$$.fragment,N),Q=!1},d(N){N&&ut(e),Lo(k,N),wt(w),wt(E),wt(D),wt(F),wt(q),wt(U),wt(Y),wt(H),wt(z),wt(J),j=!1,nn(I)}}}let sn=600,un=100,ns=.5,Fh=6,Rh=3,Ih=!0,Ph=0;function Yx(t,e,n){let r;const i=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=i[0],a=20,f=[],s=[];function u(){a=Mr(this.value),n(0,a)}function c(){o=Fo(this),n(2,o),n(5,i)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,r=a/100*ns),t.$$.dirty&2&&n(3,f=Ro(Fh,ns,Rh,-r,Ih,Ph)),t.$$.dirty&2&&n(4,s=Ro(Fh,ns,Rh,r,Ih,Ph))},[a,r,o,f,s,i,u,c]}class Gx extends ie{constructor(e){super(),re(this,e,Yx,Wx,ne,{})}}function Vx(t){let e,n;return e=new Hx({}),{c(){vt(e.$$.fragment)},m(r,i){_t(e,r,i),n=!0},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){wt(e,r)}}}function Xx(t){let e,n;return e=new Nx({}),{c(){vt(e.$$.fragment)},m(r,i){_t(e,r,i),n=!0},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){wt(e,r)}}}function jx(t){let e,n;return e=new Gx({}),{c(){vt(e.$$.fragment)},m(r,i){_t(e,r,i),n=!0},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){wt(e,r)}}}function Zx(t){let e,n;return e=new bx({}),{c(){vt(e.$$.fragment)},m(r,i){_t(e,r,i),n=!0},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){st(e.$$.fragment,r),n=!1},d(r){wt(e,r)}}}function Kx(t){let e,n,r,i,o,a,f,s,u,c,h,l,d,p,m,g,y;const b=[Zx,jx,Xx,Vx],x=[];function _(v,w){return v[0]==="playground"?0:v[0]==="examples"?1:v[0]==="study"?2:v[0]==="analysis"?3:-1}return~(d=_(t))&&(p=x[d]=b[d](t)),{c(){e=O("main"),n=O("h1"),n.textContent="Rhythm Error Perception Study",r=K(),i=O("div"),o=O("button"),o.textContent="Playground",a=K(),f=O("button"),f.textContent="Examples",s=K(),u=O("button"),u.textContent="Study",c=K(),h=O("button"),h.textContent="Analysis",l=K(),p&&p.c()},m(v,w){ht(v,e,w),$(e,n),$(e,r),$(e,i),$(i,o),$(i,a),$(i,f),$(i,s),$(i,u),$(i,c),$(i,h),$(e,l),~d&&x[d].m(e,null),m=!0,g||(y=[kt(o,"click",t[1]),kt(f,"click",t[2]),kt(u,"click",t[3]),kt(h,"click",t[4])],g=!0)},p(v,[w]){let M=d;d=_(v),d!==M&&(p&&(Br(),st(x[M],1,1,()=>{x[M]=null}),zr()),~d?(p=x[d],p||(p=x[d]=b[d](v),p.c()),tt(p,1),p.m(e,null)):p=null)},i(v){m||(tt(p),m=!0)},o(v){st(p),m=!1},d(v){v&&ut(e),~d&&x[d].d(),g=!1,nn(y)}}}function Qx(t,e,n){let r="study";return[r,()=>n(0,r="playground"),()=>n(0,r="examples"),()=>n(0,r="study"),()=>n(0,r="analysis")]}class Jx extends ie{constructor(e){super(),re(this,e,Qx,Kx,ne,{})}}new Jx({target:document.getElementById("app")});export{Hh as g};

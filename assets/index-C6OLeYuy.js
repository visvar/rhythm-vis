var oG=Object.defineProperty;var Z6=e=>{throw TypeError(e)};var lG=(e,t,i)=>t in e?oG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var xr=(e,t,i)=>lG(e,typeof t!="symbol"?t+"":t,i),e_=(e,t,i)=>t.has(e)||Z6("Cannot "+i);var Bn=(e,t,i)=>(e_(e,t,"read from private field"),i?i.call(e):t.get(e)),Vr=(e,t,i)=>t.has(e)?Z6("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),Sr=(e,t,i,r)=>(e_(e,t,"write to private field"),r?r.call(e,i):t.set(e,i),i);var t_=(e,t,i,r)=>({set _(a){Sr(e,t,a,i)},get _(){return Bn(e,t,r)}});function cG(e,t){for(var i=0;i<t.length;i++){const r=t[i];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(r,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function i(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=i(a);fetch(a.href,o)}})();function yn(){}function uw(e){return e()}function n_(){return Object.create(null)}function Vi(e){e.forEach(uw)}function _g(e){return typeof e=="function"}function pi(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function uG(e){return Object.keys(e).length===0}function A1(e){return e??""}function D(e,t){e.appendChild(t)}function Rt(e,t,i){e.insertBefore(t,i||null)}function Bt(e){e.parentNode&&e.parentNode.removeChild(e)}function Gn(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function ie(e){return document.createElement(e)}function ze(e){return document.createTextNode(e)}function ue(){return ze(" ")}function nb(){return ze("")}function nt(e,t,i,r){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function de(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function zn(e,t,i){const r=t.toLowerCase();r in e?e[r]=typeof e[r]=="boolean"&&i===""?!0:i:t in e?e[t]=typeof e[t]=="boolean"&&i===""?!0:i:de(e,t,i)}function $n(e){return e===""?null:+e}function hG(e){return Array.from(e.childNodes)}function Ht(e,t){t=""+t,e.data!==t&&(e.data=t)}function rn(e,t){e.value=t??""}function Ei(e,t,i,r){i==null?e.style.removeProperty(t):e.style.setProperty(t,i,"")}function ri(e,t,i){for(let r=0;r<e.options.length;r+=1){const a=e.options[r];if(a.__value===t){a.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function Ir(e){const t=e.querySelector(":checked");return t&&t.__value}function v1(e,t){return new e(t)}let Gf;function Sf(e){Gf=e}function hw(){if(!Gf)throw new Error("Function called outside component initialization");return Gf}function ur(e){hw().$$.on_mount.push(e)}function hr(e){hw().$$.on_destroy.push(e)}const hh=[],En=[];let Mh=[];const Iv=[],dG=Promise.resolve();let Tv=!1;function fG(){Tv||(Tv=!0,dG.then(dw))}function mr(e){Mh.push(e)}function Oi(e){Iv.push(e)}const x3=new Set;let oh=0;function dw(){if(oh!==0)return;const e=Gf;do{try{for(;oh<hh.length;){const t=hh[oh];oh++,Sf(t),mG(t.$$)}}catch(t){throw hh.length=0,oh=0,t}for(Sf(null),hh.length=0,oh=0;En.length;)En.pop()();for(let t=0;t<Mh.length;t+=1){const i=Mh[t];x3.has(i)||(x3.add(i),i())}Mh.length=0}while(hh.length);for(;Iv.length;)Iv.pop()();Tv=!1,x3.clear(),Sf(e)}function mG(e){if(e.fragment!==null){e.update(),Vi(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(mr)}}function pG(e){const t=[],i=[];Mh.forEach(r=>e.indexOf(r)===-1?t.push(r):i.push(r)),i.forEach(r=>r()),Mh=t}const t1=new Set;let Ku;function Cg(){Ku={r:0,c:[],p:Ku}}function Eg(){Ku.r||Vi(Ku.c),Ku=Ku.p}function ut(e,t){e&&e.i&&(t1.delete(e),e.i(t))}function ht(e,t,i,r){if(e&&e.o){if(t1.has(e))return;t1.add(e),Ku.c.push(()=>{t1.delete(e),r&&(i&&e.d(1),r())}),e.o(t)}else r&&r()}function nn(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Di(e,t,i){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=i,i(e.$$.ctx[r]))}function gt(e){e&&e.c()}function ft(e,t,i){const{fragment:r,after_update:a}=e.$$;r&&r.m(t,i),mr(()=>{const o=e.$$.on_mount.map(uw).filter(_g);e.$$.on_destroy?e.$$.on_destroy.push(...o):Vi(o),e.$$.on_mount=[]}),a.forEach(mr)}function mt(e,t){const i=e.$$;i.fragment!==null&&(pG(i.after_update),Vi(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function gG(e,t){e.$$.dirty[0]===-1&&(hh.push(e),fG(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function gi(e,t,i,r,a,o,h=null,u=[-1]){const m=Gf;Sf(e);const c=e.$$={fragment:null,ctx:[],props:o,update:yn,not_equal:a,bound:n_(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:n_(),dirty:u,skip_bound:!1,root:t.target||m.$$.root};h&&h(c.root);let d=!1;if(c.ctx=i?i(e,t.props||{},(A,p,...v)=>{const g=v.length?v[0]:p;return c.ctx&&a(c.ctx[A],c.ctx[A]=g)&&(!c.skip_bound&&c.bound[A]&&c.bound[A](g),d&&gG(e,A)),p}):[],c.update(),d=!0,Vi(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const A=hG(t.target);c.fragment&&c.fragment.l(A),A.forEach(Bt)}else c.fragment&&c.fragment.c();t.intro&&ut(e.$$.fragment),ft(e,t.target,t.anchor),dw()}Sf(m)}class Ai{constructor(){xr(this,"$$");xr(this,"$$set")}$destroy(){mt(this,1),this.$destroy=yn}$on(t,i){if(!_g(i))return yn;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(i),()=>{const a=r.indexOf(i);a!==-1&&r.splice(a,1)}}$set(t){this.$$set&&!uG(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const AG="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(AG);const fw="0.4.0";function nf(e,t,i){const r=new URLSearchParams(e.location.search);r.set(t,i);const a=`${e.location.protocol}//${e.location.host}${e.location.pathname}?${r.toString()}`;e.history.pushState({path:a},"",a)}function vG(e,t){return new URLSearchParams(e.location.search).get(t)}function $a(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function A9(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wg(e){let t,i,r;e.length!==2?(t=$a,i=(u,m)=>$a(e(u),m),r=(u,m)=>e(u)-m):(t=e===$a||e===A9?e:yG,i=e,r=e);function a(u,m,c=0,d=u.length){if(c<d){if(t(m,m)!==0)return d;do{const A=c+d>>>1;i(u[A],m)<0?c=A+1:d=A}while(c<d)}return c}function o(u,m,c=0,d=u.length){if(c<d){if(t(m,m)!==0)return d;do{const A=c+d>>>1;i(u[A],m)<=0?c=A+1:d=A}while(c<d)}return c}function h(u,m,c=0,d=u.length){const A=a(u,m,c,d-1);return A>c&&r(u[A-1],m)>-r(u[A],m)?A-1:A}return{left:a,center:h,right:o}}function yG(){return 0}function mw(e){return e===null?NaN:+e}function*bG(e,t){if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(yield i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(r=+r)>=r&&(yield r)}}const MG=wg($a),v9=MG.right;wg(mw).center;function ib(e,t){let i=0;for(let r of e)r!=null&&(r=+r)>=r&&++i;return i}function _G(e){return e.length|0}function CG(e){return!(e>0)}function EG(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function wG(e){return t=>e(...t)}function xG(...e){const t=typeof e[e.length-1]=="function"&&wG(e.pop());e=e.map(EG);const i=e.map(_G),r=e.length-1,a=new Array(r+1).fill(0),o=[];if(r<0||i.some(CG))return o;for(;;){o.push(a.map((u,m)=>e[m][u]));let h=r;for(;++a[h]===i[h];){if(h===0)return t?o.map(t):o;a[h--]=0}}}function SG(e,t){var i=0;return Float64Array.from(e,r=>i+=+r||0)}function pw(e,t){let i=0,r,a=0,o=0;if(t===void 0)for(let h of e)h!=null&&(h=+h)>=h&&(r=h-a,a+=r/++i,o+=r*(h-a));else{let h=-1;for(let u of e)(u=t(u,++h,e))!=null&&(u=+u)>=u&&(r=u-a,a+=r/++i,o+=r*(u-a))}if(i>1)return o/(i-1)}function gw(e,t){const i=pw(e,t);return i&&Math.sqrt(i)}function Ps(e,t){let i,r;if(t===void 0)for(const a of e)a!=null&&(i===void 0?a>=a&&(i=r=a):(i>a&&(i=a),r<a&&(r=a)));else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&(i===void 0?o>=o&&(i=r=o):(i>o&&(i=o),r<o&&(r=o)))}return[i,r]}class r0{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let r=0;for(let a=0;a<this._n&&a<32;a++){const o=i[a],h=t+o,u=Math.abs(t)<Math.abs(o)?t-(h-o):o-(h-t);u&&(i[r++]=u),t=h}return i[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let i=this._n,r,a,o,h=0;if(i>0){for(h=t[--i];i>0&&(r=h,a=t[--i],h=r+a,o=a-(h-r),!o););i>0&&(o<0&&t[i-1]<0||o>0&&t[i-1]>0)&&(a=o*2,r=h+a,a==r-h&&(h=r))}return h}}class s0 extends Map{constructor(t,i=yw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(Bv(this,t))}has(t){return super.has(Bv(this,t))}set(t,i){return super.set(Aw(this,t),i)}delete(t){return super.delete(vw(this,t))}}class y9 extends Set{constructor(t,i=yw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Bv(this,t))}add(t){return super.add(Aw(this,t))}delete(t){return super.delete(vw(this,t))}}function Bv({_intern:e,_key:t},i){const r=t(i);return e.has(r)?e.get(r):i}function Aw({_intern:e,_key:t},i){const r=t(i);return e.has(r)?e.get(r):(e.set(r,i),i)}function vw({_intern:e,_key:t},i){const r=t(i);return e.has(r)&&(i=e.get(r),e.delete(r)),i}function yw(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Vf(e){return e}function xg(e,...t){return Sg(e,Vf,Vf,t)}function Qf(e,...t){return Sg(e,Array.from,Vf,t)}function _h(e,t,...i){return Sg(e,Vf,t,i)}function IG(e,t,...i){return Sg(e,Array.from,t,i)}function Sg(e,t,i,r){return function a(o,h){if(h>=r.length)return i(o);const u=new s0,m=r[h++];let c=-1;for(const d of o){const A=m(d,++c,o),p=u.get(A);p?p.push(d):u.set(A,[d])}for(const[d,A]of u)u.set(d,a(A,h));return t(u)}(e,0)}function TG(e,t){return Array.from(t,i=>e[i])}function y1(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[i]=t;if(i&&i.length!==2||t.length>1){const r=Uint32Array.from(e,(a,o)=>o);return t.length>1?(t=t.map(a=>e.map(a)),r.sort((a,o)=>{for(const h of t){const u=b1(h[a],h[o]);if(u)return u}})):(i=e.map(i),r.sort((a,o)=>b1(i[a],i[o]))),TG(e,r)}return e.sort(bw(i))}function bw(e=$a){if(e===$a)return b1;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const r=e(t,i);return r||r===0?r:(e(i,i)===0)-(e(t,t)===0)}}function b1(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function rb(e,t,i){return(t.length!==2?y1(_h(e,t,i),([r,a],[o,h])=>$a(a,h)||$a(r,o)):y1(xg(e,i),([r,a],[o,h])=>t(a,h)||$a(r,o))).map(([r])=>r)}var BG=Array.prototype,RG=BG.slice;function S3(e){return()=>e}const OG=Math.sqrt(50),DG=Math.sqrt(10),LG=Math.sqrt(2);function M1(e,t,i){const r=(t-e)/Math.max(0,i),a=Math.floor(Math.log10(r)),o=r/Math.pow(10,a),h=o>=OG?10:o>=DG?5:o>=LG?2:1;let u,m,c;return a<0?(c=Math.pow(10,-a)/h,u=Math.round(e*c),m=Math.round(t*c),u/c<e&&++u,m/c>t&&--m,c=-c):(c=Math.pow(10,a)*h,u=Math.round(e/c),m=Math.round(t/c),u*c<e&&++u,m*c>t&&--m),m<u&&.5<=i&&i<2?M1(e,t,i*2):[u,m,c]}function Dh(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const r=t<e,[a,o,h]=r?M1(t,e,i):M1(e,t,i);if(!(o>=a))return[];const u=o-a+1,m=new Array(u);if(r)if(h<0)for(let c=0;c<u;++c)m[c]=(o-c)/-h;else for(let c=0;c<u;++c)m[c]=(o-c)*h;else if(h<0)for(let c=0;c<u;++c)m[c]=(a+c)/-h;else for(let c=0;c<u;++c)m[c]=(a+c)*h;return m}function a0(e,t,i){return t=+t,e=+e,i=+i,M1(e,t,i)[2]}function Rv(e,t,i){t=+t,e=+e,i=+i;const r=t<e,a=r?a0(t,e,i):a0(e,t,i);return(r?-1:1)*(a<0?1/-a:a)}function PG(e,t,i){let r;for(;;){const a=a0(e,t,i);if(a===r||a===0||!isFinite(a))return[e,t];a>0?(e=Math.floor(e/a)*a,t=Math.ceil(t/a)*a):a<0&&(e=Math.ceil(e*a)/a,t=Math.floor(t*a)/a),r=a}}function Mw(e){return Math.max(1,Math.ceil(Math.log(ib(e))/Math.LN2)+1)}function sb(){var e=Vf,t=Ps,i=Mw;function r(a){Array.isArray(a)||(a=Array.from(a));var o,h=a.length,u,m,c=new Array(h);for(o=0;o<h;++o)c[o]=e(a[o],o,a);var d=t(c),A=d[0],p=d[1],v=i(c,A,p);if(!Array.isArray(v)){const x=p,C=+v;if(t===Ps&&([A,p]=PG(A,p,C)),v=Dh(A,p,C),v[0]<=A&&(m=a0(A,p,C)),v[v.length-1]>=p)if(x>=p&&t===Ps){const w=a0(A,p,C);isFinite(w)&&(w>0?p=(Math.floor(p/w)+1)*w:w<0&&(p=(Math.ceil(p*-w)+1)/-w))}else v.pop()}for(var g=v.length,y=0,E=g;v[y]<=A;)++y;for(;v[E-1]>p;)--E;(y||E<g)&&(v=v.slice(y,E),g=E-y);var _=new Array(g+1),S;for(o=0;o<=g;++o)S=_[o]=[],S.x0=o>0?v[o-1]:A,S.x1=o<g?v[o]:p;if(isFinite(m)){if(m>0)for(o=0;o<h;++o)(u=c[o])!=null&&A<=u&&u<=p&&_[Math.min(g,Math.floor((u-A)/m))].push(a[o]);else if(m<0){for(o=0;o<h;++o)if((u=c[o])!=null&&A<=u&&u<=p){const x=Math.floor((A-u)*m);_[Math.min(g,x+(v[x]<=u))].push(a[o])}}}else for(o=0;o<h;++o)(u=c[o])!=null&&A<=u&&u<=p&&_[v9(v,u,0,g)].push(a[o]);return _}return r.value=function(a){return arguments.length?(e=typeof a=="function"?a:S3(a),r):e},r.domain=function(a){return arguments.length?(t=typeof a=="function"?a:S3([a[0],a[1]]),r):t},r.thresholds=function(a){return arguments.length?(i=typeof a=="function"?a:S3(Array.isArray(a)?RG.call(a):a),r):i},r}function os(e,t){let i;if(t===void 0)for(const r of e)r!=null&&(i<r||i===void 0&&r>=r)&&(i=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(i<a||i===void 0&&a>=a)&&(i=a)}return i}function NG(e,t){let i,r=-1,a=-1;if(t===void 0)for(const o of e)++a,o!=null&&(i<o||i===void 0&&o>=o)&&(i=o,r=a);else for(let o of e)(o=t(o,++a,e))!=null&&(i<o||i===void 0&&o>=o)&&(i=o,r=a);return r}function Pa(e,t){let i;if(t===void 0)for(const r of e)r!=null&&(i>r||i===void 0&&r>=r)&&(i=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(i>a||i===void 0&&a>=a)&&(i=a)}return i}function b9(e,t){let i,r=-1,a=-1;if(t===void 0)for(const o of e)++a,o!=null&&(i>o||i===void 0&&o>=o)&&(i=o,r=a);else for(let o of e)(o=t(o,++a,e))!=null&&(i>o||i===void 0&&o>=o)&&(i=o,r=a);return r}function _w(e,t,i=0,r=1/0,a){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),r=Math.floor(Math.min(e.length-1,r)),!(i<=t&&t<=r))return e;for(a=a===void 0?b1:bw(a);r>i;){if(r-i>600){const m=r-i+1,c=t-i+1,d=Math.log(m),A=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*A*(m-A)/m)*(c-m/2<0?-1:1),v=Math.max(i,Math.floor(t-c*A/m+p)),g=Math.min(r,Math.floor(t+(m-c)*A/m+p));_w(e,t,v,g,a)}const o=e[t];let h=i,u=r;for(rf(e,i,t),a(e[r],o)>0&&rf(e,i,r);h<u;){for(rf(e,h,u),++h,--u;a(e[h],o)<0;)++h;for(;a(e[u],o)>0;)--u}a(e[i],o)===0?rf(e,i,u):(++u,rf(e,u,r)),u<=t&&(i=u+1),t<=u&&(r=u-1)}return e}function rf(e,t,i){const r=e[t];e[t]=e[i],e[i]=r}function Cw(e,t=$a){let i,r=!1;if(t.length===1){let a;for(const o of e){const h=t(o);(r?$a(h,a)>0:$a(h,h)===0)&&(i=o,a=h,r=!0)}}else for(const a of e)(r?t(a,i)>0:t(a,a)===0)&&(i=a,r=!0);return i}function Lh(e,t,i){if(e=Float64Array.from(bG(e,i)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Pa(e);if(t>=1)return os(e);var r,a=(r-1)*t,o=Math.floor(a),h=os(_w(e,o).subarray(0,o+1)),u=Pa(e.subarray(o+1));return h+(u-h)*(a-o)}}function FG(e,t,i=mw){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+i(e[0],0,e);if(t>=1)return+i(e[r-1],r-1,e);var r,a=(r-1)*t,o=Math.floor(a),h=+i(e[o],o,e),u=+i(e[o+1],o+1,e);return h+(u-h)*(a-o)}}function kG(e,t,i){const r=ib(e),a=Lh(e,.75)-Lh(e,.25);return r&&a?Math.ceil((i-t)/(2*a*Math.pow(r,-1/3))):1}function Ew(e,t,i){const r=ib(e),a=gw(e);return r&&a?Math.ceil((i-t)*Math.cbrt(r)/(3.49*a)):1}function ab(e,t){let i=0,r=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(++i,r+=a);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&(o=+o)>=o&&(++i,r+=o)}if(i)return r/i}function Hf(e,t){return Lh(e,.5,t)}function*UG(e){for(const t of e)yield*t}function ww(e){return Array.from(UG(e))}function GG(e,t){const i=new s0;if(t===void 0)for(let o of e)o!=null&&o>=o&&i.set(o,(i.get(o)||0)+1);else{let o=-1;for(let h of e)(h=t(h,++o,e))!=null&&h>=h&&i.set(h,(i.get(h)||0)+1)}let r,a=0;for(const[o,h]of i)h>a&&(a=h,r=o);return r}function VG(e,t=QG){const i=[];let r,a=!1;for(const o of e)a&&i.push(t(r,o)),r=o,a=!0;return i}function QG(e,t){return[e,t]}function _n(e,t,i){e=+e,t=+t,i=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+i;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/i))|0,o=new Array(a);++r<a;)o[r]=e+r*i;return o}function tu(e,t){let i=0;if(t===void 0)for(let r of e)(r=+r)&&(i+=r);else{let r=-1;for(let a of e)(a=+t(a,++r,e))&&(i+=a)}return i}function _1(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Ph(e,...t){e=new y9(e);for(const i of t)for(const r of i)e.delete(r);return e}function HG(e){return e}var zG=3,i_=1e-6;function WG(e){return"translate("+e+",0)"}function jG(e){return t=>+e(t)}function $G(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),i=>+e(i)+t}function XG(){return!this.__axis}function KG(e,t){var i=[],r=null,a=null,o=6,h=6,u=3,m=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1,d="y",A=WG;function p(v){var g=r??(t.ticks?t.ticks.apply(t,i):t.domain()),y=a??(t.tickFormat?t.tickFormat.apply(t,i):HG),E=Math.max(o,0)+u,_=t.range(),S=+_[0]+m,x=+_[_.length-1]+m,C=(t.bandwidth?$G:jG)(t.copy(),m),w=v.selection?v.selection():v,T=w.selectAll(".domain").data([null]),O=w.selectAll(".tick").data(g,t).order(),B=O.exit(),P=O.enter().append("g").attr("class","tick"),L=O.select("line"),N=O.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),O=O.merge(P),L=L.merge(P.append("line").attr("stroke","currentColor").attr(d+"2",c*o)),N=N.merge(P.append("text").attr("fill","currentColor").attr(d,c*E).attr("dy","0.71em")),v!==w&&(T=T.transition(v),O=O.transition(v),L=L.transition(v),N=N.transition(v),B=B.transition(v).attr("opacity",i_).attr("transform",function(F){return isFinite(F=C(F))?A(F+m):this.getAttribute("transform")}),P.attr("opacity",i_).attr("transform",function(F){var z=this.parentNode.__axis;return A((z&&isFinite(z=z(F))?z:C(F))+m)})),B.remove(),T.attr("d",h?"M"+S+","+c*h+"V"+m+"H"+x+"V"+c*h:"M"+S+","+m+"H"+x),O.attr("opacity",1).attr("transform",function(F){return A(C(F)+m)}),L.attr(d+"2",c*o),N.attr(d,c*E).text(y),w.filter(XG).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),w.each(function(){this.__axis=C})}return p.scale=function(v){return arguments.length?(t=v,p):t},p.ticks=function(){return i=Array.from(arguments),p},p.tickArguments=function(v){return arguments.length?(i=v==null?[]:Array.from(v),p):i.slice()},p.tickValues=function(v){return arguments.length?(r=v==null?null:Array.from(v),p):r&&r.slice()},p.tickFormat=function(v){return arguments.length?(a=v,p):a},p.tickSize=function(v){return arguments.length?(o=h=+v,p):o},p.tickSizeInner=function(v){return arguments.length?(o=+v,p):o},p.tickSizeOuter=function(v){return arguments.length?(h=+v,p):h},p.tickPadding=function(v){return arguments.length?(u=+v,p):u},p.offset=function(v){return arguments.length?(m=+v,p):m},p}function YG(e){return KG(zG,e)}var qG={value:()=>{}};function xw(){for(var e=0,t=arguments.length,i={},r;e<t;++e){if(!(r=arguments[e]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new n1(i)}function n1(e){this._=e}function JG(e,t){return e.trim().split(/^|\s+/).map(function(i){var r="",a=i.indexOf(".");if(a>=0&&(r=i.slice(a+1),i=i.slice(0,a)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:r}})}n1.prototype=xw.prototype={constructor:n1,on:function(e,t){var i=this._,r=JG(e+"",i),a,o=-1,h=r.length;if(arguments.length<2){for(;++o<h;)if((a=(e=r[o]).type)&&(a=ZG(i[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<h;)if(a=(e=r[o]).type)i[a]=r_(i[a],e.name,t);else if(t==null)for(a in i)i[a]=r_(i[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new n1(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var i=new Array(a),r=0,a,o;r<a;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,i)}};function ZG(e,t){for(var i=0,r=e.length,a;i<r;++i)if((a=e[i]).name===t)return a.value}function r_(e,t,i){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=qG,e=e.slice(0,r).concat(e.slice(r+1));break}return i!=null&&e.push({name:t,value:i}),e}var Ov="http://www.w3.org/1999/xhtml";const Nh={svg:"http://www.w3.org/2000/svg",xhtml:Ov,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ig(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),Nh.hasOwnProperty(t)?{space:Nh[t],local:e}:e}function eV(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===Ov&&t.documentElement.namespaceURI===Ov?t.createElement(e):t.createElementNS(i,e)}}function tV(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Tg(e){var t=Ig(e);return(t.local?tV:eV)(t)}function nV(){}function ob(e){return e==null?nV:function(){return this.querySelector(e)}}function iV(e){typeof e!="function"&&(e=ob(e));for(var t=this._groups,i=t.length,r=new Array(i),a=0;a<i;++a)for(var o=t[a],h=o.length,u=r[a]=new Array(h),m,c,d=0;d<h;++d)(m=o[d])&&(c=e.call(m,m.__data__,d,o))&&("__data__"in m&&(c.__data__=m.__data__),u[d]=c);return new fo(r,this._parents)}function rV(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function sV(){return[]}function Sw(e){return e==null?sV:function(){return this.querySelectorAll(e)}}function aV(e){return function(){return rV(e.apply(this,arguments))}}function oV(e){typeof e=="function"?e=aV(e):e=Sw(e);for(var t=this._groups,i=t.length,r=[],a=[],o=0;o<i;++o)for(var h=t[o],u=h.length,m,c=0;c<u;++c)(m=h[c])&&(r.push(e.call(m,m.__data__,c,h)),a.push(m));return new fo(r,a)}function Iw(e){return function(){return this.matches(e)}}function Tw(e){return function(t){return t.matches(e)}}var lV=Array.prototype.find;function cV(e){return function(){return lV.call(this.children,e)}}function uV(){return this.firstElementChild}function hV(e){return this.select(e==null?uV:cV(typeof e=="function"?e:Tw(e)))}var dV=Array.prototype.filter;function fV(){return Array.from(this.children)}function mV(e){return function(){return dV.call(this.children,e)}}function pV(e){return this.selectAll(e==null?fV:mV(typeof e=="function"?e:Tw(e)))}function gV(e){typeof e!="function"&&(e=Iw(e));for(var t=this._groups,i=t.length,r=new Array(i),a=0;a<i;++a)for(var o=t[a],h=o.length,u=r[a]=[],m,c=0;c<h;++c)(m=o[c])&&e.call(m,m.__data__,c,o)&&u.push(m);return new fo(r,this._parents)}function Bw(e){return new Array(e.length)}function AV(){return new fo(this._enter||this._groups.map(Bw),this._parents)}function C1(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}C1.prototype={constructor:C1,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function vV(e){return function(){return e}}function yV(e,t,i,r,a,o){for(var h=0,u,m=t.length,c=o.length;h<c;++h)(u=t[h])?(u.__data__=o[h],r[h]=u):i[h]=new C1(e,o[h]);for(;h<m;++h)(u=t[h])&&(a[h]=u)}function bV(e,t,i,r,a,o,h){var u,m,c=new Map,d=t.length,A=o.length,p=new Array(d),v;for(u=0;u<d;++u)(m=t[u])&&(p[u]=v=h.call(m,m.__data__,u,t)+"",c.has(v)?a[u]=m:c.set(v,m));for(u=0;u<A;++u)v=h.call(e,o[u],u,o)+"",(m=c.get(v))?(r[u]=m,m.__data__=o[u],c.delete(v)):i[u]=new C1(e,o[u]);for(u=0;u<d;++u)(m=t[u])&&c.get(p[u])===m&&(a[u]=m)}function MV(e){return e.__data__}function _V(e,t){if(!arguments.length)return Array.from(this,MV);var i=t?bV:yV,r=this._parents,a=this._groups;typeof e!="function"&&(e=vV(e));for(var o=a.length,h=new Array(o),u=new Array(o),m=new Array(o),c=0;c<o;++c){var d=r[c],A=a[c],p=A.length,v=CV(e.call(d,d&&d.__data__,c,r)),g=v.length,y=u[c]=new Array(g),E=h[c]=new Array(g),_=m[c]=new Array(p);i(d,A,y,E,_,v,t);for(var S=0,x=0,C,w;S<g;++S)if(C=y[S]){for(S>=x&&(x=S+1);!(w=E[x])&&++x<g;);C._next=w||null}}return h=new fo(h,r),h._enter=u,h._exit=m,h}function CV(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function EV(){return new fo(this._exit||this._groups.map(Bw),this._parents)}function wV(e,t,i){var r=this.enter(),a=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),i==null?o.remove():i(o),r&&a?r.merge(a).order():a}function xV(e){for(var t=e.selection?e.selection():e,i=this._groups,r=t._groups,a=i.length,o=r.length,h=Math.min(a,o),u=new Array(a),m=0;m<h;++m)for(var c=i[m],d=r[m],A=c.length,p=u[m]=new Array(A),v,g=0;g<A;++g)(v=c[g]||d[g])&&(p[g]=v);for(;m<a;++m)u[m]=i[m];return new fo(u,this._parents)}function SV(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var r=e[t],a=r.length-1,o=r[a],h;--a>=0;)(h=r[a])&&(o&&h.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(h,o),o=h);return this}function IV(e){e||(e=TV);function t(A,p){return A&&p?e(A.__data__,p.__data__):!A-!p}for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o){for(var h=i[o],u=h.length,m=a[o]=new Array(u),c,d=0;d<u;++d)(c=h[d])&&(m[d]=c);m.sort(t)}return new fo(a,this._parents).order()}function TV(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function BV(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function RV(){return Array.from(this)}function OV(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var h=r[a];if(h)return h}return null}function DV(){let e=0;for(const t of this)++e;return e}function LV(){return!this.node()}function PV(e){for(var t=this._groups,i=0,r=t.length;i<r;++i)for(var a=t[i],o=0,h=a.length,u;o<h;++o)(u=a[o])&&e.call(u,u.__data__,o,a);return this}function NV(e){return function(){this.removeAttribute(e)}}function FV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kV(e,t){return function(){this.setAttribute(e,t)}}function UV(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function GV(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function VV(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function QV(e,t){var i=Ig(e);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((t==null?i.local?FV:NV:typeof t=="function"?i.local?VV:GV:i.local?UV:kV)(i,t))}function Rw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function HV(e){return function(){this.style.removeProperty(e)}}function zV(e,t,i){return function(){this.style.setProperty(e,t,i)}}function WV(e,t,i){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,i)}}function jV(e,t,i){return arguments.length>1?this.each((t==null?HV:typeof t=="function"?WV:zV)(e,t,i??"")):Fh(this.node(),e)}function Fh(e,t){return e.style.getPropertyValue(t)||Rw(e).getComputedStyle(e,null).getPropertyValue(t)}function $V(e){return function(){delete this[e]}}function XV(e,t){return function(){this[e]=t}}function KV(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function YV(e,t){return arguments.length>1?this.each((t==null?$V:typeof t=="function"?KV:XV)(e,t)):this.node()[e]}function Ow(e){return e.trim().split(/^|\s+/)}function lb(e){return e.classList||new Dw(e)}function Dw(e){this._node=e,this._names=Ow(e.getAttribute("class")||"")}Dw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Lw(e,t){for(var i=lb(e),r=-1,a=t.length;++r<a;)i.add(t[r])}function Pw(e,t){for(var i=lb(e),r=-1,a=t.length;++r<a;)i.remove(t[r])}function qV(e){return function(){Lw(this,e)}}function JV(e){return function(){Pw(this,e)}}function ZV(e,t){return function(){(t.apply(this,arguments)?Lw:Pw)(this,e)}}function eQ(e,t){var i=Ow(e+"");if(arguments.length<2){for(var r=lb(this.node()),a=-1,o=i.length;++a<o;)if(!r.contains(i[a]))return!1;return!0}return this.each((typeof t=="function"?ZV:t?qV:JV)(i,t))}function tQ(){this.textContent=""}function nQ(e){return function(){this.textContent=e}}function iQ(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function rQ(e){return arguments.length?this.each(e==null?tQ:(typeof e=="function"?iQ:nQ)(e)):this.node().textContent}function sQ(){this.innerHTML=""}function aQ(e){return function(){this.innerHTML=e}}function oQ(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function lQ(e){return arguments.length?this.each(e==null?sQ:(typeof e=="function"?oQ:aQ)(e)):this.node().innerHTML}function cQ(){this.nextSibling&&this.parentNode.appendChild(this)}function uQ(){return this.each(cQ)}function hQ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dQ(){return this.each(hQ)}function fQ(e){var t=typeof e=="function"?e:Tg(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function mQ(){return null}function pQ(e,t){var i=typeof e=="function"?e:Tg(e),r=t==null?mQ:typeof t=="function"?t:ob(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)})}function gQ(){var e=this.parentNode;e&&e.removeChild(this)}function AQ(){return this.each(gQ)}function vQ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yQ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bQ(e){return this.select(e?yQ:vQ)}function MQ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _Q(e){return function(t){e.call(this,t,this.__data__)}}function CQ(e){return e.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");return r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),{type:t,name:i}})}function EQ(e){return function(){var t=this.__on;if(t){for(var i=0,r=-1,a=t.length,o;i<a;++i)o=t[i],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function wQ(e,t,i){return function(){var r=this.__on,a,o=_Q(t);if(r){for(var h=0,u=r.length;h<u;++h)if((a=r[h]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=i),a.value=t;return}}this.addEventListener(e.type,o,i),a={type:e.type,name:e.name,value:t,listener:o,options:i},r?r.push(a):this.__on=[a]}}function xQ(e,t,i){var r=CQ(e+""),a,o=r.length,h;if(arguments.length<2){var u=this.node().__on;if(u){for(var m=0,c=u.length,d;m<c;++m)for(a=0,d=u[m];a<o;++a)if((h=r[a]).type===d.type&&h.name===d.name)return d.value}return}for(u=t?wQ:EQ,a=0;a<o;++a)this.each(u(r[a],t,i));return this}function Nw(e,t,i){var r=Rw(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,i):(a=r.document.createEvent("Event"),i?(a.initEvent(t,i.bubbles,i.cancelable),a.detail=i.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function SQ(e,t){return function(){return Nw(this,e,t)}}function IQ(e,t){return function(){return Nw(this,e,t.apply(this,arguments))}}function TQ(e,t){return this.each((typeof t=="function"?IQ:SQ)(e,t))}function*BQ(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],a=0,o=r.length,h;a<o;++a)(h=r[a])&&(yield h)}var Fw=[null];function fo(e,t){this._groups=e,this._parents=t}function M9(){return new fo([[document.documentElement]],Fw)}function RQ(){return this}fo.prototype=M9.prototype={constructor:fo,select:iV,selectAll:oV,selectChild:hV,selectChildren:pV,filter:gV,data:_V,enter:AV,exit:EV,join:wV,merge:xV,selection:RQ,order:SV,sort:IV,call:BV,nodes:RV,node:OV,size:DV,empty:LV,each:PV,attr:QV,style:jV,property:YV,classed:eQ,text:rQ,html:lQ,raise:uQ,lower:dQ,append:fQ,insert:pQ,remove:AQ,clone:bQ,datum:MQ,on:xQ,dispatch:TQ,[Symbol.iterator]:BQ};function If(e){return typeof e=="string"?new fo([[document.querySelector(e)]],[document.documentElement]):new fo([[e]],Fw)}function OQ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function DQ(e,t){if(e=OQ(e),t===void 0&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var r=i.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}function ad(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function _9(e,t){var i=Object.create(e.prototype);for(var r in t)i[r]=t[r];return i}function uu(){}var o0=.7,kh=1/o0,Ch="\\s*([+-]?\\d+)\\s*",zf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",LQ=/^#([0-9a-f]{3,8})$/,PQ=new RegExp(`^rgb\\(${Ch},${Ch},${Ch}\\)$`),NQ=new RegExp(`^rgb\\(${wl},${wl},${wl}\\)$`),FQ=new RegExp(`^rgba\\(${Ch},${Ch},${Ch},${zf}\\)$`),kQ=new RegExp(`^rgba\\(${wl},${wl},${wl},${zf}\\)$`),UQ=new RegExp(`^hsl\\(${zf},${wl},${wl}\\)$`),GQ=new RegExp(`^hsla\\(${zf},${wl},${wl},${zf}\\)$`),s_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ad(uu,nu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:a_,formatHex:a_,formatHex8:VQ,formatHsl:QQ,formatRgb:o_,toString:o_});function a_(){return this.rgb().formatHex()}function VQ(){return this.rgb().formatHex8()}function QQ(){return kw(this).formatHsl()}function o_(){return this.rgb().formatRgb()}function nu(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=LQ.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?l_(t):i===3?new sa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?Dp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?Dp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=PQ.exec(e))?new sa(t[1],t[2],t[3],1):(t=NQ.exec(e))?new sa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=FQ.exec(e))?Dp(t[1],t[2],t[3],t[4]):(t=kQ.exec(e))?Dp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=UQ.exec(e))?h_(t[1],t[2]/100,t[3]/100,1):(t=GQ.exec(e))?h_(t[1],t[2]/100,t[3]/100,t[4]):s_.hasOwnProperty(e)?l_(s_[e]):e==="transparent"?new sa(NaN,NaN,NaN,0):null}function l_(e){return new sa(e>>16&255,e>>8&255,e&255,1)}function Dp(e,t,i,r){return r<=0&&(e=t=i=NaN),new sa(e,t,i,r)}function cb(e){return e instanceof uu||(e=nu(e)),e?(e=e.rgb(),new sa(e.r,e.g,e.b,e.opacity)):new sa}function iu(e,t,i,r){return arguments.length===1?cb(e):new sa(e,t,i,r??1)}function sa(e,t,i,r){this.r=+e,this.g=+t,this.b=+i,this.opacity=+r}ad(sa,iu,_9(uu,{brighter(e){return e=e==null?kh:Math.pow(kh,e),new sa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?o0:Math.pow(o0,e),new sa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sa(t0(this.r),t0(this.g),t0(this.b),E1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:c_,formatHex:c_,formatHex8:HQ,formatRgb:u_,toString:u_}));function c_(){return`#${Yu(this.r)}${Yu(this.g)}${Yu(this.b)}`}function HQ(){return`#${Yu(this.r)}${Yu(this.g)}${Yu(this.b)}${Yu((isNaN(this.opacity)?1:this.opacity)*255)}`}function u_(){const e=E1(this.opacity);return`${e===1?"rgb(":"rgba("}${t0(this.r)}, ${t0(this.g)}, ${t0(this.b)}${e===1?")":`, ${e})`}`}function E1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function t0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yu(e){return e=t0(e),(e<16?"0":"")+e.toString(16)}function h_(e,t,i,r){return r<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Xo(e,t,i,r)}function kw(e){if(e instanceof Xo)return new Xo(e.h,e.s,e.l,e.opacity);if(e instanceof uu||(e=nu(e)),!e)return new Xo;if(e instanceof Xo)return e;e=e.rgb();var t=e.r/255,i=e.g/255,r=e.b/255,a=Math.min(t,i,r),o=Math.max(t,i,r),h=NaN,u=o-a,m=(o+a)/2;return u?(t===o?h=(i-r)/u+(i<r)*6:i===o?h=(r-t)/u+2:h=(t-i)/u+4,u/=m<.5?o+a:2-o-a,h*=60):u=m>0&&m<1?0:h,new Xo(h,u,m,e.opacity)}function Dv(e,t,i,r){return arguments.length===1?kw(e):new Xo(e,t,i,r??1)}function Xo(e,t,i,r){this.h=+e,this.s=+t,this.l=+i,this.opacity=+r}ad(Xo,Dv,_9(uu,{brighter(e){return e=e==null?kh:Math.pow(kh,e),new Xo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?o0:Math.pow(o0,e),new Xo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*t,a=2*i-r;return new sa(I3(e>=240?e-240:e+120,a,r),I3(e,a,r),I3(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Xo(d_(this.h),Lp(this.s),Lp(this.l),E1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=E1(this.opacity);return`${e===1?"hsl(":"hsla("}${d_(this.h)}, ${Lp(this.s)*100}%, ${Lp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function d_(e){return e=(e||0)%360,e<0?e+360:e}function Lp(e){return Math.max(0,Math.min(1,e||0))}function I3(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const Uw=Math.PI/180,Gw=180/Math.PI,w1=18,Vw=.96422,Qw=1,Hw=.82521,zw=4/29,Eh=6/29,Ww=3*Eh*Eh,zQ=Eh*Eh*Eh;function jw(e){if(e instanceof xl)return new xl(e.l,e.a,e.b,e.opacity);if(e instanceof cc)return $w(e);e instanceof sa||(e=cb(e));var t=O3(e.r),i=O3(e.g),r=O3(e.b),a=T3((.2225045*t+.7168786*i+.0606169*r)/Qw),o,h;return t===i&&i===r?o=h=a:(o=T3((.4360747*t+.3850649*i+.1430804*r)/Vw),h=T3((.0139322*t+.0971045*i+.7141733*r)/Hw)),new xl(116*a-16,500*(o-a),200*(a-h),e.opacity)}function Lv(e,t,i,r){return arguments.length===1?jw(e):new xl(e,t,i,r??1)}function xl(e,t,i,r){this.l=+e,this.a=+t,this.b=+i,this.opacity=+r}ad(xl,Lv,_9(uu,{brighter(e){return new xl(this.l+w1*(e??1),this.a,this.b,this.opacity)},darker(e){return new xl(this.l-w1*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,i=isNaN(this.b)?e:e-this.b/200;return t=Vw*B3(t),e=Qw*B3(e),i=Hw*B3(i),new sa(R3(3.1338561*t-1.6168667*e-.4906146*i),R3(-.9787684*t+1.9161415*e+.033454*i),R3(.0719453*t-.2289914*e+1.4052427*i),this.opacity)}}));function T3(e){return e>zQ?Math.pow(e,1/3):e/Ww+zw}function B3(e){return e>Eh?e*e*e:Ww*(e-zw)}function R3(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function O3(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function WQ(e){if(e instanceof cc)return new cc(e.h,e.c,e.l,e.opacity);if(e instanceof xl||(e=jw(e)),e.a===0&&e.b===0)return new cc(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Gw;return new cc(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Pv(e,t,i,r){return arguments.length===1?WQ(e):new cc(e,t,i,r??1)}function cc(e,t,i,r){this.h=+e,this.c=+t,this.l=+i,this.opacity=+r}function $w(e){if(isNaN(e.h))return new xl(e.l,0,0,e.opacity);var t=e.h*Uw;return new xl(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ad(cc,Pv,_9(uu,{brighter(e){return new cc(this.h,this.c,this.l+w1*(e??1),this.opacity)},darker(e){return new cc(this.h,this.c,this.l-w1*(e??1),this.opacity)},rgb(){return $w(this).rgb()}}));var Xw=-.14861,ub=1.78277,hb=-.29227,Bg=-.90649,Wf=1.97294,f_=Wf*Bg,m_=Wf*ub,p_=ub*hb-Bg*Xw;function jQ(e){if(e instanceof n0)return new n0(e.h,e.s,e.l,e.opacity);e instanceof sa||(e=cb(e));var t=e.r/255,i=e.g/255,r=e.b/255,a=(p_*r+f_*t-m_*i)/(p_+f_-m_),o=r-a,h=(Wf*(i-a)-hb*o)/Bg,u=Math.sqrt(h*h+o*o)/(Wf*a*(1-a)),m=u?Math.atan2(h,o)*Gw-120:NaN;return new n0(m<0?m+360:m,u,a,e.opacity)}function Il(e,t,i,r){return arguments.length===1?jQ(e):new n0(e,t,i,r??1)}function n0(e,t,i,r){this.h=+e,this.s=+t,this.l=+i,this.opacity=+r}ad(n0,Il,_9(uu,{brighter(e){return e=e==null?kh:Math.pow(kh,e),new n0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?o0:Math.pow(o0,e),new n0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Uw,t=+this.l,i=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new sa(255*(t+i*(Xw*r+ub*a)),255*(t+i*(hb*r+Bg*a)),255*(t+i*(Wf*r)),this.opacity)}}));function $Q(e,t,i,r,a){var o=e*e,h=o*e;return((1-3*e+3*o-h)*t+(4-6*o+3*h)*i+(1+3*e+3*o-3*h)*r+h*a)/6}function XQ(e){var t=e.length-1;return function(i){var r=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),a=e[r],o=e[r+1],h=r>0?e[r-1]:2*a-o,u=r<t-1?e[r+2]:2*o-a;return $Q((i-r/t)*t,h,a,o,u)}}const Rg=e=>()=>e;function Kw(e,t){return function(i){return e+i*t}}function KQ(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(r){return Math.pow(e+r*t,i)}}function db(e,t){var i=t-e;return i?Kw(e,i>180||i<-180?i-360*Math.round(i/360):i):Rg(isNaN(e)?t:e)}function YQ(e){return(e=+e)==1?_a:function(t,i){return i-t?KQ(t,i,e):Rg(isNaN(t)?i:t)}}function _a(e,t){var i=t-e;return i?Kw(e,i):Rg(isNaN(e)?t:e)}const l0=function e(t){var i=YQ(t);function r(a,o){var h=i((a=iu(a)).r,(o=iu(o)).r),u=i(a.g,o.g),m=i(a.b,o.b),c=_a(a.opacity,o.opacity);return function(d){return a.r=h(d),a.g=u(d),a.b=m(d),a.opacity=c(d),a+""}}return r.gamma=e,r}(1);function qQ(e){return function(t){var i=t.length,r=new Array(i),a=new Array(i),o=new Array(i),h,u;for(h=0;h<i;++h)u=iu(t[h]),r[h]=u.r||0,a[h]=u.g||0,o[h]=u.b||0;return r=e(r),a=e(a),o=e(o),u.opacity=1,function(m){return u.r=r(m),u.g=a(m),u.b=o(m),u+""}}}var JQ=qQ(XQ);function ZQ(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(o){for(a=0;a<i;++a)r[a]=e[a]*(1-o)+t[a]*o;return r}}function eH(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function tH(e,t){var i=t?t.length:0,r=e?Math.min(i,e.length):0,a=new Array(r),o=new Array(i),h;for(h=0;h<r;++h)a[h]=C9(e[h],t[h]);for(;h<i;++h)o[h]=t[h];return function(u){for(h=0;h<r;++h)o[h]=a[h](u);return o}}function nH(e,t){var i=new Date;return e=+e,t=+t,function(r){return i.setTime(e*(1-r)+t*r),i}}function Ma(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function iH(e,t){var i={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?i[a]=C9(e[a],t[a]):r[a]=t[a];return function(o){for(a in i)r[a]=i[a](o);return r}}var Nv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,D3=new RegExp(Nv.source,"g");function rH(e){return function(){return e}}function sH(e){return function(t){return e(t)+""}}function Yw(e,t){var i=Nv.lastIndex=D3.lastIndex=0,r,a,o,h=-1,u=[],m=[];for(e=e+"",t=t+"";(r=Nv.exec(e))&&(a=D3.exec(t));)(o=a.index)>i&&(o=t.slice(i,o),u[h]?u[h]+=o:u[++h]=o),(r=r[0])===(a=a[0])?u[h]?u[h]+=a:u[++h]=a:(u[++h]=null,m.push({i:h,x:Ma(r,a)})),i=D3.lastIndex;return i<t.length&&(o=t.slice(i),u[h]?u[h]+=o:u[++h]=o),u.length<2?m[0]?sH(m[0].x):rH(t):(t=m.length,function(c){for(var d=0,A;d<t;++d)u[(A=m[d]).i]=A.x(c);return u.join("")})}function C9(e,t){var i=typeof t,r;return t==null||i==="boolean"?Rg(t):(i==="number"?Ma:i==="string"?(r=nu(t))?(t=r,l0):Yw:t instanceof nu?l0:t instanceof Date?nH:eH(t)?ZQ:Array.isArray(t)?tH:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?iH:Ma)(e,t)}function fb(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}var g_=180/Math.PI,Fv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qw(e,t,i,r,a,o){var h,u,m;return(h=Math.sqrt(e*e+t*t))&&(e/=h,t/=h),(m=e*i+t*r)&&(i-=e*m,r-=t*m),(u=Math.sqrt(i*i+r*r))&&(i/=u,r/=u,m/=u),e*r<t*i&&(e=-e,t=-t,m=-m,h=-h),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*g_,skewX:Math.atan(m)*g_,scaleX:h,scaleY:u}}var Pp;function aH(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Fv:qw(t.a,t.b,t.c,t.d,t.e,t.f)}function oH(e){return e==null||(Pp||(Pp=document.createElementNS("http://www.w3.org/2000/svg","g")),Pp.setAttribute("transform",e),!(e=Pp.transform.baseVal.consolidate()))?Fv:(e=e.matrix,qw(e.a,e.b,e.c,e.d,e.e,e.f))}function Jw(e,t,i,r){function a(c){return c.length?c.pop()+" ":""}function o(c,d,A,p,v,g){if(c!==A||d!==p){var y=v.push("translate(",null,t,null,i);g.push({i:y-4,x:Ma(c,A)},{i:y-2,x:Ma(d,p)})}else(A||p)&&v.push("translate("+A+t+p+i)}function h(c,d,A,p){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),p.push({i:A.push(a(A)+"rotate(",null,r)-2,x:Ma(c,d)})):d&&A.push(a(A)+"rotate("+d+r)}function u(c,d,A,p){c!==d?p.push({i:A.push(a(A)+"skewX(",null,r)-2,x:Ma(c,d)}):d&&A.push(a(A)+"skewX("+d+r)}function m(c,d,A,p,v,g){if(c!==A||d!==p){var y=v.push(a(v)+"scale(",null,",",null,")");g.push({i:y-4,x:Ma(c,A)},{i:y-2,x:Ma(d,p)})}else(A!==1||p!==1)&&v.push(a(v)+"scale("+A+","+p+")")}return function(c,d){var A=[],p=[];return c=e(c),d=e(d),o(c.translateX,c.translateY,d.translateX,d.translateY,A,p),h(c.rotate,d.rotate,A,p),u(c.skewX,d.skewX,A,p),m(c.scaleX,c.scaleY,d.scaleX,d.scaleY,A,p),c=d=null,function(v){for(var g=-1,y=p.length,E;++g<y;)A[(E=p[g]).i]=E.x(v);return A.join("")}}}var lH=Jw(aH,"px, ","px)","deg)"),cH=Jw(oH,", ",")",")");function uH(e){return function(t,i){var r=e((t=Dv(t)).h,(i=Dv(i)).h),a=_a(t.s,i.s),o=_a(t.l,i.l),h=_a(t.opacity,i.opacity);return function(u){return t.h=r(u),t.s=a(u),t.l=o(u),t.opacity=h(u),t+""}}}const hH=uH(db);function dH(e,t){var i=_a((e=Lv(e)).l,(t=Lv(t)).l),r=_a(e.a,t.a),a=_a(e.b,t.b),o=_a(e.opacity,t.opacity);return function(h){return e.l=i(h),e.a=r(h),e.b=a(h),e.opacity=o(h),e+""}}function fH(e){return function(t,i){var r=e((t=Pv(t)).h,(i=Pv(i)).h),a=_a(t.c,i.c),o=_a(t.l,i.l),h=_a(t.opacity,i.opacity);return function(u){return t.h=r(u),t.c=a(u),t.l=o(u),t.opacity=h(u),t+""}}}const mH=fH(db);function Zw(e){return function t(i){i=+i;function r(a,o){var h=e((a=Il(a)).h,(o=Il(o)).h),u=_a(a.s,o.s),m=_a(a.l,o.l),c=_a(a.opacity,o.opacity);return function(d){return a.h=h(d),a.s=u(d),a.l=m(Math.pow(d,i)),a.opacity=c(d),a+""}}return r.gamma=t,r}(1)}Zw(db);var mb=Zw(_a);function Og(e,t){t===void 0&&(t=e,e=C9);for(var i=0,r=t.length-1,a=t[0],o=new Array(r<0?0:r);i<r;)o[i]=e(a,a=t[++i]);return function(h){var u=Math.max(0,Math.min(r-1,Math.floor(h*=r)));return o[u](h-u)}}function Zo(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e(r/(t-1));return i}var Uh=0,ff=0,sf=0,ex=1e3,x1,mf,S1=0,c0=0,Dg=0,jf=typeof performance=="object"&&performance.now?performance:Date,tx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pb(){return c0||(tx(pH),c0=jf.now()+Dg)}function pH(){c0=0}function I1(){this._call=this._time=this._next=null}I1.prototype=nx.prototype={constructor:I1,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?pb():+i)+(t==null?0:+t),!this._next&&mf!==this&&(mf?mf._next=this:x1=this,mf=this),this._call=e,this._time=i,kv()},stop:function(){this._call&&(this._call=null,this._time=1/0,kv())}};function nx(e,t,i){var r=new I1;return r.restart(e,t,i),r}function gH(){pb(),++Uh;for(var e=x1,t;e;)(t=c0-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Uh}function A_(){c0=(S1=jf.now())+Dg,Uh=ff=0;try{gH()}finally{Uh=0,vH(),c0=0}}function AH(){var e=jf.now(),t=e-S1;t>ex&&(Dg-=t,S1=e)}function vH(){for(var e,t=x1,i,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:x1=i);mf=e,kv(r)}function kv(e){if(!Uh){ff&&(ff=clearTimeout(ff));var t=e-c0;t>24?(e<1/0&&(ff=setTimeout(A_,e-jf.now()-Dg)),sf&&(sf=clearInterval(sf))):(sf||(S1=jf.now(),sf=setInterval(AH,ex)),Uh=1,tx(A_))}}function v_(e,t,i){var r=new I1;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,i),r}var yH=xw("start","end","cancel","interrupt"),bH=[],ix=0,y_=1,Uv=2,i1=3,b_=4,Gv=5,r1=6;function Lg(e,t,i,r,a,o){var h=e.__transition;if(!h)e.__transition={};else if(i in h)return;MH(e,i,{name:t,index:r,group:a,on:yH,tween:bH,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ix})}function gb(e,t){var i=il(e,t);if(i.state>ix)throw new Error("too late; already scheduled");return i}function Rl(e,t){var i=il(e,t);if(i.state>i1)throw new Error("too late; already running");return i}function il(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function MH(e,t,i){var r=e.__transition,a;r[t]=i,i.timer=nx(o,0,i.time);function o(c){i.state=y_,i.timer.restart(h,i.delay,i.time),i.delay<=c&&h(c-i.delay)}function h(c){var d,A,p,v;if(i.state!==y_)return m();for(d in r)if(v=r[d],v.name===i.name){if(v.state===i1)return v_(h);v.state===b_?(v.state=r1,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete r[d]):+d<t&&(v.state=r1,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete r[d])}if(v_(function(){i.state===i1&&(i.state=b_,i.timer.restart(u,i.delay,i.time),u(c))}),i.state=Uv,i.on.call("start",e,e.__data__,i.index,i.group),i.state===Uv){for(i.state=i1,a=new Array(p=i.tween.length),d=0,A=-1;d<p;++d)(v=i.tween[d].value.call(e,e.__data__,i.index,i.group))&&(a[++A]=v);a.length=A+1}}function u(c){for(var d=c<i.duration?i.ease.call(null,c/i.duration):(i.timer.restart(m),i.state=Gv,1),A=-1,p=a.length;++A<p;)a[A].call(e,d);i.state===Gv&&(i.on.call("end",e,e.__data__,i.index,i.group),m())}function m(){i.state=r1,i.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function _H(e,t){var i=e.__transition,r,a,o=!0,h;if(i){t=t==null?null:t+"";for(h in i){if((r=i[h]).name!==t){o=!1;continue}a=r.state>Uv&&r.state<Gv,r.state=r1,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete i[h]}o&&delete e.__transition}}function CH(e){return this.each(function(){_H(this,e)})}function EH(e,t){var i,r;return function(){var a=Rl(this,e),o=a.tween;if(o!==i){r=i=o;for(var h=0,u=r.length;h<u;++h)if(r[h].name===t){r=r.slice(),r.splice(h,1);break}}a.tween=r}}function wH(e,t,i){var r,a;if(typeof i!="function")throw new Error;return function(){var o=Rl(this,e),h=o.tween;if(h!==r){a=(r=h).slice();for(var u={name:t,value:i},m=0,c=a.length;m<c;++m)if(a[m].name===t){a[m]=u;break}m===c&&a.push(u)}o.tween=a}}function xH(e,t){var i=this._id;if(e+="",arguments.length<2){for(var r=il(this.node(),i).tween,a=0,o=r.length,h;a<o;++a)if((h=r[a]).name===e)return h.value;return null}return this.each((t==null?EH:wH)(i,e,t))}function Ab(e,t,i){var r=e._id;return e.each(function(){var a=Rl(this,r);(a.value||(a.value={}))[t]=i.apply(this,arguments)}),function(a){return il(a,r).value[t]}}function rx(e,t){var i;return(typeof t=="number"?Ma:t instanceof nu?l0:(i=nu(t))?(t=i,l0):Yw)(e,t)}function SH(e){return function(){this.removeAttribute(e)}}function IH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TH(e,t,i){var r,a=i+"",o;return function(){var h=this.getAttribute(e);return h===a?null:h===r?o:o=t(r=h,i)}}function BH(e,t,i){var r,a=i+"",o;return function(){var h=this.getAttributeNS(e.space,e.local);return h===a?null:h===r?o:o=t(r=h,i)}}function RH(e,t,i){var r,a,o;return function(){var h,u=i(this),m;return u==null?void this.removeAttribute(e):(h=this.getAttribute(e),m=u+"",h===m?null:h===r&&m===a?o:(a=m,o=t(r=h,u)))}}function OH(e,t,i){var r,a,o;return function(){var h,u=i(this),m;return u==null?void this.removeAttributeNS(e.space,e.local):(h=this.getAttributeNS(e.space,e.local),m=u+"",h===m?null:h===r&&m===a?o:(a=m,o=t(r=h,u)))}}function DH(e,t){var i=Ig(e),r=i==="transform"?cH:rx;return this.attrTween(e,typeof t=="function"?(i.local?OH:RH)(i,r,Ab(this,"attr."+e,t)):t==null?(i.local?IH:SH)(i):(i.local?BH:TH)(i,r,t))}function LH(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function PH(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function NH(e,t){var i,r;function a(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&PH(e,o)),i}return a._value=t,a}function FH(e,t){var i,r;function a(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&LH(e,o)),i}return a._value=t,a}function kH(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var r=Ig(e);return this.tween(i,(r.local?NH:FH)(r,t))}function UH(e,t){return function(){gb(this,e).delay=+t.apply(this,arguments)}}function GH(e,t){return t=+t,function(){gb(this,e).delay=t}}function VH(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?UH:GH)(t,e)):il(this.node(),t).delay}function QH(e,t){return function(){Rl(this,e).duration=+t.apply(this,arguments)}}function HH(e,t){return t=+t,function(){Rl(this,e).duration=t}}function zH(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QH:HH)(t,e)):il(this.node(),t).duration}function WH(e,t){if(typeof t!="function")throw new Error;return function(){Rl(this,e).ease=t}}function jH(e){var t=this._id;return arguments.length?this.each(WH(t,e)):il(this.node(),t).ease}function $H(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;Rl(this,e).ease=i}}function XH(e){if(typeof e!="function")throw new Error;return this.each($H(this._id,e))}function KH(e){typeof e!="function"&&(e=Iw(e));for(var t=this._groups,i=t.length,r=new Array(i),a=0;a<i;++a)for(var o=t[a],h=o.length,u=r[a]=[],m,c=0;c<h;++c)(m=o[c])&&e.call(m,m.__data__,c,o)&&u.push(m);return new pc(r,this._parents,this._name,this._id)}function YH(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,r=t.length,a=i.length,o=Math.min(r,a),h=new Array(r),u=0;u<o;++u)for(var m=t[u],c=i[u],d=m.length,A=h[u]=new Array(d),p,v=0;v<d;++v)(p=m[v]||c[v])&&(A[v]=p);for(;u<r;++u)h[u]=t[u];return new pc(h,this._parents,this._name,this._id)}function qH(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function JH(e,t,i){var r,a,o=qH(t)?gb:Rl;return function(){var h=o(this,e),u=h.on;u!==r&&(a=(r=u).copy()).on(t,i),h.on=a}}function ZH(e,t){var i=this._id;return arguments.length<2?il(this.node(),i).on.on(e):this.each(JH(i,e,t))}function ez(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function tz(){return this.on("end.remove",ez(this._id))}function nz(e){var t=this._name,i=this._id;typeof e!="function"&&(e=ob(e));for(var r=this._groups,a=r.length,o=new Array(a),h=0;h<a;++h)for(var u=r[h],m=u.length,c=o[h]=new Array(m),d,A,p=0;p<m;++p)(d=u[p])&&(A=e.call(d,d.__data__,p,u))&&("__data__"in d&&(A.__data__=d.__data__),c[p]=A,Lg(c[p],t,i,p,c,il(d,i)));return new pc(o,this._parents,t,i)}function iz(e){var t=this._name,i=this._id;typeof e!="function"&&(e=Sw(e));for(var r=this._groups,a=r.length,o=[],h=[],u=0;u<a;++u)for(var m=r[u],c=m.length,d,A=0;A<c;++A)if(d=m[A]){for(var p=e.call(d,d.__data__,A,m),v,g=il(d,i),y=0,E=p.length;y<E;++y)(v=p[y])&&Lg(v,t,i,y,p,g);o.push(p),h.push(d)}return new pc(o,h,t,i)}var rz=M9.prototype.constructor;function sz(){return new rz(this._groups,this._parents)}function az(e,t){var i,r,a;return function(){var o=Fh(this,e),h=(this.style.removeProperty(e),Fh(this,e));return o===h?null:o===i&&h===r?a:a=t(i=o,r=h)}}function sx(e){return function(){this.style.removeProperty(e)}}function oz(e,t,i){var r,a=i+"",o;return function(){var h=Fh(this,e);return h===a?null:h===r?o:o=t(r=h,i)}}function lz(e,t,i){var r,a,o;return function(){var h=Fh(this,e),u=i(this),m=u+"";return u==null&&(m=u=(this.style.removeProperty(e),Fh(this,e))),h===m?null:h===r&&m===a?o:(a=m,o=t(r=h,u))}}function cz(e,t){var i,r,a,o="style."+t,h="end."+o,u;return function(){var m=Rl(this,e),c=m.on,d=m.value[o]==null?u||(u=sx(t)):void 0;(c!==i||a!==d)&&(r=(i=c).copy()).on(h,a=d),m.on=r}}function uz(e,t,i){var r=(e+="")=="transform"?lH:rx;return t==null?this.styleTween(e,az(e,r)).on("end.style."+e,sx(e)):typeof t=="function"?this.styleTween(e,lz(e,r,Ab(this,"style."+e,t))).each(cz(this._id,e)):this.styleTween(e,oz(e,r,t),i).on("end.style."+e,null)}function hz(e,t,i){return function(r){this.style.setProperty(e,t.call(this,r),i)}}function dz(e,t,i){var r,a;function o(){var h=t.apply(this,arguments);return h!==a&&(r=(a=h)&&hz(e,h,i)),r}return o._value=t,o}function fz(e,t,i){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,dz(e,t,i??""))}function mz(e){return function(){this.textContent=e}}function pz(e){return function(){var t=e(this);this.textContent=t??""}}function gz(e){return this.tween("text",typeof e=="function"?pz(Ab(this,"text",e)):mz(e==null?"":e+""))}function Az(e){return function(t){this.textContent=e.call(this,t)}}function vz(e){var t,i;function r(){var a=e.apply(this,arguments);return a!==i&&(t=(i=a)&&Az(a)),t}return r._value=e,r}function yz(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vz(e))}function bz(){for(var e=this._name,t=this._id,i=ax(),r=this._groups,a=r.length,o=0;o<a;++o)for(var h=r[o],u=h.length,m,c=0;c<u;++c)if(m=h[c]){var d=il(m,t);Lg(m,e,i,c,h,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new pc(r,this._parents,e,i)}function Mz(){var e,t,i=this,r=i._id,a=i.size();return new Promise(function(o,h){var u={value:h},m={value:function(){--a===0&&o()}};i.each(function(){var c=Rl(this,r),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(m)),c.on=t}),a===0&&o()})}var _z=0;function pc(e,t,i,r){this._groups=e,this._parents=t,this._name=i,this._id=r}function ax(){return++_z}var Zl=M9.prototype;pc.prototype={constructor:pc,select:nz,selectAll:iz,selectChild:Zl.selectChild,selectChildren:Zl.selectChildren,filter:KH,merge:YH,selection:sz,transition:bz,call:Zl.call,nodes:Zl.nodes,node:Zl.node,size:Zl.size,empty:Zl.empty,each:Zl.each,on:ZH,attr:DH,attrTween:kH,style:uz,styleTween:fz,text:gz,textTween:yz,remove:tz,tween:xH,delay:VH,duration:zH,ease:jH,easeVarying:XH,end:Mz,[Symbol.iterator]:Zl[Symbol.iterator]};function Cz(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ez={time:null,delay:0,duration:250,ease:Cz};function wz(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function xz(e){var t,i;e instanceof pc?(t=e._id,e=e._name):(t=ax(),(i=Ez).time=pb(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var h=r[o],u=h.length,m,c=0;c<u;++c)(m=h[c])&&Lg(m,e,t,c,h,i||wz(m,t));return new pc(r,this._parents,e,t)}M9.prototype.interrupt=CH;M9.prototype.transition=xz;const Vv=Math.PI,Qv=2*Vv,$u=1e-6,Sz=Qv-$u;function ox(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function Iz(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ox;const i=10**t;return function(r){this._+=r[0];for(let a=1,o=r.length;a<o;++a)this._+=Math.round(arguments[a]*i)/i+r[a]}}class lx{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ox:Iz(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,r,a){this._append`Q${+t},${+i},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,i,r,a,o,h){this._append`C${+t},${+i},${+r},${+a},${this._x1=+o},${this._y1=+h}`}arcTo(t,i,r,a,o){if(t=+t,i=+i,r=+r,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let h=this._x1,u=this._y1,m=r-t,c=a-i,d=h-t,A=u-i,p=d*d+A*A;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(p>$u)if(!(Math.abs(A*m-c*d)>$u)||!o)this._append`L${this._x1=t},${this._y1=i}`;else{let v=r-h,g=a-u,y=m*m+c*c,E=v*v+g*g,_=Math.sqrt(y),S=Math.sqrt(p),x=o*Math.tan((Vv-Math.acos((y+p-E)/(2*_*S)))/2),C=x/S,w=x/_;Math.abs(C-1)>$u&&this._append`L${t+C*d},${i+C*A}`,this._append`A${o},${o},0,0,${+(A*v>d*g)},${this._x1=t+w*m},${this._y1=i+w*c}`}}arc(t,i,r,a,o,h){if(t=+t,i=+i,r=+r,h=!!h,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(a),m=r*Math.sin(a),c=t+u,d=i+m,A=1^h,p=h?a-o:o-a;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>$u||Math.abs(this._y1-d)>$u)&&this._append`L${c},${d}`,r&&(p<0&&(p=p%Qv+Qv),p>Sz?this._append`A${r},${r},0,1,${A},${t-u},${i-m}A${r},${r},0,1,${A},${this._x1=c},${this._y1=d}`:p>$u&&this._append`A${r},${r},0,${+(p>=Vv)},${A},${this._x1=t+r*Math.cos(o)},${this._y1=i+r*Math.sin(o)}`)}rect(t,i,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function Kc(e=3){return new lx(+e)}function Tz(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function T1(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,r=e.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+e.slice(i+1)]}function Gh(e){return e=T1(Math.abs(e)),e?e[1]:NaN}function Bz(e,t){return function(i,r){for(var a=i.length,o=[],h=0,u=e[0],m=0;a>0&&u>0&&(m+u+1>r&&(u=Math.max(1,r-m)),o.push(i.substring(a-=u,a+u)),!((m+=u+1)>r));)u=e[h=(h+1)%e.length];return o.reverse().join(t)}}function Rz(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var Oz=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $f(e){if(!(t=Oz.exec(e)))throw new Error("invalid format: "+e);var t;return new vb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$f.prototype=vb.prototype;function vb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}vb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dz(e){e:for(var t=e.length,i=1,r=-1,a;i<t;++i)switch(e[i]){case".":r=a=i;break;case"0":r===0&&(r=i),a=i;break;default:if(!+e[i])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var cx;function Lz(e,t){var i=T1(e,t);if(!i)return e+"";var r=i[0],a=i[1],o=a-(cx=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,h=r.length;return o===h?r:o>h?r+new Array(o-h+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+T1(e,Math.max(0,t+o-1))[0]}function M_(e,t){var i=T1(e,t);if(!i)return e+"";var r=i[0],a=i[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const __={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Tz,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>M_(e*100,t),r:M_,s:Lz,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function C_(e){return e}var E_=Array.prototype.map,w_=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Pz(e){var t=e.grouping===void 0||e.thousands===void 0?C_:Bz(E_.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?C_:Rz(E_.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function c(A){A=$f(A);var p=A.fill,v=A.align,g=A.sign,y=A.symbol,E=A.zero,_=A.width,S=A.comma,x=A.precision,C=A.trim,w=A.type;w==="n"?(S=!0,w="g"):__[w]||(x===void 0&&(x=12),C=!0,w="g"),(E||p==="0"&&v==="=")&&(E=!0,p="0",v="=");var T=y==="$"?i:y==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",O=y==="$"?r:/[%p]/.test(w)?h:"",B=__[w],P=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function L(N){var F=T,z=O,G,H,j;if(w==="c")z=B(N)+z,N="";else{N=+N;var q=N<0||1/N<0;if(N=isNaN(N)?m:B(Math.abs(N),x),C&&(N=Dz(N)),q&&+N==0&&g!=="+"&&(q=!1),F=(q?g==="("?g:u:g==="-"||g==="("?"":g)+F,z=(w==="s"?w_[8+cx/3]:"")+z+(q&&g==="("?")":""),P){for(G=-1,H=N.length;++G<H;)if(j=N.charCodeAt(G),48>j||j>57){z=(j===46?a+N.slice(G+1):N.slice(G))+z,N=N.slice(0,G);break}}}S&&!E&&(N=t(N,1/0));var Q=F.length+N.length+z.length,k=Q<_?new Array(_-Q+1).join(p):"";switch(S&&E&&(N=t(k+N,k.length?_-z.length:1/0),k=""),v){case"<":N=F+N+z+k;break;case"=":N=F+k+N+z;break;case"^":N=k.slice(0,Q=k.length>>1)+F+N+z+k.slice(Q);break;default:N=k+F+N+z;break}return o(N)}return L.toString=function(){return A+""},L}function d(A,p){var v=c((A=$f(A),A.type="f",A)),g=Math.max(-8,Math.min(8,Math.floor(Gh(p)/3)))*3,y=Math.pow(10,-g),E=w_[8+g/3];return function(_){return v(y*_)+E}}return{format:c,formatPrefix:d}}var Np,od,ux;Nz({thousands:",",grouping:[3],currency:["$",""]});function Nz(e){return Np=Pz(e),od=Np.format,ux=Np.formatPrefix,Np}function Fz(e){return Math.max(0,-Gh(Math.abs(e)))}function kz(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gh(t)/3)))*3-Gh(Math.abs(e)))}function Uz(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Gh(t)-Gh(e))+1}var Yi=1e-6,hx=1e-12,or=Math.PI,Cs=or/2,x_=or/4,mo=or*2,Oa=180/or,_s=or/180,Qr=Math.abs,ld=Math.atan,gc=Math.atan2,sr=Math.cos,dx=Math.exp,B1=Math.log,L3=Math.pow,Hi=Math.sin,So=Math.sign||function(e){return e>0?1:e<0?-1:0},Xa=Math.sqrt,yb=Math.tan;function fx(e){return e>1?0:e<-1?or:Math.acos(e)}function Oo(e){return e>1?Cs:e<-1?-Cs:Math.asin(e)}function Io(){}function R1(e,t){e&&I_.hasOwnProperty(e.type)&&I_[e.type](e,t)}var S_={Feature:function(e,t){R1(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,r=-1,a=i.length;++r<a;)R1(i[r].geometry,t)}},I_={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,r=-1,a=i.length;++r<a;)e=i[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Hv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,r=-1,a=i.length;++r<a;)Hv(i[r],t,0)},Polygon:function(e,t){T_(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,r=-1,a=i.length;++r<a;)T_(i[r],t)},GeometryCollection:function(e,t){for(var i=e.geometries,r=-1,a=i.length;++r<a;)R1(i[r],t)}};function Hv(e,t,i){var r=-1,a=e.length-i,o;for(t.lineStart();++r<a;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function T_(e,t){var i=-1,r=e.length;for(t.polygonStart();++i<r;)Hv(e[i],t,1);t.polygonEnd()}function Xu(e,t){e&&S_.hasOwnProperty(e.type)?S_[e.type](e,t):R1(e,t)}function zv(e){return[gc(e[1],e[0]),Oo(e[2])]}function Vh(e){var t=e[0],i=e[1],r=sr(i);return[r*sr(t),r*Hi(t),Hi(i)]}function Fp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function O1(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function P3(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function kp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Wv(e){var t=Xa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function jv(e,t){function i(r,a){return r=e(r,a),t(r[0],r[1])}return e.invert&&t.invert&&(i.invert=function(r,a){return r=t.invert(r,a),r&&e.invert(r[0],r[1])}),i}function $v(e,t){return Qr(e)>or&&(e-=Math.round(e/mo)*mo),[e,t]}$v.invert=$v;function mx(e,t,i){return(e%=mo)?t||i?jv(R_(e),O_(t,i)):R_(e):t||i?O_(t,i):$v}function B_(e){return function(t,i){return t+=e,Qr(t)>or&&(t-=Math.round(t/mo)*mo),[t,i]}}function R_(e){var t=B_(e);return t.invert=B_(-e),t}function O_(e,t){var i=sr(e),r=Hi(e),a=sr(t),o=Hi(t);function h(u,m){var c=sr(m),d=sr(u)*c,A=Hi(u)*c,p=Hi(m),v=p*i+d*r;return[gc(A*a-v*o,d*i-p*r),Oo(v*a+A*o)]}return h.invert=function(u,m){var c=sr(m),d=sr(u)*c,A=Hi(u)*c,p=Hi(m),v=p*a-A*o;return[gc(A*a+p*o,d*i+v*r),Oo(v*i-d*r)]},h}function Gz(e){e=mx(e[0]*_s,e[1]*_s,e.length>2?e[2]*_s:0);function t(i){return i=e(i[0]*_s,i[1]*_s),i[0]*=Oa,i[1]*=Oa,i}return t.invert=function(i){return i=e.invert(i[0]*_s,i[1]*_s),i[0]*=Oa,i[1]*=Oa,i},t}function Vz(e,t,i,r,a,o){if(i){var h=sr(t),u=Hi(t),m=r*i;a==null?(a=t+r*mo,o=t-m/2):(a=D_(h,a),o=D_(h,o),(r>0?a<o:a>o)&&(a+=r*mo));for(var c,d=a;r>0?d>o:d<o;d-=m)c=zv([h,-u*sr(d),-u*Hi(d)]),e.point(c[0],c[1])}}function D_(e,t){t=Vh(t),t[0]-=e,Wv(t);var i=fx(-t[1]);return((-t[2]<0?-i:i)+mo-Yi)%mo}function px(){var e=[],t;return{point:function(i,r,a){t.push([i,r,a])},lineStart:function(){e.push(t=[])},lineEnd:Io,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function s1(e,t){return Qr(e[0]-t[0])<Yi&&Qr(e[1]-t[1])<Yi}function Up(e,t,i,r){this.x=e,this.z=t,this.o=i,this.e=r,this.v=!1,this.n=this.p=null}function gx(e,t,i,r,a){var o=[],h=[],u,m;if(e.forEach(function(g){if(!((y=g.length-1)<=0)){var y,E=g[0],_=g[y],S;if(s1(E,_)){if(!E[2]&&!_[2]){for(a.lineStart(),u=0;u<y;++u)a.point((E=g[u])[0],E[1]);a.lineEnd();return}_[0]+=2*Yi}o.push(S=new Up(E,g,null,!0)),h.push(S.o=new Up(E,null,S,!1)),o.push(S=new Up(_,g,null,!1)),h.push(S.o=new Up(_,null,S,!0))}}),!!o.length){for(h.sort(t),L_(o),L_(h),u=0,m=h.length;u<m;++u)h[u].e=i=!i;for(var c=o[0],d,A;;){for(var p=c,v=!0;p.v;)if((p=p.n)===c)return;d=p.z,a.lineStart();do{if(p.v=p.o.v=!0,p.e){if(v)for(u=0,m=d.length;u<m;++u)a.point((A=d[u])[0],A[1]);else r(p.x,p.n.x,1,a);p=p.n}else{if(v)for(d=p.p.z,u=d.length-1;u>=0;--u)a.point((A=d[u])[0],A[1]);else r(p.x,p.p.x,-1,a);p=p.p}p=p.o,d=p.z,v=!v}while(!p.v);a.lineEnd()}}}function L_(e){if(t=e.length){for(var t,i=0,r=e[0],a;++i<t;)r.n=a=e[i],a.p=r,r=a;r.n=a=e[0],a.p=r}}function N3(e){return Qr(e[0])<=or?e[0]:So(e[0])*((Qr(e[0])+or)%mo-or)}function Qz(e,t){var i=N3(t),r=t[1],a=Hi(r),o=[Hi(i),-sr(i),0],h=0,u=0,m=new r0;a===1?r=Cs+Yi:a===-1&&(r=-Cs-Yi);for(var c=0,d=e.length;c<d;++c)if(p=(A=e[c]).length)for(var A,p,v=A[p-1],g=N3(v),y=v[1]/2+x_,E=Hi(y),_=sr(y),S=0;S<p;++S,g=C,E=T,_=O,v=x){var x=A[S],C=N3(x),w=x[1]/2+x_,T=Hi(w),O=sr(w),B=C-g,P=B>=0?1:-1,L=P*B,N=L>or,F=E*T;if(m.add(gc(F*P*Hi(L),_*O+F*sr(L))),h+=N?B+P*mo:B,N^g>=i^C>=i){var z=O1(Vh(v),Vh(x));Wv(z);var G=O1(o,z);Wv(G);var H=(N^B>=0?-1:1)*Oo(G[2]);(r>H||r===H&&(z[0]||z[1]))&&(u+=N^B>=0?1:-1)}}return(h<-Yi||h<Yi&&m<-hx)^u&1}function Ax(e,t,i,r){return function(a){var o=t(a),h=px(),u=t(h),m=!1,c,d,A,p={point:v,lineStart:y,lineEnd:E,polygonStart:function(){p.point=_,p.lineStart=S,p.lineEnd=x,d=[],c=[]},polygonEnd:function(){p.point=v,p.lineStart=y,p.lineEnd=E,d=ww(d);var C=Qz(c,r);d.length?(m||(a.polygonStart(),m=!0),gx(d,zz,C,i,a)):C&&(m||(a.polygonStart(),m=!0),a.lineStart(),i(null,null,1,a),a.lineEnd()),m&&(a.polygonEnd(),m=!1),d=c=null},sphere:function(){a.polygonStart(),a.lineStart(),i(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function v(C,w){e(C,w)&&a.point(C,w)}function g(C,w){o.point(C,w)}function y(){p.point=g,o.lineStart()}function E(){p.point=v,o.lineEnd()}function _(C,w){A.push([C,w]),u.point(C,w)}function S(){u.lineStart(),A=[]}function x(){_(A[0][0],A[0][1]),u.lineEnd();var C=u.clean(),w=h.result(),T,O=w.length,B,P,L;if(A.pop(),c.push(A),A=null,!!O){if(C&1){if(P=w[0],(B=P.length-1)>0){for(m||(a.polygonStart(),m=!0),a.lineStart(),T=0;T<B;++T)a.point((L=P[T])[0],L[1]);a.lineEnd()}return}O>1&&C&2&&w.push(w.pop().concat(w.shift())),d.push(w.filter(Hz))}}return p}}function Hz(e){return e.length>1}function zz(e,t){return((e=e.x)[0]<0?e[1]-Cs-Yi:Cs-e[1])-((t=t.x)[0]<0?t[1]-Cs-Yi:Cs-t[1])}const P_=Ax(function(){return!0},Wz,$z,[-or,-Cs]);function Wz(e){var t=NaN,i=NaN,r=NaN,a;return{lineStart:function(){e.lineStart(),a=1},point:function(o,h){var u=o>0?or:-or,m=Qr(o-t);Qr(m-or)<Yi?(e.point(t,i=(i+h)/2>0?Cs:-Cs),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(o,i),a=0):r!==u&&m>=or&&(Qr(t-r)<Yi&&(t-=r*Yi),Qr(o-u)<Yi&&(o-=u*Yi),i=jz(t,i,o,h),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(u,i),a=0),e.point(t=o,i=h),r=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-a}}}function jz(e,t,i,r){var a,o,h=Hi(e-i);return Qr(h)>Yi?ld((Hi(t)*(o=sr(r))*Hi(i)-Hi(r)*(a=sr(t))*Hi(e))/(a*o*h)):(t+r)/2}function $z(e,t,i,r){var a;if(e==null)a=i*Cs,r.point(-or,a),r.point(0,a),r.point(or,a),r.point(or,0),r.point(or,-a),r.point(0,-a),r.point(-or,-a),r.point(-or,0),r.point(-or,a);else if(Qr(e[0]-t[0])>Yi){var o=e[0]<t[0]?or:-or;a=i*o/2,r.point(-o,a),r.point(0,a),r.point(o,a)}else r.point(t[0],t[1])}function Xz(e){var t=sr(e),i=2*_s,r=t>0,a=Qr(t)>Yi;function o(d,A,p,v){Vz(v,e,i,p,d,A)}function h(d,A){return sr(d)*sr(A)>t}function u(d){var A,p,v,g,y;return{lineStart:function(){g=v=!1,y=1},point:function(E,_){var S=[E,_],x,C=h(E,_),w=r?C?0:c(E,_):C?c(E+(E<0?or:-or),_):0;if(!A&&(g=v=C)&&d.lineStart(),C!==v&&(x=m(A,S),(!x||s1(A,x)||s1(S,x))&&(S[2]=1)),C!==v)y=0,C?(d.lineStart(),x=m(S,A),d.point(x[0],x[1])):(x=m(A,S),d.point(x[0],x[1],2),d.lineEnd()),A=x;else if(a&&A&&r^C){var T;!(w&p)&&(T=m(S,A,!0))&&(y=0,r?(d.lineStart(),d.point(T[0][0],T[0][1]),d.point(T[1][0],T[1][1]),d.lineEnd()):(d.point(T[1][0],T[1][1]),d.lineEnd(),d.lineStart(),d.point(T[0][0],T[0][1],3)))}C&&(!A||!s1(A,S))&&d.point(S[0],S[1]),A=S,v=C,p=w},lineEnd:function(){v&&d.lineEnd(),A=null},clean:function(){return y|(g&&v)<<1}}}function m(d,A,p){var v=Vh(d),g=Vh(A),y=[1,0,0],E=O1(v,g),_=Fp(E,E),S=E[0],x=_-S*S;if(!x)return!p&&d;var C=t*_/x,w=-t*S/x,T=O1(y,E),O=kp(y,C),B=kp(E,w);P3(O,B);var P=T,L=Fp(O,P),N=Fp(P,P),F=L*L-N*(Fp(O,O)-1);if(!(F<0)){var z=Xa(F),G=kp(P,(-L-z)/N);if(P3(G,O),G=zv(G),!p)return G;var H=d[0],j=A[0],q=d[1],Q=A[1],k;j<H&&(k=H,H=j,j=k);var K=j-H,W=Qr(K-or)<Yi,J=W||K<Yi;if(!W&&Q<q&&(k=q,q=Q,Q=k),J?W?q+Q>0^G[1]<(Qr(G[0]-H)<Yi?q:Q):q<=G[1]&&G[1]<=Q:K>or^(H<=G[0]&&G[0]<=j)){var se=kp(P,(-L+z)/N);return P3(se,O),[G,zv(se)]}}}function c(d,A){var p=r?e:or-e,v=0;return d<-p?v|=1:d>p&&(v|=2),A<-p?v|=4:A>p&&(v|=8),v}return Ax(h,u,o,r?[0,-e]:[-or,e-or])}function Kz(e,t,i,r,a,o){var h=e[0],u=e[1],m=t[0],c=t[1],d=0,A=1,p=m-h,v=c-u,g;if(g=i-h,!(!p&&g>0)){if(g/=p,p<0){if(g<d)return;g<A&&(A=g)}else if(p>0){if(g>A)return;g>d&&(d=g)}if(g=a-h,!(!p&&g<0)){if(g/=p,p<0){if(g>A)return;g>d&&(d=g)}else if(p>0){if(g<d)return;g<A&&(A=g)}if(g=r-u,!(!v&&g>0)){if(g/=v,v<0){if(g<d)return;g<A&&(A=g)}else if(v>0){if(g>A)return;g>d&&(d=g)}if(g=o-u,!(!v&&g<0)){if(g/=v,v<0){if(g>A)return;g>d&&(d=g)}else if(v>0){if(g<d)return;g<A&&(A=g)}return d>0&&(e[0]=h+d*p,e[1]=u+d*v),A<1&&(t[0]=h+A*p,t[1]=u+A*v),!0}}}}}var pf=1e9,Gp=-pf;function vx(e,t,i,r){function a(c,d){return e<=c&&c<=i&&t<=d&&d<=r}function o(c,d,A,p){var v=0,g=0;if(c==null||(v=h(c,A))!==(g=h(d,A))||m(c,d)<0^A>0)do p.point(v===0||v===3?e:i,v>1?r:t);while((v=(v+A+4)%4)!==g);else p.point(d[0],d[1])}function h(c,d){return Qr(c[0]-e)<Yi?d>0?0:3:Qr(c[0]-i)<Yi?d>0?2:1:Qr(c[1]-t)<Yi?d>0?1:0:d>0?3:2}function u(c,d){return m(c.x,d.x)}function m(c,d){var A=h(c,1),p=h(d,1);return A!==p?A-p:A===0?d[1]-c[1]:A===1?c[0]-d[0]:A===2?c[1]-d[1]:d[0]-c[0]}return function(c){var d=c,A=px(),p,v,g,y,E,_,S,x,C,w,T,O={point:B,lineStart:F,lineEnd:z,polygonStart:L,polygonEnd:N};function B(H,j){a(H,j)&&d.point(H,j)}function P(){for(var H=0,j=0,q=v.length;j<q;++j)for(var Q=v[j],k=1,K=Q.length,W=Q[0],J,se,ge=W[0],fe=W[1];k<K;++k)J=ge,se=fe,W=Q[k],ge=W[0],fe=W[1],se<=r?fe>r&&(ge-J)*(r-se)>(fe-se)*(e-J)&&++H:fe<=r&&(ge-J)*(r-se)<(fe-se)*(e-J)&&--H;return H}function L(){d=A,p=[],v=[],T=!0}function N(){var H=P(),j=T&&H,q=(p=ww(p)).length;(j||q)&&(c.polygonStart(),j&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),q&&gx(p,u,H,o,c),c.polygonEnd()),d=c,p=v=g=null}function F(){O.point=G,v&&v.push(g=[]),w=!0,C=!1,S=x=NaN}function z(){p&&(G(y,E),_&&C&&A.rejoin(),p.push(A.result())),O.point=B,C&&d.lineEnd()}function G(H,j){var q=a(H,j);if(v&&g.push([H,j]),w)y=H,E=j,_=q,w=!1,q&&(d.lineStart(),d.point(H,j));else if(q&&C)d.point(H,j);else{var Q=[S=Math.max(Gp,Math.min(pf,S)),x=Math.max(Gp,Math.min(pf,x))],k=[H=Math.max(Gp,Math.min(pf,H)),j=Math.max(Gp,Math.min(pf,j))];Kz(Q,k,e,t,i,r)?(C||(d.lineStart(),d.point(Q[0],Q[1])),d.point(k[0],k[1]),q||d.lineEnd(),T=!1):q&&(d.lineStart(),d.point(H,j),T=!1)}S=H,x=j,C=q}return O}}const Xv=e=>e;var F3=new r0,Kv=new r0,yx,bx,Yv,qv,lc={point:Io,lineStart:Io,lineEnd:Io,polygonStart:function(){lc.lineStart=Yz,lc.lineEnd=Jz},polygonEnd:function(){lc.lineStart=lc.lineEnd=lc.point=Io,F3.add(Qr(Kv)),Kv=new r0},result:function(){var e=F3/2;return F3=new r0,e}};function Yz(){lc.point=qz}function qz(e,t){lc.point=Mx,yx=Yv=e,bx=qv=t}function Mx(e,t){Kv.add(qv*e-Yv*t),Yv=e,qv=t}function Jz(){Mx(yx,bx)}var Qh=1/0,D1=Qh,Xf=-Qh,L1=Xf,P1={point:Zz,lineStart:Io,lineEnd:Io,polygonStart:Io,polygonEnd:Io,result:function(){var e=[[Qh,D1],[Xf,L1]];return Xf=L1=-(D1=Qh=1/0),e}};function Zz(e,t){e<Qh&&(Qh=e),e>Xf&&(Xf=e),t<D1&&(D1=t),t>L1&&(L1=t)}var Jv=0,Zv=0,gf=0,N1=0,F1=0,mh=0,ey=0,ty=0,Af=0,_x,Cx,yl,bl,xo={point:u0,lineStart:N_,lineEnd:F_,polygonStart:function(){xo.lineStart=nW,xo.lineEnd=iW},polygonEnd:function(){xo.point=u0,xo.lineStart=N_,xo.lineEnd=F_},result:function(){var e=Af?[ey/Af,ty/Af]:mh?[N1/mh,F1/mh]:gf?[Jv/gf,Zv/gf]:[NaN,NaN];return Jv=Zv=gf=N1=F1=mh=ey=ty=Af=0,e}};function u0(e,t){Jv+=e,Zv+=t,++gf}function N_(){xo.point=eW}function eW(e,t){xo.point=tW,u0(yl=e,bl=t)}function tW(e,t){var i=e-yl,r=t-bl,a=Xa(i*i+r*r);N1+=a*(yl+e)/2,F1+=a*(bl+t)/2,mh+=a,u0(yl=e,bl=t)}function F_(){xo.point=u0}function nW(){xo.point=rW}function iW(){Ex(_x,Cx)}function rW(e,t){xo.point=Ex,u0(_x=yl=e,Cx=bl=t)}function Ex(e,t){var i=e-yl,r=t-bl,a=Xa(i*i+r*r);N1+=a*(yl+e)/2,F1+=a*(bl+t)/2,mh+=a,a=bl*e-yl*t,ey+=a*(yl+e),ty+=a*(bl+t),Af+=a*3,u0(yl=e,bl=t)}function wx(e){this._context=e}wx.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,mo);break}}},result:Io};var ny=new r0,k3,xx,Sx,vf,yf,Kf={point:Io,lineStart:function(){Kf.point=sW},lineEnd:function(){k3&&Ix(xx,Sx),Kf.point=Io},polygonStart:function(){k3=!0},polygonEnd:function(){k3=null},result:function(){var e=+ny;return ny=new r0,e}};function sW(e,t){Kf.point=Ix,xx=vf=e,Sx=yf=t}function Ix(e,t){vf-=e,yf-=t,ny.add(Xa(vf*vf+yf*yf)),vf=e,yf=t}let k_,k1,U_,G_;class V_{constructor(t){this._append=t==null?Tx:aW(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,i){switch(this._point){case 0:{this._append`M${t},${i}`,this._point=1;break}case 1:{this._append`L${t},${i}`;break}default:{if(this._append`M${t},${i}`,this._radius!==U_||this._append!==k1){const r=this._radius,a=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,U_=r,k1=this._append,G_=this._,this._=a}this._+=G_;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Tx(e){let t=1;this._+=e[0];for(const i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function aW(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Tx;if(t!==k_){const i=10**t;k_=t,k1=function(a){let o=1;this._+=a[0];for(const h=a.length;o<h;++o)this._+=Math.round(arguments[o]*i)/i+a[o]}}return k1}function Pg(e,t){let i=3,r=4.5,a,o;function h(u){return u&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Xu(u,a(o))),o.result()}return h.area=function(u){return Xu(u,a(lc)),lc.result()},h.measure=function(u){return Xu(u,a(Kf)),Kf.result()},h.bounds=function(u){return Xu(u,a(P1)),P1.result()},h.centroid=function(u){return Xu(u,a(xo)),xo.result()},h.projection=function(u){return arguments.length?(a=u==null?(e=null,Xv):(e=u).stream,h):e},h.context=function(u){return arguments.length?(o=u==null?(t=null,new V_(i)):new wx(t=u),typeof r!="function"&&o.pointRadius(r),h):t},h.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(o.pointRadius(+u),+u),h):r},h.digits=function(u){if(!arguments.length)return i;if(u==null)i=null;else{const m=Math.floor(u);if(!(m>=0))throw new RangeError(`invalid digits: ${u}`);i=m}return t===null&&(o=new V_(i)),h},h.projection(e).digits(i).context(t)}function iy(e){return{stream:Ng(e)}}function Ng(e){return function(t){var i=new ry;for(var r in e)i[r]=e[r];return i.stream=t,i}}function ry(){}ry.prototype={constructor:ry,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function bb(e,t,i){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Xu(i,e.stream(P1)),t(P1.result()),r!=null&&e.clipExtent(r),e}function Mb(e,t,i){return bb(e,function(r){var a=t[1][0]-t[0][0],o=t[1][1]-t[0][1],h=Math.min(a/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),u=+t[0][0]+(a-h*(r[1][0]+r[0][0]))/2,m=+t[0][1]+(o-h*(r[1][1]+r[0][1]))/2;e.scale(150*h).translate([u,m])},i)}function Bx(e,t,i){return Mb(e,[[0,0],t],i)}function Rx(e,t,i){return bb(e,function(r){var a=+t,o=a/(r[1][0]-r[0][0]),h=(a-o*(r[1][0]+r[0][0]))/2,u=-o*r[0][1];e.scale(150*o).translate([h,u])},i)}function Ox(e,t,i){return bb(e,function(r){var a=+t,o=a/(r[1][1]-r[0][1]),h=-o*r[0][0],u=(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([h,u])},i)}var Q_=16,oW=sr(30*_s);function H_(e,t){return+t?cW(e,t):lW(e)}function lW(e){return Ng({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function cW(e,t){function i(r,a,o,h,u,m,c,d,A,p,v,g,y,E){var _=c-r,S=d-a,x=_*_+S*S;if(x>4*t&&y--){var C=h+p,w=u+v,T=m+g,O=Xa(C*C+w*w+T*T),B=Oo(T/=O),P=Qr(Qr(T)-1)<Yi||Qr(o-A)<Yi?(o+A)/2:gc(w,C),L=e(P,B),N=L[0],F=L[1],z=N-r,G=F-a,H=S*z-_*G;(H*H/x>t||Qr((_*z+S*G)/x-.5)>.3||h*p+u*v+m*g<oW)&&(i(r,a,o,h,u,m,N,F,P,C/=O,w/=O,T,y,E),E.point(N,F),i(N,F,P,C,w,T,c,d,A,p,v,g,y,E))}}return function(r){var a,o,h,u,m,c,d,A,p,v,g,y,E={point:_,lineStart:S,lineEnd:C,polygonStart:function(){r.polygonStart(),E.lineStart=w},polygonEnd:function(){r.polygonEnd(),E.lineStart=S}};function _(B,P){B=e(B,P),r.point(B[0],B[1])}function S(){A=NaN,E.point=x,r.lineStart()}function x(B,P){var L=Vh([B,P]),N=e(B,P);i(A,p,d,v,g,y,A=N[0],p=N[1],d=B,v=L[0],g=L[1],y=L[2],Q_,r),r.point(A,p)}function C(){E.point=_,r.lineEnd()}function w(){S(),E.point=T,E.lineEnd=O}function T(B,P){x(a=B,P),o=A,h=p,u=v,m=g,c=y,E.point=x}function O(){i(A,p,d,v,g,y,o,h,a,u,m,c,Q_,r),E.lineEnd=C,C()}return E}}var uW=Ng({point:function(e,t){this.stream.point(e*_s,t*_s)}});function hW(e){return Ng({point:function(t,i){var r=e(t,i);return this.stream.point(r[0],r[1])}})}function dW(e,t,i,r,a){function o(h,u){return h*=r,u*=a,[t+e*h,i-e*u]}return o.invert=function(h,u){return[(h-t)/e*r,(i-u)/e*a]},o}function z_(e,t,i,r,a,o){if(!o)return dW(e,t,i,r,a);var h=sr(o),u=Hi(o),m=h*e,c=u*e,d=h/e,A=u/e,p=(u*i-h*t)/e,v=(u*t+h*i)/e;function g(y,E){return y*=r,E*=a,[m*y-c*E+t,i-c*y-m*E]}return g.invert=function(y,E){return[r*(d*y-A*E+p),a*(v-A*y-d*E)]},g}function hu(e){return Dx(function(){return e})()}function Dx(e){var t,i=150,r=480,a=250,o=0,h=0,u=0,m=0,c=0,d,A=0,p=1,v=1,g=null,y=P_,E=null,_,S,x,C=Xv,w=.5,T,O,B,P,L;function N(H){return B(H[0]*_s,H[1]*_s)}function F(H){return H=B.invert(H[0],H[1]),H&&[H[0]*Oa,H[1]*Oa]}N.stream=function(H){return P&&L===H?P:P=uW(hW(d)(y(T(C(L=H)))))},N.preclip=function(H){return arguments.length?(y=H,g=void 0,G()):y},N.postclip=function(H){return arguments.length?(C=H,E=_=S=x=null,G()):C},N.clipAngle=function(H){return arguments.length?(y=+H?Xz(g=H*_s):(g=null,P_),G()):g*Oa},N.clipExtent=function(H){return arguments.length?(C=H==null?(E=_=S=x=null,Xv):vx(E=+H[0][0],_=+H[0][1],S=+H[1][0],x=+H[1][1]),G()):E==null?null:[[E,_],[S,x]]},N.scale=function(H){return arguments.length?(i=+H,z()):i},N.translate=function(H){return arguments.length?(r=+H[0],a=+H[1],z()):[r,a]},N.center=function(H){return arguments.length?(o=H[0]%360*_s,h=H[1]%360*_s,z()):[o*Oa,h*Oa]},N.rotate=function(H){return arguments.length?(u=H[0]%360*_s,m=H[1]%360*_s,c=H.length>2?H[2]%360*_s:0,z()):[u*Oa,m*Oa,c*Oa]},N.angle=function(H){return arguments.length?(A=H%360*_s,z()):A*Oa},N.reflectX=function(H){return arguments.length?(p=H?-1:1,z()):p<0},N.reflectY=function(H){return arguments.length?(v=H?-1:1,z()):v<0},N.precision=function(H){return arguments.length?(T=H_(O,w=H*H),G()):Xa(w)},N.fitExtent=function(H,j){return Mb(N,H,j)},N.fitSize=function(H,j){return Bx(N,H,j)},N.fitWidth=function(H,j){return Rx(N,H,j)},N.fitHeight=function(H,j){return Ox(N,H,j)};function z(){var H=z_(i,0,0,p,v,A).apply(null,t(o,h)),j=z_(i,r-H[0],a-H[1],p,v,A);return d=mx(u,m,c),O=jv(t,j),B=jv(d,O),T=H_(O,w),G()}function G(){return P=L=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&F,z()}}function _b(e){var t=0,i=or/3,r=Dx(e),a=r(t,i);return a.parallels=function(o){return arguments.length?r(t=o[0]*_s,i=o[1]*_s):[t*Oa,i*Oa]},a}function fW(e){var t=sr(e);function i(r,a){return[r*t,Hi(a)/t]}return i.invert=function(r,a){return[r/t,Oo(a*t)]},i}function mW(e,t){var i=Hi(e),r=(i+Hi(t))/2;if(Qr(r)<Yi)return fW(e);var a=1+i*(2*r-i),o=Xa(a)/r;function h(u,m){var c=Xa(a-2*r*Hi(m))/r;return[c*Hi(u*=r),o-c*sr(u)]}return h.invert=function(u,m){var c=o-m,d=gc(u,Qr(c))*So(c);return c*r<0&&(d-=or*So(u)*So(c)),[d/r,Oo((a-(u*u+c*c)*r*r)/(2*r))]},h}function U1(){return _b(mW).scale(155.424).center([0,33.6442])}function Lx(){return U1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function pW(e){var t=e.length;return{point:function(i,r){for(var a=-1;++a<t;)e[a].point(i,r)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function gW(){var e,t,i=Lx(),r,a=U1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,h=U1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,m,c={point:function(p,v){m=[p,v]}};function d(p){var v=p[0],g=p[1];return m=null,r.point(v,g),m||(o.point(v,g),m)||(u.point(v,g),m)}d.invert=function(p){var v=i.scale(),g=i.translate(),y=(p[0]-g[0])/v,E=(p[1]-g[1])/v;return(E>=.12&&E<.234&&y>=-.425&&y<-.214?a:E>=.166&&E<.234&&y>=-.214&&y<-.115?h:i).invert(p)},d.stream=function(p){return e&&t===p?e:e=pW([i.stream(t=p),a.stream(p),h.stream(p)])},d.precision=function(p){return arguments.length?(i.precision(p),a.precision(p),h.precision(p),A()):i.precision()},d.scale=function(p){return arguments.length?(i.scale(p),a.scale(p*.35),h.scale(p),d.translate(i.translate())):i.scale()},d.translate=function(p){if(!arguments.length)return i.translate();var v=i.scale(),g=+p[0],y=+p[1];return r=i.translate(p).clipExtent([[g-.455*v,y-.238*v],[g+.455*v,y+.238*v]]).stream(c),o=a.translate([g-.307*v,y+.201*v]).clipExtent([[g-.425*v+Yi,y+.12*v+Yi],[g-.214*v-Yi,y+.234*v-Yi]]).stream(c),u=h.translate([g-.205*v,y+.212*v]).clipExtent([[g-.214*v+Yi,y+.166*v+Yi],[g-.115*v-Yi,y+.234*v-Yi]]).stream(c),A()},d.fitExtent=function(p,v){return Mb(d,p,v)},d.fitSize=function(p,v){return Bx(d,p,v)},d.fitWidth=function(p,v){return Rx(d,p,v)},d.fitHeight=function(p,v){return Ox(d,p,v)};function A(){return e=t=null,d}return d.scale(1070)}function Px(e){return function(t,i){var r=sr(t),a=sr(i),o=e(r*a);return o===1/0?[2,0]:[o*a*Hi(t),o*Hi(i)]}}function E9(e){return function(t,i){var r=Xa(t*t+i*i),a=e(r),o=Hi(a),h=sr(a);return[gc(t*o,r*h),Oo(r&&i*o/r)]}}var Nx=Px(function(e){return Xa(2/(1+e))});Nx.invert=E9(function(e){return 2*Oo(e/2)});function AW(){return hu(Nx).scale(124.75).clipAngle(180-.001)}var Fx=Px(function(e){return(e=fx(e))&&e/Hi(e)});Fx.invert=E9(function(e){return e});function vW(){return hu(Fx).scale(79.4188).clipAngle(180-.001)}function Fg(e,t){return[e,B1(yb((Cs+t)/2))]}Fg.invert=function(e,t){return[e,2*ld(dx(t))-Cs]};function yW(){return kx(Fg).scale(961/mo)}function kx(e){var t=hu(e),i=t.center,r=t.scale,a=t.translate,o=t.clipExtent,h=null,u,m,c;t.scale=function(A){return arguments.length?(r(A),d()):r()},t.translate=function(A){return arguments.length?(a(A),d()):a()},t.center=function(A){return arguments.length?(i(A),d()):i()},t.clipExtent=function(A){return arguments.length?(A==null?h=u=m=c=null:(h=+A[0][0],u=+A[0][1],m=+A[1][0],c=+A[1][1]),d()):h==null?null:[[h,u],[m,c]]};function d(){var A=or*r(),p=t(Gz(t.rotate()).invert([0,0]));return o(h==null?[[p[0]-A,p[1]-A],[p[0]+A,p[1]+A]]:e===Fg?[[Math.max(p[0]-A,h),u],[Math.min(p[0]+A,m),c]]:[[h,Math.max(p[1]-A,u)],[m,Math.min(p[1]+A,c)]])}return d()}function Vp(e){return yb((Cs+e)/2)}function bW(e,t){var i=sr(e),r=e===t?Hi(e):B1(i/sr(t))/B1(Vp(t)/Vp(e)),a=i*L3(Vp(e),r)/r;if(!r)return Fg;function o(h,u){a>0?u<-Cs+Yi&&(u=-Cs+Yi):u>Cs-Yi&&(u=Cs-Yi);var m=a/L3(Vp(u),r);return[m*Hi(r*h),a-m*sr(r*h)]}return o.invert=function(h,u){var m=a-u,c=So(r)*Xa(h*h+m*m),d=gc(h,Qr(m))*So(m);return m*r<0&&(d-=or*So(h)*So(m)),[d/r,2*ld(L3(a/c,1/r))-Cs]},o}function MW(){return _b(bW).scale(109.5).parallels([30,30])}function G1(e,t){return[e,t]}G1.invert=G1;function _W(){return hu(G1).scale(152.63)}function CW(e,t){var i=sr(e),r=e===t?Hi(e):(i-sr(t))/(t-e),a=i/r+e;if(Qr(r)<Yi)return G1;function o(h,u){var m=a-u,c=r*h;return[m*Hi(c),a-m*sr(c)]}return o.invert=function(h,u){var m=a-u,c=gc(h,Qr(m))*So(m);return m*r<0&&(c-=or*So(h)*So(m)),[c/r,a-So(r)*Xa(h*h+m*m)]},o}function EW(){return _b(CW).scale(131.154).center([0,13.9389])}var Tf=1.340264,Bf=-.081106,Rf=893e-6,Of=.003796,V1=Xa(3)/2,wW=12;function Ux(e,t){var i=Oo(V1*Hi(t)),r=i*i,a=r*r*r;return[e*sr(i)/(V1*(Tf+3*Bf*r+a*(7*Rf+9*Of*r))),i*(Tf+Bf*r+a*(Rf+Of*r))]}Ux.invert=function(e,t){for(var i=t,r=i*i,a=r*r*r,o=0,h,u,m;o<wW&&(u=i*(Tf+Bf*r+a*(Rf+Of*r))-t,m=Tf+3*Bf*r+a*(7*Rf+9*Of*r),i-=h=u/m,r=i*i,a=r*r*r,!(Qr(h)<hx));++o);return[V1*e*(Tf+3*Bf*r+a*(7*Rf+9*Of*r))/sr(i),Oo(Hi(i)/V1)]};function xW(){return hu(Ux).scale(177.158)}function Gx(e,t){var i=sr(t),r=sr(e)*i;return[i*Hi(e)/r,Hi(t)/r]}Gx.invert=E9(ld);function SW(){return hu(Gx).scale(144.049).clipAngle(60)}function Vx(e,t){return[sr(t)*Hi(e),Hi(t)]}Vx.invert=E9(Oo);function IW(){return hu(Vx).scale(249.5).clipAngle(90+Yi)}function Qx(e,t){var i=sr(t),r=1+sr(e)*i;return[i*Hi(e)/r,Hi(t)/r]}Qx.invert=E9(function(e){return 2*ld(e)});function TW(){return hu(Qx).scale(250).clipAngle(142)}function Hx(e,t){return[B1(yb((Cs+t)/2)),-e]}Hx.invert=function(e,t){return[-t,2*ld(dx(e))-Cs]};function BW(){var e=kx(Hx),t=e.center,i=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?i([r[0],r[1],r.length>2?r[2]+90:90]):(r=i(),[r[0],r[1],r[2]-90])},i([0,0,90]).scale(159.155)}function RW(e,t){return e.parent===t.parent?1:2}function OW(e){return e.reduce(DW,0)/e.length}function DW(e,t){return e+t.x}function LW(e){return 1+e.reduce(PW,0)}function PW(e,t){return Math.max(e,t.y)}function NW(e){for(var t;t=e.children;)e=t[0];return e}function FW(e){for(var t;t=e.children;)e=t[t.length-1];return e}function zx(){var e=RW,t=1,i=1,r=!1;function a(o){var h,u=0;o.eachAfter(function(p){var v=p.children;v?(p.x=OW(v),p.y=LW(v)):(p.x=h?u+=e(p,h):0,p.y=0,h=p)});var m=NW(o),c=FW(o),d=m.x-e(m,c)/2,A=c.x+e(c,m)/2;return o.eachAfter(r?function(p){p.x=(p.x-o.x)*t,p.y=(o.y-p.y)*i}:function(p){p.x=(p.x-d)/(A-d)*t,p.y=(1-(o.y?p.y/o.y:1))*i})}return a.separation=function(o){return arguments.length?(e=o,a):e},a.size=function(o){return arguments.length?(r=!1,t=+o[0],i=+o[1],a):r?null:[t,i]},a.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],i=+o[1],a):r?[t,i]:null},a}function kW(e){var t=0,i=e.children,r=i&&i.length;if(!r)t=1;else for(;--r>=0;)t+=i[r].value;e.value=t}function UW(){return this.eachAfter(kW)}function GW(e,t){let i=-1;for(const r of this)e.call(t,r,++i,this);return this}function VW(e,t){for(var i=this,r=[i],a,o,h=-1;i=r.pop();)if(e.call(t,i,++h,this),a=i.children)for(o=a.length-1;o>=0;--o)r.push(a[o]);return this}function QW(e,t){for(var i=this,r=[i],a=[],o,h,u,m=-1;i=r.pop();)if(a.push(i),o=i.children)for(h=0,u=o.length;h<u;++h)r.push(o[h]);for(;i=a.pop();)e.call(t,i,++m,this);return this}function HW(e,t){let i=-1;for(const r of this)if(e.call(t,r,++i,this))return r}function zW(e){return this.eachAfter(function(t){for(var i=+e(t.data)||0,r=t.children,a=r&&r.length;--a>=0;)i+=r[a].value;t.value=i})}function WW(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function jW(e){for(var t=this,i=$W(t,e),r=[t];t!==i;)t=t.parent,r.push(t);for(var a=r.length;e!==i;)r.splice(a,0,e),e=e.parent;return r}function $W(e,t){if(e===t)return e;var i=e.ancestors(),r=t.ancestors(),a=null;for(e=i.pop(),t=r.pop();e===t;)a=e,e=i.pop(),t=r.pop();return a}function XW(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function KW(){return Array.from(this)}function YW(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function qW(){var e=this,t=[];return e.each(function(i){i!==e&&t.push({source:i.parent,target:i})}),t}function*JW(){var e=this,t,i=[e],r,a,o;do for(t=i.reverse(),i=[];e=t.pop();)if(yield e,r=e.children)for(a=0,o=r.length;a<o;++a)i.push(r[a]);while(i.length)}function Wx(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=tj)):t===void 0&&(t=ej);for(var i=new Hh(e),r,a=[i],o,h,u,m;r=a.pop();)if((h=t(r.data))&&(m=(h=Array.from(h)).length))for(r.children=h,u=m-1;u>=0;--u)a.push(o=h[u]=new Hh(h[u])),o.parent=r,o.depth=r.depth+1;return i.eachBefore(jx)}function ZW(){return Wx(this).eachBefore(nj)}function ej(e){return e.children}function tj(e){return Array.isArray(e)?e[1]:null}function nj(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function jx(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Hh(e){this.data=e,this.depth=this.height=0,this.parent=null}Hh.prototype=Wx.prototype={constructor:Hh,count:UW,each:GW,eachAfter:QW,eachBefore:VW,find:HW,sum:zW,sort:WW,path:jW,ancestors:XW,descendants:KW,leaves:YW,links:qW,copy:ZW,[Symbol.iterator]:JW};function U3(e){return e==null?null:ij(e)}function ij(e){if(typeof e!="function")throw new Error;return e}var rj={depth:-1},W_={},G3={};function sj(e){return e.id}function aj(e){return e.parentId}function $x(){var e=sj,t=aj,i;function r(a){var o=Array.from(a),h=e,u=t,m,c,d,A,p,v,g,y,E=new Map;if(i!=null){const _=o.map((C,w)=>oj(i(C,w,a))),S=_.map(j_),x=new Set(_).add("");for(const C of S)x.has(C)||(x.add(C),_.push(C),S.push(j_(C)),o.push(G3));h=(C,w)=>_[w],u=(C,w)=>S[w]}for(d=0,m=o.length;d<m;++d)c=o[d],v=o[d]=new Hh(c),(g=h(c,d,a))!=null&&(g+="")&&(y=v.id=g,E.set(y,E.has(y)?W_:v)),(g=u(c,d,a))!=null&&(g+="")&&(v.parent=g);for(d=0;d<m;++d)if(v=o[d],g=v.parent){if(p=E.get(g),!p)throw new Error("missing: "+g);if(p===W_)throw new Error("ambiguous: "+g);p.children?p.children.push(v):p.children=[v],v.parent=p}else{if(A)throw new Error("multiple roots");A=v}if(!A)throw new Error("no root");if(i!=null){for(;A.data===G3&&A.children.length===1;)A=A.children[0],--m;for(let _=o.length-1;_>=0&&(v=o[_],v.data===G3);--_)v.data=null}if(A.parent=rj,A.eachBefore(function(_){_.depth=_.parent.depth+1,--m}).eachBefore(jx),A.parent=null,m>0)throw new Error("cycle");return A}return r.id=function(a){return arguments.length?(e=U3(a),r):e},r.parentId=function(a){return arguments.length?(t=U3(a),r):t},r.path=function(a){return arguments.length?(i=U3(a),r):i},r}function oj(e){e=`${e}`;let t=e.length;return sy(e,t-1)&&!sy(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function j_(e){let t=e.length;if(t<2)return"";for(;--t>1&&!sy(e,t););return e.slice(0,t)}function sy(e,t){if(e[t]==="/"){let i=0;for(;t>0&&e[--t]==="\\";)++i;if(!(i&1))return!0}return!1}function lj(e,t){return e.parent===t.parent?1:2}function V3(e){var t=e.children;return t?t[0]:e.t}function Q3(e){var t=e.children;return t?t[t.length-1]:e.t}function cj(e,t,i){var r=i/(t.i-e.i);t.c-=r,t.s+=i,e.c+=r,t.z+=i,t.m+=i}function uj(e){for(var t=0,i=0,r=e.children,a=r.length,o;--a>=0;)o=r[a],o.z+=t,o.m+=t,t+=o.s+(i+=o.c)}function hj(e,t,i){return e.a.parent===t.parent?e.a:i}function a1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}a1.prototype=Object.create(Hh.prototype);function dj(e){for(var t=new a1(e,0),i,r=[t],a,o,h,u;i=r.pop();)if(o=i._.children)for(i.children=new Array(u=o.length),h=u-1;h>=0;--h)r.push(a=i.children[h]=new a1(o[h],h)),a.parent=i;return(t.parent=new a1(null,0)).children=[t],t}function Q1(){var e=lj,t=1,i=1,r=null;function a(c){var d=dj(c);if(d.eachAfter(o),d.parent.m=-d.z,d.eachBefore(h),r)c.eachBefore(m);else{var A=c,p=c,v=c;c.eachBefore(function(S){S.x<A.x&&(A=S),S.x>p.x&&(p=S),S.depth>v.depth&&(v=S)});var g=A===p?1:e(A,p)/2,y=g-A.x,E=t/(p.x+g+y),_=i/(v.depth||1);c.eachBefore(function(S){S.x=(S.x+y)*E,S.y=S.depth*_})}return c}function o(c){var d=c.children,A=c.parent.children,p=c.i?A[c.i-1]:null;if(d){uj(c);var v=(d[0].z+d[d.length-1].z)/2;p?(c.z=p.z+e(c._,p._),c.m=c.z-v):c.z=v}else p&&(c.z=p.z+e(c._,p._));c.parent.A=u(c,p,c.parent.A||A[0])}function h(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function u(c,d,A){if(d){for(var p=c,v=c,g=d,y=p.parent.children[0],E=p.m,_=v.m,S=g.m,x=y.m,C;g=Q3(g),p=V3(p),g&&p;)y=V3(y),v=Q3(v),v.a=c,C=g.z+S-p.z-E+e(g._,p._),C>0&&(cj(hj(g,c,A),c,C),E+=C,_+=C),S+=g.m,E+=p.m,x+=y.m,_+=v.m;g&&!Q3(v)&&(v.t=g,v.m+=S-_),p&&!V3(y)&&(y.t=p,y.m+=E-x,A=c)}return A}function m(c){c.x*=t,c.y=c.depth*i}return a.separation=function(c){return arguments.length?(e=c,a):e},a.size=function(c){return arguments.length?(r=!1,t=+c[0],i=+c[1],a):r?null:[t,i]},a.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],i=+c[1],a):r?[t,i]:null},a}function Ol(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function kg(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ay=Symbol("implicit");function Cb(){var e=new s0,t=[],i=[],r=ay;function a(o){let h=e.get(o);if(h===void 0){if(r!==ay)return r;e.set(o,h=t.push(o)-1)}return i[h%i.length]}return a.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new s0;for(const h of o)e.has(h)||e.set(h,t.push(h)-1);return a},a.range=function(o){return arguments.length?(i=Array.from(o),a):i.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.copy=function(){return Cb(t,i).unknown(r)},Ol.apply(a,arguments),a}function Ug(){var e=Cb().unknown(void 0),t=e.domain,i=e.range,r=0,a=1,o,h,u=!1,m=0,c=0,d=.5;delete e.unknown;function A(){var p=t().length,v=a<r,g=v?a:r,y=v?r:a;o=(y-g)/Math.max(1,p-m+c*2),u&&(o=Math.floor(o)),g+=(y-g-o*(p-m))*d,h=o*(1-m),u&&(g=Math.round(g),h=Math.round(h));var E=_n(p).map(function(_){return g+o*_});return i(v?E.reverse():E)}return e.domain=function(p){return arguments.length?(t(p),A()):t()},e.range=function(p){return arguments.length?([r,a]=p,r=+r,a=+a,A()):[r,a]},e.rangeRound=function(p){return[r,a]=p,r=+r,a=+a,u=!0,A()},e.bandwidth=function(){return h},e.step=function(){return o},e.round=function(p){return arguments.length?(u=!!p,A()):u},e.padding=function(p){return arguments.length?(m=Math.min(1,c=+p),A()):m},e.paddingInner=function(p){return arguments.length?(m=Math.min(1,p),A()):m},e.paddingOuter=function(p){return arguments.length?(c=+p,A()):c},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),A()):d},e.copy=function(){return Ug(t(),[r,a]).round(u).paddingInner(m).paddingOuter(c).align(d)},Ol.apply(A(),arguments)}function Xx(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Xx(t())},e}function fj(){return Xx(Ug.apply(null,arguments).paddingInner(1))}function mj(e){return function(){return e}}function oy(e){return+e}var $_=[0,1];function To(e){return e}function ly(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:mj(isNaN(t)?NaN:.5)}function pj(e,t){var i;return e>t&&(i=e,e=t,t=i),function(r){return Math.max(e,Math.min(t,r))}}function gj(e,t,i){var r=e[0],a=e[1],o=t[0],h=t[1];return a<r?(r=ly(a,r),o=i(h,o)):(r=ly(r,a),o=i(o,h)),function(u){return o(r(u))}}function Aj(e,t,i){var r=Math.min(e.length,t.length)-1,a=new Array(r),o=new Array(r),h=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<r;)a[h]=ly(e[h],e[h+1]),o[h]=i(t[h],t[h+1]);return function(u){var m=v9(e,u,1,r)-1;return o[m](a[m](u))}}function w9(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gg(){var e=$_,t=$_,i=C9,r,a,o,h=To,u,m,c;function d(){var p=Math.min(e.length,t.length);return h!==To&&(h=pj(e[0],e[p-1])),u=p>2?Aj:gj,m=c=null,A}function A(p){return p==null||isNaN(p=+p)?o:(m||(m=u(e.map(r),t,i)))(r(h(p)))}return A.invert=function(p){return h(a((c||(c=u(t,e.map(r),Ma)))(p)))},A.domain=function(p){return arguments.length?(e=Array.from(p,oy),d()):e.slice()},A.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},A.rangeRound=function(p){return t=Array.from(p),i=fb,d()},A.clamp=function(p){return arguments.length?(h=p?!0:To,d()):h!==To},A.interpolate=function(p){return arguments.length?(i=p,d()):i},A.unknown=function(p){return arguments.length?(o=p,A):o},function(p,v){return r=p,a=v,d()}}function Kx(){return Gg()(To,To)}function vj(e,t,i,r){var a=Rv(e,t,i),o;switch(r=$f(r??",f"),r.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=kz(a,h))&&(r.precision=o),ux(r,h)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Uz(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Fz(a))&&(r.precision=o-(r.type==="%")*2);break}}return od(r)}function x9(e){var t=e.domain;return e.ticks=function(i){var r=t();return Dh(r[0],r[r.length-1],i??10)},e.tickFormat=function(i,r){var a=t();return vj(a[0],a[a.length-1],i??10,r)},e.nice=function(i){i==null&&(i=10);var r=t(),a=0,o=r.length-1,h=r[a],u=r[o],m,c,d=10;for(u<h&&(c=h,h=u,u=c,c=a,a=o,o=c);d-- >0;){if(c=a0(h,u,i),c===m)return r[a]=h,r[o]=u,t(r);if(c>0)h=Math.floor(h/c)*c,u=Math.ceil(u/c)*c;else if(c<0)h=Math.ceil(h*c)/c,u=Math.floor(u*c)/c;else break;m=c}return e},e}function S9(){var e=Kx();return e.copy=function(){return w9(e,S9())},Ol.apply(e,arguments),x9(e)}function Yx(e){var t;function i(r){return r==null||isNaN(r=+r)?t:r}return i.invert=i,i.domain=i.range=function(r){return arguments.length?(e=Array.from(r,oy),i):e.slice()},i.unknown=function(r){return arguments.length?(t=r,i):t},i.copy=function(){return Yx(e).unknown(t)},e=arguments.length?Array.from(e,oy):[0,1],x9(i)}function qx(e,t){e=e.slice();var i=0,r=e.length-1,a=e[i],o=e[r],h;return o<a&&(h=i,i=r,r=h,h=a,a=o,o=h),e[i]=t.floor(a),e[r]=t.ceil(o),e}function X_(e){return Math.log(e)}function K_(e){return Math.exp(e)}function yj(e){return-Math.log(-e)}function bj(e){return-Math.exp(-e)}function Mj(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _j(e){return e===10?Mj:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Cj(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Y_(e){return(t,i)=>-e(-t,i)}function Jx(e){const t=e(X_,K_),i=t.domain;let r=10,a,o;function h(){return a=Cj(r),o=_j(r),i()[0]<0?(a=Y_(a),o=Y_(o),e(yj,bj)):e(X_,K_),t}return t.base=function(u){return arguments.length?(r=+u,h()):r},t.domain=function(u){return arguments.length?(i(u),h()):i()},t.ticks=u=>{const m=i();let c=m[0],d=m[m.length-1];const A=d<c;A&&([c,d]=[d,c]);let p=a(c),v=a(d),g,y;const E=u==null?10:+u;let _=[];if(!(r%1)&&v-p<E){if(p=Math.floor(p),v=Math.ceil(v),c>0){for(;p<=v;++p)for(g=1;g<r;++g)if(y=p<0?g/o(-p):g*o(p),!(y<c)){if(y>d)break;_.push(y)}}else for(;p<=v;++p)for(g=r-1;g>=1;--g)if(y=p>0?g/o(-p):g*o(p),!(y<c)){if(y>d)break;_.push(y)}_.length*2<E&&(_=Dh(c,d,E))}else _=Dh(p,v,Math.min(v-p,E)).map(o);return A?_.reverse():_},t.tickFormat=(u,m)=>{if(u==null&&(u=10),m==null&&(m=r===10?"s":","),typeof m!="function"&&(!(r%1)&&(m=$f(m)).precision==null&&(m.trim=!0),m=od(m)),u===1/0)return m;const c=Math.max(1,r*u/t.ticks().length);return d=>{let A=d/o(Math.round(a(d)));return A*r<r-.5&&(A*=r),A<=c?m(d):""}},t.nice=()=>i(qx(i(),{floor:u=>o(Math.floor(a(u))),ceil:u=>o(Math.ceil(a(u)))})),t}function Zx(){const e=Jx(Gg()).domain([1,10]);return e.copy=()=>w9(e,Zx()).base(e.base()),Ol.apply(e,arguments),e}function q_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function J_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function eS(e){var t=1,i=e(q_(t),J_(t));return i.constant=function(r){return arguments.length?e(q_(t=+r),J_(t)):t},x9(i)}function tS(){var e=eS(Gg());return e.copy=function(){return w9(e,tS()).constant(e.constant())},Ol.apply(e,arguments)}function Z_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ej(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wj(e){return e<0?-e*e:e*e}function nS(e){var t=e(To,To),i=1;function r(){return i===1?e(To,To):i===.5?e(Ej,wj):e(Z_(i),Z_(1/i))}return t.exponent=function(a){return arguments.length?(i=+a,r()):i},x9(t)}function iS(){var e=nS(Gg());return e.copy=function(){return w9(e,iS()).exponent(e.exponent())},Ol.apply(e,arguments),e}function rS(){var e=[],t=[],i=[],r;function a(){var h=0,u=Math.max(1,t.length);for(i=new Array(u-1);++h<u;)i[h-1]=FG(e,h/u);return o}function o(h){return h==null||isNaN(h=+h)?r:t[v9(i,h)]}return o.invertExtent=function(h){var u=t.indexOf(h);return u<0?[NaN,NaN]:[u>0?i[u-1]:e[0],u<i.length?i[u]:e[e.length-1]]},o.domain=function(h){if(!arguments.length)return e.slice();e=[];for(let u of h)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort($a),a()},o.range=function(h){return arguments.length?(t=Array.from(h),a()):t.slice()},o.unknown=function(h){return arguments.length?(r=h,o):r},o.quantiles=function(){return i.slice()},o.copy=function(){return rS().domain(e).range(t).unknown(r)},Ol.apply(o,arguments)}function sS(){var e=[.5],t=[0,1],i,r=1;function a(o){return o!=null&&o<=o?t[v9(e,o,0,r)]:i}return a.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(o){var h=t.indexOf(o);return[e[h-1],e[h]]},a.unknown=function(o){return arguments.length?(i=o,a):i},a.copy=function(){return sS().domain(e).range(t).unknown(i)},Ol.apply(a,arguments)}const H3=new Date,z3=new Date;function Ks(e,t,i,r){function a(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(e(o=new Date(+o)),o),a.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),a.round=o=>{const h=a(o),u=a.ceil(o);return o-h<u-o?h:u},a.offset=(o,h)=>(t(o=new Date(+o),h==null?1:Math.floor(h)),o),a.range=(o,h,u)=>{const m=[];if(o=a.ceil(o),u=u==null?1:Math.floor(u),!(o<h)||!(u>0))return m;let c;do m.push(c=new Date(+o)),t(o,u),e(o);while(c<o&&o<h);return m},a.filter=o=>Ks(h=>{if(h>=h)for(;e(h),!o(h);)h.setTime(h-1)},(h,u)=>{if(h>=h)if(u<0)for(;++u<=0;)for(;t(h,-1),!o(h););else for(;--u>=0;)for(;t(h,1),!o(h););}),i&&(a.count=(o,h)=>(H3.setTime(+o),z3.setTime(+h),e(H3),e(z3),Math.floor(i(H3,z3))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(r?h=>r(h)%o===0:h=>a.count(0,h)%o===0):a)),a}const H1=Ks(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);H1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ks(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):H1);H1.range;const uc=1e3,Bo=uc*60,hc=Bo*60,Ac=hc*24,Eb=Ac*7,eC=Ac*30,W3=Ac*365,Ko=Ks(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*uc)},(e,t)=>(t-e)/uc,e=>e.getUTCSeconds());Ko.range;const I9=Ks(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uc)},(e,t)=>{e.setTime(+e+t*Bo)},(e,t)=>(t-e)/Bo,e=>e.getMinutes());I9.range;const T9=Ks(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bo)},(e,t)=>(t-e)/Bo,e=>e.getUTCMinutes());T9.range;const B9=Ks(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uc-e.getMinutes()*Bo)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getHours());B9.range;const R9=Ks(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getUTCHours());R9.range;const g0=Ks(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bo)/Ac,e=>e.getDate()-1);g0.range;const Vg=Ks(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ac,e=>e.getUTCDate()-1);Vg.range;const Qg=Ks(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ac,e=>Math.floor(e/Ac));Qg.range;function A0(e){return Ks(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*Bo)/Eb)}const zh=A0(0),Yf=A0(1),aS=A0(2),oS=A0(3),h0=A0(4),lS=A0(5),cS=A0(6);zh.range;Yf.range;aS.range;oS.range;h0.range;lS.range;cS.range;function v0(e){return Ks(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/Eb)}const Wh=v0(0),qf=v0(1),uS=v0(2),hS=v0(3),d0=v0(4),dS=v0(5),fS=v0(6);Wh.range;qf.range;uS.range;hS.range;d0.range;dS.range;fS.range;const O9=Ks(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());O9.range;const D9=Ks(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());D9.range;const el=Ks(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());el.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ks(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});el.range;const tl=Ks(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());tl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ks(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});tl.range;function mS(e,t,i,r,a,o){const h=[[Ko,1,uc],[Ko,5,5*uc],[Ko,15,15*uc],[Ko,30,30*uc],[o,1,Bo],[o,5,5*Bo],[o,15,15*Bo],[o,30,30*Bo],[a,1,hc],[a,3,3*hc],[a,6,6*hc],[a,12,12*hc],[r,1,Ac],[r,2,2*Ac],[i,1,Eb],[t,1,eC],[t,3,3*eC],[e,1,W3]];function u(c,d,A){const p=d<c;p&&([c,d]=[d,c]);const v=A&&typeof A.range=="function"?A:m(c,d,A),g=v?v.range(c,+d+1):[];return p?g.reverse():g}function m(c,d,A){const p=Math.abs(d-c)/A,v=wg(([,,E])=>E).right(h,p);if(v===h.length)return e.every(Rv(c/W3,d/W3,A));if(v===0)return H1.every(Math.max(Rv(c,d,A),1));const[g,y]=h[p/h[v-1][2]<h[v][2]/p?v-1:v];return g.every(y)}return[u,m]}const[xj,pS]=mS(tl,D9,Wh,Qg,R9,T9),[Sj,Ij]=mS(el,O9,zh,g0,B9,I9);function j3(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $3(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function af(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function Tj(e){var t=e.dateTime,i=e.date,r=e.time,a=e.periods,o=e.days,h=e.shortDays,u=e.months,m=e.shortMonths,c=of(a),d=lf(a),A=of(o),p=lf(o),v=of(h),g=lf(h),y=of(u),E=lf(u),_=of(m),S=lf(m),x={a:q,A:Q,b:k,B:K,c:null,d:aC,e:aC,f:Jj,g:l$,G:u$,H:Kj,I:Yj,j:qj,L:gS,m:Zj,M:e$,p:W,q:J,Q:cC,s:uC,S:t$,u:n$,U:i$,V:r$,w:s$,W:a$,x:null,X:null,y:o$,Y:c$,Z:h$,"%":lC},C={a:se,A:ge,b:fe,B:me,c:null,d:oC,e:oC,f:p$,g:w$,G:S$,H:d$,I:f$,j:m$,L:vS,m:g$,M:A$,p:xe,q:ye,Q:cC,s:uC,S:v$,u:y$,U:b$,V:M$,w:_$,W:C$,x:null,X:null,y:E$,Y:x$,Z:I$,"%":lC},w={a:L,A:N,b:F,B:z,c:G,d:rC,e:rC,f:Wj,g:iC,G:nC,H:sC,I:sC,j:Vj,L:zj,m:Gj,M:Qj,p:P,q:Uj,Q:$j,s:Xj,S:Hj,u:Lj,U:Pj,V:Nj,w:Dj,W:Fj,x:H,X:j,y:iC,Y:nC,Z:kj,"%":jj};x.x=T(i,x),x.X=T(r,x),x.c=T(t,x),C.x=T(i,C),C.X=T(r,C),C.c=T(t,C);function T(we,Ee){return function(He){var Ae=[],Ke=-1,Ue=0,ct=we.length,vt,dt,It;for(He instanceof Date||(He=new Date(+He));++Ke<ct;)we.charCodeAt(Ke)===37&&(Ae.push(we.slice(Ue,Ke)),(dt=tC[vt=we.charAt(++Ke)])!=null?vt=we.charAt(++Ke):dt=vt==="e"?" ":"0",(It=Ee[vt])&&(vt=It(He,dt)),Ae.push(vt),Ue=Ke+1);return Ae.push(we.slice(Ue,Ke)),Ae.join("")}}function O(we,Ee){return function(He){var Ae=af(1900,void 0,1),Ke=B(Ae,we,He+="",0),Ue,ct;if(Ke!=He.length)return null;if("Q"in Ae)return new Date(Ae.Q);if("s"in Ae)return new Date(Ae.s*1e3+("L"in Ae?Ae.L:0));if(Ee&&!("Z"in Ae)&&(Ae.Z=0),"p"in Ae&&(Ae.H=Ae.H%12+Ae.p*12),Ae.m===void 0&&(Ae.m="q"in Ae?Ae.q:0),"V"in Ae){if(Ae.V<1||Ae.V>53)return null;"w"in Ae||(Ae.w=1),"Z"in Ae?(Ue=$3(af(Ae.y,0,1)),ct=Ue.getUTCDay(),Ue=ct>4||ct===0?qf.ceil(Ue):qf(Ue),Ue=Vg.offset(Ue,(Ae.V-1)*7),Ae.y=Ue.getUTCFullYear(),Ae.m=Ue.getUTCMonth(),Ae.d=Ue.getUTCDate()+(Ae.w+6)%7):(Ue=j3(af(Ae.y,0,1)),ct=Ue.getDay(),Ue=ct>4||ct===0?Yf.ceil(Ue):Yf(Ue),Ue=g0.offset(Ue,(Ae.V-1)*7),Ae.y=Ue.getFullYear(),Ae.m=Ue.getMonth(),Ae.d=Ue.getDate()+(Ae.w+6)%7)}else("W"in Ae||"U"in Ae)&&("w"in Ae||(Ae.w="u"in Ae?Ae.u%7:"W"in Ae?1:0),ct="Z"in Ae?$3(af(Ae.y,0,1)).getUTCDay():j3(af(Ae.y,0,1)).getDay(),Ae.m=0,Ae.d="W"in Ae?(Ae.w+6)%7+Ae.W*7-(ct+5)%7:Ae.w+Ae.U*7-(ct+6)%7);return"Z"in Ae?(Ae.H+=Ae.Z/100|0,Ae.M+=Ae.Z%100,$3(Ae)):j3(Ae)}}function B(we,Ee,He,Ae){for(var Ke=0,Ue=Ee.length,ct=He.length,vt,dt;Ke<Ue;){if(Ae>=ct)return-1;if(vt=Ee.charCodeAt(Ke++),vt===37){if(vt=Ee.charAt(Ke++),dt=w[vt in tC?Ee.charAt(Ke++):vt],!dt||(Ae=dt(we,He,Ae))<0)return-1}else if(vt!=He.charCodeAt(Ae++))return-1}return Ae}function P(we,Ee,He){var Ae=c.exec(Ee.slice(He));return Ae?(we.p=d.get(Ae[0].toLowerCase()),He+Ae[0].length):-1}function L(we,Ee,He){var Ae=v.exec(Ee.slice(He));return Ae?(we.w=g.get(Ae[0].toLowerCase()),He+Ae[0].length):-1}function N(we,Ee,He){var Ae=A.exec(Ee.slice(He));return Ae?(we.w=p.get(Ae[0].toLowerCase()),He+Ae[0].length):-1}function F(we,Ee,He){var Ae=_.exec(Ee.slice(He));return Ae?(we.m=S.get(Ae[0].toLowerCase()),He+Ae[0].length):-1}function z(we,Ee,He){var Ae=y.exec(Ee.slice(He));return Ae?(we.m=E.get(Ae[0].toLowerCase()),He+Ae[0].length):-1}function G(we,Ee,He){return B(we,t,Ee,He)}function H(we,Ee,He){return B(we,i,Ee,He)}function j(we,Ee,He){return B(we,r,Ee,He)}function q(we){return h[we.getDay()]}function Q(we){return o[we.getDay()]}function k(we){return m[we.getMonth()]}function K(we){return u[we.getMonth()]}function W(we){return a[+(we.getHours()>=12)]}function J(we){return 1+~~(we.getMonth()/3)}function se(we){return h[we.getUTCDay()]}function ge(we){return o[we.getUTCDay()]}function fe(we){return m[we.getUTCMonth()]}function me(we){return u[we.getUTCMonth()]}function xe(we){return a[+(we.getUTCHours()>=12)]}function ye(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Ee=T(we+="",x);return Ee.toString=function(){return we},Ee},parse:function(we){var Ee=O(we+="",!1);return Ee.toString=function(){return we},Ee},utcFormat:function(we){var Ee=T(we+="",C);return Ee.toString=function(){return we},Ee},utcParse:function(we){var Ee=O(we+="",!0);return Ee.toString=function(){return we},Ee}}}var tC={"-":"",_:" ",0:"0"},la=/^\s*\d+/,Bj=/^%/,Rj=/[\\^$*+?|[\]().{}]/g;function Tr(e,t,i){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<i?new Array(i-o+1).join(t)+a:a)}function Oj(e){return e.replace(Rj,"\\$&")}function of(e){return new RegExp("^(?:"+e.map(Oj).join("|")+")","i")}function lf(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function Dj(e,t,i){var r=la.exec(t.slice(i,i+1));return r?(e.w=+r[0],i+r[0].length):-1}function Lj(e,t,i){var r=la.exec(t.slice(i,i+1));return r?(e.u=+r[0],i+r[0].length):-1}function Pj(e,t,i){var r=la.exec(t.slice(i,i+2));return r?(e.U=+r[0],i+r[0].length):-1}function Nj(e,t,i){var r=la.exec(t.slice(i,i+2));return r?(e.V=+r[0],i+r[0].length):-1}function Fj(e,t,i){var r=la.exec(t.slice(i,i+2));return r?(e.W=+r[0],i+r[0].length):-1}function nC(e,t,i){var r=la.exec(t.slice(i,i+4));return r?(e.y=+r[0],i+r[0].length):-1}function iC(e,t,i){var r=la.exec(t.slice(i,i+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function kj(e,t,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function Uj(e,t,i){var r=la.exec(t.slice(i,i+1));return r?(e.q=r[0]*3-3,i+r[0].length):-1}function Gj(e,t,i){var r=la.exec(t.slice(i,i+2));return r?(e.m=r[0]-1,i+r[0].length):-1}function rC(e,t,i){var r=la.exec(t.slice(i,i+2));return r?(e.d=+r[0],i+r[0].length):-1}function Vj(e,t,i){var r=la.exec(t.slice(i,i+3));return r?(e.m=0,e.d=+r[0],i+r[0].length):-1}function sC(e,t,i){var r=la.exec(t.slice(i,i+2));return r?(e.H=+r[0],i+r[0].length):-1}function Qj(e,t,i){var r=la.exec(t.slice(i,i+2));return r?(e.M=+r[0],i+r[0].length):-1}function Hj(e,t,i){var r=la.exec(t.slice(i,i+2));return r?(e.S=+r[0],i+r[0].length):-1}function zj(e,t,i){var r=la.exec(t.slice(i,i+3));return r?(e.L=+r[0],i+r[0].length):-1}function Wj(e,t,i){var r=la.exec(t.slice(i,i+6));return r?(e.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function jj(e,t,i){var r=Bj.exec(t.slice(i,i+1));return r?i+r[0].length:-1}function $j(e,t,i){var r=la.exec(t.slice(i));return r?(e.Q=+r[0],i+r[0].length):-1}function Xj(e,t,i){var r=la.exec(t.slice(i));return r?(e.s=+r[0],i+r[0].length):-1}function aC(e,t){return Tr(e.getDate(),t,2)}function Kj(e,t){return Tr(e.getHours(),t,2)}function Yj(e,t){return Tr(e.getHours()%12||12,t,2)}function qj(e,t){return Tr(1+g0.count(el(e),e),t,3)}function gS(e,t){return Tr(e.getMilliseconds(),t,3)}function Jj(e,t){return gS(e,t)+"000"}function Zj(e,t){return Tr(e.getMonth()+1,t,2)}function e$(e,t){return Tr(e.getMinutes(),t,2)}function t$(e,t){return Tr(e.getSeconds(),t,2)}function n$(e){var t=e.getDay();return t===0?7:t}function i$(e,t){return Tr(zh.count(el(e)-1,e),t,2)}function AS(e){var t=e.getDay();return t>=4||t===0?h0(e):h0.ceil(e)}function r$(e,t){return e=AS(e),Tr(h0.count(el(e),e)+(el(e).getDay()===4),t,2)}function s$(e){return e.getDay()}function a$(e,t){return Tr(Yf.count(el(e)-1,e),t,2)}function o$(e,t){return Tr(e.getFullYear()%100,t,2)}function l$(e,t){return e=AS(e),Tr(e.getFullYear()%100,t,2)}function c$(e,t){return Tr(e.getFullYear()%1e4,t,4)}function u$(e,t){var i=e.getDay();return e=i>=4||i===0?h0(e):h0.ceil(e),Tr(e.getFullYear()%1e4,t,4)}function h$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Tr(t/60|0,"0",2)+Tr(t%60,"0",2)}function oC(e,t){return Tr(e.getUTCDate(),t,2)}function d$(e,t){return Tr(e.getUTCHours(),t,2)}function f$(e,t){return Tr(e.getUTCHours()%12||12,t,2)}function m$(e,t){return Tr(1+Vg.count(tl(e),e),t,3)}function vS(e,t){return Tr(e.getUTCMilliseconds(),t,3)}function p$(e,t){return vS(e,t)+"000"}function g$(e,t){return Tr(e.getUTCMonth()+1,t,2)}function A$(e,t){return Tr(e.getUTCMinutes(),t,2)}function v$(e,t){return Tr(e.getUTCSeconds(),t,2)}function y$(e){var t=e.getUTCDay();return t===0?7:t}function b$(e,t){return Tr(Wh.count(tl(e)-1,e),t,2)}function yS(e){var t=e.getUTCDay();return t>=4||t===0?d0(e):d0.ceil(e)}function M$(e,t){return e=yS(e),Tr(d0.count(tl(e),e)+(tl(e).getUTCDay()===4),t,2)}function _$(e){return e.getUTCDay()}function C$(e,t){return Tr(qf.count(tl(e)-1,e),t,2)}function E$(e,t){return Tr(e.getUTCFullYear()%100,t,2)}function w$(e,t){return e=yS(e),Tr(e.getUTCFullYear()%100,t,2)}function x$(e,t){return Tr(e.getUTCFullYear()%1e4,t,4)}function S$(e,t){var i=e.getUTCDay();return e=i>=4||i===0?d0(e):d0.ceil(e),Tr(e.getUTCFullYear()%1e4,t,4)}function I$(){return"+0000"}function lC(){return"%"}function cC(e){return+e}function uC(e){return Math.floor(+e/1e3)}var lh,wb,L9;T$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function T$(e){return lh=Tj(e),wb=lh.format,lh.parse,L9=lh.utcFormat,lh.utcParse,lh}function B$(e){return new Date(e)}function R$(e){return e instanceof Date?+e:+new Date(+e)}function xb(e,t,i,r,a,o,h,u,m,c){var d=Kx(),A=d.invert,p=d.domain,v=c(".%L"),g=c(":%S"),y=c("%I:%M"),E=c("%I %p"),_=c("%a %d"),S=c("%b %d"),x=c("%B"),C=c("%Y");function w(T){return(m(T)<T?v:u(T)<T?g:h(T)<T?y:o(T)<T?E:r(T)<T?a(T)<T?_:S:i(T)<T?x:C)(T)}return d.invert=function(T){return new Date(A(T))},d.domain=function(T){return arguments.length?p(Array.from(T,R$)):p().map(B$)},d.ticks=function(T){var O=p();return e(O[0],O[O.length-1],T??10)},d.tickFormat=function(T,O){return O==null?w:c(O)},d.nice=function(T){var O=p();return(!T||typeof T.range!="function")&&(T=t(O[0],O[O.length-1],T??10)),T?p(qx(O,T)):d},d.copy=function(){return w9(d,xb(e,t,i,r,a,o,h,u,m,c))},d}function O$(){return Ol.apply(xb(Sj,Ij,el,O9,zh,g0,B9,I9,Ko,wb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function D$(){return Ol.apply(xb(xj,pS,tl,D9,Wh,Vg,R9,T9,Ko,L9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Hg(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function zg(){var e=0,t=.5,i=1,r=1,a,o,h,u,m,c=To,d,A=!1,p;function v(y){return isNaN(y=+y)?p:(y=.5+((y=+d(y))-o)*(r*y<r*o?u:m),c(A?Math.max(0,Math.min(1,y)):y))}v.domain=function(y){return arguments.length?([e,t,i]=y,a=d(e=+e),o=d(t=+t),h=d(i=+i),u=a===o?0:.5/(o-a),m=o===h?0:.5/(h-o),r=o<a?-1:1,v):[e,t,i]},v.clamp=function(y){return arguments.length?(A=!!y,v):A},v.interpolator=function(y){return arguments.length?(c=y,v):c};function g(y){return function(E){var _,S,x;return arguments.length?([_,S,x]=E,c=Og(y,[_,S,x]),v):[c(0),c(.5),c(1)]}}return v.range=g(C9),v.rangeRound=g(fb),v.unknown=function(y){return arguments.length?(p=y,v):p},function(y){return d=y,a=y(e),o=y(t),h=y(i),u=a===o?0:.5/(o-a),m=o===h?0:.5/(h-o),r=o<a?-1:1,v}}function bS(){var e=x9(zg()(To));return e.copy=function(){return Hg(e,bS())},kg.apply(e,arguments)}function MS(){var e=Jx(zg()).domain([.1,1,10]);return e.copy=function(){return Hg(e,MS()).base(e.base())},kg.apply(e,arguments)}function _S(){var e=eS(zg());return e.copy=function(){return Hg(e,_S()).constant(e.constant())},kg.apply(e,arguments)}function CS(){var e=nS(zg());return e.copy=function(){return Hg(e,CS()).exponent(e.exponent())},kg.apply(e,arguments)}function zi(e){for(var t=e.length/6|0,i=new Array(t),r=0;r<t;)i[r]="#"+e.slice(r*6,++r*6);return i}const L$=zi("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),P$=zi("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),N$=zi("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Jc=zi("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),F$=zi("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),k$=zi("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),U$=zi("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),G$=zi("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),V$=zi("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Q$=zi("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),H$=zi("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Jr=e=>JQ(e[e.length-1]);var ES=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(zi);const wS=Jr(ES);var xS=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(zi);const SS=Jr(xS);var IS=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(zi);const TS=Jr(IS);var BS=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(zi);const RS=Jr(BS);var cy=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(zi);const z1=Jr(cy);var OS=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(zi);const DS=Jr(OS);var uy=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(zi);const W1=Jr(uy);var LS=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(zi);const PS=Jr(LS);var NS=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(zi);const FS=Jr(NS);var kS=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(zi);const US=Jr(kS);var GS=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(zi);const VS=Jr(GS);var QS=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(zi);const HS=Jr(QS);var zS=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(zi);const WS=Jr(zS);var jS=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(zi);const $S=Jr(jS);var XS=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(zi);const KS=Jr(XS);var YS=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(zi);const qS=Jr(YS);var JS=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(zi);const ZS=Jr(JS);var eI=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(zi);const tI=Jr(eI);var nI=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(zi);const iI=Jr(nI);var rI=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(zi);const sI=Jr(rI);var aI=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(zi);const oI=Jr(aI);var lI=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(zi);const cI=Jr(lI);var uI=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(zi);const hI=Jr(uI);var dI=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(zi);const fI=Jr(dI);var mI=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(zi);const pI=Jr(mI);var gI=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(zi);const AI=Jr(gI);var vI=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(zi);const yI=Jr(vI);function bI(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const MI=mb(Il(300,.5,0),Il(-240,.5,1));var _I=mb(Il(-100,.75,.35),Il(80,1.5,.8)),CI=mb(Il(260,.75,.35),Il(80,1.5,.8)),Qp=Il();function EI(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Qp.h=360*e-100,Qp.s=1.5-1.5*t,Qp.l=.8-.9*t,Qp+""}var Hp=iu(),z$=Math.PI/3,W$=Math.PI*2/3;function wI(e){var t;return e=(.5-e)*Math.PI,Hp.r=255*(t=Math.sin(e))*t,Hp.g=255*(t=Math.sin(e+z$))*t,Hp.b=255*(t=Math.sin(e+W$))*t,Hp+""}function xI(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Wg(e){var t=e.length;return function(i){return e[Math.max(0,Math.min(t-1,Math.floor(i*t)))]}}const Sb=Wg(zi("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var SI=Wg(zi("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),II=Wg(zi("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),TI=Wg(zi("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ia(e){return function(){return e}}const BI=Math.cos,Ib=Math.min,j1=Math.sin,Ys=Math.sqrt,hC=1e-12,$1=Math.PI,jg=2*$1;function RI(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const r=Math.floor(i);if(!(r>=0))throw new RangeError(`invalid digits: ${i}`);t=r}return e},()=>new lx(t)}function OI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DI(e){this._context=e}DI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function P9(e){return new DI(e)}function LI(e){return e[0]}function PI(e){return e[1]}function NI(e,t){var i=ia(!0),r=null,a=P9,o=null,h=RI(u);e=typeof e=="function"?e:e===void 0?LI:ia(e),t=typeof t=="function"?t:t===void 0?PI:ia(t);function u(m){var c,d=(m=OI(m)).length,A,p=!1,v;for(r==null&&(o=a(v=h())),c=0;c<=d;++c)!(c<d&&i(A=m[c],c,m))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(A,c,m),+t(A,c,m));if(v)return o=null,v+""||null}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:ia(+m),u):e},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:ia(+m),u):t},u.defined=function(m){return arguments.length?(i=typeof m=="function"?m:ia(!!m),u):i},u.curve=function(m){return arguments.length?(a=m,r!=null&&(o=a(r)),u):a},u.context=function(m){return arguments.length?(m==null?r=o=null:o=a(r=m),u):r},u}function j$(e,t,i){var r=null,a=ia(!0),o=null,h=P9,u=null,m=RI(c);e=typeof e=="function"?e:e===void 0?LI:ia(+e),t=typeof t=="function"?t:ia(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?PI:ia(+i);function c(A){var p,v,g,y=(A=OI(A)).length,E,_=!1,S,x=new Array(y),C=new Array(y);for(o==null&&(u=h(S=m())),p=0;p<=y;++p){if(!(p<y&&a(E=A[p],p,A))===_)if(_=!_)v=p,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),g=p-1;g>=v;--g)u.point(x[g],C[g]);u.lineEnd(),u.areaEnd()}_&&(x[p]=+e(E,p,A),C[p]=+t(E,p,A),u.point(r?+r(E,p,A):x[p],i?+i(E,p,A):C[p]))}if(S)return u=null,S+""||null}function d(){return NI().defined(a).curve(h).context(o)}return c.x=function(A){return arguments.length?(e=typeof A=="function"?A:ia(+A),r=null,c):e},c.x0=function(A){return arguments.length?(e=typeof A=="function"?A:ia(+A),c):e},c.x1=function(A){return arguments.length?(r=A==null?null:typeof A=="function"?A:ia(+A),c):r},c.y=function(A){return arguments.length?(t=typeof A=="function"?A:ia(+A),i=null,c):t},c.y0=function(A){return arguments.length?(t=typeof A=="function"?A:ia(+A),c):t},c.y1=function(A){return arguments.length?(i=A==null?null:typeof A=="function"?A:ia(+A),c):i},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(i)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(A){return arguments.length?(a=typeof A=="function"?A:ia(!!A),c):a},c.curve=function(A){return arguments.length?(h=A,o!=null&&(u=h(o)),c):h},c.context=function(A){return arguments.length?(A==null?o=u=null:u=h(o=A),c):o},c}class FI{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function $$(e){return new FI(e,!0)}function X$(e){return new FI(e,!1)}const K$=Ys(3),kI={draw(e,t){const i=Ys(t+Ib(t/28,.75))*.59436,r=i/2,a=r*K$;e.moveTo(0,i),e.lineTo(0,-i),e.moveTo(-a,-r),e.lineTo(a,r),e.moveTo(-a,r),e.lineTo(a,-r)}},Jf={draw(e,t){const i=Ys(t/$1);e.moveTo(i,0),e.arc(0,0,i,0,jg)}},UI={draw(e,t){const i=Ys(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},GI=Ys(1/3),Y$=GI*2,VI={draw(e,t){const i=Ys(t/Y$),r=i*GI;e.moveTo(0,-i),e.lineTo(r,0),e.lineTo(0,i),e.lineTo(-r,0),e.closePath()}},QI={draw(e,t){const i=Ys(t)*.62625;e.moveTo(0,-i),e.lineTo(i,0),e.lineTo(0,i),e.lineTo(-i,0),e.closePath()}},HI={draw(e,t){const i=Ys(t-Ib(t/7,2))*.87559;e.moveTo(-i,0),e.lineTo(i,0),e.moveTo(0,i),e.lineTo(0,-i)}},zI={draw(e,t){const i=Ys(t),r=-i/2;e.rect(r,r,i,i)}},WI={draw(e,t){const i=Ys(t)*.4431;e.moveTo(i,i),e.lineTo(i,-i),e.lineTo(-i,-i),e.lineTo(-i,i),e.closePath()}},q$=.8908130915292852,jI=j1($1/10)/j1(7*$1/10),J$=j1(jg/10)*jI,Z$=-BI(jg/10)*jI,$I={draw(e,t){const i=Ys(t*q$),r=J$*i,a=Z$*i;e.moveTo(0,-i),e.lineTo(r,a);for(let o=1;o<5;++o){const h=jg*o/5,u=BI(h),m=j1(h);e.lineTo(m*i,-u*i),e.lineTo(u*r-m*a,m*r+u*a)}e.closePath()}},X3=Ys(3),XI={draw(e,t){const i=-Ys(t/(X3*3));e.moveTo(0,i*2),e.lineTo(-X3*i,-i),e.lineTo(X3*i,-i),e.closePath()}},eX=Ys(3),KI={draw(e,t){const i=Ys(t)*.6824,r=i/2,a=i*eX/2;e.moveTo(0,-i),e.lineTo(a,r),e.lineTo(-a,r),e.closePath()}},Eo=-.5,wo=Ys(3)/2,hy=1/Ys(12),tX=(hy/2+1)*3,YI={draw(e,t){const i=Ys(t/tX),r=i/2,a=i*hy,o=r,h=i*hy+i,u=-o,m=h;e.moveTo(r,a),e.lineTo(o,h),e.lineTo(u,m),e.lineTo(Eo*r-wo*a,wo*r+Eo*a),e.lineTo(Eo*o-wo*h,wo*o+Eo*h),e.lineTo(Eo*u-wo*m,wo*u+Eo*m),e.lineTo(Eo*r+wo*a,Eo*a-wo*r),e.lineTo(Eo*o+wo*h,Eo*h-wo*o),e.lineTo(Eo*u+wo*m,Eo*m-wo*u),e.closePath()}},qI={draw(e,t){const i=Ys(t-Ib(t/6,1.7))*.6189;e.moveTo(-i,-i),e.lineTo(i,i),e.moveTo(-i,i),e.lineTo(i,-i)}},nX=[Jf,UI,VI,zI,$I,XI,YI],iX=[Jf,HI,qI,KI,kI,WI,QI];function ru(){}function X1(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function $g(e){this._context=e}$g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:X1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:X1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rX(e){return new $g(e)}function JI(e){this._context=e}JI.prototype={areaStart:ru,areaEnd:ru,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:X1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sX(e){return new JI(e)}function ZI(e){this._context=e}ZI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,r):this._context.moveTo(i,r);break;case 3:this._point=4;default:X1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function aX(e){return new ZI(e)}function eT(e,t){this._basis=new $g(e),this._beta=t}eT.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,i=e.length-1;if(i>0)for(var r=e[0],a=t[0],o=e[i]-r,h=t[i]-a,u=-1,m;++u<=i;)m=u/i,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+m*o),this._beta*t[u]+(1-this._beta)*(a+m*h));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const oX=function e(t){function i(r){return t===1?new $g(r):new eT(r,t)}return i.beta=function(r){return e(+r)},i}(.85);function K1(e,t,i){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-i),e._x2,e._y2)}function Tb(e,t){this._context=e,this._k=(1-t)/6}Tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:K1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:K1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lX=function e(t){function i(r){return new Tb(r,t)}return i.tension=function(r){return e(+r)},i}(0);function Bb(e,t){this._context=e,this._k=(1-t)/6}Bb.prototype={areaStart:ru,areaEnd:ru,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:K1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cX=function e(t){function i(r){return new Bb(r,t)}return i.tension=function(r){return e(+r)},i}(0);function Rb(e,t){this._context=e,this._k=(1-t)/6}Rb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:K1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const uX=function e(t){function i(r){return new Rb(r,t)}return i.tension=function(r){return e(+r)},i}(0);function Ob(e,t,i){var r=e._x1,a=e._y1,o=e._x2,h=e._y2;if(e._l01_a>hC){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,m=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/m,a=(a*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/m}if(e._l23_a>hC){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/d,h=(h*c+e._y1*e._l23_2a-i*e._l12_2a)/d}e._context.bezierCurveTo(r,a,o,h,e._x2,e._y2)}function tT(e,t){this._context=e,this._alpha=t}tT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Ob(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hX=function e(t){function i(r){return t?new tT(r,t):new Tb(r,0)}return i.alpha=function(r){return e(+r)},i}(.5);function nT(e,t){this._context=e,this._alpha=t}nT.prototype={areaStart:ru,areaEnd:ru,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ob(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const dX=function e(t){function i(r){return t?new nT(r,t):new Bb(r,0)}return i.alpha=function(r){return e(+r)},i}(.5);function iT(e,t){this._context=e,this._alpha=t}iT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ob(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fX=function e(t){function i(r){return t?new iT(r,t):new Rb(r,0)}return i.alpha=function(r){return e(+r)},i}(.5);function rT(e){this._context=e}rT.prototype={areaStart:ru,areaEnd:ru,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function mX(e){return new rT(e)}function dC(e){return e<0?-1:1}function fC(e,t,i){var r=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(r||a<0&&-0),h=(i-e._y1)/(a||r<0&&-0),u=(o*a+h*r)/(r+a);return(dC(o)+dC(h))*Math.min(Math.abs(o),Math.abs(h),.5*Math.abs(u))||0}function mC(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function K3(e,t,i){var r=e._x0,a=e._y0,o=e._x1,h=e._y1,u=(o-r)/3;e._context.bezierCurveTo(r+u,a+u*t,o-u,h-u*i,o,h)}function Y1(e){this._context=e}Y1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:K3(this,this._t0,mC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,K3(this,mC(this,i=fC(this,e,t)),i);break;default:K3(this,this._t0,i=fC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function sT(e){this._context=new aT(e)}(sT.prototype=Object.create(Y1.prototype)).point=function(e,t){Y1.prototype.point.call(this,t,e)};function aT(e){this._context=e}aT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,r,a,o){this._context.bezierCurveTo(t,e,r,i,o,a)}};function pX(e){return new Y1(e)}function gX(e){return new sT(e)}function oT(e){this._context=e}oT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var r=pC(e),a=pC(t),o=0,h=1;h<i;++o,++h)this._context.bezierCurveTo(r[0][o],a[0][o],r[1][o],a[1][o],e[h],t[h]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function pC(e){var t,i=e.length-1,r,a=new Array(i),o=new Array(i),h=new Array(i);for(a[0]=0,o[0]=2,h[0]=e[0]+2*e[1],t=1;t<i-1;++t)a[t]=1,o[t]=4,h[t]=4*e[t]+2*e[t+1];for(a[i-1]=2,o[i-1]=7,h[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)r=a[t]/o[t-1],o[t]-=r,h[t]-=r*h[t-1];for(a[i-1]=h[i-1]/o[i-1],t=i-2;t>=0;--t)a[t]=(h[t]-a[t+1])/o[t];for(o[i-1]=(e[i]+a[i-1])/2,t=0;t<i-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function AX(e){return new oT(e)}function Xg(e,t){this._context=e,this._t=t}Xg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function vX(e){return new Xg(e,.5)}function yX(e){return new Xg(e,0)}function bX(e){return new Xg(e,1)}function bf(e,t,i){this.k=e,this.x=t,this.y=i}bf.prototype={constructor:bf,scale:function(e){return e===1?this:new bf(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new bf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};bf.prototype;function MX(e){return 60*1/e}function lT(e,t){return _n(Math.ceil(e/12)*12,t+1,12)}function ss(e,t,i){return e<t?t:e>i?i:e}function cT(e){return new Promise(t=>{setTimeout(t,e*1e3)})}function gC(e,t){return e.has(t)?e.delete(t):e.add(t),new Set(e)}function AC(e,t){for(const i of t)if(e.has(i))return!0;return!1}function vC(e,t){return Math.round(e/t)*t}const dy="demo-settings",fy="usage",dc=window.localStorage;function _X(){let e=0,t,i;for(i in dc)dc.hasOwnProperty(i)&&(t=(dc[i].length+i.length)*2,e+=t);return e/1024}function CX(){let e="12345678",t=0;for(;;){try{dc.setItem("__test__",e)}catch{break}e=`${e}${e}`,t=e.length}return dc.removeItem("__test__"),t*32/1024}function EX(){const e=_X(),t=CX();return{currentKb:e,limitKb:t,percentFull:e/t*100}}function Db(){let e;return dc.getItem(fy)!==null?(e=dc.getItem(fy),e=JSON.parse(e)):e={demoClicks:{},demoRecordedData:{}},e}function wX(e){try{dc.setItem(fy,JSON.stringify(e))}catch(t){window.alert("localStorage might be full: "+t.toString())}}function my(e){const t=dc.getItem(dy);if(t)return JSON.parse(t)[e]}function Zr(e,t){console.log(`saving recording for ${e}`,t);const i=Db();console.log(i),i.demoRecordedData||(i.demoRecordedData={}),i.demoRecordedData[e]||(i.demoRecordedData[e]=[]),console.log(i),i.demoRecordedData[e].push({date:new Date().toISOString(),softwareVersion:fw,data:t}),wX(i)}function xX(e){const t=Db();return t.demoRecordedData?t.demoRecordedData[e]?t.demoRecordedData[e]:[]:[]}const Xr="🔵",Kr="⚪",yC="∧",bC="∨",MC="Ⓜ",_C="Ⓐ";var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uT={exports:{}};(function(e,t){(function(i,r){r()})(cf,function(){function i(c,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,d,A){var p=new XMLHttpRequest;p.open("GET",c),p.responseType="blob",p.onload=function(){m(p.response,d,A)},p.onerror=function(){console.error("could not download file")},p.send()}function a(c){var d=new XMLHttpRequest;d.open("HEAD",c,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function o(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(d)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof cf=="object"&&cf.global===cf?cf:void 0,u=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(c,d,A){var p=h.URL||h.webkitURL,v=document.createElement("a");d=d||c.name||"download",v.download=d,v.rel="noopener",typeof c=="string"?(v.href=c,v.origin===location.origin?o(v):a(v.href)?r(c,d,A):o(v,v.target="_blank")):(v.href=p.createObjectURL(c),setTimeout(function(){p.revokeObjectURL(v.href)},4e4),setTimeout(function(){o(v)},0))}:"msSaveOrOpenBlob"in navigator?function(c,d,A){if(d=d||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(i(c,A),d);else if(a(c))r(c,d,A);else{var p=document.createElement("a");p.href=c,p.target="_blank",setTimeout(function(){o(p)})}}:function(c,d,A,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof c=="string")return r(c,d,A);var v=c.type==="application/octet-stream",g=/constructor/i.test(h.HTMLElement)||h.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||v&&g||u)&&typeof FileReader<"u"){var E=new FileReader;E.onloadend=function(){var x=E.result;x=y?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=x:location=x,p=null},E.readAsDataURL(c)}else{var _=h.URL||h.webkitURL,S=_.createObjectURL(c);p?p.location=S:location.href=S,p=null,setTimeout(function(){_.revokeObjectURL(S)},4e4)}});h.saveAs=m.saveAs=m,e.exports=m})})(uT);var SX=uT.exports;const hT=Lb(SX),_l=[{title:"timing",description:"Performing actions at the itended time",children:[{id:"duration",title:"duration",description:"Notes should be played according to the intended duration"},{id:"sub-division",title:"sub-division",description:"Note onsets should follow a sub-division of beats consistently, for example playing straight eighth notes or quarter triplets"},{id:"tempo-keeping",title:"tempo keeping",description:"The tempo should be kept same over a longer stretch of time without the help of a metronome"},{id:"chord-timing",title:"chord timing",description:"Notes in a chord should start at the same time and the time between chords should be consistent"},{id:"arpeggio-timing",title:"arpeggio timing",description:"Notes in an arpeggio should be spaced out evenly and the time between arpeggios should be consistent"},{id:"swing-feel",title:"swing feel",description:"Playing a swing feel, meaning that every even (sub)beat is shifted in time consistently by the intended amount"},{id:"timing-consistency",title:"timing consistency",description:"When playing the same musical pattern multiple times, the timing should be similar"},{id:"rests",title:"rests",description:"Notes should stop in time for a rest"},{id:"syncopation",title:"syncopation",description:"When playing different rhythms together, the timing should be on grid"}]},{title:"pitch",description:"Playing or modulating notes at the intended pitch (frequency in Hertz)",children:[{id:"on-pitch",title:"on pitch",description:"When playing a melody, the notes' pitches should be hit correctly"},{id:"pitch-intervals",title:"intervals",description:"In improvisation, the intervals between consecutive notes should match the intended harmony or dissonance"},{id:"scale-degrees",title:"scale degrees",description:"In improvisation, scale degrees should be used to appropriate amounts"},{id:"chord-notes",title:"chord notes",description:"The notes in a chord should be played as planned or chosen to match the intended harmony or dissonance"},{id:"pitch-keeping",title:"pitch keeping",description:"The pitch should start and stay at the intended note"},{id:"bending",title:"bending",description:"Bends should reach and stay at the intended semitone, the bend should start and end as quickly as intended"},{id:"vibrato",title:"vibrato",description:"Vibratos should have the intended shift in pitch and the intended frequency of modulation"}]},{title:"dynamics",description:"Playing notes at the intended loudness and changing or varying this loudness as intended",children:[{id:"constant-dynamics",title:"constant dynamics",description:"Notes should have the same loudness"},{id:"accents",title:"accents",description:"Important notes should be louder than others, for example to higlight the first of a group of 3 or 4 notes"},{id:"(de)crescendo",title:"(de-) crescendo",description:"When getting louder/quiter, the loudness should in- or decrease smoothly"}]},{title:"instrument",description:"Knowing and correctly using the instrument and all its part",children:[{id:"instrument-layout",title:"instrument layout",description:"The musician should know where notes are played on the instrument and use different parts of it appropriately"},{id:"synchronized-body-parts",title:"synchronized body parts",description:"Different parts of the instrument should be played with synchronized timing when played with mutliple body parts: hands, feet, mouth, ..."},{id:"strumming-direction",title:"strumming direction",description:"Chords should be strummed in the intended direction"},{id:"strumming-strings",title:"strumming strings",description:"Only the intended strings should be strummed"}]},{title:"ensemble",description:"Playing together with other musicians that use the same or a different type of instrument",children:[{id:"synchronized-timing",title:"synchronized timing",description:"Multiple musicians playing together should play to the same timing grid"},{id:"same-key",title:"same key",description:"Multiple musicians playing together should play in the same key and change it at the same time"}]}];for(const e of _l)for(const[t,i]of e.children.entries())i.label=`${e.title.at(0).toUpperCase()}${t+1}`;function dT(e){let t=[];for(const i of e)i.id?t.push(i):t=[...t,...dT(i.children)];return t}const IX=dT(_l);function CC(e,t,i){const r=e.slice();return r[7]=t[i],r}function EC(e,t,i){const r=e.slice();return r[10]=t[i],r}function wC(e){let t,i=nn(e[7].children),r=[];for(let a=0;a<i.length;a+=1)r[a]=xC(EC(e,i,a));return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=nb()},m(a,o){for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(a,o);Rt(a,t,o)},p(a,o){if(o&5){i=nn(a[7].children);let h;for(h=0;h<i.length;h+=1){const u=EC(a,i,h);r[h]?r[h].p(u,o):(r[h]=xC(u),r[h].c(),r[h].m(t.parentNode,t))}for(;h<r.length;h+=1)r[h].d(1);r.length=i.length}},d(a){a&&Bt(t),Gn(r,a)}}}function xC(e){let t,i=e[10].title+"",r,a,o,h;function u(){return e[6](e[10])}return{c(){t=ie("button"),r=ze(i),a=ue(),de(t,"class","skill svelte-1kubzsg")},m(m,c){Rt(m,t,c),D(t,r),D(t,a),o||(h=nt(t,"click",u),o=!0)},p(m,c){e=m,c&4&&i!==(i=e[10].title+"")&&Ht(r,i)},d(m){m&&Bt(t),o=!1,h()}}}function SC(e){let t,i,r=(e[7].shown?yC:bC)+"",a,o,h=e[7].title+"",u,m,c,d,A;function p(){return e[5](e[7])}let v=e[7].shown&&wC(e);return{c(){t=ie("button"),i=ze(`📁
            `),a=ze(r),o=ue(),u=ze(h),m=ue(),v&&v.c(),c=nb(),de(t,"class","node svelte-1kubzsg")},m(g,y){Rt(g,t,y),D(t,i),D(t,a),D(t,o),D(t,u),Rt(g,m,y),v&&v.m(g,y),Rt(g,c,y),d||(A=nt(t,"click",p),d=!0)},p(g,y){e=g,y&4&&r!==(r=(e[7].shown?yC:bC)+"")&&Ht(a,r),y&4&&h!==(h=e[7].title+"")&&Ht(u,h),e[7].shown?v?v.p(e,y):(v=wC(e),v.c(),v.m(c.parentNode,c)):v&&(v.d(1),v=null)},d(g){g&&(Bt(t),Bt(m),Bt(c)),v&&v.d(g),d=!1,A()}}}function TX(e){let t,i,r,a,o,h,u,m=nn(e[2]),c=[];for(let d=0;d<m.length;d+=1)c[d]=SC(CC(e,m,d));return{c(){t=ie("main"),i=ie("h2"),i.textContent="skills",r=ue(),a=ie("button"),a.textContent="show all",o=ue();for(let d=0;d<c.length;d+=1)c[d].c();de(t,"class","svelte-1kubzsg")},m(d,A){Rt(d,t,A),D(t,i),D(t,r),D(t,a),D(t,o);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(t,null);h||(u=nt(a,"click",e[4]),h=!0)},p(d,[A]){if(A&13){m=nn(d[2]);let p;for(p=0;p<m.length;p+=1){const v=CC(d,m,p);c[p]?c[p].p(v,A):(c[p]=SC(v),c[p].c(),c[p].m(t,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=m.length}},i:yn,o:yn,d(d){d&&Bt(t),Gn(c,d),h=!1,u()}}}function BX(e,t,i){let{allSkills:r=new Set}=t,{currentSkills:a=new Set}=t,o=_l;const h=d=>{const A=!d.shown;A&&o.flat(1/0).forEach(p=>p.shown=!1),d.shown=A,i(2,o=[...o])},u=()=>i(0,a=r),m=d=>h(d),c=d=>i(0,a=new Set([d.id]));return e.$$set=d=>{"allSkills"in d&&i(1,r=d.allSkills),"currentSkills"in d&&i(0,a=d.currentSkills)},[a,r,o,h,u,m,c]}class RX extends Ai{constructor(t){super(),gi(this,t,BX,TX,pi,{allSkills:1,currentSkills:0})}}function fT(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function mT(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var pT=[0,2,4,-1,1,3,5],gT=pT.map(e=>Math.floor(e*7/12));function AT(e){const{step:t,alt:i,oct:r,dir:a=1}=e,o=pT[t]+7*i;if(r===void 0)return[a*o];const h=r-gT[t]-4*i;return[a*o,a*h]}var OX=[3,0,4,1,5,2,6];function DX(e){const[t,i,r]=e,a=OX[LX(t)],o=Math.floor((t+1)/7);if(i===void 0)return{step:a,alt:o,dir:r};const h=i+4*o+gT[a];return{step:a,alt:o,oct:h,dir:r}}function LX(e){const t=(e+1)%7;return t<0?7+t:t}var IC=(e,t)=>Array(Math.abs(t)+1).join(e),py=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),PX="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",NX="(AA|A|P|M|m|d|dd)([-+]?\\d+)",FX=new RegExp("^"+PX+"|"+NX+"$");function kX(e){const t=FX.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var TC={};function q1(e){return typeof e=="string"?TC[e]||(TC[e]=UX(e)):mT(e)?q1(VX(e)):fT(e)?q1(e.name):py}var BC=[0,2,4,5,7,9,11],vT="PMMPPMM";function UX(e){const t=kX(e);if(t[0]==="")return py;const i=+t[0],r=t[1],a=(Math.abs(i)-1)%7,o=vT[a];if(o==="M"&&r==="P")return py;const h=o==="M"?"majorable":"perfectable",u=""+i+r,m=i<0?-1:1,c=i===8||i===-8?i:m*(a+1),d=GX(h,r),A=Math.floor((Math.abs(i)-1)/7),p=m*(BC[a]+d+12*A),v=(m*(BC[a]+d)%12+12)%12,g=AT({step:a,alt:d,oct:A,dir:m});return{empty:!1,name:u,num:i,q:r,step:a,alt:d,dir:m,type:h,simple:c,semitones:p,chroma:v,coord:g,oct:A}}function GX(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function VX(e){const{step:t,alt:i,oct:r=0,dir:a}=e;if(!a)return"";const o=t+1+7*r,h=o===0?t+1:o,u=a<0?"-":"",m=vT[t]==="M"?"majorable":"perfectable";return u+h+QX(m,i)}function QX(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?IC("A",t):IC("d",e==="perfectable"?t:t+1)}var RC=(e,t)=>Array(Math.abs(t)+1).join(e),yT=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),OC=new Map,HX=e=>"CDEFGAB".charAt(e),zX=e=>e<0?RC("b",-e):RC("#",e),WX=e=>e[0]==="b"?-e.length:e.length;function gs(e){const t=JSON.stringify(e),i=OC.get(t);if(i)return i;const r=typeof e=="string"?YX(e):mT(e)?gs(qX(e)):fT(e)?gs(e.name):yT;return OC.set(t,r),r}var jX=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function $X(e){const t=jX.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function XX(e){return gs(DX(e))}var KX=(e,t)=>(e%t+t)%t,Y3=[0,2,4,5,7,9,11];function YX(e){const t=$X(e);if(t[0]===""||t[3]!=="")return yT;const i=t[0],r=t[1],a=t[2],o=(i.charCodeAt(0)+3)%7,h=WX(r),u=a.length?+a:void 0,m=AT({step:o,alt:h,oct:u}),c=i+r+a,d=i+r,A=(Y3[o]+h+120)%12,p=u===void 0?KX(Y3[o]+h,12)-12*99:Y3[o]+h+12*(u+1),v=p>=0&&p<=127?p:null,g=u===void 0?null:Math.pow(2,(p-69)/12)*440;return{empty:!1,acc:r,alt:h,chroma:A,coord:m,freq:g,height:p,letter:i,midi:v,name:c,oct:u,pc:d,step:o}}function qX(e){const{step:t,alt:i,oct:r}=e,a=HX(t);if(!a)return"";const o=a+zX(i);return r||r===0?o+r:o}function jh(e,t){const i=gs(e),r=Array.isArray(t)?t:q1(t).coord;if(i.empty||!r||r.length<2)return"";const a=i.coord,o=a.length===1?[a[0]+r[0]]:[a[0]+r[0],a[1]+r[1]];return XX(o).name}function bT(e,t){const i=e.length;return r=>{if(!t)return"";const a=r<0?(i- -r%i)%i:r%i,o=Math.floor(r/i),h=jh(t,[0,o]);return jh(h,e[a])}}function JX(e,t,i){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),i.apply(this,r)}}function ZX(e,t){const i=[];for(;t--;i[t]=t+e);return i}function eK(e,t){const i=[];for(;t--;i[t]=e-t);return i}function tK(e,t){return e<t?ZX(e,t-e+1):eK(e,e-t+1)}function N9(e,t){const i=t.length,r=(e%i+i)%i;return t.slice(r,i).concat(t.slice(0,r))}function nK(e){return e.filter(t=>t===0||t)}var su={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},MT=e=>Number(e).toString(2).padStart(12,"0"),DC=e=>parseInt(e,2),iK=/^[01]{12}$/;function Pb(e){return iK.test(e)}var rK=e=>typeof e=="number"&&e>=0&&e<=4095,sK=e=>e&&Pb(e.chroma),LC={[su.chroma]:su};function vc(e){const t=Pb(e)?e:rK(e)?MT(e):Array.isArray(e)?hK(e):sK(e)?e.chroma:su.chroma;return LC[t]=LC[t]||uK(t)}var aK=e=>vc(e).chroma,oK=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function lK(e){const t=[];for(let i=0;i<12;i++)e.charAt(i)==="1"&&t.push(oK[i]);return t}function _T(e,t=!0){const r=vc(e).chroma.split("");return nK(r.map((a,o)=>{const h=N9(o,r);return t&&h[0]==="0"?null:h.join("")}))}function Nb(e){const t=vc(e).setNum;return i=>{const r=vc(i).setNum;return t&&t!==r&&(r&t)===r}}function Fb(e){const t=vc(e).setNum;return i=>{const r=vc(i).setNum;return t&&t!==r&&(r|t)===r}}function cK(e){const t=e.split("");return t.map((i,r)=>N9(r,t).join(""))}function uK(e){const t=DC(e),i=cK(e).map(DC).filter(o=>o>=2048).sort()[0],r=MT(i),a=lK(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:a}}function hK(e){if(e.length===0)return su.chroma;let t;const i=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=gs(e[r]),t.empty&&(t=q1(e[r])),t.empty||(i[t.chroma]=1);return i.join("")}var dK=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],fK=dK;({...su});var kb=[],o1={};function CT(){return kb.slice()}function mK(e,t,i){const r=gK(e),a={...vc(e),name:i||"",quality:r,intervals:e,aliases:t};kb.push(a),a.name&&(o1[a.name]=a),o1[a.setNum]=a,o1[a.chroma]=a,a.aliases.forEach(o=>pK(a,o))}function pK(e,t){o1[t]=e}function gK(e){const t=i=>e.indexOf(i)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}fK.forEach(([e,t,i])=>mK(e.split(" "),i.split(" "),t));kb.sort((e,t)=>e.setNum-t.setNum);var AK=e=>{const t=e.reduce((i,r)=>{const a=gs(r).chroma;return a!==void 0&&(i[a]=i[a]||gs(r).name),i},{});return i=>t[i]};function vK(e,t={}){const i=e.map(a=>gs(a).pc).filter(a=>a);return gs.length===0?[]:wK(i,1,t).filter(a=>a.weight).sort((a,o)=>o.weight-a.weight).map(a=>a.name)}var Kg={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Yg=e=>t=>!!(t&e),yK=Yg(Kg.anyThirds),bK=Yg(Kg.perfectFifth),MK=Yg(Kg.anySeventh),_K=Yg(Kg.nonPerfectFifths);function CK(e){const t=parseInt(e.chroma,2);return yK(t)&&bK(t)&&MK(t)}function EK(e){const t=parseInt(e,2);return _K(t)?e:(t|16).toString(2)}function wK(e,t,i){const r=e[0],a=gs(r).chroma,o=AK(e),h=_T(e,!1),u=[];return h.forEach((m,c)=>{const d=i.assumePerfectFifth&&EK(m);CT().filter(p=>i.assumePerfectFifth&&CK(p)?p.chroma===d:p.chroma===m).forEach(p=>{const v=p.aliases[0],g=o(c);c!==a?u.push({weight:.5*t,name:`${g}${v}/${r}`}):u.push({weight:1*t,name:`${g}${v}`})})}),u}function ET(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function wT(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"}var xT=[0,2,4,-1,1,3,5],ST=xT.map(e=>Math.floor(e*7/12));function IT(e){const{step:t,alt:i,oct:r,dir:a=1}=e,o=xT[t]+7*i;if(r===void 0)return[a*o];const h=r-ST[t]-4*i;return[a*o,a*h]}var xK=[3,0,4,1,5,2,6];function TT(e){const[t,i,r]=e,a=xK[SK(t)],o=Math.floor((t+1)/7);if(i===void 0)return{step:a,alt:o,dir:r};const h=i+4*o+ST[a];return{step:a,alt:o,oct:h,dir:r}}function SK(e){const t=(e+1)%7;return t<0?7+t:t}var PC=(e,t)=>Array(Math.abs(t)+1).join(e),gy={empty:!0,name:"",acc:""},IK="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",TK="(AA|A|P|M|m|d|dd)([-+]?\\d+)",BK=new RegExp("^"+IK+"|"+TK+"$");function RK(e){const t=BK.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var NC={};function J1(e){return typeof e=="string"?NC[e]||(NC[e]=OK(e)):wT(e)?J1(PK(e)):ET(e)?J1(e.name):gy}var FC=[0,2,4,5,7,9,11],BT="PMMPPMM";function OK(e){const t=RK(e);if(t[0]==="")return gy;const i=+t[0],r=t[1],a=(Math.abs(i)-1)%7,o=BT[a];if(o==="M"&&r==="P")return gy;const h=o==="M"?"majorable":"perfectable",u=""+i+r,m=i<0?-1:1,c=i===8||i===-8?i:m*(a+1),d=LK(h,r),A=Math.floor((Math.abs(i)-1)/7),p=m*(FC[a]+d+12*A),v=(m*(FC[a]+d)%12+12)%12,g=IT({step:a,alt:d,oct:A,dir:m});return{empty:!1,name:u,num:i,q:r,step:a,alt:d,dir:m,type:h,simple:c,semitones:p,chroma:v,coord:g,oct:A}}function DK(e,t){const[i,r=0]=e,a=i*7+r*12<0,o=t||a?[-i,-r,-1]:[i,r,1];return J1(TT(o))}function LK(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function PK(e){const{step:t,alt:i,oct:r=0,dir:a}=e;if(!a)return"";const o=t+1+7*r,h=o===0?t+1:o,u=a<0?"-":"",m=BT[t]==="M"?"majorable":"perfectable";return u+h+NK(m,i)}function NK(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?PC("A",t):PC("d",e==="perfectable"?t:t+1)}var kC=(e,t)=>Array(Math.abs(t)+1).join(e),RT={empty:!0,name:"",pc:"",acc:""},UC=new Map,FK=e=>"CDEFGAB".charAt(e),kK=e=>e<0?kC("b",-e):kC("#",e),UK=e=>e[0]==="b"?-e.length:e.length;function au(e){const t=JSON.stringify(e),i=UC.get(t);if(i)return i;const r=typeof e=="string"?HK(e):wT(e)?au(zK(e)):ET(e)?au(e.name):RT;return UC.set(t,r),r}var GK=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function OT(e){const t=GK.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function VK(e){return au(TT(e))}var QK=(e,t)=>(e%t+t)%t,q3=[0,2,4,5,7,9,11];function HK(e){const t=OT(e);if(t[0]===""||t[3]!=="")return RT;const i=t[0],r=t[1],a=t[2],o=(i.charCodeAt(0)+3)%7,h=UK(r),u=a.length?+a:void 0,m=IT({step:o,alt:h,oct:u}),c=i+r+a,d=i+r,A=(q3[o]+h+120)%12,p=u===void 0?QK(q3[o]+h,12)-12*99:q3[o]+h+12*(u+1),v=p>=0&&p<=127?p:null,g=u===void 0?null:Math.pow(2,(p-69)/12)*440;return{empty:!1,acc:r,alt:h,chroma:A,coord:m,freq:g,height:p,letter:i,midi:v,name:c,oct:u,pc:d,step:o}}function zK(e){const{step:t,alt:i,oct:r}=e,a=FK(t);if(!a)return"";const o=a+kK(i);return r||r===0?o+r:o}function Z1(e,t){const i=au(e),r=Array.isArray(t)?t:J1(t).coord;if(i.empty||!r||r.length<2)return"";const a=i.coord,o=a.length===1?[a[0]+r[0]]:[a[0]+r[0],a[1]+r[1]];return VK(o).name}function DT(e,t){const i=e.length;return r=>{if(!t)return"";const a=r<0?(i- -r%i)%i:r%i,o=Math.floor(r/i),h=Z1(t,[0,o]);return Z1(h,e[a])}}function WK(e,t){const i=au(e),r=au(t);if(i.empty||r.empty)return"";const a=i.coord,o=r.coord,h=o[0]-a[0],u=a.length===2&&o.length===2?o[1]-a[1]:-Math.floor(h*7/12),m=r.height===i.height&&r.midi!==null&&i.midi!==null&&i.step>r.step;return DK([h,u],m).name}function jK(e,t,i){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),i.apply(this,r)}}var $K=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],XK=$K,KK={...su,name:"",quality:"Unknown",intervals:[],aliases:[]},Ub=[],Df={};function YK(e){return Df[e]||KK}function LT(){return Ub.slice()}function qK(e,t,i){const r=ZK(e),a={...vc(e),name:i||"",quality:r,intervals:e,aliases:t};Ub.push(a),a.name&&(Df[a.name]=a),Df[a.setNum]=a,Df[a.chroma]=a,a.aliases.forEach(o=>JK(a,o))}function JK(e,t){Df[t]=e}function ZK(e){const t=i=>e.indexOf(i)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}XK.forEach(([e,t,i])=>qK(e.split(" "),i.split(" "),t));Ub.sort((e,t)=>e.setNum-t.setNum);var eY=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],tY=eY,nY={...su,intervals:[],aliases:[]},Gb=[],Lf={};function iY(){return Gb.map(e=>e.name)}function PT(e){return Lf[e]||nY}function qg(){return Gb.slice()}function rY(e,t,i=[]){const r={...vc(e),name:t,intervals:e,aliases:i};return Gb.push(r),Lf[r.name]=r,Lf[r.setNum]=r,Lf[r.chroma]=r,r.aliases.forEach(a=>sY(r,a)),r}function sY(e,t){Lf[t]=e}tY.forEach(([e,t,...i])=>rY(e.split(" "),t,i));var Ay={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Vb(e){const[t,i,r,a]=OT(e);return t===""?["",e]:t==="A"&&a==="ug"?["","aug"]:[t+i,r+a]}function y0(e){if(e==="")return Ay;if(Array.isArray(e)&&e.length===2)return l1(e[1],e[0]);{const[t,i]=Vb(e),r=l1(i,t);return r.empty?l1(e):r}}function l1(e,t,i){const r=YK(e),a=au(t||""),o=au(i||"");if(r.empty||t&&a.empty||i&&o.empty)return Ay;const h=WK(a.pc,o.pc),u=r.intervals.indexOf(h)+1;if(!o.empty&&!u)return Ay;const m=Array.from(r.intervals);for(let p=1;p<u;p++){const v=m[0][0],g=m[0][1],y=parseInt(v,10)+7;m.push(`${y}${g}`),m.shift()}const c=a.empty?[]:m.map(p=>Z1(a,p));e=r.aliases.indexOf(e)!==-1?e:r.aliases[0];const d=`${a.empty?"":a.pc}${e}${o.empty||u<=1?"":"/"+o.pc}`,A=`${t?a.pc+" ":""}${r.name}${u>1&&i?" over "+o.pc:""}`;return{...r,name:A,symbol:d,type:r.name,root:o.name,intervals:m,rootDegree:u,tonic:a.name,notes:c}}var aY=jK("Chord.chord","Chord.get",y0);function oY(e,t){const[i,r]=Vb(e);return i?Z1(i,t)+r:e}function lY(e){const t=y0(e),i=Fb(t.chroma);return qg().filter(r=>i(r.chroma)).map(r=>r.name)}function cY(e){const t=y0(e),i=Fb(t.chroma);return LT().filter(r=>i(r.chroma)).map(r=>t.tonic+r.aliases[0])}function uY(e){const t=y0(e),i=Nb(t.chroma);return LT().filter(r=>i(r.chroma)).map(r=>t.tonic+r.aliases[0])}function hY(e){const{intervals:t,tonic:i}=y0(e),r=DT(t,i);return a=>a?r(a>0?a-1:a):""}function dY(e){const{intervals:t,tonic:i}=y0(e);return DT(t,i)}var eg={getChord:l1,get:y0,detect:vK,chordScales:lY,extended:cY,reduced:uY,tokenize:Vb,transpose:oY,degrees:hY,steps:dY,chord:aY};function NT(e){return+e>=0&&+e<=127}function fY(e){if(NT(e))return+e;const t=gs(e);return t.empty?null:t.midi}function mY(e,t=440){return Math.pow(2,(e-69)/12)*t}var pY=Math.log(2),gY=Math.log(440);function Qb(e){const t=12*(Math.log(e)-gY)/pY+69;return Math.round(t*100)/100}var AY="C C# D D# E F F# G G# A A# B".split(" "),vY="C Db D Eb E F Gb G Ab A Bb B".split(" ");function b0(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);const r=(t.sharps===!0?AY:vY)[e%12];if(t.pitchClass)return r;const a=Math.floor(e/12)-1;return r+a}function Hb(e){return e%12}function yY(e){return e.split("").reduce((t,i,r)=>(r<12&&i==="1"&&t.push(r),t),[])}function bY(e){return e.map(Hb).sort((t,i)=>t-i).filter((t,i,r)=>i===0||t!==r[i-1])}function zb(e){return Array.isArray(e)?bY(e):yY(e)}function MY(e){const t=zb(e);return i=>{const r=Hb(i);for(let a=0;a<12;a++){if(t.includes(r+a))return i+a;if(t.includes(r-a))return i-a}}}function FT(e,t){const i=zb(e),r=i.length;return a=>{const o=a<0?(r- -a%r)%r:a%r,h=Math.floor(a/r);return i[o]+h*12+t}}function _Y(e,t){const i=FT(e,t);return r=>{if(r!==0)return i(r>0?r-1:r)}}var f0={chroma:Hb,freqToMidi:Qb,isMidi:NT,midiToFreq:mY,midiToNoteName:b0,pcsetNearest:MY,pcset:zb,pcsetDegrees:_Y,pcsetSteps:FT,toMidi:fY},CY=["C","D","E","F","G","A","B"],kT=e=>e.name,UT=e=>e.map(gs).filter(t=>!t.empty);function EY(e){return e===void 0?CY.slice():Array.isArray(e)?UT(e).map(kT):[]}var nl=gs,wY=e=>nl(e).name,xY=e=>nl(e).pc,SY=e=>nl(e).acc,IY=e=>nl(e).oct,TY=e=>nl(e).midi,BY=e=>nl(e).freq,RY=e=>nl(e).chroma;function GT(e){return b0(e)}function OY(e){return b0(Qb(e))}function DY(e){return b0(Qb(e),{sharps:!0})}function LY(e){return b0(e,{sharps:!0})}var F9=jh,PY=jh,VT=e=>t=>F9(t,e),NY=VT,QT=e=>t=>F9(e,t),FY=QT;function HT(e,t){return F9(e,[t,0])}var kY=HT;function UY(e,t){return F9(e,[0,t])}var Wb=(e,t)=>e.height-t.height,GY=(e,t)=>t.height-e.height;function zT(e,t){return t=t||Wb,UT(e).sort(t).map(kT)}function WT(e){return zT(e,Wb).filter((t,i,r)=>i===0||t!==r[i-1])}var VY=e=>{const t=nl(e);return t.empty?"":b0(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function jT(e,t){const i=nl(e);if(i.empty)return"";const r=nl(t||b0(i.midi||i.chroma,{sharps:i.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==i.chroma)return"";if(i.oct===void 0)return r.pc;const a=i.chroma-i.alt,o=r.chroma-r.alt,h=a>11||o<0?-1:a<0||o>11?1:0,u=i.oct+h;return r.pc+u}var xs={names:EY,get:nl,name:wY,pitchClass:xY,accidentals:SY,octave:IY,midi:TY,ascending:Wb,descending:GY,sortedNames:zT,sortedUniqNames:WT,fromMidi:GT,fromMidiSharps:LY,freq:BY,fromFreq:OY,fromFreqSharps:DY,chroma:RY,transpose:F9,tr:PY,transposeBy:VT,trBy:NY,transposeFrom:QT,trFrom:FY,transposeFifths:HT,transposeOctaves:UY,trFifths:kY,simplify:VY,enharmonic:jT},jb=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],GC={...su,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},QY=jb.map(HY),vy={};QY.forEach(e=>{vy[e.name]=e,e.aliases.forEach(t=>{vy[t]=e})});function $T(e){return typeof e=="string"?vy[e.toLowerCase()]||GC:e&&e.name?$T(e.name):GC}function HY(e){const[t,i,r,a,o,h,u]=e,m=u?[u]:[],c=Number(i).toString(2);return{empty:!1,intervals:PT(a).intervals,modeNum:t,chroma:c,normalized:c,name:a,setNum:i,alt:r,triad:o,seventh:h,aliases:m}}function XT(e){return(t,i)=>{const r=$T(t);if(r.empty)return[];const a=N9(r.modeNum,e),o=r.intervals.map(h=>jh(i,h));return a.map((h,u)=>o[u]+h)}}XT(jb.map(e=>e[4]));XT(jb.map(e=>e[5]));var zY={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function KT(e){if(typeof e!="string")return["",""];const t=e.indexOf(" "),i=gs(e.substring(0,t));if(i.empty){const a=gs(e);return a.empty?["",e]:[a.name,""]}const r=e.substring(i.name.length+1).toLowerCase();return[i.name,r.length?r:""]}var WY=iY;function Tl(e){const t=Array.isArray(e)?e:KT(e),i=gs(t[0]).name,r=PT(t[1]);if(r.empty)return zY;const a=r.name,o=i?r.intervals.map(u=>jh(i,u)):[],h=i?i+" "+a:a;return{...r,name:h,type:a,tonic:i,notes:o}}var jY=JX("Scale.scale","Scale.get",Tl);function $Y(e,t={}){const i=aK(e),r=gs(t.tonic??e[0]??""),a=r.chroma;if(a===void 0)return[];const o=i.split("");o[a]="1";const h=N9(a,o).join(""),u=qg().find(c=>c.chroma===h),m=[];return u&&m.push(r.name+" "+u.name),t.match==="exact"||YT(h).forEach(c=>{m.push(r.name+" "+c)}),m}function XY(e){const t=Tl(e),i=Nb(t.chroma);return CT().filter(r=>i(r.chroma)).map(r=>r.aliases[0])}function YT(e){const t=Pb(e)?e:Tl(e).chroma,i=Fb(t);return qg().filter(r=>i(r.chroma)).map(r=>r.name)}function KY(e){const t=Nb(Tl(e).chroma);return qg().filter(i=>t(i.chroma)).map(i=>i.name)}function qT(e){const t=e.map(a=>gs(a).pc).filter(a=>a),i=t[0],r=WT(t);return N9(r.indexOf(i),r)}function YY(e){const t=Tl(e);if(t.empty)return[];const i=t.tonic?t.notes:t.intervals;return _T(t.chroma).map((r,a)=>{const o=Tl(r).name;return o?[i[a],o]:["",""]}).filter(r=>r[0])}function qY(e){const t=Array.isArray(e)?qT(e):Tl(e).notes,i=t.map(r=>gs(r).chroma);return r=>{const a=gs(typeof r=="number"?GT(r):r),o=a.height;if(o===void 0)return;const h=o%12,u=i.indexOf(h);if(u!==-1)return jT(a.name,t[u])}}function JY(e){const t=qY(e);return(i,r)=>{const a=gs(i).height,o=gs(r).height;return a===void 0||o===void 0?[]:tK(a,o).map(t).filter(h=>h)}}function ZY(e){const{intervals:t,tonic:i}=Tl(e),r=bT(t,i);return a=>a?r(a>0?a-1:a):""}function eq(e){const{intervals:t,tonic:i}=Tl(e);return bT(t,i)}var $s={degrees:ZY,detect:$Y,extended:YT,get:Tl,modeNames:YY,names:WY,rangeOf:JY,reduced:KY,scaleChords:XY,scaleNotes:qT,steps:eq,tokenize:KT,scale:jY};class Yo{constructor(t=!1){this.eventMap={},this.eventsSuspended=t==!0}addListener(t,i,r={}){if(typeof t=="string"&&t.length<1||t instanceof String&&t.length<1||typeof t!="string"&&!(t instanceof String)&&t!==Yo.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof i!="function")throw new TypeError("The callback must be a function.");const a=new VC(t,this,i,r);return this.eventMap[t]||(this.eventMap[t]=[]),r.prepend?this.eventMap[t].unshift(a):this.eventMap[t].push(a),a}addOneTimeListener(t,i,r={}){r.remaining=1,this.addListener(t,i,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(t,i){return t===void 0?this.eventMap[Yo.ANY_EVENT]&&this.eventMap[Yo.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[t]&&this.eventMap[t].length>0?i instanceof VC?this.eventMap[t].filter(a=>a===i).length>0:typeof i=="function"?this.eventMap[t].filter(a=>a.callback===i).length>0:i==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(t){return this.eventMap[t]||[]}suspendEvent(t){this.getListeners(t).forEach(i=>{i.suspended=!0})}unsuspendEvent(t){this.getListeners(t).forEach(i=>{i.suspended=!1})}getListenerCount(t){return this.getListeners(t).length}emit(t,...i){if(typeof t!="string"&&!(t instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],a=this.eventMap[Yo.ANY_EVENT]||[];return this.eventMap[t]&&(a=a.concat(this.eventMap[t])),a.forEach(o=>{if(o.suspended)return;let h=[...i];Array.isArray(o.arguments)&&(h=h.concat(o.arguments)),o.remaining>0&&(r.push(o.callback.apply(o.context,h)),o.count++),--o.remaining<1&&o.remove()}),r}removeListener(t,i,r={}){if(t===void 0){this.eventMap={};return}else if(!this.eventMap[t])return;let a=this.eventMap[t].filter(o=>i&&o.callback!==i||r.remaining&&r.remaining!==o.remaining||r.context&&r.context!==o.context);a.length?this.eventMap[t]=a:delete this.eventMap[t]}async waitFor(t,i={}){return i.duration=parseInt(i.duration),(isNaN(i.duration)||i.duration<=0)&&(i.duration=1/0),new Promise((r,a)=>{let o,h=this.addListener(t,()=>{clearTimeout(o),r()},{remaining:1});i.duration!==1/0&&(o=setTimeout(()=>{h.remove(),a("The duration expired before the event was emitted.")},i.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class VC{constructor(t,i,r,a={}){if(typeof t!="string"&&!(t instanceof String)&&t!==Yo.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!i)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");a.arguments!==void 0&&!Array.isArray(a.arguments)&&(a.arguments=[a.arguments]),a=Object.assign({context:i,remaining:1/0,arguments:void 0,duration:1/0},a),a.duration!==1/0&&setTimeout(()=>this.remove(),a.duration),this.arguments=a.arguments,this.callback=r,this.context=a.context,this.count=0,this.event=t,this.remaining=parseInt(a.remaining)>=1?parseInt(a.remaining):1/0,this.suspended=!1,this.target=i}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Jt{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),Jt.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),Jt.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),Jt.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),Jt.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */let ph=class{constructor(t,i={}){this.duration=Sn.defaults.note.duration,this.attack=Sn.defaults.note.attack,this.release=Sn.defaults.note.release,i.duration!=null&&(this.duration=i.duration),i.attack!=null&&(this.attack=i.attack),i.rawAttack!=null&&(this.attack=On.from7bitToFloat(i.rawAttack)),i.release!=null&&(this.release=i.release),i.rawRelease!=null&&(this.release=On.from7bitToFloat(i.rawRelease)),Number.isInteger(t)?this.identifier=On.toNoteIdentifier(t):this.identifier=t}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(t){const i=On.getNoteDetails(t);if(Sn.validation&&!t)throw new Error("Invalid note identifier");this._name=i.name,this._accidental=i.accidental,this._octave=i.octave}get name(){return this._name}set name(t){if(Sn.validation&&(t=t.toUpperCase(),!["C","D","E","F","G","A","B"].includes(t)))throw new Error("Invalid name value");this._name=t}get accidental(){return this._accidental}set accidental(t){if(Sn.validation&&(t=t.toLowerCase(),!["#","##","b","bb"].includes(t)))throw new Error("Invalid accidental value");this._accidental=t}get octave(){return this._octave}set octave(t){if(Sn.validation&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid octave value");this._octave=t}get duration(){return this._duration}set duration(t){if(Sn.validation&&(t=parseFloat(t),isNaN(t)||t===null||t<0))throw new RangeError("Invalid duration value.");this._duration=t}get attack(){return this._attack}set attack(t){if(Sn.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid attack value.");this._attack=t}get release(){return this._release}set release(t){if(Sn.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid release value.");this._release=t}get rawAttack(){return On.fromFloatTo7Bit(this._attack)}set rawAttack(t){this._attack=On.from7bitToFloat(t)}get rawRelease(){return On.fromFloatTo7Bit(this._release)}set rawRelease(t){this._release=On.from7bitToFloat(t)}get number(){return On.toNoteNumber(this.identifier)}getOffsetNumber(t=0,i=0){return Sn.validation&&(t=parseInt(t)||0,i=parseInt(i)||0),Math.min(Math.max(this.number+t*12+i,0),127)}};/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class On{static toNoteNumber(t,i=0){if(i=i==null?0:parseInt(i),isNaN(i))throw new RangeError("Invalid 'octaveOffset' value");typeof t!="string"&&(t="");const r=this.getNoteDetails(t);if(!r)throw new TypeError("Invalid note identifier");const a={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let o=(r.octave+1+i)*12;if(o+=a[r.name],r.accidental&&(r.accidental.startsWith("b")?o-=r.accidental.length:o+=r.accidental.length),o<0||o>127)throw new RangeError("Invalid octaveOffset value");return o}static getNoteDetails(t){Number.isInteger(t)&&(t=this.toNoteIdentifier(t));const i=t.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!i)throw new TypeError("Invalid note identifier");const r=i[1].toUpperCase(),a=parseInt(i[3]);let o=i[2].toLowerCase();return o=o===""?void 0:o,{accidental:o,identifier:r+(o||"")+a,name:r,octave:a}}static sanitizeChannels(t){let i;if(Sn.validation){if(t==="all")i=["all"];else if(t==="none")return[]}return Array.isArray(t)?i=t:i=[t],i.indexOf("all")>-1&&(i=Jt.MIDI_CHANNEL_NUMBERS),i.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(t){let i=!1;const r=parseFloat(t);return isNaN(r)?!1:(typeof t=="string"&&t.substring(0,1)==="+"?r>=0&&(i=Sn.time+r):r>=0&&(i=r),i)}static guessNoteNumber(t,i){i=parseInt(i)||0;let r=!1;if(Number.isInteger(t)&&t>=0&&t<=127)r=parseInt(t);else if(parseInt(t)>=0&&parseInt(t)<=127)r=parseInt(t);else if(typeof t=="string"||t instanceof String)try{r=this.toNoteNumber(t.trim(),i)}catch{return!1}return r}static toNoteIdentifier(t,i){if(t=parseInt(t),isNaN(t)||t<0||t>127)throw new RangeError("Invalid note number");if(i=i==null?0:parseInt(i),isNaN(i))throw new RangeError("Invalid octaveOffset value");const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a=Math.floor(t/12-1)+i;return r[t%12]+a.toString()}static buildNote(t,i={}){if(i.octaveOffset=parseInt(i.octaveOffset)||0,t instanceof ph)return t;let r=this.guessNoteNumber(t,i.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${t})`);return i.octaveOffset=void 0,new ph(r,i)}static buildNoteArray(t,i={}){let r=[];return Array.isArray(t)||(t=[t]),t.forEach(a=>{r.push(this.buildNote(a,i))}),r}static from7bitToFloat(t){return t===1/0&&(t=127),t=parseInt(t)||0,Math.min(Math.max(t/127,0),1)}static fromFloatTo7Bit(t){return t===1/0&&(t=1),t=parseFloat(t)||0,Math.min(Math.max(Math.round(t*127),0),127)}static fromMsbLsbToFloat(t,i=0){Sn.validation&&(t=Math.min(Math.max(parseInt(t)||0,0),127),i=Math.min(Math.max(parseInt(i)||0,0),127));const r=((t<<7)+i)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(t){Sn.validation&&(t=Math.min(Math.max(parseFloat(t)||0,0),1));const i=Math.round(t*16383);return{msb:i>>7,lsb:i&127}}static offsetNumber(t,i=0,r=0){if(Sn.validation){if(t=parseInt(t),isNaN(t))throw new Error("Invalid note number");i=parseInt(i)||0,r=parseInt(r)||0}return Math.min(Math.max(t+i*12+r,0),127)}static getPropertyByValue(t,i){return Object.keys(t).find(r=>t[r]===i)}static getCcNameByNumber(t){if(!(Sn.validation&&(t=parseInt(t),!(t>=0&&t<=127))))return Jt.CONTROL_CHANGE_MESSAGES[t].name}static getCcNumberByName(t){let i=Jt.CONTROL_CHANGE_MESSAGES.find(r=>r.name===t);return i?i.number:Jt.MIDI_CONTROL_CHANGE_MESSAGES[t]}static getChannelModeByNumber(t){if(!(t>=120&&t<=127))return!1;for(let i in Jt.CHANNEL_MODE_MESSAGES)if(Jt.CHANNEL_MODE_MESSAGES.hasOwnProperty(i)&&t===Jt.CHANNEL_MODE_MESSAGES[i])return i;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class tq extends Yo{constructor(t,i){super(),this._output=t,this._number=i,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(t,i={time:0}){return this.output.send(t,i),this}sendKeyAftertouch(t,i,r={}){if(Sn.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(i)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(i>=0&&i<=127&&Number.isInteger(i)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(i>=0&&i<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(i=On.fromFloatTo7Bit(i));const a=Sn.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(t)||(t=[t]),On.buildNoteArray(t).forEach(o=>{this.send([(Jt.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),o.getOffsetNumber(a),i],{time:On.toTimestamp(r.time)})}),this}sendControlChange(t,i,r={}){if(typeof t=="string"&&(t=On.getCcNumberByName(t)),Array.isArray(i)||(i=[i]),Sn.validation){if(t===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(i=i.map(a=>{const o=Math.min(Math.max(parseInt(a),0),127);if(isNaN(o))throw new TypeError("Values must be integers between 0 and 127");return o}),i.length===2&&t>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return i.forEach((a,o)=>{this.send([(Jt.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t+o*32,i[o]],{time:On.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(t,i={}){return this.sendControlChange(99,t[0],i),this.sendControlChange(98,t[1],i),this}_deselectRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_deselectNonRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_selectRegisteredParameter(t,i={}){return this.sendControlChange(101,t[0],i),this.sendControlChange(100,t[1],i),this}_setCurrentParameter(t,i={}){return t=[].concat(t),this.sendControlChange(6,t[0],i),t.length<2?this:(this.sendControlChange(38,t[1],i),this)}sendRpnDecrement(t,i={}){if(Array.isArray(t)||(t=Jt.REGISTERED_PARAMETERS[t]),Sn.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(Jt.REGISTERED_PARAMETERS).forEach(a=>{Jt.REGISTERED_PARAMETERS[a][0]===t[0]&&Jt.REGISTERED_PARAMETERS[a][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,i),this.sendControlChange(97,0,i),this._deselectRegisteredParameter(i),this}sendRpnIncrement(t,i={}){if(Array.isArray(t)||(t=Jt.REGISTERED_PARAMETERS[t]),Sn.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(Jt.REGISTERED_PARAMETERS).forEach(a=>{Jt.REGISTERED_PARAMETERS[a][0]===t[0]&&Jt.REGISTERED_PARAMETERS[a][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,i),this.sendControlChange(96,0,i),this._deselectRegisteredParameter(i),this}playNote(t,i={}){this.sendNoteOn(t,i);const r=Array.isArray(t)?t:[t];for(let a of r)if(parseInt(a.duration)>0){const o={time:(On.toTimestamp(i.time)||Sn.time)+parseInt(a.duration),release:a.release,rawRelease:a.rawRelease};this.sendNoteOff(a,o)}else if(parseInt(i.duration)>0){const o={time:(On.toTimestamp(i.time)||Sn.time)+parseInt(i.duration),release:i.release,rawRelease:i.rawRelease};this.sendNoteOff(a,o)}return this}sendNoteOff(t,i={}){if(Sn.validation){if(i.rawRelease!=null&&!(i.rawRelease>=0&&i.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(i.release!=null&&!(i.release>=0&&i.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");i.rawVelocity&&(i.rawRelease=i.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),i.velocity&&(i.release=i.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;i.rawRelease!=null?r=i.rawRelease:isNaN(i.release)||(r=Math.round(i.release*127));const a=Sn.octaveOffset+this.output.octaveOffset+this.octaveOffset;return On.buildNoteArray(t,{rawRelease:parseInt(r)}).forEach(o=>{this.send([(Jt.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),o.getOffsetNumber(a),o.rawRelease],{time:On.toTimestamp(i.time)})}),this}stopNote(t,i={}){return this.sendNoteOff(t,i)}sendNoteOn(t,i={}){if(Sn.validation){if(i.rawAttack!=null&&!(i.rawAttack>=0&&i.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(i.attack!=null&&!(i.attack>=0&&i.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");i.rawVelocity&&(i.rawAttack=i.velocity,i.rawRelease=i.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),i.velocity&&(i.attack=i.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;i.rawAttack!=null?r=i.rawAttack:isNaN(i.attack)||(r=Math.round(i.attack*127));const a=Sn.octaveOffset+this.output.octaveOffset+this.octaveOffset;return On.buildNoteArray(t,{rawAttack:r}).forEach(o=>{this.send([(Jt.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),o.getOffsetNumber(a),o.rawAttack],{time:On.toTimestamp(i.time)})}),this}sendChannelMode(t,i=0,r={}){if(typeof t=="string"&&(t=Jt.CHANNEL_MODE_MESSAGES[t]),Sn.validation){if(t===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(t)||!(t>=120&&t<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(i))||i<0||i>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(Jt.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t,i],{time:On.toTimestamp(r.time)}),this}sendOmniMode(t,i={}){return t===void 0||t?this.sendChannelMode("omnimodeon",0,i):this.sendChannelMode("omnimodeoff",0,i),this}sendChannelAftertouch(t,i={}){if(Sn.validation){if(isNaN(parseFloat(t)))throw new RangeError("Invalid channel aftertouch value.");if(i.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return i.rawValue||(t=On.fromFloatTo7Bit(t)),this.send([(Jt.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(t)],{time:On.toTimestamp(i.time)}),this}sendMasterTuning(t,i={}){if(t=parseFloat(t)||0,Sn.validation&&!(t>-65&&t<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(t)+64,a=t-Math.floor(t);a=Math.round((a+1)/2*16383);let o=a>>7&127,h=a&127;return this.sendRpnValue("channelcoarsetuning",r,i),this.sendRpnValue("channelfinetuning",[o,h],i),this}sendModulationRange(t,i,r={}){if(Sn.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(i!=null&&(!Number.isInteger(i)||!(i>=0&&i<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return i>=0&&i<=127||(i=0),this.sendRpnValue("modulationrange",[t,i],r),this}sendNrpnValue(t,i,r={}){if(i=[].concat(i),Sn.validation){if(!Array.isArray(t)||!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");i.forEach(a=>{if(!(a>=0&&a<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(t,r),this._setCurrentParameter(i,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(t,i={}){if(Sn.validation)if(i.rawValue&&Array.isArray(t)){if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(i.rawValue&&!Array.isArray(t)){if(!(t>=0&&t<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(t)||t===null)throw new RangeError("Invalid pitch bend value.");if(!(t>=-1&&t<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let r=0,a=0;if(i.rawValue&&Array.isArray(t))r=t[0],a=t[1];else if(i.rawValue&&!Array.isArray(t))r=t;else{const o=On.fromFloatToMsbLsb((t+1)/2);r=o.msb,a=o.lsb}return this.send([(Jt.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),a,r],{time:On.toTimestamp(i.time)}),this}sendPitchBendRange(t,i,r={}){if(Sn.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(i)||!(i>=0&&i<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[t,i],r),this}sendProgramChange(t,i={}){if(t=parseInt(t)||0,Sn.validation&&!(t>=0&&t<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(Jt.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),t],{time:On.toTimestamp(i.time)}),this}sendRpnValue(t,i,r={}){if(Array.isArray(t)||(t=Jt.REGISTERED_PARAMETERS[t]),Sn.validation){if(!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(i).forEach(a=>{if(!(a>=0&&a<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(t,r),this._setCurrentParameter(i,r),this._deselectRegisteredParameter(r),this}sendTuningBank(t,i={}){if(Sn.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",t,i),this}sendTuningProgram(t,i={}){if(Sn.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",t,i),this}sendLocalControl(t,i={}){return t?this.sendChannelMode("localcontrol",127,i):this.sendChannelMode("localcontrol",0,i)}sendAllNotesOff(t={}){return this.sendChannelMode("allnotesoff",0,t)}sendAllSoundOff(t={}){return this.sendChannelMode("allsoundoff",0,t)}sendResetAllControllers(t={}){return this.sendChannelMode("resetallcontrollers",0,t)}sendPolyphonicMode(t,i={}){return t==="mono"?this.sendChannelMode("monomodeon",0,i):this.sendChannelMode("polymodeon",0,i)}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class yy extends Yo{constructor(t){super(),this._midiOutput=t,this._octaveOffset=0,this.channels=[];for(let i=1;i<=16;i++)this.channels[i]=new tq(this,i);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(t){let i={timestamp:Sn.time};t.port.connection==="open"?(i.type="opened",i.target=this,i.port=i.target,this.emit("opened",i)):t.port.connection==="closed"&&t.port.state==="connected"?(i.type="closed",i.target=this,i.port=i.target,this.emit("closed",i)):t.port.connection==="closed"&&t.port.state==="disconnected"?(i.type="disconnected",i.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",i)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught:",t.port.connection,t.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(t){return Promise.reject(t)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(t,i={time:0},r=0){if(t instanceof JT&&(t=On.isNode?t.data:t.rawData),t instanceof Uint8Array&&On.isNode&&(t=Array.from(t)),Sn.validation){if(!Array.isArray(t)&&!(t instanceof Uint8Array)&&(t=[t],Array.isArray(i)&&(t=t.concat(i)),i=isNaN(r)?{time:0}:{time:r}),!(parseInt(t[0])>=128&&parseInt(t[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");t.slice(1).forEach(a=>{if(a=parseInt(a),!(a>=0&&a<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),i||(i={time:0})}return this._midiOutput.send(t,On.toTimestamp(i.time)),this}sendSysex(t,i=[],r={}){if(t=[].concat(t),i instanceof Uint8Array){const a=new Uint8Array(1+t.length+i.length+1);a[0]=Jt.SYSTEM_MESSAGES.sysex,a.set(Uint8Array.from(t),1),a.set(i,1+t.length),a[a.length-1]=Jt.SYSTEM_MESSAGES.sysexend,this.send(a,{time:r.time})}else{const a=t.concat(i,Jt.SYSTEM_MESSAGES.sysexend);this.send([Jt.SYSTEM_MESSAGES.sysex].concat(a),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():Sn.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(t,i={}){if(Sn.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([Jt.SYSTEM_MESSAGES.timecode,t],{time:i.time}),this}sendSongPosition(t=0,i={}){t=Math.floor(t)||0;var r=t>>7&127,a=t&127;return this.send([Jt.SYSTEM_MESSAGES.songposition,r,a],{time:i.time}),this}sendSongSelect(t=0,i={}){if(Sn.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([Jt.SYSTEM_MESSAGES.songselect,t],{time:i.time}),this}sendTuneRequest(t={}){return this.send([Jt.SYSTEM_MESSAGES.tunerequest],{time:t.time}),this}sendClock(t={}){return this.send([Jt.SYSTEM_MESSAGES.clock],{time:t.time}),this}sendStart(t={}){return this.send([Jt.SYSTEM_MESSAGES.start],{time:t.time}),this}sendContinue(t={}){return this.send([Jt.SYSTEM_MESSAGES.continue],{time:t.time}),this}sendStop(t={}){return this.send([Jt.SYSTEM_MESSAGES.stop],{time:t.time}),this}sendActiveSensing(t={}){return this.send([Jt.SYSTEM_MESSAGES.activesensing],{time:t.time}),this}sendReset(t={}){return this.send([Jt.SYSTEM_MESSAGES.reset],{time:t.time}),this}sendTuningRequest(t={}){return Sn.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(t)}sendKeyAftertouch(t,i,r={}){return r.channels==null&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendKeyAftertouch(t,i,r)}),this}sendControlChange(t,i,r={},a={}){if(Sn.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=a,r.channels=o,r.channels==="all"&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendControlChange(t,i,r)}),this}sendPitchBendRange(t=0,i=0,r={}){return r.channels==null&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendPitchBendRange(t,i,r)}),this}setPitchBendRange(t=0,i=0,r="all",a={}){return Sn.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),a.channels=r,a.channels==="all"&&(a.channels=Jt.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(t,i,a)}sendRpnValue(t,i,r={}){return r.channels==null&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendRpnValue(t,i,r)}),this}setRegisteredParameter(t,i=[],r="all",a={}){return Sn.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),a.channels=r,a.channels==="all"&&(a.channels=Jt.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(t,i,a)}sendChannelAftertouch(t,i={},r={}){if(Sn.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const a=i;i=r,i.channels=a,i.channels==="all"&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(a=>{this.channels[a].sendChannelAftertouch(t,i)}),this}sendPitchBend(t,i={},r={}){if(Sn.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const a=i;i=r,i.channels=a,i.channels==="all"&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(a=>{this.channels[a].sendPitchBend(t,i)}),this}sendProgramChange(t=0,i={},r={}){if(Sn.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const a=i;i=r,i.channels=a,i.channels==="all"&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(a=>{this.channels[a].sendProgramChange(t,i)}),this}sendModulationRange(t,i,r={}){return r.channels==null&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendModulationRange(t,i,r)}),this}setModulationRange(t=0,i=0,r="all",a={}){return Sn.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),a.channels=r,a.channels==="all"&&(a.channels=Jt.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(t,i,a)}sendMasterTuning(t,i={}){return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(r=>{this.channels[r].sendMasterTuning(t,i)}),this}setMasterTuning(t,i={},r={}){return Sn.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=i,r.channels==="all"&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(t,r)}sendTuningProgram(t,i={}){return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(r=>{this.channels[r].sendTuningProgram(t,i)}),this}setTuningProgram(t,i="all",r={}){return Sn.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=i,r.channels==="all"&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(t,r)}sendTuningBank(t=0,i={}){return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(r=>{this.channels[r].sendTuningBank(t,i)}),this}setTuningBank(t,i="all",r={}){return Sn.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=i,r.channels==="all"&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(t,r)}sendChannelMode(t,i=0,r={},a={}){if(Sn.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=a,r.channels=o,r.channels==="all"&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendChannelMode(t,i,r)}),this}sendAllSoundOff(t={}){return t.channels==null&&(t.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendAllSoundOff(t)}),this}sendAllNotesOff(t={}){return t.channels==null&&(t.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(t.channels).forEach(i=>{this.channels[i].sendAllNotesOff(t)}),this}sendResetAllControllers(t={},i={}){if(Sn.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=i,t.channels=r,t.channels==="all"&&(t.channels=Jt.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendResetAllControllers(t)}),this}sendPolyphonicMode(t,i={},r={}){if(Sn.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const a=i;i=r,i.channels=a,i.channels==="all"&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(a=>{this.channels[a].sendPolyphonicMode(t,i)}),this}sendLocalControl(t,i={},r={}){if(Sn.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const a=i;i=r,i.channels=a,i.channels==="all"&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(a=>{this.channels[a].sendLocalControl(t,i)}),this}sendOmniMode(t,i={},r={}){if(Sn.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const a=i;i=r,i.channels=a,i.channels==="all"&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(a=>{this.channels[a].sendOmniMode(t,i)}),this}sendNrpnValue(t,i,r={}){return r.channels==null&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendNrpnValue(t,i,r)}),this}setNonRegisteredParameter(t,i=[],r="all",a={}){return Sn.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),a.channels=r,a.channels==="all"&&(a.channels=Jt.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(t,i,a)}sendRpnIncrement(t,i={}){return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(r=>{this.channels[r].sendRpnIncrement(t,i)}),this}incrementRegisteredParameter(t,i="all",r={}){return Sn.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=i,r.channels==="all"&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(t,r)}sendRpnDecrement(t,i={}){return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(r=>{this.channels[r].sendRpnDecrement(t,i)}),this}decrementRegisteredParameter(t,i="all",r={}){return Sn.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=i,r.channels==="all"&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(t,r)}sendNoteOff(t,i={},r={}){if(Sn.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const a=i;i=r,i.channels=a,i.channels==="all"&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(a=>{this.channels[a].sendNoteOff(t,i)}),this}stopNote(t,i){return this.sendNoteOff(t,i)}playNote(t,i={},r={}){if(Sn.validation&&(i.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),i.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(i)||Number.isInteger(i)||i==="all")){const a=i;i=r,i.channels=a,i.channels==="all"&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(a=>{this.channels[a].playNote(t,i)}),this}sendNoteOn(t,i={},r={}){if(Sn.validation&&(Array.isArray(i)||Number.isInteger(i)||i==="all")){const a=i;i=r,i.channels=a,i.channels==="all"&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS)}return i.channels==null&&(i.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(i.channels).forEach(a=>{this.channels[a].sendNoteOn(t,i)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class QC{constructor(t=[],i={}){this.destinations=[],this.types=[...Object.keys(Jt.SYSTEM_MESSAGES),...Object.keys(Jt.CHANNEL_MESSAGES)],this.channels=Jt.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(t)||(t=[t]),i.types&&!Array.isArray(i.types)&&(i.types=[i.types]),i.channels&&!Array.isArray(i.channels)&&(i.channels=[i.channels]),Sn.validation&&(t.forEach(r=>{if(!(r instanceof yy))throw new TypeError("Destinations must be of type 'Output'.")}),i.types!==void 0&&i.types.forEach(r=>{if(!Jt.SYSTEM_MESSAGES.hasOwnProperty(r)&&!Jt.CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),i.channels!==void 0&&i.channels.forEach(r=>{if(!Jt.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=t,i.types&&(this.types=i.types),i.channels&&(this.channels=i.channels)}forward(t){this.suspended||this.types.includes(t.type)&&(t.channel&&!this.channels.includes(t.channel)||this.destinations.forEach(i=>{Sn.validation&&!(i instanceof yy)||i.send(t)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class nq extends Yo{constructor(t,i){super(),this._input=t,this._number=i,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(t){const i=Object.assign({},t);i.port=this.input,i.target=this,i.type="midimessage",this.emit(i.type,i),this._parseEventForStandardMessages(i)}_parseEventForStandardMessages(t){const i=Object.assign({},t);i.type=i.message.type||"unknownmessage";const r=t.message.dataBytes[0],a=t.message.dataBytes[1];if(i.type==="noteoff"||i.type==="noteon"&&a===0)this.notesState[r]=!1,i.type="noteoff",i.note=new ph(On.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+Sn.octaveOffset),{rawAttack:0,rawRelease:a}),i.value=On.from7bitToFloat(a),i.rawValue=a,i.velocity=i.note.release,i.rawVelocity=i.note.rawRelease;else if(i.type==="noteon")this.notesState[r]=!0,i.note=new ph(On.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+Sn.octaveOffset),{rawAttack:a}),i.value=On.from7bitToFloat(a),i.rawValue=a,i.velocity=i.note.attack,i.rawVelocity=i.note.rawAttack;else if(i.type==="keyaftertouch")i.note=new ph(On.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+Sn.octaveOffset)),i.value=On.from7bitToFloat(a),i.rawValue=a,i.identifier=i.note.identifier,i.key=i.note.number,i.rawKey=r;else if(i.type==="controlchange"){i.controller={number:r,name:Jt.CONTROL_CHANGE_MESSAGES[r].name,description:Jt.CONTROL_CHANGE_MESSAGES[r].description,position:Jt.CONTROL_CHANGE_MESSAGES[r].position},i.subtype=i.controller.name||"controller"+r,i.value=On.from7bitToFloat(a),i.rawValue=a;const o=Object.assign({},i);o.type=`${i.type}-controller${r}`,delete o.subtype,this.emit(o.type,o);const h=Object.assign({},i);h.type=`${i.type}-`+Jt.CONTROL_CHANGE_MESSAGES[r].name,delete h.subtype,h.type.indexOf("controller")!==0&&this.emit(h.type,h),i.message.dataBytes[0]>=120&&this._parseChannelModeMessage(i),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(i.message.dataBytes[0])&&this._parseEventForParameterNumber(i)}else i.type==="programchange"?(i.value=r,i.rawValue=i.value):i.type==="channelaftertouch"?(i.value=On.from7bitToFloat(r),i.rawValue=r):i.type==="pitchbend"?(i.value=((a<<7)+r-8192)/8192,i.rawValue=(a<<7)+r):i.type="unknownmessage";this.emit(i.type,i)}_parseChannelModeMessage(t){const i=Object.assign({},t);i.type=i.controller.name,i.type==="localcontrol"&&(i.value=i.message.data[2]===127,i.rawValue=i.message.data[2]),i.type==="omnimodeon"?(i.type="omnimode",i.value=!0,i.rawValue=i.message.data[2]):i.type==="omnimodeoff"&&(i.type="omnimode",i.value=!1,i.rawValue=i.message.data[2]),i.type==="monomodeon"?(i.type="monomode",i.value=!0,i.rawValue=i.message.data[2]):i.type==="polymodeon"&&(i.type="monomode",i.value=!1,i.rawValue=i.message.data[2]),this.emit(i.type,i)}_parseEventForParameterNumber(t){const i=t.message.dataBytes[0],r=t.message.dataBytes[1];i===99||i===101?(this._nrpnBuffer=[],this._rpnBuffer=[],i===99?this._nrpnBuffer=[t.message]:r!==127&&(this._rpnBuffer=[t.message])):i===98||i===100?i===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(t.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(t.message):this._rpnBuffer=[]):(i===6||i===38||i===96||i===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],t):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],t):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(t){return t===6||t===38||t===96||t===97||t===98||t===99||t===100||t===101}_dispatchParameterNumberEvent(t,i,r,a){t=t==="nrpn"?"nrpn":"rpn";const o={target:a.target,timestamp:a.timestamp,message:a.message,parameterMsb:i,parameterLsb:r,value:On.from7bitToFloat(a.message.dataBytes[1]),rawValue:a.message.dataBytes[1]};t==="rpn"?o.parameter=Object.keys(Jt.REGISTERED_PARAMETERS).find(m=>Jt.REGISTERED_PARAMETERS[m][0]===i&&Jt.REGISTERED_PARAMETERS[m][1]===r):o.parameter=(i<<7)+r;const h=Jt.CONTROL_CHANGE_MESSAGES[a.message.dataBytes[0]].name;o.type=`${t}-${h}`,this.emit(o.type,o);const u=Object.assign({},o);u.type==="nrpn-dataincrement"?u.type="nrpn-databuttonincrement":u.type==="nrpn-datadecrement"?u.type="nrpn-databuttondecrement":u.type==="rpn-dataincrement"?u.type="rpn-databuttonincrement":u.type==="rpn-datadecrement"&&(u.type="rpn-databuttondecrement"),this.emit(u.type,u),o.type=t,o.subtype=h,this.emit(o.type,o)}getChannelModeByNumber(t){return Sn.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),t=Math.floor(t)),On.getChannelModeByNumber(t)}getCcNameByNumber(t){if(Sn.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),t=parseInt(t),!(t>=0&&t<=127)))throw new RangeError("Invalid control change number.");return On.getCcNameByNumber(t)}getNoteState(t){t instanceof ph&&(t=t.identifier);const i=On.guessNoteNumber(t,Sn.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[i]}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(t){this.validation&&(t=!!t),this.parameterNumberEventsEnabled=t}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class JT{constructor(t){this.rawData=t,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=On.getPropertyByValue(Jt.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=On.getPropertyByValue(Jt.SYSTEM_MESSAGES,this.command)),this.statusByte===Jt.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class iq extends Yo{constructor(t){super(),this._midiInput=t,this._octaveOffset=0,this.channels=[];for(let i=1;i<=16;i++)this.channels[i]=new nq(this,i);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(t){let i={timestamp:Sn.time,target:this,port:this};t.port.connection==="open"?(i.type="opened",this.emit("opened",i)):t.port.connection==="closed"&&t.port.state==="connected"?(i.type="closed",this.emit("closed",i)):t.port.connection==="closed"&&t.port.state==="disconnected"?(i.type="disconnected",i.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",i)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught: ",t.port.connection,t.port.state)}_onMidiMessage(t){const i=new JT(t.data),r={port:this,target:this,message:i,timestamp:t.timeStamp,type:"midimessage",data:i.data,rawData:i.data,statusByte:i.data[0],dataBytes:i.dataBytes};this.emit("midimessage",r),i.isSystemMessage?this._parseEvent(r):i.isChannelMessage&&this.channels[i.channel]._processMidiMessageEvent(r),this._forwarders.forEach(a=>a.forward(i))}_parseEvent(t){const i=Object.assign({},t);i.type=i.message.type||"unknownmidimessage",i.type==="songselect"&&(i.song=t.data[1]+1,i.value=t.data[1],i.rawValue=i.value),this.emit(i.type,i)}async open(){try{await this._midiInput.open()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}getChannelModeByNumber(){Sn.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(t,i,r={}){if(Sn.validation&&typeof r=="function"){let a=i!=null?[].concat(i):void 0;i=r,r={channels:a}}if(Jt.CHANNEL_EVENTS.includes(t)){r.channels===void 0&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS);let a=[];return On.sanitizeChannels(r.channels).forEach(o=>{a.push(this.channels[o].addListener(t,i,r))}),a}else return super.addListener(t,i,r)}addOneTimeListener(t,i,r={}){return r.remaining=1,this.addListener(t,i,r)}on(t,i,r,a){return this.addListener(t,i,r,a)}hasListener(t,i,r={}){if(Sn.validation&&typeof r=="function"){let a=[].concat(i);i=r,r={channels:a}}return Jt.CHANNEL_EVENTS.includes(t)?(r.channels===void 0&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS),On.sanitizeChannels(r.channels).every(a=>this.channels[a].hasListener(t,i))):super.hasListener(t,i)}removeListener(t,i,r={}){if(Sn.validation&&typeof r=="function"){let a=[].concat(i);i=r,r={channels:a}}if(r.channels===void 0&&(r.channels=Jt.MIDI_CHANNEL_NUMBERS),t==null)return On.sanitizeChannels(r.channels).forEach(a=>{this.channels[a]&&this.channels[a].removeListener()}),super.removeListener();Jt.CHANNEL_EVENTS.includes(t)?On.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].removeListener(t,i,r)}):super.removeListener(t,i,r)}addForwarder(t,i={}){let r;return t instanceof QC?r=t:r=new QC(t,i),this._forwarders.push(r),r}removeForwarder(t){this._forwarders=this._forwarders.filter(i=>i!==t)}hasForwarder(t){return this._forwarders.includes(t)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return Sn.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class rq extends Yo{constructor(){super(),this.defaults={note:{attack:On.from7bitToFloat(64),release:On.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(t={},i=!1){if(On.isNode){try{window.navigator}catch{let u=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,u)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=t.validation!==!1,this.validation&&(typeof t=="function"&&(t={callback:t,sysex:i}),i&&(t.sysex=!0)),this.enabled)return typeof t.callback=="function"&&t.callback(),Promise.resolve();const r={timestamp:this.time,target:this,type:"error",error:void 0},a={timestamp:this.time,target:this,type:"midiaccessgranted"},o={timestamp:this.time,target:this,type:"enabled"};try{typeof t.requestMIDIAccessFunction=="function"?this.interface=await t.requestMIDIAccessFunction({sysex:t.sysex,software:t.software}):this.interface=await navigator.requestMIDIAccess({sysex:t.sysex,software:t.software})}catch(h){return r.error=h,this.emit("error",r),typeof t.callback=="function"&&t.callback(h),Promise.reject(h)}this.emit("midiaccessgranted",a),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(h){return r.error=h,this.emit("error",r),typeof t.callback=="function"&&t.callback(h),Promise.reject(h)}return this.emit("enabled",o),typeof t.callback=="function"&&t.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let t={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",t),this.removeListener()})}getInputById(t,i={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(i.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(this._disconnectedInputs[r].id===t.toString())return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(this.inputs[r].id===t.toString())return this.inputs[r]}getInputByName(t,i={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(i.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(~this._disconnectedInputs[r].name.indexOf(t))return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(~this.inputs[r].name.indexOf(t))return this.inputs[r]}getOutputByName(t,i={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(i.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(~this._disconnectedOutputs[r].name.indexOf(t))return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(~this.outputs[r].name.indexOf(t))return this.outputs[r]}getOutputById(t,i={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(i.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(this._disconnectedOutputs[r].id===t.toString())return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(this.outputs[r].id===t.toString())return this.outputs[r]}noteNameToNumber(t){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),On.toNoteNumber(t,this.octaveOffset)}getOctave(t){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),t=parseInt(t)),!isNaN(t)&&t>=0&&t<=127?On.getNoteDetails(On.offsetNumber(t,this.octaveOffset)).octave:!1}sanitizeChannels(t){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),On.sanitizeChannels(t)}toMIDIChannels(t){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),On.sanitizeChannels(t)}guessNoteNumber(t){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),On.guessNoteNumber(t,this.octaveOffset)}getValidNoteArray(t,i={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),On.buildNoteArray(t,i)}convertToTimestamp(t){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),On.toTimestamp(t)}async _destroyInputsAndOutputs(){let t=[];return this.inputs.forEach(i=>t.push(i.destroy())),this.outputs.forEach(i=>t.push(i.destroy())),Promise.all(t).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(t){this._updateInputsAndOutputs();let i={timestamp:t.timeStamp,type:t.port.state,target:this};if(t.port.state==="connected"&&t.port.connection==="open"){t.port.type==="output"?i.port=this.getOutputById(t.port.id):t.port.type==="input"&&(i.port=this.getInputById(t.port.id)),this.emit(t.port.state,i);const r=Object.assign({},i);r.type="portschanged",this.emit(r.type,r)}else if(t.port.state==="disconnected"&&t.port.connection==="pending"){t.port.type==="input"?i.port=this.getInputById(t.port.id,{disconnected:!0}):t.port.type==="output"&&(i.port=this.getOutputById(t.port.id,{disconnected:!0})),this.emit(t.port.state,i);const r=Object.assign({},i);r.type="portschanged",this.emit(r.type,r)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let i=this._inputs.length-1;i>=0;i--){const r=this._inputs[i];Array.from(this.interface.inputs.values()).find(o=>o===r._midiInput)||(this._disconnectedInputs.push(r),this._inputs.splice(i,1))}let t=[];return this.interface.inputs.forEach(i=>{if(!this._inputs.find(r=>r._midiInput===i)){let r=this._disconnectedInputs.find(a=>a._midiInput===i);r||(r=new iq(i)),this._inputs.push(r),t.push(r.open())}}),Promise.all(t)}async _updateOutputs(){if(!this.interface)return;for(let i=this._outputs.length-1;i>=0;i--){const r=this._outputs[i];Array.from(this.interface.outputs.values()).find(o=>o===r._midiOutput)||(this._disconnectedOutputs.push(r),this._outputs.splice(i,1))}let t=[];return this.interface.outputs.forEach(i=>{if(!this._outputs.find(r=>r._midiOutput===i)){let r=this._disconnectedOutputs.find(a=>a._midiOutput===i);r||(r=new yy(i)),this._outputs.push(r),t.push(r.open())}}),Promise.all(t)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),On.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),On.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.9"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),Jt.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),Jt.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),Jt.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),Jt.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),Jt.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const Sn=new rq;Sn.constructor=null;function sq(e,t,i){let{midiMessage:r=null}=t,{noteOn:a=null}=t,{noteOff:o=null}=t,{controlChange:h=null}=t,{pitchBend:u=null}=t,{errorCallback:m=A=>alert(A)}=t,{midiDevices:c=[]}=t;const d=()=>{i(0,c=[]),Sn.inputs.length<1?console.warn("No MIDI device detected"):(Sn.inputs.forEach((A,p)=>{console.log(`MIDI device ${p}: ${A.name}`),r&&A.addListener("midimessage",r),a&&A.addListener("noteon",a),o&&A.addListener("noteoff",o),h&&A.addListener("controlchange",h),u&&A.addListener("pitchbend",u)}),i(0,c=[...Sn.inputs]))};return ur(()=>{Sn.enable().then(d).catch(m)}),hr(()=>{for(const A of Sn.inputs)A.removeListener()}),e.$$set=A=>{"midiMessage"in A&&i(1,r=A.midiMessage),"noteOn"in A&&i(2,a=A.noteOn),"noteOff"in A&&i(3,o=A.noteOff),"controlChange"in A&&i(4,h=A.controlChange),"pitchBend"in A&&i(5,u=A.pitchBend),"errorCallback"in A&&i(6,m=A.errorCallback),"midiDevices"in A&&i(0,c=A.midiDevices)},[c,r,a,o,h,u,m]}class kr extends Ai{constructor(t){super(),gi(this,t,sq,null,pi,{midiMessage:1,noteOn:2,noteOff:3,controlChange:4,pitchBend:5,errorCallback:6,midiDevices:0})}}function aq(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A=e[1].join(", ")+"",p,v,g,y,E=e[2].join(" or ")+"",_,S,x,C;return x=new kr({props:{noteOn:e[3]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Play a chord on a MIDI instrument. The notes you played and the detected
        chord will be shown below.`,u=ue(),m=ie("div"),c=ze("Notes: "),d=ie("b"),p=ze(A),v=ie("br"),g=ze(`
        Detected chord: `),y=ie("b"),_=ze(E),S=ue(),gt(x.$$.fragment),de(h,"class","explanation"),de(m,"class","visualization"),de(t,"class","demo")},m(w,T){Rt(w,t,T),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(m,d),D(d,p),D(m,v),D(m,g),D(m,y),D(y,_),D(t,S),ft(x,t,null),C=!0},p(w,[T]){(!C||T&1)&&r!==(r=w[0].title+"")&&Ht(a,r),(!C||T&2)&&A!==(A=w[1].join(", ")+"")&&Ht(p,A),(!C||T&4)&&E!==(E=w[2].join(" or ")+"")&&Ht(_,E)},i(w){C||(ut(x.$$.fragment,w),C=!0)},o(w){ht(x.$$.fragment,w),C=!1},d(w){w&&Bt(t),mt(x)}}}function oq(e,t,i){let{toolInfo:r}=t,a=0,o=[],h=[],u=[];const m=d=>{o.length===0&&(a=d.timestamp);const A=(d.timestamp-a)/1e3,p={number:d.note.number,velocity:d.rawVelocity,time:A,channel:d.message.channel};o.push(p),c()},c=()=>{const d=os(o,A=>A.time);i(1,h=o.filter(A=>A.time>d-1).sort((A,p)=>A.number-p.number).map(A=>xs.fromMidiSharps(A.number))),i(1,h=[...new Set(h)]),i(2,u=eg.detect(h))};return ur(c),e.$$set=d=>{"toolInfo"in d&&i(0,r=d.toolInfo)},[r,h,u,m]}class lq extends Ai{constructor(t){super(),gi(this,t,oq,aq,pi,{toolInfo:0})}}function ou(e){return e!=null&&!Number.isNaN(e)}function Do(e,t){return+ou(t)-+ou(e)||$a(e,t)}function tg(e,t){return+ou(t)-+ou(e)||A9(e,t)}function $b(e){return e!=null&&`${e}`!=""}function ZT(e){return isFinite(e)?e:NaN}function Jg(e){return e>0&&isFinite(e)?e:NaN}function Xb(e){return e<0&&isFinite(e)?e:NaN}function cq(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const i=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${uq(e.getUTCFullYear())}-${rc(e.getUTCMonth()+1,2)}-${rc(e.getUTCDate(),2)}${i||r||a||o?`T${rc(i,2)}:${rc(r,2)}${a||o?`:${rc(a,2)}${o?`.${rc(o,3)}`:""}`:""}Z`:""}`}function uq(e){return e<0?`-${rc(-e,6)}`:e>9999?`+${rc(e,6)}`:rc(e,4)}function rc(e,t){return`${e}`.padStart(t,"0")}const hq=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function eB(e,t){return hq.test(e+="")?new Date(e):typeof t=="function"?t(e):t}function $h(e){if(e==null)return;const t=e[0],i=e[e.length-1];return A9(t,i)}const gh=1e3,Yc=gh*60,qc=Yc*60,Bl=qc*24,pl=Bl*7,i0=Bl*30,Qc=Bl*365,J3=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",gh],["5 seconds",5*gh],["15 seconds",15*gh],["30 seconds",30*gh],["minute",Yc],["5 minutes",5*Yc],["15 minutes",15*Yc],["30 minutes",30*Yc],["hour",qc],["3 hours",3*qc],["6 hours",6*qc],["12 hours",12*qc],["day",Bl],["2 days",2*Bl],["week",pl],["2 weeks",2*pl],["month",i0],["3 months",3*i0],["6 months",6*i0],["year",Qc],["2 years",2*Qc],["5 years",5*Qc],["10 years",10*Qc],["20 years",20*Qc],["50 years",50*Qc],["100 years",100*Qc]],Kb=new Map([["second",gh],["minute",Yc],["hour",qc],["day",Bl],["monday",pl],["tuesday",pl],["wednesday",pl],["thursday",pl],["friday",pl],["saturday",pl],["sunday",pl],["week",pl],["month",i0],["year",Qc]]),tB=new Map([["second",Ko],["minute",I9],["hour",B9],["day",g0],["monday",Yf],["tuesday",aS],["wednesday",oS],["thursday",h0],["friday",lS],["saturday",cS],["sunday",zh],["week",zh],["month",O9],["year",el]]),Yb=new Map([["second",Ko],["minute",T9],["hour",R9],["day",Qg],["monday",qf],["tuesday",uS],["wednesday",hS],["thursday",d0],["friday",dS],["saturday",fS],["sunday",Wh],["week",Wh],["month",D9],["year",tl]]),k9=Symbol("intervalDuration"),Zg=Symbol("intervalType");for(const[e,t]of tB)t[k9]=Kb.get(e),t[Zg]="time";for(const[e,t]of Yb)t[k9]=Kb.get(e),t[Zg]="utc";const Mf=[["year",tl,"utc"],["month",D9,"utc"],["day",Qg,"utc",6*i0],["hour",R9,"utc",3*Bl],["minute",T9,"utc",6*qc],["second",Ko,"utc",30*Yc]],c1=[["year",el,"time"],["month",O9,"time"],["day",g0,"time",6*i0],["hour",B9,"time",3*Bl],["minute",I9,"time",6*qc],["second",Ko,"time",30*Yc]],dq=[Mf[0],c1[0],Mf[1],c1[1],Mf[2],c1[2],...Mf.slice(3)];function nB(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let i=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),i=+r[1]),t){case"quarter":t="month",i*=3;break;case"half":t="month",i*=6;break}let a=Yb.get(t);if(!a)throw new Error(`unknown interval: ${e}`);if(i>1&&!a.every)throw new Error(`non-periodic interval: ${t}`);return[t,i]}function iB(e){return rB(nB(e),"time")}function qb(e){return rB(nB(e),"utc")}function rB([e,t],i){let r=(i==="time"?tB:Yb).get(e);return t>1&&(r=r.every(t),r[k9]=Kb.get(e)*t,r[Zg]=i),r}function HC(e,t){if(!(t>1))return;const i=e[k9];if(!J3.some(([,a])=>a===i)||i%Bl===0&&Bl<i&&i<i0)return;const[r]=J3[wg(([,a])=>Math.log(a)).center(J3,Math.log(i*t))];return(e[Zg]==="time"?iB:qb)(r)}function zC(e,t,i){const r=t==="time"?wb:L9;if(i==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const a=fq(i);switch(e){case"millisecond":return ch(r(".%L"),r(":%M:%S"),a);case"second":return ch(r(":%S"),r("%-I:%M"),a);case"minute":return ch(r("%-I:%M"),r("%p"),a);case"hour":return ch(r("%-I %p"),r("%b %-d"),a);case"day":return ch(r("%-d"),r("%b"),a);case"month":return ch(r("%b"),r("%Y"),a);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function fq(e){return e==="left"||e==="right"?(t,i)=>`
${t}
${i}`:e==="top"?(t,i)=>`${i}
${t}`:(t,i)=>`${t}
${i}`}function mq(e){return e==="time"?c1:e==="utc"?Mf:dq}function pq(e,t,i){const r=os(VG(t,(a,o)=>Math.abs(o-a)));if(r<1e3)return zC("millisecond","utc",i);for(const[a,o,h,u]of mq(e)){if(r>u||a==="hour"&&!r)break;if(t.every(m=>o.floor(m)>=m))return zC(a,h,i)}}function ch(e,t,i){return(r,a,o)=>{const h=e(r,a),u=t(r,a),m=a-$h(o);return a!==m&&o[m]!==void 0&&u===t(o[m],m)?h:i(h,u)}}const Zf=Object.getPrototypeOf(Uint8Array),gq=Object.prototype.toString,sB=Symbol("reindex");function as(e,t,i){const r=typeof t;return r==="string"?WC(e,aB(t),i):r==="function"?WC(e,t,i):r==="number"||t instanceof Date||r==="boolean"?Xs(e,U9(t),i):typeof(t==null?void 0:t.transform)=="function"?jC(t.transform(e),i):Aq(jC(t,i),e==null?void 0:e[sB])}function Aq(e,t){return e!=null&&t?i4(e,t):e}function WC(e,t,i){return Xs(e,(i==null?void 0:i.prototype)instanceof Zf?vq(t):t,i)}function jC(e,t){return t===void 0?po(e):e instanceof t?e:t.prototype instanceof Zf&&!(e instanceof Zf)?t.from(e,e4):t.from(e)}function vq(e){return(t,i)=>e4(e(t,i))}const u1=[null],aB=e=>t=>t[e],cd={transform:Mc},As={transform:e=>e},Jb=()=>1,yq=()=>!0,Da=e=>e==null?e:`${e}`,Yr=e=>e==null?e:+e,Zb=e=>e?e[0]:void 0,ng=e=>e?e[1]:void 0,U9=e=>()=>e;function bq(e){const t=+`${e}`.slice(1)/100;return(i,r)=>Lh(i,t,r)}function Cl(e){return e instanceof Zf?e:Xs(e,e4,Float64Array)}function e4(e){return e==null?NaN:Number(e)}function Mq(e){return Xs(e,oB)}function oB(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?eB(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Lo(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:tA(e)?[void 0,e]:[e,void 0]}function La(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function lB(e,t,i){if(e!=null)return No(e,t,i)}function No(e,t,i){const r=`${e}`.toLowerCase();if(!i.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function po(e){return e==null||e instanceof Array||e instanceof Zf?e:Array.from(e)}function Xs(e,t,i=Array){return e==null?e:e instanceof i?e.map(t):i.from(e,t)}function e9(e,t=Array){return e instanceof t?e.slice():t.from(e)}function cB({x:e,x1:t,x2:i}){return e!==void 0||t!==void 0||i!==void 0}function uB({y:e,y1:t,y2:i}){return e!==void 0||t!==void 0||i!==void 0}function t4(e){return cB(e)||uB(e)||e.interval!==void 0}function Dl(e){return(e==null?void 0:e.toString)===gq}function by(e){return Dl(e)&&(e.type!==void 0||e.domain!==void 0)}function eA(e){return Dl(e)&&typeof e.transform!="function"}function Xh(e){return eA(e)&&e.value===void 0&&e.channel===void 0}function hB(e,t,i,r=As){return t===void 0&&i===void 0?(t=0,i=e===void 0?r:e):t===void 0?t=e===void 0?0:e:i===void 0&&(i=e===void 0?0:e),[t,i]}function ud(e,t){return e===void 0&&t===void 0?[Zb,ng]:[e,t]}function n4({z:e,fill:t,stroke:i}={}){return e===void 0&&([e]=Lo(t)),e===void 0&&([e]=Lo(i)),e}function Mc(e){const t=e.length,i=new Uint32Array(t);for(let r=0;r<t;++r)i[r]=r;return i}function i4(e,t){return Xs(t,i=>e[i],e.constructor)}function _q(e,t,i){return e.subarray?e.subarray(t,i):e.slice(t,i)}function qu(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Cq(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function qo(e){let t;return[{transform:()=>t,label:du(e)},i=>t=i]}function Wa(e){return e==null?[e]:qo(e)}function du(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function ig(e,t){return{transform(i){const r=e.transform(i),a=t.transform(i);return Ka(r)||Ka(a)?Xs(r,(o,h)=>new Date((+r[h]+ +a[h])/2)):Xs(r,(o,h)=>(+r[h]+ +a[h])/2,Float64Array)},label:e.label}}function rg(e,t){const i=dB(t==null?void 0:t.interval,t==null?void 0:t.type);return i?Xs(e,i):e}function dB(e,t){const i=r4(e,t);return i&&(r=>ou(r)?i.floor(r):r)}function r4(e,t){if(e!=null){if(typeof e=="number")return Eq(e);if(typeof e=="string")return(t==="time"?iB:qb)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Eq(e){e=+e,0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const t=Math.abs(e);return e<0?{floor:i=>Math.floor(i*t)/t,offset:(i,r=1)=>(i*t+Math.floor(r))/t,range:(i,r)=>_n(Math.ceil(i*t),r*t).map(a=>a/t)}:{floor:i=>Math.floor(i/t)*t,offset:(i,r=1)=>i+t*Math.floor(r),range:(i,r)=>_n(Math.ceil(i/t),r/t).map(a=>a*t)}}function hd(e,t){if(e=r4(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function wq(e,t){if(e=hd(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function xq(e){return Ah(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Ah(e){return typeof(e==null?void 0:e.range)=="function"}function dd(e){return e===void 0||eA(e)?e:{value:e}}function Sq(e){return e==null?null:{transform:t=>as(t,e,Float64Array),label:du(e)}}function fu(e){return e&&typeof e[Symbol.iterator]=="function"}function fB(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function $C(e){for(const t of e){if(t==null)continue;const i=typeof t;return i==="string"||i==="boolean"}}function Ka(e){for(const t of e)if(t!=null)return t instanceof Date}function Iq(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&eB(t)}function Tq(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function Bq(e){for(const t of e)if(t!=null)return typeof t=="number"}function Z3(e,t){let i;for(const r of e)if(r!=null){if(!t(r))return!1;i=!0}return i}const Rq=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function tA(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||Rq.has(e))}function Oq(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function ra(e){return e==null||t9(e)}function t9(e){return/^\s*none\s*$/i.test(e)}function Dq(e){return/^\s*round\s*$/i.test(e)}function My(e,t){return lB(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function nA(e="middle"){return My(e,"frameAnchor")}function Lq(e={},...t){let i=e;for(const r of t)for(const a in r)if(i[a]===void 0){const o=r[a];i===e?i={...i,[a]:o}:i[a]=o}return i}function Pq(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,i=>{const{name:r}=i;if(r==null)throw new Error("missing name");const a=`${r}`;if(a==="__proto__")throw new Error(`illegal name: ${a}`);if(t.has(a))throw new Error(`duplicate name: ${a}`);return t.add(a),[r,i]}))}function mB(e){return fu(e)?Pq(e):e}function pB(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=No(e,"clip",["frame","sphere"])),e}const El=Symbol("position"),_c=Symbol("color"),G9=Symbol("radius"),V9=Symbol("length"),Q9=Symbol("opacity"),iA=Symbol("symbol"),gB=Symbol("projection"),ws=new Map([["x",El],["y",El],["fx",El],["fy",El],["r",G9],["color",_c],["opacity",Q9],["symbol",iA],["length",V9],["projection",gB]]);function Nq(e){return e===El||e===gB}function Fq(e){return e===El||e===G9||e===V9||e===Q9}const kq=Math.sqrt(3),Uq=2/kq,Gq={draw(e,t){const i=Math.sqrt(t/Math.PI),r=i*Uq,a=r/2;e.moveTo(0,r),e.lineTo(i,a),e.lineTo(i,-a),e.lineTo(0,-r),e.lineTo(-i,-a),e.lineTo(-i,a),e.closePath()}},s4=new Map([["asterisk",kI],["circle",Jf],["cross",UI],["diamond",VI],["diamond2",QI],["hexagon",Gq],["plus",HI],["square",zI],["square2",WI],["star",$I],["times",qI],["triangle",XI],["triangle2",KI],["wye",YI]]);function a4(e){return e&&typeof e.draw=="function"}function Vq(e){return a4(e)?!0:typeof e!="string"?!1:s4.has(e.toLowerCase())}function o4(e){if(e==null||a4(e))return e;const t=s4.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function Qq(e){if(e==null||a4(e))return[void 0,e];if(typeof e=="string"){const t=s4.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function M0({filter:e,sort:t,reverse:i,transform:r,initializer:a,...o}={},h){if(r===void 0&&(e!=null&&(r=AB(e)),t!=null&&!Xh(t)&&(r=ev(r,l4(t))),i&&(r=ev(r,vB))),h!=null&&a!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(t===null||Xh(t))&&{sort:t},transform:ev(r,h)}}function Kh({filter:e,sort:t,reverse:i,initializer:r,...a}={},o){return r===void 0&&(e!=null&&(r=AB(e)),t!=null&&!Xh(t)&&(r=tv(r,l4(t))),i&&(r=tv(r,vB))),{...a,...(t===null||Xh(t))&&{sort:t},initializer:tv(r,o)}}function ev(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(i,r,a){return{data:i,facets:r}=e.call(this,i,r,a),t.call(this,po(i),r,a)}}function tv(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(i,r,a,...o){let h,u,m,c,d,A;return{data:u=i,facets:m=r,channels:h}=e.call(this,i,r,a,...o),{data:d=u,facets:A=m,channels:c}=t.call(this,u,m,{...a,...h},...o),{data:d,facets:A,channels:{...h,...c}}}}function Hq(e,t){return(e.initializer!=null?Kh:M0)(e,t)}function AB(e){return(t,i)=>{const r=as(t,e);return{data:t,facets:i.map(a=>a.filter(o=>r[o]))}}}function vB(e,t){return{data:e,facets:t.map(i=>i.slice().reverse())}}function zq(e,{sort:t,...i}={}){return{...(eA(e)&&e.channel!==void 0?Kh:Hq)(i,l4(e)),sort:Xh(t)?t:null}}function l4(e){return(typeof e=="function"&&e.length!==1?Wq:jq)(e)}function Wq(e){return(t,i)=>{const r=(a,o)=>e(t[a],t[o]);return{data:t,facets:i.map(a=>a.slice().sort(r))}}}function jq(e){let t,i;({channel:t,value:e,order:i}={...dd(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),i===void 0&&(i=r?tg:Do),typeof i!="function")switch(`${i}`.toLowerCase()){case"ascending":i=Do;break;case"descending":i=tg;break;default:throw new Error(`invalid order: ${i}`)}return(a,o,h)=>{let u;if(t===void 0)u=as(a,e);else{if(h===void 0)throw new Error("channel sort requires an initializer");if(u=h[t],!u)return{};u=u.value}const m=(c,d)=>i(u[c],u[d]);return{data:a,facets:o.map(c=>c.slice().sort(m))}}}function $q(e={y:"count"},t={}){const{x:i=As}=t;if(i==null)throw new Error("missing channel: x");return yB(i,null,e,t)}function Xq(e={fill:"count"},t={}){let{x:i,y:r}=t;if([i,r]=ud(i,r),i==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return yB(i,r,e,t)}function yB(e,t,{data:i=h4,filter:r,sort:a,reverse:o,...h}={},u={}){h=qq(h,u),i=CB(i,As),a=a==null?void 0:MB("sort",a,u),r=r==null?void 0:_B("filter",r,u);const[m,c]=Wa(e),[d,A]=Wa(t),{z:p,fill:v,stroke:g,x1:y,x2:E,y1:_,y2:S,...x}=u,[C,w]=Wa(p),[T]=Lo(v),[O]=Lo(g),[B,P]=Wa(T),[L,N]=Wa(O);return{..."z"in u&&{z:C||p},..."fill"in u&&{fill:B||v},..."stroke"in u&&{stroke:L||g},...M0(x,(F,z,G)=>{const H=rg(as(F,e),G==null?void 0:G.x),j=rg(as(F,t),G==null?void 0:G.y),q=as(F,p),Q=as(F,T),k=as(F,O),K=EB(h,{z:q,fill:Q,stroke:k}),W=[],J=[],se=H&&c([]),ge=j&&A([]),fe=q&&w([]),me=Q&&P([]),xe=k&&N([]);let ye=0;for(const we of h)we.initialize(F);a&&a.initialize(F),r&&r.initialize(F);for(const we of z){const Ee=[];for(const He of h)He.scope("facet",we);a&&a.scope("facet",we),r&&r.scope("facet",we);for(const[He,Ae]of Nf(we,K))for(const[Ke,Ue]of Nf(Ae,j))for(const[ct,vt]of Nf(Ue,H)){const dt={data:F};if(H&&(dt.x=ct),j&&(dt.y=Ke),K&&(dt.z=He),!(r&&!r.reduce(vt,dt))){Ee.push(ye++),J.push(i.reduceIndex(vt,F,dt)),H&&se.push(ct),j&&ge.push(Ke),q&&fe.push(K===q?He:q[vt[0]]),Q&&me.push(K===Q?He:Q[vt[0]]),k&&xe.push(K===k?He:k[vt[0]]);for(const It of h)It.reduce(vt,dt);a&&a.reduce(vt,dt)}}W.push(Ee)}return wB(W,a,o),{data:J,facets:W}}),...!Pf(h,"x")&&(m?{x:m}:{x1:y,x2:E}),...!Pf(h,"y")&&(d?{y:d}:{y1:_,y2:S}),...Object.fromEntries(h.map(({name:F,output:z})=>[F,z]))}}function Pf(e,...t){for(const{name:i}of e)if(t.includes(i))return!0;return!1}function bB(e,t,i=c4){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",tJ]),t.href!=null&&e.href===void 0&&r.push(["href",d4]),r.filter(([,a])=>a!==void 0).map(([a,o])=>o===null?Kq(a):i(a,o,t))}function c4(e,t,i,r=u4){let a;Dl(t)&&"reduce"in t&&(a=t.scale,t=t.reduce);const o=r(e,t,i),[h,u]=qo(o.label);let m;return{name:e,output:a===void 0?h:{value:h,scale:a},initialize(c){o.initialize(c),m=u([])},scope(c,d){o.scope(c,d)},reduce(c,d){m.push(o.reduce(c,d))}}}function Kq(e){return{name:e,initialize(){},scope(){},reduce(){}}}function u4(e,t,i,r=rA){const a=Cq(e,i),o=r(t,a);let h,u;return{label:du(o===sg?null:a,o.label),initialize(m){h=a===void 0?m:as(m,a),o.scope==="data"&&(u=o.reduceIndex(Mc(m),h))},scope(m,c){o.scope===m&&(u=o.reduceIndex(c,h))},reduce(m,c){return o.scope==null?o.reduceIndex(m,h,c):o.reduceIndex(m,h,u,c)}}}function Nf(e,t){return t?xg(e,i=>t[i]):[[,e]]}function rA(e,t,i=Yq){if(e==null)return i(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Dl(e))return Zq(e);if(typeof e=="function")return eJ(e);if(/^p\d{2}$/i.test(e))return ic(bq(e));switch(`${e}`.toLowerCase()){case"first":return d4;case"last":return nJ;case"identity":return h4;case"count":return sg;case"distinct":return iJ;case"sum":return t==null?sg:rJ;case"proportion":return KC(t,"data");case"proportion-facet":return KC(t,"facet");case"deviation":return ic(gw);case"min":return ic(Pa);case"min-index":return ic(b9);case"max":return ic(os);case"max-index":return ic(NG);case"mean":return XC(ab);case"median":return XC(Hf);case"variance":return ic(pw);case"mode":return ic(GG)}return i(e)}function Yq(e){throw new Error(`invalid reduce: ${e}`)}function qq(e,t){return bB(e,t,MB)}function MB(e,t,i){return c4(e,t,i,_B)}function _B(e,t,i){return u4(e,t,i,CB)}function CB(e,t){return rA(e,t,Jq)}function Jq(e){switch(`${e}`.toLowerCase()){case"x":return sJ;case"y":return aJ;case"z":return xB}throw new Error(`invalid group reduce: ${e}`)}function EB(e,t){for(const i in t){const r=t[i];if(r!==void 0&&!e.some(a=>a.name===i))return r}}function wB(e,t,i){if(t){const r=t.output.transform(),a=(o,h)=>Do(r[o],r[h]);e.forEach(o=>o.sort(a))}i&&e.forEach(r=>r.reverse())}function Zq(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function eJ(e){return{reduceIndex(t,i,r){return e(i4(i,t),r)}}}function ic(e){return{reduceIndex(t,i){return e(t,r=>i[r])}}}function XC(e){return{reduceIndex(t,i){const r=e(t,a=>i[a]);return Ka(i)?new Date(r):r}}}const h4={reduceIndex(e,t){return i4(t,e)}},d4={reduceIndex(e,t){return t[e[0]]}},tJ={reduceIndex(e,t){const r=y1(_h(e,o=>o.length,o=>t[o]),ng),a=r.slice(-5).reverse();if(a.length<r.length){const o=r.slice(0,-4);a[4]=[`… ${o.length.toLocaleString("en-US")} more`,tu(o,ng)]}return a.map(([o,h])=>`${o} (${h.toLocaleString("en-US")})`).join(`
`)}},nJ={reduceIndex(e,t){return t[e[e.length-1]]}},sg={label:"Frequency",reduceIndex(e){return e.length}},iJ={label:"Distinct",reduceIndex(e,t){const i=new y9;for(const r of e)i.add(t[r]);return i.size}},rJ=ic(tu);function KC(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(i,r,a=1)=>i.length/a}:{scope:t,reduceIndex:(i,r,a=1)=>tu(i,o=>r[o])/a}}const sJ={reduceIndex(e,t,{x:i}){return i}},aJ={reduceIndex(e,t,{y:i}){return i}},xB={reduceIndex(e,t,{z:i}){return i}};function n9(e,{scale:t,type:i,value:r,filter:a,hint:o,label:h=du(r)},u){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),SB(u,{scale:t,type:i,value:as(e,r),label:h,filter:a,hint:o})}function oJ(e,t){return Object.fromEntries(Object.entries(e).map(([i,r])=>[i,n9(t,r,i)]))}function lJ(e,t){const i=Object.fromEntries(Object.entries(e).map(([r,{scale:a,value:o}])=>{const h=a==null?null:t[a];return[r,h==null?o:Xs(o,h)]}));return i.channels=e,i}function SB(e,t){const{scale:i,value:r}=t;if(i===!0||i==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=i!==!0&&Z3(r,tA)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=i!==!0&&Z3(r,Oq)?null:"opacity";break;case"symbol":i!==!0&&Z3(r,Vq)?(t.scale=null,t.value=Xs(r,o4)):t.scale="symbol";break;default:t.scale=ws.has(e)?e:null;break}else if(i===!1)t.scale=null;else if(i!=null&&!ws.has(i))throw new Error(`unknown scale: ${i}`);return t}function cJ(e,t,i,r,a){const{order:o,reverse:h,reduce:u=!0,limit:m}=a;for(const c in a){if(!ws.has(c))continue;let{value:d,order:A=o,reverse:p=h,reduce:v=u,limit:g=m}=dd(a[c]);const y=d==null?void 0:d.startsWith("-");if(y&&(d=d.slice(1)),A=A===void 0?y!==(d==="width"||d==="height")?TB:IB:dJ(A),v==null||v===!1)continue;const E=c==="fx"||c==="fy"?hJ(t,r[c]):uJ(i,c);if(!E)throw new Error(`missing channel for scale: ${c}`);const _=E.value,[S=0,x=1/0]=fu(g)?g:g<0?[g]:[0,g];if(d==null)E.domain=()=>{let C=Array.from(new y9(_));return p&&(C=C.reverse()),(S!==0||x!==1/0)&&(C=C.slice(S,x)),C};else{const C=d==="data"?e:d==="height"?YC(i,"y1","y2"):d==="width"?YC(i,"x1","x2"):_y(i,d,d==="y"?"y2":d==="x"?"x2":void 0),w=rA(v===!0?"max":v,C);E.domain=()=>{let T=IG(Mc(_),O=>w.reduceIndex(O,C),O=>_[O]);return A&&T.sort(A),p&&T.reverse(),(S!==0||x!==1/0)&&(T=T.slice(S,x)),T.map(Zb)}}}}function uJ(e,t){for(const i in e){const r=e[i];if(r.scale===t)return r}}function hJ(e,t){const i=e.original;if(i===e)return t;const r=t.value,a=t.value=[];for(let o=0;o<i.length;++o){const h=r[i[o][0]];for(const u of e[o])a[u]=h}return t}function YC(e,t,i){const r=_y(e,t),a=_y(e,i);return Xs(a,(o,h)=>Math.abs(o-r[h]),Float64Array)}function _y(e,t,i){let r=e[t];if(!r&&i!==void 0&&(r=e[i]),r)return r.value;throw new Error(`missing channel: ${t}`)}function dJ(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return IB;case"descending":return TB}throw new Error(`invalid order: ${e}`)}function IB([e,t],[i,r]){return Do(t,r)||Do(e,i)}function TB([e,t],[i,r]){return tg(t,r)||Do(e,i)}function qC(e,t){let i=e[t];if(i){for(;i.source;)i=i.source;return i.source===null?null:i}}const BB=new Map([["accent",P$],["category10",L$],["dark2",N$],["observable10",Jc],["paired",F$],["pastel1",k$],["pastel2",U$],["set1",G$],["set2",V$],["set3",Q$],["tableau10",H$]]);function fJ(e){return e!=null&&BB.has(`${e}`.toLowerCase())}const JC=new Map([...BB,["brbg",ec(ES,wS)],["prgn",ec(xS,SS)],["piyg",ec(IS,TS)],["puor",ec(BS,RS)],["rdbu",ec(cy,z1)],["rdgy",ec(OS,DS)],["rdylbu",ec(uy,W1)],["rdylgn",ec(LS,PS)],["spectral",ec(NS,FS)],["burd",ZC(cy,z1)],["buylrd",ZC(uy,W1)],["blues",na(lI,cI)],["greens",na(uI,hI)],["greys",na(dI,fI)],["oranges",na(vI,yI)],["purples",na(mI,pI)],["reds",na(gI,AI)],["turbo",tc(xI)],["viridis",tc(Sb)],["magma",tc(SI)],["inferno",tc(II)],["plasma",tc(TI)],["cividis",tc(bI)],["cubehelix",tc(MI)],["warm",tc(_I)],["cool",tc(CI)],["bugn",na(kS,US)],["bupu",na(GS,VS)],["gnbu",na(QS,HS)],["orrd",na(zS,WS)],["pubu",na(XS,KS)],["pubugn",na(jS,$S)],["purd",na(YS,qS)],["rdpu",na(JS,ZS)],["ylgn",na(nI,iI)],["ylgnbu",na(eI,tI)],["ylorbr",na(rI,sI)],["ylorrd",na(aI,oI)],["rainbow",eE(EI)],["sinebow",eE(wI)]]);function na(e,t){return({length:i})=>i===1?[e[3][1]]:i===2?[e[3][1],e[3][2]]:(i=Math.max(3,Math.floor(i)),i>9?Zo(t,i):e[i])}function ec(e,t){return({length:i})=>i===2?[e[3][0],e[3][2]]:(i=Math.max(3,Math.floor(i)),i>11?Zo(t,i):e[i])}function ZC(e,t){return({length:i})=>i===2?[e[3][2],e[3][0]]:(i=Math.max(3,Math.floor(i)),i>11?Zo(r=>t(1-r),i):e[i].slice().reverse())}function tc(e){return({length:t})=>Zo(e,Math.max(2,Math.floor(t)))}function eE(e){return({length:t})=>Zo(e,Math.floor(t)+1).slice(0,-1)}function RB(e){const t=`${e}`.toLowerCase();if(!JC.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return JC.get(t)}function sA(e,t){const i=RB(e),r=typeof i=="function"?i({length:t}):i;return r.length!==t?r.slice(0,t):r}function mJ(e,t="greys"){const i=new Set,[r,a]=sA(t,2);for(const o of e)if(o!=null)if(o===!0)i.add(a);else if(o===!1)i.add(r);else return;return[...i]}const tE=new Map([["brbg",wS],["prgn",SS],["piyg",TS],["puor",RS],["rdbu",z1],["rdgy",DS],["rdylbu",W1],["rdylgn",PS],["spectral",FS],["burd",e=>z1(1-e)],["buylrd",e=>W1(1-e)],["blues",cI],["greens",hI],["greys",fI],["purples",pI],["reds",AI],["oranges",yI],["turbo",xI],["viridis",Sb],["magma",SI],["inferno",II],["plasma",TI],["cividis",bI],["cubehelix",MI],["warm",_I],["cool",CI],["bugn",US],["bupu",VS],["gnbu",HS],["orrd",WS],["pubugn",$S],["pubu",KS],["purd",qS],["rdpu",ZS],["ylgnbu",tI],["ylgn",iI],["ylorbr",sI],["ylorrd",oI],["rainbow",EI],["sinebow",wI]]);function f4(e){const t=`${e}`.toLowerCase();if(!tE.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return tE.get(t)}const pJ=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function gJ(e){return e!=null&&pJ.has(`${e}`.toLowerCase())}const OB=e=>t=>e(1-t),nv=[0,1],nE=new Map([["number",Ma],["rgb",l0],["hsl",hH],["hcl",mH],["lab",dH]]);function DB(e){const t=`${e}`.toLowerCase();if(!nE.has(t))throw new Error(`unknown interpolator: ${t}`);return nE.get(t)}function H9(e,t,i,{type:r,nice:a,clamp:o,zero:h,domain:u=PB(e,i),unknown:m,round:c,scheme:d,interval:A,range:p=ws.get(e)===G9?SJ(i,u):ws.get(e)===V9?IJ(i,u):ws.get(e)===Q9?nv:void 0,interpolate:v=ws.get(e)===_c?d==null&&p!==void 0?l0:f4(d!==void 0?d:r==="cyclical"?"rainbow":"turbo"):c?fb:Ma,reverse:g}){if(A=hd(A,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof v!="function"&&(v=DB(v)),g=!!g,p!==void 0){const y=(u=po(u)).length,E=(p=po(p)).length;if(y!==E){if(v.length===1)throw new Error("invalid piecewise interpolator");v=Og(v,p),p=void 0}}if(v.length===1?(g&&(v=OB(v),g=!1),p===void 0&&(p=Float64Array.from(u,(y,E)=>E/(u.length-1)),p.length===2&&(p=nv)),t.interpolate((p===nv?U9:p4)(v))):t.interpolate(v),h){const[y,E]=Ps(u);(y>0||E<0)&&(u=e9(u),($h(u)||1)===Math.sign(y)?u[0]=0:u[u.length-1]=0)}return g&&(u=_1(u)),t.domain(u).unknown(m),a&&(t.nice(AJ(a,r)),u=t.domain()),p!==void 0&&t.range(p),o&&t.clamp(o),{type:r,domain:u,range:p,scale:t,interpolate:v,interval:A}}function AJ(e,t){return e===!0?void 0:typeof e=="number"?e:wq(e,t)}function vJ(e,t,i){return H9(e,S9(),t,i)}function yJ(e,t,i){return LB(e,t,{...i,exponent:.5})}function LB(e,t,{exponent:i=1,...r}){return H9(e,iS().exponent(i),t,{...r,type:"pow"})}function bJ(e,t,{base:i=10,domain:r=TJ(t),...a}){return H9(e,Zx().base(i),t,{...a,domain:r})}function MJ(e,t,{constant:i=1,...r}){return H9(e,tS().constant(i),t,r)}function _J(e,t,{range:i,quantiles:r=i===void 0?5:(i=[...i]).length,n:a=r,scheme:o="rdylbu",domain:h=BJ(t),unknown:u,interpolate:m,reverse:c}){return i===void 0&&(i=m!==void 0?Zo(m,a):ws.get(e)===_c?sA(o,a):void 0),h.length>0&&(h=rS(h,i===void 0?{length:a}:i).quantiles()),m4(e,t,{domain:h,range:i,reverse:c,unknown:u})}function CJ(e,t,{range:i,n:r=i===void 0?5:(i=[...i]).length,scheme:a="rdylbu",domain:o=PB(e,t),unknown:h,interpolate:u,reverse:m}){const[c,d]=Ps(o);let A;return i===void 0?(A=Dh(c,d,r),A[0]<=c&&A.splice(0,1),A[A.length-1]>=d&&A.pop(),r=A.length+1,i=u!==void 0?Zo(u,r):ws.get(e)===_c?sA(a,r):void 0):(A=Zo(Ma(c,d),r+1).slice(1,-1),c instanceof Date&&(A=A.map(p=>new Date(p)))),$h(po(o))<0&&A.reverse(),m4(e,t,{domain:A,range:i,reverse:m,unknown:h})}function m4(e,t,{domain:i=[0],unknown:r,scheme:a="rdylbu",interpolate:o,range:h=o!==void 0?Zo(o,i.length+1):ws.get(e)===_c?sA(a,i.length+1):void 0,reverse:u}){i=po(i);const m=$h(i);if(!isNaN(m)&&!EJ(i,m))throw new Error(`the ${e} scale has a non-monotonic domain`);return u&&(h=_1(h)),{type:"threshold",scale:sS(m<0?_1(i):i,h===void 0?[]:h).unknown(r),domain:i,range:h}}function EJ(e,t){for(let i=1,r=e.length,a=e[0];i<r;++i){const o=A9(a,a=e[i]);if(o!==0&&o!==t)return!1}return!0}function wJ(e){return{type:"identity",scale:Fq(ws.get(e))?Yx():t=>t}}function i9(e,t=ZT){return e.length?[Pa(e,({value:i})=>i===void 0?i:Pa(i,t)),os(e,({value:i})=>i===void 0?i:os(i,t))]:[0,1]}function PB(e,t){const i=ws.get(e);return(i===G9||i===Q9||i===V9?xJ:i9)(t)}function xJ(e){return[0,e.length?os(e,({value:t})=>t===void 0?t:os(t,ZT)):1]}function SJ(e,t){const i=e.find(({radius:h})=>h!==void 0);if(i!==void 0)return[0,i.radius];const r=Lh(e,.5,({value:h})=>h===void 0?NaN:Lh(h,.25,Jg)),a=t.map(h=>3*Math.sqrt(h/r)),o=30/os(a);return o<1?a.map(h=>h*o):a}function IJ(e,t){const i=Hf(e,({value:o})=>o===void 0?NaN:Hf(o,Math.abs)),r=t.map(o=>12*o/i),a=60/os(r);return a<1?r.map(o=>o*a):r}function TJ(e){for(const{value:t}of e)if(t!==void 0)for(let i of t){if(i>0)return i9(e,Jg);if(i<0)return i9(e,Xb)}return[1,10]}function BJ(e){const t=[];for(const{value:i}of e)if(i!==void 0)for(const r of i)t.push(r);return t}function p4(e){return(t,i)=>r=>e(t+r*(i-t))}let Cy=0,Ey;function RJ(){const e=Cy;return Cy=0,Ey=void 0,e}function Zc(e){e!==Ey&&(Ey=e,console.warn(e),++Cy)}function aA(e,t,i,r,{type:a,nice:o,clamp:h,domain:u=i9(r),unknown:m,pivot:c=0,scheme:d,range:A,symmetric:p=!0,interpolate:v=ws.get(e)===_c?d==null&&A!==void 0?l0:f4(d!==void 0?d:"rdbu"):Ma,reverse:g}){c=+c,u=po(u);let[y,E]=u;if(u.length>2&&Zc(`Warning: the diverging ${e} scale domain contains extra elements.`),A9(y,E)<0&&([y,E]=[E,y],g=!g),y=Math.min(y,c),E=Math.max(E,c),typeof v!="function"&&(v=DB(v)),A!==void 0&&(v=v.length===1?p4(v)(...A):Og(v,A)),g&&(v=OB(v)),p){const _=i.apply(c),S=_-i.apply(y),x=i.apply(E)-_;S<x?y=i.invert(_-x):S>x&&(E=i.invert(_+S))}return t.domain([y,c,E]).unknown(m).interpolator(v),h&&t.clamp(h),o&&t.nice(o),{type:a,domain:[y,E],pivot:c,interpolate:v,scale:t}}function OJ(e,t,i){return aA(e,bS(),NJ,t,i)}function DJ(e,t,i){return NB(e,t,{...i,exponent:.5})}function NB(e,t,{exponent:i=1,...r}){return aA(e,CS().exponent(i=+i),UJ(i),t,{...r,type:"diverging-pow"})}function LJ(e,t,{base:i=10,pivot:r=1,domain:a=i9(t,r<0?Xb:Jg),...o}){return aA(e,MS().base(i=+i),FJ,t,{domain:a,pivot:r,...o})}function PJ(e,t,{constant:i=1,...r}){return aA(e,_S().constant(i=+i),GJ(i),t,r)}const NJ={apply(e){return e},invert(e){return e}},FJ={apply:Math.log,invert:Math.exp},kJ={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function UJ(e){return e===.5?kJ:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function GJ(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function FB(e,t,i,r){return H9(e,t,i,r)}function VJ(e,t,i){return FB(e,O$(),t,i)}function QJ(e,t,i){return FB(e,D$(),t,i)}const z9=Symbol("ordinal");function kB(e,t,i,{type:r,interval:a,domain:o,range:h,reverse:u,hint:m}){return a=hd(a,r),o===void 0&&(o=GB(i,a,e)),(r==="categorical"||r===z9)&&(r="ordinal"),u&&(o=_1(o)),o=t.domain(o).domain(),h!==void 0&&(typeof h=="function"&&(h=h(o)),t.range(h)),{type:r,domain:o,range:h,scale:t,hint:m,interval:a}}function HJ(e,t,{type:i,interval:r,domain:a,range:o,scheme:h,unknown:u,...m}){r=hd(r,i),a===void 0&&(a=GB(t,r,e));let c;if(ws.get(e)===iA)c=jJ(t),o=o===void 0?$J(c):Xs(o,o4);else if(ws.get(e)===_c&&(o===void 0&&(i==="ordinal"||i===z9)&&(o=mJ(a,h),o!==void 0&&(h=void 0)),h===void 0&&o===void 0&&(h=i==="ordinal"?"turbo":"observable10"),h!==void 0))if(o!==void 0){const d=f4(h),A=o[0],p=o[1]-o[0];o=({length:v})=>Zo(g=>d(A+p*g),v)}else o=RB(h);if(u===ay)throw new Error(`implicit unknown on ${e} scale is not supported`);return kB(e,Cb().unknown(u),t,{...m,type:i,domain:a,range:o,hint:c})}function zJ(e,t,{align:i=.5,padding:r=.5,...a}){return UB(fj().align(i).padding(r),t,a,e)}function WJ(e,t,{align:i=.5,padding:r=.1,paddingInner:a=r,paddingOuter:o=e==="fx"||e==="fy"?0:r,...h}){return UB(Ug().align(i).paddingInner(a).paddingOuter(o),t,h,e)}function UB(e,t,i,r){let{round:a}=i;return a!==void 0&&e.round(a=!!a),e=kB(r,e,t,i),e.round=a,e}function GB(e,t,i){const r=new y9;for(const{value:a,domain:o}of e){if(o!==void 0)return o();if(a!==void 0)for(const h of a)r.add(h)}if(t!==void 0){const[a,o]=Ps(r).map(t.floor,t);return t.range(a,t.offset(o))}if(r.size>1e4&&ws.get(i)===El)throw new Error(`implicit ordinal domain of ${i} scale has more than 10,000 values`);return y1(r,Do)}function iE(e,t){let i;for(const{hint:r}of e){const a=r==null?void 0:r[t];if(a!==void 0){if(i===void 0)i=a;else if(i!==a)return}}return i}function jJ(e){return{fill:iE(e,"fill"),stroke:iE(e,"stroke")}}function $J(e){return ra(e.fill)?iX:nX}function wy(e,{label:t,inset:i=0,insetTop:r=i,insetRight:a=i,insetBottom:o=i,insetLeft:h=i,round:u,nice:m,clamp:c,zero:d,align:A,padding:p,projection:v,facet:{label:g=t}={},...y}={}){const E={};for(const[_,S]of e){const x=y[_],C=qJ(_,S,{round:ws.get(_)===El?u:void 0,nice:m,clamp:c,zero:d,align:A,padding:p,projection:v,...x});if(C){let{label:w=_==="fx"||_==="fy"?g:t,percent:T,transform:O,inset:B,insetTop:P=B!==void 0?B:_==="y"?r:0,insetRight:L=B!==void 0?B:_==="x"?a:0,insetBottom:N=B!==void 0?B:_==="y"?o:0,insetLeft:F=B!==void 0?B:_==="x"?h:0}=x||{};if(O==null)O=void 0;else if(typeof O!="function")throw new Error("invalid scale transform; not a function");C.percent=!!T,C.label=w===void 0?KJ(S,C):w,C.transform=O,_==="x"||_==="fx"?(C.insetLeft=+F,C.insetRight=+L):(_==="y"||_==="fy")&&(C.insetTop=+P,C.insetBottom=+N),E[_]=C}}return E}function rE(e){const t={},i={scales:t};for(const[r,a]of Object.entries(e)){const{scale:o,type:h,interval:u,label:m}=a;t[r]=nZ(a),i[r]=o,o.type=h,u!=null&&(o.interval=u),m!=null&&(o.label=m)}return i}function XJ(e,t){const{x:i,y:r,fx:a,fy:o}=e,h=a||o?g4(t):t;a&&sE(a,h),o&&aE(o,h);const u=a||o?QB(e,t):t;i&&sE(i,u),r&&aE(r,u)}function KJ(e=[],t){let i;for(const{label:r}of e)if(r!==void 0){if(i===void 0)i=r;else if(i!==r)return}if(i!==void 0)return!_0(t)&&t.percent&&(i=`${i} (%)`),{inferred:!0,toString:()=>i}}function VB(e){return Math.sign($h(e.domain()))*Math.sign($h(e.range()))}function g4(e){const{marginTop:t,marginRight:i,marginBottom:r,marginLeft:a,width:o,height:h,facet:{marginTop:u,marginRight:m,marginBottom:c,marginLeft:d}}=e;return{marginTop:Math.max(t,u),marginRight:Math.max(i,m),marginBottom:Math.max(r,c),marginLeft:Math.max(a,d),width:o,height:h}}function QB({fx:e,fy:t},i){const{marginTop:r,marginRight:a,marginBottom:o,marginLeft:h,width:u,height:m}=g4(i);return{marginTop:r,marginRight:a,marginBottom:o,marginLeft:h,width:e?e.scale.bandwidth()+h+a:u,height:t?t.scale.bandwidth()+r+o:m,facet:{width:u,height:m}}}function sE(e,t){if(e.range===void 0){const{insetLeft:i,insetRight:r}=e,{width:a,marginLeft:o=0,marginRight:h=0}=t,u=o+i,m=a-h-r;e.range=[u,Math.max(u,m)],_0(e)||(e.range=zB(e)),e.scale.range(e.range)}HB(e)}function aE(e,t){if(e.range===void 0){const{insetTop:i,insetBottom:r}=e,{height:a,marginTop:o=0,marginBottom:h=0}=t,u=o+i,m=a-h-r;e.range=[Math.max(u,m),u],_0(e)?e.range.reverse():e.range=zB(e),e.scale.range(e.range)}HB(e)}function HB(e){e.round===void 0&&ZJ(e)&&YJ(e)<=30&&e.scale.round(!0)}function YJ({scale:e}){const t=e.domain().length,[i,r]=e.range(),a=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),h=t-a,u=Math.abs(r-i)/Math.max(1,h+o*2);return(u-Math.floor(u))*h}function zB(e){const t=e.scale.domain().length+WB(e);if(!(t>2))return e.range;const[i,r]=e.range;return Array.from({length:t},(a,o)=>i+o/(t-1)*(r-i))}function qJ(e,t=[],i={}){const r=JJ(e,t,i);if(i.type===void 0&&i.domain===void 0&&i.range===void 0&&i.interval==null&&e!=="fx"&&e!=="fy"&&_0({type:r})){const a=t.map(({value:o})=>o).filter(o=>o!==void 0);a.some(Ka)?Zc(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${uh(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${uh(r)}".`):a.some(Iq)?Zc(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${uh(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${uh(r)}".`):a.some(Tq)&&Zc(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${uh(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${uh(r)}".`)}switch(i.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":i=zp(t,i,Cl);break;case"identity":switch(ws.get(e)){case El:i=zp(t,i,Cl);break;case iA:i=zp(t,i,eZ);break}break;case"utc":case"time":i=zp(t,i,Mq);break}switch(r){case"diverging":return OJ(e,t,i);case"diverging-sqrt":return DJ(e,t,i);case"diverging-pow":return NB(e,t,i);case"diverging-log":return LJ(e,t,i);case"diverging-symlog":return PJ(e,t,i);case"categorical":case"ordinal":case z9:return HJ(e,t,i);case"cyclical":case"sequential":case"linear":return vJ(e,t,i);case"sqrt":return yJ(e,t,i);case"threshold":return m4(e,t,i);case"quantile":return _J(e,t,i);case"quantize":return CJ(e,t,i);case"pow":return LB(e,t,i);case"log":return bJ(e,t,i);case"symlog":return MJ(e,t,i);case"utc":return QJ(e,t,i);case"time":return VJ(e,t,i);case"point":return zJ(e,t,i);case"band":return WJ(e,t,i);case"identity":return wJ(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function uh(e){return typeof e=="symbol"?e.description:e}function oE(e){return typeof e=="string"?`${e}`.toLowerCase():e}const lE={toString:()=>"projection"};function JJ(e,t,{type:i,domain:r,range:a,scheme:o,pivot:h,projection:u}){if(i=oE(i),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&u!=null&&(i=lE);for(const c of t){const d=oE(c.type);if(d!==void 0){if(i===void 0)i=d;else if(i!==d)throw new Error(`scale incompatible with channel: ${i} !== ${d}`)}}if(i===lE)return;if(i!==void 0)return i;if(r===void 0&&!t.some(({value:c})=>c!==void 0))return;const m=ws.get(e);if(m===G9)return"sqrt";if(m===Q9||m===V9)return"linear";if(m===iA)return"ordinal";if((r||a||[]).length>2)return iv(m);if(r!==void 0){if($C(r))return iv(m);if(Ka(r))return"utc"}else{const c=t.map(({value:d})=>d).filter(d=>d!==void 0);if(c.some($C))return iv(m);if(c.some(Ka))return"utc"}if(m===_c){if(h!=null||gJ(o))return"diverging";if(fJ(o))return"categorical"}return"linear"}function iv(e){switch(e){case El:return"point";case _c:return z9;default:return"ordinal"}}function _0({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===z9}function WB({type:e}){return e==="threshold"}function ZJ({type:e}){return e==="point"||e==="band"}function Ro(e){if(e===void 0)return!0;const t=e.domain(),i=e(t[0]);for(let r=1,a=t.length;r<a;++r)if(e(t[r])-i)return!1;return!0}function zp(e,{domain:t,...i},r){var a;for(const o of e)o.value!==void 0&&(t===void 0&&(t=(a=o.value)==null?void 0:a.domain),o.value=r(o.value));return{domain:t===void 0?t:r(t),...i}}function eZ(e){return Xs(e,o4)}function tZ(e){return t=>{if(!ws.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function nZ({scale:e,type:t,domain:i,range:r,interpolate:a,interval:o,transform:h,percent:u,pivot:m}){if(t==="identity")return{type:"identity",apply:d=>d,invert:d=>d};const c=e.unknown?e.unknown():void 0;return{type:t,domain:e9(i),...r!==void 0&&{range:e9(r)},...h!==void 0&&{transform:h},...u&&{percent:u},...c!==void 0&&{unknown:c},...o!==void 0&&{interval:o},...a!==void 0&&{interpolate:a},...e.clamp&&{clamp:e.clamp()},...m!==void 0&&{pivot:m,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:d=>e(d),...e.invert&&{invert:d=>e.invert(d)}}}function iZ(e,t){const{fx:i,fy:r}=wy(e,t),a=i==null?void 0:i.scale.domain(),o=r==null?void 0:r.scale.domain();return a&&o?xG(a,o).map(([h,u],m)=>({x:h,y:u,i:m})):a?a.map((h,u)=>({x:h,i:u})):o?o.map((h,u)=>({y:h,i:u})):void 0}function rZ(e,{x:t,y:i}){return t&&(t=xy(t)),i&&(i=xy(i)),e.filter(t&&i?r=>t.has(r.x)&&i.has(r.y):t?r=>t.has(r.x):r=>i.has(r.y)).sort(t&&i?(r,a)=>t.get(r.x)-t.get(a.x)||i.get(r.y)-i.get(a.y):t?(r,a)=>t.get(r.x)-t.get(a.x):(r,a)=>i.get(r.y)-i.get(a.y))}function A4(e,{fx:t,fy:i}){const r=Mc(e),a=t==null?void 0:t.value,o=i==null?void 0:i.value;return t&&i?_h(r,h=>(h.fx=a[h[0]],h.fy=o[h[0]],h),h=>a[h],h=>o[h]):t?_h(r,h=>(h.fx=a[h[0]],h),h=>a[h]):_h(r,h=>(h.fy=o[h[0]],h),h=>o[h])}function sZ(e,t,{marginTop:i,marginLeft:r}){return e&&t?({x:a,y:o})=>`translate(${e(a)-r},${t(o)-i})`:e?({x:a})=>`translate(${e(a)-r},0)`:({y:a})=>`translate(0,${t(a)-i})`}function aZ(e){const t=[],i=new Uint32Array(tu(e,r=>r.length));for(const r of e){let a=0;for(const o of e)r!==o&&(i.set(o,a),a+=o.length);t.push(i.slice(0,a))}return t}const oZ=new Map([["top",rv],["right",ov],["bottom",sv],["left",av],["top-left",Wp(rv,av)],["top-right",Wp(rv,ov)],["bottom-left",Wp(sv,av)],["bottom-right",Wp(sv,ov)],["top-empty",uZ],["right-empty",fZ],["bottom-empty",hZ],["left-empty",dZ],["empty",mZ]]);function lZ(e){if(e==null)return null;const t=oZ.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const cE=new WeakMap;function xy(e){let t=cE.get(e);return t||cE.set(e,t=new s0(Xs(e,(i,r)=>[i,r]))),t}function mu(e,t){return xy(e).get(t)}function cZ(e,t,i){return t=qu(t),i=qu(i),e.find(r=>Object.is(qu(r.x),t)&&Object.is(qu(r.y),i))}function oA(e,t,i){var r;return(r=cZ(e,t,i))==null?void 0:r.empty}function rv(e,{y:t},{y:i}){return t?mu(t,i)===0:!0}function sv(e,{y:t},{y:i}){return t?mu(t,i)===t.length-1:!0}function av(e,{x:t},{x:i}){return t?mu(t,i)===0:!0}function ov(e,{x:t},{x:i}){return t?mu(t,i)===t.length-1:!0}function uZ(e,{y:t},{x:i,y:r,empty:a}){if(a)return!1;if(!t)return;const o=mu(t,r);if(o>0)return oA(e,i,t[o-1])}function hZ(e,{y:t},{x:i,y:r,empty:a}){if(a)return!1;if(!t)return;const o=mu(t,r);if(o<t.length-1)return oA(e,i,t[o+1])}function dZ(e,{x:t},{x:i,y:r,empty:a}){if(a)return!1;if(!t)return;const o=mu(t,i);if(o>0)return oA(e,t[o-1],r)}function fZ(e,{x:t},{x:i,y:r,empty:a}){if(a)return!1;if(!t)return;const o=mu(t,i);if(o<t.length-1)return oA(e,t[o+1],r)}function mZ(e,t,{empty:i}){return i}function Wp(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function lv(e,{channels:{fx:t,fy:i},groups:r}){return t&&i?e.map(({x:a,y:o})=>{var h;return((h=r.get(a))==null?void 0:h.get(o))??[]}):t?e.map(({x:a})=>r.get(a)??[]):e.map(({y:a})=>r.get(a)??[])}const jB=Math.PI,nc=2*jB,uE=.618;function pZ({projection:e,inset:t=0,insetTop:i=t,insetRight:r=t,insetBottom:a=t,insetLeft:o=t}={},h){if(e==null)return;if(typeof e.stream=="function")return e;let u,m,c="frame";if(Dl(e)){let w;if({type:e,domain:m,inset:w,insetTop:i=w!==void 0?w:i,insetRight:r=w!==void 0?w:r,insetBottom:a=w!==void 0?w:a,insetLeft:o=w!==void 0?w:o,clip:c=c,...u}=e,e==null)return}typeof e!="function"&&({type:e}=$B(e));const{width:d,height:A,marginLeft:p,marginRight:v,marginTop:g,marginBottom:y}=h,E=d-p-v-o-r,_=A-g-y-i-a;if(e=e==null?void 0:e({width:E,height:_,clip:c,...u}),e==null)return;c=gZ(c,p,g,d-v,A-y);let S=p+o,x=g+i,C;if(m!=null){const[[w,T],[O,B]]=Pg(e).bounds(m),P=Math.min(E/(O-w),_/(B-T));P>0?(S-=(P*(w+O)-E)/2,x-=(P*(T+B)-_)/2,C=iy({point(L,N){this.stream.point(L*P+S,N*P+x)}})):Zc("Warning: the projection could not be fit to the specified domain; using the default scale.")}return C??(C=S===0&&x===0?XB():iy({point(w,T){this.stream.point(w+S,T+x)}})),{stream:w=>e.stream(C.stream(c(w)))}}function $B(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Wo(gW,.7463,.4673);case"albers":return jp(Lx,.7463,.4673);case"azimuthal-equal-area":return Wo(AW,4,4);case"azimuthal-equidistant":return Wo(vW,nc,nc);case"conic-conformal":return jp(MW,nc,nc);case"conic-equal-area":return jp(U1,6.1702,2.9781);case"conic-equidistant":return jp(EW,7.312,3.6282);case"equal-earth":return Wo(xW,5.4133,2.6347);case"equirectangular":return Wo(_W,nc,jB);case"gnomonic":return Wo(SW,3.4641,3.4641);case"identity":return{type:XB};case"reflect-y":return{type:AZ};case"mercator":return Wo(yW,nc,nc);case"orthographic":return Wo(IW,2,2);case"stereographic":return Wo(TW,2,2);case"transverse-mercator":return Wo(BW,nc,nc);default:throw new Error(`unknown projection type: ${e}`)}}function gZ(e,t,i,r,a){if(e===!1||e==null||typeof e=="number")return o=>o;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return vx(t,i,r,a);default:throw new Error(`unknown projection clip type: ${e}`)}}function Wo(e,t,i){return{type:({width:r,height:a,rotate:o,precision:h=.15,clip:u})=>{var c,d,A;const m=e();return h!=null&&((c=m.precision)==null||c.call(m,h)),o!=null&&((d=m.rotate)==null||d.call(m,o)),typeof u=="number"&&((A=m.clipAngle)==null||A.call(m,u)),m.scale(Math.min(r/t,a/i)),m.translate([r/2,a/2]),m},aspectRatio:i/t}}function jp(e,t,i){const{type:r,aspectRatio:a}=Wo(e,t,i);return{type:o=>{const{parallels:h,domain:u,width:m,height:c}=o,d=r(o);return h!=null&&(d.parallels(h),u===void 0&&d.fitSize([m,c],{type:"Sphere"})),d},aspectRatio:a}}const XB=U9({stream:e=>e}),AZ=U9(iy({point(e,t){this.stream.point(e,-t)}}));function vZ(e,t,i,r){const a=i[e],o=i[t],h=a.length,u=i[e]=new Float64Array(h).fill(NaN),m=i[t]=new Float64Array(h).fill(NaN);let c;const d=r.stream({point(A,p){u[c]=A,m[c]=p}});for(c=0;c<h;++c)d.point(a[c],o[c])}function yZ({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Dl(e)&&(e=e.type),e!=null)}function bZ(e){if(typeof(e==null?void 0:e.stream)=="function")return uE;if(Dl(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=$B(e);if(t)return t}return uE}}function MZ(e){const t=[],i=[],r={scale:"x",value:t},a={scale:"y",value:i},o={point(h,u){t.push(h),i.push(u)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const h of e.value)Xu(h,o);return[r,a]}function v4(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:i}=e;return{document:t,clip:pB(i)}}function Is(e,{document:t}){return If(Tg(e).call(t.documentElement))}function _Z(e){let t,i;return(...r)=>(((i==null?void 0:i.length)!==r.length||i.some((a,o)=>a!==r[o]))&&(i=r,t=e(...r)),t)}const CZ=_Z(e=>new Intl.NumberFormat(e));function EZ(e="en-US"){const t=CZ(e);return i=>i!=null&&!isNaN(i)?t.format(i):void 0}function wZ(e){return cq(e,"Invalid Date")}function xZ(e="en-US"){const t=EZ(e);return i=>(i instanceof Date?wZ:typeof i=="number"?t:Da)(i)}const Yh=xZ(),ja=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let SZ=0;function Sy(){return`plot-clip-${++SZ}`}function IZ(e,{title:t,href:i,ariaLabel:r,ariaDescription:a,ariaHidden:o,target:h,fill:u,fillOpacity:m,stroke:c,strokeWidth:d,strokeOpacity:A,strokeLinejoin:p,strokeLinecap:v,strokeMiterlimit:g,strokeDasharray:y,strokeDashoffset:E,opacity:_,mixBlendMode:S,imageFilter:x,paintOrder:C,pointerEvents:w,shapeRendering:T,channels:O},{ariaLabel:B,fill:P="currentColor",fillOpacity:L,stroke:N="none",strokeOpacity:F,strokeWidth:z,strokeLinecap:G,strokeLinejoin:H,strokeMiterlimit:j,paintOrder:q}){P===null&&(u=null,m=null),N===null&&(c=null,A=null),ra(P)?!ra(N)&&(!ra(u)||O!=null&&O.fill)&&(N="none"):ra(N)&&(!ra(c)||O!=null&&O.stroke)&&(P="none");const[Q,k]=Lo(u,P),[K,W]=La(m,L),[J,se]=Lo(c,N),[ge,fe]=La(A,F),[me,xe]=La(_);t9(se)||(d===void 0&&(d=z),v===void 0&&(v=G),p===void 0&&(p=H),g===void 0&&!Dq(p)&&(g=j),!t9(k)&&C===void 0&&(C=q));const[ye,we]=La(d);return P!==null&&(e.fill=js(k,"currentColor"),e.fillOpacity=uf(W,1)),N!==null&&(e.stroke=js(se,"none"),e.strokeWidth=uf(we,1),e.strokeOpacity=uf(fe,1),e.strokeLinejoin=js(p,"miter"),e.strokeLinecap=js(v,"butt"),e.strokeMiterlimit=uf(g,4),e.strokeDasharray=js(y,"none"),e.strokeDashoffset=js(E,"0")),e.target=Da(h),e.ariaLabel=Da(B),e.ariaDescription=Da(a),e.ariaHidden=Da(o),e.opacity=uf(xe,1),e.mixBlendMode=js(S,"normal"),e.imageFilter=js(x,"none"),e.paintOrder=js(C,"normal"),e.pointerEvents=js(w,"auto"),e.shapeRendering=js(T,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:i,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:Q,scale:"auto",optional:!0},fillOpacity:{value:K,scale:"auto",optional:!0},stroke:{value:J,scale:"auto",optional:!0},strokeOpacity:{value:ge,scale:"auto",optional:!0},strokeWidth:{value:ye,optional:!0},opacity:{value:me,scale:"auto",optional:!0}}}function TZ(e,t){t&&e.filter(i=>$b(t[i])).append("title").call(RZ,t)}function BZ(e,t){t&&e.filter(([i])=>$b(t[i])).append("title").call(OZ,t)}function RZ(e,t){t&&e.text(i=>Yh(t[i]))}function OZ(e,t){t&&e.text(([i])=>Yh(t[i]))}function Ll(e,{target:t,tip:i},{ariaLabel:r,title:a,fill:o,fillOpacity:h,stroke:u,strokeOpacity:m,strokeWidth:c,opacity:d,href:A}){r&&Fi(e,"aria-label",p=>r[p]),o&&Fi(e,"fill",p=>o[p]),h&&Fi(e,"fill-opacity",p=>h[p]),u&&Fi(e,"stroke",p=>u[p]),m&&Fi(e,"stroke-opacity",p=>m[p]),c&&Fi(e,"stroke-width",p=>c[p]),d&&Fi(e,"opacity",p=>d[p]),A&&qB(e,p=>A[p],t),i||TZ(e,a)}function KB(e,{target:t,tip:i},{ariaLabel:r,title:a,fill:o,fillOpacity:h,stroke:u,strokeOpacity:m,strokeWidth:c,opacity:d,href:A}){r&&Fi(e,"aria-label",([p])=>r[p]),o&&Fi(e,"fill",([p])=>o[p]),h&&Fi(e,"fill-opacity",([p])=>h[p]),u&&Fi(e,"stroke",([p])=>u[p]),m&&Fi(e,"stroke-opacity",([p])=>m[p]),c&&Fi(e,"stroke-width",([p])=>c[p]),d&&Fi(e,"opacity",([p])=>d[p]),A&&qB(e,([p])=>A[p],t),i||BZ(e,a)}function DZ({ariaLabel:e,title:t,fill:i,fillOpacity:r,stroke:a,strokeOpacity:o,strokeWidth:h,opacity:u,href:m},{tip:c}){return[e,c?void 0:t,i,r,a,o,h,u,m].filter(d=>d!==void 0)}function LZ(e,t,i){const r=xg(e,a=>t[a]);return i===void 0&&r.size>1+e.length>>1&&Zc("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*YB(e,t,i,r){const{z:a}=i,{z:o}=r,h=DZ(r,i),u=[...t,...h];for(const m of o?LZ(e,o,a):[e]){let c,d;e:for(const A of m){for(const p of u)if(!ou(p[A])){d&&d.push(-1);continue e}if(c===void 0){d&&(yield d),c=h.map(p=>qu(p[A])),d=[A];continue}d.push(A);for(let p=0;p<h.length;++p)if(qu(h[p][A])!==c[p]){yield d,c=h.map(g=>qu(g[A])),d=[A];continue e}}d&&(yield d)}}function PZ(e,t,i,r){let a;const{clip:o=r.clip}=t;switch(o){case"frame":{const{width:h,height:u,marginLeft:m,marginRight:c,marginTop:d,marginBottom:A}=i,p=Sy();a=`url(#${p})`,e=Is("svg:g",r).call(v=>v.append("svg:clipPath").attr("id",p).append("rect").attr("x",m).attr("y",d).attr("width",h-c-m).attr("height",u-d-A)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:h}=r;if(!h)throw new Error('the "sphere" clip option requires a projection');const u=Sy();a=`url(#${u})`,e.append("clipPath").attr("id",u).append("path").attr("d",Pg(h)({type:"Sphere"}));break}}Fi(e,"aria-label",t.ariaLabel),Fi(e,"aria-description",t.ariaDescription),Fi(e,"aria-hidden",t.ariaHidden),Fi(e,"clip-path",a)}function go(e,t,i,r){PZ(e,t,i,r),Fi(e,"fill",t.fill),Fi(e,"fill-opacity",t.fillOpacity),Fi(e,"stroke",t.stroke),Fi(e,"stroke-width",t.strokeWidth),Fi(e,"stroke-opacity",t.strokeOpacity),Fi(e,"stroke-linejoin",t.strokeLinejoin),Fi(e,"stroke-linecap",t.strokeLinecap),Fi(e,"stroke-miterlimit",t.strokeMiterlimit),Fi(e,"stroke-dasharray",t.strokeDasharray),Fi(e,"stroke-dashoffset",t.strokeDashoffset),Fi(e,"shape-rendering",t.shapeRendering),Fi(e,"filter",t.imageFilter),Fi(e,"paint-order",t.paintOrder);const{pointerEvents:a=r.pointerSticky===!1?"none":void 0}=t;Fi(e,"pointer-events",a)}function Ao(e,t){NZ(e,"mix-blend-mode",t.mixBlendMode),Fi(e,"opacity",t.opacity)}function qB(e,t,i){e.each(function(r){const a=t(r);if(a!=null){const o=this.ownerDocument.createElementNS(Nh.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Nh.xlink,"href",a),i!=null&&o.setAttribute("target",i),this.parentNode.insertBefore(o,this).appendChild(this)}})}function Fi(e,t,i){i!=null&&e.attr(t,i)}function NZ(e,t,i){i!=null&&e.style(t,i)}function ka(e,t,{x:i,y:r},a=ja,o=ja){a+=t.dx,o+=t.dy,i!=null&&i.bandwidth&&(a+=i.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(a||o)&&e.attr("transform",`translate(${a},${o})`)}function js(e,t){if((e=Da(e))!==t)return e}function uf(e,t){if((e=Yr(e))!==t)return e}const FZ=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function y4(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!FZ.test(e))throw new Error(`invalid class name: ${e}`);return e}function b4(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const i of e)Object.assign(i.style,t)}function W9({frameAnchor:e},{width:t,height:i,marginTop:r,marginRight:a,marginBottom:o,marginLeft:h}){return[/left$/.test(e)?h:/right$/.test(e)?t-a:(h+t-a)/2,/^top/.test(e)?r:/^bottom/.test(e)?i-o:(r+i-o)/2]}class Ca{constructor(t,i={},r={},a){const{facet:o="auto",facetAnchor:h,fx:u,fy:m,sort:c,dx:d=0,dy:A=0,margin:p=0,marginTop:v=p,marginRight:g=p,marginBottom:y=p,marginLeft:E=p,clip:_=a==null?void 0:a.clip,channels:S,tip:x,render:C}=r;if(this.data=t,this.sort=Xh(c)?c:null,this.initializer=Kh(r).initializer,this.transform=this.initializer?r.transform:M0(r).transform,o===null||o===!1?this.facet=null:(this.facet=No(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=t===u1&&typeof u=="string"?[u]:u,this.fy=t===u1&&typeof m=="string"?[m]:m),this.facetAnchor=lZ(h),i=mB(i),S!==void 0&&(i={...kZ(S),...i}),a!==void 0&&(i={...IZ(this,r,a),...i}),this.channels=Object.fromEntries(Object.entries(i).map(([w,T])=>{if(eA(T.value)){const{value:O,label:B=T.label,scale:P=T.scale}=T.value;T={...T,label:B,scale:P,value:O}}if(t===u1&&typeof T.value=="string"){const{value:O}=T;T={...T,value:[O]}}return[w,T]}).filter(([w,{value:T,optional:O}])=>{if(T!=null)return!0;if(O)return!1;throw new Error(`missing channel value: ${w}`)})),this.dx=+d,this.dy=+A,this.marginTop=+v,this.marginRight=+g,this.marginBottom=+y,this.marginLeft=+E,this.clip=pB(_),this.tip=UZ(x),this.facet==="super"){if(u||m)throw new Error("super-faceting cannot use fx or fy");for(const w in this.channels){const{scale:T}=i[w];if(!(T!=="x"&&T!=="y"))throw new Error("super-faceting cannot use x or y")}}C!=null&&(this.render=ag(C,this.render))}initialize(t,i,r){let a=po(this.data);t===void 0&&a!=null&&(t=[Mc(a)]);const o=t;this.transform!=null&&({facets:t,data:a}=this.transform(a,t,r),a=po(a)),t!==void 0&&(t.original=o);const h=oJ(this.channels,a);return this.sort!=null&&cJ(a,t,h,i,this.sort),{data:a,facets:t,channels:h}}filter(t,i,r){for(const a in i){const{filter:o=ou}=i[a];if(o!==null){const h=r[a];t=t.filter(u=>o(h[u]))}}return t}project(t,i,r){for(const a in t)if(t[a].scale==="x"&&/^x|x$/.test(a)){const o=a.replace(/^x|x$/,"y");o in t&&t[o].scale==="y"&&vZ(a,o,i,r.projection)}}scale(t,i,r){const a=lJ(t,i);return r.projection&&this.project(t,a,r),a}}function lA(...e){return e.plot=Ca.prototype.plot,e}function ag(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(i,r,a,o,h,u){return e.call(this,i,r,a,o,h,(m,c,d,A,p)=>t.call(this,m,c,d,A,p,u))}}function kZ(e){return Object.fromEntries(Object.entries(mB(e)).map(([t,i])=>(i=typeof i=="string"?{value:i,label:t}:dd(i),i.filter===void 0&&i.scale==null&&(i={...i,filter:null}),[t,i])))}function UZ(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?No(e,"tip",["x","y","xy"]):e}function fd(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:Dl(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}function GZ(e,t,i={}){let r=.5-ja,a=.5+ja,o=.5+ja,h=.5-ja;for(const{marginTop:y,marginRight:E,marginBottom:_,marginLeft:S}of t)y>r&&(r=y),E>a&&(a=E),_>o&&(o=_),S>h&&(h=S);let{margin:u,marginTop:m=u!==void 0?u:r,marginRight:c=u!==void 0?u:a,marginBottom:d=u!==void 0?u:o,marginLeft:A=u!==void 0?u:h}=i;m=+m,c=+c,d=+d,A=+A;let{width:p=640,height:v=VZ(e,i,{width:p,marginTopDefault:r,marginRightDefault:a,marginBottomDefault:o,marginLeftDefault:h})+Math.max(0,m-r+d-o)}=i;p=+p,v=+v;const g={width:p,height:v,marginTop:m,marginRight:c,marginBottom:d,marginLeft:A};if(e.fx||e.fy){let{margin:y,marginTop:E=y!==void 0?y:m,marginRight:_=y!==void 0?y:c,marginBottom:S=y!==void 0?y:d,marginLeft:x=y!==void 0?y:A}=i.facet??{};E=+E,_=+_,S=+S,x=+x,g.facet={marginTop:E,marginRight:_,marginBottom:S,marginLeft:x}}return g}function VZ({x:e,y:t,fy:i,fx:r},{projection:a,aspectRatio:o},{width:h,marginTopDefault:u,marginRightDefault:m,marginBottomDefault:c,marginLeftDefault:d}){const A=i?i.scale.domain().length:1,p=bZ(a);if(p){const g=r?r.scale.domain().length:1,y=(1.1*A-.1)/(1.1*g-.1)*p,E=Math.max(.1,Math.min(10,y));return Math.round((h-d-m)*E+u+c)}const v=t?_0(t)?t.scale.domain().length:Math.max(7,17/A):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const g=hE("y",t)/(hE("x",e)*o),y=r?r.scale.bandwidth():1,E=i?i.scale.bandwidth():1,_=y*(h-d-m)-e.insetLeft-e.insetRight;return(g*_+t.insetTop+t.insetBottom)/E+u+c}return!!(t||i)*Math.max(1,Math.min(60,v*A))*20+!!r*30+60}function hE(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:i,domain:r}=t;let a;switch(i){case"linear":case"utc":case"time":a=Number;break;case"pow":{const u=t.scale.exponent();a=m=>Math.pow(m,u);break}case"log":a=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${i}`)}const[o,h]=Ps(r);return Math.abs(a(h)-a(o))}const dE=new WeakMap;function M4(e,t,{x:i,y:r,px:a,py:o,maxRadius:h=40,channels:u,render:m,...c}={}){return h=+h,a!=null&&(i??(i=null),u={...u,px:{value:a,scale:"x"}}),o!=null&&(r??(r=null),u={...u,py:{value:o,scale:"y"}}),{x:i,y:r,channels:u,...c,render:ag(function(d,A,p,v,g,y){g={...g,pointerSticky:!1};const E=g.ownerSVGElement,{data:_}=g.getMarkState(this);let S=dE.get(E);S||dE.set(E,S={sticky:!1,roots:[],renders:[]});let x=S.renders.push(se)-1;const{x:C,y:w,fx:T,fy:O}=A;let B=T?T(d.fx)-v.marginLeft:0,P=O?O(d.fy)-v.marginTop:0;C!=null&&C.bandwidth&&(B+=C.bandwidth()/2),w!=null&&w.bandwidth&&(P+=w.bandwidth()/2);const L=d.fi!=null;let N;if(L){let xe=S.facetStates;xe||(S.facetStates=xe=new Map),N=xe.get(this),N||xe.set(this,N=new Map)}const[F,z]=W9(this,v),{px:G,py:H}=p,j=G?xe=>G[xe]:JB(p,F),q=H?xe=>H[xe]:ZB(p,z);let Q,k,K,W;function J(xe,ye){if(L)if(W&&(W=cancelAnimationFrame(W)),xe==null)N.delete(d.fi);else{N.set(d.fi,ye),W=requestAnimationFrame(()=>{W=null;for(const[we,Ee]of N)if(Ee<ye||Ee===ye&&we<d.fi){xe=null;break}se(xe)});return}se(xe)}function se(xe){if(Q===xe&&K===S.sticky)return;Q=xe,K=g.pointerSticky=S.sticky;const ye=Q==null?[]:[Q];L&&(ye.fx=d.fx,ye.fy=d.fy,ye.fi=d.fi);const we=y(ye,A,p,v,g);if(k){if(L){const Ee=k.parentNode,He=k.getAttribute("transform"),Ae=we.getAttribute("transform");He?we.setAttribute("transform",He):we.removeAttribute("transform"),Ae?Ee.setAttribute("transform",Ae):Ee.removeAttribute("transform"),we.removeAttribute("aria-label"),we.removeAttribute("aria-description"),we.removeAttribute("aria-hidden")}k.replaceWith(we)}return S.roots[x]=k=we,Q==null&&(N==null?void 0:N.size)>1||g.dispatchValue(Q==null?null:_[Q]),we}function ge(xe){if(S.sticky||xe.pointerType==="mouse"&&xe.buttons===1)return;let[ye,we]=DQ(xe);ye-=B,we-=P;const Ee=ye<v.marginLeft||ye>v.width-v.marginRight?1:e,He=we<v.marginTop||we>v.height-v.marginBottom?1:t;let Ae=null,Ke=h*h;for(const Ue of d){const ct=Ee*(j(Ue)-ye),vt=He*(q(Ue)-we),dt=ct*ct+vt*vt;dt<=Ke&&(Ae=Ue,Ke=dt)}if(Ae!=null&&(e!==1||t!==1)){const Ue=j(Ae)-ye,ct=q(Ae)-we;Ke=Ue*Ue+ct*ct}J(Ae,Ke)}function fe(xe){xe.pointerType==="mouse"&&Q!=null&&(S.sticky&&S.roots.some(ye=>ye==null?void 0:ye.contains(xe.target))||(S.sticky?(S.sticky=!1,S.renders.forEach(ye=>ye(null))):(S.sticky=!0,se(Q)),xe.stopImmediatePropagation()))}function me(xe){xe.pointerType==="mouse"&&(S.sticky||J(null))}return E.addEventListener("pointerenter",ge),E.addEventListener("pointermove",ge),E.addEventListener("pointerdown",fe),E.addEventListener("pointerleave",me),se(null)},m)}}function QZ(e){return M4(1,1,e)}function HZ(e){return M4(1,.01,e)}function fE(e){return M4(.01,1,e)}function JB({x1:e,x2:t,x:i=e},r){return e&&t?a=>(e[a]+t[a])/2:i?a=>i[a]:()=>r}function ZB({y1:e,y2:t,y:i=e},r){return e&&t?a=>(e[a]+t[a])/2:i?a=>i[a]:()=>r}function eR(e){return _0(e)&&e.interval===void 0?void 0:"tabular-nums"}function zZ(e,t){let{label:i=e.label,tickSize:r=6,width:a=240,height:o=44+r,marginTop:h=18,marginRight:u=0,marginBottom:m=16+r,marginLeft:c=0,style:d,ticks:A=(a-c-u)/64,tickFormat:p,fontVariant:v=eR(e),round:g=!0,opacity:y,className:E}=t;const _=v4(t);E=y4(E),y=La(y)[1],p===null&&(p=()=>null);const S=Is("svg",_).attr("class",`${E}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",a).attr("height",o).attr("viewBox",`0 0 ${a} ${o}`).call(F=>F.append("style").text(`:where(.${E}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${E}-ramp text) {
  white-space: pre;
}`)).call(b4,d);let x=F=>F.selectAll(".tick line").attr("y1",h+m-o),C;const w=g?(F,z)=>F.rangeRound(z):(F,z)=>F.range(z),{type:T,domain:O,range:B,interpolate:P,scale:L,pivot:N}=e;if(P){const F=B===void 0?P:Og(P.length===1?p4(P):P,B);C=w(L.copy(),Zo(Ma(c,a-u),Math.min(O.length+(N!==void 0),B===void 0?1/0:B.length)));const z=256,G=_.document.createElement("canvas");G.width=z,G.height=1;const H=G.getContext("2d");for(let j=0,q=z-1;j<z;++j)H.fillStyle=F(j/q),H.fillRect(j,0,1,1);S.append("image").attr("opacity",y).attr("x",c).attr("y",h).attr("width",a-c-u).attr("height",o-h-m).attr("preserveAspectRatio","none").attr("xlink:href",G.toDataURL())}else if(T==="threshold"){const F=O,z=p===void 0?G=>G:typeof p=="string"?od(p):p;C=w(S9().domain([-1,B.length-1]),[c,a-u]),S.append("g").attr("fill-opacity",y).selectAll().data(B).enter().append("rect").attr("x",(G,H)=>C(H-1)).attr("y",h).attr("width",(G,H)=>C(H)-C(H-1)).attr("height",o-h-m).attr("fill",G=>G),A=Xs(F,(G,H)=>H),p=G=>z(F[G],G)}else C=w(Ug().domain(O),[c,a-u]),S.append("g").attr("fill-opacity",y).selectAll().data(O).enter().append("rect").attr("x",C).attr("y",h).attr("width",Math.max(0,C.bandwidth()-1)).attr("height",o-h-m).attr("fill",L),x=()=>{};return S.append("g").attr("transform",`translate(0,${o-m})`).call(YG(C).ticks(Array.isArray(A)?null:A,typeof p=="string"?p:void 0).tickFormat(typeof p=="function"?p:void 0).tickSize(r).tickValues(Array.isArray(A)?A:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",js(v,"normal")).call(x).call(F=>F.select(".domain").remove()),i!==void 0&&S.append("text").attr("x",c).attr("y",h-6).attr("fill","currentColor").attr("font-weight","bold").text(i),S.node()}const tR=Math.PI/180;function j9(e,{marker:t,markerStart:i=t,markerMid:r=t,markerEnd:a=t}={}){e.markerStart=cv(i),e.markerMid=cv(r),e.markerEnd=cv(a)}function cv(e){if(e==null||e===!1)return null;if(e===!0)return pE;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return mE("auto");case"arrow-reverse":return mE("auto-start-reverse");case"dot":return WZ;case"circle":case"circle-fill":return pE;case"circle-stroke":return jZ;case"tick":return uv("auto");case"tick-x":return uv(90);case"tick-y":return uv(0)}throw new Error(`invalid marker: ${e}`)}function mE(e){return(t,i)=>Is("svg:marker",i).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function WZ(e,t){return Is("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(i=>i.append("circle").attr("r",2.5)).node()}function pE(e,t){return Is("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(i=>i.append("circle").attr("r",3)).node()}function jZ(e,t){return Is("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(i=>i.append("circle").attr("r",3)).node()}function uv(e){return(t,i)=>Is("svg:marker",i).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let $Z=0;function cA(e,t,{stroke:i},r){return nR(e,t,i&&(a=>i[a]),r)}function XZ(e,t,{stroke:i},r){return nR(e,t,i&&(([a])=>i[a]),r)}function nR(e,{markerStart:t,markerMid:i,markerEnd:r,stroke:a},o=()=>a,h){const u=new Map;function m(c){return function(d){const A=o(d);let p=u.get(c);p||u.set(c,p=new Map);let v=p.get(A);if(!v){const g=this.parentNode.insertBefore(c(A,h),this),y=`plot-marker-${++$Z}`;g.setAttribute("id",y),p.set(A,v=`url(#${y})`)}return v}}t&&e.attr("marker-start",m(t)),i&&e.attr("marker-mid",m(i)),r&&e.attr("marker-end",m(r))}function uA({inset:e,insetLeft:t,insetRight:i,...r}={}){return[t,i]=iR(e,t,i),{inset:e,insetLeft:t,insetRight:i,...r}}function _4({inset:e,insetTop:t,insetBottom:i,...r}={}){return[t,i]=iR(e,t,i),{inset:e,insetTop:t,insetBottom:i,...r}}function iR(e,t,i){return e===void 0&&t===void 0&&i===void 0?ja?[1,0]:[.5,.5]:[t,i]}function rR(e,{interval:t}){return e={...dd(e)},e.interval=r4(e.interval===void 0?t:e.interval),e}function hA(e,t,i,r){const{[e]:a,[`${e}1`]:o,[`${e}2`]:h}=i,{value:u,interval:m}=rR(a,i);if(u==null||m==null&&!r)return i;const c=du(a);if(m==null){let v;const g={transform:y=>v||(v=as(y,u)),label:c};return{...i,[e]:void 0,[`${e}1`]:o===void 0?g:o,[`${e}2`]:h===void 0&&!(o===h&&r)?g:h}}let d,A;function p(v){return A!==void 0&&v===d?A:A=Xs(as(d=v,u),g=>m.floor(g))}return t({...i,[e]:void 0,[`${e}1`]:o===void 0?{transform:p,label:c}:o,[`${e}2`]:h===void 0?{transform:v=>p(v).map(g=>m.offset(g)),label:c}:h})}function sR(e,t,i){const{[e]:r}=i,{value:a,interval:o}=rR(r,i);return a==null||o==null?i:t({...i,[e]:{label:du(r),transform:h=>{const u=Xs(as(h,a),c=>o.floor(c)),m=u.map(c=>o.offset(c));return u.map(Ka(u)?(c,d)=>c==null||isNaN(c=+c)||(d=m[d],d==null)||isNaN(d=+d)?void 0:new Date((c+d)/2):(c,d)=>c==null||(d=m[d],d==null)?NaN:(+c+ +d)/2)}}})}function aR(e={}){return hA("x",uA,e,!0)}function KZ(e={}){return hA("y",_4,e,!0)}function oR(e={}){return hA("x",uA,e)}function lR(e={}){return hA("y",_4,e)}function YZ(e={}){return sR("x",uA,e)}function qZ(e={}){return sR("y",_4,e)}const cR={ariaLabel:"rule",fill:null,stroke:"currentColor"};class JZ extends Ca{constructor(t,i={}){const{x:r,y1:a,y2:o,inset:h=0,insetTop:u=h,insetBottom:m=h}=i;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:a,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},fd(i,"x"),cR),this.insetTop=Yr(u),this.insetBottom=Yr(m),j9(this,i)}render(t,i,r,a,o){const{x:h,y:u}=i,{x:m,y1:c,y2:d}=r,{width:A,height:p,marginTop:v,marginRight:g,marginLeft:y,marginBottom:E}=a,{insetTop:_,insetBottom:S}=this;return Is("svg:g",o).call(go,this,a,o).call(ka,this,{x:m&&h},ja,0).call(x=>x.selectAll().data(t).enter().append("line").call(Ao,this).attr("x1",m?C=>m[C]:(y+A-g)/2).attr("x2",m?C=>m[C]:(y+A-g)/2).attr("y1",c&&!Ro(u)?C=>c[C]+_:v+_).attr("y2",d&&!Ro(u)?u.bandwidth?C=>d[C]+u.bandwidth()-S:C=>d[C]-S:p-E-S).call(Ll,this,r).call(cA,this,r,o)).node()}}class ZZ extends Ca{constructor(t,i={}){const{x1:r,x2:a,y:o,inset:h=0,insetRight:u=h,insetLeft:m=h}=i;super(t,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:a,scale:"x",optional:!0}},fd(i,"y"),cR),this.insetRight=Yr(u),this.insetLeft=Yr(m),j9(this,i)}render(t,i,r,a,o){const{x:h,y:u}=i,{y:m,x1:c,x2:d}=r,{width:A,height:p,marginTop:v,marginRight:g,marginLeft:y,marginBottom:E}=a,{insetLeft:_,insetRight:S}=this;return Is("svg:g",o).call(go,this,a,o).call(ka,this,{y:m&&u},0,ja).call(x=>x.selectAll().data(t).enter().append("line").call(Ao,this).attr("x1",c&&!Ro(h)?C=>c[C]+_:y+_).attr("x2",d&&!Ro(h)?h.bandwidth?C=>d[C]+h.bandwidth()-S:C=>d[C]-S:A-g-S).attr("y1",m?C=>m[C]:(v+p-E)/2).attr("y2",m?C=>m[C]:(v+p-E)/2).call(Ll,this,r).call(cA,this,r,o)).node()}}function fa(e,t){let{x:i=As,y:r,y1:a,y2:o,...h}=lR(t);return[a,o]=uR(r,a,o),new JZ(e,{...h,x:i,y1:a,y2:o})}function Ss(e,t){let{y:i=As,x:r,x1:a,x2:o,...h}=oR(t);return[a,o]=uR(r,a,o),new ZZ(e,{...h,y:i,x1:a,x2:o})}function uR(e,t,i){if(e==null){if(t===void 0){if(i!==void 0)return[0,i]}else if(i===void 0)return[0,t]}else{if(t===void 0)return i===void 0?[0,e]:[e,i];if(i===void 0)return[e,t]}return[t,i]}function C4(e,...t){let i=t.length;for(let r=0,a=!0;r<i;++r)typeof t[r]!="function"&&(a&&(e=e.slice(),a=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--i);return r=>{let a=e[0];for(let o=0;o<i;++o)a+=t[o](r)+e[o+1];return a}}const eee={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},hR="­";class E4 extends Ca{constructor(t,i={}){const{x:r,y:a,text:o=fu(t)&&fB(t)?As:cd,frameAnchor:h,textAnchor:u=/right$/i.test(h)?"end":/left$/i.test(h)?"start":"middle",lineAnchor:m=/^top/i.test(h)?"top":/^bottom/i.test(h)?"bottom":"middle",lineHeight:c=1,lineWidth:d=1/0,textOverflow:A,monospace:p,fontFamily:v=p?"ui-monospace, monospace":void 0,fontSize:g,fontStyle:y,fontVariant:E,fontWeight:_,rotate:S}=i,[x,C]=La(S,0),[w,T]=aee(g);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},fontSize:{value:w,optional:!0},rotate:{value:Sq(x),optional:!0},text:{value:o,filter:$b,optional:!0}},i,eee),this.rotate=C,this.textAnchor=js(u,"middle"),this.lineAnchor=No(m,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+d,this.textOverflow=dR(A),this.monospace=!!p,this.fontFamily=Da(v),this.fontSize=T,this.fontStyle=Da(y),this.fontVariant=Da(E),this.fontWeight=Da(_),this.frameAnchor=nA(h),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${d}`);this.splitLines=mR(this),this.clipLine=pR(this)}render(t,i,r,a,o){const{x:h,y:u}=i,{x:m,y:c,rotate:d,text:A,title:p,fontSize:v}=r,{rotate:g}=this,[y,E]=W9(this,a);return Is("svg:g",o).call(go,this,a,o).call(fR,this,A,a).call(ka,this,{x:m&&h,y:c&&u}).call(_=>_.selectAll().data(t).enter().append("text").call(Ao,this).call(tee,this,A,p).attr("transform",C4`translate(${m?S=>m[S]:y},${c?S=>c[S]:E})${d?S=>` rotate(${d[S]})`:g?` rotate(${g})`:""}`).call(Fi,"font-size",v&&(S=>v[S])).call(Ll,this,r)).node()}}function dR(e){return e==null?null:No(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function tee(e,t,i,r){if(!i)return;const{lineAnchor:a,lineHeight:o,textOverflow:h,splitLines:u,clipLine:m}=t;e.each(function(c){const d=u(Yh(i[c])??"").map(m),A=d.length,p=a==="top"?.71:a==="bottom"?1-A:(164-A*100)/200;if(A>1){let v=0;for(let g=0;g<A;++g){if(++v,!d[g])continue;const y=this.ownerDocument.createElementNS(Nh.svg,"tspan");y.setAttribute("x",0),g===v-1?y.setAttribute("y",`${(p+g)*o}em`):y.setAttribute("dy",`${v*o}em`),y.textContent=d[g],this.appendChild(y),v=0}}else p&&this.setAttribute("y",`${p*o}em`),this.textContent=d[0];if(h&&!r&&d[0]!==i[c]){const v=this.ownerDocument.createElementNS(Nh.svg,"title");v.textContent=i[c],this.appendChild(v)}})}function Na(e,{x:t,y:i,...r}={}){return r.frameAnchor===void 0&&([t,i]=ud(t,i)),new E4(e,{...r,x:t,y:i})}function nee(e,{x:t=As,...i}={}){return new E4(e,qZ({...i,x:t}))}function iee(e,{y:t=As,...i}={}){return new E4(e,YZ({...i,y:t}))}function fR(e,t,i){Fi(e,"text-anchor",t.textAnchor),Fi(e,"font-family",t.fontFamily),Fi(e,"font-size",t.fontSize),Fi(e,"font-style",t.fontStyle),Fi(e,"font-variant",t.fontVariant===void 0?ree(i):t.fontVariant),Fi(e,"font-weight",t.fontWeight)}function ree(e){return e&&(Bq(e)||Ka(e))?"tabular-nums":void 0}const see=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function aee(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),see.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function oee(e,t,i){const r=[];let a,o=0;for(const[h,u,m]of lee(e)){if(a===void 0&&(a=h),o>a&&i(e,a,u)>t&&(r.push(e.slice(a,o)+(e[o-1]===hR?"-":"")),a=h),m){r.push(e.slice(a,u)),a=void 0;continue}o=u}return r}function*lee(e){let t=0,i=0;const r=e.length;for(;i<r;){let a=1;switch(e[i]){case hR:case"-":++i,yield[t,i,!1],t=i;break;case" ":for(yield[t,i,!1];e[++i]===" ";);t=i;break;case"\r":e[i+1]===`
`&&++a;case`
`:yield[t,i,!0],i+=a,t=i;break;default:++i;break}}yield[t,i,!0]}const gE={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function w4(e,t=0,i=e.length){let r=0;for(let a=t;a<i;a=md(e,a))r+=gE[e[a]]??(AR(e,a)?120:gE.e);return r}function x4(e,t=0,i=e.length){let r=0;for(let a=t;a<i;a=md(e,a))r+=AR(e,a)?126:63;return r}function mR({monospace:e,lineWidth:t,textOverflow:i}){if(i!=null||t==1/0)return o=>o.split(/\r\n?|\n/g);const r=e?x4:w4,a=t*100;return o=>oee(o,a,r)}function pR({monospace:e,lineWidth:t,textOverflow:i}){if(i==null||t==1/0)return o=>o;const r=e?x4:w4,a=t*100;switch(i){case"clip-start":return o=>vE(o,a,r,"");case"clip-end":return o=>AE(o,a,r,"");case"ellipsis-start":return o=>vE(o,a,r,wh);case"ellipsis-middle":return o=>cee(o,a,r,wh);case"ellipsis-end":return o=>AE(o,a,r,wh)}}const wh="…";function qh(e,t,i,r){const a=[];let o=0;for(let h=0,u=0,m=e.length;h<m;h=u){u=md(e,h);const c=i(e,h,u);if(o+c>t){for(o+=r;o>t&&h>0;)u=h,h=a.pop(),o-=i(e,h,u);return[h,t-o]}o+=c,a.push(h)}return[-1,0]}function AE(e,t,i,r){e=e.trim();const a=i(r),[o]=qh(e,t,i,a);return o<0?e:e.slice(0,o).trimEnd()+r}function cee(e,t,i,r){e=e.trim();const a=i(e);if(a<=t)return e;const o=i(r)/2,[h,u]=qh(e,t/2,i,o),[m]=qh(e,a-t/2-u+o,i,-o);return m<0?r:e.slice(0,h).trimEnd()+r+e.slice(md(e,m)).trimStart()}function vE(e,t,i,r){e=e.trim();const a=i(e);if(a<=t)return e;const o=i(r),[h]=qh(e,a-t+o,i,-o);return h<0?r:r+e.slice(md(e,h)).trimStart()}const Iy=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,yE=new RegExp("\\p{Extended_Pictographic}","uy");function md(e,t){return t+=uee(e,t)?2:1,dee(e,t)&&(t=Iy.lastIndex),hee(e,t)?md(e,t+1):t}function gR(e,t){return e.charCodeAt(t)<128}function uee(e,t){const i=e.charCodeAt(t);if(i>=55296&&i<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function hee(e,t){return e.charCodeAt(t)===8205}function dee(e,t){return gR(e,t)?!1:(Iy.lastIndex=t,Iy.test(e))}function AR(e,t){return gR(e,t)?!1:(yE.lastIndex=t,yE.test(e))}const fee={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},vR=3.5,mee=vR*5,yR={draw(e,t,i){const r=t*i/mee;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},pee={draw(e,t,i){e.moveTo(-i,0),e.lineTo(0,-t),e.lineTo(i,0)}},gee=new Map([["arrow",yR],["spike",pee]]);function Aee(e){return e&&typeof e.draw=="function"}function vee(e){if(Aee(e))return e;const t=gee.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class bR extends Ca{constructor(t,i={}){const{x:r,y:a,r:o=vR,length:h,rotate:u,shape:m=yR,anchor:c="middle",frameAnchor:d}=i,[A,p]=La(h,12),[v,g]=La(u,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},length:{value:A,scale:"length",optional:!0},rotate:{value:v,optional:!0}},i,fee),this.r=+o,this.length=p,this.rotate=g,this.shape=vee(m),this.anchor=No(c,"anchor",["start","middle","end"]),this.frameAnchor=nA(d)}render(t,i,r,a,o){const{x:h,y:u}=i,{x:m,y:c,length:d,rotate:A}=r,{length:p,rotate:v,anchor:g,shape:y,r:E}=this,[_,S]=W9(this,a);return Is("svg:g",o).call(go,this,a,o).call(ka,this,{x:m&&h,y:c&&u}).call(x=>x.selectAll().data(t).enter().append("path").call(Ao,this).attr("transform",C4`translate(${m?C=>m[C]:_},${c?C=>c[C]:S})${A?C=>` rotate(${A[C]})`:v?` rotate(${v})`:""}${g==="start"?"":g==="end"?d?C=>` translate(0,${d[C]})`:` translate(0,${p})`:d?C=>` translate(0,${d[C]/2})`:` translate(0,${p/2})`}`).attr("d",d?C=>{const w=Kc();return y.draw(w,d[C],E),w}:(()=>{const C=Kc();return y.draw(C,p,E),C})()).call(Ll,this,r)).node()}}function yee(e,t={}){const{x:i=As,...r}=t;return new bR(e,{...r,x:i})}function bee(e,t={}){const{y:i=As,...r}=t;return new bR(e,{...r,y:i})}function pu(e,t){return arguments.length<2&&!fu(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function dA({anchor:e}={},t){return e===void 0?t[0]:No(e,"anchor",t)}function MR(e){return dA(e,["left","right"])}function _R(e){return dA(e,["right","left"])}function CR(e){return dA(e,["bottom","top"])}function ER(e){return dA(e,["top","bottom"])}function lu(){const[e,t]=pu(...arguments);return xR("y",MR(t),e,t)}function Mee(){const[e,t]=pu(...arguments);return xR("fy",_R(t),e,t)}function wR(){const[e,t]=pu(...arguments);return SR("x",CR(t),e,t)}function _ee(){const[e,t]=pu(...arguments);return SR("fx",ER(t),e,t)}function xR(e,t,i,{color:r="currentColor",opacity:a=1,stroke:o=r,strokeOpacity:h=a,strokeWidth:u=1,fill:m=r,fillOpacity:c=a,textAnchor:d,textStroke:A,textStrokeOpacity:p,textStrokeWidth:v,tickSize:g=e==="y"?6:0,tickPadding:y,tickRotate:E,x:_,margin:S,marginTop:x=S===void 0?20:S,marginRight:C=S===void 0?t==="right"?40:0:S,marginBottom:w=S===void 0?20:S,marginLeft:T=S===void 0?t==="left"?40:0:S,label:O,labelAnchor:B,labelArrow:P,labelOffset:L,...N}){return g=Yr(g),y=Yr(y),E=Yr(E),B!==void 0&&(B=No(B,"labelAnchor",["center","top","bottom"])),P=PR(P),lA(g&&!ra(o)?Cee(e,t,i,{stroke:o,strokeOpacity:h,strokeWidth:u,tickSize:g,tickPadding:y,tickRotate:E,x:_,...N}):null,ra(m)?null:wee(e,t,i,{fill:m,fillOpacity:c,stroke:A,strokeOpacity:p,strokeWidth:v,textAnchor:d,tickSize:g,tickPadding:y,tickRotate:E,x:_,marginTop:x,marginRight:C,marginBottom:w,marginLeft:T,...N}),!ra(m)&&O!==null?Na([],RR({fill:m,fillOpacity:c,...N},function(F,z,G,H,j){const q=H[e],{marginTop:Q,marginRight:k,marginBottom:K,marginLeft:W}=e==="y"&&j.inset||j,J=B??(q.bandwidth?"center":"top"),se=L??(t==="right"?k:W)-3;return J==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=J,this.frameAnchor=`${J}-${t}`,this.rotate=0),this.dy=J==="top"?3-Q:J==="bottom"?K-3:0,this.dx=t==="right"?se:-se,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[LR(e,q,{anchor:t,label:O,labelAnchor:J,labelArrow:P})]}}}})):null)}function SR(e,t,i,{color:r="currentColor",opacity:a=1,stroke:o=r,strokeOpacity:h=a,strokeWidth:u=1,fill:m=r,fillOpacity:c=a,textAnchor:d,textStroke:A,textStrokeOpacity:p,textStrokeWidth:v,tickSize:g=e==="x"?6:0,tickPadding:y,tickRotate:E,y:_,margin:S,marginTop:x=S===void 0?t==="top"?30:0:S,marginRight:C=S===void 0?20:S,marginBottom:w=S===void 0?t==="bottom"?30:0:S,marginLeft:T=S===void 0?20:S,label:O,labelAnchor:B,labelArrow:P,labelOffset:L,...N}){return g=Yr(g),y=Yr(y),E=Yr(E),B!==void 0&&(B=No(B,"labelAnchor",["center","left","right"])),P=PR(P),lA(g&&!ra(o)?Eee(e,t,i,{stroke:o,strokeOpacity:h,strokeWidth:u,tickSize:g,tickPadding:y,tickRotate:E,y:_,...N}):null,ra(m)?null:xee(e,t,i,{fill:m,fillOpacity:c,stroke:A,strokeOpacity:p,strokeWidth:v,textAnchor:d,tickSize:g,tickPadding:y,tickRotate:E,y:_,marginTop:x,marginRight:C,marginBottom:w,marginLeft:T,...N}),!ra(m)&&O!==null?Na([],RR({fill:m,fillOpacity:c,...N},function(F,z,G,H,j){const q=H[e],{marginTop:Q,marginRight:k,marginBottom:K,marginLeft:W}=e==="x"&&j.inset||j,J=B??(q.bandwidth?"center":"right"),se=L??(t==="top"?Q:K)-3;return J==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${J}`,this.textAnchor=J==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-se:se,this.dx=J==="right"?k-3:J==="left"?3-W:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[LR(e,q,{anchor:t,label:O,labelAnchor:J,labelArrow:P})]}}}})):null)}function Cee(e,t,i,{strokeWidth:r=1,strokeLinecap:a=null,strokeLinejoin:o=null,facetAnchor:h=t+(e==="y"?"-empty":""),frameAnchor:u=t,tickSize:m,inset:c=0,insetLeft:d=c,insetRight:A=c,dx:p=0,y:v=e==="y"?void 0:null,...g}){return pd(bee,e,i,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:a,strokeLinejoin:o,facetAnchor:h,frameAnchor:u,y:v,...g,dx:t==="left"?+p-ja+ +d:+p+ja-A,anchor:"start",length:m,shape:t==="left"?Lee:Pee})}function Eee(e,t,i,{strokeWidth:r=1,strokeLinecap:a=null,strokeLinejoin:o=null,facetAnchor:h=t+(e==="x"?"-empty":""),frameAnchor:u=t,tickSize:m,inset:c=0,insetTop:d=c,insetBottom:A=c,dy:p=0,x:v=e==="x"?void 0:null,...g}){return pd(yee,e,i,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:o,strokeLinecap:a,facetAnchor:h,frameAnchor:u,x:v,...g,dy:t==="bottom"?+p-ja-A:+p+ja+ +d,anchor:"start",length:m,shape:t==="bottom"?Oee:Dee})}function wee(e,t,i,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:o,tickRotate:h=0,tickPadding:u=Math.max(3,9-o)+(Math.abs(h)>60?4*Math.cos(h*tR):0),text:m,textAnchor:c=Math.abs(h)>60?"middle":t==="left"?"end":"start",lineAnchor:d=h>60?"top":h<-60?"bottom":"middle",fontVariant:A,inset:p=0,insetLeft:v=p,insetRight:g=p,dx:y=0,y:E=e==="y"?void 0:null,..._}){return pd(iee,e,i,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:a,text:m,textAnchor:c,lineAnchor:d,fontVariant:A,rotate:h,y:E,..._,dx:t==="left"?+y-o-u+ +v:+y+ +o+ +u-g},function(S,x,C,w,T){A===void 0&&(this.fontVariant=DR(S)),m===void 0&&(T.text=OR(S,x,C,w,t))})}function xee(e,t,i,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:o,tickRotate:h=0,tickPadding:u=Math.max(3,9-o)+(Math.abs(h)>=10?4*Math.cos(h*tR):0),text:m,textAnchor:c=Math.abs(h)>=10?h<0^t==="bottom"?"start":"end":"middle",lineAnchor:d=Math.abs(h)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:A,inset:p=0,insetTop:v=p,insetBottom:g=p,dy:y=0,x:E=e==="x"?void 0:null,..._}){return pd(nee,e,i,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:a,text:m===void 0?null:m,textAnchor:c,lineAnchor:d,fontVariant:A,rotate:h,x:E,..._,dy:t==="bottom"?+y+ +o+ +u-g:+y-o-u+ +v},function(S,x,C,w,T){A===void 0&&(this.fontVariant=DR(S)),m===void 0&&(T.text=OR(S,x,C,w,t))})}function See(){const[e,t]=pu(...arguments);return IR("y",MR(t),e,t)}function Iee(){const[e,t]=pu(...arguments);return IR("fy",_R(t),e,t)}function Tee(){const[e,t]=pu(...arguments);return TR("x",CR(t),e,t)}function Bee(){const[e,t]=pu(...arguments);return TR("fx",ER(t),e,t)}function IR(e,t,i,{y:r=e==="y"?void 0:null,x:a=null,x1:o=t==="left"?a:null,x2:h=t==="right"?a:null,...u}){return pd(Ss,e,i,{ariaLabel:`${e}-grid`,ariaHidden:!0},{y:r,x1:o,x2:h,...BR(u)})}function TR(e,t,i,{x:r=e==="x"?void 0:null,y:a=null,y1:o=t==="top"?a:null,y2:h=t==="bottom"?a:null,...u}){return pd(fa,e,i,{ariaLabel:`${e}-grid`,ariaHidden:!0},{x:r,y1:o,y2:h,...BR(u)})}function BR({color:e="currentColor",opacity:t=.1,stroke:i=e,strokeOpacity:r=t,strokeWidth:a=1,...o}){return{stroke:i,strokeOpacity:r,strokeWidth:a,...o}}function RR({fill:e,fillOpacity:t,fontFamily:i,fontSize:r,fontStyle:a,fontVariant:o,fontWeight:h,monospace:u,pointerEvents:m,shapeRendering:c,clip:d=!1},A){return[,e]=Lo(e),[,t]=La(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:i,fontSize:r,fontStyle:a,fontVariant:o,fontWeight:h,monospace:u,pointerEvents:m,shapeRendering:c,clip:d,initializer:A}}function pd(e,t,i,r,a,o){let h;function u(d,A,p,v,g,y){const E=d==null&&(t==="fx"||t==="fy"),{[t]:_}=v;if(!_)throw new Error(`missing scale: ${t}`);const S=_.domain();let{interval:x,ticks:C,tickFormat:w,tickSpacing:T=t==="x"?80:35}=a;if(typeof C=="string"&&NR(_)&&(x=C,C=void 0),C===void 0&&(C=hd(x,_.type)??Ree(_,T)),d==null){if(fu(C))d=po(C);else if(Ah(C))d=hv(C,...Ps(S));else if(_.interval){let B=_.interval;if(_.ticks){const[P,L]=Ps(S),N=(L-P)/B[k9];B=HC(B,N/C)??B,d=hv(B,P,L)}else{d=S;const P=d.length;B=HC(B,P/C)??B,B!==_.interval&&(d=hv(B,...Ps(d)))}if(B===_.interval){const P=Math.round(d.length/C);P>1&&(d=d.filter((L,N)=>N%P===0))}}else _.ticks?d=_.ticks(C):d=S;if(!_.ticks&&d.length&&d!==S){const B=new y9(S);d=d.filter(P=>B.has(P)),d.length||Zc(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?A=[Mc(d)]:h[t]={scale:t,value:As}}o==null||o.call(this,_,d,C,w,h);const O=Object.fromEntries(Object.entries(h).map(([B,P])=>[B,{...P,value:as(d,P.value)}]));return E&&(A=y.filterFacets(d,O)),{data:d,facets:A,channels:O}}const m=Kh(a).initializer,c=e(i,Kh({...a,initializer:u},m));return i==null?(h=c.channels,c.channels={}):h={},r!==void 0&&Object.assign(c,r),c.clip===void 0&&(c.clip=!1),c}function Ree(e,t){const[i,r]=Ps(e.range());return(r-i)/t}function OR(e,t,i,r,a){return{value:S4(e,t,i,r,a)}}function S4(e,t,i,r,a){return typeof r=="function"&&!(e.type==="log"&&e.tickFormat)?r:r===void 0&&t&&Ka(t)?pq(e.type,t,a)??Yh:e.tickFormat?e.tickFormat(typeof i=="number"?i:null,r):r===void 0?Yh:typeof r=="string"?(Ka(e.domain())?L9:od)(r):U9(r)}function hv(e,t,i){return e.range(t,e.offset(e.floor(i)))}const Oee={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Dee={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Lee={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},Pee={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function DR(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function LR(e,t,{anchor:i,label:r=t.label,labelAnchor:a,labelArrow:o}={}){if(!(r==null||r.inferred&&NR(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!o)return r;if(o===!0){const h=VB(t);h&&(o=/x$/.test(e)||a==="center"?/x$/.test(e)===h<0?"left":"right":h<0?"up":"down")}switch(o){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return i==="right"?`${r} ↑`:`↑ ${r}`;case"down":return i==="right"?`${r} ↓`:`↓ ${r}`}return r}}function PR(e="auto"){return ra(e)?!1:typeof e=="boolean"?e:No(e,"labelArrow",["auto","up","right","down","left"])}function NR(e){return Ka(e.domain())}function bE(e,t){if(t==null)return t;const i=e(t);if(!i)throw new Error(`scale not found: ${t}`);return i}function Nee(e,{opacity:t,...i}={}){if(!_0(e)&&!WB(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return FR(e,i,(r,a,o,h)=>r.append("svg").attr("width",o).attr("height",h).attr("fill",a.scale).attr("fill-opacity",La(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Fee(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:i=1,stroke:r=(d=>(d=e.hint)==null?void 0:d.stroke)()!==void 0?e.hint.stroke:ra(t)?"currentColor":"none",strokeOpacity:a=1,strokeWidth:o=1.5,r:h=4.5,...u}={},m){const[A,p]=Lo(t),[v,g]=Lo(r),y=bE(m,A),E=bE(m,v),_=h*h*Math.PI;return i=La(i)[1],a=La(a)[1],o=La(o)[1],FR(e,u,(S,x,C,w)=>S.append("svg").attr("viewBox","-8 -8 16 16").attr("width",C).attr("height",w).attr("fill",A==="color"?T=>y.scale(T):p).attr("fill-opacity",i).attr("stroke",v==="color"?T=>E.scale(T):g).attr("stroke-opacity",a).attr("stroke-width",o).append("path").attr("d",T=>{const O=Kc();return e.scale(T).draw(O,_),O}))}function FR(e,t={},i){let{columns:r,tickFormat:a,fontVariant:o=eR(e),swatchSize:h=15,swatchWidth:u=h,swatchHeight:m=h,marginLeft:c=0,className:d,style:A,width:p}=t;const v=v4(t);d=y4(d),a=S4(e.scale,e.domain,void 0,a);const g=Is("div",v).attr("class",`${d}-swatches ${d}-swatches-${r!=null?"columns":"wrap"}`);let y;return r!=null?(y=`:where(.${d}-swatches-columns .${d}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${d}-swatches-columns .${d}-swatch::before) {
  flex-shrink: 0;
}
:where(.${d}-swatches-columns .${d}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,g.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${d}-swatch`).call(i,e,u,m).call(E=>E.append("div").attr("class",`${d}-swatch-label`).attr("title",a).text(a))):(y=`:where(.${d}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${d}-swatches-wrap .${d}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,g.selectAll().data(e.domain).enter().append("span").attr("class",`${d}-swatch`).call(i,e,u,m).append(function(){return this.ownerDocument.createTextNode(a.apply(this,arguments))})),g.call(E=>E.insert("style","*").text(`:where(.${d}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${d}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${y}`)).style("margin-left",c?`${+c}px`:null).style("width",p===void 0?null:`${+p}px`).style("font-variant",js(o,"normal")).call(b4,A).node()}const Ty=new Map([["symbol",Fee],["color",UR],["opacity",Uee]]);function kee(e,t,i={}){return(r,a)=>{if(!Ty.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return Ty.get(r)(e[r],kR(t,i[r],a),o=>e[o])}}function kR({className:e,...t},{label:i,ticks:r,tickFormat:a}={},o){return Lq(o,{className:e,...t},{label:i,ticks:r,tickFormat:a})}function UR(e,{legend:t=!0,...i}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return Nee(e,i);case"ramp":return zZ(e,i);default:throw new Error(`unknown legend type: ${t}`)}}function Uee({type:e,interpolate:t,...i},{legend:r=!0,color:a=iu(0,0,0),...o}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return UR({type:e,...i,interpolate:Gee(a)},{legend:r,...o})}function Gee(e){const{r:t,g:i,b:r}=iu(e)||iu(0,0,0);return a=>`rgba(${t},${i},${r},${a})`}function Vee(e,t,i){const r=[];for(const[a,o]of Ty){const h=i[a];if(h!=null&&h.legend&&a in e){const u=o(e[a],kR(t,e[a],h),m=>e[m]);u!=null&&r.push(u)}}return r}const Qee={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Hee={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class zee extends Ca{constructor(t={}){const{anchor:i=null,inset:r=0,insetTop:a=r,insetRight:o=r,insetBottom:h=r,insetLeft:u=r,rx:m,ry:c}=t;super(u1,void 0,t,i==null?Qee:Hee),this.anchor=lB(i,"anchor",["top","right","bottom","left"]),this.insetTop=Yr(a),this.insetRight=Yr(o),this.insetBottom=Yr(h),this.insetLeft=Yr(u),this.rx=Yr(m),this.ry=Yr(c)}render(t,i,r,a,o){const{marginTop:h,marginRight:u,marginBottom:m,marginLeft:c,width:d,height:A}=a,{anchor:p,insetTop:v,insetRight:g,insetBottom:y,insetLeft:E,rx:_,ry:S}=this,x=c+E,C=d-u-g,w=h+v,T=A-m-y;return Is(p?"svg:line":"svg:rect",o).datum(0).call(go,this,a,o).call(Ao,this).call(Ll,this,r).call(ka,this,{}).call(p==="left"?O=>O.attr("x1",x).attr("x2",x).attr("y1",w).attr("y2",T):p==="right"?O=>O.attr("x1",C).attr("x2",C).attr("y1",w).attr("y2",T):p==="top"?O=>O.attr("x1",x).attr("x2",C).attr("y1",w).attr("y2",w):p==="bottom"?O=>O.attr("x1",x).attr("x2",C).attr("y1",T).attr("y2",T):O=>O.attr("x",x).attr("y",w).attr("width",C-x).attr("height",T-w).attr("rx",_).attr("ry",S)).node()}}function Wee(e){return new zee(e)}const dv={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},jee=new Set(["geometry","href","src","ariaLabel","scales"]);class $ee extends Ca{constructor(t,i={}){i.tip&&(i={...i,tip:!1}),i.title===void 0&&fu(t)&&fB(t)&&(i={...i,title:As});const{x:r,y:a,x1:o,x2:h,y1:u,y2:m,anchor:c,preferredAnchor:d="bottom",monospace:A,fontFamily:p=A?"ui-monospace, monospace":void 0,fontSize:v,fontStyle:g,fontVariant:y,fontWeight:E,lineHeight:_=1,lineWidth:S=20,frameAnchor:x,format:C,textAnchor:w="start",textOverflow:T,textPadding:O=8,title:B,pointerSize:P=12,pathFilter:L="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=i;super(t,{x:{value:o!=null&&h!=null?null:r,scale:"x",optional:!0},y:{value:u!=null&&m!=null?null:a,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:h==null},y1:{value:u,scale:"y",optional:m==null},x2:{value:h,scale:"x",optional:o==null},y2:{value:m,scale:"y",optional:u==null},title:{value:B,optional:!0}},i,dv),this.anchor=My(c,"anchor"),this.preferredAnchor=My(d,"preferredAnchor"),this.frameAnchor=nA(x),this.textAnchor=js(w,"middle"),this.textPadding=+O,this.pointerSize=+P,this.pathFilter=Da(L),this.lineHeight=+_,this.lineWidth=+S,this.textOverflow=dR(T),this.monospace=!!A,this.fontFamily=Da(p),this.fontSize=Yr(v),this.fontStyle=Da(g),this.fontVariant=Da(y),this.fontWeight=Da(E);for(const N in dv)N in this.channels&&(this[N]=dv[N]);this.splitLines=mR(this),this.clipLine=pR(this),this.format=typeof C=="string"||typeof C=="function"?{title:C}:{...C}}render(t,i,r,a,o){const h=this,{x:u,y:m,fx:c,fy:d}=i,{ownerSVGElement:A,document:p}=o,{anchor:v,monospace:g,lineHeight:y,lineWidth:E}=this,{textPadding:_,pointerSize:S,pathFilter:x}=this,{marginTop:C,marginLeft:w}=a,{x1:T,y1:O,x2:B,y2:P,x:L=T??B,y:N=O??P}=r,F=c?c(t.fx)-w:0,z=d?d(t.fy)-C:0,[G,H]=W9(this,a),j=JB(r,G),q=ZB(r,H),Q=g?x4:w4,k=Q(wh);let K,W;"title"in r?(K=ME.call(this,{title:r.channels.title},i),W=Jee):(K=ME.call(this,r.channels,i),W=Zee);const J=Is("svg:g",o).call(go,this,a,o).call(fR,this).call(ka,this,{x:L&&u,y:N&&m}).call(fe=>fe.selectAll().data(t).enter().append("g").attr("transform",me=>`translate(${Math.round(j(me))},${Math.round(q(me))})`).call(Ao,this).call(me=>me.append("path").attr("filter",x)).call(me=>me.append("text").each(function(xe){const ye=If(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const we=W.call(h,xe,t,K,i,r);if(typeof we=="string")for(const Ee of h.splitLines(we))se(ye,{value:h.clipLine(Ee)});else{const Ee=new Set;for(const He of we){const{label:Ae=""}=He;Ae&&Ee.has(Ae)||(Ee.add(Ae),se(ye,He))}}})));function se(fe,{label:me,value:xe,color:ye,opacity:we}){me??(me=""),xe??(xe="");const Ee=ye!=null||we!=null;let He,Ae=E*100;const[Ke]=qh(me,Ae,Q,k);if(Ke>=0)me=me.slice(0,Ke).trimEnd()+wh,He=xe.trim(),xe="";else{(me||!xe&&!Ee)&&(xe=" "+xe);const[ct]=qh(xe,Ae-Q(me),Q,k);ct>=0&&(He=xe.trim(),xe=xe.slice(0,ct).trimEnd()+wh)}const Ue=fe.append("tspan").attr("x",0).attr("dy",`${y}em`).text("​");me&&Ue.append("tspan").attr("font-weight","bold").text(me),xe&&Ue.append(()=>p.createTextNode(xe)),Ee&&Ue.append("tspan").text(" ■").attr("fill",ye).attr("fill-opacity",we).style("user-select","none"),He&&Ue.append("title").text(He)}function ge(){const{width:fe,height:me}=a.facet??a;J.selectChildren().each(function(xe){let{x:ye,width:we,height:Ee}=this.getBBox();we=Math.round(we),Ee=Math.round(Ee);let He=v;if(He===void 0){const Ue=j(xe)+F,ct=q(xe)+z,vt=Ue+we+S+_*2<fe,dt=Ue-we-S-_*2>0,It=ct+Ee+S+_*2<me,rt=ct-Ee-S-_*2>0;He=vt&&dt?It&&rt?h.preferredAnchor:rt?"bottom":"top":It&&rt?vt?"left":"right":(vt||dt)&&(It||rt)?`${rt?"bottom":"top"}-${vt?"left":"right"}`:h.preferredAnchor}const Ae=this.firstChild,Ke=this.lastChild;if(Ae.setAttribute("d",qee(He,S,_,we,Ee)),ye)for(const Ue of Ke.childNodes)Ue.setAttribute("x",-ye);Ke.setAttribute("y",`${+Kee(He,Ke.childNodes.length,y).toFixed(6)}em`),Ke.setAttribute("transform",`translate(${Yee(He,S,_,we,Ee)})`)}),J.attr("visibility",null)}return t.length&&(J.attr("visibility","hidden"),A.isConnected?Promise.resolve().then(ge):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ge)),J.node()}}function Xee(e,{x:t,y:i,...r}={}){return r.frameAnchor===void 0&&([t,i]=ud(t,i)),new $ee(e,{...r,x:t,y:i})}function Kee(e,t,i){return/^top(?:-|$)/.test(e)?.94-i:-.29-t*i}function Yee(e,t,i,r,a){switch(e){case"middle":return[-r/2,a/2];case"top-left":return[i,t+i];case"top":return[-r/2,t/2+i];case"top-right":return[-r-i,t+i];case"right":return[-t/2-r-i,a/2];case"bottom-left":return[i,-t-i];case"bottom":return[-r/2,-t/2-i];case"bottom-right":return[-r-i,-t-i];case"left":return[i+t/2,a/2]}}function qee(e,t,i,r,a){const o=r+i*2,h=a+i*2;switch(e){case"middle":return`M${-o/2},${-h/2}h${o}v${h}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${h}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${h}h${-o}v${-h}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${h}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-h/2}h${-o}v${h}h${o}v${t/2-h/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-h}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-h}h${-o}v${h}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-h}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-h/2}h${o}v${h}h${-o}v${t/2-h/2}z`}}function ME(e,t){var a,o;const i={};let r=this.format;r=_E(r,e,"x"),r=_E(r,e,"y"),this.format=r;for(const h in r){const u=r[h];if(!(u===null||u===!1))if(h==="fx"||h==="fy")i[h]=!0;else{const m=qC(e,h);m&&(i[h]=m)}}for(const h in e){if(h in i||h in r||jee.has(h))continue;const u=qC(e,h);u&&(i[h]=u)}this.facet&&(t.fx&&!("fx"in r)&&(i.fx=!0),t.fy&&!("fy"in r)&&(i.fy=!0));for(const h in i){const u=this.format[h];if(typeof u=="string"){const m=((a=i[h])==null?void 0:a.value)??((o=t[h])==null?void 0:o.domain())??[];this.format[h]=(Ka(m)?L9:od)(u)}else if(u===void 0||u===!0){const m=t[h];this.format[h]=m!=null&&m.bandwidth?S4(m,m.domain()):Yh}}return i}function _E(e,t,i){if(!(i in e))return e;const r=`${i}1`,a=`${i}2`;if((r in e||!(r in t))&&(a in e||!(a in t)))return e;const o=Object.entries(e),h=e[i];return o.splice(o.findIndex(([u])=>u===i)+1,0,[r,h],[a,h]),Object.fromEntries(o)}function Jee(e,t,{title:i}){return this.format.title(i.value[e],e)}function*Zee(e,t,i,r,a){for(const o in i){if(o==="fx"||o==="fy"){yield{label:og(r,i,o),value:this.format[o](t[o],e)};continue}if(o==="x1"&&"x2"in i||o==="y1"&&"y2"in i)continue;const h=i[o];if(o==="x2"&&"x1"in i)yield{label:EE(r,i,"x"),value:CE(this.format.x2,i.x1,h,e)};else if(o==="y2"&&"y1"in i)yield{label:EE(r,i,"y"),value:CE(this.format.y2,i.y1,h,e)};else{const u=h.value[e],m=h.scale;if(!ou(u)&&m==null)continue;yield{label:og(r,i,o),value:this.format[o](u,e),color:m==="color"?a[o][e]:null,opacity:m==="opacity"?a[o][e]:null}}}}function CE(e,t,i,r){var a;return(a=i.hint)!=null&&a.length?`${e(i.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(i.value[r],r)}`}function EE(e,t,i){const r=og(e,t,`${i}1`,i),a=og(e,t,`${i}2`,i);return r===a?r:`${r}–${a}`}function og(e,t,i,r=i){const a=t[i],o=e[(a==null?void 0:a.scale)??i];return String((o==null?void 0:o.label)??(a==null?void 0:a.label)??r)}function lr(e={}){var k;const{facet:t,style:i,title:r,subtitle:a,caption:o,ariaLabel:h,ariaDescription:u}=e,m=y4(e.className),c=e.marks===void 0?[]:xE(e.marks);c.push(...ate(c));const d=rte(t,e),A=new Map;for(const K of c){const W=SE(K,d,e);W&&A.set(K,W)}const p=new Map;d&&hf(p,[d],e),hf(p,A,e);const v=xE(ote(c,p,e));for(const K of v){const W=SE(K,d,e);W&&A.set(K,W)}c.unshift(...v);let g=iZ(p,e);if(g!==void 0){const K=d?lv(g,d):void 0;for(const J of c){if(J.facet===null||J.facet==="super")continue;const se=A.get(J);se!==void 0&&(se.facetsIndex=J.fx!=null||J.fy!=null?lv(g,se):K)}const W=new Set;for(const{facetsIndex:J}of A.values())J==null||J.forEach((se,ge)=>{(se==null?void 0:se.length)>0&&W.add(ge)});g.forEach(0<W.size&&W.size<g.length?(J,se)=>J.empty=!W.has(se):J=>J.empty=!1);for(const J of c)if(J.facet==="exclude"){const se=A.get(J);se!==void 0&&(se.facetsIndex=aZ(se.facetsIndex))}}for(const K of ws.keys())by(e[K])&&K!=="fx"&&K!=="fy"&&p.set(K,[]);const y=new Map;for(const K of c){if(y.has(K))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:W,channels:J}=A.get(K)??{},{data:se,facets:ge,channels:fe}=K.initialize(W,J,e);I4(fe,e),y.set(K,{data:se,facets:ge,channels:fe})}const E=wy(hf(p,y,e),e),_=GZ(E,c,e);XJ(E,_);const S=rE(E),{fx:x,fy:C}=S,w=x||C?QB(E,_):_,T=x||C?mte(S,_):_,O=v4(e),B=O.document,P=Tg("svg").call(B.documentElement);let L=P;O.ownerSVGElement=P,O.className=m,O.projection=pZ(e,w),O.filterFacets=(K,W)=>lv(g,{channels:W,groups:A4(K,W)}),O.getMarkState=K=>{const W=y.get(K),J=A.get(K);return{...W,channels:{...W.channels,...J==null?void 0:J.channels}}},O.dispatchValue=K=>{L.value!==K&&(L.value=K,L.dispatchEvent(new Event("input",{bubbles:!0})))};const N=new Set;for(const[K,W]of y)if(K.initializer!=null){const J=K.facet==="super"?T:w,se=K.initializer(W.data,W.facets,W.channels,S,J,O);if(se.data!==void 0&&(W.data=se.data),se.facets!==void 0&&(W.facets=se.facets),se.channels!==void 0){const{fx:ge,fy:fe,...me}=se.channels;ite(me),Object.assign(W.channels,me);for(const xe of Object.values(me)){const{scale:ye}=xe;ye!=null&&!Nq(ws.get(ye))&&(GR(xe,e),N.add(ye))}(ge!=null||fe!=null)&&A.set(K,!0)}}if(N.size){const K=new Map;hf(K,y,e,ge=>N.has(ge)),hf(p,y,e,ge=>N.has(ge));const W=fte(wy(K,e),E),{scales:J,...se}=rE(W);Object.assign(E,W),Object.assign(S,se),Object.assign(S.scales,J)}let F,z;g!==void 0&&(F={x:x==null?void 0:x.domain(),y:C==null?void 0:C.domain()},g=rZ(g,F),z=sZ(x,C,_));for(const[K,W]of y)W.values=K.scale(W.channels,S,O);const{width:G,height:H}=_;If(P).attr("class",m).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",G).attr("height",H).attr("viewBox",`0 0 ${G} ${H}`).attr("aria-label",h).attr("aria-description",u).call(K=>K.append("style").text(`:where(.${m}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${m} text),
:where(.${m} tspan) {
  white-space: pre;
}`)).call(b4,i);for(const K of c){const{channels:W,values:J,facets:se}=y.get(K);if(g===void 0||K.facet==="super"){let ge=null;if(se&&(ge=se[0],ge=K.filter(ge,W,J),ge.length===0))continue;const fe=K.render(ge,S,J,T,O);if(fe==null)continue;P.appendChild(fe)}else{let ge;for(const fe of g){if(!(((k=K.facetAnchor)==null?void 0:k.call(K,g,F,fe))??!fe.empty))continue;let me=null;if(se){const ye=A.has(K);if(me=se[ye?fe.i:0],me=K.filter(me,W,J),me.length===0)continue;!ye&&me===se[0]&&(me=_q(me)),me.fx=fe.x,me.fy=fe.y,me.fi=fe.i}const xe=K.render(me,S,J,w,O);if(xe!=null){(ge??(ge=If(P).append("g"))).append(()=>xe).datum(fe);for(const ye of["aria-label","aria-description","aria-hidden","transform"])xe.hasAttribute(ye)&&(ge.attr(ye,xe.getAttribute(ye)),xe.removeAttribute(ye))}}ge==null||ge.selectChildren().attr("transform",z)}}const j=Vee(E,O,e),{figure:q=r!=null||a!=null||o!=null||j.length>0}=e;q&&(L=B.createElement("figure"),L.className=`${m}-figure`,L.style.maxWidth="initial",r!=null&&L.append(wE(B,r,"h2")),a!=null&&L.append(wE(B,a,"h3")),L.append(...j,P),o!=null&&L.append(ete(B,o)),"value"in P&&(L.value=P.value,delete P.value)),L.scale=tZ(S.scales),L.legend=kee(E,O,e);const Q=RJ();return Q>0&&If(P).append("text").attr("x",G).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${Q.toLocaleString("en-US")} warning${Q===1?"":"s"}. Please check the console.`),L}function wE(e,t,i){if(t.ownerDocument)return t;const r=e.createElement(i);return r.append(t),r}function ete(e,t){const i=e.createElement("figcaption");return i.append(t),i}function xE(e){return e.flat(1/0).filter(t=>t!=null).map(tte)}function tte(e){return typeof e.render=="function"?e:new nte(e)}class nte extends Ca{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function I4(e,t){for(const i in e)GR(e[i],t);return e}function GR(e,t){const{scale:i,transform:r=!0}=e;if(i==null||!r)return;const{type:a,percent:o,interval:h,transform:u=o?m=>m==null?NaN:m*100:dB(h,a)}=t[i]??{};u!=null&&(e.value=Xs(e.value,u),e.transform=!1)}function ite(e){for(const t in e)SB(t,e[t])}function hf(e,t,i,r=yq){var a,o;for(const{channels:h}of t.values())for(const u in h){const m=h[u],{scale:c}=m;if(c!=null&&r(c))if(c==="projection"){if(!yZ(i)){const d=((a=i.x)==null?void 0:a.domain)===void 0,A=((o=i.y)==null?void 0:o.domain)===void 0;if(d||A){const[p,v]=MZ(m);d&&fv(e,"x",p),A&&fv(e,"y",v)}}}else fv(e,c,m)}return e}function fv(e,t,i){const r=e.get(t);r!==void 0?r.push(i):e.set(t,[i])}function rte(e,t){if(e==null)return;const{x:i,y:r}=e;if(i==null&&r==null)return;const a=po(e.data);if(a==null)throw new Error("missing facet data");const o={};i!=null&&(o.fx=n9(a,{value:i,scale:"fx"})),r!=null&&(o.fy=n9(a,{value:r,scale:"fy"})),I4(o,t);const h=A4(a,o);return{channels:o,groups:h,data:e.data}}function SE(e,t,i){var m;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:a}=e;if(r!=null||a!=null){const c=po(e.data??r??a);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const d={};return r!=null&&(d.fx=n9(c,{value:r,scale:"fx"})),a!=null&&(d.fy=n9(c,{value:a,scale:"fy"})),I4(d,i),{channels:d,groups:A4(c,d)}}if(t===void 0)return;const{channels:o,groups:h,data:u}=t;if(e.facet!=="auto"||e.data===u)return{channels:o,groups:h};u.length>0&&(h.size>1||h.size===1&&o.fx&&o.fy&&[...h][0][1].size>1)&&((m=po(e.data))==null?void 0:m.length)===u.length&&Zc(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function ste(e,t={}){return Kh({...t,x:null,y:null},(i,r,a,o,h,u)=>u.getMarkState(e))}function ate(e){const t=[];for(const i of e){let r=i.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:a,preferredAnchor:o}=r;a=/^x$/i.test(a)?HZ:/^y$/i.test(a)?fE:QZ,r=a(ste(i,r)),r.title=null,o===void 0&&(r.preferredAnchor=a===fE?"left":"bottom");const h=Xee(i.data,r);h.facet=i.facet,h.facetAnchor=i.facetAnchor,t.push(h)}}return t}function ote(e,t,i){let{projection:r,x:a={},y:o={},fx:h={},fy:u={},axis:m,grid:c,facet:d={},facet:{axis:A=m,grid:p}=d,x:{axis:v=m,grid:g=v===null?null:c}=a,y:{axis:y=m,grid:E=y===null?null:c}=o,fx:{axis:_=A,grid:S=_===null?null:p}=h,fy:{axis:x=A,grid:C=x===null?null:p}=u}=i;(r||!by(a)&&!IE("x",e))&&(v=g=null),(r||!by(o)&&!IE("y",e))&&(y=E=null),t.has("fx")||(_=S=null),t.has("fy")||(x=C=null),v===void 0&&(v=!Kp(e,"x")),y===void 0&&(y=!Kp(e,"y")),_===void 0&&(_=!Kp(e,"fx")),x===void 0&&(x=!Kp(e,"fy")),v===!0&&(v="bottom"),y===!0&&(y="left"),_===!0&&(_=v==="top"||v===null?"bottom":"top"),x===!0&&(x=y==="right"||y===null?"left":"right");const w=[];return Xp(w,C,Iee,u),$p(w,x,Mee,"right","left",d,u),Xp(w,S,Bee,h),$p(w,_,_ee,"top","bottom",d,h),Xp(w,E,See,o),$p(w,y,lu,"left","right",i,o),Xp(w,g,Tee,a),$p(w,v,wR,"bottom","top",i,a),w}function $p(e,t,i,r,a,o,h){if(!t)return;const u=lte(t);h=cte(u?r:t,o,h);const{line:m}=h;(i===lu||i===wR)&&m&&!t9(m)&&e.push(Wee(ute(h))),e.push(i(h)),u&&e.push(i({...h,anchor:a,label:null}))}function Xp(e,t,i,r){!t||t9(t)||e.push(i(hte(t,r)))}function lte(e){return/^\s*both\s*$/i.test(e)}function cte(e,t,{line:i=t.line,ticks:r,tickSize:a,tickSpacing:o,tickPadding:h,tickFormat:u,tickRotate:m,fontVariant:c,ariaLabel:d,ariaDescription:A,label:p=t.label,labelAnchor:v,labelArrow:g=t.labelArrow,labelOffset:y}){return{anchor:e,line:i,ticks:r,tickSize:a,tickSpacing:o,tickPadding:h,tickFormat:u,tickRotate:m,fontVariant:c,ariaLabel:d,ariaDescription:A,label:p,labelAnchor:v,labelArrow:g,labelOffset:y}}function ute(e){const{anchor:t,line:i}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:i===!0?void 0:i}}function hte(e,{stroke:t=tA(e)?e:void 0,ticks:i=dte(e)?e:void 0,tickSpacing:r,ariaLabel:a,ariaDescription:o}){return{stroke:t,ticks:i,tickSpacing:r,ariaLabel:a,ariaDescription:o}}function dte(e){switch(typeof e){case"number":return!0;case"string":return!tA(e)}return fu(e)||typeof(e==null?void 0:e.range)=="function"}function Kp(e,t){const i=`${t}-axis `;return e.some(r=>{var a;return(a=r.ariaLabel)==null?void 0:a.startsWith(i)})}function IE(e,t){for(const i of t)for(const r in i.channels){const{scale:a}=i.channels[r];if(a===e||a==="projection")return!0}return!1}function fte(e,t){for(const i in e){const r=e[i],a=t[i];r.label===void 0&&a&&(r.label=a.label)}return e}function mte({fx:e,fy:t},i){const{marginTop:r,marginRight:a,marginBottom:o,marginLeft:h,width:u,height:m}=g4(i),c=e&&TE(e),d=t&&TE(t);return{marginTop:t?d[0]:r,marginRight:e?u-c[1]:a,marginBottom:t?m-d[1]:o,marginLeft:e?c[0]:h,inset:{marginTop:i.marginTop,marginRight:i.marginRight,marginBottom:i.marginBottom,marginLeft:i.marginLeft},width:u,height:m}}function TE(e){const t=e.domain();let i=e(t[0]),r=e(t[t.length-1]);return r<i&&([i,r]=[r,i]),[i,r+e.bandwidth()]}const pte=new Map([["basis",rX],["basis-closed",sX],["basis-open",aX],["bundle",oX],["bump-x",$$],["bump-y",X$],["cardinal",lX],["cardinal-closed",cX],["cardinal-open",uX],["catmull-rom",hX],["catmull-rom-closed",dX],["catmull-rom-open",fX],["linear",P9],["linear-closed",mX],["monotone-x",pX],["monotone-y",gX],["natural",AX],["step",vX],["step-after",bX],["step-before",yX]]);function VR(e=P9,t){if(typeof e=="function")return e;const i=pte.get(`${e}`.toLowerCase());if(!i)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in i)return i.beta(t);if("tension"in i)return i.tension(t);if("alpha"in i)return i.alpha(t)}return i}function QR(e=Jh,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Jh:VR(e,t)}function Jh(e){return P9(e)}function fA(e={y:"count"},t={}){[e,t]=yte(e,t);const{x:i,y:r}=t;return vte(bte(i,t,As),null,null,r,e,uA(t))}function gte(e,t,i={}){if((i==null?void 0:i.interval)==null)return i;const{reduce:r=d4}=i,a={filter:null};return i[t]!=null&&(a[t]=r),i[`${t}1`]!=null&&(a[`${t}1`]=r),i[`${t}2`]!=null&&(a[`${t}2`]=r),e(a,i)}function Ate(e={}){return gte(fA,"y",fd(e,"x"))}function vte(e,t,i,r,{data:a=h4,filter:o=sg,sort:h,reverse:u,...m}={},c={}){e=BE(e),t=BE(t),m=_te(m,c),a=WR(a,As),h=h==null?void 0:HR("sort",h,c),o=o==null?void 0:zR("filter",o,c),r!=null&&Pf(m,"y","y1","y2")&&(r=null);const[d,A]=Wa(e),[p,v]=Wa(e),[g,y]=Wa(t),[E,_]=Wa(t),[S,x]=r!=null?[r,"y"]:[],[C,w]=Wa(S),{x:T,y:O,z:B,fill:P,stroke:L,x1:N,x2:F,y1:z,y2:G,domain:H,cumulative:j,thresholds:q,interval:Q,...k}=c,[K,W]=Wa(B),[J]=Lo(P),[se]=Lo(L),[ge,fe]=Wa(J),[me,xe]=Wa(se);return{..."z"in c&&{z:K||B},..."fill"in c&&{fill:ge||P},..."stroke"in c&&{stroke:me||L},...M0(k,(ye,we,Ee)=>{const He=rg(as(ye,S),Ee==null?void 0:Ee[x]),Ae=as(ye,B),Ke=as(ye,J),Ue=as(ye,se),ct=EB(m,{z:Ae,fill:Ke,stroke:Ue}),vt=[],dt=[],It=He&&w([]),rt=Ae&&W([]),Lt=Ke&&fe([]),hn=Ue&&xe([]),Et=e&&A([]),xt=e&&v([]),en=t&&y([]),_t=t&&_([]),Kt=wte(e,t,ye);let Dt=0;for(const Nt of m)Nt.initialize(ye);h&&h.initialize(ye),o&&o.initialize(ye);for(const Nt of we){const St=[];for(const pe of m)pe.scope("facet",Nt);h&&h.scope("facet",Nt),o&&o.scope("facet",Nt);for(const[pe,_e]of Nf(Nt,ct))for(const[De,Be]of Nf(_e,He))for(const[Le,ke]of Kt(Be))if(ct&&(ke.z=pe),!(o&&!o.reduce(Le,ke))){St.push(Dt++),dt.push(a.reduceIndex(Le,ye,ke)),He&&It.push(De),Ae&&rt.push(ct===Ae?pe:Ae[(Le.length>0?Le:Be)[0]]),Ke&&Lt.push(ct===Ke?pe:Ke[(Le.length>0?Le:Be)[0]]),Ue&&hn.push(ct===Ue?pe:Ue[(Le.length>0?Le:Be)[0]]),Et&&(Et.push(ke.x1),xt.push(ke.x2)),en&&(en.push(ke.y1),_t.push(ke.y2));for(const ce of m)ce.reduce(Le,ke);h&&h.reduce(Le,ke)}vt.push(St)}return wB(vt,h,u),{data:dt,facets:vt}}),...!Pf(m,"x")&&(d?{x1:d,x2:p,x:ig(d,p)}:{x:T,x1:N,x2:F}),...!Pf(m,"y")&&(g?{y1:g,y2:E,y:ig(g,E)}:{y:O,y1:z,y2:G}),...C&&{[x]:C},...Object.fromEntries(m.map(({name:ye,output:we})=>[ye,we]))}}function yte({cumulative:e,domain:t,thresholds:i,interval:r,...a},o){return[a,{cumulative:e,domain:t,thresholds:i,interval:r,...o}]}function bte(e,{cumulative:t,domain:i,thresholds:r,interval:a},o){return e={...dd(e)},e.domain===void 0&&(e.domain=i),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=a),e.value===void 0&&(e.value=o),e.thresholds=Mte(e.thresholds,e.interval),e}function BE(e){if(e==null)return;const{value:t,cumulative:i,domain:r=Ps,thresholds:a}=e,o=h=>{let u=as(h,t),m;if(Ka(u)||Ete(a)){u=Xs(u,oB,Float64Array);let[d,A]=typeof r=="function"?r(u):r,p=typeof a=="function"&&!Ah(a)?a(u,d,A):a;typeof p=="number"&&(p=pS(d,A,p)),Ah(p)&&(r===Ps&&(d=p.floor(d),A=p.offset(p.floor(A))),p=p.range(d,p.offset(A))),m=p}else{u=Cl(u);let[d,A]=typeof r=="function"?r(u):r,p=typeof a=="function"&&!Ah(a)?a(u,d,A):a;if(typeof p=="number")if(r===Ps){let v=a0(d,A,p);if(isFinite(v))if(v>0){let g=Math.round(d/v),y=Math.round(A/v);g*v<=d||--g,y*v>A||++y;let E=y-g+1;p=new Float64Array(E);for(let _=0;_<E;++_)p[_]=(g+_)*v}else if(v<0){v=-v;let g=Math.round(d*v),y=Math.round(A*v);g/v<=d||--g,y/v>A||++y;let E=y-g+1;p=new Float64Array(E);for(let _=0;_<E;++_)p[_]=(g+_)/v}else p=[d];else p=[d]}else p=Dh(d,A,p);else Ah(p)&&(r===Ps&&(d=p.floor(d),A=p.offset(p.floor(A))),p=p.range(d,p.offset(A)));m=p}const c=[];if(m.length===1)c.push([m[0],m[0]]);else for(let d=1;d<m.length;++d)c.push([m[d-1],m[d]]);return c.bin=(i<0?Ste:i>0?xte:T4)(c,m,u),c};return o.label=du(t),o}function Mte(e,t,i=RE){if(e===void 0)return t===void 0?i:hd(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return kG;case"scott":return Ew;case"sturges":return Mw;case"auto":return RE}return qb(e)}return e}function _te(e,t){return bB(e,t,HR)}function HR(e,t,i){return c4(e,t,i,zR)}function zR(e,t,i){return u4(e,t,i,WR)}function WR(e,t){return rA(e,t,Cte)}function Cte(e){switch(`${e}`.toLowerCase()){case"x":return Ite;case"x1":return Bte;case"x2":return Rte;case"y":return Tte;case"y1":return Ote;case"y2":return Dte;case"z":return xB}throw new Error(`invalid bin reduce: ${e}`)}function RE(e,t,i){return Math.min(200,Ew(e,t,i))}function Ete(e){return xq(e)||fu(e)&&Ka(e)}function wte(e,t,i){const r=e==null?void 0:e(i),a=t==null?void 0:t(i);return r&&a?function*(o){const h=r.bin(o);for(const[u,[m,c]]of r.entries()){const d=a.bin(h[u]);for(const[A,[p,v]]of a.entries())yield[d[A],{data:i,x1:m,y1:p,x2:c,y2:v}]}}:r?function*(o){const h=r.bin(o);for(const[u,[m,c]]of r.entries())yield[h[u],{data:i,x1:m,x2:c}]}:function*(o){const h=a.bin(o);for(const[u,[m,c]]of a.entries())yield[h[u],{data:i,y1:m,y2:c}]}}function T4(e,t,i){return t=Cl(t),r=>{var o;const a=e.map(()=>[]);for(const h of r)(o=a[v9(t,i[h])-1])==null||o.push(h);return a}}function xte(e,t,i){const r=T4(e,t,i);return a=>{const o=r(a);for(let h=1,u=o.length;h<u;++h){const m=o[h-1],c=o[h];for(const d of m)c.push(d)}return o}}function Ste(e,t,i){const r=T4(e,t,i);return a=>{const o=r(a);for(let h=o.length-2;h>=0;--h){const u=o[h+1],m=o[h];for(const c of u)m.push(c)}return o}}function jR(e,t){const i=(+e+ +t)/2;return e instanceof Date?new Date(i):i}const Ite={reduceIndex(e,t,{x1:i,x2:r}){return jR(i,r)}},Tte={reduceIndex(e,t,{y1:i,y2:r}){return jR(i,r)}},Bte={reduceIndex(e,t,{x1:i}){return i}},Rte={reduceIndex(e,t,{x2:i}){return i}},Ote={reduceIndex(e,t,{y1:i}){return i}},Dte={reduceIndex(e,t,{y2:i}){return i}};function Lte(e={}){return cB(e)?e:{...e,x:As}}function B4(e={}){return uB(e)?e:{...e,y:As}}function Pte(e,t){if(t.length===1)return{data:e,facets:t};const i=e.length,r=new Uint8Array(i);let a=0;for(const u of t)for(const m of u)r[m]&&++a,r[m]=1;if(a===0)return{data:e,facets:t};e=e9(e);const o=e[sB]=new Uint32Array(i+a);t=t.map(u=>e9(u,Uint32Array));let h=i;r.fill(0);for(const u of t)for(let m=0,c=u.length;m<c;++m){const d=u[m];r[d]?(u[m]=h,e[h]=e[d],o[h]=d,++h):o[d]=d,r[d]=1}return{data:e,facets:t}}function Nte(e={},t={}){arguments.length===1&&([e,t]=$R(e));const{y1:i,y:r=i,x:a,...o}=t,[h,u,m,c]=XR(r,a,"y","x",e,o);return{...h,y1:i,y:u,x1:m,x2:c,x:ig(m,c)}}function Fte(e={},t={}){arguments.length===1&&([e,t]=$R(e));const{x1:i,x:r=i,y:a,...o}=t,[h,u,m,c]=XR(r,a,"x","y",e,o);return{...h,x1:i,x:u,y1:m,y2:c,y:ig(m,c)}}function kte({x:e,x1:t,x2:i,...r}={}){return r=fd(r,"y"),t===void 0&&i===void 0?Nte({x:e,...r}):([t,i]=hB(e,t,i),{...r,x1:t,x2:i})}function R4({y:e,y1:t,y2:i,...r}={}){return r=fd(r,"x"),t===void 0&&i===void 0?Fte({y:e,...r}):([t,i]=hB(e,t,i),{...r,y1:t,y2:i})}function $R(e){const{offset:t,order:i,reverse:r,...a}=e;return[{offset:t,order:i,reverse:r},a]}const Ute={length:!0};function XR(e,t=Jb,i,r,{offset:a,order:o,reverse:h},u){if(t===null)throw new Error(`stack requires ${r}`);const m=n4(u),[c,d]=Wa(e),[A,p]=qo(t),[v,g]=qo(t);return A.hint=v.hint=Ute,a=Gte(a),o=Hte(o,a,r),[M0(u,(y,E,_)=>{({data:y,facets:E}=Pte(y,E));const S=e==null?void 0:d(rg(as(y,e),_==null?void 0:_[i])),x=as(y,t,Float64Array),C=as(y,m),w=o&&o(y,S,x,C),T=y.length,O=p(new Float64Array(T)),B=g(new Float64Array(T)),P=[];for(const L of E){const N=S?Array.from(xg(L,F=>S[F]).values()):[L];if(w)for(const F of N)F.sort(w);for(const F of N){let z=0,G=0;h&&F.reverse();for(const H of F){const j=x[H];j<0?z=B[H]=(O[H]=z)+j:j>0?G=B[H]=(O[H]=G)+j:B[H]=O[H]=G}}P.push(N)}return a&&a(P,O,B,C),{data:y,facets:E}}),c,A,v]}function Gte(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Vte;case"center":case"silhouette":return Qte;case"wiggle":return YR}throw new Error(`unknown offset: ${e}`)}}function KR(e,t){let i=0,r=0;for(const a of e){const o=t[a];o<i&&(i=o),o>r&&(r=o)}return[i,r]}function Vte(e,t,i){for(const r of e)for(const a of r){const[o,h]=KR(a,i);for(const u of a){const m=1/(h-o||1);t[u]=m*(t[u]-o),i[u]=m*(i[u]-o)}}}function Qte(e,t,i){for(const r of e){for(const a of r){const[o,h]=KR(a,i);for(const u of a){const m=(h+o)/2;t[u]-=m,i[u]-=m}}qR(r,t,i)}JR(e,t,i)}function YR(e,t,i,r){for(const a of e){const o=new s0;let h=0;for(const u of a){let m=-1;const c=u.map(v=>Math.abs(i[v]-t[v])),d=u.map(v=>{m=r?r[v]:++m;const g=i[v]-t[v],y=o.has(m)?g-o.get(m):0;return o.set(m,g),y}),A=[0,...SG(d)];for(const v of u)t[v]+=h,i[v]+=h;const p=tu(c);p&&(h-=tu(c,(v,g)=>(d[g]/2+A[g])*v)/p)}qR(a,t,i)}JR(e,t,i)}function qR(e,t,i){const r=Pa(e,a=>Pa(a,o=>t[o]));for(const a of e)for(const o of a)t[o]-=r,i[o]-=r}function JR(e,t,i){const r=e.length;if(r===1)return;const a=e.map(u=>u.flat()),o=a.map(u=>(Pa(u,m=>t[m])+os(u,m=>i[m]))/2),h=Pa(o);for(let u=0;u<r;u++){const m=h-o[u];for(const c of a[u])t[c]+=m,i[c]+=m}}function Hte(e,t,i){if(e===void 0&&t===YR)return OE(Do);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),a=r?tg:Do;switch((r?e.slice(1):e).toLowerCase()){case"value":case i:return zte(a);case"z":return Wte(a);case"sum":return jte(a);case"appearance":return $te(a);case"inside-out":return OE(a)}return DE(aB(e))}if(typeof e=="function")return(e.length===1?DE:Xte)(e);if(Array.isArray(e))return Kte(e);throw new Error(`invalid order: ${e}`)}}function zte(e){return(t,i,r)=>(a,o)=>e(r[a],r[o])}function Wte(e){return(t,i,r,a)=>(o,h)=>e(a[o],a[h])}function jte(e){return mA(e,(t,i,r,a)=>rb(Mc(t),o=>tu(o,h=>r[h]),o=>a[o]))}function $te(e){return mA(e,(t,i,r,a)=>rb(Mc(t),o=>i[Cw(o,h=>r[h])],o=>a[o]))}function OE(e){return mA(e,(t,i,r,a)=>{const o=Mc(t),h=rb(o,A=>i[Cw(A,p=>r[p])],A=>a[A]),u=_h(o,A=>tu(A,p=>r[p]),A=>a[A]),m=[],c=[];let d=0;for(const A of h)d<0?(d+=u.get(A),m.push(A)):(d-=u.get(A),c.push(A));return c.reverse().concat(m)})}function DE(e){return t=>{const i=as(t,e);return(r,a)=>Do(i[r],i[a])}}function Xte(e){return t=>(i,r)=>e(t[i],t[r])}function Kte(e){return mA(Do,()=>e)}function mA(e,t){return(i,r,a,o)=>{if(!o)throw new Error("missing channel: z");const h=new s0(t(i,r,a,o).map((u,m)=>[u,m]));return(u,m)=>e(h.get(o[u]),h.get(o[m]))}}const Yte={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ZR extends Ca{constructor(t,i={}){const{x1:r,y1:a,x2:o,y2:h,z:u,curve:m,tension:c}=i;super(t,{x1:{value:r,scale:"x"},y1:{value:a,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:h,scale:"y",optional:!0},z:{value:n4(i),optional:!0}},i,Yte),this.z=u,this.curve=VR(m,c)}filter(t){return t}render(t,i,r,a,o){const{x1:h,y1:u,x2:m=h,y2:c=u}=r;return Is("svg:g",o).call(go,this,a,o).call(ka,this,i,0,0).call(d=>d.selectAll().data(YB(t,[h,u,m,c],this,r)).enter().append("path").call(Ao,this).call(KB,this,r).attr("d",j$().curve(this.curve).defined(A=>A>=0).x0(A=>h[A]).y0(A=>u[A]).x1(A=>m[A]).y1(A=>c[A]))).node()}}function LE(e,t){return t===void 0?pA(e,{x:Zb,y:ng}):new ZR(e,t)}function pA(e,t){const{x:i=cd,...r}=Ate(t);return new ZR(e,R4(B4({...r,x1:i,x2:void 0})))}const qte={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Jte extends Ca{constructor(t,i={}){const{x1:r,y1:a,x2:o,y2:h,curve:u,tension:m}=i;super(t,{x1:{value:r,scale:"x"},y1:{value:a,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:h,scale:"y",optional:!0}},i,qte),this.curve=QR(u,m),j9(this,i)}project(t,i,r){this.curve!==Jh&&super.project(t,i,r)}render(t,i,r,a,o){const{x1:h,y1:u,x2:m=h,y2:c=u}=r,{curve:d}=this;return Is("svg:g",o).call(go,this,a,o).call(ka,this,i).call(A=>A.selectAll().data(t).enter().append("path").call(Ao,this).attr("d",d===Jh&&o.projection?Zte(o.projection,h,u,m,c):p=>{const v=Kc(),g=d(v);return g.lineStart(),g.point(h[p],u[p]),g.point(m[p],c[p]),g.lineEnd(),v}).call(Ll,this,r).call(cA,this,r,o)).node()}}function Zte(e,t,i,r,a){const o=Pg(e);return t=Cl(t),i=Cl(i),r=Cl(r),a=Cl(a),h=>o({type:"LineString",coordinates:[[t[h],i[h]],[r[h],a[h]]]})}function By(e,{x:t,x1:i,x2:r,y:a,y1:o,y2:h,...u}={}){return[i,r]=PE(t,i,r),[o,h]=PE(a,o,h),new Jte(e,{...u,x1:i,x2:r,y1:o,y2:h})}function PE(e,t,i){if(e===void 0){if(t===void 0){if(i!==void 0)return[i]}else if(i===void 0)return[t]}else{if(t===void 0)return i===void 0?[e]:[e,i];if(i===void 0)return[e,t]}return[t,i]}class O4 extends Ca{constructor(t,i,r={},a){super(t,i,r,a);const{inset:o=0,insetTop:h=o,insetRight:u=o,insetBottom:m=o,insetLeft:c=o,rx:d,ry:A}=r;this.insetTop=Yr(h),this.insetRight=Yr(u),this.insetBottom=Yr(m),this.insetLeft=Yr(c),this.rx=js(d,"auto"),this.ry=js(A,"auto")}render(t,i,r,a,o){const{rx:h,ry:u}=this;return Is("svg:g",o).call(go,this,a,o).call(this._transform,this,i).call(m=>m.selectAll().data(t).enter().append("rect").call(Ao,this).attr("x",this._x(i,r,a)).attr("width",this._width(i,r,a)).attr("y",this._y(i,r,a)).attr("height",this._height(i,r,a)).call(Fi,"rx",h).call(Fi,"ry",u).call(Ll,this,r)).node()}_x(t,{x:i},{marginLeft:r}){const{insetLeft:a}=this;return i?o=>i[o]+a:r+a}_y(t,{y:i},{marginTop:r}){const{insetTop:a}=this;return i?o=>i[o]+a:r+a}_width({x:t},{x:i},{marginRight:r,marginLeft:a,width:o}){const{insetLeft:h,insetRight:u}=this,m=i&&t?t.bandwidth():o-r-a;return Math.max(0,m-h-u)}_height({y:t},{y:i},{marginTop:r,marginBottom:a,height:o}){const{insetTop:h,insetBottom:u}=this,m=i&&t?t.bandwidth():o-r-a;return Math.max(0,m-h-u)}}const eO={ariaLabel:"bar"};class ene extends O4{constructor(t,i={}){const{x1:r,x2:a,y:o}=i;super(t,{x1:{value:r,scale:"x"},x2:{value:a,scale:"x"},y:{value:o,scale:"y",type:"band",optional:!0}},i,eO)}_transform(t,i,{x:r}){t.call(ka,i,{x:r},0,0)}_x({x:t},{x1:i,x2:r},{marginLeft:a}){const{insetLeft:o}=this;return Ro(t)?a+o:h=>Math.min(i[h],r[h])+o}_width({x:t},{x1:i,x2:r},{marginRight:a,marginLeft:o,width:h}){const{insetLeft:u,insetRight:m}=this;return Ro(t)?h-a-o-u-m:c=>Math.max(0,Math.abs(r[c]-i[c])-u-m)}}class tne extends O4{constructor(t,i={}){const{x:r,y1:a,y2:o}=i;super(t,{y1:{value:a,scale:"y"},y2:{value:o,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},i,eO)}_transform(t,i,{y:r}){t.call(ka,i,{y:r},0,0)}_y({y:t},{y1:i,y2:r},{marginTop:a}){const{insetTop:o}=this;return Ro(t)?a+o:h=>Math.min(i[h],r[h])+o}_height({y:t},{y1:i,y2:r},{marginTop:a,marginBottom:o,height:h}){const{insetTop:u,insetBottom:m}=this;return Ro(t)?h-a-o-u-m:c=>Math.max(0,Math.abs(r[c]-i[c])-u-m)}}function $9(e,t={}){return t4(t)||(t={...t,y:cd,x2:As}),new ene(e,kte(oR(Lte(t))))}function Zh(e,t={}){return t4(t)||(t={...t,x:cd,y2:As}),new tne(e,R4(lR(B4(t))))}const nne={ariaLabel:"cell"};class ine extends O4{constructor(t,{x:i,y:r,...a}={}){super(t,{x:{value:i,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},a,nne)}_transform(t,i){t.call(ka,i,{},0,0)}}function lg(e,{x:t,y:i,...r}={}){return[t,i]=ud(t,i),new ine(e,{...r,x:t,y:i})}const rne={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function sne(e){return e.sort===void 0&&e.reverse===void 0?zq({channel:"-r"},e):e}class ane extends Ca{constructor(t,i={}){const{x:r,y:a,r:o,rotate:h,symbol:u=Jf,frameAnchor:m}=i,[c,d]=La(h,0),[A,p]=Qq(u),[v,g]=La(o,A==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},r:{value:v,scale:"r",filter:Jg,optional:!0},rotate:{value:c,optional:!0},symbol:{value:A,scale:"auto",optional:!0}},sne(i),rne),this.r=g,this.rotate=d,this.symbol=p,this.frameAnchor=nA(m);const{channels:y}=this,{symbol:E}=y;if(E){const{fill:_,stroke:S}=y;E.hint={fill:_?_.value===E.value?"color":"currentColor":this.fill??"currentColor",stroke:S?S.value===E.value?"color":"currentColor":this.stroke??"none"}}}render(t,i,r,a,o){const{x:h,y:u}=i,{x:m,y:c,r:d,rotate:A,symbol:p}=r,{r:v,rotate:g,symbol:y}=this,[E,_]=W9(this,a),S=y===Jf,x=d?void 0:v*v*Math.PI;return Xb(v)&&(t=[]),Is("svg:g",o).call(go,this,a,o).call(ka,this,{x:m&&h,y:c&&u}).call(C=>C.selectAll().data(t).enter().append(S?"circle":"path").call(Ao,this).call(S?w=>{w.attr("cx",m?T=>m[T]:E).attr("cy",c?T=>c[T]:_).attr("r",d?T=>d[T]:v)}:w=>{w.attr("transform",C4`translate(${m?T=>m[T]:E},${c?T=>c[T]:_})${A?T=>` rotate(${A[T]})`:g?` rotate(${g})`:""}`).attr("d",d&&p?T=>{const O=Kc();return p[T].draw(O,d[T]*d[T]*Math.PI),O}:d?T=>{const O=Kc();return y.draw(O,d[T]*d[T]*Math.PI),O}:p?T=>{const O=Kc();return p[T].draw(O,x),O}:(()=>{const T=Kc();return y.draw(T,x),T})())}).call(Ll,this,r)).node()}}function ma(e,{x:t,y:i,...r}={}){return r.frameAnchor===void 0&&([t,i]=ud(t,i)),new ane(e,{...r,x:t,y:i})}const one={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class lne extends Ca{constructor(t,i={}){const{x:r,y:a,z:o,curve:h,tension:u}=i;super(t,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:n4(i),optional:!0}},i,one),this.z=o,this.curve=QR(h,u),j9(this,i)}filter(t){return t}project(t,i,r){this.curve!==Jh&&super.project(t,i,r)}render(t,i,r,a,o){const{x:h,y:u}=r,{curve:m}=this;return Is("svg:g",o).call(go,this,a,o).call(ka,this,i).call(c=>c.selectAll().data(YB(t,[h,u],this,r)).enter().append("path").call(Ao,this).call(KB,this,r).call(XZ,this,r,o).attr("d",m===Jh&&o.projection?cne(o.projection,h,u):NI().curve(m).defined(d=>d>=0).x(d=>h[d]).y(d=>u[d]))).node()}}function cne(e,t,i){const r=Pg(e);return t=Cl(t),i=Cl(i),a=>{let o=[];const h=[o];for(const u of a)u===-1?(o=[],h.push(o)):o.push([t[u],i[u]]);return r({type:"MultiLineString",coordinates:h})}}function gA(e,{x:t,y:i,...r}={}){return[t,i]=ud(t,i),new lne(e,{...r,x:t,y:i})}const une={ariaLabel:"rect"};class tO extends Ca{constructor(t,i={}){const{x1:r,y1:a,x2:o,y2:h,inset:u=0,insetTop:m=u,insetRight:c=u,insetBottom:d=u,insetLeft:A=u,rx:p,ry:v}=i;super(t,{x1:{value:r,scale:"x",type:r!=null&&o==null?"band":void 0,optional:!0},y1:{value:a,scale:"y",type:a!=null&&h==null?"band":void 0,optional:!0},x2:{value:o,scale:"x",optional:!0},y2:{value:h,scale:"y",optional:!0}},i,une),this.insetTop=Yr(m),this.insetRight=Yr(c),this.insetBottom=Yr(d),this.insetLeft=Yr(A),this.rx=js(p,"auto"),this.ry=js(v,"auto")}render(t,i,r,a,o){const{x:h,y:u}=i,{x1:m,y1:c,x2:d,y2:A}=r,{marginTop:p,marginRight:v,marginBottom:g,marginLeft:y,width:E,height:_}=a,{projection:S}=o,{insetTop:x,insetRight:C,insetBottom:w,insetLeft:T,rx:O,ry:B}=this,P=(h!=null&&h.bandwidth?h.bandwidth():0)-T-C,L=(u!=null&&u.bandwidth?u.bandwidth():0)-x-w;return Is("svg:g",o).call(go,this,a,o).call(ka,this,{},0,0).call(N=>N.selectAll().data(t).enter().append("rect").call(Ao,this).attr("x",m&&(S||!Ro(h))?d?F=>Math.min(m[F],d[F])+T:F=>m[F]+T:y+T).attr("y",c&&(S||!Ro(u))?A?F=>Math.min(c[F],A[F])+x:F=>c[F]+x:p+x).attr("width",m&&(S||!Ro(h))?d?F=>Math.max(0,Math.abs(d[F]-m[F])+P):P:E-v-y-C-T).attr("height",c&&(S||!Ro(u))?A?F=>Math.max(0,Math.abs(c[F]-A[F])+L):L:_-p-g-x-w).call(Fi,"rx",O).call(Fi,"ry",B).call(Ll,this,r)).node()}}function hne(e,t){return new tO(e,aR(KZ(t)))}function D4(e,t={}){return t4(t)||(t={...t,x:cd,y2:As,interval:1}),new tO(e,R4(aR(B4(t))))}const dne={ariaLabel:"tick",fill:null,stroke:"currentColor"};class fne extends Ca{constructor(t,i,r){super(t,i,r,dne),j9(this,r)}render(t,i,r,a,o){return Is("svg:g",o).call(go,this,a,o).call(this._transform,this,i).call(h=>h.selectAll().data(t).enter().append("line").call(Ao,this).attr("x1",this._x1(i,r,a)).attr("x2",this._x2(i,r,a)).attr("y1",this._y1(i,r,a)).attr("y2",this._y2(i,r,a)).call(Ll,this,r).call(cA,this,r,o)).node()}}class mne extends fne{constructor(t,i={}){const{x:r,y:a,inset:o=0,insetTop:h=o,insetBottom:u=o}=i;super(t,{x:{value:r,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},i),this.insetTop=Yr(h),this.insetBottom=Yr(u)}_transform(t,i,{x:r}){t.call(ka,i,{x:r},ja,0)}_x1(t,{x:i}){return r=>i[r]}_x2(t,{x:i}){return r=>i[r]}_y1({y:t},{y:i},{marginTop:r}){const{insetTop:a}=this;return i&&t?o=>i[o]+a:r+a}_y2({y:t},{y:i},{height:r,marginBottom:a}){const{insetBottom:o}=this;return i&&t?h=>i[h]+t.bandwidth()-o:r-a-o}}function Jo(e,{x:t=As,...i}={}){return new mne(e,{...i,x:t})}function pne(e,{x1:t,x2:i,y1:r,y2:a,x:o=t===void 0&&i===void 0?cd:void 0,y:h=r===void 0&&a===void 0?As:void 0,fill:u,positiveFill:m="#3ca951",negativeFill:c="#4269d0",fillOpacity:d=1,positiveFillOpacity:A=d,negativeFillOpacity:p=d,stroke:v,strokeOpacity:g,z:y=Lo(v)[0],clip:E,tip:_,render:S,...x}={}){return[t,i]=NE(o,t,i),[r,a]=NE(h,r,a),t===i&&r===a&&(r=Hc(0)),{tip:_}=fd({tip:_},"x"),lA(ra(m)?null:Object.assign(LE(e,{x1:t,x2:i,y1:r,y2:a,z:y,fill:m,fillOpacity:A,render:ag(S,FE(!0)),clip:E,...x}),{ariaLabel:"positive difference"}),ra(c)?null:Object.assign(LE(e,{x1:t,x2:i,y1:r,y2:a,z:y,fill:c,fillOpacity:p,render:ag(S,FE(!1)),clip:E,...x}),{ariaLabel:"negative difference"}),gA(e,{x:i,y:a,z:y,stroke:v,strokeOpacity:g,tip:_,clip:!0,...x}))}function NE(e,t,i){return t===void 0&&i===void 0?t=i=Hc(e):t===void 0?(i=Hc(i),t=e===void 0?i:Hc(e)):i===void 0?(t=Hc(t),i=e===void 0?t:Hc(e)):(t=Hc(t),i=Hc(i)),[t,i]}function Hc(e){let t;const{value:i,label:r=du(i)}=dd(e);return{transform:a=>t||(t=as(a,i)),label:r}}function FE(e){return(t,i,r,a,o,h)=>{const{x1:u,x2:m}=r,{height:c}=a,d=new Float32Array(u.length),A=new Float32Array(m.length);(e===VB(i.y)<0?d:A).fill(c);const p=h(t,i,{...r,x2:u,y2:A},a,o),v=h(t,i,{...r,x1:m,y1:d},a,o),g=p.querySelector("g")??p,y=v.querySelector("g")??v;for(let E=0;g.firstChild;E+=2){const _=Sy(),S=Is("svg:clipPath",o).attr("id",_).node();S.appendChild(g.firstChild),y.childNodes[E].setAttribute("clip-path",`url(#${_})`),y.insertBefore(S,y.childNodes[E])}return v}}function kE({path:e=As,delimiter:t,frameAnchor:i,treeLayout:r=Q1,treeSort:a,treeSeparation:o,treeAnchor:h,treeFilter:u,...m}={}){h=L4(h),a=nO(a),u!=null&&(u=Oy(u)),i===void 0&&(i=h.frameAnchor);const c=iO(t),d=uO(m,Oy),[A,p]=qo(),[v,g]=qo();return{x:A,y:v,frameAnchor:i,...M0(m,(y,E)=>{const _=c(as(y,e)),S=p([]),x=g([]);let C=-1;const w=[],T=[],O=$x().path(P=>_[P]),B=r();B.nodeSize&&B.nodeSize([1,1]),B.separation&&o!==void 0&&B.separation(o??Jb);for(const P of d)P[cg]=P[lO]([]);for(const P of E){const L=[],N=O(P.filter(F=>_[F]!=null)).each(F=>F.data=y[F.data]);a!=null&&N.sort(a),B(N);for(const F of N.descendants())if(!(u!=null&&!u(F))){L.push(++C),w[C]=F.data,h.position(F,C,S,x);for(const z of d)z[cg][C]=z[cO](F)}T.push(L)}return{data:w,facets:T}}),...Object.fromEntries(d)}}function gne({path:e=As,delimiter:t,curve:i="bump-x",stroke:r="#555",strokeWidth:a=1.5,strokeOpacity:o=.5,treeLayout:h=Q1,treeSort:u,treeSeparation:m,treeAnchor:c,treeFilter:d,...A}={}){c=L4(c),u=nO(u),d!=null&&(d=GE(d)),A={curve:i,stroke:r,strokeWidth:a,strokeOpacity:o,...A};const p=iO(t),v=uO(A,GE),[g,y]=qo(),[E,_]=qo(),[S,x]=qo(),[C,w]=qo();return{x1:g,x2:E,y1:S,y2:C,...M0(A,(T,O)=>{const B=p(as(T,e)),P=y([]),L=_([]),N=x([]),F=w([]);let z=-1;const G=[],H=[],j=$x().path(Q=>B[Q]),q=h();q.nodeSize&&q.nodeSize([1,1]),q.separation&&m!==void 0&&q.separation(m??Jb);for(const Q of v)Q[cg]=Q[lO]([]);for(const Q of O){const k=[],K=j(Q.filter(W=>B[W]!=null)).each(W=>W.data=T[W.data]);u!=null&&K.sort(u),q(K);for(const{source:W,target:J}of K.links())if(!(d!=null&&!d(J,W))){k.push(++z),G[z]=J.data,c.position(W,z,P,N),c.position(J,z,L,F);for(const se of v)se[cg][z]=se[cO](J,W)}H.push(k)}return{data:G,facets:H}}),...Object.fromEntries(v)}}function L4(e="left"){switch(`${e}`.trim().toLowerCase()){case"left":return Ane;case"right":return vne}throw new Error(`invalid tree anchor: ${e}`)}const Ane={frameAnchor:"left",dx:6,position({x:e,y:t},i,r,a){r[i]=t,a[i]=-e}},vne={frameAnchor:"right",dx:-6,position({x:e,y:t},i,r,a){r[i]=-t,a[i]=-e}};function nO(e){return e==null||typeof e=="function"?e:`${e}`.trim().toLowerCase().startsWith("node:")?UE(Oy(e)):UE(yne(e))}function UE(e){return(t,i)=>Do(e(t),e(i))}function yne(e){return t=>{var i;return(i=t.data)==null?void 0:i[e]}}function iO(e="/"){if(e=`${e}`,e==="/")return i=>i;if(e.length!==1)throw new Error("delimiter must be exactly one character");const t=e.charCodeAt(0);return i=>i.map(r=>bne(r,t))}const Ry=92,rO=47;function bne(e,t){if(t===Ry)throw new Error("delimiter cannot be backslash");let i=!1;for(let r=0,a=e.length;r<a;++r){switch(e.charCodeAt(r)){case Ry:if(!i){i=!0;continue}break;case t:i?(e=e.slice(0,r-1)+e.slice(r),--r,--a):e=e.slice(0,r)+"/"+e.slice(r+1);break;case rO:i?(e=e.slice(0,r)+"\\\\"+e.slice(r),r+=2,a+=2):(e=e.slice(0,r)+"\\"+e.slice(r),++r,++a);break}i=!1}return e}function Mne(e){let t=!1;for(let i=0,r=e.length;i<r;++i){switch(e.charCodeAt(i)){case Ry:if(!t){t=!0;continue}case rO:t&&(e=e.slice(0,i-1)+e.slice(i),--i,--r);break}t=!1}return e}function sO(e){return Dl(e)&&typeof e.node=="function"}function _ne(e){return Dl(e)&&typeof e.link=="function"}function Oy(e){if(sO(e))return e.node;if(e=`${e}`.trim().toLowerCase(),!!e.startsWith("node:")){switch(e){case"node:name":return Ly;case"node:path":return Dy;case"node:internal":return aO;case"node:external":return oO;case"node:depth":return Py;case"node:height":return Ny}throw new Error(`invalid node value: ${e}`)}}function GE(e){if(sO(e))return e.node;if(_ne(e))return e.link;if(e=`${e}`.trim().toLowerCase(),!(!e.startsWith("node:")&&!e.startsWith("parent:"))){switch(e){case"parent:name":return Yp(Ly);case"parent:path":return Yp(Dy);case"parent:depth":return Yp(Py);case"parent:height":return Yp(Ny);case"node:name":return Ly;case"node:path":return Dy;case"node:internal":return aO;case"node:external":return oO;case"node:depth":return Py;case"node:height":return Ny}throw new Error(`invalid link value: ${e}`)}}function Dy(e){return e.id}function Ly(e){return Cne(e.id)}function Py(e){return e.depth}function Ny(e){return e.height}function aO(e){return!!e.children}function oO(e){return!e.children}function Yp(e){return(t,i)=>i==null?void 0:e(i)}function Cne(e){let t=e.length;for(;--t>0&&!Ene(e,t););return Mne(e.slice(t+1))}function Ene(e,t){if(e[t]==="/"){let i=0;for(;t>0&&e[--t]==="\\";)++i;if(!(i&1))return!0}return!1}const lO=2,cO=3,cg=4;function uO(e,t){const i=[];for(const r in e){const a=e[r],o=t(a);o!==void 0&&i.push([r,...qo(a),o])}return i}function wne(e,{fill:t,stroke:i,strokeWidth:r,strokeOpacity:a,strokeLinejoin:o,strokeLinecap:h,strokeMiterlimit:u,strokeDasharray:m,strokeDashoffset:c,marker:d,markerStart:A=d,markerEnd:p=d,dot:v=ra(A)&&ra(p),text:g="node:name",textStroke:y="var(--plot-background)",title:E="node:path",dx:_,dy:S,textAnchor:x,treeLayout:C=Q1,textLayout:w=C===Q1||C===zx?"mirrored":"normal",tip:T,...O}={}){if(_===void 0&&(_=L4(O.treeAnchor).dx),x!==void 0)throw new Error("textAnchor is not a configurable tree option");w=No(w,"textLayout",["mirrored","normal"]);function B(P){return Na(e,kE({treeLayout:C,text:g,fill:t===void 0?"currentColor":t,stroke:y,dx:_,dy:S,title:E,...P,...O}))}return lA(By(e,gne({treeLayout:C,markerStart:A,markerEnd:p,stroke:i!==void 0?i:t===void 0?"node:internal":t,strokeWidth:r,strokeOpacity:a,strokeLinejoin:o,strokeLinecap:h,strokeMiterlimit:u,strokeDasharray:m,strokeDashoffset:c,...O})),v?ma(e,kE({treeLayout:C,fill:t===void 0?"node:internal":t,title:E,tip:T,...O})):null,g!=null?w==="mirrored"?[B({textAnchor:"start",treeFilter:"node:external"}),B({textAnchor:"end",treeFilter:"node:internal",dx:-_})]:B():null)}function xne(e,t){return wne(e,{...t,treeLayout:zx})}Ca.prototype.plot=function({marks:e=[],...t}={}){return lr({...t,marks:[...e,this]})};const hO=new Map,dO=new Map,Sne=new Map,Ine=new Map;function h1(e){return hO.get(e)}function AA(e){return dO.get(e)}function Ff(e){const t=e%12;return t===1||t===3||t===6||t===8||t===10}const VE=new Map([["Cb","B"],["Db","C#"],["Eb","D#"],["Fb","E"],["Gb","F#"],["Ab","G#"],["Bb","A#"]]),cu=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],X9=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],ed=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],Tne=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],Bne=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of ed)hO.set(e.pitch,e),dO.set(e.label,e);for(const e of Tne)Sne.set(e.number,e);for(const e of Bne){const t=`${e.number}-${e.subnumber}`;Ine.set(t,e)}class fc{constructor(t=0,i=0,r=127,a=0,o=null){if(t<0||t>127)throw new Error(`Invalid pitch ${t}`);try{this.name=h1(t).label}catch{throw new Error(`Invalid pitch ${t}`)}this.pitch=t,this.start=i,this.velocity=r,this.channel=a,this.end=o}static from(t){let{pitch:i=0,start:r=0,velocity:a=127,channel:o=0,end:h=null,duration:u=null}=t;if(typeof i=="string"&&Number.isNaN(+i)){const m=AA(i);if(m==null)throw new Error("Invalid pitch for Note.from()");i=m.pitch}return h==null&&u!==null&&!Number.isNaN(u)&&(h=r+u),new fc(i,r,a,o,h)}static startPitchComparator(t,i){return t.start!==i.start?t.start-i.start:t.pitch-i.pitch}clone(){return new fc(this.pitch,this.start,this.velocity,this.channel,this.end)}getDuration(){return this.end===null?0:this.end-this.start}getName(){return this.name}getLetter(){return h1(this.pitch).name}getOctave(){return h1(this.pitch).octave}shiftTime(t){const i=this.clone();return i.start+=t,i.end=i.end===null?null:i.end+t,i}scaleTime(t){const i=this.clone();return i.start*=t,i.end=i.end===null?null:i.end*t,i}overlapsInTime(t){return this.start>=t.start&&this.start<=t.end||this.end>=t.start&&this.end<=t.end}overlapInSeconds(t){if(!this.overlapsInTime(t))return 0;const i=Math.max(this.start,t.start);return Math.min(this.end,t.end)-i}equals(t){return t instanceof fc?this.pitch===t.pitch&&this.start===t.start&&this.velocity===t.velocity&&this.channel===t.channel&&this.end===t.end:!1}toString(t=!1){return t?`Note(n: ${this.name}, p: ${this.pitch}, s: ${this.start}, e: ${this.end}, v: ${this.velocity}, c: ${this.channel})`:`Note(name: ${this.name}, pitch: ${this.pitch}, start: ${this.start}, end: ${this.end}, velocity: ${this.velocity}, channel: ${this.channel})`}}class vh extends fc{constructor(t=0,i=0,r=127,a=0,o=null,h=null,u=null){super(t,i,r,a,o),this.string=h,this.fret=u}static from(t){let{pitch:i=0,start:r=0,velocity:a=127,channel:o=0,end:h=null,string:u=null,fret:m=null}=t;if(typeof i=="string"&&Number.isNaN(+i)){const c=AA(i);if(c==null)throw new Error("Invalid pitch for GuitarNote.from()");i=c.pitch}return new vh(i,r,a,o,h,u,m)}static fromNote(t,i,r){return new vh(t.pitch,t.start,t.velocity,t.channel,t.end,i,r)}toNote(){return new fc(this.pitch,this.start,this.velocity,this.channel,this.end)}clone(){return new vh(this.pitch,this.start,this.velocity,this.channel,this.end,this.string,this.fret)}equals(t){return t instanceof vh?this.pitch===t.pitch&&this.start===t.start&&this.velocity===t.velocity&&this.channel===t.channel&&this.end===t.end&&this.string===t.string&&this.fret===t.fret:!1}toString(t=!1){return t?`GuitarNote(n: ${this.name}, p: ${this.pitch}, s: ${this.start}, e: ${this.end}, v: ${this.velocity}, c: ${this.channel}, s: ${this.string}, f: ${this.fret})`:`GuitarNote(name: ${this.name}, pitch: ${this.pitch}, start: ${this.start}, end: ${this.end}, velocity: ${this.velocity}, channel: ${this.channel}, string: ${this.string}, fret: ${this.fret})`}}function Rne(e,t){let i;if(t===void 0)for(const r of e)r!=null&&(i>r||i===void 0&&r>=r)&&(i=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(i>a||i===void 0&&a>=a)&&(i=a)}return i}var One={value:()=>{}};function fO(){for(var e=0,t=arguments.length,i={},r;e<t;++e){if(!(r=arguments[e]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new d1(i)}function d1(e){this._=e}function Dne(e,t){return e.trim().split(/^|\s+/).map(function(i){var r="",a=i.indexOf(".");if(a>=0&&(r=i.slice(a+1),i=i.slice(0,a)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:r}})}d1.prototype=fO.prototype={constructor:d1,on:function(e,t){var i=this._,r=Dne(e+"",i),a,o=-1,h=r.length;if(arguments.length<2){for(;++o<h;)if((a=(e=r[o]).type)&&(a=Lne(i[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<h;)if(a=(e=r[o]).type)i[a]=QE(i[a],e.name,t);else if(t==null)for(a in i)i[a]=QE(i[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new d1(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var i=new Array(a),r=0,a,o;r<a;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,i)}};function Lne(e,t){for(var i=0,r=e.length,a;i<r;++i)if((a=e[i]).name===t)return a.value}function QE(e,t,i){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=One,e=e.slice(0,r).concat(e.slice(r+1));break}return i!=null&&e.push({name:t,value:i}),e}var Fy="http://www.w3.org/1999/xhtml";const HE={svg:"http://www.w3.org/2000/svg",xhtml:Fy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vA(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),HE.hasOwnProperty(t)?{space:HE[t],local:e}:e}function Pne(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===Fy&&t.documentElement.namespaceURI===Fy?t.createElement(e):t.createElementNS(i,e)}}function Nne(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function mO(e){var t=vA(e);return(t.local?Nne:Pne)(t)}function Fne(){}function P4(e){return e==null?Fne:function(){return this.querySelector(e)}}function kne(e){typeof e!="function"&&(e=P4(e));for(var t=this._groups,i=t.length,r=new Array(i),a=0;a<i;++a)for(var o=t[a],h=o.length,u=r[a]=new Array(h),m,c,d=0;d<h;++d)(m=o[d])&&(c=e.call(m,m.__data__,d,o))&&("__data__"in m&&(c.__data__=m.__data__),u[d]=c);return new Po(r,this._parents)}function pO(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Une(){return[]}function gO(e){return e==null?Une:function(){return this.querySelectorAll(e)}}function Gne(e){return function(){var t=e.apply(this,arguments);return t==null?[]:pO(t)}}function Vne(e){typeof e=="function"?e=Gne(e):e=gO(e);for(var t=this._groups,i=t.length,r=[],a=[],o=0;o<i;++o)for(var h=t[o],u=h.length,m,c=0;c<u;++c)(m=h[c])&&(r.push(e.call(m,m.__data__,c,h)),a.push(m));return new Po(r,a)}function AO(e){return function(){return this.matches(e)}}function vO(e){return function(t){return t.matches(e)}}var Qne=Array.prototype.find;function Hne(e){return function(){return Qne.call(this.children,e)}}function zne(){return this.firstElementChild}function Wne(e){return this.select(e==null?zne:Hne(typeof e=="function"?e:vO(e)))}var jne=Array.prototype.filter;function $ne(){return this.children}function Xne(e){return function(){return jne.call(this.children,e)}}function Kne(e){return this.selectAll(e==null?$ne:Xne(typeof e=="function"?e:vO(e)))}function Yne(e){typeof e!="function"&&(e=AO(e));for(var t=this._groups,i=t.length,r=new Array(i),a=0;a<i;++a)for(var o=t[a],h=o.length,u=r[a]=[],m,c=0;c<h;++c)(m=o[c])&&e.call(m,m.__data__,c,o)&&u.push(m);return new Po(r,this._parents)}function yO(e){return new Array(e.length)}function qne(){return new Po(this._enter||this._groups.map(yO),this._parents)}function ug(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ug.prototype={constructor:ug,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Jne(e){return function(){return e}}function Zne(e,t,i,r,a,o){for(var h=0,u,m=t.length,c=o.length;h<c;++h)(u=t[h])?(u.__data__=o[h],r[h]=u):i[h]=new ug(e,o[h]);for(;h<m;++h)(u=t[h])&&(a[h]=u)}function eie(e,t,i,r,a,o,h){var u,m,c=new Map,d=t.length,A=o.length,p=new Array(d),v;for(u=0;u<d;++u)(m=t[u])&&(p[u]=v=h.call(m,m.__data__,u,t)+"",c.has(v)?a[u]=m:c.set(v,m));for(u=0;u<A;++u)v=h.call(e,o[u],u,o)+"",(m=c.get(v))?(r[u]=m,m.__data__=o[u],c.delete(v)):i[u]=new ug(e,o[u]);for(u=0;u<d;++u)(m=t[u])&&c.get(p[u])===m&&(a[u]=m)}function tie(e){return e.__data__}function nie(e,t){if(!arguments.length)return Array.from(this,tie);var i=t?eie:Zne,r=this._parents,a=this._groups;typeof e!="function"&&(e=Jne(e));for(var o=a.length,h=new Array(o),u=new Array(o),m=new Array(o),c=0;c<o;++c){var d=r[c],A=a[c],p=A.length,v=pO(e.call(d,d&&d.__data__,c,r)),g=v.length,y=u[c]=new Array(g),E=h[c]=new Array(g),_=m[c]=new Array(p);i(d,A,y,E,_,v,t);for(var S=0,x=0,C,w;S<g;++S)if(C=y[S]){for(S>=x&&(x=S+1);!(w=E[x])&&++x<g;);C._next=w||null}}return h=new Po(h,r),h._enter=u,h._exit=m,h}function iie(){return new Po(this._exit||this._groups.map(yO),this._parents)}function rie(e,t,i){var r=this.enter(),a=this,o=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(a=t(a)),i==null?o.remove():i(o),r&&a?r.merge(a).order():a}function sie(e){if(!(e instanceof Po))throw new Error("invalid merge");for(var t=this._groups,i=e._groups,r=t.length,a=i.length,o=Math.min(r,a),h=new Array(r),u=0;u<o;++u)for(var m=t[u],c=i[u],d=m.length,A=h[u]=new Array(d),p,v=0;v<d;++v)(p=m[v]||c[v])&&(A[v]=p);for(;u<r;++u)h[u]=t[u];return new Po(h,this._parents)}function aie(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var r=e[t],a=r.length-1,o=r[a],h;--a>=0;)(h=r[a])&&(o&&h.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(h,o),o=h);return this}function oie(e){e||(e=lie);function t(A,p){return A&&p?e(A.__data__,p.__data__):!A-!p}for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o){for(var h=i[o],u=h.length,m=a[o]=new Array(u),c,d=0;d<u;++d)(c=h[d])&&(m[d]=c);m.sort(t)}return new Po(a,this._parents).order()}function lie(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function cie(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function uie(){return Array.from(this)}function hie(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var h=r[a];if(h)return h}return null}function die(){let e=0;for(const t of this)++e;return e}function fie(){return!this.node()}function mie(e){for(var t=this._groups,i=0,r=t.length;i<r;++i)for(var a=t[i],o=0,h=a.length,u;o<h;++o)(u=a[o])&&e.call(u,u.__data__,o,a);return this}function pie(e){return function(){this.removeAttribute(e)}}function gie(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Aie(e,t){return function(){this.setAttribute(e,t)}}function vie(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function yie(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function bie(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function Mie(e,t){var i=vA(e);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((t==null?i.local?gie:pie:typeof t=="function"?i.local?bie:yie:i.local?vie:Aie)(i,t))}function bO(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _ie(e){return function(){this.style.removeProperty(e)}}function Cie(e,t,i){return function(){this.style.setProperty(e,t,i)}}function Eie(e,t,i){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,i)}}function wie(e,t,i){return arguments.length>1?this.each((t==null?_ie:typeof t=="function"?Eie:Cie)(e,t,i??"")):td(this.node(),e)}function td(e,t){return e.style.getPropertyValue(t)||bO(e).getComputedStyle(e,null).getPropertyValue(t)}function xie(e){return function(){delete this[e]}}function Sie(e,t){return function(){this[e]=t}}function Iie(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function Tie(e,t){return arguments.length>1?this.each((t==null?xie:typeof t=="function"?Iie:Sie)(e,t)):this.node()[e]}function MO(e){return e.trim().split(/^|\s+/)}function N4(e){return e.classList||new _O(e)}function _O(e){this._node=e,this._names=MO(e.getAttribute("class")||"")}_O.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function CO(e,t){for(var i=N4(e),r=-1,a=t.length;++r<a;)i.add(t[r])}function EO(e,t){for(var i=N4(e),r=-1,a=t.length;++r<a;)i.remove(t[r])}function Bie(e){return function(){CO(this,e)}}function Rie(e){return function(){EO(this,e)}}function Oie(e,t){return function(){(t.apply(this,arguments)?CO:EO)(this,e)}}function Die(e,t){var i=MO(e+"");if(arguments.length<2){for(var r=N4(this.node()),a=-1,o=i.length;++a<o;)if(!r.contains(i[a]))return!1;return!0}return this.each((typeof t=="function"?Oie:t?Bie:Rie)(i,t))}function Lie(){this.textContent=""}function Pie(e){return function(){this.textContent=e}}function Nie(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Fie(e){return arguments.length?this.each(e==null?Lie:(typeof e=="function"?Nie:Pie)(e)):this.node().textContent}function kie(){this.innerHTML=""}function Uie(e){return function(){this.innerHTML=e}}function Gie(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Vie(e){return arguments.length?this.each(e==null?kie:(typeof e=="function"?Gie:Uie)(e)):this.node().innerHTML}function Qie(){this.nextSibling&&this.parentNode.appendChild(this)}function Hie(){return this.each(Qie)}function zie(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Wie(){return this.each(zie)}function jie(e){var t=typeof e=="function"?e:mO(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function $ie(){return null}function Xie(e,t){var i=typeof e=="function"?e:mO(e),r=t==null?$ie:typeof t=="function"?t:P4(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)})}function Kie(){var e=this.parentNode;e&&e.removeChild(this)}function Yie(){return this.each(Kie)}function qie(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jie(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zie(e){return this.select(e?Jie:qie)}function ere(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tre(e){return function(t){e.call(this,t,this.__data__)}}function nre(e){return e.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");return r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),{type:t,name:i}})}function ire(e){return function(){var t=this.__on;if(t){for(var i=0,r=-1,a=t.length,o;i<a;++i)o=t[i],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function rre(e,t,i){return function(){var r=this.__on,a,o=tre(t);if(r){for(var h=0,u=r.length;h<u;++h)if((a=r[h]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=i),a.value=t;return}}this.addEventListener(e.type,o,i),a={type:e.type,name:e.name,value:t,listener:o,options:i},r?r.push(a):this.__on=[a]}}function sre(e,t,i){var r=nre(e+""),a,o=r.length,h;if(arguments.length<2){var u=this.node().__on;if(u){for(var m=0,c=u.length,d;m<c;++m)for(a=0,d=u[m];a<o;++a)if((h=r[a]).type===d.type&&h.name===d.name)return d.value}return}for(u=t?rre:ire,a=0;a<o;++a)this.each(u(r[a],t,i));return this}function wO(e,t,i){var r=bO(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,i):(a=r.document.createEvent("Event"),i?(a.initEvent(t,i.bubbles,i.cancelable),a.detail=i.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function are(e,t){return function(){return wO(this,e,t)}}function ore(e,t){return function(){return wO(this,e,t.apply(this,arguments))}}function lre(e,t){return this.each((typeof t=="function"?ore:are)(e,t))}function*cre(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],a=0,o=r.length,h;a<o;++a)(h=r[a])&&(yield h)}var ure=[null];function Po(e,t){this._groups=e,this._parents=t}function K9(){return new Po([[document.documentElement]],ure)}function hre(){return this}Po.prototype=K9.prototype={constructor:Po,select:kne,selectAll:Vne,selectChild:Wne,selectChildren:Kne,filter:Yne,data:nie,enter:qne,exit:iie,join:rie,merge:sie,selection:hre,order:aie,sort:oie,call:cie,nodes:uie,node:hie,size:die,empty:fie,each:mie,attr:Mie,style:wie,property:Tie,classed:Die,text:Fie,html:Vie,raise:Hie,lower:Wie,append:jie,insert:Xie,remove:Yie,clone:Zie,datum:ere,on:sre,dispatch:lre,[Symbol.iterator]:cre};function F4(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function xO(e,t){var i=Object.create(e.prototype);for(var r in t)i[r]=t[r];return i}function Y9(){}var r9=.7,hg=1/r9,xh="\\s*([+-]?\\d+)\\s*",s9="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sl="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dre=/^#([0-9a-f]{3,8})$/,fre=new RegExp("^rgb\\("+[xh,xh,xh]+"\\)$"),mre=new RegExp("^rgb\\("+[Sl,Sl,Sl]+"\\)$"),pre=new RegExp("^rgba\\("+[xh,xh,xh,s9]+"\\)$"),gre=new RegExp("^rgba\\("+[Sl,Sl,Sl,s9]+"\\)$"),Are=new RegExp("^hsl\\("+[s9,Sl,Sl]+"\\)$"),vre=new RegExp("^hsla\\("+[s9,Sl,Sl,s9]+"\\)$"),zE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};F4(Y9,nd,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:WE,formatHex:WE,formatHsl:yre,formatRgb:jE,toString:jE});function WE(){return this.rgb().formatHex()}function yre(){return SO(this).formatHsl()}function jE(){return this.rgb().formatRgb()}function nd(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=dre.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?$E(t):i===3?new uo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?qp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?qp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fre.exec(e))?new uo(t[1],t[2],t[3],1):(t=mre.exec(e))?new uo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pre.exec(e))?qp(t[1],t[2],t[3],t[4]):(t=gre.exec(e))?qp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Are.exec(e))?YE(t[1],t[2]/100,t[3]/100,1):(t=vre.exec(e))?YE(t[1],t[2]/100,t[3]/100,t[4]):zE.hasOwnProperty(e)?$E(zE[e]):e==="transparent"?new uo(NaN,NaN,NaN,0):null}function $E(e){return new uo(e>>16&255,e>>8&255,e&255,1)}function qp(e,t,i,r){return r<=0&&(e=t=i=NaN),new uo(e,t,i,r)}function bre(e){return e instanceof Y9||(e=nd(e)),e?(e=e.rgb(),new uo(e.r,e.g,e.b,e.opacity)):new uo}function ky(e,t,i,r){return arguments.length===1?bre(e):new uo(e,t,i,r??1)}function uo(e,t,i,r){this.r=+e,this.g=+t,this.b=+i,this.opacity=+r}F4(uo,ky,xO(Y9,{brighter:function(e){return e=e==null?hg:Math.pow(hg,e),new uo(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?r9:Math.pow(r9,e),new uo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XE,formatHex:XE,formatRgb:KE,toString:KE}));function XE(){return"#"+mv(this.r)+mv(this.g)+mv(this.b)}function KE(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function mv(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function YE(e,t,i,r){return r<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Ml(e,t,i,r)}function SO(e){if(e instanceof Ml)return new Ml(e.h,e.s,e.l,e.opacity);if(e instanceof Y9||(e=nd(e)),!e)return new Ml;if(e instanceof Ml)return e;e=e.rgb();var t=e.r/255,i=e.g/255,r=e.b/255,a=Math.min(t,i,r),o=Math.max(t,i,r),h=NaN,u=o-a,m=(o+a)/2;return u?(t===o?h=(i-r)/u+(i<r)*6:i===o?h=(r-t)/u+2:h=(t-i)/u+4,u/=m<.5?o+a:2-o-a,h*=60):u=m>0&&m<1?0:h,new Ml(h,u,m,e.opacity)}function IO(e,t,i,r){return arguments.length===1?SO(e):new Ml(e,t,i,r??1)}function Ml(e,t,i,r){this.h=+e,this.s=+t,this.l=+i,this.opacity=+r}F4(Ml,IO,xO(Y9,{brighter:function(e){return e=e==null?hg:Math.pow(hg,e),new Ml(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?r9:Math.pow(r9,e),new Ml(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*t,a=2*i-r;return new uo(pv(e>=240?e-240:e+120,a,r),pv(e,a,r),pv(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function pv(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const TO=e=>()=>e;function Mre(e,t){return function(i){return e+i*t}}function _re(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(r){return Math.pow(e+r*t,i)}}function Cre(e){return(e=+e)==1?BO:function(t,i){return i-t?_re(t,i,e):TO(isNaN(t)?i:t)}}function BO(e,t){var i=t-e;return i?Mre(e,i):TO(isNaN(e)?t:e)}const Uy=function e(t){var i=Cre(t);function r(a,o){var h=i((a=ky(a)).r,(o=ky(o)).r),u=i(a.g,o.g),m=i(a.b,o.b),c=BO(a.opacity,o.opacity);return function(d){return a.r=h(d),a.g=u(d),a.b=m(d),a.opacity=c(d),a+""}}return r.gamma=e,r}(1);function Wc(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}var Gy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gv=new RegExp(Gy.source,"g");function Ere(e){return function(){return e}}function wre(e){return function(t){return e(t)+""}}function xre(e,t){var i=Gy.lastIndex=gv.lastIndex=0,r,a,o,h=-1,u=[],m=[];for(e=e+"",t=t+"";(r=Gy.exec(e))&&(a=gv.exec(t));)(o=a.index)>i&&(o=t.slice(i,o),u[h]?u[h]+=o:u[++h]=o),(r=r[0])===(a=a[0])?u[h]?u[h]+=a:u[++h]=a:(u[++h]=null,m.push({i:h,x:Wc(r,a)})),i=gv.lastIndex;return i<t.length&&(o=t.slice(i),u[h]?u[h]+=o:u[++h]=o),u.length<2?m[0]?wre(m[0].x):Ere(t):(t=m.length,function(c){for(var d=0,A;d<t;++d)u[(A=m[d]).i]=A.x(c);return u.join("")})}var qE=180/Math.PI,Vy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function RO(e,t,i,r,a,o){var h,u,m;return(h=Math.sqrt(e*e+t*t))&&(e/=h,t/=h),(m=e*i+t*r)&&(i-=e*m,r-=t*m),(u=Math.sqrt(i*i+r*r))&&(i/=u,r/=u,m/=u),e*r<t*i&&(e=-e,t=-t,m=-m,h=-h),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*qE,skewX:Math.atan(m)*qE,scaleX:h,scaleY:u}}var Jp;function Sre(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Vy:RO(t.a,t.b,t.c,t.d,t.e,t.f)}function Ire(e){return e==null||(Jp||(Jp=document.createElementNS("http://www.w3.org/2000/svg","g")),Jp.setAttribute("transform",e),!(e=Jp.transform.baseVal.consolidate()))?Vy:(e=e.matrix,RO(e.a,e.b,e.c,e.d,e.e,e.f))}function OO(e,t,i,r){function a(c){return c.length?c.pop()+" ":""}function o(c,d,A,p,v,g){if(c!==A||d!==p){var y=v.push("translate(",null,t,null,i);g.push({i:y-4,x:Wc(c,A)},{i:y-2,x:Wc(d,p)})}else(A||p)&&v.push("translate("+A+t+p+i)}function h(c,d,A,p){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),p.push({i:A.push(a(A)+"rotate(",null,r)-2,x:Wc(c,d)})):d&&A.push(a(A)+"rotate("+d+r)}function u(c,d,A,p){c!==d?p.push({i:A.push(a(A)+"skewX(",null,r)-2,x:Wc(c,d)}):d&&A.push(a(A)+"skewX("+d+r)}function m(c,d,A,p,v,g){if(c!==A||d!==p){var y=v.push(a(v)+"scale(",null,",",null,")");g.push({i:y-4,x:Wc(c,A)},{i:y-2,x:Wc(d,p)})}else(A!==1||p!==1)&&v.push(a(v)+"scale("+A+","+p+")")}return function(c,d){var A=[],p=[];return c=e(c),d=e(d),o(c.translateX,c.translateY,d.translateX,d.translateY,A,p),h(c.rotate,d.rotate,A,p),u(c.skewX,d.skewX,A,p),m(c.scaleX,c.scaleY,d.scaleX,d.scaleY,A,p),c=d=null,function(v){for(var g=-1,y=p.length,E;++g<y;)A[(E=p[g]).i]=E.x(v);return A.join("")}}}var Tre=OO(Sre,"px, ","px)","deg)"),Bre=OO(Ire,", ",")",")"),id=0,_f=0,df=0,DO=1e3,dg,Cf,fg=0,m0=0,yA=0,a9=typeof performance=="object"&&performance.now?performance:Date,LO=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function k4(){return m0||(LO(Rre),m0=a9.now()+yA)}function Rre(){m0=0}function mg(){this._call=this._time=this._next=null}mg.prototype=PO.prototype={constructor:mg,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?k4():+i)+(t==null?0:+t),!this._next&&Cf!==this&&(Cf?Cf._next=this:dg=this,Cf=this),this._call=e,this._time=i,Qy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Qy())}};function PO(e,t,i){var r=new mg;return r.restart(e,t,i),r}function Ore(){k4(),++id;for(var e=dg,t;e;)(t=m0-e._time)>=0&&e._call.call(null,t),e=e._next;--id}function JE(){m0=(fg=a9.now())+yA,id=_f=0;try{Ore()}finally{id=0,Lre(),m0=0}}function Dre(){var e=a9.now(),t=e-fg;t>DO&&(yA-=t,fg=e)}function Lre(){for(var e,t=dg,i,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:dg=i);Cf=e,Qy(r)}function Qy(e){if(!id){_f&&(_f=clearTimeout(_f));var t=e-m0;t>24?(e<1/0&&(_f=setTimeout(JE,e-a9.now()-yA)),df&&(df=clearInterval(df))):(df||(fg=a9.now(),df=setInterval(Dre,DO)),id=1,LO(JE))}}function ZE(e,t,i){var r=new mg;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,i),r}var Pre=fO("start","end","cancel","interrupt"),Nre=[],NO=0,e7=1,Hy=2,f1=3,t7=4,zy=5,m1=6;function bA(e,t,i,r,a,o){var h=e.__transition;if(!h)e.__transition={};else if(i in h)return;Fre(e,i,{name:t,index:r,group:a,on:Pre,tween:Nre,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:NO})}function U4(e,t){var i=rl(e,t);if(i.state>NO)throw new Error("too late; already scheduled");return i}function Pl(e,t){var i=rl(e,t);if(i.state>f1)throw new Error("too late; already running");return i}function rl(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function Fre(e,t,i){var r=e.__transition,a;r[t]=i,i.timer=PO(o,0,i.time);function o(c){i.state=e7,i.timer.restart(h,i.delay,i.time),i.delay<=c&&h(c-i.delay)}function h(c){var d,A,p,v;if(i.state!==e7)return m();for(d in r)if(v=r[d],v.name===i.name){if(v.state===f1)return ZE(h);v.state===t7?(v.state=m1,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete r[d]):+d<t&&(v.state=m1,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete r[d])}if(ZE(function(){i.state===f1&&(i.state=t7,i.timer.restart(u,i.delay,i.time),u(c))}),i.state=Hy,i.on.call("start",e,e.__data__,i.index,i.group),i.state===Hy){for(i.state=f1,a=new Array(p=i.tween.length),d=0,A=-1;d<p;++d)(v=i.tween[d].value.call(e,e.__data__,i.index,i.group))&&(a[++A]=v);a.length=A+1}}function u(c){for(var d=c<i.duration?i.ease.call(null,c/i.duration):(i.timer.restart(m),i.state=zy,1),A=-1,p=a.length;++A<p;)a[A].call(e,d);i.state===zy&&(i.on.call("end",e,e.__data__,i.index,i.group),m())}function m(){i.state=m1,i.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function kre(e,t){var i=e.__transition,r,a,o=!0,h;if(i){t=t==null?null:t+"";for(h in i){if((r=i[h]).name!==t){o=!1;continue}a=r.state>Hy&&r.state<zy,r.state=m1,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete i[h]}o&&delete e.__transition}}function Ure(e){return this.each(function(){kre(this,e)})}function Gre(e,t){var i,r;return function(){var a=Pl(this,e),o=a.tween;if(o!==i){r=i=o;for(var h=0,u=r.length;h<u;++h)if(r[h].name===t){r=r.slice(),r.splice(h,1);break}}a.tween=r}}function Vre(e,t,i){var r,a;if(typeof i!="function")throw new Error;return function(){var o=Pl(this,e),h=o.tween;if(h!==r){a=(r=h).slice();for(var u={name:t,value:i},m=0,c=a.length;m<c;++m)if(a[m].name===t){a[m]=u;break}m===c&&a.push(u)}o.tween=a}}function Qre(e,t){var i=this._id;if(e+="",arguments.length<2){for(var r=rl(this.node(),i).tween,a=0,o=r.length,h;a<o;++a)if((h=r[a]).name===e)return h.value;return null}return this.each((t==null?Gre:Vre)(i,e,t))}function G4(e,t,i){var r=e._id;return e.each(function(){var a=Pl(this,r);(a.value||(a.value={}))[t]=i.apply(this,arguments)}),function(a){return rl(a,r).value[t]}}function FO(e,t){var i;return(typeof t=="number"?Wc:t instanceof nd?Uy:(i=nd(t))?(t=i,Uy):xre)(e,t)}function Hre(e){return function(){this.removeAttribute(e)}}function zre(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wre(e,t,i){var r,a=i+"",o;return function(){var h=this.getAttribute(e);return h===a?null:h===r?o:o=t(r=h,i)}}function jre(e,t,i){var r,a=i+"",o;return function(){var h=this.getAttributeNS(e.space,e.local);return h===a?null:h===r?o:o=t(r=h,i)}}function $re(e,t,i){var r,a,o;return function(){var h,u=i(this),m;return u==null?void this.removeAttribute(e):(h=this.getAttribute(e),m=u+"",h===m?null:h===r&&m===a?o:(a=m,o=t(r=h,u)))}}function Xre(e,t,i){var r,a,o;return function(){var h,u=i(this),m;return u==null?void this.removeAttributeNS(e.space,e.local):(h=this.getAttributeNS(e.space,e.local),m=u+"",h===m?null:h===r&&m===a?o:(a=m,o=t(r=h,u)))}}function Kre(e,t){var i=vA(e),r=i==="transform"?Bre:FO;return this.attrTween(e,typeof t=="function"?(i.local?Xre:$re)(i,r,G4(this,"attr."+e,t)):t==null?(i.local?zre:Hre)(i):(i.local?jre:Wre)(i,r,t))}function Yre(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function qre(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function Jre(e,t){var i,r;function a(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&qre(e,o)),i}return a._value=t,a}function Zre(e,t){var i,r;function a(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&Yre(e,o)),i}return a._value=t,a}function ese(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var r=vA(e);return this.tween(i,(r.local?Jre:Zre)(r,t))}function tse(e,t){return function(){U4(this,e).delay=+t.apply(this,arguments)}}function nse(e,t){return t=+t,function(){U4(this,e).delay=t}}function ise(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tse:nse)(t,e)):rl(this.node(),t).delay}function rse(e,t){return function(){Pl(this,e).duration=+t.apply(this,arguments)}}function sse(e,t){return t=+t,function(){Pl(this,e).duration=t}}function ase(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rse:sse)(t,e)):rl(this.node(),t).duration}function ose(e,t){if(typeof t!="function")throw new Error;return function(){Pl(this,e).ease=t}}function lse(e){var t=this._id;return arguments.length?this.each(ose(t,e)):rl(this.node(),t).ease}function cse(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;Pl(this,e).ease=i}}function use(e){if(typeof e!="function")throw new Error;return this.each(cse(this._id,e))}function hse(e){typeof e!="function"&&(e=AO(e));for(var t=this._groups,i=t.length,r=new Array(i),a=0;a<i;++a)for(var o=t[a],h=o.length,u=r[a]=[],m,c=0;c<h;++c)(m=o[c])&&e.call(m,m.__data__,c,o)&&u.push(m);return new yc(r,this._parents,this._name,this._id)}function dse(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,r=t.length,a=i.length,o=Math.min(r,a),h=new Array(r),u=0;u<o;++u)for(var m=t[u],c=i[u],d=m.length,A=h[u]=new Array(d),p,v=0;v<d;++v)(p=m[v]||c[v])&&(A[v]=p);for(;u<r;++u)h[u]=t[u];return new yc(h,this._parents,this._name,this._id)}function fse(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function mse(e,t,i){var r,a,o=fse(t)?U4:Pl;return function(){var h=o(this,e),u=h.on;u!==r&&(a=(r=u).copy()).on(t,i),h.on=a}}function pse(e,t){var i=this._id;return arguments.length<2?rl(this.node(),i).on.on(e):this.each(mse(i,e,t))}function gse(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function Ase(){return this.on("end.remove",gse(this._id))}function vse(e){var t=this._name,i=this._id;typeof e!="function"&&(e=P4(e));for(var r=this._groups,a=r.length,o=new Array(a),h=0;h<a;++h)for(var u=r[h],m=u.length,c=o[h]=new Array(m),d,A,p=0;p<m;++p)(d=u[p])&&(A=e.call(d,d.__data__,p,u))&&("__data__"in d&&(A.__data__=d.__data__),c[p]=A,bA(c[p],t,i,p,c,rl(d,i)));return new yc(o,this._parents,t,i)}function yse(e){var t=this._name,i=this._id;typeof e!="function"&&(e=gO(e));for(var r=this._groups,a=r.length,o=[],h=[],u=0;u<a;++u)for(var m=r[u],c=m.length,d,A=0;A<c;++A)if(d=m[A]){for(var p=e.call(d,d.__data__,A,m),v,g=rl(d,i),y=0,E=p.length;y<E;++y)(v=p[y])&&bA(v,t,i,y,p,g);o.push(p),h.push(d)}return new yc(o,h,t,i)}var bse=K9.prototype.constructor;function Mse(){return new bse(this._groups,this._parents)}function _se(e,t){var i,r,a;return function(){var o=td(this,e),h=(this.style.removeProperty(e),td(this,e));return o===h?null:o===i&&h===r?a:a=t(i=o,r=h)}}function kO(e){return function(){this.style.removeProperty(e)}}function Cse(e,t,i){var r,a=i+"",o;return function(){var h=td(this,e);return h===a?null:h===r?o:o=t(r=h,i)}}function Ese(e,t,i){var r,a,o;return function(){var h=td(this,e),u=i(this),m=u+"";return u==null&&(m=u=(this.style.removeProperty(e),td(this,e))),h===m?null:h===r&&m===a?o:(a=m,o=t(r=h,u))}}function wse(e,t){var i,r,a,o="style."+t,h="end."+o,u;return function(){var m=Pl(this,e),c=m.on,d=m.value[o]==null?u||(u=kO(t)):void 0;(c!==i||a!==d)&&(r=(i=c).copy()).on(h,a=d),m.on=r}}function xse(e,t,i){var r=(e+="")=="transform"?Tre:FO;return t==null?this.styleTween(e,_se(e,r)).on("end.style."+e,kO(e)):typeof t=="function"?this.styleTween(e,Ese(e,r,G4(this,"style."+e,t))).each(wse(this._id,e)):this.styleTween(e,Cse(e,r,t),i).on("end.style."+e,null)}function Sse(e,t,i){return function(r){this.style.setProperty(e,t.call(this,r),i)}}function Ise(e,t,i){var r,a;function o(){var h=t.apply(this,arguments);return h!==a&&(r=(a=h)&&Sse(e,h,i)),r}return o._value=t,o}function Tse(e,t,i){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ise(e,t,i??""))}function Bse(e){return function(){this.textContent=e}}function Rse(e){return function(){var t=e(this);this.textContent=t??""}}function Ose(e){return this.tween("text",typeof e=="function"?Rse(G4(this,"text",e)):Bse(e==null?"":e+""))}function Dse(e){return function(t){this.textContent=e.call(this,t)}}function Lse(e){var t,i;function r(){var a=e.apply(this,arguments);return a!==i&&(t=(i=a)&&Dse(a)),t}return r._value=e,r}function Pse(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Lse(e))}function Nse(){for(var e=this._name,t=this._id,i=UO(),r=this._groups,a=r.length,o=0;o<a;++o)for(var h=r[o],u=h.length,m,c=0;c<u;++c)if(m=h[c]){var d=rl(m,t);bA(m,e,i,c,h,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new yc(r,this._parents,e,i)}function Fse(){var e,t,i=this,r=i._id,a=i.size();return new Promise(function(o,h){var u={value:h},m={value:function(){--a===0&&o()}};i.each(function(){var c=Pl(this,r),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(m)),c.on=t}),a===0&&o()})}var kse=0;function yc(e,t,i,r){this._groups=e,this._parents=t,this._name=i,this._id=r}function UO(){return++kse}var ju=K9.prototype;yc.prototype={constructor:yc,select:vse,selectAll:yse,filter:hse,merge:dse,selection:Mse,transition:Nse,call:ju.call,nodes:ju.nodes,node:ju.node,size:ju.size,empty:ju.empty,each:ju.each,on:pse,attr:Kre,attrTween:ese,style:xse,styleTween:Tse,text:Ose,textTween:Pse,remove:Ase,tween:Qre,delay:ise,duration:ase,ease:lse,easeVarying:use,end:Fse,[Symbol.iterator]:ju[Symbol.iterator]};function Use(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Gse={time:null,delay:0,duration:250,ease:Use};function Vse(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function Qse(e){var t,i;e instanceof yc?(t=e._id,e=e._name):(t=UO(),(i=Gse).time=k4(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var h=r[o],u=h.length,m,c=0;c<u;++c)(m=h[c])&&bA(m,e,t,c,h,i||Vse(m,t));return new yc(r,this._parents,e,t)}K9.prototype.interrupt=Ure;K9.prototype.transition=Qse;function Ef(e,t,i){this.k=e,this.x=t,this.y=i}Ef.prototype={constructor:Ef,scale:function(e){return e===1?this:new Ef(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ef(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ef.prototype;function Hse(e,t,i){return Math.max(t,Math.min(i,e))}class yh{constructor(t=[],i=!1){i?this._notes=t:this._notes=t.map(r=>r.string!==void 0&&r.fret!==void 0?vh.from(r):fc.from(r))}getNotes(){return this._notes}setNotes(t){return this._notes=t,this}*[Symbol.iterator](){for(const t of this._notes)yield t}addNotes(t,i=!0){return this._notes=[...this._notes,...t],i&&this.sortByTime(),this}concat(t){return this._notes=[...this._notes,...t._notes],this}append(t,i=0){const r=this.getDuration(),a=t.clone();return a.shiftTime(r+i),this._notes=[...this._notes,...a._notes],this.sortByTime(),this}repeat(t){const i=this.clone();if(t<1)return new yh;if(t===1)return i;const r=this.clone(),a=this.getDuration();for(let o=1;o<t;o++)r.shiftTime(a),i.concat(r);return i}length(){return this._notes.length}getStartTime(){return Rne(this._notes,t=>t.start)}getDuration(){let t=0;for(const i of this._notes){const r=i.end===null?i.start:i.end;r>t&&(t=r)}return t}scaleTime(t){return this._notes=this._notes.map(i=>i.scaleTime(t)),this}shiftTime(t){return this._notes=this._notes.map(i=>i.shiftTime(t)),this}shiftToStartAt(t){this.sortByTime();const r=this._notes[0].start-t;return this._notes.forEach(a=>{a.start-=r,a.end!==null&&(a.end-=r)}),this}forEach(t){return this._notes.forEach((i,r,a)=>t(i,r,a)),this}sort(t){return this._notes=this._notes.sort(t),this}sortByTime(){return this._notes=this._notes.sort((t,i)=>t.start-i.start),this}map(t){return this._notes=this._notes.map((i,r,a)=>t(i,r,a)),this}slice(t,i){return this._notes=this._notes.slice(t,i),this}sliceTime(t,i,r="contained"){const a=t,o=i;let h;if(r==="start")h=u=>u.start>=a&&u.start<o;else if(r==="end")h=u=>u.end!==null&&u.end>=a&&u.end<o;else if(r==="contained")h=u=>u.end!==null&&u.start>=a&&u.end<o;else if(r==="touched")h=u=>u.start>=a&&u.start<=o||u.end!==null&&u.end>=a&&u.end<=o;else if(r==="touched-included")h=u=>u.start>=a&&u.start<=o||u.end!==null&&u.end>=a&&u.end<=o||u.end!==null&&u.start<=a&&u.end>=o;else throw new Error("Invalid slicing mode");return this._notes=this._notes.filter(h),this}sliceAtTimes(t,i,r=!1){if(t.length===0)return[this._notes];const a=this.getDuration();Math.max(...t)<=a&&t.push(a+1);const o=[];let h=0;for(const u of t)o.push(new yh(this._notes,r).sliceTime(h,u,i).getNotes()),h=u;return o}segmentAtGaps(t,i){if(this._notes.length<2)return[this._notes];if(i==="start-start"){const r=this.clone().sortByTime().getNotes(),a=[];for(let o=1;o<r.length;o++)r[o].start-r[o-1].start>=t&&a.push(r[o].start);return this.sliceAtTimes(a,"start")}else{const r=[];for(const o of this._notes){const{start:h,end:u}=o,m=[];for(let c=0;c<r.length;c++){const[d,A]=r[c];(d>=h&&d<=u||A>=h&&A<=u)&&(r.splice(c,1),m.push([d,A]))}if(m.length===0)r.push([h,u]);else{const c=Math.min(h,...m.map(A=>A[0])),d=Math.max(u,...m.map(A=>A[1]));r.push([c,d])}}if(r.length===1)return[this._notes];const a=[];for(let o=1;o<r.length;o++){const h=r[o][0],u=r[o-1][1];h-u>=t&&a.push(h)}return this.sliceAtTimes(a,"start")}}segmentAtIndices(t){const i=[];let r=0;for(const a of t)i.push(this._notes.slice(r,a)),r=a;return i}filter(t){return this._notes=this._notes.filter((i,r,a)=>t(i,r,a)),this}filterPitches(t){return t instanceof Set||(t=new Set(t)),this._notes=this._notes.filter(i=>t.has(i.pitch)),this}transpose(t){return this._notes=this._notes.map(i=>fc.from({...i,pitch:Hse(i.pitch+t,0,127)})),this}removeOctaves(){return this._notes=this._notes.map(t=>fc.from({...t,pitch:t.pitch%12})),this}reverse(){const t=this.getDuration();return this._notes=this._notes.map(i=>{const r=i.clone();return r.start=t-i.end,r.end=r.start+i.getDuration(),r}),this.sortByTime(),this}equals(t){if(!(t instanceof yh))return!1;const i=t.getNotes();if(this._notes.length!==i.length)return!1;for(const[r,a]of i.entries())if(!this._notes[r].equals(a))return!1;return!0}clone(){return new yh(this._notes)}}var zse={exports:{}};(function(e){(function(){const t=function(r){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!o.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let h,u="",m,c,d=0;for(;d<r.length;)h=a.indexOf(r.charAt(d++))<<18|a.indexOf(r.charAt(d++))<<12|(m=a.indexOf(r.charAt(d++)))<<6|(c=a.indexOf(r.charAt(d++))),u+=m===64?String.fromCharCode(h>>16&255):c===64?String.fromCharCode(h>>16&255,h>>8&255):String.fromCharCode(h>>16&255,h>>8&255,h&255);return u},i={debug:!1,parse:function(r,a){if(r instanceof Uint8Array)return i.Uint8(r);if(typeof r=="string")return i.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return i.addListener(r,a);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,a){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;a=a||function(){},r.addEventListener("change",function(o){if(!o.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let h=new FileReader;h.readAsArrayBuffer(o.target.files[0]),h.onload=function(u){a(i.Uint8(new Uint8Array(u.target.result)))}})},Base64:function(r){r=String(r);let a=t(r),o=a.length,h=new Uint8Array(new ArrayBuffer(o));for(let u=0;u<o;u++)h[u]=a.charCodeAt(u);return i.Uint8(h)},Uint8:function(r){let a={data:null,pointer:0,movePointer:function(m){return this.pointer+=m,this.pointer},readInt:function(m){if(m=Math.min(m,this.data.byteLength-this.pointer),m<1)return-1;let c=0;if(m>1)for(let d=1;d<=m-1;d++)c+=this.data.getUint8(this.pointer)*Math.pow(256,m-d),this.pointer++;return c+=this.data.getUint8(this.pointer),this.pointer++,c},readStr:function(m){let c="";for(let d=1;d<=m;d++)c+=String.fromCharCode(this.readInt(1));return c},readIntVLV:function(){let m=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)m=this.readInt(1);else{let c=[];for(;this.data.getUint8(this.pointer)>=128;)c.push(this.readInt(1)-128);let d=this.readInt(1);for(let A=1;A<=c.length;A++)m+=c[c.length-A]*Math.pow(128,A);m+=d}return m}};if(a.data=new DataView(r.buffer,r.byteOffset,r.byteLength),a.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;a.readInt(4);let o={};o.formatType=a.readInt(2),o.tracks=a.readInt(2),o.track=[];let h=a.readInt(1),u=a.readInt(1);h>=128?(o.timeDivision=[],o.timeDivision[0]=h-128,o.timeDivision[1]=u):o.timeDivision=h*256+u;for(let m=1;m<=o.tracks;m++){o.track[m-1]={event:[]};let c=a.readInt(4);if(c===-1)break;if(c!==1297379947)return!1;a.readInt(4);let d=0,A=!1,p,v;for(;!A&&(d++,o.track[m-1].event[d-1]={},o.track[m-1].event[d-1].deltaTime=a.readIntVLV(),p=a.readInt(1),p!==-1);)if(p>=128?v=p:(p=v,a.movePointer(-1)),p===255){o.track[m-1].event[d-1].type=255,o.track[m-1].event[d-1].metaType=a.readInt(1);let g=a.readIntVLV();switch(o.track[m-1].event[d-1].metaType){case 47:case-1:A=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:o.track[m-1].event[d-1].data=a.readStr(g);break;case 33:case 89:case 81:o.track[m-1].event[d-1].data=a.readInt(g);break;case 84:o.track[m-1].event[d-1].data=[],o.track[m-1].event[d-1].data[0]=a.readInt(1),o.track[m-1].event[d-1].data[1]=a.readInt(1),o.track[m-1].event[d-1].data[2]=a.readInt(1),o.track[m-1].event[d-1].data[3]=a.readInt(1),o.track[m-1].event[d-1].data[4]=a.readInt(1);break;case 88:o.track[m-1].event[d-1].data=[],o.track[m-1].event[d-1].data[0]=a.readInt(1),o.track[m-1].event[d-1].data[1]=a.readInt(1),o.track[m-1].event[d-1].data[2]=a.readInt(1),o.track[m-1].event[d-1].data[3]=a.readInt(1);break;default:this.customInterpreter!==null&&(o.track[m-1].event[d-1].data=this.customInterpreter(o.track[m-1].event[d-1].metaType,a,g)),(this.customInterpreter===null||o.track[m-1].event[d-1].data===!1)&&(a.readInt(g),o.track[m-1].event[d-1].data=a.readInt(g),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(p=p.toString(16).split(""),p[1]||p.unshift("0"),o.track[m-1].event[d-1].type=parseInt(p[0],16),o.track[m-1].event[d-1].channel=parseInt(p[1],16),o.track[m-1].event[d-1].type){case 15:{if(this.customInterpreter!==null&&(o.track[m-1].event[d-1].data=this.customInterpreter(o.track[m-1].event[d-1].type,a,!1)),this.customInterpreter===null||o.track[m-1].event[d-1].data===!1){let g=a.readIntVLV();o.track[m-1].event[d-1].data=a.readInt(g),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:o.track[m-1].event[d-1].data=[],o.track[m-1].event[d-1].data[0]=a.readInt(1),o.track[m-1].event[d-1].data[1]=a.readInt(1);break;case 12:case 13:o.track[m-1].event[d-1].data=a.readInt(1);break;case-1:A=!0;break;default:if(this.customInterpreter!==null&&(o.track[m-1].event[d-1].data=this.customInterpreter(o.track[m-1].event[d-1].metaType,a,!1)),this.customInterpreter===null||o.track[m-1].event[d-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return o},customInterpreter:null};e.exports=i})()})(zse);function Es(e){return 1/(e/60)}const GO=[],Wse=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of Wse)for(let t=0;t<4;t++){let i=e,r=e;for(let a=0;a<t;a++)r/=2,i+=r;GO.push({type:e,dots:t,duration:i})}GO.sort((e,t)=>e.duration-t.duration);function rd(e,t,i,r){e.beginPath(),e.arc(t,i,r,0,2*Math.PI),e.stroke()}class Gi{constructor(t,i){this.name=t,this.notes=i,this.short=i.join(" "),this.pitches=i.map(r=>AA(r).pitch),this.stringCount=i.length}}const jse=new Map([["Guitar",new Map([[6,[new Gi("E stand.",["E2","A2","D3","G3","B3","E4"]),new Gi("Drop D",["D2","A2","D3","G3","B3","E4"]),new Gi("Drop C",["C2","G2","C3","F3","A3","D4"]),new Gi("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new Gi("1 down",["D2","G2","C3","F3","A3","D4"]),new Gi("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new Gi("2 down",["C2","F2","A#2","D#3","G3","C4"]),new Gi("DADGAG",["D2","A2","D3","G3","A3","D4"])]],[7,[new Gi("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new Gi("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new Gi("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new Gi("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new Gi("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new Gi("2 down",["G1","C2","F2","A#2","D#3","G3","C4"])]],[8,[new Gi("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new Gi("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new Gi("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new Gi("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new Gi("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new Gi("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"])]]])],["Bass",new Map([[4,[new Gi("E stand.",["E1","A1","D2","G2"]),new Gi("Drop D",["D1","A1","D2","G2"]),new Gi("1/2 down",["D#1","G#1","C#2","F#2"]),new Gi("1 down",["D1","G1","C2","F2"]),new Gi("1 1/2 down",["C#1","F#1","B1","E2"]),new Gi("2 down",["C1","F1","A#1","D#2"])]],[5,[new Gi("B stand.",["B0","E1","A1","D2","G2"]),new Gi("Drop A",["A0","D1","A1","D2","G2"]),new Gi("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new Gi("1 down",["A0","D1","G1","C2","F2"]),new Gi("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new Gi("2 down",["G0","C1","F1","A#1","D#2"])]],[6,[new Gi("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new Gi("Drop E",["E0","A0","D1","A1","D2","G2"]),new Gi("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new Gi("1 down",["E1","A0","D1","G1","C2","F2"]),new Gi("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new Gi("2 down",["D0","G0","C1","F1","A#1","D#2"])]]])],["Ukulele",new Map([[4,[new Gi("Hawaii",["G4","C4","E4","A4"]),new Gi("Low G",["G3","C4","E4","A4"]),new Gi("D-tuning",["A4","D4","F#4","B4"]),new Gi("Canadian",["A3","D4","F#4","B4"]),new Gi("Bariton",["D3","G3","B3","E4"])]]])]]);class Vc{constructor(t,i){this.name=t,this.notes=i,this.short=i.join(" "),this.pitches=i.map(r=>AA(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,a)=>r-a),this.keyCount=i.length}getNumbers(){const t=this.pitchesSorted,i=new Map;for(const[r,a]of t.entries()){let o=r+1,h="",u=a-12;for(;u>0&&i.has(u);)o=i.get(u).number,h+="°",u-=12;i.set(a,{number:o,numberString:`${o}${h}`})}return[...i.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,i=new Map;for(const[r,a]of t.entries()){let o=r+1,h="",u=a-12;for(;u>0&&i.has(u);)o=i.get(u).number,h+="°",u-=12;const m=h1(a).name;i.set(a,{number:o,letterString:`${m}${h}`})}return[...i.values()].map(r=>r.letterString)}}new Vc("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Vc("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Vc("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Vc("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Vc("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Vc("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Vc("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Vc("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function $se(e){const{r:t,g:i,b:r}=nd(e).rgb();return(t+t+t+r+i+i+i+i>>3)/2.55}function Xse(e,t=1){const i=IO(e);return i.s=t,i.toString()}const Kse=["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>Xse(e,.5)),Yse=["#6699ff","#66ffff","#000000","#647878","#993366","#ff0000","#ffcc99","#ffff01","#ff9900","#009900","#66ff99","#0000cc"],qse=["#9aebff","#add5ff","#d6d6ff","#ebd5ff","#ffc2eb","#ffcbcc","#ffd5c2","#ffebc2","#ebffc2","#c2d599","#99ebbe","#adebeb"],Jse=["#FA0B0C","#FA0B0C","#F88010","#F88010","#F5F43C","#149033","#149033","#FA0B0C","#FA0B0C","#7F087C","#7F087C","#908791"],Zse=["#1C0D82","#F5F5F5","#149033","#709226","#F5F43C","#F5D23B","#F88010","#FA0B0C","#A00C09","#D71386","#4B0E7D","#7F087C"],eae=["#1C0D82","#1C0D82","#7F087C","#7F087C","#FA0B0C","#F88010","#F88010","#F5F43C","#F5F43C","#709226","#709226","#149033"],tae=["#FA0B0C","#F44712","#F88010","#F5D23B","#F5F43C","#149033","#1B9081","#1C0D82","#4B0E7D","#7F087C","#A61586","#D71386"],nae=["#6A1C1C","#FA0B0C","#F88010","#F5D23B","#F5F43C","#709226","#1B9081","#1C0D82","#7F087C","#D71386","#6A1C1C","#070707"],iae=["#FA0B0C","#A00C09","#F44712","#F88010","#F5F43C","#709226","#149033","#27A481","#1B9081","#7F087C","#1C0D82","#D71386"],rae=["#FA0B0C","#A00C09","#F88010","#F6D111","#F5F43C","#BCE039","#149033","#27A481","#7F087C","#D71386","#D91951","#FA0B0C"],sae=["#F5F43C","#149033","#1B9081","#1C5BA0","#7F087C","#D71386","#9D0E55","#FA0B0C","#D32C0A","#D32C0A","#F62E0D","#F17A0F"],aae=["#FA0B0C","#D71386","#F5F43C","#5A5685","#1C5BA0","#A00C09","#1C0D82","#F88010","#7F087C","#149033","#5A5685","#1C5BA0"],oae=["#C40A09","#FA0B0C","#F44712","#F88010","#F5F43C","#BCE039","#149033","#1B9081","#1C0D82","#781887","#D71386","#9D0E55"],lae=["#FA0B0C","#FA0B0C","#F88010","#F88010","#F5F43C","#F5F43C","#149033","#1B9081","#1B9081","#1C5BA0","#4B0E7D","#7F087C"],cae=["#FA0B0C","#F44712","#F88010","#F6D111","#F5F43C","#BCE039","#149033","#1B9081","#1C0D82","#A61586","#D71386","#AD0E48"],uae=["#BCE039","#149033","#1B9081","#1C0D82","#7F087C","#D71386","#6F0D45","#A00C09","#FA0B0C","#F88010","#EDF087","#F5F43C"],hae=Uy("black","steelblue");Array.from({length:12}).map((e,t)=>hae(t/11));function dae(e,t,i){const r=e.slice();return r[16]=t[i],r}function fae(e){let t;return{c(){t=ie("option"),t.textContent=`${e[16]}`,t.__value=e[16],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function mae(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L=nn(["velocity","piano","channel","none"]),N=[];for(let F=0;F<4;F+=1)N[F]=fae(dae(e,L,F));return T=new kr({props:{noteOn:e[7],noteOff:e[8]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`The guitar tab below shows incoming MIDI notes as rectangles with their
        string (y position) and start and end times (x left and right side of
        the rectangle). The color encodes the MIDI velocity, which tells how
        hard/loud a note was played.`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`color
            `),A=ie("select");for(let F=0;F<4;F+=1)N[F].c();p=ue(),v=ie("label"),g=ze(`time
            `),y=ie("input"),E=ue(),_=ie("div"),S=ue(),x=ie("div"),C=ie("button"),C.textContent="reset",w=ue(),gt(T.$$.fragment),de(h,"class","explanation"),e[3]===void 0&&mr(()=>e[9].call(A)),de(y,"type","number"),de(y,"min","10"),de(y,"max","300"),de(y,"step","10"),de(v,"title","time in seconds for past notes to be shown"),de(m,"class","control"),de(_,"class","visualization"),de(C,"title","Clear all played notes"),de(x,"class","control"),de(t,"class","demo")},m(F,z){Rt(F,t,z),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A);for(let G=0;G<4;G+=1)N[G]&&N[G].m(A,null);ri(A,e[3],!0),D(m,p),D(m,v),D(v,g),D(v,y),rn(y,e[2]),D(t,E),D(t,_),e[11](_),D(t,S),D(t,x),D(x,C),D(t,w),ft(T,t,null),O=!0,B||(P=[nt(A,"change",e[9]),nt(y,"input",e[10]),nt(C,"click",e[12])],B=!0)},p(F,[z]){(!O||z&1)&&r!==(r=F[0].title+"")&&Ht(a,r),z&8&&ri(A,F[3]),z&4&&$n(y.value)!==F[2]&&rn(y,F[2])},i(F){O||(ut(T.$$.fragment,F),O=!0)},o(F){ht(T.$$.fragment,F),O=!1},d(F){F&&Bt(t),Gn(N,F),e[11](null),mt(T),B=!1,Vi(P)}}}let pae=1e3,gae=500,Aae=6;function vae(e,t,i){let{toolInfo:r}=t,a=[64,59,55,50,45,40],o,h=30,u="velocity",m=0,c=[],d=new Map,A=null;const p=x=>{const C=(x.timestamp-m)/1e3,w=x.message.channel-1,T={number:x.note.number,velocity:x.rawVelocity,time:C,channel:x.message.channel,string:w,fret:x.note.number-a[w]};if(d.has(x.note.number)){const O=d.get(x.note.number);O.end===void 0&&(O.end=C)}c.push(T),d.set(x.note.number,T)},v=x=>{if(d.has(x.note.number)){const C=d.get(x.note.number),w=(x.timestamp-m)/1e3;C.end=w}},g=()=>{const x=(performance.now()-m)/1e3,C=x-h,w=c.filter(N=>N.end>C||N.end===void 0),T=Ps(w,N=>N.number),O=a.map(xs.fromMidiSharps);let B,P;u==="velocity"?(B={label:"Note velocity",scheme:"blues",domain:[0,127]},P="velocity"):u==="piano"?(B={label:"Piano key color",domain:["black","white"],range:["black","white"]},P=N=>Ff(N.number)?"black":"white"):u==="channel"?(B={type:"categorical",label:"MIDI channel",scheme:"tableau10"},P=N=>N.channel):u==="none"&&(P="#ddd");const L=lr({insetRight:10,width:pae,height:gae,marginLeft:60,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[C,x]},y:{label:"String",grid:!0,domain:_n(0,Aae),tickFormat:N=>O[N]},color:{...B,legend:u!=="none",marginLeft:100,width:300},marks:[Ss(_n(Math.ceil((T[0]-1)/12)*12,T[1]+2,12)),fa([x],{stroke:"#888"}),$9(w,{clip:!0,x1:"time",x2:N=>N.end===void 0?x:Math.max(N.end,N.time+.025),y:"string",fill:P,stroke:"#ccc",rx:5}),Na(w,{clip:!0,x:"time",y:"string",fill:"black",stroke:"white",text:"fret",textAnchor:"start",dx:2})]});i(1,o.textContent="",o),o.appendChild(L),A=requestAnimationFrame(g)};ur(()=>{i(4,m=performance.now()),A=requestAnimationFrame(g)}),hr(()=>{cancelAnimationFrame(A)});function y(){u=Ir(this),i(3,u)}function E(){h=$n(this.value),i(2,h)}function _(x){En[x?"unshift":"push"](()=>{o=x,i(1,o)})}const S=()=>{confirm("Reset played notes?")&&(i(5,c=[]),i(6,d=new Map),i(4,m=performance.now()))};return e.$$set=x=>{"toolInfo"in x&&i(0,r=x.toolInfo)},[r,o,h,u,m,c,d,p,v,y,E,_,S]}class yae extends Ai{constructor(t){super(),gi(this,t,vae,mae,pi,{toolInfo:0})}}function bae(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y=e[3]?"☑":"☐",E,_,S,x,C=e[4]?"☑":"☐",w,T,O,B,P,L,N,F,z=e[1]>=6?"guitar":"bass guitar",G,H,j=e[2]===0?"in standard tuning":`${Math.abs(e[2])} ${e[2]<0?"steps down":"steps up"}`,q,Q,k=e[3]?"and dropped":"",K,W,J,se,ge,fe,me,xe,ye,we;return{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("label"),u=ze(`strings
        `),m=ie("input"),c=ue(),d=ie("label"),A=ze(`tune up/down (semitones)
        `),p=ie("input"),v=ue(),g=ie("button"),E=ze(y),_=ze(" dropped"),S=ue(),x=ie("button"),w=ze(C),T=ze(" octave shown"),O=ue(),B=ie("div"),P=ie("p"),L=ze("You selected a "),N=ze(e[1]),F=ze(" string "),G=ze(z),H=ze(", tuned "),q=ze(j),Q=ue(),K=ze(k),W=ue(),J=ie("p"),se=ze("Resulting tuning, low to high:"),ge=ie("br"),fe=ue(),me=ie("b"),xe=ze(e[5]),de(m,"type","number"),de(m,"min","4"),de(m,"max","8"),de(m,"step","1"),de(p,"type","number"),de(p,"min","-12"),de(p,"max","12"),de(p,"step","1")},m(Ee,He){Rt(Ee,t,He),D(t,i),D(i,a),D(t,o),D(t,h),D(h,u),D(h,m),rn(m,e[1]),D(t,c),D(t,d),D(d,A),D(d,p),rn(p,e[2]),D(t,v),D(t,g),D(g,E),D(g,_),D(t,S),D(t,x),D(x,w),D(x,T),D(t,O),D(t,B),D(B,P),D(P,L),D(P,N),D(P,F),D(P,G),D(P,H),D(P,q),D(P,Q),D(P,K),D(B,W),D(B,J),D(J,se),D(J,ge),D(J,fe),D(J,me),D(me,xe),ye||(we=[nt(m,"input",e[6]),nt(p,"input",e[7]),nt(g,"click",e[8]),nt(x,"click",e[9])],ye=!0)},p(Ee,[He]){He&1&&r!==(r=Ee[0].title+"")&&Ht(a,r),He&2&&$n(m.value)!==Ee[1]&&rn(m,Ee[1]),He&4&&$n(p.value)!==Ee[2]&&rn(p,Ee[2]),He&8&&y!==(y=Ee[3]?"☑":"☐")&&Ht(E,y),He&16&&C!==(C=Ee[4]?"☑":"☐")&&Ht(w,C),He&2&&Ht(N,Ee[1]),He&2&&z!==(z=Ee[1]>=6?"guitar":"bass guitar")&&Ht(G,z),He&4&&j!==(j=Ee[2]===0?"in standard tuning":`${Math.abs(Ee[2])} ${Ee[2]<0?"steps down":"steps up"}`)&&Ht(q,j),He&8&&k!==(k=Ee[3]?"and dropped":"")&&Ht(K,k),He&32&&Ht(xe,Ee[5])},i:yn,o:yn,d(Ee){Ee&&Bt(t),ye=!1,Vi(we)}}}function Mae(e,t,i){let r,{toolInfo:a}=t,o=6,h=0,u=!1,m=!0;const c=(g,y,E,_)=>{let x=jse.get(g>5?"Guitar":"Bass").get(g)[0].pitches.map(C=>C+y);return E&&(x[0]-=2),_?x=x.map(C=>ed[C].label):x=x.map(C=>ed[C].name),x.join(" ")};function d(){o=$n(this.value),i(1,o)}function A(){h=$n(this.value),i(2,h)}const p=()=>{i(3,u=!u)},v=()=>{i(4,m=!m)};return e.$$set=g=>{"toolInfo"in g&&i(0,a=g.toolInfo)},e.$$.update=()=>{e.$$.dirty&30&&i(5,r=c(o,h,u,m))},[a,o,h,u,m,r,d,A,p,v]}class _ae extends Ai{constructor(t){super(),gi(this,t,Mae,bae,pi,{toolInfo:0})}}function n7(e,t,i){const r=e.slice();return r[5]=t[i],r}function i7(e){let t,i,r=e[5].timestamp.toFixed(1)+"",a,o,h,u=e[5].port.manufacturer+"",m,c,d,A=e[5].port.name+"",p,v,g,y=e[5].message.channel+"",E,_,S,x=e[5].message.command+"",C,w,T=e[5].message.type+"",O,B,P,L=e[5].message.dataBytes+"",N,F,z,G=(["noteon","noteoff"].includes(e[5].message.type)?xs.fromMidiSharps(e[5].message.dataBytes[0]):"")+"",H,j,q,Q=(["noteon","noteoff"].includes(e[5].message.type)?e[5].message.dataBytes[1]:"")+"",k,K;return{c(){t=ie("tr"),i=ie("td"),a=ze(r),o=ue(),h=ie("td"),m=ze(u),c=ue(),d=ie("td"),p=ze(A),v=ue(),g=ie("td"),E=ze(y),_=ue(),S=ie("td"),C=ze(x),w=ue(),O=ze(T),B=ue(),P=ie("td"),N=ze(L),F=ue(),z=ie("td"),H=ze(G),j=ue(),q=ie("td"),k=ze(Q),K=ue(),de(i,"class","svelte-1x83ix2"),de(h,"class","svelte-1x83ix2"),de(d,"class","svelte-1x83ix2"),de(g,"class","svelte-1x83ix2"),de(S,"class","svelte-1x83ix2"),de(P,"class","svelte-1x83ix2"),de(z,"class","svelte-1x83ix2"),de(q,"class","svelte-1x83ix2"),de(t,"class","svelte-1x83ix2")},m(W,J){Rt(W,t,J),D(t,i),D(i,a),D(t,o),D(t,h),D(h,m),D(t,c),D(t,d),D(d,p),D(t,v),D(t,g),D(g,E),D(t,_),D(t,S),D(S,C),D(S,w),D(S,O),D(t,B),D(t,P),D(P,N),D(t,F),D(t,z),D(z,H),D(t,j),D(t,q),D(q,k),D(t,K)},p(W,J){J&2&&r!==(r=W[5].timestamp.toFixed(1)+"")&&Ht(a,r),J&2&&u!==(u=W[5].port.manufacturer+"")&&Ht(m,u),J&2&&A!==(A=W[5].port.name+"")&&Ht(p,A),J&2&&y!==(y=W[5].message.channel+"")&&Ht(E,y),J&2&&x!==(x=W[5].message.command+"")&&Ht(C,x),J&2&&T!==(T=W[5].message.type+"")&&Ht(O,T),J&2&&L!==(L=W[5].message.dataBytes+"")&&Ht(N,L),J&2&&G!==(G=(["noteon","noteoff"].includes(W[5].message.type)?xs.fromMidiSharps(W[5].message.dataBytes[0]):"")+"")&&Ht(H,G),J&2&&Q!==(Q=(["noteon","noteoff"].includes(W[5].message.type)?W[5].message.dataBytes[1]:"")+"")&&Ht(k,Q)},d(W){W&&Bt(t)}}}function Cae(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v=e[1].length+"",g,y,E,_,S,x,C,w,T,O,B,P,L=nn(e[1].slice(0,100)),N=[];for(let F=0;F<L.length;F+=1)N[F]=i7(n7(e,L,F));return T=new kr({props:{midiMessage:e[2]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent="Input anything on a MIDI device to see the incoming messages below.",u=ue(),m=ie("div"),c=ie("button"),c.textContent="reset",d=ue(),A=ie("div"),p=ie("p"),g=ze(v),y=ze(" messages received"),E=ue(),_=ie("table"),S=ie("thead"),S.innerHTML="<th>timestamp</th> <th>manufacturer</th> <th>name</th> <th>channel</th> <th>command</th> <th>data</th> <th>note</th> <th>velocity</th>",x=ue(),C=ie("tbody");for(let F=0;F<N.length;F+=1)N[F].c();w=ue(),gt(T.$$.fragment),de(h,"class","explanation"),de(c,"title","Clear all messages"),de(m,"class","control"),de(_,"class","svelte-1x83ix2"),de(A,"class","visualization"),de(t,"class","demo")},m(F,z){Rt(F,t,z),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(t,d),D(t,A),D(A,p),D(p,g),D(p,y),D(A,E),D(A,_),D(_,S),D(_,x),D(_,C);for(let G=0;G<N.length;G+=1)N[G]&&N[G].m(C,null);D(t,w),ft(T,t,null),O=!0,B||(P=nt(c,"click",e[3]),B=!0)},p(F,[z]){if((!O||z&1)&&r!==(r=F[0].title+"")&&Ht(a,r),(!O||z&2)&&v!==(v=F[1].length+"")&&Ht(g,v),z&2){L=nn(F[1].slice(0,100));let G;for(G=0;G<L.length;G+=1){const H=n7(F,L,G);N[G]?N[G].p(H,z):(N[G]=i7(H),N[G].c(),N[G].m(C,null))}for(;G<N.length;G+=1)N[G].d(1);N.length=L.length}},i(F){O||(ut(T.$$.fragment,F),O=!0)},o(F){ht(T.$$.fragment,F),O=!1},d(F){F&&Bt(t),Gn(N,F),mt(T),B=!1,P()}}}function Eae(e,t,i){let{toolInfo:r}=t,a=[];const o=u=>{i(1,a=[u,...a])};ur(()=>{performance.now()});const h=()=>{i(1,a=[])};return e.$$set=u=>{"toolInfo"in u&&i(0,r=u.toolInfo)},[r,a,o,h]}class wae extends Ai{constructor(t){super(),gi(this,t,Eae,Cae,pi,{toolInfo:0})}}const kf={noteColormap:Kse,noteColormapAccessible:Yse,noteColormapAccessible2:qse,newton:Jse,castel:Zse,field:eae,jameson:tae,seemann:nae,rimington:iae,bishop:rae,helmholtz:sae,scriabin:aae,klein:oae,aeppli:lae,belmont:cae,zieverink:uae};function r7(e,t,i){const r=e.slice();return r[2]=t[i],r}function s7(e,t,i){const r=e.slice();return r[5]=t[i],r[7]=i,r}function xae(e,t,i){const r=e.slice();return r[8]=t[i],r}function Sae(e){let t;return{c(){t=ie("th"),t.textContent=`${e[8]}`},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function a7(e){let t,i=e[5]+"",r;return{c(){t=ie("td"),r=ze(i),de(t,"title",cu[e[7]]),Ei(t,"background-color",e[5]),Ei(t,"color",$se(e[5])>50?"black":"white"),Ei(t,"font-size","12px"),de(t,"class","svelte-1xnq8ek")},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function o7(e){let t,i,r,a,o=nn(e[2].colors),h=[];for(let u=0;u<o.length;u+=1)h[u]=a7(s7(e,o,u));return{c(){t=ie("tr"),i=ie("td"),i.textContent=`${e[2].name}`,r=ue();for(let u=0;u<h.length;u+=1)h[u].c();a=ue(),de(i,"class","svelte-1xnq8ek"),de(t,"class","svelte-1xnq8ek")},m(u,m){Rt(u,t,m),D(t,i),D(t,r);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(t,null);D(t,a)},p(u,m){if(m&2){o=nn(u[2].colors);let c;for(c=0;c<o.length;c+=1){const d=s7(u,o,c);h[c]?h[c].p(d,m):(h[c]=a7(d),h[c].c(),h[c].m(t,a))}for(;c<h.length;c+=1)h[c].d(1);h.length=o.length}},d(u){u&&Bt(t),Gn(h,u)}}}function Iae(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y=nn(cu),E=[];for(let x=0;x<y.length;x+=1)E[x]=Sae(xae(e,y,x));let _=nn(e[1]),S=[];for(let x=0;x<_.length;x+=1)S[x]=o7(r7(e,_,x));return{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`See <a href="https://github.com/fheyen/musicvis-lib/blob/905edbdc8280e8ca76a329ffc83a160f3cda674a/src/utils/NoteColorUtils.js" target="_blank">here</a>
        for literature references and color string arrays. Most schemes are found
        in:
        <i>Schmidt, Kathryn L. (2019) Meaningful Music Visualizations. Purdue
            University Graduate School. <a href="https://doi.org/10.25394/PGS.7498700.v1" target="_blank">DOI</a>
            (page 13)</i>`,u=ue(),m=ie("div"),c=ie("table"),d=ie("thead"),A=ie("th"),A.textContent="name",p=ue();for(let x=0;x<E.length;x+=1)E[x].c();v=ue(),g=ie("tbody");for(let x=0;x<S.length;x+=1)S[x].c();de(h,"class","explanation"),de(c,"class","svelte-1xnq8ek"),de(m,"class","visualization"),de(t,"class","demo")},m(x,C){Rt(x,t,C),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(d,A),D(d,p);for(let w=0;w<E.length;w+=1)E[w]&&E[w].m(d,null);D(c,v),D(c,g);for(let w=0;w<S.length;w+=1)S[w]&&S[w].m(g,null)},p(x,[C]){if(C&1&&r!==(r=x[0].title+"")&&Ht(a,r),C&2){_=nn(x[1]);let w;for(w=0;w<_.length;w+=1){const T=r7(x,_,w);S[w]?S[w].p(T,C):(S[w]=o7(T),S[w].c(),S[w].m(g,null))}for(;w<S.length;w+=1)S[w].d(1);S.length=_.length}},i:yn,o:yn,d(x){x&&Bt(t),Gn(E,x),Gn(S,x)}}}function Tae(e,t,i){let{toolInfo:r}=t;const a=[];for(const o in kf)kf.hasOwnProperty(o)&&a.push({name:o,colors:kf[o].map(h=>nu(h).formatHex())});return e.$$set=o=>{"toolInfo"in o&&i(0,r=o.toolInfo)},[r,a]}class Bae extends Ai{constructor(t){super(),gi(this,t,Tae,Iae,pi,{toolInfo:0})}}function Rae(e,t,i){const r=e.slice();return r[16]=t[i],r}function Oae(e){let t;return{c(){t=ie("option"),t.textContent=`${e[16]}`,t.__value=e[16],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function Dae(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L=nn(["velocity","piano","channel","none"]),N=[];for(let F=0;F<4;F+=1)N[F]=Oae(Rae(e,L,F));return T=new kr({props:{noteOn:e[6],noteOff:e[7],controlChange:e[8]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`The piano roll below shows incoming MIDI notes as rectangles with their
        pitch (y position) and start and end times (x left and right side of the
        rectangle). The color encodes the MIDI velocity, which tells how
        hard/loud a note was played.`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`color
            `),A=ie("select");for(let F=0;F<4;F+=1)N[F].c();p=ue(),v=ie("label"),g=ze(`time
            `),y=ie("input"),E=ue(),_=ie("div"),S=ue(),x=ie("div"),C=ie("button"),C.textContent="reset",w=ue(),gt(T.$$.fragment),de(h,"class","explanation"),e[3]===void 0&&mr(()=>e[9].call(A)),de(y,"type","number"),de(y,"min","10"),de(y,"max","300"),de(y,"step","10"),de(v,"title","time in seconds for past notes to be shown"),de(m,"class","control"),de(_,"class","visualization"),de(C,"title","Clear all played notes"),de(x,"class","control"),de(t,"class","demo")},m(F,z){Rt(F,t,z),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A);for(let G=0;G<4;G+=1)N[G]&&N[G].m(A,null);ri(A,e[3],!0),D(m,p),D(m,v),D(v,g),D(v,y),rn(y,e[2]),D(t,E),D(t,_),e[11](_),D(t,S),D(t,x),D(x,C),D(t,w),ft(T,t,null),O=!0,B||(P=[nt(A,"change",e[9]),nt(y,"input",e[10]),nt(C,"click",e[12])],B=!0)},p(F,[z]){(!O||z&1)&&r!==(r=F[0].title+"")&&Ht(a,r),z&8&&ri(A,F[3]),z&4&&$n(y.value)!==F[2]&&rn(y,F[2])},i(F){O||(ut(T.$$.fragment,F),O=!0)},o(F){ht(T.$$.fragment,F),O=!1},d(F){F&&Bt(t),Gn(N,F),e[11](null),mt(T),B=!1,Vi(P)}}}let Lae=1e3,Pae=500;function Nae(e,t,i){let{toolInfo:r}=t,a,o=30,h="velocity",u=0,m=[];const c=new Map;let d=null;const A=x=>{const C=(x.timestamp-u)/1e3,w={number:x.note.number,velocity:x.rawVelocity,time:C,channel:x.message.channel};if(c.has(x.note.number)){const T=c.get(x.note.number);T.end===void 0&&(T.end=C)}m.push(w),c.set(x.note.number,w)},p=x=>{if(c.has(x.note.number)){const C=c.get(x.note.number),w=(x.timestamp-u)/1e3;C.end=w}},v=x=>{i(2,o=x.value*55+5)},g=()=>{const x=(performance.now()-u)/1e3,C=x-o,w=m.filter(L=>L.end>C||L.end===void 0),T=Ps(w,L=>L.number);let O,B;h==="velocity"?(O={label:"Note velocity",scheme:"blues",domain:[0,127]},B="velocity"):h==="piano"?(O={label:"Piano key color",domain:["black","white"],range:["black","white"]},B=L=>Ff(L.number)?"black":"white"):h==="channel"?(O={type:"categorical",label:"MIDI channel",scheme:"tableau10"},B=L=>L.channel):h==="none"&&(B="#ddd");const P=lr({insetRight:10,width:Lae,height:Pae,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[C,x]},y:{label:"MIDI Pitch",grid:!0,reverse:!0,domain:_n(T[0]-1,T[1]+2),tickFormat:L=>ed[L].label},color:{...O,legend:h!=="none",marginLeft:100,width:300},marks:[Ss(lT(T[0]-1,T[1]+2)),fa([x],{stroke:"#888"}),$9(w,{clip:!0,x1:"time",x2:L=>L.end===void 0?x:Math.max(L.end,L.time+.025),y:"number",fill:B,stroke:"#ccc",rx:5})]});i(1,a.textContent="",a),a.appendChild(P),d=requestAnimationFrame(g)};ur(()=>{i(4,u=performance.now()),d=requestAnimationFrame(g)}),hr(()=>{cancelAnimationFrame(d)});function y(){h=Ir(this),i(3,h)}function E(){o=$n(this.value),i(2,o)}function _(x){En[x?"unshift":"push"](()=>{a=x,i(1,a)})}const S=()=>{confirm("Reset played notes?")&&(i(5,m=[]),i(4,u=performance.now()))};return e.$$set=x=>{"toolInfo"in x&&i(0,r=x.toolInfo)},[r,a,o,h,u,m,A,p,v,y,E,_,S]}class Fae extends Ai{constructor(t){super(),gi(this,t,Nae,Dae,pi,{toolInfo:0})}}function Za(e){if(this.size=e|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=e<<1;for(var t=new Array(this.size*2),i=0;i<t.length;i+=2){const m=Math.PI*i/this.size;t[i]=Math.cos(m),t[i+1]=-Math.sin(m)}this.table=t;for(var r=0,a=1;this.size>a;a<<=1)r++;this._width=r%2===0?r-1:r,this._bitrev=new Array(1<<this._width);for(var o=0;o<this._bitrev.length;o++){this._bitrev[o]=0;for(var h=0;h<this._width;h+=2){var u=this._width-h-2;this._bitrev[o]|=(o>>>h&3)<<u}}this._out=null,this._data=null,this._inv=0}var kae=Za;Za.prototype.fromComplexArray=function(t,i){for(var r=i||new Array(t.length>>>1),a=0;a<t.length;a+=2)r[a>>>1]=t[a];return r};Za.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var i=0;i<t.length;i++)t[i]=0;return t};Za.prototype.toComplexArray=function(t,i){for(var r=i||this.createComplexArray(),a=0;a<r.length;a+=2)r[a]=t[a>>>1],r[a+1]=0;return r};Za.prototype.completeSpectrum=function(t){for(var i=this._csize,r=i>>>1,a=2;a<r;a+=2)t[i-a]=t[a],t[i-a+1]=-t[a+1]};Za.prototype.transform=function(t,i){if(t===i)throw new Error("Input and output buffers must be different");this._out=t,this._data=i,this._inv=0,this._transform4(),this._out=null,this._data=null};Za.prototype.realTransform=function(t,i){if(t===i)throw new Error("Input and output buffers must be different");this._out=t,this._data=i,this._inv=0,this._realTransform4(),this._out=null,this._data=null};Za.prototype.inverseTransform=function(t,i){if(t===i)throw new Error("Input and output buffers must be different");this._out=t,this._data=i,this._inv=1,this._transform4();for(var r=0;r<t.length;r++)t[r]/=this.size;this._out=null,this._data=null};Za.prototype._transform4=function(){var t=this._out,i=this._csize,r=this._width,a=1<<r,o=i/a<<1,h,u,m=this._bitrev;if(o===4)for(h=0,u=0;h<i;h+=o,u++){const y=m[u];this._singleTransform2(h,y,a)}else for(h=0,u=0;h<i;h+=o,u++){const y=m[u];this._singleTransform4(h,y,a)}var c=this._inv?-1:1,d=this.table;for(a>>=2;a>=2;a>>=2){o=i/a<<1;var A=o>>>2;for(h=0;h<i;h+=o)for(var p=h+A,v=h,g=0;v<p;v+=2,g+=a){const y=v,E=y+A,_=E+A,S=_+A,x=t[y],C=t[y+1],w=t[E],T=t[E+1],O=t[_],B=t[_+1],P=t[S],L=t[S+1],N=x,F=C,z=d[g],G=c*d[g+1],H=w*z-T*G,j=w*G+T*z,q=d[2*g],Q=c*d[2*g+1],k=O*q-B*Q,K=O*Q+B*q,W=d[3*g],J=c*d[3*g+1],se=P*W-L*J,ge=P*J+L*W,fe=N+k,me=F+K,xe=N-k,ye=F-K,we=H+se,Ee=j+ge,He=c*(H-se),Ae=c*(j-ge),Ke=fe+we,Ue=me+Ee,ct=fe-we,vt=me-Ee,dt=xe+Ae,It=ye-He,rt=xe-Ae,Lt=ye+He;t[y]=Ke,t[y+1]=Ue,t[E]=dt,t[E+1]=It,t[_]=ct,t[_+1]=vt,t[S]=rt,t[S+1]=Lt}}};Za.prototype._singleTransform2=function(t,i,r){const a=this._out,o=this._data,h=o[i],u=o[i+1],m=o[i+r],c=o[i+r+1],d=h+m,A=u+c,p=h-m,v=u-c;a[t]=d,a[t+1]=A,a[t+2]=p,a[t+3]=v};Za.prototype._singleTransform4=function(t,i,r){const a=this._out,o=this._data,h=this._inv?-1:1,u=r*2,m=r*3,c=o[i],d=o[i+1],A=o[i+r],p=o[i+r+1],v=o[i+u],g=o[i+u+1],y=o[i+m],E=o[i+m+1],_=c+v,S=d+g,x=c-v,C=d-g,w=A+y,T=p+E,O=h*(A-y),B=h*(p-E),P=_+w,L=S+T,N=x+B,F=C-O,z=_-w,G=S-T,H=x-B,j=C+O;a[t]=P,a[t+1]=L,a[t+2]=N,a[t+3]=F,a[t+4]=z,a[t+5]=G,a[t+6]=H,a[t+7]=j};Za.prototype._realTransform4=function(){var t=this._out,i=this._csize,r=this._width,a=1<<r,o=i/a<<1,h,u,m=this._bitrev;if(o===4)for(h=0,u=0;h<i;h+=o,u++){const Le=m[u];this._singleRealTransform2(h,Le>>>1,a>>>1)}else for(h=0,u=0;h<i;h+=o,u++){const Le=m[u];this._singleRealTransform4(h,Le>>>1,a>>>1)}var c=this._inv?-1:1,d=this.table;for(a>>=2;a>=2;a>>=2){o=i/a<<1;var A=o>>>1,p=A>>>1,v=p>>>1;for(h=0;h<i;h+=o)for(var g=0,y=0;g<=v;g+=2,y+=a){var E=h+g,_=E+p,S=_+p,x=S+p,C=t[E],w=t[E+1],T=t[_],O=t[_+1],B=t[S],P=t[S+1],L=t[x],N=t[x+1],F=C,z=w,G=d[y],H=c*d[y+1],j=T*G-O*H,q=T*H+O*G,Q=d[2*y],k=c*d[2*y+1],K=B*Q-P*k,W=B*k+P*Q,J=d[3*y],se=c*d[3*y+1],ge=L*J-N*se,fe=L*se+N*J,me=F+K,xe=z+W,ye=F-K,we=z-W,Ee=j+ge,He=q+fe,Ae=c*(j-ge),Ke=c*(q-fe),Ue=me+Ee,ct=xe+He,vt=ye+Ke,dt=we-Ae;if(t[E]=Ue,t[E+1]=ct,t[_]=vt,t[_+1]=dt,g===0){var It=me-Ee,rt=xe-He;t[S]=It,t[S+1]=rt;continue}if(g!==v){var Lt=ye,hn=-we,Et=me,xt=-xe,en=-c*Ke,_t=-c*Ae,Kt=-c*He,Dt=-c*Ee,Nt=Lt+en,St=hn+_t,pe=Et+Dt,_e=xt-Kt,De=h+p-g,Be=h+A-g;t[De]=Nt,t[De+1]=St,t[Be]=pe,t[Be+1]=_e}}}};Za.prototype._singleRealTransform2=function(t,i,r){const a=this._out,o=this._data,h=o[i],u=o[i+r],m=h+u,c=h-u;a[t]=m,a[t+1]=0,a[t+2]=c,a[t+3]=0};Za.prototype._singleRealTransform4=function(t,i,r){const a=this._out,o=this._data,h=this._inv?-1:1,u=r*2,m=r*3,c=o[i],d=o[i+r],A=o[i+u],p=o[i+m],v=c+A,g=c-A,y=d+p,E=h*(d-p),_=v+y,S=g,x=-E,C=v-y,w=g,T=E;a[t]=_,a[t+1]=0,a[t+2]=S,a[t+3]=x,a[t+4]=C,a[t+5]=0,a[t+6]=w,a[t+7]=T};const Uae=Lb(kae);class Uf{constructor(t,i){xr(this,"_inputLength");xr(this,"_fft");xr(this,"_bufferSupplier");xr(this,"_paddedInputBuffer");xr(this,"_transformBuffer");xr(this,"_inverseBuffer");if(t<1)throw new Error("Input length must be at least one");this._inputLength=t,this._fft=new Uae(Qae(2*t)),this._bufferSupplier=i,this._paddedInputBuffer=this._bufferSupplier(this._fft.size),this._transformBuffer=this._bufferSupplier(2*this._fft.size),this._inverseBuffer=this._bufferSupplier(2*this._fft.size)}static forFloat32Array(t){return new Uf(t,i=>new Float32Array(i))}static forFloat64Array(t){return new Uf(t,i=>new Float64Array(i))}static forNumberArray(t){return new Uf(t,i=>Array(i))}get inputLength(){return this._inputLength}autocorrelate(t,i=this._bufferSupplier(t.length)){if(t.length!==this._inputLength)throw new Error(`Input must have length ${this._inputLength} but had length ${t.length}`);for(let a=0;a<t.length;a++)this._paddedInputBuffer[a]=t[a];for(let a=t.length;a<this._paddedInputBuffer.length;a++)this._paddedInputBuffer[a]=0;this._fft.realTransform(this._transformBuffer,this._paddedInputBuffer),this._fft.completeSpectrum(this._transformBuffer);const r=this._transformBuffer;for(let a=0;a<r.length;a+=2)r[a]=r[a]*r[a]+r[a+1]*r[a+1],r[a+1]=0;this._fft.inverseTransform(this._inverseBuffer,this._transformBuffer);for(let a=0;a<t.length;a++)i[a]=this._inverseBuffer[2*a];return i}}function Gae(e){const t=[];let i=!1,r=-1/0,a=-1;for(let o=1;o<e.length-1;o++)e[o-1]<=0&&e[o]>0?(i=!0,a=o,r=e[o]):e[o-1]>0&&e[o]<=0?(i=!1,a!==-1&&t.push(a)):i&&e[o]>r&&(r=e[o],a=o);return t}function Vae(e,t){const[i,r,a]=[e-1,e,e+1],[o,h,u]=[t[i],t[r],t[a]],m=o/2-h+u/2,c=-(o/2)*(r+a)+h*(i+a)-u/2*(i+r),d=o*r*a/2-h*i*a+u*i*r/2,A=-c/(2*m),p=m*A*A+c*A+d;return[A,p]}class eu{constructor(t,i){xr(this,"_autocorrelator");xr(this,"_nsdfBuffer");xr(this,"_clarityThreshold",.9);xr(this,"_minVolumeAbsolute",0);xr(this,"_maxInputAmplitude",1);this._autocorrelator=new Uf(t,i),this._nsdfBuffer=i(t)}static forFloat32Array(t){return new eu(t,i=>new Float32Array(i))}static forFloat64Array(t){return new eu(t,i=>new Float64Array(i))}static forNumberArray(t){return new eu(t,i=>Array(i))}get inputLength(){return this._autocorrelator.inputLength}set clarityThreshold(t){if(!Number.isFinite(t)||t<=0||t>1)throw new Error("clarityThreshold must be a number in the range (0, 1]");this._clarityThreshold=t}set minVolumeAbsolute(t){if(!Number.isFinite(t)||t<0||t>this._maxInputAmplitude)throw new Error(`minVolumeAbsolute must be a number in the range [0, ${this._maxInputAmplitude}]`);this._minVolumeAbsolute=t}set minVolumeDecibels(t){if(!Number.isFinite(t)||t>0)throw new Error("minVolumeDecibels must be a number <= 0");this._minVolumeAbsolute=this._maxInputAmplitude*10**(t/10)}set maxInputAmplitude(t){if(!Number.isFinite(t)||t<=0)throw new Error("maxInputAmplitude must be a number > 0");this._maxInputAmplitude=t}findPitch(t,i){if(this._belowMinimumVolume(t))return[0,0];this._nsdf(t);const r=Gae(this._nsdfBuffer);if(r.length===0)return[0,0];const a=Math.max(...r.map(m=>this._nsdfBuffer[m])),o=r.find(m=>this._nsdfBuffer[m]>=this._clarityThreshold*a),[h,u]=Vae(o,this._nsdfBuffer);return[i/h,Math.min(u,1)]}_belowMinimumVolume(t){if(this._minVolumeAbsolute===0)return!1;let i=0;for(let r=0;r<t.length;r++)i+=t[r]**2;return Math.sqrt(i/t.length)<this._minVolumeAbsolute}_nsdf(t){this._autocorrelator.autocorrelate(t,this._nsdfBuffer);let i=2*this._nsdfBuffer[0],r;for(r=0;r<this._nsdfBuffer.length&&i>0;r++)this._nsdfBuffer[r]=2*this._nsdfBuffer[r]/i,i-=t[r]**2+t[t.length-r-1]**2;for(;r<this._nsdfBuffer.length;r++)this._nsdfBuffer[r]=0}}function Qae(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}function Hae(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v=e[2].toFixed(1)+"",g,y,E,_,S,x=(e[3]*100).toFixed()+"",C,w,T,O,B,P,L,N,F;return{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Allow microphone access and make a sound, the detected pitch will be
        displayed below together with the closest note and the offset from this
        notes in cents.`,u=ue(),m=ie("div"),c=ue(),d=ie("div"),A=ie("div"),p=ze("frequency: "),g=ze(v),y=ze(" Hz"),E=ue(),_=ie("div"),S=ze("clarity: "),C=ze(x),w=ze(" %"),T=ue(),O=ie("div"),B=ze("note: "),P=ie("b"),L=ze(e[4]),N=ue(),F=ie("div"),de(h,"class","explanation"),de(m,"class","control"),de(F,"class","visualization"),de(t,"class","demo")},m(z,G){Rt(z,t,G),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(t,c),D(t,d),D(d,A),D(A,p),D(A,g),D(A,y),D(d,E),D(d,_),D(_,S),D(_,C),D(_,w),D(d,T),D(d,O),D(O,B),D(O,P),D(P,L),D(t,N),D(t,F),e[5](F)},p(z,[G]){G&1&&r!==(r=z[0].title+"")&&Ht(a,r),G&4&&v!==(v=z[2].toFixed(1)+"")&&Ht(g,v),G&8&&x!==(x=(z[3]*100).toFixed()+"")&&Ht(C,x),G&16&&Ht(L,z[4])},i:yn,o:yn,d(z){z&&Bt(t),e[5](null)}}}let zae=1e3,Wae=300;function jae(e,t,i){let{toolInfo:r}=t,a,o,h,u,m=-20,c=0,d=0,A="",p=0,v=0,g=[];function y(S,x,C,w){S.getFloatTimeDomainData(C);const T=x.findPitch(C,w);i(2,c=T[0]),i(3,d=T[1]),i(4,A=xs.fromFreq(c)),p=xs.midi(A),v=(f0.freqToMidi(c)-p)*100,g=[...g.slice(-50),v],E(),u=requestAnimationFrame(()=>y(S,x,C,w))}const E=()=>{i(1,a.textContent="",a);const S=lr({width:zae,height:Wae,marginLeft:40,x:{label:"offset in cents",domain:[-50,50]},y:{reverse:!0,ticks:[]},marks:[fa([-50,0,50],{stroke:"#ddd"}),Jo(g,{stroke:"#333",x:x=>x,y:(x,C)=>C})]});a.appendChild(S)};ur(()=>{o=new window.AudioContext,h=o.createAnalyser(),navigator.mediaDevices.getUserMedia({audio:!0}).then(S=>{o.createMediaStreamSource(S).connect(h);const x=eu.forFloat32Array(h.fftSize);x.minVolumeDecibels=m;const C=new Float32Array(x.inputLength);y(h,x,C,o.sampleRate)})}),hr(()=>{cancelAnimationFrame(u)});function _(S){En[S?"unshift":"push"](()=>{a=S,i(1,a)})}return e.$$set=S=>{"toolInfo"in S&&i(0,r=S.toolInfo)},[r,a,c,d,A,_]}class $ae extends Ai{constructor(t){super(),gi(this,t,jae,Hae,pi,{toolInfo:0})}}function l7(e,t,i){const r=e.slice();return r[15]=t[i],r}function c7(e,t,i){const r=e.slice();return r[18]=t[i],r}function u7(e,t,i){const r=e.slice();return r[21]=t[i],r}function h7(e,t,i){const r=e.slice();return r[24]=t[i],r}function d7(e,t,i){const r=e.slice();return r[27]=t[i],r}function f7(e){let t,i=e[27]+"",r;return{c(){t=ie("option"),r=ze(i),t.__value=e[27],rn(t,t.__value)},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function m7(e){let t,i=e[24]+"",r;return{c(){t=ie("option"),r=ze(i),t.__value=e[24],rn(t,t.__value)},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function p7(e){let t,i,r,a=e[21].name+"",o,h,u=e[21].notes.join(" ")+"",m,c,d=[...Ph(e[3].notes,e[21].notes)].join(" ")+"",A,p,v,g;function y(){return e[12](e[21])}return{c(){t=ie("div"),i=ie("button"),i.textContent="show",r=ue(),o=ze(a),h=ze(`:
                `),m=ze(u),c=ze(`
                (no `),A=ze(d),p=ze(")")},m(E,_){Rt(E,t,_),D(t,i),D(t,r),D(t,o),D(t,h),D(t,m),D(t,c),D(t,A),D(t,p),v||(g=nt(i,"click",y),v=!0)},p(E,_){e=E,_&128&&a!==(a=e[21].name+"")&&Ht(o,a),_&128&&u!==(u=e[21].notes.join(" ")+"")&&Ht(m,u),_&136&&d!==(d=[...Ph(e[3].notes,e[21].notes)].join(" ")+"")&&Ht(A,d)},d(E){E&&Bt(t),v=!1,g()}}}function g7(e){let t,i,r,a=e[18].name+"",o,h,u=e[18].notes.join(" ")+"",m,c,d=[...Ph(e[18].notes,e[3].notes)].join(" ")+"",A,p,v,g;function y(){return e[13](e[18])}return{c(){t=ie("div"),i=ie("button"),i.textContent="show",r=ue(),o=ze(a),h=ze(`:
                `),m=ze(u),c=ze(`
                (adds `),A=ze(d),p=ze(")")},m(E,_){Rt(E,t,_),D(t,i),D(t,r),D(t,o),D(t,h),D(t,m),D(t,c),D(t,A),D(t,p),v||(g=nt(i,"click",y),v=!0)},p(E,_){e=E,_&64&&a!==(a=e[18].name+"")&&Ht(o,a),_&64&&u!==(u=e[18].notes.join(" ")+"")&&Ht(m,u),_&72&&d!==(d=[...Ph(e[18].notes,e[3].notes)].join(" ")+"")&&Ht(A,d)},d(E){E&&Bt(t),v=!1,g()}}}function A7(e){let t,i,r,a=e[15]+"",o,h,u=eg.get(`${e[1]} ${e[15]}`).notes.join(" ")+"",m,c;return{c(){t=ie("div"),i=ze(e[1]),r=ue(),o=ze(a),h=ze(`:
                `),m=ze(u),c=ue()},m(d,A){Rt(d,t,A),D(t,i),D(t,r),D(t,o),D(t,h),D(t,m),D(t,c)},p(d,A){A&2&&Ht(i,d[1]),A&32&&a!==(a=d[15]+"")&&Ht(o,a),A&34&&u!==(u=eg.get(`${d[1]} ${d[15]}`).notes.join(" ")+"")&&Ht(m,u)},d(d){d&&Bt(t)}}}function Xae(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S=e[3].name+"",x,C,w,T,O=e[3].notes.join(" ")+"",B,P,L,N,F,z,G,H,j,q,Q,k,K=nn(e[8]),W=[];for(let Ee=0;Ee<K.length;Ee+=1)W[Ee]=f7(d7(e,K,Ee));let J=nn(e[9]),se=[];for(let Ee=0;Ee<J.length;Ee+=1)se[Ee]=m7(h7(e,J,Ee));let ge=nn(e[7]),fe=[];for(let Ee=0;Ee<ge.length;Ee+=1)fe[Ee]=p7(u7(e,ge,Ee));let me=nn(e[6]),xe=[];for(let Ee=0;Ee<me.length;Ee+=1)xe[Ee]=g7(c7(e,me,Ee));let ye=nn(e[5]),we=[];for(let Ee=0;Ee<ye.length;Ee+=1)we[Ee]=A7(l7(e,ye,Ee));return{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Select a root note and scale and see how this scale relates to others.
        This tool is mainly a graphical interface for <a href="https://github.com/tonaljs/tonal/tree/main/packages/scale" target="_blank">tonaljs.</a>`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`scale
            `),A=ie("select");for(let Ee=0;Ee<W.length;Ee+=1)W[Ee].c();p=ue(),v=ie("select");for(let Ee=0;Ee<se.length;Ee+=1)se[Ee].c();g=ue(),y=ie("div"),E=ie("h2"),_=ze("current scale: "),x=ze(S),C=ue(),w=ie("h3"),w.textContent="notes",T=ue(),B=ze(O),P=ue(),L=ie("h3"),L.textContent="scales that are subsets",N=ue();for(let Ee=0;Ee<fe.length;Ee+=1)fe[Ee].c();F=ue(),z=ie("h3"),z.textContent="scales that are supersets",G=ue();for(let Ee=0;Ee<xe.length;Ee+=1)xe[Ee].c();H=ue(),j=ie("h3"),j.textContent="chords",q=ue();for(let Ee=0;Ee<we.length;Ee+=1)we[Ee].c();de(h,"class","explanation"),e[1]===void 0&&mr(()=>e[10].call(A)),e[2]===void 0&&mr(()=>e[11].call(v)),de(m,"class","control"),de(y,"class","visualization"),de(t,"class","demo")},m(Ee,He){Rt(Ee,t,He),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A);for(let Ae=0;Ae<W.length;Ae+=1)W[Ae]&&W[Ae].m(A,null);ri(A,e[1],!0),D(c,p),D(c,v);for(let Ae=0;Ae<se.length;Ae+=1)se[Ae]&&se[Ae].m(v,null);ri(v,e[2],!0),D(t,g),D(t,y),D(y,E),D(E,_),D(E,x),D(y,C),D(y,w),D(y,T),D(y,B),D(y,P),D(y,L),D(y,N);for(let Ae=0;Ae<fe.length;Ae+=1)fe[Ae]&&fe[Ae].m(y,null);D(y,F),D(y,z),D(y,G);for(let Ae=0;Ae<xe.length;Ae+=1)xe[Ae]&&xe[Ae].m(y,null);D(y,H),D(y,j),D(y,q);for(let Ae=0;Ae<we.length;Ae+=1)we[Ae]&&we[Ae].m(y,null);e[14](y),Q||(k=[nt(A,"change",e[10]),nt(v,"change",e[11])],Q=!0)},p(Ee,[He]){if(He&1&&r!==(r=Ee[0].title+"")&&Ht(a,r),He&256){K=nn(Ee[8]);let Ae;for(Ae=0;Ae<K.length;Ae+=1){const Ke=d7(Ee,K,Ae);W[Ae]?W[Ae].p(Ke,He):(W[Ae]=f7(Ke),W[Ae].c(),W[Ae].m(A,null))}for(;Ae<W.length;Ae+=1)W[Ae].d(1);W.length=K.length}if(He&258&&ri(A,Ee[1]),He&512){J=nn(Ee[9]);let Ae;for(Ae=0;Ae<J.length;Ae+=1){const Ke=h7(Ee,J,Ae);se[Ae]?se[Ae].p(Ke,He):(se[Ae]=m7(Ke),se[Ae].c(),se[Ae].m(v,null))}for(;Ae<se.length;Ae+=1)se[Ae].d(1);se.length=J.length}if(He&516&&ri(v,Ee[2]),He&8&&S!==(S=Ee[3].name+"")&&Ht(x,S),He&8&&O!==(O=Ee[3].notes.join(" ")+"")&&Ht(B,O),He&140){ge=nn(Ee[7]);let Ae;for(Ae=0;Ae<ge.length;Ae+=1){const Ke=u7(Ee,ge,Ae);fe[Ae]?fe[Ae].p(Ke,He):(fe[Ae]=p7(Ke),fe[Ae].c(),fe[Ae].m(y,F))}for(;Ae<fe.length;Ae+=1)fe[Ae].d(1);fe.length=ge.length}if(He&76){me=nn(Ee[6]);let Ae;for(Ae=0;Ae<me.length;Ae+=1){const Ke=c7(Ee,me,Ae);xe[Ae]?xe[Ae].p(Ke,He):(xe[Ae]=g7(Ke),xe[Ae].c(),xe[Ae].m(y,H))}for(;Ae<xe.length;Ae+=1)xe[Ae].d(1);xe.length=me.length}if(He&34){ye=nn(Ee[5]);let Ae;for(Ae=0;Ae<ye.length;Ae+=1){const Ke=l7(Ee,ye,Ae);we[Ae]?we[Ae].p(Ke,He):(we[Ae]=A7(Ke),we[Ae].c(),we[Ae].m(y,null))}for(;Ae<we.length;Ae+=1)we[Ae].d(1);we.length=ye.length}},i:yn,o:yn,d(Ee){Ee&&Bt(t),Gn(W,Ee),Gn(se,Ee),Gn(fe,Ee),Gn(xe,Ee),Gn(we,Ee),e[14](null),Q=!1,Vi(k)}}}function Kae(e,t,i){let r,a,o,h,{toolInfo:u}=t,m,c="A",d="minor";const A=X9,p=$s.names();function v(){c=Ir(this),i(1,c),i(8,A)}function g(){d=Ir(this),i(2,d),i(9,p)}const y=S=>i(2,d=S.type),E=S=>i(2,d=S.type);function _(S){En[S?"unshift":"push"](()=>{m=S,i(4,m)})}return e.$$set=S=>{"toolInfo"in S&&i(0,u=S.toolInfo)},e.$$.update=()=>{e.$$.dirty&6&&i(3,r=$s.get(`${c} ${d}`)),e.$$.dirty&10&&i(7,a=$s.reduced(r.name).map(S=>$s.get(`${c} ${S}`))),e.$$.dirty&10&&i(6,o=$s.extended(r.name).map(S=>$s.get(`${c} ${S}`))),e.$$.dirty&6&&i(5,h=$s.scaleChords(`${c} ${d}`))},[u,c,d,r,m,h,o,a,A,p,v,g,y,E,_]}class Yae extends Ai{constructor(t){super(),gi(this,t,Kae,Xae,pi,{toolInfo:0})}}function qae(e,t){return t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t}function Jae(e,t){return typeof t=="object"&&t!==null&&t.dataType==="Map"?new Map(t.value):t}async function Zae(e){const i=await e.target.files[0].text();return JSON.parse(i,Jae)}function VO(e,t){t._demoId=e,t._date=new Date().toISOString();const i=JSON.stringify(t,qae,2),r=new Blob([i],{type:"text/plain;charset=utf-8"});hT(r,`${e}.json`)}function eoe(e,t,i){const r=e.slice();return r[18]=t[i],r}function v7(e,t,i){const r=e.slice();return r[21]=t[i],r}function y7(e){let t,i=e[21]+"",r;return{c(){t=ie("option"),r=ze(i),t.__value=e[21],rn(t,t.__value)},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function toe(e){let t;return{c(){t=ie("option"),t.textContent=`${e[18]}`,t.__value=e[18],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function noe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x=(e[5]?Xr:Kr)+"",C,w,T,O,B,P,L,N,F=nn(e[6]),z=[];for(let j=0;j<F.length;j+=1)z[j]=y7(v7(e,F,j));let G=nn(["default","name","notes","number of notes"]),H=[];for(let j=0;j<4;j+=1)H[j]=toe(eoe(e,G,j));return{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Select a root note and see all scales with this root and their notes.
        Using <a href="https://github.com/tonaljs/tonal/tree/main/packages/scale" target="_blank">tonaljs.</a>
        Ported from
        <a href="https://observablehq.com/@fheyen/musical-scales" target="_blank">here.</a>`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`scale
            `),A=ie("select");for(let j=0;j<z.length;j+=1)z[j].c();p=ue(),v=ie("label"),g=ze(`ordering
            `),y=ie("select");for(let j=0;j<4;j+=1)H[j].c();E=ue(),_=ie("button"),S=ze("colors "),C=ze(x),w=ue(),T=ie("div"),O=ie("canvas"),B=ue(),P=ie("button"),P.textContent="export JSON",de(h,"class","explanation"),e[1]===void 0&&mr(()=>e[11].call(A)),e[2]===void 0&&mr(()=>e[12].call(y)),de(_,"title","Use dotted notes? If not, the closest non-dotted note will be taken."),de(m,"class","control"),Ei(O,"width",Wy+"px"),Ei(O,"height",p1+"px"),de(T,"class","visualization"),de(t,"class","demo")},m(j,q){Rt(j,t,q),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A);for(let Q=0;Q<z.length;Q+=1)z[Q]&&z[Q].m(A,null);ri(A,e[1],!0),D(m,p),D(m,v),D(v,g),D(v,y);for(let Q=0;Q<4;Q+=1)H[Q]&&H[Q].m(y,null);ri(y,e[2],!0),D(m,E),D(m,_),D(_,S),D(_,C),D(t,w),D(t,T),D(T,O),e[14](O),e[15](T),D(t,B),D(t,P),L||(N=[nt(A,"change",e[11]),nt(y,"change",e[12]),nt(_,"click",e[13]),nt(P,"click",e[16])],L=!0)},p(j,[q]){if(q&1&&r!==(r=j[0].title+"")&&Ht(a,r),q&64){F=nn(j[6]);let Q;for(Q=0;Q<F.length;Q+=1){const k=v7(j,F,Q);z[Q]?z[Q].p(k,q):(z[Q]=y7(k),z[Q].c(),z[Q].m(A,null))}for(;Q<z.length;Q+=1)z[Q].d(1);z.length=F.length}q&66&&ri(A,j[1]),q&4&&ri(y,j[2]),q&32&&x!==(x=(j[5]?Xr:Kr)+"")&&Ht(C,x)},i:yn,o:yn,d(j){j&&Bt(t),Gn(z,j),Gn(H,j),e[14](null),e[15](null),L=!1,Vi(N)}}}const Wy=400,p1=1200;function ioe(e,t,i){let r,a,{toolInfo:o}=t,h,u,m="C",c="default",d=!0;const A=cu,p=$s.names(),v=(w,T)=>{if(w==="default")return[...T];if(w==="name")return[...T].sort((O,B)=>O.name<B.name?-1:1);if(w==="notes")return[...T].sort((O,B)=>O.notes.join(" ")<B.notes.join(" ")?-1:1);if(w==="number of notes")return[...T].sort((O,B)=>O.notes.length>B.notes.length?-1:1)},g=()=>{if(!u)return;const w=u.getContext("2d"),T=window.devicePixelRatio,O=u.getBoundingClientRect();i(4,u.width=O.width*T,u),i(4,u.height=O.height*T,u),w.scale(T,T),i(4,u.style.width=`${O.width}px`,u),i(4,u.style.height=`${O.height}px`,u),w.fillStyle="white",w.fillRect(0,0,Wy,p1);const B=130,P=(Wy-B)/12,L=P*.9,N=(p1-30)/r.length,F=N*.9;w.textAlign="center",w.fillStyle="black";for(const[G,H]of A.entries()){const j=B+(G+.5)*P;w.fillText(H,j,10),w.fillText(H,j,p1-3)}const z=new Map(A.map((G,H)=>[G,H]));for(const[G,H]of a.entries()){const j=15+G*N;w.fillStyle="black",w.textAlign="right",w.fillText(H.type,B-5,j+N-2.5),w.fillStyle="#666";for(const q of H.notes){const Q=z.get(q);d?w.fillStyle=kf.noteColormap[Q]:w.fillStyle=q===m?"#777":"#bbb";const k=B+Q*P+P*.05;w.fillRect(k,j,L,F),w.fillStyle="white",w.textAlign="center";const K=B+(Q+.5)*P;w.fillText(q,K,j+N-3.5)}}};ur(g);function y(){m=Ir(this),i(1,m),i(6,A)}function E(){c=Ir(this),i(2,c)}const _=()=>{i(5,d=!d),g()};function S(w){En[w?"unshift":"push"](()=>{u=w,i(4,u)})}function x(w){En[w?"unshift":"push"](()=>{h=w,i(3,h)})}const C=()=>{let w=[];for(const O of A){const B=p.map(P=>$s.get(`${O} ${P}`)).filter(P=>!P.empty).map(P=>(P.notes=P.notes.map(L=>VE.get(L)??L),P));w=w.concat(B)}const T=w.map(O=>({tonic:O.tonic,type:O.type,chroma:O.chroma,notes:O.notes}));VO("musical-scales",T)};return e.$$set=w=>{"toolInfo"in w&&i(0,o=w.toolInfo)},e.$$.update=()=>{e.$$.dirty&2&&i(10,r=p.map(w=>$s.get(`${m} ${w}`)).filter(w=>!w.empty).map(w=>(w.notes=w.notes.map(T=>VE.get(T)??T),w))),e.$$.dirty&1028&&i(9,a=v(c,r)),e.$$.dirty&512&&a&&g()},[o,m,c,h,u,d,A,p,g,a,r,y,E,_,S,x,C]}class roe extends Ai{constructor(t){super(),gi(this,t,ioe,noe,pi,{toolInfo:0})}}function b7(e,t,i){const r=e.slice();return r[3]=t[i],r}function soe(e){let t,i,r;var a=e[0].component;function o(h,u){return{props:{toolInfo:h[0]}}}return a&&(i=v1(a,o(e))),{c(){t=ie("div"),i&&gt(i.$$.fragment)},m(h,u){Rt(h,t,u),i&&ft(i,t,null),r=!0},p(h,u){if(u&1&&a!==(a=h[0].component)){if(i){Cg();const m=i;ht(m.$$.fragment,1,0,()=>{mt(m,1)}),Eg()}a?(i=v1(a,o(h)),gt(i.$$.fragment),ut(i.$$.fragment,1),ft(i,t,null)):i=null}else if(a){const m={};u&1&&(m.toolInfo=h[0]),i.$set(m)}},i(h){r||(i&&ut(i.$$.fragment,h),r=!0)},o(h){i&&ht(i.$$.fragment,h),r=!1},d(h){h&&Bt(t),i&&mt(i)}}}function aoe(e){let t,i,r,a=nn(e[1]),o=[];for(let h=0;h<a.length;h+=1)o[h]=M7(b7(e,a,h));return{c(){t=ie("p"),t.textContent="This page contains a collection of simple but useful tools.",i=ue(),r=ie("div");for(let h=0;h<o.length;h+=1)o[h].c();de(t,"class","explanation"),de(r,"class","grid")},m(h,u){Rt(h,t,u),Rt(h,i,u),Rt(h,r,u);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(r,null)},p(h,u){if(u&3){a=nn(h[1]);let m;for(m=0;m<a.length;m+=1){const c=b7(h,a,m);o[m]?o[m].p(c,u):(o[m]=M7(c),o[m].c(),o[m].m(r,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=a.length}},i:yn,o:yn,d(h){h&&(Bt(t),Bt(i),Bt(r)),Gn(o,h)}}}function M7(e){let t,i,r,a,o,h,u;function m(){return e[2](e[3])}return{c(){t=ie("div"),i=ie("h2"),i.textContent=`${e[3].title}`,r=ue(),a=ie("div"),a.textContent=`${e[3].description}`,o=ue(),de(a,"class","description"),de(t,"class","card")},m(c,d){Rt(c,t,d),D(t,i),D(t,r),D(t,a),D(t,o),h||(u=nt(t,"click",m),h=!0)},p(c,d){e=c},d(c){c&&Bt(t),h=!1,u()}}}function ooe(e){let t,i,r,a;const o=[aoe,soe],h=[];function u(m,c){return m[0]?1:0}return i=u(e),r=h[i]=o[i](e),{c(){t=ie("main"),r.c()},m(m,c){Rt(m,t,c),h[i].m(t,null),a=!0},p(m,[c]){let d=i;i=u(m),i===d?h[i].p(m,c):(Cg(),ht(h[d],1,1,()=>{h[d]=null}),Eg(),r=h[i],r?r.p(m,c):(r=h[i]=o[i](m),r.c()),ut(r,1),r.m(t,null))},i(m){a||(ut(r),a=!0)},o(m){ht(r),a=!1},d(m){m&&Bt(t),h[i].d()}}}function loe(e,t,i){let r=[{id:"midi-logger",title:"MIDI Logger",description:"Logs all incoming MIDI messages. Useful for getting to know a device or debugging MIDI issues.",component:wae},{id:"piano-roll",title:"Piano Roll",description:"Shows MIDI input as a piano roll.",component:Fae},{id:"guitar-tab",title:"Guitar Tab",description:"Shows MIDI input as guitar tab.",component:yae},{id:"guitar-tunings",title:"Guitar Tunings",description:"Small tool that computes the notes for a guitar tuning based on parameters. Open tunings are not included.",component:_ae},{id:"chord-detection",title:"Chord Detection",description:"Play a chord and see what it's named.",component:lq},{id:"note-colors",title:"Note Colors",description:"Different note color schemes.",component:Bae},{id:"scale-sets",title:"Scale Sets",description:"See how different musical scales relate to each other.",component:Yae},{id:"scale-notes",title:"Scale Notes",description:"See which notes are in each scale.",component:roe},{id:"tuner",title:"Tuner",description:"Tries to detect the currently most prominent pitch from microphone audio. Useful for tuning instruments.",component:$ae}],{currentTool:a}=t;const o=h=>{i(0,a=h)};return e.$$set=h=>{"currentTool"in h&&i(0,a=h.currentTool)},[a,r,o]}class coe extends Ai{constructor(t){super(),gi(this,t,loe,ooe,pi,{currentTool:0})}}function uoe(e){let t,i,r,a,o,h,u,m,c,d,A,p,v,g,y,E,_,S;return{c(){t=ie("main"),i=ie("h2"),i.textContent="Settings",r=ue(),a=ie("h3"),a.textContent="Guitar MIDI",o=ue(),h=ie("p"),h.textContent="These settings allow reducing noise from MIDI guitars.",u=ue(),m=ie("label"),c=ze(`Minimum velocity (0-127)
        `),d=ie("input"),p=ue(),v=ie("label"),g=ze(`Minimum duration (seconds)
        `),y=ie("input"),de(d,"type","number"),de(d,"min","0"),de(d,"max","127"),d.value=A=e[0].guitarMidiMinVelocity??0,de(m,"class","svelte-1dsjbtd"),de(y,"type","number"),de(y,"min","0"),de(y,"max","0.5"),de(y,"step","0.05"),y.value=E=e[0].guitarMidiMinDuration??0,de(v,"class","svelte-1dsjbtd")},m(x,C){Rt(x,t,C),D(t,i),D(t,r),D(t,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(m,d),D(t,p),D(t,v),D(v,g),D(v,y),_||(S=[nt(d,"change",e[2]),nt(y,"change",e[3])],_=!0)},p(x,[C]){C&1&&A!==(A=x[0].guitarMidiMinVelocity??0)&&d.value!==A&&(d.value=A),C&1&&E!==(E=x[0].guitarMidiMinDuration??0)&&y.value!==E&&(y.value=E)},i:yn,o:yn,d(x){x&&Bt(t),_=!1,Vi(S)}}}function hoe(e,t,i){let r=JSON.parse(localStorage.getItem(dy)??"{}");const a=(u,m)=>{i(0,r[u]=m,r),localStorage.setItem(dy,JSON.stringify(r))};return[r,a,u=>a("guitarMidiMinVelocity",+u.target.value),u=>a("guitarMidiMinDuration",+u.target.value)]}class doe extends Ai{constructor(t){super(),gi(this,t,hoe,uoe,pi,{})}}function foe(e,t,i){const r=e.slice();return r[18]=t[i],r}function moe(e,t,i){const r=e.slice();return r[18]=t[i],r}function _7(e,t,i){const r=e.slice();return r[23]=t[i],r}function C7(e,t,i){const r=e.slice();return r[18]=t[i],r}function E7(e,t,i){const r=e.slice();return r[23]=t[i],r}function w7(e,t,i){const r=e.slice();return r[18]=t[i],r}function x7(e,t,i){const r=e.slice();return r[32]=t[i],r}function S7(e,t,i){const r=e.slice();return r[35]=t[i],r}function I7(e,t,i){const r=e.slice();return r[18]=t[i],r}function T7(e,t,i){const r=e.slice();return r[32]=t[i],r}function B7(e,t,i){const r=e.slice();return r[35]=t[i],r}function poe(e,t,i){const r=e.slice();return r[32]=t[i],r}function goe(e,t,i){const r=e.slice();return r[35]=t[i],r}function Aoe(e,t,i){const r=e.slice();return r[32]=t[i],r[49]=i,r}function R7(e,t,i){const r=e.slice();return r[23]=t[i],r}function O7(e,t,i){const r=e.slice();return r[23]=t[i],r}function D7(e,t,i){const r=e.slice();return r[18]=t[i],r}function L7(e,t,i){const r=e.slice();return r[23]=t[i],r}function P7(e,t,i){const r=e.slice();return r[23]=t[i],r}function N7(e,t,i){const r=e.slice();return r[18]=t[i],r}function F7(e,t,i){const r=e.slice();return r[23]=t[i],r}function k7(e){let t,i=e[23]+"",r;return{c(){t=ie("th"),r=ze(i),de(t,"class","small svelte-1n5rbtx")},m(a,o){Rt(a,t,o),D(t,r)},p(a,o){o[0]&2&&i!==(i=a[23]+"")&&Ht(r,i)},d(a){a&&Bt(t)}}}function U7(e){let t,i=e[18]+"",r;return{c(){t=ie("th"),r=ze(i),de(t,"class","small svelte-1n5rbtx")},m(a,o){Rt(a,t,o),D(t,r)},p(a,o){o[0]&4&&i!==(i=a[18]+"")&&Ht(r,i)},d(a){a&&Bt(t)}}}function G7(e){let t,i=e[18].instruments.includes(e[23])?"⬤":"",r;return{c(){t=ie("td"),r=ze(i),de(t,"class","svelte-1n5rbtx")},m(a,o){Rt(a,t,o),D(t,r)},p(a,o){o[0]&3&&i!==(i=a[18].instruments.includes(a[23])?"⬤":"")&&Ht(r,i)},d(a){a&&Bt(t)}}}function V7(e){let t,i=e[18].data.includes(e[23])?"⬤":"",r;return{c(){t=ie("td"),r=ze(i),de(t,"class","svelte-1n5rbtx")},m(a,o){Rt(a,t,o),D(t,r)},p(a,o){o[0]&5&&i!==(i=a[18].data.includes(a[23])?"⬤":"")&&Ht(r,i)},d(a){a&&Bt(t)}}}function Q7(e){let t,i,r=e[18].title+"",a,o,h,u=e[18].input==="MIDI"?"⬤":"",m,c,d,A=e[18].input==="audio"?"⬤":"",p,v,g,y,E,_,S,x,C=nn([...e[1]]),w=[];for(let B=0;B<C.length;B+=1)w[B]=G7(P7(e,C,B));let T=nn([...e[2]]),O=[];for(let B=0;B<T.length;B+=1)O[B]=V7(L7(e,T,B));return{c(){t=ie("tr"),i=ie("td"),a=ze(r),o=ue(),h=ie("td"),m=ze(u),c=ue(),d=ie("td"),p=ze(A),v=ue(),g=ie("td"),y=ue();for(let B=0;B<w.length;B+=1)w[B].c();E=ue(),_=ie("td"),S=ue();for(let B=0;B<O.length;B+=1)O[B].c();x=ue(),Ei(i,"text-align","right"),de(i,"class","svelte-1n5rbtx"),de(h,"class","svelte-1n5rbtx"),de(d,"class","svelte-1n5rbtx"),de(g,"class","spacer svelte-1n5rbtx"),de(_,"class","spacer svelte-1n5rbtx"),de(t,"class","svelte-1n5rbtx")},m(B,P){Rt(B,t,P),D(t,i),D(i,a),D(t,o),D(t,h),D(h,m),D(t,c),D(t,d),D(d,p),D(t,v),D(t,g),D(t,y);for(let L=0;L<w.length;L+=1)w[L]&&w[L].m(t,null);D(t,E),D(t,_),D(t,S);for(let L=0;L<O.length;L+=1)O[L]&&O[L].m(t,null);D(t,x)},p(B,P){if(P[0]&1&&r!==(r=B[18].title+"")&&Ht(a,r),P[0]&1&&u!==(u=B[18].input==="MIDI"?"⬤":"")&&Ht(m,u),P[0]&1&&A!==(A=B[18].input==="audio"?"⬤":"")&&Ht(p,A),P[0]&3){C=nn([...B[1]]);let L;for(L=0;L<C.length;L+=1){const N=P7(B,C,L);w[L]?w[L].p(N,P):(w[L]=G7(N),w[L].c(),w[L].m(t,E))}for(;L<w.length;L+=1)w[L].d(1);w.length=C.length}if(P[0]&5){T=nn([...B[2]]);let L;for(L=0;L<T.length;L+=1){const N=L7(B,T,L);O[L]?O[L].p(N,P):(O[L]=V7(N),O[L].c(),O[L].m(t,x))}for(;L<O.length;L+=1)O[L].d(1);O.length=T.length}},d(B){B&&Bt(t),Gn(w,B),Gn(O,B)}}}function H7(e){let t,i=e[0].filter(a).length+"",r;function a(...o){return e[9](e[23],...o)}return{c(){t=ie("td"),r=ze(i),de(t,"class","svelte-1n5rbtx")},m(o,h){Rt(o,t,h),D(t,r)},p(o,h){e=o,h[0]&3&&i!==(i=e[0].filter(a).length+"")&&Ht(r,i)},d(o){o&&Bt(t)}}}function z7(e){let t,i=e[0].filter(a).length+"",r;function a(...o){return e[10](e[23],...o)}return{c(){t=ie("td"),r=ze(i),de(t,"class","svelte-1n5rbtx")},m(o,h){Rt(o,t,h),D(t,r)},p(o,h){e=o,h[0]&5&&i!==(i=e[0].filter(a).length+"")&&Ht(r,i)},d(o){o&&Bt(t)}}}function voe(e){let t,i,r;return{c(){t=ie("th"),t.textContent=`${e[32].title}`,i=ue(),r=ie("th"),de(t,"colspan",e[32].children.length),Ei(t,"border-bottom","4px solid "+Jc[e[49]]),de(r,"class","spacer svelte-1n5rbtx")},m(a,o){Rt(a,t,o),Rt(a,i,o),Rt(a,r,o)},p:yn,d(a){a&&(Bt(t),Bt(i),Bt(r))}}}function yoe(e){let t;return{c(){t=ie("th"),t.textContent=`${e[35].title}`,de(t,"class","small svelte-1n5rbtx")},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function boe(e){let t,i,r=nn(e[32].children),a=[];for(let o=0;o<r.length;o+=1)a[o]=yoe(goe(e,r,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();t=ue(),i=ie("th"),de(i,"class","spacer svelte-1n5rbtx")},m(o,h){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(o,h);Rt(o,t,h),Rt(o,i,h)},p:yn,d(o){o&&(Bt(t),Bt(i)),Gn(a,o)}}}function W7(e){let t,i=e[18].skills.includes(e[35].id)?"⬤":"",r;return{c(){t=ie("td"),r=ze(i),de(t,"class","svelte-1n5rbtx")},m(a,o){Rt(a,t,o),D(t,r)},p(a,o){o[0]&1&&i!==(i=a[18].skills.includes(a[35].id)?"⬤":"")&&Ht(r,i)},d(a){a&&Bt(t)}}}function j7(e){let t,i,r=nn(e[32].children),a=[];for(let o=0;o<r.length;o+=1)a[o]=W7(B7(e,r,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();t=ue(),i=ie("th"),de(i,"class","spacer svelte-1n5rbtx")},m(o,h){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(o,h);Rt(o,t,h),Rt(o,i,h)},p(o,h){if(h[0]&1){r=nn(o[32].children);let u;for(u=0;u<r.length;u+=1){const m=B7(o,r,u);a[u]?a[u].p(m,h):(a[u]=W7(m),a[u].c(),a[u].m(t.parentNode,t))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(o){o&&(Bt(t),Bt(i)),Gn(a,o)}}}function $7(e){let t,i,r=e[18].title+"",a,o,h,u,m=e[18].skills.length+"",c,d,A=nn(_l),p=[];for(let v=0;v<A.length;v+=1)p[v]=j7(T7(e,A,v));return{c(){t=ie("tr"),i=ie("td"),a=ze(r),o=ue();for(let v=0;v<p.length;v+=1)p[v].c();h=ue(),u=ie("td"),c=ze(m),d=ue(),Ei(i,"text-align","right"),de(i,"class","svelte-1n5rbtx"),de(u,"class","svelte-1n5rbtx"),de(t,"class","svelte-1n5rbtx")},m(v,g){Rt(v,t,g),D(t,i),D(i,a),D(t,o);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(t,null);D(t,h),D(t,u),D(u,c),D(t,d)},p(v,g){if(g[0]&1&&r!==(r=v[18].title+"")&&Ht(a,r),g[0]&1){A=nn(_l);let y;for(y=0;y<A.length;y+=1){const E=T7(v,A,y);p[y]?p[y].p(E,g):(p[y]=j7(E),p[y].c(),p[y].m(t,h))}for(;y<p.length;y+=1)p[y].d(1);p.length=A.length}g[0]&1&&m!==(m=v[18].skills.length+"")&&Ht(c,m)},d(v){v&&Bt(t),Gn(p,v)}}}function X7(e){let t,i=e[0].filter(a).length+"",r;function a(...o){return e[11](e[35],...o)}return{c(){t=ie("td"),r=ze(i),de(t,"class","svelte-1n5rbtx")},m(o,h){Rt(o,t,h),D(t,r)},p(o,h){e=o,h[0]&1&&i!==(i=e[0].filter(a).length+"")&&Ht(r,i)},d(o){o&&Bt(t)}}}function K7(e){let t,i,r=nn(e[32].children),a=[];for(let o=0;o<r.length;o+=1)a[o]=X7(S7(e,r,o));return{c(){for(let o=0;o<a.length;o+=1)a[o].c();t=ue(),i=ie("td"),de(i,"class","spacer svelte-1n5rbtx")},m(o,h){for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(o,h);Rt(o,t,h),Rt(o,i,h)},p(o,h){if(h[0]&1){r=nn(o[32].children);let u;for(u=0;u<r.length;u+=1){const m=S7(o,r,u);a[u]?a[u].p(m,h):(a[u]=X7(m),a[u].c(),a[u].m(t.parentNode,t))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(o){o&&(Bt(t),Bt(i)),Gn(a,o)}}}function Y7(e){let t,i=e[18]+"",r;return{c(){t=ie("th"),r=ze(i),de(t,"class","small svelte-1n5rbtx")},m(a,o){Rt(a,t,o),D(t,r)},p(a,o){o[0]&8&&i!==(i=a[18]+"")&&Ht(r,i)},d(a){a&&Bt(t)}}}function q7(e){let t,i=e[18].patterns.includes(e[23])?"⬤":"",r;return{c(){t=ie("td"),r=ze(i),de(t,"class","svelte-1n5rbtx")},m(a,o){Rt(a,t,o),D(t,r)},p(a,o){o[0]&9&&i!==(i=a[18].patterns.includes(a[23])?"⬤":"")&&Ht(r,i)},d(a){a&&Bt(t)}}}function J7(e){let t,i,r=e[18].title+"",a,o,h,u,m=e[18].patterns.length+"",c,d,A=nn([...e[3]]),p=[];for(let v=0;v<A.length;v+=1)p[v]=q7(E7(e,A,v));return{c(){t=ie("tr"),i=ie("td"),a=ze(r),o=ue();for(let v=0;v<p.length;v+=1)p[v].c();h=ue(),u=ie("td"),c=ze(m),d=ue(),Ei(i,"text-align","right"),de(i,"class","svelte-1n5rbtx"),de(u,"class","svelte-1n5rbtx"),de(t,"class","svelte-1n5rbtx")},m(v,g){Rt(v,t,g),D(t,i),D(i,a),D(t,o);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(t,null);D(t,h),D(t,u),D(u,c),D(t,d)},p(v,g){if(g[0]&1&&r!==(r=v[18].title+"")&&Ht(a,r),g[0]&9){A=nn([...v[3]]);let y;for(y=0;y<A.length;y+=1){const E=E7(v,A,y);p[y]?p[y].p(E,g):(p[y]=q7(E),p[y].c(),p[y].m(t,h))}for(;y<p.length;y+=1)p[y].d(1);p.length=A.length}g[0]&1&&m!==(m=v[18].patterns.length+"")&&Ht(c,m)},d(v){v&&Bt(t),Gn(p,v)}}}function Z7(e){let t,i=e[0].filter(a).length+"",r;function a(...o){return e[12](e[23],...o)}return{c(){t=ie("td"),r=ze(i),de(t,"class","svelte-1n5rbtx")},m(o,h){Rt(o,t,h),D(t,r)},p(o,h){e=o,h[0]&9&&i!==(i=e[0].filter(a).length+"")&&Ht(r,i)},d(o){o&&Bt(t)}}}function Moe(e){let t;return{c(){t=ie("option"),t.textContent=`${e[18]}`,t.__value=e[18],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function _oe(e){let t;return{c(){t=ie("option"),t.textContent=`${e[18]}`,t.__value=e[18],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function Coe(e){let t,i,r,a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He=e[0].length+"",Ae,Ke,Ue,ct=e[0].filter(e8).length+"",vt,dt,It,rt=e[0].filter(t8).length+"",Lt,hn,Et,xt,en,_t,Kt,Dt,Nt,St,pe,_e,De,Be,Le,ke,ce,X,Y,be,Te,We,tt,wt=e[0].length+"",Zt,qt,dn,Qt,xi,Fn,Br,Li,qi,Fs,Hr,wa,zr,ks,vs,ys,Pr=e[0].length+"",pr,us,to,ca,Fo,Ua,Ne,$e,pt,Vt,Tt,jt,mn,Ln,Dn,$t,ni,Jn,fi,dr,Si,Mi,Ti=nn([...e[1]]),ki=[];for(let at=0;at<Ti.length;at+=1)ki[at]=k7(F7(e,Ti,at));let Wr=nn([...e[2]]),Mn=[];for(let at=0;at<Wr.length;at+=1)Mn[at]=U7(N7(e,Wr,at));let _i=nn(e[0]),nr=[];for(let at=0;at<_i.length;at+=1)nr[at]=Q7(D7(e,_i,at));let Ui=nn([...e[1]]),re=[];for(let at=0;at<Ui.length;at+=1)re[at]=H7(O7(e,Ui,at));let le=nn([...e[2]]),ve=[];for(let at=0;at<le.length;at+=1)ve[at]=z7(R7(e,le,at));let Se=nn(_l),Fe=[];for(let at=0;at<Se.length;at+=1)Fe[at]=voe(Aoe(e,Se,at));let Ze=nn(_l),ot=[];for(let at=0;at<Ze.length;at+=1)ot[at]=boe(poe(e,Ze,at));let Yt=nn(e[0]),Wt=[];for(let at=0;at<Yt.length;at+=1)Wt[at]=$7(I7(e,Yt,at));let yt=nn(_l),Ot=[];for(let at=0;at<yt.length;at+=1)Ot[at]=K7(x7(e,yt,at));let on=nn([...e[3]]),Cn=[];for(let at=0;at<on.length;at+=1)Cn[at]=Y7(w7(e,on,at));let Vn=nn(e[0]),Qn=[];for(let at=0;at<Vn.length;at+=1)Qn[at]=J7(C7(e,Vn,at));let vi=nn([...e[3]]),ei=[];for(let at=0;at<vi.length;at+=1)ei[at]=Z7(_7(e,vi,at));let hi=nn(["skills","patterns","data","instruments"]),Ji=[];for(let at=0;at<4;at+=1)Ji[at]=Moe(moe(e,hi,at));let Mr=nn(["skills","patterns","data","instruments"]),Rr=[];for(let at=0;at<4;at+=1)Rr[at]=_oe(foe(e,Mr,at));return{c(){t=ie("main"),i=ie("h2"),i.textContent="input and instrument",r=ue(),a=ie("table"),o=ie("thead"),h=ie("th"),h.textContent="app",u=ue(),m=ie("th"),m.textContent="input",c=ue(),d=ie("th"),A=ue(),p=ie("th"),v=ze("instrument"),y=ue(),E=ie("th"),_=ue(),S=ie("th"),x=ze("data"),w=ue(),T=ie("thead"),O=ie("th"),B=ue(),P=ie("th"),P.textContent="MIDI",L=ue(),N=ie("th"),N.textContent="audio",F=ue(),z=ie("th"),G=ue();for(let at=0;at<ki.length;at+=1)ki[at].c();H=ue(),j=ie("th"),q=ue();for(let at=0;at<Mn.length;at+=1)Mn[at].c();Q=ue(),k=ie("thead"),K=ie("th"),W=ue(),J=ie("th"),se=ue(),ge=ie("th"),me=ue(),xe=ie("tbody");for(let at=0;at<nr.length;at+=1)nr[at].c();ye=ue(),we=ie("tr"),Ee=ie("td"),Ae=ze(He),Ke=ue(),Ue=ie("td"),vt=ze(ct),dt=ue(),It=ie("td"),Lt=ze(rt),hn=ue(),Et=ie("td"),xt=ue();for(let at=0;at<re.length;at+=1)re[at].c();en=ue(),_t=ie("td"),Kt=ue();for(let at=0;at<ve.length;at+=1)ve[at].c();Dt=ue(),Nt=ie("h2"),Nt.textContent="skills",St=ue(),pe=ie("table"),_e=ie("thead"),De=ie("th"),De.textContent="app",Be=ue();for(let at=0;at<Fe.length;at+=1)Fe[at].c();Le=ue(),ke=ie("thead"),ce=ie("th"),X=ue();for(let at=0;at<ot.length;at+=1)ot[at].c();Y=ue(),be=ie("tbody");for(let at=0;at<Wt.length;at+=1)Wt[at].c();Te=ue(),We=ie("tr"),tt=ie("td"),Zt=ze(wt),qt=ue();for(let at=0;at<Ot.length;at+=1)Ot[at].c();dn=ue(),Qt=ie("td"),xi=ue(),Fn=ie("h2"),Fn.textContent="patterns",Br=ue(),Li=ie("table"),qi=ie("thead"),Fs=ie("th"),Fs.textContent="app",Hr=ue();for(let at=0;at<Cn.length;at+=1)Cn[at].c();wa=ue(),zr=ie("tbody");for(let at=0;at<Qn.length;at+=1)Qn[at].c();ks=ue(),vs=ie("tr"),ys=ie("td"),pr=ze(Pr),us=ue();for(let at=0;at<ei.length;at+=1)ei[at].c();to=ue(),ca=ie("td"),Fo=ue(),Ua=ie("h2"),Ua.textContent="skill tree",Ne=ue(),$e=ie("div"),pt=ue(),Vt=ie("h2"),Vt.textContent="app metadata co-occurrence",Tt=ue(),jt=ie("label"),mn=ze(`row
        `),Ln=ie("select");for(let at=0;at<4;at+=1)Ji[at].c();Dn=ue(),$t=ie("label"),ni=ze(`column
        `),Jn=ie("select");for(let at=0;at<4;at+=1)Rr[at].c();fi=ue(),dr=ie("div"),Ei(h,"min-width","270px"),de(m,"colspan","2"),Ei(m,"border-bottom","4px solid "+Jc[0]),de(d,"class","spacer svelte-1n5rbtx"),de(p,"colspan",g=e[1].size),Ei(p,"border-bottom","4px solid "+Jc[1]),de(E,"class","spacer svelte-1n5rbtx"),de(S,"colspan",C=e[2].size),Ei(S,"border-bottom","4px solid "+Jc[2]),de(P,"class","small svelte-1n5rbtx"),de(N,"class","small svelte-1n5rbtx"),de(z,"class","spacer svelte-1n5rbtx"),de(j,"class","spacer svelte-1n5rbtx"),de(J,"colspan","2"),de(ge,"colspan",fe=e[1].size),de(Ee,"class","svelte-1n5rbtx"),de(Ue,"class","svelte-1n5rbtx"),de(It,"class","svelte-1n5rbtx"),de(Et,"class","spacer svelte-1n5rbtx"),de(_t,"class","spacer svelte-1n5rbtx"),de(we,"class","svelte-1n5rbtx"),de(a,"class","svelte-1n5rbtx"),Ei(De,"min-width","270px"),de(tt,"class","svelte-1n5rbtx"),de(Qt,"class","svelte-1n5rbtx"),de(We,"class","svelte-1n5rbtx"),de(pe,"class","svelte-1n5rbtx"),Ei(Fs,"min-width","270px"),de(ys,"class","svelte-1n5rbtx"),de(ca,"class","svelte-1n5rbtx"),de(vs,"class","svelte-1n5rbtx"),de(Li,"class","svelte-1n5rbtx"),de($e,"class","visualization"),e[6]===void 0&&mr(()=>e[14].call(Ln)),e[7]===void 0&&mr(()=>e[15].call(Jn)),de(dr,"class","visualization")},m(at,mi){Rt(at,t,mi),D(t,i),D(t,r),D(t,a),D(a,o),D(o,h),D(o,u),D(o,m),D(o,c),D(o,d),D(o,A),D(o,p),D(p,v),D(o,y),D(o,E),D(o,_),D(o,S),D(S,x),D(a,w),D(a,T),D(T,O),D(T,B),D(T,P),D(T,L),D(T,N),D(T,F),D(T,z),D(T,G);for(let et=0;et<ki.length;et+=1)ki[et]&&ki[et].m(T,null);D(T,H),D(T,j),D(T,q);for(let et=0;et<Mn.length;et+=1)Mn[et]&&Mn[et].m(T,null);D(a,Q),D(a,k),D(k,K),D(k,W),D(k,J),D(k,se),D(k,ge),D(a,me),D(a,xe);for(let et=0;et<nr.length;et+=1)nr[et]&&nr[et].m(xe,null);D(xe,ye),D(xe,we),D(we,Ee),D(Ee,Ae),D(we,Ke),D(we,Ue),D(Ue,vt),D(we,dt),D(we,It),D(It,Lt),D(we,hn),D(we,Et),D(we,xt);for(let et=0;et<re.length;et+=1)re[et]&&re[et].m(we,null);D(we,en),D(we,_t),D(we,Kt);for(let et=0;et<ve.length;et+=1)ve[et]&&ve[et].m(we,null);D(t,Dt),D(t,Nt),D(t,St),D(t,pe),D(pe,_e),D(_e,De),D(_e,Be);for(let et=0;et<Fe.length;et+=1)Fe[et]&&Fe[et].m(_e,null);D(pe,Le),D(pe,ke),D(ke,ce),D(ke,X);for(let et=0;et<ot.length;et+=1)ot[et]&&ot[et].m(ke,null);D(pe,Y),D(pe,be);for(let et=0;et<Wt.length;et+=1)Wt[et]&&Wt[et].m(be,null);D(be,Te),D(be,We),D(We,tt),D(tt,Zt),D(We,qt);for(let et=0;et<Ot.length;et+=1)Ot[et]&&Ot[et].m(We,null);D(We,dn),D(We,Qt),D(t,xi),D(t,Fn),D(t,Br),D(t,Li),D(Li,qi),D(qi,Fs),D(qi,Hr);for(let et=0;et<Cn.length;et+=1)Cn[et]&&Cn[et].m(qi,null);D(Li,wa),D(Li,zr);for(let et=0;et<Qn.length;et+=1)Qn[et]&&Qn[et].m(zr,null);D(zr,ks),D(zr,vs),D(vs,ys),D(ys,pr),D(vs,us);for(let et=0;et<ei.length;et+=1)ei[et]&&ei[et].m(vs,null);D(vs,to),D(vs,ca),D(t,Fo),D(t,Ua),D(t,Ne),D(t,$e),e[13]($e),D(t,pt),D(t,Vt),D(t,Tt),D(t,jt),D(jt,mn),D(jt,Ln);for(let et=0;et<4;et+=1)Ji[et]&&Ji[et].m(Ln,null);ri(Ln,e[6],!0),D(t,Dn),D(t,$t),D($t,ni),D($t,Jn);for(let et=0;et<4;et+=1)Rr[et]&&Rr[et].m(Jn,null);ri(Jn,e[7],!0),D(t,fi),D(t,dr),e[16](dr),Si||(Mi=[nt(Ln,"change",e[14]),nt(Ln,"change",e[8]),nt(Jn,"change",e[15]),nt(Jn,"change",e[8])],Si=!0)},p(at,mi){if(mi[0]&2&&g!==(g=at[1].size)&&de(p,"colspan",g),mi[0]&4&&C!==(C=at[2].size)&&de(S,"colspan",C),mi[0]&2){Ti=nn([...at[1]]);let et;for(et=0;et<Ti.length;et+=1){const yi=F7(at,Ti,et);ki[et]?ki[et].p(yi,mi):(ki[et]=k7(yi),ki[et].c(),ki[et].m(T,H))}for(;et<ki.length;et+=1)ki[et].d(1);ki.length=Ti.length}if(mi[0]&4){Wr=nn([...at[2]]);let et;for(et=0;et<Wr.length;et+=1){const yi=N7(at,Wr,et);Mn[et]?Mn[et].p(yi,mi):(Mn[et]=U7(yi),Mn[et].c(),Mn[et].m(T,null))}for(;et<Mn.length;et+=1)Mn[et].d(1);Mn.length=Wr.length}if(mi[0]&2&&fe!==(fe=at[1].size)&&de(ge,"colspan",fe),mi[0]&7){_i=nn(at[0]);let et;for(et=0;et<_i.length;et+=1){const yi=D7(at,_i,et);nr[et]?nr[et].p(yi,mi):(nr[et]=Q7(yi),nr[et].c(),nr[et].m(xe,ye))}for(;et<nr.length;et+=1)nr[et].d(1);nr.length=_i.length}if(mi[0]&1&&He!==(He=at[0].length+"")&&Ht(Ae,He),mi[0]&1&&ct!==(ct=at[0].filter(e8).length+"")&&Ht(vt,ct),mi[0]&1&&rt!==(rt=at[0].filter(t8).length+"")&&Ht(Lt,rt),mi[0]&3){Ui=nn([...at[1]]);let et;for(et=0;et<Ui.length;et+=1){const yi=O7(at,Ui,et);re[et]?re[et].p(yi,mi):(re[et]=H7(yi),re[et].c(),re[et].m(we,en))}for(;et<re.length;et+=1)re[et].d(1);re.length=Ui.length}if(mi[0]&5){le=nn([...at[2]]);let et;for(et=0;et<le.length;et+=1){const yi=R7(at,le,et);ve[et]?ve[et].p(yi,mi):(ve[et]=z7(yi),ve[et].c(),ve[et].m(we,null))}for(;et<ve.length;et+=1)ve[et].d(1);ve.length=le.length}if(mi[0]&1){Yt=nn(at[0]);let et;for(et=0;et<Yt.length;et+=1){const yi=I7(at,Yt,et);Wt[et]?Wt[et].p(yi,mi):(Wt[et]=$7(yi),Wt[et].c(),Wt[et].m(be,Te))}for(;et<Wt.length;et+=1)Wt[et].d(1);Wt.length=Yt.length}if(mi[0]&1&&wt!==(wt=at[0].length+"")&&Ht(Zt,wt),mi[0]&1){yt=nn(_l);let et;for(et=0;et<yt.length;et+=1){const yi=x7(at,yt,et);Ot[et]?Ot[et].p(yi,mi):(Ot[et]=K7(yi),Ot[et].c(),Ot[et].m(We,dn))}for(;et<Ot.length;et+=1)Ot[et].d(1);Ot.length=yt.length}if(mi[0]&8){on=nn([...at[3]]);let et;for(et=0;et<on.length;et+=1){const yi=w7(at,on,et);Cn[et]?Cn[et].p(yi,mi):(Cn[et]=Y7(yi),Cn[et].c(),Cn[et].m(qi,null))}for(;et<Cn.length;et+=1)Cn[et].d(1);Cn.length=on.length}if(mi[0]&9){Vn=nn(at[0]);let et;for(et=0;et<Vn.length;et+=1){const yi=C7(at,Vn,et);Qn[et]?Qn[et].p(yi,mi):(Qn[et]=J7(yi),Qn[et].c(),Qn[et].m(zr,ks))}for(;et<Qn.length;et+=1)Qn[et].d(1);Qn.length=Vn.length}if(mi[0]&1&&Pr!==(Pr=at[0].length+"")&&Ht(pr,Pr),mi[0]&9){vi=nn([...at[3]]);let et;for(et=0;et<vi.length;et+=1){const yi=_7(at,vi,et);ei[et]?ei[et].p(yi,mi):(ei[et]=Z7(yi),ei[et].c(),ei[et].m(vs,to))}for(;et<ei.length;et+=1)ei[et].d(1);ei.length=vi.length}mi[0]&64&&ri(Ln,at[6]),mi[0]&128&&ri(Jn,at[7])},i:yn,o:yn,d(at){at&&Bt(t),Gn(ki,at),Gn(Mn,at),Gn(nr,at),Gn(re,at),Gn(ve,at),Gn(Fe,at),Gn(ot,at),Gn(Wt,at),Gn(Ot,at),Gn(Cn,at),Gn(Qn,at),Gn(ei,at),e[13](null),Gn(Ji,at),Gn(Rr,at),e[16](null),Si=!1,Vi(Mi)}}}const e8=e=>e.input==="MIDI",t8=e=>e.input==="audio";function Eoe(e,t,i){let{apps:r=[]}=t,{allInstruments:a=new Set}=t,{allData:o=new Set}=t,{allPatterns:h=new Set}=t,u,m,c="skills",d="patterns";const A=()=>{const w=B=>{if(B.children){const P=B.children.flatMap(L=>w(L).map(N=>`${B.title}/${N}`));return[B.title,...P]}else return[`${B.label} ${B.title}`]},T=w({title:"skills",children:_l}),O=lr({axis:null,margin:10,marginLeft:60,marginRight:200,width:500,marks:[xne(T,{treeSort:"node:height",fontSize:16,stroke:"#ddd",dot:!1})]});i(4,u.textContent="",u),u.appendChild(O)},p=()=>{const w=new Map;for(const B of r)for(const P of B[d]){w.has(P)||w.set(P,new Map);const L=w.get(P);for(const N of B[c])L.has(N)||L.set(N,new Set),L.get(N).add(B.title)}const T=[];for(const[B,P]of w.entries())for(const[L,N]of P.entries())T.push({k1:B,k2:L,apps:[...N]});const O=lr({margin:10,marginLeft:150,marginRight:50,marginBottom:100,width:1e3,aspectRatio:1.2,grid:!0,x:{label:d,tickRotate:45},y:{label:c},color:{label:"number of apps",legend:!0,scheme:"blues"},marks:[lg(T,{x:B=>B.k1,y:B=>B.k2,fill:B=>B.apps.length,title:B=>`${B.k1} | ${B.k2}

${B.apps.join(`
`)}`,rx:5}),Na(T,{x:B=>B.k1,y:B=>B.k2,text:B=>B.apps.length,stroke:"#fffc",strokeWidth:6,fill:"black"})]});i(5,m.textContent="",m),m.appendChild(O)};ur(()=>{A(),p()});const v=(w,T)=>T.instruments.includes(w),g=(w,T)=>T.data.includes(w),y=(w,T)=>T.skills.includes(w.id),E=(w,T)=>T.patterns.includes(w);function _(w){En[w?"unshift":"push"](()=>{u=w,i(4,u)})}function S(){c=Ir(this),i(6,c)}function x(){d=Ir(this),i(7,d)}function C(w){En[w?"unshift":"push"](()=>{m=w,i(5,m)})}return e.$$set=w=>{"apps"in w&&i(0,r=w.apps),"allInstruments"in w&&i(1,a=w.allInstruments),"allData"in w&&i(2,o=w.allData),"allPatterns"in w&&i(3,h=w.allPatterns)},[r,a,o,h,u,m,c,d,p,v,g,y,E,_,S,x,C]}class woe extends Ai{constructor(t){super(),gi(this,t,Eoe,Coe,pi,{apps:0,allInstruments:1,allData:2,allPatterns:3},null,[-1,-1,-1])}}var yg,bg,Mg,Sh,d9,Ju,f9,Ih,m9,jo,gl,Th;class V4{constructor(){Vr(this,yg,.03);Vr(this,bg,.1);Vr(this,Mg,50);Vr(this,Sh,!1);Vr(this,d9,null);Vr(this,Ju,null);Vr(this,f9,4);Vr(this,Ih,1/0);Vr(this,m9);Vr(this,jo,null);Vr(this,gl,new AudioContext);Vr(this,Th,null);xr(this,"_scheduler",()=>{const t=Bn(this,f9),i=60/Bn(this,Ju);let r=Bn(this,m9)+Bn(this,jo)*i;for(;r<Bn(this,gl).currentTime+Bn(this,bg);)if(Bn(this,jo)<Bn(this,Ih)-1){r+=i;const a=Bn(this,jo)%t===t-1||Bn(this,jo)===-1,o=r-Bn(this,gl).currentTime,h=performance.now()+o*1e3;this._playSound(r,h,a),t_(this,jo)._++}Bn(this,jo)<Bn(this,Ih)-1?Sr(this,d9,setTimeout(this._scheduler,Bn(this,Mg))):this.stop()})}get bpm(){return Bn(this,Ju)}get beatCount(){return Bn(this,jo)}onClick(t){Sr(this,Th,t)}start(t,i=4,r=1/0){if(!t||Number.isNaN(+t)){console.error(`[Metronome] Invalid bpm ${t}`);return}if(!i||Number.isNaN(+i)){console.error(`[Metronome] Invalid accent ${i}`);return}if(!r||Number.isNaN(+r)){console.error(`[Metronome] Invalid maxBeeps ${r}`);return}Bn(this,gl).state==="suspended"&&Bn(this,gl).resume(),Sr(this,Ju,+t),Sr(this,f9,+i),Sr(this,Ih,+r),Sr(this,Sh,!0),console.log(`Metronome @ ${t}bpm, accent every ${i}. beat, limited to ${r}`),Sr(this,jo,-1),Sr(this,m9,Bn(this,gl).currentTime),this._scheduler()}stop(){console.log("[Metronome] stopped"),clearTimeout(Bn(this,d9)),Sr(this,Sh,!1)}toggle(t,i=4,r=1/0){Bn(this,Sh)?this.stop():(t===void 0&&(t=Bn(this,Ju)),this.start(t,i,r))}_playSound(t,i,r){Bn(this,Th)&&Bn(this,Th).call(this,t,i,r);const a=Bn(this,gl).createOscillator();a.connect(Bn(this,gl).destination);const o=r?300:200;a.frequency.value=o,a.start(t),a.stop(t+Bn(this,yg))}}yg=new WeakMap,bg=new WeakMap,Mg=new WeakMap,Sh=new WeakMap,d9=new WeakMap,Ju=new WeakMap,f9=new WeakMap,Ih=new WeakMap,m9=new WeakMap,jo=new WeakMap,gl=new WeakMap,Th=new WeakMap;function xoe(e){let t,i,r;return{c(){t=ie("button"),t.textContent="metronome",de(t,"title","Toggle metronome (click)")},m(a,o){Rt(a,t,o),i||(r=nt(t,"click",e[4]),i=!0)},p:yn,i:yn,o:yn,d(a){a&&Bt(t),i=!1,r()}}}function Soe(e,t,i){let{tempo:r=120}=t,{accent:a=4}=t,{maxBeeps:o=1/0}=t;const h=new V4;hr(()=>{h.stop()});const u=()=>{h.toggle(r,a,o)};return e.$$set=m=>{"tempo"in m&&i(0,r=m.tempo),"accent"in m&&i(1,a=m.accent),"maxBeeps"in m&&i(2,o=m.maxBeeps)},[r,a,o,h,u]}class sl extends Ai{constructor(t){super(),gi(this,t,Soe,xoe,pi,{tempo:0,accent:1,maxBeeps:2})}}function Ioe(e){let t,i,r,a,o,h;return{c(){t=ie("label"),i=ze(e[2]),r=ue(),a=ie("input"),de(a,"type","number"),de(a,"step","5"),de(a,"min","10"),de(a,"max","400"),Ei(a,"width","55px"),de(t,"title",e[3])},m(u,m){Rt(u,t,m),D(t,i),D(t,r),D(t,a),rn(a,e[0]),o||(h=[nt(a,"input",e[4]),nt(a,"change",function(){_g(e[1])&&e[1].apply(this,arguments)})],o=!0)},p(u,[m]){e=u,m&4&&Ht(i,e[2]),m&1&&$n(a.value)!==e[0]&&rn(a,e[0]),m&8&&de(t,"title",e[3])},i:yn,o:yn,d(u){u&&Bt(t),o=!1,Vi(h)}}}function Toe(e,t,i){let{value:r}=t,{callback:a=()=>{}}=t,{label:o="tempo"}=t,{title:h="The tempo in beats per minute (bpm)"}=t;function u(){r=$n(this.value),i(0,r)}return e.$$set=m=>{"value"in m&&i(0,r=m.value),"callback"in m&&i(1,a=m.callback),"label"in m&&i(2,o=m.label),"title"in m&&i(3,h=m.title)},[r,a,o,h,u]}class Ya extends Ai{constructor(t){super(),gi(this,t,Toe,Ioe,pi,{value:0,callback:1,label:2,title:3})}}function Boe(e){let t,i,r,a,o,h;return{c(){t=ie("label"),i=ze(e[2]),r=ue(),a=ie("input"),de(a,"type","number"),de(a,"step",e[6]),de(a,"min",e[4]),de(a,"max",e[5]),Ei(a,"width","55px"),de(t,"title",e[3])},m(u,m){Rt(u,t,m),D(t,i),D(t,r),D(t,a),rn(a,e[0]),o||(h=[nt(a,"input",e[7]),nt(a,"change",function(){_g(e[1])&&e[1].apply(this,arguments)})],o=!0)},p(u,[m]){e=u,m&4&&Ht(i,e[2]),m&64&&de(a,"step",e[6]),m&16&&de(a,"min",e[4]),m&32&&de(a,"max",e[5]),m&1&&$n(a.value)!==e[0]&&rn(a,e[0]),m&8&&de(t,"title",e[3])},i:yn,o:yn,d(u){u&&Bt(t),o=!1,Vi(h)}}}function Roe(e,t,i){let{value:r}=t,{callback:a=()=>{}}=t,{label:o="note count"}=t,{title:h="The number of most recently played notes that are shown"}=t,{min:u=10}=t,{max:m=500}=t,{step:c=10}=t;function d(){r=$n(this.value),i(0,r)}return e.$$set=A=>{"value"in A&&i(0,r=A.value),"callback"in A&&i(1,a=A.callback),"label"in A&&i(2,o=A.label),"title"in A&&i(3,h=A.title),"min"in A&&i(4,u=A.min),"max"in A&&i(5,m=A.max),"step"in A&&i(6,c=A.step)},[r,a,o,h,u,m,c,d]}class C0 extends Ai{constructor(t){super(),gi(this,t,Roe,Boe,pi,{value:0,callback:1,label:2,title:3,min:4,max:5,step:6})}}const Q4=[{name:"dotted-whole",beats:6,symbol:"𝅝.",dotted:!0},{name:"whole",beats:4,symbol:"𝅝"},{name:"dotted-half",beats:3,symbol:"𝅗𝅥.",dotted:!0},{name:"half",beats:2,symbol:"𝅗𝅥"},{name:"dotted-quarter",beats:1.5,symbol:"𝅘𝅥.",dotted:!0},{name:"quarter",beats:1,symbol:"𝅘𝅥"},{name:"eight-triplet",beats:1/3,symbol:"𝅘𝅥⅓",tuplet:!0},{name:"dotted-eighth",beats:.75,symbol:"𝅘𝅥𝅮.",dotted:!0},{name:"eighth",beats:.5,symbol:"𝅘𝅥𝅮"},{name:"dotted-sixteenth",beats:.375,symbol:"𝅘𝅥𝅯.",dotted:!0},{name:"sixteenth",beats:.25,symbol:"𝅘𝅥𝅯"},{name:"thirtysecond",beats:.125,symbol:"𝅘𝅥𝅰"},{name:"sixtyfourth",beats:.0625,symbol:"𝅘𝅥𝅱"}];function Ooe(e){let t,i,r;return{c(){t=ie("button"),t.textContent="reset",de(t,"title","Clear all played notes")},m(a,o){Rt(a,t,o),i||(r=nt(t,"click",e[3]),i=!0)},p:yn,i:yn,o:yn,d(a){a&&Bt(t),i=!1,r()}}}function Doe(e,t,i){let{notes:r=[]}=t,{saveToStorage:a}=t,{callback:o=()=>{}}=t;const h=()=>{(r.length===0||confirm("Reset played notes?"))&&(a(),i(0,r=[]),o())};return e.$$set=u=>{"notes"in u&&i(0,r=u.notes),"saveToStorage"in u&&i(1,a=u.saveToStorage),"callback"in u&&i(2,o=u.callback)},[r,a,o,h]}class Ts extends Ai{constructor(t){super(),gi(this,t,Doe,Ooe,pi,{notes:0,saveToStorage:1,callback:2})}}function Loe(e){let t,i,r;return{c(){t=ie("button"),t.textContent="export",de(t,"title","Export all data and settings")},m(a,o){Rt(a,t,o),i||(r=nt(t,"click",e[0]),i=!0)},p:yn,i:yn,o:yn,d(a){a&&Bt(t),i=!1,r()}}}function Poe(e,t,i){let{demoId:r}=t,{getExportData:a}=t;const o=()=>{const h=a();VO(r,h)};return e.$$set=h=>{"demoId"in h&&i(1,r=h.demoId),"getExportData"in h&&i(2,a=h.getExportData)},[o,r,a]}class es extends Ai{constructor(t){super(),gi(this,t,Poe,Loe,pi,{demoId:1,getExportData:2})}}function Noe(e){let t,i,r,a,o;return{c(){t=ie("button"),t.textContent="import",i=ue(),r=ie("input"),de(t,"title","Import all data and settings"),de(r,"type","file"),de(r,"id","file-input"),Ei(r,"display","none")},m(h,u){Rt(h,t,u),Rt(h,i,u),Rt(h,r,u),e[4](r),a||(o=[nt(t,"click",e[3]),nt(r,"input",e[1])],a=!0)},p:yn,i:yn,o:yn,d(h){h&&(Bt(t),Bt(i),Bt(r)),e[4](null),a=!1,Vi(o)}}}function Foe(e,t,i){let{loadData:r}=t,a;const o=async m=>{const c=await Zae(m);r(c)},h=()=>a.click();function u(m){En[m?"unshift":"push"](()=>{a=m,i(0,a)})}return e.$$set=m=>{"loadData"in m&&i(2,r=m.loadData)},[a,o,r,h,u]}class ts extends Ai{constructor(t){super(),gi(this,t,Foe,Noe,pi,{loadData:2})}}function n8(e,t,i){const r=e.slice();return r[4]=t[i],r[6]=i,r}function i8(e){let t;return{c(){t=ie("option"),t.textContent=`${e[4].date.substring(0,16)}`,t.__value=e[6],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function koe(e){let t,i,r,a,o=nn(e[1]),h=[];for(let u=0;u<o.length;u+=1)h[u]=i8(n8(e,o,u));return{c(){t=ie("select"),i=ie("option"),i.textContent="history";for(let u=0;u<h.length;u+=1)h[u].c();i.selected=!0,i.disabled=!0,i.__value="history",rn(i,i.__value)},m(u,m){Rt(u,t,m),D(t,i);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(t,null);r||(a=nt(t,"change",e[3]),r=!0)},p(u,[m]){if(m&2){o=nn(u[1]);let c;for(c=0;c<o.length;c+=1){const d=n8(u,o,c);h[c]?h[c].p(d,m):(h[c]=i8(d),h[c].c(),h[c].m(t,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=o.length}},i:yn,o:yn,d(u){u&&Bt(t),Gn(h,u),r=!1,a()}}}function Uoe(e,t,i){let{demoId:r}=t,{loadData:a=u=>{}}=t;const o=xX(r).reverse(),h=u=>a(o[+u.target.value].data);return e.$$set=u=>{"demoId"in u&&i(2,r=u.demoId),"loadData"in u&&i(0,a=u.loadData)},[a,o,r,h]}class ns extends Ai{constructor(t){super(),gi(this,t,Uoe,koe,pi,{demoId:2,loadData:0})}}const Goe=90,Voe=30,Qoe=!1,Hoe=[{time:0,velocity:.4566929133858268},{time:.42410000014305116,velocity:.3779527559055118},{time:.795,velocity:.3779527559055118},{time:1.181,velocity:.31496062992125984},{time:1.5501000001430512,velocity:.33070866141732286},{time:1.912100000143051,velocity:.25984251968503935},{time:2.275100000143051,velocity:.10236220472440945},{time:2.609100000143051,velocity:.16535433070866143},{time:2.971,velocity:.3937007874015748},{time:3.366100000143051,velocity:.2047244094488189},{time:3.7811000001430513,velocity:.1968503937007874},{time:4.166100000143051,velocity:.2440944881889764},{time:4.539,velocity:.47244094488188976},{time:4.7551000001430515,velocity:.4409448818897638},{time:4.946,velocity:.44881889763779526},{time:5.141100000143052,velocity:.4251968503937008},{time:5.338100000143051,velocity:.4251968503937008},{time:5.523,velocity:.4566929133858268},{time:5.701100000143051,velocity:.47244094488188976},{time:5.890100000143051,velocity:.4645669291338583},{time:6.069,velocity:.44881889763779526},{time:6.257,velocity:.4409448818897638},{time:6.440100000143051,velocity:.41732283464566927},{time:6.621100000143051,velocity:.4566929133858268},{time:6.801100000143051,velocity:.4409448818897638},{time:6.9841000001430515,velocity:.4409448818897638},{time:7.175,velocity:.3858267716535433},{time:7.414,velocity:.3464566929133858},{time:7.761100000143051,velocity:.1968503937007874},{time:8.095,velocity:.007874015748031496},{time:8.379,velocity:.16535433070866143},{time:8.61710000014305,velocity:.23622047244094488},{time:8.893,velocity:.23622047244094488},{time:9.12710000014305,velocity:.28346456692913385},{time:9.434,velocity:.11023622047244094},{time:9.702100000143052,velocity:.2047244094488189},{time:9.96310000014305,velocity:.1889763779527559},{time:10.230100000143052,velocity:.2204724409448819},{time:10.50210000014305,velocity:.18110236220472442},{time:10.778100000143052,velocity:.18110236220472442},{time:11.042100000143051,velocity:.2125984251968504},{time:11.288100000143052,velocity:.15748031496062992},{time:11.564100000143052,velocity:.18110236220472442},{time:11.81010000014305,velocity:.31496062992125984},{time:12.02710000014305,velocity:.3858267716535433},{time:12.35810000014305,velocity:.10236220472440945},{time:12.70010000014305,velocity:.08661417322834646},{time:13.080100000143052,velocity:.007874015748031496},{time:13.502,velocity:.031496062992125984},{time:13.82510000014305,velocity:.12598425196850394},{time:14.163100000143052,velocity:.15748031496062992},{time:14.513100000143051,velocity:.12598425196850394},{time:14.87410000014305,velocity:.14960629921259844},{time:15.203100000143051,velocity:.11811023622047244},{time:15.500100000143052,velocity:.2047244094488189},{time:15.772,velocity:.2047244094488189},{time:16.06410000014305,velocity:.1889763779527559},{time:16.38810000014305,velocity:.1732283464566929},{time:16.67710000014305,velocity:.16535433070866143},{time:16.996,velocity:.18110236220472442},{time:17.28210000014305,velocity:.2047244094488189},{time:17.60510000014305,velocity:.18110236220472442},{time:17.924100000143053,velocity:.14173228346456693},{time:18.28010000014305,velocity:.1732283464566929},{time:18.663,velocity:.1968503937007874},{time:19.04810000014305,velocity:.09448818897637795},{time:19.40710000014305,velocity:.10236220472440945},{time:19.802,velocity:.11811023622047244},{time:20.24110000014305,velocity:.13385826771653545},{time:20.618100000143052,velocity:.14173228346456693},{time:21.002100000143052,velocity:.5118110236220472},{time:21.339100000143052,velocity:.14960629921259844},{time:21.71610000014305,velocity:.08661417322834646},{time:22.10510000014305,velocity:.13385826771653545},{time:22.44810000014305,velocity:.4251968503937008},{time:22.84910000014305,velocity:.1889763779527559},{time:23.24010000014305,velocity:.12598425196850394},{time:23.60510000014305,velocity:.08661417322834646},{time:23.96310000014305,velocity:.3937007874015748},{time:24.38110000014305,velocity:.2047244094488189},{time:24.79810000014305,velocity:.1889763779527559},{time:25.17310000014305,velocity:.18110236220472442},{time:25.53310000014305,velocity:.4251968503937008},{time:25.93410000014305,velocity:.1968503937007874},{time:26.336100000143052,velocity:.18110236220472442},{time:26.69510000014305,velocity:.15748031496062992},{time:27.06710000014305,velocity:.29133858267716534},{time:27.51910000014305,velocity:.18110236220472442},{time:27.88410000014305,velocity:.2047244094488189},{time:28.264100000143053,velocity:.007874015748031496},{time:28.607100000143053,velocity:.3779527559055118},{time:29.022100000143052,velocity:.031496062992125984},{time:29.411,velocity:.14173228346456693},{time:29.76810000014305,velocity:.07874015748031496},{time:30.11710000014305,velocity:.4094488188976378},{time:30.525,velocity:.31496062992125984},{time:30.892100000143053,velocity:.29133858267716534},{time:31.293100000143053,velocity:.2047244094488189},{time:31.666,velocity:.4409448818897638},{time:32.076,velocity:.2047244094488189},{time:32.44910000014305,velocity:.13385826771653545},{time:32.82010000014305,velocity:.14173228346456693},{time:33.16710000014305,velocity:.4094488188976378},{time:33.487,velocity:.15748031496062992},{time:33.86510000014305,velocity:.11023622047244094},{time:34.24710000014305,velocity:.1889763779527559}],zoe="accents",Woe="2024-07-02T14:39:34.656Z",joe={tempo:Goe,pastNoteCount:Voe,useDotted:Qoe,notes:Hoe,_demoId:zoe,_date:Woe};function $oe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w=(e[4]?Xr:Kr)+"",T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe;function ye(Ue){e[11](Ue)}let we={callback:e[7]};e[2]!==void 0&&(we.value=e[2]),v=new Ya({props:we}),En.push(()=>Di(v,"value",ye));function Ee(Ue){e[12](Ue)}let He={callback:e[7]};e[3]!==void 0&&(He.value=e[3]),E=new C0({props:He}),En.push(()=>Di(E,"value",Ee)),N=new sl({props:{tempo:e[2],accent:4}});function Ae(Ue){e[15](Ue)}let Ke={saveToStorage:e[10],callback:e[7]};return e[5]!==void 0&&(Ke.notes=e[5]),z=new Ts({props:Ke}),En.push(()=>Di(z,"notes",Ae)),j=new es({props:{getExportData:e[8],demoId:e[0].id}}),Q=new ts({props:{loadData:e[9]}}),J=new ns({props:{demoId:e[0].id,loadData:e[9]}}),ge=new kr({props:{noteOn:e[6]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Set a tempo and start playing. The time between the notes you play will
        be displayed as note symbols, so you can see whether you play, for
        example, correct quarter notes. The note's velocity is encoded as font
        size, so you can see whether you accent the correct notes, for example
        the first note in each triplet, or the the first in each group of 4. You
        can also try different accent patterns such as:`,u=ue(),m=ie("p"),m.innerHTML="<b>1</b>e+<b>a</b> 2e+a 3<b>e</b>+a <b>4</b>e+a",c=ue(),d=ie("p"),d.innerHTML=`<span class="acc svelte-64izzl">𝅘𝅥</span> 𝅘𝅥 𝅘𝅥 <span class="acc svelte-64izzl">𝅘𝅥</span> | 𝅘𝅥 𝅘𝅥 𝅘𝅥 𝅘𝅥 | 𝅘𝅥
        <span class="acc svelte-64izzl">𝅘𝅥</span>
        𝅘𝅥 𝅘𝅥 |
        <span class="acc svelte-64izzl">𝅘𝅥</span>
        𝅘𝅥 𝅘𝅥 𝅘𝅥`,A=ue(),p=ie("div"),gt(v.$$.fragment),y=ue(),gt(E.$$.fragment),S=ue(),x=ie("button"),C=ze("dotted notes "),T=ze(w),O=ue(),B=ie("div"),P=ue(),L=ie("div"),gt(N.$$.fragment),F=ue(),gt(z.$$.fragment),H=ue(),gt(j.$$.fragment),q=ue(),gt(Q.$$.fragment),k=ue(),K=ie("button"),K.textContent="example",W=ue(),gt(J.$$.fragment),se=ue(),gt(ge.$$.fragment),de(h,"class","explanation"),de(x,"title","Use dotted notes? If not, the closest non-dotted note will be taken."),de(p,"class","control"),de(B,"class","visualization"),de(L,"class","control"),de(t,"class","demo")},m(Ue,ct){Rt(Ue,t,ct),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(t,c),D(t,d),D(t,A),D(t,p),ft(v,p,null),D(p,y),ft(E,p,null),D(p,S),D(p,x),D(x,C),D(x,T),D(t,O),D(t,B),e[14](B),D(t,P),D(t,L),ft(N,L,null),D(L,F),ft(z,L,null),D(L,H),ft(j,L,null),D(L,q),ft(Q,L,null),D(L,k),D(L,K),D(L,W),ft(J,L,null),D(t,se),ft(ge,t,null),fe=!0,me||(xe=[nt(x,"click",e[13]),nt(K,"click",e[16])],me=!0)},p(Ue,[ct]){(!fe||ct&1)&&r!==(r=Ue[0].title+"")&&Ht(a,r);const vt={};!g&&ct&4&&(g=!0,vt.value=Ue[2],Oi(()=>g=!1)),v.$set(vt);const dt={};!_&&ct&8&&(_=!0,dt.value=Ue[3],Oi(()=>_=!1)),E.$set(dt),(!fe||ct&16)&&w!==(w=(Ue[4]?Xr:Kr)+"")&&Ht(T,w);const It={};ct&4&&(It.tempo=Ue[2]),N.$set(It);const rt={};!G&&ct&32&&(G=!0,rt.notes=Ue[5],Oi(()=>G=!1)),z.$set(rt);const Lt={};ct&1&&(Lt.demoId=Ue[0].id),j.$set(Lt);const hn={};ct&1&&(hn.demoId=Ue[0].id),J.$set(hn)},i(Ue){fe||(ut(v.$$.fragment,Ue),ut(E.$$.fragment,Ue),ut(N.$$.fragment,Ue),ut(z.$$.fragment,Ue),ut(j.$$.fragment,Ue),ut(Q.$$.fragment,Ue),ut(J.$$.fragment,Ue),ut(ge.$$.fragment,Ue),fe=!0)},o(Ue){ht(v.$$.fragment,Ue),ht(E.$$.fragment,Ue),ht(N.$$.fragment,Ue),ht(z.$$.fragment,Ue),ht(j.$$.fragment,Ue),ht(Q.$$.fragment,Ue),ht(J.$$.fragment,Ue),ht(ge.$$.fragment,Ue),fe=!1},d(Ue){Ue&&Bt(t),mt(v),mt(E),e[14](null),mt(N),mt(z),mt(j),mt(Q),mt(J),mt(ge),me=!1,Vi(xe)}}}let Zp=1e3;function Xoe(e,t,i){let{demoInfo:r}=t,a,o=120,h=12,u=!0,m=0,c=[];const d=Q4,A=d.filter(O=>!O.dotted),p=async O=>{c.length===0&&(m=O.timestamp);const P={time:(O.timestamp-m)/1e3,velocity:O.velocity};c.push(P),v()},v=()=>{if(i(1,a.textContent="",a),c.length===0)return;let O=Es(o);const B=c.slice(-(h+1)),P=B.map((G,H)=>H===0?{}:{delta:(G.time-B[H-1].time)/O,velocity:B[H-1].velocity}),L=u?d:A,N=P.slice(1).map(G=>{const H=b9(L,q=>Math.abs(G.delta-q.beats)),j=L[H];return{...j,beats:G,velocity:G.velocity,offsetPercent:(G.delta/j.beats*100).toFixed()}}),F=lr({width:Zp,height:100,marginLeft:80,x:{label:"",domain:_n(1,h),ticks:[]},y:{},marks:[Na(N,{text:"symbol",x:(G,H)=>H,fontSize:G=>G.velocity*60+10})]});a.appendChild(F);const z=lr({subtitle:"size legend",width:Zp,height:100,marginLeft:Zp/3,marginRight:Zp/3,x:{label:"loudness",labelAnchor:"center"},marks:[Na(_n(.1,1.1,.1),{text:G=>"𝅘𝅥",x:(G,H)=>G,fontSize:G=>G*60+10})]});a.appendChild(z)},g=()=>({tempo:o,pastNoteCount:h,useDotted:u,notes:c}),y=O=>{(c.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(c.length>0&&E(),i(2,o=O.tempo),i(3,h=O.pastNoteCount),i(4,u=O.useDotted),i(5,c=O.notes),v())},E=()=>{c.length>0&&Zr(r.id,g())};ur(v),hr(E);function _(O){o=O,i(2,o)}function S(O){h=O,i(3,h)}const x=()=>{i(4,u=!u),v()};function C(O){En[O?"unshift":"push"](()=>{a=O,i(1,a)})}function w(O){c=O,i(5,c)}const T=()=>y(joe);return e.$$set=O=>{"demoInfo"in O&&i(0,r=O.demoInfo)},[r,a,o,h,u,c,p,v,g,y,E,_,S,x,C,w,T]}class Koe extends Ai{constructor(t){super(),gi(this,t,Xoe,$oe,pi,{demoInfo:0})}}function H4(e,t){const i=[];let r=[];for(const a of e)r.length===0||a.time-r.at(-1).time<t?r.push(a):(i.push(r),r=[a]);return i.push(r),i}const Yoe=10,qoe=.2,Joe=[{number:48,velocity:19,time:0,channel:1},{number:52,velocity:34,time:.09,channel:1},{number:55,velocity:22,time:.257,channel:1},{number:48,velocity:48,time:.587,channel:1},{number:52,velocity:43,time:.629,channel:1},{number:55,velocity:50,time:.793,channel:1},{number:48,velocity:32,time:1.116,channel:1},{number:52,velocity:60,time:1.246,channel:1},{number:55,velocity:43,time:1.3958999998569488,channel:1},{number:48,velocity:50,time:1.78,channel:1},{number:52,velocity:50,time:1.839,channel:1},{number:55,velocity:59,time:1.978,channel:1},{number:48,velocity:42,time:2.342899999856949,channel:1},{number:52,velocity:57,time:2.46,channel:1},{number:55,velocity:60,time:2.576,channel:1},{number:48,velocity:42,time:2.957899999856949,channel:1},{number:52,velocity:58,time:3.041,channel:1},{number:55,velocity:54,time:3.222,channel:1},{number:48,velocity:29,time:3.595,channel:1},{number:52,velocity:66,time:3.7068999998569487,channel:1},{number:55,velocity:64,time:3.808899999856949,channel:1},{number:48,velocity:35,time:4.183,channel:1},{number:52,velocity:58,time:4.25,channel:1},{number:55,velocity:43,time:4.360899999856949,channel:1},{number:48,velocity:44,time:4.795899999856949,channel:1},{number:52,velocity:52,time:4.89,channel:1},{number:55,velocity:66,time:5.0028999998569486,channel:1},{number:48,velocity:54,time:5.408,channel:1},{number:52,velocity:56,time:5.499,channel:1},{number:55,velocity:62,time:5.618,channel:1},{number:48,velocity:44,time:6.008,channel:1},{number:52,velocity:50,time:6.099899999856949,channel:1},{number:55,velocity:61,time:6.216,channel:1},{number:48,velocity:50,time:6.593,channel:1},{number:52,velocity:57,time:6.705899999856949,channel:1},{number:55,velocity:68,time:6.814,channel:1},{number:48,velocity:44,time:7.22,channel:1},{number:52,velocity:62,time:7.33,channel:1},{number:55,velocity:62,time:7.45,channel:1},{number:48,velocity:45,time:7.839899999856949,channel:1},{number:52,velocity:48,time:7.939899999856949,channel:1},{number:55,velocity:64,time:8.068,channel:1},{number:48,velocity:52,time:8.480899999856948,channel:1},{number:52,velocity:52,time:8.576899999856948,channel:1},{number:55,velocity:60,time:8.687,channel:1},{number:48,velocity:42,time:9.108,channel:1},{number:52,velocity:56,time:9.205,channel:1},{number:55,velocity:60,time:9.304,channel:1},{number:48,velocity:58,time:9.707899999856949,channel:1},{number:52,velocity:62,time:9.816,channel:1},{number:55,velocity:64,time:9.928,channel:1},{number:48,velocity:56,time:10.298,channel:1},{number:52,velocity:52,time:10.387,channel:1},{number:55,velocity:68,time:10.477,channel:1}],Zoe="chord-arpeggio-timing",ele="2024-07-02T14:45:31.374Z",tle={pastSeconds:Yoe,maxNoteDistance:qoe,notes:Joe,_demoId:Zoe,_date:ele};function nle(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q;function k(W){e[13](W)}let K={saveToStorage:e[9],callback:e[6]};return e[4]!==void 0&&(K.notes=e[4]),C=new Ts({props:K}),En.push(()=>Di(C,"notes",k)),O=new es({props:{getExportData:e[7],demoId:e[0].id}}),P=new ts({props:{loadData:e[8]}}),z=new ns({props:{demoId:e[0].id,loadData:e[8]}}),H=new kr({props:{noteOn:e[5]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Play chords or short arpeggios with pauses inbetween. In the
        visualization below, you can then see how long the time between the
        first and last note of each chord/arpeggio was and how much time lies
        between consecutive chords/arpeggios.`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`max. note distance
            `),A=ie("input"),p=ue(),v=ie("label"),g=ze(`time
            `),y=ie("input"),E=ue(),_=ie("div"),S=ue(),x=ie("div"),gt(C.$$.fragment),T=ue(),gt(O.$$.fragment),B=ue(),gt(P.$$.fragment),L=ue(),N=ie("button"),N.textContent="example",F=ue(),gt(z.$$.fragment),G=ue(),gt(H.$$.fragment),de(h,"class","explanation"),de(A,"type","number"),de(A,"min","0.05"),de(A,"max","5"),de(A,"step","0.05"),de(c,"title","maximum distance between notes such that they still count as beloning to the same chord/arpeggio"),de(y,"type","number"),de(y,"min","10"),de(y,"max","300"),de(y,"step","10"),de(v,"title","time in seconds for past notes to be shown"),de(m,"class","control"),de(_,"class","visualization"),de(x,"class","control"),de(t,"class","demo")},m(W,J){Rt(W,t,J),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A),rn(A,e[3]),D(m,p),D(m,v),D(v,g),D(v,y),rn(y,e[2]),D(t,E),D(t,_),e[12](_),D(t,S),D(t,x),ft(C,x,null),D(x,T),ft(O,x,null),D(x,B),ft(P,x,null),D(x,L),D(x,N),D(x,F),ft(z,x,null),D(t,G),ft(H,t,null),j=!0,q||(Q=[nt(A,"input",e[10]),nt(A,"change",e[6]),nt(y,"input",e[11]),nt(y,"change",e[6]),nt(N,"click",e[14])],q=!0)},p(W,[J]){(!j||J&1)&&r!==(r=W[0].title+"")&&Ht(a,r),J&8&&$n(A.value)!==W[3]&&rn(A,W[3]),J&4&&$n(y.value)!==W[2]&&rn(y,W[2]);const se={};!w&&J&16&&(w=!0,se.notes=W[4],Oi(()=>w=!1)),C.$set(se);const ge={};J&1&&(ge.demoId=W[0].id),O.$set(ge);const fe={};J&1&&(fe.demoId=W[0].id),z.$set(fe)},i(W){j||(ut(C.$$.fragment,W),ut(O.$$.fragment,W),ut(P.$$.fragment,W),ut(z.$$.fragment,W),ut(H.$$.fragment,W),j=!0)},o(W){ht(C.$$.fragment,W),ht(O.$$.fragment,W),ht(P.$$.fragment,W),ht(z.$$.fragment,W),ht(H.$$.fragment,W),j=!1},d(W){W&&Bt(t),e[12](null),mt(C),mt(O),mt(P),mt(z),mt(H),q=!1,Vi(Q)}}}let Av=1e3,ile=400;function rle(e,t,i){let{demoInfo:r}=t,a,o=10,h=.2,u=0,m=[];const c=x=>{m.length===0&&(u=x.timestamp);const C=(x.timestamp-u)/1e3,w={number:x.note.number,velocity:x.rawVelocity,time:C,channel:x.message.channel};m.push(w),d()},d=()=>{const x=os(m,F=>F.time)+.5,C=x-o,w=m.filter(F=>F.end>C||F.end===void 0),O=H4(w,h).map(F=>Ps(F,z=>z.time)),B=O.slice(1).map((F,z)=>[O[z][0],F[0]]),P=lr({insetRight:10,width:Av,height:ile,marginLeft:60,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[C,x]},y:{label:"MIDI Pitch",grid:!0,reverse:!0,tickFormat:F=>ed[F].label},marks:[Jo(w,{clip:!0,x:"time",y:"number",fill:"#ddd",stroke:"#ccc"})]}),L=lr({insetRight:10,width:Av,height:100,marginLeft:60,marginTop:0,marginBottom:0,padding:0,x:{label:null,domain:[C,x],axis:!1},y:{ticks:[],label:"durations (s)"},marks:[By(O,{clip:!0,x1:F=>F[0],x2:F=>F[1],y:0}),Na(O,{clip:!0,x:F=>F[0],y:0,text:(F,z)=>(F[1]-F[0]).toFixed(2),dy:10,textAnchor:"start"})]}),N=lr({insetRight:10,width:Av,height:100,marginLeft:60,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[C,x]},y:{ticks:[],label:"gaps (s)"},marks:[By(B,{clip:!0,x1:F=>F[0],x2:F=>F[1],y:0}),Jo(B,{clip:!0,x:F=>F[0]}),Na(B,{clip:!0,x:F=>F[0],y:0,text:(F,z)=>(F[1]-F[0]).toFixed(2),dx:2,dy:10,textAnchor:"start"})]});i(1,a.textContent="",a),a.appendChild(P),a.appendChild(L),a.appendChild(N)};ur(d);const A=()=>({pastSeconds:o,maxNoteDistance:h,notes:m}),p=x=>{(m.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(m.length>0&&v(),i(2,o=x.pastSeconds),i(3,h=x.maxNoteDistance),i(4,m=x.notes),d())},v=()=>{m.length>0&&Zr(r.id,A())};hr(v);function g(){h=$n(this.value),i(3,h)}function y(){o=$n(this.value),i(2,o)}function E(x){En[x?"unshift":"push"](()=>{a=x,i(1,a)})}function _(x){m=x,i(4,m)}const S=()=>p(tle);return e.$$set=x=>{"demoInfo"in x&&i(0,r=x.demoInfo)},[r,a,o,h,m,c,d,A,p,v,g,y,E,_,S]}class sle extends Ai{constructor(t){super(),gi(this,t,rle,nle,pi,{demoInfo:0})}}const ale=4,ole=5,lle=.1,cle=[{time:0,number:50,note:"D",velocity:123,string:3,fret:0,channel:4,chordId:0},{time:.003,number:76,note:"E",velocity:32,string:2,fret:21,channel:3},{time:.03,number:58,note:"A",velocity:123,string:2,fret:3,channel:3,chordId:0},{time:.048,number:62,note:"D",velocity:110,string:1,fret:3,channel:2,chordId:0},{time:.06410000000149012,number:66,note:"F",velocity:39,string:0,fret:2,channel:1,chordId:0},{time:1.3651000000014901,number:50,note:"D",velocity:100,string:3,fret:0,channel:4,chordId:0},{time:1.369,number:68,note:"G",velocity:58,string:2,fret:13,channel:3},{time:1.396,number:57,note:"A",velocity:81,string:2,fret:2,channel:3,chordId:0},{time:1.398,number:62,note:"D",velocity:88,string:1,fret:3,channel:2,chordId:0},{time:1.413,number:66,note:"F",velocity:38,string:0,fret:2,channel:1,chordId:0},{time:7.616,number:59,note:"B",velocity:10,string:5,fret:19,channel:6,chordId:2},{time:7.648,number:40,note:"E",velocity:98,string:5,fret:0,channel:6,chordId:1},{time:7.67,number:70,note:"A",velocity:82,string:3,fret:20,channel:4,chordId:2},{time:7.67510000000149,number:47,note:"B",velocity:112,string:4,fret:2,channel:5,chordId:1},{time:7.688,number:74,note:"D",velocity:51,string:2,fret:19,channel:3},{time:7.692,number:52,note:"E",velocity:127,string:3,fret:2,channel:4,chordId:1},{time:7.701,number:55,note:"G",velocity:115,string:2,fret:0,channel:3,chordId:1},{time:7.716,number:59,note:"B",velocity:97,string:1,fret:0,channel:2,chordId:1},{time:7.72810000000149,number:64,note:"E",velocity:71,string:0,fret:0,channel:1,chordId:1},{time:11.857,number:45,note:"A",velocity:100,string:4,fret:0,channel:5,chordId:2},{time:11.85910000000149,number:70,note:"A",velocity:80,string:3,fret:20,channel:4,chordId:3},{time:11.87910000000149,number:74,note:"D",velocity:48,string:2,fret:19,channel:3,chordId:3},{time:11.881,number:52,note:"E",velocity:127,string:3,fret:2,channel:4,chordId:2},{time:11.892,number:57,note:"A",velocity:114,string:2,fret:2,channel:3,chordId:2},{time:11.89510000000149,number:72,note:"C",velocity:32,string:1,fret:13,channel:2},{time:11.907,number:60,note:"C",velocity:113,string:1,fret:1,channel:2,chordId:2},{time:11.92210000000149,number:64,note:"E",velocity:90,string:0,fret:0,channel:1,chordId:2},{time:17.361,number:60,note:"C",velocity:46,string:4,fret:15,channel:5},{time:17.364,number:43,note:"G",velocity:75,string:5,fret:3,channel:6,chordId:3},{time:17.38010000000149,number:69,note:"A",velocity:73,string:3,fret:19,channel:4},{time:17.388,number:47,note:"B",velocity:68,string:4,fret:2,channel:5,chordId:3},{time:17.396,number:74,note:"D",velocity:50,string:2,fret:19,channel:3},{time:17.403,number:50,note:"D",velocity:96,string:3,fret:0,channel:4,chordId:3},{time:17.41010000000149,number:72,note:"C",velocity:26,string:1,fret:13,channel:2},{time:17.41210000000149,number:55,note:"G",velocity:95,string:2,fret:0,channel:3,chordId:3},{time:17.418,number:59,note:"B",velocity:94,string:1,fret:0,channel:2,chordId:3},{time:17.424,number:73,note:"C",velocity:10,string:0,fret:9,channel:1},{time:17.433,number:67,note:"G",velocity:76,string:0,fret:3,channel:1,chordId:3}],ule="chord-diagrams",hle="2024-07-03T18:34:37.899Z",dle={pastChords:ale,maxFretSpan:ole,maxNoteDistance:lle,notes:cle,_demoId:ule,_date:hle};function fle(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J;function se(fe){e[15](fe)}let ge={saveToStorage:e[10],callback:e[7]};return e[5]!==void 0&&(ge.notes=e[5]),B=new Ts({props:ge}),En.push(()=>Di(B,"notes",se)),N=new es({props:{getExportData:e[8],demoId:e[0].id}}),z=new ts({props:{loadData:e[9]}}),q=new ns({props:{demoId:e[0].id,loadData:e[9]}}),k=new kr({props:{noteOn:e[6]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent="Play chords on a guitar and see the chord names and diagrams.",u=ue(),m=ie("div"),c=ie("label"),d=ze(`max. note distance
            `),A=ie("input"),p=ue(),v=ie("label"),g=ze(`max. fret span
            `),y=ie("input"),E=ue(),_=ie("label"),S=ze(`chord count
            `),x=ie("input"),C=ue(),w=ie("div"),T=ue(),O=ie("div"),gt(B.$$.fragment),L=ue(),gt(N.$$.fragment),F=ue(),gt(z.$$.fragment),G=ue(),H=ie("button"),H.textContent="example",j=ue(),gt(q.$$.fragment),Q=ue(),gt(k.$$.fragment),de(h,"class","explanation"),de(A,"type","number"),de(A,"min","0.05"),de(A,"max","5"),de(A,"step","0.05"),de(c,"title","maximum distance between notes such that they still count as beloning to the same chord/arpeggio"),de(y,"type","number"),de(y,"min","5"),de(y,"max","25"),de(y,"step","1"),de(v,"title","maximum distance between the lowest and highest fret"),de(x,"type","number"),de(x,"min","10"),de(x,"max","300"),de(x,"step","10"),de(_,"title","The number of played chords that is displayed"),de(m,"class","control"),de(w,"class","visualization"),de(O,"class","control"),de(t,"class","demo")},m(fe,me){Rt(fe,t,me),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A),rn(A,e[4]),D(m,p),D(m,v),D(v,g),D(v,y),rn(y,e[3]),D(m,E),D(m,_),D(_,S),D(_,x),rn(x,e[2]),D(t,C),D(t,w),e[14](w),D(t,T),D(t,O),ft(B,O,null),D(O,L),ft(N,O,null),D(O,F),ft(z,O,null),D(O,G),D(O,H),D(O,j),ft(q,O,null),D(t,Q),ft(k,t,null),K=!0,W||(J=[nt(A,"input",e[11]),nt(A,"change",e[7]),nt(y,"input",e[12]),nt(y,"change",e[7]),nt(x,"input",e[13]),nt(x,"change",e[7]),nt(H,"click",e[16])],W=!0)},p(fe,[me]){(!K||me&1)&&r!==(r=fe[0].title+"")&&Ht(a,r),me&16&&$n(A.value)!==fe[4]&&rn(A,fe[4]),me&8&&$n(y.value)!==fe[3]&&rn(y,fe[3]),me&4&&$n(x.value)!==fe[2]&&rn(x,fe[2]);const xe={};!P&&me&32&&(P=!0,xe.notes=fe[5],Oi(()=>P=!1)),B.$set(xe);const ye={};me&1&&(ye.demoId=fe[0].id),N.$set(ye);const we={};me&1&&(we.demoId=fe[0].id),q.$set(we)},i(fe){K||(ut(B.$$.fragment,fe),ut(N.$$.fragment,fe),ut(z.$$.fragment,fe),ut(q.$$.fragment,fe),ut(k.$$.fragment,fe),K=!0)},o(fe){ht(B.$$.fragment,fe),ht(N.$$.fragment,fe),ht(z.$$.fragment,fe),ht(q.$$.fragment,fe),ht(k.$$.fragment,fe),K=!1},d(fe){fe&&Bt(t),e[14](null),mt(B),mt(N),mt(z),mt(q),mt(k),W=!1,Vi(J)}}}let r8=200,s8=6,mle=24;function ple(e,t,i){let{demoInfo:r}=t,a,o=5,h=5,u=.1;const m=my("guitarMidiMinVelocity")??0;let c=[64,59,55,50,45,40];const d=c.map(xs.fromMidiSharps);let A=0,p=[];const v=B=>{if(p.length===0&&(A=B.timestamp),B.rawVelocity>=m){const P=(B.timestamp-A)/1e3,L=B.message.channel-1,N={time:P,number:B.note.number,note:B.note.name,velocity:B.rawVelocity,string:L,fret:B.note.number-c[L],channel:B.message.channel};p.push(N),g()}},g=()=>{let B=H4(p,u);B=B.map(F=>{const z=F.filter(j=>j.fret>0);let G;z.length===0?G=0:G=Pa(z,j=>j.fret);const H=G+h;return F.filter(j=>j.fret<=H)}),B=B.filter(F=>F.length>2).slice(-o);for(const[F,z]of B.entries())for(const G of z)G.chordId=F;const P=B.map(F=>{let z=F.sort((G,H)=>G.number-H.number).map(G=>xs.fromMidiSharps(G.number));return z=[...new Set(z)],eg.detect(z)}),L=(r8-35)/3*(h+1)+50,N=(L-100)/(h+2);i(1,a.textContent="",a);for(const[F,z]of B.entries()){const G=z.filter(Q=>Q.fret>0);let H=0;G.length>0&&(H=Pa(G,Q=>Q.fret));const j=H+h,q=lr({width:L,height:r8,marginLeft:40,marginRight:10,marginBottom:25,padding:0,figure:!0,subtitle:P[F].join(", "),style:{textAlign:"center",margin:"auto"},x:{domain:_n(H===0?0:H-1,j+2),label:"",tickSize:0,tickPadding:15},y:{domain:_n(0,s8),tickFormat:Q=>d[Q],label:"",tickSize:0,tickPadding:15},color:{domain:_n(12),range:kf.noteColormap,legend:F===0,marginLeft:250,width:500,type:"categorical",tickFormat:Q=>cu[Q]},r:{domain:[0,127],range:[5,10]},marks:[fa(_n(0,mle+1),{stroke:"#ddd",dx:N/2}),Ss(_n(0,s8),{stroke:"#ddd",strokeWidth:Q=>Math.sqrt(Q+1)}),ma([3,5,7,9,15,17,19,21],{x:Q=>Q,y:2,dy:N/2,fill:"#ddd",r:8}),ma([12,12,24,24],{x:Q=>Q,y:(Q,k)=>k%2===0?1:3,dy:N/2,fill:"#ddd",r:8}),ma(z.filter(Q=>Q.fret>0),{x:"fret",y:"string",r:"velocity",fill:Q=>Q.number%12,tip:!0}),Na(z.filter(Q=>Q.fret>0),{x:"fret",y:"string",text:"note",fill:"white"}),ma(z.filter(Q=>Q.fret===0),{x:H===0?0:H-1,y:"string",r:"velocity",stroke:Q=>Q.number%12,tip:!0})]});a.appendChild(q)}};ur(g);const y=()=>({pastChords:o,maxFretSpan:h,maxNoteDistance:u,notes:p}),E=B=>{(p.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(p.length>0&&_(),i(2,o=B.pastChords),i(4,u=B.maxNoteDistance),i(3,h=B.maxFretSpan),i(5,p=B.notes),g())},_=()=>{p.length>0&&Zr(r.id,y())};hr(_);function S(){u=$n(this.value),i(4,u)}function x(){h=$n(this.value),i(3,h)}function C(){o=$n(this.value),i(2,o)}function w(B){En[B?"unshift":"push"](()=>{a=B,i(1,a)})}function T(B){p=B,i(5,p)}const O=()=>E(dle);return e.$$set=B=>{"demoInfo"in B&&i(0,r=B.demoInfo)},[r,a,o,h,u,p,v,g,y,E,_,S,x,C,w,T,O]}class gle extends Ai{constructor(t){super(),gi(this,t,ple,fle,pi,{demoInfo:0})}}const Ns=["4:2","4:3","4:4","4:5","4:6","3:2","3:3","3:4","3:5","3:6","2:2","2:3","2:4","2:5","2:6"],aa=[16,32,64,128,24,48,96,192],Ale=new Map([[0,"silent"],[16,"ppp"],[32,"pp"],[48,"p"],[64,"mp"],[80,"mf"],[96,"f"],[112,"ff"],[127,"fff"]]),vle=new Map([["silent","silent"],["ppppp","almost silent"],["pppp","soft whispering"],["ppp","whispering"],["pp","almost a whisper"],["p","softer than speaking"],["mp","speaking voice"],["mf","speaking voice"],["f","louder than speaking"],["ff","loud speaking"],["fff","yelling"],["ffff","loud yelling"]]),yle=!1,ble=100,Mle=[1,40,61,90,114,44,60,41,55,52,58,44,49,49,48,56,51],_le="dynamics",Cle="2024-07-02T14:48:22.541Z",Ele={isBinning:yle,barLimit:ble,notes:Mle,_demoId:_le,_date:Cle};function wle(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A=(e[2]?Xr:Kr)+"",p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k;function K(J){e[13](J)}let W={saveToStorage:e[9],callback:e[6]};return e[4]!==void 0&&(W.notes=e[4]),w=new Ts({props:W}),En.push(()=>Di(w,"notes",K)),B=new es({props:{getExportData:e[7],demoId:e[0].id}}),L=new ts({props:{loadData:e[8]}}),G=new ns({props:{demoId:e[0].id,loadData:e[8]}}),j=new kr({props:{noteOn:e[5]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Connect a MIDI instrument and start playing. The loudness of each note
        will be shown as a bar. Bar heights are either exact or rounded to the
        <a href="https://en.wikipedia.org/wiki/Dynamics_(music)" target="_blank" referrerpolicy="no-referrer">closest rough dynamics
        </a>, for example a forte.`,u=ue(),m=ie("div"),c=ie("button"),d=ze("binning "),p=ze(A),v=ue(),g=ie("label"),y=ze(`bars
            `),E=ie("input"),_=ue(),S=ie("div"),x=ue(),C=ie("div"),gt(w.$$.fragment),O=ue(),gt(B.$$.fragment),P=ue(),gt(L.$$.fragment),N=ue(),F=ie("button"),F.textContent="example",z=ue(),gt(G.$$.fragment),H=ue(),gt(j.$$.fragment),de(h,"class","explanation"),de(c,"title","You can change between seeing exact bar heights and binned (rounded) heights."),de(E,"type","number"),de(E,"step","25"),de(E,"min","25"),de(E,"max","1000"),Ei(E,"width","55px"),de(g,"title","The number of most recent notes that are shown as bars."),de(m,"class","control svelte-dntfva"),de(S,"class","visualization svelte-dntfva"),de(C,"class","control svelte-dntfva"),de(t,"class","demo")},m(J,se){Rt(J,t,se),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,p),D(m,v),D(m,g),D(g,y),D(g,E),rn(E,e[3]),D(t,_),D(t,S),e[12](S),D(t,x),D(t,C),ft(w,C,null),D(C,O),ft(B,C,null),D(C,P),ft(L,C,null),D(C,N),D(C,F),D(C,z),ft(G,C,null),D(t,H),ft(j,t,null),q=!0,Q||(k=[nt(c,"click",e[10]),nt(E,"input",e[11]),nt(E,"change",e[6]),nt(F,"click",e[14])],Q=!0)},p(J,[se]){(!q||se&1)&&r!==(r=J[0].title+"")&&Ht(a,r),(!q||se&4)&&A!==(A=(J[2]?Xr:Kr)+"")&&Ht(p,A),se&8&&$n(E.value)!==J[3]&&rn(E,J[3]);const ge={};!T&&se&16&&(T=!0,ge.notes=J[4],Oi(()=>T=!1)),w.$set(ge);const fe={};se&1&&(fe.demoId=J[0].id),B.$set(fe);const me={};se&1&&(me.demoId=J[0].id),G.$set(me)},i(J){q||(ut(w.$$.fragment,J),ut(B.$$.fragment,J),ut(L.$$.fragment,J),ut(G.$$.fragment,J),ut(j.$$.fragment,J),q=!0)},o(J){ht(w.$$.fragment,J),ht(B.$$.fragment,J),ht(L.$$.fragment,J),ht(G.$$.fragment,J),ht(j.$$.fragment,J),q=!1},d(J){J&&Bt(t),e[12](null),mt(w),mt(B),mt(L),mt(G),mt(j),Q=!1,Vi(k)}}}let xle=1e3,Sle=600;function Ile(e,t,i){let{demoInfo:r}=t,a;const o=Ale;let h=!0,u=50,m=[];const c=x=>{m.push(x.rawVelocity),d()},d=()=>{let x=m;if(h){const T=[...o.keys()];x=m.map(O=>{const B=b9(T,P=>Math.abs(O-P));return T[B]})}const C=[...o.keys()],w=lr({width:xle,height:Sle,marginLeft:45,marginRight:120,x:{axis:!1},y:{domain:[0,128]},marks:[Zh(x.slice(-u),{x:(T,O)=>O,y:T=>T,fill:"#ddd",inset:0,dx:.5}),Ss(C,{stroke:"#888"}),lu({anchor:"left",ticks:C,tickFormat:T=>o.get(T),tickSize:0}),lu({anchor:"right",ticks:C,tickFormat:T=>vle.get(o.get(T)),tickSize:0})]});i(1,a.textContent="",a),a.appendChild(w)};ur(d);const A=()=>({isBinning:h,barLimit:u,notes:m}),p=x=>{(m.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(m.length>0&&v(),i(2,h=x.isBinning),i(3,u=x.barLimit),i(4,m=x.notes),d())},v=()=>{m.length>0&&Zr(r.id,A())};hr(v);const g=()=>{i(2,h=!h),d()};function y(){u=$n(this.value),i(3,u)}function E(x){En[x?"unshift":"push"](()=>{a=x,i(1,a)})}function _(x){m=x,i(4,m)}const S=()=>p(Ele);return e.$$set=x=>{"demoInfo"in x&&i(0,r=x.demoInfo)},[r,a,h,u,m,c,d,A,p,v,g,y,E,_,S]}class Tle extends Ai{constructor(t){super(),gi(this,t,Ile,wle,pi,{demoInfo:0})}}function Ble(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P;function L(G){e[9](G)}let N={callback:e[5]};e[2]!==void 0&&(N.value=e[2]),c=new C0({props:N}),En.push(()=>Di(c,"value",L));function F(G){e[11](G)}let z={saveToStorage:e[8],callback:e[5]};return e[3]!==void 0&&(z.notes=e[3]),y=new Ts({props:z}),En.push(()=>Di(y,"notes",F)),S=new es({props:{getExportData:e[6],demoId:e[0].id}}),C=new ts({props:{loadData:e[7]}}),T=new ns({props:{demoId:e[0].id,loadData:e[7]}}),B=new kr({props:{noteOn:e[4]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Connect a MIDI guitar and start playing. The heatmap below shows how
        often you played each fretboard position.`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),p=ie("div"),v=ue(),g=ie("div"),gt(y.$$.fragment),_=ue(),gt(S.$$.fragment),x=ue(),gt(C.$$.fragment),w=ue(),gt(T.$$.fragment),O=ue(),gt(B.$$.fragment),de(h,"class","explanation"),de(m,"class","control"),de(p,"class","visualization"),de(g,"class","control"),de(t,"class","demo")},m(G,H){Rt(G,t,H),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(t,A),D(t,p),e[10](p),D(t,v),D(t,g),ft(y,g,null),D(g,_),ft(S,g,null),D(g,x),ft(C,g,null),D(g,w),ft(T,g,null),D(t,O),ft(B,t,null),P=!0},p(G,[H]){(!P||H&1)&&r!==(r=G[0].title+"")&&Ht(a,r);const j={};!d&&H&4&&(d=!0,j.value=G[2],Oi(()=>d=!1)),c.$set(j);const q={};!E&&H&8&&(E=!0,q.notes=G[3],Oi(()=>E=!1)),y.$set(q);const Q={};H&1&&(Q.demoId=G[0].id),S.$set(Q);const k={};H&1&&(k.demoId=G[0].id),T.$set(k)},i(G){P||(ut(c.$$.fragment,G),ut(y.$$.fragment,G),ut(S.$$.fragment,G),ut(C.$$.fragment,G),ut(T.$$.fragment,G),ut(B.$$.fragment,G),P=!0)},o(G){ht(c.$$.fragment,G),ht(y.$$.fragment,G),ht(S.$$.fragment,G),ht(C.$$.fragment,G),ht(T.$$.fragment,G),ht(B.$$.fragment,G),P=!1},d(G){G&&Bt(t),mt(c),e[10](null),mt(y),mt(S),mt(C),mt(T),mt(B)}}}let a8=1e3,Rle=280,o8=6,vv=24;function Ole(e,t,i){let{demoInfo:r}=t,a=[64,59,55,50,45,40];const o=a.map(xs.fromMidiSharps);let h,u=200,m=0,c=[];const d=S=>{c.length===0&&(m=S.timestamp);const x=(S.timestamp-m)/1e3,C=S.message.channel-1,w={time:x,number:S.note.number,velocity:S.rawVelocity,string:C,fret:S.note.number-a[C],channel:S.message.channel};c.push(w),A()},A=()=>{const S=c.slice(-u),x=(a8-100)/25,C=lr({width:a8,height:Rle,marginLeft:60,marginBottom:50,padding:0,x:{domain:_n(0,vv+1),ticks:_n(0,vv+1),tickSize:0},y:{domain:_n(0,o8),tickFormat:w=>o[w],tickSize:0},color:{legend:!0,marginLeft:100,width:400,scheme:"blues",label:"count"},marks:[fa(_n(0,vv+1),{stroke:"#ddd",dx:x/2}),Ss(_n(0,o8),{stroke:"#ddd",strokeWidth:w=>Math.sqrt(w+1)}),ma([3,5,7,9,15,17,19,21],{x:w=>w,y:2,dy:x/2,fill:"#ddd",r:8}),ma([12,12,24,24],{x:w=>w,y:(w,T)=>T%2===0?1:3,dy:x/2,fill:"#ddd",r:8}),lg(S,Xq({fill:"count"},{x:"fret",y:"string",fill:"count",inset:5,rx:"50%",tip:!0}))]});i(1,h.textContent="",h),h.appendChild(C)};ur(A);const p=()=>({pastNoteCount:u,notes:c}),v=S=>{(c.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(c.length>0&&g(),i(2,u=S.pastNoteCount),i(3,c=S.notes),A())},g=()=>{c.length>0&&Zr(r.id,p())};hr(g);function y(S){u=S,i(2,u)}function E(S){En[S?"unshift":"push"](()=>{h=S,i(1,h)})}function _(S){c=S,i(3,c)}return e.$$set=S=>{"demoInfo"in S&&i(0,r=S.demoInfo)},[r,h,u,c,d,A,p,v,g,y,E,_]}class Dle extends Ai{constructor(t){super(),gi(this,t,Ole,Ble,pi,{demoInfo:0})}}const Lle="A",Ple="minor pentatonic",Nle=[{number:40,velocity:37,time:2350918,channel:6,string:5,fret:0},{number:51,velocity:25,time:2352454,channel:5,string:4,fret:6},{number:53,velocity:26,time:2.3532251000000015e6,channel:5,string:4,fret:8},{number:54,velocity:26,time:2354759,channel:5,string:4,fret:9},{number:54,velocity:53,time:2355472,channel:5,string:4,fret:9},{number:54,velocity:60,time:2355922,channel:5,string:4,fret:9},{number:45,velocity:59,time:2.3565161000000015e6,channel:5,string:4,fret:0},{number:45,velocity:68,time:2357219,channel:5,string:4,fret:0},{number:45,velocity:54,time:2358039,channel:5,string:4,fret:0},{number:64,velocity:23,time:2358541,channel:5,string:4,fret:19},{number:52,velocity:50,time:2358818,channel:5,string:4,fret:7},{number:52,velocity:54,time:2359522,channel:5,string:4,fret:7},{number:53,velocity:34,time:2360283,channel:5,string:4,fret:8},{number:50,velocity:78,time:2362538,channel:4,string:3,fret:0},{number:59,velocity:51,time:2363308,channel:3,string:2,fret:4},{number:62,velocity:41,time:2.3633171000000015e6,channel:3,string:2,fret:7},{number:62,velocity:48,time:2364013,channel:3,string:2,fret:7},{number:62,velocity:56,time:2364387,channel:3,string:2,fret:7},{number:62,velocity:54,time:2364806,channel:3,string:2,fret:7},{number:58,velocity:58,time:2365522,channel:4,string:3,fret:8},{number:58,velocity:64,time:2.3661131000000015e6,channel:4,string:3,fret:8},{number:59,velocity:74,time:2366564,channel:4,string:3,fret:9},{number:45,velocity:42,time:2367792,channel:6,string:5,fret:5},{number:45,velocity:56,time:2368309,channel:6,string:5,fret:5},{number:48,velocity:32,time:2368671,channel:6,string:5,fret:8},{number:48,velocity:23,time:2368756,channel:6,string:5,fret:8},{number:50,velocity:25,time:2369214,channel:5,string:4,fret:5},{number:52,velocity:40,time:2369748,channel:5,string:4,fret:7},{number:55,velocity:64,time:2370356,channel:4,string:3,fret:5},{number:57,velocity:68,time:2371007,channel:4,string:3,fret:7},{number:57,velocity:57,time:2372634,channel:4,string:3,fret:7}],Fle="fretboard-improvisation-intervals",kle="2024-07-03T18:53:20.636Z",Ule={root:Lle,scale:Ple,notes:Nle,_demoId:Fle,_date:kle};function l8(e,t,i){const r=e.slice();return r[21]=t[i],r}function c8(e,t,i){const r=e.slice();return r[24]=t[i],r}function u8(e){let t,i=e[24]+"",r;return{c(){t=ie("option"),r=ze(i),t.__value=e[24],rn(t,t.__value)},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function h8(e){let t,i=e[21]+"",r;return{c(){t=ie("option"),r=ze(i),t.__value=e[21],rn(t,t.__value)},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function Gle(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_=(e[4]?Xr:Kr)+"",S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J=nn(e[6]),se=[];for(let ye=0;ye<J.length;ye+=1)se[ye]=u8(c8(e,J,ye));let ge=nn(e[7]),fe=[];for(let ye=0;ye<ge.length;ye+=1)fe[ye]=h8(l8(e,ge,ye));function me(ye){e[17](ye)}let xe={saveToStorage:e[12],callback:e[9]};return e[5]!==void 0&&(xe.notes=e[5]),O=new Ts({props:xe}),En.push(()=>Di(O,"notes",me)),L=new es({props:{getExportData:e[10],demoId:e[0].id}}),F=new ts({props:{loadData:e[11]}}),j=new ns({props:{demoId:e[0].id,loadData:e[11]}}),Q=new kr({props:{noteOn:e[8]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Each time you play a note, the fretboard below shows you how far each
        note of the scale is away from the note you just played.`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`scale
            `),A=ie("select");for(let ye=0;ye<se.length;ye+=1)se[ye].c();p=ue(),v=ie("select");for(let ye=0;ye<fe.length;ye+=1)fe[ye].c();g=ue(),y=ie("button"),E=ze("note names "),S=ze(_),x=ue(),C=ie("div"),w=ue(),T=ie("div"),gt(O.$$.fragment),P=ue(),gt(L.$$.fragment),N=ue(),gt(F.$$.fragment),z=ue(),G=ie("button"),G.textContent="example",H=ue(),gt(j.$$.fragment),q=ue(),gt(Q.$$.fragment),de(h,"class","explanation"),e[2]===void 0&&mr(()=>e[13].call(A)),e[3]===void 0&&mr(()=>e[14].call(v)),de(y,"title","Toggle between note names and scale steps"),de(m,"class","control"),de(C,"class","visualization"),de(T,"class","control"),de(t,"class","demo")},m(ye,we){Rt(ye,t,we),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A);for(let Ee=0;Ee<se.length;Ee+=1)se[Ee]&&se[Ee].m(A,null);ri(A,e[2],!0),D(c,p),D(c,v);for(let Ee=0;Ee<fe.length;Ee+=1)fe[Ee]&&fe[Ee].m(v,null);ri(v,e[3],!0),D(m,g),D(m,y),D(y,E),D(y,S),D(t,x),D(t,C),e[16](C),D(t,w),D(t,T),ft(O,T,null),D(T,P),ft(L,T,null),D(T,N),ft(F,T,null),D(T,z),D(T,G),D(T,H),ft(j,T,null),D(t,q),ft(Q,t,null),k=!0,K||(W=[nt(A,"change",e[13]),nt(A,"change",e[9]),nt(v,"change",e[14]),nt(v,"change",e[9]),nt(y,"click",e[15]),nt(G,"click",e[18])],K=!0)},p(ye,[we]){if((!k||we&1)&&r!==(r=ye[0].title+"")&&Ht(a,r),we&64){J=nn(ye[6]);let Ke;for(Ke=0;Ke<J.length;Ke+=1){const Ue=c8(ye,J,Ke);se[Ke]?se[Ke].p(Ue,we):(se[Ke]=u8(Ue),se[Ke].c(),se[Ke].m(A,null))}for(;Ke<se.length;Ke+=1)se[Ke].d(1);se.length=J.length}if(we&68&&ri(A,ye[2]),we&128){ge=nn(ye[7]);let Ke;for(Ke=0;Ke<ge.length;Ke+=1){const Ue=l8(ye,ge,Ke);fe[Ke]?fe[Ke].p(Ue,we):(fe[Ke]=h8(Ue),fe[Ke].c(),fe[Ke].m(v,null))}for(;Ke<fe.length;Ke+=1)fe[Ke].d(1);fe.length=ge.length}we&136&&ri(v,ye[3]),(!k||we&16)&&_!==(_=(ye[4]?Xr:Kr)+"")&&Ht(S,_);const Ee={};!B&&we&32&&(B=!0,Ee.notes=ye[5],Oi(()=>B=!1)),O.$set(Ee);const He={};we&1&&(He.demoId=ye[0].id),L.$set(He);const Ae={};we&1&&(Ae.demoId=ye[0].id),j.$set(Ae)},i(ye){k||(ut(O.$$.fragment,ye),ut(L.$$.fragment,ye),ut(F.$$.fragment,ye),ut(j.$$.fragment,ye),ut(Q.$$.fragment,ye),k=!0)},o(ye){ht(O.$$.fragment,ye),ht(L.$$.fragment,ye),ht(F.$$.fragment,ye),ht(j.$$.fragment,ye),ht(Q.$$.fragment,ye),k=!1},d(ye){ye&&Bt(t),Gn(se,ye),Gn(fe,ye),e[16](null),mt(O),mt(L),mt(F),mt(j),mt(Q),K=!1,Vi(W)}}}let d8=1e3,Vle=280,yv=6,bv=24;function Qle(e,t,i){let{demoInfo:r}=t,a,o="A",h="minor pentatonic",u=!1,m=[],c=[64,59,55,50,45,40];const d=c.map(xs.fromMidiSharps),A=X9,p=$s.names(),v=B=>{const P=B.message.channel-1,L={number:B.note.number,velocity:B.rawVelocity,time:B.timestamp,channel:B.message.channel,string:P,fret:B.note.number-c[P]};m.push(L),g()},g=()=>{const B=m.at(-1),P=[];if(B){const F=B.number%12,z=$s.get(`${o} ${h}`),G=new Map(z.notes.map((j,q)=>{const Q=A.indexOf(j);let k=Q-F;k=k>=0?k:k+12;const K={name:j,chroma:Q,interval:z.intervals[q],degree:q,offset:k};return[Q,K]})),H=G.get(B.number%12).degree;for(let j=0;j<yv;j++)for(let q=0;q<bv+1;q++){const Q=(c[j]+q)%12;if(!G.has(Q))continue;const k=G.get(Q),K=k.degree-H;P.push({...k,string:j,fret:q,step:k.offset,degreeStep:K>=0?K:K+G.size})}}const L=(d8-100)/25,N=lr({width:d8,height:Vle,marginLeft:60,marginBottom:50,padding:0,x:{domain:_n(0,bv+1),tickSize:0},y:{domain:_n(0,yv),tickFormat:F=>d[F],tickSize:0},color:{legend:!0,marginLeft:100,width:400,type:"categorical"},marks:[fa(_n(0,bv+1),{stroke:"#ddd",dx:L/2}),Ss(_n(0,yv),{stroke:"#ddd",strokeWidth:F=>Math.sqrt(F+1)}),ma([3,5,7,9,15,17,19,21],{x:F=>F,y:2,dy:L/2,fill:"#ddd",r:8}),ma([12,12,24,24],{x:F=>F,y:(F,z)=>z%2===0?1:3,dy:L/2,fill:"#ddd",r:8}),B?lg([B],{x:"fret",y:"string",fill:"black",tip:!0,inset:5,rx:5}):null,lg(P,{x:"fret",y:"string",fill:"degreeStep",inset:10,rx:"50%",tip:!0}),Na(P,{x:"fret",y:"string",fill:"white",text:u?"name":"degreeStep"})]});i(1,a.textContent="",a),a.appendChild(N)};ur(g);const y=()=>({root:o,scale:h,notes:m}),E=B=>{(m.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(m.length>0&&_(),i(2,o=B.root),i(3,h=B.scale),i(5,m=B.notes),g())},_=()=>{m.length>0&&Zr(r.id,y())};hr(_);function S(){o=Ir(this),i(2,o),i(6,A)}function x(){h=Ir(this),i(3,h),i(7,p)}const C=()=>{i(4,u=!u),g()};function w(B){En[B?"unshift":"push"](()=>{a=B,i(1,a)})}function T(B){m=B,i(5,m)}const O=()=>E(Ule);return e.$$set=B=>{"demoInfo"in B&&i(0,r=B.demoInfo)},[r,a,o,h,u,m,A,p,v,g,y,E,_,S,x,C,w,T,O]}class Hle extends Ai{constructor(t){super(),gi(this,t,Qle,Gle,pi,{demoInfo:0})}}function zle(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P;function L(G){e[10](G)}let N={callback:e[6]};e[2]!==void 0&&(N.value=e[2]),c=new C0({props:N}),En.push(()=>Di(c,"value",L));function F(G){e[12](G)}let z={saveToStorage:e[9],callback:e[6]};return e[3]!==void 0&&(z.notes=e[3]),y=new Ts({props:z}),En.push(()=>Di(y,"notes",F)),S=new es({props:{getExportData:e[7],demoId:e[0].id}}),C=new ts({props:{loadData:e[8]}}),T=new ns({props:{demoId:e[0].id,loadData:e[8]}}),B=new kr({props:{noteOn:e[4],controlChange:e[5]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Connect a MIDI guitar and start playing. The fretboard scatterplot below
        shows you where you played, color-coded by time.`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),p=ie("div"),v=ue(),g=ie("div"),gt(y.$$.fragment),_=ue(),gt(S.$$.fragment),x=ue(),gt(C.$$.fragment),w=ue(),gt(T.$$.fragment),O=ue(),gt(B.$$.fragment),de(h,"class","explanation"),de(m,"class","control"),de(p,"class","visualization"),de(g,"class","control"),de(t,"class","demo")},m(G,H){Rt(G,t,H),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(t,A),D(t,p),e[11](p),D(t,v),D(t,g),ft(y,g,null),D(g,_),ft(S,g,null),D(g,x),ft(C,g,null),D(g,w),ft(T,g,null),D(t,O),ft(B,t,null),P=!0},p(G,[H]){(!P||H&1)&&r!==(r=G[0].title+"")&&Ht(a,r);const j={};!d&&H&4&&(d=!0,j.value=G[2],Oi(()=>d=!1)),c.$set(j);const q={};!E&&H&8&&(E=!0,q.notes=G[3],Oi(()=>E=!1)),y.$set(q);const Q={};H&1&&(Q.demoId=G[0].id),S.$set(Q);const k={};H&1&&(k.demoId=G[0].id),T.$set(k)},i(G){P||(ut(c.$$.fragment,G),ut(y.$$.fragment,G),ut(S.$$.fragment,G),ut(C.$$.fragment,G),ut(T.$$.fragment,G),ut(B.$$.fragment,G),P=!0)},o(G){ht(c.$$.fragment,G),ht(y.$$.fragment,G),ht(S.$$.fragment,G),ht(C.$$.fragment,G),ht(T.$$.fragment,G),ht(B.$$.fragment,G),P=!1},d(G){G&&Bt(t),mt(c),e[11](null),mt(y),mt(S),mt(C),mt(T),mt(B)}}}let f8=1e3,Wle=300,m8=6,Mv=24;function jle(e,t,i){let{demoInfo:r}=t;const a=()=>(Math.random()-.5)*.5;let o=[64,59,55,50,45,40];const h=o.map(xs.fromMidiSharps);let u,m=200,c=0,d=[];const A=C=>{d.length===0&&(c=C.timestamp);const w=(C.timestamp-c)/1e3,T=C.message.channel-1,O=C.note.number-o[T],B={number:C.note.number,velocity:C.rawVelocity,time:w,channel:C.message.channel,string:T,fret:O,stringJitter:T+a(),fretJitter:O+a()};d.push(B),v()},p=C=>{i(2,m=Math.round(ss(C.rawValue*2,0,200))),v()},v=()=>{const C=d.slice(-m),w=(f8-100)/25,T=lr({width:f8,height:Wle,marginLeft:60,marginBottom:50,padding:0,x:{domain:[-1,Mv+1.5],ticks:_n(0,Mv+1),tickSize:0,label:"fret"},y:{domain:[m8-.5,-.5],tickFormat:O=>h[O],tickSize:0,label:"string"},color:{legend:!0,marginLeft:100,width:400,scheme:"viridis",reverse:!0,domain:[0,m],label:"note index"},r:{domain:[0,127],range:[0,5]},marks:[fa(_n(0,Mv+1),{stroke:"#ddd",dx:w/2}),Ss(_n(0,m8),{stroke:"#ddd",strokeWidth:O=>Math.sqrt(O+1)}),ma([3,5,7,9,15,17,19,21],{x:O=>O,y:2,dy:w/2,fill:"#ddd",r:8}),ma([12,12,24,24],{x:O=>O,y:(O,B)=>B%2===0?1:3,dy:w/2,fill:"#ddd",r:8}),ma(C,{x:"fretJitter",y:"stringJitter",fill:(O,B)=>B,r:"velocity",opacity:.5})]});i(1,u.textContent="",u),u.appendChild(T)};ur(v);const g=()=>({pastNoteCount:m,notes:d}),y=C=>{(d.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(d.length>0&&E(),i(2,m=C.pastNoteCount),i(3,d=C.notes),v())},E=()=>{d.length>0&&Zr(r.id,g())};hr(E);function _(C){m=C,i(2,m)}function S(C){En[C?"unshift":"push"](()=>{u=C,i(1,u)})}function x(C){d=C,i(3,d)}return e.$$set=C=>{"demoInfo"in C&&i(0,r=C.demoInfo)},[r,u,m,d,A,p,v,g,y,E,_,S,x]}class $le extends Ai{constructor(t){super(),gi(this,t,jle,zle,pi,{demoInfo:0})}}var QO={exports:{}};(function(e,t){var i={};(function(a,o){e.exports=o()})(self,()=>(()=>{var r={"./node_modules/an-array/index.js":u=>{var m=Object.prototype.toString;u.exports=c;function c(d){return d.BYTES_PER_ELEMENT&&m.call(d.buffer)==="[object ArrayBuffer]"||Array.isArray(d)}},"./node_modules/as-number/index.js":u=>{u.exports=function(c,d){return typeof c=="number"?c:typeof d=="number"?d:0}},"./node_modules/base64-js/index.js":(u,m)=>{m.byteLength=E,m.toByteArray=S,m.fromByteArray=w;for(var c=[],d=[],A=typeof Uint8Array<"u"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,g=p.length;v<g;++v)c[v]=p[v],d[p.charCodeAt(v)]=v;d[45]=62,d[95]=63;function y(T){var O=T.length;if(O%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var B=T.indexOf("=");B===-1&&(B=O);var P=B===O?0:4-B%4;return[B,P]}function E(T){var O=y(T),B=O[0],P=O[1];return(B+P)*3/4-P}function _(T,O,B){return(O+B)*3/4-B}function S(T){var O,B=y(T),P=B[0],L=B[1],N=new A(_(T,P,L)),F=0,z=L>0?P-4:P,G;for(G=0;G<z;G+=4)O=d[T.charCodeAt(G)]<<18|d[T.charCodeAt(G+1)]<<12|d[T.charCodeAt(G+2)]<<6|d[T.charCodeAt(G+3)],N[F++]=O>>16&255,N[F++]=O>>8&255,N[F++]=O&255;return L===2&&(O=d[T.charCodeAt(G)]<<2|d[T.charCodeAt(G+1)]>>4,N[F++]=O&255),L===1&&(O=d[T.charCodeAt(G)]<<10|d[T.charCodeAt(G+1)]<<4|d[T.charCodeAt(G+2)]>>2,N[F++]=O>>8&255,N[F++]=O&255),N}function x(T){return c[T>>18&63]+c[T>>12&63]+c[T>>6&63]+c[T&63]}function C(T,O,B){for(var P,L=[],N=O;N<B;N+=3)P=(T[N]<<16&16711680)+(T[N+1]<<8&65280)+(T[N+2]&255),L.push(x(P));return L.join("")}function w(T){for(var O,B=T.length,P=B%3,L=[],N=16383,F=0,z=B-P;F<z;F+=N)L.push(C(T,F,F+N>z?z:F+N));return P===1?(O=T[B-1],L.push(c[O>>2]+c[O<<4&63]+"==")):P===2&&(O=(T[B-2]<<8)+T[B-1],L.push(c[O>>10]+c[O>>4&63]+c[O<<2&63]+"=")),L.join("")}},"./node_modules/buffer-equal/index.js":(u,m,c)=>{var d=c("./node_modules/buffer/index.js").Buffer;u.exports=function(A,p){if(d.isBuffer(A)&&d.isBuffer(p)){if(typeof A.equals=="function")return A.equals(p);if(A.length!==p.length)return!1;for(var v=0;v<A.length;v++)if(A[v]!==p[v])return!1;return!0}}},"./node_modules/buffer/index.js":(u,m,c)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const d=c("./node_modules/base64-js/index.js"),A=c("./node_modules/ieee754/index.js"),p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;m.Buffer=E,m.SlowBuffer=N,m.INSPECT_MAX_BYTES=50;const v=2147483647;m.kMaxLength=v,E.TYPED_ARRAY_SUPPORT=g(),!E.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function g(){try{const ce=new Uint8Array(1),X={foo:function(){return 42}};return Object.setPrototypeOf(X,Uint8Array.prototype),Object.setPrototypeOf(ce,X),ce.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}});function y(ce){if(ce>v)throw new RangeError('The value "'+ce+'" is invalid for option "size"');const X=new Uint8Array(ce);return Object.setPrototypeOf(X,E.prototype),X}function E(ce,X,Y){if(typeof ce=="number"){if(typeof X=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(ce)}return _(ce,X,Y)}E.poolSize=8192;function _(ce,X,Y){if(typeof ce=="string")return w(ce,X);if(ArrayBuffer.isView(ce))return O(ce);if(ce==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(_e(ce,ArrayBuffer)||ce&&_e(ce.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_e(ce,SharedArrayBuffer)||ce&&_e(ce.buffer,SharedArrayBuffer)))return B(ce,X,Y);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const be=ce.valueOf&&ce.valueOf();if(be!=null&&be!==ce)return E.from(be,X,Y);const Te=P(ce);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return E.from(ce[Symbol.toPrimitive]("string"),X,Y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}E.from=function(ce,X,Y){return _(ce,X,Y)},Object.setPrototypeOf(E.prototype,Uint8Array.prototype),Object.setPrototypeOf(E,Uint8Array);function S(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function x(ce,X,Y){return S(ce),ce<=0?y(ce):X!==void 0?typeof Y=="string"?y(ce).fill(X,Y):y(ce).fill(X):y(ce)}E.alloc=function(ce,X,Y){return x(ce,X,Y)};function C(ce){return S(ce),y(ce<0?0:L(ce)|0)}E.allocUnsafe=function(ce){return C(ce)},E.allocUnsafeSlow=function(ce){return C(ce)};function w(ce,X){if((typeof X!="string"||X==="")&&(X="utf8"),!E.isEncoding(X))throw new TypeError("Unknown encoding: "+X);const Y=F(ce,X)|0;let be=y(Y);const Te=be.write(ce,X);return Te!==Y&&(be=be.slice(0,Te)),be}function T(ce){const X=ce.length<0?0:L(ce.length)|0,Y=y(X);for(let be=0;be<X;be+=1)Y[be]=ce[be]&255;return Y}function O(ce){if(_e(ce,Uint8Array)){const X=new Uint8Array(ce);return B(X.buffer,X.byteOffset,X.byteLength)}return T(ce)}function B(ce,X,Y){if(X<0||ce.byteLength<X)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<X+(Y||0))throw new RangeError('"length" is outside of buffer bounds');let be;return X===void 0&&Y===void 0?be=new Uint8Array(ce):Y===void 0?be=new Uint8Array(ce,X):be=new Uint8Array(ce,X,Y),Object.setPrototypeOf(be,E.prototype),be}function P(ce){if(E.isBuffer(ce)){const X=L(ce.length)|0,Y=y(X);return Y.length===0||ce.copy(Y,0,0,X),Y}if(ce.length!==void 0)return typeof ce.length!="number"||De(ce.length)?y(0):T(ce);if(ce.type==="Buffer"&&Array.isArray(ce.data))return T(ce.data)}function L(ce){if(ce>=v)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v.toString(16)+" bytes");return ce|0}function N(ce){return+ce!=ce&&(ce=0),E.alloc(+ce)}E.isBuffer=function(X){return X!=null&&X._isBuffer===!0&&X!==E.prototype},E.compare=function(X,Y){if(_e(X,Uint8Array)&&(X=E.from(X,X.offset,X.byteLength)),_e(Y,Uint8Array)&&(Y=E.from(Y,Y.offset,Y.byteLength)),!E.isBuffer(X)||!E.isBuffer(Y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(X===Y)return 0;let be=X.length,Te=Y.length;for(let We=0,tt=Math.min(be,Te);We<tt;++We)if(X[We]!==Y[We]){be=X[We],Te=Y[We];break}return be<Te?-1:Te<be?1:0},E.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(X,Y){if(!Array.isArray(X))throw new TypeError('"list" argument must be an Array of Buffers');if(X.length===0)return E.alloc(0);let be;if(Y===void 0)for(Y=0,be=0;be<X.length;++be)Y+=X[be].length;const Te=E.allocUnsafe(Y);let We=0;for(be=0;be<X.length;++be){let tt=X[be];if(_e(tt,Uint8Array))We+tt.length>Te.length?(E.isBuffer(tt)||(tt=E.from(tt)),tt.copy(Te,We)):Uint8Array.prototype.set.call(Te,tt,We);else if(E.isBuffer(tt))tt.copy(Te,We);else throw new TypeError('"list" argument must be an Array of Buffers');We+=tt.length}return Te};function F(ce,X){if(E.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||_e(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);const Y=ce.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&Y===0)return 0;let Te=!1;for(;;)switch(X){case"ascii":case"latin1":case"binary":return Y;case"utf8":case"utf-8":return Kt(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y*2;case"hex":return Y>>>1;case"base64":return St(ce).length;default:if(Te)return be?-1:Kt(ce).length;X=(""+X).toLowerCase(),Te=!0}}E.byteLength=F;function z(ce,X,Y){let be=!1;if((X===void 0||X<0)&&(X=0),X>this.length||((Y===void 0||Y>this.length)&&(Y=this.length),Y<=0)||(Y>>>=0,X>>>=0,Y<=X))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return ye(this,X,Y);case"utf8":case"utf-8":return se(this,X,Y);case"ascii":return me(this,X,Y);case"latin1":case"binary":return xe(this,X,Y);case"base64":return J(this,X,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,X,Y);default:if(be)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),be=!0}}E.prototype._isBuffer=!0;function G(ce,X,Y){const be=ce[X];ce[X]=ce[Y],ce[Y]=be}E.prototype.swap16=function(){const X=this.length;if(X%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Y=0;Y<X;Y+=2)G(this,Y,Y+1);return this},E.prototype.swap32=function(){const X=this.length;if(X%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Y=0;Y<X;Y+=4)G(this,Y,Y+3),G(this,Y+1,Y+2);return this},E.prototype.swap64=function(){const X=this.length;if(X%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Y=0;Y<X;Y+=8)G(this,Y,Y+7),G(this,Y+1,Y+6),G(this,Y+2,Y+5),G(this,Y+3,Y+4);return this},E.prototype.toString=function(){const X=this.length;return X===0?"":arguments.length===0?se(this,0,X):z.apply(this,arguments)},E.prototype.toLocaleString=E.prototype.toString,E.prototype.equals=function(X){if(!E.isBuffer(X))throw new TypeError("Argument must be a Buffer");return this===X?!0:E.compare(this,X)===0},E.prototype.inspect=function(){let X="";const Y=m.INSPECT_MAX_BYTES;return X=this.toString("hex",0,Y).replace(/(.{2})/g,"$1 ").trim(),this.length>Y&&(X+=" ... "),"<Buffer "+X+">"},p&&(E.prototype[p]=E.prototype.inspect),E.prototype.compare=function(X,Y,be,Te,We){if(_e(X,Uint8Array)&&(X=E.from(X,X.offset,X.byteLength)),!E.isBuffer(X))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof X);if(Y===void 0&&(Y=0),be===void 0&&(be=X?X.length:0),Te===void 0&&(Te=0),We===void 0&&(We=this.length),Y<0||be>X.length||Te<0||We>this.length)throw new RangeError("out of range index");if(Te>=We&&Y>=be)return 0;if(Te>=We)return-1;if(Y>=be)return 1;if(Y>>>=0,be>>>=0,Te>>>=0,We>>>=0,this===X)return 0;let tt=We-Te,wt=be-Y;const Zt=Math.min(tt,wt),qt=this.slice(Te,We),dn=X.slice(Y,be);for(let Qt=0;Qt<Zt;++Qt)if(qt[Qt]!==dn[Qt]){tt=qt[Qt],wt=dn[Qt];break}return tt<wt?-1:wt<tt?1:0};function H(ce,X,Y,be,Te){if(ce.length===0)return-1;if(typeof Y=="string"?(be=Y,Y=0):Y>2147483647?Y=2147483647:Y<-2147483648&&(Y=-2147483648),Y=+Y,De(Y)&&(Y=Te?0:ce.length-1),Y<0&&(Y=ce.length+Y),Y>=ce.length){if(Te)return-1;Y=ce.length-1}else if(Y<0)if(Te)Y=0;else return-1;if(typeof X=="string"&&(X=E.from(X,be)),E.isBuffer(X))return X.length===0?-1:j(ce,X,Y,be,Te);if(typeof X=="number")return X=X&255,typeof Uint8Array.prototype.indexOf=="function"?Te?Uint8Array.prototype.indexOf.call(ce,X,Y):Uint8Array.prototype.lastIndexOf.call(ce,X,Y):j(ce,[X],Y,be,Te);throw new TypeError("val must be string, number or Buffer")}function j(ce,X,Y,be,Te){let We=1,tt=ce.length,wt=X.length;if(be!==void 0&&(be=String(be).toLowerCase(),be==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if(ce.length<2||X.length<2)return-1;We=2,tt/=2,wt/=2,Y/=2}function Zt(dn,Qt){return We===1?dn[Qt]:dn.readUInt16BE(Qt*We)}let qt;if(Te){let dn=-1;for(qt=Y;qt<tt;qt++)if(Zt(ce,qt)===Zt(X,dn===-1?0:qt-dn)){if(dn===-1&&(dn=qt),qt-dn+1===wt)return dn*We}else dn!==-1&&(qt-=qt-dn),dn=-1}else for(Y+wt>tt&&(Y=tt-wt),qt=Y;qt>=0;qt--){let dn=!0;for(let Qt=0;Qt<wt;Qt++)if(Zt(ce,qt+Qt)!==Zt(X,Qt)){dn=!1;break}if(dn)return qt}return-1}E.prototype.includes=function(X,Y,be){return this.indexOf(X,Y,be)!==-1},E.prototype.indexOf=function(X,Y,be){return H(this,X,Y,be,!0)},E.prototype.lastIndexOf=function(X,Y,be){return H(this,X,Y,be,!1)};function q(ce,X,Y,be){Y=Number(Y)||0;const Te=ce.length-Y;be?(be=Number(be),be>Te&&(be=Te)):be=Te;const We=X.length;be>We/2&&(be=We/2);let tt;for(tt=0;tt<be;++tt){const wt=parseInt(X.substr(tt*2,2),16);if(De(wt))return tt;ce[Y+tt]=wt}return tt}function Q(ce,X,Y,be){return pe(Kt(X,ce.length-Y),ce,Y,be)}function k(ce,X,Y,be){return pe(Dt(X),ce,Y,be)}function K(ce,X,Y,be){return pe(St(X),ce,Y,be)}function W(ce,X,Y,be){return pe(Nt(X,ce.length-Y),ce,Y,be)}E.prototype.write=function(X,Y,be,Te){if(Y===void 0)Te="utf8",be=this.length,Y=0;else if(be===void 0&&typeof Y=="string")Te=Y,be=this.length,Y=0;else if(isFinite(Y))Y=Y>>>0,isFinite(be)?(be=be>>>0,Te===void 0&&(Te="utf8")):(Te=be,be=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const We=this.length-Y;if((be===void 0||be>We)&&(be=We),X.length>0&&(be<0||Y<0)||Y>this.length)throw new RangeError("Attempt to write outside buffer bounds");Te||(Te="utf8");let tt=!1;for(;;)switch(Te){case"hex":return q(this,X,Y,be);case"utf8":case"utf-8":return Q(this,X,Y,be);case"ascii":case"latin1":case"binary":return k(this,X,Y,be);case"base64":return K(this,X,Y,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,X,Y,be);default:if(tt)throw new TypeError("Unknown encoding: "+Te);Te=(""+Te).toLowerCase(),tt=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(ce,X,Y){return X===0&&Y===ce.length?d.fromByteArray(ce):d.fromByteArray(ce.slice(X,Y))}function se(ce,X,Y){Y=Math.min(ce.length,Y);const be=[];let Te=X;for(;Te<Y;){const We=ce[Te];let tt=null,wt=We>239?4:We>223?3:We>191?2:1;if(Te+wt<=Y){let Zt,qt,dn,Qt;switch(wt){case 1:We<128&&(tt=We);break;case 2:Zt=ce[Te+1],(Zt&192)===128&&(Qt=(We&31)<<6|Zt&63,Qt>127&&(tt=Qt));break;case 3:Zt=ce[Te+1],qt=ce[Te+2],(Zt&192)===128&&(qt&192)===128&&(Qt=(We&15)<<12|(Zt&63)<<6|qt&63,Qt>2047&&(Qt<55296||Qt>57343)&&(tt=Qt));break;case 4:Zt=ce[Te+1],qt=ce[Te+2],dn=ce[Te+3],(Zt&192)===128&&(qt&192)===128&&(dn&192)===128&&(Qt=(We&15)<<18|(Zt&63)<<12|(qt&63)<<6|dn&63,Qt>65535&&Qt<1114112&&(tt=Qt))}}tt===null?(tt=65533,wt=1):tt>65535&&(tt-=65536,be.push(tt>>>10&1023|55296),tt=56320|tt&1023),be.push(tt),Te+=wt}return fe(be)}const ge=4096;function fe(ce){const X=ce.length;if(X<=ge)return String.fromCharCode.apply(String,ce);let Y="",be=0;for(;be<X;)Y+=String.fromCharCode.apply(String,ce.slice(be,be+=ge));return Y}function me(ce,X,Y){let be="";Y=Math.min(ce.length,Y);for(let Te=X;Te<Y;++Te)be+=String.fromCharCode(ce[Te]&127);return be}function xe(ce,X,Y){let be="";Y=Math.min(ce.length,Y);for(let Te=X;Te<Y;++Te)be+=String.fromCharCode(ce[Te]);return be}function ye(ce,X,Y){const be=ce.length;(!X||X<0)&&(X=0),(!Y||Y<0||Y>be)&&(Y=be);let Te="";for(let We=X;We<Y;++We)Te+=Be[ce[We]];return Te}function we(ce,X,Y){const be=ce.slice(X,Y);let Te="";for(let We=0;We<be.length-1;We+=2)Te+=String.fromCharCode(be[We]+be[We+1]*256);return Te}E.prototype.slice=function(X,Y){const be=this.length;X=~~X,Y=Y===void 0?be:~~Y,X<0?(X+=be,X<0&&(X=0)):X>be&&(X=be),Y<0?(Y+=be,Y<0&&(Y=0)):Y>be&&(Y=be),Y<X&&(Y=X);const Te=this.subarray(X,Y);return Object.setPrototypeOf(Te,E.prototype),Te};function Ee(ce,X,Y){if(ce%1!==0||ce<0)throw new RangeError("offset is not uint");if(ce+X>Y)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUintLE=E.prototype.readUIntLE=function(X,Y,be){X=X>>>0,Y=Y>>>0,be||Ee(X,Y,this.length);let Te=this[X],We=1,tt=0;for(;++tt<Y&&(We*=256);)Te+=this[X+tt]*We;return Te},E.prototype.readUintBE=E.prototype.readUIntBE=function(X,Y,be){X=X>>>0,Y=Y>>>0,be||Ee(X,Y,this.length);let Te=this[X+--Y],We=1;for(;Y>0&&(We*=256);)Te+=this[X+--Y]*We;return Te},E.prototype.readUint8=E.prototype.readUInt8=function(X,Y){return X=X>>>0,Y||Ee(X,1,this.length),this[X]},E.prototype.readUint16LE=E.prototype.readUInt16LE=function(X,Y){return X=X>>>0,Y||Ee(X,2,this.length),this[X]|this[X+1]<<8},E.prototype.readUint16BE=E.prototype.readUInt16BE=function(X,Y){return X=X>>>0,Y||Ee(X,2,this.length),this[X]<<8|this[X+1]},E.prototype.readUint32LE=E.prototype.readUInt32LE=function(X,Y){return X=X>>>0,Y||Ee(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+this[X+3]*16777216},E.prototype.readUint32BE=E.prototype.readUInt32BE=function(X,Y){return X=X>>>0,Y||Ee(X,4,this.length),this[X]*16777216+(this[X+1]<<16|this[X+2]<<8|this[X+3])},E.prototype.readBigUInt64LE=Le(function(X){X=X>>>0,Et(X,"offset");const Y=this[X],be=this[X+7];(Y===void 0||be===void 0)&&xt(X,this.length-8);const Te=Y+this[++X]*2**8+this[++X]*2**16+this[++X]*2**24,We=this[++X]+this[++X]*2**8+this[++X]*2**16+be*2**24;return BigInt(Te)+(BigInt(We)<<BigInt(32))}),E.prototype.readBigUInt64BE=Le(function(X){X=X>>>0,Et(X,"offset");const Y=this[X],be=this[X+7];(Y===void 0||be===void 0)&&xt(X,this.length-8);const Te=Y*2**24+this[++X]*2**16+this[++X]*2**8+this[++X],We=this[++X]*2**24+this[++X]*2**16+this[++X]*2**8+be;return(BigInt(Te)<<BigInt(32))+BigInt(We)}),E.prototype.readIntLE=function(X,Y,be){X=X>>>0,Y=Y>>>0,be||Ee(X,Y,this.length);let Te=this[X],We=1,tt=0;for(;++tt<Y&&(We*=256);)Te+=this[X+tt]*We;return We*=128,Te>=We&&(Te-=Math.pow(2,8*Y)),Te},E.prototype.readIntBE=function(X,Y,be){X=X>>>0,Y=Y>>>0,be||Ee(X,Y,this.length);let Te=Y,We=1,tt=this[X+--Te];for(;Te>0&&(We*=256);)tt+=this[X+--Te]*We;return We*=128,tt>=We&&(tt-=Math.pow(2,8*Y)),tt},E.prototype.readInt8=function(X,Y){return X=X>>>0,Y||Ee(X,1,this.length),this[X]&128?(255-this[X]+1)*-1:this[X]},E.prototype.readInt16LE=function(X,Y){X=X>>>0,Y||Ee(X,2,this.length);const be=this[X]|this[X+1]<<8;return be&32768?be|4294901760:be},E.prototype.readInt16BE=function(X,Y){X=X>>>0,Y||Ee(X,2,this.length);const be=this[X+1]|this[X]<<8;return be&32768?be|4294901760:be},E.prototype.readInt32LE=function(X,Y){return X=X>>>0,Y||Ee(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},E.prototype.readInt32BE=function(X,Y){return X=X>>>0,Y||Ee(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},E.prototype.readBigInt64LE=Le(function(X){X=X>>>0,Et(X,"offset");const Y=this[X],be=this[X+7];(Y===void 0||be===void 0)&&xt(X,this.length-8);const Te=this[X+4]+this[X+5]*2**8+this[X+6]*2**16+(be<<24);return(BigInt(Te)<<BigInt(32))+BigInt(Y+this[++X]*256+this[++X]*65536+this[++X]*16777216)}),E.prototype.readBigInt64BE=Le(function(X){X=X>>>0,Et(X,"offset");const Y=this[X],be=this[X+7];(Y===void 0||be===void 0)&&xt(X,this.length-8);const Te=(Y<<24)+this[++X]*2**16+this[++X]*2**8+this[++X];return(BigInt(Te)<<BigInt(32))+BigInt(this[++X]*16777216+this[++X]*65536+this[++X]*256+be)}),E.prototype.readFloatLE=function(X,Y){return X=X>>>0,Y||Ee(X,4,this.length),A.read(this,X,!0,23,4)},E.prototype.readFloatBE=function(X,Y){return X=X>>>0,Y||Ee(X,4,this.length),A.read(this,X,!1,23,4)},E.prototype.readDoubleLE=function(X,Y){return X=X>>>0,Y||Ee(X,8,this.length),A.read(this,X,!0,52,8)},E.prototype.readDoubleBE=function(X,Y){return X=X>>>0,Y||Ee(X,8,this.length),A.read(this,X,!1,52,8)};function He(ce,X,Y,be,Te,We){if(!E.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(X>Te||X<We)throw new RangeError('"value" argument is out of bounds');if(Y+be>ce.length)throw new RangeError("Index out of range")}E.prototype.writeUintLE=E.prototype.writeUIntLE=function(X,Y,be,Te){if(X=+X,Y=Y>>>0,be=be>>>0,!Te){const wt=Math.pow(2,8*be)-1;He(this,X,Y,be,wt,0)}let We=1,tt=0;for(this[Y]=X&255;++tt<be&&(We*=256);)this[Y+tt]=X/We&255;return Y+be},E.prototype.writeUintBE=E.prototype.writeUIntBE=function(X,Y,be,Te){if(X=+X,Y=Y>>>0,be=be>>>0,!Te){const wt=Math.pow(2,8*be)-1;He(this,X,Y,be,wt,0)}let We=be-1,tt=1;for(this[Y+We]=X&255;--We>=0&&(tt*=256);)this[Y+We]=X/tt&255;return Y+be},E.prototype.writeUint8=E.prototype.writeUInt8=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,1,255,0),this[Y]=X&255,Y+1},E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,2,65535,0),this[Y]=X&255,this[Y+1]=X>>>8,Y+2},E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,2,65535,0),this[Y]=X>>>8,this[Y+1]=X&255,Y+2},E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,4,4294967295,0),this[Y+3]=X>>>24,this[Y+2]=X>>>16,this[Y+1]=X>>>8,this[Y]=X&255,Y+4},E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,4,4294967295,0),this[Y]=X>>>24,this[Y+1]=X>>>16,this[Y+2]=X>>>8,this[Y+3]=X&255,Y+4};function Ae(ce,X,Y,be,Te){hn(X,be,Te,ce,Y,7);let We=Number(X&BigInt(4294967295));ce[Y++]=We,We=We>>8,ce[Y++]=We,We=We>>8,ce[Y++]=We,We=We>>8,ce[Y++]=We;let tt=Number(X>>BigInt(32)&BigInt(4294967295));return ce[Y++]=tt,tt=tt>>8,ce[Y++]=tt,tt=tt>>8,ce[Y++]=tt,tt=tt>>8,ce[Y++]=tt,Y}function Ke(ce,X,Y,be,Te){hn(X,be,Te,ce,Y,7);let We=Number(X&BigInt(4294967295));ce[Y+7]=We,We=We>>8,ce[Y+6]=We,We=We>>8,ce[Y+5]=We,We=We>>8,ce[Y+4]=We;let tt=Number(X>>BigInt(32)&BigInt(4294967295));return ce[Y+3]=tt,tt=tt>>8,ce[Y+2]=tt,tt=tt>>8,ce[Y+1]=tt,tt=tt>>8,ce[Y]=tt,Y+8}E.prototype.writeBigUInt64LE=Le(function(X,Y=0){return Ae(this,X,Y,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeBigUInt64BE=Le(function(X,Y=0){return Ke(this,X,Y,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeIntLE=function(X,Y,be,Te){if(X=+X,Y=Y>>>0,!Te){const Zt=Math.pow(2,8*be-1);He(this,X,Y,be,Zt-1,-Zt)}let We=0,tt=1,wt=0;for(this[Y]=X&255;++We<be&&(tt*=256);)X<0&&wt===0&&this[Y+We-1]!==0&&(wt=1),this[Y+We]=(X/tt>>0)-wt&255;return Y+be},E.prototype.writeIntBE=function(X,Y,be,Te){if(X=+X,Y=Y>>>0,!Te){const Zt=Math.pow(2,8*be-1);He(this,X,Y,be,Zt-1,-Zt)}let We=be-1,tt=1,wt=0;for(this[Y+We]=X&255;--We>=0&&(tt*=256);)X<0&&wt===0&&this[Y+We+1]!==0&&(wt=1),this[Y+We]=(X/tt>>0)-wt&255;return Y+be},E.prototype.writeInt8=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,1,127,-128),X<0&&(X=255+X+1),this[Y]=X&255,Y+1},E.prototype.writeInt16LE=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,2,32767,-32768),this[Y]=X&255,this[Y+1]=X>>>8,Y+2},E.prototype.writeInt16BE=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,2,32767,-32768),this[Y]=X>>>8,this[Y+1]=X&255,Y+2},E.prototype.writeInt32LE=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,4,2147483647,-2147483648),this[Y]=X&255,this[Y+1]=X>>>8,this[Y+2]=X>>>16,this[Y+3]=X>>>24,Y+4},E.prototype.writeInt32BE=function(X,Y,be){return X=+X,Y=Y>>>0,be||He(this,X,Y,4,2147483647,-2147483648),X<0&&(X=4294967295+X+1),this[Y]=X>>>24,this[Y+1]=X>>>16,this[Y+2]=X>>>8,this[Y+3]=X&255,Y+4},E.prototype.writeBigInt64LE=Le(function(X,Y=0){return Ae(this,X,Y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeBigInt64BE=Le(function(X,Y=0){return Ke(this,X,Y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ue(ce,X,Y,be,Te,We){if(Y+be>ce.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("Index out of range")}function ct(ce,X,Y,be,Te){return X=+X,Y=Y>>>0,Te||Ue(ce,X,Y,4),A.write(ce,X,Y,be,23,4),Y+4}E.prototype.writeFloatLE=function(X,Y,be){return ct(this,X,Y,!0,be)},E.prototype.writeFloatBE=function(X,Y,be){return ct(this,X,Y,!1,be)};function vt(ce,X,Y,be,Te){return X=+X,Y=Y>>>0,Te||Ue(ce,X,Y,8),A.write(ce,X,Y,be,52,8),Y+8}E.prototype.writeDoubleLE=function(X,Y,be){return vt(this,X,Y,!0,be)},E.prototype.writeDoubleBE=function(X,Y,be){return vt(this,X,Y,!1,be)},E.prototype.copy=function(X,Y,be,Te){if(!E.isBuffer(X))throw new TypeError("argument should be a Buffer");if(be||(be=0),!Te&&Te!==0&&(Te=this.length),Y>=X.length&&(Y=X.length),Y||(Y=0),Te>0&&Te<be&&(Te=be),Te===be||X.length===0||this.length===0)return 0;if(Y<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("sourceEnd out of bounds");Te>this.length&&(Te=this.length),X.length-Y<Te-be&&(Te=X.length-Y+be);const We=Te-be;return this===X&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Y,be,Te):Uint8Array.prototype.set.call(X,this.subarray(be,Te),Y),We},E.prototype.fill=function(X,Y,be,Te){if(typeof X=="string"){if(typeof Y=="string"?(Te=Y,Y=0,be=this.length):typeof be=="string"&&(Te=be,be=this.length),Te!==void 0&&typeof Te!="string")throw new TypeError("encoding must be a string");if(typeof Te=="string"&&!E.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);if(X.length===1){const tt=X.charCodeAt(0);(Te==="utf8"&&tt<128||Te==="latin1")&&(X=tt)}}else typeof X=="number"?X=X&255:typeof X=="boolean"&&(X=Number(X));if(Y<0||this.length<Y||this.length<be)throw new RangeError("Out of range index");if(be<=Y)return this;Y=Y>>>0,be=be===void 0?this.length:be>>>0,X||(X=0);let We;if(typeof X=="number")for(We=Y;We<be;++We)this[We]=X;else{const tt=E.isBuffer(X)?X:E.from(X,Te),wt=tt.length;if(wt===0)throw new TypeError('The value "'+X+'" is invalid for argument "value"');for(We=0;We<be-Y;++We)this[We+Y]=tt[We%wt]}return this};const dt={};function It(ce,X,Y){dt[ce]=class extends Y{constructor(){super(),Object.defineProperty(this,"message",{value:X.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ce}]`,this.stack,delete this.name}get code(){return ce}set code(Te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Te,writable:!0})}toString(){return`${this.name} [${ce}]: ${this.message}`}}}It("ERR_BUFFER_OUT_OF_BOUNDS",function(ce){return ce?`${ce} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),It("ERR_INVALID_ARG_TYPE",function(ce,X){return`The "${ce}" argument must be of type number. Received type ${typeof X}`},TypeError),It("ERR_OUT_OF_RANGE",function(ce,X,Y){let be=`The value of "${ce}" is out of range.`,Te=Y;return Number.isInteger(Y)&&Math.abs(Y)>4294967296?Te=rt(String(Y)):typeof Y=="bigint"&&(Te=String(Y),(Y>BigInt(2)**BigInt(32)||Y<-(BigInt(2)**BigInt(32)))&&(Te=rt(Te)),Te+="n"),be+=` It must be ${X}. Received ${Te}`,be},RangeError);function rt(ce){let X="",Y=ce.length;const be=ce[0]==="-"?1:0;for(;Y>=be+4;Y-=3)X=`_${ce.slice(Y-3,Y)}${X}`;return`${ce.slice(0,Y)}${X}`}function Lt(ce,X,Y){Et(X,"offset"),(ce[X]===void 0||ce[X+Y]===void 0)&&xt(X,ce.length-(Y+1))}function hn(ce,X,Y,be,Te,We){if(ce>Y||ce<X){const tt=typeof X=="bigint"?"n":"";let wt;throw X===0||X===BigInt(0)?wt=`>= 0${tt} and < 2${tt} ** ${(We+1)*8}${tt}`:wt=`>= -(2${tt} ** ${(We+1)*8-1}${tt}) and < 2 ** ${(We+1)*8-1}${tt}`,new dt.ERR_OUT_OF_RANGE("value",wt,ce)}Lt(be,Te,We)}function Et(ce,X){if(typeof ce!="number")throw new dt.ERR_INVALID_ARG_TYPE(X,"number",ce)}function xt(ce,X,Y){throw Math.floor(ce)!==ce?(Et(ce,Y),new dt.ERR_OUT_OF_RANGE("offset","an integer",ce)):X<0?new dt.ERR_BUFFER_OUT_OF_BOUNDS:new dt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${X}`,ce)}const en=/[^+/0-9A-Za-z-_]/g;function _t(ce){if(ce=ce.split("=")[0],ce=ce.trim().replace(en,""),ce.length<2)return"";for(;ce.length%4!==0;)ce=ce+"=";return ce}function Kt(ce,X){X=X||1/0;let Y;const be=ce.length;let Te=null;const We=[];for(let tt=0;tt<be;++tt){if(Y=ce.charCodeAt(tt),Y>55295&&Y<57344){if(!Te){if(Y>56319){(X-=3)>-1&&We.push(239,191,189);continue}else if(tt+1===be){(X-=3)>-1&&We.push(239,191,189);continue}Te=Y;continue}if(Y<56320){(X-=3)>-1&&We.push(239,191,189),Te=Y;continue}Y=(Te-55296<<10|Y-56320)+65536}else Te&&(X-=3)>-1&&We.push(239,191,189);if(Te=null,Y<128){if((X-=1)<0)break;We.push(Y)}else if(Y<2048){if((X-=2)<0)break;We.push(Y>>6|192,Y&63|128)}else if(Y<65536){if((X-=3)<0)break;We.push(Y>>12|224,Y>>6&63|128,Y&63|128)}else if(Y<1114112){if((X-=4)<0)break;We.push(Y>>18|240,Y>>12&63|128,Y>>6&63|128,Y&63|128)}else throw new Error("Invalid code point")}return We}function Dt(ce){const X=[];for(let Y=0;Y<ce.length;++Y)X.push(ce.charCodeAt(Y)&255);return X}function Nt(ce,X){let Y,be,Te;const We=[];for(let tt=0;tt<ce.length&&!((X-=2)<0);++tt)Y=ce.charCodeAt(tt),be=Y>>8,Te=Y%256,We.push(Te),We.push(be);return We}function St(ce){return d.toByteArray(_t(ce))}function pe(ce,X,Y,be){let Te;for(Te=0;Te<be&&!(Te+Y>=X.length||Te>=ce.length);++Te)X[Te+Y]=ce[Te];return Te}function _e(ce,X){return ce instanceof X||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===X.name}function De(ce){return ce!==ce}const Be=function(){const ce="0123456789abcdef",X=new Array(256);for(let Y=0;Y<16;++Y){const be=Y*16;for(let Te=0;Te<16;++Te)X[be+Te]=ce[Y]+ce[Te]}return X}();function Le(ce){return typeof BigInt>"u"?ke:ce}function ke(){throw new Error("BigInt not supported")}},"./node_modules/css-loader/dist/runtime/api.js":u=>{u.exports=function(m){var c=[];return c.toString=function(){return this.map(function(A){var p="",v=typeof A[5]<"u";return A[4]&&(p+="@supports (".concat(A[4],") {")),A[2]&&(p+="@media ".concat(A[2]," {")),v&&(p+="@layer".concat(A[5].length>0?" ".concat(A[5]):""," {")),p+=m(A),v&&(p+="}"),A[2]&&(p+="}"),A[4]&&(p+="}"),p}).join("")},c.i=function(A,p,v,g,y){typeof A=="string"&&(A=[[null,A,void 0]]);var E={};if(v)for(var _=0;_<this.length;_++){var S=this[_][0];S!=null&&(E[S]=!0)}for(var x=0;x<A.length;x++){var C=[].concat(A[x]);v&&E[C[0]]||(typeof y<"u"&&(typeof C[5]>"u"||(C[1]="@layer".concat(C[5].length>0?" ".concat(C[5]):""," {").concat(C[1],"}")),C[5]=y),p&&(C[2]&&(C[1]="@media ".concat(C[2]," {").concat(C[1],"}")),C[2]=p),g&&(C[4]?(C[1]="@supports (".concat(C[4],") {").concat(C[1],"}"),C[4]=g):C[4]="".concat(g)),c.push(C))}},c}},"./node_modules/css-loader/dist/runtime/getUrl.js":u=>{u.exports=function(m,c){return c||(c={}),m&&(m=String(m.__esModule?m.default:m),/^['"].*['"]$/.test(m)&&(m=m.slice(1,-1)),c.hash&&(m+=c.hash),/["'() \t\n]|(%20)/.test(m)||c.needQuotes?'"'.concat(m.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):m)}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":u=>{u.exports=function(m){var c=m[1],d=m[3];if(!d)return c;if(typeof btoa=="function"){var A=btoa(unescape(encodeURIComponent(JSON.stringify(d)))),p="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(A),v="/*# ".concat(p," */");return[c].concat([v]).join(`
`)}return[c].join(`
`)}},"./node_modules/debug/src/browser.js":(u,m,c)=>{m.formatArgs=A,m.save=p,m.load=v,m.useColors=d,m.storage=g(),m.destroy=(()=>{let E=!1;return()=>{E||(E=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),m.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function d(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function A(E){if(E[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+E[0]+(this.useColors?"%c ":" ")+"+"+u.exports.humanize(this.diff),!this.useColors)return;const _="color: "+this.color;E.splice(1,0,_,"color: inherit");let S=0,x=0;E[0].replace(/%[a-zA-Z%]/g,C=>{C!=="%%"&&(S++,C==="%c"&&(x=S))}),E.splice(x,0,_)}m.log=console.debug||console.log||(()=>{});function p(E){try{E?m.storage.setItem("debug",E):m.storage.removeItem("debug")}catch{}}function v(){let E;try{E=m.storage.getItem("debug")}catch{}return!E&&typeof process<"u"&&"env"in process&&(E=i.DEBUG),E}function g(){try{return localStorage}catch{}}u.exports=c("./node_modules/debug/src/common.js")(m);const{formatters:y}=u.exports;y.j=function(E){try{return JSON.stringify(E)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}}},"./node_modules/debug/src/common.js":(u,m,c)=>{function d(A){v.debug=v,v.default=v,v.coerce=x,v.disable=E,v.enable=y,v.enabled=_,v.humanize=c("./node_modules/ms/index.js"),v.destroy=C,Object.keys(A).forEach(w=>{v[w]=A[w]}),v.names=[],v.skips=[],v.formatters={};function p(w){let T=0;for(let O=0;O<w.length;O++)T=(T<<5)-T+w.charCodeAt(O),T|=0;return v.colors[Math.abs(T)%v.colors.length]}v.selectColor=p;function v(w){let T,O=null,B,P;function L(...N){if(!L.enabled)return;const F=L,z=Number(new Date),G=z-(T||z);F.diff=G,F.prev=T,F.curr=z,T=z,N[0]=v.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");let H=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(q,Q)=>{if(q==="%%")return"%";H++;const k=v.formatters[Q];if(typeof k=="function"){const K=N[H];q=k.call(F,K),N.splice(H,1),H--}return q}),v.formatArgs.call(F,N),(F.log||v.log).apply(F,N)}return L.namespace=w,L.useColors=v.useColors(),L.color=v.selectColor(w),L.extend=g,L.destroy=v.destroy,Object.defineProperty(L,"enabled",{enumerable:!0,configurable:!1,get:()=>O!==null?O:(B!==v.namespaces&&(B=v.namespaces,P=v.enabled(w)),P),set:N=>{O=N}}),typeof v.init=="function"&&v.init(L),L}function g(w,T){const O=v(this.namespace+(typeof T>"u"?":":T)+w);return O.log=this.log,O}function y(w){v.save(w),v.namespaces=w,v.names=[],v.skips=[];let T;const O=(typeof w=="string"?w:"").split(/[\s,]+/),B=O.length;for(T=0;T<B;T++)O[T]&&(w=O[T].replace(/\*/g,".*?"),w[0]==="-"?v.skips.push(new RegExp("^"+w.slice(1)+"$")):v.names.push(new RegExp("^"+w+"$")))}function E(){const w=[...v.names.map(S),...v.skips.map(S).map(T=>"-"+T)].join(",");return v.enable(""),w}function _(w){if(w[w.length-1]==="*")return!0;let T,O;for(T=0,O=v.skips.length;T<O;T++)if(v.skips[T].test(w))return!1;for(T=0,O=v.names.length;T<O;T++)if(v.names[T].test(w))return!0;return!1}function S(w){return w.toString().substring(2,w.toString().length-2).replace(/\.\*\?$/,"*")}function x(w){return w instanceof Error?w.stack||w.message:w}function C(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return v.enable(v.load()),v}u.exports=d},"./node_modules/deep-assign/index.js":(u,m,c)=>{var d=c("./node_modules/is-obj/index.js"),A=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;function v(E){if(E==null)throw new TypeError("Sources cannot be null or undefined");return Object(E)}function g(E,_,S){var x=_[S];if(x!=null){if(A.call(E,S)&&(E[S]===void 0||E[S]===null))throw new TypeError("Cannot convert undefined or null to object ("+S+")");!A.call(E,S)||!d(x)?E[S]=x:E[S]=y(Object(E[S]),_[S])}}function y(E,_){if(E===_)return E;_=Object(_);for(var S in _)A.call(_,S)&&g(E,_,S);if(Object.getOwnPropertySymbols)for(var x=Object.getOwnPropertySymbols(_),C=0;C<x.length;C++)p.call(_,x[C])&&g(E,_,x[C]);return E}u.exports=function(_){_=v(_);for(var S=1;S<arguments.length;S++)y(_,arguments[S]);return _}},"./node_modules/dtype/index.js":u=>{u.exports=function(m){switch(m){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},"./node_modules/global/window.js":(u,m,c)=>{var d;typeof window<"u"?d=window:typeof c.g<"u"?d=c.g:typeof self<"u"?d=self:d={},u.exports=d},"./node_modules/ieee754/index.js":(u,m)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */m.read=function(c,d,A,p,v){var g,y,E=v*8-p-1,_=(1<<E)-1,S=_>>1,x=-7,C=A?v-1:0,w=A?-1:1,T=c[d+C];for(C+=w,g=T&(1<<-x)-1,T>>=-x,x+=E;x>0;g=g*256+c[d+C],C+=w,x-=8);for(y=g&(1<<-x)-1,g>>=-x,x+=p;x>0;y=y*256+c[d+C],C+=w,x-=8);if(g===0)g=1-S;else{if(g===_)return y?NaN:(T?-1:1)*(1/0);y=y+Math.pow(2,p),g=g-S}return(T?-1:1)*y*Math.pow(2,g-p)},m.write=function(c,d,A,p,v,g){var y,E,_,S=g*8-v-1,x=(1<<S)-1,C=x>>1,w=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=p?0:g-1,O=p?1:-1,B=d<0||d===0&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(E=isNaN(d)?1:0,y=x):(y=Math.floor(Math.log(d)/Math.LN2),d*(_=Math.pow(2,-y))<1&&(y--,_*=2),y+C>=1?d+=w/_:d+=w*Math.pow(2,1-C),d*_>=2&&(y++,_/=2),y+C>=x?(E=0,y=x):y+C>=1?(E=(d*_-1)*Math.pow(2,v),y=y+C):(E=d*Math.pow(2,C-1)*Math.pow(2,v),y=0));v>=8;c[A+T]=E&255,T+=O,E/=256,v-=8);for(y=y<<v|E,S+=v;S>0;c[A+T]=y&255,T+=O,y/=256,S-=8);c[A+T-O]|=B*128}},"./node_modules/is-buffer/index.js":u=>{/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */u.exports=function(d){return d!=null&&(m(d)||c(d)||!!d._isBuffer)};function m(d){return!!d.constructor&&typeof d.constructor.isBuffer=="function"&&d.constructor.isBuffer(d)}function c(d){return typeof d.readFloatLE=="function"&&typeof d.slice=="function"&&m(d.slice(0,0))}},"./node_modules/is-function/index.js":u=>{u.exports=c;var m=Object.prototype.toString;function c(d){if(!d)return!1;var A=m.call(d);return A==="[object Function]"||typeof d=="function"&&A!=="[object RegExp]"||typeof window<"u"&&(d===window.setTimeout||d===window.alert||d===window.confirm||d===window.prompt)}},"./node_modules/is-obj/index.js":u=>{u.exports=function(m){var c=typeof m;return m!==null&&(c==="object"||c==="function")}},"./node_modules/layout-bmfont-text/index.js":(u,m,c)=>{var d=c("./node_modules/word-wrapper/index.js"),A=c("./node_modules/xtend/immutable.js"),p=c("./node_modules/as-number/index.js"),v=["x","e","a","o","n","s","r","c","u","m","v","w","z"],g=["m","w"],y=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],E=9,_=32,S=0,x=1,C=2;u.exports=function(j){return new w(j)};function w(H){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(H)}w.prototype.update=function(H){if(H=A({measure:this._measure},H),this._opt=H,this._opt.tabSize=p(this._opt.tabSize,4),!H.font)throw new Error("must provide a valid bitmap font");var j=this.glyphs,q=H.text||"",Q=H.font;this._setupSpaceGlyphs(Q);var k=d.lines(q,H),K=H.width||0;j.length=0;var W=k.reduce(function(He,Ae){return Math.max(He,Ae.width,K)},0),J=0,se=0,ge=p(H.lineHeight,Q.common.lineHeight),fe=Q.common.base,me=ge-fe,xe=H.letterSpacing||0,ye=ge*k.length-me,we=z(this._opt.align);se-=ye,this._width=W,this._height=ye,this._descender=ge-fe,this._baseline=fe,this._xHeight=P(Q),this._capHeight=N(Q),this._lineHeight=ge,this._ascender=ge-me-this._xHeight;var Ee=this;k.forEach(function(He,Ae){for(var Ke=He.start,Ue=He.end,ct=He.width,vt,dt=Ke;dt<Ue;dt++){var It=q.charCodeAt(dt),rt=Ee.getGlyph(Q,It);if(rt){vt&&(J+=F(Q,vt.id,rt.id));var Lt=J;we===x?Lt+=(W-ct)/2:we===C&&(Lt+=W-ct),j.push({position:[Lt,se],data:rt,index:dt,line:Ae}),J+=rt.xadvance+xe,vt=rt}}se+=ge,J=0}),this._linesTotal=k.length},w.prototype._setupSpaceGlyphs=function(H){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,!(!H.chars||H.chars.length===0)){var j=B(H,_)||L(H)||H.chars[0],q=this._opt.tabSize*j.xadvance;this._fallbackSpaceGlyph=j,this._fallbackTabGlyph=A(j,{x:0,y:0,xadvance:q,id:E,xoffset:0,yoffset:0,width:0,height:0})}},w.prototype.getGlyph=function(H,j){var q=B(H,j);return q||(j===E?this._fallbackTabGlyph:j===_?this._fallbackSpaceGlyph:null)},w.prototype.computeMetrics=function(H,j,q,Q){var k=this._opt.letterSpacing||0,K=this._opt.font,W=0,J=0,se=0,ge,fe;if(!K.chars||K.chars.length===0)return{start:j,end:j,width:0};q=Math.min(H.length,q);for(var me=j;me<q;me++){var xe=H.charCodeAt(me),ge=this.getGlyph(K,xe);if(ge){ge.xoffset;var ye=fe?F(K,fe.id,ge.id):0;W+=ye;var we=W+ge.xadvance+k,Ee=W+ge.width;if(Ee>=Q||we>=Q)break;W=we,J=Ee,fe=ge}se++}return fe&&(J+=fe.xoffset),{start:j,end:j+se,width:J}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(T);function T(H){Object.defineProperty(w.prototype,H,{get:O(H),configurable:!0})}function O(H){return new Function(["return function "+H+"() {","  return this._"+H,"}"].join(`
`))()}function B(H,j){if(!H.chars||H.chars.length===0)return null;var q=G(H.chars,j);return q>=0?H.chars[q]:null}function P(H){for(var j=0;j<v.length;j++){var q=v[j].charCodeAt(0),Q=G(H.chars,q);if(Q>=0)return H.chars[Q].height}return 0}function L(H){for(var j=0;j<g.length;j++){var q=g[j].charCodeAt(0),Q=G(H.chars,q);if(Q>=0)return H.chars[Q]}return 0}function N(H){for(var j=0;j<y.length;j++){var q=y[j].charCodeAt(0),Q=G(H.chars,q);if(Q>=0)return H.chars[Q].height}return 0}function F(H,j,q){if(!H.kernings||H.kernings.length===0)return 0;for(var Q=H.kernings,k=0;k<Q.length;k++){var K=Q[k];if(K.first===j&&K.second===q)return K.amount}return 0}function z(H){return H==="center"?x:H==="right"?C:S}function G(H,j,q){q=q||0;for(var Q=q;Q<H.length;Q++)if(H[Q].id===j)return Q;return-1}},"./node_modules/load-bmfont/browser.js":(u,m,c)=>{var d=c("./node_modules/buffer/index.js").Buffer,A=c("./node_modules/xhr/index.js"),p=function(){},v=c("./node_modules/parse-bmfont-ascii/index.js"),g=c("./node_modules/parse-bmfont-xml/lib/browser.js"),y=c("./node_modules/parse-bmfont-binary/index.js"),E=c("./node_modules/load-bmfont/lib/is-binary.js"),_=c("./node_modules/xtend/immutable.js"),S=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();u.exports=function(w,T){T=typeof T=="function"?T:p,typeof w=="string"?w={uri:w}:w||(w={});var O=w.binary;O&&(w=C(w)),A(w,function(B,P,L){if(B)return T(B);if(!/^2/.test(P.statusCode))return T(new Error("http status code: "+P.statusCode));if(!L)return T(new Error("no body result"));var N=!1;if(x(L)){var F=new Uint8Array(L);L=d.from(F,"binary")}E(L)&&(N=!0,typeof L=="string"&&(L=d.from(L,"binary"))),N||(d.isBuffer(L)&&(L=L.toString(w.encoding)),L=L.trim());var z;try{var G=P.headers["content-type"];N?z=y(L):/json/.test(G)||L.charAt(0)==="{"?z=JSON.parse(L):/xml/.test(G)||L.charAt(0)==="<"?z=g(L):z=v(L)}catch(H){T(new Error("error parsing font "+H.message)),T=p}T(null,z)})};function x(w){var T=Object.prototype.toString;return T.call(w)==="[object ArrayBuffer]"}function C(w){if(S)return _(w,{responseType:"arraybuffer"});if(typeof self.XMLHttpRequest>"u")throw new Error("your browser does not support XHR loading");var T=new self.XMLHttpRequest;return T.overrideMimeType("text/plain; charset=x-user-defined"),_({xhr:T},w)}},"./node_modules/load-bmfont/lib/is-binary.js":(u,m,c)=>{var d=c("./node_modules/buffer/index.js").Buffer,A=c("./node_modules/buffer-equal/index.js"),p=d.from([66,77,70,3]);u.exports=function(v){return typeof v=="string"?v.substring(0,3)==="BMF":v.length>4&&A(v.slice(0,4),p)}},"./node_modules/ms/index.js":u=>{var m=1e3,c=m*60,d=c*60,A=d*24,p=A*7,v=A*365.25;u.exports=function(S,x){x=x||{};var C=typeof S;if(C==="string"&&S.length>0)return g(S);if(C==="number"&&isFinite(S))return x.long?E(S):y(S);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(S))};function g(S){if(S=String(S),!(S.length>100)){var x=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(S);if(x){var C=parseFloat(x[1]),w=(x[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return C*v;case"weeks":case"week":case"w":return C*p;case"days":case"day":case"d":return C*A;case"hours":case"hour":case"hrs":case"hr":case"h":return C*d;case"minutes":case"minute":case"mins":case"min":case"m":return C*c;case"seconds":case"second":case"secs":case"sec":case"s":return C*m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return C;default:return}}}}function y(S){var x=Math.abs(S);return x>=A?Math.round(S/A)+"d":x>=d?Math.round(S/d)+"h":x>=c?Math.round(S/c)+"m":x>=m?Math.round(S/m)+"s":S+"ms"}function E(S){var x=Math.abs(S);return x>=A?_(S,x,A,"day"):x>=d?_(S,x,d,"hour"):x>=c?_(S,x,c,"minute"):x>=m?_(S,x,m,"second"):S+" ms"}function _(S,x,C,w){var T=x>=C*1.5;return Math.round(S/C)+" "+w+(T?"s":"")}},"./node_modules/parse-bmfont-ascii/index.js":u=>{u.exports=function(p){if(!p)throw new Error("no data provided");p=p.toString().trim();var v={pages:[],chars:[],kernings:[]},g=p.split(/\r\n?|\n/g);if(g.length===0)throw new Error("no data in BMFont file");for(var y=0;y<g.length;y++){var E=m(g[y],y);if(E)if(E.key==="page"){if(typeof E.data.id!="number")throw new Error("malformed file at line "+y+" -- needs page id=N");if(typeof E.data.file!="string")throw new Error("malformed file at line "+y+' -- needs page file="path"');v.pages[E.data.id]=E.data.file}else E.key==="chars"||E.key==="kernings"||(E.key==="char"?v.chars.push(E.data):E.key==="kerning"?v.kernings.push(E.data):v[E.key]=E.data)}return v};function m(A,p){if(A=A.replace(/\t+/g," ").trim(),!A)return null;var v=A.indexOf(" ");if(v===-1)throw new Error("no named row at line "+p);var g=A.substring(0,v);A=A.substring(v+1),A=A.replace(/letter=[\'\"]\S+[\'\"]/gi,""),A=A.split("="),A=A.map(function(x){return x.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var y=[],E=0;E<A.length;E++){var _=A[E];E===0?y.push({key:_[0],data:""}):E===A.length-1?y[y.length-1].data=c(_[0]):(y[y.length-1].data=c(_[0]),y.push({key:_[1],data:""}))}var S={key:g,data:{}};return y.forEach(function(x){S.data[x.key]=x.data}),S}function c(A){return!A||A.length===0?"":A.indexOf('"')===0||A.indexOf("'")===0?A.substring(1,A.length-1):A.indexOf(",")!==-1?d(A):parseInt(A,10)}function d(A){return A.split(",").map(function(p){return parseInt(p,10)})}},"./node_modules/parse-bmfont-binary/index.js":u=>{var m=[66,77,70];u.exports=function(S){if(S.length<6)throw new Error("invalid buffer length for BMFont");var x=m.every(function(B,P){return S.readUInt8(P)===B});if(!x)throw new Error("BMFont missing BMF byte header");var C=3,w=S.readUInt8(C++);if(w>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var T={kernings:[],chars:[]},O=0;O<5;O++)C+=c(T,S,C);return T};function c(_,S,x){if(x>S.length-1)return 0;var C=S.readUInt8(x++),w=S.readInt32LE(x);switch(x+=4,C){case 1:_.info=d(S,x);break;case 2:_.common=A(S,x);break;case 3:_.pages=p(S,x,w);break;case 4:_.chars=v(S,x,w);break;case 5:_.kernings=g(S,x,w);break}return 5+w}function d(_,S){var x={};x.size=_.readInt16LE(S);var C=_.readUInt8(S+2);return x.smooth=C>>7&1,x.unicode=C>>6&1,x.italic=C>>5&1,x.bold=C>>4&1,C>>3&1&&(x.fixedHeight=1),x.charset=_.readUInt8(S+3)||"",x.stretchH=_.readUInt16LE(S+4),x.aa=_.readUInt8(S+6),x.padding=[_.readInt8(S+7),_.readInt8(S+8),_.readInt8(S+9),_.readInt8(S+10)],x.spacing=[_.readInt8(S+11),_.readInt8(S+12)],x.outline=_.readUInt8(S+13),x.face=E(_,S+14),x}function A(_,S){var x={};return x.lineHeight=_.readUInt16LE(S),x.base=_.readUInt16LE(S+2),x.scaleW=_.readUInt16LE(S+4),x.scaleH=_.readUInt16LE(S+6),x.pages=_.readUInt16LE(S+8),_.readUInt8(S+10),x.packed=0,x.alphaChnl=_.readUInt8(S+11),x.redChnl=_.readUInt8(S+12),x.greenChnl=_.readUInt8(S+13),x.blueChnl=_.readUInt8(S+14),x}function p(_,S,x){for(var C=[],w=y(_,S),T=w.length+1,O=x/T,B=0;B<O;B++)C[B]=_.slice(S,S+w.length).toString("utf8"),S+=T;return C}function v(_,S,x){for(var C=[],w=x/20,T=0;T<w;T++){var O={},B=T*20;O.id=_.readUInt32LE(S+0+B),O.x=_.readUInt16LE(S+4+B),O.y=_.readUInt16LE(S+6+B),O.width=_.readUInt16LE(S+8+B),O.height=_.readUInt16LE(S+10+B),O.xoffset=_.readInt16LE(S+12+B),O.yoffset=_.readInt16LE(S+14+B),O.xadvance=_.readInt16LE(S+16+B),O.page=_.readUInt8(S+18+B),O.chnl=_.readUInt8(S+19+B),C[T]=O}return C}function g(_,S,x){for(var C=[],w=x/10,T=0;T<w;T++){var O={},B=T*10;O.first=_.readUInt32LE(S+0+B),O.second=_.readUInt32LE(S+4+B),O.amount=_.readInt16LE(S+8+B),C[T]=O}return C}function y(_,S){for(var x=S;x<_.length&&_[x]!==0;x++);return _.slice(S,x)}function E(_,S){return y(_,S).toString("utf8")}},"./node_modules/parse-bmfont-xml/lib/browser.js":(u,m,c)=>{var d=c("./node_modules/parse-bmfont-xml/lib/parse-attribs.js"),A=c("./node_modules/xml-parse-from-string/index.js"),p={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};u.exports=function(_){_=_.toString();var S=A(_),x={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(L){var N=S.getElementsByTagName(L)[0];N&&(x[L]=d(v(N)))});var C=S.getElementsByTagName("pages")[0];if(!C)throw new Error("malformed file -- no <pages> element");for(var w=C.getElementsByTagName("page"),T=0;T<w.length;T++){var O=w[T],B=parseInt(O.getAttribute("id"),10),P=O.getAttribute("file");if(isNaN(B))throw new Error('malformed file -- page "id" attribute is NaN');if(!P)throw new Error('malformed file -- needs page "file" attribute');x.pages[parseInt(B,10)]=P}return["chars","kernings"].forEach(function(L){var N=S.getElementsByTagName(L)[0];if(N)for(var F=L.substring(0,L.length-1),z=N.getElementsByTagName(F),G=0;G<z.length;G++){var H=z[G];x[L].push(d(v(H)))}}),x};function v(E){var _=g(E);return _.reduce(function(S,x){var C=y(x.nodeName);return S[C]=x.nodeValue,S},{})}function g(E){for(var _=[],S=0;S<E.attributes.length;S++)_.push(E.attributes[S]);return _}function y(E){return p[E.toLowerCase()]||E}},"./node_modules/parse-bmfont-xml/lib/parse-attribs.js":u=>{var m="chasrset";u.exports=function(A){m in A&&(A.charset=A[m],delete A[m]);for(var p in A)p==="face"||p==="charset"||(p==="padding"||p==="spacing"?A[p]=c(A[p]):A[p]=parseInt(A[p],10));return A};function c(d){return d.split(",").map(function(A){return parseInt(A,10)})}},"./node_modules/parse-headers/parse-headers.js":u=>{var m=function(d){return d.replace(/^\s+|\s+$/g,"")},c=function(d){return Object.prototype.toString.call(d)==="[object Array]"};u.exports=function(d){if(!d)return{};for(var A={},p=m(d).split(`
`),v=0;v<p.length;v++){var g=p[v],y=g.indexOf(":"),E=m(g.slice(0,y)).toLowerCase(),_=m(g.slice(y+1));typeof A[E]>"u"?A[E]=_:c(A[E])?A[E].push(_):A[E]=[A[E],_]}return A}},"./node_modules/quad-indices/index.js":(u,m,c)=>{var d=c("./node_modules/dtype/index.js"),A=c("./node_modules/an-array/index.js"),p=c("./node_modules/is-buffer/index.js"),v=[0,2,3],g=[2,1,3];u.exports=function(E,_){(!E||!(A(E)||p(E)))&&(_=E||{},E=null),typeof _=="number"?_={count:_}:_=_||{};for(var S=typeof _.type=="string"?_.type:"uint16",x=typeof _.count=="number"?_.count:1,C=_.start||0,w=_.clockwise!==!1?v:g,T=w[0],O=w[1],B=w[2],P=x*6,L=E||new(d(S))(P),N=0,F=0;N<P;N+=6,F+=4){var z=N+C;L[z+0]=F+0,L[z+1]=F+1,L[z+2]=F+2,L[z+3]=F+T,L[z+4]=F+O,L[z+5]=F+B}return L}},"./node_modules/super-animejs/lib/anime.es.js":(u,m,c)=>{c.r(m),c.d(m,{default:()=>Ua});var d={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},A={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},p=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],v={CSS:{},springs:{}};function g(Ne,$e,pt){return Math.min(Math.max(Ne,$e),pt)}function y(Ne,$e){return Ne.indexOf($e)>-1}function E(Ne,$e){return Ne.apply(null,$e)}var _=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,S=/^rgb/,x=/^hsl/,C={arr:function(Ne){return Array.isArray(Ne)},obj:function(Ne){return y(Object.prototype.toString.call(Ne),"Object")},pth:function(Ne){return C.obj(Ne)&&Ne.hasOwnProperty("totalLength")},svg:function(Ne){return Ne instanceof SVGElement},inp:function(Ne){return Ne instanceof HTMLInputElement},dom:function(Ne){return Ne.nodeType||C.svg(Ne)},str:function(Ne){return typeof Ne=="string"},fnc:function(Ne){return typeof Ne=="function"},und:function(Ne){return typeof Ne>"u"},hex:function(Ne){return _.test(Ne)},rgb:function(Ne){return S.test(Ne)},hsl:function(Ne){return x.test(Ne)},col:function(Ne){return C.hex(Ne)||C.rgb(Ne)||C.hsl(Ne)},key:function(Ne){return!d.hasOwnProperty(Ne)&&!A.hasOwnProperty(Ne)&&Ne!=="targets"&&Ne!=="keyframes"}},w=/\(([^)]+)\)/;function T(Ne){var $e=w.exec(Ne);return $e?$e[1].split(",").map(function(pt){return parseFloat(pt)}):[]}function O(Ne,$e){var pt=T(Ne),Vt=g(C.und(pt[0])?1:pt[0],.1,100),Tt=g(C.und(pt[1])?100:pt[1],.1,100),jt=g(C.und(pt[2])?10:pt[2],.1,100),mn=g(C.und(pt[3])?0:pt[3],.1,100),Ln=Math.sqrt(Tt/Vt),Dn=jt/(2*Math.sqrt(Tt*Vt)),$t=Dn<1?Ln*Math.sqrt(1-Dn*Dn):0,ni=1,Jn=Dn<1?(Dn*Ln+-mn)/$t:-mn+Ln;function fi(Si){var Mi=$e?$e*Si/1e3:Si;return Dn<1?Mi=Math.exp(-Mi*Dn*Ln)*(ni*Math.cos($t*Mi)+Jn*Math.sin($t*Mi)):Mi=(ni+Jn*Mi)*Math.exp(-Mi*Ln),Si===0||Si===1?Si:1-Mi}function dr(){var Si=v.springs[Ne];if(Si)return Si;for(var Mi=1/6,Ti=0,ki=0;;)if(Ti+=Mi,fi(Ti)===1){if(ki++,ki>=16)break}else ki=0;var Wr=Ti*Mi*1e3;return v.springs[Ne]=Wr,Wr}return $e?fi:dr}function B(Ne,$e){Ne===void 0&&(Ne=1),$e===void 0&&($e=.5);var pt=g(Ne,1,10),Vt=g($e,.1,2);return function(Tt){return Tt===0||Tt===1?Tt:-pt*Math.pow(2,10*(Tt-1))*Math.sin((Tt-1-Vt/(Math.PI*2)*Math.asin(1/pt))*(Math.PI*2)/Vt)}}function P(Ne){return Ne===void 0&&(Ne=10),function($e){return Math.round($e*Ne)*(1/Ne)}}var L=function(){var Ne=11,$e=1/(Ne-1);function pt(ni,Jn){return 1-3*Jn+3*ni}function Vt(ni,Jn){return 3*Jn-6*ni}function Tt(ni){return 3*ni}function jt(ni,Jn,fi){return((pt(Jn,fi)*ni+Vt(Jn,fi))*ni+Tt(Jn))*ni}function mn(ni,Jn,fi){return 3*pt(Jn,fi)*ni*ni+2*Vt(Jn,fi)*ni+Tt(Jn)}function Ln(ni,Jn,fi,dr,Si){var Mi,Ti,ki=0;do Ti=Jn+(fi-Jn)/2,Mi=jt(Ti,dr,Si)-ni,Mi>0?fi=Ti:Jn=Ti;while(Math.abs(Mi)>1e-7&&++ki<10);return Ti}function Dn(ni,Jn,fi,dr){for(var Si=0;Si<4;++Si){var Mi=mn(Jn,fi,dr);if(Mi===0)return Jn;var Ti=jt(Jn,fi,dr)-ni;Jn-=Ti/Mi}return Jn}function $t(ni,Jn,fi,dr){if(!(0<=ni&&ni<=1&&0<=fi&&fi<=1))return;var Si=new Float32Array(Ne);if(ni!==Jn||fi!==dr)for(var Mi=0;Mi<Ne;++Mi)Si[Mi]=jt(Mi*$e,ni,fi);function Ti(ki){for(var Wr=0,Mn=1,_i=Ne-1;Mn!==_i&&Si[Mn]<=ki;++Mn)Wr+=$e;--Mn;var nr=(ki-Si[Mn])/(Si[Mn+1]-Si[Mn]),Ui=Wr+nr*$e,re=mn(Ui,ni,fi);return re>=.001?Dn(ki,Ui,ni,fi):re===0?Ui:Ln(ki,Wr,Wr+$e,ni,fi)}return function(ki){return ni===Jn&&fi===dr||ki===0||ki===1?ki:jt(Ti(ki),Jn,dr)}}return $t}(),N=function(){var Ne=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],$e={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],B],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(mn,Ln){return function(Dn){return 1-B(mn,Ln)(1-Dn)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(mn,Ln){return function(Dn){return Dn<.5?B(mn,Ln)(Dn*2)/2:1-B(mn,Ln)(Dn*-2+2)/2}}]},pt={linear:[.25,.25,.75,.75]};for(var Vt in $e)for(var Tt=0,jt=$e[Vt].length;Tt<jt;Tt++)pt["ease"+Vt+Ne[Tt]]=$e[Vt][Tt];return pt}();function F(Ne,$e){if(C.fnc(Ne))return Ne;var pt=Ne.split("(")[0],Vt=N[pt],Tt=T(Ne);switch(pt){case"spring":return O(Ne,$e);case"cubicBezier":return E(L,Tt);case"steps":return E(P,Tt);default:return C.fnc(Vt)?E(Vt,Tt):E(L,Vt)}}function z(Ne){try{var $e=document.querySelectorAll(Ne);return $e}catch{return}}var G=[];function H(Ne,$e){for(var pt=G,Vt=Ne.length,Tt=arguments.length>=2?arguments[1]:void 0,jt=0;jt<Vt;jt++)if(jt in Ne){var mn=Ne[jt];$e.call(Tt,mn,jt,Ne)&&pt.push(mn)}return G=Ne,G.length=0,pt}function j(Ne,$e){$e||($e=[]);for(var pt=0,Vt=Ne.length;pt<Vt;pt++){var Tt=Ne[pt];Array.isArray(Tt)?j(Tt,$e):$e.push(Tt)}return $e}function q(Ne){return C.arr(Ne)?Ne:(C.str(Ne)&&(Ne=z(Ne)||Ne),Ne instanceof NodeList||Ne instanceof HTMLCollection?[].slice.call(Ne):[Ne])}function Q(Ne,$e){return Ne.some(function(pt){return pt===$e})}function k(Ne){var $e={};for(var pt in Ne)$e[pt]=Ne[pt];return $e}function K(Ne,$e){var pt=k(Ne);for(var Vt in Ne)pt[Vt]=$e.hasOwnProperty(Vt)?$e[Vt]:Ne[Vt];return pt}function W(Ne,$e){var pt=k(Ne);for(var Vt in $e)pt[Vt]=C.und(Ne[Vt])?$e[Vt]:Ne[Vt];return pt}var J=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g;function se(Ne){var $e=J.exec(Ne);return $e?"rgba("+$e[1]+",1)":Ne}var ge=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,fe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function me(Ne){var $e=Ne.replace(ge,function(mn,Ln,Dn,$t){return Ln+Ln+Dn+Dn+$t+$t}),pt=fe.exec($e),Vt=parseInt(pt[1],16),Tt=parseInt(pt[2],16),jt=parseInt(pt[3],16);return"rgba("+Vt+","+Tt+","+jt+",1)"}var xe=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,ye=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g;function we(Ne){var $e=xe.exec(Ne)||ye.exec(Ne),pt=parseInt($e[1],10)/360,Vt=parseInt($e[2],10)/100,Tt=parseInt($e[3],10)/100,jt=$e[4]||1;function mn(fi,dr,Si){return Si<0&&(Si+=1),Si>1&&(Si-=1),Si<.16666666666666666?fi+(dr-fi)*6*Si:Si<.5?dr:Si<.6666666666666666?fi+(dr-fi)*(.6666666666666666-Si)*6:fi}var Ln,Dn,$t;if(Vt==0)Ln=Dn=$t=Tt;else{var ni=Tt<.5?Tt*(1+Vt):Tt+Vt-Tt*Vt,Jn=2*Tt-ni;Ln=mn(Jn,ni,pt+.3333333333333333),Dn=mn(Jn,ni,pt),$t=mn(Jn,ni,pt-.3333333333333333)}return"rgba("+Ln*255+","+Dn*255+","+$t*255+","+jt+")"}function Ee(Ne){if(C.rgb(Ne))return se(Ne);if(C.hex(Ne))return me(Ne);if(C.hsl(Ne))return we(Ne)}var He=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function Ae(Ne){var $e=He.exec(Ne);if($e)return $e[2]}function Ke(Ne){if(y(Ne,"translate")||Ne==="perspective")return"px";if(y(Ne,"rotate")||y(Ne,"skew"))return"deg"}function Ue(Ne,$e){return C.fnc(Ne)?Ne($e.target,$e.id,$e.total):Ne}function ct(Ne,$e){return Ne.getAttribute($e)}function vt(Ne,$e,pt){var Vt=Ae($e);if(Q([pt,"deg","rad","turn"],Vt))return $e;var Tt=v.CSS[$e+pt];if(!C.und(Tt))return Tt;var jt=100,mn=document.createElement(Ne.tagName),Ln=Ne.parentNode&&Ne.parentNode!==document?Ne.parentNode:document.body;Ln.appendChild(mn),mn.style.position="absolute",mn.style.width=jt+pt;var Dn=jt/mn.offsetWidth;Ln.removeChild(mn);var $t=Dn*parseFloat($e);return v.CSS[$e+pt]=$t,$t}function dt(Ne,$e,pt){if($e in Ne.style){var Vt=$e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Tt=Ne.style[$e]||getComputedStyle(Ne).getPropertyValue(Vt)||"0";return pt?vt(Ne,Tt,pt):Tt}}function It(Ne,$e){if(C.dom(Ne)&&!C.inp(Ne)&&(ct(Ne,$e)||C.svg(Ne)&&Ne[$e]))return"attribute";if(C.dom(Ne)&&Q(p,$e))return"transform";if(C.dom(Ne)&&$e!=="transform"&&dt(Ne,$e))return"css";if(Ne[$e]!=null)return"object"}var rt=/(\w+)\(([^)]*)\)/g;function Lt(Ne){if(C.dom(Ne)){for(var $e=Ne.style.transform||"",pt=new Map,Vt;Vt=rt.exec($e);)pt.set(Vt[1],Vt[2]);return pt}}function hn(Ne,$e,pt,Vt){var Tt=y($e,"scale")?1:0+Ke($e),jt=Lt(Ne).get($e)||Tt;return pt&&(pt.transforms.list.set($e,jt),pt.transforms.last=$e),Vt?vt(Ne,jt,Vt):jt}function Et(Ne,$e,pt,Vt){switch(It(Ne,$e)){case"transform":return hn(Ne,$e,Vt,pt);case"css":return dt(Ne,$e,pt);case"attribute":return ct(Ne,$e);default:return Ne[$e]||0}}var xt=/^(\*=|\+=|-=)/;function en(Ne,$e){var pt=xt.exec(Ne);if(!pt)return Ne;var Vt=Ae(Ne)||0,Tt=parseFloat($e),jt=parseFloat(Ne.replace(pt[0],""));switch(pt[0][0]){case"+":return Tt+jt+Vt;case"-":return Tt-jt+Vt;case"*":return Tt*jt+Vt}}var _t=/\s/g;function Kt(Ne,$e){if(C.col(Ne))return Ee(Ne);var pt=Ae(Ne),Vt=pt?Ne.substr(0,Ne.length-pt.length):Ne;return $e&&!_t.test(Ne)?Vt+$e:Vt}function Dt(Ne,$e){return Math.sqrt(Math.pow($e.x-Ne.x,2)+Math.pow($e.y-Ne.y,2))}function Nt(Ne){return Math.PI*2*ct(Ne,"r")}function St(Ne){return ct(Ne,"width")*2+ct(Ne,"height")*2}function pe(Ne){return Dt({x:ct(Ne,"x1"),y:ct(Ne,"y1")},{x:ct(Ne,"x2"),y:ct(Ne,"y2")})}function _e(Ne){for(var $e=Ne.points,pt=0,Vt,Tt=0;Tt<$e.numberOfItems;Tt++){var jt=$e.getItem(Tt);Tt>0&&(pt+=Dt(Vt,jt)),Vt=jt}return pt}function De(Ne){var $e=Ne.points;return _e(Ne)+Dt($e.getItem($e.numberOfItems-1),$e.getItem(0))}function Be(Ne){if(Ne.getTotalLength)return Ne.getTotalLength();switch(Ne.tagName.toLowerCase()){case"circle":return Nt(Ne);case"rect":return St(Ne);case"line":return pe(Ne);case"polyline":return _e(Ne);case"polygon":return De(Ne)}}function Le(Ne){var $e=Be(Ne);return Ne.setAttribute("stroke-dasharray",$e),$e}function ke(Ne){for(var $e=Ne.parentNode;C.svg($e)&&($e=$e.parentNode,!!C.svg($e.parentNode)););return $e}function ce(Ne,$e){var pt=$e||{},Vt=pt.el||ke(Ne),Tt=Vt.getBoundingClientRect(),jt=ct(Vt,"viewBox"),mn=Tt.width,Ln=Tt.height,Dn=pt.viewBox||(jt?jt.split(" "):[0,0,mn,Ln]);return{el:Vt,viewBox:Dn,x:Dn[0]/1,y:Dn[1]/1,w:mn/Dn[2],h:Ln/Dn[3]}}function X(Ne,$e){var pt=C.str(Ne)?z(Ne)[0]:Ne,Vt=$e||100;return function(Tt){return{property:Tt,el:pt,svg:ce(pt),totalLength:Be(pt)*(Vt/100)}}}function Y(Ne,$e){function pt(Ln){Ln===void 0&&(Ln=0);var Dn=$e+Ln>=1?$e+Ln:0;return Ne.el.getPointAtLength(Dn)}var Vt=ce(Ne.el,Ne.svg),Tt=pt(),jt=pt(-1),mn=pt(1);switch(Ne.property){case"x":return(Tt.x-Vt.x)*Vt.w;case"y":return(Tt.y-Vt.y)*Vt.h;case"angle":return Math.atan2(mn.y-jt.y,mn.x-jt.x)*180/Math.PI}}var be=/-?\d*\.?\d+/g;function Te(Ne,$e){var pt=Kt(C.pth(Ne)?Ne.totalLength:Ne,$e)+"";return{original:pt,numbers:pt.match(be)?pt.match(be).map(Number):[0],strings:C.str(Ne)||$e?pt.split(be):[]}}function We(Ne){var $e=Ne?j(C.arr(Ne)?Ne.map(q):q(Ne)):[];return H($e,function(pt,Vt,Tt){return Tt.indexOf(pt)===Vt})}function tt(Ne){var $e=We(Ne);return $e.map(function(pt,Vt){return{target:pt,id:Vt,total:$e.length,transforms:{list:Lt(pt)}}})}var wt=/^spring/;function Zt(Ne,$e){var pt=k($e);if(wt.test(pt.easing)&&(pt.duration=O(pt.easing)),C.arr(Ne)){var Vt=Ne.length,Tt=Vt===2&&!C.obj(Ne[0]);Tt?Ne={value:Ne}:C.fnc($e.duration)||(pt.duration=$e.duration/Vt)}var jt=C.arr(Ne)?Ne:[Ne];return jt.map(function(mn,Ln){var Dn=C.obj(mn)&&!C.pth(mn)?mn:{value:mn};return C.und(Dn.delay)&&(Dn.delay=Ln?0:$e.delay),C.und(Dn.endDelay)&&(Dn.endDelay=Ln===jt.length-1?$e.endDelay:0),Dn}).map(function(mn){return W(mn,pt)})}function qt(Ne){for(var $e=H(j(Ne.map(function(jt){return Object.keys(jt)})),function(jt){return C.key(jt)}).reduce(function(jt,mn){return jt.indexOf(mn)<0&&jt.push(mn),jt},[]),pt={},Vt=function(jt){var mn=$e[jt];pt[mn]=Ne.map(function(Ln){var Dn={};for(var $t in Ln)C.key($t)?$t==mn&&(Dn.value=Ln[$t]):Dn[$t]=Ln[$t];return Dn})},Tt=0;Tt<$e.length;Tt++)Vt(Tt);return pt}function dn(Ne,$e){var pt=[],Vt=$e.keyframes;Vt&&($e=W(qt(Vt),$e));for(var Tt in $e)C.key(Tt)&&pt.push({name:Tt,tweens:Zt($e[Tt],Ne)});return pt}function Qt(Ne,$e){var pt={};for(var Vt in Ne){var Tt=Ue(Ne[Vt],$e);C.arr(Tt)&&(Tt=Tt.map(function(jt){return Ue(jt,$e)}),Tt.length===1&&(Tt=Tt[0])),pt[Vt]=Tt}return pt.duration=parseFloat(pt.duration),pt.delay=parseFloat(pt.delay),pt}function xi(Ne,$e){var pt;return Ne.tweens.map(function(Vt){var Tt=Qt(Vt,$e),jt=Tt.value,mn=C.arr(jt)?jt[1]:jt,Ln=Ae(mn),Dn=Et($e.target,Ne.name,Ln,$e),$t=pt?pt.to.original:Dn,ni=C.arr(jt)?jt[0]:$t,Jn=Ae(ni)||Ae(Dn),fi=Ln||Jn;return C.und(mn)&&(mn=$t),Tt.from=Te(ni,fi),Tt.to=Te(en(mn,ni),fi),Tt.start=pt?pt.end:0,Tt.end=Tt.start+Tt.delay+Tt.duration+Tt.endDelay,Tt.easing=F(Tt.easing,Tt.duration),Tt.isPath=C.pth(jt),Tt.isColor=C.col(Tt.from.original),Tt.isColor&&(Tt.round=1),pt=Tt,Tt})}var Fn={css:function(Ne,$e,pt){return Ne.style[$e]=pt},attribute:function(Ne,$e,pt){return Ne.setAttribute($e,pt)},object:function(Ne,$e,pt){return Ne[$e]=pt},transform:function(Ne,$e,pt,Vt,Tt){if(Vt.list.set($e,pt),$e===Vt.last||Tt){var jt="";Vt.list.forEach(function(mn,Ln){jt+=Ln+"("+mn+") "}),Ne.style.transform=jt}}};function Br(Ne,$e){for(var pt=tt(Ne),Vt=0,Tt=pt.length;Vt<Tt;Vt++){var jt=pt[Vt];for(var mn in $e){var Ln=Ue($e[mn],jt),Dn=jt.target,$t=Ae(Ln),ni=Et(Dn,mn,$t,jt),Jn=$t||Ae(ni),fi=en(Kt(Ln,Jn),ni),dr=It(Dn,mn);Fn[dr](Dn,mn,fi,jt.transforms,!0)}}}function Li(Ne,$e){var pt=It(Ne.target,$e.name);if(pt){var Vt=xi($e,Ne),Tt=Vt[Vt.length-1];return{type:pt,property:$e.name,animatable:Ne,tweens:Vt,duration:Tt.end,delay:Vt[0].delay,endDelay:Tt.endDelay}}}function qi(Ne,$e){return H(j(Ne.map(function(pt){return $e.map(function(Vt){return Li(pt,Vt)})})),function(pt){return!C.und(pt)})}function Fs(Ne,$e){var pt=Ne.length,Vt=function(jt){return jt.timelineOffset?jt.timelineOffset:0},Tt={};return Tt.duration=pt?Math.max.apply(Math,Ne.map(function(jt){return Vt(jt)+jt.duration})):$e.duration,Tt.delay=pt?Math.min.apply(Math,Ne.map(function(jt){return Vt(jt)+jt.delay})):$e.delay,Tt.endDelay=pt?Tt.duration-Math.max.apply(Math,Ne.map(function(jt){return Vt(jt)+jt.duration-jt.endDelay})):$e.endDelay,Tt}var Hr=0;function wa(Ne){var $e=K(d,Ne),pt=K(A,Ne),Vt=dn(pt,Ne),Tt=tt(Ne.targets),jt=qi(Tt,Vt),mn=Fs(jt,pt),Ln=Hr;return Hr++,W($e,{id:Ln,children:[],animatables:Tt,animations:jt,duration:mn.duration,delay:mn.delay,endDelay:mn.endDelay})}var zr=[],ks=[],vs,ys=function(){function Ne(){vs=requestAnimationFrame($e)}function $e(pt){var Vt=zr.length;if(Vt){for(var Tt=0;Tt<Vt;){var jt=zr[Tt];if(!jt.paused)jt.tick(pt);else{var mn=zr.indexOf(jt);mn>-1&&(zr.splice(mn,1),Vt=zr.length)}Tt++}Ne()}else vs=cancelAnimationFrame(vs)}return Ne}();function Pr(){if(document.hidden){for(var Ne=0,$e=zr.length;Ne<$e;Ne++)activeInstance[Ne].pause();ks=zr.slice(0),zr=[]}else for(var pt=0,Vt=ks.length;pt<Vt;pt++)ks[pt].play()}document.addEventListener("visibilitychange",Pr);function pr(Ne){Ne===void 0&&(Ne={});var $e=0,pt=0,Vt=0,Tt,jt=0,mn=null;function Ln(){return window.Promise&&new Promise(function(Mn){return mn=Mn})}var Dn=Ln(),$t=wa(Ne);function ni(){$t.reversed=!$t.reversed;for(var Mn=0,_i=Tt.length;Mn<_i;Mn++)Tt[Mn].reversed=$t.reversed}function Jn(Mn){return $t.reversed?$t.duration-Mn:Mn}function fi(){$e=0,pt=Jn($t.currentTime)*(1/pr.speed)}function dr(Mn,_i){_i&&_i.seek(Mn-_i.timelineOffset)}function Si(Mn){if($t.reversePlayback)for(var nr=jt;nr--;)dr(Mn,Tt[nr]);else for(var _i=0;_i<jt;_i++)dr(Mn,Tt[_i])}function Mi(Mn){for(var _i=0,nr=$t.animations,Ui=nr.length;_i<Ui;){var re=nr[_i],le=re.animatable,ve=re.tweens,Se=ve.length-1,Fe=ve[Se];Se&&(Fe=H(ve,function(Rr){return Mn<Rr.end})[0]||Fe);for(var Ze=g(Mn-Fe.start-Fe.delay,0,Fe.duration)/Fe.duration,ot=isNaN(Ze)?1:Fe.easing(Ze),Yt=Fe.to.strings,Wt=Fe.round,yt=[],Ot=Fe.to.numbers.length,on=void 0,Cn=0;Cn<Ot;Cn++){var Vn=void 0,Qn=Fe.to.numbers[Cn],vi=Fe.from.numbers[Cn]||0;Fe.isPath?Vn=Y(Fe.value,ot*Qn):Vn=vi+ot*(Qn-vi),Wt&&(Fe.isColor&&Cn>2||(Vn=Math.round(Vn*Wt)/Wt)),yt.push(Vn)}var ei=Yt.length;if(!ei)on=yt[0];else{on=Yt[0];for(var hi=0;hi<ei;hi++){Yt[hi];var Ji=Yt[hi+1],Mr=yt[hi];isNaN(Mr)||(Ji?on+=Mr+Ji:on+=Mr+" ")}}Fn[re.type](le.target,re.property,on,le.transforms),re.currentValue=on,_i++}}function Ti(Mn){$t[Mn]&&!$t.passThrough&&$t[Mn]($t)}function ki(){$t.remaining&&$t.remaining!==!0&&$t.remaining--}function Wr(Mn){var _i=$t.duration,nr=$t.delay,Ui=_i-$t.endDelay,re=Jn(Mn);$t.progress=g(re/_i*100,0,100),$t.reversePlayback=re<$t.currentTime,Tt&&Si(re),!$t.began&&$t.currentTime>0&&($t.began=!0,Ti("begin"),Ti("loopBegin")),re<=nr&&$t.currentTime!==0&&Mi(0),(re>=Ui&&$t.currentTime!==_i||!_i)&&Mi(_i),re>nr&&re<Ui?($t.changeBegan||($t.changeBegan=!0,$t.changeCompleted=!1,Ti("changeBegin")),Ti("change"),Mi(re)):$t.changeBegan&&($t.changeCompleted=!0,$t.changeBegan=!1,Ti("changeComplete")),$t.currentTime=g(re,0,_i),$t.began&&Ti("update"),Mn>=_i&&(pt=0,ki(),$t.remaining?($e=Vt,Ti("loopComplete"),Ti("loopBegin"),$t.direction==="alternate"&&ni()):($t.paused=!0,$t.completed||($t.completed=!0,Ti("loopComplete"),Ti("complete"),"Promise"in window&&(mn(),Dn=Ln()))))}return $t.reset=function(){var Mn=$t.direction;$t.passThrough=!1,$t.currentTime=0,$t.progress=0,$t.paused=!0,$t.began=!1,$t.changeBegan=!1,$t.completed=!1,$t.changeCompleted=!1,$t.reversePlayback=!1,$t.reversed=Mn==="reverse",$t.remaining=$t.loop,Tt=$t.children,jt=Tt.length;for(var _i=jt;_i--;)$t.children[_i].reset();($t.reversed&&$t.loop!==!0||Mn==="alternate"&&$t.loop===1)&&$t.remaining++,Mi(0)},$t.set=function(Mn,_i){return Br(Mn,_i),$t},$t.tick=function(Mn){Vt=Mn,$e||($e=Vt),Wr((Vt+(pt-$e))*pr.speed)},$t.seek=function(Mn){Wr(Jn(Mn))},$t.pause=function(){$t.paused=!0,fi()},$t.play=function(){$t.paused&&($t.paused=!1,zr.push($t),fi(),vs||ys())},$t.reverse=function(){ni(),fi()},$t.restart=function(){$t.reset(),$t.play()},$t.finished=Dn,$t.reset(),$t.autoplay&&$t.play(),$t}function us(Ne,$e){for(var pt=$e.length;pt--;)Q(Ne,$e[pt].animatable.target)&&$e.splice(pt,1)}function to(Ne){for(var $e=We(Ne),pt=zr.length;pt--;){var Vt=zr[pt],Tt=Vt.animations,jt=Vt.children;us($e,Tt);for(var mn=jt.length;mn--;){var Ln=jt[mn],Dn=Ln.animations;us($e,Dn),!Dn.length&&!Ln.children.length&&jt.splice(mn,1)}!Tt.length&&!jt.length&&Vt.pause()}}function ca(Ne,$e){$e===void 0&&($e={});var pt=$e.direction||"normal",Vt=$e.easing?F($e.easing):null,Tt=$e.grid,jt=$e.axis,mn=$e.from||0,Ln=mn==="first",Dn=mn==="center",$t=mn==="last",ni=C.arr(Ne),Jn=parseFloat(ni?Ne[0]:Ne),fi=ni?parseFloat(Ne[1]):0,dr=Ae(ni?Ne[1]:Ne)||0,Si=$e.start||0+(ni?Jn:0),Mi=[],Ti=0;return function(ki,Wr,Mn){if(Ln&&(mn=0),Dn&&(mn=(Mn-1)/2),$t&&(mn=Mn-1),!Mi.length){for(var _i=0;_i<Mn;_i++){if(!Tt)Mi.push(Math.abs(mn-_i));else{var nr=Dn?(Tt[0]-1)/2:mn%Tt[0],Ui=Dn?(Tt[1]-1)/2:Math.floor(mn/Tt[0]),re=_i%Tt[0],le=Math.floor(_i/Tt[0]),ve=nr-re,Se=Ui-le,Fe=Math.sqrt(ve*ve+Se*Se);jt==="x"&&(Fe=-ve),jt==="y"&&(Fe=-Se),Mi.push(Fe)}Ti=Math.max.apply(Math,Mi)}Vt&&(Mi=Mi.map(function(ot){return Vt(ot/Ti)*Ti})),pt==="reverse"&&(Mi=Mi.map(function(ot){return jt?ot<0?ot*-1:-ot:Math.abs(Ti-ot)}))}var Ze=ni?(fi-Jn)/Ti:Jn;return Si+Ze*(Math.round(Mi[Wr]*100)/100)+dr}}function Fo(Ne){Ne===void 0&&(Ne={});var $e=pr(Ne);return $e.duration=0,$e.add=function(pt,Vt){var Tt=zr.indexOf($e),jt=$e.children;Tt>-1&&zr.splice(Tt,1);function mn(fi){fi.passThrough=!0}for(var Ln=0;Ln<jt.length;Ln++)mn(jt[Ln]);var Dn=W(pt,K(A,Ne));Dn.targets=Dn.targets||Ne.targets;var $t=$e.duration;Dn.autoplay=!1,Dn.direction=$e.direction,Dn.timelineOffset=C.und(Vt)?$t:en(Vt,$t),mn($e),$e.seek(Dn.timelineOffset);var ni=pr(Dn);mn(ni),jt.push(ni);var Jn=Fs(jt,Ne);return $e.delay=Jn.delay,$e.endDelay=Jn.endDelay,$e.duration=Jn.duration,$e.seek(0),$e.reset(),$e.autoplay&&$e.play(),$e},$e}pr.version="3.0.0",pr.speed=1,pr.running=zr,pr.remove=to,pr.get=Et,pr.set=Br,pr.convertPx=vt,pr.path=X,pr.setDashoffset=Le,pr.stagger=ca,pr.timeline=Fo,pr.easing=F,pr.penner=N,pr.random=function(Ne,$e){return Math.floor(Math.random()*($e-Ne+1))+Ne};const Ua=pr},"./node_modules/three-bmfont-text/index.js":(u,m,c)=>{var d=c("./node_modules/layout-bmfont-text/index.js"),A=c("./node_modules/quad-indices/index.js"),p=c("./node_modules/three-bmfont-text/lib/vertices.js"),v=c("./node_modules/three-bmfont-text/lib/utils.js");u.exports=function(E){return new g(E)};class g extends THREE.BufferGeometry{constructor(E){super(),typeof E=="string"&&(E={text:E}),this._opt=Object.assign({},E),E&&this.update(E)}update(E){if(typeof E=="string"&&(E={text:E}),E=Object.assign({},this._opt,E),!E.font)throw new TypeError("must specify a { font } in options");this.layout=d(E);var _=E.flipY!==!1,S=E.font,x=S.common.scaleW,C=S.common.scaleH,w=this.layout.glyphs.filter(function(L){var N=L.data;return N.width*N.height>0});this.visibleGlyphs=w;var T=p.positions(w),O=p.uvs(w,x,C,_),B=A([],{clockwise:!0,type:"uint16",count:w.length});if(this.setIndex(B),this.setAttribute("position",new THREE.BufferAttribute(T,2)),this.setAttribute("uv",new THREE.BufferAttribute(O,2)),!E.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(E.multipage){var P=p.pages(w);this.setAttribute("page",new THREE.BufferAttribute(P,1))}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var E=this.attributes.position.array,_=this.attributes.position.itemSize;if(!E||!_||E.length<2){this.boundingSphere.radius=0,this.boundingSphere.center.set(0,0,0);return}v.computeSphere(E,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var E=this.boundingBox,_=this.attributes.position.array,S=this.attributes.position.itemSize;if(!_||!S||_.length<2){E.makeEmpty();return}v.computeBox(_,E)}}},"./node_modules/three-bmfont-text/lib/utils.js":u=>{var m=2,c={min:[0,0],max:[0,0]};function d(A){var p=A.length/m;c.min[0]=A[0],c.min[1]=A[1],c.max[0]=A[0],c.max[1]=A[1];for(var v=0;v<p;v++){var g=A[v*m+0],y=A[v*m+1];c.min[0]=Math.min(g,c.min[0]),c.min[1]=Math.min(y,c.min[1]),c.max[0]=Math.max(g,c.max[0]),c.max[1]=Math.max(y,c.max[1])}}u.exports.computeBox=function(A,p){d(A),p.min.set(c.min[0],c.min[1],0),p.max.set(c.max[0],c.max[1],0)},u.exports.computeSphere=function(A,p){d(A);var v=c.min[0],g=c.min[1],y=c.max[0],E=c.max[1],_=y-v,S=E-g,x=Math.sqrt(_*_+S*S);p.center.set(v+_/2,g+S/2,0),p.radius=x/2}},"./node_modules/three-bmfont-text/lib/vertices.js":u=>{u.exports.pages=function(c){var d=new Float32Array(c.length*4*1),A=0;return c.forEach(function(p){var v=p.data.page||0;d[A++]=v,d[A++]=v,d[A++]=v,d[A++]=v}),d},u.exports.uvs=function(c,d,A,p){var v=new Float32Array(c.length*4*2),g=0;return c.forEach(function(y){var E=y.data,_=E.x+E.width,S=E.y+E.height,x=E.x/d,C=E.y/A,w=_/d,T=S/A;p&&(C=(A-E.y)/A,T=(A-S)/A),v[g++]=x,v[g++]=C,v[g++]=x,v[g++]=T,v[g++]=w,v[g++]=T,v[g++]=w,v[g++]=C}),v},u.exports.positions=function(c){var d=new Float32Array(c.length*4*2),A=0;return c.forEach(function(p){var v=p.data,g=p.position[0]+v.xoffset,y=p.position[1]+v.yoffset,E=v.width,_=v.height;d[A++]=g,d[A++]=y,d[A++]=g,d[A++]=y+_,d[A++]=g+E,d[A++]=y+_,d[A++]=g+E,d[A++]=y}),d}},"./node_modules/webvr-polyfill/build/webvr-polyfill.js":function(u,m,c){/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(d,A){u.exports=A()})(this,function(){var d=typeof window<"u"?window:typeof c.g<"u"?c.g:typeof self<"u"?self:{};function A(B){return B&&B.__esModule&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B}function p(B,P){return P={exports:{}},B(P,P.exports),P.exports}var v=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},g=function(P,L){for(var N=0,F=P.length;N<F;N++)L[N]=P[N]},y=function(P,L){for(var N in L)L.hasOwnProperty(N)&&(P[N]=L[N]);return P},E=p(function(B,P){/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(L,N){B.exports=N()})(d,function(){var L=function(re,le){if(!(re instanceof le))throw new TypeError("Cannot call a class as a function")},N=function(){function re(le,ve){for(var Se=0;Se<ve.length;Se++){var Fe=ve[Se];Fe.enumerable=Fe.enumerable||!1,Fe.configurable=!0,"value"in Fe&&(Fe.writable=!0),Object.defineProperty(le,Fe.key,Fe)}}return function(le,ve,Se){return ve&&re(le.prototype,ve),Se&&re(le,Se),le}}(),F=function(){function re(le,ve){var Se=[],Fe=!0,Ze=!1,ot=void 0;try{for(var Yt=le[Symbol.iterator](),Wt;!(Fe=(Wt=Yt.next()).done)&&(Se.push(Wt.value),!(ve&&Se.length===ve));Fe=!0);}catch(yt){Ze=!0,ot=yt}finally{try{!Fe&&Yt.return&&Yt.return()}finally{if(Ze)throw ot}}return Se}return function(le,ve){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return re(le,ve);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),z=.001,G=1,H=function(le,ve){return"data:"+le+","+encodeURIComponent(ve)},j=function(le,ve,Se){return le+(ve-le)*Se},q=function(){var re=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return re}}(),Q=function(){var re=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return re}}(),k=function(){var re=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return re}}(),K=function(){var re=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return re}}(),W=function(){var re=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),le=re?parseInt(re[1],10):null;return function(){return le}}(),J=function(){var re=!1;return re=q()&&k()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return re}}(),se=function(){var re=!1;if(W()===65){var le=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(le){var ve=le[1].split("."),Se=F(ve,4);Se[0],Se[1];var Fe=Se[2],Ze=Se[3];re=parseInt(Fe,10)===3325&&parseInt(Ze,10)<148}}return function(){return re}}(),ge=function(){var re=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return re}}(),fe=function(){var le=window.orientation==90||window.orientation==-90;return ge()?!le:le},me=function(le){return!(isNaN(le)||le<=z||le>G)},xe=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},ye=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},we=function(le){if(Q())return!1;if(le.requestFullscreen)le.requestFullscreen();else if(le.webkitRequestFullscreen)le.webkitRequestFullscreen();else if(le.mozRequestFullScreen)le.mozRequestFullScreen();else if(le.msRequestFullscreen)le.msRequestFullscreen();else return!1;return!0},Ee=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},He=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},Ae=function(le,ve,Se,Fe){var Ze=le.createShader(le.VERTEX_SHADER);le.shaderSource(Ze,ve),le.compileShader(Ze);var ot=le.createShader(le.FRAGMENT_SHADER);le.shaderSource(ot,Se),le.compileShader(ot);var Yt=le.createProgram();le.attachShader(Yt,Ze),le.attachShader(Yt,ot);for(var Wt in Fe)le.bindAttribLocation(Yt,Fe[Wt],Wt);return le.linkProgram(Yt),le.deleteShader(Ze),le.deleteShader(ot),Yt},Ke=function(le,ve){for(var Se={},Fe=le.getProgramParameter(ve,le.ACTIVE_UNIFORMS),Ze="",ot=0;ot<Fe;ot++){var Yt=le.getActiveUniform(ve,ot);Ze=Yt.name.replace("[0]",""),Se[Ze]=le.getUniformLocation(ve,Ze)}return Se},Ue=function(le,ve,Se,Fe,Ze,ot,Yt){var Wt=1/(ve-Se),yt=1/(Fe-Ze),Ot=1/(ot-Yt);return le[0]=-2*Wt,le[1]=0,le[2]=0,le[3]=0,le[4]=0,le[5]=-2*yt,le[6]=0,le[7]=0,le[8]=0,le[9]=0,le[10]=2*Ot,le[11]=0,le[12]=(ve+Se)*Wt,le[13]=(Ze+Fe)*yt,le[14]=(Yt+ot)*Ot,le[15]=1,le},ct=function(){var le=!1;return function(ve){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(ve)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(ve.substr(0,4)))&&(le=!0)}(navigator.userAgent||navigator.vendor||window.opera),le},vt=function(le,ve){for(var Se in ve)ve.hasOwnProperty(Se)&&(le[Se]=ve[Se]);return le},dt=function(le){if(q()){var ve=le.style.width,Se=le.style.height;le.style.width=parseInt(ve)+1+"px",le.style.height=parseInt(Se)+"px",setTimeout(function(){le.style.width=ve,le.style.height=Se},100)}window.canvas=le},It=function(){var re=Math.PI/180,le=Math.PI*.25;function ve(yt,Ot,on,Cn){var Vn=Math.tan(Ot?Ot.upDegrees*re:le),Qn=Math.tan(Ot?Ot.downDegrees*re:le),vi=Math.tan(Ot?Ot.leftDegrees*re:le),ei=Math.tan(Ot?Ot.rightDegrees*re:le),hi=2/(vi+ei),Ji=2/(Vn+Qn);return yt[0]=hi,yt[1]=0,yt[2]=0,yt[3]=0,yt[4]=0,yt[5]=Ji,yt[6]=0,yt[7]=0,yt[8]=-((vi-ei)*hi*.5),yt[9]=(Vn-Qn)*Ji*.5,yt[10]=Cn/(on-Cn),yt[11]=-1,yt[12]=0,yt[13]=0,yt[14]=Cn*on/(on-Cn),yt[15]=0,yt}function Se(yt,Ot,on){var Cn=Ot[0],Vn=Ot[1],Qn=Ot[2],vi=Ot[3],ei=Cn+Cn,hi=Vn+Vn,Ji=Qn+Qn,Mr=Cn*ei,Rr=Cn*hi,at=Cn*Ji,mi=Vn*hi,et=Vn*Ji,yi=Qn*Ji,Rs=vi*ei,ds=vi*hi,qs=vi*Ji;return yt[0]=1-(mi+yi),yt[1]=Rr+qs,yt[2]=at-ds,yt[3]=0,yt[4]=Rr-qs,yt[5]=1-(Mr+yi),yt[6]=et+Rs,yt[7]=0,yt[8]=at+ds,yt[9]=et-Rs,yt[10]=1-(Mr+mi),yt[11]=0,yt[12]=on[0],yt[13]=on[1],yt[14]=on[2],yt[15]=1,yt}function Fe(yt,Ot,on){var Cn=on[0],Vn=on[1],Qn=on[2],vi,ei,hi,Ji,Mr,Rr,at,mi,et,yi,Rs,ds;return Ot===yt?(yt[12]=Ot[0]*Cn+Ot[4]*Vn+Ot[8]*Qn+Ot[12],yt[13]=Ot[1]*Cn+Ot[5]*Vn+Ot[9]*Qn+Ot[13],yt[14]=Ot[2]*Cn+Ot[6]*Vn+Ot[10]*Qn+Ot[14],yt[15]=Ot[3]*Cn+Ot[7]*Vn+Ot[11]*Qn+Ot[15]):(vi=Ot[0],ei=Ot[1],hi=Ot[2],Ji=Ot[3],Mr=Ot[4],Rr=Ot[5],at=Ot[6],mi=Ot[7],et=Ot[8],yi=Ot[9],Rs=Ot[10],ds=Ot[11],yt[0]=vi,yt[1]=ei,yt[2]=hi,yt[3]=Ji,yt[4]=Mr,yt[5]=Rr,yt[6]=at,yt[7]=mi,yt[8]=et,yt[9]=yi,yt[10]=Rs,yt[11]=ds,yt[12]=vi*Cn+Mr*Vn+et*Qn+Ot[12],yt[13]=ei*Cn+Rr*Vn+yi*Qn+Ot[13],yt[14]=hi*Cn+at*Vn+Rs*Qn+Ot[14],yt[15]=Ji*Cn+mi*Vn+ds*Qn+Ot[15]),yt}function Ze(yt,Ot){var on=Ot[0],Cn=Ot[1],Vn=Ot[2],Qn=Ot[3],vi=Ot[4],ei=Ot[5],hi=Ot[6],Ji=Ot[7],Mr=Ot[8],Rr=Ot[9],at=Ot[10],mi=Ot[11],et=Ot[12],yi=Ot[13],Rs=Ot[14],ds=Ot[15],qs=on*ei-Cn*vi,no=on*hi-Vn*vi,yo=on*Ji-Qn*vi,ko=Cn*hi-Vn*ei,Nl=Cn*Ji-Qn*ei,Fl=Vn*Ji-Qn*hi,kl=Mr*yi-Rr*et,al=Mr*Rs-at*et,ol=Mr*ds-mi*et,pa=Rr*Rs-at*yi,ll=Rr*ds-mi*yi,ua=at*ds-mi*Rs,gr=qs*ua-no*ll+yo*pa+ko*ol-Nl*al+Fl*kl;return gr?(gr=1/gr,yt[0]=(ei*ua-hi*ll+Ji*pa)*gr,yt[1]=(Vn*ll-Cn*ua-Qn*pa)*gr,yt[2]=(yi*Fl-Rs*Nl+ds*ko)*gr,yt[3]=(at*Nl-Rr*Fl-mi*ko)*gr,yt[4]=(hi*ol-vi*ua-Ji*al)*gr,yt[5]=(on*ua-Vn*ol+Qn*al)*gr,yt[6]=(Rs*yo-et*Fl-ds*no)*gr,yt[7]=(Mr*Fl-at*yo+mi*no)*gr,yt[8]=(vi*ll-ei*ol+Ji*kl)*gr,yt[9]=(Cn*ol-on*ll-Qn*kl)*gr,yt[10]=(et*Nl-yi*yo+ds*qs)*gr,yt[11]=(Rr*yo-Mr*Nl-mi*qs)*gr,yt[12]=(ei*al-vi*pa-hi*kl)*gr,yt[13]=(on*pa-Cn*al+Vn*kl)*gr,yt[14]=(yi*no-et*ko-Rs*qs)*gr,yt[15]=(Mr*ko-Rr*no+at*qs)*gr,yt):null}var ot=new Float32Array([0,0,0,1]),Yt=new Float32Array([0,0,0]);function Wt(yt,Ot,on,Cn,Vn,Qn){ve(yt,Cn||null,Qn.depthNear,Qn.depthFar);var vi=on.orientation||ot,ei=on.position||Yt;Se(Ot,vi,ei),Vn&&Fe(Ot,Ot,Vn),Ze(Ot,Ot)}return function(yt,Ot,on){return!yt||!Ot?!1:(yt.pose=Ot,yt.timestamp=Ot.timestamp,Wt(yt.leftProjectionMatrix,yt.leftViewMatrix,Ot,on._getFieldOfView("left"),on._getEyeOffset("left"),on),Wt(yt.rightProjectionMatrix,yt.rightViewMatrix,Ot,on._getFieldOfView("right"),on._getEyeOffset("right"),on),!0)}}(),rt=function(){var le=window.self!==window.top,ve=Lt(document.referrer),Se=Lt(window.location.href);return le&&ve!==Se},Lt=function(le){var ve,Se=le.indexOf("://");Se!==-1?ve=Se+3:ve=0;var Fe=le.indexOf("/",ve);return Fe===-1&&(Fe=le.length),le.substring(0,Fe)},hn=function(le){if(le.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var ve=2*Math.acos(le.w);return ve},Et=function(){var re={};return function(le,ve){re[le]===void 0&&(console.warn("webvr-polyfill: "+ve),re[le]=!0)}}(),xt=function(le,ve){var Se=ve?"Please use "+ve+" instead.":"";Et(le,le+" has been deprecated. This may not work on native WebVR displays. "+Se)};function en(re,le,ve){if(!le){ve(re);return}for(var Se=[],Fe=null,Ze=0;Ze<le.length;++Ze){var ot=le[Ze];switch(ot){case re.TEXTURE_BINDING_2D:case re.TEXTURE_BINDING_CUBE_MAP:var Yt=le[++Ze];if(Yt<re.TEXTURE0||Yt>re.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),Se.push(null,null);break}Fe||(Fe=re.getParameter(re.ACTIVE_TEXTURE)),re.activeTexture(Yt),Se.push(re.getParameter(ot),null);break;case re.ACTIVE_TEXTURE:Fe=re.getParameter(re.ACTIVE_TEXTURE),Se.push(null);break;default:Se.push(re.getParameter(ot));break}}ve(re);for(var Ze=0;Ze<le.length;++Ze){var ot=le[Ze],Wt=Se[Ze];switch(ot){case re.ACTIVE_TEXTURE:break;case re.ARRAY_BUFFER_BINDING:re.bindBuffer(re.ARRAY_BUFFER,Wt);break;case re.COLOR_CLEAR_VALUE:re.clearColor(Wt[0],Wt[1],Wt[2],Wt[3]);break;case re.COLOR_WRITEMASK:re.colorMask(Wt[0],Wt[1],Wt[2],Wt[3]);break;case re.CURRENT_PROGRAM:re.useProgram(Wt);break;case re.ELEMENT_ARRAY_BUFFER_BINDING:re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,Wt);break;case re.FRAMEBUFFER_BINDING:re.bindFramebuffer(re.FRAMEBUFFER,Wt);break;case re.RENDERBUFFER_BINDING:re.bindRenderbuffer(re.RENDERBUFFER,Wt);break;case re.TEXTURE_BINDING_2D:var Yt=le[++Ze];if(Yt<re.TEXTURE0||Yt>re.TEXTURE31)break;re.activeTexture(Yt),re.bindTexture(re.TEXTURE_2D,Wt);break;case re.TEXTURE_BINDING_CUBE_MAP:var Yt=le[++Ze];if(Yt<re.TEXTURE0||Yt>re.TEXTURE31)break;re.activeTexture(Yt),re.bindTexture(re.TEXTURE_CUBE_MAP,Wt);break;case re.VIEWPORT:re.viewport(Wt[0],Wt[1],Wt[2],Wt[3]);break;case re.BLEND:case re.CULL_FACE:case re.DEPTH_TEST:case re.SCISSOR_TEST:case re.STENCIL_TEST:Wt?re.enable(ot):re.disable(ot);break;default:console.log("No GL restore behavior for 0x"+ot.toString(16));break}Fe&&re.activeTexture(Fe)}}var _t=en,Kt=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),Dt=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function Nt(re,le,ve,Se){this.gl=re,this.cardboardUI=le,this.bufferScale=ve,this.dirtySubmitFrameBindings=Se,this.ctxAttribs=re.getContextAttributes(),this.instanceExt=re.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=re.drawingBufferWidth,this.bufferHeight=re.drawingBufferHeight,this.realBindFramebuffer=re.bindFramebuffer,this.realEnable=re.enable,this.realDisable=re.disable,this.realColorMask=re.colorMask,this.realClearColor=re.clearColor,this.realViewport=re.viewport,q()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(re.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(re.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=Ae(re,Kt,Dt,this.attribs),this.uniforms=Ke(re,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=re.createBuffer(),this.indexBuffer=re.createBuffer(),this.indexCount=0,this.renderTarget=re.createTexture(),this.framebuffer=re.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=re.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=re.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=re.createRenderbuffer()),this.patch(),this.onResize()}Nt.prototype.destroy=function(){var re=this.gl;this.unpatch(),re.deleteProgram(this.program),re.deleteBuffer(this.vertexBuffer),re.deleteBuffer(this.indexBuffer),re.deleteTexture(this.renderTarget),re.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&re.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&re.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&re.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},Nt.prototype.onResize=function(){var re=this.gl,le=this,ve=[re.RENDERBUFFER_BINDING,re.TEXTURE_BINDING_2D,re.TEXTURE0];_t(re,ve,function(Se){le.realBindFramebuffer.call(Se,Se.FRAMEBUFFER,null),le.scissorTest&&le.realDisable.call(Se,Se.SCISSOR_TEST),le.realColorMask.call(Se,!0,!0,!0,!0),le.realViewport.call(Se,0,0,Se.drawingBufferWidth,Se.drawingBufferHeight),le.realClearColor.call(Se,0,0,0,1),Se.clear(Se.COLOR_BUFFER_BIT),le.realBindFramebuffer.call(Se,Se.FRAMEBUFFER,le.framebuffer),Se.bindTexture(Se.TEXTURE_2D,le.renderTarget),Se.texImage2D(Se.TEXTURE_2D,0,le.ctxAttribs.alpha?Se.RGBA:Se.RGB,le.bufferWidth,le.bufferHeight,0,le.ctxAttribs.alpha?Se.RGBA:Se.RGB,Se.UNSIGNED_BYTE,null),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MAG_FILTER,Se.LINEAR),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MIN_FILTER,Se.LINEAR),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_S,Se.CLAMP_TO_EDGE),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_T,Se.CLAMP_TO_EDGE),Se.framebufferTexture2D(Se.FRAMEBUFFER,Se.COLOR_ATTACHMENT0,Se.TEXTURE_2D,le.renderTarget,0),le.ctxAttribs.depth&&le.ctxAttribs.stencil?(Se.bindRenderbuffer(Se.RENDERBUFFER,le.depthStencilBuffer),Se.renderbufferStorage(Se.RENDERBUFFER,Se.DEPTH_STENCIL,le.bufferWidth,le.bufferHeight),Se.framebufferRenderbuffer(Se.FRAMEBUFFER,Se.DEPTH_STENCIL_ATTACHMENT,Se.RENDERBUFFER,le.depthStencilBuffer)):le.ctxAttribs.depth?(Se.bindRenderbuffer(Se.RENDERBUFFER,le.depthBuffer),Se.renderbufferStorage(Se.RENDERBUFFER,Se.DEPTH_COMPONENT16,le.bufferWidth,le.bufferHeight),Se.framebufferRenderbuffer(Se.FRAMEBUFFER,Se.DEPTH_ATTACHMENT,Se.RENDERBUFFER,le.depthBuffer)):le.ctxAttribs.stencil&&(Se.bindRenderbuffer(Se.RENDERBUFFER,le.stencilBuffer),Se.renderbufferStorage(Se.RENDERBUFFER,Se.STENCIL_INDEX8,le.bufferWidth,le.bufferHeight),Se.framebufferRenderbuffer(Se.FRAMEBUFFER,Se.STENCIL_ATTACHMENT,Se.RENDERBUFFER,le.stencilBuffer)),!Se.checkFramebufferStatus(Se.FRAMEBUFFER)===Se.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),le.realBindFramebuffer.call(Se,Se.FRAMEBUFFER,le.lastBoundFramebuffer),le.scissorTest&&le.realEnable.call(Se,Se.SCISSOR_TEST),le.realColorMask.apply(Se,le.colorMask),le.realViewport.apply(Se,le.viewport),le.realClearColor.apply(Se,le.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},Nt.prototype.patch=function(){if(!this.isPatched){var re=this,le=this.gl.canvas,ve=this.gl;q()||(le.width=xe()*this.bufferScale,le.height=ye()*this.bufferScale,Object.defineProperty(le,"width",{configurable:!0,enumerable:!0,get:function(){return re.bufferWidth},set:function(Fe){re.bufferWidth=Fe,re.realCanvasWidth.set.call(le,Fe),re.onResize()}}),Object.defineProperty(le,"height",{configurable:!0,enumerable:!0,get:function(){return re.bufferHeight},set:function(Fe){re.bufferHeight=Fe,re.realCanvasHeight.set.call(le,Fe),re.onResize()}})),this.lastBoundFramebuffer=ve.getParameter(ve.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(ve.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(Se,Fe){re.lastBoundFramebuffer=Fe||re.framebuffer,re.realBindFramebuffer.call(ve,Se,re.lastBoundFramebuffer)},this.cullFace=ve.getParameter(ve.CULL_FACE),this.depthTest=ve.getParameter(ve.DEPTH_TEST),this.blend=ve.getParameter(ve.BLEND),this.scissorTest=ve.getParameter(ve.SCISSOR_TEST),this.stencilTest=ve.getParameter(ve.STENCIL_TEST),ve.enable=function(Se){switch(Se){case ve.CULL_FACE:re.cullFace=!0;break;case ve.DEPTH_TEST:re.depthTest=!0;break;case ve.BLEND:re.blend=!0;break;case ve.SCISSOR_TEST:re.scissorTest=!0;break;case ve.STENCIL_TEST:re.stencilTest=!0;break}re.realEnable.call(ve,Se)},ve.disable=function(Se){switch(Se){case ve.CULL_FACE:re.cullFace=!1;break;case ve.DEPTH_TEST:re.depthTest=!1;break;case ve.BLEND:re.blend=!1;break;case ve.SCISSOR_TEST:re.scissorTest=!1;break;case ve.STENCIL_TEST:re.stencilTest=!1;break}re.realDisable.call(ve,Se)},this.colorMask=ve.getParameter(ve.COLOR_WRITEMASK),ve.colorMask=function(Se,Fe,Ze,ot){re.colorMask[0]=Se,re.colorMask[1]=Fe,re.colorMask[2]=Ze,re.colorMask[3]=ot,re.realColorMask.call(ve,Se,Fe,Ze,ot)},this.clearColor=ve.getParameter(ve.COLOR_CLEAR_VALUE),ve.clearColor=function(Se,Fe,Ze,ot){re.clearColor[0]=Se,re.clearColor[1]=Fe,re.clearColor[2]=Ze,re.clearColor[3]=ot,re.realClearColor.call(ve,Se,Fe,Ze,ot)},this.viewport=ve.getParameter(ve.VIEWPORT),ve.viewport=function(Se,Fe,Ze,ot){re.viewport[0]=Se,re.viewport[1]=Fe,re.viewport[2]=Ze,re.viewport[3]=ot,re.realViewport.call(ve,Se,Fe,Ze,ot)},this.isPatched=!0,dt(le)}},Nt.prototype.unpatch=function(){if(this.isPatched){var re=this.gl,le=this.gl.canvas;q()||(Object.defineProperty(le,"width",this.realCanvasWidth),Object.defineProperty(le,"height",this.realCanvasHeight)),le.width=this.bufferWidth,le.height=this.bufferHeight,re.bindFramebuffer=this.realBindFramebuffer,re.enable=this.realEnable,re.disable=this.realDisable,re.colorMask=this.realColorMask,re.clearColor=this.realClearColor,re.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&re.bindFramebuffer(re.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){dt(le)},1)}},Nt.prototype.setTextureBounds=function(re,le){re||(re=[0,0,.5,1]),le||(le=[.5,0,.5,1]),this.viewportOffsetScale[0]=re[0],this.viewportOffsetScale[1]=re[1],this.viewportOffsetScale[2]=re[2],this.viewportOffsetScale[3]=re[3],this.viewportOffsetScale[4]=le[0],this.viewportOffsetScale[5]=le[1],this.viewportOffsetScale[6]=le[2],this.viewportOffsetScale[7]=le[3]},Nt.prototype.submitFrame=function(){var re=this.gl,le=this,ve=[];if(this.dirtySubmitFrameBindings||ve.push(re.CURRENT_PROGRAM,re.ARRAY_BUFFER_BINDING,re.ELEMENT_ARRAY_BUFFER_BINDING,re.TEXTURE_BINDING_2D,re.TEXTURE0),_t(re,ve,function(Fe){le.realBindFramebuffer.call(Fe,Fe.FRAMEBUFFER,null);var Ze=0,ot=0;le.instanceExt&&(Ze=Fe.getVertexAttrib(le.attribs.position,le.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),ot=Fe.getVertexAttrib(le.attribs.texCoord,le.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),le.cullFace&&le.realDisable.call(Fe,Fe.CULL_FACE),le.depthTest&&le.realDisable.call(Fe,Fe.DEPTH_TEST),le.blend&&le.realDisable.call(Fe,Fe.BLEND),le.scissorTest&&le.realDisable.call(Fe,Fe.SCISSOR_TEST),le.stencilTest&&le.realDisable.call(Fe,Fe.STENCIL_TEST),le.realColorMask.call(Fe,!0,!0,!0,!0),le.realViewport.call(Fe,0,0,Fe.drawingBufferWidth,Fe.drawingBufferHeight),(le.ctxAttribs.alpha||q())&&(le.realClearColor.call(Fe,0,0,0,1),Fe.clear(Fe.COLOR_BUFFER_BIT)),Fe.useProgram(le.program),Fe.bindBuffer(Fe.ELEMENT_ARRAY_BUFFER,le.indexBuffer),Fe.bindBuffer(Fe.ARRAY_BUFFER,le.vertexBuffer),Fe.enableVertexAttribArray(le.attribs.position),Fe.enableVertexAttribArray(le.attribs.texCoord),Fe.vertexAttribPointer(le.attribs.position,2,Fe.FLOAT,!1,20,0),Fe.vertexAttribPointer(le.attribs.texCoord,3,Fe.FLOAT,!1,20,8),le.instanceExt&&(Ze!=0&&le.instanceExt.vertexAttribDivisorANGLE(le.attribs.position,0),ot!=0&&le.instanceExt.vertexAttribDivisorANGLE(le.attribs.texCoord,0)),Fe.activeTexture(Fe.TEXTURE0),Fe.uniform1i(le.uniforms.diffuse,0),Fe.bindTexture(Fe.TEXTURE_2D,le.renderTarget),Fe.uniform4fv(le.uniforms.viewportOffsetScale,le.viewportOffsetScale),Fe.drawElements(Fe.TRIANGLES,le.indexCount,Fe.UNSIGNED_SHORT,0),le.cardboardUI&&le.cardboardUI.renderNoState(),le.realBindFramebuffer.call(le.gl,Fe.FRAMEBUFFER,le.framebuffer),le.ctxAttribs.preserveDrawingBuffer||(le.realClearColor.call(Fe,0,0,0,0),Fe.clear(Fe.COLOR_BUFFER_BIT)),le.dirtySubmitFrameBindings||le.realBindFramebuffer.call(Fe,Fe.FRAMEBUFFER,le.lastBoundFramebuffer),le.cullFace&&le.realEnable.call(Fe,Fe.CULL_FACE),le.depthTest&&le.realEnable.call(Fe,Fe.DEPTH_TEST),le.blend&&le.realEnable.call(Fe,Fe.BLEND),le.scissorTest&&le.realEnable.call(Fe,Fe.SCISSOR_TEST),le.stencilTest&&le.realEnable.call(Fe,Fe.STENCIL_TEST),le.realColorMask.apply(Fe,le.colorMask),le.realViewport.apply(Fe,le.viewport),(le.ctxAttribs.alpha||!le.ctxAttribs.preserveDrawingBuffer)&&le.realClearColor.apply(Fe,le.clearColor),le.instanceExt&&(Ze!=0&&le.instanceExt.vertexAttribDivisorANGLE(le.attribs.position,Ze),ot!=0&&le.instanceExt.vertexAttribDivisorANGLE(le.attribs.texCoord,ot))}),q()){var Se=re.canvas;(Se.width!=le.bufferWidth||Se.height!=le.bufferHeight)&&(le.bufferWidth=Se.width,le.bufferHeight=Se.height,le.onResize())}},Nt.prototype.updateDeviceInfo=function(re){var le=this.gl,ve=this,Se=[le.ARRAY_BUFFER_BINDING,le.ELEMENT_ARRAY_BUFFER_BINDING];_t(le,Se,function(Fe){var Ze=ve.computeMeshVertices_(ve.meshWidth,ve.meshHeight,re);if(Fe.bindBuffer(Fe.ARRAY_BUFFER,ve.vertexBuffer),Fe.bufferData(Fe.ARRAY_BUFFER,Ze,Fe.STATIC_DRAW),!ve.indexCount){var ot=ve.computeMeshIndices_(ve.meshWidth,ve.meshHeight);Fe.bindBuffer(Fe.ELEMENT_ARRAY_BUFFER,ve.indexBuffer),Fe.bufferData(Fe.ELEMENT_ARRAY_BUFFER,ot,Fe.STATIC_DRAW),ve.indexCount=ot.length}})},Nt.prototype.computeMeshVertices_=function(re,le,ve){for(var Se=new Float32Array(2*re*le*5),Fe=ve.getLeftEyeVisibleTanAngles(),Ze=ve.getLeftEyeNoLensTanAngles(),ot=ve.getLeftEyeVisibleScreenRect(Ze),Yt=0,Wt=0;Wt<2;Wt++){for(var yt=0;yt<le;yt++)for(var Ot=0;Ot<re;Ot++,Yt++){var on=Ot/(re-1),Cn=yt/(le-1),Vn=on,Qn=Cn,vi=j(Fe[0],Fe[2],on),ei=j(Fe[3],Fe[1],Cn),hi=Math.sqrt(vi*vi+ei*ei),Ji=ve.distortion.distortInverse(hi),Mr=vi*Ji/hi,Rr=ei*Ji/hi;on=(Mr-Ze[0])/(Ze[2]-Ze[0]),Cn=(Rr-Ze[3])/(Ze[1]-Ze[3]),on=(ot.x+on*ot.width-.5)*2,Cn=(ot.y+Cn*ot.height-.5)*2,Se[Yt*5+0]=on,Se[Yt*5+1]=Cn,Se[Yt*5+2]=Vn,Se[Yt*5+3]=Qn,Se[Yt*5+4]=Wt}var at=Fe[2]-Fe[0];Fe[0]=-(at+Fe[0]),Fe[2]=at-Fe[2],at=Ze[2]-Ze[0],Ze[0]=-(at+Ze[0]),Ze[2]=at-Ze[2],ot.x=1-(ot.x+ot.width)}return Se},Nt.prototype.computeMeshIndices_=function(re,le){for(var ve=new Uint16Array(2*(re-1)*(le-1)*6),Se=re/2,Fe=le/2,Ze=0,ot=0,Yt=0;Yt<2;Yt++)for(var Wt=0;Wt<le;Wt++)for(var yt=0;yt<re;yt++,Ze++)yt==0||Wt==0||(yt<=Se==Wt<=Fe?(ve[ot++]=Ze,ve[ot++]=Ze-re-1,ve[ot++]=Ze-re,ve[ot++]=Ze-re-1,ve[ot++]=Ze,ve[ot++]=Ze-1):(ve[ot++]=Ze-1,ve[ot++]=Ze-re,ve[ot++]=Ze,ve[ot++]=Ze-re,ve[ot++]=Ze-1,ve[ot++]=Ze-re-1));return ve},Nt.prototype.getOwnPropertyDescriptor_=function(re,le){var ve=Object.getOwnPropertyDescriptor(re,le);return(ve.get===void 0||ve.set===void 0)&&(ve.configurable=!0,ve.enumerable=!0,ve.get=function(){return this.getAttribute(le)},ve.set=function(Se){this.setAttribute(le,Se)}),ve};var St=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),pe=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),_e=Math.PI/180,De=60,Be=12,Le=20,ke=1,ce=.75,X=.3125,Y=4,be=28,Te=1.5;function We(re){this.gl=re,this.attribs={position:0},this.program=Ae(re,St,pe,this.attribs),this.uniforms=Ke(re,this.program),this.vertexBuffer=re.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}We.prototype.destroy=function(){var re=this.gl;this.listener&&re.canvas.removeEventListener("click",this.listener,!1),re.deleteProgram(this.program),re.deleteBuffer(this.vertexBuffer)},We.prototype.listen=function(re,le){var ve=this.gl.canvas;this.listener=function(Se){var Fe=ve.clientWidth/2,Ze=be*Te;Se.clientX>Fe-Ze&&Se.clientX<Fe+Ze&&Se.clientY>ve.clientHeight-Ze?re(Se):Se.clientX<Ze&&Se.clientY<Ze&&le(Se)},ve.addEventListener("click",this.listener,!1)},We.prototype.onResize=function(){var re=this.gl,le=this,ve=[re.ARRAY_BUFFER_BINDING];_t(re,ve,function(Se){var Fe=[],Ze=Se.drawingBufferWidth/2,ot=Math.max(screen.width,screen.height)*window.devicePixelRatio,Yt=Se.drawingBufferWidth/ot,Wt=Yt*window.devicePixelRatio,yt=Y*Wt/2,Ot=be*Te*Wt,on=be*Wt/2,Cn=(be*Te-be)*Wt;Fe.push(Ze-yt,Ot),Fe.push(Ze-yt,Se.drawingBufferHeight),Fe.push(Ze+yt,Ot),Fe.push(Ze+yt,Se.drawingBufferHeight),le.gearOffset=Fe.length/2;function Vn(Ji,Mr){var Rr=(90-Ji)*_e,at=Math.cos(Rr),mi=Math.sin(Rr);Fe.push(X*at*on+Ze,X*mi*on+on),Fe.push(Mr*at*on+Ze,Mr*mi*on+on)}for(var Qn=0;Qn<=6;Qn++){var vi=Qn*De;Vn(vi,ke),Vn(vi+Be,ke),Vn(vi+Le,ce),Vn(vi+(De-Le),ce),Vn(vi+(De-Be),ke)}le.gearVertexCount=Fe.length/2-le.gearOffset,le.arrowOffset=Fe.length/2;function ei(Ji,Mr){Fe.push(Cn+Ji,Se.drawingBufferHeight-Cn-Mr)}var hi=yt/Math.sin(45*_e);ei(0,on),ei(on,0),ei(on+hi,hi),ei(hi,on+hi),ei(hi,on-hi),ei(0,on),ei(on,on*2),ei(on+hi,on*2-hi),ei(hi,on-hi),ei(0,on),ei(hi,on-yt),ei(be*Wt,on-yt),ei(hi,on+yt),ei(be*Wt,on+yt),le.arrowVertexCount=Fe.length/2-le.arrowOffset,Se.bindBuffer(Se.ARRAY_BUFFER,le.vertexBuffer),Se.bufferData(Se.ARRAY_BUFFER,new Float32Array(Fe),Se.STATIC_DRAW)})},We.prototype.render=function(){var re=this.gl,le=this,ve=[re.CULL_FACE,re.DEPTH_TEST,re.BLEND,re.SCISSOR_TEST,re.STENCIL_TEST,re.COLOR_WRITEMASK,re.VIEWPORT,re.CURRENT_PROGRAM,re.ARRAY_BUFFER_BINDING];_t(re,ve,function(Se){Se.disable(Se.CULL_FACE),Se.disable(Se.DEPTH_TEST),Se.disable(Se.BLEND),Se.disable(Se.SCISSOR_TEST),Se.disable(Se.STENCIL_TEST),Se.colorMask(!0,!0,!0,!0),Se.viewport(0,0,Se.drawingBufferWidth,Se.drawingBufferHeight),le.renderNoState()})},We.prototype.renderNoState=function(){var re=this.gl;re.useProgram(this.program),re.bindBuffer(re.ARRAY_BUFFER,this.vertexBuffer),re.enableVertexAttribArray(this.attribs.position),re.vertexAttribPointer(this.attribs.position,2,re.FLOAT,!1,8,0),re.uniform4f(this.uniforms.color,1,1,1,1),Ue(this.projMat,0,re.drawingBufferWidth,0,re.drawingBufferHeight,.1,1024),re.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),re.drawArrays(re.TRIANGLE_STRIP,0,4),re.drawArrays(re.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),re.drawArrays(re.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function tt(re){this.coefficients=re}tt.prototype.distortInverse=function(re){for(var le=0,ve=1,Se=re-this.distort(le);Math.abs(ve-le)>1e-4;){var Fe=re-this.distort(ve),Ze=ve-Fe*((ve-le)/(Fe-Se));le=ve,ve=Ze,Se=Fe}return ve},tt.prototype.distort=function(re){for(var le=re*re,ve=0,Se=0;Se<this.coefficients.length;Se++)ve=le*(ve+this.coefficients[Se]);return(ve+1)*re};var wt=Math.PI/180,Zt=180/Math.PI,qt=function(le,ve,Se){this.x=le||0,this.y=ve||0,this.z=Se||0};qt.prototype={constructor:qt,set:function(le,ve,Se){return this.x=le,this.y=ve,this.z=Se,this},copy:function(le){return this.x=le.x,this.y=le.y,this.z=le.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var le=this.length();if(le!==0){var ve=1/le;this.multiplyScalar(ve)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(le){this.x*=le,this.y*=le,this.z*=le},applyQuaternion:function(le){var ve=this.x,Se=this.y,Fe=this.z,Ze=le.x,ot=le.y,Yt=le.z,Wt=le.w,yt=Wt*ve+ot*Fe-Yt*Se,Ot=Wt*Se+Yt*ve-Ze*Fe,on=Wt*Fe+Ze*Se-ot*ve,Cn=-Ze*ve-ot*Se-Yt*Fe;return this.x=yt*Wt+Cn*-Ze+Ot*-Yt-on*-ot,this.y=Ot*Wt+Cn*-ot+on*-Ze-yt*-Yt,this.z=on*Wt+Cn*-Yt+yt*-ot-Ot*-Ze,this},dot:function(le){return this.x*le.x+this.y*le.y+this.z*le.z},crossVectors:function(le,ve){var Se=le.x,Fe=le.y,Ze=le.z,ot=ve.x,Yt=ve.y,Wt=ve.z;return this.x=Fe*Wt-Ze*Yt,this.y=Ze*ot-Se*Wt,this.z=Se*Yt-Fe*ot,this}};var dn=function(le,ve,Se,Fe){this.x=le||0,this.y=ve||0,this.z=Se||0,this.w=Fe!==void 0?Fe:1};dn.prototype={constructor:dn,set:function(le,ve,Se,Fe){return this.x=le,this.y=ve,this.z=Se,this.w=Fe,this},copy:function(le){return this.x=le.x,this.y=le.y,this.z=le.z,this.w=le.w,this},setFromEulerXYZ:function(le,ve,Se){var Fe=Math.cos(le/2),Ze=Math.cos(ve/2),ot=Math.cos(Se/2),Yt=Math.sin(le/2),Wt=Math.sin(ve/2),yt=Math.sin(Se/2);return this.x=Yt*Ze*ot+Fe*Wt*yt,this.y=Fe*Wt*ot-Yt*Ze*yt,this.z=Fe*Ze*yt+Yt*Wt*ot,this.w=Fe*Ze*ot-Yt*Wt*yt,this},setFromEulerYXZ:function(le,ve,Se){var Fe=Math.cos(le/2),Ze=Math.cos(ve/2),ot=Math.cos(Se/2),Yt=Math.sin(le/2),Wt=Math.sin(ve/2),yt=Math.sin(Se/2);return this.x=Yt*Ze*ot+Fe*Wt*yt,this.y=Fe*Wt*ot-Yt*Ze*yt,this.z=Fe*Ze*yt-Yt*Wt*ot,this.w=Fe*Ze*ot+Yt*Wt*yt,this},setFromAxisAngle:function(le,ve){var Se=ve/2,Fe=Math.sin(Se);return this.x=le.x*Fe,this.y=le.y*Fe,this.z=le.z*Fe,this.w=Math.cos(Se),this},multiply:function(le){return this.multiplyQuaternions(this,le)},multiplyQuaternions:function(le,ve){var Se=le.x,Fe=le.y,Ze=le.z,ot=le.w,Yt=ve.x,Wt=ve.y,yt=ve.z,Ot=ve.w;return this.x=Se*Ot+ot*Yt+Fe*yt-Ze*Wt,this.y=Fe*Ot+ot*Wt+Ze*Yt-Se*yt,this.z=Ze*Ot+ot*yt+Se*Wt-Fe*Yt,this.w=ot*Ot-Se*Yt-Fe*Wt-Ze*yt,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var le=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return le===0?(this.x=0,this.y=0,this.z=0,this.w=1):(le=1/le,this.x=this.x*le,this.y=this.y*le,this.z=this.z*le,this.w=this.w*le),this},slerp:function(le,ve){if(ve===0)return this;if(ve===1)return this.copy(le);var Se=this.x,Fe=this.y,Ze=this.z,ot=this.w,Yt=ot*le.w+Se*le.x+Fe*le.y+Ze*le.z;if(Yt<0?(this.w=-le.w,this.x=-le.x,this.y=-le.y,this.z=-le.z,Yt=-Yt):this.copy(le),Yt>=1)return this.w=ot,this.x=Se,this.y=Fe,this.z=Ze,this;var Wt=Math.acos(Yt),yt=Math.sqrt(1-Yt*Yt);if(Math.abs(yt)<.001)return this.w=.5*(ot+this.w),this.x=.5*(Se+this.x),this.y=.5*(Fe+this.y),this.z=.5*(Ze+this.z),this;var Ot=Math.sin((1-ve)*Wt)/yt,on=Math.sin(ve*Wt)/yt;return this.w=ot*Ot+this.w*on,this.x=Se*Ot+this.x*on,this.y=Fe*Ot+this.y*on,this.z=Ze*Ot+this.z*on,this},setFromUnitVectors:function(){var re,le,ve=1e-6;return function(Se,Fe){return re===void 0&&(re=new qt),le=Se.dot(Fe)+1,le<ve?(le=0,Math.abs(Se.x)>Math.abs(Se.z)?re.set(-Se.y,Se.x,0):re.set(0,-Se.z,Se.y)):re.crossVectors(Se,Fe),this.x=re.x,this.y=re.y,this.z=re.z,this.w=le,this.normalize(),this}}()};function Qt(re){this.width=re.width||xe(),this.height=re.height||ye(),this.widthMeters=re.widthMeters,this.heightMeters=re.heightMeters,this.bevelMeters=re.bevelMeters}var xi=new Qt({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),Fn=new Qt({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),Br={CardboardV1:new qi({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new qi({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Li(re,le){this.viewer=Br.CardboardV2,this.updateDeviceParams(re),this.distortion=new tt(this.viewer.distortionCoefficients);for(var ve=0;ve<le.length;ve++){var Se=le[ve];Br[Se.id]=new qi(Se)}}Li.prototype.updateDeviceParams=function(re){this.device=this.determineDevice_(re)||this.device},Li.prototype.getDevice=function(){return this.device},Li.prototype.setViewer=function(re){this.viewer=re,this.distortion=new tt(this.viewer.distortionCoefficients)},Li.prototype.determineDevice_=function(re){if(!re)return q()?(console.warn("Using fallback iOS device measurements."),Fn):(console.warn("Using fallback Android device measurements."),xi);var le=.0254,ve=le/re.xdpi,Se=le/re.ydpi,Fe=xe(),Ze=ye();return new Qt({widthMeters:ve*Fe,heightMeters:Se*Ze,bevelMeters:re.bevelMm*.001})},Li.prototype.getDistortedFieldOfViewLeftEye=function(){var re=this.viewer,le=this.device,ve=this.distortion,Se=re.screenLensDistance,Fe=(le.widthMeters-re.interLensDistance)/2,Ze=re.interLensDistance/2,ot=re.baselineLensDistance-le.bevelMeters,Yt=le.heightMeters-ot,Wt=Zt*Math.atan(ve.distort(Fe/Se)),yt=Zt*Math.atan(ve.distort(Ze/Se)),Ot=Zt*Math.atan(ve.distort(ot/Se)),on=Zt*Math.atan(ve.distort(Yt/Se));return{leftDegrees:Math.min(Wt,re.fov),rightDegrees:Math.min(yt,re.fov),downDegrees:Math.min(Ot,re.fov),upDegrees:Math.min(on,re.fov)}},Li.prototype.getLeftEyeVisibleTanAngles=function(){var re=this.viewer,le=this.device,ve=this.distortion,Se=Math.tan(-wt*re.fov),Fe=Math.tan(wt*re.fov),Ze=Math.tan(wt*re.fov),ot=Math.tan(-wt*re.fov),Yt=le.widthMeters/4,Wt=le.heightMeters/2,yt=re.baselineLensDistance-le.bevelMeters-Wt,Ot=re.interLensDistance/2-Yt,on=-yt,Cn=re.screenLensDistance,Vn=ve.distort((Ot-Yt)/Cn),Qn=ve.distort((on+Wt)/Cn),vi=ve.distort((Ot+Yt)/Cn),ei=ve.distort((on-Wt)/Cn),hi=new Float32Array(4);return hi[0]=Math.max(Se,Vn),hi[1]=Math.min(Fe,Qn),hi[2]=Math.min(Ze,vi),hi[3]=Math.max(ot,ei),hi},Li.prototype.getLeftEyeNoLensTanAngles=function(){var re=this.viewer,le=this.device,ve=this.distortion,Se=new Float32Array(4),Fe=ve.distortInverse(Math.tan(-wt*re.fov)),Ze=ve.distortInverse(Math.tan(wt*re.fov)),ot=ve.distortInverse(Math.tan(wt*re.fov)),Yt=ve.distortInverse(Math.tan(-wt*re.fov)),Wt=le.widthMeters/4,yt=le.heightMeters/2,Ot=re.baselineLensDistance-le.bevelMeters-yt,on=re.interLensDistance/2-Wt,Cn=-Ot,Vn=re.screenLensDistance,Qn=(on-Wt)/Vn,vi=(Cn+yt)/Vn,ei=(on+Wt)/Vn,hi=(Cn-yt)/Vn;return Se[0]=Math.max(Fe,Qn),Se[1]=Math.min(Ze,vi),Se[2]=Math.min(ot,ei),Se[3]=Math.max(Yt,hi),Se},Li.prototype.getLeftEyeVisibleScreenRect=function(re){var le=this.viewer,ve=this.device,Se=le.screenLensDistance,Fe=(ve.widthMeters-le.interLensDistance)/2,Ze=le.baselineLensDistance-ve.bevelMeters,ot=(re[0]*Se+Fe)/ve.widthMeters,Yt=(re[1]*Se+Ze)/ve.heightMeters,Wt=(re[2]*Se+Fe)/ve.widthMeters,yt=(re[3]*Se+Ze)/ve.heightMeters;return{x:ot,y:yt,width:Wt-ot,height:Yt-yt}},Li.prototype.getFieldOfViewLeftEye=function(re){return re?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Li.prototype.getFieldOfViewRightEye=function(re){var le=this.getFieldOfViewLeftEye(re);return{leftDegrees:le.rightDegrees,rightDegrees:le.leftDegrees,upDegrees:le.upDegrees,downDegrees:le.downDegrees}},Li.prototype.getUndistortedFieldOfViewLeftEye=function(){var re=this.getUndistortedParams_();return{leftDegrees:Zt*Math.atan(re.outerDist),rightDegrees:Zt*Math.atan(re.innerDist),downDegrees:Zt*Math.atan(re.bottomDist),upDegrees:Zt*Math.atan(re.topDist)}},Li.prototype.getUndistortedViewportLeftEye=function(){var re=this.getUndistortedParams_(),le=this.viewer,ve=this.device,Se=le.screenLensDistance,Fe=ve.widthMeters/Se,Ze=ve.heightMeters/Se,ot=ve.width/Fe,Yt=ve.height/Ze,Wt=Math.round((re.eyePosX-re.outerDist)*ot),yt=Math.round((re.eyePosY-re.bottomDist)*Yt);return{x:Wt,y:yt,width:Math.round((re.eyePosX+re.innerDist)*ot)-Wt,height:Math.round((re.eyePosY+re.topDist)*Yt)-yt}},Li.prototype.getUndistortedParams_=function(){var re=this.viewer,le=this.device,ve=this.distortion,Se=re.screenLensDistance,Fe=re.interLensDistance/2/Se,Ze=le.widthMeters/Se,ot=le.heightMeters/Se,Yt=Ze/2-Fe,Wt=(re.baselineLensDistance-le.bevelMeters)/Se,yt=re.fov,Ot=ve.distortInverse(Math.tan(wt*yt)),on=Math.min(Yt,Ot),Cn=Math.min(Fe,Ot),Vn=Math.min(Wt,Ot),Qn=Math.min(ot-Wt,Ot);return{outerDist:on,innerDist:Cn,topDist:Qn,bottomDist:Vn,eyePosX:Yt,eyePosY:Wt}};function qi(re){this.id=re.id,this.label=re.label,this.fov=re.fov,this.interLensDistance=re.interLensDistance,this.baselineLensDistance=re.baselineLensDistance,this.screenLensDistance=re.screenLensDistance,this.distortionCoefficients=re.distortionCoefficients,this.inverseCoefficients=re.inverseCoefficients}Li.Viewers=Br;var Fs=1,Hr="2019-11-09T17:36:14Z",wa=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],zr={format:Fs,last_updated:Hr,devices:wa};function ks(re,le){if(this.dpdb=zr,this.recalculateDeviceParams_(),re){this.onDeviceParamsUpdated=le;var ve=new XMLHttpRequest,Se=this;ve.open("GET",re,!0),ve.addEventListener("load",function(){Se.loading=!1,ve.status>=200&&ve.status<=299?(Se.dpdb=JSON.parse(ve.response),Se.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),ve.send()}}ks.prototype.getDeviceParams=function(){return this.deviceParams},ks.prototype.recalculateDeviceParams_=function(){var re=this.calcDeviceParams_();re?(this.deviceParams=re,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},ks.prototype.calcDeviceParams_=function(){var re=this.dpdb;if(!re)return console.error("DPDB not available."),null;if(re.format!=1)return console.error("DPDB has unexpected format version."),null;if(!re.devices||!re.devices.length)return console.error("DPDB does not have a devices section."),null;var le=navigator.userAgent||navigator.vendor||window.opera,ve=xe(),Se=ye();if(!re.devices)return console.error("DPDB has no devices section."),null;for(var Fe=0;Fe<re.devices.length;Fe++){var Ze=re.devices[Fe];if(!Ze.rules){console.warn("Device["+Fe+"] has no rules section.");continue}if(Ze.type!="ios"&&Ze.type!="android"){console.warn("Device["+Fe+"] has invalid type.");continue}if(q()==(Ze.type=="ios")){for(var ot=!1,Yt=0;Yt<Ze.rules.length;Yt++){var Wt=Ze.rules[Yt];if(this.ruleMatches_(Wt,le,ve,Se)){ot=!0;break}}if(ot){var yt=Ze.dpi[0]||Ze.dpi,Ot=Ze.dpi[1]||Ze.dpi;return new vs({xdpi:yt,ydpi:Ot,bevelMm:Ze.bw})}}}return console.warn("No DPDB device match."),null},ks.prototype.ruleMatches_=function(re,le,ve,Se){if(!re.ua&&!re.res||(re.ua&&re.ua.substring(0,2)==="SM"&&(re.ua=re.ua.substring(0,7)),re.ua&&le.indexOf(re.ua)<0))return!1;if(re.res){if(!re.res[0]||!re.res[1])return!1;var Fe=re.res[0],Ze=re.res[1];if(Math.min(ve,Se)!=Math.min(Fe,Ze)||Math.max(ve,Se)!=Math.max(Fe,Ze))return!1}return!0};function vs(re){this.xdpi=re.xdpi,this.ydpi=re.ydpi,this.bevelMm=re.bevelMm}function ys(re,le){this.set(re,le)}ys.prototype.set=function(re,le){this.sample=re,this.timestampS=le},ys.prototype.copy=function(re){this.set(re.sample,re.timestampS)};function Pr(re,le){this.kFilter=re,this.isDebug=le,this.currentAccelMeasurement=new ys,this.currentGyroMeasurement=new ys,this.previousGyroMeasurement=new ys,q()?this.filterQ=new dn(-1,0,0,1):this.filterQ=new dn(1,0,0,1),this.previousFilterQ=new dn,this.previousFilterQ.copy(this.filterQ),this.accelQ=new dn,this.isOrientationInitialized=!1,this.estimatedGravity=new qt,this.measuredGravity=new qt,this.gyroIntegralQ=new dn}Pr.prototype.addAccelMeasurement=function(re,le){this.currentAccelMeasurement.set(re,le)},Pr.prototype.addGyroMeasurement=function(re,le){this.currentGyroMeasurement.set(re,le);var ve=le-this.previousGyroMeasurement.timestampS;me(ve)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Pr.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var re=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,le=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,re);this.gyroIntegralQ.multiply(le),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(le);var ve=new dn;ve.copy(this.filterQ),ve.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(ve),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var Se=new dn;Se.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),Se.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Zt*hn(Se),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Fe=new dn;Fe.copy(this.filterQ),Fe.multiply(Se),this.filterQ.slerp(Fe,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Pr.prototype.getOrientation=function(){return this.filterQ},Pr.prototype.accelToQuaternion_=function(re){var le=new qt;le.copy(re),le.normalize();var ve=new dn;return ve.setFromUnitVectors(new qt(0,0,-1),le),ve.inverse(),ve},Pr.prototype.gyroToQuaternionDelta_=function(re,le){var ve=new dn,Se=new qt;return Se.copy(re),Se.normalize(),ve.setFromAxisAngle(Se,re.length()*le),ve};function pr(re,le){this.predictionTimeS=re,this.isDebug=le,this.previousQ=new dn,this.previousTimestampS=null,this.deltaQ=new dn,this.outQ=new dn}pr.prototype.getPrediction=function(re,le,ve){if(!this.previousTimestampS)return this.previousQ.copy(re),this.previousTimestampS=ve,re;var Se=new qt;Se.copy(le),Se.normalize();var Fe=le.length();if(Fe<wt*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Zt*Fe).toFixed(1)),this.outQ.copy(re),this.previousQ.copy(re),this.outQ;var Ze=Fe*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(Se,Ze),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(re),this.previousTimestampS=ve,this.outQ};function us(re,le,ve,Se){this.yawOnly=ve,this.accelerometer=new qt,this.gyroscope=new qt,this.filter=new Pr(re,Se),this.posePredictor=new pr(le,Se),this.isFirefoxAndroid=K(),this.isIOS=q();var Fe=W();this.isDeviceMotionInRadians=!this.isIOS&&Fe&&Fe<66,this.isWithoutDeviceMotion=se()||J(),this.filterToWorldQ=new dn,q()?this.filterToWorldQ.setFromAxisAngle(new qt(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new qt(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new dn,this.worldToScreenQ=new dn,this.originalPoseAdjustQ=new dn,this.originalPoseAdjustQ.setFromAxisAngle(new qt(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),fe()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new dn,this.orientationOut_=new Float32Array(4),this.start()}us.prototype.getPosition=function(){return null},us.prototype.getOrientation=function(){var re=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Fe=new dn().setFromAxisAngle(new qt(0,0,-1),0),Ze=new dn;return window.orientation===-90?Ze.setFromAxisAngle(new qt(0,1,0),Math.PI/-2):Ze.setFromAxisAngle(new qt(0,1,0),Math.PI/2),Fe.multiply(Ze)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var Fe=new dn;return Fe.setFromAxisAngle(new qt(1,0,0),-Math.PI/2),Fe}(),re=this._deviceOrientationQ;var ve=new dn;return ve.copy(re),ve.multiply(this.deviceOrientationFilterToWorldQ),ve.multiply(this.resetQ),ve.multiply(this.worldToScreenQ),ve.multiplyQuaternions(this.deviceOrientationFixQ,ve),this.yawOnly&&(ve.x=0,ve.z=0,ve.normalize()),this.orientationOut_[0]=ve.x,this.orientationOut_[1]=ve.y,this.orientationOut_[2]=ve.z,this.orientationOut_[3]=ve.w,this.orientationOut_}else{var le=this.filter.getOrientation();re=this.posePredictor.getPrediction(le,this.gyroscope,this.previousTimestampS)}var ve=new dn;return ve.copy(this.filterToWorldQ),ve.multiply(this.resetQ),ve.multiply(re),ve.multiply(this.worldToScreenQ),this.yawOnly&&(ve.x=0,ve.z=0,ve.normalize()),this.orientationOut_[0]=ve.x,this.orientationOut_[1]=ve.y,this.orientationOut_[2]=ve.z,this.orientationOut_[3]=ve.w,this.orientationOut_},us.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),fe()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},us.prototype.onDeviceOrientation_=function(re){this._deviceOrientationQ=this._deviceOrientationQ||new dn;var le=re.alpha,ve=re.beta,Se=re.gamma;le=(le||0)*Math.PI/180,ve=(ve||0)*Math.PI/180,Se=(Se||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(ve,le,-Se)},us.prototype.onDeviceMotion_=function(re){this.updateDeviceMotion_(re)},us.prototype.updateDeviceMotion_=function(re){var le=re.accelerationIncludingGravity,ve=re.rotationRate,Se=re.timeStamp/1e3,Fe=Se-this.previousTimestampS;if(Fe<0){Et("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=Se;return}else if(Fe<=z||Fe>G){Et("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=Se;return}this.accelerometer.set(-le.x,-le.y,-le.z),ve&&(ge()?this.gyroscope.set(-ve.beta,ve.alpha,ve.gamma):this.gyroscope.set(ve.alpha,ve.beta,ve.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,Se)),this.filter.addAccelMeasurement(this.accelerometer,Se),this.previousTimestampS=Se},us.prototype.onOrientationChange_=function(re){this.setScreenTransform_()},us.prototype.onMessage_=function(re){var le=re.data;if(!(!le||!le.type)){var ve=le.type.toLowerCase();ve==="devicemotion"&&this.updateDeviceMotion_(le.deviceMotionEvent)}},us.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new qt(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new qt(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},us.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),q()&&rt()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},us.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var to=60,ca=new qt(1,0,0),Fo=new qt(0,0,1),Ua=new dn;Ua.setFromAxisAngle(ca,-Math.PI/2),Ua.multiply(new dn().setFromAxisAngle(Fo,Math.PI/2));var Ne=function(){function re(le){L(this,re),this.config=le,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new dn,this._outQ=new dn,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return N(re,[{key:"init",value:function(){var ve=null;try{ve=new RelativeOrientationSensor({frequency:to,referenceFrame:"screen"}),ve.addEventListener("error",this._onSensorError)}catch(Se){this.errors.push(Se),Se.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):Se.name==="ReferenceError"?this.useDeviceMotion():console.error(Se)}ve&&(this.api="sensor",this.sensor=ve,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new us(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var ve=this.sensor.quaternion;this._sensorQ.set(ve[0],ve[1],ve[2],ve[3]);var Se=this._outQ;return Se.copy(Ua),Se.multiply(this._sensorQ),this.config.YAW_ONLY&&(Se.x=Se.z=0,Se.normalize()),this._out[0]=Se.x,this._out[1]=Se.y,this._out[2]=Se.z,this._out[3]=Se.w,this._out}},{key:"_onSensorError",value:function(ve){this.errors.push(ve.error),ve.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):ve.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(ve.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),re}(),$e="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function pt(){this.loadIcon_();var re=document.createElement("div"),ot=re.style;ot.position="fixed",ot.top=0,ot.right=0,ot.bottom=0,ot.left=0,ot.backgroundColor="gray",ot.fontFamily="sans-serif",ot.zIndex=1e6;var le=document.createElement("img");le.src=this.icon;var ot=le.style;ot.marginLeft="25%",ot.marginTop="25%",ot.width="50%",re.appendChild(le);var ve=document.createElement("div"),ot=ve.style;ot.textAlign="center",ot.fontSize="16px",ot.lineHeight="24px",ot.margin="24px 25%",ot.width="50%",ve.innerHTML="Place your phone into your Cardboard viewer.",re.appendChild(ve);var Se=document.createElement("div"),ot=Se.style;ot.backgroundColor="#CFD8DC",ot.position="fixed",ot.bottom=0,ot.width="100%",ot.height="48px",ot.padding="14px 24px",ot.boxSizing="border-box",ot.color="#656A6B",re.appendChild(Se);var Fe=document.createElement("div");Fe.style.float="left",Fe.innerHTML="No Cardboard viewer?";var Ze=document.createElement("a");Ze.href="https://www.google.com/get/cardboard/get-cardboard/",Ze.innerHTML="get one",Ze.target="_blank";var ot=Ze.style;ot.float="right",ot.fontWeight=600,ot.textTransform="uppercase",ot.borderLeft="1px solid gray",ot.paddingLeft="24px",ot.textDecoration="none",ot.color="#656A6B",Se.appendChild(Fe),Se.appendChild(Ze),this.overlay=re,this.text=ve,this.hide()}pt.prototype.show=function(re){!re&&!this.overlay.parentElement?document.body.appendChild(this.overlay):re&&(this.overlay.parentElement&&this.overlay.parentElement!=re&&this.overlay.parentElement.removeChild(this.overlay),re.appendChild(this.overlay)),this.overlay.style.display="block";var le=this.overlay.querySelector("img"),ve=le.style;fe()?(ve.width="20%",ve.marginLeft="40%",ve.marginTop="3%"):(ve.width="50%",ve.marginLeft="25%",ve.marginTop="25%")},pt.prototype.hide=function(){this.overlay.style.display="none"},pt.prototype.showTemporarily=function(re,le){this.show(le),this.timer=setTimeout(this.hide.bind(this),re)},pt.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},pt.prototype.update=function(){this.disableShowTemporarily(),!fe()&&ct()?this.show():this.hide()},pt.prototype.loadIcon_=function(){this.icon=H("image/svg+xml",$e)};var Vt="CardboardV1",Tt="WEBVR_CARDBOARD_VIEWER",jt="webvr-polyfill-viewer-selector";function mn(re){try{this.selectedKey=localStorage.getItem(Tt)}catch(le){console.error("Failed to load viewer profile: %s",le)}this.selectedKey||(this.selectedKey=re||Vt),this.dialog=this.createDialog_(Li.Viewers),this.root=null,this.onChangeCallbacks_=[]}mn.prototype.show=function(re){this.root=re,re.appendChild(this.dialog);var le=this.dialog.querySelector("#"+this.selectedKey);le.checked=!0,this.dialog.style.display="block"},mn.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},mn.prototype.getCurrentViewer=function(){return Li.Viewers[this.selectedKey]},mn.prototype.getSelectedKey_=function(){var re=this.dialog.querySelector("input[name=field]:checked");return re?re.id:null},mn.prototype.onChange=function(re){this.onChangeCallbacks_.push(re)},mn.prototype.fireOnChange_=function(re){for(var le=0;le<this.onChangeCallbacks_.length;le++)this.onChangeCallbacks_[le](re)},mn.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!Li.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(Li.Viewers[this.selectedKey]);try{localStorage.setItem(Tt,this.selectedKey)}catch(re){console.error("Failed to save viewer profile: %s",re)}this.hide()},mn.prototype.createDialog_=function(re){var le=document.createElement("div");le.classList.add(jt),le.style.display="none";var ve=document.createElement("div"),Ze=ve.style;Ze.position="fixed",Ze.left=0,Ze.top=0,Ze.width="100%",Ze.height="100%",Ze.background="rgba(0, 0, 0, 0.3)",ve.addEventListener("click",this.hide.bind(this));var Se=280,Fe=document.createElement("div"),Ze=Fe.style;Ze.boxSizing="border-box",Ze.position="fixed",Ze.top="24px",Ze.left="50%",Ze.marginLeft=-Se/2+"px",Ze.width=Se+"px",Ze.padding="24px",Ze.overflow="hidden",Ze.background="#fafafa",Ze.fontFamily="'Roboto', sans-serif",Ze.boxShadow="0px 5px 20px #666",Fe.appendChild(this.createH1_("Select your viewer"));for(var ot in re)Fe.appendChild(this.createChoice_(ot,re[ot].label));return Fe.appendChild(this.createButton_("Save",this.onSave_.bind(this))),le.appendChild(ve),le.appendChild(Fe),le},mn.prototype.createH1_=function(re){var le=document.createElement("h1"),ve=le.style;return ve.color="black",ve.fontSize="20px",ve.fontWeight="bold",ve.marginTop=0,ve.marginBottom="24px",le.innerHTML=re,le},mn.prototype.createChoice_=function(re,le){var ve=document.createElement("div");ve.style.marginTop="8px",ve.style.color="black";var Se=document.createElement("input");Se.style.fontSize="30px",Se.setAttribute("id",re),Se.setAttribute("type","radio"),Se.setAttribute("value",re),Se.setAttribute("name","field");var Fe=document.createElement("label");return Fe.style.marginLeft="4px",Fe.setAttribute("for",re),Fe.innerHTML=le,ve.appendChild(Se),ve.appendChild(Fe),ve},mn.prototype.createButton_=function(re,le){var ve=document.createElement("button");ve.innerHTML=re;var Se=ve.style;return Se.float="right",Se.textTransform="uppercase",Se.color="#1094f7",Se.fontSize="14px",Se.letterSpacing=0,Se.border=0,Se.background="none",Se.marginTop="16px",ve.addEventListener("click",le),ve};var Ln=typeof window<"u"?window:typeof d<"u"?d:typeof self<"u"?self:{};function Dn(re){return re&&re.__esModule&&Object.prototype.hasOwnProperty.call(re,"default")?re.default:re}function $t(re,le){return le={exports:{}},re(le,le.exports),le.exports}var ni=$t(function(re,le){(function(Se,Fe){re.exports=Fe()})(Ln,function(){return function(ve){var Se={};function Fe(Ze){if(Se[Ze])return Se[Ze].exports;var ot=Se[Ze]={i:Ze,l:!1,exports:{}};return ve[Ze].call(ot.exports,ot,ot.exports,Fe),ot.l=!0,ot.exports}return Fe.m=ve,Fe.c=Se,Fe.d=function(Ze,ot,Yt){Fe.o(Ze,ot)||Object.defineProperty(Ze,ot,{configurable:!1,enumerable:!0,get:Yt})},Fe.n=function(Ze){var ot=Ze&&Ze.__esModule?function(){return Ze.default}:function(){return Ze};return Fe.d(ot,"a",ot),ot},Fe.o=function(Ze,ot){return Object.prototype.hasOwnProperty.call(Ze,ot)},Fe.p="",Fe(Fe.s=0)}([function(ve,Se,Fe){var Ze=function(){function Ot(on,Cn){for(var Vn=0;Vn<Cn.length;Vn++){var Qn=Cn[Vn];Qn.enumerable=Qn.enumerable||!1,Qn.configurable=!0,"value"in Qn&&(Qn.writable=!0),Object.defineProperty(on,Qn.key,Qn)}}return function(on,Cn,Vn){return Cn&&Ot(on.prototype,Cn),Vn&&Ot(on,Vn),on}}();function ot(Ot,on){if(!(Ot instanceof on))throw new TypeError("Cannot call a class as a function")}var Yt=Fe(1),Wt=typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,yt=function(){function Ot(){ot(this,Ot),Wt?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",Yt),this.noSleepVideo.addEventListener("timeupdate",(function(on){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}).bind(this)))}return Ze(Ot,[{key:"enable",value:function(){Wt?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){Wt?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),Ot}();ve.exports=yt},function(ve,Se,Fe){ve.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),Jn=Dn(ni),fi=1e3,dr=[0,0,.5,1],Si=[.5,0,.5,1],Mi=window.requestAnimationFrame,Ti=window.cancelAnimationFrame;function ki(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function Wr(re){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:re.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:re.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:re.canPresent},maxLayers:{writable:!1,enumerable:!0,value:re.maxLayers},hasOrientation:{enumerable:!0,get:function(){return xt("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),re.hasOrientation}}})}function Mn(re){re=re||{};var le="wakelock"in re?re.wakelock:!0;this.isPolyfilled=!0,this.displayId=fi++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return xt("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Wr({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,le&&ct()&&(this.wakelock_=new Jn)}Mn.prototype.getFrameData=function(re){return It(re,this._getPose(),this)},Mn.prototype.getPose=function(){return xt("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},Mn.prototype.resetPose=function(){return xt("VRDisplay.prototype.resetPose"),this._resetPose()},Mn.prototype.getImmediatePose=function(){return xt("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},Mn.prototype.requestAnimationFrame=function(re){return Mi(re)},Mn.prototype.cancelAnimationFrame=function(re){return Ti(re)},Mn.prototype.wrapForFullscreen=function(re){if(q())return re;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var le=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",le.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==re)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=re,this.originalParent_=re.parentElement,this.originalParent_||document.body.appendChild(re),!this.fullscreenWrapper_.parentElement){var ve=this.fullscreenElement_.parentElement;ve.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),ve.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var Se=this;function Fe(){if(Se.fullscreenElement_){var Ze=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];Se.fullscreenElement_.setAttribute("style",Ze.join("; ")+";")}}return Fe(),this.fullscreenWrapper_},Mn.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var re=this.fullscreenElement_;this.fullscreenElementCachedStyle_?re.setAttribute("style",this.fullscreenElementCachedStyle_):re.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var le=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(re),this.originalParent_===le?le.insertBefore(re,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(re),le.removeChild(this.fullscreenWrapper_),re}},Mn.prototype.requestPresent=function(re){var le=this.isPresenting,ve=this;return re instanceof Array||(xt("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),re=[re]),new Promise(function(Se,Fe){if(!ve.capabilities.canPresent){Fe(new Error("VRDisplay is not capable of presenting."));return}if(re.length==0||re.length>ve.capabilities.maxLayers){Fe(new Error("Invalid number of layers."));return}var Ze=re[0];if(!Ze.source){Se();return}var ot=Ze.leftBounds||dr,Yt=Ze.rightBounds||Si;if(le){var Wt=ve.layer_;Wt.source!==Ze.source&&(Wt.source=Ze.source);for(var yt=0;yt<4;yt++)Wt.leftBounds[yt]=ot[yt],Wt.rightBounds[yt]=Yt[yt];ve.wrapForFullscreen(ve.layer_.source),ve.updatePresent_(),Se();return}if(ve.layer_={predistorted:Ze.predistorted,source:Ze.source,leftBounds:ot.slice(0),rightBounds:Yt.slice(0)},ve.waitingForPresent_=!1,ve.layer_&&ve.layer_.source){var Ot=ve.wrapForFullscreen(ve.layer_.source),on=function(){var Qn=He();ve.isPresenting=Ot===Qn,ve.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(vi){console.error("screen.orientation.lock() failed due to",vi.message)}),ve.waitingForPresent_=!1,ve.beginPresent_(),Se()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),ve.removeFullscreenWrapper(),ve.disableWakeLock(),ve.endPresent_(),ve.removeFullscreenListeners_()),ve.fireVRDisplayPresentChange_()},Cn=function(){ve.waitingForPresent_&&(ve.removeFullscreenWrapper(),ve.removeFullscreenListeners_(),ve.disableWakeLock(),ve.waitingForPresent_=!1,ve.isPresenting=!1,Fe(new Error("Unable to present.")))};ve.addFullscreenListeners_(Ot,on,Cn),we(Ot)?(ve.enableWakeLock(),ve.waitingForPresent_=!0):(q()||Q())&&(ve.enableWakeLock(),ve.isPresenting=!0,ve.beginPresent_(),ve.fireVRDisplayPresentChange_(),Se())}!ve.waitingForPresent_&&!q()&&(Ee(),Fe(new Error("Unable to present.")))})},Mn.prototype.exitPresent=function(){var re=this.isPresenting,le=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(ve,Se){re?(!Ee()&&q()&&(le.endPresent_(),le.fireVRDisplayPresentChange_()),Q()&&(le.removeFullscreenWrapper(),le.removeFullscreenListeners_(),le.endPresent_(),le.fireVRDisplayPresentChange_()),ve()):Se(new Error("Was not presenting to VRDisplay."))})},Mn.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},Mn.prototype.fireVRDisplayPresentChange_=function(){var re=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(re)},Mn.prototype.fireVRDisplayConnect_=function(){var re=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(re)},Mn.prototype.addFullscreenListeners_=function(re,le,ve){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=re,this.fullscreenChangeHandler_=le,this.fullscreenErrorHandler_=ve,le&&(document.fullscreenEnabled?re.addEventListener("fullscreenchange",le,!1):document.webkitFullscreenEnabled?re.addEventListener("webkitfullscreenchange",le,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",le,!1):document.msFullscreenEnabled&&re.addEventListener("msfullscreenchange",le,!1)),ve&&(document.fullscreenEnabled?re.addEventListener("fullscreenerror",ve,!1):document.webkitFullscreenEnabled?re.addEventListener("webkitfullscreenerror",ve,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",ve,!1):document.msFullscreenEnabled&&re.addEventListener("msfullscreenerror",ve,!1))},Mn.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var re=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var le=this.fullscreenChangeHandler_;re.removeEventListener("fullscreenchange",le,!1),re.removeEventListener("webkitfullscreenchange",le,!1),document.removeEventListener("mozfullscreenchange",le,!1),re.removeEventListener("msfullscreenchange",le,!1)}if(this.fullscreenErrorHandler_){var ve=this.fullscreenErrorHandler_;re.removeEventListener("fullscreenerror",ve,!1),re.removeEventListener("webkitfullscreenerror",ve,!1),document.removeEventListener("mozfullscreenerror",ve,!1),re.removeEventListener("msfullscreenerror",ve,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},Mn.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},Mn.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},Mn.prototype.beginPresent_=function(){},Mn.prototype.endPresent_=function(){},Mn.prototype.submitFrame=function(re){},Mn.prototype.getEyeParameters=function(re){return null};var _i={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},nr={LEFT:"left",RIGHT:"right"};function Ui(re){var le=vt({},_i);re=vt(le,re||{}),Mn.call(this,{wakelock:re.MOBILE_WAKE_LOCK}),this.config=re,this.displayName="Cardboard VRDisplay",this.capabilities=new Wr({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Ne(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new ks(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Li(this.dpdb_.getDeviceParams(),re.ADDITIONAL_VIEWERS),this.viewerSelector_=new mn(re.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new pt),q()&&window.addEventListener("resize",this.onResize_.bind(this))}return Ui.prototype=Object.create(Mn.prototype),Ui.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Ui.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Ui.prototype._getFieldOfView=function(re){var le;if(re==nr.LEFT)le=this.deviceInfo_.getFieldOfViewLeftEye();else if(re==nr.RIGHT)le=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",re),null;return le},Ui.prototype._getEyeOffset=function(re){var le;if(re==nr.LEFT)le=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(re==nr.RIGHT)le=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",re),null;return le},Ui.prototype.getEyeParameters=function(re){var le=this._getEyeOffset(re),ve=this._getFieldOfView(re),Se={offset:le,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(Se,"fieldOfView",{enumerable:!0,get:function(){return xt("VRFieldOfView","VRFrameData's projection matrices"),ve}}),Se},Ui.prototype.onDeviceParamsUpdated_=function(re){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(re),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Ui.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Ui.prototype.beginPresent_=function(){var re=this.layer_.source.getContext("webgl");re||(re=this.layer_.source.getContext("experimental-webgl")),re||(re=this.layer_.source.getContext("webgl2")),re&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(re.canvas.width=xe()*this.bufferScale_,re.canvas.height=ye()*this.bufferScale_,this.cardboardUI_=new We(re)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new We(re)),this.distorter_=new Nt(re,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen((function(le){this.viewerSelector_.show(this.layer_.source.parentElement),le.stopPropagation(),le.preventDefault()}).bind(this),(function(le){this.exitPresent(),le.stopPropagation(),le.preventDefault()}).bind(this)),this.rotateInstructions_&&(fe()&&ct()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Ui.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Ui.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Ui.prototype.submitFrame=function(re){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var le=this.layer_.source.getContext("webgl");le||(le=this.layer_.source.getContext("experimental-webgl")),le||(le=this.layer_.source.getContext("webgl2"));var ve=le.canvas;(ve.width!=this.lastWidth||ve.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=ve.width,this.lastHeight=ve.height,this.cardboardUI_.render()}},Ui.prototype.onOrientationChange_=function(re){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Ui.prototype.onResize_=function(re){if(this.layer_){var le=this.layer_.source.getContext("webgl");le||(le=this.layer_.source.getContext("experimental-webgl")),le||(le=this.layer_.source.getContext("webgl2"));var ve=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];le.canvas.setAttribute("style",ve.join("; ")+";"),dt(le.canvas)}},Ui.prototype.onViewerChanged_=function(re){this.deviceInfo_.setViewer(re),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Ui.prototype.fireVRDisplayDeviceParamsChange_=function(){var re=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(re)},Ui.VRFrameData=ki,Ui.VRDisplay=Mn,Ui})}),_=A(E),S="0.10.12",x={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function C(B){this.config=y(y({},x),B),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&v())&&(this.enable(),this.getVRDisplays().then(function(P){P&&P[0]&&P[0].fireVRDisplayConnect_&&P[0].fireVRDisplayConnect_()}))}C.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(v()){var B=new _({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(B)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},C.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var B=this.native.VRFrameData,P=new this.native.VRFrameData,L=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(N){if(N instanceof B){L.call(this,N);return}L.call(this,P),N.pose=P.pose,g(P.leftProjectionMatrix,N.leftProjectionMatrix),g(P.rightProjectionMatrix,N.rightProjectionMatrix),g(P.leftViewMatrix,N.leftViewMatrix),g(P.rightViewMatrix,N.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=_.VRDisplay,window.VRFrameData=_.VRFrameData},C.prototype.getVRDisplays=function(){var B=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(function(P){return P.length>0?P:B.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},C.version=S,C.VRFrameData=_.VRFrameData,C.VRDisplay=_.VRDisplay;var w=Object.freeze({default:C}),T=w&&C||w;typeof d<"u"&&d.window&&(d.document||(d.document=d.window.document),d.navigator||(d.navigator=d.window.navigator));var O=T;return O})},"./node_modules/word-wrapper/index.js":u=>{var m=/\n/,c=`
`,d=/\s/;u.exports=function(E,_){var S=u.exports.lines(E,_);return S.map(function(x){return E.substring(x.start,x.end)}).join(`
`)},u.exports.lines=function(_,S){if(S=S||{},S.width===0&&S.mode!=="nowrap")return[];_=_||"";var x=typeof S.width=="number"?S.width:Number.MAX_VALUE,C=Math.max(0,S.start||0),w=typeof S.end=="number"?S.end:_.length,T=S.mode,O=S.measure||y;return T==="pre"?v(O,_,C,w,x):g(O,_,C,w,x,T)};function A(E,_,S,x){var C=E.indexOf(_,S);return C===-1||C>x?x:C}function p(E){return d.test(E)}function v(E,_,S,x,C){for(var w=[],T=S,O=S;O<x&&O<_.length;O++){var B=_.charAt(O),P=m.test(B);if(P||O===x-1){var L=P?O:O+1,N=E(_,T,L,C);w.push(N),T=O+1}}return w}function g(E,_,S,x,C,w){var T=[],O=C;for(w==="nowrap"&&(O=Number.MAX_VALUE);S<x&&S<_.length;){for(var B=A(_,c,S,x);S<B&&p(_.charAt(S));)S++;var P=E(_,S,B,O),L=S+(P.end-P.start),N=L+c.length;if(L<B){for(;L>S&&!p(_.charAt(L));)L--;if(L===S)N>S+c.length&&N--,L=N;else for(N=L;L>S&&p(_.charAt(L-c.length));)L--}if(L>=S){var F=E(_,S,L,O);T.push(F)}S=N}return T}function y(E,_,S,x){var C=Math.min(x,S-_);return{start:_,end:_+C}}},"./node_modules/xhr/index.js":(u,m,c)=>{var d=c("./node_modules/global/window.js"),A=c("./node_modules/is-function/index.js"),p=c("./node_modules/parse-headers/parse-headers.js"),v=c("./node_modules/xtend/immutable.js");u.exports=_,u.exports.default=_,_.XMLHttpRequest=d.XMLHttpRequest||C,_.XDomainRequest="withCredentials"in new _.XMLHttpRequest?_.XMLHttpRequest:d.XDomainRequest,g(["get","put","post","patch","head","delete"],function(w){_[w==="delete"?"del":w]=function(T,O,B){return O=E(T,O,B),O.method=w.toUpperCase(),S(O)}});function g(w,T){for(var O=0;O<w.length;O++)T(w[O])}function y(w){for(var T in w)if(w.hasOwnProperty(T))return!1;return!0}function E(w,T,O){var B=w;return A(T)?(O=T,typeof w=="string"&&(B={uri:w})):B=v(T,{uri:w}),B.callback=O,B}function _(w,T,O){return T=E(w,T,O),S(T)}function S(w){if(typeof w.callback>"u")throw new Error("callback argument missing");var T=!1,O=function(ge,fe,me){T||(T=!0,w.callback(ge,fe,me))};function B(){F.readyState===4&&setTimeout(N,0)}function P(){var se=void 0;if(F.response?se=F.response:se=F.responseText||x(F),K)try{se=JSON.parse(se)}catch{}return se}function L(se){return clearTimeout(W),se instanceof Error||(se=new Error(""+(se||"Unknown XMLHttpRequest Error"))),se.statusCode=0,O(se,J)}function N(){if(!G){var se;clearTimeout(W),w.useXDR&&F.status===void 0?se=200:se=F.status===1223?204:F.status;var ge=J,fe=null;return se!==0?(ge={body:P(),statusCode:se,method:j,headers:{},url:H,rawRequest:F},F.getAllResponseHeaders&&(ge.headers=p(F.getAllResponseHeaders()))):fe=new Error("Internal XMLHttpRequest Error"),O(fe,ge,ge.body)}}var F=w.xhr||null;F||(w.cors||w.useXDR?F=new _.XDomainRequest:F=new _.XMLHttpRequest);var z,G,H=F.url=w.uri||w.url,j=F.method=w.method||"GET",q=w.body||w.data,Q=F.headers=w.headers||{},k=!!w.sync,K=!1,W,J={body:void 0,headers:{},statusCode:0,method:j,url:H,rawRequest:F};if("json"in w&&w.json!==!1&&(K=!0,Q.accept||Q.Accept||(Q.Accept="application/json"),j!=="GET"&&j!=="HEAD"&&(Q["content-type"]||Q["Content-Type"]||(Q["Content-Type"]="application/json"),q=JSON.stringify(w.json===!0?q:w.json))),F.onreadystatechange=B,F.onload=N,F.onerror=L,F.onprogress=function(){},F.onabort=function(){G=!0},F.ontimeout=L,F.open(j,H,!k,w.username,w.password),k||(F.withCredentials=!!w.withCredentials),!k&&w.timeout>0&&(W=setTimeout(function(){if(!G){G=!0,F.abort("timeout");var se=new Error("XMLHttpRequest timeout");se.code="ETIMEDOUT",L(se)}},w.timeout)),F.setRequestHeader)for(z in Q)Q.hasOwnProperty(z)&&F.setRequestHeader(z,Q[z]);else if(w.headers&&!y(w.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in w&&(F.responseType=w.responseType),"beforeSend"in w&&typeof w.beforeSend=="function"&&w.beforeSend(F),F.send(q||null),F}function x(w){try{if(w.responseType==="document")return w.responseXML;var T=w.responseXML&&w.responseXML.documentElement.nodeName==="parsererror";if(w.responseType===""&&!T)return w.responseXML}catch{}return null}function C(){}},"./node_modules/xml-parse-from-string/index.js":u=>{u.exports=function(){return typeof self.DOMParser<"u"?function(c){var d=new self.DOMParser;return d.parseFromString(c,"application/xml")}:typeof self.ActiveXObject<"u"&&new self.ActiveXObject("Microsoft.XMLDOM")?function(c){var d=new self.ActiveXObject("Microsoft.XMLDOM");return d.async="false",d.loadXML(c),d}:function(c){var d=document.createElement("div");return d.innerHTML=c,d}}()},"./node_modules/xtend/immutable.js":u=>{u.exports=c;var m=Object.prototype.hasOwnProperty;function c(){for(var d={},A=0;A<arguments.length;A++){var p=arguments[A];for(var v in p)m.call(p,v)&&(d[v]=p[v])}return d}},"./src/components/anchored.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/index.js"),p=A.debug("components:anchored:warn");u.exports.Component=d("anchored",{schema:{persistent:{default:!1}},init:function(){var g=this.el.sceneEl,y=g.getAttribute("webxr"),E=y.optionalFeatures;E.indexOf("anchors")===-1&&(E.push("anchors"),this.el.sceneEl.setAttribute("webxr",y)),this.auxQuaternion=new THREE.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var g=this.el.sceneEl,y=g.renderer.xr,E,_,S,x=this.el.object3D;!g.is("ar-mode")&&!g.is("vr-mode")||(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(E=g.frame,_=y.getReferenceSpace(),S=E.getPose(this.anchor.anchorSpace,_),x.matrix.elements=S.transform.matrix,x.matrix.decompose(x.position,x.rotation,x.scale)))},createAnchor:async function(y,E){var _=this.el.sceneEl,S=_.renderer.xr,x,C,w,T,O=this.el.object3D;if(y=y||O.position,E=E||this.auxQuaternion.setFromEuler(O.rotation),!v(_)){p("This browser doesn't support the WebXR anchors module");return}this.anchor&&this.deleteAnchor(),x=_.frame,C=S.getReferenceSpace(),w=new XRRigidTransform({x:y.x,y:y.y,z:y.z},{x:E.x,y:E.y,z:E.z,w:E.w}),this.requestAnchorPending=!1,T=await x.createAnchor(w,C),this.data.persistent&&(this.el.id?(this.persistentHandle=await T.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):p("The anchor won't be persisted because the entity has no assigned id.")),_.object3D.attach(this.el.object3D),this.anchor=T},restorePersistentAnchor:async function(){var y=this.el.sceneEl.renderer.xr,E=y.getSession(),_=E.persistentAnchors,S;if(this.requestPersistentAnchorPending=!1,!this.el.id){p("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),this.requestAnchorPending=!0;return}if(_){S=localStorage.getItem(this.el.id);for(var x=0;x<_.length;++x)if(S===_[x]){this.anchor=await E.restorePersistentAnchor(_[x]),this.anchor&&(this.persistentHandle=_[x]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var g,y,E=this.anchor;E&&(g=this.el.sceneEl.renderer.xr,y=g.getSession(),E.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&y.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}});function v(g){var y=g.renderer.xr,E=y.getSession();return E&&E.restorePersistentAnchor}},"./src/components/animation.js":(u,m,c)=>{var d=c("./node_modules/super-animejs/lib/anime.es.js").default,A=c("./src/core/component.js").components,p=c("./src/core/component.js").registerComponent,v=c("./src/lib/three.js"),g=c("./src/utils/index.js"),y=new v.Color,E=new v.Color,_=g.entity.getComponentProperty,S=g.entity.setComponentProperty,x={},C="color",w="position",T="rotation",O="scale",B="components",P="object3D";u.exports.Component=p("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(Q){return Q===!0||Q==="true"?!0:Q===!1||Q==="false"?!1:parseInt(Q,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var Q=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){Q.animationIsPlaying=!1,Q.el.emit("animationcomplete",Q.eventDetail,!1),Q.id&&Q.el.emit("animationcomplete__"+Q.id,Q.eventDetail,!1)}}},update:function(Q){var k=this.config,K=this.data;this.animationIsPlaying=!1,this.data.enabled&&K.property&&(k.autoplay=!1,k.direction=K.dir,k.duration=K.dur,k.easing=K.easing,k.elasticity=K.elasticity,k.loop=K.loop,k.round=K.round,this.createAndStartAnimation())},tick:function(Q,k){this.animationIsPlaying&&(this.time+=k,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var Q=this.data;if(this.updateConfig(),this.animationIsPlaying=!1,this.animation=d(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!(!Q.autoplay||Q.startEvents&&Q.startEvents.length)){if(Q.delay){setTimeout(this.beginAnimation,Q.delay);return}this.beginAnimation()}},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){if(this.data.enabled){if(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=d(this.config),this.data.delay){setTimeout(this.beginAnimation,this.data.delay);return}this.beginAnimation()}},updateConfigForRawColor:function(){var Q=this.config,k=this.data,K=this.el,W,J,se;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){W=k.from===""?G(K,k.property):k.from,se=k.to,this.setColorConfig(W,se),W=this.fromColor,se=this.toColor,this.targetsArray.length=0,this.targetsArray.push(W),Q.targets=this.targetsArray;for(J in se)Q[J]=se[J];Q.update=function(){var ge={};return function(fe){var me;me=fe.animatables[0].target,!(me.r===ge.r&&me.g===ge.g&&me.b===ge.b)&&H(K,k.property,me,k.type)}}()}},updateConfigForDefault:function(){var Q=this.config,k=this.data,K=this.el,W,J,se,ge;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(k.from===""?W=q(k)?G(K,k.property):_(K,k.property):W=k.from,ge=k.to,se=!isNaN(W||ge),se?(W=parseFloat(W),ge=parseFloat(ge)):(W=W&&W.toString(),ge=ge&&ge.toString()),J=k.to==="true"||k.to==="false"||k.to===!0||k.to===!1,J&&(W=k.from==="true"||k.from===!0?1:0,ge=k.to==="true"||k.to===!0?1:0),this.targets.aframeProperty=W,Q.targets=this.targets,Q.aframeProperty=ge,Q.update=function(){var fe;return function(me){var xe;xe=me.animatables[0].target.aframeProperty,xe!==fe&&(fe=xe,J&&(xe=xe>=1),q(k)?H(K,k.property,xe,k.type):S(K,k.property,xe))}}())},updateConfigForVector:function(){var Q=this.config,k=this.data,K=this.el,W,J,se;J=k.from!==""?g.coordinates.parse(k.from):_(K,k.property),se=g.coordinates.parse(k.to),k.property===T&&(N(J),N(se)),this.targetsArray.length=0,this.targetsArray.push(J),Q.targets=this.targetsArray;for(W in se)Q[W]=se[W];if(k.property===w||k.property===T||k.property===O){Q.update=function(){var ge={};return function(fe){var me=fe.animatables[0].target;me.x===ge.x&&me.y===ge.y&&me.z===ge.z||(ge.x=me.x,ge.y=me.y,ge.z=me.z,K.object3D[k.property].set(me.x,me.y,me.z))}}();return}Q.update=function(){var ge={};return function(fe){var me=fe.animatables[0].target;me.x===ge.x&&me.y===ge.y&&me.z===ge.z||(ge.x=me.x,ge.y=me.y,ge.z=me.z,S(K,k.property,me))}}()},updateConfig:function(){var Q;Q=L(this.el,this.data.property),q(this.data)&&this.data.type===C?this.updateConfigForRawColor():Q==="vec2"||Q==="vec3"||Q==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(Q){var k,K=this.data,W=this.el,J=this;return K.from!==""||!K.property.startsWith(B)||(k=j(K.property)[1],W.components[k])?!1:(W.addEventListener("componentinitialized",function se(ge){ge.detail.name===k&&(Q(),J.animation=d(J.config),W.removeEventListener("componentinitialized",se))}),!0)},stopRelatedAnimations:function(){var Q,k;for(k in this.el.components)Q=this.el.components[k],k!==this.attrName&&Q.name==="animation"&&Q.animationIsPlaying&&Q.data.property===this.data.property&&(Q.animationIsPlaying=!1)},addEventListeners:function(){var Q=this.data,k=this.el;F(k,Q.startEvents,this.onStartEvent),F(k,Q.pauseEvents,this.pauseAnimation),F(k,Q.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var Q=this.data,k=this.el;z(k,Q.startEvents,this.onStartEvent),z(k,Q.pauseEvents,this.pauseAnimation),z(k,Q.resumeEvents,this.resumeAnimation)},setColorConfig:function(Q,k){y.set(Q),E.set(k),Q=this.fromColor,k=this.toColor,Q.r=y.r,Q.g=y.g,Q.b=y.b,k.r=E.r,k.g=E.g,k.b=E.b}});function L(Q,k){var K,W,J,se;return J=k.split("."),W=J[0],se=J[1],K=Q.components[W]||A[W],!K||se&&!K.schema[se]?null:se?K.schema[se].type:K.schema.type}function N(Q){Q.x=v.MathUtils.degToRad(Q.x),Q.y=v.MathUtils.degToRad(Q.y),Q.z=v.MathUtils.degToRad(Q.z)}function F(Q,k,K){var W;for(W=0;W<k.length;W++)Q.addEventListener(k[W],K)}function z(Q,k,K){var W;for(W=0;W<k.length;W++)Q.removeEventListener(k[W],K)}function G(Q,k){var K,W,J;for(W=j(k),J=Q,K=0;K<W.length;K++)J=J[W[K]];if(J===void 0)throw console.log(Q),new Error("[animation] property ("+k+") could not be found");return J}function H(Q,k,K,W){var J,se,ge,fe;for(k.startsWith("object3D.rotation")&&(K=v.MathUtils.degToRad(K)),se=j(k),fe=Q,J=0;J<se.length-1;J++)fe=fe[se[J]];if(ge=se[se.length-1],W===C){"r"in fe[ge]?(fe[ge].r=K.r,fe[ge].g=K.g,fe[ge].b=K.b):(fe[ge].x=K.r,fe[ge].y=K.g,fe[ge].z=K.b);return}fe[ge]=K}function j(Q){return Q in x||(x[Q]=Q.split(".")),x[Q]}function q(Q){return Q.isRawProperty||Q.property.startsWith(B)||Q.property.startsWith(P)}},"./src/components/camera.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js");u.exports.Component=d("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var p,v=this.el;p=this.camera=new A.PerspectiveCamera,v.setObject3D("camera",p)},update:function(p){var v=this.data,g=this.camera;g.aspect=v.aspect||window.innerWidth/window.innerHeight,g.far=v.far,g.fov=v.fov,g.near=v.near,g.zoom=v.zoom,g.updateProjectionMatrix(),this.updateActiveCamera(p),this.updateSpectatorCamera(p)},updateActiveCamera:function(p){var v=this.data,g=this.el,y=this.system;p&&p.active===v.active||v.spectator||(v.active&&y.activeCameraEl!==g?y.setActiveCamera(g):!v.active&&y.activeCameraEl===g&&y.disableActiveCamera())},updateSpectatorCamera:function(p){var v=this.data,g=this.el,y=this.system;p&&p.spectator===v.spectator||(v.spectator&&y.spectatorCameraEl!==g?y.setSpectatorCamera(g):!v.spectator&&y.spectatorCameraEl===g&&y.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},"./src/components/cursor.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/index.js"),p={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},v={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},g={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},y={DOWN:["selectstart"],UP:["selectend"]},E="a-mouse-cursor-hover";u.exports.Component=d("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:A.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var _=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=A.debounce(function(){_.canvasBounds=_.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(_){this.data.rayOrigin!==_.rayOrigin&&this.updateMouseEventListeners()},tick:function(){var _=this.el.sceneEl.frame,S=this.activeXRInput;this.data.rayOrigin==="xrselect"&&_&&S&&this.onMouseMove({frame:_,inputSource:S,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var _=this.el;_.removeState(v.HOVERING),_.removeState(v.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(v.HOVERED),this.removeEventListeners()},addEventListeners:function(){var _,S=this.data,x=this.el,C=this;function w(){_=x.sceneEl.canvas,!(S.downEvents.length||S.upEvents.length)&&(g.DOWN.forEach(function(T){_.addEventListener(T,C.onCursorDown,{passive:!1})}),g.UP.forEach(function(T){_.addEventListener(T,C.onCursorUp,{passive:!1})}))}_=x.sceneEl.canvas,_?w():x.sceneEl.addEventListener("render-target-loaded",w),S.downEvents.forEach(function(T){x.addEventListener(T,C.onCursorDown)}),S.upEvents.forEach(function(T){x.addEventListener(T,C.onCursorUp)}),x.addEventListener("raycaster-intersection",this.onIntersection),x.addEventListener("raycaster-closest-entity-changed",this.onIntersection),x.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),x.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),x.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var _,S=this.data,x=this.el,C=this;_=x.sceneEl.canvas,_&&!S.downEvents.length&&!S.upEvents.length&&(g.DOWN.forEach(function(w){_.removeEventListener(w,C.onCursorDown)}),g.UP.forEach(function(w){_.removeEventListener(w,C.onCursorUp)})),S.downEvents.forEach(function(w){x.removeEventListener(w,C.onCursorDown)}),S.upEvents.forEach(function(w){x.removeEventListener(w,C.onCursorUp)}),x.removeEventListener("raycaster-intersection",this.onIntersection),x.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),_.removeEventListener("mousemove",this.onMouseMove),_.removeEventListener("touchstart",this.onMouseMove),_.removeEventListener("touchmove",this.onMouseMove),x.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),x.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var _,S=this.el;_=S.sceneEl.canvas,_.removeEventListener("mousemove",this.onMouseMove),_.removeEventListener("touchmove",this.onMouseMove),S.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(_.addEventListener("mousemove",this.onMouseMove),_.addEventListener("touchmove",this.onMouseMove,{passive:!1}),S.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var _=new THREE.Vector3,S=new THREE.Vector2,x=new THREE.Vector3,C={origin:x,direction:_};return function(w){var T=this.canvasBounds,O=this.el.sceneEl.camera,B,P,L,N,F,z,G,H;O.parent.updateMatrixWorld(),w.type==="touchmove"||w.type==="touchstart"?P=w.touches.item(0):P=w,B=P.clientX-T.left,L=P.clientY-T.top,S.x=B/T.width*2-1,S.y=-(L/T.height)*2+1,this.data.rayOrigin==="xrselect"&&(w.type==="selectstart"||w.type==="fakeselectevent")?(N=w.frame,F=w.inputSource,z=this.el.renderer.xr.getReferenceSpace(),G=N.getPose(F.targetRaySpace,z),H=G.transform,_.set(0,0,-1),_.applyQuaternion(H.orientation),x.copy(H.position)):w.type==="fakeselectout"?(_.set(0,1,0),x.set(0,9999,0)):O&&O.isPerspectiveCamera?(x.setFromMatrixPosition(O.matrixWorld),_.set(S.x,S.y,.5).unproject(O).sub(x).normalize()):O&&O.isOrthographicCamera?(x.set(S.x,S.y,(O.near+O.far)/(O.near-O.far)).unproject(O),_.set(0,0,-1).transformDirection(O.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+O.type),this.el.setAttribute("raycaster",C),w.type==="touchmove"&&w.preventDefault()}}(),onCursorDown:function(_){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&_.type==="touchstart"&&(this.onMouseMove(_),this.el.components.raycaster.checkIntersections(),_.preventDefault()),this.data.rayOrigin==="xrselect"&&_.type==="selectstart"&&(this.activeXRInput=_.inputSource,this.onMouseMove(_),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit(p.MOUSEDOWN,_),this.cursorDownEl=this.intersectedEl},onCursorUp:function(_){if(this.isCursorDown){this.isCursorDown=!1;var S=this.data;this.twoWayEmit(p.MOUSEUP,_),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(p.MOUSEUP,this.intersectedEventDetail)),(!S.fuse||S.rayOrigin==="mouse"||S.rayOrigin==="xrselect")&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(p.CLICK,_),S.rayOrigin==="xrselect"&&this.activeXRInput===_.inputSource&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,_.type==="touchend"&&_.preventDefault()}},onIntersection:function(_){var S,x=this.el,C,w,T;C=_.detail.els[0]===x?1:0,T=_.detail.intersections[C],w=_.detail.els[C],w&&this.intersectedEl!==w&&(this.intersectedEl&&(S=this.el.components.raycaster.getIntersection(this.intersectedEl),S&&S.distance<=T.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(w,T)))},onIntersectionCleared:function(_){var S=_.detail.clearedEls;S.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var _=this.el.sceneEl.xrSession,S=this;_&&this.data.rayOrigin!=="mouse"&&(y.DOWN.forEach(function(x){_.addEventListener(x,S.onCursorDown)}),y.UP.forEach(function(x){_.addEventListener(x,S.onCursorUp)}))},setIntersection:function(_,S){var x=this.el,C=this.data,w=this;this.intersectedEl!==_&&(this.intersectedEl=_,x.addState(v.HOVERING),_.addState(v.HOVERED),this.twoWayEmit(p.MOUSEENTER),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(E),!(C.fuseTimeout===0||!C.fuse||C.rayOrigin==="xrselect"||C.rayOrigin==="mouse")&&(x.addState(v.FUSING),this.twoWayEmit(p.FUSING),this.fuseTimeout=setTimeout(function(){x.removeState(v.FUSING),w.twoWayEmit(p.CLICK)},C.fuseTimeout)))},clearCurrentIntersection:function(_){var S,x,C,w=this.el;this.intersectedEl&&(this.intersectedEl.removeState(v.HOVERED),w.removeState(v.HOVERING),w.removeState(v.FUSING),this.twoWayEmit(p.MOUSELEAVE),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(E),this.intersectedEl=null,clearTimeout(this.fuseTimeout),_!==!0&&(C=this.el.components.raycaster.intersections,C.length!==0&&(S=C[0].object.el===w?1:0,x=C[S],x&&this.setIntersection(x.object.el,x))))},twoWayEmit:function(_,S){var x=this.el,C=this.intersectedEl,w;function T(O,B){S instanceof MouseEvent?O.mouseEvent=S:typeof TouchEvent<"u"&&S instanceof TouchEvent&&(O.touchEvent=S)}w=this.el.components.raycaster.getIntersection(C),this.eventDetail.intersectedEl=C,this.eventDetail.intersection=w,T(this.eventDetail),x.emit(_,this.eventDetail),C&&(this.intersectedEventDetail.intersection=w,T(this.intersectedEventDetail),C.emit(_,this.intersectedEventDetail))}})},"./src/components/generic-tracked-controller-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/tracked-controls.js"),p=A.checkControllerPresentAndSetup,v=A.emitIfAxesChanged,g=A.onButtonEvent,y="generic",E={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]};u.exports.Component=d("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"},disabled:{default:!1}},after:["tracked-controls"],mapping:E,bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var _=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(S){g(S.detail.id,"down",_)},this.onButtonUp=function(S){g(S.detail.id,"up",_)},this.onButtonTouchStart=function(S){g(S.detail.id,"touchstart",_)},this.onButtonTouchEnd=function(S){g(S.detail.id,"touchend",_)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.lastControllerCheck=0,this.bindMethods(),this.el.addEventListener("controllerconnected",function(S){S.detail.name!==_.name&&(_.wasControllerConnected=!0,_.removeEventListeners(),_.removeControllersUpdateListener())})},addEventListeners:function(){var _=this.el;_.addEventListener("buttonchanged",this.onButtonChanged),_.addEventListener("buttondown",this.onButtonDown),_.addEventListener("buttonup",this.onButtonUp),_.addEventListener("touchstart",this.onButtonTouchStart),_.addEventListener("touchend",this.onButtonTouchEnd),_.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var _=this.el;_.removeEventListener("buttonchanged",this.onButtonChanged),_.removeEventListener("buttondown",this.onButtonDown),_.removeEventListener("buttonup",this.onButtonUp),_.removeEventListener("touchstart",this.onButtonTouchStart),_.removeEventListener("touchend",this.onButtonTouchEnd),_.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var _=this.data,S=_.hand?_.hand:void 0;p(this,y,{hand:S,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var _=this.el,S=this.data;if(this.el.components["tracked-controls"]){this.removeEventListeners();return}_.setAttribute("tracked-controls",{hand:S.hand,idPrefix:y,orientationOffset:S.orientationOffset,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(_){var S=this.mapping.buttons[_.detail.id];S&&this.el.emit(S+"changed",_.detail.state)},onAxisMoved:function(_){v(this,this.mapping.axes,_)},initDefaultModel:function(){var _=this.modelEl=document.createElement("a-entity");_.setAttribute("geometry",{primitive:"sphere",radius:.03}),_.setAttribute("material",{color:this.data.color}),this.el.appendChild(_),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}})},"./src/components/geometry.js":(u,m,c)=>{var d=c("./src/core/geometry.js").geometries,A=c("./src/core/geometry.js").geometryNames,p=c("./src/core/component.js").registerComponent,v=c("./src/lib/three.js"),g=new v.BufferGeometry;u.exports.Component=p("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:A,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(y){var E=this.data,_=this.el,S,x=this.system;this.geometry&&(x.unuseGeometry(y),this.geometry=null),this.geometry=x.getOrCreateGeometry(E),S=_.getObject3D("mesh"),S?S.geometry=this.geometry:(S=new v.Mesh,S.geometry=this.geometry,this.el.getAttribute("material")||(S.material=new v.MeshStandardMaterial({color:Math.random()*16777215,metalness:0,roughness:.5})),_.setObject3D("mesh",S))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=g,this.geometry=null},updateSchema:function(y){var E=this.oldData&&this.oldData.primitive,_=y.primitive,S=d[_]&&d[_].schema;if(!S)throw new Error("Unknown geometry schema `"+_+"`");E&&E===_||this.extendSchema(S)}})},"./src/components/gltf-model.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=c("./src/utils/index.js"),v=p.debug("components:gltf-model:warn");u.exports.Component=d("gltf-model",{schema:{type:"model"},init:function(){var g=this,y=this.system.getDRACOLoader(),E=this.system.getMeshoptDecoder(),_=this.system.getKTX2Loader();this.model=null,this.loader=new A.GLTFLoader,y&&this.loader.setDRACOLoader(y),E?this.ready=E.then(function(S){g.loader.setMeshoptDecoder(S)}):this.ready=Promise.resolve(),_&&this.loader.setKTX2Loader(_)},update:function(){var g=this,y=this.el,E=this.data;E&&(this.remove(),this.ready.then(function(){g.loader.load(E,function(S){g.model=S.scene||S.scenes[0],g.model.animations=S.animations,y.setObject3D("mesh",g.model),y.emit("model-loaded",{format:"gltf",model:g.model})},void 0,function(S){var x=S&&S.message?S.message:"Failed to load glTF model";v(x),y.emit("model-error",{format:"gltf",src:E})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},"./src/components/grabbable.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;d("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}})},"./src/components/hand-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/constants/index.js").AFRAME_CDN_ROOT,p={toonLeft:A+"controllers/hands/leftHand.glb",toonRight:A+"controllers/hands/rightHand.glb",lowPolyLeft:A+"controllers/hands/leftHandLow.glb",lowPolyRight:A+"controllers/hands/rightHandLow.glb",highPolyLeft:A+"controllers/hands/leftHandHigh.glb",highPolyRight:A+"controllers/hands/rightHandHigh.glb"},v={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},g={};g[v.fist]="grip",g[v.thumbUp]="pistol",g[v.point]="pointing",u.exports.Component=d("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var _=this,S=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){_.handleButton("grip","down")},this.onGripUp=function(){_.handleButton("grip","up")},this.onTrackpadDown=function(){_.handleButton("trackpad","down")},this.onTrackpadUp=function(){_.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){_.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){_.handleButton("trackpad","touchend")},this.onTriggerDown=function(){_.handleButton("trigger","down")},this.onTriggerUp=function(){_.handleButton("trigger","up")},this.onTriggerTouchStart=function(){_.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){_.handleButton("trigger","touchend")},this.onGripTouchStart=function(){_.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){_.handleButton("grip","touchend")},this.onThumbstickDown=function(){_.handleButton("thumbstick","down")},this.onThumbstickUp=function(){_.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){_.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){_.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){_.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){_.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){_.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){_.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),S.addEventListener("controllerconnected",this.onControllerConnected),S.addEventListener("controllerdisconnected",this.onControllerDisconnected),S.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(_,S){var x=this.el.getObject3D("mesh");!x||!x.mixer||x.mixer.update(S/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var _=this.el;_.addEventListener("gripdown",this.onGripDown),_.addEventListener("gripup",this.onGripUp),_.addEventListener("trackpaddown",this.onTrackpadDown),_.addEventListener("trackpadup",this.onTrackpadUp),_.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),_.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),_.addEventListener("triggerdown",this.onTriggerDown),_.addEventListener("triggerup",this.onTriggerUp),_.addEventListener("triggertouchstart",this.onTriggerTouchStart),_.addEventListener("triggertouchend",this.onTriggerTouchEnd),_.addEventListener("griptouchstart",this.onGripTouchStart),_.addEventListener("griptouchend",this.onGripTouchEnd),_.addEventListener("thumbstickdown",this.onThumbstickDown),_.addEventListener("thumbstickup",this.onThumbstickUp),_.addEventListener("abuttontouchstart",this.onAorXTouchStart),_.addEventListener("abuttontouchend",this.onAorXTouchEnd),_.addEventListener("bbuttontouchstart",this.onBorYTouchStart),_.addEventListener("bbuttontouchend",this.onBorYTouchEnd),_.addEventListener("xbuttontouchstart",this.onAorXTouchStart),_.addEventListener("xbuttontouchend",this.onAorXTouchEnd),_.addEventListener("ybuttontouchstart",this.onBorYTouchStart),_.addEventListener("ybuttontouchend",this.onBorYTouchEnd),_.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),_.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var _=this.el;_.removeEventListener("gripdown",this.onGripDown),_.removeEventListener("gripup",this.onGripUp),_.removeEventListener("trackpaddown",this.onTrackpadDown),_.removeEventListener("trackpadup",this.onTrackpadUp),_.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),_.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),_.removeEventListener("triggerdown",this.onTriggerDown),_.removeEventListener("triggerup",this.onTriggerUp),_.removeEventListener("triggertouchstart",this.onTriggerTouchStart),_.removeEventListener("triggertouchend",this.onTriggerTouchEnd),_.removeEventListener("griptouchstart",this.onGripTouchStart),_.removeEventListener("griptouchend",this.onGripTouchEnd),_.removeEventListener("thumbstickdown",this.onThumbstickDown),_.removeEventListener("thumbstickup",this.onThumbstickUp),_.removeEventListener("abuttontouchstart",this.onAorXTouchStart),_.removeEventListener("abuttontouchend",this.onAorXTouchEnd),_.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),_.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),_.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),_.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),_.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),_.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),_.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),_.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(_){var S,x=this.el,C=this.data.hand,w=this.data.handModelStyle,T=this.data.color,O=this;if(S={hand:C,model:!1},C!==_){var B=p[w+C.charAt(0).toUpperCase()+C.slice(1)];this.loader.load(B,function(P){var L=P.scene.children[0],N=C==="left"?Math.PI/2:-Math.PI/2,F=x.sceneEl.hasWebXR?-Math.PI/2:0;L.mixer=new THREE.AnimationMixer(L),O.clips=P.animations,x.setObject3D("mesh",L),L.traverse(function(z){z.isMesh&&(z.material.color=new THREE.Color(T))}),L.position.set(0,0,0),L.rotation.set(F,0,N),x.setAttribute("magicleap-controls",S),x.setAttribute("vive-controls",S),x.setAttribute("oculus-touch-controls",S),x.setAttribute("pico-controls",S),x.setAttribute("windows-motion-controls",S),x.setAttribute("hp-mixed-reality-controls",S)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(_,S){var x,C=S==="down",w=S==="touchstart";if(S.indexOf("touch")===0){if(w===this.touchedButtons[_])return;this.touchedButtons[_]=w}else{if(C===this.pressedButtons[_])return;this.pressedButtons[_]=C}x=this.gesture,this.gesture=this.determineGesture(),this.gesture!==x&&(this.animateGesture(this.gesture,x),this.emitGestureEvents(this.gesture,x))},determineGesture:function(){var _,S=this.pressedButtons.grip,x=this.pressedButtons.surface||this.touchedButtons.surface,C=this.pressedButtons.trackpad||this.touchedButtons.trackpad,w=this.pressedButtons.trigger||this.touchedButtons.trigger,T=this.touchedButtons.AorX||this.touchedButtons.BorY,O=E(this.el.components["tracked-controls"]);return O?S||w?_=v.fist:C&&(_=v.point):S?x||T||C?_=w?v.fist:v.point:_=w?v.thumbUp:v.pointThumb:w&&(_=v.hold),_},getClip:function(_){var S,x;for(x=0;x<this.clips.length;x++)if(S=this.clips[x],S.name===_)return S},animateGesture:function(_,S){if(_){this.playAnimation(_||v.open,S,!1);return}this.playAnimation(S,S,!0)},emitGestureEvents:function(_,S){var x=this.el,C;S!==_&&(C=y(S,!1),C&&x.emit(C),C=y(_,!0),C&&x.emit(C))},playAnimation:function(_,S,x){var C,w,T=this.el.getObject3D("mesh"),O;if(T){if(C=this.getClip(_),O=T.mixer.clipAction(C),x){O.paused=!1,O.timeScale=-1;return}if(O.clampWhenFinished=!0,O.loop=THREE.LoopOnce,O.repetitions=0,O.timeScale=1,O.time=0,O.weight=1,!S){T.mixer.stopAllAction(),O.play();return}C=this.getClip(S),O.reset(),O.play(),w=T.mixer.clipAction(C),w.crossFadeTo(O,.15,!0)}}});function y(_,S){var x;if(_){if(x=g[_],x==="grip")return x+(S?"close":"open");if(x==="point")return x+(S?"up":"down");if(x==="pointing"||x==="pistol")return x+(S?"start":"end")}}function E(_){var S=_&&_.controller,x=S&&(S.id&&S.id.indexOf("OpenVR ")===0||S.profiles&&S.profiles[0]&&S.profiles[0]==="htc-vive");return x}},"./src/components/hand-tracking-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/core/a-entity.js").AEntity,p=c("./src/utils/tracked-controls.js"),v=p.checkControllerPresentAndSetup,g=c("./src/constants/index.js").AFRAME_CDN_ROOT,y=g+"controllers/oculus-hands/v4/left.glb",E=g+"controllers/oculus-hands/v4/right.glb",_=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],S=0,x=4,C=9,w=.015,T=.1;u.exports.Component=d("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var O=0;O<this.jointEls.length;++O)this.jointEls[O].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var O=0;O<this.jointEls.length;++O)this.jointEls[O].object3D.visible=!1},init:function(){var O=this.el.sceneEl,B=O.getAttribute("webxr"),P=B.optionalFeatures;P.indexOf("hand-tracking")===-1&&(P.push("hand-tracking"),O.setAttribute("webxr",B)),this.wristObject3D=new THREE.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3,wristRotation:new THREE.Quaternion},this.indexTipPosition=new THREE.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*_.length),this.jointRadii=new Float32Array(_.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.el.object3D.visible=!1,this.wristObject3D.visible=!1},onChildAttached:function(O){this.addChildEntity(O.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var O=this.jointEls,B=this.skinnedMesh,P=this.data.modelOpacity!==1;B&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=P,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var L=0;L<O.length;L++)O[L].setAttribute("material",{color:this.data.modelColor,transparent:P,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var O=this,B=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,!!B){var P=O.el.sceneEl.systems.webxr.sessionReferenceSpaceType;B.requestReferenceSpace(P).then(function(L){O.referenceSpace=L}).catch(function(L){throw O.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(P,"tracked-controls-webxr uses reference space "+P),L})}},checkIfControllerPresent:function(){var O=this.data,B=O.hand?O.hand:void 0;v(this,"",{hand:B,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var O=this.el.sceneEl,B=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,P=O.frame,L=this.el.components["tracked-controls-webxr"],N=this.referenceSpace;!B||!P||!N||!L||(this.hasPoses=!1,B.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=P.fillPoses(B.hand.values(),N,this.jointPoses)&&P.fillJointRadii(B.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:function(){var O=new THREE.Matrix4;return function(){var B=this.wristObject3D;!B||!this.hasPoses||(O.fromArray(this.jointPoses,S*16),B.position.setFromMatrixPosition(O),B.quaternion.setFromRotationMatrix(O))}}(),updateHandModel:function(){this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(O){for(var B=this.bones,P=0;P<B.length;P++)if(B[P].name===O)return B[P];return null},updateHandMeshModel:function(){var O=new THREE.Matrix4;return function(){var B=0,P=this.jointPoses,L=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(!(!L||!this.mesh)&&(this.mesh.visible=!1,!!this.hasPoses))for(var N of L.hand.values()){var F=this.getBone(N.jointName);F!=null&&(this.mesh.visible=!0,O.fromArray(P,B*16),F.position.setFromMatrixPosition(O),F.quaternion.setFromRotationMatrix(O)),B++}}}(),updateHandDotsModel:function(){for(var O=this.jointPoses,B=this.jointRadii,P=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,L,N,F=0;F<P.hand.size;F++)L=this.jointEls[F],N=L.object3D,L.object3D.visible=this.hasPoses,this.hasPoses&&(N.matrix.fromArray(O,F*16),N.matrix.decompose(N.position,N.rotation,N.scale),L.setAttribute("scale",{x:B[F],y:B[F],z:B[F]}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var O=new THREE.Vector3,B=new THREE.Matrix4;return function(){var P=this.indexTipPosition,L=this.pinchEventDetail;if(this.hasPoses){O.setFromMatrixPosition(B.fromArray(this.jointPoses,x*16)),P.setFromMatrixPosition(B.fromArray(this.jointPoses,C*16)),L.wristRotation.setFromRotationMatrix(B.fromArray(this.jointPoses,S*16));var N=P.distanceTo(O);N<w&&this.isPinched===!1&&(this.isPinched=!0,this.pinchDistance=N,L.position.copy(P).add(O).multiplyScalar(.5),this.el.emit("pinchstarted",L)),N>this.pinchDistance+this.pinchDistance*T&&this.isPinched===!0&&(this.isPinched=!1,L.position.copy(P).add(O).multiplyScalar(.5),this.el.emit("pinchended",L)),this.isPinched&&(L.position.copy(P).add(O).multiplyScalar(.5),this.el.emit("pinchmoved",L))}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var O=this.el,B=this.data;if(O.setAttribute("tracked-controls",{id:"",hand:B.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh){this.mesh!==O.getObject3D("mesh")&&O.setObject3D("mesh",this.mesh);return}this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var O=this.el,B;this.checkIfControllerPresent(),B=O.components["tracked-controls"]&&O.components["tracked-controls"].controller,this.mesh&&B&&B.hand&&B.hand instanceof XRHand&&O.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var O=this.data;O.modelStyle==="dots"&&this.initDotsModel(),O.modelStyle==="mesh"&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(this.jointEls.length===0){for(var O=0;O<_.length;++O){var B=this.jointEl=document.createElement("a-entity");B.setAttribute("geometry",{primitive:"sphere",radius:1}),B.object3D.visible=!1,this.el.appendChild(B),this.jointEls.push(B)}this.updateModelMaterial()}},initMeshHandModel:function(){var O=this.data.hand==="left"?y:E;this.el.setAttribute("gltf-model",O)},onModelLoaded:function(){var O=this.mesh=this.el.getObject3D("mesh").children[0],B=this.skinnedMesh=O.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=B.skeleton.bones,this.el.removeObject3D("mesh"),O.position.set(0,0,0),O.rotation.set(0,0,0),B.frustumCulled=!1,B.material=new THREE.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",O))},setupChildrenEntities:function(){for(var O=this.el.children,B=0;B<O.length;++B)O[B]instanceof A&&this.addChildEntity(O[B])},addChildEntity:function(O){O instanceof A&&this.wristObject3D.add(O.object3D)}})},"./src/components/hand-tracking-grab-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js");d("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var p=this.el,v=this.data,g;v.hand==="right"?g="components.hand-tracking-controls.bones.3":g="components.hand-tracking-controls.bones.21",p.setAttribute("hand-tracking-controls",{hand:v.hand}),p.setAttribute("obb-collider",{trackedObject3D:g,size:.04}),this.auxMatrix=new A.Matrix4,this.auxQuaternion=new A.Quaternion,this.auxQuaternion2=new A.Quaternion,this.auxVector=new A.Vector3,this.auxVector2=new A.Vector3,this.grabbingObjectPosition=new A.Vector3,this.grabbedObjectPosition=new A.Vector3,this.grabbedObjectPositionDelta=new A.Vector3,this.grabDeltaPosition=new A.Vector3,this.grabInitialRotation=new A.Quaternion,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded),this.onPinchMoved=this.onPinchMoved.bind(this),this.el.addEventListener("pinchmoved",this.onPinchMoved)},transferEntityOwnership:function(){for(var p,v=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),g=0;g<v.length;++g)p=v[g].components["hand-tracking-grab-controls"],p!==this&&this.grabbedEl&&this.grabbedEl===p.grabbedEl&&p.releaseGrabbedEntity();return!1},onCollisionStarted:function(p){var v=p.detail.withEl;this.collidedEl||v.getAttribute("grabbable")&&(this.collidedEl=v,this.grabbingObject3D=p.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,!this.grabbedEl&&(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(p){this.collidedEl&&(this.pinchPosition=p.detail.position,this.wristRotation=p.detail.wristRotation,this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},onPinchMoved:function(p){this.wristRotation=p.detail.wristRotation},releaseGrabbedEntity:function(){var p=this.grabbedEl;p&&(p.object3D.updateMatrixWorld=this.originalUpdateMatrixWorld,p.object3D.matrixAutoUpdate=!0,p.object3D.matrixWorldAutoUpdate=!0,p.object3D.matrixWorld.decompose(this.auxVector,this.auxQuaternion,this.auxVector2),p.object3D.position.copy(this.auxVector),p.object3D.quaternion.copy(this.auxQuaternion),this.el.emit("grabended",{grabbedEl:p}),this.grabbedEl=void 0)},grab:function(){var p=this.grabbedEl,v;v=p.object3D.getWorldPosition(this.grabbedObjectPosition),this.grabDeltaPosition.copy(v).sub(this.pinchPosition),this.grabInitialRotation.copy(this.auxQuaternion.copy(this.wristRotation).invert()),this.originalUpdateMatrixWorld=p.object3D.updateMatrixWorld,p.object3D.updateMatrixWorld=function(){},p.object3D.updateMatrixWorldChildren=function(g){for(var y=this.children,E=0,_=y.length;E<_;E++){var S=y[E];(S.matrixWorldAutoUpdate===!0||g===!0)&&S.updateMatrixWorld(!0)}},p.object3D.matrixAutoUpdate=!1,p.object3D.matrixWorldAutoUpdate=!1,this.el.emit("grabstarted",{grabbedEl:p})},tock:function(){var p=this.auxMatrix,v=this.auxQuaternion,g=this.auxQuaternion2,y,E=this.grabbedEl;E&&(y=E.object3D,y.getWorldQuaternion(g),y.matrixWorld.identity(),p.identity(),p.makeTranslation(this.pinchPosition),y.matrixWorld.multiply(p),p.identity(),p.makeRotationFromQuaternion(v.copy(this.wristRotation).multiply(this.grabInitialRotation)),y.matrixWorld.multiply(p),p.identity(),p.makeTranslation(this.grabDeltaPosition),y.matrixWorld.multiply(p),p.identity(),p.makeRotationFromQuaternion(g),y.matrixWorld.multiply(p),p.makeScale(E.object3D.scale.x,E.object3D.scale.y,E.object3D.scale.z),y.matrixWorld.multiply(p),y.updateMatrixWorldChildren())}})},"./src/components/hide-on-enter-ar.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("hide-on-enter-ar",{init:function(){var A=this;this.el.sceneEl.addEventListener("enter-vr",function(){A.el.sceneEl.is("ar-mode")&&(A.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){A.el.object3D.visible=!0})}})},"./src/components/hide-on-enter-vr.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("hide-on-enter-vr",{init:function(){var A=this;this.el.sceneEl.addEventListener("enter-vr",function(){A.el.sceneEl.is("vr-mode")&&(A.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){A.el.object3D.visible=!0})}})},"./src/components/hp-mixed-reality-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=c("./src/utils/tracked-controls.js"),v=p.checkControllerPresentAndSetup,g=p.emitIfAxesChanged,y=p.onButtonEvent,E="hp-mixed-reality",_=c("./src/constants/index.js").AFRAME_CDN_ROOT,S=_+"controllers/hp/mixed-reality/",x={x:0,y:0,z:.06},C={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},w={left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}};u.exports.Component=d("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:w,init:function(){var T=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(O){y(O.detail.id,"down",T,T.data.hand)},this.onButtonUp=function(O){y(O.detail.id,"up",T,T.data.hand)},this.onButtonTouchEnd=function(O){y(O.detail.id,"touchend",T,T.data.hand)},this.onButtonTouchStart=function(O){y(O.detail.id,"touchstart",T,T.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var T=this.data;this.controllerIndex=T.hand==="right"?0:T.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var T=this.el;T.addEventListener("buttonchanged",this.onButtonChanged),T.addEventListener("buttondown",this.onButtonDown),T.addEventListener("buttonup",this.onButtonUp),T.addEventListener("touchstart",this.onButtonTouchStart),T.addEventListener("touchend",this.onButtonTouchEnd),T.addEventListener("axismove",this.onAxisMoved),T.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var T=this.el;T.removeEventListener("buttonchanged",this.onButtonChanged),T.removeEventListener("buttondown",this.onButtonDown),T.removeEventListener("buttonup",this.onButtonUp),T.removeEventListener("touchstart",this.onButtonTouchStart),T.removeEventListener("touchend",this.onButtonTouchEnd),T.removeEventListener("axismove",this.onAxisMoved),T.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var T=this.data;v(this,E,{index:this.controllerIndex,hand:T.hand})},injectTrackedControls:function(){var T=this.el,O=this.data;T.setAttribute("tracked-controls",{idPrefix:E,hand:O.hand,controller:this.controllerIndex,orientationOffset:O.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",S+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(T){var O=this.mapping[this.data.hand].buttons[T.detail.id],B;O&&(O==="trigger"&&(B=T.detail.state.value,console.log("analog value of trigger press: "+B)),this.el.emit(O+"changed",T.detail.state))},onModelLoaded:function(T){var O=T.detail.model;this.data.model&&(O.position.copy(x),O.rotation.copy(C),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new A.Vector3(0,0,0)}))},onAxisMoved:function(T){g(this,this.mapping.axes,T)}})},"./src/components/index.js":(u,m,c)=>{c("./src/components/animation.js"),c("./src/components/anchored.js"),c("./src/components/camera.js"),c("./src/components/cursor.js"),c("./src/components/geometry.js"),c("./src/components/generic-tracked-controller-controls.js"),c("./src/components/gltf-model.js"),c("./src/components/grabbable.js"),c("./src/components/hand-tracking-controls.js"),c("./src/components/hand-tracking-grab-controls.js"),c("./src/components/hand-controls.js"),c("./src/components/hide-on-enter-ar.js"),c("./src/components/hide-on-enter-vr.js"),c("./src/components/hp-mixed-reality-controls.js"),c("./src/components/layer.js"),c("./src/components/laser-controls.js"),c("./src/components/light.js"),c("./src/components/line.js"),c("./src/components/link.js"),c("./src/components/look-controls.js"),c("./src/components/magicleap-controls.js"),c("./src/components/material.js"),c("./src/components/obb-collider.js"),c("./src/components/obj-model.js"),c("./src/components/oculus-go-controls.js"),c("./src/components/oculus-touch-controls.js"),c("./src/components/pico-controls.js"),c("./src/components/position.js"),c("./src/components/raycaster.js"),c("./src/components/rotation.js"),c("./src/components/scale.js"),c("./src/components/shadow.js"),c("./src/components/sound.js"),c("./src/components/text.js"),c("./src/components/tracked-controls.js"),c("./src/components/tracked-controls-webvr.js"),c("./src/components/tracked-controls-webxr.js"),c("./src/components/visible.js"),c("./src/components/valve-index-controls.js"),c("./src/components/vive-controls.js"),c("./src/components/vive-focus-controls.js"),c("./src/components/wasd-controls.js"),c("./src/components/windows-motion-controls.js"),c("./src/components/scene/ar-hit-test.js"),c("./src/components/scene/background.js"),c("./src/components/scene/debug.js"),c("./src/components/scene/device-orientation-permission-ui.js"),c("./src/components/scene/embedded.js"),c("./src/components/scene/inspector.js"),c("./src/components/scene/fog.js"),c("./src/components/scene/keyboard-shortcuts.js"),c("./src/components/scene/pool.js"),c("./src/components/scene/real-world-meshing.js"),c("./src/components/scene/reflection.js"),c("./src/components/scene/screenshot.js"),c("./src/components/scene/stats.js"),c("./src/components/scene/xr-mode-ui.js")},"./src/components/laser-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/index.js");d("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var p=this.config,v=this.data,g=this.el,y=this,E={hand:v.hand,model:v.model};g.setAttribute("hp-mixed-reality-controls",E),g.setAttribute("magicleap-controls",E),g.setAttribute("oculus-go-controls",E),g.setAttribute("oculus-touch-controls",E),g.setAttribute("pico-controls",E),g.setAttribute("valve-index-controls",E),g.setAttribute("vive-controls",E),g.setAttribute("vive-focus-controls",E),g.setAttribute("windows-motion-controls",E),g.setAttribute("generic-tracked-controller-controls",{hand:E.hand}),g.addEventListener("controllerconnected",_),g.addEventListener("controllerdisconnected",S),g.addEventListener("controllermodelready",function(x){_(x),y.modelReady=!0});function _(x){var C=p[x.detail.name];if(C){var w=A.extend({showLine:!0},C.raycaster||{});x.detail.rayOrigin&&(w.origin=x.detail.rayOrigin.origin,w.direction=x.detail.rayOrigin.direction,w.showLine=!0),x.detail.rayOrigin||!y.modelReady?g.setAttribute("raycaster",w):g.setAttribute("raycaster","showLine",!0),g.setAttribute("cursor",A.extend({fuse:!1},C.cursor))}}function S(x){var C=p[x.detail.name];C&&g.setAttribute("raycaster","showLine",!1)}},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},"./src/components/layer.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/index.js"),p=A.debug("components:layer:warn");u.exports.Component=d("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var g=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=g.createFramebuffer();var y=this.el.sceneEl.getAttribute("webxr"),E=y.requiredFeatures;E.indexOf("layers")===-1&&(E.push("layers"),this.el.sceneEl.setAttribute("webxr",y)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(g){this.data.src!==g.src&&this.updateSrc()},updateSrc:function(){var g=this.data.type;if(this.texture=void 0,g==="quad"){this.loadQuadImage();return}if(g==="monocubemap"||g==="stereocubemap"){this.loadCubeMapImages();return}},loadCubeMapImages:function(){var g,y=this.xrGLFactory,E=this.el.sceneEl.frame,_=this.data.src,S=this.data.type;this.visibilityChanged=!1,this.layer&&(S!=="monocubemap"&&S!=="stereocubemap"||(_.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,S==="monocubemap"?(g=y.getSubImage(this.layer,E),this.loadCubeMapImage(g.colorTexture,_,0)):(g=y.getSubImage(this.layer,E,"left"),this.loadCubeMapImage(g.colorTexture,_,0),g=y.getSubImage(this.layer,E,"right"),this.loadCubeMapImage(g.colorTexture,_,6))))},loadQuadImage:function(){var g=this.data.src,y=this;this.el.sceneEl.systems.material.loadTexture(g,{src:g},function(_){y.el.sceneEl.renderer.initTexture(_),y.texture=_,g.tagName==="VIDEO"&&setTimeout(function(){y.textureIsVideo=!0},1e3),y.layer&&(y.layer.height=y.data.height/2||y.texture.image.height/1e3,y.layer.width=y.data.width/2||y.texture.image.width/1e3,y.needsRedraw=!0),y.updateQuadPanel()})},preGenerateCubeMapTextures:function(g,y){this.data.type==="monocubemap"?this.generateCubeMapTextures(g,0,y):(this.generateCubeMapTextures(g,0,y),this.generateCubeMapTextures(g,6,y))},generateCubeMapTextures:function(g,y,E){for(var _=this.data,S=this.cubeFaceSize,x=Math.min(g.width,g.height),C=[],w,T,O=0;O<6;O++){var B=document.createElement("CANVAS");B.width=B.height=S;var P=B.getContext("2d");_.rotateCubemap&&(O===2||O===3)&&(P.save(),P.translate(S,S),P.rotate(Math.PI)),P.drawImage(g,(O+y)*x,0,x,x,0,0,S,S),P.restore(),E&&E(),C.push(B)}return _.rotateCubemap&&(w=C[0],T=C[1],C[0]=T,C[1]=w,w=C[4],T=C[5],C[4]=T,C[5]=w),E&&E(),C},loadCubeMapImage:function(g,y,E){var _=this.el.sceneEl.renderer.getContext(),S;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,!1),_.bindTexture(_.TEXTURE_CUBE_MAP,g),!y.complete||this.loadingScreen?S=this.loadingScreenImages:S=this.generateCubeMapTextures(y,E);var x=0;S.forEach(function(C,w){_.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+w,0,0,0,_.RGBA,_.UNSIGNED_BYTE,C),x=_.getError()}),x!==0&&console.log("renderingError, WebGL Error Code: "+x),_.bindTexture(_.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&(!this.layer&&(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),!(!this.needsRedraw&&!this.layer.needsRedraw&&!this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var g=this,y=this.data.type;if(this.el.sceneEl.xrSession.onvisibilitychange=function(E){g.visibilityChanged=E.session.visibilityState!=="hidden"},y==="quad"){this.initQuadLayer();return}if(y==="monocubemap"||y==="stereocubemap"){this.initCubeMapLayer();return}},initQuadLayer:function(){var g=this.el.sceneEl,y=g.renderer.getContext(),E=this.xrGLFactory=new XRWebGLBinding(g.xrSession,y);this.texture&&(this.layer=E.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),g.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var g=this.data.src,y=this.el.sceneEl,E=y.renderer.getContext(),_=E.getParameter(E.MAX_CUBE_MAP_TEXTURE_SIZE),S=this.cubeFaceSize=Math.min(_,Math.min(g.width,g.height)),x=this.xrGLFactory=new XRWebGLBinding(y.xrSession,E);this.layer=x.createCubeLayer({space:this.referenceSpace,viewPixelWidth:S,viewPixelHeight:S,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),y.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var g=this.cubeFaceSize,y=this.loadingScreenImages=[],E=0;E<6;E++){var _=document.createElement("CANVAS");_.width=_.height=g;var S=_.getContext("2d");_.width=_.height=g,S.fillStyle="black",S.fillRect(0,0,g,g),E!==2&&E!==3&&(S.translate(g,0),S.scale(-1,1),S.fillStyle="white",S.font="30px Arial",S.fillText("Loading",g/2,g/2)),y.push(_)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(g){this.layerEnabled=g,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var g=this.quadPanelEl;this.quadPanelEl||(g=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(g)),g.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),g.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var g=this.el.sceneEl,y=this.el.sceneEl.renderer.getContext(),E=this.xrGLFactory.getSubImage(this.layer,g.frame),_=g.renderer.properties.get(this.texture).__webglTexture,S=y.getParameter(y.FRAMEBUFFER_BINDING);y.viewport(E.viewport.x,E.viewport.y,E.viewport.width,E.viewport.height),y.bindFramebuffer(y.FRAMEBUFFER,this.frameBuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,E.colorTexture,0),v(y,_,E,this.data.src),y.bindFramebuffer(y.FRAMEBUFFER,S)},updateTransform:function(){var g=this.el,y=this.position,E=this.quaternion;g.object3D.updateMatrixWorld(),y.setFromMatrixPosition(g.object3D.matrixWorld),E.setFromRotationMatrix(g.object3D.matrixWorld),this.layerEnabled||y.set(0,0,1e8),this.layer.transform=new XRRigidTransform(y,E)},onEnterVR:function(){var g=this.el.sceneEl,y=g.xrSession;if(!g.hasWebXR||!XRWebGLBinding||!y){p("The layer component requires WebXR and the layers API enabled");return}y.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(g){this.referenceSpace=g}});function v(g,y,E,_){var S=g.createFramebuffer(),x=E.viewport.x,C=E.viewport.y,w=E.viewport.x+E.viewport.width,T=E.viewport.y+E.viewport.height;_.tagName==="VIDEO"&&(g.bindTexture(g.TEXTURE_2D,y),g.texSubImage2D(g.TEXTURE_2D,0,0,0,_.width,_.height,g.RGB,g.UNSIGNED_BYTE,_)),g.bindFramebuffer(g.READ_FRAMEBUFFER,S),g.framebufferTexture2D(g.READ_FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,y,0),g.readBuffer(g.COLOR_ATTACHMENT0),g.blitFramebuffer(0,0,_.width,_.height,x,C,w,T,g.COLOR_BUFFER_BIT,g.NEAREST),g.bindFramebuffer(g.READ_FRAMEBUFFER,null),g.deleteFramebuffer(S)}},"./src/components/light.js":(u,m,c)=>{var d=c("./src/utils/index.js"),A=d.diff,p=c("./src/utils/debug.js"),v=c("./src/core/component.js").registerComponent,g=c("./src/lib/three.js"),y=c("./src/utils/math.js"),E=g.MathUtils.degToRad,_=p("components:light:warn"),S=new g.CubeTextureLoader,x={};u.exports.Component=v("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var C=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(C)},update:function(C){var w=this.data,T=A(w,C),O=this.light,B=this;if(O&&!("type"in T)){var P=!1;Object.keys(T).forEach(function(L){var N=w[L];switch(L){case"color":{O.color.set(N);break}case"groundColor":{O.groundColor.set(N);break}case"angle":{O.angle=E(N);break}case"target":{N===null?(w.type==="spot"||w.type==="directional")&&(O.target=B.defaultTarget):N.hasLoaded?B.onSetTarget(N,O):N.addEventListener("loaded",B.onSetTarget.bind(B,N,O));break}case"envMap":B.updateProbeMap(w,O);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":P||(B.updateShadow(),P=!0);break;case"shadowCameraAutomatic":w.shadowCameraAutomatic?B.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(w.shadowCameraAutomatic)):B.shadowCameraAutomaticEls=[];break;default:O[L]=N}});return}this.setLight(this.data),this.updateShadow()},tick:function(){var C=new g.Box3,w=new g.Vector3,T=new g.Vector3,O=new g.Matrix4,B=new g.Sphere,P=new g.Vector3;return function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof g.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var L=this.light.shadow.camera;L.getWorldDirection(w),L.getWorldPosition(T),O.copy(L.matrixWorld),O.invert(),L.near=1,L.left=1e5,L.right=-1e5,L.top=-1e5,L.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(N){C.setFromObject(N.object3D),C.getBoundingSphere(B);var F=y.distanceOfPointFromPlane(T,w,B.center),z=y.nearestPointInPlane(T,w,B.center,P),G=z.applyMatrix4(O);L.near=Math.min(-F-B.radius-1,L.near),L.left=Math.min(-B.radius+G.x,L.left),L.right=Math.max(B.radius+G.x,L.right),L.top=Math.max(B.radius+G.y,L.top),L.bottom=Math.min(-B.radius+G.y,L.bottom)}),L.updateProjectionMatrix()}}}(),setLight:function(C){var w=this.el,T=this.getLight(C);T&&(this.light&&w.removeObject3D("light"),this.light=T,this.light.el=w,w.setObject3D("light",this.light),(C.type==="spot"||C.type==="directional"||C.type==="hemisphere")&&w.getObject3D("light").translateY(-1),C.type==="spot"&&(w.setObject3D("light-target",this.defaultTarget),w.getObject3D("light-target").position.set(0,0,-1)),C.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(C.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var C=this.el,w=this.data,T=this.light;T.castShadow=w.castShadow;var O=C.getObject3D("cameraHelper");if(w.shadowCameraVisible&&!O?C.setObject3D("cameraHelper",new g.CameraHelper(T.shadow.camera)):!w.shadowCameraVisible&&O&&C.removeObject3D("cameraHelper"),!w.castShadow)return T;T.shadow.bias=w.shadowBias,T.shadow.radius=w.shadowRadius,T.shadow.mapSize.height=w.shadowMapHeight,T.shadow.mapSize.width=w.shadowMapWidth,T.shadow.camera.near=w.shadowCameraNear,T.shadow.camera.far=w.shadowCameraFar,T.shadow.camera instanceof g.OrthographicCamera?(T.shadow.camera.top=w.shadowCameraTop,T.shadow.camera.right=w.shadowCameraRight,T.shadow.camera.bottom=w.shadowCameraBottom,T.shadow.camera.left=w.shadowCameraLeft):T.shadow.camera.fov=w.shadowCameraFov,T.shadow.camera.updateProjectionMatrix(),O&&O.update()},getLight:function(C){var w=C.angle,T=new g.Color(C.color);T=T.getHex();var O=C.decay,B=C.distance,P=new g.Color(C.groundColor);P=P.getHex();var L=C.intensity,N=C.type,F=C.target,z=null;switch(N.toLowerCase()){case"ambient":return new g.AmbientLight(T,L);case"directional":return z=new g.DirectionalLight(T,L),this.defaultTarget=z.target,F&&(F.hasLoaded?this.onSetTarget(F,z):F.addEventListener("loaded",this.onSetTarget.bind(this,F,z))),z;case"hemisphere":return new g.HemisphereLight(T,P,L);case"point":return new g.PointLight(T,L,B,O);case"spot":return z=new g.SpotLight(T,L,B,E(w),C.penumbra,O),this.defaultTarget=z.target,F&&(F.hasLoaded?this.onSetTarget(F,z):F.addEventListener("loaded",this.onSetTarget.bind(this,F,z))),z;case"probe":return z=new g.LightProbe,this.updateProbeMap(C,z),z;default:_("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",N)}},updateProbeMap:function(C,w){C.envMap||w.copy(new g.LightProbe),x[C.envMap]instanceof window.Promise&&x[C.envMap].then(function(T){w.copy(T)}),x[C.envMap]instanceof g.LightProbe&&w.copy(x[C.envMap]),x[C.envMap]=new window.Promise(function(T){d.srcLoader.validateCubemapSrc(C.envMap,function(B){S.load(B,function(P){var L=g.LightProbeGenerator.fromCubeTexture(P);x[C.envMap]=L,w.copy(L)})})})},onSetTarget:function(C,w){w.target=C.object3D},remove:function(){var C=this.el;C.removeObject3D("light"),C.getObject3D("cameraHelper")&&C.removeObject3D("cameraHelper")}})},"./src/components/line.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var p=this.data,v,g;g=this.material=new THREE.LineBasicMaterial({color:p.color,opacity:p.opacity,transparent:p.opacity<1,visible:p.visible}),v=this.geometry=new THREE.BufferGeometry,v.setAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(v,g),this.el.setObject3D(this.attrName,this.line)},update:function(p){var v=this.data,g=this.geometry,y=!1,E=this.material,_=g.attributes.position.array;A(v.start,p.start)||(_[0]=v.start.x,_[1]=v.start.y,_[2]=v.start.z,y=!0),A(v.end,p.end)||(_[3]=v.end.x,_[4]=v.end.y,_[5]=v.end.z,y=!0),y&&(g.attributes.position.needsUpdate=!0,g.computeBoundingSphere()),E.color.setStyle(v.color),E.opacity=v.opacity,E.transparent=v.opacity<1,E.visible=v.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}});function A(p,v){return!p||!v?!1:p.x===v.x&&p.y===v.y&&p.z===v.z}},"./src/components/link.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/core/shader.js").registerShader,p=c("./src/lib/three.js");u.exports.Component=d("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new p.Quaternion,this.hiddenEls=[]},update:function(v){var g=this.data,y=this.el,E,_;g.visualAspectEnabled&&(this.initVisualAspect(),E=g.highlighted?g.highlightedColor:g.backgroundColor,_=g.highlighted?g.highlightedColor:g.borderColor,y.setAttribute("material","backgroundColor",E),y.setAttribute("material","strokeColor",_),g.on!==v.on&&this.updateEventListener(),v.peekMode!==void 0&&g.peekMode!==v.peekMode&&this.updatePeekMode(),!(!g.image||v.image===g.image)&&y.setAttribute("material","pano",typeof g.image=="string"?g.image:g.image.src))},updatePeekMode:function(){var v=this.el,g=this.sphereEl;this.data.peekMode?(this.hideAll(),v.getObject3D("mesh").visible=!1,g.setAttribute("visible",!0)):(this.showAll(),v.getObject3D("mesh").visible=!0,g.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var v=this.el;v.isPlaying&&(this.removeEventListener(),v.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var v=this.data.on;v&&this.el.removeEventListener(v,this.navigate)},initVisualAspect:function(){var v=this.el,g,y,E;!this.data.visualAspectEnabled||this.visualAspectInitialized||(E=this.textEl=this.textEl||document.createElement("a-entity"),y=this.sphereEl=this.sphereEl||document.createElement("a-entity"),g=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),v.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),v.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),E.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),E.setAttribute("position","0 1.5 0"),v.appendChild(E),g.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),g.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),g.setAttribute("rotation","0 180 0"),g.setAttribute("position","0 0 0"),g.setAttribute("visible",!1),v.appendChild(g),y.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),y.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),y.setAttribute("visible",!1),v.appendChild(y),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var v=new p.Vector3,g=new p.Vector3,y=new p.Quaternion,E=new p.Vector3;return function(){var _=this.el,S=_.object3D,x=_.sceneEl.camera,C,w,T=this.textEl;if(this.data.visualAspectEnabled)if(S.updateMatrixWorld(),x.parent.updateMatrixWorld(),x.updateMatrixWorld(),S.matrix.decompose(g,y,E),g.setFromMatrixPosition(S.matrixWorld),v.setFromMatrixPosition(x.matrixWorld),w=g.distanceTo(v),w>20)this.previousQuaternion||(this.quaternionClone.copy(y),this.previousQuaternion=this.quaternionClone),S.lookAt(v);else{if(C=this.calculateCameraPortalOrientation(),w<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;T.setAttribute("text","width",1.5),C<=0?(T.setAttribute("position","0 0 0.75"),T.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(T.setAttribute("position","0 0 -0.75"),T.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),_.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=C}else C<=0?T.setAttribute("rotation","0 180 0"):T.setAttribute("rotation","0 0 0"),T.setAttribute("text","width",5),T.setAttribute("position","0 1.5 0"),_.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(S.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var v=this.el,g=this.hiddenEls,y=this;g.length>0||v.sceneEl.object3D.traverse(function(E){E&&E.el&&E.el.hasAttribute("link-controls")||!E.el||E===v.sceneEl.object3D||E.el===v||E.el===y.sphereEl||E.el===v.sceneEl.cameraEl||E.el.getAttribute("visible")===!1||E.el===y.textEl||E.el===y.semiSphereEl||(E.el.setAttribute("visible",!1),g.push(E.el))})},showAll:function(){this.hiddenEls.forEach(function(v){v.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var v=new p.Matrix4,g=new p.Vector3,y=new p.Vector3(0,0,1),E=new p.Vector3(0,0,0);return function(){var _=this.el,S=_.sceneEl.camera;return g.set(0,0,0),y.set(0,0,1),E.set(0,0,0),_.object3D.matrixWorld.extractRotation(v),y.applyMatrix4(v),_.object3D.updateMatrixWorld(),_.object3D.localToWorld(E),S.parent.parent.updateMatrixWorld(),S.parent.updateMatrixWorld(),S.updateMatrixWorld(),S.localToWorld(g),g.sub(E).normalize(),y.normalize(),Math.sign(y.dot(g))}}(),remove:function(){this.removeEventListener()}}),A("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join(`
`)})},"./src/components/look-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=c("./src/utils/index.js"),v=Math.PI/2;u.exports.Component=d("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new A.Vector3,this.hmdQuaternion=new A.Quaternion,this.magicWindowAbsoluteEuler=new A.Euler,this.magicWindowDeltaEuler=new A.Euler,this.position=new A.Vector3,this.magicWindowObject=new A.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new A.Vector3,rotation:new A.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var g,y=this.data;(p.device.isMobile()||p.device.isMobileDeviceRequestingDesktopSite())&&(g=this.magicWindowControls=new A.DeviceOrientationControls(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(g.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?g.enabled=y.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){g.enabled=y.magicWindowTrackingEnabled})))},update:function(g){var y=this.data;y.enabled!==g.enabled&&this.updateGrabCursor(y.enabled),g&&!y.magicWindowTrackingEnabled&&g.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=y.magicWindowTrackingEnabled),g&&!y.pointerLockEnabled!==g.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(g){var y=this.data;y.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new A.Object3D,this.yawObject=new A.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var g=this.el.sceneEl,y=g.canvas;if(!y){g.addEventListener("render-target-loaded",this.addEventListeners.bind(this));return}y.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),y.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),g.addEventListener("enter-vr",this.onEnterVR),g.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))},removeEventListeners:function(){var g=this.el.sceneEl,y=g&&g.canvas;y&&(y.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),y.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),g.removeEventListener("enter-vr",this.onEnterVR),g.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var g=this.el.object3D,y=this.pitchObject,E=this.yawObject,_=this.el.sceneEl;(_.is("vr-mode")||_.is("ar-mode"))&&_.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),g.rotation.x=this.magicWindowDeltaEuler.x+y.rotation.x,g.rotation.y=this.magicWindowDeltaEuler.y+E.rotation.y,g.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var g=this.magicWindowAbsoluteEuler,y=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),g.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),!this.previousMagicWindowYaw&&g.y!==0&&(this.previousMagicWindowYaw=g.y),this.previousMagicWindowYaw&&(y.x=g.x,y.y+=g.y-this.previousMagicWindowYaw,y.z=g.z,this.previousMagicWindowYaw=g.y))},onMouseMove:function(g){var y,E,_,S=this.pitchObject,x=this.previousMouseEvent,C=this.yawObject;!this.data.enabled||!this.mouseDown&&!this.pointerLocked||(this.pointerLocked?(E=g.movementX||g.mozMovementX||0,_=g.movementY||g.mozMovementY||0):(E=g.screenX-x.screenX,_=g.screenY-x.screenY),this.previousMouseEvent.screenX=g.screenX,this.previousMouseEvent.screenY=g.screenY,y=this.data.reverseMouseDrag?1:-1,C.rotation.y+=E*.002*y,S.rotation.x+=_*.002*y,S.rotation.x=Math.max(-v,Math.min(v,S.rotation.x)))},onMouseDown:function(g){var y=this.el.sceneEl;if(!(!this.data.enabled||!this.data.mouseEnabled||(y.is("vr-mode")||y.is("ar-mode"))&&y.checkHeadsetConnected())&&g.button===0){var E=y&&y.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=g.screenX,this.previousMouseEvent.screenY=g.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(E.requestPointerLock?E.requestPointerLock():E.mozRequestPointerLock&&E.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(g){g.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:g.touches[0].pageX,y:g.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(g){var y,E=this.el.sceneEl.canvas,_,S=this.yawObject;!this.touchStarted||!this.data.touchEnabled||(_=2*Math.PI*(g.touches[0].pageX-this.touchStart.x)/E.clientWidth,y=this.data.reverseTouchDrag?1:-1,S.rotation.y-=_*.5*y,this.touchStart={x:g.touches[0].pageX,y:g.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var g=this.el.sceneEl;g.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),g.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!!(document.pointerLockElement||document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(g){var y=this.el.sceneEl;function E(){y.canvas.classList.add("a-grab-cursor")}function _(){y.canvas.classList.remove("a-grab-cursor")}if(!y.canvas){g?y.addEventListener("render-target-loaded",E):y.addEventListener("render-target-loaded",_);return}if(g){E();return}_()},saveCameraPose:function(){var g=this.el;this.savedPose.position.copy(g.object3D.position),this.savedPose.rotation.copy(g.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var g=this.el,y=this.savedPose;this.hasSavedPose&&(g.object3D.position.copy(y.position),g.object3D.rotation.copy(y.rotation),this.hasSavedPose=!1)}})},"./src/components/magicleap-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/tracked-controls.js"),p=A.checkControllerPresentAndSetup,v=A.emitIfAxesChanged,g=A.onButtonEvent,y="magicleap",E="-one",_=y+E,S=c("./src/constants/index.js").AFRAME_CDN_ROOT,x=S+"controllers/magicleap/magicleap-one-controller.glb",C={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]};u.exports.Component=d("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:C,init:function(){var w=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(T){g(T.detail.id,"down",w)},this.onButtonUp=function(T){g(T.detail.id,"up",w)},this.onButtonTouchEnd=function(T){g(T.detail.id,"touchend",w)},this.onButtonTouchStart=function(T){g(T.detail.id,"touchstart",w)},this.previousButtonValues={},this.bindMethods()},update:function(){var w=this.data;this.controllerIndex=w.hand==="right"?0:w.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var w=this.el;w.addEventListener("buttonchanged",this.onButtonChanged),w.addEventListener("buttondown",this.onButtonDown),w.addEventListener("buttonup",this.onButtonUp),w.addEventListener("touchstart",this.onButtonTouchStart),w.addEventListener("touchend",this.onButtonTouchEnd),w.addEventListener("axismove",this.onAxisMoved),w.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var w=this.el;w.removeEventListener("buttonchanged",this.onButtonChanged),w.removeEventListener("buttondown",this.onButtonDown),w.removeEventListener("buttonup",this.onButtonUp),w.removeEventListener("touchstart",this.onButtonTouchStart),w.removeEventListener("touchend",this.onButtonTouchEnd),w.removeEventListener("axismove",this.onAxisMoved),w.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var w=this.data;p(this,_,{index:this.controllerIndex,hand:w.hand})},injectTrackedControls:function(){var w=this.el,T=this.data;w.setAttribute("tracked-controls",{idPrefix:_,hand:T.hand,controller:this.controllerIndex,orientationOffset:T.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",x)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(w){var T=this.mapping.buttons[w.detail.id],O;T&&(T==="trigger"&&(O=w.detail.state.value,console.log("analog value of trigger press: "+O)),this.el.emit(T+"changed",w.detail.state))},onModelLoaded:function(w){var T=w.detail.model;T.scale.set(.01,.01,.01)},onAxisMoved:function(w){v(this,this.mapping.axes,w)},updateModel:function(w,T){},setButtonColor:function(w,T){}})},"./src/components/material.js":(u,m,c)=>{var d=c("./src/utils/index.js"),A=c("./src/core/component.js"),p=c("./src/lib/three.js"),v=c("./src/core/shader.js"),g=d.debug("components:material:error"),y=A.registerComponent,E=v.shaders,_=v.shaderNames;u.exports.Component=y("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:_,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(w){var T=this.data;(!this.shader||T.shader!==w.shader)&&this.updateShader(T.shader),this.shader.update(this.data),this.updateMaterial(w)},updateSchema:function(w){var T,O,B,P;O=w&&w.shader,T=this.oldData&&this.oldData.shader,P=O||T,B=E[P]&&E[P].schema,B||g("Unknown shader schema "+P),!(T&&O===T)&&(this.extendSchema(B),this.updateBehavior())},updateBehavior:function(){var w,T=this.el.sceneEl,O=this.schema,B=this,P;function L(N,F){var z;for(z in P)P[z]=N;B.shader.update(P)}this.tick=void 0,P={};for(w in O)O[w].type==="time"&&(this.tick=L,P[w]=!0);T&&(this.tick?T.addBehavior(this):T.removeBehavior(this))},updateShader:function(w){var T=this.data,O=E[w]&&E[w].Shader,B;if(!O)throw new Error("Unknown shader "+w);B=this.shader=new O,B.el=this.el,B.init(T),this.setMaterial(B.material),this.updateSchema(T)},updateMaterial:function(w){var T=this.data,O=this.material,B;O.alphaTest=T.alphaTest,O.depthTest=T.depthTest!==!1,O.depthWrite=T.depthWrite!==!1,O.opacity=T.opacity,O.flatShading=T.flatShading,O.side=S(T.side),O.transparent=T.transparent!==!1||T.opacity<1,O.vertexColors=T.vertexColorsEnabled,O.visible=T.visible,O.blending=x(T.blending),O.dithering=T.dithering;for(B in w)break;B&&(w.alphaTest!==T.alphaTest||w.side!==T.side||w.vertexColorsEnabled!==T.vertexColorsEnabled)&&(O.needsUpdate=!0)},remove:function(){var w=new p.MeshBasicMaterial,T=this.material,O=this.el.getObject3D("mesh");O&&(O.material=w),C(T,this.system)},setMaterial:function(w){var T=this.el,O,B=this.system;this.material&&C(this.material,B),this.material=w,B.registerMaterial(w),O=T.getObject3D("mesh"),O?O.material=w:T.addEventListener("object3dset",function P(L){L.detail.type!=="mesh"||L.target!==T||(T.getObject3D("mesh").material=w,T.removeEventListener("object3dset",P))})}});function S(w){switch(w){case"back":return p.BackSide;case"double":return p.DoubleSide;default:return p.FrontSide}}function x(w){switch(w){case"none":return p.NoBlending;case"additive":return p.AdditiveBlending;case"subtractive":return p.SubtractiveBlending;case"multiply":return p.MultiplyBlending;default:return p.NormalBlending}}function C(w,T){w.dispose(),T.unregisterMaterial(w),Object.keys(w).filter(function(O){return w[O]&&w[O].isTexture}).forEach(function(O){w[O].dispose()})}},"./src/components/obb-collider.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js");d("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=new A.Vector3().copy(this.el.object3D.scale),this.auxEuler=new A.Euler,this.boundingBox=new A.Box3,this.boundingBoxSize=new A.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var p=this.el,v=p.components["gltf-model"]&&p.components["gltf-model"].model,g,y;v&&(this.el.removeObject3D("mesh"),g=new A.Box3().setFromObject(v),y=g.getCenter(new A.Vector3),v.position.x+=v.position.x-y.x,v.position.y+=v.position.y-y.y,v.position.z+=v.position.z-y.z,this.el.setObject3D("mesh",v))},updateCollider:function(){var p=this.el,v=this.boundingBoxSize,g=this.aabb=this.aabb||new A.OBB;if(this.obb=this.obb||new A.OBB,!p.hasLoaded){p.addEventListener("loaded",this.updateCollider);return}this.updateBoundingBox(),g.halfSize.copy(v).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var p=this.renderColliderMesh,v=this.boundingBoxSize;if(!p){this.initColliderMesh();return}p.geometry.dispose(),p.geometry=new A.BoxGeometry(v.x,v.y,v.z)},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var p,v,g;p=this.boundingBoxSize,v=this.renderColliderGeometry=new A.BoxGeometry(p.x,p.y,p.z),g=this.renderColliderMesh=new A.Mesh(v,new A.MeshLambertMaterial({color:65280,side:A.DoubleSide})),g.matrixAutoUpdate=!1,g.matrixWorldAutoUpdate=!1,g.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(g)},updateBoundingBox:function(){var p=new A.Vector3,v=new A.Vector3,g=new A.Quaternion,y=new A.Quaternion,E=new A.Matrix4;return function(){var _=this.auxEuler,S=this.boundingBox,x=this.data.size,C=this.trackedObject3D||this.el.object3D,w=this.boundingBoxSize,T=this.data.minimumColliderDimension;if(x){this.boundingBoxSize.x=x,this.boundingBoxSize.y=x,this.boundingBoxSize.z=x;return}_.copy(C.rotation),C.rotation.set(0,0,0),C.parent.matrixWorld.decompose(p,g,v),E.compose(p,y,v),C.parent.matrixWorld.copy(E),S.setFromObject(C,!0),S.getSize(w),w.x=w.x<T?T:w.x,w.y=w.y<T?T:w.y,w.z=w.z<T?T:w.z,C.parent.matrixWorld.compose(p,g,v),this.el.object3D.rotation.copy(_)}}(),checkTrackedObject:function(){var p=this.trackedObject3DPath,v;if(p&&p.length&&!this.trackedObject3D){v=this.el;for(var g=0;g<p.length&&(v=v[p[g]],!!v);g++);v&&(this.trackedObject3D=v,this.updateCollider())}return this.trackedObject3D},tick:function(){var p=new A.Vector3,v=new A.Vector3,g=new A.Quaternion,y=new A.Matrix4;return function(){var E=this.obb,_=this.renderColliderMesh,S=this.checkTrackedObject()||this.el.object3D;S&&(S.updateMatrix(),S.updateMatrixWorld(!0),S.matrixWorld.decompose(p,g,v),(Math.abs(v.x-this.previousScale.x)>1e-4||Math.abs(v.y-this.previousScale.y)>1e-4||Math.abs(v.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(v),v.set(1,1,1),y.compose(p,g,v),_&&_.matrixWorld.copy(y),E.copy(this.aabb),E.applyMatrix4(y))}}()})},"./src/components/obj-model.js":(u,m,c)=>{var d=c("./src/utils/debug.js"),A=c("./src/core/component.js").registerComponent,p=c("./src/lib/three.js"),v=d("components:obj-model:warn");u.exports.Component=A("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var g=this;this.model=null,this.objLoader=new p.OBJLoader,this.mtlLoader=new p.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(y){g.model&&y.detail.name==="material"&&g.applyMaterial()})},update:function(){var g=this.data;g.obj&&(this.resetMesh(),this.loadObj(g.obj,g.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(g,y){var E=this,_=this.el,S=this.mtlLoader,x=this.objLoader,C=this.el.sceneEl.systems.renderer,w=y.substr(0,y.lastIndexOf("/")+1);if(y){_.hasAttribute("material")&&v("Material component properties are ignored when a .MTL is provided"),S.setResourcePath(w),S.load(y,function(T){T.preload(),x.setMaterials(T),x.load(g,function(O){E.model=O,E.model.traverse(function(B){if(B.isMesh){var P=B.material;P.map&&C.applyColorCorrection(P.map),P.emissiveMap&&C.applyColorCorrection(P.emissiveMap)}}),_.setObject3D("mesh",O),_.emit("model-loaded",{format:"obj",model:O})})});return}x.load(g,function(O){E.model=O,E.applyMaterial(),_.setObject3D("mesh",O),_.emit("model-loaded",{format:"obj",model:O})})},applyMaterial:function(){var g=this.el.components.material;g&&this.model.traverse(function(y){y instanceof p.Mesh&&(y.material=g.material)})}})},"./src/components/oculus-go-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/tracked-controls.js"),p=A.checkControllerPresentAndSetup,v=A.emitIfAxesChanged,g=A.onButtonEvent,y=c("./src/utils/index.js").device.isWebXRAvailable,E="oculus-go",_="Oculus Go",S=c("./src/constants/index.js").AFRAME_CDN_ROOT,x=S+"controllers/oculus/go/oculus-go-controller.gltf",C=y?E:_,w={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},T={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},O=y?T:w;u.exports.Component=d("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:O,bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var B=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(P){g(P.detail.id,"down",B)},this.onButtonUp=function(P){g(P.detail.id,"up",B)},this.onButtonTouchStart=function(P){g(P.detail.id,"touchstart",B)},this.onButtonTouchEnd=function(P){g(P.detail.id,"touchend",B)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var B=this.el;B.addEventListener("buttonchanged",this.onButtonChanged),B.addEventListener("buttondown",this.onButtonDown),B.addEventListener("buttonup",this.onButtonUp),B.addEventListener("touchstart",this.onButtonTouchStart),B.addEventListener("touchend",this.onButtonTouchEnd),B.addEventListener("model-loaded",this.onModelLoaded),B.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var B=this.el;B.removeEventListener("buttonchanged",this.onButtonChanged),B.removeEventListener("buttondown",this.onButtonDown),B.removeEventListener("buttonup",this.onButtonUp),B.removeEventListener("touchstart",this.onButtonTouchStart),B.removeEventListener("touchend",this.onButtonTouchEnd),B.removeEventListener("model-loaded",this.onModelLoaded),B.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){p(this,C,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var B=this.el,P=this.data;B.setAttribute("tracked-controls",{armModel:P.armModel,hand:P.hand,idPrefix:C,orientationOffset:P.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",x)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(B){var P=B.detail.model,L;B.target!==this.el||!this.data.model||(L=this.buttonMeshes={},L.trigger=P.getObjectByName("oculus_go_button_trigger"),L.trackpad=P.getObjectByName("oculus_go_touchpad"),L.touchpad=P.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(B){var P=this.mapping.buttons[B.detail.id];P&&this.el.emit(P+"changed",B.detail.state)},onAxisMoved:function(B){v(this,this.mapping.axes,B)},updateModel:function(B,P){this.data.model&&this.updateButtonModel(B,P)},updateButtonModel:function(B,P){var L=this.buttonMeshes;if(!(!L||!L[B])){var N,F;switch(P){case"down":N=this.data.buttonHighlightColor;break;case"touchstart":N=this.data.buttonTouchedColor;break;default:N=this.data.buttonColor}F=L[B],F.material.color.set(N)}}})},"./src/components/oculus-touch-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=c("./src/utils/tracked-controls.js"),v=p.checkControllerPresentAndSetup,g=p.emitIfAxesChanged,y=p.onButtonEvent,E=c("./src/utils/index.js").device.isWebXRAvailable,_="oculus-touch",S="Oculus Touch",x=E?_:S,C=c("./src/constants/index.js").AFRAME_CDN_ROOT,w=C+"controllers/oculus/oculus-touch-controller-",T=C+"controllers/meta/",O={left:{modelUrl:w+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new A.Vector3(-.005,.003,-.055),modelPivotRotation:new A.Euler(0,0,0)},right:{modelUrl:w+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new A.Vector3(.005,.003,-.055),modelPivotRotation:new A.Euler(0,0,0)}},B={left:{modelUrl:w+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new A.Vector3(-.005,.036,-.037),modelPivotRotation:new A.Euler(Math.PI/4.5,0,0)},right:{modelUrl:w+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new A.Vector3(.005,.036,-.037),modelPivotRotation:new A.Euler(Math.PI/4.5,0,0)}},P=E?B:O,L="oculus-touch",N={"oculus-touch":P,"oculus-touch-v2":{left:{modelUrl:w+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new A.Vector3(0,-.007,-.021),modelPivotRotation:new A.Euler(-Math.PI/4,0,0)},right:{modelUrl:w+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new A.Vector3(0,-.007,-.021),modelPivotRotation:new A.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:w+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new A.Vector3(0,0,0),modelPivotRotation:new A.Euler(0,0,0)},right:{modelUrl:w+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new A.Vector3(0,0,0),modelPivotRotation:new A.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:T+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new A.Vector3(0,0,0),modelPivotRotation:new A.Euler(0,0,0)},right:{modelUrl:T+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new A.Vector3(0,0,0),modelPivotRotation:new A.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:T+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new A.Vector3(0,0,0),modelPivotRotation:new A.Euler(0,0,0)},right:{modelUrl:T+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new A.Vector3(0,0,0),modelPivotRotation:new A.Euler(0,0,0)}}},F={left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},z={left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},G=E?z:F;u.exports.Component=d("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},after:["tracked-controls"],mapping:G,bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var j=this;this.onButtonDown=function(q){y(q.detail.id,"down",j,j.data.hand)},this.onButtonUp=function(q){y(q.detail.id,"up",j,j.data.hand)},this.onButtonTouchStart=function(q){y(q.detail.id,"touchstart",j,j.data.hand)},this.onButtonTouchEnd=function(q){y(q.detail.id,"touchend",j,j.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new A.Euler},addEventListeners:function(){var j=this.el;j.addEventListener("buttonchanged",this.onButtonChanged),j.addEventListener("buttondown",this.onButtonDown),j.addEventListener("buttonup",this.onButtonUp),j.addEventListener("touchstart",this.onButtonTouchStart),j.addEventListener("touchend",this.onButtonTouchEnd),j.addEventListener("axismove",this.onAxisMoved),j.addEventListener("model-loaded",this.onModelLoaded),j.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var j=this.el;j.removeEventListener("buttonchanged",this.onButtonChanged),j.removeEventListener("buttondown",this.onButtonDown),j.removeEventListener("buttonup",this.onButtonUp),j.removeEventListener("touchstart",this.onButtonTouchStart),j.removeEventListener("touchend",this.onButtonTouchEnd),j.removeEventListener("axismove",this.onAxisMoved),j.removeEventListener("model-loaded",this.onModelLoaded),j.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){v(this,x,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(j){var q=this.data,Q;if(q.model){if(this.controllerObject3D){this.el.setObject3D("mesh",this.controllerObject3D);return}if(this.displayModel=N[q.controllerType]||N[L],q.controllerType==="auto"){var k=this.el.sceneEl.systems["tracked-controls-webvr"];if(k&&k.vrDisplay){var K=k.vrDisplay.displayName;/^Oculus Quest$/.test(K)&&(this.displayModel=N["oculus-touch-v2"])}else{Q=L;for(var W=Object.keys(N),J=0;J<j.profiles.length;J++)if(W.indexOf(j.profiles[J])!==-1){Q=j.profiles[J];break}this.displayModel=N[Q]}}var se=this.displayModel[q.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===N["oculus-touch-v3"]||this.displayModel===N["meta-quest-touch-pro"]||this.displayModel===N["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",se)}},injectTrackedControls:function(j){var q=this.data,Q=_,k=q.hand==="right"?"Oculus Touch (Right)":"Oculus Touch (Left)",K=E?Q:k;this.el.setAttribute("tracked-controls",{id:K,hand:q.hand,orientationOffset:q.orientationOffset,handTrackingEnabled:!1,iterateControllerProfiles:!0,space:"gripSpace"}),this.loadModel(j)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(j){var q=this.mapping[this.data.hand].buttons[j.detail.id];if(q){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(j);else{var Q=this.buttonMeshes,k;(q==="trigger"||q==="grip")&&(k=j.detail.state.value),Q&&(q==="trigger"&&Q.trigger&&(Q.trigger.rotation.x=this.originalXRotationTrigger-k*(Math.PI/26)),q==="grip"&&Q.grip&&(k*=this.data.hand==="left"?-1:1,Q.grip.position.x=this.originalXPositionGrip+k*.004))}this.el.emit(q+"changed",j.detail.state)}},onButtonChangedV3orPROorPlus:function(j){var q=this.mapping[this.data.hand].buttons[j.detail.id],Q=this.buttonObjects,k;!Q||!Q[q]||(k=j.detail.state.value,Q[q].quaternion.slerpQuaternions(this.buttonRanges[q].min.quaternion,this.buttonRanges[q].max.quaternion,k),Q[q].position.lerpVectors(this.buttonRanges[q].min.position,this.buttonRanges[q].max.position,k))},onModelLoaded:function(j){if(!(j.target!==this.el||!this.data.model)){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(j);else{var q=this.controllerObject3D=j.detail.model,Q;Q=this.buttonMeshes={},Q.grip=q.getObjectByName("buttonHand"),this.originalXPositionGrip=Q.grip&&Q.grip.position.x,Q.trigger=q.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=Q.trigger&&Q.trigger.rotation.x,Q.thumbstick=q.getObjectByName("stick"),Q.xbutton=q.getObjectByName("buttonX"),Q.abutton=q.getObjectByName("buttonA"),Q.ybutton=q.getObjectByName("buttonY"),Q.bbutton=q.getObjectByName("buttonB")}for(var k in this.buttonMeshes)this.buttonMeshes[k]&&H(this.buttonMeshes[k]);this.applyOffset(j.detail.model),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(j){j.position.copy(this.displayModel[this.data.hand].modelPivotOffset),j.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(j){var q=this.controllerObject3D=j.detail.model,Q=this.buttonObjects={},k=this.buttonMeshes={},K=this.buttonRanges={};k.grip=q.getObjectByName("squeeze"),Q.grip=q.getObjectByName("xr_standard_squeeze_pressed_value"),K.grip={min:q.getObjectByName("xr_standard_squeeze_pressed_min"),max:q.getObjectByName("xr_standard_squeeze_pressed_max")},Q.grip.minX=Q.grip.position.x,k.thumbstick=q.getObjectByName("thumbstick"),Q.thumbstick=q.getObjectByName("xr_standard_thumbstick_pressed_value"),K.thumbstick={min:q.getObjectByName("xr_standard_thumbstick_pressed_min"),max:q.getObjectByName("xr_standard_thumbstick_pressed_max")},Q.thumbstickXAxis=q.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),K.thumbstickXAxis={min:q.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:q.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},Q.thumbstickYAxis=q.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),K.thumbstickYAxis={min:q.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:q.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},k.trigger=q.getObjectByName("trigger"),Q.trigger=q.getObjectByName("xr_standard_trigger_pressed_value"),K.trigger={min:q.getObjectByName("xr_standard_trigger_pressed_min"),max:q.getObjectByName("xr_standard_trigger_pressed_max")},K.trigger.diff={x:Math.abs(K.trigger.max.rotation.x)-Math.abs(K.trigger.min.rotation.x),y:Math.abs(K.trigger.max.rotation.y)-Math.abs(K.trigger.min.rotation.y),z:Math.abs(K.trigger.max.rotation.z)-Math.abs(K.trigger.min.rotation.z)};var W=this.data.hand==="left"?"x":"a",J=this.data.hand==="left"?"y":"b",se=W+"button",ge=J+"button";k[se]=q.getObjectByName(W+"_button"),Q[se]=q.getObjectByName(W+"_button_pressed_value"),K[se]={min:q.getObjectByName(W+"_button_pressed_min"),max:q.getObjectByName(W+"_button_pressed_max")},k[ge]=q.getObjectByName(J+"_button"),Q[ge]=q.getObjectByName(J+"_button_pressed_value"),K[ge]={min:q.getObjectByName(J+"_button_pressed_min"),max:q.getObjectByName(J+"_button_pressed_max")}},onAxisMoved:function(j){g(this,this.mapping[this.data.hand].axes,j)},onThumbstickMoved:function(j){if(!(!this.buttonMeshes||!this.buttonMeshes.thumbstick)){if(this.isTouchV3orPROorPlus){this.updateThumbstickTouchV3orPROorPlus(j);return}for(var q in j.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[q]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[q]]-Math.PI/8*j.detail[q]*(q==="y"||this.data.hand==="right"?-1:1)}},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(j){var q=(j.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,q);var Q=(j.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,Q)},updateModel:function(j,q){this.data.model&&this.updateButtonModel(j,q)},updateButtonModel:function(j,q){var Q=this.buttonMeshes,k,K;Q&&Q[j]&&(K=q==="up"||q==="touchend"?Q[j].originalColor||this.data.buttonColor:q==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,k=Q[j],k.material.color.set(K))}});function H(j){j.traverse(function(q){var Q;q.type==="Mesh"&&(Q=q.material.clone(),j.originalColor=q.material.color,q.material.dispose(),q.material=Q)})}},"./src/components/pico-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=c("./src/utils/tracked-controls.js"),v=p.checkControllerPresentAndSetup,g=p.emitIfAxesChanged,y=p.onButtonEvent,E="pico-4",_=c("./src/constants/index.js").AFRAME_CDN_ROOT,S=_+"controllers/pico/pico4/",x={left:{axes:{touchpad:[2,3]},buttons:["trigger","squeeze","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","squeeze","none","thumbstick","abutton","bbutton"]}};u.exports.Component=d("pico-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:x,init:function(){var C=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(w){y(w.detail.id,"down",C,C.data.hand)},this.onButtonUp=function(w){y(w.detail.id,"up",C,C.data.hand)},this.onButtonTouchEnd=function(w){y(w.detail.id,"touchend",C,C.data.hand)},this.onButtonTouchStart=function(w){y(w.detail.id,"touchstart",C,C.data.hand)},this.bindMethods()},update:function(){var C=this.data;this.controllerIndex=C.hand==="right"?0:C.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var C=this.el;C.addEventListener("buttonchanged",this.onButtonChanged),C.addEventListener("buttondown",this.onButtonDown),C.addEventListener("buttonup",this.onButtonUp),C.addEventListener("touchstart",this.onButtonTouchStart),C.addEventListener("touchend",this.onButtonTouchEnd),C.addEventListener("axismove",this.onAxisMoved),C.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var C=this.el;C.removeEventListener("buttonchanged",this.onButtonChanged),C.removeEventListener("buttondown",this.onButtonDown),C.removeEventListener("buttonup",this.onButtonUp),C.removeEventListener("touchstart",this.onButtonTouchStart),C.removeEventListener("touchend",this.onButtonTouchEnd),C.removeEventListener("axismove",this.onAxisMoved),C.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var C=this.data;v(this,E,{index:this.controllerIndex,hand:C.hand})},injectTrackedControls:function(){var C=this.el,w=this.data;C.setAttribute("tracked-controls",{idPrefix:E,hand:w.hand,controller:this.controllerIndex,orientationOffset:w.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",S+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(C){var w=this.mapping[this.data.hand].buttons[C.detail.id],T;w&&(w==="trigger"&&(T=C.detail.state.value,console.log("analog value of trigger press: "+T)),this.el.emit(w+"changed",C.detail.state))},onModelLoaded:function(C){C.target!==this.el||!this.data.model||this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new A.Vector3(0,0,0)})},onAxisMoved:function(C){g(this,this.mapping.axes,C)}})},"./src/components/position.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("position",{schema:{type:"vec3"},update:function(){var A=this.el.object3D,p=this.data;A.position.set(p.x,p.y,p.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},"./src/components/raycaster.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=c("./src/utils/index.js"),v=p.debug("components:raycaster:warn"),g=/^[\w\s-.,[\]#]*$/,y={childList:!0,attributes:!0,subtree:!0},E={INTERSECT:"raycaster-intersected",INTERSECTION:"raycaster-intersection",INTERSECT_CLEAR:"raycaster-intersected-cleared",INTERSECTION_CLEAR:"raycaster-intersection-cleared",INTERSECTION_CLOSEST_ENTITY_CHANGED:"raycaster-closest-entity-changed"};u.exports.Component=d("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new A.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new A.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new A.Vector3,this.otherLineEndVec3=new A.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(S){var x=this.data,C=this.el,w=this.raycaster;w.far=x.far,w.near=x.near,x.showLine&&(x.far!==S.far||x.origin!==S.origin||x.direction!==S.direction||!S.showLine)&&(this.unitLineEndVec3.copy(x.direction).normalize(),this.drawLine()),!x.showLine&&S.showLine&&C.removeAttribute("line"),x.objects!==S.objects&&!g.test(x.objects)&&v('[raycaster] Selector "'+x.objects+'" may not update automatically with DOM changes.'),x.objects||v('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),x.autoRefresh!==S.autoRefresh&&C.isPlaying&&(x.autoRefresh?this.addEventListeners():this.removeEventListeners()),S.enabled&&!x.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,y),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var S=this.data,x;x=S.objects?this.el.sceneEl.querySelectorAll(S.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(x),this.dirty=!1},tock:function(S){var x=this.data,C=this.prevCheckTime;x.enabled&&(C&&S-C<x.interval||(this.prevCheckTime=S,this.checkIntersections()))},checkIntersections:function(){var S=this.clearedIntersectedEls,x=this.el,C=this.data,w,T=this.intersectedEls,O,B=this.intersections,P=this.newIntersectedEls,L=this.newIntersections,N=this.prevIntersectedEls,F=this.rawIntersections;for(this.dirty&&this.refreshObjects(),_(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),F.length=0,this.raycaster.intersectObjects(this.objects,!0,F),B.length=0,T.length=0,w=0;w<F.length;w++)O=F[w],!(C.showLine&&O.object===x.getObject3D("line"))&&O.object.el&&(B.push(O),T.push(O.object.el));for(L.length=0,P.length=0,w=0;w<B.length;w++)N.indexOf(B[w].object.el)===-1&&(L.push(B[w]),P.push(B[w].object.el));for(S.length=0,w=0;w<N.length;w++)T.indexOf(N[w])===-1&&(N[w].emit(E.INTERSECT_CLEAR,this.intersectedClearedDetail),S.push(N[w]));for(S.length&&x.emit(E.INTERSECTION_CLEAR,this.intersectionClearedDetail),w=0;w<P.length;w++)P[w].emit(E.INTERSECT,this.intersectedDetail);L.length&&(this.intersectionDetail.els=P,this.intersectionDetail.intersections=L,x.emit(E.INTERSECTION,this.intersectionDetail)),(N.length===0&&B.length>0||N.length>0&&B.length===0||N.length&&B.length&&N[0]!==B[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=B,x.emit(E.INTERSECTION_CLOSEST_ENTITY_CHANGED,this.intersectionDetail)),C.showLine&&setTimeout(this.updateLine)},updateLine:function(){var S=this.el,x=this.intersections,C;x.length&&(x[0].object.el===S&&x[1]?C=x[1].distance:C=x[0].distance),this.drawLine(C)},getIntersection:function(S){var x,C;for(x=0;x<this.intersections.length;x++)if(C=this.intersections[x],C.object.el===S)return C;return null},updateOriginDirection:function(){var S=new A.Vector3,x=new A.Vector3;return function(){var w=this.el,T=this.data;if(T.useWorldCoordinates){this.raycaster.set(T.origin,T.direction);return}w.object3D.updateMatrixWorld(),x.setFromMatrixPosition(w.object3D.matrixWorld),(T.origin.x!==0||T.origin.y!==0||T.origin.z!==0)&&(x=w.object3D.localToWorld(x.copy(T.origin))),S.copy(T.direction).transformDirection(w.object3D.matrixWorld).normalize(),this.raycaster.set(x,S)}}(),drawLine:function(S){var x=this.data,C=this.el,w;w=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,S===void 0&&(S=x.far===1/0?1e3:x.far),this.lineData.start=x.origin,this.lineData.end=w.copy(this.unitLineEndVec3).multiplyScalar(S).add(x.origin),this.lineData.color=x.lineColor,this.lineData.opacity=x.lineOpacity,C.setAttribute("line",this.lineData)},flattenObject3DMaps:function(S){var x,C,w=this.objects,T=this.el.sceneEl.object3D;function O(P){return P.parent?O(P.parent):P===T}for(w.length=0,C=0;C<S.length;C++){var B=S[C];if(B.isEntity&&B.object3D&&O(B.object3D))for(x in B.object3DMap)w.push(B.getObject3D(x))}return w},clearAllIntersections:function(){var S;for(S=0;S<this.intersectedEls.length;S++)this.intersectedEls[S].emit(E.INTERSECT_CLEAR,this.intersectedClearedDetail);_(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(E.INTERSECTION_CLEAR,this.intersectionClearedDetail)}});function _(S,x){var C;for(S.length=x.length,C=0;C<x.length;C++)S[C]=x[C]}},"./src/components/rotation.js":(u,m,c)=>{var d=c("./src/lib/three.js").MathUtils.degToRad,A=c("./src/core/component.js").registerComponent;u.exports.Component=A("rotation",{schema:{type:"vec3"},update:function(){var p=this.data,v=this.el.object3D;v.rotation.set(d(p.x),d(p.y),d(p.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},"./src/components/scale.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var A=this.data,p=this.el.object3D;p.scale.set(A.x,A.y,A.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},"./src/components/scene/ar-hit-test.js":(u,m,c)=>{var d="data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",A=c("./src/core/component.js").registerComponent,p=c("./src/lib/three.js"),v=21,g=function(){var S=new p.Quaternion,x=new p.Vector3;function C(w,T,O){T.position.copy(w.transform.position),T.quaternion.copy(w.transform.orientation),x.copy(O),S.copy(w.transform.orientation),x.applyQuaternion(S),T.position.sub(x)}return C}();g.tempFakePose={transform:{orientation:new p.Quaternion,position:new p.Vector3}};function y(S,x){this.renderer=S,this.xrHitTestSource=null,S.xr.addEventListener("sessionend",(function(){this.xrHitTestSource=null}).bind(this)),S.xr.addEventListener("sessionstart",(function(){this.sessionStart(x)}).bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(x)}y.prototype.previousFrameAnchors=new Set,y.prototype.anchorToObject3D=new Map;function E(S){console.warn(S.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}y.prototype.sessionStart=function(x){if(this.session=this.renderer.xr.getSession(),!("requestHitTestSource"in this.session)){E({message:"No requestHitTestSource on the session."});return}x.space?this.session.requestHitTestSource(x).then((function(C){this.xrHitTestSource=C}).bind(this)).catch(E):x.profile&&this.session.requestHitTestSourceForTransientInput(x).then((function(C){this.xrHitTestSource=C,this.transient=!0}).bind(this)).catch(E)},y.prototype.anchorFromLastHitTestResult=function(S,x){var C=this.lastHitTest;if(C){var w={object3D:S,offset:x};Array.from(this.anchorToObject3D.entries()).forEach((function(T){var O=T[1].object3D,B=T[0];O===S&&(this.anchorToObject3D.delete(B),B.delete())}).bind(this)),C.createAnchor&&C.createAnchor().then((function(T){this.anchorToObject3D.set(T,w)}).bind(this)).catch(function(T){console.warn(T.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},y.prototype.doHit=function(x){if(this.renderer.xr.isPresenting){var C=this.renderer.xr.getReferenceSpace(),w=x.getViewerPose(C),T,O;if(this.xrHitTestSource&&w)return this.transient?(T=x.getHitTestResultsForTransientInput(this.xrHitTestSource),T.length>0?(O=T[0].results,O.length>0?(this.lastHitTest=O[0],O[0].getPose(C)):!1):!1):(T=x.getHitTestResults(this.xrHitTestSource),T.length>0?(this.lastHitTest=T[0],T[0].getPose(C)):!1)}},y.updateAnchorPoses=function(S,x){var C=S.trackedAnchors||y.prototype.previousFrameAnchors;y.prototype.previousFrameAnchors.forEach(function(w){C.has(w)||y.prototype.anchorToObject3D.delete(w)}),C.forEach(function(w){var T,O,B,P;try{T=S.getPose(w.anchorSpace,x)}catch{}if(T){if(O=y.prototype.anchorToObject3D.get(w),!O)return;B=O.offset,P=O.object3D,g(T,P,B)}})};var _;u.exports.Component=A("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:d,type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new p.OrthographicCamera,this.orthoCam.layers.set(v),this.textureTarget=new p.WebGLRenderTarget(512,512,{}),this.basicMaterial=new p.MeshBasicMaterial({color:0,side:p.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new p.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var S=this.el.getAttribute("webxr"),x=S.optionalFeatures;(!x.includes("hit-test")||!x.includes("anchors"))&&(x.push("hit-test"),x.push("anchors"),this.el.setAttribute("webxr",S)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",(function(){this.hitTest=null}).bind(this)),this.el.sceneEl.renderer.xr.addEventListener("sessionstart",(function(){if(this.el.is("ar-mode")){var C=this.el.sceneEl.renderer,w=this.session=C.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,_||(_=new Map),w.requestReferenceSpace("viewer").then((function(B){this.hitTest=new y(C,{space:B}),_.set(B,this.hitTest),this.el.emit("ar-hit-test-start")}).bind(this));var T="generic-touchscreen",O=new y(C,{profile:T});w.addEventListener("selectstart",(function(B){if(this.data.enabled===!0){var P=B.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:P,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),P.profiles[0]===T?this.hitTest=O:(this.hitTest=_.get(P)||new y(C,{space:P.targetRaySpace}),_.set(P,this.hitTest)))}}).bind(this)),w.addEventListener("selectend",(function(B){if(!this.hitTest||this.data.enabled!==!0){this.hitTest=null;return}var P=B.inputSource,L;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(L=this.data.target.object3D,L&&(g.tempFakePose.transform.position.copy(this.bboxMesh.position),g.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),g(g.tempFakePose,L,this.bboxOffset),L.visible=!0,this.hitTest.anchorFromLastHitTestResult(L,this.bboxOffset))),this.el.emit("ar-hit-test-select",{inputSource:P,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion})),this.hitTest=null}).bind(this))}}).bind(this)),this.bboxOffset=new p.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(v),this.data.target.object3D.traverse(function(S){S.layers.enable(v)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var S=new p.PlaneGeometry(1,1),x=new p.MeshBasicMaterial({transparent:!0,color:16777215});S.rotateX(-Math.PI/2),S.rotateY(-Math.PI/2),this.bbox=new p.Box3,this.bboxMesh=new p.Mesh(S,x),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var S,x=this.el.sceneEl.renderer,C,w,T=x.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),C=x.getRenderTarget(),x.setRenderTarget(this.textureTarget),x.xr.enabled=!1,w=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,x.render(this.el.object3D,this.orthoCam),this.el.object3D.background=w,this.el.object3D.overrideMaterial=null,x.xr.enabled=T,x.setRenderTarget(C),x.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),S=this.context.getImageData(0,0,512,512);for(var O=0;O<262144;O++)S.data[O*4+3]!==0&&S.data[O*4+3]!==255&&(S.data[O*4+3]=128);this.context.putImageData(S,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var S,x=this.el.sceneEl.frame,C=this.el.sceneEl.renderer;if(x&&y.updateAnchorPoses(x,C.xr.getReferenceSpace()),this.bboxNeedsUpdate){if(this.bboxNeedsUpdate=!1,!this.data.target||this.data.type==="map"){var w;this.textureCache.has(this.data.src)?w=this.textureCache.get(this.data.src):(w=new p.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,w)),this.bboxMesh.material.map=w,this.bboxMesh.material.needsUpdate=!0}this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)}this.hitTest&&(S=this.hitTest.doHit(x),S&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(S.transform.position),this.bboxMesh.quaternion.copy(S.transform.orientation)))}})},"./src/components/scene/background.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var A=this.data,p=this.el.object3D;A.transparent?p.background=null:p.background=new THREE.Color(A.color)},remove:function(){var A=this.el.object3D;A.background=null}})},"./src/components/scene/debug.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("debug",{schema:{default:!0},sceneOnly:!0})},"./src/components/scene/device-orientation-permission-ui.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/constants/index.js"),p="a-modal",v="a-dialog",g="a-dialog-text",y="a-dialog-text-container",E="a-dialog-buttons-container",_="a-dialog-button",S="a-dialog-allow-button",x="a-dialog-deny-button",C="a-dialog-ok-button";u.exports.Component=d("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var B=this;if(this.data.enabled){if(window.isSecureContext||this.showHTTPAlert(),typeof DeviceOrientationEvent>"u"||!DeviceOrientationEvent.requestPermission){this.permissionGranted=!0;return}this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then(function(){B.el.emit("deviceorientationpermissiongranted"),B.permissionGranted=!0}).catch(function(){B.devicePermissionDialogEl=w(B.data.denyButtonText,B.data.allowButtonText,B.data.deviceMotionMessage,B.onDeviceMotionDialogAllowClicked,B.onDeviceMotionDialogDenyClicked),B.el.appendChild(B.devicePermissionDialogEl)})}},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var B=this,P=T(B.data.cancelButtonText,B.data.httpsMessage,function(){B.el.removeChild(P)});this.el.appendChild(P)},onDeviceMotionDialogAllowClicked:function(){var B=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(P){P==="granted"?(B.el.emit("deviceorientationpermissiongranted"),B.permissionGranted=!0):B.el.emit("deviceorientationpermissionrejected"),B.remove()}).catch(console.error)}});function w(B,P,L,N,F){var z,G,H;return z=document.createElement("div"),z.classList.add(E),G=document.createElement("button"),G.classList.add(_,x),G.setAttribute(A.AFRAME_INJECTED,""),G.innerHTML=B,z.appendChild(G),H=document.createElement("button"),H.classList.add(_,S),H.setAttribute(A.AFRAME_INJECTED,""),H.innerHTML=P,z.appendChild(H),H.addEventListener("click",function(j){j.stopPropagation(),N()}),G.addEventListener("click",function(j){j.stopPropagation(),F()}),O(L,z)}function T(B,P,L){var N,F;return N=document.createElement("div"),N.classList.add(E),F=document.createElement("button"),F.classList.add(_,C),F.setAttribute(A.AFRAME_INJECTED,""),F.innerHTML=B,N.appendChild(F),F.addEventListener("click",function(z){z.stopPropagation(),L()}),O(P,N)}function O(B,P){var L,N,F,z;return L=document.createElement("div"),L.classList.add(p),L.setAttribute(A.AFRAME_INJECTED,""),N=document.createElement("div"),N.className=v,N.setAttribute(A.AFRAME_INJECTED,""),L.appendChild(N),F=document.createElement("div"),F.classList.add(y),N.appendChild(F),z=document.createElement("div"),z.classList.add(g),z.innerHTML=B,F.appendChild(z),N.appendChild(P),L}},"./src/components/scene/embedded.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var A=this.el,p=A.querySelector(".a-enter-vr");this.data===!0?(p&&p.classList.add("embedded"),A.removeFullScreenStyles()):(p&&p.classList.remove("embedded"),A.addFullScreenStyles())}})},"./src/components/scene/fog.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=c("./src/utils/debug.js");p("components:fog:warn"),u.exports.Component=d("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var g=this.data,y=this.el,E=this.el.object3D.fog;if(!E||g.type!==E.name){y.object3D.fog=v(g);return}Object.keys(this.schema).forEach(function(_){var S=g[_];_==="color"&&(S=new A.Color(S)),E[_]=S})},remove:function(){var g=this.el,y=this.el.object3D.fog;y&&(g.object3D.fog=null)}});function v(g){var y;return g.type==="exponential"?y=new A.FogExp2(g.color,g.density):y=new A.Fog(g.color,g.near,g.far),y.name=g.type,y}},"./src/components/scene/inspector.js":(u,m,c)=>{var d=c("./src/constants/index.js").AFRAME_INJECTED,A=c("./package.json"),p=c("./src/core/component.js").registerComponent,v=c("./src/utils/index.js");function g(x){var C=x.split(".");return C[2]="x",C.join(".")}var y="https://unpkg.com/aframe-inspector@"+g(A.version)+"/dist/aframe-inspector.min.js",E=y,_="Loading Inspector",S="Error loading Inspector";u.exports.Component=p("inspector",{schema:{url:{default:E}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var x;this.firstPlay&&(x=v.getUrlParameter("inspector"),x!=="false"&&x&&(this.openInspector(),this.firstPlay=!1))},initOverlay:function(){var x='<span class="dots"><span>.</span><span>.</span><span>.</span></span>';this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML=_+x},remove:function(){this.removeEventListeners()},onKeydown:function(x){var C=x.keyCode===73&&(x.ctrlKey&&x.altKey||x.getModifierState("AltGraph"));C&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(x){x.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(x){var C=this,w;if(AFRAME.INSPECTOR||AFRAME.inspectorInjected){AFRAME.INSPECTOR.open(x);return}this.showLoader(),w=document.createElement("script"),w.src=this.data.url,w.setAttribute("data-name","aframe-inspector"),w.setAttribute(d,""),w.onload=function(){AFRAME.INSPECTOR.open(x),C.hideLoader(),C.removeEventListeners()},w.onerror=function(){C.loadingMessageEl.innerHTML=S},document.head.appendChild(w),AFRAME.inspectorInjected=!0},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})},"./src/components/scene/keyboard-shortcuts.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/index.js").shouldCaptureKeyEvent;u.exports.Component=d("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(p){var v=this.data;this.enterVREnabled=v.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(p){var v=this.el;A(p)&&(this.enterVREnabled&&p.keyCode===70&&v.enterVR(),this.enterVREnabled&&p.keyCode===27&&v.exitVR())}})},"./src/components/scene/pool.js":(u,m,c)=>{var d=c("./src/utils/debug.js"),A=c("./src/core/component.js").registerComponent,p=d("components:pool:warn");u.exports.Component=A("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var v;for(this.availableEls=[],this.usedEls=[],this.data.mixin||p("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||p("Container "+this.data.container+" not found.")),this.container=this.container||this.el,v=0;v<this.data.size;++v)this.createEntity()},update:function(v){var g=this.data;(v.mixin!==g.mixin||v.size!==g.size)&&this.initPool()},createEntity:function(){var v;v=document.createElement("a-entity"),v.play=this.wrapPlay(v.play),v.setAttribute("mixin",this.data.mixin),v.object3D.visible=!1,v.pause(),this.container.appendChild(v),this.availableEls.push(v);var g=this.usedEls;v.addEventListener("loaded",function(){g.indexOf(v)===-1&&(v.object3DParent=v.object3D.parent,v.object3D.parent.remove(v.object3D))})},wrapPlay:function(v){var g=this.usedEls;return function(){g.indexOf(this)!==-1&&v.call(this)}},requestEntity:function(){var v;if(this.availableEls.length===0){if(this.data.dynamic===!1){p("Requested entity from empty pool: "+this.attrName);return}else p("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName);this.createEntity()}return v=this.availableEls.shift(),this.usedEls.push(v),v.object3DParent&&(v.object3DParent.add(v.object3D),this.updateRaycasters()),v.object3D.visible=!0,v},returnEntity:function(v){var g=this.usedEls.indexOf(v);if(g===-1){p("The returned entity was not previously pooled from "+this.attrName);return}return this.usedEls.splice(g,1),this.availableEls.push(v),v.object3DParent=v.object3D.parent,v.object3D.parent.remove(v.object3D),this.updateRaycasters(),v.object3D.visible=!1,v.pause(),v},updateRaycasters:function(){var v=document.querySelectorAll("[raycaster]");v.forEach(function(g){g.components.raycaster.setDirty()})}})},"./src/components/scene/real-world-meshing.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js");u.exports.Component=d("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var p=this.el.getAttribute("webxr"),v=p.requiredFeatures;v.indexOf("mesh-detection")===-1&&(v.push("mesh-detection"),this.el.setAttribute("webxr",p)),v.indexOf("plane-detection")===-1&&(v.push("plane-detection"),this.el.setAttribute("webxr",p)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var p=this.data,v,g,y=this.el;y.renderer.xr;var E,_=this.meshEntities,S=!1,x=[],C=this.data.filterLabels;E=y.frame,v=E.detectedMeshes,g=E.detectedPlanes;for(var w=0;w<_.length;w++)_[w].present=!1;if(p.meshesEnabled){for(var T of v.values())if(!(C.length&&C.indexOf(T.semanticLabel)===-1)){for(w=0;w<_.length;w++)if(T===_[w].mesh){S=!0,_[w].present=!0,_[w].lastChangedTime<T.lastChangedTime&&this.updateMeshGeometry(_[w].el,T),_[w].lastChangedTime=T.lastChangedTime;break}S||x.push(T),S=!1}}if(p.planesEnabled){for(T of g.values())if(!(C.length&&C.indexOf(T.semanticLabel)===-1)){for(w=0;w<_.length;w++)if(T===_[w].mesh){S=!0,_[w].present=!0,_[w].lastChangedTime<T.lastChangedTime&&this.updateMeshGeometry(_[w].el,T),_[w].lastChangedTime=T.lastChangedTime;break}S||x.push(T),S=!1}}this.deleteMeshes(),this.createNewMeshes(x)},updateMeshes:function(){var p=new A.Matrix4;return function(){for(var v,g=this.el,y,E=g.frame,_=this.meshEntities,S=g.renderer.xr.getReferenceSpace(),x,C=0;C<_.length;C++)x=_[C].mesh.meshSpace||_[C].mesh.planeSpace,v=E.getPose(x,S),y=_[C].el,y.hasLoaded&&(p.fromArray(v.transform.matrix),p.decompose(y.object3D.position,y.object3D.quaternion,y.object3D.scale))}}(),deleteMeshes:function(){for(var p=this.meshEntities,v=[],g=0;g<p.length;g++)p[g].present?v.push(p[g]):this.el.removeChild(p[g]);this.meshEntities=v},createNewMeshes:function(p){for(var v,g=0;g<p.length;g++)v=document.createElement("a-entity"),this.meshEntities.push({mesh:p[g],el:v}),v.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(v)},initMeshGeometry:function(p){var v,g,y;if(p instanceof XRPlane){g=new A.Shape,y=p.polygon;for(var E=0;E<y.length;++E)E===0?g.moveTo(y[E].x,y[E].z):g.lineTo(y[E].x,y[E].z);return v=new A.ShapeGeometry(g),v.rotateX(Math.PI/2),v}return v=new A.BufferGeometry,v.setAttribute("position",new A.BufferAttribute(p.vertices,3)),v.setIndex(new A.BufferAttribute(p.indices,1)),v},initWorldMeshEntity:function(p){for(var v=p.target,g,y,E,_=this.meshEntities,S=0;S<_.length;S++)if(_[S].el===v){E=_[S];break}g=this.initMeshGeometry(E.mesh),y=new A.Mesh(g,new A.MeshBasicMaterial({color:Math.random()*16777215,side:A.DoubleSide})),v.setObject3D("mesh",y),E.mesh instanceof XRPlane&&this.data.planeMixin?v.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&v.setAttribute("mixin",this.data.meshMixin),v.setAttribute("data-world-mesh",E.mesh.semanticLabel)},updateMeshGeometry:function(p,v){var g=p.getObject3D("mesh");g.geometry.dispose(),g.geometry=this.initMeshGeometry(v)}})},"./src/components/scene/reflection.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;function A(p,v,g,y){var E=Math.max(p.primaryLightIntensity.x,Math.max(p.primaryLightIntensity.y,p.primaryLightIntensity.z));v.sh.fromArray(p.sphericalHarmonicsCoefficients),v.intensity=1,g&&(g.color.setRGB(p.primaryLightIntensity.x/E,p.primaryLightIntensity.y/E,p.primaryLightIntensity.z/E),g.intensity=E,y.copy(p.primaryLightDirection))}u.exports.Component=d("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var p=this;this.cubeRenderTarget=new THREE.WebGLCubeRenderTarget(16),this.cubeCamera=new THREE.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new THREE.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var v=this.el.getAttribute("webxr"),g=v.optionalFeatures;g.includes("light-estimation")||(g.push("light-estimation"),this.el.setAttribute("webxr",v)),this.el.addEventListener("enter-vr",function(){if(p.el.is("ar-mode")){var y=p.el.renderer,E=y.xr.getSession();E.requestLightProbe&&p.startLightProbe()}}),this.el.addEventListener("exit-vr",function(){p.xrLightProbe&&p.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var p=this.el.renderer,v=p.xr.getSession(),g=this,y=p.getContext();if(!this.probeLight){var E=document.createElement("a-light");E.setAttribute("type","probe"),E.setAttribute("intensity",0),this.el.appendChild(E),this.probeLight=E}switch(v.preferredReflectionFormat){case"srgba8":y.getExtension("EXT_sRGB");break;case"rgba16f":y.getExtension("OES_texture_half_float");break}this.glBinding=new XRWebGLBinding(v,y),y.getExtension("EXT_sRGB"),y.getExtension("OES_texture_half_float"),v.requestLightProbe().then(function(_){g.xrLightProbe=_,_.addEventListener("reflectionchange",g.updateXRCubeMap.bind(g))}).catch(function(_){console.warn("Lighting estimation not supported: "+_.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var p=this.el.renderer,v=this.glBinding.getReflectionCubeMap(this.xrLightProbe);if(v){var g=p.properties.get(this.lightingEstimationTexture);g.__webglTexture=v,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture}},tick:function(){var p=this.el.object3D,v=this.el.renderer,g=this.el.frame;if(g&&this.xrLightProbe){var y=g.getLightEstimate(this.xrLightProbe);y&&A(y,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(p.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(v,p),p.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&g&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}})},"./src/components/scene/screenshot.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),v=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`);u.exports.Component=d("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var g=this.el;if(!this.canvas){var y=g.renderer.getContext();y&&(this.cubeMapSize=y.getParameter(y.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new A.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:p,fragmentShader:v,side:A.DoubleSide}),this.quad=new A.Mesh(new A.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new A.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),g.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(g,y){return new A.WebGLRenderTarget(g,y,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:A.LinearFilter,magFilter:A.LinearFilter,wrapS:A.ClampToEdgeWrapping,wrapT:A.ClampToEdgeWrapping,format:A.RGBAFormat,type:A.UnsignedByteType})},resize:function(g,y){this.quad.scale.set(g,y,1),this.camera.left=-1*g/2,this.camera.right=g/2,this.camera.top=y/2,this.camera.bottom=-1*y/2,this.camera.updateProjectionMatrix(),this.canvas.width=g,this.canvas.height=y},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(g){var y=g.keyCode===83&&g.ctrlKey&&g.altKey;if(!(!this.data||!y)){var E=g.shiftKey?"equirectangular":"perspective";this.capture(E)}},setCapture:function(g){var y=this.el,E,_,S,x;return g==="perspective"?(this.quad.visible=!1,_=this.data.camera&&this.data.camera.components.camera.camera||y.camera,E={width:this.data.width,height:this.data.height}):(_=this.camera,x=new A.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:A.RGBFormat,generateMipmaps:!0,minFilter:A.LinearMipmapLinearFilter,colorSpace:A.SRGBColorSpace}),S=new A.CubeCamera(y.camera.near,y.camera.far,x),y.camera.getWorldPosition(S.position),y.camera.getWorldQuaternion(S.quaternion),S.update(y.renderer,y.object3D),this.quad.material.uniforms.map.value=S.renderTarget.texture,E={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:_,size:E,projection:g}},capture:function(g){var y=this.el.renderer.xr.enabled,E=this.el.renderer,_;this.setup(),E.xr.enabled=!1,_=this.setCapture(g),this.renderCapture(_.camera,_.size,_.projection),this.saveCapture(),E.xr.enabled=y},getCanvas:function(g){var y=this.el.renderer.xr.enabled,E=this.el.renderer;this.setup();var _=this.setCapture(g);return E.xr.enabled=!1,this.renderCapture(_.camera,_.size,_.projection),E.xr.enabled=y,this.canvas},renderCapture:function(g,y,E){var _=this.el.renderer.autoClear,S=this.el,x,C,w,T=S.renderer;C=this.getRenderTarget(y.width,y.height),w=new Uint8Array(4*y.width*y.height),this.resize(y.width,y.height),T.autoClear=!0,T.clear(),T.setRenderTarget(C),T.render(S.object3D,g),T.autoClear=_,T.readRenderTargetPixels(C,0,0,y.width,y.height,w),T.setRenderTarget(null),E==="perspective"&&(w=this.flipPixelsVertically(w,y.width,y.height)),x=new ImageData(new Uint8ClampedArray(w),y.width,y.height),this.quad.visible=!1,this.ctx.putImageData(x,0,0)},flipPixelsVertically:function(g,y,E){for(var _=g.slice(0),S=0;S<y;++S)for(var x=0;x<E;++x)_[S*4+x*y*4]=g[S*4+(E-x)*y*4],_[S*4+1+x*y*4]=g[S*4+1+(E-x)*y*4],_[S*4+2+x*y*4]=g[S*4+2+(E-x)*y*4],_[S*4+3+x*y*4]=g[S*4+3+(E-x)*y*4];return _},saveCapture:function(){this.canvas.toBlob(function(g){var y="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",E=document.createElement("a"),_=URL.createObjectURL(g);E.href=_,E.setAttribute("download",y),E.innerHTML="downloading...",E.style.display="none",document.body.appendChild(E),setTimeout(function(){E.click(),document.body.removeChild(E)},1)},"image/png")}})},"./src/components/scene/stats.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./vendor/rStats.js"),p=c("./src/utils/index.js");c("./vendor/rStats.extras.js"),c("./src/lib/rStatsAframe.js");var v=window.aframeStats,g="a-hidden",y=window.threeStats;u.exports.Component=d("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var _=this.el;p.getUrlParameter("stats")!=="false"&&(this.stats=E(_),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),_.addEventListener("enter-vr",this.hideBound),_.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var _=this.stats;_&&(_("rAF").tick(),_("FPS").frame(),_().update())},hide:function(){this.statsEl.classList.add(g)},show:function(){this.statsEl.classList.remove(g)}});function E(_){var S=new y(_.renderer),x=new v(_),C=_.isMobile?[]:[S,x];return new A({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:C})}},"./src/components/scene/xr-mode-ui.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/constants/index.js"),p=c("./src/utils/index.js"),v="a-enter-vr",g="a-enter-ar",y="a-enter-vr-button",E="a-enter-ar-button",_="a-hidden",S="a-orientation-modal";u.exports.Component=d("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},cardboardModeEnabled:{default:!1},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var O=this,B=this.el;p.getUrlParameter("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),B.addEventListener("enter-vr",this.updateEnterInterfaces),B.addEventListener("exit-vr",this.updateEnterInterfaces),B.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(P){P.data.type==="loaderReady"&&(O.insideLoader=!0,O.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var O=this.data,B=this.el;if(!O.enabled||this.insideLoader||p.getUrlParameter("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(!this.enterVREl&&O.enterVREnabled&&(O.XRMode==="xr"||O.XRMode==="vr")&&(O.enterVRButton?(this.enterVREl=document.querySelector(O.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=x(this.onEnterVRButtonClick),B.appendChild(this.enterVREl))),!this.enterAREl&&O.enterAREnabled&&(O.XRMode==="xr"||O.XRMode==="ar")&&(O.enterARButton?(this.enterAREl=document.querySelector(O.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=C(this.onEnterARButtonClick,O.XRMode==="xr"),B.appendChild(this.enterAREl))),this.orientationModalEl=w(this.onModalClick),B.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(O){O&&O.parentNode&&O.parentNode.removeChild(O)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var O=this.el;this.enterVREl&&(O.is("vr-mode")||(O.isMobile||p.device.isMobileDeviceRequestingDesktopSite())&&!this.data.cardboardModeEnabled&&!p.device.checkVRSupport()?this.enterVREl.classList.add(_):(p.device.checkVRSupport()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(_),O.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var O=this.el;this.enterAREl&&(O.is("vr-mode")||!p.device.checkARSupport()?this.enterAREl.classList.add(_):(this.enterAREl.classList.remove(_),O.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var O=this.el,B=this.orientationModalEl;!B||!O.isMobile||(!p.device.isLandscape()&&O.is("vr-mode")?B.classList.remove(_):B.classList.add(_))}});function x(O){var B,P;return P=document.createElement("div"),P.classList.add(v),P.setAttribute(A.AFRAME_INJECTED,""),B=document.createElement("button"),B.className=y,B.setAttribute("title","Enter VR mode with a headset or fullscreen without"),B.setAttribute(A.AFRAME_INJECTED,""),p.device.isMobile()&&T(B),P.appendChild(B),B.addEventListener("click",function(L){O(),L.stopPropagation()}),P}function C(O,B){var P,L;return L=document.createElement("div"),L.classList.add(g),B&&L.classList.add("xr"),L.setAttribute(A.AFRAME_INJECTED,""),P=document.createElement("button"),P.className=E,P.setAttribute("title","Enter AR mode with a headset or handheld device."),P.setAttribute(A.AFRAME_INJECTED,""),p.device.isMobile()&&T(P),L.appendChild(P),P.addEventListener("click",function(N){O(),N.stopPropagation()}),L}function w(O){var B=document.createElement("div");B.className=S,B.classList.add(_),B.setAttribute(A.AFRAME_INJECTED,"");var P=document.createElement("button");return P.setAttribute(A.AFRAME_INJECTED,""),P.innerHTML="Exit VR",P.addEventListener("click",O),B.appendChild(P),B}function T(O){O.addEventListener("touchstart",function(){O.classList.remove("resethover")},{passive:!0}),O.addEventListener("touchend",function(){O.classList.add("resethover")},{passive:!0})}},"./src/components/shadow.js":(u,m,c)=>{var d=c("./src/core/component.js"),A=c("./src/lib/three.js"),p=d.registerComponent;u.exports.Component=p("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var v=this.data;this.updateDescendants(v.cast,v.receive)},remove:function(){var v=this.el;v.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(v,g){var y=this.el.sceneEl;this.el.object3D.traverse(function(E){if(E instanceof A.Mesh&&(E.castShadow=v,E.receiveShadow=g,y.hasLoaded&&E.material))for(var _=Array.isArray(E.material)?E.material:[E.material],S=0;S<_.length;S++)_[S].needsUpdate=!0})}})},"./src/components/sound.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/debug.js"),p=c("./src/lib/three.js"),v=A("components:sound:warn");u.exports.Component=d("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var g=this;this.listener=null,this.audioLoader=new p.AudioLoader,this.pool=new p.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){g.playSound()}},update:function(g){var y=this.data,E,_,S=y.src!==g.src;if(S){if(!y.src)return;this.setupSound()}for(E=0;E<this.pool.children.length;E++)_=this.pool.children[E],y.positional&&(_.setDistanceModel(y.distanceModel),_.setMaxDistance(y.maxDistance),_.setRefDistance(y.refDistance),_.setRolloffFactor(y.rolloffFactor)),_.setLoop(y.loop),_.setLoopStart(y.loopStart),y.loopStart!==0&&y.loopEnd===0?_.setLoopEnd(_.buffer.duration):_.setLoopEnd(y.loopEnd),_.setVolume(y.volume),_.isPaused=!1;if(y.on!==g.on&&this.updateEventListener(g.on),S){var x=this;this.loaded=!1,this.audioLoader.load(y.src,function(C){for(E=0;E<x.pool.children.length;E++)_=x.pool.children[E],_.setBuffer(C);x.loaded=!0,p.Cache.remove(y.src),(x.data.autoplay||x.mustPlay)&&x.playSound(x.processSound),x.el.emit("sound-loaded",x.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var g,y;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(g=0;g<this.pool.children.length;g++)y=this.pool.children[g],y.disconnect()}catch{v("Audio source not properly disconnected")}},updateEventListener:function(g){var y=this.el;g&&y.removeEventListener(g,this.playSoundBound),y.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var g=this.el,y,E=g.sceneEl,_=this,S;this.pool.children.length>0&&(this.stopSound(),g.removeObject3D("sound"));var x=this.listener=E.audioListener||new p.AudioListener;for(E.audioListener=x,E.camera&&E.camera.add(x),E.addEventListener("camera-set-active",function(C){C.detail.cameraEl.getObject3D("camera").add(x)}),this.pool=new p.Group,y=0;y<this.data.poolSize;y++)S=this.data.positional?new p.PositionalAudio(x):new p.Audio(x),this.pool.add(S);for(g.setObject3D(this.attrName,this.pool),y=0;y<this.pool.children.length;y++)S=this.pool.children[y],S.onEnded=function(){this.isPlaying=!1,_.el.emit("sound-ended",_.evtDetail,!1)}},pauseSound:function(){var g,y;for(this.isPlaying=!1,g=0;g<this.pool.children.length;g++)y=this.pool.children[g],!(!y.source||!y.source.buffer||!y.isPlaying||y.isPaused)&&(y.isPaused=!0,y.pause())},playSound:function(g){var y,E,_;if(!this.loaded){v("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,this.processSound=g;return}for(y=!1,this.isPlaying=!0,E=0;E<this.pool.children.length;E++)if(_=this.pool.children[E],!_.isPlaying&&_.buffer&&!y){g&&g(_),_.play(),_.isPaused=!1,y=!0;continue}if(!y){v("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);return}this.mustPlay=!1,this.processSound=void 0},stopSound:function(){var g,y;for(this.isPlaying=!1,g=0;g<this.pool.children.length;g++){if(y=this.pool.children[g],!y.source||!y.source.buffer)return;y.stop()}}})},"./src/components/text.js":(u,m,c)=>{var d=c("./node_modules/three-bmfont-text/index.js"),A=c("./node_modules/load-bmfont/browser.js"),p=c("./src/core/component.js").registerComponent,v=c("./src/core/shader.js"),g=c("./src/lib/three.js"),y=c("./src/utils/index.js"),E=y.debug("components:text:error"),_=v.shaders,S=y.debug("components:text:warn"),x=1,C=16,w=c("./src/constants/index.js").AFRAME_CDN_ROOT,T=w+"fonts/",O={aileronsemibold:T+"Aileron-Semibold.fnt",dejavu:T+"DejaVu-sdf.fnt",exo2bold:T+"Exo2Bold.fnt",exo2semibold:T+"Exo2SemiBold.fnt",kelsonsans:T+"KelsonSans.fnt",monoid:T+"Monoid.fnt",mozillavr:T+"mozillavr.fnt",roboto:T+"Roboto-msdf.json",sourcecodepro:T+"SourceCodePro.fnt"},B=["roboto"],P="roboto";u.exports.FONTS=O;var L=new K,N={},F={},z=/^\w+:/;u.exports.Component=p("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:P},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:_},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=d(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(W){var J=this.data,se=this.currentFont;if(F[J.font]?this.texture=F[J.font]:(this.texture=F[J.font]=new g.Texture,this.texture.anisotropy=C),this.createOrUpdateMaterial(),W.font!==J.font){this.updateFont();return}se&&(this.updateGeometry(this.geometry,se),this.updateLayout())},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var W=this.data,J,se=this.material,ge,fe=this.shaderData,me;if(me=W.shader,B.indexOf(W.font)!==-1||W.font.indexOf("-msdf.")>=0?me="msdf":W.font in O&&B.indexOf(W.font)===-1&&(me="sdf"),J=(this.shaderObject&&this.shaderObject.name)!==me,fe.alphaTest=W.alphaTest,fe.color=W.color,fe.map=this.texture,fe.opacity=W.opacity,fe.side=G(W.side),fe.transparent=W.transparent,fe.negate=W.negate,!J){this.shaderObject.update(fe),se.transparent=fe.transparent,se.side=fe.side;return}ge=q(this.el,me,fe),this.material=ge.material,this.shaderObject=ge.shader,this.material.side=fe.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var W=this.data,J=this.el,se,ge=this.geometry,fe=this;W.font||S("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),se=this.lookupFont(W.font||P)||W.font,L.get(se,function(){return H(se,W.yOffset)}).then(function(xe){var ye;if(xe.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");N[se]||(xe.widthFactor=N[xe]=k(xe)),fe.currentFont=xe,ye=fe.getFontImageSrc(),L.get(ye,function(){return j(ye)}).then(function(we){var Ee=fe.texture;Ee&&(Ee.image=we,Ee.needsUpdate=!0,F[W.font]=Ee,fe.texture=Ee,fe.initMesh(),fe.currentFont=xe,fe.updateGeometry(ge,xe),fe.updateLayout(),fe.mesh.visible=!0,J.emit("textfontset",{font:W.font,fontObj:xe}))}).catch(function(we){E(we.message),E(we.stack)})}).catch(function(me){E(me.message),E(me.stack)})},initMesh:function(){this.mesh||(this.mesh=new g.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var W=this.lookupFont(this.data.font||P)||this.data.font,J=this.currentFont.pages[0];return J.match(z)&&J.indexOf("http")!==0?W.replace(/(\.fnt)|(\.json)/,".png"):g.LoaderUtils.extractUrlBase(W)+J},updateLayout:function(){var W,J,se=this.el,ge=this.data,fe=this.geometry,me,xe,ye,we=this.mesh,Ee,He,Ae,Ke,Ue;if(!(!we||!fe.layout)){if(me=se.getAttribute("geometry"),Ae=ge.width||me&&me.width||x,Ee=Q(ge.wrapPixels,ge.wrapCount,this.currentFont.widthFactor),He=Ae/Ee,ye=fe.layout,xe=He*(ye.height+ye.descender),me&&me.primitive==="plane"&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!me.width,this.hasExplicitGeoHeight=!!me.height),this.hasExplicitGeoWidth||se.setAttribute("geometry","width",Ae),this.hasExplicitGeoHeight||se.setAttribute("geometry","height",xe)),W=ge.anchor==="align"?ge.align:ge.anchor,W==="left")Ke=0;else if(W==="right")Ke=-1*ye.width;else if(W==="center")Ke=-1*ye.width/2;else throw new TypeError("Invalid text.anchor property value",W);if(J=ge.baseline,J==="bottom")Ue=0;else if(J==="top")Ue=-1*ye.height+ye.ascender;else if(J==="center")Ue=-1*ye.height/2;else throw new TypeError("Invalid text.baseline property value",J);we.position.x=Ke*He+ge.xOffset,we.position.y=Ue*He,we.position.z=ge.zOffset,we.scale.set(He,-1*He,He)}},lookupFont:function(W){return O[W]},updateGeometry:function(){var W={},J={},se=/\\n/g,ge=/\\t/g;return function(fe,me){var xe=this.data;J.font=me,J.lineHeight=xe.lineHeight&&isFinite(xe.lineHeight)?xe.lineHeight:me.common.lineHeight,J.text=xe.value.toString().replace(se,`
`).replace(ge,"	"),J.width=Q(xe.wrapPixels,xe.wrapCount,me.widthFactor),fe.update(y.extend(W,xe,J))}}()});function G(W){switch(W){case"back":return g.FrontSide;case"double":return g.DoubleSide;default:return g.BackSide}}function H(W,J){return new Promise(function(se,ge){A(W,function(fe,me){if(fe){E("Error loading font",W),ge(fe);return}W.indexOf("/Roboto-msdf.json")>=0&&(J=30),J&&me.chars.map(function(ye){ye.yoffset+=J}),se(me)})})}function j(W){return new Promise(function(J,se){new g.ImageLoader().load(W,function(ge){J(ge)},void 0,function(){E("Error loading font image",W),se(null)})})}function q(W,J,se){var ge,fe;return fe=new _[J].Shader,fe.el=W,fe.init(se),fe.update(se),ge=fe.material,ge.transparent=se.transparent,{material:ge,shader:fe}}function Q(W,J,se){return W||(.5+J)*se}function k(W){var J=0,se=0,ge=0;return W.chars.map(function(fe){J+=fe.xadvance,fe.id>=48&&fe.id<=57&&(ge++,se+=fe.xadvance)}),ge?se/ge:J/W.chars.length}function K(){var W=this.cache={};this.get=function(J,se){return J in W||(W[J]=se()),W[J]}}},"./src/components/tracked-controls-webvr.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/tracked-controls.js"),p=c("./src/constants/index.js").DEFAULT_CAMERA_HEIGHT,v=c("./src/lib/three.js"),g=c("./src/constants/index.js").DEFAULT_HANDEDNESS,y={x:.175,y:-.3,z:-.03},E={x:0,y:0,z:-.175},_={touches:[]},S={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};u.exports.Component=d("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new v.Vector3,this.controllerQuaternion=new v.Quaternion,this.controllerEuler=new v.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(x,C){var w=this.el.getObject3D("mesh");w&&w.update&&w.update(C/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return p},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var x=this.data,C=A.findMatchingControllerWebVR(this.system.controllers,x.id,x.idPrefix,x.hand,x.controller);this.controller=C,this.el.components["tracked-controls"].controller=C,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(x){var C=this.controller,w=this.controllerEuler,T=this.controllerQuaternion,O=this.deltaControllerPosition,B,P,L,N,F;P=this.getHeadElement(),L=P.object3D,F=this.defaultUserHeight(),N=C.pose,B=(C?C.hand:void 0)||g,x.copy(L.position),O.set(y.x*(B==="left"?-1:B==="right"?1:0),y.y,y.z),O.multiplyScalar(F),O.applyAxisAngle(L.up,L.rotation.y),x.add(O),O.set(E.x,E.y,E.z),O.multiplyScalar(F),N.orientation?T.fromArray(N.orientation):T.copy(L.quaternion),w.setFromQuaternion(T),w.set(w.x,w.y,0),O.applyEuler(w),x.add(O)},updatePose:function(){var x=this.controller,C=this.data,w=this.el.object3D,T,O=this.system.vrDisplay,B;x&&(T=x.pose,T.position?w.position.fromArray(T.position):C.armModel&&this.applyArmModel(w.position),T.orientation&&w.quaternion.fromArray(T.orientation),O&&T.position&&(B=this.el.sceneEl.renderer.xr.getStandingMatrix(),w.matrix.compose(w.position,w.quaternion,w.scale),w.matrix.multiplyMatrices(B,w.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),w.rotateX(this.data.orientationOffset.x*v.MathUtils.DEG2RAD),w.rotateY(this.data.orientationOffset.y*v.MathUtils.DEG2RAD),w.rotateZ(this.data.orientationOffset.z*v.MathUtils.DEG2RAD))},updateButtons:function(){var x,C=this.controller,w;if(C){for(w=0;w<C.buttons.length;++w)this.buttonStates[w]||(this.buttonStates[w]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[w]||(this.buttonEventDetails[w]={id:w,state:this.buttonStates[w]}),x=C.buttons[w],this.handleButton(w,x);this.handleAxes()}},handleButton:function(x,C){var w;return w=this.handlePress(x,C)|this.handleTouch(x,C)|this.handleValue(x,C),w?(this.el.emit(S.BUTTONCHANGED,this.buttonEventDetails[x],!1),!0):!1},handleAxes:function(){var x=!1,C=this.controller.axes,w,T=this.axis,O=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),w=0;w<C.length;++w)O.push(T[w]!==C[w]),O[w]&&(x=!0);if(!x)return!1;for(this.axis.splice(0,this.axis.length),w=0;w<C.length;w++)this.axis.push(C[w]);return this.el.emit(S.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(x,C){var w,T=this.buttonStates[x];return C.pressed===T.pressed?!1:(w=C.pressed?S.BUTTONDOWN:S.BUTTONUP,this.el.emit(w,this.buttonEventDetails[x],!1),T.pressed=C.pressed,!0)},handleTouch:function(x,C){var w,T=this.buttonStates[x];return C.touched===T.touched?!1:(w=C.touched?S.TOUCHSTART:S.TOUCHEND,this.el.emit(w,this.buttonEventDetails[x],!1,_),T.touched=C.touched,!0)},handleValue:function(x,C){var w=this.buttonStates[x];return C.value===w.value?!1:(w.value=C.value,!0)}})},"./src/components/tracked-controls-webxr.js":(u,m,c)=>{var d=c("./src/utils/tracked-controls.js"),A=c("./src/core/component.js").registerComponent,p={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};u.exports.Component=A("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"gripSpace"}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var v=this.el.sceneEl;this.updateController(),v.addEventListener("controllersupdated",this.updateController)},pause:function(){var v=this.el.sceneEl;v.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(v){return!(!this.controller||this.controller.gamepad||v.inputSource.handedness!=="none"&&v.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=d.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var v=this.el.sceneEl,g=this.controller,y=v.frame;!g||!v.frame||!this.system.referenceSpace||g.hand||(this.pose=y.getPose(g[this.data.space],this.system.referenceSpace),this.updatePose(),this.updateButtons())},updatePose:function(){var v=this.el.object3D,g=this.pose;g&&(v.matrix.elements=g.transform.matrix,v.matrix.decompose(v.position,v.rotation,v.scale))},updateButtons:function(){var v,g,y=this.controller,E;if(!(!y||!y.gamepad)){for(E=y.gamepad,g=0;g<E.buttons.length;++g)this.buttonStates[g]||(this.buttonStates[g]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[g]||(this.buttonEventDetails[g]={id:g,state:this.buttonStates[g]}),v=E.buttons[g],this.handleButton(g,v);this.handleAxes()}},handleButton:function(v,g){var y;return y=this.handlePress(v,g)|this.handleTouch(v,g)|this.handleValue(v,g),y?(this.el.emit(p.BUTTONCHANGED,this.buttonEventDetails[v],!1),!0):!1},handleAxes:function(){var v=!1,g=this.controller.gamepad.axes,y,E=this.axis,_=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),y=0;y<g.length;++y)_.push(E[y]!==g[y]),_[y]&&(v=!0);if(!v)return!1;for(this.axis.splice(0,this.axis.length),y=0;y<g.length;y++)this.axis.push(g[y]);return this.el.emit(p.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(v,g){var y,E=this.buttonStates[v];return g.pressed===E.pressed?!1:(y=g.pressed?p.BUTTONDOWN:p.BUTTONUP,this.el.emit(y,this.buttonEventDetails[v],!1),E.pressed=g.pressed,!0)},handleTouch:function(v,g){var y,E=this.buttonStates[v];return g.touched===E.touched?!1:(y=g.touched?p.TOUCHSTART:p.TOUCHEND,this.el.emit(y,this.buttonEventDetails[v],!1),E.touched=g.touched,!0)},handleValue:function(v,g){var y=this.buttonStates[v];return g.value===y.value?!1:(y.value=g.value,!0)}})},"./src/components/tracked-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"targetRaySpace"}},after:["tracked-controls-webvr","tracked-controls-webxr"],update:function(){var A=this.data,p=this.el;p.sceneEl.hasWebXR?p.setAttribute("tracked-controls-webxr",{id:A.id,hand:A.hand,index:A.controller,iterateControllerProfiles:A.iterateControllerProfiles,handTrackingEnabled:A.handTrackingEnabled,space:A.space}):p.setAttribute("tracked-controls-webvr",A)}})},"./src/components/valve-index-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=c("./src/utils/tracked-controls.js"),v=p.checkControllerPresentAndSetup,g=p.emitIfAxesChanged,y=p.onButtonEvent,E=c("./src/constants/index.js").AFRAME_CDN_ROOT,_=E+"controllers/valve/index/valve-index-",S={left:_+"left.glb",right:_+"right.glb"},x="valve",C=c("./src/utils/index.js").device.isWebXRAvailable,w={left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}},T={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},O={left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},B={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},P=C?B:O,L=C?T:w;u.exports.Component=d("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var N=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(F){y(F.detail.id,"down",N)},this.onButtonUp=function(F){y(F.detail.id,"up",N)},this.onButtonTouchEnd=function(F){y(F.detail.id,"touchend",N)},this.onButtonTouchStart=function(F){y(F.detail.id,"touchstart",N)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var N=this.el;N.addEventListener("buttonchanged",this.onButtonChanged),N.addEventListener("buttondown",this.onButtonDown),N.addEventListener("buttonup",this.onButtonUp),N.addEventListener("touchend",this.onButtonTouchEnd),N.addEventListener("touchstart",this.onButtonTouchStart),N.addEventListener("model-loaded",this.onModelLoaded),N.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var N=this.el;N.removeEventListener("buttonchanged",this.onButtonChanged),N.removeEventListener("buttondown",this.onButtonDown),N.removeEventListener("buttonup",this.onButtonUp),N.removeEventListener("touchend",this.onButtonTouchEnd),N.removeEventListener("touchstart",this.onButtonTouchStart),N.removeEventListener("model-loaded",this.onModelLoaded),N.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var N=this.data,F=N.hand==="right"?0:N.hand==="left"?1:2;v(this,x,{index:F,iterateControllerProfiles:!0,hand:N.hand})},injectTrackedControls:function(){var N=this.el,F=this.data;N.setAttribute("tracked-controls",{idPrefix:x,controller:F.hand==="right"?1:F.hand==="left"?0:2,hand:F.hand,orientationOffset:F.orientationOffset}),this.loadModel()},loadModel:function(){var N=this.data;N.model&&this.el.setAttribute("gltf-model",""+S[N.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(N){var F=this.mapping.buttons[N.detail.id],z=this.buttonMeshes,G;F&&(F==="trigger"&&(G=N.detail.state.value,z&&z.trigger&&(z.trigger.rotation.x=this.triggerOriginalRotationX-G*(Math.PI/40))),this.el.emit(F+"changed",N.detail.state))},onModelLoaded:function(N){var F,z=N.detail.model,G=this;N.target!==this.el||!this.data.model||(F=this.buttonMeshes={},F.grip={left:z.getObjectByName("leftgrip"),right:z.getObjectByName("rightgrip")},F.menu=z.getObjectByName("menubutton"),F.system=z.getObjectByName("systembutton"),F.trackpad=z.getObjectByName("touchpad"),F.trigger=z.getObjectByName("trigger"),this.triggerOriginalRotationX=F.trigger.rotation.x,Object.keys(F).forEach(function(H){G.setButtonColor(H,G.data.buttonColor)}),z.position.copy(L[this.data.hand]),z.rotation.copy(P[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new A.Vector3(0,0,0)}))},onAxisMoved:function(N){g(this,this.mapping.axes,N)},updateModel:function(N,F){var z,G;this.data.model&&(G=F.indexOf("touch")!==-1,!G&&(z=F==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(N,z)))},setButtonColor:function(N,F){}})},"./src/components/visible.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent;u.exports.Component=d("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},"./src/components/vive-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/tracked-controls.js"),p=A.checkControllerPresentAndSetup,v=A.emitIfAxesChanged,g=A.onButtonEvent,y=c("./src/constants/index.js").AFRAME_CDN_ROOT,E=y+"controllers/vive/vr_controller_vive.obj",_=y+"controllers/vive/vr_controller_vive.mtl",S=c("./src/utils/index.js").device.isWebXRAvailable,x="htc-vive",C="OpenVR ",w=S?x:C,T={axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},O={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]},B=S?O:T;u.exports.Component=d("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},after:["tracked-controls"],mapping:B,init:function(){var P=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(L){g(L.detail.id,"down",P)},this.onButtonUp=function(L){g(L.detail.id,"up",P)},this.onButtonTouchEnd=function(L){g(L.detail.id,"touchend",P)},this.onButtonTouchStart=function(L){g(L.detail.id,"touchstart",P)},this.previousButtonValues={},this.bindMethods()},update:function(){var P=this.data;this.controllerIndex=P.hand==="right"?0:P.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var P=this.el;P.addEventListener("buttonchanged",this.onButtonChanged),P.addEventListener("buttondown",this.onButtonDown),P.addEventListener("buttonup",this.onButtonUp),P.addEventListener("touchend",this.onButtonTouchEnd),P.addEventListener("touchstart",this.onButtonTouchStart),P.addEventListener("model-loaded",this.onModelLoaded),P.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var P=this.el;P.removeEventListener("buttonchanged",this.onButtonChanged),P.removeEventListener("buttondown",this.onButtonDown),P.removeEventListener("buttonup",this.onButtonUp),P.removeEventListener("touchend",this.onButtonTouchEnd),P.removeEventListener("touchstart",this.onButtonTouchStart),P.removeEventListener("model-loaded",this.onModelLoaded),P.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var P=this.data;p(this,w,{index:this.controllerIndex,hand:P.hand})},injectTrackedControls:function(){var P=this.el,L=this.data;P.setAttribute("tracked-controls",{idPrefix:w,hand:L.hand,controller:this.controllerIndex,orientationOffset:L.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:E,mtl:_})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(P){var L=this.mapping.buttons[P.detail.id],N=this.buttonMeshes,F;L&&(L==="trigger"&&(F=P.detail.state.value,N&&N.trigger&&(N.trigger.rotation.x=-F*(Math.PI/12))),this.el.emit(L+"changed",P.detail.state))},onModelLoaded:function(P){var L,N=P.detail.model,F=this;P.target!==this.el||!this.data.model||(L=this.buttonMeshes={},L.grip={left:N.getObjectByName("leftgrip"),right:N.getObjectByName("rightgrip")},L.menu=N.getObjectByName("menubutton"),L.system=N.getObjectByName("systembutton"),L.trackpad=N.getObjectByName("touchpad"),L.touchpad=N.getObjectByName("touchpad"),L.trigger=N.getObjectByName("trigger"),Object.keys(L).forEach(function(z){F.setButtonColor(z,F.data.buttonColor)}),N.position.set(0,-.015,.04))},onAxisMoved:function(P){v(this,this.mapping.axes,P)},updateModel:function(P,L){var N,F;this.data.model&&(F=L.indexOf("touch")!==-1,!F&&(N=L==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(P,N)))},setButtonColor:function(P,L){var N=this.buttonMeshes;if(N){if(P==="grip"){N.grip.left.material.color.set(L),N.grip.right.material.color.set(L);return}N[P].material.color.set(L)}}})},"./src/components/vive-focus-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/tracked-controls.js"),p=A.checkControllerPresentAndSetup,v=A.emitIfAxesChanged,g=A.onButtonEvent,y=c("./src/constants/index.js").AFRAME_CDN_ROOT,E=y+"controllers/vive/focus-controller/focus-controller.gltf",_=c("./src/utils/index.js").device.isWebXRAvailable,S="htc-vive-focus",x="HTC Vive Focus ",C=_?S:x,w={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},T={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},O=_?T:w;u.exports.Component=d("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},after:["tracked-controls"],mapping:O,bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var B=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(P){g(P.detail.id,"down",B)},this.onButtonUp=function(P){g(P.detail.id,"up",B)},this.onButtonTouchStart=function(P){g(P.detail.id,"touchstart",B)},this.onButtonTouchEnd=function(P){g(P.detail.id,"touchend",B)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var B=this.el;B.addEventListener("buttonchanged",this.onButtonChanged),B.addEventListener("buttondown",this.onButtonDown),B.addEventListener("buttonup",this.onButtonUp),B.addEventListener("touchstart",this.onButtonTouchStart),B.addEventListener("touchend",this.onButtonTouchEnd),B.addEventListener("model-loaded",this.onModelLoaded),B.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var B=this.el;B.removeEventListener("buttonchanged",this.onButtonChanged),B.removeEventListener("buttondown",this.onButtonDown),B.removeEventListener("buttonup",this.onButtonUp),B.removeEventListener("touchstart",this.onButtonTouchStart),B.removeEventListener("touchend",this.onButtonTouchEnd),B.removeEventListener("model-loaded",this.onModelLoaded),B.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){p(this,C,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var B=this.el,P=this.data;B.setAttribute("tracked-controls",{armModel:P.armModel,idPrefix:C,orientationOffset:P.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",E)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(B){var P=B.detail.model,L;B.target!==this.el||!this.data.model||(L=this.buttonMeshes={},L.trigger=P.getObjectByName("BumperKey"),L.triggerPressed=P.getObjectByName("BumperKey_Press"),L.triggerPressed&&(L.triggerPressed.visible=!1),L.trackpad=P.getObjectByName("TouchPad"),L.trackpadPressed=P.getObjectByName("TouchPad_Press"),L.trackpadPressed&&(L.trackpadPressed.visible=!1))},onButtonChanged:function(B){var P=this.mapping.buttons[B.detail.id];P&&this.el.emit(P+"changed",B.detail.state)},onAxisMoved:function(B){v(this,this.mapping.axes,B)},updateModel:function(B,P){this.data.model&&this.updateButtonModel(B,P)},updateButtonModel:function(B,P){var L=this.buttonMeshes,N=B+"Pressed";if(!(!L||!L[B]||!L[N])){var F;switch(P){case"down":F=this.data.buttonHighlightColor;break;case"touchstart":F=this.data.buttonTouchedColor;break}F&&L[N].material.color.set(F),L[N].visible=!!F,L[B].visible=!F}}})},"./src/components/wasd-controls.js":(u,m,c)=>{var d=c("./src/constants/index.js").keyboardevent.KEYCODE_TO_CODE,A=c("./src/core/component.js").registerComponent,p=c("./src/lib/three.js"),v=c("./src/utils/index.js"),g=v.shouldCaptureKeyEvent,y=1e-5,E=.2,_=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];u.exports.Component=A("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new p.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(x,C){var w=this.data,T=this.el,O=this.velocity;!O[w.adAxis]&&!O[w.wsAxis]&&S(this.keys)||(C=C/1e3,this.updateVelocity(C),!(!O[w.adAxis]&&!O[w.wsAxis])&&T.object3D.position.add(this.getMovementVector(C)))},update:function(x){x.adAxis!==this.data.adAxis&&(this.velocity[x.adAxis]=0),x.wsAxis!==this.data.wsAxis&&(this.velocity[x.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(x){var C,w,T,O=this.data,B=this.keys,P=this.velocity,L,N;if(w=O.adAxis,L=O.wsAxis,x>E){P[w]=0,P[L]=0;return}var F=Math.pow(1/this.easing,x*60);P[w]!==0&&(P[w]=P[w]*F),P[L]!==0&&(P[L]=P[L]*F),Math.abs(P[w])<y&&(P[w]=0),Math.abs(P[L])<y&&(P[L]=0),O.enabled&&(C=O.acceleration,O.adEnabled&&(T=O.adInverted?-1:1,(B.KeyA||B.ArrowLeft)&&(P[w]-=T*C*x),(B.KeyD||B.ArrowRight)&&(P[w]+=T*C*x)),O.wsEnabled&&(N=O.wsInverted?-1:1,(B.KeyW||B.ArrowUp)&&(P[L]-=N*C*x),(B.KeyS||B.ArrowDown)&&(P[L]+=N*C*x)))},getMovementVector:function(){var x=new p.Vector3(0,0,0),C=new p.Euler(0,0,0,"YXZ");return function(w){var T=this.el.getAttribute("rotation"),O=this.velocity,B;return x.copy(O),x.multiplyScalar(w),T&&(B=this.data.fly?T.x:0,C.set(p.MathUtils.degToRad(B),p.MathUtils.degToRad(T.y),0),x.applyEuler(C)),x}}(),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var x=Object.keys(this.keys),C=0;C<x.length;C++)delete this.keys[x[C]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(x){var C;g(x)&&(C=x.code||d[x.keyCode],_.indexOf(C)!==-1&&(this.keys[C]=!0))},onKeyUp:function(x){var C;C=x.code||d[x.keyCode],delete this.keys[C]}});function S(x){var C;for(C in x)return!1;return!0}},"./src/components/windows-motion-controls.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/utils/tracked-controls.js"),p=A.checkControllerPresentAndSetup,v=A.emitIfAxesChanged,g=A.onButtonEvent,y=c("./src/utils/index.js"),E=y.debug("components:windows-motion-controls:debug"),_=y.debug("components:windows-motion-controls:warn"),S=c("./src/constants/index.js").DEFAULT_HANDEDNESS,x=c("./src/constants/index.js").AFRAME_CDN_ROOT,C=x+"controllers/microsoft/",w={left:"left.glb",right:"right.glb",default:"universal.glb"},T=c("./src/utils/index.js").device.isWebXRAvailable,O="windows-mixed-reality",B="Spatial Controller (Spatial Interaction Source) ",P=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,L=T?O:B,N={axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},F={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},z=T?F:N;u.exports.Component=d("windows-motion-controls",{schema:{hand:{default:S},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},after:["tracked-controls"],mapping:z,bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var G=this,H=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(j){g(j.detail.id,"down",G)},this.onButtonUp=function(j){g(j.detail.id,"up",G)},this.onButtonTouchStart=function(j){g(j.detail.id,"touchstart",G)},this.onButtonTouchEnd=function(j){g(j.detail.id,"touchend",G)},this.onControllerConnected=function(){G.setModelVisibility(!0)},this.onControllerDisconnected=function(){G.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},H.addEventListener("controllerconnected",this.onControllerConnected),H.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var G=this.el;G.addEventListener("buttonchanged",this.onButtonChanged),G.addEventListener("buttondown",this.onButtonDown),G.addEventListener("buttonup",this.onButtonUp),G.addEventListener("touchstart",this.onButtonTouchStart),G.addEventListener("touchend",this.onButtonTouchEnd),G.addEventListener("axismove",this.onAxisMoved),G.addEventListener("model-error",this.onModelError),G.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var G=this.el;G.removeEventListener("buttonchanged",this.onButtonChanged),G.removeEventListener("buttondown",this.onButtonDown),G.removeEventListener("buttonup",this.onButtonUp),G.removeEventListener("touchstart",this.onButtonTouchStart),G.removeEventListener("touchend",this.onButtonTouchEnd),G.removeEventListener("axismove",this.onAxisMoved),G.removeEventListener("model-error",this.onModelError),G.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){p(this,L,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh){this.modelReady();return}var G=this.createControllerModelUrl();this.loadModel(G)},createControllerModelUrl:function(G){var H=this.el.components["tracked-controls"],j=H?H.controller:null,q="default",Q=this.data.hand,k;if(j&&!window.hasNativeWebXRImplementation&&(Q=j.hand,!G)){var K=j.id.match(P);q=K&&K[0]||q}return k=w[Q]||w.default,C+q+"/"+k},injectTrackedControls:function(){var G=this.data;this.el.setAttribute("tracked-controls",{idPrefix:L,controller:G.pair,hand:G.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(G){var H=this.createControllerModelUrl(!0);G.detail.src!==H?(_("Failed to load controller model for device, attempting to load default."),this.loadModel(H)):_("Failed to load default controller model.")},loadModel:function(G){this.el.setAttribute("gltf-model","url("+G+")")},onModelLoaded:function(G){var H=this.controllerModel=G.detail.model,j=this.loadedMeshInfo,q,Q,k,K;if(G.target!==this.el)return;if(E("Processing model"),j.buttonMeshes={},j.axisMeshes={},H){for(q=0;q<this.mapping.buttons.length;q++){if(Q=this.mapping.buttonMeshNames[this.mapping.buttons[q]],!Q){E("Skipping unknown button at index: "+q+" with mapped name: "+this.mapping.buttons[q]);continue}if(k=H.getObjectByName(Q),!k){_("Missing button mesh with name: "+Q);continue}K={index:q,value:W(k,"VALUE"),pressed:W(k,"PRESSED"),unpressed:W(k,"UNPRESSED")},K.value&&K.pressed&&K.unpressed?j.buttonMeshes[this.mapping.buttons[q]]=K:_("Missing button submesh under mesh with name: "+Q+"(VALUE: "+!!K.value+", PRESSED: "+!!K.pressed+", UNPRESSED:"+!!K.unpressed+")")}for(q=0;q<this.mapping.axisMeshNames.length;q++){if(Q=this.mapping.axisMeshNames[q],!Q){E("Skipping unknown axis at index: "+q);continue}if(k=H.getObjectByName(Q),!k){_("Missing axis mesh with name: "+Q);continue}K={index:q,value:W(k,"VALUE"),min:W(k,"MIN"),max:W(k,"MAX")},K.value&&K.min&&K.max?j.axisMeshes[q]=K:_("Missing axis submesh under mesh with name: "+Q+"(VALUE: "+!!K.value+", MIN: "+!!K.min+", MAX:"+!!K.max+")")}this.calculateRayOriginFromMesh(H),this.setModelVisibility()}E("Model load complete.");function W(J,se){for(var ge=0,fe=J.children.length;ge<fe;ge++){var me=J.children[ge];if(me&&me.name===se)return me}}},calculateRayOriginFromMesh:function(){var G=new THREE.Quaternion;return function(H){var j;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,j=H.getObjectByName(this.mapping.pointingPoseMeshName),j){var q=H.parent;q&&(H.parent=null,H.updateMatrixWorld(!0),H.parent=q),j.getWorldPosition(this.rayOrigin.origin),j.getWorldQuaternion(G),this.rayOrigin.direction.applyQuaternion(G),q&&H.updateMatrixWorld(!0)}else E("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var G=new THREE.Quaternion;return function(H,j){var q=this.loadedMeshInfo.axisMeshes[H];if(q){var Q=q.min,k=q.max,K=q.value,W=j*.5+.5;K.setRotationFromQuaternion(G.copy(Q.quaternion).slerp(k.quaternion,W)),K.position.lerpVectors(Q.position,k.position,W)}}}(),lerpButtonTransform:function(){var G=new THREE.Quaternion;return function(H,j){var q=this.loadedMeshInfo.buttonMeshes[H];if(q){var Q=q.unpressed,k=q.pressed,K=q.value;K.setRotationFromQuaternion(G.copy(Q.quaternion).slerp(k.quaternion,j)),K.position.lerpVectors(Q.position,k.position,j)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(G){var H=this.mapping.buttons[G.detail.id];H&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(H,G.detail.state.value),this.el.emit(H+"changed",G.detail.state))},onAxisMoved:function(G){var H=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var j=0;j<H;j++)this.lerpAxisTransform(j,G.detail.axis[j]||0);v(this,this.mapping.axes,G)},setModelVisibility:function(G){var H=this.el.getObject3D("mesh");this.controllerPresent&&(G=G!==void 0?G:this.modelVisible,this.modelVisible=G,H&&(H.visible=G))}})},"./src/constants/index.js":(u,m,c)=>{u.exports={AFRAME_CDN_ROOT:window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:c("./src/constants/keyboardevent.js")}},"./src/constants/keyboardevent.js":u=>{u.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},"./src/core/a-assets.js":(u,m,c)=>{var d=c("./src/core/a-node.js").ANode,A=c("./src/utils/debug.js"),p=c("./src/lib/three.js"),v=new p.FileLoader,g=A("core:a-assets:warn");class y extends d{constructor(){super(),this.isAssets=!0,this.fileLoader=v,this.timeout=null}doConnectedCallback(){var B=this,P,L=[],N,F,z,G,H,j;if(super.doConnectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(G=this.querySelectorAll("img"),P=0;P<G.length;P++)z=S(G[P]),L.push(new Promise(function(q,Q){if(p.Cache.add(G[P].getAttribute("src"),z),z.complete){q();return}z.onload=q,z.onerror=Q}));for(F=this.querySelectorAll("audio, video"),P=0;P<F.length;P++)N=S(F[P]),!N.src&&!N.srcObject&&g("Audio/video asset has neither `src` nor `srcObject` attributes."),L.push(_(N));j=this.getChildren(),j.forEach(function(q){!q.isAssetItem||!q.hasAttribute("src")||L.push(new Promise(function(k,K){if(q.hasLoaded)return k();q.addEventListener("loaded",k),q.addEventListener("error",K)}))}),Promise.allSettled(L).then(function(){B.timeout!==null&&B.load()}),H=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){B.hasLoaded||(g("Asset loading timed out in",H,"ms"),B.timeout=null,B.emit("timeout"),B.load())},H)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(){return!1})}}customElements.define("a-assets",y);class E extends d{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var B=this,P=this.getAttribute("src");v.setResponseType(this.getAttribute("response-type")||w(P)),v.load(P,function(N){B.data=N,d.prototype.load.call(B)},function(N){B.emit("progress",{loadedBytes:N.loaded,totalBytes:N.total,xhr:N})},function(N){B.emit("error",{xhr:N})})}}customElements.define("a-asset-item",E);function _(O){if(!(!O.hasAttribute("autoplay")&&O.getAttribute("preload")!=="auto"))return new Promise(function(B,P){if(O.readyState===4)return B();if(O.error)return P();O.addEventListener("loadeddata",L,!1),O.addEventListener("progress",L,!1),O.addEventListener("error",P,!1);function L(){for(var N=0,F=0;F<O.buffered.length;F++)N+=O.buffered.end(F)-O.buffered.start(F);N>=O.duration&&(O.tagName==="VIDEO"&&p.Cache.add(O.getAttribute("src"),O),B())}})}function S(O){var B=x(O);return B.tagName&&B.tagName.toLowerCase()==="video"&&(B.setAttribute("playsinline",""),B.setAttribute("webkit-playsinline","")),B!==O&&(O.parentNode.appendChild(B),O.parentNode.removeChild(O)),B}function x(O){var B,P;return O.hasAttribute("crossorigin")||(P=O.getAttribute("src"),P!==null&&(P.indexOf("://")===-1||C(P)===window.location.host))?O:(g('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',P),O.crossOrigin="anonymous",B=O.cloneNode(!0),B)}function C(O){var B=O.indexOf("://")>-1?O.split("/")[2]:O.split("/")[0];return B.substring(0,B.indexOf(":"))}function w(O){var B=T(O),P=B.lastIndexOf(".");if(P>=0){var L=B.slice(P,O.search(/\?|#|$/));if(L===".glb")return"arraybuffer"}return"text"}u.exports.inferResponseType=w;function T(O){var B=document.createElement("a");B.href=O;var P=B.search.replace(/^\?/,""),L=O.replace(P,"").replace("?","");return L.substring(L.lastIndexOf("/")+1)}u.exports.getFileNameFromURL=T},"./src/core/a-cubemap.js":(u,m,c)=>{var d=c("./src/utils/debug.js"),A=d("core:cubemap:warn");class p extends HTMLElement{constructor(g){return g=super(g),g}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}p.prototype.doConnectedCallback.call(this)}doConnectedCallback(){this.srcs=this.validate()}validate(){var g=this.querySelectorAll("[src]"),y,E=[];if(g.length===6){for(y=0;y<g.length;y++)g[y].tagName==="IMG"?E.push(g[y]):E.push(g[y].getAttribute("src"));return E}A("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",p)},"./src/core/a-entity.js":(u,m,c)=>{var d=c("./src/core/a-node.js").ANode,A=c("./src/core/component.js").components,p=c("./src/lib/three.js"),v=c("./src/utils/index.js"),g=v.debug("core:a-entity:debug"),y=v.debug("core:a-entity:warn"),E="__",_=["position","rotation","scale","visible"],S={once:!0};class x extends d{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new p.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(L,N,F){var z=this.components[L];if(super.attributeChangedCallback(),z&&z.justInitialized&&F===""){delete z.justInitialized;return}!z&&F===null||this.setEntityAttribute(L,N,F)}doConnectedCallback(){var L=this,N,F;if(super.doConnectedCallback(),F=this.sceneEl,this.addToParent(),!this.isScene){if(!F){this.load();return}if(N=F.querySelector("a-assets"),N&&!N.hasLoaded){N.addEventListener("loaded",function(){L.load()});return}this.load()}}disconnectedCallback(){var L;if(this.parentEl){for(L in this.components)this.removeComponent(L,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(L){return this.object3DMap[L]}setObject3D(L,N){var F,z=this;if(!(N instanceof p.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");F=this.getObject3D(L),F&&this.object3D.remove(F),N.el=this,N.children.length&&N.traverse(function(H){H.el=z}),this.object3D.add(N),this.object3DMap[L]=N,this.emit("object3dset",{object:N,type:L})}removeObject3D(L){var N=this.getObject3D(L);if(!N){y("Tried to remove `Object3D` of type:",L,"which was not defined.");return}this.object3D.remove(N),delete this.object3DMap[L],this.emit("object3dremove",{type:L})}getOrCreateObject3D(L,N){var F=this.getObject3D(L);return!F&&N&&(F=new N,this.setObject3D(L,F)),y("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),F}add(L){if(!L.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(L.object3D),this.emit("child-attached",{el:L})}addToParent(){var L=this.parentEl=this.parentNode;!L||!L.add||this.attachedToParent||(L.add(this),this.attachedToParent=!0)}removeFromParent(){var L=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,L.emit("child-detached",{el:this})}load(){var L=this;this.hasLoaded||!this.parentEl||super.load.call(this,function(){L.parentEl&&(L.updateComponents(),(L.isScene||L.parentEl.isPlaying)&&L.play())})}remove(L){L?this.object3D.remove(L.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var L=this.children,N=[],F=0;F<L.length;F++){var z=L[F];z instanceof x&&N.push(z)}return N}initComponent(L,N,F){var z,G,H,j,q;H=v.split(L,E),j=H[0],G=H.length>2?H.slice(1).join("__"):H[1],A[j]&&(q=C(this,L)||N!==void 0,!(!q&&!F)&&(L in this.components||(this.initComponentDependencies(j),z=new A[j].Component(this,N,G),this.isPlaying&&z.play(),this.hasAttribute(L)||(z.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,L,"")),g("Component initialized: %s",L))))}initComponentDependencies(L){var N=this,F=A[L],z,G;if(F&&(z=A[L].dependencies,!!z))for(G=0;G<z.length;G++)N.initComponent(z[G],window.HTMLElement.prototype.getAttribute.call(N,z[G])||void 0,!0)}removeComponent(L,N){var F;if(F=this.components[L],!!F){if(!F.initialized){this.addEventListener("componentinitialized",function z(G){G.detail.name===L&&(this.removeComponent(L,N),this.removeEventListener("componentinitialized",z))});return}F.pause(),F.remove(),N&&(F.destroy(),delete this.components[L],this.hasAttribute(L)&&window.HTMLElement.prototype.removeAttribute.call(this,L)),this.emit("componentremoved",F.evtDetail,!1)}}updateComponents(){var L,N,F,z,G=this.componentsToUpdate;if(!(!this.hasLoaded&&!this.isLoading)){for(F=0;F<this.mixinEls.length;F++)for(z in this.mixinEls[F].componentCache)O(z)&&(G[z]=!0);if(this.getExtraComponents){N=this.getExtraComponents();for(z in N)O(z)&&(G[z]=!0)}for(F=0;F<this.attributes.length;++F)z=this.attributes[F].name,_.indexOf(z)===-1&&O(z)&&(G[z]=!0);for(F=0;F<_.length;F++)z=_[F],this.hasAttribute(z)&&this.updateComponent(z,this.getDOMAttribute(z));for(z in G)L=T(this.getDOMAttribute(z),N&&N[z]),this.updateComponent(z,L),delete G[z]}}updateComponent(L,N,F){var z=this.components[L];if(z){if(N===null&&!C(this,L)){this.removeComponent(L,!0);return}z.updateProperties(N,F);return}this.initComponent(L,N,!1)}removeAttribute(L,N){var F=this.components[L];if(F&&N===void 0&&this.removeComponent(L,!0),F&&N!==void 0){F.resetProperty(N);return}L==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,L)}play(){var L,N,F;if(!(this.isPlaying||!this.hasLoaded&&!this.isLoading)){this.isPlaying=!0;for(F in this.components)this.components[F].play();for(L=this.getChildEntities(),N=0;N<L.length;N++)L[N].play();this.emit("play")}}pause(){var L,N,F;if(this.isPlaying){this.isPlaying=!1;for(F in this.components)this.components[F].pause();for(L=this.getChildEntities(),N=0;N<L.length;N++)L[N].pause();this.emit("pause")}}setEntityAttribute(L,N,F){if(A[L]||this.components[L]){this.updateComponent(L,F);return}if(L==="mixin"){if(F===this.computedMixinStr)return;this.mixinUpdate(F,N)}}mixinUpdate(L,N,F){var z=x.componentsUpdated,G,H,j,q,Q=this;if(F||(N=N||this.getAttribute("mixin")),!this.hasLoaded){this.addEventListener("loaded-private",function(){Q.mixinUpdate(L,N,!0)},S);return}for(j=this.updateMixins(L,N),z.length=0,q=0;q<this.mixinEls.length;q++)for(G in this.mixinEls[q].componentCache)z.indexOf(G)===-1&&(this.components[G]?this.components[G].handleMixinUpdate():this.initComponent(G,null),z.push(G));for(q=0;q<j.oldMixinIds.length;q++)if(H=document.getElementById(j.oldMixinIds[q]),!!H)for(G in H.componentCache)z.indexOf(G)===-1&&this.components[G]&&(this.getDOMAttribute(G)?this.components[G].handleMixinUpdate():this.removeComponent(G,!0))}setAttribute(L,N,F){var z=x.singlePropUpdate,G,H,j,q,Q,k;if(q=L.indexOf(E),j=q>0?L.substring(0,q):L,!A[j]){L==="mixin"&&this.mixinUpdate(N),super.setAttribute.call(this,L,N);return}if(!this.components[L]&&this.hasAttribute(L)&&this.updateComponent(L,window.HTMLElement.prototype.getAttribute.call(this,L)),typeof F<"u"&&typeof N=="string"&&N.length>0&&typeof v.styleParser.parse(N)=="string"){for(k in z)delete z[k];G=z,G[N]=F,H=!1}else G=N,H=F===!0;this.updateComponent(L,G,H),Q=this.sceneEl&&this.sceneEl.getAttribute("debug"),Q&&this.components[L].flushToDOM()}flushToDOM(L){var N=this.components,F,z=this.children,G,H;for(H in N)N[H].flushToDOM();if(L)for(G=0;G<z.length;++G)F=z[G],F.flushToDOM&&F.flushToDOM(L)}getAttribute(L){var N;return L==="position"?this.object3D.position:L==="rotation"?B(this):L==="scale"?this.object3D.scale:L==="visible"?this.object3D.visible:(N=this.components[L],N?N.data:window.HTMLElement.prototype.getAttribute.call(this,L))}getDOMAttribute(L){var N=this.components[L];return N?N.attrValue:window.HTMLElement.prototype.getAttribute.call(this,L)}addState(L){this.is(L)||(this.states.push(L),this.emit("stateadded",L))}removeState(L){var N=this.states.indexOf(L);N!==-1&&(this.states.splice(N,1),this.emit("stateremoved",L))}is(L){return this.states.indexOf(L)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var L;if(this.parentNode){y("Entity can only be destroyed if detached from scenegraph.");return}for(L in this.components)this.components[L].destroy()}}function C(P,L){return P.components[L]&&P.components[L].attrValue?!0:w(L,P.mixinEls)}function w(P,L){var N,F=!1;for(N=0;N<L.length&&(F=L[N].hasAttribute(P),!F);++N);return F}function T(P,L){return L?L.constructor===Object?v.extend(L,v.styleParser.parse(P||{})):P||L:P}function O(P){return P.indexOf(E)!==-1&&(P=v.split(P,E)[0]),!!A[P]}function B(P){var L=p.MathUtils.radToDeg,N=P.object3D.rotation,F=P.rotationObj;return F.x=L(N.x),F.y=L(N.y),F.z=L(N.z),F}x.componentsUpdated=[],x.singlePropUpdate={},customElements.define("a-entity",x),u.exports.AEntity=x},"./src/core/a-mixin.js":(u,m,c)=>{var d=c("./src/core/a-node.js").ANode,A=c("./src/core/component.js").components,p=c("./src/utils/index.js"),v=p.styleParser,g="__";class y extends d{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(_,S,x){super.attributeChangedCallback(),this.cacheAttribute(_,x),this.updateEntities()}setAttribute(_,S){window.HTMLElement.prototype.setAttribute.call(this,_,S),this.cacheAttribute(_,S)}cacheAttribute(_,S){var x,C;C=p.split(_,g)[0],x=A[C],S===void 0&&(S=window.HTMLElement.prototype.getAttribute.call(this,_)),this.rawAttributeCache[_]=S,x&&(this.componentCache[_]=this.parseComponentAttrValue(x,S))}parseComponentAttrValue(_,S){var x;return typeof S!="string"?S:(_.isSingleProperty?(x=_.schema.parse(S),typeof x=="string"&&(x=S)):x=v.parse(S),x)}getAttribute(_){return this.componentCache[_]||window.HTMLElement.prototype.getAttribute.call(this,_)}cacheAttributes(){var _=this.attributes,S,x;for(x=0;x<_.length;x++)S=_[x].name,this.cacheAttribute(S)}updateEntities(){var _,S,x;if(this.sceneEl)for(S=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),x=0;x<S.length;x++)_=S[x],!(!_.hasLoaded||_.isMixin)&&_.mixinUpdate(this.id)}}customElements.define("a-mixin",y)},"./src/core/a-node.js":(u,m,c)=>{var d=c("./src/utils/index.js"),A=c("./src/core/readyState.js"),p=d.debug("core:a-node:warn"),v={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function g(E){return E.tagName.toLowerCase()in v||E.isNode}class y extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]}connectedCallback(){if(!A.canInitializeElements){document.addEventListener("aframeready",this.connectedCallback.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var _;this.sceneEl=this.closestScene(),this.sceneEl||p("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(_=this.getAttribute("mixin"),_&&this.updateMixins(_))}attributeChangedCallback(_,S,x){x!==this.computedMixinStr&&_==="mixin"&&!this.isMixin&&this.updateMixins(x,S)}closestScene(){for(var _=this;_&&!_.isScene;)_=_.parentElement;return _}closest(_){for(var S=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,x=this;x&&!S.call(x,_);)x=x.parentElement;return x}disconnectedCallback(){this.hasLoaded=!1}load(_,S){var x,C,w=this;this.hasLoaded||(S=S||g,x=this.getChildren(),C=x.filter(S).map(function(T){return new Promise(function(B,P){if(T.hasLoaded)return B();T.addEventListener("loaded",B),T.addEventListener("error",P)})}),Promise.allSettled(C).then(function(O){O.forEach(function(P){P.status==="rejected"&&p("Rendering scene with errors on node: ",P.reason.target)}),w.isLoading=!0,w.setupMutationObserver(),_&&_(),w.isLoading=!1,w.hasLoaded=!0,w.emit("loaded-private",void 0,!1),w.emit("loaded",void 0,!1)}))}setupMutationObserver(){var _=this,S={attributes:!0,attributeOldValue:!0},x=new MutationObserver(function(w){var T;for(T=0;T<w.length;T++)if(w[T].type==="attributes"){var O=w[T].attributeName,B=window.HTMLElement.prototype.getAttribute.call(_,O),P=w[T].oldValue;_.attributeChangedCallback(O,P,B)}});x.observe(this,S)}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(_,S){var x=y.newMixinIdArray,C=y.oldMixinIdArray,w=y.mixinIds,T,O,B;for(x.length=0,C.length=0,O=_?d.split(_.trim(),/\s+/):x,B=S?d.split(S.trim(),/\s+/):C,w.newMixinIds=O,w.oldMixinIds=B,T=0;T<B.length;T++)O.indexOf(B[T])===-1&&this.unregisterMixin(B[T]);for(this.computedMixinStr="",this.mixinEls.length=0,T=0;T<O.length;T++)this.registerMixin(O[T]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),O.length===0&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),w}registerMixin(_){var S,x,C,w=document.getElementById(_);if(!w){p("No mixin was found with id `%s`",_);return}if(C=w.getAttribute("mixin"),C)for(S=d.split(C.trim(),/\s+/),x=0;x<S.length;x++)this.registerMixin(S[x]);this.computedMixinStr=this.computedMixinStr+" "+w.id,this.mixinEls.push(w)}setAttribute(_,S){_==="mixin"&&this.updateMixins(S),window.HTMLElement.prototype.setAttribute.call(this,_,S)}unregisterMixin(_){var S,x=this.mixinEls,C;for(S=0;S<x.length;++S)if(C=x[S],_===C.id){x.splice(S,1);break}}emit(_,S,x,C){var w=y.evtData;x===void 0&&(x=!0),w.bubbles=!!x,w.detail=S,C&&(w=d.extend({},C,w)),this.dispatchEvent(new CustomEvent(_,w))}}y.evtData={},y.newMixinIdArray=[],y.oldMixinIdArray=[],y.mixinIds={},customElements.define("a-node",y),u.exports.ANode=y,u.exports.knownTags=v},"./src/core/component.js":(u,m,c)=>{var d=c("./src/core/schema.js"),A=c("./src/core/scene/scenes.js"),p=c("./src/core/system.js"),v=c("./src/utils/index.js"),g=u.exports.components={},y=d.parseProperty,E=d.process,_=d.isSingleProperty,S=d.stringifyProperties,x=d.stringifyProperty,C=v.styleParser,w=v.debug("core:component:warn"),T=document.currentScript,O=new RegExp("[A-Z]+"),B={},P=Object.freeze({}),L=[],N={get:function(k,K){return k.getComputedPropertyValue(K)},set:function(k,K,W){return K in k.schema?k.recomputeProperty(K,W):W!==void 0&&k.handleUnknownProperty(K,W),!0}},F=u.exports.Component=function(k,K,W){var J=this;if(this.sceneOnly&&!k.isScene)throw new Error("Component `"+this.name+"` can only be applied to <a-scene>");if(W&&!this.multiple)throw new Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=k,this.id=W,this.attrName=this.name+(W?"__"+W:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=B[this.name];var se=this.events;this.events={},z(this,se),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),v.objectPool.removeUnusedKeys(this.data,this.schema),this.oldData=this.objectPool.use(),v.objectPool.removeUnusedKeys(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,N)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.silenceUnknownPropertyWarnings=!1,this.throttledEmitComponentChanged=v.throttleLeadingAndTrailing(function(){k.emit("componentchanged",J.evtDetail,!1)},200),this.updateProperties(K,!0)};F.prototype={schema:{},init:function(){},events:{},update:function(k){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(k){var K=this.schema;return typeof k=="string"?k:this.isSingleProperty?x(k,K):(k=S(k,K),C.stringify(k))},flushToDOM:function(k){var K=k?this.data:this.attrValue;K!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(K))},updateProperties:function(k,K){var W=this.el;this.updateData(k,K),!(!W.hasLoaded&&!W.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var k=this.el,K;k.initializingComponents[this.name]||(k.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete k.initializingComponents[this.name],K=this.isObjectBased?P:void 0,this.dataChanged=!1,this.storeOldData(),this.update(K),k.isPlaying&&this.play(),k.emit("componentinitialized",this.evtDetail,!1))},updateData:function(k,K){if(this.isSingleProperty){this.recomputeProperty(void 0,k);return}K?(v.objectPool.clearObject(this.attrValue),this.recomputeData(k),this.schemaChangeRequired=!!this.updateSchema):typeof k=="string"?C.parse(k,this.attrValueProxy):v.extend(this.attrValueProxy,k),this.updateSchemaIfNeeded(k)},updateSchemaIfNeeded:function(k){if(!this.schemaChangeRequired||!this.updateSchema){for(var K=0;K<L.length;K++)w("Unknown property `"+L[K]+"` for component `"+this.name+"`.");L.length=0;return}L.length=0,this.updateSchema(this.data),v.objectPool.removeUnusedKeys(this.data,this.schema),this.silenceUnknownPropertyWarnings=!0,this.recomputeData(k),this.silenceUnknownPropertyWarnings=!1,this.schemaChangeRequired=!1},callUpdateHandler:function(){if(!(!this.isPositionRotationScale&&!this.dataChanged)){this.dataChanged=!1;var k=this.oldData;this.oldDataInUse=!0,this.update(k),k!==this.oldData&&this.objectPool.recycle(k),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(k){!this.isSingleProperty&&!(k in this.schema)||(k?this.attrValue[k]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(k,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(k){var K;K=v.extend({},g[this.name].schema),v.extend(K,k),this.schema=E(K),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(k){var K=this.el.mixinEls,W=this.attrValue&&k?this.attrValue[k]:this.attrValue;if(W!==void 0)return W;for(var J=K.length-1;J>=0;J--){var se=K[J].getAttribute(this.attrName);if(!(se===null||k&&!(k in se)))return k?se[k]:se}var ge=k?this.schema[k].default:this.schema.default;return ge},recomputeProperty:function(k,K){var W=k?this.schema[k]:this.schema;if(K!=null){this.attrValue===void 0&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var J=k?this.attrValue[k]:this.attrValue;J=W.isCacheable?y(K,W,J):K,typeof J=="string"&&(J=K===""?void 0:K),k?this.attrValue[k]=J:this.attrValue=J}this.oldDataInUse&&(this.oldData=this.objectPool.use(),v.objectPool.removeUnusedKeys(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var se=k?this.oldData[k]:this.oldData,ge=k?this.data[k]:this.data,fe=y(this.getComputedPropertyValue(k),W,ge);return W.type==="array"&&!k&&(fe=v.clone(fe)),W.equals(fe,se)||(this.dataChanged=!0,W.schemaChange&&(this.schemaChangeRequired=!0)),k?this.data[k]=fe:this.data=fe,fe},handleUnknownProperty:function(k,K){this.attrValue===void 0&&(this.attrValue=this.objectPool.use()),this.attrValue[k]=K,this.silenceUnknownPropertyWarnings||(this.deferUnknownPropertyWarnings?L.push(k):this.silenceUnknownPropertyWarnings||w("Unknown property `"+k+"` for component `"+this.name+"`."))},storeOldData:function(){if(!this.isObjectBased){this.oldData=this.data;return}if(this.isSingleProperty){this.oldData=y(this.data,this.schema,this.oldData);return}var k;for(k in this.schema)this.data[k]!==void 0&&(this.data[k]&&typeof this.data[k]=="object"?this.oldData[k]=y(this.data[k],this.schema[k],this.oldData[k]):this.oldData[k]=this.data[k])},recomputeData:function(k){var K;if(this.isSingleProperty){this.recomputeProperty(void 0,k);return}if(k&&typeof k=="object")for(K in this.schema)this.attrValueProxy[K]=k[K];else for(K in this.schema)this.attrValueProxy[K]=void 0;typeof k=="string"&&C.parse(k,this.attrValueProxy);for(K in this.attrValue)this.attrValue[K]!==void 0&&L.indexOf(K)!==-1&&(K in this.schema||w("Unknown property `"+K+"` for component `"+this.name+"`."))},eventsAttach:function(){var k;this.eventsDetach();for(k in this.events)this.el.addEventListener(k,this.events[k])},eventsDetach:function(){var k;for(k in this.events)this.el.removeEventListener(k,this.events[k])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}};function z(k,K){var W;for(W in K)k.events[W]=K[W].bind(k)}if(window.debug)var G=u.exports.registrationOrderWarnings={};u.exports.registerComponent=function(k,K){var W,J={},se,ge;if(document.currentScript&&document.currentScript!==T&&A.forEach(function(xe){xe.hasLoaded||document.currentScript.compareDocumentPosition(xe)!==Node.DOCUMENT_POSITION_FOLLOWING&&(w("The component `"+k+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(G[k]=!0))}),O.test(k)===!0&&w("The component name `"+k+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+k.toLowerCase()+"`"),k.indexOf("__")!==-1)throw new Error("The component name `"+k+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(K).forEach(function(me){J[me]={value:K[me],writable:!0}}),g[k])throw new Error("The component `"+k+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");W=function(me,xe,ye){F.call(this,me,xe,ye)},W.prototype=Object.create(F.prototype,J),W.prototype.name=k,W.prototype.isPositionRotationScale=k==="position"||k==="rotation"||k==="scale",W.prototype.constructor=W,W.prototype.system=p&&p.systems[k],W.prototype.play=q(W.prototype.play),W.prototype.pause=j(W.prototype.pause),se=v.extend(E(W.prototype.schema,W.prototype.name)),W.prototype.isSingleProperty=ge=_(W.prototype.schema),W.prototype.isObjectBased=!ge||ge&&(Q(se.default)||Q(y(void 0,se))),B[k]=v.objectPool.createPool(),g[k]={Component:W,dependencies:W.prototype.dependencies,before:W.prototype.before,after:W.prototype.after,isSingleProperty:W.prototype.isSingleProperty,isObjectBased:W.prototype.isObjectBased,multiple:W.prototype.multiple,sceneOnly:W.prototype.sceneOnly,name:k,schema:se,stringify:W.prototype.stringify};for(var fe=0;fe<A.length;fe++)A[fe].emit("componentregistered",{name:k},!1);return W};function H(k){return k.tick||k.tock}function j(k){return function(){var W=this.el.sceneEl;this.isPlaying&&(k.call(this),this.isPlaying=!1,this.eventsDetach(),H(this)&&W.removeBehavior(this))}}function q(k){return function(){var W=this.el.sceneEl,J=this.el.isPlaying&&!this.isPlaying;!this.initialized||!J||(k.call(this),this.isPlaying=!0,this.eventsAttach(),H(this)&&W.addBehavior(this))}}function Q(k){return k&&k.constructor===Object&&!(k instanceof window.HTMLElement)}},"./src/core/geometry.js":(u,m,c)=>{var d=c("./src/core/schema.js"),A=d.process,p=u.exports.geometries={},v=u.exports.geometryNames=[],g=c("./src/lib/three.js"),y=u.exports.Geometry=function(){};y.prototype={schema:{},init:function(E){return this.geometry=new g.BufferGeometry,this.geometry},update:function(E){}},u.exports.registerGeometry=function(E,_){var S,x={};if(Object.keys(_).forEach(function(w){x[w]={value:_[w],writable:!0}}),p[E])throw new Error("The geometry `"+E+"` has been already registered");return S=function(){y.call(this)},S.prototype=Object.create(y.prototype,x),S.prototype.name=E,S.prototype.constructor=S,p[E]={Geometry:S,schema:A(S.prototype.schema)},v.push(E),S}},"./src/core/propertyTypes.js":(u,m,c)=>{var d=c("./src/utils/coordinates.js"),A=c("./node_modules/debug/src/browser.js"),p=A("core:propertyTypes:warn"),v=u.exports.propertyTypes={},g=/[,> .[\]:]/,y=/url\((.+)\)/;E("audio","",C),E("array",[],_,S,x),E("asset","",C),E("boolean",!1,B),E("color","#FFF"),E("int",0,P),E("number",0,L),E("map","",C),E("model","",C),E("selector",null,N,z,O,!1),E("selectorAll",null,F,G,x,!1),E("src","",H),E("string",""),E("time",0,P),E("vec2",{x:0,y:0},j,d.stringify,d.equals),E("vec3",{x:0,y:0,z:0},j,d.stringify,d.equals),E("vec4",{x:0,y:0,z:0,w:1},j,d.stringify,d.equals);function E(k,K,W,J,se,ge){if(k in v)throw new Error("Property type "+k+" is already registered.");v[k]={default:K,parse:W||w,stringify:J||T,equals:se||O,isCacheable:ge!==!1}}u.exports.registerPropertyType=E;function _(k){if(Array.isArray(k))return k;if(!k||typeof k!="string")return[];return k.split(",").map(K);function K(W){return W.trim()}}function S(k){return k.join(", ")}function x(k,K){if(!Array.isArray(k)||!Array.isArray(K))return k===K;if(k.length!==K.length)return!1;for(var W=0;W<k.length;W++)if(k[W]!==K[W])return!1;return!0}function C(k){var K,W;if(typeof k!="string")return k;if(W=k.match(y),W)return W[1];if(k.charAt(0)==="#"){if(K=document.getElementById(k.substring(1)),K)return K.tagName==="CANVAS"||K.tagName==="VIDEO"||K.tagName==="IMG"?K:K.getAttribute("src");p('"'+k+'" asset not found.');return}return k}function w(k){return k}function T(k){return k===null?"null":k.toString()}function O(k,K){return k===K}function B(k){return k!=="false"&&k!==!1}function P(k){return parseInt(k,10)}function L(k){return parseFloat(k,10)}function N(k){return k?typeof k!="string"?k:k[0]==="#"&&!g.test(k)?document.getElementById(k.substring(1)):document.querySelector(k):null}function F(k){return k?typeof k!="string"?k:Array.prototype.slice.call(document.querySelectorAll(k),0):null}function z(k){return k.getAttribute?"#"+k.getAttribute("id"):T(k)}function G(k){return k instanceof Array?k.map(function(K){return"#"+K.getAttribute("id")}).join(", "):T(k)}function H(k){return p("`src` property type is deprecated. Use `asset` instead."),C(k)}function j(k,K,W){return d.parse(k,K,W)}function q(k,K){return k==="audio"&&typeof K!="string"||k==="array"&&!Array.isArray(K)||k==="asset"&&typeof K!="string"||k==="boolean"&&typeof K!="boolean"||k==="color"&&typeof K!="string"||k==="int"&&typeof K!="number"||k==="number"&&typeof K!="number"||k==="map"&&typeof K!="string"||k==="model"&&typeof K!="string"||k==="selector"&&typeof K!="string"&&K!==null||k==="selectorAll"&&typeof K!="string"&&K!==null||k==="src"&&typeof K!="string"||k==="string"&&typeof K!="string"||k==="time"&&typeof K!="number"?!1:k==="vec2"?Q(K,2):k==="vec3"?Q(K,3):k==="vec4"?Q(K,4):!0}u.exports.isValidDefaultValue=q;function Q(k,K){if(k===null)return!0;if(typeof k!="object"||Object.keys(k).length!==K)return!1;var W=k.x,J=k.y,se=k.z,ge=k.w;return!(typeof W!="number"||typeof J!="number"||K>2&&typeof se!="number"||K>3&&typeof ge!="number")}u.exports.isValidDefaultCoordinate=Q},"./src/core/readyState.js":u=>{u.exports.canInitializeElements=!1;function m(){if(document.readyState==="complete"){c();return}document.addEventListener("readystatechange",function d(){document.readyState==="complete"&&(document.removeEventListener("readystatechange",d),c())})}u.exports.waitForDocumentReadyState=m;function c(){u.exports.canInitializeElements||(u.exports.canInitializeElements=!0,setTimeout(function(){document.dispatchEvent(new CustomEvent("aframeready"))}))}u.exports.emitReady=c},"./src/core/scene/a-scene.js":(u,m,c)=>{var d=c("./src/core/scene/metaTags.js").inject,A=c("./src/core/scene/wakelock.js"),p=c("./src/core/scene/loadingScreen.js"),v=c("./src/core/scene/scenes.js"),g=c("./src/core/system.js").systems,y=c("./src/core/component.js").components,E=c("./src/lib/three.js"),_=c("./src/utils/index.js"),S=_.debug("core:a-scene:warn"),x=c("./src/core/a-entity.js").AEntity,C=c("./src/core/a-node.js").ANode,w=c("./src/core/scene/postMessage.js"),T=_.device.isIOS(),O=_.device.isMobile(),B=_.device.isWebXRAvailable;T&&c("./src/utils/ios-orientationchange-blank-bug.js");class P extends x{constructor(){var Q;super(),Q=this,Q.clock=new E.Clock,Q.isIOS=T,Q.isMobile=O,Q.hasWebXR=B,Q.isAR=!1,Q.isScene=!0,Q.object3D=new E.Scene,Q.object3D.onAfterRender=function(k,K,W){Q.isPlaying&&Q.tock(Q.time,Q.delta,W)},Q.resize=Q.resize.bind(Q),Q.render=Q.render.bind(Q),Q.systems={},Q.systemNames=[],Q.time=Q.delta=0,Q.usedOfferSession=!1,Q.componentOrder=[],Q.behaviors={},Q.hasLoaded=!1,Q.isPlaying=!1,Q.originalHTML=Q.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var Q=this,k=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),j(this),this.setupRenderer(),p.setup(this,F),this.resize(),k||this.addFullScreenStyles(),w(this),d(this),A(this),this.onVRPresentChangeBound=this.onVRPresentChange.bind(this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){Q.enterVR()},this.exitVRBound=function(){Q.exitVR()},this.exitVRTrueBound=function(){Q.exitVR(!0)},this.pointerRestrictedBound=function(){Q.pointerRestricted()},this.pointerUnrestrictedBound=function(){Q.pointerUnrestricted()},Q.hasWebXR||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){Q.attachedCallbackPostCamera()}),this.initSystems(),this.componentOrder=L(y,this.componentOrder),this.addEventListener("componentregistered",function(){Q.componentOrder=L(y,Q.componentOrder)}),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){Q.enterVR()})}attachedCallbackPostCamera(){var Q,k=this;window.addEventListener("load",Q),window.addEventListener("resize",function(){k.isIOS?setTimeout(k.resize,100):k.resize()}),this.play(),v.push(this)}initSystems(){var Q;this.initSystem("camera");for(Q in g)Q!=="camera"&&this.initSystem(Q)}initSystem(Q){this.systems[Q]||(this.systems[Q]=new g[Q](this),this.systemNames.push(Q))}disconnectedCallback(){var Q=v.indexOf(this);super.disconnectedCallback(),v.splice(Q,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize),this.renderer.dispose()}addBehavior(Q){var k,K=this.behaviors[Q.name],W;K||(K=this.behaviors[Q.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}});for(W in K)if(Q[W]){if(k=K[W],k.inUse){var J=k.markedForRemoval.indexOf(Q);J!==-1&&k.markedForRemoval.splice(J,1)}k.array.indexOf(Q)===-1&&k.array.push(Q)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return _.device.checkHeadsetConnected()}enterAR(){var Q;if(!this.hasWebXR)throw Q="Failed to enter AR mode, WebXR not supported.",new Error(Q);if(!_.device.checkARSupport())throw Q="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(Q);return this.enterVR(!0)}enterVR(Q,k){var K=this,W,J=K.renderer.xr,se;if(k&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(K.usedOfferSession&&k)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var ge=K.getAttribute("renderer");if(J.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var fe=this.sceneEl.systems.webxr.sessionReferenceSpaceType;J.setReferenceSpaceType(fe);var me=Q?"immersive-ar":"immersive-vr";return se=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(Ee,He){var Ae=k?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);K.usedOfferSession|=k,Ae(me,se).then(function(Ue){k&&(K.usedOfferSession=!1),J.layersEnabled=se.requiredFeatures.indexOf("layers")!==-1,J.setSession(Ue).then(function(){J.setFoveation(ge.foveationLevel),K.xrSession=Ue,K.systems.renderer.setWebXRFrameRate(Ue),Ue.addEventListener("end",K.exitVRBound),ye(Ee)})},function(Ue){var ct=me==="immersive-ar",vt=ct?"AR":"VR";He(new Error("Failed to enter "+vt+" mode (`requestSession`)",{cause:Ue}))})})}else{if(W=_.device.getVRDisplay(),J.setDevice(W),W.isPresenting&&!window.hasNativeWebVRImplementation)return ye(),Promise.resolve();var xe={highRefreshRate:ge.highRefreshRate};return W.requestPresent([{source:this.canvas,attributes:xe}]).then(ye,we)}}return ye(),Promise.resolve();function ye(Ee){var He;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(He=new CustomEvent("vrdisplaypresentchange",{detail:{display:_.device.getVRDisplay()}}),window.dispatchEvent(He)),Q?K.addState("ar-mode"):K.addState("vr-mode"),K.emit("enter-vr",{target:K}),!K.hasWebXR&&K.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),K.addFullScreenStyles(),!K.isMobile&&!K.checkHeadsetConnected()&&G(K.canvas),K.resize(),Ee&&Ee()}function we(Ee){throw K.removeState("vr-mode"),Ee&&Ee.message?new Error("Failed to enter VR mode (`requestPresent`): "+Ee.message):new Error("Failed to enter VR mode (`requestPresent`).")}}exitVR(){var Q=this,k,K=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(K.enabled=!1,k=_.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0;else if(k.isPresenting)return k.exitPresent().then(W,J)}else H();return W(),Promise.resolve();function W(){Q.removeState("vr-mode"),Q.removeState("ar-mode"),Q.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),Q.hasAttribute("embedded")&&Q.removeFullScreenStyles(),Q.resize(),Q.isIOS&&_.forceCanvasResizeSafariMobile(Q.canvas),Q.renderer.setPixelRatio(window.devicePixelRatio),Q.emit("exit-vr",{target:Q})}function J(se){throw se&&se.message?new Error("Failed to exit VR mode (`exitPresent`): "+se.message):new Error("Failed to exit VR mode (`exitPresent`).")}}pointerRestricted(){if(this.canvas){var Q=this.getPointerLockElement();Q&&Q!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}pointerUnrestricted(){var Q=this.getPointerLockElement();Q&&Q===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}onVRPresentChange(Q){var k=Q.display||Q.detail.display;if(k&&k.isPresenting){this.enterVR();return}this.exitVR()}getAttribute(Q){var k=this.systems[Q];return k?k.data:x.prototype.getAttribute.call(this,Q)}getDOMAttribute(Q){var k=this.systems[Q];return k?k.data:x.prototype.getDOMAttribute.call(this,Q)}setAttribute(Q,k,K){if(g[Q]){C.prototype.setAttribute.call(this,Q,k);var W=this.systems[Q];W&&W.updateProperties(k);return}x.prototype.setAttribute.call(this,Q,k,K)}removeBehavior(Q){var k,K,W=this.behaviors[Q.name],J;for(K in W)Q[K]&&(k=W[K],J=k.array.indexOf(Q),J!==-1&&(k.inUse?k.markedForRemoval.indexOf(Q)===-1&&k.markedForRemoval.push(Q):(k.array[J]=k.array[k.array.length-1],k.array.pop())))}resize(){var Q=this.camera,k=this.canvas,K,W,J,se=this.renderer.xr.isPresenting;W=this.renderer.xr.enabled&&se,!(!Q||!k||this.is("vr-mode")&&(this.isMobile||W))&&(K=this.getAttribute("embedded")&&!this.is("vr-mode"),J=F(k,K,this.maxCanvasSize,this.is("vr-mode")),Q.aspect=J.width/J.height,Q.updateProjectionMatrix(),this.renderer.setSize(J.width,J.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var Q=this,k,K,W,J;J={alpha:!0,antialias:!O,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&(W=this.getAttribute("renderer"),K=_.styleParser.parse(W),K.precision&&(J.precision=K.precision+"p"),K.antialias&&K.antialias!=="auto"&&(J.antialias=K.antialias==="true"),K.logarithmicDepthBuffer&&K.logarithmicDepthBuffer!=="auto"&&(J.logarithmicDepthBuffer=K.logarithmicDepthBuffer==="true"),K.alpha&&(J.alpha=K.alpha==="true"),K.stencil&&(J.stencil=K.stencil==="true"),K.multiviewStereo&&(J.multiviewStereo=K.multiviewStereo==="true"),this.maxCanvasSize={width:K.maxCanvasWidth?parseInt(K.maxCanvasWidth):this.maxCanvasSize.width,height:K.maxCanvasHeight?parseInt(K.maxCanvasHeight):this.maxCanvasSize.height}),k=this.renderer=new E.WebGLRenderer(J),k.setPixelRatio(window.devicePixelRatio),this.camera&&k.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){k.xr.setPoseTarget(Q.camera.el.object3D)})}play(){var Q=this,k=this;if(this.renderStarted){x.prototype.play.call(this);return}this.addEventListener("loaded",function(){var K=this.renderer,W,J=this.renderer.xr;x.prototype.play.call(this),!k.renderStarted&&(k.resize(),k.renderer&&(window.performance&&window.performance.mark("render-started"),p.remove(),W=_.device.getVRDisplay(),W&&W.isPresenting&&(J.setDevice(W),J.enabled=!0,k.enterVR()),K.setAnimationLoop(this.render),k.renderStarted=!0,k.emit("renderstart")))}),setTimeout(function(){x.prototype.load.call(Q)})}updateComponent(Q){Q in g||x.prototype.updateComponent.apply(this,arguments)}tick(Q,k){var K,W=this.systems;for(this.callComponentBehaviors("tick",Q,k),K=0;K<this.systemNames.length;K++)W[this.systemNames[K]].tick&&W[this.systemNames[K]].tick(Q,k)}tock(Q,k,K){var W,J=this.systems;for(this.callComponentBehaviors("tock",Q,k),W=0;W<this.systemNames.length;W++)J[this.systemNames[W]].tock&&J[this.systemNames[W]].tock(Q,k,K)}render(Q,k){var K=this.renderer;this.frame=k,this.delta=this.clock.getDelta()*1e3,this.time=this.clock.elapsedTime*1e3,this.isPlaying&&this.tick(this.time,this.delta);var W=null;this.is("ar-mode")&&(W=this.object3D.background,this.object3D.background=null),K.render(this.object3D,this.camera),W&&(this.object3D.background=W)}callComponentBehaviors(Q,k,K){for(var W,J=0;J<this.componentOrder.length;J++){var se=this.behaviors[this.componentOrder[J]];if(se){var ge=se[Q];for(ge.inUse=!0,W=0;W<ge.array.length;W++)ge.array[W].isPlaying&&ge.array[W][Q](k,K);for(ge.inUse=!1,W=0;W<ge.markedForRemoval.length;W++)this.removeBehavior(ge.markedForRemoval[W]);ge.markedForRemoval.length=0}}}}function L(q,Q){var k={},K,W,J=Q||[];J.length=0;for(W in q){var se=q[W];if(se!==void 0){var ge=se.before?se.before.slice(0):[],fe=se.after?se.after.slice(0):[];k[W]={before:ge,after:fe,visited:!1,done:!1}}}for(W in k)for(K=0;K<k[W].before.length;K++){var me=k[W].before[K];if(!(me in k)){S("Invalid ordering constraint, no component named `"+me+"` referenced by `"+W+"`");continue}k[me].after.push(W)}function xe(ye){if(!(!(ye in k)||k[ye].done)){if(k[ye].visited){S("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");return}k[ye].visited=!0;for(var we=0;we<k[ye].after.length;we++){var Ee=k[ye].after[we];Ee in k||S("Invalid before/after constraint, no component named `"+Ee+"` referenced in `"+ye+"`"),xe(Ee)}k[ye].done=!0,J.push(ye)}}for(W in k)k[W].done||xe(W);return J}u.exports.determineComponentBehaviorOrder=L;function N(q,Q){var k,K=window.devicePixelRatio;return!Q||Q.width===-1&&Q.height===-1||q.width*K<Q.width&&q.height*K<Q.height||(k=q.width/q.height,q.width*K>Q.width&&Q.width!==-1&&(q.width=Math.round(Q.width/K),q.height=Math.round(Q.width/k/K)),q.height*K>Q.height&&Q.height!==-1&&(q.height=Math.round(Q.height/K),q.width=Math.round(Q.height*k/K))),q}customElements.define("a-scene",P);function F(q,Q,k,K){if(!q.parentElement)return{height:0,width:0};if(Q){var W;return W={height:q.parentElement.offsetHeight,width:q.parentElement.offsetWidth},N(W,k)}return z(k,K)}function z(q,Q){var k;return k={height:document.body.offsetHeight,width:document.body.offsetWidth},Q?k:N(k,q)}function G(q){var Q=q.requestFullscreen||q.webkitRequestFullscreen||q.mozRequestFullScreen||q.msRequestFullscreen;Q.apply(q,[{navigationUI:"hide"}])}function H(){var q=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement;q&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function j(q){var Q;Q=document.createElement("canvas"),Q.classList.add("a-canvas"),Q.dataset.aframeCanvas=!0,q.appendChild(Q),document.addEventListener("fullscreenchange",k),document.addEventListener("mozfullscreenchange",k),document.addEventListener("webkitfullscreenchange",k),document.addEventListener("MSFullscreenChange",k),Q.addEventListener("touchmove",function(K){K.preventDefault()},{passive:!1}),q.canvas=Q,q.emit("render-target-loaded",{target:Q}),setTimeout(q.resize.bind(q),0);function k(){var K=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;K||q.exitVR(),document.activeElement.blur(),document.body.focus()}}u.exports.setupCanvas=j,u.exports.AScene=P},"./src/core/scene/loadingScreen.js":(u,m,c)=>{var d=c("./src/utils/index.js"),A=d.styleParser,p,v,g,y="loading-screen",E="a-loader-title";u.exports.setup=function(C,w){p=C,g=w;var T=p.hasAttribute(y)?A.parse(p.getAttribute(y)):void 0,O=T&&T.dotsColor||"white",B=T&&T.backgroundColor||"#24CAFF",P=T===void 0||T.enabled==="true"||T.enabled===void 0,L,N,F,z,G,H,j,q,Q,k;P&&(L=new THREE.Scene,N=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),F=new THREE.MeshBasicMaterial({color:O}),z=new THREE.Mesh(N,F),G=z.clone(),H=z.clone(),j=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),q=new THREE.Clock,Q=0,k=function(){p.renderer.render(L,j),Q=q.getElapsedTime()%4,z.visible=Q>=1,G.visible=Q>=2,H.visible=Q>=3},L.background=new THREE.Color(B),L.add(j),z.position.set(-1,0,-15),G.position.set(0,0,-15),H.position.set(1,0,-15),j.add(z),j.add(G),j.add(H),S(),setTimeout(function(){p.hasLoaded||(_(j),v.style.display="block",window.addEventListener("resize",function(){_(j)}),p.renderer.setAnimationLoop(k))},200))},u.exports.remove=function(){window.removeEventListener("resize",_),v&&(v.style.display="none")};function _(x){var C=p.hasAttribute("embedded"),w=g(p.canvas,C,p.maxCanvasSize,p.is("vr-mode"));x.aspect=w.width/w.height,x.updateProjectionMatrix(),p.renderer.setSize(w.width,w.height,!1)}function S(){v=document.createElement("div"),v.className=E,v.innerHTML=document.title,v.style.display="none",p.appendChild(v)}},"./src/core/scene/metaTags.js":(u,m,c)=>{var d=c("./src/constants/index.js"),A=c("./src/utils/index.js").extend,p=u.exports.MOBILE_HEAD_TAGS=[g({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),g({name:"mobile-web-app-capable",content:"yes"}),g({name:"theme-color",content:"black"})],v=[g({name:"apple-mobile-web-app-capable",content:"yes"}),g({name:"apple-mobile-web-app-status-bar-style",content:"black"}),y({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];function g(_){return{tagName:"meta",attributes:_,exists:function(){return document.querySelector('meta[name="'+_.name+'"]')}}}function y(_){return{tagName:"link",attributes:_,exists:function(){return document.querySelector('link[rel="'+_.rel+'"]')}}}u.exports.inject=function(S){var x=document.head,C=x.querySelector("script"),w,T=[];return p.forEach(O),S.isIOS&&v.forEach(O),T;function O(B){!B||B.exists()||(w=E(B),w&&(C?C.parentNode.insertBefore(w,C):x.appendChild(w),T.push(w)))}};function E(_){if(!(!_||!_.tagName)){var S=document.createElement(_.tagName);return S.setAttribute(d.AFRAME_INJECTED,""),A(S,_.attributes)}}},"./src/core/scene/postMessage.js":(u,m,c)=>{var d=c("./src/utils/index.js").isIframed;u.exports=function(v){d()&&window.addEventListener("message",A.bind(v))};function A(p){var v=this;if(p.data)switch(p.data.type){case"vr":switch(p.data.data){case"enter":v.enterVR();break;case"exit":v.exitVR();break}}}},"./src/core/scene/scenes.js":u=>{u.exports=[]},"./src/core/scene/wakelock.js":(u,m,c)=>{var d=c("./vendor/wakelock/wakelock.js");u.exports=function(p){if(p.isMobile){var v=p.wakelock=new d;p.addEventListener("enter-vr",function(){v.request()}),p.addEventListener("exit-vr",function(){v.release()})}}},"./src/core/schema.js":(u,m,c)=>{var d=c("./src/utils/index.js"),A=c("./src/core/propertyTypes.js"),p=d.debug,v=A.isValidDefaultValue,g=A.propertyTypes,y=p("core:schema:warn");function E(C){return"type"in C?typeof C.type=="string":"default"in C}u.exports.isSingleProperty=E,u.exports.process=function(C,w){var T;if(E(C))return _(C,w);for(T in C)C[T]=_(C[T],w);return C};function _(C,w){var T=C.default,O,B,P=C.type;return C.type?C.type==="bool"?P="boolean":C.type==="float"&&(P="number"):T!==void 0&&(typeof T=="boolean"||typeof T=="number")?P=typeof T:Array.isArray(T)?P="array":P="string",B=g[P],B||y("Unknown property type for component `"+w+"`: "+P),O=!!C.parse,C.parse=C.parse||B.parse,C.stringify=C.stringify||B.stringify,C.equals=C.equals||B.equals,C.isCacheable=C.isCacheable===!0||B.isCacheable,C.type=P,"default"in C?!O&&!v(P,T)&&y("Default value `"+T+"` does not match type `"+P+"` in component `"+w+"`"):C.default=B.default,C}u.exports.processPropertyDefinition=_,u.exports.parseProperties=function(){var C=[];return function(w,T,O,B,P){var L,N,F,z;C.length=0;for(N in O?w:T)O&&w[N]===void 0||C.push(N);if(w===null||typeof w!="object")return w;for(N in w)w[N]!==void 0&&!T[N]&&!P&&y("Unknown property `"+N+"` for component/system `"+B+"`.");for(L=0;L<C.length;L++){if(N=C[L],F=T[N],z=w[N],!T[N])return;w[N]=S(z,F)}return w}}();function S(C,w,T){return(C==null||C==="")&&(C=w.default,Array.isArray(C)&&(C=C.slice())),w.parse(C,w.default,T)}u.exports.parseProperty=S,u.exports.stringifyProperties=function(C,w){var T,O,B,P={},L;for(T in C)O=w[T],B=C[T],L=B,typeof L=="object"&&(L=x(B,O),O||y("Unknown component property: "+T)),P[T]=L;return P};function x(C,w){return typeof C!="object"?C:!w||C===null?JSON.stringify(C):w.stringify(C)}u.exports.stringifyProperty=x},"./src/core/shader.js":(u,m,c)=>{var d=c("./src/core/schema.js"),A=d.process,p=u.exports.shaders={},v=u.exports.shaderNames=[],g=c("./src/lib/three.js"),y=c("./src/utils/index.js"),E={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},_=u.exports.Shader=function(){};_.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(S){return this.uniforms=this.initUniforms(),this.material=new(this.raw?g.RawShaderMaterial:g.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?g.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var S,x=this.schema,C={},w;for(S in x)x[S].is==="uniform"&&(w=E[x[S].type],C[S]={type:w,value:void 0});return C},update:function(S){var x,C,w=this.schema,T=this.uniforms;for(x in S)if(!(!w[x]||w[x].is!=="uniform")){if(w[x].type==="map"){if(!T[x]||T[x].value===S[x])continue;C="_texture_"+x,this.setMapOnTextureLoad(T,x,C),y.material.updateMapMaterialFromData(C,x,this,S);continue}T[x].value=this.parseValue(w[x].type,S[x]),T[x].needsUpdate=!0}},parseValue:function(S,x){var C;switch(S){case"vec2":return new g.Vector2(x.x,x.y);case"vec3":return new g.Vector3(x.x,x.y,x.z);case"vec4":return new g.Vector4(x.x,x.y,x.z,x.w);case"color":return C=new g.Color(x),new g.Vector3(C.r,C.g,C.b);default:return x}},setMapOnTextureLoad:function(S,x,C){var w=this;this.el.addEventListener("materialtextureloaded",function(){S[x].value=w.material[C],S[x].needsUpdate=!0})}},u.exports.registerShader=function(S,x){var C,w={};if(Object.keys(x).forEach(function(T){w[T]={value:x[T],writable:!0}}),p[S])throw new Error("The shader "+S+" has already been registered");return C=function(){_.call(this)},C.prototype=Object.create(_.prototype,w),C.prototype.name=S,C.prototype.constructor=C,p[S]={Shader:C,schema:A(C.prototype.schema)},v.push(S),C}},"./src/core/system.js":(u,m,c)=>{var d=c("./src/core/component.js"),A=c("./src/core/schema.js"),p=c("./src/utils/index.js"),v=c("./src/core/readyState.js"),g=A.parseProperties,y=A.parseProperty,E=A.process,_=A.isSingleProperty,S=p.styleParser,x=u.exports.systems={},C=u.exports.System=function(w){var T=d&&d.components[this.name];this.el=w,this.sceneEl=w,T&&(T.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};C.prototype={schema:{},init:function(){},update:function(w){},updateProperties:function(w){var T=this.data;Object.keys(A).length&&(this.buildData(w),this.update(T))},buildData:function(w){var T=this.schema;Object.keys(T).length&&(w=w||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),_(T)?this.data=y(w,T):this.data=g(S.parse(w)||{},T,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},u.exports.registerSystem=function(w,T){var O,B,P={},L=p.findAllScenes(document);if(Object.keys(T).forEach(function(N){P[N]={value:T[N],writable:!0}}),x[w])throw new Error("The system `"+w+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(B=function(N){C.call(this,N)},B.prototype=Object.create(C.prototype,P),B.prototype.name=w,B.prototype.constructor=B,B.prototype.schema=p.extend(E(B.prototype.schema)),x[w]=B,v.canInitializeElements)for(O=0;O<L.length;O++)L[O].initSystem(w)}},"./src/extras/components/index.js":(u,m,c)=>{c("./src/extras/components/pivot.js")},"./src/extras/components/pivot.js":(u,m,c)=>{var d=c("./src/core/component.js").registerComponent,A=c("./src/lib/three.js"),p=new A.Vector3,v=new A.Vector3;d("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var g=this.data,y=this.el,E=y.object3D.parent,_=y.object3D,S=new A.Group;p.copy(_.position),v.copy(_.rotation),E.remove(_),S.add(_),E.add(S),y.object3D=S,_.position.set(-1*g.x,-1*g.y,-1*g.z),S.position.set(g.x+p.x,g.y+p.y,g.z+p.z),S.rotation.copy(_.rotation),_.rotation.set(0,0,0)}})},"./src/extras/primitives/getMeshMixin.js":(u,m,c)=>{var d=c("./src/core/component.js").components,A=c("./src/core/shader.js").shaders,p=c("./src/utils/index.js"),v={};Object.keys(d.material.schema).forEach(g),Object.keys(A.standard.schema).forEach(g);function g(y){var E=y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();y==="fog"&&(E="material-fog"),y==="visible"&&(E="material-visible"),v[E]="material."+y}u.exports=function(){return{defaultComponents:{material:{}},mappings:p.extend({},v)}}},"./src/extras/primitives/index.js":(u,m,c)=>{c("./src/extras/primitives/primitives/a-camera.js"),c("./src/extras/primitives/primitives/a-cursor.js"),c("./src/extras/primitives/primitives/a-curvedimage.js"),c("./src/extras/primitives/primitives/a-gltf-model.js"),c("./src/extras/primitives/primitives/a-image.js"),c("./src/extras/primitives/primitives/a-light.js"),c("./src/extras/primitives/primitives/a-link.js"),c("./src/extras/primitives/primitives/a-obj-model.js"),c("./src/extras/primitives/primitives/a-sky.js"),c("./src/extras/primitives/primitives/a-sound.js"),c("./src/extras/primitives/primitives/a-text.js"),c("./src/extras/primitives/primitives/a-video.js"),c("./src/extras/primitives/primitives/a-videosphere.js"),c("./src/extras/primitives/primitives/meshPrimitives.js")},"./src/extras/primitives/primitives.js":(u,m,c)=>{var d=c("./src/core/a-node.js").knownTags,A=c("./src/core/a-entity.js").AEntity,p=c("./src/core/component.js").components,v=c("./src/utils/index.js"),g=v.debug,y=v.entity.setComponentProperty,E=g("extras:primitives:debug"),_=g("extras:primitives:warn"),S=g("extras:primitives:error"),x=u.exports.primitives={};u.exports.registerPrimitive=function(B,P){if(B=B.toLowerCase(),d[B]){S("Trying to register primitive "+B+" that has been already previously registered");return}d[B]=!0,E("Registering <%s>",B),P.defaultAttributes&&_("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var L=P.mappings||{},N=class extends A{constructor(){super(),this.defaultComponentsFromPrimitive=P.defaultComponents||P.defaultAttributes||{},this.deprecated=P.deprecated||null,this.deprecatedMappings=P.deprecatedMappings||{},this.mappings=L,P.deprecated&&console.warn(P.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var F=this.mappings,z=this;Object.keys(F).forEach(function(H){var j;H!==H.toLowerCase()&&_("Mapping keys should be specified in lower case. The mapping key "+H+" may not be recognized"),p[H]&&(j=F[H].replace(".","-"),F[j]=F[H],delete F[H],console.warn("The primitive "+z.tagName.toLowerCase()+" has a mapping collision. The attribute "+H+" has the same name as a registered component and has been renamed to "+j))})}getExtraComponents(){var F,z,G,H,j,q=this;for(z=v.clone(this.defaultComponentsFromPrimitive),j=this.getAttribute("mixin"),j&&(j=v.split(j.trim(),/\s+/),j.forEach(function(se){var ge=document.getElementById(se);if(ge){var fe=ge.rawAttributeCache,me=ge.componentCache;for(var xe in fe){if(H=q.mappings[xe],H){C(H,fe[xe],z);return}xe in me&&(z[xe]=Q(z[xe],me[xe]))}}})),G=0;G<this.attributes.length;G++)F=this.attributes[G],H=this.mappings[F.name],H&&C(H,F.value,z);return z;function Q(J,se){return k(J)?K(se):k(se)?K(J):W(J)&&W(se)?v.extendDeep(J,se):K(se)}function k(J){return typeof J>"u"}function K(J){return W(J)?v.extendDeep({},J):J}function W(J){return J!==null&&J.constructor===Object}}attributeChangedCallback(F,z,G){var H=this.mappings[F];if(F in this.deprecatedMappings&&console.warn(this.deprecatedMappings[F]),!F||!H){super.attributeChangedCallback(F,z,G);return}y(this,H,G)}};return customElements.define(B,N),N.mappings=L,x[B]=N,N};function C(O,B,P){var L=v.entity.getComponentPropertyPath(O);L.constructor===Array?(P[L[0]]=P[L[0]]||{},P[L[0]][L[1]]=B.trim()):P[L]=B.trim()}function w(O,B){var P=p[O].schema;Object.keys(P).map(function(L){var N=L.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();B[N]!==void 0&&(N=O+"-"+L),B[N]=O+"."+L})}function T(O,B,P){P=P||{},Object.keys(B).map(function(N){w(N,P)}),u.exports.registerPrimitive(O,v.extendDeep({},null,{defaultComponents:B,mappings:P}))}u.exports.definePrimitive=T},"./src/extras/primitives/primitives/a-camera.js":(u,m,c)=>{var d=c("./src/extras/primitives/primitives.js").registerPrimitive;d("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},"./src/extras/primitives/primitives/a-cursor.js":(u,m,c)=>{var d=c("./src/extras/primitives/getMeshMixin.js"),A=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");A("a-cursor",p.extendDeep({},d(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},"./src/extras/primitives/primitives/a-curvedimage.js":(u,m,c)=>{var d=c("./src/extras/primitives/getMeshMixin.js"),A=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");A("a-curvedimage",p.extendDeep({},d(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},"./src/extras/primitives/primitives/a-gltf-model.js":(u,m,c)=>{var d=c("./src/extras/primitives/primitives.js").registerPrimitive;d("a-gltf-model",{mappings:{src:"gltf-model"}})},"./src/extras/primitives/primitives/a-image.js":(u,m,c)=>{var d=c("./src/extras/primitives/getMeshMixin.js"),A=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");A("a-image",p.extendDeep({},d(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-light.js":(u,m,c)=>{var d=c("./src/extras/primitives/primitives.js").registerPrimitive;d("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}})},"./src/extras/primitives/primitives/a-link.js":(u,m,c)=>{var d=c("./src/extras/primitives/primitives.js").registerPrimitive;d("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},"./src/extras/primitives/primitives/a-obj-model.js":(u,m,c)=>{var d=c("./src/extras/primitives/getMeshMixin.js")(),A=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");A("a-obj-model",p.extendDeep({},d,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},"./src/extras/primitives/primitives/a-sky.js":(u,m,c)=>{var d=c("./src/extras/primitives/getMeshMixin.js"),A=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js"),v=c("./src/extras/primitives/primitives/meshPrimitives.js");A("a-sky",p.extendDeep({},d(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:p.extendDeep({},v["a-sphere"].mappings)}))},"./src/extras/primitives/primitives/a-sound.js":(u,m,c)=>{var d=c("./src/extras/primitives/primitives.js").registerPrimitive;d("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},"./src/extras/primitives/primitives/a-text.js":(u,m,c)=>{var d=c("./src/extras/primitives/primitives.js").definePrimitive;d("a-text",{text:{anchor:"align",width:5}})},"./src/extras/primitives/primitives/a-video.js":(u,m,c)=>{var d=c("./src/extras/primitives/getMeshMixin.js"),A=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");A("a-video",p.extendDeep({},d(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-videosphere.js":(u,m,c)=>{var d=c("./src/extras/primitives/getMeshMixin.js"),A=c("./src/extras/primitives/primitives.js").registerPrimitive,p=c("./src/utils/index.js");A("a-videosphere",p.extendDeep({},d(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},"./src/extras/primitives/primitives/meshPrimitives.js":(u,m,c)=>{var d=c("./src/extras/primitives/getMeshMixin.js"),A=c("./src/core/geometry.js").geometries,p=c("./src/core/geometry.js").geometryNames,v=c("./src/extras/primitives/primitives.js").registerPrimitive,g=c("./src/utils/index.js"),y=u.exports={};p.forEach(function(S){var x=A[S],C=E(S),w={};Object.keys(x.schema).forEach(function(P){w[E(P)]="geometry."+P});var T="a-"+C,O=v(T,g.extendDeep({},d(),{defaultComponents:{geometry:{primitive:S}},mappings:w}));y[T]=O});function E(_){return _.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},"./src/geometries/box.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js");d("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(p){this.geometry=new A.BoxGeometry(p.width,p.height,p.depth,p.segmentsWidth,p.segmentsHeight,p.segmentsDepth)}})},"./src/geometries/circle.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js"),p=A.MathUtils.degToRad;d("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(v){this.geometry=new A.CircleGeometry(v.radius,v.segments,p(v.thetaStart),p(v.thetaLength))}})},"./src/geometries/cone.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js"),p=A.MathUtils.degToRad;d("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(v){this.geometry=new A.CylinderGeometry(v.radiusTop,v.radiusBottom,v.height,v.segmentsRadial,v.segmentsHeight,v.openEnded,p(v.thetaStart),p(v.thetaLength))}})},"./src/geometries/cylinder.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js"),p=A.MathUtils.degToRad;d("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(v){this.geometry=new A.CylinderGeometry(v.radius,v.radius,v.height,v.segmentsRadial,v.segmentsHeight,v.openEnded,p(v.thetaStart),p(v.thetaLength))}})},"./src/geometries/dodecahedron.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js");d("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(p){this.geometry=new A.DodecahedronGeometry(p.radius,p.detail)}})},"./src/geometries/icosahedron.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js");d("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(p){this.geometry=new A.IcosahedronGeometry(p.radius,p.detail)}})},"./src/geometries/index.js":(u,m,c)=>{c("./src/geometries/box.js"),c("./src/geometries/circle.js"),c("./src/geometries/cone.js"),c("./src/geometries/cylinder.js"),c("./src/geometries/dodecahedron.js"),c("./src/geometries/icosahedron.js"),c("./src/geometries/octahedron.js"),c("./src/geometries/plane.js"),c("./src/geometries/ring.js"),c("./src/geometries/sphere.js"),c("./src/geometries/tetrahedron.js"),c("./src/geometries/torus.js"),c("./src/geometries/torusKnot.js"),c("./src/geometries/triangle.js")},"./src/geometries/octahedron.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js");d("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(p){this.geometry=new A.OctahedronGeometry(p.radius,p.detail)}})},"./src/geometries/plane.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js");d("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(p){this.geometry=new A.PlaneGeometry(p.width,p.height,p.segmentsWidth,p.segmentsHeight)}})},"./src/geometries/ring.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js"),p=A.MathUtils.degToRad;d("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(v){this.geometry=new A.RingGeometry(v.radiusInner,v.radiusOuter,v.segmentsTheta,v.segmentsPhi,p(v.thetaStart),p(v.thetaLength))}})},"./src/geometries/sphere.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js"),p=A.MathUtils.degToRad;d("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(v){this.geometry=new A.SphereGeometry(v.radius,v.segmentsWidth,v.segmentsHeight,p(v.phiStart),p(v.phiLength),p(v.thetaStart),p(v.thetaLength))}})},"./src/geometries/tetrahedron.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js");d("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(p){this.geometry=new A.TetrahedronGeometry(p.radius,p.detail)}})},"./src/geometries/torus.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js"),p=A.MathUtils.degToRad;d("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(v){this.geometry=new A.TorusGeometry(v.radius,v.radiusTubular*2,v.segmentsRadial,v.segmentsTubular,p(v.arc))}})},"./src/geometries/torusKnot.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js");d("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(p){this.geometry=new A.TorusKnotGeometry(p.radius,p.radiusTubular*2,p.segmentsTubular,p.segmentsRadial,p.p,p.q)}})},"./src/geometries/triangle.js":(u,m,c)=>{var d=c("./src/core/geometry.js").registerGeometry,A=c("./src/lib/three.js"),p=new A.Quaternion,v=new A.Vector3(0,0,1),g=new A.Vector2,y=new A.Vector2,E=new A.Vector2;d("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(_){var S,x,C,w,T,O,B,P,L;C=new A.Triangle,C.a.set(_.vertexA.x,_.vertexA.y,_.vertexA.z),C.b.set(_.vertexB.x,_.vertexB.y,_.vertexB.z),C.c.set(_.vertexC.x,_.vertexC.y,_.vertexC.z),x=C.getNormal(new A.Vector3),p.setFromUnitVectors(x,v),w=C.a.clone().applyQuaternion(p),T=C.b.clone().applyQuaternion(p),O=C.c.clone().applyQuaternion(p),g.set(Math.min(w.x,T.x,O.x),Math.min(w.y,T.y,O.y)),y.set(Math.max(w.x,T.x,O.x),Math.max(w.y,T.y,O.y)),E.set(0,0).subVectors(y,g),w=new A.Vector2().subVectors(w,g).divide(E),T=new A.Vector2().subVectors(T,g).divide(E),O=new A.Vector2().subVectors(O,g).divide(E),S=this.geometry=new A.BufferGeometry,B=[C.a.x,C.a.y,C.a.z,C.b.x,C.b.y,C.b.z,C.c.x,C.c.y,C.c.z],P=[x.x,x.y,x.z,x.x,x.y,x.z,x.x,x.y,x.z],L=[w.x,w.y,T.x,T.y,O.x,O.y],S.setAttribute("position",new A.Float32BufferAttribute(B,3)),S.setAttribute("normal",new A.Float32BufferAttribute(P,3)),S.setAttribute("uv",new A.Float32BufferAttribute(L,2))}})},"./src/index.js":(u,m,c)=>{if(window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=navigator.xr!==void 0,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var d=c("./src/utils/isIOSOlderThan10.js"),A=d(window.navigator.userAgent)?1/window.devicePixelRatio:1,p=c("./node_modules/webvr-polyfill/build/webvr-polyfill.js"),v={BUFFER_SCALE:A,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new p(v)}var g=c("./src/utils/index.js"),y=g.debug,E=y("A-Frame:error"),_=y("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&_("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),!window.cordova&&window.location.protocol==="file:"&&E("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),g.device.isBrowserEnvironment&&(c("./src/style/aframe.css"),c("./src/style/rStats.css"));var S=c("./src/core/scene/a-scene.js").AScene,x=c("./src/core/component.js").components,C=c("./src/core/component.js").registerComponent,w=c("./src/core/geometry.js").registerGeometry,T=c("./src/extras/primitives/primitives.js").registerPrimitive,O=c("./src/core/shader.js").registerShader,B=c("./src/core/system.js").registerSystem,P=c("./src/core/shader.js").shaders,L=c("./src/core/system.js").systems,N=window.THREE=c("./src/lib/three.js"),F=c("./src/core/readyState.js"),z=c("./package.json");c("./src/components/index.js"),c("./src/geometries/index.js"),c("./src/shaders/index.js"),c("./src/systems/index.js");var G=c("./src/core/a-node.js").ANode,H=c("./src/core/a-entity.js").AEntity;c("./src/core/a-assets.js"),c("./src/core/a-cubemap.js"),c("./src/core/a-mixin.js"),c("./src/extras/components/index.js"),c("./src/extras/primitives/index.js"),console.log("A-Frame Version: 1.6.0 (Date 2024-05-23, Commit #e6c47761)"),console.log("THREE Version (https://github.com/supermedium/three.js):",N.REVISION),console.log("WebVR Polyfill Version:",z.dependencies["webvr-polyfill"]),window.AFRAME_ASYNC||F.waitForDocumentReadyState(),u.exports=window.AFRAME={AComponent:c("./src/core/component.js").Component,AEntity:H,ANode:G,ANIME:c("./node_modules/super-animejs/lib/anime.es.js").default,AScene:S,components:x,coreComponents:Object.keys(x),geometries:c("./src/core/geometry.js").geometries,registerComponent:C,registerGeometry:w,registerPrimitive:T,registerShader:O,registerSystem:B,primitives:{getMeshMixin:c("./src/extras/primitives/getMeshMixin.js"),primitives:c("./src/extras/primitives/primitives.js").primitives},scenes:c("./src/core/scene/scenes.js"),schema:c("./src/core/schema.js"),shaders:P,systems:L,emitReady:F.emitReady,THREE:N,utils:g,version:z.version}},"./src/lib/rStatsAframe.js":u=>{window.aframeStats=function(m){var c=null,d=m,A={te:{caption:"Entities"},lt:{caption:"Load Time"}},p=[{caption:"A-Frame",values:["te","lt"]}];function v(){c("te").set(g()),window.performance.getEntriesByName&&c("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function g(){var S=d.querySelectorAll("*");return Array.prototype.slice.call(S).filter(function(x){return x.isEntity}),S.length}function y(){}function E(){}function _(S){c=S}return{update:v,start:y,end:E,attach:_,values:A,groups:p,fractions:[]}},u.exports={aframeStats:window.aframeStats}},"./src/lib/three.js":(u,m,c)=>{var d=c("./src/lib/three.mjs").default;c.g.THREE=d,c("./vendor/DeviceOrientationControls.js"),d.Cache&&(d.Cache.enabled=!0),u.exports=d},"./src/shaders/flat.js":(u,m,c)=>{var d=c("./src/core/shader.js").registerShader,A=c("./src/lib/three.js"),p=c("./src/utils/index.js");u.exports.Shader=d("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(g){this.materialData={color:new A.Color},v(g,this.materialData),this.material=new A.MeshBasicMaterial(this.materialData)},update:function(g){this.updateMaterial(g),p.material.updateMap(this,g)},updateMaterial:function(g){var y;v(g,this.materialData);for(y in this.materialData)this.material[y]=this.materialData[y]}});function v(g,y){return y.color.set(g.color),y.fog=g.fog,y.wireframe=g.wireframe,y.toneMapped=g.toneMapped,y.wireframeLinewidth=g.wireframeLinewidth,y}},"./src/shaders/index.js":(u,m,c)=>{c("./src/shaders/flat.js"),c("./src/shaders/standard.js"),c("./src/shaders/phong.js"),c("./src/shaders/sdf.js"),c("./src/shaders/msdf.js"),c("./src/shaders/shadow.js")},"./src/shaders/msdf.js":(u,m,c)=>{var d=c("./src/core/shader.js").registerShader,A=c("./src/lib/three.js"),p=["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),v=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`);u.exports.Shader=d("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:p,fragmentShader:v,init:function(){return this.uniforms=A.UniformsUtils.merge([A.UniformsLib.fog,this.initUniforms()]),this.material=new A.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}})},"./src/shaders/phong.js":(u,m,c)=>{var d=c("./src/core/shader.js").registerShader,A=c("./src/lib/three.js"),p=c("./src/utils/index.js");u.exports.Shader=d("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(g){this.materialData={color:new A.Color,specular:new A.Color,emissive:new A.Color},v(g,this.materialData),this.material=new A.MeshPhongMaterial(this.materialData);var y=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||y.object3D.environment},set:function(E){this._envMap=E}})},update:function(g){this.updateMaterial(g),p.material.updateMap(this,g),p.material.updateDistortionMap("normal",this,g),p.material.updateDistortionMap("displacement",this,g),p.material.updateDistortionMap("ambientOcclusion",this,g),p.material.updateDistortionMap("bump",this,g),p.material.updateEnvMap(this,g)},updateMaterial:function(g){var y;v(g,this.materialData);for(y in this.materialData)this.material[y]=this.materialData[y]}});function v(g,y){switch(y.color.set(g.color),y.specular.set(g.specular),y.emissive.set(g.emissive),y.emissiveIntensity=g.emissiveIntensity,y.fog=g.fog,y.transparent=g.transparent,y.wireframe=g.wireframe,y.wireframeLinewidth=g.wireframeLinewidth,y.shininess=g.shininess,y.flatShading=g.flatShading,y.wireframe=g.wireframe,y.wireframeLinewidth=g.wireframeLinewidth,y.reflectivity=g.reflectivity,y.refractionRatio=g.refractionRatio,g.combine){case"mix":y.combine=A.MixOperation;break;case"multiply":y.combine=A.MultiplyOperation;break;case"add":y.combine=A.AddOperation;break}return g.normalMap&&(y.normalScale=g.normalScale),g.ambientOcclusionMap&&(y.aoMapIntensity=g.ambientOcclusionMapIntensity),g.bumpMap&&(y.bumpScale=g.bumpMapScale),g.displacementMap&&(y.displacementScale=g.displacementScale,y.displacementBias=g.displacementBias),y}},"./src/shaders/sdf.js":(u,m,c)=>{var d=c("./src/core/shader.js").registerShader,A=c("./src/lib/three.js"),p=["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),v=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec2 uv = vUV;","  vec4 texColor = texture(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture(map, box.xy).a, width)","      + contour(texture(map, box.zw).a, width)","      + contour(texture(map, box.xw).a, width)","      + contour(texture(map, box.zy).a, width)","    )) / 3.0;","  }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color, opacity * alpha);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`);u.exports.Shader=d("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:p,fragmentShader:v,init:function(){return this.uniforms=A.UniformsUtils.merge([A.UniformsLib.fog,this.initUniforms()]),this.material=new A.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}})},"./src/shaders/shadow.js":(u,m,c)=>{var d=c("./src/core/shader.js").registerShader,A=c("./src/lib/three.js");u.exports.Shader=d("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(p){this.material=new A.ShadowMaterial},update:function(p){this.material.opacity=p.opacity,this.material.alphaToCoverage=p.alphaToCoverage,this.material.transparent=p.transparent}})},"./src/shaders/standard.js":(u,m,c)=>{var d=c("./src/core/shader.js").registerShader,A=c("./src/lib/three.js"),p=c("./src/utils/index.js");u.exports.Shader=d("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(g){this.materialData={color:new A.Color,emissive:new A.Color},v(g,this.materialData),this.material=new A.MeshStandardMaterial(this.materialData)},update:function(g){this.updateMaterial(g),p.material.updateMap(this,g),p.material.updateDistortionMap("normal",this,g),p.material.updateDistortionMap("displacement",this,g),p.material.updateDistortionMap("ambientOcclusion",this,g),p.material.updateDistortionMap("metalness",this,g),p.material.updateDistortionMap("roughness",this,g),p.material.updateEnvMap(this,g)},updateMaterial:function(g){var y,E=this.material;v(g,this.materialData);for(y in this.materialData)E[y]=this.materialData[y]}});function v(g,y){return y.color.set(g.color),y.emissive.set(g.emissive),y.emissiveIntensity=g.emissiveIntensity,y.fog=g.fog,y.metalness=g.metalness,y.roughness=g.roughness,y.wireframe=g.wireframe,y.wireframeLinewidth=g.wireframeLinewidth,g.normalMap&&(y.normalScale=g.normalScale),g.ambientOcclusionMap&&(y.aoMapIntensity=g.ambientOcclusionMapIntensity),g.displacementMap&&(y.displacementScale=g.displacementScale,y.displacementBias=g.displacementBias),y}},"./src/systems/camera.js":(u,m,c)=>{var d=c("./src/constants/index.js"),A=c("./src/core/system.js").registerSystem,p="data-aframe-default-camera";u.exports.System=A("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var g,y,E=this.sceneEl,_=this;if(E.camera&&!E.camera.el.getAttribute("camera").spectator){E.emit("cameraready",{cameraEl:E.camera.el});return}if(g=E.querySelectorAll("a-camera, :not(a-mixin)[camera]"),!g.length){this.createDefaultCamera();return}for(this.numUserCameras=g.length,y=0;y<g.length;y++)g[y].addEventListener("object3dset",function(S){S.detail.type==="camera"&&_.checkUserCamera(this)}),g[y].isNode?g[y].load():g[y].addEventListener("nodeready",function(){this.load()})},checkUserCamera:function(g){var y,E=this.el.sceneEl;if(this.numUserCamerasChecked++,!this.initialCameraFound){if(y=g.getAttribute("camera"),!y.active||y.spectator){this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera();return}this.initialCameraFound=!0,E.camera=g.getObject3D("camera"),E.emit("cameraready",{cameraEl:g})}},createDefaultCamera:function(){var g,y=this.sceneEl;g=document.createElement("a-entity"),g.setAttribute("camera",{active:!0}),g.setAttribute("position",{x:0,y:d.DEFAULT_CAMERA_HEIGHT,z:0}),g.setAttribute("wasd-controls",""),g.setAttribute("look-controls",""),g.setAttribute(d.AFRAME_INJECTED,""),g.addEventListener("object3dset",function(E){E.detail.type==="camera"&&(y.camera=E.detail.object,y.emit("cameraready",{cameraEl:g}))}),y.appendChild(g)},disableActiveCamera:function(){var g,y;g=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"),y=g[g.length-1],y.setAttribute("camera","active",!0)},setActiveCamera:function(g){var y,E,_,S,x=this.activeCameraEl,C=this.sceneEl;if(S=g.getObject3D("camera"),!(!S||g===this.activeCameraEl)){var w=C.querySelector("["+p+"]"),T=w&&w.querySelector(":not(a-mixin)[camera]");for(g!==T&&v(C),this.activeCameraEl=g,this.activeCameraEl.play(),C.camera=S,x&&x.setAttribute("camera","active",!1),E=C.querySelectorAll(":not(a-mixin)[camera]"),_=0;_<E.length;_++)y=E[_],!(!y.isEntity||g===y)&&(y.setAttribute("camera","active",!1),y.pause());C.emit("camera-set-active",{cameraEl:g})}},setSpectatorCamera:function(g){var y,E=this.spectatorCameraEl,_=this.sceneEl,S;y=g.getObject3D("camera"),!(!y||g===this.spectatorCameraEl)&&(E&&E.setAttribute("camera","spectator",!1),S=this.spectatorCameraEl=g,_.addEventListener("enter-vr",this.wrapRender),_.addEventListener("exit-vr",this.unwrapRender),S.setAttribute("camera","active",!1),S.play(),_.emit("camera-set-spectator",{cameraEl:g}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){!this.spectatorCameraEl||this.originalRender||(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(g,y){var E,_=this.sceneEl,S;E=_.renderer.xr.enabled,this.originalRender.call(_.renderer,g,y),!(!this.spectatorCameraEl||_.isMobile||!E)&&(S=this.spectatorCameraEl.components.camera.camera,_.renderer.xr.enabled=!1,this.originalRender.call(_.renderer,g,S),_.renderer.xr.enabled=E)}});function v(g){var y,E=g.camera;E&&(y=g.querySelector("["+p+"]"),y&&g.removeChild(y))}},"./src/systems/geometry.js":(u,m,c)=>{var d=c("./src/core/geometry.js").geometries,A=c("./src/core/system.js").registerSystem;u.exports.System=A("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(y){var E=this.cache,_,S;return y.skipCache?p(y):(S=this.hash(y),_=E[S],g(this.cacheCount,S),_||(_=p(y),E[S]=_,_))},unuseGeometry:function(y){var E=this.cache,_=this.cacheCount,S,x;y.skipCache||(x=this.hash(y),E[x]&&(v(_,x),!(_[x]>0)&&(S=E[x],S.dispose(),delete E[x],delete _[x])))},hash:function(y){return JSON.stringify(y)}});function p(y){var E=y.primitive,_=d[E]&&d[E].Geometry,S=new _;if(!_)throw new Error("Unknown geometry `"+E+"`");return S.init(y),S.geometry}function v(y,E){y[E]--}function g(y,E){y[E]=y[E]===void 0?1:y[E]+1}},"./src/systems/gltf-model.js":(u,m,c)=>{var d=c("./src/core/system.js").registerSystem,A=c("./src/lib/three.js");function p(v){return new Promise(function(g,y){var E=document.createElement("script");document.body.appendChild(E),E.onload=g,E.onerror=y,E.async=!0,E.src=v})}u.exports.System=d("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.6/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var v=this.data.dracoDecoderPath,g=this.data.basisTranscoderPath,y=this.data.meshoptDecoderPath;!this.dracoLoader&&v&&(this.dracoLoader=new A.DRACOLoader,this.dracoLoader.setDecoderPath(v)),!this.ktx2Loader&&g&&(this.ktx2Loader=new A.KTX2Loader,this.ktx2Loader.setTranscoderPath(g).detectSupport(this.el.renderer)),!this.meshoptDecoder&&y&&(this.meshoptDecoder=p(y).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}})},"./src/systems/index.js":(u,m,c)=>{c("./src/systems/camera.js"),c("./src/systems/geometry.js"),c("./src/systems/gltf-model.js"),c("./src/systems/light.js"),c("./src/systems/material.js"),c("./src/systems/obb-collider.js"),c("./src/systems/renderer.js"),c("./src/systems/shadow.js"),c("./src/systems/tracked-controls-webvr.js"),c("./src/systems/tracked-controls-webxr.js"),c("./src/systems/webxr.js")},"./src/systems/light.js":(u,m,c)=>{var d=c("./src/core/system.js").registerSystem,A=c("./src/constants/index.js"),p="data-aframe-default-light";u.exports.System=d("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(v){v.hasAttribute(p)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var v,g=this.sceneEl;if(this.defaultLights){v=document.querySelectorAll("["+p+"]");for(var y=0;y<v.length;y++)g.removeChild(v[y]);this.defaultLights=!1}},setupDefaultLights:function(){var v=this.sceneEl,g,y;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(g=document.createElement("a-entity"),g.setAttribute("light",{color:"#BBB",type:"ambient"}),g.setAttribute(p,""),g.setAttribute(A.AFRAME_INJECTED,""),v.appendChild(g),y=document.createElement("a-entity"),y.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),y.setAttribute("position",{x:-.5,y:1,z:1}),y.setAttribute(p,""),y.setAttribute(A.AFRAME_INJECTED,""),v.appendChild(y),this.defaultLights=!0)}})},"./src/systems/material.js":(u,m,c)=>{var d=c("./src/core/system.js").registerSystem,A=c("./src/lib/three.js"),p=c("./src/utils/index.js"),v=c("./src/utils/material.js").setTextureProperties,g=c("./src/utils/material.js").createCompatibleTexture,y=p.debug,E=y("components:texture:error"),_=y("components:texture:warn"),S=new A.ImageLoader;u.exports.System=d("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(T,O,B){this.loadTextureSource(T,function(L){var N=g(L);v(N,O),B(N)})},loadTextureSource:function(T,O){var B=this,P=this.sourceCache,L=this.hash(T);if(P[L]){P[L].then(O);return}if(T.tagName==="CANVAS"){F(new A.Source(T));return}F(new Promise(N));function N(z,G){p.srcLoader.validateSrc(T,H,j);function H(q){B.loadImage(q,z)}function j(q){B.loadVideo(q,z)}}function F(z){P[L]=Promise.resolve(z),P[L].then(O)}},loadCubeMapTexture:function(T,O){var B=this,P=0,L=new A.CubeTexture;L.colorSpace=A.SRGBColorSpace;function N(z){B.loadTextureSource(T[z],function(G){L.images[z]=G,P++,P===6&&(L.needsUpdate=!0,O(L))})}if(T.length!==6){_("Cube map texture requires exactly 6 sources, got only %s sources",T.length);return}for(var F=0;F<T.length;F++)N(F)},loadImage:function(T,O){if(typeof T!="string"){O(new A.Source(T));return}O(x(T))},loadVideo:function(T,O){var B;typeof T!="string"&&(B=T,w(B)),B=B||C(T),O(new A.Source(B))},hash:function(T){return T.tagName&&(T.id||T.src)||T},registerMaterial:function(T){this.materials[T.uuid]=T},unregisterMaterial:function(T){delete this.materials[T.uuid]}});function x(T){return new Promise(O);function O(B,P){S.load(T,L,function(){},function(N){E("`$s` could not be fetched (Error code: %s; Response: %s)",N.status,N.statusText)});function L(N){B(new A.Source(N))}}}function C(T){var O=document.createElement("video");return O.setAttribute("playsinline",""),O.setAttribute("webkit-playsinline",""),O.autoplay=!0,O.loop=!0,O.crossOrigin="anonymous",O.addEventListener("error",function(){_("`%s` is not a valid video",T)},!0),O.src=T,O}function w(T){return T.autoplay=T.hasAttribute("autoplay")&&T.getAttribute("autoplay")!=="false",T.controls=T.hasAttribute("controls")&&T.getAttribute("controls")!=="false",T.getAttribute("loop")==="false"&&T.removeAttribute("loop"),T.getAttribute("preload")==="false"&&(T.preload="none"),T.crossOrigin=T.crossOrigin||"anonymous",T.setAttribute("playsinline",""),T.setAttribute("webkit-playsinline",""),T}},"./src/systems/obb-collider.js":(u,m,c)=>{var d=c("./src/core/system.js").registerSystem;d("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(A){this.colliderEls.push(A),this.data.showColliders?A.components["obb-collider"].showCollider():A.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(A){var p=this.colliderEls,v=p.indexOf(A);A.components["obb-collider"].hideCollider(),v>-1&&p.splice(v,1),p.length===0&&(this.tick=void 0)},registerCollision:function(A,p){var v=this.collisions,g=!1,y=A.obb,E=p.obb,_=A.renderColliderMesh,S=p.renderColliderMesh;_&&_.material.color.set(16711680),S&&S.material.color.set(16711680);for(var x=0;x<v.length;x++)if(v[x].componentA.obb===y&&v[x].componentB.obb===E||v[x].componentA.obb===E&&v[x].componentB.obb===y){g=!0,v[x].detected=!0;break}g||(v.push({componentA:A,componentB:p,detected:!0}),A.el.emit("obbcollisionstarted",{trackedObject3D:A.trackedObject3D,withEl:p.el}),p.el.emit("obbcollisionstarted",{trackedObject3D:p.trackedObject3D,withEl:A.el}))},resetCollisions:function(){for(var A=this.collisions,p=0;p<A.length;p++)A[p].detected=!1},clearCollisions:function(){for(var A=this.collisions,p=[],v,g,y,E,_=0;_<A.length;_++)A[_].detected?p.push(A[_]):(v=A[_].componentA,g=A[_].componentB,y=v.renderColliderMesh,E=g.renderColliderMesh,y&&y.material.color.set(65280),v.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:g.el}),E&&E.material.color.set(65280),g.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:v.el}));this.collisions=p},detectCollisions:function(){var A,p,v,g,y=this.colliderEls;if(!(y.length<2)){this.resetCollisions();for(var E=0;E<y.length;E++)if(v=y[E].components["obb-collider"],A=y[E].components["obb-collider"].obb,!(A.halfSize.x===0||A.halfSize.y===0||A.halfSize.z===0))for(var _=E+1;_<y.length;_++)g=y[_].components["obb-collider"],p=g.obb,!(p.halfSize.x===0||p.halfSize.y===0||p.halfSize.z===0)&&A.intersectsOBB(p)&&this.registerCollision(v,g);this.clearCollisions()}}})},"./src/systems/renderer.js":(u,m,c)=>{var d=c("./src/core/system.js").registerSystem,A=c("./src/utils/index.js"),p=c("./src/lib/three.js"),v=A.debug,g=v("components:renderer:warn");u.exports.System=d("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:A.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},physicallyCorrectLights:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var S=this.data,x=this.el,C=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),w=x.renderer;S.physicallyCorrectLights||(w.useLegacyLights=!S.physicallyCorrectLights),w.toneMapping=p[C+"ToneMapping"],p.Texture.DEFAULT_ANISOTROPY=S.anisotropy,p.ColorManagement.enabled=S.colorManagement,w.outputColorSpace=S.colorManagement?p.SRGBColorSpace:p.LinearSRGBColorSpace,x.hasAttribute("antialias")&&g('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),x.hasAttribute("logarithmicDepthBuffer")&&g('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),w.sortObjects=!0,w.setOpaqueSort(y)},update:function(){var S=this.data,x=this.el,C=x.renderer,w=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);C.toneMapping=p[w+"ToneMapping"],C.toneMappingExposure=S.exposure,C.xr.setFoveation(S.foveationLevel),S.sortObjects&&g('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),S.sortTransparentObjects?C.setTransparentSort(_):C.setTransparentSort(E)},applyColorCorrection:function(S){!this.data.colorManagement||!S||S.isTexture&&S.colorSpace!==p.SRGBColorSpace&&(S.colorSpace=p.SRGBColorSpace,S.needsUpdate=!0)},setWebXRFrameRate:function(S){var x=this.data,C=S.supportedFrameRates;if(C&&S.updateTargetFrameRate){var w;C.includes(90)?w=x.highRefreshRate?90:72:w=x.highRefreshRate?72:60,S.updateTargetFrameRate(w).catch(function(T){console.warn("failed to set target frame rate of "+w+". Error info: "+T)})}}});function y(S,x){return S.groupOrder!==x.groupOrder?S.groupOrder-x.groupOrder:S.renderOrder!==x.renderOrder?S.renderOrder-x.renderOrder:S.z-x.z}function E(S,x){return S.groupOrder!==x.groupOrder?S.groupOrder-x.groupOrder:S.renderOrder-x.renderOrder}function _(S,x){return S.groupOrder!==x.groupOrder?S.groupOrder-x.groupOrder:S.renderOrder!==x.renderOrder?S.renderOrder-x.renderOrder:x.z-S.z}u.exports.sortFrontToBack=y,u.exports.sortRenderOrderOnly=E,u.exports.sortBackToFront=_},"./src/systems/shadow.js":(u,m,c)=>{var d=c("./src/core/system.js").registerSystem,A=c("./src/lib/three.js"),p={basic:A.BasicShadowMap,pcf:A.PCFShadowMap,pcfsoft:A.PCFSoftShadowMap};u.exports.System=d("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var g=this.sceneEl,y=this.data;this.shadowMapEnabled=!1,g.renderer.shadowMap.type=p[y.type],g.renderer.shadowMap.autoUpdate=y.autoUpdate},update:function(g){g.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(g){var y=this.sceneEl,E=this.sceneEl.renderer;this.shadowMapEnabled=g;var _=this.data.enabled&&this.shadowMapEnabled;E&&_!==E.shadowMap.enabled&&(E.shadowMap.enabled=_,v(y))}});function v(g){g.hasLoaded&&g.object3D.traverse(function(y){if(y.material)for(var E=Array.isArray(y.material)?y.material:[y.material],_=0;_<E.length;_++)E[_].needsUpdate=!0})}},"./src/systems/tracked-controls-webvr.js":(u,m,c)=>{var d=c("./src/core/system.js").registerSystem,A=c("./src/utils/index.js"),p=A.device.isWebXRAvailable;u.exports.System=d("tracked-controls-webvr",{init:function(){var v=this;this.controllers=[],this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,this.updateControllerList(),this.throttledUpdateControllerList=A.throttle(this.updateControllerList,500,this),!p&&navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(g){g.length&&(v.vrDisplay=g[0])})})},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var v=this.controllers,g,y,E,_;if(y=navigator.getGamepads&&navigator.getGamepads(),!!y){for(_=v.length,v.length=0,E=0;E<y.length;++E)g=y[E],g&&g.pose&&v.push(g);v.length!==_&&this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/tracked-controls-webxr.js":(u,m,c)=>{var d=c("./src/core/system.js").registerSystem,A=c("./src/utils/index.js");u.exports.System=d("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=A.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var p=this,v=this.el.xrSession;if(!v){this.referenceSpace=void 0,this.controllers=[],this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1));return}var g=p.el.sceneEl.systems.webxr.sessionReferenceSpaceType;v.requestReferenceSpace(g).then(function(y){p.referenceSpace=y}).catch(function(y){throw p.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(g,'tracked-controls-webxr uses reference space "'+g+'".'),y})},updateControllerList:function(){var p=this.el.xrSession,v=this.oldControllers,g;if(!p){if(this.oldControllersLength===0)return;this.oldControllersLength=0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1);return}if(p.inputSources){if(this.controllers=p.inputSources,this.oldControllersLength===this.controllers.length){var y=!0;for(g=0;g<this.controllers.length;++g)if(!(this.controllers[g]===v[g]&&this.controllers[g].gamepad===v[g].gamepad)){y=!1;break}if(y)return}for(v.length=0,g=0;g<this.controllers.length;g++)v.push(this.controllers[g]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/webxr.js":(u,m,c)=>{var d=c("./src/core/system.js").registerSystem,A=c("./src/utils/index.js"),p=A.debug("systems:webxr:warn");u.exports.System=d("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var v=this.data;this.sessionConfiguration={requiredFeatures:v.requiredFeatures,optionalFeatures:v.optionalFeatures},this.sessionReferenceSpaceType=v.referenceSpaceType,v.overlayElement&&(v.overlayElement.classList.remove("a-dom-overlay"),v.optionalFeatures.includes("dom-overlay")||(v.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",v)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:v.overlayElement},v.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(v){return!!(v==="viewer"||v==="local"||this.sessionConfiguration.requiredFeatures.includes(v)||this.sessionConfiguration.optionalFeatures.includes(v))},warnIfFeatureNotRequested:function(v,g){if(!this.wasFeatureRequested(v)){var y='Please add the feature "'+v+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`;p((g?g+" ":"")+y)}}})},"./src/utils/coordinates.js":(u,m,c)=>{var d=c("./src/utils/debug.js"),A=d("utils:coordinates:warn"),p=["x","y","z","w"],v=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;u.exports.regex=v;var g=/\s+/g;function y(C,w,T){var O,B,P,L,N=T&&typeof T=="object"?T:{},F,z,G,H;if(C&&C instanceof Object)return F=C.x===void 0?w&&w.x:C.x,z=C.y===void 0?w&&w.y:C.y,G=C.z===void 0?w&&w.z:C.z,H=C.w===void 0?w&&w.w:C.w,F!=null&&(N.x=x(F)),z!=null&&(N.y=x(z)),G!=null&&(N.z=x(G)),H!=null&&(N.w=x(H)),N;if(C==null)return typeof w=="object"?Object.assign(N,w):w;for(O=C.trim().split(g),L=0;L<p.length;L++)if(P=p[L],O[L])N[P]=parseFloat(O[L],10);else{if(B=w&&w[P],B===void 0)continue;N[P]=x(B)}return N}u.exports.parse=y;function E(C){var w;return typeof C!="object"?C:(w=C.x+" "+C.y,C.z!=null&&(w+=" "+C.z),C.w!=null&&(w+=" "+C.w),w)}u.exports.stringify=E;function _(C,w){return typeof C!="object"||typeof w!="object"?C===w:C.x===w.x&&C.y===w.y&&C.z===w.z&&C.w===w.w}u.exports.equals=_;function S(C){return v.test(C)}u.exports.isCoordinates=S,u.exports.isCoordinate=function(C){return A("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),S(C)};function x(C){return C!=null&&C.constructor===String?parseFloat(C,10):C}u.exports.toVector3=function(C){return new THREE.Vector3(C.x,C.y,C.z)}},"./src/utils/debug.js":(u,m,c)=>{var d=c("./node_modules/debug/src/browser.js"),A=c("./src/utils/device.js").isBrowserEnvironment,p={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};d.formatArgs=v;function v(S){if(S[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+S[0]+(this.useColors?"%c ":" "),!!this.useColors){this.color=y(this.namespace);var x="color: "+this.color;S.splice(1,0,x,"color: inherit");var C=0,w=0;S[0].replace(/%[a-zA-Z%]/g,function(T){T!=="%%"&&(C++,T==="%c"&&(w=C))}),S.splice(w,0,x)}}function g(S){var x=S.split(":");return x[x.length-1]}function y(S){var x=g(S),C=p.colors&&p.colors[x];return C||null}function E(){try{return window.localStorage}catch{}}var _=E();_&&(parseInt(_.logs,10)||_.logs==="true")?d.enable("*"):d.enable("*:error,*:info,*:warn"),A&&(window.logs=d),u.exports=d},"./src/utils/device.js":(u,m,c)=>{var d=c("./node_modules/debug/src/browser.js")("device:error"),A,p=!1,v=!1,g=u.exports.isWebXRAvailable=navigator.xr!==void 0;if(window.addEventListener("vrdisplayactivate",function(G){var H;g||(H=document.createElement("canvas"),A=G.display,H.getContext("webgl",{}),A.requestPresent([{source:H}]).then(function(){},function(){}))}),g){var y=function(){var G=document.querySelector("a-scene");if(!G){window.addEventListener("DOMContentLoaded",y);return}G.hasLoaded?G.components["xr-mode-ui"].updateEnterInterfaces():G.addEventListener("loaded",y)},E=function(G){d("WebXR session support error: "+G.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(G){p=G,y()}).catch(E),navigator.xr.isSessionSupported("immersive-ar").then(function(G){v=G,y()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){p=!0,y()}).catch(E),navigator.xr.supportsSession("immersive-ar").then(function(){v=!0,y()}).catch(function(){})):d("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then(function(G){var H=document.querySelector("a-scene");A=G.length&&G[0],H&&H.emit("displayconnected",{vrDisplay:A})});function _(){return A}u.exports.getVRDisplay=_;function S(){return p||v||!!_()}u.exports.checkHeadsetConnected=S;function x(){return v}u.exports.checkARSupport=x;function C(){return p}u.exports.checkVRSupport=C;var w=function(){var G=!1;return function(H){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(H)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(H.substr(0,4)))&&(G=!0),(B()||T()||z())&&(G=!0),F()&&(G=!1)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return G}}();u.exports.isMobile=w;function T(G){var H=G||window.navigator.userAgent,j=/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(H);return j||O()}u.exports.isTablet=T;function O(G,H,j){var q=G||window.navigator.userAgent,Q=H||window.navigator.platform,k=j||window.navigator.maxTouchPoints||0;return(Q==="iPad"||Q==="MacIntel")&&k>0&&/Macintosh|Intel|iPad|ipad/i.test(q)&&!window.MSStream}u.exports.isIpad=O;function B(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}u.exports.isIOS=B;function P(){return!w()&&!F()&&window.orientation!==void 0}u.exports.isMobileDeviceRequestingDesktopSite=P;function L(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}u.exports.isOculusBrowser=L;function N(){return/(Mobile VR)/i.test(window.navigator.userAgent)}u.exports.isFirefoxReality=N;function F(){return L()||N()}u.exports.isMobileVR=F;function z(){return/R7 Build/.test(window.navigator.userAgent)}u.exports.isR7=z,u.exports.isLandscape=function(){var G=window.orientation;return z()&&(G+=90),G===90||G===-90},u.exports.isBrowserEnvironment=typeof process>"u"||process.browser===!0,u.exports.isNodeEnvironment=!u.exports.isBrowserEnvironment},"./src/utils/entity.js":(u,m,c)=>{var d=c("./src/utils/split.js").split;function A(p,v){v=v||".";var g=d(p,v);return g.length===1?g[0]:g}u.exports.getComponentPropertyPath=A,u.exports.getComponentProperty=function(p,v,g){var y;return g=g||".",v.indexOf(g)!==-1?(y=A(v,g),y.constructor===String?p.getAttribute(y):p.getAttribute(y[0])[y[1]]):p.getAttribute(v)},u.exports.setComponentProperty=function(p,v,g,y){var E;if(y=y||".",v.indexOf(y)!==-1){E=A(v,y),E.constructor===String?p.setAttribute(E,g):p.setAttribute(E[0],E[1],g);return}p.setAttribute(v,g)}},"./src/utils/forceCanvasResizeSafariMobile.js":u=>{u.exports=function(c){var d=c.style.width,A=c.style.height;c.style.width=parseInt(d,10)+1+"px",c.style.height=parseInt(A,10)+1+"px",setTimeout(function(){c.style.width=d,c.style.height=A},200)}},"./src/utils/index.js":(u,m,c)=>{var d=c("./src/utils/debug.js"),A=c("./node_modules/deep-assign/index.js"),p=c("./src/utils/device.js"),v=c("./src/utils/object-pool.js"),g=d("utils:warn");u.exports.bind=function(E){return E.bind.apply(E,Array.prototype.slice.call(arguments,1))},u.exports.coordinates=c("./src/utils/coordinates.js"),u.exports.debug=d,u.exports.device=p,u.exports.entity=c("./src/utils/entity.js"),u.exports.forceCanvasResizeSafariMobile=c("./src/utils/forceCanvasResizeSafariMobile.js"),u.exports.material=c("./src/utils/material.js"),u.exports.objectPool=v,u.exports.split=c("./src/utils/split.js").split,u.exports.styleParser=c("./src/utils/styleParser.js"),u.exports.trackedControls=c("./src/utils/tracked-controls.js"),u.exports.checkHeadsetConnected=function(){return g("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),p.checkHeadsetConnected(arguments)},u.exports.isGearVR=u.exports.device.isGearVR=function(){g("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},u.exports.isIOS=function(){return g("`utils.isIOS` has moved to `utils.device.isIOS`"),p.isIOS(arguments)},u.exports.isOculusGo=u.exports.device.isOculusGo=function(){g("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},u.exports.isMobile=function(){return g("`utils.isMobile has moved to `utils.device.isMobile`"),p.isMobile(arguments)},u.exports.throttle=function(E,_,S){var x;return S&&(E=E.bind(S)),function(){var C=Date.now(),w=typeof x>"u"?_:C-x;(typeof x>"u"||w>=_)&&(x=C,E.apply(null,arguments))}},u.exports.throttleLeadingAndTrailing=function(E,_,S){var x,C;S&&(E=E.bind(S));var w,T=function(){x=Date.now(),E.apply(this,w),C=void 0};return function(){var O=Date.now(),B=typeof x>"u"?_:O-x;B>=_?(clearTimeout(C),C=void 0,x=O,E.apply(null,arguments)):(C=C||setTimeout(T,_-B),w=arguments)}},u.exports.throttleTick=function(E,_,S){var x;return S&&(E=E.bind(S)),function(C,w){var T=typeof x>"u"?w:C-x;(typeof x>"u"||T>=_)&&(x=C,E(C,T))}},u.exports.debounce=function(E,_,S){var x;return function(){var C=this,w=arguments,T=function(){x=null,S||E.apply(C,w)},O=S&&!x;clearTimeout(x),x=setTimeout(T,_),O&&E.apply(C,w)}},u.exports.extend=Object.assign,u.exports.extendDeep=A,u.exports.clone=function(E){return JSON.parse(JSON.stringify(E))};var y=function(){var E=v.createPool(function(){return[]});return function(_,S){var x,C,w,T,O,B;if(_===void 0||S===void 0||_===null||S===null||!(_&&S&&_.constructor===Object&&S.constructor===Object||_.constructor===Array&&S.constructor===Array))return _===S;C=E.use(),w=E.use(),C.length=0,w.length=0;for(x in _)C.push(x);for(x in S)w.push(x);if(C.length!==w.length)return E.recycle(C),E.recycle(w),!1;for(T=0;T<C.length;++T)if(O=_[C[T]],B=S[C[T]],typeof O=="object"||typeof B=="object"||Array.isArray(O)&&Array.isArray(B)){if(O===B)continue;if(!y(O,B))return E.recycle(C),E.recycle(w),!1}else if(O!==B)return E.recycle(C),E.recycle(w),!1;return E.recycle(C),E.recycle(w),!0}}();u.exports.deepEqual=y,u.exports.diff=function(){var E=[];return function(_,S,x){var C,w,T,O,B,P,L;O=x||{},E.length=0;for(B in _)E.push(B);if(!S)return O;for(T in S)E.indexOf(T)===-1&&E.push(T);for(P=0;P<E.length;P++)B=E[P],C=_[B],w=S[B],L=C&&w&&C.constructor===Object&&w.constructor===Object,(L&&!y(C,w)||!L&&C!==w)&&(O[B]=w);return O}}(),u.exports.shouldCaptureKeyEvent=function(E){return E.metaKey?!1:document.activeElement===document.body},u.exports.splitString=function(E,_){typeof _>"u"&&(_=" ");var S=new RegExp(_,"g");return E=(E||"").replace(S,_),E.split(_)},u.exports.getElData=function(E,_){_=_||{};var S={};Object.keys(_).forEach(x);function x(C){E.hasAttribute(C)&&(S[C]=E.getAttribute(C))}return S},u.exports.getUrlParameter=function(E){E=E.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var _=new RegExp("[\\?&]"+E+"=([^&#]*)"),S=_.exec(location.search);return S===null?"":decodeURIComponent(S[1].replace(/\+/g," "))},u.exports.isIframed=function(){return window.top!==window.self},u.exports.findAllScenes=function(E){for(var _=[],S=E.getElementsByTagName("*"),x=0,C=S.length;x<C;x++)S[x].isScene&&_.push(S[x]);return _},u.exports.srcLoader=c("./src/utils/src-loader.js")},"./src/utils/ios-orientationchange-blank-bug.js":()=>{window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)})},"./src/utils/isIOSOlderThan10.js":u=>{u.exports=function(c){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(c)}},"./src/utils/material.js":(u,m,c)=>{var d=c("./src/lib/three.js"),A=c("./src/utils/src-loader.js"),p=c("./src/utils/debug.js"),v=p("utils:material:warn"),g=new Set(["emissiveMap","envMap","map","specularMap"]);function y(C,w){var T=w.offset||{x:0,y:0},O=w.repeat||{x:1,y:1},B=w.npot||!1,P=w.anisotropy||d.Texture.DEFAULT_ANISOTROPY,L=C.wrapS,N=C.wrapT,F=C.magFilter,z=C.minFilter;B&&(L=d.ClampToEdgeWrapping,N=d.ClampToEdgeWrapping,F=d.LinearFilter,z=d.LinearFilter),(O.x!==1||O.y!==1)&&(L=d.RepeatWrapping,N=d.RepeatWrapping),C.offset.set(T.x,T.y),C.repeat.set(O.x,O.y),(C.wrapS!==L||C.wrapT!==N||C.magFilter!==F||C.minFilter!==z||C.anisotropy!==P)&&(C.wrapS=L,C.wrapT=N,C.magFilter=F,C.minFilter=z,C.anisotropy=P,C.needsUpdate=!0)}u.exports.setTextureProperties=y,u.exports.updateMapMaterialFromData=function(C,w,T,O){var B=T.el,P=T.material,L=B.sceneEl.systems.renderer,N=O[w];if(T.materialSrcs||(T.materialSrcs={}),!N){delete T.materialSrcs[C],z(null);return}if(N===T.materialSrcs[C]&&P[C]){y(P[C],O);return}T.materialSrcs[C]=N,N instanceof d.Texture?z(N):B.sceneEl.systems.material.loadTextureSource(N,F);function F(G){if(T.materialSrcs[C]===N){var H=P[C];H&&(G===null||!S(H,G))&&(H=null),!H&&G&&(H=x(G)),H&&(H.source!==G&&(H.source=G,H.needsUpdate=!0),g.has(C)&&L.applyColorCorrection(H),y(H,O)),z(H)}}function z(G){P[C]!==G&&(P[C]&&P[C].dispose(),P[C]=G,P.needsUpdate=!0,_(B,G))}},u.exports.updateMap=function(C,w){return u.exports.updateMapMaterialFromData("map","src",C,w)},u.exports.updateDistortionMap=function(C,w,T){var O=C;C==="ambientOcclusion"&&(O="ao");var B={};return B.src=T[C+"Map"],B.offset=T[C+"TextureOffset"],B.repeat=T[C+"TextureRepeat"],B.wrap=T[C+"TextureWrap"],u.exports.updateMapMaterialFromData(O+"Map","src",w,B)};var E={};u.exports.updateEnvMap=function(C,w){var T=C.material,O=C.el,B="envMap",P=w.envMap,L=w.sphericalEnvMap,N=w.refract;if(L&&(P=L,v("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),C.materialSrcs||(C.materialSrcs={}),!P){delete C.materialSrcs[B],T.envMap=null,T.needsUpdate=!0;return}if(C.materialSrcs[B]=P,E[P]){E[P].then(F);return}E[P]=new Promise(function(z){A.validateEnvMapSrc(P,function(H){O.sceneEl.systems.material.loadCubeMapTexture(H,function(j){j.mapping=N?d.CubeRefractionMapping:d.CubeReflectionMapping,F(j),z(j)})},function(H){O.sceneEl.systems.material.loadTexture(H,{src:H},function(j){j.mapping=N?d.EquirectangularRefractionMapping:d.EquirectangularReflectionMapping,F(j),z(j)})})});function F(z){C.materialSrcs[B]===P&&(T.envMap=z,T.needsUpdate=!0,_(O,z))}};function _(C,w){if(!w||(C.emit("materialtextureloaded",{src:w.image,texture:w}),!w.image||w.image.tagName!=="VIDEO"))return;w.image.addEventListener("loadeddata",T),w.image.addEventListener("ended",O);function T(){C.emit("materialvideoloadeddata",{src:w.image,texture:w})}function O(){C.emit("materialvideoended",{src:w.image,texture:w})}w.addEventListener("dispose",function(){w.image.removeEventListener("loadeddata",T),w.image.removeEventListener("ended",O)})}u.exports.handleTextureEvents=_;function S(C,w){return w.data instanceof HTMLCanvasElement?C.isCanvasTexture:w.data instanceof HTMLVideoElement?C.isVideoTexture&&C.source===w:C.isTexture&&!C.isCanvasTexture&&!C.isVideoTexture}u.exports.isCompatibleTexture=S;function x(C){var w;return C.data instanceof HTMLCanvasElement?w=new d.CanvasTexture:C.data instanceof HTMLVideoElement?w=new d.VideoTexture(C.data):w=new d.Texture,w.source=C,w.needsUpdate=!0,w}u.exports.createCompatibleTexture=x},"./src/utils/math.js":u=>{function m(d,A,p){var v=A.dot(d);return(v-A.dot(p))/A.length()}function c(d,A,p,v){var g=m(d,A,p);return v.copy(A),v.multiplyScalar(g),v.add(p),v}u.exports.distanceOfPointFromPlane=m,u.exports.nearestPointInPlane=c},"./src/utils/object-pool.js":u=>{var m=Object.freeze(Object.create(null));function c(){return{}}u.exports.createPool=function(v){var g=[],y=null;v=v||c;function E(){var C;return(y===null||y===g.length)&&S(g.length||5),C=g[y],g[y++]=m,d(C),C}function _(C){if(C instanceof Object){if(y===null||y===-1){g[g.length]=C;return}g[--y]=C}}function S(C){var w,T;if(C=C===void 0?g.length:C,C>0&&y==null&&(y=0),C>0)for(w=g.length,g.length+=Number(C),T=w;T<g.length;T++)g[T]=v();return g.length}function x(){return g.length}return{grow:S,pool:g,recycle:_,size:x,use:E}};function d(p){var v;if(!(!p||p.constructor!==Object))for(v in p)p[v]=void 0}u.exports.clearObject=d;function A(p,v){var g;if(!(!p||p.constructor!==Object))for(g in p)g in v||delete p[g]}u.exports.removeUnusedKeys=A},"./src/utils/split.js":u=>{u.exports.split=function(){var m={};return function(c,d){return d in m||(m[d]={}),c in m[d]||(m[d][c]=c.split(d)),m[d][c]}}()},"./src/utils/src-loader.js":(u,m,c)=>{var d=c("./src/utils/debug.js"),A=d("utils:src-loader:warn");function p(x,C,w){E(x,function(O){if(O){C(x);return}w(x)})}function v(x,C,w){var T,O="",B,P,L=[];if(typeof x=="string"){let F=function(z){L.push(z),L.length===6&&C(L)};for(B=0;B<5;B++)O+="(url\\((?:[^\\)]+)\\),\\s*)";if(O+="(url\\((?:[^\\)]+)\\)\\s*)",P=x.match(new RegExp(O)),P){for(B=1;B<7;B++)p(y(P[B]),F);return}if(!x.startsWith("#")){var N=y(x);p(N||x,w);return}}if(x.tagName?T=x:T=S(x),!!T){if(T.tagName==="A-CUBEMAP"&&T.srcs)return C(T.srcs);if(T.tagName==="IMG")return w(T);A('Selector "%s" does not point to <a-cubemap> or <img>',x)}}function g(x,C){return v(x,C,function(){A("Expected cubemap but got image")})}function y(x){var C=x.match(/url\((.+)\)/);if(C)return C[1]}function E(x,C){var w;if(x.tagName){C(x.tagName==="IMG");return}w=new XMLHttpRequest,w.open("HEAD",x),w.addEventListener("load",function(T){var O;w.status>=200&&w.status<300?(O=w.getResponseHeader("Content-Type"),O==null?_(x,C):O.startsWith("image")?C(!0):C(!1)):_(x,C),w.abort()}),w.send()}function _(x,C){var w=new Image;w.addEventListener("load",T);function T(){C(!0)}w.addEventListener("error",O);function O(){C(!1)}w.src=x}function S(x){try{var C=document.querySelector(x);return C||A('No element was found matching the selector: "%s"',x),C}catch{A('"%s" is not a valid selector',x);return}}u.exports={parseUrl:y,validateSrc:p,validateCubemapSrc:g,validateEnvMapSrc:v}},"./src/utils/styleParser.js":u=>{var m=/-([a-z])/g;u.exports.parse=function(g,y){var E;return typeof g!="string"||(E=A(g,y),E[""])?g:E},u.exports.stringify=function(g){return typeof g=="string"?g:p(g)};function c(g){return g.replace(m,v)}u.exports.toCamelCase=c;var d=function(){var g=[],y=/url\([^)]+$/;return function(_){var S="",x,C=0,w=";";for(g.length=0;C<_.length;){if(x=_.indexOf(w,C),x===-1&&(x=_.length),S+=_.substring(C,x),y.test(S)){S+=";",C=x+1;continue}g.push(S.trim()),S="",C=x+1}return g}}();function A(g,y){var E,_,S,x,C,w;for(y=y||{},E=d(g),_=0;_<E.length;_++)S=E[_],S&&(x=S.indexOf(":"),C=S.substr(0,x).trim(),w=S.substr(x+1).trim(),y[c(C)]=w);return y}function p(g){var y,E=0,_=0,S="";for(y in g)E++;for(y in g)S+=y+": "+g[y],_<E-1&&(S+="; "),_++;return S}function v(g){return g[1].toUpperCase()}},"./src/utils/tracked-controls.js":(u,m,c)=>{var d=c("./src/constants/index.js").DEFAULT_HANDEDNESS,A=["x","y","z","w"],p=2;u.exports.checkControllerPresentAndSetup=function(_,S,x){var C=_.el,w,T=C.sceneEl.hasWebXR,O=T?g:v,B;if(w=O(_,S,x),B=!!w,_.controllerPresent&&!_.controllerEventsActive&&!T&&_.addEventListeners(),B===_.controllerPresent)return B;_.controllerPresent=B,B?(_.addEventListeners(),_.injectTrackedControls(w),C.emit("controllerconnected",{name:_.name,component:_})):(_.removeEventListeners(),C.emit("controllerdisconnected",{name:_.name,component:_}))};function v(_,S,x){var C,w=_.el.sceneEl,T,O=x.index||0;return!S||(T=w&&w.systems["tracked-controls-webvr"],!T)||(C=T.controllers,!C.length)?!1:!!y(C,null,S,x.hand,O)}function g(_,S,x){var C,w=_.el.sceneEl,T=w&&w.systems["tracked-controls-webxr"];return!T||(C=T.controllers,!C||!C.length)?!1:E(C,S,x.hand,x.index,x.iterateControllerProfiles,x.handTracking)}u.exports.isControllerPresentWebVR=v,u.exports.isControllerPresentWebXR=g;function y(_,S,x,C,w){var T,O,B=0,P=w>=0?w:0;for(O=0;O<_.length;O++)if(T=_[O],!(x&&!T.id.startsWith(x))&&!(!x&&T.id!==S)&&!(C&&T.hand&&C!==T.hand)){if(C&&!T.hand)P=p*w+(C===d?0:1);else return T;if(B===P)return T;++B}}function E(_,S,x,C,w,T){var O,B,P,L=!1,N,F;for(O=0;O<_.length;O++){if(P=_[O],F=P.profiles,T)L=P.hand;else if(w)for(B=0;B<F.length&&(L=F[B].startsWith(S),!L);B++);else L=F.length>0&&F[0].startsWith(S);if(L){if(N=P.handedness==="right"||P.handedness==="left",N){if(P.handedness===x)return _[O]}else if(O===C)return _[O]}}}u.exports.findMatchingControllerWebVR=y,u.exports.findMatchingControllerWebXR=E,u.exports.emitIfAxesChanged=function(_,S,x){var C,w,T,O,B;for(w in S){for(C=S[w],T=!1,B=0;B<C.length;B++)x.detail.changed[C[B]]&&(T=!0);if(T){for(O={},B=0;B<C.length;B++)O[A[B]]=x.detail.axis[C[B]];_.el.emit(w+"moved",O)}}},u.exports.onButtonEvent=function(_,S,x,C){var w=C?x.mapping[C]:x.mapping,T=w.buttons[_];x.el.emit(T+S),x.updateModel&&x.updateModel(T,S)}},"./vendor/DeviceOrientationControls.js":()=>{THREE.DeviceOrientationControls=function(u){var m=this;this.object=u,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var c=function(p){m.deviceOrientation=p},d=function(){m.screenOrientation=window.orientation||0},A=function(){var p=new THREE.Vector3(0,0,1),v=new THREE.Euler,g=new THREE.Quaternion,y=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(E,_,S,x,C){v.set(S,_,-x,"YXZ"),E.setFromEuler(v),E.multiply(y),E.multiply(g.setFromAxisAngle(p,-C))}}();this.connect=function(){d(),window.addEventListener("orientationchange",d,!1),window.addEventListener("deviceorientation",c,!1),m.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",d,!1),window.removeEventListener("deviceorientation",c,!1),m.enabled=!1},this.update=function(){if(m.enabled!==!1){var p=m.deviceOrientation;if(p){var v=p.alpha?THREE.MathUtils.degToRad(p.alpha)+m.alphaOffset:0,g=p.beta?THREE.MathUtils.degToRad(p.beta):0,y=p.gamma?THREE.MathUtils.degToRad(p.gamma):0,E=m.screenOrientation?THREE.MathUtils.degToRad(m.screenOrientation):0;A(m.object.quaternion,v,g,y,E)}}},this.dispose=function(){m.disconnect()},this.connect()}},"./vendor/rStats.extras.js":u=>{window.glStats=function(){var m=null,c=0,d=0,A=0,p=0,v=0,g=0,y=0;function E(B,P){return function(){P.apply(this,arguments),B.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=E(WebGLRenderingContext.prototype.drawArrays,function(){c++,arguments[0]==this.POINTS?g+=arguments[2]:v+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=E(WebGLRenderingContext.prototype.drawElements,function(){d++,p+=arguments[1]/3,v+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=E(WebGLRenderingContext.prototype.useProgram,function(){A++}),WebGLRenderingContext.prototype.bindTexture=E(WebGLRenderingContext.prototype.bindTexture,function(){y++});var _={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},S=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],x=[{base:"allcalls",steps:["drawelements","drawarrays"]}];function C(){m("allcalls").set(c+d),m("drawElements").set(d),m("drawArrays").set(c),m("bindTexture").set(y),m("useProgram").set(A),m("glfaces").set(p),m("glvertices").set(v),m("glpoints").set(g)}function w(){c=0,d=0,A=0,p=0,v=0,g=0,y=0}function T(){}function O(B){m=B}return{update:C,start:w,end:T,attach:O,values:_,groups:S,fractions:x}},window.threeStats=function(m){var c=null,d={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},A=[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],p=[];function v(){c("renderer.info.memory.geometries").set(m.info.memory.geometries),c("renderer.info.programs").set(m.info.programs.length),c("renderer.info.memory.textures").set(m.info.memory.textures),c("renderer.info.render.calls").set(m.info.render.calls),c("renderer.info.render.triangles").set(m.info.render.triangles),c("renderer.info.render.points").set(m.info.render.points)}function g(){}function y(){}function E(_){c=_}return{update:v,start:g,end:y,attach:E,values:d,groups:A,fractions:p}},window.BrowserStats=function(){var m=null,c=0,d=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var A={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},p=[{caption:"Browser",values:["memory","total"]}],v=[{base:"total",steps:["memory"]}],g=Math.log(1024);function y(C){var w=100,T=Math.floor(Math.log(C)/g);return Math.round(C*w/Math.pow(1024,T))/w}function E(){c=y(performance.memory.usedJSHeapSize),d=y(performance.memory.totalJSHeapSize),m("memory").set(c),m("total").set(d)}function _(){c=0}function S(){}function x(C){m=C}return{update:E,start:_,end:S,attach:x,values:A,groups:p,fractions:v}},u.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},"./vendor/rStats.js":u=>{(function(){"performance"in window||(window.performance={});var m=window.performance;if(!("now"in m)){var c=Date.now();m.timing&&m.timing.navigationStart&&(c=m.timing.navigationStart),m.now=function(){return Date.now()-c}}m.mark||(m.mark=function(){}),m.measure||(m.measure=function(){})})(),window.rStats=function(c){function d(F,z){for(var G=Object.keys(F),H=0,j=G.length;H<j;H++)z(G[H])}function A(F){var z=document.createElement("link");z.href=F,z.rel="stylesheet",z.type="text/css",document.getElementsByTagName("head")[0].appendChild(z)}var p=c||{},v=p.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],g="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",y=(p.CSSPath?p.CSSPath:"")+"rStats.css",E=p.css||[g,y];E.forEach(function(F){A(F)}),p.values||(p.values={});var _,S,x=10,C=200,w={};function T(F,z,G){var H=G||{},j=document.createElement("canvas"),q=j.getContext("2d"),Q=0,k=0,K=H.color?H.color:"#666666",W=document.createElement("canvas"),J=W.getContext("2d");W.width=1,W.height=2*x,J.fillStyle="#444444",J.fillRect(0,0,1,2*x),J.fillStyle=K,J.fillRect(0,x,1,x),J.fillStyle="#ffffff",J.globalAlpha=.5,J.fillRect(0,x,1,1),J.globalAlpha=1;var se=document.createElement("canvas"),ge=se.getContext("2d");se.width=1,se.height=2*x,ge.fillStyle="#444444",ge.fillRect(0,0,1,2*x),ge.fillStyle="#b70000",ge.fillRect(0,x,1,x),ge.globalAlpha=.5,ge.fillStyle="#ffffff",ge.fillRect(0,x,1,1),ge.globalAlpha=1;function fe(){j.width=C,j.height=x,j.style.width=j.width+"px",j.style.height=j.height+"px",j.className="rs-canvas",F.appendChild(j),q.fillStyle="#444444",q.fillRect(0,0,j.width,j.height)}function me(xe,ye){k+=(xe-k)*.1,Q*=.99,k>Q&&(Q=k),q.drawImage(j,1,0,j.width-1,j.height,0,0,j.width-1,j.height),ye?q.drawImage(se,j.width-1,j.height-k*j.height/Q-x):q.drawImage(W,j.width-1,j.height-k*j.height/Q-x)}return fe(),{draw:me}}function O(F,z){var G=document.createElement("canvas"),H=G.getContext("2d");function j(){G.width=C,G.height=x*z,G.style.width=G.width+"px",G.style.height=G.height+"px",G.className="rs-canvas",F.appendChild(G),H.fillStyle="#444444",H.fillRect(0,0,G.width,G.height)}function q(Q){H.drawImage(G,1,0,G.width-1,G.height,0,0,G.width-1,G.height);var k=0;d(Q,function(K){var W=Q[K]*G.height;H.fillStyle=v[K],H.fillRect(G.width-1,k,1,W),k+=W})}return j(),{draw:q}}function B(F,z){var G=F,H,j=0,q=0,Q=0,k=0,K=performance.now(),W=0,J=document.createElement("div"),se=document.createElement("span"),ge=document.createElement("div"),fe=document.createTextNode(""),me=p?p.values[G.toLowerCase()]:null,xe=new T(J,G,me),ye=!1;se.className="rs-counter-id",se.textContent=me&&me.caption?me.caption:G,ge.className="rs-counter-value",ge.appendChild(fe),J.appendChild(se),J.appendChild(ge),z?z.div.appendChild(J):S.appendChild(J),H=performance.now();function we(vt){if(me&&me.average){k+=vt,W++;var dt=performance.now();dt-K>=(me.avgMs||1e3)&&(Q=k/W,k=0,K=dt,W=0)}}function Ee(){H=performance.now(),p.userTimingAPI&&performance.mark(G+"-start"),ye=!0}function He(){j=performance.now()-H,p.userTimingAPI&&(performance.mark(G+"-end"),ye&&performance.measure(G,G+"-start",G+"-end")),we(j)}function Ae(){He(),Ee()}function Ke(){var vt=me&&me.average?Q:j;fe.nodeValue=Math.round(vt*100)/100;var dt=me&&(me.below&&j<me.below||me.over&&j>me.over);xe.draw(j,dt),J.className=dt?"rs-counter-base alarm":"rs-counter-base"}function Ue(){var vt=performance.now(),dt=vt-H;q++,dt>1e3&&(me&&me.interpolate===!1?j=q:j=q*1e3/dt,q=0,H=vt,we(j))}function ct(vt){j=vt,we(j)}return{set:ct,start:Ee,tick:Ae,end:He,frame:Ue,value:function(){return j},draw:Ke}}function P(F){var z=F.toLowerCase();if(z===void 0&&(z="default"),w[z])return w[z];var G=null;p&&p.groups&&d(p.groups,function(j){var q=p.groups[parseInt(j,10)];!G&&q.values.indexOf(z.toLowerCase())!==-1&&(G=q)});var H=new B(z,G);return w[z]=H,H}function L(){if(p.plugins){p.values||(p.values={}),p.groups||(p.groups=[]),p.fractions||(p.fractions=[]);for(var F=0;F<p.plugins.length;F++)p.plugins[F].attach(P),d(p.plugins[F].values,function(z){p.values[z]=p.plugins[F].values[z]}),p.groups=p.groups.concat(p.plugins[F].groups),p.fractions=p.fractions.concat(p.plugins[F].fractions)}else p.plugins={};_=document.createElement("div"),_.className="rs-base",S=document.createElement("div"),S.className="rs-container",S.style.height="auto",_.appendChild(S),document.body.appendChild(_),p&&(p.groups&&d(p.groups,function(z){var G=p.groups[parseInt(z,10)],H=document.createElement("div");H.className="rs-group",G.div=H;var j=document.createElement("h1");j.textContent=G.caption,j.addEventListener("click",(function(q){this.classList.toggle("hidden"),q.preventDefault()}).bind(H)),S.appendChild(j),S.appendChild(H)}),p.fractions&&d(p.fractions,function(z){var G=p.fractions[parseInt(z,10)],H=document.createElement("div");H.className="rs-fraction";var j=document.createElement("div");j.className="rs-legend";var q=0;d(p.fractions[z].steps,function(k){var K=document.createElement("p");K.textContent=p.fractions[z].steps[k],K.style.color=v[q],j.appendChild(K),q++}),H.appendChild(j),H.style.height=q*x+"px",G.div=H;var Q=new O(H,q);G.graph=Q,S.appendChild(H)}))}function N(){d(p.plugins,function(F){p.plugins[F].update()}),d(w,function(F){w[F].draw()}),p&&p.fractions&&d(p.fractions,function(F){var z=p.fractions[parseInt(F,10)],G=[],H=w[z.base.toLowerCase()];H&&(H=H.value(),d(p.fractions[F].steps,function(j){var q=p.fractions[F].steps[parseInt(j,10)].toLowerCase(),Q=w[q];Q&&G.push(Q.value()/H)})),z.graph.draw(G)})}return L(),function(F){return F?P(F):{element:_,update:N}}},u.exports=window.rStats},"./vendor/wakelock/util.js":u=>{var m={};m.base64=function(c,d){return"data:"+c+";base64,"+d},m.isMobile=function(){var c=!1;return function(d){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(d)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(d.substr(0,4)))&&(c=!0)}(navigator.userAgent||navigator.vendor||window.opera),c},m.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},m.isIFrame=function(){try{return window.self!==window.top}catch{return!0}},m.appendQueryParameter=function(c,d,A){var p=c.indexOf("?")<0?"?":"&";return c+=p+d+"="+A,c},m.getQueryParameter=function(c){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var d=new RegExp("[\\?&]"+c+"=([^&#]*)"),A=d.exec(location.search);return A===null?"":decodeURIComponent(A[1].replace(/\+/g," "))},m.isLandscapeMode=function(){return window.orientation==90||window.orientation==-90},u.exports=m},"./vendor/wakelock/wakelock.js":(u,m,c)=>{var d=c("./vendor/wakelock/util.js");function A(){var g=document.createElement("video");g.addEventListener("ended",function(){g.play()}),this.request=function(){g.paused&&(g.src=d.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),g.play())},this.release=function(){g.pause(),g.src=""}}function p(){var g=null;this.request=function(){g||(g=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){g&&(clearInterval(g),g=null)}}function v(){var g=navigator.userAgent||navigator.vendor||window.opera;return g.match(/iPhone/i)||g.match(/iPod/i)?p:A}u.exports=v()},"./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css":(u,m,c)=>{c.r(m),c.d(m,{default:()=>N});var d=c("./node_modules/css-loader/dist/runtime/sourceMaps.js"),A=c.n(d),p=c("./node_modules/css-loader/dist/runtime/api.js"),v=c.n(p),g=c("./node_modules/css-loader/dist/runtime/getUrl.js"),y=c.n(g),E=new URL(c("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),c.b),_=new URL(c("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),c.b),S=new URL(c("data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"),c.b),x=new URL(c("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"),c.b),C=new URL(c("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"),c.b),w=v()(A()),T=y()(E),O=y()(_),B=y()(S),P=y()(x),L=y()(C);w.push([u.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(`+T+`) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(`+O+`) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(`+B+`);
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(`+P+`) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(`+L+`) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const N=w},"./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css":(u,m,c)=>{c.r(m),c.d(m,{default:()=>y});var d=c("./node_modules/css-loader/dist/runtime/sourceMaps.js"),A=c.n(d),p=c("./node_modules/css-loader/dist/runtime/api.js"),v=c.n(p),g=v()(A());g.push([u.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const y=g},"./src/style/aframe.css":(u,m,c)=>{c.r(m),c.d(m,{default:()=>B});var d=c("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),A=c.n(d),p=c("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),v=c.n(p),g=c("./node_modules/style-loader/dist/runtime/insertBySelector.js"),y=c.n(g),E=c("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),_=c.n(E),S=c("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),x=c.n(S),C=c("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),w=c.n(C),T=c("./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css"),O={};O.styleTagTransform=w(),O.setAttributes=_(),O.insert=y().bind(null,"head"),O.domAPI=v(),O.insertStyleElement=x(),A()(T.default,O);const B=T.default&&T.default.locals?T.default.locals:void 0},"./src/style/rStats.css":(u,m,c)=>{c.r(m),c.d(m,{default:()=>B});var d=c("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),A=c.n(d),p=c("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),v=c.n(p),g=c("./node_modules/style-loader/dist/runtime/insertBySelector.js"),y=c.n(g),E=c("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),_=c.n(E),S=c("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),x=c.n(S),C=c("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),w=c.n(C),T=c("./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css"),O={};O.styleTagTransform=w(),O.setAttributes=_(),O.insert=y().bind(null,"head"),O.domAPI=v(),O.insertStyleElement=x(),A()(T.default,O);const B=T.default&&T.default.locals?T.default.locals:void 0},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":u=>{var m=[];function c(p){for(var v=-1,g=0;g<m.length;g++)if(m[g].identifier===p){v=g;break}return v}function d(p,v){for(var g={},y=[],E=0;E<p.length;E++){var _=p[E],S=v.base?_[0]+v.base:_[0],x=g[S]||0,C="".concat(S," ").concat(x);g[S]=x+1;var w=c(C),T={css:_[1],media:_[2],sourceMap:_[3],supports:_[4],layer:_[5]};if(w!==-1)m[w].references++,m[w].updater(T);else{var O=A(T,v);v.byIndex=E,m.splice(E,0,{identifier:C,updater:O,references:1})}y.push(C)}return y}function A(p,v){var g=v.domAPI(v);g.update(p);var y=function(_){if(_){if(_.css===p.css&&_.media===p.media&&_.sourceMap===p.sourceMap&&_.supports===p.supports&&_.layer===p.layer)return;g.update(p=_)}else g.remove()};return y}u.exports=function(p,v){v=v||{},p=p||[];var g=d(p,v);return function(E){E=E||[];for(var _=0;_<g.length;_++){var S=g[_],x=c(S);m[x].references--}for(var C=d(E,v),w=0;w<g.length;w++){var T=g[w],O=c(T);m[O].references===0&&(m[O].updater(),m.splice(O,1))}g=C}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":u=>{var m={};function c(A){if(typeof m[A]>"u"){var p=document.querySelector(A);if(window.HTMLIFrameElement&&p instanceof window.HTMLIFrameElement)try{p=p.contentDocument.head}catch{p=null}m[A]=p}return m[A]}function d(A,p){var v=c(A);if(!v)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");v.appendChild(p)}u.exports=d},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":u=>{function m(c){var d=document.createElement("style");return c.setAttributes(d,c.attributes),c.insert(d,c.options),d}u.exports=m},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(u,m,c)=>{function d(A){var p=c.nc;p&&A.setAttribute("nonce",p)}u.exports=d},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":u=>{function m(A,p,v){var g="";v.supports&&(g+="@supports (".concat(v.supports,") {")),v.media&&(g+="@media ".concat(v.media," {"));var y=typeof v.layer<"u";y&&(g+="@layer".concat(v.layer.length>0?" ".concat(v.layer):""," {")),g+=v.css,y&&(g+="}"),v.media&&(g+="}"),v.supports&&(g+="}");var E=v.sourceMap;E&&typeof btoa<"u"&&(g+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(E))))," */")),p.styleTagTransform(g,A,p.options)}function c(A){if(A.parentNode===null)return!1;A.parentNode.removeChild(A)}function d(A){if(typeof document>"u")return{update:function(){},remove:function(){}};var p=A.insertStyleElement(A);return{update:function(g){m(p,A,g)},remove:function(){c(p)}}}u.exports=d},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":u=>{function m(c,d){if(d.styleSheet)d.styleSheet.cssText=c;else{for(;d.firstChild;)d.removeChild(d.firstChild);d.appendChild(document.createTextNode(c))}}u.exports=m},"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E":u=>{u.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":u=>{u.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":u=>{u.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E":u=>{u.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E":u=>{u.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"},"./node_modules/three/build/three.module.js":(u,m,c)=>{c.r(m),c.d(m,{ACESFilmicToneMapping:()=>St,AddEquation:()=>G,AddOperation:()=>en,AdditiveAnimationBlendMode:()=>ko,AdditiveBlending:()=>L,AgXToneMapping:()=>_e,AlphaFormat:()=>Ua,AlwaysCompare:()=>om,AlwaysDepth:()=>ct,AlwaysStencilFunc:()=>yd,AmbientLight:()=>A6,AnimationAction:()=>D6,AnimationClip:()=>Jd,AnimationLoader:()=>tU,AnimationMixer:()=>BU,AnimationObjectGroup:()=>IU,AnimationUtils:()=>qk,ArcCurve:()=>DM,ArrayCamera:()=>P2,ArrowHelper:()=>JU,AttachedBindMode:()=>Be,Audio:()=>B6,AudioAnalyser:()=>vU,AudioContext:()=>p3,AudioListener:()=>pU,AudioLoader:()=>dU,AxesHelper:()=>ZU,BackSide:()=>T,BasicDepthPacking:()=>al,BasicShadowMap:()=>_,BatchedMesh:()=>EM,Bone:()=>V2,BooleanKeyframeTrack:()=>ku,Box2:()=>kU,Box3:()=>fs,Box3Helper:()=>YU,BoxGeometry:()=>xu,BoxHelper:()=>KU,BufferAttribute:()=>Gr,BufferGeometry:()=>Zi,BufferGeometryLoader:()=>_6,ByteType:()=>wa,Cache:()=>Xl,Camera:()=>Bm,CameraHelper:()=>XU,CanvasTexture:()=>Mk,CapsuleGeometry:()=>sp,CatmullRomCurve3:()=>LM,CineonToneMapping:()=>Nt,CircleGeometry:()=>ap,ClampToEdgeWrapping:()=>tt,Clock:()=>S6,Color:()=>Kn,ColorKeyframeTrack:()=>c3,ColorManagement:()=>Or,CompressedArrayTexture:()=>yk,CompressedCubeTexture:()=>bk,CompressedTexture:()=>tp,CompressedTextureLoader:()=>nU,ConeGeometry:()=>op,ConstantAlphaFactor:()=>Ae,ConstantColorFactor:()=>Ee,CubeCamera:()=>x5,CubeReflectionMapping:()=>ce,CubeRefractionMapping:()=>X,CubeTexture:()=>Bd,CubeTextureLoader:()=>iU,CubeUVReflectionMapping:()=>Te,CubicBezierCurve:()=>q2,CubicBezierCurve3:()=>NM,CubicInterpolant:()=>a6,CullFaceBack:()=>g,CullFaceFront:()=>y,CullFaceFrontBack:()=>E,CullFaceNone:()=>v,Curve:()=>Ho,CurvePath:()=>kM,CustomBlending:()=>z,CustomToneMapping:()=>pe,CylinderGeometry:()=>rh,Cylindrical:()=>FU,Data3DTexture:()=>Ri,DataArrayTexture:()=>R0,DataTexture:()=>Dc,DataTextureLoader:()=>rU,DataUtils:()=>XD,DecrementStencilOp:()=>xA,DecrementWrapStencilOp:()=>IA,DefaultLoadingManager:()=>c6,DepthFormat:()=>Tt,DepthStencilFormat:()=>jt,DepthTexture:()=>B2,DetachedBindMode:()=>Le,DirectionalLight:()=>g6,DirectionalLightHelper:()=>$U,DiscreteInterpolant:()=>o6,DisplayP3ColorSpace:()=>S0,DodecahedronGeometry:()=>lp,DoubleSide:()=>O,DstAlphaFactor:()=>fe,DstColorFactor:()=>xe,DynamicCopyUsage:()=>HA,DynamicDrawUsage:()=>FA,DynamicReadUsage:()=>GA,EdgesGeometry:()=>UM,EllipseCurve:()=>np,EqualCompare:()=>im,EqualDepth:()=>It,EqualStencilFunc:()=>OA,EquirectangularReflectionMapping:()=>Y,EquirectangularRefractionMapping:()=>be,Euler:()=>ao,EventDispatcher:()=>xa,ExtrudeGeometry:()=>pp,FileLoader:()=>Yl,Float16BufferAttribute:()=>eL,Float32BufferAttribute:()=>ai,FloatType:()=>Pr,Fog:()=>km,FogExp2:()=>Fm,FramebufferTexture:()=>vk,FrontSide:()=>w,Frustum:()=>Rd,GLBufferAttribute:()=>LU,GLSL1:()=>WA,GLSL3:()=>Md,GreaterCompare:()=>rm,GreaterDepth:()=>Lt,GreaterEqualCompare:()=>am,GreaterEqualDepth:()=>rt,GreaterEqualStencilFunc:()=>NA,GreaterStencilFunc:()=>LA,GridHelper:()=>WU,Group:()=>Ru,HalfFloatType:()=>pr,HemisphereLight:()=>u6,HemisphereLightHelper:()=>zU,IcosahedronGeometry:()=>gp,ImageBitmapLoader:()=>hU,ImageLoader:()=>Zd,ImageUtils:()=>xc,IncrementStencilOp:()=>wA,IncrementWrapStencilOp:()=>SA,InstancedBufferAttribute:()=>th,InstancedBufferGeometry:()=>M6,InstancedInterleavedBuffer:()=>DU,InstancedMesh:()=>MM,Int16BufferAttribute:()=>JD,Int32BufferAttribute:()=>ZD,Int8BufferAttribute:()=>KD,IntType:()=>vs,InterleavedBuffer:()=>Um,InterleavedBufferAttribute:()=>Du,Interpolant:()=>Kd,InterpolateDiscrete:()=>et,InterpolateLinear:()=>yi,InterpolateSmooth:()=>Rs,InvertStencilOp:()=>TA,KeepStencilOp:()=>Ul,KeyframeTrack:()=>zo,LOD:()=>hM,LatheGeometry:()=>Hd,Layers:()=>vm,LessCompare:()=>nm,LessDepth:()=>vt,LessEqualCompare:()=>bd,LessEqualDepth:()=>dt,LessEqualStencilFunc:()=>DA,LessStencilFunc:()=>RA,Light:()=>Fc,LightProbe:()=>b6,Line:()=>Pc,Line3:()=>UU,LineBasicMaterial:()=>Ra,LineCurve:()=>J2,LineCurve3:()=>FM,LineDashedMaterial:()=>i6,LineLoop:()=>TM,LineSegments:()=>hl,LinearDisplayP3ColorSpace:()=>Au,LinearFilter:()=>Fn,LinearInterpolant:()=>l3,LinearMipMapLinearFilter:()=>Fs,LinearMipMapNearestFilter:()=>Li,LinearMipmapLinearFilter:()=>qi,LinearMipmapNearestFilter:()=>Br,LinearSRGBColorSpace:()=>Uo,LinearToneMapping:()=>Kt,LinearTransfer:()=>vu,Loader:()=>za,LoaderUtils:()=>m3,LoadingManager:()=>u3,LoopOnce:()=>Rr,LoopPingPong:()=>mi,LoopRepeat:()=>at,LuminanceAlphaFormat:()=>Vt,LuminanceFormat:()=>pt,MOUSE:()=>A,Material:()=>va,MaterialLoader:()=>Cp,MathUtils:()=>l2,Matrix3:()=>Bi,Matrix4:()=>ii,MaxEquation:()=>Q,Mesh:()=>Ds,MeshBasicMaterial:()=>Bc,MeshDepthMaterial:()=>D2,MeshDistanceMaterial:()=>L2,MeshLambertMaterial:()=>t6,MeshMatcapMaterial:()=>n6,MeshNormalMaterial:()=>e6,MeshPhongMaterial:()=>JM,MeshPhysicalMaterial:()=>qM,MeshStandardMaterial:()=>s3,MeshToonMaterial:()=>ZM,MinEquation:()=>q,MirroredRepeatWrapping:()=>wt,MixOperation:()=>xt,MultiplyBlending:()=>F,MultiplyOperation:()=>Et,NearestFilter:()=>Zt,NearestMipMapLinearFilter:()=>xi,NearestMipMapNearestFilter:()=>dn,NearestMipmapLinearFilter:()=>Qt,NearestMipmapNearestFilter:()=>qt,NeutralToneMapping:()=>De,NeverCompare:()=>tm,NeverDepth:()=>Ue,NeverStencilFunc:()=>BA,NoBlending:()=>B,NoColorSpace:()=>ua,NoToneMapping:()=>_t,NormalAnimationBlendMode:()=>yo,NormalBlending:()=>P,NotEqualCompare:()=>sm,NotEqualDepth:()=>hn,NotEqualStencilFunc:()=>PA,NumberKeyframeTrack:()=>Yd,Object3D:()=>Cr,ObjectLoader:()=>cU,ObjectSpaceNormalMap:()=>ll,OctahedronGeometry:()=>$d,OneFactor:()=>K,OneMinusConstantAlphaFactor:()=>Ke,OneMinusConstantColorFactor:()=>He,OneMinusDstAlphaFactor:()=>me,OneMinusDstColorFactor:()=>ye,OneMinusSrcAlphaFactor:()=>ge,OneMinusSrcColorFactor:()=>J,OrthographicCamera:()=>Dm,P3Primaries:()=>bu,PCFShadowMap:()=>S,PCFSoftShadowMap:()=>x,PMREMGenerator:()=>I2,Path:()=>Qd,PerspectiveCamera:()=>Vs,Plane:()=>Oc,PlaneGeometry:()=>$0,PlaneHelper:()=>qU,PointLight:()=>p6,PointLightHelper:()=>QU,Points:()=>RM,PointsMaterial:()=>W2,PolarGridHelper:()=>jU,PolyhedronGeometry:()=>Nc,PositionalAudio:()=>AU,PropertyBinding:()=>br,PropertyMixer:()=>O6,QuadraticBezierCurve:()=>Z2,QuadraticBezierCurve3:()=>e3,Quaternion:()=>_r,QuaternionKeyframeTrack:()=>ah,QuaternionLinearInterpolant:()=>l6,RED_GREEN_RGTC2_Format:()=>Ji,RED_RGTC1_Format:()=>ei,REVISION:()=>d,RGBADepthPacking:()=>ol,RGBAFormat:()=>$e,RGBAIntegerFormat:()=>ni,RGBA_ASTC_10x10_Format:()=>Ot,RGBA_ASTC_10x5_Format:()=>Yt,RGBA_ASTC_10x6_Format:()=>Wt,RGBA_ASTC_10x8_Format:()=>yt,RGBA_ASTC_12x10_Format:()=>on,RGBA_ASTC_12x12_Format:()=>Cn,RGBA_ASTC_4x4_Format:()=>Ui,RGBA_ASTC_5x4_Format:()=>re,RGBA_ASTC_5x5_Format:()=>le,RGBA_ASTC_6x5_Format:()=>ve,RGBA_ASTC_6x6_Format:()=>Se,RGBA_ASTC_8x5_Format:()=>Fe,RGBA_ASTC_8x6_Format:()=>Ze,RGBA_ASTC_8x8_Format:()=>ot,RGBA_BPTC_Format:()=>Vn,RGBA_ETC2_EAC_Format:()=>nr,RGBA_PVRTC_2BPPV1_Format:()=>Wr,RGBA_PVRTC_4BPPV1_Format:()=>ki,RGBA_S3TC_DXT1_Format:()=>fi,RGBA_S3TC_DXT3_Format:()=>dr,RGBA_S3TC_DXT5_Format:()=>Si,RGBFormat:()=>Ne,RGB_BPTC_SIGNED_Format:()=>Qn,RGB_BPTC_UNSIGNED_Format:()=>vi,RGB_ETC1_Format:()=>Mn,RGB_ETC2_Format:()=>_i,RGB_PVRTC_2BPPV1_Format:()=>Ti,RGB_PVRTC_4BPPV1_Format:()=>Mi,RGB_S3TC_DXT1_Format:()=>Jn,RGFormat:()=>Dn,RGIntegerFormat:()=>$t,RawShaderMaterial:()=>YM,Ray:()=>Gs,Raycaster:()=>PU,Rec709Primaries:()=>yu,RectAreaLight:()=>v6,RedFormat:()=>mn,RedIntegerFormat:()=>Ln,ReinhardToneMapping:()=>Dt,RenderTarget:()=>B0,RepeatWrapping:()=>We,ReplaceStencilOp:()=>EA,ReverseSubtractEquation:()=>j,RingGeometry:()=>Ap,SIGNED_RED_GREEN_RGTC2_Format:()=>Mr,SIGNED_RED_RGTC1_Format:()=>hi,SRGBColorSpace:()=>gr,SRGBTransfer:()=>jr,Scene:()=>sM,ShaderChunk:()=>$i,ShaderLib:()=>Qo,ShaderMaterial:()=>Vo,ShadowMaterial:()=>KM,Shape:()=>Pu,ShapeGeometry:()=>vp,ShapePath:()=>eG,ShapeUtils:()=>dl,ShortType:()=>zr,Skeleton:()=>Wm,SkeletonHelper:()=>VU,SkinnedMesh:()=>AM,Source:()=>ls,Sphere:()=>Us,SphereGeometry:()=>Xd,Spherical:()=>NU,SphericalHarmonics3:()=>y6,SplineCurve:()=>t3,SpotLight:()=>f6,SpotLightHelper:()=>GU,Sprite:()=>cM,SpriteMaterial:()=>F2,SrcAlphaFactor:()=>se,SrcAlphaSaturateFactor:()=>we,SrcColorFactor:()=>W,StaticCopyUsage:()=>QA,StaticDrawUsage:()=>Mu,StaticReadUsage:()=>UA,StereoCamera:()=>fU,StreamCopyUsage:()=>zA,StreamDrawUsage:()=>kA,StreamReadUsage:()=>VA,StringKeyframeTrack:()=>Uu,SubtractEquation:()=>H,SubtractiveBlending:()=>N,TOUCH:()=>p,TangentSpaceNormalMap:()=>pa,TetrahedronGeometry:()=>yp,Texture:()=>qr,TextureLoader:()=>sU,TorusGeometry:()=>bp,TorusKnotGeometry:()=>Mp,Triangle:()=>oo,TriangleFanDrawMode:()=>kl,TriangleStripDrawMode:()=>Fl,TrianglesDrawMode:()=>Nl,TubeGeometry:()=>_p,UVMapping:()=>ke,Uint16BufferAttribute:()=>A2,Uint32BufferAttribute:()=>v2,Uint8BufferAttribute:()=>YD,Uint8ClampedBufferAttribute:()=>qD,Uniform:()=>v3,UniformsGroup:()=>OU,UniformsLib:()=>Pn,UniformsUtils:()=>C5,UnsignedByteType:()=>Hr,UnsignedInt248Type:()=>ca,UnsignedInt5999Type:()=>Fo,UnsignedIntType:()=>ys,UnsignedShort4444Type:()=>us,UnsignedShort5551Type:()=>to,UnsignedShortType:()=>ks,VSMShadowMap:()=>C,Vector2:()=>sn,Vector3:()=>Ve,Vector4:()=>yr,VectorKeyframeTrack:()=>qd,VideoTexture:()=>Ak,WebGL3DRenderTarget:()=>fr,WebGLArrayRenderTarget:()=>Zn,WebGLCoordinateSystem:()=>bo,WebGLCubeRenderTarget:()=>S5,WebGLMultipleRenderTargets:()=>tG,WebGLRenderTarget:()=>Ga,WebGLRenderer:()=>lk,WebGLUtils:()=>eM,WebGPUCoordinateSystem:()=>_u,WireframeGeometry:()=>jM,WrapAroundEnding:()=>no,ZeroCurvatureEnding:()=>ds,ZeroFactor:()=>k,ZeroSlopeEnding:()=>qs,ZeroStencilOp:()=>CA,createCanvasElement:()=>um});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const d="164",A={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},p={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},v=0,g=1,y=2,E=3,_=0,S=1,x=2,C=3,w=0,T=1,O=2,B=0,P=1,L=2,N=3,F=4,z=5,G=100,H=101,j=102,q=103,Q=104,k=200,K=201,W=202,J=203,se=204,ge=205,fe=206,me=207,xe=208,ye=209,we=210,Ee=211,He=212,Ae=213,Ke=214,Ue=0,ct=1,vt=2,dt=3,It=4,rt=5,Lt=6,hn=7,Et=0,xt=1,en=2,_t=0,Kt=1,Dt=2,Nt=3,St=4,pe=5,_e=6,De=7,Be="attached",Le="detached",ke=300,ce=301,X=302,Y=303,be=304,Te=306,We=1e3,tt=1001,wt=1002,Zt=1003,qt=1004,dn=1004,Qt=1005,xi=1005,Fn=1006,Br=1007,Li=1007,qi=1008,Fs=1008,Hr=1009,wa=1010,zr=1011,ks=1012,vs=1013,ys=1014,Pr=1015,pr=1016,us=1017,to=1018,ca=1020,Fo=35902,Ua=1021,Ne=1022,$e=1023,pt=1024,Vt=1025,Tt=1026,jt=1027,mn=1028,Ln=1029,Dn=1030,$t=1031,ni=1033,Jn=33776,fi=33777,dr=33778,Si=33779,Mi=35840,Ti=35841,ki=35842,Wr=35843,Mn=36196,_i=37492,nr=37496,Ui=37808,re=37809,le=37810,ve=37811,Se=37812,Fe=37813,Ze=37814,ot=37815,Yt=37816,Wt=37817,yt=37818,Ot=37819,on=37820,Cn=37821,Vn=36492,Qn=36494,vi=36495,ei=36283,hi=36284,Ji=36285,Mr=36286,Rr=2200,at=2201,mi=2202,et=2300,yi=2301,Rs=2302,ds=2400,qs=2401,no=2402,yo=2500,ko=2501,Nl=0,Fl=1,kl=2,al=3200,ol=3201,pa=0,ll=1,ua="",gr="srgb",Uo="srgb-linear",S0="display-p3",Au="display-p3-linear",vu="linear",jr="srgb",yu="rec709",bu="p3",CA=0,Ul=7680,EA=7681,wA=7682,xA=7683,SA=34055,IA=34056,TA=5386,BA=512,RA=513,OA=514,DA=515,LA=516,PA=517,NA=518,yd=519,tm=512,nm=513,im=514,bd=515,rm=516,sm=517,am=518,om=519,Mu=35044,FA=35048,kA=35040,UA=35045,GA=35049,VA=35041,QA=35046,HA=35050,zA=35042,WA="100",Md="300 es",bo=2e3,_u=2001;class xa{addEventListener(n,s){this._listeners===void 0&&(this._listeners={});const l=this._listeners;l[n]===void 0&&(l[n]=[]),l[n].indexOf(s)===-1&&l[n].push(s)}hasEventListener(n,s){if(this._listeners===void 0)return!1;const l=this._listeners;return l[n]!==void 0&&l[n].indexOf(s)!==-1}removeEventListener(n,s){if(this._listeners===void 0)return;const f=this._listeners[n];if(f!==void 0){const b=f.indexOf(s);b!==-1&&f.splice(b,1)}}dispatchEvent(n){if(this._listeners===void 0)return;const l=this._listeners[n.type];if(l!==void 0){n.target=this;const f=l.slice(0);for(let b=0,I=f.length;b<I;b++)f[b].call(this,n);n.target=null}}}const Js=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let lm=1234567;const Gl=Math.PI/180,Cc=180/Math.PI;function Sa(){const M=Math.random()*4294967295|0,n=Math.random()*4294967295|0,s=Math.random()*4294967295|0,l=Math.random()*4294967295|0;return(Js[M&255]+Js[M>>8&255]+Js[M>>16&255]+Js[M>>24&255]+"-"+Js[n&255]+Js[n>>8&255]+"-"+Js[n>>16&15|64]+Js[n>>24&255]+"-"+Js[s&63|128]+Js[s>>8&255]+"-"+Js[s>>16&255]+Js[s>>24&255]+Js[l&255]+Js[l>>8&255]+Js[l>>16&255]+Js[l>>24&255]).toLowerCase()}function hs(M,n,s){return Math.max(n,Math.min(s,M))}function _d(M,n){return(M%n+n)%n}function jA(M,n,s,l,f){return l+(M-n)*(f-l)/(s-n)}function $A(M,n,s){return M!==n?(s-M)/(n-M):0}function Cu(M,n,s){return(1-s)*M+s*n}function XA(M,n,s,l){return Cu(M,n,1-Math.exp(-s*l))}function KA(M,n=1){return n-Math.abs(_d(M,n*2)-n)}function YA(M,n,s){return M<=n?0:M>=s?1:(M=(M-n)/(s-n),M*M*(3-2*M))}function qA(M,n,s){return M<=n?0:M>=s?1:(M=(M-n)/(s-n),M*M*M*(M*(M*6-15)+10))}function JA(M,n){return M+Math.floor(Math.random()*(n-M+1))}function ZA(M,n){return M+Math.random()*(n-M)}function e2(M){return M*(.5-Math.random())}function t2(M){M!==void 0&&(lm=M);let n=lm+=1831565813;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}function n2(M){return M*Gl}function i2(M){return M*Cc}function r2(M){return(M&M-1)===0&&M!==0}function s2(M){return Math.pow(2,Math.ceil(Math.log(M)/Math.LN2))}function a2(M){return Math.pow(2,Math.floor(Math.log(M)/Math.LN2))}function o2(M,n,s,l,f){const b=Math.cos,I=Math.sin,R=b(s/2),U=I(s/2),V=b((n+l)/2),$=I((n+l)/2),Z=b((n-l)/2),ee=I((n-l)/2),te=b((l-n)/2),ae=I((l-n)/2);switch(f){case"XYX":M.set(R*$,U*Z,U*ee,R*V);break;case"YZY":M.set(U*ee,R*$,U*Z,R*V);break;case"ZXZ":M.set(U*Z,U*ee,R*$,R*V);break;case"XZX":M.set(R*$,U*ae,U*te,R*V);break;case"YXY":M.set(U*te,R*$,U*ae,R*V);break;case"ZYZ":M.set(U*ae,U*te,R*$,R*V);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+f)}}function ha(M,n){switch(n.constructor){case Float32Array:return M;case Uint32Array:return M/4294967295;case Uint16Array:return M/65535;case Uint8Array:return M/255;case Int32Array:return Math.max(M/2147483647,-1);case Int16Array:return Math.max(M/32767,-1);case Int8Array:return Math.max(M/127,-1);default:throw new Error("Invalid component type.")}}function Pi(M,n){switch(n.constructor){case Float32Array:return M;case Uint32Array:return Math.round(M*4294967295);case Uint16Array:return Math.round(M*65535);case Uint8Array:return Math.round(M*255);case Int32Array:return Math.round(M*2147483647);case Int16Array:return Math.round(M*32767);case Int8Array:return Math.round(M*127);default:throw new Error("Invalid component type.")}}const l2={DEG2RAD:Gl,RAD2DEG:Cc,generateUUID:Sa,clamp:hs,euclideanModulo:_d,mapLinear:jA,inverseLerp:$A,lerp:Cu,damp:XA,pingpong:KA,smoothstep:YA,smootherstep:qA,randInt:JA,randFloat:ZA,randFloatSpread:e2,seededRandom:t2,degToRad:n2,radToDeg:i2,isPowerOfTwo:r2,ceilPowerOfTwo:s2,floorPowerOfTwo:a2,setQuaternionFromProperEuler:o2,normalize:Pi,denormalize:ha};class sn{constructor(n=0,s=0){sn.prototype.isVector2=!0,this.x=n,this.y=s}get width(){return this.x}set width(n){this.x=n}get height(){return this.y}set height(n){this.y=n}set(n,s){return this.x=n,this.y=s,this}setScalar(n){return this.x=n,this.y=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setComponent(n,s){switch(n){case 0:this.x=s;break;case 1:this.y=s;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y)}copy(n){return this.x=n.x,this.y=n.y,this}add(n){return this.x+=n.x,this.y+=n.y,this}addScalar(n){return this.x+=n,this.y+=n,this}addVectors(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this}addScaledVector(n,s){return this.x+=n.x*s,this.y+=n.y*s,this}sub(n){return this.x-=n.x,this.y-=n.y,this}subScalar(n){return this.x-=n,this.y-=n,this}subVectors(n,s){return this.x=n.x-s.x,this.y=n.y-s.y,this}multiply(n){return this.x*=n.x,this.y*=n.y,this}multiplyScalar(n){return this.x*=n,this.y*=n,this}divide(n){return this.x/=n.x,this.y/=n.y,this}divideScalar(n){return this.multiplyScalar(1/n)}applyMatrix3(n){const s=this.x,l=this.y,f=n.elements;return this.x=f[0]*s+f[3]*l+f[6],this.y=f[1]*s+f[4]*l+f[7],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this}clamp(n,s){return this.x=Math.max(n.x,Math.min(s.x,this.x)),this.y=Math.max(n.y,Math.min(s.y,this.y)),this}clampScalar(n,s){return this.x=Math.max(n,Math.min(s,this.x)),this.y=Math.max(n,Math.min(s,this.y)),this}clampLength(n,s){const l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(n,Math.min(s,l)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(n){return this.x*n.x+this.y*n.y}cross(n){return this.x*n.y-this.y*n.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(n){const s=Math.sqrt(this.lengthSq()*n.lengthSq());if(s===0)return Math.PI/2;const l=this.dot(n)/s;return Math.acos(hs(l,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const s=this.x-n.x,l=this.y-n.y;return s*s+l*l}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,s){return this.x+=(n.x-this.x)*s,this.y+=(n.y-this.y)*s,this}lerpVectors(n,s,l){return this.x=n.x+(s.x-n.x)*l,this.y=n.y+(s.y-n.y)*l,this}equals(n){return n.x===this.x&&n.y===this.y}fromArray(n,s=0){return this.x=n[s],this.y=n[s+1],this}toArray(n=[],s=0){return n[s]=this.x,n[s+1]=this.y,n}fromBufferAttribute(n,s){return this.x=n.getX(s),this.y=n.getY(s),this}rotateAround(n,s){const l=Math.cos(s),f=Math.sin(s),b=this.x-n.x,I=this.y-n.y;return this.x=b*l-I*f+n.x,this.y=b*f+I*l+n.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Bi{constructor(n,s,l,f,b,I,R,U,V){Bi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],n!==void 0&&this.set(n,s,l,f,b,I,R,U,V)}set(n,s,l,f,b,I,R,U,V){const $=this.elements;return $[0]=n,$[1]=f,$[2]=R,$[3]=s,$[4]=b,$[5]=U,$[6]=l,$[7]=I,$[8]=V,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(n){const s=this.elements,l=n.elements;return s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=l[6],s[7]=l[7],s[8]=l[8],this}extractBasis(n,s,l){return n.setFromMatrix3Column(this,0),s.setFromMatrix3Column(this,1),l.setFromMatrix3Column(this,2),this}setFromMatrix4(n){const s=n.elements;return this.set(s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]),this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,s){const l=n.elements,f=s.elements,b=this.elements,I=l[0],R=l[3],U=l[6],V=l[1],$=l[4],Z=l[7],ee=l[2],te=l[5],ae=l[8],he=f[0],oe=f[3],ne=f[6],Ie=f[1],Ce=f[4],Me=f[7],Je=f[2],Qe=f[5],je=f[8];return b[0]=I*he+R*Ie+U*Je,b[3]=I*oe+R*Ce+U*Qe,b[6]=I*ne+R*Me+U*je,b[1]=V*he+$*Ie+Z*Je,b[4]=V*oe+$*Ce+Z*Qe,b[7]=V*ne+$*Me+Z*je,b[2]=ee*he+te*Ie+ae*Je,b[5]=ee*oe+te*Ce+ae*Qe,b[8]=ee*ne+te*Me+ae*je,this}multiplyScalar(n){const s=this.elements;return s[0]*=n,s[3]*=n,s[6]*=n,s[1]*=n,s[4]*=n,s[7]*=n,s[2]*=n,s[5]*=n,s[8]*=n,this}determinant(){const n=this.elements,s=n[0],l=n[1],f=n[2],b=n[3],I=n[4],R=n[5],U=n[6],V=n[7],$=n[8];return s*I*$-s*R*V-l*b*$+l*R*U+f*b*V-f*I*U}invert(){const n=this.elements,s=n[0],l=n[1],f=n[2],b=n[3],I=n[4],R=n[5],U=n[6],V=n[7],$=n[8],Z=$*I-R*V,ee=R*U-$*b,te=V*b-I*U,ae=s*Z+l*ee+f*te;if(ae===0)return this.set(0,0,0,0,0,0,0,0,0);const he=1/ae;return n[0]=Z*he,n[1]=(f*V-$*l)*he,n[2]=(R*l-f*I)*he,n[3]=ee*he,n[4]=($*s-f*U)*he,n[5]=(f*b-R*s)*he,n[6]=te*he,n[7]=(l*U-V*s)*he,n[8]=(I*s-l*b)*he,this}transpose(){let n;const s=this.elements;return n=s[1],s[1]=s[3],s[3]=n,n=s[2],s[2]=s[6],s[6]=n,n=s[5],s[5]=s[7],s[7]=n,this}getNormalMatrix(n){return this.setFromMatrix4(n).invert().transpose()}transposeIntoArray(n){const s=this.elements;return n[0]=s[0],n[1]=s[3],n[2]=s[6],n[3]=s[1],n[4]=s[4],n[5]=s[7],n[6]=s[2],n[7]=s[5],n[8]=s[8],this}setUvTransform(n,s,l,f,b,I,R){const U=Math.cos(b),V=Math.sin(b);return this.set(l*U,l*V,-l*(U*I+V*R)+I+n,-f*V,f*U,-f*(-V*I+U*R)+R+s,0,0,1),this}scale(n,s){return this.premultiply(Cd.makeScale(n,s)),this}rotate(n){return this.premultiply(Cd.makeRotation(-n)),this}translate(n,s){return this.premultiply(Cd.makeTranslation(n,s)),this}makeTranslation(n,s){return n.isVector2?this.set(1,0,n.x,0,1,n.y,0,0,1):this.set(1,0,n,0,1,s,0,0,1),this}makeRotation(n){const s=Math.cos(n),l=Math.sin(n);return this.set(s,-l,0,l,s,0,0,0,1),this}makeScale(n,s){return this.set(n,0,0,0,s,0,0,0,1),this}equals(n){const s=this.elements,l=n.elements;for(let f=0;f<9;f++)if(s[f]!==l[f])return!1;return!0}fromArray(n,s=0){for(let l=0;l<9;l++)this.elements[l]=n[l+s];return this}toArray(n=[],s=0){const l=this.elements;return n[s]=l[0],n[s+1]=l[1],n[s+2]=l[2],n[s+3]=l[3],n[s+4]=l[4],n[s+5]=l[5],n[s+6]=l[6],n[s+7]=l[7],n[s+8]=l[8],n}clone(){return new this.constructor().fromArray(this.elements)}}const Cd=new Bi;function cm(M){for(let n=M.length-1;n>=0;--n)if(M[n]>=65535)return!0;return!1}const c2={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ec(M,n){return new c2[M](n)}function Eu(M){return document.createElementNS("http://www.w3.org/1999/xhtml",M)}function um(){const M=Eu("canvas");return M.style.display="block",M}const hm={};function dm(M){M in hm||(hm[M]=!0,console.warn(M))}const fm=new Bi().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),mm=new Bi().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),I0={[Uo]:{transfer:vu,primaries:yu,toReference:M=>M,fromReference:M=>M},[gr]:{transfer:jr,primaries:yu,toReference:M=>M.convertSRGBToLinear(),fromReference:M=>M.convertLinearToSRGB()},[Au]:{transfer:vu,primaries:bu,toReference:M=>M.applyMatrix3(mm),fromReference:M=>M.applyMatrix3(fm)},[S0]:{transfer:jr,primaries:bu,toReference:M=>M.convertSRGBToLinear().applyMatrix3(mm),fromReference:M=>M.applyMatrix3(fm).convertLinearToSRGB()}},u2=new Set([Uo,Au]),Or={enabled:!0,_workingColorSpace:Uo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(M){if(!u2.has(M))throw new Error(`Unsupported working color space, "${M}".`);this._workingColorSpace=M},convert:function(M,n,s){if(this.enabled===!1||n===s||!n||!s)return M;const l=I0[n].toReference,f=I0[s].fromReference;return f(l(M))},fromWorkingColorSpace:function(M,n){return this.convert(M,this._workingColorSpace,n)},toWorkingColorSpace:function(M,n){return this.convert(M,n,this._workingColorSpace)},getPrimaries:function(M){return I0[M].primaries},getTransfer:function(M){return M===ua?vu:I0[M].transfer}};function wc(M){return M<.04045?M*.0773993808:Math.pow(M*.9478672986+.0521327014,2.4)}function Ed(M){return M<.0031308?M*12.92:1.055*Math.pow(M,.41666)-.055}let Vl;class xc{static getDataURL(n){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let s;if(n instanceof HTMLCanvasElement)s=n;else{Vl===void 0&&(Vl=Eu("canvas")),Vl.width=n.width,Vl.height=n.height;const l=Vl.getContext("2d");n instanceof ImageData?l.putImageData(n,0,0):l.drawImage(n,0,0,n.width,n.height),s=Vl}return s.width>2048||s.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",n),s.toDataURL("image/jpeg",.6)):s.toDataURL("image/png")}static sRGBToLinear(n){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const s=Eu("canvas");s.width=n.width,s.height=n.height;const l=s.getContext("2d");l.drawImage(n,0,0,n.width,n.height);const f=l.getImageData(0,0,n.width,n.height),b=f.data;for(let I=0;I<b.length;I++)b[I]=wc(b[I]/255)*255;return l.putImageData(f,0,0),s}else if(n.data){const s=n.data.slice(0);for(let l=0;l<s.length;l++)s instanceof Uint8Array||s instanceof Uint8ClampedArray?s[l]=Math.floor(wc(s[l]/255)*255):s[l]=wc(s[l]);return{data:s,width:n.width,height:n.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),n}}let pm=0;class ls{constructor(n=null){this.isSource=!0,Object.defineProperty(this,"id",{value:pm++}),this.uuid=Sa(),this.data=n,this.dataReady=!0,this.version=0}set needsUpdate(n){n===!0&&this.version++}toJSON(n){const s=n===void 0||typeof n=="string";if(!s&&n.images[this.uuid]!==void 0)return n.images[this.uuid];const l={uuid:this.uuid,url:""},f=this.data;if(f!==null){let b;if(Array.isArray(f)){b=[];for(let I=0,R=f.length;I<R;I++)f[I].isDataTexture?b.push(T0(f[I].image)):b.push(T0(f[I]))}else b=T0(f);l.url=b}return s||(n.images[this.uuid]=l),l}}function T0(M){return typeof HTMLImageElement<"u"&&M instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&M instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&M instanceof ImageBitmap?xc.getDataURL(M):M.data?{data:Array.from(M.data),width:M.width,height:M.height,type:M.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let gm=0;class qr extends xa{constructor(n=qr.DEFAULT_IMAGE,s=qr.DEFAULT_MAPPING,l=tt,f=tt,b=Fn,I=qi,R=$e,U=Hr,V=qr.DEFAULT_ANISOTROPY,$=ua){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gm++}),this.uuid=Sa(),this.name="",this.source=new ls(n),this.mipmaps=[],this.mapping=s,this.channel=0,this.wrapS=l,this.wrapT=f,this.magFilter=b,this.minFilter=I,this.anisotropy=V,this.format=R,this.internalFormat=null,this.type=U,this.offset=new sn(0,0),this.repeat=new sn(1,1),this.center=new sn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=$,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}toJSON(n){const s=n===void 0||typeof n=="string";if(!s&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];const l={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(l.userData=this.userData),s||(n.textures[this.uuid]=l),l}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(this.mapping!==ke)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case We:n.x=n.x-Math.floor(n.x);break;case tt:n.x=n.x<0?0:1;break;case wt:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case We:n.y=n.y-Math.floor(n.y);break;case tt:n.y=n.y<0?0:1;break;case wt:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){n===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){n===!0&&this.pmremVersion++}}qr.DEFAULT_IMAGE=null,qr.DEFAULT_MAPPING=ke,qr.DEFAULT_ANISOTROPY=1;class yr{constructor(n=0,s=0,l=0,f=1){yr.prototype.isVector4=!0,this.x=n,this.y=s,this.z=l,this.w=f}get width(){return this.z}set width(n){this.z=n}get height(){return this.w}set height(n){this.w=n}set(n,s,l,f){return this.x=n,this.y=s,this.z=l,this.w=f,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this.w=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setW(n){return this.w=n,this}setComponent(n,s){switch(n){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;case 3:this.w=s;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w!==void 0?n.w:1,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this.w+=n,this}addVectors(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this.z=n.z+s.z,this.w=n.w+s.w,this}addScaledVector(n,s){return this.x+=n.x*s,this.y+=n.y*s,this.z+=n.z*s,this.w+=n.w*s,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this.w-=n,this}subVectors(n,s){return this.x=n.x-s.x,this.y=n.y-s.y,this.z=n.z-s.z,this.w=n.w-s.w,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this.w*=n.w,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}applyMatrix4(n){const s=this.x,l=this.y,f=this.z,b=this.w,I=n.elements;return this.x=I[0]*s+I[4]*l+I[8]*f+I[12]*b,this.y=I[1]*s+I[5]*l+I[9]*f+I[13]*b,this.z=I[2]*s+I[6]*l+I[10]*f+I[14]*b,this.w=I[3]*s+I[7]*l+I[11]*f+I[15]*b,this}divideScalar(n){return this.multiplyScalar(1/n)}setAxisAngleFromQuaternion(n){this.w=2*Math.acos(n.w);const s=Math.sqrt(1-n.w*n.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=n.x/s,this.y=n.y/s,this.z=n.z/s),this}setAxisAngleFromRotationMatrix(n){let s,l,f,b;const U=n.elements,V=U[0],$=U[4],Z=U[8],ee=U[1],te=U[5],ae=U[9],he=U[2],oe=U[6],ne=U[10];if(Math.abs($-ee)<.01&&Math.abs(Z-he)<.01&&Math.abs(ae-oe)<.01){if(Math.abs($+ee)<.1&&Math.abs(Z+he)<.1&&Math.abs(ae+oe)<.1&&Math.abs(V+te+ne-3)<.1)return this.set(1,0,0,0),this;s=Math.PI;const Ce=(V+1)/2,Me=(te+1)/2,Je=(ne+1)/2,Qe=($+ee)/4,je=(Z+he)/4,Ye=(ae+oe)/4;return Ce>Me&&Ce>Je?Ce<.01?(l=0,f=.707106781,b=.707106781):(l=Math.sqrt(Ce),f=Qe/l,b=je/l):Me>Je?Me<.01?(l=.707106781,f=0,b=.707106781):(f=Math.sqrt(Me),l=Qe/f,b=Ye/f):Je<.01?(l=.707106781,f=.707106781,b=0):(b=Math.sqrt(Je),l=je/b,f=Ye/b),this.set(l,f,b,s),this}let Ie=Math.sqrt((oe-ae)*(oe-ae)+(Z-he)*(Z-he)+(ee-$)*(ee-$));return Math.abs(Ie)<.001&&(Ie=1),this.x=(oe-ae)/Ie,this.y=(Z-he)/Ie,this.z=(ee-$)/Ie,this.w=Math.acos((V+te+ne-1)/2),this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this.w=Math.min(this.w,n.w),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this.w=Math.max(this.w,n.w),this}clamp(n,s){return this.x=Math.max(n.x,Math.min(s.x,this.x)),this.y=Math.max(n.y,Math.min(s.y,this.y)),this.z=Math.max(n.z,Math.min(s.z,this.z)),this.w=Math.max(n.w,Math.min(s.w,this.w)),this}clampScalar(n,s){return this.x=Math.max(n,Math.min(s,this.x)),this.y=Math.max(n,Math.min(s,this.y)),this.z=Math.max(n,Math.min(s,this.z)),this.w=Math.max(n,Math.min(s,this.w)),this}clampLength(n,s){const l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(n,Math.min(s,l)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,s){return this.x+=(n.x-this.x)*s,this.y+=(n.y-this.y)*s,this.z+=(n.z-this.z)*s,this.w+=(n.w-this.w)*s,this}lerpVectors(n,s,l){return this.x=n.x+(s.x-n.x)*l,this.y=n.y+(s.y-n.y)*l,this.z=n.z+(s.z-n.z)*l,this.w=n.w+(s.w-n.w)*l,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z&&n.w===this.w}fromArray(n,s=0){return this.x=n[s],this.y=n[s+1],this.z=n[s+2],this.w=n[s+3],this}toArray(n=[],s=0){return n[s]=this.x,n[s+1]=this.y,n[s+2]=this.z,n[s+3]=this.w,n}fromBufferAttribute(n,s){return this.x=n.getX(s),this.y=n.getY(s),this.z=n.getZ(s),this.w=n.getW(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class B0 extends xa{constructor(n=1,s=1,l={}){super(),this.isRenderTarget=!0,this.width=n,this.height=s,this.depth=1,this.scissor=new yr(0,0,n,s),this.scissorTest=!1,this.viewport=new yr(0,0,n,s);const f={width:n,height:s,depth:1};l=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},l);const b=new qr(f,l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.colorSpace);b.flipY=!1,b.generateMipmaps=l.generateMipmaps,b.internalFormat=l.internalFormat,this.textures=[];const I=l.count;for(let R=0;R<I;R++)this.textures[R]=b.clone(),this.textures[R].isRenderTargetTexture=!0;this.depthBuffer=l.depthBuffer,this.stencilBuffer=l.stencilBuffer,this.resolveDepthBuffer=l.resolveDepthBuffer,this.resolveStencilBuffer=l.resolveStencilBuffer,this.depthTexture=l.depthTexture,this.samples=l.samples}get texture(){return this.textures[0]}set texture(n){this.textures[0]=n}setSize(n,s,l=1){if(this.width!==n||this.height!==s||this.depth!==l){this.width=n,this.height=s,this.depth=l;for(let f=0,b=this.textures.length;f<b;f++)this.textures[f].image.width=n,this.textures[f].image.height=s,this.textures[f].image.depth=l;this.dispose()}this.viewport.set(0,0,n,s),this.scissor.set(0,0,n,s)}clone(){return new this.constructor().copy(this)}copy(n){this.width=n.width,this.height=n.height,this.depth=n.depth,this.scissor.copy(n.scissor),this.scissorTest=n.scissorTest,this.viewport.copy(n.viewport),this.textures.length=0;for(let l=0,f=n.textures.length;l<f;l++)this.textures[l]=n.textures[l].clone(),this.textures[l].isRenderTargetTexture=!0;const s=Object.assign({},n.texture.image);return this.texture.source=new ls(s),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,n.depthTexture!==null&&(this.depthTexture=n.depthTexture.clone()),this.samples=n.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ga extends B0{constructor(n=1,s=1,l={}){super(n,s,l),this.isWebGLRenderTarget=!0}}class R0 extends qr{constructor(n=null,s=1,l=1,f=1){super(null),this.isDataArrayTexture=!0,this.image={data:n,width:s,height:l,depth:f},this.magFilter=Zt,this.minFilter=Zt,this.wrapR=tt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zn extends Ga{constructor(n=1,s=1,l=1,f={}){super(n,s,f),this.isWebGLArrayRenderTarget=!0,this.depth=l,this.texture=new R0(null,n,s,l),this.texture.isRenderTargetTexture=!0}}class Ri extends qr{constructor(n=null,s=1,l=1,f=1){super(null),this.isData3DTexture=!0,this.image={data:n,width:s,height:l,depth:f},this.magFilter=Zt,this.minFilter=Zt,this.wrapR=tt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fr extends Ga{constructor(n=1,s=1,l=1,f={}){super(n,s,f),this.isWebGL3DRenderTarget=!0,this.depth=l,this.texture=new Ri(null,n,s,l),this.texture.isRenderTargetTexture=!0}}class _r{constructor(n=0,s=0,l=0,f=1){this.isQuaternion=!0,this._x=n,this._y=s,this._z=l,this._w=f}static slerpFlat(n,s,l,f,b,I,R){let U=l[f+0],V=l[f+1],$=l[f+2],Z=l[f+3];const ee=b[I+0],te=b[I+1],ae=b[I+2],he=b[I+3];if(R===0){n[s+0]=U,n[s+1]=V,n[s+2]=$,n[s+3]=Z;return}if(R===1){n[s+0]=ee,n[s+1]=te,n[s+2]=ae,n[s+3]=he;return}if(Z!==he||U!==ee||V!==te||$!==ae){let oe=1-R;const ne=U*ee+V*te+$*ae+Z*he,Ie=ne>=0?1:-1,Ce=1-ne*ne;if(Ce>Number.EPSILON){const Je=Math.sqrt(Ce),Qe=Math.atan2(Je,ne*Ie);oe=Math.sin(oe*Qe)/Je,R=Math.sin(R*Qe)/Je}const Me=R*Ie;if(U=U*oe+ee*Me,V=V*oe+te*Me,$=$*oe+ae*Me,Z=Z*oe+he*Me,oe===1-R){const Je=1/Math.sqrt(U*U+V*V+$*$+Z*Z);U*=Je,V*=Je,$*=Je,Z*=Je}}n[s]=U,n[s+1]=V,n[s+2]=$,n[s+3]=Z}static multiplyQuaternionsFlat(n,s,l,f,b,I){const R=l[f],U=l[f+1],V=l[f+2],$=l[f+3],Z=b[I],ee=b[I+1],te=b[I+2],ae=b[I+3];return n[s]=R*ae+$*Z+U*te-V*ee,n[s+1]=U*ae+$*ee+V*Z-R*te,n[s+2]=V*ae+$*te+R*ee-U*Z,n[s+3]=$*ae-R*Z-U*ee-V*te,n}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get w(){return this._w}set w(n){this._w=n,this._onChangeCallback()}set(n,s,l,f){return this._x=n,this._y=s,this._z=l,this._w=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}setFromEuler(n,s=!0){const l=n._x,f=n._y,b=n._z,I=n._order,R=Math.cos,U=Math.sin,V=R(l/2),$=R(f/2),Z=R(b/2),ee=U(l/2),te=U(f/2),ae=U(b/2);switch(I){case"XYZ":this._x=ee*$*Z+V*te*ae,this._y=V*te*Z-ee*$*ae,this._z=V*$*ae+ee*te*Z,this._w=V*$*Z-ee*te*ae;break;case"YXZ":this._x=ee*$*Z+V*te*ae,this._y=V*te*Z-ee*$*ae,this._z=V*$*ae-ee*te*Z,this._w=V*$*Z+ee*te*ae;break;case"ZXY":this._x=ee*$*Z-V*te*ae,this._y=V*te*Z+ee*$*ae,this._z=V*$*ae+ee*te*Z,this._w=V*$*Z-ee*te*ae;break;case"ZYX":this._x=ee*$*Z-V*te*ae,this._y=V*te*Z+ee*$*ae,this._z=V*$*ae-ee*te*Z,this._w=V*$*Z+ee*te*ae;break;case"YZX":this._x=ee*$*Z+V*te*ae,this._y=V*te*Z+ee*$*ae,this._z=V*$*ae-ee*te*Z,this._w=V*$*Z-ee*te*ae;break;case"XZY":this._x=ee*$*Z-V*te*ae,this._y=V*te*Z-ee*$*ae,this._z=V*$*ae+ee*te*Z,this._w=V*$*Z+ee*te*ae;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+I)}return s===!0&&this._onChangeCallback(),this}setFromAxisAngle(n,s){const l=s/2,f=Math.sin(l);return this._x=n.x*f,this._y=n.y*f,this._z=n.z*f,this._w=Math.cos(l),this._onChangeCallback(),this}setFromRotationMatrix(n){const s=n.elements,l=s[0],f=s[4],b=s[8],I=s[1],R=s[5],U=s[9],V=s[2],$=s[6],Z=s[10],ee=l+R+Z;if(ee>0){const te=.5/Math.sqrt(ee+1);this._w=.25/te,this._x=($-U)*te,this._y=(b-V)*te,this._z=(I-f)*te}else if(l>R&&l>Z){const te=2*Math.sqrt(1+l-R-Z);this._w=($-U)/te,this._x=.25*te,this._y=(f+I)/te,this._z=(b+V)/te}else if(R>Z){const te=2*Math.sqrt(1+R-l-Z);this._w=(b-V)/te,this._x=(f+I)/te,this._y=.25*te,this._z=(U+$)/te}else{const te=2*Math.sqrt(1+Z-l-R);this._w=(I-f)/te,this._x=(b+V)/te,this._y=(U+$)/te,this._z=.25*te}return this._onChangeCallback(),this}setFromUnitVectors(n,s){let l=n.dot(s)+1;return l<Number.EPSILON?(l=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=l):(this._x=0,this._y=-n.z,this._z=n.y,this._w=l)):(this._x=n.y*s.z-n.z*s.y,this._y=n.z*s.x-n.x*s.z,this._z=n.x*s.y-n.y*s.x,this._w=l),this.normalize()}angleTo(n){return 2*Math.acos(Math.abs(hs(this.dot(n),-1,1)))}rotateTowards(n,s){const l=this.angleTo(n);if(l===0)return this;const f=Math.min(1,s/l);return this.slerp(n,f),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let n=this.length();return n===0?(this._x=0,this._y=0,this._z=0,this._w=1):(n=1/n,this._x=this._x*n,this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}multiply(n){return this.multiplyQuaternions(this,n)}premultiply(n){return this.multiplyQuaternions(n,this)}multiplyQuaternions(n,s){const l=n._x,f=n._y,b=n._z,I=n._w,R=s._x,U=s._y,V=s._z,$=s._w;return this._x=l*$+I*R+f*V-b*U,this._y=f*$+I*U+b*R-l*V,this._z=b*$+I*V+l*U-f*R,this._w=I*$-l*R-f*U-b*V,this._onChangeCallback(),this}slerp(n,s){if(s===0)return this;if(s===1)return this.copy(n);const l=this._x,f=this._y,b=this._z,I=this._w;let R=I*n._w+l*n._x+f*n._y+b*n._z;if(R<0?(this._w=-n._w,this._x=-n._x,this._y=-n._y,this._z=-n._z,R=-R):this.copy(n),R>=1)return this._w=I,this._x=l,this._y=f,this._z=b,this;const U=1-R*R;if(U<=Number.EPSILON){const te=1-s;return this._w=te*I+s*this._w,this._x=te*l+s*this._x,this._y=te*f+s*this._y,this._z=te*b+s*this._z,this.normalize(),this}const V=Math.sqrt(U),$=Math.atan2(V,R),Z=Math.sin((1-s)*$)/V,ee=Math.sin(s*$)/V;return this._w=I*Z+this._w*ee,this._x=l*Z+this._x*ee,this._y=f*Z+this._y*ee,this._z=b*Z+this._z*ee,this._onChangeCallback(),this}slerpQuaternions(n,s,l){return this.copy(n).slerp(s,l)}random(){const n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random(),l=Math.random(),f=Math.sqrt(1-l),b=Math.sqrt(l);return this.set(f*Math.sin(n),f*Math.cos(n),b*Math.sin(s),b*Math.cos(s))}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}fromArray(n,s=0){return this._x=n[s],this._y=n[s+1],this._z=n[s+2],this._w=n[s+3],this._onChangeCallback(),this}toArray(n=[],s=0){return n[s]=this._x,n[s+1]=this._y,n[s+2]=this._z,n[s+3]=this._w,n}fromBufferAttribute(n,s){return this._x=n.getX(s),this._y=n.getY(s),this._z=n.getZ(s),this._w=n.getW(s),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ve{constructor(n=0,s=0,l=0){Ve.prototype.isVector3=!0,this.x=n,this.y=s,this.z=l}set(n,s,l){return l===void 0&&(l=this.z),this.x=n,this.y=s,this.z=l,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setComponent(n,s){switch(n){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this}addVectors(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this.z=n.z+s.z,this}addScaledVector(n,s){return this.x+=n.x*s,this.y+=n.y*s,this.z+=n.z*s,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this}subVectors(n,s){return this.x=n.x-s.x,this.y=n.y-s.y,this.z=n.z-s.z,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this}multiplyVectors(n,s){return this.x=n.x*s.x,this.y=n.y*s.y,this.z=n.z*s.z,this}applyEuler(n){return this.applyQuaternion(bs.setFromEuler(n))}applyAxisAngle(n,s){return this.applyQuaternion(bs.setFromAxisAngle(n,s))}applyMatrix3(n){const s=this.x,l=this.y,f=this.z,b=n.elements;return this.x=b[0]*s+b[3]*l+b[6]*f,this.y=b[1]*s+b[4]*l+b[7]*f,this.z=b[2]*s+b[5]*l+b[8]*f,this}applyNormalMatrix(n){return this.applyMatrix3(n).normalize()}applyMatrix4(n){const s=this.x,l=this.y,f=this.z,b=n.elements,I=1/(b[3]*s+b[7]*l+b[11]*f+b[15]);return this.x=(b[0]*s+b[4]*l+b[8]*f+b[12])*I,this.y=(b[1]*s+b[5]*l+b[9]*f+b[13])*I,this.z=(b[2]*s+b[6]*l+b[10]*f+b[14])*I,this}applyQuaternion(n){const s=this.x,l=this.y,f=this.z,b=n.x,I=n.y,R=n.z,U=n.w,V=2*(I*f-R*l),$=2*(R*s-b*f),Z=2*(b*l-I*s);return this.x=s+U*V+I*Z-R*$,this.y=l+U*$+R*V-b*Z,this.z=f+U*Z+b*$-I*V,this}project(n){return this.applyMatrix4(n.matrixWorldInverse).applyMatrix4(n.projectionMatrix)}unproject(n){return this.applyMatrix4(n.projectionMatrixInverse).applyMatrix4(n.matrixWorld)}transformDirection(n){const s=this.x,l=this.y,f=this.z,b=n.elements;return this.x=b[0]*s+b[4]*l+b[8]*f,this.y=b[1]*s+b[5]*l+b[9]*f,this.z=b[2]*s+b[6]*l+b[10]*f,this.normalize()}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this}divideScalar(n){return this.multiplyScalar(1/n)}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this}clamp(n,s){return this.x=Math.max(n.x,Math.min(s.x,this.x)),this.y=Math.max(n.y,Math.min(s.y,this.y)),this.z=Math.max(n.z,Math.min(s.z,this.z)),this}clampScalar(n,s){return this.x=Math.max(n,Math.min(s,this.x)),this.y=Math.max(n,Math.min(s,this.y)),this.z=Math.max(n,Math.min(s,this.z)),this}clampLength(n,s){const l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(n,Math.min(s,l)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,s){return this.x+=(n.x-this.x)*s,this.y+=(n.y-this.y)*s,this.z+=(n.z-this.z)*s,this}lerpVectors(n,s,l){return this.x=n.x+(s.x-n.x)*l,this.y=n.y+(s.y-n.y)*l,this.z=n.z+(s.z-n.z)*l,this}cross(n){return this.crossVectors(this,n)}crossVectors(n,s){const l=n.x,f=n.y,b=n.z,I=s.x,R=s.y,U=s.z;return this.x=f*U-b*R,this.y=b*I-l*U,this.z=l*R-f*I,this}projectOnVector(n){const s=n.lengthSq();if(s===0)return this.set(0,0,0);const l=n.dot(this)/s;return this.copy(n).multiplyScalar(l)}projectOnPlane(n){return io.copy(this).projectOnVector(n),this.sub(io)}reflect(n){return this.sub(io.copy(n).multiplyScalar(2*this.dot(n)))}angleTo(n){const s=Math.sqrt(this.lengthSq()*n.lengthSq());if(s===0)return Math.PI/2;const l=this.dot(n)/s;return Math.acos(hs(l,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const s=this.x-n.x,l=this.y-n.y,f=this.z-n.z;return s*s+l*l+f*f}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)+Math.abs(this.z-n.z)}setFromSpherical(n){return this.setFromSphericalCoords(n.radius,n.phi,n.theta)}setFromSphericalCoords(n,s,l){const f=Math.sin(s)*n;return this.x=f*Math.sin(l),this.y=Math.cos(s)*n,this.z=f*Math.cos(l),this}setFromCylindrical(n){return this.setFromCylindricalCoords(n.radius,n.theta,n.y)}setFromCylindricalCoords(n,s,l){return this.x=n*Math.sin(s),this.y=l,this.z=n*Math.cos(s),this}setFromMatrixPosition(n){const s=n.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this}setFromMatrixScale(n){const s=this.setFromMatrixColumn(n,0).length(),l=this.setFromMatrixColumn(n,1).length(),f=this.setFromMatrixColumn(n,2).length();return this.x=s,this.y=l,this.z=f,this}setFromMatrixColumn(n,s){return this.fromArray(n.elements,s*4)}setFromMatrix3Column(n,s){return this.fromArray(n.elements,s*3)}setFromEuler(n){return this.x=n._x,this.y=n._y,this.z=n._z,this}setFromColor(n){return this.x=n.r,this.y=n.g,this.z=n.b,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z}fromArray(n,s=0){return this.x=n[s],this.y=n[s+1],this.z=n[s+2],this}toArray(n=[],s=0){return n[s]=this.x,n[s+1]=this.y,n[s+2]=this.z,n}fromBufferAttribute(n,s){return this.x=n.getX(s),this.y=n.getY(s),this.z=n.getZ(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const n=Math.random()*Math.PI*2,s=Math.random()*2-1,l=Math.sqrt(1-s*s);return this.x=l*Math.cos(n),this.y=s,this.z=l*Math.sin(n),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const io=new Ve,bs=new _r;class fs{constructor(n=new Ve(1/0,1/0,1/0),s=new Ve(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=n,this.max=s}set(n,s){return this.min.copy(n),this.max.copy(s),this}setFromArray(n){this.makeEmpty();for(let s=0,l=n.length;s<l;s+=3)this.expandByPoint(ga.fromArray(n,s));return this}setFromBufferAttribute(n){this.makeEmpty();for(let s=0,l=n.count;s<l;s++)this.expandByPoint(ga.fromBufferAttribute(n,s));return this}setFromPoints(n){this.makeEmpty();for(let s=0,l=n.length;s<l;s++)this.expandByPoint(n[s]);return this}setFromCenterAndSize(n,s){const l=ga.copy(s).multiplyScalar(.5);return this.min.copy(n).sub(l),this.max.copy(n).add(l),this}setFromObject(n,s=!1){return this.makeEmpty(),this.expandByObject(n,s)}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}expandByObject(n,s=!1){n.updateWorldMatrix(!1,!1);const l=n.geometry;if(l!==void 0){const b=l.getAttribute("position");if(s===!0&&b!==void 0&&n.isInstancedMesh!==!0)for(let I=0,R=b.count;I<R;I++)n.isMesh===!0?n.getVertexPosition(I,ga):ga.fromBufferAttribute(b,I),ga.applyMatrix4(n.matrixWorld),this.expandByPoint(ga);else n.boundingBox!==void 0?(n.boundingBox===null&&n.computeBoundingBox(),cl.copy(n.boundingBox)):(l.boundingBox===null&&l.computeBoundingBox(),cl.copy(l.boundingBox)),cl.applyMatrix4(n.matrixWorld),this.union(cl)}const f=n.children;for(let b=0,I=f.length;b<I;b++)this.expandByObject(f[b],s);return this}containsPoint(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y||n.z<this.min.z||n.z>this.max.z)}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}getParameter(n,s){return s.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y||n.max.z<this.min.z||n.min.z>this.max.z)}intersectsSphere(n){return this.clampPoint(n.center,ga),ga.distanceToSquared(n.center)<=n.radius*n.radius}intersectsPlane(n){let s,l;return n.normal.x>0?(s=n.normal.x*this.min.x,l=n.normal.x*this.max.x):(s=n.normal.x*this.max.x,l=n.normal.x*this.min.x),n.normal.y>0?(s+=n.normal.y*this.min.y,l+=n.normal.y*this.max.y):(s+=n.normal.y*this.max.y,l+=n.normal.y*this.min.y),n.normal.z>0?(s+=n.normal.z*this.min.z,l+=n.normal.z*this.max.z):(s+=n.normal.z*this.max.z,l+=n.normal.z*this.min.z),s<=-n.constant&&l>=-n.constant}intersectsTriangle(n){if(this.isEmpty())return!1;this.getCenter(Ar),Ur.subVectors(this.max,Ar),Va.subVectors(n.a,Ar),Zs.subVectors(n.b,Ar),Wi.subVectors(n.c,Ar),da.subVectors(Zs,Va),ro.subVectors(Wi,Zs),ea.subVectors(Va,Wi);let s=[0,-da.z,da.y,0,-ro.z,ro.y,0,-ea.z,ea.y,da.z,0,-da.x,ro.z,0,-ro.x,ea.z,0,-ea.x,-da.y,da.x,0,-ro.y,ro.x,0,-ea.y,ea.x,0];return!Ia(s,Va,Zs,Wi,Ur)||(s=[1,0,0,0,1,0,0,0,1],!Ia(s,Va,Zs,Wi,Ur))?!1:(ji.crossVectors(da,ro),s=[ji.x,ji.y,ji.z],Ia(s,Va,Zs,Wi,Ur))}clampPoint(n,s){return s.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,ga).distanceTo(n)}getBoundingSphere(n){return this.isEmpty()?n.makeEmpty():(this.getCenter(n.center),n.radius=this.getSize(ga).length()*.5),n}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}applyMatrix4(n){return this.isEmpty()?this:(cr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),cr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),cr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),cr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),cr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),cr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),cr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),cr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(cr),this)}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}const cr=[new Ve,new Ve,new Ve,new Ve,new Ve,new Ve,new Ve,new Ve],ga=new Ve,cl=new fs,Va=new Ve,Zs=new Ve,Wi=new Ve,da=new Ve,ro=new Ve,ea=new Ve,Ar=new Ve,Ur=new Ve,ji=new Ve,vr=new Ve;function Ia(M,n,s,l,f){for(let b=0,I=M.length-3;b<=I;b+=3){vr.fromArray(M,b);const R=f.x*Math.abs(vr.x)+f.y*Math.abs(vr.y)+f.z*Math.abs(vr.z),U=n.dot(vr),V=s.dot(vr),$=l.dot(vr);if(Math.max(-Math.max(U,V,$),Math.min(U,V,$))>R)return!1}return!0}const Sc=new fs,Ql=new Ve,O0=new Ve;class Us{constructor(n=new Ve,s=-1){this.isSphere=!0,this.center=n,this.radius=s}set(n,s){return this.center.copy(n),this.radius=s,this}setFromPoints(n,s){const l=this.center;s!==void 0?l.copy(s):Sc.setFromPoints(n).getCenter(l);let f=0;for(let b=0,I=n.length;b<I;b++)f=Math.max(f,l.distanceToSquared(n[b]));return this.radius=Math.sqrt(f),this}copy(n){return this.center.copy(n.center),this.radius=n.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(n){return n.distanceTo(this.center)-this.radius}intersectsSphere(n){const s=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=s*s}intersectsBox(n){return n.intersectsSphere(this)}intersectsPlane(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}clampPoint(n,s){const l=this.center.distanceToSquared(n);return s.copy(n),l>this.radius*this.radius&&(s.sub(this.center).normalize(),s.multiplyScalar(this.radius).add(this.center)),s}getBoundingBox(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}applyMatrix4(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}translate(n){return this.center.add(n),this}expandByPoint(n){if(this.isEmpty())return this.center.copy(n),this.radius=0,this;Ql.subVectors(n,this.center);const s=Ql.lengthSq();if(s>this.radius*this.radius){const l=Math.sqrt(s),f=(l-this.radius)*.5;this.center.addScaledVector(Ql,f/l),this.radius+=f}return this}union(n){return n.isEmpty()?this:this.isEmpty()?(this.copy(n),this):(this.center.equals(n.center)===!0?this.radius=Math.max(this.radius,n.radius):(O0.subVectors(n.center,this.center).setLength(n.radius),this.expandByPoint(Ql.copy(n.center).add(O0)),this.expandByPoint(Ql.copy(n.center).sub(O0))),this)}equals(n){return n.center.equals(this.center)&&n.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Mo=new Ve,D0=new Ve,L0=new Ve,ul=new Ve,wd=new Ve,P0=new Ve,xd=new Ve;class Gs{constructor(n=new Ve,s=new Ve(0,0,-1)){this.origin=n,this.direction=s}set(n,s){return this.origin.copy(n),this.direction.copy(s),this}copy(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}at(n,s){return s.copy(this.origin).addScaledVector(this.direction,n)}lookAt(n){return this.direction.copy(n).sub(this.origin).normalize(),this}recast(n){return this.origin.copy(this.at(n,Mo)),this}closestPointToPoint(n,s){s.subVectors(n,this.origin);const l=s.dot(this.direction);return l<0?s.copy(this.origin):s.copy(this.origin).addScaledVector(this.direction,l)}distanceToPoint(n){return Math.sqrt(this.distanceSqToPoint(n))}distanceSqToPoint(n){const s=Mo.subVectors(n,this.origin).dot(this.direction);return s<0?this.origin.distanceToSquared(n):(Mo.copy(this.origin).addScaledVector(this.direction,s),Mo.distanceToSquared(n))}distanceSqToSegment(n,s,l,f){D0.copy(n).add(s).multiplyScalar(.5),L0.copy(s).sub(n).normalize(),ul.copy(this.origin).sub(D0);const b=n.distanceTo(s)*.5,I=-this.direction.dot(L0),R=ul.dot(this.direction),U=-ul.dot(L0),V=ul.lengthSq(),$=Math.abs(1-I*I);let Z,ee,te,ae;if($>0)if(Z=I*U-R,ee=I*R-U,ae=b*$,Z>=0)if(ee>=-ae)if(ee<=ae){const he=1/$;Z*=he,ee*=he,te=Z*(Z+I*ee+2*R)+ee*(I*Z+ee+2*U)+V}else ee=b,Z=Math.max(0,-(I*ee+R)),te=-Z*Z+ee*(ee+2*U)+V;else ee=-b,Z=Math.max(0,-(I*ee+R)),te=-Z*Z+ee*(ee+2*U)+V;else ee<=-ae?(Z=Math.max(0,-(-I*b+R)),ee=Z>0?-b:Math.min(Math.max(-b,-U),b),te=-Z*Z+ee*(ee+2*U)+V):ee<=ae?(Z=0,ee=Math.min(Math.max(-b,-U),b),te=ee*(ee+2*U)+V):(Z=Math.max(0,-(I*b+R)),ee=Z>0?b:Math.min(Math.max(-b,-U),b),te=-Z*Z+ee*(ee+2*U)+V);else ee=I>0?-b:b,Z=Math.max(0,-(I*ee+R)),te=-Z*Z+ee*(ee+2*U)+V;return l&&l.copy(this.origin).addScaledVector(this.direction,Z),f&&f.copy(D0).addScaledVector(L0,ee),te}intersectSphere(n,s){Mo.subVectors(n.center,this.origin);const l=Mo.dot(this.direction),f=Mo.dot(Mo)-l*l,b=n.radius*n.radius;if(f>b)return null;const I=Math.sqrt(b-f),R=l-I,U=l+I;return U<0?null:R<0?this.at(U,s):this.at(R,s)}intersectsSphere(n){return this.distanceSqToPoint(n.center)<=n.radius*n.radius}distanceToPlane(n){const s=n.normal.dot(this.direction);if(s===0)return n.distanceToPoint(this.origin)===0?0:null;const l=-(this.origin.dot(n.normal)+n.constant)/s;return l>=0?l:null}intersectPlane(n,s){const l=this.distanceToPlane(n);return l===null?null:this.at(l,s)}intersectsPlane(n){const s=n.distanceToPoint(this.origin);return s===0||n.normal.dot(this.direction)*s<0}intersectBox(n,s){let l,f,b,I,R,U;const V=1/this.direction.x,$=1/this.direction.y,Z=1/this.direction.z,ee=this.origin;return V>=0?(l=(n.min.x-ee.x)*V,f=(n.max.x-ee.x)*V):(l=(n.max.x-ee.x)*V,f=(n.min.x-ee.x)*V),$>=0?(b=(n.min.y-ee.y)*$,I=(n.max.y-ee.y)*$):(b=(n.max.y-ee.y)*$,I=(n.min.y-ee.y)*$),l>I||b>f||((b>l||isNaN(l))&&(l=b),(I<f||isNaN(f))&&(f=I),Z>=0?(R=(n.min.z-ee.z)*Z,U=(n.max.z-ee.z)*Z):(R=(n.max.z-ee.z)*Z,U=(n.min.z-ee.z)*Z),l>U||R>f)||((R>l||l!==l)&&(l=R),(U<f||f!==f)&&(f=U),f<0)?null:this.at(l>=0?l:f,s)}intersectsBox(n){return this.intersectBox(n,Mo)!==null}intersectTriangle(n,s,l,f,b){wd.subVectors(s,n),P0.subVectors(l,n),xd.crossVectors(wd,P0);let I=this.direction.dot(xd),R;if(I>0){if(f)return null;R=1}else if(I<0)R=-1,I=-I;else return null;ul.subVectors(this.origin,n);const U=R*this.direction.dot(P0.crossVectors(ul,P0));if(U<0)return null;const V=R*this.direction.dot(wd.cross(ul));if(V<0||U+V>I)return null;const $=-R*ul.dot(xd);return $<0?null:this.at($/I,b)}applyMatrix4(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}equals(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ii{constructor(n,s,l,f,b,I,R,U,V,$,Z,ee,te,ae,he,oe){ii.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n!==void 0&&this.set(n,s,l,f,b,I,R,U,V,$,Z,ee,te,ae,he,oe)}set(n,s,l,f,b,I,R,U,V,$,Z,ee,te,ae,he,oe){const ne=this.elements;return ne[0]=n,ne[4]=s,ne[8]=l,ne[12]=f,ne[1]=b,ne[5]=I,ne[9]=R,ne[13]=U,ne[2]=V,ne[6]=$,ne[10]=Z,ne[14]=ee,ne[3]=te,ne[7]=ae,ne[11]=he,ne[15]=oe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ii().fromArray(this.elements)}copy(n){const s=this.elements,l=n.elements;return s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=l[6],s[7]=l[7],s[8]=l[8],s[9]=l[9],s[10]=l[10],s[11]=l[11],s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15],this}copyPosition(n){const s=this.elements,l=n.elements;return s[12]=l[12],s[13]=l[13],s[14]=l[14],this}setFromMatrix3(n){const s=n.elements;return this.set(s[0],s[3],s[6],0,s[1],s[4],s[7],0,s[2],s[5],s[8],0,0,0,0,1),this}extractBasis(n,s,l){return n.setFromMatrixColumn(this,0),s.setFromMatrixColumn(this,1),l.setFromMatrixColumn(this,2),this}makeBasis(n,s,l){return this.set(n.x,s.x,l.x,0,n.y,s.y,l.y,0,n.z,s.z,l.z,0,0,0,0,1),this}extractRotation(n){const s=this.elements,l=n.elements,f=1/Hl.setFromMatrixColumn(n,0).length(),b=1/Hl.setFromMatrixColumn(n,1).length(),I=1/Hl.setFromMatrixColumn(n,2).length();return s[0]=l[0]*f,s[1]=l[1]*f,s[2]=l[2]*f,s[3]=0,s[4]=l[4]*b,s[5]=l[5]*b,s[6]=l[6]*b,s[7]=0,s[8]=l[8]*I,s[9]=l[9]*I,s[10]=l[10]*I,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromEuler(n){const s=this.elements,l=n.x,f=n.y,b=n.z,I=Math.cos(l),R=Math.sin(l),U=Math.cos(f),V=Math.sin(f),$=Math.cos(b),Z=Math.sin(b);if(n.order==="XYZ"){const ee=I*$,te=I*Z,ae=R*$,he=R*Z;s[0]=U*$,s[4]=-U*Z,s[8]=V,s[1]=te+ae*V,s[5]=ee-he*V,s[9]=-R*U,s[2]=he-ee*V,s[6]=ae+te*V,s[10]=I*U}else if(n.order==="YXZ"){const ee=U*$,te=U*Z,ae=V*$,he=V*Z;s[0]=ee+he*R,s[4]=ae*R-te,s[8]=I*V,s[1]=I*Z,s[5]=I*$,s[9]=-R,s[2]=te*R-ae,s[6]=he+ee*R,s[10]=I*U}else if(n.order==="ZXY"){const ee=U*$,te=U*Z,ae=V*$,he=V*Z;s[0]=ee-he*R,s[4]=-I*Z,s[8]=ae+te*R,s[1]=te+ae*R,s[5]=I*$,s[9]=he-ee*R,s[2]=-I*V,s[6]=R,s[10]=I*U}else if(n.order==="ZYX"){const ee=I*$,te=I*Z,ae=R*$,he=R*Z;s[0]=U*$,s[4]=ae*V-te,s[8]=ee*V+he,s[1]=U*Z,s[5]=he*V+ee,s[9]=te*V-ae,s[2]=-V,s[6]=R*U,s[10]=I*U}else if(n.order==="YZX"){const ee=I*U,te=I*V,ae=R*U,he=R*V;s[0]=U*$,s[4]=he-ee*Z,s[8]=ae*Z+te,s[1]=Z,s[5]=I*$,s[9]=-R*$,s[2]=-V*$,s[6]=te*Z+ae,s[10]=ee-he*Z}else if(n.order==="XZY"){const ee=I*U,te=I*V,ae=R*U,he=R*V;s[0]=U*$,s[4]=-Z,s[8]=V*$,s[1]=ee*Z+he,s[5]=I*$,s[9]=te*Z-ae,s[2]=ae*Z-te,s[6]=R*$,s[10]=he*Z+ee}return s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(n){return this.compose(GD,n,VD)}lookAt(n,s,l){const f=this.elements;return so.subVectors(n,s),so.lengthSq()===0&&(so.z=1),so.normalize(),Ic.crossVectors(l,so),Ic.lengthSq()===0&&(Math.abs(l.z)===1?so.x+=1e-4:so.z+=1e-4,so.normalize(),Ic.crossVectors(l,so)),Ic.normalize(),Am.crossVectors(so,Ic),f[0]=Ic.x,f[4]=Am.x,f[8]=so.x,f[1]=Ic.y,f[5]=Am.y,f[9]=so.y,f[2]=Ic.z,f[6]=Am.z,f[10]=so.z,this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,s){const l=n.elements,f=s.elements,b=this.elements,I=l[0],R=l[4],U=l[8],V=l[12],$=l[1],Z=l[5],ee=l[9],te=l[13],ae=l[2],he=l[6],oe=l[10],ne=l[14],Ie=l[3],Ce=l[7],Me=l[11],Je=l[15],Qe=f[0],je=f[4],Ye=f[8],Pe=f[12],Re=f[1],qe=f[5],At=f[9],lt=f[13],bt=f[2],kt=f[6],tn=f[10],In=f[14],Gt=f[3],bn=f[7],wn=f[11],ti=f[15];return b[0]=I*Qe+R*Re+U*bt+V*Gt,b[4]=I*je+R*qe+U*kt+V*bn,b[8]=I*Ye+R*At+U*tn+V*wn,b[12]=I*Pe+R*lt+U*In+V*ti,b[1]=$*Qe+Z*Re+ee*bt+te*Gt,b[5]=$*je+Z*qe+ee*kt+te*bn,b[9]=$*Ye+Z*At+ee*tn+te*wn,b[13]=$*Pe+Z*lt+ee*In+te*ti,b[2]=ae*Qe+he*Re+oe*bt+ne*Gt,b[6]=ae*je+he*qe+oe*kt+ne*bn,b[10]=ae*Ye+he*At+oe*tn+ne*wn,b[14]=ae*Pe+he*lt+oe*In+ne*ti,b[3]=Ie*Qe+Ce*Re+Me*bt+Je*Gt,b[7]=Ie*je+Ce*qe+Me*kt+Je*bn,b[11]=Ie*Ye+Ce*At+Me*tn+Je*wn,b[15]=Ie*Pe+Ce*lt+Me*In+Je*ti,this}multiplyScalar(n){const s=this.elements;return s[0]*=n,s[4]*=n,s[8]*=n,s[12]*=n,s[1]*=n,s[5]*=n,s[9]*=n,s[13]*=n,s[2]*=n,s[6]*=n,s[10]*=n,s[14]*=n,s[3]*=n,s[7]*=n,s[11]*=n,s[15]*=n,this}determinant(){const n=this.elements,s=n[0],l=n[4],f=n[8],b=n[12],I=n[1],R=n[5],U=n[9],V=n[13],$=n[2],Z=n[6],ee=n[10],te=n[14],ae=n[3],he=n[7],oe=n[11],ne=n[15];return ae*(+b*U*Z-f*V*Z-b*R*ee+l*V*ee+f*R*te-l*U*te)+he*(+s*U*te-s*V*ee+b*I*ee-f*I*te+f*V*$-b*U*$)+oe*(+s*V*Z-s*R*te-b*I*Z+l*I*te+b*R*$-l*V*$)+ne*(-f*R*$-s*U*Z+s*R*ee+f*I*Z-l*I*ee+l*U*$)}transpose(){const n=this.elements;let s;return s=n[1],n[1]=n[4],n[4]=s,s=n[2],n[2]=n[8],n[8]=s,s=n[6],n[6]=n[9],n[9]=s,s=n[3],n[3]=n[12],n[12]=s,s=n[7],n[7]=n[13],n[13]=s,s=n[11],n[11]=n[14],n[14]=s,this}setPosition(n,s,l){const f=this.elements;return n.isVector3?(f[12]=n.x,f[13]=n.y,f[14]=n.z):(f[12]=n,f[13]=s,f[14]=l),this}invert(){const n=this.elements,s=n[0],l=n[1],f=n[2],b=n[3],I=n[4],R=n[5],U=n[6],V=n[7],$=n[8],Z=n[9],ee=n[10],te=n[11],ae=n[12],he=n[13],oe=n[14],ne=n[15],Ie=Z*oe*V-he*ee*V+he*U*te-R*oe*te-Z*U*ne+R*ee*ne,Ce=ae*ee*V-$*oe*V-ae*U*te+I*oe*te+$*U*ne-I*ee*ne,Me=$*he*V-ae*Z*V+ae*R*te-I*he*te-$*R*ne+I*Z*ne,Je=ae*Z*U-$*he*U-ae*R*ee+I*he*ee+$*R*oe-I*Z*oe,Qe=s*Ie+l*Ce+f*Me+b*Je;if(Qe===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const je=1/Qe;return n[0]=Ie*je,n[1]=(he*ee*b-Z*oe*b-he*f*te+l*oe*te+Z*f*ne-l*ee*ne)*je,n[2]=(R*oe*b-he*U*b+he*f*V-l*oe*V-R*f*ne+l*U*ne)*je,n[3]=(Z*U*b-R*ee*b-Z*f*V+l*ee*V+R*f*te-l*U*te)*je,n[4]=Ce*je,n[5]=($*oe*b-ae*ee*b+ae*f*te-s*oe*te-$*f*ne+s*ee*ne)*je,n[6]=(ae*U*b-I*oe*b-ae*f*V+s*oe*V+I*f*ne-s*U*ne)*je,n[7]=(I*ee*b-$*U*b+$*f*V-s*ee*V-I*f*te+s*U*te)*je,n[8]=Me*je,n[9]=(ae*Z*b-$*he*b-ae*l*te+s*he*te+$*l*ne-s*Z*ne)*je,n[10]=(I*he*b-ae*R*b+ae*l*V-s*he*V-I*l*ne+s*R*ne)*je,n[11]=($*R*b-I*Z*b-$*l*V+s*Z*V+I*l*te-s*R*te)*je,n[12]=Je*je,n[13]=($*he*f-ae*Z*f+ae*l*ee-s*he*ee-$*l*oe+s*Z*oe)*je,n[14]=(ae*R*f-I*he*f-ae*l*U+s*he*U+I*l*oe-s*R*oe)*je,n[15]=(I*Z*f-$*R*f+$*l*U-s*Z*U-I*l*ee+s*R*ee)*je,this}scale(n){const s=this.elements,l=n.x,f=n.y,b=n.z;return s[0]*=l,s[4]*=f,s[8]*=b,s[1]*=l,s[5]*=f,s[9]*=b,s[2]*=l,s[6]*=f,s[10]*=b,s[3]*=l,s[7]*=f,s[11]*=b,this}getMaxScaleOnAxis(){const n=this.elements,s=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],l=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],f=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(s,l,f))}makeTranslation(n,s,l){return n.isVector3?this.set(1,0,0,n.x,0,1,0,n.y,0,0,1,n.z,0,0,0,1):this.set(1,0,0,n,0,1,0,s,0,0,1,l,0,0,0,1),this}makeRotationX(n){const s=Math.cos(n),l=Math.sin(n);return this.set(1,0,0,0,0,s,-l,0,0,l,s,0,0,0,0,1),this}makeRotationY(n){const s=Math.cos(n),l=Math.sin(n);return this.set(s,0,l,0,0,1,0,0,-l,0,s,0,0,0,0,1),this}makeRotationZ(n){const s=Math.cos(n),l=Math.sin(n);return this.set(s,-l,0,0,l,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(n,s){const l=Math.cos(s),f=Math.sin(s),b=1-l,I=n.x,R=n.y,U=n.z,V=b*I,$=b*R;return this.set(V*I+l,V*R-f*U,V*U+f*R,0,V*R+f*U,$*R+l,$*U-f*I,0,V*U-f*R,$*U+f*I,b*U*U+l,0,0,0,0,1),this}makeScale(n,s,l){return this.set(n,0,0,0,0,s,0,0,0,0,l,0,0,0,0,1),this}makeShear(n,s,l,f,b,I){return this.set(1,l,b,0,n,1,I,0,s,f,1,0,0,0,0,1),this}compose(n,s,l){const f=this.elements,b=s._x,I=s._y,R=s._z,U=s._w,V=b+b,$=I+I,Z=R+R,ee=b*V,te=b*$,ae=b*Z,he=I*$,oe=I*Z,ne=R*Z,Ie=U*V,Ce=U*$,Me=U*Z,Je=l.x,Qe=l.y,je=l.z;return f[0]=(1-(he+ne))*Je,f[1]=(te+Me)*Je,f[2]=(ae-Ce)*Je,f[3]=0,f[4]=(te-Me)*Qe,f[5]=(1-(ee+ne))*Qe,f[6]=(oe+Ie)*Qe,f[7]=0,f[8]=(ae+Ce)*je,f[9]=(oe-Ie)*je,f[10]=(1-(ee+he))*je,f[11]=0,f[12]=n.x,f[13]=n.y,f[14]=n.z,f[15]=1,this}decompose(n,s,l){const f=this.elements;let b=Hl.set(f[0],f[1],f[2]).length();const I=Hl.set(f[4],f[5],f[6]).length(),R=Hl.set(f[8],f[9],f[10]).length();this.determinant()<0&&(b=-b),n.x=f[12],n.y=f[13],n.z=f[14],Qa.copy(this);const V=1/b,$=1/I,Z=1/R;return Qa.elements[0]*=V,Qa.elements[1]*=V,Qa.elements[2]*=V,Qa.elements[4]*=$,Qa.elements[5]*=$,Qa.elements[6]*=$,Qa.elements[8]*=Z,Qa.elements[9]*=Z,Qa.elements[10]*=Z,s.setFromRotationMatrix(Qa),l.x=b,l.y=I,l.z=R,this}makePerspective(n,s,l,f,b,I,R=bo){const U=this.elements,V=2*b/(s-n),$=2*b/(l-f),Z=(s+n)/(s-n),ee=(l+f)/(l-f);let te,ae;if(R===bo)te=-(I+b)/(I-b),ae=-2*I*b/(I-b);else if(R===_u)te=-I/(I-b),ae=-I*b/(I-b);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+R);return U[0]=V,U[4]=0,U[8]=Z,U[12]=0,U[1]=0,U[5]=$,U[9]=ee,U[13]=0,U[2]=0,U[6]=0,U[10]=te,U[14]=ae,U[3]=0,U[7]=0,U[11]=-1,U[15]=0,this}makeOrthographic(n,s,l,f,b,I,R=bo){const U=this.elements,V=1/(s-n),$=1/(l-f),Z=1/(I-b),ee=(s+n)*V,te=(l+f)*$;let ae,he;if(R===bo)ae=(I+b)*Z,he=-2*Z;else if(R===_u)ae=b*Z,he=-1*Z;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+R);return U[0]=2*V,U[4]=0,U[8]=0,U[12]=-ee,U[1]=0,U[5]=2*$,U[9]=0,U[13]=-te,U[2]=0,U[6]=0,U[10]=he,U[14]=-ae,U[3]=0,U[7]=0,U[11]=0,U[15]=1,this}equals(n){const s=this.elements,l=n.elements;for(let f=0;f<16;f++)if(s[f]!==l[f])return!1;return!0}fromArray(n,s=0){for(let l=0;l<16;l++)this.elements[l]=n[l+s];return this}toArray(n=[],s=0){const l=this.elements;return n[s]=l[0],n[s+1]=l[1],n[s+2]=l[2],n[s+3]=l[3],n[s+4]=l[4],n[s+5]=l[5],n[s+6]=l[6],n[s+7]=l[7],n[s+8]=l[8],n[s+9]=l[9],n[s+10]=l[10],n[s+11]=l[11],n[s+12]=l[12],n[s+13]=l[13],n[s+14]=l[14],n[s+15]=l[15],n}}const Hl=new Ve,Qa=new ii,GD=new Ve(0,0,0),VD=new Ve(1,1,1),Ic=new Ve,Am=new Ve,so=new Ve,l5=new ii,c5=new _r;class ao{constructor(n=0,s=0,l=0,f=ao.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=s,this._z=l,this._order=f}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,s,l,f=this._order){return this._x=n,this._y=s,this._z=l,this._order=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,s=this._order,l=!0){const f=n.elements,b=f[0],I=f[4],R=f[8],U=f[1],V=f[5],$=f[9],Z=f[2],ee=f[6],te=f[10];switch(s){case"XYZ":this._y=Math.asin(hs(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(-$,te),this._z=Math.atan2(-I,b)):(this._x=Math.atan2(ee,V),this._z=0);break;case"YXZ":this._x=Math.asin(-hs($,-1,1)),Math.abs($)<.9999999?(this._y=Math.atan2(R,te),this._z=Math.atan2(U,V)):(this._y=Math.atan2(-Z,b),this._z=0);break;case"ZXY":this._x=Math.asin(hs(ee,-1,1)),Math.abs(ee)<.9999999?(this._y=Math.atan2(-Z,te),this._z=Math.atan2(-I,V)):(this._y=0,this._z=Math.atan2(U,b));break;case"ZYX":this._y=Math.asin(-hs(Z,-1,1)),Math.abs(Z)<.9999999?(this._x=Math.atan2(ee,te),this._z=Math.atan2(U,b)):(this._x=0,this._z=Math.atan2(-I,V));break;case"YZX":this._z=Math.asin(hs(U,-1,1)),Math.abs(U)<.9999999?(this._x=Math.atan2(-$,V),this._y=Math.atan2(-Z,b)):(this._x=0,this._y=Math.atan2(R,te));break;case"XZY":this._z=Math.asin(-hs(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(ee,V),this._y=Math.atan2(R,b)):(this._x=Math.atan2(-$,te),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,l===!0&&this._onChangeCallback(),this}setFromQuaternion(n,s,l){return l5.makeRotationFromQuaternion(n),this.setFromRotationMatrix(l5,s,l)}setFromVector3(n,s=this._order){return this.set(n.x,n.y,n.z,s)}reorder(n){return c5.setFromEuler(this),this.setFromQuaternion(c5,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],n[3]!==void 0&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],s=0){return n[s]=this._x,n[s+1]=this._y,n[s+2]=this._z,n[s+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ao.DEFAULT_ORDER="XYZ";class vm{constructor(){this.mask=1}set(n){this.mask=(1<<n|0)>>>0}enable(n){this.mask|=1<<n|0}enableAll(){this.mask=-1}toggle(n){this.mask^=1<<n|0}disable(n){this.mask&=~(1<<n|0)}disableAll(){this.mask=0}test(n){return(this.mask&n.mask)!==0}isEnabled(n){return(this.mask&(1<<n|0))!==0}}let QD=0;const u5=new Ve,N0=new _r,zl=new ii,ym=new Ve,Sd=new Ve,HD=new Ve,zD=new _r,h5=new Ve(1,0,0),d5=new Ve(0,1,0),f5=new Ve(0,0,1),m5={type:"added"},WD={type:"removed"},F0={type:"childadded",child:null},h2={type:"childremoved",child:null};class Cr extends xa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:QD++}),this.uuid=Sa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cr.DEFAULT_UP.clone();const n=new Ve,s=new ao,l=new _r,f=new Ve(1,1,1);function b(){l.setFromEuler(s,!1)}function I(){s.setFromQuaternion(l,void 0,!1)}s._onChange(b),l._onChange(I),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:s},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:f},modelViewMatrix:{value:new ii},normalMatrix:{value:new Bi}}),this.matrix=new ii,this.matrixWorld=new ii,this.matrixAutoUpdate=Cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new vm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,s){this.quaternion.setFromAxisAngle(n,s)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,s){return N0.setFromAxisAngle(n,s),this.quaternion.multiply(N0),this}rotateOnWorldAxis(n,s){return N0.setFromAxisAngle(n,s),this.quaternion.premultiply(N0),this}rotateX(n){return this.rotateOnAxis(h5,n)}rotateY(n){return this.rotateOnAxis(d5,n)}rotateZ(n){return this.rotateOnAxis(f5,n)}translateOnAxis(n,s){return u5.copy(n).applyQuaternion(this.quaternion),this.position.add(u5.multiplyScalar(s)),this}translateX(n){return this.translateOnAxis(h5,n)}translateY(n){return this.translateOnAxis(d5,n)}translateZ(n){return this.translateOnAxis(f5,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(zl.copy(this.matrixWorld).invert())}lookAt(n,s,l){n.isVector3?ym.copy(n):ym.set(n,s,l);const f=this.parent;this.updateWorldMatrix(!0,!1),Sd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zl.lookAt(Sd,ym,this.up):zl.lookAt(ym,Sd,this.up),this.quaternion.setFromRotationMatrix(zl),f&&(zl.extractRotation(f.matrixWorld),N0.setFromRotationMatrix(zl),this.quaternion.premultiply(N0.invert()))}add(n){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(m5),F0.child=n,this.dispatchEvent(F0),F0.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}const s=this.children.indexOf(n);return s!==-1&&(n.parent=null,this.children.splice(s,1),n.dispatchEvent(WD),h2.child=n,this.dispatchEvent(h2),h2.child=null),this}removeFromParent(){const n=this.parent;return n!==null&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),zl.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),zl.multiply(n.parent.matrixWorld)),n.applyMatrix4(zl),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(m5),F0.child=n,this.dispatchEvent(F0),F0.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,s){if(this[n]===s)return this;for(let l=0,f=this.children.length;l<f;l++){const I=this.children[l].getObjectByProperty(n,s);if(I!==void 0)return I}}getObjectsByProperty(n,s,l=[]){this[n]===s&&l.push(this);const f=this.children;for(let b=0,I=f.length;b<I;b++)f[b].getObjectsByProperty(n,s,l);return l}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sd,n,HD),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sd,zD,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const s=this.matrixWorld.elements;return n.set(s[8],s[9],s[10]).normalize()}raycast(){}traverse(n){n(this);const s=this.children;for(let l=0,f=s.length;l<f;l++)s[l].traverse(n)}traverseVisible(n){if(this.visible===!1)return;n(this);const s=this.children;for(let l=0,f=s.length;l<f;l++)s[l].traverseVisible(n)}traverseAncestors(n){const s=this.parent;s!==null&&(n(s),s.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);const s=this.children;for(let l=0,f=s.length;l<f;l++){const b=s[l];(b.matrixWorldAutoUpdate===!0||n===!0)&&b.updateMatrixWorld(n)}}updateWorldMatrix(n,s){const l=this.parent;if(n===!0&&l!==null&&l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),s===!0){const f=this.children;for(let b=0,I=f.length;b<I;b++){const R=f[b];R.matrixWorldAutoUpdate===!0&&R.updateWorldMatrix(!1,!0)}}}toJSON(n){const s=n===void 0||typeof n=="string",l={};s&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},l.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const f={};f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.castShadow===!0&&(f.castShadow=!0),this.receiveShadow===!0&&(f.receiveShadow=!0),this.visible===!1&&(f.visible=!1),this.frustumCulled===!1&&(f.frustumCulled=!1),this.renderOrder!==0&&(f.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(f.userData=this.userData),f.layers=this.layers.mask,f.matrix=this.matrix.toArray(),f.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(f.matrixAutoUpdate=!1),this.isInstancedMesh&&(f.type="InstancedMesh",f.count=this.count,f.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(f.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(f.type="BatchedMesh",f.perObjectFrustumCulled=this.perObjectFrustumCulled,f.sortObjects=this.sortObjects,f.drawRanges=this._drawRanges,f.reservedRanges=this._reservedRanges,f.visibility=this._visibility,f.active=this._active,f.bounds=this._bounds.map(R=>({boxInitialized:R.boxInitialized,boxMin:R.box.min.toArray(),boxMax:R.box.max.toArray(),sphereInitialized:R.sphereInitialized,sphereRadius:R.sphere.radius,sphereCenter:R.sphere.center.toArray()})),f.maxGeometryCount=this._maxGeometryCount,f.maxVertexCount=this._maxVertexCount,f.maxIndexCount=this._maxIndexCount,f.geometryInitialized=this._geometryInitialized,f.geometryCount=this._geometryCount,f.matricesTexture=this._matricesTexture.toJSON(n),this.boundingSphere!==null&&(f.boundingSphere={center:f.boundingSphere.center.toArray(),radius:f.boundingSphere.radius}),this.boundingBox!==null&&(f.boundingBox={min:f.boundingBox.min.toArray(),max:f.boundingBox.max.toArray()}));function b(R,U){return R[U.uuid]===void 0&&(R[U.uuid]=U.toJSON(n)),U.uuid}if(this.isScene)this.background&&(this.background.isColor?f.background=this.background.toJSON():this.background.isTexture&&(f.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(f.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){f.geometry=b(n.geometries,this.geometry);const R=this.geometry.parameters;if(R!==void 0&&R.shapes!==void 0){const U=R.shapes;if(Array.isArray(U))for(let V=0,$=U.length;V<$;V++){const Z=U[V];b(n.shapes,Z)}else b(n.shapes,U)}}if(this.isSkinnedMesh&&(f.bindMode=this.bindMode,f.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(b(n.skeletons,this.skeleton),f.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const R=[];for(let U=0,V=this.material.length;U<V;U++)R.push(b(n.materials,this.material[U]));f.material=R}else f.material=b(n.materials,this.material);if(this.children.length>0){f.children=[];for(let R=0;R<this.children.length;R++)f.children.push(this.children[R].toJSON(n).object)}if(this.animations.length>0){f.animations=[];for(let R=0;R<this.animations.length;R++){const U=this.animations[R];f.animations.push(b(n.animations,U))}}if(s){const R=I(n.geometries),U=I(n.materials),V=I(n.textures),$=I(n.images),Z=I(n.shapes),ee=I(n.skeletons),te=I(n.animations),ae=I(n.nodes);R.length>0&&(l.geometries=R),U.length>0&&(l.materials=U),V.length>0&&(l.textures=V),$.length>0&&(l.images=$),Z.length>0&&(l.shapes=Z),ee.length>0&&(l.skeletons=ee),te.length>0&&(l.animations=te),ae.length>0&&(l.nodes=ae)}return l.object=f,l;function I(R){const U=[];for(const V in R){const $=R[V];delete $.metadata,U.push($)}return U}}clone(n){return new this.constructor().copy(this,n)}copy(n,s=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),s===!0)for(let l=0;l<n.children.length;l++){const f=n.children[l];this.add(f.clone())}return this}}Cr.DEFAULT_UP=new Ve(0,1,0),Cr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Go=new Ve,Wl=new Ve,d2=new Ve,jl=new Ve,k0=new Ve,U0=new Ve,p5=new Ve,f2=new Ve,m2=new Ve,p2=new Ve;class oo{constructor(n=new Ve,s=new Ve,l=new Ve){this.a=n,this.b=s,this.c=l}static getNormal(n,s,l,f){f.subVectors(l,s),Go.subVectors(n,s),f.cross(Go);const b=f.lengthSq();return b>0?f.multiplyScalar(1/Math.sqrt(b)):f.set(0,0,0)}static getBarycoord(n,s,l,f,b){Go.subVectors(f,s),Wl.subVectors(l,s),d2.subVectors(n,s);const I=Go.dot(Go),R=Go.dot(Wl),U=Go.dot(d2),V=Wl.dot(Wl),$=Wl.dot(d2),Z=I*V-R*R;if(Z===0)return b.set(0,0,0),null;const ee=1/Z,te=(V*U-R*$)*ee,ae=(I*$-R*U)*ee;return b.set(1-te-ae,ae,te)}static containsPoint(n,s,l,f){return this.getBarycoord(n,s,l,f,jl)===null?!1:jl.x>=0&&jl.y>=0&&jl.x+jl.y<=1}static getInterpolation(n,s,l,f,b,I,R,U){return this.getBarycoord(n,s,l,f,jl)===null?(U.x=0,U.y=0,"z"in U&&(U.z=0),"w"in U&&(U.w=0),null):(U.setScalar(0),U.addScaledVector(b,jl.x),U.addScaledVector(I,jl.y),U.addScaledVector(R,jl.z),U)}static isFrontFacing(n,s,l,f){return Go.subVectors(l,s),Wl.subVectors(n,s),Go.cross(Wl).dot(f)<0}set(n,s,l){return this.a.copy(n),this.b.copy(s),this.c.copy(l),this}setFromPointsAndIndices(n,s,l,f){return this.a.copy(n[s]),this.b.copy(n[l]),this.c.copy(n[f]),this}setFromAttributeAndIndices(n,s,l,f){return this.a.fromBufferAttribute(n,s),this.b.fromBufferAttribute(n,l),this.c.fromBufferAttribute(n,f),this}clone(){return new this.constructor().copy(this)}copy(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}getArea(){return Go.subVectors(this.c,this.b),Wl.subVectors(this.a,this.b),Go.cross(Wl).length()*.5}getMidpoint(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(.3333333333333333)}getNormal(n){return oo.getNormal(this.a,this.b,this.c,n)}getPlane(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(n,s){return oo.getBarycoord(n,this.a,this.b,this.c,s)}getInterpolation(n,s,l,f,b){return oo.getInterpolation(n,this.a,this.b,this.c,s,l,f,b)}containsPoint(n){return oo.containsPoint(n,this.a,this.b,this.c)}isFrontFacing(n){return oo.isFrontFacing(this.a,this.b,this.c,n)}intersectsBox(n){return n.intersectsTriangle(this)}closestPointToPoint(n,s){const l=this.a,f=this.b,b=this.c;let I,R;k0.subVectors(f,l),U0.subVectors(b,l),f2.subVectors(n,l);const U=k0.dot(f2),V=U0.dot(f2);if(U<=0&&V<=0)return s.copy(l);m2.subVectors(n,f);const $=k0.dot(m2),Z=U0.dot(m2);if($>=0&&Z<=$)return s.copy(f);const ee=U*Z-$*V;if(ee<=0&&U>=0&&$<=0)return I=U/(U-$),s.copy(l).addScaledVector(k0,I);p2.subVectors(n,b);const te=k0.dot(p2),ae=U0.dot(p2);if(ae>=0&&te<=ae)return s.copy(b);const he=te*V-U*ae;if(he<=0&&V>=0&&ae<=0)return R=V/(V-ae),s.copy(l).addScaledVector(U0,R);const oe=$*ae-te*Z;if(oe<=0&&Z-$>=0&&te-ae>=0)return p5.subVectors(b,f),R=(Z-$)/(Z-$+(te-ae)),s.copy(f).addScaledVector(p5,R);const ne=1/(oe+he+ee);return I=he*ne,R=ee*ne,s.copy(l).addScaledVector(k0,I).addScaledVector(U0,R)}equals(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}const g5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Tc={h:0,s:0,l:0},bm={h:0,s:0,l:0};function g2(M,n,s){return s<0&&(s+=1),s>1&&(s-=1),s<.16666666666666666?M+(n-M)*6*s:s<.5?n:s<.6666666666666666?M+(n-M)*6*(.6666666666666666-s):M}class Kn{constructor(n,s,l){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(n,s,l)}set(n,s,l){if(s===void 0&&l===void 0){const f=n;f&&f.isColor?this.copy(f):typeof f=="number"?this.setHex(f):typeof f=="string"&&this.setStyle(f)}else this.setRGB(n,s,l);return this}setScalar(n){return this.r=n,this.g=n,this.b=n,this}setHex(n,s=gr){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(n&255)/255,Or.toWorkingColorSpace(this,s),this}setRGB(n,s,l,f=Or.workingColorSpace){return this.r=n,this.g=s,this.b=l,Or.toWorkingColorSpace(this,f),this}setHSL(n,s,l,f=Or.workingColorSpace){if(n=_d(n,1),s=hs(s,0,1),l=hs(l,0,1),s===0)this.r=this.g=this.b=l;else{const b=l<=.5?l*(1+s):l+s-l*s,I=2*l-b;this.r=g2(I,b,n+.3333333333333333),this.g=g2(I,b,n),this.b=g2(I,b,n-.3333333333333333)}return Or.toWorkingColorSpace(this,f),this}setStyle(n,s=gr){function l(b){b!==void 0&&parseFloat(b)<1&&console.warn("THREE.Color: Alpha component of "+n+" will be ignored.")}let f;if(f=/^(\w+)\(([^\)]*)\)/.exec(n)){let b;const I=f[1],R=f[2];switch(I){case"rgb":case"rgba":if(b=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(R))return l(b[4]),this.setRGB(Math.min(255,parseInt(b[1],10))/255,Math.min(255,parseInt(b[2],10))/255,Math.min(255,parseInt(b[3],10))/255,s);if(b=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(R))return l(b[4]),this.setRGB(Math.min(100,parseInt(b[1],10))/100,Math.min(100,parseInt(b[2],10))/100,Math.min(100,parseInt(b[3],10))/100,s);break;case"hsl":case"hsla":if(b=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(R))return l(b[4]),this.setHSL(parseFloat(b[1])/360,parseFloat(b[2])/100,parseFloat(b[3])/100,s);break;default:console.warn("THREE.Color: Unknown color model "+n)}}else if(f=/^\#([A-Fa-f\d]+)$/.exec(n)){const b=f[1],I=b.length;if(I===3)return this.setRGB(parseInt(b.charAt(0),16)/15,parseInt(b.charAt(1),16)/15,parseInt(b.charAt(2),16)/15,s);if(I===6)return this.setHex(parseInt(b,16),s);console.warn("THREE.Color: Invalid hex color "+n)}else if(n&&n.length>0)return this.setColorName(n,s);return this}setColorName(n,s=gr){const l=g5[n.toLowerCase()];return l!==void 0?this.setHex(l,s):console.warn("THREE.Color: Unknown color "+n),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(n){return this.r=n.r,this.g=n.g,this.b=n.b,this}copySRGBToLinear(n){return this.r=wc(n.r),this.g=wc(n.g),this.b=wc(n.b),this}copyLinearToSRGB(n){return this.r=Ed(n.r),this.g=Ed(n.g),this.b=Ed(n.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(n=gr){return Or.fromWorkingColorSpace(Aa.copy(this),n),Math.round(hs(Aa.r*255,0,255))*65536+Math.round(hs(Aa.g*255,0,255))*256+Math.round(hs(Aa.b*255,0,255))}getHexString(n=gr){return("000000"+this.getHex(n).toString(16)).slice(-6)}getHSL(n,s=Or.workingColorSpace){Or.fromWorkingColorSpace(Aa.copy(this),s);const l=Aa.r,f=Aa.g,b=Aa.b,I=Math.max(l,f,b),R=Math.min(l,f,b);let U,V;const $=(R+I)/2;if(R===I)U=0,V=0;else{const Z=I-R;switch(V=$<=.5?Z/(I+R):Z/(2-I-R),I){case l:U=(f-b)/Z+(f<b?6:0);break;case f:U=(b-l)/Z+2;break;case b:U=(l-f)/Z+4;break}U/=6}return n.h=U,n.s=V,n.l=$,n}getRGB(n,s=Or.workingColorSpace){return Or.fromWorkingColorSpace(Aa.copy(this),s),n.r=Aa.r,n.g=Aa.g,n.b=Aa.b,n}getStyle(n=gr){Or.fromWorkingColorSpace(Aa.copy(this),n);const s=Aa.r,l=Aa.g,f=Aa.b;return n!==gr?`color(${n} ${s.toFixed(3)} ${l.toFixed(3)} ${f.toFixed(3)})`:`rgb(${Math.round(s*255)},${Math.round(l*255)},${Math.round(f*255)})`}offsetHSL(n,s,l){return this.getHSL(Tc),this.setHSL(Tc.h+n,Tc.s+s,Tc.l+l)}add(n){return this.r+=n.r,this.g+=n.g,this.b+=n.b,this}addColors(n,s){return this.r=n.r+s.r,this.g=n.g+s.g,this.b=n.b+s.b,this}addScalar(n){return this.r+=n,this.g+=n,this.b+=n,this}sub(n){return this.r=Math.max(0,this.r-n.r),this.g=Math.max(0,this.g-n.g),this.b=Math.max(0,this.b-n.b),this}multiply(n){return this.r*=n.r,this.g*=n.g,this.b*=n.b,this}multiplyScalar(n){return this.r*=n,this.g*=n,this.b*=n,this}lerp(n,s){return this.r+=(n.r-this.r)*s,this.g+=(n.g-this.g)*s,this.b+=(n.b-this.b)*s,this}lerpColors(n,s,l){return this.r=n.r+(s.r-n.r)*l,this.g=n.g+(s.g-n.g)*l,this.b=n.b+(s.b-n.b)*l,this}lerpHSL(n,s){this.getHSL(Tc),n.getHSL(bm);const l=Cu(Tc.h,bm.h,s),f=Cu(Tc.s,bm.s,s),b=Cu(Tc.l,bm.l,s);return this.setHSL(l,f,b),this}setFromVector3(n){return this.r=n.x,this.g=n.y,this.b=n.z,this}applyMatrix3(n){const s=this.r,l=this.g,f=this.b,b=n.elements;return this.r=b[0]*s+b[3]*l+b[6]*f,this.g=b[1]*s+b[4]*l+b[7]*f,this.b=b[2]*s+b[5]*l+b[8]*f,this}equals(n){return n.r===this.r&&n.g===this.g&&n.b===this.b}fromArray(n,s=0){return this.r=n[s],this.g=n[s+1],this.b=n[s+2],this}toArray(n=[],s=0){return n[s]=this.r,n[s+1]=this.g,n[s+2]=this.b,n}fromBufferAttribute(n,s){return this.r=n.getX(s),this.g=n.getY(s),this.b=n.getZ(s),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Aa=new Kn;Kn.NAMES=g5;let jD=0;class va extends xa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jD++}),this.uuid=Sa(),this.name="",this.type="Material",this.blending=P,this.side=w,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=se,this.blendDst=ge,this.blendEquation=G,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Kn(0,0,0),this.blendAlpha=0,this.depthFunc=dt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=yd,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ul,this.stencilZFail=Ul,this.stencilZPass=Ul,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(n){this._alphaTest>0!=n>0&&this.version++,this._alphaTest=n}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(n){if(n!==void 0)for(const s in n){const l=n[s];if(l===void 0){console.warn(`THREE.Material: parameter '${s}' has value of undefined.`);continue}const f=this[s];if(f===void 0){console.warn(`THREE.Material: '${s}' is not a property of THREE.${this.type}.`);continue}f&&f.isColor?f.set(l):f&&f.isVector3&&l&&l.isVector3?f.copy(l):this[s]=l}}toJSON(n){const s=n===void 0||typeof n=="string";s&&(n={textures:{},images:{}});const l={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};l.uuid=this.uuid,l.type=this.type,this.name!==""&&(l.name=this.name),this.color&&this.color.isColor&&(l.color=this.color.getHex()),this.roughness!==void 0&&(l.roughness=this.roughness),this.metalness!==void 0&&(l.metalness=this.metalness),this.sheen!==void 0&&(l.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(l.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(l.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(l.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(l.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(l.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(l.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(l.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(l.shininess=this.shininess),this.clearcoat!==void 0&&(l.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(l.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(l.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(l.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(l.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,l.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(l.dispersion=this.dispersion),this.iridescence!==void 0&&(l.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(l.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(l.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(l.iridescenceMap=this.iridescenceMap.toJSON(n).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(l.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(n).uuid),this.anisotropy!==void 0&&(l.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(l.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(l.anisotropyMap=this.anisotropyMap.toJSON(n).uuid),this.map&&this.map.isTexture&&(l.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(l.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(l.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(l.lightMap=this.lightMap.toJSON(n).uuid,l.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(l.aoMap=this.aoMap.toJSON(n).uuid,l.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(l.bumpMap=this.bumpMap.toJSON(n).uuid,l.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(l.normalMap=this.normalMap.toJSON(n).uuid,l.normalMapType=this.normalMapType,l.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(l.displacementMap=this.displacementMap.toJSON(n).uuid,l.displacementScale=this.displacementScale,l.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(l.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(l.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(l.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(l.specularMap=this.specularMap.toJSON(n).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(l.specularIntensityMap=this.specularIntensityMap.toJSON(n).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(l.specularColorMap=this.specularColorMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(l.envMap=this.envMap.toJSON(n).uuid,this.combine!==void 0&&(l.combine=this.combine)),this.envMapRotation!==void 0&&(l.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(l.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(l.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(l.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(l.gradientMap=this.gradientMap.toJSON(n).uuid),this.transmission!==void 0&&(l.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(l.transmissionMap=this.transmissionMap.toJSON(n).uuid),this.thickness!==void 0&&(l.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(l.thicknessMap=this.thicknessMap.toJSON(n).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(l.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(l.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(l.size=this.size),this.shadowSide!==null&&(l.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(l.sizeAttenuation=this.sizeAttenuation),this.blending!==P&&(l.blending=this.blending),this.side!==w&&(l.side=this.side),this.vertexColors===!0&&(l.vertexColors=!0),this.opacity<1&&(l.opacity=this.opacity),this.transparent===!0&&(l.transparent=!0),this.blendSrc!==se&&(l.blendSrc=this.blendSrc),this.blendDst!==ge&&(l.blendDst=this.blendDst),this.blendEquation!==G&&(l.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(l.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(l.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(l.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(l.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(l.blendAlpha=this.blendAlpha),this.depthFunc!==dt&&(l.depthFunc=this.depthFunc),this.depthTest===!1&&(l.depthTest=this.depthTest),this.depthWrite===!1&&(l.depthWrite=this.depthWrite),this.colorWrite===!1&&(l.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(l.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==yd&&(l.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(l.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(l.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ul&&(l.stencilFail=this.stencilFail),this.stencilZFail!==Ul&&(l.stencilZFail=this.stencilZFail),this.stencilZPass!==Ul&&(l.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(l.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(l.rotation=this.rotation),this.polygonOffset===!0&&(l.polygonOffset=!0),this.polygonOffsetFactor!==0&&(l.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(l.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(l.linewidth=this.linewidth),this.dashSize!==void 0&&(l.dashSize=this.dashSize),this.gapSize!==void 0&&(l.gapSize=this.gapSize),this.scale!==void 0&&(l.scale=this.scale),this.dithering===!0&&(l.dithering=!0),this.alphaTest>0&&(l.alphaTest=this.alphaTest),this.alphaHash===!0&&(l.alphaHash=!0),this.alphaToCoverage===!0&&(l.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(l.premultipliedAlpha=!0),this.forceSinglePass===!0&&(l.forceSinglePass=!0),this.wireframe===!0&&(l.wireframe=!0),this.wireframeLinewidth>1&&(l.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(l.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(l.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(l.flatShading=!0),this.visible===!1&&(l.visible=!1),this.toneMapped===!1&&(l.toneMapped=!1),this.fog===!1&&(l.fog=!1),Object.keys(this.userData).length>0&&(l.userData=this.userData);function f(b){const I=[];for(const R in b){const U=b[R];delete U.metadata,I.push(U)}return I}if(s){const b=f(n.textures),I=f(n.images);b.length>0&&(l.textures=b),I.length>0&&(l.images=I)}return l}clone(){return new this.constructor().copy(this)}copy(n){this.name=n.name,this.blending=n.blending,this.side=n.side,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.blendColor.copy(n.blendColor),this.blendAlpha=n.blendAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const s=n.clippingPlanes;let l=null;if(s!==null){const f=s.length;l=new Array(f);for(let b=0;b!==f;++b)l[b]=s[b].clone()}return this.clippingPlanes=l,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.alphaHash=n.alphaHash,this.alphaToCoverage=n.alphaToCoverage,this.premultipliedAlpha=n.premultipliedAlpha,this.forceSinglePass=n.forceSinglePass,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(n){n===!0&&this.version++}}class Bc extends va{constructor(n){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Kn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=Et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}const $l=$D();function $D(){const M=new ArrayBuffer(4),n=new Float32Array(M),s=new Uint32Array(M),l=new Uint32Array(512),f=new Uint32Array(512);for(let U=0;U<256;++U){const V=U-127;V<-27?(l[U]=0,l[U|256]=32768,f[U]=24,f[U|256]=24):V<-14?(l[U]=1024>>-V-14,l[U|256]=1024>>-V-14|32768,f[U]=-V-1,f[U|256]=-V-1):V<=15?(l[U]=V+15<<10,l[U|256]=V+15<<10|32768,f[U]=13,f[U|256]=13):V<128?(l[U]=31744,l[U|256]=64512,f[U]=24,f[U|256]=24):(l[U]=31744,l[U|256]=64512,f[U]=13,f[U|256]=13)}const b=new Uint32Array(2048),I=new Uint32Array(64),R=new Uint32Array(64);for(let U=1;U<1024;++U){let V=U<<13,$=0;for(;!(V&8388608);)V<<=1,$-=8388608;V&=-8388609,$+=947912704,b[U]=V|$}for(let U=1024;U<2048;++U)b[U]=939524096+(U-1024<<13);for(let U=1;U<31;++U)I[U]=U<<23;I[31]=1199570944,I[32]=2147483648;for(let U=33;U<63;++U)I[U]=2147483648+(U-32<<23);I[63]=3347054592;for(let U=1;U<64;++U)U!==32&&(R[U]=1024);return{floatView:n,uint32View:s,baseTable:l,shiftTable:f,mantissaTable:b,exponentTable:I,offsetTable:R}}function Ha(M){Math.abs(M)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),M=hs(M,-65504,65504),$l.floatView[0]=M;const n=$l.uint32View[0],s=n>>23&511;return $l.baseTable[s]+((n&8388607)>>$l.shiftTable[s])}function Id(M){const n=M>>10;return $l.uint32View[0]=$l.mantissaTable[$l.offsetTable[n]+(M&1023)]+$l.exponentTable[n],$l.floatView[0]}const XD={toHalfFloat:Ha,fromHalfFloat:Id},Os=new Ve,Mm=new sn;class Gr{constructor(n,s,l=!1){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=n,this.itemSize=s,this.count=n!==void 0?n.length/s:0,this.normalized=l,this.usage=Mu,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Pr,this.version=0}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}get updateRange(){return dm("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(n){return this.usage=n,this}addUpdateRange(n,s){this.updateRanges.push({start:n,count:s})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this.gpuType=n.gpuType,this}copyAt(n,s,l){n*=this.itemSize,l*=s.itemSize;for(let f=0,b=this.itemSize;f<b;f++)this.array[n+f]=s.array[l+f];return this}copyArray(n){return this.array.set(n),this}applyMatrix3(n){if(this.itemSize===2)for(let s=0,l=this.count;s<l;s++)Mm.fromBufferAttribute(this,s),Mm.applyMatrix3(n),this.setXY(s,Mm.x,Mm.y);else if(this.itemSize===3)for(let s=0,l=this.count;s<l;s++)Os.fromBufferAttribute(this,s),Os.applyMatrix3(n),this.setXYZ(s,Os.x,Os.y,Os.z);return this}applyMatrix4(n){for(let s=0,l=this.count;s<l;s++)Os.fromBufferAttribute(this,s),Os.applyMatrix4(n),this.setXYZ(s,Os.x,Os.y,Os.z);return this}applyNormalMatrix(n){for(let s=0,l=this.count;s<l;s++)Os.fromBufferAttribute(this,s),Os.applyNormalMatrix(n),this.setXYZ(s,Os.x,Os.y,Os.z);return this}transformDirection(n){for(let s=0,l=this.count;s<l;s++)Os.fromBufferAttribute(this,s),Os.transformDirection(n),this.setXYZ(s,Os.x,Os.y,Os.z);return this}set(n,s=0){return this.array.set(n,s),this}getComponent(n,s){let l=this.array[n*this.itemSize+s];return this.normalized&&(l=ha(l,this.array)),l}setComponent(n,s,l){return this.normalized&&(l=Pi(l,this.array)),this.array[n*this.itemSize+s]=l,this}getX(n){let s=this.array[n*this.itemSize];return this.normalized&&(s=ha(s,this.array)),s}setX(n,s){return this.normalized&&(s=Pi(s,this.array)),this.array[n*this.itemSize]=s,this}getY(n){let s=this.array[n*this.itemSize+1];return this.normalized&&(s=ha(s,this.array)),s}setY(n,s){return this.normalized&&(s=Pi(s,this.array)),this.array[n*this.itemSize+1]=s,this}getZ(n){let s=this.array[n*this.itemSize+2];return this.normalized&&(s=ha(s,this.array)),s}setZ(n,s){return this.normalized&&(s=Pi(s,this.array)),this.array[n*this.itemSize+2]=s,this}getW(n){let s=this.array[n*this.itemSize+3];return this.normalized&&(s=ha(s,this.array)),s}setW(n,s){return this.normalized&&(s=Pi(s,this.array)),this.array[n*this.itemSize+3]=s,this}setXY(n,s,l){return n*=this.itemSize,this.normalized&&(s=Pi(s,this.array),l=Pi(l,this.array)),this.array[n+0]=s,this.array[n+1]=l,this}setXYZ(n,s,l,f){return n*=this.itemSize,this.normalized&&(s=Pi(s,this.array),l=Pi(l,this.array),f=Pi(f,this.array)),this.array[n+0]=s,this.array[n+1]=l,this.array[n+2]=f,this}setXYZW(n,s,l,f,b){return n*=this.itemSize,this.normalized&&(s=Pi(s,this.array),l=Pi(l,this.array),f=Pi(f,this.array),b=Pi(b,this.array)),this.array[n+0]=s,this.array[n+1]=l,this.array[n+2]=f,this.array[n+3]=b,this}onUpload(n){return this.onUploadCallback=n,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(n.name=this.name),this.usage!==Mu&&(n.usage=this.usage),n}}class KD extends Gr{constructor(n,s,l){super(new Int8Array(n),s,l)}}class YD extends Gr{constructor(n,s,l){super(new Uint8Array(n),s,l)}}class qD extends Gr{constructor(n,s,l){super(new Uint8ClampedArray(n),s,l)}}class JD extends Gr{constructor(n,s,l){super(new Int16Array(n),s,l)}}class A2 extends Gr{constructor(n,s,l){super(new Uint16Array(n),s,l)}}class ZD extends Gr{constructor(n,s,l){super(new Int32Array(n),s,l)}}class v2 extends Gr{constructor(n,s,l){super(new Uint32Array(n),s,l)}}class eL extends Gr{constructor(n,s,l){super(new Uint16Array(n),s,l),this.isFloat16BufferAttribute=!0}getX(n){let s=Id(this.array[n*this.itemSize]);return this.normalized&&(s=ha(s,this.array)),s}setX(n,s){return this.normalized&&(s=Pi(s,this.array)),this.array[n*this.itemSize]=Ha(s),this}getY(n){let s=Id(this.array[n*this.itemSize+1]);return this.normalized&&(s=ha(s,this.array)),s}setY(n,s){return this.normalized&&(s=Pi(s,this.array)),this.array[n*this.itemSize+1]=Ha(s),this}getZ(n){let s=Id(this.array[n*this.itemSize+2]);return this.normalized&&(s=ha(s,this.array)),s}setZ(n,s){return this.normalized&&(s=Pi(s,this.array)),this.array[n*this.itemSize+2]=Ha(s),this}getW(n){let s=Id(this.array[n*this.itemSize+3]);return this.normalized&&(s=ha(s,this.array)),s}setW(n,s){return this.normalized&&(s=Pi(s,this.array)),this.array[n*this.itemSize+3]=Ha(s),this}setXY(n,s,l){return n*=this.itemSize,this.normalized&&(s=Pi(s,this.array),l=Pi(l,this.array)),this.array[n+0]=Ha(s),this.array[n+1]=Ha(l),this}setXYZ(n,s,l,f){return n*=this.itemSize,this.normalized&&(s=Pi(s,this.array),l=Pi(l,this.array),f=Pi(f,this.array)),this.array[n+0]=Ha(s),this.array[n+1]=Ha(l),this.array[n+2]=Ha(f),this}setXYZW(n,s,l,f,b){return n*=this.itemSize,this.normalized&&(s=Pi(s,this.array),l=Pi(l,this.array),f=Pi(f,this.array),b=Pi(b,this.array)),this.array[n+0]=Ha(s),this.array[n+1]=Ha(l),this.array[n+2]=Ha(f),this.array[n+3]=Ha(b),this}}class ai extends Gr{constructor(n,s,l){super(new Float32Array(n),s,l)}}let tL=0;const _o=new ii,y2=new Cr,G0=new Ve,lo=new fs,Td=new fs,ta=new Ve;class Zi extends xa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tL++}),this.uuid=Sa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(n){return Array.isArray(n)?this.index=new(cm(n)?v2:A2)(n,1):this.index=n,this}getAttribute(n){return this.attributes[n]}setAttribute(n,s){return this.attributes[n]=s,this}deleteAttribute(n){return delete this.attributes[n],this}hasAttribute(n){return this.attributes[n]!==void 0}addGroup(n,s,l=0){this.groups.push({start:n,count:s,materialIndex:l})}clearGroups(){this.groups=[]}setDrawRange(n,s){this.drawRange.start=n,this.drawRange.count=s}applyMatrix4(n){const s=this.attributes.position;s!==void 0&&(s.applyMatrix4(n),s.needsUpdate=!0);const l=this.attributes.normal;if(l!==void 0){const b=new Bi().getNormalMatrix(n);l.applyNormalMatrix(b),l.needsUpdate=!0}const f=this.attributes.tangent;return f!==void 0&&(f.transformDirection(n),f.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(n){return _o.makeRotationFromQuaternion(n),this.applyMatrix4(_o),this}rotateX(n){return _o.makeRotationX(n),this.applyMatrix4(_o),this}rotateY(n){return _o.makeRotationY(n),this.applyMatrix4(_o),this}rotateZ(n){return _o.makeRotationZ(n),this.applyMatrix4(_o),this}translate(n,s,l){return _o.makeTranslation(n,s,l),this.applyMatrix4(_o),this}scale(n,s,l){return _o.makeScale(n,s,l),this.applyMatrix4(_o),this}lookAt(n){return y2.lookAt(n),y2.updateMatrix(),this.applyMatrix4(y2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(G0).negate(),this.translate(G0.x,G0.y,G0.z),this}setFromPoints(n){const s=[];for(let l=0,f=n.length;l<f;l++){const b=n[l];s.push(b.x,b.y,b.z||0)}return this.setAttribute("position",new ai(s,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fs);const n=this.attributes.position,s=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ve(-1/0,-1/0,-1/0),new Ve(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),s)for(let l=0,f=s.length;l<f;l++){const b=s[l];lo.setFromBufferAttribute(b),this.morphTargetsRelative?(ta.addVectors(this.boundingBox.min,lo.min),this.boundingBox.expandByPoint(ta),ta.addVectors(this.boundingBox.max,lo.max),this.boundingBox.expandByPoint(ta)):(this.boundingBox.expandByPoint(lo.min),this.boundingBox.expandByPoint(lo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Us);const n=this.attributes.position,s=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ve,1/0);return}if(n){const l=this.boundingSphere.center;if(lo.setFromBufferAttribute(n),s)for(let b=0,I=s.length;b<I;b++){const R=s[b];Td.setFromBufferAttribute(R),this.morphTargetsRelative?(ta.addVectors(lo.min,Td.min),lo.expandByPoint(ta),ta.addVectors(lo.max,Td.max),lo.expandByPoint(ta)):(lo.expandByPoint(Td.min),lo.expandByPoint(Td.max))}lo.getCenter(l);let f=0;for(let b=0,I=n.count;b<I;b++)ta.fromBufferAttribute(n,b),f=Math.max(f,l.distanceToSquared(ta));if(s)for(let b=0,I=s.length;b<I;b++){const R=s[b],U=this.morphTargetsRelative;for(let V=0,$=R.count;V<$;V++)ta.fromBufferAttribute(R,V),U&&(G0.fromBufferAttribute(n,V),ta.add(G0)),f=Math.max(f,l.distanceToSquared(ta))}this.boundingSphere.radius=Math.sqrt(f),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const n=this.index,s=this.attributes;if(n===null||s.position===void 0||s.normal===void 0||s.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const l=s.position,f=s.normal,b=s.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gr(new Float32Array(4*l.count),4));const I=this.getAttribute("tangent"),R=[],U=[];for(let Ye=0;Ye<l.count;Ye++)R[Ye]=new Ve,U[Ye]=new Ve;const V=new Ve,$=new Ve,Z=new Ve,ee=new sn,te=new sn,ae=new sn,he=new Ve,oe=new Ve;function ne(Ye,Pe,Re){V.fromBufferAttribute(l,Ye),$.fromBufferAttribute(l,Pe),Z.fromBufferAttribute(l,Re),ee.fromBufferAttribute(b,Ye),te.fromBufferAttribute(b,Pe),ae.fromBufferAttribute(b,Re),$.sub(V),Z.sub(V),te.sub(ee),ae.sub(ee);const qe=1/(te.x*ae.y-ae.x*te.y);isFinite(qe)&&(he.copy($).multiplyScalar(ae.y).addScaledVector(Z,-te.y).multiplyScalar(qe),oe.copy(Z).multiplyScalar(te.x).addScaledVector($,-ae.x).multiplyScalar(qe),R[Ye].add(he),R[Pe].add(he),R[Re].add(he),U[Ye].add(oe),U[Pe].add(oe),U[Re].add(oe))}let Ie=this.groups;Ie.length===0&&(Ie=[{start:0,count:n.count}]);for(let Ye=0,Pe=Ie.length;Ye<Pe;++Ye){const Re=Ie[Ye],qe=Re.start,At=Re.count;for(let lt=qe,bt=qe+At;lt<bt;lt+=3)ne(n.getX(lt+0),n.getX(lt+1),n.getX(lt+2))}const Ce=new Ve,Me=new Ve,Je=new Ve,Qe=new Ve;function je(Ye){Je.fromBufferAttribute(f,Ye),Qe.copy(Je);const Pe=R[Ye];Ce.copy(Pe),Ce.sub(Je.multiplyScalar(Je.dot(Pe))).normalize(),Me.crossVectors(Qe,Pe);const qe=Me.dot(U[Ye])<0?-1:1;I.setXYZW(Ye,Ce.x,Ce.y,Ce.z,qe)}for(let Ye=0,Pe=Ie.length;Ye<Pe;++Ye){const Re=Ie[Ye],qe=Re.start,At=Re.count;for(let lt=qe,bt=qe+At;lt<bt;lt+=3)je(n.getX(lt+0)),je(n.getX(lt+1)),je(n.getX(lt+2))}}computeVertexNormals(){const n=this.index,s=this.getAttribute("position");if(s!==void 0){let l=this.getAttribute("normal");if(l===void 0)l=new Gr(new Float32Array(s.count*3),3),this.setAttribute("normal",l);else for(let ee=0,te=l.count;ee<te;ee++)l.setXYZ(ee,0,0,0);const f=new Ve,b=new Ve,I=new Ve,R=new Ve,U=new Ve,V=new Ve,$=new Ve,Z=new Ve;if(n)for(let ee=0,te=n.count;ee<te;ee+=3){const ae=n.getX(ee+0),he=n.getX(ee+1),oe=n.getX(ee+2);f.fromBufferAttribute(s,ae),b.fromBufferAttribute(s,he),I.fromBufferAttribute(s,oe),$.subVectors(I,b),Z.subVectors(f,b),$.cross(Z),R.fromBufferAttribute(l,ae),U.fromBufferAttribute(l,he),V.fromBufferAttribute(l,oe),R.add($),U.add($),V.add($),l.setXYZ(ae,R.x,R.y,R.z),l.setXYZ(he,U.x,U.y,U.z),l.setXYZ(oe,V.x,V.y,V.z)}else for(let ee=0,te=s.count;ee<te;ee+=3)f.fromBufferAttribute(s,ee+0),b.fromBufferAttribute(s,ee+1),I.fromBufferAttribute(s,ee+2),$.subVectors(I,b),Z.subVectors(f,b),$.cross(Z),l.setXYZ(ee+0,$.x,$.y,$.z),l.setXYZ(ee+1,$.x,$.y,$.z),l.setXYZ(ee+2,$.x,$.y,$.z);this.normalizeNormals(),l.needsUpdate=!0}}normalizeNormals(){const n=this.attributes.normal;for(let s=0,l=n.count;s<l;s++)ta.fromBufferAttribute(n,s),ta.normalize(),n.setXYZ(s,ta.x,ta.y,ta.z)}toNonIndexed(){function n(R,U){const V=R.array,$=R.itemSize,Z=R.normalized,ee=new V.constructor(U.length*$);let te=0,ae=0;for(let he=0,oe=U.length;he<oe;he++){R.isInterleavedBufferAttribute?te=U[he]*R.data.stride+R.offset:te=U[he]*$;for(let ne=0;ne<$;ne++)ee[ae++]=V[te++]}return new Gr(ee,$,Z)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const s=new Zi,l=this.index.array,f=this.attributes;for(const R in f){const U=f[R],V=n(U,l);s.setAttribute(R,V)}const b=this.morphAttributes;for(const R in b){const U=[],V=b[R];for(let $=0,Z=V.length;$<Z;$++){const ee=V[$],te=n(ee,l);U.push(te)}s.morphAttributes[R]=U}s.morphTargetsRelative=this.morphTargetsRelative;const I=this.groups;for(let R=0,U=I.length;R<U;R++){const V=I[R];s.addGroup(V.start,V.count,V.materialIndex)}return s}toJSON(){const n={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const U=this.parameters;for(const V in U)U[V]!==void 0&&(n[V]=U[V]);return n}n.data={attributes:{}};const s=this.index;s!==null&&(n.data.index={type:s.array.constructor.name,array:Array.prototype.slice.call(s.array)});const l=this.attributes;for(const U in l){const V=l[U];n.data.attributes[U]=V.toJSON(n.data)}const f={};let b=!1;for(const U in this.morphAttributes){const V=this.morphAttributes[U],$=[];for(let Z=0,ee=V.length;Z<ee;Z++){const te=V[Z];$.push(te.toJSON(n.data))}$.length>0&&(f[U]=$,b=!0)}b&&(n.data.morphAttributes=f,n.data.morphTargetsRelative=this.morphTargetsRelative);const I=this.groups;I.length>0&&(n.data.groups=JSON.parse(JSON.stringify(I)));const R=this.boundingSphere;return R!==null&&(n.data.boundingSphere={center:R.center.toArray(),radius:R.radius}),n}clone(){return new this.constructor().copy(this)}copy(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const s={};this.name=n.name;const l=n.index;l!==null&&this.setIndex(l.clone(s));const f=n.attributes;for(const V in f){const $=f[V];this.setAttribute(V,$.clone(s))}const b=n.morphAttributes;for(const V in b){const $=[],Z=b[V];for(let ee=0,te=Z.length;ee<te;ee++)$.push(Z[ee].clone(s));this.morphAttributes[V]=$}this.morphTargetsRelative=n.morphTargetsRelative;const I=n.groups;for(let V=0,$=I.length;V<$;V++){const Z=I[V];this.addGroup(Z.start,Z.count,Z.materialIndex)}const R=n.boundingBox;R!==null&&(this.boundingBox=R.clone());const U=n.boundingSphere;return U!==null&&(this.boundingSphere=U.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const A5=new ii,wu=new Gs,_m=new Us,v5=new Ve,V0=new Ve,Q0=new Ve,H0=new Ve,b2=new Ve,Cm=new Ve,Em=new sn,wm=new sn,xm=new sn,y5=new Ve,b5=new Ve,M5=new Ve,Sm=new Ve,Im=new Ve;class Ds extends Cr{constructor(n=new Zi,s=new Bc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=n,this.material=s,this.updateMorphTargets()}copy(n,s){return super.copy(n,s),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}updateMorphTargets(){const s=this.geometry.morphAttributes,l=Object.keys(s);if(l.length>0){const f=s[l[0]];if(f!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,I=f.length;b<I;b++){const R=f[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[R]=b}}}}getVertexPosition(n,s){const l=this.geometry,f=l.attributes.position,b=l.morphAttributes.position,I=l.morphTargetsRelative;s.fromBufferAttribute(f,n);const R=this.morphTargetInfluences;if(b&&R){Cm.set(0,0,0);for(let U=0,V=b.length;U<V;U++){const $=R[U],Z=b[U];$!==0&&(b2.fromBufferAttribute(Z,n),I?Cm.addScaledVector(b2,$):Cm.addScaledVector(b2.sub(s),$))}s.add(Cm)}return s}raycast(n,s){const l=this.geometry,f=this.material,b=this.matrixWorld;f!==void 0&&(l.boundingSphere===null&&l.computeBoundingSphere(),_m.copy(l.boundingSphere),_m.applyMatrix4(b),wu.copy(n.ray).recast(n.near),!(_m.containsPoint(wu.origin)===!1&&(wu.intersectSphere(_m,v5)===null||wu.origin.distanceToSquared(v5)>(n.far-n.near)**2))&&(A5.copy(b).invert(),wu.copy(n.ray).applyMatrix4(A5),!(l.boundingBox!==null&&wu.intersectsBox(l.boundingBox)===!1)&&this._computeIntersections(n,s,wu)))}_computeIntersections(n,s,l){let f;const b=this.geometry,I=this.material,R=b.index,U=b.attributes.position,V=b.attributes.uv,$=b.attributes.uv1,Z=b.attributes.normal,ee=b.groups,te=b.drawRange;if(R!==null)if(Array.isArray(I))for(let ae=0,he=ee.length;ae<he;ae++){const oe=ee[ae],ne=I[oe.materialIndex],Ie=Math.max(oe.start,te.start),Ce=Math.min(R.count,Math.min(oe.start+oe.count,te.start+te.count));for(let Me=Ie,Je=Ce;Me<Je;Me+=3){const Qe=R.getX(Me),je=R.getX(Me+1),Ye=R.getX(Me+2);f=Tm(this,ne,n,l,V,$,Z,Qe,je,Ye),f&&(f.faceIndex=Math.floor(Me/3),f.face.materialIndex=oe.materialIndex,s.push(f))}}else{const ae=Math.max(0,te.start),he=Math.min(R.count,te.start+te.count);for(let oe=ae,ne=he;oe<ne;oe+=3){const Ie=R.getX(oe),Ce=R.getX(oe+1),Me=R.getX(oe+2);f=Tm(this,I,n,l,V,$,Z,Ie,Ce,Me),f&&(f.faceIndex=Math.floor(oe/3),s.push(f))}}else if(U!==void 0)if(Array.isArray(I))for(let ae=0,he=ee.length;ae<he;ae++){const oe=ee[ae],ne=I[oe.materialIndex],Ie=Math.max(oe.start,te.start),Ce=Math.min(U.count,Math.min(oe.start+oe.count,te.start+te.count));for(let Me=Ie,Je=Ce;Me<Je;Me+=3){const Qe=Me,je=Me+1,Ye=Me+2;f=Tm(this,ne,n,l,V,$,Z,Qe,je,Ye),f&&(f.faceIndex=Math.floor(Me/3),f.face.materialIndex=oe.materialIndex,s.push(f))}}else{const ae=Math.max(0,te.start),he=Math.min(U.count,te.start+te.count);for(let oe=ae,ne=he;oe<ne;oe+=3){const Ie=oe,Ce=oe+1,Me=oe+2;f=Tm(this,I,n,l,V,$,Z,Ie,Ce,Me),f&&(f.faceIndex=Math.floor(oe/3),s.push(f))}}}}function nL(M,n,s,l,f,b,I,R){let U;if(n.side===T?U=l.intersectTriangle(I,b,f,!0,R):U=l.intersectTriangle(f,b,I,n.side===w,R),U===null)return null;Im.copy(R),Im.applyMatrix4(M.matrixWorld);const V=s.ray.origin.distanceTo(Im);return V<s.near||V>s.far?null:{distance:V,point:Im.clone(),object:M}}function Tm(M,n,s,l,f,b,I,R,U,V){M.getVertexPosition(R,V0),M.getVertexPosition(U,Q0),M.getVertexPosition(V,H0);const $=nL(M,n,s,l,V0,Q0,H0,Sm);if($){f&&(Em.fromBufferAttribute(f,R),wm.fromBufferAttribute(f,U),xm.fromBufferAttribute(f,V),$.uv=oo.getInterpolation(Sm,V0,Q0,H0,Em,wm,xm,new sn)),b&&(Em.fromBufferAttribute(b,R),wm.fromBufferAttribute(b,U),xm.fromBufferAttribute(b,V),$.uv1=oo.getInterpolation(Sm,V0,Q0,H0,Em,wm,xm,new sn)),I&&(y5.fromBufferAttribute(I,R),b5.fromBufferAttribute(I,U),M5.fromBufferAttribute(I,V),$.normal=oo.getInterpolation(Sm,V0,Q0,H0,y5,b5,M5,new Ve),$.normal.dot(l.direction)>0&&$.normal.multiplyScalar(-1));const Z={a:R,b:U,c:V,normal:new Ve,materialIndex:0};oo.getNormal(V0,Q0,H0,Z.normal),$.face=Z}return $}class xu extends Zi{constructor(n=1,s=1,l=1,f=1,b=1,I=1){super(),this.type="BoxGeometry",this.parameters={width:n,height:s,depth:l,widthSegments:f,heightSegments:b,depthSegments:I};const R=this;f=Math.floor(f),b=Math.floor(b),I=Math.floor(I);const U=[],V=[],$=[],Z=[];let ee=0,te=0;ae("z","y","x",-1,-1,l,s,n,I,b,0),ae("z","y","x",1,-1,l,s,-n,I,b,1),ae("x","z","y",1,1,n,l,s,f,I,2),ae("x","z","y",1,-1,n,l,-s,f,I,3),ae("x","y","z",1,-1,n,s,l,f,b,4),ae("x","y","z",-1,-1,n,s,-l,f,b,5),this.setIndex(U),this.setAttribute("position",new ai(V,3)),this.setAttribute("normal",new ai($,3)),this.setAttribute("uv",new ai(Z,2));function ae(he,oe,ne,Ie,Ce,Me,Je,Qe,je,Ye,Pe){const Re=Me/je,qe=Je/Ye,At=Me/2,lt=Je/2,bt=Qe/2,kt=je+1,tn=Ye+1;let In=0,Gt=0;const bn=new Ve;for(let wn=0;wn<tn;wn++){const ti=wn*qe-lt;for(let er=0;er<kt;er++){const Dr=er*Re-At;bn[he]=Dr*Ie,bn[oe]=ti*Ce,bn[ne]=bt,V.push(bn.x,bn.y,bn.z),bn[he]=0,bn[oe]=0,bn[ne]=Qe>0?1:-1,$.push(bn.x,bn.y,bn.z),Z.push(er/je),Z.push(1-wn/Ye),In+=1}}for(let wn=0;wn<Ye;wn++)for(let ti=0;ti<je;ti++){const er=ee+ti+kt*wn,Dr=ee+ti+kt*(wn+1),is=ee+(ti+1)+kt*(wn+1),Er=ee+(ti+1)+kt*wn;U.push(er,Dr,Er),U.push(Dr,is,Er),Gt+=6}R.addGroup(te,Gt,Pe),te+=Gt,ee+=In}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new xu(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments)}}function z0(M){const n={};for(const s in M){n[s]={};for(const l in M[s]){const f=M[s][l];f&&(f.isColor||f.isMatrix3||f.isMatrix4||f.isVector2||f.isVector3||f.isVector4||f.isTexture||f.isQuaternion)?f.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),n[s][l]=null):n[s][l]=f.clone():Array.isArray(f)?n[s][l]=f.slice():n[s][l]=f}}return n}function Ta(M){const n={};for(let s=0;s<M.length;s++){const l=z0(M[s]);for(const f in l)n[f]=l[f]}return n}function iL(M){const n=[];for(let s=0;s<M.length;s++)n.push(M[s].clone());return n}function _5(M){const n=M.getRenderTarget();return n===null?M.outputColorSpace:n.isXRRenderTarget===!0?n.texture.colorSpace:Or.workingColorSpace}const C5={clone:z0,merge:Ta};var rL=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,sL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Vo extends va{constructor(n){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rL,this.fragmentShader=sL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&this.setValues(n)}copy(n){return super.copy(n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=z0(n.uniforms),this.uniformsGroups=iL(n.uniformsGroups),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.fog=n.fog,this.lights=n.lights,this.clipping=n.clipping,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this}toJSON(n){const s=super.toJSON(n);s.glslVersion=this.glslVersion,s.uniforms={};for(const f in this.uniforms){const I=this.uniforms[f].value;I&&I.isTexture?s.uniforms[f]={type:"t",value:I.toJSON(n).uuid}:I&&I.isColor?s.uniforms[f]={type:"c",value:I.getHex()}:I&&I.isVector2?s.uniforms[f]={type:"v2",value:I.toArray()}:I&&I.isVector3?s.uniforms[f]={type:"v3",value:I.toArray()}:I&&I.isVector4?s.uniforms[f]={type:"v4",value:I.toArray()}:I&&I.isMatrix3?s.uniforms[f]={type:"m3",value:I.toArray()}:I&&I.isMatrix4?s.uniforms[f]={type:"m4",value:I.toArray()}:s.uniforms[f]={value:I}}Object.keys(this.defines).length>0&&(s.defines=this.defines),s.vertexShader=this.vertexShader,s.fragmentShader=this.fragmentShader,s.lights=this.lights,s.clipping=this.clipping;const l={};for(const f in this.extensions)this.extensions[f]===!0&&(l[f]=!0);return Object.keys(l).length>0&&(s.extensions=l),s}}class Bm extends Cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ii,this.projectionMatrix=new ii,this.projectionMatrixInverse=new ii,this.coordinateSystem=bo}copy(n,s){return super.copy(n,s),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this.coordinateSystem=n.coordinateSystem,this}getWorldDirection(n){return super.getWorldDirection(n).negate()}updateMatrixWorld(n){super.updateMatrixWorld(n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(n,s){super.updateWorldMatrix(n,s),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Rc=new Ve,E5=new sn,w5=new sn;class Vs extends Bm{constructor(n=50,s=1,l=.1,f=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=l,this.far=f,this.focus=10,this.aspect=s,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(n,s){return super.copy(n,s),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this}setFocalLength(n){const s=.5*this.getFilmHeight()/n;this.fov=Cc*2*Math.atan(s),this.updateProjectionMatrix()}getFocalLength(){const n=Math.tan(Gl*.5*this.fov);return .5*this.getFilmHeight()/n}getEffectiveFOV(){return Cc*2*Math.atan(Math.tan(Gl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(n,s,l){Rc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(Rc.x,Rc.y).multiplyScalar(-n/Rc.z),Rc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),l.set(Rc.x,Rc.y).multiplyScalar(-n/Rc.z)}getViewSize(n,s){return this.getViewBounds(n,E5,w5),s.subVectors(w5,E5)}setViewOffset(n,s,l,f,b,I){this.aspect=n/s,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=s,this.view.offsetX=l,this.view.offsetY=f,this.view.width=b,this.view.height=I,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=this.near;let s=n*Math.tan(Gl*.5*this.fov)/this.zoom,l=2*s,f=this.aspect*l,b=-.5*f;const I=this.view;if(this.view!==null&&this.view.enabled){const U=I.fullWidth,V=I.fullHeight;b+=I.offsetX*f/U,s-=I.offsetY*l/V,f*=I.width/U,l*=I.height/V}const R=this.filmOffset;R!==0&&(b+=n*R/this.getFilmWidth()),this.projectionMatrix.makePerspective(b,b+f,s,s-l,n,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const s=super.toJSON(n);return s.object.fov=this.fov,s.object.zoom=this.zoom,s.object.near=this.near,s.object.far=this.far,s.object.focus=this.focus,s.object.aspect=this.aspect,this.view!==null&&(s.object.view=Object.assign({},this.view)),s.object.filmGauge=this.filmGauge,s.object.filmOffset=this.filmOffset,s}}const W0=-90,j0=1;class x5 extends Cr{constructor(n,s,l){super(),this.type="CubeCamera",this.renderTarget=l,this.coordinateSystem=null,this.activeMipmapLevel=0;const f=new Vs(W0,j0,n,s);f.layers=this.layers,this.add(f);const b=new Vs(W0,j0,n,s);b.layers=this.layers,this.add(b);const I=new Vs(W0,j0,n,s);I.layers=this.layers,this.add(I);const R=new Vs(W0,j0,n,s);R.layers=this.layers,this.add(R);const U=new Vs(W0,j0,n,s);U.layers=this.layers,this.add(U);const V=new Vs(W0,j0,n,s);V.layers=this.layers,this.add(V)}updateCoordinateSystem(){const n=this.coordinateSystem,s=this.children.concat(),[l,f,b,I,R,U]=s;for(const V of s)this.remove(V);if(n===bo)l.up.set(0,1,0),l.lookAt(1,0,0),f.up.set(0,1,0),f.lookAt(-1,0,0),b.up.set(0,0,-1),b.lookAt(0,1,0),I.up.set(0,0,1),I.lookAt(0,-1,0),R.up.set(0,1,0),R.lookAt(0,0,1),U.up.set(0,1,0),U.lookAt(0,0,-1);else if(n===_u)l.up.set(0,-1,0),l.lookAt(-1,0,0),f.up.set(0,-1,0),f.lookAt(1,0,0),b.up.set(0,0,1),b.lookAt(0,1,0),I.up.set(0,0,-1),I.lookAt(0,-1,0),R.up.set(0,-1,0),R.lookAt(0,0,1),U.up.set(0,-1,0),U.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+n);for(const V of s)this.add(V),V.updateMatrixWorld()}update(n,s){this.parent===null&&this.updateMatrixWorld();const{renderTarget:l,activeMipmapLevel:f}=this;this.coordinateSystem!==n.coordinateSystem&&(this.coordinateSystem=n.coordinateSystem,this.updateCoordinateSystem());const[b,I,R,U,V,$]=this.children,Z=n.getRenderTarget(),ee=n.getActiveCubeFace(),te=n.getActiveMipmapLevel(),ae=n.xr.enabled;n.xr.enabled=!1;const he=l.texture.generateMipmaps;l.texture.generateMipmaps=!1,n.setRenderTarget(l,0,f),n.render(s,b),n.setRenderTarget(l,1,f),n.render(s,I),n.setRenderTarget(l,2,f),n.render(s,R),n.setRenderTarget(l,3,f),n.render(s,U),n.setRenderTarget(l,4,f),n.render(s,V),l.texture.generateMipmaps=he,n.setRenderTarget(l,5,f),n.render(s,$),n.setRenderTarget(Z,ee,te),n.xr.enabled=ae,l.texture.needsPMREMUpdate=!0}}class Bd extends qr{constructor(n,s,l,f,b,I,R,U,V,$){n=n!==void 0?n:[],s=s!==void 0?s:ce,super(n,s,l,f,b,I,R,U,V,$),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(n){this.image=n}}class S5 extends Ga{constructor(n=1,s={}){super(n,n,s),this.isWebGLCubeRenderTarget=!0;const l={width:n,height:n,depth:1},f=[l,l,l,l,l,l];this.texture=new Bd(f,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=s.generateMipmaps!==void 0?s.generateMipmaps:!1,this.texture.minFilter=s.minFilter!==void 0?s.minFilter:Fn}fromEquirectangularTexture(n,s){this.texture.type=s.type,this.texture.colorSpace=s.colorSpace,this.texture.generateMipmaps=s.generateMipmaps,this.texture.minFilter=s.minFilter,this.texture.magFilter=s.magFilter;const l={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},f=new xu(5,5,5),b=new Vo({name:"CubemapFromEquirect",uniforms:z0(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,side:T,blending:B});b.uniforms.tEquirect.value=s;const I=new Ds(f,b),R=s.minFilter;return s.minFilter===qi&&(s.minFilter=Fn),new x5(1,10,this).update(n,I),s.minFilter=R,I.geometry.dispose(),I.material.dispose(),this}clear(n,s,l,f){const b=n.getRenderTarget();for(let I=0;I<6;I++)n.setRenderTarget(this,I),n.clear(s,l,f);n.setRenderTarget(b)}}const M2=new Ve,aL=new Ve,oL=new Bi;class Oc{constructor(n=new Ve(1,0,0),s=0){this.isPlane=!0,this.normal=n,this.constant=s}set(n,s){return this.normal.copy(n),this.constant=s,this}setComponents(n,s,l,f){return this.normal.set(n,s,l),this.constant=f,this}setFromNormalAndCoplanarPoint(n,s){return this.normal.copy(n),this.constant=-s.dot(this.normal),this}setFromCoplanarPoints(n,s,l){const f=M2.subVectors(l,s).cross(aL.subVectors(n,s)).normalize();return this.setFromNormalAndCoplanarPoint(f,n),this}copy(n){return this.normal.copy(n.normal),this.constant=n.constant,this}normalize(){const n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(n){return this.normal.dot(n)+this.constant}distanceToSphere(n){return this.distanceToPoint(n.center)-n.radius}projectPoint(n,s){return s.copy(n).addScaledVector(this.normal,-this.distanceToPoint(n))}intersectLine(n,s){const l=n.delta(M2),f=this.normal.dot(l);if(f===0)return this.distanceToPoint(n.start)===0?s.copy(n.start):null;const b=-(n.start.dot(this.normal)+this.constant)/f;return b<0||b>1?null:s.copy(n.start).addScaledVector(l,b)}intersectsLine(n){const s=this.distanceToPoint(n.start),l=this.distanceToPoint(n.end);return s<0&&l>0||l<0&&s>0}intersectsBox(n){return n.intersectsPlane(this)}intersectsSphere(n){return n.intersectsPlane(this)}coplanarPoint(n){return n.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(n,s){const l=s||oL.getNormalMatrix(n),f=this.coplanarPoint(M2).applyMatrix4(n),b=this.normal.applyMatrix3(l).normalize();return this.constant=-f.dot(b),this}translate(n){return this.constant-=n.dot(this.normal),this}equals(n){return n.normal.equals(this.normal)&&n.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Su=new Us,Rm=new Ve;class Rd{constructor(n=new Oc,s=new Oc,l=new Oc,f=new Oc,b=new Oc,I=new Oc){this.planes=[n,s,l,f,b,I]}set(n,s,l,f,b,I){const R=this.planes;return R[0].copy(n),R[1].copy(s),R[2].copy(l),R[3].copy(f),R[4].copy(b),R[5].copy(I),this}copy(n){const s=this.planes;for(let l=0;l<6;l++)s[l].copy(n.planes[l]);return this}setFromProjectionMatrix(n,s=bo){const l=this.planes,f=n.elements,b=f[0],I=f[1],R=f[2],U=f[3],V=f[4],$=f[5],Z=f[6],ee=f[7],te=f[8],ae=f[9],he=f[10],oe=f[11],ne=f[12],Ie=f[13],Ce=f[14],Me=f[15];if(l[0].setComponents(U-b,ee-V,oe-te,Me-ne).normalize(),l[1].setComponents(U+b,ee+V,oe+te,Me+ne).normalize(),l[2].setComponents(U+I,ee+$,oe+ae,Me+Ie).normalize(),l[3].setComponents(U-I,ee-$,oe-ae,Me-Ie).normalize(),l[4].setComponents(U-R,ee-Z,oe-he,Me-Ce).normalize(),s===bo)l[5].setComponents(U+R,ee+Z,oe+he,Me+Ce).normalize();else if(s===_u)l[5].setComponents(R,Z,he,Ce).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+s);return this}intersectsObject(n){if(n.boundingSphere!==void 0)n.boundingSphere===null&&n.computeBoundingSphere(),Su.copy(n.boundingSphere).applyMatrix4(n.matrixWorld);else{const s=n.geometry;s.boundingSphere===null&&s.computeBoundingSphere(),Su.copy(s.boundingSphere).applyMatrix4(n.matrixWorld)}return this.intersectsSphere(Su)}intersectsSprite(n){return Su.center.set(0,0,0),Su.radius=.7071067811865476,Su.applyMatrix4(n.matrixWorld),this.intersectsSphere(Su)}intersectsSphere(n){const s=this.planes,l=n.center,f=-n.radius;for(let b=0;b<6;b++)if(s[b].distanceToPoint(l)<f)return!1;return!0}intersectsBox(n){const s=this.planes;for(let l=0;l<6;l++){const f=s[l];if(Rm.x=f.normal.x>0?n.max.x:n.min.x,Rm.y=f.normal.y>0?n.max.y:n.min.y,Rm.z=f.normal.z>0?n.max.z:n.min.z,f.distanceToPoint(Rm)<0)return!1}return!0}containsPoint(n){const s=this.planes;for(let l=0;l<6;l++)if(s[l].distanceToPoint(n)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _2(){let M=null,n=!1,s=null,l=null;function f(b,I){s(b,I),l=M.requestAnimationFrame(f)}return{start:function(){n!==!0&&s!==null&&(l=M.requestAnimationFrame(f),n=!0)},stop:function(){M.cancelAnimationFrame(l),n=!1},setAnimationLoop:function(b){s=b},setContext:function(b){M=b}}}function lL(M){const n=new WeakMap;function s(R,U){const V=R.array,$=R.usage,Z=V.byteLength,ee=M.createBuffer();M.bindBuffer(U,ee),M.bufferData(U,V,$),R.onUploadCallback();let te;if(V instanceof Float32Array)te=M.FLOAT;else if(V instanceof Uint16Array)R.isFloat16BufferAttribute?te=M.HALF_FLOAT:te=M.UNSIGNED_SHORT;else if(V instanceof Int16Array)te=M.SHORT;else if(V instanceof Uint32Array)te=M.UNSIGNED_INT;else if(V instanceof Int32Array)te=M.INT;else if(V instanceof Int8Array)te=M.BYTE;else if(V instanceof Uint8Array)te=M.UNSIGNED_BYTE;else if(V instanceof Uint8ClampedArray)te=M.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+V);return{buffer:ee,type:te,bytesPerElement:V.BYTES_PER_ELEMENT,version:R.version,size:Z}}function l(R,U,V){const $=U.array,Z=U._updateRange,ee=U.updateRanges;if(M.bindBuffer(V,R),Z.count===-1&&ee.length===0&&M.bufferSubData(V,0,$),ee.length!==0){for(let te=0,ae=ee.length;te<ae;te++){const he=ee[te];M.bufferSubData(V,he.start*$.BYTES_PER_ELEMENT,$,he.start,he.count)}U.clearUpdateRanges()}Z.count!==-1&&(M.bufferSubData(V,Z.offset*$.BYTES_PER_ELEMENT,$,Z.offset,Z.count),Z.count=-1),U.onUploadCallback()}function f(R){return R.isInterleavedBufferAttribute&&(R=R.data),n.get(R)}function b(R){R.isInterleavedBufferAttribute&&(R=R.data);const U=n.get(R);U&&(M.deleteBuffer(U.buffer),n.delete(R))}function I(R,U){if(R.isGLBufferAttribute){const $=n.get(R);(!$||$.version<R.version)&&n.set(R,{buffer:R.buffer,type:R.type,bytesPerElement:R.elementSize,version:R.version});return}R.isInterleavedBufferAttribute&&(R=R.data);const V=n.get(R);if(V===void 0)n.set(R,s(R,U));else if(V.version<R.version){if(V.size!==R.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");l(V.buffer,R,U),V.version=R.version}}return{get:f,remove:b,update:I}}class $0 extends Zi{constructor(n=1,s=1,l=1,f=1){super(),this.type="PlaneGeometry",this.parameters={width:n,height:s,widthSegments:l,heightSegments:f};const b=n/2,I=s/2,R=Math.floor(l),U=Math.floor(f),V=R+1,$=U+1,Z=n/R,ee=s/U,te=[],ae=[],he=[],oe=[];for(let ne=0;ne<$;ne++){const Ie=ne*ee-I;for(let Ce=0;Ce<V;Ce++){const Me=Ce*Z-b;ae.push(Me,-Ie,0),he.push(0,0,1),oe.push(Ce/R),oe.push(1-ne/U)}}for(let ne=0;ne<U;ne++)for(let Ie=0;Ie<R;Ie++){const Ce=Ie+V*ne,Me=Ie+V*(ne+1),Je=Ie+1+V*(ne+1),Qe=Ie+1+V*ne;te.push(Ce,Me,Qe),te.push(Me,Je,Qe)}this.setIndex(te),this.setAttribute("position",new ai(ae,3)),this.setAttribute("normal",new ai(he,3)),this.setAttribute("uv",new ai(oe,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new $0(n.width,n.height,n.widthSegments,n.heightSegments)}}var cL=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,uL=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,hL=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,dL=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,fL=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,mL=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,pL=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,gL=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,AL=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,vL=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,yL=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,bL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ML=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,_L=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,CL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,EL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,wL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,xL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,SL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,IL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,TL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,BL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,RL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,OL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,DL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,LL=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,PL=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,NL=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,FL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,kL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,UL="gl_FragColor = linearToOutputTexel( gl_FragColor );",GL=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,VL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,QL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,HL=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,zL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,WL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,$L=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,XL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,KL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,YL=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,qL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,JL=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ZL=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,eP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,tP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,nP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,iP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,aP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,oP=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lP=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,cP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,uP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,hP=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,dP=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fP=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mP=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,pP=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,gP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,vP=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yP=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,bP=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MP=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,_P=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,CP=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,EP=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,wP=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,xP=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,SP=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,IP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,TP=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BP=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,RP=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,OP=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,DP=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,LP=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,PP=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,NP=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,FP=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,kP=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,UP=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,GP=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,VP=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,QP=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,HP=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,zP=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,WP=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,jP=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,$P=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,XP=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,KP=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,YP=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,qP=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,JP=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ZP=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eN=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tN=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,nN=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,iN=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rN=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sN=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,aN=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,oN=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const $i={alphahash_fragment:cL,alphahash_pars_fragment:uL,alphamap_fragment:hL,alphamap_pars_fragment:dL,alphatest_fragment:fL,alphatest_pars_fragment:mL,aomap_fragment:pL,aomap_pars_fragment:gL,batching_pars_vertex:AL,batching_vertex:vL,begin_vertex:yL,beginnormal_vertex:bL,bsdfs:ML,iridescence_fragment:_L,bumpmap_pars_fragment:CL,clipping_planes_fragment:EL,clipping_planes_pars_fragment:wL,clipping_planes_pars_vertex:xL,clipping_planes_vertex:SL,color_fragment:IL,color_pars_fragment:TL,color_pars_vertex:BL,color_vertex:RL,common:OL,cube_uv_reflection_fragment:DL,defaultnormal_vertex:LL,displacementmap_pars_vertex:PL,displacementmap_vertex:NL,emissivemap_fragment:FL,emissivemap_pars_fragment:kL,colorspace_fragment:UL,colorspace_pars_fragment:GL,envmap_fragment:VL,envmap_common_pars_fragment:QL,envmap_pars_fragment:HL,envmap_pars_vertex:zL,envmap_physical_pars_fragment:tP,envmap_vertex:WL,fog_vertex:jL,fog_pars_vertex:$L,fog_fragment:XL,fog_pars_fragment:KL,gradientmap_pars_fragment:YL,lightmap_pars_fragment:qL,lights_lambert_fragment:JL,lights_lambert_pars_fragment:ZL,lights_pars_begin:eP,lights_toon_fragment:nP,lights_toon_pars_fragment:iP,lights_phong_fragment:rP,lights_phong_pars_fragment:sP,lights_physical_fragment:aP,lights_physical_pars_fragment:oP,lights_fragment_begin:lP,lights_fragment_maps:cP,lights_fragment_end:uP,logdepthbuf_fragment:hP,logdepthbuf_pars_fragment:dP,logdepthbuf_pars_vertex:fP,logdepthbuf_vertex:mP,map_fragment:pP,map_pars_fragment:gP,map_particle_fragment:AP,map_particle_pars_fragment:vP,metalnessmap_fragment:yP,metalnessmap_pars_fragment:bP,morphinstance_vertex:MP,morphcolor_vertex:_P,morphnormal_vertex:CP,morphtarget_pars_vertex:EP,morphtarget_vertex:wP,normal_fragment_begin:xP,normal_fragment_maps:SP,normal_pars_fragment:IP,normal_pars_vertex:TP,normal_vertex:BP,normalmap_pars_fragment:RP,clearcoat_normal_fragment_begin:OP,clearcoat_normal_fragment_maps:DP,clearcoat_pars_fragment:LP,iridescence_pars_fragment:PP,opaque_fragment:NP,packing:FP,premultiplied_alpha_fragment:kP,project_vertex:UP,dithering_fragment:GP,dithering_pars_fragment:VP,roughnessmap_fragment:QP,roughnessmap_pars_fragment:HP,shadowmap_pars_fragment:zP,shadowmap_pars_vertex:WP,shadowmap_vertex:jP,shadowmask_pars_fragment:$P,skinbase_vertex:XP,skinning_pars_vertex:KP,skinning_vertex:YP,skinnormal_vertex:qP,specularmap_fragment:JP,specularmap_pars_fragment:ZP,tonemapping_fragment:eN,tonemapping_pars_fragment:tN,transmission_fragment:nN,transmission_pars_fragment:iN,uv_pars_fragment:rN,uv_pars_vertex:sN,uv_vertex:aN,worldpos_vertex:oN,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},Pn={common:{diffuse:{value:new Kn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Bi},alphaMap:{value:null},alphaMapTransform:{value:new Bi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Bi}},envmap:{envMap:{value:null},envMapRotation:{value:new Bi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Bi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Bi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Bi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Bi},normalScale:{value:new sn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Bi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Bi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Bi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Bi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Kn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Kn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Bi},alphaTest:{value:0},uvTransform:{value:new Bi}},sprite:{diffuse:{value:new Kn(16777215)},opacity:{value:1},center:{value:new sn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Bi},alphaMap:{value:null},alphaMapTransform:{value:new Bi},alphaTest:{value:0}}},Qo={basic:{uniforms:Ta([Pn.common,Pn.specularmap,Pn.envmap,Pn.aomap,Pn.lightmap,Pn.fog]),vertexShader:$i.meshbasic_vert,fragmentShader:$i.meshbasic_frag},lambert:{uniforms:Ta([Pn.common,Pn.specularmap,Pn.envmap,Pn.aomap,Pn.lightmap,Pn.emissivemap,Pn.bumpmap,Pn.normalmap,Pn.displacementmap,Pn.fog,Pn.lights,{emissive:{value:new Kn(0)}}]),vertexShader:$i.meshlambert_vert,fragmentShader:$i.meshlambert_frag},phong:{uniforms:Ta([Pn.common,Pn.specularmap,Pn.envmap,Pn.aomap,Pn.lightmap,Pn.emissivemap,Pn.bumpmap,Pn.normalmap,Pn.displacementmap,Pn.fog,Pn.lights,{emissive:{value:new Kn(0)},specular:{value:new Kn(1118481)},shininess:{value:30}}]),vertexShader:$i.meshphong_vert,fragmentShader:$i.meshphong_frag},standard:{uniforms:Ta([Pn.common,Pn.envmap,Pn.aomap,Pn.lightmap,Pn.emissivemap,Pn.bumpmap,Pn.normalmap,Pn.displacementmap,Pn.roughnessmap,Pn.metalnessmap,Pn.fog,Pn.lights,{emissive:{value:new Kn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$i.meshphysical_vert,fragmentShader:$i.meshphysical_frag},toon:{uniforms:Ta([Pn.common,Pn.aomap,Pn.lightmap,Pn.emissivemap,Pn.bumpmap,Pn.normalmap,Pn.displacementmap,Pn.gradientmap,Pn.fog,Pn.lights,{emissive:{value:new Kn(0)}}]),vertexShader:$i.meshtoon_vert,fragmentShader:$i.meshtoon_frag},matcap:{uniforms:Ta([Pn.common,Pn.bumpmap,Pn.normalmap,Pn.displacementmap,Pn.fog,{matcap:{value:null}}]),vertexShader:$i.meshmatcap_vert,fragmentShader:$i.meshmatcap_frag},points:{uniforms:Ta([Pn.points,Pn.fog]),vertexShader:$i.points_vert,fragmentShader:$i.points_frag},dashed:{uniforms:Ta([Pn.common,Pn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$i.linedashed_vert,fragmentShader:$i.linedashed_frag},depth:{uniforms:Ta([Pn.common,Pn.displacementmap]),vertexShader:$i.depth_vert,fragmentShader:$i.depth_frag},normal:{uniforms:Ta([Pn.common,Pn.bumpmap,Pn.normalmap,Pn.displacementmap,{opacity:{value:1}}]),vertexShader:$i.meshnormal_vert,fragmentShader:$i.meshnormal_frag},sprite:{uniforms:Ta([Pn.sprite,Pn.fog]),vertexShader:$i.sprite_vert,fragmentShader:$i.sprite_frag},background:{uniforms:{uvTransform:{value:new Bi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$i.background_vert,fragmentShader:$i.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Bi}},vertexShader:$i.backgroundCube_vert,fragmentShader:$i.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$i.cube_vert,fragmentShader:$i.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$i.equirect_vert,fragmentShader:$i.equirect_frag},distanceRGBA:{uniforms:Ta([Pn.common,Pn.displacementmap,{referencePosition:{value:new Ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$i.distanceRGBA_vert,fragmentShader:$i.distanceRGBA_frag},shadow:{uniforms:Ta([Pn.lights,Pn.fog,{color:{value:new Kn(0)},opacity:{value:1}}]),vertexShader:$i.shadow_vert,fragmentShader:$i.shadow_frag}};Qo.physical={uniforms:Ta([Qo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Bi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Bi},clearcoatNormalScale:{value:new sn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Bi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Bi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Bi},sheen:{value:0},sheenColor:{value:new Kn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Bi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Bi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Bi},transmissionSamplerSize:{value:new sn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Bi},attenuationDistance:{value:0},attenuationColor:{value:new Kn(0)},specularColor:{value:new Kn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Bi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Bi},anisotropyVector:{value:new sn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Bi}}]),vertexShader:$i.meshphysical_vert,fragmentShader:$i.meshphysical_frag};const Om={r:0,b:0,g:0},Iu=new ao,lN=new ii;function cN(M,n,s,l,f,b,I){const R=new Kn(0);let U=b===!0?0:1,V,$,Z=null,ee=0,te=null;function ae(Ie){let Ce=Ie.isScene===!0?Ie.background:null;return Ce&&Ce.isTexture&&(Ce=(Ie.backgroundBlurriness>0?s:n).get(Ce)),Ce}function he(Ie){let Ce=!1;const Me=ae(Ie);Me===null?ne(R,U):Me&&Me.isColor&&(ne(Me,1),Ce=!0);const Je=M.xr.getEnvironmentBlendMode();Je==="additive"?l.buffers.color.setClear(0,0,0,1,I):Je==="alpha-blend"&&l.buffers.color.setClear(0,0,0,0,I),(M.autoClear||Ce)&&M.clear(M.autoClearColor,M.autoClearDepth,M.autoClearStencil)}function oe(Ie,Ce){const Me=ae(Ce);Me&&(Me.isCubeTexture||Me.mapping===Te)?($===void 0&&($=new Ds(new xu(1e4,1e4,1e4),new Vo({name:"BackgroundCubeMaterial",uniforms:z0(Qo.backgroundCube.uniforms),vertexShader:Qo.backgroundCube.vertexShader,fragmentShader:Qo.backgroundCube.fragmentShader,side:T,depthTest:!1,depthWrite:!1,fog:!1})),$.geometry.deleteAttribute("normal"),$.geometry.deleteAttribute("uv"),$.onBeforeRender=function(Je,Qe,je){this.matrixWorld.copyPosition(je.matrixWorld)},Object.defineProperty($.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),f.update($)),Iu.copy(Ce.backgroundRotation),Iu.x*=-1,Iu.y*=-1,Iu.z*=-1,Me.isCubeTexture&&Me.isRenderTargetTexture===!1&&(Iu.y*=-1,Iu.z*=-1),$.material.uniforms.envMap.value=Me,$.material.uniforms.flipEnvMap.value=Me.isCubeTexture&&Me.isRenderTargetTexture===!1?-1:1,$.material.uniforms.backgroundBlurriness.value=Ce.backgroundBlurriness,$.material.uniforms.backgroundIntensity.value=Ce.backgroundIntensity,$.material.uniforms.backgroundRotation.value.setFromMatrix4(lN.makeRotationFromEuler(Iu)),$.material.toneMapped=Or.getTransfer(Me.colorSpace)!==jr,(Z!==Me||ee!==Me.version||te!==M.toneMapping)&&($.material.needsUpdate=!0,Z=Me,ee=Me.version,te=M.toneMapping),$.layers.enableAll(),Ie.unshift($,$.geometry,$.material,0,0,null)):Me&&Me.isTexture&&(V===void 0&&(V=new Ds(new $0(2,2),new Vo({name:"BackgroundMaterial",uniforms:z0(Qo.background.uniforms),vertexShader:Qo.background.vertexShader,fragmentShader:Qo.background.fragmentShader,side:w,depthTest:!1,depthWrite:!1,fog:!1})),V.geometry.deleteAttribute("normal"),Object.defineProperty(V.material,"map",{get:function(){return this.uniforms.t2D.value}}),f.update(V)),V.material.uniforms.t2D.value=Me,V.material.uniforms.backgroundIntensity.value=Ce.backgroundIntensity,V.material.toneMapped=Or.getTransfer(Me.colorSpace)!==jr,Me.matrixAutoUpdate===!0&&Me.updateMatrix(),V.material.uniforms.uvTransform.value.copy(Me.matrix),(Z!==Me||ee!==Me.version||te!==M.toneMapping)&&(V.material.needsUpdate=!0,Z=Me,ee=Me.version,te=M.toneMapping),V.layers.enableAll(),Ie.unshift(V,V.geometry,V.material,0,0,null))}function ne(Ie,Ce){Ie.getRGB(Om,_5(M)),l.buffers.color.setClear(Om.r,Om.g,Om.b,Ce,I)}return{getClearColor:function(){return R},setClearColor:function(Ie,Ce=1){R.set(Ie),U=Ce,ne(R,U)},getClearAlpha:function(){return U},setClearAlpha:function(Ie){U=Ie,ne(R,U)},render:he,addToRenderList:oe}}function uN(M,n){const s=M.getParameter(M.MAX_VERTEX_ATTRIBS),l={},f=ee(null);let b=f,I=!1;function R(Re,qe,At,lt,bt){let kt=!1;const tn=Z(lt,At,qe);b!==tn&&(b=tn,V(b.object)),kt=te(Re,lt,At,bt),kt&&ae(Re,lt,At,bt),bt!==null&&n.update(bt,M.ELEMENT_ARRAY_BUFFER),(kt||I)&&(I=!1,Me(Re,qe,At,lt),bt!==null&&M.bindBuffer(M.ELEMENT_ARRAY_BUFFER,n.get(bt).buffer))}function U(){return M.createVertexArray()}function V(Re){return M.bindVertexArray(Re)}function $(Re){return M.deleteVertexArray(Re)}function Z(Re,qe,At){const lt=At.wireframe===!0;let bt=l[Re.id];bt===void 0&&(bt={},l[Re.id]=bt);let kt=bt[qe.id];kt===void 0&&(kt={},bt[qe.id]=kt);let tn=kt[lt];return tn===void 0&&(tn=ee(U()),kt[lt]=tn),tn}function ee(Re){const qe=[],At=[],lt=[];for(let bt=0;bt<s;bt++)qe[bt]=0,At[bt]=0,lt[bt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:qe,enabledAttributes:At,attributeDivisors:lt,object:Re,attributes:{},index:null}}function te(Re,qe,At,lt){const bt=b.attributes,kt=qe.attributes;let tn=0;const In=At.getAttributes();for(const Gt in In)if(In[Gt].location>=0){const wn=bt[Gt];let ti=kt[Gt];if(ti===void 0&&(Gt==="instanceMatrix"&&Re.instanceMatrix&&(ti=Re.instanceMatrix),Gt==="instanceColor"&&Re.instanceColor&&(ti=Re.instanceColor)),wn===void 0||wn.attribute!==ti||ti&&wn.data!==ti.data)return!0;tn++}return b.attributesNum!==tn||b.index!==lt}function ae(Re,qe,At,lt){const bt={},kt=qe.attributes;let tn=0;const In=At.getAttributes();for(const Gt in In)if(In[Gt].location>=0){let wn=kt[Gt];wn===void 0&&(Gt==="instanceMatrix"&&Re.instanceMatrix&&(wn=Re.instanceMatrix),Gt==="instanceColor"&&Re.instanceColor&&(wn=Re.instanceColor));const ti={};ti.attribute=wn,wn&&wn.data&&(ti.data=wn.data),bt[Gt]=ti,tn++}b.attributes=bt,b.attributesNum=tn,b.index=lt}function he(){const Re=b.newAttributes;for(let qe=0,At=Re.length;qe<At;qe++)Re[qe]=0}function oe(Re){ne(Re,0)}function ne(Re,qe){const At=b.newAttributes,lt=b.enabledAttributes,bt=b.attributeDivisors;At[Re]=1,lt[Re]===0&&(M.enableVertexAttribArray(Re),lt[Re]=1),bt[Re]!==qe&&(M.vertexAttribDivisor(Re,qe),bt[Re]=qe)}function Ie(){const Re=b.newAttributes,qe=b.enabledAttributes;for(let At=0,lt=qe.length;At<lt;At++)qe[At]!==Re[At]&&(M.disableVertexAttribArray(At),qe[At]=0)}function Ce(Re,qe,At,lt,bt,kt,tn){tn===!0?M.vertexAttribIPointer(Re,qe,At,bt,kt):M.vertexAttribPointer(Re,qe,At,lt,bt,kt)}function Me(Re,qe,At,lt){he();const bt=lt.attributes,kt=At.getAttributes(),tn=qe.defaultAttributeValues;for(const In in kt){const Gt=kt[In];if(Gt.location>=0){let bn=bt[In];if(bn===void 0&&(In==="instanceMatrix"&&Re.instanceMatrix&&(bn=Re.instanceMatrix),In==="instanceColor"&&Re.instanceColor&&(bn=Re.instanceColor)),bn!==void 0){const wn=bn.normalized,ti=bn.itemSize,er=n.get(bn);if(er===void 0)continue;const Dr=er.buffer,is=er.type,Er=er.bytesPerElement,$r=is===M.INT||is===M.UNSIGNED_INT||bn.gpuType===vs;if(bn.isInterleavedBufferAttribute){const si=bn.data,ln=si.stride,Rn=bn.offset;if(si.isInstancedInterleavedBuffer){for(let Nn=0;Nn<Gt.locationSize;Nn++)ne(Gt.location+Nn,si.meshPerAttribute);Re.isInstancedMesh!==!0&&lt._maxInstanceCount===void 0&&(lt._maxInstanceCount=si.meshPerAttribute*si.count)}else for(let Nn=0;Nn<Gt.locationSize;Nn++)oe(Gt.location+Nn);M.bindBuffer(M.ARRAY_BUFFER,Dr);for(let Nn=0;Nn<Gt.locationSize;Nn++)Ce(Gt.location+Nn,ti/Gt.locationSize,is,wn,ln*Er,(Rn+ti/Gt.locationSize*Nn)*Er,$r)}else{if(bn.isInstancedBufferAttribute){for(let si=0;si<Gt.locationSize;si++)ne(Gt.location+si,bn.meshPerAttribute);Re.isInstancedMesh!==!0&&lt._maxInstanceCount===void 0&&(lt._maxInstanceCount=bn.meshPerAttribute*bn.count)}else for(let si=0;si<Gt.locationSize;si++)oe(Gt.location+si);M.bindBuffer(M.ARRAY_BUFFER,Dr);for(let si=0;si<Gt.locationSize;si++)Ce(Gt.location+si,ti/Gt.locationSize,is,wn,ti*Er,ti/Gt.locationSize*si*Er,$r)}}else if(tn!==void 0){const wn=tn[In];if(wn!==void 0)switch(wn.length){case 2:M.vertexAttrib2fv(Gt.location,wn);break;case 3:M.vertexAttrib3fv(Gt.location,wn);break;case 4:M.vertexAttrib4fv(Gt.location,wn);break;default:M.vertexAttrib1fv(Gt.location,wn)}}}}Ie()}function Je(){Ye();for(const Re in l){const qe=l[Re];for(const At in qe){const lt=qe[At];for(const bt in lt)$(lt[bt].object),delete lt[bt];delete qe[At]}delete l[Re]}}function Qe(Re){if(l[Re.id]===void 0)return;const qe=l[Re.id];for(const At in qe){const lt=qe[At];for(const bt in lt)$(lt[bt].object),delete lt[bt];delete qe[At]}delete l[Re.id]}function je(Re){for(const qe in l){const At=l[qe];if(At[Re.id]===void 0)continue;const lt=At[Re.id];for(const bt in lt)$(lt[bt].object),delete lt[bt];delete At[Re.id]}}function Ye(){Pe(),I=!0,b!==f&&(b=f,V(b.object))}function Pe(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:R,reset:Ye,resetDefaultState:Pe,dispose:Je,releaseStatesOfGeometry:Qe,releaseStatesOfProgram:je,initAttributes:he,enableAttribute:oe,disableUnusedAttributes:Ie}}function hN(M,n,s){let l;function f(V){l=V}function b(V,$){M.drawArrays(l,V,$),s.update($,l,1)}function I(V,$,Z){Z!==0&&(M.drawArraysInstanced(l,V,$,Z),s.update($,l,Z))}function R(V,$,Z){if(Z===0)return;const ee=n.get("WEBGL_multi_draw");if(ee===null)for(let te=0;te<Z;te++)this.render(V[te],$[te]);else{ee.multiDrawArraysWEBGL(l,V,0,$,0,Z);let te=0;for(let ae=0;ae<Z;ae++)te+=$[ae];s.update(te,l,1)}}function U(V,$,Z,ee){if(Z===0)return;const te=n.get("WEBGL_multi_draw");if(te===null)for(let ae=0;ae<V.length;ae++)I(V[ae],$[ae],ee[ae]);else{te.multiDrawArraysInstancedWEBGL(l,V,0,$,0,ee,0,Z);let ae=0;for(let he=0;he<Z;he++)ae+=$[he];for(let he=0;he<ee.length;he++)s.update(ae,l,ee[he])}}this.setMode=f,this.render=b,this.renderInstances=I,this.renderMultiDraw=R,this.renderMultiDrawInstances=U}function dN(M,n,s,l){let f;function b(){if(f!==void 0)return f;if(n.has("EXT_texture_filter_anisotropic")===!0){const Qe=n.get("EXT_texture_filter_anisotropic");f=M.getParameter(Qe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else f=0;return f}function I(Qe){return!(Qe!==$e&&l.convert(Qe)!==M.getParameter(M.IMPLEMENTATION_COLOR_READ_FORMAT))}function R(Qe){const je=Qe===pr&&(n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float"));return!(Qe!==Hr&&l.convert(Qe)!==M.getParameter(M.IMPLEMENTATION_COLOR_READ_TYPE)&&Qe!==Pr&&!je)}function U(Qe){if(Qe==="highp"){if(M.getShaderPrecisionFormat(M.VERTEX_SHADER,M.HIGH_FLOAT).precision>0&&M.getShaderPrecisionFormat(M.FRAGMENT_SHADER,M.HIGH_FLOAT).precision>0)return"highp";Qe="mediump"}return Qe==="mediump"&&M.getShaderPrecisionFormat(M.VERTEX_SHADER,M.MEDIUM_FLOAT).precision>0&&M.getShaderPrecisionFormat(M.FRAGMENT_SHADER,M.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let V=s.precision!==void 0?s.precision:"highp";const $=U(V);$!==V&&(console.warn("THREE.WebGLRenderer:",V,"not supported, using",$,"instead."),V=$);const Z=s.logarithmicDepthBuffer===!0,ee=M.getParameter(M.MAX_TEXTURE_IMAGE_UNITS),te=M.getParameter(M.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ae=M.getParameter(M.MAX_TEXTURE_SIZE),he=M.getParameter(M.MAX_CUBE_MAP_TEXTURE_SIZE),oe=M.getParameter(M.MAX_VERTEX_ATTRIBS),ne=M.getParameter(M.MAX_VERTEX_UNIFORM_VECTORS),Ie=M.getParameter(M.MAX_VARYING_VECTORS),Ce=M.getParameter(M.MAX_FRAGMENT_UNIFORM_VECTORS),Me=te>0,Je=M.getParameter(M.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:b,getMaxPrecision:U,textureFormatReadable:I,textureTypeReadable:R,precision:V,logarithmicDepthBuffer:Z,maxTextures:ee,maxVertexTextures:te,maxTextureSize:ae,maxCubemapSize:he,maxAttributes:oe,maxVertexUniforms:ne,maxVaryings:Ie,maxFragmentUniforms:Ce,vertexTextures:Me,maxSamples:Je}}function fN(M){const n=this;let s=null,l=0,f=!1,b=!1;const I=new Oc,R=new Bi,U={value:null,needsUpdate:!1};this.uniform=U,this.numPlanes=0,this.numIntersection=0,this.init=function(Z,ee){const te=Z.length!==0||ee||l!==0||f;return f=ee,l=Z.length,te},this.beginShadows=function(){b=!0,$(null)},this.endShadows=function(){b=!1},this.setGlobalState=function(Z,ee){s=$(Z,ee,0)},this.setState=function(Z,ee,te){const ae=Z.clippingPlanes,he=Z.clipIntersection,oe=Z.clipShadows,ne=M.get(Z);if(!f||ae===null||ae.length===0||b&&!oe)b?$(null):V();else{const Ie=b?0:l,Ce=Ie*4;let Me=ne.clippingState||null;U.value=Me,Me=$(ae,ee,Ce,te);for(let Je=0;Je!==Ce;++Je)Me[Je]=s[Je];ne.clippingState=Me,this.numIntersection=he?this.numPlanes:0,this.numPlanes+=Ie}};function V(){U.value!==s&&(U.value=s,U.needsUpdate=l>0),n.numPlanes=l,n.numIntersection=0}function $(Z,ee,te,ae){const he=Z!==null?Z.length:0;let oe=null;if(he!==0){if(oe=U.value,ae!==!0||oe===null){const ne=te+he*4,Ie=ee.matrixWorldInverse;R.getNormalMatrix(Ie),(oe===null||oe.length<ne)&&(oe=new Float32Array(ne));for(let Ce=0,Me=te;Ce!==he;++Ce,Me+=4)I.copy(Z[Ce]).applyMatrix4(Ie,R),I.normal.toArray(oe,Me),oe[Me+3]=I.constant}U.value=oe,U.needsUpdate=!0}return n.numPlanes=he,n.numIntersection=0,oe}}function mN(M){let n=new WeakMap;function s(I,R){return R===Y?I.mapping=ce:R===be&&(I.mapping=X),I}function l(I){if(I&&I.isTexture){const R=I.mapping;if(R===Y||R===be)if(n.has(I)){const U=n.get(I).texture;return s(U,I.mapping)}else{const U=I.image;if(U&&U.height>0){const V=new S5(U.height);return V.fromEquirectangularTexture(M,I),n.set(I,V),I.addEventListener("dispose",f),s(V.texture,I.mapping)}else return null}}return I}function f(I){const R=I.target;R.removeEventListener("dispose",f);const U=n.get(R);U!==void 0&&(n.delete(R),U.dispose())}function b(){n=new WeakMap}return{get:l,dispose:b}}class Dm extends Bm{constructor(n=-1,s=1,l=1,f=-1,b=.1,I=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=s,this.top=l,this.bottom=f,this.near=b,this.far=I,this.updateProjectionMatrix()}copy(n,s){return super.copy(n,s),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this}setViewOffset(n,s,l,f,b,I){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=s,this.view.offsetX=l,this.view.offsetY=f,this.view.width=b,this.view.height=I,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=(this.right-this.left)/(2*this.zoom),s=(this.top-this.bottom)/(2*this.zoom),l=(this.right+this.left)/2,f=(this.top+this.bottom)/2;let b=l-n,I=l+n,R=f+s,U=f-s;if(this.view!==null&&this.view.enabled){const V=(this.right-this.left)/this.view.fullWidth/this.zoom,$=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=V*this.view.offsetX,I=b+V*this.view.width,R-=$*this.view.offsetY,U=R-$*this.view.height}this.projectionMatrix.makeOrthographic(b,I,R,U,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const s=super.toJSON(n);return s.object.zoom=this.zoom,s.object.left=this.left,s.object.right=this.right,s.object.top=this.top,s.object.bottom=this.bottom,s.object.near=this.near,s.object.far=this.far,this.view!==null&&(s.object.view=Object.assign({},this.view)),s}}const X0=4,I5=[.125,.215,.35,.446,.526,.582],Tu=20,C2=new Dm,T5=new Kn;let E2=null,w2=0,x2=0,S2=!1;const Bu=(1+Math.sqrt(5))/2,K0=1/Bu,B5=[new Ve(-Bu,K0,0),new Ve(Bu,K0,0),new Ve(-K0,0,Bu),new Ve(K0,0,Bu),new Ve(0,Bu,-K0),new Ve(0,Bu,K0),new Ve(-1,1,-1),new Ve(1,1,-1),new Ve(-1,1,1),new Ve(1,1,1)];class I2{constructor(n){this._renderer=n,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(n,s=0,l=.1,f=100){E2=this._renderer.getRenderTarget(),w2=this._renderer.getActiveCubeFace(),x2=this._renderer.getActiveMipmapLevel(),S2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const b=this._allocateTargets();return b.depthBuffer=!0,this._sceneToCubeUV(n,l,f,b),s>0&&this._blur(b,0,0,s),this._applyPMREM(b),this._cleanup(b),b}fromEquirectangular(n,s=null){return this._fromTexture(n,s)}fromCubemap(n,s=null){return this._fromTexture(n,s)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=D5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=O5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(n){this._lodMax=Math.floor(Math.log2(n)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let n=0;n<this._lodPlanes.length;n++)this._lodPlanes[n].dispose()}_cleanup(n){this._renderer.setRenderTarget(E2,w2,x2),this._renderer.xr.enabled=S2,n.scissorTest=!1,Lm(n,0,0,n.width,n.height)}_fromTexture(n,s){n.mapping===ce||n.mapping===X?this._setSize(n.image.length===0?16:n.image[0].width||n.image[0].image.width):this._setSize(n.image.width/4),E2=this._renderer.getRenderTarget(),w2=this._renderer.getActiveCubeFace(),x2=this._renderer.getActiveMipmapLevel(),S2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const l=s||this._allocateTargets();return this._textureToCubeUV(n,l),this._applyPMREM(l),this._cleanup(l),l}_allocateTargets(){const n=3*Math.max(this._cubeSize,112),s=4*this._cubeSize,l={magFilter:Fn,minFilter:Fn,generateMipmaps:!1,type:pr,format:$e,colorSpace:Uo,depthBuffer:!1},f=R5(n,s,l);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==n||this._pingPongRenderTarget.height!==s){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=R5(n,s,l);const{_lodMax:b}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=pN(b)),this._blurMaterial=gN(b,n,s)}return f}_compileMaterial(n){const s=new Ds(this._lodPlanes[0],n);this._renderer.compile(s,C2)}_sceneToCubeUV(n,s,l,f){const R=new Vs(90,1,s,l),U=[1,-1,1,1,1,1],V=[1,1,1,-1,-1,-1],$=this._renderer,Z=$.autoClear,ee=$.toneMapping;$.getClearColor(T5),$.toneMapping=_t,$.autoClear=!1;const te=new Bc({name:"PMREM.Background",side:T,depthWrite:!1,depthTest:!1}),ae=new Ds(new xu,te);let he=!1;const oe=n.background;oe?oe.isColor&&(te.color.copy(oe),n.background=null,he=!0):(te.color.copy(T5),he=!0);for(let ne=0;ne<6;ne++){const Ie=ne%3;Ie===0?(R.up.set(0,U[ne],0),R.lookAt(V[ne],0,0)):Ie===1?(R.up.set(0,0,U[ne]),R.lookAt(0,V[ne],0)):(R.up.set(0,U[ne],0),R.lookAt(0,0,V[ne]));const Ce=this._cubeSize;Lm(f,Ie*Ce,ne>2?Ce:0,Ce,Ce),$.setRenderTarget(f),he&&$.render(ae,R),$.render(n,R)}ae.geometry.dispose(),ae.material.dispose(),$.toneMapping=ee,$.autoClear=Z,n.background=oe}_textureToCubeUV(n,s){const l=this._renderer,f=n.mapping===ce||n.mapping===X;f?(this._cubemapMaterial===null&&(this._cubemapMaterial=D5()),this._cubemapMaterial.uniforms.flipEnvMap.value=n.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=O5());const b=f?this._cubemapMaterial:this._equirectMaterial,I=new Ds(this._lodPlanes[0],b),R=b.uniforms;R.envMap.value=n;const U=this._cubeSize;Lm(s,0,0,3*U,2*U),l.setRenderTarget(s),l.render(I,C2)}_applyPMREM(n){const s=this._renderer,l=s.autoClear;s.autoClear=!1;const f=this._lodPlanes.length;for(let b=1;b<f;b++){const I=Math.sqrt(this._sigmas[b]*this._sigmas[b]-this._sigmas[b-1]*this._sigmas[b-1]),R=B5[(f-b-1)%B5.length];this._blur(n,b-1,b,I,R)}s.autoClear=l}_blur(n,s,l,f,b){const I=this._pingPongRenderTarget;this._halfBlur(n,I,s,l,f,"latitudinal",b),this._halfBlur(I,n,l,l,f,"longitudinal",b)}_halfBlur(n,s,l,f,b,I,R){const U=this._renderer,V=this._blurMaterial;I!=="latitudinal"&&I!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const $=3,Z=new Ds(this._lodPlanes[f],V),ee=V.uniforms,te=this._sizeLods[l]-1,ae=isFinite(b)?Math.PI/(2*te):2*Math.PI/(2*Tu-1),he=b/ae,oe=isFinite(b)?1+Math.floor($*he):Tu;oe>Tu&&console.warn(`sigmaRadians, ${b}, is too large and will clip, as it requested ${oe} samples when the maximum is set to ${Tu}`);const ne=[];let Ie=0;for(let je=0;je<Tu;++je){const Ye=je/he,Pe=Math.exp(-Ye*Ye/2);ne.push(Pe),je===0?Ie+=Pe:je<oe&&(Ie+=2*Pe)}for(let je=0;je<ne.length;je++)ne[je]=ne[je]/Ie;ee.envMap.value=n.texture,ee.samples.value=oe,ee.weights.value=ne,ee.latitudinal.value=I==="latitudinal",R&&(ee.poleAxis.value=R);const{_lodMax:Ce}=this;ee.dTheta.value=ae,ee.mipInt.value=Ce-l;const Me=this._sizeLods[f],Je=3*Me*(f>Ce-X0?f-Ce+X0:0),Qe=4*(this._cubeSize-Me);Lm(s,Je,Qe,3*Me,2*Me),U.setRenderTarget(s),U.render(Z,C2)}}function pN(M){const n=[],s=[],l=[];let f=M;const b=M-X0+1+I5.length;for(let I=0;I<b;I++){const R=Math.pow(2,f);s.push(R);let U=1/R;I>M-X0?U=I5[I-M+X0-1]:I===0&&(U=0),l.push(U);const V=1/(R-2),$=-V,Z=1+V,ee=[$,$,Z,$,Z,Z,$,$,Z,Z,$,Z],te=6,ae=6,he=3,oe=2,ne=1,Ie=new Float32Array(he*ae*te),Ce=new Float32Array(oe*ae*te),Me=new Float32Array(ne*ae*te);for(let Qe=0;Qe<te;Qe++){const je=Qe%3*2/3-1,Ye=Qe>2?0:-1,Pe=[je,Ye,0,je+2/3,Ye,0,je+2/3,Ye+1,0,je,Ye,0,je+2/3,Ye+1,0,je,Ye+1,0];Ie.set(Pe,he*ae*Qe),Ce.set(ee,oe*ae*Qe);const Re=[Qe,Qe,Qe,Qe,Qe,Qe];Me.set(Re,ne*ae*Qe)}const Je=new Zi;Je.setAttribute("position",new Gr(Ie,he)),Je.setAttribute("uv",new Gr(Ce,oe)),Je.setAttribute("faceIndex",new Gr(Me,ne)),n.push(Je),f>X0&&f--}return{lodPlanes:n,sizeLods:s,sigmas:l}}function R5(M,n,s){const l=new Ga(M,n,s);return l.texture.mapping=Te,l.texture.name="PMREM.cubeUv",l.scissorTest=!0,l}function Lm(M,n,s,l,f){M.viewport.set(n,s,l,f),M.scissor.set(n,s,l,f)}function gN(M,n,s){const l=new Float32Array(Tu),f=new Ve(0,1,0);return new Vo({name:"SphericalGaussianBlur",defines:{n:Tu,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/s,CUBEUV_MAX_MIP:`${M}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:l},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:f}},vertexShader:T2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:B,depthTest:!1,depthWrite:!1})}function O5(){return new Vo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:T2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:B,depthTest:!1,depthWrite:!1})}function D5(){return new Vo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:T2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:B,depthTest:!1,depthWrite:!1})}function T2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function AN(M){let n=new WeakMap,s=null;function l(R){if(R&&R.isTexture){const U=R.mapping,V=U===Y||U===be,$=U===ce||U===X;if(V||$){let Z=n.get(R);const ee=Z!==void 0?Z.texture.pmremVersion:0;if(R.isRenderTargetTexture&&R.pmremVersion!==ee)return s===null&&(s=new I2(M)),Z=V?s.fromEquirectangular(R,Z):s.fromCubemap(R,Z),Z.texture.pmremVersion=R.pmremVersion,n.set(R,Z),Z.texture;if(Z!==void 0)return Z.texture;{const te=R.image;return V&&te&&te.height>0||$&&te&&f(te)?(s===null&&(s=new I2(M)),Z=V?s.fromEquirectangular(R):s.fromCubemap(R),Z.texture.pmremVersion=R.pmremVersion,n.set(R,Z),R.addEventListener("dispose",b),Z.texture):null}}}return R}function f(R){let U=0;const V=6;for(let $=0;$<V;$++)R[$]!==void 0&&U++;return U===V}function b(R){const U=R.target;U.removeEventListener("dispose",b);const V=n.get(U);V!==void 0&&(n.delete(U),V.dispose())}function I(){n=new WeakMap,s!==null&&(s.dispose(),s=null)}return{get:l,dispose:I}}function vN(M){const n={};function s(l){if(n[l]!==void 0)return n[l];let f;switch(l){case"WEBGL_depth_texture":f=M.getExtension("WEBGL_depth_texture")||M.getExtension("MOZ_WEBGL_depth_texture")||M.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":f=M.getExtension("EXT_texture_filter_anisotropic")||M.getExtension("MOZ_EXT_texture_filter_anisotropic")||M.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":f=M.getExtension("WEBGL_compressed_texture_s3tc")||M.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||M.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":f=M.getExtension("WEBGL_compressed_texture_pvrtc")||M.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:f=M.getExtension(l)}return n[l]=f,f}return{has:function(l){return s(l)!==null},init:function(){s("EXT_color_buffer_float"),s("WEBGL_clip_cull_distance"),s("OES_texture_float_linear"),s("EXT_color_buffer_half_float"),s("WEBGL_multisampled_render_to_texture"),s("WEBGL_render_shared_exponent")},get:function(l){const f=s(l);return f===null&&console.warn("THREE.WebGLRenderer: "+l+" extension not supported."),f}}}function yN(M,n,s,l){const f={},b=new WeakMap;function I(Z){const ee=Z.target;ee.index!==null&&n.remove(ee.index);for(const ae in ee.attributes)n.remove(ee.attributes[ae]);for(const ae in ee.morphAttributes){const he=ee.morphAttributes[ae];for(let oe=0,ne=he.length;oe<ne;oe++)n.remove(he[oe])}ee.removeEventListener("dispose",I),delete f[ee.id];const te=b.get(ee);te&&(n.remove(te),b.delete(ee)),l.releaseStatesOfGeometry(ee),ee.isInstancedBufferGeometry===!0&&delete ee._maxInstanceCount,s.memory.geometries--}function R(Z,ee){return f[ee.id]===!0||(ee.addEventListener("dispose",I),f[ee.id]=!0,s.memory.geometries++),ee}function U(Z){const ee=Z.attributes;for(const ae in ee)n.update(ee[ae],M.ARRAY_BUFFER);const te=Z.morphAttributes;for(const ae in te){const he=te[ae];for(let oe=0,ne=he.length;oe<ne;oe++)n.update(he[oe],M.ARRAY_BUFFER)}}function V(Z){const ee=[],te=Z.index,ae=Z.attributes.position;let he=0;if(te!==null){const Ie=te.array;he=te.version;for(let Ce=0,Me=Ie.length;Ce<Me;Ce+=3){const Je=Ie[Ce+0],Qe=Ie[Ce+1],je=Ie[Ce+2];ee.push(Je,Qe,Qe,je,je,Je)}}else if(ae!==void 0){const Ie=ae.array;he=ae.version;for(let Ce=0,Me=Ie.length/3-1;Ce<Me;Ce+=3){const Je=Ce+0,Qe=Ce+1,je=Ce+2;ee.push(Je,Qe,Qe,je,je,Je)}}else return;const oe=new(cm(ee)?v2:A2)(ee,1);oe.version=he;const ne=b.get(Z);ne&&n.remove(ne),b.set(Z,oe)}function $(Z){const ee=b.get(Z);if(ee){const te=Z.index;te!==null&&ee.version<te.version&&V(Z)}else V(Z);return b.get(Z)}return{get:R,update:U,getWireframeAttribute:$}}function bN(M,n,s){let l;function f(ee){l=ee}let b,I;function R(ee){b=ee.type,I=ee.bytesPerElement}function U(ee,te){M.drawElements(l,te,b,ee*I),s.update(te,l,1)}function V(ee,te,ae){ae!==0&&(M.drawElementsInstanced(l,te,b,ee*I,ae),s.update(te,l,ae))}function $(ee,te,ae){if(ae===0)return;const he=n.get("WEBGL_multi_draw");if(he===null)for(let oe=0;oe<ae;oe++)this.render(ee[oe]/I,te[oe]);else{he.multiDrawElementsWEBGL(l,te,0,b,ee,0,ae);let oe=0;for(let ne=0;ne<ae;ne++)oe+=te[ne];s.update(oe,l,1)}}function Z(ee,te,ae,he){if(ae===0)return;const oe=n.get("WEBGL_multi_draw");if(oe===null)for(let ne=0;ne<ee.length;ne++)V(ee[ne]/I,te[ne],he[ne]);else{oe.multiDrawElementsInstancedWEBGL(l,te,0,b,ee,0,he,0,ae);let ne=0;for(let Ie=0;Ie<ae;Ie++)ne+=te[Ie];for(let Ie=0;Ie<he.length;Ie++)s.update(ne,l,he[Ie])}}this.setMode=f,this.setIndex=R,this.render=U,this.renderInstances=V,this.renderMultiDraw=$,this.renderMultiDrawInstances=Z}function MN(M){const n={geometries:0,textures:0},s={frame:0,calls:0,triangles:0,points:0,lines:0};function l(b,I,R){switch(s.calls++,I){case M.TRIANGLES:s.triangles+=R*(b/3);break;case M.LINES:s.lines+=R*(b/2);break;case M.LINE_STRIP:s.lines+=R*(b-1);break;case M.LINE_LOOP:s.lines+=R*b;break;case M.POINTS:s.points+=R*b;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",I);break}}function f(){s.calls=0,s.triangles=0,s.points=0,s.lines=0}return{memory:n,render:s,programs:null,autoReset:!0,reset:f,update:l}}function _N(M,n,s){const l=new WeakMap,f=new yr;function b(I,R,U){const V=I.morphTargetInfluences,$=R.morphAttributes.position||R.morphAttributes.normal||R.morphAttributes.color,Z=$!==void 0?$.length:0;let ee=l.get(R);if(ee===void 0||ee.count!==Z){let te=function(){Ye.dispose(),l.delete(R),R.removeEventListener("dispose",te)};ee!==void 0&&ee.texture.dispose();const ae=R.morphAttributes.position!==void 0,he=R.morphAttributes.normal!==void 0,oe=R.morphAttributes.color!==void 0,ne=R.morphAttributes.position||[],Ie=R.morphAttributes.normal||[],Ce=R.morphAttributes.color||[];let Me=0;ae===!0&&(Me=1),he===!0&&(Me=2),oe===!0&&(Me=3);let Je=R.attributes.position.count*Me,Qe=1;Je>n.maxTextureSize&&(Qe=Math.ceil(Je/n.maxTextureSize),Je=n.maxTextureSize);const je=new Float32Array(Je*Qe*4*Z),Ye=new R0(je,Je,Qe,Z);Ye.type=Pr,Ye.needsUpdate=!0;const Pe=Me*4;for(let Re=0;Re<Z;Re++){const qe=ne[Re],At=Ie[Re],lt=Ce[Re],bt=Je*Qe*4*Re;for(let kt=0;kt<qe.count;kt++){const tn=kt*Pe;ae===!0&&(f.fromBufferAttribute(qe,kt),je[bt+tn+0]=f.x,je[bt+tn+1]=f.y,je[bt+tn+2]=f.z,je[bt+tn+3]=0),he===!0&&(f.fromBufferAttribute(At,kt),je[bt+tn+4]=f.x,je[bt+tn+5]=f.y,je[bt+tn+6]=f.z,je[bt+tn+7]=0),oe===!0&&(f.fromBufferAttribute(lt,kt),je[bt+tn+8]=f.x,je[bt+tn+9]=f.y,je[bt+tn+10]=f.z,je[bt+tn+11]=lt.itemSize===4?f.w:1)}}ee={count:Z,texture:Ye,size:new sn(Je,Qe)},l.set(R,ee),R.addEventListener("dispose",te)}if(I.isInstancedMesh===!0&&I.morphTexture!==null)U.getUniforms().setValue(M,"morphTexture",I.morphTexture,s);else{let te=0;for(let he=0;he<V.length;he++)te+=V[he];const ae=R.morphTargetsRelative?1:1-te;U.getUniforms().setValue(M,"morphTargetBaseInfluence",ae),U.getUniforms().setValue(M,"morphTargetInfluences",V)}U.getUniforms().setValue(M,"morphTargetsTexture",ee.texture,s),U.getUniforms().setValue(M,"morphTargetsTextureSize",ee.size)}return{update:b}}class CN{constructor(n,s,l){if(this.renderer=n,this.DEFAULT_NUMVIEWS=2,this.maxNumViews=0,this.gl=l,this.extensions=s,this.available=this.extensions.has("OCULUS_multiview"),this.available){const b=this.extensions.get("OCULUS_multiview");this.maxNumViews=this.gl.getParameter(b.MAX_VIEWS_OVR),this.mat4=[],this.mat3=[],this.cameraArray=[];for(var f=0;f<this.maxNumViews;f++)this.mat4[f]=new ii,this.mat3[f]=new Bi}}getCameraArray(n){return n.isArrayCamera?n.cameras:(this.cameraArray[0]=n,this.cameraArray)}updateCameraProjectionMatricesUniform(n,s){for(var l=this.getCameraArray(n),f=0;f<l.length;f++)this.mat4[f].copy(l[f].projectionMatrix);s.setValue(this.gl,"projectionMatrices",this.mat4)}updateCameraViewMatricesUniform(n,s){for(var l=this.getCameraArray(n),f=0;f<l.length;f++)this.mat4[f].copy(l[f].matrixWorldInverse);s.setValue(this.gl,"viewMatrices",this.mat4)}updateObjectMatricesUniforms(n,s,l){for(var f=this.getCameraArray(s),b=0;b<f.length;b++)this.mat4[b].multiplyMatrices(f[b].matrixWorldInverse,n.matrixWorld),this.mat3[b].getNormalMatrix(this.mat4[b]);l.setValue(this.gl,"modelViewMatrices",this.mat4),l.setValue(this.gl,"normalMatrices",this.mat3)}}function EN(M,n,s,l){let f=new WeakMap;function b(U){const V=l.render.frame,$=U.geometry,Z=n.get(U,$);if(f.get(Z)!==V&&(n.update(Z),f.set(Z,V)),U.isInstancedMesh&&(U.hasEventListener("dispose",R)===!1&&U.addEventListener("dispose",R),f.get(U)!==V&&(s.update(U.instanceMatrix,M.ARRAY_BUFFER),U.instanceColor!==null&&s.update(U.instanceColor,M.ARRAY_BUFFER),f.set(U,V))),U.isSkinnedMesh){const ee=U.skeleton;f.get(ee)!==V&&(ee.update(),f.set(ee,V))}return Z}function I(){f=new WeakMap}function R(U){const V=U.target;V.removeEventListener("dispose",R),s.remove(V.instanceMatrix),V.instanceColor!==null&&s.remove(V.instanceColor)}return{update:b,dispose:I}}class B2 extends qr{constructor(n,s,l,f,b,I,R,U,V,$){if($=$!==void 0?$:Tt,$!==Tt&&$!==jt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");l===void 0&&$===Tt&&(l=ys),l===void 0&&$===jt&&(l=ca),super(null,f,b,I,R,U,$,l,V),this.isDepthTexture=!0,this.image={width:n,height:s},this.magFilter=R!==void 0?R:Zt,this.minFilter=U!==void 0?U:Zt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(n){return super.copy(n),this.compareFunction=n.compareFunction,this}toJSON(n){const s=super.toJSON(n);return this.compareFunction!==null&&(s.compareFunction=this.compareFunction),s}}const L5=new qr,P5=new B2(1,1);P5.compareFunction=bd;const N5=new R0,F5=new Ri,k5=new Bd,U5=[],G5=[],V5=new Float32Array(16),Q5=new Float32Array(9),H5=new Float32Array(4);function Y0(M,n,s){const l=M[0];if(l<=0||l>0)return M;const f=n*s;let b=U5[f];if(b===void 0&&(b=new Float32Array(f),U5[f]=b),n!==0){l.toArray(b,0);for(let I=1,R=0;I!==n;++I)R+=s,M[I].toArray(b,R)}return b}function Qs(M,n){if(M.length!==n.length)return!1;for(let s=0,l=M.length;s<l;s++)if(M[s]!==n[s])return!1;return!0}function Hs(M,n){for(let s=0,l=n.length;s<l;s++)M[s]=n[s]}function Pm(M,n){let s=G5[n];s===void 0&&(s=new Int32Array(n),G5[n]=s);for(let l=0;l!==n;++l)s[l]=M.allocateTextureUnit();return s}function wN(M,n){const s=this.cache;s[0]!==n&&(M.uniform1f(this.addr,n),s[0]=n)}function xN(M,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y)&&(M.uniform2f(this.addr,n.x,n.y),s[0]=n.x,s[1]=n.y);else{if(Qs(s,n))return;M.uniform2fv(this.addr,n),Hs(s,n)}}function SN(M,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z)&&(M.uniform3f(this.addr,n.x,n.y,n.z),s[0]=n.x,s[1]=n.y,s[2]=n.z);else if(n.r!==void 0)(s[0]!==n.r||s[1]!==n.g||s[2]!==n.b)&&(M.uniform3f(this.addr,n.r,n.g,n.b),s[0]=n.r,s[1]=n.g,s[2]=n.b);else{if(Qs(s,n))return;M.uniform3fv(this.addr,n),Hs(s,n)}}function IN(M,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z||s[3]!==n.w)&&(M.uniform4f(this.addr,n.x,n.y,n.z,n.w),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=n.w);else{if(Qs(s,n))return;M.uniform4fv(this.addr,n),Hs(s,n)}}function TN(M,n){const s=this.cache,l=n.elements;if(l===void 0){if(Qs(s,n))return;M.uniformMatrix2fv(this.addr,!1,n),Hs(s,n)}else{if(Qs(s,l))return;H5.set(l),M.uniformMatrix2fv(this.addr,!1,H5),Hs(s,l)}}function BN(M,n){const s=this.cache,l=n.elements;if(l===void 0){if(Qs(s,n))return;M.uniformMatrix3fv(this.addr,!1,n),Hs(s,n)}else{if(Qs(s,l))return;Q5.set(l),M.uniformMatrix3fv(this.addr,!1,Q5),Hs(s,l)}}function RN(M,n){const s=this.cache,l=n.elements;if(l===void 0){if(Qs(s,n))return;M.uniformMatrix4fv(this.addr,!1,n),Hs(s,n)}else{if(Qs(s,l))return;V5.set(l),M.uniformMatrix4fv(this.addr,!1,V5),Hs(s,l)}}function ON(M,n){const s=this.cache;s[0]!==n&&(M.uniform1i(this.addr,n),s[0]=n)}function DN(M,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y)&&(M.uniform2i(this.addr,n.x,n.y),s[0]=n.x,s[1]=n.y);else{if(Qs(s,n))return;M.uniform2iv(this.addr,n),Hs(s,n)}}function LN(M,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z)&&(M.uniform3i(this.addr,n.x,n.y,n.z),s[0]=n.x,s[1]=n.y,s[2]=n.z);else{if(Qs(s,n))return;M.uniform3iv(this.addr,n),Hs(s,n)}}function PN(M,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z||s[3]!==n.w)&&(M.uniform4i(this.addr,n.x,n.y,n.z,n.w),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=n.w);else{if(Qs(s,n))return;M.uniform4iv(this.addr,n),Hs(s,n)}}function NN(M,n){const s=this.cache;s[0]!==n&&(M.uniform1ui(this.addr,n),s[0]=n)}function FN(M,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y)&&(M.uniform2ui(this.addr,n.x,n.y),s[0]=n.x,s[1]=n.y);else{if(Qs(s,n))return;M.uniform2uiv(this.addr,n),Hs(s,n)}}function kN(M,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z)&&(M.uniform3ui(this.addr,n.x,n.y,n.z),s[0]=n.x,s[1]=n.y,s[2]=n.z);else{if(Qs(s,n))return;M.uniform3uiv(this.addr,n),Hs(s,n)}}function UN(M,n){const s=this.cache;if(n.x!==void 0)(s[0]!==n.x||s[1]!==n.y||s[2]!==n.z||s[3]!==n.w)&&(M.uniform4ui(this.addr,n.x,n.y,n.z,n.w),s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=n.w);else{if(Qs(s,n))return;M.uniform4uiv(this.addr,n),Hs(s,n)}}function GN(M,n,s){const l=this.cache,f=s.allocateTextureUnit();l[0]!==f&&(M.uniform1i(this.addr,f),l[0]=f);const b=this.type===M.SAMPLER_2D_SHADOW?P5:L5;s.setTexture2D(n||b,f)}function VN(M,n,s){const l=this.cache,f=s.allocateTextureUnit();l[0]!==f&&(M.uniform1i(this.addr,f),l[0]=f),s.setTexture3D(n||F5,f)}function QN(M,n,s){const l=this.cache,f=s.allocateTextureUnit();l[0]!==f&&(M.uniform1i(this.addr,f),l[0]=f),s.setTextureCube(n||k5,f)}function HN(M,n,s){const l=this.cache,f=s.allocateTextureUnit();l[0]!==f&&(M.uniform1i(this.addr,f),l[0]=f),s.setTexture2DArray(n||N5,f)}function zN(M){switch(M){case 5126:return wN;case 35664:return xN;case 35665:return SN;case 35666:return IN;case 35674:return TN;case 35675:return BN;case 35676:return RN;case 5124:case 35670:return ON;case 35667:case 35671:return DN;case 35668:case 35672:return LN;case 35669:case 35673:return PN;case 5125:return NN;case 36294:return FN;case 36295:return kN;case 36296:return UN;case 35678:case 36198:case 36298:case 36306:case 35682:return GN;case 35679:case 36299:case 36307:return VN;case 35680:case 36300:case 36308:case 36293:return QN;case 36289:case 36303:case 36311:case 36292:return HN}}function WN(M,n){M.uniform1fv(this.addr,n)}function jN(M,n){const s=Y0(n,this.size,2);M.uniform2fv(this.addr,s)}function $N(M,n){const s=Y0(n,this.size,3);M.uniform3fv(this.addr,s)}function XN(M,n){const s=Y0(n,this.size,4);M.uniform4fv(this.addr,s)}function KN(M,n){const s=Y0(n,this.size,4);M.uniformMatrix2fv(this.addr,!1,s)}function YN(M,n){const s=Y0(n,this.size,9);M.uniformMatrix3fv(this.addr,!1,s)}function qN(M,n){const s=Y0(n,this.size,16);M.uniformMatrix4fv(this.addr,!1,s)}function JN(M,n){M.uniform1iv(this.addr,n)}function ZN(M,n){M.uniform2iv(this.addr,n)}function eF(M,n){M.uniform3iv(this.addr,n)}function tF(M,n){M.uniform4iv(this.addr,n)}function nF(M,n){M.uniform1uiv(this.addr,n)}function iF(M,n){M.uniform2uiv(this.addr,n)}function rF(M,n){M.uniform3uiv(this.addr,n)}function sF(M,n){M.uniform4uiv(this.addr,n)}function aF(M,n,s){const l=this.cache,f=n.length,b=Pm(s,f);Qs(l,b)||(M.uniform1iv(this.addr,b),Hs(l,b));for(let I=0;I!==f;++I)s.setTexture2D(n[I]||L5,b[I])}function oF(M,n,s){const l=this.cache,f=n.length,b=Pm(s,f);Qs(l,b)||(M.uniform1iv(this.addr,b),Hs(l,b));for(let I=0;I!==f;++I)s.setTexture3D(n[I]||F5,b[I])}function lF(M,n,s){const l=this.cache,f=n.length,b=Pm(s,f);Qs(l,b)||(M.uniform1iv(this.addr,b),Hs(l,b));for(let I=0;I!==f;++I)s.setTextureCube(n[I]||k5,b[I])}function cF(M,n,s){const l=this.cache,f=n.length,b=Pm(s,f);Qs(l,b)||(M.uniform1iv(this.addr,b),Hs(l,b));for(let I=0;I!==f;++I)s.setTexture2DArray(n[I]||N5,b[I])}function uF(M){switch(M){case 5126:return WN;case 35664:return jN;case 35665:return $N;case 35666:return XN;case 35674:return KN;case 35675:return YN;case 35676:return qN;case 5124:case 35670:return JN;case 35667:case 35671:return ZN;case 35668:case 35672:return eF;case 35669:case 35673:return tF;case 5125:return nF;case 36294:return iF;case 36295:return rF;case 36296:return sF;case 35678:case 36198:case 36298:case 36306:case 35682:return aF;case 35679:case 36299:case 36307:return oF;case 35680:case 36300:case 36308:case 36293:return lF;case 36289:case 36303:case 36311:case 36292:return cF}}class hF{constructor(n,s,l){this.id=n,this.addr=l,this.cache=[],this.type=s.type,this.setValue=zN(s.type)}}class dF{constructor(n,s,l){this.id=n,this.addr=l,this.cache=[],this.type=s.type,this.size=s.size,this.setValue=uF(s.type)}}class fF{constructor(n){this.id=n,this.seq=[],this.map={}}setValue(n,s,l){const f=this.seq;for(let b=0,I=f.length;b!==I;++b){const R=f[b];R.setValue(n,s[R.id],l)}}}const R2=/(\w+)(\])?(\[|\.)?/g;function z5(M,n){M.seq.push(n),M.map[n.id]=n}function mF(M,n,s){const l=M.name,f=l.length;for(R2.lastIndex=0;;){const b=R2.exec(l),I=R2.lastIndex;let R=b[1];const U=b[2]==="]",V=b[3];if(U&&(R=R|0),V===void 0||V==="["&&I+2===f){z5(s,V===void 0?new hF(R,M,n):new dF(R,M,n));break}else{let Z=s.map[R];Z===void 0&&(Z=new fF(R),z5(s,Z)),s=Z}}}class Nm{constructor(n,s){this.seq=[],this.map={};const l=n.getProgramParameter(s,n.ACTIVE_UNIFORMS);for(let f=0;f<l;++f){const b=n.getActiveUniform(s,f),I=n.getUniformLocation(s,b.name);mF(b,I,this)}}setValue(n,s,l,f){const b=this.map[s];b!==void 0&&b.setValue(n,l,f)}setOptional(n,s,l){const f=s[l];f!==void 0&&this.setValue(n,l,f)}static upload(n,s,l,f){for(let b=0,I=s.length;b!==I;++b){const R=s[b],U=l[R.id];U.needsUpdate!==!1&&R.setValue(n,U.value,f)}}static seqWithValue(n,s){const l=[];for(let f=0,b=n.length;f!==b;++f){const I=n[f];I.id in s&&l.push(I)}return l}}function W5(M,n,s){const l=M.createShader(n);return M.shaderSource(l,s),M.compileShader(l),l}const pF=37297;let gF=0;function AF(M,n){const s=M.split(`
`),l=[],f=Math.max(n-6,0),b=Math.min(n+6,s.length);for(let I=f;I<b;I++){const R=I+1;l.push(`${R===n?">":" "} ${R}: ${s[I]}`)}return l.join(`
`)}function vF(M){const n=Or.getPrimaries(Or.workingColorSpace),s=Or.getPrimaries(M);let l;switch(n===s?l="":n===bu&&s===yu?l="LinearDisplayP3ToLinearSRGB":n===yu&&s===bu&&(l="LinearSRGBToLinearDisplayP3"),M){case Uo:case Au:return[l,"LinearTransferOETF"];case gr:case S0:return[l,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",M),[l,"LinearTransferOETF"]}}function j5(M,n,s){const l=M.getShaderParameter(n,M.COMPILE_STATUS),f=M.getShaderInfoLog(n).trim();if(l&&f==="")return"";const b=/ERROR: 0:(\d+)/.exec(f);if(b){const I=parseInt(b[1]);return s.toUpperCase()+`

`+f+`

`+AF(M.getShaderSource(n),I)}else return f}function yF(M,n){const s=vF(n);return`vec4 ${M}( vec4 value ) { return ${s[0]}( ${s[1]}( value ) ); }`}function bF(M,n){let s;switch(n){case Kt:s="Linear";break;case Dt:s="Reinhard";break;case Nt:s="OptimizedCineon";break;case St:s="ACESFilmic";break;case _e:s="AgX";break;case De:s="Neutral";break;case pe:s="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",n),s="Linear"}return"vec3 "+M+"( vec3 color ) { return "+s+"ToneMapping( color ); }"}function MF(M){return[M.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",M.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Od).join(`
`)}function _F(M){const n=[];for(const s in M){const l=M[s];l!==!1&&n.push("#define "+s+" "+l)}return n.join(`
`)}function CF(M,n){const s={},l=M.getProgramParameter(n,M.ACTIVE_ATTRIBUTES);for(let f=0;f<l;f++){const b=M.getActiveAttrib(n,f),I=b.name;let R=1;b.type===M.FLOAT_MAT2&&(R=2),b.type===M.FLOAT_MAT3&&(R=3),b.type===M.FLOAT_MAT4&&(R=4),s[I]={type:b.type,location:M.getAttribLocation(n,I),locationSize:R}}return s}function Od(M){return M!==""}function $5(M,n){const s=n.numSpotLightShadows+n.numSpotLightMaps-n.numSpotLightShadowsWithMaps;return M.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,n.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,s).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,n.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function X5(M,n){return M.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}const EF=/^[ \t]*#include +<([\w\d./]+)>/gm;function O2(M){return M.replace(EF,xF)}const wF=new Map;function xF(M,n){let s=$i[n];if(s===void 0){const l=wF.get(n);if(l!==void 0)s=$i[l],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',n,l);else throw new Error("Can not resolve #include <"+n+">")}return O2(s)}const SF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function K5(M){return M.replace(SF,IF)}function IF(M,n,s,l){let f="";for(let b=parseInt(n);b<parseInt(s);b++)f+=l.replace(/\[\s*i\s*\]/g,"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return f}function Y5(M){let n=`precision ${M.precision} float;
	precision ${M.precision} int;
	precision ${M.precision} sampler2D;
	precision ${M.precision} samplerCube;
	precision ${M.precision} sampler3D;
	precision ${M.precision} sampler2DArray;
	precision ${M.precision} sampler2DShadow;
	precision ${M.precision} samplerCubeShadow;
	precision ${M.precision} sampler2DArrayShadow;
	precision ${M.precision} isampler2D;
	precision ${M.precision} isampler3D;
	precision ${M.precision} isamplerCube;
	precision ${M.precision} isampler2DArray;
	precision ${M.precision} usampler2D;
	precision ${M.precision} usampler3D;
	precision ${M.precision} usamplerCube;
	precision ${M.precision} usampler2DArray;
	`;return M.precision==="highp"?n+=`
#define HIGH_PRECISION`:M.precision==="mediump"?n+=`
#define MEDIUM_PRECISION`:M.precision==="lowp"&&(n+=`
#define LOW_PRECISION`),n}function TF(M){let n="SHADOWMAP_TYPE_BASIC";return M.shadowMapType===S?n="SHADOWMAP_TYPE_PCF":M.shadowMapType===x?n="SHADOWMAP_TYPE_PCF_SOFT":M.shadowMapType===C&&(n="SHADOWMAP_TYPE_VSM"),n}function BF(M){let n="ENVMAP_TYPE_CUBE";if(M.envMap)switch(M.envMapMode){case ce:case X:n="ENVMAP_TYPE_CUBE";break;case Te:n="ENVMAP_TYPE_CUBE_UV";break}return n}function RF(M){let n="ENVMAP_MODE_REFLECTION";if(M.envMap)switch(M.envMapMode){case X:n="ENVMAP_MODE_REFRACTION";break}return n}function OF(M){let n="ENVMAP_BLENDING_NONE";if(M.envMap)switch(M.combine){case Et:n="ENVMAP_BLENDING_MULTIPLY";break;case xt:n="ENVMAP_BLENDING_MIX";break;case en:n="ENVMAP_BLENDING_ADD";break}return n}function DF(M){const n=M.envMapCubeUVHeight;if(n===null)return null;const s=Math.log2(n)-2,l=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,s),7*16)),texelHeight:l,maxMip:s}}function LF(M,n,s,l){const f=M.getContext(),b=s.defines;let I=s.vertexShader,R=s.fragmentShader;const U=TF(s),V=BF(s),$=RF(s),Z=OF(s),ee=DF(s),te=MF(s),ae=_F(b),he=f.createProgram();let oe,ne,Ie=s.glslVersion?"#version "+s.glslVersion+`
`:"";const Ce=s.numMultiviewViews;s.isRawShaderMaterial?(oe=["#define SHADER_TYPE "+s.shaderType,"#define SHADER_NAME "+s.shaderName,ae].filter(Od).join(`
`),oe.length>0&&(oe+=`
`),ne=["#define SHADER_TYPE "+s.shaderType,"#define SHADER_NAME "+s.shaderName,ae].filter(Od).join(`
`),ne.length>0&&(ne+=`
`)):(oe=[Y5(s),"#define SHADER_TYPE "+s.shaderType,"#define SHADER_NAME "+s.shaderName,ae,s.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",s.batching?"#define USE_BATCHING":"",s.instancing?"#define USE_INSTANCING":"",s.instancingColor?"#define USE_INSTANCING_COLOR":"",s.instancingMorph?"#define USE_INSTANCING_MORPH":"",s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+$:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",s.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",s.displacementMap?"#define USE_DISPLACEMENTMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.anisotropy?"#define USE_ANISOTROPY":"",s.anisotropyMap?"#define USE_ANISOTROPYMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",s.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaHash?"#define USE_ALPHAHASH":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",s.mapUv?"#define MAP_UV "+s.mapUv:"",s.alphaMapUv?"#define ALPHAMAP_UV "+s.alphaMapUv:"",s.lightMapUv?"#define LIGHTMAP_UV "+s.lightMapUv:"",s.aoMapUv?"#define AOMAP_UV "+s.aoMapUv:"",s.emissiveMapUv?"#define EMISSIVEMAP_UV "+s.emissiveMapUv:"",s.bumpMapUv?"#define BUMPMAP_UV "+s.bumpMapUv:"",s.normalMapUv?"#define NORMALMAP_UV "+s.normalMapUv:"",s.displacementMapUv?"#define DISPLACEMENTMAP_UV "+s.displacementMapUv:"",s.metalnessMapUv?"#define METALNESSMAP_UV "+s.metalnessMapUv:"",s.roughnessMapUv?"#define ROUGHNESSMAP_UV "+s.roughnessMapUv:"",s.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+s.anisotropyMapUv:"",s.clearcoatMapUv?"#define CLEARCOATMAP_UV "+s.clearcoatMapUv:"",s.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+s.clearcoatNormalMapUv:"",s.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+s.clearcoatRoughnessMapUv:"",s.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+s.iridescenceMapUv:"",s.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+s.iridescenceThicknessMapUv:"",s.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+s.sheenColorMapUv:"",s.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+s.sheenRoughnessMapUv:"",s.specularMapUv?"#define SPECULARMAP_UV "+s.specularMapUv:"",s.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+s.specularColorMapUv:"",s.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+s.specularIntensityMapUv:"",s.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+s.transmissionMapUv:"",s.thicknessMapUv?"#define THICKNESSMAP_UV "+s.thicknessMapUv:"",s.vertexTangents&&s.flatShading===!1?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUv1s?"#define USE_UV1":"",s.vertexUv2s?"#define USE_UV2":"",s.vertexUv3s?"#define USE_UV3":"",s.pointsUvs?"#define USE_POINTS_UV":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&s.flatShading===!1?"#define USE_MORPHNORMALS":"",s.morphColors?"#define USE_MORPHCOLORS":"",s.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",s.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+s.morphTextureStride:"",s.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+s.morphTargetsCount:"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+U:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.numLightProbes>0?"#define USE_LIGHT_PROBES":"",s.useLegacyLights?"#define LEGACY_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Od).join(`
`),ne=[Y5(s),"#define SHADER_TYPE "+s.shaderType,"#define SHADER_NAME "+s.shaderName,ae,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+V:"",s.envMap?"#define "+$:"",s.envMap?"#define "+Z:"",ee?"#define CUBEUV_TEXEL_WIDTH "+ee.texelWidth:"",ee?"#define CUBEUV_TEXEL_HEIGHT "+ee.texelHeight:"",ee?"#define CUBEUV_MAX_MIP "+ee.maxMip+".0":"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",s.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.anisotropy?"#define USE_ANISOTROPY":"",s.anisotropyMap?"#define USE_ANISOTROPYMAP":"",s.clearcoat?"#define USE_CLEARCOAT":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.dispersion?"#define USE_DISPERSION":"",s.iridescence?"#define USE_IRIDESCENCE":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",s.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaTest?"#define USE_ALPHATEST":"",s.alphaHash?"#define USE_ALPHAHASH":"",s.sheen?"#define USE_SHEEN":"",s.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.vertexTangents&&s.flatShading===!1?"#define USE_TANGENT":"",s.vertexColors||s.instancingColor?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUv1s?"#define USE_UV1":"",s.vertexUv2s?"#define USE_UV2":"",s.vertexUv3s?"#define USE_UV3":"",s.pointsUvs?"#define USE_POINTS_UV":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+U:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.numLightProbes>0?"#define USE_LIGHT_PROBES":"",s.useLegacyLights?"#define LEGACY_LIGHTS":"",s.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",s.toneMapping!==_t?"#define TONE_MAPPING":"",s.toneMapping!==_t?$i.tonemapping_pars_fragment:"",s.toneMapping!==_t?bF("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.opaque?"#define OPAQUE":"",$i.colorspace_pars_fragment,yF("linearToOutputTexel",s.outputColorSpace),s.useDepthPacking?"#define DEPTH_PACKING "+s.depthPacking:"",`
`].filter(Od).join(`
`)),I=O2(I),I=$5(I,s),I=X5(I,s),R=O2(R),R=$5(R,s),R=X5(R,s),I=K5(I),R=K5(R),s.isRawShaderMaterial!==!0&&(Ie=`#version 300 es
`,oe=[te,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+oe,ne=["#define varying in",s.glslVersion===Md?"":"layout(location = 0) out highp vec4 pc_fragColor;",s.glslVersion===Md?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ne,Ce>0&&(oe=["#extension GL_OVR_multiview : require","layout(num_views = "+Ce+") in;","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+oe,oe=oe.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join(`
`),["uniform mat4 modelViewMatrices["+Ce+"];","uniform mat4 projectionMatrices["+Ce+"];","uniform mat4 viewMatrices["+Ce+"];","uniform mat3 normalMatrices["+Ce+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join(`
`)),ne=["#extension GL_OVR_multiview : require","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+ne,ne=ne.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+Ce+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join(`
`))));const Me=Ie+oe+I,Je=Ie+ne+R,Qe=W5(f,f.VERTEX_SHADER,Me),je=W5(f,f.FRAGMENT_SHADER,Je);f.attachShader(he,Qe),f.attachShader(he,je),s.index0AttributeName!==void 0?f.bindAttribLocation(he,0,s.index0AttributeName):s.morphTargets===!0&&f.bindAttribLocation(he,0,"position"),f.linkProgram(he);function Ye(At){if(M.debug.checkShaderErrors){const lt=f.getProgramInfoLog(he).trim(),bt=f.getShaderInfoLog(Qe).trim(),kt=f.getShaderInfoLog(je).trim();let tn=!0,In=!0;if(f.getProgramParameter(he,f.LINK_STATUS)===!1)if(tn=!1,typeof M.debug.onShaderError=="function")M.debug.onShaderError(f,he,Qe,je);else{const Gt=j5(f,Qe,"vertex"),bn=j5(f,je,"fragment");console.error("THREE.WebGLProgram: Shader Error "+f.getError()+" - VALIDATE_STATUS "+f.getProgramParameter(he,f.VALIDATE_STATUS)+`

Material Name: `+At.name+`
Material Type: `+At.type+`

Program Info Log: `+lt+`
`+Gt+`
`+bn)}else lt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",lt):(bt===""||kt==="")&&(In=!1);In&&(At.diagnostics={runnable:tn,programLog:lt,vertexShader:{log:bt,prefix:oe},fragmentShader:{log:kt,prefix:ne}})}f.deleteShader(Qe),f.deleteShader(je),Pe=new Nm(f,he),Re=CF(f,he)}let Pe;this.getUniforms=function(){return Pe===void 0&&Ye(this),Pe};let Re;this.getAttributes=function(){return Re===void 0&&Ye(this),Re};let qe=s.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return qe===!1&&(qe=f.getProgramParameter(he,pF)),qe},this.destroy=function(){l.releaseStatesOfProgram(this),f.deleteProgram(he),this.program=void 0},this.type=s.shaderType,this.name=s.shaderName,this.id=gF++,this.cacheKey=n,this.usedTimes=1,this.program=he,this.vertexShader=Qe,this.fragmentShader=je,this.numMultiviewViews=Ce,this}let PF=0;class NF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(n){const s=n.vertexShader,l=n.fragmentShader,f=this._getShaderStage(s),b=this._getShaderStage(l),I=this._getShaderCacheForMaterial(n);return I.has(f)===!1&&(I.add(f),f.usedTimes++),I.has(b)===!1&&(I.add(b),b.usedTimes++),this}remove(n){const s=this.materialCache.get(n);for(const l of s)l.usedTimes--,l.usedTimes===0&&this.shaderCache.delete(l.code);return this.materialCache.delete(n),this}getVertexShaderID(n){return this._getShaderStage(n.vertexShader).id}getFragmentShaderID(n){return this._getShaderStage(n.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(n){const s=this.materialCache;let l=s.get(n);return l===void 0&&(l=new Set,s.set(n,l)),l}_getShaderStage(n){const s=this.shaderCache;let l=s.get(n);return l===void 0&&(l=new FF(n),s.set(n,l)),l}}class FF{constructor(n){this.id=PF++,this.code=n,this.usedTimes=0}}function kF(M,n,s,l,f,b,I){const R=new vm,U=new NF,V=new Set,$=[],Z=f.logarithmicDepthBuffer,ee=f.vertexTextures;let te=f.precision;const ae={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function he(Pe){return V.add(Pe),Pe===0?"uv":`uv${Pe}`}function oe(Pe,Re,qe,At,lt){const bt=At.fog,kt=lt.geometry,tn=Pe.isMeshStandardMaterial?At.environment:null,In=(Pe.isMeshStandardMaterial?s:n).get(Pe.envMap||tn),Gt=In&&In.mapping===Te?In.image.height:null,bn=ae[Pe.type];Pe.precision!==null&&(te=f.getMaxPrecision(Pe.precision),te!==Pe.precision&&console.warn("THREE.WebGLProgram.getParameters:",Pe.precision,"not supported, using",te,"instead."));const wn=kt.morphAttributes.position||kt.morphAttributes.normal||kt.morphAttributes.color,ti=wn!==void 0?wn.length:0;let er=0;kt.morphAttributes.position!==void 0&&(er=1),kt.morphAttributes.normal!==void 0&&(er=2),kt.morphAttributes.color!==void 0&&(er=3);let Dr,is,Er,$r;if(bn){const zs=Qo[bn];Dr=zs.vertexShader,is=zs.fragmentShader}else Dr=Pe.vertexShader,is=Pe.fragmentShader,U.update(Pe),Er=U.getVertexShaderID(Pe),$r=U.getFragmentShaderID(Pe);const si=M.getRenderTarget(),ln=si&&si.isWebGLMultiviewRenderTarget?si.numViews:0,Rn=lt.isInstancedMesh===!0,Nn=lt.isBatchedMesh===!0,Mt=!!Pe.map,cn=!!Pe.matcap,Xt=!!In,vn=!!Pe.aoMap,An=!!Pe.lightMap,pn=!!Pe.bumpMap,kn=!!Pe.normalMap,Xn=!!Pe.displacementMap,Ii=!!Pe.emissiveMap,Ni=!!Pe.metalnessMap,wr=!!Pe.roughnessMap,ps=Pe.anisotropy>0,rs=Pe.clearcoat>0,Xe=Pe.dispersion>0,Oe=Pe.iridescence>0,zt=Pe.sheen>0,an=Pe.transmission>0,fn=ps&&!!Pe.anisotropyMap,un=rs&&!!Pe.clearcoatMap,oi=rs&&!!Pe.clearcoatNormalMap,Tn=rs&&!!Pe.clearcoatRoughnessMap,Yn=Oe&&!!Pe.iridescenceMap,Nr=Oe&&!!Pe.iridescenceThicknessMap,qn=zt&&!!Pe.sheenColorMap,ci=zt&&!!Pe.sheenRoughnessMap,Xi=!!Pe.specularMap,bi=!!Pe.specularColorMap,st=!!Pe.specularIntensityMap,gn=an&&!!Pe.transmissionMap,xn=an&&!!Pe.thicknessMap,li=!!Pe.gradientMap,Wn=!!Pe.alphaMap,Ki=Pe.alphaTest>0,jn=!!Pe.alphaHash,Un=!!Pe.extensions;let ir=_t;Pe.toneMapped&&(si===null||si.isXRRenderTarget===!0)&&(ir=M.toneMapping);const Ci={shaderID:bn,shaderType:Pe.type,shaderName:Pe.name,vertexShader:Dr,fragmentShader:is,defines:Pe.defines,customVertexShaderID:Er,customFragmentShaderID:$r,isRawShaderMaterial:Pe.isRawShaderMaterial===!0,glslVersion:Pe.glslVersion,precision:te,batching:Nn,instancing:Rn,instancingColor:Rn&&lt.instanceColor!==null,instancingMorph:Rn&&lt.morphTexture!==null,supportsVertexTextures:ee,numMultiviewViews:ln,outputColorSpace:si===null?M.outputColorSpace:si.isXRRenderTarget===!0?si.texture.colorSpace:Uo,alphaToCoverage:!!Pe.alphaToCoverage,map:Mt,matcap:cn,envMap:Xt,envMapMode:Xt&&In.mapping,envMapCubeUVHeight:Gt,aoMap:vn,lightMap:An,bumpMap:pn,normalMap:kn,displacementMap:ee&&Xn,emissiveMap:Ii,normalMapObjectSpace:kn&&Pe.normalMapType===ll,normalMapTangentSpace:kn&&Pe.normalMapType===pa,metalnessMap:Ni,roughnessMap:wr,anisotropy:ps,anisotropyMap:fn,clearcoat:rs,clearcoatMap:un,clearcoatNormalMap:oi,clearcoatRoughnessMap:Tn,dispersion:Xe,iridescence:Oe,iridescenceMap:Yn,iridescenceThicknessMap:Nr,sheen:zt,sheenColorMap:qn,sheenRoughnessMap:ci,specularMap:Xi,specularColorMap:bi,specularIntensityMap:st,transmission:an,transmissionMap:gn,thicknessMap:xn,gradientMap:li,opaque:Pe.transparent===!1&&Pe.blending===P&&Pe.alphaToCoverage===!1,alphaMap:Wn,alphaTest:Ki,alphaHash:jn,combine:Pe.combine,mapUv:Mt&&he(Pe.map.channel),aoMapUv:vn&&he(Pe.aoMap.channel),lightMapUv:An&&he(Pe.lightMap.channel),bumpMapUv:pn&&he(Pe.bumpMap.channel),normalMapUv:kn&&he(Pe.normalMap.channel),displacementMapUv:Xn&&he(Pe.displacementMap.channel),emissiveMapUv:Ii&&he(Pe.emissiveMap.channel),metalnessMapUv:Ni&&he(Pe.metalnessMap.channel),roughnessMapUv:wr&&he(Pe.roughnessMap.channel),anisotropyMapUv:fn&&he(Pe.anisotropyMap.channel),clearcoatMapUv:un&&he(Pe.clearcoatMap.channel),clearcoatNormalMapUv:oi&&he(Pe.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Tn&&he(Pe.clearcoatRoughnessMap.channel),iridescenceMapUv:Yn&&he(Pe.iridescenceMap.channel),iridescenceThicknessMapUv:Nr&&he(Pe.iridescenceThicknessMap.channel),sheenColorMapUv:qn&&he(Pe.sheenColorMap.channel),sheenRoughnessMapUv:ci&&he(Pe.sheenRoughnessMap.channel),specularMapUv:Xi&&he(Pe.specularMap.channel),specularColorMapUv:bi&&he(Pe.specularColorMap.channel),specularIntensityMapUv:st&&he(Pe.specularIntensityMap.channel),transmissionMapUv:gn&&he(Pe.transmissionMap.channel),thicknessMapUv:xn&&he(Pe.thicknessMap.channel),alphaMapUv:Wn&&he(Pe.alphaMap.channel),vertexTangents:!!kt.attributes.tangent&&(kn||ps),vertexColors:Pe.vertexColors,vertexAlphas:Pe.vertexColors===!0&&!!kt.attributes.color&&kt.attributes.color.itemSize===4,pointsUvs:lt.isPoints===!0&&!!kt.attributes.uv&&(Mt||Wn),fog:!!bt,useFog:Pe.fog===!0,fogExp2:!!bt&&bt.isFogExp2,flatShading:Pe.flatShading===!0,sizeAttenuation:Pe.sizeAttenuation===!0,logarithmicDepthBuffer:Z,skinning:lt.isSkinnedMesh===!0,morphTargets:kt.morphAttributes.position!==void 0,morphNormals:kt.morphAttributes.normal!==void 0,morphColors:kt.morphAttributes.color!==void 0,morphTargetsCount:ti,morphTextureStride:er,numDirLights:Re.directional.length,numPointLights:Re.point.length,numSpotLights:Re.spot.length,numSpotLightMaps:Re.spotLightMap.length,numRectAreaLights:Re.rectArea.length,numHemiLights:Re.hemi.length,numDirLightShadows:Re.directionalShadowMap.length,numPointLightShadows:Re.pointShadowMap.length,numSpotLightShadows:Re.spotShadowMap.length,numSpotLightShadowsWithMaps:Re.numSpotLightShadowsWithMaps,numLightProbes:Re.numLightProbes,numClippingPlanes:I.numPlanes,numClipIntersection:I.numIntersection,dithering:Pe.dithering,shadowMapEnabled:M.shadowMap.enabled&&qe.length>0,shadowMapType:M.shadowMap.type,toneMapping:ir,useLegacyLights:M._useLegacyLights,decodeVideoTexture:Mt&&Pe.map.isVideoTexture===!0&&Or.getTransfer(Pe.map.colorSpace)===jr,premultipliedAlpha:Pe.premultipliedAlpha,doubleSided:Pe.side===O,flipSided:Pe.side===T,useDepthPacking:Pe.depthPacking>=0,depthPacking:Pe.depthPacking||0,index0AttributeName:Pe.index0AttributeName,extensionClipCullDistance:Un&&Pe.extensions.clipCullDistance===!0&&l.has("WEBGL_clip_cull_distance"),extensionMultiDraw:Un&&Pe.extensions.multiDraw===!0&&l.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:l.has("KHR_parallel_shader_compile"),customProgramCacheKey:Pe.customProgramCacheKey()};return Ci.vertexUv1s=V.has(1),Ci.vertexUv2s=V.has(2),Ci.vertexUv3s=V.has(3),V.clear(),Ci}function ne(Pe){const Re=[];if(Pe.shaderID?Re.push(Pe.shaderID):(Re.push(Pe.customVertexShaderID),Re.push(Pe.customFragmentShaderID)),Pe.defines!==void 0)for(const qe in Pe.defines)Re.push(qe),Re.push(Pe.defines[qe]);return Pe.isRawShaderMaterial===!1&&(Ie(Re,Pe),Ce(Re,Pe),Re.push(M.outputColorSpace)),Re.push(Pe.customProgramCacheKey),Re.join()}function Ie(Pe,Re){Pe.push(Re.precision),Pe.push(Re.outputColorSpace),Pe.push(Re.envMapMode),Pe.push(Re.envMapCubeUVHeight),Pe.push(Re.mapUv),Pe.push(Re.alphaMapUv),Pe.push(Re.lightMapUv),Pe.push(Re.aoMapUv),Pe.push(Re.bumpMapUv),Pe.push(Re.normalMapUv),Pe.push(Re.displacementMapUv),Pe.push(Re.emissiveMapUv),Pe.push(Re.metalnessMapUv),Pe.push(Re.roughnessMapUv),Pe.push(Re.anisotropyMapUv),Pe.push(Re.clearcoatMapUv),Pe.push(Re.clearcoatNormalMapUv),Pe.push(Re.clearcoatRoughnessMapUv),Pe.push(Re.iridescenceMapUv),Pe.push(Re.iridescenceThicknessMapUv),Pe.push(Re.sheenColorMapUv),Pe.push(Re.sheenRoughnessMapUv),Pe.push(Re.specularMapUv),Pe.push(Re.specularColorMapUv),Pe.push(Re.specularIntensityMapUv),Pe.push(Re.transmissionMapUv),Pe.push(Re.thicknessMapUv),Pe.push(Re.combine),Pe.push(Re.fogExp2),Pe.push(Re.sizeAttenuation),Pe.push(Re.morphTargetsCount),Pe.push(Re.morphAttributeCount),Pe.push(Re.numDirLights),Pe.push(Re.numPointLights),Pe.push(Re.numSpotLights),Pe.push(Re.numSpotLightMaps),Pe.push(Re.numHemiLights),Pe.push(Re.numRectAreaLights),Pe.push(Re.numDirLightShadows),Pe.push(Re.numPointLightShadows),Pe.push(Re.numSpotLightShadows),Pe.push(Re.numSpotLightShadowsWithMaps),Pe.push(Re.numLightProbes),Pe.push(Re.shadowMapType),Pe.push(Re.toneMapping),Pe.push(Re.numClippingPlanes),Pe.push(Re.numClipIntersection),Pe.push(Re.depthPacking)}function Ce(Pe,Re){R.disableAll(),Re.supportsVertexTextures&&R.enable(0),Re.instancing&&R.enable(1),Re.instancingColor&&R.enable(2),Re.instancingMorph&&R.enable(3),Re.matcap&&R.enable(4),Re.envMap&&R.enable(5),Re.normalMapObjectSpace&&R.enable(6),Re.normalMapTangentSpace&&R.enable(7),Re.clearcoat&&R.enable(8),Re.iridescence&&R.enable(9),Re.alphaTest&&R.enable(10),Re.vertexColors&&R.enable(11),Re.vertexAlphas&&R.enable(12),Re.vertexUv1s&&R.enable(13),Re.vertexUv2s&&R.enable(14),Re.vertexUv3s&&R.enable(15),Re.vertexTangents&&R.enable(16),Re.anisotropy&&R.enable(17),Re.alphaHash&&R.enable(18),Re.batching&&R.enable(19),Re.dispersion&&R.enable(20),Pe.push(R.mask),R.disableAll(),Re.fog&&R.enable(0),Re.useFog&&R.enable(1),Re.flatShading&&R.enable(2),Re.logarithmicDepthBuffer&&R.enable(3),Re.skinning&&R.enable(4),Re.morphTargets&&R.enable(5),Re.morphNormals&&R.enable(6),Re.morphColors&&R.enable(7),Re.premultipliedAlpha&&R.enable(8),Re.shadowMapEnabled&&R.enable(9),Re.useLegacyLights&&R.enable(10),Re.doubleSided&&R.enable(11),Re.flipSided&&R.enable(12),Re.useDepthPacking&&R.enable(13),Re.dithering&&R.enable(14),Re.transmission&&R.enable(15),Re.sheen&&R.enable(16),Re.opaque&&R.enable(17),Re.pointsUvs&&R.enable(18),Re.decodeVideoTexture&&R.enable(19),Re.alphaToCoverage&&R.enable(20),Re.numMultiviewViews&&R.enable(21),Pe.push(R.mask)}function Me(Pe){const Re=ae[Pe.type];let qe;if(Re){const At=Qo[Re];qe=C5.clone(At.uniforms)}else qe=Pe.uniforms;return qe}function Je(Pe,Re){let qe;for(let At=0,lt=$.length;At<lt;At++){const bt=$[At];if(bt.cacheKey===Re){qe=bt,++qe.usedTimes;break}}return qe===void 0&&(qe=new LF(M,Re,Pe,b),$.push(qe)),qe}function Qe(Pe){if(--Pe.usedTimes===0){const Re=$.indexOf(Pe);$[Re]=$[$.length-1],$.pop(),Pe.destroy()}}function je(Pe){U.remove(Pe)}function Ye(){U.dispose()}return{getParameters:oe,getProgramCacheKey:ne,getUniforms:Me,acquireProgram:Je,releaseProgram:Qe,releaseShaderCache:je,programs:$,dispose:Ye}}function UF(){let M=new WeakMap;function n(b){let I=M.get(b);return I===void 0&&(I={},M.set(b,I)),I}function s(b){M.delete(b)}function l(b,I,R){M.get(b)[I]=R}function f(){M=new WeakMap}return{get:n,remove:s,update:l,dispose:f}}function GF(M,n){return M.groupOrder!==n.groupOrder?M.groupOrder-n.groupOrder:M.renderOrder!==n.renderOrder?M.renderOrder-n.renderOrder:M.material.id!==n.material.id?M.material.id-n.material.id:M.z!==n.z?M.z-n.z:M.id-n.id}function q5(M,n){return M.groupOrder!==n.groupOrder?M.groupOrder-n.groupOrder:M.renderOrder!==n.renderOrder?M.renderOrder-n.renderOrder:M.z!==n.z?n.z-M.z:M.id-n.id}function J5(){const M=[];let n=0;const s=[],l=[],f=[];function b(){n=0,s.length=0,l.length=0,f.length=0}function I(Z,ee,te,ae,he,oe){let ne=M[n];return ne===void 0?(ne={id:Z.id,object:Z,geometry:ee,material:te,groupOrder:ae,renderOrder:Z.renderOrder,z:he,group:oe},M[n]=ne):(ne.id=Z.id,ne.object=Z,ne.geometry=ee,ne.material=te,ne.groupOrder=ae,ne.renderOrder=Z.renderOrder,ne.z=he,ne.group=oe),n++,ne}function R(Z,ee,te,ae,he,oe){const ne=I(Z,ee,te,ae,he,oe);te.transmission>0?l.push(ne):te.transparent===!0?f.push(ne):s.push(ne)}function U(Z,ee,te,ae,he,oe){const ne=I(Z,ee,te,ae,he,oe);te.transmission>0?l.unshift(ne):te.transparent===!0?f.unshift(ne):s.unshift(ne)}function V(Z,ee){s.length>1&&s.sort(Z||GF),l.length>1&&l.sort(ee||q5),f.length>1&&f.sort(ee||q5)}function $(){for(let Z=n,ee=M.length;Z<ee;Z++){const te=M[Z];if(te.id===null)break;te.id=null,te.object=null,te.geometry=null,te.material=null,te.group=null}}return{opaque:s,transmissive:l,transparent:f,init:b,push:R,unshift:U,finish:$,sort:V}}function VF(){let M=new WeakMap;function n(l,f){const b=M.get(l);let I;return b===void 0?(I=new J5,M.set(l,[I])):f>=b.length?(I=new J5,b.push(I)):I=b[f],I}function s(){M=new WeakMap}return{get:n,dispose:s}}function QF(){const M={};return{get:function(n){if(M[n.id]!==void 0)return M[n.id];let s;switch(n.type){case"DirectionalLight":s={direction:new Ve,color:new Kn};break;case"SpotLight":s={position:new Ve,direction:new Ve,color:new Kn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":s={position:new Ve,color:new Kn,distance:0,decay:0};break;case"HemisphereLight":s={direction:new Ve,skyColor:new Kn,groundColor:new Kn};break;case"RectAreaLight":s={color:new Kn,position:new Ve,halfWidth:new Ve,halfHeight:new Ve};break}return M[n.id]=s,s}}}function HF(){const M={};return{get:function(n){if(M[n.id]!==void 0)return M[n.id];let s;switch(n.type){case"DirectionalLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn};break;case"SpotLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn};break;case"PointLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn,shadowCameraNear:1,shadowCameraFar:1e3};break}return M[n.id]=s,s}}}let zF=0;function WF(M,n){return(n.castShadow?2:0)-(M.castShadow?2:0)+(n.map?1:0)-(M.map?1:0)}function jF(M){const n=new QF,s=HF(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let V=0;V<9;V++)l.probe.push(new Ve);const f=new Ve,b=new ii,I=new ii;function R(V,$){let Z=0,ee=0,te=0;for(let qe=0;qe<9;qe++)l.probe[qe].set(0,0,0);let ae=0,he=0,oe=0,ne=0,Ie=0,Ce=0,Me=0,Je=0,Qe=0,je=0,Ye=0;V.sort(WF);const Pe=$===!0?Math.PI:1;for(let qe=0,At=V.length;qe<At;qe++){const lt=V[qe],bt=lt.color,kt=lt.intensity,tn=lt.distance,In=lt.shadow&&lt.shadow.map?lt.shadow.map.texture:null;if(lt.isAmbientLight)Z+=bt.r*kt*Pe,ee+=bt.g*kt*Pe,te+=bt.b*kt*Pe;else if(lt.isLightProbe){for(let Gt=0;Gt<9;Gt++)l.probe[Gt].addScaledVector(lt.sh.coefficients[Gt],kt);Ye++}else if(lt.isDirectionalLight){const Gt=n.get(lt);if(Gt.color.copy(lt.color).multiplyScalar(lt.intensity*Pe),lt.castShadow){const bn=lt.shadow,wn=s.get(lt);wn.shadowBias=bn.bias,wn.shadowNormalBias=bn.normalBias,wn.shadowRadius=bn.radius,wn.shadowMapSize=bn.mapSize,l.directionalShadow[ae]=wn,l.directionalShadowMap[ae]=In,l.directionalShadowMatrix[ae]=lt.shadow.matrix,Ce++}l.directional[ae]=Gt,ae++}else if(lt.isSpotLight){const Gt=n.get(lt);Gt.position.setFromMatrixPosition(lt.matrixWorld),Gt.color.copy(bt).multiplyScalar(kt*Pe),Gt.distance=tn,Gt.coneCos=Math.cos(lt.angle),Gt.penumbraCos=Math.cos(lt.angle*(1-lt.penumbra)),Gt.decay=lt.decay,l.spot[oe]=Gt;const bn=lt.shadow;if(lt.map&&(l.spotLightMap[Qe]=lt.map,Qe++,bn.updateMatrices(lt),lt.castShadow&&je++),l.spotLightMatrix[oe]=bn.matrix,lt.castShadow){const wn=s.get(lt);wn.shadowBias=bn.bias,wn.shadowNormalBias=bn.normalBias,wn.shadowRadius=bn.radius,wn.shadowMapSize=bn.mapSize,l.spotShadow[oe]=wn,l.spotShadowMap[oe]=In,Je++}oe++}else if(lt.isRectAreaLight){const Gt=n.get(lt);Gt.color.copy(bt).multiplyScalar(kt),Gt.halfWidth.set(lt.width*.5,0,0),Gt.halfHeight.set(0,lt.height*.5,0),l.rectArea[ne]=Gt,ne++}else if(lt.isPointLight){const Gt=n.get(lt);if(Gt.color.copy(lt.color).multiplyScalar(lt.intensity*Pe),Gt.distance=lt.distance,Gt.decay=lt.decay,lt.castShadow){const bn=lt.shadow,wn=s.get(lt);wn.shadowBias=bn.bias,wn.shadowNormalBias=bn.normalBias,wn.shadowRadius=bn.radius,wn.shadowMapSize=bn.mapSize,wn.shadowCameraNear=bn.camera.near,wn.shadowCameraFar=bn.camera.far,l.pointShadow[he]=wn,l.pointShadowMap[he]=In,l.pointShadowMatrix[he]=lt.shadow.matrix,Me++}l.point[he]=Gt,he++}else if(lt.isHemisphereLight){const Gt=n.get(lt);Gt.skyColor.copy(lt.color).multiplyScalar(kt*Pe),Gt.groundColor.copy(lt.groundColor).multiplyScalar(kt*Pe),l.hemi[Ie]=Gt,Ie++}}ne>0&&(M.has("OES_texture_float_linear")===!0?(l.rectAreaLTC1=Pn.LTC_FLOAT_1,l.rectAreaLTC2=Pn.LTC_FLOAT_2):(l.rectAreaLTC1=Pn.LTC_HALF_1,l.rectAreaLTC2=Pn.LTC_HALF_2)),l.ambient[0]=Z,l.ambient[1]=ee,l.ambient[2]=te;const Re=l.hash;(Re.directionalLength!==ae||Re.pointLength!==he||Re.spotLength!==oe||Re.rectAreaLength!==ne||Re.hemiLength!==Ie||Re.numDirectionalShadows!==Ce||Re.numPointShadows!==Me||Re.numSpotShadows!==Je||Re.numSpotMaps!==Qe||Re.numLightProbes!==Ye)&&(l.directional.length=ae,l.spot.length=oe,l.rectArea.length=ne,l.point.length=he,l.hemi.length=Ie,l.directionalShadow.length=Ce,l.directionalShadowMap.length=Ce,l.pointShadow.length=Me,l.pointShadowMap.length=Me,l.spotShadow.length=Je,l.spotShadowMap.length=Je,l.directionalShadowMatrix.length=Ce,l.pointShadowMatrix.length=Me,l.spotLightMatrix.length=Je+Qe-je,l.spotLightMap.length=Qe,l.numSpotLightShadowsWithMaps=je,l.numLightProbes=Ye,Re.directionalLength=ae,Re.pointLength=he,Re.spotLength=oe,Re.rectAreaLength=ne,Re.hemiLength=Ie,Re.numDirectionalShadows=Ce,Re.numPointShadows=Me,Re.numSpotShadows=Je,Re.numSpotMaps=Qe,Re.numLightProbes=Ye,l.version=zF++)}function U(V,$){let Z=0,ee=0,te=0,ae=0,he=0;const oe=$.matrixWorldInverse;for(let ne=0,Ie=V.length;ne<Ie;ne++){const Ce=V[ne];if(Ce.isDirectionalLight){const Me=l.directional[Z];Me.direction.setFromMatrixPosition(Ce.matrixWorld),f.setFromMatrixPosition(Ce.target.matrixWorld),Me.direction.sub(f),Me.direction.transformDirection(oe),Z++}else if(Ce.isSpotLight){const Me=l.spot[te];Me.position.setFromMatrixPosition(Ce.matrixWorld),Me.position.applyMatrix4(oe),Me.direction.setFromMatrixPosition(Ce.matrixWorld),f.setFromMatrixPosition(Ce.target.matrixWorld),Me.direction.sub(f),Me.direction.transformDirection(oe),te++}else if(Ce.isRectAreaLight){const Me=l.rectArea[ae];Me.position.setFromMatrixPosition(Ce.matrixWorld),Me.position.applyMatrix4(oe),I.identity(),b.copy(Ce.matrixWorld),b.premultiply(oe),I.extractRotation(b),Me.halfWidth.set(Ce.width*.5,0,0),Me.halfHeight.set(0,Ce.height*.5,0),Me.halfWidth.applyMatrix4(I),Me.halfHeight.applyMatrix4(I),ae++}else if(Ce.isPointLight){const Me=l.point[ee];Me.position.setFromMatrixPosition(Ce.matrixWorld),Me.position.applyMatrix4(oe),ee++}else if(Ce.isHemisphereLight){const Me=l.hemi[he];Me.direction.setFromMatrixPosition(Ce.matrixWorld),Me.direction.transformDirection(oe),he++}}}return{setup:R,setupView:U,state:l}}function Z5(M){const n=new jF(M),s=[],l=[];function f($){V.camera=$,s.length=0,l.length=0}function b($){s.push($)}function I($){l.push($)}function R($){n.setup(s,$)}function U($){n.setupView(s,$)}const V={lightsArray:s,shadowsArray:l,camera:null,lights:n,transmissionRenderTarget:{}};return{init:f,state:V,setupLights:R,setupLightsView:U,pushLight:b,pushShadow:I}}function $F(M){let n=new WeakMap;function s(f,b=0){const I=n.get(f);let R;return I===void 0?(R=new Z5(M),n.set(f,[R])):b>=I.length?(R=new Z5(M),I.push(R)):R=I[b],R}function l(){n=new WeakMap}return{get:s,dispose:l}}class D2 extends va{constructor(n){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=al,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(n)}copy(n){return super.copy(n),this.depthPacking=n.depthPacking,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this}}class L2 extends va{constructor(n){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(n)}copy(n){return super.copy(n),this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this}}const XF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,KF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function YF(M,n,s){let l=new Rd;const f=new sn,b=new sn,I=new yr,R=new D2({depthPacking:ol}),U=new L2,V={},$=s.maxTextureSize,Z={[w]:T,[T]:w,[O]:O},ee=new Vo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new sn},radius:{value:4}},vertexShader:XF,fragmentShader:KF}),te=ee.clone();te.defines.HORIZONTAL_PASS=1;const ae=new Zi;ae.setAttribute("position",new Gr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const he=new Ds(ae,ee),oe=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S;let ne=this.type;this.render=function(Qe,je,Ye){if(oe.enabled===!1||oe.autoUpdate===!1&&oe.needsUpdate===!1||Qe.length===0)return;const Pe=M.getRenderTarget(),Re=M.getActiveCubeFace(),qe=M.getActiveMipmapLevel(),At=M.state;At.setBlending(B),At.buffers.color.setClear(1,1,1,1),At.buffers.depth.setTest(!0),At.setScissorTest(!1);const lt=ne!==C&&this.type===C,bt=ne===C&&this.type!==C;for(let kt=0,tn=Qe.length;kt<tn;kt++){const In=Qe[kt],Gt=In.shadow;if(Gt===void 0){console.warn("THREE.WebGLShadowMap:",In,"has no shadow.");continue}if(Gt.autoUpdate===!1&&Gt.needsUpdate===!1)continue;f.copy(Gt.mapSize);const bn=Gt.getFrameExtents();if(f.multiply(bn),b.copy(Gt.mapSize),(f.x>$||f.y>$)&&(f.x>$&&(b.x=Math.floor($/bn.x),f.x=b.x*bn.x,Gt.mapSize.x=b.x),f.y>$&&(b.y=Math.floor($/bn.y),f.y=b.y*bn.y,Gt.mapSize.y=b.y)),Gt.map===null||lt===!0||bt===!0){const ti=this.type!==C?{minFilter:Zt,magFilter:Zt}:{};Gt.map!==null&&Gt.map.dispose(),Gt.map=new Ga(f.x,f.y,ti),Gt.map.texture.name=In.name+".shadowMap",Gt.camera.updateProjectionMatrix()}M.setRenderTarget(Gt.map),M.clear();const wn=Gt.getViewportCount();for(let ti=0;ti<wn;ti++){const er=Gt.getViewport(ti);I.set(b.x*er.x,b.y*er.y,b.x*er.z,b.y*er.w),At.viewport(I),Gt.updateMatrices(In,ti),l=Gt.getFrustum(),Me(je,Ye,Gt.camera,In,this.type)}Gt.isPointLightShadow!==!0&&this.type===C&&Ie(Gt,Ye),Gt.needsUpdate=!1}ne=this.type,oe.needsUpdate=!1,M.setRenderTarget(Pe,Re,qe)};function Ie(Qe,je){const Ye=n.update(he);ee.defines.VSM_SAMPLES!==Qe.blurSamples&&(ee.defines.VSM_SAMPLES=Qe.blurSamples,te.defines.VSM_SAMPLES=Qe.blurSamples,ee.needsUpdate=!0,te.needsUpdate=!0),Qe.mapPass===null&&(Qe.mapPass=new Ga(f.x,f.y)),ee.uniforms.shadow_pass.value=Qe.map.texture,ee.uniforms.resolution.value=Qe.mapSize,ee.uniforms.radius.value=Qe.radius,M.setRenderTarget(Qe.mapPass),M.clear(),M.renderBufferDirect(je,null,Ye,ee,he,null),te.uniforms.shadow_pass.value=Qe.mapPass.texture,te.uniforms.resolution.value=Qe.mapSize,te.uniforms.radius.value=Qe.radius,M.setRenderTarget(Qe.map),M.clear(),M.renderBufferDirect(je,null,Ye,te,he,null)}function Ce(Qe,je,Ye,Pe){let Re=null;const qe=Ye.isPointLight===!0?Qe.customDistanceMaterial:Qe.customDepthMaterial;if(qe!==void 0)Re=qe;else if(Re=Ye.isPointLight===!0?U:R,M.localClippingEnabled&&je.clipShadows===!0&&Array.isArray(je.clippingPlanes)&&je.clippingPlanes.length!==0||je.displacementMap&&je.displacementScale!==0||je.alphaMap&&je.alphaTest>0||je.map&&je.alphaTest>0){const At=Re.uuid,lt=je.uuid;let bt=V[At];bt===void 0&&(bt={},V[At]=bt);let kt=bt[lt];kt===void 0&&(kt=Re.clone(),bt[lt]=kt,je.addEventListener("dispose",Je)),Re=kt}if(Re.visible=je.visible,Re.wireframe=je.wireframe,Pe===C?Re.side=je.shadowSide!==null?je.shadowSide:je.side:Re.side=je.shadowSide!==null?je.shadowSide:Z[je.side],Re.alphaMap=je.alphaMap,Re.alphaTest=je.alphaTest,Re.map=je.map,Re.clipShadows=je.clipShadows,Re.clippingPlanes=je.clippingPlanes,Re.clipIntersection=je.clipIntersection,Re.displacementMap=je.displacementMap,Re.displacementScale=je.displacementScale,Re.displacementBias=je.displacementBias,Re.wireframeLinewidth=je.wireframeLinewidth,Re.linewidth=je.linewidth,Ye.isPointLight===!0&&Re.isMeshDistanceMaterial===!0){const At=M.properties.get(Re);At.light=Ye}return Re}function Me(Qe,je,Ye,Pe,Re){if(Qe.visible===!1)return;if(Qe.layers.test(je.layers)&&(Qe.isMesh||Qe.isLine||Qe.isPoints)&&(Qe.castShadow||Qe.receiveShadow&&Re===C)&&(!Qe.frustumCulled||l.intersectsObject(Qe))){Qe.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,Qe.matrixWorld);const lt=n.update(Qe),bt=Qe.material;if(Array.isArray(bt)){const kt=lt.groups;for(let tn=0,In=kt.length;tn<In;tn++){const Gt=kt[tn],bn=bt[Gt.materialIndex];if(bn&&bn.visible){const wn=Ce(Qe,bn,Pe,Re);Qe.onBeforeShadow(M,Qe,je,Ye,lt,wn,Gt),M.renderBufferDirect(Ye,null,lt,wn,Qe,Gt),Qe.onAfterShadow(M,Qe,je,Ye,lt,wn,Gt)}}}else if(bt.visible){const kt=Ce(Qe,bt,Pe,Re);Qe.onBeforeShadow(M,Qe,je,Ye,lt,kt,null),M.renderBufferDirect(Ye,null,lt,kt,Qe,null),Qe.onAfterShadow(M,Qe,je,Ye,lt,kt,null)}}const At=Qe.children;for(let lt=0,bt=At.length;lt<bt;lt++)Me(At[lt],je,Ye,Pe,Re)}function Je(Qe){Qe.target.removeEventListener("dispose",Je);for(const Ye in V){const Pe=V[Ye],Re=Qe.target.uuid;Re in Pe&&(Pe[Re].dispose(),delete Pe[Re])}}}function qF(M){function n(){let st=!1;const gn=new yr;let xn=null;const li=new yr(0,0,0,0);return{setMask:function(Wn){xn!==Wn&&!st&&(M.colorMask(Wn,Wn,Wn,Wn),xn=Wn)},setLocked:function(Wn){st=Wn},setClear:function(Wn,Ki,jn,Un,ir){ir===!0&&(Wn*=Un,Ki*=Un,jn*=Un),gn.set(Wn,Ki,jn,Un),li.equals(gn)===!1&&(M.clearColor(Wn,Ki,jn,Un),li.copy(gn))},reset:function(){st=!1,xn=null,li.set(-1,0,0,0)}}}function s(){let st=!1,gn=null,xn=null,li=null;return{setTest:function(Wn){Wn?$r(M.DEPTH_TEST):si(M.DEPTH_TEST)},setMask:function(Wn){gn!==Wn&&!st&&(M.depthMask(Wn),gn=Wn)},setFunc:function(Wn){if(xn!==Wn){switch(Wn){case Ue:M.depthFunc(M.NEVER);break;case ct:M.depthFunc(M.ALWAYS);break;case vt:M.depthFunc(M.LESS);break;case dt:M.depthFunc(M.LEQUAL);break;case It:M.depthFunc(M.EQUAL);break;case rt:M.depthFunc(M.GEQUAL);break;case Lt:M.depthFunc(M.GREATER);break;case hn:M.depthFunc(M.NOTEQUAL);break;default:M.depthFunc(M.LEQUAL)}xn=Wn}},setLocked:function(Wn){st=Wn},setClear:function(Wn){li!==Wn&&(M.clearDepth(Wn),li=Wn)},reset:function(){st=!1,gn=null,xn=null,li=null}}}function l(){let st=!1,gn=null,xn=null,li=null,Wn=null,Ki=null,jn=null,Un=null,ir=null;return{setTest:function(Ci){st||(Ci?$r(M.STENCIL_TEST):si(M.STENCIL_TEST))},setMask:function(Ci){gn!==Ci&&!st&&(M.stencilMask(Ci),gn=Ci)},setFunc:function(Ci,zs,fl){(xn!==Ci||li!==zs||Wn!==fl)&&(M.stencilFunc(Ci,zs,fl),xn=Ci,li=zs,Wn=fl)},setOp:function(Ci,zs,fl){(Ki!==Ci||jn!==zs||Un!==fl)&&(M.stencilOp(Ci,zs,fl),Ki=Ci,jn=zs,Un=fl)},setLocked:function(Ci){st=Ci},setClear:function(Ci){ir!==Ci&&(M.clearStencil(Ci),ir=Ci)},reset:function(){st=!1,gn=null,xn=null,li=null,Wn=null,Ki=null,jn=null,Un=null,ir=null}}}const f=new n,b=new s,I=new l,R=new WeakMap,U=new WeakMap;let V={},$={},Z=new WeakMap,ee=[],te=null,ae=!1,he=null,oe=null,ne=null,Ie=null,Ce=null,Me=null,Je=null,Qe=new Kn(0,0,0),je=0,Ye=!1,Pe=null,Re=null,qe=null,At=null,lt=null;const bt=M.getParameter(M.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let kt=!1,tn=0;const In=M.getParameter(M.VERSION);In.indexOf("WebGL")!==-1?(tn=parseFloat(/^WebGL (\d)/.exec(In)[1]),kt=tn>=1):In.indexOf("OpenGL ES")!==-1&&(tn=parseFloat(/^OpenGL ES (\d)/.exec(In)[1]),kt=tn>=2);let Gt=null,bn={};const wn=M.getParameter(M.SCISSOR_BOX),ti=M.getParameter(M.VIEWPORT),er=new yr().fromArray(wn),Dr=new yr().fromArray(ti);function is(st,gn,xn,li){const Wn=new Uint8Array(4),Ki=M.createTexture();M.bindTexture(st,Ki),M.texParameteri(st,M.TEXTURE_MIN_FILTER,M.NEAREST),M.texParameteri(st,M.TEXTURE_MAG_FILTER,M.NEAREST);for(let jn=0;jn<xn;jn++)st===M.TEXTURE_3D||st===M.TEXTURE_2D_ARRAY?M.texImage3D(gn,0,M.RGBA,1,1,li,0,M.RGBA,M.UNSIGNED_BYTE,Wn):M.texImage2D(gn+jn,0,M.RGBA,1,1,0,M.RGBA,M.UNSIGNED_BYTE,Wn);return Ki}const Er={};Er[M.TEXTURE_2D]=is(M.TEXTURE_2D,M.TEXTURE_2D,1),Er[M.TEXTURE_CUBE_MAP]=is(M.TEXTURE_CUBE_MAP,M.TEXTURE_CUBE_MAP_POSITIVE_X,6),Er[M.TEXTURE_2D_ARRAY]=is(M.TEXTURE_2D_ARRAY,M.TEXTURE_2D_ARRAY,1,1),Er[M.TEXTURE_3D]=is(M.TEXTURE_3D,M.TEXTURE_3D,1,1),f.setClear(0,0,0,1),b.setClear(1),I.setClear(0),$r(M.DEPTH_TEST),b.setFunc(dt),An(!1),pn(g),$r(M.CULL_FACE),Xt(B);function $r(st){V[st]!==!0&&(M.enable(st),V[st]=!0)}function si(st){V[st]!==!1&&(M.disable(st),V[st]=!1)}function ln(st,gn){return $[st]!==gn?(M.bindFramebuffer(st,gn),$[st]=gn,st===M.DRAW_FRAMEBUFFER&&($[M.FRAMEBUFFER]=gn),st===M.FRAMEBUFFER&&($[M.DRAW_FRAMEBUFFER]=gn),!0):!1}function Rn(st,gn){let xn=ee,li=!1;if(st){xn=Z.get(gn),xn===void 0&&(xn=[],Z.set(gn,xn));const Wn=st.textures;if(xn.length!==Wn.length||xn[0]!==M.COLOR_ATTACHMENT0){for(let Ki=0,jn=Wn.length;Ki<jn;Ki++)xn[Ki]=M.COLOR_ATTACHMENT0+Ki;xn.length=Wn.length,li=!0}}else xn[0]!==M.BACK&&(xn[0]=M.BACK,li=!0);li&&M.drawBuffers(xn)}function Nn(st){return te!==st?(M.useProgram(st),te=st,!0):!1}const Mt={[G]:M.FUNC_ADD,[H]:M.FUNC_SUBTRACT,[j]:M.FUNC_REVERSE_SUBTRACT};Mt[q]=M.MIN,Mt[Q]=M.MAX;const cn={[k]:M.ZERO,[K]:M.ONE,[W]:M.SRC_COLOR,[se]:M.SRC_ALPHA,[we]:M.SRC_ALPHA_SATURATE,[xe]:M.DST_COLOR,[fe]:M.DST_ALPHA,[J]:M.ONE_MINUS_SRC_COLOR,[ge]:M.ONE_MINUS_SRC_ALPHA,[ye]:M.ONE_MINUS_DST_COLOR,[me]:M.ONE_MINUS_DST_ALPHA,[Ee]:M.CONSTANT_COLOR,[He]:M.ONE_MINUS_CONSTANT_COLOR,[Ae]:M.CONSTANT_ALPHA,[Ke]:M.ONE_MINUS_CONSTANT_ALPHA};function Xt(st,gn,xn,li,Wn,Ki,jn,Un,ir,Ci){if(st===B){ae===!0&&(si(M.BLEND),ae=!1);return}if(ae===!1&&($r(M.BLEND),ae=!0),st!==z){if(st!==he||Ci!==Ye){if((oe!==G||Ce!==G)&&(M.blendEquation(M.FUNC_ADD),oe=G,Ce=G),Ci)switch(st){case P:M.blendFuncSeparate(M.ONE,M.ONE_MINUS_SRC_ALPHA,M.ONE,M.ONE_MINUS_SRC_ALPHA);break;case L:M.blendFunc(M.ONE,M.ONE);break;case N:M.blendFuncSeparate(M.ZERO,M.ONE_MINUS_SRC_COLOR,M.ZERO,M.ONE);break;case F:M.blendFuncSeparate(M.ZERO,M.SRC_COLOR,M.ZERO,M.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",st);break}else switch(st){case P:M.blendFuncSeparate(M.SRC_ALPHA,M.ONE_MINUS_SRC_ALPHA,M.ONE,M.ONE_MINUS_SRC_ALPHA);break;case L:M.blendFunc(M.SRC_ALPHA,M.ONE);break;case N:M.blendFuncSeparate(M.ZERO,M.ONE_MINUS_SRC_COLOR,M.ZERO,M.ONE);break;case F:M.blendFunc(M.ZERO,M.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",st);break}ne=null,Ie=null,Me=null,Je=null,Qe.set(0,0,0),je=0,he=st,Ye=Ci}return}Wn=Wn||gn,Ki=Ki||xn,jn=jn||li,(gn!==oe||Wn!==Ce)&&(M.blendEquationSeparate(Mt[gn],Mt[Wn]),oe=gn,Ce=Wn),(xn!==ne||li!==Ie||Ki!==Me||jn!==Je)&&(M.blendFuncSeparate(cn[xn],cn[li],cn[Ki],cn[jn]),ne=xn,Ie=li,Me=Ki,Je=jn),(Un.equals(Qe)===!1||ir!==je)&&(M.blendColor(Un.r,Un.g,Un.b,ir),Qe.copy(Un),je=ir),he=st,Ye=!1}function vn(st,gn){st.side===O?si(M.CULL_FACE):$r(M.CULL_FACE);let xn=st.side===T;gn&&(xn=!xn),An(xn),st.blending===P&&st.transparent===!1?Xt(B):Xt(st.blending,st.blendEquation,st.blendSrc,st.blendDst,st.blendEquationAlpha,st.blendSrcAlpha,st.blendDstAlpha,st.blendColor,st.blendAlpha,st.premultipliedAlpha),b.setFunc(st.depthFunc),b.setTest(st.depthTest),b.setMask(st.depthWrite),f.setMask(st.colorWrite);const li=st.stencilWrite;I.setTest(li),li&&(I.setMask(st.stencilWriteMask),I.setFunc(st.stencilFunc,st.stencilRef,st.stencilFuncMask),I.setOp(st.stencilFail,st.stencilZFail,st.stencilZPass)),Xn(st.polygonOffset,st.polygonOffsetFactor,st.polygonOffsetUnits),st.alphaToCoverage===!0?$r(M.SAMPLE_ALPHA_TO_COVERAGE):si(M.SAMPLE_ALPHA_TO_COVERAGE)}function An(st){Pe!==st&&(st?M.frontFace(M.CW):M.frontFace(M.CCW),Pe=st)}function pn(st){st!==v?($r(M.CULL_FACE),st!==Re&&(st===g?M.cullFace(M.BACK):st===y?M.cullFace(M.FRONT):M.cullFace(M.FRONT_AND_BACK))):si(M.CULL_FACE),Re=st}function kn(st){st!==qe&&(kt&&M.lineWidth(st),qe=st)}function Xn(st,gn,xn){st?($r(M.POLYGON_OFFSET_FILL),(At!==gn||lt!==xn)&&(M.polygonOffset(gn,xn),At=gn,lt=xn)):si(M.POLYGON_OFFSET_FILL)}function Ii(st){st?$r(M.SCISSOR_TEST):si(M.SCISSOR_TEST)}function Ni(st){st===void 0&&(st=M.TEXTURE0+bt-1),Gt!==st&&(M.activeTexture(st),Gt=st)}function wr(st,gn,xn){xn===void 0&&(Gt===null?xn=M.TEXTURE0+bt-1:xn=Gt);let li=bn[xn];li===void 0&&(li={type:void 0,texture:void 0},bn[xn]=li),(li.type!==st||li.texture!==gn)&&(Gt!==xn&&(M.activeTexture(xn),Gt=xn),M.bindTexture(st,gn||Er[st]),li.type=st,li.texture=gn)}function ps(){const st=bn[Gt];st!==void 0&&st.type!==void 0&&(M.bindTexture(st.type,null),st.type=void 0,st.texture=void 0)}function rs(){try{M.compressedTexImage2D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Xe(){try{M.compressedTexImage3D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Oe(){try{M.texSubImage2D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function zt(){try{M.texSubImage3D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function an(){try{M.compressedTexSubImage2D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function fn(){try{M.compressedTexSubImage3D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function un(){try{M.texStorage2D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function oi(){try{M.texStorage3D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Tn(){try{M.texImage2D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Yn(){try{M.texImage3D.apply(M,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Nr(st){er.equals(st)===!1&&(M.scissor(st.x,st.y,st.z,st.w),er.copy(st))}function qn(st){Dr.equals(st)===!1&&(M.viewport(st.x,st.y,st.z,st.w),Dr.copy(st))}function ci(st,gn){let xn=U.get(gn);xn===void 0&&(xn=new WeakMap,U.set(gn,xn));let li=xn.get(st);li===void 0&&(li=M.getUniformBlockIndex(gn,st.name),xn.set(st,li))}function Xi(st,gn){const li=U.get(gn).get(st);R.get(gn)!==li&&(M.uniformBlockBinding(gn,li,st.__bindingPointIndex),R.set(gn,li))}function bi(){M.disable(M.BLEND),M.disable(M.CULL_FACE),M.disable(M.DEPTH_TEST),M.disable(M.POLYGON_OFFSET_FILL),M.disable(M.SCISSOR_TEST),M.disable(M.STENCIL_TEST),M.disable(M.SAMPLE_ALPHA_TO_COVERAGE),M.blendEquation(M.FUNC_ADD),M.blendFunc(M.ONE,M.ZERO),M.blendFuncSeparate(M.ONE,M.ZERO,M.ONE,M.ZERO),M.blendColor(0,0,0,0),M.colorMask(!0,!0,!0,!0),M.clearColor(0,0,0,0),M.depthMask(!0),M.depthFunc(M.LESS),M.clearDepth(1),M.stencilMask(4294967295),M.stencilFunc(M.ALWAYS,0,4294967295),M.stencilOp(M.KEEP,M.KEEP,M.KEEP),M.clearStencil(0),M.cullFace(M.BACK),M.frontFace(M.CCW),M.polygonOffset(0,0),M.activeTexture(M.TEXTURE0),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindFramebuffer(M.DRAW_FRAMEBUFFER,null),M.bindFramebuffer(M.READ_FRAMEBUFFER,null),M.useProgram(null),M.lineWidth(1),M.scissor(0,0,M.canvas.width,M.canvas.height),M.viewport(0,0,M.canvas.width,M.canvas.height),V={},Gt=null,bn={},$={},Z=new WeakMap,ee=[],te=null,ae=!1,he=null,oe=null,ne=null,Ie=null,Ce=null,Me=null,Je=null,Qe=new Kn(0,0,0),je=0,Ye=!1,Pe=null,Re=null,qe=null,At=null,lt=null,er.set(0,0,M.canvas.width,M.canvas.height),Dr.set(0,0,M.canvas.width,M.canvas.height),f.reset(),b.reset(),I.reset()}return{buffers:{color:f,depth:b,stencil:I},enable:$r,disable:si,bindFramebuffer:ln,drawBuffers:Rn,useProgram:Nn,setBlending:Xt,setMaterial:vn,setFlipSided:An,setCullFace:pn,setLineWidth:kn,setPolygonOffset:Xn,setScissorTest:Ii,activeTexture:Ni,bindTexture:wr,unbindTexture:ps,compressedTexImage2D:rs,compressedTexImage3D:Xe,texImage2D:Tn,texImage3D:Yn,updateUBOMapping:ci,uniformBlockBinding:Xi,texStorage2D:un,texStorage3D:oi,texSubImage2D:Oe,texSubImage3D:zt,compressedTexSubImage2D:an,compressedTexSubImage3D:fn,scissor:Nr,viewport:qn,reset:bi}}function JF(M,n,s,l,f,b,I){const R=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):null,U=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),V=n.has("OCULUS_multiview")?n.get("OCULUS_multiview"):null,$=new sn,Z=new WeakMap;let ee;const te=new WeakMap;let ae=[],he=!1,oe=!1;try{oe=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ne(Xe,Oe){return oe?new OffscreenCanvas(Xe,Oe):Eu("canvas")}function Ie(Xe,Oe,zt){let an=1;const fn=rs(Xe);if((fn.width>zt||fn.height>zt)&&(an=zt/Math.max(fn.width,fn.height)),an<1)if(typeof HTMLImageElement<"u"&&Xe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Xe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Xe instanceof ImageBitmap||typeof VideoFrame<"u"&&Xe instanceof VideoFrame){const un=Math.floor(an*fn.width),oi=Math.floor(an*fn.height);ee===void 0&&(ee=ne(un,oi));const Tn=Oe?ne(un,oi):ee;return Tn.width=un,Tn.height=oi,Tn.getContext("2d").drawImage(Xe,0,0,un,oi),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+fn.width+"x"+fn.height+") to ("+un+"x"+oi+")."),Tn}else return"data"in Xe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+fn.width+"x"+fn.height+")."),Xe;return Xe}function Ce(Xe){return Xe.generateMipmaps&&Xe.minFilter!==Zt&&Xe.minFilter!==Fn}function Me(Xe){M.generateMipmap(Xe)}function Je(Xe,Oe,zt,an,fn=!1){if(Xe!==null){if(M[Xe]!==void 0)return M[Xe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Xe+"'")}let un=Oe;if(Oe===M.RED&&(zt===M.FLOAT&&(un=M.R32F),zt===M.HALF_FLOAT&&(un=M.R16F),zt===M.UNSIGNED_BYTE&&(un=M.R8)),Oe===M.RED_INTEGER&&(zt===M.UNSIGNED_BYTE&&(un=M.R8UI),zt===M.UNSIGNED_SHORT&&(un=M.R16UI),zt===M.UNSIGNED_INT&&(un=M.R32UI),zt===M.BYTE&&(un=M.R8I),zt===M.SHORT&&(un=M.R16I),zt===M.INT&&(un=M.R32I)),Oe===M.RG&&(zt===M.FLOAT&&(un=M.RG32F),zt===M.HALF_FLOAT&&(un=M.RG16F),zt===M.UNSIGNED_BYTE&&(un=M.RG8)),Oe===M.RG_INTEGER&&(zt===M.UNSIGNED_BYTE&&(un=M.RG8UI),zt===M.UNSIGNED_SHORT&&(un=M.RG16UI),zt===M.UNSIGNED_INT&&(un=M.RG32UI),zt===M.BYTE&&(un=M.RG8I),zt===M.SHORT&&(un=M.RG16I),zt===M.INT&&(un=M.RG32I)),Oe===M.RGB&&zt===M.UNSIGNED_INT_5_9_9_9_REV&&(un=M.RGB9_E5),Oe===M.RGBA){const oi=fn?vu:Or.getTransfer(an);zt===M.FLOAT&&(un=M.RGBA32F),zt===M.HALF_FLOAT&&(un=M.RGBA16F),zt===M.UNSIGNED_BYTE&&(un=oi===jr?M.SRGB8_ALPHA8:M.RGBA8),zt===M.UNSIGNED_SHORT_4_4_4_4&&(un=M.RGBA4),zt===M.UNSIGNED_SHORT_5_5_5_1&&(un=M.RGB5_A1)}return(un===M.R16F||un===M.R32F||un===M.RG16F||un===M.RG32F||un===M.RGBA16F||un===M.RGBA32F)&&n.get("EXT_color_buffer_float"),un}function Qe(Xe,Oe){return Ce(Xe)===!0||Xe.isFramebufferTexture&&Xe.minFilter!==Zt&&Xe.minFilter!==Fn?Math.log2(Math.max(Oe.width,Oe.height))+1:Xe.mipmaps!==void 0&&Xe.mipmaps.length>0?Xe.mipmaps.length:Xe.isCompressedTexture&&Array.isArray(Xe.image)?Oe.mipmaps.length:1}function je(Xe){const Oe=Xe.target;Oe.removeEventListener("dispose",je),Pe(Oe),Oe.isVideoTexture&&Z.delete(Oe)}function Ye(Xe){const Oe=Xe.target;Oe.removeEventListener("dispose",Ye),qe(Oe)}function Pe(Xe){const Oe=l.get(Xe);if(Oe.__webglInit===void 0)return;const zt=Xe.source,an=te.get(zt);if(an){const fn=an[Oe.__cacheKey];fn.usedTimes--,fn.usedTimes===0&&Re(Xe),Object.keys(an).length===0&&te.delete(zt)}l.remove(Xe)}function Re(Xe){const Oe=l.get(Xe);M.deleteTexture(Oe.__webglTexture);const zt=Xe.source,an=te.get(zt);delete an[Oe.__cacheKey],I.memory.textures--}function qe(Xe){const Oe=l.get(Xe);if(Xe.depthTexture&&Xe.depthTexture.dispose(),Xe.isWebGLCubeRenderTarget)for(let an=0;an<6;an++){if(Array.isArray(Oe.__webglFramebuffer[an]))for(let fn=0;fn<Oe.__webglFramebuffer[an].length;fn++)M.deleteFramebuffer(Oe.__webglFramebuffer[an][fn]);else M.deleteFramebuffer(Oe.__webglFramebuffer[an]);Oe.__webglDepthbuffer&&M.deleteRenderbuffer(Oe.__webglDepthbuffer[an])}else{if(Array.isArray(Oe.__webglFramebuffer))for(let an=0;an<Oe.__webglFramebuffer.length;an++)M.deleteFramebuffer(Oe.__webglFramebuffer[an]);else M.deleteFramebuffer(Oe.__webglFramebuffer);if(Oe.__webglDepthbuffer&&M.deleteRenderbuffer(Oe.__webglDepthbuffer),Oe.__webglMultisampledFramebuffer&&M.deleteFramebuffer(Oe.__webglMultisampledFramebuffer),Oe.__webglColorRenderbuffer)for(let an=0;an<Oe.__webglColorRenderbuffer.length;an++)Oe.__webglColorRenderbuffer[an]&&M.deleteRenderbuffer(Oe.__webglColorRenderbuffer[an]);Oe.__webglDepthRenderbuffer&&M.deleteRenderbuffer(Oe.__webglDepthRenderbuffer)}const zt=Xe.textures;for(let an=0,fn=zt.length;an<fn;an++){const un=l.get(zt[an]);un.__webglTexture&&(M.deleteTexture(un.__webglTexture),I.memory.textures--),l.remove(zt[an])}l.remove(Xe)}let At=0;function lt(){At=0}function bt(){const Xe=At;return Xe>=f.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Xe+" texture units while this GPU supports only "+f.maxTextures),At+=1,Xe}function kt(Xe){const Oe=[];return Oe.push(Xe.wrapS),Oe.push(Xe.wrapT),Oe.push(Xe.wrapR||0),Oe.push(Xe.magFilter),Oe.push(Xe.minFilter),Oe.push(Xe.anisotropy),Oe.push(Xe.internalFormat),Oe.push(Xe.format),Oe.push(Xe.type),Oe.push(Xe.generateMipmaps),Oe.push(Xe.premultiplyAlpha),Oe.push(Xe.flipY),Oe.push(Xe.unpackAlignment),Oe.push(Xe.colorSpace),Oe.join()}function tn(Xe,Oe){const zt=l.get(Xe);if(Xe.isVideoTexture&&wr(Xe),Xe.isRenderTargetTexture===!1&&Xe.version>0&&zt.__version!==Xe.version){const an=Xe.image;if(an===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(an.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else if(si(zt,Xe,Oe))return}s.bindTexture(M.TEXTURE_2D,zt.__webglTexture,M.TEXTURE0+Oe)}function In(Xe,Oe){const zt=l.get(Xe);if(Xe.version>0&&zt.__version!==Xe.version){si(zt,Xe,Oe);return}s.bindTexture(M.TEXTURE_2D_ARRAY,zt.__webglTexture,M.TEXTURE0+Oe)}function Gt(Xe,Oe){const zt=l.get(Xe);if(Xe.version>0&&zt.__version!==Xe.version){si(zt,Xe,Oe);return}s.bindTexture(M.TEXTURE_3D,zt.__webglTexture,M.TEXTURE0+Oe)}function bn(Xe,Oe){const zt=l.get(Xe);if(Xe.version>0&&zt.__version!==Xe.version){ln(zt,Xe,Oe);return}s.bindTexture(M.TEXTURE_CUBE_MAP,zt.__webglTexture,M.TEXTURE0+Oe)}const wn={[We]:M.REPEAT,[tt]:M.CLAMP_TO_EDGE,[wt]:M.MIRRORED_REPEAT},ti={[Zt]:M.NEAREST,[qt]:M.NEAREST_MIPMAP_NEAREST,[Qt]:M.NEAREST_MIPMAP_LINEAR,[Fn]:M.LINEAR,[Br]:M.LINEAR_MIPMAP_NEAREST,[qi]:M.LINEAR_MIPMAP_LINEAR},er={[tm]:M.NEVER,[om]:M.ALWAYS,[nm]:M.LESS,[bd]:M.LEQUAL,[im]:M.EQUAL,[am]:M.GEQUAL,[rm]:M.GREATER,[sm]:M.NOTEQUAL};function Dr(Xe,Oe){if(Oe.type===Pr&&n.has("OES_texture_float_linear")===!1&&(Oe.magFilter===Fn||Oe.magFilter===Br||Oe.magFilter===Qt||Oe.magFilter===qi||Oe.minFilter===Fn||Oe.minFilter===Br||Oe.minFilter===Qt||Oe.minFilter===qi)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),M.texParameteri(Xe,M.TEXTURE_WRAP_S,wn[Oe.wrapS]),M.texParameteri(Xe,M.TEXTURE_WRAP_T,wn[Oe.wrapT]),(Xe===M.TEXTURE_3D||Xe===M.TEXTURE_2D_ARRAY)&&M.texParameteri(Xe,M.TEXTURE_WRAP_R,wn[Oe.wrapR]),M.texParameteri(Xe,M.TEXTURE_MAG_FILTER,ti[Oe.magFilter]),M.texParameteri(Xe,M.TEXTURE_MIN_FILTER,ti[Oe.minFilter]),Oe.compareFunction&&(M.texParameteri(Xe,M.TEXTURE_COMPARE_MODE,M.COMPARE_REF_TO_TEXTURE),M.texParameteri(Xe,M.TEXTURE_COMPARE_FUNC,er[Oe.compareFunction])),n.has("EXT_texture_filter_anisotropic")===!0){if(Oe.magFilter===Zt||Oe.minFilter!==Qt&&Oe.minFilter!==qi||Oe.type===Pr&&n.has("OES_texture_float_linear")===!1)return;if(Oe.anisotropy>1||l.get(Oe).__currentAnisotropy){const zt=n.get("EXT_texture_filter_anisotropic");M.texParameterf(Xe,zt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Oe.anisotropy,f.getMaxAnisotropy())),l.get(Oe).__currentAnisotropy=Oe.anisotropy}}}function is(Xe,Oe){let zt=!1;Xe.__webglInit===void 0&&(Xe.__webglInit=!0,Oe.addEventListener("dispose",je));const an=Oe.source;let fn=te.get(an);fn===void 0&&(fn={},te.set(an,fn));const un=kt(Oe);if(un!==Xe.__cacheKey){fn[un]===void 0&&(fn[un]={texture:M.createTexture(),usedTimes:0},I.memory.textures++,zt=!0),fn[un].usedTimes++;const oi=fn[Xe.__cacheKey];oi!==void 0&&(fn[Xe.__cacheKey].usedTimes--,oi.usedTimes===0&&Re(Oe)),Xe.__cacheKey=un,Xe.__webglTexture=fn[un].texture}return zt}function Er(Xe){he=Xe}function $r(){const Xe=he;he=!1;for(const Oe of ae)si(Oe.textureProperties,Oe.texture,Oe.slot),Oe.texture.isPendingDeferredUpload=!1;ae=[],he=Xe}function si(Xe,Oe,zt){if(he)return Oe.isPendingDeferredUpload||(Oe.isPendingDeferredUpload=!0,ae.push({textureProperties:Xe,texture:Oe,slot:zt})),!1;let an=M.TEXTURE_2D;(Oe.isDataArrayTexture||Oe.isCompressedArrayTexture)&&(an=M.TEXTURE_2D_ARRAY),Oe.isData3DTexture&&(an=M.TEXTURE_3D);const fn=is(Xe,Oe),un=Oe.source;s.bindTexture(an,Xe.__webglTexture,M.TEXTURE0+zt);const oi=l.get(un);if(un.version!==oi.__version||fn===!0){s.activeTexture(M.TEXTURE0+zt);const Tn=Or.getPrimaries(Or.workingColorSpace),Yn=Oe.colorSpace===ua?null:Or.getPrimaries(Oe.colorSpace),Nr=Oe.colorSpace===ua||Tn===Yn?M.NONE:M.BROWSER_DEFAULT_WEBGL;M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,Oe.flipY),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Oe.premultiplyAlpha),M.pixelStorei(M.UNPACK_ALIGNMENT,Oe.unpackAlignment),M.pixelStorei(M.UNPACK_COLORSPACE_CONVERSION_WEBGL,Nr);let qn=Ie(Oe.image,!1,f.maxTextureSize);qn=ps(Oe,qn);const ci=b.convert(Oe.format,Oe.colorSpace),Xi=b.convert(Oe.type);let bi=Je(Oe.internalFormat,ci,Xi,Oe.colorSpace,Oe.isVideoTexture);Dr(an,Oe);let st;const gn=Oe.mipmaps,xn=Oe.isVideoTexture!==!0,li=oi.__version===void 0||fn===!0,Wn=un.dataReady,Ki=Qe(Oe,qn);if(Oe.isDepthTexture)bi=M.DEPTH_COMPONENT16,Oe.type===Pr?bi=M.DEPTH_COMPONENT32F:Oe.type===ys?bi=M.DEPTH_COMPONENT24:Oe.type===ca&&(bi=M.DEPTH24_STENCIL8),li&&(xn?s.texStorage2D(M.TEXTURE_2D,1,bi,qn.width,qn.height):s.texImage2D(M.TEXTURE_2D,0,bi,qn.width,qn.height,0,ci,Xi,null));else if(Oe.isDataTexture)if(gn.length>0){xn&&li&&s.texStorage2D(M.TEXTURE_2D,Ki,bi,gn[0].width,gn[0].height);for(let jn=0,Un=gn.length;jn<Un;jn++)st=gn[jn],xn?Wn&&s.texSubImage2D(M.TEXTURE_2D,jn,0,0,st.width,st.height,ci,Xi,st.data):s.texImage2D(M.TEXTURE_2D,jn,bi,st.width,st.height,0,ci,Xi,st.data);Oe.generateMipmaps=!1}else xn?(li&&s.texStorage2D(M.TEXTURE_2D,Ki,bi,qn.width,qn.height),Wn&&s.texSubImage2D(M.TEXTURE_2D,0,0,0,qn.width,qn.height,ci,Xi,qn.data)):s.texImage2D(M.TEXTURE_2D,0,bi,qn.width,qn.height,0,ci,Xi,qn.data);else if(Oe.isCompressedTexture)if(Oe.isCompressedArrayTexture){xn&&li&&s.texStorage3D(M.TEXTURE_2D_ARRAY,Ki,bi,gn[0].width,gn[0].height,qn.depth);for(let jn=0,Un=gn.length;jn<Un;jn++)st=gn[jn],Oe.format!==$e?ci!==null?xn?Wn&&s.compressedTexSubImage3D(M.TEXTURE_2D_ARRAY,jn,0,0,0,st.width,st.height,qn.depth,ci,st.data,0,0):s.compressedTexImage3D(M.TEXTURE_2D_ARRAY,jn,bi,st.width,st.height,qn.depth,0,st.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xn?Wn&&s.texSubImage3D(M.TEXTURE_2D_ARRAY,jn,0,0,0,st.width,st.height,qn.depth,ci,Xi,st.data):s.texImage3D(M.TEXTURE_2D_ARRAY,jn,bi,st.width,st.height,qn.depth,0,ci,Xi,st.data)}else{xn&&li&&s.texStorage2D(M.TEXTURE_2D,Ki,bi,gn[0].width,gn[0].height);for(let jn=0,Un=gn.length;jn<Un;jn++)st=gn[jn],Oe.format!==$e?ci!==null?xn?Wn&&s.compressedTexSubImage2D(M.TEXTURE_2D,jn,0,0,st.width,st.height,ci,st.data):s.compressedTexImage2D(M.TEXTURE_2D,jn,bi,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xn?Wn&&s.texSubImage2D(M.TEXTURE_2D,jn,0,0,st.width,st.height,ci,Xi,st.data):s.texImage2D(M.TEXTURE_2D,jn,bi,st.width,st.height,0,ci,Xi,st.data)}else if(Oe.isDataArrayTexture)xn?(li&&s.texStorage3D(M.TEXTURE_2D_ARRAY,Ki,bi,qn.width,qn.height,qn.depth),Wn&&s.texSubImage3D(M.TEXTURE_2D_ARRAY,0,0,0,0,qn.width,qn.height,qn.depth,ci,Xi,qn.data)):s.texImage3D(M.TEXTURE_2D_ARRAY,0,bi,qn.width,qn.height,qn.depth,0,ci,Xi,qn.data);else if(Oe.isData3DTexture)xn?(li&&s.texStorage3D(M.TEXTURE_3D,Ki,bi,qn.width,qn.height,qn.depth),Wn&&s.texSubImage3D(M.TEXTURE_3D,0,0,0,0,qn.width,qn.height,qn.depth,ci,Xi,qn.data)):s.texImage3D(M.TEXTURE_3D,0,bi,qn.width,qn.height,qn.depth,0,ci,Xi,qn.data);else if(Oe.isFramebufferTexture){if(li)if(xn)s.texStorage2D(M.TEXTURE_2D,Ki,bi,qn.width,qn.height);else{let jn=qn.width,Un=qn.height;for(let ir=0;ir<Ki;ir++)s.texImage2D(M.TEXTURE_2D,ir,bi,jn,Un,0,ci,Xi,null),jn>>=1,Un>>=1}}else if(gn.length>0){if(xn&&li){const jn=rs(gn[0]);s.texStorage2D(M.TEXTURE_2D,Ki,bi,jn.width,jn.height)}for(let jn=0,Un=gn.length;jn<Un;jn++)st=gn[jn],xn?Wn&&s.texSubImage2D(M.TEXTURE_2D,jn,0,0,ci,Xi,st):s.texImage2D(M.TEXTURE_2D,jn,bi,ci,Xi,st);Oe.generateMipmaps=!1}else if(xn){if(li){const jn=rs(qn);s.texStorage2D(M.TEXTURE_2D,Ki,bi,jn.width,jn.height)}Wn&&s.texSubImage2D(M.TEXTURE_2D,0,0,0,ci,Xi,qn)}else s.texImage2D(M.TEXTURE_2D,0,bi,ci,Xi,qn);Ce(Oe)&&Me(an),oi.__version=un.version,Oe.onUpdate&&Oe.onUpdate(Oe)}return Xe.__version=Oe.version,!0}function ln(Xe,Oe,zt){if(Oe.image.length!==6)return;const an=is(Xe,Oe),fn=Oe.source;s.bindTexture(M.TEXTURE_CUBE_MAP,Xe.__webglTexture,M.TEXTURE0+zt);const un=l.get(fn);if(fn.version!==un.__version||an===!0){s.activeTexture(M.TEXTURE0+zt);const oi=Or.getPrimaries(Or.workingColorSpace),Tn=Oe.colorSpace===ua?null:Or.getPrimaries(Oe.colorSpace),Yn=Oe.colorSpace===ua||oi===Tn?M.NONE:M.BROWSER_DEFAULT_WEBGL;M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,Oe.flipY),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Oe.premultiplyAlpha),M.pixelStorei(M.UNPACK_ALIGNMENT,Oe.unpackAlignment),M.pixelStorei(M.UNPACK_COLORSPACE_CONVERSION_WEBGL,Yn);const Nr=Oe.isCompressedTexture||Oe.image[0].isCompressedTexture,qn=Oe.image[0]&&Oe.image[0].isDataTexture,ci=[];for(let Un=0;Un<6;Un++)!Nr&&!qn?ci[Un]=Ie(Oe.image[Un],!0,f.maxCubemapSize):ci[Un]=qn?Oe.image[Un].image:Oe.image[Un],ci[Un]=ps(Oe,ci[Un]);const Xi=ci[0],bi=b.convert(Oe.format,Oe.colorSpace),st=b.convert(Oe.type),gn=Je(Oe.internalFormat,bi,st,Oe.colorSpace),xn=Oe.isVideoTexture!==!0,li=un.__version===void 0||an===!0,Wn=fn.dataReady;let Ki=Qe(Oe,Xi);Dr(M.TEXTURE_CUBE_MAP,Oe);let jn;if(Nr){xn&&li&&s.texStorage2D(M.TEXTURE_CUBE_MAP,Ki,gn,Xi.width,Xi.height);for(let Un=0;Un<6;Un++){jn=ci[Un].mipmaps;for(let ir=0;ir<jn.length;ir++){const Ci=jn[ir];Oe.format!==$e?bi!==null?xn?Wn&&s.compressedTexSubImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,ir,0,0,Ci.width,Ci.height,bi,Ci.data):s.compressedTexImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,ir,gn,Ci.width,Ci.height,0,Ci.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xn?Wn&&s.texSubImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,ir,0,0,Ci.width,Ci.height,bi,st,Ci.data):s.texImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,ir,gn,Ci.width,Ci.height,0,bi,st,Ci.data)}}}else{if(jn=Oe.mipmaps,xn&&li){jn.length>0&&Ki++;const Un=rs(ci[0]);s.texStorage2D(M.TEXTURE_CUBE_MAP,Ki,gn,Un.width,Un.height)}for(let Un=0;Un<6;Un++)if(qn){xn?Wn&&s.texSubImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,0,0,0,ci[Un].width,ci[Un].height,bi,st,ci[Un].data):s.texImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,0,gn,ci[Un].width,ci[Un].height,0,bi,st,ci[Un].data);for(let ir=0;ir<jn.length;ir++){const zs=jn[ir].image[Un].image;xn?Wn&&s.texSubImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,ir+1,0,0,zs.width,zs.height,bi,st,zs.data):s.texImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,ir+1,gn,zs.width,zs.height,0,bi,st,zs.data)}}else{xn?Wn&&s.texSubImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,0,0,0,bi,st,ci[Un]):s.texImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,0,gn,bi,st,ci[Un]);for(let ir=0;ir<jn.length;ir++){const Ci=jn[ir];xn?Wn&&s.texSubImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,ir+1,0,0,bi,st,Ci.image[Un]):s.texImage2D(M.TEXTURE_CUBE_MAP_POSITIVE_X+Un,ir+1,gn,bi,st,Ci.image[Un])}}}Ce(Oe)&&Me(M.TEXTURE_CUBE_MAP),un.__version=fn.version,Oe.onUpdate&&Oe.onUpdate(Oe)}Xe.__version=Oe.version}function Rn(Xe,Oe,zt,an,fn,un){const oi=b.convert(zt.format,zt.colorSpace),Tn=b.convert(zt.type),Yn=Je(zt.internalFormat,oi,Tn,zt.colorSpace);if(!l.get(Oe).__hasExternalTextures){const ci=Math.max(1,Oe.width>>un),Xi=Math.max(1,Oe.height>>un);Oe.isWebGLMultiviewRenderTarget===!0?s.texStorage3D(M.TEXTURE_2D_ARRAY,0,Yn,Oe.width,Oe.height,Oe.numViews):fn===M.TEXTURE_3D||fn===M.TEXTURE_2D_ARRAY?s.texImage3D(fn,un,Yn,ci,Xi,Oe.depth,0,oi,Tn,null):s.texImage2D(fn,un,Yn,ci,Xi,0,oi,Tn,null)}s.bindFramebuffer(M.FRAMEBUFFER,Xe);const qn=Ni(Oe);Oe.isWebGLMultiviewRenderTarget===!0?qn?V.framebufferTextureMultisampleMultiviewOVR(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,l.get(zt).__webglTexture,0,Ii(Oe),0,Oe.numViews):V.framebufferTextureMultiviewOVR(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,l.get(zt).__webglTexture,0,0,Oe.numViews):(fn===M.TEXTURE_2D||fn>=M.TEXTURE_CUBE_MAP_POSITIVE_X&&fn<=M.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&(qn?R.framebufferTexture2DMultisampleEXT(M.FRAMEBUFFER,an,fn,l.get(zt).__webglTexture,0,Ii(Oe)):M.framebufferTexture2D(M.FRAMEBUFFER,an,fn,l.get(zt).__webglTexture,un)),s.bindFramebuffer(M.FRAMEBUFFER,null)}function Nn(Xe,Oe,zt){if(M.bindRenderbuffer(M.RENDERBUFFER,Xe),Oe.isWebGLMultiviewRenderTarget===!0){const an=Ni(Oe),fn=Oe.numViews,un=Oe.depthTexture;let oi=M.DEPTH_COMPONENT24,Tn=M.DEPTH_ATTACHMENT;un&&un.isDepthTexture&&(un.type===Pr?oi=M.DEPTH_COMPONENT32F:un.type===ca&&(oi=M.DEPTH24_STENCIL8,Tn=M.DEPTH_STENCIL_ATTACHMENT));let Yn=l.get(Oe.depthTexture).__webglTexture;Yn===void 0&&(Yn=M.createTexture(),M.bindTexture(M.TEXTURE_2D_ARRAY,Yn),M.texStorage3D(M.TEXTURE_2D_ARRAY,1,oi,Oe.width,Oe.height,fn)),an?V.framebufferTextureMultisampleMultiviewOVR(M.FRAMEBUFFER,Tn,Yn,0,Ii(Oe),0,fn):V.framebufferTextureMultiviewOVR(M.FRAMEBUFFER,Tn,Yn,0,0,fn)}else if(Oe.depthBuffer&&!Oe.stencilBuffer){let an=M.DEPTH_COMPONENT24;if(zt||Ni(Oe)){const fn=Oe.depthTexture;fn&&fn.isDepthTexture&&(fn.type===Pr?an=M.DEPTH_COMPONENT32F:fn.type===ys&&(an=M.DEPTH_COMPONENT24));const un=Ii(Oe);Ni(Oe)?R.renderbufferStorageMultisampleEXT(M.RENDERBUFFER,un,an,Oe.width,Oe.height):M.renderbufferStorageMultisample(M.RENDERBUFFER,un,an,Oe.width,Oe.height)}else M.renderbufferStorage(M.RENDERBUFFER,an,Oe.width,Oe.height);M.framebufferRenderbuffer(M.FRAMEBUFFER,M.DEPTH_ATTACHMENT,M.RENDERBUFFER,Xe)}else if(Oe.depthBuffer&&Oe.stencilBuffer){const an=Ii(Oe);zt&&Ni(Oe)===!1?M.renderbufferStorageMultisample(M.RENDERBUFFER,an,M.DEPTH24_STENCIL8,Oe.width,Oe.height):Ni(Oe)?R.renderbufferStorageMultisampleEXT(M.RENDERBUFFER,an,M.DEPTH24_STENCIL8,Oe.width,Oe.height):M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,Oe.width,Oe.height),M.framebufferRenderbuffer(M.FRAMEBUFFER,M.DEPTH_STENCIL_ATTACHMENT,M.RENDERBUFFER,Xe)}else{const an=Oe.textures;for(let fn=0;fn<an.length;fn++){const un=an[fn],oi=b.convert(un.format,un.colorSpace),Tn=b.convert(un.type),Yn=Je(un.internalFormat,oi,Tn,un.colorSpace),Nr=Ii(Oe);zt&&Ni(Oe)===!1?M.renderbufferStorageMultisample(M.RENDERBUFFER,Nr,Yn,Oe.width,Oe.height):Ni(Oe)?R.renderbufferStorageMultisampleEXT(M.RENDERBUFFER,Nr,Yn,Oe.width,Oe.height):M.renderbufferStorage(M.RENDERBUFFER,Yn,Oe.width,Oe.height)}}M.bindRenderbuffer(M.RENDERBUFFER,null)}function Mt(Xe,Oe){if(Oe&&Oe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(s.bindFramebuffer(M.FRAMEBUFFER,Xe),!(Oe.depthTexture&&Oe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!l.get(Oe.depthTexture).__webglTexture||Oe.depthTexture.image.width!==Oe.width||Oe.depthTexture.image.height!==Oe.height)&&(Oe.depthTexture.image.width=Oe.width,Oe.depthTexture.image.height=Oe.height,Oe.depthTexture.needsUpdate=!0),tn(Oe.depthTexture,0),Oe.depthTexture.image.depth!=1?In(Oe.depthTexture,0):tn(Oe.depthTexture,0);const an=l.get(Oe.depthTexture).__webglTexture,fn=Ii(Oe);if(Oe.isWebGLMultiviewRenderTarget===!0){const un=Ni(Oe),oi=Oe.numViews;if(Oe.depthTexture.format===Tt)un?V.framebufferTextureMultisampleMultiviewOVR(M.FRAMEBUFFER,M.DEPTH_ATTACHMENT,an,0,fn,0,oi):V.framebufferTextureMultiviewOVR(M.FRAMEBUFFER,M.DEPTH_ATTACHMENT,an,0,0,oi);else if(Oe.depthTexture.format===jt)un?V.framebufferTextureMultisampleMultiviewOVR(M.FRAMEBUFFER,M.DEPTH_STENCIL_ATTACHMENT,an,0,fn,0,oi):V.framebufferTextureMultiviewOVR(M.FRAMEBUFFER,M.DEPTH_STENCIL_ATTACHMENT,an,0,0,oi);else throw new Error("Unknown depthTexture format")}else if(Oe.depthTexture.format===Tt)Ni(Oe)?R.framebufferTexture2DMultisampleEXT(M.FRAMEBUFFER,M.DEPTH_ATTACHMENT,M.TEXTURE_2D,an,0,fn):M.framebufferTexture2D(M.FRAMEBUFFER,M.DEPTH_ATTACHMENT,M.TEXTURE_2D,an,0);else if(Oe.depthTexture.format===jt)Ni(Oe)?R.framebufferTexture2DMultisampleEXT(M.FRAMEBUFFER,M.DEPTH_STENCIL_ATTACHMENT,M.TEXTURE_2D,an,0,fn):M.framebufferTexture2D(M.FRAMEBUFFER,M.DEPTH_STENCIL_ATTACHMENT,M.TEXTURE_2D,an,0);else throw new Error("Unknown depthTexture format")}function cn(Xe){const Oe=l.get(Xe),zt=Xe.isWebGLCubeRenderTarget===!0;if(Xe.depthTexture&&!Oe.__autoAllocateDepthBuffer){if(zt)throw new Error("target.depthTexture not supported in Cube render targets");Mt(Oe.__webglFramebuffer,Xe)}else if(zt){Oe.__webglDepthbuffer=[];for(let an=0;an<6;an++)s.bindFramebuffer(M.FRAMEBUFFER,Oe.__webglFramebuffer[an]),Oe.__webglDepthbuffer[an]=M.createRenderbuffer(),Nn(Oe.__webglDepthbuffer[an],Xe,!1)}else s.bindFramebuffer(M.FRAMEBUFFER,Oe.__webglFramebuffer),Oe.__webglDepthbuffer=M.createRenderbuffer(),Nn(Oe.__webglDepthbuffer,Xe,!1);s.bindFramebuffer(M.FRAMEBUFFER,null)}function Xt(Xe,Oe,zt){const an=l.get(Xe);Oe!==void 0&&Rn(an.__webglFramebuffer,Xe,Xe.texture,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,0),zt!==void 0&&cn(Xe)}function vn(Xe){const Oe=Xe.texture,zt=l.get(Xe),an=l.get(Oe);Xe.addEventListener("dispose",Ye);const fn=Xe.textures,un=Xe.isWebGLCubeRenderTarget===!0,oi=fn.length>1;if(oi||(an.__webglTexture===void 0&&(an.__webglTexture=M.createTexture()),an.__version=Oe.version,I.memory.textures++),un){zt.__webglFramebuffer=[];for(let Tn=0;Tn<6;Tn++)if(Oe.mipmaps&&Oe.mipmaps.length>0){zt.__webglFramebuffer[Tn]=[];for(let Yn=0;Yn<Oe.mipmaps.length;Yn++)zt.__webglFramebuffer[Tn][Yn]=M.createFramebuffer()}else zt.__webglFramebuffer[Tn]=M.createFramebuffer()}else{if(Oe.mipmaps&&Oe.mipmaps.length>0){zt.__webglFramebuffer=[];for(let Tn=0;Tn<Oe.mipmaps.length;Tn++)zt.__webglFramebuffer[Tn]=M.createFramebuffer()}else zt.__webglFramebuffer=M.createFramebuffer();if(oi)for(let Tn=0,Yn=fn.length;Tn<Yn;Tn++){const Nr=l.get(fn[Tn]);Nr.__webglTexture===void 0&&(Nr.__webglTexture=M.createTexture(),I.memory.textures++)}if(Xe.samples>0&&Ni(Xe)===!1){zt.__webglMultisampledFramebuffer=M.createFramebuffer(),zt.__webglColorRenderbuffer=[],s.bindFramebuffer(M.FRAMEBUFFER,zt.__webglMultisampledFramebuffer);for(let Tn=0;Tn<fn.length;Tn++){const Yn=fn[Tn];zt.__webglColorRenderbuffer[Tn]=M.createRenderbuffer(),M.bindRenderbuffer(M.RENDERBUFFER,zt.__webglColorRenderbuffer[Tn]);const Nr=b.convert(Yn.format,Yn.colorSpace),qn=b.convert(Yn.type),ci=Je(Yn.internalFormat,Nr,qn,Yn.colorSpace,Xe.isXRRenderTarget===!0),Xi=Ii(Xe);M.renderbufferStorageMultisample(M.RENDERBUFFER,Xi,ci,Xe.width,Xe.height),M.framebufferRenderbuffer(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0+Tn,M.RENDERBUFFER,zt.__webglColorRenderbuffer[Tn])}M.bindRenderbuffer(M.RENDERBUFFER,null),Xe.depthBuffer&&(zt.__webglDepthRenderbuffer=M.createRenderbuffer(),Nn(zt.__webglDepthRenderbuffer,Xe,!0)),s.bindFramebuffer(M.FRAMEBUFFER,null)}}if(un){s.bindTexture(M.TEXTURE_CUBE_MAP,an.__webglTexture),Dr(M.TEXTURE_CUBE_MAP,Oe);for(let Tn=0;Tn<6;Tn++)if(Oe.mipmaps&&Oe.mipmaps.length>0)for(let Yn=0;Yn<Oe.mipmaps.length;Yn++)Rn(zt.__webglFramebuffer[Tn][Yn],Xe,Oe,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,Yn);else Rn(zt.__webglFramebuffer[Tn],Xe,Oe,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,0);Ce(Oe)&&Me(M.TEXTURE_CUBE_MAP),s.unbindTexture()}else if(oi){for(let Tn=0,Yn=fn.length;Tn<Yn;Tn++){const Nr=fn[Tn],qn=l.get(Nr);s.bindTexture(M.TEXTURE_2D,qn.__webglTexture),Dr(M.TEXTURE_2D,Nr),Rn(zt.__webglFramebuffer,Xe,Nr,M.COLOR_ATTACHMENT0+Tn,M.TEXTURE_2D,0),Ce(Nr)&&Me(M.TEXTURE_2D)}s.unbindTexture()}else{let Tn=M.TEXTURE_2D;if((Xe.isWebGL3DRenderTarget||Xe.isWebGLArrayRenderTarget)&&(Tn=Xe.isWebGL3DRenderTarget?M.TEXTURE_3D:M.TEXTURE_2D_ARRAY),Xe.isWebGLMultiviewRenderTarget===!0&&(Tn=M.TEXTURE_2D_ARRAY),s.bindTexture(Tn,an.__webglTexture),Dr(Tn,Oe),Oe.mipmaps&&Oe.mipmaps.length>0)for(let Yn=0;Yn<Oe.mipmaps.length;Yn++)Rn(zt.__webglFramebuffer[Yn],Xe,Oe,M.COLOR_ATTACHMENT0,Tn,Yn);else Rn(zt.__webglFramebuffer,Xe,Oe,M.COLOR_ATTACHMENT0,Tn,0);Ce(Oe)&&Me(Tn),s.unbindTexture()}(Xe.depthBuffer||Xe.isWebGLMultiviewRenderTarget===!0)&&this.setupDepthRenderbuffer(Xe)}function An(Xe){const Oe=Xe.textures;for(let zt=0,an=Oe.length;zt<an;zt++){const fn=Oe[zt];if(Ce(fn)){const un=Xe.isWebGLCubeRenderTarget?M.TEXTURE_CUBE_MAP:M.TEXTURE_2D,oi=l.get(fn).__webglTexture;s.bindTexture(un,oi),Me(un),s.unbindTexture()}}}const pn=[],kn=[];function Xn(Xe){if(Xe.samples>0){if(Ni(Xe)===!1){const Oe=Xe.textures,zt=Xe.width,an=Xe.height;let fn=M.COLOR_BUFFER_BIT;const un=Xe.stencilBuffer?M.DEPTH_STENCIL_ATTACHMENT:M.DEPTH_ATTACHMENT,oi=l.get(Xe),Tn=Oe.length>1;if(Tn)for(let Yn=0;Yn<Oe.length;Yn++)s.bindFramebuffer(M.FRAMEBUFFER,oi.__webglMultisampledFramebuffer),M.framebufferRenderbuffer(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0+Yn,M.RENDERBUFFER,null),s.bindFramebuffer(M.FRAMEBUFFER,oi.__webglFramebuffer),M.framebufferTexture2D(M.DRAW_FRAMEBUFFER,M.COLOR_ATTACHMENT0+Yn,M.TEXTURE_2D,null,0);s.bindFramebuffer(M.READ_FRAMEBUFFER,oi.__webglMultisampledFramebuffer),s.bindFramebuffer(M.DRAW_FRAMEBUFFER,oi.__webglFramebuffer);for(let Yn=0;Yn<Oe.length;Yn++){if(Xe.resolveDepthBuffer&&(Xe.depthBuffer&&(fn|=M.DEPTH_BUFFER_BIT),Xe.stencilBuffer&&Xe.resolveStencilBuffer&&(fn|=M.STENCIL_BUFFER_BIT)),Tn){M.framebufferRenderbuffer(M.READ_FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.RENDERBUFFER,oi.__webglColorRenderbuffer[Yn]);const Nr=l.get(Oe[Yn]).__webglTexture;M.framebufferTexture2D(M.DRAW_FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,Nr,0)}M.blitFramebuffer(0,0,zt,an,0,0,zt,an,fn,M.NEAREST),U===!0&&(pn.length=0,kn.length=0,pn.push(M.COLOR_ATTACHMENT0+Yn),Xe.depthBuffer&&Xe.resolveDepthBuffer===!1&&(pn.push(un),kn.push(un),M.invalidateFramebuffer(M.DRAW_FRAMEBUFFER,kn)),M.invalidateFramebuffer(M.READ_FRAMEBUFFER,pn))}if(s.bindFramebuffer(M.READ_FRAMEBUFFER,null),s.bindFramebuffer(M.DRAW_FRAMEBUFFER,null),Tn)for(let Yn=0;Yn<Oe.length;Yn++){s.bindFramebuffer(M.FRAMEBUFFER,oi.__webglMultisampledFramebuffer),M.framebufferRenderbuffer(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0+Yn,M.RENDERBUFFER,oi.__webglColorRenderbuffer[Yn]);const Nr=l.get(Oe[Yn]).__webglTexture;s.bindFramebuffer(M.FRAMEBUFFER,oi.__webglFramebuffer),M.framebufferTexture2D(M.DRAW_FRAMEBUFFER,M.COLOR_ATTACHMENT0+Yn,M.TEXTURE_2D,Nr,0)}s.bindFramebuffer(M.DRAW_FRAMEBUFFER,oi.__webglMultisampledFramebuffer)}else if(Xe.depthBuffer&&Xe.resolveDepthBuffer===!1&&U){const Oe=Xe.stencilBuffer?M.DEPTH_STENCIL_ATTACHMENT:M.DEPTH_ATTACHMENT;M.invalidateFramebuffer(M.DRAW_FRAMEBUFFER,[Oe])}}}function Ii(Xe){return Math.min(f.maxSamples,Xe.samples)}function Ni(Xe){const Oe=l.get(Xe);return Xe.samples>0&&n.has("WEBGL_multisampled_render_to_texture")===!0&&Oe.__useRenderToTexture!==!1}function wr(Xe){const Oe=I.render.frame;Z.get(Xe)!==Oe&&(Z.set(Xe,Oe),Xe.update())}function ps(Xe,Oe){const zt=Xe.colorSpace,an=Xe.format,fn=Xe.type;return Xe.isCompressedTexture===!0||Xe.isVideoTexture===!0||zt!==Uo&&zt!==ua&&(Or.getTransfer(zt)===jr?(an!==$e||fn!==Hr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",zt)),Oe}function rs(Xe){return typeof HTMLImageElement<"u"&&Xe instanceof HTMLImageElement?($.width=Xe.naturalWidth||Xe.width,$.height=Xe.naturalHeight||Xe.height):typeof VideoFrame<"u"&&Xe instanceof VideoFrame?($.width=Xe.displayWidth,$.height=Xe.displayHeight):($.width=Xe.width,$.height=Xe.height),$}this.allocateTextureUnit=bt,this.resetTextureUnits=lt,this.setTexture2D=tn,this.setTexture2DArray=In,this.setTexture3D=Gt,this.setTextureCube=bn,this.rebindTextures=Xt,this.uploadTexture=si,this.setupRenderTarget=vn,this.updateRenderTargetMipmap=An,this.updateMultisampleRenderTarget=Xn,this.setupDepthTexture=Mt,this.setupDepthRenderbuffer=cn,this.setupFrameBufferTexture=Rn,this.useMultisampledRTT=Ni,this.runDeferredUploads=$r,this.setDeferTextureUploads=Er}function eM(M,n){function s(l,f=ua){let b;const I=Or.getTransfer(f);if(l===Hr)return M.UNSIGNED_BYTE;if(l===us)return M.UNSIGNED_SHORT_4_4_4_4;if(l===to)return M.UNSIGNED_SHORT_5_5_5_1;if(l===Fo)return M.UNSIGNED_INT_5_9_9_9_REV;if(l===wa)return M.BYTE;if(l===zr)return M.SHORT;if(l===ks)return M.UNSIGNED_SHORT;if(l===vs)return M.INT;if(l===ys)return M.UNSIGNED_INT;if(l===Pr)return M.FLOAT;if(l===pr)return M.HALF_FLOAT;if(l===Ua)return M.ALPHA;if(l===Ne)return M.RGB;if(l===$e)return M.RGBA;if(l===pt)return M.LUMINANCE;if(l===Vt)return M.LUMINANCE_ALPHA;if(l===Tt)return M.DEPTH_COMPONENT;if(l===jt)return M.DEPTH_STENCIL;if(l===mn)return M.RED;if(l===Ln)return M.RED_INTEGER;if(l===Dn)return M.RG;if(l===$t)return M.RG_INTEGER;if(l===ni)return M.RGBA_INTEGER;if(l===Jn||l===fi||l===dr||l===Si)if(I===jr)if(b=n.get("WEBGL_compressed_texture_s3tc_srgb"),b!==null){if(l===Jn)return b.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(l===fi)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(l===dr)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(l===Si)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(b=n.get("WEBGL_compressed_texture_s3tc"),b!==null){if(l===Jn)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===fi)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===dr)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===Si)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(l===Mi||l===Ti||l===ki||l===Wr)if(b=n.get("WEBGL_compressed_texture_pvrtc"),b!==null){if(l===Mi)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===Ti)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===ki)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===Wr)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(l===Mn||l===_i||l===nr)if(b=n.get("WEBGL_compressed_texture_etc"),b!==null){if(l===Mn||l===_i)return I===jr?b.COMPRESSED_SRGB8_ETC2:b.COMPRESSED_RGB8_ETC2;if(l===nr)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:b.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(l===Ui||l===re||l===le||l===ve||l===Se||l===Fe||l===Ze||l===ot||l===Yt||l===Wt||l===yt||l===Ot||l===on||l===Cn)if(b=n.get("WEBGL_compressed_texture_astc"),b!==null){if(l===Ui)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:b.COMPRESSED_RGBA_ASTC_4x4_KHR;if(l===re)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:b.COMPRESSED_RGBA_ASTC_5x4_KHR;if(l===le)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:b.COMPRESSED_RGBA_ASTC_5x5_KHR;if(l===ve)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:b.COMPRESSED_RGBA_ASTC_6x5_KHR;if(l===Se)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:b.COMPRESSED_RGBA_ASTC_6x6_KHR;if(l===Fe)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:b.COMPRESSED_RGBA_ASTC_8x5_KHR;if(l===Ze)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:b.COMPRESSED_RGBA_ASTC_8x6_KHR;if(l===ot)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:b.COMPRESSED_RGBA_ASTC_8x8_KHR;if(l===Yt)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:b.COMPRESSED_RGBA_ASTC_10x5_KHR;if(l===Wt)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:b.COMPRESSED_RGBA_ASTC_10x6_KHR;if(l===yt)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:b.COMPRESSED_RGBA_ASTC_10x8_KHR;if(l===Ot)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:b.COMPRESSED_RGBA_ASTC_10x10_KHR;if(l===on)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:b.COMPRESSED_RGBA_ASTC_12x10_KHR;if(l===Cn)return I===jr?b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:b.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(l===Vn||l===Qn||l===vi)if(b=n.get("EXT_texture_compression_bptc"),b!==null){if(l===Vn)return I===jr?b.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:b.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(l===Qn)return b.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(l===vi)return b.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(l===ei||l===hi||l===Ji||l===Mr)if(b=n.get("EXT_texture_compression_rgtc"),b!==null){if(l===Vn)return b.COMPRESSED_RED_RGTC1_EXT;if(l===hi)return b.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(l===Ji)return b.COMPRESSED_RED_GREEN_RGTC2_EXT;if(l===Mr)return b.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return l===ca?M.UNSIGNED_INT_24_8:M[l]!==void 0?M[l]:null}return{convert:s}}class Ru extends Cr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class P2 extends Vs{constructor(n=[]){super(),this.isArrayCamera=!0,this.cameras=n}}var tM=new Ve,nM=new Ve;function ZF(M,n,s){tM.setFromMatrixPosition(n.matrixWorld),nM.setFromMatrixPosition(s.matrixWorld);var l=tM.distanceTo(nM),f=n.projectionMatrix.elements,b=s.projectionMatrix.elements,I=f[14]/(f[10]-1),R=f[14]/(f[10]+1),U=(f[9]+1)/f[5],V=(f[9]-1)/f[5],$=(f[8]-1)/f[0],Z=(b[8]+1)/b[0],ee=I*$,te=I*Z,ae=l/(-$+Z),he=ae*-$;n.matrixWorld.decompose(M.position,M.quaternion,M.scale),M.translateX(he),M.translateZ(ae),M.matrixWorld.compose(M.position,M.quaternion,M.scale),M.matrixWorldInverse.copy(M.matrixWorld).invert();var oe=I+ae,ne=R+ae,Ie=ee-he,Ce=te+(l-he),Me=U*R/ne*oe,Je=V*R/ne*oe;M.projectionMatrix.makePerspective(Ie,Ce,Me,Je,oe,ne)}function iM(M){var n,s,l=this,f=null,b=null,I=null,R=[],U=new ii,V=new ii,$=1,Z="local-floor";typeof window<"u"&&"VRFrameData"in window&&(b=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",Me,!1));var ee=new ii,te=new _r,ae=new Ve,he=new Vs;he.viewport=new yr,he.layers.enable(1);var oe=new Vs;oe.viewport=new yr,oe.layers.enable(2);var ne=new P2([he,oe]);ne.layers.enable(1),ne.layers.enable(2);var Ie=new sn,Ce;function Me(){var qe=l.isPresenting=f!==null&&f.isPresenting===!0;if(qe){var At=f.getEyeParameters("left");n=2*At.renderWidth*$,s=At.renderHeight*$,Ce=M.getPixelRatio(),M.getSize(Ie),M.setDrawingBufferSize(n,s,1),he.viewport.set(0,0,n/2,s),oe.viewport.set(n/2,0,n/2,s),Re.start(),l.dispatchEvent({type:"sessionstart"})}else l.enabled&&M.setDrawingBufferSize(Ie.width,Ie.height,Ce),Re.stop(),l.dispatchEvent({type:"sessionend"})}var Je=[],Qe=[];function je(qe){for(var At=navigator.getGamepads&&navigator.getGamepads(),lt=0,bt=At.length;lt<bt;lt++){var kt=At[lt];if(kt&&(kt.id==="Daydream Controller"||kt.id==="Gear VR Controller"||kt.id==="Oculus Go Controller"||kt.id==="OpenVR Gamepad"||kt.id.startsWith("Oculus Touch")||kt.id.startsWith("HTC Vive Focus")||kt.id.startsWith("Spatial Controller"))){var tn=kt.hand;if(qe===0&&(tn===""||tn==="right")||qe===1&&tn==="left")return kt}}}function Ye(){for(var qe=0;qe<R.length;qe++){var At=R[qe],lt=je(qe);if(lt!==void 0&&lt.pose!==void 0){if(lt.pose===null)return;var bt=lt.pose;bt.hasPosition===!1&&At.position.set(.2,-.6,-.05),bt.position!==null&&At.position.fromArray(bt.position),bt.orientation!==null&&At.quaternion.fromArray(bt.orientation),At.matrix.compose(At.position,At.quaternion,At.scale),At.matrix.premultiply(U),At.matrix.decompose(At.position,At.quaternion,At.scale),At.matrixWorldNeedsUpdate=!0,At.visible=!0;var kt=lt.id==="Daydream Controller"?0:1;Je[qe]===void 0&&(Je[qe]=!1),Je[qe]!==lt.buttons[kt].pressed&&(Je[qe]=lt.buttons[kt].pressed,Je[qe]===!0?At.dispatchEvent({type:"selectstart"}):(At.dispatchEvent({type:"selectend"}),At.dispatchEvent({type:"select"}))),kt=2,Qe[qe]===void 0&&(Qe[qe]=!1),lt.buttons[kt]!==void 0&&Qe[qe]!==lt.buttons[kt].pressed&&(Qe[qe]=lt.buttons[kt].pressed,Qe[qe]===!0?At.dispatchEvent({type:"squeezestart"}):(At.dispatchEvent({type:"squeezeend"}),At.dispatchEvent({type:"squeeze"})))}else At.visible=!1}}function Pe(qe,At){At!==null&&At.length===4&&qe.set(At[0]*n,At[1]*s,At[2]*n,At[3]*s)}this.enabled=!1,this.getController=function(qe){var At=R[qe];return At===void 0&&(At=new Ru,At.matrixAutoUpdate=!1,At.visible=!1,R[qe]=At),At},this.getDevice=function(){return f},this.setDevice=function(qe){qe!==void 0&&(f=qe),Re.setContext(qe)},this.setFramebufferScaleFactor=function(qe){$=qe},this.setReferenceSpaceType=function(qe){Z=qe},this.setPoseTarget=function(qe){qe!==void 0&&(I=qe)},this.cameraAutoUpdate=!0,this.updateCamera=function(qe){var At=Z==="local-floor"?1.6:0;if(f.depthNear=qe.near,f.depthFar=qe.far,f.getFrameData(b),Z==="local-floor"){var lt=f.stageParameters;lt?U.fromArray(lt.sittingToStandingTransform):U.makeTranslation(0,At,0)}var bt=b.pose,kt=I!==null?I:qe;kt.matrix.copy(U),kt.matrix.decompose(kt.position,kt.quaternion,kt.scale),bt.orientation!==null&&(te.fromArray(bt.orientation),kt.quaternion.multiply(te)),bt.position!==null&&(te.setFromRotationMatrix(U),ae.fromArray(bt.position),ae.applyQuaternion(te),kt.position.add(ae)),kt.updateMatrixWorld();for(var tn=kt.children,In=0,Gt=tn.length;In<Gt;In++)tn[In].updateMatrixWorld(!0);he.near=qe.near,oe.near=qe.near,he.far=qe.far,oe.far=qe.far,he.matrixWorldInverse.fromArray(b.leftViewMatrix),oe.matrixWorldInverse.fromArray(b.rightViewMatrix),V.copy(U).invert(),Z==="local-floor"&&(he.matrixWorldInverse.multiply(V),oe.matrixWorldInverse.multiply(V));var bn=kt.parent;bn!==null&&(ee.copy(bn.matrixWorld).invert(),he.matrixWorldInverse.multiply(ee),oe.matrixWorldInverse.multiply(ee)),he.matrixWorld.copy(he.matrixWorldInverse).invert(),oe.matrixWorld.copy(oe.matrixWorldInverse).invert(),he.projectionMatrix.fromArray(b.leftProjectionMatrix),oe.projectionMatrix.fromArray(b.rightProjectionMatrix),ZF(ne,he,oe);var wn=f.getLayers();if(wn.length){var ti=wn[0];Pe(he.viewport,ti.leftBounds),Pe(oe.viewport,ti.rightBounds)}return Ye(),ne},this.getCamera=function(){return ne},this.getFoveation=function(){return 1},this.setFoveation=function(qe){qe!==1&&console.warn("THREE.WebVRManager: setFoveation() not used in WebVR.")},this.getEnvironmentBlendMode=function(){if(l.isPresenting)return"opaque"},this.getStandingMatrix=function(){return U},this.isPresenting=!1;var Re=new _2;this.setAnimationLoop=function(qe){Re.setAnimationLoop(qe),this.isPresenting&&Re.start()},this.submitFrame=function(){this.isPresenting&&f.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",Me)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(iM.prototype,{addEventListener:xa.prototype.addEventListener,hasEventListener:xa.prototype.hasEventListener,removeEventListener:xa.prototype.removeEventListener,dispatchEvent:xa.prototype.dispatchEvent});class rM extends Ga{constructor(n,s,l,f={}){super(n,s,f),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=l}copy(n){return super.copy(n),this.numViews=n.numViews,this}}rM.prototype.isWebGLMultiviewRenderTarget=!0;const ek={type:"move"};class N2{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ru,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ru,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ve),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ru,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ve),this._grip}dispatchEvent(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this}connect(n){if(n&&n.hand){const s=this._hand;if(s)for(const l of n.hand.values())this._getHandJoint(s,l)}return this.dispatchEvent({type:"connected",data:n}),this}disconnect(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(n,s,l){let f=null,b=null,I=null;const R=this._targetRay,U=this._grip,V=this._hand;if(n&&s.session.visibilityState!=="visible-blurred"){if(V&&n.hand){I=!0;for(const he of n.hand.values()){const oe=s.getJointPose(he,l),ne=this._getHandJoint(V,he);oe!==null&&(ne.matrix.fromArray(oe.transform.matrix),ne.matrix.decompose(ne.position,ne.rotation,ne.scale),ne.matrixWorldNeedsUpdate=!0,ne.jointRadius=oe.radius),ne.visible=oe!==null}const $=V.joints["index-finger-tip"],Z=V.joints["thumb-tip"],ee=$.position.distanceTo(Z.position),te=.02,ae=.005;V.inputState.pinching&&ee>te+ae?(V.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!V.inputState.pinching&&ee<=te-ae&&(V.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else U!==null&&n.gripSpace&&(b=s.getPose(n.gripSpace,l),b!==null&&(U.matrix.fromArray(b.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.matrixWorldNeedsUpdate=!0,b.linearVelocity?(U.hasLinearVelocity=!0,U.linearVelocity.copy(b.linearVelocity)):U.hasLinearVelocity=!1,b.angularVelocity?(U.hasAngularVelocity=!0,U.angularVelocity.copy(b.angularVelocity)):U.hasAngularVelocity=!1));R!==null&&(f=s.getPose(n.targetRaySpace,l),f===null&&b!==null&&(f=b),f!==null&&(R.matrix.fromArray(f.transform.matrix),R.matrix.decompose(R.position,R.rotation,R.scale),R.matrixWorldNeedsUpdate=!0,f.linearVelocity?(R.hasLinearVelocity=!0,R.linearVelocity.copy(f.linearVelocity)):R.hasLinearVelocity=!1,f.angularVelocity?(R.hasAngularVelocity=!0,R.angularVelocity.copy(f.angularVelocity)):R.hasAngularVelocity=!1,this.dispatchEvent(ek)))}return R!==null&&(R.visible=f!==null),U!==null&&(U.visible=b!==null),V!==null&&(V.visible=I!==null),this}_getHandJoint(n,s){if(n.joints[s.jointName]===void 0){const l=new Ru;l.matrixAutoUpdate=!1,l.visible=!1,n.joints[s.jointName]=l,n.add(l)}return n.joints[s.jointName]}}const tk=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,nk=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ik{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(n,s,l){if(this.texture===null){const f=new qr,b=n.properties.get(f);b.__webglTexture=s.texture,(s.depthNear!=l.depthNear||s.depthFar!=l.depthFar)&&(this.depthNear=s.depthNear,this.depthFar=s.depthFar),this.texture=f}}render(n,s){if(this.texture!==null){if(this.mesh===null){const l=s.cameras[0].viewport,f=new Vo({vertexShader:tk,fragmentShader:nk,uniforms:{depthColor:{value:this.texture},depthWidth:{value:l.z},depthHeight:{value:l.w}}});this.mesh=new Ds(new $0(20,20),f)}n.render(this.mesh,s)}}reset(){this.texture=null,this.mesh=null}}class rk extends xa{constructor(n,s,l,f){super();const b=this;let I=null,R=1;var U=null;let V=null,$="local-floor",Z=1,ee=null,te=null;var ae=[];let he=null,oe=null,ne=null,Ie=null;const Ce=new ik,Me=s.getContextAttributes();let Je=null,Qe=null;const je=[],Ye=[],Pe=new sn;let Re=null;const qe=new Vs;qe.layers.enable(1),qe.viewport=new yr;const At=new Vs;At.layers.enable(2),At.viewport=new yr;const lt=[qe,At],bt=new P2;bt.layers.enable(1),bt.layers.enable(2);let kt=null,tn=null;this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.isMultiview=!1,this.getCameraPose=function(){return te},this.getController=function(ln){let Rn=je[ln];return Rn===void 0&&(Rn=new N2,je[ln]=Rn),Rn.getTargetRaySpace()},this.getControllerGrip=function(ln){let Rn=je[ln];return Rn===void 0&&(Rn=new N2,je[ln]=Rn),Rn.getGripSpace()},this.getHand=function(ln){let Rn=je[ln];return Rn===void 0&&(Rn=new N2,je[ln]=Rn),Rn.getHandSpace()};function In(ln){const Rn=Ye.indexOf(ln.inputSource);if(Rn===-1)return;const Nn=je[Rn];Nn!==void 0&&(Nn.update(ln.inputSource,ln.frame,ee||V),Nn.dispatchEvent({type:ln.type,data:ln.inputSource}))}function Gt(){I.removeEventListener("select",In),I.removeEventListener("selectstart",In),I.removeEventListener("selectend",In),I.removeEventListener("squeeze",In),I.removeEventListener("squeezestart",In),I.removeEventListener("squeezeend",In),I.removeEventListener("end",Gt),I.removeEventListener("inputsourceschange",bn);for(let ln=0;ln<je.length;ln++){const Rn=Ye[ln];Rn!==null&&(Ye[ln]=null,je[ln].disconnect(Rn))}kt=null,tn=null,Ce.reset(),n.setRenderTarget(Je),ne=null,oe=null,he=null,I=null,Qe=null,si.stop(),b.isPresenting=!1,n.setPixelRatio(Re),n.setSize(Pe.width,Pe.height,!1),b.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ln){R=ln,b.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ln){$=ln,b.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return ee||V},this.setReferenceSpace=function(ln){ee=ln},this.getBaseLayer=function(){return oe!==null?oe:ne},this.getBinding=function(){return he},this.getFrame=function(){return Ie},this.getSession=function(){return I},this.setSession=async function(ln){if(I=ln,I!==null){if(Je=n.getRenderTarget(),I.addEventListener("select",In),I.addEventListener("selectstart",In),I.addEventListener("selectend",In),I.addEventListener("squeeze",In),I.addEventListener("squeezestart",In),I.addEventListener("squeezeend",In),I.addEventListener("end",Gt),I.addEventListener("inputsourceschange",bn),Me.xrCompatible!==!0&&await s.makeXRCompatible(),Re=n.getPixelRatio(),n.getSize(Pe),I.renderState.layers===void 0){const Rn={antialias:Me.antialias,alpha:!0,depth:Me.depth,stencil:Me.stencil,framebufferScaleFactor:R};ne=new XRWebGLLayer(I,s,Rn),I.updateRenderState({baseLayer:ne}),n.setPixelRatio(1),n.setSize(ne.framebufferWidth,ne.framebufferHeight,!1),Qe=new Ga(ne.framebufferWidth,ne.framebufferHeight,{format:$e,type:Hr,colorSpace:n.outputColorSpace,stencilBuffer:Me.stencil})}else{let Rn=null,Nn=null,Mt=null;Me.depth&&(Mt=Me.stencil?s.DEPTH24_STENCIL8:s.DEPTH_COMPONENT24,Rn=Me.stencil?jt:Tt,Nn=Me.stencil?ca:ys),b.isMultiview=f&&l.has("OCULUS_multiview");const cn={colorFormat:s.RGBA8,depthFormat:Mt,scaleFactor:R};b.isMultiview&&(cn.textureType="texture-array"),he=new XRWebGLBinding(I,s),oe=he.createProjectionLayer(cn),I.updateRenderState({layers:[oe]}),n.setPixelRatio(1),n.setSize(oe.textureWidth,oe.textureHeight,!1);const Xt={format:$e,type:Hr,depthTexture:new B2(oe.textureWidth,oe.textureHeight,Nn,void 0,void 0,void 0,void 0,void 0,void 0,Rn),stencilBuffer:Me.stencil,colorSpace:n.outputColorSpace,samples:Me.antialias?4:0,resolveDepthBuffer:oe.ignoreDepthValues===!1};if(b.isMultiview){const vn=l.get("OCULUS_multiview");this.maxNumViews=s.getParameter(vn.MAX_VIEWS_OVR),Qe=new rM(oe.textureWidth,oe.textureHeight,2,Xt)}else Qe=new Ga(oe.textureWidth,oe.textureHeight,Xt)}Qe.isXRRenderTarget=!0,this.setFoveation(Z),ee=null,V=await I.requestReferenceSpace($),si.setContext(I),si.start(),b.isPresenting=!0,b.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(I!==null)return I.environmentBlendMode},this.addLayer=function(ln){!window.XRWebGLBinding||!this.layersEnabled||!I||(ae.push(ln),this.updateLayers())},this.removeLayer=function(ln){ae.splice(ae.indexOf(ln),1),!(!window.XRWebGLBinding||!this.layersEnabled||!I)&&this.updateLayers()},this.updateLayers=function(){var ln=ae.map(function(Rn){return Rn});ln.unshift(I.renderState.layers[0]),I.updateRenderState({layers:ln})};function bn(ln){for(let Rn=0;Rn<ln.removed.length;Rn++){const Nn=ln.removed[Rn],Mt=Ye.indexOf(Nn);Mt>=0&&(Ye[Mt]=null,je[Mt].disconnect(Nn))}for(let Rn=0;Rn<ln.added.length;Rn++){const Nn=ln.added[Rn];let Mt=Ye.indexOf(Nn);if(Mt===-1){for(let Xt=0;Xt<je.length;Xt++)if(Xt>=Ye.length){Ye.push(Nn),Mt=Xt;break}else if(Ye[Xt]===null){Ye[Xt]=Nn,Mt=Xt;break}if(Mt===-1)break}const cn=je[Mt];cn&&cn.connect(Nn)}}const wn=new Ve,ti=new Ve;function er(ln,Rn,Nn){wn.setFromMatrixPosition(Rn.matrixWorld),ti.setFromMatrixPosition(Nn.matrixWorld);const Mt=wn.distanceTo(ti),cn=Rn.projectionMatrix.elements,Xt=Nn.projectionMatrix.elements,vn=cn[14]/(cn[10]-1),An=cn[14]/(cn[10]+1),pn=(cn[9]+1)/cn[5],kn=(cn[9]-1)/cn[5],Xn=(cn[8]-1)/cn[0],Ii=(Xt[8]+1)/Xt[0],Ni=vn*Xn,wr=vn*Ii,ps=Mt/(-Xn+Ii),rs=ps*-Xn;Rn.matrixWorld.decompose(ln.position,ln.quaternion,ln.scale),ln.translateX(rs),ln.translateZ(ps),ln.matrixWorld.compose(ln.position,ln.quaternion,ln.scale),ln.matrixWorldInverse.copy(ln.matrixWorld).invert();const Xe=vn+ps,Oe=An+ps,zt=Ni-rs,an=wr+(Mt-rs),fn=pn*An/Oe*Xe,un=kn*An/Oe*Xe;ln.projectionMatrix.makePerspective(zt,an,fn,un,Xe,Oe),ln.projectionMatrixInverse.copy(ln.projectionMatrix).invert()}function Dr(ln,Rn){Rn===null?ln.matrixWorld.copy(ln.matrix):ln.matrixWorld.multiplyMatrices(Rn.matrixWorld,ln.matrix),ln.matrixWorldInverse.copy(ln.matrixWorld).invert()}this.setPoseTarget=function(ln){ln!==void 0&&(U=ln)},this.updateCamera=function(ln){if(I===null)return;Ce.texture!==null&&(ln.near=Ce.depthNear,ln.far=Ce.depthFar),bt.near=At.near=qe.near=ln.near,bt.far=At.far=qe.far=ln.far,(kt!==bt.near||tn!==bt.far)&&(I.updateRenderState({depthNear:bt.near,depthFar:bt.far}),kt=bt.near,tn=bt.far,qe.near=kt,qe.far=tn,At.near=kt,At.far=tn,qe.updateProjectionMatrix(),At.updateProjectionMatrix(),ln.updateProjectionMatrix());const Rn=bt.cameras;var Nn=U||ln;const Mt=Nn.parent;Dr(bt,Mt);for(let cn=0;cn<Rn.length;cn++)Dr(Rn[cn],Mt);Rn.length===2?er(bt,qe,At):bt.projectionMatrix.copy(qe.projectionMatrix),is(ln,bt,Nn)};function is(ln,Rn,Nn){Rn.matrixWorld.decompose(Rn.position,Rn.quaternion,Rn.scale),Nn.parent===null?Nn.matrix.copy(Rn.matrixWorld):(Nn.matrix.copy(Nn.parent.matrixWorld),Nn.matrix.invert(),Nn.matrix.multiply(Rn.matrixWorld)),Nn.matrix.decompose(Nn.position,Nn.quaternion,Nn.scale),Nn.updateMatrixWorld(!0),ln.projectionMatrix.copy(Rn.projectionMatrix),ln.projectionMatrixInverse.copy(Rn.projectionMatrixInverse),ln.isPerspectiveCamera&&(ln.fov=Cc*2*Math.atan(1/ln.projectionMatrix.elements[5]),ln.zoom=1)}this.getCamera=function(){return bt},this.getFoveation=function(){if(!(oe===null&&ne===null))return Z},this.setFoveation=function(ln){Z=ln,oe!==null&&(oe.fixedFoveation=ln),ne!==null&&ne.fixedFoveation!==void 0&&(ne.fixedFoveation=ln)},this.hasDepthSensing=function(){return Ce.texture!==null};let Er=null;function $r(ln,Rn){if(te=Rn.getViewerPose(ee||V),Ie=Rn,te!==null){const Nn=te.views;ne!==null&&(n.setRenderTargetFramebuffer(Qe,ne.framebuffer),n.setRenderTarget(Qe));let Mt=!1;Nn.length!==bt.cameras.length&&(bt.cameras.length=0,Mt=!0);for(let Xt=0;Xt<Nn.length;Xt++){const vn=Nn[Xt];let An=null;if(ne!==null)An=ne.getViewport(vn);else{const kn=he.getViewSubImage(oe,vn);An=kn.viewport,Xt===0&&(n.setRenderTargetTextures(Qe,kn.colorTexture,oe.ignoreDepthValues?void 0:kn.depthStencilTexture),n.setRenderTarget(Qe))}let pn=lt[Xt];pn===void 0&&(pn=new Vs,pn.layers.enable(Xt),pn.viewport=new yr,lt[Xt]=pn),pn.matrix.fromArray(vn.transform.matrix),pn.matrix.decompose(pn.position,pn.quaternion,pn.scale),pn.projectionMatrix.fromArray(vn.projectionMatrix),pn.projectionMatrixInverse.copy(pn.projectionMatrix).invert(),pn.viewport.set(An.x,An.y,An.width,An.height),Xt===0&&(bt.matrix.copy(pn.matrix),bt.matrix.decompose(bt.position,bt.quaternion,bt.scale)),Mt===!0&&bt.cameras.push(pn)}const cn=I.enabledFeatures;if(cn&&cn.includes("depth-sensing")){const Xt=he.getDepthInformation(Nn[0]);Xt&&Xt.isValid&&Xt.texture&&Ce.init(n,Xt,I.renderState)}}for(let Nn=0;Nn<je.length;Nn++){const Mt=Ye[Nn],cn=je[Nn];Mt!==null&&cn!==void 0&&cn.update(Mt,Rn,ee||V)}Ce.render(n,bt),Er&&Er(ln,Rn),Rn.detectedPlanes&&b.dispatchEvent({type:"planesdetected",data:Rn}),Ie=null}const si=new _2;si.setAnimationLoop($r),this.setAnimationLoop=function(ln){Er=ln},this.dispose=function(){}}}const Ou=new ao,sk=new ii;function ak(M,n){function s(oe,ne){oe.matrixAutoUpdate===!0&&oe.updateMatrix(),ne.value.copy(oe.matrix)}function l(oe,ne){ne.color.getRGB(oe.fogColor.value,_5(M)),ne.isFog?(oe.fogNear.value=ne.near,oe.fogFar.value=ne.far):ne.isFogExp2&&(oe.fogDensity.value=ne.density)}function f(oe,ne,Ie,Ce,Me){ne.isMeshBasicMaterial||ne.isMeshLambertMaterial?b(oe,ne):ne.isMeshToonMaterial?(b(oe,ne),Z(oe,ne)):ne.isMeshPhongMaterial?(b(oe,ne),$(oe,ne)):ne.isMeshStandardMaterial?(b(oe,ne),ee(oe,ne),ne.isMeshPhysicalMaterial&&te(oe,ne,Me)):ne.isMeshMatcapMaterial?(b(oe,ne),ae(oe,ne)):ne.isMeshDepthMaterial?b(oe,ne):ne.isMeshDistanceMaterial?(b(oe,ne),he(oe,ne)):ne.isMeshNormalMaterial?b(oe,ne):ne.isLineBasicMaterial?(I(oe,ne),ne.isLineDashedMaterial&&R(oe,ne)):ne.isPointsMaterial?U(oe,ne,Ie,Ce):ne.isSpriteMaterial?V(oe,ne):ne.isShadowMaterial?(oe.color.value.copy(ne.color),oe.opacity.value=ne.opacity):ne.isShaderMaterial&&(ne.uniformsNeedUpdate=!1)}function b(oe,ne){oe.opacity.value=ne.opacity,ne.color&&oe.diffuse.value.copy(ne.color),ne.emissive&&oe.emissive.value.copy(ne.emissive).multiplyScalar(ne.emissiveIntensity),ne.map&&(oe.map.value=ne.map,s(ne.map,oe.mapTransform)),ne.alphaMap&&(oe.alphaMap.value=ne.alphaMap,s(ne.alphaMap,oe.alphaMapTransform)),ne.bumpMap&&(oe.bumpMap.value=ne.bumpMap,s(ne.bumpMap,oe.bumpMapTransform),oe.bumpScale.value=ne.bumpScale,ne.side===T&&(oe.bumpScale.value*=-1)),ne.normalMap&&(oe.normalMap.value=ne.normalMap,s(ne.normalMap,oe.normalMapTransform),oe.normalScale.value.copy(ne.normalScale),ne.side===T&&oe.normalScale.value.negate()),ne.displacementMap&&(oe.displacementMap.value=ne.displacementMap,s(ne.displacementMap,oe.displacementMapTransform),oe.displacementScale.value=ne.displacementScale,oe.displacementBias.value=ne.displacementBias),ne.emissiveMap&&(oe.emissiveMap.value=ne.emissiveMap,s(ne.emissiveMap,oe.emissiveMapTransform)),ne.specularMap&&(oe.specularMap.value=ne.specularMap,s(ne.specularMap,oe.specularMapTransform)),ne.alphaTest>0&&(oe.alphaTest.value=ne.alphaTest);const Ie=n.get(ne),Ce=Ie.envMap,Me=Ie.envMapRotation;if(Ce&&(oe.envMap.value=Ce,Ou.copy(Me),Ou.x*=-1,Ou.y*=-1,Ou.z*=-1,Ce.isCubeTexture&&Ce.isRenderTargetTexture===!1&&(Ou.y*=-1,Ou.z*=-1),oe.envMapRotation.value.setFromMatrix4(sk.makeRotationFromEuler(Ou)),oe.flipEnvMap.value=Ce.isCubeTexture&&Ce.isRenderTargetTexture===!1?-1:1,oe.reflectivity.value=ne.reflectivity,oe.ior.value=ne.ior,oe.refractionRatio.value=ne.refractionRatio),ne.lightMap){oe.lightMap.value=ne.lightMap;const Je=M._useLegacyLights===!0?Math.PI:1;oe.lightMapIntensity.value=ne.lightMapIntensity*Je,s(ne.lightMap,oe.lightMapTransform)}ne.aoMap&&(oe.aoMap.value=ne.aoMap,oe.aoMapIntensity.value=ne.aoMapIntensity,s(ne.aoMap,oe.aoMapTransform))}function I(oe,ne){oe.diffuse.value.copy(ne.color),oe.opacity.value=ne.opacity,ne.map&&(oe.map.value=ne.map,s(ne.map,oe.mapTransform))}function R(oe,ne){oe.dashSize.value=ne.dashSize,oe.totalSize.value=ne.dashSize+ne.gapSize,oe.scale.value=ne.scale}function U(oe,ne,Ie,Ce){oe.diffuse.value.copy(ne.color),oe.opacity.value=ne.opacity,oe.size.value=ne.size*Ie,oe.scale.value=Ce*.5,ne.map&&(oe.map.value=ne.map,s(ne.map,oe.uvTransform)),ne.alphaMap&&(oe.alphaMap.value=ne.alphaMap,s(ne.alphaMap,oe.alphaMapTransform)),ne.alphaTest>0&&(oe.alphaTest.value=ne.alphaTest)}function V(oe,ne){oe.diffuse.value.copy(ne.color),oe.opacity.value=ne.opacity,oe.rotation.value=ne.rotation,ne.map&&(oe.map.value=ne.map,s(ne.map,oe.mapTransform)),ne.alphaMap&&(oe.alphaMap.value=ne.alphaMap,s(ne.alphaMap,oe.alphaMapTransform)),ne.alphaTest>0&&(oe.alphaTest.value=ne.alphaTest)}function $(oe,ne){oe.specular.value.copy(ne.specular),oe.shininess.value=Math.max(ne.shininess,1e-4)}function Z(oe,ne){ne.gradientMap&&(oe.gradientMap.value=ne.gradientMap)}function ee(oe,ne){oe.metalness.value=ne.metalness,ne.metalnessMap&&(oe.metalnessMap.value=ne.metalnessMap,s(ne.metalnessMap,oe.metalnessMapTransform)),oe.roughness.value=ne.roughness,ne.roughnessMap&&(oe.roughnessMap.value=ne.roughnessMap,s(ne.roughnessMap,oe.roughnessMapTransform)),ne.envMap&&(oe.envMapIntensity.value=ne.envMapIntensity)}function te(oe,ne,Ie){oe.ior.value=ne.ior,ne.sheen>0&&(oe.sheenColor.value.copy(ne.sheenColor).multiplyScalar(ne.sheen),oe.sheenRoughness.value=ne.sheenRoughness,ne.sheenColorMap&&(oe.sheenColorMap.value=ne.sheenColorMap,s(ne.sheenColorMap,oe.sheenColorMapTransform)),ne.sheenRoughnessMap&&(oe.sheenRoughnessMap.value=ne.sheenRoughnessMap,s(ne.sheenRoughnessMap,oe.sheenRoughnessMapTransform))),ne.clearcoat>0&&(oe.clearcoat.value=ne.clearcoat,oe.clearcoatRoughness.value=ne.clearcoatRoughness,ne.clearcoatMap&&(oe.clearcoatMap.value=ne.clearcoatMap,s(ne.clearcoatMap,oe.clearcoatMapTransform)),ne.clearcoatRoughnessMap&&(oe.clearcoatRoughnessMap.value=ne.clearcoatRoughnessMap,s(ne.clearcoatRoughnessMap,oe.clearcoatRoughnessMapTransform)),ne.clearcoatNormalMap&&(oe.clearcoatNormalMap.value=ne.clearcoatNormalMap,s(ne.clearcoatNormalMap,oe.clearcoatNormalMapTransform),oe.clearcoatNormalScale.value.copy(ne.clearcoatNormalScale),ne.side===T&&oe.clearcoatNormalScale.value.negate())),ne.dispersion>0&&(oe.dispersion.value=ne.dispersion),ne.iridescence>0&&(oe.iridescence.value=ne.iridescence,oe.iridescenceIOR.value=ne.iridescenceIOR,oe.iridescenceThicknessMinimum.value=ne.iridescenceThicknessRange[0],oe.iridescenceThicknessMaximum.value=ne.iridescenceThicknessRange[1],ne.iridescenceMap&&(oe.iridescenceMap.value=ne.iridescenceMap,s(ne.iridescenceMap,oe.iridescenceMapTransform)),ne.iridescenceThicknessMap&&(oe.iridescenceThicknessMap.value=ne.iridescenceThicknessMap,s(ne.iridescenceThicknessMap,oe.iridescenceThicknessMapTransform))),ne.transmission>0&&(oe.transmission.value=ne.transmission,oe.transmissionSamplerMap.value=Ie.texture,oe.transmissionSamplerSize.value.set(Ie.width,Ie.height),ne.transmissionMap&&(oe.transmissionMap.value=ne.transmissionMap,s(ne.transmissionMap,oe.transmissionMapTransform)),oe.thickness.value=ne.thickness,ne.thicknessMap&&(oe.thicknessMap.value=ne.thicknessMap,s(ne.thicknessMap,oe.thicknessMapTransform)),oe.attenuationDistance.value=ne.attenuationDistance,oe.attenuationColor.value.copy(ne.attenuationColor)),ne.anisotropy>0&&(oe.anisotropyVector.value.set(ne.anisotropy*Math.cos(ne.anisotropyRotation),ne.anisotropy*Math.sin(ne.anisotropyRotation)),ne.anisotropyMap&&(oe.anisotropyMap.value=ne.anisotropyMap,s(ne.anisotropyMap,oe.anisotropyMapTransform))),oe.specularIntensity.value=ne.specularIntensity,oe.specularColor.value.copy(ne.specularColor),ne.specularColorMap&&(oe.specularColorMap.value=ne.specularColorMap,s(ne.specularColorMap,oe.specularColorMapTransform)),ne.specularIntensityMap&&(oe.specularIntensityMap.value=ne.specularIntensityMap,s(ne.specularIntensityMap,oe.specularIntensityMapTransform))}function ae(oe,ne){ne.matcap&&(oe.matcap.value=ne.matcap)}function he(oe,ne){const Ie=n.get(ne).light;oe.referencePosition.value.setFromMatrixPosition(Ie.matrixWorld),oe.nearDistance.value=Ie.shadow.camera.near,oe.farDistance.value=Ie.shadow.camera.far}return{refreshFogUniforms:l,refreshMaterialUniforms:f}}function ok(M,n,s,l){let f={},b={},I=[];const R=M.getParameter(M.MAX_UNIFORM_BUFFER_BINDINGS);function U(Ie,Ce){const Me=Ce.program;l.uniformBlockBinding(Ie,Me)}function V(Ie,Ce){let Me=f[Ie.id];Me===void 0&&(ae(Ie),Me=$(Ie),f[Ie.id]=Me,Ie.addEventListener("dispose",oe));const Je=Ce.program;l.updateUBOMapping(Ie,Je);const Qe=n.render.frame;b[Ie.id]!==Qe&&(ee(Ie),b[Ie.id]=Qe)}function $(Ie){const Ce=Z();Ie.__bindingPointIndex=Ce;const Me=M.createBuffer(),Je=Ie.__size,Qe=Ie.usage;return M.bindBuffer(M.UNIFORM_BUFFER,Me),M.bufferData(M.UNIFORM_BUFFER,Je,Qe),M.bindBuffer(M.UNIFORM_BUFFER,null),M.bindBufferBase(M.UNIFORM_BUFFER,Ce,Me),Me}function Z(){for(let Ie=0;Ie<R;Ie++)if(I.indexOf(Ie)===-1)return I.push(Ie),Ie;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function ee(Ie){const Ce=f[Ie.id],Me=Ie.uniforms,Je=Ie.__cache;M.bindBuffer(M.UNIFORM_BUFFER,Ce);for(let Qe=0,je=Me.length;Qe<je;Qe++){const Ye=Array.isArray(Me[Qe])?Me[Qe]:[Me[Qe]];for(let Pe=0,Re=Ye.length;Pe<Re;Pe++){const qe=Ye[Pe];if(te(qe,Qe,Pe,Je)===!0){const At=qe.__offset,lt=Array.isArray(qe.value)?qe.value:[qe.value];let bt=0;for(let kt=0;kt<lt.length;kt++){const tn=lt[kt],In=he(tn);typeof tn=="number"||typeof tn=="boolean"?(qe.__data[0]=tn,M.bufferSubData(M.UNIFORM_BUFFER,At+bt,qe.__data)):tn.isMatrix3?(qe.__data[0]=tn.elements[0],qe.__data[1]=tn.elements[1],qe.__data[2]=tn.elements[2],qe.__data[3]=0,qe.__data[4]=tn.elements[3],qe.__data[5]=tn.elements[4],qe.__data[6]=tn.elements[5],qe.__data[7]=0,qe.__data[8]=tn.elements[6],qe.__data[9]=tn.elements[7],qe.__data[10]=tn.elements[8],qe.__data[11]=0):(tn.toArray(qe.__data,bt),bt+=In.storage/Float32Array.BYTES_PER_ELEMENT)}M.bufferSubData(M.UNIFORM_BUFFER,At,qe.__data)}}}M.bindBuffer(M.UNIFORM_BUFFER,null)}function te(Ie,Ce,Me,Je){const Qe=Ie.value,je=Ce+"_"+Me;if(Je[je]===void 0)return typeof Qe=="number"||typeof Qe=="boolean"?Je[je]=Qe:Je[je]=Qe.clone(),!0;{const Ye=Je[je];if(typeof Qe=="number"||typeof Qe=="boolean"){if(Ye!==Qe)return Je[je]=Qe,!0}else if(Ye.equals(Qe)===!1)return Ye.copy(Qe),!0}return!1}function ae(Ie){const Ce=Ie.uniforms;let Me=0;const Je=16;for(let je=0,Ye=Ce.length;je<Ye;je++){const Pe=Array.isArray(Ce[je])?Ce[je]:[Ce[je]];for(let Re=0,qe=Pe.length;Re<qe;Re++){const At=Pe[Re],lt=Array.isArray(At.value)?At.value:[At.value];for(let bt=0,kt=lt.length;bt<kt;bt++){const tn=lt[bt],In=he(tn),Gt=Me%Je;Gt!==0&&Je-Gt<In.boundary&&(Me+=Je-Gt),At.__data=new Float32Array(In.storage/Float32Array.BYTES_PER_ELEMENT),At.__offset=Me,Me+=In.storage}}}const Qe=Me%Je;return Qe>0&&(Me+=Je-Qe),Ie.__size=Me,Ie.__cache={},this}function he(Ie){const Ce={boundary:0,storage:0};return typeof Ie=="number"||typeof Ie=="boolean"?(Ce.boundary=4,Ce.storage=4):Ie.isVector2?(Ce.boundary=8,Ce.storage=8):Ie.isVector3||Ie.isColor?(Ce.boundary=16,Ce.storage=12):Ie.isVector4?(Ce.boundary=16,Ce.storage=16):Ie.isMatrix3?(Ce.boundary=48,Ce.storage=48):Ie.isMatrix4?(Ce.boundary=64,Ce.storage=64):Ie.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Ie),Ce}function oe(Ie){const Ce=Ie.target;Ce.removeEventListener("dispose",oe);const Me=I.indexOf(Ce.__bindingPointIndex);I.splice(Me,1),M.deleteBuffer(f[Ce.id]),delete f[Ce.id],delete b[Ce.id]}function ne(){for(const Ie in f)M.deleteBuffer(f[Ie]);I=[],f={},b={}}return{bind:U,update:V,dispose:ne}}class lk{constructor(n={}){const{canvas:s=um(),context:l=null,depth:f=!0,stencil:b=!1,alpha:I=!1,antialias:R=!1,premultipliedAlpha:U=!0,preserveDrawingBuffer:V=!1,powerPreference:$="default",failIfMajorPerformanceCaveat:Z=!1,multiviewStereo:ee=!1}=n;this.isWebGLRenderer=!0;let te;if(l!==null){if(typeof WebGLRenderingContext<"u"&&l instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");te=l.getContextAttributes().alpha}else te=I;const ae=new Uint32Array(4),he=new Int32Array(4);let oe=null,ne=null;const Ie=[],Ce=[];this.domElement=s,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=gr,this._useLegacyLights=!1,this.toneMapping=_t,this.toneMappingExposure=1;const Me=this;let Je=!1,Qe=0,je=0,Ye=null,Pe=-1,Re=null;const qe=new yr,At=new yr;let lt=null;const bt=new Kn(0);let kt=0,tn=s.width,In=s.height,Gt=1,bn=null,wn=null;const ti=new yr(0,0,tn,In),er=new yr(0,0,tn,In);let Dr=!1;const is=new Rd;let Er=!1,$r=!1;const si=new ii,ln=new Ve,Rn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Nn(){return Ye===null?Gt:1}let Mt=l;function cn(Ge,Ct){return s.getContext(Ge,Ct)}try{const Ge={alpha:!0,depth:f,stencil:b,antialias:R,premultipliedAlpha:U,preserveDrawingBuffer:V,powerPreference:$,failIfMajorPerformanceCaveat:Z};if("setAttribute"in s&&s.setAttribute("data-engine",`three.js r${d}`),s.addEventListener("webglcontextlost",xn,!1),s.addEventListener("webglcontextrestored",li,!1),s.addEventListener("webglcontextcreationerror",Wn,!1),Mt===null){const Ct="webgl2";if(Mt=cn(Ct,Ge),Mt===null)throw cn(Ct)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ge){throw console.error("THREE.WebGLRenderer: "+Ge.message),Ge}let Xt,vn,An,pn,kn,Xn,Ii,Ni,wr,ps,rs,Xe,Oe,zt,an,fn,un,oi,Tn,Yn,Nr,qn,ci,Xi,bi;function st(){Xt=new vN(Mt),Xt.init(),ci=new eM(Mt,Xt),vn=new dN(Mt,Xt,n,ci),An=new qF(Mt),pn=new MN(Mt),kn=new UF,Xn=new JF(Mt,Xt,An,kn,vn,ci,pn),Ii=new mN(Me),Ni=new AN(Me),wr=new lL(Mt),Xi=new uN(Mt,wr),ps=new yN(Mt,wr,pn,Xi),rs=new EN(Mt,ps,wr,pn),Yn=new _N(Mt,vn,Xn),fn=new fN(kn),Xe=new kF(Me,Ii,Ni,Xt,vn,Xi,fn),Oe=new ak(Me,kn),zt=new VF,an=new $F(Xt),Tn=new cN(Me,Ii,Ni,An,rs,te,U),oi=new CN(Me,Xt,Mt),un=new YF(Me,rs,vn),bi=new ok(Mt,pn,vn,An),Nr=new hN(Mt,Xt,pn),qn=new bN(Mt,Xt,pn),pn.programs=Xe.programs,Me.capabilities=vn,Me.extensions=Xt,Me.properties=kn,Me.renderLists=zt,Me.shadowMap=un,Me.state=An,Me.info=pn}st();const gn=typeof navigator<"u"&&"xr"in navigator?new rk(Me,Mt,Xt,ee):new iM(Me);this.xr=gn,this.getContext=function(){return Mt},this.getContextAttributes=function(){return Mt.getContextAttributes()},this.forceContextLoss=function(){const Ge=Xt.get("WEBGL_lose_context");Ge&&Ge.loseContext()},this.forceContextRestore=function(){const Ge=Xt.get("WEBGL_lose_context");Ge&&Ge.restoreContext()},this.getPixelRatio=function(){return Gt},this.setPixelRatio=function(Ge){Ge!==void 0&&(Gt=Ge,this.setSize(tn,In,!1))},this.getSize=function(Ge){return Ge.set(tn,In)},this.setSize=function(Ge,Ct,Ut=!0){if(gn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}tn=Ge,In=Ct,s.width=Math.floor(Ge*Gt),s.height=Math.floor(Ct*Gt),Ut===!0&&(s.style.width=Ge+"px",s.style.height=Ct+"px"),this.setViewport(0,0,Ge,Ct)},this.getDrawingBufferSize=function(Ge){return Ge.set(tn*Gt,In*Gt).floor()},this.setDrawingBufferSize=function(Ge,Ct,Ut){tn=Ge,In=Ct,Gt=Ut,s.width=Math.floor(Ge*Ut),s.height=Math.floor(Ct*Ut),this.setViewport(0,0,Ge,Ct)},this.getCurrentViewport=function(Ge){return Ge.copy(qe)},this.getViewport=function(Ge){return Ge.copy(ti)},this.setViewport=function(Ge,Ct,Ut,Pt){Ge.isVector4?ti.set(Ge.x,Ge.y,Ge.z,Ge.w):ti.set(Ge,Ct,Ut,Pt),An.viewport(qe.copy(ti).multiplyScalar(Gt).round())},this.getScissor=function(Ge){return Ge.copy(er)},this.setScissor=function(Ge,Ct,Ut,Pt){Ge.isVector4?er.set(Ge.x,Ge.y,Ge.z,Ge.w):er.set(Ge,Ct,Ut,Pt),An.scissor(At.copy(er).multiplyScalar(Gt).round())},this.getScissorTest=function(){return Dr},this.setScissorTest=function(Ge){An.setScissorTest(Dr=Ge)},this.setOpaqueSort=function(Ge){bn=Ge},this.setTransparentSort=function(Ge){wn=Ge},this.getClearColor=function(Ge){return Ge.copy(Tn.getClearColor())},this.setClearColor=function(){Tn.setClearColor.apply(Tn,arguments)},this.getClearAlpha=function(){return Tn.getClearAlpha()},this.setClearAlpha=function(){Tn.setClearAlpha.apply(Tn,arguments)},this.clear=function(Ge=!0,Ct=!0,Ut=!0){let Pt=0;if(Ge){let Ft=!1;if(Ye!==null){const Hn=Ye.texture.format;Ft=Hn===ni||Hn===$t||Hn===Ln}if(Ft){const Hn=Ye.texture.type,ui=Hn===Hr||Hn===ys||Hn===ks||Hn===ca||Hn===us||Hn===to,di=Tn.getClearColor(),wi=Tn.getClearAlpha(),Qi=di.r,tr=di.g,ar=di.b;ui?(ae[0]=Qi,ae[1]=tr,ae[2]=ar,ae[3]=wi,Mt.clearBufferuiv(Mt.COLOR,0,ae)):(he[0]=Qi,he[1]=tr,he[2]=ar,he[3]=wi,Mt.clearBufferiv(Mt.COLOR,0,he))}else Pt|=Mt.COLOR_BUFFER_BIT}Ct&&(Pt|=Mt.DEPTH_BUFFER_BIT),Ut&&(Pt|=Mt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Mt.clear(Pt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){s.removeEventListener("webglcontextlost",xn,!1),s.removeEventListener("webglcontextrestored",li,!1),s.removeEventListener("webglcontextcreationerror",Wn,!1),zt.dispose(),an.dispose(),kn.dispose(),Ii.dispose(),Ni.dispose(),rs.dispose(),Xi.dispose(),bi.dispose(),Xe.dispose(),gn.dispose(),gn.removeEventListener("sessionstart",fl),gn.removeEventListener("sessionend",W6),Wu.stop()};function xn(Ge){Ge.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Je=!0}function li(){console.log("THREE.WebGLRenderer: Context Restored."),Je=!1;const Ge=pn.autoReset,Ct=un.enabled,Ut=un.autoUpdate,Pt=un.needsUpdate,Ft=un.type;st(),pn.autoReset=Ge,un.enabled=Ct,un.autoUpdate=Ut,un.needsUpdate=Pt,un.type=Ft}function Wn(Ge){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ge.statusMessage)}function Ki(Ge){const Ct=Ge.target;Ct.removeEventListener("dispose",Ki),jn(Ct)}function jn(Ge){Un(Ge),kn.remove(Ge)}function Un(Ge){const Ct=kn.get(Ge).programs;Ct!==void 0&&(Ct.forEach(function(Ut){Xe.releaseProgram(Ut)}),Ge.isShaderMaterial&&Xe.releaseShaderCache(Ge))}this.renderBufferDirect=function(Ge,Ct,Ut,Pt,Ft,Hn){Ct===null&&(Ct=Rn);const ui=Ft.isMesh&&Ft.matrixWorld.determinant()<0,di=nG(Ge,Ct,Ut,Pt,Ft);An.setMaterial(Pt,ui);let wi=Ut.index,Qi=1;if(Pt.wireframe===!0){if(wi=ps.getWireframeAttribute(Ut),wi===void 0)return;Qi=2}const tr=Ut.drawRange,ar=Ut.attributes.position;let Ls=tr.start*Qi,ba=(tr.start+tr.count)*Qi;Hn!==null&&(Ls=Math.max(Ls,Hn.start*Qi),ba=Math.min(ba,(Hn.start+Hn.count)*Qi)),wi!==null?(Ls=Math.max(Ls,0),ba=Math.min(ba,wi.count)):ar!=null&&(Ls=Math.max(Ls,0),ba=Math.min(ba,ar.count));const co=ba-Ls;if(co<0||co===1/0)return;Xi.setup(Ft,Pt,di,Ut,wi);let Uc,Lr=Nr;if(wi!==null&&(Uc=wr.get(wi),Lr=qn,Lr.setIndex(Uc)),Ft.isMesh)Pt.wireframe===!0?(An.setLineWidth(Pt.wireframeLinewidth*Nn()),Lr.setMode(Mt.LINES)):Lr.setMode(Mt.TRIANGLES);else if(Ft.isLine){let ql=Pt.linewidth;ql===void 0&&(ql=1),An.setLineWidth(ql*Nn()),Ft.isLineSegments?Lr.setMode(Mt.LINES):Ft.isLineLoop?Lr.setMode(Mt.LINE_LOOP):Lr.setMode(Mt.LINE_STRIP)}else Ft.isPoints?Lr.setMode(Mt.POINTS):Ft.isSprite&&Lr.setMode(Mt.TRIANGLES);if(Ft.isBatchedMesh)Ft._multiDrawInstances!==null?Lr.renderMultiDrawInstances(Ft._multiDrawStarts,Ft._multiDrawCounts,Ft._multiDrawCount,Ft._multiDrawInstances):Lr.renderMultiDraw(Ft._multiDrawStarts,Ft._multiDrawCounts,Ft._multiDrawCount);else if(Ft.isInstancedMesh)Lr.renderInstances(Ls,co,Ft.count);else if(Ut.isInstancedBufferGeometry){const ql=Ut._maxInstanceCount!==void 0?Ut._maxInstanceCount:1/0,rr=Math.min(Ut.instanceCount,ql);Lr.renderInstances(Ls,co,rr)}else Lr.render(Ls,co)};function ir(Ge,Ct,Ut){Ge.transparent===!0&&Ge.side===O&&Ge.forceSinglePass===!1?(Ge.side=T,Ge.needsUpdate=!0,Op(Ge,Ct,Ut),Ge.side=w,Ge.needsUpdate=!0,Op(Ge,Ct,Ut),Ge.side=O):Op(Ge,Ct,Ut)}this.compile=function(Ge,Ct,Ut=null){Ut===null&&(Ut=Ge),ne=an.get(Ut),ne.init(Ct),Ce.push(ne),Ut.traverseVisible(function(Ft){Ft.isLight&&Ft.layers.test(Ct.layers)&&(ne.pushLight(Ft),Ft.castShadow&&ne.pushShadow(Ft))}),Ge!==Ut&&Ge.traverseVisible(function(Ft){Ft.isLight&&Ft.layers.test(Ct.layers)&&(ne.pushLight(Ft),Ft.castShadow&&ne.pushShadow(Ft))}),ne.setupLights(Me._useLegacyLights);const Pt=new Set;return Ge.traverse(function(Ft){const Hn=Ft.material;if(Hn)if(Array.isArray(Hn))for(let ui=0;ui<Hn.length;ui++){const di=Hn[ui];ir(di,Ut,Ft),Pt.add(di)}else ir(Hn,Ut,Ft),Pt.add(Hn)}),Ce.pop(),ne=null,Pt},this.compileAsync=function(Ge,Ct,Ut=null){const Pt=this.compile(Ge,Ct,Ut);return new Promise(Ft=>{function Hn(){if(Pt.forEach(function(ui){kn.get(ui).currentProgram.isReady()&&Pt.delete(ui)}),Pt.size===0){Ft(Ge);return}setTimeout(Hn,10)}Xt.get("KHR_parallel_shader_compile")!==null?Hn():setTimeout(Hn,10)})};let Ci=null;function zs(Ge){Ci&&Ci(Ge)}function fl(){Wu.stop()}function W6(){Wu.start()}const Wu=new _2;Wu.setAnimationLoop(zs),typeof self<"u"&&Wu.setContext(self),this.setAnimationLoop=function(Ge){Ci=Ge,gn.setAnimationLoop(Ge),Ge===null?Wu.stop():Wu.start()},gn.addEventListener("sessionstart",fl),gn.addEventListener("sessionend",W6),this.render=function(Ge,Ct){if(Ct!==void 0&&Ct.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Je===!0)return;Ge.matrixWorldAutoUpdate===!0&&Ge.updateMatrixWorld(),Ct.parent===null&&Ct.matrixWorldAutoUpdate===!0&&Ct.updateMatrixWorld(),gn.enabled===!0&&gn.isPresenting===!0&&(gn.cameraAutoUpdate===!0&&gn.updateCamera(Ct),Ct=gn.getCamera()),Ge.isScene===!0&&Ge.onBeforeRender(Me,Ge,Ct,Ye),ne=an.get(Ge,Ce.length),ne.init(Ct),Ce.push(ne),si.multiplyMatrices(Ct.projectionMatrix,Ct.matrixWorldInverse),is.setFromProjectionMatrix(si),$r=this.localClippingEnabled,Er=fn.init(this.clippingPlanes,$r),oe=zt.get(Ge,Ie.length),oe.init(),Ie.push(oe),j6(Ge,Ct,0,Me.sortObjects),oe.finish(),Me.sortObjects===!0&&oe.sort(bn,wn);const Ut=gn.enabled===!1||gn.isPresenting===!1||gn.hasDepthSensing()===!1;Ut&&Tn.addToRenderList(oe,Ge),this.info.render.frame++,Er===!0&&fn.beginShadows();const Pt=ne.state.shadowsArray;un.render(Pt,Ge,Ct),Er===!0&&fn.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ft=oe.opaque,Hn=oe.transmissive;if(ne.setupLights(Me._useLegacyLights),Ct.isArrayCamera){const ui=Ct.cameras;if(Hn.length>0)for(let di=0,wi=ui.length;di<wi;di++){const Qi=ui[di];$6(Ft,Hn,Ge,Qi)}if(Ut&&Tn.render(Ge),gn.enabled&&gn.isMultiview)Xn.setDeferTextureUploads(!0),_3(oe,Ge,Ct,Ct.cameras[0].viewport);else for(let di=0,wi=ui.length;di<wi;di++){const Qi=ui[di];_3(oe,Ge,Qi,Qi.viewport)}}else Hn.length>0&&$6(Ft,Hn,Ge,Ct),Ut&&Tn.render(Ge),_3(oe,Ge,Ct);Ye!==null&&(Xn.updateMultisampleRenderTarget(Ye),Xn.updateRenderTargetMipmap(Ye)),Ge.isScene===!0&&Ge.onAfterRender(Me,Ge,Ct),Xn.runDeferredUploads(),gn.enabled&&gn.submitFrame&&gn.submitFrame(),Xi.resetDefaultState(),Pe=-1,Re=null,Ce.pop(),Ce.length>0?(ne=Ce[Ce.length-1],Er===!0&&fn.setGlobalState(Me.clippingPlanes,ne.state.camera)):ne=null,Ie.pop(),Ie.length>0?oe=Ie[Ie.length-1]:oe=null};function j6(Ge,Ct,Ut,Pt){if(Ge.visible===!1)return;if(Ge.layers.test(Ct.layers)){if(Ge.isGroup)Ut=Ge.renderOrder;else if(Ge.isLOD)Ge.autoUpdate===!0&&Ge.update(Ct);else if(Ge.isLight)ne.pushLight(Ge),Ge.castShadow&&ne.pushShadow(Ge);else if(Ge.isSprite){if(!Ge.frustumCulled||is.intersectsSprite(Ge)){Pt&&ln.setFromMatrixPosition(Ge.matrixWorld).applyMatrix4(si);const ui=rs.update(Ge),di=Ge.material;di.visible&&oe.push(Ge,ui,di,Ut,ln.z,null)}}else if((Ge.isMesh||Ge.isLine||Ge.isPoints)&&(!Ge.frustumCulled||is.intersectsObject(Ge))){const ui=rs.update(Ge),di=Ge.material;if(Pt&&(Ge.boundingSphere!==void 0?(Ge.boundingSphere===null&&Ge.computeBoundingSphere(),ln.copy(Ge.boundingSphere.center)):(ui.boundingSphere===null&&ui.computeBoundingSphere(),ln.copy(ui.boundingSphere.center)),ln.applyMatrix4(Ge.matrixWorld).applyMatrix4(si)),Array.isArray(di)){const wi=ui.groups;for(let Qi=0,tr=wi.length;Qi<tr;Qi++){const ar=wi[Qi],Ls=di[ar.materialIndex];Ls&&Ls.visible&&oe.push(Ge,ui,Ls,Ut,ln.z,ar)}}else di.visible&&oe.push(Ge,ui,di,Ut,ln.z,null)}}const Hn=Ge.children;for(let ui=0,di=Hn.length;ui<di;ui++)j6(Hn[ui],Ct,Ut,Pt)}function _3(Ge,Ct,Ut,Pt){const Ft=Ge.opaque,Hn=Ge.transmissive,ui=Ge.transparent;ne.setupLightsView(Ut),Er===!0&&fn.setGlobalState(Me.clippingPlanes,Ut),Pt&&An.viewport(qe.copy(Pt)),Ft.length>0&&Rp(Ft,Ct,Ut),Hn.length>0&&Rp(Hn,Ct,Ut),ui.length>0&&Rp(ui,Ct,Ut),An.buffers.depth.setTest(!0),An.buffers.depth.setMask(!0),An.buffers.color.setMask(!0),An.setPolygonOffset(!1)}function $6(Ge,Ct,Ut,Pt){if((Ut.isScene===!0?Ut.overrideMaterial:null)!==null)return;ne.state.transmissionRenderTarget[Pt.id]===void 0&&(ne.state.transmissionRenderTarget[Pt.id]=new Ga(1,1,{generateMipmaps:!0,type:Xt.has("EXT_color_buffer_half_float")||Xt.has("EXT_color_buffer_float")?pr:Hr,minFilter:qi,samples:4,stencilBuffer:b,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const Hn=ne.state.transmissionRenderTarget[Pt.id],ui=Pt.viewport||qe;Hn.setSize(ui.z,ui.w);const di=Me.getRenderTarget();Me.setRenderTarget(Hn),Me.getClearColor(bt),kt=Me.getClearAlpha(),kt<1&&Me.setClearColor(16777215,.5),Me.clear();const wi=Me.toneMapping;Me.toneMapping=_t;const Qi=Pt.viewport;if(Pt.viewport!==void 0&&(Pt.viewport=void 0),ne.setupLightsView(Pt),Er===!0&&fn.setGlobalState(Me.clippingPlanes,Pt),Rp(Ge,Ut,Pt),Xn.updateMultisampleRenderTarget(Hn),Xn.updateRenderTargetMipmap(Hn),Xt.has("WEBGL_multisampled_render_to_texture")===!1){let tr=!1;for(let ar=0,Ls=Ct.length;ar<Ls;ar++){const ba=Ct[ar],co=ba.object,Uc=ba.geometry,Lr=ba.material,ql=ba.group;if(Lr.side===O&&co.layers.test(Pt.layers)){const rr=Lr.side;Lr.side=T,Lr.needsUpdate=!0,X6(co,Ut,Pt,Uc,Lr,ql),Lr.side=rr,Lr.needsUpdate=!0,tr=!0}}tr===!0&&(Xn.updateMultisampleRenderTarget(Hn),Xn.updateRenderTargetMipmap(Hn))}Me.setRenderTarget(di),Me.setClearColor(bt,kt),Qi!==void 0&&(Pt.viewport=Qi),Me.toneMapping=wi}function Rp(Ge,Ct,Ut){const Pt=Ct.isScene===!0?Ct.overrideMaterial:null;for(let Ft=0,Hn=Ge.length;Ft<Hn;Ft++){const ui=Ge[Ft],di=ui.object,wi=ui.geometry,Qi=Pt===null?ui.material:Pt,tr=ui.group;di.layers.test(Ut.layers)&&X6(di,Ct,Ut,wi,Qi,tr)}}function X6(Ge,Ct,Ut,Pt,Ft,Hn){Ge.onBeforeRender(Me,Ct,Ut,Pt,Ft,Hn),Ge.modelViewMatrix.multiplyMatrices(Ut.matrixWorldInverse,Ge.matrixWorld),Ge.normalMatrix.getNormalMatrix(Ge.modelViewMatrix),Ft.onBeforeRender(Me,Ct,Ut,Pt,Ge,Hn),Ft.transparent===!0&&Ft.side===O&&Ft.forceSinglePass===!1?(Ft.side=T,Ft.needsUpdate=!0,Me.renderBufferDirect(Ut,Ct,Pt,Ft,Ge,Hn),Ft.side=w,Ft.needsUpdate=!0,Me.renderBufferDirect(Ut,Ct,Pt,Ft,Ge,Hn),Ft.side=O):Me.renderBufferDirect(Ut,Ct,Pt,Ft,Ge,Hn),Ge.onAfterRender(Me,Ct,Ut,Pt,Ft,Hn)}function Op(Ge,Ct,Ut){Ct.isScene!==!0&&(Ct=Rn);const Pt=kn.get(Ge),Ft=ne.state.lights,Hn=ne.state.shadowsArray,ui=Ft.state.version,di=Xe.getParameters(Ge,Ft.state,Hn,Ct,Ut),wi=Xe.getProgramCacheKey(di);let Qi=Pt.programs;Pt.environment=Ge.isMeshStandardMaterial?Ct.environment:null,Pt.fog=Ct.fog,Pt.envMap=(Ge.isMeshStandardMaterial?Ni:Ii).get(Ge.envMap||Pt.environment),Pt.envMapRotation=Pt.environment!==null&&Ge.envMap===null?Ct.environmentRotation:Ge.envMapRotation,Qi===void 0&&(Ge.addEventListener("dispose",Ki),Qi=new Map,Pt.programs=Qi);let tr=Qi.get(wi);if(tr!==void 0){if(Pt.currentProgram===tr&&Pt.lightsStateVersion===ui)return Y6(Ge,di),tr}else di.uniforms=Xe.getUniforms(Ge),Ge.onBuild(Ut,di,Me),Ge.onBeforeCompile(di,Me),tr=Xe.acquireProgram(di,wi),Qi.set(wi,tr),Pt.uniforms=di.uniforms;const ar=Pt.uniforms;return(!Ge.isShaderMaterial&&!Ge.isRawShaderMaterial||Ge.clipping===!0)&&(ar.clippingPlanes=fn.uniform),Y6(Ge,di),Pt.needsLights=rG(Ge),Pt.lightsStateVersion=ui,Pt.needsLights&&(ar.ambientLightColor.value=Ft.state.ambient,ar.lightProbe.value=Ft.state.probe,ar.directionalLights.value=Ft.state.directional,ar.directionalLightShadows.value=Ft.state.directionalShadow,ar.spotLights.value=Ft.state.spot,ar.spotLightShadows.value=Ft.state.spotShadow,ar.rectAreaLights.value=Ft.state.rectArea,ar.ltc_1.value=Ft.state.rectAreaLTC1,ar.ltc_2.value=Ft.state.rectAreaLTC2,ar.pointLights.value=Ft.state.point,ar.pointLightShadows.value=Ft.state.pointShadow,ar.hemisphereLights.value=Ft.state.hemi,ar.directionalShadowMap.value=Ft.state.directionalShadowMap,ar.directionalShadowMatrix.value=Ft.state.directionalShadowMatrix,ar.spotShadowMap.value=Ft.state.spotShadowMap,ar.spotLightMatrix.value=Ft.state.spotLightMatrix,ar.spotLightMap.value=Ft.state.spotLightMap,ar.pointShadowMap.value=Ft.state.pointShadowMap,ar.pointShadowMatrix.value=Ft.state.pointShadowMatrix),Pt.currentProgram=tr,Pt.uniformsList=null,tr}function K6(Ge){if(Ge.uniformsList===null){const Ct=Ge.currentProgram.getUniforms();Ge.uniformsList=Nm.seqWithValue(Ct.seq,Ge.uniforms)}return Ge.uniformsList}function Y6(Ge,Ct){const Ut=kn.get(Ge);Ut.outputColorSpace=Ct.outputColorSpace,Ut.batching=Ct.batching,Ut.instancing=Ct.instancing,Ut.instancingColor=Ct.instancingColor,Ut.instancingMorph=Ct.instancingMorph,Ut.skinning=Ct.skinning,Ut.morphTargets=Ct.morphTargets,Ut.morphNormals=Ct.morphNormals,Ut.morphColors=Ct.morphColors,Ut.morphTargetsCount=Ct.morphTargetsCount,Ut.numClippingPlanes=Ct.numClippingPlanes,Ut.numIntersection=Ct.numClipIntersection,Ut.vertexAlphas=Ct.vertexAlphas,Ut.vertexTangents=Ct.vertexTangents,Ut.toneMapping=Ct.toneMapping,Ut.numMultiviewViews=Ct.numMultiviewViews}function nG(Ge,Ct,Ut,Pt,Ft){Ct.isScene!==!0&&(Ct=Rn),Xn.resetTextureUnits();const Hn=Ct.fog,ui=Pt.isMeshStandardMaterial?Ct.environment:null,di=Ye===null?Me.outputColorSpace:Ye.isXRRenderTarget===!0?Ye.texture.colorSpace:Uo,wi=(Pt.isMeshStandardMaterial?Ni:Ii).get(Pt.envMap||ui),Qi=Pt.vertexColors===!0&&!!Ut.attributes.color&&Ut.attributes.color.itemSize===4,tr=!!Ut.attributes.tangent&&(!!Pt.normalMap||Pt.anisotropy>0),ar=!!Ut.morphAttributes.position,Ls=!!Ut.morphAttributes.normal,ba=!!Ut.morphAttributes.color;let co=_t;Pt.toneMapped&&(Ye===null||Ye.isXRRenderTarget===!0)&&(co=Me.toneMapping);const Uc=Ye&&Ye.isWebGLMultiviewRenderTarget?Ye.numViews:0,Lr=Ut.morphAttributes.position||Ut.morphAttributes.normal||Ut.morphAttributes.color,ql=Lr!==void 0?Lr.length:0,rr=kn.get(Pt),sG=ne.state.lights;if(Er===!0&&($r===!0||Ge!==Re)){const Co=Ge===Re&&Pt.id===Pe;fn.setState(Pt,Ge,Co)}let cs=!1;Pt.version===rr.__version?(rr.needsLights&&rr.lightsStateVersion!==sG.state.version||rr.outputColorSpace!==di||Ft.isBatchedMesh&&rr.batching===!1||!Ft.isBatchedMesh&&rr.batching===!0||Ft.isInstancedMesh&&rr.instancing===!1||!Ft.isInstancedMesh&&rr.instancing===!0||Ft.isSkinnedMesh&&rr.skinning===!1||!Ft.isSkinnedMesh&&rr.skinning===!0||Ft.isInstancedMesh&&rr.instancingColor===!0&&Ft.instanceColor===null||Ft.isInstancedMesh&&rr.instancingColor===!1&&Ft.instanceColor!==null||Ft.isInstancedMesh&&rr.instancingMorph===!0&&Ft.morphTexture===null||Ft.isInstancedMesh&&rr.instancingMorph===!1&&Ft.morphTexture!==null||rr.envMap!==wi||Pt.fog===!0&&rr.fog!==Hn||rr.numClippingPlanes!==void 0&&(rr.numClippingPlanes!==fn.numPlanes||rr.numIntersection!==fn.numIntersection)||rr.vertexAlphas!==Qi||rr.vertexTangents!==tr||rr.morphTargets!==ar||rr.morphNormals!==Ls||rr.morphColors!==ba||rr.toneMapping!==co||rr.morphTargetsCount!==ql||rr.numMultiviewViews!==Uc)&&(cs=!0):(cs=!0,rr.__version=Pt.version);let Jl=rr.currentProgram;cs===!0&&(Jl=Op(Pt,Ct,Ft));let q6=!1,tf=!1,C3=!1;const Ws=Jl.getUniforms(),Gc=rr.uniforms;if(An.useProgram(Jl.program)&&(q6=!0,tf=!0,C3=!0),Pt.id!==Pe&&(Pe=Pt.id,tf=!0),q6||Re!==Ge){Jl.numMultiviewViews>0?(oi.updateCameraProjectionMatricesUniform(Ge,Ws),oi.updateCameraViewMatricesUniform(Ge,Ws)):(Ws.setValue(Mt,"projectionMatrix",Ge.projectionMatrix),Ws.setValue(Mt,"viewMatrix",Ge.matrixWorldInverse));const Co=Ws.map.cameraPosition;Co!==void 0&&Co.setValue(Mt,ln.setFromMatrixPosition(Ge.matrixWorld)),vn.logarithmicDepthBuffer&&Ws.setValue(Mt,"logDepthBufFC",2/(Math.log(Ge.far+1)/Math.LN2)),(Pt.isMeshPhongMaterial||Pt.isMeshToonMaterial||Pt.isMeshLambertMaterial||Pt.isMeshBasicMaterial||Pt.isMeshStandardMaterial||Pt.isShaderMaterial)&&Ws.setValue(Mt,"isOrthographic",Ge.isOrthographicCamera===!0),Re!==Ge&&(Re=Ge,tf=!0,C3=!0)}if(Ft.isSkinnedMesh){Ws.setOptional(Mt,Ft,"bindMatrix"),Ws.setOptional(Mt,Ft,"bindMatrixInverse");const Co=Ft.skeleton;Co&&(Co.boneTexture===null&&Co.computeBoneTexture(),Ws.setValue(Mt,"boneTexture",Co.boneTexture,Xn))}Ft.isBatchedMesh&&(Ws.setOptional(Mt,Ft,"batchingTexture"),Ws.setValue(Mt,"batchingTexture",Ft._matricesTexture,Xn));const E3=Ut.morphAttributes;if((E3.position!==void 0||E3.normal!==void 0||E3.color!==void 0)&&Yn.update(Ft,Ut,Jl),(tf||rr.receiveShadow!==Ft.receiveShadow)&&(rr.receiveShadow=Ft.receiveShadow,Ws.setValue(Mt,"receiveShadow",Ft.receiveShadow)),Pt.isMeshGouraudMaterial&&Pt.envMap!==null&&(Gc.envMap.value=wi,Gc.flipEnvMap.value=wi.isCubeTexture&&wi.isRenderTargetTexture===!1?-1:1),Pt.isMeshStandardMaterial&&Pt.envMap===null&&Ct.environment!==null&&(Gc.envMapIntensity.value=Ct.environmentIntensity),tf&&(Ws.setValue(Mt,"toneMappingExposure",Me.toneMappingExposure),rr.needsLights&&iG(Gc,C3),Hn&&Pt.fog===!0&&Oe.refreshFogUniforms(Gc,Hn),Oe.refreshMaterialUniforms(Gc,Pt,Gt,In,ne.state.transmissionRenderTarget[Ge.id]),Nm.upload(Mt,K6(rr),Gc,Xn)),Pt.isShaderMaterial&&Pt.uniformsNeedUpdate===!0&&(Nm.upload(Mt,K6(rr),Gc,Xn),Pt.uniformsNeedUpdate=!1),Pt.isSpriteMaterial&&Ws.setValue(Mt,"center",Ft.center),Jl.numMultiviewViews>0?oi.updateObjectMatricesUniforms(Ft,Ge,Ws):(Ws.setValue(Mt,"modelViewMatrix",Ft.modelViewMatrix),Ws.setValue(Mt,"normalMatrix",Ft.normalMatrix)),Ws.setValue(Mt,"modelMatrix",Ft.matrixWorld),Pt.isShaderMaterial||Pt.isRawShaderMaterial){const Co=Pt.uniformsGroups;for(let w3=0,aG=Co.length;w3<aG;w3++){const J6=Co[w3];bi.update(J6,Jl),bi.bind(J6,Jl)}}return Jl}function iG(Ge,Ct){Ge.ambientLightColor.needsUpdate=Ct,Ge.lightProbe.needsUpdate=Ct,Ge.directionalLights.needsUpdate=Ct,Ge.directionalLightShadows.needsUpdate=Ct,Ge.pointLights.needsUpdate=Ct,Ge.pointLightShadows.needsUpdate=Ct,Ge.spotLights.needsUpdate=Ct,Ge.spotLightShadows.needsUpdate=Ct,Ge.rectAreaLights.needsUpdate=Ct,Ge.hemisphereLights.needsUpdate=Ct}function rG(Ge){return Ge.isMeshLambertMaterial||Ge.isMeshToonMaterial||Ge.isMeshPhongMaterial||Ge.isMeshStandardMaterial||Ge.isShadowMaterial||Ge.isShaderMaterial&&Ge.lights===!0}this.setTexture2D=function(){var Ge=!1;return function(Ut,Pt){Ut&&Ut.isWebGLRenderTarget&&(Ge||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Ge=!0),Ut=Ut.texture),Xn.setTexture2D(Ut,Pt)}}(),this.getActiveCubeFace=function(){return Qe},this.getActiveMipmapLevel=function(){return je},this.getRenderTarget=function(){return Ye},this.setRenderTargetTextures=function(Ge,Ct,Ut){kn.get(Ge.texture).__webglTexture=Ct,kn.get(Ge.depthTexture).__webglTexture=Ut;const Pt=kn.get(Ge);Pt.__hasExternalTextures=!0,Pt.__autoAllocateDepthBuffer=Ut===void 0,!Pt.__autoAllocateDepthBuffer&&(!Ye||!Ye.isWebGLMultiviewRenderTarget)&&Xt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Pt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Ge,Ct){const Ut=kn.get(Ge);Ut.__webglFramebuffer=Ct,Ut.__useDefaultFramebuffer=Ct===void 0},this.setRenderTarget=function(Ge,Ct=0,Ut=0){Ye=Ge,Qe=Ct,je=Ut;let Pt=!0,Ft=null,Hn=!1,ui=!1;if(Ge){const wi=kn.get(Ge);wi.__useDefaultFramebuffer!==void 0?(An.bindFramebuffer(Mt.FRAMEBUFFER,null),Pt=!1):wi.__webglFramebuffer===void 0?Xn.setupRenderTarget(Ge):wi.__hasExternalTextures&&Xn.rebindTextures(Ge,kn.get(Ge.texture).__webglTexture,kn.get(Ge.depthTexture).__webglTexture);const Qi=Ge.texture;(Qi.isData3DTexture||Qi.isDataArrayTexture||Qi.isCompressedArrayTexture)&&(ui=!0);const tr=kn.get(Ge).__webglFramebuffer;Ge.isWebGLCubeRenderTarget?(Array.isArray(tr[Ct])?Ft=tr[Ct][Ut]:Ft=tr[Ct],Hn=!0):Ge.samples>0&&Xn.useMultisampledRTT(Ge)===!1?Ft=kn.get(Ge).__webglMultisampledFramebuffer:Array.isArray(tr)?Ft=tr[Ut]:Ft=tr,qe.copy(Ge.viewport),At.copy(Ge.scissor),lt=Ge.scissorTest}else qe.copy(ti).multiplyScalar(Gt).floor(),At.copy(er).multiplyScalar(Gt).floor(),lt=Dr;if(An.bindFramebuffer(Mt.FRAMEBUFFER,Ft)&&Pt&&An.drawBuffers(Ge,Ft),An.viewport(qe),An.scissor(At),An.setScissorTest(lt),Hn){const wi=kn.get(Ge.texture);Mt.framebufferTexture2D(Mt.FRAMEBUFFER,Mt.COLOR_ATTACHMENT0,Mt.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,wi.__webglTexture,Ut)}else if(ui){const wi=kn.get(Ge.texture),Qi=Ct||0;Mt.framebufferTextureLayer(Mt.FRAMEBUFFER,Mt.COLOR_ATTACHMENT0,wi.__webglTexture,Ut||0,Qi)}Pe=-1},this.readRenderTargetPixels=function(Ge,Ct,Ut,Pt,Ft,Hn,ui){if(!(Ge&&Ge.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let di=kn.get(Ge).__webglFramebuffer;if(Ge.isWebGLCubeRenderTarget&&ui!==void 0&&(di=di[ui]),di){An.bindFramebuffer(Mt.FRAMEBUFFER,di);try{const wi=Ge.texture,Qi=wi.format,tr=wi.type;if(!vn.textureFormatReadable(Qi)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!vn.textureTypeReadable(tr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ct>=0&&Ct<=Ge.width-Pt&&Ut>=0&&Ut<=Ge.height-Ft&&Mt.readPixels(Ct,Ut,Pt,Ft,ci.convert(Qi),ci.convert(tr),Hn)}finally{const wi=Ye!==null?kn.get(Ye).__webglFramebuffer:null;An.bindFramebuffer(Mt.FRAMEBUFFER,wi)}}},this.copyFramebufferToTexture=function(Ge,Ct,Ut=0){const Pt=Math.pow(2,-Ut),Ft=Math.floor(Ct.image.width*Pt),Hn=Math.floor(Ct.image.height*Pt);Xn.setTexture2D(Ct,0),Mt.copyTexSubImage2D(Mt.TEXTURE_2D,Ut,0,0,Ge.x,Ge.y,Ft,Hn),An.unbindTexture()},this.copyTextureToTexture=function(Ge,Ct,Ut,Pt=0){const Ft=Ct.image.width,Hn=Ct.image.height,ui=ci.convert(Ut.format),di=ci.convert(Ut.type);Xn.setTexture2D(Ut,0),Mt.pixelStorei(Mt.UNPACK_FLIP_Y_WEBGL,Ut.flipY),Mt.pixelStorei(Mt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ut.premultiplyAlpha),Mt.pixelStorei(Mt.UNPACK_ALIGNMENT,Ut.unpackAlignment),Ct.isDataTexture?Mt.texSubImage2D(Mt.TEXTURE_2D,Pt,Ge.x,Ge.y,Ft,Hn,ui,di,Ct.image.data):Ct.isCompressedTexture?Mt.compressedTexSubImage2D(Mt.TEXTURE_2D,Pt,Ge.x,Ge.y,Ct.mipmaps[0].width,Ct.mipmaps[0].height,ui,Ct.mipmaps[0].data):Mt.texSubImage2D(Mt.TEXTURE_2D,Pt,Ge.x,Ge.y,ui,di,Ct.image),Pt===0&&Ut.generateMipmaps&&Mt.generateMipmap(Mt.TEXTURE_2D),An.unbindTexture()},this.copyTextureToTexture3D=function(Ge,Ct,Ut,Pt,Ft=0){const Hn=Ge.max.x-Ge.min.x,ui=Ge.max.y-Ge.min.y,di=Ge.max.z-Ge.min.z,wi=ci.convert(Pt.format),Qi=ci.convert(Pt.type);let tr;if(Pt.isData3DTexture)Xn.setTexture3D(Pt,0),tr=Mt.TEXTURE_3D;else if(Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)Xn.setTexture2DArray(Pt,0),tr=Mt.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Mt.pixelStorei(Mt.UNPACK_FLIP_Y_WEBGL,Pt.flipY),Mt.pixelStorei(Mt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Pt.premultiplyAlpha),Mt.pixelStorei(Mt.UNPACK_ALIGNMENT,Pt.unpackAlignment);const ar=Mt.getParameter(Mt.UNPACK_ROW_LENGTH),Ls=Mt.getParameter(Mt.UNPACK_IMAGE_HEIGHT),ba=Mt.getParameter(Mt.UNPACK_SKIP_PIXELS),co=Mt.getParameter(Mt.UNPACK_SKIP_ROWS),Uc=Mt.getParameter(Mt.UNPACK_SKIP_IMAGES),Lr=Ut.isCompressedTexture?Ut.mipmaps[Ft]:Ut.image;Mt.pixelStorei(Mt.UNPACK_ROW_LENGTH,Lr.width),Mt.pixelStorei(Mt.UNPACK_IMAGE_HEIGHT,Lr.height),Mt.pixelStorei(Mt.UNPACK_SKIP_PIXELS,Ge.min.x),Mt.pixelStorei(Mt.UNPACK_SKIP_ROWS,Ge.min.y),Mt.pixelStorei(Mt.UNPACK_SKIP_IMAGES,Ge.min.z),Ut.isDataTexture||Ut.isData3DTexture?Mt.texSubImage3D(tr,Ft,Ct.x,Ct.y,Ct.z,Hn,ui,di,wi,Qi,Lr.data):Pt.isCompressedArrayTexture?Mt.compressedTexSubImage3D(tr,Ft,Ct.x,Ct.y,Ct.z,Hn,ui,di,wi,Lr.data):Mt.texSubImage3D(tr,Ft,Ct.x,Ct.y,Ct.z,Hn,ui,di,wi,Qi,Lr),Mt.pixelStorei(Mt.UNPACK_ROW_LENGTH,ar),Mt.pixelStorei(Mt.UNPACK_IMAGE_HEIGHT,Ls),Mt.pixelStorei(Mt.UNPACK_SKIP_PIXELS,ba),Mt.pixelStorei(Mt.UNPACK_SKIP_ROWS,co),Mt.pixelStorei(Mt.UNPACK_SKIP_IMAGES,Uc),Ft===0&&Pt.generateMipmaps&&Mt.generateMipmap(tr),An.unbindTexture()},this.initTexture=function(Ge){Ge.isCubeTexture?Xn.setTextureCube(Ge,0):Ge.isData3DTexture?Xn.setTexture3D(Ge,0):Ge.isDataArrayTexture||Ge.isCompressedArrayTexture?Xn.setTexture2DArray(Ge,0):Xn.setTexture2D(Ge,0),An.unbindTexture()},this.resetState=function(){Qe=0,je=0,Ye=null,An.reset(),Xi.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n;const s=this.getContext();s.drawingBufferColorSpace=n===S0?"display-p3":"srgb",s.unpackColorSpace=Or.workingColorSpace===Au?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(n){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=n}}class Fm{constructor(n,s=25e-5){this.isFogExp2=!0,this.name="",this.color=new Kn(n),this.density=s}clone(){return new Fm(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class km{constructor(n,s=1,l=1e3){this.isFog=!0,this.name="",this.color=new Kn(n),this.near=s,this.far=l}clone(){return new km(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class sM extends Cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ao,this.environmentIntensity=1,this.environmentRotation=new ao,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(n,s){return super.copy(n,s),n.background!==null&&(this.background=n.background.clone()),n.environment!==null&&(this.environment=n.environment.clone()),n.fog!==null&&(this.fog=n.fog.clone()),this.backgroundBlurriness=n.backgroundBlurriness,this.backgroundIntensity=n.backgroundIntensity,this.backgroundRotation.copy(n.backgroundRotation),this.environmentIntensity=n.environmentIntensity,this.environmentRotation.copy(n.environmentRotation),n.overrideMaterial!==null&&(this.overrideMaterial=n.overrideMaterial.clone()),this.matrixAutoUpdate=n.matrixAutoUpdate,this}toJSON(n){const s=super.toJSON(n);return this.fog!==null&&(s.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(s.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(s.object.backgroundIntensity=this.backgroundIntensity),s.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(s.object.environmentIntensity=this.environmentIntensity),s.object.environmentRotation=this.environmentRotation.toArray(),s}}class Um{constructor(n,s){this.isInterleavedBuffer=!0,this.array=n,this.stride=s,this.count=n!==void 0?n.length/s:0,this.usage=Mu,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Sa()}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}get updateRange(){return dm("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(n){return this.usage=n,this}addUpdateRange(n,s){this.updateRanges.push({start:n,count:s})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this}copyAt(n,s,l){n*=this.stride,l*=s.stride;for(let f=0,b=this.stride;f<b;f++)this.array[n+f]=s.array[l+f];return this}set(n,s=0){return this.array.set(n,s),this}clone(n){n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Sa()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const s=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),l=new this.constructor(s,this.stride);return l.setUsage(this.usage),l}onUpload(n){return this.onUploadCallback=n,this}toJSON(n){return n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Sa()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ba=new Ve;class Du{constructor(n,s,l,f=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=n,this.itemSize=s,this.offset=l,this.normalized=f}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(n){this.data.needsUpdate=n}applyMatrix4(n){for(let s=0,l=this.data.count;s<l;s++)Ba.fromBufferAttribute(this,s),Ba.applyMatrix4(n),this.setXYZ(s,Ba.x,Ba.y,Ba.z);return this}applyNormalMatrix(n){for(let s=0,l=this.count;s<l;s++)Ba.fromBufferAttribute(this,s),Ba.applyNormalMatrix(n),this.setXYZ(s,Ba.x,Ba.y,Ba.z);return this}transformDirection(n){for(let s=0,l=this.count;s<l;s++)Ba.fromBufferAttribute(this,s),Ba.transformDirection(n),this.setXYZ(s,Ba.x,Ba.y,Ba.z);return this}getComponent(n,s){let l=this.array[n*this.data.stride+this.offset+s];return this.normalized&&(l=ha(l,this.array)),l}setComponent(n,s,l){return this.normalized&&(l=Pi(l,this.array)),this.data.array[n*this.data.stride+this.offset+s]=l,this}setX(n,s){return this.normalized&&(s=Pi(s,this.array)),this.data.array[n*this.data.stride+this.offset]=s,this}setY(n,s){return this.normalized&&(s=Pi(s,this.array)),this.data.array[n*this.data.stride+this.offset+1]=s,this}setZ(n,s){return this.normalized&&(s=Pi(s,this.array)),this.data.array[n*this.data.stride+this.offset+2]=s,this}setW(n,s){return this.normalized&&(s=Pi(s,this.array)),this.data.array[n*this.data.stride+this.offset+3]=s,this}getX(n){let s=this.data.array[n*this.data.stride+this.offset];return this.normalized&&(s=ha(s,this.array)),s}getY(n){let s=this.data.array[n*this.data.stride+this.offset+1];return this.normalized&&(s=ha(s,this.array)),s}getZ(n){let s=this.data.array[n*this.data.stride+this.offset+2];return this.normalized&&(s=ha(s,this.array)),s}getW(n){let s=this.data.array[n*this.data.stride+this.offset+3];return this.normalized&&(s=ha(s,this.array)),s}setXY(n,s,l){return n=n*this.data.stride+this.offset,this.normalized&&(s=Pi(s,this.array),l=Pi(l,this.array)),this.data.array[n+0]=s,this.data.array[n+1]=l,this}setXYZ(n,s,l,f){return n=n*this.data.stride+this.offset,this.normalized&&(s=Pi(s,this.array),l=Pi(l,this.array),f=Pi(f,this.array)),this.data.array[n+0]=s,this.data.array[n+1]=l,this.data.array[n+2]=f,this}setXYZW(n,s,l,f,b){return n=n*this.data.stride+this.offset,this.normalized&&(s=Pi(s,this.array),l=Pi(l,this.array),f=Pi(f,this.array),b=Pi(b,this.array)),this.data.array[n+0]=s,this.data.array[n+1]=l,this.data.array[n+2]=f,this.data.array[n+3]=b,this}clone(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const s=[];for(let l=0;l<this.count;l++){const f=l*this.data.stride+this.offset;for(let b=0;b<this.itemSize;b++)s.push(this.data.array[f+b])}return new Gr(new this.array.constructor(s),this.itemSize,this.normalized)}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new Du(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const s=[];for(let l=0;l<this.count;l++){const f=l*this.data.stride+this.offset;for(let b=0;b<this.itemSize;b++)s.push(this.data.array[f+b])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:s,normalized:this.normalized}}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class F2 extends va{constructor(n){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Kn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}let q0;const Dd=new Ve,J0=new Ve,Z0=new Ve,eh=new sn,Ld=new sn,aM=new ii,Gm=new Ve,Pd=new Ve,Vm=new Ve,oM=new sn,k2=new sn,lM=new sn;class cM extends Cr{constructor(n=new F2){if(super(),this.isSprite=!0,this.type="Sprite",q0===void 0){q0=new Zi;const s=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),l=new Um(s,5);q0.setIndex([0,1,2,0,2,3]),q0.setAttribute("position",new Du(l,3,0,!1)),q0.setAttribute("uv",new Du(l,2,3,!1))}this.geometry=q0,this.material=n,this.center=new sn(.5,.5)}raycast(n,s){n.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),J0.setFromMatrixScale(this.matrixWorld),aM.copy(n.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(n.camera.matrixWorldInverse,this.matrixWorld),Z0.setFromMatrixPosition(this.modelViewMatrix),n.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&J0.multiplyScalar(-Z0.z);const l=this.material.rotation;let f,b;l!==0&&(b=Math.cos(l),f=Math.sin(l));const I=this.center;Qm(Gm.set(-.5,-.5,0),Z0,I,J0,f,b),Qm(Pd.set(.5,-.5,0),Z0,I,J0,f,b),Qm(Vm.set(.5,.5,0),Z0,I,J0,f,b),oM.set(0,0),k2.set(1,0),lM.set(1,1);let R=n.ray.intersectTriangle(Gm,Pd,Vm,!1,Dd);if(R===null&&(Qm(Pd.set(-.5,.5,0),Z0,I,J0,f,b),k2.set(0,1),R=n.ray.intersectTriangle(Gm,Vm,Pd,!1,Dd),R===null))return;const U=n.ray.origin.distanceTo(Dd);U<n.near||U>n.far||s.push({distance:U,point:Dd.clone(),uv:oo.getInterpolation(Dd,Gm,Pd,Vm,oM,k2,lM,new sn),face:null,object:this})}copy(n,s){return super.copy(n,s),n.center!==void 0&&this.center.copy(n.center),this.material=n.material,this}}function Qm(M,n,s,l,f,b){eh.subVectors(M,s).addScalar(.5).multiply(l),f!==void 0?(Ld.x=b*eh.x-f*eh.y,Ld.y=f*eh.x+b*eh.y):Ld.copy(eh),M.copy(n),M.x+=Ld.x,M.y+=Ld.y,M.applyMatrix4(aM)}const Hm=new Ve,uM=new Ve;class hM extends Cr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(n){super.copy(n,!1);const s=n.levels;for(let l=0,f=s.length;l<f;l++){const b=s[l];this.addLevel(b.object.clone(),b.distance,b.hysteresis)}return this.autoUpdate=n.autoUpdate,this}addLevel(n,s=0,l=0){s=Math.abs(s);const f=this.levels;let b;for(b=0;b<f.length&&!(s<f[b].distance);b++);return f.splice(b,0,{distance:s,hysteresis:l,object:n}),this.add(n),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(n){const s=this.levels;if(s.length>0){let l,f;for(l=1,f=s.length;l<f;l++){let b=s[l].distance;if(s[l].object.visible&&(b-=b*s[l].hysteresis),n<b)break}return s[l-1].object}return null}raycast(n,s){if(this.levels.length>0){Hm.setFromMatrixPosition(this.matrixWorld);const f=n.ray.origin.distanceTo(Hm);this.getObjectForDistance(f).raycast(n,s)}}update(n){const s=this.levels;if(s.length>1){Hm.setFromMatrixPosition(n.matrixWorld),uM.setFromMatrixPosition(this.matrixWorld);const l=Hm.distanceTo(uM)/n.zoom;s[0].object.visible=!0;let f,b;for(f=1,b=s.length;f<b;f++){let I=s[f].distance;if(s[f].object.visible&&(I-=I*s[f].hysteresis),l>=I)s[f-1].object.visible=!1,s[f].object.visible=!0;else break}for(this._currentLevel=f-1;f<b;f++)s[f].object.visible=!1}}toJSON(n){const s=super.toJSON(n);this.autoUpdate===!1&&(s.object.autoUpdate=!1),s.object.levels=[];const l=this.levels;for(let f=0,b=l.length;f<b;f++){const I=l[f];s.object.levels.push({object:I.object.uuid,distance:I.distance,hysteresis:I.hysteresis})}return s}}const dM=new Ve,fM=new yr,mM=new yr,ck=new Ve,pM=new ii,zm=new Ve,U2=new Us,gM=new ii,G2=new Gs;class AM extends Ds{constructor(n,s){super(n,s),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Be,this.bindMatrix=new ii,this.bindMatrixInverse=new ii,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const n=this.geometry;this.boundingBox===null&&(this.boundingBox=new fs),this.boundingBox.makeEmpty();const s=n.getAttribute("position");for(let l=0;l<s.count;l++)this.getVertexPosition(l,zm),this.boundingBox.expandByPoint(zm)}computeBoundingSphere(){const n=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Us),this.boundingSphere.makeEmpty();const s=n.getAttribute("position");for(let l=0;l<s.count;l++)this.getVertexPosition(l,zm),this.boundingSphere.expandByPoint(zm)}copy(n,s){return super.copy(n,s),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this}raycast(n,s){const l=this.material,f=this.matrixWorld;l!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),U2.copy(this.boundingSphere),U2.applyMatrix4(f),n.ray.intersectsSphere(U2)!==!1&&(gM.copy(f).invert(),G2.copy(n.ray).applyMatrix4(gM),!(this.boundingBox!==null&&G2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(n,s,G2)))}getVertexPosition(n,s){return super.getVertexPosition(n,s),this.applyBoneTransform(n,s),s}bind(n,s){this.skeleton=n,s===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),s=this.matrixWorld),this.bindMatrix.copy(s),this.bindMatrixInverse.copy(s).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const n=new yr,s=this.geometry.attributes.skinWeight;for(let l=0,f=s.count;l<f;l++){n.fromBufferAttribute(s,l);const b=1/n.manhattanLength();b!==1/0?n.multiplyScalar(b):n.set(1,0,0,0),s.setXYZW(l,n.x,n.y,n.z,n.w)}}updateMatrixWorld(n){super.updateMatrixWorld(n),this.bindMode===Be?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Le?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(n,s){const l=this.skeleton,f=this.geometry;fM.fromBufferAttribute(f.attributes.skinIndex,n),mM.fromBufferAttribute(f.attributes.skinWeight,n),dM.copy(s).applyMatrix4(this.bindMatrix),s.set(0,0,0);for(let b=0;b<4;b++){const I=mM.getComponent(b);if(I!==0){const R=fM.getComponent(b);pM.multiplyMatrices(l.bones[R].matrixWorld,l.boneInverses[R]),s.addScaledVector(ck.copy(dM).applyMatrix4(pM),I)}}return s.applyMatrix4(this.bindMatrixInverse)}}class V2 extends Cr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Dc extends qr{constructor(n=null,s=1,l=1,f,b,I,R,U,V=Zt,$=Zt,Z,ee){super(null,I,R,U,V,$,f,b,Z,ee),this.isDataTexture=!0,this.image={data:n,width:s,height:l},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const vM=new ii,uk=new ii;class Wm{constructor(n=[],s=[]){this.uuid=Sa(),this.bones=n.slice(0),this.boneInverses=s,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const n=this.bones,s=this.boneInverses;if(this.boneMatrices=new Float32Array(n.length*16),s.length===0)this.calculateInverses();else if(n.length!==s.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let l=0,f=this.bones.length;l<f;l++)this.boneInverses.push(new ii)}}calculateInverses(){this.boneInverses.length=0;for(let n=0,s=this.bones.length;n<s;n++){const l=new ii;this.bones[n]&&l.copy(this.bones[n].matrixWorld).invert(),this.boneInverses.push(l)}}pose(){for(let n=0,s=this.bones.length;n<s;n++){const l=this.bones[n];l&&l.matrixWorld.copy(this.boneInverses[n]).invert()}for(let n=0,s=this.bones.length;n<s;n++){const l=this.bones[n];l&&(l.parent&&l.parent.isBone?(l.matrix.copy(l.parent.matrixWorld).invert(),l.matrix.multiply(l.matrixWorld)):l.matrix.copy(l.matrixWorld),l.matrix.decompose(l.position,l.quaternion,l.scale))}}update(){const n=this.bones,s=this.boneInverses,l=this.boneMatrices,f=this.boneTexture;for(let b=0,I=n.length;b<I;b++){const R=n[b]?n[b].matrixWorld:uk;vM.multiplyMatrices(R,s[b]),vM.toArray(l,b*16)}f!==null&&(f.needsUpdate=!0)}clone(){return new Wm(this.bones,this.boneInverses)}computeBoneTexture(){let n=Math.sqrt(this.bones.length*4);n=Math.ceil(n/4)*4,n=Math.max(n,4);const s=new Float32Array(n*n*4);s.set(this.boneMatrices);const l=new Dc(s,n,n,$e,Pr);return l.needsUpdate=!0,this.boneMatrices=s,this.boneTexture=l,this}getBoneByName(n){for(let s=0,l=this.bones.length;s<l;s++){const f=this.bones[s];if(f.name===n)return f}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(n,s){this.uuid=n.uuid;for(let l=0,f=n.bones.length;l<f;l++){const b=n.bones[l];let I=s[b];I===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",b),I=new V2),this.bones.push(I),this.boneInverses.push(new ii().fromArray(n.boneInverses[l]))}return this.init(),this}toJSON(){const n={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};n.uuid=this.uuid;const s=this.bones,l=this.boneInverses;for(let f=0,b=s.length;f<b;f++){const I=s[f];n.bones.push(I.uuid);const R=l[f];n.boneInverses.push(R.toArray())}return n}}class th extends Gr{constructor(n,s,l,f=1){super(n,s,l),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=f}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}toJSON(){const n=super.toJSON();return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}}const nh=new ii,yM=new ii,jm=[],bM=new fs,hk=new ii,Nd=new Ds,Fd=new Us;class MM extends Ds{constructor(n,s,l){super(n,s),this.isInstancedMesh=!0,this.instanceMatrix=new th(new Float32Array(l*16),16),this.instanceColor=null,this.morphTexture=null,this.count=l,this.boundingBox=null,this.boundingSphere=null;for(let f=0;f<l;f++)this.setMatrixAt(f,hk)}computeBoundingBox(){const n=this.geometry,s=this.count;this.boundingBox===null&&(this.boundingBox=new fs),n.boundingBox===null&&n.computeBoundingBox(),this.boundingBox.makeEmpty();for(let l=0;l<s;l++)this.getMatrixAt(l,nh),bM.copy(n.boundingBox).applyMatrix4(nh),this.boundingBox.union(bM)}computeBoundingSphere(){const n=this.geometry,s=this.count;this.boundingSphere===null&&(this.boundingSphere=new Us),n.boundingSphere===null&&n.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let l=0;l<s;l++)this.getMatrixAt(l,nh),Fd.copy(n.boundingSphere).applyMatrix4(nh),this.boundingSphere.union(Fd)}copy(n,s){return super.copy(n,s),this.instanceMatrix.copy(n.instanceMatrix),n.morphTexture!==null&&(this.morphTexture=n.morphTexture.clone()),n.instanceColor!==null&&(this.instanceColor=n.instanceColor.clone()),this.count=n.count,n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this}getColorAt(n,s){s.fromArray(this.instanceColor.array,n*3)}getMatrixAt(n,s){s.fromArray(this.instanceMatrix.array,n*16)}getMorphAt(n,s){const l=s.morphTargetInfluences,f=this.morphTexture.source.data.data,b=l.length+1,I=n*b+1;for(let R=0;R<l.length;R++)l[R]=f[I+R]}raycast(n,s){const l=this.matrixWorld,f=this.count;if(Nd.geometry=this.geometry,Nd.material=this.material,Nd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Fd.copy(this.boundingSphere),Fd.applyMatrix4(l),n.ray.intersectsSphere(Fd)!==!1))for(let b=0;b<f;b++){this.getMatrixAt(b,nh),yM.multiplyMatrices(l,nh),Nd.matrixWorld=yM,Nd.raycast(n,jm);for(let I=0,R=jm.length;I<R;I++){const U=jm[I];U.instanceId=b,U.object=this,s.push(U)}jm.length=0}}setColorAt(n,s){this.instanceColor===null&&(this.instanceColor=new th(new Float32Array(this.instanceMatrix.count*3),3)),s.toArray(this.instanceColor.array,n*3)}setMatrixAt(n,s){s.toArray(this.instanceMatrix.array,n*16)}setMorphAt(n,s){const l=s.morphTargetInfluences,f=l.length+1;this.morphTexture===null&&(this.morphTexture=new Dc(new Float32Array(f*this.count),f,this.count,mn,Pr));const b=this.morphTexture.source.data.data;let I=0;for(let V=0;V<l.length;V++)I+=l[V];const R=this.geometry.morphTargetsRelative?1:1-I,U=f*n;b[U]=R,b.set(l,U+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function dk(M,n){return M.z-n.z}function fk(M,n){return n.z-M.z}class mk{constructor(){this.index=0,this.pool=[],this.list=[]}push(n,s){const l=this.pool,f=this.list;this.index>=l.length&&l.push({start:-1,count:-1,z:-1});const b=l[this.index];f.push(b),this.index++,b.start=n.start,b.count=n.count,b.z=s}reset(){this.list.length=0,this.index=0}}const ih="batchId",Lc=new ii,_M=new ii,pk=new ii,CM=new ii,Q2=new Rd,$m=new fs,Lu=new Us,kd=new Ve,H2=new mk,ya=new Ds,Xm=[];function gk(M,n,s=0){const l=n.itemSize;if(M.isInterleavedBufferAttribute||M.array.constructor!==n.array.constructor){const f=M.count;for(let b=0;b<f;b++)for(let I=0;I<l;I++)n.setComponent(b+s,I,M.getComponent(b,I))}else n.array.set(M.array,s*l);n.needsUpdate=!0}class EM extends Ds{get maxGeometryCount(){return this._maxGeometryCount}constructor(n,s,l=s*2,f){super(new Zi,f),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=n,this._maxVertexCount=s,this._maxIndexCount=l,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(n),this._multiDrawStarts=new Int32Array(n),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let n=Math.sqrt(this._maxGeometryCount*4);n=Math.ceil(n/4)*4,n=Math.max(n,4);const s=new Float32Array(n*n*4),l=new Dc(s,n,n,$e,Pr);this._matricesTexture=l}_initializeGeometry(n){const s=this.geometry,l=this._maxVertexCount,f=this._maxGeometryCount,b=this._maxIndexCount;if(this._geometryInitialized===!1){for(const R in n.attributes){const U=n.getAttribute(R),{array:V,itemSize:$,normalized:Z}=U,ee=new V.constructor(l*$),te=new Gr(ee,$,Z);s.setAttribute(R,te)}if(n.getIndex()!==null){const R=l>65536?new Uint32Array(b):new Uint16Array(b);s.setIndex(new Gr(R,1))}const I=f>65536?new Uint32Array(l):new Uint16Array(l);s.setAttribute(ih,new Gr(I,1)),this._geometryInitialized=!0}}_validateGeometry(n){if(n.getAttribute(ih))throw new Error(`BatchedMesh: Geometry cannot use attribute "${ih}"`);const s=this.geometry;if(!!n.getIndex()!=!!s.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const l in s.attributes){if(l===ih)continue;if(!n.hasAttribute(l))throw new Error(`BatchedMesh: Added geometry missing "${l}". All geometries must have consistent attributes.`);const f=n.getAttribute(l),b=s.getAttribute(l);if(f.itemSize!==b.itemSize||f.normalized!==b.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(n){return this.customSort=n,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new fs);const n=this._geometryCount,s=this.boundingBox,l=this._active;s.makeEmpty();for(let f=0;f<n;f++)l[f]!==!1&&(this.getMatrixAt(f,Lc),this.getBoundingBoxAt(f,$m).applyMatrix4(Lc),s.union($m))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Us);const n=this._geometryCount,s=this.boundingSphere,l=this._active;s.makeEmpty();for(let f=0;f<n;f++)l[f]!==!1&&(this.getMatrixAt(f,Lc),this.getBoundingSphereAt(f,Lu).applyMatrix4(Lc),s.union(Lu))}addGeometry(n,s=-1,l=-1){if(this._initializeGeometry(n),this._validateGeometry(n),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const f={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let b=null;const I=this._reservedRanges,R=this._drawRanges,U=this._bounds;this._geometryCount!==0&&(b=I[I.length-1]),s===-1?f.vertexCount=n.getAttribute("position").count:f.vertexCount=s,b===null?f.vertexStart=0:f.vertexStart=b.vertexStart+b.vertexCount;const V=n.getIndex(),$=V!==null;if($&&(l===-1?f.indexCount=V.count:f.indexCount=l,b===null?f.indexStart=0:f.indexStart=b.indexStart+b.indexCount),f.indexStart!==-1&&f.indexStart+f.indexCount>this._maxIndexCount||f.vertexStart+f.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const Z=this._visibility,ee=this._active,te=this._matricesTexture,ae=this._matricesTexture.image.data;Z.push(!0),ee.push(!0);const he=this._geometryCount;this._geometryCount++,pk.toArray(ae,he*16),te.needsUpdate=!0,I.push(f),R.push({start:$?f.indexStart:f.vertexStart,count:-1}),U.push({boxInitialized:!1,box:new fs,sphereInitialized:!1,sphere:new Us});const oe=this.geometry.getAttribute(ih);for(let ne=0;ne<f.vertexCount;ne++)oe.setX(f.vertexStart+ne,he);return oe.needsUpdate=!0,this.setGeometryAt(he,n),he}setGeometryAt(n,s){if(n>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(s);const l=this.geometry,f=l.getIndex()!==null,b=l.getIndex(),I=s.getIndex(),R=this._reservedRanges[n];if(f&&I.count>R.indexCount||s.attributes.position.count>R.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const U=R.vertexStart,V=R.vertexCount;for(const te in l.attributes){if(te===ih)continue;const ae=s.getAttribute(te),he=l.getAttribute(te);gk(ae,he,U);const oe=ae.itemSize;for(let ne=ae.count,Ie=V;ne<Ie;ne++){const Ce=U+ne;for(let Me=0;Me<oe;Me++)he.setComponent(Ce,Me,0)}he.needsUpdate=!0,he.addUpdateRange(U*oe,V*oe)}if(f){const te=R.indexStart;for(let ae=0;ae<I.count;ae++)b.setX(te+ae,U+I.getX(ae));for(let ae=I.count,he=R.indexCount;ae<he;ae++)b.setX(te+ae,U);b.needsUpdate=!0,b.addUpdateRange(te,R.indexCount)}const $=this._bounds[n];s.boundingBox!==null?($.box.copy(s.boundingBox),$.boxInitialized=!0):$.boxInitialized=!1,s.boundingSphere!==null?($.sphere.copy(s.boundingSphere),$.sphereInitialized=!0):$.sphereInitialized=!1;const Z=this._drawRanges[n],ee=s.getAttribute("position");return Z.count=f?I.count:ee.count,this._visibilityChanged=!0,n}deleteGeometry(n){const s=this._active;return n>=s.length||s[n]===!1?this:(s[n]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(n){return this._multiDrawInstances===null?null:this._multiDrawInstances[n]}setInstanceCountAt(n,s){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[n]=s,n}getBoundingBoxAt(n,s){if(this._active[n]===!1)return null;const f=this._bounds[n],b=f.box,I=this.geometry;if(f.boxInitialized===!1){b.makeEmpty();const R=I.index,U=I.attributes.position,V=this._drawRanges[n];for(let $=V.start,Z=V.start+V.count;$<Z;$++){let ee=$;R&&(ee=R.getX(ee)),b.expandByPoint(kd.fromBufferAttribute(U,ee))}f.boxInitialized=!0}return s.copy(b),s}getBoundingSphereAt(n,s){if(this._active[n]===!1)return null;const f=this._bounds[n],b=f.sphere,I=this.geometry;if(f.sphereInitialized===!1){b.makeEmpty(),this.getBoundingBoxAt(n,$m),$m.getCenter(b.center);const R=I.index,U=I.attributes.position,V=this._drawRanges[n];let $=0;for(let Z=V.start,ee=V.start+V.count;Z<ee;Z++){let te=Z;R&&(te=R.getX(te)),kd.fromBufferAttribute(U,te),$=Math.max($,b.center.distanceToSquared(kd))}b.radius=Math.sqrt($),f.sphereInitialized=!0}return s.copy(b),s}setMatrixAt(n,s){const l=this._active,f=this._matricesTexture,b=this._matricesTexture.image.data,I=this._geometryCount;return n>=I||l[n]===!1?this:(s.toArray(b,n*16),f.needsUpdate=!0,this)}getMatrixAt(n,s){const l=this._active,f=this._matricesTexture.image.data,b=this._geometryCount;return n>=b||l[n]===!1?null:s.fromArray(f,n*16)}setVisibleAt(n,s){const l=this._visibility,f=this._active,b=this._geometryCount;return n>=b||f[n]===!1||l[n]===s?this:(l[n]=s,this._visibilityChanged=!0,this)}getVisibleAt(n){const s=this._visibility,l=this._active,f=this._geometryCount;return n>=f||l[n]===!1?!1:s[n]}raycast(n,s){const l=this._visibility,f=this._active,b=this._drawRanges,I=this._geometryCount,R=this.matrixWorld,U=this.geometry;ya.material=this.material,ya.geometry.index=U.index,ya.geometry.attributes=U.attributes,ya.geometry.boundingBox===null&&(ya.geometry.boundingBox=new fs),ya.geometry.boundingSphere===null&&(ya.geometry.boundingSphere=new Us);for(let V=0;V<I;V++){if(!l[V]||!f[V])continue;const $=b[V];ya.geometry.setDrawRange($.start,$.count),this.getMatrixAt(V,ya.matrixWorld).premultiply(R),this.getBoundingBoxAt(V,ya.geometry.boundingBox),this.getBoundingSphereAt(V,ya.geometry.boundingSphere),ya.raycast(n,Xm);for(let Z=0,ee=Xm.length;Z<ee;Z++){const te=Xm[Z];te.object=this,te.batchId=V,s.push(te)}Xm.length=0}ya.material=null,ya.geometry.index=null,ya.geometry.attributes={},ya.geometry.setDrawRange(0,1/0)}copy(n){return super.copy(n),this.geometry=n.geometry.clone(),this.perObjectFrustumCulled=n.perObjectFrustumCulled,this.sortObjects=n.sortObjects,this.boundingBox=n.boundingBox!==null?n.boundingBox.clone():null,this.boundingSphere=n.boundingSphere!==null?n.boundingSphere.clone():null,this._drawRanges=n._drawRanges.map(s=>({...s})),this._reservedRanges=n._reservedRanges.map(s=>({...s})),this._visibility=n._visibility.slice(),this._active=n._active.slice(),this._bounds=n._bounds.map(s=>({boxInitialized:s.boxInitialized,box:s.box.clone(),sphereInitialized:s.sphereInitialized,sphere:s.sphere.clone()})),this._maxGeometryCount=n._maxGeometryCount,this._maxVertexCount=n._maxVertexCount,this._maxIndexCount=n._maxIndexCount,this._geometryInitialized=n._geometryInitialized,this._geometryCount=n._geometryCount,this._multiDrawCounts=n._multiDrawCounts.slice(),this._multiDrawStarts=n._multiDrawStarts.slice(),this._matricesTexture=n._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(n,s,l,f,b){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const I=f.getIndex(),R=I===null?1:I.array.BYTES_PER_ELEMENT,U=this._active,V=this._visibility,$=this._multiDrawStarts,Z=this._multiDrawCounts,ee=this._drawRanges,te=this.perObjectFrustumCulled;te&&(CM.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse).multiply(this.matrixWorld),Q2.setFromProjectionMatrix(CM,n.coordinateSystem));let ae=0;if(this.sortObjects){_M.copy(this.matrixWorld).invert(),kd.setFromMatrixPosition(l.matrixWorld).applyMatrix4(_M);for(let ne=0,Ie=V.length;ne<Ie;ne++)if(V[ne]&&U[ne]){this.getMatrixAt(ne,Lc),this.getBoundingSphereAt(ne,Lu).applyMatrix4(Lc);let Ce=!1;if(te&&(Ce=!Q2.intersectsSphere(Lu)),!Ce){const Me=kd.distanceTo(Lu.center);H2.push(ee[ne],Me)}}const he=H2.list,oe=this.customSort;oe===null?he.sort(b.transparent?fk:dk):oe.call(this,he,l);for(let ne=0,Ie=he.length;ne<Ie;ne++){const Ce=he[ne];$[ae]=Ce.start*R,Z[ae]=Ce.count,ae++}H2.reset()}else for(let he=0,oe=V.length;he<oe;he++)if(V[he]&&U[he]){let ne=!1;if(te&&(this.getMatrixAt(he,Lc),this.getBoundingSphereAt(he,Lu).applyMatrix4(Lc),ne=!Q2.intersectsSphere(Lu)),!ne){const Ie=ee[he];$[ae]=Ie.start*R,Z[ae]=Ie.count,ae++}}this._multiDrawCount=ae,this._visibilityChanged=!1}onBeforeShadow(n,s,l,f,b,I){this.onBeforeRender(n,null,f,b,I)}}class Ra extends va{constructor(n){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Kn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.fog=n.fog,this}}const Km=new Ve,Ym=new Ve,wM=new ii,Ud=new Gs,qm=new Us,z2=new Ve,xM=new Ve;class Pc extends Cr{constructor(n=new Zi,s=new Ra){super(),this.isLine=!0,this.type="Line",this.geometry=n,this.material=s,this.updateMorphTargets()}copy(n,s){return super.copy(n,s),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}computeLineDistances(){const n=this.geometry;if(n.index===null){const s=n.attributes.position,l=[0];for(let f=1,b=s.count;f<b;f++)Km.fromBufferAttribute(s,f-1),Ym.fromBufferAttribute(s,f),l[f]=l[f-1],l[f]+=Km.distanceTo(Ym);n.setAttribute("lineDistance",new ai(l,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(n,s){const l=this.geometry,f=this.matrixWorld,b=n.params.Line.threshold,I=l.drawRange;if(l.boundingSphere===null&&l.computeBoundingSphere(),qm.copy(l.boundingSphere),qm.applyMatrix4(f),qm.radius+=b,n.ray.intersectsSphere(qm)===!1)return;wM.copy(f).invert(),Ud.copy(n.ray).applyMatrix4(wM);const R=b/((this.scale.x+this.scale.y+this.scale.z)/3),U=R*R,V=this.isLineSegments?2:1,$=l.index,ee=l.attributes.position;if($!==null){const te=Math.max(0,I.start),ae=Math.min($.count,I.start+I.count);for(let he=te,oe=ae-1;he<oe;he+=V){const ne=$.getX(he),Ie=$.getX(he+1),Ce=Jm(this,n,Ud,U,ne,Ie);Ce&&s.push(Ce)}if(this.isLineLoop){const he=$.getX(ae-1),oe=$.getX(te),ne=Jm(this,n,Ud,U,he,oe);ne&&s.push(ne)}}else{const te=Math.max(0,I.start),ae=Math.min(ee.count,I.start+I.count);for(let he=te,oe=ae-1;he<oe;he+=V){const ne=Jm(this,n,Ud,U,he,he+1);ne&&s.push(ne)}if(this.isLineLoop){const he=Jm(this,n,Ud,U,ae-1,te);he&&s.push(he)}}}updateMorphTargets(){const s=this.geometry.morphAttributes,l=Object.keys(s);if(l.length>0){const f=s[l[0]];if(f!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,I=f.length;b<I;b++){const R=f[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[R]=b}}}}}function Jm(M,n,s,l,f,b){const I=M.geometry.attributes.position;if(Km.fromBufferAttribute(I,f),Ym.fromBufferAttribute(I,b),s.distanceSqToSegment(Km,Ym,z2,xM)>l)return;z2.applyMatrix4(M.matrixWorld);const U=n.ray.origin.distanceTo(z2);if(!(U<n.near||U>n.far))return{distance:U,point:xM.clone().applyMatrix4(M.matrixWorld),index:f,face:null,faceIndex:null,object:M}}const SM=new Ve,IM=new Ve;class hl extends Pc{constructor(n,s){super(n,s),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const n=this.geometry;if(n.index===null){const s=n.attributes.position,l=[];for(let f=0,b=s.count;f<b;f+=2)SM.fromBufferAttribute(s,f),IM.fromBufferAttribute(s,f+1),l[f]=f===0?0:l[f-1],l[f+1]=l[f]+SM.distanceTo(IM);n.setAttribute("lineDistance",new ai(l,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class TM extends Pc{constructor(n,s){super(n,s),this.isLineLoop=!0,this.type="LineLoop"}}class W2 extends va{constructor(n){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Kn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}const BM=new ii,j2=new Gs,Zm=new Us,ep=new Ve;class RM extends Cr{constructor(n=new Zi,s=new W2){super(),this.isPoints=!0,this.type="Points",this.geometry=n,this.material=s,this.updateMorphTargets()}copy(n,s){return super.copy(n,s),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}raycast(n,s){const l=this.geometry,f=this.matrixWorld,b=n.params.Points.threshold,I=l.drawRange;if(l.boundingSphere===null&&l.computeBoundingSphere(),Zm.copy(l.boundingSphere),Zm.applyMatrix4(f),Zm.radius+=b,n.ray.intersectsSphere(Zm)===!1)return;BM.copy(f).invert(),j2.copy(n.ray).applyMatrix4(BM);const R=b/((this.scale.x+this.scale.y+this.scale.z)/3),U=R*R,V=l.index,Z=l.attributes.position;if(V!==null){const ee=Math.max(0,I.start),te=Math.min(V.count,I.start+I.count);for(let ae=ee,he=te;ae<he;ae++){const oe=V.getX(ae);ep.fromBufferAttribute(Z,oe),OM(ep,oe,U,f,n,s,this)}}else{const ee=Math.max(0,I.start),te=Math.min(Z.count,I.start+I.count);for(let ae=ee,he=te;ae<he;ae++)ep.fromBufferAttribute(Z,ae),OM(ep,ae,U,f,n,s,this)}}updateMorphTargets(){const s=this.geometry.morphAttributes,l=Object.keys(s);if(l.length>0){const f=s[l[0]];if(f!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,I=f.length;b<I;b++){const R=f[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[R]=b}}}}}function OM(M,n,s,l,f,b,I){const R=j2.distanceSqToPoint(M);if(R<s){const U=new Ve;j2.closestPointToPoint(M,U),U.applyMatrix4(l);const V=f.ray.origin.distanceTo(U);if(V<f.near||V>f.far)return;b.push({distance:V,distanceToRay:Math.sqrt(R),point:U,index:n,face:null,object:I})}}class Ak extends qr{constructor(n,s,l,f,b,I,R,U,V){super(n,s,l,f,b,I,R,U,V),this.isVideoTexture=!0,this.minFilter=I!==void 0?I:Fn,this.magFilter=b!==void 0?b:Fn,this.generateMipmaps=!1;const $=this;function Z(){$.needsUpdate=!0,n.requestVideoFrameCallback(Z)}"requestVideoFrameCallback"in n&&n.requestVideoFrameCallback(Z)}clone(){return new this.constructor(this.image).copy(this)}update(){const n=this.image;"requestVideoFrameCallback"in n===!1&&n.readyState>=n.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class vk extends qr{constructor(n,s){super({width:n,height:s}),this.isFramebufferTexture=!0,this.magFilter=Zt,this.minFilter=Zt,this.generateMipmaps=!1,this.needsUpdate=!0}}class tp extends qr{constructor(n,s,l,f,b,I,R,U,V,$,Z,ee){super(null,I,R,U,V,$,f,b,Z,ee),this.isCompressedTexture=!0,this.image={width:s,height:l},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}}class yk extends tp{constructor(n,s,l,f,b,I){super(n,s,l,b,I),this.isCompressedArrayTexture=!0,this.image.depth=f,this.wrapR=tt}}class bk extends tp{constructor(n,s,l){super(void 0,n[0].width,n[0].height,s,l,ce),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=n}}class Mk extends qr{constructor(n,s,l,f,b,I,R,U,V){super(n,s,l,f,b,I,R,U,V),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ho{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(n,s){const l=this.getUtoTmapping(n);return this.getPoint(l,s)}getPoints(n=5){const s=[];for(let l=0;l<=n;l++)s.push(this.getPoint(l/n));return s}getSpacedPoints(n=5){const s=[];for(let l=0;l<=n;l++)s.push(this.getPointAt(l/n));return s}getLength(){const n=this.getLengths();return n[n.length-1]}getLengths(n=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const s=[];let l,f=this.getPoint(0),b=0;s.push(0);for(let I=1;I<=n;I++)l=this.getPoint(I/n),b+=l.distanceTo(f),s.push(b),f=l;return this.cacheArcLengths=s,s}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(n,s){const l=this.getLengths();let f=0;const b=l.length;let I;s?I=s:I=n*l[b-1];let R=0,U=b-1,V;for(;R<=U;)if(f=Math.floor(R+(U-R)/2),V=l[f]-I,V<0)R=f+1;else if(V>0)U=f-1;else{U=f;break}if(f=U,l[f]===I)return f/(b-1);const $=l[f],ee=l[f+1]-$,te=(I-$)/ee;return(f+te)/(b-1)}getTangent(n,s){let f=n-1e-4,b=n+1e-4;f<0&&(f=0),b>1&&(b=1);const I=this.getPoint(f),R=this.getPoint(b),U=s||(I.isVector2?new sn:new Ve);return U.copy(R).sub(I).normalize(),U}getTangentAt(n,s){const l=this.getUtoTmapping(n);return this.getTangent(l,s)}computeFrenetFrames(n,s){const l=new Ve,f=[],b=[],I=[],R=new Ve,U=new ii;for(let te=0;te<=n;te++){const ae=te/n;f[te]=this.getTangentAt(ae,new Ve)}b[0]=new Ve,I[0]=new Ve;let V=Number.MAX_VALUE;const $=Math.abs(f[0].x),Z=Math.abs(f[0].y),ee=Math.abs(f[0].z);$<=V&&(V=$,l.set(1,0,0)),Z<=V&&(V=Z,l.set(0,1,0)),ee<=V&&l.set(0,0,1),R.crossVectors(f[0],l).normalize(),b[0].crossVectors(f[0],R),I[0].crossVectors(f[0],b[0]);for(let te=1;te<=n;te++){if(b[te]=b[te-1].clone(),I[te]=I[te-1].clone(),R.crossVectors(f[te-1],f[te]),R.length()>Number.EPSILON){R.normalize();const ae=Math.acos(hs(f[te-1].dot(f[te]),-1,1));b[te].applyMatrix4(U.makeRotationAxis(R,ae))}I[te].crossVectors(f[te],b[te])}if(s===!0){let te=Math.acos(hs(b[0].dot(b[n]),-1,1));te/=n,f[0].dot(R.crossVectors(b[0],b[n]))>0&&(te=-te);for(let ae=1;ae<=n;ae++)b[ae].applyMatrix4(U.makeRotationAxis(f[ae],te*ae)),I[ae].crossVectors(f[ae],b[ae])}return{tangents:f,normals:b,binormals:I}}clone(){return new this.constructor().copy(this)}copy(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}toJSON(){const n={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n}fromJSON(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}}class np extends Ho{constructor(n=0,s=0,l=1,f=1,b=0,I=Math.PI*2,R=!1,U=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=n,this.aY=s,this.xRadius=l,this.yRadius=f,this.aStartAngle=b,this.aEndAngle=I,this.aClockwise=R,this.aRotation=U}getPoint(n,s=new sn){const l=s,f=Math.PI*2;let b=this.aEndAngle-this.aStartAngle;const I=Math.abs(b)<Number.EPSILON;for(;b<0;)b+=f;for(;b>f;)b-=f;b<Number.EPSILON&&(I?b=0:b=f),this.aClockwise===!0&&!I&&(b===f?b=-f:b=b-f);const R=this.aStartAngle+n*b;let U=this.aX+this.xRadius*Math.cos(R),V=this.aY+this.yRadius*Math.sin(R);if(this.aRotation!==0){const $=Math.cos(this.aRotation),Z=Math.sin(this.aRotation),ee=U-this.aX,te=V-this.aY;U=ee*$-te*Z+this.aX,V=ee*Z+te*$+this.aY}return l.set(U,V)}copy(n){return super.copy(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}toJSON(){const n=super.toJSON();return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n}fromJSON(n){return super.fromJSON(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}}class DM extends np{constructor(n,s,l,f,b,I){super(n,s,l,l,f,b,I),this.isArcCurve=!0,this.type="ArcCurve"}}function $2(){let M=0,n=0,s=0,l=0;function f(b,I,R,U){M=b,n=R,s=-3*b+3*I-2*R-U,l=2*b-2*I+R+U}return{initCatmullRom:function(b,I,R,U,V){f(I,R,V*(R-b),V*(U-I))},initNonuniformCatmullRom:function(b,I,R,U,V,$,Z){let ee=(I-b)/V-(R-b)/(V+$)+(R-I)/$,te=(R-I)/$-(U-I)/($+Z)+(U-R)/Z;ee*=$,te*=$,f(I,R,ee,te)},calc:function(b){const I=b*b,R=I*b;return M+n*b+s*I+l*R}}}const ip=new Ve,X2=new $2,K2=new $2,Y2=new $2;class LM extends Ho{constructor(n=[],s=!1,l="centripetal",f=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=n,this.closed=s,this.curveType=l,this.tension=f}getPoint(n,s=new Ve){const l=s,f=this.points,b=f.length,I=(b-(this.closed?0:1))*n;let R=Math.floor(I),U=I-R;this.closed?R+=R>0?0:(Math.floor(Math.abs(R)/b)+1)*b:U===0&&R===b-1&&(R=b-2,U=1);let V,$;this.closed||R>0?V=f[(R-1)%b]:(ip.subVectors(f[0],f[1]).add(f[0]),V=ip);const Z=f[R%b],ee=f[(R+1)%b];if(this.closed||R+2<b?$=f[(R+2)%b]:(ip.subVectors(f[b-1],f[b-2]).add(f[b-1]),$=ip),this.curveType==="centripetal"||this.curveType==="chordal"){const te=this.curveType==="chordal"?.5:.25;let ae=Math.pow(V.distanceToSquared(Z),te),he=Math.pow(Z.distanceToSquared(ee),te),oe=Math.pow(ee.distanceToSquared($),te);he<1e-4&&(he=1),ae<1e-4&&(ae=he),oe<1e-4&&(oe=he),X2.initNonuniformCatmullRom(V.x,Z.x,ee.x,$.x,ae,he,oe),K2.initNonuniformCatmullRom(V.y,Z.y,ee.y,$.y,ae,he,oe),Y2.initNonuniformCatmullRom(V.z,Z.z,ee.z,$.z,ae,he,oe)}else this.curveType==="catmullrom"&&(X2.initCatmullRom(V.x,Z.x,ee.x,$.x,this.tension),K2.initCatmullRom(V.y,Z.y,ee.y,$.y,this.tension),Y2.initCatmullRom(V.z,Z.z,ee.z,$.z,this.tension));return l.set(X2.calc(U),K2.calc(U),Y2.calc(U)),l}copy(n){super.copy(n),this.points=[];for(let s=0,l=n.points.length;s<l;s++){const f=n.points[s];this.points.push(f.clone())}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}toJSON(){const n=super.toJSON();n.points=[];for(let s=0,l=this.points.length;s<l;s++){const f=this.points[s];n.points.push(f.toArray())}return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n}fromJSON(n){super.fromJSON(n),this.points=[];for(let s=0,l=n.points.length;s<l;s++){const f=n.points[s];this.points.push(new Ve().fromArray(f))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}}function PM(M,n,s,l,f){const b=(l-n)*.5,I=(f-s)*.5,R=M*M,U=M*R;return(2*s-2*l+b+I)*U+(-3*s+3*l-2*b-I)*R+b*M+s}function _k(M,n){const s=1-M;return s*s*n}function Ck(M,n){return 2*(1-M)*M*n}function Ek(M,n){return M*M*n}function Gd(M,n,s,l){return _k(M,n)+Ck(M,s)+Ek(M,l)}function wk(M,n){const s=1-M;return s*s*s*n}function xk(M,n){const s=1-M;return 3*s*s*M*n}function Sk(M,n){return 3*(1-M)*M*M*n}function Ik(M,n){return M*M*M*n}function Vd(M,n,s,l,f){return wk(M,n)+xk(M,s)+Sk(M,l)+Ik(M,f)}class q2 extends Ho{constructor(n=new sn,s=new sn,l=new sn,f=new sn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=n,this.v1=s,this.v2=l,this.v3=f}getPoint(n,s=new sn){const l=s,f=this.v0,b=this.v1,I=this.v2,R=this.v3;return l.set(Vd(n,f.x,b.x,I.x,R.x),Vd(n,f.y,b.y,I.y,R.y)),l}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class NM extends Ho{constructor(n=new Ve,s=new Ve,l=new Ve,f=new Ve){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=n,this.v1=s,this.v2=l,this.v3=f}getPoint(n,s=new Ve){const l=s,f=this.v0,b=this.v1,I=this.v2,R=this.v3;return l.set(Vd(n,f.x,b.x,I.x,R.x),Vd(n,f.y,b.y,I.y,R.y),Vd(n,f.z,b.z,I.z,R.z)),l}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class J2 extends Ho{constructor(n=new sn,s=new sn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=n,this.v2=s}getPoint(n,s=new sn){const l=s;return n===1?l.copy(this.v2):(l.copy(this.v2).sub(this.v1),l.multiplyScalar(n).add(this.v1)),l}getPointAt(n,s){return this.getPoint(n,s)}getTangent(n,s=new sn){return s.subVectors(this.v2,this.v1).normalize()}getTangentAt(n,s){return this.getTangent(n,s)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class FM extends Ho{constructor(n=new Ve,s=new Ve){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=n,this.v2=s}getPoint(n,s=new Ve){const l=s;return n===1?l.copy(this.v2):(l.copy(this.v2).sub(this.v1),l.multiplyScalar(n).add(this.v1)),l}getPointAt(n,s){return this.getPoint(n,s)}getTangent(n,s=new Ve){return s.subVectors(this.v2,this.v1).normalize()}getTangentAt(n,s){return this.getTangent(n,s)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class Z2 extends Ho{constructor(n=new sn,s=new sn,l=new sn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=n,this.v1=s,this.v2=l}getPoint(n,s=new sn){const l=s,f=this.v0,b=this.v1,I=this.v2;return l.set(Gd(n,f.x,b.x,I.x),Gd(n,f.y,b.y,I.y)),l}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class e3 extends Ho{constructor(n=new Ve,s=new Ve,l=new Ve){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=n,this.v1=s,this.v2=l}getPoint(n,s=new Ve){const l=s,f=this.v0,b=this.v1,I=this.v2;return l.set(Gd(n,f.x,b.x,I.x),Gd(n,f.y,b.y,I.y),Gd(n,f.z,b.z,I.z)),l}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class t3 extends Ho{constructor(n=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=n}getPoint(n,s=new sn){const l=s,f=this.points,b=(f.length-1)*n,I=Math.floor(b),R=b-I,U=f[I===0?I:I-1],V=f[I],$=f[I>f.length-2?f.length-1:I+1],Z=f[I>f.length-3?f.length-1:I+2];return l.set(PM(R,U.x,V.x,$.x,Z.x),PM(R,U.y,V.y,$.y,Z.y)),l}copy(n){super.copy(n),this.points=[];for(let s=0,l=n.points.length;s<l;s++){const f=n.points[s];this.points.push(f.clone())}return this}toJSON(){const n=super.toJSON();n.points=[];for(let s=0,l=this.points.length;s<l;s++){const f=this.points[s];n.points.push(f.toArray())}return n}fromJSON(n){super.fromJSON(n),this.points=[];for(let s=0,l=n.points.length;s<l;s++){const f=n.points[s];this.points.push(new sn().fromArray(f))}return this}}var rp=Object.freeze({__proto__:null,ArcCurve:DM,CatmullRomCurve3:LM,CubicBezierCurve:q2,CubicBezierCurve3:NM,EllipseCurve:np,LineCurve:J2,LineCurve3:FM,QuadraticBezierCurve:Z2,QuadraticBezierCurve3:e3,SplineCurve:t3});class kM extends Ho{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(n){this.curves.push(n)}closePath(){const n=this.curves[0].getPoint(0),s=this.curves[this.curves.length-1].getPoint(1);if(!n.equals(s)){const l=n.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new rp[l](s,n))}return this}getPoint(n,s){const l=n*this.getLength(),f=this.getCurveLengths();let b=0;for(;b<f.length;){if(f[b]>=l){const I=f[b]-l,R=this.curves[b],U=R.getLength(),V=U===0?0:1-I/U;return R.getPointAt(V,s)}b++}return null}getLength(){const n=this.getCurveLengths();return n[n.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const n=[];let s=0;for(let l=0,f=this.curves.length;l<f;l++)s+=this.curves[l].getLength(),n.push(s);return this.cacheLengths=n,n}getSpacedPoints(n=40){const s=[];for(let l=0;l<=n;l++)s.push(this.getPoint(l/n));return this.autoClose&&s.push(s[0]),s}getPoints(n=12){const s=[];let l;for(let f=0,b=this.curves;f<b.length;f++){const I=b[f],R=I.isEllipseCurve?n*2:I.isLineCurve||I.isLineCurve3?1:I.isSplineCurve?n*I.points.length:n,U=I.getPoints(R);for(let V=0;V<U.length;V++){const $=U[V];l&&l.equals($)||(s.push($),l=$)}}return this.autoClose&&s.length>1&&!s[s.length-1].equals(s[0])&&s.push(s[0]),s}copy(n){super.copy(n),this.curves=[];for(let s=0,l=n.curves.length;s<l;s++){const f=n.curves[s];this.curves.push(f.clone())}return this.autoClose=n.autoClose,this}toJSON(){const n=super.toJSON();n.autoClose=this.autoClose,n.curves=[];for(let s=0,l=this.curves.length;s<l;s++){const f=this.curves[s];n.curves.push(f.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.autoClose=n.autoClose,this.curves=[];for(let s=0,l=n.curves.length;s<l;s++){const f=n.curves[s];this.curves.push(new rp[f.type]().fromJSON(f))}return this}}class Qd extends kM{constructor(n){super(),this.type="Path",this.currentPoint=new sn,n&&this.setFromPoints(n)}setFromPoints(n){this.moveTo(n[0].x,n[0].y);for(let s=1,l=n.length;s<l;s++)this.lineTo(n[s].x,n[s].y);return this}moveTo(n,s){return this.currentPoint.set(n,s),this}lineTo(n,s){const l=new J2(this.currentPoint.clone(),new sn(n,s));return this.curves.push(l),this.currentPoint.set(n,s),this}quadraticCurveTo(n,s,l,f){const b=new Z2(this.currentPoint.clone(),new sn(n,s),new sn(l,f));return this.curves.push(b),this.currentPoint.set(l,f),this}bezierCurveTo(n,s,l,f,b,I){const R=new q2(this.currentPoint.clone(),new sn(n,s),new sn(l,f),new sn(b,I));return this.curves.push(R),this.currentPoint.set(b,I),this}splineThru(n){const s=[this.currentPoint.clone()].concat(n),l=new t3(s);return this.curves.push(l),this.currentPoint.copy(n[n.length-1]),this}arc(n,s,l,f,b,I){const R=this.currentPoint.x,U=this.currentPoint.y;return this.absarc(n+R,s+U,l,f,b,I),this}absarc(n,s,l,f,b,I){return this.absellipse(n,s,l,l,f,b,I),this}ellipse(n,s,l,f,b,I,R,U){const V=this.currentPoint.x,$=this.currentPoint.y;return this.absellipse(n+V,s+$,l,f,b,I,R,U),this}absellipse(n,s,l,f,b,I,R,U){const V=new np(n,s,l,f,b,I,R,U);if(this.curves.length>0){const Z=V.getPoint(0);Z.equals(this.currentPoint)||this.lineTo(Z.x,Z.y)}this.curves.push(V);const $=V.getPoint(1);return this.currentPoint.copy($),this}copy(n){return super.copy(n),this.currentPoint.copy(n.currentPoint),this}toJSON(){const n=super.toJSON();return n.currentPoint=this.currentPoint.toArray(),n}fromJSON(n){return super.fromJSON(n),this.currentPoint.fromArray(n.currentPoint),this}}class Hd extends Zi{constructor(n=[new sn(0,-.5),new sn(.5,0),new sn(0,.5)],s=12,l=0,f=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:n,segments:s,phiStart:l,phiLength:f},s=Math.floor(s),f=hs(f,0,Math.PI*2);const b=[],I=[],R=[],U=[],V=[],$=1/s,Z=new Ve,ee=new sn,te=new Ve,ae=new Ve,he=new Ve;let oe=0,ne=0;for(let Ie=0;Ie<=n.length-1;Ie++)switch(Ie){case 0:oe=n[Ie+1].x-n[Ie].x,ne=n[Ie+1].y-n[Ie].y,te.x=ne*1,te.y=-oe,te.z=ne*0,he.copy(te),te.normalize(),U.push(te.x,te.y,te.z);break;case n.length-1:U.push(he.x,he.y,he.z);break;default:oe=n[Ie+1].x-n[Ie].x,ne=n[Ie+1].y-n[Ie].y,te.x=ne*1,te.y=-oe,te.z=ne*0,ae.copy(te),te.x+=he.x,te.y+=he.y,te.z+=he.z,te.normalize(),U.push(te.x,te.y,te.z),he.copy(ae)}for(let Ie=0;Ie<=s;Ie++){const Ce=l+Ie*$*f,Me=Math.sin(Ce),Je=Math.cos(Ce);for(let Qe=0;Qe<=n.length-1;Qe++){Z.x=n[Qe].x*Me,Z.y=n[Qe].y,Z.z=n[Qe].x*Je,I.push(Z.x,Z.y,Z.z),ee.x=Ie/s,ee.y=Qe/(n.length-1),R.push(ee.x,ee.y);const je=U[3*Qe+0]*Me,Ye=U[3*Qe+1],Pe=U[3*Qe+0]*Je;V.push(je,Ye,Pe)}}for(let Ie=0;Ie<s;Ie++)for(let Ce=0;Ce<n.length-1;Ce++){const Me=Ce+Ie*n.length,Je=Me,Qe=Me+n.length,je=Me+n.length+1,Ye=Me+1;b.push(Je,Qe,Ye),b.push(je,Ye,Qe)}this.setIndex(b),this.setAttribute("position",new ai(I,3)),this.setAttribute("uv",new ai(R,2)),this.setAttribute("normal",new ai(V,3))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new Hd(n.points,n.segments,n.phiStart,n.phiLength)}}class sp extends Hd{constructor(n=1,s=1,l=4,f=8){const b=new Qd;b.absarc(0,-s/2,n,Math.PI*1.5,0),b.absarc(0,s/2,n,0,Math.PI*.5),super(b.getPoints(l),f),this.type="CapsuleGeometry",this.parameters={radius:n,length:s,capSegments:l,radialSegments:f}}static fromJSON(n){return new sp(n.radius,n.length,n.capSegments,n.radialSegments)}}class ap extends Zi{constructor(n=1,s=32,l=0,f=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:n,segments:s,thetaStart:l,thetaLength:f},s=Math.max(3,s);const b=[],I=[],R=[],U=[],V=new Ve,$=new sn;I.push(0,0,0),R.push(0,0,1),U.push(.5,.5);for(let Z=0,ee=3;Z<=s;Z++,ee+=3){const te=l+Z/s*f;V.x=n*Math.cos(te),V.y=n*Math.sin(te),I.push(V.x,V.y,V.z),R.push(0,0,1),$.x=(I[ee]/n+1)/2,$.y=(I[ee+1]/n+1)/2,U.push($.x,$.y)}for(let Z=1;Z<=s;Z++)b.push(Z,Z+1,0);this.setIndex(b),this.setAttribute("position",new ai(I,3)),this.setAttribute("normal",new ai(R,3)),this.setAttribute("uv",new ai(U,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new ap(n.radius,n.segments,n.thetaStart,n.thetaLength)}}class rh extends Zi{constructor(n=1,s=1,l=1,f=32,b=1,I=!1,R=0,U=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:n,radiusBottom:s,height:l,radialSegments:f,heightSegments:b,openEnded:I,thetaStart:R,thetaLength:U};const V=this;f=Math.floor(f),b=Math.floor(b);const $=[],Z=[],ee=[],te=[];let ae=0;const he=[],oe=l/2;let ne=0;Ie(),I===!1&&(n>0&&Ce(!0),s>0&&Ce(!1)),this.setIndex($),this.setAttribute("position",new ai(Z,3)),this.setAttribute("normal",new ai(ee,3)),this.setAttribute("uv",new ai(te,2));function Ie(){const Me=new Ve,Je=new Ve;let Qe=0;const je=(s-n)/l;for(let Ye=0;Ye<=b;Ye++){const Pe=[],Re=Ye/b,qe=Re*(s-n)+n;for(let At=0;At<=f;At++){const lt=At/f,bt=lt*U+R,kt=Math.sin(bt),tn=Math.cos(bt);Je.x=qe*kt,Je.y=-Re*l+oe,Je.z=qe*tn,Z.push(Je.x,Je.y,Je.z),Me.set(kt,je,tn).normalize(),ee.push(Me.x,Me.y,Me.z),te.push(lt,1-Re),Pe.push(ae++)}he.push(Pe)}for(let Ye=0;Ye<f;Ye++)for(let Pe=0;Pe<b;Pe++){const Re=he[Pe][Ye],qe=he[Pe+1][Ye],At=he[Pe+1][Ye+1],lt=he[Pe][Ye+1];$.push(Re,qe,lt),$.push(qe,At,lt),Qe+=6}V.addGroup(ne,Qe,0),ne+=Qe}function Ce(Me){const Je=ae,Qe=new sn,je=new Ve;let Ye=0;const Pe=Me===!0?n:s,Re=Me===!0?1:-1;for(let At=1;At<=f;At++)Z.push(0,oe*Re,0),ee.push(0,Re,0),te.push(.5,.5),ae++;const qe=ae;for(let At=0;At<=f;At++){const bt=At/f*U+R,kt=Math.cos(bt),tn=Math.sin(bt);je.x=Pe*tn,je.y=oe*Re,je.z=Pe*kt,Z.push(je.x,je.y,je.z),ee.push(0,Re,0),Qe.x=kt*.5+.5,Qe.y=tn*.5*Re+.5,te.push(Qe.x,Qe.y),ae++}for(let At=0;At<f;At++){const lt=Je+At,bt=qe+At;Me===!0?$.push(bt,bt+1,lt):$.push(bt+1,bt,lt),Ye+=3}V.addGroup(ne,Ye,Me===!0?1:2),ne+=Ye}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new rh(n.radiusTop,n.radiusBottom,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class op extends rh{constructor(n=1,s=1,l=32,f=1,b=!1,I=0,R=Math.PI*2){super(0,n,s,l,f,b,I,R),this.type="ConeGeometry",this.parameters={radius:n,height:s,radialSegments:l,heightSegments:f,openEnded:b,thetaStart:I,thetaLength:R}}static fromJSON(n){return new op(n.radius,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class Nc extends Zi{constructor(n=[],s=[],l=1,f=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:n,indices:s,radius:l,detail:f};const b=[],I=[];R(f),V(l),$(),this.setAttribute("position",new ai(b,3)),this.setAttribute("normal",new ai(b.slice(),3)),this.setAttribute("uv",new ai(I,2)),f===0?this.computeVertexNormals():this.normalizeNormals();function R(Ie){const Ce=new Ve,Me=new Ve,Je=new Ve;for(let Qe=0;Qe<s.length;Qe+=3)te(s[Qe+0],Ce),te(s[Qe+1],Me),te(s[Qe+2],Je),U(Ce,Me,Je,Ie)}function U(Ie,Ce,Me,Je){const Qe=Je+1,je=[];for(let Ye=0;Ye<=Qe;Ye++){je[Ye]=[];const Pe=Ie.clone().lerp(Me,Ye/Qe),Re=Ce.clone().lerp(Me,Ye/Qe),qe=Qe-Ye;for(let At=0;At<=qe;At++)At===0&&Ye===Qe?je[Ye][At]=Pe:je[Ye][At]=Pe.clone().lerp(Re,At/qe)}for(let Ye=0;Ye<Qe;Ye++)for(let Pe=0;Pe<2*(Qe-Ye)-1;Pe++){const Re=Math.floor(Pe/2);Pe%2===0?(ee(je[Ye][Re+1]),ee(je[Ye+1][Re]),ee(je[Ye][Re])):(ee(je[Ye][Re+1]),ee(je[Ye+1][Re+1]),ee(je[Ye+1][Re]))}}function V(Ie){const Ce=new Ve;for(let Me=0;Me<b.length;Me+=3)Ce.x=b[Me+0],Ce.y=b[Me+1],Ce.z=b[Me+2],Ce.normalize().multiplyScalar(Ie),b[Me+0]=Ce.x,b[Me+1]=Ce.y,b[Me+2]=Ce.z}function $(){const Ie=new Ve;for(let Ce=0;Ce<b.length;Ce+=3){Ie.x=b[Ce+0],Ie.y=b[Ce+1],Ie.z=b[Ce+2];const Me=oe(Ie)/2/Math.PI+.5,Je=ne(Ie)/Math.PI+.5;I.push(Me,1-Je)}ae(),Z()}function Z(){for(let Ie=0;Ie<I.length;Ie+=6){const Ce=I[Ie+0],Me=I[Ie+2],Je=I[Ie+4],Qe=Math.max(Ce,Me,Je),je=Math.min(Ce,Me,Je);Qe>.9&&je<.1&&(Ce<.2&&(I[Ie+0]+=1),Me<.2&&(I[Ie+2]+=1),Je<.2&&(I[Ie+4]+=1))}}function ee(Ie){b.push(Ie.x,Ie.y,Ie.z)}function te(Ie,Ce){const Me=Ie*3;Ce.x=n[Me+0],Ce.y=n[Me+1],Ce.z=n[Me+2]}function ae(){const Ie=new Ve,Ce=new Ve,Me=new Ve,Je=new Ve,Qe=new sn,je=new sn,Ye=new sn;for(let Pe=0,Re=0;Pe<b.length;Pe+=9,Re+=6){Ie.set(b[Pe+0],b[Pe+1],b[Pe+2]),Ce.set(b[Pe+3],b[Pe+4],b[Pe+5]),Me.set(b[Pe+6],b[Pe+7],b[Pe+8]),Qe.set(I[Re+0],I[Re+1]),je.set(I[Re+2],I[Re+3]),Ye.set(I[Re+4],I[Re+5]),Je.copy(Ie).add(Ce).add(Me).divideScalar(3);const qe=oe(Je);he(Qe,Re+0,Ie,qe),he(je,Re+2,Ce,qe),he(Ye,Re+4,Me,qe)}}function he(Ie,Ce,Me,Je){Je<0&&Ie.x===1&&(I[Ce]=Ie.x-1),Me.x===0&&Me.z===0&&(I[Ce]=Je/2/Math.PI+.5)}function oe(Ie){return Math.atan2(Ie.z,-Ie.x)}function ne(Ie){return Math.atan2(-Ie.y,Math.sqrt(Ie.x*Ie.x+Ie.z*Ie.z))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new Nc(n.vertices,n.indices,n.radius,n.details)}}class lp extends Nc{constructor(n=1,s=0){const l=(1+Math.sqrt(5))/2,f=1/l,b=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-f,-l,0,-f,l,0,f,-l,0,f,l,-f,-l,0,-f,l,0,f,-l,0,f,l,0,-l,0,-f,l,0,-f,-l,0,f,l,0,f],I=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(b,I,n,s),this.type="DodecahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new lp(n.radius,n.detail)}}const cp=new Ve,up=new Ve,n3=new Ve,hp=new oo;class UM extends Zi{constructor(n=null,s=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:n,thresholdAngle:s},n!==null){const f=Math.pow(10,4),b=Math.cos(Gl*s),I=n.getIndex(),R=n.getAttribute("position"),U=I?I.count:R.count,V=[0,0,0],$=["a","b","c"],Z=new Array(3),ee={},te=[];for(let ae=0;ae<U;ae+=3){I?(V[0]=I.getX(ae),V[1]=I.getX(ae+1),V[2]=I.getX(ae+2)):(V[0]=ae,V[1]=ae+1,V[2]=ae+2);const{a:he,b:oe,c:ne}=hp;if(he.fromBufferAttribute(R,V[0]),oe.fromBufferAttribute(R,V[1]),ne.fromBufferAttribute(R,V[2]),hp.getNormal(n3),Z[0]=`${Math.round(he.x*f)},${Math.round(he.y*f)},${Math.round(he.z*f)}`,Z[1]=`${Math.round(oe.x*f)},${Math.round(oe.y*f)},${Math.round(oe.z*f)}`,Z[2]=`${Math.round(ne.x*f)},${Math.round(ne.y*f)},${Math.round(ne.z*f)}`,!(Z[0]===Z[1]||Z[1]===Z[2]||Z[2]===Z[0]))for(let Ie=0;Ie<3;Ie++){const Ce=(Ie+1)%3,Me=Z[Ie],Je=Z[Ce],Qe=hp[$[Ie]],je=hp[$[Ce]],Ye=`${Me}_${Je}`,Pe=`${Je}_${Me}`;Pe in ee&&ee[Pe]?(n3.dot(ee[Pe].normal)<=b&&(te.push(Qe.x,Qe.y,Qe.z),te.push(je.x,je.y,je.z)),ee[Pe]=null):Ye in ee||(ee[Ye]={index0:V[Ie],index1:V[Ce],normal:n3.clone()})}}for(const ae in ee)if(ee[ae]){const{index0:he,index1:oe}=ee[ae];cp.fromBufferAttribute(R,he),up.fromBufferAttribute(R,oe),te.push(cp.x,cp.y,cp.z),te.push(up.x,up.y,up.z)}this.setAttribute("position",new ai(te,3))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}}class Pu extends Qd{constructor(n){super(n),this.uuid=Sa(),this.type="Shape",this.holes=[]}getPointsHoles(n){const s=[];for(let l=0,f=this.holes.length;l<f;l++)s[l]=this.holes[l].getPoints(n);return s}extractPoints(n){return{shape:this.getPoints(n),holes:this.getPointsHoles(n)}}copy(n){super.copy(n),this.holes=[];for(let s=0,l=n.holes.length;s<l;s++){const f=n.holes[s];this.holes.push(f.clone())}return this}toJSON(){const n=super.toJSON();n.uuid=this.uuid,n.holes=[];for(let s=0,l=this.holes.length;s<l;s++){const f=this.holes[s];n.holes.push(f.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.uuid=n.uuid,this.holes=[];for(let s=0,l=n.holes.length;s<l;s++){const f=n.holes[s];this.holes.push(new Qd().fromJSON(f))}return this}}const Tk={triangulate:function(M,n,s=2){const l=n&&n.length,f=l?n[0]*s:M.length;let b=GM(M,0,f,s,!0);const I=[];if(!b||b.next===b.prev)return I;let R,U,V,$,Z,ee,te;if(l&&(b=Lk(M,n,b,s)),M.length>80*s){R=V=M[0],U=$=M[1];for(let ae=s;ae<f;ae+=s)Z=M[ae],ee=M[ae+1],Z<R&&(R=Z),ee<U&&(U=ee),Z>V&&(V=Z),ee>$&&($=ee);te=Math.max(V-R,$-U),te=te!==0?32767/te:0}return zd(b,I,s,R,U,te,0),I}};function GM(M,n,s,l,f){let b,I;if(f===Wk(M,n,s,l)>0)for(b=n;b<s;b+=l)I=HM(b,M[b],M[b+1],I);else for(b=s-l;b>=n;b-=l)I=HM(b,M[b],M[b+1],I);return I&&dp(I,I.next)&&(jd(I),I=I.next),I}function Nu(M,n){if(!M)return M;n||(n=M);let s=M,l;do if(l=!1,!s.steiner&&(dp(s,s.next)||ms(s.prev,s,s.next)===0)){if(jd(s),s=n=s.prev,s===s.next)break;l=!0}else s=s.next;while(l||s!==n);return n}function zd(M,n,s,l,f,b,I){if(!M)return;!I&&b&&Uk(M,l,f,b);let R=M,U,V;for(;M.prev!==M.next;){if(U=M.prev,V=M.next,b?Rk(M,l,f,b):Bk(M)){n.push(U.i/s|0),n.push(M.i/s|0),n.push(V.i/s|0),jd(M),M=V.next,R=V.next;continue}if(M=V,M===R){I?I===1?(M=Ok(Nu(M),n,s),zd(M,n,s,l,f,b,2)):I===2&&Dk(M,n,s,l,f,b):zd(Nu(M),n,s,l,f,b,1);break}}}function Bk(M){const n=M.prev,s=M,l=M.next;if(ms(n,s,l)>=0)return!1;const f=n.x,b=s.x,I=l.x,R=n.y,U=s.y,V=l.y,$=f<b?f<I?f:I:b<I?b:I,Z=R<U?R<V?R:V:U<V?U:V,ee=f>b?f>I?f:I:b>I?b:I,te=R>U?R>V?R:V:U>V?U:V;let ae=l.next;for(;ae!==n;){if(ae.x>=$&&ae.x<=ee&&ae.y>=Z&&ae.y<=te&&sh(f,R,b,U,I,V,ae.x,ae.y)&&ms(ae.prev,ae,ae.next)>=0)return!1;ae=ae.next}return!0}function Rk(M,n,s,l){const f=M.prev,b=M,I=M.next;if(ms(f,b,I)>=0)return!1;const R=f.x,U=b.x,V=I.x,$=f.y,Z=b.y,ee=I.y,te=R<U?R<V?R:V:U<V?U:V,ae=$<Z?$<ee?$:ee:Z<ee?Z:ee,he=R>U?R>V?R:V:U>V?U:V,oe=$>Z?$>ee?$:ee:Z>ee?Z:ee,ne=i3(te,ae,n,s,l),Ie=i3(he,oe,n,s,l);let Ce=M.prevZ,Me=M.nextZ;for(;Ce&&Ce.z>=ne&&Me&&Me.z<=Ie;){if(Ce.x>=te&&Ce.x<=he&&Ce.y>=ae&&Ce.y<=oe&&Ce!==f&&Ce!==I&&sh(R,$,U,Z,V,ee,Ce.x,Ce.y)&&ms(Ce.prev,Ce,Ce.next)>=0||(Ce=Ce.prevZ,Me.x>=te&&Me.x<=he&&Me.y>=ae&&Me.y<=oe&&Me!==f&&Me!==I&&sh(R,$,U,Z,V,ee,Me.x,Me.y)&&ms(Me.prev,Me,Me.next)>=0))return!1;Me=Me.nextZ}for(;Ce&&Ce.z>=ne;){if(Ce.x>=te&&Ce.x<=he&&Ce.y>=ae&&Ce.y<=oe&&Ce!==f&&Ce!==I&&sh(R,$,U,Z,V,ee,Ce.x,Ce.y)&&ms(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.prevZ}for(;Me&&Me.z<=Ie;){if(Me.x>=te&&Me.x<=he&&Me.y>=ae&&Me.y<=oe&&Me!==f&&Me!==I&&sh(R,$,U,Z,V,ee,Me.x,Me.y)&&ms(Me.prev,Me,Me.next)>=0)return!1;Me=Me.nextZ}return!0}function Ok(M,n,s){let l=M;do{const f=l.prev,b=l.next.next;!dp(f,b)&&VM(f,l,l.next,b)&&Wd(f,b)&&Wd(b,f)&&(n.push(f.i/s|0),n.push(l.i/s|0),n.push(b.i/s|0),jd(l),jd(l.next),l=M=b),l=l.next}while(l!==M);return Nu(l)}function Dk(M,n,s,l,f,b){let I=M;do{let R=I.next.next;for(;R!==I.prev;){if(I.i!==R.i&&Qk(I,R)){let U=QM(I,R);I=Nu(I,I.next),U=Nu(U,U.next),zd(I,n,s,l,f,b,0),zd(U,n,s,l,f,b,0);return}R=R.next}I=I.next}while(I!==M)}function Lk(M,n,s,l){const f=[];let b,I,R,U,V;for(b=0,I=n.length;b<I;b++)R=n[b]*l,U=b<I-1?n[b+1]*l:M.length,V=GM(M,R,U,l,!1),V===V.next&&(V.steiner=!0),f.push(Vk(V));for(f.sort(Pk),b=0;b<f.length;b++)s=Nk(f[b],s);return s}function Pk(M,n){return M.x-n.x}function Nk(M,n){const s=Fk(M,n);if(!s)return n;const l=QM(s,M);return Nu(l,l.next),Nu(s,s.next)}function Fk(M,n){let s=n,l=-1/0,f;const b=M.x,I=M.y;do{if(I<=s.y&&I>=s.next.y&&s.next.y!==s.y){const ee=s.x+(I-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(ee<=b&&ee>l&&(l=ee,f=s.x<s.next.x?s:s.next,ee===b))return f}s=s.next}while(s!==n);if(!f)return null;const R=f,U=f.x,V=f.y;let $=1/0,Z;s=f;do b>=s.x&&s.x>=U&&b!==s.x&&sh(I<V?b:l,I,U,V,I<V?l:b,I,s.x,s.y)&&(Z=Math.abs(I-s.y)/(b-s.x),Wd(s,M)&&(Z<$||Z===$&&(s.x>f.x||s.x===f.x&&kk(f,s)))&&(f=s,$=Z)),s=s.next;while(s!==R);return f}function kk(M,n){return ms(M.prev,M,n.prev)<0&&ms(n.next,M,M.next)<0}function Uk(M,n,s,l){let f=M;do f.z===0&&(f.z=i3(f.x,f.y,n,s,l)),f.prevZ=f.prev,f.nextZ=f.next,f=f.next;while(f!==M);f.prevZ.nextZ=null,f.prevZ=null,Gk(f)}function Gk(M){let n,s,l,f,b,I,R,U,V=1;do{for(s=M,M=null,b=null,I=0;s;){for(I++,l=s,R=0,n=0;n<V&&(R++,l=l.nextZ,!!l);n++);for(U=V;R>0||U>0&&l;)R!==0&&(U===0||!l||s.z<=l.z)?(f=s,s=s.nextZ,R--):(f=l,l=l.nextZ,U--),b?b.nextZ=f:M=f,f.prevZ=b,b=f;s=l}b.nextZ=null,V*=2}while(I>1);return M}function i3(M,n,s,l,f){return M=(M-s)*f|0,n=(n-l)*f|0,M=(M|M<<8)&16711935,M=(M|M<<4)&252645135,M=(M|M<<2)&858993459,M=(M|M<<1)&1431655765,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,M|n<<1}function Vk(M){let n=M,s=M;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==M);return s}function sh(M,n,s,l,f,b,I,R){return(f-I)*(n-R)>=(M-I)*(b-R)&&(M-I)*(l-R)>=(s-I)*(n-R)&&(s-I)*(b-R)>=(f-I)*(l-R)}function Qk(M,n){return M.next.i!==n.i&&M.prev.i!==n.i&&!Hk(M,n)&&(Wd(M,n)&&Wd(n,M)&&zk(M,n)&&(ms(M.prev,M,n.prev)||ms(M,n.prev,n))||dp(M,n)&&ms(M.prev,M,M.next)>0&&ms(n.prev,n,n.next)>0)}function ms(M,n,s){return(n.y-M.y)*(s.x-n.x)-(n.x-M.x)*(s.y-n.y)}function dp(M,n){return M.x===n.x&&M.y===n.y}function VM(M,n,s,l){const f=mp(ms(M,n,s)),b=mp(ms(M,n,l)),I=mp(ms(s,l,M)),R=mp(ms(s,l,n));return!!(f!==b&&I!==R||f===0&&fp(M,s,n)||b===0&&fp(M,l,n)||I===0&&fp(s,M,l)||R===0&&fp(s,n,l))}function fp(M,n,s){return n.x<=Math.max(M.x,s.x)&&n.x>=Math.min(M.x,s.x)&&n.y<=Math.max(M.y,s.y)&&n.y>=Math.min(M.y,s.y)}function mp(M){return M>0?1:M<0?-1:0}function Hk(M,n){let s=M;do{if(s.i!==M.i&&s.next.i!==M.i&&s.i!==n.i&&s.next.i!==n.i&&VM(s,s.next,M,n))return!0;s=s.next}while(s!==M);return!1}function Wd(M,n){return ms(M.prev,M,M.next)<0?ms(M,n,M.next)>=0&&ms(M,M.prev,n)>=0:ms(M,n,M.prev)<0||ms(M,M.next,n)<0}function zk(M,n){let s=M,l=!1;const f=(M.x+n.x)/2,b=(M.y+n.y)/2;do s.y>b!=s.next.y>b&&s.next.y!==s.y&&f<(s.next.x-s.x)*(b-s.y)/(s.next.y-s.y)+s.x&&(l=!l),s=s.next;while(s!==M);return l}function QM(M,n){const s=new r3(M.i,M.x,M.y),l=new r3(n.i,n.x,n.y),f=M.next,b=n.prev;return M.next=n,n.prev=M,s.next=f,f.prev=s,l.next=s,s.prev=l,b.next=l,l.prev=b,l}function HM(M,n,s,l){const f=new r3(M,n,s);return l?(f.next=l.next,f.prev=l,l.next.prev=f,l.next=f):(f.prev=f,f.next=f),f}function jd(M){M.next.prev=M.prev,M.prev.next=M.next,M.prevZ&&(M.prevZ.nextZ=M.nextZ),M.nextZ&&(M.nextZ.prevZ=M.prevZ)}function r3(M,n,s){this.i=M,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wk(M,n,s,l){let f=0;for(let b=n,I=s-l;b<s;b+=l)f+=(M[I]-M[b])*(M[b+1]+M[I+1]),I=b;return f}class dl{static area(n){const s=n.length;let l=0;for(let f=s-1,b=0;b<s;f=b++)l+=n[f].x*n[b].y-n[b].x*n[f].y;return l*.5}static isClockWise(n){return dl.area(n)<0}static triangulateShape(n,s){const l=[],f=[],b=[];zM(n),WM(l,n);let I=n.length;s.forEach(zM);for(let U=0;U<s.length;U++)f.push(I),I+=s[U].length,WM(l,s[U]);const R=Tk.triangulate(l,f);for(let U=0;U<R.length;U+=3)b.push(R.slice(U,U+3));return b}}function zM(M){const n=M.length;n>2&&M[n-1].equals(M[0])&&M.pop()}function WM(M,n){for(let s=0;s<n.length;s++)M.push(n[s].x),M.push(n[s].y)}class pp extends Zi{constructor(n=new Pu([new sn(.5,.5),new sn(-.5,.5),new sn(-.5,-.5),new sn(.5,-.5)]),s={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:n,options:s},n=Array.isArray(n)?n:[n];const l=this,f=[],b=[];for(let R=0,U=n.length;R<U;R++){const V=n[R];I(V)}this.setAttribute("position",new ai(f,3)),this.setAttribute("uv",new ai(b,2)),this.computeVertexNormals();function I(R){const U=[],V=s.curveSegments!==void 0?s.curveSegments:12,$=s.steps!==void 0?s.steps:1,Z=s.depth!==void 0?s.depth:1;let ee=s.bevelEnabled!==void 0?s.bevelEnabled:!0,te=s.bevelThickness!==void 0?s.bevelThickness:.2,ae=s.bevelSize!==void 0?s.bevelSize:te-.1,he=s.bevelOffset!==void 0?s.bevelOffset:0,oe=s.bevelSegments!==void 0?s.bevelSegments:3;const ne=s.extrudePath,Ie=s.UVGenerator!==void 0?s.UVGenerator:jk;let Ce,Me=!1,Je,Qe,je,Ye;ne&&(Ce=ne.getSpacedPoints($),Me=!0,ee=!1,Je=ne.computeFrenetFrames($,!1),Qe=new Ve,je=new Ve,Ye=new Ve),ee||(oe=0,te=0,ae=0,he=0);const Pe=R.extractPoints(V);let Re=Pe.shape;const qe=Pe.holes;if(!dl.isClockWise(Re)){Re=Re.reverse();for(let cn=0,Xt=qe.length;cn<Xt;cn++){const vn=qe[cn];dl.isClockWise(vn)&&(qe[cn]=vn.reverse())}}const lt=dl.triangulateShape(Re,qe),bt=Re;for(let cn=0,Xt=qe.length;cn<Xt;cn++){const vn=qe[cn];Re=Re.concat(vn)}function kt(cn,Xt,vn){return Xt||console.error("THREE.ExtrudeGeometry: vec does not exist"),cn.clone().addScaledVector(Xt,vn)}const tn=Re.length,In=lt.length;function Gt(cn,Xt,vn){let An,pn,kn;const Xn=cn.x-Xt.x,Ii=cn.y-Xt.y,Ni=vn.x-cn.x,wr=vn.y-cn.y,ps=Xn*Xn+Ii*Ii,rs=Xn*wr-Ii*Ni;if(Math.abs(rs)>Number.EPSILON){const Xe=Math.sqrt(ps),Oe=Math.sqrt(Ni*Ni+wr*wr),zt=Xt.x-Ii/Xe,an=Xt.y+Xn/Xe,fn=vn.x-wr/Oe,un=vn.y+Ni/Oe,oi=((fn-zt)*wr-(un-an)*Ni)/(Xn*wr-Ii*Ni);An=zt+Xn*oi-cn.x,pn=an+Ii*oi-cn.y;const Tn=An*An+pn*pn;if(Tn<=2)return new sn(An,pn);kn=Math.sqrt(Tn/2)}else{let Xe=!1;Xn>Number.EPSILON?Ni>Number.EPSILON&&(Xe=!0):Xn<-Number.EPSILON?Ni<-Number.EPSILON&&(Xe=!0):Math.sign(Ii)===Math.sign(wr)&&(Xe=!0),Xe?(An=-Ii,pn=Xn,kn=Math.sqrt(ps)):(An=Xn,pn=Ii,kn=Math.sqrt(ps/2))}return new sn(An/kn,pn/kn)}const bn=[];for(let cn=0,Xt=bt.length,vn=Xt-1,An=cn+1;cn<Xt;cn++,vn++,An++)vn===Xt&&(vn=0),An===Xt&&(An=0),bn[cn]=Gt(bt[cn],bt[vn],bt[An]);const wn=[];let ti,er=bn.concat();for(let cn=0,Xt=qe.length;cn<Xt;cn++){const vn=qe[cn];ti=[];for(let An=0,pn=vn.length,kn=pn-1,Xn=An+1;An<pn;An++,kn++,Xn++)kn===pn&&(kn=0),Xn===pn&&(Xn=0),ti[An]=Gt(vn[An],vn[kn],vn[Xn]);wn.push(ti),er=er.concat(ti)}for(let cn=0;cn<oe;cn++){const Xt=cn/oe,vn=te*Math.cos(Xt*Math.PI/2),An=ae*Math.sin(Xt*Math.PI/2)+he;for(let pn=0,kn=bt.length;pn<kn;pn++){const Xn=kt(bt[pn],bn[pn],An);si(Xn.x,Xn.y,-vn)}for(let pn=0,kn=qe.length;pn<kn;pn++){const Xn=qe[pn];ti=wn[pn];for(let Ii=0,Ni=Xn.length;Ii<Ni;Ii++){const wr=kt(Xn[Ii],ti[Ii],An);si(wr.x,wr.y,-vn)}}}const Dr=ae+he;for(let cn=0;cn<tn;cn++){const Xt=ee?kt(Re[cn],er[cn],Dr):Re[cn];Me?(je.copy(Je.normals[0]).multiplyScalar(Xt.x),Qe.copy(Je.binormals[0]).multiplyScalar(Xt.y),Ye.copy(Ce[0]).add(je).add(Qe),si(Ye.x,Ye.y,Ye.z)):si(Xt.x,Xt.y,0)}for(let cn=1;cn<=$;cn++)for(let Xt=0;Xt<tn;Xt++){const vn=ee?kt(Re[Xt],er[Xt],Dr):Re[Xt];Me?(je.copy(Je.normals[cn]).multiplyScalar(vn.x),Qe.copy(Je.binormals[cn]).multiplyScalar(vn.y),Ye.copy(Ce[cn]).add(je).add(Qe),si(Ye.x,Ye.y,Ye.z)):si(vn.x,vn.y,Z/$*cn)}for(let cn=oe-1;cn>=0;cn--){const Xt=cn/oe,vn=te*Math.cos(Xt*Math.PI/2),An=ae*Math.sin(Xt*Math.PI/2)+he;for(let pn=0,kn=bt.length;pn<kn;pn++){const Xn=kt(bt[pn],bn[pn],An);si(Xn.x,Xn.y,Z+vn)}for(let pn=0,kn=qe.length;pn<kn;pn++){const Xn=qe[pn];ti=wn[pn];for(let Ii=0,Ni=Xn.length;Ii<Ni;Ii++){const wr=kt(Xn[Ii],ti[Ii],An);Me?si(wr.x,wr.y+Ce[$-1].y,Ce[$-1].x+vn):si(wr.x,wr.y,Z+vn)}}}is(),Er();function is(){const cn=f.length/3;if(ee){let Xt=0,vn=tn*Xt;for(let An=0;An<In;An++){const pn=lt[An];ln(pn[2]+vn,pn[1]+vn,pn[0]+vn)}Xt=$+oe*2,vn=tn*Xt;for(let An=0;An<In;An++){const pn=lt[An];ln(pn[0]+vn,pn[1]+vn,pn[2]+vn)}}else{for(let Xt=0;Xt<In;Xt++){const vn=lt[Xt];ln(vn[2],vn[1],vn[0])}for(let Xt=0;Xt<In;Xt++){const vn=lt[Xt];ln(vn[0]+tn*$,vn[1]+tn*$,vn[2]+tn*$)}}l.addGroup(cn,f.length/3-cn,0)}function Er(){const cn=f.length/3;let Xt=0;$r(bt,Xt),Xt+=bt.length;for(let vn=0,An=qe.length;vn<An;vn++){const pn=qe[vn];$r(pn,Xt),Xt+=pn.length}l.addGroup(cn,f.length/3-cn,1)}function $r(cn,Xt){let vn=cn.length;for(;--vn>=0;){const An=vn;let pn=vn-1;pn<0&&(pn=cn.length-1);for(let kn=0,Xn=$+oe*2;kn<Xn;kn++){const Ii=tn*kn,Ni=tn*(kn+1),wr=Xt+An+Ii,ps=Xt+pn+Ii,rs=Xt+pn+Ni,Xe=Xt+An+Ni;Rn(wr,ps,rs,Xe)}}}function si(cn,Xt,vn){U.push(cn),U.push(Xt),U.push(vn)}function ln(cn,Xt,vn){Nn(cn),Nn(Xt),Nn(vn);const An=f.length/3,pn=Ie.generateTopUV(l,f,An-3,An-2,An-1);Mt(pn[0]),Mt(pn[1]),Mt(pn[2])}function Rn(cn,Xt,vn,An){Nn(cn),Nn(Xt),Nn(An),Nn(Xt),Nn(vn),Nn(An);const pn=f.length/3,kn=Ie.generateSideWallUV(l,f,pn-6,pn-3,pn-2,pn-1);Mt(kn[0]),Mt(kn[1]),Mt(kn[3]),Mt(kn[1]),Mt(kn[2]),Mt(kn[3])}function Nn(cn){f.push(U[cn*3+0]),f.push(U[cn*3+1]),f.push(U[cn*3+2])}function Mt(cn){b.push(cn.x),b.push(cn.y)}}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON(),s=this.parameters.shapes,l=this.parameters.options;return $k(s,l,n)}static fromJSON(n,s){const l=[];for(let b=0,I=n.shapes.length;b<I;b++){const R=s[n.shapes[b]];l.push(R)}const f=n.options.extrudePath;return f!==void 0&&(n.options.extrudePath=new rp[f.type]().fromJSON(f)),new pp(l,n.options)}}const jk={generateTopUV:function(M,n,s,l,f){const b=n[s*3],I=n[s*3+1],R=n[l*3],U=n[l*3+1],V=n[f*3],$=n[f*3+1];return[new sn(b,I),new sn(R,U),new sn(V,$)]},generateSideWallUV:function(M,n,s,l,f,b){const I=n[s*3],R=n[s*3+1],U=n[s*3+2],V=n[l*3],$=n[l*3+1],Z=n[l*3+2],ee=n[f*3],te=n[f*3+1],ae=n[f*3+2],he=n[b*3],oe=n[b*3+1],ne=n[b*3+2];return Math.abs(R-$)<Math.abs(I-V)?[new sn(I,1-U),new sn(V,1-Z),new sn(ee,1-ae),new sn(he,1-ne)]:[new sn(R,1-U),new sn($,1-Z),new sn(te,1-ae),new sn(oe,1-ne)]}};function $k(M,n,s){if(s.shapes=[],Array.isArray(M))for(let l=0,f=M.length;l<f;l++){const b=M[l];s.shapes.push(b.uuid)}else s.shapes.push(M.uuid);return s.options=Object.assign({},n),n.extrudePath!==void 0&&(s.options.extrudePath=n.extrudePath.toJSON()),s}class gp extends Nc{constructor(n=1,s=0){const l=(1+Math.sqrt(5))/2,f=[-1,l,0,1,l,0,-1,-l,0,1,-l,0,0,-1,l,0,1,l,0,-1,-l,0,1,-l,l,0,-1,l,0,1,-l,0,-1,-l,0,1],b=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(f,b,n,s),this.type="IcosahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new gp(n.radius,n.detail)}}class $d extends Nc{constructor(n=1,s=0){const l=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],f=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(l,f,n,s),this.type="OctahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new $d(n.radius,n.detail)}}class Ap extends Zi{constructor(n=.5,s=1,l=32,f=1,b=0,I=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:n,outerRadius:s,thetaSegments:l,phiSegments:f,thetaStart:b,thetaLength:I},l=Math.max(3,l),f=Math.max(1,f);const R=[],U=[],V=[],$=[];let Z=n;const ee=(s-n)/f,te=new Ve,ae=new sn;for(let he=0;he<=f;he++){for(let oe=0;oe<=l;oe++){const ne=b+oe/l*I;te.x=Z*Math.cos(ne),te.y=Z*Math.sin(ne),U.push(te.x,te.y,te.z),V.push(0,0,1),ae.x=(te.x/s+1)/2,ae.y=(te.y/s+1)/2,$.push(ae.x,ae.y)}Z+=ee}for(let he=0;he<f;he++){const oe=he*(l+1);for(let ne=0;ne<l;ne++){const Ie=ne+oe,Ce=Ie,Me=Ie+l+1,Je=Ie+l+2,Qe=Ie+1;R.push(Ce,Me,Qe),R.push(Me,Je,Qe)}}this.setIndex(R),this.setAttribute("position",new ai(U,3)),this.setAttribute("normal",new ai(V,3)),this.setAttribute("uv",new ai($,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new Ap(n.innerRadius,n.outerRadius,n.thetaSegments,n.phiSegments,n.thetaStart,n.thetaLength)}}class vp extends Zi{constructor(n=new Pu([new sn(0,.5),new sn(-.5,-.5),new sn(.5,-.5)]),s=12){super(),this.type="ShapeGeometry",this.parameters={shapes:n,curveSegments:s};const l=[],f=[],b=[],I=[];let R=0,U=0;if(Array.isArray(n)===!1)V(n);else for(let $=0;$<n.length;$++)V(n[$]),this.addGroup(R,U,$),R+=U,U=0;this.setIndex(l),this.setAttribute("position",new ai(f,3)),this.setAttribute("normal",new ai(b,3)),this.setAttribute("uv",new ai(I,2));function V($){const Z=f.length/3,ee=$.extractPoints(s);let te=ee.shape;const ae=ee.holes;dl.isClockWise(te)===!1&&(te=te.reverse());for(let oe=0,ne=ae.length;oe<ne;oe++){const Ie=ae[oe];dl.isClockWise(Ie)===!0&&(ae[oe]=Ie.reverse())}const he=dl.triangulateShape(te,ae);for(let oe=0,ne=ae.length;oe<ne;oe++){const Ie=ae[oe];te=te.concat(Ie)}for(let oe=0,ne=te.length;oe<ne;oe++){const Ie=te[oe];f.push(Ie.x,Ie.y,0),b.push(0,0,1),I.push(Ie.x,Ie.y)}for(let oe=0,ne=he.length;oe<ne;oe++){const Ie=he[oe],Ce=Ie[0]+Z,Me=Ie[1]+Z,Je=Ie[2]+Z;l.push(Ce,Me,Je),U+=3}}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON(),s=this.parameters.shapes;return Xk(s,n)}static fromJSON(n,s){const l=[];for(let f=0,b=n.shapes.length;f<b;f++){const I=s[n.shapes[f]];l.push(I)}return new vp(l,n.curveSegments)}}function Xk(M,n){if(n.shapes=[],Array.isArray(M))for(let s=0,l=M.length;s<l;s++){const f=M[s];n.shapes.push(f.uuid)}else n.shapes.push(M.uuid);return n}class Xd extends Zi{constructor(n=1,s=32,l=16,f=0,b=Math.PI*2,I=0,R=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:n,widthSegments:s,heightSegments:l,phiStart:f,phiLength:b,thetaStart:I,thetaLength:R},s=Math.max(3,Math.floor(s)),l=Math.max(2,Math.floor(l));const U=Math.min(I+R,Math.PI);let V=0;const $=[],Z=new Ve,ee=new Ve,te=[],ae=[],he=[],oe=[];for(let ne=0;ne<=l;ne++){const Ie=[],Ce=ne/l;let Me=0;ne===0&&I===0?Me=.5/s:ne===l&&U===Math.PI&&(Me=-.5/s);for(let Je=0;Je<=s;Je++){const Qe=Je/s;Z.x=-n*Math.cos(f+Qe*b)*Math.sin(I+Ce*R),Z.y=n*Math.cos(I+Ce*R),Z.z=n*Math.sin(f+Qe*b)*Math.sin(I+Ce*R),ae.push(Z.x,Z.y,Z.z),ee.copy(Z).normalize(),he.push(ee.x,ee.y,ee.z),oe.push(Qe+Me,1-Ce),Ie.push(V++)}$.push(Ie)}for(let ne=0;ne<l;ne++)for(let Ie=0;Ie<s;Ie++){const Ce=$[ne][Ie+1],Me=$[ne][Ie],Je=$[ne+1][Ie],Qe=$[ne+1][Ie+1];(ne!==0||I>0)&&te.push(Ce,Me,Qe),(ne!==l-1||U<Math.PI)&&te.push(Me,Je,Qe)}this.setIndex(te),this.setAttribute("position",new ai(ae,3)),this.setAttribute("normal",new ai(he,3)),this.setAttribute("uv",new ai(oe,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new Xd(n.radius,n.widthSegments,n.heightSegments,n.phiStart,n.phiLength,n.thetaStart,n.thetaLength)}}class yp extends Nc{constructor(n=1,s=0){const l=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],f=[2,1,0,0,3,2,1,3,0,2,3,1];super(l,f,n,s),this.type="TetrahedronGeometry",this.parameters={radius:n,detail:s}}static fromJSON(n){return new yp(n.radius,n.detail)}}class bp extends Zi{constructor(n=1,s=.4,l=12,f=48,b=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:n,tube:s,radialSegments:l,tubularSegments:f,arc:b},l=Math.floor(l),f=Math.floor(f);const I=[],R=[],U=[],V=[],$=new Ve,Z=new Ve,ee=new Ve;for(let te=0;te<=l;te++)for(let ae=0;ae<=f;ae++){const he=ae/f*b,oe=te/l*Math.PI*2;Z.x=(n+s*Math.cos(oe))*Math.cos(he),Z.y=(n+s*Math.cos(oe))*Math.sin(he),Z.z=s*Math.sin(oe),R.push(Z.x,Z.y,Z.z),$.x=n*Math.cos(he),$.y=n*Math.sin(he),ee.subVectors(Z,$).normalize(),U.push(ee.x,ee.y,ee.z),V.push(ae/f),V.push(te/l)}for(let te=1;te<=l;te++)for(let ae=1;ae<=f;ae++){const he=(f+1)*te+ae-1,oe=(f+1)*(te-1)+ae-1,ne=(f+1)*(te-1)+ae,Ie=(f+1)*te+ae;I.push(he,oe,Ie),I.push(oe,ne,Ie)}this.setIndex(I),this.setAttribute("position",new ai(R,3)),this.setAttribute("normal",new ai(U,3)),this.setAttribute("uv",new ai(V,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new bp(n.radius,n.tube,n.radialSegments,n.tubularSegments,n.arc)}}class Mp extends Zi{constructor(n=1,s=.4,l=64,f=8,b=2,I=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:n,tube:s,tubularSegments:l,radialSegments:f,p:b,q:I},l=Math.floor(l),f=Math.floor(f);const R=[],U=[],V=[],$=[],Z=new Ve,ee=new Ve,te=new Ve,ae=new Ve,he=new Ve,oe=new Ve,ne=new Ve;for(let Ce=0;Ce<=l;++Ce){const Me=Ce/l*b*Math.PI*2;Ie(Me,b,I,n,te),Ie(Me+.01,b,I,n,ae),oe.subVectors(ae,te),ne.addVectors(ae,te),he.crossVectors(oe,ne),ne.crossVectors(he,oe),he.normalize(),ne.normalize();for(let Je=0;Je<=f;++Je){const Qe=Je/f*Math.PI*2,je=-s*Math.cos(Qe),Ye=s*Math.sin(Qe);Z.x=te.x+(je*ne.x+Ye*he.x),Z.y=te.y+(je*ne.y+Ye*he.y),Z.z=te.z+(je*ne.z+Ye*he.z),U.push(Z.x,Z.y,Z.z),ee.subVectors(Z,te).normalize(),V.push(ee.x,ee.y,ee.z),$.push(Ce/l),$.push(Je/f)}}for(let Ce=1;Ce<=l;Ce++)for(let Me=1;Me<=f;Me++){const Je=(f+1)*(Ce-1)+(Me-1),Qe=(f+1)*Ce+(Me-1),je=(f+1)*Ce+Me,Ye=(f+1)*(Ce-1)+Me;R.push(Je,Qe,Ye),R.push(Qe,je,Ye)}this.setIndex(R),this.setAttribute("position",new ai(U,3)),this.setAttribute("normal",new ai(V,3)),this.setAttribute("uv",new ai($,2));function Ie(Ce,Me,Je,Qe,je){const Ye=Math.cos(Ce),Pe=Math.sin(Ce),Re=Je/Me*Ce,qe=Math.cos(Re);je.x=Qe*(2+qe)*.5*Ye,je.y=Qe*(2+qe)*Pe*.5,je.z=Qe*Math.sin(Re)*.5}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new Mp(n.radius,n.tube,n.tubularSegments,n.radialSegments,n.p,n.q)}}class _p extends Zi{constructor(n=new e3(new Ve(-1,-1,0),new Ve(-1,1,0),new Ve(1,1,0)),s=64,l=1,f=8,b=!1){super(),this.type="TubeGeometry",this.parameters={path:n,tubularSegments:s,radius:l,radialSegments:f,closed:b};const I=n.computeFrenetFrames(s,b);this.tangents=I.tangents,this.normals=I.normals,this.binormals=I.binormals;const R=new Ve,U=new Ve,V=new sn;let $=new Ve;const Z=[],ee=[],te=[],ae=[];he(),this.setIndex(ae),this.setAttribute("position",new ai(Z,3)),this.setAttribute("normal",new ai(ee,3)),this.setAttribute("uv",new ai(te,2));function he(){for(let Ce=0;Ce<s;Ce++)oe(Ce);oe(b===!1?s:0),Ie(),ne()}function oe(Ce){$=n.getPointAt(Ce/s,$);const Me=I.normals[Ce],Je=I.binormals[Ce];for(let Qe=0;Qe<=f;Qe++){const je=Qe/f*Math.PI*2,Ye=Math.sin(je),Pe=-Math.cos(je);U.x=Pe*Me.x+Ye*Je.x,U.y=Pe*Me.y+Ye*Je.y,U.z=Pe*Me.z+Ye*Je.z,U.normalize(),ee.push(U.x,U.y,U.z),R.x=$.x+l*U.x,R.y=$.y+l*U.y,R.z=$.z+l*U.z,Z.push(R.x,R.y,R.z)}}function ne(){for(let Ce=1;Ce<=s;Ce++)for(let Me=1;Me<=f;Me++){const Je=(f+1)*(Ce-1)+(Me-1),Qe=(f+1)*Ce+(Me-1),je=(f+1)*Ce+Me,Ye=(f+1)*(Ce-1)+Me;ae.push(Je,Qe,Ye),ae.push(Qe,je,Ye)}}function Ie(){for(let Ce=0;Ce<=s;Ce++)for(let Me=0;Me<=f;Me++)V.x=Ce/s,V.y=Me/f,te.push(V.x,V.y)}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON();return n.path=this.parameters.path.toJSON(),n}static fromJSON(n){return new _p(new rp[n.path.type]().fromJSON(n.path),n.tubularSegments,n.radius,n.radialSegments,n.closed)}}class jM extends Zi{constructor(n=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:n},n!==null){const s=[],l=new Set,f=new Ve,b=new Ve;if(n.index!==null){const I=n.attributes.position,R=n.index;let U=n.groups;U.length===0&&(U=[{start:0,count:R.count,materialIndex:0}]);for(let V=0,$=U.length;V<$;++V){const Z=U[V],ee=Z.start,te=Z.count;for(let ae=ee,he=ee+te;ae<he;ae+=3)for(let oe=0;oe<3;oe++){const ne=R.getX(ae+oe),Ie=R.getX(ae+(oe+1)%3);f.fromBufferAttribute(I,ne),b.fromBufferAttribute(I,Ie),$M(f,b,l)===!0&&(s.push(f.x,f.y,f.z),s.push(b.x,b.y,b.z))}}}else{const I=n.attributes.position;for(let R=0,U=I.count/3;R<U;R++)for(let V=0;V<3;V++){const $=3*R+V,Z=3*R+(V+1)%3;f.fromBufferAttribute(I,$),b.fromBufferAttribute(I,Z),$M(f,b,l)===!0&&(s.push(f.x,f.y,f.z),s.push(b.x,b.y,b.z))}}this.setAttribute("position",new ai(s,3))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}}function $M(M,n,s){const l=`${M.x},${M.y},${M.z}-${n.x},${n.y},${n.z}`,f=`${n.x},${n.y},${n.z}-${M.x},${M.y},${M.z}`;return s.has(l)===!0||s.has(f)===!0?!1:(s.add(l),s.add(f),!0)}var XM=Object.freeze({__proto__:null,BoxGeometry:xu,CapsuleGeometry:sp,CircleGeometry:ap,ConeGeometry:op,CylinderGeometry:rh,DodecahedronGeometry:lp,EdgesGeometry:UM,ExtrudeGeometry:pp,IcosahedronGeometry:gp,LatheGeometry:Hd,OctahedronGeometry:$d,PlaneGeometry:$0,PolyhedronGeometry:Nc,RingGeometry:Ap,ShapeGeometry:vp,SphereGeometry:Xd,TetrahedronGeometry:yp,TorusGeometry:bp,TorusKnotGeometry:Mp,TubeGeometry:_p,WireframeGeometry:jM});class KM extends va{constructor(n){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Kn(0),this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.fog=n.fog,this}}class YM extends Vo{constructor(n){super(n),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class s3 extends va{constructor(n){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Kn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.envMapIntensity=n.envMapIntensity,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class qM extends s3{constructor(n){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new sn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return hs(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(s){this.ior=(1+.4*s)/(1-.4*s)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Kn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Kn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Kn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(n)}get anisotropy(){return this._anisotropy}set anisotropy(n){this._anisotropy>0!=n>0&&this.version++,this._anisotropy=n}get clearcoat(){return this._clearcoat}set clearcoat(n){this._clearcoat>0!=n>0&&this.version++,this._clearcoat=n}get iridescence(){return this._iridescence}set iridescence(n){this._iridescence>0!=n>0&&this.version++,this._iridescence=n}get dispersion(){return this._dispersion}set dispersion(n){this._dispersion>0!=n>0&&this.version++,this._dispersion=n}get sheen(){return this._sheen}set sheen(n){this._sheen>0!=n>0&&this.version++,this._sheen=n}get transmission(){return this._transmission}set transmission(n){this._transmission>0!=n>0&&this.version++,this._transmission=n}copy(n){return super.copy(n),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=n.anisotropy,this.anisotropyRotation=n.anisotropyRotation,this.anisotropyMap=n.anisotropyMap,this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.dispersion=n.dispersion,this.ior=n.ior,this.iridescence=n.iridescence,this.iridescenceMap=n.iridescenceMap,this.iridescenceIOR=n.iridescenceIOR,this.iridescenceThicknessRange=[...n.iridescenceThicknessRange],this.iridescenceThicknessMap=n.iridescenceThicknessMap,this.sheen=n.sheen,this.sheenColor.copy(n.sheenColor),this.sheenColorMap=n.sheenColorMap,this.sheenRoughness=n.sheenRoughness,this.sheenRoughnessMap=n.sheenRoughnessMap,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this.thickness=n.thickness,this.thicknessMap=n.thicknessMap,this.attenuationDistance=n.attenuationDistance,this.attenuationColor.copy(n.attenuationColor),this.specularIntensity=n.specularIntensity,this.specularIntensityMap=n.specularIntensityMap,this.specularColor.copy(n.specularColor),this.specularColorMap=n.specularColorMap,this}}class JM extends va{constructor(n){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Kn(16777215),this.specular=new Kn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=Et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class ZM extends va{constructor(n){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Kn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}class e6 extends va{constructor(n){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(n)}copy(n){return super.copy(n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.flatShading=n.flatShading,this}}class t6 extends va{constructor(n){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Kn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=Et,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class n6 extends va{constructor(n){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Kn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.flatShading=n.flatShading,this.fog=n.fog,this}}class i6 extends Ra{constructor(n){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}copy(n){return super.copy(n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this}}function Fu(M,n,s){return!M||!s&&M.constructor===n?M:typeof n.BYTES_PER_ELEMENT=="number"?new n(M):Array.prototype.slice.call(M)}function r6(M){return ArrayBuffer.isView(M)&&!(M instanceof DataView)}function s6(M){function n(f,b){return M[f]-M[b]}const s=M.length,l=new Array(s);for(let f=0;f!==s;++f)l[f]=f;return l.sort(n),l}function a3(M,n,s){const l=M.length,f=new M.constructor(l);for(let b=0,I=0;I!==l;++b){const R=s[b]*n;for(let U=0;U!==n;++U)f[I++]=M[R+U]}return f}function o3(M,n,s,l){let f=1,b=M[0];for(;b!==void 0&&b[l]===void 0;)b=M[f++];if(b===void 0)return;let I=b[l];if(I!==void 0)if(Array.isArray(I))do I=b[l],I!==void 0&&(n.push(b.time),s.push.apply(s,I)),b=M[f++];while(b!==void 0);else if(I.toArray!==void 0)do I=b[l],I!==void 0&&(n.push(b.time),I.toArray(s,s.length)),b=M[f++];while(b!==void 0);else do I=b[l],I!==void 0&&(n.push(b.time),s.push(I)),b=M[f++];while(b!==void 0)}function Kk(M,n,s,l,f=30){const b=M.clone();b.name=n;const I=[];for(let U=0;U<b.tracks.length;++U){const V=b.tracks[U],$=V.getValueSize(),Z=[],ee=[];for(let te=0;te<V.times.length;++te){const ae=V.times[te]*f;if(!(ae<s||ae>=l)){Z.push(V.times[te]);for(let he=0;he<$;++he)ee.push(V.values[te*$+he])}}Z.length!==0&&(V.times=Fu(Z,V.times.constructor),V.values=Fu(ee,V.values.constructor),I.push(V))}b.tracks=I;let R=1/0;for(let U=0;U<b.tracks.length;++U)R>b.tracks[U].times[0]&&(R=b.tracks[U].times[0]);for(let U=0;U<b.tracks.length;++U)b.tracks[U].shift(-1*R);return b.resetDuration(),b}function Yk(M,n=0,s=M,l=30){l<=0&&(l=30);const f=s.tracks.length,b=n/l;for(let I=0;I<f;++I){const R=s.tracks[I],U=R.ValueTypeName;if(U==="bool"||U==="string")continue;const V=M.tracks.find(function(ne){return ne.name===R.name&&ne.ValueTypeName===U});if(V===void 0)continue;let $=0;const Z=R.getValueSize();R.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&($=Z/3);let ee=0;const te=V.getValueSize();V.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ee=te/3);const ae=R.times.length-1;let he;if(b<=R.times[0]){const ne=$,Ie=Z-$;he=R.values.slice(ne,Ie)}else if(b>=R.times[ae]){const ne=ae*Z+$,Ie=ne+Z-$;he=R.values.slice(ne,Ie)}else{const ne=R.createInterpolant(),Ie=$,Ce=Z-$;ne.evaluate(b),he=ne.resultBuffer.slice(Ie,Ce)}U==="quaternion"&&new _r().fromArray(he).normalize().conjugate().toArray(he);const oe=V.times.length;for(let ne=0;ne<oe;++ne){const Ie=ne*te+ee;if(U==="quaternion")_r.multiplyQuaternionsFlat(V.values,Ie,he,0,V.values,Ie);else{const Ce=te-ee*2;for(let Me=0;Me<Ce;++Me)V.values[Ie+Me]-=he[Me]}}}return M.blendMode=ko,M}const qk={convertArray:Fu,isTypedArray:r6,getKeyframeOrder:s6,sortedArray:a3,flattenJSON:o3,subclip:Kk,makeClipAdditive:Yk};class Kd{constructor(n,s,l,f){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=f!==void 0?f:new s.constructor(l),this.sampleValues=s,this.valueSize=l,this.settings=null,this.DefaultSettings_={}}evaluate(n){const s=this.parameterPositions;let l=this._cachedIndex,f=s[l],b=s[l-1];e:{t:{let I;n:{i:if(!(n<f)){for(let R=l+2;;){if(f===void 0){if(n<b)break i;return l=s.length,this._cachedIndex=l,this.copySampleValue_(l-1)}if(l===R)break;if(b=f,f=s[++l],n<f)break t}I=s.length;break n}if(!(n>=b)){const R=s[1];n<R&&(l=2,b=R);for(let U=l-2;;){if(b===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(l===U)break;if(f=b,b=s[--l-1],n>=b)break t}I=l,l=0;break n}break e}for(;l<I;){const R=l+I>>>1;n<s[R]?I=R:l=R+1}if(f=s[l],b=s[l-1],b===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(f===void 0)return l=s.length,this._cachedIndex=l,this.copySampleValue_(l-1)}this._cachedIndex=l,this.intervalChanged_(l,b,f)}return this.interpolate_(l,b,n,f)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(n){const s=this.resultBuffer,l=this.sampleValues,f=this.valueSize,b=n*f;for(let I=0;I!==f;++I)s[I]=l[b+I];return s}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class a6 extends Kd{constructor(n,s,l,f){super(n,s,l,f),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ds,endingEnd:ds}}intervalChanged_(n,s,l){const f=this.parameterPositions;let b=n-2,I=n+1,R=f[b],U=f[I];if(R===void 0)switch(this.getSettings_().endingStart){case qs:b=n,R=2*s-l;break;case no:b=f.length-2,R=s+f[b]-f[b+1];break;default:b=n,R=l}if(U===void 0)switch(this.getSettings_().endingEnd){case qs:I=n,U=2*l-s;break;case no:I=1,U=l+f[1]-f[0];break;default:I=n-1,U=s}const V=(l-s)*.5,$=this.valueSize;this._weightPrev=V/(s-R),this._weightNext=V/(U-l),this._offsetPrev=b*$,this._offsetNext=I*$}interpolate_(n,s,l,f){const b=this.resultBuffer,I=this.sampleValues,R=this.valueSize,U=n*R,V=U-R,$=this._offsetPrev,Z=this._offsetNext,ee=this._weightPrev,te=this._weightNext,ae=(l-s)/(f-s),he=ae*ae,oe=he*ae,ne=-ee*oe+2*ee*he-ee*ae,Ie=(1+ee)*oe+(-1.5-2*ee)*he+(-.5+ee)*ae+1,Ce=(-1-te)*oe+(1.5+te)*he+.5*ae,Me=te*oe-te*he;for(let Je=0;Je!==R;++Je)b[Je]=ne*I[$+Je]+Ie*I[V+Je]+Ce*I[U+Je]+Me*I[Z+Je];return b}}class l3 extends Kd{constructor(n,s,l,f){super(n,s,l,f)}interpolate_(n,s,l,f){const b=this.resultBuffer,I=this.sampleValues,R=this.valueSize,U=n*R,V=U-R,$=(l-s)/(f-s),Z=1-$;for(let ee=0;ee!==R;++ee)b[ee]=I[V+ee]*Z+I[U+ee]*$;return b}}class o6 extends Kd{constructor(n,s,l,f){super(n,s,l,f)}interpolate_(n){return this.copySampleValue_(n-1)}}class zo{constructor(n,s,l,f){if(n===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(s===void 0||s.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=Fu(s,this.TimeBufferType),this.values=Fu(l,this.ValueBufferType),this.setInterpolation(f||this.DefaultInterpolation)}static toJSON(n){const s=n.constructor;let l;if(s.toJSON!==this.toJSON)l=s.toJSON(n);else{l={name:n.name,times:Fu(n.times,Array),values:Fu(n.values,Array)};const f=n.getInterpolation();f!==n.DefaultInterpolation&&(l.interpolation=f)}return l.type=n.ValueTypeName,l}InterpolantFactoryMethodDiscrete(n){return new o6(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodLinear(n){return new l3(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodSmooth(n){return new a6(this.times,this.values,this.getValueSize(),n)}setInterpolation(n){let s;switch(n){case et:s=this.InterpolantFactoryMethodDiscrete;break;case yi:s=this.InterpolantFactoryMethodLinear;break;case Rs:s=this.InterpolantFactoryMethodSmooth;break}if(s===void 0){const l="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(n!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(l);return console.warn("THREE.KeyframeTrack:",l),this}return this.createInterpolant=s,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return et;case this.InterpolantFactoryMethodLinear:return yi;case this.InterpolantFactoryMethodSmooth:return Rs}}getValueSize(){return this.values.length/this.times.length}shift(n){if(n!==0){const s=this.times;for(let l=0,f=s.length;l!==f;++l)s[l]+=n}return this}scale(n){if(n!==1){const s=this.times;for(let l=0,f=s.length;l!==f;++l)s[l]*=n}return this}trim(n,s){const l=this.times,f=l.length;let b=0,I=f-1;for(;b!==f&&l[b]<n;)++b;for(;I!==-1&&l[I]>s;)--I;if(++I,b!==0||I!==f){b>=I&&(I=Math.max(I,1),b=I-1);const R=this.getValueSize();this.times=l.slice(b,I),this.values=this.values.slice(b*R,I*R)}return this}validate(){let n=!0;const s=this.getValueSize();s-Math.floor(s)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),n=!1);const l=this.times,f=this.values,b=l.length;b===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),n=!1);let I=null;for(let R=0;R!==b;R++){const U=l[R];if(typeof U=="number"&&isNaN(U)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,R,U),n=!1;break}if(I!==null&&I>U){console.error("THREE.KeyframeTrack: Out of order keys.",this,R,U,I),n=!1;break}I=U}if(f!==void 0&&r6(f))for(let R=0,U=f.length;R!==U;++R){const V=f[R];if(isNaN(V)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,R,V),n=!1;break}}return n}optimize(){const n=this.times.slice(),s=this.values.slice(),l=this.getValueSize(),f=this.getInterpolation()===Rs,b=n.length-1;let I=1;for(let R=1;R<b;++R){let U=!1;const V=n[R],$=n[R+1];if(V!==$&&(R!==1||V!==n[0]))if(f)U=!0;else{const Z=R*l,ee=Z-l,te=Z+l;for(let ae=0;ae!==l;++ae){const he=s[Z+ae];if(he!==s[ee+ae]||he!==s[te+ae]){U=!0;break}}}if(U){if(R!==I){n[I]=n[R];const Z=R*l,ee=I*l;for(let te=0;te!==l;++te)s[ee+te]=s[Z+te]}++I}}if(b>0){n[I]=n[b];for(let R=b*l,U=I*l,V=0;V!==l;++V)s[U+V]=s[R+V];++I}return I!==n.length?(this.times=n.slice(0,I),this.values=s.slice(0,I*l)):(this.times=n,this.values=s),this}clone(){const n=this.times.slice(),s=this.values.slice(),l=this.constructor,f=new l(this.name,n,s);return f.createInterpolant=this.createInterpolant,f}}zo.prototype.TimeBufferType=Float32Array,zo.prototype.ValueBufferType=Float32Array,zo.prototype.DefaultInterpolation=yi;class ku extends zo{}ku.prototype.ValueTypeName="bool",ku.prototype.ValueBufferType=Array,ku.prototype.DefaultInterpolation=et,ku.prototype.InterpolantFactoryMethodLinear=void 0,ku.prototype.InterpolantFactoryMethodSmooth=void 0;class c3 extends zo{}c3.prototype.ValueTypeName="color";class Yd extends zo{}Yd.prototype.ValueTypeName="number";class l6 extends Kd{constructor(n,s,l,f){super(n,s,l,f)}interpolate_(n,s,l,f){const b=this.resultBuffer,I=this.sampleValues,R=this.valueSize,U=(l-s)/(f-s);let V=n*R;for(let $=V+R;V!==$;V+=4)_r.slerpFlat(b,0,I,V-R,I,V,U);return b}}class ah extends zo{InterpolantFactoryMethodLinear(n){return new l6(this.times,this.values,this.getValueSize(),n)}}ah.prototype.ValueTypeName="quaternion",ah.prototype.DefaultInterpolation=yi,ah.prototype.InterpolantFactoryMethodSmooth=void 0;class Uu extends zo{}Uu.prototype.ValueTypeName="string",Uu.prototype.ValueBufferType=Array,Uu.prototype.DefaultInterpolation=et,Uu.prototype.InterpolantFactoryMethodLinear=void 0,Uu.prototype.InterpolantFactoryMethodSmooth=void 0;class qd extends zo{}qd.prototype.ValueTypeName="vector";class Jd{constructor(n="",s=-1,l=[],f=yo){this.name=n,this.tracks=l,this.duration=s,this.blendMode=f,this.uuid=Sa(),this.duration<0&&this.resetDuration()}static parse(n){const s=[],l=n.tracks,f=1/(n.fps||1);for(let I=0,R=l.length;I!==R;++I)s.push(Zk(l[I]).scale(f));const b=new this(n.name,n.duration,s,n.blendMode);return b.uuid=n.uuid,b}static toJSON(n){const s=[],l=n.tracks,f={name:n.name,duration:n.duration,tracks:s,uuid:n.uuid,blendMode:n.blendMode};for(let b=0,I=l.length;b!==I;++b)s.push(zo.toJSON(l[b]));return f}static CreateFromMorphTargetSequence(n,s,l,f){const b=s.length,I=[];for(let R=0;R<b;R++){let U=[],V=[];U.push((R+b-1)%b,R,(R+1)%b),V.push(0,1,0);const $=s6(U);U=a3(U,1,$),V=a3(V,1,$),!f&&U[0]===0&&(U.push(b),V.push(V[0])),I.push(new Yd(".morphTargetInfluences["+s[R].name+"]",U,V).scale(1/l))}return new this(n,-1,I)}static findByName(n,s){let l=n;if(!Array.isArray(n)){const f=n;l=f.geometry&&f.geometry.animations||f.animations}for(let f=0;f<l.length;f++)if(l[f].name===s)return l[f];return null}static CreateClipsFromMorphTargetSequences(n,s,l){const f={},b=/^([\w-]*?)([\d]+)$/;for(let R=0,U=n.length;R<U;R++){const V=n[R],$=V.name.match(b);if($&&$.length>1){const Z=$[1];let ee=f[Z];ee||(f[Z]=ee=[]),ee.push(V)}}const I=[];for(const R in f)I.push(this.CreateFromMorphTargetSequence(R,f[R],s,l));return I}static parseAnimation(n,s){if(!n)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const l=function(Z,ee,te,ae,he){if(te.length!==0){const oe=[],ne=[];o3(te,oe,ne,ae),oe.length!==0&&he.push(new Z(ee,oe,ne))}},f=[],b=n.name||"default",I=n.fps||30,R=n.blendMode;let U=n.length||-1;const V=n.hierarchy||[];for(let Z=0;Z<V.length;Z++){const ee=V[Z].keys;if(!(!ee||ee.length===0))if(ee[0].morphTargets){const te={};let ae;for(ae=0;ae<ee.length;ae++)if(ee[ae].morphTargets)for(let he=0;he<ee[ae].morphTargets.length;he++)te[ee[ae].morphTargets[he]]=-1;for(const he in te){const oe=[],ne=[];for(let Ie=0;Ie!==ee[ae].morphTargets.length;++Ie){const Ce=ee[ae];oe.push(Ce.time),ne.push(Ce.morphTarget===he?1:0)}f.push(new Yd(".morphTargetInfluence["+he+"]",oe,ne))}U=te.length*I}else{const te=".bones["+s[Z].name+"]";l(qd,te+".position",ee,"pos",f),l(ah,te+".quaternion",ee,"rot",f),l(qd,te+".scale",ee,"scl",f)}}return f.length===0?null:new this(b,U,f,R)}resetDuration(){const n=this.tracks;let s=0;for(let l=0,f=n.length;l!==f;++l){const b=this.tracks[l];s=Math.max(s,b.times[b.times.length-1])}return this.duration=s,this}trim(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this}validate(){let n=!0;for(let s=0;s<this.tracks.length;s++)n=n&&this.tracks[s].validate();return n}optimize(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this}clone(){const n=[];for(let s=0;s<this.tracks.length;s++)n.push(this.tracks[s].clone());return new this.constructor(this.name,this.duration,n,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Jk(M){switch(M.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yd;case"vector":case"vector2":case"vector3":case"vector4":return qd;case"color":return c3;case"quaternion":return ah;case"bool":case"boolean":return ku;case"string":return Uu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+M)}function Zk(M){if(M.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const n=Jk(M.type);if(M.times===void 0){const s=[],l=[];o3(M.keys,s,l,"value"),M.times=s,M.values=l}return n.parse!==void 0?n.parse(M):new n(M.name,M.times,M.values,M.interpolation)}const Xl={enabled:!1,files:{},add:function(M,n){this.enabled!==!1&&(this.files[M]=n)},get:function(M){if(this.enabled!==!1)return this.files[M]},remove:function(M){delete this.files[M]},clear:function(){this.files={}}};class u3{constructor(n,s,l){const f=this;let b=!1,I=0,R=0,U;const V=[];this.onStart=void 0,this.onLoad=n,this.onProgress=s,this.onError=l,this.itemStart=function($){R++,b===!1&&f.onStart!==void 0&&f.onStart($,I,R),b=!0},this.itemEnd=function($){I++,f.onProgress!==void 0&&f.onProgress($,I,R),I===R&&(b=!1,f.onLoad!==void 0&&f.onLoad())},this.itemError=function($){f.onError!==void 0&&f.onError($)},this.resolveURL=function($){return U?U($):$},this.setURLModifier=function($){return U=$,this},this.addHandler=function($,Z){return V.push($,Z),this},this.removeHandler=function($){const Z=V.indexOf($);return Z!==-1&&V.splice(Z,2),this},this.getHandler=function($){for(let Z=0,ee=V.length;Z<ee;Z+=2){const te=V[Z],ae=V[Z+1];if(te.global&&(te.lastIndex=0),te.test($))return ae}return null}}}const c6=new u3;class za{constructor(n){this.manager=n!==void 0?n:c6,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(n,s){const l=this;return new Promise(function(f,b){l.load(n,f,s,b)})}parse(){}setCrossOrigin(n){return this.crossOrigin=n,this}setWithCredentials(n){return this.withCredentials=n,this}setPath(n){return this.path=n,this}setResourcePath(n){return this.resourcePath=n,this}setRequestHeader(n){return this.requestHeader=n,this}}za.DEFAULT_MATERIAL_NAME="__DEFAULT";const Kl={};class eU extends Error{constructor(n,s){super(n),this.response=s}}class Yl extends za{constructor(n){super(n)}load(n,s,l,f){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const b=Xl.get(n);if(b!==void 0)return this.manager.itemStart(n),setTimeout(()=>{s&&s(b),this.manager.itemEnd(n)},0),b;if(Kl[n]!==void 0){Kl[n].push({onLoad:s,onProgress:l,onError:f});return}Kl[n]=[],Kl[n].push({onLoad:s,onProgress:l,onError:f});const I=new Request(n,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),R=this.mimeType,U=this.responseType;fetch(I).then(V=>{if(V.status===200||V.status===0){if(V.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||V.body===void 0||V.body.getReader===void 0)return V;const $=Kl[n],Z=V.body.getReader(),ee=V.headers.get("X-File-Size")||V.headers.get("Content-Length"),te=ee?parseInt(ee):0,ae=te!==0;let he=0;const oe=new ReadableStream({start(ne){Ie();function Ie(){Z.read().then(({done:Ce,value:Me})=>{if(Ce)ne.close();else{he+=Me.byteLength;const Je=new ProgressEvent("progress",{lengthComputable:ae,loaded:he,total:te});for(let Qe=0,je=$.length;Qe<je;Qe++){const Ye=$[Qe];Ye.onProgress&&Ye.onProgress(Je)}ne.enqueue(Me),Ie()}})}}});return new Response(oe)}else throw new eU(`fetch for "${V.url}" responded with ${V.status}: ${V.statusText}`,V)}).then(V=>{switch(U){case"arraybuffer":return V.arrayBuffer();case"blob":return V.blob();case"document":return V.text().then($=>new DOMParser().parseFromString($,R));case"json":return V.json();default:if(R===void 0)return V.text();{const Z=/charset="?([^;"\s]*)"?/i.exec(R),ee=Z&&Z[1]?Z[1].toLowerCase():void 0,te=new TextDecoder(ee);return V.arrayBuffer().then(ae=>te.decode(ae))}}}).then(V=>{Xl.add(n,V);const $=Kl[n];delete Kl[n];for(let Z=0,ee=$.length;Z<ee;Z++){const te=$[Z];te.onLoad&&te.onLoad(V)}}).catch(V=>{const $=Kl[n];if($===void 0)throw this.manager.itemError(n),V;delete Kl[n];for(let Z=0,ee=$.length;Z<ee;Z++){const te=$[Z];te.onError&&te.onError(V)}this.manager.itemError(n)}).finally(()=>{this.manager.itemEnd(n)}),this.manager.itemStart(n)}setResponseType(n){return this.responseType=n,this}setMimeType(n){return this.mimeType=n,this}}class tU extends za{constructor(n){super(n)}load(n,s,l,f){const b=this,I=new Yl(this.manager);I.setPath(this.path),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials),I.load(n,function(R){try{s(b.parse(JSON.parse(R)))}catch(U){f?f(U):console.error(U),b.manager.itemError(n)}},l,f)}parse(n){const s=[];for(let l=0;l<n.length;l++){const f=Jd.parse(n[l]);s.push(f)}return s}}class nU extends za{constructor(n){super(n)}load(n,s,l,f){const b=this,I=[],R=new tp,U=new Yl(this.manager);U.setPath(this.path),U.setResponseType("arraybuffer"),U.setRequestHeader(this.requestHeader),U.setWithCredentials(b.withCredentials);let V=0;function $(Z){U.load(n[Z],function(ee){const te=b.parse(ee,!0);I[Z]={width:te.width,height:te.height,format:te.format,mipmaps:te.mipmaps},V+=1,V===6&&(te.mipmapCount===1&&(R.minFilter=Fn),R.image=I,R.format=te.format,R.needsUpdate=!0,s&&s(R))},l,f)}if(Array.isArray(n))for(let Z=0,ee=n.length;Z<ee;++Z)$(Z);else U.load(n,function(Z){const ee=b.parse(Z,!0);if(ee.isCubemap){const te=ee.mipmaps.length/ee.mipmapCount;for(let ae=0;ae<te;ae++){I[ae]={mipmaps:[]};for(let he=0;he<ee.mipmapCount;he++)I[ae].mipmaps.push(ee.mipmaps[ae*ee.mipmapCount+he]),I[ae].format=ee.format,I[ae].width=ee.width,I[ae].height=ee.height}R.image=I}else R.image.width=ee.width,R.image.height=ee.height,R.mipmaps=ee.mipmaps;ee.mipmapCount===1&&(R.minFilter=Fn),R.format=ee.format,R.needsUpdate=!0,s&&s(R)},l,f);return R}}class Zd extends za{constructor(n){super(n)}load(n,s,l,f){this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const b=this,I=Xl.get(n);if(I!==void 0)return b.manager.itemStart(n),setTimeout(function(){s&&s(I),b.manager.itemEnd(n)},0),I;const R=Eu("img");function U(){$(),Xl.add(n,this),s&&s(this),b.manager.itemEnd(n)}function V(Z){$(),f&&f(Z),b.manager.itemError(n),b.manager.itemEnd(n)}function $(){R.removeEventListener("load",U,!1),R.removeEventListener("error",V,!1)}return R.addEventListener("load",U,!1),R.addEventListener("error",V,!1),n.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(R.crossOrigin=this.crossOrigin),b.manager.itemStart(n),R.src=n,R}}class iU extends za{constructor(n){super(n)}load(n,s,l,f){const b=new Bd;b.colorSpace=gr;const I=new Zd(this.manager);I.setCrossOrigin(this.crossOrigin),I.setPath(this.path);let R=0;function U(V){I.load(n[V],function($){b.images[V]=$,R++,R===6&&(b.needsUpdate=!0,s&&s(b))},void 0,f)}for(let V=0;V<n.length;++V)U(V);return b}}class rU extends za{constructor(n){super(n)}load(n,s,l,f){const b=this,I=new Dc,R=new Yl(this.manager);return R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(b.withCredentials),R.load(n,function(U){let V;try{V=b.parse(U)}catch($){if(f!==void 0)f($);else{console.error($);return}}V.image!==void 0?I.image=V.image:V.data!==void 0&&(I.image.width=V.width,I.image.height=V.height,I.image.data=V.data),I.wrapS=V.wrapS!==void 0?V.wrapS:tt,I.wrapT=V.wrapT!==void 0?V.wrapT:tt,I.magFilter=V.magFilter!==void 0?V.magFilter:Fn,I.minFilter=V.minFilter!==void 0?V.minFilter:Fn,I.anisotropy=V.anisotropy!==void 0?V.anisotropy:1,V.colorSpace!==void 0&&(I.colorSpace=V.colorSpace),V.flipY!==void 0&&(I.flipY=V.flipY),V.format!==void 0&&(I.format=V.format),V.type!==void 0&&(I.type=V.type),V.mipmaps!==void 0&&(I.mipmaps=V.mipmaps,I.minFilter=qi),V.mipmapCount===1&&(I.minFilter=Fn),V.generateMipmaps!==void 0&&(I.generateMipmaps=V.generateMipmaps),I.needsUpdate=!0,s&&s(I,V)},l,f),I}}class sU extends za{constructor(n){super(n)}load(n,s,l,f){const b=new qr,I=new Zd(this.manager);return I.setCrossOrigin(this.crossOrigin),I.setPath(this.path),I.load(n,function(R){b.image=R,b.needsUpdate=!0,s!==void 0&&s(b)},l,f),b}}class Fc extends Cr{constructor(n,s=1){super(),this.isLight=!0,this.type="Light",this.color=new Kn(n),this.intensity=s}dispose(){}copy(n,s){return super.copy(n,s),this.color.copy(n.color),this.intensity=n.intensity,this}toJSON(n){const s=super.toJSON(n);return s.object.color=this.color.getHex(),s.object.intensity=this.intensity,this.groundColor!==void 0&&(s.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(s.object.distance=this.distance),this.angle!==void 0&&(s.object.angle=this.angle),this.decay!==void 0&&(s.object.decay=this.decay),this.penumbra!==void 0&&(s.object.penumbra=this.penumbra),this.shadow!==void 0&&(s.object.shadow=this.shadow.toJSON()),s}}class u6 extends Fc{constructor(n,s,l){super(n,l),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Kn(s)}copy(n,s){return super.copy(n,s),this.groundColor.copy(n.groundColor),this}}const h3=new ii,h6=new Ve,d6=new Ve;class d3{constructor(n){this.camera=n,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new sn(512,512),this.map=null,this.mapPass=null,this.matrix=new ii,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Rd,this._frameExtents=new sn(1,1),this._viewportCount=1,this._viewports=[new yr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(n){const s=this.camera,l=this.matrix;h6.setFromMatrixPosition(n.matrixWorld),s.position.copy(h6),d6.setFromMatrixPosition(n.target.matrixWorld),s.lookAt(d6),s.updateMatrixWorld(),h3.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(h3),l.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),l.multiply(h3)}getViewport(n){return this._viewports[n]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(n){return this.camera=n.camera.clone(),this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const n={};return this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}class aU extends d3{constructor(){super(new Vs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(n){const s=this.camera,l=Cc*2*n.angle*this.focus,f=this.mapSize.width/this.mapSize.height,b=n.distance||s.far;(l!==s.fov||f!==s.aspect||b!==s.far)&&(s.fov=l,s.aspect=f,s.far=b,s.updateProjectionMatrix()),super.updateMatrices(n)}copy(n){return super.copy(n),this.focus=n.focus,this}}class f6 extends Fc{constructor(n,s,l=0,f=Math.PI/3,b=0,I=2){super(n,s),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.target=new Cr,this.distance=l,this.angle=f,this.penumbra=b,this.decay=I,this.map=null,this.shadow=new aU}get power(){return this.intensity*Math.PI}set power(n){this.intensity=n/Math.PI}dispose(){this.shadow.dispose()}copy(n,s){return super.copy(n,s),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}const m6=new ii,ef=new Ve,f3=new Ve;class oU extends d3{constructor(){super(new Vs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new sn(4,2),this._viewportCount=6,this._viewports=[new yr(2,1,1,1),new yr(0,1,1,1),new yr(3,1,1,1),new yr(1,1,1,1),new yr(3,0,1,1),new yr(1,0,1,1)],this._cubeDirections=[new Ve(1,0,0),new Ve(-1,0,0),new Ve(0,0,1),new Ve(0,0,-1),new Ve(0,1,0),new Ve(0,-1,0)],this._cubeUps=[new Ve(0,1,0),new Ve(0,1,0),new Ve(0,1,0),new Ve(0,1,0),new Ve(0,0,1),new Ve(0,0,-1)]}updateMatrices(n,s=0){const l=this.camera,f=this.matrix,b=n.distance||l.far;b!==l.far&&(l.far=b,l.updateProjectionMatrix()),ef.setFromMatrixPosition(n.matrixWorld),l.position.copy(ef),f3.copy(l.position),f3.add(this._cubeDirections[s]),l.up.copy(this._cubeUps[s]),l.lookAt(f3),l.updateMatrixWorld(),f.makeTranslation(-ef.x,-ef.y,-ef.z),m6.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix(m6)}}class p6 extends Fc{constructor(n,s,l=0,f=2){super(n,s),this.isPointLight=!0,this.type="PointLight",this.distance=l,this.decay=f,this.shadow=new oU}get power(){return this.intensity*4*Math.PI}set power(n){this.intensity=n/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(n,s){return super.copy(n,s),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}}class lU extends d3{constructor(){super(new Dm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class g6 extends Fc{constructor(n,s){super(n,s),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.target=new Cr,this.shadow=new lU}dispose(){this.shadow.dispose()}copy(n){return super.copy(n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}class A6 extends Fc{constructor(n,s){super(n,s),this.isAmbientLight=!0,this.type="AmbientLight"}}class v6 extends Fc{constructor(n,s,l=10,f=10){super(n,s),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=l,this.height=f}get power(){return this.intensity*this.width*this.height*Math.PI}set power(n){this.intensity=n/(this.width*this.height*Math.PI)}copy(n){return super.copy(n),this.width=n.width,this.height=n.height,this}toJSON(n){const s=super.toJSON(n);return s.object.width=this.width,s.object.height=this.height,s}}class y6{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let n=0;n<9;n++)this.coefficients.push(new Ve)}set(n){for(let s=0;s<9;s++)this.coefficients[s].copy(n[s]);return this}zero(){for(let n=0;n<9;n++)this.coefficients[n].set(0,0,0);return this}getAt(n,s){const l=n.x,f=n.y,b=n.z,I=this.coefficients;return s.copy(I[0]).multiplyScalar(.282095),s.addScaledVector(I[1],.488603*f),s.addScaledVector(I[2],.488603*b),s.addScaledVector(I[3],.488603*l),s.addScaledVector(I[4],1.092548*(l*f)),s.addScaledVector(I[5],1.092548*(f*b)),s.addScaledVector(I[6],.315392*(3*b*b-1)),s.addScaledVector(I[7],1.092548*(l*b)),s.addScaledVector(I[8],.546274*(l*l-f*f)),s}getIrradianceAt(n,s){const l=n.x,f=n.y,b=n.z,I=this.coefficients;return s.copy(I[0]).multiplyScalar(.886227),s.addScaledVector(I[1],1.023328*f),s.addScaledVector(I[2],1.023328*b),s.addScaledVector(I[3],1.023328*l),s.addScaledVector(I[4],.858086*l*f),s.addScaledVector(I[5],.858086*f*b),s.addScaledVector(I[6],.743125*b*b-.247708),s.addScaledVector(I[7],.858086*l*b),s.addScaledVector(I[8],.429043*(l*l-f*f)),s}add(n){for(let s=0;s<9;s++)this.coefficients[s].add(n.coefficients[s]);return this}addScaledSH(n,s){for(let l=0;l<9;l++)this.coefficients[l].addScaledVector(n.coefficients[l],s);return this}scale(n){for(let s=0;s<9;s++)this.coefficients[s].multiplyScalar(n);return this}lerp(n,s){for(let l=0;l<9;l++)this.coefficients[l].lerp(n.coefficients[l],s);return this}equals(n){for(let s=0;s<9;s++)if(!this.coefficients[s].equals(n.coefficients[s]))return!1;return!0}copy(n){return this.set(n.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(n,s=0){const l=this.coefficients;for(let f=0;f<9;f++)l[f].fromArray(n,s+f*3);return this}toArray(n=[],s=0){const l=this.coefficients;for(let f=0;f<9;f++)l[f].toArray(n,s+f*3);return n}static getBasisAt(n,s){const l=n.x,f=n.y,b=n.z;s[0]=.282095,s[1]=.488603*f,s[2]=.488603*b,s[3]=.488603*l,s[4]=1.092548*l*f,s[5]=1.092548*f*b,s[6]=.315392*(3*b*b-1),s[7]=1.092548*l*b,s[8]=.546274*(l*l-f*f)}}class b6 extends Fc{constructor(n=new y6,s=1){super(void 0,s),this.isLightProbe=!0,this.sh=n}copy(n){return super.copy(n),this.sh.copy(n.sh),this}fromJSON(n){return this.intensity=n.intensity,this.sh.fromArray(n.sh),this}toJSON(n){const s=super.toJSON(n);return s.object.sh=this.sh.toArray(),s}}class Cp extends za{constructor(n){super(n),this.textures={}}load(n,s,l,f){const b=this,I=new Yl(b.manager);I.setPath(b.path),I.setRequestHeader(b.requestHeader),I.setWithCredentials(b.withCredentials),I.load(n,function(R){try{s(b.parse(JSON.parse(R)))}catch(U){f?f(U):console.error(U),b.manager.itemError(n)}},l,f)}parse(n){const s=this.textures;function l(b){return s[b]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",b),s[b]}const f=Cp.createMaterialFromType(n.type);if(n.uuid!==void 0&&(f.uuid=n.uuid),n.name!==void 0&&(f.name=n.name),n.color!==void 0&&f.color!==void 0&&f.color.setHex(n.color),n.roughness!==void 0&&(f.roughness=n.roughness),n.metalness!==void 0&&(f.metalness=n.metalness),n.sheen!==void 0&&(f.sheen=n.sheen),n.sheenColor!==void 0&&(f.sheenColor=new Kn().setHex(n.sheenColor)),n.sheenRoughness!==void 0&&(f.sheenRoughness=n.sheenRoughness),n.emissive!==void 0&&f.emissive!==void 0&&f.emissive.setHex(n.emissive),n.specular!==void 0&&f.specular!==void 0&&f.specular.setHex(n.specular),n.specularIntensity!==void 0&&(f.specularIntensity=n.specularIntensity),n.specularColor!==void 0&&f.specularColor!==void 0&&f.specularColor.setHex(n.specularColor),n.shininess!==void 0&&(f.shininess=n.shininess),n.clearcoat!==void 0&&(f.clearcoat=n.clearcoat),n.clearcoatRoughness!==void 0&&(f.clearcoatRoughness=n.clearcoatRoughness),n.dispersion!==void 0&&(f.dispersion=n.dispersion),n.iridescence!==void 0&&(f.iridescence=n.iridescence),n.iridescenceIOR!==void 0&&(f.iridescenceIOR=n.iridescenceIOR),n.iridescenceThicknessRange!==void 0&&(f.iridescenceThicknessRange=n.iridescenceThicknessRange),n.transmission!==void 0&&(f.transmission=n.transmission),n.thickness!==void 0&&(f.thickness=n.thickness),n.attenuationDistance!==void 0&&(f.attenuationDistance=n.attenuationDistance),n.attenuationColor!==void 0&&f.attenuationColor!==void 0&&f.attenuationColor.setHex(n.attenuationColor),n.anisotropy!==void 0&&(f.anisotropy=n.anisotropy),n.anisotropyRotation!==void 0&&(f.anisotropyRotation=n.anisotropyRotation),n.fog!==void 0&&(f.fog=n.fog),n.flatShading!==void 0&&(f.flatShading=n.flatShading),n.blending!==void 0&&(f.blending=n.blending),n.combine!==void 0&&(f.combine=n.combine),n.side!==void 0&&(f.side=n.side),n.shadowSide!==void 0&&(f.shadowSide=n.shadowSide),n.opacity!==void 0&&(f.opacity=n.opacity),n.transparent!==void 0&&(f.transparent=n.transparent),n.alphaTest!==void 0&&(f.alphaTest=n.alphaTest),n.alphaHash!==void 0&&(f.alphaHash=n.alphaHash),n.depthFunc!==void 0&&(f.depthFunc=n.depthFunc),n.depthTest!==void 0&&(f.depthTest=n.depthTest),n.depthWrite!==void 0&&(f.depthWrite=n.depthWrite),n.colorWrite!==void 0&&(f.colorWrite=n.colorWrite),n.blendSrc!==void 0&&(f.blendSrc=n.blendSrc),n.blendDst!==void 0&&(f.blendDst=n.blendDst),n.blendEquation!==void 0&&(f.blendEquation=n.blendEquation),n.blendSrcAlpha!==void 0&&(f.blendSrcAlpha=n.blendSrcAlpha),n.blendDstAlpha!==void 0&&(f.blendDstAlpha=n.blendDstAlpha),n.blendEquationAlpha!==void 0&&(f.blendEquationAlpha=n.blendEquationAlpha),n.blendColor!==void 0&&f.blendColor!==void 0&&f.blendColor.setHex(n.blendColor),n.blendAlpha!==void 0&&(f.blendAlpha=n.blendAlpha),n.stencilWriteMask!==void 0&&(f.stencilWriteMask=n.stencilWriteMask),n.stencilFunc!==void 0&&(f.stencilFunc=n.stencilFunc),n.stencilRef!==void 0&&(f.stencilRef=n.stencilRef),n.stencilFuncMask!==void 0&&(f.stencilFuncMask=n.stencilFuncMask),n.stencilFail!==void 0&&(f.stencilFail=n.stencilFail),n.stencilZFail!==void 0&&(f.stencilZFail=n.stencilZFail),n.stencilZPass!==void 0&&(f.stencilZPass=n.stencilZPass),n.stencilWrite!==void 0&&(f.stencilWrite=n.stencilWrite),n.wireframe!==void 0&&(f.wireframe=n.wireframe),n.wireframeLinewidth!==void 0&&(f.wireframeLinewidth=n.wireframeLinewidth),n.wireframeLinecap!==void 0&&(f.wireframeLinecap=n.wireframeLinecap),n.wireframeLinejoin!==void 0&&(f.wireframeLinejoin=n.wireframeLinejoin),n.rotation!==void 0&&(f.rotation=n.rotation),n.linewidth!==void 0&&(f.linewidth=n.linewidth),n.dashSize!==void 0&&(f.dashSize=n.dashSize),n.gapSize!==void 0&&(f.gapSize=n.gapSize),n.scale!==void 0&&(f.scale=n.scale),n.polygonOffset!==void 0&&(f.polygonOffset=n.polygonOffset),n.polygonOffsetFactor!==void 0&&(f.polygonOffsetFactor=n.polygonOffsetFactor),n.polygonOffsetUnits!==void 0&&(f.polygonOffsetUnits=n.polygonOffsetUnits),n.dithering!==void 0&&(f.dithering=n.dithering),n.alphaToCoverage!==void 0&&(f.alphaToCoverage=n.alphaToCoverage),n.premultipliedAlpha!==void 0&&(f.premultipliedAlpha=n.premultipliedAlpha),n.forceSinglePass!==void 0&&(f.forceSinglePass=n.forceSinglePass),n.visible!==void 0&&(f.visible=n.visible),n.toneMapped!==void 0&&(f.toneMapped=n.toneMapped),n.userData!==void 0&&(f.userData=n.userData),n.vertexColors!==void 0&&(typeof n.vertexColors=="number"?f.vertexColors=n.vertexColors>0:f.vertexColors=n.vertexColors),n.uniforms!==void 0)for(const b in n.uniforms){const I=n.uniforms[b];switch(f.uniforms[b]={},I.type){case"t":f.uniforms[b].value=l(I.value);break;case"c":f.uniforms[b].value=new Kn().setHex(I.value);break;case"v2":f.uniforms[b].value=new sn().fromArray(I.value);break;case"v3":f.uniforms[b].value=new Ve().fromArray(I.value);break;case"v4":f.uniforms[b].value=new yr().fromArray(I.value);break;case"m3":f.uniforms[b].value=new Bi().fromArray(I.value);break;case"m4":f.uniforms[b].value=new ii().fromArray(I.value);break;default:f.uniforms[b].value=I.value}}if(n.defines!==void 0&&(f.defines=n.defines),n.vertexShader!==void 0&&(f.vertexShader=n.vertexShader),n.fragmentShader!==void 0&&(f.fragmentShader=n.fragmentShader),n.glslVersion!==void 0&&(f.glslVersion=n.glslVersion),n.extensions!==void 0)for(const b in n.extensions)f.extensions[b]=n.extensions[b];if(n.lights!==void 0&&(f.lights=n.lights),n.clipping!==void 0&&(f.clipping=n.clipping),n.size!==void 0&&(f.size=n.size),n.sizeAttenuation!==void 0&&(f.sizeAttenuation=n.sizeAttenuation),n.map!==void 0&&(f.map=l(n.map)),n.matcap!==void 0&&(f.matcap=l(n.matcap)),n.alphaMap!==void 0&&(f.alphaMap=l(n.alphaMap)),n.bumpMap!==void 0&&(f.bumpMap=l(n.bumpMap)),n.bumpScale!==void 0&&(f.bumpScale=n.bumpScale),n.normalMap!==void 0&&(f.normalMap=l(n.normalMap)),n.normalMapType!==void 0&&(f.normalMapType=n.normalMapType),n.normalScale!==void 0){let b=n.normalScale;Array.isArray(b)===!1&&(b=[b,b]),f.normalScale=new sn().fromArray(b)}return n.displacementMap!==void 0&&(f.displacementMap=l(n.displacementMap)),n.displacementScale!==void 0&&(f.displacementScale=n.displacementScale),n.displacementBias!==void 0&&(f.displacementBias=n.displacementBias),n.roughnessMap!==void 0&&(f.roughnessMap=l(n.roughnessMap)),n.metalnessMap!==void 0&&(f.metalnessMap=l(n.metalnessMap)),n.emissiveMap!==void 0&&(f.emissiveMap=l(n.emissiveMap)),n.emissiveIntensity!==void 0&&(f.emissiveIntensity=n.emissiveIntensity),n.specularMap!==void 0&&(f.specularMap=l(n.specularMap)),n.specularIntensityMap!==void 0&&(f.specularIntensityMap=l(n.specularIntensityMap)),n.specularColorMap!==void 0&&(f.specularColorMap=l(n.specularColorMap)),n.envMap!==void 0&&(f.envMap=l(n.envMap)),n.envMapRotation!==void 0&&f.envMapRotation.fromArray(n.envMapRotation),n.envMapIntensity!==void 0&&(f.envMapIntensity=n.envMapIntensity),n.reflectivity!==void 0&&(f.reflectivity=n.reflectivity),n.refractionRatio!==void 0&&(f.refractionRatio=n.refractionRatio),n.lightMap!==void 0&&(f.lightMap=l(n.lightMap)),n.lightMapIntensity!==void 0&&(f.lightMapIntensity=n.lightMapIntensity),n.aoMap!==void 0&&(f.aoMap=l(n.aoMap)),n.aoMapIntensity!==void 0&&(f.aoMapIntensity=n.aoMapIntensity),n.gradientMap!==void 0&&(f.gradientMap=l(n.gradientMap)),n.clearcoatMap!==void 0&&(f.clearcoatMap=l(n.clearcoatMap)),n.clearcoatRoughnessMap!==void 0&&(f.clearcoatRoughnessMap=l(n.clearcoatRoughnessMap)),n.clearcoatNormalMap!==void 0&&(f.clearcoatNormalMap=l(n.clearcoatNormalMap)),n.clearcoatNormalScale!==void 0&&(f.clearcoatNormalScale=new sn().fromArray(n.clearcoatNormalScale)),n.iridescenceMap!==void 0&&(f.iridescenceMap=l(n.iridescenceMap)),n.iridescenceThicknessMap!==void 0&&(f.iridescenceThicknessMap=l(n.iridescenceThicknessMap)),n.transmissionMap!==void 0&&(f.transmissionMap=l(n.transmissionMap)),n.thicknessMap!==void 0&&(f.thicknessMap=l(n.thicknessMap)),n.anisotropyMap!==void 0&&(f.anisotropyMap=l(n.anisotropyMap)),n.sheenColorMap!==void 0&&(f.sheenColorMap=l(n.sheenColorMap)),n.sheenRoughnessMap!==void 0&&(f.sheenRoughnessMap=l(n.sheenRoughnessMap)),f}setTextures(n){return this.textures=n,this}static createMaterialFromType(n){const s={ShadowMaterial:KM,SpriteMaterial:F2,RawShaderMaterial:YM,ShaderMaterial:Vo,PointsMaterial:W2,MeshPhysicalMaterial:qM,MeshStandardMaterial:s3,MeshPhongMaterial:JM,MeshToonMaterial:ZM,MeshNormalMaterial:e6,MeshLambertMaterial:t6,MeshDepthMaterial:D2,MeshDistanceMaterial:L2,MeshBasicMaterial:Bc,MeshMatcapMaterial:n6,LineDashedMaterial:i6,LineBasicMaterial:Ra,Material:va};return new s[n]}}class m3{static decodeText(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let s="";for(let l=0,f=n.length;l<f;l++)s+=String.fromCharCode(n[l]);try{return decodeURIComponent(escape(s))}catch{return s}}static extractUrlBase(n){const s=n.lastIndexOf("/");return s===-1?"./":n.slice(0,s+1)}static resolveURL(n,s){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(s)&&/^\//.test(n)&&(s=s.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:s+n)}}class M6 extends Zi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(n){return super.copy(n),this.instanceCount=n.instanceCount,this}toJSON(){const n=super.toJSON();return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}}class _6 extends za{constructor(n){super(n)}load(n,s,l,f){const b=this,I=new Yl(b.manager);I.setPath(b.path),I.setRequestHeader(b.requestHeader),I.setWithCredentials(b.withCredentials),I.load(n,function(R){try{s(b.parse(JSON.parse(R)))}catch(U){f?f(U):console.error(U),b.manager.itemError(n)}},l,f)}parse(n){const s={},l={};function f(te,ae){if(s[ae]!==void 0)return s[ae];const oe=te.interleavedBuffers[ae],ne=b(te,oe.buffer),Ie=Ec(oe.type,ne),Ce=new Um(Ie,oe.stride);return Ce.uuid=oe.uuid,s[ae]=Ce,Ce}function b(te,ae){if(l[ae]!==void 0)return l[ae];const oe=te.arrayBuffers[ae],ne=new Uint32Array(oe).buffer;return l[ae]=ne,ne}const I=n.isInstancedBufferGeometry?new M6:new Zi,R=n.data.index;if(R!==void 0){const te=Ec(R.type,R.array);I.setIndex(new Gr(te,1))}const U=n.data.attributes;for(const te in U){const ae=U[te];let he;if(ae.isInterleavedBufferAttribute){const oe=f(n.data,ae.data);he=new Du(oe,ae.itemSize,ae.offset,ae.normalized)}else{const oe=Ec(ae.type,ae.array),ne=ae.isInstancedBufferAttribute?th:Gr;he=new ne(oe,ae.itemSize,ae.normalized)}ae.name!==void 0&&(he.name=ae.name),ae.usage!==void 0&&he.setUsage(ae.usage),I.setAttribute(te,he)}const V=n.data.morphAttributes;if(V)for(const te in V){const ae=V[te],he=[];for(let oe=0,ne=ae.length;oe<ne;oe++){const Ie=ae[oe];let Ce;if(Ie.isInterleavedBufferAttribute){const Me=f(n.data,Ie.data);Ce=new Du(Me,Ie.itemSize,Ie.offset,Ie.normalized)}else{const Me=Ec(Ie.type,Ie.array);Ce=new Gr(Me,Ie.itemSize,Ie.normalized)}Ie.name!==void 0&&(Ce.name=Ie.name),he.push(Ce)}I.morphAttributes[te]=he}n.data.morphTargetsRelative&&(I.morphTargetsRelative=!0);const Z=n.data.groups||n.data.drawcalls||n.data.offsets;if(Z!==void 0)for(let te=0,ae=Z.length;te!==ae;++te){const he=Z[te];I.addGroup(he.start,he.count,he.materialIndex)}const ee=n.data.boundingSphere;if(ee!==void 0){const te=new Ve;ee.center!==void 0&&te.fromArray(ee.center),I.boundingSphere=new Us(te,ee.radius)}return n.name&&(I.name=n.name),n.userData&&(I.userData=n.userData),I}}class cU extends za{constructor(n){super(n)}load(n,s,l,f){const b=this,I=this.path===""?m3.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||I;const R=new Yl(this.manager);R.setPath(this.path),R.setRequestHeader(this.requestHeader),R.setWithCredentials(this.withCredentials),R.load(n,function(U){let V=null;try{V=JSON.parse(U)}catch(Z){f!==void 0&&f(Z),console.error("THREE:ObjectLoader: Can't parse "+n+".",Z.message);return}const $=V.metadata;if($===void 0||$.type===void 0||$.type.toLowerCase()==="geometry"){f!==void 0&&f(new Error("THREE.ObjectLoader: Can't load "+n)),console.error("THREE.ObjectLoader: Can't load "+n);return}b.parse(V,s)},l,f)}async loadAsync(n,s){const l=this,f=this.path===""?m3.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||f;const b=new Yl(this.manager);b.setPath(this.path),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials);const I=await b.loadAsync(n,s),R=JSON.parse(I),U=R.metadata;if(U===void 0||U.type===void 0||U.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+n);return await l.parseAsync(R)}parse(n,s){const l=this.parseAnimations(n.animations),f=this.parseShapes(n.shapes),b=this.parseGeometries(n.geometries,f),I=this.parseImages(n.images,function(){s!==void 0&&s(V)}),R=this.parseTextures(n.textures,I),U=this.parseMaterials(n.materials,R),V=this.parseObject(n.object,b,U,R,l),$=this.parseSkeletons(n.skeletons,V);if(this.bindSkeletons(V,$),s!==void 0){let Z=!1;for(const ee in I)if(I[ee].data instanceof HTMLImageElement){Z=!0;break}Z===!1&&s(V)}return V}async parseAsync(n){const s=this.parseAnimations(n.animations),l=this.parseShapes(n.shapes),f=this.parseGeometries(n.geometries,l),b=await this.parseImagesAsync(n.images),I=this.parseTextures(n.textures,b),R=this.parseMaterials(n.materials,I),U=this.parseObject(n.object,f,R,I,s),V=this.parseSkeletons(n.skeletons,U);return this.bindSkeletons(U,V),U}parseShapes(n){const s={};if(n!==void 0)for(let l=0,f=n.length;l<f;l++){const b=new Pu().fromJSON(n[l]);s[b.uuid]=b}return s}parseSkeletons(n,s){const l={},f={};if(s.traverse(function(b){b.isBone&&(f[b.uuid]=b)}),n!==void 0)for(let b=0,I=n.length;b<I;b++){const R=new Wm().fromJSON(n[b],f);l[R.uuid]=R}return l}parseGeometries(n,s){const l={};if(n!==void 0){const b=new _6;for(let I=0,R=n.length;I<R;I++){let U;const V=n[I];switch(V.type){case"BufferGeometry":case"InstancedBufferGeometry":U=b.parse(V);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var f=new THREE.LegacyJSONLoader;U=f.parse(V,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:V.type in XM?U=XM[V.type].fromJSON(V,s):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${V.type}"`)}U.uuid=V.uuid,V.name!==void 0&&(U.name=V.name),V.userData!==void 0&&(U.userData=V.userData),l[V.uuid]=U}}return l}parseMaterials(n,s){const l={},f={};if(n!==void 0){const b=new Cp;b.setTextures(s);for(let I=0,R=n.length;I<R;I++){const U=n[I];l[U.uuid]===void 0&&(l[U.uuid]=b.parse(U)),f[U.uuid]=l[U.uuid]}}return f}parseAnimations(n){const s={};if(n!==void 0)for(let l=0;l<n.length;l++){const f=n[l],b=Jd.parse(f);s[b.uuid]=b}return s}parseImages(n,s){const l=this,f={};let b;function I(U){return l.manager.itemStart(U),b.load(U,function(){l.manager.itemEnd(U)},void 0,function(){l.manager.itemError(U),l.manager.itemEnd(U)})}function R(U){if(typeof U=="string"){const V=U,$=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(V)?V:l.resourcePath+V;return I($)}else return U.data?{data:Ec(U.type,U.data),width:U.width,height:U.height}:null}if(n!==void 0&&n.length>0){const U=new u3(s);b=new Zd(U),b.setCrossOrigin(this.crossOrigin);for(let V=0,$=n.length;V<$;V++){const Z=n[V],ee=Z.url;if(Array.isArray(ee)){const te=[];for(let ae=0,he=ee.length;ae<he;ae++){const oe=ee[ae],ne=R(oe);ne!==null&&(ne instanceof HTMLImageElement?te.push(ne):te.push(new Dc(ne.data,ne.width,ne.height)))}f[Z.uuid]=new ls(te)}else{const te=R(Z.url);f[Z.uuid]=new ls(te)}}}return f}async parseImagesAsync(n){const s=this,l={};let f;async function b(I){if(typeof I=="string"){const R=I,U=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(R)?R:s.resourcePath+R;return await f.loadAsync(U)}else return I.data?{data:Ec(I.type,I.data),width:I.width,height:I.height}:null}if(n!==void 0&&n.length>0){f=new Zd(this.manager),f.setCrossOrigin(this.crossOrigin);for(let I=0,R=n.length;I<R;I++){const U=n[I],V=U.url;if(Array.isArray(V)){const $=[];for(let Z=0,ee=V.length;Z<ee;Z++){const te=V[Z],ae=await b(te);ae!==null&&(ae instanceof HTMLImageElement?$.push(ae):$.push(new Dc(ae.data,ae.width,ae.height)))}l[U.uuid]=new ls($)}else{const $=await b(U.url);l[U.uuid]=new ls($)}}}return l}parseTextures(n,s){function l(b,I){return typeof b=="number"?b:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",b),I[b])}const f={};if(n!==void 0)for(let b=0,I=n.length;b<I;b++){const R=n[b];R.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',R.uuid),s[R.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",R.image);const U=s[R.image],V=U.data;let $;Array.isArray(V)?($=new Bd,V.length===6&&($.needsUpdate=!0)):(V&&V.data?$=new Dc:$=new qr,V&&($.needsUpdate=!0)),$.source=U,$.uuid=R.uuid,R.name!==void 0&&($.name=R.name),R.mapping!==void 0&&($.mapping=l(R.mapping,uU)),R.channel!==void 0&&($.channel=R.channel),R.offset!==void 0&&$.offset.fromArray(R.offset),R.repeat!==void 0&&$.repeat.fromArray(R.repeat),R.center!==void 0&&$.center.fromArray(R.center),R.rotation!==void 0&&($.rotation=R.rotation),R.wrap!==void 0&&($.wrapS=l(R.wrap[0],C6),$.wrapT=l(R.wrap[1],C6)),R.format!==void 0&&($.format=R.format),R.internalFormat!==void 0&&($.internalFormat=R.internalFormat),R.type!==void 0&&($.type=R.type),R.colorSpace!==void 0&&($.colorSpace=R.colorSpace),R.minFilter!==void 0&&($.minFilter=l(R.minFilter,E6)),R.magFilter!==void 0&&($.magFilter=l(R.magFilter,E6)),R.anisotropy!==void 0&&($.anisotropy=R.anisotropy),R.flipY!==void 0&&($.flipY=R.flipY),R.generateMipmaps!==void 0&&($.generateMipmaps=R.generateMipmaps),R.premultiplyAlpha!==void 0&&($.premultiplyAlpha=R.premultiplyAlpha),R.unpackAlignment!==void 0&&($.unpackAlignment=R.unpackAlignment),R.compareFunction!==void 0&&($.compareFunction=R.compareFunction),R.userData!==void 0&&($.userData=R.userData),f[R.uuid]=$}return f}parseObject(n,s,l,f,b){let I;function R(ee){return s[ee]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",ee),s[ee]}function U(ee){if(ee!==void 0){if(Array.isArray(ee)){const te=[];for(let ae=0,he=ee.length;ae<he;ae++){const oe=ee[ae];l[oe]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",oe),te.push(l[oe])}return te}return l[ee]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ee),l[ee]}}function V(ee){return f[ee]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",ee),f[ee]}let $,Z;switch(n.type){case"Scene":I=new sM,n.background!==void 0&&(Number.isInteger(n.background)?I.background=new Kn(n.background):I.background=V(n.background)),n.environment!==void 0&&(I.environment=V(n.environment)),n.fog!==void 0&&(n.fog.type==="Fog"?I.fog=new km(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(I.fog=new Fm(n.fog.color,n.fog.density)),n.fog.name!==""&&(I.fog.name=n.fog.name)),n.backgroundBlurriness!==void 0&&(I.backgroundBlurriness=n.backgroundBlurriness),n.backgroundIntensity!==void 0&&(I.backgroundIntensity=n.backgroundIntensity),n.backgroundRotation!==void 0&&I.backgroundRotation.fromArray(n.backgroundRotation),n.environmentIntensity!==void 0&&(I.environmentIntensity=n.environmentIntensity),n.environmentRotation!==void 0&&I.environmentRotation.fromArray(n.environmentRotation);break;case"PerspectiveCamera":I=new Vs(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(I.focus=n.focus),n.zoom!==void 0&&(I.zoom=n.zoom),n.filmGauge!==void 0&&(I.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(I.filmOffset=n.filmOffset),n.view!==void 0&&(I.view=Object.assign({},n.view));break;case"OrthographicCamera":I=new Dm(n.left,n.right,n.top,n.bottom,n.near,n.far),n.zoom!==void 0&&(I.zoom=n.zoom),n.view!==void 0&&(I.view=Object.assign({},n.view));break;case"AmbientLight":I=new A6(n.color,n.intensity);break;case"DirectionalLight":I=new g6(n.color,n.intensity);break;case"PointLight":I=new p6(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":I=new v6(n.color,n.intensity,n.width,n.height);break;case"SpotLight":I=new f6(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);break;case"HemisphereLight":I=new u6(n.color,n.groundColor,n.intensity);break;case"LightProbe":I=new b6().fromJSON(n);break;case"SkinnedMesh":$=R(n.geometry),Z=U(n.material),I=new AM($,Z),n.bindMode!==void 0&&(I.bindMode=n.bindMode),n.bindMatrix!==void 0&&I.bindMatrix.fromArray(n.bindMatrix),n.skeleton!==void 0&&(I.skeleton=n.skeleton);break;case"Mesh":$=R(n.geometry),Z=U(n.material),I=new Ds($,Z);break;case"InstancedMesh":$=R(n.geometry),Z=U(n.material);const ee=n.count,te=n.instanceMatrix,ae=n.instanceColor;I=new MM($,Z,ee),I.instanceMatrix=new th(new Float32Array(te.array),16),ae!==void 0&&(I.instanceColor=new th(new Float32Array(ae.array),ae.itemSize));break;case"BatchedMesh":$=R(n.geometry),Z=U(n.material),I=new EM(n.maxGeometryCount,n.maxVertexCount,n.maxIndexCount,Z),I.geometry=$,I.perObjectFrustumCulled=n.perObjectFrustumCulled,I.sortObjects=n.sortObjects,I._drawRanges=n.drawRanges,I._reservedRanges=n.reservedRanges,I._visibility=n.visibility,I._active=n.active,I._bounds=n.bounds.map(he=>{const oe=new fs;oe.min.fromArray(he.boxMin),oe.max.fromArray(he.boxMax);const ne=new Us;return ne.radius=he.sphereRadius,ne.center.fromArray(he.sphereCenter),{boxInitialized:he.boxInitialized,box:oe,sphereInitialized:he.sphereInitialized,sphere:ne}}),I._maxGeometryCount=n.maxGeometryCount,I._maxVertexCount=n.maxVertexCount,I._maxIndexCount=n.maxIndexCount,I._geometryInitialized=n.geometryInitialized,I._geometryCount=n.geometryCount,I._matricesTexture=V(n.matricesTexture.uuid);break;case"LOD":I=new hM;break;case"Line":I=new Pc(R(n.geometry),U(n.material));break;case"LineLoop":I=new TM(R(n.geometry),U(n.material));break;case"LineSegments":I=new hl(R(n.geometry),U(n.material));break;case"PointCloud":case"Points":I=new RM(R(n.geometry),U(n.material));break;case"Sprite":I=new cM(U(n.material));break;case"Group":I=new Ru;break;case"Bone":I=new V2;break;default:I=new Cr}if(I.uuid=n.uuid,n.name!==void 0&&(I.name=n.name),n.matrix!==void 0?(I.matrix.fromArray(n.matrix),n.matrixAutoUpdate!==void 0&&(I.matrixAutoUpdate=n.matrixAutoUpdate),I.matrixAutoUpdate&&I.matrix.decompose(I.position,I.quaternion,I.scale)):(n.position!==void 0&&I.position.fromArray(n.position),n.rotation!==void 0&&I.rotation.fromArray(n.rotation),n.quaternion!==void 0&&I.quaternion.fromArray(n.quaternion),n.scale!==void 0&&I.scale.fromArray(n.scale)),n.up!==void 0&&I.up.fromArray(n.up),n.castShadow!==void 0&&(I.castShadow=n.castShadow),n.receiveShadow!==void 0&&(I.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.bias!==void 0&&(I.shadow.bias=n.shadow.bias),n.shadow.normalBias!==void 0&&(I.shadow.normalBias=n.shadow.normalBias),n.shadow.radius!==void 0&&(I.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&I.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(I.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(I.visible=n.visible),n.frustumCulled!==void 0&&(I.frustumCulled=n.frustumCulled),n.renderOrder!==void 0&&(I.renderOrder=n.renderOrder),n.userData!==void 0&&(I.userData=n.userData),n.layers!==void 0&&(I.layers.mask=n.layers),n.children!==void 0){const ee=n.children;for(let te=0;te<ee.length;te++)I.add(this.parseObject(ee[te],s,l,f,b))}if(n.animations!==void 0){const ee=n.animations;for(let te=0;te<ee.length;te++){const ae=ee[te];I.animations.push(b[ae])}}if(n.type==="LOD"){n.autoUpdate!==void 0&&(I.autoUpdate=n.autoUpdate);const ee=n.levels;for(let te=0;te<ee.length;te++){const ae=ee[te],he=I.getObjectByProperty("uuid",ae.object);he!==void 0&&I.addLevel(he,ae.distance,ae.hysteresis)}}return I}bindSkeletons(n,s){Object.keys(s).length!==0&&n.traverse(function(l){if(l.isSkinnedMesh===!0&&l.skeleton!==void 0){const f=s[l.skeleton];f===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",l.skeleton):l.bind(f,l.bindMatrix)}})}}const uU={UVMapping:ke,CubeReflectionMapping:ce,CubeRefractionMapping:X,EquirectangularReflectionMapping:Y,EquirectangularRefractionMapping:be,CubeUVReflectionMapping:Te},C6={RepeatWrapping:We,ClampToEdgeWrapping:tt,MirroredRepeatWrapping:wt},E6={NearestFilter:Zt,NearestMipmapNearestFilter:qt,NearestMipmapLinearFilter:Qt,LinearFilter:Fn,LinearMipmapNearestFilter:Br,LinearMipmapLinearFilter:qi};class hU extends za{constructor(n){super(n),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(n){return this.options=n,this}load(n,s,l,f){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const b=this,I=Xl.get(n);if(I!==void 0){if(b.manager.itemStart(n),I.then){I.then(V=>{s&&s(V),b.manager.itemEnd(n)}).catch(V=>{f&&f(V)});return}return setTimeout(function(){s&&s(I),b.manager.itemEnd(n)},0),I}const R={};R.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",R.headers=this.requestHeader;const U=fetch(n,R).then(function(V){return V.blob()}).then(function(V){return createImageBitmap(V,Object.assign(b.options,{colorSpaceConversion:"none"}))}).then(function(V){return Xl.add(n,V),s&&s(V),b.manager.itemEnd(n),V}).catch(function(V){f&&f(V),Xl.remove(n),b.manager.itemError(n),b.manager.itemEnd(n)});Xl.add(n,U),b.manager.itemStart(n)}}let Ep;class p3{static getContext(){return Ep===void 0&&(Ep=new(window.AudioContext||window.webkitAudioContext)),Ep}static setContext(n){Ep=n}}class dU extends za{constructor(n){super(n)}load(n,s,l,f){const b=this,I=new Yl(this.manager);I.setResponseType("arraybuffer"),I.setPath(this.path),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials),I.load(n,function(U){try{const V=U.slice(0);p3.getContext().decodeAudioData(V,function(Z){s(Z)}).catch(R)}catch(V){R(V)}},l,f);function R(U){f?f(U):console.error(U),b.manager.itemError(n)}}}const w6=new ii,x6=new ii,Gu=new ii;class fU{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Vs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Vs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(n){const s=this._cache;if(s.focus!==n.focus||s.fov!==n.fov||s.aspect!==n.aspect*this.aspect||s.near!==n.near||s.far!==n.far||s.zoom!==n.zoom||s.eyeSep!==this.eyeSep){s.focus=n.focus,s.fov=n.fov,s.aspect=n.aspect*this.aspect,s.near=n.near,s.far=n.far,s.zoom=n.zoom,s.eyeSep=this.eyeSep,Gu.copy(n.projectionMatrix);const f=s.eyeSep/2,b=f*s.near/s.focus,I=s.near*Math.tan(Gl*s.fov*.5)/s.zoom;let R,U;x6.elements[12]=-f,w6.elements[12]=f,R=-I*s.aspect+b,U=I*s.aspect+b,Gu.elements[0]=2*s.near/(U-R),Gu.elements[8]=(U+R)/(U-R),this.cameraL.projectionMatrix.copy(Gu),R=-I*s.aspect-b,U=I*s.aspect-b,Gu.elements[0]=2*s.near/(U-R),Gu.elements[8]=(U+R)/(U-R),this.cameraR.projectionMatrix.copy(Gu)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(x6),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(w6)}}class S6{constructor(n=!0){this.autoStart=n,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=I6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const s=I6();n=(s-this.oldTime)/1e3,this.oldTime=s,this.elapsedTime+=n}return n}}function I6(){return(typeof performance>"u"?Date:performance).now()}const Vu=new Ve,T6=new _r,mU=new Ve,Qu=new Ve;class pU extends Cr{constructor(){super(),this.type="AudioListener",this.context=p3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new S6}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(n){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=n,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}updateMatrixWorld(n){super.updateMatrixWorld(n);const s=this.context.listener,l=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Vu,T6,mU),Qu.set(0,0,-1).applyQuaternion(T6),s.positionX){const f=this.context.currentTime+this.timeDelta;s.positionX.linearRampToValueAtTime(Vu.x,f),s.positionY.linearRampToValueAtTime(Vu.y,f),s.positionZ.linearRampToValueAtTime(Vu.z,f),s.forwardX.linearRampToValueAtTime(Qu.x,f),s.forwardY.linearRampToValueAtTime(Qu.y,f),s.forwardZ.linearRampToValueAtTime(Qu.z,f),s.upX.linearRampToValueAtTime(l.x,f),s.upY.linearRampToValueAtTime(l.y,f),s.upZ.linearRampToValueAtTime(l.z,f)}else s.setPosition(Vu.x,Vu.y,Vu.z),s.setOrientation(Qu.x,Qu.y,Qu.z,l.x,l.y,l.z)}}class B6 extends Cr{constructor(n){super(),this.type="Audio",this.listener=n,this.context=n.context,this.gain=this.context.createGain(),this.gain.connect(n.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(n){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=n,this.connect(),this}setMediaElementSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(n),this.connect(),this}setMediaStreamSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(n),this.connect(),this}setBuffer(n){return this.buffer=n,this.sourceType="buffer",this.autoplay&&this.play(),this}play(n=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+n;const s=this.context.createBufferSource();return s.buffer=this.buffer,s.loop=this.loop,s.loopStart=this.loopStart,s.loopEnd=this.loopEnd,s.onended=this.onEnded.bind(this),s.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=s,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let n=1,s=this.filters.length;n<s;n++)this.filters[n-1].connect(this.filters[n]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let n=1,s=this.filters.length;n<s;n++)this.filters[n-1].disconnect(this.filters[n]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(n){return n||(n=[]),this._connected===!0?(this.disconnect(),this.filters=n.slice(),this.connect()):this.filters=n.slice(),this}setDetune(n){return this.detune=n,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(n){return this.setFilters(n?[n]:[])}setPlaybackRate(n){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=n,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(n){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=n,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(n){return this.loopStart=n,this}setLoopEnd(n){return this.loopEnd=n,this}getVolume(){return this.gain.gain.value}setVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}}const Hu=new Ve,R6=new _r,gU=new Ve,zu=new Ve;class AU extends B6{constructor(n){super(n),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(n){return this.panner.refDistance=n,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(n){return this.panner.rolloffFactor=n,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(n){return this.panner.distanceModel=n,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(n){return this.panner.maxDistance=n,this}setDirectionalCone(n,s,l){return this.panner.coneInnerAngle=n,this.panner.coneOuterAngle=s,this.panner.coneOuterGain=l,this}updateMatrixWorld(n){if(super.updateMatrixWorld(n),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Hu,R6,gU),zu.set(0,0,1).applyQuaternion(R6);const s=this.panner;if(s.positionX){const l=this.context.currentTime+this.listener.timeDelta;s.positionX.linearRampToValueAtTime(Hu.x,l),s.positionY.linearRampToValueAtTime(Hu.y,l),s.positionZ.linearRampToValueAtTime(Hu.z,l),s.orientationX.linearRampToValueAtTime(zu.x,l),s.orientationY.linearRampToValueAtTime(zu.y,l),s.orientationZ.linearRampToValueAtTime(zu.z,l)}else s.setPosition(Hu.x,Hu.y,Hu.z),s.setOrientation(zu.x,zu.y,zu.z)}}class vU{constructor(n,s=2048){this.analyser=n.context.createAnalyser(),this.analyser.fftSize=s,this.data=new Uint8Array(this.analyser.frequencyBinCount),n.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let n=0;const s=this.getFrequencyData();for(let l=0;l<s.length;l++)n+=s[l];return n/s.length}}class O6{constructor(n,s,l){this.binding=n,this.valueSize=l;let f,b,I;switch(s){case"quaternion":f=this._slerp,b=this._slerpAdditive,I=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(l*6),this._workIndex=5;break;case"string":case"bool":f=this._select,b=this._select,I=this._setAdditiveIdentityOther,this.buffer=new Array(l*5);break;default:f=this._lerp,b=this._lerpAdditive,I=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(l*5)}this._mixBufferRegion=f,this._mixBufferRegionAdditive=b,this._setIdentity=I,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(n,s){const l=this.buffer,f=this.valueSize,b=n*f+f;let I=this.cumulativeWeight;if(I===0){for(let R=0;R!==f;++R)l[b+R]=l[R];I=s}else{I+=s;const R=s/I;this._mixBufferRegion(l,b,0,R,f)}this.cumulativeWeight=I}accumulateAdditive(n){const s=this.buffer,l=this.valueSize,f=l*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(s,f,0,n,l),this.cumulativeWeightAdditive+=n}apply(n){const s=this.valueSize,l=this.buffer,f=n*s+s,b=this.cumulativeWeight,I=this.cumulativeWeightAdditive,R=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,b<1){const U=s*this._origIndex;this._mixBufferRegion(l,f,U,1-b,s)}I>0&&this._mixBufferRegionAdditive(l,f,this._addIndex*s,1,s);for(let U=s,V=s+s;U!==V;++U)if(l[U]!==l[U+s]){R.setValue(l,f);break}}saveOriginalState(){const n=this.binding,s=this.buffer,l=this.valueSize,f=l*this._origIndex;n.getValue(s,f);for(let b=l,I=f;b!==I;++b)s[b]=s[f+b%l];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const n=this.valueSize*3;this.binding.setValue(this.buffer,n)}_setAdditiveIdentityNumeric(){const n=this._addIndex*this.valueSize,s=n+this.valueSize;for(let l=n;l<s;l++)this.buffer[l]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const n=this._origIndex*this.valueSize,s=this._addIndex*this.valueSize;for(let l=0;l<this.valueSize;l++)this.buffer[s+l]=this.buffer[n+l]}_select(n,s,l,f,b){if(f>=.5)for(let I=0;I!==b;++I)n[s+I]=n[l+I]}_slerp(n,s,l,f){_r.slerpFlat(n,s,n,s,n,l,f)}_slerpAdditive(n,s,l,f,b){const I=this._workIndex*b;_r.multiplyQuaternionsFlat(n,I,n,s,n,l),_r.slerpFlat(n,s,n,s,n,I,f)}_lerp(n,s,l,f,b){const I=1-f;for(let R=0;R!==b;++R){const U=s+R;n[U]=n[U]*I+n[l+R]*f}}_lerpAdditive(n,s,l,f,b){for(let I=0;I!==b;++I){const R=s+I;n[R]=n[R]+n[l+I]*f}}}const g3="\\[\\]\\.:\\/",yU=new RegExp("["+g3+"]","g"),A3="[^"+g3+"]",bU="[^"+g3.replace("\\.","")+"]",MU=/((?:WC+[\/:])*)/.source.replace("WC",A3),_U=/(WCOD+)?/.source.replace("WCOD",bU),CU=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",A3),EU=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",A3),wU=new RegExp("^"+MU+_U+CU+EU+"$"),xU=["material","materials","bones","map"];class SU{constructor(n,s,l){const f=l||br.parseTrackName(s);this._targetGroup=n,this._bindings=n.subscribe_(s,f)}getValue(n,s){this.bind();const l=this._targetGroup.nCachedObjects_,f=this._bindings[l];f!==void 0&&f.getValue(n,s)}setValue(n,s){const l=this._bindings;for(let f=this._targetGroup.nCachedObjects_,b=l.length;f!==b;++f)l[f].setValue(n,s)}bind(){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,l=n.length;s!==l;++s)n[s].bind()}unbind(){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,l=n.length;s!==l;++s)n[s].unbind()}}class br{constructor(n,s,l){this.path=s,this.parsedPath=l||br.parseTrackName(s),this.node=br.findNode(n,this.parsedPath.nodeName),this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,s,l){return n&&n.isAnimationObjectGroup?new br.Composite(n,s,l):new br(n,s,l)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(yU,"")}static parseTrackName(n){const s=wU.exec(n);if(s===null)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const l={nodeName:s[2],objectName:s[3],objectIndex:s[4],propertyName:s[5],propertyIndex:s[6]},f=l.nodeName&&l.nodeName.lastIndexOf(".");if(f!==void 0&&f!==-1){const b=l.nodeName.substring(f+1);xU.indexOf(b)!==-1&&(l.nodeName=l.nodeName.substring(0,f),l.objectName=b)}if(l.propertyName===null||l.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return l}static findNode(n,s){if(s===void 0||s===""||s==="."||s===-1||s===n.name||s===n.uuid)return n;if(n.skeleton){const l=n.skeleton.getBoneByName(s);if(l!==void 0)return l}if(n.children){const l=function(b){for(let I=0;I<b.length;I++){const R=b[I];if(R.name===s||R.uuid===s)return R;const U=l(R.children);if(U)return U}return null},f=l(n.children);if(f)return f}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,s){n[s]=this.targetObject[this.propertyName]}_getValue_array(n,s){const l=this.resolvedProperty;for(let f=0,b=l.length;f!==b;++f)n[s++]=l[f]}_getValue_arrayElement(n,s){n[s]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,s){this.resolvedProperty.toArray(n,s)}_setValue_direct(n,s){this.targetObject[this.propertyName]=n[s]}_setValue_direct_setNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,s){this.targetObject[this.propertyName]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,s){const l=this.resolvedProperty;for(let f=0,b=l.length;f!==b;++f)l[f]=n[s++]}_setValue_array_setNeedsUpdate(n,s){const l=this.resolvedProperty;for(let f=0,b=l.length;f!==b;++f)l[f]=n[s++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,s){const l=this.resolvedProperty;for(let f=0,b=l.length;f!==b;++f)l[f]=n[s++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,s){this.resolvedProperty[this.propertyIndex]=n[s]}_setValue_arrayElement_setNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty[this.propertyIndex]=n[s],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,s){this.resolvedProperty.fromArray(n,s)}_setValue_fromArray_setNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,s){this.resolvedProperty.fromArray(n,s),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,s){this.bind(),this.getValue(n,s)}_setValue_unbound(n,s){this.bind(),this.setValue(n,s)}bind(){let n=this.node;const s=this.parsedPath,l=s.objectName,f=s.propertyName;let b=s.propertyIndex;if(n||(n=br.findNode(this.rootNode,s.nodeName),this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(l){let V=s.objectIndex;switch(l){case"materials":if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}n=n.material.materials;break;case"bones":if(!n.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}n=n.skeleton.bones;for(let $=0;$<n.length;$++)if(n[$].name===V){V=$;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}n=n.material.map;break;default:if(n[l]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}n=n[l]}if(V!==void 0){if(n[V]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);return}n=n[V]}}const I=n[f];if(I===void 0){const V=s.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+V+"."+f+" but it wasn't found.",n);return}let R=this.Versioning.None;this.targetObject=n,n.needsUpdate!==void 0?R=this.Versioning.NeedsUpdate:n.matrixWorldNeedsUpdate!==void 0&&(R=this.Versioning.MatrixWorldNeedsUpdate);let U=this.BindingType.Direct;if(b!==void 0){if(f==="morphTargetInfluences"){if(!n.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!n.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}n.morphTargetDictionary[b]!==void 0&&(b=n.morphTargetDictionary[b])}U=this.BindingType.ArrayElement,this.resolvedProperty=I,this.propertyIndex=b}else I.fromArray!==void 0&&I.toArray!==void 0?(U=this.BindingType.HasFromToArray,this.resolvedProperty=I):Array.isArray(I)?(U=this.BindingType.EntireArray,this.resolvedProperty=I):this.propertyName=f;this.getValue=this.GetterByBindingType[U],this.setValue=this.SetterByBindingTypeAndVersioning[U][R]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}br.Composite=SU,br.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},br.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},br.prototype.GetterByBindingType=[br.prototype._getValue_direct,br.prototype._getValue_array,br.prototype._getValue_arrayElement,br.prototype._getValue_toArray],br.prototype.SetterByBindingTypeAndVersioning=[[br.prototype._setValue_direct,br.prototype._setValue_direct_setNeedsUpdate,br.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[br.prototype._setValue_array,br.prototype._setValue_array_setNeedsUpdate,br.prototype._setValue_array_setMatrixWorldNeedsUpdate],[br.prototype._setValue_arrayElement,br.prototype._setValue_arrayElement_setNeedsUpdate,br.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[br.prototype._setValue_fromArray,br.prototype._setValue_fromArray_setNeedsUpdate,br.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class IU{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Sa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const n={};this._indicesByUUID=n;for(let l=0,f=arguments.length;l!==f;++l)n[arguments[l].uuid]=l;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const s=this;this.stats={objects:{get total(){return s._objects.length},get inUse(){return this.total-s.nCachedObjects_}},get bindingsPerObject(){return s._bindings.length}}}add(){const n=this._objects,s=this._indicesByUUID,l=this._paths,f=this._parsedPaths,b=this._bindings,I=b.length;let R,U=n.length,V=this.nCachedObjects_;for(let $=0,Z=arguments.length;$!==Z;++$){const ee=arguments[$],te=ee.uuid;let ae=s[te];if(ae===void 0){ae=U++,s[te]=ae,n.push(ee);for(let he=0,oe=I;he!==oe;++he)b[he].push(new br(ee,l[he],f[he]))}else if(ae<V){R=n[ae];const he=--V,oe=n[he];s[oe.uuid]=ae,n[ae]=oe,s[te]=he,n[he]=ee;for(let ne=0,Ie=I;ne!==Ie;++ne){const Ce=b[ne],Me=Ce[he];let Je=Ce[ae];Ce[ae]=Me,Je===void 0&&(Je=new br(ee,l[ne],f[ne])),Ce[he]=Je}}else n[ae]!==R&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=V}remove(){const n=this._objects,s=this._indicesByUUID,l=this._bindings,f=l.length;let b=this.nCachedObjects_;for(let I=0,R=arguments.length;I!==R;++I){const U=arguments[I],V=U.uuid,$=s[V];if($!==void 0&&$>=b){const Z=b++,ee=n[Z];s[ee.uuid]=$,n[$]=ee,s[V]=Z,n[Z]=U;for(let te=0,ae=f;te!==ae;++te){const he=l[te],oe=he[Z],ne=he[$];he[$]=oe,he[Z]=ne}}}this.nCachedObjects_=b}uncache(){const n=this._objects,s=this._indicesByUUID,l=this._bindings,f=l.length;let b=this.nCachedObjects_,I=n.length;for(let R=0,U=arguments.length;R!==U;++R){const V=arguments[R],$=V.uuid,Z=s[$];if(Z!==void 0)if(delete s[$],Z<b){const ee=--b,te=n[ee],ae=--I,he=n[ae];s[te.uuid]=Z,n[Z]=te,s[he.uuid]=ee,n[ee]=he,n.pop();for(let oe=0,ne=f;oe!==ne;++oe){const Ie=l[oe],Ce=Ie[ee],Me=Ie[ae];Ie[Z]=Ce,Ie[ee]=Me,Ie.pop()}}else{const ee=--I,te=n[ee];ee>0&&(s[te.uuid]=Z),n[Z]=te,n.pop();for(let ae=0,he=f;ae!==he;++ae){const oe=l[ae];oe[Z]=oe[ee],oe.pop()}}}this.nCachedObjects_=b}subscribe_(n,s){const l=this._bindingsIndicesByPath;let f=l[n];const b=this._bindings;if(f!==void 0)return b[f];const I=this._paths,R=this._parsedPaths,U=this._objects,V=U.length,$=this.nCachedObjects_,Z=new Array(V);f=b.length,l[n]=f,I.push(n),R.push(s),b.push(Z);for(let ee=$,te=U.length;ee!==te;++ee){const ae=U[ee];Z[ee]=new br(ae,n,s)}return Z}unsubscribe_(n){const s=this._bindingsIndicesByPath,l=s[n];if(l!==void 0){const f=this._paths,b=this._parsedPaths,I=this._bindings,R=I.length-1,U=I[R],V=n[R];s[V]=l,I[l]=U,I.pop(),b[l]=b[R],b.pop(),f[l]=f[R],f.pop()}}}class D6{constructor(n,s,l=null,f=s.blendMode){this._mixer=n,this._clip=s,this._localRoot=l,this.blendMode=f;const b=s.tracks,I=b.length,R=new Array(I),U={endingStart:ds,endingEnd:ds};for(let V=0;V!==I;++V){const $=b[V].createInterpolant(null);R[V]=$,$.settings=U}this._interpolantSettings=U,this._interpolants=R,this._propertyBindings=new Array(I),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=at,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(n){return this._startTime=n,this}setLoop(n,s){return this.loop=n,this.repetitions=s,this}setEffectiveWeight(n){return this.weight=n,this._effectiveWeight=this.enabled?n:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(n){return this._scheduleFading(n,0,1)}fadeOut(n){return this._scheduleFading(n,1,0)}crossFadeFrom(n,s,l){if(n.fadeOut(s),this.fadeIn(s),l){const f=this._clip.duration,b=n._clip.duration,I=b/f,R=f/b;n.warp(1,I,s),this.warp(R,1,s)}return this}crossFadeTo(n,s,l){return n.crossFadeFrom(this,s,l)}stopFading(){const n=this._weightInterpolant;return n!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}setEffectiveTimeScale(n){return this.timeScale=n,this._effectiveTimeScale=this.paused?0:n,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(n){return this.timeScale=this._clip.duration/n,this.stopWarping()}syncWith(n){return this.time=n.time,this.timeScale=n.timeScale,this.stopWarping()}halt(n){return this.warp(this._effectiveTimeScale,0,n)}warp(n,s,l){const f=this._mixer,b=f.time,I=this.timeScale;let R=this._timeScaleInterpolant;R===null&&(R=f._lendControlInterpolant(),this._timeScaleInterpolant=R);const U=R.parameterPositions,V=R.sampleValues;return U[0]=b,U[1]=b+l,V[0]=n/I,V[1]=s/I,this}stopWarping(){const n=this._timeScaleInterpolant;return n!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(n,s,l,f){if(!this.enabled){this._updateWeight(n);return}const b=this._startTime;if(b!==null){const U=(n-b)*l;U<0||l===0?s=0:(this._startTime=null,s=l*U)}s*=this._updateTimeScale(n);const I=this._updateTime(s),R=this._updateWeight(n);if(R>0){const U=this._interpolants,V=this._propertyBindings;switch(this.blendMode){case ko:for(let $=0,Z=U.length;$!==Z;++$)U[$].evaluate(I),V[$].accumulateAdditive(R);break;case yo:default:for(let $=0,Z=U.length;$!==Z;++$)U[$].evaluate(I),V[$].accumulate(f,R)}}}_updateWeight(n){let s=0;if(this.enabled){s=this.weight;const l=this._weightInterpolant;if(l!==null){const f=l.evaluate(n)[0];s*=f,n>l.parameterPositions[1]&&(this.stopFading(),f===0&&(this.enabled=!1))}}return this._effectiveWeight=s,s}_updateTimeScale(n){let s=0;if(!this.paused){s=this.timeScale;const l=this._timeScaleInterpolant;if(l!==null){const f=l.evaluate(n)[0];s*=f,n>l.parameterPositions[1]&&(this.stopWarping(),s===0?this.paused=!0:this.timeScale=s)}}return this._effectiveTimeScale=s,s}_updateTime(n){const s=this._clip.duration,l=this.loop;let f=this.time+n,b=this._loopCount;const I=l===mi;if(n===0)return b===-1?f:I&&(b&1)===1?s-f:f;if(l===Rr){b===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(f>=s)f=s;else if(f<0)f=0;else{this.time=f;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=f,this._mixer.dispatchEvent({type:"finished",action:this,direction:n<0?-1:1})}}else{if(b===-1&&(n>=0?(b=0,this._setEndings(!0,this.repetitions===0,I)):this._setEndings(this.repetitions===0,!0,I)),f>=s||f<0){const R=Math.floor(f/s);f-=s*R,b+=Math.abs(R);const U=this.repetitions-b;if(U<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,f=n>0?s:0,this.time=f,this._mixer.dispatchEvent({type:"finished",action:this,direction:n>0?1:-1});else{if(U===1){const V=n<0;this._setEndings(V,!V,I)}else this._setEndings(!1,!1,I);this._loopCount=b,this.time=f,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:R})}}else this.time=f;if(I&&(b&1)===1)return s-f}return f}_setEndings(n,s,l){const f=this._interpolantSettings;l?(f.endingStart=qs,f.endingEnd=qs):(n?f.endingStart=this.zeroSlopeAtStart?qs:ds:f.endingStart=no,s?f.endingEnd=this.zeroSlopeAtEnd?qs:ds:f.endingEnd=no)}_scheduleFading(n,s,l){const f=this._mixer,b=f.time;let I=this._weightInterpolant;I===null&&(I=f._lendControlInterpolant(),this._weightInterpolant=I);const R=I.parameterPositions,U=I.sampleValues;return R[0]=b,U[0]=s,R[1]=b+n,U[1]=l,this}}const TU=new Float32Array(1);class BU extends xa{constructor(n){super(),this._root=n,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(n,s){const l=n._localRoot||this._root,f=n._clip.tracks,b=f.length,I=n._propertyBindings,R=n._interpolants,U=l.uuid,V=this._bindingsByRootAndName;let $=V[U];$===void 0&&($={},V[U]=$);for(let Z=0;Z!==b;++Z){const ee=f[Z],te=ee.name;let ae=$[te];if(ae!==void 0)++ae.referenceCount,I[Z]=ae;else{if(ae=I[Z],ae!==void 0){ae._cacheIndex===null&&(++ae.referenceCount,this._addInactiveBinding(ae,U,te));continue}const he=s&&s._propertyBindings[Z].binding.parsedPath;ae=new O6(br.create(l,te,he),ee.ValueTypeName,ee.getValueSize()),++ae.referenceCount,this._addInactiveBinding(ae,U,te),I[Z]=ae}R[Z].resultBuffer=ae.buffer}}_activateAction(n){if(!this._isActiveAction(n)){if(n._cacheIndex===null){const l=(n._localRoot||this._root).uuid,f=n._clip.uuid,b=this._actionsByClip[f];this._bindAction(n,b&&b.knownActions[0]),this._addInactiveAction(n,f,l)}const s=n._propertyBindings;for(let l=0,f=s.length;l!==f;++l){const b=s[l];b.useCount++===0&&(this._lendBinding(b),b.saveOriginalState())}this._lendAction(n)}}_deactivateAction(n){if(this._isActiveAction(n)){const s=n._propertyBindings;for(let l=0,f=s.length;l!==f;++l){const b=s[l];--b.useCount===0&&(b.restoreOriginalState(),this._takeBackBinding(b))}this._takeBackAction(n)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const n=this;this.stats={actions:{get total(){return n._actions.length},get inUse(){return n._nActiveActions}},bindings:{get total(){return n._bindings.length},get inUse(){return n._nActiveBindings}},controlInterpolants:{get total(){return n._controlInterpolants.length},get inUse(){return n._nActiveControlInterpolants}}}}_isActiveAction(n){const s=n._cacheIndex;return s!==null&&s<this._nActiveActions}_addInactiveAction(n,s,l){const f=this._actions,b=this._actionsByClip;let I=b[s];if(I===void 0)I={knownActions:[n],actionByRoot:{}},n._byClipCacheIndex=0,b[s]=I;else{const R=I.knownActions;n._byClipCacheIndex=R.length,R.push(n)}n._cacheIndex=f.length,f.push(n),I.actionByRoot[l]=n}_removeInactiveAction(n){const s=this._actions,l=s[s.length-1],f=n._cacheIndex;l._cacheIndex=f,s[f]=l,s.pop(),n._cacheIndex=null;const b=n._clip.uuid,I=this._actionsByClip,R=I[b],U=R.knownActions,V=U[U.length-1],$=n._byClipCacheIndex;V._byClipCacheIndex=$,U[$]=V,U.pop(),n._byClipCacheIndex=null;const Z=R.actionByRoot,ee=(n._localRoot||this._root).uuid;delete Z[ee],U.length===0&&delete I[b],this._removeInactiveBindingsForAction(n)}_removeInactiveBindingsForAction(n){const s=n._propertyBindings;for(let l=0,f=s.length;l!==f;++l){const b=s[l];--b.referenceCount===0&&this._removeInactiveBinding(b)}}_lendAction(n){const s=this._actions,l=n._cacheIndex,f=this._nActiveActions++,b=s[f];n._cacheIndex=f,s[f]=n,b._cacheIndex=l,s[l]=b}_takeBackAction(n){const s=this._actions,l=n._cacheIndex,f=--this._nActiveActions,b=s[f];n._cacheIndex=f,s[f]=n,b._cacheIndex=l,s[l]=b}_addInactiveBinding(n,s,l){const f=this._bindingsByRootAndName,b=this._bindings;let I=f[s];I===void 0&&(I={},f[s]=I),I[l]=n,n._cacheIndex=b.length,b.push(n)}_removeInactiveBinding(n){const s=this._bindings,l=n.binding,f=l.rootNode.uuid,b=l.path,I=this._bindingsByRootAndName,R=I[f],U=s[s.length-1],V=n._cacheIndex;U._cacheIndex=V,s[V]=U,s.pop(),delete R[b],Object.keys(R).length===0&&delete I[f]}_lendBinding(n){const s=this._bindings,l=n._cacheIndex,f=this._nActiveBindings++,b=s[f];n._cacheIndex=f,s[f]=n,b._cacheIndex=l,s[l]=b}_takeBackBinding(n){const s=this._bindings,l=n._cacheIndex,f=--this._nActiveBindings,b=s[f];n._cacheIndex=f,s[f]=n,b._cacheIndex=l,s[l]=b}_lendControlInterpolant(){const n=this._controlInterpolants,s=this._nActiveControlInterpolants++;let l=n[s];return l===void 0&&(l=new l3(new Float32Array(2),new Float32Array(2),1,TU),l.__cacheIndex=s,n[s]=l),l}_takeBackControlInterpolant(n){const s=this._controlInterpolants,l=n.__cacheIndex,f=--this._nActiveControlInterpolants,b=s[f];n.__cacheIndex=f,s[f]=n,b.__cacheIndex=l,s[l]=b}clipAction(n,s,l){const f=s||this._root,b=f.uuid;let I=typeof n=="string"?Jd.findByName(f,n):n;const R=I!==null?I.uuid:n,U=this._actionsByClip[R];let V=null;if(l===void 0&&(I!==null?l=I.blendMode:l=yo),U!==void 0){const Z=U.actionByRoot[b];if(Z!==void 0&&Z.blendMode===l)return Z;V=U.knownActions[0],I===null&&(I=V._clip)}if(I===null)return null;const $=new D6(this,I,s,l);return this._bindAction($,V),this._addInactiveAction($,R,b),$}existingAction(n,s){const l=s||this._root,f=l.uuid,b=typeof n=="string"?Jd.findByName(l,n):n,I=b?b.uuid:n,R=this._actionsByClip[I];return R!==void 0&&R.actionByRoot[f]||null}stopAllAction(){const n=this._actions,s=this._nActiveActions;for(let l=s-1;l>=0;--l)n[l].stop();return this}update(n){n*=this.timeScale;const s=this._actions,l=this._nActiveActions,f=this.time+=n,b=Math.sign(n),I=this._accuIndex^=1;for(let V=0;V!==l;++V)s[V]._update(f,n,b,I);const R=this._bindings,U=this._nActiveBindings;for(let V=0;V!==U;++V)R[V].apply(I);return this}setTime(n){this.time=0;for(let s=0;s<this._actions.length;s++)this._actions[s].time=0;return this.update(n)}getRoot(){return this._root}uncacheClip(n){const s=this._actions,l=n.uuid,f=this._actionsByClip,b=f[l];if(b!==void 0){const I=b.knownActions;for(let R=0,U=I.length;R!==U;++R){const V=I[R];this._deactivateAction(V);const $=V._cacheIndex,Z=s[s.length-1];V._cacheIndex=null,V._byClipCacheIndex=null,Z._cacheIndex=$,s[$]=Z,s.pop(),this._removeInactiveBindingsForAction(V)}delete f[l]}}uncacheRoot(n){const s=n.uuid,l=this._actionsByClip;for(const I in l){const R=l[I].actionByRoot,U=R[s];U!==void 0&&(this._deactivateAction(U),this._removeInactiveAction(U))}const f=this._bindingsByRootAndName,b=f[s];if(b!==void 0)for(const I in b){const R=b[I];R.restoreOriginalState(),this._removeInactiveBinding(R)}}uncacheAction(n,s){const l=this.existingAction(n,s);l!==null&&(this._deactivateAction(l),this._removeInactiveAction(l))}}class v3{constructor(n){this.value=n}clone(){return new v3(this.value.clone===void 0?this.value:this.value.clone())}}let RU=0;class OU extends xa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:RU++}),this.name="",this.usage=Mu,this.uniforms=[]}add(n){return this.uniforms.push(n),this}remove(n){const s=this.uniforms.indexOf(n);return s!==-1&&this.uniforms.splice(s,1),this}setName(n){return this.name=n,this}setUsage(n){return this.usage=n,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(n){this.name=n.name,this.usage=n.usage;const s=n.uniforms;this.uniforms.length=0;for(let l=0,f=s.length;l<f;l++){const b=Array.isArray(s[l])?s[l]:[s[l]];for(let I=0;I<b.length;I++)this.uniforms.push(b[I].clone())}return this}clone(){return new this.constructor().copy(this)}}class DU extends Um{constructor(n,s,l=1){super(n,s),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=l}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}clone(n){const s=super.clone(n);return s.meshPerAttribute=this.meshPerAttribute,s}toJSON(n){const s=super.toJSON(n);return s.isInstancedInterleavedBuffer=!0,s.meshPerAttribute=this.meshPerAttribute,s}}class LU{constructor(n,s,l,f,b){this.isGLBufferAttribute=!0,this.name="",this.buffer=n,this.type=s,this.itemSize=l,this.elementSize=f,this.count=b,this.version=0}set needsUpdate(n){n===!0&&this.version++}setBuffer(n){return this.buffer=n,this}setType(n,s){return this.type=n,this.elementSize=s,this}setItemSize(n){return this.itemSize=n,this}setCount(n){return this.count=n,this}}const L6=new ii;class PU{constructor(n,s,l=0,f=1/0){this.ray=new Gs(n,s),this.near=l,this.far=f,this.camera=null,this.layers=new vm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(n,s){this.ray.set(n,s)}setFromCamera(n,s){s.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(s.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(s).sub(this.ray.origin).normalize(),this.camera=s):s.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(s.near+s.far)/(s.near-s.far)).unproject(s),this.ray.direction.set(0,0,-1).transformDirection(s.matrixWorld),this.camera=s):console.error("THREE.Raycaster: Unsupported camera type: "+s.type)}setFromXRController(n){return L6.identity().extractRotation(n.matrixWorld),this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(L6),this}intersectObject(n,s=!0,l=[]){return y3(n,this,l,s),l.sort(P6),l}intersectObjects(n,s=!0,l=[]){for(let f=0,b=n.length;f<b;f++)y3(n[f],this,l,s);return l.sort(P6),l}}function P6(M,n){return M.distance-n.distance}function y3(M,n,s,l){if(M.layers.test(n.layers)&&M.raycast(n,s),l===!0){const f=M.children;for(let b=0,I=f.length;b<I;b++)y3(f[b],n,s,!0)}}class NU{constructor(n=1,s=0,l=0){return this.radius=n,this.phi=s,this.theta=l,this}set(n,s,l){return this.radius=n,this.phi=s,this.theta=l,this}copy(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,s,l){return this.radius=Math.sqrt(n*n+s*s+l*l),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(n,l),this.phi=Math.acos(hs(s/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class FU{constructor(n=1,s=0,l=0){return this.radius=n,this.theta=s,this.y=l,this}set(n,s,l){return this.radius=n,this.theta=s,this.y=l,this}copy(n){return this.radius=n.radius,this.theta=n.theta,this.y=n.y,this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,s,l){return this.radius=Math.sqrt(n*n+l*l),this.theta=Math.atan2(n,l),this.y=s,this}clone(){return new this.constructor().copy(this)}}const N6=new sn;class kU{constructor(n=new sn(1/0,1/0),s=new sn(-1/0,-1/0)){this.isBox2=!0,this.min=n,this.max=s}set(n,s){return this.min.copy(n),this.max.copy(s),this}setFromPoints(n){this.makeEmpty();for(let s=0,l=n.length;s<l;s++)this.expandByPoint(n[s]);return this}setFromCenterAndSize(n,s){const l=N6.copy(s).multiplyScalar(.5);return this.min.copy(n).sub(l),this.max.copy(n).add(l),this}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(n){return this.isEmpty()?n.set(0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}containsPoint(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y)}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y}getParameter(n,s){return s.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y)}clampPoint(n,s){return s.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,N6).distanceTo(n)}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}const F6=new Ve,wp=new Ve;class UU{constructor(n=new Ve,s=new Ve){this.start=n,this.end=s}set(n,s){return this.start.copy(n),this.end.copy(s),this}copy(n){return this.start.copy(n.start),this.end.copy(n.end),this}getCenter(n){return n.addVectors(this.start,this.end).multiplyScalar(.5)}delta(n){return n.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(n,s){return this.delta(s).multiplyScalar(n).add(this.start)}closestPointToPointParameter(n,s){F6.subVectors(n,this.start),wp.subVectors(this.end,this.start);const l=wp.dot(wp);let b=wp.dot(F6)/l;return s&&(b=hs(b,0,1)),b}closestPointToPoint(n,s,l){const f=this.closestPointToPointParameter(n,s);return this.delta(l).multiplyScalar(f).add(this.start)}applyMatrix4(n){return this.start.applyMatrix4(n),this.end.applyMatrix4(n),this}equals(n){return n.start.equals(this.start)&&n.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const k6=new Ve;class GU extends Cr{constructor(n,s){super(),this.light=n,this.matrixAutoUpdate=!1,this.color=s,this.type="SpotLightHelper";const l=new Zi,f=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let I=0,R=1,U=32;I<U;I++,R++){const V=I/U*Math.PI*2,$=R/U*Math.PI*2;f.push(Math.cos(V),Math.sin(V),1,Math.cos($),Math.sin($),1)}l.setAttribute("position",new ai(f,3));const b=new Ra({fog:!1,toneMapped:!1});this.cone=new hl(l,b),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const n=this.light.distance?this.light.distance:1e3,s=n*Math.tan(this.light.angle);this.cone.scale.set(s,s,n),k6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(k6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const kc=new Ve,xp=new ii,b3=new ii;class VU extends hl{constructor(n){const s=U6(n),l=new Zi,f=[],b=[],I=new Kn(0,0,1),R=new Kn(0,1,0);for(let V=0;V<s.length;V++){const $=s[V];$.parent&&$.parent.isBone&&(f.push(0,0,0),f.push(0,0,0),b.push(I.r,I.g,I.b),b.push(R.r,R.g,R.b))}l.setAttribute("position",new ai(f,3)),l.setAttribute("color",new ai(b,3));const U=new Ra({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(l,U),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=n,this.bones=s,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(n){const s=this.bones,l=this.geometry,f=l.getAttribute("position");b3.copy(this.root.matrixWorld).invert();for(let b=0,I=0;b<s.length;b++){const R=s[b];R.parent&&R.parent.isBone&&(xp.multiplyMatrices(b3,R.matrixWorld),kc.setFromMatrixPosition(xp),f.setXYZ(I,kc.x,kc.y,kc.z),xp.multiplyMatrices(b3,R.parent.matrixWorld),kc.setFromMatrixPosition(xp),f.setXYZ(I+1,kc.x,kc.y,kc.z),I+=2)}l.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(n)}dispose(){this.geometry.dispose(),this.material.dispose()}}function U6(M){const n=[];M.isBone===!0&&n.push(M);for(let s=0;s<M.children.length;s++)n.push.apply(n,U6(M.children[s]));return n}class QU extends Ds{constructor(n,s,l){const f=new Xd(s,4,2),b=new Bc({wireframe:!0,fog:!1,toneMapped:!1});super(f,b),this.light=n,this.color=l,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const HU=new Ve,G6=new Kn,V6=new Kn;class zU extends Cr{constructor(n,s,l){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=l,this.type="HemisphereLightHelper";const f=new $d(s);f.rotateY(Math.PI*.5),this.material=new Bc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const b=f.getAttribute("position"),I=new Float32Array(b.count*3);f.setAttribute("color",new Gr(I,3)),this.add(new Ds(f,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const n=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const s=n.geometry.getAttribute("color");G6.copy(this.light.color),V6.copy(this.light.groundColor);for(let l=0,f=s.count;l<f;l++){const b=l<f/2?G6:V6;s.setXYZ(l,b.r,b.g,b.b)}s.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),n.lookAt(HU.setFromMatrixPosition(this.light.matrixWorld).negate())}}class WU extends hl{constructor(n=10,s=10,l=4473924,f=8947848){l=new Kn(l),f=new Kn(f);const b=s/2,I=n/s,R=n/2,U=[],V=[];for(let ee=0,te=0,ae=-R;ee<=s;ee++,ae+=I){U.push(-R,0,ae,R,0,ae),U.push(ae,0,-R,ae,0,R);const he=ee===b?l:f;he.toArray(V,te),te+=3,he.toArray(V,te),te+=3,he.toArray(V,te),te+=3,he.toArray(V,te),te+=3}const $=new Zi;$.setAttribute("position",new ai(U,3)),$.setAttribute("color",new ai(V,3));const Z=new Ra({vertexColors:!0,toneMapped:!1});super($,Z),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class jU extends hl{constructor(n=10,s=16,l=8,f=64,b=4473924,I=8947848){b=new Kn(b),I=new Kn(I);const R=[],U=[];if(s>1)for(let Z=0;Z<s;Z++){const ee=Z/s*(Math.PI*2),te=Math.sin(ee)*n,ae=Math.cos(ee)*n;R.push(0,0,0),R.push(te,0,ae);const he=Z&1?b:I;U.push(he.r,he.g,he.b),U.push(he.r,he.g,he.b)}for(let Z=0;Z<l;Z++){const ee=Z&1?b:I,te=n-n/l*Z;for(let ae=0;ae<f;ae++){let he=ae/f*(Math.PI*2),oe=Math.sin(he)*te,ne=Math.cos(he)*te;R.push(oe,0,ne),U.push(ee.r,ee.g,ee.b),he=(ae+1)/f*(Math.PI*2),oe=Math.sin(he)*te,ne=Math.cos(he)*te,R.push(oe,0,ne),U.push(ee.r,ee.g,ee.b)}}const V=new Zi;V.setAttribute("position",new ai(R,3)),V.setAttribute("color",new ai(U,3));const $=new Ra({vertexColors:!0,toneMapped:!1});super(V,$),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Q6=new Ve,Sp=new Ve,H6=new Ve;class $U extends Cr{constructor(n,s,l){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=l,this.type="DirectionalLightHelper",s===void 0&&(s=1);let f=new Zi;f.setAttribute("position",new ai([-s,s,0,s,s,0,s,-s,0,-s,-s,0,-s,s,0],3));const b=new Ra({fog:!1,toneMapped:!1});this.lightPlane=new Pc(f,b),this.add(this.lightPlane),f=new Zi,f.setAttribute("position",new ai([0,0,0,0,0,1],3)),this.targetLine=new Pc(f,b),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Q6.setFromMatrixPosition(this.light.matrixWorld),Sp.setFromMatrixPosition(this.light.target.matrixWorld),H6.subVectors(Sp,Q6),this.lightPlane.lookAt(Sp),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Sp),this.targetLine.scale.z=H6.length()}}const Ip=new Ve,Ms=new Bm;class XU extends hl{constructor(n){const s=new Zi,l=new Ra({color:16777215,vertexColors:!0,toneMapped:!1}),f=[],b=[],I={};R("n1","n2"),R("n2","n4"),R("n4","n3"),R("n3","n1"),R("f1","f2"),R("f2","f4"),R("f4","f3"),R("f3","f1"),R("n1","f1"),R("n2","f2"),R("n3","f3"),R("n4","f4"),R("p","n1"),R("p","n2"),R("p","n3"),R("p","n4"),R("u1","u2"),R("u2","u3"),R("u3","u1"),R("c","t"),R("p","c"),R("cn1","cn2"),R("cn3","cn4"),R("cf1","cf2"),R("cf3","cf4");function R(ae,he){U(ae),U(he)}function U(ae){f.push(0,0,0),b.push(0,0,0),I[ae]===void 0&&(I[ae]=[]),I[ae].push(f.length/3-1)}s.setAttribute("position",new ai(f,3)),s.setAttribute("color",new ai(b,3)),super(s,l),this.type="CameraHelper",this.camera=n,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=I,this.update();const V=new Kn(16755200),$=new Kn(16711680),Z=new Kn(43775),ee=new Kn(16777215),te=new Kn(3355443);this.setColors(V,$,Z,ee,te)}setColors(n,s,l,f,b){const R=this.geometry.getAttribute("color");R.setXYZ(0,n.r,n.g,n.b),R.setXYZ(1,n.r,n.g,n.b),R.setXYZ(2,n.r,n.g,n.b),R.setXYZ(3,n.r,n.g,n.b),R.setXYZ(4,n.r,n.g,n.b),R.setXYZ(5,n.r,n.g,n.b),R.setXYZ(6,n.r,n.g,n.b),R.setXYZ(7,n.r,n.g,n.b),R.setXYZ(8,n.r,n.g,n.b),R.setXYZ(9,n.r,n.g,n.b),R.setXYZ(10,n.r,n.g,n.b),R.setXYZ(11,n.r,n.g,n.b),R.setXYZ(12,n.r,n.g,n.b),R.setXYZ(13,n.r,n.g,n.b),R.setXYZ(14,n.r,n.g,n.b),R.setXYZ(15,n.r,n.g,n.b),R.setXYZ(16,n.r,n.g,n.b),R.setXYZ(17,n.r,n.g,n.b),R.setXYZ(18,n.r,n.g,n.b),R.setXYZ(19,n.r,n.g,n.b),R.setXYZ(20,n.r,n.g,n.b),R.setXYZ(21,n.r,n.g,n.b),R.setXYZ(22,n.r,n.g,n.b),R.setXYZ(23,n.r,n.g,n.b),R.setXYZ(24,s.r,s.g,s.b),R.setXYZ(25,s.r,s.g,s.b),R.setXYZ(26,s.r,s.g,s.b),R.setXYZ(27,s.r,s.g,s.b),R.setXYZ(28,s.r,s.g,s.b),R.setXYZ(29,s.r,s.g,s.b),R.setXYZ(30,s.r,s.g,s.b),R.setXYZ(31,s.r,s.g,s.b),R.setXYZ(32,l.r,l.g,l.b),R.setXYZ(33,l.r,l.g,l.b),R.setXYZ(34,l.r,l.g,l.b),R.setXYZ(35,l.r,l.g,l.b),R.setXYZ(36,l.r,l.g,l.b),R.setXYZ(37,l.r,l.g,l.b),R.setXYZ(38,f.r,f.g,f.b),R.setXYZ(39,f.r,f.g,f.b),R.setXYZ(40,b.r,b.g,b.b),R.setXYZ(41,b.r,b.g,b.b),R.setXYZ(42,b.r,b.g,b.b),R.setXYZ(43,b.r,b.g,b.b),R.setXYZ(44,b.r,b.g,b.b),R.setXYZ(45,b.r,b.g,b.b),R.setXYZ(46,b.r,b.g,b.b),R.setXYZ(47,b.r,b.g,b.b),R.setXYZ(48,b.r,b.g,b.b),R.setXYZ(49,b.r,b.g,b.b),R.needsUpdate=!0}update(){const n=this.geometry,s=this.pointMap,l=1,f=1;Ms.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Bs("c",s,n,Ms,0,0,-1),Bs("t",s,n,Ms,0,0,1),Bs("n1",s,n,Ms,-l,-f,-1),Bs("n2",s,n,Ms,l,-f,-1),Bs("n3",s,n,Ms,-l,f,-1),Bs("n4",s,n,Ms,l,f,-1),Bs("f1",s,n,Ms,-l,-f,1),Bs("f2",s,n,Ms,l,-f,1),Bs("f3",s,n,Ms,-l,f,1),Bs("f4",s,n,Ms,l,f,1),Bs("u1",s,n,Ms,l*.7,f*1.1,-1),Bs("u2",s,n,Ms,-l*.7,f*1.1,-1),Bs("u3",s,n,Ms,0,f*2,-1),Bs("cf1",s,n,Ms,-l,0,1),Bs("cf2",s,n,Ms,l,0,1),Bs("cf3",s,n,Ms,0,-f,1),Bs("cf4",s,n,Ms,0,f,1),Bs("cn1",s,n,Ms,-l,0,-1),Bs("cn2",s,n,Ms,l,0,-1),Bs("cn3",s,n,Ms,0,-f,-1),Bs("cn4",s,n,Ms,0,f,-1),n.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Bs(M,n,s,l,f,b,I){Ip.set(f,b,I).unproject(l);const R=n[M];if(R!==void 0){const U=s.getAttribute("position");for(let V=0,$=R.length;V<$;V++)U.setXYZ(R[V],Ip.x,Ip.y,Ip.z)}}const Tp=new fs;class KU extends hl{constructor(n,s=16776960){const l=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),f=new Float32Array(8*3),b=new Zi;b.setIndex(new Gr(l,1)),b.setAttribute("position",new Gr(f,3)),super(b,new Ra({color:s,toneMapped:!1})),this.object=n,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(n){if(n!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Tp.setFromObject(this.object),Tp.isEmpty())return;const s=Tp.min,l=Tp.max,f=this.geometry.attributes.position,b=f.array;b[0]=l.x,b[1]=l.y,b[2]=l.z,b[3]=s.x,b[4]=l.y,b[5]=l.z,b[6]=s.x,b[7]=s.y,b[8]=l.z,b[9]=l.x,b[10]=s.y,b[11]=l.z,b[12]=l.x,b[13]=l.y,b[14]=s.z,b[15]=s.x,b[16]=l.y,b[17]=s.z,b[18]=s.x,b[19]=s.y,b[20]=s.z,b[21]=l.x,b[22]=s.y,b[23]=s.z,f.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(n){return this.object=n,this.update(),this}copy(n,s){return super.copy(n,s),this.object=n.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class YU extends hl{constructor(n,s=16776960){const l=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),f=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],b=new Zi;b.setIndex(new Gr(l,1)),b.setAttribute("position",new ai(f,3)),super(b,new Ra({color:s,toneMapped:!1})),this.box=n,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(n){const s=this.box;s.isEmpty()||(s.getCenter(this.position),s.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(n))}dispose(){this.geometry.dispose(),this.material.dispose()}}class qU extends Pc{constructor(n,s=1,l=16776960){const f=l,b=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],I=new Zi;I.setAttribute("position",new ai(b,3)),I.computeBoundingSphere(),super(I,new Ra({color:f,toneMapped:!1})),this.type="PlaneHelper",this.plane=n,this.size=s;const R=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],U=new Zi;U.setAttribute("position",new ai(R,3)),U.computeBoundingSphere(),this.add(new Ds(U,new Bc({color:f,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(n){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(n)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const z6=new Ve;let Bp,M3;class JU extends Cr{constructor(n=new Ve(0,0,1),s=new Ve(0,0,0),l=1,f=16776960,b=l*.2,I=b*.2){super(),this.type="ArrowHelper",Bp===void 0&&(Bp=new Zi,Bp.setAttribute("position",new ai([0,0,0,0,1,0],3)),M3=new rh(0,.5,1,5,1),M3.translate(0,-.5,0)),this.position.copy(s),this.line=new Pc(Bp,new Ra({color:f,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ds(M3,new Bc({color:f,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(l,b,I)}setDirection(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{z6.set(n.z,0,-n.x).normalize();const s=Math.acos(n.y);this.quaternion.setFromAxisAngle(z6,s)}}setLength(n,s=n*.2,l=s*.2){this.line.scale.set(1,Math.max(1e-4,n-s),1),this.line.updateMatrix(),this.cone.scale.set(l,s,l),this.cone.position.y=n,this.cone.updateMatrix()}setColor(n){this.line.material.color.set(n),this.cone.material.color.set(n)}copy(n){return super.copy(n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ZU extends hl{constructor(n=1){const s=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n],l=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],f=new Zi;f.setAttribute("position",new ai(s,3)),f.setAttribute("color",new ai(l,3));const b=new Ra({vertexColors:!0,toneMapped:!1});super(f,b),this.type="AxesHelper"}setColors(n,s,l){const f=new Kn,b=this.geometry.attributes.color.array;return f.set(n),f.toArray(b,0),f.toArray(b,3),f.set(s),f.toArray(b,6),f.toArray(b,9),f.set(l),f.toArray(b,12),f.toArray(b,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class eG{constructor(){this.type="ShapePath",this.color=new Kn,this.subPaths=[],this.currentPath=null}moveTo(n,s){return this.currentPath=new Qd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(n,s),this}lineTo(n,s){return this.currentPath.lineTo(n,s),this}quadraticCurveTo(n,s,l,f){return this.currentPath.quadraticCurveTo(n,s,l,f),this}bezierCurveTo(n,s,l,f,b,I){return this.currentPath.bezierCurveTo(n,s,l,f,b,I),this}splineThru(n){return this.currentPath.splineThru(n),this}toShapes(n){function s(ne){const Ie=[];for(let Ce=0,Me=ne.length;Ce<Me;Ce++){const Je=ne[Ce],Qe=new Pu;Qe.curves=Je.curves,Ie.push(Qe)}return Ie}function l(ne,Ie){const Ce=Ie.length;let Me=!1;for(let Je=Ce-1,Qe=0;Qe<Ce;Je=Qe++){let je=Ie[Je],Ye=Ie[Qe],Pe=Ye.x-je.x,Re=Ye.y-je.y;if(Math.abs(Re)>Number.EPSILON){if(Re<0&&(je=Ie[Qe],Pe=-Pe,Ye=Ie[Je],Re=-Re),ne.y<je.y||ne.y>Ye.y)continue;if(ne.y===je.y){if(ne.x===je.x)return!0}else{const qe=Re*(ne.x-je.x)-Pe*(ne.y-je.y);if(qe===0)return!0;if(qe<0)continue;Me=!Me}}else{if(ne.y!==je.y)continue;if(Ye.x<=ne.x&&ne.x<=je.x||je.x<=ne.x&&ne.x<=Ye.x)return!0}}return Me}const f=dl.isClockWise,b=this.subPaths;if(b.length===0)return[];let I,R,U;const V=[];if(b.length===1)return R=b[0],U=new Pu,U.curves=R.curves,V.push(U),V;let $=!f(b[0].getPoints());$=n?!$:$;const Z=[],ee=[];let te=[],ae=0,he;ee[ae]=void 0,te[ae]=[];for(let ne=0,Ie=b.length;ne<Ie;ne++)R=b[ne],he=R.getPoints(),I=f(he),I=n?!I:I,I?(!$&&ee[ae]&&ae++,ee[ae]={s:new Pu,p:he},ee[ae].s.curves=R.curves,$&&ae++,te[ae]=[]):te[ae].push({h:R,p:he[0]});if(!ee[0])return s(b);if(ee.length>1){let ne=!1,Ie=0;for(let Ce=0,Me=ee.length;Ce<Me;Ce++)Z[Ce]=[];for(let Ce=0,Me=ee.length;Ce<Me;Ce++){const Je=te[Ce];for(let Qe=0;Qe<Je.length;Qe++){const je=Je[Qe];let Ye=!0;for(let Pe=0;Pe<ee.length;Pe++)l(je.p,ee[Pe].p)&&(Ce!==Pe&&Ie++,Ye?(Ye=!1,Z[Pe].push(je)):ne=!0);Ye&&Z[Ce].push(je)}}Ie>0&&ne===!1&&(te=Z)}let oe;for(let ne=0,Ie=ee.length;ne<Ie;ne++){U=ee[ne].s,V.push(U),oe=te[ne];for(let Ce=0,Me=oe.length;Ce<Me;Ce++)U.holes.push(oe[Ce].h)}return V}}class tG extends Ga{constructor(n=1,s=1,l=1,f={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(n,s,{...f,count:l}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d)},"./node_modules/three/examples/jsm/libs/ktx-parse.module.js":(u,m,c)=>{c.r(m),c.d(m,{KHR_DF_CHANNEL_RGBSDA_ALPHA:()=>Kt,KHR_DF_CHANNEL_RGBSDA_BLUE:()=>xt,KHR_DF_CHANNEL_RGBSDA_DEPTH:()=>_t,KHR_DF_CHANNEL_RGBSDA_GREEN:()=>Et,KHR_DF_CHANNEL_RGBSDA_RED:()=>hn,KHR_DF_CHANNEL_RGBSDA_STENCIL:()=>en,KHR_DF_FLAG_ALPHA_PREMULTIPLIED:()=>P,KHR_DF_FLAG_ALPHA_STRAIGHT:()=>B,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT:()=>y,KHR_DF_MODEL_ASTC:()=>T,KHR_DF_MODEL_ETC1:()=>C,KHR_DF_MODEL_ETC1S:()=>O,KHR_DF_MODEL_ETC2:()=>w,KHR_DF_MODEL_RGBSDA:()=>x,KHR_DF_MODEL_UNSPECIFIED:()=>S,KHR_DF_PRIMARIES_ACES:()=>ct,KHR_DF_PRIMARIES_ACESCC:()=>vt,KHR_DF_PRIMARIES_ADOBERGB:()=>Lt,KHR_DF_PRIMARIES_BT2020:()=>Ke,KHR_DF_PRIMARIES_BT601_EBU:()=>He,KHR_DF_PRIMARIES_BT601_SMPTE:()=>Ae,KHR_DF_PRIMARIES_BT709:()=>Ee,KHR_DF_PRIMARIES_CIEXYZ:()=>Ue,KHR_DF_PRIMARIES_DISPLAYP3:()=>rt,KHR_DF_PRIMARIES_NTSC1953:()=>dt,KHR_DF_PRIMARIES_PAL525:()=>It,KHR_DF_PRIMARIES_UNSPECIFIED:()=>we,KHR_DF_SAMPLE_DATATYPE_EXPONENT:()=>St,KHR_DF_SAMPLE_DATATYPE_FLOAT:()=>Dt,KHR_DF_SAMPLE_DATATYPE_LINEAR:()=>pe,KHR_DF_SAMPLE_DATATYPE_SIGNED:()=>Nt,KHR_DF_TRANSFER_ACESCC:()=>me,KHR_DF_TRANSFER_ACESCCT:()=>xe,KHR_DF_TRANSFER_ADOBERGB:()=>ye,KHR_DF_TRANSFER_BT1886:()=>q,KHR_DF_TRANSFER_DCIP3:()=>J,KHR_DF_TRANSFER_HLG_EOTF:()=>k,KHR_DF_TRANSFER_HLG_OETF:()=>Q,KHR_DF_TRANSFER_ITU:()=>z,KHR_DF_TRANSFER_LINEAR:()=>N,KHR_DF_TRANSFER_NTSC:()=>G,KHR_DF_TRANSFER_PAL625_EOTF:()=>ge,KHR_DF_TRANSFER_PAL_OETF:()=>se,KHR_DF_TRANSFER_PQ_EOTF:()=>K,KHR_DF_TRANSFER_PQ_OETF:()=>W,KHR_DF_TRANSFER_SLOG:()=>H,KHR_DF_TRANSFER_SLOG2:()=>j,KHR_DF_TRANSFER_SRGB:()=>F,KHR_DF_TRANSFER_ST240:()=>fe,KHR_DF_TRANSFER_UNSPECIFIED:()=>L,KHR_DF_VENDORID_KHRONOS:()=>E,KHR_DF_VERSION:()=>_,KHR_SUPERCOMPRESSION_BASISLZ:()=>p,KHR_SUPERCOMPRESSION_NONE:()=>A,KHR_SUPERCOMPRESSION_ZLIB:()=>g,KHR_SUPERCOMPRESSION_ZSTD:()=>v,KTX2Container:()=>Vl,VK_FORMAT_A1R5G5B5_UNORM_PACK16:()=>be,VK_FORMAT_A2B10G10R10_SINT_PACK32:()=>ni,VK_FORMAT_A2B10G10R10_SNORM_PACK32:()=>Dn,VK_FORMAT_A2B10G10R10_UINT_PACK32:()=>$t,VK_FORMAT_A2B10G10R10_UNORM_PACK32:()=>Ln,VK_FORMAT_A2R10G10B10_SINT_PACK32:()=>mn,VK_FORMAT_A2R10G10B10_SNORM_PACK32:()=>Tt,VK_FORMAT_A2R10G10B10_UINT_PACK32:()=>jt,VK_FORMAT_A2R10G10B10_UNORM_PACK32:()=>Vt,VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT:()=>Ed,VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT:()=>wc,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:()=>I0,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:()=>hs,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:()=>Sa,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:()=>dm,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:()=>xa,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:()=>_u,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:()=>fm,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:()=>lm,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:()=>Js,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:()=>mm,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:()=>Cc,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:()=>Gl,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:()=>u2,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:()=>jA,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:()=>_d,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:()=>Or,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:()=>Cu,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:()=>$A,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:()=>Bi,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:()=>sm,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:()=>rm,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:()=>Cd,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:()=>om,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:()=>am,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:()=>cm,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:()=>FA,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:()=>Mu,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:()=>c2,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:()=>UA,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:()=>kA,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:()=>Ec,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:()=>VA,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:()=>GA,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:()=>Eu,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:()=>HA,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:()=>QA,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:()=>um,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:()=>WA,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:()=>zA,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:()=>hm,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:()=>bo,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:()=>Md,VK_FORMAT_B10G11R11_UFLOAT_PACK32:()=>Fl,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:()=>JA,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:()=>i2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:()=>Le,VK_FORMAT_B5G5R5A1_UNORM_PACK16:()=>Y,VK_FORMAT_B5G6R5_UNORM_PACK16:()=>ce,VK_FORMAT_B8G8R8A8_SINT:()=>$e,VK_FORMAT_B8G8R8A8_SNORM:()=>Ua,VK_FORMAT_B8G8R8A8_SRGB:()=>pt,VK_FORMAT_B8G8R8A8_UINT:()=>Ne,VK_FORMAT_B8G8R8A8_UNORM:()=>Fo,VK_FORMAT_B8G8R8_SINT:()=>vs,VK_FORMAT_B8G8R8_SNORM:()=>zr,VK_FORMAT_B8G8R8_SRGB:()=>ys,VK_FORMAT_B8G8R8_UINT:()=>ks,VK_FORMAT_B8G8R8_UNORM:()=>wa,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:()=>jr,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:()=>vu,VK_FORMAT_BC1_RGB_SRGB_BLOCK:()=>Au,VK_FORMAT_BC1_RGB_UNORM_BLOCK:()=>S0,VK_FORMAT_BC2_SRGB_BLOCK:()=>bu,VK_FORMAT_BC2_UNORM_BLOCK:()=>yu,VK_FORMAT_BC3_SRGB_BLOCK:()=>Ul,VK_FORMAT_BC3_UNORM_BLOCK:()=>CA,VK_FORMAT_BC4_SNORM_BLOCK:()=>wA,VK_FORMAT_BC4_UNORM_BLOCK:()=>EA,VK_FORMAT_BC5_SNORM_BLOCK:()=>SA,VK_FORMAT_BC5_UNORM_BLOCK:()=>xA,VK_FORMAT_BC6H_SFLOAT_BLOCK:()=>TA,VK_FORMAT_BC6H_UFLOAT_BLOCK:()=>IA,VK_FORMAT_BC7_SRGB_BLOCK:()=>RA,VK_FORMAT_BC7_UNORM_BLOCK:()=>BA,VK_FORMAT_D16_UNORM:()=>al,VK_FORMAT_D16_UNORM_S8_UINT:()=>ua,VK_FORMAT_D24_UNORM_S8_UINT:()=>gr,VK_FORMAT_D32_SFLOAT:()=>pa,VK_FORMAT_D32_SFLOAT_S8_UINT:()=>Uo,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:()=>kl,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:()=>bd,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:()=>im,VK_FORMAT_EAC_R11_SNORM_BLOCK:()=>nm,VK_FORMAT_EAC_R11_UNORM_BLOCK:()=>tm,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:()=>PA,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:()=>LA,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:()=>yd,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:()=>NA,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:()=>DA,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:()=>OA,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:()=>qA,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:()=>n2,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:()=>ha,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:()=>r2,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:()=>Pi,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:()=>s2,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:()=>l2,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:()=>a2,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:()=>sn,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:()=>o2,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:()=>YA,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:()=>KA,VK_FORMAT_R10X6_UNORM_PACK16:()=>XA,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:()=>t2,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:()=>e2,VK_FORMAT_R12X4_UNORM_PACK16:()=>ZA,VK_FORMAT_R16G16B16A16_SFLOAT:()=>Yt,VK_FORMAT_R16G16B16A16_SINT:()=>ot,VK_FORMAT_R16G16B16A16_SNORM:()=>Fe,VK_FORMAT_R16G16B16A16_UINT:()=>Ze,VK_FORMAT_R16G16B16A16_UNORM:()=>Se,VK_FORMAT_R16G16B16_SFLOAT:()=>ve,VK_FORMAT_R16G16B16_SINT:()=>le,VK_FORMAT_R16G16B16_SNORM:()=>Ui,VK_FORMAT_R16G16B16_UINT:()=>re,VK_FORMAT_R16G16B16_UNORM:()=>nr,VK_FORMAT_R16G16_SFLOAT:()=>_i,VK_FORMAT_R16G16_SINT:()=>Mn,VK_FORMAT_R16G16_SNORM:()=>ki,VK_FORMAT_R16G16_UINT:()=>Wr,VK_FORMAT_R16G16_UNORM:()=>Ti,VK_FORMAT_R16_SFLOAT:()=>Mi,VK_FORMAT_R16_SINT:()=>Si,VK_FORMAT_R16_SNORM:()=>fi,VK_FORMAT_R16_UINT:()=>dr,VK_FORMAT_R16_UNORM:()=>Jn,VK_FORMAT_R32G32B32A32_SFLOAT:()=>Mr,VK_FORMAT_R32G32B32A32_SINT:()=>Ji,VK_FORMAT_R32G32B32A32_UINT:()=>hi,VK_FORMAT_R32G32B32_SFLOAT:()=>ei,VK_FORMAT_R32G32B32_SINT:()=>vi,VK_FORMAT_R32G32B32_UINT:()=>Qn,VK_FORMAT_R32G32_SFLOAT:()=>Vn,VK_FORMAT_R32G32_SINT:()=>Cn,VK_FORMAT_R32G32_UINT:()=>on,VK_FORMAT_R32_SFLOAT:()=>Ot,VK_FORMAT_R32_SINT:()=>yt,VK_FORMAT_R32_UINT:()=>Wt,VK_FORMAT_R4G4B4A4_UNORM_PACK16:()=>Be,VK_FORMAT_R4G4_UNORM_PACK8:()=>De,VK_FORMAT_R5G5B5A1_UNORM_PACK16:()=>X,VK_FORMAT_R5G6B5_UNORM_PACK16:()=>ke,VK_FORMAT_R64G64B64A64_SFLOAT:()=>Nl,VK_FORMAT_R64G64B64A64_SINT:()=>ko,VK_FORMAT_R64G64B64A64_UINT:()=>yo,VK_FORMAT_R64G64B64_SFLOAT:()=>no,VK_FORMAT_R64G64B64_SINT:()=>qs,VK_FORMAT_R64G64B64_UINT:()=>ds,VK_FORMAT_R64G64_SFLOAT:()=>Rs,VK_FORMAT_R64G64_SINT:()=>yi,VK_FORMAT_R64G64_UINT:()=>et,VK_FORMAT_R64_SFLOAT:()=>mi,VK_FORMAT_R64_SINT:()=>at,VK_FORMAT_R64_UINT:()=>Rr,VK_FORMAT_R8G8B8A8_SINT:()=>to,VK_FORMAT_R8G8B8A8_SNORM:()=>pr,VK_FORMAT_R8G8B8A8_SRGB:()=>ca,VK_FORMAT_R8G8B8A8_UINT:()=>us,VK_FORMAT_R8G8B8A8_UNORM:()=>Pr,VK_FORMAT_R8G8B8_SINT:()=>Fs,VK_FORMAT_R8G8B8_SNORM:()=>Li,VK_FORMAT_R8G8B8_SRGB:()=>Hr,VK_FORMAT_R8G8B8_UINT:()=>qi,VK_FORMAT_R8G8B8_UNORM:()=>Br,VK_FORMAT_R8G8_SINT:()=>xi,VK_FORMAT_R8G8_SNORM:()=>dn,VK_FORMAT_R8G8_SRGB:()=>Fn,VK_FORMAT_R8G8_UINT:()=>Qt,VK_FORMAT_R8G8_UNORM:()=>qt,VK_FORMAT_R8_SINT:()=>wt,VK_FORMAT_R8_SNORM:()=>We,VK_FORMAT_R8_SRGB:()=>Zt,VK_FORMAT_R8_UINT:()=>tt,VK_FORMAT_R8_UNORM:()=>Te,VK_FORMAT_S8_UINT:()=>ll,VK_FORMAT_UNDEFINED:()=>_e,VK_FORMAT_X8_D24_UNORM_PACK32:()=>ol,read:()=>yr,write:()=>R0});var d=c("./node_modules/buffer/index.js").Buffer;const A=0,p=1,v=2,g=3,y=0,E=0,_=2,S=0,x=1,C=160,w=161,T=162,O=163,B=0,P=1,L=0,N=1,F=2,z=3,G=4,H=5,j=6,q=7,Q=8,k=9,K=10,W=11,J=12,se=13,ge=14,fe=15,me=16,xe=17,ye=18,we=0,Ee=1,He=2,Ae=3,Ke=4,Ue=5,ct=6,vt=7,dt=8,It=9,rt=10,Lt=11,hn=0,Et=1,xt=2,en=13,_t=14,Kt=15,Dt=128,Nt=64,St=32,pe=16,_e=0,De=1,Be=2,Le=3,ke=4,ce=5,X=6,Y=7,be=8,Te=9,We=10,tt=13,wt=14,Zt=15,qt=16,dn=17,Qt=20,xi=21,Fn=22,Br=23,Li=24,qi=27,Fs=28,Hr=29,wa=30,zr=31,ks=34,vs=35,ys=36,Pr=37,pr=38,us=41,to=42,ca=43,Fo=44,Ua=45,Ne=48,$e=49,pt=50,Vt=58,Tt=59,jt=62,mn=63,Ln=64,Dn=65,$t=68,ni=69,Jn=70,fi=71,dr=74,Si=75,Mi=76,Ti=77,ki=78,Wr=81,Mn=82,_i=83,nr=84,Ui=85,re=88,le=89,ve=90,Se=91,Fe=92,Ze=95,ot=96,Yt=97,Wt=98,yt=99,Ot=100,on=101,Cn=102,Vn=103,Qn=104,vi=105,ei=106,hi=107,Ji=108,Mr=109,Rr=110,at=111,mi=112,et=113,yi=114,Rs=115,ds=116,qs=117,no=118,yo=119,ko=120,Nl=121,Fl=122,kl=123,al=124,ol=125,pa=126,ll=127,ua=128,gr=129,Uo=130,S0=131,Au=132,vu=133,jr=134,yu=135,bu=136,CA=137,Ul=138,EA=139,wA=140,xA=141,SA=142,IA=143,TA=144,BA=145,RA=146,OA=147,DA=148,LA=149,PA=150,NA=151,yd=152,tm=153,nm=154,im=155,bd=156,rm=157,sm=158,am=159,om=160,Mu=161,FA=162,kA=163,UA=164,GA=165,VA=166,QA=167,HA=168,zA=169,WA=170,Md=171,bo=172,_u=173,xa=174,Js=175,lm=176,Gl=177,Cc=178,Sa=179,hs=180,_d=181,jA=182,$A=183,Cu=184,XA=1000156007,KA=1000156008,YA=1000156009,qA=1000156010,JA=1000156011,ZA=1000156017,e2=1000156018,t2=1000156019,n2=1000156020,i2=1000156021,r2=1000054e3,s2=1000054001,a2=1000054002,o2=1000054003,ha=1000054004,Pi=1000054005,l2=1000054006,sn=1000054007,Bi=1000066e3,Cd=1000066001,cm=1000066002,c2=1000066003,Ec=1000066004,Eu=1000066005,um=1000066006,hm=1000066007,dm=1000066008,fm=1000066009,mm=1000066010,I0=1000066011,u2=1000066012,Or=1000066013,wc=100034e4,Ed=1000340001;class Vl{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class xc{constructor(Ri,fr,_r,Ve){this._dataView=new DataView(Ri.buffer,Ri.byteOffset+fr,_r),this._littleEndian=Ve,this._offset=0}_nextUint8(){const Ri=this._dataView.getUint8(this._offset);return this._offset+=1,Ri}_nextUint16(){const Ri=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,Ri}_nextUint32(){const Ri=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,Ri}_nextUint64(){const Ri=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,Ri}_nextInt32(){const Ri=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,Ri}_skip(Ri){return this._offset+=Ri,this}_scan(Ri,fr=0){const _r=this._offset;let Ve=0;for(;this._dataView.getUint8(this._offset)!==fr&&Ve<Ri;)Ve++,this._offset++;return Ve<Ri&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+_r,Ve)}}const pm=new Uint8Array([0]),ls=[171,75,84,88,32,50,48,187,13,10,26,10];function T0(Zn){return typeof TextEncoder<"u"?new TextEncoder().encode(Zn):d.from(Zn)}function gm(Zn){return typeof TextDecoder<"u"?new TextDecoder().decode(Zn):d.from(Zn).toString("utf8")}function qr(Zn){let Ri=0;for(const Ve of Zn)Ri+=Ve.byteLength;const fr=new Uint8Array(Ri);let _r=0;for(const Ve of Zn)fr.set(new Uint8Array(Ve),_r),_r+=Ve.byteLength;return fr}function yr(Zn){const Ri=new Uint8Array(Zn.buffer,Zn.byteOffset,ls.length);if(Ri[0]!==ls[0]||Ri[1]!==ls[1]||Ri[2]!==ls[2]||Ri[3]!==ls[3]||Ri[4]!==ls[4]||Ri[5]!==ls[5]||Ri[6]!==ls[6]||Ri[7]!==ls[7]||Ri[8]!==ls[8]||Ri[9]!==ls[9]||Ri[10]!==ls[10]||Ri[11]!==ls[11])throw new Error("Missing KTX 2.0 identifier.");const fr=new Vl,_r=17*Uint32Array.BYTES_PER_ELEMENT,Ve=new xc(Zn,ls.length,_r,!0);fr.vkFormat=Ve._nextUint32(),fr.typeSize=Ve._nextUint32(),fr.pixelWidth=Ve._nextUint32(),fr.pixelHeight=Ve._nextUint32(),fr.pixelDepth=Ve._nextUint32(),fr.layerCount=Ve._nextUint32(),fr.faceCount=Ve._nextUint32();const io=Ve._nextUint32();fr.supercompressionScheme=Ve._nextUint32();const bs=Ve._nextUint32(),fs=Ve._nextUint32(),cr=Ve._nextUint32(),ga=Ve._nextUint32(),cl=Ve._nextUint64(),Va=Ve._nextUint64(),Zs=new xc(Zn,ls.length+_r,3*io*8,!0);for(let Gs=0;Gs<io;Gs++)fr.levels.push({levelData:new Uint8Array(Zn.buffer,Zn.byteOffset+Zs._nextUint64(),Zs._nextUint64()),uncompressedByteLength:Zs._nextUint64()});const Wi=new xc(Zn,bs,fs,!0),da={vendorId:Wi._skip(4)._nextUint16(),descriptorType:Wi._nextUint16(),versionNumber:Wi._nextUint16(),descriptorBlockSize:Wi._nextUint16(),colorModel:Wi._nextUint8(),colorPrimaries:Wi._nextUint8(),transferFunction:Wi._nextUint8(),flags:Wi._nextUint8(),texelBlockDimension:[Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8()],bytesPlane:[Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8()],samples:[]},ro=(da.descriptorBlockSize/4-6)/4;for(let Gs=0;Gs<ro;Gs++){const ii={bitOffset:Wi._nextUint16(),bitLength:Wi._nextUint8(),channelType:Wi._nextUint8(),samplePosition:[Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8(),Wi._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&ii.channelType?(ii.sampleLower=Wi._nextInt32(),ii.sampleUpper=Wi._nextInt32()):(ii.sampleLower=Wi._nextUint32(),ii.sampleUpper=Wi._nextUint32()),da.samples[Gs]=ii}fr.dataFormatDescriptor.length=0,fr.dataFormatDescriptor.push(da);const ea=new xc(Zn,cr,ga,!0);for(;ea._offset<ga;){const Gs=ea._nextUint32(),ii=ea._scan(Gs),Hl=gm(ii),Qa=ea._scan(Gs-ii.byteLength);fr.keyValue[Hl]=Hl.match(/^ktx/i)?gm(Qa):Qa,ea._offset%4&&ea._skip(4-ea._offset%4)}if(Va<=0)return fr;const Ar=new xc(Zn,cl,Va,!0),Ur=Ar._nextUint16(),ji=Ar._nextUint16(),vr=Ar._nextUint32(),Ia=Ar._nextUint32(),Sc=Ar._nextUint32(),Ql=Ar._nextUint32(),O0=[];for(let Gs=0;Gs<io;Gs++)O0.push({imageFlags:Ar._nextUint32(),rgbSliceByteOffset:Ar._nextUint32(),rgbSliceByteLength:Ar._nextUint32(),alphaSliceByteOffset:Ar._nextUint32(),alphaSliceByteLength:Ar._nextUint32()});const Us=cl+Ar._offset,Mo=Us+vr,D0=Mo+Ia,L0=D0+Sc,ul=new Uint8Array(Zn.buffer,Zn.byteOffset+Us,vr),wd=new Uint8Array(Zn.buffer,Zn.byteOffset+Mo,Ia),P0=new Uint8Array(Zn.buffer,Zn.byteOffset+D0,Sc),xd=new Uint8Array(Zn.buffer,Zn.byteOffset+L0,Ql);return fr.globalData={endpointCount:Ur,selectorCount:ji,imageDescs:O0,endpointsData:ul,selectorsData:wd,tablesData:P0,extendedData:xd},fr}function B0(){return(B0=Object.assign||function(Zn){for(var Ri=1;Ri<arguments.length;Ri++){var fr=arguments[Ri];for(var _r in fr)Object.prototype.hasOwnProperty.call(fr,_r)&&(Zn[_r]=fr[_r])}return Zn}).apply(this,arguments)}const Ga={keepWriter:!1};function R0(Zn,Ri={}){Ri=B0({},Ga,Ri);let fr=new ArrayBuffer(0);if(Zn.globalData){const Ur=new ArrayBuffer(20+5*Zn.globalData.imageDescs.length*4),ji=new DataView(Ur);ji.setUint16(0,Zn.globalData.endpointCount,!0),ji.setUint16(2,Zn.globalData.selectorCount,!0),ji.setUint32(4,Zn.globalData.endpointsData.byteLength,!0),ji.setUint32(8,Zn.globalData.selectorsData.byteLength,!0),ji.setUint32(12,Zn.globalData.tablesData.byteLength,!0),ji.setUint32(16,Zn.globalData.extendedData.byteLength,!0);for(let vr=0;vr<Zn.globalData.imageDescs.length;vr++){const Ia=Zn.globalData.imageDescs[vr];ji.setUint32(20+5*vr*4+0,Ia.imageFlags,!0),ji.setUint32(20+5*vr*4+4,Ia.rgbSliceByteOffset,!0),ji.setUint32(20+5*vr*4+8,Ia.rgbSliceByteLength,!0),ji.setUint32(20+5*vr*4+12,Ia.alphaSliceByteOffset,!0),ji.setUint32(20+5*vr*4+16,Ia.alphaSliceByteLength,!0)}fr=qr([Ur,Zn.globalData.endpointsData,Zn.globalData.selectorsData,Zn.globalData.tablesData,Zn.globalData.extendedData])}const _r=[];let Ve=Zn.keyValue;Ri.keepWriter||(Ve=B0({},Zn.keyValue,{KTXwriter:"KTX-Parse v0.3.1"}));for(const Ur in Ve){const ji=Ve[Ur],vr=T0(Ur),Ia=typeof ji=="string"?T0(ji):ji,Sc=vr.byteLength+1+Ia.byteLength+1,Ql=Sc%4?4-Sc%4:0;_r.push(qr([new Uint32Array([Sc]),vr,pm,Ia,pm,new Uint8Array(Ql).fill(0)]))}const io=qr(_r);if(Zn.dataFormatDescriptor.length!==1||Zn.dataFormatDescriptor[0].descriptorType!==0)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const bs=Zn.dataFormatDescriptor[0],fs=new ArrayBuffer(28+16*bs.samples.length),cr=new DataView(fs),ga=24+16*bs.samples.length;if(cr.setUint32(0,fs.byteLength,!0),cr.setUint16(4,bs.vendorId,!0),cr.setUint16(6,bs.descriptorType,!0),cr.setUint16(8,bs.versionNumber,!0),cr.setUint16(10,ga,!0),cr.setUint8(12,bs.colorModel),cr.setUint8(13,bs.colorPrimaries),cr.setUint8(14,bs.transferFunction),cr.setUint8(15,bs.flags),!Array.isArray(bs.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");cr.setUint8(16,bs.texelBlockDimension[0]),cr.setUint8(17,bs.texelBlockDimension[1]),cr.setUint8(18,bs.texelBlockDimension[2]),cr.setUint8(19,bs.texelBlockDimension[3]);for(let Ur=0;Ur<8;Ur++)cr.setUint8(20+Ur,bs.bytesPlane[Ur]);for(let Ur=0;Ur<bs.samples.length;Ur++){const ji=bs.samples[Ur],vr=28+16*Ur;if(ji.channelID)throw new Error("channelID has been renamed to channelType.");cr.setUint16(vr+0,ji.bitOffset,!0),cr.setUint8(vr+2,ji.bitLength),cr.setUint8(vr+3,ji.channelType),cr.setUint8(vr+4,ji.samplePosition[0]),cr.setUint8(vr+5,ji.samplePosition[1]),cr.setUint8(vr+6,ji.samplePosition[2]),cr.setUint8(vr+7,ji.samplePosition[3]),64&ji.channelType?(cr.setInt32(vr+8,ji.sampleLower,!0),cr.setInt32(vr+12,ji.sampleUpper,!0)):(cr.setUint32(vr+8,ji.sampleLower,!0),cr.setUint32(vr+12,ji.sampleUpper,!0))}const cl=ls.length+68+3*Zn.levels.length*8,Va=cl+fs.byteLength;let Zs=fr.byteLength>0?Va+io.byteLength:0;Zs%8&&(Zs+=8-Zs%8);const Wi=[],da=new DataView(new ArrayBuffer(3*Zn.levels.length*8));let ro=(Zs||Va+io.byteLength)+fr.byteLength;for(let Ur=0;Ur<Zn.levels.length;Ur++){const ji=Zn.levels[Ur];Wi.push(ji.levelData),da.setBigUint64(24*Ur+0,BigInt(ro),!0),da.setBigUint64(24*Ur+8,BigInt(ji.levelData.byteLength),!0),da.setBigUint64(24*Ur+16,BigInt(ji.uncompressedByteLength),!0),ro+=ji.levelData.byteLength}const ea=new ArrayBuffer(68),Ar=new DataView(ea);return Ar.setUint32(0,Zn.vkFormat,!0),Ar.setUint32(4,Zn.typeSize,!0),Ar.setUint32(8,Zn.pixelWidth,!0),Ar.setUint32(12,Zn.pixelHeight,!0),Ar.setUint32(16,Zn.pixelDepth,!0),Ar.setUint32(20,Zn.layerCount,!0),Ar.setUint32(24,Zn.faceCount,!0),Ar.setUint32(28,Zn.levels.length,!0),Ar.setUint32(32,Zn.supercompressionScheme,!0),Ar.setUint32(36,cl,!0),Ar.setUint32(40,fs.byteLength,!0),Ar.setUint32(44,Va,!0),Ar.setUint32(48,io.byteLength,!0),Ar.setBigUint64(52,BigInt(fr.byteLength>0?Zs:0),!0),Ar.setBigUint64(60,BigInt(fr.byteLength),!0),new Uint8Array(qr([new Uint8Array(ls).buffer,ea,da.buffer,fs,io,Zs>0?new ArrayBuffer(Zs-(Va+io.byteLength)):new ArrayBuffer(0),fr,...Wi]))}},"./node_modules/three/examples/jsm/libs/zstddec.module.js":(u,m,c)=>{c.r(m),c.d(m,{ZSTDDecoder:()=>y});var d=c("./node_modules/buffer/index.js").Buffer;let A,p,v;const g={env:{emscripten_notify_memory_growth:function(_){v=new Uint8Array(p.exports.memory.buffer)}}};class y{init(){return A||(A=typeof fetch<"u"?fetch("data:application/wasm;base64,"+E).then(S=>S.arrayBuffer()).then(S=>WebAssembly.instantiate(S,g)).then(this._init):WebAssembly.instantiate(d.from(E,"base64"),g).then(this._init),A)}_init(S){p=S.instance,g.env.emscripten_notify_memory_growth(0)}decode(S,x=0){if(!p)throw new Error("ZSTDDecoder: Await .init() before decoding.");const C=S.byteLength,w=p.exports.malloc(C);v.set(S,w),x=x||Number(p.exports.ZSTD_findDecompressedSize(w,C));const T=p.exports.malloc(x),O=p.exports.ZSTD_decompress(T,x,w,C),B=v.slice(T,T+O);return p.exports.free(w),p.exports.free(T),B}}const E="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ"},"./node_modules/three/examples/jsm/lights/LightProbeGenerator.js":(u,m,c)=>{c.r(m),c.d(m,{LightProbeGenerator:()=>A});var d=c("./node_modules/three/build/three.module.js");class A{static fromCubeTexture(g){let y=0;const E=new d.Vector3,_=new d.Vector3,S=new d.Color,x=[0,0,0,0,0,0,0,0,0],C=new d.SphericalHarmonics3,w=C.coefficients;for(let O=0;O<6;O++){const B=g.image[O],P=B.width,L=B.height,N=document.createElement("canvas");N.width=P,N.height=L;const F=N.getContext("2d");F.drawImage(B,0,0,P,L);const z=F.getImageData(0,0,P,L),G=z.data,H=z.width,j=2/H;for(let q=0,Q=G.length;q<Q;q+=4){S.setRGB(G[q]/255,G[q+1]/255,G[q+2]/255),p(S,g.colorSpace);const k=q/4,K=-1+(k%H+.5)*j,W=1-(Math.floor(k/H)+.5)*j;switch(O){case 0:E.set(-1,W,-K);break;case 1:E.set(1,W,K);break;case 2:E.set(-K,1,-W);break;case 3:E.set(-K,-1,W);break;case 4:E.set(-K,W,1);break;case 5:E.set(K,W,-1);break}const J=E.lengthSq(),se=4/(Math.sqrt(J)*J);y+=se,_.copy(E).normalize(),d.SphericalHarmonics3.getBasisAt(_,x);for(let ge=0;ge<9;ge++)w[ge].x+=x[ge]*S.r*se,w[ge].y+=x[ge]*S.g*se,w[ge].z+=x[ge]*S.b*se}}const T=4*Math.PI/y;for(let O=0;O<9;O++)w[O].x*=T,w[O].y*=T,w[O].z*=T;return new d.LightProbe(C)}static fromCubeRenderTarget(g,y){let E=0;const _=new d.Vector3,S=new d.Vector3,x=new d.Color,C=[0,0,0,0,0,0,0,0,0],w=new d.SphericalHarmonics3,T=w.coefficients,O=y.texture.type;for(let P=0;P<6;P++){const L=y.width;let N;O===d.HalfFloatType?N=new Uint16Array(L*L*4):N=new Uint8Array(L*L*4),g.readRenderTargetPixels(y,0,0,L,L,N,P);const F=2/L;for(let z=0,G=N.length;z<G;z+=4){let H,j,q;O===d.HalfFloatType?(H=d.DataUtils.fromHalfFloat(N[z]),j=d.DataUtils.fromHalfFloat(N[z+1]),q=d.DataUtils.fromHalfFloat(N[z+2])):(H=N[z]/255,j=N[z+1]/255,q=N[z+2]/255),x.setRGB(H,j,q),p(x,y.texture.colorSpace);const Q=z/4,k=-1+(Q%L+.5)*F,K=1-(Math.floor(Q/L)+.5)*F;switch(P){case 0:_.set(1,K,-k);break;case 1:_.set(-1,K,k);break;case 2:_.set(k,1,-K);break;case 3:_.set(k,-1,K);break;case 4:_.set(k,K,1);break;case 5:_.set(-k,K,-1);break}const W=_.lengthSq(),J=4/(Math.sqrt(W)*W);E+=J,S.copy(_).normalize(),d.SphericalHarmonics3.getBasisAt(S,C);for(let se=0;se<9;se++)T[se].x+=C[se]*x.r*J,T[se].y+=C[se]*x.g*J,T[se].z+=C[se]*x.b*J}}const B=4*Math.PI/E;for(let P=0;P<9;P++)T[P].x*=B,T[P].y*=B,T[P].z*=B;return new d.LightProbe(w)}}function p(v,g){switch(g){case d.SRGBColorSpace:v.convertSRGBToLinear();break;case d.LinearSRGBColorSpace:case d.NoColorSpace:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.");break}return v}},"./node_modules/three/examples/jsm/loaders/DRACOLoader.js":(u,m,c)=>{c.r(m),c.d(m,{DRACOLoader:()=>p});var d=c("./node_modules/three/build/three.module.js");const A=new WeakMap;class p extends d.Loader{constructor(y){super(y),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(y){return this.decoderPath=y,this}setDecoderConfig(y){return this.decoderConfig=y,this}setWorkerLimit(y){return this.workerLimit=y,this}load(y,E,_,S){const x=new d.FileLoader(this.manager);x.setPath(this.path),x.setResponseType("arraybuffer"),x.setRequestHeader(this.requestHeader),x.setWithCredentials(this.withCredentials),x.load(y,C=>{this.parse(C,E,S)},_,S)}parse(y,E,_=()=>{}){this.decodeDracoFile(y,E,null,null,d.SRGBColorSpace).catch(_)}decodeDracoFile(y,E,_,S,x=d.LinearSRGBColorSpace,C=()=>{}){const w={attributeIDs:_||this.defaultAttributeIDs,attributeTypes:S||this.defaultAttributeTypes,useUniqueIDs:!!_,vertexColorSpace:x};return this.decodeGeometry(y,w).then(E).catch(C)}decodeGeometry(y,E){const _=JSON.stringify(E);if(A.has(y)){const T=A.get(y);if(T.key===_)return T.promise;if(y.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let S;const x=this.workerNextTaskID++,C=y.byteLength,w=this._getWorker(x,C).then(T=>(S=T,new Promise((O,B)=>{S._callbacks[x]={resolve:O,reject:B},S.postMessage({type:"decode",id:x,taskConfig:E,buffer:y},[y])}))).then(T=>this._createGeometry(T.geometry));return w.catch(()=>!0).then(()=>{S&&x&&this._releaseTask(S,x)}),A.set(y,{key:_,promise:w}),w}_createGeometry(y){const E=new d.BufferGeometry;y.index&&E.setIndex(new d.BufferAttribute(y.index.array,1));for(let _=0;_<y.attributes.length;_++){const S=y.attributes[_],x=S.name,C=S.array,w=S.itemSize,T=new d.BufferAttribute(C,w);x==="color"&&(this._assignVertexColorSpace(T,S.vertexColorSpace),T.normalized=!(C instanceof Float32Array)),E.setAttribute(x,T)}return E}_assignVertexColorSpace(y,E){if(E!==d.SRGBColorSpace)return;const _=new d.Color;for(let S=0,x=y.count;S<x;S++)_.fromBufferAttribute(y,S).convertSRGBToLinear(),y.setXYZ(S,_.r,_.g,_.b)}_loadLibrary(y,E){const _=new d.FileLoader(this.manager);return _.setPath(this.decoderPath),_.setResponseType(E),_.setWithCredentials(this.withCredentials),new Promise((S,x)=>{_.load(y,S,void 0,x)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const y=typeof WebAssembly!="object"||this.decoderConfig.type==="js",E=[];return y?E.push(this._loadLibrary("draco_decoder.js","text")):(E.push(this._loadLibrary("draco_wasm_wrapper.js","text")),E.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(E).then(_=>{const S=_[0];y||(this.decoderConfig.wasmBinary=_[1]);const x=v.toString(),C=["/* draco decoder */",S,"","/* worker */",x.substring(x.indexOf("{")+1,x.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([C]))}),this.decoderPending}_getWorker(y,E){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const S=new Worker(this.workerSourceURL);S._callbacks={},S._taskCosts={},S._taskLoad=0,S.postMessage({type:"init",decoderConfig:this.decoderConfig}),S.onmessage=function(x){const C=x.data;switch(C.type){case"decode":S._callbacks[C.id].resolve(C);break;case"error":S._callbacks[C.id].reject(C);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+C.type+'"')}},this.workerPool.push(S)}else this.workerPool.sort(function(S,x){return S._taskLoad>x._taskLoad?-1:1});const _=this.workerPool[this.workerPool.length-1];return _._taskCosts[y]=E,_._taskLoad+=E,_})}_releaseTask(y,E){y._taskLoad-=y._taskCosts[E],delete y._callbacks[E],delete y._taskCosts[E]}debug(){console.log("Task load: ",this.workerPool.map(y=>y._taskLoad))}dispose(){for(let y=0;y<this.workerPool.length;++y)this.workerPool[y].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function v(){let g,y;onmessage=function(C){const w=C.data;switch(w.type){case"init":g=w.decoderConfig,y=new Promise(function(B){g.onModuleLoaded=function(P){B({draco:P})},DracoDecoderModule(g)});break;case"decode":const T=w.buffer,O=w.taskConfig;y.then(B=>{const P=B.draco,L=new P.Decoder;try{const N=E(P,L,new Int8Array(T),O),F=N.attributes.map(z=>z.array.buffer);N.index&&F.push(N.index.array.buffer),self.postMessage({type:"decode",id:w.id,geometry:N},F)}catch(N){console.error(N),self.postMessage({type:"error",id:w.id,error:N.message})}finally{P.destroy(L)}});break}};function E(C,w,T,O){const B=O.attributeIDs,P=O.attributeTypes;let L,N;const F=w.GetEncodedGeometryType(T);if(F===C.TRIANGULAR_MESH)L=new C.Mesh,N=w.DecodeArrayToMesh(T,T.byteLength,L);else if(F===C.POINT_CLOUD)L=new C.PointCloud,N=w.DecodeArrayToPointCloud(T,T.byteLength,L);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!N.ok()||L.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+N.error_msg());const z={index:null,attributes:[]};for(const G in B){const H=self[P[G]];let j,q;if(O.useUniqueIDs)q=B[G],j=w.GetAttributeByUniqueId(L,q);else{if(q=w.GetAttributeId(L,C[B[G]]),q===-1)continue;j=w.GetAttribute(L,q)}const Q=S(C,w,L,G,H,j);G==="color"&&(Q.vertexColorSpace=O.vertexColorSpace),z.attributes.push(Q)}return F===C.TRIANGULAR_MESH&&(z.index=_(C,w,L)),C.destroy(L),z}function _(C,w,T){const B=T.num_faces()*3,P=B*4,L=C._malloc(P);w.GetTrianglesUInt32Array(T,P,L);const N=new Uint32Array(C.HEAPF32.buffer,L,B).slice();return C._free(L),{array:N,itemSize:1}}function S(C,w,T,O,B,P){const L=P.num_components(),F=T.num_points()*L,z=F*B.BYTES_PER_ELEMENT,G=x(C,B),H=C._malloc(z);w.GetAttributeDataArrayForAllPoints(T,P,G,z,H);const j=new B(C.HEAPF32.buffer,H,F).slice();return C._free(H),{name:O,array:j,itemSize:L}}function x(C,w){switch(w){case Float32Array:return C.DT_FLOAT32;case Int8Array:return C.DT_INT8;case Int16Array:return C.DT_INT16;case Int32Array:return C.DT_INT32;case Uint8Array:return C.DT_UINT8;case Uint16Array:return C.DT_UINT16;case Uint32Array:return C.DT_UINT32}}}},"./node_modules/three/examples/jsm/loaders/GLTFLoader.js":(u,m,c)=>{c.r(m),c.d(m,{GLTFLoader:()=>p});var d=c("./node_modules/three/build/three.module.js"),A=c("./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js");class p extends d.Loader{constructor(pe){super(pe),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(_e){return new S(_e)}),this.register(function(_e){return new x(_e)}),this.register(function(_e){return new F(_e)}),this.register(function(_e){return new z(_e)}),this.register(function(_e){return new G(_e)}),this.register(function(_e){return new w(_e)}),this.register(function(_e){return new T(_e)}),this.register(function(_e){return new O(_e)}),this.register(function(_e){return new B(_e)}),this.register(function(_e){return new _(_e)}),this.register(function(_e){return new P(_e)}),this.register(function(_e){return new C(_e)}),this.register(function(_e){return new N(_e)}),this.register(function(_e){return new L(_e)}),this.register(function(_e){return new y(_e)}),this.register(function(_e){return new H(_e)}),this.register(function(_e){return new j(_e)})}load(pe,_e,De,Be){const Le=this;let ke;if(this.resourcePath!=="")ke=this.resourcePath;else if(this.path!==""){const Y=d.LoaderUtils.extractUrlBase(pe);ke=d.LoaderUtils.resolveURL(Y,this.path)}else ke=d.LoaderUtils.extractUrlBase(pe);this.manager.itemStart(pe);const ce=function(Y){Be?Be(Y):console.error(Y),Le.manager.itemError(pe),Le.manager.itemEnd(pe)},X=new d.FileLoader(this.manager);X.setPath(this.path),X.setResponseType("arraybuffer"),X.setRequestHeader(this.requestHeader),X.setWithCredentials(this.withCredentials),X.load(pe,function(Y){try{Le.parse(Y,ke,function(be){_e(be),Le.manager.itemEnd(pe)},ce)}catch(be){ce(be)}},De,ce)}setDRACOLoader(pe){return this.dracoLoader=pe,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(pe){return this.ktx2Loader=pe,this}setMeshoptDecoder(pe){return this.meshoptDecoder=pe,this}register(pe){return this.pluginCallbacks.indexOf(pe)===-1&&this.pluginCallbacks.push(pe),this}unregister(pe){return this.pluginCallbacks.indexOf(pe)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(pe),1),this}parse(pe,_e,De,Be){let Le;const ke={},ce={},X=new TextDecoder;if(typeof pe=="string")Le=JSON.parse(pe);else if(pe instanceof ArrayBuffer)if(X.decode(new Uint8Array(pe,0,4))===q){try{ke[g.KHR_BINARY_GLTF]=new K(pe)}catch(Te){Be&&Be(Te);return}Le=JSON.parse(ke[g.KHR_BINARY_GLTF].content)}else Le=JSON.parse(X.decode(pe));else Le=pe;if(Le.asset===void 0||Le.asset.version[0]<2){Be&&Be(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const Y=new Kt(Le,{path:_e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Y.fileLoader.setRequestHeader(this.requestHeader);for(let be=0;be<this.pluginCallbacks.length;be++){const Te=this.pluginCallbacks[be](Y);Te.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),ce[Te.name]=Te,ke[Te.name]=!0}if(Le.extensionsUsed)for(let be=0;be<Le.extensionsUsed.length;++be){const Te=Le.extensionsUsed[be],We=Le.extensionsRequired||[];switch(Te){case g.KHR_MATERIALS_UNLIT:ke[Te]=new E;break;case g.KHR_DRACO_MESH_COMPRESSION:ke[Te]=new W(Le,this.dracoLoader);break;case g.KHR_TEXTURE_TRANSFORM:ke[Te]=new J;break;case g.KHR_MESH_QUANTIZATION:ke[Te]=new se;break;default:We.indexOf(Te)>=0&&ce[Te]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Te+'".')}}Y.setExtensions(ke),Y.setPlugins(ce),Y.parse(De,Be)}parseAsync(pe,_e){const De=this;return new Promise(function(Be,Le){De.parse(pe,_e,Be,Le)})}}function v(){let St={};return{get:function(pe){return St[pe]},add:function(pe,_e){St[pe]=_e},remove:function(pe){delete St[pe]},removeAll:function(){St={}}}}const g={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class y{constructor(pe){this.parser=pe,this.name=g.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const pe=this.parser,_e=this.parser.json.nodes||[];for(let De=0,Be=_e.length;De<Be;De++){const Le=_e[De];Le.extensions&&Le.extensions[this.name]&&Le.extensions[this.name].light!==void 0&&pe._addNodeRef(this.cache,Le.extensions[this.name].light)}}_loadLight(pe){const _e=this.parser,De="light:"+pe;let Be=_e.cache.get(De);if(Be)return Be;const Le=_e.json,X=((Le.extensions&&Le.extensions[this.name]||{}).lights||[])[pe];let Y;const be=new d.Color(16777215);X.color!==void 0&&be.setRGB(X.color[0],X.color[1],X.color[2],d.LinearSRGBColorSpace);const Te=X.range!==void 0?X.range:0;switch(X.type){case"directional":Y=new d.DirectionalLight(be),Y.target.position.set(0,0,-1),Y.add(Y.target);break;case"point":Y=new d.PointLight(be),Y.distance=Te;break;case"spot":Y=new d.SpotLight(be),Y.distance=Te,X.spot=X.spot||{},X.spot.innerConeAngle=X.spot.innerConeAngle!==void 0?X.spot.innerConeAngle:0,X.spot.outerConeAngle=X.spot.outerConeAngle!==void 0?X.spot.outerConeAngle:Math.PI/4,Y.angle=X.spot.outerConeAngle,Y.penumbra=1-X.spot.innerConeAngle/X.spot.outerConeAngle,Y.target.position.set(0,0,-1),Y.add(Y.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+X.type)}return Y.position.set(0,0,0),Y.decay=2,It(Y,X),X.intensity!==void 0&&(Y.intensity=X.intensity),Y.name=_e.createUniqueName(X.name||"light_"+pe),Be=Promise.resolve(Y),_e.cache.add(De,Be),Be}getDependency(pe,_e){if(pe==="light")return this._loadLight(_e)}createNodeAttachment(pe){const _e=this,De=this.parser,Le=De.json.nodes[pe],ce=(Le.extensions&&Le.extensions[this.name]||{}).light;return ce===void 0?null:this._loadLight(ce).then(function(X){return De._getNodeRef(_e.cache,ce,X)})}}class E{constructor(){this.name=g.KHR_MATERIALS_UNLIT}getMaterialType(){return d.MeshBasicMaterial}extendParams(pe,_e,De){const Be=[];pe.color=new d.Color(1,1,1),pe.opacity=1;const Le=_e.pbrMetallicRoughness;if(Le){if(Array.isArray(Le.baseColorFactor)){const ke=Le.baseColorFactor;pe.color.setRGB(ke[0],ke[1],ke[2],d.LinearSRGBColorSpace),pe.opacity=ke[3]}Le.baseColorTexture!==void 0&&Be.push(De.assignTexture(pe,"map",Le.baseColorTexture,d.SRGBColorSpace))}return Promise.all(Be)}}class _{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(pe,_e){const Be=this.parser.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=Be.extensions[this.name].emissiveStrength;return Le!==void 0&&(_e.emissiveIntensity=Le),Promise.resolve()}}class S{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_CLEARCOAT}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const De=this.parser,Be=De.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=[],ke=Be.extensions[this.name];if(ke.clearcoatFactor!==void 0&&(_e.clearcoat=ke.clearcoatFactor),ke.clearcoatTexture!==void 0&&Le.push(De.assignTexture(_e,"clearcoatMap",ke.clearcoatTexture)),ke.clearcoatRoughnessFactor!==void 0&&(_e.clearcoatRoughness=ke.clearcoatRoughnessFactor),ke.clearcoatRoughnessTexture!==void 0&&Le.push(De.assignTexture(_e,"clearcoatRoughnessMap",ke.clearcoatRoughnessTexture)),ke.clearcoatNormalTexture!==void 0&&(Le.push(De.assignTexture(_e,"clearcoatNormalMap",ke.clearcoatNormalTexture)),ke.clearcoatNormalTexture.scale!==void 0)){const ce=ke.clearcoatNormalTexture.scale;_e.clearcoatNormalScale=new d.Vector2(ce,ce)}return Promise.all(Le)}}class x{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_DISPERSION}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const Be=this.parser.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=Be.extensions[this.name];return _e.dispersion=Le.dispersion!==void 0?Le.dispersion:0,Promise.resolve()}}class C{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_IRIDESCENCE}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const De=this.parser,Be=De.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=[],ke=Be.extensions[this.name];return ke.iridescenceFactor!==void 0&&(_e.iridescence=ke.iridescenceFactor),ke.iridescenceTexture!==void 0&&Le.push(De.assignTexture(_e,"iridescenceMap",ke.iridescenceTexture)),ke.iridescenceIor!==void 0&&(_e.iridescenceIOR=ke.iridescenceIor),_e.iridescenceThicknessRange===void 0&&(_e.iridescenceThicknessRange=[100,400]),ke.iridescenceThicknessMinimum!==void 0&&(_e.iridescenceThicknessRange[0]=ke.iridescenceThicknessMinimum),ke.iridescenceThicknessMaximum!==void 0&&(_e.iridescenceThicknessRange[1]=ke.iridescenceThicknessMaximum),ke.iridescenceThicknessTexture!==void 0&&Le.push(De.assignTexture(_e,"iridescenceThicknessMap",ke.iridescenceThicknessTexture)),Promise.all(Le)}}class w{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_SHEEN}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const De=this.parser,Be=De.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=[];_e.sheenColor=new d.Color(0,0,0),_e.sheenRoughness=0,_e.sheen=1;const ke=Be.extensions[this.name];if(ke.sheenColorFactor!==void 0){const ce=ke.sheenColorFactor;_e.sheenColor.setRGB(ce[0],ce[1],ce[2],d.LinearSRGBColorSpace)}return ke.sheenRoughnessFactor!==void 0&&(_e.sheenRoughness=ke.sheenRoughnessFactor),ke.sheenColorTexture!==void 0&&Le.push(De.assignTexture(_e,"sheenColorMap",ke.sheenColorTexture,d.SRGBColorSpace)),ke.sheenRoughnessTexture!==void 0&&Le.push(De.assignTexture(_e,"sheenRoughnessMap",ke.sheenRoughnessTexture)),Promise.all(Le)}}class T{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_TRANSMISSION}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const De=this.parser,Be=De.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=[],ke=Be.extensions[this.name];return ke.transmissionFactor!==void 0&&(_e.transmission=ke.transmissionFactor),ke.transmissionTexture!==void 0&&Le.push(De.assignTexture(_e,"transmissionMap",ke.transmissionTexture)),Promise.all(Le)}}class O{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_VOLUME}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const De=this.parser,Be=De.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=[],ke=Be.extensions[this.name];_e.thickness=ke.thicknessFactor!==void 0?ke.thicknessFactor:0,ke.thicknessTexture!==void 0&&Le.push(De.assignTexture(_e,"thicknessMap",ke.thicknessTexture)),_e.attenuationDistance=ke.attenuationDistance||1/0;const ce=ke.attenuationColor||[1,1,1];return _e.attenuationColor=new d.Color().setRGB(ce[0],ce[1],ce[2],d.LinearSRGBColorSpace),Promise.all(Le)}}class B{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_IOR}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const Be=this.parser.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=Be.extensions[this.name];return _e.ior=Le.ior!==void 0?Le.ior:1.5,Promise.resolve()}}class P{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_SPECULAR}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const De=this.parser,Be=De.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=[],ke=Be.extensions[this.name];_e.specularIntensity=ke.specularFactor!==void 0?ke.specularFactor:1,ke.specularTexture!==void 0&&Le.push(De.assignTexture(_e,"specularIntensityMap",ke.specularTexture));const ce=ke.specularColorFactor||[1,1,1];return _e.specularColor=new d.Color().setRGB(ce[0],ce[1],ce[2],d.LinearSRGBColorSpace),ke.specularColorTexture!==void 0&&Le.push(De.assignTexture(_e,"specularColorMap",ke.specularColorTexture,d.SRGBColorSpace)),Promise.all(Le)}}class L{constructor(pe){this.parser=pe,this.name=g.EXT_MATERIALS_BUMP}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const De=this.parser,Be=De.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=[],ke=Be.extensions[this.name];return _e.bumpScale=ke.bumpFactor!==void 0?ke.bumpFactor:1,ke.bumpTexture!==void 0&&Le.push(De.assignTexture(_e,"bumpMap",ke.bumpTexture)),Promise.all(Le)}}class N{constructor(pe){this.parser=pe,this.name=g.KHR_MATERIALS_ANISOTROPY}getMaterialType(pe){const De=this.parser.json.materials[pe];return!De.extensions||!De.extensions[this.name]?null:d.MeshPhysicalMaterial}extendMaterialParams(pe,_e){const De=this.parser,Be=De.json.materials[pe];if(!Be.extensions||!Be.extensions[this.name])return Promise.resolve();const Le=[],ke=Be.extensions[this.name];return ke.anisotropyStrength!==void 0&&(_e.anisotropy=ke.anisotropyStrength),ke.anisotropyRotation!==void 0&&(_e.anisotropyRotation=ke.anisotropyRotation),ke.anisotropyTexture!==void 0&&Le.push(De.assignTexture(_e,"anisotropyMap",ke.anisotropyTexture)),Promise.all(Le)}}class F{constructor(pe){this.parser=pe,this.name=g.KHR_TEXTURE_BASISU}loadTexture(pe){const _e=this.parser,De=_e.json,Be=De.textures[pe];if(!Be.extensions||!Be.extensions[this.name])return null;const Le=Be.extensions[this.name],ke=_e.options.ktx2Loader;if(!ke){if(De.extensionsRequired&&De.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return _e.loadTextureImage(pe,Le.source,ke)}}class z{constructor(pe){this.parser=pe,this.name=g.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(pe){const _e=this.name,De=this.parser,Be=De.json,Le=Be.textures[pe];if(!Le.extensions||!Le.extensions[_e])return null;const ke=Le.extensions[_e],ce=Be.images[ke.source];let X=De.textureLoader;if(ce.uri){const Y=De.options.manager.getHandler(ce.uri);Y!==null&&(X=Y)}return this.detectSupport().then(function(Y){if(Y)return De.loadTextureImage(pe,ke.source,X);if(Be.extensionsRequired&&Be.extensionsRequired.indexOf(_e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return De.loadTexture(pe)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(pe){const _e=new Image;_e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",_e.onload=_e.onerror=function(){pe(_e.height===1)}})),this.isSupported}}class G{constructor(pe){this.parser=pe,this.name=g.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(pe){const _e=this.name,De=this.parser,Be=De.json,Le=Be.textures[pe];if(!Le.extensions||!Le.extensions[_e])return null;const ke=Le.extensions[_e],ce=Be.images[ke.source];let X=De.textureLoader;if(ce.uri){const Y=De.options.manager.getHandler(ce.uri);Y!==null&&(X=Y)}return this.detectSupport().then(function(Y){if(Y)return De.loadTextureImage(pe,ke.source,X);if(Be.extensionsRequired&&Be.extensionsRequired.indexOf(_e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return De.loadTexture(pe)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(pe){const _e=new Image;_e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",_e.onload=_e.onerror=function(){pe(_e.height===1)}})),this.isSupported}}class H{constructor(pe){this.name=g.EXT_MESHOPT_COMPRESSION,this.parser=pe}loadBufferView(pe){const _e=this.parser.json,De=_e.bufferViews[pe];if(De.extensions&&De.extensions[this.name]){const Be=De.extensions[this.name],Le=this.parser.getDependency("buffer",Be.buffer),ke=this.parser.options.meshoptDecoder;if(!ke||!ke.supported){if(_e.extensionsRequired&&_e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Le.then(function(ce){const X=Be.byteOffset||0,Y=Be.byteLength||0,be=Be.count,Te=Be.byteStride,We=new Uint8Array(ce,X,Y);return ke.decodeGltfBufferAsync?ke.decodeGltfBufferAsync(be,Te,We,Be.mode,Be.filter).then(function(tt){return tt.buffer}):ke.ready.then(function(){const tt=new ArrayBuffer(be*Te);return ke.decodeGltfBuffer(new Uint8Array(tt),be,Te,We,Be.mode,Be.filter),tt})})}else return null}}class j{constructor(pe){this.name=g.EXT_MESH_GPU_INSTANCING,this.parser=pe}createNodeMesh(pe){const _e=this.parser.json,De=_e.nodes[pe];if(!De.extensions||!De.extensions[this.name]||De.mesh===void 0)return null;const Be=_e.meshes[De.mesh];for(const Y of Be.primitives)if(Y.mode!==xe.TRIANGLES&&Y.mode!==xe.TRIANGLE_STRIP&&Y.mode!==xe.TRIANGLE_FAN&&Y.mode!==void 0)return null;const ke=De.extensions[this.name].attributes,ce=[],X={};for(const Y in ke)ce.push(this.parser.getDependency("accessor",ke[Y]).then(be=>(X[Y]=be,X[Y])));return ce.length<1?null:(ce.push(this.parser.createNodeMesh(pe)),Promise.all(ce).then(Y=>{const be=Y.pop(),Te=be.isGroup?be.children:[be],We=Y[0].count,tt=[];for(const wt of Te){const Zt=new d.Matrix4,qt=new d.Vector3,dn=new d.Quaternion,Qt=new d.Vector3(1,1,1),xi=new d.InstancedMesh(wt.geometry,wt.material,We);for(let Fn=0;Fn<We;Fn++)X.TRANSLATION&&qt.fromBufferAttribute(X.TRANSLATION,Fn),X.ROTATION&&dn.fromBufferAttribute(X.ROTATION,Fn),X.SCALE&&Qt.fromBufferAttribute(X.SCALE,Fn),xi.setMatrixAt(Fn,Zt.compose(qt,dn,Qt));for(const Fn in X)if(Fn==="_COLOR_0"){const Br=X[Fn];xi.instanceColor=new d.InstancedBufferAttribute(Br.array,Br.itemSize,Br.normalized)}else Fn!=="TRANSLATION"&&Fn!=="ROTATION"&&Fn!=="SCALE"&&wt.geometry.setAttribute(Fn,X[Fn]);d.Object3D.prototype.copy.call(xi,wt),this.parser.assignFinalMaterial(xi),tt.push(xi)}return be.isGroup?(be.clear(),be.add(...tt),be):tt[0]}))}}const q="glTF",Q=12,k={JSON:1313821514,BIN:5130562};class K{constructor(pe){this.name=g.KHR_BINARY_GLTF,this.content=null,this.body=null;const _e=new DataView(pe,0,Q),De=new TextDecoder;if(this.header={magic:De.decode(new Uint8Array(pe.slice(0,4))),version:_e.getUint32(4,!0),length:_e.getUint32(8,!0)},this.header.magic!==q)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const Be=this.header.length-Q,Le=new DataView(pe,Q);let ke=0;for(;ke<Be;){const ce=Le.getUint32(ke,!0);ke+=4;const X=Le.getUint32(ke,!0);if(ke+=4,X===k.JSON){const Y=new Uint8Array(pe,Q+ke,ce);this.content=De.decode(Y)}else if(X===k.BIN){const Y=Q+ke;this.body=pe.slice(Y,Y+ce)}ke+=ce}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class W{constructor(pe,_e){if(!_e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=g.KHR_DRACO_MESH_COMPRESSION,this.json=pe,this.dracoLoader=_e,this.dracoLoader.preload()}decodePrimitive(pe,_e){const De=this.json,Be=this.dracoLoader,Le=pe.extensions[this.name].bufferView,ke=pe.extensions[this.name].attributes,ce={},X={},Y={};for(const be in ke){const Te=Ae[be]||be.toLowerCase();ce[Te]=ke[be]}for(const be in pe.attributes){const Te=Ae[be]||be.toLowerCase();if(ke[be]!==void 0){const We=De.accessors[pe.attributes[be]],tt=ye[We.componentType];Y[Te]=tt.name,X[Te]=We.normalized===!0}}return _e.getDependency("bufferView",Le).then(function(be){return new Promise(function(Te,We){Be.decodeDracoFile(be,function(tt){for(const wt in tt.attributes){const Zt=tt.attributes[wt],qt=X[wt];qt!==void 0&&(Zt.normalized=qt)}Te(tt)},ce,Y,d.LinearSRGBColorSpace,We)})})}}class J{constructor(){this.name=g.KHR_TEXTURE_TRANSFORM}extendTexture(pe,_e){return(_e.texCoord===void 0||_e.texCoord===pe.channel)&&_e.offset===void 0&&_e.rotation===void 0&&_e.scale===void 0||(pe=pe.clone(),_e.texCoord!==void 0&&(pe.channel=_e.texCoord),_e.offset!==void 0&&pe.offset.fromArray(_e.offset),_e.rotation!==void 0&&(pe.rotation=_e.rotation),_e.scale!==void 0&&pe.repeat.fromArray(_e.scale),pe.needsUpdate=!0),pe}}class se{constructor(){this.name=g.KHR_MESH_QUANTIZATION}}class ge extends d.Interpolant{constructor(pe,_e,De,Be){super(pe,_e,De,Be)}copySampleValue_(pe){const _e=this.resultBuffer,De=this.sampleValues,Be=this.valueSize,Le=pe*Be*3+Be;for(let ke=0;ke!==Be;ke++)_e[ke]=De[Le+ke];return _e}interpolate_(pe,_e,De,Be){const Le=this.resultBuffer,ke=this.sampleValues,ce=this.valueSize,X=ce*2,Y=ce*3,be=Be-_e,Te=(De-_e)/be,We=Te*Te,tt=We*Te,wt=pe*Y,Zt=wt-Y,qt=-2*tt+3*We,dn=tt-We,Qt=1-qt,xi=dn-We+Te;for(let Fn=0;Fn!==ce;Fn++){const Br=ke[Zt+Fn+ce],Li=ke[Zt+Fn+X]*be,qi=ke[wt+Fn+ce],Fs=ke[wt+Fn]*be;Le[Fn]=Qt*Br+xi*Li+qt*qi+dn*Fs}return Le}}const fe=new d.Quaternion;class me extends ge{interpolate_(pe,_e,De,Be){const Le=super.interpolate_(pe,_e,De,Be);return fe.fromArray(Le).normalize().toArray(Le),Le}}const xe={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ye={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},we={9728:d.NearestFilter,9729:d.LinearFilter,9984:d.NearestMipmapNearestFilter,9985:d.LinearMipmapNearestFilter,9986:d.NearestMipmapLinearFilter,9987:d.LinearMipmapLinearFilter},Ee={33071:d.ClampToEdgeWrapping,33648:d.MirroredRepeatWrapping,10497:d.RepeatWrapping},He={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ae={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ke={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ue={CUBICSPLINE:void 0,LINEAR:d.InterpolateLinear,STEP:d.InterpolateDiscrete},ct={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function vt(St){return St.DefaultMaterial===void 0&&(St.DefaultMaterial=new d.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:d.FrontSide})),St.DefaultMaterial}function dt(St,pe,_e){for(const De in _e.extensions)St[De]===void 0&&(pe.userData.gltfExtensions=pe.userData.gltfExtensions||{},pe.userData.gltfExtensions[De]=_e.extensions[De])}function It(St,pe){pe.extras!==void 0&&(typeof pe.extras=="object"?Object.assign(St.userData,pe.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+pe.extras))}function rt(St,pe,_e){let De=!1,Be=!1,Le=!1;for(let Y=0,be=pe.length;Y<be;Y++){const Te=pe[Y];if(Te.POSITION!==void 0&&(De=!0),Te.NORMAL!==void 0&&(Be=!0),Te.COLOR_0!==void 0&&(Le=!0),De&&Be&&Le)break}if(!De&&!Be&&!Le)return Promise.resolve(St);const ke=[],ce=[],X=[];for(let Y=0,be=pe.length;Y<be;Y++){const Te=pe[Y];if(De){const We=Te.POSITION!==void 0?_e.getDependency("accessor",Te.POSITION):St.attributes.position;ke.push(We)}if(Be){const We=Te.NORMAL!==void 0?_e.getDependency("accessor",Te.NORMAL):St.attributes.normal;ce.push(We)}if(Le){const We=Te.COLOR_0!==void 0?_e.getDependency("accessor",Te.COLOR_0):St.attributes.color;X.push(We)}}return Promise.all([Promise.all(ke),Promise.all(ce),Promise.all(X)]).then(function(Y){const be=Y[0],Te=Y[1],We=Y[2];return De&&(St.morphAttributes.position=be),Be&&(St.morphAttributes.normal=Te),Le&&(St.morphAttributes.color=We),St.morphTargetsRelative=!0,St})}function Lt(St,pe){if(St.updateMorphTargets(),pe.weights!==void 0)for(let _e=0,De=pe.weights.length;_e<De;_e++)St.morphTargetInfluences[_e]=pe.weights[_e];if(pe.extras&&Array.isArray(pe.extras.targetNames)){const _e=pe.extras.targetNames;if(St.morphTargetInfluences.length===_e.length){St.morphTargetDictionary={};for(let De=0,Be=_e.length;De<Be;De++)St.morphTargetDictionary[_e[De]]=De}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function hn(St){let pe;const _e=St.extensions&&St.extensions[g.KHR_DRACO_MESH_COMPRESSION];if(_e?pe="draco:"+_e.bufferView+":"+_e.indices+":"+Et(_e.attributes):pe=St.indices+":"+Et(St.attributes)+":"+St.mode,St.targets!==void 0)for(let De=0,Be=St.targets.length;De<Be;De++)pe+=":"+Et(St.targets[De]);return pe}function Et(St){let pe="";const _e=Object.keys(St).sort();for(let De=0,Be=_e.length;De<Be;De++)pe+=_e[De]+":"+St[_e[De]]+";";return pe}function xt(St){switch(St){case Int8Array:return .007874015748031496;case Uint8Array:return .00392156862745098;case Int16Array:return 3051850947599719e-20;case Uint16Array:return 15259021896696422e-21;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function en(St){return St.search(/\.jpe?g($|\?)/i)>0||St.search(/^data\:image\/jpeg/)===0?"image/jpeg":St.search(/\.webp($|\?)/i)>0||St.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _t=new d.Matrix4;class Kt{constructor(pe={},_e={}){this.json=pe,this.extensions={},this.plugins={},this.options=_e,this.cache=new v,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let De=!1,Be=!1,Le=-1;typeof navigator<"u"&&(De=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,Be=navigator.userAgent.indexOf("Firefox")>-1,Le=Be?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||De||Be&&Le<98?this.textureLoader=new d.TextureLoader(this.options.manager):this.textureLoader=new d.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new d.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(pe){this.extensions=pe}setPlugins(pe){this.plugins=pe}parse(pe,_e){const De=this,Be=this.json,Le=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(ke){return ke._markDefs&&ke._markDefs()}),Promise.all(this._invokeAll(function(ke){return ke.beforeRoot&&ke.beforeRoot()})).then(function(){return Promise.all([De.getDependencies("scene"),De.getDependencies("animation"),De.getDependencies("camera")])}).then(function(ke){const ce={scene:ke[0][Be.scene||0],scenes:ke[0],animations:ke[1],cameras:ke[2],asset:Be.asset,parser:De,userData:{}};return dt(Le,ce,Be),It(ce,Be),Promise.all(De._invokeAll(function(X){return X.afterRoot&&X.afterRoot(ce)})).then(function(){for(const X of ce.scenes)X.updateMatrixWorld();pe(ce)})}).catch(_e)}_markDefs(){const pe=this.json.nodes||[],_e=this.json.skins||[],De=this.json.meshes||[];for(let Be=0,Le=_e.length;Be<Le;Be++){const ke=_e[Be].joints;for(let ce=0,X=ke.length;ce<X;ce++)pe[ke[ce]].isBone=!0}for(let Be=0,Le=pe.length;Be<Le;Be++){const ke=pe[Be];ke.mesh!==void 0&&(this._addNodeRef(this.meshCache,ke.mesh),ke.skin!==void 0&&(De[ke.mesh].isSkinnedMesh=!0)),ke.camera!==void 0&&this._addNodeRef(this.cameraCache,ke.camera)}}_addNodeRef(pe,_e){_e!==void 0&&(pe.refs[_e]===void 0&&(pe.refs[_e]=pe.uses[_e]=0),pe.refs[_e]++)}_getNodeRef(pe,_e,De){if(pe.refs[_e]<=1)return De;const Be=De.clone(),Le=(ke,ce)=>{const X=this.associations.get(ke);X!=null&&this.associations.set(ce,X);for(const[Y,be]of ke.children.entries())Le(be,ce.children[Y])};return Le(De,Be),Be.name+="_instance_"+pe.uses[_e]++,Be}_invokeOne(pe){const _e=Object.values(this.plugins);_e.push(this);for(let De=0;De<_e.length;De++){const Be=pe(_e[De]);if(Be)return Be}return null}_invokeAll(pe){const _e=Object.values(this.plugins);_e.unshift(this);const De=[];for(let Be=0;Be<_e.length;Be++){const Le=pe(_e[Be]);Le&&De.push(Le)}return De}getDependency(pe,_e){const De=pe+":"+_e;let Be=this.cache.get(De);if(!Be){switch(pe){case"scene":Be=this.loadScene(_e);break;case"node":Be=this._invokeOne(function(Le){return Le.loadNode&&Le.loadNode(_e)});break;case"mesh":Be=this._invokeOne(function(Le){return Le.loadMesh&&Le.loadMesh(_e)});break;case"accessor":Be=this.loadAccessor(_e);break;case"bufferView":Be=this._invokeOne(function(Le){return Le.loadBufferView&&Le.loadBufferView(_e)});break;case"buffer":Be=this.loadBuffer(_e);break;case"material":Be=this._invokeOne(function(Le){return Le.loadMaterial&&Le.loadMaterial(_e)});break;case"texture":Be=this._invokeOne(function(Le){return Le.loadTexture&&Le.loadTexture(_e)});break;case"skin":Be=this.loadSkin(_e);break;case"animation":Be=this._invokeOne(function(Le){return Le.loadAnimation&&Le.loadAnimation(_e)});break;case"camera":Be=this.loadCamera(_e);break;default:if(Be=this._invokeOne(function(Le){return Le!=this&&Le.getDependency&&Le.getDependency(pe,_e)}),!Be)throw new Error("Unknown type: "+pe);break}this.cache.add(De,Be)}return Be}getDependencies(pe){let _e=this.cache.get(pe);if(!_e){const De=this,Be=this.json[pe+(pe==="mesh"?"es":"s")]||[];_e=Promise.all(Be.map(function(Le,ke){return De.getDependency(pe,ke)})),this.cache.add(pe,_e)}return _e}loadBuffer(pe){const _e=this.json.buffers[pe],De=this.fileLoader;if(_e.type&&_e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+_e.type+" buffer type is not supported.");if(_e.uri===void 0&&pe===0)return Promise.resolve(this.extensions[g.KHR_BINARY_GLTF].body);const Be=this.options;return new Promise(function(Le,ke){De.load(d.LoaderUtils.resolveURL(_e.uri,Be.path),Le,void 0,function(){ke(new Error('THREE.GLTFLoader: Failed to load buffer "'+_e.uri+'".'))})})}loadBufferView(pe){const _e=this.json.bufferViews[pe];return this.getDependency("buffer",_e.buffer).then(function(De){const Be=_e.byteLength||0,Le=_e.byteOffset||0;return De.slice(Le,Le+Be)})}loadAccessor(pe){const _e=this,De=this.json,Be=this.json.accessors[pe];if(Be.bufferView===void 0&&Be.sparse===void 0){const ke=He[Be.type],ce=ye[Be.componentType],X=Be.normalized===!0,Y=new ce(Be.count*ke);return Promise.resolve(new d.BufferAttribute(Y,ke,X))}const Le=[];return Be.bufferView!==void 0?Le.push(this.getDependency("bufferView",Be.bufferView)):Le.push(null),Be.sparse!==void 0&&(Le.push(this.getDependency("bufferView",Be.sparse.indices.bufferView)),Le.push(this.getDependency("bufferView",Be.sparse.values.bufferView))),Promise.all(Le).then(function(ke){const ce=ke[0],X=He[Be.type],Y=ye[Be.componentType],be=Y.BYTES_PER_ELEMENT,Te=be*X,We=Be.byteOffset||0,tt=Be.bufferView!==void 0?De.bufferViews[Be.bufferView].byteStride:void 0,wt=Be.normalized===!0;let Zt,qt;if(tt&&tt!==Te){const dn=Math.floor(We/tt),Qt="InterleavedBuffer:"+Be.bufferView+":"+Be.componentType+":"+dn+":"+Be.count;let xi=_e.cache.get(Qt);xi||(Zt=new Y(ce,dn*tt,Be.count*tt/be),xi=new d.InterleavedBuffer(Zt,tt/be),_e.cache.add(Qt,xi)),qt=new d.InterleavedBufferAttribute(xi,X,We%tt/be,wt)}else ce===null?Zt=new Y(Be.count*X):Zt=new Y(ce,We,Be.count*X),qt=new d.BufferAttribute(Zt,X,wt);if(Be.sparse!==void 0){const dn=He.SCALAR,Qt=ye[Be.sparse.indices.componentType],xi=Be.sparse.indices.byteOffset||0,Fn=Be.sparse.values.byteOffset||0,Br=new Qt(ke[1],xi,Be.sparse.count*dn),Li=new Y(ke[2],Fn,Be.sparse.count*X);ce!==null&&(qt=new d.BufferAttribute(qt.array.slice(),qt.itemSize,qt.normalized));for(let qi=0,Fs=Br.length;qi<Fs;qi++){const Hr=Br[qi];if(qt.setX(Hr,Li[qi*X]),X>=2&&qt.setY(Hr,Li[qi*X+1]),X>=3&&qt.setZ(Hr,Li[qi*X+2]),X>=4&&qt.setW(Hr,Li[qi*X+3]),X>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return qt})}loadTexture(pe){const _e=this.json,De=this.options,Le=_e.textures[pe].source,ke=_e.images[Le];let ce=this.textureLoader;if(ke.uri){const X=De.manager.getHandler(ke.uri);X!==null&&(ce=X)}return this.loadTextureImage(pe,Le,ce)}loadTextureImage(pe,_e,De){const Be=this,Le=this.json,ke=Le.textures[pe],ce=Le.images[_e],X=(ce.uri||ce.bufferView)+":"+ke.sampler;if(this.textureCache[X])return this.textureCache[X];const Y=this.loadImageSource(_e,De).then(function(be){be.flipY=!1,be.name=ke.name||ce.name||"",be.name===""&&typeof ce.uri=="string"&&ce.uri.startsWith("data:image/")===!1&&(be.name=ce.uri);const We=(Le.samplers||{})[ke.sampler]||{};return be.magFilter=we[We.magFilter]||d.LinearFilter,be.minFilter=we[We.minFilter]||d.LinearMipmapLinearFilter,be.wrapS=Ee[We.wrapS]||d.RepeatWrapping,be.wrapT=Ee[We.wrapT]||d.RepeatWrapping,Be.associations.set(be,{textures:pe}),be}).catch(function(){return null});return this.textureCache[X]=Y,Y}loadImageSource(pe,_e){const De=this,Be=this.json,Le=this.options;if(this.sourceCache[pe]!==void 0)return this.sourceCache[pe].then(Te=>Te.clone());const ke=Be.images[pe],ce=self.URL||self.webkitURL;let X=ke.uri||"",Y=!1;if(ke.bufferView!==void 0)X=De.getDependency("bufferView",ke.bufferView).then(function(Te){Y=!0;const We=new Blob([Te],{type:ke.mimeType});return X=ce.createObjectURL(We),X});else if(ke.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+pe+" is missing URI and bufferView");const be=Promise.resolve(X).then(function(Te){return new Promise(function(We,tt){let wt=We;_e.isImageBitmapLoader===!0&&(wt=function(Zt){const qt=new d.Texture(Zt);qt.needsUpdate=!0,We(qt)}),_e.load(d.LoaderUtils.resolveURL(Te,Le.path),wt,void 0,tt)})}).then(function(Te){return Y===!0&&ce.revokeObjectURL(X),Te.userData.mimeType=ke.mimeType||en(ke.uri),Te}).catch(function(Te){throw console.error("THREE.GLTFLoader: Couldn't load texture",X),Te});return this.sourceCache[pe]=be,be}assignTexture(pe,_e,De,Be){const Le=this;return this.getDependency("texture",De.index).then(function(ke){if(!ke)return null;if(De.texCoord!==void 0&&De.texCoord>0&&(ke=ke.clone(),ke.channel=De.texCoord),Le.extensions[g.KHR_TEXTURE_TRANSFORM]){const ce=De.extensions!==void 0?De.extensions[g.KHR_TEXTURE_TRANSFORM]:void 0;if(ce){const X=Le.associations.get(ke);ke=Le.extensions[g.KHR_TEXTURE_TRANSFORM].extendTexture(ke,ce),Le.associations.set(ke,X)}}return Be!==void 0&&(ke.colorSpace=Be),pe[_e]=ke,ke})}assignFinalMaterial(pe){const _e=pe.geometry;let De=pe.material;const Be=_e.attributes.tangent===void 0,Le=_e.attributes.color!==void 0,ke=_e.attributes.normal===void 0;if(pe.isPoints){const ce="PointsMaterial:"+De.uuid;let X=this.cache.get(ce);X||(X=new d.PointsMaterial,d.Material.prototype.copy.call(X,De),X.color.copy(De.color),X.map=De.map,X.sizeAttenuation=!1,this.cache.add(ce,X)),De=X}else if(pe.isLine){const ce="LineBasicMaterial:"+De.uuid;let X=this.cache.get(ce);X||(X=new d.LineBasicMaterial,d.Material.prototype.copy.call(X,De),X.color.copy(De.color),X.map=De.map,this.cache.add(ce,X)),De=X}if(Be||Le||ke){let ce="ClonedMaterial:"+De.uuid+":";Be&&(ce+="derivative-tangents:"),Le&&(ce+="vertex-colors:"),ke&&(ce+="flat-shading:");let X=this.cache.get(ce);X||(X=De.clone(),Le&&(X.vertexColors=!0),ke&&(X.flatShading=!0),Be&&(X.normalScale&&(X.normalScale.y*=-1),X.clearcoatNormalScale&&(X.clearcoatNormalScale.y*=-1)),this.cache.add(ce,X),this.associations.set(X,this.associations.get(De))),De=X}pe.material=De}getMaterialType(){return d.MeshStandardMaterial}loadMaterial(pe){const _e=this,De=this.json,Be=this.extensions,Le=De.materials[pe];let ke;const ce={},X=Le.extensions||{},Y=[];if(X[g.KHR_MATERIALS_UNLIT]){const Te=Be[g.KHR_MATERIALS_UNLIT];ke=Te.getMaterialType(),Y.push(Te.extendParams(ce,Le,_e))}else{const Te=Le.pbrMetallicRoughness||{};if(ce.color=new d.Color(1,1,1),ce.opacity=1,Array.isArray(Te.baseColorFactor)){const We=Te.baseColorFactor;ce.color.setRGB(We[0],We[1],We[2],d.LinearSRGBColorSpace),ce.opacity=We[3]}Te.baseColorTexture!==void 0&&Y.push(_e.assignTexture(ce,"map",Te.baseColorTexture,d.SRGBColorSpace)),ce.metalness=Te.metallicFactor!==void 0?Te.metallicFactor:1,ce.roughness=Te.roughnessFactor!==void 0?Te.roughnessFactor:1,Te.metallicRoughnessTexture!==void 0&&(Y.push(_e.assignTexture(ce,"metalnessMap",Te.metallicRoughnessTexture)),Y.push(_e.assignTexture(ce,"roughnessMap",Te.metallicRoughnessTexture))),ke=this._invokeOne(function(We){return We.getMaterialType&&We.getMaterialType(pe)}),Y.push(Promise.all(this._invokeAll(function(We){return We.extendMaterialParams&&We.extendMaterialParams(pe,ce)})))}Le.doubleSided===!0&&(ce.side=d.DoubleSide);const be=Le.alphaMode||ct.OPAQUE;if(be===ct.BLEND?(ce.transparent=!0,ce.depthWrite=!1):(ce.transparent=!1,be===ct.MASK&&(ce.alphaTest=Le.alphaCutoff!==void 0?Le.alphaCutoff:.5)),Le.normalTexture!==void 0&&ke!==d.MeshBasicMaterial&&(Y.push(_e.assignTexture(ce,"normalMap",Le.normalTexture)),ce.normalScale=new d.Vector2(1,1),Le.normalTexture.scale!==void 0)){const Te=Le.normalTexture.scale;ce.normalScale.set(Te,Te)}if(Le.occlusionTexture!==void 0&&ke!==d.MeshBasicMaterial&&(Y.push(_e.assignTexture(ce,"aoMap",Le.occlusionTexture)),Le.occlusionTexture.strength!==void 0&&(ce.aoMapIntensity=Le.occlusionTexture.strength)),Le.emissiveFactor!==void 0&&ke!==d.MeshBasicMaterial){const Te=Le.emissiveFactor;ce.emissive=new d.Color().setRGB(Te[0],Te[1],Te[2],d.LinearSRGBColorSpace)}return Le.emissiveTexture!==void 0&&ke!==d.MeshBasicMaterial&&Y.push(_e.assignTexture(ce,"emissiveMap",Le.emissiveTexture,d.SRGBColorSpace)),Promise.all(Y).then(function(){const Te=new ke(ce);return Le.name&&(Te.name=Le.name),It(Te,Le),_e.associations.set(Te,{materials:pe}),Le.extensions&&dt(Be,Te,Le),Te})}createUniqueName(pe){const _e=d.PropertyBinding.sanitizeNodeName(pe||"");return _e in this.nodeNamesUsed?_e+"_"+ ++this.nodeNamesUsed[_e]:(this.nodeNamesUsed[_e]=0,_e)}loadGeometries(pe){const _e=this,De=this.extensions,Be=this.primitiveCache;function Le(ce){return De[g.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(ce,_e).then(function(X){return Nt(X,ce,_e)})}const ke=[];for(let ce=0,X=pe.length;ce<X;ce++){const Y=pe[ce],be=hn(Y),Te=Be[be];if(Te)ke.push(Te.promise);else{let We;Y.extensions&&Y.extensions[g.KHR_DRACO_MESH_COMPRESSION]?We=Le(Y):We=Nt(new d.BufferGeometry,Y,_e),Be[be]={primitive:Y,promise:We},ke.push(We)}}return Promise.all(ke)}loadMesh(pe){const _e=this,De=this.json,Be=this.extensions,Le=De.meshes[pe],ke=Le.primitives,ce=[];for(let X=0,Y=ke.length;X<Y;X++){const be=ke[X].material===void 0?vt(this.cache):this.getDependency("material",ke[X].material);ce.push(be)}return ce.push(_e.loadGeometries(ke)),Promise.all(ce).then(function(X){const Y=X.slice(0,X.length-1),be=X[X.length-1],Te=[];for(let tt=0,wt=be.length;tt<wt;tt++){const Zt=be[tt],qt=ke[tt];let dn;const Qt=Y[tt];if(qt.mode===xe.TRIANGLES||qt.mode===xe.TRIANGLE_STRIP||qt.mode===xe.TRIANGLE_FAN||qt.mode===void 0)dn=Le.isSkinnedMesh===!0?new d.SkinnedMesh(Zt,Qt):new d.Mesh(Zt,Qt),dn.isSkinnedMesh===!0&&dn.normalizeSkinWeights(),qt.mode===xe.TRIANGLE_STRIP?dn.geometry=(0,A.toTrianglesDrawMode)(dn.geometry,d.TriangleStripDrawMode):qt.mode===xe.TRIANGLE_FAN&&(dn.geometry=(0,A.toTrianglesDrawMode)(dn.geometry,d.TriangleFanDrawMode));else if(qt.mode===xe.LINES)dn=new d.LineSegments(Zt,Qt);else if(qt.mode===xe.LINE_STRIP)dn=new d.Line(Zt,Qt);else if(qt.mode===xe.LINE_LOOP)dn=new d.LineLoop(Zt,Qt);else if(qt.mode===xe.POINTS)dn=new d.Points(Zt,Qt);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+qt.mode);Object.keys(dn.geometry.morphAttributes).length>0&&Lt(dn,Le),dn.name=_e.createUniqueName(Le.name||"mesh_"+pe),It(dn,Le),qt.extensions&&dt(Be,dn,qt),_e.assignFinalMaterial(dn),Te.push(dn)}for(let tt=0,wt=Te.length;tt<wt;tt++)_e.associations.set(Te[tt],{meshes:pe,primitives:tt});if(Te.length===1)return Le.extensions&&dt(Be,Te[0],Le),Te[0];const We=new d.Group;Le.extensions&&dt(Be,We,Le),_e.associations.set(We,{meshes:pe});for(let tt=0,wt=Te.length;tt<wt;tt++)We.add(Te[tt]);return We})}loadCamera(pe){let _e;const De=this.json.cameras[pe],Be=De[De.type];if(!Be){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return De.type==="perspective"?_e=new d.PerspectiveCamera(d.MathUtils.radToDeg(Be.yfov),Be.aspectRatio||1,Be.znear||1,Be.zfar||2e6):De.type==="orthographic"&&(_e=new d.OrthographicCamera(-Be.xmag,Be.xmag,Be.ymag,-Be.ymag,Be.znear,Be.zfar)),De.name&&(_e.name=this.createUniqueName(De.name)),It(_e,De),Promise.resolve(_e)}loadSkin(pe){const _e=this.json.skins[pe],De=[];for(let Be=0,Le=_e.joints.length;Be<Le;Be++)De.push(this._loadNodeShallow(_e.joints[Be]));return _e.inverseBindMatrices!==void 0?De.push(this.getDependency("accessor",_e.inverseBindMatrices)):De.push(null),Promise.all(De).then(function(Be){const Le=Be.pop(),ke=Be,ce=[],X=[];for(let Y=0,be=ke.length;Y<be;Y++){const Te=ke[Y];if(Te){ce.push(Te);const We=new d.Matrix4;Le!==null&&We.fromArray(Le.array,Y*16),X.push(We)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',_e.joints[Y])}return new d.Skeleton(ce,X)})}loadAnimation(pe){const _e=this.json,De=this,Be=_e.animations[pe],Le=Be.name?Be.name:"animation_"+pe,ke=[],ce=[],X=[],Y=[],be=[];for(let Te=0,We=Be.channels.length;Te<We;Te++){const tt=Be.channels[Te],wt=Be.samplers[tt.sampler],Zt=tt.target,qt=Zt.node,dn=Be.parameters!==void 0?Be.parameters[wt.input]:wt.input,Qt=Be.parameters!==void 0?Be.parameters[wt.output]:wt.output;Zt.node!==void 0&&(ke.push(this.getDependency("node",qt)),ce.push(this.getDependency("accessor",dn)),X.push(this.getDependency("accessor",Qt)),Y.push(wt),be.push(Zt))}return Promise.all([Promise.all(ke),Promise.all(ce),Promise.all(X),Promise.all(Y),Promise.all(be)]).then(function(Te){const We=Te[0],tt=Te[1],wt=Te[2],Zt=Te[3],qt=Te[4],dn=[];for(let Qt=0,xi=We.length;Qt<xi;Qt++){const Fn=We[Qt],Br=tt[Qt],Li=wt[Qt],qi=Zt[Qt],Fs=qt[Qt];if(Fn===void 0)continue;Fn.updateMatrix&&Fn.updateMatrix();const Hr=De._createAnimationTracks(Fn,Br,Li,qi,Fs);if(Hr)for(let wa=0;wa<Hr.length;wa++)dn.push(Hr[wa])}return new d.AnimationClip(Le,void 0,dn)})}createNodeMesh(pe){const _e=this.json,De=this,Be=_e.nodes[pe];return Be.mesh===void 0?null:De.getDependency("mesh",Be.mesh).then(function(Le){const ke=De._getNodeRef(De.meshCache,Be.mesh,Le);return Be.weights!==void 0&&ke.traverse(function(ce){if(ce.isMesh)for(let X=0,Y=Be.weights.length;X<Y;X++)ce.morphTargetInfluences[X]=Be.weights[X]}),ke})}loadNode(pe){const _e=this.json,De=this,Be=_e.nodes[pe],Le=De._loadNodeShallow(pe),ke=[],ce=Be.children||[];for(let Y=0,be=ce.length;Y<be;Y++)ke.push(De.getDependency("node",ce[Y]));const X=Be.skin===void 0?Promise.resolve(null):De.getDependency("skin",Be.skin);return Promise.all([Le,Promise.all(ke),X]).then(function(Y){const be=Y[0],Te=Y[1],We=Y[2];We!==null&&be.traverse(function(tt){tt.isSkinnedMesh&&tt.bind(We,_t)});for(let tt=0,wt=Te.length;tt<wt;tt++)be.add(Te[tt]);return be})}_loadNodeShallow(pe){const _e=this.json,De=this.extensions,Be=this;if(this.nodeCache[pe]!==void 0)return this.nodeCache[pe];const Le=_e.nodes[pe],ke=Le.name?Be.createUniqueName(Le.name):"",ce=[],X=Be._invokeOne(function(Y){return Y.createNodeMesh&&Y.createNodeMesh(pe)});return X&&ce.push(X),Le.camera!==void 0&&ce.push(Be.getDependency("camera",Le.camera).then(function(Y){return Be._getNodeRef(Be.cameraCache,Le.camera,Y)})),Be._invokeAll(function(Y){return Y.createNodeAttachment&&Y.createNodeAttachment(pe)}).forEach(function(Y){ce.push(Y)}),this.nodeCache[pe]=Promise.all(ce).then(function(Y){let be;if(Le.isBone===!0?be=new d.Bone:Y.length>1?be=new d.Group:Y.length===1?be=Y[0]:be=new d.Object3D,be!==Y[0])for(let Te=0,We=Y.length;Te<We;Te++)be.add(Y[Te]);if(Le.name&&(be.userData.name=Le.name,be.name=ke),It(be,Le),Le.extensions&&dt(De,be,Le),Le.matrix!==void 0){const Te=new d.Matrix4;Te.fromArray(Le.matrix),be.applyMatrix4(Te)}else Le.translation!==void 0&&be.position.fromArray(Le.translation),Le.rotation!==void 0&&be.quaternion.fromArray(Le.rotation),Le.scale!==void 0&&be.scale.fromArray(Le.scale);return Be.associations.has(be)||Be.associations.set(be,{}),Be.associations.get(be).nodes=pe,be}),this.nodeCache[pe]}loadScene(pe){const _e=this.extensions,De=this.json.scenes[pe],Be=this,Le=new d.Group;De.name&&(Le.name=Be.createUniqueName(De.name)),It(Le,De),De.extensions&&dt(_e,Le,De);const ke=De.nodes||[],ce=[];for(let X=0,Y=ke.length;X<Y;X++)ce.push(Be.getDependency("node",ke[X]));return Promise.all(ce).then(function(X){for(let be=0,Te=X.length;be<Te;be++)Le.add(X[be]);const Y=be=>{const Te=new Map;for(const[We,tt]of Be.associations)(We instanceof d.Material||We instanceof d.Texture)&&Te.set(We,tt);return be.traverse(We=>{const tt=Be.associations.get(We);tt!=null&&Te.set(We,tt)}),Te};return Be.associations=Y(Le),Le})}_createAnimationTracks(pe,_e,De,Be,Le){const ke=[],ce=pe.name?pe.name:pe.uuid,X=[];Ke[Le.path]===Ke.weights?pe.traverse(function(We){We.morphTargetInfluences&&X.push(We.name?We.name:We.uuid)}):X.push(ce);let Y;switch(Ke[Le.path]){case Ke.weights:Y=d.NumberKeyframeTrack;break;case Ke.rotation:Y=d.QuaternionKeyframeTrack;break;case Ke.position:case Ke.scale:Y=d.VectorKeyframeTrack;break;default:switch(De.itemSize){case 1:Y=d.NumberKeyframeTrack;break;case 2:case 3:default:Y=d.VectorKeyframeTrack;break}break}const be=Be.interpolation!==void 0?Ue[Be.interpolation]:d.InterpolateLinear,Te=this._getArrayFromAccessor(De);for(let We=0,tt=X.length;We<tt;We++){const wt=new Y(X[We]+"."+Ke[Le.path],_e.array,Te,be);Be.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(wt),ke.push(wt)}return ke}_getArrayFromAccessor(pe){let _e=pe.array;if(pe.normalized){const De=xt(_e.constructor),Be=new Float32Array(_e.length);for(let Le=0,ke=_e.length;Le<ke;Le++)Be[Le]=_e[Le]*De;_e=Be}return _e}_createCubicSplineTrackInterpolant(pe){pe.createInterpolant=function(De){const Be=this instanceof d.QuaternionKeyframeTrack?me:ge;return new Be(this.times,this.values,this.getValueSize()/3,De)},pe.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Dt(St,pe,_e){const De=pe.attributes,Be=new d.Box3;if(De.POSITION!==void 0){const ce=_e.json.accessors[De.POSITION],X=ce.min,Y=ce.max;if(X!==void 0&&Y!==void 0){if(Be.set(new d.Vector3(X[0],X[1],X[2]),new d.Vector3(Y[0],Y[1],Y[2])),ce.normalized){const be=xt(ye[ce.componentType]);Be.min.multiplyScalar(be),Be.max.multiplyScalar(be)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const Le=pe.targets;if(Le!==void 0){const ce=new d.Vector3,X=new d.Vector3;for(let Y=0,be=Le.length;Y<be;Y++){const Te=Le[Y];if(Te.POSITION!==void 0){const We=_e.json.accessors[Te.POSITION],tt=We.min,wt=We.max;if(tt!==void 0&&wt!==void 0){if(X.setX(Math.max(Math.abs(tt[0]),Math.abs(wt[0]))),X.setY(Math.max(Math.abs(tt[1]),Math.abs(wt[1]))),X.setZ(Math.max(Math.abs(tt[2]),Math.abs(wt[2]))),We.normalized){const Zt=xt(ye[We.componentType]);X.multiplyScalar(Zt)}ce.max(X)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}Be.expandByVector(ce)}St.boundingBox=Be;const ke=new d.Sphere;Be.getCenter(ke.center),ke.radius=Be.min.distanceTo(Be.max)/2,St.boundingSphere=ke}function Nt(St,pe,_e){const De=pe.attributes,Be=[];function Le(ke,ce){return _e.getDependency("accessor",ke).then(function(X){St.setAttribute(ce,X)})}for(const ke in De){const ce=Ae[ke]||ke.toLowerCase();ce in St.attributes||Be.push(Le(De[ke],ce))}if(pe.indices!==void 0&&!St.index){const ke=_e.getDependency("accessor",pe.indices).then(function(ce){St.setIndex(ce)});Be.push(ke)}return d.ColorManagement.workingColorSpace!==d.LinearSRGBColorSpace&&"COLOR_0"in De&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${d.ColorManagement.workingColorSpace}" not supported.`),It(St,pe),Dt(St,pe,_e),Promise.all(Be).then(function(){return pe.targets!==void 0?rt(St,pe.targets,_e):St})}},"./node_modules/three/examples/jsm/loaders/KTX2Loader.js":(u,m,c)=>{c.r(m),c.d(m,{KTX2Loader:()=>_});var d=c("./node_modules/three/build/three.module.js"),A=c("./node_modules/three/examples/jsm/utils/WorkerPool.js"),p=c("./node_modules/three/examples/jsm/libs/ktx-parse.module.js"),v=c("./node_modules/three/examples/jsm/libs/zstddec.module.js");const g=new WeakMap;let y=0,E;class _ extends d.Loader{constructor(B){super(B),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new A.WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(B){return this.transcoderPath=B,this}setWorkerLimit(B){return this.workerPool.setWorkerLimit(B),this}async detectSupportAsync(B){return this.workerConfig={astcSupported:await B.hasFeatureAsync("texture-compression-astc"),etc1Supported:await B.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await B.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await B.hasFeatureAsync("texture-compression-bc"),bptcSupported:await B.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await B.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(B){return B.isWebGPURenderer===!0?this.workerConfig={astcSupported:B.hasFeature("texture-compression-astc"),etc1Supported:B.hasFeature("texture-compression-etc1"),etc2Supported:B.hasFeature("texture-compression-etc2"),dxtSupported:B.hasFeature("texture-compression-bc"),bptcSupported:B.hasFeature("texture-compression-bptc"),pvrtcSupported:B.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:B.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:B.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:B.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:B.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:B.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:B.extensions.has("WEBGL_compressed_texture_pvrtc")||B.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const B=new d.FileLoader(this.manager);B.setPath(this.transcoderPath),B.setWithCredentials(this.withCredentials);const P=B.loadAsync("basis_transcoder.js"),L=new d.FileLoader(this.manager);L.setPath(this.transcoderPath),L.setResponseType("arraybuffer"),L.setWithCredentials(this.withCredentials);const N=L.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([P,N]).then(([F,z])=>{const G=_.BasisWorker.toString(),H=["/* constants */","let _EngineFormat = "+JSON.stringify(_.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(_.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(_.BasisFormat),"/* basis_transcoder.js */",F,"/* worker */",G.substring(G.indexOf("{")+1,G.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([H])),this.transcoderBinary=z,this.workerPool.setWorkerCreator(()=>{const j=new Worker(this.workerSourceURL),q=this.transcoderBinary.slice(0);return j.postMessage({type:"init",config:this.workerConfig,transcoderBinary:q},[q]),j})}),y>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),y++}return this.transcoderPending}load(B,P,L,N){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const F=new d.FileLoader(this.manager);F.setResponseType("arraybuffer"),F.setWithCredentials(this.withCredentials),F.load(B,z=>{if(g.has(z))return g.get(z).promise.then(P).catch(N);this._createTexture(z).then(G=>P?P(G):null).catch(N)},L,N)}_createTextureFrom(B,P){const{faces:L,width:N,height:F,format:z,type:G,error:H,dfdFlags:j}=B;if(G==="error")return Promise.reject(H);let q;if(P.faceCount===6)q=new d.CompressedCubeTexture(L,z,d.UnsignedByteType);else{const Q=L[0].mipmaps;q=P.layerCount>1?new d.CompressedArrayTexture(Q,N,F,P.layerCount,z,d.UnsignedByteType):new d.CompressedTexture(Q,N,F,z,d.UnsignedByteType)}return q.minFilter=L[0].mipmaps.length===1?d.LinearFilter:d.LinearMipmapLinearFilter,q.magFilter=d.LinearFilter,q.generateMipmaps=!1,q.needsUpdate=!0,q.colorSpace=T(P),q.premultiplyAlpha=!!(j&p.KHR_DF_FLAG_ALPHA_PREMULTIPLIED),q}async _createTexture(B,P={}){const L=(0,p.read)(new Uint8Array(B));if(L.vkFormat!==p.VK_FORMAT_UNDEFINED)return w(L);const N=P,F=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:B,taskConfig:N},[B])).then(z=>this._createTextureFrom(z.data,L));return g.set(B,{promise:F}),F}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),y--,this}}_.BasisFormat={ETC1S:0,UASTC_4x4:1},_.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},_.EngineFormat={RGBAFormat:d.RGBAFormat,RGBA_ASTC_4x4_Format:d.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:d.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:d.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:d.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:d.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:d.RGB_ETC1_Format,RGB_ETC2_Format:d.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:d.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:d.RGBA_S3TC_DXT1_Format},_.BasisWorker=function(){let O,B,P;const L=_EngineFormat,N=_TranscoderFormat,F=_BasisFormat;self.addEventListener("message",function(W){const J=W.data;switch(J.type){case"init":O=J.config,z(J.transcoderBinary);break;case"transcode":B.then(()=>{try{const{faces:se,buffers:ge,width:fe,height:me,hasAlpha:xe,format:ye,dfdFlags:we}=G(J.buffer);self.postMessage({type:"transcode",id:J.id,faces:se,width:fe,height:me,hasAlpha:xe,format:ye,dfdFlags:we},ge)}catch(se){console.error(se),self.postMessage({type:"error",id:J.id,error:se.message})}});break}});function z(W){B=new Promise(J=>{P={wasmBinary:W,onRuntimeInitialized:J},BASIS(P)}).then(()=>{P.initializeBasis(),P.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function G(W){const J=new P.KTX2File(new Uint8Array(W));function se(){J.close(),J.delete()}if(!J.isValid())throw se(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const ge=J.isUASTC()?F.UASTC_4x4:F.ETC1S,fe=J.getWidth(),me=J.getHeight(),xe=J.getLayers()||1,ye=J.getLevels(),we=J.getFaces(),Ee=J.getHasAlpha(),He=J.getDFDFlags(),{transcoderFormat:Ae,engineFormat:Ke}=Q(ge,fe,me,Ee);if(!fe||!me||!ye)throw se(),new Error("THREE.KTX2Loader:	Invalid texture");if(!J.startTranscoding())throw se(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Ue=[],ct=[];for(let vt=0;vt<we;vt++){const dt=[];for(let It=0;It<ye;It++){const rt=[];let Lt,hn;for(let xt=0;xt<xe;xt++){const en=J.getImageLevelInfo(It,xt,vt);vt===0&&It===0&&xt===0&&(en.origWidth%4!==0||en.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),ye>1?(Lt=en.origWidth,hn=en.origHeight):(Lt=en.width,hn=en.height);const _t=new Uint8Array(J.getImageTranscodedSizeInBytes(It,xt,0,Ae));if(!J.transcodeImage(_t,It,xt,vt,Ae,0,-1,-1))throw se(),new Error("THREE.KTX2Loader: .transcodeImage failed.");rt.push(_t)}const Et=K(rt);dt.push({data:Et,width:Lt,height:hn}),ct.push(Et.buffer)}Ue.push({mipmaps:dt,width:fe,height:me,format:Ke})}return se(),{faces:Ue,buffers:ct,width:fe,height:me,hasAlpha:Ee,format:Ke,dfdFlags:He}}const H=[{if:"astcSupported",basisFormat:[F.UASTC_4x4],transcoderFormat:[N.ASTC_4x4,N.ASTC_4x4],engineFormat:[L.RGBA_ASTC_4x4_Format,L.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[F.ETC1S,F.UASTC_4x4],transcoderFormat:[N.BC7_M5,N.BC7_M5],engineFormat:[L.RGBA_BPTC_Format,L.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[F.ETC1S,F.UASTC_4x4],transcoderFormat:[N.BC1,N.BC3],engineFormat:[L.RGBA_S3TC_DXT1_Format,L.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[F.ETC1S,F.UASTC_4x4],transcoderFormat:[N.ETC1,N.ETC2],engineFormat:[L.RGB_ETC2_Format,L.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[F.ETC1S,F.UASTC_4x4],transcoderFormat:[N.ETC1],engineFormat:[L.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[F.ETC1S,F.UASTC_4x4],transcoderFormat:[N.PVRTC1_4_RGB,N.PVRTC1_4_RGBA],engineFormat:[L.RGB_PVRTC_4BPPV1_Format,L.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],j=H.sort(function(W,J){return W.priorityETC1S-J.priorityETC1S}),q=H.sort(function(W,J){return W.priorityUASTC-J.priorityUASTC});function Q(W,J,se,ge){let fe,me;const xe=W===F.ETC1S?j:q;for(let ye=0;ye<xe.length;ye++){const we=xe[ye];if(O[we.if]&&we.basisFormat.includes(W)&&!(ge&&we.transcoderFormat.length<2)&&!(we.needsPowerOfTwo&&!(k(J)&&k(se))))return fe=we.transcoderFormat[ge?1:0],me=we.engineFormat[ge?1:0],{transcoderFormat:fe,engineFormat:me}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),fe=N.RGBA32,me=L.RGBAFormat,{transcoderFormat:fe,engineFormat:me}}function k(W){return W<=2?!0:(W&W-1)===0&&W!==0}function K(W){if(W.length===1)return W[0];let J=0;for(let fe=0;fe<W.length;fe++){const me=W[fe];J+=me.byteLength}const se=new Uint8Array(J);let ge=0;for(let fe=0;fe<W.length;fe++){const me=W[fe];se.set(me,ge),ge+=me.byteLength}return se}};const S=new Set([d.RGBAFormat,d.RGFormat,d.RedFormat]),x={[p.VK_FORMAT_R32G32B32A32_SFLOAT]:d.RGBAFormat,[p.VK_FORMAT_R16G16B16A16_SFLOAT]:d.RGBAFormat,[p.VK_FORMAT_R8G8B8A8_UNORM]:d.RGBAFormat,[p.VK_FORMAT_R8G8B8A8_SRGB]:d.RGBAFormat,[p.VK_FORMAT_R32G32_SFLOAT]:d.RGFormat,[p.VK_FORMAT_R16G16_SFLOAT]:d.RGFormat,[p.VK_FORMAT_R8G8_UNORM]:d.RGFormat,[p.VK_FORMAT_R8G8_SRGB]:d.RGFormat,[p.VK_FORMAT_R32_SFLOAT]:d.RedFormat,[p.VK_FORMAT_R16_SFLOAT]:d.RedFormat,[p.VK_FORMAT_R8_SRGB]:d.RedFormat,[p.VK_FORMAT_R8_UNORM]:d.RedFormat,[p.VK_FORMAT_ASTC_6x6_SRGB_BLOCK]:d.RGBA_ASTC_6x6_Format,[p.VK_FORMAT_ASTC_6x6_UNORM_BLOCK]:d.RGBA_ASTC_6x6_Format},C={[p.VK_FORMAT_R32G32B32A32_SFLOAT]:d.FloatType,[p.VK_FORMAT_R16G16B16A16_SFLOAT]:d.HalfFloatType,[p.VK_FORMAT_R8G8B8A8_UNORM]:d.UnsignedByteType,[p.VK_FORMAT_R8G8B8A8_SRGB]:d.UnsignedByteType,[p.VK_FORMAT_R32G32_SFLOAT]:d.FloatType,[p.VK_FORMAT_R16G16_SFLOAT]:d.HalfFloatType,[p.VK_FORMAT_R8G8_UNORM]:d.UnsignedByteType,[p.VK_FORMAT_R8G8_SRGB]:d.UnsignedByteType,[p.VK_FORMAT_R32_SFLOAT]:d.FloatType,[p.VK_FORMAT_R16_SFLOAT]:d.HalfFloatType,[p.VK_FORMAT_R8_SRGB]:d.UnsignedByteType,[p.VK_FORMAT_R8_UNORM]:d.UnsignedByteType,[p.VK_FORMAT_ASTC_6x6_SRGB_BLOCK]:d.UnsignedByteType,[p.VK_FORMAT_ASTC_6x6_UNORM_BLOCK]:d.UnsignedByteType};async function w(O){const{vkFormat:B}=O;if(x[B]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let P;O.supercompressionScheme===p.KHR_SUPERCOMPRESSION_ZSTD&&(E||(E=new Promise(async F=>{const z=new v.ZSTDDecoder;await z.init(),F(z)})),P=await E);const L=[];for(let F=0;F<O.levels.length;F++){const z=Math.max(1,O.pixelWidth>>F),G=Math.max(1,O.pixelHeight>>F),H=O.pixelDepth?Math.max(1,O.pixelDepth>>F):0,j=O.levels[F];let q;if(O.supercompressionScheme===p.KHR_SUPERCOMPRESSION_NONE)q=j.levelData;else if(O.supercompressionScheme===p.KHR_SUPERCOMPRESSION_ZSTD)q=P.decode(j.levelData,j.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let Q;C[B]===d.FloatType?Q=new Float32Array(q.buffer,q.byteOffset,q.byteLength/Float32Array.BYTES_PER_ELEMENT):C[B]===d.HalfFloatType?Q=new Uint16Array(q.buffer,q.byteOffset,q.byteLength/Uint16Array.BYTES_PER_ELEMENT):Q=q,L.push({data:Q,width:z,height:G,depth:H})}let N;if(S.has(x[B]))N=O.pixelDepth===0?new d.DataTexture(L[0].data,O.pixelWidth,O.pixelHeight):new d.Data3DTexture(L[0].data,O.pixelWidth,O.pixelHeight,O.pixelDepth);else{if(O.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");N=new d.CompressedTexture(L,O.pixelWidth,O.pixelHeight)}return N.mipmaps=L,N.type=C[B],N.format=x[B],N.colorSpace=T(O),N.needsUpdate=!0,Promise.resolve(N)}function T(O){const B=O.dataFormatDescriptor[0];return B.colorPrimaries===p.KHR_DF_PRIMARIES_BT709?B.transferFunction===p.KHR_DF_TRANSFER_SRGB?d.SRGBColorSpace:d.LinearSRGBColorSpace:B.colorPrimaries===p.KHR_DF_PRIMARIES_DISPLAYP3?B.transferFunction===p.KHR_DF_TRANSFER_SRGB?d.DisplayP3ColorSpace:d.LinearDisplayP3ColorSpace:(B.colorPrimaries===p.KHR_DF_PRIMARIES_UNSPECIFIED||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${B.colorPrimaries}"`),d.NoColorSpace)}},"./node_modules/three/examples/jsm/loaders/MTLLoader.js":(u,m,c)=>{c.r(m),c.d(m,{MTLLoader:()=>A});var d=c("./node_modules/three/build/three.module.js");class A extends d.Loader{constructor(g){super(g)}load(g,y,E,_){const S=this,x=this.path===""?d.LoaderUtils.extractUrlBase(g):this.path,C=new d.FileLoader(this.manager);C.setPath(this.path),C.setRequestHeader(this.requestHeader),C.setWithCredentials(this.withCredentials),C.load(g,function(w){try{y(S.parse(w,x))}catch(T){_?_(T):console.error(T),S.manager.itemError(g)}},E,_)}setMaterialOptions(g){return this.materialOptions=g,this}parse(g,y){const E=g.split(`
`);let _={};const S=/\s+/,x={};for(let w=0;w<E.length;w++){let T=E[w];if(T=T.trim(),T.length===0||T.charAt(0)==="#")continue;const O=T.indexOf(" ");let B=O>=0?T.substring(0,O):T;B=B.toLowerCase();let P=O>=0?T.substring(O+1):"";if(P=P.trim(),B==="newmtl")_={name:P},x[P]=_;else if(B==="ka"||B==="kd"||B==="ks"||B==="ke"){const L=P.split(S,3);_[B]=[parseFloat(L[0]),parseFloat(L[1]),parseFloat(L[2])]}else _[B]=P}const C=new p(this.resourcePath||y,this.materialOptions);return C.setCrossOrigin(this.crossOrigin),C.setManager(this.manager),C.setMaterials(x),C}}class p{constructor(g="",y={}){this.baseUrl=g,this.options=y,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:d.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:d.RepeatWrapping}setCrossOrigin(g){return this.crossOrigin=g,this}setManager(g){this.manager=g}setMaterials(g){this.materialsInfo=this.convert(g),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(g){if(!this.options)return g;const y={};for(const E in g){const _=g[E],S={};y[E]=S;for(const x in _){let C=!0,w=_[x];const T=x.toLowerCase();switch(T){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(w=[w[0]/255,w[1]/255,w[2]/255]),this.options&&this.options.ignoreZeroRGBs&&w[0]===0&&w[1]===0&&w[2]===0&&(C=!1);break}C&&(S[T]=w)}}return y}preload(){for(const g in this.materialsInfo)this.create(g)}getIndex(g){return this.nameLookup[g]}getAsArray(){let g=0;for(const y in this.materialsInfo)this.materialsArray[g]=this.create(y),this.nameLookup[y]=g,g++;return this.materialsArray}create(g){return this.materials[g]===void 0&&this.createMaterial_(g),this.materials[g]}createMaterial_(g){const y=this,E=this.materialsInfo[g],_={name:g,side:this.side};function S(C,w){return typeof w!="string"||w===""?"":/^https?:\/\//i.test(w)?w:C+w}function x(C,w){if(_[C])return;const T=y.getTextureParams(w,_),O=y.loadTexture(S(y.baseUrl,T.url));O.repeat.copy(T.scale),O.offset.copy(T.offset),O.wrapS=y.wrap,O.wrapT=y.wrap,(C==="map"||C==="emissiveMap")&&(O.colorSpace=d.SRGBColorSpace),_[C]=O}for(const C in E){const w=E[C];let T;if(w!=="")switch(C.toLowerCase()){case"kd":_.color=new d.Color().fromArray(w).convertSRGBToLinear();break;case"ks":_.specular=new d.Color().fromArray(w).convertSRGBToLinear();break;case"ke":_.emissive=new d.Color().fromArray(w).convertSRGBToLinear();break;case"map_kd":x("map",w);break;case"map_ks":x("specularMap",w);break;case"map_ke":x("emissiveMap",w);break;case"norm":x("normalMap",w);break;case"map_bump":case"bump":x("bumpMap",w);break;case"map_d":x("alphaMap",w),_.transparent=!0;break;case"ns":_.shininess=parseFloat(w);break;case"d":T=parseFloat(w),T<1&&(_.opacity=T,_.transparent=!0);break;case"tr":T=parseFloat(w),this.options&&this.options.invertTrProperty&&(T=1-T),T>0&&(_.opacity=1-T,_.transparent=!0);break}}return this.materials[g]=new d.MeshPhongMaterial(_),this.materials[g]}getTextureParams(g,y){const E={scale:new d.Vector2(1,1),offset:new d.Vector2(0,0)},_=g.split(/\s+/);let S;return S=_.indexOf("-bm"),S>=0&&(y.bumpScale=parseFloat(_[S+1]),_.splice(S,2)),S=_.indexOf("-s"),S>=0&&(E.scale.set(parseFloat(_[S+1]),parseFloat(_[S+2])),_.splice(S,4)),S=_.indexOf("-o"),S>=0&&(E.offset.set(parseFloat(_[S+1]),parseFloat(_[S+2])),_.splice(S,4)),E.url=_.join(" ").trim(),E}loadTexture(g,y,E,_,S){const x=this.manager!==void 0?this.manager:d.DefaultLoadingManager;let C=x.getHandler(g);C===null&&(C=new d.TextureLoader(x)),C.setCrossOrigin&&C.setCrossOrigin(this.crossOrigin);const w=C.load(g,E,_,S);return y!==void 0&&(w.mapping=y),w}}},"./node_modules/three/examples/jsm/loaders/OBJLoader.js":(u,m,c)=>{c.r(m),c.d(m,{OBJLoader:()=>O});var d=c("./node_modules/three/build/three.module.js");const A=/^[og]\s*(.+)?/,p=/^mtllib /,v=/^usemtl /,g=/^usemap /,y=/\s+/,E=new d.Vector3,_=new d.Vector3,S=new d.Vector3,x=new d.Vector3,C=new d.Vector3,w=new d.Color;function T(){const B={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(P,L){if(this.object&&this.object.fromDeclaration===!1){this.object.name=P,this.object.fromDeclaration=L!==!1;return}const N=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:P||"",fromDeclaration:L!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(F,z){const G=this._finalize(!1);G&&(G.inherited||G.groupCount<=0)&&this.materials.splice(G.index,1);const H={index:this.materials.length,name:F||"",mtllib:Array.isArray(z)&&z.length>0?z[z.length-1]:"",smooth:G!==void 0?G.smooth:this.smooth,groupStart:G!==void 0?G.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(j){const q={index:typeof j=="number"?j:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return q.clone=this.clone.bind(q),q}};return this.materials.push(H),H},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(F){const z=this.currentMaterial();if(z&&z.groupEnd===-1&&(z.groupEnd=this.geometry.vertices.length/3,z.groupCount=z.groupEnd-z.groupStart,z.inherited=!1),F&&this.materials.length>1)for(let G=this.materials.length-1;G>=0;G--)this.materials[G].groupCount<=0&&this.materials.splice(G,1);return F&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),z}},N&&N.name&&typeof N.clone=="function"){const F=N.clone(0);F.inherited=!0,this.object.materials.push(F)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(P,L){const N=parseInt(P,10);return(N>=0?N-1:N+L/3)*3},parseNormalIndex:function(P,L){const N=parseInt(P,10);return(N>=0?N-1:N+L/3)*3},parseUVIndex:function(P,L){const N=parseInt(P,10);return(N>=0?N-1:N+L/2)*2},addVertex:function(P,L,N){const F=this.vertices,z=this.object.geometry.vertices;z.push(F[P+0],F[P+1],F[P+2]),z.push(F[L+0],F[L+1],F[L+2]),z.push(F[N+0],F[N+1],F[N+2])},addVertexPoint:function(P){const L=this.vertices;this.object.geometry.vertices.push(L[P+0],L[P+1],L[P+2])},addVertexLine:function(P){const L=this.vertices;this.object.geometry.vertices.push(L[P+0],L[P+1],L[P+2])},addNormal:function(P,L,N){const F=this.normals,z=this.object.geometry.normals;z.push(F[P+0],F[P+1],F[P+2]),z.push(F[L+0],F[L+1],F[L+2]),z.push(F[N+0],F[N+1],F[N+2])},addFaceNormal:function(P,L,N){const F=this.vertices,z=this.object.geometry.normals;E.fromArray(F,P),_.fromArray(F,L),S.fromArray(F,N),C.subVectors(S,_),x.subVectors(E,_),C.cross(x),C.normalize(),z.push(C.x,C.y,C.z),z.push(C.x,C.y,C.z),z.push(C.x,C.y,C.z)},addColor:function(P,L,N){const F=this.colors,z=this.object.geometry.colors;F[P]!==void 0&&z.push(F[P+0],F[P+1],F[P+2]),F[L]!==void 0&&z.push(F[L+0],F[L+1],F[L+2]),F[N]!==void 0&&z.push(F[N+0],F[N+1],F[N+2])},addUV:function(P,L,N){const F=this.uvs,z=this.object.geometry.uvs;z.push(F[P+0],F[P+1]),z.push(F[L+0],F[L+1]),z.push(F[N+0],F[N+1])},addDefaultUV:function(){const P=this.object.geometry.uvs;P.push(0,0),P.push(0,0),P.push(0,0)},addUVLine:function(P){const L=this.uvs;this.object.geometry.uvs.push(L[P+0],L[P+1])},addFace:function(P,L,N,F,z,G,H,j,q){const Q=this.vertices.length;let k=this.parseVertexIndex(P,Q),K=this.parseVertexIndex(L,Q),W=this.parseVertexIndex(N,Q);if(this.addVertex(k,K,W),this.addColor(k,K,W),H!==void 0&&H!==""){const J=this.normals.length;k=this.parseNormalIndex(H,J),K=this.parseNormalIndex(j,J),W=this.parseNormalIndex(q,J),this.addNormal(k,K,W)}else this.addFaceNormal(k,K,W);if(F!==void 0&&F!==""){const J=this.uvs.length;k=this.parseUVIndex(F,J),K=this.parseUVIndex(z,J),W=this.parseUVIndex(G,J),this.addUV(k,K,W),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(P){this.object.geometry.type="Points";const L=this.vertices.length;for(let N=0,F=P.length;N<F;N++){const z=this.parseVertexIndex(P[N],L);this.addVertexPoint(z),this.addColor(z)}},addLineGeometry:function(P,L){this.object.geometry.type="Line";const N=this.vertices.length,F=this.uvs.length;for(let z=0,G=P.length;z<G;z++)this.addVertexLine(this.parseVertexIndex(P[z],N));for(let z=0,G=L.length;z<G;z++)this.addUVLine(this.parseUVIndex(L[z],F))}};return B.startObject("",!1),B}class O extends d.Loader{constructor(P){super(P),this.materials=null}load(P,L,N,F){const z=this,G=new d.FileLoader(this.manager);G.setPath(this.path),G.setRequestHeader(this.requestHeader),G.setWithCredentials(this.withCredentials),G.load(P,function(H){try{L(z.parse(H))}catch(j){F?F(j):console.error(j),z.manager.itemError(P)}},N,F)}setMaterials(P){return this.materials=P,this}parse(P){const L=new T;P.indexOf(`\r
`)!==-1&&(P=P.replace(/\r\n/g,`
`)),P.indexOf(`\\
`)!==-1&&(P=P.replace(/\\\n/g,""));const N=P.split(`
`);let F=[];for(let H=0,j=N.length;H<j;H++){const q=N[H].trimStart();if(q.length===0)continue;const Q=q.charAt(0);if(Q!=="#")if(Q==="v"){const k=q.split(y);switch(k[0]){case"v":L.vertices.push(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3])),k.length>=7?(w.setRGB(parseFloat(k[4]),parseFloat(k[5]),parseFloat(k[6])).convertSRGBToLinear(),L.colors.push(w.r,w.g,w.b)):L.colors.push(void 0,void 0,void 0);break;case"vn":L.normals.push(parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3]));break;case"vt":L.uvs.push(parseFloat(k[1]),parseFloat(k[2]));break}}else if(Q==="f"){const K=q.slice(1).trim().split(y),W=[];for(let se=0,ge=K.length;se<ge;se++){const fe=K[se];if(fe.length>0){const me=fe.split("/");W.push(me)}}const J=W[0];for(let se=1,ge=W.length-1;se<ge;se++){const fe=W[se],me=W[se+1];L.addFace(J[0],fe[0],me[0],J[1],fe[1],me[1],J[2],fe[2],me[2])}}else if(Q==="l"){const k=q.substring(1).trim().split(" ");let K=[];const W=[];if(q.indexOf("/")===-1)K=k;else for(let J=0,se=k.length;J<se;J++){const ge=k[J].split("/");ge[0]!==""&&K.push(ge[0]),ge[1]!==""&&W.push(ge[1])}L.addLineGeometry(K,W)}else if(Q==="p"){const K=q.slice(1).trim().split(" ");L.addPointGeometry(K)}else if((F=A.exec(q))!==null){const k=(" "+F[0].slice(1).trim()).slice(1);L.startObject(k)}else if(v.test(q))L.object.startMaterial(q.substring(7).trim(),L.materialLibraries);else if(p.test(q))L.materialLibraries.push(q.substring(7).trim());else if(g.test(q))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(Q==="s"){if(F=q.split(" "),F.length>1){const K=F[1].trim().toLowerCase();L.object.smooth=K!=="0"&&K!=="off"}else L.object.smooth=!0;const k=L.object.currentMaterial();k&&(k.smooth=L.object.smooth)}else{if(q==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+q+'"')}}L.finalize();const z=new d.Group;if(z.materialLibraries=[].concat(L.materialLibraries),!(L.objects.length===1&&L.objects[0].geometry.vertices.length===0)===!0)for(let H=0,j=L.objects.length;H<j;H++){const q=L.objects[H],Q=q.geometry,k=q.materials,K=Q.type==="Line",W=Q.type==="Points";let J=!1;if(Q.vertices.length===0)continue;const se=new d.BufferGeometry;se.setAttribute("position",new d.Float32BufferAttribute(Q.vertices,3)),Q.normals.length>0&&se.setAttribute("normal",new d.Float32BufferAttribute(Q.normals,3)),Q.colors.length>0&&(J=!0,se.setAttribute("color",new d.Float32BufferAttribute(Q.colors,3))),Q.hasUVIndices===!0&&se.setAttribute("uv",new d.Float32BufferAttribute(Q.uvs,2));const ge=[];for(let me=0,xe=k.length;me<xe;me++){const ye=k[me],we=ye.name+"_"+ye.smooth+"_"+J;let Ee=L.materials[we];if(this.materials!==null){if(Ee=this.materials.create(ye.name),K&&Ee&&!(Ee instanceof d.LineBasicMaterial)){const He=new d.LineBasicMaterial;d.Material.prototype.copy.call(He,Ee),He.color.copy(Ee.color),Ee=He}else if(W&&Ee&&!(Ee instanceof d.PointsMaterial)){const He=new d.PointsMaterial({size:10,sizeAttenuation:!1});d.Material.prototype.copy.call(He,Ee),He.color.copy(Ee.color),He.map=Ee.map,Ee=He}}Ee===void 0&&(K?Ee=new d.LineBasicMaterial:W?Ee=new d.PointsMaterial({size:1,sizeAttenuation:!1}):Ee=new d.MeshPhongMaterial,Ee.name=ye.name,Ee.flatShading=!ye.smooth,Ee.vertexColors=J,L.materials[we]=Ee),ge.push(Ee)}let fe;if(ge.length>1){for(let me=0,xe=k.length;me<xe;me++){const ye=k[me];se.addGroup(ye.groupStart,ye.groupCount,me)}K?fe=new d.LineSegments(se,ge):W?fe=new d.Points(se,ge):fe=new d.Mesh(se,ge)}else K?fe=new d.LineSegments(se,ge[0]):W?fe=new d.Points(se,ge[0]):fe=new d.Mesh(se,ge[0]);fe.name=q.name,z.add(fe)}else if(L.vertices.length>0){const H=new d.PointsMaterial({size:1,sizeAttenuation:!1}),j=new d.BufferGeometry;j.setAttribute("position",new d.Float32BufferAttribute(L.vertices,3)),L.colors.length>0&&L.colors[0]!==void 0&&(j.setAttribute("color",new d.Float32BufferAttribute(L.colors,3)),H.vertexColors=!0);const q=new d.Points(j,H);z.add(q)}return z}}},"./node_modules/three/examples/jsm/math/OBB.js":(u,m,c)=>{c.r(m),c.d(m,{OBB:()=>N});var d=c("./node_modules/three/build/three.module.js");const A={c:null,u:[new d.Vector3,new d.Vector3,new d.Vector3],e:[]},p={c:null,u:[new d.Vector3,new d.Vector3,new d.Vector3],e:[]},v=[[],[],[]],g=[[],[],[]],y=[],E=new d.Vector3,_=new d.Vector3,S=new d.Vector3,x=new d.Vector3,C=new d.Vector3,w=new d.Vector3,T=new d.Matrix3,O=new d.Box3,B=new d.Matrix4,P=new d.Matrix4,L=new d.Ray;class N{constructor(G=new d.Vector3,H=new d.Vector3,j=new d.Matrix3){this.center=G,this.halfSize=H,this.rotation=j}set(G,H,j){return this.center=G,this.halfSize=H,this.rotation=j,this}copy(G){return this.center.copy(G.center),this.halfSize.copy(G.halfSize),this.rotation.copy(G.rotation),this}clone(){return new this.constructor().copy(this)}getSize(G){return G.copy(this.halfSize).multiplyScalar(2)}clampPoint(G,H){const j=this.halfSize;x.subVectors(G,this.center),this.rotation.extractBasis(E,_,S),H.copy(this.center);const q=d.MathUtils.clamp(x.dot(E),-j.x,j.x);H.add(E.multiplyScalar(q));const Q=d.MathUtils.clamp(x.dot(_),-j.y,j.y);H.add(_.multiplyScalar(Q));const k=d.MathUtils.clamp(x.dot(S),-j.z,j.z);return H.add(S.multiplyScalar(k)),H}containsPoint(G){return x.subVectors(G,this.center),this.rotation.extractBasis(E,_,S),Math.abs(x.dot(E))<=this.halfSize.x&&Math.abs(x.dot(_))<=this.halfSize.y&&Math.abs(x.dot(S))<=this.halfSize.z}intersectsBox3(G){return this.intersectsOBB(F.fromBox3(G))}intersectsSphere(G){return this.clampPoint(G.center,w),w.distanceToSquared(G.center)<=G.radius*G.radius}intersectsOBB(G,H=Number.EPSILON){A.c=this.center,A.e[0]=this.halfSize.x,A.e[1]=this.halfSize.y,A.e[2]=this.halfSize.z,this.rotation.extractBasis(A.u[0],A.u[1],A.u[2]),p.c=G.center,p.e[0]=G.halfSize.x,p.e[1]=G.halfSize.y,p.e[2]=G.halfSize.z,G.rotation.extractBasis(p.u[0],p.u[1],p.u[2]);for(let Q=0;Q<3;Q++)for(let k=0;k<3;k++)v[Q][k]=A.u[Q].dot(p.u[k]);x.subVectors(p.c,A.c),y[0]=x.dot(A.u[0]),y[1]=x.dot(A.u[1]),y[2]=x.dot(A.u[2]);for(let Q=0;Q<3;Q++)for(let k=0;k<3;k++)g[Q][k]=Math.abs(v[Q][k])+H;let j,q;for(let Q=0;Q<3;Q++)if(j=A.e[Q],q=p.e[0]*g[Q][0]+p.e[1]*g[Q][1]+p.e[2]*g[Q][2],Math.abs(y[Q])>j+q)return!1;for(let Q=0;Q<3;Q++)if(j=A.e[0]*g[0][Q]+A.e[1]*g[1][Q]+A.e[2]*g[2][Q],q=p.e[Q],Math.abs(y[0]*v[0][Q]+y[1]*v[1][Q]+y[2]*v[2][Q])>j+q)return!1;return j=A.e[1]*g[2][0]+A.e[2]*g[1][0],q=p.e[1]*g[0][2]+p.e[2]*g[0][1],!(Math.abs(y[2]*v[1][0]-y[1]*v[2][0])>j+q||(j=A.e[1]*g[2][1]+A.e[2]*g[1][1],q=p.e[0]*g[0][2]+p.e[2]*g[0][0],Math.abs(y[2]*v[1][1]-y[1]*v[2][1])>j+q)||(j=A.e[1]*g[2][2]+A.e[2]*g[1][2],q=p.e[0]*g[0][1]+p.e[1]*g[0][0],Math.abs(y[2]*v[1][2]-y[1]*v[2][2])>j+q)||(j=A.e[0]*g[2][0]+A.e[2]*g[0][0],q=p.e[1]*g[1][2]+p.e[2]*g[1][1],Math.abs(y[0]*v[2][0]-y[2]*v[0][0])>j+q)||(j=A.e[0]*g[2][1]+A.e[2]*g[0][1],q=p.e[0]*g[1][2]+p.e[2]*g[1][0],Math.abs(y[0]*v[2][1]-y[2]*v[0][1])>j+q)||(j=A.e[0]*g[2][2]+A.e[2]*g[0][2],q=p.e[0]*g[1][1]+p.e[1]*g[1][0],Math.abs(y[0]*v[2][2]-y[2]*v[0][2])>j+q)||(j=A.e[0]*g[1][0]+A.e[1]*g[0][0],q=p.e[1]*g[2][2]+p.e[2]*g[2][1],Math.abs(y[1]*v[0][0]-y[0]*v[1][0])>j+q)||(j=A.e[0]*g[1][1]+A.e[1]*g[0][1],q=p.e[0]*g[2][2]+p.e[2]*g[2][0],Math.abs(y[1]*v[0][1]-y[0]*v[1][1])>j+q)||(j=A.e[0]*g[1][2]+A.e[1]*g[0][2],q=p.e[0]*g[2][1]+p.e[1]*g[2][0],Math.abs(y[1]*v[0][2]-y[0]*v[1][2])>j+q))}intersectsPlane(G){this.rotation.extractBasis(E,_,S);const H=this.halfSize.x*Math.abs(G.normal.dot(E))+this.halfSize.y*Math.abs(G.normal.dot(_))+this.halfSize.z*Math.abs(G.normal.dot(S)),j=G.normal.dot(this.center)-G.constant;return Math.abs(j)<=H}intersectRay(G,H){return this.getSize(C),O.setFromCenterAndSize(x.set(0,0,0),C),B.setFromMatrix3(this.rotation),B.setPosition(this.center),P.copy(B).invert(),L.copy(G).applyMatrix4(P),L.intersectBox(O,H)?H.applyMatrix4(B):null}intersectsRay(G){return this.intersectRay(G,x)!==null}fromBox3(G){return G.getCenter(this.center),G.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(G){return G.center.equals(this.center)&&G.halfSize.equals(this.halfSize)&&G.rotation.equals(this.rotation)}applyMatrix4(G){const H=G.elements;let j=x.set(H[0],H[1],H[2]).length();const q=x.set(H[4],H[5],H[6]).length(),Q=x.set(H[8],H[9],H[10]).length();G.determinant()<0&&(j=-j),T.setFromMatrix4(G);const K=1/j,W=1/q,J=1/Q;return T.elements[0]*=K,T.elements[1]*=K,T.elements[2]*=K,T.elements[3]*=W,T.elements[4]*=W,T.elements[5]*=W,T.elements[6]*=J,T.elements[7]*=J,T.elements[8]*=J,this.rotation.multiply(T),this.halfSize.x*=j,this.halfSize.y*=q,this.halfSize.z*=Q,x.setFromMatrixPosition(G),this.center.add(x),this}}const F=new N},"./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js":(u,m,c)=>{c.r(m),c.d(m,{computeMikkTSpaceTangents:()=>A,computeMorphedAttributes:()=>w,deepCloneAttribute:()=>g,deinterleaveAttribute:()=>E,deinterleaveGeometry:()=>_,estimateBytesUsed:()=>S,interleaveAttributes:()=>y,mergeAttributes:()=>v,mergeGeometries:()=>p,mergeGroups:()=>T,mergeVertices:()=>x,toCreasedNormals:()=>O,toTrianglesDrawMode:()=>C});var d=c("./node_modules/three/build/three.module.js");function A(B,P,L=!0){if(!P||!P.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!B.hasAttribute("position")||!B.hasAttribute("normal")||!B.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function N(G){if(G.normalized||G.isInterleavedBufferAttribute){const H=new Float32Array(G.count*G.itemSize);for(let j=0,q=0;j<G.count;j++)H[q++]=G.getX(j),H[q++]=G.getY(j),G.itemSize>2&&(H[q++]=G.getZ(j));return H}return G.array instanceof Float32Array?G.array:new Float32Array(G.array)}const F=B.index?B.toNonIndexed():B,z=P.generateTangents(N(F.attributes.position),N(F.attributes.normal),N(F.attributes.uv));if(L)for(let G=3;G<z.length;G+=4)z[G]*=-1;return F.setAttribute("tangent",new d.BufferAttribute(z,4)),B!==F&&B.copy(F),B}function p(B,P=!1){const L=B[0].index!==null,N=new Set(Object.keys(B[0].attributes)),F=new Set(Object.keys(B[0].morphAttributes)),z={},G={},H=B[0].morphTargetsRelative,j=new d.BufferGeometry;let q=0;for(let Q=0;Q<B.length;++Q){const k=B[Q];let K=0;if(L!==(k.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Q+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const W in k.attributes){if(!N.has(W))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Q+'. All geometries must have compatible attributes; make sure "'+W+'" attribute exists among all geometries, or in none of them.'),null;z[W]===void 0&&(z[W]=[]),z[W].push(k.attributes[W]),K++}if(K!==N.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Q+". Make sure all geometries have the same number of attributes."),null;if(H!==k.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Q+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const W in k.morphAttributes){if(!F.has(W))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Q+".  .morphAttributes must be consistent throughout all geometries."),null;G[W]===void 0&&(G[W]=[]),G[W].push(k.morphAttributes[W])}if(P){let W;if(L)W=k.index.count;else if(k.attributes.position!==void 0)W=k.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Q+". The geometry must have either an index or a position attribute"),null;j.addGroup(q,W,Q),q+=W}}if(L){let Q=0;const k=[];for(let K=0;K<B.length;++K){const W=B[K].index;for(let J=0;J<W.count;++J)k.push(W.getX(J)+Q);Q+=B[K].attributes.position.count}j.setIndex(k)}for(const Q in z){const k=v(z[Q]);if(!k)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+Q+" attribute."),null;j.setAttribute(Q,k)}for(const Q in G){const k=G[Q][0].length;if(k===0)break;j.morphAttributes=j.morphAttributes||{},j.morphAttributes[Q]=[];for(let K=0;K<k;++K){const W=[];for(let se=0;se<G[Q].length;++se)W.push(G[Q][se][K]);const J=v(W);if(!J)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+Q+" morphAttribute."),null;j.morphAttributes[Q].push(J)}}return j}function v(B){let P,L,N,F=-1,z=0;for(let q=0;q<B.length;++q){const Q=B[q];if(P===void 0&&(P=Q.array.constructor),P!==Q.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(L===void 0&&(L=Q.itemSize),L!==Q.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(N===void 0&&(N=Q.normalized),N!==Q.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(F===-1&&(F=Q.gpuType),F!==Q.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;z+=Q.count*L}const G=new P(z),H=new d.BufferAttribute(G,L,N);let j=0;for(let q=0;q<B.length;++q){const Q=B[q];if(Q.isInterleavedBufferAttribute){const k=j/L;for(let K=0,W=Q.count;K<W;K++)for(let J=0;J<L;J++){const se=Q.getComponent(K,J);H.setComponent(K+k,J,se)}}else G.set(Q.array,j);j+=Q.count*L}return F!==void 0&&(H.gpuType=F),H}function g(B){return B.isInstancedInterleavedBufferAttribute||B.isInterleavedBufferAttribute?E(B):B.isInstancedBufferAttribute?new d.InstancedBufferAttribute().copy(B):new d.BufferAttribute().copy(B)}function y(B){let P,L=0,N=0;for(let q=0,Q=B.length;q<Q;++q){const k=B[q];if(P===void 0&&(P=k.array.constructor),P!==k.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;L+=k.array.length,N+=k.itemSize}const F=new d.InterleavedBuffer(new P(L),N);let z=0;const G=[],H=["getX","getY","getZ","getW"],j=["setX","setY","setZ","setW"];for(let q=0,Q=B.length;q<Q;q++){const k=B[q],K=k.itemSize,W=k.count,J=new d.InterleavedBufferAttribute(F,K,z,k.normalized);G.push(J),z+=K;for(let se=0;se<W;se++)for(let ge=0;ge<K;ge++)J[j[ge]](se,k[H[ge]](se))}return G}function E(B){const P=B.data.array.constructor,L=B.count,N=B.itemSize,F=B.normalized,z=new P(L*N);let G;B.isInstancedInterleavedBufferAttribute?G=new d.InstancedBufferAttribute(z,N,F,B.meshPerAttribute):G=new d.BufferAttribute(z,N,F);for(let H=0;H<L;H++)G.setX(H,B.getX(H)),N>=2&&G.setY(H,B.getY(H)),N>=3&&G.setZ(H,B.getZ(H)),N>=4&&G.setW(H,B.getW(H));return G}function _(B){const P=B.attributes,L=B.morphTargets,N=new Map;for(const F in P){const z=P[F];z.isInterleavedBufferAttribute&&(N.has(z)||N.set(z,E(z)),P[F]=N.get(z))}for(const F in L){const z=L[F];z.isInterleavedBufferAttribute&&(N.has(z)||N.set(z,E(z)),L[F]=N.get(z))}}function S(B){let P=0;for(const N in B.attributes){const F=B.getAttribute(N);P+=F.count*F.itemSize*F.array.BYTES_PER_ELEMENT}const L=B.getIndex();return P+=L?L.count*L.itemSize*L.array.BYTES_PER_ELEMENT:0,P}function x(B,P=1e-4){P=Math.max(P,Number.EPSILON);const L={},N=B.getIndex(),F=B.getAttribute("position"),z=N?N.count:F.count;let G=0;const H=Object.keys(B.attributes),j={},q={},Q=[],k=["getX","getY","getZ","getW"],K=["setX","setY","setZ","setW"];for(let me=0,xe=H.length;me<xe;me++){const ye=H[me],we=B.attributes[ye];j[ye]=new d.BufferAttribute(new we.array.constructor(we.count*we.itemSize),we.itemSize,we.normalized);const Ee=B.morphAttributes[ye];Ee&&(q[ye]=new d.BufferAttribute(new Ee.array.constructor(Ee.count*Ee.itemSize),Ee.itemSize,Ee.normalized))}const W=P*.5,J=Math.log10(1/P),se=Math.pow(10,J),ge=W*se;for(let me=0;me<z;me++){const xe=N?N.getX(me):me;let ye="";for(let we=0,Ee=H.length;we<Ee;we++){const He=H[we],Ae=B.getAttribute(He),Ke=Ae.itemSize;for(let Ue=0;Ue<Ke;Ue++)ye+=`${~~(Ae[k[Ue]](xe)*se+ge)},`}if(ye in L)Q.push(L[ye]);else{for(let we=0,Ee=H.length;we<Ee;we++){const He=H[we],Ae=B.getAttribute(He),Ke=B.morphAttributes[He],Ue=Ae.itemSize,ct=j[He],vt=q[He];for(let dt=0;dt<Ue;dt++){const It=k[dt],rt=K[dt];if(ct[rt](G,Ae[It](xe)),Ke)for(let Lt=0,hn=Ke.length;Lt<hn;Lt++)vt[Lt][rt](G,Ke[Lt][It](xe))}}L[ye]=G,Q.push(G),G++}}const fe=B.clone();for(const me in B.attributes){const xe=j[me];if(fe.setAttribute(me,new d.BufferAttribute(xe.array.slice(0,G*xe.itemSize),xe.itemSize,xe.normalized)),me in q)for(let ye=0;ye<q[me].length;ye++){const we=q[me][ye];fe.morphAttributes[me][ye]=new d.BufferAttribute(we.array.slice(0,G*we.itemSize),we.itemSize,we.normalized)}}return fe.setIndex(Q),fe}function C(B,P){if(P===d.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),B;if(P===d.TriangleFanDrawMode||P===d.TriangleStripDrawMode){let L=B.getIndex();if(L===null){const G=[],H=B.getAttribute("position");if(H!==void 0){for(let j=0;j<H.count;j++)G.push(j);B.setIndex(G),L=B.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),B}const N=L.count-2,F=[];if(P===d.TriangleFanDrawMode)for(let G=1;G<=N;G++)F.push(L.getX(0)),F.push(L.getX(G)),F.push(L.getX(G+1));else for(let G=0;G<N;G++)G%2===0?(F.push(L.getX(G)),F.push(L.getX(G+1)),F.push(L.getX(G+2))):(F.push(L.getX(G+2)),F.push(L.getX(G+1)),F.push(L.getX(G)));F.length/3!==N&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const z=B.clone();return z.setIndex(F),z.clearGroups(),z}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",P),B}function w(B){const P=new d.Vector3,L=new d.Vector3,N=new d.Vector3,F=new d.Vector3,z=new d.Vector3,G=new d.Vector3,H=new d.Vector3,j=new d.Vector3,q=new d.Vector3;function Q(xt,en,_t,Kt,Dt,Nt,St,pe){P.fromBufferAttribute(en,Dt),L.fromBufferAttribute(en,Nt),N.fromBufferAttribute(en,St);const _e=xt.morphTargetInfluences;if(_t&&_e){H.set(0,0,0),j.set(0,0,0),q.set(0,0,0);for(let De=0,Be=_t.length;De<Be;De++){const Le=_e[De],ke=_t[De];Le!==0&&(F.fromBufferAttribute(ke,Dt),z.fromBufferAttribute(ke,Nt),G.fromBufferAttribute(ke,St),Kt?(H.addScaledVector(F,Le),j.addScaledVector(z,Le),q.addScaledVector(G,Le)):(H.addScaledVector(F.sub(P),Le),j.addScaledVector(z.sub(L),Le),q.addScaledVector(G.sub(N),Le)))}P.add(H),L.add(j),N.add(q)}xt.isSkinnedMesh&&(xt.applyBoneTransform(Dt,P),xt.applyBoneTransform(Nt,L),xt.applyBoneTransform(St,N)),pe[Dt*3+0]=P.x,pe[Dt*3+1]=P.y,pe[Dt*3+2]=P.z,pe[Nt*3+0]=L.x,pe[Nt*3+1]=L.y,pe[Nt*3+2]=L.z,pe[St*3+0]=N.x,pe[St*3+1]=N.y,pe[St*3+2]=N.z}const k=B.geometry,K=B.material;let W,J,se;const ge=k.index,fe=k.attributes.position,me=k.morphAttributes.position,xe=k.morphTargetsRelative,ye=k.attributes.normal,we=k.morphAttributes.position,Ee=k.groups,He=k.drawRange;let Ae,Ke,Ue,ct,vt,dt,It;const rt=new Float32Array(fe.count*fe.itemSize),Lt=new Float32Array(ye.count*ye.itemSize);if(ge!==null)if(Array.isArray(K))for(Ae=0,Ue=Ee.length;Ae<Ue;Ae++)for(vt=Ee[Ae],dt=Math.max(vt.start,He.start),It=Math.min(vt.start+vt.count,He.start+He.count),Ke=dt,ct=It;Ke<ct;Ke+=3)W=ge.getX(Ke),J=ge.getX(Ke+1),se=ge.getX(Ke+2),Q(B,fe,me,xe,W,J,se,rt),Q(B,ye,we,xe,W,J,se,Lt);else for(dt=Math.max(0,He.start),It=Math.min(ge.count,He.start+He.count),Ae=dt,Ue=It;Ae<Ue;Ae+=3)W=ge.getX(Ae),J=ge.getX(Ae+1),se=ge.getX(Ae+2),Q(B,fe,me,xe,W,J,se,rt),Q(B,ye,we,xe,W,J,se,Lt);else if(Array.isArray(K))for(Ae=0,Ue=Ee.length;Ae<Ue;Ae++)for(vt=Ee[Ae],dt=Math.max(vt.start,He.start),It=Math.min(vt.start+vt.count,He.start+He.count),Ke=dt,ct=It;Ke<ct;Ke+=3)W=Ke,J=Ke+1,se=Ke+2,Q(B,fe,me,xe,W,J,se,rt),Q(B,ye,we,xe,W,J,se,Lt);else for(dt=Math.max(0,He.start),It=Math.min(fe.count,He.start+He.count),Ae=dt,Ue=It;Ae<Ue;Ae+=3)W=Ae,J=Ae+1,se=Ae+2,Q(B,fe,me,xe,W,J,se,rt),Q(B,ye,we,xe,W,J,se,Lt);const hn=new d.Float32BufferAttribute(rt,3),Et=new d.Float32BufferAttribute(Lt,3);return{positionAttribute:fe,normalAttribute:ye,morphedPositionAttribute:hn,morphedNormalAttribute:Et}}function T(B){if(B.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),B;let P=B.groups;if(P=P.sort((G,H)=>G.materialIndex!==H.materialIndex?G.materialIndex-H.materialIndex:G.start-H.start),B.getIndex()===null){const G=B.getAttribute("position"),H=[];for(let j=0;j<G.count;j+=3)H.push(j,j+1,j+2);B.setIndex(H)}const L=B.getIndex(),N=[];for(let G=0;G<P.length;G++){const H=P[G],j=H.start,q=j+H.count;for(let Q=j;Q<q;Q++)N.push(L.getX(Q))}B.dispose(),B.setIndex(N);let F=0;for(let G=0;G<P.length;G++){const H=P[G];H.start=F,F+=H.count}let z=P[0];B.groups=[z];for(let G=1;G<P.length;G++){const H=P[G];z.materialIndex===H.materialIndex?z.count+=H.count:(z=H,B.groups.push(z))}return B}function O(B,P=Math.PI/3){const L=Math.cos(P),N=(1+1e-10)*100,F=[new d.Vector3,new d.Vector3,new d.Vector3],z=new d.Vector3,G=new d.Vector3,H=new d.Vector3,j=new d.Vector3;function q(se){const ge=~~(se.x*N),fe=~~(se.y*N),me=~~(se.z*N);return`${ge},${fe},${me}`}const Q=B.index?B.toNonIndexed():B,k=Q.attributes.position,K={};for(let se=0,ge=k.count/3;se<ge;se++){const fe=3*se,me=F[0].fromBufferAttribute(k,fe+0),xe=F[1].fromBufferAttribute(k,fe+1),ye=F[2].fromBufferAttribute(k,fe+2);z.subVectors(ye,xe),G.subVectors(me,xe);const we=new d.Vector3().crossVectors(z,G).normalize();for(let Ee=0;Ee<3;Ee++){const He=F[Ee],Ae=q(He);Ae in K||(K[Ae]=[]),K[Ae].push(we)}}const W=new Float32Array(k.count*3),J=new d.BufferAttribute(W,3,!1);for(let se=0,ge=k.count/3;se<ge;se++){const fe=3*se,me=F[0].fromBufferAttribute(k,fe+0),xe=F[1].fromBufferAttribute(k,fe+1),ye=F[2].fromBufferAttribute(k,fe+2);z.subVectors(ye,xe),G.subVectors(me,xe),H.crossVectors(z,G).normalize();for(let we=0;we<3;we++){const Ee=F[we],He=q(Ee),Ae=K[He];j.set(0,0,0);for(let Ke=0,Ue=Ae.length;Ke<Ue;Ke++){const ct=Ae[Ke];H.dot(ct)>L&&j.add(ct)}j.normalize(),J.setXYZ(fe+we,j.x,j.y,j.z)}}return Q.setAttribute("normal",J),Q}},"./node_modules/three/examples/jsm/utils/WorkerPool.js":(u,m,c)=>{c.r(m),c.d(m,{WorkerPool:()=>d});class d{constructor(p=4){this.pool=p,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(p){if(!this.workers[p]){const v=this.workerCreator();v.addEventListener("message",this._onMessage.bind(this,p)),this.workers[p]=v}}_getIdleWorker(){for(let p=0;p<this.pool;p++)if(!(this.workerStatus&1<<p))return p;return-1}_onMessage(p,v){const g=this.workersResolve[p];if(g&&g(v),this.queue.length){const{resolve:y,msg:E,transfer:_}=this.queue.shift();this.workersResolve[p]=y,this.workers[p].postMessage(E,_)}else this.workerStatus^=1<<p}setWorkerCreator(p){this.workerCreator=p}setWorkerLimit(p){this.pool=p}postMessage(p,v){return new Promise(g=>{const y=this._getIdleWorker();y!==-1?(this._initWorker(y),this.workerStatus|=1<<y,this.workersResolve[y]=g,this.workers[y].postMessage(p,v)):this.queue.push({resolve:g,msg:p,transfer:v})})}dispose(){this.workers.forEach(p=>p.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}},"./src/lib/three.mjs":(u,m,c)=>{c.r(m),c.d(m,{default:()=>C});var d=c("./node_modules/three/build/three.module.js"),A=c("./node_modules/three/examples/jsm/loaders/DRACOLoader.js"),p=c("./node_modules/three/examples/jsm/loaders/GLTFLoader.js"),v=c("./node_modules/three/examples/jsm/loaders/KTX2Loader.js"),g=c("./node_modules/three/examples/jsm/math/OBB.js"),y=c("./node_modules/three/examples/jsm/loaders/OBJLoader.js"),E=c("./node_modules/three/examples/jsm/loaders/MTLLoader.js"),_=c("./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js"),S=c("./node_modules/three/examples/jsm/lights/LightProbeGenerator.js"),x={...d};x.DRACOLoader=A.DRACOLoader,x.GLTFLoader=p.GLTFLoader,x.KTX2Loader=v.KTX2Loader,x.OBJLoader=y.OBJLoader,x.MTLLoader=E.MTLLoader,x.OBB=g.OBB,x.BufferGeometryUtils=_,x.LightProbeGenerator=S.LightProbeGenerator;const C=x},"./package.json":u=>{u.exports=JSON.parse('{"name":"aframe","version":"1.6.0","description":"A web framework for building virtual reality experiences.","homepage":"https://aframe.io/","main":"dist/aframe-master.js","scripts":{"dev":"cross-env INSPECTOR_VERSION=dev webpack serve --port 8080","dist":"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"webpack --config webpack.config.js","dist:min":"webpack --config webpack.prod.config.js","docs":"markserv --dir docs --port 9001","preghpages":"node ./scripts/preghpages.js","ghpages":"ghpages -p gh-pages/","lint":"standardx -v | snazzy","lint:fix":"standardx --fix","precommit":"npm run lint","prepush":"node scripts/testOnlyCheck.js","prerelease":"node scripts/release.js 1.5.0 1.6.0","start":"npm run dev","start:https":"npm run dev -- --server-type https","test":"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"node --experimental-require-module ./node_modules/mocha/bin/mocha --ui tdd tests/node"},"repository":"aframevr/aframe","license":"MIT","files":["dist/*","docs/**/*","src/**/*","vendor/**/*"],"dependencies":{"buffer":"^6.0.3","debug":"^4.3.4","deep-assign":"^2.0.0","load-bmfont":"^1.2.3","super-animejs":"^3.1.0","three":"npm:super-three@0.164.0","three-bmfont-text":"dmarcos/three-bmfont-text#eed4878795be9b3e38cf6aec6b903f56acd1f695","webvr-polyfill":"^0.10.12"},"devDependencies":{"@babel/core":"^7.17.10","babel-loader":"^8.2.5","babel-plugin-istanbul":"^6.1.1","chai":"^4.3.6","chai-shallow-deep-equal":"^1.4.0","chalk":"^1.1.3","cross-env":"^7.0.3","css-loader":"^6.7.1","eslint":"^8.45.0","eslint-config-semistandard":"^17.0.0","eslint-config-standard-jsx":"^11.0.0","ghpages":"0.0.8","git-rev":"^0.2.1","glob":"^8.0.3","husky":"^0.11.7","jsdom":"^24.0.0","jsdom-global":"^3.0.2","karma":"^6.4.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sinon-chai":"^2.0.2","karma-webpack":"^5.0.0","markserv":"github:sukima/markserv#feature/fix-broken-websoketio-link","mocha":"^10.0.0","replace-in-file":"^2.5.3","shelljs":"^0.7.7","shx":"^0.2.2","sinon":"<12.0.0","sinon-chai":"^3.7.0","snazzy":"^5.0.0","standardx":"^7.0.0","style-loader":"^3.3.1","too-wordy":"ngokevin/too-wordy","webpack":"^5.73.0","webpack-cli":"^4.10.0","webpack-dev-server":"^4.11.0","webpack-merge":"^5.8.0","write-good":"^1.0.8"},"link":true,"standardx":{"ignore":["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},"keywords":["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","quest","meta","web-components","webvr","webxr"],"engines":{"node":">= 4.6.0","npm":">= 2.15.9"}}')}},a={};function o(u){var m=a[u];if(m!==void 0)return m.exports;var c=a[u]={id:u,exports:{}};return r[u].call(c.exports,c,c.exports,o),c.exports}o.m=r,o.n=u=>{var m=u&&u.__esModule?()=>u.default:()=>u;return o.d(m,{a:m}),m},o.d=(u,m)=>{for(var c in m)o.o(m,c)&&!o.o(u,c)&&Object.defineProperty(u,c,{enumerable:!0,get:m[c]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.o=(u,m)=>Object.prototype.hasOwnProperty.call(u,m),o.r=u=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},o.b=document.baseURI||self.location.href,o.nc=void 0;var h=o("./src/index.js");return h})())})(QO);var z4=QO.exports;const Xle=Lb(z4),Kle=cG({__proto__:null,default:Xle},[z4]),Yle={},qle={};AFRAME.registerComponent("svelte",{multiple:!0,schema:{props:{default:{},parse(e){switch(typeof e){case"string":return JSON.parse(e);default:return e}},serialize(e){return JSON.stringify(e)}},component:{parse(e){return Yle[e]},serialize(e){return e.name}},gather:{parse(e){return qle[e]},serialize(e){return e.name},default:function(){return this.data.props}}},update(){this.remove(),this.data.component&&requestAnimationFrame(()=>{this.svelte=new this.data.component({target:this.el,props:this.data.gather.call(this)})})},remove(){this.svelte&&(this.svelte.$destroy(),delete this.svelte)}});function p8(e,t,i){const r=e.slice();return r[17]=t[i],r}function g8(e,t,i){const r=e.slice();return r[20]=t[i],r}function Jle(e,t,i){const r=e.slice();return r[23]=t[i],r}function Zle(e,t,i){const r=e.slice();return r[23]=t[i],r}function A8(e,t,i){const r=e.slice();return r[28]=t[i],r}function v8(e,t,i){const r=e.slice();return r[31]=t[i],r}function y8(e){let t,i,r;return{c(){t=ie("a-cylinder"),i=ue(),r=ie("a-entity"),zn(t,"position",`${l9/2} 0 ${e[31]-5}`),zn(t,"radius",.02*(e[31]/6+1)),zn(t,"height","26"),zn(t,"rotation","0 0 90"),zn(t,"color",e[7][o9-e[31]-1]),zn(r,"text","value: "+e[6][e[31]]+"; color: #666"),zn(r,"position",`2.5 0 ${e[31]-5}`),zn(r,"scale","10 10 10")},m(a,o){Rt(a,t,o),Rt(a,i,o),Rt(a,r,o)},p:yn,d(a){a&&(Bt(t),Bt(i),Bt(r))}}}function b8(e){let t,i,r;return{c(){t=ie("a-cylinder"),i=ue(),r=ie("a-entity"),zn(t,"position",`${e[28]} 0 -2.5`),zn(t,"radius",.02),zn(t,"height","5"),zn(t,"rotation","90 0 0"),zn(t,"color","#ddd"),zn(r,"text","value: "+e[28]+"; color: #666"),zn(r,"position",`${e[28]+4.5} 0 1`),zn(r,"scale","10 10 10")},m(a,o){Rt(a,t,o),Rt(a,i,o),Rt(a,r,o)},p:yn,d(a){a&&(Bt(t),Bt(i),Bt(r))}}}function ece(e){let t;return{c(){t=ie("a-sphere"),zn(t,"position",e[23]-.5+" 0 -2.5"),zn(t,"color","silver"),zn(t,"scale","0.25 0.1 0.25")},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function tce(e){let t,i,r;return{c(){t=ie("a-sphere"),i=ue(),r=ie("a-sphere"),zn(t,"position",e[23]-.5+" 0 -1.5"),zn(t,"color","silver"),zn(t,"scale","0.25 0.1 0.25"),zn(r,"position",e[23]-.5+" 0 -3.5"),zn(r,"color","silver"),zn(r,"scale","0.25 0.1 0.25")},m(a,o){Rt(a,t,o),Rt(a,i,o),Rt(a,r,o)},p:yn,d(a){a&&(Bt(t),Bt(i),Bt(r))}}}function M8(e){let t,i,r,a,o,h;return{c(){t=ie("a-cylinder"),r=ue(),a=ie("a-entity"),zn(t,"position",i=`${l9/2} ${e[5](e[20])} -6`),zn(t,"radius","0.02"),zn(t,"height","26"),zn(t,"rotation","0 0 90"),zn(t,"color","#ccc"),zn(a,"text",o="value: "+e[20].toFixed()+"s; color: #666"),zn(a,"position",h=`2.5 ${e[5](e[20])} -6 `),zn(a,"scale","10 10 10")},m(u,m){Rt(u,t,m),Rt(u,r,m),Rt(u,a,m)},p(u,m){m[0]&38&&i!==(i=`${l9/2} ${u[5](u[20])} -6`)&&zn(t,"position",i),m[0]&6&&o!==(o="value: "+u[20].toFixed()+"s; color: #666")&&zn(a,"text",o),m[0]&38&&h!==(h=`2.5 ${u[5](u[20])} -6 `)&&zn(a,"position",h)},d(u){u&&(Bt(t),Bt(r),Bt(a))}}}function _8(e){let t,i,r,a,o,h;return{c(){t=ie("a-box"),i=ie("a-entity"),a=ue(),zn(i,"text",r="value: "+e[17].note+"\\n"+e[17].fret+"; color: #666"),zn(i,"position","2.35 0 0.201"),zn(i,"scale","5 5 5"),zn(t,"position",o=`${e[17].fret-.3} ${e[5](e[17].time)} ${e[17].string-5}`),zn(t,"color",h=e[7][o9-e[17].string-1]),zn(t,"opacity","0.5"),zn(t,"width","0.4"),zn(t,"height","0.4"),zn(t,"depth","0.4")},m(u,m){Rt(u,t,m),D(t,i),D(t,a)},p(u,m){m[0]&16&&r!==(r="value: "+u[17].note+"\\n"+u[17].fret+"; color: #666")&&zn(i,"text",r),m[0]&48&&o!==(o=`${u[17].fret-.3} ${u[5](u[17].time)} ${u[17].string-5}`)&&zn(t,"position",o),m[0]&16&&h!==(h=u[7][o9-u[17].string-1])&&zn(t,"color",h)},d(u){u&&Bt(t)}}}function nce(e){let t,i,r,a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G=nn(_n(o9)),H=[];for(let me=0;me<G.length;me+=1)H[me]=y8(v8(e,G,me));let j=nn(_n(l9+1)),q=[];for(let me=0;me<j.length;me+=1)q[me]=b8(A8(e,j,me));let Q=nn([3,5,7,9,15,17,19,21]),k=[];for(let me=0;me<8;me+=1)k[me]=ece(Zle(e,Q,me));let K=nn([12,24]),W=[];for(let me=0;me<2;me+=1)W[me]=tce(Jle(e,K,me));let J=nn(_n(vC(e[2],5),e[1]+1,5)),se=[];for(let me=0;me<J.length;me+=1)se[me]=M8(g8(e,J,me));let ge=nn(e[4]),fe=[];for(let me=0;me<ge.length;me+=1)fe[me]=_8(p8(e,ge,me));return F=new kr({props:{noteOn:e[8],controlChange:e[9]}}),{c(){t=ie("main"),i=ie("a-scene"),r=ie("a-entity"),a=ue(),o=ie("a-entity"),h=ue(),u=ie("a-entity"),m=ue(),c=ie("a-entity"),d=ue(),A=ie("a-sky"),p=ue(),v=ie("a-entity"),y=ue(),E=ie("a-entity"),_=ue(),S=ie("a-entity"),C=ue(),w=ie("a-box");for(let me=0;me<H.length;me+=1)H[me].c();T=ue();for(let me=0;me<q.length;me+=1)q[me].c();O=ue();for(let me=0;me<8;me+=1)k[me].c();B=ue();for(let me=0;me<2;me+=1)W[me].c();P=ue();for(let me=0;me<se.length;me+=1)se[me].c();L=ue();for(let me=0;me<fe.length;me+=1)fe[me].c();N=ue(),gt(F.$$.fragment),zn(r,"oculus-touch-controls","hand: left"),zn(o,"oculus-touch-controls","hand: right"),zn(u,"id","leftHand"),zn(u,"hand-tracking-controls","hand: left;"),zn(c,"id","rightHand"),zn(c,"hand-tracking-controls","hand: right;"),zn(A,"color","white"),zn(v,"text",g="value: "+e[0].title+"; color: #666; width: 5"),zn(v,"position","-1.75 1.85 -1.5"),zn(v,"scale",".35 .35 .35"),zn(E,"text","value: Connect a MIDI guitar and start playing. Notes are positioned based on their string (forward), fret (right), and time (up). They are colored by string and labelled with note name and fret number.\\n\\nRandom notes are shown until you play.\\n\\nGo back in your browser to return to the main page.; color: #666; width: 5"),zn(E,"position","-2 1.5 -1.5"),zn(E,"scale",".25 .25 .25"),zn(S,"text",x="value: "+e[3]+"; color: #666; width: 5"),zn(S,"position","-2 1 -1.5"),zn(S,"scale",".25 .25 .25"),zn(w,"position","-1 .5 -1"),zn(w,"rotation","0 0 0"),zn(w,"scale",".1 .1 .1"),zn(w,"visible","true"),zn(w,"opacity","0"),de(t,"class","demo")},m(me,xe){Rt(me,t,xe),D(t,i),D(i,r),D(i,a),D(i,o),D(i,h),D(i,u),D(i,m),D(i,c),D(i,d),D(i,A),D(i,p),D(i,v),D(i,y),D(i,E),D(i,_),D(i,S),D(i,C),D(i,w);for(let ye=0;ye<H.length;ye+=1)H[ye]&&H[ye].m(w,null);D(w,T);for(let ye=0;ye<q.length;ye+=1)q[ye]&&q[ye].m(w,null);D(w,O);for(let ye=0;ye<8;ye+=1)k[ye]&&k[ye].m(w,null);D(w,B);for(let ye=0;ye<2;ye+=1)W[ye]&&W[ye].m(w,null);D(w,P);for(let ye=0;ye<se.length;ye+=1)se[ye]&&se[ye].m(w,null);D(w,L);for(let ye=0;ye<fe.length;ye+=1)fe[ye]&&fe[ye].m(w,null);D(t,N),ft(F,t,null),z=!0},p(me,xe){if((!z||xe[0]&1&&g!==(g="value: "+me[0].title+"; color: #666; width: 5"))&&zn(v,"text",g),(!z||xe[0]&8&&x!==(x="value: "+me[3]+"; color: #666; width: 5"))&&zn(S,"text",x),xe[0]&192){G=nn(_n(o9));let ye;for(ye=0;ye<G.length;ye+=1){const we=v8(me,G,ye);H[ye]?H[ye].p(we,xe):(H[ye]=y8(we),H[ye].c(),H[ye].m(w,T))}for(;ye<H.length;ye+=1)H[ye].d(1);H.length=G.length}if(xe&0){j=nn(_n(l9+1));let ye;for(ye=0;ye<j.length;ye+=1){const we=A8(me,j,ye);q[ye]?q[ye].p(we,xe):(q[ye]=b8(we),q[ye].c(),q[ye].m(w,O))}for(;ye<q.length;ye+=1)q[ye].d(1);q.length=j.length}if(xe[0]&38){J=nn(_n(vC(me[2],5),me[1]+1,5));let ye;for(ye=0;ye<J.length;ye+=1){const we=g8(me,J,ye);se[ye]?se[ye].p(we,xe):(se[ye]=M8(we),se[ye].c(),se[ye].m(w,L))}for(;ye<se.length;ye+=1)se[ye].d(1);se.length=J.length}if(xe[0]&176){ge=nn(me[4]);let ye;for(ye=0;ye<ge.length;ye+=1){const we=p8(me,ge,ye);fe[ye]?fe[ye].p(we,xe):(fe[ye]=_8(we),fe[ye].c(),fe[ye].m(w,null))}for(;ye<fe.length;ye+=1)fe[ye].d(1);fe.length=ge.length}},i(me){z||(ut(F.$$.fragment,me),z=!0)},o(me){ht(F.$$.fragment,me),z=!1},d(me){me&&Bt(t),Gn(H,me),Gn(q,me),Gn(k,me),Gn(W,me),Gn(se,me),Gn(fe,me),mt(F)}}}let o9=6,l9=24;function ice(e,t,i){let r,a,o,{demoInfo:h}=t,u=[64,59,55,50,45,40];const m=u.map(xs.fromMidiSharps),c=Jc;let d=.5,A=60,p=0,v=60,g=[];const y=C=>{const w=Math.floor(Math.random()*6),T=Math.round(Math.random()*24),O=Math.round(Math.random()*127),B=u[w]+T;return C=C??Math.round(Math.random()*60),i(1,v=C),{string:w,fret:T,time:C,note:cu[B%12],velocity:O}};let E=setInterval(()=>i(12,g=[...g,y(performance.now()/1e3)]),500),_="";const S=C=>{E&&(clearInterval(E),E=null,i(12,g=[])),g.length===0&&(p=C.timestamp);const w=(C.timestamp-p)/1e3,T=C.message.channel-1,O=C.note.number-u[T];if(O<0)return;const B={number:C.note.number,note:cu[C.note.number%12],velocity:C.rawVelocity,time:w,channel:C.message.channel,string:T,fret:O};i(12,g=[...g,B]),i(1,v=w)},x=C=>{const w=C.controller.number;w===14?i(10,d=C.value):w===15&&i(11,A=C.value*120)};return ur(()=>{console.log(Kle),z4.registerComponent("thumbstick-logging",{init(){this.el.addEventListener("thumbstickmoved",this.logThumbstick)},logThumbstick(C){C.detail.y>.95&&console.log("DOWN"),C.detail.y<-.95&&console.log("UP"),C.detail.x<-.95&&console.log("LEFT"),C.detail.x>.95&&console.log("RIGHT"),i(3,_=`x ${C.detail.x} y ${C.detail.y}`)}})}),hr(()=>{clearInterval(E)}),e.$$set=C=>{"demoInfo"in C&&i(0,h=C.demoInfo)},e.$$.update=()=>{e.$$.dirty[0]&2050&&i(2,r=v-A),e.$$.dirty[0]&3078&&i(5,a=S9().domain([v,r]).range([.5,A*d])),e.$$.dirty[0]&6146&&i(4,o=g.filter(C=>C.time>v-A))},[h,v,r,_,o,a,m,c,S,x,d,A,g]}class rce extends Ai{constructor(t){super(),gi(this,t,ice,nce,pi,{demoInfo:0},null,[-1,-1])}}function sce(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A=(e[2]?Kr:Xr)+"",p,v,g,y,E=(e[3]?Xr:Kr)+"",_,S,x,C,w=(e[4]?Xr:Kr)+"",T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se;function ge(me){e[15](me)}let fe={saveToStorage:e[10],callback:e[7]};return e[5]!==void 0&&(fe.notes=e[5]),N=new Ts({props:fe}),En.push(()=>Di(N,"notes",ge)),G=new es({props:{getExportData:e[8],demoId:e[0].id}}),j=new ts({props:{loadData:e[9]}}),Q=new ns({props:{demoId:e[0].id,loadData:e[9]}}),K=new kr({props:{noteOn:e[6]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Connect a MIDI instrument and start playing. The bar chart below shows
        how often you played each interval: when you go up in pitch, the bar of
        the played interval in the top half will increase. If you go down, it
        will show up in the bottom half. Colors denote the type of interval, so
        you can quickly see if you play, for example, more major or minor
        intervals.`,u=ue(),m=ie("div"),c=ie("button"),d=ze("unison "),p=ze(A),v=ue(),g=ie("button"),y=ze("colors "),_=ze(E),S=ue(),x=ie("button"),C=ze("semitones "),T=ze(w),O=ue(),B=ie("div"),P=ue(),L=ie("div"),gt(N.$$.fragment),z=ue(),gt(G.$$.fragment),H=ue(),gt(j.$$.fragment),q=ue(),gt(Q.$$.fragment),k=ue(),gt(K.$$.fragment),de(h,"class","explanation"),de(c,"title","Toggle filtering unison intervals"),de(g,"title","Use colors for interval types"),de(x,"title","Show number of semitones instead of musical names for intervals on the y axis"),de(m,"class","control"),de(B,"class","visualization"),de(L,"class","control"),de(t,"class","demo")},m(me,xe){Rt(me,t,xe),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,p),D(m,v),D(m,g),D(g,y),D(g,_),D(m,S),D(m,x),D(x,C),D(x,T),D(t,O),D(t,B),e[14](B),D(t,P),D(t,L),ft(N,L,null),D(L,z),ft(G,L,null),D(L,H),ft(j,L,null),D(L,q),ft(Q,L,null),D(t,k),ft(K,t,null),W=!0,J||(se=[nt(c,"click",e[11]),nt(g,"click",e[12]),nt(x,"click",e[13])],J=!0)},p(me,[xe]){(!W||xe&1)&&r!==(r=me[0].title+"")&&Ht(a,r),(!W||xe&4)&&A!==(A=(me[2]?Kr:Xr)+"")&&Ht(p,A),(!W||xe&8)&&E!==(E=(me[3]?Xr:Kr)+"")&&Ht(_,E),(!W||xe&16)&&w!==(w=(me[4]?Xr:Kr)+"")&&Ht(T,w);const ye={};!F&&xe&32&&(F=!0,ye.notes=me[5],Oi(()=>F=!1)),N.$set(ye);const we={};xe&1&&(we.demoId=me[0].id),G.$set(we);const Ee={};xe&1&&(Ee.demoId=me[0].id),Q.$set(Ee)},i(me){W||(ut(N.$$.fragment,me),ut(G.$$.fragment,me),ut(j.$$.fragment,me),ut(Q.$$.fragment,me),ut(K.$$.fragment,me),W=!0)},o(me){ht(N.$$.fragment,me),ht(G.$$.fragment,me),ht(j.$$.fragment,me),ht(Q.$$.fragment,me),ht(K.$$.fragment,me),W=!1},d(me){me&&Bt(t),e[14](null),mt(N),mt(G),mt(j),mt(Q),mt(K),J=!1,Vi(se)}}}let ace=1e3,oce=650;function lce(e,t,i){let{demoInfo:r}=t,a,o=!0,h=!1,u=!1,m=[];const c=[{semitones:0,name:"Unison",short:"P1",type:"perfect"},{semitones:1,name:"Minor 2nd",short:"m2",type:"minor"},{semitones:2,name:"Major 2nd",short:"M2",type:"major"},{semitones:3,name:"Minor 3rd",short:"m3",type:"minor"},{semitones:4,name:"Major 3rd",short:"M3",type:"major"},{semitones:5,name:"Perfect 4th",short:"P4",type:"perfect"},{semitones:6,name:"Augmented 4th",short:"A4",type:"tritone"},{semitones:7,name:"Perfect 5th",short:"P5",type:"perfect"},{semitones:8,name:"Minor 6th",short:"m6",type:"minor"},{semitones:9,name:"Major 6th",short:"M6",type:"major"},{semitones:10,name:"Minor 7th",short:"m7",type:"minor"},{semitones:11,name:"Major 7th",short:"M7",type:"major"},{semitones:12,name:"Perfect 8ve",short:"P8",type:"perfect"}],d=C=>{const w={number:C.note.number,velocity:C.rawVelocity,time:C.timestamp};m.push(w),A()},A=()=>{let C=m.map((O,B)=>B===0?0:O.number-m[B-1].number);o&&(C=C.filter(O=>O!==0)),C=C.map(O=>{if(Math.abs(O)<=12)return O;{const B=O>0?12:-12;for(;Math.abs(O)>12;)O-=B;return O}});const w=Qf(C,O=>O).map(([O,B])=>({interval:O,count:B.length})),T=lr({width:ace,height:oce,marginLeft:120,marginRight:10,color:{legend:h,domain:["minor","major","perfect","tritone"],range:["#7da2e8","#ed796a","gold","#ccc"],marginLeft:100},x:{},y:{tickFormat:u?O=>O:O=>O>=0?c[O].name:c[-O].name,domain:_n(-12,13,1),label:`🡸 going down ${" ".repeat(75)} going up 🡺     `,reverse:!0},marks:[Ss([-12,0,12],{stroke:"#888",strokeWidth:1.5}),$9(w,{x:"count",y:"interval",fill:h?O=>c[Math.abs(O.interval)].type:"#ddd",dx:.5,rx:4})]});i(1,a.textContent="",a),a.appendChild(T)};ur(A);const p=()=>({filterUnison:o,useColors:h,useSemitones:u,notes:m}),v=C=>{(m.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(m.length>0&&g(),i(2,o=C.filterUnison),i(3,h=C.useColors),i(4,u=C.useSemitones),i(5,m=C.notes),A())},g=()=>{m.length>0&&Zr(r.id,p())};hr(g);const y=()=>{i(2,o=!o),A()},E=()=>{i(3,h=!h),A()},_=()=>{i(4,u=!u),A()};function S(C){En[C?"unshift":"push"](()=>{a=C,i(1,a)})}function x(C){m=C,i(5,m)}return e.$$set=C=>{"demoInfo"in C&&i(0,r=C.demoInfo)},[r,a,o,h,u,m,d,A,p,v,g,y,E,_,S,x]}class cce extends Ai{constructor(t){super(),gi(this,t,lce,sce,pi,{demoInfo:0})}}function uce(e,t,i){const r=e.slice();return r[18]=t[i],r}function hce(e){let t;return{c(){t=ie("option"),t.textContent=`${e[18]}`,t.__value=e[18],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function dce(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H=nn(cu),j=[];for(let k=0;k<H.length;k+=1)j[k]=hce(uce(e,H,k));function q(k){e[14](k)}let Q={callback:e[9]};return e[3]!==void 0&&(Q.value=e[3]),v=new C0({props:Q}),En.push(()=>Di(v,"value",q)),w=new es({props:{getExportData:e[10],demoId:e[0].id}}),O=new ts({props:{loadData:e[11]}}),P=new ns({props:{demoId:e[0].id,loadData:e[11]}}),N=new kr({props:{noteOn:e[6],noteOff:e[7],controlChange:e[8]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Notes that you play are shown as bars. The color shows which scale
        subset a note belongs to. The bars' height encodes the notes' durations.`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`root note
            `),A=ie("select");for(let k=0;k<j.length;k+=1)j[k].c();p=ue(),gt(v.$$.fragment),y=ue(),E=ie("div"),_=ue(),S=ie("div"),x=ie("button"),x.textContent="reset",C=ue(),gt(w.$$.fragment),T=ue(),gt(O.$$.fragment),B=ue(),gt(P.$$.fragment),L=ue(),gt(N.$$.fragment),de(h,"class","explanation"),e[2]===void 0&&mr(()=>e[13].call(A)),de(m,"class","control"),de(E,"class","visualization"),de(x,"title","Clear all played notes"),de(S,"class","control"),de(t,"class","demo")},m(k,K){Rt(k,t,K),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A);for(let W=0;W<j.length;W+=1)j[W]&&j[W].m(A,null);ri(A,e[2],!0),D(m,p),ft(v,m,null),D(t,y),D(t,E),e[15](E),D(t,_),D(t,S),D(S,x),D(S,C),ft(w,S,null),D(S,T),ft(O,S,null),D(S,B),ft(P,S,null),D(t,L),ft(N,t,null),F=!0,z||(G=[nt(A,"change",e[13]),nt(A,"change",e[9]),nt(x,"click",e[16])],z=!0)},p(k,[K]){(!F||K&1)&&r!==(r=k[0].title+"")&&Ht(a,r),K&4&&ri(A,k[2]);const W={};!g&&K&8&&(g=!0,W.value=k[3],Oi(()=>g=!1)),v.$set(W);const J={};K&1&&(J.demoId=k[0].id),w.$set(J);const se={};K&1&&(se.demoId=k[0].id),P.$set(se)},i(k){F||(ut(v.$$.fragment,k),ut(w.$$.fragment,k),ut(O.$$.fragment,k),ut(P.$$.fragment,k),ut(N.$$.fragment,k),F=!0)},o(k){ht(v.$$.fragment,k),ht(w.$$.fragment,k),ht(O.$$.fragment,k),ht(P.$$.fragment,k),ht(N.$$.fragment,k),F=!1},d(k){k&&Bt(t),Gn(j,k),mt(v),e[15](null),mt(w),mt(O),mt(P),mt(N),z=!1,Vi(G)}}}let fce=1200,mce=400;function pce(e,t,i){let{demoInfo:r}=t,a,o="A",h=50,u=[],m,c=new Map;const d=w=>{u.length===0&&(m=w.timestamp);const T=(w.timestamp-m)/1e3,O={name:w.note.name,number:w.note.number,velocity:w.rawVelocity,time:T,channel:w.message.channel,duration:0};if(c.has(w.note.number)){const B=c.get(w.note.number);B.end===void 0&&(B.end=T)}u.push(O),c.set(w.note.number,O),v()},A=w=>{if(c.has(w.note.number)){const T=c.get(w.note.number),O=(w.timestamp-m)/1e3;T.end=O,T.duration=T.end-T.time}v()},p=w=>{const T=ss(w.rawValue*2,20,250);i(3,h=T),v()},v=()=>{const w=new Set($s.get(`${o} minor`).notes),T=new Set($s.get(`${o} minor blues`).notes),O=new Set($s.get(`${o} minor pentatonic`).notes),B=X9.map(N=>N===o?"#1B5E20":O.has(N)?"#689F38":T.has(N)?"cornflowerblue":w.has(N)?"#D4E157":"lightgray"),P=u.slice(-h),L=lr({width:fce,height:mce,marginLeft:80,marginBottom:50,padding:0,x:{axis:!1},y:{},color:{legend:!0,domain:_n(12),range:B,tickFormat:N=>cu[N],marginLeft:290},marks:[Ss([0],{stroke:"#ddd"}),Zh(P,{x:(N,F)=>F,y:"duration",fill:N=>N.number%12,inset:.5,rx:4,tip:!0}),Na(P,{x:(N,F)=>F,y:"duration",text:"name",fontSize:14,dy:-10})]});i(1,a.textContent="",a),a.appendChild(L)};ur(v);const g=()=>({root:o,pastNoteCount:h,notes:u}),y=w=>{(u.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(u.length>0&&E(),i(2,o=w.root),i(3,h=w.pastNoteCount),i(4,u=w.notes),v())},E=()=>{u.length>0&&Zr(r.id,g())};hr(E);function _(){o=Ir(this),i(2,o)}function S(w){h=w,i(3,h)}function x(w){En[w?"unshift":"push"](()=>{a=w,i(1,a)})}const C=()=>{confirm("Reset played notes?")&&(E(),i(4,u=[]),i(5,c=new Map),v())};return e.$$set=w=>{"demoInfo"in w&&i(0,r=w.demoInfo)},[r,a,o,h,u,c,d,A,p,v,g,y,E,_,S,x,C]}class gce extends Ai{constructor(t){super(),gi(this,t,pce,dce,pi,{demoInfo:0})}}function C8(e,t,i){const r=e.slice();return r[20]=t[i],r}function E8(e,t,i){const r=e.slice();return r[23]=t[i],r}function w8(e){let t,i=e[23]+"",r;return{c(){t=ie("option"),r=ze(i),t.__value=e[23],rn(t,t.__value)},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function x8(e){let t,i=e[20]+"",r;return{c(){t=ie("option"),r=ze(i),t.__value=e[20],rn(t,t.__value)},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function Ace(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S=(e[4]?Xr:Kr)+"",x,C,w,T,O=(e[5]?Xr:Kr)+"",B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me=nn(e[7]),xe=[];for(let Ae=0;Ae<me.length;Ae+=1)xe[Ae]=w8(E8(e,me,Ae));let ye=nn(e[8]),we=[];for(let Ae=0;Ae<ye.length;Ae+=1)we[Ae]=x8(C8(e,ye,Ae));function Ee(Ae){e[19](Ae)}let He={saveToStorage:e[13],callback:e[10]};return e[6]!==void 0&&(He.notes=e[6]),z=new Ts({props:He}),En.push(()=>Di(z,"notes",Ee)),j=new es({props:{getExportData:e[11],demoId:e[0].id}}),Q=new ts({props:{loadData:e[12]}}),K=new ns({props:{demoId:e[0].id,loadData:e[12]}}),J=new kr({props:{noteOn:e[9]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Connect a MIDI instrument and start playing. The bar chart below shows
        how often you played each scale degree.`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`scale
            `),A=ie("select");for(let Ae=0;Ae<xe.length;Ae+=1)xe[Ae].c();p=ue(),v=ie("select");for(let Ae=0;Ae<we.length;Ae+=1)we[Ae].c();g=ue(),y=ie("div"),E=ie("button"),_=ze("colors "),x=ze(S),C=ue(),w=ie("button"),T=ze("non-scale notes "),B=ze(O),P=ue(),L=ie("div"),N=ue(),F=ie("div"),gt(z.$$.fragment),H=ue(),gt(j.$$.fragment),q=ue(),gt(Q.$$.fragment),k=ue(),gt(K.$$.fragment),W=ue(),gt(J.$$.fragment),de(h,"class","explanation"),e[2]===void 0&&mr(()=>e[14].call(A)),e[3]===void 0&&mr(()=>e[15].call(v)),de(m,"class","control"),de(E,"title","Use colors for root, in-scale, outside-scale"),de(w,"title","Show notes outside the scale"),de(y,"class","control"),de(L,"class","visualization"),de(F,"class","control"),de(t,"class","demo")},m(Ae,Ke){Rt(Ae,t,Ke),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A);for(let Ue=0;Ue<xe.length;Ue+=1)xe[Ue]&&xe[Ue].m(A,null);ri(A,e[2],!0),D(c,p),D(c,v);for(let Ue=0;Ue<we.length;Ue+=1)we[Ue]&&we[Ue].m(v,null);ri(v,e[3],!0),D(t,g),D(t,y),D(y,E),D(E,_),D(E,x),D(y,C),D(y,w),D(w,T),D(w,B),D(t,P),D(t,L),e[18](L),D(t,N),D(t,F),ft(z,F,null),D(F,H),ft(j,F,null),D(F,q),ft(Q,F,null),D(F,k),ft(K,F,null),D(t,W),ft(J,t,null),se=!0,ge||(fe=[nt(A,"change",e[14]),nt(A,"change",e[10]),nt(v,"change",e[15]),nt(v,"change",e[10]),nt(E,"click",e[16]),nt(w,"click",e[17])],ge=!0)},p(Ae,[Ke]){if((!se||Ke&1)&&r!==(r=Ae[0].title+"")&&Ht(a,r),Ke&128){me=nn(Ae[7]);let dt;for(dt=0;dt<me.length;dt+=1){const It=E8(Ae,me,dt);xe[dt]?xe[dt].p(It,Ke):(xe[dt]=w8(It),xe[dt].c(),xe[dt].m(A,null))}for(;dt<xe.length;dt+=1)xe[dt].d(1);xe.length=me.length}if(Ke&132&&ri(A,Ae[2]),Ke&256){ye=nn(Ae[8]);let dt;for(dt=0;dt<ye.length;dt+=1){const It=C8(Ae,ye,dt);we[dt]?we[dt].p(It,Ke):(we[dt]=x8(It),we[dt].c(),we[dt].m(v,null))}for(;dt<we.length;dt+=1)we[dt].d(1);we.length=ye.length}Ke&264&&ri(v,Ae[3]),(!se||Ke&16)&&S!==(S=(Ae[4]?Xr:Kr)+"")&&Ht(x,S),(!se||Ke&32)&&O!==(O=(Ae[5]?Xr:Kr)+"")&&Ht(B,O);const Ue={};!G&&Ke&64&&(G=!0,Ue.notes=Ae[6],Oi(()=>G=!1)),z.$set(Ue);const ct={};Ke&1&&(ct.demoId=Ae[0].id),j.$set(ct);const vt={};Ke&1&&(vt.demoId=Ae[0].id),K.$set(vt)},i(Ae){se||(ut(z.$$.fragment,Ae),ut(j.$$.fragment,Ae),ut(Q.$$.fragment,Ae),ut(K.$$.fragment,Ae),ut(J.$$.fragment,Ae),se=!0)},o(Ae){ht(z.$$.fragment,Ae),ht(j.$$.fragment,Ae),ht(Q.$$.fragment,Ae),ht(K.$$.fragment,Ae),ht(J.$$.fragment,Ae),se=!1},d(Ae){Ae&&Bt(t),Gn(xe,Ae),Gn(we,Ae),e[18](null),mt(z),mt(j),mt(Q),mt(K),mt(J),ge=!1,Vi(fe)}}}let vce=1e3,yce=650;function bce(e,t,i){let{demoInfo:r}=t,a,o="A",h="minor pentatonic",u=!0,m=!0,c=[];const d=X9,A=$s.names(),p=O=>{const B={number:O.note.number,velocity:O.rawVelocity,time:O.timestamp};c.push(B),v()},v=()=>{if(i(1,a.textContent="",a),c.length===0)return;const O=d.indexOf(o),B=$s.get(`${o} ${h}`),P=B.notes.map((H,j)=>{const q=d.indexOf(H);let Q=q-O;return Q=Q>=0?Q:Q+12,{name:H,chroma:q,interval:B.intervals[j],degree:j,offset:Q}}),L=new Set(P.map(H=>H.offset)),F=c.map(H=>H.number%12).map(H=>{const j=H-O;return j>=0?j:j+12}),z=Qf(F,H=>H).map(([H,j])=>({value:H,count:j.length})),G=lr({width:vce,height:yce,marginLeft:70,marginRight:10,color:{legend:u,domain:["root","scale","outside scale"],range:["#666","#aaa","#eee"],marginLeft:100},y:{tickFormat:H=>d[(H+O)%12],domain:m?_n(0,12,1):[...L],reverse:!0,label:"notes, increasing semitones from root 🡺"},marks:[$9(z,{x:"count",y:"value",fill:H=>u?H.value===0?"#666":L.has(H.value)?"#aaa":"#eee":"#ddd",dx:.5,rx:4})]});a.appendChild(G)};ur(v);const g=()=>({root:o,scale:h,useColors:u,showOutsideScale:m,notes:c}),y=O=>{(c.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(c.length>0&&E(),i(2,o=O.root),i(3,h=O.scale),i(4,u=O.useColors),i(5,m=O.showOutsideScale),i(6,c=O.notes),v())},E=()=>{c.length>0&&Zr(r.id,g())};hr(E);function _(){o=Ir(this),i(2,o),i(7,d)}function S(){h=Ir(this),i(3,h),i(8,A)}const x=()=>{i(4,u=!u),v()},C=()=>{i(5,m=!m),v()};function w(O){En[O?"unshift":"push"](()=>{a=O,i(1,a)})}function T(O){c=O,i(6,c)}return e.$$set=O=>{"demoInfo"in O&&i(0,r=O.demoInfo)},[r,a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T]}class Mce extends Ai{constructor(t){super(),gi(this,t,bce,Ace,pi,{demoInfo:0})}}function S8(e,t,i){const r=e.slice();return r[22]=t[i],r}function I8(e,t,i){const r=e.slice();return r[25]=t[i],r}function T8(e){let t,i=e[25]+"",r;return{c(){t=ie("option"),r=ze(i),t.__value=e[25],rn(t,t.__value)},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function B8(e){let t,i=e[22]+"",r;return{c(){t=ie("option"),r=ze(i),t.__value=e[22],rn(t,t.__value)},m(a,o){Rt(a,t,o),D(t,r)},p:yn,d(a){a&&Bt(t)}}}function _ce(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w=(e[4]?Xr:Kr)+"",T,O,B,P,L=(e[5]?Xr:Kr)+"",N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He=nn(e[8]),Ae=[];for(let rt=0;rt<He.length;rt+=1)Ae[rt]=T8(I8(e,He,rt));let Ke=nn(e[9]),Ue=[];for(let rt=0;rt<Ke.length;rt+=1)Ue[rt]=B8(S8(e,Ke,rt));function ct(rt){e[17](rt)}let vt={callback:e[11]};e[6]!==void 0&&(vt.value=e[6]),E=new Ya({props:vt}),En.push(()=>Di(E,"value",ct)),j=new sl({props:{tempo:e[6],accent:4}});function dt(rt){e[21](rt)}let It={saveToStorage:e[14],callback:e[11]};return e[7]!==void 0&&(It.notes=e[7]),Q=new Ts({props:It}),En.push(()=>Di(Q,"notes",dt)),W=new es({props:{getExportData:e[12],demoId:e[0].id}}),se=new ts({props:{loadData:e[13]}}),fe=new ns({props:{demoId:e[0].id,loadData:e[13]}}),xe=new kr({props:{noteOn:e[10]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Connect a MIDI instrument and start playing. The bar chart below shows
        how often you played each scale degree.`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`scale
            `),A=ie("select");for(let rt=0;rt<Ae.length;rt+=1)Ae[rt].c();p=ue(),v=ie("select");for(let rt=0;rt<Ue.length;rt+=1)Ue[rt].c();g=ue(),y=ie("div"),gt(E.$$.fragment),S=ue(),x=ie("button"),C=ze("colors "),T=ze(w),O=ue(),B=ie("button"),P=ze("non-scale notes "),N=ze(L),F=ue(),z=ie("div"),G=ue(),H=ie("div"),gt(j.$$.fragment),q=ue(),gt(Q.$$.fragment),K=ue(),gt(W.$$.fragment),J=ue(),gt(se.$$.fragment),ge=ue(),gt(fe.$$.fragment),me=ue(),gt(xe.$$.fragment),de(h,"class","explanation"),e[2]===void 0&&mr(()=>e[15].call(A)),e[3]===void 0&&mr(()=>e[16].call(v)),de(m,"class","control svelte-13613lz"),de(x,"title","Use colors for root, in-scale, outside-scale"),de(B,"title","Show notes outside the scale"),de(y,"class","control svelte-13613lz"),de(z,"class","visualization svelte-13613lz"),de(H,"class","control svelte-13613lz"),de(t,"class","demo")},m(rt,Lt){Rt(rt,t,Lt),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A);for(let hn=0;hn<Ae.length;hn+=1)Ae[hn]&&Ae[hn].m(A,null);ri(A,e[2],!0),D(c,p),D(c,v);for(let hn=0;hn<Ue.length;hn+=1)Ue[hn]&&Ue[hn].m(v,null);ri(v,e[3],!0),D(t,g),D(t,y),ft(E,y,null),D(y,S),D(y,x),D(x,C),D(x,T),D(y,O),D(y,B),D(B,P),D(B,N),D(t,F),D(t,z),e[20](z),D(t,G),D(t,H),ft(j,H,null),D(H,q),ft(Q,H,null),D(H,K),ft(W,H,null),D(H,J),ft(se,H,null),D(H,ge),ft(fe,H,null),D(t,me),ft(xe,t,null),ye=!0,we||(Ee=[nt(A,"change",e[15]),nt(A,"change",e[11]),nt(v,"change",e[16]),nt(v,"change",e[11]),nt(x,"click",e[18]),nt(B,"click",e[19])],we=!0)},p(rt,[Lt]){if((!ye||Lt&1)&&r!==(r=rt[0].title+"")&&Ht(a,r),Lt&256){He=nn(rt[8]);let Kt;for(Kt=0;Kt<He.length;Kt+=1){const Dt=I8(rt,He,Kt);Ae[Kt]?Ae[Kt].p(Dt,Lt):(Ae[Kt]=T8(Dt),Ae[Kt].c(),Ae[Kt].m(A,null))}for(;Kt<Ae.length;Kt+=1)Ae[Kt].d(1);Ae.length=He.length}if(Lt&260&&ri(A,rt[2]),Lt&512){Ke=nn(rt[9]);let Kt;for(Kt=0;Kt<Ke.length;Kt+=1){const Dt=S8(rt,Ke,Kt);Ue[Kt]?Ue[Kt].p(Dt,Lt):(Ue[Kt]=B8(Dt),Ue[Kt].c(),Ue[Kt].m(v,null))}for(;Kt<Ue.length;Kt+=1)Ue[Kt].d(1);Ue.length=Ke.length}Lt&520&&ri(v,rt[3]);const hn={};!_&&Lt&64&&(_=!0,hn.value=rt[6],Oi(()=>_=!1)),E.$set(hn),(!ye||Lt&16)&&w!==(w=(rt[4]?Xr:Kr)+"")&&Ht(T,w),(!ye||Lt&32)&&L!==(L=(rt[5]?Xr:Kr)+"")&&Ht(N,L);const Et={};Lt&64&&(Et.tempo=rt[6]),j.$set(Et);const xt={};!k&&Lt&128&&(k=!0,xt.notes=rt[7],Oi(()=>k=!1)),Q.$set(xt);const en={};Lt&1&&(en.demoId=rt[0].id),W.$set(en);const _t={};Lt&1&&(_t.demoId=rt[0].id),fe.$set(_t)},i(rt){ye||(ut(E.$$.fragment,rt),ut(j.$$.fragment,rt),ut(Q.$$.fragment,rt),ut(W.$$.fragment,rt),ut(se.$$.fragment,rt),ut(fe.$$.fragment,rt),ut(xe.$$.fragment,rt),ye=!0)},o(rt){ht(E.$$.fragment,rt),ht(j.$$.fragment,rt),ht(Q.$$.fragment,rt),ht(W.$$.fragment,rt),ht(se.$$.fragment,rt),ht(fe.$$.fragment,rt),ht(xe.$$.fragment,rt),ye=!1},d(rt){rt&&Bt(t),Gn(Ae,rt),Gn(Ue,rt),mt(E),e[20](null),mt(j),mt(Q),mt(W),mt(se),mt(fe),mt(xe),we=!1,Vi(Ee)}}}let Cce=1e3,Ece=650;function wce(e,t,i){let{demoInfo:r}=t,a,o="A",h="minor pentatonic",u=!0,m=!0,c=120,d=[];const A=X9,p=$s.names(),v=P=>{let L=0;d.length>0&&(L=P.timestamp/1e3-d[0].time);const N={number:P.note.number,velocity:P.rawVelocity,time:L};d.push(N),g()},g=()=>{if(d.length===0)return;const P=A.indexOf(o),L=$s.get(`${o} ${h}`),N=L.notes.map((k,K)=>{const W=A.indexOf(k);let J=W-P;return J=J>=0?J:J+12,{name:k,chroma:W,interval:L.intervals[K],degree:K,offset:J}}),F=new Set(N.map(k=>k.offset)),z=Es(c)*4,G=Qf(d,k=>Math.floor(k.time/z));let H=[];for(const[k,K]of G){const W=K.map(se=>{const fe=se.number%12-P;return fe>=0?fe:fe+12}),J=Qf(W,se=>se).map(([se,ge])=>({value:se,count:ge.length,barId:k}));H=H.concat(J)}const q=Math.floor(d.at(-1).time/z)-9;H=H.filter(k=>k.barId>=q);const Q=lr({width:Cce,height:Ece,marginLeft:70,marginRight:10,color:{legend:u,domain:["root","scale","outside scale"],range:["#666","#aaa","#eee"]},y:{tickFormat:k=>A[(k+P)%12],domain:m?_n(0,12,1):[...F],reverse:!0,label:"notes, increasing semitones from root 🡺"},marks:[$9(H,{x:"count",y:"value",fx:"barId",fill:k=>u?k.value===0?"#666":F.has(k.value)?"#aaa":"#eee":"#ddd",dx:.5,rx:4})]});i(1,a.textContent="",a),a.appendChild(Q)};ur(g);const y=()=>({root:o,scale:h,useColors:u,showOutsideScale:m,tempo:c,notes:d}),E=P=>{(d.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(d.length>0&&_(),i(2,o=P.root),i(3,h=P.scale),i(4,u=P.useColors),i(5,m=P.showOutsideScale),i(6,c=P.tempo),i(7,d=P.notes),g())},_=()=>{d.length>0&&Zr(r.id,y())};hr(_);function S(){o=Ir(this),i(2,o),i(8,A)}function x(){h=Ir(this),i(3,h),i(9,p)}function C(P){c=P,i(6,c)}const w=()=>{i(4,u=!u),g()},T=()=>{i(5,m=!m),g()};function O(P){En[P?"unshift":"push"](()=>{a=P,i(1,a)})}function B(P){d=P,i(7,d)}return e.$$set=P=>{"demoInfo"in P&&i(0,r=P.demoInfo)},[r,a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B]}class xce extends Ai{constructor(t){super(),gi(this,t,wce,_ce,pi,{demoInfo:0})}}function Sce(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P;function L(G){e[10](G)}let N={callback:e[6]};e[2]!==void 0&&(N.value=e[2]),c=new C0({props:N}),En.push(()=>Di(c,"value",L));function F(G){e[12](G)}let z={saveToStorage:e[9],callback:e[6]};return e[3]!==void 0&&(z.notes=e[3]),y=new Ts({props:z}),En.push(()=>Di(y,"notes",F)),S=new es({props:{getExportData:e[7],demoId:e[0].id}}),C=new ts({props:{loadData:e[8]}}),T=new ns({props:{demoId:e[0].id,loadData:e[8]}}),B=new kr({props:{noteOn:e[4],controlChange:e[5]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Connect a MIDI keyboard and start playing. The heatmap below shows how
        often you played each keyboard key.`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),p=ie("div"),v=ue(),g=ie("div"),gt(y.$$.fragment),_=ue(),gt(S.$$.fragment),x=ue(),gt(C.$$.fragment),w=ue(),gt(T.$$.fragment),O=ue(),gt(B.$$.fragment),de(h,"class","explanation"),de(m,"class","control"),de(p,"class","visualization"),de(g,"class","control"),de(t,"class","demo")},m(G,H){Rt(G,t,H),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(t,A),D(t,p),e[11](p),D(t,v),D(t,g),ft(y,g,null),D(g,_),ft(S,g,null),D(g,x),ft(C,g,null),D(g,w),ft(T,g,null),D(t,O),ft(B,t,null),P=!0},p(G,[H]){(!P||H&1)&&r!==(r=G[0].title+"")&&Ht(a,r);const j={};!d&&H&4&&(d=!0,j.value=G[2],Oi(()=>d=!1)),c.$set(j);const q={};!E&&H&8&&(E=!0,q.notes=G[3],Oi(()=>E=!1)),y.$set(q);const Q={};H&1&&(Q.demoId=G[0].id),S.$set(Q);const k={};H&1&&(k.demoId=G[0].id),T.$set(k)},i(G){P||(ut(c.$$.fragment,G),ut(y.$$.fragment,G),ut(S.$$.fragment,G),ut(C.$$.fragment,G),ut(T.$$.fragment,G),ut(B.$$.fragment,G),P=!0)},o(G){ht(c.$$.fragment,G),ht(y.$$.fragment,G),ht(S.$$.fragment,G),ht(C.$$.fragment,G),ht(T.$$.fragment,G),ht(B.$$.fragment,G),P=!1},d(G){G&&Bt(t),mt(c),e[11](null),mt(y),mt(S),mt(C),mt(T),mt(B)}}}let Ice=1200,Tce=600;const _v=21,Cv=108;function Bce(e,t,i){let{demoInfo:r}=t,a,o=500,h=[];const u=E=>{const _={number:E.note.number,velocity:E.rawVelocity,time:E.timestamp,channel:E.message.channel};h.push(_),c()},m=E=>{const _=ss(E.rawValue*2,20,250);i(2,o=_),c()},c=()=>{const E=h.slice(-o),_=Qf(E,C=>C.number),S=os(_,C=>C[1].length),x=lr({width:Ice,height:Tce,marginLeft:80,marginBottom:50,padding:0,x:{domain:_n(_v,Cv+1),tickFormat:C=>Ff(C)?"":C%12===0?`
`+xs.fromMidiSharps(C):xs.fromMidiSharps(C).slice(0,-1)},y:{interval:1},marks:[fa(lT(_v,Cv+1),{stroke:"#ddd"}),Ss([0],{stroke:"#ddd"}),Zh(_n(_v,Cv+1).filter(C=>Ff(C)),{x:C=>C,y:()=>S,fill:"#f8f8f8",inset:.5}),Zh(E,$q({y:"count"},{x:"number",fill:C=>Ff(C.number)?"#444":"#ccc",inset:.5,rx:4,tip:!0}))]});i(1,a.textContent="",a),a.appendChild(x)};ur(c);const d=()=>({pastNoteCount:o,notes:h}),A=E=>{(h.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(h.length>0&&p(),i(2,o=E.pastNoteCount),i(3,h=E.notes),c())},p=()=>{h.length>0&&Zr(r.id,d())};hr(p);function v(E){o=E,i(2,o)}function g(E){En[E?"unshift":"push"](()=>{a=E,i(1,a)})}function y(E){h=E,i(3,h)}return e.$$set=E=>{"demoInfo"in E&&i(0,r=E.demoInfo)},[r,a,o,h,u,m,c,d,A,p,v,g,y]}class Rce extends Ai{constructor(t){super(),gi(this,t,Bce,Sce,pi,{demoInfo:0})}}var HO="1.13.6",R8=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},MA=Array.prototype,W4=Object.prototype,O8=typeof Symbol<"u"?Symbol.prototype:null,Oce=MA.push,q9=MA.slice,c9=W4.toString,Dce=W4.hasOwnProperty,zO=typeof ArrayBuffer<"u",Lce=typeof DataView<"u",Pce=Array.isArray,D8=Object.keys,L8=Object.create,P8=zO&&ArrayBuffer.isView,Nce=isNaN,Fce=isFinite,WO=!{toString:null}.propertyIsEnumerable("toString"),N8=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],kce=Math.pow(2,53)-1;function qa(e,t){return t=t==null?e.length-1:+t,function(){for(var i=Math.max(arguments.length-t,0),r=Array(i),a=0;a<i;a++)r[a]=arguments[a+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(a=0;a<t;a++)o[a]=arguments[a];return o[t]=r,e.apply(this,o)}}function E0(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function Uce(e){return e===null}function jO(e){return e===void 0}function $O(e){return e===!0||e===!1||c9.call(e)==="[object Boolean]"}function Gce(e){return!!(e&&e.nodeType===1)}function Ea(e){var t="[object "+e+"]";return function(i){return c9.call(i)===t}}const j4=Ea("String"),XO=Ea("Number"),Vce=Ea("Date"),Qce=Ea("RegExp"),Hce=Ea("Error"),KO=Ea("Symbol"),YO=Ea("ArrayBuffer");var qO=Ea("Function"),zce=R8.document&&R8.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof zce!="function"&&(qO=function(e){return typeof e=="function"||!1});const Fa=qO,JO=Ea("Object");var ZO=Lce&&JO(new DataView(new ArrayBuffer(8))),$4=typeof Map<"u"&&JO(new Map),Wce=Ea("DataView");function jce(e){return e!=null&&Fa(e.getInt8)&&YO(e.buffer)}const pg=ZO?jce:Wce,w0=Pce||Ea("Array");function gu(e,t){return e!=null&&Dce.call(e,t)}var jy=Ea("Arguments");(function(){jy(arguments)||(jy=function(e){return gu(e,"callee")})})();const X4=jy;function $ce(e){return!KO(e)&&Fce(e)&&!isNaN(parseFloat(e))}function eD(e){return XO(e)&&Nce(e)}function tD(e){return function(){return e}}function nD(e){return function(t){var i=e(t);return typeof i=="number"&&i>=0&&i<=kce}}function iD(e){return function(t){return t==null?void 0:t[e]}}const gg=iD("byteLength"),Xce=nD(gg);var Kce=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Yce(e){return P8?P8(e)&&!pg(e):Xce(e)&&Kce.test(c9.call(e))}const rD=zO?Yce:tD(!1),Ja=iD("length");function qce(e){for(var t={},i=e.length,r=0;r<i;++r)t[e[r]]=!0;return{contains:function(a){return t[a]===!0},push:function(a){return t[a]=!0,e.push(a)}}}function sD(e,t){t=qce(t);var i=N8.length,r=e.constructor,a=Fa(r)&&r.prototype||W4,o="constructor";for(gu(e,o)&&!t.contains(o)&&t.push(o);i--;)o=N8[i],o in e&&e[o]!==a[o]&&!t.contains(o)&&t.push(o)}function oa(e){if(!E0(e))return[];if(D8)return D8(e);var t=[];for(var i in e)gu(e,i)&&t.push(i);return WO&&sD(e,t),t}function Jce(e){if(e==null)return!0;var t=Ja(e);return typeof t=="number"&&(w0(e)||j4(e)||X4(e))?t===0:Ja(oa(e))===0}function aD(e,t){var i=oa(t),r=i.length;if(e==null)return!r;for(var a=Object(e),o=0;o<r;o++){var h=i[o];if(t[h]!==a[h]||!(h in a))return!1}return!0}function Fr(e){if(e instanceof Fr)return e;if(!(this instanceof Fr))return new Fr(e);this._wrapped=e}Fr.VERSION=HO;Fr.prototype.value=function(){return this._wrapped};Fr.prototype.valueOf=Fr.prototype.toJSON=Fr.prototype.value;Fr.prototype.toString=function(){return String(this._wrapped)};function F8(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,gg(e))}var k8="[object DataView]";function $y(e,t,i,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var a=typeof e;return a!=="function"&&a!=="object"&&typeof t!="object"?!1:oD(e,t,i,r)}function oD(e,t,i,r){e instanceof Fr&&(e=e._wrapped),t instanceof Fr&&(t=t._wrapped);var a=c9.call(e);if(a!==c9.call(t))return!1;if(ZO&&a=="[object Object]"&&pg(e)){if(!pg(t))return!1;a=k8}switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return O8.valueOf.call(e)===O8.valueOf.call(t);case"[object ArrayBuffer]":case k8:return oD(F8(e),F8(t),i,r)}var o=a==="[object Array]";if(!o&&rD(e)){var h=gg(e);if(h!==gg(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;o=!0}if(!o){if(typeof e!="object"||typeof t!="object")return!1;var u=e.constructor,m=t.constructor;if(u!==m&&!(Fa(u)&&u instanceof u&&Fa(m)&&m instanceof m)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],r=r||[];for(var c=i.length;c--;)if(i[c]===e)return r[c]===t;if(i.push(e),r.push(t),o){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!$y(e[c],t[c],i,r))return!1}else{var d=oa(e),A;if(c=d.length,oa(t).length!==c)return!1;for(;c--;)if(A=d[c],!(gu(t,A)&&$y(e[A],t[A],i,r)))return!1}return i.pop(),r.pop(),!0}function Zce(e,t){return $y(e,t)}function J9(e){if(!E0(e))return[];var t=[];for(var i in e)t.push(i);return WO&&sD(e,t),t}function K4(e){var t=Ja(e);return function(i){if(i==null)return!1;var r=J9(i);if(Ja(r))return!1;for(var a=0;a<t;a++)if(!Fa(i[e[a]]))return!1;return e!==uD||!Fa(i[Y4])}}var Y4="forEach",lD="has",q4=["clear","delete"],cD=["get",lD,"set"],eue=q4.concat(Y4,cD),uD=q4.concat(cD),tue=["add"].concat(q4,Y4,lD);const nue=$4?K4(eue):Ea("Map"),iue=$4?K4(uD):Ea("WeakMap"),rue=$4?K4(tue):Ea("Set"),sue=Ea("WeakSet");function gd(e){for(var t=oa(e),i=t.length,r=Array(i),a=0;a<i;a++)r[a]=e[t[a]];return r}function aue(e){for(var t=oa(e),i=t.length,r=Array(i),a=0;a<i;a++)r[a]=[t[a],e[t[a]]];return r}function hD(e){for(var t={},i=oa(e),r=0,a=i.length;r<a;r++)t[e[i[r]]]=i[r];return t}function Xy(e){var t=[];for(var i in e)Fa(e[i])&&t.push(i);return t.sort()}function J4(e,t){return function(i){var r=arguments.length;if(t&&(i=Object(i)),r<2||i==null)return i;for(var a=1;a<r;a++)for(var o=arguments[a],h=e(o),u=h.length,m=0;m<u;m++){var c=h[m];(!t||i[c]===void 0)&&(i[c]=o[c])}return i}}const dD=J4(J9),Ag=J4(oa),fD=J4(J9,!0);function oue(){return function(){}}function mD(e){if(!E0(e))return{};if(L8)return L8(e);var t=oue();t.prototype=e;var i=new t;return t.prototype=null,i}function lue(e,t){var i=mD(e);return t&&Ag(i,t),i}function cue(e){return E0(e)?w0(e)?e.slice():dD({},e):e}function uue(e,t){return t(e),e}function pD(e){return w0(e)?e:[e]}Fr.toPath=pD;function Z9(e){return Fr.toPath(e)}function Z4(e,t){for(var i=t.length,r=0;r<i;r++){if(e==null)return;e=e[t[r]]}return i?e:void 0}function gD(e,t,i){var r=Z4(e,Z9(t));return jO(r)?i:r}function hue(e,t){t=Z9(t);for(var i=t.length,r=0;r<i;r++){var a=t[r];if(!gu(e,a))return!1;e=e[a]}return!!i}function e5(e){return e}function u9(e){return e=Ag({},e),function(t){return aD(t,e)}}function t5(e){return e=Z9(e),function(t){return Z4(t,e)}}function em(e,t,i){if(t===void 0)return e;switch(i??3){case 1:return function(r){return e.call(t,r)};case 3:return function(r,a,o){return e.call(t,r,a,o)};case 4:return function(r,a,o,h){return e.call(t,r,a,o,h)}}return function(){return e.apply(t,arguments)}}function AD(e,t,i){return e==null?e5:Fa(e)?em(e,t,i):E0(e)&&!w0(e)?u9(e):t5(e)}function n5(e,t){return AD(e,t,1/0)}Fr.iteratee=n5;function eo(e,t,i){return Fr.iteratee!==n5?Fr.iteratee(e,t):AD(e,t,i)}function due(e,t,i){t=eo(t,i);for(var r=oa(e),a=r.length,o={},h=0;h<a;h++){var u=r[h];o[u]=t(e[u],u,e)}return o}function vD(){}function fue(e){return e==null?vD:function(t){return gD(e,t)}}function mue(e,t,i){var r=Array(Math.max(0,e));t=em(t,i,1);for(var a=0;a<e;a++)r[a]=t(a);return r}function Ky(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const h9=Date.now||function(){return new Date().getTime()};function yD(e){var t=function(o){return e[o]},i="(?:"+oa(e).join("|")+")",r=RegExp(i),a=RegExp(i,"g");return function(o){return o=o==null?"":""+o,r.test(o)?o.replace(a,t):o}}const bD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},pue=yD(bD),gue=hD(bD),Aue=yD(gue),vue=Fr.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Ev=/(.)^/,yue={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},bue=/\\|'|\r|\n|\u2028|\u2029/g;function Mue(e){return"\\"+yue[e]}var _ue=/^\s*(\w|\$)+\s*$/;function Cue(e,t,i){!t&&i&&(t=i),t=fD({},t,Fr.templateSettings);var r=RegExp([(t.escape||Ev).source,(t.interpolate||Ev).source,(t.evaluate||Ev).source].join("|")+"|$","g"),a=0,o="__p+='";e.replace(r,function(c,d,A,p,v){return o+=e.slice(a,v).replace(bue,Mue),a=v+c.length,d?o+=`'+
((__t=(`+d+`))==null?'':_.escape(__t))+
'`:A?o+=`'+
((__t=(`+A+`))==null?'':__t)+
'`:p&&(o+=`';
`+p+`
__p+='`),c}),o+=`';
`;var h=t.variable;if(h){if(!_ue.test(h))throw new Error("variable is not a bare identifier: "+h)}else o=`with(obj||{}){
`+o+`}
`,h="obj";o=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+o+`return __p;
`;var u;try{u=new Function(h,"_",o)}catch(c){throw c.source=o,c}var m=function(c){return u.call(this,c,Fr)};return m.source="function("+h+`){
`+o+"}",m}function Eue(e,t,i){t=Z9(t);var r=t.length;if(!r)return Fa(i)?i.call(e):i;for(var a=0;a<r;a++){var o=e==null?void 0:e[t[a]];o===void 0&&(o=i,a=r),e=Fa(o)?o.call(e):o}return e}var wue=0;function xue(e){var t=++wue+"";return e?e+t:t}function Sue(e){var t=Fr(e);return t._chain=!0,t}function MD(e,t,i,r,a){if(!(r instanceof t))return e.apply(i,a);var o=mD(e.prototype),h=e.apply(o,a);return E0(h)?h:o}var Ad=qa(function(e,t){var i=Ad.placeholder,r=function(){for(var a=0,o=t.length,h=Array(o),u=0;u<o;u++)h[u]=t[u]===i?arguments[a++]:t[u];for(;a<arguments.length;)h.push(arguments[a++]);return MD(e,r,this,this,h)};return r});Ad.placeholder=Fr;const _D=qa(function(e,t,i){if(!Fa(e))throw new TypeError("Bind must be called on a function");var r=qa(function(a){return MD(e,r,t,this,i.concat(a))});return r}),vo=nD(Ja);function x0(e,t,i,r){if(r=r||[],!t&&t!==0)t=1/0;else if(t<=0)return r.concat(e);for(var a=r.length,o=0,h=Ja(e);o<h;o++){var u=e[o];if(vo(u)&&(w0(u)||X4(u)))if(t>1)x0(u,t-1,i,r),a=r.length;else for(var m=0,c=u.length;m<c;)r[a++]=u[m++];else i||(r[a++]=u)}return r}const Iue=qa(function(e,t){t=x0(t,!1,!1);var i=t.length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var r=t[i];e[r]=_D(e[r],e)}return e});function Tue(e,t){var i=function(r){var a=i.cache,o=""+(t?t.apply(this,arguments):r);return gu(a,o)||(a[o]=e.apply(this,arguments)),a[o]};return i.cache={},i}const CD=qa(function(e,t,i){return setTimeout(function(){return e.apply(null,i)},t)}),Bue=Ad(CD,Fr,1);function ED(e,t,i){var r,a,o,h,u=0;i||(i={});var m=function(){u=i.leading===!1?0:h9(),r=null,h=e.apply(a,o),r||(a=o=null)},c=function(){var d=h9();!u&&i.leading===!1&&(u=d);var A=t-(d-u);return a=this,o=arguments,A<=0||A>t?(r&&(clearTimeout(r),r=null),u=d,h=e.apply(a,o),r||(a=o=null)):!r&&i.trailing!==!1&&(r=setTimeout(m,A)),h};return c.cancel=function(){clearTimeout(r),u=0,r=a=o=null},c}function Rue(e,t,i){var r,a,o,h,u,m=function(){var d=h9()-a;t>d?r=setTimeout(m,t-d):(r=null,i||(h=e.apply(u,o)),r||(o=u=null))},c=qa(function(d){return u=this,o=d,a=h9(),r||(r=setTimeout(m,t),i&&(h=e.apply(u,o))),h});return c.cancel=function(){clearTimeout(r),r=o=u=null},c}function Oue(e,t){return Ad(t,e)}function i5(e){return function(){return!e.apply(this,arguments)}}function Due(){var e=arguments,t=e.length-1;return function(){for(var i=t,r=e[t].apply(this,arguments);i--;)r=e[i].call(this,r);return r}}function Lue(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function wD(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}}const Pue=Ad(wD,2);function xD(e,t,i){t=eo(t,i);for(var r=oa(e),a,o=0,h=r.length;o<h;o++)if(a=r[o],t(e[a],a,e))return a}function SD(e){return function(t,i,r){i=eo(i,r);for(var a=Ja(t),o=e>0?0:a-1;o>=0&&o<a;o+=e)if(i(t[o],o,t))return o;return-1}}const r5=SD(1),ID=SD(-1);function TD(e,t,i,r){i=eo(i,r,1);for(var a=i(t),o=0,h=Ja(e);o<h;){var u=Math.floor((o+h)/2);i(e[u])<a?o=u+1:h=u}return o}function BD(e,t,i){return function(r,a,o){var h=0,u=Ja(r);if(typeof o=="number")e>0?h=o>=0?o:Math.max(o+u,h):u=o>=0?Math.min(o+1,u):o+u+1;else if(i&&o&&u)return o=i(r,a),r[o]===a?o:-1;if(a!==a)return o=t(q9.call(r,h,u),eD),o>=0?o+h:-1;for(o=e>0?h:u-1;o>=0&&o<u;o+=e)if(r[o]===a)return o;return-1}}const RD=BD(1,r5,TD),Nue=BD(-1,ID);function Yy(e,t,i){var r=vo(e)?r5:xD,a=r(e,t,i);if(a!==void 0&&a!==-1)return e[a]}function Fue(e,t){return Yy(e,u9(t))}function bc(e,t,i){t=em(t,i);var r,a;if(vo(e))for(r=0,a=e.length;r<a;r++)t(e[r],r,e);else{var o=oa(e);for(r=0,a=o.length;r<a;r++)t(e[o[r]],o[r],e)}return e}function p0(e,t,i){t=eo(t,i);for(var r=!vo(e)&&oa(e),a=(r||e).length,o=Array(a),h=0;h<a;h++){var u=r?r[h]:h;o[h]=t(e[u],u,e)}return o}function OD(e){var t=function(i,r,a,o){var h=!vo(i)&&oa(i),u=(h||i).length,m=e>0?0:u-1;for(o||(a=i[h?h[m]:m],m+=e);m>=0&&m<u;m+=e){var c=h?h[m]:m;a=r(a,i[c],c,i)}return a};return function(i,r,a,o){var h=arguments.length>=3;return t(i,em(r,o,4),a,h)}}const wv=OD(1),U8=OD(-1);function sd(e,t,i){var r=[];return t=eo(t,i),bc(e,function(a,o,h){t(a,o,h)&&r.push(a)}),r}function kue(e,t,i){return sd(e,i5(eo(t)),i)}function G8(e,t,i){t=eo(t,i);for(var r=!vo(e)&&oa(e),a=(r||e).length,o=0;o<a;o++){var h=r?r[o]:o;if(!t(e[h],h,e))return!1}return!0}function V8(e,t,i){t=eo(t,i);for(var r=!vo(e)&&oa(e),a=(r||e).length,o=0;o<a;o++){var h=r?r[o]:o;if(t(e[h],h,e))return!0}return!1}function mc(e,t,i,r){return vo(e)||(e=gd(e)),(typeof i!="number"||r)&&(i=0),RD(e,t,i)>=0}const Uue=qa(function(e,t,i){var r,a;return Fa(t)?a=t:(t=Z9(t),r=t.slice(0,-1),t=t[t.length-1]),p0(e,function(o){var h=a;if(!h){if(r&&r.length&&(o=Z4(o,r)),o==null)return;h=o[t]}return h==null?h:h.apply(o,i)})});function s5(e,t){return p0(e,t5(t))}function Gue(e,t){return sd(e,u9(t))}function DD(e,t,i){var r=-1/0,a=-1/0,o,h;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=vo(e)?e:gd(e);for(var u=0,m=e.length;u<m;u++)o=e[u],o!=null&&o>r&&(r=o)}else t=eo(t,i),bc(e,function(c,d,A){h=t(c,d,A),(h>a||h===-1/0&&r===-1/0)&&(r=c,a=h)});return r}function Vue(e,t,i){var r=1/0,a=1/0,o,h;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=vo(e)?e:gd(e);for(var u=0,m=e.length;u<m;u++)o=e[u],o!=null&&o<r&&(r=o)}else t=eo(t,i),bc(e,function(c,d,A){h=t(c,d,A),(h<a||h===1/0&&r===1/0)&&(r=c,a=h)});return r}var Que=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function LD(e){return e?w0(e)?q9.call(e):j4(e)?e.match(Que):vo(e)?p0(e,e5):gd(e):[]}function PD(e,t,i){if(t==null||i)return vo(e)||(e=gd(e)),e[Ky(e.length-1)];var r=LD(e),a=Ja(r);t=Math.max(Math.min(t,a),0);for(var o=a-1,h=0;h<t;h++){var u=Ky(h,o),m=r[h];r[h]=r[u],r[u]=m}return r.slice(0,t)}function Hue(e){return PD(e,1/0)}function zue(e,t,i){var r=0;return t=eo(t,i),s5(p0(e,function(a,o,h){return{value:a,index:r++,criteria:t(a,o,h)}}).sort(function(a,o){var h=a.criteria,u=o.criteria;if(h!==u){if(h>u||h===void 0)return 1;if(h<u||u===void 0)return-1}return a.index-o.index}),"value")}function _A(e,t){return function(i,r,a){var o=t?[[],[]]:{};return r=eo(r,a),bc(i,function(h,u){var m=r(h,u,i);e(o,h,m)}),o}}const Wue=_A(function(e,t,i){gu(e,i)?e[i].push(t):e[i]=[t]}),jue=_A(function(e,t,i){e[i]=t}),$ue=_A(function(e,t,i){gu(e,i)?e[i]++:e[i]=1}),Xue=_A(function(e,t,i){e[i?0:1].push(t)},!0);function Kue(e){return e==null?0:vo(e)?e.length:oa(e).length}function Yue(e,t,i){return t in i}const ND=qa(function(e,t){var i={},r=t[0];if(e==null)return i;Fa(r)?(t.length>1&&(r=em(r,t[1])),t=J9(e)):(r=Yue,t=x0(t,!1,!1),e=Object(e));for(var a=0,o=t.length;a<o;a++){var h=t[a],u=e[h];r(u,h,e)&&(i[h]=u)}return i}),que=qa(function(e,t){var i=t[0],r;return Fa(i)?(i=i5(i),t.length>1&&(r=t[1])):(t=p0(x0(t,!1,!1),String),i=function(a,o){return!mc(t,o)}),ND(e,i,r)});function FD(e,t,i){return q9.call(e,0,Math.max(0,e.length-(t==null||i?1:t)))}function xv(e,t,i){return e==null||e.length<1?t==null||i?void 0:[]:t==null||i?e[0]:FD(e,e.length-t)}function g1(e,t,i){return q9.call(e,t==null||i?1:t)}function Jue(e,t,i){return e==null||e.length<1?t==null||i?void 0:[]:t==null||i?e[e.length-1]:g1(e,Math.max(0,e.length-t))}function Zue(e){return sd(e,Boolean)}function e0e(e,t){return x0(e,t,!1)}const kD=qa(function(e,t){return t=x0(t,!0,!0),sd(e,function(i){return!mc(t,i)})}),t0e=qa(function(e,t){return kD(e,t)});function qy(e,t,i,r){$O(t)||(r=i,i=t,t=!1),i!=null&&(i=eo(i,r));for(var a=[],o=[],h=0,u=Ja(e);h<u;h++){var m=e[h],c=i?i(m,h,e):m;t&&!i?((!h||o!==c)&&a.push(m),o=c):i?mc(o,c)||(o.push(c),a.push(m)):mc(a,m)||a.push(m)}return a}const n0e=qa(function(e){return qy(x0(e,!0,!0))});function i0e(e){for(var t=[],i=arguments.length,r=0,a=Ja(e);r<a;r++){var o=e[r];if(!mc(t,o)){var h;for(h=1;h<i&&mc(arguments[h],o);h++);h===i&&t.push(o)}}return t}function Jy(e){for(var t=e&&DD(e,Ja).length||0,i=Array(t),r=0;r<t;r++)i[r]=s5(e,r);return i}const r0e=qa(Jy);function s0e(e,t){for(var i={},r=0,a=Ja(e);r<a;r++)t?i[e[r]]=t[r]:i[e[r][0]]=e[r][1];return i}function a0e(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/i),0),a=Array(r),o=0;o<r;o++,e+=i)a[o]=e;return a}function o0e(e,t){if(t==null||t<1)return[];for(var i=[],r=0,a=e.length;r<a;)i.push(q9.call(e,r,r+=t));return i}function a5(e,t){return e._chain?Fr(t).chain():t}function UD(e){return bc(Xy(e),function(t){var i=Fr[t]=e[t];Fr.prototype[t]=function(){var r=[this._wrapped];return Oce.apply(r,arguments),a5(this,i.apply(Fr,r))}}),Fr}bc(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=MA[e];Fr.prototype[e]=function(){var i=this._wrapped;return i!=null&&(t.apply(i,arguments),(e==="shift"||e==="splice")&&i.length===0&&delete i[0]),a5(this,i)}});bc(["concat","join","slice"],function(e){var t=MA[e];Fr.prototype[e]=function(){var i=this._wrapped;return i!=null&&(i=t.apply(i,arguments)),a5(this,i)}});const l0e=Object.freeze(Object.defineProperty({__proto__:null,VERSION:HO,after:Lue,all:G8,allKeys:J9,any:V8,assign:Ag,before:wD,bind:_D,bindAll:Iue,chain:Sue,chunk:o0e,clone:cue,collect:p0,compact:Zue,compose:Due,constant:tD,contains:mc,countBy:$ue,create:lue,debounce:Rue,default:Fr,defaults:fD,defer:Bue,delay:CD,detect:Yy,difference:kD,drop:g1,each:bc,escape:pue,every:G8,extend:dD,extendOwn:Ag,filter:sd,find:Yy,findIndex:r5,findKey:xD,findLastIndex:ID,findWhere:Fue,first:xv,flatten:e0e,foldl:wv,foldr:U8,forEach:bc,functions:Xy,get:gD,groupBy:Wue,has:hue,head:xv,identity:e5,include:mc,includes:mc,indexBy:jue,indexOf:RD,initial:FD,inject:wv,intersection:i0e,invert:hD,invoke:Uue,isArguments:X4,isArray:w0,isArrayBuffer:YO,isBoolean:$O,isDataView:pg,isDate:Vce,isElement:Gce,isEmpty:Jce,isEqual:Zce,isError:Hce,isFinite:$ce,isFunction:Fa,isMap:nue,isMatch:aD,isNaN:eD,isNull:Uce,isNumber:XO,isObject:E0,isRegExp:Qce,isSet:rue,isString:j4,isSymbol:KO,isTypedArray:rD,isUndefined:jO,isWeakMap:iue,isWeakSet:sue,iteratee:n5,keys:oa,last:Jue,lastIndexOf:Nue,map:p0,mapObject:due,matcher:u9,matches:u9,max:DD,memoize:Tue,methods:Xy,min:Vue,mixin:UD,negate:i5,noop:vD,now:h9,object:s0e,omit:que,once:Pue,pairs:aue,partial:Ad,partition:Xue,pick:ND,pluck:s5,property:t5,propertyOf:fue,random:Ky,range:a0e,reduce:wv,reduceRight:U8,reject:kue,rest:g1,restArguments:qa,result:Eue,sample:PD,select:sd,shuffle:Hue,size:Kue,some:V8,sortBy:zue,sortedIndex:TD,tail:g1,take:xv,tap:uue,template:Cue,templateSettings:vue,throttle:ED,times:mue,toArray:LD,toPath:pD,transpose:Jy,unescape:Aue,union:n0e,uniq:qy,unique:qy,uniqueId:xue,unzip:Jy,values:gd,where:Gue,without:t0e,wrap:Oue,zip:r0e},Symbol.toStringTag,{value:"Module"}));var Q8=UD(l0e);Q8._=Q8;function c0e(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F;function z(H){e[11](H)}let G={saveToStorage:e[8],callback:e[5]};return e[3]!==void 0&&(G.notes=e[3]),E=new Ts({props:G}),En.push(()=>Di(E,"notes",z)),x=new es({props:{getExportData:e[6],demoId:e[0].id}}),w=new ts({props:{loadData:e[7]}}),O=new ns({props:{demoId:e[0].id,loadData:e[7]}}),P=new kr({props:{pitchBend:e[4]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Connect a MIDI device and play pitch bends or vibratos. The line chart
        below shows how far you bend up and down over time.`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`past seconds
            `),A=ie("input"),p=ue(),v=ie("div"),g=ue(),y=ie("div"),gt(E.$$.fragment),S=ue(),gt(x.$$.fragment),C=ue(),gt(w.$$.fragment),T=ue(),gt(O.$$.fragment),B=ue(),gt(P.$$.fragment),de(h,"class","explanation"),de(A,"type","number"),de(A,"min","5"),de(A,"max","60"),de(A,"step","5"),de(m,"class","control"),de(v,"class","visualization"),de(y,"class","control"),de(t,"class","demo")},m(H,j){Rt(H,t,j),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A),rn(A,e[2]),D(t,p),D(t,v),e[10](v),D(t,g),D(t,y),ft(E,y,null),D(y,S),ft(x,y,null),D(y,C),ft(w,y,null),D(y,T),ft(O,y,null),D(t,B),ft(P,t,null),L=!0,N||(F=nt(A,"input",e[9]),N=!0)},p(H,[j]){(!L||j&1)&&r!==(r=H[0].title+"")&&Ht(a,r),j&4&&$n(A.value)!==H[2]&&rn(A,H[2]);const q={};!_&&j&8&&(_=!0,q.notes=H[3],Oi(()=>_=!1)),E.$set(q);const Q={};j&1&&(Q.demoId=H[0].id),x.$set(Q);const k={};j&1&&(k.demoId=H[0].id),O.$set(k)},i(H){L||(ut(E.$$.fragment,H),ut(x.$$.fragment,H),ut(w.$$.fragment,H),ut(O.$$.fragment,H),ut(P.$$.fragment,H),L=!0)},o(H){ht(E.$$.fragment,H),ht(x.$$.fragment,H),ht(w.$$.fragment,H),ht(O.$$.fragment,H),ht(P.$$.fragment,H),L=!1},d(H){H&&Bt(t),e[10](null),mt(E),mt(x),mt(w),mt(O),mt(P),N=!1,F()}}}let u0e=1200,h0e=700;function d0e(e,t,i){let{demoInfo:r}=t,a,o=10,h=0,u=[];const m=_=>{u.length===0&&(h=_.timestamp);const S=(_.timestamp-h)/1e3,x={value:_.value,time:S};u.push(x),d()},c=()=>{const _=(performance.now()-h)/1e3,S=_-o,x=u.filter(w=>w.time>S),C=lr({width:u0e,height:h0e,marginLeft:80,marginBottom:50,padding:0,x:{domain:[S,_],label:"time in seconds"},y:{domain:[-1,1],label:"bend value"},marks:[Ss([-1,-.5,0,.5,1],{stroke:"#ddd"}),Ss([0]),gA(x,{x:"time",y:"value",clip:!0,curve:"basis"})]});i(1,a.textContent="",a),a.appendChild(C)},d=ED(c,33);ur(c);const A=()=>({pastTime:o,firstTimeStamp:h,bendValues:u}),p=_=>{(u.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(u.length>0&&v(),i(2,o=_.pastTime),h=_.firstTimeStamp,i(3,u=_.bendValues),c())},v=()=>{u.length>0&&Zr(r.id,A())};hr(v);function g(){o=$n(this.value),i(2,o)}function y(_){En[_?"unshift":"push"](()=>{a=_,i(1,a)})}function E(_){u=_,i(3,u)}return e.$$set=_=>{"demoInfo"in _&&i(0,r=_.demoInfo)},[r,a,o,u,m,c,A,p,v,g,y,E]}class f0e extends Ai{constructor(t){super(),gi(this,t,d0e,c0e,pi,{demoInfo:0})}}const m0e=20,p0e=268290.80000000005,g0e=-20,A0e=!0,v0e=[{time:6.866100000000094,pitch:164.84394981764146,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.8558387003551999},{time:6.882699999999954,pitch:165.13856985862867,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.8717938546740882},{time:6.899399999999907,pitch:168.62434413709184,noteMidi:52,actualMidi:52.4,actualMidiChroma:4.399999999999999,centsOffset:39.99999999999986,clarity:.9550674496646963},{time:6.916100000000093,pitch:166.47566607514122,noteMidi:52,actualMidi:52.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.9892278466152646},{time:6.9326999999999535,pitch:165.50585321263233,noteMidi:52,actualMidi:52.07,actualMidiChroma:4.07,centsOffset:7.000000000000028,clarity:.9985202891473897},{time:6.9493999999999065,pitch:164.99543357303352,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.998910431492817},{time:6.966100000000093,pitch:164.8487478097934,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9990359914436446},{time:6.982800000000046,pitch:164.95743237248462,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9994584921478911},{time:6.9995,pitch:164.80896988770772,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9992993320414669},{time:7.016100000000093,pitch:164.841824151065,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9989685956499592},{time:7.032800000000046,pitch:164.85334356864416,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9992501424627882},{time:7.0495,pitch:164.866500940062,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9992278286807306},{time:7.066100000000093,pitch:164.9950305803836,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9987453238050286},{time:7.082800000000047,pitch:164.94150244683595,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9985164754781799},{time:7.099399999999907,pitch:165.0572032559152,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9992148272991805},{time:7.116100000000094,pitch:164.8610917153099,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9988873273261767},{time:7.132899999999907,pitch:165.0984178548978,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9984405615214733},{time:7.151899999999907,pitch:164.94967400278276,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9987463365972289},{time:7.166100000000093,pitch:164.81419903812036,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9987159745650764},{time:7.1826999999999535,pitch:164.90151204025747,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9986094038283042},{time:7.1995,pitch:164.78527366479423,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9982966174686894},{time:7.216100000000093,pitch:165.03819567012926,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9987167405897956},{time:7.232699999999953,pitch:164.77597239369763,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9981829247023377},{time:7.249399999999907,pitch:165.0629985434194,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9977194747458284},{time:7.266100000000093,pitch:165.08961565904517,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9985446299963563},{time:7.282800000000046,pitch:165.14883112356247,noteMidi:52,actualMidi:52.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.9981114660209442},{time:7.299399999999907,pitch:163.9517820760354,noteMidi:52,actualMidi:51.91,actualMidiChroma:3.9099999999999966,centsOffset:-9.000000000000341,clarity:.9931167050345593},{time:7.316100000000093,pitch:163.81234068839808,noteMidi:52,actualMidi:51.89,actualMidiChroma:3.8900000000000006,centsOffset:-10.999999999999943,clarity:.9881696274460765},{time:7.332699999999954,pitch:165.69085168456365,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9743155662962835},{time:7.349399999999907,pitch:163.6914381640926,noteMidi:52,actualMidi:51.88,actualMidiChroma:3.8800000000000026,centsOffset:-11.999999999999744,clarity:.9500692155729453},{time:7.366100000000094,pitch:162.2325439731973,noteMidi:52,actualMidi:51.73,actualMidiChroma:3.729999999999997,centsOffset:-27.000000000000313,clarity:.8873816464558963},{time:7.382699999999954,pitch:161.73750038958147,noteMidi:52,actualMidi:51.67,actualMidiChroma:3.6700000000000017,centsOffset:-32.99999999999983,clarity:.86465913358645},{time:7.399399999999907,pitch:152.82987217031967,noteMidi:51,actualMidi:50.69,actualMidiChroma:2.6899999999999977,centsOffset:-31.000000000000227,clarity:.4891711867699211},{time:7.416100000000093,pitch:155.24270348486192,noteMidi:51,actualMidi:50.96,actualMidiChroma:2.960000000000001,centsOffset:-3.9999999999999147,clarity:.6306220024590541},{time:7.4326999999999535,pitch:161.8269658172597,noteMidi:52,actualMidi:51.68,actualMidiChroma:3.6799999999999997,centsOffset:-32.00000000000003,clarity:.6914854286082885},{time:7.4493999999999065,pitch:164.78687538436128,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.7315233545188917},{time:7.466100000000093,pitch:164.51599485204596,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9312925520659476},{time:7.482699999999953,pitch:164.56655461757478,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9975351172510756},{time:7.499399999999907,pitch:164.6091096975178,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.999728817947485},{time:7.518600000000093,pitch:164.60448306937226,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9997637395205743},{time:7.532800000000046,pitch:164.6021324768012,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9997767661574102},{time:7.549399999999907,pitch:164.61430798885218,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998081201834026},{time:7.566100000000093,pitch:164.5966987735068,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998238892243236},{time:7.582800000000047,pitch:164.583513443727,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998474338232768},{time:7.5995,pitch:164.55118862232186,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9998562822041208},{time:7.616100000000094,pitch:164.54775693070215,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9998733775956552},{time:7.632699999999954,pitch:164.55287782522797,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9998697881286063},{time:7.649399999999907,pitch:164.57993399437402,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998807215246472},{time:7.666,pitch:164.62599768003454,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998862841845693},{time:7.6826999999999535,pitch:164.62633525776772,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998926206189438},{time:7.6993999999999065,pitch:164.63117779162107,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9999083887412894},{time:7.716100000000093,pitch:164.6217692113757,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9999048298632474},{time:7.732699999999953,pitch:164.62298099777067,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9999064967878866},{time:7.749399999999907,pitch:164.64627519220136,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998998459822062},{time:7.766100000000093,pitch:164.69291928303588,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998851241170215},{time:7.782800000000046,pitch:164.76414528652464,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998674813727533},{time:7.799399999999907,pitch:164.9039124696968,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9998659451371452},{time:7.816100000000093,pitch:165.09595006695162,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9998508547546976},{time:7.832699999999954,pitch:165.21236391966048,noteMidi:52,actualMidi:52.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.9998501269187727},{time:7.849399999999907,pitch:165.59909371193066,noteMidi:52,actualMidi:52.08,actualMidiChroma:4.079999999999998,centsOffset:7.9999999999998295,clarity:.9997168184625096},{time:7.866100000000094,pitch:166.32959674748992,noteMidi:52,actualMidi:52.16,actualMidiChroma:4.159999999999997,centsOffset:15.999999999999659,clarity:.9996002451489829},{time:7.885199999999953,pitch:166.95005672321903,noteMidi:52,actualMidi:52.22,actualMidiChroma:4.219999999999999,centsOffset:21.999999999999886,clarity:.9995674358182214},{time:7.8995,pitch:167.30822520388563,noteMidi:52,actualMidi:52.26,actualMidiChroma:4.259999999999998,centsOffset:25.9999999999998,clarity:.9995460139737204},{time:7.916100000000093,pitch:167.96869061390035,noteMidi:52,actualMidi:52.33,actualMidiChroma:4.329999999999998,centsOffset:32.99999999999983,clarity:.9992575823123317},{time:7.9326999999999535,pitch:168.42974787165807,noteMidi:52,actualMidi:52.38,actualMidiChroma:4.380000000000003,centsOffset:38.000000000000256,clarity:.9988347989439674},{time:7.9493999999999065,pitch:169.69146990273828,noteMidi:53,actualMidi:52.5,actualMidiChroma:4.5,centsOffset:-50,clarity:.9969885331529795},{time:7.966100000000093,pitch:171.25631625699404,noteMidi:53,actualMidi:52.66,actualMidiChroma:4.659999999999997,centsOffset:-34.00000000000034,clarity:.9929487160522186},{time:7.982699999999953,pitch:172.3707299352859,noteMidi:53,actualMidi:52.78,actualMidiChroma:4.780000000000001,centsOffset:-21.999999999999886,clarity:.9913604806097283},{time:7.999399999999907,pitch:173.45397592440486,noteMidi:53,actualMidi:52.88,actualMidiChroma:4.880000000000003,centsOffset:-11.999999999999744,clarity:.9911117339865996},{time:8.016100000000094,pitch:173.58105402136647,noteMidi:53,actualMidi:52.9,actualMidiChroma:4.899999999999999,centsOffset:-10.000000000000142,clarity:.9913338229458546},{time:8.032699999999954,pitch:173.6323235849193,noteMidi:53,actualMidi:52.9,actualMidiChroma:4.899999999999999,centsOffset:-10.000000000000142,clarity:.9922206622500909},{time:8.049399999999906,pitch:173.6185964608792,noteMidi:53,actualMidi:52.9,actualMidiChroma:4.899999999999999,centsOffset:-10.000000000000142,clarity:.9944782262746585},{time:8.066100000000093,pitch:173.15416900152098,noteMidi:53,actualMidi:52.85,actualMidiChroma:4.850000000000001,centsOffset:-14.999999999999858,clarity:.995203740044488},{time:8.082699999999953,pitch:173.25198025412067,noteMidi:53,actualMidi:52.86,actualMidiChroma:4.859999999999999,centsOffset:-14.000000000000057,clarity:.9937208794896861},{time:8.099399999999907,pitch:174.1311707063476,noteMidi:53,actualMidi:52.95,actualMidiChroma:4.950000000000003,centsOffset:-4.999999999999716,clarity:.9883601213378483},{time:8.116100000000094,pitch:172.82310265013388,noteMidi:53,actualMidi:52.82,actualMidiChroma:4.82,centsOffset:-17.99999999999997,clarity:.986285733678173},{time:8.132699999999954,pitch:171.48070740457166,noteMidi:53,actualMidi:52.69,actualMidiChroma:4.689999999999998,centsOffset:-31.000000000000227,clarity:.9899169337489582},{time:8.149300000000046,pitch:169.697948578165,noteMidi:53,actualMidi:52.51,actualMidiChroma:4.509999999999998,centsOffset:-49.0000000000002,clarity:.996847439023206},{time:8.166100000000093,pitch:168.66735385929246,noteMidi:52,actualMidi:52.4,actualMidiChroma:4.399999999999999,centsOffset:39.99999999999986,clarity:.9981152319323741},{time:8.182800000000046,pitch:168.05758001719303,noteMidi:52,actualMidi:52.34,actualMidiChroma:4.340000000000003,centsOffset:34.00000000000034,clarity:.9985024094434252},{time:8.199399999999907,pitch:167.05123138099424,noteMidi:52,actualMidi:52.23,actualMidiChroma:4.229999999999997,centsOffset:22.999999999999687,clarity:.9989938470060906},{time:8.216100000000093,pitch:166.38371693034617,noteMidi:52,actualMidi:52.16,actualMidiChroma:4.159999999999997,centsOffset:15.999999999999659,clarity:.999509127897042},{time:8.232800000000047,pitch:166.1269850402358,noteMidi:52,actualMidi:52.14,actualMidiChroma:4.140000000000001,centsOffset:14.000000000000057,clarity:.9996331147481996},{time:8.251699999999953,pitch:165.6685333591511,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9996724018451957},{time:8.266100000000094,pitch:165.14962450335688,noteMidi:52,actualMidi:52.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.9998590675734533},{time:8.282699999999954,pitch:165.0717615825231,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9998738842335939},{time:8.299399999999906,pitch:164.9279133573899,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9999057670331482},{time:8.316,pitch:164.93212260038686,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9999131890453299},{time:8.332699999999953,pitch:164.92347146272655,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9999231240141029},{time:8.349399999999907,pitch:164.97450531958546,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9999072588426401},{time:8.366,pitch:165.15897932688134,noteMidi:52,actualMidi:52.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.9998485492188394},{time:8.382800000000046,pitch:165.32536336264081,noteMidi:52,actualMidi:52.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.9997492275956077},{time:8.399399999999908,pitch:165.90951513260146,noteMidi:52,actualMidi:52.11,actualMidiChroma:4.109999999999999,centsOffset:10.999999999999943,clarity:.9995347198668654},{time:8.416100000000093,pitch:166.46650082048882,noteMidi:52,actualMidi:52.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.9994799374476457},{time:8.432699999999953,pitch:166.77875843523165,noteMidi:52,actualMidi:52.21,actualMidiChroma:4.210000000000001,centsOffset:21.000000000000085,clarity:.9994846219575919},{time:8.449399999999907,pitch:167.21741274129107,noteMidi:52,actualMidi:52.25,actualMidiChroma:4.25,centsOffset:25,clarity:.9993352694181681},{time:8.466100000000093,pitch:167.8834258809413,noteMidi:52,actualMidi:52.32,actualMidiChroma:4.32,centsOffset:32.00000000000003,clarity:.9982656364979121},{time:8.482800000000047,pitch:168.11538904071602,noteMidi:52,actualMidi:52.34,actualMidiChroma:4.340000000000003,centsOffset:34.00000000000034,clarity:.9980810644853264},{time:8.499399999999907,pitch:169.2328567090309,noteMidi:52,actualMidi:52.46,actualMidiChroma:4.460000000000001,centsOffset:46.000000000000085,clarity:.9931708717753978},{time:8.516100000000094,pitch:170.63571142124826,noteMidi:53,actualMidi:52.6,actualMidiChroma:4.600000000000001,centsOffset:-39.99999999999986,clarity:.9848737299755683},{time:8.532699999999954,pitch:171.4389763130013,noteMidi:53,actualMidi:52.68,actualMidiChroma:4.68,centsOffset:-32.00000000000003,clarity:.976238655929123},{time:8.549399999999906,pitch:171.4310832497451,noteMidi:53,actualMidi:52.68,actualMidiChroma:4.68,centsOffset:-32.00000000000003,clarity:.9778200538953712},{time:8.566100000000093,pitch:170.5180356340411,noteMidi:53,actualMidi:52.59,actualMidiChroma:4.590000000000003,centsOffset:-40.99999999999966,clarity:.9889662790078333},{time:8.582699999999953,pitch:170.43058152497653,noteMidi:53,actualMidi:52.58,actualMidiChroma:4.579999999999998,centsOffset:-42.00000000000017,clarity:.9927388886325517},{time:8.599399999999907,pitch:169.9080704023652,noteMidi:53,actualMidi:52.53,actualMidiChroma:4.530000000000001,centsOffset:-46.999999999999886,clarity:.9955827277791869},{time:8.618399999999907,pitch:168.9995379704416,noteMidi:52,actualMidi:52.43,actualMidiChroma:4.43,centsOffset:42.99999999999997,clarity:.9969674259488954},{time:8.632699999999954,pitch:168.42667788359935,noteMidi:52,actualMidi:52.38,actualMidiChroma:4.380000000000003,centsOffset:38.000000000000256,clarity:.9978202310170872},{time:8.649399999999908,pitch:167.15582143002482,noteMidi:52,actualMidi:52.24,actualMidiChroma:4.240000000000002,centsOffset:24.0000000000002,clarity:.9987653272755246},{time:8.666100000000093,pitch:166.09050347337185,noteMidi:52,actualMidi:52.13,actualMidiChroma:4.130000000000003,centsOffset:13.000000000000256,clarity:.9995995763451901},{time:8.682800000000046,pitch:165.87465410744227,noteMidi:52,actualMidi:52.11,actualMidiChroma:4.109999999999999,centsOffset:10.999999999999943,clarity:.9996424773777051},{time:8.699399999999907,pitch:165.3534795084119,noteMidi:52,actualMidi:52.06,actualMidiChroma:4.060000000000002,centsOffset:6.000000000000227,clarity:.9997655162181331},{time:8.716100000000093,pitch:164.984884753777,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9994715088380985},{time:8.732699999999953,pitch:164.8245410794315,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.999512930167981},{time:8.749399999999907,pitch:164.7207070591235,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998817083187461},{time:8.766100000000094,pitch:164.64659978959494,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998772790801418},{time:8.782699999999954,pitch:164.71407577372304,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998890539555383},{time:8.799399999999906,pitch:164.66590845176603,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998875932531526},{time:8.816100000000093,pitch:164.73662181616334,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998739480376813},{time:8.832699999999953,pitch:164.8525857386244,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9995090709635548},{time:8.849399999999907,pitch:165.0826442074827,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9992637761081724},{time:8.866,pitch:165.6740243015302,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9995195579426692},{time:8.882699999999954,pitch:165.74978285617087,noteMidi:52,actualMidi:52.1,actualMidiChroma:4.100000000000001,centsOffset:10.000000000000142,clarity:.9994388275967054},{time:8.899399999999908,pitch:166.48677382649606,noteMidi:52,actualMidi:52.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.9992100552002796},{time:8.916100000000093,pitch:167.1076192118069,noteMidi:52,actualMidi:52.24,actualMidiChroma:4.240000000000002,centsOffset:24.0000000000002,clarity:.9985475958831067},{time:8.932800000000046,pitch:167.65459050773455,noteMidi:52,actualMidi:52.3,actualMidiChroma:4.299999999999997,centsOffset:29.999999999999716,clarity:.9977380928952151},{time:8.949399999999907,pitch:168.63518660042632,noteMidi:52,actualMidi:52.4,actualMidiChroma:4.399999999999999,centsOffset:39.99999999999986,clarity:.9907558074830476},{time:8.966100000000093,pitch:170.58319863199816,noteMidi:53,actualMidi:52.6,actualMidiChroma:4.600000000000001,centsOffset:-39.99999999999986,clarity:.9553077129905745},{time:8.985100000000093,pitch:172.05277576137826,noteMidi:53,actualMidi:52.74,actualMidiChroma:4.740000000000002,centsOffset:-25.9999999999998,clarity:.9194256710938689},{time:8.999399999999907,pitch:170.98417004058112,noteMidi:53,actualMidi:52.64,actualMidiChroma:4.640000000000001,centsOffset:-35.99999999999994,clarity:.9399612675385001},{time:9.016100000000094,pitch:170.36704863131982,noteMidi:53,actualMidi:52.57,actualMidiChroma:4.57,centsOffset:-42.99999999999997,clarity:.9831707372620571},{time:9.032699999999954,pitch:170.13882509361062,noteMidi:53,actualMidi:52.55,actualMidiChroma:4.549999999999997,centsOffset:-45.000000000000284,clarity:.9871076528192191},{time:9.049399999999906,pitch:169.69540228209473,noteMidi:53,actualMidi:52.51,actualMidiChroma:4.509999999999998,centsOffset:-49.0000000000002,clarity:.9915116048877266},{time:9.066,pitch:169.05893495241105,noteMidi:52,actualMidi:52.44,actualMidiChroma:4.439999999999998,centsOffset:43.99999999999977,clarity:.9921280372532024},{time:9.082699999999953,pitch:168.74648795639789,noteMidi:52,actualMidi:52.41,actualMidiChroma:4.409999999999997,centsOffset:40.99999999999966,clarity:.9924070653775559},{time:9.099399999999907,pitch:167.6830133905739,noteMidi:52,actualMidi:52.3,actualMidiChroma:4.299999999999997,centsOffset:29.999999999999716,clarity:.990465699078527},{time:9.116,pitch:166.65325408413136,noteMidi:52,actualMidi:52.19,actualMidiChroma:4.189999999999998,centsOffset:18.999999999999773,clarity:.9903528820599945},{time:9.132699999999954,pitch:166.23699225640473,noteMidi:52,actualMidi:52.15,actualMidiChroma:4.149999999999999,centsOffset:14.999999999999858,clarity:.988907364964831},{time:9.149399999999908,pitch:165.5622709441096,noteMidi:52,actualMidi:52.08,actualMidiChroma:4.079999999999998,centsOffset:7.9999999999998295,clarity:.9913537136596986},{time:9.166100000000093,pitch:165.22312077190833,noteMidi:52,actualMidi:52.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.9966486026359718},{time:9.182699999999953,pitch:165.1399288232579,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9985897293870778},{time:9.199399999999907,pitch:164.88233655796014,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9993198256611109},{time:9.216100000000093,pitch:164.6600828663795,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9990255529635306},{time:9.232699999999953,pitch:164.62335189211518,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9991440116177372},{time:9.249399999999907,pitch:164.67595654446146,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9993777889130584},{time:9.266,pitch:164.71651627097233,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9993470217003022},{time:9.282699999999954,pitch:164.72896324446975,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9990619944315782},{time:9.299399999999906,pitch:164.97747703320175,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9977693631834512},{time:9.316,pitch:165.75001027182515,noteMidi:52,actualMidi:52.1,actualMidiChroma:4.100000000000001,centsOffset:10.000000000000142,clarity:.9965839168588957},{time:9.332699999999953,pitch:165.99927080703412,noteMidi:52,actualMidi:52.12,actualMidiChroma:4.119999999999997,centsOffset:11.999999999999744,clarity:.9964715988682258},{time:9.351699999999953,pitch:167.0659050426878,noteMidi:52,actualMidi:52.23,actualMidiChroma:4.229999999999997,centsOffset:22.999999999999687,clarity:.9919009463752033},{time:9.366,pitch:168.26587195782554,noteMidi:52,actualMidi:52.36,actualMidiChroma:4.359999999999999,centsOffset:35.99999999999994,clarity:.9797269577048056},{time:9.382699999999954,pitch:169.34312222183863,noteMidi:52,actualMidi:52.47,actualMidiChroma:4.469999999999999,centsOffset:46.999999999999886,clarity:.9638938319865531},{time:9.399300000000046,pitch:170.1678883326128,noteMidi:53,actualMidi:52.55,actualMidiChroma:4.549999999999997,centsOffset:-45.000000000000284,clarity:.9430821418404562},{time:9.416,pitch:170.01430859937165,noteMidi:53,actualMidi:52.54,actualMidiChroma:4.539999999999999,centsOffset:-46.000000000000085,clarity:.9744575301589435},{time:9.432699999999953,pitch:169.94504987608735,noteMidi:53,actualMidi:52.53,actualMidiChroma:4.530000000000001,centsOffset:-46.999999999999886,clarity:.9852338418709685},{time:9.449399999999907,pitch:169.6497293432335,noteMidi:53,actualMidi:52.5,actualMidiChroma:4.5,centsOffset:-50,clarity:.9926115060415235},{time:9.466,pitch:169.5985685999916,noteMidi:53,actualMidi:52.5,actualMidiChroma:4.5,centsOffset:-50,clarity:.9922799111601108},{time:9.482699999999953,pitch:169.65375984588474,noteMidi:53,actualMidi:52.5,actualMidiChroma:4.5,centsOffset:-50,clarity:.992723744401502},{time:9.499399999999907,pitch:169.07131699408137,noteMidi:52,actualMidi:52.44,actualMidiChroma:4.439999999999998,centsOffset:43.99999999999977,clarity:.9865183460268199},{time:9.516,pitch:168.0972758463785,noteMidi:52,actualMidi:52.34,actualMidiChroma:4.340000000000003,centsOffset:34.00000000000034,clarity:.9772078129089792},{time:9.532699999999954,pitch:167.5682595577913,noteMidi:52,actualMidi:52.29,actualMidiChroma:4.289999999999999,centsOffset:28.999999999999915,clarity:.9759038123749235},{time:9.549399999999906,pitch:166.12520106416568,noteMidi:52,actualMidi:52.14,actualMidiChroma:4.140000000000001,centsOffset:14.000000000000057,clarity:.9763967440546821},{time:9.566100000000093,pitch:165.64998344842908,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9852065984185714},{time:9.582800000000047,pitch:165.51943218727814,noteMidi:52,actualMidi:52.07,actualMidiChroma:4.07,centsOffset:7.000000000000028,clarity:.9922176721904208},{time:9.599399999999907,pitch:164.98825779187862,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9924823669119007},{time:9.616,pitch:164.60217164673278,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9807802833970527},{time:9.632699999999954,pitch:164.83698110997156,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9825379258077049},{time:9.649399999999908,pitch:164.63474094254883,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.997060225410273},{time:9.666,pitch:164.7260982893437,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9980249238046426},{time:9.682699999999953,pitch:164.6657384449429,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9978444502666264},{time:9.701699999999953,pitch:164.98565134462098,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9965799200352947},{time:9.716,pitch:165.05236705028852,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.983006061158477},{time:9.732800000000047,pitch:165.3890936476649,noteMidi:52,actualMidi:52.06,actualMidiChroma:4.060000000000002,centsOffset:6.000000000000227,clarity:.9777208156034405},{time:9.749399999999907,pitch:165.58999374381565,noteMidi:52,actualMidi:52.08,actualMidiChroma:4.079999999999998,centsOffset:7.9999999999998295,clarity:.9783472680551171},{time:9.766100000000094,pitch:166.86780501763303,noteMidi:52,actualMidi:52.21,actualMidiChroma:4.210000000000001,centsOffset:21.000000000000085,clarity:.9644738741329277},{time:9.782699999999954,pitch:167.67902923697974,noteMidi:52,actualMidi:52.3,actualMidiChroma:4.299999999999997,centsOffset:29.999999999999716,clarity:.9672960957388312},{time:9.799300000000047,pitch:168.09866906086964,noteMidi:52,actualMidi:52.34,actualMidiChroma:4.340000000000003,centsOffset:34.00000000000034,clarity:.9594326654171823},{time:9.816100000000093,pitch:168.9694989976726,noteMidi:52,actualMidi:52.43,actualMidiChroma:4.43,centsOffset:42.99999999999997,clarity:.9677405818198608},{time:9.832699999999953,pitch:168.8575859106849,noteMidi:52,actualMidi:52.42,actualMidiChroma:4.420000000000002,centsOffset:42.00000000000017,clarity:.9738915202702074},{time:9.849399999999907,pitch:169.17723905819736,noteMidi:52,actualMidi:52.45,actualMidiChroma:4.450000000000003,centsOffset:45.000000000000284,clarity:.9821519944541066},{time:9.866,pitch:169.29232387294206,noteMidi:52,actualMidi:52.46,actualMidiChroma:4.460000000000001,centsOffset:46.000000000000085,clarity:.9882856925358325},{time:9.882699999999954,pitch:168.94799882079442,noteMidi:52,actualMidi:52.43,actualMidiChroma:4.43,centsOffset:42.99999999999997,clarity:.988974822156365},{time:9.899399999999908,pitch:168.99347003062866,noteMidi:52,actualMidi:52.43,actualMidiChroma:4.43,centsOffset:42.99999999999997,clarity:.9812760653675561},{time:9.916100000000093,pitch:169.16510838169606,noteMidi:52,actualMidi:52.45,actualMidiChroma:4.450000000000003,centsOffset:45.000000000000284,clarity:.9689671237469177},{time:9.932699999999953,pitch:168.5293676207821,noteMidi:52,actualMidi:52.39,actualMidiChroma:4.390000000000001,centsOffset:39.00000000000006,clarity:.9367946230635447},{time:9.949199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:9.965899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:9.982600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:9.999199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.015899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.0325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.049199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.068399999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.0825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.099300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.115899999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.1325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.149199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.165899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.1825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.199199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.215899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.232600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.249199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.265899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.2825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.299300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.315899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.3325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.349199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.365800000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.382600000000092,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.399199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.415899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.435199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.449300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.465899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.482600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.499300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.515899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.532600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.549199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.565899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.5825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.599199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.615800000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.6325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.649300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.665899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.682600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.699199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.715899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.732600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.749199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.765899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.782600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.801600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.815899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.832600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.849199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.865899999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.8825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.899199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.915899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.932600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.949300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.965899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.9825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:10.999199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.015899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.0325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.049199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.065899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.0825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.099300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.115899999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.132600000000092,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.149199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.168399999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.182600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.199199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.215800000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.232600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.249199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.265800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.2825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.299199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.315800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.332600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.349199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.365800000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.382600000000092,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.399199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.415899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.432600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.449199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.465899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.4825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.499199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.515800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.535199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.549300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.565800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.5825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.599199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.615899999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.6325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.649199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.665899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.6825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.699199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.715800000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.7325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.749199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.765899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.7825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.799199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.815899999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.832600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.849199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.865899999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:11.882600000000092,pitch:122.99971404694507,noteMidi:47,actualMidi:46.93,actualMidiChroma:10.93,centsOffset:-7.000000000000028,clarity:.22237098169316383},{time:11.901699999999954,pitch:158.07340275858212,noteMidi:51,actualMidi:51.28,actualMidiChroma:3.280000000000001,centsOffset:28.000000000000114,clarity:.3794272410180053},{time:11.916100000000093,pitch:165.47234417598042,noteMidi:52,actualMidi:52.07,actualMidiChroma:4.07,centsOffset:7.000000000000028,clarity:.7220560826078994},{time:11.932699999999953,pitch:165.24102216474537,noteMidi:52,actualMidi:52.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.8417470226440003},{time:11.949399999999907,pitch:164.91299942464866,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9971877262032791},{time:11.966,pitch:164.87568493678106,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9996251686185076},{time:11.982699999999953,pitch:164.86963256676034,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9996613988714813},{time:11.999300000000046,pitch:164.85060616947288,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9997231937070552},{time:12.016,pitch:164.80474989435524,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9997932752779803},{time:12.032600000000093,pitch:164.78955396509568,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9998167876406967},{time:12.049300000000047,pitch:164.76806716445725,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9998382793698397},{time:12.065899999999907,pitch:164.75406595268652,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998444207794535},{time:12.082699999999953,pitch:164.75673196447767,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998568463410891},{time:12.099300000000046,pitch:164.76132698567326,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998642070386836},{time:12.116,pitch:164.7599415929434,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998745190893032},{time:12.132600000000092,pitch:164.7506830773582,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998762562625245},{time:12.149300000000046,pitch:164.7383580992646,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998898641161631},{time:12.166,pitch:164.7416464508854,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998978884198522},{time:12.182600000000093,pitch:164.76165570263183,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998952432946595},{time:12.199300000000047,pitch:164.86287146138318,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9998899689868566},{time:12.216,pitch:164.95859291058477,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9999080117683832},{time:12.232600000000094,pitch:164.9791938813049,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9999135973180557},{time:12.249399999999907,pitch:165.00760802829015,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9999194956776662},{time:12.268600000000093,pitch:165.06960784854692,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9999207640101702},{time:12.282600000000093,pitch:165.13080901636337,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9999107818479587},{time:12.299300000000047,pitch:165.28936313648663,noteMidi:52,actualMidi:52.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.9999102115855081},{time:12.316,pitch:165.4964278600309,noteMidi:52,actualMidi:52.07,actualMidiChroma:4.07,centsOffset:7.000000000000028,clarity:.9998858470831351},{time:12.332600000000093,pitch:165.65369203423543,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9998408498919602},{time:12.349300000000046,pitch:166.02861243044143,noteMidi:52,actualMidi:52.13,actualMidiChroma:4.130000000000003,centsOffset:13.000000000000256,clarity:.9997800566134529},{time:12.366,pitch:166.31627146361407,noteMidi:52,actualMidi:52.16,actualMidiChroma:4.159999999999997,centsOffset:15.999999999999659,clarity:.9997546818203844},{time:12.382600000000092,pitch:166.49068221116875,noteMidi:52,actualMidi:52.18,actualMidiChroma:4.18,centsOffset:17.99999999999997,clarity:.9996897098282247},{time:12.399300000000046,pitch:166.8427732150061,noteMidi:52,actualMidi:52.21,actualMidiChroma:4.210000000000001,centsOffset:21.000000000000085,clarity:.9996153493309521},{time:12.416,pitch:167.3894408302328,noteMidi:52,actualMidi:52.27,actualMidiChroma:4.270000000000003,centsOffset:27.000000000000313,clarity:.9994756116351553},{time:12.432600000000093,pitch:167.73142602922553,noteMidi:52,actualMidi:52.3,actualMidiChroma:4.299999999999997,centsOffset:29.999999999999716,clarity:.9993223127299871},{time:12.449399999999907,pitch:168.3645214576296,noteMidi:52,actualMidi:52.37,actualMidiChroma:4.369999999999997,centsOffset:36.999999999999744,clarity:.9985561142493182},{time:12.466,pitch:169.43647741383396,noteMidi:52,actualMidi:52.48,actualMidiChroma:4.479999999999997,centsOffset:47.99999999999969,clarity:.99624246217018},{time:12.482600000000094,pitch:169.9867167796157,noteMidi:53,actualMidi:52.54,actualMidiChroma:4.539999999999999,centsOffset:-46.000000000000085,clarity:.9948881897144233},{time:12.499300000000046,pitch:171.60990828566023,noteMidi:53,actualMidi:52.7,actualMidiChroma:4.700000000000003,centsOffset:-29.999999999999716,clarity:.9931344371906619},{time:12.516,pitch:172.08588772594808,noteMidi:53,actualMidi:52.75,actualMidiChroma:4.75,centsOffset:-25,clarity:.9927442831063047},{time:12.532699999999954,pitch:172.2321352845652,noteMidi:53,actualMidi:52.76,actualMidiChroma:4.759999999999998,centsOffset:-24.0000000000002,clarity:.9928908174880036},{time:12.549300000000047,pitch:172.73607892274683,noteMidi:53,actualMidi:52.81,actualMidiChroma:4.810000000000002,centsOffset:-18.999999999999773,clarity:.9920640177391604},{time:12.566,pitch:173.24069505521152,noteMidi:53,actualMidi:52.86,actualMidiChroma:4.859999999999999,centsOffset:-14.000000000000057,clarity:.9936870420610688},{time:12.582699999999953,pitch:173.20361801957,noteMidi:53,actualMidi:52.86,actualMidiChroma:4.859999999999999,centsOffset:-14.000000000000057,clarity:.9945483208836663},{time:12.599399999999907,pitch:173.12705041047704,noteMidi:53,actualMidi:52.85,actualMidiChroma:4.850000000000001,centsOffset:-14.999999999999858,clarity:.9934031762708244},{time:12.6185,pitch:174.77530175576314,noteMidi:53,actualMidi:53.02,actualMidiChroma:5.020000000000003,centsOffset:2.0000000000003126,clarity:.9841012773140534},{time:12.632699999999954,pitch:175.26404850040137,noteMidi:53,actualMidi:53.06,actualMidiChroma:5.060000000000002,centsOffset:6.000000000000227,clarity:.9822435739459223},{time:12.649399999999908,pitch:174.63629436596383,noteMidi:53,actualMidi:53,actualMidiChroma:5,centsOffset:0,clarity:.9868766288684867},{time:12.666,pitch:174.29026792475238,noteMidi:53,actualMidi:52.97,actualMidiChroma:4.969999999999999,centsOffset:-3.0000000000001137,clarity:.9917270322447962},{time:12.682600000000093,pitch:174.0637455277285,noteMidi:53,actualMidi:52.95,actualMidiChroma:4.950000000000003,centsOffset:-4.999999999999716,clarity:.9928826823691494},{time:12.699300000000047,pitch:173.87239914293505,noteMidi:53,actualMidi:52.93,actualMidiChroma:4.93,centsOffset:-7.000000000000028,clarity:.992273598010037},{time:12.716,pitch:174.73475052519015,noteMidi:53,actualMidi:53.01,actualMidiChroma:5.009999999999998,centsOffset:.999999999999801,clarity:.9859587106853738},{time:12.732699999999953,pitch:175.24020160912042,noteMidi:53,actualMidi:53.06,actualMidiChroma:5.060000000000002,centsOffset:6.000000000000227,clarity:.9815880842788118},{time:12.749399999999907,pitch:174.3603189169219,noteMidi:53,actualMidi:52.97,actualMidiChroma:4.969999999999999,centsOffset:-3.0000000000001137,clarity:.9870553855781736},{time:12.766,pitch:173.80799851091464,noteMidi:53,actualMidi:52.92,actualMidiChroma:4.920000000000002,centsOffset:-7.9999999999998295,clarity:.9919719199465078},{time:12.782699999999954,pitch:173.7396026782135,noteMidi:53,actualMidi:52.91,actualMidiChroma:4.909999999999997,centsOffset:-9.000000000000341,clarity:.9929966404166493},{time:12.799399999999906,pitch:173.3838860088675,noteMidi:53,actualMidi:52.88,actualMidiChroma:4.880000000000003,centsOffset:-11.999999999999744,clarity:.993641802509444},{time:12.816,pitch:173.87839139242186,noteMidi:53,actualMidi:52.93,actualMidiChroma:4.93,centsOffset:-7.000000000000028,clarity:.9879404665678848},{time:12.832600000000093,pitch:174.42277110483084,noteMidi:53,actualMidi:52.98,actualMidiChroma:4.979999999999997,centsOffset:-2.0000000000003126,clarity:.983568348834865},{time:12.849300000000046,pitch:173.9391404907044,noteMidi:53,actualMidi:52.93,actualMidiChroma:4.93,centsOffset:-7.000000000000028,clarity:.9832787731692321},{time:12.866,pitch:172.14373155966902,noteMidi:53,actualMidi:52.75,actualMidiChroma:4.75,centsOffset:-25,clarity:.9929482009900283},{time:12.882600000000092,pitch:171.72990348246213,noteMidi:53,actualMidi:52.71,actualMidiChroma:4.710000000000001,centsOffset:-28.999999999999915,clarity:.9948651799283894},{time:12.899300000000046,pitch:171.02297536743802,noteMidi:53,actualMidi:52.64,actualMidiChroma:4.640000000000001,centsOffset:-35.99999999999994,clarity:.996447381238049},{time:12.915899999999906,pitch:170.42345857860482,noteMidi:53,actualMidi:52.58,actualMidiChroma:4.579999999999998,centsOffset:-42.00000000000017,clarity:.9971628295995458},{time:12.932600000000093,pitch:170.08476078947328,noteMidi:53,actualMidi:52.55,actualMidiChroma:4.549999999999997,centsOffset:-45.000000000000284,clarity:.99700320834976},{time:12.949300000000047,pitch:169.39413852411047,noteMidi:52,actualMidi:52.47,actualMidiChroma:4.469999999999999,centsOffset:46.999999999999886,clarity:.9969980514072745},{time:12.966,pitch:169.02426391169752,noteMidi:52,actualMidi:52.44,actualMidiChroma:4.439999999999998,centsOffset:43.99999999999977,clarity:.9965993075577444},{time:12.985199999999953,pitch:168.67231413855737,noteMidi:52,actualMidi:52.4,actualMidiChroma:4.399999999999999,centsOffset:39.99999999999986,clarity:.9966534863021792},{time:12.999300000000046,pitch:168.5207640347269,noteMidi:52,actualMidi:52.39,actualMidiChroma:4.390000000000001,centsOffset:39.00000000000006,clarity:.9968482891196118},{time:13.015899999999906,pitch:167.92464193116618,noteMidi:52,actualMidi:52.32,actualMidiChroma:4.32,centsOffset:32.00000000000003,clarity:.9976491054710124},{time:13.032600000000093,pitch:167.61483567921258,noteMidi:52,actualMidi:52.29,actualMidiChroma:4.289999999999999,centsOffset:28.999999999999915,clarity:.9980503690941305},{time:13.049300000000047,pitch:167.09129784408603,noteMidi:52,actualMidi:52.24,actualMidiChroma:4.240000000000002,centsOffset:24.0000000000002,clarity:.9988878303043407},{time:13.066,pitch:166.6829552590152,noteMidi:52,actualMidi:52.2,actualMidiChroma:4.200000000000003,centsOffset:20.000000000000284,clarity:.9993186997678123},{time:13.082600000000093,pitch:166.58317265915653,noteMidi:52,actualMidi:52.18,actualMidiChroma:4.18,centsOffset:17.99999999999997,clarity:.9993564214868798},{time:13.099300000000046,pitch:166.4514631287783,noteMidi:52,actualMidi:52.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.9994600422887459},{time:13.116,pitch:166.21271719795286,noteMidi:52,actualMidi:52.15,actualMidiChroma:4.149999999999999,centsOffset:14.999999999999858,clarity:.9995356609317128},{time:13.132699999999954,pitch:166.0325330874872,noteMidi:52,actualMidi:52.13,actualMidiChroma:4.130000000000003,centsOffset:13.000000000000256,clarity:.9995281016834383},{time:13.149300000000046,pitch:165.61337287991176,noteMidi:52,actualMidi:52.08,actualMidiChroma:4.079999999999998,centsOffset:7.9999999999998295,clarity:.9997349583266484},{time:13.166,pitch:165.4480044454292,noteMidi:52,actualMidi:52.07,actualMidiChroma:4.07,centsOffset:7.000000000000028,clarity:.9998340115880993},{time:13.182600000000093,pitch:165.4012574552898,noteMidi:52,actualMidi:52.06,actualMidiChroma:4.060000000000002,centsOffset:6.000000000000227,clarity:.9998300271252987},{time:13.199300000000047,pitch:165.27553403620354,noteMidi:52,actualMidi:52.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.9997589306951085},{time:13.216,pitch:165.0906997268016,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9997629228747371},{time:13.232699999999953,pitch:164.97919779476177,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9998238237108055},{time:13.249399999999907,pitch:164.92303771364152,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9998275582155998},{time:13.266,pitch:164.85622243336738,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9997845330453572},{time:13.282600000000093,pitch:164.84259926678848,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9997956247800914},{time:13.299399999999906,pitch:164.72670793960103,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998012658377817},{time:13.316,pitch:164.641405023088,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9997091293004772},{time:13.335,pitch:164.637110613443,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9997088875487776},{time:13.349300000000046,pitch:164.59122699206978,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9996793912388497},{time:13.365899999999908,pitch:164.57947265406804,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9995687888261173},{time:13.382699999999954,pitch:164.56030023328938,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9995399120996709},{time:13.399300000000046,pitch:164.51639960802152,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9994165082193405},{time:13.415899999999906,pitch:164.48359106117042,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9993899801025847},{time:13.432600000000093,pitch:164.43112458806115,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9992696440699049},{time:13.449300000000047,pitch:164.4425323765353,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9993623287569733},{time:13.466,pitch:164.40605840518236,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9993468355192903},{time:13.482699999999953,pitch:164.39781468249478,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9992525615174088},{time:13.499399999999907,pitch:164.3410826468068,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9991928274286295},{time:13.516,pitch:164.26876940089196,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9991876664441008},{time:13.532600000000093,pitch:164.26672190246717,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9992320413191038},{time:13.549300000000047,pitch:164.21794330654635,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9990156914919055},{time:13.566,pitch:164.24060574267608,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9990411018327308},{time:13.582699999999953,pitch:164.2447384453097,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9992094731190662},{time:13.599300000000046,pitch:164.22971176769647,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9989939239932681},{time:13.615899999999908,pitch:164.24091735167738,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9992433094639068},{time:13.632600000000092,pitch:164.21003383787328,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9991090206632975},{time:13.649199999999954,pitch:164.2556155991957,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9993112338180481},{time:13.666,pitch:164.29162817498033,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9994627584294449},{time:13.685100000000093,pitch:164.29970896619275,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9992528862222088},{time:13.699300000000047,pitch:164.32959235634198,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9991774315972464},{time:13.716,pitch:164.31640222820613,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9992310713122237},{time:13.732600000000094,pitch:164.36255583671883,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9995523300291751},{time:13.749300000000046,pitch:164.35342987798222,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9993532281192188},{time:13.765899999999906,pitch:164.36085012487695,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9994437565953831},{time:13.782699999999954,pitch:164.38226521492422,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9995137500092142},{time:13.799300000000047,pitch:164.36217898011918,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9993684728012227},{time:13.815899999999907,pitch:164.3620880396468,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9992878482371026},{time:13.832600000000093,pitch:164.31081347948037,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9993046951839801},{time:13.849199999999954,pitch:164.31280475561084,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9990824134482068},{time:13.866,pitch:164.3092896873149,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9987750238061466},{time:13.882699999999954,pitch:164.26407209423783,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9990447205735364},{time:13.899300000000046,pitch:164.26781961681317,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9991600074539093},{time:13.915899999999906,pitch:164.21415818918268,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9990426000864403},{time:13.932699999999953,pitch:164.23438217716568,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9991991439029348},{time:13.949300000000047,pitch:164.2092557689644,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9993184035342395},{time:13.965899999999907,pitch:164.19466961887287,noteMidi:52,actualMidi:51.93,actualMidiChroma:3.9299999999999997,centsOffset:-7.000000000000028,clarity:.9990780851586791},{time:13.982699999999953,pitch:164.23892996661354,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9990728958285615},{time:13.999300000000046,pitch:164.21134227891287,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.999346645964593},{time:14.015899999999906,pitch:164.30335765031938,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9991206855691885},{time:14.035,pitch:164.30873597708282,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9992484194013684},{time:14.049300000000047,pitch:164.3469586308741,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.999386699475167},{time:14.066,pitch:164.41417191807906,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9992802703053769},{time:14.082600000000093,pitch:164.4153658135478,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9992038078464063},{time:14.099300000000046,pitch:164.43129277952977,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9993975555990531},{time:14.116,pitch:164.41905008114782,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9993548362102374},{time:14.132600000000092,pitch:164.46025832427284,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9992115273028901},{time:14.149300000000046,pitch:164.46826097384925,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9992652576446446},{time:14.166,pitch:164.48139191155713,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9994216745291453},{time:14.182600000000093,pitch:164.50005733807768,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9994705719196233},{time:14.199199999999953,pitch:164.50851278743286,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9993325487670646},{time:14.216,pitch:164.51017648379926,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9994818457615651},{time:14.232600000000094,pitch:164.47787761903572,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9994177051864455},{time:14.249300000000046,pitch:164.49826987829263,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9990872126857155},{time:14.266,pitch:164.4763328130946,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9988359269634088},{time:14.282600000000093,pitch:164.40913999678048,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9984127702426591},{time:14.299399999999906,pitch:164.42182486344177,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9962046883178388},{time:14.315899999999907,pitch:164.2911837270567,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9960264698730228},{time:14.332699999999953,pitch:164.38519088269106,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9971910778496209},{time:14.349300000000046,pitch:164.36555778499675,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9978360686914414},{time:14.368300000000046,pitch:164.2613950230256,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9969157547704413},{time:14.382600000000092,pitch:164.29481095338707,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9969762286552566},{time:14.399199999999954,pitch:164.12739376041603,noteMidi:52,actualMidi:51.93,actualMidiChroma:3.9299999999999997,centsOffset:-7.000000000000028,clarity:.9958686635816747},{time:14.415800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.4325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.449199999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.465800000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.4825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.499100000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.515899999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.532399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.549100000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.565800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.582399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.599100000000092,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.615800000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.632399999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.649199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.665800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.6825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.699100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.718300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.7325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.749100000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.765800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.7825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.799100000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.815800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.8325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:14.849199999999954,pitch:290.9140056137336,noteMidi:62,actualMidi:61.84,actualMidiChroma:1.8400000000000034,centsOffset:-15.999999999999659,clarity:.2421313985819058},{time:14.865899999999908,pitch:164.57012995428374,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.8161532855289124},{time:14.882600000000092,pitch:164.59298841329377,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.8698257839050854},{time:14.899300000000046,pitch:164.63586749164165,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9995485340638623},{time:14.916,pitch:164.63383497695725,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9997147633418848},{time:14.932600000000093,pitch:164.64071969565765,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9997367593636852},{time:14.949199999999953,pitch:164.65980504316636,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.999782768953807},{time:14.966,pitch:164.64064530521335,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998257550867891},{time:14.982600000000094,pitch:164.6344279350128,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998262423623743},{time:14.999399999999907,pitch:164.62870798109938,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998356210945047},{time:15.016,pitch:164.62814794109997,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998081349558277},{time:15.032600000000093,pitch:164.62949132452215,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998020798130369},{time:15.051699999999954,pitch:164.62829554202895,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9997970145577852},{time:15.066,pitch:164.630218059076,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9997956739972551},{time:15.082600000000093,pitch:164.63879695193455,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998118981975921},{time:15.099199999999954,pitch:164.65117001408288,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9998110556905004},{time:15.115899999999908,pitch:164.68160178066645,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998106616520133},{time:15.132600000000092,pitch:164.71784052003287,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9998145140247914},{time:15.149199999999954,pitch:164.85377336740225,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9998154542374422},{time:15.165899999999906,pitch:165.03377061189093,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.999843429535126},{time:15.1825,pitch:165.13854308818927,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9998452151946537},{time:15.199300000000047,pitch:165.33102314013576,noteMidi:52,actualMidi:52.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.9998616350365239},{time:15.215899999999907,pitch:165.63137576129907,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.999832274931471},{time:15.232600000000094,pitch:165.7837934414672,noteMidi:52,actualMidi:52.1,actualMidiChroma:4.100000000000001,centsOffset:10.000000000000142,clarity:.9997788083299142},{time:15.249300000000046,pitch:166.08544101027576,noteMidi:52,actualMidi:52.13,actualMidiChroma:4.130000000000003,centsOffset:13.000000000000256,clarity:.9997690124005914},{time:15.265899999999906,pitch:166.46274937407688,noteMidi:52,actualMidi:52.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.9996731555713652},{time:15.282600000000093,pitch:166.6370431408558,noteMidi:52,actualMidi:52.19,actualMidiChroma:4.189999999999998,centsOffset:18.999999999999773,clarity:.9996250258911132},{time:15.299199999999953,pitch:167.1052915495754,noteMidi:52,actualMidi:52.24,actualMidiChroma:4.240000000000002,centsOffset:24.0000000000002,clarity:.9995911963624025},{time:15.316,pitch:167.581455773751,noteMidi:52,actualMidi:52.29,actualMidiChroma:4.289999999999999,centsOffset:28.999999999999915,clarity:.9994859710838071},{time:15.332600000000093,pitch:167.86512732593093,noteMidi:52,actualMidi:52.32,actualMidiChroma:4.32,centsOffset:32.00000000000003,clarity:.9993876619500384},{time:15.349300000000046,pitch:168.6245858564438,noteMidi:52,actualMidi:52.4,actualMidiChroma:4.399999999999999,centsOffset:39.99999999999986,clarity:.9983964587898271},{time:15.365899999999908,pitch:169.70874392975196,noteMidi:53,actualMidi:52.51,actualMidiChroma:4.509999999999998,centsOffset:-49.0000000000002,clarity:.9961058049698011},{time:15.385100000000094,pitch:171.66495337432676,noteMidi:53,actualMidi:52.71,actualMidiChroma:4.710000000000001,centsOffset:-28.999999999999915,clarity:.9925077706296719},{time:15.399300000000046,pitch:172.40644266397334,noteMidi:53,actualMidi:52.78,actualMidiChroma:4.780000000000001,centsOffset:-21.999999999999886,clarity:.9924732277651884},{time:15.415899999999906,pitch:173.48726713804393,noteMidi:53,actualMidi:52.89,actualMidiChroma:4.890000000000001,centsOffset:-10.999999999999943,clarity:.9916148206848874},{time:15.432600000000093,pitch:173.963511164248,noteMidi:53,actualMidi:52.94,actualMidiChroma:4.939999999999998,centsOffset:-6.000000000000227,clarity:.9896689706848463},{time:15.449300000000047,pitch:175.16036943900133,noteMidi:53,actualMidi:53.05,actualMidiChroma:5.049999999999997,centsOffset:4.999999999999716,clarity:.9907720181884017},{time:15.466,pitch:175.6584190101521,noteMidi:53,actualMidi:53.1,actualMidiChroma:5.100000000000001,centsOffset:10.000000000000142,clarity:.9921100629148185},{time:15.482600000000094,pitch:175.81819853608042,noteMidi:53,actualMidi:53.12,actualMidiChroma:5.119999999999997,centsOffset:11.999999999999744,clarity:.9900103829605271},{time:15.499199999999954,pitch:177.47569149438309,noteMidi:53,actualMidi:53.28,actualMidiChroma:5.280000000000001,centsOffset:28.000000000000114,clarity:.9821667798021849},{time:15.516,pitch:177.85746860743478,noteMidi:53,actualMidi:53.32,actualMidiChroma:5.32,centsOffset:32.00000000000003,clarity:.9822603927675857},{time:15.532600000000093,pitch:177.7305141963233,noteMidi:53,actualMidi:53.31,actualMidiChroma:5.310000000000002,centsOffset:31.000000000000227,clarity:.986045796150151},{time:15.549300000000047,pitch:177.92672222634016,noteMidi:53,actualMidi:53.33,actualMidiChroma:5.329999999999998,centsOffset:32.99999999999983,clarity:.9870553053559306},{time:15.565899999999907,pitch:178.9528408841786,noteMidi:53,actualMidi:53.42,actualMidiChroma:5.420000000000002,centsOffset:42.00000000000017,clarity:.979806463977944},{time:15.582600000000093,pitch:179.5221695955171,noteMidi:53,actualMidi:53.48,actualMidiChroma:5.479999999999997,centsOffset:47.99999999999969,clarity:.9771490056626959},{time:15.599199999999954,pitch:179.1673950280054,noteMidi:53,actualMidi:53.45,actualMidiChroma:5.450000000000003,centsOffset:45.000000000000284,clarity:.9825840230796743},{time:15.616,pitch:178.72440821034422,noteMidi:53,actualMidi:53.4,actualMidiChroma:5.399999999999999,centsOffset:39.99999999999986,clarity:.9866950393541387},{time:15.6325,pitch:179.30692986338647,noteMidi:53,actualMidi:53.46,actualMidiChroma:5.460000000000001,centsOffset:46.000000000000085,clarity:.9826147241884229},{time:15.649300000000046,pitch:180.47615780704726,noteMidi:54,actualMidi:53.57,actualMidiChroma:5.57,centsOffset:-42.99999999999997,clarity:.9736180940988106},{time:15.665899999999906,pitch:179.9556847611114,noteMidi:54,actualMidi:53.52,actualMidiChroma:5.520000000000003,centsOffset:-47.99999999999969,clarity:.9831329414000791},{time:15.682600000000093,pitch:179.89652600468818,noteMidi:54,actualMidi:53.52,actualMidiChroma:5.520000000000003,centsOffset:-47.99999999999969,clarity:.9840994032757209},{time:15.699199999999953,pitch:181.11645824795818,noteMidi:54,actualMidi:53.63,actualMidiChroma:5.630000000000003,centsOffset:-36.999999999999744,clarity:.975128993526809},{time:15.718300000000047,pitch:182.10848209627042,noteMidi:54,actualMidi:53.73,actualMidiChroma:5.729999999999997,centsOffset:-27.000000000000313,clarity:.9727933440239411},{time:15.732600000000094,pitch:181.68479145332344,noteMidi:54,actualMidi:53.69,actualMidiChroma:5.689999999999998,centsOffset:-31.000000000000227,clarity:.9787736678922485},{time:15.749300000000046,pitch:181.5577754482416,noteMidi:54,actualMidi:53.68,actualMidiChroma:5.68,centsOffset:-32.00000000000003,clarity:.9786507611462625},{time:15.765899999999906,pitch:182.36748846015303,noteMidi:54,actualMidi:53.75,actualMidiChroma:5.75,centsOffset:-25,clarity:.9712378016005658},{time:15.782600000000093,pitch:182.26210996180527,noteMidi:54,actualMidi:53.74,actualMidiChroma:5.740000000000002,centsOffset:-25.9999999999998,clarity:.9727220947547579},{time:15.799199999999953,pitch:180.82489419714184,noteMidi:54,actualMidi:53.61,actualMidiChroma:5.609999999999999,centsOffset:-39.00000000000006,clarity:.981265437623982},{time:15.815899999999907,pitch:181.78412403084377,noteMidi:54,actualMidi:53.7,actualMidiChroma:5.700000000000003,centsOffset:-29.999999999999716,clarity:.9740195968928731},{time:15.8325,pitch:182.14308730495148,noteMidi:54,actualMidi:53.73,actualMidiChroma:5.729999999999997,centsOffset:-27.000000000000313,clarity:.968022192538811},{time:15.849300000000046,pitch:181.0743062334016,noteMidi:54,actualMidi:53.63,actualMidiChroma:5.630000000000003,centsOffset:-36.999999999999744,clarity:.9794905094546493},{time:15.865899999999908,pitch:180.96524965056975,noteMidi:54,actualMidi:53.62,actualMidiChroma:5.619999999999997,centsOffset:-38.000000000000256,clarity:.9788311902833797},{time:15.882600000000092,pitch:181.22669918505758,noteMidi:54,actualMidi:53.64,actualMidiChroma:5.640000000000001,centsOffset:-35.99999999999994,clarity:.9780995164753676},{time:15.899199999999954,pitch:181.04540937765643,noteMidi:54,actualMidi:53.63,actualMidiChroma:5.630000000000003,centsOffset:-36.999999999999744,clarity:.9730196600587107},{time:15.915899999999906,pitch:179.37990877061884,noteMidi:53,actualMidi:53.47,actualMidiChroma:5.469999999999999,centsOffset:46.999999999999886,clarity:.9832734268029455},{time:15.932600000000093,pitch:179.1655569708442,noteMidi:53,actualMidi:53.45,actualMidiChroma:5.450000000000003,centsOffset:45.000000000000284,clarity:.9836109636626347},{time:15.949199999999953,pitch:179.7265060932876,noteMidi:54,actualMidi:53.5,actualMidiChroma:5.5,centsOffset:-50,clarity:.9772443902440102},{time:15.965899999999907,pitch:178.12473526829396,noteMidi:53,actualMidi:53.34,actualMidiChroma:5.340000000000003,centsOffset:34.00000000000034,clarity:.9786240854316546},{time:15.982600000000094,pitch:176.58710134283783,noteMidi:53,actualMidi:53.19,actualMidiChroma:5.189999999999998,centsOffset:18.999999999999773,clarity:.9862545657755959},{time:15.999199999999954,pitch:174.0578246980628,noteMidi:53,actualMidi:52.94,actualMidiChroma:4.939999999999998,centsOffset:-6.000000000000227,clarity:.9908591509370837},{time:16.015899999999906,pitch:172.57986228893117,noteMidi:53,actualMidi:52.8,actualMidiChroma:4.799999999999997,centsOffset:-20.000000000000284,clarity:.9911189512797094},{time:16.032600000000095,pitch:172.57715731370683,noteMidi:53,actualMidi:52.8,actualMidiChroma:4.799999999999997,centsOffset:-20.000000000000284,clarity:.9859343972285828},{time:16.051600000000093,pitch:172.6973310566844,noteMidi:53,actualMidi:52.81,actualMidiChroma:4.810000000000002,centsOffset:-18.999999999999773,clarity:.9831621103904382},{time:16.066,pitch:171.7537433769402,noteMidi:53,actualMidi:52.71,actualMidiChroma:4.710000000000001,centsOffset:-28.999999999999915,clarity:.9837132304895135},{time:16.08260000000009,pitch:171.18076907456629,noteMidi:53,actualMidi:52.66,actualMidiChroma:4.659999999999997,centsOffset:-34.00000000000034,clarity:.9873499495040079},{time:16.099199999999954,pitch:169.65290825954716,noteMidi:53,actualMidi:52.5,actualMidiChroma:4.5,centsOffset:-50,clarity:.9917157825764633},{time:16.115899999999908,pitch:169.08842489845517,noteMidi:52,actualMidi:52.44,actualMidiChroma:4.439999999999998,centsOffset:43.99999999999977,clarity:.9936791588650138},{time:16.1325,pitch:168.8543860482823,noteMidi:52,actualMidi:52.42,actualMidiChroma:4.420000000000002,centsOffset:42.00000000000017,clarity:.9943031374838256},{time:16.149199999999954,pitch:168.2533860507679,noteMidi:52,actualMidi:52.36,actualMidiChroma:4.359999999999999,centsOffset:35.99999999999994,clarity:.9943735297103089},{time:16.16589999999991,pitch:168.10895951079405,noteMidi:52,actualMidi:52.34,actualMidiChroma:4.340000000000003,centsOffset:34.00000000000034,clarity:.9950852633783995},{time:16.1825,pitch:167.88870429414325,noteMidi:52,actualMidi:52.32,actualMidiChroma:4.32,centsOffset:32.00000000000003,clarity:.9946549322413034},{time:16.199300000000047,pitch:167.5414404316285,noteMidi:52,actualMidi:52.28,actualMidiChroma:4.280000000000001,centsOffset:28.000000000000114,clarity:.9943736488862456},{time:16.215899999999905,pitch:167.39093757729333,noteMidi:52,actualMidi:52.27,actualMidiChroma:4.270000000000003,centsOffset:27.000000000000313,clarity:.9929152654336022},{time:16.232600000000094,pitch:167.04477240607747,noteMidi:52,actualMidi:52.23,actualMidiChroma:4.229999999999997,centsOffset:22.999999999999687,clarity:.9924381580804322},{time:16.249300000000048,pitch:166.9030006274428,noteMidi:52,actualMidi:52.22,actualMidiChroma:4.219999999999999,centsOffset:21.999999999999886,clarity:.9918287158560517},{time:16.265899999999906,pitch:166.64922107662372,noteMidi:52,actualMidi:52.19,actualMidiChroma:4.189999999999998,centsOffset:18.999999999999773,clarity:.9901634557768375},{time:16.282600000000095,pitch:166.52317812132702,noteMidi:52,actualMidi:52.18,actualMidiChroma:4.18,centsOffset:17.99999999999997,clarity:.9897762314990715},{time:16.299300000000045,pitch:166.55574962002436,noteMidi:52,actualMidi:52.18,actualMidiChroma:4.18,centsOffset:17.99999999999997,clarity:.9882995059442337},{time:16.315899999999907,pitch:166.14069773425553,noteMidi:52,actualMidi:52.14,actualMidiChroma:4.140000000000001,centsOffset:14.000000000000057,clarity:.9867146377900795},{time:16.33260000000009,pitch:166.4010516945281,noteMidi:52,actualMidi:52.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.9872918224744964},{time:16.349199999999954,pitch:165.81423696109044,noteMidi:52,actualMidi:52.1,actualMidiChroma:4.100000000000001,centsOffset:10.000000000000142,clarity:.9845739560435618},{time:16.366,pitch:165.89841010934978,noteMidi:52,actualMidi:52.11,actualMidiChroma:4.109999999999999,centsOffset:10.999999999999943,clarity:.9830363592428384},{time:16.385,pitch:166.07727465239654,noteMidi:52,actualMidi:52.13,actualMidiChroma:4.130000000000003,centsOffset:13.000000000000256,clarity:.9809857788645502},{time:16.399199999999954,pitch:165.7760672219568,noteMidi:52,actualMidi:52.1,actualMidiChroma:4.100000000000001,centsOffset:10.000000000000142,clarity:.9799340897605404},{time:16.41589999999991,pitch:165.95531350853008,noteMidi:52,actualMidi:52.12,actualMidiChroma:4.119999999999997,centsOffset:11.999999999999744,clarity:.9792327503982392},{time:16.4325,pitch:165.69011936094003,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9779035418244106},{time:16.449199999999955,pitch:166.03583863829118,noteMidi:52,actualMidi:52.13,actualMidiChroma:4.130000000000003,centsOffset:13.000000000000256,clarity:.9781225427776121},{time:16.465899999999905,pitch:165.35493338383029,noteMidi:52,actualMidi:52.06,actualMidiChroma:4.060000000000002,centsOffset:6.000000000000227,clarity:.975252786098352},{time:16.482600000000094,pitch:165.99540945817478,noteMidi:52,actualMidi:52.12,actualMidiChroma:4.119999999999997,centsOffset:11.999999999999744,clarity:.974701476490111},{time:16.499300000000048,pitch:165.2762453195656,noteMidi:52,actualMidi:52.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.9733510664492329},{time:16.515899999999906,pitch:165.62961527079156,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9730420622325511},{time:16.532600000000095,pitch:165.0826041311463,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9723120499144926},{time:16.549199999999953,pitch:165.59348400504587,noteMidi:52,actualMidi:52.08,actualMidiChroma:4.079999999999998,centsOffset:7.9999999999998295,clarity:.9703490821784655},{time:16.565899999999907,pitch:164.9925357453912,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.969573980743391},{time:16.58260000000009,pitch:165.40895280035508,noteMidi:52,actualMidi:52.06,actualMidiChroma:4.060000000000002,centsOffset:6.000000000000227,clarity:.9714670973299491},{time:16.599199999999954,pitch:164.6091744737456,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9695280051537978},{time:16.615899999999908,pitch:164.74234044580953,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9714951260245854},{time:16.632600000000092,pitch:164.2763204116287,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9689488776002051},{time:16.649300000000046,pitch:164.52003772077492,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9715520733761238},{time:16.66589999999991,pitch:164.31221103783005,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9732129306843973},{time:16.682600000000093,pitch:164.50513720389506,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9739552509479736},{time:16.699199999999955,pitch:164.08311359632793,noteMidi:52,actualMidi:51.92,actualMidiChroma:3.9200000000000017,centsOffset:-7.9999999999998295,clarity:.9749666715345526},{time:16.718199999999953,pitch:164.493114738392,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.97298635220492},{time:16.732600000000094,pitch:164.2812436673432,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.97418951544973},{time:16.749199999999952,pitch:164.70486357217123,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9748809594906476},{time:16.765899999999906,pitch:164.32320486302282,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9744087512066173},{time:16.782600000000095,pitch:164.8442799201956,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9757426113209533},{time:16.799199999999953,pitch:163.98532547859693,noteMidi:52,actualMidi:51.91,actualMidiChroma:3.9099999999999966,centsOffset:-9.000000000000341,clarity:.9749200377585439},{time:16.815800000000046,pitch:164.43892121743576,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9777309271296843},{time:16.8325,pitch:163.97845924960347,noteMidi:52,actualMidi:51.91,actualMidiChroma:3.9099999999999966,centsOffset:-9.000000000000341,clarity:.9776095106905132},{time:16.849300000000046,pitch:164.3025656584806,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9789039412166431},{time:16.865899999999908,pitch:163.88619311270043,noteMidi:52,actualMidi:51.9,actualMidiChroma:3.8999999999999986,centsOffset:-10.000000000000142,clarity:.9789124387957031},{time:16.882600000000092,pitch:164.5972019494292,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9765877996930215},{time:16.899300000000046,pitch:164.16604024716332,noteMidi:52,actualMidi:51.93,actualMidiChroma:3.9299999999999997,centsOffset:-7.000000000000028,clarity:.9745155261679557},{time:16.91589999999991,pitch:164.42141677570973,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9719924726658604},{time:16.9325,pitch:164.2823726393027,noteMidi:52,actualMidi:51.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9706357914766883},{time:16.949199999999955,pitch:164.9310903712281,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9685338288299477},{time:16.965899999999905,pitch:163.97034415772086,noteMidi:52,actualMidi:51.91,actualMidiChroma:3.9099999999999966,centsOffset:-9.000000000000341,clarity:.964452584747292},{time:16.982600000000094,pitch:164.9828934533351,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9655245442445519},{time:16.999199999999952,pitch:163.47886469388828,noteMidi:52,actualMidi:51.86,actualMidiChroma:3.8599999999999994,centsOffset:-14.000000000000057,clarity:.9650959486634463},{time:17.016,pitch:164.40767478547127,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9650638561715112},{time:17.032600000000095,pitch:164.1138124977332,noteMidi:52,actualMidi:51.93,actualMidiChroma:3.9299999999999997,centsOffset:-7.000000000000028,clarity:.9590824975024361},{time:17.051600000000093,pitch:164.78423332122753,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9484419636517885},{time:17.066,pitch:163.97846169559966,noteMidi:52,actualMidi:51.91,actualMidiChroma:3.9099999999999966,centsOffset:-9.000000000000341,clarity:.93807170864455},{time:17.08260000000009,pitch:165.17572554039168,noteMidi:52,actualMidi:52.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.9321226597723253},{time:17.099300000000046,pitch:164.38572972521004,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9164446683576486},{time:17.115899999999908,pitch:165.1442444149234,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9054764180555992},{time:17.132399999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.149,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.165699999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.182399999999905,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.199100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.215699999999952,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.232399999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.249100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.265699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.282399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.29910000000009,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.315800000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.332399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.349,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.365699999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.384800000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.399,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.415699999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.432399999999905,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.449100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.465800000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.4825,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.499100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.515699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.532399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.549,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.565699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.582399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.599,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.615800000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.632399999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.649,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.665800000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.682399999999905,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:17.699199999999955,pitch:164.57998956916842,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.7727720442789803},{time:17.718300000000045,pitch:164.47721978676518,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9246529358668312},{time:17.7325,pitch:164.45578935925158,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9969270385712719},{time:17.749199999999952,pitch:164.4149330328975,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9996402448748398},{time:17.765899999999906,pitch:164.44192272643383,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9996589550079591},{time:17.7825,pitch:164.4825083325738,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9996502675211758},{time:17.799199999999953,pitch:164.55517540086996,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9996484187045525},{time:17.815899999999907,pitch:164.88169234767184,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9995704376009229},{time:17.8325,pitch:165.10641321497263,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9994829198074342},{time:17.849300000000046,pitch:165.6676152815397,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9992742112508068},{time:17.865899999999908,pitch:166.4060070391678,noteMidi:52,actualMidi:52.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.999037556667389},{time:17.8825,pitch:166.91940569218582,noteMidi:52,actualMidi:52.22,actualMidiChroma:4.219999999999999,centsOffset:21.999999999999886,clarity:.9990396778874029},{time:17.899199999999954,pitch:167.96361774512616,noteMidi:52,actualMidi:52.33,actualMidiChroma:4.329999999999998,centsOffset:32.99999999999983,clarity:.998317130348795},{time:17.91589999999991,pitch:169.23796065493778,noteMidi:52,actualMidi:52.46,actualMidiChroma:4.460000000000001,centsOffset:46.000000000000085,clarity:.9977794218778726},{time:17.932600000000093,pitch:170.06654866910802,noteMidi:53,actualMidi:52.54,actualMidiChroma:4.539999999999999,centsOffset:-46.000000000000085,clarity:.997127260606419},{time:17.949199999999955,pitch:172.25072570902444,noteMidi:53,actualMidi:52.76,actualMidiChroma:4.759999999999998,centsOffset:-24.0000000000002,clarity:.9943001882427893},{time:17.965899999999905,pitch:173.7199575445278,noteMidi:53,actualMidi:52.91,actualMidiChroma:4.909999999999997,centsOffset:-9.000000000000341,clarity:.9961581555997299},{time:17.9825,pitch:173.91781227503608,noteMidi:53,actualMidi:52.93,actualMidiChroma:4.93,centsOffset:-7.000000000000028,clarity:.9968169905550468},{time:17.999300000000048,pitch:173.88446138127503,noteMidi:53,actualMidi:52.93,actualMidiChroma:4.93,centsOffset:-7.000000000000028,clarity:.9965775740244567},{time:18.015899999999906,pitch:173.63387104701584,noteMidi:53,actualMidi:52.9,actualMidiChroma:4.899999999999999,centsOffset:-10.000000000000142,clarity:.9966155610723106},{time:18.032600000000095,pitch:172.78384867194669,noteMidi:53,actualMidi:52.82,actualMidiChroma:4.82,centsOffset:-17.99999999999997,clarity:.9951105908396514},{time:18.051100000000094,pitch:170.08775804537447,noteMidi:53,actualMidi:52.55,actualMidiChroma:4.549999999999997,centsOffset:-45.000000000000284,clarity:.9916798371994133},{time:18.066,pitch:166.86389856475975,noteMidi:52,actualMidi:52.21,actualMidiChroma:4.210000000000001,centsOffset:21.000000000000085,clarity:.9957191318935585},{time:18.0825,pitch:165.98736315145183,noteMidi:52,actualMidi:52.12,actualMidiChroma:4.119999999999997,centsOffset:11.999999999999744,clarity:.9981692907414512},{time:18.099199999999954,pitch:164.88311284756796,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9992467871283992},{time:18.115899999999908,pitch:164.51474133474554,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9994753958775817},{time:18.1325,pitch:164.45115317740897,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9996266073228526},{time:18.149100000000093,pitch:164.43862086254407,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9995002523822976},{time:18.16589999999991,pitch:164.48732682994628,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9995730223335499},{time:18.182600000000093,pitch:164.63361382583108,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9995562954528978},{time:18.199199999999955,pitch:165.14742332810414,noteMidi:52,actualMidi:52.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.9990159644724628},{time:18.215899999999905,pitch:166.62436970045832,noteMidi:52,actualMidi:52.19,actualMidiChroma:4.189999999999998,centsOffset:18.999999999999773,clarity:.9974683968552043},{time:18.232399999999906,pitch:167.66486934881792,noteMidi:52,actualMidi:52.3,actualMidiChroma:4.299999999999997,centsOffset:29.999999999999716,clarity:.9975439322931408},{time:18.249199999999952,pitch:169.72913251036255,noteMidi:53,actualMidi:52.51,actualMidiChroma:4.509999999999998,centsOffset:-49.0000000000002,clarity:.9952223978808945},{time:18.265800000000045,pitch:172.46704755161718,noteMidi:53,actualMidi:52.79,actualMidiChroma:4.789999999999999,centsOffset:-21.000000000000085,clarity:.9865751326285022},{time:18.282600000000095,pitch:173.73037148108455,noteMidi:53,actualMidi:52.91,actualMidiChroma:4.909999999999997,centsOffset:-9.000000000000341,clarity:.9851265790425643},{time:18.299199999999953,pitch:174.84464473761142,noteMidi:53,actualMidi:53.02,actualMidiChroma:5.020000000000003,centsOffset:2.0000000000003126,clarity:.9857757586510871},{time:18.315800000000046,pitch:174.2640528707011,noteMidi:53,actualMidi:52.97,actualMidiChroma:4.969999999999999,centsOffset:-3.0000000000001137,clarity:.9883993225014152},{time:18.3325,pitch:173.98260702768584,noteMidi:53,actualMidi:52.94,actualMidiChroma:4.939999999999998,centsOffset:-6.000000000000227,clarity:.9910026034929444},{time:18.349300000000046,pitch:171.74792071135678,noteMidi:53,actualMidi:52.71,actualMidiChroma:4.710000000000001,centsOffset:-28.999999999999915,clarity:.9902939780493085},{time:18.365899999999908,pitch:168.67651283378117,noteMidi:52,actualMidi:52.4,actualMidiChroma:4.399999999999999,centsOffset:39.99999999999986,clarity:.9929500045224557},{time:18.384899999999906,pitch:166.13627783624412,noteMidi:52,actualMidi:52.14,actualMidiChroma:4.140000000000001,centsOffset:14.000000000000057,clarity:.9977212136227536},{time:18.399199999999954,pitch:165.7675233679335,noteMidi:52,actualMidi:52.1,actualMidiChroma:4.100000000000001,centsOffset:10.000000000000142,clarity:.998050684530206},{time:18.41589999999991,pitch:164.735494526045,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9988547892763933},{time:18.4325,pitch:164.67257705113946,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.99905210500593},{time:18.449199999999955,pitch:164.5490994686062,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9995279523206548},{time:18.465800000000048,pitch:164.71409764890294,noteMidi:52,actualMidi:51.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9995310718626484},{time:18.482600000000094,pitch:164.76666142715274,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9994748400759903},{time:18.499199999999952,pitch:165.66144596266213,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9986019406279709},{time:18.515899999999906,pitch:167.13261781341328,noteMidi:52,actualMidi:52.24,actualMidiChroma:4.240000000000002,centsOffset:24.0000000000002,clarity:.9974949761015992},{time:18.5325,pitch:168.1067615925246,noteMidi:52,actualMidi:52.34,actualMidiChroma:4.340000000000003,centsOffset:34.00000000000034,clarity:.9972864128409924},{time:18.549300000000045,pitch:170.04599456947807,noteMidi:53,actualMidi:52.54,actualMidiChroma:4.539999999999999,centsOffset:-46.000000000000085,clarity:.9934944731182185},{time:18.565800000000046,pitch:172.06570133883574,noteMidi:53,actualMidi:52.75,actualMidiChroma:4.75,centsOffset:-25,clarity:.984860053159224},{time:18.5825,pitch:173.29296687972533,noteMidi:53,actualMidi:52.87,actualMidiChroma:4.869999999999997,centsOffset:-13.000000000000256,clarity:.9807336000324796},{time:18.599199999999954,pitch:172.9932802447196,noteMidi:53,actualMidi:52.84,actualMidiChroma:4.840000000000003,centsOffset:-15.999999999999659,clarity:.9799297298676635},{time:18.615899999999908,pitch:171.36492150324185,noteMidi:53,actualMidi:52.67,actualMidiChroma:4.670000000000002,centsOffset:-32.99999999999983,clarity:.9897893074874844},{time:18.6325,pitch:170.14980006791941,noteMidi:53,actualMidi:52.55,actualMidiChroma:4.549999999999997,centsOffset:-45.000000000000284,clarity:.9910362643511021},{time:18.649199999999954,pitch:167.44384117714105,noteMidi:52,actualMidi:52.27,actualMidiChroma:4.270000000000003,centsOffset:27.000000000000313,clarity:.993051792624172},{time:18.665800000000047,pitch:165.22582272657877,noteMidi:52,actualMidi:52.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.9981739872805448},{time:18.6825,pitch:164.78879069527054,noteMidi:52,actualMidi:52,actualMidiChroma:4,centsOffset:0,clarity:.9983012373363778},{time:18.699199999999955,pitch:164.32625733635055,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9991416024744311},{time:18.718300000000045,pitch:164.3903231521565,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.999189560110139},{time:18.732600000000094,pitch:164.46385047142346,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9990973850110692},{time:18.749199999999952,pitch:164.53049698340166,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9988266088829292},{time:18.765899999999906,pitch:164.92667230794933,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9984491645588633},{time:18.7825,pitch:165.30675676679945,noteMidi:52,actualMidi:52.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.997597406277599},{time:18.799199999999953,pitch:166.90761095332266,noteMidi:52,actualMidi:52.22,actualMidiChroma:4.219999999999999,centsOffset:21.999999999999886,clarity:.9969923746601381},{time:18.815800000000046,pitch:168.73573424861826,noteMidi:52,actualMidi:52.41,actualMidiChroma:4.409999999999997,centsOffset:40.99999999999966,clarity:.9961034421286357},{time:18.832399999999907,pitch:169.6041950565177,noteMidi:53,actualMidi:52.5,actualMidiChroma:4.5,centsOffset:-50,clarity:.9962297700892222},{time:18.849199999999954,pitch:170.57338648094893,noteMidi:53,actualMidi:52.59,actualMidiChroma:4.590000000000003,centsOffset:-40.99999999999966,clarity:.9943968837526143},{time:18.865899999999908,pitch:171.31291330076056,noteMidi:53,actualMidi:52.67,actualMidiChroma:4.670000000000002,centsOffset:-32.99999999999983,clarity:.9891469652018898},{time:18.8825,pitch:171.22883686892695,noteMidi:53,actualMidi:52.66,actualMidiChroma:4.659999999999997,centsOffset:-34.00000000000034,clarity:.9869853479615216},{time:18.899199999999954,pitch:170.27383423140733,noteMidi:53,actualMidi:52.56,actualMidiChroma:4.560000000000002,centsOffset:-43.99999999999977,clarity:.9775011954684771},{time:18.915800000000047,pitch:167.71592374224616,noteMidi:52,actualMidi:52.3,actualMidiChroma:4.299999999999997,centsOffset:29.999999999999716,clarity:.9812556826286993},{time:18.932600000000093,pitch:166.22138186738889,noteMidi:52,actualMidi:52.15,actualMidiChroma:4.149999999999999,centsOffset:14.999999999999858,clarity:.9887732968119707},{time:18.949199999999955,pitch:164.8982681101341,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9948917420969394},{time:18.965899999999905,pitch:164.55115053891606,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9966348282612216},{time:18.9825,pitch:164.4735597470431,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9964157800242077},{time:18.999199999999952,pitch:164.55622824203806,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9965722272201418},{time:19.015899999999906,pitch:164.92072315029398,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9957028177327061},{time:19.032600000000095,pitch:165.33281593048216,noteMidi:52,actualMidi:52.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.9935828708774466},{time:19.049399999999906,pitch:166.9967368371517,noteMidi:52,actualMidi:52.23,actualMidiChroma:4.229999999999997,centsOffset:22.999999999999687,clarity:.9881827871475082},{time:19.065899999999907,pitch:168.95780132726878,noteMidi:52,actualMidi:52.43,actualMidiChroma:4.43,centsOffset:42.99999999999997,clarity:.9902845598306982},{time:19.0825,pitch:169.40737836787082,noteMidi:52,actualMidi:52.48,actualMidiChroma:4.479999999999997,centsOffset:47.99999999999969,clarity:.9867912160503352},{time:19.099100000000092,pitch:170.44965854250455,noteMidi:53,actualMidi:52.58,actualMidiChroma:4.579999999999998,centsOffset:-42.00000000000017,clarity:.9849351718486687},{time:19.115800000000046,pitch:170.29193324934093,noteMidi:53,actualMidi:52.57,actualMidiChroma:4.57,centsOffset:-42.99999999999997,clarity:.9899208990849857},{time:19.1325,pitch:169.68642079390094,noteMidi:53,actualMidi:52.5,actualMidiChroma:4.5,centsOffset:-50,clarity:.9930653730752823},{time:19.149199999999954,pitch:167.49688798620843,noteMidi:52,actualMidi:52.28,actualMidiChroma:4.280000000000001,centsOffset:28.000000000000114,clarity:.9955527264094499},{time:19.16589999999991,pitch:165.679074452243,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.997882574260359},{time:19.1825,pitch:165.01335564073892,noteMidi:52,actualMidi:52.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.9981803240697786},{time:19.199199999999955,pitch:164.51865397590194,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.998665138074692},{time:19.215800000000048,pitch:164.4397190427387,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9985661489071589},{time:19.2325,pitch:164.4685504202222,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.9985983274136956},{time:19.249199999999952,pitch:164.56773279425377,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9980672886831776},{time:19.265800000000045,pitch:165.8627174266473,noteMidi:52,actualMidi:52.11,actualMidiChroma:4.109999999999999,centsOffset:10.999999999999943,clarity:.9970910370976291},{time:19.282600000000095,pitch:166.3648561719326,noteMidi:52,actualMidi:52.16,actualMidiChroma:4.159999999999997,centsOffset:15.999999999999659,clarity:.9959837252060488},{time:19.299199999999953,pitch:168.47476615320636,noteMidi:52,actualMidi:52.38,actualMidiChroma:4.380000000000003,centsOffset:38.000000000000256,clarity:.9943038072476327},{time:19.315800000000046,pitch:169.94072689004724,noteMidi:53,actualMidi:52.53,actualMidiChroma:4.530000000000001,centsOffset:-46.999999999999886,clarity:.9912736468743546},{time:19.3325,pitch:170.76862209908052,noteMidi:53,actualMidi:52.61,actualMidiChroma:4.609999999999999,centsOffset:-39.00000000000006,clarity:.9860803610243991},{time:19.349100000000092,pitch:172.89948735302,noteMidi:53,actualMidi:52.83,actualMidiChroma:4.829999999999998,centsOffset:-17.00000000000017,clarity:.9638011170199903},{time:19.365800000000046,pitch:173.0498734715289,noteMidi:53,actualMidi:52.84,actualMidiChroma:4.840000000000003,centsOffset:-15.999999999999659,clarity:.9571045928507687},{time:19.384699999999953,pitch:170.79729802886033,noteMidi:53,actualMidi:52.62,actualMidiChroma:4.619999999999997,centsOffset:-38.000000000000256,clarity:.9668708445818055},{time:19.399100000000093,pitch:169.4903012884934,noteMidi:52,actualMidi:52.48,actualMidiChroma:4.479999999999997,centsOffset:47.99999999999969,clarity:.9653903824279766},{time:19.41589999999991,pitch:166.36512838538366,noteMidi:52,actualMidi:52.16,actualMidiChroma:4.159999999999997,centsOffset:15.999999999999659,clarity:.9848366052161452},{time:19.4325,pitch:165.2705057508452,noteMidi:52,actualMidi:52.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.9935585702064742},{time:19.449199999999955,pitch:164.56252860615638,noteMidi:52,actualMidi:51.97,actualMidiChroma:3.969999999999999,centsOffset:-3.0000000000001137,clarity:.9968436529344586},{time:19.465899999999905,pitch:164.47170713626528,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.998098569218655},{time:19.4825,pitch:164.36083845120723,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9978143175691159},{time:19.499199999999952,pitch:164.9048148927852,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9974313589979005},{time:19.515800000000045,pitch:165.74402273235313,noteMidi:52,actualMidi:52.1,actualMidiChroma:4.100000000000001,centsOffset:10.000000000000142,clarity:.9955778571276994},{time:19.5325,pitch:166.50940026992177,noteMidi:52,actualMidi:52.18,actualMidiChroma:4.18,centsOffset:17.99999999999997,clarity:.9951580883332056},{time:19.549199999999953,pitch:167.994426537849,noteMidi:52,actualMidi:52.33,actualMidiChroma:4.329999999999998,centsOffset:32.99999999999983,clarity:.9940050512762646},{time:19.565800000000046,pitch:168.96705826010216,noteMidi:52,actualMidi:52.43,actualMidiChroma:4.43,centsOffset:42.99999999999997,clarity:.9928928361282168},{time:19.5825,pitch:168.94884520002324,noteMidi:52,actualMidi:52.43,actualMidiChroma:4.43,centsOffset:42.99999999999997,clarity:.9943650482001516},{time:19.599199999999954,pitch:169.18202330666264,noteMidi:52,actualMidi:52.45,actualMidiChroma:4.450000000000003,centsOffset:45.000000000000284,clarity:.9926188576843415},{time:19.615800000000046,pitch:168.0969240532466,noteMidi:52,actualMidi:52.34,actualMidiChroma:4.340000000000003,centsOffset:34.00000000000034,clarity:.988447193970373},{time:19.6325,pitch:167.40196788959187,noteMidi:52,actualMidi:52.27,actualMidiChroma:4.270000000000003,centsOffset:27.000000000000313,clarity:.9858606810899531},{time:19.649199999999954,pitch:165.71655037734524,noteMidi:52,actualMidi:52.09,actualMidiChroma:4.090000000000003,centsOffset:9.000000000000341,clarity:.9914006918700835},{time:19.665800000000047,pitch:164.88612499065755,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9952268350780074},{time:19.6825,pitch:165.11697692775184,noteMidi:52,actualMidi:52.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9955985416050908},{time:19.699300000000047,pitch:164.92967109458556,noteMidi:52,actualMidi:52.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.9936953873331547},{time:19.718199999999953,pitch:165.8139785784379,noteMidi:52,actualMidi:52.1,actualMidiChroma:4.100000000000001,centsOffset:10.000000000000142,clarity:.9893994698099462},{time:19.732600000000094,pitch:166.01761581422676,noteMidi:52,actualMidi:52.13,actualMidiChroma:4.130000000000003,centsOffset:13.000000000000256,clarity:.986286924307457},{time:19.749199999999952,pitch:168.1032622945923,noteMidi:52,actualMidi:52.34,actualMidiChroma:4.340000000000003,centsOffset:34.00000000000034,clarity:.9799163663223496},{time:19.765899999999906,pitch:169.976861329392,noteMidi:53,actualMidi:52.53,actualMidiChroma:4.530000000000001,centsOffset:-46.999999999999886,clarity:.9757273795520405},{time:19.782300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:19.799,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:19.815699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:19.832300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:19.849199999999954,pitch:165.27472527472528,noteMidi:52,actualMidi:52.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.9815936240744065},{time:19.865800000000046,pitch:164.66410132903746,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9938913691267004},{time:19.8825,pitch:164.36341042779847,noteMidi:52,actualMidi:51.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.9949264360666135},{time:19.899199999999954,pitch:164.6708455564373,noteMidi:52,actualMidi:51.98,actualMidiChroma:3.979999999999997,centsOffset:-2.0000000000003126,clarity:.9956311543627621},{time:19.915699999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:19.932300000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:19.949100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:19.965800000000048,pitch:167.87580053135977,noteMidi:52,actualMidi:52.32,actualMidiChroma:4.32,centsOffset:32.00000000000003,clarity:.991443034661522},{time:19.9825,pitch:168.3522347794266,noteMidi:52,actualMidi:52.37,actualMidiChroma:4.369999999999997,centsOffset:36.999999999999744,clarity:.9922386423190233},{time:19.999199999999952,pitch:169.03958168031645,noteMidi:52,actualMidi:52.44,actualMidiChroma:4.439999999999998,centsOffset:43.99999999999977,clarity:.9900293494549324},{time:20.015800000000045,pitch:169.0567393273612,noteMidi:52,actualMidi:52.44,actualMidiChroma:4.439999999999998,centsOffset:43.99999999999977,clarity:.9832601877331157},{time:20.0325,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.05139999999991,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.065699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.082300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.099100000000092,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.115699999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.132300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.149,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.165699999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.182399999999905,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.199,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.215600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.232399999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.249,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.265699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.282399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.299,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.315699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.332300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.349,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.368100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.382399999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.399,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.415699999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.432300000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.449,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.465699999999952,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.482300000000045,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.499100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.51560000000009,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.532399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.549,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.565699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.582399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.599,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.615600000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.632300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.649,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.665699999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.682399999999905,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.7015,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.715699999999952,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.732399999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.749,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.765699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.782300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.799,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.815699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.832399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.849100000000092,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.865699999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.882300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.899,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.915600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.932300000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.949,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.965699999999952,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.982399999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:20.999,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.015699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.0345,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.049,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.065600000000092,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.082399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.099,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.115699999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.132300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.149,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.165699999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.182300000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.199,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.215600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.232300000000045,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.249100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.265699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.282300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.29910000000009,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.315699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.332300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.349,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.365699999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.382399999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.399,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.415699999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.432399999999905,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.449,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.465699999999952,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.482399999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.499199999999952,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.515699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.532300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.54910000000009,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.565699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.582399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.599,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.615699999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.632399999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.649,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.665699999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.684300000000047,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.699199999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.715600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.732300000000045,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.749,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.765699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.782399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.799,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.815699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.832300000000046,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.849,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.865699999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.882399999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.899199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.915600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.932300000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.949100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.965699999999952,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:21.982300000000045,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.001199999999955,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.015699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.032399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.049,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.065699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.082399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.099199999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.115699999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.132399999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.149100000000093,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.165600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.182300000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.199100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.215699999999952,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.232399999999906,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.249,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.265699999999953,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.282399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.299,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.318100000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.332399999999907,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.349,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.365699999999954,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.382399999999908,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.399,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.415600000000094,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.432300000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.449,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:22.465800000000048,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0}],y0e="pitch-bend-audio",b0e="2024-07-03T13:38:52.148Z",M0e={pastTime:m0e,firstTimeStamp:p0e,minVolumeDecibels:g0e,ignoreOctave:A0e,bendValues:v0e,_demoId:y0e,_date:b0e};function _0e(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d=e[4]?"play":"pause",A,p,v,g,y,E,_,S,x,C,w,T,O=(e[7]?Kr:Xr)+"",B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe;function ye(Ee){e[24](Ee)}let we={saveToStorage:e[15],callback:e[23]};return e[9]!==void 0&&(we.notes=e[9]),H=new Ts({props:we}),En.push(()=>Di(H,"notes",ye)),Q=new es({props:{getExportData:e[13],demoId:e[0].id}}),K=new ts({props:{loadData:e[14]}}),ge=new ns({props:{demoId:e[0].id,loadData:e[14]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Allow microphone access and play pitch bends or vibratos. The line chart
        below shows how far you bend up and down over time.`,u=ue(),m=ie("div"),c=ie("button"),A=ze(d),p=ue(),v=ie("label"),g=ze(`past seconds
            `),y=ie("input"),E=ue(),_=ie("label"),S=ze(`min. decibels
            `),x=ie("input"),C=ue(),w=ie("button"),T=ze("octave "),B=ze(O),P=ue(),L=ie("button"),L.textContent="resume",N=ue(),F=ie("div"),z=ue(),G=ie("div"),gt(H.$$.fragment),q=ue(),gt(Q.$$.fragment),k=ue(),gt(K.$$.fragment),W=ue(),J=ie("button"),J.textContent="example",se=ue(),gt(ge.$$.fragment),de(h,"class","explanation"),Ei(c,"width","75px"),de(y,"type","number"),de(y,"min","5"),de(y,"max","60"),de(y,"step","5"),de(x,"type","number"),de(x,"min","-40"),de(x,"max","-5"),de(x,"step","5"),de(_,"title","The minimum loudness in decibels for a sound to be registered as input. Lower means fainter notes will be registered but there will be more noise such as octave errors."),de(w,"title","When ignoring the octave, the lower visualization will only show the note's chroma from C to B"),de(L,"title","Press this button if your browser prevents audio access because there needs to be a user interaction first"),de(m,"class","control"),de(F,"class","visualization"),de(G,"class","control"),de(t,"class","demo")},m(Ee,He){Rt(Ee,t,He),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,A),D(m,p),D(m,v),D(v,g),D(v,y),rn(y,e[6]),D(m,E),D(m,_),D(_,S),D(_,x),rn(x,e[8]),D(m,C),D(m,w),D(w,T),D(w,B),D(m,P),D(m,L),D(t,N),D(t,F),e[22](F),D(t,z),D(t,G),ft(H,G,null),D(G,q),ft(Q,G,null),D(G,k),ft(K,G,null),D(G,W),D(G,J),D(G,se),ft(ge,G,null),fe=!0,me||(xe=[nt(c,"click",e[16]),nt(y,"input",e[17]),nt(y,"change",e[11]),nt(x,"input",e[18]),nt(x,"change",e[19]),nt(w,"click",e[20]),nt(L,"click",e[21]),nt(J,"click",e[25])],me=!0)},p(Ee,[He]){(!fe||He&1)&&r!==(r=Ee[0].title+"")&&Ht(a,r),(!fe||He&16)&&d!==(d=Ee[4]?"play":"pause")&&Ht(A,d),He&64&&$n(y.value)!==Ee[6]&&rn(y,Ee[6]),He&256&&$n(x.value)!==Ee[8]&&rn(x,Ee[8]),(!fe||He&128)&&O!==(O=(Ee[7]?Kr:Xr)+"")&&Ht(B,O);const Ae={};He&32&&(Ae.callback=Ee[23]),!j&&He&512&&(j=!0,Ae.notes=Ee[9],Oi(()=>j=!1)),H.$set(Ae);const Ke={};He&1&&(Ke.demoId=Ee[0].id),Q.$set(Ke);const Ue={};He&1&&(Ue.demoId=Ee[0].id),ge.$set(Ue)},i(Ee){fe||(ut(H.$$.fragment,Ee),ut(Q.$$.fragment,Ee),ut(K.$$.fragment,Ee),ut(ge.$$.fragment,Ee),fe=!0)},o(Ee){ht(H.$$.fragment,Ee),ht(Q.$$.fragment,Ee),ht(K.$$.fragment,Ee),ht(ge.$$.fragment,Ee),fe=!1},d(Ee){Ee&&Bt(t),e[22](null),mt(H),mt(Q),mt(K),mt(ge),me=!1,Vi(xe)}}}let C0e=1200,E0e=500;const w0e=16;function x0e(e,t,i){let{demoInfo:r}=t,a,o,h,u,m=!1,c=performance.now(),d=new window.AudioContext,A=10,p=!0,v=-20,g=[],y=0;function E(j,q){o.getFloatTimeDomainData(j);const Q=h.findPitch(j,q),k=Q[0],K=Q[1],W=xs.fromFreq(k),J=xs.midi(W),se=f0.freqToMidi(k),ge=(se-J)*100,me={time:(performance.now()-c)/1e3,pitch:k,noteMidi:J,actualMidi:se,actualMidiChroma:se%12,centsOffset:ge,clarity:K};g.push(me),_(),i(3,u=requestAnimationFrame(()=>E(j,q)))}const _=()=>{if(!a)return;i(1,a.textContent="",a);let j;g.length>0?j=g.at(-1).time:j=(performance.now()-c)/1e3;const q=j-A,Q=1e3/w0e;let k=Math.round(Hf(g.slice(-Q),J=>J.actualMidi));isNaN(k)?k=y:y=k;const K=J=>Math.floor(J)===J?f0.midiToNoteName(J,{pitchClass:p,sharps:!0}):"",W=lr({width:C0e,height:E0e,marginBottom:50,padding:0,x:{domain:[q,j],label:"time in seconds"},y:{domain:p?[0,12]:[k-5,k+5],label:p?"chroma":"pitch",grid:!0},marks:[gA(g,{x:"time",y:p?"actualMidiChroma":"actualMidi",clip:!0,curve:"basis"}),lu({anchor:"left",tickFormat:K}),lu({anchor:"right",tickFormat:K})]});a.appendChild(W)},S=()=>{o=d.createAnalyser(),navigator.mediaDevices.getUserMedia({audio:!0}).then(j=>{d.createMediaStreamSource(j).connect(o),i(2,h=eu.forFloat32Array(o.fftSize)),i(2,h.minVolumeDecibels=v,h);const q=new Float32Array(h.inputLength);E(q,d.sampleRate)}),_()};ur(S);const x=()=>({pastTime:A,firstTimeStamp:c,minVolumeDecibels:v,ignoreOctave:p,bendValues:g}),C=j=>{(g.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(i(4,m=!0),cancelAnimationFrame(u),g.length>0&&w(),i(6,A=j.pastTime),i(5,c=j.firstTimeStamp),i(8,v=j.minVolumeDecibels),i(7,p=j.ignoreOctave??!1),i(9,g=j.bendValues),_())},w=()=>{g.length>0&&Zr(r.id,x())};hr(()=>{clearTimeout(u),cancelAnimationFrame(u),w()});const T=()=>{i(4,m=!m),m?cancelAnimationFrame(u):S()};function O(){A=$n(this.value),i(6,A)}function B(){v=$n(this.value),i(8,v)}const P=()=>i(2,h.minVolumeDecibels=v,h),L=()=>{i(7,p=!p),_()},N=()=>{d.resume(),S()};function F(j){En[j?"unshift":"push"](()=>{a=j,i(1,a)})}const z=()=>{i(5,c=performance.now()),_()};function G(j){g=j,i(9,g)}const H=()=>C(M0e);return e.$$set=j=>{"demoInfo"in j&&i(0,r=j.demoInfo)},[r,a,h,u,m,c,A,p,v,g,d,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H]}class S0e extends Ai{constructor(t){super(),gi(this,t,x0e,_0e,pi,{demoInfo:0})}}const I0e=5,T0e=35321718e-1,B0e=-25,R0e=!0,O0e=[{time:44.39190000000037,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.3945,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.404299999999814,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.42179999999981,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.45409999999963,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.45620000000019,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.47090000000037,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.48759999999963,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.504299999999816,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.520900000000374,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.5375,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.554200000000186,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.57090000000037,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.587599999999625,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.60420000000018,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.620900000000375,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.63759999999963,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.65420000000019,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.670799999999815,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.6875,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.704200000000185,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.721,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.7375,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.75420000000019,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.770900000000374,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.7875,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.80429999999981,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.82090000000037,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.837599999999625,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.8545,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.87079999999981,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.8875,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.90420000000019,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.921,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.93759999999963,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.954200000000185,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.971,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:44.9875,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.00420000000019,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.020900000000374,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.03759999999963,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.0545,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.070799999999814,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.087599999999625,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.10420000000018,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.120900000000375,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.13759999999963,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.15420000000019,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.17090000000037,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.187700000000184,pitch:185.43951924023062,noteMidi:54,actualMidi:54.04,actualMidiChroma:6.039999999999999,centsOffset:3.9999999999999147,clarity:.4608917279602114},{time:45.20429999999981,pitch:23.829770658506497,noteMidi:19,actualMidi:18.52,actualMidiChroma:6.52,centsOffset:-48.00000000000004,clarity:.8599017457090667},{time:45.221,pitch:81.68094885714233,noteMidi:40,actualMidi:39.85,actualMidiChroma:3.8500000000000014,centsOffset:-14.999999999999858,clarity:.8382643033165493},{time:45.23770000000019,pitch:41.750597492168126,noteMidi:28,actualMidi:28.23,actualMidiChroma:4.23,centsOffset:23.000000000000043,clarity:.744711574260748},{time:45.25440000000037,pitch:27.76016084998046,noteMidi:21,actualMidi:21.16,actualMidiChroma:9.16,centsOffset:16.000000000000014,clarity:.9217727108136842},{time:45.27109999999963,pitch:81.499869912507,noteMidi:40,actualMidi:39.81,actualMidiChroma:3.8100000000000023,centsOffset:-18.999999999999773,clarity:.8622142739673961},{time:45.287700000000186,pitch:27.449333425034585,noteMidi:21,actualMidi:20.97,actualMidiChroma:8.969999999999999,centsOffset:-3.0000000000001137,clarity:.9174567583022508},{time:45.30440000000037,pitch:41.29945063709222,noteMidi:28,actualMidi:28.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.8051114028885991},{time:45.321,pitch:81.79704951006504,noteMidi:40,actualMidi:39.87,actualMidiChroma:3.8699999999999974,centsOffset:-13.000000000000256,clarity:.8324586020034985},{time:45.33770000000018,pitch:81.44628214219503,noteMidi:40,actualMidi:39.8,actualMidiChroma:3.799999999999997,centsOffset:-20.000000000000284,clarity:.7537645025891493},{time:45.354400000000375,pitch:41.283609950949746,noteMidi:28,actualMidi:28.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.7768006507033078},{time:45.370900000000375,pitch:82.11641571002069,noteMidi:40,actualMidi:39.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.8104123081589591},{time:45.38759999999963,pitch:81.82254413458342,noteMidi:40,actualMidi:39.88,actualMidiChroma:3.8800000000000026,centsOffset:-11.999999999999744,clarity:.6973077568402033},{time:45.40440000000037,pitch:32.95998106221423,noteMidi:24,actualMidi:24.14,actualMidiChroma:.14000000000000057,centsOffset:14.000000000000057,clarity:.709866074377544},{time:45.421200000000184,pitch:27.785785067804504,noteMidi:21,actualMidi:21.18,actualMidiChroma:9.18,centsOffset:17.99999999999997,clarity:.8390157450491529},{time:45.437700000000184,pitch:82.00065501131662,noteMidi:40,actualMidi:39.91,actualMidiChroma:3.9099999999999966,centsOffset:-9.000000000000341,clarity:.7223986938011677},{time:45.45440000000037,pitch:80.67022057356623,noteMidi:40,actualMidi:39.63,actualMidiChroma:3.6300000000000026,centsOffset:-36.999999999999744,clarity:.7196013804176857},{time:45.471,pitch:81.72079980064325,noteMidi:40,actualMidi:39.86,actualMidiChroma:3.8599999999999994,centsOffset:-14.000000000000057,clarity:.818663180373477},{time:45.48759999999963,pitch:27.46309316951358,noteMidi:21,actualMidi:20.98,actualMidiChroma:8.98,centsOffset:-1.9999999999999574,clarity:.9119244527992123},{time:45.50440000000037,pitch:81.76489861298191,noteMidi:40,actualMidi:39.86,actualMidiChroma:3.8599999999999994,centsOffset:-14.000000000000057,clarity:.8121249954931784},{time:45.521,pitch:82.93672143359683,noteMidi:40,actualMidi:40.11,actualMidiChroma:4.109999999999999,centsOffset:10.999999999999943,clarity:.8601903265821704},{time:45.537700000000186,pitch:82.43459527832604,noteMidi:40,actualMidi:40.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.7858099284282787},{time:45.55429999999981,pitch:81.98267605409085,noteMidi:40,actualMidi:39.91,actualMidiChroma:3.9099999999999966,centsOffset:-9.000000000000341,clarity:.791947042375881},{time:45.571,pitch:81.62440822223473,noteMidi:40,actualMidi:39.83,actualMidiChroma:3.8299999999999983,centsOffset:-17.00000000000017,clarity:.8855963633021418},{time:45.58770000000018,pitch:42.10578963588161,noteMidi:28,actualMidi:28.38,actualMidiChroma:4.379999999999999,centsOffset:37.9999999999999,clarity:.8222323444487643},{time:45.604400000000375,pitch:55.630525727042304,noteMidi:33,actualMidi:33.2,actualMidiChroma:9.200000000000003,centsOffset:20.000000000000284,clarity:.7500585254082068},{time:45.621,pitch:81.33571817692186,noteMidi:40,actualMidi:39.77,actualMidiChroma:3.770000000000003,centsOffset:-22.999999999999687,clarity:.9008519075715924},{time:45.63759999999963,pitch:82.51463313832701,noteMidi:40,actualMidi:40.02,actualMidiChroma:4.020000000000003,centsOffset:2.0000000000003126,clarity:.8138967972785167},{time:45.654299999999814,pitch:83.81192105192783,noteMidi:40,actualMidi:40.29,actualMidiChroma:4.289999999999999,centsOffset:28.999999999999915,clarity:.8061909398734741},{time:45.671,pitch:82.4632706023379,noteMidi:40,actualMidi:40.01,actualMidiChroma:4.009999999999998,centsOffset:.999999999999801,clarity:.896542447248251},{time:45.687700000000184,pitch:82.05377768625411,noteMidi:40,actualMidi:39.93,actualMidiChroma:3.9299999999999997,centsOffset:-7.000000000000028,clarity:.8942707989622676},{time:45.70429999999981,pitch:41.577562045327035,noteMidi:28,actualMidi:28.16,actualMidiChroma:4.16,centsOffset:16.000000000000014,clarity:.8631853593129222},{time:45.721,pitch:82.67237064006065,noteMidi:40,actualMidi:40.06,actualMidiChroma:4.060000000000002,centsOffset:6.000000000000227,clarity:.8565685670899938},{time:45.73770000000019,pitch:82.11806367385317,noteMidi:40,actualMidi:39.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9034506165461664},{time:45.754299999999816,pitch:81.81204591473822,noteMidi:40,actualMidi:39.87,actualMidiChroma:3.8699999999999974,centsOffset:-13.000000000000256,clarity:.874202967623873},{time:45.771,pitch:27.702179593275396,noteMidi:21,actualMidi:21.13,actualMidiChroma:9.129999999999999,centsOffset:12.9999999999999,clarity:.9242669836104369},{time:45.787700000000186,pitch:82.11980696607057,noteMidi:40,actualMidi:39.94,actualMidiChroma:3.9399999999999977,centsOffset:-6.000000000000227,clarity:.9199714059242865},{time:45.80429999999981,pitch:81.52404899168239,noteMidi:40,actualMidi:39.81,actualMidiChroma:3.8100000000000023,centsOffset:-18.999999999999773,clarity:.8969872279631375},{time:45.821,pitch:82.53464653411253,noteMidi:40,actualMidi:40.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.8646480227330784},{time:45.83770000000018,pitch:82.35827394179071,noteMidi:40,actualMidi:39.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.9071694937091479},{time:45.854400000000375,pitch:82.3401433143643,noteMidi:40,actualMidi:39.99,actualMidiChroma:3.990000000000002,centsOffset:-.999999999999801,clarity:.8982589222106014},{time:45.87109999999963,pitch:82.63975506534193,noteMidi:40,actualMidi:40.05,actualMidiChroma:4.049999999999997,centsOffset:4.999999999999716,clarity:.89555127195473},{time:45.88759999999963,pitch:83.20092958624716,noteMidi:40,actualMidi:40.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.7857759330011334},{time:45.904299999999814,pitch:24.02507258193011,noteMidi:19,actualMidi:18.66,actualMidiChroma:6.66,centsOffset:-33.999999999999986,clarity:.8962765776477681},{time:45.921200000000184,pitch:81.78960264255227,noteMidi:40,actualMidi:39.87,actualMidiChroma:3.8699999999999974,centsOffset:-13.000000000000256,clarity:.7378598861563717},{time:45.937700000000184,pitch:83.14785466616468,noteMidi:40,actualMidi:40.15,actualMidiChroma:4.149999999999999,centsOffset:14.999999999999858,clarity:.6709199829320198},{time:45.954200000000185,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.97079999999981,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:45.9875,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.00420000000019,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.02079999999982,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.0375,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.054200000000186,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.070799999999814,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.087599999999625,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.10420000000018,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.120900000000375,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.1375,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.154299999999814,pitch:112.05758074439456,noteMidi:45,actualMidi:45.32,actualMidiChroma:9.32,centsOffset:32.00000000000003,clarity:.3672490723192894},{time:46.171,pitch:111.00180859622533,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.8054999612068201},{time:46.187700000000184,pitch:111.31353267598908,noteMidi:45,actualMidi:45.21,actualMidiChroma:9.21,centsOffset:21.000000000000085,clarity:.9758235911088065},{time:46.20429999999981,pitch:111.02877990526937,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9730231083361502},{time:46.22109999999963,pitch:111.20461208385282,noteMidi:45,actualMidi:45.19,actualMidiChroma:9.189999999999998,centsOffset:18.999999999999773,clarity:.9672412276879356},{time:46.23770000000019,pitch:112.25420086659386,noteMidi:45,actualMidi:45.35,actualMidiChroma:9.350000000000001,centsOffset:35.00000000000014,clarity:.9277600028663784},{time:46.254299999999816,pitch:112.0809367805184,noteMidi:45,actualMidi:45.32,actualMidiChroma:9.32,centsOffset:32.00000000000003,clarity:.897187810670296},{time:46.270900000000374,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.28759999999963,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.304200000000186,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.32090000000037,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.3375,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.35420000000018,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.370900000000375,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:46.38770000000019,pitch:222.41869804680059,noteMidi:57,actualMidi:57.19,actualMidiChroma:9.189999999999998,centsOffset:18.999999999999773,clarity:.3241098834972487},{time:46.40440000000037,pitch:164.43753612948808,noteMidi:52,actualMidi:51.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.46213565007113644},{time:46.421099999999626,pitch:109.9276497457725,noteMidi:45,actualMidi:44.99,actualMidiChroma:8.990000000000002,centsOffset:-.999999999999801,clarity:.8001143730211169},{time:46.437700000000184,pitch:110.57307443274138,noteMidi:45,actualMidi:45.09,actualMidiChroma:9.090000000000003,centsOffset:9.000000000000341,clarity:.9731722463921955},{time:46.45429999999981,pitch:110.7414441823263,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9995831720326862},{time:46.471,pitch:110.79279959495105,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9997066564318828},{time:46.48759999999963,pitch:110.79873165977867,noteMidi:45,actualMidi:45.13,actualMidiChroma:9.130000000000003,centsOffset:13.000000000000256,clarity:.9997829194281849},{time:46.504299999999816,pitch:110.79106011729297,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9998038778312122},{time:46.52109999999963,pitch:110.75762205067903,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9997482196636511},{time:46.53759999999963,pitch:110.77931474370398,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9997740159150226},{time:46.55429999999981,pitch:110.77374546493145,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9997752168542604},{time:46.571,pitch:110.77002161128712,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9998010292009525},{time:46.587599999999625,pitch:110.80483833865723,noteMidi:45,actualMidi:45.13,actualMidiChroma:9.130000000000003,centsOffset:13.000000000000256,clarity:.9998600059514615},{time:46.604400000000375,pitch:110.77741616125,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9998401551412996},{time:46.62120000000019,pitch:110.80113098559312,noteMidi:45,actualMidi:45.13,actualMidiChroma:9.130000000000003,centsOffset:13.000000000000256,clarity:.9998399465923384},{time:46.63770000000019,pitch:110.77614484999195,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9998803337899815},{time:46.654299999999814,pitch:110.77184022374502,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9998563728535999},{time:46.671,pitch:110.79289604390992,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9998686169321758},{time:46.687700000000184,pitch:110.78377481911772,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9998952984708609},{time:46.70440000000037,pitch:110.76913411879265,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9998516970586167},{time:46.721,pitch:110.73622566100634,noteMidi:45,actualMidi:45.12,actualMidiChroma:9.119999999999997,centsOffset:11.999999999999744,clarity:.9998463680083205},{time:46.73770000000019,pitch:110.65971663126197,noteMidi:45,actualMidi:45.1,actualMidiChroma:9.100000000000001,centsOffset:10.000000000000142,clarity:.9997998439717861},{time:46.754299999999816,pitch:110.61597655696195,noteMidi:45,actualMidi:45.1,actualMidiChroma:9.100000000000001,centsOffset:10.000000000000142,clarity:.9997410043441377},{time:46.770900000000374,pitch:110.54276378919249,noteMidi:45,actualMidi:45.09,actualMidiChroma:9.090000000000003,centsOffset:9.000000000000341,clarity:.9995901411264683},{time:46.78759999999963,pitch:109.3572596127681,noteMidi:45,actualMidi:44.9,actualMidiChroma:8.899999999999999,centsOffset:-10.000000000000142,clarity:.9408481207843451},{time:46.80429999999981,pitch:112.54299084997494,noteMidi:45,actualMidi:45.4,actualMidiChroma:9.399999999999999,centsOffset:39.99999999999986,clarity:.8687886318552849},{time:46.821,pitch:117.64633274255071,noteMidi:46,actualMidi:46.16,actualMidiChroma:10.159999999999997,centsOffset:15.999999999999659,clarity:.8625677236604012},{time:46.837599999999625,pitch:123.05568968210137,noteMidi:47,actualMidi:46.94,actualMidiChroma:10.939999999999998,centsOffset:-6.000000000000227,clarity:.9229949748077786},{time:46.85429999999981,pitch:124.5413900001023,noteMidi:47,actualMidi:47.15,actualMidiChroma:11.149999999999999,centsOffset:14.999999999999858,clarity:.9606139537428859},{time:46.871,pitch:125.06478272230126,noteMidi:47,actualMidi:47.22,actualMidiChroma:11.219999999999999,centsOffset:21.999999999999886,clarity:.851311633811143},{time:46.88770000000019,pitch:131.44499679122566,noteMidi:48,actualMidi:48.08,actualMidiChroma:.0799999999999983,centsOffset:7.9999999999998295,clarity:.7240949882415055},{time:46.904299999999814,pitch:159.41877604075995,noteMidi:51,actualMidi:51.42,actualMidiChroma:3.4200000000000017,centsOffset:42.00000000000017,clarity:.5946323448443849},{time:46.921099999999626,pitch:27.035229857849007,noteMidi:21,actualMidi:20.7,actualMidiChroma:8.7,centsOffset:-30.00000000000007,clarity:.2467576068870585},{time:46.93759999999963,pitch:122.31303484699396,noteMidi:47,actualMidi:46.84,actualMidiChroma:10.840000000000003,centsOffset:-15.999999999999659,clarity:.6722318199430433},{time:46.95429999999981,pitch:123.28116461472912,noteMidi:47,actualMidi:46.97,actualMidiChroma:10.969999999999999,centsOffset:-3.0000000000001137,clarity:.8563543529344315},{time:46.971,pitch:123.83395811672656,noteMidi:47,actualMidi:47.05,actualMidiChroma:11.049999999999997,centsOffset:4.999999999999716,clarity:.9713480906895597},{time:46.98770000000019,pitch:124.22325883374147,noteMidi:47,actualMidi:47.11,actualMidiChroma:11.11,centsOffset:10.999999999999943,clarity:.9998303273461957},{time:47.004299999999816,pitch:124.22469017764915,noteMidi:47,actualMidi:47.11,actualMidiChroma:11.11,centsOffset:10.999999999999943,clarity:.99985044566629},{time:47.021,pitch:124.27702604003724,noteMidi:47,actualMidi:47.11,actualMidiChroma:11.11,centsOffset:10.999999999999943,clarity:.9998661220912766},{time:47.03759999999963,pitch:124.26487769430723,noteMidi:47,actualMidi:47.11,actualMidiChroma:11.11,centsOffset:10.999999999999943,clarity:.999858845182132},{time:47.05429999999981,pitch:124.2713801336934,noteMidi:47,actualMidi:47.11,actualMidiChroma:11.11,centsOffset:10.999999999999943,clarity:.9998249789705724},{time:47.071,pitch:124.28469140585044,noteMidi:47,actualMidi:47.11,actualMidiChroma:11.11,centsOffset:10.999999999999943,clarity:.9997749860808369},{time:47.08770000000018,pitch:124.20805351074608,noteMidi:47,actualMidi:47.1,actualMidiChroma:11.100000000000001,centsOffset:10.000000000000142,clarity:.9997433000195812},{time:47.10429999999981,pitch:124.19255589946796,noteMidi:47,actualMidi:47.1,actualMidiChroma:11.100000000000001,centsOffset:10.000000000000142,clarity:.9997453943534182},{time:47.121,pitch:124.19675320149865,noteMidi:47,actualMidi:47.1,actualMidiChroma:11.100000000000001,centsOffset:10.000000000000142,clarity:.999801093499066},{time:47.13770000000019,pitch:124.15976859111231,noteMidi:47,actualMidi:47.1,actualMidiChroma:11.100000000000001,centsOffset:10.000000000000142,clarity:.9998340325424024},{time:47.154299999999814,pitch:124.1248025890425,noteMidi:47,actualMidi:47.09,actualMidiChroma:11.090000000000003,centsOffset:9.000000000000341,clarity:.9998326424779265},{time:47.17090000000037,pitch:124.1076949019167,noteMidi:47,actualMidi:47.09,actualMidiChroma:11.090000000000003,centsOffset:9.000000000000341,clarity:.999817310144067},{time:47.18759999999963,pitch:124.09343892149158,noteMidi:47,actualMidi:47.09,actualMidiChroma:11.090000000000003,centsOffset:9.000000000000341,clarity:.9997990589627861},{time:47.20429999999981,pitch:124.10211478003765,noteMidi:47,actualMidi:47.09,actualMidiChroma:11.090000000000003,centsOffset:9.000000000000341,clarity:.9998169232896501},{time:47.22109999999963,pitch:124.10740162734918,noteMidi:47,actualMidi:47.09,actualMidiChroma:11.090000000000003,centsOffset:9.000000000000341,clarity:.9998051440404794},{time:47.23770000000019,pitch:124.10100174619019,noteMidi:47,actualMidi:47.09,actualMidiChroma:11.090000000000003,centsOffset:9.000000000000341,clarity:.9998341405314051},{time:47.254299999999816,pitch:124.05678143304284,noteMidi:47,actualMidi:47.08,actualMidiChroma:11.079999999999998,centsOffset:7.9999999999998295,clarity:.9998145879213567},{time:47.271,pitch:124.05079739427559,noteMidi:47,actualMidi:47.08,actualMidiChroma:11.079999999999998,centsOffset:7.9999999999998295,clarity:.9998004862928482},{time:47.287700000000186,pitch:123.9172268353763,noteMidi:47,actualMidi:47.06,actualMidiChroma:11.060000000000002,centsOffset:6.000000000000227,clarity:.999458102485292},{time:47.30440000000037,pitch:124.18596422033846,noteMidi:47,actualMidi:47.1,actualMidiChroma:11.100000000000001,centsOffset:10.000000000000142,clarity:.9977454066890132},{time:47.321,pitch:127.28212200840063,noteMidi:48,actualMidi:47.53,actualMidiChroma:11.530000000000001,centsOffset:-46.999999999999886,clarity:.9737248459787011},{time:47.337599999999625,pitch:130.89000220321284,noteMidi:48,actualMidi:48.01,actualMidiChroma:.00999999999999801,centsOffset:.999999999999801,clarity:.9935721650161291},{time:47.35429999999981,pitch:131.47109300398273,noteMidi:48,actualMidi:48.09,actualMidiChroma:.09000000000000341,centsOffset:9.000000000000341,clarity:.9996801627683922},{time:47.371,pitch:131.4185508690845,noteMidi:48,actualMidi:48.08,actualMidiChroma:.0799999999999983,centsOffset:7.9999999999998295,clarity:.9998127004568396},{time:47.38759999999963,pitch:131.9899291321638,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9875313784163531},{time:47.40440000000037,pitch:132.4428356030352,noteMidi:48,actualMidi:48.21,actualMidiChroma:.21000000000000085,centsOffset:21.000000000000085,clarity:.9697224029406861},{time:47.421099999999626,pitch:134.9158190935815,noteMidi:49,actualMidi:48.53,actualMidiChroma:.5300000000000011,centsOffset:-46.999999999999886,clarity:.892760027358328},{time:47.437700000000184,pitch:144.9991934288716,noteMidi:50,actualMidi:49.78,actualMidiChroma:1.7800000000000011,centsOffset:-21.999999999999886,clarity:.7144621777142},{time:47.4545,pitch:161.9526113385436,noteMidi:52,actualMidi:51.7,actualMidiChroma:3.700000000000003,centsOffset:-29.999999999999716,clarity:.7017359134567425},{time:47.471,pitch:89.2934572884043,noteMidi:41,actualMidi:41.39,actualMidiChroma:5.390000000000001,centsOffset:39.00000000000006,clarity:.32731986457661577},{time:47.48770000000019,pitch:130.61430105657402,noteMidi:48,actualMidi:47.97,actualMidiChroma:11.969999999999999,centsOffset:-3.0000000000001137,clarity:.7217095925420232},{time:47.504299999999816,pitch:131.5347411724043,noteMidi:48,actualMidi:48.1,actualMidiChroma:.10000000000000142,centsOffset:10.000000000000142,clarity:.892838905257193},{time:47.521,pitch:131.95279826157528,noteMidi:48,actualMidi:48.15,actualMidiChroma:.14999999999999858,centsOffset:14.999999999999858,clarity:.999329374613275},{time:47.537700000000186,pitch:131.98759447005872,noteMidi:48,actualMidi:48.15,actualMidiChroma:.14999999999999858,centsOffset:14.999999999999858,clarity:.9997807057512418},{time:47.55429999999981,pitch:131.9980309910284,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9997359988922554},{time:47.571,pitch:132.0410734649569,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9998027792713344},{time:47.58779999999982,pitch:132.03217203762733,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9998227283918268},{time:47.604400000000375,pitch:131.97641339845617,noteMidi:48,actualMidi:48.15,actualMidiChroma:.14999999999999858,centsOffset:14.999999999999858,clarity:.9997866024442104},{time:47.621,pitch:131.9889482250452,noteMidi:48,actualMidi:48.15,actualMidiChroma:.14999999999999858,centsOffset:14.999999999999858,clarity:.9998177753612154},{time:47.63770000000019,pitch:132.0205532662401,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9998203641580261},{time:47.654299999999814,pitch:131.98422302440102,noteMidi:48,actualMidi:48.15,actualMidiChroma:.14999999999999858,centsOffset:14.999999999999858,clarity:.9997886903842144},{time:47.67090000000037,pitch:132.02328426828817,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9997815771253968},{time:47.68759999999963,pitch:132.0698841482523,noteMidi:48,actualMidi:48.17,actualMidiChroma:.1700000000000017,centsOffset:17.00000000000017,clarity:.9998274917142709},{time:47.70440000000037,pitch:132.0402301448011,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.999808660808192},{time:47.72090000000037,pitch:132.05166537369723,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9998212479062119},{time:47.73759999999963,pitch:132.09223970826477,noteMidi:48,actualMidi:48.17,actualMidiChroma:.1700000000000017,centsOffset:17.00000000000017,clarity:.9998376202437527},{time:47.754299999999816,pitch:132.10201073861145,noteMidi:48,actualMidi:48.17,actualMidiChroma:.1700000000000017,centsOffset:17.00000000000017,clarity:.9998769074899201},{time:47.771,pitch:132.0863153558178,noteMidi:48,actualMidi:48.17,actualMidiChroma:.1700000000000017,centsOffset:17.00000000000017,clarity:.9998487691142657},{time:47.787700000000186,pitch:132.06597841314718,noteMidi:48,actualMidi:48.17,actualMidiChroma:.1700000000000017,centsOffset:17.00000000000017,clarity:.9998322282010648},{time:47.80429999999981,pitch:132.1051474129316,noteMidi:48,actualMidi:48.17,actualMidiChroma:.1700000000000017,centsOffset:17.00000000000017,clarity:.9998830848562505},{time:47.82090000000037,pitch:132.03757759104775,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9998625636648839},{time:47.83770000000018,pitch:131.9958024202899,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9998637058156703},{time:47.85429999999981,pitch:132.0300770169048,noteMidi:48,actualMidi:48.16,actualMidiChroma:.1599999999999966,centsOffset:15.999999999999659,clarity:.9998849368640492},{time:47.870900000000375,pitch:131.9469754575762,noteMidi:48,actualMidi:48.15,actualMidiChroma:.14999999999999858,centsOffset:14.999999999999858,clarity:.9998775282325241},{time:47.88759999999963,pitch:131.86710293975463,noteMidi:48,actualMidi:48.14,actualMidiChroma:.14000000000000057,centsOffset:14.000000000000057,clarity:.9997850675977702},{time:47.90440000000037,pitch:131.7965777574152,noteMidi:48,actualMidi:48.13,actualMidiChroma:.13000000000000256,centsOffset:13.000000000000256,clarity:.999715401195914},{time:47.921,pitch:131.5917231569895,noteMidi:48,actualMidi:48.1,actualMidiChroma:.10000000000000142,centsOffset:10.000000000000142,clarity:.9988939271290391},{time:47.937700000000184,pitch:130.1999107878259,noteMidi:48,actualMidi:47.92,actualMidiChroma:11.920000000000002,centsOffset:-7.9999999999998295,clarity:.9851029003233762},{time:47.95429999999981,pitch:128.42290939926966,noteMidi:48,actualMidi:47.68,actualMidiChroma:11.68,centsOffset:-32.00000000000003,clarity:.970680856198932},{time:47.971,pitch:122.54819433983079,noteMidi:47,actualMidi:46.87,actualMidiChroma:10.869999999999997,centsOffset:-13.000000000000256,clarity:.882149933824028},{time:47.98770000000019,pitch:111.4857278922325,noteMidi:45,actualMidi:45.23,actualMidiChroma:9.229999999999997,centsOffset:22.999999999999687,clarity:.9658497295320103},{time:48.00440000000037,pitch:112.01746431710662,noteMidi:45,actualMidi:45.31,actualMidiChroma:9.310000000000002,centsOffset:31.000000000000227,clarity:.9784013603927164},{time:48.021,pitch:111.93227000289629,noteMidi:45,actualMidi:45.3,actualMidiChroma:9.299999999999997,centsOffset:29.999999999999716,clarity:.9504878052593284},{time:48.03759999999963,pitch:115.09849118350533,noteMidi:46,actualMidi:45.78,actualMidiChroma:9.780000000000001,centsOffset:-21.999999999999886,clarity:.8597647795217753},{time:48.05429999999981,pitch:117.88367185970203,noteMidi:46,actualMidi:46.2,actualMidiChroma:10.200000000000003,centsOffset:20.000000000000284,clarity:.8253695965257375},{time:48.07090000000037,pitch:94.68622322706355,noteMidi:42,actualMidi:42.4,actualMidiChroma:6.399999999999999,centsOffset:39.99999999999986,clarity:.1975871072792259},{time:48.08770000000018,pitch:111.13546370144151,noteMidi:45,actualMidi:45.18,actualMidiChroma:9.18,centsOffset:17.99999999999997,clarity:.8180242449307542},{time:48.10429999999981,pitch:110.88011088011089,noteMidi:45,actualMidi:45.14,actualMidiChroma:9.14,centsOffset:14.000000000000057,clarity:.9019933149218531},{time:48.120900000000375,pitch:111.00810608364174,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9998013927999025},{time:48.13759999999963,pitch:111.0668768295429,noteMidi:45,actualMidi:45.17,actualMidiChroma:9.170000000000002,centsOffset:17.00000000000017,clarity:.9998694713963019},{time:48.15420000000019,pitch:111.06903234560683,noteMidi:45,actualMidi:45.17,actualMidiChroma:9.170000000000002,centsOffset:17.00000000000017,clarity:.999863638227886},{time:48.171,pitch:111.06582005602382,noteMidi:45,actualMidi:45.17,actualMidiChroma:9.170000000000002,centsOffset:17.00000000000017,clarity:.9998686540805011},{time:48.18759999999963,pitch:111.05383224008544,noteMidi:45,actualMidi:45.17,actualMidiChroma:9.170000000000002,centsOffset:17.00000000000017,clarity:.9998845569499295},{time:48.20429999999981,pitch:111.06148415200867,noteMidi:45,actualMidi:45.17,actualMidiChroma:9.170000000000002,centsOffset:17.00000000000017,clarity:.999906354609621},{time:48.22109999999963,pitch:111.06888048167735,noteMidi:45,actualMidi:45.17,actualMidiChroma:9.170000000000002,centsOffset:17.00000000000017,clarity:.9998962110937697},{time:48.23770000000019,pitch:111.04829827234323,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.999902386873913},{time:48.254299999999816,pitch:111.04753218903012,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9998951817280073},{time:48.270900000000374,pitch:111.03629290082577,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9999114091234347},{time:48.28759999999963,pitch:111.03732959184025,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9999087591910509},{time:48.30429999999981,pitch:111.03601459127114,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9998977279715362},{time:48.321,pitch:111.05135782511508,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9999036563967181},{time:48.337599999999625,pitch:111.0502702828859,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9998943627659287},{time:48.35429999999981,pitch:111.03748719947899,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9999089680375377},{time:48.370900000000375,pitch:110.99790589538226,noteMidi:45,actualMidi:45.16,actualMidiChroma:9.159999999999997,centsOffset:15.999999999999659,clarity:.9999035791383619},{time:48.387799999999814,pitch:110.9094461238813,noteMidi:45,actualMidi:45.14,actualMidiChroma:9.14,centsOffset:14.000000000000057,clarity:.9999014650200593},{time:48.40440000000037,pitch:110.84161091066066,noteMidi:45,actualMidi:45.13,actualMidiChroma:9.130000000000003,centsOffset:13.000000000000256,clarity:.9998916753712734},{time:48.421,pitch:110.71991521973474,noteMidi:45,actualMidi:45.11,actualMidiChroma:9.11,centsOffset:10.999999999999943,clarity:.9998901539233884},{time:48.437700000000184,pitch:110.64186717904204,noteMidi:45,actualMidi:45.1,actualMidiChroma:9.100000000000001,centsOffset:10.000000000000142,clarity:.9998318457132669},{time:48.45429999999981,pitch:110.60946424300103,noteMidi:45,actualMidi:45.1,actualMidiChroma:9.100000000000001,centsOffset:10.000000000000142,clarity:.9996030664068201},{time:48.47090000000037,pitch:110.80643841532526,noteMidi:45,actualMidi:45.13,actualMidiChroma:9.130000000000003,centsOffset:13.000000000000256,clarity:.9709597503829812},{time:48.48770000000019,pitch:110.38762754525243,noteMidi:45,actualMidi:45.06,actualMidiChroma:9.060000000000002,centsOffset:6.000000000000227,clarity:.8415731981490282},{time:48.50440000000037,pitch:109.52726336389453,noteMidi:45,actualMidi:44.93,actualMidiChroma:8.93,centsOffset:-7.000000000000028,clarity:.6507506236980873},{time:48.520900000000374,pitch:104.99450722628546,noteMidi:44,actualMidi:44.19,actualMidiChroma:8.189999999999998,centsOffset:18.999999999999773,clarity:.6737272905272675},{time:48.537700000000186,pitch:110.22960953020399,noteMidi:45,actualMidi:45.04,actualMidiChroma:9.04,centsOffset:3.9999999999999147,clarity:.7496840313771713},{time:48.55440000000037,pitch:107.74003814864224,noteMidi:45,actualMidi:44.64,actualMidiChroma:8.64,centsOffset:-35.99999999999994,clarity:.7234940427212848},{time:48.57090000000037,pitch:1121.3231546815318,noteMidi:85,actualMidi:85.2,actualMidiChroma:1.2000000000000028,centsOffset:20.000000000000284,clarity:.46514258266959096},{time:48.587599999999625,pitch:1018.0377500660148,noteMidi:84,actualMidi:83.52,actualMidiChroma:11.519999999999996,centsOffset:-48.0000000000004,clarity:.5849985463545657},{time:48.60429999999981,pitch:24.020343425028923,noteMidi:19,actualMidi:18.66,actualMidiChroma:6.66,centsOffset:-33.999999999999986,clarity:.682632343377918},{time:48.620900000000375,pitch:125.72366433742526,noteMidi:47,actualMidi:47.31,actualMidiChroma:11.310000000000002,centsOffset:31.000000000000227,clarity:.372056912303421},{time:48.63759999999963,pitch:27.802554718385167,noteMidi:21,actualMidi:21.19,actualMidiChroma:9.190000000000001,centsOffset:19.000000000000128,clarity:.7630355544829399},{time:48.654299999999814,pitch:34.04541275483257,noteMidi:25,actualMidi:24.7,actualMidiChroma:.6999999999999993,centsOffset:-30.00000000000007,clarity:.6823307891786499},{time:48.670799999999815,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:48.68740000000037,pitch:0,noteMidi:null,actualMidi:null,actualMidiChroma:null,centsOffset:null,clarity:0},{time:48.704200000000185,pitch:193.59230068289938,noteMidi:55,actualMidi:54.79,actualMidiChroma:6.789999999999999,centsOffset:-21.000000000000085,clarity:.5198408692667762},{time:48.721,pitch:98.23633801288842,noteMidi:43,actualMidi:43.04,actualMidiChroma:7.039999999999999,centsOffset:3.9999999999999147,clarity:.6190728761505611},{time:48.73759999999963,pitch:98.59644218627035,noteMidi:43,actualMidi:43.11,actualMidiChroma:7.109999999999999,centsOffset:10.999999999999943,clarity:.8805189704319929},{time:48.754299999999816,pitch:98.64345668673725,noteMidi:43,actualMidi:43.11,actualMidiChroma:7.109999999999999,centsOffset:10.999999999999943,clarity:.9818329528372516},{time:48.770900000000374,pitch:98.96515869033344,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.9997025360446372},{time:48.78759999999963,pitch:99.07720168121537,noteMidi:43,actualMidi:43.19,actualMidiChroma:7.189999999999998,centsOffset:18.999999999999773,clarity:.9998145315923779},{time:48.80429999999981,pitch:99.09832822144816,noteMidi:43,actualMidi:43.19,actualMidiChroma:7.189999999999998,centsOffset:18.999999999999773,clarity:.9998126103214133},{time:48.82090000000037,pitch:99.11569591140623,noteMidi:43,actualMidi:43.2,actualMidiChroma:7.200000000000003,centsOffset:20.000000000000284,clarity:.9998430940143521},{time:48.837599999999625,pitch:99.12027939391392,noteMidi:43,actualMidi:43.2,actualMidiChroma:7.200000000000003,centsOffset:20.000000000000284,clarity:.999857620818446},{time:48.854400000000375,pitch:99.13001331146366,noteMidi:43,actualMidi:43.2,actualMidiChroma:7.200000000000003,centsOffset:20.000000000000284,clarity:.9998589510313565},{time:48.87120000000019,pitch:99.13162898726506,noteMidi:43,actualMidi:43.2,actualMidiChroma:7.200000000000003,centsOffset:20.000000000000284,clarity:.9998371755432203},{time:48.88759999999963,pitch:99.12587638114933,noteMidi:43,actualMidi:43.2,actualMidiChroma:7.200000000000003,centsOffset:20.000000000000284,clarity:.9998127139431716},{time:48.904299999999814,pitch:99.1060718281597,noteMidi:43,actualMidi:43.19,actualMidiChroma:7.189999999999998,centsOffset:18.999999999999773,clarity:.9998454375170098},{time:48.921,pitch:99.09824600502812,noteMidi:43,actualMidi:43.19,actualMidiChroma:7.189999999999998,centsOffset:18.999999999999773,clarity:.9998632621333883},{time:48.93759999999963,pitch:99.09751192928769,noteMidi:43,actualMidi:43.19,actualMidiChroma:7.189999999999998,centsOffset:18.999999999999773,clarity:.9998605405072567},{time:48.95429999999981,pitch:99.1121587407528,noteMidi:43,actualMidi:43.2,actualMidiChroma:7.200000000000003,centsOffset:20.000000000000284,clarity:.9998763540520486},{time:48.97090000000037,pitch:99.10748531107878,noteMidi:43,actualMidi:43.19,actualMidiChroma:7.189999999999998,centsOffset:18.999999999999773,clarity:.9998680502659312},{time:48.98759999999963,pitch:99.10204854047406,noteMidi:43,actualMidi:43.19,actualMidiChroma:7.189999999999998,centsOffset:18.999999999999773,clarity:.9998755049093546},{time:49.00440000000037,pitch:99.07294738161247,noteMidi:43,actualMidi:43.19,actualMidiChroma:7.189999999999998,centsOffset:18.999999999999773,clarity:.9998491305249075},{time:49.020900000000374,pitch:99.06284108593087,noteMidi:43,actualMidi:43.19,actualMidiChroma:7.189999999999998,centsOffset:18.999999999999773,clarity:.9998393704976536},{time:49.03759999999963,pitch:99.02386962601398,noteMidi:43,actualMidi:43.18,actualMidiChroma:7.18,centsOffset:17.99999999999997,clarity:.9998406909001858},{time:49.05429999999981,pitch:99.03201929299605,noteMidi:43,actualMidi:43.18,actualMidiChroma:7.18,centsOffset:17.99999999999997,clarity:.9998517704290464},{time:49.071,pitch:99.01990083559915,noteMidi:43,actualMidi:43.18,actualMidiChroma:7.18,centsOffset:17.99999999999997,clarity:.9998593092194596},{time:49.087599999999625,pitch:99.01119524004369,noteMidi:43,actualMidi:43.18,actualMidiChroma:7.18,centsOffset:17.99999999999997,clarity:.9998429448546915},{time:49.10420000000018,pitch:98.99424298322366,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.999814042445422},{time:49.121,pitch:98.98001873953253,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.9998192044599392},{time:49.13770000000019,pitch:98.97516929270863,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.9998050050314333},{time:49.15420000000019,pitch:98.99209374251302,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.999842601318079},{time:49.17090000000037,pitch:98.99088054254304,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.9998240080423813},{time:49.18759999999963,pitch:98.98856657046674,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.9998386810702016},{time:49.20429999999981,pitch:98.96096600082332,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.9998174999493585},{time:49.221,pitch:98.9487614153807,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.9998091433170373},{time:49.2375,pitch:98.93960371155157,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.999824533344821},{time:49.254299999999816,pitch:98.95217438044227,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.9998121744741724},{time:49.271,pitch:98.94538718674815,noteMidi:43,actualMidi:43.17,actualMidiChroma:7.170000000000002,centsOffset:17.00000000000017,clarity:.9998478625893767},{time:49.28759999999963,pitch:98.92619531719053,noteMidi:43,actualMidi:43.16,actualMidiChroma:7.159999999999997,centsOffset:15.999999999999659,clarity:.9998154625690177},{time:49.30429999999981,pitch:98.90686027373955,noteMidi:43,actualMidi:43.16,actualMidiChroma:7.159999999999997,centsOffset:15.999999999999659,clarity:.999842930785448},{time:49.321,pitch:98.88431516736719,noteMidi:43,actualMidi:43.16,actualMidiChroma:7.159999999999997,centsOffset:15.999999999999659,clarity:.9998442300070991},{time:49.33770000000018,pitch:98.86190070620898,noteMidi:43,actualMidi:43.15,actualMidiChroma:7.149999999999999,centsOffset:14.999999999999858,clarity:.9998460652496703},{time:49.3545,pitch:98.85944333165499,noteMidi:43,actualMidi:43.15,actualMidiChroma:7.149999999999999,centsOffset:14.999999999999858,clarity:.9998117986478263},{time:49.371,pitch:98.8332751112001,noteMidi:43,actualMidi:43.15,actualMidiChroma:7.149999999999999,centsOffset:14.999999999999858,clarity:.9997769859362506},{time:49.38759999999963,pitch:98.80401019288358,noteMidi:43,actualMidi:43.14,actualMidiChroma:7.140000000000001,centsOffset:14.000000000000057,clarity:.9997546797595902},{time:49.404299999999814,pitch:98.78387981494048,noteMidi:43,actualMidi:43.14,actualMidiChroma:7.140000000000001,centsOffset:14.000000000000057,clarity:.9998250963351012},{time:49.421,pitch:98.73314964843905,noteMidi:43,actualMidi:43.13,actualMidiChroma:7.130000000000003,centsOffset:13.000000000000256,clarity:.9997774730898215},{time:49.43759999999963,pitch:98.6565648718524,noteMidi:43,actualMidi:43.12,actualMidiChroma:7.119999999999997,centsOffset:11.999999999999744,clarity:.9997335212057408},{time:49.45429999999981,pitch:98.60212849993825,noteMidi:43,actualMidi:43.11,actualMidiChroma:7.109999999999999,centsOffset:10.999999999999943,clarity:.9995229254163149},{time:49.471,pitch:98.5377146347245,noteMidi:43,actualMidi:43.09,actualMidiChroma:7.090000000000003,centsOffset:9.000000000000341,clarity:.9993384547778987},{time:49.48759999999963,pitch:98.44627756783616,noteMidi:43,actualMidi:43.08,actualMidiChroma:7.079999999999998,centsOffset:7.9999999999998295,clarity:.9991196098522721},{time:49.504299999999816,pitch:98.5270777794637,noteMidi:43,actualMidi:43.09,actualMidiChroma:7.090000000000003,centsOffset:9.000000000000341,clarity:.9968918369935551},{time:49.520900000000374,pitch:97.05714314836382,noteMidi:43,actualMidi:42.83,actualMidiChroma:6.829999999999998,centsOffset:-17.00000000000017,clarity:.8493799044053105},{time:49.53759999999963,pitch:93.68588162242595,noteMidi:42,actualMidi:42.22,actualMidiChroma:6.219999999999999,centsOffset:21.999999999999886,clarity:.6919397389456421},{time:49.55429999999981,pitch:92.45286940616491,noteMidi:42,actualMidi:41.99,actualMidiChroma:5.990000000000002,centsOffset:-.999999999999801,clarity:.6708178248444057},{time:49.57090000000037,pitch:96.33776875137895,noteMidi:43,actualMidi:42.7,actualMidiChroma:6.700000000000003,centsOffset:-29.999999999999716,clarity:.5063479470240395},{time:49.587599999999625,pitch:82.15807093471052,noteMidi:40,actualMidi:39.95,actualMidiChroma:3.950000000000003,centsOffset:-4.999999999999716,clarity:.525519109092059},{time:49.60429999999981,pitch:80.67046497525945,noteMidi:40,actualMidi:39.63,actualMidiChroma:3.6300000000000026,centsOffset:-36.999999999999744,clarity:.6985443076559648},{time:49.621,pitch:27.512857961807956,noteMidi:21,actualMidi:21.01,actualMidiChroma:9.010000000000002,centsOffset:1.0000000000001563,clarity:.9676705071096876},{time:49.63759999999963,pitch:27.555019785470964,noteMidi:21,actualMidi:21.03,actualMidiChroma:9.030000000000001,centsOffset:3.0000000000001137,clarity:.8284948738901221},{time:49.654299999999814,pitch:27.486690893473863,noteMidi:21,actualMidi:20.99,actualMidiChroma:8.989999999999998,centsOffset:-1.0000000000001563,clarity:.9745630249740316},{time:49.67090000000037,pitch:27.486374449080444,noteMidi:21,actualMidi:20.99,actualMidiChroma:8.989999999999998,centsOffset:-1.0000000000001563,clarity:.964434762872088},{time:49.68759999999963,pitch:27.48376386363381,noteMidi:21,actualMidi:20.99,actualMidiChroma:8.989999999999998,centsOffset:-1.0000000000001563,clarity:.9342547410853967},{time:49.70440000000037,pitch:27.49640037630845,noteMidi:21,actualMidi:21,actualMidiChroma:9,centsOffset:0,clarity:.9410028229735872},{time:49.72090000000037,pitch:55.29834338922758,noteMidi:33,actualMidi:33.09,actualMidiChroma:9.090000000000003,centsOffset:9.000000000000341,clarity:.5851863823436929},{time:49.73759999999963,pitch:27.62286464391893,noteMidi:21,actualMidi:21.08,actualMidiChroma:9.079999999999998,centsOffset:7.9999999999998295,clarity:.7803478140481275},{time:49.75420000000019,pitch:27.515986838020737,noteMidi:21,actualMidi:21.01,actualMidiChroma:9.010000000000002,centsOffset:1.0000000000001563,clarity:.8927638481238773},{time:49.770900000000374,pitch:27.453681981229,noteMidi:21,actualMidi:20.97,actualMidiChroma:8.969999999999999,centsOffset:-3.0000000000001137,clarity:.9670735003949176},{time:49.78759999999963,pitch:27.281430317334454,noteMidi:21,actualMidi:20.86,actualMidiChroma:8.86,centsOffset:-14.000000000000057,clarity:.7517501053247315},{time:49.80429999999981,pitch:27.688760751940265,noteMidi:21,actualMidi:21.12,actualMidiChroma:9.120000000000001,centsOffset:12.0000000000001,clarity:.8619813440860753},{time:49.82090000000037,pitch:27.278866697074598,noteMidi:21,actualMidi:20.86,actualMidiChroma:8.86,centsOffset:-14.000000000000057,clarity:.7896494033437875},{time:49.83770000000018,pitch:24.101991402574743,noteMidi:19,actualMidi:18.72,actualMidiChroma:6.719999999999999,centsOffset:-28.000000000000114,clarity:.817204871942522},{time:49.85429999999981,pitch:27.43044098243663,noteMidi:21,actualMidi:20.96,actualMidiChroma:8.96,centsOffset:-3.9999999999999147,clarity:.9282135975680603},{time:49.871,pitch:42.21796358774811,noteMidi:28,actualMidi:28.42,actualMidiChroma:4.420000000000002,centsOffset:42.00000000000017,clarity:.6262287881882571},{time:49.88759999999963,pitch:27.516169236210146,noteMidi:21,actualMidi:21.01,actualMidiChroma:9.010000000000002,centsOffset:1.0000000000001563,clarity:.9645944627160361},{time:49.904299999999814,pitch:27.32553021185959,noteMidi:21,actualMidi:20.89,actualMidiChroma:8.89,centsOffset:-10.999999999999943,clarity:.8373339845504688},{time:49.92090000000037,pitch:41.523512109083576,noteMidi:28,actualMidi:28.13,actualMidiChroma:4.129999999999999,centsOffset:12.9999999999999,clarity:.7989038646024937},{time:49.93759999999963,pitch:41.72824233878924,noteMidi:28,actualMidi:28.22,actualMidiChroma:4.219999999999999,centsOffset:21.999999999999886,clarity:.8197057133921248},{time:49.95429999999981,pitch:27.49049380977377,noteMidi:21,actualMidi:20.99,actualMidiChroma:8.989999999999998,centsOffset:-1.0000000000001563,clarity:.9439052701352466},{time:49.971,pitch:27.493031007721985,noteMidi:21,actualMidi:21,actualMidiChroma:9,centsOffset:0,clarity:.9159328400990034},{time:49.98759999999963,pitch:27.222506606337987,noteMidi:21,actualMidi:20.82,actualMidiChroma:8.82,centsOffset:-17.99999999999997,clarity:.911815911408894},{time:50.004299999999816,pitch:41.474280461346474,noteMidi:28,actualMidi:28.11,actualMidiChroma:4.109999999999999,centsOffset:10.999999999999943,clarity:.8200051230670056},{time:50.020900000000374,pitch:41.76675257223517,noteMidi:28,actualMidi:28.24,actualMidiChroma:4.239999999999998,centsOffset:23.999999999999844,clarity:.9217857222216708},{time:50.0375,pitch:41.68612959579878,noteMidi:28,actualMidi:28.2,actualMidiChroma:4.199999999999999,centsOffset:19.99999999999993,clarity:.794264947237906},{time:50.05429999999981,pitch:27.368692704407437,noteMidi:21,actualMidi:20.92,actualMidiChroma:8.920000000000002,centsOffset:-7.9999999999998295,clarity:.9672586919934929},{time:50.07090000000037,pitch:41.27986851597436,noteMidi:28,actualMidi:28.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.9058158213482841},{time:50.087599999999625,pitch:41.66175079533624,noteMidi:28,actualMidi:28.19,actualMidiChroma:4.190000000000001,centsOffset:19.000000000000128,clarity:.7666442685172683},{time:50.10429999999981,pitch:41.72586965878647,noteMidi:28,actualMidi:28.22,actualMidiChroma:4.219999999999999,centsOffset:21.999999999999886,clarity:.8469739005911663},{time:50.120900000000375,pitch:41.63226743338369,noteMidi:28,actualMidi:28.18,actualMidiChroma:4.18,centsOffset:17.99999999999997,clarity:.9068151392551442},{time:50.13759999999963,pitch:41.562640253510345,noteMidi:28,actualMidi:28.15,actualMidiChroma:4.149999999999999,centsOffset:14.999999999999858,clarity:.8164906146460282},{time:50.154299999999814,pitch:41.23434940598347,noteMidi:28,actualMidi:28.01,actualMidiChroma:4.010000000000002,centsOffset:1.0000000000001563,clarity:.8182152757809718},{time:50.17090000000037,pitch:41.898003767997324,noteMidi:28,actualMidi:28.29,actualMidiChroma:4.289999999999999,centsOffset:28.999999999999915,clarity:.9257064279420604},{time:50.18759999999963,pitch:27.200822060727152,noteMidi:21,actualMidi:20.81,actualMidiChroma:8.809999999999999,centsOffset:-19.000000000000128,clarity:.9058959572283811},{time:50.20429999999981,pitch:41.607698839513155,noteMidi:28,actualMidi:28.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.8403449192339281},{time:50.22090000000037,pitch:41.794345895947345,noteMidi:28,actualMidi:28.25,actualMidiChroma:4.25,centsOffset:25,clarity:.9005337130594171},{time:50.2375,pitch:41.63455256178321,noteMidi:28,actualMidi:28.18,actualMidiChroma:4.18,centsOffset:17.99999999999997,clarity:.8626158428900226},{time:50.254299999999816,pitch:27.126052939157965,noteMidi:21,actualMidi:20.76,actualMidiChroma:8.760000000000002,centsOffset:-23.999999999999844,clarity:.9509471572703774},{time:50.270900000000374,pitch:41.84387437423569,noteMidi:28,actualMidi:28.27,actualMidiChroma:4.27,centsOffset:26.999999999999957,clarity:.8819961477261415},{time:50.28759999999963,pitch:41.45994019897412,noteMidi:28,actualMidi:28.11,actualMidiChroma:4.109999999999999,centsOffset:10.999999999999943,clarity:.8564433186957956},{time:50.30440000000037,pitch:41.545956818745836,noteMidi:28,actualMidi:28.14,actualMidiChroma:4.140000000000001,centsOffset:14.000000000000057,clarity:.8615060142827815},{time:50.32090000000037,pitch:41.51801049647797,noteMidi:28,actualMidi:28.13,actualMidiChroma:4.129999999999999,centsOffset:12.9999999999999,clarity:.8947045123293265},{time:50.337599999999625,pitch:41.927208368405935,noteMidi:28,actualMidi:28.3,actualMidiChroma:4.300000000000001,centsOffset:30.00000000000007,clarity:.8648358247660042},{time:50.35429999999981,pitch:41.755574950818534,noteMidi:28,actualMidi:28.23,actualMidiChroma:4.23,centsOffset:23.000000000000043,clarity:.8848871503199973},{time:50.371,pitch:41.71614675218202,noteMidi:28,actualMidi:28.21,actualMidiChroma:4.210000000000001,centsOffset:21.000000000000085,clarity:.8918896306680324},{time:50.38759999999963,pitch:26.956881617749655,noteMidi:21,actualMidi:20.65,actualMidiChroma:8.649999999999999,centsOffset:-35.00000000000014,clarity:.929400445558997},{time:50.404299999999814,pitch:27.46407099098723,noteMidi:21,actualMidi:20.98,actualMidiChroma:8.98,centsOffset:-1.9999999999999574,clarity:.9493537760465642},{time:50.421,pitch:42.00029049260058,noteMidi:28,actualMidi:28.33,actualMidiChroma:4.329999999999998,centsOffset:32.99999999999983,clarity:.9334902007159656},{time:50.43759999999963,pitch:41.41517806947664,noteMidi:28,actualMidi:28.09,actualMidiChroma:4.09,centsOffset:8.999999999999986,clarity:.8200600171348071},{time:50.45429999999981,pitch:27.25291330424693,noteMidi:21,actualMidi:20.84,actualMidiChroma:8.84,centsOffset:-16.000000000000014,clarity:.9676854828146588},{time:50.47090000000037,pitch:41.48117305086256,noteMidi:28,actualMidi:28.12,actualMidiChroma:4.120000000000001,centsOffset:12.0000000000001,clarity:.9194293358222865},{time:50.48770000000019,pitch:41.84118142298141,noteMidi:28,actualMidi:28.27,actualMidiChroma:4.27,centsOffset:26.999999999999957,clarity:.8035887063861935},{time:50.50420000000019,pitch:79.46677729811391,noteMidi:39,actualMidi:39.37,actualMidiChroma:3.3699999999999974,centsOffset:36.999999999999744,clarity:.7834950004909054},{time:50.520900000000374,pitch:41.58623984710942,noteMidi:28,actualMidi:28.16,actualMidiChroma:4.16,centsOffset:16.000000000000014,clarity:.9200855646940056},{time:50.5375,pitch:41.86145427195629,noteMidi:28,actualMidi:28.27,actualMidiChroma:4.27,centsOffset:26.999999999999957,clarity:.8793458176819513},{time:50.554200000000186,pitch:41.38069369661244,noteMidi:28,actualMidi:28.07,actualMidiChroma:4.07,centsOffset:7.000000000000028,clarity:.843293244725146},{time:50.57090000000037,pitch:41.80306296899579,noteMidi:28,actualMidi:28.25,actualMidiChroma:4.25,centsOffset:25,clarity:.9060909475950325},{time:50.587599999999625,pitch:41.6791725866517,noteMidi:28,actualMidi:28.2,actualMidiChroma:4.199999999999999,centsOffset:19.99999999999993,clarity:.8577949528904583},{time:50.60420000000018,pitch:41.91289674992506,noteMidi:28,actualMidi:28.3,actualMidiChroma:4.300000000000001,centsOffset:30.00000000000007,clarity:.8473401205448852},{time:50.621,pitch:41.42164538020334,noteMidi:28,actualMidi:28.09,actualMidiChroma:4.09,centsOffset:8.999999999999986,clarity:.9053813888918114},{time:50.63759999999963,pitch:41.598626218208224,noteMidi:28,actualMidi:28.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.8944705216973148},{time:50.65440000000037,pitch:41.81047506904175,noteMidi:28,actualMidi:28.25,actualMidiChroma:4.25,centsOffset:25,clarity:.878689026188141},{time:50.67090000000037,pitch:41.68655134585707,noteMidi:28,actualMidi:28.2,actualMidiChroma:4.199999999999999,centsOffset:19.99999999999993,clarity:.8898465630733767},{time:50.6875,pitch:41.340641377552664,noteMidi:28,actualMidi:28.06,actualMidiChroma:4.059999999999999,centsOffset:5.999999999999872,clarity:.9070666882456351},{time:50.704200000000185,pitch:41.18601417266319,noteMidi:28,actualMidi:27.99,actualMidiChroma:3.9899999999999984,centsOffset:-1.0000000000001563,clarity:.8774350175219894},{time:50.72090000000037,pitch:41.75561810731445,noteMidi:28,actualMidi:28.23,actualMidiChroma:4.23,centsOffset:23.000000000000043,clarity:.9227426165644488},{time:50.73759999999963,pitch:41.3401874252545,noteMidi:28,actualMidi:28.06,actualMidiChroma:4.059999999999999,centsOffset:5.999999999999872,clarity:.8949586727142389},{time:50.754299999999816,pitch:81.620930644643,noteMidi:40,actualMidi:39.83,actualMidiChroma:3.8299999999999983,centsOffset:-17.00000000000017,clarity:.8455685135558824},{time:50.770900000000374,pitch:41.61928056539763,noteMidi:28,actualMidi:28.17,actualMidiChroma:4.170000000000002,centsOffset:17.00000000000017,clarity:.9004407359291378},{time:50.78759999999963,pitch:81.70724626165511,noteMidi:40,actualMidi:39.85,actualMidiChroma:3.8500000000000014,centsOffset:-14.999999999999858,clarity:.7953403296761703},{time:50.804200000000186,pitch:41.41796699754574,noteMidi:28,actualMidi:28.09,actualMidiChroma:4.09,centsOffset:8.999999999999986,clarity:.8484610184995915},{time:50.82090000000037,pitch:41.870940680162335,noteMidi:28,actualMidi:28.28,actualMidiChroma:4.280000000000001,centsOffset:28.000000000000114,clarity:.9395171141916592},{time:50.837599999999625,pitch:41.25791334751497,noteMidi:28,actualMidi:28.02,actualMidiChroma:4.02,centsOffset:1.9999999999999574,clarity:.9059640853371462},{time:50.8545,pitch:27.45661059730269,noteMidi:21,actualMidi:20.97,actualMidiChroma:8.969999999999999,centsOffset:-3.0000000000001137,clarity:.9878712885265486},{time:50.870900000000375,pitch:41.35629023381011,noteMidi:28,actualMidi:28.06,actualMidiChroma:4.059999999999999,centsOffset:5.999999999999872,clarity:.9316802282528727},{time:50.8875,pitch:41.91578924906622,noteMidi:28,actualMidi:28.3,actualMidiChroma:4.300000000000001,centsOffset:30.00000000000007,clarity:.8898415837465024},{time:50.90420000000019,pitch:80.9937133251042,noteMidi:40,actualMidi:39.7,actualMidiChroma:3.700000000000003,centsOffset:-29.999999999999716,clarity:.7944739280461786},{time:50.92090000000037,pitch:41.238949435784285,noteMidi:28,actualMidi:28.01,actualMidiChroma:4.010000000000002,centsOffset:1.0000000000001563,clarity:.9269117234764508},{time:50.9375,pitch:42.155876384510115,noteMidi:28,actualMidi:28.4,actualMidiChroma:4.399999999999999,centsOffset:39.99999999999986,clarity:.9436893443416068},{time:50.95429999999981,pitch:41.36137991289498,noteMidi:28,actualMidi:28.07,actualMidiChroma:4.07,centsOffset:7.000000000000028,clarity:.8967050096414653},{time:50.97090000000037,pitch:41.90347520944429,noteMidi:28,actualMidi:28.29,actualMidiChroma:4.289999999999999,centsOffset:28.999999999999915,clarity:.934466015096632},{time:50.98759999999963,pitch:41.19522858886048,noteMidi:28,actualMidi:28,actualMidiChroma:4,centsOffset:0,clarity:.8975744274527386},{time:51.00440000000037,pitch:41.86744552278799,noteMidi:28,actualMidi:28.28,actualMidiChroma:4.280000000000001,centsOffset:28.000000000000114,clarity:.8873871389628931},{time:51.021,pitch:41.46181371461077,noteMidi:28,actualMidi:28.11,actualMidiChroma:4.109999999999999,centsOffset:10.999999999999943,clarity:.9142444405651702},{time:51.03759999999963,pitch:41.58296679816389,noteMidi:28,actualMidi:28.16,actualMidiChroma:4.16,centsOffset:16.000000000000014,clarity:.9116467747012251},{time:51.054599999999624,pitch:81.63287066531963,noteMidi:40,actualMidi:39.84,actualMidiChroma:3.8400000000000034,centsOffset:-15.999999999999659,clarity:.8336990476588841},{time:51.07090000000037,pitch:41.39535992338045,noteMidi:28,actualMidi:28.08,actualMidiChroma:4.079999999999998,centsOffset:7.9999999999998295,clarity:.9225920375492649},{time:51.087599999999625,pitch:41.7922793117334,noteMidi:28,actualMidi:28.25,actualMidiChroma:4.25,centsOffset:25,clarity:.9089502841234207},{time:51.10420000000018,pitch:40.98755748661423,noteMidi:28,actualMidi:27.91,actualMidiChroma:3.91,centsOffset:-8.999999999999986,clarity:.9342860615563637},{time:51.120900000000375,pitch:42.106809536630934,noteMidi:28,actualMidi:28.38,actualMidiChroma:4.379999999999999,centsOffset:37.9999999999999,clarity:.9594419173320148},{time:51.13759999999963,pitch:80.26903899712886,noteMidi:40,actualMidi:39.54,actualMidiChroma:3.539999999999999,centsOffset:-46.000000000000085,clarity:.8539247562122707},{time:51.15420000000019,pitch:81.9331798488117,noteMidi:40,actualMidi:39.9,actualMidiChroma:3.8999999999999986,centsOffset:-10.000000000000142,clarity:.870090631282272},{time:51.17090000000037,pitch:41.3301082422737,noteMidi:28,actualMidi:28.05,actualMidiChroma:4.050000000000001,centsOffset:5.000000000000071,clarity:.9029008828593561},{time:51.18759999999963,pitch:83.08945832045731,noteMidi:40,actualMidi:40.14,actualMidiChroma:4.140000000000001,centsOffset:14.000000000000057,clarity:.8243710187662563},{time:51.20429999999981,pitch:41.66630363544308,noteMidi:28,actualMidi:28.19,actualMidiChroma:4.190000000000001,centsOffset:19.000000000000128,clarity:.8832970342339195},{time:51.221,pitch:41.468323911559864,noteMidi:28,actualMidi:28.11,actualMidiChroma:4.109999999999999,centsOffset:10.999999999999943,clarity:.9359198084563047},{time:51.23759999999963,pitch:41.50458996365191,noteMidi:28,actualMidi:28.13,actualMidiChroma:4.129999999999999,centsOffset:12.9999999999999,clarity:.9392858745341783},{time:51.254299999999816,pitch:41.30142183347505,noteMidi:28,actualMidi:28.04,actualMidiChroma:4.039999999999999,centsOffset:3.9999999999999147,clarity:.9247946529656019},{time:51.270900000000374,pitch:41.79601286386117,noteMidi:28,actualMidi:28.25,actualMidiChroma:4.25,centsOffset:25,clarity:.931153541928623},{time:51.28759999999963,pitch:80.04178606122439,noteMidi:40,actualMidi:39.5,actualMidiChroma:3.5,centsOffset:-50,clarity:.847744273514742},{time:51.30429999999981,pitch:42.01582770930939,noteMidi:28,actualMidi:28.34,actualMidiChroma:4.34,centsOffset:33.999999999999986,clarity:.9255507178627056},{time:51.32090000000037,pitch:41.32918677650979,noteMidi:28,actualMidi:28.05,actualMidiChroma:4.050000000000001,centsOffset:5.000000000000071,clarity:.9087153921969247},{time:51.337599999999625,pitch:41.959366373653005,noteMidi:28,actualMidi:28.31,actualMidiChroma:4.309999999999999,centsOffset:30.999999999999872,clarity:.9488513612025145},{time:51.35429999999981,pitch:80.5656229576377,noteMidi:40,actualMidi:39.61,actualMidiChroma:3.6099999999999994,centsOffset:-39.00000000000006,clarity:.8647804608387233},{time:51.37079999999981,pitch:82.22178327341683,noteMidi:40,actualMidi:39.96,actualMidiChroma:3.960000000000001,centsOffset:-3.9999999999999147,clarity:.8583390482072453},{time:51.38759999999963,pitch:41.273924999317224,noteMidi:28,actualMidi:28.03,actualMidiChroma:4.030000000000001,centsOffset:3.0000000000001137,clarity:.925113369337538},{time:51.404299999999814,pitch:41.40588399404126,noteMidi:28,actualMidi:28.08,actualMidiChroma:4.079999999999998,centsOffset:7.9999999999998295,clarity:.9231813313122643},{time:51.42090000000037,pitch:81.93686653626945,noteMidi:40,actualMidi:39.9,actualMidiChroma:3.8999999999999986,centsOffset:-10.000000000000142,clarity:.8697911673797343},{time:51.43759999999963,pitch:41.670829212340216,noteMidi:28,actualMidi:28.2,actualMidiChroma:4.199999999999999,centsOffset:19.99999999999993,clarity:.9404720322426812},{time:51.45440000000037,pitch:81.1520496694464,noteMidi:40,actualMidi:39.73,actualMidiChroma:3.729999999999997,centsOffset:-27.000000000000313,clarity:.8649875871864623},{time:51.47090000000037,pitch:80.17794548569223,noteMidi:40,actualMidi:39.53,actualMidiChroma:3.530000000000001,centsOffset:-46.999999999999886,clarity:.8786466520307581},{time:51.48759999999963,pitch:82.67453825954259,noteMidi:40,actualMidi:40.06,actualMidiChroma:4.060000000000002,centsOffset:6.000000000000227,clarity:.8800033863877044}],D0e="pitch-offset-cents",L0e="2024-07-03T15:26:45.591Z",P0e={pastTime:I0e,firstTimeStamp:T0e,minVolumeDecibels:B0e,colorArea:R0e,bendValues:O0e,_demoId:D0e,_date:L0e};function H8(e){let t,i,r=f0.midiToNoteName(e[9].at(-1).noteMidi)+"",a;return{c(){t=ie("p"),i=ze("Current closest note: "),a=ze(r)},m(o,h){Rt(o,t,h),D(t,i),D(t,a)},p(o,h){h&512&&r!==(r=f0.midiToNoteName(o[9].at(-1).noteMidi)+"")&&Ht(a,r)},d(o){o&&Bt(t)}}}function N0e(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A=e[4]?"play":"pause",p,v,g,y,E,_,S,x,C,w,T,O,B=(e[8]?Xr:Kr)+"",P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we=e[9].length>0&&H8(e);function Ee(Ae){e[24](Ae)}let He={saveToStorage:e[15],callback:e[23]};return e[9]!==void 0&&(He.notes=e[9]),j=new Ts({props:He}),En.push(()=>Di(j,"notes",Ee)),k=new es({props:{getExportData:e[13],demoId:e[0].id}}),W=new ts({props:{loadData:e[14]}}),fe=new ns({props:{demoId:e[0].id,loadData:e[14]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Allow microphone access and play pitch bends or vibratos. The line chart
        below shows how far you bend up and down over time.`,u=ue(),we&&we.c(),m=ue(),c=ie("div"),d=ie("button"),p=ze(A),v=ue(),g=ie("label"),y=ze(`past seconds
            `),E=ie("input"),_=ue(),S=ie("label"),x=ze(`min. decibels
            `),C=ie("input"),w=ue(),T=ie("button"),O=ze("colors "),P=ze(B),L=ue(),N=ie("button"),N.textContent="resume",F=ue(),z=ie("div"),G=ue(),H=ie("div"),gt(j.$$.fragment),Q=ue(),gt(k.$$.fragment),K=ue(),gt(W.$$.fragment),J=ue(),se=ie("button"),se.textContent="example",ge=ue(),gt(fe.$$.fragment),de(h,"class","explanation"),Ei(d,"width","75px"),de(E,"type","number"),de(E,"min","5"),de(E,"max","60"),de(E,"step","5"),de(C,"type","number"),de(C,"min","-40"),de(C,"max","-5"),de(C,"step","5"),de(S,"title","The minimum loudness in decibels for a sound to be registered as input. Lower means fainter notes will be registered but there will be more noise such as octave errors."),de(T,"title","Use blue for low and red for high"),de(N,"title","Press this button if your browser prevents audio access because there needs to be a user interaction first"),de(c,"class","control"),de(z,"class","visualization"),de(H,"class","control"),de(t,"class","demo")},m(Ae,Ke){Rt(Ae,t,Ke),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),we&&we.m(t,null),D(t,m),D(t,c),D(c,d),D(d,p),D(c,v),D(c,g),D(g,y),D(g,E),rn(E,e[6]),D(c,_),D(c,S),D(S,x),D(S,C),rn(C,e[7]),D(c,w),D(c,T),D(T,O),D(T,P),D(c,L),D(c,N),D(t,F),D(t,z),e[22](z),D(t,G),D(t,H),ft(j,H,null),D(H,Q),ft(k,H,null),D(H,K),ft(W,H,null),D(H,J),D(H,se),D(H,ge),ft(fe,H,null),me=!0,xe||(ye=[nt(d,"click",e[16]),nt(E,"input",e[17]),nt(E,"change",e[11]),nt(C,"input",e[18]),nt(C,"change",e[19]),nt(T,"click",e[20]),nt(N,"click",e[21]),nt(se,"click",e[25])],xe=!0)},p(Ae,[Ke]){(!me||Ke&1)&&r!==(r=Ae[0].title+"")&&Ht(a,r),Ae[9].length>0?we?we.p(Ae,Ke):(we=H8(Ae),we.c(),we.m(t,m)):we&&(we.d(1),we=null),(!me||Ke&16)&&A!==(A=Ae[4]?"play":"pause")&&Ht(p,A),Ke&64&&$n(E.value)!==Ae[6]&&rn(E,Ae[6]),Ke&128&&$n(C.value)!==Ae[7]&&rn(C,Ae[7]),(!me||Ke&256)&&B!==(B=(Ae[8]?Xr:Kr)+"")&&Ht(P,B);const Ue={};Ke&32&&(Ue.callback=Ae[23]),!q&&Ke&512&&(q=!0,Ue.notes=Ae[9],Oi(()=>q=!1)),j.$set(Ue);const ct={};Ke&1&&(ct.demoId=Ae[0].id),k.$set(ct);const vt={};Ke&1&&(vt.demoId=Ae[0].id),fe.$set(vt)},i(Ae){me||(ut(j.$$.fragment,Ae),ut(k.$$.fragment,Ae),ut(W.$$.fragment,Ae),ut(fe.$$.fragment,Ae),me=!0)},o(Ae){ht(j.$$.fragment,Ae),ht(k.$$.fragment,Ae),ht(W.$$.fragment,Ae),ht(fe.$$.fragment,Ae),me=!1},d(Ae){Ae&&Bt(t),we&&we.d(),e[22](null),mt(j),mt(k),mt(W),mt(fe),xe=!1,Vi(ye)}}}let F0e=1200,k0e=500;function U0e(e,t,i){let{demoInfo:r}=t,a,o,h,u,m=!1,c=performance.now(),d=new window.AudioContext,A=10,p=-25,v=!1,g=[];function y(H,j){o.getFloatTimeDomainData(H);const q=h.findPitch(H,j),Q=q[0],k=q[1],K=xs.fromFreq(Q),W=xs.midi(K),J=f0.freqToMidi(Q),se=(J-W)*100,fe={time:(performance.now()-c)/1e3,pitch:Q,noteMidi:W,actualMidi:J,actualMidiChroma:J%12,centsOffset:se,clarity:k};g.push(fe),E(),i(3,u=requestAnimationFrame(()=>y(H,j)))}const E=()=>{if(!a)return;i(1,a.textContent="",a);let H;g.length>0?H=g.at(-1).time:H=(performance.now()-c)/1e3;const j=H-A,q=lr({width:F0e,height:k0e,marginBottom:50,padding:0,x:{domain:[j,H],label:"time in seconds"},y:{domain:[-50,50],label:"offset in cents",grid:!0},marks:[lu({anchor:"left",tickSize:0}),lu({anchor:"right",tickSize:0}),Ss([0]),gA(g,{x:"time",y:"centsOffset",clip:!0,curve:"basis"}),v?pne(g,{x:"time",y1:"centsOffset",y2:0,clip:!0,curve:"basis",positiveFill:"steelblue",negativeFill:"crimson"}):null]});a.appendChild(q)},_=()=>{o=d.createAnalyser(),navigator.mediaDevices.getUserMedia({audio:!0}).then(H=>{d.createMediaStreamSource(H).connect(o),i(2,h=eu.forFloat32Array(o.fftSize)),i(2,h.minVolumeDecibels=p,h);const j=new Float32Array(h.inputLength);y(j,d.sampleRate)}),E()};ur(_);const S=()=>({pastTime:A,firstTimeStamp:c,minVolumeDecibels:p,colorArea:v,bendValues:g}),x=H=>{(g.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(i(4,m=!0),cancelAnimationFrame(u),g.length>0&&C(),i(6,A=H.pastTime),i(5,c=H.firstTimeStamp),i(7,p=H.minVolumeDecibels),i(8,v=H.colorArea??!1),i(9,g=H.bendValues),E())},C=()=>{g.length>0&&Zr(r.id,S())};hr(()=>{clearTimeout(u),cancelAnimationFrame(u),C()});const w=()=>{i(4,m=!m),m?cancelAnimationFrame(u):_()};function T(){A=$n(this.value),i(6,A)}function O(){p=$n(this.value),i(7,p)}const B=()=>i(2,h.minVolumeDecibels=p,h),P=()=>{i(8,v=!v),E()},L=()=>{d.resume(),_()};function N(H){En[H?"unshift":"push"](()=>{a=H,i(1,a)})}const F=()=>{i(5,c=performance.now()),E()};function z(H){g=H,i(9,g)}const G=()=>x(P0e);return e.$$set=H=>{"demoInfo"in H&&i(0,r=H.demoInfo)},[r,a,h,u,m,c,A,p,v,g,d,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G]}class G0e extends Ai{constructor(t){super(),gi(this,t,U0e,N0e,pi,{demoInfo:0})}}function V0e(e,t,i){let{key:r=" "}=t,{callback:a=()=>{}}=t;const o=h=>{h.key===r&&(h.preventDefault(),a())};return ur(()=>{document.addEventListener("keydown",o)}),hr(()=>{document.removeEventListener("keydown",o)}),e.$$set=h=>{"key"in h&&i(0,r=h.key),"callback"in h&&i(1,a=h.callback)},[r,a]}class ho extends Ai{constructor(t){super(),gi(this,t,V0e,null,pi,{key:0,callback:1})}}const Q0e=120,H0e=20,z0e=!0,W0e=[0,.198,.45389999985694884,.677,.9348999998569488,1.1738999998569488,1.458,1.708,1.943,2.19,2.442,2.697,2.9288999998569487,3.183,3.429,3.678,3.915,4.172,4.418899999856949,4.679,4.934,5.164,5.409899999856949],j0e="rhythm-sheet-music",$0e="2024-07-02T14:52:22.979Z",X0e={tempo:Q0e,pastNoteCount:H0e,useDotted:z0e,notes:W0e,_demoId:j0e,_date:$0e};function K0e(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B=(e[4]?Xr:Kr)+"",P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae;function Ke(rt){e[13](rt)}let Ue={callback:e[9]};e[2]!==void 0&&(Ue.value=e[2]),E=new Ya({props:Ue}),En.push(()=>Di(E,"value",Ke));function ct(rt){e[14](rt)}let vt={callback:e[9]};e[3]!==void 0&&(vt.value=e[3]),x=new C0({props:vt}),En.push(()=>Di(x,"value",ct)),G=new sl({props:{tempo:e[2],accent:4}});function dt(rt){e[17](rt)}let It={saveToStorage:e[12],callback:e[9]};return e[5]!==void 0&&(It.notes=e[5]),j=new Ts({props:It}),En.push(()=>Di(j,"notes",dt)),k=new es({props:{getExportData:e[10],demoId:e[0].id}}),W=new ts({props:{loadData:e[11]}}),fe=new ns({props:{demoId:e[0].id,loadData:e[11]}}),xe=new ho({props:{key:" ",callback:e[19]}}),we=new kr({props:{noteOn:e[8]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),u=ze(`Set a tempo and start playing. The time between the notes you play will
        be displayed as note symbols, so you can see whether you play, for
        example, correct quarter notes. Numbers show you how many percent of the
        detected note duration you played, for example a -5 means your note was
        5% too short. Bars below show you these percent as well, `),m=ie("span"),c=ze("blue"),d=ze(`
        for notes that were too long (playing too slow) and
        `),A=ie("span"),p=ze("orange"),v=ze(" for short (fast) ones."),g=ue(),y=ie("div"),gt(E.$$.fragment),S=ue(),gt(x.$$.fragment),w=ue(),T=ie("button"),O=ze("dotted notes "),P=ze(B),L=ue(),N=ie("div"),F=ue(),z=ie("div"),gt(G.$$.fragment),H=ue(),gt(j.$$.fragment),Q=ue(),gt(k.$$.fragment),K=ue(),gt(W.$$.fragment),J=ue(),se=ie("button"),se.textContent="example",ge=ue(),gt(fe.$$.fragment),me=ue(),gt(xe.$$.fragment),ye=ue(),gt(we.$$.fragment),Ei(m,"color",e[7]),Ei(A,"color",e[6]),de(h,"class","explanation"),de(T,"title","Use dotted notes? If not, the closest non-dotted note will be taken."),de(y,"class","control"),de(N,"class","visualization"),de(z,"class","control"),de(t,"class","demo")},m(rt,Lt){Rt(rt,t,Lt),D(t,i),D(i,a),D(t,o),D(t,h),D(h,u),D(h,m),D(m,c),D(h,d),D(h,A),D(A,p),D(h,v),D(t,g),D(t,y),ft(E,y,null),D(y,S),ft(x,y,null),D(y,w),D(y,T),D(T,O),D(T,P),D(t,L),D(t,N),e[16](N),D(t,F),D(t,z),ft(G,z,null),D(z,H),ft(j,z,null),D(z,Q),ft(k,z,null),D(z,K),ft(W,z,null),D(z,J),D(z,se),D(z,ge),ft(fe,z,null),D(t,me),ft(xe,t,null),D(t,ye),ft(we,t,null),Ee=!0,He||(Ae=[nt(T,"click",e[15]),nt(se,"click",e[18])],He=!0)},p(rt,[Lt]){(!Ee||Lt&1)&&r!==(r=rt[0].title+"")&&Ht(a,r);const hn={};!_&&Lt&4&&(_=!0,hn.value=rt[2],Oi(()=>_=!1)),E.$set(hn);const Et={};!C&&Lt&8&&(C=!0,Et.value=rt[3],Oi(()=>C=!1)),x.$set(Et),(!Ee||Lt&16)&&B!==(B=(rt[4]?Xr:Kr)+"")&&Ht(P,B);const xt={};Lt&4&&(xt.tempo=rt[2]),G.$set(xt);const en={};!q&&Lt&32&&(q=!0,en.notes=rt[5],Oi(()=>q=!1)),j.$set(en);const _t={};Lt&1&&(_t.demoId=rt[0].id),k.$set(_t);const Kt={};Lt&1&&(Kt.demoId=rt[0].id),fe.$set(Kt)},i(rt){Ee||(ut(E.$$.fragment,rt),ut(x.$$.fragment,rt),ut(G.$$.fragment,rt),ut(j.$$.fragment,rt),ut(k.$$.fragment,rt),ut(W.$$.fragment,rt),ut(fe.$$.fragment,rt),ut(xe.$$.fragment,rt),ut(we.$$.fragment,rt),Ee=!0)},o(rt){ht(E.$$.fragment,rt),ht(x.$$.fragment,rt),ht(G.$$.fragment,rt),ht(j.$$.fragment,rt),ht(k.$$.fragment,rt),ht(W.$$.fragment,rt),ht(fe.$$.fragment,rt),ht(xe.$$.fragment,rt),ht(we.$$.fragment,rt),Ee=!1},d(rt){rt&&Bt(t),mt(E),mt(x),e[16](null),mt(G),mt(j),mt(k),mt(W),mt(fe),mt(xe),mt(we),He=!1,Vi(Ae)}}}let z8=1e3;function Y0e(e,t,i){let{demoInfo:r}=t,a,o=120,h=10,u=!0,m=0,c=[];const d=Jc[1],A=Jc[0],p=Q4,v=p.filter(L=>!L.dotted),g=async L=>{c.length===0&&(m=L.timestamp);const F=(L.timestamp-m)/1e3;c.push(F),y()},y=()=>{if(i(1,a.textContent="",a),c.length===0)return;let L=Es(o);const N=c.slice(-(h+1)),z=N.map((Q,k)=>k===0?0:Q-N[k-1]).map(Q=>Q/L),G=u?p:v,H=z.map(Q=>{const k=b9(G,W=>Math.abs(Q-W.beats)),K=G[k];return{...K,beats:Q,offsetPercent:(Q/K.beats*100).toFixed()}}),j=lr({width:z8,height:100,marginLeft:100,x:{label:"",domain:_n(1,h),ticks:[]},y:{domain:[1,0],ticks:_n(3),tickFormat:Q=>["note","percent too long"][Q]},marks:[Na(H,{text:"symbol",x:(Q,k)=>k,y:0,fontSize:40}),Na(H,{text:Q=>Q.offsetPercent-100,x:(Q,k)=>k,y:1,fontSize:20})]});a.appendChild(j);const q=lr({width:z8,height:250,marginLeft:100,x:{label:"note",domain:_n(1,h),tickSize:0,ticks:[]},y:{label:"percent too long",domain:[-30,30],ticks:_n(-30,31,10),grid:!0},marks:[Zh(H,{x:(Q,k)=>k,y:Q=>Q.offsetPercent-100,fill:Q=>Q.offsetPercent<100?d:A}),Ss([0])]});a.appendChild(q)};ur(y);const E=()=>({tempo:o,pastNoteCount:h,useDotted:u,notes:c}),_=L=>{(c.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(c.length>0&&S(),i(2,o=L.tempo),i(3,h=L.pastNoteCount),i(4,u=L.useDotted),i(5,c=L.notes),y())},S=()=>{c.length>0&&Zr(r.id,E())};hr(S);function x(L){o=L,i(2,o)}function C(L){h=L,i(3,h)}const w=()=>{i(4,u=!u),y()};function T(L){En[L?"unshift":"push"](()=>{a=L,i(1,a)})}function O(L){c=L,i(5,c)}const B=()=>_(X0e),P=()=>g({timestamp:performance.now()});return e.$$set=L=>{"demoInfo"in L&&i(0,r=L.demoInfo)},[r,a,o,h,u,c,d,A,g,y,E,_,S,x,C,w,T,O,B,P]}class q0e extends Ai{constructor(t){super(),gi(this,t,Y0e,K0e,pi,{demoInfo:0})}}const J0e=80,Z0e=120,ehe=10,the="off",nhe="",ihe=120,rhe=69206.59999999963,she=[0,.25,.5,.75,1,1.25,1.5,1.7499999999999998,2,2.25,2.5,2.75,3,3.25,3.4999999999999996,3.75,4,4.25,4.5,4.75,5,5.25,5.5,5.75],ahe=9,ohe={dataType:"Map",value:[[80,[15.569,15.798,16.019,16.262,16.493,16.779,17.047,17.273900000000374,17.561,17.834,18.065,18.297,18.55,18.802,19.074,19.328,19.564,19.834,20.11,20.325,20.607,20.882,21.118,21.353,21.582,22.027]],[90,[26.017,26.225,26.454,26.695,26.906,27.167,27.367,27.549,27.78590000000037,28.012,28.259,28.488,28.706,28.913,29.135,29.369,29.564,29.819,30.034,30.214,30.474,30.681,30.879,31.137,31.364]],[100,[35.44,35.644,35.882900000000376,36.099,36.297,36.533,36.735,36.93,37.124,37.317,37.49,37.709,37.91,38.116,38.346,38.535,38.773,38.974,39.151,39.342,39.53990000000037,39.734,39.912,40.092,40.294]],[110,[44.18,44.344,44.532,44.734,44.892,45.095,45.294,45.45490000000037,45.623,45.801,45.976,46.165,46.344,46.528,46.713,46.898900000000374,47.078,47.265,47.454,47.633,47.809,47.992,48.166900000000375,48.346,48.521,48.683]],[120,[52.166,52.324,52.485,52.665,52.825,53.021,53.2,53.367,53.535,53.68,53.83,53.989,54.162,54.342,54.507,54.678,54.839,55.011,55.181,55.35,55.514,55.681,55.836,55.995,56.14690000000037,56.295]]]},lhe="speed-up",che="2024-07-03T17:46:22.299Z",uhe={initialTempo:J0e,targetTempo:Z0e,tempoIncrease:ehe,quantize:the,currentStep:nhe,currentTempo:ihe,firstTimeStamp:rhe,exerciseNotes:she,exerciseBeatCount:ahe,practiceRecordings:ohe,_demoId:lhe,_date:che};function hhe(e,t,i){const r=e.slice();return r[34]=t[i],r}function dhe(e,t,i){const r=e.slice();return r[34]=t[i],r}function fhe(e){let t;return{c(){t=ie("option"),t.textContent=`${e[34]}`,t.__value=e[34],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function mhe(e){let t;return{c(){t=ie("option"),t.textContent=`${e[34]}`,t.__value=e[34],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function phe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae,Ke,Ue,ct,vt,dt,It,rt,Lt,hn,Et,xt,en,_t,Kt,Dt,Nt,St,pe,_e,De,Be,Le,ke,ce,X,Y;function be(Qt){e[21](Qt)}let Te={label:"initial tempo",title:"Set a tempo at which you are able to input the exercise precisely (in BPM)",callback:e[16]};e[2]!==void 0&&(Te.value=e[2]),c=new Ya({props:Te}),En.push(()=>Di(c,"value",be));function We(Qt){e[22](Qt)}let tt={label:"target tempo",title:"Set the tempo you want to be able to play the exercise at (in BPM)",callback:e[16]};e[3]!==void 0&&(tt.value=e[3]),p=new Ya({props:tt}),En.push(()=>Di(p,"value",We));let wt=nn(["off","32nd","16th","8th","triplet","quintuplet"]),Zt=[];for(let Qt=0;Qt<6;Qt+=1)Zt[Qt]=fhe(dhe(e,wt,Qt));let qt=nn(["quarter","eighth","triplets","quintuplets","swing"]),dn=[];for(let Qt=0;Qt<5;Qt+=1)dn[Qt]=mhe(hhe(e,qt,Qt));return _t=new es({props:{getExportData:e[18],demoId:e[0].id}}),Dt=new ts({props:{loadData:e[19]}}),_e=new ns({props:{demoId:e[0].id,loadData:e[19]}}),Be=new ho({props:{key:" ",callback:e[28]}}),ke=new kr({props:{noteOn:e[11]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Adjust the initial and target tempo, record an exercise at the inital
        tempo, and then practice it with increasing speed until you reach your
        target tempo.`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),gt(p.$$.fragment),g=ue(),y=ie("label"),E=ze(`tempo increase
            `),_=ie("input"),S=ue(),x=ie("label"),C=ze(`quantize exercise
            `),w=ie("select");for(let Qt=0;Qt<6;Qt+=1)Zt[Qt].c();T=ue(),O=ie("div"),B=ie("label"),P=ze(`pre-defined exercise
            `),L=ie("select"),N=ie("option");for(let Qt=0;Qt<5;Qt+=1)dn[Qt].c();F=ue(),z=ie("button"),G=ze("input exercise"),j=ue(),q=ie("button"),Q=ze("save exercise"),K=ue(),W=ie("button"),J=ze("start practice"),ge=ue(),fe=ie("button"),me=ze("stop practice"),ye=ue(),we=ie("div"),Ee=ze("current step: "),He=ie("b"),Ae=ze(e[6]),Ke=ze(" current tempo: "),Ue=ie("b"),ct=ze(e[7]),vt=ze(" BPM"),dt=ue(),It=ie("div"),rt=ue(),Lt=ie("div"),hn=ie("button"),Et=ze("reset practice"),en=ue(),gt(_t.$$.fragment),Kt=ue(),gt(Dt.$$.fragment),Nt=ue(),St=ie("button"),St.textContent="example",pe=ue(),gt(_e.$$.fragment),De=ue(),gt(Be.$$.fragment),Le=ue(),gt(ke.$$.fragment),de(h,"class","explanation"),de(_,"type","number"),de(_,"min","1"),de(_,"max","20"),de(_,"step","1"),de(y,"title","Set the tempo increase between practice runs (in BPM)"),e[5]===void 0&&mr(()=>e[24].call(w)),de(m,"class","control"),N.selected=!0,N.disabled=!0,N.__value="",rn(N,N.__value),de(z,"title","Start recording the exercise."),z.disabled=H=e[6]==="input exercise"||e[6]==="practice",de(q,"title","Stop recording the exercise."),q.disabled=k=e[6]!=="input exercise",de(W,"title","Start recording the practice with speed-up."),W.disabled=se=e[9].length===0,de(fe,"title","Stop recording the practice with speed-up."),fe.disabled=xe=e[6]!=="practice",de(O,"class","control"),de(It,"class","visualization"),de(hn,"title","Clear practice but not exercise"),hn.disabled=xt=e[6]!=="",de(Lt,"class","control"),de(t,"class","demo")},m(Qt,xi){Rt(Qt,t,xi),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(m,A),ft(p,m,null),D(m,g),D(m,y),D(y,E),D(y,_),rn(_,e[4]),D(m,S),D(m,x),D(x,C),D(x,w);for(let Fn=0;Fn<6;Fn+=1)Zt[Fn]&&Zt[Fn].m(w,null);ri(w,e[5],!0),D(t,T),D(t,O),D(O,B),D(B,P),D(B,L),D(L,N);for(let Fn=0;Fn<5;Fn+=1)dn[Fn]&&dn[Fn].m(L,null);D(O,F),D(O,z),D(z,G),D(O,j),D(O,q),D(q,Q),D(O,K),D(O,W),D(W,J),D(O,ge),D(O,fe),D(fe,me),D(t,ye),D(t,we),D(we,Ee),D(we,He),D(He,Ae),D(we,Ke),D(we,Ue),D(Ue,ct),D(we,vt),D(t,dt),D(t,It),e[25](It),D(t,rt),D(t,Lt),D(Lt,hn),D(hn,Et),D(Lt,en),ft(_t,Lt,null),D(Lt,Kt),ft(Dt,Lt,null),D(Lt,Nt),D(Lt,St),D(Lt,pe),ft(_e,Lt,null),D(t,De),ft(Be,t,null),D(t,Le),ft(ke,t,null),ce=!0,X||(Y=[nt(_,"input",e[23]),nt(w,"change",e[24]),nt(w,"change",e[16]),nt(L,"change",e[17]),nt(z,"click",e[12]),nt(q,"click",e[13]),nt(W,"click",e[14]),nt(fe,"click",e[15]),nt(hn,"click",e[26]),nt(St,"click",e[27])],X=!0)},p(Qt,xi){(!ce||xi[0]&1)&&r!==(r=Qt[0].title+"")&&Ht(a,r);const Fn={};!d&&xi[0]&4&&(d=!0,Fn.value=Qt[2],Oi(()=>d=!1)),c.$set(Fn);const Br={};!v&&xi[0]&8&&(v=!0,Br.value=Qt[3],Oi(()=>v=!1)),p.$set(Br),xi[0]&16&&$n(_.value)!==Qt[4]&&rn(_,Qt[4]),xi[0]&32&&ri(w,Qt[5]),(!ce||xi[0]&64&&H!==(H=Qt[6]==="input exercise"||Qt[6]==="practice"))&&(z.disabled=H),(!ce||xi[0]&64&&k!==(k=Qt[6]!=="input exercise"))&&(q.disabled=k),(!ce||xi[0]&512&&se!==(se=Qt[9].length===0))&&(W.disabled=se),(!ce||xi[0]&64&&xe!==(xe=Qt[6]!=="practice"))&&(fe.disabled=xe),(!ce||xi[0]&64)&&Ht(Ae,Qt[6]),(!ce||xi[0]&128)&&Ht(ct,Qt[7]),(!ce||xi[0]&64&&xt!==(xt=Qt[6]!==""))&&(hn.disabled=xt);const Li={};xi[0]&1&&(Li.demoId=Qt[0].id),_t.$set(Li);const qi={};xi[0]&1&&(qi.demoId=Qt[0].id),_e.$set(qi)},i(Qt){ce||(ut(c.$$.fragment,Qt),ut(p.$$.fragment,Qt),ut(_t.$$.fragment,Qt),ut(Dt.$$.fragment,Qt),ut(_e.$$.fragment,Qt),ut(Be.$$.fragment,Qt),ut(ke.$$.fragment,Qt),ce=!0)},o(Qt){ht(c.$$.fragment,Qt),ht(p.$$.fragment,Qt),ht(_t.$$.fragment,Qt),ht(Dt.$$.fragment,Qt),ht(_e.$$.fragment,Qt),ht(Be.$$.fragment,Qt),ht(ke.$$.fragment,Qt),ce=!1},d(Qt){Qt&&Bt(t),mt(c),mt(p),Gn(Zt,Qt),Gn(dn,Qt),e[25](null),mt(_t),mt(Dt),mt(_e),mt(Be),mt(ke),X=!1,Vi(Y)}}}let W8=1e3,ghe=60;function Ahe(e,t,i){const r=e[0];return e.map(o=>{let h=o-r;if(t!=="off"){let u;t==="8th"&&(u=i/2),t==="16th"&&(u=i/4),t==="32nd"&&(u=i/8),t==="triplet"&&(u=i/3),t==="quintuplet"&&(u=i/5),h=Math.round(h/u)*u}return h/i})}function vhe(e,t,i){let{demoInfo:r}=t,a,o=new V4,h=60,u=120,m=10,c="off",d="",A=u,p=performance.now(),v=[],g,y=new Map,E=!0,_;const S=async W=>{const se=(W.timestamp-p)/1e3;if(d==="input exercise")i(9,v=[...v,se]);else if(d==="practice"){y.has(A)||y.set(A,[]);const ge=y.get(A);E&&ge.push(se)}B()},x=async()=>{const W=y.get(A);if(!W||!W.length)return;const J=Pa(W),ge=(performance.now()-p)/1e3-J;let fe=Es(A);ge/fe>=g&&(console.log("increasing bpm"),o.stop(),A<u?(i(7,A+=m),E=!1,await cT(1),o.start(A,4),y.has(A)&&y.set(A,[]),E=!0):O())},C=()=>{i(6,d="input exercise"),i(9,v=[]),i(10,y=new Map),o.start(h,4),B()},w=()=>{if(i(6,d=""),o.stop(),v.length>0){const W=os(v)-Pa(v);let J=Es(h);g=Math.ceil(W/J)}},T=async()=>{if(v.length===0){alert("You need to input an exercise first");return}i(6,d="practice"),i(7,A=h),i(10,y=new Map),o.start(A,4),_=setInterval(x,100)},O=()=>{console.log("stop practice"),i(6,d=""),i(7,A=u),clearInterval(_),o.stop()},B=()=>{if(i(1,a.textContent="",a),v.length===0)return;let W=Es(h);const J=Ahe(v,c,W);let se=Math.ceil(os(J)/4*4)+.5;console.log(J,se);const ge=lr({width:W8,height:ghe,marginLeft:40,x:{label:"time in beats",domain:[0,se]},y:{},marks:[fa(_n(0,se,1),{stroke:"#ddd"}),fa(_n(0,se,4)),ma(J,{symbol:"times",stroke:"#333",x:fe=>fe,r:5})]});a.appendChild(ge);for(const[fe,me]of y){const xe=me[0];W=Es(fe);const ye=me.map(Ee=>(Ee-xe)/W),we=lr({width:W8,height:70,marginLeft:40,x:{label:"time in beats",domain:[0,se]},y:{label:`${fe} BPM`,ticks:[]},marks:[fa(_n(0,se,1),{stroke:"#ddd"}),fa(_n(0,se,4)),ma(ye,{symbol:"times",stroke:"#333",x:Ee=>Ee,y:0,r:5})]});a.appendChild(we)}};ur(B);const P=W=>{const J=W.target.value,se=new Map([["quarter",_n(0,8,1)],["eighth",_n(0,8,.5)],["triplets",_n(0,8,1/3)],["quintuplets",_n(0,8,1/5)],["swing",_n(0,8,.5).map((me,xe)=>xe%2===0?xe:xe+.2)]]),ge=Es(h);i(5,c="off");const fe=se.get(J);i(9,v=fe.map(me=>me*ge)),g=Math.ceil(os(fe)+1),B()},L=()=>({initialTempo:h,targetTempo:u,tempoIncrease:m,quantize:c,currentStep:d,currentTempo:A,firstTimeStamp:p,exerciseNotes:v,exerciseBeatCount:g,practiceRecordings:y}),N=W=>{(v.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(v.length>0&&F(),i(2,h=W.initialTempo),i(3,u=W.targetTempo),i(4,m=W.tempoIncrease),i(5,c=W.quantize),i(6,d=W.currentStep),i(7,A=W.currentTempo),i(8,p=W.firstTimeStamp),i(9,v=W.exerciseNotes),g=W.exerciseBeatCount,i(10,y=W.practiceRecordings),y.dataType&&i(10,y=new Map(y.value)),B())},F=()=>{v.length>0&&Zr(r.id,L())};hr(()=>{clearInterval(_),o.stop(),F()});function z(W){h=W,i(2,h)}function G(W){u=W,i(3,u)}function H(){m=$n(this.value),i(4,m)}function j(){c=Ir(this),i(5,c)}function q(W){En[W?"unshift":"push"](()=>{a=W,i(1,a)})}const Q=()=>{confirm("Reset practice?")&&(F(),i(10,y=new Map),i(8,p=performance.now()),B())},k=()=>N(uhe),K=()=>S({timestamp:performance.now()});return e.$$set=W=>{"demoInfo"in W&&i(0,r=W.demoInfo)},[r,a,h,u,m,c,d,A,p,v,y,S,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K]}class yhe extends Ai{constructor(t){super(),gi(this,t,vhe,phe,pi,{demoInfo:0},null,[-1,-1])}}function bhe(e,t,i){const r=e.slice();return r[34]=t[i],r}function Mhe(e,t,i){const r=e.slice();return r[34]=t[i],r}function _he(e){let t;return{c(){t=ie("option"),t.textContent=`${e[34]}`,t.__value=e[34],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function Che(e){let t;return{c(){t=ie("option"),t.textContent=`${e[34]}`,t.__value=e[34],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function Ehe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae,Ke,Ue,ct,vt,dt,It,rt,Lt,hn,Et,xt,en,_t,Kt,Dt,Nt,St,pe,_e,De,Be,Le;function ke(wt){e[21](wt)}let ce={label:"initial tempo",title:"Set a tempo at which you are able to input the exercise precisely (in BPM)",callback:e[16]};e[2]!==void 0&&(ce.value=e[2]),c=new Ya({props:ce}),En.push(()=>Di(c,"value",ke));function X(wt){e[22](wt)}let Y={label:"target tempo",title:"Set the tempo you want to be able to play the exercise at (in BPM)",callback:e[16]};e[3]!==void 0&&(Y.value=e[3]),p=new Ya({props:Y}),En.push(()=>Di(p,"value",X));let be=nn(["off","32nd","16th","8th"]),Te=[];for(let wt=0;wt<4;wt+=1)Te[wt]=_he(Mhe(e,be,wt));let We=nn(["quarter","eighth","quarter-triplets","swing"]),tt=[];for(let wt=0;wt<4;wt+=1)tt[wt]=Che(bhe(e,We,wt));return _t=new es({props:{getExportData:e[18],demoId:e[0].id}}),Dt=new ts({props:{loadData:e[19]}}),St=new ns({props:{demoId:e[0].id,loadData:e[19]}}),_e=new kr({props:{noteOn:e[11]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Adjust the initial and target tempo, record an exercise at the inital
        tempo, and then practice it with increasing speed until you reach your
        target tempo. The notes you play are displayed in a guitar-tab-like
        visualization with crosses, numbers above notes indicate the fret. The
        darkness (white to black) encodes the notes' velocities, so eventual
        noise (unintended notes) is less distracting.`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),gt(p.$$.fragment),g=ue(),y=ie("label"),E=ze(`tempo increase
            `),_=ie("input"),S=ue(),x=ie("label"),C=ze(`quantize exercise
            `),w=ie("select");for(let wt=0;wt<4;wt+=1)Te[wt].c();T=ue(),O=ie("div"),B=ie("label"),P=ze(`pre-defined exercise
            `),L=ie("select"),N=ie("option");for(let wt=0;wt<4;wt+=1)tt[wt].c();F=ue(),z=ie("button"),G=ze("input exercise"),j=ue(),q=ie("button"),Q=ze("save exercise"),K=ue(),W=ie("button"),J=ze("start practice"),ge=ue(),fe=ie("button"),me=ze("stop practice"),ye=ue(),we=ie("div"),Ee=ze("current step: "),He=ie("b"),Ae=ze(e[6]),Ke=ze(" current tempo: "),Ue=ie("b"),ct=ze(e[7]),vt=ze(" BPM"),dt=ue(),It=ie("div"),rt=ue(),Lt=ie("div"),hn=ie("button"),Et=ze("reset practice"),en=ue(),gt(_t.$$.fragment),Kt=ue(),gt(Dt.$$.fragment),Nt=ue(),gt(St.$$.fragment),pe=ue(),gt(_e.$$.fragment),de(h,"class","explanation"),de(_,"type","number"),de(_,"min","1"),de(_,"max","20"),de(_,"step","1"),de(y,"title","Set the tempo increase between practice runs (in BPM)"),e[5]===void 0&&mr(()=>e[24].call(w)),de(m,"class","control"),N.selected=!0,N.disabled=!0,N.__value="",rn(N,N.__value),de(z,"title","Start recording the exercise."),z.disabled=H=e[6]==="input exercise"||e[6]==="practice",de(q,"title","Stop recording the exercise."),q.disabled=k=e[6]!=="input exercise",de(W,"title","Start recording the practice with speed-up."),W.disabled=se=e[9].length===0,de(fe,"title","Stop recording the practice with speed-up."),fe.disabled=xe=e[6]!=="practice",de(O,"class","control"),de(It,"class","visualization"),de(hn,"title","Clear practice but not exercise"),hn.disabled=xt=e[6]!=="",de(Lt,"class","control"),de(t,"class","demo")},m(wt,Zt){Rt(wt,t,Zt),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(m,A),ft(p,m,null),D(m,g),D(m,y),D(y,E),D(y,_),rn(_,e[4]),D(m,S),D(m,x),D(x,C),D(x,w);for(let qt=0;qt<4;qt+=1)Te[qt]&&Te[qt].m(w,null);ri(w,e[5],!0),D(t,T),D(t,O),D(O,B),D(B,P),D(B,L),D(L,N);for(let qt=0;qt<4;qt+=1)tt[qt]&&tt[qt].m(L,null);D(O,F),D(O,z),D(z,G),D(O,j),D(O,q),D(q,Q),D(O,K),D(O,W),D(W,J),D(O,ge),D(O,fe),D(fe,me),D(t,ye),D(t,we),D(we,Ee),D(we,He),D(He,Ae),D(we,Ke),D(we,Ue),D(Ue,ct),D(we,vt),D(t,dt),D(t,It),e[25](It),D(t,rt),D(t,Lt),D(Lt,hn),D(hn,Et),D(Lt,en),ft(_t,Lt,null),D(Lt,Kt),ft(Dt,Lt,null),D(Lt,Nt),ft(St,Lt,null),D(t,pe),ft(_e,t,null),De=!0,Be||(Le=[nt(_,"input",e[23]),nt(w,"change",e[24]),nt(w,"change",e[16]),nt(L,"change",e[17]),nt(z,"click",e[12]),nt(q,"click",e[13]),nt(W,"click",e[14]),nt(fe,"click",e[15]),nt(hn,"click",e[26])],Be=!0)},p(wt,Zt){(!De||Zt[0]&1)&&r!==(r=wt[0].title+"")&&Ht(a,r);const qt={};!d&&Zt[0]&4&&(d=!0,qt.value=wt[2],Oi(()=>d=!1)),c.$set(qt);const dn={};!v&&Zt[0]&8&&(v=!0,dn.value=wt[3],Oi(()=>v=!1)),p.$set(dn),Zt[0]&16&&$n(_.value)!==wt[4]&&rn(_,wt[4]),Zt[0]&32&&ri(w,wt[5]),(!De||Zt[0]&64&&H!==(H=wt[6]==="input exercise"||wt[6]==="practice"))&&(z.disabled=H),(!De||Zt[0]&64&&k!==(k=wt[6]!=="input exercise"))&&(q.disabled=k),(!De||Zt[0]&512&&se!==(se=wt[9].length===0))&&(W.disabled=se),(!De||Zt[0]&64&&xe!==(xe=wt[6]!=="practice"))&&(fe.disabled=xe),(!De||Zt[0]&64)&&Ht(Ae,wt[6]),(!De||Zt[0]&128)&&Ht(ct,wt[7]),(!De||Zt[0]&64&&xt!==(xt=wt[6]!==""))&&(hn.disabled=xt);const Qt={};Zt[0]&1&&(Qt.demoId=wt[0].id),_t.$set(Qt);const xi={};Zt[0]&1&&(xi.demoId=wt[0].id),St.$set(xi)},i(wt){De||(ut(c.$$.fragment,wt),ut(p.$$.fragment,wt),ut(_t.$$.fragment,wt),ut(Dt.$$.fragment,wt),ut(St.$$.fragment,wt),ut(_e.$$.fragment,wt),De=!0)},o(wt){ht(c.$$.fragment,wt),ht(p.$$.fragment,wt),ht(_t.$$.fragment,wt),ht(Dt.$$.fragment,wt),ht(St.$$.fragment,wt),ht(_e.$$.fragment,wt),De=!1},d(wt){wt&&Bt(t),mt(c),mt(p),Gn(Te,wt),Gn(tt,wt),e[25](null),mt(_t),mt(Dt),mt(St),mt(_e),Be=!1,Vi(Le)}}}let j8=1e3,$8=150,e1=6;function whe(e,t,i){const r=e[0].time;return e.map(o=>{let h=o.time-r;if(t!=="off"){let m;t==="8th"&&(m=i/2),t==="16th"&&(m=i/4),t==="32nd"&&(m=i/8),h=Math.round(h/m)*m}const u=h/i;return{...o,time:u}})}function xhe(e,t,i){let{demoInfo:r}=t,a,o=new V4,h=!0,u,m=60,c=120,d=10,A="off",p="",v=c,g=performance.now(),y=[],E,_=new Map,S=[64,59,55,50,45,40];const x=S.map(xs.fromMidiSharps),C=async W=>{const J=(W.timestamp-g)/1e3,se=W.message.channel-1,ge={time:J,string:se,fret:W.note.number-S[se],velocity:W.rawVelocity};if(p==="input exercise")i(9,y=[...y,ge]);else if(p==="practice"){_.has(v)||_.set(v,[]);const fe=_.get(v);h&&fe.push(ge)}L()},w=async()=>{const W=_.get(v);if(!W||!W.length)return;const J=Pa(W,xe=>xe.time),ge=(performance.now()-g)/1e3-J;let fe=Es(v);ge/fe>=E&&(console.log("increasing bpm"),o.stop(),v<=c?(i(7,v+=d),h=!1,await cT(1),o.start(v,4),_.has(v)&&_.set(v,[]),h=!0):P())},T=()=>{i(6,p="input exercise"),i(9,y=[]),i(10,_=new Map),o.start(m,4),L()},O=()=>{if(i(6,p=""),o.stop(),y.length>0){const W=os(y,se=>se.time)-Pa(y,se=>se.time);let J=Es(m);E=Math.ceil(W/J)}},B=async()=>{if(y.length===0){alert("You need to input an exercise first");return}i(6,p="practice"),i(7,v=m),i(10,_=new Map),o.start(v,4),u=setInterval(w,100)},P=()=>{i(6,p=""),i(7,v=c),clearInterval(u),o.stop()},L=()=>{if(i(1,a.textContent="",a),y.length===0)return;let W=Es(m);const J=whe(y,A,W);let se=Math.ceil(os(J,fe=>fe.time)/4*4)+.5;const ge=lr({width:j8,height:$8,marginLeft:40,x:{label:"time in beats",domain:[0,se]},y:{domain:_n(0,e1),tickFormat:fe=>x[fe],tickSize:0},marks:[fa(_n(0,se,1),{stroke:"#ddd"}),Ss(_n(0,e1),{stroke:"#ddd"}),fa(_n(0,se,4)),ma(J,{symbol:"times",stroke:"#333",x:fe=>fe.time,y:fe=>fe.string,r:5})]});a.appendChild(ge);for(const[fe,me]of _){if(me.length===0)continue;const xe=me[0].time;W=Es(fe);const ye=me.map(Ee=>({...Ee,time:(Ee.time-xe)/W})),we=lr({width:j8,height:$8,marginLeft:40,x:{label:"time in beats",domain:[0,se]},y:{label:`${fe} BPM`,domain:_n(0,e1),tickFormat:Ee=>x[Ee],tickSize:0},color:{domain:[0,127],scheme:"Greys"},marks:[fa(_n(0,se,1),{stroke:"#ddd"}),fa(_n(0,se,4)),Ss(_n(0,e1),{stroke:"#ddd"}),ma(ye,{symbol:"times",stroke:"velocity",x:Ee=>Ee.time,y:Ee=>Ee.string,r:4}),Na(ye,{text:"fret",fill:"velocity",x:Ee=>Ee.time,y:Ee=>Ee.string,textAnchor:"middle",dy:-10})]});a.appendChild(we)}};ur(L);const N=W=>{const J=W.target.value,se=new Map([["quarter",_n(0,8,1)],["eighth",_n(0,8,.5)],["quarter-triplets",_n(0,8,1/3)],["swing",_n(0,8,.5).map((me,xe)=>xe%2===0?xe:xe+.2)]]),ge=Es(m);i(5,A="off");const fe=se.get(J);i(9,y=fe.map(me=>me*ge)),E=Math.ceil(os(fe)+1),i(9,y=y.map(me=>({time:me,string:5,fret:5}))),L()},F=()=>({initialTempo:m,targetTempo:c,tempoIncrease:d,quantize:A,currentStep:p,currentTempo:v,firstTimeStamp:g,exerciseNotes:y,exerciseBeatCount:E,practiceRecordings:_}),z=W=>{(y.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(y.length>0&&G(),i(2,m=W.initialTempo),i(3,c=W.targetTempo),i(4,d=W.tempoIncrease),i(5,A=W.quantize),i(6,p=W.currentStep),i(7,v=W.currentTempo),i(8,g=W.firstTimeStamp),i(9,y=W.exerciseNotes),E=W.exerciseBeatCount,i(10,_=W.practiceRecordings),_.dataType&&i(10,_=new Map(_.value)),L())},G=()=>{y.length>0&&Zr(r.id,F())};hr(()=>{clearInterval(u),o.stop(),G()});function H(W){m=W,i(2,m)}function j(W){c=W,i(3,c)}function q(){d=$n(this.value),i(4,d)}function Q(){A=Ir(this),i(5,A)}function k(W){En[W?"unshift":"push"](()=>{a=W,i(1,a)})}const K=()=>{confirm("Reset practice?")&&(G(),i(10,_=new Map),i(8,g=performance.now()),L())};return e.$$set=W=>{"demoInfo"in W&&i(0,r=W.demoInfo)},[r,a,m,c,d,A,p,v,g,y,_,C,T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K]}class She extends Ai{constructor(t){super(),gi(this,t,xhe,Ehe,pi,{demoInfo:0},null,[-1,-1])}}const Ihe=17,The=.07,Bhe=[{number:40,velocity:98,time:13.264099999999628,channel:6,string:5,fret:0,end:20.250099999999627,duration:6.985999999999999},{number:45,velocity:90,time:13.475099999999628,channel:5,string:4,fret:0,end:14.705199999999255,duration:1.2300999999996272},{number:52,velocity:127,time:13.714099999999627,channel:4,string:3,fret:2,end:14.728099999999628,duration:1.0140000000000011},{number:45,velocity:92,time:14.710099999999628,channel:5,string:4,fret:0,end:15.473199999999254,duration:.7630999999996266},{number:53,velocity:127,time:14.732099999999628,channel:4,string:3,fret:3,end:15.475099999999628,duration:.7430000000000003},{number:72,velocity:61,time:14.744199999999255,channel:2,string:1,fret:13,end:14.747199999999255,duration:.0030000000000001137},{number:61,velocity:127,time:14.751099999999628,channel:2,string:1,fret:2,end:15.505099999999628,duration:.7539999999999996},{number:57,velocity:127,time:14.754099999999628,channel:3,string:2,fret:2,end:15.495099999999628,duration:.7409999999999997},{number:64,velocity:115,time:14.759099999999627,channel:1,string:0,fret:0,end:15.794199999999256,duration:1.0350999999996287},{number:45,velocity:90,time:15.481099999999627,channel:5,string:4,fret:0,end:16.439099999999627,duration:.9580000000000002},{number:68,velocity:113,time:15.498199999999255,channel:3,string:2,fret:13,end:15.506099999999627,duration:.007900000000372387},{number:52,velocity:126,time:15.502199999999254,channel:4,string:3,fret:2,end:15.834199999999255,duration:.33200000000000074},{number:78,velocity:68,time:15.508099999999628,channel:2,string:1,fret:19,end:15.517099999999628,duration:.009000000000000341},{number:58,velocity:122,time:15.510199999999255,channel:3,string:2,fret:3,end:15.820099999999627,duration:.309900000000372},{number:60,velocity:111,time:15.520099999999628,channel:2,string:1,fret:1,end:15.807099999999627,duration:.28699999999999903},{number:64,velocity:127,time:15.800199999999254,channel:1,string:0,fret:0,end:16.744199999999253,duration:.9439999999999991},{number:61,velocity:127,time:15.812099999999628,channel:2,string:1,fret:2,end:16.376099999999628,duration:.5640000000000001},{number:58,velocity:127,time:15.824099999999628,channel:3,string:2,fret:3,end:16.398199999999257,duration:.5740999999996284},{number:52,velocity:121,time:15.839199999999256,channel:4,string:3,fret:2,end:16.416199999999254,duration:.5769999999999982},{number:60,velocity:90,time:16.381099999999627,channel:2,string:1,fret:1,end:16.726099999999626,duration:.34499999999999886},{number:58,velocity:120,time:16.402199999999254,channel:3,string:2,fret:3,end:16.715099999999627,duration:.3129000000003721},{number:52,velocity:114,time:16.425199999999254,channel:4,string:3,fret:2,end:16.700099999999626,duration:.27490000000037185},{number:45,velocity:72,time:16.44909999999963,channel:5,string:4,fret:0,end:16.67909999999963,duration:.23000000000000043},{number:45,velocity:94,time:16.686199999999253,channel:5,string:4,fret:0,end:17.004099999999628,duration:.31790000000037466},{number:53,velocity:127,time:16.704099999999627,channel:4,string:3,fret:3,end:17.00209999999963,duration:.2980000000000018},{number:58,velocity:127,time:16.718099999999627,channel:3,string:2,fret:3,end:17.311099999999627,duration:.593},{number:61,velocity:121,time:16.73109999999963,channel:2,string:1,fret:2,end:17.320099999999627,duration:.5889999999999986},{number:64,velocity:120,time:16.747199999999253,channel:1,string:0,fret:0,end:17.329099999999627,duration:.581900000000374},{number:52,velocity:107,time:17.007099999999628,channel:4,string:3,fret:2,end:17.297199999999254,duration:.2900999999996259},{number:45,velocity:103,time:17.012099999999627,channel:5,string:4,fret:0,end:18.284199999999256,duration:1.2720999999996287},{number:53,velocity:127,time:17.303099999999628,channel:4,string:3,fret:3,end:18.267099999999626,duration:.9639999999999986},{number:58,velocity:127,time:17.317099999999627,channel:3,string:2,fret:3,end:17.882099999999628,duration:.5650000000000013},{number:61,velocity:127,time:17.324199999999255,channel:2,string:1,fret:2,end:17.902099999999628,duration:.5779000000003727},{number:64,velocity:117,time:17.33309999999963,channel:1,string:0,fret:0,end:17.92009999999963,duration:.5869999999999997},{number:57,velocity:80,time:17.887099999999627,channel:3,string:2,fret:2,end:18.257099999999628,duration:.370000000000001},{number:61,velocity:121,time:17.907099999999627,channel:2,string:1,fret:2,end:18.243199999999256,duration:.3360999999996288},{number:65,velocity:118,time:17.924199999999257,channel:1,string:0,fret:1,end:19.152099999999628,duration:1.2279000000003713},{number:61,velocity:127,time:18.248199999999255,channel:2,string:1,fret:2,end:18.800099999999627,duration:.5519000000003729},{number:58,velocity:127,time:18.260199999999255,channel:3,string:2,fret:3,end:18.818199999999255,duration:.5579999999999998},{number:53,velocity:127,time:18.27209999999963,channel:4,string:3,fret:3,end:18.83609999999963,duration:.5640000000000001},{number:45,velocity:80,time:18.293099999999626,channel:5,string:4,fret:0,end:18.857099999999626,duration:.5640000000000001},{number:61,velocity:114,time:18.806099999999628,channel:2,string:1,fret:2,end:19.141199999999255,duration:.3350999999996276},{number:58,velocity:127,time:18.823099999999627,channel:3,string:2,fret:3,end:19.120199999999254,duration:.29709999999962733},{number:52,velocity:120,time:18.840099999999627,channel:4,string:3,fret:2,end:19.105199999999254,duration:.2650999999996273},{number:45,velocity:80,time:18.864199999999254,channel:5,string:4,fret:0,end:19.099099999999627,duration:.2349000000003727},{number:45,velocity:96,time:19.10609999999963,channel:5,string:4,fret:0,end:19.708199999999255,duration:.602099999999627},{number:71,velocity:100,time:19.125099999999627,channel:3,string:2,fret:16,end:19.149099999999628,duration:.02400000000000091},{number:52,velocity:126,time:19.130099999999626,channel:4,string:3,fret:2,end:19.709099999999626,duration:.5790000000000006},{number:57,velocity:127,time:19.146099999999628,channel:3,string:2,fret:2,end:19.413099999999627,duration:.26699999999999946},{number:61,velocity:124,time:19.146099999999628,channel:2,string:1,fret:2,end:19.405099999999628,duration:.25900000000000034},{number:64,velocity:108,time:19.15609999999963,channel:1,string:0,fret:0,end:19.750099999999627,duration:.5939999999999976},{number:60,velocity:98,time:19.407099999999627,channel:2,string:1,fret:1,end:19.742099999999628,duration:.33500000000000085},{number:57,velocity:111,time:19.417199999999255,channel:3,string:2,fret:2,end:19.729099999999626,duration:.3119000000003709},{number:45,velocity:96,time:19.71409999999963,channel:5,string:4,fret:0,end:20.270199999999257,duration:.5560999999996277},{number:67,velocity:69,time:19.71409999999963,channel:4,string:3,fret:17,end:19.719099999999628,duration:.004999999999999005},{number:53,velocity:127,time:19.723099999999626,channel:4,string:3,fret:3,end:20.273099999999626,duration:.5500000000000007},{number:58,velocity:125,time:19.733199999999254,channel:3,string:2,fret:3,end:20.291199999999254,duration:.5579999999999998},{number:61,velocity:121,time:19.744199999999253,channel:2,string:1,fret:2,end:20.30409999999963,duration:.5599000000003755},{number:64,velocity:116,time:19.756099999999627,channel:1,string:0,fret:0,end:20.559099999999628,duration:.8030000000000008},{number:40,velocity:71,time:20.26309999999963,channel:6,string:5,fret:0,end:22.244099999999627,duration:1.980999999999998},{number:62,velocity:92,time:20.277099999999628,channel:4,string:3,fret:12,end:20.29509999999963,duration:.018000000000000682},{number:45,velocity:99,time:20.279099999999627,channel:5,string:4,fret:0,end:21.784199999999256,duration:1.5050999999996293},{number:53,velocity:114,time:20.29209999999963,channel:4,string:3,fret:3,end:20.610199999999256,duration:.3180999999996281},{number:58,velocity:103,time:20.297199999999254,channel:3,string:2,fret:3,end:20.588099999999628,duration:.29090000000037364},{number:60,velocity:86,time:20.309099999999628,channel:2,string:1,fret:1,end:20.576099999999627,duration:.26699999999999946},{number:64,velocity:69,time:20.564099999999627,channel:1,string:0,fret:0,end:21.309099999999628,duration:.745000000000001},{number:61,velocity:119,time:20.58009999999963,channel:2,string:1,fret:2,end:21.29809999999963,duration:.718},{number:58,velocity:124,time:20.595199999999256,channel:3,string:2,fret:3,end:21.287099999999626,duration:.6919000000003699},{number:52,velocity:114,time:20.617099999999628,channel:4,string:3,fret:2,end:21.273099999999626,duration:.6559999999999988},{number:52,velocity:110,time:21.277099999999628,channel:4,string:3,fret:2,end:21.793199999999256,duration:.5160999999996285},{number:58,velocity:124,time:21.29209999999963,channel:3,string:2,fret:3,end:21.543099999999626,duration:.25099999999999767},{number:61,velocity:115,time:21.302099999999626,channel:2,string:1,fret:2,end:21.532099999999627,duration:.23000000000000043},{number:64,velocity:90,time:21.314199999999254,channel:1,string:0,fret:0,end:21.518099999999627,duration:.2039000000003739},{number:64,velocity:109,time:21.523099999999626,channel:1,string:0,fret:0,end:21.824199999999255,duration:.30109999999962866},{number:61,velocity:113,time:21.537199999999256,channel:2,string:1,fret:2,end:21.812099999999628,duration:.27490000000037185},{number:58,velocity:104,time:21.547099999999627,channel:3,string:2,fret:3,end:21.800199999999254,duration:.25309999999962685},{number:45,velocity:105,time:21.791099999999627,channel:5,string:4,fret:0,end:23.228199999999255,duration:1.437099999999628},{number:53,velocity:125,time:21.79809999999963,channel:4,string:3,fret:3,end:22.270099999999626,duration:.47199999999999775},{number:57,velocity:117,time:21.813199999999256,channel:3,string:2,fret:2,end:22.283199999999255,duration:.46999999999999886},{number:61,velocity:121,time:21.817099999999627,channel:2,string:1,fret:2,end:22.288199999999254,duration:.4710999999996268},{number:64,velocity:103,time:21.82709999999963,channel:1,string:0,fret:0,end:22.523099999999626,duration:.695999999999998},{number:49,velocity:39,time:22.251199999999255,channel:6,string:5,fret:9,end:22.285099999999627,duration:.03390000000037219},{number:52,velocity:113,time:22.279099999999627,channel:4,string:3,fret:2,end:22.561099999999627,duration:.28200000000000003},{number:40,velocity:56,time:22.282099999999627,channel:6,string:5,fret:0,end:23.213199999999254,duration:.9310999999996277},{number:57,velocity:107,time:22.286099999999628,channel:3,string:2,fret:2,end:22.544099999999627,duration:.2579999999999991},{number:61,velocity:109,time:22.293099999999626,channel:2,string:1,fret:2,end:22.533199999999255,duration:.24009999999962872},{number:64,velocity:87,time:22.527199999999254,channel:1,string:0,fret:0,end:22.986199999999254,duration:.45899999999999963},{number:60,velocity:120,time:22.538199999999254,channel:2,string:1,fret:1,end:23.006099999999627,duration:.46790000000037324},{number:58,velocity:127,time:22.549099999999626,channel:3,string:2,fret:3,end:23.024099999999628,duration:.4750000000000014},{number:52,velocity:123,time:22.565099999999628,channel:4,string:3,fret:2,end:23.039099999999628,duration:.4740000000000002},{number:64,velocity:88,time:22.989099999999627,channel:1,string:0,fret:0,end:23.288199999999254,duration:.2990999999996262},{number:61,velocity:110,time:23.01009999999963,channel:2,string:1,fret:2,end:23.26909999999963,duration:.25900000000000034},{number:57,velocity:106,time:23.02809999999963,channel:3,string:2,fret:2,end:23.258099999999626,duration:.22999999999999687},{number:52,velocity:96,time:23.049099999999626,channel:4,string:3,fret:2,end:23.231199999999255,duration:.1820999999996289},{number:40,velocity:58,time:23.224199999999254,channel:6,string:5,fret:0,end:23.697199999999256,duration:.47300000000000253},{number:45,velocity:101,time:23.237199999999255,channel:5,string:4,fret:0,end:23.500099999999627,duration:.2629000000003714},{number:52,velocity:127,time:23.256199999999254,channel:4,string:3,fret:2,end:23.402199999999254,duration:.1460000000000008},{number:58,velocity:127,time:23.261099999999626,channel:3,string:2,fret:3,end:23.371199999999256,duration:.11009999999962972},{number:60,velocity:120,time:23.27509999999963,channel:2,string:1,fret:1,end:23.356199999999255,duration:.08109999999962625},{number:64,velocity:104,time:23.292199999999255,channel:1,string:0,fret:0,end:23.437099999999628,duration:.14490000000037284},{number:64,velocity:83,time:23.44109999999963,channel:1,string:0,fret:0,end:23.741099999999626,duration:.29999999999999716},{number:59,velocity:107,time:23.459099999999626,channel:2,string:1,fret:0,end:23.732199999999256,duration:.27309999999962997},{number:55,velocity:104,time:23.477099999999627,channel:3,string:2,fret:0,end:23.723099999999626,duration:.24599999999999866},{number:50,velocity:108,time:23.491099999999626,channel:4,string:3,fret:0,end:23.619099999999627,duration:.1280000000000001},{number:45,velocity:106,time:23.508199999999256,channel:5,string:4,fret:0,end:23.604099999999626,duration:.0959000000003698},{number:53,velocity:69,time:23.702199999999255,channel:5,string:4,fret:8,end:23.736199999999254,duration:.03399999999999892},{number:40,velocity:111,time:23.707099999999627,channel:6,string:5,fret:0,end:23.72009999999963,duration:.013000000000001677},{number:62,velocity:110,time:23.71709999999963,channel:6,string:5,fret:22,end:23.736199999999254,duration:.019099999999625084},{number:56,velocity:127,time:23.727199999999254,channel:3,string:2,fret:1,end:24.213099999999628,duration:.4859000000003739},{number:52,velocity:127,time:23.730099999999627,channel:4,string:3,fret:2,end:24.19909999999963,duration:.4690000000000012},{number:47,velocity:91,time:23.73409999999963,channel:5,string:4,fret:2,end:24.194099999999626,duration:.4599999999999973},{number:40,velocity:108,time:23.73409999999963,channel:6,string:5,fret:0,end:25.178099999999628,duration:1.443999999999999},{number:60,velocity:125,time:23.73709999999963,channel:2,string:1,fret:1,end:24.483099999999627,duration:.7459999999999987},{number:64,velocity:101,time:23.74309999999963,channel:1,string:0,fret:0,end:24.47009999999963,duration:.7270000000000003},{number:47,velocity:100,time:24.201099999999627,channel:5,string:4,fret:2,end:24.976199999999256,duration:.7750999999996289},{number:53,velocity:119,time:24.203099999999626,channel:4,string:3,fret:3,end:24.508099999999626,duration:.3049999999999997},{number:55,velocity:123,time:24.21709999999963,channel:3,string:2,fret:0,end:24.50209999999963,duration:.28500000000000014},{number:64,velocity:120,time:24.474199999999254,channel:1,string:0,fret:0,end:24.913199999999254,duration:.43900000000000006},{number:59,velocity:121,time:24.488099999999626,channel:2,string:1,fret:0,end:24.939099999999627,duration:.4510000000000005},{number:55,velocity:124,time:24.506199999999254,channel:3,string:2,fret:0,end:25.21109999999963,duration:.7049000000003751},{number:52,velocity:112,time:24.517099999999626,channel:4,string:3,fret:2,end:25.190099999999628,duration:.6730000000000018},{number:64,velocity:101,time:24.918099999999626,channel:1,string:0,fret:0,end:25.23709999999963,duration:.3190000000000026},{number:59,velocity:92,time:24.942199999999254,channel:2,string:1,fret:0,end:25.224099999999627,duration:.2819000000003733},{number:47,velocity:91,time:24.982199999999256,channel:5,string:4,fret:2,end:25.195199999999254,duration:.2129999999999974},{number:40,velocity:88,time:25.18809999999963,channel:6,string:5,fret:0,end:25.64709999999963,duration:.45899999999999963},{number:47,velocity:103,time:25.201099999999627,channel:5,string:4,fret:2,end:25.42909999999963,duration:.22800000000000153},{number:53,velocity:116,time:25.208199999999255,channel:4,string:3,fret:3,end:25.415099999999626,duration:.20690000000037045},{number:55,velocity:115,time:25.215099999999627,channel:3,string:2,fret:0,end:25.395099999999626,duration:.17999999999999972},{number:59,velocity:126,time:25.227199999999254,channel:2,string:1,fret:0,end:25.384099999999627,duration:.1569000000003733},{number:64,velocity:116,time:25.242099999999628,channel:1,string:0,fret:0,end:25.370199999999254,duration:.12809999999962685},{number:64,velocity:94,time:25.373199999999255,channel:1,string:0,fret:0,end:25.696199999999255,duration:.3230000000000004},{number:59,velocity:113,time:25.389099999999626,channel:2,string:1,fret:0,end:25.687099999999628,duration:.2980000000000018},{number:55,velocity:113,time:25.401199999999253,channel:3,string:2,fret:0,end:25.674099999999626,duration:.27290000000037296},{number:52,velocity:115,time:25.42009999999963,channel:4,string:3,fret:2,end:25.66709999999963,duration:.2469999999999999},{number:47,velocity:102,time:25.43509999999963,channel:5,string:4,fret:2,end:25.65609999999963,duration:.22100000000000009},{number:40,velocity:101,time:25.658099999999628,channel:6,string:5,fret:0,end:26.134099999999627,duration:.4759999999999991},{number:48,velocity:112,time:25.664199999999255,channel:5,string:4,fret:3,end:26.157099999999627,duration:.4929000000003718},{number:53,velocity:127,time:25.670199999999255,channel:4,string:3,fret:3,end:26.15009999999963,duration:.4799000000003737},{number:56,velocity:127,time:25.681099999999628,channel:3,string:2,fret:1,end:26.17009999999963,duration:.48900000000000077},{number:59,velocity:121,time:25.69109999999963,channel:2,string:1,fret:0,end:26.193099999999628,duration:.5019999999999989},{number:64,velocity:100,time:25.701099999999627,channel:1,string:0,fret:0,end:26.401099999999627,duration:.6999999999999993},{number:40,velocity:97,time:26.143199999999254,channel:6,string:5,fret:0,end:26.944099999999626,duration:.8009000000003716},{number:67,velocity:92,time:26.15309999999963,channel:4,string:3,fret:17,end:26.172099999999627,duration:.01899999999999835},{number:47,velocity:96,time:26.162099999999626,channel:5,string:4,fret:2,end:26.461199999999256,duration:.2990999999996298},{number:53,velocity:115,time:26.169099999999627,channel:4,string:3,fret:3,end:26.444099999999626,duration:.2749999999999986},{number:55,velocity:115,time:26.175099999999627,channel:3,string:2,fret:0,end:26.43509999999963,duration:.26000000000000156},{number:59,velocity:114,time:26.198099999999627,channel:2,string:1,fret:0,end:26.415099999999626,duration:.21699999999999875},{number:64,velocity:81,time:26.404099999999627,channel:1,string:0,fret:0,end:26.867199999999254,duration:.4630999999996277},{number:59,velocity:111,time:26.42009999999963,channel:2,string:1,fret:0,end:26.883199999999256,duration:.4630999999996277},{number:55,velocity:121,time:26.43809999999963,channel:3,string:2,fret:0,end:26.898199999999257,duration:.4600999999996276},{number:53,velocity:124,time:26.448199999999254,channel:4,string:3,fret:3,end:26.915099999999626,duration:.466900000000372},{number:47,velocity:102,time:26.469099999999628,channel:5,string:4,fret:2,end:26.928099999999628,duration:.45899999999999963},{number:64,velocity:58,time:26.87109999999963,channel:1,string:0,fret:0,end:29.29209999999963,duration:2.4209999999999994},{number:59,velocity:102,time:26.888199999999255,channel:2,string:1,fret:0,end:27.17909999999963,duration:.29090000000037364},{number:55,velocity:110,time:26.904199999999253,channel:3,string:2,fret:0,end:27.163199999999254,duration:.25900000000000034},{number:53,velocity:122,time:26.919099999999627,channel:4,string:3,fret:3,end:27.15309999999963,duration:.23400000000000176},{number:47,velocity:96,time:26.937099999999628,channel:5,string:4,fret:2,end:27.145199999999257,duration:.2080999999996287},{number:40,velocity:88,time:26.951099999999627,channel:6,string:5,fret:0,end:27.123099999999628,duration:.1720000000000006},{number:40,velocity:92,time:27.133099999999626,channel:6,string:5,fret:0,end:27.38809999999963,duration:.25500000000000256},{number:47,velocity:101,time:27.15009999999963,channel:5,string:4,fret:2,end:27.739099999999627,duration:.5889999999999986},{number:52,velocity:113,time:27.158099999999628,channel:4,string:3,fret:2,end:27.360099999999626,duration:.20199999999999818},{number:55,velocity:118,time:27.16709999999963,channel:3,string:2,fret:0,end:27.349199999999254,duration:.18209999999962534},{number:59,velocity:113,time:27.183099999999627,channel:2,string:1,fret:0,end:29.132099999999628,duration:1.9490000000000016},{number:55,velocity:114,time:27.35309999999963,channel:3,string:2,fret:0,end:28.959099999999626,duration:1.605999999999998},{number:53,velocity:118,time:27.364099999999627,channel:4,string:3,fret:3,end:28.770199999999257,duration:1.406099999999629},{number:40,velocity:94,time:27.398199999999257,channel:6,string:5,fret:0,end:27.652099999999628,duration:.25390000000037105},{number:40,velocity:87,time:27.70209999999963,channel:6,string:5,fret:0,end:28.407099999999627,duration:.7049999999999983},{number:47,velocity:64,time:27.753099999999627,channel:5,string:4,fret:2,end:28.59509999999963,duration:.8420000000000023},{number:40,velocity:84,time:28.538099999999627,channel:6,string:5,fret:0,end:31.107099999999626,duration:2.568999999999999},{number:47,velocity:81,time:28.722199999999255,channel:5,string:4,fret:2,end:30.264199999999256,duration:1.5420000000000016},{number:52,velocity:124,time:28.903199999999256,channel:4,string:3,fret:2,end:30.250199999999253,duration:1.3469999999999978},{number:55,velocity:106,time:29.085099999999628,channel:3,string:2,fret:0,end:31.09209999999963,duration:2.0070000000000014},{number:59,velocity:101,time:29.254099999999628,channel:2,string:1,fret:0,end:31.078099999999626,duration:1.823999999999998},{number:64,velocity:95,time:29.42009999999963,channel:1,string:0,fret:0,end:30.960099999999628,duration:1.5399999999999991}],Rhe="strumming-pattern",Ohe="2024-07-03T17:17:43.861Z",Dhe={pastSeconds:Ihe,maxNoteDistance:The,notes:Bhe,_demoId:Rhe,_date:Ohe};function Lhe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q;return T=new es({props:{getExportData:e[10],demoId:e[0].id}}),B=new ts({props:{loadData:e[11]}}),F=new ns({props:{demoId:e[0].id,loadData:e[11]}}),G=new kr({props:{noteOn:e[7],noteOff:e[8]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`This demo shows you how you strummed (up or down? which strings?), so
        you can make sure you strumm a pattern as intended. For example, try
        strumming <code>D U U D</code>. The upper chart shows you the when you
        played a note on which string. The lower chart shows you the time
        between the start of the first and last note of the chord (rectangle
        width) and which strings it spanned (rectangle y and height). Blue
        chords were strummed upward and orange ones downward. The strummin
        direction is further indicated by arrow heads. Due to how guitar tabs
        are drawn from the point of view of the guitarist, downward strumming
        will result in upward arrows in the lower visualization. Single notes
        are drawn in red.`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`time
            `),A=ie("input"),p=ue(),v=ie("label"),g=ze(`max. note distance
            `),y=ie("input"),E=ue(),_=ie("div"),S=ue(),x=ie("div"),C=ie("button"),C.textContent="reset",w=ue(),gt(T.$$.fragment),O=ue(),gt(B.$$.fragment),P=ue(),L=ie("button"),L.textContent="example",N=ue(),gt(F.$$.fragment),z=ue(),gt(G.$$.fragment),de(h,"class","explanation"),de(A,"type","number"),de(A,"min","10"),de(A,"max","300"),de(A,"step","10"),de(c,"title","time in seconds for past notes to be shown"),de(y,"type","number"),de(y,"min","0.01"),de(y,"max","5"),de(y,"step","0.01"),de(v,"title","maximum distance between notes such that they still count as beloning to the same chord"),de(m,"class","control"),de(_,"class","visualization"),de(C,"title","Clear all played notes"),de(x,"class","control"),de(t,"class","demo")},m(Q,k){Rt(Q,t,k),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A),rn(A,e[2]),D(m,p),D(m,v),D(v,g),D(v,y),rn(y,e[3]),D(t,E),D(t,_),e[15](_),D(t,S),D(t,x),D(x,C),D(x,w),ft(T,x,null),D(x,O),ft(B,x,null),D(x,P),D(x,L),D(x,N),ft(F,x,null),D(t,z),ft(G,t,null),H=!0,j||(q=[nt(A,"input",e[13]),nt(A,"change",e[9]),nt(y,"input",e[14]),nt(y,"change",e[9]),nt(C,"click",e[16]),nt(L,"click",e[17])],j=!0)},p(Q,[k]){(!H||k&1)&&r!==(r=Q[0].title+"")&&Ht(a,r),k&4&&$n(A.value)!==Q[2]&&rn(A,Q[2]),k&8&&$n(y.value)!==Q[3]&&rn(y,Q[3]);const K={};k&1&&(K.demoId=Q[0].id),T.$set(K);const W={};k&1&&(W.demoId=Q[0].id),F.$set(W)},i(Q){H||(ut(T.$$.fragment,Q),ut(B.$$.fragment,Q),ut(F.$$.fragment,Q),ut(G.$$.fragment,Q),H=!0)},o(Q){ht(T.$$.fragment,Q),ht(B.$$.fragment,Q),ht(F.$$.fragment,Q),ht(G.$$.fragment,Q),H=!1},d(Q){Q&&Bt(t),e[15](null),mt(T),mt(B),mt(F),mt(G),j=!1,Vi(q)}}}let X8=1e3,K8=200,Sv=6;function Phe(e,t,i){let{demoInfo:r}=t,a=[64,59,55,50,45,40];const o=a.map(xs.fromMidiSharps);let h,u=10,m=.05;const c=my("guitarMidiMinVelocity")??0,d=my("guitarMidiMinDuration")??0;console.log({minVelo:c,minDur:d});let A=0,p=[],v=new Map;const g=P=>{const L=(P.timestamp-A)/1e3,N=P.message.channel-1,F={number:P.note.number,velocity:P.rawVelocity,time:L,channel:P.message.channel,string:N,fret:P.note.number-a[N]};if(v.has(P.note.number)){const z=v.get(P.note.number);z.end===void 0&&(z.end=L)}p.push(F),v.set(P.note.number,F),E()},y=P=>{if(v.has(P.note.number)){const L=v.get(P.note.number),N=(P.timestamp-A)/1e3;L.end=N,L.duration=L.end-L.time}E()},E=()=>{const P=p.filter(q=>q.velocity>=c&&(q.duration===void 0||q.duration>=d));let L=.5;P.length>0&&(L=p.at(-1).time+.5);const N=L-u,F=p.filter(q=>q.end>N||q.end===void 0),G=H4(F,m).map(q=>{const Q=Ps(q,J=>J.string),k=Ps(q,J=>J.time),K=q.slice(1).map((J,se)=>J.string-q[se].string);let W;return Q[0]===Q[1]?W="single":W=Hf(K)>0?"up":"down",{minString:Q[0],maxString:Q[1],minTime:k[0],maxTime:k[1],direction:W}}),H=lr({width:X8,height:K8,marginLeft:60,marginBottom:40,x:{label:"time in seconds",domain:[N,L]},y:{label:"string",grid:!0,domain:_n(0,Sv),tickFormat:q=>o[q]},color:{type:"categorical",label:"MIDI channel",scheme:"observable10",reverse:!0,legend:!0,marginLeft:100,width:300,domain:_n(1,Sv+1)},opacity:{domain:[0,127]},marks:[Jo(F,{clip:!0,x:"time",y:"string",stroke:"channel",opacity:"velocity",strokeWidth:3})]}),j=lr({width:X8,height:K8,marginLeft:60,marginBottom:40,x:{label:"time in seconds",domain:[N,L]},y:{label:"string",grid:!0,domain:_n(0,Sv),tickFormat:q=>o[q],padding:.7},color:{type:"categorical",scheme:"observable10",legend:!0,marginLeft:100,width:300,domain:["up","down","single"]},marks:[hne(G,{clip:!0,x1:"minTime",x2:"maxTime",y1:"minString",y2:"maxString",fill:"direction",rx:5}),ma(G,{clip:!0,x:q=>(q.minTime+q.maxTime)/2,y:q=>q.direction==="down"?q.minString:q.maxString,fill:"direction",symbol:"diamond",r:10})]});i(1,h.textContent="",h),h.appendChild(H),h.appendChild(j)};ur(()=>{i(4,A=performance.now()),E()});const _=()=>({pastSeconds:u,maxNoteDistance:m,notes:p}),S=P=>{(p.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(p.length>0&&x(),i(2,u=P.pastSeconds),i(3,m=P.maxNoteDistance),i(5,p=P.notes),E())},x=()=>{p.length>0&&Zr(r.id,_())};hr(x);function C(){u=$n(this.value),i(2,u)}function w(){m=$n(this.value),i(3,m)}function T(P){En[P?"unshift":"push"](()=>{h=P,i(1,h)})}const O=()=>{confirm("Reset played notes?")&&(x(),i(5,p=[]),i(6,v=new Map),i(4,A=performance.now()),E())},B=()=>S(Dhe);return e.$$set=P=>{"demoInfo"in P&&i(0,r=P.demoInfo)},[r,h,u,m,A,p,v,g,y,E,_,S,x,C,w,T,O,B]}class Nhe extends Ai{constructor(t){super(),gi(this,t,Phe,Lhe,pi,{demoInfo:0})}}function Y8(e,t){return e==null?t:typeof e=="function"?e:i=>i[e]}function Fhe(e,t,i,r,a,o){const h=new Float64Array(o),u=(o-1)/(a-r);for(let m=0;m<e.length;++m){const c=e[m],d=t(c,m,e),A=i(c,m,e);if(!(Number.isFinite(d)&&Number.isFinite(A)))continue;const p=(d-r)*u,v=Math.floor(p),g=v+1;0<=v&&g<o?(h[v]+=(g-p)*A,h[g]+=(p-v)*A):v===-1?h[g]+=(p-v)*A:g===o&&(h[v]+=(g-p)*A)}return h}function q8(e,t=!1){const i=new Float64Array(5),r=new Float64Array(4);khe(i,r,e);const a=Float64Array.of(0,r[1]-i[1]*r[0],r[2]-i[2]*r[0],r[3]-i[3]*r[0],-i[4]*r[0]),o=1+i[1]+i[2]+i[3]+i[4],h=(r[0]+r[1]+r[2]+r[3])/o,u=(a[1]+a[2]+a[3]+a[4])/o;return{sigma:e,negative:t,a:i,b_causal:r,b_anticausal:a,sum_causal:h,sum_anticausal:u}}function khe(e,t,i){const a=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/i),h=Math.exp(-1.723/i),u=.6318/i,m=1.997/i,c=Float64Array.of(-o*Math.cos(u),o*Math.sin(u),-o*Math.cos(-u),o*Math.sin(-u),-h*Math.cos(m),h*Math.sin(m),-h*Math.cos(-m),h*Math.sin(-m)),d=i*2.5066282746310007,A=Float64Array.of(a[0],a[1],0,0,0,0,0,0),p=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let v,g;for(g=2;g<8;g+=2){for(A[g]=c[g]*A[g-2]-c[g+1]*A[g-1],A[g+1]=c[g]*A[g-1]+c[g+1]*A[g-2],v=g-2;v>0;v-=2)A[v]+=c[g]*A[v-2]-c[g+1]*A[v-1],A[v+1]+=c[g]*A[v-1]+c[g+1]*A[v-2];for(v=0;v<=g;v+=2)A[v]+=a[g]*p[v]-a[g+1]*p[v+1],A[v+1]+=a[g]*p[v+1]+a[g+1]*p[v];for(p[g+2]=c[g]*p[g]-c[g+1]*p[g+1],p[g+3]=c[g]*p[g+1]+c[g+1]*p[g],v=g;v>0;v-=2)p[v]+=c[g]*p[v-2]-c[g+1]*p[v-1],p[v+1]+=c[g]*p[v-1]+c[g+1]*p[v-2]}for(g=0;g<4;++g)v=g<<1,t[g]=A[v]/d,e[g+1]=p[v+2]}function Uhe(e,t,i,r=1,a=new Float64Array(i),o=new Float64Array(i),h=new Float64Array(5),u=a,m=Ghe){const c=r*2,d=r*3,A=r*4,p=r*i;let v,g;for(m(a,t,i,r,e.b_causal,3,e.a,4,e.sum_causal,h,e.sigma),g=4,v=A;g<i;++g,v+=r)a[g]=e.b_causal[0]*t[v]+e.b_causal[1]*t[v-r]+e.b_causal[2]*t[v-c]+e.b_causal[3]*t[v-d]-e.a[1]*a[g-1]-e.a[2]*a[g-2]-e.a[3]*a[g-3]-e.a[4]*a[g-4];for(m(o,t,i,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,h,e.sigma),g=4,v=p-r*5;g<i;++g,v-=r)o[g]=e.b_anticausal[1]*t[v+r]+e.b_anticausal[2]*t[v+c]+e.b_anticausal[3]*t[v+d]+e.b_anticausal[4]*t[v+A]-e.a[1]*o[g-1]-e.a[2]*o[g-2]-e.a[3]*o[g-3]-e.a[4]*o[g-4];if(e.negative)for(g=0,v=0;g<i;++g,v+=r)u[v]=a[g]+o[i-g-1];else for(g=0,v=0;g<i;++g,v+=r)u[v]=Math.max(0,a[g]+o[i-g-1]);return u}function Ghe(e,t,i,r,a,o,h,u,m,c,d,A=.5){const p=Math.abs(r)*i,v=r<0?p+r:0;let g,y,E;for(y=0;y<u;++y)for(c[y]=y<=o?a[y]:0,E=1;E<=u&&E<=y;++E)c[y]-=h[E]*c[y-E];for(E=0;E<u;++E)for(e[E]=0,y=1;y<=E;++y)g=v+r*y,g>=0&&g<p&&(e[E]+=c[E-y]*t[g]);const _=t[v],S=Math.ceil(d*10);for(y=0;y<S;++y){for(E=0;E<u;++E)e[E]+=c[E]*_;if(m-=Math.abs(c[0]),m<=A)break;for(c[u]=y+u<=o?a[y+u]:0,E=1;E<=u;++E)c[u]-=h[E]*c[u-E];for(E=0;E<u;++E)c[E]=c[E+1]}}function Vhe(e,t,i=0){const r=e.length;let a,o;for(let h=0;h<r;++h){const u=t(e[h],h,e);u!=null&&(a===void 0?u>=u&&(a=o=u):(u<a&&(a=u),u>o&&(o=u)))}return[a-i,o+i]}function Qhe(e,t){const i=e.map(t).filter(c=>c!=null&&c>=c);i.sort((c,d)=>c-d);const r=Hhe(i),a=J8(i,.25),o=J8(i,.75),h=i.length,u=(o-a)/1.34;return 1.06*(Math.min(r,u)||r||Math.abs(a)||1)*Math.pow(h,-.2)}function Hhe(e){const t=e.length;let i=0,r,a=0,o=0;for(let h=0;h<t;++h){const u=e[h];r=u-a,a+=r/++i,o+=r*(u-a)}return i>1?Math.sqrt(o/(i-1)):NaN}function J8(e,t){const i=e.length;if(!i)return NaN;if((t=+t)<=0||i<2)return e[0];if(t>=1)return e[i-1];const r=(i-1)*t,a=Math.floor(r),o=e[a];return o+(e[a+1]-o)*(r-a)}function vd(e,t={}){const{adjust:i=1,pad:r=3,bins:a=512}=t,o=Y8(t.x,_=>_),h=Y8(t.weight,()=>1/e.length);let u=t.bandwidth??i*Qhe(e,o);const[m,c]=t.extent??Vhe(e,o,r*u),d=Fhe(e,o,h,m,c,a),A=(c-m)/(a-1),p=d.some(_=>_<0);let v=q8(u/A,p),g;function*y(_="x",S="y"){const x=E.grid(),C=1/A;for(let w=0;w<a;++w)yield{[_]:m+w*A,[S]:x[w]*C}}const E={[Symbol.iterator]:y,points:y,grid:()=>g||(g=Uhe(v,d,a)),extent:()=>[m,c],bandwidth(_){return arguments.length?(_!==u&&(u=_,g=null,v=q8(u/A,p)),E):u}};return E}const zhe=60,Whe="4:3",jhe=96,$he=0,Xhe=0,Khe=!1,Yhe=[0,.416,.787,1.166,1.502,1.820099999964237,2.16,2.448099999964237,2.751,3.069,3.449099999964237,3.749,4.069099999964237,4.415,4.7320999999642375,5.065,5.42,5.730099999964237,6.050099999964237,6.405,6.705,7.041099999964238,7.373,7.674,8.022099999964237,8.385,8.7,9.024099999964237,9.392,9.709,10.026,10.378,10.691099999964237,11.024099999964237,11.372099999964238,11.683099999964238,12.021099999964237,12.367099999964237,12.701099999964237,13.033099999964238,13.353099999964238,13.679,14.011099999964237,14.352099999964237,14.688099999964237,15.012099999964237,15.374099999964237,15.68,16.011,16.372,17.028,18.033099999964236,18.042099999964236,19.030099999964236,19.692,20.024,21.01809999996424,21.38109999996424,21.73609999996424,22.065099999964236,22.386,22.694099999964237,23.030099999964236,23.347,23.63109999996424,23.997,24.34909999996424,24.687,25.028099999964237,25.385,25.683,26.014099999964237,26.378,26.697099999964237,27.027099999964236,27.373099999964236,27.692,28.049099999964238,28.404,28.70709999996424,29.045,29.397099999964237,29.709099999964238,30.055,30.41609999996424,30.726,31.062099999964236,31.418099999964237,31.745099999964236],qhe="sub-division",Jhe="2024-06-11T18:42:10.274Z",o5={tempo:zhe,grid:Whe,binNote:jhe,adjustTime:$he,noteTickLimit:Xhe,showKde:Khe,notes:Yhe,_demoId:qhe,_date:Jhe};function Zhe(e,t,i){const r=e.slice();return r[27]=t[i],r}function ede(e,t,i){const r=e.slice();return r[27]=t[i],r}function tde(e){let t;return{c(){t=ie("option"),t.textContent=`${e[27]}`,t.__value=e[27],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function nde(e){let t;return{c(){t=ie("option"),t.textContent=`1/${e[27]} note`,t.__value=e[27],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function ide(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z=e[7]?"area":"bars",G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae,Ke,Ue,ct,vt,dt,It;function rt(Dt){e[15](Dt)}let Lt={callback:e[11]};e[2]!==void 0&&(Lt.value=e[2]),c=new Ya({props:Lt}),En.push(()=>Di(c,"value",rt));let hn=nn(Ns),Et=[];for(let Dt=0;Dt<hn.length;Dt+=1)Et[Dt]=tde(ede(e,hn,Dt));let xt=nn(aa),en=[];for(let Dt=0;Dt<xt.length;Dt+=1)en[Dt]=nde(Zhe(e,xt,Dt));K=new sl({props:{tempo:e[2],accent:+e[3].split(":")[0]}});function _t(Dt){e[22](Dt)}let Kt={saveToStorage:e[14],callback:e[11]};return e[8]!==void 0&&(Kt.notes=e[8]),J=new Ts({props:Kt}),En.push(()=>Di(J,"notes",_t)),fe=new es({props:{getExportData:e[12],demoId:e[0].id}}),xe=new ts({props:{loadData:e[13]}}),He=new ns({props:{demoId:e[0].id,loadData:e[13]}}),Ke=new ho({props:{key:" ",callback:e[24]}}),ct=new kr({props:{noteOn:e[9],controlChange:e[10]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Connect a MIDI instrument, choose your tempo and subdivision, and start
        playing. The bar chart will show you how often you hit each time bin and
        the last notes will be shown as ticks that fade out one new notes come
        in (from red for new to blue for old). You can play freely, use the
        integrated metronome, or play a song in the background (in another tab).
        All notes will be timed relative to the first one, but you can adjust
        all notes to make them earlier or later in case you messed up the first
        one.
        <i>Try playing without looking, focus on the metronome.</i>`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),p=ie("label"),v=ze(`grid
            `),g=ie("select");for(let Dt=0;Dt<Et.length;Dt+=1)Et[Dt].c();y=ue(),E=ie("label"),_=ze(`binning
            `),S=ie("select");for(let Dt=0;Dt<en.length;Dt+=1)en[Dt].c();x=ue(),C=ie("label"),w=ze(`adjust
            `),T=ie("input"),O=ue(),B=ie("label"),P=ze(`note ticks
            `),L=ie("input"),N=ue(),F=ie("button"),G=ze(z),H=ue(),j=ie("div"),q=ie("canvas"),Q=ue(),k=ie("div"),gt(K.$$.fragment),W=ue(),gt(J.$$.fragment),ge=ue(),gt(fe.$$.fragment),me=ue(),gt(xe.$$.fragment),ye=ue(),we=ie("button"),we.textContent="example",Ee=ue(),gt(He.$$.fragment),Ae=ue(),gt(Ke.$$.fragment),Ue=ue(),gt(ct.$$.fragment),de(h,"class","explanation"),e[3]===void 0&&mr(()=>e[16].call(g)),de(p,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[4]===void 0&&mr(()=>e[17].call(S)),de(E,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),de(T,"type","number"),de(T,"step","0.01"),de(T,"min","-2"),de(T,"max","2"),Ei(T,"width","55px"),de(C,"title","Shift all notes by an amount in seconds"),de(L,"type","number"),de(L,"step","1"),de(L,"min","0"),de(L,"max","100"),Ei(L,"width","55px"),de(B,"title","The number of most recent notes that are shown as ticks."),de(F,"title","Toggle between bars and area"),de(m,"class","control"),Ei(q,"width",wf+"px"),Ei(q,"height",Zy+"px"),de(j,"class","visualization"),de(k,"class","control"),de(t,"class","demo")},m(Dt,Nt){Rt(Dt,t,Nt),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(m,A),D(m,p),D(p,v),D(p,g);for(let St=0;St<Et.length;St+=1)Et[St]&&Et[St].m(g,null);ri(g,e[3],!0),D(m,y),D(m,E),D(E,_),D(E,S);for(let St=0;St<en.length;St+=1)en[St]&&en[St].m(S,null);ri(S,e[4],!0),D(m,x),D(m,C),D(C,w),D(C,T),rn(T,e[5]),D(m,O),D(m,B),D(B,P),D(B,L),rn(L,e[6]),D(m,N),D(m,F),D(F,G),D(t,H),D(t,j),D(j,q),e[21](q),D(t,Q),D(t,k),ft(K,k,null),D(k,W),ft(J,k,null),D(k,ge),ft(fe,k,null),D(k,me),ft(xe,k,null),D(k,ye),D(k,we),D(k,Ee),ft(He,k,null),D(t,Ae),ft(Ke,t,null),D(t,Ue),ft(ct,t,null),vt=!0,dt||(It=[nt(g,"change",e[16]),nt(g,"change",e[11]),nt(S,"change",e[17]),nt(S,"change",e[11]),nt(T,"input",e[18]),nt(T,"change",e[11]),nt(L,"input",e[19]),nt(L,"change",e[11]),nt(F,"click",e[20]),nt(we,"click",e[23])],dt=!0)},p(Dt,Nt){(!vt||Nt[0]&1)&&r!==(r=Dt[0].title+"")&&Ht(a,r);const St={};!d&&Nt[0]&4&&(d=!0,St.value=Dt[2],Oi(()=>d=!1)),c.$set(St),Nt[0]&8&&ri(g,Dt[3]),Nt[0]&16&&ri(S,Dt[4]),Nt[0]&32&&$n(T.value)!==Dt[5]&&rn(T,Dt[5]),Nt[0]&64&&$n(L.value)!==Dt[6]&&rn(L,Dt[6]),(!vt||Nt[0]&128)&&z!==(z=Dt[7]?"area":"bars")&&Ht(G,z);const pe={};Nt[0]&4&&(pe.tempo=Dt[2]),Nt[0]&8&&(pe.accent=+Dt[3].split(":")[0]),K.$set(pe);const _e={};!se&&Nt[0]&256&&(se=!0,_e.notes=Dt[8],Oi(()=>se=!1)),J.$set(_e);const De={};Nt[0]&1&&(De.demoId=Dt[0].id),fe.$set(De);const Be={};Nt[0]&1&&(Be.demoId=Dt[0].id),He.$set(Be)},i(Dt){vt||(ut(c.$$.fragment,Dt),ut(K.$$.fragment,Dt),ut(J.$$.fragment,Dt),ut(fe.$$.fragment,Dt),ut(xe.$$.fragment,Dt),ut(He.$$.fragment,Dt),ut(Ke.$$.fragment,Dt),ut(ct.$$.fragment,Dt),vt=!0)},o(Dt){ht(c.$$.fragment,Dt),ht(K.$$.fragment,Dt),ht(J.$$.fragment,Dt),ht(fe.$$.fragment,Dt),ht(xe.$$.fragment,Dt),ht(He.$$.fragment,Dt),ht(Ke.$$.fragment,Dt),ht(ct.$$.fragment,Dt),vt=!1},d(Dt){Dt&&Bt(t),mt(c),Gn(Et,Dt),Gn(en,Dt),e[21](null),mt(K),mt(J),mt(fe),mt(xe),mt(He),mt(Ke),mt(ct),dt=!1,Vi(It)}}}let wf=1e3,Zy=1e3;function rde(e,t,i){let{demoInfo:r}=t;const a=Math.PI*2;let o,h=120,u=Ns[0],m=64,c=0,d=1,A=!1,p=0,v=[];const g=G=>{v.length===0&&(p=G.timestamp);const H=(G.timestamp-p)/1e3;v.push(H),E()},y=G=>{const H=G.controller.number;H===14?i(2,h=ss(G.rawValue,0,120)+60):H===15?i(3,u=Ns[ss(Math.floor(G.rawValue/5),0,Ns.length-1)]):H===16?i(4,m=aa[ss(Math.floor(G.rawValue/5),0,aa.length-1)]):H===17?i(5,c=(ss(G.rawValue,0,100)-50)/100):H===18&&i(6,d=Math.round(ss(G.rawValue*2,0,200))),E()},E=()=>{const G=wf/2,H=Zy/2,j=wf*.4,q=j*.8,Q=j*.9,k=j*1.1,K=j*.95,W=Math.PI/2,J=o.getContext("2d"),se=window.devicePixelRatio,ge=o.getBoundingClientRect();i(1,o.width=ge.width*se,o),i(1,o.height=ge.height*se,o),J.scale(se,se),i(1,o.style.width=`${ge.width}px`,o),i(1,o.style.height=`${ge.height}px`,o),J.clearRect(0,0,wf,Zy);const[fe,me]=u.split(":").map(Ue=>+Ue),xe=Es(h)*fe,ye=v.map(Ue=>Ue+c),Ee=ye.map(Ue=>Ue%xe).map(Ue=>Ue/xe*a),He=wf*.08;if(!A){const Ue=m*fe/4;J.fillStyle="#f8f8f8",J.strokeStyle="#aaa";const vt=sb().domain([0,a]).thresholds(_n(Ue).map(It=>It/Ue*a))(Ee),dt=os(vt,It=>It.length);for(const It of vt){if(It.length===0)continue;const rt=It.length/dt*He,Lt=j+rt,hn=It.x0-W,Et=Math.cos(hn),xt=Math.sin(hn),en=It.x1-W,_t=Math.cos(en),Kt=Math.sin(en);J.beginPath(),J.moveTo(G+Et*j,H+xt*j),J.lineTo(G+Et*Lt,H+xt*Lt),J.arc(G,H,Lt,hn,en),J.lineTo(G+_t*j,H+Kt*j),J.closePath(),J.fill(),J.stroke()}}if(A&&Ee.length>0){let Ue=4/m;const It=vd(Ee,{bandwidth:Ue,pad:0,bins:360}).bandwidth(Ue),rt=os([...It],Lt=>Lt.y);J.beginPath();for(const Lt of It){const hn=Lt.x-W,Et=j+Lt.y/rt*He,xt=Math.cos(hn),en=Math.sin(hn);J.lineTo(G+xt*Et,H+en*Et)}J.closePath(),J.fillStyle="#e4f0fa",J.fill(),J.strokeStyle="#aaa",J.stroke()}if(d>0){J.lineWidth=3;const Ue=vt=>Sb(1-vt),ct=ye.slice(-d);for(const[vt,dt]of ct.entries()){const It=dt/xe*a-W,rt=Math.cos(It),Lt=Math.sin(It);J.strokeStyle=Ue(vt/ct.length),J.beginPath(),J.moveTo(G+rt*j,H+Lt*j),J.lineTo(G+rt*k,H+Lt*k),J.stroke()}}J.strokeStyle="#aaa",J.fillStyle="white",rd(J,G,H,j),J.lineWidth=2,J.fill(),J.stroke();const Ae=_n(fe).map(Ue=>a/fe*Ue-W),Ke=_n(fe*me).map(Ue=>a/(fe*me)*Ue-W);J.beginPath(),J.lineWidth=2;for(const Ue of Ae){const ct=Math.cos(Ue),vt=Math.sin(Ue);J.moveTo(G+ct*q,H+vt*q),J.lineTo(G+ct*K,H+vt*K)}J.stroke(),J.lineWidth=1,J.beginPath();for(const Ue of Ke){const ct=Math.cos(Ue),vt=Math.sin(Ue);J.moveTo(G+ct*Q,H+vt*Q),J.lineTo(G+ct*K,H+vt*K)}J.stroke()};ur(E);const _=()=>({tempo:h,grid:u,binNote:m,adjustTime:c,noteTickLimit:d,showKde:A,notes:v}),S=G=>{(v.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(v.length>0&&x(),i(2,h=G.tempo),i(3,u=G.grid),i(4,m=G.binNote),i(5,c=G.adjustTime),i(6,d=G.noteTickLimit??0),i(7,A=G.showKde??!1),i(8,v=G.notes),E())},x=()=>{v.length>0&&Zr(r.id,_())};hr(x);function C(G){h=G,i(2,h)}function w(){u=Ir(this),i(3,u)}function T(){m=Ir(this),i(4,m)}function O(){c=$n(this.value),i(5,c)}function B(){d=$n(this.value),i(6,d)}const P=()=>{i(7,A=!A),E()};function L(G){En[G?"unshift":"push"](()=>{o=G,i(1,o)})}function N(G){v=G,i(8,v)}const F=()=>S(o5),z=()=>g({timestamp:performance.now()});return e.$$set=G=>{"demoInfo"in G&&i(0,r=G.demoInfo)},[r,o,h,u,m,c,d,A,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z]}class sde extends Ai{constructor(t){super(),gi(this,t,rde,ide,pi,{demoInfo:0},null,[-1,-1])}}function ade(e,t,i){const r=e.slice();return r[25]=t[i],r}function ode(e,t,i){const r=e.slice();return r[25]=t[i],r}function lde(e){let t;return{c(){t=ie("option"),t.textContent=`${e[25]}`,t.__value=e[25],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function cde(e){let t;return{c(){t=ie("option"),t.textContent=`1/${e[25]} note`,t.__value=e[25],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function ude(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P=e[6]?"area":"bars",L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae,Ke,Ue;function ct(xt){e[14](xt)}let vt={callback:e[10]};e[2]!==void 0&&(vt.value=e[2]),c=new Ya({props:vt}),En.push(()=>Di(c,"value",ct));let dt=nn(Ns),It=[];for(let xt=0;xt<dt.length;xt+=1)It[xt]=lde(ode(e,dt,xt));let rt=nn(aa),Lt=[];for(let xt=0;xt<rt.length;xt+=1)Lt[xt]=cde(ade(e,rt,xt));j=new sl({props:{tempo:e[2],accent:+e[3].split(":")[0]}});function hn(xt){e[20](xt)}let Et={saveToStorage:e[13],callback:e[10]};return e[7]!==void 0&&(Et.notes=e[7]),Q=new Ts({props:Et}),En.push(()=>Di(Q,"notes",hn)),W=new es({props:{getExportData:e[11],demoId:e[0].id}}),se=new ts({props:{loadData:e[12]}}),xe=new ns({props:{demoId:e[0].id,loadData:e[12]}}),we=new ho({props:{key:" ",callback:e[22]}}),He=new kr({props:{noteOn:e[8],controlChange:e[9]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Connect a MIDI instrument, choose your tempo and subdivision, and start
        playing. The bar chart will show you how often you hit each time bin and
        the notes will be shown as ticks, one layer per bar. You can play
        freely, use the integrated metronome, or play a song in the background
        (in another tab). Light gray wedges show if you stayed within on bin
        size of your defined timing grid. All notes will be timed relative to
        the first one, but you can adjust all notes to make them earlier or
        later in case you messed up the first one.
        <i>Try playing without looking, focus on the metronome.</i>`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),p=ie("label"),v=ze(`grid
            `),g=ie("select");for(let xt=0;xt<It.length;xt+=1)It[xt].c();y=ue(),E=ie("label"),_=ze(`binning
            `),S=ie("select");for(let xt=0;xt<Lt.length;xt+=1)Lt[xt].c();x=ue(),C=ie("label"),w=ze(`adjust
            `),T=ie("input"),O=ue(),B=ie("button"),L=ze(P),N=ue(),F=ie("div"),z=ie("canvas"),G=ue(),H=ie("div"),gt(j.$$.fragment),q=ue(),gt(Q.$$.fragment),K=ue(),gt(W.$$.fragment),J=ue(),gt(se.$$.fragment),ge=ue(),fe=ie("button"),fe.textContent="example",me=ue(),gt(xe.$$.fragment),ye=ue(),gt(we.$$.fragment),Ee=ue(),gt(He.$$.fragment),de(h,"class","explanation"),e[3]===void 0&&mr(()=>e[15].call(g)),de(p,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[4]===void 0&&mr(()=>e[16].call(S)),de(E,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),de(T,"type","number"),de(T,"step","0.01"),de(T,"min","-2"),de(T,"max","2"),Ei(T,"width","55px"),de(C,"title","Shift all notes by an amount in seconds"),de(B,"title","Toggle between bars and area"),de(m,"class","control"),Ei(z,"width",dh+"px"),Ei(z,"height",eb+"px"),de(F,"class","visualization"),de(H,"class","control"),de(t,"class","demo")},m(xt,en){Rt(xt,t,en),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(m,A),D(m,p),D(p,v),D(p,g);for(let _t=0;_t<It.length;_t+=1)It[_t]&&It[_t].m(g,null);ri(g,e[3],!0),D(m,y),D(m,E),D(E,_),D(E,S);for(let _t=0;_t<Lt.length;_t+=1)Lt[_t]&&Lt[_t].m(S,null);ri(S,e[4],!0),D(m,x),D(m,C),D(C,w),D(C,T),rn(T,e[5]),D(m,O),D(m,B),D(B,L),D(t,N),D(t,F),D(F,z),e[19](z),D(t,G),D(t,H),ft(j,H,null),D(H,q),ft(Q,H,null),D(H,K),ft(W,H,null),D(H,J),ft(se,H,null),D(H,ge),D(H,fe),D(H,me),ft(xe,H,null),D(t,ye),ft(we,t,null),D(t,Ee),ft(He,t,null),Ae=!0,Ke||(Ue=[nt(g,"change",e[15]),nt(g,"change",e[10]),nt(S,"change",e[16]),nt(S,"change",e[10]),nt(T,"input",e[17]),nt(T,"change",e[10]),nt(B,"click",e[18]),nt(fe,"click",e[21])],Ke=!0)},p(xt,[en]){(!Ae||en&1)&&r!==(r=xt[0].title+"")&&Ht(a,r);const _t={};!d&&en&4&&(d=!0,_t.value=xt[2],Oi(()=>d=!1)),c.$set(_t),en&8&&ri(g,xt[3]),en&16&&ri(S,xt[4]),en&32&&$n(T.value)!==xt[5]&&rn(T,xt[5]),(!Ae||en&64)&&P!==(P=xt[6]?"area":"bars")&&Ht(L,P);const Kt={};en&4&&(Kt.tempo=xt[2]),en&8&&(Kt.accent=+xt[3].split(":")[0]),j.$set(Kt);const Dt={};!k&&en&128&&(k=!0,Dt.notes=xt[7],Oi(()=>k=!1)),Q.$set(Dt);const Nt={};en&1&&(Nt.demoId=xt[0].id),W.$set(Nt);const St={};en&1&&(St.demoId=xt[0].id),xe.$set(St)},i(xt){Ae||(ut(c.$$.fragment,xt),ut(j.$$.fragment,xt),ut(Q.$$.fragment,xt),ut(W.$$.fragment,xt),ut(se.$$.fragment,xt),ut(xe.$$.fragment,xt),ut(we.$$.fragment,xt),ut(He.$$.fragment,xt),Ae=!0)},o(xt){ht(c.$$.fragment,xt),ht(j.$$.fragment,xt),ht(Q.$$.fragment,xt),ht(W.$$.fragment,xt),ht(se.$$.fragment,xt),ht(xe.$$.fragment,xt),ht(we.$$.fragment,xt),ht(He.$$.fragment,xt),Ae=!1},d(xt){xt&&Bt(t),mt(c),Gn(It,xt),Gn(Lt,xt),e[19](null),mt(j),mt(Q),mt(W),mt(se),mt(xe),mt(we),mt(He),Ke=!1,Vi(Ue)}}}let dh=1e3,eb=1e3;function hde(e,t,i){let{demoInfo:r}=t;const a=Math.PI*2;let o,h=120,u=Ns[0],m=64,c=0,d=!1,A=0,p=[];const v=F=>{p.length===0&&(A=F.timestamp);const z=(F.timestamp-A)/1e3;p.push(z),y()},g=F=>{const z=F.controller.number;z===14?i(2,h=ss(F.rawValue,0,120)+60):z===15?i(3,u=Ns[ss(Math.floor(F.rawValue/5),0,Ns.length-1)]):z===16?i(4,m=aa[ss(Math.floor(F.rawValue/5),0,aa.length-1)]):z===17&&i(5,c=(ss(F.rawValue,0,100)-50)/100),y()},y=()=>{const F=dh/2,z=eb/2,G=dh*.2,H=G*.8,j=G*.9,q=G*.95,Q=Math.PI/2,k=o.getContext("2d"),K=window.devicePixelRatio,W=o.getBoundingClientRect();i(1,o.width=W.width*K,o),i(1,o.height=W.height*K,o),k.scale(K,K),i(1,o.style.width=`${W.width}px`,o),i(1,o.style.height=`${W.height}px`,o),k.clearRect(0,0,dh,eb);const[J,se]=u.split(":").map(ct=>+ct),ge=Es(h)*J,fe=p.map(ct=>ct+c),xe=fe.map(ct=>ct%ge).map(ct=>ct/ge*a),ye=G*.2,we=m*J/4;k.fillStyle="#f8f8f8";const Ee=a/we,He=_n(J*se).map(ct=>a/(J*se)*ct-Q),Ae=dh/2-10;for(const ct of He){const vt=Math.cos(ct-Ee),dt=Math.sin(ct-Ee),It=Math.cos(ct+Ee),rt=Math.sin(ct+Ee);k.moveTo(F,z),k.lineTo(F+vt*Ae,z+dt*Ae),k.lineTo(F+It*Ae,z+rt*Ae),k.closePath()}if(k.fill(),!d){k.fillStyle="#f8f8f8",k.strokeStyle="#aaa";const vt=sb().domain([0,a]).thresholds(_n(we).map(It=>It/we*a))(xe),dt=os(vt,It=>It.length);for(const It of vt){if(It.length===0)continue;const rt=It.length/dt*ye,Lt=G+rt,hn=It.x0-Q,Et=Math.cos(hn),xt=Math.sin(hn),en=It.x1-Q,_t=Math.cos(en),Kt=Math.sin(en);k.beginPath(),k.moveTo(F+Et*G,z+xt*G),k.lineTo(F+Et*Lt,z+xt*Lt),k.arc(F,z,Lt,hn,en),k.lineTo(F+_t*G,z+Kt*G),k.closePath(),k.fill(),k.stroke()}}if(d&&xe.length>0){let ct=4/m;const rt=vd(xe,{bandwidth:ct,pad:.1,bins:360}).bandwidth(ct),Lt=os([...rt],hn=>hn.y);k.beginPath();for(const hn of rt){const Et=hn.x-Q,xt=G+hn.y/Lt*ye,en=Math.cos(Et),_t=Math.sin(Et);k.lineTo(F+en*xt,z+_t*xt)}k.closePath(),k.fillStyle="#e4f0fa",k.fill(),k.strokeStyle="#aaa",k.stroke()}if(fe.length>0){k.lineWidth=2,k.strokeStyle="#888";const ct=fe,vt=Math.floor(fe.at(-1)/ge)+1,dt=(dh/2-G-ye-10)/vt;for(const[It,rt]of ct.entries()){const Lt=rt/ge*a-Q,hn=Math.cos(Lt),Et=Math.sin(Lt),xt=Math.floor(rt/ge),en=G+ye+xt*dt+5,_t=en+dt;k.beginPath(),k.moveTo(F+hn*en,z+Et*en),k.lineTo(F+hn*_t,z+Et*_t),k.stroke()}k.lineWidth=1,k.strokeStyle="#eee";for(let It=0;It<vt;It++){const rt=G+ye+It*dt+5;rd(k,F,z,rt)}}k.strokeStyle="#aaa",k.fillStyle="white",rd(k,F,z,G),k.lineWidth=2,k.fill(),k.stroke();const Ke=_n(J).map(ct=>a/J*ct-Q),Ue=_n(J*se).map(ct=>a/(J*se)*ct-Q);k.beginPath(),k.lineWidth=2;for(const ct of Ke){const vt=Math.cos(ct),dt=Math.sin(ct);k.moveTo(F+vt*H,z+dt*H),k.lineTo(F+vt*q,z+dt*q)}k.stroke(),k.lineWidth=1,k.beginPath();for(const ct of Ue){const vt=Math.cos(ct),dt=Math.sin(ct);k.moveTo(F+vt*j,z+dt*j),k.lineTo(F+vt*q,z+dt*q)}k.stroke()};ur(y);const E=()=>({tempo:h,grid:u,binNote:m,adjustTime:c,showKde:d,notes:p}),_=F=>{(p.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(p.length>0&&S(),i(2,h=F.tempo),i(3,u=F.grid),i(4,m=F.binNote),i(5,c=F.adjustTime),i(6,d=F.showKde??!1),i(7,p=F.notes),y())},S=()=>{p.length>0&&Zr(r.id,E())};hr(S);function x(F){h=F,i(2,h)}function C(){u=Ir(this),i(3,u)}function w(){m=Ir(this),i(4,m)}function T(){c=$n(this.value),i(5,c)}const O=()=>{i(6,d=!d),y()};function B(F){En[F?"unshift":"push"](()=>{o=F,i(1,o)})}function P(F){p=F,i(7,p)}const L=()=>_(o5),N=()=>v({timestamp:performance.now()});return e.$$set=F=>{"demoInfo"in F&&i(0,r=F.demoInfo)},[r,o,h,u,m,c,d,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N]}class dde extends Ai{constructor(t){super(),gi(this,t,hde,ude,pi,{demoInfo:0})}}const fde=60,mde="4:3",pde=96,gde=-.03,Ade=100,vde=!1,yde=[0,.416,.787,1.166,1.502,1.820099999964237,2.16,2.448099999964237,2.751,3.069,3.449099999964237,3.749,4.069099999964237,4.415,4.7320999999642375,5.065,5.42,5.730099999964237,6.050099999964237,6.405,6.705,7.041099999964238,7.373,7.674,8.022099999964237,8.385,8.7,9.024099999964237,9.392,9.709,10.026,10.378,10.691099999964237,11.024099999964237,11.372099999964238,11.683099999964238,12.021099999964237,12.367099999964237,12.701099999964237,13.033099999964238,13.353099999964238,13.679,14.011099999964237,14.352099999964237,14.688099999964237,15.012099999964237,15.374099999964237,15.68,16.011,16.372,17.028,18.033099999964236,18.042099999964236,19.030099999964236,19.692,20.024,21.01809999996424,21.38109999996424,21.73609999996424,22.065099999964236,22.386,22.694099999964237,23.030099999964236,23.347,23.63109999996424,23.997,24.34909999996424,24.687,25.028099999964237,25.385,25.683,26.014099999964237,26.378,26.697099999964237,27.027099999964236,27.373099999964236,27.692,28.049099999964238,28.404,28.70709999996424,29.045,29.397099999964237,29.709099999964238,30.055,30.41609999996424,30.726,31.062099999964236,31.418099999964237,31.745099999964236],bde="sub-division",Mde="2024-06-11T18:42:10.274Z",_de={tempo:fde,grid:mde,binNote:pde,adjustTime:gde,noteTickLimit:Ade,showKde:vde,notes:yde,_demoId:bde,_date:Mde};function Cde(e,t,i){const r=e.slice();return r[24]=t[i],r}function Ede(e,t,i){const r=e.slice();return r[24]=t[i],r}function wde(e){let t;return{c(){t=ie("option"),t.textContent=`${e[24]}`,t.__value=e[24],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function xde(e){let t;return{c(){t=ie("option"),t.textContent=`1/${e[24]} note`,t.__value=e[24],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function Sde(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae,Ke;function Ue(Et){e[14](Et)}let ct={callback:e[10]};e[2]!==void 0&&(ct.value=e[2]),c=new Ya({props:ct}),En.push(()=>Di(c,"value",Ue));let vt=nn(Ns),dt=[];for(let Et=0;Et<vt.length;Et+=1)dt[Et]=wde(Ede(e,vt,Et));let It=nn(aa),rt=[];for(let Et=0;Et<It.length;Et+=1)rt[Et]=xde(Cde(e,It,Et));H=new sl({props:{tempo:e[2],accent:+e[3].split(":")[0]}});function Lt(Et){e[20](Et)}let hn={saveToStorage:e[13],callback:e[10]};return e[7]!==void 0&&(hn.notes=e[7]),q=new Ts({props:hn}),En.push(()=>Di(q,"notes",Lt)),K=new es({props:{getExportData:e[11],demoId:e[0].id}}),J=new ts({props:{loadData:e[12]}}),me=new ns({props:{demoId:e[0].id,loadData:e[12]}}),ye=new ho({props:{key:" ",callback:e[22]}}),Ee=new kr({props:{noteOn:e[8],controlChange:e[9]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Connect a MIDI instrument, choose your tempo and subdivision, and start
        playing. The bar chart will show you how often you hit each time bin and
        the last notes will be shown as ticks that fade out one new notes come
        in (from red for new to blue for old). You can play freely, use the
        integrated metronome, or play a song in the background (in another tab).
        All notes will be timed relative to the first one, but you can adjust
        all notes to make them earlier or later in case you messed up the first
        one.
        <i>Try playing without looking, focus on the metronome.</i>`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),p=ie("label"),v=ze(`grid
            `),g=ie("select");for(let Et=0;Et<dt.length;Et+=1)dt[Et].c();y=ue(),E=ie("label"),_=ze(`binning
            `),S=ie("select");for(let Et=0;Et<rt.length;Et+=1)rt[Et].c();x=ue(),C=ie("label"),w=ze(`adjust
            `),T=ie("input"),O=ue(),B=ie("label"),P=ze(`note ticks
            `),L=ie("input"),N=ue(),F=ie("div"),z=ue(),G=ie("div"),gt(H.$$.fragment),j=ue(),gt(q.$$.fragment),k=ue(),gt(K.$$.fragment),W=ue(),gt(J.$$.fragment),se=ue(),ge=ie("button"),ge.textContent="example",fe=ue(),gt(me.$$.fragment),xe=ue(),gt(ye.$$.fragment),we=ue(),gt(Ee.$$.fragment),de(h,"class","explanation"),e[3]===void 0&&mr(()=>e[15].call(g)),de(p,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[4]===void 0&&mr(()=>e[16].call(S)),de(E,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),de(T,"type","number"),de(T,"step","0.01"),de(T,"min","-2"),de(T,"max","2"),Ei(T,"width","55px"),de(C,"title","Shift all notes by an amount in seconds"),de(L,"type","number"),de(L,"step","1"),de(L,"min","0"),de(L,"max","100"),Ei(L,"width","55px"),de(B,"title","The number of most recent notes that are shown as ticks."),de(m,"class","control"),de(F,"class","visualization"),de(G,"class","control"),de(t,"class","demo")},m(Et,xt){Rt(Et,t,xt),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(m,A),D(m,p),D(p,v),D(p,g);for(let en=0;en<dt.length;en+=1)dt[en]&&dt[en].m(g,null);ri(g,e[3],!0),D(m,y),D(m,E),D(E,_),D(E,S);for(let en=0;en<rt.length;en+=1)rt[en]&&rt[en].m(S,null);ri(S,e[4],!0),D(m,x),D(m,C),D(C,w),D(C,T),rn(T,e[5]),D(m,O),D(m,B),D(B,P),D(B,L),rn(L,e[6]),D(t,N),D(t,F),e[19](F),D(t,z),D(t,G),ft(H,G,null),D(G,j),ft(q,G,null),D(G,k),ft(K,G,null),D(G,W),ft(J,G,null),D(G,se),D(G,ge),D(G,fe),ft(me,G,null),D(t,xe),ft(ye,t,null),D(t,we),ft(Ee,t,null),He=!0,Ae||(Ke=[nt(g,"change",e[15]),nt(g,"change",e[10]),nt(S,"change",e[16]),nt(S,"change",e[10]),nt(T,"input",e[17]),nt(T,"change",e[10]),nt(L,"input",e[18]),nt(L,"change",e[10]),nt(ge,"click",e[21])],Ae=!0)},p(Et,[xt]){(!He||xt&1)&&r!==(r=Et[0].title+"")&&Ht(a,r);const en={};!d&&xt&4&&(d=!0,en.value=Et[2],Oi(()=>d=!1)),c.$set(en),xt&8&&ri(g,Et[3]),xt&16&&ri(S,Et[4]),xt&32&&$n(T.value)!==Et[5]&&rn(T,Et[5]),xt&64&&$n(L.value)!==Et[6]&&rn(L,Et[6]);const _t={};xt&4&&(_t.tempo=Et[2]),xt&8&&(_t.accent=+Et[3].split(":")[0]),H.$set(_t);const Kt={};!Q&&xt&128&&(Q=!0,Kt.notes=Et[7],Oi(()=>Q=!1)),q.$set(Kt);const Dt={};xt&1&&(Dt.demoId=Et[0].id),K.$set(Dt);const Nt={};xt&1&&(Nt.demoId=Et[0].id),me.$set(Nt)},i(Et){He||(ut(c.$$.fragment,Et),ut(H.$$.fragment,Et),ut(q.$$.fragment,Et),ut(K.$$.fragment,Et),ut(J.$$.fragment,Et),ut(me.$$.fragment,Et),ut(ye.$$.fragment,Et),ut(Ee.$$.fragment,Et),He=!0)},o(Et){ht(c.$$.fragment,Et),ht(H.$$.fragment,Et),ht(q.$$.fragment,Et),ht(K.$$.fragment,Et),ht(J.$$.fragment,Et),ht(me.$$.fragment,Et),ht(ye.$$.fragment,Et),ht(Ee.$$.fragment,Et),He=!1},d(Et){Et&&Bt(t),mt(c),Gn(dt,Et),Gn(rt,Et),e[19](null),mt(H),mt(q),mt(K),mt(J),mt(me),mt(ye),mt(Ee),Ae=!1,Vi(Ke)}}}let Z8=1e3;function Ide(e,t,i){let{demoInfo:r}=t,a,o=120,h=Ns[0],u=64,m=0,c=100,d=0,A=[];const p=N=>{A.length===0&&(d=N.timestamp);const F=(N.timestamp-d)/1e3;A.push(F),g()},v=N=>{const F=N.controller.number;F===14?i(2,o=ss(N.rawValue,0,120)+60):F===15?i(3,h=Ns[ss(Math.floor(N.rawValue/5),0,Ns.length-1)]):F===16?i(4,u=aa[ss(Math.floor(N.rawValue/5),0,aa.length-1)]):F===17?i(5,m=(ss(N.rawValue,0,100)-50)/100):F===18&&i(6,c=Math.round(ss(N.rawValue*2,0,200))),g()},g=()=>{const[N,F]=h.split(":").map(fe=>+fe),z=Es(o),H=A.map(fe=>(fe+m)/z).map(fe=>fe%N);let j=[];if(H.length>0){let fe=4/u,me=1,xe=Z8/2;j=vd(H,{bandwidth:fe,pad:me,bins:xe}).bandwidth(fe)}let q=[];c>0&&(q=H.slice(-c));const Q=_n(0,N+1,1),k=_n(0,N,1/F),K=[Jo(k,{stroke:"#888"}),Jo(Q,{stroke:"#888",strokeWidth:3})],W={width:Z8,height:90,marginLeft:60,marginBottom:10,padding:0,x:{label:null,domain:[0,N],ticks:[]},y:{axis:!1}},J=lr({...W,marks:[D4(H,fA({y:"count"},{x:fe=>fe,fill:"#ccc",thresholds:_n(0,N+1,4/u)})),Ss([0]),...K]}),se=lr({...W,marks:[pA(j,{x:"x",y:"y",fill:fe=>"#e4f0fa",clip:!0}),Ss([0]),...K]}),ge=lr({...W,marginBottom:30,x:{ticks:[...k,N],label:"time in beats",domain:[0,N]},marks:[Jo(q,{x:fe=>fe,stroke:"#0002",clip:!0})]});i(1,a.textContent="",a),a.appendChild(J),a.appendChild(se),a.appendChild(ge)};ur(g);const y=()=>({tempo:o,grid:h,binNote:u,adjustTime:m,noteTickLimit:c,notes:A}),E=N=>{(A.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(A.length>0&&_(),i(2,o=N.tempo),i(3,h=N.grid),i(4,u=N.binNote),i(5,m=N.adjustTime),i(6,c=N.noteTickLimit??0),i(7,A=N.notes),g())},_=()=>{A.length>0&&Zr(r.id,y())};hr(_);function S(N){o=N,i(2,o)}function x(){h=Ir(this),i(3,h)}function C(){u=Ir(this),i(4,u)}function w(){m=$n(this.value),i(5,m)}function T(){c=$n(this.value),i(6,c)}function O(N){En[N?"unshift":"push"](()=>{a=N,i(1,a)})}function B(N){A=N,i(7,A)}const P=()=>E(_de),L=()=>p({timestamp:performance.now()});return e.$$set=N=>{"demoInfo"in N&&i(0,r=N.demoInfo)},[r,a,o,h,u,m,c,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L]}class Tde extends Ai{constructor(t){super(),gi(this,t,Ide,Sde,pi,{demoInfo:0})}}const Bde=120,Rde=128,Ode=0,Dde=100,Lde=[0,.461,.995,1.495,2.0089000000357626,2.524,3.047,3.542,4.074,4.57,5.085,5.618,6.1349000000357625,6.635,7.13,7.64,8.178,8.686,9.194,9.706,10.198900000035763,10.683900000035763,11.186900000035763,11.69,12.166,12.646,13.155900000035762,13.669,14.194,14.7,15.209900000035763,15.743900000035763,16.257,16.790900000035762,17.311,17.823900000035763,18.35,18.866900000035763,19.401900000035763,19.901,20.416900000035763,20.92090000003576,21.441,21.928,22.464,22.965,23.49690000003576,24.01,24.519,25.023900000035763,25.58990000003576,26.111,26.634900000035763,27.154,27.671,28.181,28.675,29.174,29.674,30.141,30.64790000003576,31.142,31.628900000035763,32.141,32.68,33.17590000003576,33.688,34.198],Pde="tempo-drift",Nde="2024-06-11T18:59:54.533Z",Fde={tempo:Bde,binNote:Rde,filterNote:Ode,barLimit:Dde,notes:Lde,_demoId:Pde,_date:Nde};function kde(e,t,i){const r=e.slice();return r[23]=t[i],r}function Ude(e,t,i){const r=e.slice();return r[23]=t[i],r}function Gde(e){let t;return{c(){t=ie("option"),t.textContent=`1/${e[23]} note`,t.__value=e[23],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function Vde(e){let t;return{c(){t=ie("option"),t.textContent=`1/${e[23]} note`,t.__value=e[23],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function ew(e){let t,i,r=e[7].toFixed(1)+"",a,o;return{c(){t=ie("div"),i=ze("estimated: "),a=ze(r),o=ze(" bpm"),de(t,"class","svelte-1ruiyqw")},m(h,u){Rt(h,t,u),D(t,i),D(t,a),D(t,o)},p(h,u){u&128&&r!==(r=h[7].toFixed(1)+"")&&Ht(a,r)},d(h){h&&Bt(t)}}}function Qde(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae,Ke,Ue,ct,vt,dt,It=nn(aa),rt=[];for(let _t=0;_t<It.length;_t+=1)rt[_t]=Gde(Ude(e,It,_t));let Lt=nn(aa),hn=[];for(let _t=0;_t<Lt.length;_t+=1)hn[_t]=Vde(kde(e,Lt,_t));let Et=e[7]&&ew(e);k=new sl({props:{tempo:e[2],accent:4,maxBeeps:8}});function xt(_t){e[19](_t)}let en={saveToStorage:e[12],callback:e[9]};return e[6]!==void 0&&(en.notes=e[6]),W=new Ts({props:en}),En.push(()=>Di(W,"notes",xt)),ge=new es({props:{getExportData:e[10],demoId:e[0].id}}),me=new ts({props:{loadData:e[11]}}),Ee=new ns({props:{demoId:e[0].id,loadData:e[11]}}),Ae=new ho({props:{key:" ",callback:e[21]}}),Ue=new kr({props:{noteOn:e[8]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Connect a MIDI instrument, choose your tempo, and start playing. The
        time between two note onsets will be shown as a bar, so you can see how
        well you still hit, for example, quarter notes after playing for some
        time. Bar heights are either exact or rounded to the closest, for
        example, 64th note (binning dropdown). You can filter very short
        inter-note times, which happen whan playing two notes at roughly the
        same time as in a chord.
        <i>Try playing without looking!</i>`,u=ue(),m=ie("p"),m.textContent=`One possible exercise is trying to play at a given tempo without any
        count in. You can use the randomize tempo button (⚂) to get challenged.`,c=ue(),d=ie("div"),A=ie("label"),p=ze(`tempo
            `),v=ie("input"),g=ue(),y=ie("button"),y.textContent="⚂",E=ue(),_=ie("label"),S=ze(`binning
            `),x=ie("select"),C=ie("option"),C.textContent="off";for(let _t=0;_t<rt.length;_t+=1)rt[_t].c();w=ue(),T=ie("label"),O=ze(`filtering
            `),B=ie("select"),P=ie("option"),P.textContent="off";for(let _t=0;_t<hn.length;_t+=1)hn[_t].c();L=ue(),N=ie("label"),F=ze(`bars
            `),z=ie("input"),G=ue(),H=ie("div"),j=ue(),Et&&Et.c(),q=ue(),Q=ie("div"),gt(k.$$.fragment),K=ue(),gt(W.$$.fragment),se=ue(),gt(ge.$$.fragment),fe=ue(),gt(me.$$.fragment),xe=ue(),ye=ie("button"),ye.textContent="example",we=ue(),gt(Ee.$$.fragment),He=ue(),gt(Ae.$$.fragment),Ke=ue(),gt(Ue.$$.fragment),de(h,"class","explanation"),de(m,"class","explanation"),de(v,"type","number"),de(v,"step","1"),de(v,"min","10"),de(v,"max","400"),Ei(v,"width","55px"),de(A,"title","The tempo in beats per minute (bpm)"),de(y,"title","randomize tempo"),C.__value=0,rn(C,C.__value),e[3]===void 0&&mr(()=>e[15].call(x)),de(_,"title","You can change between seeing exact bar heights and binned (rounded) heights."),P.__value=0,rn(P,P.__value),e[4]===void 0&&mr(()=>e[16].call(B)),de(T,"title","You can filter out notes that are shorter than a given note duration."),de(z,"type","number"),de(z,"step","25"),de(z,"min","25"),de(z,"max","1000"),Ei(z,"width","55px"),de(N,"title","The number of most recent notes that are shown as bars."),de(d,"class","control svelte-1ruiyqw"),de(H,"class","visualization svelte-1ruiyqw"),de(Q,"class","control svelte-1ruiyqw"),de(t,"class","demo")},m(_t,Kt){Rt(_t,t,Kt),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(t,c),D(t,d),D(d,A),D(A,p),D(A,v),rn(v,e[2]),D(d,g),D(d,y),D(d,E),D(d,_),D(_,S),D(_,x),D(x,C);for(let Dt=0;Dt<rt.length;Dt+=1)rt[Dt]&&rt[Dt].m(x,null);ri(x,e[3],!0),D(d,w),D(d,T),D(T,O),D(T,B),D(B,P);for(let Dt=0;Dt<hn.length;Dt+=1)hn[Dt]&&hn[Dt].m(B,null);ri(B,e[4],!0),D(d,L),D(d,N),D(N,F),D(N,z),rn(z,e[5]),D(t,G),D(t,H),e[18](H),D(t,j),Et&&Et.m(t,null),D(t,q),D(t,Q),ft(k,Q,null),D(Q,K),ft(W,Q,null),D(Q,se),ft(ge,Q,null),D(Q,fe),ft(me,Q,null),D(Q,xe),D(Q,ye),D(Q,we),ft(Ee,Q,null),D(t,He),ft(Ae,t,null),D(t,Ke),ft(Ue,t,null),ct=!0,vt||(dt=[nt(v,"input",e[13]),nt(v,"change",e[9]),nt(y,"click",e[14]),nt(x,"change",e[15]),nt(x,"change",e[9]),nt(B,"change",e[16]),nt(B,"change",e[9]),nt(z,"input",e[17]),nt(z,"change",e[9]),nt(ye,"click",e[20])],vt=!0)},p(_t,[Kt]){(!ct||Kt&1)&&r!==(r=_t[0].title+"")&&Ht(a,r),Kt&4&&$n(v.value)!==_t[2]&&rn(v,_t[2]),Kt&8&&ri(x,_t[3]),Kt&16&&ri(B,_t[4]),Kt&32&&$n(z.value)!==_t[5]&&rn(z,_t[5]),_t[7]?Et?Et.p(_t,Kt):(Et=ew(_t),Et.c(),Et.m(t,q)):Et&&(Et.d(1),Et=null);const Dt={};Kt&4&&(Dt.tempo=_t[2]),k.$set(Dt);const Nt={};!J&&Kt&64&&(J=!0,Nt.notes=_t[6],Oi(()=>J=!1)),W.$set(Nt);const St={};Kt&1&&(St.demoId=_t[0].id),ge.$set(St);const pe={};Kt&1&&(pe.demoId=_t[0].id),Ee.$set(pe)},i(_t){ct||(ut(k.$$.fragment,_t),ut(W.$$.fragment,_t),ut(ge.$$.fragment,_t),ut(me.$$.fragment,_t),ut(Ee.$$.fragment,_t),ut(Ae.$$.fragment,_t),ut(Ue.$$.fragment,_t),ct=!0)},o(_t){ht(k.$$.fragment,_t),ht(W.$$.fragment,_t),ht(ge.$$.fragment,_t),ht(me.$$.fragment,_t),ht(Ee.$$.fragment,_t),ht(Ae.$$.fragment,_t),ht(Ue.$$.fragment,_t),ct=!1},d(_t){_t&&Bt(t),Gn(rt,_t),Gn(hn,_t),e[18](null),Et&&Et.d(),mt(k),mt(W),mt(ge),mt(me),mt(Ee),mt(Ae),mt(Ue),vt=!1,Vi(dt)}}}let Hde=1e3,zde=750;function Wde(e,t,i){let{demoInfo:r}=t,a,o=120,h=64,u=0,m=50,c=0,d=[],A=0;const p=L=>{d.length===0&&(c=L.timestamp);const N=(L.timestamp-c)/1e3;d.push(N),v()},v=()=>{const L=Es(o),N=L/4,F=L/2,z=L*2,G=L*4,j=[0,L/3,N,F,F*1.5,L,L*1.5,z,z*1.5],q=["0","𝅘𝅥𝅘𝅥𝅘𝅥","𝅘𝅥𝅯","𝅘𝅥𝅮","𝅘𝅥𝅮.","𝅘𝅥","𝅘𝅥.","𝅗𝅥","𝅗𝅥."];let Q=d.map((J,se)=>se===0?0:J-d[se-1]);if(u!==0){const J=G/u;Q=Q.filter(se=>se>=J)}let k=Q;if(h!==0){const J=G/h;k=Q.map(se=>Math.round(se/J)*J)}const K=lr({width:Hde,height:zde,marginLeft:45,marginRight:1,x:{axis:!1},y:{ticks:j,tickFormat:J=>{const se=j.indexOf(J);return q[se]},domain:[0,z*1.1],tickSize:0},marks:[Zh(k.slice(-m),{x:(J,se)=>se,y:J=>J,fill:"#ddd",inset:0,dx:.5}),Ss(j,{stroke:"#aaa"})]});i(1,a.textContent="",a),a.appendChild(K);const W=Q.filter(J=>J>.8*N&&J<1.25*L).slice(-24).map(J=>J<.6*L?J*2:J>1.5*L?J/2:J);i(7,A=MX(ab(W)))},g=()=>({tempo:o,binNote:h,filterNote:u,barLimit:m,notes:d}),y=L=>{(d.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(d.length>0&&E(),i(2,o=L.tempo),i(3,h=L.binNote??"off"),i(4,u=L.filterNote??"off"),i(5,m=L.barLimit),i(6,d=L.notes),v())},E=()=>{d.length>0&&Zr(r.id,g())};ur(v),hr(E);function _(){o=$n(this.value),i(2,o)}const S=()=>{let L=o;for(;L===o;)L=Math.round(Math.random()*24+12)*5;i(2,o=L)};function x(){h=Ir(this),i(3,h)}function C(){u=Ir(this),i(4,u)}function w(){m=$n(this.value),i(5,m)}function T(L){En[L?"unshift":"push"](()=>{a=L,i(1,a)})}function O(L){d=L,i(6,d)}const B=()=>y(Fde),P=()=>p({timestamp:performance.now()});return e.$$set=L=>{"demoInfo"in L&&i(0,r=L.demoInfo)},[r,a,o,h,u,m,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P]}class jde extends Ai{constructor(t){super(),gi(this,t,Wde,Qde,pi,{demoInfo:0})}}var jc,Bh,p9,$c,Xc,g9,sc,Rh,Zu,Al,ac,e0,$o,Oh,vl,oc;class $de{constructor(){Vr(this,jc,null);Vr(this,Bh,null);Vr(this,p9,1);Vr(this,$c,null);Vr(this,Xc,!1);Vr(this,g9,!1);xr(this,"currentPlayTime",null);Vr(this,sc,new AudioContext);Vr(this,Rh,null);Vr(this,Zu,null);Vr(this,Al,0);Vr(this,ac,-1);Vr(this,e0,[]);Vr(this,$o,[]);Vr(this,Oh,null);Vr(this,vl,!1);Vr(this,oc,!1);xr(this,"onTimeChange",t=>(Sr(this,jc,t),this));xr(this,"onStop",t=>(Sr(this,Bh,t),this));xr(this,"setVolume",t=>(Sr(this,p9,t),this));xr(this,"setLogging",t=>(Sr(this,g9,t),this));xr(this,"isPlaying",()=>Bn(this,vl));xr(this,"isPaused",()=>Bn(this,oc));xr(this,"playNotes",(t,i=0,r=-1,a=1,o=!1)=>{if(Bn(this,vl)&&!Bn(this,oc)&&!Bn(this,Xc)&&this.stop(),!t||t.length===0){console.warn("[PLAYER] Was called with no data");return}Sr(this,e0,[...t]);let h=new yh(t).sortByTime();Sr(this,Oh,h.getDuration()),i>0&&(h=h.filter(u=>u.start>=i).shiftTime(-i),console.log(`[Player] Will start at ${i.toFixed(2)} seconds with ${h.length()} notes left`)),a!==1&&a>0&&(h=h.scaleTime(1/a),Sr(this,Oh,Bn(this,Oh)/a)),t=h.getNotes(),console.log(`[Player] Playing ${t.length} notes, speed ${a}, and volume ${Bn(this,p9)}`),Bn(this,sc).state==="suspended"&&Bn(this,sc).resume(),Sr(this,Al,i),Sr(this,ac,r),Sr(this,$c,a),Sr(this,Xc,o),Sr(this,$o,[...t]),this._start()});xr(this,"_start",()=>{console.log("[Player] Starting"),Sr(this,vl,!0),Sr(this,oc,!1),Sr(this,Zu,Bn(this,sc).currentTime),this._scheduler()});xr(this,"_updateTime",t=>{const i=(t-Bn(this,Zu))*Bn(this,$c)+Bn(this,Al);this.currentPlayTime=i,Bn(this,jc)&&Bn(this,jc).call(this,i)});xr(this,"_playNote",(t,i)=>{const r=t.getDuration();Bn(this,g9)&&console.log(`[Player] Playing ${t.getName()} for ${r}s`);const a=Bn(this,sc).createOscillator();a.connect(Bn(this,sc).destination);const o=ed[t.pitch].frequency;a.frequency.value=o,a.start(i),a.stop(i+r)});xr(this,"_scheduler",()=>{const r=Bn(this,sc).currentTime;this._updateTime(r);const a=(Bn(this,ac)-Bn(this,Al))/Bn(this,$c)+Bn(this,Al);for(;Bn(this,$o).length>0;){const h=Bn(this,Zu)+Bn(this,$o)[0].start;if(h>r+.1||Bn(this,ac)!==-1&&Bn(this,$o)[0].start+Bn(this,Al)>=a)break;const u=Bn(this,$o).shift();this._playNote(u,h)}const o=r-Bn(this,Zu)+Bn(this,Al);Bn(this,ac)!==-1&&o>=a?this._stopOrLoop():o>=Bn(this,Oh)?this._stopOrLoop():Sr(this,Rh,setTimeout(this._scheduler,33))});xr(this,"_stopOrLoop",()=>{Bn(this,Xc)?this.playNotes(Bn(this,e0),Bn(this,Al),Bn(this,ac),Bn(this,$c),Bn(this,Xc)):this.stop()});xr(this,"stop",(t=!0)=>{if(Bn(this,vl))return console.log("[Player] Stopping player"),clearTimeout(Bn(this,Rh)),this.currentPlayTime=null,Sr(this,vl,!1),Sr(this,oc,!1),Sr(this,e0,[]),Sr(this,$o,[]),Bn(this,jc)&&Bn(this,jc).call(this,null),t&&Bn(this,Bh)&&Bn(this,Bh).call(this),this});xr(this,"pause",()=>(console.log("[Player] Pausing player"),clearTimeout(Bn(this,Rh)),Sr(this,oc,!0),this));xr(this,"resume",()=>{if(console.log("[Player] Resuming player"),!Bn(this,$o)||Bn(this,$o).length===0){console.warn("[Player] Cannot resume player since it has not been started!");return}return this.playNotes(Bn(this,e0),this.currentPlayTime,Bn(this,ac),Bn(this,$c),Bn(this,Xc)),this});xr(this,"pauseOrResume",()=>{if(!Bn(this,vl)){console.warn("[Player] Cannot pause / resume when player is not playing!");return}return Bn(this,oc)?this.resume():this.pause(),this})}toggle(t,i=0,r=-1,a=1,o=!1){Bn(this,vl)?this.stop():this.playNotes(t,i,r,a,o)}}jc=new WeakMap,Bh=new WeakMap,p9=new WeakMap,$c=new WeakMap,Xc=new WeakMap,g9=new WeakMap,sc=new WeakMap,Rh=new WeakMap,Zu=new WeakMap,Al=new WeakMap,ac=new WeakMap,e0=new WeakMap,$o=new WeakMap,Oh=new WeakMap,vl=new WeakMap,oc=new WeakMap;function Xde(e){let t,i,r;return{c(){t=ie("button"),t.textContent="play rhythm",de(t,"title","Play the current rhythm grid")},m(a,o){Rt(a,t,o),i||(r=nt(t,"click",e[7]),i=!0)},p:yn,i:yn,o:yn,d(a){a&&Bt(t),i=!1,r()}}}function Kde(e,t,i){let r,{notes:a=[]}=t,{startAt:o=0}=t,{endAt:h=-1}=t,{speed:u=1}=t,{loop:m=!1}=t;const c=new $de;hr(()=>{c.stop()});const d=()=>{console.log(r),c.toggle(r,o,h,u,m)};return e.$$set=A=>{"notes"in A&&i(6,a=A.notes),"startAt"in A&&i(0,o=A.startAt),"endAt"in A&&i(1,h=A.endAt),"speed"in A&&i(2,u=A.speed),"loop"in A&&i(3,m=A.loop)},e.$$.update=()=>{e.$$.dirty&64&&i(4,r=a.map(A=>({pitch:A.number,start:A.time,duration:A.duration??.075,velocity:127})))},[o,h,u,m,r,c,a,d]}class Yde extends Ai{constructor(t){super(),gi(this,t,Kde,Xde,pi,{notes:6,startAt:0,endAt:1,speed:2,loop:3})}}const qde=60,Jde="4:3",Zde="4:2",efe=64,tfe=0,nfe=6,ife=[{time:0,number:74},{time:.388,number:74},{time:.851,number:74},{time:1.496,number:74},{time:1.9820999999996274,number:74},{time:2.4810999999996275,number:74},{time:2.9740999999996274,number:74},{time:3.5200999999996276,number:74},{time:3.976,number:74},{time:4.474099999999628,number:74},{time:4.972099999999627,number:74},{time:5.51,number:74},{time:6.013,number:74},{time:6.492,number:74},{time:6.970099999999627,number:74},{time:7.5130999999996275,number:74},{time:7.989,number:74},{time:8.473,number:74},{time:8.965099999999627,number:74},{time:9.478,number:74},{time:9.991,number:74},{time:10.514,number:74},{time:10.983,number:74},{time:11.489099999999627,number:74},{time:11.972,number:74},{time:12.48,number:74},{time:12.991,number:74},{time:13.505099999999628,number:74},{time:13.984,number:74},{time:14.496,number:74},{time:14.975,number:74},{time:15.46,number:74},{time:15.991,number:59},{time:16.202,number:59},{time:16.487,number:59},{time:16.748099999999628,number:59},{time:16.997,number:59},{time:17.233099999999627,number:59},{time:17.494,number:59},{time:17.738,number:59},{time:18.019,number:59},{time:18.259,number:59},{time:18.5,number:59},{time:18.752,number:59},{time:18.992,number:59},{time:19.227,number:59},{time:19.494,number:59},{time:19.748,number:59},{time:19.993,number:59},{time:20.232099999999626,number:59},{time:20.484,number:59},{time:20.726,number:59},{time:24.053,number:59},{time:24.291,number:59},{time:24.537,number:59},{time:24.896,number:59},{time:25.164,number:59},{time:25.421099999999626,number:59},{time:25.691,number:59},{time:25.96,number:59},{time:26.286,number:59},{time:40.02609999999963,number:59},{time:40.499,number:59},{time:40.758,number:59},{time:41.004,number:59},{time:41.484,number:59},{time:41.753,number:59},{time:41.992,number:59},{time:42.553,number:59},{time:42.774,number:59},{time:43.002,number:59},{time:43.542,number:59},{time:43.772,number:59},{time:44.086,number:59},{time:48.038,number:59},{time:48.31,number:59},{time:48.609,number:59},{time:48.924099999999626,number:59},{time:49.286,number:59},{time:49.614099999999624,number:59},{time:50,number:59},{time:50.29,number:59},{time:50.628,number:59},{time:50.964,number:59},{time:51.318,number:59},{time:51.677,number:59},{time:51.98409999999963,number:59},{time:52.323,number:59},{time:52.647099999999625,number:59},{time:52.994,number:59},{time:53.353,number:59},{time:53.665099999999626,number:59},{time:54.002,number:59},{time:54.383,number:59},{time:54.67,number:59},{time:55.031099999999626,number:59},{time:55.353,number:59},{time:55.687,number:59},{time:56.001,number:59},{time:56.35509999999963,number:59},{time:56.650099999999625,number:59},{time:56.967,number:59},{time:57.333099999999625,number:59},{time:57.66109999999963,number:59},{time:57.98609999999963,number:59},{time:58.297,number:59},{time:58.622,number:59},{time:58.934,number:59},{time:59.309,number:59},{time:59.668,number:59},{time:59.993,number:59},{time:60.363,number:59},{time:60.649,number:59},{time:60.974,number:59},{time:61.309,number:59},{time:61.644,number:59},{time:61.979,number:59},{time:62.31,number:59},{time:62.63909999999963,number:59},{time:62.999,number:59},{time:63.323,number:59},{time:63.671099999999626,number:59},{time:63.988099999999626,number:59},{time:64.363,number:59},{time:64.657,number:59},{time:64.99,number:59},{time:65.353,number:59},{time:65.655,number:59},{time:65.94509999999963,number:59},{time:66.25909999999963,number:59},{time:66.607,number:59},{time:66.94709999999962,number:59},{time:67.293,number:59},{time:67.67009999999962,number:59},{time:67.958,number:59},{time:71.93,number:74},{time:72.32509999999962,number:74},{time:72.74,number:74},{time:73.24709999999963,number:74},{time:73.655,number:74},{time:74.10109999999963,number:74},{time:74.37109999999963,number:74},{time:74.63909999999963,number:74},{time:74.94009999999963,number:74},{time:75.343,number:74},{time:75.716,number:74},{time:76.091,number:74},{time:76.353,number:74},{time:76.678,number:74},{time:77.019,number:74},{time:77.34609999999962,number:74},{time:77.663,number:74},{time:78.011,number:74},{time:78.33609999999963,number:74},{time:78.662,number:74},{time:79.00009999999963,number:74},{time:79.356,number:74},{time:79.708,number:74},{time:80.073,number:74},{time:84.018,number:59},{time:84.302,number:59},{time:84.645,number:59},{time:85.002,number:59},{time:85.315,number:59},{time:85.61509999999963,number:59},{time:85.987,number:59},{time:86.343,number:59},{time:86.624,number:59},{time:86.99309999999963,number:59},{time:87.358,number:59},{time:87.65909999999963,number:59},{time:87.989,number:59},{time:88.3,number:59},{time:88.64309999999963,number:59},{time:88.966,number:59},{time:89.299,number:59},{time:89.618,number:59},{time:90.00409999999962,number:59},{time:90.345,number:59},{time:90.635,number:59},{time:90.992,number:59},{time:91.328,number:59},{time:91.66,number:59},{time:92.027,number:59},{time:92.421,number:74},{time:93.034,number:74},{time:93.458,number:74},{time:93.88209999999962,number:74},{time:94.41309999999963,number:74},{time:94.96709999999963,number:74},{time:95.531,number:74},{time:96.016,number:74},{time:96.49,number:74},{time:97.007,number:74},{time:97.51609999999962,number:74},{time:98.023,number:74},{time:98.527,number:74},{time:99.033,number:74},{time:99.538,number:74},{time:100,number:74},{time:100.506,number:74},{time:101.006,number:74},{time:101.517,number:74},{time:101.988,number:74},{time:102.495,number:74},{time:103.001,number:74},{time:103.497,number:74},{time:103.975,number:74}],rfe="two-handed-timing",sfe="2024-07-03T17:29:11.248Z",afe={tempo:qde,gridLeft:Jde,gridRight:Zde,binNote:efe,adjustTime:tfe,pastBars:nfe,notes:ife,_demoId:rfe,_date:sfe};function ofe(e,t,i){const r=e.slice();return r[33]=t[i],r}function lfe(e,t,i){const r=e.slice();return r[33]=t[i],r}function cfe(e,t,i){const r=e.slice();return r[33]=t[i],r}function ufe(e){let t;return{c(){t=ie("option"),t.textContent=`${e[33]}`,t.__value=e[33],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function hfe(e){let t;return{c(){t=ie("option"),t.textContent=`${e[33]}`,t.__value=e[33],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function dfe(e){let t;return{c(){t=ie("option"),t.textContent=`1/${e[33]} note`,t.__value=e[33],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function ffe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q=e[8]?"density area":"histogram",Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae,Ke,Ue,ct,vt,dt,It,rt,Lt,hn,Et,xt,en,_t,Kt,Dt;function Nt(Y){e[18](Y)}let St={callback:e[13]};e[3]!==void 0&&(St.value=e[3]),c=new Ya({props:St}),En.push(()=>Di(c,"value",Nt));let pe=nn(Ns),_e=[];for(let Y=0;Y<pe.length;Y+=1)_e[Y]=ufe(cfe(e,pe,Y));let De=nn(Ns),Be=[];for(let Y=0;Y<De.length;Y+=1)Be[Y]=hfe(lfe(e,De,Y));let Le=nn(aa),ke=[];for(let Y=0;Y<Le.length;Y+=1)ke[Y]=dfe(ofe(e,Le,Y));fe=new sl({props:{tempo:e[3],accent:+e[4].split(":")[0]}}),xe=new Yde({props:{notes:e[17](e[4],e[5],e[3])}});function ce(Y){e[27](Y)}let X={saveToStorage:e[16],callback:e[13]};return e[10]!==void 0&&(X.notes=e[10]),we=new Ts({props:X}),En.push(()=>Di(we,"notes",ce)),Ae=new es({props:{getExportData:e[14],demoId:e[0].id}}),Ue=new ts({props:{loadData:e[15]}}),It=new ns({props:{demoId:e[0].id,loadData:e[15]}}),Lt=new ho({props:{key:"f",callback:e[29]}}),Et=new ho({props:{key:"j",callback:e[30]}}),en=new kr({props:{noteOn:e[11],controlChange:e[12]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Connect a MIDI keyboard and start playing to the metronome. The chart
        will show you how a summary of where your notes started, the top one is
        for your left hand (keys left of the middle A) and the bottom one for
        your right hand. For example, you can try to play quarter triplets with
        your left and eighths with your right hand. If you do not have a MIDI
        keyboard, you can press the
        <code>f</code>
        key on your PC keyboard for left and <code>j</code> for right.
        <i>Try playing without looking, focus on the metronome.</i>`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),p=ie("label"),v=ze(`grid left
            `),g=ie("select");for(let Y=0;Y<_e.length;Y+=1)_e[Y].c();y=ue(),E=ie("label"),_=ze(`right
            `),S=ie("select");for(let Y=0;Y<Be.length;Y+=1)Be[Y].c();x=ue(),C=ie("label"),w=ze(`binning
            `),T=ie("select");for(let Y=0;Y<ke.length;Y+=1)ke[Y].c();O=ue(),B=ie("label"),P=ze(`adjust
            `),L=ie("input"),N=ue(),F=ie("label"),z=ze(`bars
            `),G=ie("input"),H=ue(),j=ie("button"),Q=ze(q),k=ue(),K=ie("div"),W=ue(),J=ie("div"),se=ue(),ge=ie("div"),gt(fe.$$.fragment),me=ue(),gt(xe.$$.fragment),ye=ue(),gt(we.$$.fragment),He=ue(),gt(Ae.$$.fragment),Ke=ue(),gt(Ue.$$.fragment),ct=ue(),vt=ie("button"),vt.textContent="example",dt=ue(),gt(It.$$.fragment),rt=ue(),gt(Lt.$$.fragment),hn=ue(),gt(Et.$$.fragment),xt=ue(),gt(en.$$.fragment),de(h,"class","explanation"),e[4]===void 0&&mr(()=>e[19].call(g)),de(p,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[5]===void 0&&mr(()=>e[20].call(S)),de(E,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[6]===void 0&&mr(()=>e[21].call(T)),de(C,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),de(L,"type","number"),de(L,"step","0.01"),de(L,"min","-2"),de(L,"max","2"),Ei(L,"width","55px"),de(B,"title","Shift all notes by an amount in seconds"),de(G,"type","number"),de(G,"min","1"),de(G,"max","100"),Ei(G,"width","55px"),de(F,"title","The number of past bars to be shown. Allows to 'forget' mistakes in the beginning."),de(j,"title","Toggle between an area chart and a histogram of the note density"),Ei(j,"width","120px"),de(m,"class","control"),de(K,"class","visualization"),de(J,"class","visualization"),de(ge,"class","control"),de(t,"class","demo")},m(Y,be){Rt(Y,t,be),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(m,A),D(m,p),D(p,v),D(p,g);for(let Te=0;Te<_e.length;Te+=1)_e[Te]&&_e[Te].m(g,null);ri(g,e[4],!0),D(m,y),D(m,E),D(E,_),D(E,S);for(let Te=0;Te<Be.length;Te+=1)Be[Te]&&Be[Te].m(S,null);ri(S,e[5],!0),D(m,x),D(m,C),D(C,w),D(C,T);for(let Te=0;Te<ke.length;Te+=1)ke[Te]&&ke[Te].m(T,null);ri(T,e[6],!0),D(m,O),D(m,B),D(B,P),D(B,L),rn(L,e[7]),D(m,N),D(m,F),D(F,z),D(F,G),rn(G,e[9]),D(m,H),D(m,j),D(j,Q),D(t,k),D(t,K),e[25](K),D(t,W),D(t,J),e[26](J),D(t,se),D(t,ge),ft(fe,ge,null),D(ge,me),ft(xe,ge,null),D(ge,ye),ft(we,ge,null),D(ge,He),ft(Ae,ge,null),D(ge,Ke),ft(Ue,ge,null),D(ge,ct),D(ge,vt),D(ge,dt),ft(It,ge,null),D(t,rt),ft(Lt,t,null),D(t,hn),ft(Et,t,null),D(t,xt),ft(en,t,null),_t=!0,Kt||(Dt=[nt(g,"change",e[19]),nt(g,"change",e[13]),nt(S,"change",e[20]),nt(S,"change",e[13]),nt(T,"change",e[21]),nt(T,"change",e[13]),nt(L,"input",e[22]),nt(L,"change",e[13]),nt(G,"input",e[23]),nt(G,"change",e[13]),nt(j,"click",e[24]),nt(vt,"click",e[28])],Kt=!0)},p(Y,be){(!_t||be[0]&1)&&r!==(r=Y[0].title+"")&&Ht(a,r);const Te={};!d&&be[0]&8&&(d=!0,Te.value=Y[3],Oi(()=>d=!1)),c.$set(Te),be[0]&16&&ri(g,Y[4]),be[0]&32&&ri(S,Y[5]),be[0]&64&&ri(T,Y[6]),be[0]&128&&$n(L.value)!==Y[7]&&rn(L,Y[7]),be[0]&512&&$n(G.value)!==Y[9]&&rn(G,Y[9]),(!_t||be[0]&256)&&q!==(q=Y[8]?"density area":"histogram")&&Ht(Q,q);const We={};be[0]&8&&(We.tempo=Y[3]),be[0]&16&&(We.accent=+Y[4].split(":")[0]),fe.$set(We);const tt={};be[0]&56&&(tt.notes=Y[17](Y[4],Y[5],Y[3])),xe.$set(tt);const wt={};!Ee&&be[0]&1024&&(Ee=!0,wt.notes=Y[10],Oi(()=>Ee=!1)),we.$set(wt);const Zt={};be[0]&1&&(Zt.demoId=Y[0].id),Ae.$set(Zt);const qt={};be[0]&1&&(qt.demoId=Y[0].id),It.$set(qt)},i(Y){_t||(ut(c.$$.fragment,Y),ut(fe.$$.fragment,Y),ut(xe.$$.fragment,Y),ut(we.$$.fragment,Y),ut(Ae.$$.fragment,Y),ut(Ue.$$.fragment,Y),ut(It.$$.fragment,Y),ut(Lt.$$.fragment,Y),ut(Et.$$.fragment,Y),ut(en.$$.fragment,Y),_t=!0)},o(Y){ht(c.$$.fragment,Y),ht(fe.$$.fragment,Y),ht(xe.$$.fragment,Y),ht(we.$$.fragment,Y),ht(Ae.$$.fragment,Y),ht(Ue.$$.fragment,Y),ht(It.$$.fragment,Y),ht(Lt.$$.fragment,Y),ht(Et.$$.fragment,Y),ht(en.$$.fragment,Y),_t=!1},d(Y){Y&&Bt(t),mt(c),Gn(_e,Y),Gn(Be,Y),Gn(ke,Y),e[25](null),e[26](null),mt(fe),mt(xe),mt(we),mt(Ae),mt(Ue),mt(It),mt(Lt),mt(Et),mt(en),Kt=!1,Vi(Dt)}}}let tw=1100,nw=69;function mfe(e,t,i){let{demoInfo:r}=t,a,o,h=60,u=Ns[1],m=Ns[0],c=64,d=0,A=!0,p=4,v=0,g=[];const y=K=>{g.length===0&&(v=K.timestamp);const W=(K.timestamp-v)/1e3;g.push({time:W,number:K.note.number}),S()},E=K=>{const W=K.controller.number;W===14?i(3,h=ss(K.rawValue,0,120)+60):W===15?i(6,c=aa[ss(Math.floor(K.rawValue/5),0,aa.length-1)]):W===16?i(7,d=(ss(K.rawValue,0,100)-50)/100):W===17&&i(9,p=ss(K.rawValue,0,99)+1),S()},_=(K=!0)=>{const W=K?u:m,[J,se]=W.split(":").map(He=>+He),ge=Es(h);let fe=g.filter(He=>K&&He.number<nw||!K&&He.number>=nw);if(fe=fe.map(He=>(He.time+d)/ge),p>0&&fe.length>0){const He=(g.at(-1).time+d)/ge,Ae=Math.ceil(He/J);fe=fe.filter(Ke=>Ke/J>=Ae-p)}fe=fe.map(He=>He%J);let me=[];if(fe.length>0){let He=4/c,Ae=1,Ke=tw/2;me=vd(fe,{bandwidth:He,pad:Ae,bins:Ke}).bandwidth(He)}const xe=_n(0,J+1,1),ye=_n(0,J*se,1/se),we=lr({width:tw,height:K?170:183,marginTop:5,marginLeft:10,marginRight:10,marginBottom:K?5:15,padding:0,x:{label:K?null:"time in beats (cyclic)",domain:[0,4],ticks:[]},y:{axis:!1,reverse:!K},marks:[A?pA(me,{x:"x",y:"y",fill:He=>"#e4f0fa",clip:!0}):D4(fe,fA({y:"count"},{x:He=>He,fill:"#ccc",thresholds:_n(0,J+1,4/c)})),Ss([0]),Jo(ye,{stroke:"#888"}),Jo(xe,{stroke:"#888",strokeWidth:3})]}),Ee=K?a:o;Ee.textContent="",Ee.appendChild(we)},S=()=>{_(!0),_(!1)},x=()=>({tempo:h,gridLeft:u,gridRight:m,binNote:c,adjustTime:d,pastBars:p,notes:g}),C=K=>{(g.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(g.length>0&&w(),i(3,h=K.tempo),i(4,u=K.gridLeft),i(5,m=K.gridRight),i(6,c=K.binNote),i(7,d=K.adjustTime??0),i(9,p=K.pastBars),i(10,g=K.notes),S())},w=()=>{g.length>0&&Zr(r.id,x())};ur(S),hr(w);const T=(K,W,J)=>{if(!K)return[];const se=Es(J);let ge=[K,W].flatMap((fe,me)=>{const[xe,ye]=fe.split(":").map(Ee=>+Ee),we=_n(0,xe,1/ye);return console.log({grid1:xe,grid2:ye,fineGrid:we}),we.map(Ee=>({time:Ee*se,number:69}))});return ge.sort((fe,me)=>fe.time-me.time),console.log(ge),ge};function O(K){h=K,i(3,h)}function B(){u=Ir(this),i(4,u)}function P(){m=Ir(this),i(5,m)}function L(){c=Ir(this),i(6,c)}function N(){d=$n(this.value),i(7,d)}function F(){p=$n(this.value),i(9,p)}const z=()=>{i(8,A=!A),S()};function G(K){En[K?"unshift":"push"](()=>{a=K,i(1,a)})}function H(K){En[K?"unshift":"push"](()=>{o=K,i(2,o)})}function j(K){g=K,i(10,g)}const q=()=>C(afe),Q=()=>y({timestamp:performance.now(),note:{number:0}}),k=()=>y({timestamp:performance.now(),note:{number:127}});return e.$$set=K=>{"demoInfo"in K&&i(0,r=K.demoInfo)},[r,a,o,h,u,m,c,d,A,p,g,y,E,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k]}class pfe extends Ai{constructor(t){super(),gi(this,t,mfe,ffe,pi,{demoInfo:0},null,[-1,-1])}}function gfe(e,t,i){const r=e.slice();return r[30]=t[i],r}function Afe(e,t,i){const r=e.slice();return r[30]=t[i],r}function vfe(e){let t;return{c(){t=ie("option"),t.textContent=`${e[30]}`,t.__value=e[30],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function yfe(e){let t;return{c(){t=ie("option"),t.textContent=`1/${e[30]} note`,t.__value=e[30],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function bfe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z=e[6]?"density area":"histogram",G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae,Ke,Ue,ct,vt,dt,It,rt,Lt,hn;function Et(pe){e[16](pe)}let xt={callback:e[11]};e[2]!==void 0&&(xt.value=e[2]),c=new Ya({props:xt}),En.push(()=>Di(c,"value",Et));let en=nn(Ns),_t=[];for(let pe=0;pe<en.length;pe+=1)_t[pe]=vfe(Afe(e,en,pe));let Kt=nn(aa),Dt=[];for(let pe=0;pe<Kt.length;pe+=1)Dt[pe]=yfe(gfe(e,Kt,pe));function Nt(pe){e[23](pe)}let St={saveToStorage:e[14],callback:e[11]};return e[8]!==void 0&&(St.notes=e[8]),k=new Ts({props:St}),En.push(()=>Di(k,"notes",Nt)),J=new es({props:{getExportData:e[12],demoId:e[0].id}}),ge=new ts({props:{loadData:e[13]}}),me=new sl({props:{tempo:e[2],accent:+e[3].split(":")[0]}}),ye=new ns({props:{demoId:e[0].id,loadData:e[13]}}),Ee=new ho({props:{key:"s",callback:e[24]}}),Ae=new ho({props:{key:"h",callback:e[25]}}),Ue=new ho({props:{key:"t",callback:e[26]}}),vt=new ho({props:{key:"k",callback:e[27]}}),It=new kr({props:{noteOn:e[9],controlChange:e[10]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Connect a MIDI drum kit and start playing to the metronome. The chart
        will show you how a summary of where your notes started, one for each
        type of drum. If you do not have a MIDI keyboard, you can press keys:
        <code class="svelte-dje2r7">h</code>, <code class="svelte-dje2r7">s</code>, <code class="svelte-dje2r7">t</code>, and <code class="svelte-dje2r7">k</code> for
        hi-hat, snare, tom, and kick drum.
        <i>Try playing without looking, focus on the metronome.</i>`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),p=ie("label"),v=ze(`grid
            `),g=ie("select");for(let pe=0;pe<_t.length;pe+=1)_t[pe].c();y=ue(),E=ie("label"),_=ze(`binning
            `),S=ie("select");for(let pe=0;pe<Dt.length;pe+=1)Dt[pe].c();x=ue(),C=ie("label"),w=ze(`adjust
            `),T=ie("input"),O=ue(),B=ie("label"),P=ze(`last bars
            `),L=ie("input"),N=ue(),F=ie("button"),G=ze(z),H=ue(),j=ie("div"),q=ue(),Q=ie("div"),gt(k.$$.fragment),W=ue(),gt(J.$$.fragment),se=ue(),gt(ge.$$.fragment),fe=ue(),gt(me.$$.fragment),xe=ue(),gt(ye.$$.fragment),we=ue(),gt(Ee.$$.fragment),He=ue(),gt(Ae.$$.fragment),Ke=ue(),gt(Ue.$$.fragment),ct=ue(),gt(vt.$$.fragment),dt=ue(),gt(It.$$.fragment),de(h,"class","explanation"),e[3]===void 0&&mr(()=>e[17].call(g)),de(p,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[4]===void 0&&mr(()=>e[18].call(S)),de(E,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),de(T,"type","number"),de(T,"step","0.01"),de(T,"min","-2"),de(T,"max","2"),Ei(T,"width","55px"),de(C,"title","Shift all notes by an amount in seconds"),de(L,"type","number"),de(L,"min","1"),de(L,"max","100"),Ei(L,"width","55px"),de(B,"title","The number of past bars to be shown. Allows to 'forget' mistakes in the beginning."),de(F,"title","Toggle between an area chart and a histogram of the note density"),Ei(F,"width","120px"),de(m,"class","control"),de(j,"class","visualization"),de(Q,"class","control"),de(t,"class","demo")},m(pe,_e){Rt(pe,t,_e),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(m,A),D(m,p),D(p,v),D(p,g);for(let De=0;De<_t.length;De+=1)_t[De]&&_t[De].m(g,null);ri(g,e[3],!0),D(m,y),D(m,E),D(E,_),D(E,S);for(let De=0;De<Dt.length;De+=1)Dt[De]&&Dt[De].m(S,null);ri(S,e[4],!0),D(m,x),D(m,C),D(C,w),D(C,T),rn(T,e[5]),D(m,O),D(m,B),D(B,P),D(B,L),rn(L,e[7]),D(m,N),D(m,F),D(F,G),D(t,H),D(t,j),e[22](j),D(t,q),D(t,Q),ft(k,Q,null),D(Q,W),ft(J,Q,null),D(Q,se),ft(ge,Q,null),D(Q,fe),ft(me,Q,null),D(Q,xe),ft(ye,Q,null),D(t,we),ft(Ee,t,null),D(t,He),ft(Ae,t,null),D(t,Ke),ft(Ue,t,null),D(t,ct),ft(vt,t,null),D(t,dt),ft(It,t,null),rt=!0,Lt||(hn=[nt(g,"change",e[17]),nt(g,"change",e[11]),nt(S,"change",e[18]),nt(S,"change",e[11]),nt(T,"input",e[19]),nt(T,"change",e[11]),nt(L,"input",e[20]),nt(L,"change",e[11]),nt(F,"click",e[21])],Lt=!0)},p(pe,_e){(!rt||_e[0]&1)&&r!==(r=pe[0].title+"")&&Ht(a,r);const De={};!d&&_e[0]&4&&(d=!0,De.value=pe[2],Oi(()=>d=!1)),c.$set(De),_e[0]&8&&ri(g,pe[3]),_e[0]&16&&ri(S,pe[4]),_e[0]&32&&$n(T.value)!==pe[5]&&rn(T,pe[5]),_e[0]&128&&$n(L.value)!==pe[7]&&rn(L,pe[7]),(!rt||_e[0]&64)&&z!==(z=pe[6]?"density area":"histogram")&&Ht(G,z);const Be={};!K&&_e[0]&256&&(K=!0,Be.notes=pe[8],Oi(()=>K=!1)),k.$set(Be);const Le={};_e[0]&1&&(Le.demoId=pe[0].id),J.$set(Le);const ke={};_e[0]&4&&(ke.tempo=pe[2]),_e[0]&8&&(ke.accent=+pe[3].split(":")[0]),me.$set(ke);const ce={};_e[0]&1&&(ce.demoId=pe[0].id),ye.$set(ce)},i(pe){rt||(ut(c.$$.fragment,pe),ut(k.$$.fragment,pe),ut(J.$$.fragment,pe),ut(ge.$$.fragment,pe),ut(me.$$.fragment,pe),ut(ye.$$.fragment,pe),ut(Ee.$$.fragment,pe),ut(Ae.$$.fragment,pe),ut(Ue.$$.fragment,pe),ut(vt.$$.fragment,pe),ut(It.$$.fragment,pe),rt=!0)},o(pe){ht(c.$$.fragment,pe),ht(k.$$.fragment,pe),ht(J.$$.fragment,pe),ht(ge.$$.fragment,pe),ht(me.$$.fragment,pe),ht(ye.$$.fragment,pe),ht(Ee.$$.fragment,pe),ht(Ae.$$.fragment,pe),ht(Ue.$$.fragment,pe),ht(vt.$$.fragment,pe),ht(It.$$.fragment,pe),rt=!1},d(pe){pe&&Bt(t),mt(c),Gn(_t,pe),Gn(Dt,pe),e[22](null),mt(k),mt(J),mt(ge),mt(me),mt(ye),mt(Ee),mt(Ae),mt(Ue),mt(vt),mt(It),Lt=!1,Vi(hn)}}}let iw=1e3;function Mfe(e,t,i){let{demoInfo:r}=t,a,o=60,h=Ns[0],u=64,m=0,c=!0,d=4,A=0,p=[];const v=new Map([[49,{repPitch:49,label:"CC",name:"Crash Cymbal 1"}],[55,{repPitch:49,label:"CC",name:"Crash Cymbal 1"}],[52,{repPitch:57,label:"CC",name:"Crash Cymbal 2"}],[57,{repPitch:57,label:"CC",name:"Crash Cymbal 2"}],[22,{repPitch:46,label:"HH",name:"Hi-Hat"}],[26,{repPitch:46,label:"HH",name:"Hi-Hat"}],[42,{repPitch:46,label:"HH",name:"Hi-Hat"}],[46,{repPitch:46,label:"HH",name:"Hi-Hat"}],[44,{repPitch:44,label:"HH",name:"Hi-Hat Pedal"}],[51,{repPitch:51,label:"Rd",name:"Ride Cymbal"}],[53,{repPitch:51,label:"Rd",name:"Ride Cymbal"}],[59,{repPitch:51,label:"Rd",name:"Ride Cymbal"}],[38,{repPitch:38,label:"SN",name:"Snare"}],[40,{repPitch:38,label:"SN",name:"Snare"}],[48,{repPitch:48,label:"TO",name:"Tom 1"}],[50,{repPitch:48,label:"TO",name:"Tom 1"}],[45,{repPitch:45,label:"TO",name:"Tom 2"}],[47,{repPitch:45,label:"TO",name:"Tom 2"}],[43,{repPitch:43,label:"TO",name:"Stand Tom 1"}],[58,{repPitch:43,label:"TO",name:"Stand Tom 1"}],[39,{repPitch:41,label:"TO",name:"Stand Tom 2"}],[41,{repPitch:41,label:"TO",name:"Stand Tom 2"}],[35,{repPitch:36,label:"KD",name:"Kick Drum"}],[36,{repPitch:36,label:"KD",name:"Kick Drum"}]]),g=q=>{var k;p.length===0&&(A=q.timestamp);const Q=(q.timestamp-A)/1e3;p.push({time:Q,number:q.note.number,drum:((k=v.get(q.note.number))==null?void 0:k.label)??q.note.number}),_()},y=q=>{const Q=q.controller.number;Q===14?i(2,o=ss(q.rawValue,0,120)+60):Q===15?i(4,u=aa[ss(Math.floor(q.rawValue/5),0,aa.length-1)]):Q===16?i(5,m=(ss(q.rawValue,0,100)-50)/100):Q===17&&i(7,d=ss(q.rawValue,0,99)+1),_()},E=(q="KD",Q=null)=>{const[k,K]=h.split(":").map(ye=>+ye),W=Es(o);let J=p.filter(ye=>ye.drum===q);if(J=J.map(ye=>(ye.time+m)/W),d>0&&J.length>0){const ye=Math.floor(J.at(-1)/k);J=J.filter(we=>we/k>=ye-d)}J=J.map(ye=>ye%k);let se=[];if(J.length>0){let ye=4/u,we=1,Ee=iw/2;se=vd(J,{bandwidth:ye,pad:we,bins:Ee}).bandwidth(ye)}const ge=_n(0,k+1,1),fe=_n(0,k,1/K),me=lr({width:iw,height:90,marginLeft:60,marginBottom:10,padding:0,x:{label:Q,domain:[0,4],ticks:[]},y:{axis:!1},marks:[c?pA(se,{x:"x",y:"y",fill:ye=>"#e4f0fa",clip:!0}):D4(J,fA({y:"count"},{x:ye=>ye,fill:"#ccc",thresholds:_n(0,k+1,4/u)})),Ss([0]),Jo(fe,{stroke:"#888"}),Jo(ge,{stroke:"#888",strokeWidth:3})]}),xe=document.createElement("span");xe.innerText=q,a.appendChild(xe),a.appendChild(me)},_=()=>{i(1,a.textContent="",a),E("HH"),E("SN"),E("TO"),E("KD","time in beats")};ur(_);const S=()=>({tempo:o,grid:h,binNote:u,adjustTime:m,pastBars:d,showKde:c,notes:p}),x=q=>{(p.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(p.length>0&&C(),i(2,o=q.tempo),i(3,h=q.grid),i(4,u=q.binNote),i(5,m=q.adjustTime),i(7,d=q.pastBars??100),i(6,c=q.showKde??!1),i(8,p=q.notes),_())},C=()=>{p.length>0&&Zr(r.id,S())};hr(C);function w(q){o=q,i(2,o)}function T(){h=Ir(this),i(3,h)}function O(){u=Ir(this),i(4,u)}function B(){m=$n(this.value),i(5,m)}function P(){d=$n(this.value),i(7,d)}const L=()=>{i(6,c=!c),_()};function N(q){En[q?"unshift":"push"](()=>{a=q,i(1,a)})}function F(q){p=q,i(8,p)}const z=()=>g({timestamp:performance.now(),note:{number:38}}),G=()=>g({timestamp:performance.now(),note:{number:46}}),H=()=>g({timestamp:performance.now(),note:{number:48}}),j=()=>g({timestamp:performance.now(),note:{number:36}});return e.$$set=q=>{"demoInfo"in q&&i(0,r=q.demoInfo)},[r,a,o,h,u,m,c,d,p,g,y,_,S,x,C,v,w,T,O,B,P,L,N,F,z,G,H,j]}class _fe extends Ai{constructor(t){super(),gi(this,t,Mfe,bfe,pi,{demoInfo:0,drumPitchReplacementMapMD90:15},null,[-1,-1])}get drumPitchReplacementMapMD90(){return this.$$.ctx[15]}}function Cfe(e,t,i){const r=e.slice();return r[33]=t[i],r}function Efe(e,t,i){const r=e.slice();return r[33]=t[i],r}function wfe(e){let t;return{c(){t=ie("option"),t.textContent=`${e[33]}`,t.__value=e[33],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function xfe(e){let t;return{c(){t=ie("option"),t.textContent=`1/${e[33]} note`,t.__value=e[33],rn(t,t.__value)},m(i,r){Rt(i,t,r)},p:yn,d(i){i&&Bt(t)}}}function Sfe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P=e[8]?"area":"bars",L,N,F,z,G,H,j,q,Q,k,K,W,J,se,ge,fe,me,xe,ye,we,Ee,He,Ae,Ke,Ue,ct,vt,dt,It,rt;function Lt(Nt){e[16](Nt)}let hn={callback:e[11]};e[4]!==void 0&&(hn.value=e[4]),c=new Ya({props:hn}),En.push(()=>Di(c,"value",Lt));let Et=nn(Ns),xt=[];for(let Nt=0;Nt<Et.length;Nt+=1)xt[Nt]=wfe(Efe(e,Et,Nt));let en=nn(aa),_t=[];for(let Nt=0;Nt<en.length;Nt+=1)_t[Nt]=xfe(Cfe(e,en,Nt));j=new sl({props:{tempo:e[4],accent:+e[5].split(":")[0]}});function Kt(Nt){e[24](Nt)}let Dt={saveToStorage:e[15],callback:e[11]};return e[9]!==void 0&&(Dt.notes=e[9]),Q=new Ts({props:Dt}),En.push(()=>Di(Q,"notes",Kt)),W=new es({props:{getExportData:e[13],demoId:e[0].id}}),se=new ts({props:{loadData:e[14]}}),xe=new ns({props:{demoId:e[0].id,loadData:e[14]}}),Ue=new ho({props:{key:" ",callback:e[28]}}),vt=new kr({props:{noteOn:e[10]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.innerHTML=`Connect a MIDI instrument, choose your tempo and subdivision, and start
        playing. The bar chart will show you how often you hit each time bin and
        the last notes will be shown as ticks that fade out one new notes come
        in (from red for new to blue for old). You can play freely, use the
        integrated metronome, or play a song in the background (in another tab).
        All notes will be timed relative to the first one, but you can adjust
        all notes to make them earlier or later in case you messed up the first
        one.
        <i>Try playing without looking, focus on the metronome.</i>`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),p=ie("label"),v=ze(`grid
            `),g=ie("select");for(let Nt=0;Nt<xt.length;Nt+=1)xt[Nt].c();y=ue(),E=ie("label"),_=ze(`binning
            `),S=ie("select");for(let Nt=0;Nt<_t.length;Nt+=1)_t[Nt].c();x=ue(),C=ie("label"),w=ze(`adjust
            `),T=ie("input"),O=ue(),B=ie("button"),L=ze(P),N=ue(),F=ie("div"),z=ie("canvas"),G=ue(),H=ie("div"),gt(j.$$.fragment),q=ue(),gt(Q.$$.fragment),K=ue(),gt(W.$$.fragment),J=ue(),gt(se.$$.fragment),ge=ue(),fe=ie("button"),fe.textContent="example",me=ue(),gt(xe.$$.fragment),ye=ue(),we=ie("div"),Ee=ie("div"),He=ue(),Ae=ie("canvas"),Ke=ue(),gt(Ue.$$.fragment),ct=ue(),gt(vt.$$.fragment),de(h,"class","explanation"),e[5]===void 0&&mr(()=>e[17].call(g)),de(p,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[6]===void 0&&mr(()=>e[18].call(S)),de(E,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),de(T,"type","number"),de(T,"step","0.01"),de(T,"min","-2"),de(T,"max","2"),Ei(T,"width","55px"),de(C,"title","Shift all notes by an amount in seconds"),de(B,"title","Toggle between bars and area"),de(m,"class","control"),Ei(z,"width",bh+"px"),Ei(z,"height",vg+"px"),de(F,"class","visualization"),de(H,"class","control"),Ei(Ae,"width",bh+"px"),Ei(Ae,"height",vg+"px"),de(we,"class","visualization"),de(t,"class","demo")},m(Nt,St){Rt(Nt,t,St),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(m,A),D(m,p),D(p,v),D(p,g);for(let pe=0;pe<xt.length;pe+=1)xt[pe]&&xt[pe].m(g,null);ri(g,e[5],!0),D(m,y),D(m,E),D(E,_),D(E,S);for(let pe=0;pe<_t.length;pe+=1)_t[pe]&&_t[pe].m(S,null);ri(S,e[6],!0),D(m,x),D(m,C),D(C,w),D(C,T),rn(T,e[7]),D(m,O),D(m,B),D(B,L),D(t,N),D(t,F),D(F,z),e[23](z),D(t,G),D(t,H),ft(j,H,null),D(H,q),ft(Q,H,null),D(H,K),ft(W,H,null),D(H,J),ft(se,H,null),D(H,ge),D(H,fe),D(H,me),ft(xe,H,null),D(t,ye),D(t,we),D(we,Ee),e[26](Ee),D(we,He),D(we,Ae),e[27](Ae),D(t,Ke),ft(Ue,t,null),D(t,ct),ft(vt,t,null),dt=!0,It||(rt=[nt(g,"change",e[17]),nt(g,"change",e[11]),nt(S,"change",e[18]),nt(S,"change",e[19]),nt(T,"input",e[20]),nt(T,"change",e[21]),nt(B,"click",e[22]),nt(fe,"click",e[25])],It=!0)},p(Nt,St){(!dt||St[0]&1)&&r!==(r=Nt[0].title+"")&&Ht(a,r);const pe={};!d&&St[0]&16&&(d=!0,pe.value=Nt[4],Oi(()=>d=!1)),c.$set(pe),St[0]&32&&ri(g,Nt[5]),St[0]&64&&ri(S,Nt[6]),St[0]&128&&$n(T.value)!==Nt[7]&&rn(T,Nt[7]),(!dt||St[0]&256)&&P!==(P=Nt[8]?"area":"bars")&&Ht(L,P);const _e={};St[0]&16&&(_e.tempo=Nt[4]),St[0]&32&&(_e.accent=+Nt[5].split(":")[0]),j.$set(_e);const De={};!k&&St[0]&512&&(k=!0,De.notes=Nt[9],Oi(()=>k=!1)),Q.$set(De);const Be={};St[0]&1&&(Be.demoId=Nt[0].id),W.$set(Be);const Le={};St[0]&1&&(Le.demoId=Nt[0].id),xe.$set(Le)},i(Nt){dt||(ut(c.$$.fragment,Nt),ut(j.$$.fragment,Nt),ut(Q.$$.fragment,Nt),ut(W.$$.fragment,Nt),ut(se.$$.fragment,Nt),ut(xe.$$.fragment,Nt),ut(Ue.$$.fragment,Nt),ut(vt.$$.fragment,Nt),dt=!0)},o(Nt){ht(c.$$.fragment,Nt),ht(j.$$.fragment,Nt),ht(Q.$$.fragment,Nt),ht(W.$$.fragment,Nt),ht(se.$$.fragment,Nt),ht(xe.$$.fragment,Nt),ht(Ue.$$.fragment,Nt),ht(vt.$$.fragment,Nt),dt=!1},d(Nt){Nt&&Bt(t),mt(c),Gn(xt,Nt),Gn(_t,Nt),e[23](null),mt(j),mt(Q),mt(W),mt(se),mt(xe),e[26](null),e[27](null),mt(Ue),mt(vt),It=!1,Vi(rt)}}}let bh=1e3,vg=1e3;function Ife(e,t,i){let{demoInfo:r}=t;const a=Math.PI*2;let o,h,u,m=120,c=Ns[0],d=64,A=0,p=!1,v=0,g=[],y;const E=K=>{g.length===0&&(v=K.timestamp);const W=(K.timestamp-v)/1e3;g.push(W),S()},_=(K,W,J,se,ge,fe,me)=>{const xe=bh/2,ye=vg/2,we=bh*.4,Ee=we*.8,He=we*.9,Ae=we*.95,Ke=Math.PI/2,Ue=K.getContext("2d"),ct=window.devicePixelRatio,vt=K.getBoundingClientRect();K.width=vt.width*ct,K.height=vt.height*ct,Ue.scale(ct,ct),K.style.width=`${vt.width}px`,K.style.height=`${vt.height}px`,Ue.clearRect(0,0,bh,vg);const[dt,It]=se.split(":").map(Kt=>+Kt),rt=Es(J)*dt,Et=W.map(Kt=>Kt+fe).map(Kt=>Kt%rt).map(Kt=>Kt/rt*a),xt=bh*.08;if(!me){const Kt=ge*dt/4;Ue.fillStyle="#f8f8f8",Ue.strokeStyle="#aaa";const Nt=sb().domain([0,a]).thresholds(_n(Kt).map(pe=>pe/Kt*a))(Et),St=os(Nt,pe=>pe.length);for(const pe of Nt){if(pe.length===0)continue;const _e=pe.length/St*xt,De=we+_e,Be=pe.x0-Ke,Le=Math.cos(Be),ke=Math.sin(Be),ce=pe.x1-Ke,X=Math.cos(ce),Y=Math.sin(ce);Ue.beginPath(),Ue.moveTo(xe+Le*we,ye+ke*we),Ue.lineTo(xe+Le*De,ye+ke*De),Ue.arc(xe,ye,De,Be,ce),Ue.lineTo(xe+X*we,ye+Y*we),Ue.closePath(),Ue.fill(),Ue.stroke()}}if(me&&Et.length>0){let Kt=4/ge;const pe=vd(Et,{bandwidth:Kt,pad:0,bins:360}).bandwidth(Kt),_e=os([...pe],De=>De.y);Ue.beginPath();for(const De of pe){const Be=De.x-Ke,Le=we+De.y/_e*xt,ke=Math.cos(Be),ce=Math.sin(Be);Ue.lineTo(xe+ke*Le,ye+ce*Le)}Ue.closePath(),Ue.fillStyle="#e4f0fa",Ue.fill(),Ue.strokeStyle="#aaa",Ue.stroke()}Ue.strokeStyle="#aaa",Ue.fillStyle="white",rd(Ue,xe,ye,we),Ue.lineWidth=2,Ue.fill(),Ue.stroke();const en=_n(dt).map(Kt=>a/dt*Kt-Ke),_t=_n(dt*It).map(Kt=>a/(dt*It)*Kt-Ke);Ue.beginPath(),Ue.lineWidth=2;for(const Kt of en){const Dt=Math.cos(Kt),Nt=Math.sin(Kt);Ue.moveTo(xe+Dt*Ee,ye+Nt*Ee),Ue.lineTo(xe+Dt*Ae,ye+Nt*Ae)}Ue.stroke(),Ue.lineWidth=1,Ue.beginPath();for(const Kt of _t){const Dt=Math.cos(Kt),Nt=Math.sin(Kt);Ue.moveTo(xe+Dt*He,ye+Nt*He),Ue.lineTo(xe+Dt*Ae,ye+Nt*Ae)}Ue.stroke()},S=()=>{_(o,g,m,c,d,A,p)},x=()=>{const K=y,W=K.tempo,J=K.grid,se=K.adjustTime,ge=K.notes;_(h,ge,W,J,d,se,p),i(3,u.innerText=`tempo: ${W} grid: ${J} adjust: ${se}`,u)};ur(S);const C=()=>({tempo:m,grid:c,binNote:d,adjustTime:A,showKde:p,notes:g}),w=K=>{y=K,x()},T=()=>{g.length>0&&Zr(r.id,C())};hr(T);function O(K){m=K,i(4,m)}function B(){c=Ir(this),i(5,c)}function P(){d=Ir(this),i(6,d)}const L=()=>{S(),x()};function N(){A=$n(this.value),i(7,A)}const F=()=>{S(),x()},z=()=>{i(8,p=!p),S(),x()};function G(K){En[K?"unshift":"push"](()=>{o=K,i(1,o)})}function H(K){g=K,i(9,g)}const j=()=>w(o5);function q(K){En[K?"unshift":"push"](()=>{u=K,i(3,u)})}function Q(K){En[K?"unshift":"push"](()=>{h=K,i(2,h)})}const k=()=>E({timestamp:performance.now()});return e.$$set=K=>{"demoInfo"in K&&i(0,r=K.demoInfo)},[r,o,h,u,m,c,d,A,p,g,E,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q,k]}class Tfe extends Ai{constructor(t){super(),gi(this,t,Ife,Sfe,pi,{demoInfo:0},null,[-1,-1])}}function Bfe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T;return{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Allow microphone access and play pitch bends or vibratos. Similar to a
        tuner, the needle shows you how far you are off the closest note in
        cents (0 is perfectly on the note, +/-50% is extactly between two valid
        notes).`,u=ue(),m=ie("div"),c=ie("label"),d=ze(`past seconds
            `),A=ie("input"),p=ue(),v=ie("label"),g=ze(`min. decibels
            `),y=ie("input"),E=ue(),_=ie("button"),_.textContent="resume",S=ue(),x=ie("div"),C=ie("canvas"),de(h,"class","explanation"),de(A,"type","number"),de(A,"min","0.05"),de(A,"max","1"),de(A,"step","0.05"),de(y,"type","number"),de(y,"min","-40"),de(y,"max","-5"),de(y,"step","5"),de(v,"title","The minimum loudness in decibels for a sound to be registered as input. Lower means fainter notes will be registered but there will be more noise such as octave errors."),de(_,"title","Press this button if your browser prevents audio access because there needs to be a user interaction first"),de(m,"class","control"),Ei(C,"width",ml+"px"),Ei(C,"height",xf+"px"),de(x,"class","visualization"),de(t,"class","demo")},m(O,B){Rt(O,t,B),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),D(m,c),D(c,d),D(c,A),rn(A,e[5]),D(m,p),D(m,v),D(v,g),D(v,y),rn(y,e[6]),D(m,E),D(m,_),D(t,S),D(t,x),D(x,C),e[11](C),e[12](x),w||(T=[nt(A,"input",e[7]),nt(y,"input",e[8]),nt(y,"change",e[9]),nt(_,"click",e[10])],w=!0)},p(O,[B]){B&1&&r!==(r=O[0].title+"")&&Ht(a,r),B&32&&$n(A.value)!==O[5]&&rn(A,O[5]),B&64&&$n(y.value)!==O[6]&&rn(y,O[6])},i:yn,o:yn,d(O){O&&Bt(t),e[11](null),e[12](null),w=!1,Vi(T)}}}let ml=1200,xf=600;const Rfe=16;function Ofe(e,t,i){let{demoInfo:r}=t,a,o,h,u,m,c,d=.25,A=-25,p=0,v=[];function g(T,O){u.getFloatTimeDomainData(T);const B=m.findPitch(T,O),P=B[0],L=B[1],N=xs.fromFreq(P),F=xs.midi(N),z=f0.freqToMidi(P),G=(z-F)*100,j={time:(performance.now()-p)/1e3,pitch:P,note:N,noteMidi:F,actualMidi:z,actualMidiChroma:z%12,centsOffset:G,clarity:L};v.push(j),v=v.slice(-(1e3/Rfe)*d),y(),c=requestAnimationFrame(()=>g(T,O))}const y=()=>{const T=ml/2,O=xf-10,B=ml*.45,P=ml*.35,L=ml*.4,N=ml*.48,F=ml*.1,z=o.getContext("2d"),G=window.devicePixelRatio,H=o.getBoundingClientRect();i(2,o.width=H.width*G,o),i(2,o.height=H.height*G,o),z.scale(G,G),i(2,o.style.width=`${H.width}px`,o),i(2,o.style.height=`${H.height}px`,o),z.clearRect(0,0,ml,xf);const j=S9().domain([-50,50]).range([-Math.PI,0]),q=ab(v,K=>K.centsOffset);if(z.lineWidth=5,z.lineCap="round",z.strokeStyle="#aaa",q>-100){const K=j(q),W=Math.cos(K),J=Math.sin(K);z.beginPath(),z.moveTo(T+W*F,O+J*F),z.lineTo(T+W*B,O+J*B),z.stroke()}z.fillStyle="white",rd(z,T,O,F),z.lineWidth=2,z.stroke(),z.lineWidth=2,z.fill(),z.stroke();const Q=_n(-50,51,25).map(j),k=_n(-50,51,5).map(j);z.beginPath(),z.lineWidth=2;for(const K of Q){const W=Math.cos(K),J=Math.sin(K);z.moveTo(T+W*P,O+J*P),z.lineTo(T+W*B,O+J*B)}z.stroke(),z.lineWidth=1,z.beginPath();for(const K of k){const W=Math.cos(K),J=Math.sin(K);z.moveTo(T+W*L,O+J*L),z.lineTo(T+W*B,O+J*B)}z.fillStyle="#888",z.font="30px Arial",z.textAlign="center",z.textBaseline="middle",z.fillText("too low",ml*.25,xf*.7),z.fillText("too high",ml*.75,xf*.7),z.stroke();for(const K of[-50,-25,0,25,50]){const W=j(K),J=Math.cos(W),se=Math.sin(W);z.fillText(K,T+J*N,O+se*N)}z.font="60px Arial",v.length>0&&z.fillText(v.at(-1).note,T,O-20)};ur(()=>{p=performance.now(),i(3,h=new window.AudioContext),u=h.createAnalyser(),navigator.mediaDevices.getUserMedia({audio:!0}).then(T=>{h.createMediaStreamSource(T).connect(u),i(4,m=eu.forFloat32Array(u.fftSize)),i(4,m.minVolumeDecibels=A,m);const O=new Float32Array(m.inputLength);g(O,h.sampleRate)}),y()}),hr(()=>{clearTimeout(c),cancelAnimationFrame(c)});function E(){d=$n(this.value),i(5,d)}function _(){A=$n(this.value),i(6,A)}const S=()=>i(4,m.minVolumeDecibels=A,m),x=()=>h.resume();function C(T){En[T?"unshift":"push"](()=>{o=T,i(2,o)})}function w(T){En[T?"unshift":"push"](()=>{a=T,i(1,a)})}return e.$$set=T=>{"demoInfo"in T&&i(0,r=T.demoInfo)},[r,a,o,h,m,d,A,E,_,S,x,C,w]}class Dfe extends Ai{constructor(t){super(),gi(this,t,Ofe,Bfe,pi,{demoInfo:0})}}const Lfe=60,Pfe=6,Nfe=[{name:"C",number:60,velocity:98,time:0,channel:1,duration:3.0520999999996277,end:3.0520999999996277},{name:"C",number:60,velocity:34,time:3.906,channel:1,duration:1.6430000000000002,end:5.549},{name:"C",number:60,velocity:88,time:7.998,channel:1,duration:1.7090000000000005,end:9.707},{name:"C",number:60,velocity:17,time:11.546,channel:1,duration:2.567,end:14.113},{name:"C",number:60,velocity:19,time:15.727,channel:1,duration:1.6819999999999986,end:17.409},{name:"C",number:60,velocity:62,time:20.067,channel:1,duration:1.6660000000000004,end:21.733},{name:"C",number:60,velocity:110,time:24.074,channel:1,duration:2.0180999999996274,end:26.09209999999963},{name:"C",number:60,velocity:104,time:28.147,channel:1,duration:.990000000000002,end:29.137},{name:"C",number:60,velocity:112,time:32.05509999999963,channel:1,duration:3.1989000000003713,end:35.254},{name:"C",number:60,velocity:96,time:40.084,channel:1,duration:4.016999999999996,end:44.101},{name:"D",number:62,velocity:24,time:52.125,channel:1,duration:.4269999999999996,end:52.552}],Ffe="duration-pies",kfe="2024-07-30T16:39:24.514Z",Ufe={tempo:Lfe,pastNoteCount:Pfe,notes:Nfe,_demoId:Ffe,_date:kfe};function Gfe(e){let t,i,r=e[0].title+"",a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q;function k(se){e[14](se)}let K={callback:e[9]};e[1]!==void 0&&(K.value=e[1]),c=new Ya({props:K}),En.push(()=>Di(c,"value",k));function W(se){e[15](se)}let J={callback:e[9],step:2};return e[3]!==void 0&&(J.value=e[3]),p=new C0({props:J}),En.push(()=>Di(p,"value",W)),x=new sl({props:{tempo:e[1],accent:4}}),O=new es({props:{getExportData:e[10],demoId:e[0].id}}),P=new ts({props:{loadData:e[11]}}),z=new ns({props:{demoId:e[0].id,loadData:e[11]}}),H=new kr({props:{noteOn:e[6],noteOff:e[7],controlChange:e[8]}}),{c(){t=ie("main"),i=ie("h2"),a=ze(r),o=ue(),h=ie("p"),h.textContent=`Set a tempo and try to play different note durations (whole, half,
        quarter, eighth). You can also try dotted notes. Each note will be shown
        as a pie chart, that shows how much of a whole note you played. For
        example, if you tried to play a half note, the pie chart should be half
        full. If you play longer than a whole note, the addtional time will be
        shown in red.`,u=ue(),m=ie("div"),gt(c.$$.fragment),A=ue(),gt(p.$$.fragment),g=ue(),y=ie("div"),E=ie("canvas"),_=ue(),S=ie("div"),gt(x.$$.fragment),C=ue(),w=ie("button"),w.textContent="reset",T=ue(),gt(O.$$.fragment),B=ue(),gt(P.$$.fragment),L=ue(),N=ie("button"),N.textContent="example",F=ue(),gt(z.$$.fragment),G=ue(),gt(H.$$.fragment),de(h,"class","explanation"),de(m,"class","control"),Ei(E,"width",tb+"px"),Ei(E,"height",fh+"px"),de(y,"class","visualization"),de(w,"title","Clear all played notes"),de(S,"class","control"),de(t,"class","demo")},m(se,ge){Rt(se,t,ge),D(t,i),D(i,a),D(t,o),D(t,h),D(t,u),D(t,m),ft(c,m,null),D(m,A),ft(p,m,null),D(t,g),D(t,y),D(y,E),e[16](E),D(t,_),D(t,S),ft(x,S,null),D(S,C),D(S,w),D(S,T),ft(O,S,null),D(S,B),ft(P,S,null),D(S,L),D(S,N),D(S,F),ft(z,S,null),D(t,G),ft(H,t,null),j=!0,q||(Q=[nt(w,"click",e[17]),nt(N,"click",e[18])],q=!0)},p(se,[ge]){(!j||ge&1)&&r!==(r=se[0].title+"")&&Ht(a,r);const fe={};!d&&ge&2&&(d=!0,fe.value=se[1],Oi(()=>d=!1)),c.$set(fe);const me={};!v&&ge&8&&(v=!0,me.value=se[3],Oi(()=>v=!1)),p.$set(me);const xe={};ge&2&&(xe.tempo=se[1]),x.$set(xe);const ye={};ge&1&&(ye.demoId=se[0].id),O.$set(ye);const we={};ge&1&&(we.demoId=se[0].id),z.$set(we)},i(se){j||(ut(c.$$.fragment,se),ut(p.$$.fragment,se),ut(x.$$.fragment,se),ut(O.$$.fragment,se),ut(P.$$.fragment,se),ut(z.$$.fragment,se),ut(H.$$.fragment,se),j=!0)},o(se){ht(c.$$.fragment,se),ht(p.$$.fragment,se),ht(x.$$.fragment,se),ht(O.$$.fragment,se),ht(P.$$.fragment,se),ht(z.$$.fragment,se),ht(H.$$.fragment,se),j=!1},d(se){se&&Bt(t),mt(c),mt(p),e[16](null),mt(x),mt(O),mt(P),mt(z),mt(H),q=!1,Vi(Q)}}}let tb=1200,fh=400;function Vfe(e,t,i){let r,a,{demoInfo:o}=t,h;const u=2*Math.PI;let m=60,c=6,d=[],A,p=new Map;const v=P=>{d.length===0&&(A=P.timestamp);const L=(P.timestamp-A)/1e3,N={name:P.note.name,number:P.note.number,velocity:P.rawVelocity,time:L,channel:P.message.channel,duration:0};if(p.has(P.note.number)){const F=p.get(P.note.number);F.end===void 0&&(F.end=L)}i(4,d=[...d,N]),p.set(P.note.number,N),E()},g=P=>{if(p.has(P.note.number)){const L=p.get(P.note.number),N=(P.timestamp-A)/1e3;L.end=N,L.duration=L.end-L.time}i(4,d=[...d]),E()},y=P=>{const L=ss(P.rawValue*2,20,250);i(3,c=L),E()},E=()=>{const P=fh/2,L=tb/c,N=L*.4,F=L*.2,z=L*.35,G=h.getContext("2d"),H=window.devicePixelRatio,j=h.getBoundingClientRect();i(2,h.width=j.width*H,h),i(2,h.height=j.height*H,h),G.scale(H,H),i(2,h.style.width=`${j.width}px`,h),i(2,h.style.height=`${j.height}px`,h),G.clearRect(0,0,tb,fh);for(const[q,Q]of d.slice(-c).entries()){const k=L*(q+.5);G.fillStyle="#d5f3fe";const K=Math.min(Q.duration/r,1);if(G.beginPath(),G.moveTo(k,P),G.arc(k,P,N,-Math.PI/2,K*u-Math.PI/2),G.closePath(),G.fill(),Q.duration>r){G.fillStyle="crimson";const xe=Math.min((Q.duration-r)/r,1);G.beginPath(),G.moveTo(k,P),G.arc(k,P,N,-Math.PI/2,xe*u-Math.PI/2),G.closePath(),G.fill()}G.lineWidth=2,G.strokeStyle="#aaa",rd(G,k,P,N);const W=_n(4).map(xe=>xe*u/4),J=_n(8).map(xe=>xe*u/8);G.beginPath();for(const xe of W){const ye=Math.cos(xe),we=Math.sin(xe);G.moveTo(k+ye*F,P+we*F),G.lineTo(k+ye*N,P+we*N)}G.lineWidth=1;for(const xe of J){const ye=Math.cos(xe),we=Math.sin(xe);G.moveTo(k+ye*z,P+we*z),G.lineTo(k+ye*N,P+we*N)}if(G.stroke(),Q.duration===0)continue;const se=b9(a,xe=>Math.abs(Q.duration-xe.seconds)),ge=a[se];G.fillStyle="#666",G.font="20px sans-serif",G.textAlign="center",G.fillText(`closest: ${ge.symbol}`,k,fh-50);const fe=Q.duration/ge.seconds*100;G.fillText(`${fe.toFixed()}%`,k,fh-30);let me="";fe<80?me="too short":fe<90?me="a bit short":fe<110?me="good!":fe<120?me="a bit long":me="too long",G.fillText(`${me}`,k,fh-10)}},_=()=>({tempo:m,pastNoteCount:c,notes:d}),S=P=>{(d.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(d.length>0&&x(),i(1,m=P.tempo),i(3,c=P.pastNoteCount),i(4,d=P.notes),E())},x=()=>{d.length>0&&Zr(o.id,_())};hr(x);function C(P){m=P,i(1,m)}function w(P){c=P,i(3,c)}function T(P){En[P?"unshift":"push"](()=>{h=P,i(2,h)})}const O=()=>{confirm("Reset played notes?")&&(x(),i(4,d=[]),i(5,p=new Map),E())},B=()=>S(Ufe);return e.$$set=P=>{"demoInfo"in P&&i(0,o=P.demoInfo)},e.$$.update=()=>{e.$$.dirty&2&&i(13,r=Es(m)*4),e.$$.dirty&8192&&(a=Q4.filter(P=>!P.tuplet).map(P=>({...P,seconds:P.beats*(r/4)})))},[o,m,h,c,d,p,v,g,y,E,_,S,x,r,C,w,T,O,B]}class Qfe extends Ai{constructor(t){super(),gi(this,t,Vfe,Gfe,pi,{demoInfo:0})}}const zc=[{id:"accents",title:"Accents",description:"See if you accent the right notes.",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],data:["order","ioi","velocity"],skills:["accents"],patterns:["duration/ioi as symbol","dynamics as font-size","time is linear","time encoded non-linearly","update after note"],component:Koe},{id:"chord-arpeggio-timing",title:"Chord and Arpeggio Timing",description:"See how spaced out the notes in a chord or arpeggio are, and how much time lies between these.",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],data:["order","onset/time","ioi","pitch"],skills:["chord-timing","arpeggio-timing"],patterns:["onset as tick","compressed pitches","chord detection","time is linear","time encoded linearly","update on note"],component:sle},{id:"chord-diagrams",title:"Chord Diagrams",description:"See what chords you play on a guitar/bass as chord diagrams.",input:"MIDI",instruments:["guitar/bass"],data:["order","onset/time","pitch","velocity","instrument"],skills:["chord-notes"],patterns:["instrument layout","chord detection","time is linear","time is collapsed","update on note"],component:gle},{id:"dynamics",title:"Dynamics",description:"Check how well you control the loudness of notes.",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],data:["order","dynamics"],skills:["constant-dynamics","(de)crescendo","accents"],patterns:["dynamics as bar","baselines as grid","time is linear","time encoded linearly","update on note","musical units"],component:Tle},{id:"duration-pies",title:"Duration Pies",description:"Check how well you control the duration of notes.",input:"MIDI",instruments:["keyboard"],data:["order","duration"],skills:["duration"],patterns:["duration as pie","baselines as angle","time is circular","time encoded ciruclar","update on note","musical units"],component:Qfe},{id:"fretboard-heatmap",title:"Fretboard Heatmap",description:"See how often you play different fretboard positions.",input:"MIDI",instruments:["guitar/bass"],data:["instrument"],skills:["instrument-layout"],patterns:["distribution as heatmap","instrument layout","time is collapsed","update on note"],component:Dle},{id:"fretboard-improvisation-intervals",title:"Fretboard Improvisation Intervals",description:"Once you play a note, see where on the fretboard you can reach different intervals to the last played note.",input:"MIDI",instruments:["guitar/bass"],data:["order","pitch","instrument","pitch-interval"],skills:["instrument-layout","pitch-intervals"],patterns:["instrument layout","time is instant","update on note"],component:Hle},{id:"fretboard-jitter",title:"Fretboard Jitter",description:"See how you play different fretboard positions over time.",input:"MIDI",instruments:["guitar/bass"],data:["order","instrument"],skills:["instrument-layout"],patterns:["distribution as jitter","instrument layout","time is linear","time encoded non-linearly","update on note"],component:$le},{id:"fretboard-spacetime-cube",title:"Fretboard Spacetime Cube",description:"See how you play different fretboard positions over time.",input:"MIDI",instruments:["guitar/bass"],data:["onset/time","instrument"],skills:["instrument-layout"],patterns:["spacetime cube","instrument layout","time is linear","time encoded linearly","update on note"],component:rce},{id:"improvisation-intervals",title:"Improvisation Intervals",description:"See how often you use different intervals in improvisation.",input:"MIDI",instruments:["guitar/bass","keyboard"],data:["order","pitch","pitch-interval"],skills:["pitch-intervals"],patterns:["distribution as histogram","time is collapsed","update on note"],component:cce},{id:"improvisation-note-colors",title:"Improvisation Note Colors",description:"See how often you use different kinds of notes in improvisation.",input:"MIDI",instruments:["guitar/bass","keyboard"],data:["order","duration","pitch"],skills:["pitch-intervals","scale-degrees"],patterns:["note role as color","duration/ioi as bar","time is linear","time encoded non-linearly","update on note"],component:gce},{id:"improvisation-scale-degrees",title:"Improvisation Scale Degrees",description:"See how often you use different scale degrees in improvisation.",input:"MIDI",instruments:["guitar/bass","keyboard"],data:["pitch"],skills:["pitch-intervals","scale-degrees"],patterns:["note role as color","distribution as histogram","time is collapsed","update on note"],component:Mce},{id:"improvisation-scale-degrees-bar",title:"Improvisation Scale Degrees (Bar)",description:"See how often you use different scale degrees in improvisation, for each played bar.",input:"MIDI",instruments:["guitar/bass","keyboard"],data:["pitch","onset/time"],skills:["pitch-intervals","scale-degrees"],patterns:["note role as color","distribution as histogram","facets","time segments","time is linear","time is collapsed","time encoded linearly","update on note"],component:xce},{id:"keyboard-histogram",title:"Keyboard Histogram",description:"See how often you play different keyboard keys.",input:"MIDI",instruments:["keyboard"],data:["pitch","instrument"],skills:["instrument-layout"],patterns:["distribution as histogram","instrument layout","time is collapsed","update on note"],component:Rce},{id:"pitch-bend",title:"Pitch Bend",description:"Practice different kinds of pitch bends.",input:"MIDI",instruments:["guitar/bass","keyboard"],data:["onset/time","pitch"],skills:["pitch-keeping","bending","vibrato"],patterns:["pitch as line","baselines as grid","time is linear","time encoded linearly","update on note"],component:f0e},{id:"pitch-bend-audio",title:"Pitch Bend (Audio)",description:"Practice different kinds of pitch bends.",input:"audio",instruments:["guitar/bass","keyboard","singing"],data:["onset/time","pitch"],skills:["pitch-keeping","bending","vibrato"],patterns:["pitch as line","baselines as grid","time is linear","time encoded linearly","update real-time"],component:S0e},{id:"pitch-offset-cents",title:"Pitch Offset in Cents",description:"See how well you are on pitch.",input:"audio",instruments:["guitar/bass","keyboard","singing"],data:["onset/time","pitch"],skills:["pitch-keeping","bending","vibrato"],patterns:["pitch as line","baselines as grid","explicit difference","difference as color","time is linear","time encoded linearly","update real-time","dual encoding"],component:G0e},{id:"pitch-offset-cents-needle",title:"Pitch Offset in Cents (Needle)",description:"See how well you are on pitch.",input:"audio",instruments:["guitar/bass","keyboard","singing"],data:["onset/time","pitch"],skills:["pitch-keeping"],patterns:["pitch as angle","baselines as grid","explicit difference","time is instant","update real-time"],component:Dfe},{id:"rhythm-sheet-music",title:"Rhythm Sheet Music",description:"This demo displays the notes you play as staff notation (𝅝, 𝅗𝅥, 𝅘𝅥, 𝅘𝅥𝅮, 𝅘𝅥𝅯) and offset in percent.",input:"MIDI",instruments:["drum","guitar/bass","keyboard","pc-key"],data:["order","duration/ioi"],skills:["sub-division","tempo-keeping"],patterns:["duration/ioi as symbol","time is linear","time encoded non-linearly","update after note"],component:q0e},{id:"speed-up",title:"Speed-Up",description:"Record a short exercise at a slow tempo, then practice it with steadily increasing tempo.",input:"MIDI",instruments:["drum","guitar/bass","keyboard","pc-key"],data:["onset/time","exercise","baselines as grid"],skills:["sub-division","timing-consistency","swing-feel"],patterns:["phrase repetition","facets","increasing difficulty","comparison between takes","time is linear","time encoded linearly","update on note"],component:yhe},{id:"speed-up-tab",title:"Speed-Up Tab",description:"Record a short guitar exercise at a slow tempo, then practice it with steadily increasing tempo.",input:"MIDI",instruments:["guitar/bass"],data:["onset/time","exercise","baselines as grid","instrument"],skills:["sub-division","timing-consistency","swing-feel"],patterns:["phrase repetition","facets","increasing difficulty","comparison between takes","time is linear","time encoded linearly","update on note"],component:She},{id:"sub-division",title:"Sub-Division",description:"Learn rhythmic playing in different sub-divisions.",input:"MIDI",instruments:["drum","guitar/bass","keyboard","pc-key"],data:["onset/time"],skills:["sub-division","timing-consistency"],patterns:["time is cyclic","time encoded circular","baselines as grid","distribution as histogram","distribution as density","update on note"],component:sde},{id:"sub-division-bar",title:"Sub-Division (Per Bar)",description:"Learn rhythmic playing in different sub-divisions.",input:"MIDI",instruments:["drum","guitar/bass","keyboard","pc-key"],data:["onset/time"],skills:["sub-division","timing-consistency"],patterns:["time is cyclic","time encoded circular","baselines as grid","distribution as histogram","distribution as density","target areas","update on note"],component:dde},{id:"sub-division-drums",title:"Sub-Division (Drums)",description:"Learn rhythmic playing in different sub-divisions.",input:"MIDI",instruments:["drum","pc-key"],data:["onset/time","instrument"],skills:["sub-division","timing-consistency","synchronized-body-parts"],patterns:["time is cyclic","time encoded linearly","baselines as grid","distribution as histogram","distribution as density","facets","update on note"],component:_fe},{id:"sub-division-linear",title:"Sub-Division (Linear)",description:"Learn rhythmic playing in different sub-divisions.",input:"MIDI",instruments:["drum","guitar/bass","keyboard","pc-key"],data:["onset/time"],skills:["sub-division","timing-consistency"],patterns:["time is cyclic","time encoded linearly","baselines as grid","distribution as histogram","distribution as density","update on note"],component:Tde},{id:"sub-division-history",title:"Sub-Division (History)",description:"Learn rhythmic playing in different sub-divisions.",input:"MIDI",instruments:["drum","guitar/bass","keyboard","pc-key"],data:["onset/time"],skills:["sub-division","timing-consistency"],patterns:["time is cyclic","time encoded circular","baselines as grid","distribution as histogram","distribution as density","facets","comparison between takes","update on note"],component:Tfe},{id:"strumming-pattern",title:"Strumming Pattern",description:"Practice up/down strumming patterns.",input:"MIDI",instruments:["guitar/bass"],data:["onset/time","instrument"],skills:["strumming-direction","strumming-strings"],patterns:["direction as arrow","direction as color","chord detection","time is linear","time encoded linearly","update on note"],component:Nhe},{id:"tempo-drift",title:"Tempo Drift",description:"Keep your tempo constant over a longer stretch of playing.",input:"MIDI",instruments:["drum","guitar/bass","keyboard","pc-key"],data:["order","duration/ioi"],skills:["tempo-keeping"],patterns:["duration/ioi as bar","baselines as grid","time is linear","time encoded non-linearly","update on note"],component:jde},{id:"two-handed-timing",title:"Two-Handed Timing",description:"Play the same or a different rhythm with each hand and see your timing seperately.",input:"MIDI",instruments:["keyboard","pc-key"],data:["onset/time","instrument"],skills:["sub-division","timing-consistency","syncopation","synchronized-timing","synchronized-body-parts"],patterns:["time is cyclic","time encoded linearly","baselines as grid","distribution as histogram","distribution as density","facets","update on note"],component:pfe}];function rw(e,t,i){const r=e.slice();return r[32]=t[i],r}function sw(e,t,i){const r=e.slice();return r[35]=t[i],r}function aw(e,t,i){const r=e.slice();return r[35]=t[i],r}function Hfe(e){let t,i,r;var a=e[0].component;function o(h,u){return{props:{demoInfo:h[0]}}}return a&&(t=v1(a,o(e))),{c(){t&&gt(t.$$.fragment),i=nb()},m(h,u){t&&ft(t,h,u),Rt(h,i,u),r=!0},p(h,u){if(u[0]&1&&a!==(a=h[0].component)){if(t){Cg();const m=t;ht(m.$$.fragment,1,0,()=>{mt(m,1)}),Eg()}a?(t=v1(a,o(h)),gt(t.$$.fragment),ut(t.$$.fragment,1),ft(t,i.parentNode,i)):t=null}else if(a){const m={};u[0]&1&&(m.demoInfo=h[0]),t.$set(m)}},i(h){r||(t&&ut(t.$$.fragment,h),r=!0)},o(h){t&&ht(t.$$.fragment,h),r=!1},d(h){h&&Bt(i),t&&mt(t,h)}}}function zfe(e){let t,i;return t=new woe({props:{apps:zc,allInstruments:e[9],allData:e[10],allPatterns:e[12]}}),{c(){gt(t.$$.fragment)},m(r,a){ft(t,r,a),i=!0},p:yn,i(r){i||(ut(t.$$.fragment,r),i=!0)},o(r){ht(t.$$.fragment,r),i=!1},d(r){mt(t,r)}}}function Wfe(e){let t,i;return t=new doe({}),{c(){gt(t.$$.fragment)},m(r,a){ft(t,r,a),i=!0},p:yn,i(r){i||(ut(t.$$.fragment,r),i=!0)},o(r){ht(t.$$.fragment,r),i=!1},d(r){mt(t,r)}}}function jfe(e){let t,i,r;function a(h){e[29](h)}let o={};return e[6]!==void 0&&(o.currentTool=e[6]),t=new coe({props:o}),En.push(()=>Di(t,"currentTool",a)),{c(){gt(t.$$.fragment)},m(h,u){ft(t,h,u),r=!0},p(h,u){const m={};!i&&u[0]&64&&(i=!0,m.currentTool=h[6],Oi(()=>i=!1)),t.$set(m)},i(h){r||(ut(t.$$.fragment,h),r=!0)},o(h){ht(t.$$.fragment,h),r=!1},d(h){mt(t,h)}}}function $fe(e){let t,i,r,a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x,C,w,T,O,B,P,L,N,F,z,G;function H(se){e[19](se)}let j={allSkills:e[11]};e[4]!==void 0&&(j.currentSkills=e[4]),m=new RX({props:j}),En.push(()=>Di(m,"currentSkills",H));let q=nn(e[8].values()),Q=[];for(let se=0;se<q.length;se+=1)Q[se]=ow(aw(e,q,se));let k=nn(e[9].values()),K=[];for(let se=0;se<k.length;se+=1)K[se]=lw(sw(e,k,se));let W=nn(e[7]),J=[];for(let se=0;se<W.length;se+=1)J[se]=cw(rw(e,W,se));return{c(){t=ie("p"),t.textContent=`This page contains a collection of small apps that are each tailored to a
      specific musical skill and sometimes also specific kind of musical data.
      You can filter apps by different aspects with the sidebar on the left.`,i=ue(),r=ie("div"),a=ie("div"),o=ie("div"),h=ie("input"),u=ue(),gt(m.$$.fragment),d=ue(),A=ie("div"),p=ie("h2"),p.textContent="input",v=ue(),g=ie("button"),g.textContent="show all",y=ue();for(let se=0;se<Q.length;se+=1)Q[se].c();E=ue(),_=ie("div"),S=ie("h2"),S.textContent="instrument",x=ue(),C=ie("button"),C.textContent="show all",w=ue();for(let se=0;se<K.length;se+=1)K[se].c();T=ue(),O=ie("div");for(let se=0;se<J.length;se+=1)J[se].c();B=ue(),P=ie("button"),P.textContent="💾 export usage",L=ue(),N=ie("button"),N.textContent="🚮 delete usage",de(t,"class","explanation"),de(h,"class","search-box svelte-tuqaaf"),de(h,"type","search"),de(h,"placeholder","search by title"),de(g,"class","svelte-tuqaaf"),de(C,"class","svelte-tuqaaf"),de(a,"class","filter svelte-tuqaaf"),de(O,"class","grid"),de(r,"class","grid-filter-demo svelte-tuqaaf"),de(P,"title","Export usage statistics"),de(N,"title","Reset usage statistics")},m(se,ge){Rt(se,t,ge),Rt(se,i,ge),Rt(se,r,ge),D(r,a),D(a,o),D(o,h),rn(h,e[5]),D(a,u),ft(m,a,null),D(a,d),D(a,A),D(A,p),D(A,v),D(A,g),D(A,y);for(let fe=0;fe<Q.length;fe+=1)Q[fe]&&Q[fe].m(A,null);D(a,E),D(a,_),D(_,S),D(_,x),D(_,C),D(_,w);for(let fe=0;fe<K.length;fe+=1)K[fe]&&K[fe].m(_,null);D(r,T),D(r,O);for(let fe=0;fe<J.length;fe+=1)J[fe]&&J[fe].m(O,null);Rt(se,B,ge),Rt(se,P,ge),Rt(se,L,ge),Rt(se,N,ge),F=!0,z||(G=[nt(h,"input",e[18]),nt(g,"click",e[20]),nt(C,"click",e[23]),nt(P,"click",e[27]),nt(N,"click",e[28])],z=!0)},p(se,ge){ge[0]&32&&h.value!==se[5]&&rn(h,se[5]);const fe={};if(!c&&ge[0]&16&&(c=!0,fe.currentSkills=se[4],Oi(()=>c=!1)),m.$set(fe),ge[0]&264){q=nn(se[8].values());let me;for(me=0;me<q.length;me+=1){const xe=aw(se,q,me);Q[me]?Q[me].p(xe,ge):(Q[me]=ow(xe),Q[me].c(),Q[me].m(A,null))}for(;me<Q.length;me+=1)Q[me].d(1);Q.length=q.length}if(ge[0]&516){k=nn(se[9].values());let me;for(me=0;me<k.length;me+=1){const xe=sw(se,k,me);K[me]?K[me].p(xe,ge):(K[me]=lw(xe),K[me].c(),K[me].m(_,null))}for(;me<K.length;me+=1)K[me].d(1);K.length=k.length}if(ge[0]&129){W=nn(se[7]);let me;for(me=0;me<W.length;me+=1){const xe=rw(se,W,me);J[me]?J[me].p(xe,ge):(J[me]=cw(xe),J[me].c(),J[me].m(O,null))}for(;me<J.length;me+=1)J[me].d(1);J.length=W.length}},i(se){F||(ut(m.$$.fragment,se),F=!0)},o(se){ht(m.$$.fragment,se),F=!1},d(se){se&&(Bt(t),Bt(i),Bt(r),Bt(B),Bt(P),Bt(L),Bt(N)),mt(m),Gn(Q,se),Gn(K,se),Gn(J,se),z=!1,Vi(G)}}}function Xfe(e){let t,i,r;return{c(){t=ie("input"),de(t,"type","password"),de(t,"placeholder","password")},m(a,o){Rt(a,t,o),rn(t,e[1]),i||(r=nt(t,"input",e[17]),i=!0)},p(a,o){o[0]&2&&t.value!==a[1]&&rn(t,a[1])},i:yn,o:yn,d(a){a&&Bt(t),i=!1,r()}}}function ow(e){let t,i=e[35]+"",r,a,o,h,u;function m(){return e[21](e[35])}function c(){return e[22](e[35])}return{c(){t=ie("button"),r=ze(i),a=ue(),de(t,"class",o=A1(e[3].has(e[35])?"active":"hidden")+" svelte-tuqaaf"),de(t,"title","click to toggle, double-click to only show this")},m(d,A){Rt(d,t,A),D(t,r),D(t,a),h||(u=[nt(t,"click",m),nt(t,"dblclick",c)],h=!0)},p(d,A){e=d,A[0]&8&&o!==(o=A1(e[3].has(e[35])?"active":"hidden")+" svelte-tuqaaf")&&de(t,"class",o)},d(d){d&&Bt(t),h=!1,Vi(u)}}}function lw(e){let t,i=e[35]+"",r,a,o,h,u;function m(){return e[24](e[35])}function c(){return e[25](e[35])}return{c(){t=ie("button"),r=ze(i),a=ue(),de(t,"class",o=A1(e[2].has(e[35])?"active":"hidden")+" svelte-tuqaaf"),de(t,"title","click to toggle, double-click to only show this")},m(d,A){Rt(d,t,A),D(t,r),D(t,a),h||(u=[nt(t,"click",m),nt(t,"dblclick",c)],h=!0)},p(d,A){e=d,A[0]&4&&o!==(o=A1(e[2].has(e[35])?"active":"hidden")+" svelte-tuqaaf")&&de(t,"class",o)},d(d){d&&Bt(t),h=!1,Vi(u)}}}function cw(e){let t,i,r=e[32].title+"",a,o,h,u=e[32].description+"",m,c,d,A=(e[32].input==="audio"?_C:"")+"",p,v,g=(e[32].input==="MIDI"?MC:"")+"",y,E,_=e[32].instruments.includes("guitar/bass")?"🎸":"",S,x,C=e[32].instruments.includes("drum")?"🥁":"",w,T,O=e[32].instruments.includes("keyboard")?"🎹":"",B,P,L=e[32].instruments.includes("wind")?"🪈":"",N,F,z=e[32].instruments.includes("singing")?"🎤":"",G,H,j=e[32].instruments.includes("strings")?"🎻":"",q,Q,k=e[32].instruments.includes("pc-key")?"⌨️":"",K,W,J,se;function ge(){return e[26](e[32])}return{c(){t=ie("div"),i=ie("h2"),a=ze(r),o=ue(),h=ie("div"),m=ze(u),c=ue(),d=ie("div"),p=ze(A),v=ue(),y=ze(g),E=ue(),S=ze(_),x=ue(),w=ze(C),T=ue(),B=ze(O),P=ue(),N=ze(L),F=ue(),G=ze(z),H=ue(),q=ze(j),Q=ue(),K=ze(k),W=ue(),de(h,"class","description"),de(d,"class","tags svelte-tuqaaf"),de(t,"class","card svelte-tuqaaf")},m(fe,me){Rt(fe,t,me),D(t,i),D(i,a),D(t,o),D(t,h),D(h,m),D(t,c),D(t,d),D(d,p),D(d,v),D(d,y),D(d,E),D(d,S),D(d,x),D(d,w),D(d,T),D(d,B),D(d,P),D(d,N),D(d,F),D(d,G),D(d,H),D(d,q),D(d,Q),D(d,K),D(t,W),J||(se=nt(t,"click",ge),J=!0)},p(fe,me){e=fe,me[0]&128&&r!==(r=e[32].title+"")&&Ht(a,r),me[0]&128&&u!==(u=e[32].description+"")&&Ht(m,u),me[0]&128&&A!==(A=(e[32].input==="audio"?_C:"")+"")&&Ht(p,A),me[0]&128&&g!==(g=(e[32].input==="MIDI"?MC:"")+"")&&Ht(y,g),me[0]&128&&_!==(_=e[32].instruments.includes("guitar/bass")?"🎸":"")&&Ht(S,_),me[0]&128&&C!==(C=e[32].instruments.includes("drum")?"🥁":"")&&Ht(w,C),me[0]&128&&O!==(O=e[32].instruments.includes("keyboard")?"🎹":"")&&Ht(B,O),me[0]&128&&L!==(L=e[32].instruments.includes("wind")?"🪈":"")&&Ht(N,L),me[0]&128&&z!==(z=e[32].instruments.includes("singing")?"🎤":"")&&Ht(G,z),me[0]&128&&j!==(j=e[32].instruments.includes("strings")?"🎻":"")&&Ht(q,j),me[0]&128&&k!==(k=e[32].instruments.includes("pc-key")?"⌨️":"")&&Ht(K,k)},d(fe){fe&&Bt(t),J=!1,se()}}}function Kfe(e){let t,i,r,a,o,h,u,m,c,d,A,p,v,g,y,E,_,S,x;const C=[Xfe,$fe,jfe,Wfe,zfe,Hfe],w=[];function T(O,B){return O[1]!==Yfe?0:O[0]?O[0]==="tools"?2:O[0]==="settings"?3:O[0]==="overview"?4:5:1}return v=T(e),g=w[v]=C[v](e),{c(){t=ie("main"),i=ie("header"),r=ie("h1"),r.textContent="Data-Driven Music Education Apps",a=ue(),o=ie("button"),o.textContent="☰ apps",h=ue(),u=ie("button"),u.textContent="📋 overview",m=ue(),c=ie("button"),c.textContent="🛠️ tools",d=ue(),A=ie("button"),A.textContent="⚙️ settings",p=ue(),g.c(),y=ue(),E=ie("div"),E.textContent=`version ${fw}`,de(E,"class","version-number")},m(O,B){Rt(O,t,B),D(t,i),D(i,r),D(i,a),D(i,o),D(i,h),D(i,u),D(i,m),D(i,c),D(i,d),D(i,A),D(t,p),w[v].m(t,null),D(t,y),D(t,E),_=!0,S||(x=[nt(o,"click",e[13]),nt(u,"click",e[14]),nt(c,"click",e[15]),nt(A,"click",e[16])],S=!0)},p(O,B){let P=v;v=T(O),v===P?w[v].p(O,B):(Cg(),ht(w[P],1,1,()=>{w[P]=null}),Eg(),g=w[v],g?g.p(O,B):(g=w[v]=C[v](O),g.c()),ut(g,1),g.m(t,y))},i(O){_||(ut(g),_=!0)},o(O){ht(g),_=!1},d(O){O&&Bt(t),w[v].d(),S=!1,Vi(x)}}}let Yfe="rhyvis";function qfe(e,t,i){let r,a=null;const o=vG(window,"d");o&&o!==""&&(a=zc.filter(k=>k.id===o)[0]);let h=localStorage.getItem("pwd")??"";window.onpopstate=k=>{a!==null&&i(0,a=null)},window.onbeforeunload=function(){if(a&&!["tools","settings","overview"].includes(a))return!0},console.log("localStorage space",EX()),console.log("usage data",Db());const u=new Set(zc.flatMap(k=>k.input).sort()),m=new Set(zc.flatMap(k=>k.instruments).sort()),c=new Set(zc.flatMap(k=>k.data)),d=new Set(zc.flatMap(k=>k.skills).sort()),A=new Set(zc.flatMap(k=>k.patterns).sort());let p=new Set(m),v=new Set(u),g=new Set(d),y="",E=null;const _=new Set(IX.map(k=>k.id));console.log({extraSkills:[...Ph(d,_)],missingSkills:[...Ph(_,d)]});const S=()=>{i(0,a=null),nf(window,"d","")},x=()=>{i(0,a="overview"),nf(window,"d","overview")},C=()=>{i(0,a="tools"),i(6,E=null),nf(window,"d","tools")},w=()=>{i(0,a="settings"),nf(window,"d","settings")};function T(){h=this.value,i(1,h)}function O(){y=this.value,i(5,y)}function B(k){g=k,i(4,g)}const P=()=>{i(3,v=new Set(u))},L=k=>i(3,v=gC(v,k)),N=k=>i(3,v=new Set([k])),F=()=>{i(2,p=new Set(m))},z=k=>i(2,p=gC(p,k)),G=k=>i(2,p=new Set([k])),H=k=>{i(0,a=k),nf(window,"d",k.id)},j=()=>{const k=localStorage.getItem("usage"),K=new Blob([k],{type:"text/plain;charset=utf-8"});hT(K,"usage.json")},q=()=>{confirm("Please only do this after exporting usage data! Do you really want to delete now?")&&localStorage.removeItem("usage")};function Q(k){E=k,i(6,E)}return e.$$.update=()=>{if(e.$$.dirty[0]&2&&localStorage.setItem("pwd",h),e.$$.dirty[0]&1&&a&&!["tools","settings","overview"].includes(a)){let k;localStorage.getItem("usage")!==null?(k=localStorage.getItem("usage"),k=JSON.parse(k)):k={demoClicks:{}};const K=k.demoClicks,W=K[a.id]??[];W.push(new Date().toUTCString()),K[a.id]=W,localStorage.setItem("usage",JSON.stringify(k))}e.$$.dirty[0]&60&&i(7,r=zc.filter(k=>k.title.toLowerCase().includes(y)&&AC(p,k.instruments)&&AC(g,k.skills)&&v.has(k.input)))},[a,h,p,v,g,y,E,r,u,m,c,d,A,S,x,C,w,T,O,B,P,L,N,F,z,G,H,j,q,Q]}class Jfe extends Ai{constructor(t){super(),gi(this,t,qfe,Kfe,pi,{},null,[-1,-1])}}new Jfe({target:document.getElementById("app")});

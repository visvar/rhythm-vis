var Gg=Object.defineProperty;var Vg=(t,e,n)=>e in t?Gg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pn=(t,e,n)=>(Vg(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function $t(){}function jh(t){return t()}function ml(){return Object.create(null)}function qe(t){t.forEach(jh)}function Zh(t){return typeof t=="function"}function Jt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Xg(t){return Object.keys(t).length===0}function x(t,e){t.appendChild(e)}function nt(t,e,n){t.insertBefore(e,n||null)}function et(t){t.parentNode&&t.parentNode.removeChild(t)}function zo(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function jg(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function at(t){return document.createTextNode(t)}function j(){return at(" ")}function Hr(){return at("")}function wt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function V(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ue(t){return t===""?null:+t}function Zg(t){return Array.from(t.childNodes)}function me(t,e){e=""+e,t.data!==e&&(t.data=e)}function rt(t,e){t.value=e??""}function re(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function ue(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function kr(t){const e=t.querySelector(":checked");return e&&e.__value}class Kg{constructor(e=!1){pn(this,"is_svg",!1);pn(this,"e");pn(this,"n");pn(this,"t");pn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,r=null){this.e||(this.is_svg?this.e=jg(n.nodeName):this.e=A(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)nt(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(et)}}let _i;function di(t){_i=t}function Kh(){if(!_i)throw new Error("Function called outside component initialization");return _i}function nu(t){Kh().$$.on_mount.push(t)}function er(t){Kh().$$.after_update.push(t)}const br=[],Be=[];let vr=[];const gl=[],Qg=Promise.resolve();let fs=!1;function Jg(){fs||(fs=!0,Qg.then(Qh))}function rn(t){vr.push(t)}const xf=new Set;let lr=0;function Qh(){if(lr!==0)return;const t=_i;do{try{for(;lr<br.length;){const e=br[lr];lr++,di(e),t2(e.$$)}}catch(e){throw br.length=0,lr=0,e}for(di(null),br.length=0,lr=0;Be.length;)Be.pop()();for(let e=0;e<vr.length;e+=1){const n=vr[e];xf.has(n)||(xf.add(n),n())}vr.length=0}while(br.length);for(;gl.length;)gl.pop()();fs=!1,xf.clear(),di(t)}function t2(t){if(t.fragment!==null){t.update(),qe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rn)}}function e2(t){const e=[],n=[];vr.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),vr=e}const Lo=new Set;let Pn;function He(){Pn={r:0,c:[],p:Pn}}function Ye(){Pn.r||qe(Pn.c),Pn=Pn.p}function tt(t,e){t&&t.i&&(Lo.delete(t),t.i(e))}function ot(t,e,n,r){if(t&&t.o){if(Lo.has(t))return;Lo.add(t),Pn.c.push(()=>{Lo.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function _n(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function _t(t){t&&t.c()}function bt(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),rn(()=>{const o=t.$$.on_mount.map(jh).filter(Zh);t.$$.on_destroy?t.$$.on_destroy.push(...o):qe(o),t.$$.on_mount=[]}),i.forEach(rn)}function yt(t,e){const n=t.$$;n.fragment!==null&&(e2(n.after_update),qe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function n2(t,e){t.$$.dirty[0]===-1&&(br.push(t),Jg(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function te(t,e,n,r,i,o,a=null,f=[-1]){const s=_i;di(t);const u=t.$$={fragment:null,ctx:[],props:o,update:$t,not_equal:i,bound:ml(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:ml(),dirty:f,skip_bound:!1,root:e.target||s.$$.root};a&&a(u.root);let l=!1;if(u.ctx=n?n(t,e.props||{},(h,c,...d)=>{const p=d.length?d[0]:c;return u.ctx&&i(u.ctx[h],u.ctx[h]=p)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](p),l&&n2(t,h)),c}):[],u.update(),l=!0,qe(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const h=Zg(e.target);u.fragment&&u.fragment.l(h),h.forEach(et)}else u.fragment&&u.fragment.c();e.intro&&tt(t.$$.fragment),bt(t,e.target,e.anchor),Qh()}di(s)}class ee{constructor(){pn(this,"$$");pn(this,"$$set")}$destroy(){yt(this,1),this.$destroy=$t}$on(e,n){if(!Zh(n))return $t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Xg(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const r2="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(r2);const i2="modulepreload",o2=function(t){return"/rhythm-vis/"+t},bl={},cr=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");i=Promise.all(n.map(a=>{if(a=o2(a),a in bl)return;bl[a]=!0;const f=a.endsWith(".css"),s=f?'[rel="stylesheet"]':"";if(!!r)for(let h=o.length-1;h>=0;h--){const c=o[h];if(c.href===a&&(!f||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const l=document.createElement("link");if(l.rel=f?"stylesheet":i2,f||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),f)return new Promise((h,c)=>{l.addEventListener("load",h),l.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function a2(t){if(t){if(t=new Uint8Array(t.buffer||t),s2(t))return"wav";if(f2(t))return"mp3";if(l2(t))return"flac";if(c2(t))return"m4a";if(h2(t))return"opus";if(u2(t))return"oga";if(d2(t))return"qoa"}}function f2(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function s2(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function u2(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function l2(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function c2(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function h2(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function d2(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let p2=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,r){r==null&&(r=0);for(var i=this._channelData[n],o=r,a=0;o<this.length&&a<e.length;o++,a++)e[a]=i[o]}copyToChannel(e,n,r){var i=this._channelData[n];r||(r=0);for(var o=r,a=0;o<this.length&&a<e.length;o++,a++)i[o]=e[a]}};const m2=globalThis.AudioBuffer||p2;async function g2(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=a2(t);if(!e)throw Error("Cannot detect audio format");if(!Vt[e])throw Error("Missing decoder for "+e+" format");return Vt[e](t)}const Vt={async oga(t){let{decoder:e}=Vt.oga;if(e)await e.reset();else{let{OggVorbisDecoder:n}=await cr(()=>import("./index-E2tYlhLB.js"),__vite__mapDeps([0,1,2]));await(Vt.oga.decoder=e=new n).ready}return t&&hr(await e.decodeFile(t))},async mp3(t){let{decoder:e}=Vt.mp3;if(e)await e.reset();else{const{MPEGDecoder:n}=await cr(()=>import("./index-6BD1T7WI.js"),__vite__mapDeps([3,1]));await(Vt.mp3.decoder=e=new n).ready}return t&&hr(await e.decode(t))},async flac(t){let{decoder:e}=Vt.flac;if(e)await e.reset();else{const{FLACDecoder:n}=await cr(()=>import("./index-5DJ2V46_.js"),__vite__mapDeps([4,1,2]));await(Vt.flac.decoder=e=new n).ready}return t&&hr(await e.decode(t))},async opus(t){let{decoder:e}=Vt.opus;if(e)await e.reset();else{const{OggOpusDecoder:n}=await cr(()=>import("./index-ln_RgVTN.js"),__vite__mapDeps([5,1,2]));await(Vt.opus.decoder=e=new n).ready}return t&&hr(await e.decodeFile(t))},async wav(t){let{decode:e}=Vt.wav;if(!e){let n=await cr(()=>import("./index-mL_4FWgW.js").then(r=>r.i),__vite__mapDeps([]));e=Vt.wav.decode=n.default.decode}return t&&hr(await e(t))},async qoa(t){let{decode:e}=Vt.qoa;return e||(Vt.qoa.decode=e=(await cr(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),t&&hr(await e(t))}};function hr({channelData:t,sampleRate:e}){let n=new m2({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let r=0;r<t.length;r++)n.getChannelData(r).set(t[r]);return n}var Kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var b2=y2;function y2(t,e){e=e||{};var n=t.numberOfChannels,r=t.sampleRate,i=e.float32?3:1,o=i===3?32:16,a;return n===2?a=w2(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),_2(a,i,r,n,o)}function _2(t,e,n,r,i){var o=i/8,a=r*o,f=new ArrayBuffer(44+t.length*o),s=new DataView(f);return co(s,0,"RIFF"),s.setUint32(4,36+t.length*o,!0),co(s,8,"WAVE"),co(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,e,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*a,!0),s.setUint16(32,a,!0),s.setUint16(34,i,!0),co(s,36,"data"),s.setUint32(40,t.length*o,!0),e===1?x2(s,44,t):v2(s,44,t),f}function w2(t,e){for(var n=t.length+e.length,r=new Float32Array(n),i=0,o=0;i<n;)r[i++]=t[o],r[i++]=e[o],o++;return r}function v2(t,e,n){for(var r=0;r<n.length;r++,e+=4)t.setFloat32(e,n[r],!0)}function x2(t,e,n){for(var r=0;r<n.length;r++,e+=2){var i=Math.max(-1,Math.min(1,n[r]));t.setInt16(e,i<0?i*32768:i*32767,!0)}}function co(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}const M2=Jh(b2);function wi(t=16,e=.5,n=0,r=0,i=!1,o=0){const a=[];for(let f=0;f<t;++f){let s;i?s=f>=n?r:0:s=f===n?r:0,a.push(f*e+o+s)}return a}async function td(t){const n=await(await fetch(t)).arrayBuffer();return await g2(n)}function ed(t,e,n=1){const r=e.at(-1)+n,i=t.getChannelData(0),o=new Float32Array(Math.ceil(r*t.sampleRate));for(const a of e){const f=Math.round(a*t.sampleRate);let s=1;for(let u=0;u<i.length;++u)s=Math.max(0,s-2/40100),o[f+u]=i[u]*s}return o}function $2(t,e,n){const r=new AudioBuffer({sampleRate:e,length:t.length});r.copyToChannel(t,0);const i=new Blob([M2(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function nd(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function Zt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Sa(t){let e,n,r;t.length!==2?(e=Zt,n=(f,s)=>Zt(t(f),s),r=(f,s)=>t(f)-s):(e=t===Zt||t===zi?t:S2,n=t,r=t);function i(f,s,u=0,l=f.length){if(u<l){if(e(s,s)!==0)return l;do{const h=u+l>>>1;n(f[h],s)<0?u=h+1:l=h}while(u<l)}return u}function o(f,s,u=0,l=f.length){if(u<l){if(e(s,s)!==0)return l;do{const h=u+l>>>1;n(f[h],s)<=0?u=h+1:l=h}while(u<l)}return u}function a(f,s,u=0,l=f.length){const h=i(f,s,u,l-1);return h>u&&r(f[h-1],s)>-r(f[h],s)?h-1:h}return{left:i,center:a,right:o}}function S2(){return 0}function rd(t){return t===null?NaN:+t}function*k2(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const T2=Sa(Zt),C2=T2.right;Sa(rd).center;const ka=C2;function ru(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function E2(t){return t.length|0}function A2(t){return!(t>0)}function N2(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function D2(t){return e=>t(...e)}function F2(...t){const e=typeof t[t.length-1]=="function"&&D2(t.pop());t=t.map(N2);const n=t.map(E2),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(A2))return o;for(;;){o.push(i.map((f,s)=>t[s][f]));let a=r;for(;++i[a]===n[a];){if(a===0)return e?o.map(e):o;i[a--]=0}}}function L2(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function iu(t,e){let n=0,r,i=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let f of t)(f=e(f,++a,t))!=null&&(f=+f)>=f&&(r=f-i,i+=r/++n,o+=r*(f-i))}if(n>1)return o/(n-1)}function Ta(t,e){const n=iu(t,e);return n&&Math.sqrt(n)}function le(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Wn{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=e+o,f=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);f&&(n[r++]=f),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,i=e[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Gn extends Map{constructor(e,n=ad){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ss(this,e))}has(e){return super.has(ss(this,e))}set(e,n){return super.set(id(this,e),n)}delete(e){return super.delete(od(this,e))}}class Ca extends Set{constructor(e,n=ad){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(ss(this,e))}add(e){return super.add(id(this,e))}delete(e){return super.delete(od(this,e))}}function ss({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function id({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function od({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ad(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qo(t){return t}function Ea(t,...e){return Aa(t,qo,qo,e)}function R2(t,...e){return Aa(t,Array.from,qo,e)}function xr(t,e,...n){return Aa(t,qo,e,n)}function I2(t,e,...n){return Aa(t,Array.from,e,n)}function Aa(t,e,n,r){return function i(o,a){if(a>=r.length)return n(o);const f=new Gn,s=r[a++];let u=-1;for(const l of o){const h=s(l,++u,o),c=f.get(h);c?c.push(l):f.set(h,[l])}for(const[l,h]of f)f.set(l,i(h,a));return e(f)}(t,0)}function P2(t,e){return Array.from(e,n=>t[n])}function vi(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,o)=>o);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,o)=>{for(const a of e){const f=Ho(a[i],a[o]);if(f)return f}})):(n=t.map(n),r.sort((i,o)=>Ho(n[i],n[o]))),P2(t,r)}return t.sort(fd(n))}function fd(t=Zt){if(t===Zt)return Ho;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Ho(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function ou(t,e,n){return(e.length!==2?vi(xr(t,e,n),([r,i],[o,a])=>Zt(i,a)||Zt(r,o)):vi(Ea(t,n),([r,i],[o,a])=>e(i,a)||Zt(r,o))).map(([r])=>r)}const O2=Math.sqrt(50),U2=Math.sqrt(10),B2=Math.sqrt(2);function Yo(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=O2?10:o>=U2?5:o>=B2?2:1;let f,s,u;return i<0?(u=Math.pow(10,-i)/a,f=Math.round(t*u),s=Math.round(e*u),f/u<t&&++f,s/u>e&&--s,u=-u):(u=Math.pow(10,i)*a,f=Math.round(t/u),s=Math.round(e/u),f*u<t&&++f,s*u>e&&--s),s<f&&.5<=n&&n<2?Yo(t,e,n*2):[f,s,u]}function xi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?Yo(e,t,n):Yo(t,e,n);if(!(o>=i))return[];const f=o-i+1,s=new Array(f);if(r)if(a<0)for(let u=0;u<f;++u)s[u]=(o-u)/-a;else for(let u=0;u<f;++u)s[u]=(o-u)*a;else if(a<0)for(let u=0;u<f;++u)s[u]=(i+u)/-a;else for(let u=0;u<f;++u)s[u]=(i+u)*a;return s}function Wo(t,e,n){return e=+e,t=+t,n=+n,Yo(t,e,n)[2]}function us(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Wo(e,t,n):Wo(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function z2(t){return Math.max(1,Math.ceil(Math.log(ru(t))/Math.LN2)+1)}function ge(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function q2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function on(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function H2(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function sd(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?Ho:fd(i);r>n;){if(r-n>600){const s=r-n+1,u=e-n+1,l=Math.log(s),h=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*h*(s-h)/s)*(u-s/2<0?-1:1),d=Math.max(n,Math.floor(e-u*h/s+c)),p=Math.min(r,Math.floor(e+(s-u)*h/s+c));sd(t,e,d,p,i)}const o=t[e];let a=n,f=r;for(Qr(t,n,e),i(t[r],o)>0&&Qr(t,n,r);a<f;){for(Qr(t,a,f),++a,--f;i(t[a],o)<0;)++a;for(;i(t[f],o)>0;)--f}i(t[n],o)===0?Qr(t,n,f):(++f,Qr(t,f,r)),f<=e&&(n=f+1),e<=f&&(r=f-1)}return t}function Qr(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ud(t,e=Zt){let n,r=!1;if(e.length===1){let i;for(const o of t){const a=e(o);(r?Zt(a,i)>0:Zt(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function Tr(t,e,n){if(t=Float64Array.from(k2(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return on(t);if(e>=1)return ge(t);var r,i=(r-1)*e,o=Math.floor(i),a=ge(sd(t,o).subarray(0,o+1)),f=on(t.subarray(o+1));return a+(f-a)*(i-o)}}function Y2(t,e,n=rd){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),f=+n(t[o+1],o+1,t);return a+(f-a)*(i-o)}}function W2(t,e,n){const r=ru(t),i=Tr(t,.75)-Tr(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function ld(t,e,n){const r=ru(t),i=Ta(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function Na(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function ls(t,e){return Tr(t,.5,e)}function*G2(t){for(const e of t)yield*e}function cd(t){return Array.from(G2(t))}function V2(t,e){const n=new Gn;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function X2(t,e=j2){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function j2(t,e){return[t,e]}function cs(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function xn(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Go(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Z2(t){return t}var Mf=1,$f=2,hs=3,ho=4,yl=1e-6;function K2(t){return"translate("+t+",0)"}function Q2(t){return"translate(0,"+t+")"}function J2(t){return e=>+t(e)}function tb(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function eb(){return!this.__axis}function nb(t,e){var n=[],r=null,i=null,o=6,a=6,f=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Mf||t===ho?-1:1,l=t===ho||t===$f?"x":"y",h=t===Mf||t===hs?K2:Q2;function c(d){var p=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):Z2),g=Math.max(o,0)+f,b=e.range(),y=+b[0]+s,$=+b[b.length-1]+s,_=(e.bandwidth?tb:J2)(e.copy(),s),M=d.selection?d.selection():d,w=M.selectAll(".domain").data([null]),v=M.selectAll(".tick").data(p,e).order(),S=v.exit(),C=v.enter().append("g").attr("class","tick"),N=v.select("line"),T=v.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),v=v.merge(C),N=N.merge(C.append("line").attr("stroke","currentColor").attr(l+"2",u*o)),T=T.merge(C.append("text").attr("fill","currentColor").attr(l,u*g).attr("dy",t===Mf?"0em":t===hs?"0.71em":"0.32em")),d!==M&&(w=w.transition(d),v=v.transition(d),N=N.transition(d),T=T.transition(d),S=S.transition(d).attr("opacity",yl).attr("transform",function(R){return isFinite(R=_(R))?h(R+s):this.getAttribute("transform")}),C.attr("opacity",yl).attr("transform",function(R){var P=this.parentNode.__axis;return h((P&&isFinite(P=P(R))?P:_(R))+s)})),S.remove(),w.attr("d",t===ho||t===$f?a?"M"+u*a+","+y+"H"+s+"V"+$+"H"+u*a:"M"+s+","+y+"V"+$:a?"M"+y+","+u*a+"V"+s+"H"+$+"V"+u*a:"M"+y+","+s+"H"+$),v.attr("opacity",1).attr("transform",function(R){return h(_(R)+s)}),N.attr(l+"2",u*o),T.attr(l,u*g).text(m),M.filter(eb).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===$f?"start":t===ho?"end":"middle"),M.each(function(){this.__axis=_})}return c.scale=function(d){return arguments.length?(e=d,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),c):n.slice()},c.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),c):r&&r.slice()},c.tickFormat=function(d){return arguments.length?(i=d,c):i},c.tickSize=function(d){return arguments.length?(o=a=+d,c):o},c.tickSizeInner=function(d){return arguments.length?(o=+d,c):o},c.tickSizeOuter=function(d){return arguments.length?(a=+d,c):a},c.tickPadding=function(d){return arguments.length?(f=+d,c):f},c.offset=function(d){return arguments.length?(s=+d,c):s},c}function rb(t){return nb(hs,t)}var ib={value:()=>{}};function hd(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ro(n)}function Ro(t){this._=t}function ob(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ro.prototype=hd.prototype={constructor:Ro,on:function(t,e){var n=this._,r=ob(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=ab(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=_l(n[i],t.name,e);else if(e==null)for(i in n)n[i]=_l(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ro(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function ab(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function _l(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ib,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ds="http://www.w3.org/1999/xhtml";const Cr={svg:"http://www.w3.org/2000/svg",xhtml:ds,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Da(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Cr.hasOwnProperty(e)?{space:Cr[e],local:t}:t}function fb(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ds&&e.documentElement.namespaceURI===ds?e.createElement(t):e.createElementNS(n,t)}}function sb(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Fa(t){var e=Da(t);return(e.local?sb:fb)(e)}function ub(){}function au(t){return t==null?ub:function(){return this.querySelector(t)}}function lb(t){typeof t!="function"&&(t=au(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,f=r[i]=new Array(a),s,u,l=0;l<a;++l)(s=o[l])&&(u=t.call(s,s.__data__,l,o))&&("__data__"in s&&(u.__data__=s.__data__),f[l]=u);return new ie(r,this._parents)}function cb(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function hb(){return[]}function dd(t){return t==null?hb:function(){return this.querySelectorAll(t)}}function db(t){return function(){return cb(t.apply(this,arguments))}}function pb(t){typeof t=="function"?t=db(t):t=dd(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],f=a.length,s,u=0;u<f;++u)(s=a[u])&&(r.push(t.call(s,s.__data__,u,a)),i.push(s));return new ie(r,i)}function pd(t){return function(){return this.matches(t)}}function md(t){return function(e){return e.matches(t)}}var mb=Array.prototype.find;function gb(t){return function(){return mb.call(this.children,t)}}function bb(){return this.firstElementChild}function yb(t){return this.select(t==null?bb:gb(typeof t=="function"?t:md(t)))}var _b=Array.prototype.filter;function wb(){return Array.from(this.children)}function vb(t){return function(){return _b.call(this.children,t)}}function xb(t){return this.selectAll(t==null?wb:vb(typeof t=="function"?t:md(t)))}function Mb(t){typeof t!="function"&&(t=pd(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,f=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&f.push(s);return new ie(r,this._parents)}function gd(t){return new Array(t.length)}function $b(){return new ie(this._enter||this._groups.map(gd),this._parents)}function Vo(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Vo.prototype={constructor:Vo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Sb(t){return function(){return t}}function kb(t,e,n,r,i,o){for(var a=0,f,s=e.length,u=o.length;a<u;++a)(f=e[a])?(f.__data__=o[a],r[a]=f):n[a]=new Vo(t,o[a]);for(;a<s;++a)(f=e[a])&&(i[a]=f)}function Tb(t,e,n,r,i,o,a){var f,s,u=new Map,l=e.length,h=o.length,c=new Array(l),d;for(f=0;f<l;++f)(s=e[f])&&(c[f]=d=a.call(s,s.__data__,f,e)+"",u.has(d)?i[f]=s:u.set(d,s));for(f=0;f<h;++f)d=a.call(t,o[f],f,o)+"",(s=u.get(d))?(r[f]=s,s.__data__=o[f],u.delete(d)):n[f]=new Vo(t,o[f]);for(f=0;f<l;++f)(s=e[f])&&u.get(c[f])===s&&(i[f]=s)}function Cb(t){return t.__data__}function Eb(t,e){if(!arguments.length)return Array.from(this,Cb);var n=e?Tb:kb,r=this._parents,i=this._groups;typeof t!="function"&&(t=Sb(t));for(var o=i.length,a=new Array(o),f=new Array(o),s=new Array(o),u=0;u<o;++u){var l=r[u],h=i[u],c=h.length,d=Ab(t.call(l,l&&l.__data__,u,r)),p=d.length,m=f[u]=new Array(p),g=a[u]=new Array(p),b=s[u]=new Array(c);n(l,h,m,g,b,d,e);for(var y=0,$=0,_,M;y<p;++y)if(_=m[y]){for(y>=$&&($=y+1);!(M=g[$])&&++$<p;);_._next=M||null}}return a=new ie(a,r),a._enter=f,a._exit=s,a}function Ab(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Nb(){return new ie(this._exit||this._groups.map(gd),this._parents)}function Db(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Fb(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),f=new Array(i),s=0;s<a;++s)for(var u=n[s],l=r[s],h=u.length,c=f[s]=new Array(h),d,p=0;p<h;++p)(d=u[p]||l[p])&&(c[p]=d);for(;s<i;++s)f[s]=n[s];return new ie(f,this._parents)}function Lb(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Rb(t){t||(t=Ib);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],f=a.length,s=i[o]=new Array(f),u,l=0;l<f;++l)(u=a[l])&&(s[l]=u);s.sort(e)}return new ie(i,this._parents).order()}function Ib(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Pb(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ob(){return Array.from(this)}function Ub(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Bb(){let t=0;for(const e of this)++t;return t}function zb(){return!this.node()}function qb(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,f;o<a;++o)(f=i[o])&&t.call(f,f.__data__,o,i);return this}function Hb(t){return function(){this.removeAttribute(t)}}function Yb(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wb(t,e){return function(){this.setAttribute(t,e)}}function Gb(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Vb(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Xb(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function jb(t,e){var n=Da(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Yb:Hb:typeof e=="function"?n.local?Xb:Vb:n.local?Gb:Wb)(n,e))}function bd(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Zb(t){return function(){this.style.removeProperty(t)}}function Kb(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Qb(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Jb(t,e,n){return arguments.length>1?this.each((e==null?Zb:typeof e=="function"?Qb:Kb)(t,e,n??"")):Er(this.node(),t)}function Er(t,e){return t.style.getPropertyValue(e)||bd(t).getComputedStyle(t,null).getPropertyValue(e)}function ty(t){return function(){delete this[t]}}function ey(t,e){return function(){this[t]=e}}function ny(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ry(t,e){return arguments.length>1?this.each((e==null?ty:typeof e=="function"?ny:ey)(t,e)):this.node()[t]}function yd(t){return t.trim().split(/^|\s+/)}function fu(t){return t.classList||new _d(t)}function _d(t){this._node=t,this._names=yd(t.getAttribute("class")||"")}_d.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function wd(t,e){for(var n=fu(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function vd(t,e){for(var n=fu(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function iy(t){return function(){wd(this,t)}}function oy(t){return function(){vd(this,t)}}function ay(t,e){return function(){(e.apply(this,arguments)?wd:vd)(this,t)}}function fy(t,e){var n=yd(t+"");if(arguments.length<2){for(var r=fu(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ay:e?iy:oy)(n,e))}function sy(){this.textContent=""}function uy(t){return function(){this.textContent=t}}function ly(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function cy(t){return arguments.length?this.each(t==null?sy:(typeof t=="function"?ly:uy)(t)):this.node().textContent}function hy(){this.innerHTML=""}function dy(t){return function(){this.innerHTML=t}}function py(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function my(t){return arguments.length?this.each(t==null?hy:(typeof t=="function"?py:dy)(t)):this.node().innerHTML}function gy(){this.nextSibling&&this.parentNode.appendChild(this)}function by(){return this.each(gy)}function yy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _y(){return this.each(yy)}function wy(t){var e=typeof t=="function"?t:Fa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function vy(){return null}function xy(t,e){var n=typeof t=="function"?t:Fa(t),r=e==null?vy:typeof e=="function"?e:au(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function My(){var t=this.parentNode;t&&t.removeChild(this)}function $y(){return this.each(My)}function Sy(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ky(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ty(t){return this.select(t?ky:Sy)}function Cy(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ey(t){return function(e){t.call(this,e,this.__data__)}}function Ay(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ny(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Dy(t,e,n){return function(){var r=this.__on,i,o=Ey(e);if(r){for(var a=0,f=r.length;a<f;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Fy(t,e,n){var r=Ay(t+""),i,o=r.length,a;if(arguments.length<2){var f=this.node().__on;if(f){for(var s=0,u=f.length,l;s<u;++s)for(i=0,l=f[s];i<o;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(f=e?Dy:Ny,i=0;i<o;++i)this.each(f(r[i],e,n));return this}function xd(t,e,n){var r=bd(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ly(t,e){return function(){return xd(this,t,e)}}function Ry(t,e){return function(){return xd(this,t,e.apply(this,arguments))}}function Iy(t,e){return this.each((typeof e=="function"?Ry:Ly)(t,e))}function*Py(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Md=[null];function ie(t,e){this._groups=t,this._parents=e}function qi(){return new ie([[document.documentElement]],Md)}function Oy(){return this}ie.prototype=qi.prototype={constructor:ie,select:lb,selectAll:pb,selectChild:yb,selectChildren:xb,filter:Mb,data:Eb,enter:$b,exit:Nb,join:Db,merge:Fb,selection:Oy,order:Lb,sort:Rb,call:Pb,nodes:Ob,node:Ub,size:Bb,empty:zb,each:qb,attr:jb,style:Jb,property:ry,classed:fy,text:cy,html:my,raise:by,lower:_y,append:wy,insert:xy,remove:$y,clone:Ty,datum:Cy,on:Fy,dispatch:Iy,[Symbol.iterator]:Py};function pi(t){return typeof t=="string"?new ie([[document.querySelector(t)]],[document.documentElement]):new ie([[t]],Md)}function Uy(t){let e;for(;e=t.sourceEvent;)t=e;return t}function By(t,e){if(t=Uy(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function Yr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function kn(){}var Vn=.7,Ar=1/Vn,Mr="\\s*([+-]?\\d+)\\s*",Mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zy=/^#([0-9a-f]{3,8})$/,qy=new RegExp(`^rgb\\(${Mr},${Mr},${Mr}\\)$`),Hy=new RegExp(`^rgb\\(${Pe},${Pe},${Pe}\\)$`),Yy=new RegExp(`^rgba\\(${Mr},${Mr},${Mr},${Mi}\\)$`),Wy=new RegExp(`^rgba\\(${Pe},${Pe},${Pe},${Mi}\\)$`),Gy=new RegExp(`^hsl\\(${Mi},${Pe},${Pe}\\)$`),Vy=new RegExp(`^hsla\\(${Mi},${Pe},${Pe},${Mi}\\)$`),wl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yr(kn,Xn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:vl,formatHex:vl,formatHex8:Xy,formatHsl:jy,formatRgb:xl,toString:xl});function vl(){return this.rgb().formatHex()}function Xy(){return this.rgb().formatHex8()}function jy(){return $d(this).formatHsl()}function xl(){return this.rgb().formatRgb()}function Xn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=zy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ml(e):n===3?new Lt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?po(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?po(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qy.exec(t))?new Lt(e[1],e[2],e[3],1):(e=Hy.exec(t))?new Lt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Yy.exec(t))?po(e[1],e[2],e[3],e[4]):(e=Wy.exec(t))?po(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Gy.exec(t))?kl(e[1],e[2]/100,e[3]/100,1):(e=Vy.exec(t))?kl(e[1],e[2]/100,e[3]/100,e[4]):wl.hasOwnProperty(t)?Ml(wl[t]):t==="transparent"?new Lt(NaN,NaN,NaN,0):null}function Ml(t){return new Lt(t>>16&255,t>>8&255,t&255,1)}function po(t,e,n,r){return r<=0&&(t=e=n=NaN),new Lt(t,e,n,r)}function su(t){return t instanceof kn||(t=Xn(t)),t?(t=t.rgb(),new Lt(t.r,t.g,t.b,t.opacity)):new Lt}function Mn(t,e,n,r){return arguments.length===1?su(t):new Lt(t,e,n,r??1)}function Lt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Yr(Lt,Mn,Hi(kn,{brighter(t){return t=t==null?Ar:Math.pow(Ar,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vn:Math.pow(Vn,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Lt(qn(this.r),qn(this.g),qn(this.b),Xo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$l,formatHex:$l,formatHex8:Zy,formatRgb:Sl,toString:Sl}));function $l(){return`#${On(this.r)}${On(this.g)}${On(this.b)}`}function Zy(){return`#${On(this.r)}${On(this.g)}${On(this.b)}${On((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sl(){const t=Xo(this.opacity);return`${t===1?"rgb(":"rgba("}${qn(this.r)}, ${qn(this.g)}, ${qn(this.b)}${t===1?")":`, ${t})`}`}function Xo(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function qn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function On(t){return t=qn(t),(t<16?"0":"")+t.toString(16)}function kl(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new we(t,e,n,r)}function $d(t){if(t instanceof we)return new we(t.h,t.s,t.l,t.opacity);if(t instanceof kn||(t=Xn(t)),!t)return new we;if(t instanceof we)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,f=o-i,s=(o+i)/2;return f?(e===o?a=(n-r)/f+(n<r)*6:n===o?a=(r-e)/f+2:a=(e-n)/f+4,f/=s<.5?o+i:2-o-i,a*=60):f=s>0&&s<1?0:a,new we(a,f,s,t.opacity)}function ps(t,e,n,r){return arguments.length===1?$d(t):new we(t,e,n,r??1)}function we(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Yr(we,ps,Hi(kn,{brighter(t){return t=t==null?Ar:Math.pow(Ar,t),new we(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vn:Math.pow(Vn,t),new we(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Lt(Sf(t>=240?t-240:t+120,i,r),Sf(t,i,r),Sf(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new we(Tl(this.h),mo(this.s),mo(this.l),Xo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Xo(this.opacity);return`${t===1?"hsl(":"hsla("}${Tl(this.h)}, ${mo(this.s)*100}%, ${mo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Tl(t){return t=(t||0)%360,t<0?t+360:t}function mo(t){return Math.max(0,Math.min(1,t||0))}function Sf(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Sd=Math.PI/180,kd=180/Math.PI,jo=18,Td=.96422,Cd=1,Ed=.82521,Ad=4/29,$r=6/29,Nd=3*$r*$r,Ky=$r*$r*$r;function Dd(t){if(t instanceof Oe)return new Oe(t.l,t.a,t.b,t.opacity);if(t instanceof tn)return Fd(t);t instanceof Lt||(t=su(t));var e=Ef(t.r),n=Ef(t.g),r=Ef(t.b),i=kf((.2225045*e+.7168786*n+.0606169*r)/Cd),o,a;return e===n&&n===r?o=a=i:(o=kf((.4360747*e+.3850649*n+.1430804*r)/Td),a=kf((.0139322*e+.0971045*n+.7141733*r)/Ed)),new Oe(116*i-16,500*(o-i),200*(i-a),t.opacity)}function ms(t,e,n,r){return arguments.length===1?Dd(t):new Oe(t,e,n,r??1)}function Oe(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}Yr(Oe,ms,Hi(kn,{brighter(t){return new Oe(this.l+jo*(t??1),this.a,this.b,this.opacity)},darker(t){return new Oe(this.l-jo*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Td*Tf(e),t=Cd*Tf(t),n=Ed*Tf(n),new Lt(Cf(3.1338561*e-1.6168667*t-.4906146*n),Cf(-.9787684*e+1.9161415*t+.033454*n),Cf(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function kf(t){return t>Ky?Math.pow(t,1/3):t/Nd+Ad}function Tf(t){return t>$r?t*t*t:Nd*(t-Ad)}function Cf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ef(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Qy(t){if(t instanceof tn)return new tn(t.h,t.c,t.l,t.opacity);if(t instanceof Oe||(t=Dd(t)),t.a===0&&t.b===0)return new tn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*kd;return new tn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function gs(t,e,n,r){return arguments.length===1?Qy(t):new tn(t,e,n,r??1)}function tn(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Fd(t){if(isNaN(t.h))return new Oe(t.l,0,0,t.opacity);var e=t.h*Sd;return new Oe(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Yr(tn,gs,Hi(kn,{brighter(t){return new tn(this.h,this.c,this.l+jo*(t??1),this.opacity)},darker(t){return new tn(this.h,this.c,this.l-jo*(t??1),this.opacity)},rgb(){return Fd(this).rgb()}}));var Ld=-.14861,uu=1.78277,lu=-.29227,La=-.90649,$i=1.97294,Cl=$i*La,El=$i*uu,Al=uu*lu-La*Ld;function Jy(t){if(t instanceof Hn)return new Hn(t.h,t.s,t.l,t.opacity);t instanceof Lt||(t=su(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Al*r+Cl*e-El*n)/(Al+Cl-El),o=r-i,a=($i*(n-i)-lu*o)/La,f=Math.sqrt(a*a+o*o)/($i*i*(1-i)),s=f?Math.atan2(a,o)*kd-120:NaN;return new Hn(s<0?s+360:s,f,i,t.opacity)}function ze(t,e,n,r){return arguments.length===1?Jy(t):new Hn(t,e,n,r??1)}function Hn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Yr(Hn,ze,Hi(kn,{brighter(t){return t=t==null?Ar:Math.pow(Ar,t),new Hn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vn:Math.pow(Vn,t),new Hn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Sd,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Lt(255*(e+n*(Ld*r+uu*i)),255*(e+n*(lu*r+La*i)),255*(e+n*($i*r)),this.opacity)}}));function t_(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function e_(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,f=r<e-1?t[r+2]:2*o-i;return t_((n-r/e)*e,a,i,o,f)}}const Ra=t=>()=>t;function Rd(t,e){return function(n){return t+n*e}}function n_(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function cu(t,e){var n=e-t;return n?Rd(t,n>180||n<-180?n-360*Math.round(n/360):n):Ra(isNaN(t)?e:t)}function r_(t){return(t=+t)==1?Bt:function(e,n){return n-e?n_(e,n,t):Ra(isNaN(e)?n:e)}}function Bt(t,e){var n=e-t;return n?Rd(t,n):Ra(isNaN(t)?e:t)}const jn=function t(e){var n=r_(e);function r(i,o){var a=n((i=Mn(i)).r,(o=Mn(o)).r),f=n(i.g,o.g),s=n(i.b,o.b),u=Bt(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=f(l),i.b=s(l),i.opacity=u(l),i+""}}return r.gamma=t,r}(1);function i_(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a,f;for(a=0;a<n;++a)f=Mn(e[a]),r[a]=f.r||0,i[a]=f.g||0,o[a]=f.b||0;return r=t(r),i=t(i),o=t(o),f.opacity=1,function(s){return f.r=r(s),f.g=i(s),f.b=o(s),f+""}}}var o_=i_(e_);function a_(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function f_(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function s_(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Yi(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(f){for(a=0;a<r;++a)o[a]=i[a](f);return o}}function u_(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ut(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function l_(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Yi(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var bs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Af=new RegExp(bs.source,"g");function c_(t){return function(){return t}}function h_(t){return function(e){return t(e)+""}}function Id(t,e){var n=bs.lastIndex=Af.lastIndex=0,r,i,o,a=-1,f=[],s=[];for(t=t+"",e=e+"";(r=bs.exec(t))&&(i=Af.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),f[a]?f[a]+=o:f[++a]=o),(r=r[0])===(i=i[0])?f[a]?f[a]+=i:f[++a]=i:(f[++a]=null,s.push({i:a,x:Ut(r,i)})),n=Af.lastIndex;return n<e.length&&(o=e.slice(n),f[a]?f[a]+=o:f[++a]=o),f.length<2?s[0]?h_(s[0].x):c_(e):(e=s.length,function(u){for(var l=0,h;l<e;++l)f[(h=s[l]).i]=h.x(u);return f.join("")})}function Yi(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ra(e):(n==="number"?Ut:n==="string"?(r=Xn(e))?(e=r,jn):Id:e instanceof Xn?jn:e instanceof Date?u_:f_(e)?a_:Array.isArray(e)?s_:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?l_:Ut)(t,e)}function hu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Nl=180/Math.PI,ys={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pd(t,e,n,r,i,o){var a,f,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(f=Math.sqrt(n*n+r*r))&&(n/=f,r/=f,s/=f),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Nl,skewX:Math.atan(s)*Nl,scaleX:a,scaleY:f}}var go;function d_(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ys:Pd(e.a,e.b,e.c,e.d,e.e,e.f)}function p_(t){return t==null||(go||(go=document.createElementNS("http://www.w3.org/2000/svg","g")),go.setAttribute("transform",t),!(t=go.transform.baseVal.consolidate()))?ys:(t=t.matrix,Pd(t.a,t.b,t.c,t.d,t.e,t.f))}function Od(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,l,h,c,d,p){if(u!==h||l!==c){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:Ut(u,h)},{i:m-2,x:Ut(l,c)})}else(h||c)&&d.push("translate("+h+e+c+n)}function a(u,l,h,c){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Ut(u,l)})):l&&h.push(i(h)+"rotate("+l+r)}function f(u,l,h,c){u!==l?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Ut(u,l)}):l&&h.push(i(h)+"skewX("+l+r)}function s(u,l,h,c,d,p){if(u!==h||l!==c){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Ut(u,h)},{i:m-2,x:Ut(l,c)})}else(h!==1||c!==1)&&d.push(i(d)+"scale("+h+","+c+")")}return function(u,l){var h=[],c=[];return u=t(u),l=t(l),o(u.translateX,u.translateY,l.translateX,l.translateY,h,c),a(u.rotate,l.rotate,h,c),f(u.skewX,l.skewX,h,c),s(u.scaleX,u.scaleY,l.scaleX,l.scaleY,h,c),u=l=null,function(d){for(var p=-1,m=c.length,g;++p<m;)h[(g=c[p]).i]=g.x(d);return h.join("")}}}var m_=Od(d_,"px, ","px)","deg)"),g_=Od(p_,", ",")",")");function b_(t){return function(e,n){var r=t((e=ps(e)).h,(n=ps(n)).h),i=Bt(e.s,n.s),o=Bt(e.l,n.l),a=Bt(e.opacity,n.opacity);return function(f){return e.h=r(f),e.s=i(f),e.l=o(f),e.opacity=a(f),e+""}}}const y_=b_(cu);function __(t,e){var n=Bt((t=ms(t)).l,(e=ms(e)).l),r=Bt(t.a,e.a),i=Bt(t.b,e.b),o=Bt(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=r(a),t.b=i(a),t.opacity=o(a),t+""}}function w_(t){return function(e,n){var r=t((e=gs(e)).h,(n=gs(n)).h),i=Bt(e.c,n.c),o=Bt(e.l,n.l),a=Bt(e.opacity,n.opacity);return function(f){return e.h=r(f),e.c=i(f),e.l=o(f),e.opacity=a(f),e+""}}}const v_=w_(cu);function Ud(t){return function e(n){n=+n;function r(i,o){var a=t((i=ze(i)).h,(o=ze(o)).h),f=Bt(i.s,o.s),s=Bt(i.l,o.l),u=Bt(i.opacity,o.opacity);return function(l){return i.h=a(l),i.s=f(l),i.l=s(Math.pow(l,n)),i.opacity=u(l),i+""}}return r.gamma=e,r}(1)}Ud(cu);var du=Ud(Bt);function Ia(t,e){e===void 0&&(e=t,t=Yi);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var f=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[f](a-f)}}function xe(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}var Nr=0,oi=0,Jr=0,Bd=1e3,Zo,ai,Ko=0,Zn=0,Pa=0,Si=typeof performance=="object"&&performance.now?performance:Date,zd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function pu(){return Zn||(zd(x_),Zn=Si.now()+Pa)}function x_(){Zn=0}function Qo(){this._call=this._time=this._next=null}Qo.prototype=qd.prototype={constructor:Qo,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?pu():+n)+(e==null?0:+e),!this._next&&ai!==this&&(ai?ai._next=this:Zo=this,ai=this),this._call=t,this._time=n,_s()},stop:function(){this._call&&(this._call=null,this._time=1/0,_s())}};function qd(t,e,n){var r=new Qo;return r.restart(t,e,n),r}function M_(){pu(),++Nr;for(var t=Zo,e;t;)(e=Zn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Nr}function Dl(){Zn=(Ko=Si.now())+Pa,Nr=oi=0;try{M_()}finally{Nr=0,S_(),Zn=0}}function $_(){var t=Si.now(),e=t-Ko;e>Bd&&(Pa-=e,Ko=t)}function S_(){for(var t,e=Zo,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Zo=n);ai=t,_s(r)}function _s(t){if(!Nr){oi&&(oi=clearTimeout(oi));var e=t-Zn;e>24?(t<1/0&&(oi=setTimeout(Dl,t-Si.now()-Pa)),Jr&&(Jr=clearInterval(Jr))):(Jr||(Ko=Si.now(),Jr=setInterval($_,Bd)),Nr=1,zd(Dl))}}function Fl(t,e,n){var r=new Qo;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var k_=hd("start","end","cancel","interrupt"),T_=[],Hd=0,Ll=1,ws=2,Io=3,Rl=4,vs=5,Po=6;function Oa(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;C_(t,n,{name:e,index:r,group:i,on:k_,tween:T_,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Hd})}function mu(t,e){var n=ke(t,e);if(n.state>Hd)throw new Error("too late; already scheduled");return n}function We(t,e){var n=ke(t,e);if(n.state>Io)throw new Error("too late; already running");return n}function ke(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function C_(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=qd(o,0,n.time);function o(u){n.state=Ll,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var l,h,c,d;if(n.state!==Ll)return s();for(l in r)if(d=r[l],d.name===n.name){if(d.state===Io)return Fl(a);d.state===Rl?(d.state=Po,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[l]):+l<e&&(d.state=Po,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[l])}if(Fl(function(){n.state===Io&&(n.state=Rl,n.timer.restart(f,n.delay,n.time),f(u))}),n.state=ws,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ws){for(n.state=Io,i=new Array(c=n.tween.length),l=0,h=-1;l<c;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function f(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=vs,1),h=-1,c=i.length;++h<c;)i[h].call(t,l);n.state===vs&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=Po,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function E_(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>ws&&r.state<vs,r.state=Po,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function A_(t){return this.each(function(){E_(this,t)})}function N_(t,e){var n,r;return function(){var i=We(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,f=r.length;a<f;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function D_(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=We(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var f={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=f;break}s===u&&i.push(f)}o.tween=i}}function F_(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ke(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?N_:D_)(n,t,e))}function gu(t,e,n){var r=t._id;return t.each(function(){var i=We(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return ke(i,r).value[e]}}function Yd(t,e){var n;return(typeof e=="number"?Ut:e instanceof Xn?jn:(n=Xn(e))?(e=n,jn):Id)(t,e)}function L_(t){return function(){this.removeAttribute(t)}}function R_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function I_(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function P_(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function O_(t,e,n){var r,i,o;return function(){var a,f=n(this),s;return f==null?void this.removeAttribute(t):(a=this.getAttribute(t),s=f+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,f)))}}function U_(t,e,n){var r,i,o;return function(){var a,f=n(this),s;return f==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),s=f+"",a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,f)))}}function B_(t,e){var n=Da(t),r=n==="transform"?g_:Yd;return this.attrTween(t,typeof e=="function"?(n.local?U_:O_)(n,r,gu(this,"attr."+t,e)):e==null?(n.local?R_:L_)(n):(n.local?P_:I_)(n,r,e))}function z_(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function q_(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function H_(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&q_(t,o)),n}return i._value=e,i}function Y_(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&z_(t,o)),n}return i._value=e,i}function W_(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Da(t);return this.tween(n,(r.local?H_:Y_)(r,e))}function G_(t,e){return function(){mu(this,t).delay=+e.apply(this,arguments)}}function V_(t,e){return e=+e,function(){mu(this,t).delay=e}}function X_(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?G_:V_)(e,t)):ke(this.node(),e).delay}function j_(t,e){return function(){We(this,t).duration=+e.apply(this,arguments)}}function Z_(t,e){return e=+e,function(){We(this,t).duration=e}}function K_(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?j_:Z_)(e,t)):ke(this.node(),e).duration}function Q_(t,e){if(typeof e!="function")throw new Error;return function(){We(this,t).ease=e}}function J_(t){var e=this._id;return arguments.length?this.each(Q_(e,t)):ke(this.node(),e).ease}function tw(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;We(this,t).ease=n}}function ew(t){if(typeof t!="function")throw new Error;return this.each(tw(this._id,t))}function nw(t){typeof t!="function"&&(t=pd(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,f=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&f.push(s);return new an(r,this._parents,this._name,this._id)}function rw(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),f=0;f<o;++f)for(var s=e[f],u=n[f],l=s.length,h=a[f]=new Array(l),c,d=0;d<l;++d)(c=s[d]||u[d])&&(h[d]=c);for(;f<r;++f)a[f]=e[f];return new an(a,this._parents,this._name,this._id)}function iw(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ow(t,e,n){var r,i,o=iw(e)?mu:We;return function(){var a=o(this,t),f=a.on;f!==r&&(i=(r=f).copy()).on(e,n),a.on=i}}function aw(t,e){var n=this._id;return arguments.length<2?ke(this.node(),n).on.on(t):this.each(ow(n,t,e))}function fw(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function sw(){return this.on("end.remove",fw(this._id))}function uw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=au(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var f=r[a],s=f.length,u=o[a]=new Array(s),l,h,c=0;c<s;++c)(l=f[c])&&(h=t.call(l,l.__data__,c,f))&&("__data__"in l&&(h.__data__=l.__data__),u[c]=h,Oa(u[c],e,n,c,u,ke(l,n)));return new an(o,this._parents,e,n)}function lw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=dd(t));for(var r=this._groups,i=r.length,o=[],a=[],f=0;f<i;++f)for(var s=r[f],u=s.length,l,h=0;h<u;++h)if(l=s[h]){for(var c=t.call(l,l.__data__,h,s),d,p=ke(l,n),m=0,g=c.length;m<g;++m)(d=c[m])&&Oa(d,e,n,m,c,p);o.push(c),a.push(l)}return new an(o,a,e,n)}var cw=qi.prototype.constructor;function hw(){return new cw(this._groups,this._parents)}function dw(t,e){var n,r,i;return function(){var o=Er(this,t),a=(this.style.removeProperty(t),Er(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Wd(t){return function(){this.style.removeProperty(t)}}function pw(t,e,n){var r,i=n+"",o;return function(){var a=Er(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function mw(t,e,n){var r,i,o;return function(){var a=Er(this,t),f=n(this),s=f+"";return f==null&&(s=f=(this.style.removeProperty(t),Er(this,t))),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,f))}}function gw(t,e){var n,r,i,o="style."+e,a="end."+o,f;return function(){var s=We(this,t),u=s.on,l=s.value[o]==null?f||(f=Wd(e)):void 0;(u!==n||i!==l)&&(r=(n=u).copy()).on(a,i=l),s.on=r}}function bw(t,e,n){var r=(t+="")=="transform"?m_:Yd;return e==null?this.styleTween(t,dw(t,r)).on("end.style."+t,Wd(t)):typeof e=="function"?this.styleTween(t,mw(t,r,gu(this,"style."+t,e))).each(gw(this._id,t)):this.styleTween(t,pw(t,r,e),n).on("end.style."+t,null)}function yw(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function _w(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&yw(t,a,n)),r}return o._value=e,o}function ww(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,_w(t,e,n??""))}function vw(t){return function(){this.textContent=t}}function xw(t){return function(){var e=t(this);this.textContent=e??""}}function Mw(t){return this.tween("text",typeof t=="function"?xw(gu(this,"text",t)):vw(t==null?"":t+""))}function $w(t){return function(e){this.textContent=t.call(this,e)}}function Sw(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&$w(i)),e}return r._value=t,r}function kw(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Sw(t))}function Tw(){for(var t=this._name,e=this._id,n=Gd(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,s,u=0;u<f;++u)if(s=a[u]){var l=ke(s,e);Oa(s,t,n,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new an(r,this._parents,t,n)}function Cw(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var f={value:a},s={value:function(){--i===0&&o()}};n.each(function(){var u=We(this,r),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(s)),u.on=e}),i===0&&o()})}var Ew=0;function an(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Gd(){return++Ew}var Ve=qi.prototype;an.prototype={constructor:an,select:uw,selectAll:lw,selectChild:Ve.selectChild,selectChildren:Ve.selectChildren,filter:nw,merge:rw,selection:hw,transition:Tw,call:Ve.call,nodes:Ve.nodes,node:Ve.node,size:Ve.size,empty:Ve.empty,each:Ve.each,on:aw,attr:B_,attrTween:W_,style:bw,styleTween:ww,text:Mw,textTween:kw,remove:sw,tween:F_,delay:X_,duration:K_,ease:J_,easeVarying:ew,end:Cw,[Symbol.iterator]:Ve[Symbol.iterator]};function Aw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Nw={time:null,delay:0,duration:250,ease:Aw};function Dw(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Fw(t){var e,n;t instanceof an?(e=t._id,t=t._name):(e=Gd(),(n=Nw).time=pu(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],f=a.length,s,u=0;u<f;++u)(s=a[u])&&Oa(s,t,e,u,a,n||Dw(s,e));return new an(r,this._parents,t,e)}qi.prototype.interrupt=A_;qi.prototype.transition=Fw;const xs=Math.PI,Ms=2*xs,Rn=1e-6,Lw=Ms-Rn;function Vd(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Rw(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Vd;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Xd{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Vd:Rw(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,f=this._y1,s=r-e,u=i-n,l=a-e,h=f-n,c=l*l+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(c>Rn)if(!(Math.abs(h*s-u*l)>Rn)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,p=i-f,m=s*s+u*u,g=d*d+p*p,b=Math.sqrt(m),y=Math.sqrt(c),$=o*Math.tan((xs-Math.acos((m+c-g)/(2*b*y)))/2),_=$/y,M=$/b;Math.abs(_-1)>Rn&&this._append`L${e+_*l},${n+_*h}`,this._append`A${o},${o},0,0,${+(h*d>l*p)},${this._x1=e+M*s},${this._y1=n+M*u}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let f=r*Math.cos(i),s=r*Math.sin(i),u=e+f,l=n+s,h=1^a,c=a?i-o:o-i;this._x1===null?this._append`M${u},${l}`:(Math.abs(this._x1-u)>Rn||Math.abs(this._y1-l)>Rn)&&this._append`L${u},${l}`,r&&(c<0&&(c=c%Ms+Ms),c>Lw?this._append`A${r},${r},0,1,${h},${e-f},${n-s}A${r},${r},0,1,${h},${this._x1=u},${this._y1=l}`:c>Rn&&this._append`A${r},${r},0,${+(c>=xs)},${h},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function wn(t=3){return new Xd(+t)}function Iw(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Jo(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Dr(t){return t=Jo(Math.abs(t)),t?t[1]:NaN}function Pw(t,e){return function(n,r){for(var i=n.length,o=[],a=0,f=t[0],s=0;i>0&&f>0&&(s+f+1>r&&(f=Math.max(1,r-s)),o.push(n.substring(i-=f,i+f)),!((s+=f+1)>r));)f=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Ow(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Uw=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ki(t){if(!(e=Uw.exec(t)))throw new Error("invalid format: "+t);var e;return new bu({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ki.prototype=bu.prototype;function bu(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}bu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bw(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var jd;function zw(t,e){var n=Jo(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(jd=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Jo(t,Math.max(0,e+o-1))[0]}function Il(t,e){var n=Jo(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Pl={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Iw,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Il(t*100,e),r:Il,s:zw,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ol(t){return t}var Ul=Array.prototype.map,Bl=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function qw(t){var e=t.grouping===void 0||t.thousands===void 0?Ol:Pw(Ul.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Ol:Ow(Ul.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function u(h){h=ki(h);var c=h.fill,d=h.align,p=h.sign,m=h.symbol,g=h.zero,b=h.width,y=h.comma,$=h.precision,_=h.trim,M=h.type;M==="n"?(y=!0,M="g"):Pl[M]||($===void 0&&($=12),_=!0,M="g"),(g||c==="0"&&d==="=")&&(g=!0,c="0",d="=");var w=m==="$"?n:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",v=m==="$"?r:/[%p]/.test(M)?a:"",S=Pl[M],C=/[defgprs%]/.test(M);$=$===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function N(T){var R=w,P=v,q,k,B;if(M==="c")P=S(T)+P,T="";else{T=+T;var O=T<0||1/T<0;if(T=isNaN(T)?s:S(Math.abs(T),$),_&&(T=Bw(T)),O&&+T==0&&p!=="+"&&(O=!1),R=(O?p==="("?p:f:p==="-"||p==="("?"":p)+R,P=(M==="s"?Bl[8+jd/3]:"")+P+(O&&p==="("?")":""),C){for(q=-1,k=T.length;++q<k;)if(B=T.charCodeAt(q),48>B||B>57){P=(B===46?i+T.slice(q+1):T.slice(q))+P,T=T.slice(0,q);break}}}y&&!g&&(T=e(T,1/0));var X=R.length+T.length+P.length,W=X<b?new Array(b-X+1).join(c):"";switch(y&&g&&(T=e(W+T,W.length?b-P.length:1/0),W=""),d){case"<":T=R+T+P+W;break;case"=":T=R+W+T+P;break;case"^":T=W.slice(0,X=W.length>>1)+R+T+P+W.slice(X);break;default:T=W+R+T+P;break}return o(T)}return N.toString=function(){return h+""},N}function l(h,c){var d=u((h=ki(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Dr(c)/3)))*3,m=Math.pow(10,-p),g=Bl[8+p/3];return function(b){return d(m*b)+g}}return{format:u,formatPrefix:l}}var bo,Wr,Zd;Hw({thousands:",",grouping:[3],currency:["$",""]});function Hw(t){return bo=qw(t),Wr=bo.format,Zd=bo.formatPrefix,bo}function Yw(t){return Math.max(0,-Dr(Math.abs(t)))}function Ww(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dr(e)/3)))*3-Dr(Math.abs(t)))}function Gw(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Dr(e)-Dr(t))+1}var dt=1e-6,Kd=1e-12,gt=Math.PI,Ct=gt/2,zl=gt/4,oe=gt*2,Ht=180/gt,Tt=gt/180,xt=Math.abs,Gr=Math.atan,fn=Math.atan2,mt=Math.cos,Qd=Math.exp,ta=Math.log,Nf=Math.pow,ct=Math.sin,ce=Math.sign||function(t){return t>0?1:t<0?-1:0},Kt=Math.sqrt,yu=Math.tan;function Jd(t){return t>1?0:t<-1?gt:Math.acos(t)}function be(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function he(){}function ea(t,e){t&&Hl.hasOwnProperty(t.type)&&Hl[t.type](t,e)}var ql={Feature:function(t,e){ea(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ea(n[r].geometry,e)}},Hl={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){$s(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)$s(n[r],e,0)},Polygon:function(t,e){Yl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Yl(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ea(n[r],e)}};function $s(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function Yl(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)$s(t[n],e,1);e.polygonEnd()}function In(t,e){t&&ql.hasOwnProperty(t.type)?ql[t.type](t,e):ea(t,e)}function Ss(t){return[fn(t[1],t[0]),be(t[2])]}function Fr(t){var e=t[0],n=t[1],r=mt(n);return[r*mt(e),r*ct(e),ct(n)]}function yo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function na(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Df(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function _o(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ks(t){var e=Kt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ts(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function Cs(t,e){return xt(t)>gt&&(t-=Math.round(t/oe)*oe),[t,e]}Cs.invert=Cs;function t0(t,e,n){return(t%=oe)?e||n?Ts(Gl(t),Vl(e,n)):Gl(t):e||n?Vl(e,n):Cs}function Wl(t){return function(e,n){return e+=t,xt(e)>gt&&(e-=Math.round(e/oe)*oe),[e,n]}}function Gl(t){var e=Wl(t);return e.invert=Wl(-t),e}function Vl(t,e){var n=mt(t),r=ct(t),i=mt(e),o=ct(e);function a(f,s){var u=mt(s),l=mt(f)*u,h=ct(f)*u,c=ct(s),d=c*n+l*r;return[fn(h*i-d*o,l*n-c*r),be(d*i+h*o)]}return a.invert=function(f,s){var u=mt(s),l=mt(f)*u,h=ct(f)*u,c=ct(s),d=c*i-h*o;return[fn(h*i+c*o,l*n+d*r),be(d*n-l*r)]},a}function Vw(t){t=t0(t[0]*Tt,t[1]*Tt,t.length>2?t[2]*Tt:0);function e(n){return n=t(n[0]*Tt,n[1]*Tt),n[0]*=Ht,n[1]*=Ht,n}return e.invert=function(n){return n=t.invert(n[0]*Tt,n[1]*Tt),n[0]*=Ht,n[1]*=Ht,n},e}function Xw(t,e,n,r,i,o){if(n){var a=mt(e),f=ct(e),s=r*n;i==null?(i=e+r*oe,o=e-s/2):(i=Xl(a,i),o=Xl(a,o),(r>0?i<o:i>o)&&(i+=r*oe));for(var u,l=i;r>0?l>o:l<o;l-=s)u=Ss([a,-f*mt(l),-f*ct(l)]),t.point(u[0],u[1])}}function Xl(t,e){e=Fr(e),e[0]-=t,ks(e);var n=Jd(-e[1]);return((-e[2]<0?-n:n)+oe-dt)%oe}function e0(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:he,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Oo(t,e){return xt(t[0]-e[0])<dt&&xt(t[1]-e[1])<dt}function wo(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function n0(t,e,n,r,i){var o=[],a=[],f,s;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],b=p[m],y;if(Oo(g,b)){if(!g[2]&&!b[2]){for(i.lineStart(),f=0;f<m;++f)i.point((g=p[f])[0],g[1]);i.lineEnd();return}b[0]+=2*dt}o.push(y=new wo(g,p,null,!0)),a.push(y.o=new wo(g,null,y,!1)),o.push(y=new wo(b,p,null,!1)),a.push(y.o=new wo(b,null,y,!0))}}),!!o.length){for(a.sort(e),jl(o),jl(a),f=0,s=a.length;f<s;++f)a[f].e=n=!n;for(var u=o[0],l,h;;){for(var c=u,d=!0;c.v;)if((c=c.n)===u)return;l=c.z,i.lineStart();do{if(c.v=c.o.v=!0,c.e){if(d)for(f=0,s=l.length;f<s;++f)i.point((h=l[f])[0],h[1]);else r(c.x,c.n.x,1,i);c=c.n}else{if(d)for(l=c.p.z,f=l.length-1;f>=0;--f)i.point((h=l[f])[0],h[1]);else r(c.x,c.p.x,-1,i);c=c.p}c=c.o,l=c.z,d=!d}while(!c.v);i.lineEnd()}}}function jl(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Ff(t){return xt(t[0])<=gt?t[0]:ce(t[0])*((xt(t[0])+gt)%oe-gt)}function jw(t,e){var n=Ff(e),r=e[1],i=ct(r),o=[ct(n),-mt(n),0],a=0,f=0,s=new Wn;i===1?r=Ct+dt:i===-1&&(r=-Ct-dt);for(var u=0,l=t.length;u<l;++u)if(c=(h=t[u]).length)for(var h,c,d=h[c-1],p=Ff(d),m=d[1]/2+zl,g=ct(m),b=mt(m),y=0;y<c;++y,p=_,g=w,b=v,d=$){var $=h[y],_=Ff($),M=$[1]/2+zl,w=ct(M),v=mt(M),S=_-p,C=S>=0?1:-1,N=C*S,T=N>gt,R=g*w;if(s.add(fn(R*C*ct(N),b*v+R*mt(N))),a+=T?S+C*oe:S,T^p>=n^_>=n){var P=na(Fr(d),Fr($));ks(P);var q=na(o,P);ks(q);var k=(T^S>=0?-1:1)*be(q[2]);(r>k||r===k&&(P[0]||P[1]))&&(f+=T^S>=0?1:-1)}}return(a<-dt||a<dt&&s<-Kd)^f&1}function r0(t,e,n,r){return function(i){var o=e(i),a=e0(),f=e(a),s=!1,u,l,h,c={point:d,lineStart:m,lineEnd:g,polygonStart:function(){c.point=b,c.lineStart=y,c.lineEnd=$,l=[],u=[]},polygonEnd:function(){c.point=d,c.lineStart=m,c.lineEnd=g,l=cd(l);var _=jw(u,r);l.length?(s||(i.polygonStart(),s=!0),n0(l,Kw,_,n,i)):_&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),l=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(_,M){t(_,M)&&i.point(_,M)}function p(_,M){o.point(_,M)}function m(){c.point=p,o.lineStart()}function g(){c.point=d,o.lineEnd()}function b(_,M){h.push([_,M]),f.point(_,M)}function y(){f.lineStart(),h=[]}function $(){b(h[0][0],h[0][1]),f.lineEnd();var _=f.clean(),M=a.result(),w,v=M.length,S,C,N;if(h.pop(),u.push(h),h=null,!!v){if(_&1){if(C=M[0],(S=C.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),w=0;w<S;++w)i.point((N=C[w])[0],N[1]);i.lineEnd()}return}v>1&&_&2&&M.push(M.pop().concat(M.shift())),l.push(M.filter(Zw))}}return c}}function Zw(t){return t.length>1}function Kw(t,e){return((t=t.x)[0]<0?t[1]-Ct-dt:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-dt:Ct-e[1])}const Zl=r0(function(){return!0},Qw,tv,[-gt,-Ct]);function Qw(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var f=o>0?gt:-gt,s=xt(o-e);xt(s-gt)<dt?(t.point(e,n=(n+a)/2>0?Ct:-Ct),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(o,n),i=0):r!==f&&s>=gt&&(xt(e-r)<dt&&(e-=r*dt),xt(o-f)<dt&&(o-=f*dt),n=Jw(e,n,o,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(f,n),i=0),t.point(e=o,n=a),r=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function Jw(t,e,n,r){var i,o,a=ct(t-n);return xt(a)>dt?Gr((ct(e)*(o=mt(r))*ct(n)-ct(r)*(i=mt(e))*ct(t))/(i*o*a)):(e+r)/2}function tv(t,e,n,r){var i;if(t==null)i=n*Ct,r.point(-gt,i),r.point(0,i),r.point(gt,i),r.point(gt,0),r.point(gt,-i),r.point(0,-i),r.point(-gt,-i),r.point(-gt,0),r.point(-gt,i);else if(xt(t[0]-e[0])>dt){var o=t[0]<e[0]?gt:-gt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function ev(t){var e=mt(t),n=6*Tt,r=e>0,i=xt(e)>dt;function o(l,h,c,d){Xw(d,t,n,c,l,h)}function a(l,h){return mt(l)*mt(h)>e}function f(l){var h,c,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(g,b){var y=[g,b],$,_=a(g,b),M=r?_?0:u(g,b):_?u(g+(g<0?gt:-gt),b):0;if(!h&&(p=d=_)&&l.lineStart(),_!==d&&($=s(h,y),(!$||Oo(h,$)||Oo(y,$))&&(y[2]=1)),_!==d)m=0,_?(l.lineStart(),$=s(y,h),l.point($[0],$[1])):($=s(h,y),l.point($[0],$[1],2),l.lineEnd()),h=$;else if(i&&h&&r^_){var w;!(M&c)&&(w=s(y,h,!0))&&(m=0,r?(l.lineStart(),l.point(w[0][0],w[0][1]),l.point(w[1][0],w[1][1]),l.lineEnd()):(l.point(w[1][0],w[1][1]),l.lineEnd(),l.lineStart(),l.point(w[0][0],w[0][1],3)))}_&&(!h||!Oo(h,y))&&l.point(y[0],y[1]),h=y,d=_,c=M},lineEnd:function(){d&&l.lineEnd(),h=null},clean:function(){return m|(p&&d)<<1}}}function s(l,h,c){var d=Fr(l),p=Fr(h),m=[1,0,0],g=na(d,p),b=yo(g,g),y=g[0],$=b-y*y;if(!$)return!c&&l;var _=e*b/$,M=-e*y/$,w=na(m,g),v=_o(m,_),S=_o(g,M);Df(v,S);var C=w,N=yo(v,C),T=yo(C,C),R=N*N-T*(yo(v,v)-1);if(!(R<0)){var P=Kt(R),q=_o(C,(-N-P)/T);if(Df(q,v),q=Ss(q),!c)return q;var k=l[0],B=h[0],O=l[1],X=h[1],W;B<k&&(W=k,k=B,B=W);var H=B-k,D=xt(H-gt)<dt,z=D||H<dt;if(!D&&X<O&&(W=O,O=X,X=W),z?D?O+X>0^q[1]<(xt(q[0]-k)<dt?O:X):O<=q[1]&&q[1]<=X:H>gt^(k<=q[0]&&q[0]<=B)){var Y=_o(C,(-N+P)/T);return Df(Y,v),[q,Ss(Y)]}}}function u(l,h){var c=r?t:gt-t,d=0;return l<-c?d|=1:l>c&&(d|=2),h<-c?d|=4:h>c&&(d|=8),d}return r0(a,f,o,r?[0,-t]:[-gt,t-gt])}function nv(t,e,n,r,i,o){var a=t[0],f=t[1],s=e[0],u=e[1],l=0,h=1,c=s-a,d=u-f,p;if(p=n-a,!(!c&&p>0)){if(p/=c,c<0){if(p<l)return;p<h&&(h=p)}else if(c>0){if(p>h)return;p>l&&(l=p)}if(p=i-a,!(!c&&p<0)){if(p/=c,c<0){if(p>h)return;p>l&&(l=p)}else if(c>0){if(p<l)return;p<h&&(h=p)}if(p=r-f,!(!d&&p>0)){if(p/=d,d<0){if(p<l)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>l&&(l=p)}if(p=o-f,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>l&&(l=p)}else if(d>0){if(p<l)return;p<h&&(h=p)}return l>0&&(t[0]=a+l*c,t[1]=f+l*d),h<1&&(e[0]=a+h*c,e[1]=f+h*d),!0}}}}}var fi=1e9,vo=-fi;function i0(t,e,n,r){function i(u,l){return t<=u&&u<=n&&e<=l&&l<=r}function o(u,l,h,c){var d=0,p=0;if(u==null||(d=a(u,h))!==(p=a(l,h))||s(u,l)<0^h>0)do c.point(d===0||d===3?t:n,d>1?r:e);while((d=(d+h+4)%4)!==p);else c.point(l[0],l[1])}function a(u,l){return xt(u[0]-t)<dt?l>0?0:3:xt(u[0]-n)<dt?l>0?2:1:xt(u[1]-e)<dt?l>0?1:0:l>0?3:2}function f(u,l){return s(u.x,l.x)}function s(u,l){var h=a(u,1),c=a(l,1);return h!==c?h-c:h===0?l[1]-u[1]:h===1?u[0]-l[0]:h===2?u[1]-l[1]:l[0]-u[0]}return function(u){var l=u,h=e0(),c,d,p,m,g,b,y,$,_,M,w,v={point:S,lineStart:R,lineEnd:P,polygonStart:N,polygonEnd:T};function S(k,B){i(k,B)&&l.point(k,B)}function C(){for(var k=0,B=0,O=d.length;B<O;++B)for(var X=d[B],W=1,H=X.length,D=X[0],z,Y,J=D[0],Z=D[1];W<H;++W)z=J,Y=Z,D=X[W],J=D[0],Z=D[1],Y<=r?Z>r&&(J-z)*(r-Y)>(Z-Y)*(t-z)&&++k:Z<=r&&(J-z)*(r-Y)<(Z-Y)*(t-z)&&--k;return k}function N(){l=h,c=[],d=[],w=!0}function T(){var k=C(),B=w&&k,O=(c=cd(c)).length;(B||O)&&(u.polygonStart(),B&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),O&&n0(c,f,k,o,u),u.polygonEnd()),l=u,c=d=p=null}function R(){v.point=q,d&&d.push(p=[]),M=!0,_=!1,y=$=NaN}function P(){c&&(q(m,g),b&&_&&h.rejoin(),c.push(h.result())),v.point=S,_&&l.lineEnd()}function q(k,B){var O=i(k,B);if(d&&p.push([k,B]),M)m=k,g=B,b=O,M=!1,O&&(l.lineStart(),l.point(k,B));else if(O&&_)l.point(k,B);else{var X=[y=Math.max(vo,Math.min(fi,y)),$=Math.max(vo,Math.min(fi,$))],W=[k=Math.max(vo,Math.min(fi,k)),B=Math.max(vo,Math.min(fi,B))];nv(X,W,t,e,n,r)?(_||(l.lineStart(),l.point(X[0],X[1])),l.point(W[0],W[1]),O||l.lineEnd(),w=!1):O&&(l.lineStart(),l.point(k,B),w=!1)}y=k,$=B,_=O}return v}}const Es=t=>t;var Lf=new Wn,As=new Wn,o0,a0,Ns,Ds,yn={point:he,lineStart:he,lineEnd:he,polygonStart:function(){yn.lineStart=rv,yn.lineEnd=ov},polygonEnd:function(){yn.lineStart=yn.lineEnd=yn.point=he,Lf.add(xt(As)),As=new Wn},result:function(){var t=Lf/2;return Lf=new Wn,t}};function rv(){yn.point=iv}function iv(t,e){yn.point=f0,o0=Ns=t,a0=Ds=e}function f0(t,e){As.add(Ds*t-Ns*e),Ns=t,Ds=e}function ov(){f0(o0,a0)}const Kl=yn;var Lr=1/0,ra=Lr,Ti=-Lr,ia=Ti,av={point:fv,lineStart:he,lineEnd:he,polygonStart:he,polygonEnd:he,result:function(){var t=[[Lr,ra],[Ti,ia]];return Ti=ia=-(ra=Lr=1/0),t}};function fv(t,e){t<Lr&&(Lr=t),t>Ti&&(Ti=t),e<ra&&(ra=e),e>ia&&(ia=e)}const oa=av;var Fs=0,Ls=0,si=0,aa=0,fa=0,yr=0,Rs=0,Is=0,ui=0,s0,u0,De,Fe,ve={point:Kn,lineStart:Ql,lineEnd:Jl,polygonStart:function(){ve.lineStart=lv,ve.lineEnd=cv},polygonEnd:function(){ve.point=Kn,ve.lineStart=Ql,ve.lineEnd=Jl},result:function(){var t=ui?[Rs/ui,Is/ui]:yr?[aa/yr,fa/yr]:si?[Fs/si,Ls/si]:[NaN,NaN];return Fs=Ls=si=aa=fa=yr=Rs=Is=ui=0,t}};function Kn(t,e){Fs+=t,Ls+=e,++si}function Ql(){ve.point=sv}function sv(t,e){ve.point=uv,Kn(De=t,Fe=e)}function uv(t,e){var n=t-De,r=e-Fe,i=Kt(n*n+r*r);aa+=i*(De+t)/2,fa+=i*(Fe+e)/2,yr+=i,Kn(De=t,Fe=e)}function Jl(){ve.point=Kn}function lv(){ve.point=hv}function cv(){l0(s0,u0)}function hv(t,e){ve.point=l0,Kn(s0=De=t,u0=Fe=e)}function l0(t,e){var n=t-De,r=e-Fe,i=Kt(n*n+r*r);aa+=i*(De+t)/2,fa+=i*(Fe+e)/2,yr+=i,i=Fe*t-De*e,Rs+=i*(De+t),Is+=i*(Fe+e),ui+=i*3,Kn(De=t,Fe=e)}const tc=ve;function c0(t){this._context=t}c0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,oe);break}}},result:he};var Ps=new Wn,Rf,h0,d0,li,ci,sa={point:he,lineStart:function(){sa.point=dv},lineEnd:function(){Rf&&p0(h0,d0),sa.point=he},polygonStart:function(){Rf=!0},polygonEnd:function(){Rf=null},result:function(){var t=+Ps;return Ps=new Wn,t}};function dv(t,e){sa.point=p0,h0=li=t,d0=ci=e}function p0(t,e){li-=t,ci-=e,Ps.add(Kt(li*li+ci*ci)),li=t,ci=e}const ec=sa;let nc,ua,rc,ic;class oc{constructor(e){this._append=e==null?m0:pv(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==rc||this._append!==ua){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,rc=r,ua=this._append,ic=this._,this._=i}this._+=ic;break}}}result(){const e=this._;return this._="",e.length?e:null}}function m0(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function pv(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return m0;if(e!==nc){const n=10**e;nc=e,ua=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return ua}function Ua(t,e){let n=3,r=4.5,i,o;function a(f){return f&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),In(f,i(o))),o.result()}return a.area=function(f){return In(f,i(Kl)),Kl.result()},a.measure=function(f){return In(f,i(ec)),ec.result()},a.bounds=function(f){return In(f,i(oa)),oa.result()},a.centroid=function(f){return In(f,i(tc)),tc.result()},a.projection=function(f){return arguments.length?(i=f==null?(t=null,Es):(t=f).stream,a):t},a.context=function(f){return arguments.length?(o=f==null?(e=null,new oc(n)):new c0(e=f),typeof r!="function"&&o.pointRadius(r),a):e},a.pointRadius=function(f){return arguments.length?(r=typeof f=="function"?f:(o.pointRadius(+f),+f),a):r},a.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const s=Math.floor(f);if(!(s>=0))throw new RangeError(`invalid digits: ${f}`);n=s}return e===null&&(o=new oc(n)),a},a.projection(t).digits(n).context(e)}function Os(t){return{stream:Ba(t)}}function Ba(t){return function(e){var n=new Us;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Us(){}Us.prototype={constructor:Us,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _u(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),In(n,t.stream(oa)),e(oa.result()),r!=null&&t.clipExtent(r),t}function wu(t,e,n){return _u(t,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),f=+e[0][0]+(i-a*(r[1][0]+r[0][0]))/2,s=+e[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([f,s])},n)}function g0(t,e,n){return wu(t,[[0,0],e],n)}function b0(t,e,n){return _u(t,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,f=-o*r[0][1];t.scale(150*o).translate([a,f])},n)}function y0(t,e,n){return _u(t,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],f=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,f])},n)}var ac=16,mv=mt(30*Tt);function fc(t,e){return+e?bv(t,e):gv(t)}function gv(t){return Ba({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function bv(t,e){function n(r,i,o,a,f,s,u,l,h,c,d,p,m,g){var b=u-r,y=l-i,$=b*b+y*y;if($>4*e&&m--){var _=a+c,M=f+d,w=s+p,v=Kt(_*_+M*M+w*w),S=be(w/=v),C=xt(xt(w)-1)<dt||xt(o-h)<dt?(o+h)/2:fn(M,_),N=t(C,S),T=N[0],R=N[1],P=T-r,q=R-i,k=y*P-b*q;(k*k/$>e||xt((b*P+y*q)/$-.5)>.3||a*c+f*d+s*p<mv)&&(n(r,i,o,a,f,s,T,R,C,_/=v,M/=v,w,m,g),g.point(T,R),n(T,R,C,_,M,w,u,l,h,c,d,p,m,g))}}return function(r){var i,o,a,f,s,u,l,h,c,d,p,m,g={point:b,lineStart:y,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=y}};function b(S,C){S=t(S,C),r.point(S[0],S[1])}function y(){h=NaN,g.point=$,r.lineStart()}function $(S,C){var N=Fr([S,C]),T=t(S,C);n(h,c,l,d,p,m,h=T[0],c=T[1],l=S,d=N[0],p=N[1],m=N[2],ac,r),r.point(h,c)}function _(){g.point=b,r.lineEnd()}function M(){y(),g.point=w,g.lineEnd=v}function w(S,C){$(i=S,C),o=h,a=c,f=d,s=p,u=m,g.point=$}function v(){n(h,c,l,d,p,m,o,a,i,f,s,u,ac,r),g.lineEnd=_,_()}return g}}var yv=Ba({point:function(t,e){this.stream.point(t*Tt,e*Tt)}});function _v(t){return Ba({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function wv(t,e,n,r,i){function o(a,f){return a*=r,f*=i,[e+t*a,n-t*f]}return o.invert=function(a,f){return[(a-e)/t*r,(n-f)/t*i]},o}function sc(t,e,n,r,i,o){if(!o)return wv(t,e,n,r,i);var a=mt(o),f=ct(o),s=a*t,u=f*t,l=a/t,h=f/t,c=(f*n-a*e)/t,d=(f*e+a*n)/t;function p(m,g){return m*=r,g*=i,[s*m-u*g+e,n-u*m-s*g]}return p.invert=function(m,g){return[r*(l*m-h*g+c),i*(d-h*m-l*g)]},p}function Tn(t){return _0(function(){return t})()}function _0(t){var e,n=150,r=480,i=250,o=0,a=0,f=0,s=0,u=0,l,h=0,c=1,d=1,p=null,m=Zl,g=null,b,y,$,_=Es,M=.5,w,v,S,C,N;function T(k){return S(k[0]*Tt,k[1]*Tt)}function R(k){return k=S.invert(k[0],k[1]),k&&[k[0]*Ht,k[1]*Ht]}T.stream=function(k){return C&&N===k?C:C=yv(_v(l)(m(w(_(N=k)))))},T.preclip=function(k){return arguments.length?(m=k,p=void 0,q()):m},T.postclip=function(k){return arguments.length?(_=k,g=b=y=$=null,q()):_},T.clipAngle=function(k){return arguments.length?(m=+k?ev(p=k*Tt):(p=null,Zl),q()):p*Ht},T.clipExtent=function(k){return arguments.length?(_=k==null?(g=b=y=$=null,Es):i0(g=+k[0][0],b=+k[0][1],y=+k[1][0],$=+k[1][1]),q()):g==null?null:[[g,b],[y,$]]},T.scale=function(k){return arguments.length?(n=+k,P()):n},T.translate=function(k){return arguments.length?(r=+k[0],i=+k[1],P()):[r,i]},T.center=function(k){return arguments.length?(o=k[0]%360*Tt,a=k[1]%360*Tt,P()):[o*Ht,a*Ht]},T.rotate=function(k){return arguments.length?(f=k[0]%360*Tt,s=k[1]%360*Tt,u=k.length>2?k[2]%360*Tt:0,P()):[f*Ht,s*Ht,u*Ht]},T.angle=function(k){return arguments.length?(h=k%360*Tt,P()):h*Ht},T.reflectX=function(k){return arguments.length?(c=k?-1:1,P()):c<0},T.reflectY=function(k){return arguments.length?(d=k?-1:1,P()):d<0},T.precision=function(k){return arguments.length?(w=fc(v,M=k*k),q()):Kt(M)},T.fitExtent=function(k,B){return wu(T,k,B)},T.fitSize=function(k,B){return g0(T,k,B)},T.fitWidth=function(k,B){return b0(T,k,B)},T.fitHeight=function(k,B){return y0(T,k,B)};function P(){var k=sc(n,0,0,c,d,h).apply(null,e(o,a)),B=sc(n,r-k[0],i-k[1],c,d,h);return l=t0(f,s,u),v=Ts(e,B),S=Ts(l,v),w=fc(v,M),q()}function q(){return C=N=null,T}return function(){return e=t.apply(this,arguments),T.invert=e.invert&&R,P()}}function vu(t){var e=0,n=gt/3,r=_0(t),i=r(e,n);return i.parallels=function(o){return arguments.length?r(e=o[0]*Tt,n=o[1]*Tt):[e*Ht,n*Ht]},i}function vv(t){var e=mt(t);function n(r,i){return[r*e,ct(i)/e]}return n.invert=function(r,i){return[r/e,be(i*e)]},n}function xv(t,e){var n=ct(t),r=(n+ct(e))/2;if(xt(r)<dt)return vv(t);var i=1+n*(2*r-n),o=Kt(i)/r;function a(f,s){var u=Kt(i-2*r*ct(s))/r;return[u*ct(f*=r),o-u*mt(f)]}return a.invert=function(f,s){var u=o-s,l=fn(f,xt(u))*ce(u);return u*r<0&&(l-=gt*ce(f)*ce(u)),[l/r,be((i-(f*f+u*u)*r*r)/(2*r))]},a}function la(){return vu(xv).scale(155.424).center([0,33.6442])}function w0(){return la().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Mv(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function $v(){var t,e,n=w0(),r,i=la().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=la().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,s,u={point:function(c,d){s=[c,d]}};function l(c){var d=c[0],p=c[1];return s=null,r.point(d,p),s||(o.point(d,p),s)||(f.point(d,p),s)}l.invert=function(c){var d=n.scale(),p=n.translate(),m=(c[0]-p[0])/d,g=(c[1]-p[1])/d;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(c)},l.stream=function(c){return t&&e===c?t:t=Mv([n.stream(e=c),i.stream(c),a.stream(c)])},l.precision=function(c){return arguments.length?(n.precision(c),i.precision(c),a.precision(c),h()):n.precision()},l.scale=function(c){return arguments.length?(n.scale(c),i.scale(c*.35),a.scale(c),l.translate(n.translate())):n.scale()},l.translate=function(c){if(!arguments.length)return n.translate();var d=n.scale(),p=+c[0],m=+c[1];return r=n.translate(c).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(u),o=i.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+dt,m+.12*d+dt],[p-.214*d-dt,m+.234*d-dt]]).stream(u),f=a.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+dt,m+.166*d+dt],[p-.115*d-dt,m+.234*d-dt]]).stream(u),h()},l.fitExtent=function(c,d){return wu(l,c,d)},l.fitSize=function(c,d){return g0(l,c,d)},l.fitWidth=function(c,d){return b0(l,c,d)},l.fitHeight=function(c,d){return y0(l,c,d)};function h(){return t=e=null,l}return l.scale(1070)}function v0(t){return function(e,n){var r=mt(e),i=mt(n),o=t(r*i);return o===1/0?[2,0]:[o*i*ct(e),o*ct(n)]}}function Wi(t){return function(e,n){var r=Kt(e*e+n*n),i=t(r),o=ct(i),a=mt(i);return[fn(e*o,r*a),be(r&&n*o/r)]}}var x0=v0(function(t){return Kt(2/(1+t))});x0.invert=Wi(function(t){return 2*be(t/2)});function Sv(){return Tn(x0).scale(124.75).clipAngle(180-.001)}var M0=v0(function(t){return(t=Jd(t))&&t/ct(t)});M0.invert=Wi(function(t){return t});function kv(){return Tn(M0).scale(79.4188).clipAngle(180-.001)}function za(t,e){return[t,ta(yu((Ct+e)/2))]}za.invert=function(t,e){return[t,2*Gr(Qd(e))-Ct]};function Tv(){return $0(za).scale(961/oe)}function $0(t){var e=Tn(t),n=e.center,r=e.scale,i=e.translate,o=e.clipExtent,a=null,f,s,u;e.scale=function(h){return arguments.length?(r(h),l()):r()},e.translate=function(h){return arguments.length?(i(h),l()):i()},e.center=function(h){return arguments.length?(n(h),l()):n()},e.clipExtent=function(h){return arguments.length?(h==null?a=f=s=u=null:(a=+h[0][0],f=+h[0][1],s=+h[1][0],u=+h[1][1]),l()):a==null?null:[[a,f],[s,u]]};function l(){var h=gt*r(),c=e(Vw(e.rotate()).invert([0,0]));return o(a==null?[[c[0]-h,c[1]-h],[c[0]+h,c[1]+h]]:t===za?[[Math.max(c[0]-h,a),f],[Math.min(c[0]+h,s),u]]:[[a,Math.max(c[1]-h,f)],[s,Math.min(c[1]+h,u)]])}return l()}function xo(t){return yu((Ct+t)/2)}function Cv(t,e){var n=mt(t),r=t===e?ct(t):ta(n/mt(e))/ta(xo(e)/xo(t)),i=n*Nf(xo(t),r)/r;if(!r)return za;function o(a,f){i>0?f<-Ct+dt&&(f=-Ct+dt):f>Ct-dt&&(f=Ct-dt);var s=i/Nf(xo(f),r);return[s*ct(r*a),i-s*mt(r*a)]}return o.invert=function(a,f){var s=i-f,u=ce(r)*Kt(a*a+s*s),l=fn(a,xt(s))*ce(s);return s*r<0&&(l-=gt*ce(a)*ce(s)),[l/r,2*Gr(Nf(i/u,1/r))-Ct]},o}function Ev(){return vu(Cv).scale(109.5).parallels([30,30])}function ca(t,e){return[t,e]}ca.invert=ca;function Av(){return Tn(ca).scale(152.63)}function Nv(t,e){var n=mt(t),r=t===e?ct(t):(n-mt(e))/(e-t),i=n/r+t;if(xt(r)<dt)return ca;function o(a,f){var s=i-f,u=r*a;return[s*ct(u),i-s*mt(u)]}return o.invert=function(a,f){var s=i-f,u=fn(a,xt(s))*ce(s);return s*r<0&&(u-=gt*ce(a)*ce(s)),[u/r,i-ce(r)*Kt(a*a+s*s)]},o}function Dv(){return vu(Nv).scale(131.154).center([0,13.9389])}var mi=1.340264,gi=-.081106,bi=893e-6,yi=.003796,ha=Kt(3)/2,Fv=12;function S0(t,e){var n=be(ha*ct(e)),r=n*n,i=r*r*r;return[t*mt(n)/(ha*(mi+3*gi*r+i*(7*bi+9*yi*r))),n*(mi+gi*r+i*(bi+yi*r))]}S0.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,o=0,a,f,s;o<Fv&&(f=n*(mi+gi*r+i*(bi+yi*r))-e,s=mi+3*gi*r+i*(7*bi+9*yi*r),n-=a=f/s,r=n*n,i=r*r*r,!(xt(a)<Kd));++o);return[ha*t*(mi+3*gi*r+i*(7*bi+9*yi*r))/mt(n),be(ct(n)/ha)]};function Lv(){return Tn(S0).scale(177.158)}function k0(t,e){var n=mt(e),r=mt(t)*n;return[n*ct(t)/r,ct(e)/r]}k0.invert=Wi(Gr);function Rv(){return Tn(k0).scale(144.049).clipAngle(60)}function T0(t,e){return[mt(e)*ct(t),ct(e)]}T0.invert=Wi(be);function Iv(){return Tn(T0).scale(249.5).clipAngle(90+dt)}function C0(t,e){var n=mt(e),r=1+mt(t)*n;return[n*ct(t)/r,ct(e)/r]}C0.invert=Wi(function(t){return 2*Gr(t)});function Pv(){return Tn(C0).scale(250).clipAngle(142)}function E0(t,e){return[ta(yu((Ct+e)/2)),-t]}E0.invert=function(t,e){return[-e,2*Gr(Qd(t))-Ct]};function Ov(){var t=$0(E0),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ge(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function qa(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Bs=Symbol("implicit");function xu(){var t=new Gn,e=[],n=[],r=Bs;function i(o){let a=t.get(o);if(a===void 0){if(r!==Bs)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Gn;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return xu(e,n).unknown(r)},Ge.apply(i,arguments),i}function Ha(){var t=xu().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,f=!1,s=0,u=0,l=.5;delete t.unknown;function h(){var c=e().length,d=i<r,p=d?i:r,m=d?r:i;o=(m-p)/Math.max(1,c-s+u*2),f&&(o=Math.floor(o)),p+=(m-p-o*(c-s))*l,a=o*(1-s),f&&(p=Math.round(p),a=Math.round(a));var g=cs(c).map(function(b){return p+o*b});return n(d?g.reverse():g)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([r,i]=c,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(c){return[r,i]=c,r=+r,i=+i,f=!0,h()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(c){return arguments.length?(f=!!c,h()):f},t.padding=function(c){return arguments.length?(s=Math.min(1,u=+c),h()):s},t.paddingInner=function(c){return arguments.length?(s=Math.min(1,c),h()):s},t.paddingOuter=function(c){return arguments.length?(u=+c,h()):u},t.align=function(c){return arguments.length?(l=Math.max(0,Math.min(1,c)),h()):l},t.copy=function(){return Ha(e(),[r,i]).round(f).paddingInner(s).paddingOuter(u).align(l)},Ge.apply(h(),arguments)}function A0(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return A0(e())},t}function Uv(){return A0(Ha.apply(null,arguments).paddingInner(1))}function Bv(t){return function(){return t}}function zs(t){return+t}var uc=[0,1];function de(t){return t}function qs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Bv(isNaN(e)?NaN:.5)}function zv(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function qv(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=qs(i,r),o=n(a,o)):(r=qs(r,i),o=n(o,a)),function(f){return o(r(f))}}function Hv(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=qs(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(f){var s=ka(t,f,1,r)-1;return o[s](i[s](f))}}function Gi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ya(){var t=uc,e=uc,n=Yi,r,i,o,a=de,f,s,u;function l(){var c=Math.min(t.length,e.length);return a!==de&&(a=zv(t[0],t[c-1])),f=c>2?Hv:qv,s=u=null,h}function h(c){return c==null||isNaN(c=+c)?o:(s||(s=f(t.map(r),e,n)))(r(a(c)))}return h.invert=function(c){return a(i((u||(u=f(e,t.map(r),Ut)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,zs),l()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),l()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),n=hu,l()},h.clamp=function(c){return arguments.length?(a=c?!0:de,l()):a!==de},h.interpolate=function(c){return arguments.length?(n=c,l()):n},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,d){return r=c,i=d,l()}}function N0(){return Ya()(de,de)}function Yv(t,e,n,r){var i=us(t,e,n),o;switch(r=ki(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Ww(i,a))&&(r.precision=o),Zd(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Gw(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Yw(i))&&(r.precision=o-(r.type==="%")*2);break}}return Wr(r)}function Vi(t){var e=t.domain;return t.ticks=function(n){var r=e();return xi(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Yv(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],f=r[o],s,u,l=10;for(f<a&&(u=a,a=f,f=u,u=i,i=o,o=u);l-- >0;){if(u=Wo(a,f,n),u===s)return r[i]=a,r[o]=f,e(r);if(u>0)a=Math.floor(a/u)*u,f=Math.ceil(f/u)*u;else if(u<0)a=Math.ceil(a*u)/u,f=Math.floor(f*u)/u;else break;s=u}return t},t}function Mu(){var t=N0();return t.copy=function(){return Gi(t,Mu())},Ge.apply(t,arguments),Vi(t)}function D0(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,zs),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return D0(t).unknown(e)},t=arguments.length?Array.from(t,zs):[0,1],Vi(n)}function F0(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function lc(t){return Math.log(t)}function cc(t){return Math.exp(t)}function Wv(t){return-Math.log(-t)}function Gv(t){return-Math.exp(-t)}function Vv(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Xv(t){return t===10?Vv:t===Math.E?Math.exp:e=>Math.pow(t,e)}function jv(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function hc(t){return(e,n)=>-t(-e,n)}function L0(t){const e=t(lc,cc),n=e.domain;let r=10,i,o;function a(){return i=jv(r),o=Xv(r),n()[0]<0?(i=hc(i),o=hc(o),t(Wv,Gv)):t(lc,cc),e}return e.base=function(f){return arguments.length?(r=+f,a()):r},e.domain=function(f){return arguments.length?(n(f),a()):n()},e.ticks=f=>{const s=n();let u=s[0],l=s[s.length-1];const h=l<u;h&&([u,l]=[l,u]);let c=i(u),d=i(l),p,m;const g=f==null?10:+f;let b=[];if(!(r%1)&&d-c<g){if(c=Math.floor(c),d=Math.ceil(d),u>0){for(;c<=d;++c)for(p=1;p<r;++p)if(m=c<0?p/o(-c):p*o(c),!(m<u)){if(m>l)break;b.push(m)}}else for(;c<=d;++c)for(p=r-1;p>=1;--p)if(m=c>0?p/o(-c):p*o(c),!(m<u)){if(m>l)break;b.push(m)}b.length*2<g&&(b=xi(u,l,g))}else b=xi(c,d,Math.min(d-c,g)).map(o);return h?b.reverse():b},e.tickFormat=(f,s)=>{if(f==null&&(f=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=ki(s)).precision==null&&(s.trim=!0),s=Wr(s)),f===1/0)return s;const u=Math.max(1,r*f/e.ticks().length);return l=>{let h=l/o(Math.round(i(l)));return h*r<r-.5&&(h*=r),h<=u?s(l):""}},e.nice=()=>n(F0(n(),{floor:f=>o(Math.floor(i(f))),ceil:f=>o(Math.ceil(i(f)))})),e}function R0(){const t=L0(Ya()).domain([1,10]);return t.copy=()=>Gi(t,R0()).base(t.base()),Ge.apply(t,arguments),t}function dc(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function pc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function I0(t){var e=1,n=t(dc(e),pc(e));return n.constant=function(r){return arguments.length?t(dc(e=+r),pc(e)):e},Vi(n)}function P0(){var t=I0(Ya());return t.copy=function(){return Gi(t,P0()).constant(t.constant())},Ge.apply(t,arguments)}function mc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Zv(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Kv(t){return t<0?-t*t:t*t}function O0(t){var e=t(de,de),n=1;function r(){return n===1?t(de,de):n===.5?t(Zv,Kv):t(mc(n),mc(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Vi(e)}function U0(){var t=O0(Ya());return t.copy=function(){return Gi(t,U0()).exponent(t.exponent())},Ge.apply(t,arguments),t}function B0(){var t=[],e=[],n=[],r;function i(){var a=0,f=Math.max(1,e.length);for(n=new Array(f-1);++a<f;)n[a-1]=Y2(t,a/f);return o}function o(a){return a==null||isNaN(a=+a)?r:e[ka(n,a)]}return o.invertExtent=function(a){var f=e.indexOf(a);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let f of a)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(Zt),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return B0().domain(t).range(e).unknown(r)},Ge.apply(o,arguments)}function z0(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[ka(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return z0().domain(t).range(e).unknown(n)},Ge.apply(i,arguments)}const If=new Date,Pf=new Date;function Nt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),f=i.ceil(o);return o-a<f-o?a:f},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,f)=>{const s=[];if(o=i.ceil(o),f=f==null?1:Math.floor(f),!(o<a)||!(f>0))return s;let u;do s.push(u=new Date(+o)),e(o,f),t(o);while(u<o&&o<a);return s},i.filter=o=>Nt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,f)=>{if(a>=a)if(f<0)for(;++f<=0;)for(;e(a,-1),!o(a););else for(;--f>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(If.setTime(+o),Pf.setTime(+a),t(If),t(Pf),Math.floor(n(If,Pf))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const da=Nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);da.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):da);da.range;const en=1e3,pe=en*60,nn=pe*60,sn=nn*24,$u=sn*7,gc=sn*30,Of=sn*365,Le=Nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*en)},(t,e)=>(e-t)/en,t=>t.getUTCSeconds());Le.range;const Wa=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*en)},(t,e)=>{t.setTime(+t+e*pe)},(t,e)=>(e-t)/pe,t=>t.getMinutes());Wa.range;const Xi=Nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*pe)},(t,e)=>(e-t)/pe,t=>t.getUTCMinutes());Xi.range;const Ga=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*en-t.getMinutes()*pe)},(t,e)=>{t.setTime(+t+e*nn)},(t,e)=>(e-t)/nn,t=>t.getHours());Ga.range;const ji=Nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*nn)},(t,e)=>(e-t)/nn,t=>t.getUTCHours());ji.range;const nr=Nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*pe)/sn,t=>t.getDate()-1);nr.range;const Va=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sn,t=>t.getUTCDate()-1);Va.range;const Xa=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/sn,t=>Math.floor(t/sn));Xa.range;function rr(t){return Nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*pe)/$u)}const Rr=rr(0),Ci=rr(1),q0=rr(2),H0=rr(3),Qn=rr(4),Y0=rr(5),W0=rr(6);Rr.range;Ci.range;q0.range;H0.range;Qn.range;Y0.range;W0.range;function ir(t){return Nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/$u)}const Ir=ir(0),Ei=ir(1),G0=ir(2),V0=ir(3),Jn=ir(4),X0=ir(5),j0=ir(6);Ir.range;Ei.range;G0.range;V0.range;Jn.range;X0.range;j0.range;const Zi=Nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Zi.range;const Ki=Nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Ki.range;const Me=Nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Me.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Me.range;const $e=Nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());$e.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});$e.range;function Z0(t,e,n,r,i,o){const a=[[Le,1,en],[Le,5,5*en],[Le,15,15*en],[Le,30,30*en],[o,1,pe],[o,5,5*pe],[o,15,15*pe],[o,30,30*pe],[i,1,nn],[i,3,3*nn],[i,6,6*nn],[i,12,12*nn],[r,1,sn],[r,2,2*sn],[n,1,$u],[e,1,gc],[e,3,3*gc],[t,1,Of]];function f(u,l,h){const c=l<u;c&&([u,l]=[l,u]);const d=h&&typeof h.range=="function"?h:s(u,l,h),p=d?d.range(u,+l+1):[];return c?p.reverse():p}function s(u,l,h){const c=Math.abs(l-u)/h,d=Sa(([,,g])=>g).right(a,c);if(d===a.length)return t.every(us(u/Of,l/Of,h));if(d===0)return da.every(Math.max(us(u,l,h),1));const[p,m]=a[c/a[d-1][2]<a[d][2]/c?d-1:d];return p.every(m)}return[f,s]}const[Qv,K0]=Z0($e,Ki,Ir,Xa,ji,Xi),[Jv,t3]=Z0(Me,Zi,Rr,nr,Ga,Wa);function Uf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Bf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ti(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function e3(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,f=t.months,s=t.shortMonths,u=ei(i),l=ni(i),h=ei(o),c=ni(o),d=ei(a),p=ni(a),m=ei(f),g=ni(f),b=ei(s),y=ni(s),$={a:O,A:X,b:W,B:H,c:null,d:xc,e:xc,f:$3,g:L3,G:I3,H:v3,I:x3,j:M3,L:Q0,m:S3,M:k3,p:D,q:z,Q:Sc,s:kc,S:T3,u:C3,U:E3,V:A3,w:N3,W:D3,x:null,X:null,y:F3,Y:R3,Z:P3,"%":$c},_={a:Y,A:J,b:Z,B:K,c:null,d:Mc,e:Mc,f:z3,g:K3,G:J3,H:O3,I:U3,j:B3,L:tp,m:q3,M:H3,p:U,q:I,Q:Sc,s:kc,S:Y3,u:W3,U:G3,V:V3,w:X3,W:j3,x:null,X:null,y:Z3,Y:Q3,Z:t6,"%":$c},M={a:N,A:T,b:R,B:P,c:q,d:wc,e:wc,f:b3,g:_c,G:yc,H:vc,I:vc,j:d3,L:g3,m:h3,M:p3,p:C,q:c3,Q:_3,s:w3,S:m3,u:a3,U:f3,V:s3,w:o3,W:u3,x:k,X:B,y:_c,Y:yc,Z:l3,"%":y3};$.x=w(n,$),$.X=w(r,$),$.c=w(e,$),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_);function w(E,L){return function(G){var F=[],ut=-1,Q=0,ht=E.length,st,ft,Gt;for(G instanceof Date||(G=new Date(+G));++ut<ht;)E.charCodeAt(ut)===37&&(F.push(E.slice(Q,ut)),(ft=bc[st=E.charAt(++ut)])!=null?st=E.charAt(++ut):ft=st==="e"?" ":"0",(Gt=L[st])&&(st=Gt(G,ft)),F.push(st),Q=ut+1);return F.push(E.slice(Q,ut)),F.join("")}}function v(E,L){return function(G){var F=ti(1900,void 0,1),ut=S(F,E,G+="",0),Q,ht;if(ut!=G.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(L&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(Q=Bf(ti(F.y,0,1)),ht=Q.getUTCDay(),Q=ht>4||ht===0?Ei.ceil(Q):Ei(Q),Q=Va.offset(Q,(F.V-1)*7),F.y=Q.getUTCFullYear(),F.m=Q.getUTCMonth(),F.d=Q.getUTCDate()+(F.w+6)%7):(Q=Uf(ti(F.y,0,1)),ht=Q.getDay(),Q=ht>4||ht===0?Ci.ceil(Q):Ci(Q),Q=nr.offset(Q,(F.V-1)*7),F.y=Q.getFullYear(),F.m=Q.getMonth(),F.d=Q.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),ht="Z"in F?Bf(ti(F.y,0,1)).getUTCDay():Uf(ti(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(ht+5)%7:F.w+F.U*7-(ht+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,Bf(F)):Uf(F)}}function S(E,L,G,F){for(var ut=0,Q=L.length,ht=G.length,st,ft;ut<Q;){if(F>=ht)return-1;if(st=L.charCodeAt(ut++),st===37){if(st=L.charAt(ut++),ft=M[st in bc?L.charAt(ut++):st],!ft||(F=ft(E,G,F))<0)return-1}else if(st!=G.charCodeAt(F++))return-1}return F}function C(E,L,G){var F=u.exec(L.slice(G));return F?(E.p=l.get(F[0].toLowerCase()),G+F[0].length):-1}function N(E,L,G){var F=d.exec(L.slice(G));return F?(E.w=p.get(F[0].toLowerCase()),G+F[0].length):-1}function T(E,L,G){var F=h.exec(L.slice(G));return F?(E.w=c.get(F[0].toLowerCase()),G+F[0].length):-1}function R(E,L,G){var F=b.exec(L.slice(G));return F?(E.m=y.get(F[0].toLowerCase()),G+F[0].length):-1}function P(E,L,G){var F=m.exec(L.slice(G));return F?(E.m=g.get(F[0].toLowerCase()),G+F[0].length):-1}function q(E,L,G){return S(E,e,L,G)}function k(E,L,G){return S(E,n,L,G)}function B(E,L,G){return S(E,r,L,G)}function O(E){return a[E.getDay()]}function X(E){return o[E.getDay()]}function W(E){return s[E.getMonth()]}function H(E){return f[E.getMonth()]}function D(E){return i[+(E.getHours()>=12)]}function z(E){return 1+~~(E.getMonth()/3)}function Y(E){return a[E.getUTCDay()]}function J(E){return o[E.getUTCDay()]}function Z(E){return s[E.getUTCMonth()]}function K(E){return f[E.getUTCMonth()]}function U(E){return i[+(E.getUTCHours()>=12)]}function I(E){return 1+~~(E.getUTCMonth()/3)}return{format:function(E){var L=w(E+="",$);return L.toString=function(){return E},L},parse:function(E){var L=v(E+="",!1);return L.toString=function(){return E},L},utcFormat:function(E){var L=w(E+="",_);return L.toString=function(){return E},L},utcParse:function(E){var L=v(E+="",!0);return L.toString=function(){return E},L}}}var bc={"-":"",_:" ",0:"0"},It=/^\s*\d+/,n3=/^%/,r3=/[\\^$*+?|[\]().{}]/g;function vt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function i3(t){return t.replace(r3,"\\$&")}function ei(t){return new RegExp("^(?:"+t.map(i3).join("|")+")","i")}function ni(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function o3(t,e,n){var r=It.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function a3(t,e,n){var r=It.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function f3(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function s3(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function u3(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function yc(t,e,n){var r=It.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function _c(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function l3(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function c3(t,e,n){var r=It.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function h3(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function wc(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function d3(t,e,n){var r=It.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function vc(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function p3(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function m3(t,e,n){var r=It.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function g3(t,e,n){var r=It.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function b3(t,e,n){var r=It.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function y3(t,e,n){var r=n3.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function _3(t,e,n){var r=It.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function w3(t,e,n){var r=It.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function xc(t,e){return vt(t.getDate(),e,2)}function v3(t,e){return vt(t.getHours(),e,2)}function x3(t,e){return vt(t.getHours()%12||12,e,2)}function M3(t,e){return vt(1+nr.count(Me(t),t),e,3)}function Q0(t,e){return vt(t.getMilliseconds(),e,3)}function $3(t,e){return Q0(t,e)+"000"}function S3(t,e){return vt(t.getMonth()+1,e,2)}function k3(t,e){return vt(t.getMinutes(),e,2)}function T3(t,e){return vt(t.getSeconds(),e,2)}function C3(t){var e=t.getDay();return e===0?7:e}function E3(t,e){return vt(Rr.count(Me(t)-1,t),e,2)}function J0(t){var e=t.getDay();return e>=4||e===0?Qn(t):Qn.ceil(t)}function A3(t,e){return t=J0(t),vt(Qn.count(Me(t),t)+(Me(t).getDay()===4),e,2)}function N3(t){return t.getDay()}function D3(t,e){return vt(Ci.count(Me(t)-1,t),e,2)}function F3(t,e){return vt(t.getFullYear()%100,e,2)}function L3(t,e){return t=J0(t),vt(t.getFullYear()%100,e,2)}function R3(t,e){return vt(t.getFullYear()%1e4,e,4)}function I3(t,e){var n=t.getDay();return t=n>=4||n===0?Qn(t):Qn.ceil(t),vt(t.getFullYear()%1e4,e,4)}function P3(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vt(e/60|0,"0",2)+vt(e%60,"0",2)}function Mc(t,e){return vt(t.getUTCDate(),e,2)}function O3(t,e){return vt(t.getUTCHours(),e,2)}function U3(t,e){return vt(t.getUTCHours()%12||12,e,2)}function B3(t,e){return vt(1+Va.count($e(t),t),e,3)}function tp(t,e){return vt(t.getUTCMilliseconds(),e,3)}function z3(t,e){return tp(t,e)+"000"}function q3(t,e){return vt(t.getUTCMonth()+1,e,2)}function H3(t,e){return vt(t.getUTCMinutes(),e,2)}function Y3(t,e){return vt(t.getUTCSeconds(),e,2)}function W3(t){var e=t.getUTCDay();return e===0?7:e}function G3(t,e){return vt(Ir.count($e(t)-1,t),e,2)}function ep(t){var e=t.getUTCDay();return e>=4||e===0?Jn(t):Jn.ceil(t)}function V3(t,e){return t=ep(t),vt(Jn.count($e(t),t)+($e(t).getUTCDay()===4),e,2)}function X3(t){return t.getUTCDay()}function j3(t,e){return vt(Ei.count($e(t)-1,t),e,2)}function Z3(t,e){return vt(t.getUTCFullYear()%100,e,2)}function K3(t,e){return t=ep(t),vt(t.getUTCFullYear()%100,e,2)}function Q3(t,e){return vt(t.getUTCFullYear()%1e4,e,4)}function J3(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Jn(t):Jn.ceil(t),vt(t.getUTCFullYear()%1e4,e,4)}function t6(){return"+0000"}function $c(){return"%"}function Sc(t){return+t}function kc(t){return Math.floor(+t/1e3)}var dr,Su,Qi;e6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e6(t){return dr=e3(t),Su=dr.format,dr.parse,Qi=dr.utcFormat,dr.utcParse,dr}function n6(t){return new Date(t)}function r6(t){return t instanceof Date?+t:+new Date(+t)}function ku(t,e,n,r,i,o,a,f,s,u){var l=N0(),h=l.invert,c=l.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),b=u("%a %d"),y=u("%b %d"),$=u("%B"),_=u("%Y");function M(w){return(s(w)<w?d:f(w)<w?p:a(w)<w?m:o(w)<w?g:r(w)<w?i(w)<w?b:y:n(w)<w?$:_)(w)}return l.invert=function(w){return new Date(h(w))},l.domain=function(w){return arguments.length?c(Array.from(w,r6)):c().map(n6)},l.ticks=function(w){var v=c();return t(v[0],v[v.length-1],w??10)},l.tickFormat=function(w,v){return v==null?M:u(v)},l.nice=function(w){var v=c();return(!w||typeof w.range!="function")&&(w=e(v[0],v[v.length-1],w??10)),w?c(F0(v,w)):l},l.copy=function(){return Gi(l,ku(t,e,n,r,i,o,a,f,s,u))},l}function i6(){return Ge.apply(ku(Jv,t3,Me,Zi,Rr,nr,Ga,Wa,Le,Su).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function o6(){return Ge.apply(ku(Qv,K0,$e,Ki,Ir,Va,ji,Xi,Le,Qi).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ja(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Za(){var t=0,e=.5,n=1,r=1,i,o,a,f,s,u=de,l,h=!1,c;function d(m){return isNaN(m=+m)?c:(m=.5+((m=+l(m))-o)*(r*m<r*o?f:s),u(h?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,i=l(t=+t),o=l(e=+e),a=l(n=+n),f=i===o?0:.5/(o-i),s=o===a?0:.5/(a-o),r=o<i?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(h=!!m,d):h},d.interpolator=function(m){return arguments.length?(u=m,d):u};function p(m){return function(g){var b,y,$;return arguments.length?([b,y,$]=g,u=Ia(m,[b,y,$]),d):[u(0),u(.5),u(1)]}}return d.range=p(Yi),d.rangeRound=p(hu),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return l=m,i=m(t),o=m(e),a=m(n),f=i===o?0:.5/(o-i),s=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function np(){var t=Vi(Za()(de));return t.copy=function(){return ja(t,np())},qa.apply(t,arguments)}function rp(){var t=L0(Za()).domain([.1,1,10]);return t.copy=function(){return ja(t,rp()).base(t.base())},qa.apply(t,arguments)}function ip(){var t=I0(Za());return t.copy=function(){return ja(t,ip()).constant(t.constant())},qa.apply(t,arguments)}function op(){var t=O0(Za());return t.copy=function(){return ja(t,op()).exponent(t.exponent())},qa.apply(t,arguments)}function pt(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const a6=pt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),f6=pt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),s6=pt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),u6=pt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),l6=pt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),c6=pt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),h6=pt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),d6=pt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),p6=pt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),m6=pt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Mt=t=>o_(t[t.length-1]);var ap=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(pt);const fp=Mt(ap);var sp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(pt);const up=Mt(sp);var lp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(pt);const cp=Mt(lp);var hp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(pt);const dp=Mt(hp);var Hs=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(pt);const pa=Mt(Hs);var pp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(pt);const mp=Mt(pp);var Ys=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(pt);const ma=Mt(Ys);var gp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(pt);const bp=Mt(gp);var yp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(pt);const _p=Mt(yp);var wp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(pt);const vp=Mt(wp);var xp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(pt);const Mp=Mt(xp);var $p=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(pt);const Sp=Mt($p);var kp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(pt);const Tp=Mt(kp);var Cp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(pt);const Ep=Mt(Cp);var Ap=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(pt);const Np=Mt(Ap);var Dp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(pt);const Fp=Mt(Dp);var Lp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(pt);const Rp=Mt(Lp);var Ip=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(pt);const Pp=Mt(Ip);var Op=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(pt);const Up=Mt(Op);var Bp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(pt);const zp=Mt(Bp);var qp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(pt);const Hp=Mt(qp);var Yp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(pt);const Wp=Mt(Yp);var Gp=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(pt);const Vp=Mt(Gp);var Xp=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(pt);const jp=Mt(Xp);var Zp=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(pt);const Kp=Mt(Zp);var Qp=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(pt);const Jp=Mt(Qp);var t1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(pt);const e1=Mt(t1);function n1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const r1=du(ze(300,.5,0),ze(-240,.5,1));var i1=du(ze(-100,.75,.35),ze(80,1.5,.8)),o1=du(ze(260,.75,.35),ze(80,1.5,.8)),Mo=ze();function a1(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Mo.h=360*t-100,Mo.s=1.5-1.5*e,Mo.l=.8-.9*e,Mo+""}var $o=Mn(),g6=Math.PI/3,b6=Math.PI*2/3;function f1(t){var e;return t=(.5-t)*Math.PI,$o.r=255*(e=Math.sin(t))*e,$o.g=255*(e=Math.sin(t+g6))*e,$o.b=255*(e=Math.sin(t+b6))*e,$o+""}function s1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function Ka(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const u1=Ka(pt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var l1=Ka(pt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),c1=Ka(pt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),h1=Ka(pt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function pr(t){return function(){return t}}const d1=Math.cos,Tu=Math.min,ga=Math.sin,Dt=Math.sqrt,Tc=1e-12,ba=Math.PI,Qa=2*ba;function y6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Xd(e)}function _6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function p1(t){this._context=t}p1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ja(t){return new p1(t)}function w6(t){return t[0]}function v6(t){return t[1]}function x6(t,e){var n=pr(!0),r=null,i=Ja,o=null,a=y6(f);t=typeof t=="function"?t:t===void 0?w6:pr(t),e=typeof e=="function"?e:e===void 0?v6:pr(e);function f(s){var u,l=(s=_6(s)).length,h,c=!1,d;for(r==null&&(o=i(d=a())),u=0;u<=l;++u)!(u<l&&n(h=s[u],u,s))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,u,s),+e(h,u,s));if(d)return o=null,d+""||null}return f.x=function(s){return arguments.length?(t=typeof s=="function"?s:pr(+s),f):t},f.y=function(s){return arguments.length?(e=typeof s=="function"?s:pr(+s),f):e},f.defined=function(s){return arguments.length?(n=typeof s=="function"?s:pr(!!s),f):n},f.curve=function(s){return arguments.length?(i=s,r!=null&&(o=i(r)),f):i},f.context=function(s){return arguments.length?(s==null?r=o=null:o=i(r=s),f):r},f}class m1{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function M6(t){return new m1(t,!0)}function $6(t){return new m1(t,!1)}const S6=Dt(3),g1={draw(t,e){const n=Dt(e+Tu(e/28,.75))*.59436,r=n/2,i=r*S6;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},Ai={draw(t,e){const n=Dt(e/ba);t.moveTo(n,0),t.arc(0,0,n,0,Qa)}},b1={draw(t,e){const n=Dt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},y1=Dt(1/3),k6=y1*2,_1={draw(t,e){const n=Dt(e/k6),r=n*y1;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},w1={draw(t,e){const n=Dt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},v1={draw(t,e){const n=Dt(e-Tu(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},x1={draw(t,e){const n=Dt(e),r=-n/2;t.rect(r,r,n,n)}},M1={draw(t,e){const n=Dt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},T6=.8908130915292852,$1=ga(ba/10)/ga(7*ba/10),C6=ga(Qa/10)*$1,E6=-d1(Qa/10)*$1,S1={draw(t,e){const n=Dt(e*T6),r=C6*n,i=E6*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=Qa*o/5,f=d1(a),s=ga(a);t.lineTo(s*n,-f*n),t.lineTo(f*r-s*i,s*r+f*i)}t.closePath()}},zf=Dt(3),k1={draw(t,e){const n=-Dt(e/(zf*3));t.moveTo(0,n*2),t.lineTo(-zf*n,-n),t.lineTo(zf*n,-n),t.closePath()}},A6=Dt(3),T1={draw(t,e){const n=Dt(e)*.6824,r=n/2,i=n*A6/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},fe=-.5,se=Dt(3)/2,Ws=1/Dt(12),N6=(Ws/2+1)*3,C1={draw(t,e){const n=Dt(e/N6),r=n/2,i=n*Ws,o=r,a=n*Ws+n,f=-o,s=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(f,s),t.lineTo(fe*r-se*i,se*r+fe*i),t.lineTo(fe*o-se*a,se*o+fe*a),t.lineTo(fe*f-se*s,se*f+fe*s),t.lineTo(fe*r+se*i,fe*i-se*r),t.lineTo(fe*o+se*a,fe*a-se*o),t.lineTo(fe*f+se*s,fe*s-se*f),t.closePath()}},E1={draw(t,e){const n=Dt(e-Tu(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},D6=[Ai,b1,_1,x1,S1,k1,C1],F6=[Ai,v1,E1,T1,g1,M1,w1];function $n(){}function ya(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function tf(t){this._context=t}tf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ya(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ya(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function L6(t){return new tf(t)}function A1(t){this._context=t}A1.prototype={areaStart:$n,areaEnd:$n,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ya(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function R6(t){return new A1(t)}function N1(t){this._context=t}N1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ya(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function I6(t){return new N1(t)}function D1(t,e){this._basis=new tf(t),this._beta=e}D1.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],o=t[n]-r,a=e[n]-i,f=-1,s;++f<=n;)s=f/n,this._basis.point(this._beta*t[f]+(1-this._beta)*(r+s*o),this._beta*e[f]+(1-this._beta)*(i+s*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const P6=function t(e){function n(r){return e===1?new tf(r):new D1(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function _a(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Cu(t,e){this._context=t,this._k=(1-e)/6}Cu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_a(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:_a(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const O6=function t(e){function n(r){return new Cu(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Eu(t,e){this._context=t,this._k=(1-e)/6}Eu.prototype={areaStart:$n,areaEnd:$n,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_a(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const U6=function t(e){function n(r){return new Eu(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Au(t,e){this._context=t,this._k=(1-e)/6}Au.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_a(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const B6=function t(e){function n(r){return new Au(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Nu(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Tc){var f=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*f-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*f-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>Tc){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function F1(t,e){this._context=t,this._alpha=e}F1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Nu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const z6=function t(e){function n(r){return e?new F1(r,e):new Cu(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function L1(t,e){this._context=t,this._alpha=e}L1.prototype={areaStart:$n,areaEnd:$n,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Nu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const q6=function t(e){function n(r){return e?new L1(r,e):new Eu(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function R1(t,e){this._context=t,this._alpha=e}R1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Nu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const H6=function t(e){function n(r){return e?new R1(r,e):new Au(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function I1(t){this._context=t}I1.prototype={areaStart:$n,areaEnd:$n,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Y6(t){return new I1(t)}function Cc(t){return t<0?-1:1}function Ec(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),f=(o*i+a*r)/(r+i);return(Cc(o)+Cc(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(f))||0}function Ac(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qf(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,f=(o-r)/3;t._context.bezierCurveTo(r+f,i+f*e,o-f,a-f*n,o,a)}function wa(t){this._context=t}wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qf(this,this._t0,Ac(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qf(this,Ac(this,n=Ec(this,t,e)),n);break;default:qf(this,this._t0,n=Ec(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function P1(t){this._context=new O1(t)}(P1.prototype=Object.create(wa.prototype)).point=function(t,e){wa.prototype.point.call(this,e,t)};function O1(t){this._context=t}O1.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function W6(t){return new wa(t)}function G6(t){return new P1(t)}function U1(t){this._context=t}U1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Nc(t),i=Nc(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Nc(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function V6(t){return new U1(t)}function ef(t,e){this._context=t,this._t=e}ef.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function X6(t){return new ef(t,.5)}function j6(t){return new ef(t,0)}function Z6(t){return new ef(t,1)}function hi(t,e,n){this.k=t,this.x=e,this.y=n}hi.prototype={constructor:hi,scale:function(t){return t===1?this:new hi(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new hi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};hi.prototype;function Sn(t){return t!=null&&!Number.isNaN(t)}function Se(t,e){return+Sn(e)-+Sn(t)||Zt(t,e)}function va(t,e){return+Sn(e)-+Sn(t)||zi(t,e)}function Du(t){return t!=null&&`${t}`!=""}function B1(t){return isFinite(t)?t:NaN}function nf(t){return t>0&&isFinite(t)?t:NaN}function Fu(t){return t<0&&isFinite(t)?t:NaN}function K6(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${Q6(t.getUTCFullYear())}-${Je(t.getUTCMonth()+1,2)}-${Je(t.getUTCDate(),2)}${n||r||i||o?`T${Je(n,2)}:${Je(r,2)}${i||o?`:${Je(i,2)}${o?`.${Je(o,3)}`:""}`:""}Z`:""}`}function Q6(t){return t<0?`-${Je(-t,6)}`:t>9999?`+${Je(t,6)}`:Je(t,4)}function Je(t,e){return`${t}`.padStart(e,"0")}const J6=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function z1(t,e){return J6.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const _r=1e3,Un=_r*60,Bn=Un*60,un=Bn*24,Ne=un*7,Yn=un*30,bn=un*365,Hf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",_r],["5 seconds",5*_r],["15 seconds",15*_r],["30 seconds",30*_r],["minute",Un],["5 minutes",5*Un],["15 minutes",15*Un],["30 minutes",30*Un],["hour",Bn],["3 hours",3*Bn],["6 hours",6*Bn],["12 hours",12*Bn],["day",un],["2 days",2*un],["week",Ne],["2 weeks",2*Ne],["month",Yn],["3 months",3*Yn],["6 months",6*Yn],["year",bn],["2 years",2*bn],["5 years",5*bn],["10 years",10*bn],["20 years",20*bn],["50 years",50*bn],["100 years",100*bn]],Lu=new Map([["second",_r],["minute",Un],["hour",Bn],["day",un],["monday",Ne],["tuesday",Ne],["wednesday",Ne],["thursday",Ne],["friday",Ne],["saturday",Ne],["sunday",Ne],["week",Ne],["month",Yn],["year",bn]]),q1=new Map([["second",Le],["minute",Wa],["hour",Ga],["day",nr],["monday",Ci],["tuesday",q0],["wednesday",H0],["thursday",Qn],["friday",Y0],["saturday",W0],["sunday",Rr],["week",Rr],["month",Zi],["year",Me]]),H1=new Map([["second",Le],["minute",Xi],["hour",ji],["day",Xa],["monday",Ei],["tuesday",G0],["wednesday",V0],["thursday",Jn],["friday",X0],["saturday",j0],["sunday",Ir],["week",Ir],["month",Ki],["year",$e]]),Ji=Symbol("intervalDuration"),rf=Symbol("intervalType");for(const[t,e]of q1)e[Ji]=Lu.get(t),e[rf]="time";for(const[t,e]of H1)e[Ji]=Lu.get(t),e[rf]="utc";const t5=[["year",$e,"utc"],["year",Me,"time"],["month",Ki,"utc"],["month",Zi,"time"],["day",Xa,"utc",6*Yn],["day",nr,"time",6*Yn],["hour",ji,"utc",3*un],["minute",Xi,"utc",6*Bn],["second",Le,"utc",30*Un]];function Y1(t,e,n){let r=`${t}`.toLowerCase();r.endsWith("s")&&(r=r.slice(0,-1));let i=1;const o=/^(?:(\d+)\s+)/.exec(r);switch(o&&(r=r.slice(o[0].length),i=+o[1]),r){case"quarter":r="month",i*=3;break;case"half":r="month",i*=6;break}let a=e.get(r);if(!a)throw new Error(`unknown interval: ${t}`);if(i>1){if(!a.every)throw new Error(`non-periodic interval: ${r}`);a=a.every(i),a[Ji]=Lu.get(r)*i,a[rf]=n}return a}function W1(t){return Y1(t,q1,"time")}function Ru(t){return Y1(t,H1,"utc")}function Dc(t,e){if(!(e>1))return;const n=t[Ji];if(!Hf.some(([,i])=>i===n)||n%un===0&&un<n&&n<Yn)return;const[r]=Hf[Sa(([,i])=>Math.log(i)).center(Hf,Math.log(n*e))];return(t[rf]==="time"?W1:Ru)(r)}function Fc(t,e,n){const r=e==="time"?Su:Qi;if(n==null)return r(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=e5(n);switch(t){case"millisecond":return mr(r(".%L"),r(":%M:%S"),i);case"second":return mr(r(":%S"),r("%-I:%M"),i);case"minute":return mr(r("%-I:%M"),r("%p"),i);case"hour":return mr(r("%-I %p"),r("%b %-d"),i);case"day":return mr(r("%-d"),r("%b"),i);case"month":return mr(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function e5(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function n5(t,e){const n=ge(X2(t,(r,i)=>Math.abs(i-r)));if(n<1e3)return Fc("millisecond","utc",e);for(const[r,i,o,a]of t5){if(n>a||r==="hour"&&!n)break;if(t.every(f=>i.floor(f)>=f))return Fc(r,o,e)}}function mr(t,e,n){return(r,i,o)=>{const a=t(r,i),f=e(r,i),s=i-Or(o);return i!==s&&o[s]!==void 0&&f===e(o[s],s)?a:n(a,f)}}const Ni=Object.getPrototypeOf(Uint8Array),r5=Object.prototype.toString,G1=Symbol("reindex");function Rt(t,e,n){const r=typeof e;return r==="string"?Lc(t,V1(e),n):r==="function"?Lc(t,e,n):r==="number"||e instanceof Date||r==="boolean"?At(t,to(e),n):typeof(e==null?void 0:e.transform)=="function"?Rc(e.transform(t),n):i5(Rc(e,n),t==null?void 0:t[G1])}function i5(t,e){return e?Uu(t,e):t}function Lc(t,e,n){return At(t,(n==null?void 0:n.prototype)instanceof Ni?o5(e):e,n)}function Rc(t,e){return e===void 0?ae(t):t instanceof e?t:e.prototype instanceof Ni&&!(t instanceof Ni)?e.from(t,Ou):e.from(t)}function o5(t){return(e,n)=>Ou(t(e,n))}const Uo=[null],V1=t=>e=>e[t],Iu={transform:cn},zt={transform:t=>t},a5=()=>1,f5=()=>!0,Yt=t=>t==null?t:`${t}`,St=t=>t==null?t:+t,Pu=t=>t?t[0]:void 0,Gs=t=>t?t[1]:void 0,to=t=>()=>t;function s5(t){const e=+`${t}`.slice(1)/100;return(n,r)=>Tr(n,e,r)}function Re(t){return t instanceof Ni?t:At(t,Ou,Float64Array)}function Ou(t){return t==null?NaN:Number(t)}function u5(t){return At(t,X1)}function X1(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?z1(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function ln(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:ff(t)?[void 0,t]:[t,void 0]}function Wt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function j1(t,e,n){if(t!=null)return Te(t,e,n)}function Te(t,e,n){const r=`${t}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${e}: ${t}`);return r}function ae(t){return t==null||t instanceof Array||t instanceof Ni?t:Array.from(t)}function At(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Di(t,e=Array){return t instanceof e?t.slice():e.from(t)}function l5({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function Z1({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function c5(t){return l5(t)||Z1(t)||t.interval!==void 0}function Cn(t){return(t==null?void 0:t.toString)===r5}function Vs(t){return Cn(t)&&(t.type!==void 0||t.domain!==void 0)}function of(t){return Cn(t)&&typeof t.transform!="function"}function Pr(t){return of(t)&&t.value===void 0&&t.channel===void 0}function h5(t,e,n,r=zt){return e===void 0&&n===void 0?(e=0,n=t===void 0?r:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function af(t,e){return t===void 0&&e===void 0?[Pu,Gs]:[t,e]}function K1({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=ln(e)),t===void 0&&([t]=ln(n)),t}function cn(t){const e=t.length,n=new Uint32Array(e);for(let r=0;r<e;++r)n[r]=r;return n}function Uu(t,e){return At(e,n=>t[n],t.constructor)}function d5(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function zn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function p5(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function xa(t){let e;return[{transform:()=>e,label:or(t)},n=>e=n]}function Ke(t){return t==null?[t]:xa(t)}function or(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function Xs(t,e){return{transform(n){const r=t.transform(n),i=e.transform(n);return Qt(r)||Qt(i)?At(r,(o,a)=>new Date((+r[a]+ +i[a])/2)):At(r,(o,a)=>(+r[a]+ +i[a])/2,Float64Array)},label:t.label}}function Q1(t,e){const n=J1(e==null?void 0:e.interval,e==null?void 0:e.type);return n?At(t,n):t}function J1(t,e){const n=Bu(t,e);return n&&(r=>Sn(r)?n.floor(r):r)}function Bu(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>cs(Math.ceil(r*n),i*n).map(o=>o/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>cs(Math.ceil(r/n),i/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?W1:Ru)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function Vr(t,e){if(t=Bu(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function m5(t,e){if(t=Vr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function g5(t){return wr(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function wr(t){return typeof(t==null?void 0:t.range)=="function"}function eo(t){return t===void 0||of(t)?t:{value:t}}function b5(t){return t==null?null:{transform:e=>Rt(e,t,Float64Array),label:or(t)}}function En(t){return t&&typeof t[Symbol.iterator]=="function"}function tm(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Ic(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function Qt(t){for(const e of t)if(e!=null)return e instanceof Date}function y5(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&z1(e)}function _5(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function w5(t){for(const e of t)if(e!=null)return typeof e=="number"}function Yf(t,e){let n;for(const r of t)if(r!=null){if(!e(r))return!1;n=!0}return n}const v5=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function ff(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||v5.has(t))}function x5(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function Xt(t){return t==null||Fi(t)}function Fi(t){return/^\s*none\s*$/i.test(t)}function M5(t){return/^\s*round\s*$/i.test(t)}function em(t,e){return j1(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function sf(t="middle"){return em(t,"frameAnchor")}function Or(t){if(t==null)return;const e=t[0],n=t[t.length-1];return zi(e,n)}function $5(t={},...e){let n=t;for(const r of e)for(const i in r)if(n[i]===void 0){const o=r[i];n===t?n={...n,[i]:o}:n[i]=o}return n}function S5(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[r,n]}))}function nm(t){return En(t)?S5(t):t}const Ie=Symbol("position"),hn=Symbol("color"),no=Symbol("radius"),ro=Symbol("length"),io=Symbol("opacity"),uf=Symbol("symbol"),rm=Symbol("projection"),Et=new Map([["x",Ie],["y",Ie],["fx",Ie],["fy",Ie],["r",no],["color",hn],["opacity",io],["symbol",uf],["length",ro],["projection",rm]]);function k5(t){return t===Ie||t===rm}function T5(t){return t===Ie||t===no||t===ro||t===io}const C5=Math.sqrt(3),E5=2/C5,A5={draw(t,e){const n=Math.sqrt(e/Math.PI),r=n*E5,i=r/2;t.moveTo(0,r),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(0,-r),t.lineTo(-n,-i),t.lineTo(-n,i),t.closePath()}},zu=new Map([["asterisk",g1],["circle",Ai],["cross",b1],["diamond",_1],["diamond2",w1],["hexagon",A5],["plus",v1],["square",x1],["square2",M1],["star",S1],["times",E1],["triangle",k1],["triangle2",T1],["wye",C1]]);function qu(t){return t&&typeof t.draw=="function"}function N5(t){return qu(t)?!0:typeof t!="string"?!1:zu.has(t.toLowerCase())}function Hu(t){if(t==null||qu(t))return t;const e=zu.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function D5(t){if(t==null||qu(t))return[void 0,t];if(typeof t=="string"){const e=zu.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function lf({filter:t,sort:e,reverse:n,transform:r,initializer:i,...o}={},a){if(r===void 0&&(t!=null&&(r=im(t)),e!=null&&!Pr(e)&&(r=Wf(r,Yu(e))),n&&(r=Wf(r,om))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||Pr(e))&&{sort:e},transform:Wf(r,a)}}function Ur({filter:t,sort:e,reverse:n,initializer:r,...i}={},o){return r===void 0&&(t!=null&&(r=im(t)),e!=null&&!Pr(e)&&(r=Gf(r,Yu(e))),n&&(r=Gf(r,om))),{...i,...(e===null||Pr(e))&&{sort:e},initializer:Gf(r,o)}}function Wf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i){return{data:n,facets:r}=t.call(this,n,r,i),e.call(this,ae(n),r,i)}}function Gf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,r,i,...o){let a,f,s,u,l,h;return{data:f=n,facets:s=r,channels:a}=t.call(this,n,r,i,...o),{data:l=f,facets:h=s,channels:u}=e.call(this,f,s,{...i,...a},...o),{data:l,facets:h,channels:{...a,...u}}}}function F5(t,e){return(t.initializer!=null?Ur:lf)(t,e)}function im(t){return(e,n)=>{const r=Rt(e,t);return{data:e,facets:n.map(i=>i.filter(o=>r[o]))}}}function om(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function L5(t,{sort:e,...n}={}){return{...(of(t)&&t.channel!==void 0?Ur:F5)(n,Yu(t)),sort:Pr(e)?e:null}}function Yu(t){return(typeof t=="function"&&t.length!==1?R5:I5)(t)}function R5(t){return(e,n)=>{const r=(i,o)=>t(e[i],e[o]);return{data:e,facets:n.map(i=>i.slice().sort(r))}}}function I5(t){let e,n;({channel:e,value:t,order:n}={...eo(t)});const r=e==null?void 0:e.startsWith("-");if(r&&(e=e.slice(1)),n===void 0&&(n=r?va:Se),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Se;break;case"descending":n=va;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,a)=>{let f;if(e===void 0)f=Rt(i,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(f=a[e],!f)return{};f=f.value}const s=(u,l)=>n(f[u],f[l]);return{data:i,facets:o.map(u=>u.slice().sort(s))}}}function So(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function P5(t,e,n=am){const r=Object.entries(t);return e.title!=null&&t.title===void 0&&r.push(["title",Y5]),e.href!=null&&t.href===void 0&&r.push(["href",Gu]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?O5(i):n(i,o,e))}function am(t,e,n,r=fm){let i;Cn(e)&&"reduce"in e&&(i=e.scale,e=e.reduce);const o=r(t,e,n),[a,f]=xa(o.label);let s;return{name:t,output:i===void 0?a:{value:a,scale:i},initialize(u){o.initialize(u),s=f([])},scope(u,l){o.scope(u,l)},reduce(u,l){s.push(o.reduce(u,l))}}}function O5(t){return{name:t,initialize(){},scope(){},reduce(){}}}function fm(t,e,n,r=Wu){const i=p5(t,n),o=r(e,i);let a,f;return{label:or(o===Ma?null:i,o.label),initialize(s){a=i===void 0?s:Rt(s,i),o.scope==="data"&&(f=o.reduceIndex(cn(s),a))},scope(s,u){o.scope===s&&(f=o.reduceIndex(u,a))},reduce(s,u){return o.scope==null?o.reduceIndex(s,a,u):o.reduceIndex(s,a,f,u)}}}function Pc(t,e){return e?vi(Ea(t,n=>e[n]),Pu):[[,t]]}function Wu(t,e,n=U5){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&Cn(t))return q5(t);if(typeof t=="function")return H5(t);if(/^p\d{2}$/i.test(t))return Qe(s5(t));switch(`${t}`.toLowerCase()){case"first":return Gu;case"last":return W5;case"identity":return sm;case"count":return Ma;case"distinct":return G5;case"sum":return e==null?Ma:V5;case"proportion":return Uc(e,"data");case"proportion-facet":return Uc(e,"facet");case"deviation":return Qe(Ta);case"min":return Qe(on);case"min-index":return Qe(H2);case"max":return Qe(ge);case"max-index":return Qe(q2);case"mean":return Oc(Na);case"median":return Oc(ls);case"variance":return Qe(iu);case"mode":return Qe(V2)}return n(t)}function U5(t){throw new Error(`invalid reduce: ${t}`)}function B5(t,e){for(const n in e){const r=e[n];if(r!==void 0&&!t.some(i=>i.name===n))return r}}function z5(t,e,n){if(e){const r=e.output.transform(),i=(o,a)=>Se(r[o],r[a]);t.forEach(o=>o.sort(i))}n&&t.forEach(r=>r.reverse())}function q5(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function H5(t){return{reduceIndex(e,n,r){return t(Uu(n,e),r)}}}function Qe(t){return{reduceIndex(e,n){return t(e,r=>n[r])}}}function Oc(t){return{reduceIndex(e,n){const r=t(e,i=>n[i]);return Qt(n)?new Date(r):r}}}const sm={reduceIndex(t,e){return Uu(e,t)}},Gu={reduceIndex(t,e){return e[t[0]]}},Y5={reduceIndex(t,e){const r=vi(xr(t,o=>o.length,o=>e[o]),Gs),i=r.slice(-5).reverse();if(i.length<r.length){const o=r.slice(0,-4);i[4]=[` ${o.length.toLocaleString("en-US")} more`,xn(o,Gs)]}return i.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},W5={reduceIndex(t,e){return e[t[t.length-1]]}},Ma={label:"Frequency",reduceIndex(t){return t.length}},G5={label:"Distinct",reduceIndex(t,e){const n=new Ca;for(const r of t)n.add(e[r]);return n.size}},V5=Qe(xn);function Uc(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:e,reduceIndex:(n,r,i=1)=>xn(n,o=>r[o])/i}}function Li(t,{scale:e,type:n,value:r,filter:i,hint:o,label:a=or(r)},f){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),um(f,{scale:e,type:n,value:Rt(t,r),label:a,filter:i,hint:o})}function X5(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,Li(e,r,n)]))}function j5(t,e){const n=Object.fromEntries(Object.entries(t).map(([r,{scale:i,value:o}])=>{const a=i==null?null:e[i];return[r,a==null?o:At(o,a)]}));return n.channels=t,n}function um(t,e){const{scale:n,value:r}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&Yf(r,ff)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&Yf(r,x5)?null:"opacity";break;case"symbol":n!==!0&&Yf(r,N5)?(e.scale=null,e.value=At(r,Hu)):e.scale="symbol";break;default:e.scale=Et.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Et.has(n))throw new Error(`unknown scale: ${n}`);return e}function Z5(t,e,n,r,i){const{order:o,reverse:a,reduce:f=!0,limit:s}=i;for(const u in i){if(!Et.has(u))continue;let{value:l,order:h=o,reverse:c=a,reduce:d=f,limit:p=s}=eo(i[u]);const m=l==null?void 0:l.startsWith("-");if(m&&(l=l.slice(1)),h=h===void 0?m!==(l==="width"||l==="height")?cm:lm:J5(h),d==null||d===!1)continue;const g=u==="fx"||u==="fy"?Q5(e,r[u]):K5(n,u);if(!g)throw new Error(`missing channel for scale: ${u}`);const b=g.value,[y=0,$=1/0]=En(p)?p:p<0?[p]:[0,p];if(l==null)g.domain=()=>{let _=Array.from(new Ca(b));return c&&(_=_.reverse()),(y!==0||$!==1/0)&&(_=_.slice(y,$)),_};else{const _=l==="data"?t:l==="height"?Bc(n,"y1","y2"):l==="width"?Bc(n,"x1","x2"):js(n,l,l==="y"?"y2":l==="x"?"x2":void 0),M=Wu(d===!0?"max":d,_);g.domain=()=>{let w=I2(cn(b),v=>M.reduceIndex(v,_),v=>b[v]);return h&&w.sort(h),c&&w.reverse(),(y!==0||$!==1/0)&&(w=w.slice(y,$)),w.map(Pu)}}}}function K5(t,e){for(const n in t){const r=t[n];if(r.scale===e)return r}}function Q5(t,e){const n=t.original;if(n===t)return e;const r=e.value,i=e.value=[];for(let o=0;o<n.length;++o){const a=r[n[o][0]];for(const f of t[o])i[f]=a}return e}function Bc(t,e,n){const r=js(t,e),i=js(t,n);return At(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function js(t,e,n){let r=t[e];if(!r&&n!==void 0&&(r=t[n]),r)return r.value;throw new Error(`missing channel: ${e}`)}function J5(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return lm;case"descending":return cm}throw new Error(`invalid order: ${t}`)}function lm([t,e],[n,r]){return Se(e,r)||Se(t,n)}function cm([t,e],[n,r]){return va(e,r)||Se(t,n)}function zc(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function t8(t){let e,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,o)=>i!==r[o]))&&(n=r,e=t(...r)),e)}const e8=t8(t=>new Intl.NumberFormat(t));function n8(t="en-US"){const e=e8(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function r8(t){return K6(t,"Invalid Date")}function i8(t="en-US"){const e=n8(t);return n=>(n instanceof Date?r8:typeof n=="number"?e:Yt)(n)}const tr=i8();let Zs=0,Ks;function o8(){const t=Zs;return Zs=0,Ks=void 0,t}function vn(t){t!==Ks&&(Ks=t,console.warn(t),++Zs)}const jt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let a8=0;function qc(){return`plot-clip-${++a8}`}function f8(t,{title:e,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:f,fillOpacity:s,stroke:u,strokeWidth:l,strokeOpacity:h,strokeLinejoin:c,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:g,opacity:b,mixBlendMode:y,imageFilter:$,paintOrder:_,pointerEvents:M,shapeRendering:w,channels:v},{ariaLabel:S,fill:C="currentColor",fillOpacity:N,stroke:T="none",strokeOpacity:R,strokeWidth:P,strokeLinecap:q,strokeLinejoin:k,strokeMiterlimit:B,paintOrder:O}){C===null&&(f=null,s=null),T===null&&(u=null,h=null),Xt(C)?!Xt(T)&&(!Xt(f)||v!=null&&v.fill)&&(T="none"):Xt(T)&&(!Xt(u)||v!=null&&v.stroke)&&(C="none");const[X,W]=ln(f,C),[H,D]=Wt(s,N),[z,Y]=ln(u,T),[J,Z]=Wt(h,R),[K,U]=Wt(b);Fi(Y)||(l===void 0&&(l=P),d===void 0&&(d=q),c===void 0&&(c=k),p===void 0&&!M5(c)&&(p=B),!Fi(W)&&_===void 0&&(_=O));const[I,E]=Wt(l);return C!==null&&(t.fill=Ot(W,"currentColor"),t.fillOpacity=ri(D,1)),T!==null&&(t.stroke=Ot(Y,"none"),t.strokeWidth=ri(E,1),t.strokeOpacity=ri(Z,1),t.strokeLinejoin=Ot(c,"miter"),t.strokeLinecap=Ot(d,"butt"),t.strokeMiterlimit=ri(p,4),t.strokeDasharray=Ot(m,"none"),t.strokeDashoffset=Ot(g,"0")),t.target=Yt(a),t.ariaLabel=Yt(S),t.ariaDescription=Yt(i),t.ariaHidden=Yt(o),t.opacity=ri(U,1),t.mixBlendMode=Ot(y,"normal"),t.imageFilter=Ot($,"none"),t.paintOrder=Ot(_,"normal"),t.pointerEvents=Ot(M,"auto"),t.shapeRendering=Ot(w,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:X,scale:"auto",optional:!0},fillOpacity:{value:H,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:J,scale:"auto",optional:!0},strokeWidth:{value:I,optional:!0},opacity:{value:K,scale:"auto",optional:!0}}}function s8(t,e){e&&t.filter(n=>Du(e[n])).append("title").call(l8,e)}function u8(t,e){e&&t.filter(([n])=>Du(e[n])).append("title").call(c8,e)}function l8(t,e){e&&t.text(n=>tr(e[n]))}function c8(t,e){e&&t.text(([n])=>tr(e[n]))}function dn(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:s,strokeWidth:u,opacity:l,href:h}){r&&lt(t,"aria-label",c=>r[c]),o&&lt(t,"fill",c=>o[c]),a&&lt(t,"fill-opacity",c=>a[c]),f&&lt(t,"stroke",c=>f[c]),s&&lt(t,"stroke-opacity",c=>s[c]),u&&lt(t,"stroke-width",c=>u[c]),l&&lt(t,"opacity",c=>l[c]),h&&dm(t,c=>h[c],e),n||s8(t,i)}function h8(t,{target:e,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:f,strokeOpacity:s,strokeWidth:u,opacity:l,href:h}){r&&lt(t,"aria-label",([c])=>r[c]),o&&lt(t,"fill",([c])=>o[c]),a&&lt(t,"fill-opacity",([c])=>a[c]),f&&lt(t,"stroke",([c])=>f[c]),s&&lt(t,"stroke-opacity",([c])=>s[c]),u&&lt(t,"stroke-width",([c])=>u[c]),l&&lt(t,"opacity",([c])=>l[c]),h&&dm(t,([c])=>h[c],e),n||u8(t,i)}function d8({ariaLabel:t,title:e,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:f,href:s},{tip:u}){return[t,u?void 0:e,n,r,i,o,a,f,s].filter(l=>l!==void 0)}function p8(t,e,n){const r=Ea(t,i=>e[i]);return n===void 0&&r.size>1+t.length>>1&&vn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*m8(t,e,n,r){const{z:i}=n,{z:o}=r,a=d8(r,n),f=[...e,...a];for(const s of o?p8(t,o,i):[t]){let u,l;t:for(const h of s){for(const c of f)if(!Sn(c[h])){l&&l.push(-1);continue t}if(u===void 0){l&&(yield l),u=a.map(c=>zn(c[h])),l=[h];continue}l.push(h);for(let c=0;c<a.length;++c)if(zn(a[c][h])!==u[c]){yield l,u=a.map(p=>zn(p[h])),l=[h];continue t}}l&&(yield l)}}function hm(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=Te(t,"clip",["frame","sphere"])),t}function g8(t,e,n,r){let i;const{clip:o=r.clip}=e;switch(o){case"frame":{const{width:a,height:f,marginLeft:s,marginRight:u,marginTop:l,marginBottom:h}=n,c=qc();i=`url(#${c})`,t=Pt("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",c).append("rect").attr("x",s).attr("y",l).attr("width",a-u-s).attr("height",f-l-h)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=r;if(!a)throw new Error('the "sphere" clip option requires a projection');const f=qc();i=`url(#${f})`,t.append("clipPath").attr("id",f).append("path").attr("d",Ua(a)({type:"Sphere"}));break}}lt(t,"aria-label",e.ariaLabel),lt(t,"aria-description",e.ariaDescription),lt(t,"aria-hidden",e.ariaHidden),lt(t,"clip-path",i)}function Ce(t,e,n,r){g8(t,e,n,r),lt(t,"fill",e.fill),lt(t,"fill-opacity",e.fillOpacity),lt(t,"stroke",e.stroke),lt(t,"stroke-width",e.strokeWidth),lt(t,"stroke-opacity",e.strokeOpacity),lt(t,"stroke-linejoin",e.strokeLinejoin),lt(t,"stroke-linecap",e.strokeLinecap),lt(t,"stroke-miterlimit",e.strokeMiterlimit),lt(t,"stroke-dasharray",e.strokeDasharray),lt(t,"stroke-dashoffset",e.strokeDashoffset),lt(t,"shape-rendering",e.shapeRendering),lt(t,"filter",e.imageFilter),lt(t,"paint-order",e.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=e;lt(t,"pointer-events",i)}function Ee(t,e){b8(t,"mix-blend-mode",e.mixBlendMode),lt(t,"opacity",e.opacity)}function dm(t,e,n){t.each(function(r){const i=e(r);if(i!=null){const o=this.ownerDocument.createElementNS(Cr.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Cr.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function lt(t,e,n){n!=null&&t.attr(e,n)}function b8(t,e,n){n!=null&&t.style(e,n)}function ye(t,e,{x:n,y:r},i=jt,o=jt){i+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&t.attr("transform",`translate(${i},${o})`)}function Ot(t,e){if((t=Yt(t))!==e)return t}function ri(t,e){if((t=St(t))!==e)return t}const y8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Vu(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!y8.test(t))throw new Error(`invalid class name: ${t}`);return t}function Xu(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function oo({frameAnchor:t},{width:e,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-i:(a+e-i)/2,/^top/.test(t)?r:/^bottom/.test(t)?n-o:(r+n-o)/2]}function ju(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:hm(n)}}function Pt(t,{document:e}){return pi(Fa(t).call(e.documentElement))}const pm=Math.PI,Xe=2*pm,Hc=.618;function _8({projection:t,inset:e=0,insetTop:n=e,insetRight:r=e,insetBottom:i=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let f,s,u="frame";if(Cn(t)){let M;if({type:t,domain:s,inset:M,insetTop:n=M!==void 0?M:n,insetRight:r=M!==void 0?M:r,insetBottom:i=M!==void 0?M:i,insetLeft:o=M!==void 0?M:o,clip:u=u,...f}=t,t==null)return}typeof t!="function"&&({type:t}=mm(t));const{width:l,height:h,marginLeft:c,marginRight:d,marginTop:p,marginBottom:m}=a,g=l-c-d-o-r,b=h-p-m-n-i;if(t=t==null?void 0:t({width:g,height:b,clip:u,...f}),t==null)return;u=w8(u,c,p,l-d,h-m);let y=c+o,$=p+n,_;if(s!=null){const[[M,w],[v,S]]=Ua(t).bounds(s),C=Math.min(g/(v-M),b/(S-w));C>0?(y-=(C*(M+v)-g)/2,$-=(C*(w+S)-b)/2,_=Os({point(N,T){this.stream.point(N*C+y,T*C+$)}})):vn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return _??(_=y===0&&$===0?gm():Os({point(M,w){this.stream.point(M+y,w+$)}})),{stream:M=>t.stream(_.stream(u(M)))}}function mm(t){switch(`${t}`.toLowerCase()){case"albers-usa":return _e($v,.7463,.4673);case"albers":return ko(w0,.7463,.4673);case"azimuthal-equal-area":return _e(Sv,4,4);case"azimuthal-equidistant":return _e(kv,Xe,Xe);case"conic-conformal":return ko(Ev,Xe,Xe);case"conic-equal-area":return ko(la,6.1702,2.9781);case"conic-equidistant":return ko(Dv,7.312,3.6282);case"equal-earth":return _e(Lv,5.4133,2.6347);case"equirectangular":return _e(Av,Xe,pm);case"gnomonic":return _e(Rv,3.4641,3.4641);case"identity":return{type:gm};case"reflect-y":return{type:v8};case"mercator":return _e(Tv,Xe,Xe);case"orthographic":return _e(Iv,2,2);case"stereographic":return _e(Pv,2,2);case"transverse-mercator":return _e(Ov,Xe,Xe);default:throw new Error(`unknown projection type: ${t}`)}}function w8(t,e,n,r,i){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return i0(e,n,r,i);default:throw new Error(`unknown projection clip type: ${t}`)}}function _e(t,e,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:f})=>{var u,l,h;const s=t();return a!=null&&((u=s.precision)==null||u.call(s,a)),o!=null&&((l=s.rotate)==null||l.call(s,o)),typeof f=="number"&&((h=s.clipAngle)==null||h.call(s,f)),s.scale(Math.min(r/e,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/e}}function ko(t,e,n){const{type:r,aspectRatio:i}=_e(t,e,n);return{type:o=>{const{parallels:a,domain:f,width:s,height:u}=o,l=r(o);return a!=null&&(l.parallels(a),f===void 0&&l.fitSize([s,u],{type:"Sphere"})),l},aspectRatio:i}}const gm=to({stream:t=>t}),v8=to(Os({point(t,e){this.stream.point(t,-e)}}));function x8(t,e,n,r){const i=n[t],o=n[e],a=i.length,f=n[t]=new Float64Array(a).fill(NaN),s=n[e]=new Float64Array(a).fill(NaN);let u;const l=r.stream({point(h,c){f[u]=h,s[u]=c}});for(u=0;u<a;++u)l.point(i[u],o[u])}function M8({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(Cn(t)&&(t=t.type),t!=null)}function $8(t){if(typeof(t==null?void 0:t.stream)=="function")return Hc;if(Cn(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=mm(t);if(e)return e}return Hc}}function S8(t){const e=[],n=[],r={scale:"x",value:e},i={scale:"y",value:n},o={point(a,f){e.push(a),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)In(a,o);return[r,i]}const bm=new Map([["accent",f6],["category10",a6],["dark2",s6],["paired",u6],["pastel1",l6],["pastel2",c6],["set1",h6],["set2",d6],["set3",p6],["tableau10",m6]]);function k8(t){return t!=null&&bm.has(`${t}`.toLowerCase())}const Yc=new Map([...bm,["brbg",je(ap,fp)],["prgn",je(sp,up)],["piyg",je(lp,cp)],["puor",je(hp,dp)],["rdbu",je(Hs,pa)],["rdgy",je(pp,mp)],["rdylbu",je(Ys,ma)],["rdylgn",je(gp,bp)],["spectral",je(yp,_p)],["burd",Wc(Hs,pa)],["buylrd",Wc(Ys,ma)],["blues",Ft(Yp,Wp)],["greens",Ft(Gp,Vp)],["greys",Ft(Xp,jp)],["oranges",Ft(t1,e1)],["purples",Ft(Zp,Kp)],["reds",Ft(Qp,Jp)],["turbo",Ze(s1)],["viridis",Ze(u1)],["magma",Ze(l1)],["inferno",Ze(c1)],["plasma",Ze(h1)],["cividis",Ze(n1)],["cubehelix",Ze(r1)],["warm",Ze(i1)],["cool",Ze(o1)],["bugn",Ft(wp,vp)],["bupu",Ft(xp,Mp)],["gnbu",Ft($p,Sp)],["orrd",Ft(kp,Tp)],["pubu",Ft(Ap,Np)],["pubugn",Ft(Cp,Ep)],["purd",Ft(Dp,Fp)],["rdpu",Ft(Lp,Rp)],["ylgn",Ft(Op,Up)],["ylgnbu",Ft(Ip,Pp)],["ylorbr",Ft(Bp,zp)],["ylorrd",Ft(qp,Hp)],["rainbow",Gc(a1)],["sinebow",Gc(f1)]]);function Ft(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?xe(e,n):t[n])}function je(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?xe(e,n):t[n])}function Wc(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?xe(r=>e(1-r),n):t[n].slice().reverse())}function Ze(t){return({length:e})=>xe(t,Math.max(2,Math.floor(e)))}function Gc(t){return({length:e})=>xe(t,Math.floor(e)+1).slice(0,-1)}function ym(t){const e=`${t}`.toLowerCase();if(!Yc.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Yc.get(e)}function cf(t,e){const n=ym(t),r=typeof n=="function"?n({length:e}):n;return r.length!==e?r.slice(0,e):r}function T8(t,e="greys"){const n=new Set,[r,i]=cf(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const Vc=new Map([["brbg",fp],["prgn",up],["piyg",cp],["puor",dp],["rdbu",pa],["rdgy",mp],["rdylbu",ma],["rdylgn",bp],["spectral",_p],["burd",t=>pa(1-t)],["buylrd",t=>ma(1-t)],["blues",Wp],["greens",Vp],["greys",jp],["purples",Kp],["reds",Jp],["oranges",e1],["turbo",s1],["viridis",u1],["magma",l1],["inferno",c1],["plasma",h1],["cividis",n1],["cubehelix",r1],["warm",i1],["cool",o1],["bugn",vp],["bupu",Mp],["gnbu",Sp],["orrd",Tp],["pubugn",Ep],["pubu",Np],["purd",Fp],["rdpu",Rp],["ylgnbu",Pp],["ylgn",Up],["ylorbr",zp],["ylorrd",Hp],["rainbow",a1],["sinebow",f1]]);function Zu(t){const e=`${t}`.toLowerCase();if(!Vc.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Vc.get(e)}const C8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function E8(t){return t!=null&&C8.has(`${t}`.toLowerCase())}const _m=t=>e=>t(1-e),Vf=[0,1],Xc=new Map([["number",Ut],["rgb",jn],["hsl",y_],["hcl",v_],["lab",__]]);function wm(t){const e=`${t}`.toLowerCase();if(!Xc.has(e))throw new Error(`unknown interpolator: ${e}`);return Xc.get(e)}function ao(t,e,n,{type:r,nice:i,clamp:o,zero:a,domain:f=xm(t,n),unknown:s,round:u,scheme:l,interval:h,range:c=Et.get(t)===no?B8(n,f):Et.get(t)===ro?z8(n,f):Et.get(t)===io?Vf:void 0,interpolate:d=Et.get(t)===hn?l==null&&c!==void 0?jn:Zu(l!==void 0?l:r==="cyclical"?"rainbow":"turbo"):u?hu:Ut,reverse:p}){if(h=Vr(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=wm(d)),p=!!p,c!==void 0){const m=(f=ae(f)).length,g=(c=ae(c)).length;if(m!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ia(d,c),c=void 0}}if(d.length===1?(p&&(d=_m(d),p=!1),c===void 0&&(c=Float64Array.from(f,(m,g)=>g/(f.length-1)),c.length===2&&(c=Vf)),e.interpolate((c===Vf?to:Qu)(d))):e.interpolate(d),a){const[m,g]=le(f);(m>0||g<0)&&(f=Di(f),Or(f)!==Math.sign(m)?f[f.length-1]=0:f[0]=0)}return p&&(f=Go(f)),e.domain(f).unknown(s),i&&(e.nice(A8(i,r)),f=e.domain()),c!==void 0&&e.range(c),o&&e.clamp(o),{type:r,domain:f,range:c,scale:e,interpolate:d,interval:h}}function A8(t,e){return t===!0?void 0:typeof t=="number"?t:m5(t,e)}function N8(t,e,n){return ao(t,Mu(),e,n)}function D8(t,e,n){return vm(t,e,{...n,exponent:.5})}function vm(t,e,{exponent:n=1,...r}){return ao(t,U0().exponent(n),e,{...r,type:"pow"})}function F8(t,e,{base:n=10,domain:r=q8(e),...i}){return ao(t,R0().base(n),e,{...i,domain:r})}function L8(t,e,{constant:n=1,...r}){return ao(t,P0().constant(n),e,r)}function R8(t,e,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:a=H8(e),unknown:f,interpolate:s,reverse:u}){return n===void 0&&(n=s!==void 0?xe(s,i):Et.get(t)===hn?cf(o,i):void 0),a.length>0&&(a=B0(a,n===void 0?{length:i}:n).quantiles()),Ku(t,e,{domain:a,range:n,reverse:u,unknown:f})}function I8(t,e,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=xm(t,e),unknown:a,interpolate:f,reverse:s}){const[u,l]=le(o);let h;return n===void 0?(h=xi(u,l,r),h[0]<=u&&h.splice(0,1),h[h.length-1]>=l&&h.pop(),r=h.length+1,n=f!==void 0?xe(f,r):Et.get(t)===hn?cf(i,r):void 0):(h=xe(Ut(u,l),r+1).slice(1,-1),u instanceof Date&&(h=h.map(c=>new Date(c)))),Or(ae(o))<0&&h.reverse(),Ku(t,e,{domain:h,range:n,reverse:s,unknown:a})}function Ku(t,e,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?xe(o,n.length+1):Et.get(t)===hn?cf(i,n.length+1):void 0,reverse:f}){n=ae(n);const s=Or(n);if(!isNaN(s)&&!P8(n,s))throw new Error(`the ${t} scale has a non-monotonic domain`);return f&&(a=Go(a)),{type:"threshold",scale:z0(s<0?Go(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function P8(t,e){for(let n=1,r=t.length,i=t[0];n<r;++n){const o=zi(i,i=t[n]);if(o!==0&&o!==e)return!1}return!0}function O8(t){return{type:"identity",scale:T5(Et.get(t))?D0():e=>e}}function Ri(t,e=B1){return t.length?[on(t,({value:n})=>n===void 0?n:on(n,e)),ge(t,({value:n})=>n===void 0?n:ge(n,e))]:[0,1]}function xm(t,e){const n=Et.get(t);return(n===no||n===io||n===ro?U8:Ri)(e)}function U8(t){return[0,t.length?ge(t,({value:e})=>e===void 0?e:ge(e,B1)):1]}function B8(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=Tr(t,.5,({value:a})=>a===void 0?NaN:Tr(a,.25,nf)),i=e.map(a=>3*Math.sqrt(a/r)),o=30/ge(i);return o<1?i.map(a=>a*o):i}function z8(t,e){const n=ls(t,({value:o})=>o===void 0?NaN:ls(o,Math.abs)),r=e.map(o=>12*o/n),i=60/ge(r);return i<1?r.map(o=>o*i):r}function q8(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Ri(t,nf);if(n<0)return Ri(t,Fu)}return[1,10]}function H8(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const r of n)e.push(r);return e}function Qu(t){return(e,n)=>r=>t(e+r*(n-e))}function hf(t,e,n,r,{type:i,nice:o,clamp:a,domain:f=Ri(r),unknown:s,pivot:u=0,scheme:l,range:h,symmetric:c=!0,interpolate:d=Et.get(t)===hn?l==null&&h!==void 0?jn:Zu(l!==void 0?l:"rdbu"):Ut,reverse:p}){u=+u,f=ae(f);let[m,g]=f;if(f.length>2&&vn(`Warning: the diverging ${t} scale domain contains extra elements.`),zi(m,g)<0&&([m,g]=[g,m],p=!p),m=Math.min(m,u),g=Math.max(g,u),typeof d!="function"&&(d=wm(d)),h!==void 0&&(d=d.length===1?Qu(d)(...h):Ia(d,h)),p&&(d=_m(d)),c){const b=n.apply(u),y=b-n.apply(m),$=n.apply(g)-b;y<$?m=n.invert(b-$):y>$&&(g=n.invert(b+y))}return e.domain([m,u,g]).unknown(s).interpolator(d),a&&e.clamp(a),o&&e.nice(o),{type:i,domain:[m,g],pivot:u,interpolate:d,scale:e}}function Y8(t,e,n){return hf(t,np(),X8,e,n)}function W8(t,e,n){return Mm(t,e,{...n,exponent:.5})}function Mm(t,e,{exponent:n=1,...r}){return hf(t,op().exponent(n=+n),K8(n),e,{...r,type:"diverging-pow"})}function G8(t,e,{base:n=10,pivot:r=1,domain:i=Ri(e,r<0?Fu:nf),...o}){return hf(t,rp().base(n=+n),j8,e,{domain:i,pivot:r,...o})}function V8(t,e,{constant:n=1,...r}){return hf(t,ip().constant(n=+n),Q8(n),e,r)}const X8={apply(t){return t},invert(t){return t}},j8={apply:Math.log,invert:Math.exp},Z8={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function K8(t){return t===.5?Z8:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function Q8(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function $m(t,e,n,r){return ao(t,e,n,r)}function J8(t,e,n){return $m(t,i6(),e,n)}function t4(t,e,n){return $m(t,o6(),e,n)}const fo=Symbol("ordinal");function Sm(t,e,n,{type:r,interval:i,domain:o,range:a,reverse:f,hint:s}){return i=Vr(i,r),o===void 0&&(o=Tm(n,i,t)),(r==="categorical"||r===fo)&&(r="ordinal"),f&&(o=Go(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:r,domain:o,range:a,scale:e,hint:s,interval:i}}function e4(t,e,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:f,...s}){r=Vr(r,n),i===void 0&&(i=Tm(e,r,t));let u;if(Et.get(t)===uf)u=i4(e),o=o===void 0?o4(u):At(o,Hu);else if(Et.get(t)===hn&&(o===void 0&&(n==="ordinal"||n===fo)&&(o=T8(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"tableau10"),a!==void 0))if(o!==void 0){const l=Zu(a),h=o[0],c=o[1]-o[0];o=({length:d})=>xe(p=>l(h+c*p),d)}else o=ym(a);if(f===Bs)throw new Error(`implicit unknown on ${t} scale is not supported`);return Sm(t,xu().unknown(f),e,{...s,type:n,domain:i,range:o,hint:u})}function n4(t,e,{align:n=.5,padding:r=.5,...i}){return km(Uv().align(n).padding(r),e,i,t)}function r4(t,e,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=t==="fx"||t==="fy"?0:r,...a}){return km(Ha().align(n).paddingInner(i).paddingOuter(o),e,a,t)}function km(t,e,n,r){let{round:i}=n;return i!==void 0&&t.round(i=!!i),t=Sm(r,t,e,n),t.round=i,t}function Tm(t,e,n){const r=new Ca;for(const{value:i,domain:o}of t){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(e!==void 0){const[i,o]=le(r).map(e.floor,e);return e.range(i,e.offset(o))}if(r.size>1e4&&Et.get(n)===Ie)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return vi(r,Se)}function jc(t,e){let n;for(const{hint:r}of t){const i=r==null?void 0:r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function i4(t){return{fill:jc(t,"fill"),stroke:jc(t,"stroke")}}function o4(t){return Xt(t.fill)?F6:D6}function Qs(t,{label:e,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:f,nice:s,clamp:u,zero:l,align:h,padding:c,projection:d,facet:{label:p=e}={},...m}={}){const g={};for(const[b,y]of t){const $=m[b],_=u4(b,y,{round:Et.get(b)===Ie?f:void 0,nice:s,clamp:u,zero:l,align:h,padding:c,projection:d,...$});if(_){let{label:M=b==="fx"||b==="fy"?p:e,percent:w,transform:v,inset:S,insetTop:C=S!==void 0?S:b==="y"?r:0,insetRight:N=S!==void 0?S:b==="x"?i:0,insetBottom:T=S!==void 0?S:b==="y"?o:0,insetLeft:R=S!==void 0?S:b==="x"?a:0}=$||{};if(v==null)v=void 0;else if(typeof v!="function")throw new Error("invalid scale transform; not a function");_.percent=!!w,_.label=M===void 0?f4(y,_):M,_.transform=v,b==="x"||b==="fx"?(_.insetLeft=+R,_.insetRight=+N):(b==="y"||b==="fy")&&(_.insetTop=+C,_.insetBottom=+T),g[b]=_}}return g}function Zc(t){const e={},n={scales:e};for(const[r,i]of Object.entries(t)){const{scale:o,type:a,interval:f,label:s}=i;e[r]=p4(i),n[r]=o,o.type=a,f!=null&&(o.interval=f),s!=null&&(o.label=s)}return n}function a4(t,e){const{x:n,y:r,fx:i,fy:o}=t,a=i||o?Ju(e):e;i&&Kc(i,a),o&&Qc(o,a);const f=i||o?Cm(t,e):e;n&&Kc(n,f),r&&Qc(r,f)}function f4(t=[],e){let n;for(const{label:r}of t)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!ar(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Ju(t){const{marginTop:e,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:f,marginRight:s,marginBottom:u,marginLeft:l}}=t;return{marginTop:Math.max(e,f),marginRight:Math.max(n,s),marginBottom:Math.max(r,u),marginLeft:Math.max(i,l),width:o,height:a}}function Cm({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:s}=Ju(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+i:f,height:e?e.scale.bandwidth()+r+o:s,facet:{width:f,height:s}}}function Kc(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:r}=t,{width:i,marginLeft:o=0,marginRight:a=0}=e,f=o+n,s=i-a-r;t.range=[f,Math.max(f,s)],ar(t)||(t.range=Am(t)),t.scale.range(t.range)}Em(t)}function Qc(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:r}=t,{height:i,marginTop:o=0,marginBottom:a=0}=e,f=o+n,s=i-a-r;t.range=[Math.max(f,s),f],ar(t)?t.range.reverse():t.range=Am(t),t.scale.range(t.range)}Em(t)}function Em(t){t.round===void 0&&c4(t)&&s4(t)<=30&&t.scale.round(!0)}function s4({scale:t}){const e=t.domain().length,[n,r]=t.range(),i=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-i,f=Math.abs(r-n)/Math.max(1,a+o*2);return(f-Math.floor(f))*a}function Am(t){const e=t.scale.domain().length+Nm(t);if(!(e>2))return t.range;const[n,r]=t.range;return Array.from({length:e},(i,o)=>n+o/(e-1)*(r-n))}function u4(t,e=[],n={}){const r=l4(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&ar({type:r})){const i=e.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Qt)?vn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${gr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${gr(r)}".`):i.some(y5)?vn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${gr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${gr(r)}".`):i.some(_5)&&vn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${gr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${gr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=To(e,n,Re);break;case"identity":switch(Et.get(t)){case Ie:n=To(e,n,Re);break;case uf:n=To(e,n,h4);break}break;case"utc":case"time":n=To(e,n,u5);break}switch(r){case"diverging":return Y8(t,e,n);case"diverging-sqrt":return W8(t,e,n);case"diverging-pow":return Mm(t,e,n);case"diverging-log":return G8(t,e,n);case"diverging-symlog":return V8(t,e,n);case"categorical":case"ordinal":case fo:return e4(t,e,n);case"cyclical":case"sequential":case"linear":return N8(t,e,n);case"sqrt":return D8(t,e,n);case"threshold":return Ku(t,e,n);case"quantile":return R8(t,e,n);case"quantize":return I8(t,e,n);case"pow":return vm(t,e,n);case"log":return F8(t,e,n);case"symlog":return L8(t,e,n);case"utc":return t4(t,e,n);case"time":return J8(t,e,n);case"point":return n4(t,e,n);case"band":return r4(t,e,n);case"identity":return O8(t);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function gr(t){return typeof t=="symbol"?t.description:t}const Jc={toString:()=>"projection"};function l4(t,e,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:f}){if(t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&f!=null&&(n=Jc);for(const{type:u}of e)if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}if(n===Jc)return;if(n!==void 0)return n;if(r===void 0&&!e.some(({value:u})=>u!==void 0))return;const s=Et.get(t);if(s===no)return"sqrt";if(s===io||s===ro)return"linear";if(s===uf)return"ordinal";if((r||i||[]).length>2)return Xf(s);if(r!==void 0){if(Ic(r))return Xf(s);if(Qt(r))return"utc"}else{const u=e.map(({value:l})=>l).filter(l=>l!==void 0);if(u.some(Ic))return Xf(s);if(u.some(Qt))return"utc"}if(s===hn){if(a!=null||E8(o))return"diverging";if(k8(o))return"categorical"}return"linear"}function Xf(t){switch(t){case Ie:return"point";case hn:return fo;default:return"ordinal"}}function ar({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===fo}function Nm({type:t}){return t==="threshold"}function c4({type:t}){return t==="point"||t==="band"}function Br(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let r=1,i=e.length;r<i;++r)if(t(e[r])-n)return!1;return!0}function To(t,{domain:e,...n},r){for(const i of t)i.value!==void 0&&(i.value=r(i.value));return{domain:e===void 0?e:r(e),...n}}function h4(t){return At(t,Hu)}function d4(t){return e=>{if(!Et.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function p4({scale:t,type:e,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:f,pivot:s}){if(e==="identity")return{type:"identity",apply:l=>l,invert:l=>l};const u=t.unknown?t.unknown():void 0;return{type:e,domain:Di(n),...r!==void 0&&{range:Di(r)},...a!==void 0&&{transform:a},...f&&{percent:f},...u!==void 0&&{unknown:u},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...t.clamp&&{clamp:t.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:l=>t(l),...t.invert&&{invert:l=>t.invert(l)}}}function m4(t,e,n={}){let r=.5-jt,i=.5+jt,o=.5+jt,a=.5-jt;for(const{marginTop:m,marginRight:g,marginBottom:b,marginLeft:y}of e)m>r&&(r=m),g>i&&(i=g),b>o&&(o=b),y>a&&(a=y);let{margin:f,marginTop:s=f!==void 0?f:r,marginRight:u=f!==void 0?f:i,marginBottom:l=f!==void 0?f:o,marginLeft:h=f!==void 0?f:a}=n;s=+s,u=+u,l=+l,h=+h;let{width:c=640,height:d=g4(t,n,{width:c,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,s-r+l-o)}=n;c=+c,d=+d;const p={width:c,height:d,marginTop:s,marginRight:u,marginBottom:l,marginLeft:h};if(t.fx||t.fy){let{margin:m,marginTop:g=m!==void 0?m:s,marginRight:b=m!==void 0?m:u,marginBottom:y=m!==void 0?m:l,marginLeft:$=m!==void 0?m:h}=n.facet??{};g=+g,b=+b,y=+y,$=+$,p.facet={marginTop:g,marginRight:b,marginBottom:y,marginLeft:$}}return p}function g4({x:t,y:e,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:f,marginRightDefault:s,marginBottomDefault:u,marginLeftDefault:l}){const h=n?n.scale.domain().length:1,c=$8(i);if(c){const p=r?r.scale.domain().length:1,m=(1.1*h-.1)/(1.1*p-.1)*c,g=Math.max(.1,Math.min(10,m));return Math.round((a-l-s)*g+f+u)}const d=e?ar(e)?e.scale.domain().length:Math.max(7,17/h):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=th("y",e)/(th("x",t)*o),m=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,b=m*(a-l-s)-t.insetLeft-t.insetRight;return(p*b+e.insetTop+e.insetBottom)/g+f+u}return!!(e||n)*Math.max(1,Math.min(60,d*h))*20+!!r*30+60}function th(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:r}=e;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const f=e.scale.exponent();i=s=>Math.pow(s,f);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=le(r);return Math.abs(i(a)-i(o))}function b4(t,e){const{fx:n,fy:r}=Qs(t,e),i=n==null?void 0:n.scale.domain(),o=r==null?void 0:r.scale.domain();return i&&o?F2(i,o).map(([a,f],s)=>({x:a,y:f,i:s})):i?i.map((a,f)=>({x:a,i:f})):o?o.map((a,f)=>({y:a,i:f})):void 0}function y4(t,{x:e,y:n}){return e&&(e=Js(e)),n&&(n=Js(n)),t.filter(e&&n?r=>e.has(r.x)&&n.has(r.y):e?r=>e.has(r.x):r=>n.has(r.y)).sort(e&&n?(r,i)=>e.get(r.x)-e.get(i.x)||n.get(r.y)-n.get(i.y):e?(r,i)=>e.get(r.x)-e.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function tl(t,{fx:e,fy:n}){const r=cn(t),i=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?xr(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):e?xr(r,a=>(a.fx=i[a[0]],a),a=>i[a]):xr(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function _4(t,e,{marginTop:n,marginLeft:r}){return t&&e?({x:i,y:o})=>`translate(${t(i)-r},${e(o)-n})`:t?({x:i})=>`translate(${t(i)-r},0)`:({y:i})=>`translate(0,${e(i)-n})`}function w4(t){const e=[],n=new Uint32Array(xn(t,r=>r.length));for(const r of t){let i=0;for(const o of t)r!==o&&(n.set(o,i),i+=o.length);e.push(n.slice(0,i))}return e}const v4=new Map([["top",jf],["right",Qf],["bottom",Zf],["left",Kf],["top-left",Co(jf,Kf)],["top-right",Co(jf,Qf)],["bottom-left",Co(Zf,Kf)],["bottom-right",Co(Zf,Qf)],["top-empty",$4],["right-empty",T4],["bottom-empty",S4],["left-empty",k4],["empty",C4]]);function x4(t){if(t==null)return null;const e=v4.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const eh=new WeakMap;function Js(t){let e=eh.get(t);return e||eh.set(t,e=new Gn(At(t,(n,r)=>[n,r]))),e}function An(t,e){return Js(t).get(e)}function M4(t,e,n){return e=zn(e),n=zn(n),t.find(r=>Object.is(zn(r.x),e)&&Object.is(zn(r.y),n))}function df(t,e,n){var r;return(r=M4(t,e,n))==null?void 0:r.empty}function jf(t,{y:e},{y:n}){return e?An(e,n)===0:!0}function Zf(t,{y:e},{y:n}){return e?An(e,n)===e.length-1:!0}function Kf(t,{x:e},{x:n}){return e?An(e,n)===0:!0}function Qf(t,{x:e},{x:n}){return e?An(e,n)===e.length-1:!0}function $4(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=An(e,r);if(o>0)return df(t,n,e[o-1])}function S4(t,{y:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=An(e,r);if(o<e.length-1)return df(t,n,e[o+1])}function k4(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=An(e,n);if(o>0)return df(t,e[o-1],r)}function T4(t,{x:e},{x:n,y:r,empty:i}){if(i)return!1;if(!e)return;const o=An(e,n);if(o<e.length-1)return df(t,e[o+1],r)}function C4(t,e,{empty:n}){return n}function Co(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Jf(t,{channels:{fx:e,fy:n},groups:r}){return e&&n?t.map(({x:i,y:o})=>{var a;return((a=r.get(i))==null?void 0:a.get(o))??[]}):e?t.map(({x:i})=>r.get(i)??[]):t.map(({y:i})=>r.get(i)??[])}class ne{constructor(e,n={},r={},i){const{facet:o="auto",facetAnchor:a,fx:f,fy:s,sort:u,dx:l=0,dy:h=0,margin:c=0,marginTop:d=c,marginRight:p=c,marginBottom:m=c,marginLeft:g=c,clip:b=i==null?void 0:i.clip,channels:y,tip:$,render:_}=r;if(this.data=e,this.sort=Pr(u)?u:null,this.initializer=Ur(r).initializer,this.transform=this.initializer?r.transform:lf(r).transform,o===null||o===!1?this.facet=null:(this.facet=Te(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===Uo&&typeof f=="string"?[f]:f,this.fy=e===Uo&&typeof s=="string"?[s]:s),this.facetAnchor=x4(a),n=nm(n),y!==void 0&&(n={...E4(y),...n}),i!==void 0&&(n={...f8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([M,w])=>{if(of(w.value)){const{value:v,label:S=w.label,scale:C=w.scale}=w.value;w={...w,label:S,scale:C,value:v}}if(e===Uo&&typeof w.value=="string"){const{value:v}=w;w={...w,value:[v]}}return[M,w]}).filter(([M,{value:w,optional:v}])=>{if(w!=null)return!0;if(v)return!1;throw new Error(`missing channel value: ${M}`)})),this.dx=+l,this.dy=+h,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+g,this.clip=hm(b),this.tip=A4($),this.facet==="super"){if(f||s)throw new Error("super-faceting cannot use fx or fy");for(const M in this.channels){const{scale:w}=n[M];if(!(w!=="x"&&w!=="y"))throw new Error("super-faceting cannot use x or y")}}_!=null&&(this.render=Fm(_,this.render))}initialize(e,n,r){let i=ae(this.data);e===void 0&&i!=null&&(e=[cn(i)]);const o=e;this.transform!=null&&({facets:e,data:i}=this.transform(i,e,r),i=ae(i)),e!==void 0&&(e.original=o);const a=X5(this.channels,i);return this.sort!=null&&Z5(i,e,a,n,this.sort),{data:i,facets:e,channels:a}}filter(e,n,r){for(const i in n){const{filter:o=Sn}=n[i];if(o!==null){const a=r[i];e=e.filter(f=>o(a[f]))}}return e}project(e,n,r){for(const i in e)if(e[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&x8(i,o,n,r.projection)}}scale(e,n,r){const i=j5(e,n);return r.projection&&this.project(e,i,r),i}}function Dm(...t){return t.plot=ne.prototype.plot,t}function Fm(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,r,i,o,a,f){return t.call(this,n,r,i,o,a,(s,u,l,h,c)=>e.call(this,s,u,l,h,c,f))}}function E4(t){return Object.fromEntries(Object.entries(nm(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:eo(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function A4(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Te(t,"tip",["x","y","xy"]):t}function pf(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:Cn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const nh=new WeakMap;function el(t,e,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:f,render:s,...u}={}){return a=+a,i!=null&&(n??(n=null),f={...f,px:{value:i,scale:"x"}}),o!=null&&(r??(r=null),f={...f,py:{value:o,scale:"y"}}),{x:n,y:r,channels:f,...u,render:Fm(function(l,h,c,d,p,m){p={...p,pointerSticky:!1};const g=p.ownerSVGElement,{data:b}=p.getMarkState(this);let y=nh.get(g);y||nh.set(g,y={sticky:!1,roots:[],renders:[]});let $=y.renders.push(Y)-1;const{x:_,y:M,fx:w,fy:v}=h;let S=w?w(l.fx)-d.marginLeft:0,C=v?v(l.fy)-d.marginTop:0;_!=null&&_.bandwidth&&(S+=_.bandwidth()/2),M!=null&&M.bandwidth&&(C+=M.bandwidth()/2);const N=l.fi!=null;let T;if(N){let U=y.facetStates;U||(y.facetStates=U=new Map),T=U.get(this),T||U.set(this,T=new Map)}const[R,P]=oo(this,d),{px:q,py:k}=c,B=q?U=>q[U]:Lm(c,R),O=k?U=>k[U]:Rm(c,P);let X,W,H,D;function z(U,I){if(N)if(D&&(D=cancelAnimationFrame(D)),U==null)T.delete(l.fi);else{T.set(l.fi,I),D=requestAnimationFrame(()=>{D=null;for(const[E,L]of T)if(L<I||L===I&&E<l.fi){U=null;break}Y(U)});return}Y(U)}function Y(U){if(X===U&&H===y.sticky)return;X=U,H=p.pointerSticky=y.sticky;const I=X==null?[]:[X];N&&(I.fx=l.fx,I.fy=l.fy,I.fi=l.fi);const E=m(I,h,c,d,p);if(W){if(N){const L=W.parentNode,G=W.getAttribute("transform"),F=E.getAttribute("transform");G?E.setAttribute("transform",G):E.removeAttribute("transform"),F?L.setAttribute("transform",F):L.removeAttribute("transform"),E.removeAttribute("aria-label"),E.removeAttribute("aria-description"),E.removeAttribute("aria-hidden")}W.replaceWith(E)}return y.roots[$]=W=E,X==null&&(T==null?void 0:T.size)>1||p.dispatchValue(X==null?null:b[X]),E}function J(U){if(y.sticky||U.pointerType==="mouse"&&U.buttons===1)return;let[I,E]=By(U);I-=S,E-=C;const L=I<d.marginLeft||I>d.width-d.marginRight?1:t,G=E<d.marginTop||E>d.height-d.marginBottom?1:e;let F=null,ut=a*a;for(const Q of l){const ht=L*(B(Q)-I),st=G*(O(Q)-E),ft=ht*ht+st*st;ft<=ut&&(F=Q,ut=ft)}if(F!=null&&(t!==1||e!==1)){const Q=B(F)-I,ht=O(F)-E;ut=Q*Q+ht*ht}z(F,ut)}function Z(U){U.pointerType==="mouse"&&X!=null&&(y.sticky&&y.roots.some(I=>I==null?void 0:I.contains(U.target))||(y.sticky?(y.sticky=!1,y.renders.forEach(I=>I(null))):(y.sticky=!0,Y(X)),U.stopImmediatePropagation()))}function K(U){U.pointerType==="mouse"&&(y.sticky||z(null))}return g.addEventListener("pointerenter",J),g.addEventListener("pointermove",J),g.addEventListener("pointerdown",Z),g.addEventListener("pointerleave",K),Y(null)},s)}}function N4(t){return el(1,1,t)}function D4(t){return el(1,.01,t)}function F4(t){return el(.01,1,t)}function Lm({x1:t,x2:e,x:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Rm({y1:t,y2:e,y:n=t},r){return t&&e?i=>(t[i]+e[i])/2:n?i=>n[i]:()=>r}function Im(t){return ar(t)&&t.interval===void 0?void 0:"tabular-nums"}function L4(t,e){let{label:n=t.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:f=0,marginBottom:s=16+r,marginLeft:u=0,style:l,ticks:h=(i-u-f)/64,tickFormat:c,fontVariant:d=Im(t),round:p=!0,opacity:m,className:g}=e;const b=ju(e);g=Vu(g),m=Wt(m)[1],c===null&&(c=()=>null);const y=Pt("svg",b).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(R=>R.append("style").text(`.${g}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${g}-ramp text {
  white-space: pre;
}`)).call(Xu,l);let $=R=>R.selectAll(".tick line").attr("y1",a+s-o),_;const M=p?(R,P)=>R.rangeRound(P):(R,P)=>R.range(P),{type:w,domain:v,range:S,interpolate:C,scale:N,pivot:T}=t;if(C){const R=S===void 0?C:Ia(C.length===1?Qu(C):C,S);_=M(N.copy(),xe(Ut(u,i-f),Math.min(v.length+(T!==void 0),S===void 0?1/0:S.length)));const P=256,q=b.document.createElement("canvas");q.width=P,q.height=1;const k=q.getContext("2d");for(let B=0,O=P-1;B<P;++B)k.fillStyle=R(B/O),k.fillRect(B,0,1,1);y.append("image").attr("opacity",m).attr("x",u).attr("y",a).attr("width",i-u-f).attr("height",o-a-s).attr("preserveAspectRatio","none").attr("xlink:href",q.toDataURL())}else if(w==="threshold"){const R=v,P=c===void 0?q=>q:typeof c=="string"?Wr(c):c;_=M(Mu().domain([-1,S.length-1]),[u,i-f]),y.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",(q,k)=>_(k-1)).attr("y",a).attr("width",(q,k)=>_(k)-_(k-1)).attr("height",o-a-s).attr("fill",q=>q),h=At(R,(q,k)=>k),c=q=>P(R[q],q)}else _=M(Ha().domain(v),[u,i-f]),y.append("g").attr("fill-opacity",m).selectAll().data(v).enter().append("rect").attr("x",_).attr("y",a).attr("width",Math.max(0,_.bandwidth()-1)).attr("height",o-a-s).attr("fill",N),$=()=>{};return y.append("g").attr("transform",`translate(0,${o-s})`).call(rb(_).ticks(Array.isArray(h)?null:h,typeof c=="string"?c:void 0).tickFormat(typeof c=="function"?c:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ot(d,"normal")).call($).call(R=>R.select(".domain").remove()),n!==void 0&&y.append("text").attr("x",u).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),y.node()}const Pm=Math.PI/180;function so(t,{marker:e,markerStart:n=e,markerMid:r=e,markerEnd:i=e}={}){t.markerStart=ts(n),t.markerMid=ts(r),t.markerEnd=ts(i)}function ts(t){if(t==null||t===!1)return null;if(t===!0)return ih;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return rh("auto");case"arrow-reverse":return rh("auto-start-reverse");case"dot":return R4;case"circle":case"circle-fill":return ih;case"circle-stroke":return I4}throw new Error(`invalid marker: ${t}`)}function rh(t){return(e,n)=>Pt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function R4(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function ih(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function I4(t,e){return Pt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let P4=0;function mf(t,e,{stroke:n},r){return Om(t,e,n&&(i=>n[i]),r)}function O4(t,e,{stroke:n},r){return Om(t,e,n&&(([i])=>n[i]),r)}function Om(t,{markerStart:e,markerMid:n,markerEnd:r,stroke:i},o=()=>i,a){const f=new Map;function s(u){return function(l){const h=o(l);let c=f.get(u);c||f.set(u,c=new Map);let d=c.get(h);if(!d){const p=this.parentNode.insertBefore(u(h,a),this),m=`plot-marker-${++P4}`;p.setAttribute("id",m),c.set(h,d=`url(#${m})`)}return d}}e&&t.attr("marker-start",s(e)),n&&t.attr("marker-mid",s(n)),r&&t.attr("marker-end",s(r))}function nl({inset:t,insetLeft:e,insetRight:n,...r}={}){return[e,n]=Bm(t,e,n),{inset:t,insetLeft:e,insetRight:n,...r}}function Um({inset:t,insetTop:e,insetBottom:n,...r}={}){return[e,n]=Bm(t,e,n),{inset:t,insetTop:e,insetBottom:n,...r}}function Bm(t,e,n){return t===void 0&&e===void 0&&n===void 0?jt?[1,0]:[.5,.5]:[e,n]}function zm(t,{interval:e}){return t={...eo(t)},t.interval=Bu(t.interval===void 0?e:t.interval),t}function qm(t,e,n,r){const{[t]:i,[`${t}1`]:o,[`${t}2`]:a}=n,{value:f,interval:s}=zm(i,n);if(f==null||s==null&&!r)return n;const u=or(i);if(s==null){let d;const p={transform:m=>d||(d=Rt(m,f)),label:u};return{...n,[t]:void 0,[`${t}1`]:o===void 0?p:o,[`${t}2`]:a===void 0?p:a}}let l,h;function c(d){return h!==void 0&&d===l?h:h=At(Rt(l=d,f),p=>s.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:c,label:u}:o,[`${t}2`]:a===void 0?{transform:d=>c(d).map(p=>s.offset(p)),label:u}:a})}function Hm(t,e,n){const{[t]:r}=n,{value:i,interval:o}=zm(r,n);return i==null||o==null?n:e({...n,[t]:{label:or(r),transform:a=>{const f=At(Rt(a,i),u=>o.floor(u)),s=f.map(u=>o.offset(u));return f.map(Qt(f)?(u,l)=>u==null||isNaN(u=+u)||(l=s[l],l==null)||isNaN(l=+l)?void 0:new Date((u+l)/2):(u,l)=>u==null||(l=s[l],l==null)?NaN:(+u+ +l)/2)}}})}function U4(t={}){return qm("x",nl,t)}function Ym(t={}){return qm("y",Um,t)}function B4(t={}){return Hm("x",nl,t)}function z4(t={}){return Hm("y",Um,t)}const Wm={ariaLabel:"rule",fill:null,stroke:"currentColor"};class q4 extends ne{constructor(e,n={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:f=a,insetBottom:s=a}=n;super(e,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},pf(n,"x"),Wm),this.insetTop=St(f),this.insetBottom=St(s),so(this,n)}render(e,n,r,i,o){const{x:a,y:f}=n,{x:s,y1:u,y2:l}=r,{width:h,height:c,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=i,{insetTop:b,insetBottom:y}=this;return Pt("svg:g",o).call(Ce,this,i,o).call(ye,this,{x:s&&a},jt,0).call($=>$.selectAll().data(e).enter().append("line").call(Ee,this).attr("x1",s?_=>s[_]:(m+h-p)/2).attr("x2",s?_=>s[_]:(m+h-p)/2).attr("y1",u&&!Br(f)?_=>u[_]+b:d+b).attr("y2",l&&!Br(f)?f.bandwidth?_=>l[_]+f.bandwidth()-y:_=>l[_]-y:c-g-y).call(dn,this,r).call(mf,this,r,o)).node()}}class H4 extends ne{constructor(e,n={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:f=a,insetLeft:s=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},pf(n,"y"),Wm),this.insetRight=St(f),this.insetLeft=St(s),so(this,n)}render(e,n,r,i,o){const{x:a,y:f}=n,{y:s,x1:u,x2:l}=r,{width:h,height:c,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=i,{insetLeft:b,insetRight:y}=this;return Pt("svg:g",o).call(Ce,this,i,o).call(ye,this,{y:s&&f},0,jt).call($=>$.selectAll().data(e).enter().append("line").call(Ee,this).attr("x1",u&&!Br(a)?_=>u[_]+b:m+b).attr("x2",l&&!Br(a)?a.bandwidth?_=>l[_]+a.bandwidth()-y:_=>l[_]-y:h-p-y).attr("y1",s?_=>s[_]:(d+c-g)/2).attr("y2",s?_=>s[_]:(d+c-g)/2).call(dn,this,r).call(mf,this,r,o)).node()}}function rl(t,e){let{x:n=zt,y:r,y1:i,y2:o,...a}=Ym(e);return[i,o]=Gm(r,i,o),new q4(t,{...a,x:n,y1:i,y2:o})}function Y4(t,e){let{y:n=zt,x:r,x1:i,x2:o,...a}=U4(e);return[i,o]=Gm(r,i,o),new H4(t,{...a,y:n,x1:i,x2:o})}function Gm(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function il(t,...e){let n=e.length;for(let r=0,i=!0;r<n;++r)typeof e[r]!="function"&&(i&&(t=t.slice(),i=!1),t.splice(r,2,t[r]+e[r]+t[r+1]),e.splice(r,1),--r,--n);return r=>{let i=t[0];for(let o=0;o<n;++o)i+=e[o](r)+t[o+1];return i}}const W4={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},Vm="";class ol extends ne{constructor(e,n={}){const{x:r,y:i,text:o=En(e)&&tm(e)?zt:Iu,frameAnchor:a,textAnchor:f=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:s=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:u=1,lineWidth:l=1/0,textOverflow:h,monospace:c,fontFamily:d=c?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:g,fontWeight:b,rotate:y}=n,[$,_]=Wt(y,0),[M,w]=K4(p);if(super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:M,optional:!0},rotate:{value:b5($),optional:!0},text:{value:o,filter:Du,optional:!0}},n,W4),this.rotate=_,this.textAnchor=Ot(f,"middle"),this.lineAnchor=Te(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+l,this.textOverflow=Xm(h),this.monospace=!!c,this.fontFamily=Yt(d),this.fontSize=w,this.fontStyle=Yt(m),this.fontVariant=Yt(g),this.fontWeight=Yt(b),this.frameAnchor=sf(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${l}`);this.splitLines=Zm(this),this.clipLine=Km(this)}render(e,n,r,i,o){const{x:a,y:f}=n,{x:s,y:u,rotate:l,text:h,title:c,fontSize:d}=r,{rotate:p}=this,[m,g]=oo(this,i);return Pt("svg:g",o).call(Ce,this,i,o).call(jm,this,h,i).call(ye,this,{x:s&&a,y:u&&f}).call(b=>b.selectAll().data(e).enter().append("text").call(Ee,this).call(G4,this,h,c).attr("transform",il`translate(${s?y=>s[y]:m},${u?y=>u[y]:g})${l?y=>` rotate(${l[y]})`:p?` rotate(${p})`:""}`).call(lt,"font-size",d&&(y=>d[y])).call(dn,this,r)).node()}}function Xm(t){return t==null?null:Te(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function G4(t,e,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:f,clipLine:s}=e;t.each(function(u){const l=f(tr(n[u])??"").map(s),h=l.length,c=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let p=0;p<h;++p){if(++d,!l[p])continue;const m=this.ownerDocument.createElementNS(Cr.svg,"tspan");m.setAttribute("x",0),p===d-1?m.setAttribute("y",`${(c+p)*o}em`):m.setAttribute("dy",`${d*o}em`),m.textContent=l[p],this.appendChild(m),d=0}}else c&&this.setAttribute("y",`${c*o}em`),this.textContent=l[0];if(a&&!r&&l[0]!==n[u]){const d=this.ownerDocument.createElementNS(Cr.svg,"title");d.textContent=n[u],this.appendChild(d)}})}function al(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=af(e,n)),new ol(t,{...r,x:e,y:n})}function V4(t,{x:e=zt,...n}={}){return new ol(t,z4({...n,x:e}))}function X4(t,{y:e=zt,...n}={}){return new ol(t,B4({...n,y:e}))}function jm(t,e,n){lt(t,"text-anchor",e.textAnchor),lt(t,"font-family",e.fontFamily),lt(t,"font-size",e.fontSize),lt(t,"font-style",e.fontStyle),lt(t,"font-variant",e.fontVariant===void 0?j4(n):e.fontVariant),lt(t,"font-weight",e.fontWeight)}function j4(t){return t&&(w5(t)||Qt(t))?"tabular-nums":void 0}const Z4=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function K4(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),Z4.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function Q4(t,e,n){const r=[];let i,o=0;for(const[a,f,s]of J4(t)){if(i===void 0&&(i=a),o>i&&n(t,i,f)>e&&(r.push(t.slice(i,o)+(t[o-1]===Vm?"-":"")),i=a),s){r.push(t.slice(i,f)),i=void 0;continue}o=f}return r}function*J4(t){let e=0,n=0;const r=t.length;for(;n<r;){let i=1;switch(t[n]){case Vm:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++i;case`
`:yield[e,n,!0],n+=i,e=n;break;default:++n;break}}yield[e,n,!0]}const oh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function fl(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Xr(t,i))r+=oh[t[i]]??(Jm(t,i)?120:oh.e);return r}function sl(t,e=0,n=t.length){let r=0;for(let i=e;i<n;i=Xr(t,i))r+=Jm(t,i)?200:100;return r}function Zm({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const r=t?sl:fl,i=e*100;return o=>Q4(o,i,r)}function Km({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const r=t?sl:fl,i=e*100;switch(n){case"clip-start":return o=>fh(o,i,r,"");case"clip-end":return o=>ah(o,i,r,"");case"ellipsis-start":return o=>fh(o,i,r,Sr);case"ellipsis-middle":return o=>t7(o,i,r,Sr);case"ellipsis-end":return o=>ah(o,i,r,Sr)}}const Sr="";function zr(t,e,n,r){const i=[];let o=0;for(let a=0,f=0,s=t.length;a<s;a=f){f=Xr(t,a);const u=n(t,a,f);if(o+u>e){for(o+=r;o>e&&a>0;)f=a,a=i.pop(),o-=n(t,a,f);return[a,e-o]}o+=u,i.push(a)}return[-1,0]}function ah(t,e,n,r){t=t.trim();const i=n(r),[o]=zr(t,e,n,i);return o<0?t:t.slice(0,o).trimEnd()+r}function t7(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const o=n(r)/2,[a,f]=zr(t,e/2,n,o),[s]=zr(t,i-e/2-f+o,n,-o);return s<0?r:t.slice(0,a).trimEnd()+r+t.slice(Xr(t,s)).trimStart()}function fh(t,e,n,r){t=t.trim();const i=n(t);if(i<=e)return t;const o=n(r),[a]=zr(t,i-e+o,n,-o);return a<0?r:r+t.slice(Xr(t,a)).trimStart()}const tu=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,sh=new RegExp("\\p{Extended_Pictographic}","uy");function Xr(t,e){return e+=e7(t,e)?2:1,r7(t,e)&&(e=tu.lastIndex),n7(t,e)?Xr(t,e+1):e}function Qm(t,e){return t.charCodeAt(e)<128}function e7(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const r=t.charCodeAt(e+1);return r>=56320&&r<57344}return!1}function n7(t,e){return t.charCodeAt(e)===8205}function r7(t,e){return Qm(t,e)?!1:(tu.lastIndex=e,tu.test(t))}function Jm(t,e){return Qm(t,e)?!1:(sh.lastIndex=e,sh.test(t))}const i7={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},tg=3.5,o7=tg*5,eg={draw(t,e,n){const r=e*n/o7;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-r,r-e),t.lineTo(0,-e),t.lineTo(r,r-e)}},a7={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},f7=new Map([["arrow",eg],["spike",a7]]);function s7(t){return t&&typeof t.draw=="function"}function u7(t){if(s7(t))return t;const e=f7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class ng extends ne{constructor(e,n={}){const{x:r,y:i,r:o=tg,length:a,rotate:f,shape:s=eg,anchor:u="middle",frameAnchor:l}=n,[h,c]=Wt(a,12),[d,p]=Wt(f,0);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,i7),this.r=+o,this.length=c,this.rotate=p,this.shape=u7(s),this.anchor=Te(u,"anchor",["start","middle","end"]),this.frameAnchor=sf(l)}render(e,n,r,i,o){const{x:a,y:f}=n,{x:s,y:u,length:l,rotate:h}=r,{length:c,rotate:d,anchor:p,shape:m,r:g}=this,[b,y]=oo(this,i);return Pt("svg:g",o).call(Ce,this,i,o).call(ye,this,{x:s&&a,y:u&&f}).call($=>$.selectAll().data(e).enter().append("path").call(Ee,this).attr("transform",il`translate(${s?_=>s[_]:b},${u?_=>u[_]:y})${h?_=>` rotate(${h[_]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?l?_=>` translate(0,${l[_]})`:` translate(0,${c})`:l?_=>` translate(0,${l[_]/2})`:` translate(0,${c/2})`}`).attr("d",l?_=>{const M=wn();return m.draw(M,l[_],g),M}:(()=>{const _=wn();return m.draw(_,c,g),_})()).call(dn,this,r)).node()}}function l7(t,e={}){const{x:n=zt,...r}=e;return new ng(t,{...r,x:n})}function c7(t,e={}){const{y:n=zt,...r}=e;return new ng(t,{...r,y:n})}function Nn(t,e){return arguments.length<2&&!En(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function gf({anchor:t}={},e){return t===void 0?e[0]:Te(t,"anchor",e)}function rg(t){return gf(t,["left","right"])}function ig(t){return gf(t,["right","left"])}function og(t){return gf(t,["bottom","top"])}function ag(t){return gf(t,["top","bottom"])}function fg(){const[t,e]=Nn(...arguments);return ug("y",rg(e),t,e)}function h7(){const[t,e]=Nn(...arguments);return ug("fy",ig(e),t,e)}function sg(){const[t,e]=Nn(...arguments);return lg("x",og(e),t,e)}function d7(){const[t,e]=Nn(...arguments);return lg("fx",ag(e),t,e)}function ug(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:s=r,fillOpacity:u=i,textAnchor:l,textStroke:h,textStrokeOpacity:c,textStrokeWidth:d,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:g,x:b,margin:y,marginTop:$=y===void 0?20:y,marginRight:_=y===void 0?e==="right"?40:0:y,marginBottom:M=y===void 0?20:y,marginLeft:w=y===void 0?e==="left"?40:0:y,label:v,labelAnchor:S,labelArrow:C,labelOffset:N,...T}){return p=St(p),m=St(m),g=St(g),S!==void 0&&(S=Te(S,"labelAnchor",["center","top","bottom"])),C=yg(C),Dm(p&&!Xt(o)?p7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:g,x:b,...T}):null,Xt(s)?null:g7(t,e,n,{fill:s,fillOpacity:u,stroke:h,strokeOpacity:c,strokeWidth:d,textAnchor:l,tickSize:p,tickPadding:m,tickRotate:g,x:b,marginTop:$,marginRight:_,marginBottom:M,marginLeft:w,...T}),!Xt(s)&&v!==null?al([],pg({fill:s,fillOpacity:u,...T},function(R,P,q,k,B){const O=k[t],{marginTop:X,marginRight:W,marginBottom:H,marginLeft:D}=t==="y"&&B.inset||B,z=S??(O.bandwidth?"center":"top"),Y=N??(e==="right"?W:D)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${e}`,this.rotate=0),this.dy=z==="top"?3-X:z==="bottom"?H-3:0,this.dx=e==="right"?Y:-Y,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[bg(t,O,{anchor:e,label:v,labelAnchor:z,labelArrow:C})]}}}})):null)}function lg(t,e,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:f=1,fill:s=r,fillOpacity:u=i,textAnchor:l,textStroke:h,textStrokeOpacity:c,textStrokeWidth:d,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:g,y:b,margin:y,marginTop:$=y===void 0?e==="top"?30:0:y,marginRight:_=y===void 0?20:y,marginBottom:M=y===void 0?e==="bottom"?30:0:y,marginLeft:w=y===void 0?20:y,label:v,labelAnchor:S,labelArrow:C,labelOffset:N,...T}){return p=St(p),m=St(m),g=St(g),S!==void 0&&(S=Te(S,"labelAnchor",["center","left","right"])),C=yg(C),Dm(p&&!Xt(o)?m7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:g,y:b,...T}):null,Xt(s)?null:b7(t,e,n,{fill:s,fillOpacity:u,stroke:h,strokeOpacity:c,strokeWidth:d,textAnchor:l,tickSize:p,tickPadding:m,tickRotate:g,y:b,marginTop:$,marginRight:_,marginBottom:M,marginLeft:w,...T}),!Xt(s)&&v!==null?al([],pg({fill:s,fillOpacity:u,...T},function(R,P,q,k,B){const O=k[t],{marginTop:X,marginRight:W,marginBottom:H,marginLeft:D}=t==="x"&&B.inset||B,z=S??(O.bandwidth?"center":"right"),Y=N??(e==="top"?X:H)-3;return z==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-Y:Y,this.dx=z==="right"?W-3:z==="left"?3-D:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[bg(t,O,{anchor:e,label:v,labelAnchor:z,labelArrow:C})]}}}})):null)}function p7(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:f=e,tickSize:s,inset:u=0,insetLeft:l=u,insetRight:h=u,dx:c=0,y:d=t==="y"?void 0:null,...p}){return jr(c7,t,e,`${t}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:f,y:d,...p,dx:e==="left"?+c-jt+ +l:+c+jt-h,anchor:"start",length:s,shape:e==="left"?S7:k7})}function m7(t,e,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:f=e,tickSize:s,inset:u=0,insetTop:l=u,insetBottom:h=u,dy:c=0,x:d=t==="x"?void 0:null,...p}){return jr(l7,t,e,`${t}-axis tick`,n,{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:f,x:d,...p,dy:e==="bottom"?+c-jt-h:+c+jt+ +l,anchor:"start",length:s,shape:e==="bottom"?M7:$7})}function g7(t,e,n,{facetAnchor:r=e+(t==="y"?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*Pm):0),text:s,textAnchor:u=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:l=a>60?"top":a<-60?"bottom":"middle",fontVariant:h,inset:c=0,insetLeft:d=c,insetRight:p=c,dx:m=0,y:g=t==="y"?void 0:null,...b}){return jr(X4,t,e,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:u,lineAnchor:l,fontVariant:h,rotate:a,y:g,...b,dx:e==="left"?+m-o-f+ +d:+m+ +o+ +f-p},function(y,$,_,M,w){h===void 0&&(this.fontVariant=gg(y)),s===void 0&&(w.text=mg(y,$,_,M,e))})}function b7(t,e,n,{facetAnchor:r=e+(t==="x"?"-empty":""),frameAnchor:i=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*Pm):0),text:s,textAnchor:u=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:l=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:h,inset:c=0,insetTop:d=c,insetBottom:p=c,dy:m=0,x:g=t==="x"?void 0:null,...b}){return jr(V4,t,e,`${t}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:u,lineAnchor:l,fontVariant:h,rotate:a,x:g,...b,dy:e==="bottom"?+m+ +o+ +f-p:+m-o-f+ +d},function(y,$,_,M,w){h===void 0&&(this.fontVariant=gg(y)),s===void 0&&(w.text=mg(y,$,_,M,e))})}function y7(){const[t,e]=Nn(...arguments);return cg("y",rg(e),t,e)}function _7(){const[t,e]=Nn(...arguments);return cg("fy",ig(e),t,e)}function w7(){const[t,e]=Nn(...arguments);return hg("x",og(e),t,e)}function v7(){const[t,e]=Nn(...arguments);return hg("fx",ag(e),t,e)}function cg(t,e,n,{y:r=t==="y"?void 0:null,x:i=null,x1:o=e==="left"?i:null,x2:a=e==="right"?i:null,...f}){return jr(Y4,t,e,`${t}-grid`,n,{y:r,x1:o,x2:a,...dg(f)})}function hg(t,e,n,{x:r=t==="x"?void 0:null,y:i=null,y1:o=e==="top"?i:null,y2:a=e==="bottom"?i:null,...f}){return jr(rl,t,e,`${t}-grid`,n,{x:r,y1:o,y2:a,...dg(f)})}function dg({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:r=e,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function pg({fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:s,shapeRendering:u,clip:l=!1},h){return[,t]=ln(t),[,e]=Wt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:s,shapeRendering:u,clip:l,initializer:h}}function jr(t,e,n,r,i,o,a){let f;function s(h,c,d,p,m,g){const b=h==null&&(e==="fx"||e==="fy"),{[e]:y}=p;if(!y)throw new Error(`missing scale: ${e}`);const $=y.domain();let{interval:_,ticks:M,tickFormat:w,tickSpacing:v=e==="x"?80:35}=o;if(typeof M=="string"&&_g(y)&&(_=M,M=void 0),M===void 0&&(M=Vr(_,y.type)??x7(y,v)),h==null){if(En(M))h=ae(M);else if(wr(M))h=es(M,...le($));else if(y.interval){let C=y.interval;if(y.ticks){const[N,T]=le($),R=(T-N)/C[Ji];C=Dc(C,R/M)??C,h=es(C,N,T)}else{h=$;const N=h.length;C=Dc(C,N/M)??C,C!==y.interval&&(h=es(C,...le(h)))}if(C===y.interval){const N=Math.round(h.length/M);N>1&&(h=h.filter((T,R)=>R%N===0))}}else y.ticks?h=y.ticks(M):h=$;if(!y.ticks&&h.length&&h!==$){const C=new Ca($);h=h.filter(N=>C.has(N)),h.length||vn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?c=[cn(h)]:f[e]={scale:e,value:zt}}a==null||a.call(this,y,h,M,w,f);const S=Object.fromEntries(Object.entries(f).map(([C,N])=>[C,{...N,value:Rt(h,N.value)}]));return b&&(c=g.filterFacets(h,S)),{data:h,facets:c,channels:S}}const u=Ur(o).initializer,l=t(i,Ur({...o,initializer:s},u));return i==null?(f=l.channels,l.channels={}):f={},l.ariaLabel=r,l.clip===void 0&&(l.clip=!1),l}function x7(t,e){const[n,r]=le(t.range());return(r-n)/e}function mg(t,e,n,r,i){return{value:ul(t,e,n,r,i)}}function ul(t,e,n,r,i){return typeof r=="function"?r:r===void 0&&e&&Qt(e)?n5(e,i)??tr:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,r):r===void 0?tr:typeof r=="string"?(Qt(t.domain())?Qi:Wr)(r):to(r)}function es(t,e,n){return t.range(e,t.offset(t.floor(n)))}const M7={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},$7={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},S7={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},k7={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function gg(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function T7(t){return Math.sign(Or(t.domain()))*Math.sign(Or(t.range()))}function bg(t,e,{anchor:n,label:r=e.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&_g(e)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[]/.test(r)),!o)return r;if(o===!0){const a=T7(e);a&&(o=/x$/.test(t)||i==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function yg(t="auto"){return Xt(t)?!1:typeof t=="boolean"?t:Te(t,"labelArrow",["auto","up","right","down","left"])}function _g(t){return Qt(t.domain())}function uh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function C7(t,{opacity:e,...n}={}){if(!ar(t)&&!Nm(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return wg(t,n,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",Wt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function E7(t,{fill:e=(u=>(u=t.hint)==null?void 0:u.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:r=(l=>(l=t.hint)==null?void 0:l.stroke)()!==void 0?t.hint.stroke:Xt(e)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...f}={},s){const[h,c]=ln(e),[d,p]=ln(r),m=uh(s,h),g=uh(s,d),b=a*a*Math.PI;return n=Wt(n)[1],i=Wt(i)[1],o=Wt(o)[1],wg(t,f,(y,$,_,M)=>y.append("svg").attr("viewBox","-8 -8 16 16").attr("width",_).attr("height",M).attr("fill",h==="color"?w=>m.scale(w):c).attr("fill-opacity",n).attr("stroke",d==="color"?w=>g.scale(w):p).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",w=>{const v=wn();return t.scale(w).draw(v,b),v}))}function wg(t,e={},n){let{columns:r,tickFormat:i,fontVariant:o=Im(t),swatchSize:a=15,swatchWidth:f=a,swatchHeight:s=a,marginLeft:u=0,className:l,style:h,width:c}=e;const d=ju(e);l=Vu(l),i=ul(t.scale,t.domain,void 0,i);const p=Pt("div",d).attr("class",`${l}-swatches ${l}-swatches-${r!=null?"columns":"wrap"}`);let m;return r!=null?(m=`.${l}-swatches-columns .${l}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${l}-swatches-columns .${l}-swatch::before {
  flex-shrink: 0;
}
.${l}-swatches-columns .${l}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${l}-swatch`).call(n,t,f,s).call(g=>g.append("div").attr("class",`${l}-swatch-label`).attr("title",i).text(i))):(m=`.${l}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${l}-swatches-wrap .${l}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${l}-swatch`).call(n,t,f,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(g=>g.insert("style","*").text(`.${l}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${l}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",u?`${+u}px`:null).style("width",c===void 0?null:`${+c}px`).style("font-variant",Ot(o,"normal")).call(Xu,h).node()}const eu=new Map([["symbol",E7],["color",xg],["opacity",N7]]);function A7(t,e,n={}){return(r,i)=>{if(!eu.has(r))throw new Error(`unknown legend type: ${r}`);if(r in t)return eu.get(r)(t[r],vg(e,n[r],i),o=>t[o])}}function vg({className:t,...e},{label:n,ticks:r,tickFormat:i}={},o){return $5(o,{className:t,...e},{label:n,ticks:r,tickFormat:i})}function xg(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return C7(t,n);case"ramp":return L4(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function N7({type:t,interpolate:e,...n},{legend:r=!0,color:i=Mn(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return xg({type:t,...n,interpolate:D7(i)},{legend:r,...o})}function D7(t){const{r:e,g:n,b:r}=Mn(t)||Mn(0,0,0);return i=>`rgba(${e},${n},${r},${i})`}function F7(t,e,n){const r=[];for(const[i,o]of eu){const a=n[i];if(a!=null&&a.legend&&i in t){const f=o(t[i],vg(e,t[i],a),s=>t[s]);f!=null&&r.push(f)}}return r}const L7={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},R7={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class I7 extends ne{constructor(e={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:o=r,insetBottom:a=r,insetLeft:f=r,rx:s,ry:u}=e;super(Uo,void 0,e,n==null?L7:R7),this.anchor=j1(n,"anchor",["top","right","bottom","left"]),this.insetTop=St(i),this.insetRight=St(o),this.insetBottom=St(a),this.insetLeft=St(f),this.rx=St(s),this.ry=St(u)}render(e,n,r,i,o){const{marginTop:a,marginRight:f,marginBottom:s,marginLeft:u,width:l,height:h}=i,{anchor:c,insetTop:d,insetRight:p,insetBottom:m,insetLeft:g,rx:b,ry:y}=this,$=u+g,_=l-f-p,M=a+d,w=h-s-m;return Pt(c?"svg:line":"svg:rect",o).datum(0).call(Ce,this,i,o).call(Ee,this).call(dn,this,r).call(ye,this,{}).call(c==="left"?v=>v.attr("x1",$).attr("x2",$).attr("y1",M).attr("y2",w):c==="right"?v=>v.attr("x1",_).attr("x2",_).attr("y1",M).attr("y2",w):c==="top"?v=>v.attr("x1",$).attr("x2",_).attr("y1",M).attr("y2",M):c==="bottom"?v=>v.attr("x1",$).attr("x2",_).attr("y1",w).attr("y2",w):v=>v.attr("x",$).attr("y",M).attr("width",_-$).attr("height",w-M).attr("rx",b).attr("ry",y)).node()}}function P7(t){return new I7(t)}const ns={ariaLabel:"tip",fill:"white",stroke:"currentColor"},O7=new Set(["geometry","href","src","ariaLabel","scales"]);class U7 extends ne{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&En(e)&&tm(e)&&(n={...n,title:zt});const{x:r,y:i,x1:o,x2:a,y1:f,y2:s,anchor:u,monospace:l,fontFamily:h=l?"ui-monospace, monospace":void 0,fontSize:c,fontStyle:d,fontVariant:p,fontWeight:m,lineHeight:g=1,lineWidth:b=20,frameAnchor:y,format:$,textAnchor:_="start",textOverflow:M,textPadding:w=8,title:v,pointerSize:S=12,pathFilter:C="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:f!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:f,scale:"y",optional:s==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:s,scale:"y",optional:f==null},title:{value:v,optional:!0}},n,ns),this.anchor=em(u,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=sf(y),this.textAnchor=Ot(_,"middle"),this.textPadding=+w,this.pointerSize=+S,this.pathFilter=Yt(C),this.lineHeight=+g,this.lineWidth=+b,this.textOverflow=Xm(M),this.monospace=!!l,this.fontFamily=Yt(h),this.fontSize=St(c),this.fontStyle=Yt(d),this.fontVariant=Yt(p),this.fontWeight=Yt(m);for(const N in ns)N in this.channels&&(this[N]=ns[N]);this.splitLines=Zm(this),this.clipLine=Km(this),this.format={...$}}render(e,n,r,i,o){const a=this,{x:f,y:s,fx:u,fy:l}=n,{ownerSVGElement:h,document:c}=o,{anchor:d,monospace:p,lineHeight:m,lineWidth:g}=this,{textPadding:b,pointerSize:y,pathFilter:$}=this,{marginTop:_,marginLeft:M}=i,{x1:w,y1:v,x2:S,y2:C,x:N=w??S,y:T=v??C}=r,R=u?u(e.fx)-M:0,P=l?l(e.fy)-_:0,[q,k]=oo(this,i),B=Lm(r,q),O=Rm(r,k),X=p?sl:fl,W=X(Sr);let H,D;"title"in r?(H=r.channels,D=W7):(H=Y7.call(this,r,n),D=G7);const z=Pt("svg:g",o).call(Ce,this,i,o).call(jm,this).call(ye,this,{x:N&&f,y:T&&s}).call(Z=>Z.selectAll().data(e).enter().append("g").attr("transform",K=>`translate(${Math.round(B(K))},${Math.round(O(K))})`).call(Ee,this).call(K=>K.append("path").attr("filter",$)).call(K=>K.append("text").each(function(U){const I=pi(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const E=D.call(a,U,e,H,n,r);if(typeof E=="string")for(const L of a.splitLines(E))Y(I,{value:a.clipLine(L)});else{const L=new Set;for(const G of E){const{label:F=""}=G;F&&L.has(F)||(L.add(F),Y(I,G))}}})));function Y(Z,{label:K,value:U,color:I,opacity:E}){K??(K=""),U??(U="");const L=I!=null||E!=null;let G,F=g*100;const[ut]=zr(K,F,X,W);if(ut>=0)K=K.slice(0,ut).trimEnd()+Sr,G=U.trim(),U="";else{(K||!U&&!L)&&(U=" "+U);const[ht]=zr(U,F-X(K),X,W);ht>=0&&(U=U.slice(0,ht).trimEnd()+Sr,G=U.trim())}const Q=Z.append("tspan").attr("x",0).attr("dy",`${m}em`).text("");K&&Q.append("tspan").attr("font-weight","bold").text(K),U&&Q.append(()=>c.createTextNode(U)),L&&Q.append("tspan").text(" ").attr("fill",I).attr("fill-opacity",E).style("user-select","none"),G&&Q.append("title").text(G)}function J(){const{width:Z,height:K}=i.facet??i;z.selectChildren().each(function(U){let{x:I,width:E,height:L}=this.getBBox();E=Math.round(E),L=Math.round(L);let G=d;if(G===void 0){G=a.previousAnchor;const Q=B(U)+R,ht=O(U)+P,st=Q+E+b*2<Z,ft=Q-E-b*2>0,Gt=ht+L+y+b*2+7<K,Fn=ht-L-y-b*2>0,fr=(/-left$/.test(G)?st||!ft:st&&!ft)?"left":"right",sr=(/^top-/.test(G)?Gt||!Fn:Gt&&!Fn)?"top":"bottom";G=a.previousAnchor=`${sr}-${fr}`}const F=this.firstChild,ut=this.lastChild;if(F.setAttribute("d",H7(G,y,b,E,L)),I)for(const Q of ut.childNodes)Q.setAttribute("x",-I);ut.setAttribute("y",`${+z7(G,ut.childNodes.length,m).toFixed(6)}em`),ut.setAttribute("transform",`translate(${q7(G,y,b,E,L)})`)}),z.attr("visibility",null)}return e.length&&(z.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(J):typeof requestAnimationFrame<"u"&&requestAnimationFrame(J)),z.node()}}function B7(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=af(e,n)),new U7(t,{...r,x:e,y:n})}function z7(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function q7(t,e,n,r,i){switch(t){case"middle":return[-r/2,i/2];case"top-left":return[n,e+n];case"top":return[-r/2,e/2+n];case"top-right":return[-r-n,e+n];case"right":return[-e/2-r-n,i/2];case"bottom-left":return[n,-e-n];case"bottom":return[-r/2,-e/2-n];case"bottom-right":return[-r-n,-e-n];case"left":return[n+e/2,i/2]}}function H7(t,e,n,r,i){const o=r+n*2,a=i+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function Y7({channels:t},e){var i,o;const n={};let r=this.format;r=lh(r,t,"x"),r=lh(r,t,"y"),this.format=r;for(const a in r){const f=r[a];if(!(f===null||f===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const s=zc(t,a);s&&(n[a]=s)}}for(const a in t){if(a in n||a in r||O7.has(a))continue;const f=zc(t,a);f&&(n[a]=f)}this.facet&&(e.fx&&!("fx"in r)&&(n.fx=!0),e.fy&&!("fy"in r)&&(n.fy=!0));for(const a in n){const f=this.format[a];if(typeof f=="string"){const s=((i=n[a])==null?void 0:i.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(Qt(s)?Qi:Wr)(f)}else if(f===void 0||f===!0){const s=e[a];this.format[a]=s!=null&&s.bandwidth?ul(s,s.domain()):tr}}return n}function lh(t,e,n){if(!(n in t))return t;const r=`${n}1`,i=`${n}2`;if((r in t||!(r in e))&&(i in t||!(i in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([f])=>f===n)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function W7(t,e,{title:n}){return tr(n.value[t],t)}function*G7(t,e,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:$a(r,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:hh(r,n,"x"),value:ch(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:hh(r,n,"y"),value:ch(this.format.y2,n.y1,a,t)};else{const f=a.value[t],s=a.scale;if(!Sn(f)&&s==null)continue;yield{label:$a(r,n,o),value:this.format[o](f,t),color:s==="color"?i[o][t]:null,opacity:s==="opacity"?i[o][t]:null}}}}function ch(t,e,n,r){var i;return(i=n.hint)!=null&&i.length?`${t(n.value[r]-e.value[r],r)}`:`${t(e.value[r],r)}${t(n.value[r],r)}`}function hh(t,e,n){const r=$a(t,e,`${n}1`,n),i=$a(t,e,`${n}2`,n);return r===i?r:`${r}${i}`}function $a(t,e,n,r=n){const i=e[n],o=t[(i==null?void 0:i.scale)??n];return String((o==null?void 0:o.label)??(i==null?void 0:i.label)??r)}function Dn(t={}){var W;const{facet:e,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:f}=t,s=Vu(t.className),u=t.marks===void 0?[]:ph(t.marks);u.push(...t9(u));const l=Q7(e,t),h=new Map;for(const H of u){const D=mh(H,l,t);D&&h.set(H,D)}const c=new Map;l&&ii(c,[l],t),ii(c,h,t);const d=ph(e9(u,c,t));for(const H of d){const D=mh(H,l,t);D&&h.set(H,D)}u.unshift(...d);let p=b4(c,t);if(p!==void 0){const H=l?Jf(p,l):void 0;for(const z of u){if(z.facet===null||z.facet==="super")continue;const Y=h.get(z);Y!==void 0&&(Y.facetsIndex=z.fx!=null||z.fy!=null?Jf(p,Y):H)}const D=new Set;for(const{facetsIndex:z}of h.values())z==null||z.forEach((Y,J)=>{(Y==null?void 0:Y.length)>0&&D.add(J)});p.forEach(0<D.size&&D.size<p.length?(z,Y)=>z.empty=!D.has(Y):z=>z.empty=!1);for(const z of u)if(z.facet==="exclude"){const Y=h.get(z);Y!==void 0&&(Y.facetsIndex=w4(Y.facetsIndex))}}for(const H of Et.keys())Vs(t[H])&&H!=="fx"&&H!=="fy"&&c.set(H,[]);const m=new Map;for(const H of u){if(m.has(H))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:D,channels:z}=h.get(H)??{},{data:Y,facets:J,channels:Z}=H.initialize(D,z,t);ll(Z,t),m.set(H,{data:Y,facets:J,channels:Z})}const g=Qs(ii(c,m,t),t),b=m4(g,u,t);a4(g,b);const y=Zc(g),{fx:$,fy:_}=y,M=$||_?Cm(g,b):b,w=$||_?s9(y,b):b,v=ju(t),S=v.document,C=Fa("svg").call(S.documentElement);let N=C;v.ownerSVGElement=C,v.className=s,v.projection=_8(t,M),v.filterFacets=(H,D)=>Jf(p,{channels:D,groups:tl(H,D)}),v.getMarkState=H=>{const D=m.get(H),z=h.get(H);return{...D,channels:{...D.channels,...z==null?void 0:z.channels}}},v.dispatchValue=H=>{N.value!==H&&(N.value=H,N.dispatchEvent(new Event("input",{bubbles:!0})))};const T=new Set;for(const[H,D]of m)if(H.initializer!=null){const z=H.facet==="super"?w:M,Y=H.initializer(D.data,D.facets,D.channels,y,z,v);if(Y.data!==void 0&&(D.data=Y.data),Y.facets!==void 0&&(D.facets=Y.facets),Y.channels!==void 0){const{fx:J,fy:Z,...K}=Y.channels;K7(K),Object.assign(D.channels,K);for(const U of Object.values(K)){const{scale:I}=U;I!=null&&!k5(Et.get(I))&&(Mg(U,t),T.add(I))}(J!=null||Z!=null)&&h.set(H,!0)}}if(T.size){const H=new Map;ii(H,m,t,J=>T.has(J)),ii(c,m,t,J=>T.has(J));const D=f9(Qs(H,t),g),{scales:z,...Y}=Zc(D);Object.assign(g,D),Object.assign(y,Y),Object.assign(y.scales,z)}let R,P;p!==void 0&&(R={x:$==null?void 0:$.domain(),y:_==null?void 0:_.domain()},p=y4(p,R),P=_4($,_,b));for(const[H,D]of m)D.values=H.scale(D.channels,y,v);const{width:q,height:k}=b;pi(C).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",q).attr("height",k).attr("viewBox",`0 0 ${q} ${k}`).attr("aria-label",a).attr("aria-description",f).call(H=>H.append("style").text(`.${s} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${s} text,
.${s} tspan {
  white-space: pre;
}`)).call(Xu,n);for(const H of u){const{channels:D,values:z,facets:Y}=m.get(H);if(p===void 0||H.facet==="super"){let J=null;if(Y&&(J=Y[0],J=H.filter(J,D,z),J.length===0))continue;const Z=H.render(J,y,z,w,v);if(Z==null)continue;C.appendChild(Z)}else{let J;for(const Z of p){if(!(((W=H.facetAnchor)==null?void 0:W.call(H,p,R,Z))??!Z.empty))continue;let K=null;if(Y){const I=h.has(H);if(K=Y[I?Z.i:0],K=H.filter(K,D,z),K.length===0)continue;!I&&K===Y[0]&&(K=d5(K)),K.fx=Z.x,K.fy=Z.y,K.fi=Z.i}const U=H.render(K,y,z,M,v);if(U!=null){(J??(J=pi(C).append("g"))).append(()=>U).datum(Z);for(const I of["aria-label","aria-description","aria-hidden","transform"])U.hasAttribute(I)&&(J.attr(I,U.getAttribute(I)),U.removeAttribute(I))}}J==null||J.selectChildren().attr("transform",P)}}const B=F7(g,v,t),{figure:O=r!=null||i!=null||o!=null||B.length>0}=t;O&&(N=S.createElement("figure"),N.className=`${s}-figure`,N.style.maxWidth="initial",r!=null&&N.append(dh(S,r,"h2")),i!=null&&N.append(dh(S,i,"h3")),N.append(...B,C),o!=null&&N.append(V7(S,o))),N.scale=d4(y.scales),N.legend=A7(g,v,t);const X=o8();return X>0&&pi(C).append("text").attr("x",q).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${X.toLocaleString("en-US")} warning${X===1?"":"s"}. Please check the console.`),N}function dh(t,e,n){if(e.ownerDocument)return e;const r=t.createElement(n);return r.append(e),r}function V7(t,e){const n=t.createElement("figcaption");return n.append(e),n}function X7({marks:t=[],...e}={}){return Dn({...e,marks:[...t,this]})}ne.prototype.plot=X7;function ph(t){return t.flat(1/0).filter(e=>e!=null).map(j7)}function j7(t){return typeof t.render=="function"?t:new Z7(t)}class Z7 extends ne{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function ll(t,e){for(const n in t)Mg(t[n],e);return t}function Mg(t,e){const{scale:n,transform:r=!0}=t;if(n==null||!r)return;const{type:i,percent:o,interval:a,transform:f=o?s=>s*100:J1(a,i)}=e[n]??{};f!=null&&(t.value=At(t.value,f),t.transform=!1)}function K7(t){for(const e in t)um(e,t[e])}function ii(t,e,n,r=f5){var i,o;for(const{channels:a}of e.values())for(const f in a){const s=a[f],{scale:u}=s;if(u!=null&&r(u))if(u==="projection"){if(!M8(n)){const l=((i=n.x)==null?void 0:i.domain)===void 0,h=((o=n.y)==null?void 0:o.domain)===void 0;if(l||h){const[c,d]=S8(s);l&&rs(t,"x",c),h&&rs(t,"y",d)}}}else rs(t,u,s)}return t}function rs(t,e,n){const r=t.get(e);r!==void 0?r.push(n):t.set(e,[n])}function Q7(t,e){if(t==null)return;const{x:n,y:r}=t;if(n==null&&r==null)return;const i=ae(t.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Li(i,{value:n,scale:"fx"})),r!=null&&(o.fy=Li(i,{value:r,scale:"fy"})),ll(o,e);const a=tl(i,o);return{channels:o,groups:a,data:t.data}}function mh(t,e,n){var s;if(t.facet===null||t.facet==="super")return;const{fx:r,fy:i}=t;if(r!=null||i!=null){const u=ae(t.data??r??i);if(u===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(u===null)return;const l={};return r!=null&&(l.fx=Li(u,{value:r,scale:"fx"})),i!=null&&(l.fy=Li(u,{value:i,scale:"fy"})),ll(l,n),{channels:l,groups:tl(u,l)}}if(e===void 0)return;const{channels:o,groups:a,data:f}=e;if(t.facet!=="auto"||t.data===f)return{channels:o,groups:a};f.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((s=ae(t.data))==null?void 0:s.length)===f.length&&vn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function J7(t,e={}){return Ur({...e,x:null,y:null},(n,r,i,o,a,f)=>f.getMarkState(t))}function t9(t){const e=[];for(const n of t){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i}=r;i=/^x$/i.test(i)?D4:/^y$/i.test(i)?F4:N4,r=i(J7(n,r)),r.title=null;const o=B7(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,e.push(o)}}return e}function e9(t,e,n){let{projection:r,x:i={},y:o={},fx:a={},fy:f={},axis:s,grid:u,facet:l={},facet:{axis:h=s,grid:c}=l,x:{axis:d=s,grid:p=d===null?null:u}=i,y:{axis:m=s,grid:g=m===null?null:u}=o,fx:{axis:b=h,grid:y=b===null?null:c}=a,fy:{axis:$=h,grid:_=$===null?null:c}=f}=n;(r||!Vs(i)&&!gh("x",t))&&(d=p=null),(r||!Vs(o)&&!gh("y",t))&&(m=g=null),e.has("fx")||(b=y=null),e.has("fy")||($=_=null),d===void 0&&(d=!No(t,"x")),m===void 0&&(m=!No(t,"y")),b===void 0&&(b=!No(t,"fx")),$===void 0&&($=!No(t,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),b===!0&&(b=d==="top"||d===null?"bottom":"top"),$===!0&&($=m==="right"||m===null?"left":"right");const M=[];return Ao(M,_,_7,f),Eo(M,$,h7,"right","left",l,f),Ao(M,y,v7,a),Eo(M,b,d7,"top","bottom",l,a),Ao(M,g,y7,o),Eo(M,m,fg,"left","right",n,o),Ao(M,p,w7,i),Eo(M,d,sg,"bottom","top",n,i),M}function Eo(t,e,n,r,i,o,a){if(!e)return;const f=n9(e);a=r9(f?r:e,o,a);const{line:s}=a;(n===fg||n===sg)&&s&&!Fi(s)&&t.push(P7(i9(a))),t.push(n(a)),f&&t.push(n({...a,anchor:i,label:null}))}function Ao(t,e,n,r){!e||Fi(e)||t.push(n(o9(e,r)))}function n9(t){return/^\s*both\s*$/i.test(t)}function r9(t,e,{line:n=e.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:s,fontVariant:u,ariaLabel:l,ariaDescription:h,label:c=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:s,fontVariant:u,ariaLabel:l,ariaDescription:h,label:c,labelAnchor:d,labelArrow:p,labelOffset:m}}function i9(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function o9(t,{stroke:e=ff(t)?t:void 0,ticks:n=a9(t)?t:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function a9(t){switch(typeof t){case"number":return!0;case"string":return!ff(t)}return En(t)||typeof(t==null?void 0:t.range)=="function"}function No(t,e){const n=`${e}-axis `;return t.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function gh(t,e){for(const n of e)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===t||i==="projection")return!0}return!1}function f9(t,e){for(const n in t){const r=t[n],i=e[n];r.label===void 0&&i&&(r.label=i.label)}return t}function s9({fx:t,fy:e},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:f,height:s}=Ju(n),u=t&&bh(t),l=e&&bh(e);return{marginTop:e?l[0]:r,marginRight:t?f-u[1]:i,marginBottom:e?s-l[1]:o,marginLeft:t?u[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:s}}function bh(t){const e=t.domain();let n=t(e[0]),r=t(e[e.length-1]);return r<n&&([n,r]=[r,n]),[n,r+t.bandwidth()]}const u9=new Map([["basis",L6],["basis-closed",R6],["basis-open",I6],["bundle",P6],["bump-x",M6],["bump-y",$6],["cardinal",O6],["cardinal-closed",U6],["cardinal-open",B6],["catmull-rom",z6],["catmull-rom-closed",q6],["catmull-rom-open",H6],["linear",Ja],["linear-closed",Y6],["monotone-x",W6],["monotone-y",G6],["natural",V6],["step",X6],["step-after",Z6],["step-before",j6]]);function l9(t=Ja,e){if(typeof t=="function")return t;const n=u9.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function $g(t=qr,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?qr:l9(t,e)}function qr(t){return Ja(t)}function c9(t={y:"count"},e={}){[t,e]=m9(t,e);const{x:n,y:r}=e;return p9(g9(n,e,zt),null,null,r,t,nl(e))}function h9(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=Gu}=n,i={filter:null};return n[e]!=null&&(i[e]=r),n[`${e}1`]!=null&&(i[`${e}1`]=r),n[`${e}2`]!=null&&(i[`${e}2`]=r),t(i,n)}function d9(t={}){return h9(c9,"y",pf(t,"x"))}function p9(t,e,n,r,{data:i=sm,filter:o=Ma,sort:a,reverse:f,...s}={},u={}){t=yh(t),e=yh(e),s=y9(s,u),i=Tg(i,zt),a=a==null?void 0:Sg("sort",a,u),o=o==null?void 0:kg("filter",o,u),n!=null&&So(s,"x","x1","x2")&&(n=null),r!=null&&So(s,"y","y1","y2")&&(r=null);const[l,h]=Ke(t),[c,d]=Ke(t),[p,m]=Ke(e),[g,b]=Ke(e),[y,$]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[_,M]=Ke(y),{x:w,y:v,z:S,fill:C,stroke:N,x1:T,x2:R,y1:P,y2:q,domain:k,cumulative:B,thresholds:O,interval:X,...W}=u,[H,D]=Ke(S),[z]=ln(C),[Y]=ln(N),[J,Z]=Ke(z),[K,U]=Ke(Y);return{..."z"in u&&{z:H||S},..."fill"in u&&{fill:J||C},..."stroke"in u&&{stroke:K||N},...lf(W,(I,E,L)=>{const G=Q1(Rt(I,y),L==null?void 0:L[$]),F=Rt(I,S),ut=Rt(I,z),Q=Rt(I,Y),ht=B5(s,{z:F,fill:ut,stroke:Q}),st=[],ft=[],Gt=G&&M([]),Fn=F&&D([]),fr=ut&&Z([]),sr=Q&&U([]),qt=t&&h([]),uo=t&&d([]),dl=e&&m([]),Bg=e&&b([]),zg=v9(t==null?void 0:t(I),e==null?void 0:e(I));let qg=0;for(const ur of s)ur.initialize(I);a&&a.initialize(I),o&&o.initialize(I);for(const ur of E){const pl=[];for(const Zr of s)Zr.scope("facet",ur);a&&a.scope("facet",ur),o&&o.scope("facet",ur);for(const[Zr,Hg]of Pc(ur,ht))for(const[Yg,lo]of Pc(Hg,G))for(const[Ae,Ln]of zg(lo))if(!(o&&!o.reduce(Ae,Ln))){pl.push(qg++),ft.push(i.reduceIndex(Ae,I,Ln)),G&&Gt.push(Yg),F&&Fn.push(ht===F?Zr:F[(Ae.length>0?Ae:lo)[0]]),ut&&fr.push(ht===ut?Zr:ut[(Ae.length>0?Ae:lo)[0]]),Q&&sr.push(ht===Q?Zr:Q[(Ae.length>0?Ae:lo)[0]]),qt&&(qt.push(Ln.x1),uo.push(Ln.x2)),dl&&(dl.push(Ln.y1),Bg.push(Ln.y2));for(const Wg of s)Wg.reduce(Ae,Ln);a&&a.reduce(Ae)}st.push(pl)}return z5(st,a,f),{data:ft,facets:st}}),...!So(s,"x")&&(l?{x1:l,x2:c,x:Xs(l,c)}:{x:w,x1:T,x2:R}),...!So(s,"y")&&(p?{y1:p,y2:g,y:Xs(p,g)}:{y:v,y1:P,y2:q}),..._&&{[$]:_},...Object.fromEntries(s.map(({name:I,output:E})=>[I,E]))}}function m9({cumulative:t,domain:e,thresholds:n,interval:r,...i},o){return[i,{cumulative:t,domain:e,thresholds:n,interval:r,...o}]}function g9(t,{cumulative:e,domain:n,thresholds:r,interval:i},o){return t={...eo(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=r),t.interval===void 0&&(t.interval=i),t.value===void 0&&(t.value=o),t.thresholds=b9(t.thresholds,t.interval),t}function yh(t){if(t==null)return;const{value:e,cumulative:n,domain:r=le,thresholds:i}=t,o=a=>{let f=Rt(a,e),s;if(Qt(f)||w9(i)){f=At(f,X1,Float64Array);let[l,h]=typeof r=="function"?r(f):r,c=typeof i=="function"&&!wr(i)?i(f,l,h):i;typeof c=="number"&&(c=K0(l,h,c)),wr(c)&&(r===le&&(l=c.floor(l),h=c.offset(c.floor(h))),c=c.range(l,c.offset(h))),s=c}else{f=Re(f);let[l,h]=typeof r=="function"?r(f):r,c=typeof i=="function"&&!wr(i)?i(f,l,h):i;if(typeof c=="number")if(r===le){let d=Wo(l,h,c);if(isFinite(d))if(d>0){let p=Math.round(l/d),m=Math.round(h/d);p*d<=l||--p,m*d>h||++m;let g=m-p+1;c=new Float64Array(g);for(let b=0;b<g;++b)c[b]=(p+b)*d}else if(d<0){d=-d;let p=Math.round(l*d),m=Math.round(h*d);p/d<=l||--p,m/d>h||++m;let g=m-p+1;c=new Float64Array(g);for(let b=0;b<g;++b)c[b]=(p+b)/d}else c=[l];else c=[l]}else c=xi(l,h,c);else wr(c)&&(r===le&&(l=c.floor(l),h=c.offset(c.floor(h))),c=c.range(l,c.offset(h)));s=c}const u=[];if(s.length===1)u.push([s[0],s[0]]);else for(let l=1;l<s.length;++l)u.push([s[l-1],s[l]]);return u.bin=(n<0?M9:n>0?x9:cl)(u,s,f),u};return o.label=or(e),o}function b9(t,e,n=_h){if(t===void 0)return e===void 0?n:Vr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return W2;case"scott":return ld;case"sturges":return z2;case"auto":return _h}return Ru(t)}return t}function y9(t,e){return P5(t,e,Sg)}function Sg(t,e,n){return am(t,e,n,kg)}function kg(t,e,n){return fm(t,e,n,Tg)}function Tg(t,e){return Wu(t,e,_9)}function _9(t){switch(`${t}`.toLowerCase()){case"x":return $9;case"x1":return k9;case"x2":return T9;case"y":return S9;case"y1":return C9;case"y2":return E9}throw new Error(`invalid bin reduce: ${t}`)}function _h(t,e,n){return Math.min(200,ld(t,e,n))}function w9(t){return g5(t)||En(t)&&Qt(t)}function v9(t,e){return t&&e?function*(n){const r=t.bin(n);for(const[i,[o,a]]of t.entries()){const f=e.bin(r[i]);for(const[s,[u,l]]of e.entries())yield[f[s],{x1:o,y1:u,x2:a,y2:l}]}}:t?function*(n){const r=t.bin(n);for(const[i,[o,a]]of t.entries())yield[r[i],{x1:o,x2:a}]}:function*(n){const r=e.bin(n);for(const[i,[o,a]]of e.entries())yield[r[i],{y1:o,y2:a}]}}function cl(t,e,n){return e=Re(e),r=>{var o;const i=t.map(()=>[]);for(const a of r)(o=i[ka(e,n[a])-1])==null||o.push(a);return i}}function x9(t,e,n){const r=cl(t,e,n);return i=>{const o=r(i);for(let a=1,f=o.length;a<f;++a){const s=o[a-1],u=o[a];for(const l of s)u.push(l)}return o}}function M9(t,e,n){const r=cl(t,e,n);return i=>{const o=r(i);for(let a=o.length-2;a>=0;--a){const f=o[a+1],s=o[a];for(const u of f)s.push(u)}return o}}function Cg(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const $9={reduceIndex(t,e,{x1:n,x2:r}){return Cg(n,r)}},S9={reduceIndex(t,e,{y1:n,y2:r}){return Cg(n,r)}},k9={reduceIndex(t,e,{x1:n}){return n}},T9={reduceIndex(t,e,{x2:n}){return n}},C9={reduceIndex(t,e,{y1:n}){return n}},E9={reduceIndex(t,e,{y2:n}){return n}};function A9(t={}){return Z1(t)?t:{...t,y:zt}}function N9(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,r=new Uint8Array(n);let i=0;for(const f of e)for(const s of f)r[s]&&++i,r[s]=1;if(i===0)return{data:t,facets:e};t=Di(t);const o=t[G1]=new Uint32Array(n+i);e=e.map(f=>Di(f,Uint32Array));let a=n;r.fill(0);for(const f of e)for(let s=0,u=f.length;s<u;++s){const l=f[s];r[l]?(f[s]=a,t[a]=t[l],o[a]=l,++a):o[l]=l,r[l]=1}return{data:t,facets:e}}function D9(t={},e={}){arguments.length===1&&([t,e]=L9(t));const{x1:n,x:r=n,y:i,...o}=e,[a,f,s,u]=I9(r,i,"x","y",t,o);return{...a,x1:n,x:f,y1:s,y2:u,y:Xs(s,u)}}function F9({y:t,y1:e,y2:n,...r}={}){return r=pf(r,"x"),e===void 0&&n===void 0?D9({y:t,...r}):([e,n]=h5(t,e,n),{...r,y1:e,y2:n})}function L9(t){const{offset:e,order:n,reverse:r,...i}=t;return[{offset:e,order:n,reverse:r},i]}const R9={length:!0};function I9(t,e=a5,n,r,{offset:i,order:o,reverse:a},f){if(e===null)throw new Error(`stack requires ${r}`);const s=K1(f),[u,l]=Ke(t),[h,c]=xa(e),[d,p]=xa(e);return h.hint=d.hint=R9,i=P9(i),o=B9(o,i,r),[lf(f,(m,g,b)=>{({data:m,facets:g}=N9(m,g));const y=t==null?void 0:l(Q1(Rt(m,t),b==null?void 0:b[n])),$=Rt(m,e,Float64Array),_=Rt(m,s),M=o&&o(m,y,$,_),w=m.length,v=c(new Float64Array(w)),S=p(new Float64Array(w)),C=[];for(const N of g){const T=y?Array.from(Ea(N,R=>y[R]).values()):[N];if(M)for(const R of T)R.sort(M);for(const R of T){let P=0,q=0;a&&R.reverse();for(const k of R){const B=$[k];B<0?P=S[k]=(v[k]=P)+B:B>0?q=S[k]=(v[k]=q)+B:S[k]=v[k]=q}}C.push(T)}return i&&i(C,v,S,_),{data:m,facets:g}}),u,h,d]}function P9(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return O9;case"center":case"silhouette":return U9;case"wiggle":return Ag}throw new Error(`unknown offset: ${t}`)}}function Eg(t,e){let n=0,r=0;for(const i of t){const o=e[i];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function O9(t,e,n){for(const r of t)for(const i of r){const[o,a]=Eg(i,n);for(const f of i){const s=1/(a-o||1);e[f]=s*(e[f]-o),n[f]=s*(n[f]-o)}}}function U9(t,e,n){for(const r of t){for(const i of r){const[o,a]=Eg(i,n);for(const f of i){const s=(a+o)/2;e[f]-=s,n[f]-=s}}Ng(r,e,n)}Dg(t,e,n)}function Ag(t,e,n,r){for(const i of t){const o=new Gn;let a=0;for(const f of i){let s=-1;const u=f.map(d=>Math.abs(n[d]-e[d])),l=f.map(d=>{s=r?r[d]:++s;const p=n[d]-e[d],m=o.has(s)?p-o.get(s):0;return o.set(s,p),m}),h=[0,...L2(l)];for(const d of f)e[d]+=a,n[d]+=a;const c=xn(u);c&&(a-=xn(u,(d,p)=>(l[p]/2+h[p])*d)/c)}Ng(i,e,n)}Dg(t,e,n)}function Ng(t,e,n){const r=on(t,i=>on(i,o=>e[o]));for(const i of t)for(const o of i)e[o]-=r,n[o]-=r}function Dg(t,e,n){const r=t.length;if(r===1)return;const i=t.map(f=>f.flat()),o=i.map(f=>(on(f,s=>e[s])+ge(f,s=>n[s]))/2),a=on(o);for(let f=0;f<r;f++){const s=a-o[f];for(const u of i[f])e[u]+=s,n[u]+=s}}function B9(t,e,n){if(t===void 0&&e===Ag)return wh(Se);if(t!=null){if(typeof t=="string"){const r=t.startsWith("-"),i=r?va:Se;switch((r?t.slice(1):t).toLowerCase()){case"value":case n:return z9(i);case"z":return q9(i);case"sum":return H9(i);case"appearance":return Y9(i);case"inside-out":return wh(i)}return vh(V1(t))}if(typeof t=="function")return(t.length===1?vh:W9)(t);if(Array.isArray(t))return G9(t);throw new Error(`invalid order: ${t}`)}}function z9(t){return(e,n,r)=>(i,o)=>t(r[i],r[o])}function q9(t){return(e,n,r,i)=>(o,a)=>t(i[o],i[a])}function H9(t){return bf(t,(e,n,r,i)=>ou(cn(e),o=>xn(o,a=>r[a]),o=>i[o]))}function Y9(t){return bf(t,(e,n,r,i)=>ou(cn(e),o=>n[ud(o,a=>r[a])],o=>i[o]))}function wh(t){return bf(t,(e,n,r,i)=>{const o=cn(e),a=ou(o,h=>n[ud(h,c=>r[c])],h=>i[h]),f=xr(o,h=>xn(h,c=>r[c]),h=>i[h]),s=[],u=[];let l=0;for(const h of a)l<0?(l+=f.get(h),s.push(h)):(l-=f.get(h),u.push(h));return u.reverse().concat(s)})}function vh(t){return e=>{const n=Rt(e,t);return(r,i)=>Se(n[r],n[i])}}function W9(t){return e=>(n,r)=>t(e[n],e[r])}function G9(t){return bf(Se,()=>t)}function bf(t,e){return(n,r,i,o)=>{if(!o)throw new Error("missing channel: z");const a=new Gn(e(n,r,i,o).map((f,s)=>[f,s]));return(f,s)=>t(a.get(o[f]),a.get(o[s]))}}const V9={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class X9 extends ne{constructor(e,n={}){const{x1:r,y1:i,x2:o,y2:a,curve:f,tension:s}=n;super(e,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,V9),this.curve=$g(f,s),so(this,n)}project(e,n,r){this.curve!==qr&&super.project(e,n,r)}render(e,n,r,i,o){const{x1:a,y1:f,x2:s=a,y2:u=f}=r,{curve:l}=this;return Pt("svg:g",o).call(Ce,this,i,o).call(ye,this,n).call(h=>h.selectAll().data(e).enter().append("path").call(Ee,this).attr("d",l===qr&&o.projection?j9(o.projection,a,f,s,u):c=>{const d=wn(),p=l(d);return p.lineStart(),p.point(a[c],f[c]),p.point(s[c],u[c]),p.lineEnd(),d}).call(dn,this,r).call(mf,this,r,o)).node()}}function j9(t,e,n,r,i){const o=Ua(t);return e=Re(e),n=Re(n),r=Re(r),i=Re(i),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[r[a],i[a]]]})}function Fg(t,{x:e,x1:n,x2:r,y:i,y1:o,y2:a,...f}={}){return[n,r]=xh(e,n,r),[o,a]=xh(i,o,a),new X9(t,{...f,x1:n,x2:r,y1:o,y2:a})}function xh(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class Lg extends ne{constructor(e,n,r={},i){super(e,n,r,i);const{inset:o=0,insetTop:a=o,insetRight:f=o,insetBottom:s=o,insetLeft:u=o,rx:l,ry:h}=r;this.insetTop=St(a),this.insetRight=St(f),this.insetBottom=St(s),this.insetLeft=St(u),this.rx=Ot(l,"auto"),this.ry=Ot(h,"auto")}render(e,n,r,i,o){const{rx:a,ry:f}=this;return Pt("svg:g",o).call(Ce,this,i,o).call(this._transform,this,n).call(s=>s.selectAll().data(e).enter().append("rect").call(Ee,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(lt,"rx",a).call(lt,"ry",f).call(dn,this,r)).node()}_x(e,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?o=>n[o]+i:r+i}_y(e,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?o=>n[o]+i:r+i}_width({x:e},{x:n},{marginRight:r,marginLeft:i,width:o}){const{insetLeft:a,insetRight:f}=this,s=n&&e?e.bandwidth():o-r-i;return Math.max(0,s-a-f)}_height({y:e},{y:n},{marginTop:r,marginBottom:i,height:o}){const{insetTop:a,insetBottom:f}=this,s=n&&e?e.bandwidth():o-r-i;return Math.max(0,s-a-f)}}const Z9={ariaLabel:"bar"};class K9 extends Lg{constructor(e,n={}){const{x:r,y1:i,y2:o}=n;super(e,{y1:{value:i,scale:"y"},y2:{value:o,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,Z9)}_transform(e,n,{y:r}){e.call(ye,n,{y:r},0,0)}_y({y:e},{y1:n,y2:r},{marginTop:i}){const{insetTop:o}=this;return Br(e)?i+o:a=>Math.min(n[a],r[a])+o}_height({y:e},{y1:n,y2:r},{marginTop:i,marginBottom:o,height:a}){const{insetTop:f,insetBottom:s}=this;return Br(e)?a-i-o-f-s:u=>Math.max(0,Math.abs(r[u]-n[u])-f-s)}}function Q9(t,e={}){return c5(e)||(e={...e,x:Iu,y2:zt}),new K9(t,F9(Ym(A9(e))))}const J9={ariaLabel:"cell"};class tx extends Lg{constructor(e,{x:n,y:r,...i}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,J9)}_transform(e,n){e.call(ye,n,{},0,0)}}function ex(t,{x:e,y:n,...r}={}){return[e,n]=af(e,n),new tx(t,{...r,x:e,y:n})}const nx={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function rx(t){return t.sort===void 0&&t.reverse===void 0?L5({channel:"-r"},t):t}class ix extends ne{constructor(e,n={}){const{x:r,y:i,r:o,rotate:a,symbol:f=Ai,frameAnchor:s}=n,[u,l]=Wt(a,0),[h,c]=D5(f),[d,p]=Wt(o,h==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:nf,optional:!0},rotate:{value:u,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},rx(n),nx),this.r=p,this.rotate=l,this.symbol=c,this.frameAnchor=sf(s);const{channels:m}=this,{symbol:g}=m;if(g){const{fill:b,stroke:y}=m;g.hint={fill:b?b.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:y?y.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,i,o){const{x:a,y:f}=n,{x:s,y:u,r:l,rotate:h,symbol:c}=r,{r:d,rotate:p,symbol:m}=this,[g,b]=oo(this,i),y=m===Ai,$=l?void 0:d*d*Math.PI;return Fu(d)&&(e=[]),Pt("svg:g",o).call(Ce,this,i,o).call(ye,this,{x:s&&a,y:u&&f}).call(_=>_.selectAll().data(e).enter().append(y?"circle":"path").call(Ee,this).call(y?M=>{M.attr("cx",s?w=>s[w]:g).attr("cy",u?w=>u[w]:b).attr("r",l?w=>l[w]:d)}:M=>{M.attr("transform",il`translate(${s?w=>s[w]:g},${u?w=>u[w]:b})${h?w=>` rotate(${h[w]})`:p?` rotate(${p})`:""}`).attr("d",l&&c?w=>{const v=wn();return c[w].draw(v,l[w]*l[w]*Math.PI),v}:l?w=>{const v=wn();return m.draw(v,l[w]*l[w]*Math.PI),v}:c?w=>{const v=wn();return c[w].draw(v,$),v}:(()=>{const w=wn();return m.draw(w,$),w})())}).call(dn,this,r)).node()}}function Rg(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=af(e,n)),new ix(t,{...r,x:e,y:n})}const ox={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ax extends ne{constructor(e,n={}){const{x:r,y:i,z:o,curve:a,tension:f}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:K1(n),optional:!0}},n,ox),this.z=o,this.curve=$g(a,f),so(this,n)}filter(e){return e}project(e,n,r){this.curve!==qr&&super.project(e,n,r)}render(e,n,r,i,o){const{x:a,y:f}=r,{curve:s}=this;return Pt("svg:g",o).call(Ce,this,i,o).call(ye,this,n).call(u=>u.selectAll().data(m8(e,[a,f],this,r)).enter().append("path").call(Ee,this).call(h8,this,r).call(O4,this,r,o).attr("d",s===qr&&o.projection?fx(o.projection,a,f):x6().curve(s).defined(l=>l>=0).x(l=>a[l]).y(l=>f[l]))).node()}}function fx(t,e,n){const r=Ua(t);return e=Re(e),n=Re(n),i=>{let o=[];const a=[o];for(const f of i)f===-1?(o=[],a.push(o)):o.push([e[f],n[f]]);return r({type:"MultiLineString",coordinates:a})}}function sx(t,{x:e=Iu,y:n=zt,...r}={}){return new ax(t,d9({...r,x:e,y:n}))}const ux={ariaLabel:"tick",fill:null,stroke:"currentColor"};class lx extends ne{constructor(e,n,r){super(e,n,r,ux),so(this,r)}render(e,n,r,i,o){return Pt("svg:g",o).call(Ce,this,i,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Ee,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(dn,this,r).call(mf,this,r,o)).node()}}class cx extends lx{constructor(e,n={}){const{x:r,y:i,inset:o=0,insetTop:a=o,insetBottom:f=o}=n;super(e,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=St(a),this.insetBottom=St(f)}_transform(e,n,{x:r}){e.call(ye,n,{x:r},jt,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&e?o=>n[o]+i:r+i}_y2({y:e},{y:n},{height:r,marginBottom:i}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:r-i-o}}function Ig(t,{x:e=zt,...n}={}){return new cx(t,{...n,x:e})}function hx(t){let e,n,r,i,o,a;return{c(){e=A("main"),n=A("div"),o=j(),a=A("div"),a.textContent=`Each note is represented by a tick placed at its onset time from left to
        right. A smaller gap indicates an early note.`,V(n,"width",r=t[0]+"px"),V(n,"height",i=t[1]+"px"),re(e,"width",t[0]+"px"),re(e,"margin","auto")},m(f,s){nt(f,e,s),x(e,n),t[4](n),x(e,o),x(e,a)},p(f,[s]){s&1&&r!==(r=f[0]+"px")&&V(n,"width",r),s&2&&i!==(i=f[1]+"px")&&V(n,"height",i),s&1&&re(e,"width",f[0]+"px")},i:$t,o:$t,d(f){f&&et(e),t[4](null)}}}function dx(t,e,n){let{pattern:r}=e,{width:i=800}=e,{height:o=100}=e,a;er(()=>{const s=Dn({width:i,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Ig(r,{x:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function f(s){Be[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,f]}class Ii extends ee{constructor(e){super(),te(this,e,dx,hx,Jt,{pattern:3,width:0,height:1})}}function px(t){let e,n,r,i,o,a;return{c(){e=A("main"),n=A("div"),o=j(),a=A("div"),a.textContent=`For each note but the first, the bars' height shows the distance to the
    previous note. A smaller bar indicates an early note.`,V(n,"width",r=t[0]+"px"),V(n,"height",i=t[1]+"px"),re(e,"width",t[0]+"px"),re(e,"margin","auto")},m(f,s){nt(f,e,s),x(e,n),t[4](n),x(e,o),x(e,a)},p(f,[s]){s&1&&r!==(r=f[0]+"px")&&V(n,"width",r),s&2&&i!==(i=f[1]+"px")&&V(n,"height",i),s&1&&re(e,"width",f[0]+"px")},i:$t,o:$t,d(f){f&&et(e),t[4](null)}}}function mx(t,e,n){let{pattern:r}=e,{width:i=800}=e,{height:o=100}=e,a;er(()=>{const s=r.map((l,h)=>h===0?0:l-r[h-1]),u=Dn({width:i,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[Q9(s,{x:(l,h)=>h+1,y:l=>l})]});n(2,a.textContent="",a),a.appendChild(u)});function f(s){Be[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,f]}class Pi extends ee{constructor(e){super(),te(this,e,mx,px,Jt,{pattern:3,width:0,height:1})}}function gx(t){let e,n,r,i,o,a;return{c(){e=A("main"),n=A("div"),o=j(),a=A("div"),a.textContent=`For each note but the first, the rectangles' color shows the distance to the
    previous note. A brighter recangle indicates an early note.`,V(n,"width",r=t[0]+"px"),V(n,"height",i=t[1]+"px"),re(e,"width",t[0]+"px"),re(e,"margin","auto")},m(f,s){nt(f,e,s),x(e,n),t[4](n),x(e,o),x(e,a)},p(f,[s]){s&1&&r!==(r=f[0]+"px")&&V(n,"width",r),s&2&&i!==(i=f[1]+"px")&&V(n,"height",i),s&1&&re(e,"width",f[0]+"px")},i:$t,o:$t,d(f){f&&et(e),t[4](null)}}}function bx(t,e,n){let{pattern:r}=e,{width:i=800}=e,{height:o=100}=e,a;er(()=>{const s=r.map((l,h)=>h===0?0:l-r[h-1]),u=Dn({width:i,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[ex(s,{x:(l,h)=>h+1,fill:l=>l})]});n(2,a.textContent="",a),a.appendChild(u)});function f(s){Be[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,f]}class Oi extends ee{constructor(e){super(),te(this,e,bx,gx,Jt,{pattern:3,width:0,height:1})}}function yx(t){let e,n,r,i,o,a;return{c(){e=A("main"),n=A("div"),o=j(),a=A("div"),a.textContent=`The waveform of the audio showing the loudness over time time from left to
    right. Note onsets show up as peaks. A smaller gap between peaks indicates
    an early note.`,V(n,"width",r=t[0]+"px"),V(n,"height",i=t[1]+"px"),re(e,"width",t[0]+"px"),re(e,"margin","auto")},m(f,s){nt(f,e,s),x(e,n),t[6](n),x(e,o),x(e,a)},p(f,[s]){s&1&&r!==(r=f[0]+"px")&&V(n,"width",r),s&2&&i!==(i=f[1]+"px")&&V(n,"height",i),s&1&&re(e,"width",f[0]+"px")},i:$t,o:$t,d(f){f&&et(e),t[6](null)}}}function _x(t,e,n){let{pattern:r}=e,{audioFile:i}=e,{width:o=800}=e,{height:a=50}=e,f,s=null,u;const l=async p=>{n(5,s=await td(p)),console.log(`Loaded ${p}, sr= ${s.sampleRate}`),u=s.sampleRate};let h=null;const c=(p,m)=>{m&&(h=ed(m,p,.5))};er(()=>{if(n(2,f.textContent="",f),!h)return;const p=Dn({width:o,height:a,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[sx(h,{x:(m,g)=>g/u,y:m=>m})]});f.appendChild(p)});function d(p){Be[p?"unshift":"push"](()=>{f=p,n(2,f)})}return t.$$set=p=>{"pattern"in p&&n(3,r=p.pattern),"audioFile"in p&&n(4,i=p.audioFile),"width"in p&&n(0,o=p.width),"height"in p&&n(1,a=p.height)},t.$$.update=()=>{t.$$.dirty&16&&l(i),t.$$.dirty&40&&c(r,s)},[o,a,f,r,i,s,d]}class Ui extends ee{constructor(e){super(),te(this,e,_x,yx,Jt,{pattern:3,audioFile:4,width:0,height:1})}}function wx(t){let e,n,r,i,o,a;return{c(){e=A("main"),n=A("audio"),r=j(),i=A("button"),i.textContent="play audio (p)",n.controls=!1},m(f,s){nt(f,e,s),x(e,n),t[6](n),x(e,r),x(e,i),o||(a=wt(i,"click",t[1]),o=!0)},p:$t,i:$t,o:$t,d(f){f&&et(e),t[6](null),o=!1,a()}}}function vx(t,e,n){let{pattern:r}=e,{audioFile:i}=e,{currentTrialNumber:o=-1}=e,a=null;const f=async d=>{n(5,a=await td(d)),console.log(`Loaded ${d}, sr= ${a.sampleRate}`)};let s=null,u;const l=(d,p)=>{p&&u&&(s=ed(p,d),$2(s,p.sampleRate,u))},h=()=>{u&&(u.pause(),n(0,u.currentTime=0,u),u.play())};nu(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&h()})});function c(d){Be[d?"unshift":"push"](()=>{u=d,n(0,u)})}return t.$$set=d=>{"pattern"in d&&n(2,r=d.pattern),"audioFile"in d&&n(3,i=d.audioFile),"currentTrialNumber"in d&&n(4,o=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(i),t.$$.dirty&4&&console.log(r),t.$$.dirty&16&&o>-1&&window.setTimeout(h,200),t.$$.dirty&36&&l(r,a)},[u,h,r,i,o,a,c]}class Bi extends ee{constructor(e){super(),te(this,e,vx,wx,Jt,{pattern:2,audioFile:3,currentTrialNumber:4})}}function Mh(t,e,n){const r=t.slice();return r[8]=e[n],r}function $h(t){let e,n=t[8].substring(0,30)+"",r;return{c(){e=A("option"),r=at(n),e.__value=t[8],rt(e,e.__value)},m(i,o){nt(i,e,o),x(e,r)},p:$t,d(i){i&&et(e)}}}function xx(t){let e,n,r,i,o,a,f,s=(Bo*1e3).toFixed(0)+"",u,l,h,c,d,p,m,g,b=t[0].toFixed(1)+"",y,$,_=(t[2]*1e3).toFixed(1)+"",M,w,v,S,C,N,T,R,P,q,k,B,O,X,W,H,D,z,Y,J,Z=_n(t[5]),K=[];for(let U=0;U<Z.length;U+=1)K[U]=$h(Mh(t,Z,U));return P=new Bi({props:{pattern:t[1],audioFile:t[3]}}),k=new Ui({props:{pattern:t[1],audioFile:t[3],width:Do,height:Fo}}),O=new Ii({props:{pattern:t[1],width:Do,height:Fo}}),W=new Pi({props:{pattern:t[1],width:Do,height:Fo}}),D=new Oi({props:{pattern:t[1],width:Do,height:Fo}}),{c(){e=A("main"),n=A("h2"),n.textContent="Playground",r=j(),i=A("p"),i.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=j(),a=A("div"),f=at("inter-onset interval (IOI): "),u=at(s),l=at(" milliseconds ("),h=at(t[4]),c=at(` bpm)
    `),d=A("label"),p=at(`deviation as percent of IOI
      `),m=A("input"),g=j(),y=at(b),$=at(`
      (`),M=at(_),w=at(" milliseconds)"),v=j(),S=A("label"),C=at(`instrument sample:
      `),N=A("select");for(let U=0;U<K.length;U+=1)K[U].c();T=j(),R=A("div"),_t(P.$$.fragment),q=j(),_t(k.$$.fragment),B=j(),_t(O.$$.fragment),X=j(),_t(W.$$.fragment),H=j(),_t(D.$$.fragment),V(m,"type","range"),V(m,"min","-20"),V(m,"max","20"),V(m,"step","1"),V(d,"class","svelte-1sot113"),t[3]===void 0&&rn(()=>t[7].call(N)),V(S,"class","svelte-1sot113"),V(R,"class","stimuli svelte-1sot113")},m(U,I){nt(U,e,I),x(e,n),x(e,r),x(e,i),x(e,o),x(e,a),x(a,f),x(a,u),x(a,l),x(a,h),x(a,c),x(a,d),x(d,p),x(d,m),rt(m,t[0]),x(d,g),x(d,y),x(d,$),x(d,M),x(d,w),x(a,v),x(a,S),x(S,C),x(S,N);for(let E=0;E<K.length;E+=1)K[E]&&K[E].m(N,null);ue(N,t[3],!0),x(e,T),x(e,R),bt(P,R,null),x(R,q),bt(k,R,null),x(R,B),bt(O,R,null),x(R,X),bt(W,R,null),x(R,H),bt(D,R,null),z=!0,Y||(J=[wt(m,"change",t[6]),wt(m,"input",t[6]),wt(N,"change",t[7])],Y=!0)},p(U,[I]){if((!z||I&16)&&me(h,U[4]),I&1&&rt(m,U[0]),(!z||I&1)&&b!==(b=U[0].toFixed(1)+"")&&me(y,b),(!z||I&4)&&_!==(_=(U[2]*1e3).toFixed(1)+"")&&me(M,_),I&32){Z=_n(U[5]);let Q;for(Q=0;Q<Z.length;Q+=1){const ht=Mh(U,Z,Q);K[Q]?K[Q].p(ht,I):(K[Q]=$h(ht),K[Q].c(),K[Q].m(N,null))}for(;Q<K.length;Q+=1)K[Q].d(1);K.length=Z.length}I&40&&ue(N,U[3]);const E={};I&2&&(E.pattern=U[1]),I&8&&(E.audioFile=U[3]),P.$set(E);const L={};I&2&&(L.pattern=U[1]),I&8&&(L.audioFile=U[3]),k.$set(L);const G={};I&2&&(G.pattern=U[1]),O.$set(G);const F={};I&2&&(F.pattern=U[1]),W.$set(F);const ut={};I&2&&(ut.pattern=U[1]),D.$set(ut)},i(U){z||(tt(P.$$.fragment,U),tt(k.$$.fragment,U),tt(O.$$.fragment,U),tt(W.$$.fragment,U),tt(D.$$.fragment,U),z=!0)},o(U){ot(P.$$.fragment,U),ot(k.$$.fragment,U),ot(O.$$.fragment,U),ot(W.$$.fragment,U),ot(D.$$.fragment,U),z=!1},d(U){U&&et(e),zo(K,U),yt(P),yt(k),yt(O),yt(W),yt(D),Y=!1,qe(J)}}}let Do=600,Fo=100,Bo=.5,Mx=6,$x=3,Sx=!0,kx=0;function Tx(t,e,n){let r,i;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],f=5,s=[];function u(){f=Ue(this.value),n(0,f)}function l(){a=kr(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,i=f/100*Bo),t.$$.dirty&6&&(n(1,s=wi(Mx,Bo,$x,i,Sx,kx)),console.log("generated pattern",s))},n(4,r=1/Bo*60),[f,s,i,a,r,o,u,l]}class Cx extends ee{constructor(e){super(),te(this,e,Tx,xx,Jt,{})}}var Pg={exports:{}};(function(t,e){(function(n,r){r()})(Kr,function(){function n(u,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,l,h){var c=new XMLHttpRequest;c.open("GET",u),c.responseType="blob",c.onload=function(){s(c.response,l,h)},c.onerror=function(){console.error("could not download file")},c.send()}function i(u){var l=new XMLHttpRequest;l.open("HEAD",u,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function o(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(l)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Kr=="object"&&Kr.global===Kr?Kr:void 0,f=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(u,l,h){var c=a.URL||a.webkitURL,d=document.createElement("a");l=l||u.name||"download",d.download=l,d.rel="noopener",typeof u=="string"?(d.href=u,d.origin===location.origin?o(d):i(d.href)?r(u,l,h):o(d,d.target="_blank")):(d.href=c.createObjectURL(u),setTimeout(function(){c.revokeObjectURL(d.href)},4e4),setTimeout(function(){o(d)},0))}:"msSaveOrOpenBlob"in navigator?function(u,l,h){if(l=l||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,h),l);else if(i(u))r(u,l,h);else{var c=document.createElement("a");c.href=u,c.target="_blank",setTimeout(function(){o(c)})}}:function(u,l,h,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof u=="string")return r(u,l,h);var d=u.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||d&&p||f)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var $=g.result;$=m?$:$.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=$:location=$,c=null},g.readAsDataURL(u)}else{var b=a.URL||a.webkitURL,y=b.createObjectURL(u);c?c.location=y:location.href=y,c=null,setTimeout(function(){b.revokeObjectURL(y)},4e4)}});a.saveAs=s.saveAs=s,t.exports=s})})(Pg);var Ex=Pg.exports;const Og=Jh(Ex);function kt(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}kt.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const r=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][e.operation][r][e.direction](e)};kt.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};kt.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};kt.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=Ug(0,t.length-1);return this.activate(t[e]),this};kt.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=Ug(0,t.length-1);this.activate(t[e])};kt.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};kt.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};kt.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};kt.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};kt.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};kt.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};kt.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};kt.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};kt.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};kt.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};kt.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};kt.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};kt.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};kt.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let r=1;r<this.stairs[t].val.length;r++)(n===1&&this.stairs[t].val[r]>this.stairs[t].val[r-1]||n===-1&&this.stairs[t].val[r]<this.stairs[t].val[r-1])&&(e[e.length]=this.stairs[t].val[r-1],n=n*-1);return e.shift(),e};kt.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};kt.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<e.length;r++)n=n+e[r];return n/e.length};const hl=function(){};hl.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};hl.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};kt.prototype.checkErr=new hl;function Ug(t,e){return Math.floor(Math.random()*(e-t+1))+t}function Sh(t){let e,n,r,i,o,a,f,s,u,l,h,c,d,p,m,g,b,y,$,_,M,w,v,S,C,N,T,R,P,q,k,B,O,X,W,H,D,z,Y,J,Z,K,U;return{c(){e=A("div"),n=A("label"),r=at(`ID:
        `),i=A("input"),o=j(),a=A("label"),f=at(`Age:
        `),s=A("select"),u=A("option"),u.textContent="20-24",l=A("option"),l.textContent="25-29",h=A("option"),h.textContent="30-34",c=A("option"),c.textContent="35-39",d=A("option"),d.textContent="40-44",p=A("option"),p.textContent="45-49",m=A("option"),m.textContent="50-54",g=A("option"),g.textContent="55-60",b=j(),y=A("label"),$=at(`Gender:
        `),_=A("input"),M=j(),w=A("label"),v=at(`Highest finished education (select the best fitting one):
        `),S=A("select"),C=A("option"),C.textContent="none",N=A("option"),N.textContent="high school",T=A("option"),T.textContent="bachelor",R=A("option"),R.textContent="master",P=A("option"),P.textContent="phd",q=j(),k=A("label"),B=at(`Which music instruments do you play?
        `),O=A("input"),X=j(),W=A("label"),H=at(`For how many years do you roughly play it/them?
        `),D=A("input"),z=j(),Y=A("label"),J=at(`How many years of experience do you have with visualization?
        `),Z=A("input"),V(i,"type","text"),V(i,"placeholder","ID"),V(n,"class","svelte-u6a8gr"),u.__value="20-24",rt(u,u.__value),l.__value="25-29",rt(l,l.__value),h.__value="30-34",rt(h,h.__value),c.__value="35-39",rt(c,c.__value),d.__value="40-44",rt(d,d.__value),p.__value="45-49",rt(p,p.__value),m.__value="50-54",rt(m,m.__value),g.__value="55-60",rt(g,g.__value),t[6]===void 0&&rn(()=>t[23].call(s)),V(a,"class","svelte-u6a8gr"),V(_,"type","text"),V(_,"placeholder","m, f, d, or self-describe"),V(y,"class","svelte-u6a8gr"),C.__value="none",rt(C,C.__value),N.__value="highs",rt(N,N.__value),T.__value="bachelor",rt(T,T.__value),R.__value="master",rt(R,R.__value),P.__value="phd",rt(P,P.__value),t[8]===void 0&&rn(()=>t[25].call(S)),V(w,"class","svelte-u6a8gr"),V(O,"type","text"),V(O,"placeholder","free text"),V(k,"class","svelte-u6a8gr"),V(D,"type","number"),V(D,"min","0"),V(D,"step","1"),V(W,"class","svelte-u6a8gr"),V(Z,"type","number"),V(Z,"min","0"),V(Z,"step","1"),V(Y,"class","svelte-u6a8gr"),V(e,"class","demo-form svelte-u6a8gr")},m(I,E){nt(I,e,E),x(e,n),x(n,r),x(n,i),rt(i,t[5]),x(e,o),x(e,a),x(a,f),x(a,s),x(s,u),x(s,l),x(s,h),x(s,c),x(s,d),x(s,p),x(s,m),x(s,g),ue(s,t[6],!0),x(e,b),x(e,y),x(y,$),x(y,_),rt(_,t[7]),x(e,M),x(e,w),x(w,v),x(w,S),x(S,C),x(S,N),x(S,T),x(S,R),x(S,P),ue(S,t[8],!0),x(e,q),x(e,k),x(k,B),x(k,O),rt(O,t[9]),x(e,X),x(e,W),x(W,H),x(W,D),rt(D,t[10]),x(e,z),x(e,Y),x(Y,J),x(Y,Z),rt(Z,t[11]),K||(U=[wt(i,"input",t[22]),wt(s,"change",t[23]),wt(_,"input",t[24]),wt(S,"change",t[25]),wt(O,"input",t[26]),wt(D,"input",t[27]),wt(Z,"input",t[28])],K=!0)},p(I,E){E[0]&32&&i.value!==I[5]&&rt(i,I[5]),E[0]&64&&ue(s,I[6]),E[0]&128&&_.value!==I[7]&&rt(_,I[7]),E[0]&256&&ue(S,I[8]),E[0]&512&&O.value!==I[9]&&rt(O,I[9]),E[0]&1024&&Ue(D.value)!==I[10]&&rt(D,I[10]),E[0]&2048&&Ue(Z.value)!==I[11]&&rt(Z,I[11])},d(I){I&&et(e),K=!1,qe(U)}}}function kh(t){let e,n,r,i,o=t[14]&&Th(t);return{c(){e=A("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=j(),o&&o.c(),r=Hr()},m(a,f){nt(a,e,f),nt(a,n,f),o&&o.m(a,f),nt(a,r,f),i=!0},p(a,f){a[14]?o?(o.p(a,f),f[0]&16384&&tt(o,1)):(o=Th(a),o.c(),tt(o,1),o.m(r.parentNode,r)):o&&(He(),ot(o,1,1,()=>{o=null}),Ye())},i(a){i||(tt(o),i=!0)},o(a){ot(o),i=!1},d(a){a&&(et(e),et(n),et(r)),o&&o.d(a)}}}function Th(t){let e,n,r,i,o=t[4]+1+"",a,f,s=t[2].length+"",u,l,h,c,d=t[13]+1+"",p,m,g,b,y,$;const _=[Nx,Ax],M=[];function w(v,S){return v[17]==="audio"?0:v[16]===!1?1:-1}return~(g=w(t))&&(b=M[g]=_[g](t)),{c(){e=A("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=j(),r=A("p"),i=at("Test number "),a=at(o),f=at(" / "),u=at(s),l=j(),h=A("p"),c=at("Trial number "),p=at(d),m=j(),b&&b.c(),y=Hr()},m(v,S){nt(v,e,S),nt(v,n,S),nt(v,r,S),x(r,i),x(r,a),x(r,f),x(r,u),nt(v,l,S),nt(v,h,S),x(h,c),x(h,p),nt(v,m,S),~g&&M[g].m(v,S),nt(v,y,S),$=!0},p(v,S){(!$||S[0]&16)&&o!==(o=v[4]+1+"")&&me(a,o),(!$||S[0]&4)&&s!==(s=v[2].length+"")&&me(u,s),(!$||S[0]&8192)&&d!==(d=v[13]+1+"")&&me(p,d);let C=g;g=w(v),g===C?~g&&M[g].p(v,S):(b&&(He(),ot(M[C],1,1,()=>{M[C]=null}),Ye()),~g?(b=M[g],b?b.p(v,S):(b=M[g]=_[g](v),b.c()),tt(b,1),b.m(y.parentNode,y)):b=null)},i(v){$||(tt(b),$=!0)},o(v){ot(b),$=!1},d(v){v&&(et(e),et(n),et(r),et(l),et(h),et(m),et(y)),~g&&M[g].d(v)}}}function Ax(t){let e,n,r,i;const o=[Rx,Lx,Fx,Dx],a=[];function f(s,u){return s[17]==="waveform"?0:s[17]==="tick"?1:s[17]==="bar"?2:s[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),r=Hr()},m(s,u){~e&&a[e].m(s,u),nt(s,r,u),i=!0},p(s,u){let l=e;e=f(s),e===l?~e&&a[e].p(s,u):(n&&(He(),ot(a[l],1,1,()=>{a[l]=null}),Ye()),~e?(n=a[e],n?n.p(s,u):(n=a[e]=o[e](s),n.c()),tt(n,1),n.m(r.parentNode,r)):n=null)},i(s){i||(tt(n),i=!0)},o(s){ot(n),i=!1},d(s){s&&et(r),~e&&a[e].d(s)}}}function Nx(t){let e,n,r,i;return e=new Bi({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){_t(e.$$.fragment),n=j(),r=A("p"),r.textContent="You can play the audio as many times as you like."},m(o,a){bt(e,o,a),nt(o,n,a),nt(o,r,a),i=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){i||(tt(e.$$.fragment,o),i=!0)},o(o){ot(e.$$.fragment,o),i=!1},d(o){o&&(et(n),et(r)),yt(e,o)}}}function Dx(t){let e,n;return e=new Oi({props:{pattern:t[0],width:yf,height:_f}}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function Fx(t){let e,n;return e=new Pi({props:{pattern:t[0],width:yf,height:_f}}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function Lx(t){let e,n;return e=new Ii({props:{pattern:t[0],width:yf,height:_f}}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function Rx(t){let e,n;return e=new Ui({props:{pattern:t[0],audioFile:t[1],width:yf,height:_f}}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),i[0]&2&&(o.audioFile=r[1]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function Ch(t){let e,n,r,i,o,a;return{c(){e=A("div"),n=A("label"),r=at(`Any final feedback?
        `),i=A("textarea")},m(f,s){nt(f,e,s),x(e,n),x(n,r),x(n,i),rt(i,t[12]),o||(a=wt(i,"input",t[29]),o=!0)},p(f,s){s[0]&4096&&rt(i,f[12])},d(f){f&&et(e),o=!1,a()}}}function Eh(t){let e,n,r,i,o,a;return{c(){e=A("div"),e.textContent="Thanks for participating!",n=j(),r=A("div"),i=A("button"),i.textContent="Download results"},m(f,s){nt(f,e,s),nt(f,n,s),nt(f,r,s),x(r,i),o||(a=wt(i,"click",t[19]),o=!0)},p:$t,d(f){f&&(et(e),et(n),et(r)),o=!1,a()}}}function Ah(t){let e,n,r;return{c(){e=A("button"),e.textContent="next step (PageDown)"},m(i,o){nt(i,e,o),n||(r=wt(e,"click",t[18]),n=!0)},p:$t,d(i){i&&et(e),n=!1,r()}}}function Ix(t){let e,n,r,i,o,a,f,s,u=t[3]==="demo"&&Sh(t),l=t[3]==="tests"&&kh(t),h=t[3]==="feedback"&&Ch(t),c=t[3]==="done"&&Eh(t),d=!t[15]&&t[3]!=="done"&&Ah(t);return{c(){e=A("main"),n=A("h2"),n.textContent="Study",r=j(),u&&u.c(),i=j(),l&&l.c(),o=j(),h&&h.c(),a=j(),c&&c.c(),f=j(),d&&d.c(),V(e,"class","svelte-u6a8gr")},m(p,m){nt(p,e,m),x(e,n),x(e,r),u&&u.m(e,null),x(e,i),l&&l.m(e,null),x(e,o),h&&h.m(e,null),x(e,a),c&&c.m(e,null),x(e,f),d&&d.m(e,null),s=!0},p(p,m){p[3]==="demo"?u?u.p(p,m):(u=Sh(p),u.c(),u.m(e,i)):u&&(u.d(1),u=null),p[3]==="tests"?l?(l.p(p,m),m[0]&8&&tt(l,1)):(l=kh(p),l.c(),tt(l,1),l.m(e,o)):l&&(He(),ot(l,1,1,()=>{l=null}),Ye()),p[3]==="feedback"?h?h.p(p,m):(h=Ch(p),h.c(),h.m(e,a)):h&&(h.d(1),h=null),p[3]==="done"?c?c.p(p,m):(c=Eh(p),c.c(),c.m(e,f)):c&&(c.d(1),c=null),!p[15]&&p[3]!=="done"?d?d.p(p,m):(d=Ah(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(p){s||(tt(l),s=!0)},o(p){ot(l),s=!1},d(p){p&&et(e),u&&u.d(),l&&l.d(),h&&h.d(),c&&c.d(),d&&d.d()}}}let Nh=.5;const is=20;let Px=6,Ox=!0,Ux=0,yf=600,_f=100;function Bx(t,e,n){let r;const i=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=i[0],a=[{stimulus:"audio",audioFile:i[0]},{stimulus:"audio",audioFile:i[0]},{stimulus:"audio",audioFile:i[0]},{stimulus:"waveform",audioFile:i[0]},{stimulus:"waveform",audioFile:i[0]},{stimulus:"waveform",audioFile:i[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],f="start",s=0,u,l="",h="20-24",c="m",d="master",p="",m=0,g=0,b="",y=0,$,_={},M=[],w,v,S=!1,C=!1,N=!1,T="tick",R=is,P=3,q=[],k=[],B=0;const O=[];nu(()=>{document.querySelector("html").addEventListener("keyup",Z)});const X=()=>{v=new kt({ratio:{firstVal:is,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,is],direction:-1,reversalLimit:5,verbosity:1}}),v.init()};function W(){f==="start"?(n(2,a=nd(a)),n(3,f="demo")):f==="demo"?(n(3,f="tests"),n(4,s=0)):f==="tests"?s<a.length?(n(17,T=a[s].stimulus),n(1,o=a[s].audioFile),H()):n(3,f="feedback"):f==="feedback"&&n(3,f="done")}function H(){X(),n(13,y=0),$=0,w=0,n(14,S=!0),k=[],M=[],u=new Date,D()}function D(){console.log("Starting trial "+y),_={},n(15,C=!0),z()}function z(){let ft=Math.round(v.getLast("ratio"));ft=Math.random()<.5?ft:-ft,_.deviation=ft,n(20,R=ft),console.log("generated pattern",q),n(16,N=!0),window.setTimeout(()=>{n(16,N=!1)},1e3)}function Y(st){if(!C)return;n(15,C=!1),_.decisionChoice=st,_.errorCode=0;const ft=w;(_.decisionChoice==0&&_.deviation<0||_.decisionChoice==1&&_.deviation>0)&&_.errorCode==0&&w++,_.errorCode==0&&(v.next(ft!=w),M[M.length]=_),_.errorCode==0&&$++,n(13,y++,y),v.reversalLimitReached("ratio")?J():D()}function J(){n(14,S=!1),K(),k=[],B=v.getFinalVal("ratio");for(let ft=0;ft<M.length;ft++)k[ft]=M[ft].deviation;console.log(k);const st=new Date;O.push({encoding:T,audioFile:o,final:B,data:k,score:w,testNumber:s,trialCount:y+1,trials:M,validTrialCount:$+1,testTimeSeconds:(st-u)/1e3}),n(4,s++,s)}function Z(st){switch(console.log(st.key),st.key){case"ArrowLeft":Y(0);break;case"ArrowRight":Y(1);break;case"PageDown":!C&&f!=="done"&&W()}}function K(){`${w}`,y+1,`${(w/(y+1)*100).toFixed(1)}${v.getFinalVal("ratio")}`}function U(){const st={demographics:{partID:l,partAge:h,partGender:c,partEduation:d,partMusicInstr:p,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:b},date:new Date().toISOString(),tests:O};console.log(st);const ft=JSON.stringify(st,void 0,2),Gt=new Blob([ft],{type:"text/plain;charset=utf-8"});Og(Gt,"results.json")}function I(){l=this.value,n(5,l)}function E(){h=kr(this),n(6,h)}function L(){c=this.value,n(7,c)}function G(){d=kr(this),n(8,d)}function F(){p=this.value,n(9,p)}function ut(){m=Ue(this.value),n(10,m)}function Q(){g=Ue(this.value),n(11,g)}function ht(){b=this.value,n(12,b)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,r=R/100*Nh),t.$$.dirty[0]&2097153&&(n(0,q=wi(Px,Nh,P,r,Ox,Ux)),console.log("generated pattern",q))},[q,o,a,f,s,l,h,c,d,p,m,g,b,y,S,C,N,T,W,U,R,r,I,E,L,G,F,ut,Q,ht]}class zx extends ee{constructor(e){super(),te(this,e,Bx,Ix,Jt,{},null,[-1,-1])}}function qx(t){let e,n,r;return{c(){e=A("div"),V(e,"width",n=t[0]+"px"),V(e,"height",r=t[1]+"px")},m(i,o){nt(i,e,o),t[6](e)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&V(e,"width",n),o&2&&r!==(r=i[1]+"px")&&V(e,"height",r)},i:$t,o:$t,d(i){i&&et(e),t[6](null)}}}function Hx(t,e,n){let{data:r}=e,{domain:i}=e,{title:o=""}=e,{width:a=800}=e,{height:f=100}=e,s;er(()=>{console.log(o);const l=Dn({width:a,height:f,marginLeft:70,marginRight:10,x:{label:o,domain:i},y:{axis:!1,type:"band"},marks:[Ig(r,{x:h=>h}),al(r,{x:h=>h,dx:7,y:(h,c)=>c,text:(h,c)=>`P${c+1}`})]});n(2,s.textContent="",s),s.appendChild(l)});function u(l){Be[l?"unshift":"push"](()=>{s=l,n(2,s)})}return t.$$set=l=>{"data"in l&&n(3,r=l.data),"domain"in l&&n(4,i=l.domain),"title"in l&&n(5,o=l.title),"width"in l&&n(0,a=l.width),"height"in l&&n(1,f=l.height)},[a,f,s,r,i,o,u]}class Yx extends ee{constructor(e){super(),te(this,e,Hx,qx,Jt,{data:3,domain:4,title:5,width:0,height:1})}}function Wx(t){let e,n,r;return{c(){e=A("div"),V(e,"width",n=t[0]+"px"),V(e,"height",r=t[1]+"px")},m(i,o){nt(i,e,o),t[5](e)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&V(e,"width",n),o&2&&r!==(r=i[1]+"px")&&V(e,"height",r)},i:$t,o:$t,d(i){i&&et(e),t[5](null)}}}function Gx(t,e,n){let{stimuli:r}=e,{width:i=800}=e,{height:o=200}=e,a;er(()=>{const u=r.map(h=>({encoding:h.encoding,...f(h.finals)})),l=Dn({width:i,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:u.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[Rg(u,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),Fg(u,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),rl([0])]});n(2,a.textContent="",a),a.appendChild(l)});function f(u){const l=u.length,h=Na(u),p=1.96*(Ta(u)/Math.sqrt(l)),m=h-p,g=h+p;return{mean:h,low:m,high:g}}function s(u){Be[u?"unshift":"push"](()=>{a=u,n(2,a)})}return t.$$set=u=>{"stimuli"in u&&n(3,r=u.stimuli),"width"in u&&n(0,i=u.width),"height"in u&&n(1,o=u.height)},[i,o,a,r,f,s]}class Vx extends ee{constructor(e){super(),te(this,e,Gx,Wx,Jt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Xx(t){let e,n,r;return{c(){e=A("div"),V(e,"width",n=t[0]+"px"),V(e,"height",r=t[1]+"px")},m(i,o){nt(i,e,o),t[5](e)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&V(e,"width",n),o&2&&r!==(r=i[1]+"px")&&V(e,"height",r)},i:$t,o:$t,d(i){i&&et(e),t[5](null)}}}function jx(t,e,n){let{stimuli:r}=e,{width:i=800}=e,{height:o=200}=e,a;er(()=>{const u=r.map(h=>({encoding:h.encoding,...f(h.trialCounts)})),l=Dn({width:i,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:u.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[Rg(u,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),Fg(u,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),rl([0])]});n(2,a.textContent="",a),a.appendChild(l)});function f(u){const l=u.length,h=Na(u),p=1.96*(Ta(u)/Math.sqrt(l)),m=h-p,g=h+p;return{mean:h,low:m,high:g}}function s(u){Be[u?"unshift":"push"](()=>{a=u,n(2,a)})}return t.$$set=u=>{"stimuli"in u&&n(3,r=u.stimuli),"width"in u&&n(0,i=u.width),"height"in u&&n(1,o=u.height)},[i,o,a,r,f,s]}class Zx extends ee{constructor(e){super(),te(this,e,jx,Xx,Jt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Dh(t,e,n){const r=t.slice();return r[8]=e[n],r}function Fh(t,e,n){const r=t.slice();return r[11]=e[n],r}function Lh(t){let e,n=t[11].encoding+"",r,i,o,a;return o=new Yx({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=A("b"),r=at(n),i=j(),_t(o.$$.fragment)},m(f,s){nt(f,e,s),x(e,r),nt(f,i,s),bt(o,f,s),a=!0},p(f,s){(!a||s&4)&&n!==(n=f[11].encoding+"")&&me(r,n);const u={};s&4&&(u.data=f[11].finals),s&4&&(u.title=f[11].encoding),s&2&&(u.domain=[0,f[1]]),o.$set(u)},i(f){a||(tt(o.$$.fragment,f),a=!0)},o(f){ot(o.$$.fragment,f),a=!1},d(f){f&&(et(e),et(i)),yt(o,f)}}}function Rh(t){let e,n,r,i=t[8].demographics.partID+"",o,a,f,s,u=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",l;return{c(){e=A("div"),n=A("b"),r=at("P"),o=at(i),a=at(":"),f=j(),s=new Kg(!1),l=j(),s.a=l,re(e,"text-align","left")},m(h,c){nt(h,e,c),x(e,n),x(n,r),x(n,o),x(n,a),x(e,f),s.m(u,e),x(e,l)},p(h,c){c&1&&i!==(i=h[8].demographics.partID+"")&&me(o,i),c&1&&u!==(u=h[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&s.p(u)},d(h){h&&et(e)}}}function Kx(t){let e,n,r,i,o,a,f,s,u,l,h,c,d,p,m,g,b,y,$,_,M,w,v,S,C,N,T;h=new Vx({props:{stimuli:t[2]}}),g=new Zx({props:{stimuli:t[2]}});let R=_n(t[2]),P=[];for(let O=0;O<R.length;O+=1)P[O]=Lh(Fh(t,R,O));const q=O=>ot(P[O],1,1,()=>{P[O]=null});let k=_n(t[0]),B=[];for(let O=0;O<k.length;O+=1)B[O]=Rh(Dh(t,k,O));return{c(){e=A("main"),n=A("h2"),n.textContent="Analysis",r=j(),i=A("p"),i.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=j(),a=A("input"),f=j(),s=A("div"),u=A("h3"),u.textContent="Mean and CI of Final Values",l=j(),_t(h.$$.fragment),c=j(),d=A("div"),p=A("h3"),p.textContent="Mean and CI of Trial Counts",m=j(),_t(g.$$.fragment),b=j(),y=A("div"),$=A("h3"),$.textContent="Final Values for Each Stimulus and All Participants",_=j();for(let O=0;O<P.length;O+=1)P[O].c();M=j(),w=A("div"),v=A("h3"),v.textContent="Feedback",S=j();for(let O=0;O<B.length;O+=1)B[O].c();V(a,"type","file"),V(a,"accept",".json"),a.multiple=!0},m(O,X){nt(O,e,X),x(e,n),x(e,r),x(e,i),x(e,o),x(e,a),x(e,f),x(e,s),x(s,u),x(s,l),bt(h,s,null),x(e,c),x(e,d),x(d,p),x(d,m),bt(g,d,null),x(e,b),x(e,y),x(y,$),x(y,_);for(let W=0;W<P.length;W+=1)P[W]&&P[W].m(y,null);x(e,M),x(e,w),x(w,v),x(w,S);for(let W=0;W<B.length;W+=1)B[W]&&B[W].m(w,null);C=!0,N||(T=wt(a,"input",t[3]),N=!0)},p(O,[X]){const W={};X&4&&(W.stimuli=O[2]),h.$set(W);const H={};if(X&4&&(H.stimuli=O[2]),g.$set(H),X&6){R=_n(O[2]);let D;for(D=0;D<R.length;D+=1){const z=Fh(O,R,D);P[D]?(P[D].p(z,X),tt(P[D],1)):(P[D]=Lh(z),P[D].c(),tt(P[D],1),P[D].m(y,null))}for(He(),D=R.length;D<P.length;D+=1)q(D);Ye()}if(X&1){k=_n(O[0]);let D;for(D=0;D<k.length;D+=1){const z=Dh(O,k,D);B[D]?B[D].p(z,X):(B[D]=Rh(z),B[D].c(),B[D].m(w,null))}for(;D<B.length;D+=1)B[D].d(1);B.length=k.length}},i(O){if(!C){tt(h.$$.fragment,O),tt(g.$$.fragment,O);for(let X=0;X<R.length;X+=1)tt(P[X]);C=!0}},o(O){ot(h.$$.fragment,O),ot(g.$$.fragment,O),P=P.filter(Boolean);for(let X=0;X<P.length;X+=1)ot(P[X]);C=!1},d(O){O&&et(e),yt(h),yt(g),zo(P,O),zo(B,O),N=!1,T()}}}function Qx(t,e,n){let r,i,o,a=[];const f=async l=>{const h=[],c=[];for(const d of l.target.files){const p=await d.text();h.push(JSON.parse(p)),c.push(d.name)}n(0,a=h),console.log(a)},s=l=>{if(l.lenght===0)return[];const h=[];for(const c of l)for(const d of c.tests){let p=d.encoding;(d.encoding==="audio"||d.encoding==="waveform")&&(p=`${d.encoding} + ${d.audioFile.startsWith("./Fluid")?"piano":"drums"}`),h.push({...c.demographics,...d,date:c.date,testType:p})}return console.log(h),h},u=l=>{if(l.length===0)return[];const h=R2(l,c=>c.testType).map(([c,d])=>{const p=d.map(m=>m.final);return{encoding:c,finals:p,finalMean:Na(p),finalVar:iu(p),trialCounts:d.map(m=>m.trialCount)}});return console.log(h),h};return t.$$.update=()=>{t.$$.dirty&1&&n(4,r=s(a)),t.$$.dirty&16&&n(2,i=u(r)),t.$$.dirty&16&&n(1,o=ge(r.map(l=>Math.abs(l.final))))},[a,o,i,f,r]}class Jx extends ee{constructor(e){super(),te(this,e,Qx,Kx,Jt,{})}}function Ih(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ph(t){let e,n=t[8].substring(0,30)+"",r;return{c(){e=A("option"),r=at(n),e.__value=t[8],rt(e,e.__value)},m(i,o){nt(i,e,o),x(e,r)},p:$t,d(i){i&&et(e)}}}function tM(t){let e,n,r,i,o,a,f,s,u=(t[1]*1e3).toFixed(1)+"",l,h,c,d,p,m,g,b,y,$,_,M,w,v,S,C,N,T,R,P,q,k,B,O,X,W,H,D,z,Y,J,Z,K,U,I=_n(t[5]),E=[];for(let L=0;L<I.length;L+=1)E[L]=Ph(Ih(t,I,L));return w=new Bi({props:{pattern:t[3],audioFile:t[2]}}),S=new Bi({props:{pattern:t[4],audioFile:t[2]}}),N=new Ui({props:{pattern:t[3],audioFile:t[2],width:mn,height:gn}}),R=new Ui({props:{pattern:t[4],audioFile:t[2],width:mn,height:gn}}),q=new Ii({props:{pattern:t[3],width:mn,height:gn}}),B=new Ii({props:{pattern:t[4],width:mn,height:gn}}),X=new Pi({props:{pattern:t[3],width:mn,height:gn}}),H=new Pi({props:{pattern:t[4],width:mn,height:gn}}),z=new Oi({props:{pattern:t[3],width:mn,height:gn}}),J=new Oi({props:{pattern:t[4],width:mn,height:gn}}),{c(){e=A("main"),n=A("h2"),n.textContent="Examples",r=j(),i=A("div"),o=A("label"),a=at(`deviation
      `),f=A("input"),s=at(`
      (`),l=at(u),h=at(" milliseconds)"),c=j(),d=A("label"),p=at(`instrument sample:
      `),m=A("select");for(let L=0;L<E.length;L+=1)E[L].c();g=j(),b=A("div"),y=A("h2"),y.textContent="early fourth note",$=j(),_=A("h2"),_.textContent="late fourth note",M=j(),_t(w.$$.fragment),v=j(),_t(S.$$.fragment),C=j(),_t(N.$$.fragment),T=j(),_t(R.$$.fragment),P=j(),_t(q.$$.fragment),k=j(),_t(B.$$.fragment),O=j(),_t(X.$$.fragment),W=j(),_t(H.$$.fragment),D=j(),_t(z.$$.fragment),Y=j(),_t(J.$$.fragment),V(f,"type","range"),V(f,"min","0"),V(f,"max","20"),V(f,"step","1"),V(o,"class","svelte-1kjj0oz"),t[2]===void 0&&rn(()=>t[7].call(m)),V(d,"class","svelte-1kjj0oz"),V(b,"class","stimuli svelte-1kjj0oz")},m(L,G){nt(L,e,G),x(e,n),x(e,r),x(e,i),x(i,o),x(o,a),x(o,f),rt(f,t[0]),x(o,s),x(o,l),x(o,h),x(i,c),x(i,d),x(d,p),x(d,m);for(let F=0;F<E.length;F+=1)E[F]&&E[F].m(m,null);ue(m,t[2],!0),x(e,g),x(e,b),x(b,y),x(b,$),x(b,_),x(b,M),bt(w,b,null),x(b,v),bt(S,b,null),x(b,C),bt(N,b,null),x(b,T),bt(R,b,null),x(b,P),bt(q,b,null),x(b,k),bt(B,b,null),x(b,O),bt(X,b,null),x(b,W),bt(H,b,null),x(b,D),bt(z,b,null),x(b,Y),bt(J,b,null),Z=!0,K||(U=[wt(f,"change",t[6]),wt(f,"input",t[6]),wt(m,"change",t[7])],K=!0)},p(L,[G]){if(G&1&&rt(f,L[0]),(!Z||G&2)&&u!==(u=(L[1]*1e3).toFixed(1)+"")&&me(l,u),G&32){I=_n(L[5]);let qt;for(qt=0;qt<I.length;qt+=1){const uo=Ih(L,I,qt);E[qt]?E[qt].p(uo,G):(E[qt]=Ph(uo),E[qt].c(),E[qt].m(m,null))}for(;qt<E.length;qt+=1)E[qt].d(1);E.length=I.length}G&36&&ue(m,L[2]);const F={};G&8&&(F.pattern=L[3]),G&4&&(F.audioFile=L[2]),w.$set(F);const ut={};G&16&&(ut.pattern=L[4]),G&4&&(ut.audioFile=L[2]),S.$set(ut);const Q={};G&8&&(Q.pattern=L[3]),G&4&&(Q.audioFile=L[2]),N.$set(Q);const ht={};G&16&&(ht.pattern=L[4]),G&4&&(ht.audioFile=L[2]),R.$set(ht);const st={};G&8&&(st.pattern=L[3]),q.$set(st);const ft={};G&16&&(ft.pattern=L[4]),B.$set(ft);const Gt={};G&8&&(Gt.pattern=L[3]),X.$set(Gt);const Fn={};G&16&&(Fn.pattern=L[4]),H.$set(Fn);const fr={};G&8&&(fr.pattern=L[3]),z.$set(fr);const sr={};G&16&&(sr.pattern=L[4]),J.$set(sr)},i(L){Z||(tt(w.$$.fragment,L),tt(S.$$.fragment,L),tt(N.$$.fragment,L),tt(R.$$.fragment,L),tt(q.$$.fragment,L),tt(B.$$.fragment,L),tt(X.$$.fragment,L),tt(H.$$.fragment,L),tt(z.$$.fragment,L),tt(J.$$.fragment,L),Z=!0)},o(L){ot(w.$$.fragment,L),ot(S.$$.fragment,L),ot(N.$$.fragment,L),ot(R.$$.fragment,L),ot(q.$$.fragment,L),ot(B.$$.fragment,L),ot(X.$$.fragment,L),ot(H.$$.fragment,L),ot(z.$$.fragment,L),ot(J.$$.fragment,L),Z=!1},d(L){L&&et(e),zo(E,L),yt(w),yt(S),yt(N),yt(R),yt(q),yt(B),yt(X),yt(H),yt(z),yt(J),K=!1,qe(U)}}}let mn=600,gn=100,os=.5,Oh=6,Uh=3,Bh=!0,zh=0;function eM(t,e,n){let r;const i=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=i[0],a=20,f=[],s=[];function u(){a=Ue(this.value),n(0,a)}function l(){o=kr(this),n(2,o),n(5,i)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,r=a/100*os),t.$$.dirty&2&&n(3,f=wi(Oh,os,Uh,-r,Bh,zh)),t.$$.dirty&2&&n(4,s=wi(Oh,os,Uh,r,Bh,zh))},[a,r,o,f,s,i,u,l]}class nM extends ee{constructor(e){super(),te(this,e,eM,tM,Jt,{})}}function qh(t){let e,n,r,i,o,a,f,s,u,l,h,c,d,p,m,g,b,y,$,_,M,w,v,S,C,N,T,R,P,q,k,B,O,X,W,H,D,z,Y,J,Z,K,U;return{c(){e=A("div"),n=A("label"),r=at(`ID:
        `),i=A("input"),o=j(),a=A("label"),f=at(`Age:
        `),s=A("select"),u=A("option"),u.textContent="20-24",l=A("option"),l.textContent="25-29",h=A("option"),h.textContent="30-34",c=A("option"),c.textContent="35-39",d=A("option"),d.textContent="40-44",p=A("option"),p.textContent="45-49",m=A("option"),m.textContent="50-54",g=A("option"),g.textContent="55-60",b=j(),y=A("label"),$=at(`Gender:
        `),_=A("input"),M=j(),w=A("label"),v=at(`Highest finished education (select the best fitting one):
        `),S=A("select"),C=A("option"),C.textContent="none",N=A("option"),N.textContent="high school",T=A("option"),T.textContent="bachelor",R=A("option"),R.textContent="master",P=A("option"),P.textContent="phd",q=j(),k=A("label"),B=at(`Which music instruments do you play?
        `),O=A("input"),X=j(),W=A("label"),H=at(`For how many years do you roughly play it/them?
        `),D=A("input"),z=j(),Y=A("label"),J=at(`How many years of experience do you have with visualization?
        `),Z=A("input"),V(i,"type","text"),V(i,"placeholder","ID"),V(n,"class","svelte-u6a8gr"),u.__value="20-24",rt(u,u.__value),l.__value="25-29",rt(l,l.__value),h.__value="30-34",rt(h,h.__value),c.__value="35-39",rt(c,c.__value),d.__value="40-44",rt(d,d.__value),p.__value="45-49",rt(p,p.__value),m.__value="50-54",rt(m,m.__value),g.__value="55-60",rt(g,g.__value),t[6]===void 0&&rn(()=>t[23].call(s)),V(a,"class","svelte-u6a8gr"),V(_,"type","text"),V(_,"placeholder","m, f, d, or self-describe"),V(y,"class","svelte-u6a8gr"),C.__value="none",rt(C,C.__value),N.__value="highs",rt(N,N.__value),T.__value="bachelor",rt(T,T.__value),R.__value="master",rt(R,R.__value),P.__value="phd",rt(P,P.__value),t[8]===void 0&&rn(()=>t[25].call(S)),V(w,"class","svelte-u6a8gr"),V(O,"type","text"),V(O,"placeholder","free text"),V(k,"class","svelte-u6a8gr"),V(D,"type","number"),V(D,"min","0"),V(D,"step","1"),V(W,"class","svelte-u6a8gr"),V(Z,"type","number"),V(Z,"min","0"),V(Z,"step","1"),V(Y,"class","svelte-u6a8gr"),V(e,"class","demo-form svelte-u6a8gr")},m(I,E){nt(I,e,E),x(e,n),x(n,r),x(n,i),rt(i,t[5]),x(e,o),x(e,a),x(a,f),x(a,s),x(s,u),x(s,l),x(s,h),x(s,c),x(s,d),x(s,p),x(s,m),x(s,g),ue(s,t[6],!0),x(e,b),x(e,y),x(y,$),x(y,_),rt(_,t[7]),x(e,M),x(e,w),x(w,v),x(w,S),x(S,C),x(S,N),x(S,T),x(S,R),x(S,P),ue(S,t[8],!0),x(e,q),x(e,k),x(k,B),x(k,O),rt(O,t[9]),x(e,X),x(e,W),x(W,H),x(W,D),rt(D,t[10]),x(e,z),x(e,Y),x(Y,J),x(Y,Z),rt(Z,t[11]),K||(U=[wt(i,"input",t[22]),wt(s,"change",t[23]),wt(_,"input",t[24]),wt(S,"change",t[25]),wt(O,"input",t[26]),wt(D,"input",t[27]),wt(Z,"input",t[28])],K=!0)},p(I,E){E[0]&32&&i.value!==I[5]&&rt(i,I[5]),E[0]&64&&ue(s,I[6]),E[0]&128&&_.value!==I[7]&&rt(_,I[7]),E[0]&256&&ue(S,I[8]),E[0]&512&&O.value!==I[9]&&rt(O,I[9]),E[0]&1024&&Ue(D.value)!==I[10]&&rt(D,I[10]),E[0]&2048&&Ue(Z.value)!==I[11]&&rt(Z,I[11])},d(I){I&&et(e),K=!1,qe(U)}}}function Hh(t){let e,n,r,i,o=t[14]&&Yh(t);return{c(){e=A("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=j(),o&&o.c(),r=Hr()},m(a,f){nt(a,e,f),nt(a,n,f),o&&o.m(a,f),nt(a,r,f),i=!0},p(a,f){a[14]?o?(o.p(a,f),f[0]&16384&&tt(o,1)):(o=Yh(a),o.c(),tt(o,1),o.m(r.parentNode,r)):o&&(He(),ot(o,1,1,()=>{o=null}),Ye())},i(a){i||(tt(o),i=!0)},o(a){ot(o),i=!1},d(a){a&&(et(e),et(n),et(r)),o&&o.d(a)}}}function Yh(t){let e,n,r,i,o=t[4]+1+"",a,f,s=t[2].length+"",u,l,h,c,d=t[13]+1+"",p,m,g,b,y,$;const _=[iM,rM],M=[];function w(v,S){return v[17]==="audio"?0:v[16]===!1?1:-1}return~(g=w(t))&&(b=M[g]=_[g](t)),{c(){e=A("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=j(),r=A("p"),i=at("Test number "),a=at(o),f=at(" / "),u=at(s),l=j(),h=A("p"),c=at("Trial number "),p=at(d),m=j(),b&&b.c(),y=Hr()},m(v,S){nt(v,e,S),nt(v,n,S),nt(v,r,S),x(r,i),x(r,a),x(r,f),x(r,u),nt(v,l,S),nt(v,h,S),x(h,c),x(h,p),nt(v,m,S),~g&&M[g].m(v,S),nt(v,y,S),$=!0},p(v,S){(!$||S[0]&16)&&o!==(o=v[4]+1+"")&&me(a,o),(!$||S[0]&4)&&s!==(s=v[2].length+"")&&me(u,s),(!$||S[0]&8192)&&d!==(d=v[13]+1+"")&&me(p,d);let C=g;g=w(v),g===C?~g&&M[g].p(v,S):(b&&(He(),ot(M[C],1,1,()=>{M[C]=null}),Ye()),~g?(b=M[g],b?b.p(v,S):(b=M[g]=_[g](v),b.c()),tt(b,1),b.m(y.parentNode,y)):b=null)},i(v){$||(tt(b),$=!0)},o(v){ot(b),$=!1},d(v){v&&(et(e),et(n),et(r),et(l),et(h),et(m),et(y)),~g&&M[g].d(v)}}}function rM(t){let e,n,r,i;const o=[sM,fM,aM,oM],a=[];function f(s,u){return s[17]==="waveform"?0:s[17]==="tick"?1:s[17]==="bar"?2:s[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),r=Hr()},m(s,u){~e&&a[e].m(s,u),nt(s,r,u),i=!0},p(s,u){let l=e;e=f(s),e===l?~e&&a[e].p(s,u):(n&&(He(),ot(a[l],1,1,()=>{a[l]=null}),Ye()),~e?(n=a[e],n?n.p(s,u):(n=a[e]=o[e](s),n.c()),tt(n,1),n.m(r.parentNode,r)):n=null)},i(s){i||(tt(n),i=!0)},o(s){ot(n),i=!1},d(s){s&&et(r),~e&&a[e].d(s)}}}function iM(t){let e,n,r,i;return e=new Bi({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){_t(e.$$.fragment),n=j(),r=A("p"),r.textContent="You can play the audio as many times as you like."},m(o,a){bt(e,o,a),nt(o,n,a),nt(o,r,a),i=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){i||(tt(e.$$.fragment,o),i=!0)},o(o){ot(e.$$.fragment,o),i=!1},d(o){o&&(et(n),et(r)),yt(e,o)}}}function oM(t){let e,n;return e=new Oi({props:{pattern:t[0],width:wf,height:vf}}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function aM(t){let e,n;return e=new Pi({props:{pattern:t[0],width:wf,height:vf}}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function fM(t){let e,n;return e=new Ii({props:{pattern:t[0],width:wf,height:vf}}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function sM(t){let e,n;return e=new Ui({props:{pattern:t[0],audioFile:t[1],width:wf,height:vf}}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},p(r,i){const o={};i[0]&1&&(o.pattern=r[0]),i[0]&2&&(o.audioFile=r[1]),e.$set(o)},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function Wh(t){let e,n,r,i,o,a;return{c(){e=A("div"),n=A("label"),r=at(`Any final feedback?
        `),i=A("textarea")},m(f,s){nt(f,e,s),x(e,n),x(n,r),x(n,i),rt(i,t[12]),o||(a=wt(i,"input",t[29]),o=!0)},p(f,s){s[0]&4096&&rt(i,f[12])},d(f){f&&et(e),o=!1,a()}}}function Gh(t){let e,n,r,i,o,a;return{c(){e=A("div"),e.textContent="Thanks for participating!",n=j(),r=A("div"),i=A("button"),i.textContent="Download results"},m(f,s){nt(f,e,s),nt(f,n,s),nt(f,r,s),x(r,i),o||(a=wt(i,"click",t[19]),o=!0)},p:$t,d(f){f&&(et(e),et(n),et(r)),o=!1,a()}}}function Vh(t){let e,n,r;return{c(){e=A("button"),e.textContent="next step (PageDown)"},m(i,o){nt(i,e,o),n||(r=wt(e,"click",t[18]),n=!0)},p:$t,d(i){i&&et(e),n=!1,r()}}}function uM(t){let e,n,r,i,o,a,f,s,u,l,h=t[3]==="demo"&&qh(t),c=t[3]==="tests"&&Hh(t),d=t[3]==="feedback"&&Wh(t),p=t[3]==="done"&&Gh(t),m=!t[15]&&t[3]!=="done"&&Vh(t);return{c(){e=A("main"),n=A("h2"),n.textContent="Study (Prolific)",r=j(),i=A("div"),i.innerHTML='<p><a href="./?p=examples" target="_blank">Click here for explanation and examples</a>.</p> <p>You can open this page in a new tab and look at it when ever you need it.</p>',o=j(),h&&h.c(),a=j(),c&&c.c(),f=j(),d&&d.c(),s=j(),p&&p.c(),u=j(),m&&m.c(),V(e,"class","svelte-u6a8gr")},m(g,b){nt(g,e,b),x(e,n),x(e,r),x(e,i),x(e,o),h&&h.m(e,null),x(e,a),c&&c.m(e,null),x(e,f),d&&d.m(e,null),x(e,s),p&&p.m(e,null),x(e,u),m&&m.m(e,null),l=!0},p(g,b){g[3]==="demo"?h?h.p(g,b):(h=qh(g),h.c(),h.m(e,a)):h&&(h.d(1),h=null),g[3]==="tests"?c?(c.p(g,b),b[0]&8&&tt(c,1)):(c=Hh(g),c.c(),tt(c,1),c.m(e,f)):c&&(He(),ot(c,1,1,()=>{c=null}),Ye()),g[3]==="feedback"?d?d.p(g,b):(d=Wh(g),d.c(),d.m(e,s)):d&&(d.d(1),d=null),g[3]==="done"?p?p.p(g,b):(p=Gh(g),p.c(),p.m(e,u)):p&&(p.d(1),p=null),!g[15]&&g[3]!=="done"?m?m.p(g,b):(m=Vh(g),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i(g){l||(tt(c),l=!0)},o(g){ot(c),l=!1},d(g){g&&et(e),h&&h.d(),c&&c.d(),d&&d.d(),p&&p.d(),m&&m.d()}}}let Xh=.5;const as=20;let lM=6,cM=!0,hM=0,wf=600,vf=100;function dM(t,e,n){let r;const i=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=i[0],a=[{stimulus:"audio",audioFile:i[0]},{stimulus:"waveform",audioFile:i[0]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],f="start",s=0,u,l="",h="",c="",d="",p="",m=0,g=0,b="",y=0,$,_={},M=[],w,v,S=!1,C=!1,N=!1,T="tick",R=as,P=3,q=[],k=[],B=0;const O=[];nu(()=>{document.querySelector("html").addEventListener("keyup",Z)});const X=()=>{v=new kt({ratio:{firstVal:as,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,as],direction:-1,reversalLimit:5,verbosity:1}}),v.init()};function W(){f==="start"?(n(2,a=nd(a)),n(3,f="demo")):f==="demo"?(n(3,f="tests"),n(4,s=0)):f==="tests"?s<a.length?(n(17,T=a[s].stimulus),n(1,o=a[s].audioFile),H()):n(3,f="feedback"):f==="feedback"&&n(3,f="done")}function H(){X(),n(13,y=0),$=0,w=0,n(14,S=!0),k=[],M=[],u=new Date,D()}function D(){console.log("Starting trial "+y),_={},n(15,C=!0),z()}function z(){let ft=Math.round(v.getLast("ratio"));ft=Math.random()<.5?ft:-ft,_.deviation=ft,n(20,R=ft),console.log("generated pattern",q),n(16,N=!0),window.setTimeout(()=>{n(16,N=!1)},1e3)}function Y(st){if(!C)return;n(15,C=!1),_.decisionChoice=st,_.errorCode=0;const ft=w;(_.decisionChoice==0&&_.deviation<0||_.decisionChoice==1&&_.deviation>0)&&_.errorCode==0&&w++,_.errorCode==0&&(v.next(ft!=w),M[M.length]=_),_.errorCode==0&&$++,n(13,y++,y),v.reversalLimitReached("ratio")?J():D()}function J(){n(14,S=!1),K(),k=[],B=v.getFinalVal("ratio");for(let ft=0;ft<M.length;ft++)k[ft]=M[ft].deviation;console.log(k);const st=new Date;O.push({encoding:T,audioFile:o,final:B,data:k,score:w,testNumber:s,trialCount:y+1,trials:M,validTrialCount:$+1,testTimeSeconds:(st-u)/1e3}),n(4,s++,s)}function Z(st){switch(console.log(st.key),st.key){case"ArrowLeft":Y(0);break;case"ArrowRight":Y(1);break;case"PageDown":!C&&f!=="done"&&W()}}function K(){`${w}`,y+1,`${(w/(y+1)*100).toFixed(1)}${v.getFinalVal("ratio")}`}function U(){const st={demographics:{partID:l,partAge:h,partGender:c,partEduation:d,partMusicInstr:p,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:b},date:new Date().toISOString(),tests:O};console.log(st);const ft=JSON.stringify(st,void 0,2),Gt=new Blob([ft],{type:"text/plain;charset=utf-8"});Og(Gt,"results.json")}function I(){l=this.value,n(5,l)}function E(){h=kr(this),n(6,h)}function L(){c=this.value,n(7,c)}function G(){d=kr(this),n(8,d)}function F(){p=this.value,n(9,p)}function ut(){m=Ue(this.value),n(10,m)}function Q(){g=Ue(this.value),n(11,g)}function ht(){b=this.value,n(12,b)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,r=R/100*Xh),t.$$.dirty[0]&2097153&&(n(0,q=wi(lM,Xh,P,r,cM,hM)),console.log("generated pattern",q))},[q,o,a,f,s,l,h,c,d,p,m,g,b,y,S,C,N,T,W,U,R,r,I,E,L,G,F,ut,Q,ht]}class pM extends ee{constructor(e){super(),te(this,e,dM,uM,Jt,{},null,[-1,-1])}}function mM(t,e){return new URLSearchParams(t.location.search).get(e)}function gM(t){let e,n;return e=new Jx({}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function bM(t){let e,n;return e=new pM({}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function yM(t){let e,n;return e=new zx({}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function _M(t){let e,n;return e=new nM({}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function wM(t){let e,n;return e=new Cx({}),{c(){_t(e.$$.fragment)},m(r,i){bt(e,r,i),n=!0},i(r){n||(tt(e.$$.fragment,r),n=!0)},o(r){ot(e.$$.fragment,r),n=!1},d(r){yt(e,r)}}}function vM(t){let e,n,r,i,o,a,f,s,u,l,h,c,d,p,m,g,b,y,$;const _=[wM,_M,yM,bM,gM],M=[];function w(v,S){return v[0]==="playground"?0:v[0]==="examples"?1:v[0]==="study"?2:v[0]==="study_prolific"?3:v[0]==="analysis"?4:-1}return~(m=w(t))&&(g=M[m]=_[m](t)),{c(){e=A("main"),n=A("h1"),n.textContent="Rhythm Error Sensitivity Study",r=j(),i=A("div"),o=A("button"),o.textContent="Playground",a=j(),f=A("button"),f.textContent="Examples",s=j(),u=A("button"),u.textContent="Study",l=j(),h=A("button"),h.textContent="Study (Prolific)",c=j(),d=A("button"),d.textContent="Analysis",p=j(),g&&g.c()},m(v,S){nt(v,e,S),x(e,n),x(e,r),x(e,i),x(i,o),x(i,a),x(i,f),x(i,s),x(i,u),x(i,l),x(i,h),x(i,c),x(i,d),x(e,p),~m&&M[m].m(e,null),b=!0,y||($=[wt(o,"click",t[1]),wt(f,"click",t[2]),wt(u,"click",t[3]),wt(h,"click",t[4]),wt(d,"click",t[5])],y=!0)},p(v,[S]){let C=m;m=w(v),m!==C&&(g&&(He(),ot(M[C],1,1,()=>{M[C]=null}),Ye()),~m?(g=M[m],g||(g=M[m]=_[m](v),g.c()),tt(g,1),g.m(e,null)):g=null)},i(v){b||(tt(g),b=!0)},o(v){ot(g),b=!1},d(v){v&&et(e),~m&&M[m].d(),y=!1,qe($)}}}function xM(t,e,n){let r=mM(window,"p")??"study";return[r,()=>n(0,r="playground"),()=>n(0,r="examples"),()=>n(0,r="study"),()=>n(0,r="study_prolific"),()=>n(0,r="analysis")]}class MM extends ee{constructor(e){super(),te(this,e,xM,vM,Jt,{})}}new MM({target:document.getElementById("app")});export{Jh as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-E2tYlhLB.js","assets/utilities-zy1txAVG.js","assets/index-TlZAmOeR.js","assets/index-6BD1T7WI.js","assets/index-5DJ2V46_.js","assets/index-ln_RgVTN.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var Sy=Object.defineProperty;var Ay=(e,t,n)=>t in e?Sy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Wa=(e,t,n)=>(Ay(e,typeof t!="symbol"?t+"":t,n),n),Nf=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var xe=(e,t,n)=>(Nf(e,t,"read from private field"),n?n.call(e):t.get(e)),rt=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},At=(e,t,n,r)=>(Nf(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var Cf=(e,t,n,r)=>({set _(i){At(e,t,i,n)},get _(){return xe(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function ye(){}function Am(e){return e()}function Tf(){return Object.create(null)}function dt(e){e.forEach(Am)}function Pm(e){return typeof e=="function"}function Ft(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Py(e){return Object.keys(e).length===0}function No(e){return e??""}function v(e,t){e.appendChild(t)}function he(e,t,n){e.insertBefore(t,n||null)}function fe(e){e.parentNode&&e.parentNode.removeChild(e)}function kt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function C(e){return document.createElement(e)}function Q(e){return document.createTextNode(e)}function Z(){return Q(" ")}function lc(){return Q("")}function ne(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function T(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ie(e){return e===""?null:+e}function Ny(e){return Array.from(e.childNodes)}function ke(e,t){t=""+t,e.data!==t&&(e.data=t)}function Me(e,t){e.value=t??""}function at(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function Je(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function sr(e){const t=e.querySelector(":checked");return t&&t.__value}function Co(e,t){return new e(t)}let ji;function Fi(e){ji=e}function Nm(){if(!ji)throw new Error("Function called outside component initialization");return ji}function Hn(e){Nm().$$.on_mount.push(e)}function zn(e){Nm().$$.on_destroy.push(e)}const Nr=[],nn=[];let Dr=[];const $f=[],Cy=Promise.resolve();let nl=!1;function Ty(){nl||(nl=!0,Cy.then(Cm))}function rn(e){Dr.push(e)}const hu=new Set;let Er=0;function Cm(){if(Er!==0)return;const e=ji;do{try{for(;Er<Nr.length;){const t=Nr[Er];Er++,Fi(t),$y(t.$$)}}catch(t){throw Nr.length=0,Er=0,t}for(Fi(null),Nr.length=0,Er=0;nn.length;)nn.pop()();for(let t=0;t<Dr.length;t+=1){const n=Dr[t];hu.has(n)||(hu.add(n),n())}Dr.length=0}while(Nr.length);for(;$f.length;)$f.pop()();nl=!1,hu.clear(),Fi(e)}function $y(e){if(e.fragment!==null){e.update(),dt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(rn)}}function ky(e){const t=[],n=[];Dr.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Dr=t}const bo=new Set;let er;function _a(){er={r:0,c:[],p:er}}function wa(){er.r||dt(er.c),er=er.p}function vt(e,t){e&&e.i&&(bo.delete(e),e.i(t))}function It(e,t,n,r){if(e&&e.o){if(bo.has(e))return;bo.add(e),er.c.push(()=>{bo.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Be(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Yi(e){e&&e.c()}function Hr(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),rn(()=>{const a=e.$$.on_mount.map(Am).filter(Pm);e.$$.on_destroy?e.$$.on_destroy.push(...a):dt(a),e.$$.on_mount=[]}),i.forEach(rn)}function zr(e,t){const n=e.$$;n.fragment!==null&&(ky(n.after_update),dt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Iy(e,t){e.$$.dirty[0]===-1&&(Nr.push(e),Ty(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Gt(e,t,n,r,i,a,o=null,s=[-1]){const u=ji;Fi(e);const c=e.$$={fragment:null,ctx:[],props:a,update:ye,not_equal:i,bound:Tf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Tf(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};o&&o(c.root);let l=!1;if(c.ctx=n?n(e,t.props||{},(h,f,...d)=>{const m=d.length?d[0]:f;return c.ctx&&i(c.ctx[h],c.ctx[h]=m)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](m),l&&Iy(e,h)),f}):[],c.update(),l=!0,dt(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const h=Ny(t.target);c.fragment&&c.fragment.l(h),h.forEach(fe)}else c.fragment&&c.fragment.c();t.intro&&vt(e.$$.fragment),Hr(e,t.target,t.anchor),Cm()}Fi(u)}class Ut{constructor(){Wa(this,"$$");Wa(this,"$$set")}$destroy(){zr(this,1),this.$destroy=ye}$on(t,n){if(!Pm(n))return ye;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Py(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Dy="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Dy);function du(e,t,n){const r=new URLSearchParams(e.location.search);r.set(t,n);const i=`${e.location.protocol}//${e.location.host}${e.location.pathname}?${r.toString()}`;e.history.pushState({path:i},"",i)}function Ry(e,t){return new URLSearchParams(e.location.search).get(t)}const Tm=new Map,$m=new Map,Oy=new Map,By=new Map;function Ly(e){return Tm.get(e)}function km(e){return $m.get(e)}function Fy(e){const t=e%12;return t===1||t===3||t===6||t===8||t===10}const Gy=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Wi=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],Uy=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],qy=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of Wi)Tm.set(e.pitch,e),$m.set(e.label,e);for(const e of Uy)Oy.set(e.number,e);for(const e of qy){const t=`${e.number}-${e.subnumber}`;By.set(t,e)}var Hy={value:()=>{}};function Im(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new go(n)}function go(e){this._=e}function zy(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}go.prototype=Im.prototype={constructor:go,on:function(e,t){var n=this._,r=zy(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=Vy(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=kf(n[i],e.name,t);else if(t==null)for(i in n)n[i]=kf(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new go(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Vy(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function kf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Hy,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var rl="http://www.w3.org/1999/xhtml";const If={svg:"http://www.w3.org/2000/svg",xhtml:rl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Es(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),If.hasOwnProperty(t)?{space:If[t],local:e}:e}function jy(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===rl&&t.documentElement.namespaceURI===rl?t.createElement(e):t.createElementNS(n,e)}}function Yy(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dm(e){var t=Es(e);return(t.local?Yy:jy)(t)}function Wy(){}function cc(e){return e==null?Wy:function(){return this.querySelector(e)}}function Xy(e){typeof e!="function"&&(e=cc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),u,c,l=0;l<o;++l)(u=a[l])&&(c=e.call(u,u.__data__,l,a))&&("__data__"in u&&(c.__data__=u.__data__),s[l]=c);return new Mt(r,this._parents)}function Rm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ky(){return[]}function Om(e){return e==null?Ky:function(){return this.querySelectorAll(e)}}function Zy(e){return function(){var t=e.apply(this,arguments);return t==null?[]:Rm(t)}}function Jy(e){typeof e=="function"?e=Zy(e):e=Om(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&(r.push(e.call(u,u.__data__,c,o)),i.push(u));return new Mt(r,i)}function Bm(e){return function(){return this.matches(e)}}function Lm(e){return function(t){return t.matches(e)}}var Qy=Array.prototype.find;function e_(e){return function(){return Qy.call(this.children,e)}}function t_(){return this.firstElementChild}function n_(e){return this.select(e==null?t_:e_(typeof e=="function"?e:Lm(e)))}var r_=Array.prototype.filter;function i_(){return this.children}function a_(e){return function(){return r_.call(this.children,e)}}function o_(e){return this.selectAll(e==null?i_:a_(typeof e=="function"?e:Lm(e)))}function s_(e){typeof e!="function"&&(e=Bm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new Mt(r,this._parents)}function Fm(e){return new Array(e.length)}function u_(){return new Mt(this._enter||this._groups.map(Fm),this._parents)}function To(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}To.prototype={constructor:To,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function l_(e){return function(){return e}}function c_(e,t,n,r,i,a){for(var o=0,s,u=t.length,c=a.length;o<c;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new To(e,a[o]);for(;o<u;++o)(s=t[o])&&(i[o]=s)}function f_(e,t,n,r,i,a,o){var s,u,c=new Map,l=t.length,h=a.length,f=new Array(l),d;for(s=0;s<l;++s)(u=t[s])&&(f[s]=d=o.call(u,u.__data__,s,t)+"",c.has(d)?i[s]=u:c.set(d,u));for(s=0;s<h;++s)d=o.call(e,a[s],s,a)+"",(u=c.get(d))?(r[s]=u,u.__data__=a[s],c.delete(d)):n[s]=new To(e,a[s]);for(s=0;s<l;++s)(u=t[s])&&c.get(f[s])===u&&(i[s]=u)}function h_(e){return e.__data__}function d_(e,t){if(!arguments.length)return Array.from(this,h_);var n=t?f_:c_,r=this._parents,i=this._groups;typeof e!="function"&&(e=l_(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),c=0;c<a;++c){var l=r[c],h=i[c],f=h.length,d=Rm(e.call(l,l&&l.__data__,c,r)),m=d.length,p=s[c]=new Array(m),y=o[c]=new Array(m),_=u[c]=new Array(f);n(l,h,p,y,_,d,t);for(var g=0,M=0,b,x;g<m;++g)if(b=p[g]){for(g>=M&&(M=g+1);!(x=y[M])&&++M<m;);b._next=x||null}}return o=new Mt(o,r),o._enter=s,o._exit=u,o}function m_(){return new Mt(this._exit||this._groups.map(Fm),this._parents)}function p_(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function b_(e){if(!(e instanceof Mt))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],c=n[s],l=u.length,h=o[s]=new Array(l),f,d=0;d<l;++d)(f=u[d]||c[d])&&(h[d]=f);for(;s<r;++s)o[s]=t[s];return new Mt(o,this._parents)}function g_(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function y_(e){e||(e=__);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),c,l=0;l<s;++l)(c=o[l])&&(u[l]=c);u.sort(t)}return new Mt(i,this._parents).order()}function __(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function w_(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function v_(){return Array.from(this)}function M_(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function x_(){let e=0;for(const t of this)++e;return e}function E_(){return!this.node()}function S_(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function A_(e){return function(){this.removeAttribute(e)}}function P_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function N_(e,t){return function(){this.setAttribute(e,t)}}function C_(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function T_(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function $_(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function k_(e,t){var n=Es(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?P_:A_:typeof t=="function"?n.local?$_:T_:n.local?C_:N_)(n,t))}function Gm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function I_(e){return function(){this.style.removeProperty(e)}}function D_(e,t,n){return function(){this.style.setProperty(e,t,n)}}function R_(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function O_(e,t,n){return arguments.length>1?this.each((t==null?I_:typeof t=="function"?R_:D_)(e,t,n??"")):Vr(this.node(),e)}function Vr(e,t){return e.style.getPropertyValue(t)||Gm(e).getComputedStyle(e,null).getPropertyValue(t)}function B_(e){return function(){delete this[e]}}function L_(e,t){return function(){this[e]=t}}function F_(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function G_(e,t){return arguments.length>1?this.each((t==null?B_:typeof t=="function"?F_:L_)(e,t)):this.node()[e]}function Um(e){return e.trim().split(/^|\s+/)}function fc(e){return e.classList||new qm(e)}function qm(e){this._node=e,this._names=Um(e.getAttribute("class")||"")}qm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hm(e,t){for(var n=fc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function zm(e,t){for(var n=fc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function U_(e){return function(){Hm(this,e)}}function q_(e){return function(){zm(this,e)}}function H_(e,t){return function(){(t.apply(this,arguments)?Hm:zm)(this,e)}}function z_(e,t){var n=Um(e+"");if(arguments.length<2){for(var r=fc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?H_:t?U_:q_)(n,t))}function V_(){this.textContent=""}function j_(e){return function(){this.textContent=e}}function Y_(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function W_(e){return arguments.length?this.each(e==null?V_:(typeof e=="function"?Y_:j_)(e)):this.node().textContent}function X_(){this.innerHTML=""}function K_(e){return function(){this.innerHTML=e}}function Z_(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function J_(e){return arguments.length?this.each(e==null?X_:(typeof e=="function"?Z_:K_)(e)):this.node().innerHTML}function Q_(){this.nextSibling&&this.parentNode.appendChild(this)}function ew(){return this.each(Q_)}function tw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nw(){return this.each(tw)}function rw(e){var t=typeof e=="function"?e:Dm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iw(){return null}function aw(e,t){var n=typeof e=="function"?e:Dm(e),r=t==null?iw:typeof t=="function"?t:cc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ow(){var e=this.parentNode;e&&e.removeChild(this)}function sw(){return this.each(ow)}function uw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cw(e){return this.select(e?lw:uw)}function fw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hw(e){return function(t){e.call(this,t,this.__data__)}}function dw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function mw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function pw(e,t,n){return function(){var r=this.__on,i,a=hw(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function bw(e,t,n){var r=dw(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,l;u<c;++u)for(i=0,l=s[u];i<a;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}return}for(s=t?pw:mw,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Vm(e,t,n){var r=Gm(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gw(e,t){return function(){return Vm(this,e,t)}}function yw(e,t){return function(){return Vm(this,e,t.apply(this,arguments))}}function _w(e,t){return this.each((typeof t=="function"?yw:gw)(e,t))}function*ww(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var vw=[null];function Mt(e,t){this._groups=e,this._parents=t}function va(){return new Mt([[document.documentElement]],vw)}function Mw(){return this}Mt.prototype=va.prototype={constructor:Mt,select:Xy,selectAll:Jy,selectChild:n_,selectChildren:o_,filter:s_,data:d_,enter:u_,exit:m_,join:p_,merge:b_,selection:Mw,order:g_,sort:y_,call:w_,nodes:v_,node:M_,size:x_,empty:E_,each:S_,attr:k_,style:O_,property:G_,classed:z_,text:W_,html:J_,raise:ew,lower:nw,append:rw,insert:aw,remove:sw,clone:cw,datum:fw,on:bw,dispatch:_w,[Symbol.iterator]:ww};function hc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jm(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ma(){}var Xi=.7,$o=1/Xi,Rr="\\s*([+-]?\\d+)\\s*",Ki="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xw=/^#([0-9a-f]{3,8})$/,Ew=new RegExp("^rgb\\("+[Rr,Rr,Rr]+"\\)$"),Sw=new RegExp("^rgb\\("+[Jt,Jt,Jt]+"\\)$"),Aw=new RegExp("^rgba\\("+[Rr,Rr,Rr,Ki]+"\\)$"),Pw=new RegExp("^rgba\\("+[Jt,Jt,Jt,Ki]+"\\)$"),Nw=new RegExp("^hsl\\("+[Ki,Jt,Jt]+"\\)$"),Cw=new RegExp("^hsla\\("+[Ki,Jt,Jt,Ki]+"\\)$"),Df={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hc(Ma,Zi,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Rf,formatHex:Rf,formatHsl:Tw,formatRgb:Of,toString:Of});function Rf(){return this.rgb().formatHex()}function Tw(){return Ym(this).formatHsl()}function Of(){return this.rgb().formatRgb()}function Zi(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Bf(t):n===3?new ot(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ew.exec(e))?new ot(t[1],t[2],t[3],1):(t=Sw.exec(e))?new ot(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Aw.exec(e))?Xa(t[1],t[2],t[3],t[4]):(t=Pw.exec(e))?Xa(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Nw.exec(e))?Gf(t[1],t[2]/100,t[3]/100,1):(t=Cw.exec(e))?Gf(t[1],t[2]/100,t[3]/100,t[4]):Df.hasOwnProperty(e)?Bf(Df[e]):e==="transparent"?new ot(NaN,NaN,NaN,0):null}function Bf(e){return new ot(e>>16&255,e>>8&255,e&255,1)}function Xa(e,t,n,r){return r<=0&&(e=t=n=NaN),new ot(e,t,n,r)}function $w(e){return e instanceof Ma||(e=Zi(e)),e?(e=e.rgb(),new ot(e.r,e.g,e.b,e.opacity)):new ot}function il(e,t,n,r){return arguments.length===1?$w(e):new ot(e,t,n,r??1)}function ot(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}hc(ot,il,jm(Ma,{brighter:function(e){return e=e==null?$o:Math.pow($o,e),new ot(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Xi:Math.pow(Xi,e),new ot(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lf,formatHex:Lf,formatRgb:Ff,toString:Ff}));function Lf(){return"#"+mu(this.r)+mu(this.g)+mu(this.b)}function Ff(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function mu(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Gf(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wt(e,t,n,r)}function Ym(e){if(e instanceof Wt)return new Wt(e.h,e.s,e.l,e.opacity);if(e instanceof Ma||(e=Zi(e)),!e)return new Wt;if(e instanceof Wt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Wt(o,s,u,e.opacity)}function Wm(e,t,n,r){return arguments.length===1?Ym(e):new Wt(e,t,n,r??1)}function Wt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}hc(Wt,Wm,jm(Ma,{brighter:function(e){return e=e==null?$o:Math.pow($o,e),new Wt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Xi:Math.pow(Xi,e),new Wt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ot(pu(e>=240?e-240:e+120,i,r),pu(e,i,r),pu(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function pu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xm=e=>()=>e;function kw(e,t){return function(n){return e+n*t}}function Iw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Dw(e){return(e=+e)==1?Km:function(t,n){return n-t?Iw(t,n,e):Xm(isNaN(t)?n:t)}}function Km(e,t){var n=t-e;return n?kw(e,n):Xm(isNaN(e)?t:e)}const al=function e(t){var n=Dw(t);function r(i,a){var o=n((i=il(i)).r,(a=il(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),c=Km(i.opacity,a.opacity);return function(l){return i.r=o(l),i.g=s(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function Rn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ol=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bu=new RegExp(ol.source,"g");function Rw(e){return function(){return e}}function Ow(e){return function(t){return e(t)+""}}function Bw(e,t){var n=ol.lastIndex=bu.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(r=ol.exec(e))&&(i=bu.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:Rn(r,i)})),n=bu.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Ow(u[0].x):Rw(t):(t=u.length,function(c){for(var l=0,h;l<t;++l)s[(h=u[l]).i]=h.x(c);return s.join("")})}var Uf=180/Math.PI,sl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zm(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Uf,skewX:Math.atan(u)*Uf,scaleX:o,scaleY:s}}var Ka;function Lw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?sl:Zm(t.a,t.b,t.c,t.d,t.e,t.f)}function Fw(e){return e==null||(Ka||(Ka=document.createElementNS("http://www.w3.org/2000/svg","g")),Ka.setAttribute("transform",e),!(e=Ka.transform.baseVal.consolidate()))?sl:(e=e.matrix,Zm(e.a,e.b,e.c,e.d,e.e,e.f))}function Jm(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,l,h,f,d,m){if(c!==h||l!==f){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Rn(c,h)},{i:p-2,x:Rn(l,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function o(c,l,h,f){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Rn(c,l)})):l&&h.push(i(h)+"rotate("+l+r)}function s(c,l,h,f){c!==l?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Rn(c,l)}):l&&h.push(i(h)+"skewX("+l+r)}function u(c,l,h,f,d,m){if(c!==h||l!==f){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Rn(c,h)},{i:p-2,x:Rn(l,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(c,l){var h=[],f=[];return c=e(c),l=e(l),a(c.translateX,c.translateY,l.translateX,l.translateY,h,f),o(c.rotate,l.rotate,h,f),s(c.skewX,l.skewX,h,f),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,h,f),c=l=null,function(d){for(var m=-1,p=f.length,y;++m<p;)h[(y=f[m]).i]=y.x(d);return h.join("")}}}var Gw=Jm(Lw,"px, ","px)","deg)"),Uw=Jm(Fw,", ",")",")"),jr=0,Ai=0,gi=0,Qm=1e3,ko,Pi,Io=0,ur=0,Ss=0,Ji=typeof performance=="object"&&performance.now?performance:Date,e0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function dc(){return ur||(e0(qw),ur=Ji.now()+Ss)}function qw(){ur=0}function Do(){this._call=this._time=this._next=null}Do.prototype=t0.prototype={constructor:Do,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?dc():+n)+(t==null?0:+t),!this._next&&Pi!==this&&(Pi?Pi._next=this:ko=this,Pi=this),this._call=e,this._time=n,ul()},stop:function(){this._call&&(this._call=null,this._time=1/0,ul())}};function t0(e,t,n){var r=new Do;return r.restart(e,t,n),r}function Hw(){dc(),++jr;for(var e=ko,t;e;)(t=ur-e._time)>=0&&e._call.call(null,t),e=e._next;--jr}function qf(){ur=(Io=Ji.now())+Ss,jr=Ai=0;try{Hw()}finally{jr=0,Vw(),ur=0}}function zw(){var e=Ji.now(),t=e-Io;t>Qm&&(Ss-=t,Io=e)}function Vw(){for(var e,t=ko,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ko=n);Pi=e,ul(r)}function ul(e){if(!jr){Ai&&(Ai=clearTimeout(Ai));var t=e-ur;t>24?(e<1/0&&(Ai=setTimeout(qf,e-Ji.now()-Ss)),gi&&(gi=clearInterval(gi))):(gi||(Io=Ji.now(),gi=setInterval(zw,Qm)),jr=1,e0(qf))}}function Hf(e,t,n){var r=new Do;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var jw=Im("start","end","cancel","interrupt"),Yw=[],n0=0,zf=1,ll=2,yo=3,Vf=4,cl=5,_o=6;function As(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Ww(e,n,{name:t,index:r,group:i,on:jw,tween:Yw,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:n0})}function mc(e,t){var n=qt(e,t);if(n.state>n0)throw new Error("too late; already scheduled");return n}function un(e,t){var n=qt(e,t);if(n.state>yo)throw new Error("too late; already running");return n}function qt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ww(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=t0(a,0,n.time);function a(c){n.state=zf,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var l,h,f,d;if(n.state!==zf)return u();for(l in r)if(d=r[l],d.name===n.name){if(d.state===yo)return Hf(o);d.state===Vf?(d.state=_o,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[l]):+l<t&&(d.state=_o,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[l])}if(Hf(function(){n.state===yo&&(n.state=Vf,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=ll,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ll){for(n.state=yo,i=new Array(f=n.tween.length),l=0,h=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function s(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=cl,1),h=-1,f=i.length;++h<f;)i[h].call(e,l);n.state===cl&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=_o,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Xw(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>ll&&r.state<cl,r.state=_o,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function Kw(e){return this.each(function(){Xw(this,e)})}function Zw(e,t){var n,r;return function(){var i=un(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Jw(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=un(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=s;break}u===c&&i.push(s)}a.tween=i}}function Qw(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=qt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Zw:Jw)(n,e,t))}function pc(e,t,n){var r=e._id;return e.each(function(){var i=un(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return qt(i,r).value[t]}}function r0(e,t){var n;return(typeof t=="number"?Rn:t instanceof Zi?al:(n=Zi(t))?(t=n,al):Bw)(e,t)}function e3(e){return function(){this.removeAttribute(e)}}function t3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function n3(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function r3(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function i3(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function a3(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function o3(e,t){var n=Es(e),r=n==="transform"?Uw:r0;return this.attrTween(e,typeof t=="function"?(n.local?a3:i3)(n,r,pc(this,"attr."+e,t)):t==null?(n.local?t3:e3)(n):(n.local?r3:n3)(n,r,t))}function s3(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function u3(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function l3(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&u3(e,a)),n}return i._value=t,i}function c3(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&s3(e,a)),n}return i._value=t,i}function f3(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Es(e);return this.tween(n,(r.local?l3:c3)(r,t))}function h3(e,t){return function(){mc(this,e).delay=+t.apply(this,arguments)}}function d3(e,t){return t=+t,function(){mc(this,e).delay=t}}function m3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?h3:d3)(t,e)):qt(this.node(),t).delay}function p3(e,t){return function(){un(this,e).duration=+t.apply(this,arguments)}}function b3(e,t){return t=+t,function(){un(this,e).duration=t}}function g3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?p3:b3)(t,e)):qt(this.node(),t).duration}function y3(e,t){if(typeof t!="function")throw new Error;return function(){un(this,e).ease=t}}function _3(e){var t=this._id;return arguments.length?this.each(y3(t,e)):qt(this.node(),t).ease}function w3(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;un(this,e).ease=n}}function v3(e){if(typeof e!="function")throw new Error;return this.each(w3(this._id,e))}function M3(e){typeof e!="function"&&(e=Bm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new vn(r,this._parents,this._name,this._id)}function x3(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],c=n[s],l=u.length,h=o[s]=new Array(l),f,d=0;d<l;++d)(f=u[d]||c[d])&&(h[d]=f);for(;s<r;++s)o[s]=t[s];return new vn(o,this._parents,this._name,this._id)}function E3(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function S3(e,t,n){var r,i,a=E3(t)?mc:un;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function A3(e,t){var n=this._id;return arguments.length<2?qt(this.node(),n).on.on(e):this.each(S3(n,e,t))}function P3(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function N3(){return this.on("end.remove",P3(this._id))}function C3(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cc(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,c=a[o]=new Array(u),l,h,f=0;f<u;++f)(l=s[f])&&(h=e.call(l,l.__data__,f,s))&&("__data__"in l&&(h.__data__=l.__data__),c[f]=h,As(c[f],t,n,f,c,qt(l,n)));return new vn(a,this._parents,t,n)}function T3(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Om(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],c=u.length,l,h=0;h<c;++h)if(l=u[h]){for(var f=e.call(l,l.__data__,h,u),d,m=qt(l,n),p=0,y=f.length;p<y;++p)(d=f[p])&&As(d,t,n,p,f,m);a.push(f),o.push(l)}return new vn(a,o,t,n)}var $3=va.prototype.constructor;function k3(){return new $3(this._groups,this._parents)}function I3(e,t){var n,r,i;return function(){var a=Vr(this,e),o=(this.style.removeProperty(e),Vr(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function i0(e){return function(){this.style.removeProperty(e)}}function D3(e,t,n){var r,i=n+"",a;return function(){var o=Vr(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function R3(e,t,n){var r,i,a;return function(){var o=Vr(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Vr(this,e))),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}function O3(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var u=un(this,e),c=u.on,l=u.value[a]==null?s||(s=i0(t)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(o,i=l),u.on=r}}function B3(e,t,n){var r=(e+="")=="transform"?Gw:r0;return t==null?this.styleTween(e,I3(e,r)).on("end.style."+e,i0(e)):typeof t=="function"?this.styleTween(e,R3(e,r,pc(this,"style."+e,t))).each(O3(this._id,e)):this.styleTween(e,D3(e,r,t),n).on("end.style."+e,null)}function L3(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function F3(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&L3(e,o,n)),r}return a._value=t,a}function G3(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,F3(e,t,n??""))}function U3(e){return function(){this.textContent=e}}function q3(e){return function(){var t=e(this);this.textContent=t??""}}function H3(e){return this.tween("text",typeof e=="function"?q3(pc(this,"text",e)):U3(e==null?"":e+""))}function z3(e){return function(t){this.textContent=e.call(this,t)}}function V3(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&z3(i)),t}return r._value=e,r}function j3(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,V3(e))}function Y3(){for(var e=this._name,t=this._id,n=a0(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,c=0;c<s;++c)if(u=o[c]){var l=qt(u,t);As(u,e,n,c,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new vn(r,this._parents,e,n)}function W3(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var c=un(this,r),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),i===0&&a()})}var X3=0;function vn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function a0(){return++X3}var Zn=va.prototype;vn.prototype={constructor:vn,select:C3,selectAll:T3,filter:M3,merge:x3,selection:k3,transition:Y3,call:Zn.call,nodes:Zn.nodes,node:Zn.node,size:Zn.size,empty:Zn.empty,each:Zn.each,on:A3,attr:o3,attrTween:f3,style:B3,styleTween:G3,text:H3,textTween:j3,remove:N3,tween:Qw,delay:m3,duration:g3,ease:_3,easeVarying:v3,end:W3,[Symbol.iterator]:Zn[Symbol.iterator]};function K3(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Z3={time:null,delay:0,duration:250,ease:K3};function J3(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Q3(e){var t,n;e instanceof vn?(t=e._id,e=e._name):(t=a0(),(n=Z3).time=dc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&As(u,e,t,c,o,n||J3(u,t));return new vn(r,this._parents,e,t)}va.prototype.interrupt=Kw;va.prototype.transition=Q3;function Ni(e,t,n){this.k=e,this.x=t,this.y=n}Ni.prototype={constructor:Ni,scale:function(e){return e===1?this:new Ni(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ni(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ni.prototype;var yi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ev(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tv={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,s="",u,c,l=0;for(;l<r.length;)o=i.indexOf(r.charAt(l++))<<18|i.indexOf(r.charAt(l++))<<12|(u=i.indexOf(r.charAt(l++)))<<6|(c=i.indexOf(r.charAt(l++))),s+=u===64?String.fromCharCode(o>>16&255):c===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return s},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(s){i(n.Uint8(new Uint8Array(s.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let s=0;s<a;s++)o[s]=i.charCodeAt(s);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(u){return this.pointer+=u,this.pointer},readInt:function(u){if(u=Math.min(u,this.data.byteLength-this.pointer),u<1)return-1;let c=0;if(u>1)for(let l=1;l<=u-1;l++)c+=this.data.getUint8(this.pointer)*Math.pow(256,u-l),this.pointer++;return c+=this.data.getUint8(this.pointer),this.pointer++,c},readStr:function(u){let c="";for(let l=1;l<=u;l++)c+=String.fromCharCode(this.readInt(1));return c},readIntVLV:function(){let u=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)u=this.readInt(1);else{let c=[];for(;this.data.getUint8(this.pointer)>=128;)c.push(this.readInt(1)-128);let l=this.readInt(1);for(let h=1;h<=c.length;h++)u+=c[c.length-h]*Math.pow(128,h);u+=l}return u}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),s=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=s):a.timeDivision=o*256+s;for(let u=1;u<=a.tracks;u++){a.track[u-1]={event:[]};let c=i.readInt(4);if(c===-1)break;if(c!==1297379947)return!1;i.readInt(4);let l=0,h=!1,f,d;for(;!h&&(l++,a.track[u-1].event[l-1]={},a.track[u-1].event[l-1].deltaTime=i.readIntVLV(),f=i.readInt(1),f!==-1);)if(f>=128?d=f:(f=d,i.movePointer(-1)),f===255){a.track[u-1].event[l-1].type=255,a.track[u-1].event[l-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[u-1].event[l-1].metaType){case 47:case-1:h=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[u-1].event[l-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[u-1].event[l-1].data=i.readInt(m);break;case 84:a.track[u-1].event[l-1].data=[],a.track[u-1].event[l-1].data[0]=i.readInt(1),a.track[u-1].event[l-1].data[1]=i.readInt(1),a.track[u-1].event[l-1].data[2]=i.readInt(1),a.track[u-1].event[l-1].data[3]=i.readInt(1),a.track[u-1].event[l-1].data[4]=i.readInt(1);break;case 88:a.track[u-1].event[l-1].data=[],a.track[u-1].event[l-1].data[0]=i.readInt(1),a.track[u-1].event[l-1].data[1]=i.readInt(1),a.track[u-1].event[l-1].data[2]=i.readInt(1),a.track[u-1].event[l-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[u-1].event[l-1].data=this.customInterpreter(a.track[u-1].event[l-1].metaType,i,m)),(this.customInterpreter===null||a.track[u-1].event[l-1].data===!1)&&(i.readInt(m),a.track[u-1].event[l-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(f=f.toString(16).split(""),f[1]||f.unshift("0"),a.track[u-1].event[l-1].type=parseInt(f[0],16),a.track[u-1].event[l-1].channel=parseInt(f[1],16),a.track[u-1].event[l-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[u-1].event[l-1].data=this.customInterpreter(a.track[u-1].event[l-1].type,i,!1)),this.customInterpreter===null||a.track[u-1].event[l-1].data===!1){let m=i.readIntVLV();a.track[u-1].event[l-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[u-1].event[l-1].data=[],a.track[u-1].event[l-1].data[0]=i.readInt(1),a.track[u-1].event[l-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[u-1].event[l-1].data=i.readInt(1);break;case-1:h=!0;break;default:if(this.customInterpreter!==null&&(a.track[u-1].event[l-1].data=this.customInterpreter(a.track[u-1].event[l-1].metaType,i,!1)),this.customInterpreter===null||a.track[u-1].event[l-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(tv);function o0(e){return 1/(e/60)}const s0=[],nv=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of nv)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;s0.push({type:e,dots:t,duration:n})}s0.sort((e,t)=>e.duration-t.duration);function rv(e,t,n,r){e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.stroke()}class ce{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>km(r).pitch),this.stringCount=n.length}}const iv=new Map([["Guitar",new Map([[6,[new ce("E stand.",["E2","A2","D3","G3","B3","E4"]),new ce("Drop D",["D2","A2","D3","G3","B3","E4"]),new ce("Drop C",["C2","G2","C3","F3","A3","D4"]),new ce("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new ce("1 down",["D2","G2","C3","F3","A3","D4"]),new ce("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new ce("2 down",["C2","F2","A#2","D#3","G3","C4"]),new ce("DADGAG",["D2","A2","D3","G3","A3","D4"])]],[7,[new ce("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new ce("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new ce("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new ce("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new ce("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new ce("2 down",["G1","C2","F2","A#2","D#3","G3","C4"])]],[8,[new ce("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new ce("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new ce("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new ce("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new ce("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new ce("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"])]]])],["Bass",new Map([[4,[new ce("E stand.",["E1","A1","D2","G2"]),new ce("Drop D",["D1","A1","D2","G2"]),new ce("1/2 down",["D#1","G#1","C#2","F#2"]),new ce("1 down",["D1","G1","C2","F2"]),new ce("1 1/2 down",["C#1","F#1","B1","E2"]),new ce("2 down",["C1","F1","A#1","D#2"])]],[5,[new ce("B stand.",["B0","E1","A1","D2","G2"]),new ce("Drop A",["A0","D1","A1","D2","G2"]),new ce("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new ce("1 down",["A0","D1","G1","C2","F2"]),new ce("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new ce("2 down",["G0","C1","F1","A#1","D#2"])]],[6,[new ce("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new ce("Drop E",["E0","A0","D1","A1","D2","G2"]),new ce("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new ce("1 down",["E1","A0","D1","G1","C2","F2"]),new ce("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new ce("2 down",["D0","G0","C1","F1","A#1","D#2"])]]])],["Ukulele",new Map([[4,[new ce("Hawaii",["G4","C4","E4","A4"]),new ce("Low G",["G3","C4","E4","A4"]),new ce("D-tuning",["A4","D4","F#4","B4"]),new ce("Canadian",["A3","D4","F#4","B4"]),new ce("Bariton",["D3","G3","B3","E4"])]]])]]);function u0(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function l0(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var c0=[0,2,4,-1,1,3,5],f0=c0.map(e=>Math.floor(e*7/12));function h0(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=c0[t]+7*n;if(r===void 0)return[i*a];const o=r-f0[t]-4*n;return[i*a,i*o]}var av=[3,0,4,1,5,2,6];function ov(e){const[t,n,r]=e,i=av[sv(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+f0[i];return{step:i,alt:a,oct:o,dir:r}}function sv(e){const t=(e+1)%7;return t<0?7+t:t}var jf=(e,t)=>Array(Math.abs(t)+1).join(e),fl=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),uv="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",lv="(AA|A|P|M|m|d|dd)([-+]?\\d+)",cv=new RegExp("^"+uv+"|"+lv+"$");function fv(e){const t=cv.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var Yf={};function Ro(e){return typeof e=="string"?Yf[e]||(Yf[e]=hv(e)):l0(e)?Ro(mv(e)):u0(e)?Ro(e.name):fl}var Wf=[0,2,4,5,7,9,11],d0="PMMPPMM";function hv(e){const t=fv(e);if(t[0]==="")return fl;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=d0[i];if(a==="M"&&r==="P")return fl;const o=a==="M"?"majorable":"perfectable",s=""+n+r,u=n<0?-1:1,c=n===8||n===-8?n:u*(i+1),l=dv(o,r),h=Math.floor((Math.abs(n)-1)/7),f=u*(Wf[i]+l+12*h),d=(u*(Wf[i]+l)%12+12)%12,m=h0({step:i,alt:l,oct:h,dir:u});return{empty:!1,name:s,num:n,q:r,step:i,alt:l,dir:u,type:o,simple:c,semitones:f,chroma:d,coord:m,oct:h}}function dv(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function mv(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,s=i<0?"-":"",u=d0[t]==="M"?"majorable":"perfectable";return s+o+pv(u,n)}function pv(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?jf("A",t):jf("d",e==="perfectable"?t:t+1)}var Xf=(e,t)=>Array(Math.abs(t)+1).join(e),m0=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Kf=new Map,bv=e=>"CDEFGAB".charAt(e),gv=e=>e<0?Xf("b",-e):Xf("#",e),yv=e=>e[0]==="b"?-e.length:e.length;function He(e){const t=JSON.stringify(e),n=Kf.get(t);if(n)return n;const r=typeof e=="string"?xv(e):l0(e)?He(Ev(e)):u0(e)?He(e.name):m0;return Kf.set(t,r),r}var _v=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function wv(e){const t=_v.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function vv(e){return He(ov(e))}var Mv=(e,t)=>(e%t+t)%t,gu=[0,2,4,5,7,9,11];function xv(e){const t=wv(e);if(t[0]===""||t[3]!=="")return m0;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=yv(r),s=i.length?+i:void 0,u=h0({step:a,alt:o,oct:s}),c=n+r+i,l=n+r,h=(gu[a]+o+120)%12,f=s===void 0?Mv(gu[a]+o,12)-12*99:gu[a]+o+12*(s+1),d=f>=0&&f<=127?f:null,m=s===void 0?null:Math.pow(2,(f-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:h,coord:u,freq:m,height:f,letter:n,midi:d,name:c,oct:s,pc:l,step:a}}function Ev(e){const{step:t,alt:n,oct:r}=e,i=bv(t);if(!i)return"";const a=i+gv(n);return r||r===0?a+r:a}function Yr(e,t){const n=He(e),r=Array.isArray(t)?t:Ro(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return vv(a).name}function p0(e,t){const n=e.length;return r=>{if(!t)return"";const i=r<0?(n- -r%n)%n:r%n,a=Math.floor(r/n),o=Yr(t,[0,a]);return Yr(o,e[i])}}function Sv(e,t,n){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,r)}}function Av(e,t){const n=[];for(;t--;n[t]=t+e);return n}function Pv(e,t){const n=[];for(;t--;n[t]=e-t);return n}function Nv(e,t){return e<t?Av(e,t-e+1):Pv(e,e-t+1)}function xa(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}function Cv(e){return e.filter(t=>t===0||t)}var Ln={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},b0=e=>Number(e).toString(2).padStart(12,"0"),Zf=e=>parseInt(e,2),Tv=/^[01]{12}$/;function bc(e){return Tv.test(e)}var $v=e=>typeof e=="number"&&e>=0&&e<=4095,kv=e=>e&&bc(e.chroma),Jf={[Ln.chroma]:Ln};function Mn(e){const t=bc(e)?e:$v(e)?b0(e):Array.isArray(e)?Gv(e):kv(e)?e.chroma:Ln.chroma;return Jf[t]=Jf[t]||Fv(t)}var Iv=e=>Mn(e).chroma,Dv=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function Rv(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(Dv[n]);return t}function Ov(e,t=!0){const r=Mn(e).chroma.split("");return Cv(r.map((i,a)=>{const o=xa(a,r);return t&&o[0]==="0"?null:o.join("")}))}function g0(e){const t=Mn(e).setNum;return n=>{const r=Mn(n).setNum;return t&&t!==r&&(r&t)===r}}function Bv(e){const t=Mn(e).setNum;return n=>{const r=Mn(n).setNum;return t&&t!==r&&(r|t)===r}}function Lv(e){const t=e.split("");return t.map((n,r)=>xa(r,t).join(""))}function Fv(e){const t=Zf(e),n=Lv(e).map(Zf).filter(a=>a>=2048).sort()[0],r=b0(n),i=Rv(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function Gv(e){if(e.length===0)return Ln.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=He(e[r]),t.empty&&(t=Ro(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var Uv=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],qv=Uv;({...Ln});var gc=[],wo={};function Hv(){return gc.slice()}function zv(e,t,n){const r=jv(e),i={...Mn(e),name:n||"",quality:r,intervals:e,aliases:t};gc.push(i),i.name&&(wo[i.name]=i),wo[i.setNum]=i,wo[i.chroma]=i,i.aliases.forEach(a=>Vv(i,a))}function Vv(e,t){wo[t]=e}function jv(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}qv.forEach(([e,t,n])=>zv(e.split(" "),n.split(" "),t));gc.sort((e,t)=>e.setNum-t.setNum);var Yv=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],Wv=Yv;({...Ln});var y0=[],vo={};function Xv(e,t,n){const r=Zv(e),i={...Mn(e),name:n||"",quality:r,intervals:e,aliases:t};y0.push(i),i.name&&(vo[i.name]=i),vo[i.setNum]=i,vo[i.chroma]=i,i.aliases.forEach(a=>Kv(i,a))}function Kv(e,t){vo[t]=e}function Zv(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}Wv.forEach(([e,t,n])=>Xv(e.split(" "),n.split(" "),t));y0.sort((e,t)=>e.setNum-t.setNum);var Jv=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],Qv=Jv,e5={...Ln,intervals:[],aliases:[]},yc=[],Gi={};function t5(){return yc.map(e=>e.name)}function _0(e){return Gi[e]||e5}function _c(){return yc.slice()}function n5(e,t,n=[]){const r={...Mn(e),name:t,intervals:e,aliases:n};return yc.push(r),Gi[r.name]=r,Gi[r.setNum]=r,Gi[r.chroma]=r,r.aliases.forEach(i=>r5(r,i)),r}function r5(e,t){Gi[t]=e}Qv.forEach(([e,t,...n])=>n5(e.split(" "),t,n));var i5=Math.log(2),a5=Math.log(440);function w0(e){const t=12*(Math.log(e)-a5)/i5+69;return Math.round(t*100)/100}var o5="C C# D D# E F F# G G# A A# B".split(" "),s5="C Db D Eb E F Gb G Ab A Bb B".split(" ");function si(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);const r=(t.sharps===!0?o5:s5)[e%12];if(t.pitchClass)return r;const i=Math.floor(e/12)-1;return r+i}var u5=["C","D","E","F","G","A","B"],v0=e=>e.name,M0=e=>e.map(He).filter(t=>!t.empty);function l5(e){return e===void 0?u5.slice():Array.isArray(e)?M0(e).map(v0):[]}var Dt=He,c5=e=>Dt(e).name,f5=e=>Dt(e).pc,h5=e=>Dt(e).acc,d5=e=>Dt(e).oct,m5=e=>Dt(e).midi,p5=e=>Dt(e).freq,b5=e=>Dt(e).chroma;function x0(e){return si(e)}function g5(e){return si(w0(e))}function y5(e){return si(w0(e),{sharps:!0})}function _5(e){return si(e,{sharps:!0})}var Ea=Yr,w5=Yr,E0=e=>t=>Ea(t,e),v5=E0,S0=e=>t=>Ea(e,t),M5=S0;function A0(e,t){return Ea(e,[t,0])}var x5=A0;function E5(e,t){return Ea(e,[0,t])}var wc=(e,t)=>e.height-t.height,S5=(e,t)=>t.height-e.height;function P0(e,t){return t=t||wc,M0(e).sort(t).map(v0)}function N0(e){return P0(e,wc).filter((t,n,r)=>n===0||t!==r[n-1])}var A5=e=>{const t=Dt(e);return t.empty?"":si(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function C0(e,t){const n=Dt(e);if(n.empty)return"";const r=Dt(t||si(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;const i=n.chroma-n.alt,a=r.chroma-r.alt,o=i>11||a<0?-1:i<0||a>11?1:0,s=n.oct+o;return r.pc+s}var P5={names:l5,get:Dt,name:c5,pitchClass:f5,accidentals:h5,octave:d5,midi:m5,ascending:wc,descending:S5,sortedNames:P0,sortedUniqNames:N0,fromMidi:x0,fromMidiSharps:_5,freq:p5,fromFreq:g5,fromFreqSharps:y5,chroma:b5,transpose:Ea,tr:w5,transposeBy:E0,trBy:v5,transposeFrom:S0,trFrom:M5,transposeFifths:A0,transposeOctaves:E5,trFifths:x5,simplify:A5,enharmonic:C0},vc=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Qf={...Ln,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},N5=vc.map(C5),hl={};N5.forEach(e=>{hl[e.name]=e,e.aliases.forEach(t=>{hl[t]=e})});function T0(e){return typeof e=="string"?hl[e.toLowerCase()]||Qf:e&&e.name?T0(e.name):Qf}function C5(e){const[t,n,r,i,a,o,s]=e,u=s?[s]:[],c=Number(n).toString(2);return{empty:!1,intervals:_0(i).intervals,modeNum:t,chroma:c,normalized:c,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:u}}function $0(e){return(t,n)=>{const r=T0(t);if(r.empty)return[];const i=xa(r.modeNum,e),a=r.intervals.map(o=>Yr(n,o));return i.map((o,s)=>a[s]+o)}}$0(vc.map(e=>e[4]));$0(vc.map(e=>e[5]));var T5={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function k0(e){if(typeof e!="string")return["",""];const t=e.indexOf(" "),n=He(e.substring(0,t));if(n.empty){const i=He(e);return i.empty?["",e]:[i.name,""]}const r=e.substring(n.name.length+1).toLowerCase();return[n.name,r.length?r:""]}var $5=t5;function an(e){const t=Array.isArray(e)?e:k0(e),n=He(t[0]).name,r=_0(t[1]);if(r.empty)return T5;const i=r.name,a=n?r.intervals.map(s=>Yr(n,s)):[],o=n?n+" "+i:i;return{...r,name:o,type:i,tonic:n,notes:a}}var k5=Sv("Scale.scale","Scale.get",an);function I5(e,t={}){const n=Iv(e),r=He(t.tonic??e[0]??""),i=r.chroma;if(i===void 0)return[];const a=n.split("");a[i]="1";const o=xa(i,a).join(""),s=_c().find(c=>c.chroma===o),u=[];return s&&u.push(r.name+" "+s.name),t.match==="exact"||I0(o).forEach(c=>{u.push(r.name+" "+c)}),u}function D5(e){const t=an(e),n=g0(t.chroma);return Hv().filter(r=>n(r.chroma)).map(r=>r.aliases[0])}function I0(e){const t=bc(e)?e:an(e).chroma,n=Bv(t);return _c().filter(r=>n(r.chroma)).map(r=>r.name)}function R5(e){const t=g0(an(e).chroma);return _c().filter(n=>t(n.chroma)).map(n=>n.name)}function D0(e){const t=e.map(i=>He(i).pc).filter(i=>i),n=t[0],r=N0(t);return xa(r.indexOf(n),r)}function O5(e){const t=an(e);if(t.empty)return[];const n=t.tonic?t.notes:t.intervals;return Ov(t.chroma).map((r,i)=>{const a=an(r).name;return a?[n[i],a]:["",""]}).filter(r=>r[0])}function B5(e){const t=Array.isArray(e)?D0(e):an(e).notes,n=t.map(r=>He(r).chroma);return r=>{const i=He(typeof r=="number"?x0(r):r),a=i.height;if(a===void 0)return;const o=a%12,s=n.indexOf(o);if(s!==-1)return C0(i.name,t[s])}}function L5(e){const t=B5(e);return(n,r)=>{const i=He(n).height,a=He(r).height;return i===void 0||a===void 0?[]:Nv(i,a).map(t).filter(o=>o)}}function F5(e){const{intervals:t,tonic:n}=an(e),r=p0(t,n);return i=>i?r(i>0?i-1:i):""}function G5(e){const{intervals:t,tonic:n}=an(e);return p0(t,n)}var eh={degrees:F5,detect:I5,extended:I0,get:an,modeNames:O5,names:$5,rangeOf:L5,reduced:R5,scaleChords:D5,scaleNotes:D0,steps:G5,tokenize:k0,scale:k5};class In{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>km(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="",s-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="",s-=12;const u=Ly(i).name;n.set(i,{number:a,letterString:`${u}${o}`})}return[...n.values()].map(r=>r.letterString)}}new In("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new In("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new In("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new In("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new In("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new In("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new In("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new In("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function U5(e,t=1){const n=Wm(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>U5(e,.5));const q5=al("black","steelblue");Array.from({length:12}).map((e,t)=>q5(t/11));function H5(e){let t,n,r,i,a,o,s,u,c,l,h,f,d=e[2]?"":"",m,p,y,_,g=e[3]?"":"",M,b,x,w,S,E,N,F,P=e[0]>=6?"guitar":"bass guitar",L,j,z=e[1]===0?"in standard tuning":`${Math.abs(e[1])} ${e[1]<0?"steps down":"steps up"}`,A,$,U=e[2]?"and dropped":"",W,G,H,X,Y,I,ee,te,re,K;return{c(){t=C("main"),n=C("h2"),n.textContent="Guitar Tunings",r=Z(),i=C("label"),a=Q(`strings
        `),o=C("input"),s=Z(),u=C("label"),c=Q(`tune up/down (semitones)
        `),l=C("input"),h=Z(),f=C("button"),m=Q(d),p=Q(" dropped"),y=Z(),_=C("button"),M=Q(g),b=Q(" octave shown"),x=Z(),w=C("div"),S=C("p"),E=Q("You selected a "),N=Q(e[0]),F=Q(" string "),L=Q(P),j=Q(", tuned "),A=Q(z),$=Z(),W=Q(U),G=Z(),H=C("p"),X=Q("Resulting tuning, low to high:"),Y=C("br"),I=Z(),ee=C("b"),te=Q(e[4]),T(o,"type","number"),T(o,"min","4"),T(o,"max","8"),T(o,"step","1"),T(l,"type","number"),T(l,"min","-12"),T(l,"max","12"),T(l,"step","1")},m(V,k){he(V,t,k),v(t,n),v(t,r),v(t,i),v(i,a),v(i,o),Me(o,e[0]),v(t,s),v(t,u),v(u,c),v(u,l),Me(l,e[1]),v(t,h),v(t,f),v(f,m),v(f,p),v(t,y),v(t,_),v(_,M),v(_,b),v(t,x),v(t,w),v(w,S),v(S,E),v(S,N),v(S,F),v(S,L),v(S,j),v(S,A),v(S,$),v(S,W),v(w,G),v(w,H),v(H,X),v(H,Y),v(H,I),v(H,ee),v(ee,te),re||(K=[ne(o,"input",e[5]),ne(l,"input",e[6]),ne(f,"click",e[7]),ne(_,"click",e[8])],re=!0)},p(V,[k]){k&1&&Ie(o.value)!==V[0]&&Me(o,V[0]),k&2&&Ie(l.value)!==V[1]&&Me(l,V[1]),k&4&&d!==(d=V[2]?"":"")&&ke(m,d),k&8&&g!==(g=V[3]?"":"")&&ke(M,g),k&1&&ke(N,V[0]),k&1&&P!==(P=V[0]>=6?"guitar":"bass guitar")&&ke(L,P),k&2&&z!==(z=V[1]===0?"in standard tuning":`${Math.abs(V[1])} ${V[1]<0?"steps down":"steps up"}`)&&ke(A,z),k&4&&U!==(U=V[2]?"and dropped":"")&&ke(W,U),k&16&&ke(te,V[4])},i:ye,o:ye,d(V){V&&fe(t),re=!1,dt(K)}}}function z5(e,t,n){let r,i=6,a=0,o=!1,s=!0;const u=(d,m,p,y)=>{let g=iv.get(d>5?"Guitar":"Bass").get(d)[0].pitches.map(M=>M+m);return p&&(g[0]-=2),y?g=g.map(M=>Wi[M].label):g=g.map(M=>Wi[M].name),g.join(" ")};function c(){i=Ie(this.value),n(0,i)}function l(){a=Ie(this.value),n(1,a)}const h=()=>{n(2,o=!o)},f=()=>{n(3,s=!s)};return e.$$.update=()=>{e.$$.dirty&15&&n(4,r=u(i,a,o,s))},[i,a,o,s,r,c,l,h,f]}class V5 extends Ut{constructor(t){super(),Gt(this,t,z5,H5,Ft,{})}}class Tt{constructor(t=!1){this.eventMap={},this.eventsSuspended=t==!0}addListener(t,n,r={}){if(typeof t=="string"&&t.length<1||t instanceof String&&t.length<1||typeof t!="string"&&!(t instanceof String)&&t!==Tt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof n!="function")throw new TypeError("The callback must be a function.");const i=new th(t,this,n,r);return this.eventMap[t]||(this.eventMap[t]=[]),r.prepend?this.eventMap[t].unshift(i):this.eventMap[t].push(i),i}addOneTimeListener(t,n,r={}){r.remaining=1,this.addListener(t,n,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(t,n){return t===void 0?this.eventMap[Tt.ANY_EVENT]&&this.eventMap[Tt.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[t]&&this.eventMap[t].length>0?n instanceof th?this.eventMap[t].filter(i=>i===n).length>0:typeof n=="function"?this.eventMap[t].filter(i=>i.callback===n).length>0:n==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(t){return this.eventMap[t]||[]}suspendEvent(t){this.getListeners(t).forEach(n=>{n.suspended=!0})}unsuspendEvent(t){this.getListeners(t).forEach(n=>{n.suspended=!1})}getListenerCount(t){return this.getListeners(t).length}emit(t,...n){if(typeof t!="string"&&!(t instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],i=this.eventMap[Tt.ANY_EVENT]||[];return this.eventMap[t]&&(i=i.concat(this.eventMap[t])),i.forEach(a=>{if(a.suspended)return;let o=[...n];Array.isArray(a.arguments)&&(o=o.concat(a.arguments)),a.remaining>0&&(r.push(a.callback.apply(a.context,o)),a.count++),--a.remaining<1&&a.remove()}),r}removeListener(t,n,r={}){if(t===void 0){this.eventMap={};return}else if(!this.eventMap[t])return;let i=this.eventMap[t].filter(a=>n&&a.callback!==n||r.remaining&&r.remaining!==a.remaining||r.context&&r.context!==a.context);i.length?this.eventMap[t]=i:delete this.eventMap[t]}async waitFor(t,n={}){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((r,i)=>{let a,o=this.addListener(t,()=>{clearTimeout(a),r()},{remaining:1});n.duration!==1/0&&(a=setTimeout(()=>{o.remove(),i("The duration expired before the event was emitted.")},n.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class th{constructor(t,n,r,i={}){if(typeof t!="string"&&!(t instanceof String)&&t!==Tt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");i.arguments!==void 0&&!Array.isArray(i.arguments)&&(i.arguments=[i.arguments]),i=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},i),i.duration!==1/0&&setTimeout(()=>this.remove(),i.duration),this.arguments=i.arguments,this.callback=r,this.context=i.context,this.count=0,this.event=t,this.remaining=parseInt(i.remaining)>=1?parseInt(i.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class B{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),B.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),B.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),B.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),B.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Tr{constructor(t,n={}){this.duration=R.defaults.note.duration,this.attack=R.defaults.note.attack,this.release=R.defaults.note.release,n.duration!=null&&(this.duration=n.duration),n.attack!=null&&(this.attack=n.attack),n.rawAttack!=null&&(this.attack=J.from7bitToFloat(n.rawAttack)),n.release!=null&&(this.release=n.release),n.rawRelease!=null&&(this.release=J.from7bitToFloat(n.rawRelease)),Number.isInteger(t)?this.identifier=J.toNoteIdentifier(t):this.identifier=t}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(t){const n=J.getNoteDetails(t);if(R.validation&&!t)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(t){if(R.validation&&(t=t.toUpperCase(),!["C","D","E","F","G","A","B"].includes(t)))throw new Error("Invalid name value");this._name=t}get accidental(){return this._accidental}set accidental(t){if(R.validation&&(t=t.toLowerCase(),!["#","##","b","bb"].includes(t)))throw new Error("Invalid accidental value");this._accidental=t}get octave(){return this._octave}set octave(t){if(R.validation&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid octave value");this._octave=t}get duration(){return this._duration}set duration(t){if(R.validation&&(t=parseFloat(t),isNaN(t)||t===null||t<0))throw new RangeError("Invalid duration value.");this._duration=t}get attack(){return this._attack}set attack(t){if(R.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid attack value.");this._attack=t}get release(){return this._release}set release(t){if(R.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid release value.");this._release=t}get rawAttack(){return J.fromFloatTo7Bit(this._attack)}set rawAttack(t){this._attack=J.from7bitToFloat(t)}get rawRelease(){return J.fromFloatTo7Bit(this._release)}set rawRelease(t){this._release=J.from7bitToFloat(t)}get number(){return J.toNoteNumber(this.identifier)}getOffsetNumber(t=0,n=0){return R.validation&&(t=parseInt(t)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+t*12+n,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class J{static toNoteNumber(t,n=0){if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");typeof t!="string"&&(t="");const r=this.getNoteDetails(t);if(!r)throw new TypeError("Invalid note identifier");const i={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let a=(r.octave+1+n)*12;if(a+=i[r.name],r.accidental&&(r.accidental.startsWith("b")?a-=r.accidental.length:a+=r.accidental.length),a<0||a>127)throw new RangeError("Invalid octaveOffset value");return a}static getNoteDetails(t){Number.isInteger(t)&&(t=this.toNoteIdentifier(t));const n=t.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const r=n[1].toUpperCase(),i=parseInt(n[3]);let a=n[2].toLowerCase();return a=a===""?void 0:a,{accidental:a,identifier:r+(a||"")+i,name:r,octave:i}}static sanitizeChannels(t){let n;if(R.validation){if(t==="all")n=["all"];else if(t==="none")return[]}return Array.isArray(t)?n=t:n=[t],n.indexOf("all")>-1&&(n=B.MIDI_CHANNEL_NUMBERS),n.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(t){let n=!1;const r=parseFloat(t);return isNaN(r)?!1:(typeof t=="string"&&t.substring(0,1)==="+"?r>=0&&(n=R.time+r):r>=0&&(n=r),n)}static guessNoteNumber(t,n){n=parseInt(n)||0;let r=!1;if(Number.isInteger(t)&&t>=0&&t<=127)r=parseInt(t);else if(parseInt(t)>=0&&parseInt(t)<=127)r=parseInt(t);else if(typeof t=="string"||t instanceof String)try{r=this.toNoteNumber(t.trim(),n)}catch{return!1}return r}static toNoteIdentifier(t,n){if(t=parseInt(t),isNaN(t)||t<0||t>127)throw new RangeError("Invalid note number");if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=Math.floor(t/12-1)+n;return r[t%12]+i.toString()}static buildNote(t,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,t instanceof Tr)return t;let r=this.guessNoteNumber(t,n.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${t})`);return n.octaveOffset=void 0,new Tr(r,n)}static buildNoteArray(t,n={}){let r=[];return Array.isArray(t)||(t=[t]),t.forEach(i=>{r.push(this.buildNote(i,n))}),r}static from7bitToFloat(t){return t===1/0&&(t=127),t=parseInt(t)||0,Math.min(Math.max(t/127,0),1)}static fromFloatTo7Bit(t){return t===1/0&&(t=1),t=parseFloat(t)||0,Math.min(Math.max(Math.round(t*127),0),127)}static fromMsbLsbToFloat(t,n=0){R.validation&&(t=Math.min(Math.max(parseInt(t)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127));const r=((t<<7)+n)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(t){R.validation&&(t=Math.min(Math.max(parseFloat(t)||0,0),1));const n=Math.round(t*16383);return{msb:n>>7,lsb:n&127}}static offsetNumber(t,n=0,r=0){if(R.validation){if(t=parseInt(t),isNaN(t))throw new Error("Invalid note number");n=parseInt(n)||0,r=parseInt(r)||0}return Math.min(Math.max(t+n*12+r,0),127)}static getPropertyByValue(t,n){return Object.keys(t).find(r=>t[r]===n)}static getCcNameByNumber(t){if(!(R.validation&&(t=parseInt(t),!(t>=0&&t<=127))))return B.CONTROL_CHANGE_MESSAGES[t].name}static getCcNumberByName(t){let n=B.CONTROL_CHANGE_MESSAGES.find(r=>r.name===t);return n?n.number:B.MIDI_CONTROL_CHANGE_MESSAGES[t]}static getChannelModeByNumber(t){if(!(t>=120&&t<=127))return!1;for(let n in B.CHANNEL_MODE_MESSAGES)if(B.CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&t===B.CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class j5 extends Tt{constructor(t,n){super(),this._output=t,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(t,n={time:0}){return this.output.send(t,n),this}sendKeyAftertouch(t,n,r={}){if(R.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(n=J.fromFloatTo7Bit(n));const i=R.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(t)||(t=[t]),J.buildNoteArray(t).forEach(a=>{this.send([(B.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),a.getOffsetNumber(i),n],{time:J.toTimestamp(r.time)})}),this}sendControlChange(t,n,r={}){if(typeof t=="string"&&(t=J.getCcNumberByName(t)),Array.isArray(n)||(n=[n]),R.validation){if(t===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(n=n.map(i=>{const a=Math.min(Math.max(parseInt(i),0),127);if(isNaN(a))throw new TypeError("Values must be integers between 0 and 127");return a}),n.length===2&&t>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((i,a)=>{this.send([(B.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t+a*32,n[a]],{time:J.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(t,n={}){return this.sendControlChange(99,t[0],n),this.sendControlChange(98,t[1],n),this}_deselectRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_deselectNonRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_selectRegisteredParameter(t,n={}){return this.sendControlChange(101,t[0],n),this.sendControlChange(100,t[1],n),this}_setCurrentParameter(t,n={}){return t=[].concat(t),this.sendControlChange(6,t[0],n),t.length<2?this:(this.sendControlChange(38,t[1],n),this)}sendRpnDecrement(t,n={}){if(Array.isArray(t)||(t=B.REGISTERED_PARAMETERS[t]),R.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(B.REGISTERED_PARAMETERS).forEach(i=>{B.REGISTERED_PARAMETERS[i][0]===t[0]&&B.REGISTERED_PARAMETERS[i][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(t,n={}){if(Array.isArray(t)||(t=B.REGISTERED_PARAMETERS[t]),R.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(B.REGISTERED_PARAMETERS).forEach(i=>{B.REGISTERED_PARAMETERS[i][0]===t[0]&&B.REGISTERED_PARAMETERS[i][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(t,n={}){this.sendNoteOn(t,n);const r=Array.isArray(t)?t:[t];for(let i of r)if(parseInt(i.duration)>0){const a={time:(J.toTimestamp(n.time)||R.time)+parseInt(i.duration),release:i.release,rawRelease:i.rawRelease};this.sendNoteOff(i,a)}else if(parseInt(n.duration)>0){const a={time:(J.toTimestamp(n.time)||R.time)+parseInt(n.duration),release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(i,a)}return this}sendNoteOff(t,n={}){if(R.validation){if(n.rawRelease!=null&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(n.release!=null&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawRelease!=null?r=n.rawRelease:isNaN(n.release)||(r=Math.round(n.release*127));const i=R.octaveOffset+this.output.octaveOffset+this.octaveOffset;return J.buildNoteArray(t,{rawRelease:parseInt(r)}).forEach(a=>{this.send([(B.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),a.getOffsetNumber(i),a.rawRelease],{time:J.toTimestamp(n.time)})}),this}stopNote(t,n={}){return this.sendNoteOff(t,n)}sendNoteOn(t,n={}){if(R.validation){if(n.rawAttack!=null&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(n.attack!=null&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawAttack!=null?r=n.rawAttack:isNaN(n.attack)||(r=Math.round(n.attack*127));const i=R.octaveOffset+this.output.octaveOffset+this.octaveOffset;return J.buildNoteArray(t,{rawAttack:r}).forEach(a=>{this.send([(B.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),a.getOffsetNumber(i),a.rawAttack],{time:J.toTimestamp(n.time)})}),this}sendChannelMode(t,n=0,r={}){if(typeof t=="string"&&(t=B.CHANNEL_MODE_MESSAGES[t]),R.validation){if(t===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(t)||!(t>=120&&t<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(B.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t,n],{time:J.toTimestamp(r.time)}),this}sendOmniMode(t,n={}){return t===void 0||t?this.sendChannelMode("omnimodeon",0,n):this.sendChannelMode("omnimodeoff",0,n),this}sendChannelAftertouch(t,n={}){if(R.validation){if(isNaN(parseFloat(t)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return n.rawValue||(t=J.fromFloatTo7Bit(t)),this.send([(B.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(t)],{time:J.toTimestamp(n.time)}),this}sendMasterTuning(t,n={}){if(t=parseFloat(t)||0,R.validation&&!(t>-65&&t<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(t)+64,i=t-Math.floor(t);i=Math.round((i+1)/2*16383);let a=i>>7&127,o=i&127;return this.sendRpnValue("channelcoarsetuning",r,n),this.sendRpnValue("channelfinetuning",[a,o],n),this}sendModulationRange(t,n,r={}){if(R.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(n!=null&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[t,n],r),this}sendNrpnValue(t,n,r={}){if(n=[].concat(n),R.validation){if(!Array.isArray(t)||!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(t,r),this._setCurrentParameter(n,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(t,n={}){if(R.validation)if(n.rawValue&&Array.isArray(t)){if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(t)){if(!(t>=0&&t<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(t)||t===null)throw new RangeError("Invalid pitch bend value.");if(!(t>=-1&&t<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let r=0,i=0;if(n.rawValue&&Array.isArray(t))r=t[0],i=t[1];else if(n.rawValue&&!Array.isArray(t))r=t;else{const a=J.fromFloatToMsbLsb((t+1)/2);r=a.msb,i=a.lsb}return this.send([(B.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),i,r],{time:J.toTimestamp(n.time)}),this}sendPitchBendRange(t,n,r={}){if(R.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[t,n],r),this}sendProgramChange(t,n={}){if(t=parseInt(t)||0,R.validation&&!(t>=0&&t<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(B.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),t],{time:J.toTimestamp(n.time)}),this}sendRpnValue(t,n,r={}){if(Array.isArray(t)||(t=B.REGISTERED_PARAMETERS[t]),R.validation){if(!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(t,r),this._setCurrentParameter(n,r),this._deselectRegisteredParameter(r),this}sendTuningBank(t,n={}){if(R.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",t,n),this}sendTuningProgram(t,n={}){if(R.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",t,n),this}sendLocalControl(t,n={}){return t?this.sendChannelMode("localcontrol",127,n):this.sendChannelMode("localcontrol",0,n)}sendAllNotesOff(t={}){return this.sendChannelMode("allnotesoff",0,t)}sendAllSoundOff(t={}){return this.sendChannelMode("allsoundoff",0,t)}sendResetAllControllers(t={}){return this.sendChannelMode("resetallcontrollers",0,t)}sendPolyphonicMode(t,n={}){return t==="mono"?this.sendChannelMode("monomodeon",0,n):this.sendChannelMode("polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class dl extends Tt{constructor(t){super(),this._midiOutput=t,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new j5(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(t){let n={timestamp:R.time};t.port.connection==="open"?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):t.port.connection==="closed"&&t.port.state==="connected"?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):t.port.connection==="closed"&&t.port.state==="disconnected"?(n.type="disconnected",n.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",n)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught:",t.port.connection,t.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(t){return Promise.reject(t)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(t,n={time:0},r=0){if(t instanceof R0&&(t=J.isNode?t.data:t.rawData),t instanceof Uint8Array&&J.isNode&&(t=Array.from(t)),R.validation){if(!Array.isArray(t)&&!(t instanceof Uint8Array)&&(t=[t],Array.isArray(n)&&(t=t.concat(n)),n=isNaN(r)?{time:0}:{time:r}),!(parseInt(t[0])>=128&&parseInt(t[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");t.slice(1).forEach(i=>{if(i=parseInt(i),!(i>=0&&i<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(t,J.toTimestamp(n.time)),this}sendSysex(t,n=[],r={}){if(t=[].concat(t),n instanceof Uint8Array){const i=new Uint8Array(1+t.length+n.length+1);i[0]=B.SYSTEM_MESSAGES.sysex,i.set(Uint8Array.from(t),1),i.set(n,1+t.length),i[i.length-1]=B.SYSTEM_MESSAGES.sysexend,this.send(i,{time:r.time})}else{const i=t.concat(n,B.SYSTEM_MESSAGES.sysexend);this.send([B.SYSTEM_MESSAGES.sysex].concat(i),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():R.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(t,n={}){if(R.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([B.SYSTEM_MESSAGES.timecode,t],{time:n.time}),this}sendSongPosition(t=0,n={}){t=Math.floor(t)||0;var r=t>>7&127,i=t&127;return this.send([B.SYSTEM_MESSAGES.songposition,r,i],{time:n.time}),this}sendSongSelect(t=0,n={}){if(R.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([B.SYSTEM_MESSAGES.songselect,t],{time:n.time}),this}sendTuneRequest(t={}){return this.send([B.SYSTEM_MESSAGES.tunerequest],{time:t.time}),this}sendClock(t={}){return this.send([B.SYSTEM_MESSAGES.clock],{time:t.time}),this}sendStart(t={}){return this.send([B.SYSTEM_MESSAGES.start],{time:t.time}),this}sendContinue(t={}){return this.send([B.SYSTEM_MESSAGES.continue],{time:t.time}),this}sendStop(t={}){return this.send([B.SYSTEM_MESSAGES.stop],{time:t.time}),this}sendActiveSensing(t={}){return this.send([B.SYSTEM_MESSAGES.activesensing],{time:t.time}),this}sendReset(t={}){return this.send([B.SYSTEM_MESSAGES.reset],{time:t.time}),this}sendTuningRequest(t={}){return R.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(t)}sendKeyAftertouch(t,n,r={}){return r.channels==null&&(r.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendKeyAftertouch(t,n,r)}),this}sendControlChange(t,n,r={},i={}){if(R.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const a=r;r=i,r.channels=a,r.channels==="all"&&(r.channels=B.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendControlChange(t,n,r)}),this}sendPitchBendRange(t=0,n=0,r={}){return r.channels==null&&(r.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendPitchBendRange(t,n,r)}),this}setPitchBendRange(t=0,n=0,r="all",i={}){return R.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=B.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(t,n,i)}sendRpnValue(t,n,r={}){return r.channels==null&&(r.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendRpnValue(t,n,r)}),this}setRegisteredParameter(t,n=[],r="all",i={}){return R.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=B.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(t,n,i)}sendChannelAftertouch(t,n={},r={}){if(R.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=B.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendChannelAftertouch(t,n)}),this}sendPitchBend(t,n={},r={}){if(R.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=B.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPitchBend(t,n)}),this}sendProgramChange(t=0,n={},r={}){if(R.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=B.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendProgramChange(t,n)}),this}sendModulationRange(t,n,r={}){return r.channels==null&&(r.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendModulationRange(t,n,r)}),this}setModulationRange(t=0,n=0,r="all",i={}){return R.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=B.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(t,n,i)}sendMasterTuning(t,n={}){return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendMasterTuning(t,n)}),this}setMasterTuning(t,n={},r={}){return R.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=n,r.channels==="all"&&(r.channels=B.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(t,r)}sendTuningProgram(t,n={}){return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningProgram(t,n)}),this}setTuningProgram(t,n="all",r={}){return R.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=n,r.channels==="all"&&(r.channels=B.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(t,r)}sendTuningBank(t=0,n={}){return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningBank(t,n)}),this}setTuningBank(t,n="all",r={}){return R.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=n,r.channels==="all"&&(r.channels=B.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(t,r)}sendChannelMode(t,n=0,r={},i={}){if(R.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const a=r;r=i,r.channels=a,r.channels==="all"&&(r.channels=B.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendChannelMode(t,n,r)}),this}sendAllSoundOff(t={}){return t.channels==null&&(t.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendAllSoundOff(t)}),this}sendAllNotesOff(t={}){return t.channels==null&&(t.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendAllNotesOff(t)}),this}sendResetAllControllers(t={},n={}){if(R.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=B.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendResetAllControllers(t)}),this}sendPolyphonicMode(t,n={},r={}){if(R.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=B.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPolyphonicMode(t,n)}),this}sendLocalControl(t,n={},r={}){if(R.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=B.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendLocalControl(t,n)}),this}sendOmniMode(t,n={},r={}){if(R.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=B.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendOmniMode(t,n)}),this}sendNrpnValue(t,n,r={}){return r.channels==null&&(r.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendNrpnValue(t,n,r)}),this}setNonRegisteredParameter(t,n=[],r="all",i={}){return R.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=B.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(t,n,i)}sendRpnIncrement(t,n={}){return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnIncrement(t,n)}),this}incrementRegisteredParameter(t,n="all",r={}){return R.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=B.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(t,r)}sendRpnDecrement(t,n={}){return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnDecrement(t,n)}),this}decrementRegisteredParameter(t,n="all",r={}){return R.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=B.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(t,r)}sendNoteOff(t,n={},r={}){if(R.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=B.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOff(t,n)}),this}stopNote(t,n){return this.sendNoteOff(t,n)}playNote(t,n={},r={}){if(R.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=B.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].playNote(t,n)}),this}sendNoteOn(t,n={},r={}){if(R.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=B.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOn(t,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class nh{constructor(t=[],n={}){this.destinations=[],this.types=[...Object.keys(B.SYSTEM_MESSAGES),...Object.keys(B.CHANNEL_MESSAGES)],this.channels=B.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(t)||(t=[t]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),R.validation&&(t.forEach(r=>{if(!(r instanceof dl))throw new TypeError("Destinations must be of type 'Output'.")}),n.types!==void 0&&n.types.forEach(r=>{if(!B.SYSTEM_MESSAGES.hasOwnProperty(r)&&!B.CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),n.channels!==void 0&&n.channels.forEach(r=>{if(!B.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=t,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(t){this.suspended||this.types.includes(t.type)&&(t.channel&&!this.channels.includes(t.channel)||this.destinations.forEach(n=>{R.validation&&!(n instanceof dl)||n.send(t)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class Y5 extends Tt{constructor(t,n){super(),this._input=t,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(t){const n=Object.assign({},t);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(t){const n=Object.assign({},t);n.type=n.message.type||"unknownmessage";const r=t.message.dataBytes[0],i=t.message.dataBytes[1];if(n.type==="noteoff"||n.type==="noteon"&&i===0)this.notesState[r]=!1,n.type="noteoff",n.note=new Tr(J.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+R.octaveOffset),{rawAttack:0,rawRelease:i}),n.value=J.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if(n.type==="noteon")this.notesState[r]=!0,n.note=new Tr(J.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+R.octaveOffset),{rawAttack:i}),n.value=J.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if(n.type==="keyaftertouch")n.note=new Tr(J.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+R.octaveOffset)),n.value=J.from7bitToFloat(i),n.rawValue=i,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=r;else if(n.type==="controlchange"){n.controller={number:r,name:B.CONTROL_CHANGE_MESSAGES[r].name,description:B.CONTROL_CHANGE_MESSAGES[r].description,position:B.CONTROL_CHANGE_MESSAGES[r].position},n.subtype=n.controller.name||"controller"+r,n.value=J.from7bitToFloat(i),n.rawValue=i;const a=Object.assign({},n);a.type=`${n.type}-controller${r}`,delete a.subtype,this.emit(a.type,a);const o=Object.assign({},n);o.type=`${n.type}-`+B.CONTROL_CHANGE_MESSAGES[r].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else n.type==="programchange"?(n.value=r,n.rawValue=n.value):n.type==="channelaftertouch"?(n.value=J.from7bitToFloat(r),n.rawValue=r):n.type==="pitchbend"?(n.value=((i<<7)+r-8192)/8192,n.rawValue=(i<<7)+r):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(t){const n=Object.assign({},t);n.type=n.controller.name,n.type==="localcontrol"&&(n.value=n.message.data[2]===127,n.rawValue=n.message.data[2]),n.type==="omnimodeon"?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="omnimodeoff"&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),n.type==="monomodeon"?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="polymodeon"&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(t){const n=t.message.dataBytes[0],r=t.message.dataBytes[1];n===99||n===101?(this._nrpnBuffer=[],this._rpnBuffer=[],n===99?this._nrpnBuffer=[t.message]:r!==127&&(this._rpnBuffer=[t.message])):n===98||n===100?n===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(t.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(t.message):this._rpnBuffer=[]):(n===6||n===38||n===96||n===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],t):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],t):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(t){return t===6||t===38||t===96||t===97||t===98||t===99||t===100||t===101}_dispatchParameterNumberEvent(t,n,r,i){t=t==="nrpn"?"nrpn":"rpn";const a={target:i.target,timestamp:i.timestamp,message:i.message,parameterMsb:n,parameterLsb:r,value:J.from7bitToFloat(i.message.dataBytes[1]),rawValue:i.message.dataBytes[1]};t==="rpn"?a.parameter=Object.keys(B.REGISTERED_PARAMETERS).find(u=>B.REGISTERED_PARAMETERS[u][0]===n&&B.REGISTERED_PARAMETERS[u][1]===r):a.parameter=(n<<7)+r;const o=B.CONTROL_CHANGE_MESSAGES[i.message.dataBytes[0]].name;a.type=`${t}-${o}`,this.emit(a.type,a);const s=Object.assign({},a);s.type==="nrpn-dataincrement"?s.type="nrpn-databuttonincrement":s.type==="nrpn-datadecrement"?s.type="nrpn-databuttondecrement":s.type==="rpn-dataincrement"?s.type="rpn-databuttonincrement":s.type==="rpn-datadecrement"&&(s.type="rpn-databuttondecrement"),this.emit(s.type,s),a.type=t,a.subtype=o,this.emit(a.type,a)}getChannelModeByNumber(t){return R.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),t=Math.floor(t)),J.getChannelModeByNumber(t)}getCcNameByNumber(t){if(R.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),t=parseInt(t),!(t>=0&&t<=127)))throw new RangeError("Invalid control change number.");return J.getCcNameByNumber(t)}getNoteState(t){t instanceof Tr&&(t=t.identifier);const n=J.guessNoteNumber(t,R.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(t){this.validation&&(t=!!t),this.parameterNumberEventsEnabled=t}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class R0{constructor(t){this.rawData=t,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=J.getPropertyByValue(B.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=J.getPropertyByValue(B.SYSTEM_MESSAGES,this.command)),this.statusByte===B.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class W5 extends Tt{constructor(t){super(),this._midiInput=t,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new Y5(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(t){let n={timestamp:R.time,target:this,port:this};t.port.connection==="open"?(n.type="opened",this.emit("opened",n)):t.port.connection==="closed"&&t.port.state==="connected"?(n.type="closed",this.emit("closed",n)):t.port.connection==="closed"&&t.port.state==="disconnected"?(n.type="disconnected",n.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",n)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught: ",t.port.connection,t.port.state)}_onMidiMessage(t){const n=new R0(t.data),r={port:this,target:this,message:n,timestamp:t.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",r),n.isSystemMessage?this._parseEvent(r):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(r),this._forwarders.forEach(i=>i.forward(n))}_parseEvent(t){const n=Object.assign({},t);n.type=n.message.type||"unknownmidimessage",n.type==="songselect"&&(n.song=t.data[1]+1,n.value=t.data[1],n.rawValue=n.value),this.emit(n.type,n)}async open(){try{await this._midiInput.open()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}getChannelModeByNumber(){R.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(t,n,r={}){if(R.validation&&typeof r=="function"){let i=n!=null?[].concat(n):void 0;n=r,r={channels:i}}if(B.CHANNEL_EVENTS.includes(t)){r.channels===void 0&&(r.channels=B.MIDI_CHANNEL_NUMBERS);let i=[];return J.sanitizeChannels(r.channels).forEach(a=>{i.push(this.channels[a].addListener(t,n,r))}),i}else return super.addListener(t,n,r)}addOneTimeListener(t,n,r={}){return r.remaining=1,this.addListener(t,n,r)}on(t,n,r,i){return this.addListener(t,n,r,i)}hasListener(t,n,r={}){if(R.validation&&typeof r=="function"){let i=[].concat(n);n=r,r={channels:i}}return B.CHANNEL_EVENTS.includes(t)?(r.channels===void 0&&(r.channels=B.MIDI_CHANNEL_NUMBERS),J.sanitizeChannels(r.channels).every(i=>this.channels[i].hasListener(t,n))):super.hasListener(t,n)}removeListener(t,n,r={}){if(R.validation&&typeof r=="function"){let i=[].concat(n);n=r,r={channels:i}}if(r.channels===void 0&&(r.channels=B.MIDI_CHANNEL_NUMBERS),t==null)return J.sanitizeChannels(r.channels).forEach(i=>{this.channels[i]&&this.channels[i].removeListener()}),super.removeListener();B.CHANNEL_EVENTS.includes(t)?J.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].removeListener(t,n,r)}):super.removeListener(t,n,r)}addForwarder(t,n={}){let r;return t instanceof nh?r=t:r=new nh(t,n),this._forwarders.push(r),r}removeForwarder(t){this._forwarders=this._forwarders.filter(n=>n!==t)}hasForwarder(t){return this._forwarders.includes(t)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return R.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class X5 extends Tt{constructor(){super(),this.defaults={note:{attack:J.from7bitToFloat(64),release:J.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(t={},n=!1){if(J.isNode){try{window.navigator}catch{let s=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,s)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=t.validation!==!1,this.validation&&(typeof t=="function"&&(t={callback:t,sysex:n}),n&&(t.sysex=!0)),this.enabled)return typeof t.callback=="function"&&t.callback(),Promise.resolve();const r={timestamp:this.time,target:this,type:"error",error:void 0},i={timestamp:this.time,target:this,type:"midiaccessgranted"},a={timestamp:this.time,target:this,type:"enabled"};try{typeof t.requestMIDIAccessFunction=="function"?this.interface=await t.requestMIDIAccessFunction({sysex:t.sysex,software:t.software}):this.interface=await navigator.requestMIDIAccess({sysex:t.sysex,software:t.software})}catch(o){return r.error=o,this.emit("error",r),typeof t.callback=="function"&&t.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",i),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return r.error=o,this.emit("error",r),typeof t.callback=="function"&&t.callback(o),Promise.reject(o)}return this.emit("enabled",a),typeof t.callback=="function"&&t.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let t={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",t),this.removeListener()})}getInputById(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(n.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(this._disconnectedInputs[r].id===t.toString())return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(this.inputs[r].id===t.toString())return this.inputs[r]}getInputByName(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(n.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(~this._disconnectedInputs[r].name.indexOf(t))return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(~this.inputs[r].name.indexOf(t))return this.inputs[r]}getOutputByName(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(n.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(~this._disconnectedOutputs[r].name.indexOf(t))return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(~this.outputs[r].name.indexOf(t))return this.outputs[r]}getOutputById(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(n.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(this._disconnectedOutputs[r].id===t.toString())return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(this.outputs[r].id===t.toString())return this.outputs[r]}noteNameToNumber(t){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),J.toNoteNumber(t,this.octaveOffset)}getOctave(t){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),t=parseInt(t)),!isNaN(t)&&t>=0&&t<=127?J.getNoteDetails(J.offsetNumber(t,this.octaveOffset)).octave:!1}sanitizeChannels(t){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),J.sanitizeChannels(t)}toMIDIChannels(t){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),J.sanitizeChannels(t)}guessNoteNumber(t){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),J.guessNoteNumber(t,this.octaveOffset)}getValidNoteArray(t,n={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),J.buildNoteArray(t,n)}convertToTimestamp(t){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),J.toTimestamp(t)}async _destroyInputsAndOutputs(){let t=[];return this.inputs.forEach(n=>t.push(n.destroy())),this.outputs.forEach(n=>t.push(n.destroy())),Promise.all(t).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(t){this._updateInputsAndOutputs();let n={timestamp:t.timeStamp,type:t.port.state,target:this};if(t.port.state==="connected"&&t.port.connection==="open"){t.port.type==="output"?n.port=this.getOutputById(t.port.id):t.port.type==="input"&&(n.port=this.getInputById(t.port.id)),this.emit(t.port.state,n);const r=Object.assign({},n);r.type="portschanged",this.emit(r.type,r)}else if(t.port.state==="disconnected"&&t.port.connection==="pending"){t.port.type==="input"?n.port=this.getInputById(t.port.id,{disconnected:!0}):t.port.type==="output"&&(n.port=this.getOutputById(t.port.id,{disconnected:!0})),this.emit(t.port.state,n);const r=Object.assign({},n);r.type="portschanged",this.emit(r.type,r)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let n=this._inputs.length-1;n>=0;n--){const r=this._inputs[n];Array.from(this.interface.inputs.values()).find(a=>a===r._midiInput)||(this._disconnectedInputs.push(r),this._inputs.splice(n,1))}let t=[];return this.interface.inputs.forEach(n=>{if(!this._inputs.find(r=>r._midiInput===n)){let r=this._disconnectedInputs.find(i=>i._midiInput===n);r||(r=new W5(n)),this._inputs.push(r),t.push(r.open())}}),Promise.all(t)}async _updateOutputs(){if(!this.interface)return;for(let n=this._outputs.length-1;n>=0;n--){const r=this._outputs[n];Array.from(this.interface.outputs.values()).find(a=>a===r._midiOutput)||(this._disconnectedOutputs.push(r),this._outputs.splice(n,1))}let t=[];return this.interface.outputs.forEach(n=>{if(!this._outputs.find(r=>r._midiOutput===n)){let r=this._disconnectedOutputs.find(i=>i._midiOutput===n);r||(r=new dl(n)),this._outputs.push(r),t.push(r.open())}}),Promise.all(t)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),J.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),J.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.9"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),B.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),B.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),B.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),B.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),B.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const R=new X5;R.constructor=null;function et(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Sa(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ps(e){let t,n,r;e.length!==2?(t=et,n=(s,u)=>et(e(s),u),r=(s,u)=>e(s)-u):(t=e===et||e===Sa?e:K5,n=e,r=e);function i(s,u,c=0,l=s.length){if(c<l){if(t(u,u)!==0)return l;do{const h=c+l>>>1;n(s[h],u)<0?c=h+1:l=h}while(c<l)}return c}function a(s,u,c=0,l=s.length){if(c<l){if(t(u,u)!==0)return l;do{const h=c+l>>>1;n(s[h],u)<=0?c=h+1:l=h}while(c<l)}return c}function o(s,u,c=0,l=s.length){const h=i(s,u,c,l-1);return h>c&&r(s[h-1],u)>-r(s[h],u)?h-1:h}return{left:i,center:o,right:a}}function K5(){return 0}function O0(e){return e===null?NaN:+e}function*Z5(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const J5=Ps(et),Ns=J5.right;Ps(O0).center;function Q5(e,t){let n=0;for(let r of e)r!=null&&(r=+r)>=r&&++n;return n}function e7(e){return e.length|0}function t7(e){return!(e>0)}function n7(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function r7(e){return t=>e(...t)}function i7(...e){const t=typeof e[e.length-1]=="function"&&r7(e.pop());e=e.map(n7);const n=e.map(e7),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(t7))return a;for(;;){a.push(i.map((s,u)=>e[u][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function a7(e,t){var n=0;return Float64Array.from(e,r=>n+=+r||0)}function B0(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function o7(e,t){const n=B0(e,t);return n&&Math.sqrt(n)}function ut(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class lr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,s=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);s&&(n[r++]=s),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class cr extends Map{constructor(t,n=G0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ml(this,t))}has(t){return super.has(ml(this,t))}set(t,n){return super.set(L0(this,t),n)}delete(t){return super.delete(F0(this,t))}}class Cs extends Set{constructor(t,n=G0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(ml(this,t))}add(t){return super.add(L0(this,t))}delete(t){return super.delete(F0(this,t))}}function ml({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function L0({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function F0({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function G0(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Qi(e){return e}function Mc(e,...t){return Ts(e,Qi,Qi,t)}function U0(e,...t){return Ts(e,Array.from,Qi,t)}function Or(e,t,...n){return Ts(e,Qi,t,n)}function s7(e,t,...n){return Ts(e,Array.from,t,n)}function Ts(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new cr,u=r[o++];let c=-1;for(const l of a){const h=u(l,++c,a),f=s.get(h);f?f.push(l):s.set(h,[l])}for(const[l,h]of s)s.set(l,i(h,o));return t(s)}(e,0)}function u7(e,t){return Array.from(t,n=>e[n])}function Oo(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const s=Bo(o[i],o[a]);if(s)return s}})):(n=e.map(n),r.sort((i,a)=>Bo(n[i],n[a]))),u7(e,r)}return e.sort(q0(n))}function q0(e=et){if(e===et)return Bo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Bo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function xc(e,t,n){return(t.length!==2?Oo(Or(e,t,n),([r,i],[a,o])=>et(i,o)||et(r,a)):Oo(Mc(e,n),([r,i],[a,o])=>t(i,o)||et(r,a))).map(([r])=>r)}var l7=Array.prototype,c7=l7.slice;function yu(e){return()=>e}const f7=Math.sqrt(50),h7=Math.sqrt(10),d7=Math.sqrt(2);function Lo(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=f7?10:a>=h7?5:a>=d7?2:1;let s,u,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(e*c),u=Math.round(t*c),s/c<e&&++s,u/c>t&&--u,c=-c):(c=Math.pow(10,i)*o,s=Math.round(e/c),u=Math.round(t/c),s*c<e&&++s,u*c>t&&--u),u<s&&.5<=n&&n<2?Lo(e,t,n*2):[s,u,c]}function ea(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Lo(t,e,n):Lo(e,t,n);if(!(a>=i))return[];const s=a-i+1,u=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)u[c]=(a-c)/-o;else for(let c=0;c<s;++c)u[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)u[c]=(i+c)/-o;else for(let c=0;c<s;++c)u[c]=(i+c)*o;return u}function Wr(e,t,n){return t=+t,e=+e,n=+n,Lo(e,t,n)[2]}function pl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Wr(t,e,n):Wr(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function m7(e,t,n){let r;for(;;){const i=Wr(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function p7(e){return Math.max(1,Math.ceil(Math.log(Q5(e))/Math.LN2)+1)}function b7(){var e=Qi,t=ut,n=p7;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,u,c=new Array(o);for(a=0;a<o;++a)c[a]=e(i[a],a,i);var l=t(c),h=l[0],f=l[1],d=n(c,h,f);if(!Array.isArray(d)){const M=f,b=+d;if(t===ut&&([h,f]=m7(h,f,b)),d=ea(h,f,b),d[0]<=h&&(u=Wr(h,f,b)),d[d.length-1]>=f)if(M>=f&&t===ut){const x=Wr(h,f,b);isFinite(x)&&(x>0?f=(Math.floor(f/x)+1)*x:x<0&&(f=(Math.ceil(f*-x)+1)/-x))}else d.pop()}for(var m=d.length,p=0,y=m;d[p]<=h;)++p;for(;d[y-1]>f;)--y;(p||y<m)&&(d=d.slice(p,y),m=y-p);var _=new Array(m+1),g;for(a=0;a<=m;++a)g=_[a]=[],g.x0=a>0?d[a-1]:h,g.x1=a<m?d[a]:f;if(isFinite(u)){if(u>0)for(a=0;a<o;++a)(s=c[a])!=null&&h<=s&&s<=f&&_[Math.min(m,Math.floor((s-h)/u))].push(i[a]);else if(u<0){for(a=0;a<o;++a)if((s=c[a])!=null&&h<=s&&s<=f){const M=Math.floor((h-s)*u);_[Math.min(m,M+(d[M]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=c[a])!=null&&h<=s&&s<=f&&_[Ns(d,s,0,m)].push(i[a]);return _}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:yu(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:yu([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:yu(Array.isArray(i)?c7.call(i):i),r):n},r}function tt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function g7(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function xn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function y7(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function H0(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Bo:q0(i);r>n;){if(r-n>600){const u=r-n+1,c=t-n+1,l=Math.log(u),h=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*h*(u-h)/u)*(c-u/2<0?-1:1),d=Math.max(n,Math.floor(t-c*h/u+f)),m=Math.min(r,Math.floor(t+(u-c)*h/u+f));H0(e,t,d,m,i)}const a=e[t];let o=n,s=r;for(_i(e,n,t),i(e[r],a)>0&&_i(e,n,r);o<s;){for(_i(e,o,s),++o,--s;i(e[o],a)<0;)++o;for(;i(e[s],a)>0;)--s}i(e[n],a)===0?_i(e,n,s):(++s,_i(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function _i(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function z0(e,t=et){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?et(o,i)>0:et(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Fo(e,t,n){if(e=Float64Array.from(Z5(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return xn(e);if(t>=1)return tt(e);var r,i=(r-1)*t,a=Math.floor(i),o=tt(H0(e,a).subarray(0,a+1)),s=xn(e.subarray(a+1));return o+(s-o)*(i-a)}}function _7(e,t,n=O0){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function V0(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function bl(e,t){return Fo(e,.5,t)}function*w7(e){for(const t of e)yield*t}function j0(e){return Array.from(w7(e))}function v7(e,t){const n=new cr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function M7(e,t=x7){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function x7(e,t){return[e,t]}function lt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Fn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Go(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function E7(e){return e}var S7=3,rh=1e-6;function A7(e){return"translate("+e+",0)"}function P7(e){return t=>+e(t)}function N7(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function C7(){return!this.__axis}function T7(e,t){var n=[],r=null,i=null,a=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1,l="y",h=A7;function f(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):E7),y=Math.max(a,0)+s,_=t.range(),g=+_[0]+u,M=+_[_.length-1]+u,b=(t.bandwidth?N7:P7)(t.copy(),u),x=d.selection?d.selection():d,w=x.selectAll(".domain").data([null]),S=x.selectAll(".tick").data(m,t).order(),E=S.exit(),N=S.enter().append("g").attr("class","tick"),F=S.select("line"),P=S.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(N),F=F.merge(N.append("line").attr("stroke","currentColor").attr(l+"2",c*a)),P=P.merge(N.append("text").attr("fill","currentColor").attr(l,c*y).attr("dy","0.71em")),d!==x&&(w=w.transition(d),S=S.transition(d),F=F.transition(d),P=P.transition(d),E=E.transition(d).attr("opacity",rh).attr("transform",function(L){return isFinite(L=b(L))?h(L+u):this.getAttribute("transform")}),N.attr("opacity",rh).attr("transform",function(L){var j=this.parentNode.__axis;return h((j&&isFinite(j=j(L))?j:b(L))+u)})),E.remove(),w.attr("d",o?"M"+g+","+c*o+"V"+u+"H"+M+"V"+c*o:"M"+g+","+u+"H"+M),S.attr("opacity",1).attr("transform",function(L){return h(b(L)+u)}),F.attr(l+"2",c*a),P.attr(l,c*y).text(p),x.filter(C7).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),x.each(function(){this.__axis=b})}return f.scale=function(d){return arguments.length?(t=d,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(a=o=+d,f):a},f.tickSizeInner=function(d){return arguments.length?(a=+d,f):a},f.tickSizeOuter=function(d){return arguments.length?(o=+d,f):o},f.tickPadding=function(d){return arguments.length?(s=+d,f):s},f.offset=function(d){return arguments.length?(u=+d,f):u},f}function $7(e){return T7(S7,e)}var k7={value:()=>{}};function Y0(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Mo(n)}function Mo(e){this._=e}function I7(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Mo.prototype=Y0.prototype={constructor:Mo,on:function(e,t){var n=this._,r=I7(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=D7(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=ih(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ih(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Mo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function D7(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ih(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=k7,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var gl="http://www.w3.org/1999/xhtml";const Xr={svg:"http://www.w3.org/2000/svg",xhtml:gl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $s(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Xr.hasOwnProperty(t)?{space:Xr[t],local:e}:e}function R7(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gl&&t.documentElement.namespaceURI===gl?t.createElement(e):t.createElementNS(n,e)}}function O7(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ks(e){var t=$s(e);return(t.local?O7:R7)(t)}function B7(){}function Ec(e){return e==null?B7:function(){return this.querySelector(e)}}function L7(e){typeof e!="function"&&(e=Ec(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),u,c,l=0;l<o;++l)(u=a[l])&&(c=e.call(u,u.__data__,l,a))&&("__data__"in u&&(c.__data__=u.__data__),s[l]=c);return new ct(r,this._parents)}function F7(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function G7(){return[]}function W0(e){return e==null?G7:function(){return this.querySelectorAll(e)}}function U7(e){return function(){return F7(e.apply(this,arguments))}}function q7(e){typeof e=="function"?e=U7(e):e=W0(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&(r.push(e.call(u,u.__data__,c,o)),i.push(u));return new ct(r,i)}function X0(e){return function(){return this.matches(e)}}function K0(e){return function(t){return t.matches(e)}}var H7=Array.prototype.find;function z7(e){return function(){return H7.call(this.children,e)}}function V7(){return this.firstElementChild}function j7(e){return this.select(e==null?V7:z7(typeof e=="function"?e:K0(e)))}var Y7=Array.prototype.filter;function W7(){return Array.from(this.children)}function X7(e){return function(){return Y7.call(this.children,e)}}function K7(e){return this.selectAll(e==null?W7:X7(typeof e=="function"?e:K0(e)))}function Z7(e){typeof e!="function"&&(e=X0(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new ct(r,this._parents)}function Z0(e){return new Array(e.length)}function J7(){return new ct(this._enter||this._groups.map(Z0),this._parents)}function Uo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Uo.prototype={constructor:Uo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Q7(e){return function(){return e}}function e6(e,t,n,r,i,a){for(var o=0,s,u=t.length,c=a.length;o<c;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new Uo(e,a[o]);for(;o<u;++o)(s=t[o])&&(i[o]=s)}function t6(e,t,n,r,i,a,o){var s,u,c=new Map,l=t.length,h=a.length,f=new Array(l),d;for(s=0;s<l;++s)(u=t[s])&&(f[s]=d=o.call(u,u.__data__,s,t)+"",c.has(d)?i[s]=u:c.set(d,u));for(s=0;s<h;++s)d=o.call(e,a[s],s,a)+"",(u=c.get(d))?(r[s]=u,u.__data__=a[s],c.delete(d)):n[s]=new Uo(e,a[s]);for(s=0;s<l;++s)(u=t[s])&&c.get(f[s])===u&&(i[s]=u)}function n6(e){return e.__data__}function r6(e,t){if(!arguments.length)return Array.from(this,n6);var n=t?t6:e6,r=this._parents,i=this._groups;typeof e!="function"&&(e=Q7(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),c=0;c<a;++c){var l=r[c],h=i[c],f=h.length,d=i6(e.call(l,l&&l.__data__,c,r)),m=d.length,p=s[c]=new Array(m),y=o[c]=new Array(m),_=u[c]=new Array(f);n(l,h,p,y,_,d,t);for(var g=0,M=0,b,x;g<m;++g)if(b=p[g]){for(g>=M&&(M=g+1);!(x=y[M])&&++M<m;);b._next=x||null}}return o=new ct(o,r),o._enter=s,o._exit=u,o}function i6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function a6(){return new ct(this._exit||this._groups.map(Z0),this._parents)}function o6(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function s6(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var c=n[u],l=r[u],h=c.length,f=s[u]=new Array(h),d,m=0;m<h;++m)(d=c[m]||l[m])&&(f[m]=d);for(;u<i;++u)s[u]=n[u];return new ct(s,this._parents)}function u6(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function l6(e){e||(e=c6);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),c,l=0;l<s;++l)(c=o[l])&&(u[l]=c);u.sort(t)}return new ct(i,this._parents).order()}function c6(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function f6(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function h6(){return Array.from(this)}function d6(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function m6(){let e=0;for(const t of this)++e;return e}function p6(){return!this.node()}function b6(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function g6(e){return function(){this.removeAttribute(e)}}function y6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _6(e,t){return function(){this.setAttribute(e,t)}}function w6(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function v6(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function M6(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function x6(e,t){var n=$s(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?y6:g6:typeof t=="function"?n.local?M6:v6:n.local?w6:_6)(n,t))}function J0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function E6(e){return function(){this.style.removeProperty(e)}}function S6(e,t,n){return function(){this.style.setProperty(e,t,n)}}function A6(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function P6(e,t,n){return arguments.length>1?this.each((t==null?E6:typeof t=="function"?A6:S6)(e,t,n??"")):Kr(this.node(),e)}function Kr(e,t){return e.style.getPropertyValue(t)||J0(e).getComputedStyle(e,null).getPropertyValue(t)}function N6(e){return function(){delete this[e]}}function C6(e,t){return function(){this[e]=t}}function T6(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $6(e,t){return arguments.length>1?this.each((t==null?N6:typeof t=="function"?T6:C6)(e,t)):this.node()[e]}function Q0(e){return e.trim().split(/^|\s+/)}function Sc(e){return e.classList||new e1(e)}function e1(e){this._node=e,this._names=Q0(e.getAttribute("class")||"")}e1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function t1(e,t){for(var n=Sc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function n1(e,t){for(var n=Sc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function k6(e){return function(){t1(this,e)}}function I6(e){return function(){n1(this,e)}}function D6(e,t){return function(){(t.apply(this,arguments)?t1:n1)(this,e)}}function R6(e,t){var n=Q0(e+"");if(arguments.length<2){for(var r=Sc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?D6:t?k6:I6)(n,t))}function O6(){this.textContent=""}function B6(e){return function(){this.textContent=e}}function L6(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function F6(e){return arguments.length?this.each(e==null?O6:(typeof e=="function"?L6:B6)(e)):this.node().textContent}function G6(){this.innerHTML=""}function U6(e){return function(){this.innerHTML=e}}function q6(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function H6(e){return arguments.length?this.each(e==null?G6:(typeof e=="function"?q6:U6)(e)):this.node().innerHTML}function z6(){this.nextSibling&&this.parentNode.appendChild(this)}function V6(){return this.each(z6)}function j6(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Y6(){return this.each(j6)}function W6(e){var t=typeof e=="function"?e:ks(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function X6(){return null}function K6(e,t){var n=typeof e=="function"?e:ks(e),r=t==null?X6:typeof t=="function"?t:Ec(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Z6(){var e=this.parentNode;e&&e.removeChild(this)}function J6(){return this.each(Z6)}function Q6(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function e4(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function t4(e){return this.select(e?e4:Q6)}function n4(e){return arguments.length?this.property("__data__",e):this.node().__data__}function r4(e){return function(t){e.call(this,t,this.__data__)}}function i4(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function a4(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function o4(e,t,n){return function(){var r=this.__on,i,a=r4(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function s4(e,t,n){var r=i4(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,l;u<c;++u)for(i=0,l=s[u];i<a;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}return}for(s=t?o4:a4,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function r1(e,t,n){var r=J0(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function u4(e,t){return function(){return r1(this,e,t)}}function l4(e,t){return function(){return r1(this,e,t.apply(this,arguments))}}function c4(e,t){return this.each((typeof t=="function"?l4:u4)(e,t))}function*f4(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var i1=[null];function ct(e,t){this._groups=e,this._parents=t}function Aa(){return new ct([[document.documentElement]],i1)}function h4(){return this}ct.prototype=Aa.prototype={constructor:ct,select:L7,selectAll:q7,selectChild:j7,selectChildren:K7,filter:Z7,data:r6,enter:J7,exit:a6,join:o6,merge:s6,selection:h4,order:u6,sort:l6,call:f6,nodes:h6,node:d6,size:m6,empty:p6,each:b6,attr:x6,style:P6,property:$6,classed:R6,text:F6,html:H6,raise:V6,lower:Y6,append:W6,insert:K6,remove:J6,clone:t4,datum:n4,on:s4,dispatch:c4,[Symbol.iterator]:f4};function Ui(e){return typeof e=="string"?new ct([[document.querySelector(e)]],[document.documentElement]):new ct([[e]],i1)}function d4(e){let t;for(;t=e.sourceEvent;)e=t;return e}function m4(e,t){if(e=d4(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function ui(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Vn(){}var fr=.7,Zr=1/fr,Br="\\s*([+-]?\\d+)\\s*",ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",p4=/^#([0-9a-f]{3,8})$/,b4=new RegExp(`^rgb\\(${Br},${Br},${Br}\\)$`),g4=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),y4=new RegExp(`^rgba\\(${Br},${Br},${Br},${ta}\\)$`),_4=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${ta}\\)$`),w4=new RegExp(`^hsl\\(${ta},${Qt},${Qt}\\)$`),v4=new RegExp(`^hsla\\(${ta},${Qt},${Qt},${ta}\\)$`),ah={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ui(Vn,hr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oh,formatHex:oh,formatHex8:M4,formatHsl:x4,formatRgb:sh,toString:sh});function oh(){return this.rgb().formatHex()}function M4(){return this.rgb().formatHex8()}function x4(){return a1(this).formatHsl()}function sh(){return this.rgb().formatRgb()}function hr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=p4.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?uh(t):n===3?new Fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Za(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Za(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=b4.exec(e))?new Fe(t[1],t[2],t[3],1):(t=g4.exec(e))?new Fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=y4.exec(e))?Za(t[1],t[2],t[3],t[4]):(t=_4.exec(e))?Za(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=w4.exec(e))?fh(t[1],t[2]/100,t[3]/100,1):(t=v4.exec(e))?fh(t[1],t[2]/100,t[3]/100,t[4]):ah.hasOwnProperty(e)?uh(ah[e]):e==="transparent"?new Fe(NaN,NaN,NaN,0):null}function uh(e){return new Fe(e>>16&255,e>>8&255,e&255,1)}function Za(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fe(e,t,n,r)}function Ac(e){return e instanceof Vn||(e=hr(e)),e?(e=e.rgb(),new Fe(e.r,e.g,e.b,e.opacity)):new Fe}function Gn(e,t,n,r){return arguments.length===1?Ac(e):new Fe(e,t,n,r??1)}function Fe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ui(Fe,Gn,Pa(Vn,{brighter(e){return e=e==null?Zr:Math.pow(Zr,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fr:Math.pow(fr,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fe(rr(this.r),rr(this.g),rr(this.b),qo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lh,formatHex:lh,formatHex8:E4,formatRgb:ch,toString:ch}));function lh(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}`}function E4(){return`#${tr(this.r)}${tr(this.g)}${tr(this.b)}${tr((isNaN(this.opacity)?1:this.opacity)*255)}`}function ch(){const e=qo(this.opacity);return`${e===1?"rgb(":"rgba("}${rr(this.r)}, ${rr(this.g)}, ${rr(this.b)}${e===1?")":`, ${e})`}`}function qo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tr(e){return e=rr(e),(e<16?"0":"")+e.toString(16)}function fh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ct(e,t,n,r)}function a1(e){if(e instanceof Ct)return new Ct(e.h,e.s,e.l,e.opacity);if(e instanceof Vn||(e=hr(e)),!e)return new Ct;if(e instanceof Ct)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Ct(o,s,u,e.opacity)}function yl(e,t,n,r){return arguments.length===1?a1(e):new Ct(e,t,n,r??1)}function Ct(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ui(Ct,yl,Pa(Vn,{brighter(e){return e=e==null?Zr:Math.pow(Zr,e),new Ct(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fr:Math.pow(fr,e),new Ct(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fe(_u(e>=240?e-240:e+120,i,r),_u(e,i,r),_u(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ct(hh(this.h),Ja(this.s),Ja(this.l),qo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qo(this.opacity);return`${e===1?"hsl(":"hsla("}${hh(this.h)}, ${Ja(this.s)*100}%, ${Ja(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hh(e){return e=(e||0)%360,e<0?e+360:e}function Ja(e){return Math.max(0,Math.min(1,e||0))}function _u(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const o1=Math.PI/180,s1=180/Math.PI,Ho=18,u1=.96422,l1=1,c1=.82521,f1=4/29,Lr=6/29,h1=3*Lr*Lr,S4=Lr*Lr*Lr;function d1(e){if(e instanceof en)return new en(e.l,e.a,e.b,e.opacity);if(e instanceof yn)return m1(e);e instanceof Fe||(e=Ac(e));var t=xu(e.r),n=xu(e.g),r=xu(e.b),i=wu((.2225045*t+.7168786*n+.0606169*r)/l1),a,o;return t===n&&n===r?a=o=i:(a=wu((.4360747*t+.3850649*n+.1430804*r)/u1),o=wu((.0139322*t+.0971045*n+.7141733*r)/c1)),new en(116*i-16,500*(a-i),200*(i-o),e.opacity)}function _l(e,t,n,r){return arguments.length===1?d1(e):new en(e,t,n,r??1)}function en(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}ui(en,_l,Pa(Vn,{brighter(e){return new en(this.l+Ho*(e??1),this.a,this.b,this.opacity)},darker(e){return new en(this.l-Ho*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=u1*vu(t),e=l1*vu(e),n=c1*vu(n),new Fe(Mu(3.1338561*t-1.6168667*e-.4906146*n),Mu(-.9787684*t+1.9161415*e+.033454*n),Mu(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function wu(e){return e>S4?Math.pow(e,1/3):e/h1+f1}function vu(e){return e>Lr?e*e*e:h1*(e-f1)}function Mu(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function xu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function A4(e){if(e instanceof yn)return new yn(e.h,e.c,e.l,e.opacity);if(e instanceof en||(e=d1(e)),e.a===0&&e.b===0)return new yn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*s1;return new yn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function wl(e,t,n,r){return arguments.length===1?A4(e):new yn(e,t,n,r??1)}function yn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function m1(e){if(isNaN(e.h))return new en(e.l,0,0,e.opacity);var t=e.h*o1;return new en(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ui(yn,wl,Pa(Vn,{brighter(e){return new yn(this.h,this.c,this.l+Ho*(e??1),this.opacity)},darker(e){return new yn(this.h,this.c,this.l-Ho*(e??1),this.opacity)},rgb(){return m1(this).rgb()}}));var p1=-.14861,Pc=1.78277,Nc=-.29227,Is=-.90649,na=1.97294,dh=na*Is,mh=na*Pc,ph=Pc*Nc-Is*p1;function P4(e){if(e instanceof ir)return new ir(e.h,e.s,e.l,e.opacity);e instanceof Fe||(e=Ac(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ph*r+dh*t-mh*n)/(ph+dh-mh),a=r-i,o=(na*(n-i)-Nc*a)/Is,s=Math.sqrt(o*o+a*a)/(na*i*(1-i)),u=s?Math.atan2(o,a)*s1-120:NaN;return new ir(u<0?u+360:u,s,i,e.opacity)}function on(e,t,n,r){return arguments.length===1?P4(e):new ir(e,t,n,r??1)}function ir(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ui(ir,on,Pa(Vn,{brighter(e){return e=e==null?Zr:Math.pow(Zr,e),new ir(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fr:Math.pow(fr,e),new ir(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*o1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Fe(255*(t+n*(p1*r+Pc*i)),255*(t+n*(Nc*r+Is*i)),255*(t+n*(na*r)),this.opacity)}}));function N4(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function C4(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return N4((n-r/t)*t,o,i,a,s)}}const Ds=e=>()=>e;function b1(e,t){return function(n){return e+n*t}}function T4(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Cc(e,t){var n=t-e;return n?b1(e,n>180||n<-180?n-360*Math.round(n/360):n):Ds(isNaN(e)?t:e)}function $4(e){return(e=+e)==1?je:function(t,n){return n-t?T4(t,n,e):Ds(isNaN(t)?n:t)}}function je(e,t){var n=t-e;return n?b1(e,n):Ds(isNaN(e)?t:e)}const dr=function e(t){var n=$4(t);function r(i,a){var o=n((i=Gn(i)).r,(a=Gn(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),c=je(i.opacity,a.opacity);return function(l){return i.r=o(l),i.g=s(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function k4(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=Gn(t[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=e(r),i=e(i),a=e(a),s.opacity=1,function(u){return s.r=r(u),s.g=i(u),s.b=a(u),s+""}}}var I4=k4(C4);function D4(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function R4(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function O4(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Na(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function B4(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ve(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function L4(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Na(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var vl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Eu=new RegExp(vl.source,"g");function F4(e){return function(){return e}}function G4(e){return function(t){return e(t)+""}}function g1(e,t){var n=vl.lastIndex=Eu.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(r=vl.exec(e))&&(i=Eu.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:Ve(r,i)})),n=Eu.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?G4(u[0].x):F4(t):(t=u.length,function(c){for(var l=0,h;l<t;++l)s[(h=u[l]).i]=h.x(c);return s.join("")})}function Na(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ds(t):(n==="number"?Ve:n==="string"?(r=hr(t))?(t=r,dr):g1:t instanceof hr?dr:t instanceof Date?B4:R4(t)?D4:Array.isArray(t)?O4:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?L4:Ve)(e,t)}function Tc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var bh=180/Math.PI,Ml={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function y1(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*bh,skewX:Math.atan(u)*bh,scaleX:o,scaleY:s}}var Qa;function U4(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ml:y1(t.a,t.b,t.c,t.d,t.e,t.f)}function q4(e){return e==null||(Qa||(Qa=document.createElementNS("http://www.w3.org/2000/svg","g")),Qa.setAttribute("transform",e),!(e=Qa.transform.baseVal.consolidate()))?Ml:(e=e.matrix,y1(e.a,e.b,e.c,e.d,e.e,e.f))}function _1(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,l,h,f,d,m){if(c!==h||l!==f){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Ve(c,h)},{i:p-2,x:Ve(l,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function o(c,l,h,f){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Ve(c,l)})):l&&h.push(i(h)+"rotate("+l+r)}function s(c,l,h,f){c!==l?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Ve(c,l)}):l&&h.push(i(h)+"skewX("+l+r)}function u(c,l,h,f,d,m){if(c!==h||l!==f){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Ve(c,h)},{i:p-2,x:Ve(l,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(c,l){var h=[],f=[];return c=e(c),l=e(l),a(c.translateX,c.translateY,l.translateX,l.translateY,h,f),o(c.rotate,l.rotate,h,f),s(c.skewX,l.skewX,h,f),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,h,f),c=l=null,function(d){for(var m=-1,p=f.length,y;++m<p;)h[(y=f[m]).i]=y.x(d);return h.join("")}}}var H4=_1(U4,"px, ","px)","deg)"),z4=_1(q4,", ",")",")");function V4(e){return function(t,n){var r=e((t=yl(t)).h,(n=yl(n)).h),i=je(t.s,n.s),a=je(t.l,n.l),o=je(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const j4=V4(Cc);function Y4(e,t){var n=je((e=_l(e)).l,(t=_l(t)).l),r=je(e.a,t.a),i=je(e.b,t.b),a=je(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function W4(e){return function(t,n){var r=e((t=wl(t)).h,(n=wl(n)).h),i=je(t.c,n.c),a=je(t.l,n.l),o=je(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const X4=W4(Cc);function w1(e){return function t(n){n=+n;function r(i,a){var o=e((i=on(i)).h,(a=on(a)).h),s=je(i.s,a.s),u=je(i.l,a.l),c=je(i.opacity,a.opacity);return function(l){return i.h=o(l),i.s=s(l),i.l=u(Math.pow(l,n)),i.opacity=c(l),i+""}}return r.gamma=t,r}(1)}w1(Cc);var $c=w1(je);function Rs(e,t){t===void 0&&(t=e,e=Na);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function Rt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var Jr=0,Ci=0,wi=0,v1=1e3,zo,Ti,Vo=0,mr=0,Os=0,ra=typeof performance=="object"&&performance.now?performance:Date,M1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kc(){return mr||(M1(K4),mr=ra.now()+Os)}function K4(){mr=0}function jo(){this._call=this._time=this._next=null}jo.prototype=x1.prototype={constructor:jo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?kc():+n)+(t==null?0:+t),!this._next&&Ti!==this&&(Ti?Ti._next=this:zo=this,Ti=this),this._call=e,this._time=n,xl()},stop:function(){this._call&&(this._call=null,this._time=1/0,xl())}};function x1(e,t,n){var r=new jo;return r.restart(e,t,n),r}function Z4(){kc(),++Jr;for(var e=zo,t;e;)(t=mr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Jr}function gh(){mr=(Vo=ra.now())+Os,Jr=Ci=0;try{Z4()}finally{Jr=0,Q4(),mr=0}}function J4(){var e=ra.now(),t=e-Vo;t>v1&&(Os-=t,Vo=e)}function Q4(){for(var e,t=zo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:zo=n);Ti=e,xl(r)}function xl(e){if(!Jr){Ci&&(Ci=clearTimeout(Ci));var t=e-mr;t>24?(e<1/0&&(Ci=setTimeout(gh,e-ra.now()-Os)),wi&&(wi=clearInterval(wi))):(wi||(Vo=ra.now(),wi=setInterval(J4,v1)),Jr=1,M1(gh))}}function yh(e,t,n){var r=new jo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var eM=Y0("start","end","cancel","interrupt"),tM=[],E1=0,_h=1,El=2,xo=3,wh=4,Sl=5,Eo=6;function Bs(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;nM(e,n,{name:t,index:r,group:i,on:eM,tween:tM,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:E1})}function Ic(e,t){var n=Ht(e,t);if(n.state>E1)throw new Error("too late; already scheduled");return n}function ln(e,t){var n=Ht(e,t);if(n.state>xo)throw new Error("too late; already running");return n}function Ht(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nM(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=x1(a,0,n.time);function a(c){n.state=_h,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var l,h,f,d;if(n.state!==_h)return u();for(l in r)if(d=r[l],d.name===n.name){if(d.state===xo)return yh(o);d.state===wh?(d.state=Eo,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[l]):+l<t&&(d.state=Eo,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[l])}if(yh(function(){n.state===xo&&(n.state=wh,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=El,n.on.call("start",e,e.__data__,n.index,n.group),n.state===El){for(n.state=xo,i=new Array(f=n.tween.length),l=0,h=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function s(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Sl,1),h=-1,f=i.length;++h<f;)i[h].call(e,l);n.state===Sl&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Eo,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function rM(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>El&&r.state<Sl,r.state=Eo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function iM(e){return this.each(function(){rM(this,e)})}function aM(e,t){var n,r;return function(){var i=ln(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function oM(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=ln(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=s;break}u===c&&i.push(s)}a.tween=i}}function sM(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ht(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?aM:oM)(n,e,t))}function Dc(e,t,n){var r=e._id;return e.each(function(){var i=ln(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ht(i,r).value[t]}}function S1(e,t){var n;return(typeof t=="number"?Ve:t instanceof hr?dr:(n=hr(t))?(t=n,dr):g1)(e,t)}function uM(e){return function(){this.removeAttribute(e)}}function lM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cM(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function fM(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function hM(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function dM(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function mM(e,t){var n=$s(e),r=n==="transform"?z4:S1;return this.attrTween(e,typeof t=="function"?(n.local?dM:hM)(n,r,Dc(this,"attr."+e,t)):t==null?(n.local?lM:uM)(n):(n.local?fM:cM)(n,r,t))}function pM(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function bM(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gM(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&bM(e,a)),n}return i._value=t,i}function yM(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&pM(e,a)),n}return i._value=t,i}function _M(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$s(e);return this.tween(n,(r.local?gM:yM)(r,t))}function wM(e,t){return function(){Ic(this,e).delay=+t.apply(this,arguments)}}function vM(e,t){return t=+t,function(){Ic(this,e).delay=t}}function MM(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wM:vM)(t,e)):Ht(this.node(),t).delay}function xM(e,t){return function(){ln(this,e).duration=+t.apply(this,arguments)}}function EM(e,t){return t=+t,function(){ln(this,e).duration=t}}function SM(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xM:EM)(t,e)):Ht(this.node(),t).duration}function AM(e,t){if(typeof t!="function")throw new Error;return function(){ln(this,e).ease=t}}function PM(e){var t=this._id;return arguments.length?this.each(AM(t,e)):Ht(this.node(),t).ease}function NM(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ln(this,e).ease=n}}function CM(e){if(typeof e!="function")throw new Error;return this.each(NM(this._id,e))}function TM(e){typeof e!="function"&&(e=X0(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new En(r,this._parents,this._name,this._id)}function $M(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],c=n[s],l=u.length,h=o[s]=new Array(l),f,d=0;d<l;++d)(f=u[d]||c[d])&&(h[d]=f);for(;s<r;++s)o[s]=t[s];return new En(o,this._parents,this._name,this._id)}function kM(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function IM(e,t,n){var r,i,a=kM(t)?Ic:ln;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function DM(e,t){var n=this._id;return arguments.length<2?Ht(this.node(),n).on.on(e):this.each(IM(n,e,t))}function RM(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function OM(){return this.on("end.remove",RM(this._id))}function BM(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ec(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,c=a[o]=new Array(u),l,h,f=0;f<u;++f)(l=s[f])&&(h=e.call(l,l.__data__,f,s))&&("__data__"in l&&(h.__data__=l.__data__),c[f]=h,Bs(c[f],t,n,f,c,Ht(l,n)));return new En(a,this._parents,t,n)}function LM(e){var t=this._name,n=this._id;typeof e!="function"&&(e=W0(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],c=u.length,l,h=0;h<c;++h)if(l=u[h]){for(var f=e.call(l,l.__data__,h,u),d,m=Ht(l,n),p=0,y=f.length;p<y;++p)(d=f[p])&&Bs(d,t,n,p,f,m);a.push(f),o.push(l)}return new En(a,o,t,n)}var FM=Aa.prototype.constructor;function GM(){return new FM(this._groups,this._parents)}function UM(e,t){var n,r,i;return function(){var a=Kr(this,e),o=(this.style.removeProperty(e),Kr(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function A1(e){return function(){this.style.removeProperty(e)}}function qM(e,t,n){var r,i=n+"",a;return function(){var o=Kr(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function HM(e,t,n){var r,i,a;return function(){var o=Kr(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Kr(this,e))),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}function zM(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var u=ln(this,e),c=u.on,l=u.value[a]==null?s||(s=A1(t)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(o,i=l),u.on=r}}function VM(e,t,n){var r=(e+="")=="transform"?H4:S1;return t==null?this.styleTween(e,UM(e,r)).on("end.style."+e,A1(e)):typeof t=="function"?this.styleTween(e,HM(e,r,Dc(this,"style."+e,t))).each(zM(this._id,e)):this.styleTween(e,qM(e,r,t),n).on("end.style."+e,null)}function jM(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function YM(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&jM(e,o,n)),r}return a._value=t,a}function WM(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,YM(e,t,n??""))}function XM(e){return function(){this.textContent=e}}function KM(e){return function(){var t=e(this);this.textContent=t??""}}function ZM(e){return this.tween("text",typeof e=="function"?KM(Dc(this,"text",e)):XM(e==null?"":e+""))}function JM(e){return function(t){this.textContent=e.call(this,t)}}function QM(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&JM(i)),t}return r._value=e,r}function e9(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,QM(e))}function t9(){for(var e=this._name,t=this._id,n=P1(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,c=0;c<s;++c)if(u=o[c]){var l=Ht(u,t);Bs(u,e,n,c,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new En(r,this._parents,e,n)}function n9(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var c=ln(this,r),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),i===0&&a()})}var r9=0;function En(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function P1(){return++r9}var fn=Aa.prototype;En.prototype={constructor:En,select:BM,selectAll:LM,selectChild:fn.selectChild,selectChildren:fn.selectChildren,filter:TM,merge:$M,selection:GM,transition:t9,call:fn.call,nodes:fn.nodes,node:fn.node,size:fn.size,empty:fn.empty,each:fn.each,on:DM,attr:mM,attrTween:_M,style:VM,styleTween:WM,text:ZM,textTween:e9,remove:OM,tween:sM,delay:MM,duration:SM,ease:PM,easeVarying:CM,end:n9,[Symbol.iterator]:fn[Symbol.iterator]};function i9(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var a9={time:null,delay:0,duration:250,ease:i9};function o9(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function s9(e){var t,n;e instanceof En?(t=e._id,e=e._name):(t=P1(),(n=a9).time=kc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&Bs(u,e,t,c,o,n||o9(u,t));return new En(r,this._parents,e,t)}Aa.prototype.interrupt=iM;Aa.prototype.transition=s9;const Al=Math.PI,Pl=2*Al,Jn=1e-6,u9=Pl-Jn;function N1(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function l9(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return N1;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class c9{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?N1:l9(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,u=r-t,c=i-n,l=o-t,h=s-n,f=l*l+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Jn)if(!(Math.abs(h*u-c*l)>Jn)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-s,p=u*u+c*c,y=d*d+m*m,_=Math.sqrt(p),g=Math.sqrt(f),M=a*Math.tan((Al-Math.acos((p+f-y)/(2*_*g)))/2),b=M/g,x=M/_;Math.abs(b-1)>Jn&&this._append`L${t+b*l},${n+b*h}`,this._append`A${a},${a},0,0,${+(h*d>l*m)},${this._x1=t+x*u},${this._y1=n+x*c}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),c=t+s,l=n+u,h=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${c},${l}`:(Math.abs(this._x1-c)>Jn||Math.abs(this._y1-l)>Jn)&&this._append`L${c},${l}`,r&&(f<0&&(f=f%Pl+Pl),f>u9?this._append`A${r},${r},0,1,${h},${t-s},${n-u}A${r},${r},0,1,${h},${this._x1=c},${this._y1=l}`:f>Jn&&this._append`A${r},${r},0,${+(f>=Al)},${h},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Yo(e=3){return new c9(+e)}function f9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Wo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Qr(e){return e=Wo(Math.abs(e)),e?e[1]:NaN}function h9(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function d9(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var m9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ia(e){if(!(t=m9.exec(e)))throw new Error("invalid format: "+e);var t;return new Rc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ia.prototype=Rc.prototype;function Rc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Rc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function p9(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var C1;function b9(e,t){var n=Wo(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(C1=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Wo(e,Math.max(0,t+a-1))[0]}function vh(e,t){var n=Wo(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Mh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:f9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vh(e*100,t),r:vh,s:b9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xh(e){return e}var Eh=Array.prototype.map,Sh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function g9(e){var t=e.grouping===void 0||e.thousands===void 0?xh:h9(Eh.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?xh:d9(Eh.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(h){h=ia(h);var f=h.fill,d=h.align,m=h.sign,p=h.symbol,y=h.zero,_=h.width,g=h.comma,M=h.precision,b=h.trim,x=h.type;x==="n"?(g=!0,x="g"):Mh[x]||(M===void 0&&(M=12),b=!0,x="g"),(y||f==="0"&&d==="=")&&(y=!0,f="0",d="=");var w=p==="$"?n:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=p==="$"?r:/[%p]/.test(x)?o:"",E=Mh[x],N=/[defgprs%]/.test(x);M=M===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function F(P){var L=w,j=S,z,A,$;if(x==="c")j=E(P)+j,P="";else{P=+P;var U=P<0||1/P<0;if(P=isNaN(P)?u:E(Math.abs(P),M),b&&(P=p9(P)),U&&+P==0&&m!=="+"&&(U=!1),L=(U?m==="("?m:s:m==="-"||m==="("?"":m)+L,j=(x==="s"?Sh[8+C1/3]:"")+j+(U&&m==="("?")":""),N){for(z=-1,A=P.length;++z<A;)if($=P.charCodeAt(z),48>$||$>57){j=($===46?i+P.slice(z+1):P.slice(z))+j,P=P.slice(0,z);break}}}g&&!y&&(P=t(P,1/0));var W=L.length+P.length+j.length,G=W<_?new Array(_-W+1).join(f):"";switch(g&&y&&(P=t(G+P,G.length?_-j.length:1/0),G=""),d){case"<":P=L+P+j+G;break;case"=":P=L+G+P+j;break;case"^":P=G.slice(0,W=G.length>>1)+L+P+j+G.slice(W);break;default:P=G+L+P+j;break}return a(P)}return F.toString=function(){return h+""},F}function l(h,f){var d=c((h=ia(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(Qr(f)/3)))*3,p=Math.pow(10,-m),y=Sh[8+m/3];return function(_){return d(p*_)+y}}return{format:c,formatPrefix:l}}var eo,li,T1;y9({thousands:",",grouping:[3],currency:["$",""]});function y9(e){return eo=g9(e),li=eo.format,T1=eo.formatPrefix,eo}function _9(e){return Math.max(0,-Qr(Math.abs(e)))}function w9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qr(t)/3)))*3-Qr(Math.abs(e)))}function v9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qr(t)-Qr(e))+1}var pe=1e-6,$1=1e-12,ge=Math.PI,Ce=ge/2,Ah=ge/4,ft=ge*2,Xe=180/ge,Ne=ge/180,Ee=Math.abs,ci=Math.atan,Sn=Math.atan2,be=Math.cos,k1=Math.exp,Xo=Math.log,Su=Math.pow,de=Math.sin,gt=Math.sign||function(e){return e>0?1:e<0?-1:0},nt=Math.sqrt,Oc=Math.tan;function I1(e){return e>1?0:e<-1?ge:Math.acos(e)}function xt(e){return e>1?Ce:e<-1?-Ce:Math.asin(e)}function yt(){}function Ko(e,t){e&&Nh.hasOwnProperty(e.type)&&Nh[e.type](e,t)}var Ph={Feature:function(e,t){Ko(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Ko(n[r].geometry,t)}},Nh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Nl(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Nl(n[r],t,0)},Polygon:function(e,t){Ch(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ch(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Ko(n[r],t)}};function Nl(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Ch(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Nl(e[n],t,1);t.polygonEnd()}function Qn(e,t){e&&Ph.hasOwnProperty(e.type)?Ph[e.type](e,t):Ko(e,t)}function Cl(e){return[Sn(e[1],e[0]),xt(e[2])]}function ei(e){var t=e[0],n=e[1],r=be(n);return[r*be(t),r*de(t),de(n)]}function to(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Zo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Au(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function no(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Tl(e){var t=nt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function $l(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function kl(e,t){return Ee(e)>ge&&(e-=Math.round(e/ft)*ft),[e,t]}kl.invert=kl;function D1(e,t,n){return(e%=ft)?t||n?$l($h(e),kh(t,n)):$h(e):t||n?kh(t,n):kl}function Th(e){return function(t,n){return t+=e,Ee(t)>ge&&(t-=Math.round(t/ft)*ft),[t,n]}}function $h(e){var t=Th(e);return t.invert=Th(-e),t}function kh(e,t){var n=be(e),r=de(e),i=be(t),a=de(t);function o(s,u){var c=be(u),l=be(s)*c,h=de(s)*c,f=de(u),d=f*n+l*r;return[Sn(h*i-d*a,l*n-f*r),xt(d*i+h*a)]}return o.invert=function(s,u){var c=be(u),l=be(s)*c,h=de(s)*c,f=de(u),d=f*i-h*a;return[Sn(h*i+f*a,l*n+d*r),xt(d*n-l*r)]},o}function M9(e){e=D1(e[0]*Ne,e[1]*Ne,e.length>2?e[2]*Ne:0);function t(n){return n=e(n[0]*Ne,n[1]*Ne),n[0]*=Xe,n[1]*=Xe,n}return t.invert=function(n){return n=e.invert(n[0]*Ne,n[1]*Ne),n[0]*=Xe,n[1]*=Xe,n},t}function x9(e,t,n,r,i,a){if(n){var o=be(t),s=de(t),u=r*n;i==null?(i=t+r*ft,a=t-u/2):(i=Ih(o,i),a=Ih(o,a),(r>0?i<a:i>a)&&(i+=r*ft));for(var c,l=i;r>0?l>a:l<a;l-=u)c=Cl([o,-s*be(l),-s*de(l)]),e.point(c[0],c[1])}}function Ih(e,t){t=ei(t),t[0]-=e,Tl(t);var n=I1(-t[1]);return((-t[2]<0?-n:n)+ft-pe)%ft}function R1(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:yt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function So(e,t){return Ee(e[0]-t[0])<pe&&Ee(e[1]-t[1])<pe}function ro(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function O1(e,t,n,r,i){var a=[],o=[],s,u;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,y=m[0],_=m[p],g;if(So(y,_)){if(!y[2]&&!_[2]){for(i.lineStart(),s=0;s<p;++s)i.point((y=m[s])[0],y[1]);i.lineEnd();return}_[0]+=2*pe}a.push(g=new ro(y,m,null,!0)),o.push(g.o=new ro(y,null,g,!1)),a.push(g=new ro(_,m,null,!1)),o.push(g.o=new ro(_,null,g,!0))}}),!!a.length){for(o.sort(t),Dh(a),Dh(o),s=0,u=o.length;s<u;++s)o[s].e=n=!n;for(var c=a[0],l,h;;){for(var f=c,d=!0;f.v;)if((f=f.n)===c)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(s=0,u=l.length;s<u;++s)i.point((h=l[s])[0],h[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(l=f.p.z,s=l.length-1;s>=0;--s)i.point((h=l[s])[0],h[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,l=f.z,d=!d}while(!f.v);i.lineEnd()}}}function Dh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Pu(e){return Ee(e[0])<=ge?e[0]:gt(e[0])*((Ee(e[0])+ge)%ft-ge)}function E9(e,t){var n=Pu(t),r=t[1],i=de(r),a=[de(n),-be(n),0],o=0,s=0,u=new lr;i===1?r=Ce+pe:i===-1&&(r=-Ce-pe);for(var c=0,l=e.length;c<l;++c)if(f=(h=e[c]).length)for(var h,f,d=h[f-1],m=Pu(d),p=d[1]/2+Ah,y=de(p),_=be(p),g=0;g<f;++g,m=b,y=w,_=S,d=M){var M=h[g],b=Pu(M),x=M[1]/2+Ah,w=de(x),S=be(x),E=b-m,N=E>=0?1:-1,F=N*E,P=F>ge,L=y*w;if(u.add(Sn(L*N*de(F),_*S+L*be(F))),o+=P?E+N*ft:E,P^m>=n^b>=n){var j=Zo(ei(d),ei(M));Tl(j);var z=Zo(a,j);Tl(z);var A=(P^E>=0?-1:1)*xt(z[2]);(r>A||r===A&&(j[0]||j[1]))&&(s+=P^E>=0?1:-1)}}return(o<-pe||o<pe&&u<-$1)^s&1}function B1(e,t,n,r){return function(i){var a=t(i),o=R1(),s=t(o),u=!1,c,l,h,f={point:d,lineStart:p,lineEnd:y,polygonStart:function(){f.point=_,f.lineStart=g,f.lineEnd=M,l=[],c=[]},polygonEnd:function(){f.point=d,f.lineStart=p,f.lineEnd=y,l=j0(l);var b=E9(c,r);l.length?(u||(i.polygonStart(),u=!0),O1(l,A9,b,n,i)):b&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),l=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(b,x){e(b,x)&&i.point(b,x)}function m(b,x){a.point(b,x)}function p(){f.point=m,a.lineStart()}function y(){f.point=d,a.lineEnd()}function _(b,x){h.push([b,x]),s.point(b,x)}function g(){s.lineStart(),h=[]}function M(){_(h[0][0],h[0][1]),s.lineEnd();var b=s.clean(),x=o.result(),w,S=x.length,E,N,F;if(h.pop(),c.push(h),h=null,!!S){if(b&1){if(N=x[0],(E=N.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),w=0;w<E;++w)i.point((F=N[w])[0],F[1]);i.lineEnd()}return}S>1&&b&2&&x.push(x.pop().concat(x.shift())),l.push(x.filter(S9))}}return f}}function S9(e){return e.length>1}function A9(e,t){return((e=e.x)[0]<0?e[1]-Ce-pe:Ce-e[1])-((t=t.x)[0]<0?t[1]-Ce-pe:Ce-t[1])}const Rh=B1(function(){return!0},P9,C9,[-ge,-Ce]);function P9(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var s=a>0?ge:-ge,u=Ee(a-t);Ee(u-ge)<pe?(e.point(t,n=(n+o)/2>0?Ce:-Ce),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(a,n),i=0):r!==s&&u>=ge&&(Ee(t-r)<pe&&(t-=r*pe),Ee(a-s)<pe&&(a-=s*pe),n=N9(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=a,n=o),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function N9(e,t,n,r){var i,a,o=de(e-n);return Ee(o)>pe?ci((de(t)*(a=be(r))*de(n)-de(r)*(i=be(t))*de(e))/(i*a*o)):(t+r)/2}function C9(e,t,n,r){var i;if(e==null)i=n*Ce,r.point(-ge,i),r.point(0,i),r.point(ge,i),r.point(ge,0),r.point(ge,-i),r.point(0,-i),r.point(-ge,-i),r.point(-ge,0),r.point(-ge,i);else if(Ee(e[0]-t[0])>pe){var a=e[0]<t[0]?ge:-ge;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function T9(e){var t=be(e),n=2*Ne,r=t>0,i=Ee(t)>pe;function a(l,h,f,d){x9(d,e,n,f,l,h)}function o(l,h){return be(l)*be(h)>t}function s(l){var h,f,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(y,_){var g=[y,_],M,b=o(y,_),x=r?b?0:c(y,_):b?c(y+(y<0?ge:-ge),_):0;if(!h&&(m=d=b)&&l.lineStart(),b!==d&&(M=u(h,g),(!M||So(h,M)||So(g,M))&&(g[2]=1)),b!==d)p=0,b?(l.lineStart(),M=u(g,h),l.point(M[0],M[1])):(M=u(h,g),l.point(M[0],M[1],2),l.lineEnd()),h=M;else if(i&&h&&r^b){var w;!(x&f)&&(w=u(g,h,!0))&&(p=0,r?(l.lineStart(),l.point(w[0][0],w[0][1]),l.point(w[1][0],w[1][1]),l.lineEnd()):(l.point(w[1][0],w[1][1]),l.lineEnd(),l.lineStart(),l.point(w[0][0],w[0][1],3)))}b&&(!h||!So(h,g))&&l.point(g[0],g[1]),h=g,d=b,f=x},lineEnd:function(){d&&l.lineEnd(),h=null},clean:function(){return p|(m&&d)<<1}}}function u(l,h,f){var d=ei(l),m=ei(h),p=[1,0,0],y=Zo(d,m),_=to(y,y),g=y[0],M=_-g*g;if(!M)return!f&&l;var b=t*_/M,x=-t*g/M,w=Zo(p,y),S=no(p,b),E=no(y,x);Au(S,E);var N=w,F=to(S,N),P=to(N,N),L=F*F-P*(to(S,S)-1);if(!(L<0)){var j=nt(L),z=no(N,(-F-j)/P);if(Au(z,S),z=Cl(z),!f)return z;var A=l[0],$=h[0],U=l[1],W=h[1],G;$<A&&(G=A,A=$,$=G);var H=$-A,X=Ee(H-ge)<pe,Y=X||H<pe;if(!X&&W<U&&(G=U,U=W,W=G),Y?X?U+W>0^z[1]<(Ee(z[0]-A)<pe?U:W):U<=z[1]&&z[1]<=W:H>ge^(A<=z[0]&&z[0]<=$)){var I=no(N,(-F+j)/P);return Au(I,S),[z,Cl(I)]}}}function c(l,h){var f=r?e:ge-e,d=0;return l<-f?d|=1:l>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return B1(o,s,a,r?[0,-e]:[-ge,e-ge])}function $9(e,t,n,r,i,a){var o=e[0],s=e[1],u=t[0],c=t[1],l=0,h=1,f=u-o,d=c-s,m;if(m=n-o,!(!f&&m>0)){if(m/=f,f<0){if(m<l)return;m<h&&(h=m)}else if(f>0){if(m>h)return;m>l&&(l=m)}if(m=i-o,!(!f&&m<0)){if(m/=f,f<0){if(m>h)return;m>l&&(l=m)}else if(f>0){if(m<l)return;m<h&&(h=m)}if(m=r-s,!(!d&&m>0)){if(m/=d,d<0){if(m<l)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>l&&(l=m)}if(m=a-s,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>l&&(l=m)}else if(d>0){if(m<l)return;m<h&&(h=m)}return l>0&&(e[0]=o+l*f,e[1]=s+l*d),h<1&&(t[0]=o+h*f,t[1]=s+h*d),!0}}}}}var $i=1e9,io=-$i;function L1(e,t,n,r){function i(c,l){return e<=c&&c<=n&&t<=l&&l<=r}function a(c,l,h,f){var d=0,m=0;if(c==null||(d=o(c,h))!==(m=o(l,h))||u(c,l)<0^h>0)do f.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+h+4)%4)!==m);else f.point(l[0],l[1])}function o(c,l){return Ee(c[0]-e)<pe?l>0?0:3:Ee(c[0]-n)<pe?l>0?2:1:Ee(c[1]-t)<pe?l>0?1:0:l>0?3:2}function s(c,l){return u(c.x,l.x)}function u(c,l){var h=o(c,1),f=o(l,1);return h!==f?h-f:h===0?l[1]-c[1]:h===1?c[0]-l[0]:h===2?c[1]-l[1]:l[0]-c[0]}return function(c){var l=c,h=R1(),f,d,m,p,y,_,g,M,b,x,w,S={point:E,lineStart:L,lineEnd:j,polygonStart:F,polygonEnd:P};function E(A,$){i(A,$)&&l.point(A,$)}function N(){for(var A=0,$=0,U=d.length;$<U;++$)for(var W=d[$],G=1,H=W.length,X=W[0],Y,I,ee=X[0],te=X[1];G<H;++G)Y=ee,I=te,X=W[G],ee=X[0],te=X[1],I<=r?te>r&&(ee-Y)*(r-I)>(te-I)*(e-Y)&&++A:te<=r&&(ee-Y)*(r-I)<(te-I)*(e-Y)&&--A;return A}function F(){l=h,f=[],d=[],w=!0}function P(){var A=N(),$=w&&A,U=(f=j0(f)).length;($||U)&&(c.polygonStart(),$&&(c.lineStart(),a(null,null,1,c),c.lineEnd()),U&&O1(f,s,A,a,c),c.polygonEnd()),l=c,f=d=m=null}function L(){S.point=z,d&&d.push(m=[]),x=!0,b=!1,g=M=NaN}function j(){f&&(z(p,y),_&&b&&h.rejoin(),f.push(h.result())),S.point=E,b&&l.lineEnd()}function z(A,$){var U=i(A,$);if(d&&m.push([A,$]),x)p=A,y=$,_=U,x=!1,U&&(l.lineStart(),l.point(A,$));else if(U&&b)l.point(A,$);else{var W=[g=Math.max(io,Math.min($i,g)),M=Math.max(io,Math.min($i,M))],G=[A=Math.max(io,Math.min($i,A)),$=Math.max(io,Math.min($i,$))];$9(W,G,e,t,n,r)?(b||(l.lineStart(),l.point(W[0],W[1])),l.point(G[0],G[1]),U||l.lineEnd(),w=!1):U&&(l.lineStart(),l.point(A,$),w=!1)}g=A,M=$,b=U}return S}}const Il=e=>e;var Nu=new lr,Dl=new lr,F1,G1,Rl,Ol,gn={point:yt,lineStart:yt,lineEnd:yt,polygonStart:function(){gn.lineStart=k9,gn.lineEnd=D9},polygonEnd:function(){gn.lineStart=gn.lineEnd=gn.point=yt,Nu.add(Ee(Dl)),Dl=new lr},result:function(){var e=Nu/2;return Nu=new lr,e}};function k9(){gn.point=I9}function I9(e,t){gn.point=U1,F1=Rl=e,G1=Ol=t}function U1(e,t){Dl.add(Ol*e-Rl*t),Rl=e,Ol=t}function D9(){U1(F1,G1)}var ti=1/0,Jo=ti,aa=-ti,Qo=aa,es={point:R9,lineStart:yt,lineEnd:yt,polygonStart:yt,polygonEnd:yt,result:function(){var e=[[ti,Jo],[aa,Qo]];return aa=Qo=-(Jo=ti=1/0),e}};function R9(e,t){e<ti&&(ti=e),e>aa&&(aa=e),t<Jo&&(Jo=t),t>Qo&&(Qo=t)}var Bl=0,Ll=0,ki=0,ts=0,ns=0,$r=0,Fl=0,Gl=0,Ii=0,q1,H1,Xt,Kt,bt={point:pr,lineStart:Oh,lineEnd:Bh,polygonStart:function(){bt.lineStart=L9,bt.lineEnd=F9},polygonEnd:function(){bt.point=pr,bt.lineStart=Oh,bt.lineEnd=Bh},result:function(){var e=Ii?[Fl/Ii,Gl/Ii]:$r?[ts/$r,ns/$r]:ki?[Bl/ki,Ll/ki]:[NaN,NaN];return Bl=Ll=ki=ts=ns=$r=Fl=Gl=Ii=0,e}};function pr(e,t){Bl+=e,Ll+=t,++ki}function Oh(){bt.point=O9}function O9(e,t){bt.point=B9,pr(Xt=e,Kt=t)}function B9(e,t){var n=e-Xt,r=t-Kt,i=nt(n*n+r*r);ts+=i*(Xt+e)/2,ns+=i*(Kt+t)/2,$r+=i,pr(Xt=e,Kt=t)}function Bh(){bt.point=pr}function L9(){bt.point=G9}function F9(){z1(q1,H1)}function G9(e,t){bt.point=z1,pr(q1=Xt=e,H1=Kt=t)}function z1(e,t){var n=e-Xt,r=t-Kt,i=nt(n*n+r*r);ts+=i*(Xt+e)/2,ns+=i*(Kt+t)/2,$r+=i,i=Kt*e-Xt*t,Fl+=i*(Xt+e),Gl+=i*(Kt+t),Ii+=i*3,pr(Xt=e,Kt=t)}function V1(e){this._context=e}V1.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ft);break}}},result:yt};var Ul=new lr,Cu,j1,Y1,Di,Ri,oa={point:yt,lineStart:function(){oa.point=U9},lineEnd:function(){Cu&&W1(j1,Y1),oa.point=yt},polygonStart:function(){Cu=!0},polygonEnd:function(){Cu=null},result:function(){var e=+Ul;return Ul=new lr,e}};function U9(e,t){oa.point=W1,j1=Di=e,Y1=Ri=t}function W1(e,t){Di-=e,Ri-=t,Ul.add(nt(Di*Di+Ri*Ri)),Di=e,Ri=t}let Lh,rs,Fh,Gh;class Uh{constructor(t){this._append=t==null?X1:q9(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Fh||this._append!==rs){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Fh=r,rs=this._append,Gh=this._,this._=i}this._+=Gh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function X1(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function q9(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return X1;if(t!==Lh){const n=10**t;Lh=t,rs=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return rs}function Bc(e,t){let n=3,r=4.5,i,a;function o(s){return s&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),Qn(s,i(a))),a.result()}return o.area=function(s){return Qn(s,i(gn)),gn.result()},o.measure=function(s){return Qn(s,i(oa)),oa.result()},o.bounds=function(s){return Qn(s,i(es)),es.result()},o.centroid=function(s){return Qn(s,i(bt)),bt.result()},o.projection=function(s){return arguments.length?(i=s==null?(e=null,Il):(e=s).stream,o):e},o.context=function(s){return arguments.length?(a=s==null?(t=null,new Uh(n)):new V1(t=s),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(a.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return t===null&&(a=new Uh(n)),o},o.projection(e).digits(n).context(t)}function ql(e){return{stream:Ls(e)}}function Ls(e){return function(t){var n=new Hl;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Hl(){}Hl.prototype={constructor:Hl,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Lc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Qn(n,e.stream(es)),t(es.result()),r!=null&&e.clipExtent(r),e}function Fc(e,t,n){return Lc(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,u])},n)}function K1(e,t,n){return Fc(e,[[0,0],t],n)}function Z1(e,t,n){return Lc(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];e.scale(150*a).translate([o,s])},n)}function J1(e,t,n){return Lc(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,s])},n)}var qh=16,H9=be(30*Ne);function Hh(e,t){return+t?V9(e,t):z9(e)}function z9(e){return Ls({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function V9(e,t){function n(r,i,a,o,s,u,c,l,h,f,d,m,p,y){var _=c-r,g=l-i,M=_*_+g*g;if(M>4*t&&p--){var b=o+f,x=s+d,w=u+m,S=nt(b*b+x*x+w*w),E=xt(w/=S),N=Ee(Ee(w)-1)<pe||Ee(a-h)<pe?(a+h)/2:Sn(x,b),F=e(N,E),P=F[0],L=F[1],j=P-r,z=L-i,A=g*j-_*z;(A*A/M>t||Ee((_*j+g*z)/M-.5)>.3||o*f+s*d+u*m<H9)&&(n(r,i,a,o,s,u,P,L,N,b/=S,x/=S,w,p,y),y.point(P,L),n(P,L,N,b,x,w,c,l,h,f,d,m,p,y))}}return function(r){var i,a,o,s,u,c,l,h,f,d,m,p,y={point:_,lineStart:g,lineEnd:b,polygonStart:function(){r.polygonStart(),y.lineStart=x},polygonEnd:function(){r.polygonEnd(),y.lineStart=g}};function _(E,N){E=e(E,N),r.point(E[0],E[1])}function g(){h=NaN,y.point=M,r.lineStart()}function M(E,N){var F=ei([E,N]),P=e(E,N);n(h,f,l,d,m,p,h=P[0],f=P[1],l=E,d=F[0],m=F[1],p=F[2],qh,r),r.point(h,f)}function b(){y.point=_,r.lineEnd()}function x(){g(),y.point=w,y.lineEnd=S}function w(E,N){M(i=E,N),a=h,o=f,s=d,u=m,c=p,y.point=M}function S(){n(h,f,l,d,m,p,a,o,i,s,u,c,qh,r),y.lineEnd=b,b()}return y}}var j9=Ls({point:function(e,t){this.stream.point(e*Ne,t*Ne)}});function Y9(e){return Ls({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function W9(e,t,n,r,i){function a(o,s){return o*=r,s*=i,[t+e*o,n-e*s]}return a.invert=function(o,s){return[(o-t)/e*r,(n-s)/e*i]},a}function zh(e,t,n,r,i,a){if(!a)return W9(e,t,n,r,i);var o=be(a),s=de(a),u=o*e,c=s*e,l=o/e,h=s/e,f=(s*n-o*t)/e,d=(s*t+o*n)/e;function m(p,y){return p*=r,y*=i,[u*p-c*y+t,n-c*p-u*y]}return m.invert=function(p,y){return[r*(l*p-h*y+f),i*(d-h*p-l*y)]},m}function jn(e){return Q1(function(){return e})()}function Q1(e){var t,n=150,r=480,i=250,a=0,o=0,s=0,u=0,c=0,l,h=0,f=1,d=1,m=null,p=Rh,y=null,_,g,M,b=Il,x=.5,w,S,E,N,F;function P(A){return E(A[0]*Ne,A[1]*Ne)}function L(A){return A=E.invert(A[0],A[1]),A&&[A[0]*Xe,A[1]*Xe]}P.stream=function(A){return N&&F===A?N:N=j9(Y9(l)(p(w(b(F=A)))))},P.preclip=function(A){return arguments.length?(p=A,m=void 0,z()):p},P.postclip=function(A){return arguments.length?(b=A,y=_=g=M=null,z()):b},P.clipAngle=function(A){return arguments.length?(p=+A?T9(m=A*Ne):(m=null,Rh),z()):m*Xe},P.clipExtent=function(A){return arguments.length?(b=A==null?(y=_=g=M=null,Il):L1(y=+A[0][0],_=+A[0][1],g=+A[1][0],M=+A[1][1]),z()):y==null?null:[[y,_],[g,M]]},P.scale=function(A){return arguments.length?(n=+A,j()):n},P.translate=function(A){return arguments.length?(r=+A[0],i=+A[1],j()):[r,i]},P.center=function(A){return arguments.length?(a=A[0]%360*Ne,o=A[1]%360*Ne,j()):[a*Xe,o*Xe]},P.rotate=function(A){return arguments.length?(s=A[0]%360*Ne,u=A[1]%360*Ne,c=A.length>2?A[2]%360*Ne:0,j()):[s*Xe,u*Xe,c*Xe]},P.angle=function(A){return arguments.length?(h=A%360*Ne,j()):h*Xe},P.reflectX=function(A){return arguments.length?(f=A?-1:1,j()):f<0},P.reflectY=function(A){return arguments.length?(d=A?-1:1,j()):d<0},P.precision=function(A){return arguments.length?(w=Hh(S,x=A*A),z()):nt(x)},P.fitExtent=function(A,$){return Fc(P,A,$)},P.fitSize=function(A,$){return K1(P,A,$)},P.fitWidth=function(A,$){return Z1(P,A,$)},P.fitHeight=function(A,$){return J1(P,A,$)};function j(){var A=zh(n,0,0,f,d,h).apply(null,t(a,o)),$=zh(n,r-A[0],i-A[1],f,d,h);return l=D1(s,u,c),S=$l(t,$),E=$l(l,S),w=Hh(S,x),z()}function z(){return N=F=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&L,j()}}function Gc(e){var t=0,n=ge/3,r=Q1(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Ne,n=a[1]*Ne):[t*Xe,n*Xe]},i}function X9(e){var t=be(e);function n(r,i){return[r*t,de(i)/t]}return n.invert=function(r,i){return[r/t,xt(i*t)]},n}function K9(e,t){var n=de(e),r=(n+de(t))/2;if(Ee(r)<pe)return X9(e);var i=1+n*(2*r-n),a=nt(i)/r;function o(s,u){var c=nt(i-2*r*de(u))/r;return[c*de(s*=r),a-c*be(s)]}return o.invert=function(s,u){var c=a-u,l=Sn(s,Ee(c))*gt(c);return c*r<0&&(l-=ge*gt(s)*gt(c)),[l/r,xt((i-(s*s+c*c)*r*r)/(2*r))]},o}function is(){return Gc(K9).scale(155.424).center([0,33.6442])}function ep(){return is().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Z9(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function J9(){var e,t,n=ep(),r,i=is().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=is().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,u,c={point:function(f,d){u=[f,d]}};function l(f){var d=f[0],m=f[1];return u=null,r.point(d,m),u||(a.point(d,m),u)||(s.point(d,m),u)}l.invert=function(f){var d=n.scale(),m=n.translate(),p=(f[0]-m[0])/d,y=(f[1]-m[1])/d;return(y>=.12&&y<.234&&p>=-.425&&p<-.214?i:y>=.166&&y<.234&&p>=-.214&&p<-.115?o:n).invert(f)},l.stream=function(f){return e&&t===f?e:e=Z9([n.stream(t=f),i.stream(f),o.stream(f)])},l.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),h()):n.precision()},l.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),l.translate(n.translate())):n.scale()},l.translate=function(f){if(!arguments.length)return n.translate();var d=n.scale(),m=+f[0],p=+f[1];return r=n.translate(f).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(c),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+pe,p+.12*d+pe],[m-.214*d-pe,p+.234*d-pe]]).stream(c),s=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+pe,p+.166*d+pe],[m-.115*d-pe,p+.234*d-pe]]).stream(c),h()},l.fitExtent=function(f,d){return Fc(l,f,d)},l.fitSize=function(f,d){return K1(l,f,d)},l.fitWidth=function(f,d){return Z1(l,f,d)},l.fitHeight=function(f,d){return J1(l,f,d)};function h(){return e=t=null,l}return l.scale(1070)}function tp(e){return function(t,n){var r=be(t),i=be(n),a=e(r*i);return a===1/0?[2,0]:[a*i*de(t),a*de(n)]}}function Ca(e){return function(t,n){var r=nt(t*t+n*n),i=e(r),a=de(i),o=be(i);return[Sn(t*a,r*o),xt(r&&n*a/r)]}}var np=tp(function(e){return nt(2/(1+e))});np.invert=Ca(function(e){return 2*xt(e/2)});function Q9(){return jn(np).scale(124.75).clipAngle(180-.001)}var rp=tp(function(e){return(e=I1(e))&&e/de(e)});rp.invert=Ca(function(e){return e});function e8(){return jn(rp).scale(79.4188).clipAngle(180-.001)}function Fs(e,t){return[e,Xo(Oc((Ce+t)/2))]}Fs.invert=function(e,t){return[e,2*ci(k1(t))-Ce]};function t8(){return ip(Fs).scale(961/ft)}function ip(e){var t=jn(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,s,u,c;t.scale=function(h){return arguments.length?(r(h),l()):r()},t.translate=function(h){return arguments.length?(i(h),l()):i()},t.center=function(h){return arguments.length?(n(h),l()):n()},t.clipExtent=function(h){return arguments.length?(h==null?o=s=u=c=null:(o=+h[0][0],s=+h[0][1],u=+h[1][0],c=+h[1][1]),l()):o==null?null:[[o,s],[u,c]]};function l(){var h=ge*r(),f=t(M9(t.rotate()).invert([0,0]));return a(o==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:e===Fs?[[Math.max(f[0]-h,o),s],[Math.min(f[0]+h,u),c]]:[[o,Math.max(f[1]-h,s)],[u,Math.min(f[1]+h,c)]])}return l()}function ao(e){return Oc((Ce+e)/2)}function n8(e,t){var n=be(e),r=e===t?de(e):Xo(n/be(t))/Xo(ao(t)/ao(e)),i=n*Su(ao(e),r)/r;if(!r)return Fs;function a(o,s){i>0?s<-Ce+pe&&(s=-Ce+pe):s>Ce-pe&&(s=Ce-pe);var u=i/Su(ao(s),r);return[u*de(r*o),i-u*be(r*o)]}return a.invert=function(o,s){var u=i-s,c=gt(r)*nt(o*o+u*u),l=Sn(o,Ee(u))*gt(u);return u*r<0&&(l-=ge*gt(o)*gt(u)),[l/r,2*ci(Su(i/c,1/r))-Ce]},a}function r8(){return Gc(n8).scale(109.5).parallels([30,30])}function as(e,t){return[e,t]}as.invert=as;function i8(){return jn(as).scale(152.63)}function a8(e,t){var n=be(e),r=e===t?de(e):(n-be(t))/(t-e),i=n/r+e;if(Ee(r)<pe)return as;function a(o,s){var u=i-s,c=r*o;return[u*de(c),i-u*be(c)]}return a.invert=function(o,s){var u=i-s,c=Sn(o,Ee(u))*gt(u);return u*r<0&&(c-=ge*gt(o)*gt(u)),[c/r,i-gt(r)*nt(o*o+u*u)]},a}function o8(){return Gc(a8).scale(131.154).center([0,13.9389])}var qi=1.340264,Hi=-.081106,zi=893e-6,Vi=.003796,os=nt(3)/2,s8=12;function ap(e,t){var n=xt(os*de(t)),r=n*n,i=r*r*r;return[e*be(n)/(os*(qi+3*Hi*r+i*(7*zi+9*Vi*r))),n*(qi+Hi*r+i*(zi+Vi*r))]}ap.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,s,u;a<s8&&(s=n*(qi+Hi*r+i*(zi+Vi*r))-t,u=qi+3*Hi*r+i*(7*zi+9*Vi*r),n-=o=s/u,r=n*n,i=r*r*r,!(Ee(o)<$1));++a);return[os*e*(qi+3*Hi*r+i*(7*zi+9*Vi*r))/be(n),xt(de(n)/os)]};function u8(){return jn(ap).scale(177.158)}function op(e,t){var n=be(t),r=be(e)*n;return[n*de(e)/r,de(t)/r]}op.invert=Ca(ci);function l8(){return jn(op).scale(144.049).clipAngle(60)}function sp(e,t){return[be(t)*de(e),de(t)]}sp.invert=Ca(xt);function c8(){return jn(sp).scale(249.5).clipAngle(90+pe)}function up(e,t){var n=be(t),r=1+be(e)*n;return[n*de(e)/r,de(t)/r]}up.invert=Ca(function(e){return 2*ci(e)});function f8(){return jn(up).scale(250).clipAngle(142)}function lp(e,t){return[Xo(Oc((Ce+t)/2)),-e]}lp.invert=function(e,t){return[-t,2*ci(k1(e))-Ce]};function h8(){var e=ip(lp),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function cn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Gs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const zl=Symbol("implicit");function Uc(){var e=new cr,t=[],n=[],r=zl;function i(a){let o=e.get(a);if(o===void 0){if(r!==zl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new cr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Uc(t,n).unknown(r)},cn.apply(i,arguments),i}function Us(){var e=Uc().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,u=0,c=0,l=.5;delete e.unknown;function h(){var f=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,f-u+c*2),s&&(a=Math.floor(a)),m+=(p-m-a*(f-u))*l,o=a*(1-u),s&&(m=Math.round(m),o=Math.round(o));var y=lt(f).map(function(_){return m+a*_});return n(d?y.reverse():y)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,s=!0,h()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(f){return arguments.length?(s=!!f,h()):s},e.padding=function(f){return arguments.length?(u=Math.min(1,c=+f),h()):u},e.paddingInner=function(f){return arguments.length?(u=Math.min(1,f),h()):u},e.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),h()):l},e.copy=function(){return Us(t(),[r,i]).round(s).paddingInner(u).paddingOuter(c).align(l)},cn.apply(h(),arguments)}function cp(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return cp(t())},e}function d8(){return cp(Us.apply(null,arguments).paddingInner(1))}function m8(e){return function(){return e}}function Vl(e){return+e}var Vh=[0,1];function _t(e){return e}function jl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:m8(isNaN(t)?NaN:.5)}function p8(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function b8(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=jl(i,r),a=n(o,a)):(r=jl(r,i),a=n(a,o)),function(s){return a(r(s))}}function g8(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=jl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var u=Ns(e,s,1,r)-1;return a[u](i[u](s))}}function Ta(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function qs(){var e=Vh,t=Vh,n=Na,r,i,a,o=_t,s,u,c;function l(){var f=Math.min(e.length,t.length);return o!==_t&&(o=p8(e[0],e[f-1])),s=f>2?g8:b8,u=c=null,h}function h(f){return f==null||isNaN(f=+f)?a:(u||(u=s(e.map(r),t,n)))(r(o(f)))}return h.invert=function(f){return o(i((c||(c=s(t,e.map(r),Ve)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Vl),l()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),l()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=Tc,l()},h.clamp=function(f){return arguments.length?(o=f?!0:_t,l()):o!==_t},h.interpolate=function(f){return arguments.length?(n=f,l()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,d){return r=f,i=d,l()}}function fp(){return qs()(_t,_t)}function y8(e,t,n,r){var i=pl(e,t,n),a;switch(r=ia(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=w9(i,o))&&(r.precision=a),T1(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=v9(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=_9(i))&&(r.precision=a-(r.type==="%")*2);break}}return li(r)}function $a(e){var t=e.domain;return e.ticks=function(n){var r=t();return ea(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return y8(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],u,c,l=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);l-- >0;){if(c=Wr(o,s,n),c===u)return r[i]=o,r[a]=s,t(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;u=c}return e},e}function qc(){var e=fp();return e.copy=function(){return Ta(e,qc())},cn.apply(e,arguments),$a(e)}function hp(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Vl),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return hp(e).unknown(t)},e=arguments.length?Array.from(e,Vl):[0,1],$a(n)}function dp(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function jh(e){return Math.log(e)}function Yh(e){return Math.exp(e)}function _8(e){return-Math.log(-e)}function w8(e){return-Math.exp(-e)}function v8(e){return isFinite(e)?+("1e"+e):e<0?0:e}function M8(e){return e===10?v8:e===Math.E?Math.exp:t=>Math.pow(e,t)}function x8(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Wh(e){return(t,n)=>-e(-t,n)}function mp(e){const t=e(jh,Yh),n=t.domain;let r=10,i,a;function o(){return i=x8(r),a=M8(r),n()[0]<0?(i=Wh(i),a=Wh(a),e(_8,w8)):e(jh,Yh),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const u=n();let c=u[0],l=u[u.length-1];const h=l<c;h&&([c,l]=[l,c]);let f=i(c),d=i(l),m,p;const y=s==null?10:+s;let _=[];if(!(r%1)&&d-f<y){if(f=Math.floor(f),d=Math.ceil(d),c>0){for(;f<=d;++f)for(m=1;m<r;++m)if(p=f<0?m/a(-f):m*a(f),!(p<c)){if(p>l)break;_.push(p)}}else for(;f<=d;++f)for(m=r-1;m>=1;--m)if(p=f>0?m/a(-f):m*a(f),!(p<c)){if(p>l)break;_.push(p)}_.length*2<y&&(_=ea(c,l,y))}else _=ea(f,d,Math.min(d-f,y)).map(a);return h?_.reverse():_},t.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=ia(u)).precision==null&&(u.trim=!0),u=li(u)),s===1/0)return u;const c=Math.max(1,r*s/t.ticks().length);return l=>{let h=l/a(Math.round(i(l)));return h*r<r-.5&&(h*=r),h<=c?u(l):""}},t.nice=()=>n(dp(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),t}function pp(){const e=mp(qs()).domain([1,10]);return e.copy=()=>Ta(e,pp()).base(e.base()),cn.apply(e,arguments),e}function Xh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Kh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bp(e){var t=1,n=e(Xh(t),Kh(t));return n.constant=function(r){return arguments.length?e(Xh(t=+r),Kh(t)):t},$a(n)}function gp(){var e=bp(qs());return e.copy=function(){return Ta(e,gp()).constant(e.constant())},cn.apply(e,arguments)}function Zh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function E8(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function S8(e){return e<0?-e*e:e*e}function yp(e){var t=e(_t,_t),n=1;function r(){return n===1?e(_t,_t):n===.5?e(E8,S8):e(Zh(n),Zh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},$a(t)}function _p(){var e=yp(qs());return e.copy=function(){return Ta(e,_p()).exponent(e.exponent())},cn.apply(e,arguments),e}function wp(){var e=[],t=[],n=[],r;function i(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=_7(e,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Ns(n,o)]}return a.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(et),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return wp().domain(e).range(t).unknown(r)},cn.apply(a,arguments)}function vp(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Ns(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vp().domain(e).range(t).unknown(n)},cn.apply(i,arguments)}const Tu=new Date,$u=new Date;function De(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const u=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return u;let c;do u.push(c=new Date(+a)),t(a,s),e(a);while(c<a&&a<o);return u},i.filter=a=>De(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Tu.setTime(+a),$u.setTime(+o),e(Tu),e($u),Math.floor(n(Tu,$u))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const ss=De(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ss.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?De(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ss);ss.range;const _n=1e3,wt=_n*60,wn=wt*60,An=wn*24,Hc=An*7,Jh=An*30,ku=An*365,$t=De(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_n)},(e,t)=>(t-e)/_n,e=>e.getUTCSeconds());$t.range;const ka=De(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_n)},(e,t)=>{e.setTime(+e+t*wt)},(e,t)=>(t-e)/wt,e=>e.getMinutes());ka.range;const Ia=De(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wt)},(e,t)=>(t-e)/wt,e=>e.getUTCMinutes());Ia.range;const Da=De(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_n-e.getMinutes()*wt)},(e,t)=>{e.setTime(+e+t*wn)},(e,t)=>(t-e)/wn,e=>e.getHours());Da.range;const Ra=De(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*wn)},(e,t)=>(t-e)/wn,e=>e.getUTCHours());Ra.range;const _r=De(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wt)/An,e=>e.getDate()-1);_r.range;const Hs=De(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/An,e=>e.getUTCDate()-1);Hs.range;const zs=De(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/An,e=>Math.floor(e/An));zs.range;function wr(e){return De(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wt)/Hc)}const ni=wr(0),sa=wr(1),Mp=wr(2),xp=wr(3),br=wr(4),Ep=wr(5),Sp=wr(6);ni.range;sa.range;Mp.range;xp.range;br.range;Ep.range;Sp.range;function vr(e){return De(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Hc)}const ri=vr(0),ua=vr(1),Ap=vr(2),Pp=vr(3),gr=vr(4),Np=vr(5),Cp=vr(6);ri.range;ua.range;Ap.range;Pp.range;gr.range;Np.range;Cp.range;const Oa=De(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Oa.range;const Ba=De(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ba.range;const Ot=De(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ot.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:De(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ot.range;const Bt=De(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Bt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:De(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Bt.range;function Tp(e,t,n,r,i,a){const o=[[$t,1,_n],[$t,5,5*_n],[$t,15,15*_n],[$t,30,30*_n],[a,1,wt],[a,5,5*wt],[a,15,15*wt],[a,30,30*wt],[i,1,wn],[i,3,3*wn],[i,6,6*wn],[i,12,12*wn],[r,1,An],[r,2,2*An],[n,1,Hc],[t,1,Jh],[t,3,3*Jh],[e,1,ku]];function s(c,l,h){const f=l<c;f&&([c,l]=[l,c]);const d=h&&typeof h.range=="function"?h:u(c,l,h),m=d?d.range(c,+l+1):[];return f?m.reverse():m}function u(c,l,h){const f=Math.abs(l-c)/h,d=Ps(([,,y])=>y).right(o,f);if(d===o.length)return e.every(pl(c/ku,l/ku,h));if(d===0)return ss.every(Math.max(pl(c,l,h),1));const[m,p]=o[f/o[d-1][2]<o[d][2]/f?d-1:d];return m.every(p)}return[s,u]}const[A8,P8]=Tp(Bt,Ba,ri,zs,Ra,Ia),[N8,C8]=Tp(Ot,Oa,ni,_r,Da,ka);function Iu(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Du(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vi(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function T8(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,c=Mi(i),l=xi(i),h=Mi(a),f=xi(a),d=Mi(o),m=xi(o),p=Mi(s),y=xi(s),_=Mi(u),g=xi(u),M={a:U,A:W,b:G,B:H,c:null,d:id,e:id,f:Q8,g:lx,G:fx,H:K8,I:Z8,j:J8,L:$p,m:ex,M:tx,p:X,q:Y,Q:sd,s:ud,S:nx,u:rx,U:ix,V:ax,w:ox,W:sx,x:null,X:null,y:ux,Y:cx,Z:hx,"%":od},b={a:I,A:ee,b:te,B:re,c:null,d:ad,e:ad,f:bx,g:Ax,G:Nx,H:dx,I:mx,j:px,L:Ip,m:gx,M:yx,p:K,q:V,Q:sd,s:ud,S:_x,u:wx,U:vx,V:Mx,w:xx,W:Ex,x:null,X:null,y:Sx,Y:Px,Z:Cx,"%":od},x={a:F,A:P,b:L,B:j,c:z,d:nd,e:nd,f:j8,g:td,G:ed,H:rd,I:rd,j:q8,L:V8,m:U8,M:H8,p:N,q:G8,Q:W8,s:X8,S:z8,u:R8,U:O8,V:B8,w:D8,W:L8,x:A,X:$,y:td,Y:ed,Z:F8,"%":Y8};M.x=w(n,M),M.X=w(r,M),M.c=w(t,M),b.x=w(n,b),b.X=w(r,b),b.c=w(t,b);function w(k,O){return function(q){var D=[],se=-1,ae=0,ie=k.length,ue,oe,We;for(q instanceof Date||(q=new Date(+q));++se<ie;)k.charCodeAt(se)===37&&(D.push(k.slice(ae,se)),(oe=Qh[ue=k.charAt(++se)])!=null?ue=k.charAt(++se):oe=ue==="e"?" ":"0",(We=O[ue])&&(ue=We(q,oe)),D.push(ue),ae=se+1);return D.push(k.slice(ae,se)),D.join("")}}function S(k,O){return function(q){var D=vi(1900,void 0,1),se=E(D,k,q+="",0),ae,ie;if(se!=q.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(O&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(ae=Du(vi(D.y,0,1)),ie=ae.getUTCDay(),ae=ie>4||ie===0?ua.ceil(ae):ua(ae),ae=Hs.offset(ae,(D.V-1)*7),D.y=ae.getUTCFullYear(),D.m=ae.getUTCMonth(),D.d=ae.getUTCDate()+(D.w+6)%7):(ae=Iu(vi(D.y,0,1)),ie=ae.getDay(),ae=ie>4||ie===0?sa.ceil(ae):sa(ae),ae=_r.offset(ae,(D.V-1)*7),D.y=ae.getFullYear(),D.m=ae.getMonth(),D.d=ae.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),ie="Z"in D?Du(vi(D.y,0,1)).getUTCDay():Iu(vi(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(ie+5)%7:D.w+D.U*7-(ie+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,Du(D)):Iu(D)}}function E(k,O,q,D){for(var se=0,ae=O.length,ie=q.length,ue,oe;se<ae;){if(D>=ie)return-1;if(ue=O.charCodeAt(se++),ue===37){if(ue=O.charAt(se++),oe=x[ue in Qh?O.charAt(se++):ue],!oe||(D=oe(k,q,D))<0)return-1}else if(ue!=q.charCodeAt(D++))return-1}return D}function N(k,O,q){var D=c.exec(O.slice(q));return D?(k.p=l.get(D[0].toLowerCase()),q+D[0].length):-1}function F(k,O,q){var D=d.exec(O.slice(q));return D?(k.w=m.get(D[0].toLowerCase()),q+D[0].length):-1}function P(k,O,q){var D=h.exec(O.slice(q));return D?(k.w=f.get(D[0].toLowerCase()),q+D[0].length):-1}function L(k,O,q){var D=_.exec(O.slice(q));return D?(k.m=g.get(D[0].toLowerCase()),q+D[0].length):-1}function j(k,O,q){var D=p.exec(O.slice(q));return D?(k.m=y.get(D[0].toLowerCase()),q+D[0].length):-1}function z(k,O,q){return E(k,t,O,q)}function A(k,O,q){return E(k,n,O,q)}function $(k,O,q){return E(k,r,O,q)}function U(k){return o[k.getDay()]}function W(k){return a[k.getDay()]}function G(k){return u[k.getMonth()]}function H(k){return s[k.getMonth()]}function X(k){return i[+(k.getHours()>=12)]}function Y(k){return 1+~~(k.getMonth()/3)}function I(k){return o[k.getUTCDay()]}function ee(k){return a[k.getUTCDay()]}function te(k){return u[k.getUTCMonth()]}function re(k){return s[k.getUTCMonth()]}function K(k){return i[+(k.getUTCHours()>=12)]}function V(k){return 1+~~(k.getUTCMonth()/3)}return{format:function(k){var O=w(k+="",M);return O.toString=function(){return k},O},parse:function(k){var O=S(k+="",!1);return O.toString=function(){return k},O},utcFormat:function(k){var O=w(k+="",b);return O.toString=function(){return k},O},utcParse:function(k){var O=S(k+="",!0);return O.toString=function(){return k},O}}}var Qh={"-":"",_:" ",0:"0"},Ue=/^\s*\d+/,$8=/^%/,k8=/[\\^$*+?|[\]().{}]/g;function ve(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function I8(e){return e.replace(k8,"\\$&")}function Mi(e){return new RegExp("^(?:"+e.map(I8).join("|")+")","i")}function xi(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function D8(e,t,n){var r=Ue.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function R8(e,t,n){var r=Ue.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function O8(e,t,n){var r=Ue.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function B8(e,t,n){var r=Ue.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function L8(e,t,n){var r=Ue.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ed(e,t,n){var r=Ue.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function td(e,t,n){var r=Ue.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function F8(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function G8(e,t,n){var r=Ue.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function U8(e,t,n){var r=Ue.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function nd(e,t,n){var r=Ue.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function q8(e,t,n){var r=Ue.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function rd(e,t,n){var r=Ue.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function H8(e,t,n){var r=Ue.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function z8(e,t,n){var r=Ue.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function V8(e,t,n){var r=Ue.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function j8(e,t,n){var r=Ue.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Y8(e,t,n){var r=$8.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function W8(e,t,n){var r=Ue.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function X8(e,t,n){var r=Ue.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function id(e,t){return ve(e.getDate(),t,2)}function K8(e,t){return ve(e.getHours(),t,2)}function Z8(e,t){return ve(e.getHours()%12||12,t,2)}function J8(e,t){return ve(1+_r.count(Ot(e),e),t,3)}function $p(e,t){return ve(e.getMilliseconds(),t,3)}function Q8(e,t){return $p(e,t)+"000"}function ex(e,t){return ve(e.getMonth()+1,t,2)}function tx(e,t){return ve(e.getMinutes(),t,2)}function nx(e,t){return ve(e.getSeconds(),t,2)}function rx(e){var t=e.getDay();return t===0?7:t}function ix(e,t){return ve(ni.count(Ot(e)-1,e),t,2)}function kp(e){var t=e.getDay();return t>=4||t===0?br(e):br.ceil(e)}function ax(e,t){return e=kp(e),ve(br.count(Ot(e),e)+(Ot(e).getDay()===4),t,2)}function ox(e){return e.getDay()}function sx(e,t){return ve(sa.count(Ot(e)-1,e),t,2)}function ux(e,t){return ve(e.getFullYear()%100,t,2)}function lx(e,t){return e=kp(e),ve(e.getFullYear()%100,t,2)}function cx(e,t){return ve(e.getFullYear()%1e4,t,4)}function fx(e,t){var n=e.getDay();return e=n>=4||n===0?br(e):br.ceil(e),ve(e.getFullYear()%1e4,t,4)}function hx(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ve(t/60|0,"0",2)+ve(t%60,"0",2)}function ad(e,t){return ve(e.getUTCDate(),t,2)}function dx(e,t){return ve(e.getUTCHours(),t,2)}function mx(e,t){return ve(e.getUTCHours()%12||12,t,2)}function px(e,t){return ve(1+Hs.count(Bt(e),e),t,3)}function Ip(e,t){return ve(e.getUTCMilliseconds(),t,3)}function bx(e,t){return Ip(e,t)+"000"}function gx(e,t){return ve(e.getUTCMonth()+1,t,2)}function yx(e,t){return ve(e.getUTCMinutes(),t,2)}function _x(e,t){return ve(e.getUTCSeconds(),t,2)}function wx(e){var t=e.getUTCDay();return t===0?7:t}function vx(e,t){return ve(ri.count(Bt(e)-1,e),t,2)}function Dp(e){var t=e.getUTCDay();return t>=4||t===0?gr(e):gr.ceil(e)}function Mx(e,t){return e=Dp(e),ve(gr.count(Bt(e),e)+(Bt(e).getUTCDay()===4),t,2)}function xx(e){return e.getUTCDay()}function Ex(e,t){return ve(ua.count(Bt(e)-1,e),t,2)}function Sx(e,t){return ve(e.getUTCFullYear()%100,t,2)}function Ax(e,t){return e=Dp(e),ve(e.getUTCFullYear()%100,t,2)}function Px(e,t){return ve(e.getUTCFullYear()%1e4,t,4)}function Nx(e,t){var n=e.getUTCDay();return e=n>=4||n===0?gr(e):gr.ceil(e),ve(e.getUTCFullYear()%1e4,t,4)}function Cx(){return"+0000"}function od(){return"%"}function sd(e){return+e}function ud(e){return Math.floor(+e/1e3)}var Sr,zc,La;Tx({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Tx(e){return Sr=T8(e),zc=Sr.format,Sr.parse,La=Sr.utcFormat,Sr.utcParse,Sr}function $x(e){return new Date(e)}function kx(e){return e instanceof Date?+e:+new Date(+e)}function Vc(e,t,n,r,i,a,o,s,u,c){var l=fp(),h=l.invert,f=l.domain,d=c(".%L"),m=c(":%S"),p=c("%I:%M"),y=c("%I %p"),_=c("%a %d"),g=c("%b %d"),M=c("%B"),b=c("%Y");function x(w){return(u(w)<w?d:s(w)<w?m:o(w)<w?p:a(w)<w?y:r(w)<w?i(w)<w?_:g:n(w)<w?M:b)(w)}return l.invert=function(w){return new Date(h(w))},l.domain=function(w){return arguments.length?f(Array.from(w,kx)):f().map($x)},l.ticks=function(w){var S=f();return e(S[0],S[S.length-1],w??10)},l.tickFormat=function(w,S){return S==null?x:c(S)},l.nice=function(w){var S=f();return(!w||typeof w.range!="function")&&(w=t(S[0],S[S.length-1],w??10)),w?f(dp(S,w)):l},l.copy=function(){return Ta(l,Vc(e,t,n,r,i,a,o,s,u,c))},l}function Ix(){return cn.apply(Vc(N8,C8,Ot,Oa,ni,_r,Da,ka,$t,zc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Dx(){return cn.apply(Vc(A8,P8,Bt,Ba,ri,Hs,Ra,Ia,$t,La).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function js(){var e=0,t=.5,n=1,r=1,i,a,o,s,u,c=_t,l,h=!1,f;function d(p){return isNaN(p=+p)?f:(p=.5+((p=+l(p))-a)*(r*p<r*a?s:u),c(h?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=l(e=+e),a=l(t=+t),o=l(n=+n),s=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(h=!!p,d):h},d.interpolator=function(p){return arguments.length?(c=p,d):c};function m(p){return function(y){var _,g,M;return arguments.length?([_,g,M]=y,c=Rs(p,[_,g,M]),d):[c(0),c(.5),c(1)]}}return d.range=m(Na),d.rangeRound=m(Tc),d.unknown=function(p){return arguments.length?(f=p,d):f},function(p){return l=p,i=p(e),a=p(t),o=p(n),s=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function Rp(){var e=$a(js()(_t));return e.copy=function(){return Vs(e,Rp())},Gs.apply(e,arguments)}function Op(){var e=mp(js()).domain([.1,1,10]);return e.copy=function(){return Vs(e,Op()).base(e.base())},Gs.apply(e,arguments)}function Bp(){var e=bp(js());return e.copy=function(){return Vs(e,Bp()).constant(e.constant())},Gs.apply(e,arguments)}function Lp(){var e=yp(js());return e.copy=function(){return Vs(e,Lp()).exponent(e.exponent())},Gs.apply(e,arguments)}function me(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Rx=me("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ox=me("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Bx=me("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Lx=me("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Fx=me("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Gx=me("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ux=me("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),qx=me("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Hx=me("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),zx=me("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Vx=me("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ae=e=>I4(e[e.length-1]);var Fp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(me);const Gp=Ae(Fp);var Up=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(me);const qp=Ae(Up);var Hp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(me);const zp=Ae(Hp);var Vp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(me);const jp=Ae(Vp);var Yl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(me);const us=Ae(Yl);var Yp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(me);const Wp=Ae(Yp);var Wl=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(me);const la=Ae(Wl);var Xp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(me);const Kp=Ae(Xp);var Zp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(me);const Jp=Ae(Zp);var Qp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(me);const eb=Ae(Qp);var tb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(me);const nb=Ae(tb);var rb=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(me);const ib=Ae(rb);var ab=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(me);const ob=Ae(ab);var sb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(me);const ub=Ae(sb);var lb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(me);const cb=Ae(lb);var fb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(me);const hb=Ae(fb);var db=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(me);const mb=Ae(db);var pb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(me);const bb=Ae(pb);var gb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(me);const yb=Ae(gb);var _b=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(me);const wb=Ae(_b);var vb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(me);const Mb=Ae(vb);var xb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(me);const Eb=Ae(xb);var Sb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(me);const Ab=Ae(Sb);var Pb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(me);const Nb=Ae(Pb);var Cb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(me);const Tb=Ae(Cb);var $b=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(me);const kb=Ae($b);var Ib=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(me);const Db=Ae(Ib);function Rb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const Ob=$c(on(300,.5,0),on(-240,.5,1));var Bb=$c(on(-100,.75,.35),on(80,1.5,.8)),Lb=$c(on(260,.75,.35),on(80,1.5,.8)),oo=on();function Fb(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return oo.h=360*e-100,oo.s=1.5-1.5*t,oo.l=.8-.9*t,oo+""}var so=Gn(),jx=Math.PI/3,Yx=Math.PI*2/3;function Gb(e){var t;return e=(.5-e)*Math.PI,so.r=255*(t=Math.sin(e))*t,so.g=255*(t=Math.sin(e+jx))*t,so.b=255*(t=Math.sin(e+Yx))*t,so+""}function Ub(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Ys(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const qb=Ys(me("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Hb=Ys(me("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),zb=Ys(me("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Vb=Ys(me("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const jb=Math.cos,jc=Math.min,ls=Math.sin,Re=Math.sqrt,ld=1e-12,cs=Math.PI,Ws=2*cs;function Yb(e){this._context=e}Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Yc(e){return new Yb(e)}class Wb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Wx(e){return new Wb(e,!0)}function Xx(e){return new Wb(e,!1)}const Kx=Re(3),Xb={draw(e,t){const n=Re(t+jc(t/28,.75))*.59436,r=n/2,i=r*Kx;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},Wc={draw(e,t){const n=Re(t/cs);e.moveTo(n,0),e.arc(0,0,n,0,Ws)}},Kb={draw(e,t){const n=Re(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Zb=Re(1/3),Zx=Zb*2,Jb={draw(e,t){const n=Re(t/Zx),r=n*Zb;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Qb={draw(e,t){const n=Re(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},eg={draw(e,t){const n=Re(t-jc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},tg={draw(e,t){const n=Re(t),r=-n/2;e.rect(r,r,n,n)}},ng={draw(e,t){const n=Re(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},Jx=.8908130915292852,rg=ls(cs/10)/ls(7*cs/10),Qx=ls(Ws/10)*rg,eE=-jb(Ws/10)*rg,ig={draw(e,t){const n=Re(t*Jx),r=Qx*n,i=eE*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Ws*a/5,s=jb(o),u=ls(o);e.lineTo(u*n,-s*n),e.lineTo(s*r-u*i,u*r+s*i)}e.closePath()}},Ru=Re(3),ag={draw(e,t){const n=-Re(t/(Ru*3));e.moveTo(0,n*2),e.lineTo(-Ru*n,-n),e.lineTo(Ru*n,-n),e.closePath()}},tE=Re(3),og={draw(e,t){const n=Re(t)*.6824,r=n/2,i=n*tE/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},mt=-.5,pt=Re(3)/2,Xl=1/Re(12),nE=(Xl/2+1)*3,sg={draw(e,t){const n=Re(t/nE),r=n/2,i=n*Xl,a=r,o=n*Xl+n,s=-a,u=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,u),e.lineTo(mt*r-pt*i,pt*r+mt*i),e.lineTo(mt*a-pt*o,pt*a+mt*o),e.lineTo(mt*s-pt*u,pt*s+mt*u),e.lineTo(mt*r+pt*i,mt*i-pt*r),e.lineTo(mt*a+pt*o,mt*o-pt*a),e.lineTo(mt*s+pt*u,mt*u-pt*s),e.closePath()}},ug={draw(e,t){const n=Re(t-jc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},rE=[Wc,Kb,Jb,tg,ig,ag,sg],iE=[Wc,eg,ug,og,Xb,ng,Qb];function Un(){}function fs(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Xs(e){this._context=e}Xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fs(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function aE(e){return new Xs(e)}function lg(e){this._context=e}lg.prototype={areaStart:Un,areaEnd:Un,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fs(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oE(e){return new lg(e)}function cg(e){this._context=e}cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fs(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sE(e){return new cg(e)}function fg(e,t){this._basis=new Xs(e),this._beta=t}fg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,s=-1,u;++s<=n;)u=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+u*a),this._beta*t[s]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const uE=function e(t){function n(r){return t===1?new Xs(r):new fg(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function hs(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Xc(e,t){this._context=e,this._k=(1-t)/6}Xc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:hs(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:hs(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lE=function e(t){function n(r){return new Xc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Kc(e,t){this._context=e,this._k=(1-t)/6}Kc.prototype={areaStart:Un,areaEnd:Un,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:hs(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cE=function e(t){function n(r){return new Kc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Zc(e,t){this._context=e,this._k=(1-t)/6}Zc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hs(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fE=function e(t){function n(r){return new Zc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Jc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>ld){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ld){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*c+e._x1*e._l23_2a-t*e._l12_2a)/l,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function hg(e,t){this._context=e,this._alpha=t}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Jc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hE=function e(t){function n(r){return t?new hg(r,t):new Xc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function dg(e,t){this._context=e,this._alpha=t}dg.prototype={areaStart:Un,areaEnd:Un,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Jc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const dE=function e(t){function n(r){return t?new dg(r,t):new Kc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function mg(e,t){this._context=e,this._alpha=t}mg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Jc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mE=function e(t){function n(r){return t?new mg(r,t):new Zc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function pg(e){this._context=e}pg.prototype={areaStart:Un,areaEnd:Un,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function pE(e){return new pg(e)}function cd(e){return e<0?-1:1}function fd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(cd(a)+cd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function hd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ou(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function ds(e){this._context=e}ds.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ou(this,this._t0,hd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ou(this,hd(this,n=fd(this,e,t)),n);break;default:Ou(this,this._t0,n=fd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function bg(e){this._context=new gg(e)}(bg.prototype=Object.create(ds.prototype)).point=function(e,t){ds.prototype.point.call(this,t,e)};function gg(e){this._context=e}gg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function bE(e){return new ds(e)}function gE(e){return new bg(e)}function yg(e){this._context=e}yg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=dd(e),i=dd(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function dd(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function yE(e){return new yg(e)}function Ks(e,t){this._context=e,this._t=t}Ks.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function _E(e){return new Ks(e,.5)}function wE(e){return new Ks(e,0)}function vE(e){return new Ks(e,1)}function Oi(e,t,n){this.k=e,this.x=t,this.y=n}Oi.prototype={constructor:Oi,scale:function(e){return e===1?this:new Oi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Oi.prototype;function yr(e){return e!=null&&!Number.isNaN(e)}function Lt(e,t){return+yr(t)-+yr(e)||et(e,t)}function ms(e,t){return+yr(t)-+yr(e)||Sa(e,t)}function _g(e){return e!=null&&`${e}`!=""}function wg(e){return isFinite(e)?e:NaN}function Qc(e){return e>0&&isFinite(e)?e:NaN}function vg(e){return e<0&&isFinite(e)?e:NaN}function ME(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${xE(e.getUTCFullYear())}-${bn(e.getUTCMonth()+1,2)}-${bn(e.getUTCDate(),2)}${n||r||i||a?`T${bn(n,2)}:${bn(r,2)}${i||a?`:${bn(i,2)}${a?`.${bn(a,3)}`:""}`:""}Z`:""}`}function xE(e){return e<0?`-${bn(-e,6)}`:e>9999?`+${bn(e,6)}`:bn(e,4)}function bn(e,t){return`${e}`.padStart(t,"0")}const EE=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Mg(e,t){return EE.test(e+="")?new Date(e):typeof t=="function"?t(e):t}function ii(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Sa(t,n)}const kr=1e3,On=kr*60,Bn=On*60,sn=Bn*24,jt=sn*7,ar=sn*30,Dn=sn*365,Bu=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",kr],["5 seconds",5*kr],["15 seconds",15*kr],["30 seconds",30*kr],["minute",On],["5 minutes",5*On],["15 minutes",15*On],["30 minutes",30*On],["hour",Bn],["3 hours",3*Bn],["6 hours",6*Bn],["12 hours",12*Bn],["day",sn],["2 days",2*sn],["week",jt],["2 weeks",2*jt],["month",ar],["3 months",3*ar],["6 months",6*ar],["year",Dn],["2 years",2*Dn],["5 years",5*Dn],["10 years",10*Dn],["20 years",20*Dn],["50 years",50*Dn],["100 years",100*Dn]],ef=new Map([["second",kr],["minute",On],["hour",Bn],["day",sn],["monday",jt],["tuesday",jt],["wednesday",jt],["thursday",jt],["friday",jt],["saturday",jt],["sunday",jt],["week",jt],["month",ar],["year",Dn]]),xg=new Map([["second",$t],["minute",ka],["hour",Da],["day",_r],["monday",sa],["tuesday",Mp],["wednesday",xp],["thursday",br],["friday",Ep],["saturday",Sp],["sunday",ni],["week",ni],["month",Oa],["year",Ot]]),tf=new Map([["second",$t],["minute",Ia],["hour",Ra],["day",zs],["monday",ua],["tuesday",Ap],["wednesday",Pp],["thursday",gr],["friday",Np],["saturday",Cp],["sunday",ri],["week",ri],["month",Ba],["year",Bt]]),Fa=Symbol("intervalDuration"),Zs=Symbol("intervalType");for(const[e,t]of xg)t[Fa]=ef.get(e),t[Zs]="time";for(const[e,t]of tf)t[Fa]=ef.get(e),t[Zs]="utc";const Bi=[["year",Bt,"utc"],["month",Ba,"utc"],["day",zs,"utc",6*ar],["hour",Ra,"utc",3*sn],["minute",Ia,"utc",6*Bn],["second",$t,"utc",30*On]],Ao=[["year",Ot,"time"],["month",Oa,"time"],["day",_r,"time",6*ar],["hour",Da,"time",3*sn],["minute",ka,"time",6*Bn],["second",$t,"time",30*On]],SE=[Bi[0],Ao[0],Bi[1],Ao[1],Bi[2],Ao[2],...Bi.slice(3)];function Eg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=tf.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function Sg(e){return Pg(Eg(e),"time")}function Ag(e){return Pg(Eg(e),"utc")}function Pg([e,t],n){let r=(n==="time"?xg:tf).get(e);return t>1&&(r=r.every(t),r[Fa]=ef.get(e)*t,r[Zs]=n),r}function md(e,t){if(!(t>1))return;const n=e[Fa];if(!Bu.some(([,i])=>i===n)||n%sn===0&&sn<n&&n<ar)return;const[r]=Bu[Ps(([,i])=>Math.log(i)).center(Bu,Math.log(n*t))];return(e[Zs]==="time"?Sg:Ag)(r)}function pd(e,t,n){const r=t==="time"?zc:La;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=AE(n);switch(e){case"millisecond":return Ar(r(".%L"),r(":%M:%S"),i);case"second":return Ar(r(":%S"),r("%-I:%M"),i);case"minute":return Ar(r("%-I:%M"),r("%p"),i);case"hour":return Ar(r("%-I %p"),r("%b %-d"),i);case"day":return Ar(r("%-d"),r("%b"),i);case"month":return Ar(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function AE(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function PE(e){return e==="time"?Ao:e==="utc"?Bi:SE}function NE(e,t,n){const r=tt(M7(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return pd("millisecond","utc",n);for(const[i,a,o,s]of PE(e)){if(r>s||i==="hour"&&!r)break;if(t.every(u=>a.floor(u)>=u))return pd(i,o,n)}}function Ar(e,t,n){return(r,i,a)=>{const o=e(r,i),s=t(r,i),u=i-ii(a);return i!==u&&a[u]!==void 0&&s===t(a[u],u)?o:n(o,s)}}const ca=Object.getPrototypeOf(Uint8Array),CE=Object.prototype.toString,Ng=Symbol("reindex");function Le(e,t,n){const r=typeof t;return r==="string"?bd(e,Cg(t),n):r==="function"?bd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ge(e,Ga(t),n):typeof(t==null?void 0:t.transform)=="function"?gd(t.transform(e),n):TE(gd(t,n),e==null?void 0:e[Ng])}function TE(e,t){return t?of(e,t):e}function bd(e,t,n){return Ge(e,(n==null?void 0:n.prototype)instanceof ca?$E(t):t,n)}function gd(e,t){return t===void 0?ht(e):e instanceof t?e:t.prototype instanceof ca&&!(e instanceof ca)?t.from(e,rf):t.from(e)}function $E(e){return(t,n)=>rf(e(t,n))}const Po=[null],Cg=e=>t=>t[e],nf={transform:Nn},Ye={transform:e=>e},kE=()=>1,IE=()=>!0,Ke=e=>e==null?e:`${e}`,Pe=e=>e==null?e:+e,Tg=e=>e?e[0]:void 0,Kl=e=>e?e[1]:void 0,Ga=e=>()=>e;function DE(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Fo(n,t,r)}function Ir(e){return e instanceof ca?e:Ge(e,rf,Float64Array)}function rf(e){return e==null?NaN:Number(e)}function RE(e){return Ge(e,OE)}function OE(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Mg(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Pn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:eu(e)?[void 0,e]:[e,void 0]}function st(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function $g(e,t,n){if(e!=null)return zt(e,t,n)}function zt(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function ht(e){return e==null||e instanceof Array||e instanceof ca?e:Array.from(e)}function Ge(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function fa(e,t=Array){return e instanceof t?e.slice():t.from(e)}function kg({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function Ig({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function Dg(e){return kg(e)||Ig(e)||e.interval!==void 0}function Yn(e){return(e==null?void 0:e.toString)===CE}function Zl(e){return Yn(e)&&(e.type!==void 0||e.domain!==void 0)}function af(e){return Yn(e)&&typeof e.transform!="function"}function ha(e){return af(e)&&e.value===void 0&&e.channel===void 0}function Rg(e,t,n,r=Ye){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Js(e,t){return e===void 0&&t===void 0?[Tg,Kl]:[e,t]}function BE({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Pn(t)),e===void 0&&([e]=Pn(n)),e}function Nn(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function of(e,t){return Ge(t,n=>e[n],e.constructor)}function LE(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function uo(e){return e!==null&&typeof e=="object"?e.valueOf():e}function FE(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function ps(e){let t;return[{transform:()=>t,label:fi(e)},n=>t=n]}function Cr(e){return e==null?[e]:ps(e)}function fi(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function Og(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Et(r)||Et(i)?Ge(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Ge(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function Jl(e,t){const n=Bg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ge(e,n):e}function Bg(e,t){const n=sf(e,t);return n&&(r=>yr(r)?n.floor(r):r)}function sf(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>lt(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>lt(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?Sg:Ag)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Ua(e,t){if(e=sf(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function GE(e,t){if(e=Ua(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function UE(e){return typeof(e==null?void 0:e.range)=="function"}function Qs(e){return e===void 0||af(e)?e:{value:e}}function qE(e){return e==null?null:{transform:t=>Le(t,e,Float64Array),label:fi(e)}}function Mr(e){return e&&typeof e[Symbol.iterator]=="function"}function Lg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function yd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Et(e){for(const t of e)if(t!=null)return t instanceof Date}function HE(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&Mg(t)}function zE(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function VE(e){for(const t of e)if(t!=null)return typeof t=="number"}function Lu(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const jE=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function eu(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||jE.has(e))}function YE(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Ze(e){return e==null||da(e)}function da(e){return/^\s*none\s*$/i.test(e)}function WE(e){return/^\s*round\s*$/i.test(e)}function Ql(e,t){return $g(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function uf(e="middle"){return Ql(e,"frameAnchor")}function XE(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function KE(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function Fg(e){return Mr(e)?KE(e):e}function Gg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=zt(e,"clip",["frame","sphere"])),e}const Zt=Symbol("position"),Cn=Symbol("color"),qa=Symbol("radius"),Ha=Symbol("length"),za=Symbol("opacity"),tu=Symbol("symbol"),Ug=Symbol("projection"),Te=new Map([["x",Zt],["y",Zt],["fx",Zt],["fy",Zt],["r",qa],["color",Cn],["opacity",za],["symbol",tu],["length",Ha],["projection",Ug]]);function ZE(e){return e===Zt||e===Ug}function JE(e){return e===Zt||e===qa||e===Ha||e===za}const QE=Math.sqrt(3),eS=2/QE,tS={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*eS,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},qg=new Map([["asterisk",Xb],["circle",Wc],["cross",Kb],["diamond",Jb],["diamond2",Qb],["hexagon",tS],["plus",eg],["square",tg],["square2",ng],["star",ig],["times",ug],["triangle",ag],["triangle2",og],["wye",sg]]);function Hg(e){return e&&typeof e.draw=="function"}function nS(e){return Hg(e)?!0:typeof e!="string"?!1:qg.has(e.toLowerCase())}function lf(e){if(e==null||Hg(e))return e;const t=qg.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function cf({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=zg(e)),t!=null&&!ha(t)&&(r=Fu(r,jg(t))),n&&(r=Fu(r,Vg))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||ha(t))&&{sort:t},transform:Fu(r,o)}}function bs({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=zg(e)),t!=null&&!ha(t)&&(r=Gu(r,jg(t))),n&&(r=Gu(r,Vg))),{...i,...(t===null||ha(t))&&{sort:t},initializer:Gu(r,a)}}function Fu(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,ht(n),r,i)}}function Gu(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,s,u,c,l,h;return{data:s=n,facets:u=r,channels:o}=e.call(this,n,r,i,...a),{data:l=s,facets:h=u,channels:c}=t.call(this,s,u,{...i,...o},...a),{data:l,facets:h,channels:{...o,...c}}}}function zg(e){return(t,n)=>{const r=Le(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function Vg(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function jg(e){return(typeof e=="function"&&e.length!==1?rS:iS)(e)}function rS(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function iS(e){let t,n;({channel:t,value:e,order:n}={...Qs(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?ms:Lt),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Lt;break;case"descending":n=ms;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let s;if(t===void 0)s=Le(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(s=o[t],!s)return{};s=s.value}const u=(c,l)=>n(s[c],s[l]);return{data:i,facets:a.map(c=>c.slice().sort(u))}}}function aS(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=Js(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return oS(n,r,e,t)}function oS(e,t,{data:n=Jg,filter:r,sort:i,reverse:a,...o}={},s={}){o=cS(o,s),n=Zg(n,Ye),i=i==null?void 0:Xg("sort",i,s),r=r==null?void 0:Kg("filter",r,s);const[u,c]=Cr(e),[l,h]=Cr(t),{z:f,fill:d,stroke:m,x1:p,x2:y,y1:_,y2:g,...M}=s,[b,x]=Cr(f),[w]=Pn(d),[S]=Pn(m),[E,N]=Cr(w),[F,P]=Cr(S);return{..."z"in s&&{z:b||f},..."fill"in s&&{fill:E||d},..."stroke"in s&&{stroke:F||m},...cf(M,(L,j,z)=>{const A=Jl(Le(L,e),z==null?void 0:z.x),$=Jl(Le(L,t),z==null?void 0:z.y),U=Le(L,f),W=Le(L,w),G=Le(L,S),H=hS(o,{z:U,fill:W,stroke:G}),X=[],Y=[],I=A&&c([]),ee=$&&h([]),te=U&&x([]),re=W&&N([]),K=G&&P([]);let V=0;for(const k of o)k.initialize(L);i&&i.initialize(L),r&&r.initialize(L);for(const k of j){const O=[];for(const q of o)q.scope("facet",k);i&&i.scope("facet",k),r&&r.scope("facet",k);for(const[q,D]of Uu(k,H))for(const[se,ae]of Uu(D,$))for(const[ie,ue]of Uu(ae,A)){const oe={data:L};if(A&&(oe.x=ie),$&&(oe.y=se),H&&(oe.z=q),!(r&&!r.reduce(ue,oe))){O.push(V++),Y.push(n.reduceIndex(ue,L,oe)),A&&I.push(ie),$&&ee.push(se),U&&te.push(H===U?q:U[ue[0]]),W&&re.push(H===W?q:W[ue[0]]),G&&K.push(H===G?q:G[ue[0]]);for(const We of o)We.reduce(ue,oe);i&&i.reduce(ue,oe)}}X.push(O)}return dS(X,i,a),{data:Y,facets:X}}),...!_d(o,"x")&&(u?{x:u}:{x1:p,x2:y}),...!_d(o,"y")&&(l?{y:l}:{y1:_,y2:g}),...Object.fromEntries(o.map(({name:L,output:j})=>[L,j]))}}function _d(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function sS(e,t,n=Yg){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",bS]),t.href!=null&&e.href===void 0&&r.push(["href",Qg]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?uS(i):n(i,a,t))}function Yg(e,t,n,r=Wg){let i;Yn(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,s]=ps(a.label);let u;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(c){a.initialize(c),u=s([])},scope(c,l){a.scope(c,l)},reduce(c,l){u.push(a.reduce(c,l))}}}function uS(e){return{name:e,initialize(){},scope(){},reduce(){}}}function Wg(e,t,n,r=ff){const i=FE(e,n),a=r(t,i);let o,s;return{label:fi(a===ec?null:i,a.label),initialize(u){o=i===void 0?u:Le(u,i),a.scope==="data"&&(s=a.reduceIndex(Nn(u),o))},scope(u,c){a.scope===u&&(s=a.reduceIndex(c,o))},reduce(u,c){return a.scope==null?a.reduceIndex(u,o,c):a.reduceIndex(u,o,s,c)}}}function Uu(e,t){return t?Mc(e,n=>t[n]):[[,e]]}function ff(e,t,n=lS){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&Yn(e))return mS(e);if(typeof e=="function")return pS(e);if(/^p\d{2}$/i.test(e))return pn(DE(e));switch(`${e}`.toLowerCase()){case"first":return Qg;case"last":return gS;case"identity":return Jg;case"count":return ec;case"distinct":return yS;case"sum":return t==null?ec:_S;case"proportion":return vd(t,"data");case"proportion-facet":return vd(t,"facet");case"deviation":return pn(o7);case"min":return pn(xn);case"min-index":return pn(y7);case"max":return pn(tt);case"max-index":return pn(g7);case"mean":return wd(V0);case"median":return wd(bl);case"variance":return pn(B0);case"mode":return pn(v7)}return n(e)}function lS(e){throw new Error(`invalid reduce: ${e}`)}function cS(e,t){return sS(e,t,Xg)}function Xg(e,t,n){return Yg(e,t,n,Kg)}function Kg(e,t,n){return Wg(e,t,n,Zg)}function Zg(e,t){return ff(e,t,fS)}function fS(e){switch(`${e}`.toLowerCase()){case"x":return wS;case"y":return vS;case"z":return MS}throw new Error(`invalid group reduce: ${e}`)}function hS(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function dS(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>Lt(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function mS(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function pS(e){return{reduceIndex(t,n,r){return e(of(n,t),r)}}}function pn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function wd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Et(n)?new Date(r):r}}}const Jg={reduceIndex(e,t){return of(t,e)}},Qg={reduceIndex(e,t){return t[e[0]]}},bS={reduceIndex(e,t){const r=Oo(Or(e,a=>a.length,a=>t[a]),Kl),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[` ${a.length.toLocaleString("en-US")} more`,Fn(a,Kl)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},gS={reduceIndex(e,t){return t[e[e.length-1]]}},ec={label:"Frequency",reduceIndex(e){return e.length}},yS={label:"Distinct",reduceIndex(e,t){const n=new Cs;for(const r of e)n.add(t[r]);return n.size}},_S=pn(Fn);function vd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Fn(n,a=>r[a])/i}}const wS={reduceIndex(e,t,{x:n}){return n}},vS={reduceIndex(e,t,{y:n}){return n}},MS={reduceIndex(e,t,{z:n}){return n}};function ma(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=fi(r)},s){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),e2(s,{scale:t,type:n,value:Le(e,r),label:o,filter:i,hint:a})}function xS(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,ma(t,r,n)]))}function ES(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Ge(a,o)]}));return n.channels=e,n}function e2(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Lu(r,eu)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Lu(r,YE)?null:"opacity";break;case"symbol":n!==!0&&Lu(r,nS)?(t.scale=null,t.value=Ge(r,lf)):t.scale="symbol";break;default:t.scale=Te.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Te.has(n))throw new Error(`unknown scale: ${n}`);return t}function SS(e,t,n,r,i){const{order:a,reverse:o,reduce:s=!0,limit:u}=i;for(const c in i){if(!Te.has(c))continue;let{value:l,order:h=a,reverse:f=o,reduce:d=s,limit:m=u}=Qs(i[c]);const p=l==null?void 0:l.startsWith("-");if(p&&(l=l.slice(1)),h=h===void 0?p!==(l==="width"||l==="height")?n2:t2:NS(h),d==null||d===!1)continue;const y=c==="fx"||c==="fy"?PS(t,r[c]):AS(n,c);if(!y)throw new Error(`missing channel for scale: ${c}`);const _=y.value,[g=0,M=1/0]=Mr(m)?m:m<0?[m]:[0,m];if(l==null)y.domain=()=>{let b=Array.from(new Cs(_));return f&&(b=b.reverse()),(g!==0||M!==1/0)&&(b=b.slice(g,M)),b};else{const b=l==="data"?e:l==="height"?Md(n,"y1","y2"):l==="width"?Md(n,"x1","x2"):tc(n,l,l==="y"?"y2":l==="x"?"x2":void 0),x=ff(d===!0?"max":d,b);y.domain=()=>{let w=s7(Nn(_),S=>x.reduceIndex(S,b),S=>_[S]);return h&&w.sort(h),f&&w.reverse(),(g!==0||M!==1/0)&&(w=w.slice(g,M)),w.map(Tg)}}}}function AS(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function PS(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const s of e[a])i[s]=o}return t}function Md(e,t,n){const r=tc(e,t),i=tc(e,n);return Ge(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function tc(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function NS(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return t2;case"descending":return n2}throw new Error(`invalid order: ${e}`)}function t2([e,t],[n,r]){return Lt(t,r)||Lt(e,n)}function n2([e,t],[n,r]){return ms(t,r)||Lt(e,n)}function xd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function hf(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Gg(n)}}function ze(e,{document:t}){return Ui(ks(e).call(t.documentElement))}let nc=0,rc;function CS(){const e=nc;return nc=0,rc=void 0,e}function or(e){e!==rc&&(rc=e,console.warn(e),++nc)}const r2=Math.PI,hn=2*r2,Ed=.618;function TS({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let s,u,c="frame";if(Yn(e)){let x;if({type:e,domain:u,inset:x,insetTop:n=x!==void 0?x:n,insetRight:r=x!==void 0?x:r,insetBottom:i=x!==void 0?x:i,insetLeft:a=x!==void 0?x:a,clip:c=c,...s}=e,e==null)return}typeof e!="function"&&({type:e}=i2(e));const{width:l,height:h,marginLeft:f,marginRight:d,marginTop:m,marginBottom:p}=o,y=l-f-d-a-r,_=h-m-p-n-i;if(e=e==null?void 0:e({width:y,height:_,clip:c,...s}),e==null)return;c=$S(c,f,m,l-d,h-p);let g=f+a,M=m+n,b;if(u!=null){const[[x,w],[S,E]]=Bc(e).bounds(u),N=Math.min(y/(S-x),_/(E-w));N>0?(g-=(N*(x+S)-y)/2,M-=(N*(w+E)-_)/2,b=ql({point(F,P){this.stream.point(F*N+g,P*N+M)}})):or("Warning: the projection could not be fit to the specified domain; using the default scale.")}return b??(b=g===0&&M===0?a2():ql({point(x,w){this.stream.point(x+g,w+M)}})),{stream:x=>e.stream(b.stream(c(x)))}}function i2(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Pt(J9,.7463,.4673);case"albers":return lo(ep,.7463,.4673);case"azimuthal-equal-area":return Pt(Q9,4,4);case"azimuthal-equidistant":return Pt(e8,hn,hn);case"conic-conformal":return lo(r8,hn,hn);case"conic-equal-area":return lo(is,6.1702,2.9781);case"conic-equidistant":return lo(o8,7.312,3.6282);case"equal-earth":return Pt(u8,5.4133,2.6347);case"equirectangular":return Pt(i8,hn,r2);case"gnomonic":return Pt(l8,3.4641,3.4641);case"identity":return{type:a2};case"reflect-y":return{type:kS};case"mercator":return Pt(t8,hn,hn);case"orthographic":return Pt(c8,2,2);case"stereographic":return Pt(f8,2,2);case"transverse-mercator":return Pt(h8,hn,hn);default:throw new Error(`unknown projection type: ${e}`)}}function $S(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return L1(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Pt(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:s})=>{var c,l,h;const u=e();return o!=null&&((c=u.precision)==null||c.call(u,o)),a!=null&&((l=u.rotate)==null||l.call(u,a)),typeof s=="number"&&((h=u.clipAngle)==null||h.call(u,s)),u.scale(Math.min(r/t,i/n)),u.translate([r/2,i/2]),u},aspectRatio:n/t}}function lo(e,t,n){const{type:r,aspectRatio:i}=Pt(e,t,n);return{type:a=>{const{parallels:o,domain:s,width:u,height:c}=a,l=r(a);return o!=null&&(l.parallels(o),s===void 0&&l.fitSize([u,c],{type:"Sphere"})),l},aspectRatio:i}}const a2=Ga({stream:e=>e}),kS=Ga(ql({point(e,t){this.stream.point(e,-t)}}));function IS(e,t,n,r){const i=n[e],a=n[t],o=i.length,s=n[e]=new Float64Array(o).fill(NaN),u=n[t]=new Float64Array(o).fill(NaN);let c;const l=r.stream({point(h,f){s[c]=h,u[c]=f}});for(c=0;c<o;++c)l.point(i[c],a[c])}function DS({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(Yn(e)&&(e=e.type),e!=null)}function RS(e){if(typeof(e==null?void 0:e.stream)=="function")return Ed;if(Yn(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=i2(e);if(t)return t}return Ed}}function OS(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,s){t.push(o),n.push(s)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)Qn(o,a);return[r,i]}const o2=new Map([["accent",Ox],["category10",Rx],["dark2",Bx],["observable10",Lx],["paired",Fx],["pastel1",Gx],["pastel2",Ux],["set1",qx],["set2",Hx],["set3",zx],["tableau10",Vx]]);function BS(e){return e!=null&&o2.has(`${e}`.toLowerCase())}const Sd=new Map([...o2,["brbg",dn(Fp,Gp)],["prgn",dn(Up,qp)],["piyg",dn(Hp,zp)],["puor",dn(Vp,jp)],["rdbu",dn(Yl,us)],["rdgy",dn(Yp,Wp)],["rdylbu",dn(Wl,la)],["rdylgn",dn(Xp,Kp)],["spectral",dn(Zp,Jp)],["burd",Ad(Yl,us)],["buylrd",Ad(Wl,la)],["blues",Oe(xb,Eb)],["greens",Oe(Sb,Ab)],["greys",Oe(Pb,Nb)],["oranges",Oe(Ib,Db)],["purples",Oe(Cb,Tb)],["reds",Oe($b,kb)],["turbo",mn(Ub)],["viridis",mn(qb)],["magma",mn(Hb)],["inferno",mn(zb)],["plasma",mn(Vb)],["cividis",mn(Rb)],["cubehelix",mn(Ob)],["warm",mn(Bb)],["cool",mn(Lb)],["bugn",Oe(Qp,eb)],["bupu",Oe(tb,nb)],["gnbu",Oe(rb,ib)],["orrd",Oe(ab,ob)],["pubu",Oe(lb,cb)],["pubugn",Oe(sb,ub)],["purd",Oe(fb,hb)],["rdpu",Oe(db,mb)],["ylgn",Oe(gb,yb)],["ylgnbu",Oe(pb,bb)],["ylorbr",Oe(_b,wb)],["ylorrd",Oe(vb,Mb)],["rainbow",Pd(Fb)],["sinebow",Pd(Gb)]]);function Oe(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Rt(t,n):e[n])}function dn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Rt(t,n):e[n])}function Ad(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Rt(r=>t(1-r),n):e[n].slice().reverse())}function mn(e){return({length:t})=>Rt(e,Math.max(2,Math.floor(t)))}function Pd(e){return({length:t})=>Rt(e,Math.floor(t)+1).slice(0,-1)}function s2(e){const t=`${e}`.toLowerCase();if(!Sd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return Sd.get(t)}function nu(e,t){const n=s2(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function LS(e,t="greys"){const n=new Set,[r,i]=nu(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Nd=new Map([["brbg",Gp],["prgn",qp],["piyg",zp],["puor",jp],["rdbu",us],["rdgy",Wp],["rdylbu",la],["rdylgn",Kp],["spectral",Jp],["burd",e=>us(1-e)],["buylrd",e=>la(1-e)],["blues",Eb],["greens",Ab],["greys",Nb],["purples",Tb],["reds",kb],["oranges",Db],["turbo",Ub],["viridis",qb],["magma",Hb],["inferno",zb],["plasma",Vb],["cividis",Rb],["cubehelix",Ob],["warm",Bb],["cool",Lb],["bugn",eb],["bupu",nb],["gnbu",ib],["orrd",ob],["pubugn",ub],["pubu",cb],["purd",hb],["rdpu",mb],["ylgnbu",bb],["ylgn",yb],["ylorbr",wb],["ylorrd",Mb],["rainbow",Fb],["sinebow",Gb]]);function df(e){const t=`${e}`.toLowerCase();if(!Nd.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Nd.get(t)}const FS=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function GS(e){return e!=null&&FS.has(`${e}`.toLowerCase())}const u2=e=>t=>e(1-t),qu=[0,1],Cd=new Map([["number",Ve],["rgb",dr],["hsl",j4],["hcl",X4],["lab",Y4]]);function l2(e){const t=`${e}`.toLowerCase();if(!Cd.has(t))throw new Error(`unknown interpolator: ${t}`);return Cd.get(t)}function Va(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:s=f2(e,n),unknown:u,round:c,scheme:l,interval:h,range:f=Te.get(e)===qa?ZS(n,s):Te.get(e)===Ha?JS(n,s):Te.get(e)===za?qu:void 0,interpolate:d=Te.get(e)===Cn?l==null&&f!==void 0?dr:df(l!==void 0?l:r==="cyclical"?"rainbow":"turbo"):c?Tc:Ve,reverse:m}){if(h=Ua(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=l2(d)),m=!!m,f!==void 0){const p=(s=ht(s)).length,y=(f=ht(f)).length;if(p!==y){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Rs(d,f),f=void 0}}if(d.length===1?(m&&(d=u2(d),m=!1),f===void 0&&(f=Float64Array.from(s,(p,y)=>y/(s.length-1)),f.length===2&&(f=qu)),t.interpolate((f===qu?Ga:pf)(d))):t.interpolate(d),o){const[p,y]=ut(s);(p>0||y<0)&&(s=fa(s),ii(s)!==Math.sign(p)?s[s.length-1]=0:s[0]=0)}return m&&(s=Go(s)),t.domain(s).unknown(u),i&&(t.nice(US(i,r)),s=t.domain()),f!==void 0&&t.range(f),a&&t.clamp(a),{type:r,domain:s,range:f,scale:t,interpolate:d,interval:h}}function US(e,t){return e===!0?void 0:typeof e=="number"?e:GE(e,t)}function qS(e,t,n){return Va(e,qc(),t,n)}function HS(e,t,n){return c2(e,t,{...n,exponent:.5})}function c2(e,t,{exponent:n=1,...r}){return Va(e,_p().exponent(n),t,{...r,type:"pow"})}function zS(e,t,{base:n=10,domain:r=QS(t),...i}){return Va(e,pp().base(n),t,{...i,domain:r})}function VS(e,t,{constant:n=1,...r}){return Va(e,gp().constant(n),t,r)}function jS(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=eA(t),unknown:s,interpolate:u,reverse:c}){return n===void 0&&(n=u!==void 0?Rt(u,i):Te.get(e)===Cn?nu(a,i):void 0),o.length>0&&(o=wp(o,n===void 0?{length:i}:n).quantiles()),mf(e,t,{domain:o,range:n,reverse:c,unknown:s})}function YS(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=f2(e,t),unknown:o,interpolate:s,reverse:u}){const[c,l]=ut(a);let h;return n===void 0?(h=ea(c,l,r),h[0]<=c&&h.splice(0,1),h[h.length-1]>=l&&h.pop(),r=h.length+1,n=s!==void 0?Rt(s,r):Te.get(e)===Cn?nu(i,r):void 0):(h=Rt(Ve(c,l),r+1).slice(1,-1),c instanceof Date&&(h=h.map(f=>new Date(f)))),ii(ht(a))<0&&h.reverse(),mf(e,t,{domain:h,range:n,reverse:u,unknown:o})}function mf(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Rt(a,n.length+1):Te.get(e)===Cn?nu(i,n.length+1):void 0,reverse:s}){n=ht(n);const u=ii(n);if(!isNaN(u)&&!WS(n,u))throw new Error(`the ${e} scale has a non-monotonic domain`);return s&&(o=Go(o)),{type:"threshold",scale:vp(u<0?Go(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function WS(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=Sa(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function XS(e){return{type:"identity",scale:JE(Te.get(e))?hp():t=>t}}function pa(e,t=wg){return e.length?[xn(e,({value:n})=>n===void 0?n:xn(n,t)),tt(e,({value:n})=>n===void 0?n:tt(n,t))]:[0,1]}function f2(e,t){const n=Te.get(e);return(n===qa||n===za||n===Ha?KS:pa)(t)}function KS(e){return[0,e.length?tt(e,({value:t})=>t===void 0?t:tt(t,wg)):1]}function ZS(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Fo(e,.5,({value:o})=>o===void 0?NaN:Fo(o,.25,Qc)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/tt(i);return a<1?i.map(o=>o*a):i}function JS(e,t){const n=bl(e,({value:a})=>a===void 0?NaN:bl(a,Math.abs)),r=t.map(a=>12*a/n),i=60/tt(r);return i<1?r.map(a=>a*i):r}function QS(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return pa(e,Qc);if(n<0)return pa(e,vg)}return[1,10]}function eA(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function pf(e){return(t,n)=>r=>e(t+r*(n-t))}function ru(e,t,n,r,{type:i,nice:a,clamp:o,domain:s=pa(r),unknown:u,pivot:c=0,scheme:l,range:h,symmetric:f=!0,interpolate:d=Te.get(e)===Cn?l==null&&h!==void 0?dr:df(l!==void 0?l:"rdbu"):Ve,reverse:m}){c=+c,s=ht(s);let[p,y]=s;if(s.length>2&&or(`Warning: the diverging ${e} scale domain contains extra elements.`),Sa(p,y)<0&&([p,y]=[y,p],m=!m),p=Math.min(p,c),y=Math.max(y,c),typeof d!="function"&&(d=l2(d)),h!==void 0&&(d=d.length===1?pf(d)(...h):Rs(d,h)),m&&(d=u2(d)),f){const _=n.apply(c),g=_-n.apply(p),M=n.apply(y)-_;g<M?p=n.invert(_-M):g>M&&(y=n.invert(_+g))}return t.domain([p,c,y]).unknown(u).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,y],pivot:c,interpolate:d,scale:t}}function tA(e,t,n){return ru(e,Rp(),aA,t,n)}function nA(e,t,n){return h2(e,t,{...n,exponent:.5})}function h2(e,t,{exponent:n=1,...r}){return ru(e,Lp().exponent(n=+n),uA(n),t,{...r,type:"diverging-pow"})}function rA(e,t,{base:n=10,pivot:r=1,domain:i=pa(t,r<0?vg:Qc),...a}){return ru(e,Op().base(n=+n),oA,t,{domain:i,pivot:r,...a})}function iA(e,t,{constant:n=1,...r}){return ru(e,Bp().constant(n=+n),lA(n),t,r)}const aA={apply(e){return e},invert(e){return e}},oA={apply:Math.log,invert:Math.exp},sA={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function uA(e){return e===.5?sA:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function lA(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function d2(e,t,n,r){return Va(e,t,n,r)}function cA(e,t,n){return d2(e,Ix(),t,n)}function fA(e,t,n){return d2(e,Dx(),t,n)}const ja=Symbol("ordinal");function m2(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:s,hint:u}){return i=Ua(i,r),a===void 0&&(a=b2(n,i,e)),(r==="categorical"||r===ja)&&(r="ordinal"),s&&(a=Go(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:u,interval:i}}function hA(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:s,...u}){r=Ua(r,n),i===void 0&&(i=b2(t,r,e));let c;if(Te.get(e)===tu)c=pA(t),a=a===void 0?bA(c):Ge(a,lf);else if(Te.get(e)===Cn&&(a===void 0&&(n==="ordinal"||n===ja)&&(a=LS(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const l=df(o),h=a[0],f=a[1]-a[0];a=({length:d})=>Rt(m=>l(h+f*m),d)}else a=s2(o);if(s===zl)throw new Error(`implicit unknown on ${e} scale is not supported`);return m2(e,Uc().unknown(s),t,{...u,type:n,domain:i,range:a,hint:c})}function dA(e,t,{align:n=.5,padding:r=.5,...i}){return p2(d8().align(n).padding(r),t,i,e)}function mA(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return p2(Us().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function p2(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=m2(r,e,t,n),e.round=i,e}function b2(e,t,n){const r=new Cs;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=ut(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Te.get(n)===Zt)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Oo(r,Lt)}function Td(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function pA(e){return{fill:Td(e,"fill"),stroke:Td(e,"stroke")}}function bA(e){return Ze(e.fill)?iE:rE}function ic(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:s,nice:u,clamp:c,zero:l,align:h,padding:f,projection:d,facet:{label:m=t}={},...p}={}){const y={};for(const[_,g]of e){const M=p[_],b=vA(_,g,{round:Te.get(_)===Zt?s:void 0,nice:u,clamp:c,zero:l,align:h,padding:f,projection:d,...M});if(b){let{label:x=_==="fx"||_==="fy"?m:t,percent:w,transform:S,inset:E,insetTop:N=E!==void 0?E:_==="y"?r:0,insetRight:F=E!==void 0?E:_==="x"?i:0,insetBottom:P=E!==void 0?E:_==="y"?a:0,insetLeft:L=E!==void 0?E:_==="x"?o:0}=M||{};if(S==null)S=void 0;else if(typeof S!="function")throw new Error("invalid scale transform; not a function");b.percent=!!w,b.label=x===void 0?yA(g,b):x,b.transform=S,_==="x"||_==="fx"?(b.insetLeft=+L,b.insetRight=+F):(_==="y"||_==="fy")&&(b.insetTop=+N,b.insetBottom=+P),y[_]=b}}return y}function $d(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:s,label:u}=i;t[r]=AA(i),n[r]=a,a.type=o,s!=null&&(a.interval=s),u!=null&&(a.label=u)}return n}function gA(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?bf(t):t;i&&kd(i,o),a&&Id(a,o);const s=i||a?g2(e,t):t;n&&kd(n,s),r&&Id(r,s)}function yA(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!xr(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function _A(e){return Math.sign(ii(e.domain()))*Math.sign(ii(e.range()))}function bf(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:s,marginRight:u,marginBottom:c,marginLeft:l}}=e;return{marginTop:Math.max(t,s),marginRight:Math.max(n,u),marginBottom:Math.max(r,c),marginLeft:Math.max(i,l),width:a,height:o}}function g2({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:u}=bf(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:s,height:t?t.scale.bandwidth()+r+a:u,facet:{width:s,height:u}}}function kd(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,s=a+n,u=i-o-r;e.range=[s,Math.max(s,u)],xr(e)||(e.range=_2(e)),e.scale.range(e.range)}y2(e)}function Id(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,s=a+n,u=i-o-r;e.range=[Math.max(s,u),s],xr(e)?e.range.reverse():e.range=_2(e),e.scale.range(e.range)}y2(e)}function y2(e){e.round===void 0&&xA(e)&&wA(e)<=30&&e.scale.round(!0)}function wA({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,s=Math.abs(r-n)/Math.max(1,o+a*2);return(s-Math.floor(s))*o}function _2(e){const t=e.scale.domain().length+w2(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function vA(e,t=[],n={}){const r=MA(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&xr({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(Et)?or(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Pr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Pr(r)}".`):i.some(HE)?or(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Pr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Pr(r)}".`):i.some(zE)&&or(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Pr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Pr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=co(t,n,Ir);break;case"identity":switch(Te.get(e)){case Zt:n=co(t,n,Ir);break;case tu:n=co(t,n,EA);break}break;case"utc":case"time":n=co(t,n,RE);break}switch(r){case"diverging":return tA(e,t,n);case"diverging-sqrt":return nA(e,t,n);case"diverging-pow":return h2(e,t,n);case"diverging-log":return rA(e,t,n);case"diverging-symlog":return iA(e,t,n);case"categorical":case"ordinal":case ja:return hA(e,t,n);case"cyclical":case"sequential":case"linear":return qS(e,t,n);case"sqrt":return HS(e,t,n);case"threshold":return mf(e,t,n);case"quantile":return jS(e,t,n);case"quantize":return YS(e,t,n);case"pow":return c2(e,t,n);case"log":return zS(e,t,n);case"symlog":return VS(e,t,n);case"utc":return fA(e,t,n);case"time":return cA(e,t,n);case"point":return dA(e,t,n);case"band":return mA(e,t,n);case"identity":return XS(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Pr(e){return typeof e=="symbol"?e.description:e}function Dd(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Rd={toString:()=>"projection"};function MA(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:s}){if(n=Dd(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&s!=null&&(n=Rd);for(const c of t){const l=Dd(c.type);if(l!==void 0){if(n===void 0)n=l;else if(n!==l)throw new Error(`scale incompatible with channel: ${n} !== ${l}`)}}if(n===Rd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:c})=>c!==void 0))return;const u=Te.get(e);if(u===qa)return"sqrt";if(u===za||u===Ha)return"linear";if(u===tu)return"ordinal";if((r||i||[]).length>2)return Hu(u);if(r!==void 0){if(yd(r))return Hu(u);if(Et(r))return"utc"}else{const c=t.map(({value:l})=>l).filter(l=>l!==void 0);if(c.some(yd))return Hu(u);if(c.some(Et))return"utc"}if(u===Cn){if(o!=null||GS(a))return"diverging";if(BS(a))return"categorical"}return"linear"}function Hu(e){switch(e){case Zt:return"point";case Cn:return ja;default:return"ordinal"}}function xr({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===ja}function w2({type:e}){return e==="threshold"}function xA({type:e}){return e==="point"||e==="band"}function qn(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function co(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function EA(e){return Ge(e,lf)}function SA(e){return t=>{if(!Te.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function AA({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:s,pivot:u}){if(t==="identity")return{type:"identity",apply:l=>l,invert:l=>l};const c=e.unknown?e.unknown():void 0;return{type:t,domain:fa(n),...r!==void 0&&{range:fa(r)},...o!==void 0&&{transform:o},...s&&{percent:s},...c!==void 0&&{unknown:c},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...u!==void 0&&{pivot:u,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:l=>e(l),...e.invert&&{invert:l=>e.invert(l)}}}function PA(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const NA=PA(e=>new Intl.NumberFormat(e));function CA(e="en-US"){const t=NA(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function TA(e){return ME(e,"Invalid Date")}function $A(e="en-US"){const t=CA(e);return n=>(n instanceof Date?TA:typeof n=="number"?t:Ke)(n)}const ai=$A(),Qe=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let kA=0;function Od(){return`plot-clip-${++kA}`}function IA(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:s,fillOpacity:u,stroke:c,strokeWidth:l,strokeOpacity:h,strokeLinejoin:f,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:y,opacity:_,mixBlendMode:g,imageFilter:M,paintOrder:b,pointerEvents:x,shapeRendering:w,channels:S},{ariaLabel:E,fill:N="currentColor",fillOpacity:F,stroke:P="none",strokeOpacity:L,strokeWidth:j,strokeLinecap:z,strokeLinejoin:A,strokeMiterlimit:$,paintOrder:U}){N===null&&(s=null,u=null),P===null&&(c=null,h=null),Ze(N)?!Ze(P)&&(!Ze(s)||S!=null&&S.fill)&&(P="none"):Ze(P)&&(!Ze(c)||S!=null&&S.stroke)&&(N="none");const[W,G]=Pn(s,N),[H,X]=st(u,F),[Y,I]=Pn(c,P),[ee,te]=st(h,L),[re,K]=st(_);da(I)||(l===void 0&&(l=j),d===void 0&&(d=z),f===void 0&&(f=A),m===void 0&&!WE(f)&&(m=$),!da(G)&&b===void 0&&(b=U));const[V,k]=st(l);return N!==null&&(e.fill=qe(G,"currentColor"),e.fillOpacity=Ei(X,1)),P!==null&&(e.stroke=qe(I,"none"),e.strokeWidth=Ei(k,1),e.strokeOpacity=Ei(te,1),e.strokeLinejoin=qe(f,"miter"),e.strokeLinecap=qe(d,"butt"),e.strokeMiterlimit=Ei(m,4),e.strokeDasharray=qe(p,"none"),e.strokeDashoffset=qe(y,"0")),e.target=Ke(o),e.ariaLabel=Ke(E),e.ariaDescription=Ke(i),e.ariaHidden=Ke(a),e.opacity=Ei(K,1),e.mixBlendMode=qe(g,"normal"),e.imageFilter=qe(M,"none"),e.paintOrder=qe(b,"normal"),e.pointerEvents=qe(x,"auto"),e.shapeRendering=qe(w,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:W,scale:"auto",optional:!0},fillOpacity:{value:H,scale:"auto",optional:!0},stroke:{value:Y,scale:"auto",optional:!0},strokeOpacity:{value:ee,scale:"auto",optional:!0},strokeWidth:{value:V,optional:!0},opacity:{value:re,scale:"auto",optional:!0}}}function DA(e,t){t&&e.filter(n=>_g(t[n])).append("title").call(RA,t)}function RA(e,t){t&&e.text(n=>ai(t[n]))}function Wn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:s,strokeOpacity:u,strokeWidth:c,opacity:l,href:h}){r&&_e(e,"aria-label",f=>r[f]),a&&_e(e,"fill",f=>a[f]),o&&_e(e,"fill-opacity",f=>o[f]),s&&_e(e,"stroke",f=>s[f]),u&&_e(e,"stroke-opacity",f=>u[f]),c&&_e(e,"stroke-width",f=>c[f]),l&&_e(e,"opacity",f=>l[f]),h&&BA(e,f=>h[f],t),n||DA(e,i)}function OA(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:s,marginLeft:u,marginRight:c,marginTop:l,marginBottom:h}=n,f=Od();i=`url(#${f})`,e=ze("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",f).append("rect").attr("x",u).attr("y",l).attr("width",o-c-u).attr("height",s-l-h)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const s=Od();i=`url(#${s})`,e.append("clipPath").attr("id",s).append("path").attr("d",Bc(o)({type:"Sphere"}));break}}_e(e,"aria-label",t.ariaLabel),_e(e,"aria-description",t.ariaDescription),_e(e,"aria-hidden",t.ariaHidden),_e(e,"clip-path",i)}function Tn(e,t,n,r){OA(e,t,n,r),_e(e,"fill",t.fill),_e(e,"fill-opacity",t.fillOpacity),_e(e,"stroke",t.stroke),_e(e,"stroke-width",t.strokeWidth),_e(e,"stroke-opacity",t.strokeOpacity),_e(e,"stroke-linejoin",t.strokeLinejoin),_e(e,"stroke-linecap",t.strokeLinecap),_e(e,"stroke-miterlimit",t.strokeMiterlimit),_e(e,"stroke-dasharray",t.strokeDasharray),_e(e,"stroke-dashoffset",t.strokeDashoffset),_e(e,"shape-rendering",t.shapeRendering),_e(e,"filter",t.imageFilter),_e(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;_e(e,"pointer-events",i)}function $n(e,t){LA(e,"mix-blend-mode",t.mixBlendMode),_e(e,"opacity",t.opacity)}function BA(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(Xr.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(Xr.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function _e(e,t,n){n!=null&&e.attr(t,n)}function LA(e,t,n){n!=null&&e.style(t,n)}function Vt(e,t,{x:n,y:r},i=Qe,a=Qe){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function qe(e,t){if((e=Ke(e))!==t)return e}function Ei(e,t){if((e=Pe(e))!==t)return e}const FA=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function gf(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!FA.test(e))throw new Error(`invalid class name: ${e}`);return e}function yf(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function iu({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function GA(e,t,n={}){let r=.5-Qe,i=.5+Qe,a=.5+Qe,o=.5-Qe;for(const{marginTop:p,marginRight:y,marginBottom:_,marginLeft:g}of t)p>r&&(r=p),y>i&&(i=y),_>a&&(a=_),g>o&&(o=g);let{margin:s,marginTop:u=s!==void 0?s:r,marginRight:c=s!==void 0?s:i,marginBottom:l=s!==void 0?s:a,marginLeft:h=s!==void 0?s:o}=n;u=+u,c=+c,l=+l,h=+h;let{width:f=640,height:d=UA(e,n,{width:f,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,u-r+l-a)}=n;f=+f,d=+d;const m={width:f,height:d,marginTop:u,marginRight:c,marginBottom:l,marginLeft:h};if(e.fx||e.fy){let{margin:p,marginTop:y=p!==void 0?p:u,marginRight:_=p!==void 0?p:c,marginBottom:g=p!==void 0?p:l,marginLeft:M=p!==void 0?p:h}=n.facet??{};y=+y,_=+_,g=+g,M=+M,m.facet={marginTop:y,marginRight:_,marginBottom:g,marginLeft:M}}return m}function UA({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:s,marginRightDefault:u,marginBottomDefault:c,marginLeftDefault:l}){const h=n?n.scale.domain().length:1,f=RS(i);if(f){const m=r?r.scale.domain().length:1,p=(1.1*h-.1)/(1.1*m-.1)*f,y=Math.max(.1,Math.min(10,p));return Math.round((o-l-u)*y+s+c)}const d=t?xr(t)?t.scale.domain().length:Math.max(7,17/h):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=Bd("y",t)/(Bd("x",e)*a),p=r?r.scale.bandwidth():1,y=n?n.scale.bandwidth():1,_=p*(o-l-u)-e.insetLeft-e.insetRight;return(m*_+t.insetTop+t.insetBottom)/y+s+c}return!!(t||n)*Math.max(1,Math.min(60,d*h))*20+!!r*30+60}function Bd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const s=t.scale.exponent();i=u=>Math.pow(u,s);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=ut(r);return Math.abs(i(o)-i(a))}function qA(e,t){const{fx:n,fy:r}=ic(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?i7(i,a).map(([o,s],u)=>({x:o,y:s,i:u})):i?i.map((o,s)=>({x:o,i:s})):a?a.map((o,s)=>({y:o,i:s})):void 0}function HA(e,{x:t,y:n}){return t&&(t=ac(t)),n&&(n=ac(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function _f(e,{fx:t,fy:n}){const r=Nn(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Or(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Or(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Or(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function zA(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function VA(e){const t=[],n=new Uint32Array(Fn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const jA=new Map([["top",zu],["right",Yu],["bottom",Vu],["left",ju],["top-left",fo(zu,ju)],["top-right",fo(zu,Yu)],["bottom-left",fo(Vu,ju)],["bottom-right",fo(Vu,Yu)],["top-empty",XA],["right-empty",JA],["bottom-empty",KA],["left-empty",ZA],["empty",QA]]);function YA(e){if(e==null)return null;const t=jA.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Ld=new WeakMap;function ac(e){let t=Ld.get(e);return t||Ld.set(e,t=new cr(Ge(e,(n,r)=>[n,r]))),t}function Xn(e,t){return ac(e).get(t)}function WA(e,t,n){return t=uo(t),n=uo(n),e.find(r=>Object.is(uo(r.x),t)&&Object.is(uo(r.y),n))}function au(e,t,n){var r;return(r=WA(e,t,n))==null?void 0:r.empty}function zu(e,{y:t},{y:n}){return t?Xn(t,n)===0:!0}function Vu(e,{y:t},{y:n}){return t?Xn(t,n)===t.length-1:!0}function ju(e,{x:t},{x:n}){return t?Xn(t,n)===0:!0}function Yu(e,{x:t},{x:n}){return t?Xn(t,n)===t.length-1:!0}function XA(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=Xn(t,r);if(a>0)return au(e,n,t[a-1])}function KA(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=Xn(t,r);if(a<t.length-1)return au(e,n,t[a+1])}function ZA(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=Xn(t,n);if(a>0)return au(e,t[a-1],r)}function JA(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=Xn(t,n);if(a<t.length-1)return au(e,t[a+1],r)}function QA(e,t,{empty:n}){return n}function fo(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function Wu(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class St{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:s,fy:u,sort:c,dx:l=0,dy:h=0,margin:f=0,marginTop:d=f,marginRight:m=f,marginBottom:p=f,marginLeft:y=f,clip:_=i==null?void 0:i.clip,channels:g,tip:M,render:b}=r;if(this.data=t,this.sort=ha(c)?c:null,this.initializer=bs(r).initializer,this.transform=this.initializer?r.transform:cf(r).transform,a===null||a===!1?this.facet=null:(this.facet=zt(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Po&&typeof s=="string"?[s]:s,this.fy=t===Po&&typeof u=="string"?[u]:u),this.facetAnchor=YA(o),n=Fg(n),g!==void 0&&(n={...eP(g),...n}),i!==void 0&&(n={...IA(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,w])=>{if(af(w.value)){const{value:S,label:E=w.label,scale:N=w.scale}=w.value;w={...w,label:E,scale:N,value:S}}if(t===Po&&typeof w.value=="string"){const{value:S}=w;w={...w,value:[S]}}return[x,w]}).filter(([x,{value:w,optional:S}])=>{if(w!=null)return!0;if(S)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+l,this.dy=+h,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+y,this.clip=Gg(_),this.tip=tP(M),this.facet==="super"){if(s||u)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:w}=n[x];if(!(w!=="x"&&w!=="y"))throw new Error("super-faceting cannot use x or y")}}b!=null&&(this.render=M2(b,this.render))}initialize(t,n,r){let i=ht(this.data);t===void 0&&i!=null&&(t=[Nn(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=ht(i)),t!==void 0&&(t.original=a);const o=xS(this.channels,i);return this.sort!=null&&SS(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=yr}=n[i];if(a!==null){const o=r[i];t=t.filter(s=>a(o[s]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&IS(i,a,n,r.projection)}}scale(t,n,r){const i=ES(t,n);return r.projection&&this.project(t,i,r),i}}function v2(...e){return e.plot=St.prototype.plot,e}function M2(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,s){return e.call(this,n,r,i,a,o,(u,c,l,h,f)=>t.call(this,u,c,l,h,f,s))}}function eP(e){return Object.fromEntries(Object.entries(Fg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Qs(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function tP(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?zt(e,"tip",["x","y","xy"]):e}function ou(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:Yn(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Fd=new WeakMap;function wf(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:s,render:u,...c}={}){return o=+o,i!=null&&(n??(n=null),s={...s,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),s={...s,py:{value:a,scale:"y"}}),{x:n,y:r,channels:s,...c,render:M2(function(l,h,f,d,m,p){m={...m,pointerSticky:!1};const y=m.ownerSVGElement,{data:_}=m.getMarkState(this);let g=Fd.get(y);g||Fd.set(y,g={sticky:!1,roots:[],renders:[]});let M=g.renders.push(I)-1;const{x:b,y:x,fx:w,fy:S}=h;let E=w?w(l.fx)-d.marginLeft:0,N=S?S(l.fy)-d.marginTop:0;b!=null&&b.bandwidth&&(E+=b.bandwidth()/2),x!=null&&x.bandwidth&&(N+=x.bandwidth()/2);const F=l.fi!=null;let P;if(F){let K=g.facetStates;K||(g.facetStates=K=new Map),P=K.get(this),P||K.set(this,P=new Map)}const[L,j]=iu(this,d),{px:z,py:A}=f,$=z?K=>z[K]:x2(f,L),U=A?K=>A[K]:E2(f,j);let W,G,H,X;function Y(K,V){if(F)if(X&&(X=cancelAnimationFrame(X)),K==null)P.delete(l.fi);else{P.set(l.fi,V),X=requestAnimationFrame(()=>{X=null;for(const[k,O]of P)if(O<V||O===V&&k<l.fi){K=null;break}I(K)});return}I(K)}function I(K){if(W===K&&H===g.sticky)return;W=K,H=m.pointerSticky=g.sticky;const V=W==null?[]:[W];F&&(V.fx=l.fx,V.fy=l.fy,V.fi=l.fi);const k=p(V,h,f,d,m);if(G){if(F){const O=G.parentNode,q=G.getAttribute("transform"),D=k.getAttribute("transform");q?k.setAttribute("transform",q):k.removeAttribute("transform"),D?O.setAttribute("transform",D):O.removeAttribute("transform"),k.removeAttribute("aria-label"),k.removeAttribute("aria-description"),k.removeAttribute("aria-hidden")}G.replaceWith(k)}return g.roots[M]=G=k,W==null&&(P==null?void 0:P.size)>1||m.dispatchValue(W==null?null:_[W]),k}function ee(K){if(g.sticky||K.pointerType==="mouse"&&K.buttons===1)return;let[V,k]=m4(K);V-=E,k-=N;const O=V<d.marginLeft||V>d.width-d.marginRight?1:e,q=k<d.marginTop||k>d.height-d.marginBottom?1:t;let D=null,se=o*o;for(const ae of l){const ie=O*($(ae)-V),ue=q*(U(ae)-k),oe=ie*ie+ue*ue;oe<=se&&(D=ae,se=oe)}if(D!=null&&(e!==1||t!==1)){const ae=$(D)-V,ie=U(D)-k;se=ae*ae+ie*ie}Y(D,se)}function te(K){K.pointerType==="mouse"&&W!=null&&(g.sticky&&g.roots.some(V=>V==null?void 0:V.contains(K.target))||(g.sticky?(g.sticky=!1,g.renders.forEach(V=>V(null))):(g.sticky=!0,I(W)),K.stopImmediatePropagation()))}function re(K){K.pointerType==="mouse"&&(g.sticky||Y(null))}return y.addEventListener("pointerenter",ee),y.addEventListener("pointermove",ee),y.addEventListener("pointerdown",te),y.addEventListener("pointerleave",re),I(null)},u)}}function nP(e){return wf(1,1,e)}function rP(e){return wf(1,.01,e)}function Gd(e){return wf(.01,1,e)}function x2({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function E2({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function S2(e){return xr(e)&&e.interval===void 0?void 0:"tabular-nums"}function iP(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:s=0,marginBottom:u=16+r,marginLeft:c=0,style:l,ticks:h=(i-c-s)/64,tickFormat:f,fontVariant:d=S2(e),round:m=!0,opacity:p,className:y}=t;const _=hf(t);y=gf(y),p=st(p)[1],f===null&&(f=()=>null);const g=ze("svg",_).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(L=>L.append("style").text(`:where(.${y}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${y}-ramp text) {
  white-space: pre;
}`)).call(yf,l);let M=L=>L.selectAll(".tick line").attr("y1",o+u-a),b;const x=m?(L,j)=>L.rangeRound(j):(L,j)=>L.range(j),{type:w,domain:S,range:E,interpolate:N,scale:F,pivot:P}=e;if(N){const L=E===void 0?N:Rs(N.length===1?pf(N):N,E);b=x(F.copy(),Rt(Ve(c,i-s),Math.min(S.length+(P!==void 0),E===void 0?1/0:E.length)));const j=256,z=_.document.createElement("canvas");z.width=j,z.height=1;const A=z.getContext("2d");for(let $=0,U=j-1;$<j;++$)A.fillStyle=L($/U),A.fillRect($,0,1,1);g.append("image").attr("opacity",p).attr("x",c).attr("y",o).attr("width",i-c-s).attr("height",a-o-u).attr("preserveAspectRatio","none").attr("xlink:href",z.toDataURL())}else if(w==="threshold"){const L=S,j=f===void 0?z=>z:typeof f=="string"?li(f):f;b=x(qc().domain([-1,E.length-1]),[c,i-s]),g.append("g").attr("fill-opacity",p).selectAll().data(E).enter().append("rect").attr("x",(z,A)=>b(A-1)).attr("y",o).attr("width",(z,A)=>b(A)-b(A-1)).attr("height",a-o-u).attr("fill",z=>z),h=Ge(L,(z,A)=>A),f=z=>j(L[z],z)}else b=x(Us().domain(S),[c,i-s]),g.append("g").attr("fill-opacity",p).selectAll().data(S).enter().append("rect").attr("x",b).attr("y",o).attr("width",Math.max(0,b.bandwidth()-1)).attr("height",a-o-u).attr("fill",F),M=()=>{};return g.append("g").attr("transform",`translate(0,${a-u})`).call($7(b).ticks(Array.isArray(h)?null:h,typeof f=="string"?f:void 0).tickFormat(typeof f=="function"?f:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",qe(d,"normal")).call(M).call(L=>L.select(".domain").remove()),n!==void 0&&g.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),g.node()}const A2=Math.PI/180;function su(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=Xu(n),e.markerMid=Xu(r),e.markerEnd=Xu(i)}function Xu(e){if(e==null||e===!1)return null;if(e===!0)return qd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Ud("auto");case"arrow-reverse":return Ud("auto-start-reverse");case"dot":return aP;case"circle":case"circle-fill":return qd;case"circle-stroke":return oP;case"tick":return Ku("auto");case"tick-x":return Ku(90);case"tick-y":return Ku(0)}throw new Error(`invalid marker: ${e}`)}function Ud(e){return(t,n)=>ze("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function aP(e,t){return ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function qd(e,t){return ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function oP(e,t){return ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Ku(e){return(t,n)=>ze("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let sP=0;function uu(e,t,{stroke:n},r){return uP(e,t,n&&(i=>n[i]),r)}function uP(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const s=new Map;function u(c){return function(l){const h=a(l);let f=s.get(c);f||s.set(c,f=new Map);let d=f.get(h);if(!d){const m=this.parentNode.insertBefore(c(h,o),this),p=`plot-marker-${++sP}`;m.setAttribute("id",p),f.set(h,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",u(t)),n&&e.attr("marker-mid",u(n)),r&&e.attr("marker-end",u(r))}function P2({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=C2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function N2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=C2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function C2(e,t,n){return e===void 0&&t===void 0&&n===void 0?Qe?[1,0]:[.5,.5]:[t,n]}function T2(e,{interval:t}){return e={...Qs(e)},e.interval=sf(e.interval===void 0?t:e.interval),e}function $2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:s,interval:u}=T2(i,n);if(s==null||u==null&&!r)return n;const c=fi(i);if(u==null){let d;const m={transform:p=>d||(d=Le(p,s)),label:c};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let l,h;function f(d){return h!==void 0&&d===l?h:h=Ge(Le(l=d,s),m=>u.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:f,label:c}:a,[`${e}2`]:o===void 0?{transform:d=>f(d).map(m=>u.offset(m)),label:c}:o})}function k2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=T2(r,n);return i==null||a==null?n:t({...n,[e]:{label:fi(r),transform:o=>{const s=Ge(Le(o,i),c=>a.floor(c)),u=s.map(c=>a.offset(c));return s.map(Et(s)?(c,l)=>c==null||isNaN(c=+c)||(l=u[l],l==null)||isNaN(l=+l)?void 0:new Date((c+l)/2):(c,l)=>c==null||(l=u[l],l==null)?NaN:(+c+ +l)/2)}}})}function I2(e={}){return $2("x",P2,e)}function D2(e={}){return $2("y",N2,e)}function lP(e={}){return k2("x",P2,e)}function cP(e={}){return k2("y",N2,e)}const R2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class fP extends St{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:s=o,insetBottom:u=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},ou(n,"x"),R2),this.insetTop=Pe(s),this.insetBottom=Pe(u),su(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y1:c,y2:l}=r,{width:h,height:f,marginTop:d,marginRight:m,marginLeft:p,marginBottom:y}=i,{insetTop:_,insetBottom:g}=this;return ze("svg:g",a).call(Tn,this,i,a).call(Vt,this,{x:u&&o},Qe,0).call(M=>M.selectAll().data(t).enter().append("line").call($n,this).attr("x1",u?b=>u[b]:(p+h-m)/2).attr("x2",u?b=>u[b]:(p+h-m)/2).attr("y1",c&&!qn(s)?b=>c[b]+_:d+_).attr("y2",l&&!qn(s)?s.bandwidth?b=>l[b]+s.bandwidth()-g:b=>l[b]-g:f-y-g).call(Wn,this,r).call(uu,this,r,a)).node()}}class hP extends St{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:s=o,insetLeft:u=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},ou(n,"y"),R2),this.insetRight=Pe(s),this.insetLeft=Pe(u),su(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{y:u,x1:c,x2:l}=r,{width:h,height:f,marginTop:d,marginRight:m,marginLeft:p,marginBottom:y}=i,{insetLeft:_,insetRight:g}=this;return ze("svg:g",a).call(Tn,this,i,a).call(Vt,this,{y:u&&s},0,Qe).call(M=>M.selectAll().data(t).enter().append("line").call($n,this).attr("x1",c&&!qn(o)?b=>c[b]+_:p+_).attr("x2",l&&!qn(o)?o.bandwidth?b=>l[b]+o.bandwidth()-g:b=>l[b]-g:h-m-g).attr("y1",u?b=>u[b]:(d+f-y)/2).attr("y2",u?b=>u[b]:(d+f-y)/2).call(Wn,this,r).call(uu,this,r,a)).node()}}function gs(e,t){let{x:n=Ye,y:r,y1:i,y2:a,...o}=D2(t);return[i,a]=O2(r,i,a),new fP(e,{...o,x:n,y1:i,y2:a})}function hi(e,t){let{y:n=Ye,x:r,x1:i,x2:a,...o}=I2(t);return[i,a]=O2(r,i,a),new hP(e,{...o,y:n,x1:i,x2:a})}function O2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function B2(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const dP={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},L2="";class vf extends St{constructor(t,n={}){const{x:r,y:i,text:a=Mr(t)&&Lg(t)?Ye:nf,frameAnchor:o,textAnchor:s=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:u=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:l=1/0,textOverflow:h,monospace:f,fontFamily:d=f?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:y,fontWeight:_,rotate:g}=n,[M,b]=st(g,0),[x,w]=_P(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:qE(M),optional:!0},text:{value:a,filter:_g,optional:!0}},n,dP),this.rotate=b,this.textAnchor=qe(s,"middle"),this.lineAnchor=zt(u,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+l,this.textOverflow=F2(h),this.monospace=!!f,this.fontFamily=Ke(d),this.fontSize=w,this.fontStyle=Ke(p),this.fontVariant=Ke(y),this.fontWeight=Ke(_),this.frameAnchor=uf(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${l}`);this.splitLines=U2(this),this.clipLine=q2(this)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:c,rotate:l,text:h,title:f,fontSize:d}=r,{rotate:m}=this,[p,y]=iu(this,i);return ze("svg:g",a).call(Tn,this,i,a).call(G2,this,h,i).call(Vt,this,{x:u&&o,y:c&&s}).call(_=>_.selectAll().data(t).enter().append("text").call($n,this).call(mP,this,h,f).attr("transform",B2`translate(${u?g=>u[g]:p},${c?g=>c[g]:y})${l?g=>` rotate(${l[g]})`:m?` rotate(${m})`:""}`).call(_e,"font-size",d&&(g=>d[g])).call(Wn,this,r)).node()}}function F2(e){return e==null?null:zt(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function mP(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:s,clipLine:u}=t;e.each(function(c){const l=s(ai(n[c])??"").map(u),h=l.length,f=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let m=0;m<h;++m){if(++d,!l[m])continue;const p=this.ownerDocument.createElementNS(Xr.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(f+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=l[m],this.appendChild(p),d=0}}else f&&this.setAttribute("y",`${f*a}em`),this.textContent=l[0];if(o&&!r&&l[0]!==n[c]){const d=this.ownerDocument.createElementNS(Xr.svg,"title");d.textContent=n[c],this.appendChild(d)}})}function ys(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Js(t,n)),new vf(e,{...r,x:t,y:n})}function pP(e,{x:t=Ye,...n}={}){return new vf(e,cP({...n,x:t}))}function bP(e,{y:t=Ye,...n}={}){return new vf(e,lP({...n,y:t}))}function G2(e,t,n){_e(e,"text-anchor",t.textAnchor),_e(e,"font-family",t.fontFamily),_e(e,"font-size",t.fontSize),_e(e,"font-style",t.fontStyle),_e(e,"font-variant",t.fontVariant===void 0?gP(n):t.fontVariant),_e(e,"font-weight",t.fontWeight)}function gP(e){return e&&(VE(e)||Et(e))?"tabular-nums":void 0}const yP=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function _P(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),yP.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function wP(e,t,n){const r=[];let i,a=0;for(const[o,s,u]of vP(e)){if(i===void 0&&(i=o),a>i&&n(e,i,s)>t&&(r.push(e.slice(i,a)+(e[a-1]===L2?"-":"")),i=o),u){r.push(e.slice(i,s)),i=void 0;continue}a=s}return r}function*vP(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case L2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Hd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Mf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=di(e,i))r+=Hd[e[i]]??(z2(e,i)?120:Hd.e);return r}function xf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=di(e,i))r+=z2(e,i)?126:63;return r}function U2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?xf:Mf,i=t*100;return a=>wP(a,i,r)}function q2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?xf:Mf,i=t*100;switch(n){case"clip-start":return a=>Vd(a,i,r,"");case"clip-end":return a=>zd(a,i,r,"");case"ellipsis-start":return a=>Vd(a,i,r,Fr);case"ellipsis-middle":return a=>MP(a,i,r,Fr);case"ellipsis-end":return a=>zd(a,i,r,Fr)}}const Fr="";function oi(e,t,n,r){const i=[];let a=0;for(let o=0,s=0,u=e.length;o<u;o=s){s=di(e,o);const c=n(e,o,s);if(a+c>t){for(a+=r;a>t&&o>0;)s=o,o=i.pop(),a-=n(e,o,s);return[o,t-a]}a+=c,i.push(o)}return[-1,0]}function zd(e,t,n,r){e=e.trim();const i=n(r),[a]=oi(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function MP(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,s]=oi(e,t/2,n,a),[u]=oi(e,i-t/2-s+a,n,-a);return u<0?r:e.slice(0,o).trimEnd()+r+e.slice(di(e,u)).trimStart()}function Vd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=oi(e,i-t+a,n,-a);return o<0?r:r+e.slice(di(e,o)).trimStart()}const oc=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,jd=new RegExp("\\p{Extended_Pictographic}","uy");function di(e,t){return t+=xP(e,t)?2:1,SP(e,t)&&(t=oc.lastIndex),EP(e,t)?di(e,t+1):t}function H2(e,t){return e.charCodeAt(t)<128}function xP(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function EP(e,t){return e.charCodeAt(t)===8205}function SP(e,t){return H2(e,t)?!1:(oc.lastIndex=t,oc.test(e))}function z2(e,t){return H2(e,t)?!1:(jd.lastIndex=t,jd.test(e))}const AP={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},V2=3.5,PP=V2*5,j2={draw(e,t,n){const r=t*n/PP;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},NP={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},CP=new Map([["arrow",j2],["spike",NP]]);function TP(e){return e&&typeof e.draw=="function"}function $P(e){if(TP(e))return e;const t=CP.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class Y2 extends St{constructor(t,n={}){const{x:r,y:i,r:a=V2,length:o,rotate:s,shape:u=j2,anchor:c="middle",frameAnchor:l}=n,[h,f]=st(o,12),[d,m]=st(s,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,AP),this.r=+a,this.length=f,this.rotate=m,this.shape=$P(u),this.anchor=zt(c,"anchor",["start","middle","end"]),this.frameAnchor=uf(l)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:c,length:l,rotate:h}=r,{length:f,rotate:d,anchor:m,shape:p,r:y}=this,[_,g]=iu(this,i);return ze("svg:g",a).call(Tn,this,i,a).call(Vt,this,{x:u&&o,y:c&&s}).call(M=>M.selectAll().data(t).enter().append("path").call($n,this).attr("transform",B2`translate(${u?b=>u[b]:_},${c?b=>c[b]:g})${h?b=>` rotate(${h[b]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?l?b=>` translate(0,${l[b]})`:` translate(0,${f})`:l?b=>` translate(0,${l[b]/2})`:` translate(0,${f/2})`}`).attr("d",l?b=>{const x=Yo();return p.draw(x,l[b],y),x}:(()=>{const b=Yo();return p.draw(b,f,y),b})()).call(Wn,this,r)).node()}}function kP(e,t={}){const{x:n=Ye,...r}=t;return new Y2(e,{...r,x:n})}function IP(e,t={}){const{y:n=Ye,...r}=t;return new Y2(e,{...r,y:n})}function Kn(e,t){return arguments.length<2&&!Mr(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function lu({anchor:e}={},t){return e===void 0?t[0]:zt(e,"anchor",t)}function W2(e){return lu(e,["left","right"])}function X2(e){return lu(e,["right","left"])}function K2(e){return lu(e,["bottom","top"])}function Z2(e){return lu(e,["top","bottom"])}function J2(){const[e,t]=Kn(...arguments);return ey("y",W2(t),e,t)}function DP(){const[e,t]=Kn(...arguments);return ey("fy",X2(t),e,t)}function Q2(){const[e,t]=Kn(...arguments);return ty("x",K2(t),e,t)}function RP(){const[e,t]=Kn(...arguments);return ty("fx",Z2(t),e,t)}function ey(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:u=r,fillOpacity:c=i,textAnchor:l,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:y,x:_,margin:g,marginTop:M=g===void 0?20:g,marginRight:b=g===void 0?t==="right"?40:0:g,marginBottom:x=g===void 0?20:g,marginLeft:w=g===void 0?t==="left"?40:0:g,label:S,labelAnchor:E,labelArrow:N,labelOffset:F,...P}){return m=Pe(m),p=Pe(p),y=Pe(y),E!==void 0&&(E=zt(E,"labelAnchor",["center","top","bottom"])),N=ly(N),v2(m&&!Ze(a)?OP(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:m,tickPadding:p,tickRotate:y,x:_,...P}):null,Ze(u)?null:LP(e,t,n,{fill:u,fillOpacity:c,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:l,tickSize:m,tickPadding:p,tickRotate:y,x:_,marginTop:M,marginRight:b,marginBottom:x,marginLeft:w,...P}),!Ze(u)&&S!==null?ys([],ay({fill:u,fillOpacity:c,...P},function(L,j,z,A,$){const U=A[e],{marginTop:W,marginRight:G,marginBottom:H,marginLeft:X}=e==="y"&&$.inset||$,Y=E??(U.bandwidth?"center":"top"),I=F??(t==="right"?G:X)-3;return Y==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=Y,this.frameAnchor=`${Y}-${t}`,this.rotate=0),this.dy=Y==="top"?3-W:Y==="bottom"?H-3:0,this.dx=t==="right"?I:-I,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[uy(e,U,{anchor:t,label:S,labelAnchor:Y,labelArrow:N})]}}}})):null)}function ty(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:u=r,fillOpacity:c=i,textAnchor:l,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:y,y:_,margin:g,marginTop:M=g===void 0?t==="top"?30:0:g,marginRight:b=g===void 0?20:g,marginBottom:x=g===void 0?t==="bottom"?30:0:g,marginLeft:w=g===void 0?20:g,label:S,labelAnchor:E,labelArrow:N,labelOffset:F,...P}){return m=Pe(m),p=Pe(p),y=Pe(y),E!==void 0&&(E=zt(E,"labelAnchor",["center","left","right"])),N=ly(N),v2(m&&!Ze(a)?BP(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:m,tickPadding:p,tickRotate:y,y:_,...P}):null,Ze(u)?null:FP(e,t,n,{fill:u,fillOpacity:c,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:l,tickSize:m,tickPadding:p,tickRotate:y,y:_,marginTop:M,marginRight:b,marginBottom:x,marginLeft:w,...P}),!Ze(u)&&S!==null?ys([],ay({fill:u,fillOpacity:c,...P},function(L,j,z,A,$){const U=A[e],{marginTop:W,marginRight:G,marginBottom:H,marginLeft:X}=e==="x"&&$.inset||$,Y=E??(U.bandwidth?"center":"right"),I=F??(t==="top"?W:H)-3;return Y==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${Y}`,this.textAnchor=Y==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-I:I,this.dx=Y==="right"?G-3:Y==="left"?3-X:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[uy(e,U,{anchor:t,label:S,labelAnchor:Y,labelArrow:N})]}}}})):null)}function OP(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:c=0,insetLeft:l=c,insetRight:h=c,dx:f=0,y:d=e==="y"?void 0:null,...m}){return mi(IP,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:s,y:d,...m,dx:t==="left"?+f-Qe+ +l:+f+Qe-h,anchor:"start",length:u,shape:t==="left"?YP:WP})}function BP(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:c=0,insetTop:l=c,insetBottom:h=c,dy:f=0,x:d=e==="x"?void 0:null,...m}){return mi(kP,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:s,x:d,...m,dy:t==="bottom"?+f-Qe-h:+f+Qe+ +l,anchor:"start",length:u,shape:t==="bottom"?VP:jP})}function LP(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*A2):0),text:u,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:l=o>60?"top":o<-60?"bottom":"middle",fontVariant:h,inset:f=0,insetLeft:d=f,insetRight:m=f,dx:p=0,y=e==="y"?void 0:null,..._}){return mi(bP,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:u,textAnchor:c,lineAnchor:l,fontVariant:h,rotate:o,y,..._,dx:t==="left"?+p-a-s+ +d:+p+ +a+ +s-m},function(g,M,b,x,w){h===void 0&&(this.fontVariant=sy(g)),u===void 0&&(w.text=oy(g,M,b,x,t))})}function FP(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*A2):0),text:u,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:l=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:h,inset:f=0,insetTop:d=f,insetBottom:m=f,dy:p=0,x:y=e==="x"?void 0:null,..._}){return mi(pP,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:u===void 0?null:u,textAnchor:c,lineAnchor:l,fontVariant:h,rotate:o,x:y,..._,dy:t==="bottom"?+p+ +a+ +s-m:+p-a-s+ +d},function(g,M,b,x,w){h===void 0&&(this.fontVariant=sy(g)),u===void 0&&(w.text=oy(g,M,b,x,t))})}function GP(){const[e,t]=Kn(...arguments);return ny("y",W2(t),e,t)}function UP(){const[e,t]=Kn(...arguments);return ny("fy",X2(t),e,t)}function qP(){const[e,t]=Kn(...arguments);return ry("x",K2(t),e,t)}function HP(){const[e,t]=Kn(...arguments);return ry("fx",Z2(t),e,t)}function ny(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...s}){return mi(hi,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{y:r,x1:a,x2:o,...iy(s)})}function ry(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...s}){return mi(gs,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{x:r,y1:a,y2:o,...iy(s)})}function iy({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function ay({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:u,shapeRendering:c,clip:l=!1},h){return[,e]=Pn(e),[,t]=st(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:u,shapeRendering:c,clip:l,initializer:h}}function mi(e,t,n,r,i,a){let o;function s(l,h,f,d,m,p){const y=l==null&&(t==="fx"||t==="fy"),{[t]:_}=d;if(!_)throw new Error(`missing scale: ${t}`);const g=_.domain();let{interval:M,ticks:b,tickFormat:x,tickSpacing:w=t==="x"?80:35}=i;if(typeof b=="string"&&cy(_)&&(M=b,b=void 0),b===void 0&&(b=Ua(M,_.type)??zP(_,w)),l==null){if(Mr(b))l=ht(b);else if(UE(b))l=Zu(b,...ut(g));else if(_.interval){let E=_.interval;if(_.ticks){const[N,F]=ut(g),P=(F-N)/E[Fa];E=md(E,P/b)??E,l=Zu(E,N,F)}else{l=g;const N=l.length;E=md(E,N/b)??E,E!==_.interval&&(l=Zu(E,...ut(l)))}if(E===_.interval){const N=Math.round(l.length/b);N>1&&(l=l.filter((F,P)=>P%N===0))}}else _.ticks?l=_.ticks(b):l=g;if(!_.ticks&&l.length&&l!==g){const E=new Cs(g);l=l.filter(N=>E.has(N)),l.length||or(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[Nn(l)]:o[t]={scale:t,value:Ye}}a==null||a.call(this,_,l,b,x,o);const S=Object.fromEntries(Object.entries(o).map(([E,N])=>[E,{...N,value:Le(l,N.value)}]));return y&&(h=p.filterFacets(l,S)),{data:l,facets:h,channels:S}}const u=bs(i).initializer,c=e(n,bs({...i,initializer:s},u));return n==null?(o=c.channels,c.channels={}):o={},r!==void 0&&Object.assign(c,r),c.clip===void 0&&(c.clip=!1),c}function zP(e,t){const[n,r]=ut(e.range());return(r-n)/t}function oy(e,t,n,r,i){return{value:Ef(e,t,n,r,i)}}function Ef(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&Et(t)?NE(e.type,t,i)??ai:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?ai:typeof r=="string"?(Et(e.domain())?La:li)(r):Ga(r)}function Zu(e,t,n){return e.range(t,e.offset(e.floor(n)))}const VP={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},jP={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},YP={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},WP={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function sy(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function uy(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&cy(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!a)return r;if(a===!0){const o=_A(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function ly(e="auto"){return Ze(e)?!1:typeof e=="boolean"?e:zt(e,"labelArrow",["auto","up","right","down","left"])}function cy(e){return Et(e.domain())}function Yd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function XP(e,{opacity:t,...n}={}){if(!xr(e)&&!w2(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return fy(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",st(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function KP(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(l=>(l=e.hint)==null?void 0:l.stroke)()!==void 0?e.hint.stroke:Ze(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...s}={},u){const[h,f]=Pn(t),[d,m]=Pn(r),p=Yd(u,h),y=Yd(u,d),_=o*o*Math.PI;return n=st(n)[1],i=st(i)[1],a=st(a)[1],fy(e,s,(g,M,b,x)=>g.append("svg").attr("viewBox","-8 -8 16 16").attr("width",b).attr("height",x).attr("fill",h==="color"?w=>p.scale(w):f).attr("fill-opacity",n).attr("stroke",d==="color"?w=>y.scale(w):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",w=>{const S=Yo();return e.scale(w).draw(S,_),S}))}function fy(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=S2(e),swatchSize:o=15,swatchWidth:s=o,swatchHeight:u=o,marginLeft:c=0,className:l,style:h,width:f}=t;const d=hf(t);l=gf(l),i=Ef(e.scale,e.domain,void 0,i);const m=ze("div",d).attr("class",`${l}-swatches ${l}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${l}-swatches-columns .${l}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${l}-swatches-columns .${l}-swatch::before) {
  flex-shrink: 0;
}
:where(.${l}-swatches-columns .${l}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${l}-swatch`).call(n,e,s,u).call(y=>y.append("div").attr("class",`${l}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${l}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${l}-swatches-wrap .${l}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${l}-swatch`).call(n,e,s,u).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(y=>y.insert("style","*").text(`:where(.${l}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${l}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",c?`${+c}px`:null).style("width",f===void 0?null:`${+f}px`).style("font-variant",qe(a,"normal")).call(yf,h).node()}const sc=new Map([["symbol",KP],["color",dy],["opacity",JP]]);function ZP(e,t,n={}){return(r,i)=>{if(!sc.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return sc.get(r)(e[r],hy(t,n[r],i),a=>e[a])}}function hy({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return XE(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function dy(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return XP(e,n);case"ramp":return iP(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function JP({type:e,interpolate:t,...n},{legend:r=!0,color:i=Gn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return dy({type:e,...n,interpolate:QP(i)},{legend:r,...a})}function QP(e){const{r:t,g:n,b:r}=Gn(e)||Gn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function eN(e,t,n){const r=[];for(const[i,a]of sc){const o=n[i];if(o!=null&&o.legend&&i in e){const s=a(e[i],hy(t,e[i],o),u=>e[u]);s!=null&&r.push(s)}}return r}const tN={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},nN={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class rN extends St{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:s=r,rx:u,ry:c}=t;super(Po,void 0,t,n==null?tN:nN),this.anchor=$g(n,"anchor",["top","right","bottom","left"]),this.insetTop=Pe(i),this.insetRight=Pe(a),this.insetBottom=Pe(o),this.insetLeft=Pe(s),this.rx=Pe(u),this.ry=Pe(c)}render(t,n,r,i,a){const{marginTop:o,marginRight:s,marginBottom:u,marginLeft:c,width:l,height:h}=i,{anchor:f,insetTop:d,insetRight:m,insetBottom:p,insetLeft:y,rx:_,ry:g}=this,M=c+y,b=l-s-m,x=o+d,w=h-u-p;return ze(f?"svg:line":"svg:rect",a).datum(0).call(Tn,this,i,a).call($n,this).call(Wn,this,r).call(Vt,this,{}).call(f==="left"?S=>S.attr("x1",M).attr("x2",M).attr("y1",x).attr("y2",w):f==="right"?S=>S.attr("x1",b).attr("x2",b).attr("y1",x).attr("y2",w):f==="top"?S=>S.attr("x1",M).attr("x2",b).attr("y1",x).attr("y2",x):f==="bottom"?S=>S.attr("x1",M).attr("x2",b).attr("y1",w).attr("y2",w):S=>S.attr("x",M).attr("y",x).attr("width",b-M).attr("height",w-x).attr("rx",_).attr("ry",g)).node()}}function iN(e){return new rN(e)}const Ju={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},aN=new Set(["geometry","href","src","ariaLabel","scales"]);class oN extends St{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Mr(t)&&Lg(t)&&(n={...n,title:Ye});const{x:r,y:i,x1:a,x2:o,y1:s,y2:u,anchor:c,preferredAnchor:l="bottom",monospace:h,fontFamily:f=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:y,lineHeight:_=1,lineWidth:g=20,frameAnchor:M,format:b,textAnchor:x="start",textOverflow:w,textPadding:S=8,title:E,pointerSize:N=12,pathFilter:F="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:s!=null&&u!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:s,scale:"y",optional:u==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:u,scale:"y",optional:s==null},title:{value:E,optional:!0}},n,Ju),this.anchor=Ql(c,"anchor"),this.preferredAnchor=Ql(l,"preferredAnchor"),this.frameAnchor=uf(M),this.textAnchor=qe(x,"middle"),this.textPadding=+S,this.pointerSize=+N,this.pathFilter=Ke(F),this.lineHeight=+_,this.lineWidth=+g,this.textOverflow=F2(w),this.monospace=!!h,this.fontFamily=Ke(f),this.fontSize=Pe(d),this.fontStyle=Ke(m),this.fontVariant=Ke(p),this.fontWeight=Ke(y);for(const P in Ju)P in this.channels&&(this[P]=Ju[P]);this.splitLines=U2(this),this.clipLine=q2(this),this.format={...b}}render(t,n,r,i,a){const o=this,{x:s,y:u,fx:c,fy:l}=n,{ownerSVGElement:h,document:f}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:y}=this,{textPadding:_,pointerSize:g,pathFilter:M}=this,{marginTop:b,marginLeft:x}=i,{x1:w,y1:S,x2:E,y2:N,x:F=w??E,y:P=S??N}=r,L=c?c(t.fx)-x:0,j=l?l(t.fy)-b:0,[z,A]=iu(this,i),$=x2(r,z),U=E2(r,A),W=m?xf:Mf,G=W(Fr);let H,X;"title"in r?(H=r.channels,X=hN):(H=fN.call(this,r,n),X=dN);const Y=ze("svg:g",a).call(Tn,this,i,a).call(G2,this).call(Vt,this,{x:F&&s,y:P&&u}).call(te=>te.selectAll().data(t).enter().append("g").attr("transform",re=>`translate(${Math.round($(re))},${Math.round(U(re))})`).call($n,this).call(re=>re.append("path").attr("filter",M)).call(re=>re.append("text").each(function(K){const V=Ui(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const k=X.call(o,K,t,H,n,r);if(typeof k=="string")for(const O of o.splitLines(k))I(V,{value:o.clipLine(O)});else{const O=new Set;for(const q of k){const{label:D=""}=q;D&&O.has(D)||(O.add(D),I(V,q))}}})));function I(te,{label:re,value:K,color:V,opacity:k}){re??(re=""),K??(K="");const O=V!=null||k!=null;let q,D=y*100;const[se]=oi(re,D,W,G);if(se>=0)re=re.slice(0,se).trimEnd()+Fr,q=K.trim(),K="";else{(re||!K&&!O)&&(K=" "+K);const[ie]=oi(K,D-W(re),W,G);ie>=0&&(q=K.trim(),K=K.slice(0,ie).trimEnd()+Fr)}const ae=te.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");re&&ae.append("tspan").attr("font-weight","bold").text(re),K&&ae.append(()=>f.createTextNode(K)),O&&ae.append("tspan").text(" ").attr("fill",V).attr("fill-opacity",k).style("user-select","none"),q&&ae.append("title").text(q)}function ee(){const{width:te,height:re}=i.facet??i;Y.selectChildren().each(function(K){let{x:V,width:k,height:O}=this.getBBox();k=Math.round(k),O=Math.round(O);let q=d;if(q===void 0){const ae=$(K)+L,ie=U(K)+j,ue=ae+k+g+_*2<te,oe=ae-k-g-_*2>0,We=ie+O+g+_*2<re,Se=ie-O-g-_*2>0;q=ue&&oe?We&&Se?o.preferredAnchor:Se?"bottom":"top":We&&Se?ue?"left":"right":(ue||oe)&&(We||Se)?`${Se?"bottom":"top"}-${ue?"left":"right"}`:o.preferredAnchor}const D=this.firstChild,se=this.lastChild;if(D.setAttribute("d",cN(q,g,_,k,O)),V)for(const ae of se.childNodes)ae.setAttribute("x",-V);se.setAttribute("y",`${+uN(q,se.childNodes.length,p).toFixed(6)}em`),se.setAttribute("transform",`translate(${lN(q,g,_,k,O)})`)}),Y.attr("visibility",null)}return t.length&&(Y.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(ee):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ee)),Y.node()}}function sN(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Js(t,n)),new oN(e,{...r,x:t,y:n})}function uN(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function lN(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function cN(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function fN({channels:e},t){var i,a;const n={};let r=this.format;r=Wd(r,e,"x"),r=Wd(r,e,"y"),this.format=r;for(const o in r){const s=r[o];if(!(s===null||s===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const u=xd(e,o);u&&(n[o]=u)}}for(const o in e){if(o in n||o in r||aN.has(o))continue;const s=xd(e,o);s&&(n[o]=s)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const s=this.format[o];if(typeof s=="string"){const u=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(Et(u)?La:li)(s)}else if(s===void 0||s===!0){const u=t[o];this.format[o]=u!=null&&u.bandwidth?Ef(u,u.domain()):ai}}return n}function Wd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([s])=>s===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function hN(e,t,{title:n}){return ai(n.value[e],e)}function*dN(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:_s(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:Kd(r,n,"x"),value:Xd(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:Kd(r,n,"y"),value:Xd(this.format.y2,n.y1,o,e)};else{const s=o.value[e],u=o.scale;if(!yr(s)&&u==null)continue;yield{label:_s(r,n,a),value:this.format[a](s,e),color:u==="color"?i[a][e]:null,opacity:u==="opacity"?i[a][e]:null}}}}function Xd(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Kd(e,t,n){const r=_s(e,t,`${n}1`,n),i=_s(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function _s(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function tn(e={}){var G;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:s}=e,u=gf(e.className),c=e.marks===void 0?[]:Jd(e.marks);c.push(...vN(c));const l=_N(t,e),h=new Map;for(const H of c){const X=Qd(H,l,e);X&&h.set(H,X)}const f=new Map;l&&Si(f,[l],e),Si(f,h,e);const d=Jd(MN(c,f,e));for(const H of d){const X=Qd(H,l,e);X&&h.set(H,X)}c.unshift(...d);let m=qA(f,e);if(m!==void 0){const H=l?Wu(m,l):void 0;for(const Y of c){if(Y.facet===null||Y.facet==="super")continue;const I=h.get(Y);I!==void 0&&(I.facetsIndex=Y.fx!=null||Y.fy!=null?Wu(m,I):H)}const X=new Set;for(const{facetsIndex:Y}of h.values())Y==null||Y.forEach((I,ee)=>{(I==null?void 0:I.length)>0&&X.add(ee)});m.forEach(0<X.size&&X.size<m.length?(Y,I)=>Y.empty=!X.has(I):Y=>Y.empty=!1);for(const Y of c)if(Y.facet==="exclude"){const I=h.get(Y);I!==void 0&&(I.facetsIndex=VA(I.facetsIndex))}}for(const H of Te.keys())Zl(e[H])&&H!=="fx"&&H!=="fy"&&f.set(H,[]);const p=new Map;for(const H of c){if(p.has(H))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:X,channels:Y}=h.get(H)??{},{data:I,facets:ee,channels:te}=H.initialize(X,Y,e);Sf(te,e),p.set(H,{data:I,facets:ee,channels:te})}const y=ic(Si(f,p,e),e),_=GA(y,c,e);gA(y,_);const g=$d(y),{fx:M,fy:b}=g,x=M||b?g2(y,_):_,w=M||b?CN(g,_):_,S=hf(e),E=S.document,N=ks("svg").call(E.documentElement);let F=N;S.ownerSVGElement=N,S.className=u,S.projection=TS(e,x),S.filterFacets=(H,X)=>Wu(m,{channels:X,groups:_f(H,X)}),S.getMarkState=H=>{const X=p.get(H),Y=h.get(H);return{...X,channels:{...X.channels,...Y==null?void 0:Y.channels}}},S.dispatchValue=H=>{F.value!==H&&(F.value=H,F.dispatchEvent(new Event("input",{bubbles:!0})))};const P=new Set;for(const[H,X]of p)if(H.initializer!=null){const Y=H.facet==="super"?w:x,I=H.initializer(X.data,X.facets,X.channels,g,Y,S);if(I.data!==void 0&&(X.data=I.data),I.facets!==void 0&&(X.facets=I.facets),I.channels!==void 0){const{fx:ee,fy:te,...re}=I.channels;yN(re),Object.assign(X.channels,re);for(const K of Object.values(re)){const{scale:V}=K;V!=null&&!ZE(Te.get(V))&&(my(K,e),P.add(V))}(ee!=null||te!=null)&&h.set(H,!0)}}if(P.size){const H=new Map;Si(H,p,e,ee=>P.has(ee)),Si(f,p,e,ee=>P.has(ee));const X=NN(ic(H,e),y),{scales:Y,...I}=$d(X);Object.assign(y,X),Object.assign(g,I),Object.assign(g.scales,Y)}let L,j;m!==void 0&&(L={x:M==null?void 0:M.domain(),y:b==null?void 0:b.domain()},m=HA(m,L),j=zA(M,b,_));for(const[H,X]of p)X.values=H.scale(X.channels,g,S);const{width:z,height:A}=_;Ui(N).attr("class",u).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",z).attr("height",A).attr("viewBox",`0 0 ${z} ${A}`).attr("aria-label",o).attr("aria-description",s).call(H=>H.append("style").text(`:where(.${u}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${u} text),
:where(.${u} tspan) {
  white-space: pre;
}`)).call(yf,n);for(const H of c){const{channels:X,values:Y,facets:I}=p.get(H);if(m===void 0||H.facet==="super"){let ee=null;if(I&&(ee=I[0],ee=H.filter(ee,X,Y),ee.length===0))continue;const te=H.render(ee,g,Y,w,S);if(te==null)continue;N.appendChild(te)}else{let ee;for(const te of m){if(!(((G=H.facetAnchor)==null?void 0:G.call(H,m,L,te))??!te.empty))continue;let re=null;if(I){const V=h.has(H);if(re=I[V?te.i:0],re=H.filter(re,X,Y),re.length===0)continue;!V&&re===I[0]&&(re=LE(re)),re.fx=te.x,re.fy=te.y,re.fi=te.i}const K=H.render(re,g,Y,x,S);if(K!=null){(ee??(ee=Ui(N).append("g"))).append(()=>K).datum(te);for(const V of["aria-label","aria-description","aria-hidden","transform"])K.hasAttribute(V)&&(ee.attr(V,K.getAttribute(V)),K.removeAttribute(V))}}ee==null||ee.selectChildren().attr("transform",j)}}const $=eN(y,S,e),{figure:U=r!=null||i!=null||a!=null||$.length>0}=e;U&&(F=E.createElement("figure"),F.className=`${u}-figure`,F.style.maxWidth="initial",r!=null&&F.append(Zd(E,r,"h2")),i!=null&&F.append(Zd(E,i,"h3")),F.append(...$,N),a!=null&&F.append(mN(E,a))),F.scale=SA(g.scales),F.legend=ZP(y,S,e);const W=CS();return W>0&&Ui(N).append("text").attr("x",z).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${W.toLocaleString("en-US")} warning${W===1?"":"s"}. Please check the console.`),F}function Zd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function mN(e,t){const n=e.createElement("figcaption");return n.append(t),n}function pN({marks:e=[],...t}={}){return tn({...t,marks:[...e,this]})}St.prototype.plot=pN;function Jd(e){return e.flat(1/0).filter(t=>t!=null).map(bN)}function bN(e){return typeof e.render=="function"?e:new gN(e)}class gN extends St{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Sf(e,t){for(const n in e)my(e[n],t);return e}function my(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:s=a?u=>u*100:Bg(o,i)}=t[n]??{};s!=null&&(e.value=Ge(e.value,s),e.transform=!1)}function yN(e){for(const t in e)e2(t,e[t])}function Si(e,t,n,r=IE){var i,a;for(const{channels:o}of t.values())for(const s in o){const u=o[s],{scale:c}=u;if(c!=null&&r(c))if(c==="projection"){if(!DS(n)){const l=((i=n.x)==null?void 0:i.domain)===void 0,h=((a=n.y)==null?void 0:a.domain)===void 0;if(l||h){const[f,d]=OS(u);l&&Qu(e,"x",f),h&&Qu(e,"y",d)}}}else Qu(e,c,u)}return e}function Qu(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function _N(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=ht(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=ma(i,{value:n,scale:"fx"})),r!=null&&(a.fy=ma(i,{value:r,scale:"fy"})),Sf(a,t);const o=_f(i,a);return{channels:a,groups:o,data:e.data}}function Qd(e,t,n){var u;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const c=ht(e.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const l={};return r!=null&&(l.fx=ma(c,{value:r,scale:"fx"})),i!=null&&(l.fy=ma(c,{value:i,scale:"fy"})),Sf(l,n),{channels:l,groups:_f(c,l)}}if(t===void 0)return;const{channels:a,groups:o,data:s}=t;if(e.facet!=="auto"||e.data===s)return{channels:a,groups:o};s.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((u=ht(e.data))==null?void 0:u.length)===s.length&&or(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function wN(e,t={}){return bs({...t,x:null,y:null},(n,r,i,a,o,s)=>s.getMarkState(e))}function vN(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?rP:/^y$/i.test(i)?Gd:nP,r=i(wN(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===Gd?"left":"bottom");const o=sN(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function MN(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:s={},axis:u,grid:c,facet:l={},facet:{axis:h=u,grid:f}=l,x:{axis:d=u,grid:m=d===null?null:c}=i,y:{axis:p=u,grid:y=p===null?null:c}=a,fx:{axis:_=h,grid:g=_===null?null:f}=o,fy:{axis:M=h,grid:b=M===null?null:f}=s}=n;(r||!Zl(i)&&!em("x",e))&&(d=m=null),(r||!Zl(a)&&!em("y",e))&&(p=y=null),t.has("fx")||(_=g=null),t.has("fy")||(M=b=null),d===void 0&&(d=!po(e,"x")),p===void 0&&(p=!po(e,"y")),_===void 0&&(_=!po(e,"fx")),M===void 0&&(M=!po(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),_===!0&&(_=d==="top"||d===null?"bottom":"top"),M===!0&&(M=p==="right"||p===null?"left":"right");const x=[];return mo(x,b,UP,s),ho(x,M,DP,"right","left",l,s),mo(x,g,HP,o),ho(x,_,RP,"top","bottom",l,o),mo(x,y,GP,a),ho(x,p,J2,"left","right",n,a),mo(x,m,qP,i),ho(x,d,Q2,"bottom","top",n,i),x}function ho(e,t,n,r,i,a,o){if(!t)return;const s=xN(t);o=EN(s?r:t,a,o);const{line:u}=o;(n===J2||n===Q2)&&u&&!da(u)&&e.push(iN(SN(o))),e.push(n(o)),s&&e.push(n({...o,anchor:i,label:null}))}function mo(e,t,n,r){!t||da(t)||e.push(n(AN(t,r)))}function xN(e){return/^\s*both\s*$/i.test(e)}function EN(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:u,fontVariant:c,ariaLabel:l,ariaDescription:h,label:f=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:u,fontVariant:c,ariaLabel:l,ariaDescription:h,label:f,labelAnchor:d,labelArrow:m,labelOffset:p}}function SN(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function AN(e,{stroke:t=eu(e)?e:void 0,ticks:n=PN(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function PN(e){switch(typeof e){case"number":return!0;case"string":return!eu(e)}return Mr(e)||typeof(e==null?void 0:e.range)=="function"}function po(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function em(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function NN(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function CN({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:u}=bf(n),c=e&&tm(e),l=t&&tm(t);return{marginTop:t?l[0]:r,marginRight:e?s-c[1]:i,marginBottom:t?u-l[1]:a,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:s,height:u}}function tm(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const TN=new Map([["basis",aE],["basis-closed",oE],["basis-open",sE],["bundle",uE],["bump-x",Wx],["bump-y",Xx],["cardinal",lE],["cardinal-closed",cE],["cardinal-open",fE],["catmull-rom",hE],["catmull-rom-closed",dE],["catmull-rom-open",mE],["linear",Yc],["linear-closed",pE],["monotone-x",bE],["monotone-y",gE],["natural",yE],["step",_E],["step-after",vE],["step-before",wE]]);function $N(e=Yc,t){if(typeof e=="function")return e;const n=TN.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function kN(e=ws,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?ws:$N(e,t)}function ws(e){return Yc(e)}function IN(e={}){return kg(e)?e:{...e,x:Ye}}function DN(e={}){return Ig(e)?e:{...e,y:Ye}}function RN(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const s of t)for(const u of s)r[u]&&++i,r[u]=1;if(i===0)return{data:e,facets:t};e=fa(e);const a=e[Ng]=new Uint32Array(n+i);t=t.map(s=>fa(s,Uint32Array));let o=n;r.fill(0);for(const s of t)for(let u=0,c=s.length;u<c;++u){const l=s[u];r[l]?(s[u]=o,e[o]=e[l],a[o]=l,++o):a[l]=l,r[l]=1}return{data:e,facets:t}}function ON(e={},t={}){arguments.length===1&&([e,t]=py(e));const{y1:n,y:r=n,x:i,...a}=t,[o,s,u,c]=by(r,i,"y","x",e,a);return{...o,y1:n,y:s,x1:u,x2:c,x:Og(u,c)}}function BN(e={},t={}){arguments.length===1&&([e,t]=py(e));const{x1:n,x:r=n,y:i,...a}=t,[o,s,u,c]=by(r,i,"x","y",e,a);return{...o,x1:n,x:s,y1:u,y2:c,y:Og(u,c)}}function LN({x:e,x1:t,x2:n,...r}={}){return r=ou(r,"y"),t===void 0&&n===void 0?ON({x:e,...r}):([t,n]=Rg(e,t,n),{...r,x1:t,x2:n})}function FN({y:e,y1:t,y2:n,...r}={}){return r=ou(r,"x"),t===void 0&&n===void 0?BN({y:e,...r}):([t,n]=Rg(e,t,n),{...r,y1:t,y2:n})}function py(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const GN={length:!0};function by(e,t=kE,n,r,{offset:i,order:a,reverse:o},s){if(t===null)throw new Error(`stack requires ${r}`);const u=BE(s),[c,l]=Cr(e),[h,f]=ps(t),[d,m]=ps(t);return h.hint=d.hint=GN,i=UN(i),a=zN(a,i,r),[cf(s,(p,y,_)=>{({data:p,facets:y}=RN(p,y));const g=e==null?void 0:l(Jl(Le(p,e),_==null?void 0:_[n])),M=Le(p,t,Float64Array),b=Le(p,u),x=a&&a(p,g,M,b),w=p.length,S=f(new Float64Array(w)),E=m(new Float64Array(w)),N=[];for(const F of y){const P=g?Array.from(Mc(F,L=>g[L]).values()):[F];if(x)for(const L of P)L.sort(x);for(const L of P){let j=0,z=0;o&&L.reverse();for(const A of L){const $=M[A];$<0?j=E[A]=(S[A]=j)+$:$>0?z=E[A]=(S[A]=z)+$:E[A]=S[A]=z}}N.push(P)}return i&&i(N,S,E,b),{data:p,facets:y}}),c,h,d]}function UN(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return qN;case"center":case"silhouette":return HN;case"wiggle":return yy}throw new Error(`unknown offset: ${e}`)}}function gy(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function qN(e,t,n){for(const r of e)for(const i of r){const[a,o]=gy(i,n);for(const s of i){const u=1/(o-a||1);t[s]=u*(t[s]-a),n[s]=u*(n[s]-a)}}}function HN(e,t,n){for(const r of e){for(const i of r){const[a,o]=gy(i,n);for(const s of i){const u=(o+a)/2;t[s]-=u,n[s]-=u}}_y(r,t,n)}wy(e,t,n)}function yy(e,t,n,r){for(const i of e){const a=new cr;let o=0;for(const s of i){let u=-1;const c=s.map(d=>Math.abs(n[d]-t[d])),l=s.map(d=>{u=r?r[d]:++u;const m=n[d]-t[d],p=a.has(u)?m-a.get(u):0;return a.set(u,m),p}),h=[0,...a7(l)];for(const d of s)t[d]+=o,n[d]+=o;const f=Fn(c);f&&(o-=Fn(c,(d,m)=>(l[m]/2+h[m])*d)/f)}_y(i,t,n)}wy(e,t,n)}function _y(e,t,n){const r=xn(e,i=>xn(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function wy(e,t,n){const r=e.length;if(r===1)return;const i=e.map(s=>s.flat()),a=i.map(s=>(xn(s,u=>t[u])+tt(s,u=>n[u]))/2),o=xn(a);for(let s=0;s<r;s++){const u=o-a[s];for(const c of i[s])t[c]+=u,n[c]+=u}}function zN(e,t,n){if(e===void 0&&t===yy)return nm(Lt);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?ms:Lt;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return VN(i);case"z":return jN(i);case"sum":return YN(i);case"appearance":return WN(i);case"inside-out":return nm(i)}return rm(Cg(e))}if(typeof e=="function")return(e.length===1?rm:XN)(e);if(Array.isArray(e))return KN(e);throw new Error(`invalid order: ${e}`)}}function VN(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function jN(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function YN(e){return cu(e,(t,n,r,i)=>xc(Nn(t),a=>Fn(a,o=>r[o]),a=>i[a]))}function WN(e){return cu(e,(t,n,r,i)=>xc(Nn(t),a=>n[z0(a,o=>r[o])],a=>i[a]))}function nm(e){return cu(e,(t,n,r,i)=>{const a=Nn(t),o=xc(a,h=>n[z0(h,f=>r[f])],h=>i[h]),s=Or(a,h=>Fn(h,f=>r[f]),h=>i[h]),u=[],c=[];let l=0;for(const h of o)l<0?(l+=s.get(h),u.push(h)):(l-=s.get(h),c.push(h));return c.reverse().concat(u)})}function rm(e){return t=>{const n=Le(t,e);return(r,i)=>Lt(n[r],n[i])}}function XN(e){return t=>(n,r)=>e(t[n],t[r])}function KN(e){return cu(Lt,()=>e)}function cu(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new cr(t(n,r,i,a).map((s,u)=>[s,u]));return(s,u)=>e(o.get(a[s]),o.get(a[u]))}}const ZN={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class JN extends St{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:s,tension:u}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,ZN),this.curve=kN(s,u),su(this,n)}project(t,n,r){this.curve!==ws&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:s,x2:u=o,y2:c=s}=r,{curve:l}=this;return ze("svg:g",a).call(Tn,this,i,a).call(Vt,this,n).call(h=>h.selectAll().data(t).enter().append("path").call($n,this).attr("d",l===ws&&a.projection?QN(a.projection,o,s,u,c):f=>{const d=Yo(),m=l(d);return m.lineStart(),m.point(o[f],s[f]),m.point(u[f],c[f]),m.lineEnd(),d}).call(Wn,this,r).call(uu,this,r,a)).node()}}function QN(e,t,n,r,i){const a=Bc(e);return t=Ir(t),n=Ir(n),r=Ir(r),i=Ir(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function im(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...s}={}){return[n,r]=am(t,n,r),[a,o]=am(i,a,o),new JN(e,{...s,x1:n,x2:r,y1:a,y2:o})}function am(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class Af extends St{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:s=a,insetBottom:u=a,insetLeft:c=a,rx:l,ry:h}=r;this.insetTop=Pe(o),this.insetRight=Pe(s),this.insetBottom=Pe(u),this.insetLeft=Pe(c),this.rx=qe(l,"auto"),this.ry=qe(h,"auto")}render(t,n,r,i,a){const{rx:o,ry:s}=this;return ze("svg:g",a).call(Tn,this,i,a).call(this._transform,this,n).call(u=>u.selectAll().data(t).enter().append("rect").call($n,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(_e,"rx",o).call(_e,"ry",s).call(Wn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:s}=this,u=n&&t?t.bandwidth():a-r-i;return Math.max(0,u-o-s)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:s}=this,u=n&&t?t.bandwidth():a-r-i;return Math.max(0,u-o-s)}}const vy={ariaLabel:"bar"};class eC extends Af{constructor(t,n={}){const{x1:r,x2:i,y:a}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},n,vy)}_transform(t,n,{x:r}){t.call(Vt,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:a}=this;return qn(t)?i+a:o=>Math.min(n[o],r[o])+a}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:a,width:o}){const{insetLeft:s,insetRight:u}=this;return qn(t)?o-i-a-s-u:c=>Math.max(0,Math.abs(r[c]-n[c])-s-u)}}class tC extends Af{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,vy)}_transform(t,n,{y:r}){t.call(Vt,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return qn(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:s,insetBottom:u}=this;return qn(t)?o-i-a-s-u:c=>Math.max(0,Math.abs(r[c]-n[c])-s-u)}}function Pf(e,t={}){return Dg(t)||(t={...t,y:nf,x2:Ye}),new eC(e,LN(I2(IN(t))))}function My(e,t={}){return Dg(t)||(t={...t,x:nf,y2:Ye}),new tC(e,FN(D2(DN(t))))}const nC={ariaLabel:"cell"};class rC extends Af{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,nC)}_transform(t,n){t.call(Vt,n,{},0,0)}}function iC(e,{x:t,y:n,...r}={}){return[t,n]=Js(t,n),new rC(e,{...r,x:t,y:n})}const aC={ariaLabel:"tick",fill:null,stroke:"currentColor"};class oC extends St{constructor(t,n,r){super(t,n,r,aC),su(this,r)}render(t,n,r,i,a){return ze("svg:g",a).call(Tn,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call($n,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Wn,this,r).call(uu,this,r,a)).node()}}class sC extends oC{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:s=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Pe(o),this.insetBottom=Pe(s)}_transform(t,n,{x:r}){t.call(Vt,n,{x:r},Qe,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function om(e,{x:t=Ye,...n}={}){return new sC(e,{...n,x:t})}function uC(e,t,n){const r=e.slice();return r[16]=t[n],r}function lC(e){let t;return{c(){t=C("option"),t.textContent=`${e[16]}`,t.__value=e[16],Me(t,t.__value)},m(n,r){he(n,t,r)},p:ye,d(n){n&&fe(t)}}}function cC(e){let t,n,r,i,a,o,s,u,c,l,h,f,d,m,p,y,_,g,M,b,x=Be(["velocity","piano","channel","none"]),w=[];for(let S=0;S<4;S+=1)w[S]=lC(uC(e,x,S));return{c(){t=C("main"),n=C("h2"),n.textContent="Fretboard Heatmap",r=Z(),i=C("p"),i.textContent=`The piano roll below shows incoming MIDI notes as rectangles with their
        pitch (y positoon) and start and end times (x left and right side of the
        rectangle). The color encodes the MIDI velocity, which tells how
        hard/loud a note was played.`,a=Z(),o=C("div"),s=C("label"),u=Q(`color
            `),c=C("select");for(let S=0;S<4;S+=1)w[S].c();l=Z(),h=C("label"),f=Q(`time
            `),d=C("input"),m=Z(),p=C("div"),y=Z(),_=C("div"),g=C("button"),g.textContent="reset",T(i,"class","explanation"),e[2]===void 0&&rn(()=>e[5].call(c)),T(d,"type","number"),T(d,"min","10"),T(d,"max","300"),T(d,"step","10"),T(h,"title","time in seconds for past notes to be shown"),T(o,"class","control"),T(p,"class","visualization"),T(g,"title","Clear all played notes"),T(_,"class","control"),T(t,"class","demo")},m(S,E){he(S,t,E),v(t,n),v(t,r),v(t,i),v(t,a),v(t,o),v(o,s),v(s,u),v(s,c);for(let N=0;N<4;N+=1)w[N]&&w[N].m(c,null);Je(c,e[2],!0),v(o,l),v(o,h),v(h,f),v(h,d),Me(d,e[1]),v(t,m),v(t,p),e[7](p),v(t,y),v(t,_),v(_,g),M||(b=[ne(c,"change",e[5]),ne(d,"input",e[6]),ne(g,"click",e[8])],M=!0)},p(S,[E]){E&4&&Je(c,S[2]),E&2&&Ie(d.value)!==S[1]&&Me(d,S[1])},i:ye,o:ye,d(S){S&&fe(t),kt(w,S),e[7](null),M=!1,dt(b)}}}let fC=1e3,hC=500;function dC(e,t,n){let r,i=30,a="velocity",o=0,s=[];const u=new Map;let c=null;const l=()=>{R.inputs.length<1?console.warn("No MIDI device detected"):(R.inputs.forEach((g,M)=>{console.log(`MIDI device ${M}: ${g.name}`),g.addListener("noteon",h),g.addListener("noteoff",f)}),[...R.inputs])},h=g=>{const M=(g.timestamp-o)/1e3,b={number:g.note.number,velocity:g.rawVelocity,time:M,channel:g.message.channel};if(u.has(g.note.number)){const x=u.get(g.note.number);x.end===void 0&&(x.end=M)}s.push(b),u.set(g.note.number,b)},f=g=>{if(u.has(g.note.number)){const M=u.get(g.note.number),b=(g.timestamp-o)/1e3;M.end=b}},d=()=>{const g=(performance.now()-o)/1e3,M=g-i,b=s.filter(N=>N.end>M||N.end===void 0),x=ut(b,N=>N.number);let w,S;a==="velocity"?(w={label:"Note velocity",scheme:"blues",domain:[0,127]},S="velocity"):a==="piano"?(w={label:"Piano key color",domain:["black","white"],range:["black","white"]},S=N=>Fy(N.number)?"black":"white"):a==="channel"?(w={type:"categorical",label:"MIDI channel",scheme:"tableau10"},S=N=>N.channel):a==="none"&&(S="#ddd");const E=tn({insetRight:10,width:fC,height:hC,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[M,g]},y:{label:"MIDI Pitch",grid:!0,reverse:!0,domain:lt(x[0]-1,x[1]+2),tickFormat:N=>Wi[N].label},color:{...w,legend:a!=="none",marginLeft:100,width:300},marks:[hi(lt(Math.ceil((x[0]-1)/12)*12,x[1]+2,12)),gs([g],{stroke:"#888"}),Pf(b,{clip:!0,x1:"time",x2:N=>N.end===void 0?g:Math.max(N.end,N.time+.025),y:"number",fill:S,stroke:"#ccc",rx:5})]});n(0,r.textContent="",r),r.appendChild(E),c=requestAnimationFrame(d)};Hn(()=>{R.enable().then(l).catch(g=>alert(g)),n(3,o=performance.now()),c=requestAnimationFrame(d)}),zn(()=>{for(const g of R.inputs)g.removeListener();cancelAnimationFrame(c)});function m(){a=sr(this),n(2,a)}function p(){i=Ie(this.value),n(1,i)}function y(g){nn[g?"unshift":"push"](()=>{r=g,n(0,r)})}return[r,i,a,o,s,m,p,y,()=>{confirm("Reset played notes?")&&(n(4,s=[]),n(3,o=performance.now()))}]}class mC extends Ut{constructor(t){super(),Gt(this,t,dC,cC,Ft,{})}}function sm(e,t,n){const r=e.slice();return r[3]=t[n],r}function pC(e){let t,n,r;var i=e[0].component;function a(o,s){return{}}return i&&(n=Co(i,a())),{c(){t=C("div"),n&&Yi(n.$$.fragment)},m(o,s){he(o,t,s),n&&Hr(n,t,null),r=!0},p(o,s){if(s&1&&i!==(i=o[0].component)){if(n){_a();const u=n;It(u.$$.fragment,1,0,()=>{zr(u,1)}),wa()}i?(n=Co(i,a()),Yi(n.$$.fragment),vt(n.$$.fragment,1),Hr(n,t,null)):n=null}},i(o){r||(n&&vt(n.$$.fragment,o),r=!0)},o(o){n&&It(n.$$.fragment,o),r=!1},d(o){o&&fe(t),n&&zr(n)}}}function bC(e){let t,n,r,i=Be(e[1]),a=[];for(let o=0;o<i.length;o+=1)a[o]=um(sm(e,i,o));return{c(){t=C("p"),t.textContent="This page contains a collection of simple but useful tools.",n=Z(),r=C("div");for(let o=0;o<a.length;o+=1)a[o].c();T(t,"class","explanation"),T(r,"class","grid")},m(o,s){he(o,t,s),he(o,n,s),he(o,r,s);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null)},p(o,s){if(s&3){i=Be(o[1]);let u;for(u=0;u<i.length;u+=1){const c=sm(o,i,u);a[u]?a[u].p(c,s):(a[u]=um(c),a[u].c(),a[u].m(r,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:ye,o:ye,d(o){o&&(fe(t),fe(n),fe(r)),kt(a,o)}}}function um(e){let t,n,r,i=e[3].description+"",a,o,s,u;function c(){return e[2](e[3])}return{c(){t=C("div"),n=C("h2"),n.textContent=`${e[3].title}`,r=Z(),a=Q(i),o=Z(),T(t,"class","card")},m(l,h){he(l,t,h),v(t,n),v(t,r),v(t,a),v(t,o),s||(u=ne(t,"click",c),s=!0)},p(l,h){e=l},d(l){l&&fe(t),s=!1,u()}}}function gC(e){let t,n,r,i;const a=[bC,pC],o=[];function s(u,c){return u[0]?1:0}return n=s(e),r=o[n]=a[n](e),{c(){t=C("main"),r.c()},m(u,c){he(u,t,c),o[n].m(t,null),i=!0},p(u,[c]){let l=n;n=s(u),n===l?o[n].p(u,c):(_a(),It(o[l],1,1,()=>{o[l]=null}),wa(),r=o[n],r?r.p(u,c):(r=o[n]=a[n](u),r.c()),vt(r,1),r.m(t,null))},i(u){i||(vt(r),i=!0)},o(u){It(r),i=!1},d(u){u&&fe(t),o[n].d()}}}function yC(e,t,n){let r=[{id:"piano-roll",title:"Piano Roll",description:"Shows MIDI input as a piano roll.",component:mC},{id:"guitar-tunings",title:"Guitar Tunings",description:"Small tool that computes the notes for a guitar tuning based on parameters. Open tunings are not included.",component:V5}],i;return[i,r,o=>{n(0,i=o)}]}class _C extends Ut{constructor(t){super(),Gt(this,t,yC,gC,Ft,{})}}var xy={exports:{}};(function(e,t){(function(n,r){r()})(yi,function(){function n(c,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,l,h){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){u(f.response,l,h)},f.onerror=function(){console.error("could not download file")},f.send()}function i(c){var l=new XMLHttpRequest;l.open("HEAD",c,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function a(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(l)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof yi=="object"&&yi.global===yi?yi:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(c,l,h){var f=o.URL||o.webkitURL,d=document.createElement("a");l=l||c.name||"download",d.download=l,d.rel="noopener",typeof c=="string"?(d.href=c,d.origin===location.origin?a(d):i(d.href)?r(c,l,h):a(d,d.target="_blank")):(d.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(c,l,h){if(l=l||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,h),l);else if(i(c))r(c,l,h);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){a(f)})}}:function(c,l,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return r(c,l,h);var d=c.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||s)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var M=y.result;M=p?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=M:location=M,f=null},y.readAsDataURL(c)}else{var _=o.URL||o.webkitURL,g=_.createObjectURL(c);f?f.location=g:location.href=g,f=null,setTimeout(function(){_.revokeObjectURL(g)},4e4)}});o.saveAs=u.saveAs=u,e.exports=u})})(xy);var wC=xy.exports;const Ya=ev(wC);function lm(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function vC(e,t,n,r,i,a){const o=new Float64Array(a),s=(a-1)/(i-r);for(let u=0;u<e.length;++u){const c=e[u],l=t(c,u,e),h=n(c,u,e);if(!(Number.isFinite(l)&&Number.isFinite(h)))continue;const f=(l-r)*s,d=Math.floor(f),m=d+1;0<=d&&m<a?(o[d]+=(m-f)*h,o[m]+=(f-d)*h):d===-1?o[m]+=(f-d)*h:m===a&&(o[d]+=(m-f)*h)}return o}function cm(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);MC(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,s=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:s}}function MC(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),s=.6318/n,u=1.997/n,c=Float64Array.of(-a*Math.cos(s),a*Math.sin(s),-a*Math.cos(-s),a*Math.sin(-s),-o*Math.cos(u),o*Math.sin(u),-o*Math.cos(-u),o*Math.sin(-u)),l=n*2.5066282746310007,h=Float64Array.of(i[0],i[1],0,0,0,0,0,0),f=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(h[m]=c[m]*h[m-2]-c[m+1]*h[m-1],h[m+1]=c[m]*h[m-1]+c[m+1]*h[m-2],d=m-2;d>0;d-=2)h[d]+=c[m]*h[d-2]-c[m+1]*h[d-1],h[d+1]+=c[m]*h[d-1]+c[m+1]*h[d-2];for(d=0;d<=m;d+=2)h[d]+=i[m]*f[d]-i[m+1]*f[d+1],h[d+1]+=i[m]*f[d+1]+i[m+1]*f[d];for(f[m+2]=c[m]*f[m]-c[m+1]*f[m+1],f[m+3]=c[m]*f[m+1]+c[m+1]*f[m],d=m;d>0;d-=2)f[d]+=c[m]*f[d-2]-c[m+1]*f[d-1],f[d+1]+=c[m]*f[d-1]+c[m+1]*f[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=h[d]/l,e[m+1]=f[d+2]}function xC(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),s=i,u=EC){const c=r*2,l=r*3,h=r*4,f=r*n;let d,m;for(u(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=h;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-c]+e.b_causal[3]*t[d-l]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(u(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=f-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+c]+e.b_anticausal[3]*t[d+l]+e.b_anticausal[4]*t[d+h]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)s[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)s[d]=Math.max(0,i[m]+a[n-m-1]);return s}function EC(e,t,n,r,i,a,o,s,u,c,l,h=.5){const f=Math.abs(r)*n,d=r<0?f+r:0;let m,p,y;for(p=0;p<s;++p)for(c[p]=p<=a?i[p]:0,y=1;y<=s&&y<=p;++y)c[p]-=o[y]*c[p-y];for(y=0;y<s;++y)for(e[y]=0,p=1;p<=y;++p)m=d+r*p,m>=0&&m<f&&(e[y]+=c[y-p]*t[m]);const _=t[d],g=Math.ceil(l*10);for(p=0;p<g;++p){for(y=0;y<s;++y)e[y]+=c[y]*_;if(u-=Math.abs(c[0]),u<=h)break;for(c[s]=p+s<=a?i[p+s]:0,y=1;y<=s;++y)c[s]-=o[y]*c[s-y];for(y=0;y<s;++y)c[y]=c[y+1]}}function SC(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const s=t(e[o],o,e);s!=null&&(i===void 0?s>=s&&(i=a=s):(s<i&&(i=s),s>a&&(a=s)))}return[i-n,a+n]}function AC(e,t){const n=e.map(t).filter(c=>c!=null&&c>=c);n.sort((c,l)=>c-l);const r=PC(n),i=fm(n,.25),a=fm(n,.75),o=n.length,s=(a-i)/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function PC(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const s=e[o];r=s-i,i+=r/++n,a+=r*(s-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function fm(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function NC(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=lm(t.x,_=>_),o=lm(t.weight,()=>1/e.length);let s=t.bandwidth??n*AC(e,a);const[u,c]=t.extent??SC(e,a,r*s),l=vC(e,a,o,u,c,i),h=(c-u)/(i-1),f=l.some(_=>_<0);let d=cm(s/h,f),m;function*p(_="x",g="y"){const M=y.grid(),b=1/h;for(let x=0;x<i;++x)yield{[_]:u+x*h,[g]:M[x]*b}}const y={[Symbol.iterator]:p,points:p,grid:()=>m||(m=xC(d,l,i)),extent:()=>[u,c],bandwidth(_){return arguments.length?(_!==s&&(s=_,m=null,d=cm(s/h,f)),y):s}};return y}var vs,Ms,xs,Gr,ba,nr,ga,Ur,ya,Nt,Yt,qr;class CC{constructor(){rt(this,vs,.03);rt(this,Ms,.5);rt(this,xs,200);rt(this,Gr,!1);rt(this,ba,null);rt(this,nr,null);rt(this,ga,4);rt(this,Ur,1/0);rt(this,ya,void 0);rt(this,Nt,null);rt(this,Yt,new AudioContext);rt(this,qr,null);Wa(this,"_scheduler",()=>{const t=xe(this,ga),n=60/xe(this,nr);let r=xe(this,ya)+xe(this,Nt)*n;for(;r<xe(this,Yt).currentTime+xe(this,Ms);)if(xe(this,Nt)<xe(this,Ur)-1){r+=n;const i=xe(this,Nt)%t===t-1||xe(this,Nt)===-1,a=r-xe(this,Yt).currentTime,o=performance.now()+a*1e3;this._playSound(r,o,i),Cf(this,Nt)._++}xe(this,Nt)<xe(this,Ur)-1?At(this,ba,setTimeout(this._scheduler,xe(this,xs))):this.stop()})}get bpm(){return xe(this,nr)}get beatCount(){return xe(this,Nt)}onClick(t){At(this,qr,t)}start(t,n=4,r=1/0){if(!t||Number.isNaN(+t)){console.error(`[Metronome] Invalid bpm ${t}`);return}if(!n||Number.isNaN(+n)){console.error(`[Metronome] Invalid accent ${n}`);return}if(!r||Number.isNaN(+r)){console.error(`[Metronome] Invalid maxBeeps ${r}`);return}xe(this,Yt).state==="suspended"&&xe(this,Yt).resume(),At(this,nr,+t),At(this,ga,+n),At(this,Ur,+r),At(this,Gr,!0),console.log(`Metronome @ ${t}bpm, accent every ${n}. beat, limited to ${r}`),At(this,Nt,-1),At(this,ya,xe(this,Yt).currentTime),this._scheduler()}stop(){console.log("[Metronome] stopped"),clearTimeout(xe(this,ba)),At(this,Gr,!1)}toggle(t,n=4){xe(this,Gr)?this.stop():(t===void 0&&(t=xe(this,nr)),this.start(t,n))}_playSound(t,n,r){xe(this,qr)&&xe(this,qr).call(this,t,n,r);const i=xe(this,Yt).createOscillator();i.connect(xe(this,Yt).destination);const a=r?300:200;i.frequency.value=a,i.start(t),i.stop(t+xe(this,vs))}}vs=new WeakMap,Ms=new WeakMap,xs=new WeakMap,Gr=new WeakMap,ba=new WeakMap,nr=new WeakMap,ga=new WeakMap,Ur=new WeakMap,ya=new WeakMap,Nt=new WeakMap,Yt=new WeakMap,qr=new WeakMap;function TC(e,t,n){const r=e.slice();return r[28]=t[n],r}function hm(e,t,n){const r=e.slice();return r[28]=t[n],r}function dm(e){let t,n=e[28]+"",r;return{c(){t=C("option"),r=Q(n),t.__value=e[28],Me(t,t.__value)},m(i,a){he(i,t,a),v(t,r)},p:ye,d(i){i&&fe(t)}}}function $C(e){let t;return{c(){t=C("option"),t.textContent=`1/${e[28]} note`,t.__value=e[28],Me(t,t.__value)},m(n,r){he(n,t,r)},p:ye,d(n){n&&fe(t)}}}function kC(e){let t,n,r,i,a,o=e[1].length+"",s,u,c,l,h,f,d,m,p,y,_,g,M,b,x,w,S,E,N,F,P,L,j,z,A,$,U,W=e[7]?"area":"bars",G,H,X,Y,I,ee,te,re,K,V,k,O,q,D,se,ae,ie,ue=Be(e[9]),oe=[];for(let le=0;le<ue.length;le+=1)oe[le]=dm(hm(e,ue,le));let We=Be([16,32,64,128]),Se=[];for(let le=0;le<4;le+=1)Se[le]=$C(TC(e,We,le));return{c(){t=C("main"),n=C("h2"),n.textContent="Live-Subdivision",r=Z(),i=C("p"),a=Q("Connect a MIDI instrument (currently "),s=Q(o),u=Q(` connected), choose
        your tempo and subdivision, and start playing. The bar chart will show you
        how often you hit each time bin and the last `),c=Q(e[6]),l=Q(` notes will be
        shown as ticks that fade out one new notes come in (from red for new to blue
        for old). You can play freely, use the integrated metronome, or play a song
        in the background (in another tab). All notes will be timed relative to the
        first one, but you can adjust all notes to make them earlier or later in
        case you messed up the first one.`),h=Z(),f=C("div"),d=C("label"),m=Q(`tempo
            `),p=C("input"),y=Z(),_=C("label"),g=Q(`grid
            `),M=C("select");for(let le=0;le<oe.length;le+=1)oe[le].c();b=Z(),x=C("label"),w=Q(`binning
            `),S=C("select");for(let le=0;le<4;le+=1)Se[le].c();E=Z(),N=C("label"),F=Q(`adjust
            `),P=C("input"),L=Z(),j=C("label"),z=Q(`note ticks
            `),A=C("input"),$=Z(),U=C("button"),G=Q(W),H=Z(),X=C("div"),Y=C("canvas"),I=Z(),ee=C("div"),te=C("button"),te.textContent="reset",re=Z(),K=C("button"),K.textContent="export",V=Z(),k=C("button"),k.textContent="import",O=Z(),q=C("input"),D=Z(),se=C("button"),se.textContent="metronome",T(i,"class","explanation"),T(p,"type","number"),T(p,"step","1"),T(p,"min","10"),T(p,"max","400"),at(p,"width","55px"),T(d,"title","The tempo in beats per minute (bpm)"),e[3]===void 0&&rn(()=>e[15].call(M)),T(_,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[4]===void 0&&rn(()=>e[16].call(S)),T(x,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),T(P,"type","number"),T(P,"step","0.01"),T(P,"min","-2"),T(P,"max","2"),at(P,"width","55px"),T(N,"title","Shift all notes by an amount in seconds"),T(A,"type","number"),T(A,"step","1"),T(A,"min","0"),T(A,"max","100"),at(A,"width","55px"),T(j,"title","The number of most recent notes that are shown as ticks."),T(U,"title","Toggle between bars and area"),T(f,"class","control"),at(Y,"width",Li+"px"),at(Y,"height",uc+"px"),T(X,"class","visualization"),T(te,"title","Clear all played notes"),T(K,"title","Export all data and settings"),T(k,"title","Export all data and settings"),T(q,"type","file"),T(q,"id","file-input"),at(q,"display","none"),T(se,"title","Toggle metronome (click)"),T(ee,"class","control"),T(t,"class","demo")},m(le,$e){he(le,t,$e),v(t,n),v(t,r),v(t,i),v(i,a),v(i,s),v(i,u),v(i,c),v(i,l),v(t,h),v(t,f),v(f,d),v(d,m),v(d,p),Me(p,e[2]),v(f,y),v(f,_),v(_,g),v(_,M);for(let we=0;we<oe.length;we+=1)oe[we]&&oe[we].m(M,null);Je(M,e[3],!0),v(f,b),v(f,x),v(x,w),v(x,S);for(let we=0;we<4;we+=1)Se[we]&&Se[we].m(S,null);Je(S,e[4],!0),v(f,E),v(f,N),v(N,F),v(N,P),Me(P,e[5]),v(f,L),v(f,j),v(j,z),v(j,A),Me(A,e[6]),v(f,$),v(f,U),v(U,G),v(t,H),v(t,X),v(X,Y),e[20](Y),v(t,I),v(t,ee),v(ee,te),v(ee,re),v(ee,K),v(ee,V),v(ee,k),v(ee,O),v(ee,q),v(ee,D),v(ee,se),ae||(ie=[ne(p,"input",e[14]),ne(p,"change",e[11]),ne(M,"change",e[15]),ne(M,"change",e[11]),ne(S,"change",e[16]),ne(S,"change",e[11]),ne(P,"input",e[17]),ne(P,"change",e[11]),ne(A,"input",e[18]),ne(A,"change",e[11]),ne(U,"click",e[19]),ne(te,"click",e[21]),ne(K,"click",e[12]),ne(k,"click",e[22]),ne(q,"input",e[13]),ne(se,"click",e[23])],ae=!0)},p(le,$e){if($e[0]&2&&o!==(o=le[1].length+"")&&ke(s,o),$e[0]&64&&ke(c,le[6]),$e[0]&4&&Ie(p.value)!==le[2]&&Me(p,le[2]),$e[0]&512){ue=Be(le[9]);let we;for(we=0;we<ue.length;we+=1){const kn=hm(le,ue,we);oe[we]?oe[we].p(kn,$e):(oe[we]=dm(kn),oe[we].c(),oe[we].m(M,null))}for(;we<oe.length;we+=1)oe[we].d(1);oe.length=ue.length}$e[0]&520&&Je(M,le[3]),$e[0]&16&&Je(S,le[4]),$e[0]&32&&Ie(P.value)!==le[5]&&Me(P,le[5]),$e[0]&64&&Ie(A.value)!==le[6]&&Me(A,le[6]),$e[0]&128&&W!==(W=le[7]?"area":"bars")&&ke(G,W)},i:ye,o:ye,d(le){le&&fe(t),kt(oe,le),kt(Se,le),e[20](null),ae=!1,dt(ie)}}}let Li=1e3,uc=1e3;function IC(e,t,n){const r=["4:2","4:3","4:4","4:5","3:2","3:3","3:4","3:5"],i=Math.PI*2;let a,o=new CC,s=[],u=120,c=r[0],l=64,h=0,f=1,d=!1,m=0,p=[];const y=()=>{n(1,s=[]),R.inputs.length<1?console.warn("No MIDI device detected"):(R.inputs.forEach((A,$)=>{console.log(`MIDI device ${$}: ${A.name}`),A.addListener("noteon",_)}),n(1,s=[...R.inputs]))},_=A=>{p.length===0&&(m=A.timestamp);const $=(A.timestamp-m)/1e3;p.push($),g()},g=()=>{const A=Li/2,$=uc/2,U=Li*.4,W=U*.8,G=U*.9,H=U*1.1,X=U*.95,Y=Math.PI/2,I=a.getContext("2d"),ee=window.devicePixelRatio,te=a.getBoundingClientRect();n(0,a.width=te.width*ee,a),n(0,a.height=te.height*ee,a),I.scale(ee,ee),n(0,a.style.width=`${te.width}px`,a),n(0,a.style.height=`${te.height}px`,a),I.clearRect(0,0,Li,uc);const[re,K]=c.split(":").map(ie=>+ie),V=o0(u)*re,k=p.map(ie=>ie+h),q=k.map(ie=>ie%V).map(ie=>ie/V*i),D=Li*.08;if(!d){I.fillStyle="#f8f8f8",I.strokeStyle="#aaa";const ie=l*re/4,oe=b7().domain([0,i]).thresholds(lt(ie).map(Se=>Se/ie*i))(q),We=tt(oe,Se=>Se.length);for(const Se of oe){if(Se.length===0)continue;const le=Se.length/We*D,$e=U+le,we=Se.x0-Y,kn=Math.cos(we),pi=Math.sin(we),bi=Se.x1-Y,fu=Math.cos(bi),Ey=Math.sin(bi);I.beginPath(),I.moveTo(A+kn*U,$+pi*U),I.lineTo(A+kn*$e,$+pi*$e),I.arc(A,$,$e,we,bi),I.lineTo(A+fu*U,$+Ey*U),I.closePath(),I.fill(),I.stroke()}}if(d&&q.length>0){let ie=4/l;const Se=NC(q,{bandwidth:ie,pad:.1,bins:360}).bandwidth(ie),le=tt([...Se],we=>we.y);console.log([...Se]),I.beginPath();let $e=0;for(const we of Se){console.log($e++,we);const kn=we.x-Y,pi=U+we.y/le*D,bi=Math.cos(kn),fu=Math.sin(kn);I.lineTo(A+bi*pi,$+fu*pi)}I.closePath(),I.fillStyle="#e4f0fa",I.fill(),I.strokeStyle="#aaa",I.stroke()}if(f>0){I.lineWidth=3;const ie=oe=>la(1-oe),ue=k.slice(-f);for(const[oe,We]of ue.entries()){const Se=We/V*i-Y,le=Math.cos(Se),$e=Math.sin(Se);I.strokeStyle=ie(oe/ue.length),I.beginPath(),I.moveTo(A+le*U,$+$e*U),I.lineTo(A+le*H,$+$e*H),I.stroke()}}I.strokeStyle="#aaa",I.fillStyle="white",rv(I,A,$,U),I.lineWidth=2,I.fill(),I.stroke();const se=lt(re).map(ie=>i/re*ie-Y),ae=lt(re*K).map(ie=>i/(re*K)*ie-Y);I.beginPath(),I.lineWidth=2;for(const ie of se){const ue=Math.cos(ie),oe=Math.sin(ie);I.moveTo(A+ue*W,$+oe*W),I.lineTo(A+ue*X,$+oe*X)}I.stroke(),I.lineWidth=1,I.beginPath();for(const ie of ae){const ue=Math.cos(ie),oe=Math.sin(ie);I.moveTo(A+ue*G,$+oe*G),I.lineTo(A+ue*X,$+oe*X)}I.stroke()},M=()=>{const $=JSON.stringify({tempo:u,grid:c,binNote:l,adjustTime:h,noteTickLimit:f,noteOnTimes:p,showKde:d},void 0,2),U=new Blob([$],{type:"text/plain;charset=utf-8"});Ya(U,"live-subdivision.json")},b=async A=>{const U=await A.target.files[0].text(),W=JSON.parse(U);(p.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,u=W.tempo),n(3,c=W.grid),n(4,l=W.binNote),n(5,h=W.adjustTime),n(6,f=W.noteTickLimit),n(8,p=W.noteOnTimes),n(7,d=W.showKde??!1),g())};Hn(()=>{R.enable().then(y).catch(A=>alert(A)),g()}),zn(()=>{o.stop();for(const A of R.inputs)A.removeListener()});function x(){u=Ie(this.value),n(2,u)}function w(){c=sr(this),n(3,c),n(9,r)}function S(){l=sr(this),n(4,l)}function E(){h=Ie(this.value),n(5,h)}function N(){f=Ie(this.value),n(6,f)}const F=()=>{n(7,d=!d),g()};function P(A){nn[A?"unshift":"push"](()=>{a=A,n(0,a)})}return[a,s,u,c,l,h,f,d,p,r,o,g,M,b,x,w,S,E,N,F,P,()=>{confirm("Reset played notes?")&&(n(8,p=[]),g())},()=>document.querySelector("#file-input").click(),()=>{o.toggle(u,+c.split(":")[0])}]}class DC extends Ut{constructor(t){super(),Gt(this,t,IC,kC,Ft,{},null,[-1,-1])}}function RC(e){return 60*1/e}function OC(e,t,n){const r=e.slice();return r[21]=t[n],r}function BC(e,t,n){const r=e.slice();return r[21]=t[n],r}function LC(e){let t;return{c(){t=C("option"),t.textContent=`1/${e[21]} note`,t.__value=e[21],Me(t,t.__value)},m(n,r){he(n,t,r)},p:ye,d(n){n&&fe(t)}}}function FC(e){let t;return{c(){t=C("option"),t.textContent=`1/${e[21]} note`,t.__value=e[21],Me(t,t.__value)},m(n,r){he(n,t,r)},p:ye,d(n){n&&fe(t)}}}function mm(e){let t,n,r=e[7].toFixed(1)+"",i,a;return{c(){t=C("div"),n=Q("estimated: "),i=Q(r),a=Q(" bpm"),T(t,"class","svelte-1ruiyqw")},m(o,s){he(o,t,s),v(t,n),v(t,i),v(t,a)},p(o,s){s&128&&r!==(r=o[7].toFixed(1)+"")&&ke(i,r)},d(o){o&&fe(t)}}}function GC(e){let t,n,r,i,a,o=e[1].length+"",s,u,c,l,h,f,d,m,p,y,_,g,M,b,x,w,S,E,N,F,P,L,j,z,A,$,U,W,G,H,X,Y,I,ee,te,re=Be([16,32,64,128]),K=[];for(let q=0;q<4;q+=1)K[q]=LC(BC(e,re,q));let V=Be([16,32,64,128]),k=[];for(let q=0;q<4;q+=1)k[q]=FC(OC(e,V,q));let O=e[7]&&mm(e);return{c(){t=C("main"),n=C("h2"),n.textContent="Tempo Drift",r=Z(),i=C("p"),a=Q("Connect a MIDI instrument (currently "),s=Q(o),u=Q(` connected), choose
        your tempo, and start playing. The time between two note onsets will be shown
        as a bar, so you can see how well you still hit, for example, quarter notes
        after playing for some time. Bar heights are either exact or rounded to the
        closest, for example, 64th note (binning dropdown). You can filter very short
        inter-note times, which happen whan playing two notes at roughly the same
        time as in a chord.`),c=Z(),l=C("div"),h=C("label"),f=Q(`tempo
            `),d=C("input"),m=Z(),p=C("label"),y=Q(`binning
            `),_=C("select"),g=C("option"),g.textContent="off";for(let q=0;q<4;q+=1)K[q].c();M=Z(),b=C("label"),x=Q(`filtering
            `),w=C("select"),S=C("option"),S.textContent="off";for(let q=0;q<4;q+=1)k[q].c();E=Z(),N=C("label"),F=Q(`bars
            `),P=C("input"),L=Z(),j=C("div"),z=Z(),O&&O.c(),A=Z(),$=C("div"),U=C("button"),U.textContent="reset",W=Z(),G=C("button"),G.textContent="export",H=Z(),X=C("button"),X.textContent="import",Y=Z(),I=C("input"),T(i,"class","explanation"),T(d,"type","number"),T(d,"step","1"),T(d,"min","10"),T(d,"max","400"),at(d,"width","55px"),T(h,"title","The tempo in beats per minute (bpm)"),g.__value=0,Me(g,g.__value),e[3]===void 0&&rn(()=>e[12].call(_)),T(p,"title","You can change between seeing exact bar heights and binned (rounded) heights."),S.__value=0,Me(S,S.__value),e[4]===void 0&&rn(()=>e[13].call(w)),T(b,"title","You can filter out bars that are shorter than a given note duration."),T(P,"type","number"),T(P,"step","25"),T(P,"min","25"),T(P,"max","1000"),at(P,"width","55px"),T(N,"title","The number of most recent notes that are shown as bars."),T(l,"class","control svelte-1ruiyqw"),T(j,"class","visualization svelte-1ruiyqw"),T(U,"title","Clear all played notes"),T(G,"title","Export all data and settings"),T(X,"title","Export all data and settings"),T(I,"type","file"),T(I,"id","file-input"),at(I,"display","none"),T($,"class","control svelte-1ruiyqw"),T(t,"class","demo")},m(q,D){he(q,t,D),v(t,n),v(t,r),v(t,i),v(i,a),v(i,s),v(i,u),v(t,c),v(t,l),v(l,h),v(h,f),v(h,d),Me(d,e[2]),v(l,m),v(l,p),v(p,y),v(p,_),v(_,g);for(let se=0;se<4;se+=1)K[se]&&K[se].m(_,null);Je(_,e[3],!0),v(l,M),v(l,b),v(b,x),v(b,w),v(w,S);for(let se=0;se<4;se+=1)k[se]&&k[se].m(w,null);Je(w,e[4],!0),v(l,E),v(l,N),v(N,F),v(N,P),Me(P,e[5]),v(t,L),v(t,j),e[15](j),v(t,z),O&&O.m(t,null),v(t,A),v(t,$),v($,U),v($,W),v($,G),v($,H),v($,X),v($,Y),v($,I),ee||(te=[ne(d,"input",e[11]),ne(d,"change",e[8]),ne(_,"change",e[12]),ne(_,"change",e[8]),ne(w,"change",e[13]),ne(w,"change",e[8]),ne(P,"input",e[14]),ne(P,"change",e[8]),ne(U,"click",e[16]),ne(G,"click",e[9]),ne(X,"click",e[17]),ne(I,"input",e[10])],ee=!0)},p(q,[D]){D&2&&o!==(o=q[1].length+"")&&ke(s,o),D&4&&Ie(d.value)!==q[2]&&Me(d,q[2]),D&8&&Je(_,q[3]),D&16&&Je(w,q[4]),D&32&&Ie(P.value)!==q[5]&&Me(P,q[5]),q[7]?O?O.p(q,D):(O=mm(q),O.c(),O.m(t,A)):O&&(O.d(1),O=null)},i:ye,o:ye,d(q){q&&fe(t),kt(K,q),kt(k,q),e[15](null),O&&O.d(),ee=!1,dt(te)}}}let UC=1e3,qC=600;function HC(e,t,n){let r,i=[],a=120,o=64,s=0,u=50,c=0,l=[],h=0;const f=()=>{n(1,i=[]),R.inputs.length<1?console.warn("No MIDI device detected"):(R.inputs.forEach((E,N)=>{console.log(`MIDI device ${N}: ${E.name}`),E.addListener("noteon",d)}),n(1,i=[...R.inputs]))},d=E=>{l.length===0&&(c=E.timestamp);const N=(E.timestamp-c)/1e3;l.push(N),m()},m=()=>{const E=o0(a),N=E/4,F=E/2,P=E*2,L=E*4,j=[0,N,F,E,P],z=["0","","","",""];let A=l.map((G,H)=>H===0?0:G-l[H-1]);if(s!==0){const G=L/s;A=A.filter(H=>H>=G)}let $=A;if(o!==0){const G=L/o;$=A.map(H=>Math.round(H/G)*G)}const U=tn({width:UC,height:qC,marginLeft:35,marginRight:1,x:{axis:!1},y:{ticks:j,tickFormat:G=>{const H=j.indexOf(G);return z[H]},domain:[0,P*1.1],tickSize:0},marks:[My($.slice(-u),{x:(G,H)=>H,y:G=>G,fill:"#ddd",inset:0,dx:.5}),hi(j,{stroke:"#888"})]});n(0,r.textContent="",r),r.appendChild(U);const W=A.filter(G=>G>.8*N&&G<1.25*E).slice(-24).map(G=>G<.6*E?G*2:G>1.5*E?G/2:G);n(7,h=RC(V0(W)))},p=()=>{const N=JSON.stringify({tempo:a,binNote:o,filterNote:s,barLimit:u,noteOnTimes:l},void 0,2),F=new Blob([N],{type:"text/plain;charset=utf-8"});Ya(F,"tempo-drift.json")},y=async E=>{const F=await E.target.files[0].text(),P=JSON.parse(F);(l.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,a=P.tempo),n(3,o=P.binNote),n(4,s=P.filterNote),n(5,u=P.barLimit),n(6,l=P.noteOnTimes),m())};Hn(()=>{R.enable().then(f).catch(E=>alert(E)),m()}),zn(()=>{for(const E of R.inputs)E.removeListener()});function _(){a=Ie(this.value),n(2,a)}function g(){o=sr(this),n(3,o)}function M(){s=sr(this),n(4,s)}function b(){u=Ie(this.value),n(5,u)}function x(E){nn[E?"unshift":"push"](()=>{r=E,n(0,r)})}return[r,i,a,o,s,u,l,h,m,p,y,_,g,M,b,x,()=>{confirm("Reset played notes?")&&(n(6,l=[]),m())},()=>document.querySelector("#file-input").click()]}class zC extends Ut{constructor(t){super(),Gt(this,t,HC,GC,Ft,{})}}function VC(e){let t,n,r,i,a,o=e[1].length+"",s,u,c,l,h,f,d,m,p=e[2]?"on":"off",y,_,g,M,b,x,w,S,E,N,F,P,L,j,z,A,$,U;return{c(){t=C("main"),n=C("h2"),n.textContent="Dynamics",r=Z(),i=C("p"),a=Q("Connect a MIDI instrument (currently "),s=Q(o),u=Q(` connected) and
        start playing. The loudness of each note will be shown as a bar. Bar heights
        are either exact or rounded to the
        `),c=C("a"),c.textContent="closest rough dynamics",l=Q(", for example a forte."),h=Z(),f=C("div"),d=C("button"),m=Q("binning is "),y=Q(p),_=Z(),g=C("label"),M=Q(`bars
            `),b=C("input"),x=Z(),w=C("div"),S=Z(),E=C("div"),N=C("button"),N.textContent="reset",F=Z(),P=C("button"),P.textContent="export",L=Z(),j=C("button"),j.textContent="import",z=Z(),A=C("input"),T(c,"href","https://en.wikipedia.org/wiki/Dynamics_(music)"),T(i,"class","explanation"),T(d,"title","You can change between seeing exact bar heights and binned (rounded) heights."),T(b,"type","number"),T(b,"step","25"),T(b,"min","25"),T(b,"max","1000"),at(b,"width","55px"),T(g,"title","The number of most recent notes that are shown as bars."),T(f,"class","control svelte-1p166uy"),T(w,"class","visualization svelte-1p166uy"),T(N,"title","Clear all played notes"),T(P,"title","Export all data and settings"),T(j,"title","Export all data and settings"),T(A,"type","file"),T(A,"id","file-input"),at(A,"display","none"),T(E,"class","control svelte-1p166uy"),T(t,"class","demo")},m(W,G){he(W,t,G),v(t,n),v(t,r),v(t,i),v(i,a),v(i,s),v(i,u),v(i,c),v(i,l),v(t,h),v(t,f),v(f,d),v(d,m),v(d,y),v(f,_),v(f,g),v(g,M),v(g,b),Me(b,e[3]),v(t,x),v(t,w),e[10](w),v(t,S),v(t,E),v(E,N),v(E,F),v(E,P),v(E,L),v(E,j),v(E,z),v(E,A),$||(U=[ne(d,"click",e[8]),ne(b,"input",e[9]),ne(b,"change",e[5]),ne(N,"click",e[11]),ne(P,"click",e[6]),ne(j,"click",e[12]),ne(A,"input",e[7])],$=!0)},p(W,[G]){G&2&&o!==(o=W[1].length+"")&&ke(s,o),G&4&&p!==(p=W[2]?"on":"off")&&ke(y,p),G&8&&Ie(b.value)!==W[3]&&Me(b,W[3])},i:ye,o:ye,d(W){W&&fe(t),e[10](null),$=!1,dt(U)}}}let jC=1e3,YC=600;function WC(e,t,n){let r,i=[];const o=new Map([[0,"silent"],[16,"ppp"],[32,"pp"],[48,"p"],[64,"mp"],[80,"mf"],[96,"f"],[112,"ff"],[127,"fff"]]);let s=!0,u=50,c=[];const l=()=>{console.log("MIDI enabled"),n(1,i=[]),R.inputs.length<1?console.warn("No MIDI device detected"):(R.inputs.forEach((b,x)=>{console.log(`MIDI device ${x}: ${b.name}`),b.addListener("noteon",h)}),n(1,i=[...R.inputs]))},h=b=>{c.push(b.rawVelocity),f()},f=()=>{console.log("draw");let b=c;s&&(b=c.map(S=>{for(const E of o.keys())if(S<=E)return E}));const x=[...o.keys()],w=tn({width:jC,height:YC,marginLeft:45,marginRight:1,x:{axis:!1},y:{ticks:x,tickFormat:S=>o.get(S),domain:[0,128],tickSize:0},marks:[My(b.slice(-u),{x:(S,E)=>E,y:S=>S,fill:"#ddd",inset:0,dx:.5}),hi(x,{stroke:"#888"})]});n(0,r.textContent="",r),r.appendChild(w)},d=()=>{const x=JSON.stringify({isBinning:s,barLimit:u,noteVelocities:c},void 0,2),w=new Blob([x],{type:"text/plain;charset=utf-8"});Ya(w,"tempo-drift.json")},m=async b=>{const w=await b.target.files[0].text(),S=JSON.parse(w);(c.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,s=S.isBinning),n(3,u=S.barLimit),n(4,c=S.noteVelocities),f())};Hn(()=>{R.enable().then(l).catch(b=>alert(b)),f()}),zn(()=>{for(const b of R.inputs)b.removeListener()});const p=()=>{n(2,s=!s),f()};function y(){u=Ie(this.value),n(3,u)}function _(b){nn[b?"unshift":"push"](()=>{r=b,n(0,r)})}return[r,i,s,u,c,f,d,m,p,y,_,()=>{confirm("Reset played notes?")&&(n(4,c=[]),f())},()=>document.querySelector("#file-input").click()]}class XC extends Ut{constructor(t){super(),Gt(this,t,WC,VC,Ft,{})}}function KC(e){let t,n,r,i,a,o=e[1].length+"",s,u,c,l,h,f,d=e[2]?"hidden":"shown",m,p,y,_,g=e[3]?"on":"off",M,b,x,w,S=e[4]?"on":"off",E,N,F,P,L,j,z,A,$,U,W,G,H,X;return{c(){t=C("main"),n=C("h2"),n.textContent="Improvisation Intervals",r=Z(),i=C("p"),a=Q("Connect a MIDI instrument (currently "),s=Q(o),u=Q(` connected) and
        start playing. The bar chart below shows how often you played each interval:
        when you go up in pitch, the bar of the played interval in the top half will
        increase. If you go down, it will show up in the bottom half. Colors denote
        the type of interval, so you can quickly see if you play, for example, more
        major or minor intervals.`),c=Z(),l=C("div"),h=C("button"),f=Q("unison "),m=Q(d),p=Z(),y=C("button"),_=Q("colors "),M=Q(g),b=Z(),x=C("button"),w=Q("semitones "),E=Q(S),N=Z(),F=C("div"),P=Z(),L=C("div"),j=C("button"),j.textContent="reset",z=Z(),A=C("button"),A.textContent="export",$=Z(),U=C("button"),U.textContent="import",W=Z(),G=C("input"),T(i,"class","explanation"),T(h,"title","Toggle filtering unison intervals"),T(y,"title","Use colors for interval types"),T(x,"title","Show number of semitones instead of musical names for intervals on the y axis"),T(l,"class","control svelte-13613lz"),T(F,"class","visualization svelte-13613lz"),T(j,"title","Clear all played notes"),T(A,"title","Export all data and settings"),T(U,"title","Export all data and settings"),T(G,"type","file"),T(G,"id","file-input"),at(G,"display","none"),T(L,"class","control svelte-13613lz"),T(t,"class","demo")},m(Y,I){he(Y,t,I),v(t,n),v(t,r),v(t,i),v(i,a),v(i,s),v(i,u),v(t,c),v(t,l),v(l,h),v(h,f),v(h,m),v(l,p),v(l,y),v(y,_),v(y,M),v(l,b),v(l,x),v(x,w),v(x,E),v(t,N),v(t,F),e[12](F),v(t,P),v(t,L),v(L,j),v(L,z),v(L,A),v(L,$),v(L,U),v(L,W),v(L,G),H||(X=[ne(h,"click",e[9]),ne(y,"click",e[10]),ne(x,"click",e[11]),ne(j,"click",e[13]),ne(A,"click",e[7]),ne(U,"click",e[14]),ne(G,"input",e[8])],H=!0)},p(Y,[I]){I&2&&o!==(o=Y[1].length+"")&&ke(s,o),I&4&&d!==(d=Y[2]?"hidden":"shown")&&ke(m,d),I&8&&g!==(g=Y[3]?"on":"off")&&ke(M,g),I&16&&S!==(S=Y[4]?"on":"off")&&ke(E,S)},i:ye,o:ye,d(Y){Y&&fe(t),e[12](null),H=!1,dt(X)}}}let ZC=1e3,JC=650;function QC(e,t,n){let r,i=[],a=!0,o=!1,s=!1,u=[];const c=[{semitones:0,name:"Unison",short:"P1",type:"perfect"},{semitones:1,name:"Minor 2nd",short:"m2",type:"minor"},{semitones:2,name:"Major 2nd",short:"M2",type:"major"},{semitones:3,name:"Minor 3rd",short:"m3",type:"minor"},{semitones:4,name:"Major 3rd",short:"M3",type:"major"},{semitones:5,name:"Perfect 4th",short:"P4",type:"perfect"},{semitones:6,name:"Augmented 4th",short:"A4",type:"tritone"},{semitones:7,name:"Perfect 5th",short:"P5",type:"perfect"},{semitones:8,name:"Minor 6th",short:"m6",type:"minor"},{semitones:9,name:"Major 6th",short:"M6",type:"major"},{semitones:10,name:"Minor 7th",short:"m7",type:"minor"},{semitones:11,name:"Major 7th",short:"M7",type:"major"},{semitones:12,name:"Perfect 8ve",short:"P8",type:"perfect"}],l=()=>{n(1,i=[]),R.inputs.length<1?console.warn("No MIDI device detected"):(R.inputs.forEach((x,w)=>{console.log(`MIDI device ${w}: ${x.name}`),x.addListener("noteon",h)}),n(1,i=[...R.inputs]))},h=x=>{const w={number:x.note.number,velocity:x.rawVelocity,time:x.timestamp};u.push(w),f()},f=()=>{let x=u.map((E,N)=>N===0?0:E.number-u[N-1].number);a&&(x=x.filter(E=>E!==0)),x=x.map(E=>{if(Math.abs(E)<=12)return E;{const N=E>0?12:-12;for(;Math.abs(E)>12;)E-=N;return E}});const w=U0(x,E=>E).map(([E,N])=>({interval:E,count:N.length})),S=tn({width:ZC,height:JC,marginLeft:120,marginRight:10,color:{legend:o,domain:["minor","major","perfect","tritone"],range:["#7da2e8","#ed796a","gold","#ccc"]},x:{},y:{tickFormat:s?E=>E:E=>E>=0?c[E].name:c[-E].name,domain:lt(-12,13,1),label:` going down ${" ".repeat(75)} going up      `,reverse:!0},marks:[hi([-12,0,12],{stroke:"#888",strokeWidth:1.5}),Pf(w,{x:"count",y:"interval",fill:o?E=>c[Math.abs(E.interval)].type:"#ddd",dx:.5,rx:4})]});n(0,r.textContent="",r),r.appendChild(S)},d=()=>{const w=JSON.stringify({filterUnison:a,useColors:o,useSemitones:s,notes:u},void 0,2),S=new Blob([w],{type:"text/plain;charset=utf-8"});Ya(S,"tempo-drift.json")},m=async x=>{const S=await x.target.files[0].text(),E=JSON.parse(S);(u.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,a=E.filterUnison),n(3,o=E.useColors),n(4,s=E.useSemitones),n(5,u=E.notes),f())};Hn(()=>{R.enable().then(l).catch(x=>alert(x)),f()}),zn(()=>{for(const x of R.inputs)x.removeListener()});const p=()=>{n(2,a=!a),f()},y=()=>{n(3,o=!o),f()},_=()=>{n(4,s=!s),f()};function g(x){nn[x?"unshift":"push"](()=>{r=x,n(0,r)})}return[r,i,a,o,s,u,f,d,m,p,y,_,g,()=>{confirm("Reset played notes?")&&(n(5,u=[]),f())},()=>document.querySelector("#file-input").click()]}class eT extends Ut{constructor(t){super(),Gt(this,t,QC,KC,Ft,{})}}function pm(e,t,n){const r=e.slice();return r[21]=t[n],r}function bm(e,t,n){const r=e.slice();return r[24]=t[n],r}function gm(e){let t,n=e[24]+"",r;return{c(){t=C("option"),r=Q(n),t.__value=e[24],Me(t,t.__value)},m(i,a){he(i,t,a),v(t,r)},p:ye,d(i){i&&fe(t)}}}function ym(e){let t,n=e[21]+"",r;return{c(){t=C("option"),r=Q(n),t.__value=e[21],Me(t,t.__value)},m(i,a){he(i,t,a),v(t,r)},p:ye,d(i){i&&fe(t)}}}function tT(e){let t,n,r,i,a,o=e[1].length+"",s,u,c,l,h,f,d,m,p,y,_,g,M,b=e[4]?"on":"off",x,w,S,E,N=e[5]?"shown":"hidden",F,P,L,j,z,A,$,U,W,G,H,X,Y,I,ee=Be(e[7]),te=[];for(let V=0;V<ee.length;V+=1)te[V]=gm(bm(e,ee,V));let re=Be(e[8]),K=[];for(let V=0;V<re.length;V+=1)K[V]=ym(pm(e,re,V));return{c(){t=C("main"),n=C("h2"),n.textContent="Improvisation Intervals",r=Z(),i=C("p"),a=Q("Connect a MIDI instrument (currently "),s=Q(o),u=Q(` connected) and
        start playing. The bar chart below shows how often you played each scale
        degree.`),c=Z(),l=C("div"),h=C("label"),f=Q(`scale
            `),d=C("select");for(let V=0;V<te.length;V+=1)te[V].c();m=Z(),p=C("select");for(let V=0;V<K.length;V+=1)K[V].c();y=Z(),_=C("div"),g=C("button"),M=Q("colors "),x=Q(b),w=Z(),S=C("button"),E=Q("non-scale notes "),F=Q(N),P=Z(),L=C("div"),j=Z(),z=C("div"),A=C("button"),A.textContent="reset",$=Z(),U=C("button"),U.textContent="export",W=Z(),G=C("button"),G.textContent="import",H=Z(),X=C("input"),T(i,"class","explanation"),e[2]===void 0&&rn(()=>e[12].call(d)),e[3]===void 0&&rn(()=>e[13].call(p)),T(l,"class","control svelte-13613lz"),T(g,"title","Use colors for root, in-scale, outside-scale"),T(S,"title","Show notes outside the scale"),T(_,"class","control svelte-13613lz"),T(L,"class","visualization svelte-13613lz"),T(A,"title","Clear all played notes"),T(U,"title","Export all data and settings"),T(G,"title","Export all data and settings"),T(X,"type","file"),T(X,"id","file-input"),at(X,"display","none"),T(z,"class","control svelte-13613lz"),T(t,"class","demo")},m(V,k){he(V,t,k),v(t,n),v(t,r),v(t,i),v(i,a),v(i,s),v(i,u),v(t,c),v(t,l),v(l,h),v(h,f),v(h,d);for(let O=0;O<te.length;O+=1)te[O]&&te[O].m(d,null);Je(d,e[2],!0),v(h,m),v(h,p);for(let O=0;O<K.length;O+=1)K[O]&&K[O].m(p,null);Je(p,e[3],!0),v(t,y),v(t,_),v(_,g),v(g,M),v(g,x),v(_,w),v(_,S),v(S,E),v(S,F),v(t,P),v(t,L),e[16](L),v(t,j),v(t,z),v(z,A),v(z,$),v(z,U),v(z,W),v(z,G),v(z,H),v(z,X),Y||(I=[ne(d,"change",e[12]),ne(d,"change",e[9]),ne(p,"change",e[13]),ne(p,"change",e[9]),ne(g,"click",e[14]),ne(S,"click",e[15]),ne(A,"click",e[17]),ne(U,"click",e[10]),ne(G,"click",e[18]),ne(X,"input",e[11])],Y=!0)},p(V,[k]){if(k&2&&o!==(o=V[1].length+"")&&ke(s,o),k&128){ee=Be(V[7]);let O;for(O=0;O<ee.length;O+=1){const q=bm(V,ee,O);te[O]?te[O].p(q,k):(te[O]=gm(q),te[O].c(),te[O].m(d,null))}for(;O<te.length;O+=1)te[O].d(1);te.length=ee.length}if(k&132&&Je(d,V[2]),k&256){re=Be(V[8]);let O;for(O=0;O<re.length;O+=1){const q=pm(V,re,O);K[O]?K[O].p(q,k):(K[O]=ym(q),K[O].c(),K[O].m(p,null))}for(;O<K.length;O+=1)K[O].d(1);K.length=re.length}k&264&&Je(p,V[3]),k&16&&b!==(b=V[4]?"on":"off")&&ke(x,b),k&32&&N!==(N=V[5]?"shown":"hidden")&&ke(F,N)},i:ye,o:ye,d(V){V&&fe(t),kt(te,V),kt(K,V),e[16](null),Y=!1,dt(I)}}}let nT=1e3,rT=650;function iT(e,t,n){let r,i=[],a="A",o="minor pentatonic",s=!0,u=!0,c=[];const l=Gy,h=eh.names(),f=()=>{n(1,i=[]),R.inputs.length<1?console.warn("No MIDI device detected"):(R.inputs.forEach((E,N)=>{console.log(`MIDI device ${N}: ${E.name}`),E.addListener("noteon",d)}),n(1,i=[...R.inputs]))},d=E=>{const N={number:E.note.number,velocity:E.rawVelocity,time:E.timestamp};c.push(N),m()},m=()=>{const E=l.indexOf(a),N=eh.get(`${a} ${o}`),F=N.notes.map(($,U)=>{const W=l.indexOf($);let G=W-E;return G=G>=0?G:G+12,{name:$,chroma:W,interval:N.intervals[U],degree:U,offset:G}}),P=new Set(F.map($=>$.offset)),j=c.map($=>$.number%12).map($=>{const U=$-E;return U>=0?U:U+12}),z=U0(j,$=>$).map(([$,U])=>({value:$,count:U.length})),A=tn({width:nT,height:rT,marginLeft:70,marginRight:10,color:{legend:s,domain:["root","scale","outside scale"],range:["#666","#aaa","#eee"]},y:{tickFormat:$=>l[($+E)%12],domain:u?lt(0,12,1):[...P],reverse:!0,label:"notes, increasing semitones from root "},marks:[Pf(z,{x:"count",y:"value",fill:$=>s?$.value===0?"#666":P.has($.value)?"#aaa":"#eee":"#ddd",dx:.5,rx:4})]});n(0,r.textContent="",r),r.appendChild(A)},p=()=>{const N=JSON.stringify({root:a,scale:o,useColors:s,showOutsideScale:u,notes:c},void 0,2),F=new Blob([N],{type:"text/plain;charset=utf-8"});Ya(F,"tempo-drift.json")},y=async E=>{const F=await E.target.files[0].text(),P=JSON.parse(F);(c.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,a=P.root),n(3,o=P.scale),n(4,s=P.useColors),n(5,u=P.showOutsideScale),n(6,c=P.notes),m())};Hn(()=>{R.enable().then(f).catch(E=>alert(E)),m()}),zn(()=>{for(const E of R.inputs)E.removeListener()});function _(){a=sr(this),n(2,a),n(7,l)}function g(){o=sr(this),n(3,o),n(8,h)}const M=()=>{n(4,s=!s),m()},b=()=>{n(5,u=!u),m()};function x(E){nn[E?"unshift":"push"](()=>{r=E,n(0,r)})}return[r,i,a,o,s,u,c,l,h,m,p,y,_,g,M,b,x,()=>{confirm("Reset played notes?")&&(n(6,c=[]),m())},()=>document.querySelector("#file-input").click()]}class aT extends Ut{constructor(t){super(),Gt(this,t,iT,tT,Ft,{})}}function oT(e){let t,n,r,i,a,o,s,u,c,l,h,f,d;return{c(){t=C("main"),n=C("h2"),n.textContent="Fretboard Heatmap",r=Z(),i=C("p"),i.textContent=`Connect a MIDI guitar and start playing. The heatmap below shows how
        often you played each fretboard position.`,a=Z(),o=C("div"),o.innerHTML="",s=Z(),u=C("div"),c=Z(),l=C("div"),h=C("button"),h.textContent="reset",T(i,"class","explanation"),T(o,"class","control"),T(u,"class","visualization"),T(h,"title","Clear all played notes"),T(l,"class","control"),T(t,"class","demo")},m(m,p){he(m,t,p),v(t,n),v(t,r),v(t,i),v(t,a),v(t,o),v(t,s),v(t,u),e[3](u),v(t,c),v(t,l),v(l,h),f||(d=ne(h,"click",e[4]),f=!0)},p:ye,i:ye,o:ye,d(m){m&&fe(t),e[3](null),f=!1,d()}}}let sT=1e3,uT=280,el=6,lT=24;function cT(e,t,n){let r=[64,59,55,50,45,40],i,a=[];const o=()=>{R.inputs.length<1?console.warn("No MIDI device detected"):(R.inputs.forEach((h,f)=>{console.log(`MIDI device ${f}: ${h.name}`),h.addListener("noteon",s)}),[...R.inputs])},s=h=>{const f={number:h.note.number,velocity:h.rawVelocity,time:h.timestamp,channel:h.message.channel};a.push(f),u()},u=()=>{const h=r.map(P5.fromMidiSharps),f=a.map(m=>{const p=m.channel-1;return{...m,string:p,fret:m.number-r[p]}}),d=tn({width:sT,height:uT,marginLeft:80,marginBottom:50,padding:0,x:{domain:lt(0,lT+1)},y:{domain:lt(0,el),tickFormat:m=>h[m]+" "+m},color:{legend:!0,marginLeft:100,width:400,scheme:"blues"},marks:[gs([3,5,7,9,15,17,19,21],{stroke:"#ddd"}),gs([0,12,24],{stroke:"#ddd",strokeWidth:2}),hi(lt(0,el),{stroke:"#ddd",strokeWidth:m=>Math.sqrt(el-m)}),iC(f,aS({fill:"count"},{x:"fret",y:"string",fill:"count",inset:.5,rx:"50%",tip:!0}))]});n(0,i.textContent="",i),i.appendChild(d)};Hn(()=>{R.enable().then(o).catch(h=>alert(h)),u()}),zn(()=>{for(const h of R.inputs)h.removeListener()});function c(h){nn[h?"unshift":"push"](()=>{i=h,n(0,i)})}return[i,a,u,c,()=>{confirm("Reset played notes?")&&(n(1,a=[]),u())}]}class fT extends Ut{constructor(t){super(),Gt(this,t,cT,oT,Ft,{})}}function hT(e){let t,n,r,i,a,o,s,u,c,l,h,f,d,m,p,y;return{c(){t=C("main"),n=C("h2"),n.textContent="Chord and Arpeggio Timing",r=Z(),i=C("p"),i.innerHTML="",a=Z(),o=C("div"),s=C("label"),u=Q(`time
            `),c=C("input"),l=Z(),h=C("div"),f=Z(),d=C("div"),m=C("button"),m.textContent="reset",T(i,"class","explanation"),T(c,"type","number"),T(c,"min","10"),T(c,"max","300"),T(c,"step","10"),T(s,"title","time in seconds for past notes to be shown"),T(o,"class","control"),T(h,"class","visualization"),T(m,"title","Clear all played notes"),T(d,"class","control"),T(t,"class","demo")},m(_,g){he(_,t,g),v(t,n),v(t,r),v(t,i),v(t,a),v(t,o),v(o,s),v(s,u),v(s,c),Me(c,e[1]),v(t,l),v(t,h),e[5](h),v(t,f),v(t,d),v(d,m),p||(y=[ne(c,"input",e[4]),ne(m,"click",e[6])],p=!0)},p(_,[g]){g&2&&Ie(c.value)!==_[1]&&Me(c,_[1])},i:ye,o:ye,d(_){_&&fe(t),e[5](null),p=!1,dt(y)}}}let tl=1e3,dT=500;function mT(e,t,n){let r,i=10,a=0,o=[];const s=()=>{R.inputs.length<1?console.warn("No MIDI device detected"):(R.inputs.forEach((d,m)=>{console.log(`MIDI device ${m}: ${d.name}`),d.addListener("noteon",u)}),[...R.inputs])},u=d=>{const m=(d.timestamp-a)/1e3,p={number:d.note.number,velocity:d.rawVelocity,time:m,channel:d.message.channel};o.push(p),c()},c=()=>{const d=tt(o,E=>E.time)+.5,m=d-i,p=o.filter(E=>E.end>m||E.end===void 0),y=.2,_=[];let g=[];for(const E of p)g.length===0||E.time-g.at(-1).time<y?g.push(E):(_.push(g),g=[E]);_.push(g);const M=_.map(E=>ut(E,N=>N.time)),b=M.slice(1).map((E,N)=>[M[N][0],E[0]]),x=tn({insetRight:10,width:tl,height:dT,marginLeft:60,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[m,d]},y:{label:"MIDI Pitch",grid:!0,reverse:!0,tickFormat:E=>Wi[E].label},marks:[om(p,{clip:!0,x:"time",y:"number",fill:"#ddd",stroke:"#ccc"})]}),w=tn({insetRight:10,width:tl,height:100,marginLeft:60,marginTop:0,marginBottom:0,padding:0,x:{label:null,domain:[m,d],axis:!1},y:{ticks:[],label:"durations (s)"},marks:[im(M,{clip:!0,x1:E=>E[0],x2:E=>E[1],y:0}),ys(M,{clip:!0,x:E=>E[0],y:0,text:(E,N)=>(E[1]-E[0]).toFixed(2),dy:10,textAnchor:"start"})]}),S=tn({insetRight:10,width:tl,height:100,marginLeft:60,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[m,d]},y:{ticks:[],label:"gaps (s)"},marks:[im(b,{clip:!0,x1:E=>E[0],x2:E=>E[1],y:0}),om(b,{x:E=>E[0]}),ys(b,{clip:!0,x:E=>E[0],y:0,text:(E,N)=>(E[1]-E[0]).toFixed(2),dx:2,dy:10,textAnchor:"start"})]});n(0,r.textContent="",r),r.appendChild(x),r.appendChild(w),r.appendChild(S)};Hn(()=>{R.enable().then(s).catch(d=>alert(d)),n(2,a=performance.now()),c()}),zn(()=>{for(const d of R.inputs)d.removeListener()});function l(){i=Ie(this.value),n(1,i)}function h(d){nn[d?"unshift":"push"](()=>{r=d,n(0,r)})}return[r,i,a,o,l,h,()=>{confirm("Reset played notes?")&&(n(3,o=[]),n(2,a=performance.now()))}]}class pT extends Ut{constructor(t){super(),Gt(this,t,mT,hT,Ft,{})}}function _m(e,t,n){const r=e.slice();return r[16]=t[n],r}function wm(e,t,n){const r=e.slice();return r[19]=t[n],r}function vm(e,t,n){const r=e.slice();return r[19]=t[n],r}function bT(e){let t,n,r,i,a,o,s,u;const c=[wT,_T],l=[];function h(f,d){return f[2]==="tools"?0:1}return r=h(e),i=l[r]=c[r](e),{c(){t=C("button"),t.textContent="< back",n=Z(),i.c(),a=lc()},m(f,d){he(f,t,d),he(f,n,d),l[r].m(f,d),he(f,a,d),o=!0,s||(u=ne(t,"click",e[14]),s=!0)},p(f,d){let m=r;r=h(f),r===m?l[r].p(f,d):(_a(),It(l[m],1,1,()=>{l[m]=null}),wa(),i=l[r],i?i.p(f,d):(i=l[r]=c[r](f),i.c()),vt(i,1),i.m(a.parentNode,a))},i(f){o||(vt(i),o=!0)},o(f){It(i),o=!1},d(f){f&&(fe(t),fe(n),fe(a)),l[r].d(f),s=!1,u()}}}function gT(e){let t,n,r,i,a,o,s,u,c,l,h,f,d,m=Be(e[5].values()),p=[];for(let b=0;b<m.length;b+=1)p[b]=Mm(vm(e,m,b));let y=Be(e[6].values()),_=[];for(let b=0;b<y.length;b+=1)_[b]=xm(wm(e,y,b));let g=Be(e[4]),M=[];for(let b=0;b<g.length;b+=1)M[b]=Sm(_m(e,g,b));return{c(){t=C("p"),t.textContent=`This page contains a collection of small tools (demos) that are each
      tailored to a specific musical skill and sometimes also specific kind of
      musical data.`,n=Z(),r=C("div"),i=Q(`task
      `);for(let b=0;b<p.length;b+=1)p[b].c();a=Z(),o=C("div"),s=Q(`instrument
      `);for(let b=0;b<_.length;b+=1)_[b].c();u=Z(),c=C("div");for(let b=0;b<M.length;b+=1)M[b].c();l=Z(),h=C("button"),h.textContent="Tools",T(t,"class","explanation"),T(c,"class","grid")},m(b,x){he(b,t,x),he(b,n,x),he(b,r,x),v(r,i);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(r,null);he(b,a,x),he(b,o,x),v(o,s);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(o,null);he(b,u,x),he(b,c,x);for(let w=0;w<M.length;w+=1)M[w]&&M[w].m(c,null);he(b,l,x),he(b,h,x),f||(d=ne(h,"click",e[13]),f=!0)},p(b,x){if(x&168){m=Be(b[5].values());let w;for(w=0;w<m.length;w+=1){const S=vm(b,m,w);p[w]?p[w].p(S,x):(p[w]=Mm(S),p[w].c(),p[w].m(r,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=m.length}if(x&194){y=Be(b[6].values());let w;for(w=0;w<y.length;w+=1){const S=wm(b,y,w);_[w]?_[w].p(S,x):(_[w]=xm(S),_[w].c(),_[w].m(o,null))}for(;w<_.length;w+=1)_[w].d(1);_.length=y.length}if(x&286){g=Be(b[4]);let w;for(w=0;w<g.length;w+=1){const S=_m(b,g,w);M[w]?M[w].p(S,x):(M[w]=Sm(S),M[w].c(),M[w].m(c,null))}for(;w<M.length;w+=1)M[w].d(1);M.length=g.length}},i:ye,o:ye,d(b){b&&(fe(t),fe(n),fe(r),fe(a),fe(o),fe(u),fe(c),fe(l),fe(h)),kt(p,b),kt(_,b),kt(M,b),f=!1,d()}}}function yT(e){let t,n,r;return{c(){t=C("input"),T(t,"type","password"),T(t,"placeholder","password")},m(i,a){he(i,t,a),Me(t,e[0]),n||(r=ne(t,"input",e[9]),n=!0)},p(i,a){a&1&&t.value!==i[0]&&Me(t,i[0])},i:ye,o:ye,d(i){i&&fe(t),n=!1,r()}}}function _T(e){let t,n,r;var i=e[2].component;function a(o,s){return{}}return i&&(t=Co(i,a())),{c(){t&&Yi(t.$$.fragment),n=lc()},m(o,s){t&&Hr(t,o,s),he(o,n,s),r=!0},p(o,s){if(s&4&&i!==(i=o[2].component)){if(t){_a();const u=t;It(u.$$.fragment,1,0,()=>{zr(u,1)}),wa()}i?(t=Co(i,a()),Yi(t.$$.fragment),vt(t.$$.fragment,1),Hr(t,n.parentNode,n)):t=null}},i(o){r||(t&&vt(t.$$.fragment,o),r=!0)},o(o){t&&It(t.$$.fragment,o),r=!1},d(o){o&&fe(n),t&&zr(t,o)}}}function wT(e){let t,n;return t=new _C({}),{c(){Yi(t.$$.fragment)},m(r,i){Hr(t,r,i),n=!0},p:ye,i(r){n||(vt(t.$$.fragment,r),n=!0)},o(r){It(t.$$.fragment,r),n=!1},d(r){zr(t,r)}}}function Mm(e){let t,n=e[19]+"",r,i,a,o,s;function u(){return e[10](e[19])}return{c(){t=C("button"),r=Q(n),i=Z(),T(t,"class",a=No(e[3].has(e[19])?"active":"hidden")+" svelte-1q7nmnw")},m(c,l){he(c,t,l),v(t,r),v(t,i),o||(s=ne(t,"click",u),o=!0)},p(c,l){e=c,l&8&&a!==(a=No(e[3].has(e[19])?"active":"hidden")+" svelte-1q7nmnw")&&T(t,"class",a)},d(c){c&&fe(t),o=!1,s()}}}function xm(e){let t,n=e[19]+"",r,i,a,o,s;function u(){return e[11](e[19])}return{c(){t=C("button"),r=Q(n),i=Z(),T(t,"class",a=No(e[1].has(e[19])?"active":"hidden")+" svelte-1q7nmnw")},m(c,l){he(c,t,l),v(t,r),v(t,i),o||(s=ne(t,"click",u),o=!0)},p(c,l){e=c,l&2&&a!==(a=No(e[1].has(e[19])?"active":"hidden")+" svelte-1q7nmnw")&&T(t,"class",a)},d(c){c&&fe(t),o=!1,s()}}}function Em(e){let t,n,r,i=e[16].description+"",a,o,s,u;function c(){return e[12](e[16])}return{c(){t=C("div"),n=C("h2"),n.textContent=`${e[16].title}`,r=Z(),a=Q(i),o=Z(),T(t,"class","card")},m(l,h){he(l,t,h),v(t,n),v(t,r),v(t,a),v(t,o),s||(u=ne(t,"click",c),s=!0)},p(l,h){e=l},d(l){l&&fe(t),s=!1,u()}}}function Sm(e){let t=e[3].has(e[16].task)&&e[8](e[1],e[16].instruments),n,r=t&&Em(e);return{c(){r&&r.c(),n=lc()},m(i,a){r&&r.m(i,a),he(i,n,a)},p(i,a){a&10&&(t=i[3].has(i[16].task)&&i[8](i[1],i[16].instruments)),t?r?r.p(i,a):(r=Em(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){i&&fe(n),r&&r.d(i)}}}function vT(e){let t,n,r,i,a,o;const s=[yT,gT,bT],u=[];function c(l,h){return l[0]!==MT?0:l[2]?2:1}return i=c(e),a=u[i]=s[i](e),{c(){t=C("main"),n=C("h1"),n.textContent="Data-Driven Music Education Demos",r=Z(),a.c()},m(l,h){he(l,t,h),v(t,n),v(t,r),u[i].m(t,null),o=!0},p(l,[h]){let f=i;i=c(l),i===f?u[i].p(l,h):(_a(),It(u[f],1,1,()=>{u[f]=null}),wa(),a=u[i],a?a.p(l,h):(a=u[i]=s[i](l),a.c()),vt(a,1),a.m(t,null))},i(l){o||(vt(a),o=!0)},o(l){It(a),o=!1},d(l){l&&fe(t),u[i].d()}}}let MT="rhyvis";function xT(e,t,n){const r=[{id:"sub-division",title:"Sub-Division",description:"Learn rhythmic playing in different sub-divisions",task:"timing",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:DC},{id:"tempo-drift",title:"Tempo Drift",description:"Keep your tempo constant over a longer stretch of playing",task:"timing",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:zC},{id:"dynamics",title:"Dynamics",description:"Check how well you control the loudness of notes",tags:["task:dynamics","input:MIDI","encoding:bars"],task:"dynamics",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:XC},{id:"improvisation-intervals",title:"Improvisation Intervals",description:"See how often you use different intervals in improvisation",task:"pitch",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:eT},{id:"improvisation-scale-degrees",title:"Improvisation Scale Degrees",description:"See how often you use different scale degrees in improvisation",task:"pitch",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:aT},{id:"fretboard-heatmap",title:"Fretboard Heatmap",description:"See how often you play different fretboard positions",task:"pitch",input:"MIDI",instruments:["guitar/bass"],component:fT},{id:"chord-arpeggio-timing",title:"Chord and Arpeggio Timing",description:"See how spaced out the notes in a chord or arpeggio are, and how consistent the timing between consecutive chords/arpeggios is",task:"timing",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:pT}];let i=null;const a=Ry(window,"d");a&&a!==""&&(i=r.filter(M=>M.id===a)[0]);let o=localStorage.getItem("pwd")??"";window.onpopstate=M=>{i!==null&&n(2,i=null)};const s=new Set(r.flatMap(M=>M.task).sort()),u=new Set(r.flatMap(M=>M.instruments).sort());let c=new Set(s),l=new Set(u);const h=(M,b)=>(M.has(b)?M.delete(b):M.add(b),new Set(M)),f=(M,b)=>{for(const x of b)if(M.has(x))return!0;return!1};function d(){o=this.value,n(0,o)}const m=M=>n(3,c=h(c,M)),p=M=>n(1,l=h(l,M)),y=M=>{n(2,i=M),du(window,"d",M.id)},_=()=>{n(2,i="tools"),du(window,"d","tools")},g=()=>{n(2,i=null),du(window,"d","")};return e.$$.update=()=>{e.$$.dirty&1&&localStorage.setItem("pwd",o),e.$$.dirty&2&&console.log(l)},[o,l,i,c,r,s,u,h,f,d,m,p,y,_,g]}class ET extends Ut{constructor(t){super(),Gt(this,t,xT,vT,Ft,{})}}new ET({target:document.getElementById("app")});

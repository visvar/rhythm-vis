var $_=Object.defineProperty;var k_=(e,t,n)=>t in e?$_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fo=(e,t,n)=>(k_(e,typeof t!="symbol"?t+"":t,n),n),oh=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var Ne=(e,t,n)=>(oh(e,t,"read from private field"),n?n.call(e):t.get(e)),yt=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Gt=(e,t,n,r)=>(oh(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var sh=(e,t,n,r)=>({set _(i){Gt(e,t,i,n)},get _(){return Ne(e,t,r)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function oe(){}function E1(e){return e()}function lh(){return Object.create(null)}function Fe(e){e.forEach(E1)}function S1(e){return typeof e=="function"}function Ue(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function I_(e){return Object.keys(e).length===0}function Vo(e){return e??""}function b(e,t){e.appendChild(t)}function le(e,t,n){e.insertBefore(t,n||null)}function ae(e){e.parentNode&&e.parentNode.removeChild(e)}function tt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function P(e){return document.createElement(e)}function X(e){return document.createTextNode(e)}function R(){return X(" ")}function Ou(){return X("")}function K(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function N(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _e(e){return e===""?null:+e}function D_(e){return Array.from(e.childNodes)}function Se(e,t){t=""+t,e.data!==t&&(e.data=t)}function ce(e,t){e.value=t??""}function _t(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function Le(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Yt(e){const t=e.querySelector(":checked");return t&&t.__value}function jo(e,t){return new e(t)}let sa;function Qi(e){sa=e}function A1(){if(!sa)throw new Error("Function called outside component initialization");return sa}function st(e){A1().$$.on_mount.push(e)}function lt(e){A1().$$.on_destroy.push(e)}const Hr=[],ot=[];let Xr=[];const ch=[],R_=Promise.resolve();let Pc=!1;function L_(){Pc||(Pc=!0,R_.then(P1))}function bt(e){Xr.push(e)}const Dl=new Set;let Fr=0;function P1(){if(Fr!==0)return;const e=sa;do{try{for(;Fr<Hr.length;){const t=Hr[Fr];Fr++,Qi(t),B_(t.$$)}}catch(t){throw Hr.length=0,Fr=0,t}for(Qi(null),Hr.length=0,Fr=0;ot.length;)ot.pop()();for(let t=0;t<Xr.length;t+=1){const n=Xr[t];Dl.has(n)||(Dl.add(n),n())}Xr.length=0}while(Hr.length);for(;ch.length;)ch.pop()();Pc=!1,Dl.clear(),Qi(e)}function B_(e){if(e.fragment!==null){e.update(),Fe(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(bt)}}function O_(e){const t=[],n=[];Xr.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Xr=t}const Io=new Set;let mr;function Da(){mr={r:0,c:[],p:mr}}function Ra(){mr.r||Fe(mr.c),mr=mr.p}function It(e,t){e&&e.i&&(Io.delete(e),e.i(t))}function Wt(e,t,n,r){if(e&&e.o){if(Io.has(e))return;Io.add(e),mr.c.push(()=>{Io.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Te(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function la(e){e&&e.c()}function ii(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),bt(()=>{const a=e.$$.on_mount.map(E1).filter(S1);e.$$.on_destroy?e.$$.on_destroy.push(...a):Fe(a),e.$$.on_mount=[]}),i.forEach(bt)}function ai(e,t){const n=e.$$;n.fragment!==null&&(O_(n.after_update),Fe(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function F_(e,t){e.$$.dirty[0]===-1&&(Hr.push(e),L_(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qe(e,t,n,r,i,a,o=null,s=[-1]){const l=sa;Qi(e);const c=e.$$={fragment:null,ctx:[],props:a,update:oe,not_equal:i,bound:lh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:lh(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=n?n(e,t.props||{},(h,f,...d)=>{const m=d.length?d[0]:f;return c.ctx&&i(c.ctx[h],c.ctx[h]=m)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](m),u&&F_(e,h)),f}):[],c.update(),u=!0,Fe(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const h=D_(t.target);c.fragment&&c.fragment.l(h),h.forEach(ae)}else c.fragment&&c.fragment.c();t.intro&&It(e.$$.fragment),ii(e,t.target,t.anchor),P1()}Qi(l)}class He{constructor(){fo(this,"$$");fo(this,"$$set")}$destroy(){ai(this,1),this.$destroy=oe}$on(t,n){if(!S1(n))return oe;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!I_(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const G_="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(G_);function Rl(e,t,n){const r=new URLSearchParams(e.location.search);r.set(t,n);const i=`${e.location.protocol}//${e.location.host}${e.location.pathname}?${r.toString()}`;e.history.pushState({path:i},"",i)}function U_(e,t){return new URLSearchParams(e.location.search).get(t)}class zt{constructor(t=!1){this.eventMap={},this.eventsSuspended=t==!0}addListener(t,n,r={}){if(typeof t=="string"&&t.length<1||t instanceof String&&t.length<1||typeof t!="string"&&!(t instanceof String)&&t!==zt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof n!="function")throw new TypeError("The callback must be a function.");const i=new uh(t,this,n,r);return this.eventMap[t]||(this.eventMap[t]=[]),r.prepend?this.eventMap[t].unshift(i):this.eventMap[t].push(i),i}addOneTimeListener(t,n,r={}){r.remaining=1,this.addListener(t,n,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(t,n){return t===void 0?this.eventMap[zt.ANY_EVENT]&&this.eventMap[zt.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,r])=>r.length>0):this.eventMap[t]&&this.eventMap[t].length>0?n instanceof uh?this.eventMap[t].filter(i=>i===n).length>0:typeof n=="function"?this.eventMap[t].filter(i=>i.callback===n).length>0:n==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(t){return this.eventMap[t]||[]}suspendEvent(t){this.getListeners(t).forEach(n=>{n.suspended=!0})}unsuspendEvent(t){this.getListeners(t).forEach(n=>{n.suspended=!1})}getListenerCount(t){return this.getListeners(t).length}emit(t,...n){if(typeof t!="string"&&!(t instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],i=this.eventMap[zt.ANY_EVENT]||[];return this.eventMap[t]&&(i=i.concat(this.eventMap[t])),i.forEach(a=>{if(a.suspended)return;let o=[...n];Array.isArray(a.arguments)&&(o=o.concat(a.arguments)),a.remaining>0&&(r.push(a.callback.apply(a.context,o)),a.count++),--a.remaining<1&&a.remove()}),r}removeListener(t,n,r={}){if(t===void 0){this.eventMap={};return}else if(!this.eventMap[t])return;let i=this.eventMap[t].filter(a=>n&&a.callback!==n||r.remaining&&r.remaining!==a.remaining||r.context&&r.context!==a.context);i.length?this.eventMap[t]=i:delete this.eventMap[t]}async waitFor(t,n={}){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((r,i)=>{let a,o=this.addListener(t,()=>{clearTimeout(a),r()},{remaining:1});n.duration!==1/0&&(a=setTimeout(()=>{o.remove(),i("The duration expired before the event was emitted.")},n.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class uh{constructor(t,n,r,i={}){if(typeof t!="string"&&!(t instanceof String)&&t!==zt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof r!="function")throw new TypeError("The 'callback' must be a function.");i.arguments!==void 0&&!Array.isArray(i.arguments)&&(i.arguments=[i.arguments]),i=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},i),i.duration!==1/0&&setTimeout(()=>this.remove(),i.duration),this.arguments=i.arguments,this.callback=r,this.context=i.context,this.count=0,this.event=t,this.remaining=parseInt(i.remaining)>=1?parseInt(i.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class j{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),j.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),j.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),j.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),j.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Vr{constructor(t,n={}){this.duration=I.defaults.note.duration,this.attack=I.defaults.note.attack,this.release=I.defaults.note.release,n.duration!=null&&(this.duration=n.duration),n.attack!=null&&(this.attack=n.attack),n.rawAttack!=null&&(this.attack=ee.from7bitToFloat(n.rawAttack)),n.release!=null&&(this.release=n.release),n.rawRelease!=null&&(this.release=ee.from7bitToFloat(n.rawRelease)),Number.isInteger(t)?this.identifier=ee.toNoteIdentifier(t):this.identifier=t}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(t){const n=ee.getNoteDetails(t);if(I.validation&&!t)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(t){if(I.validation&&(t=t.toUpperCase(),!["C","D","E","F","G","A","B"].includes(t)))throw new Error("Invalid name value");this._name=t}get accidental(){return this._accidental}set accidental(t){if(I.validation&&(t=t.toLowerCase(),!["#","##","b","bb"].includes(t)))throw new Error("Invalid accidental value");this._accidental=t}get octave(){return this._octave}set octave(t){if(I.validation&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid octave value");this._octave=t}get duration(){return this._duration}set duration(t){if(I.validation&&(t=parseFloat(t),isNaN(t)||t===null||t<0))throw new RangeError("Invalid duration value.");this._duration=t}get attack(){return this._attack}set attack(t){if(I.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid attack value.");this._attack=t}get release(){return this._release}set release(t){if(I.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid release value.");this._release=t}get rawAttack(){return ee.fromFloatTo7Bit(this._attack)}set rawAttack(t){this._attack=ee.from7bitToFloat(t)}get rawRelease(){return ee.fromFloatTo7Bit(this._release)}set rawRelease(t){this._release=ee.from7bitToFloat(t)}get number(){return ee.toNoteNumber(this.identifier)}getOffsetNumber(t=0,n=0){return I.validation&&(t=parseInt(t)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+t*12+n,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class ee{static toNoteNumber(t,n=0){if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");typeof t!="string"&&(t="");const r=this.getNoteDetails(t);if(!r)throw new TypeError("Invalid note identifier");const i={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let a=(r.octave+1+n)*12;if(a+=i[r.name],r.accidental&&(r.accidental.startsWith("b")?a-=r.accidental.length:a+=r.accidental.length),a<0||a>127)throw new RangeError("Invalid octaveOffset value");return a}static getNoteDetails(t){Number.isInteger(t)&&(t=this.toNoteIdentifier(t));const n=t.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const r=n[1].toUpperCase(),i=parseInt(n[3]);let a=n[2].toLowerCase();return a=a===""?void 0:a,{accidental:a,identifier:r+(a||"")+i,name:r,octave:i}}static sanitizeChannels(t){let n;if(I.validation){if(t==="all")n=["all"];else if(t==="none")return[]}return Array.isArray(t)?n=t:n=[t],n.indexOf("all")>-1&&(n=j.MIDI_CHANNEL_NUMBERS),n.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(t){let n=!1;const r=parseFloat(t);return isNaN(r)?!1:(typeof t=="string"&&t.substring(0,1)==="+"?r>=0&&(n=I.time+r):r>=0&&(n=r),n)}static guessNoteNumber(t,n){n=parseInt(n)||0;let r=!1;if(Number.isInteger(t)&&t>=0&&t<=127)r=parseInt(t);else if(parseInt(t)>=0&&parseInt(t)<=127)r=parseInt(t);else if(typeof t=="string"||t instanceof String)try{r=this.toNoteNumber(t.trim(),n)}catch{return!1}return r}static toNoteIdentifier(t,n){if(t=parseInt(t),isNaN(t)||t<0||t>127)throw new RangeError("Invalid note number");if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=Math.floor(t/12-1)+n;return r[t%12]+i.toString()}static buildNote(t,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,t instanceof Vr)return t;let r=this.guessNoteNumber(t,n.octaveOffset);if(r===!1)throw new TypeError(`The input could not be parsed as a note (${t})`);return n.octaveOffset=void 0,new Vr(r,n)}static buildNoteArray(t,n={}){let r=[];return Array.isArray(t)||(t=[t]),t.forEach(i=>{r.push(this.buildNote(i,n))}),r}static from7bitToFloat(t){return t===1/0&&(t=127),t=parseInt(t)||0,Math.min(Math.max(t/127,0),1)}static fromFloatTo7Bit(t){return t===1/0&&(t=1),t=parseFloat(t)||0,Math.min(Math.max(Math.round(t*127),0),127)}static fromMsbLsbToFloat(t,n=0){I.validation&&(t=Math.min(Math.max(parseInt(t)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127));const r=((t<<7)+n)/16383;return Math.min(Math.max(r,0),1)}static fromFloatToMsbLsb(t){I.validation&&(t=Math.min(Math.max(parseFloat(t)||0,0),1));const n=Math.round(t*16383);return{msb:n>>7,lsb:n&127}}static offsetNumber(t,n=0,r=0){if(I.validation){if(t=parseInt(t),isNaN(t))throw new Error("Invalid note number");n=parseInt(n)||0,r=parseInt(r)||0}return Math.min(Math.max(t+n*12+r,0),127)}static getPropertyByValue(t,n){return Object.keys(t).find(r=>t[r]===n)}static getCcNameByNumber(t){if(!(I.validation&&(t=parseInt(t),!(t>=0&&t<=127))))return j.CONTROL_CHANGE_MESSAGES[t].name}static getCcNumberByName(t){let n=j.CONTROL_CHANGE_MESSAGES.find(r=>r.name===t);return n?n.number:j.MIDI_CONTROL_CHANGE_MESSAGES[t]}static getChannelModeByNumber(t){if(!(t>=120&&t<=127))return!1;for(let n in j.CHANNEL_MODE_MESSAGES)if(j.CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&t===j.CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class q_ extends zt{constructor(t,n){super(),this._output=t,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(t,n={time:0}){return this.output.send(t,n),this}sendKeyAftertouch(t,n,r={}){if(I.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(n=ee.fromFloatTo7Bit(n));const i=I.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(t)||(t=[t]),ee.buildNoteArray(t).forEach(a=>{this.send([(j.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),a.getOffsetNumber(i),n],{time:ee.toTimestamp(r.time)})}),this}sendControlChange(t,n,r={}){if(typeof t=="string"&&(t=ee.getCcNumberByName(t)),Array.isArray(n)||(n=[n]),I.validation){if(t===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(n=n.map(i=>{const a=Math.min(Math.max(parseInt(i),0),127);if(isNaN(a))throw new TypeError("Values must be integers between 0 and 127");return a}),n.length===2&&t>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((i,a)=>{this.send([(j.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t+a*32,n[a]],{time:ee.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(t,n={}){return this.sendControlChange(99,t[0],n),this.sendControlChange(98,t[1],n),this}_deselectRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_deselectNonRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_selectRegisteredParameter(t,n={}){return this.sendControlChange(101,t[0],n),this.sendControlChange(100,t[1],n),this}_setCurrentParameter(t,n={}){return t=[].concat(t),this.sendControlChange(6,t[0],n),t.length<2?this:(this.sendControlChange(38,t[1],n),this)}sendRpnDecrement(t,n={}){if(Array.isArray(t)||(t=j.REGISTERED_PARAMETERS[t]),I.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(j.REGISTERED_PARAMETERS).forEach(i=>{j.REGISTERED_PARAMETERS[i][0]===t[0]&&j.REGISTERED_PARAMETERS[i][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(t,n={}){if(Array.isArray(t)||(t=j.REGISTERED_PARAMETERS[t]),I.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(j.REGISTERED_PARAMETERS).forEach(i=>{j.REGISTERED_PARAMETERS[i][0]===t[0]&&j.REGISTERED_PARAMETERS[i][1]===t[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(t,n={}){this.sendNoteOn(t,n);const r=Array.isArray(t)?t:[t];for(let i of r)if(parseInt(i.duration)>0){const a={time:(ee.toTimestamp(n.time)||I.time)+parseInt(i.duration),release:i.release,rawRelease:i.rawRelease};this.sendNoteOff(i,a)}else if(parseInt(n.duration)>0){const a={time:(ee.toTimestamp(n.time)||I.time)+parseInt(n.duration),release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(i,a)}return this}sendNoteOff(t,n={}){if(I.validation){if(n.rawRelease!=null&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(n.release!=null&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawRelease!=null?r=n.rawRelease:isNaN(n.release)||(r=Math.round(n.release*127));const i=I.octaveOffset+this.output.octaveOffset+this.octaveOffset;return ee.buildNoteArray(t,{rawRelease:parseInt(r)}).forEach(a=>{this.send([(j.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),a.getOffsetNumber(i),a.rawRelease],{time:ee.toTimestamp(n.time)})}),this}stopNote(t,n={}){return this.sendNoteOff(t,n)}sendNoteOn(t,n={}){if(I.validation){if(n.rawAttack!=null&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(n.attack!=null&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;n.rawAttack!=null?r=n.rawAttack:isNaN(n.attack)||(r=Math.round(n.attack*127));const i=I.octaveOffset+this.output.octaveOffset+this.octaveOffset;return ee.buildNoteArray(t,{rawAttack:r}).forEach(a=>{this.send([(j.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),a.getOffsetNumber(i),a.rawAttack],{time:ee.toTimestamp(n.time)})}),this}sendChannelMode(t,n=0,r={}){if(typeof t=="string"&&(t=j.CHANNEL_MODE_MESSAGES[t]),I.validation){if(t===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(t)||!(t>=120&&t<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(j.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t,n],{time:ee.toTimestamp(r.time)}),this}sendOmniMode(t,n={}){return t===void 0||t?this.sendChannelMode("omnimodeon",0,n):this.sendChannelMode("omnimodeoff",0,n),this}sendChannelAftertouch(t,n={}){if(I.validation){if(isNaN(parseFloat(t)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return n.rawValue||(t=ee.fromFloatTo7Bit(t)),this.send([(j.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(t)],{time:ee.toTimestamp(n.time)}),this}sendMasterTuning(t,n={}){if(t=parseFloat(t)||0,I.validation&&!(t>-65&&t<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(t)+64,i=t-Math.floor(t);i=Math.round((i+1)/2*16383);let a=i>>7&127,o=i&127;return this.sendRpnValue("channelcoarsetuning",r,n),this.sendRpnValue("channelfinetuning",[a,o],n),this}sendModulationRange(t,n,r={}){if(I.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(n!=null&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[t,n],r),this}sendNrpnValue(t,n,r={}){if(n=[].concat(n),I.validation){if(!Array.isArray(t)||!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(t,r),this._setCurrentParameter(n,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(t,n={}){if(I.validation)if(n.rawValue&&Array.isArray(t)){if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(t)){if(!(t>=0&&t<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(t)||t===null)throw new RangeError("Invalid pitch bend value.");if(!(t>=-1&&t<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let r=0,i=0;if(n.rawValue&&Array.isArray(t))r=t[0],i=t[1];else if(n.rawValue&&!Array.isArray(t))r=t;else{const a=ee.fromFloatToMsbLsb((t+1)/2);r=a.msb,i=a.lsb}return this.send([(j.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),i,r],{time:ee.toTimestamp(n.time)}),this}sendPitchBendRange(t,n,r={}){if(I.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[t,n],r),this}sendProgramChange(t,n={}){if(t=parseInt(t)||0,I.validation&&!(t>=0&&t<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(j.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),t],{time:ee.toTimestamp(n.time)}),this}sendRpnValue(t,n,r={}){if(Array.isArray(t)||(t=j.REGISTERED_PARAMETERS[t]),I.validation){if(!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(t,r),this._setCurrentParameter(n,r),this._deselectRegisteredParameter(r),this}sendTuningBank(t,n={}){if(I.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",t,n),this}sendTuningProgram(t,n={}){if(I.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",t,n),this}sendLocalControl(t,n={}){return t?this.sendChannelMode("localcontrol",127,n):this.sendChannelMode("localcontrol",0,n)}sendAllNotesOff(t={}){return this.sendChannelMode("allnotesoff",0,t)}sendAllSoundOff(t={}){return this.sendChannelMode("allsoundoff",0,t)}sendResetAllControllers(t={}){return this.sendChannelMode("resetallcontrollers",0,t)}sendPolyphonicMode(t,n={}){return t==="mono"?this.sendChannelMode("monomodeon",0,n):this.sendChannelMode("polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Nc extends zt{constructor(t){super(),this._midiOutput=t,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new q_(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(t){let n={timestamp:I.time};t.port.connection==="open"?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):t.port.connection==="closed"&&t.port.state==="connected"?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):t.port.connection==="closed"&&t.port.state==="disconnected"?(n.type="disconnected",n.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",n)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught:",t.port.connection,t.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(t){return Promise.reject(t)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(t,n={time:0},r=0){if(t instanceof N1&&(t=ee.isNode?t.data:t.rawData),t instanceof Uint8Array&&ee.isNode&&(t=Array.from(t)),I.validation){if(!Array.isArray(t)&&!(t instanceof Uint8Array)&&(t=[t],Array.isArray(n)&&(t=t.concat(n)),n=isNaN(r)?{time:0}:{time:r}),!(parseInt(t[0])>=128&&parseInt(t[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");t.slice(1).forEach(i=>{if(i=parseInt(i),!(i>=0&&i<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(t,ee.toTimestamp(n.time)),this}sendSysex(t,n=[],r={}){if(t=[].concat(t),n instanceof Uint8Array){const i=new Uint8Array(1+t.length+n.length+1);i[0]=j.SYSTEM_MESSAGES.sysex,i.set(Uint8Array.from(t),1),i.set(n,1+t.length),i[i.length-1]=j.SYSTEM_MESSAGES.sysexend,this.send(i,{time:r.time})}else{const i=t.concat(n,j.SYSTEM_MESSAGES.sysexend);this.send([j.SYSTEM_MESSAGES.sysex].concat(i),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():I.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(t,n={}){if(I.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([j.SYSTEM_MESSAGES.timecode,t],{time:n.time}),this}sendSongPosition(t=0,n={}){t=Math.floor(t)||0;var r=t>>7&127,i=t&127;return this.send([j.SYSTEM_MESSAGES.songposition,r,i],{time:n.time}),this}sendSongSelect(t=0,n={}){if(I.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([j.SYSTEM_MESSAGES.songselect,t],{time:n.time}),this}sendTuneRequest(t={}){return this.send([j.SYSTEM_MESSAGES.tunerequest],{time:t.time}),this}sendClock(t={}){return this.send([j.SYSTEM_MESSAGES.clock],{time:t.time}),this}sendStart(t={}){return this.send([j.SYSTEM_MESSAGES.start],{time:t.time}),this}sendContinue(t={}){return this.send([j.SYSTEM_MESSAGES.continue],{time:t.time}),this}sendStop(t={}){return this.send([j.SYSTEM_MESSAGES.stop],{time:t.time}),this}sendActiveSensing(t={}){return this.send([j.SYSTEM_MESSAGES.activesensing],{time:t.time}),this}sendReset(t={}){return this.send([j.SYSTEM_MESSAGES.reset],{time:t.time}),this}sendTuningRequest(t={}){return I.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(t)}sendKeyAftertouch(t,n,r={}){return r.channels==null&&(r.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendKeyAftertouch(t,n,r)}),this}sendControlChange(t,n,r={},i={}){if(I.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const a=r;r=i,r.channels=a,r.channels==="all"&&(r.channels=j.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendControlChange(t,n,r)}),this}sendPitchBendRange(t=0,n=0,r={}){return r.channels==null&&(r.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendPitchBendRange(t,n,r)}),this}setPitchBendRange(t=0,n=0,r="all",i={}){return I.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=j.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(t,n,i)}sendRpnValue(t,n,r={}){return r.channels==null&&(r.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendRpnValue(t,n,r)}),this}setRegisteredParameter(t,n=[],r="all",i={}){return I.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=j.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(t,n,i)}sendChannelAftertouch(t,n={},r={}){if(I.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=j.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendChannelAftertouch(t,n)}),this}sendPitchBend(t,n={},r={}){if(I.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=j.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPitchBend(t,n)}),this}sendProgramChange(t=0,n={},r={}){if(I.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=j.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendProgramChange(t,n)}),this}sendModulationRange(t,n,r={}){return r.channels==null&&(r.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendModulationRange(t,n,r)}),this}setModulationRange(t=0,n=0,r="all",i={}){return I.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),i.channels=r,i.channels==="all"&&(i.channels=j.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(t,n,i)}sendMasterTuning(t,n={}){return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendMasterTuning(t,n)}),this}setMasterTuning(t,n={},r={}){return I.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=n,r.channels==="all"&&(r.channels=j.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(t,r)}sendTuningProgram(t,n={}){return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningProgram(t,n)}),this}setTuningProgram(t,n="all",r={}){return I.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=n,r.channels==="all"&&(r.channels=j.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(t,r)}sendTuningBank(t=0,n={}){return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningBank(t,n)}),this}setTuningBank(t,n="all",r={}){return I.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=n,r.channels==="all"&&(r.channels=j.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(t,r)}sendChannelMode(t,n=0,r={},i={}){if(I.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const a=r;r=i,r.channels=a,r.channels==="all"&&(r.channels=j.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(r.channels).forEach(a=>{this.channels[a].sendChannelMode(t,n,r)}),this}sendAllSoundOff(t={}){return t.channels==null&&(t.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendAllSoundOff(t)}),this}sendAllNotesOff(t={}){return t.channels==null&&(t.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendAllNotesOff(t)}),this}sendResetAllControllers(t={},n={}){if(I.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const r=t;t=n,t.channels=r,t.channels==="all"&&(t.channels=j.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendResetAllControllers(t)}),this}sendPolyphonicMode(t,n={},r={}){if(I.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=j.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPolyphonicMode(t,n)}),this}sendLocalControl(t,n={},r={}){if(I.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=j.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendLocalControl(t,n)}),this}sendOmniMode(t,n={},r={}){if(I.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=j.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendOmniMode(t,n)}),this}sendNrpnValue(t,n,r={}){return r.channels==null&&(r.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendNrpnValue(t,n,r)}),this}setNonRegisteredParameter(t,n=[],r="all",i={}){return I.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),i.channels=r,i.channels==="all"&&(i.channels=j.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(t,n,i)}sendRpnIncrement(t,n={}){return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnIncrement(t,n)}),this}incrementRegisteredParameter(t,n="all",r={}){return I.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=j.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(t,r)}sendRpnDecrement(t,n={}){return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnDecrement(t,n)}),this}decrementRegisteredParameter(t,n="all",r={}){return I.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=n,r.channels==="all"&&(r.channels=j.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(t,r)}sendNoteOff(t,n={},r={}){if(I.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=j.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOff(t,n)}),this}stopNote(t,n){return this.sendNoteOff(t,n)}playNote(t,n={},r={}){if(I.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=j.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].playNote(t,n)}),this}sendNoteOn(t,n={},r={}){if(I.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=r,n.channels=i,n.channels==="all"&&(n.channels=j.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOn(t,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class fh{constructor(t=[],n={}){this.destinations=[],this.types=[...Object.keys(j.SYSTEM_MESSAGES),...Object.keys(j.CHANNEL_MESSAGES)],this.channels=j.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(t)||(t=[t]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),I.validation&&(t.forEach(r=>{if(!(r instanceof Nc))throw new TypeError("Destinations must be of type 'Output'.")}),n.types!==void 0&&n.types.forEach(r=>{if(!j.SYSTEM_MESSAGES.hasOwnProperty(r)&&!j.CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),n.channels!==void 0&&n.channels.forEach(r=>{if(!j.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=t,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(t){this.suspended||this.types.includes(t.type)&&(t.channel&&!this.channels.includes(t.channel)||this.destinations.forEach(n=>{I.validation&&!(n instanceof Nc)||n.send(t)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class H_ extends zt{constructor(t,n){super(),this._input=t,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(t){const n=Object.assign({},t);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(t){const n=Object.assign({},t);n.type=n.message.type||"unknownmessage";const r=t.message.dataBytes[0],i=t.message.dataBytes[1];if(n.type==="noteoff"||n.type==="noteon"&&i===0)this.notesState[r]=!1,n.type="noteoff",n.note=new Vr(ee.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+I.octaveOffset),{rawAttack:0,rawRelease:i}),n.value=ee.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if(n.type==="noteon")this.notesState[r]=!0,n.note=new Vr(ee.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+I.octaveOffset),{rawAttack:i}),n.value=ee.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if(n.type==="keyaftertouch")n.note=new Vr(ee.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+I.octaveOffset)),n.value=ee.from7bitToFloat(i),n.rawValue=i,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=r;else if(n.type==="controlchange"){n.controller={number:r,name:j.CONTROL_CHANGE_MESSAGES[r].name,description:j.CONTROL_CHANGE_MESSAGES[r].description,position:j.CONTROL_CHANGE_MESSAGES[r].position},n.subtype=n.controller.name||"controller"+r,n.value=ee.from7bitToFloat(i),n.rawValue=i;const a=Object.assign({},n);a.type=`${n.type}-controller${r}`,delete a.subtype,this.emit(a.type,a);const o=Object.assign({},n);o.type=`${n.type}-`+j.CONTROL_CHANGE_MESSAGES[r].name,delete o.subtype,o.type.indexOf("controller")!==0&&this.emit(o.type,o),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else n.type==="programchange"?(n.value=r,n.rawValue=n.value):n.type==="channelaftertouch"?(n.value=ee.from7bitToFloat(r),n.rawValue=r):n.type==="pitchbend"?(n.value=((i<<7)+r-8192)/8192,n.rawValue=(i<<7)+r):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(t){const n=Object.assign({},t);n.type=n.controller.name,n.type==="localcontrol"&&(n.value=n.message.data[2]===127,n.rawValue=n.message.data[2]),n.type==="omnimodeon"?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="omnimodeoff"&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),n.type==="monomodeon"?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="polymodeon"&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(t){const n=t.message.dataBytes[0],r=t.message.dataBytes[1];n===99||n===101?(this._nrpnBuffer=[],this._rpnBuffer=[],n===99?this._nrpnBuffer=[t.message]:r!==127&&(this._rpnBuffer=[t.message])):n===98||n===100?n===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(t.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&r!==127?this._rpnBuffer.push(t.message):this._rpnBuffer=[]):(n===6||n===38||n===96||n===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],t):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],t):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(t){return t===6||t===38||t===96||t===97||t===98||t===99||t===100||t===101}_dispatchParameterNumberEvent(t,n,r,i){t=t==="nrpn"?"nrpn":"rpn";const a={target:i.target,timestamp:i.timestamp,message:i.message,parameterMsb:n,parameterLsb:r,value:ee.from7bitToFloat(i.message.dataBytes[1]),rawValue:i.message.dataBytes[1]};t==="rpn"?a.parameter=Object.keys(j.REGISTERED_PARAMETERS).find(l=>j.REGISTERED_PARAMETERS[l][0]===n&&j.REGISTERED_PARAMETERS[l][1]===r):a.parameter=(n<<7)+r;const o=j.CONTROL_CHANGE_MESSAGES[i.message.dataBytes[0]].name;a.type=`${t}-${o}`,this.emit(a.type,a);const s=Object.assign({},a);s.type==="nrpn-dataincrement"?s.type="nrpn-databuttonincrement":s.type==="nrpn-datadecrement"?s.type="nrpn-databuttondecrement":s.type==="rpn-dataincrement"?s.type="rpn-databuttonincrement":s.type==="rpn-datadecrement"&&(s.type="rpn-databuttondecrement"),this.emit(s.type,s),a.type=t,a.subtype=o,this.emit(a.type,a)}getChannelModeByNumber(t){return I.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),t=Math.floor(t)),ee.getChannelModeByNumber(t)}getCcNameByNumber(t){if(I.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),t=parseInt(t),!(t>=0&&t<=127)))throw new RangeError("Invalid control change number.");return ee.getCcNameByNumber(t)}getNoteState(t){t instanceof Vr&&(t=t.identifier);const n=ee.guessNoteNumber(t,I.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(t){this.validation&&(t=!!t),this.parameterNumberEventsEnabled=t}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class N1{constructor(t){this.rawData=t,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=ee.getPropertyByValue(j.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=ee.getPropertyByValue(j.SYSTEM_MESSAGES,this.command)),this.statusByte===j.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class z_ extends zt{constructor(t){super(),this._midiInput=t,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new H_(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(t){let n={timestamp:I.time,target:this,port:this};t.port.connection==="open"?(n.type="opened",this.emit("opened",n)):t.port.connection==="closed"&&t.port.state==="connected"?(n.type="closed",this.emit("closed",n)):t.port.connection==="closed"&&t.port.state==="disconnected"?(n.type="disconnected",n.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",n)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught: ",t.port.connection,t.port.state)}_onMidiMessage(t){const n=new N1(t.data),r={port:this,target:this,message:n,timestamp:t.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",r),n.isSystemMessage?this._parseEvent(r):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(r),this._forwarders.forEach(i=>i.forward(n))}_parseEvent(t){const n=Object.assign({},t);n.type=n.message.type||"unknownmidimessage",n.type==="songselect"&&(n.song=t.data[1]+1,n.value=t.data[1],n.rawValue=n.value),this.emit(n.type,n)}async open(){try{await this._midiInput.open()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}getChannelModeByNumber(){I.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(t,n,r={}){if(I.validation&&typeof r=="function"){let i=n!=null?[].concat(n):void 0;n=r,r={channels:i}}if(j.CHANNEL_EVENTS.includes(t)){r.channels===void 0&&(r.channels=j.MIDI_CHANNEL_NUMBERS);let i=[];return ee.sanitizeChannels(r.channels).forEach(a=>{i.push(this.channels[a].addListener(t,n,r))}),i}else return super.addListener(t,n,r)}addOneTimeListener(t,n,r={}){return r.remaining=1,this.addListener(t,n,r)}on(t,n,r,i){return this.addListener(t,n,r,i)}hasListener(t,n,r={}){if(I.validation&&typeof r=="function"){let i=[].concat(n);n=r,r={channels:i}}return j.CHANNEL_EVENTS.includes(t)?(r.channels===void 0&&(r.channels=j.MIDI_CHANNEL_NUMBERS),ee.sanitizeChannels(r.channels).every(i=>this.channels[i].hasListener(t,n))):super.hasListener(t,n)}removeListener(t,n,r={}){if(I.validation&&typeof r=="function"){let i=[].concat(n);n=r,r={channels:i}}if(r.channels===void 0&&(r.channels=j.MIDI_CHANNEL_NUMBERS),t==null)return ee.sanitizeChannels(r.channels).forEach(i=>{this.channels[i]&&this.channels[i].removeListener()}),super.removeListener();j.CHANNEL_EVENTS.includes(t)?ee.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].removeListener(t,n,r)}):super.removeListener(t,n,r)}addForwarder(t,n={}){let r;return t instanceof fh?r=t:r=new fh(t,n),this._forwarders.push(r),r}removeForwarder(t){this._forwarders=this._forwarders.filter(n=>n!==t)}hasForwarder(t){return this._forwarders.includes(t)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return I.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class V_ extends zt{constructor(){super(),this.defaults={note:{attack:ee.from7bitToFloat(64),release:ee.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(t={},n=!1){if(ee.isNode){try{window.navigator}catch{let s=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,s)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=t.validation!==!1,this.validation&&(typeof t=="function"&&(t={callback:t,sysex:n}),n&&(t.sysex=!0)),this.enabled)return typeof t.callback=="function"&&t.callback(),Promise.resolve();const r={timestamp:this.time,target:this,type:"error",error:void 0},i={timestamp:this.time,target:this,type:"midiaccessgranted"},a={timestamp:this.time,target:this,type:"enabled"};try{typeof t.requestMIDIAccessFunction=="function"?this.interface=await t.requestMIDIAccessFunction({sysex:t.sysex,software:t.software}):this.interface=await navigator.requestMIDIAccess({sysex:t.sysex,software:t.software})}catch(o){return r.error=o,this.emit("error",r),typeof t.callback=="function"&&t.callback(o),Promise.reject(o)}this.emit("midiaccessgranted",i),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(o){return r.error=o,this.emit("error",r),typeof t.callback=="function"&&t.callback(o),Promise.reject(o)}return this.emit("enabled",a),typeof t.callback=="function"&&t.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let t={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",t),this.removeListener()})}getInputById(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(n.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(this._disconnectedInputs[r].id===t.toString())return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(this.inputs[r].id===t.toString())return this.inputs[r]}getInputByName(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(n.disconnected){for(let r=0;r<this._disconnectedInputs.length;r++)if(~this._disconnectedInputs[r].name.indexOf(t))return this._disconnectedInputs[r]}else for(let r=0;r<this.inputs.length;r++)if(~this.inputs[r].name.indexOf(t))return this.inputs[r]}getOutputByName(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(n.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(~this._disconnectedOutputs[r].name.indexOf(t))return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(~this.outputs[r].name.indexOf(t))return this.outputs[r]}getOutputById(t,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(n.disconnected){for(let r=0;r<this._disconnectedOutputs.length;r++)if(this._disconnectedOutputs[r].id===t.toString())return this._disconnectedOutputs[r]}else for(let r=0;r<this.outputs.length;r++)if(this.outputs[r].id===t.toString())return this.outputs[r]}noteNameToNumber(t){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),ee.toNoteNumber(t,this.octaveOffset)}getOctave(t){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),t=parseInt(t)),!isNaN(t)&&t>=0&&t<=127?ee.getNoteDetails(ee.offsetNumber(t,this.octaveOffset)).octave:!1}sanitizeChannels(t){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),ee.sanitizeChannels(t)}toMIDIChannels(t){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),ee.sanitizeChannels(t)}guessNoteNumber(t){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),ee.guessNoteNumber(t,this.octaveOffset)}getValidNoteArray(t,n={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),ee.buildNoteArray(t,n)}convertToTimestamp(t){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),ee.toTimestamp(t)}async _destroyInputsAndOutputs(){let t=[];return this.inputs.forEach(n=>t.push(n.destroy())),this.outputs.forEach(n=>t.push(n.destroy())),Promise.all(t).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(t){this._updateInputsAndOutputs();let n={timestamp:t.timeStamp,type:t.port.state,target:this};if(t.port.state==="connected"&&t.port.connection==="open"){t.port.type==="output"?n.port=this.getOutputById(t.port.id):t.port.type==="input"&&(n.port=this.getInputById(t.port.id)),this.emit(t.port.state,n);const r=Object.assign({},n);r.type="portschanged",this.emit(r.type,r)}else if(t.port.state==="disconnected"&&t.port.connection==="pending"){t.port.type==="input"?n.port=this.getInputById(t.port.id,{disconnected:!0}):t.port.type==="output"&&(n.port=this.getOutputById(t.port.id,{disconnected:!0})),this.emit(t.port.state,n);const r=Object.assign({},n);r.type="portschanged",this.emit(r.type,r)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let n=this._inputs.length-1;n>=0;n--){const r=this._inputs[n];Array.from(this.interface.inputs.values()).find(a=>a===r._midiInput)||(this._disconnectedInputs.push(r),this._inputs.splice(n,1))}let t=[];return this.interface.inputs.forEach(n=>{if(!this._inputs.find(r=>r._midiInput===n)){let r=this._disconnectedInputs.find(i=>i._midiInput===n);r||(r=new z_(n)),this._inputs.push(r),t.push(r.open())}}),Promise.all(t)}async _updateOutputs(){if(!this.interface)return;for(let n=this._outputs.length-1;n>=0;n--){const r=this._outputs[n];Array.from(this.interface.outputs.values()).find(a=>a===r._midiOutput)||(this._disconnectedOutputs.push(r),this._outputs.splice(n,1))}let t=[];return this.interface.outputs.forEach(n=>{if(!this._outputs.find(r=>r._midiOutput===n)){let r=this._disconnectedOutputs.find(i=>i._midiOutput===n);r||(r=new Nc(n)),this._outputs.push(r),t.push(r.open())}}),Promise.all(t)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),ee.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),ee.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.9"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),j.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),j.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),j.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),j.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),j.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const I=new V_;I.constructor=null;function pt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function La(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gs(e){let t,n,r;e.length!==2?(t=pt,n=(s,l)=>pt(e(s),l),r=(s,l)=>e(s)-l):(t=e===pt||e===La?e:j_,n=e,r=e);function i(s,l,c=0,u=s.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;n(s[h],l)<0?c=h+1:u=h}while(c<u)}return c}function a(s,l,c=0,u=s.length){if(c<u){if(t(l,l)!==0)return u;do{const h=c+u>>>1;n(s[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(s,l,c=0,u=s.length){const h=i(s,l,c,u-1);return h>c&&r(s[h-1],l)>-r(s[h],l)?h-1:h}return{left:i,center:o,right:a}}function j_(){return 0}function C1(e){return e===null?NaN:+e}function*Y_(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const W_=Gs(pt),Us=W_.right;Gs(C1).center;function X_(e,t){let n=0;for(let r of e)r!=null&&(r=+r)>=r&&++n;return n}function K_(e){return e.length|0}function Z_(e){return!(e>0)}function J_(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function Q_(e){return t=>e(...t)}function ew(...e){const t=typeof e[e.length-1]=="function"&&Q_(e.pop());e=e.map(J_);const n=e.map(K_),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(Z_))return a;for(;;){a.push(i.map((s,l)=>e[l][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function tw(e,t){var n=0;return Float64Array.from(e,r=>n+=+r||0)}function T1(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function nw(e,t){const n=T1(e,t);return n&&Math.sqrt(n)}function ht(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class vr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,s=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);s&&(n[r++]=s),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class Mr extends Map{constructor(t,n=I1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Cc(this,t))}has(t){return super.has(Cc(this,t))}set(t,n){return super.set($1(this,t),n)}delete(t){return super.delete(k1(this,t))}}class qs extends Set{constructor(t,n=I1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Cc(this,t))}add(t){return super.add($1(this,t))}delete(t){return super.delete(k1(this,t))}}function Cc({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function $1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function k1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function I1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ca(e){return e}function Fu(e,...t){return Hs(e,ca,ca,t)}function D1(e,...t){return Hs(e,Array.from,ca,t)}function Kr(e,t,...n){return Hs(e,ca,t,n)}function rw(e,t,...n){return Hs(e,Array.from,t,n)}function Hs(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new Mr,l=r[o++];let c=-1;for(const u of a){const h=l(u,++c,a),f=s.get(h);f?f.push(u):s.set(h,[u])}for(const[u,h]of s)s.set(u,i(h,o));return t(s)}(e,0)}function iw(e,t){return Array.from(t,n=>e[n])}function Yo(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const s=Wo(o[i],o[a]);if(s)return s}})):(n=e.map(n),r.sort((i,a)=>Wo(n[i],n[a]))),iw(e,r)}return e.sort(R1(n))}function R1(e=pt){if(e===pt)return Wo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Wo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Gu(e,t,n){return(t.length!==2?Yo(Kr(e,t,n),([r,i],[a,o])=>pt(i,o)||pt(r,a)):Yo(Fu(e,n),([r,i],[a,o])=>t(i,o)||pt(r,a))).map(([r])=>r)}var aw=Array.prototype,ow=aw.slice;function Ll(e){return()=>e}const sw=Math.sqrt(50),lw=Math.sqrt(10),cw=Math.sqrt(2);function Xo(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=sw?10:a>=lw?5:a>=cw?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?Xo(e,t,n*2):[s,l,c]}function ua(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Xo(t,e,n):Xo(e,t,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function oi(e,t,n){return t=+t,e=+e,n=+n,Xo(e,t,n)[2]}function Tc(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?oi(t,e,n):oi(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function uw(e,t,n){let r;for(;;){const i=oi(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function fw(e){return Math.max(1,Math.ceil(Math.log(X_(e))/Math.LN2)+1)}function hw(){var e=ca,t=ht,n=fw;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,c=new Array(o);for(a=0;a<o;++a)c[a]=e(i[a],a,i);var u=t(c),h=u[0],f=u[1],d=n(c,h,f);if(!Array.isArray(d)){const E=f,w=+d;if(t===ht&&([h,f]=uw(h,f,w)),d=ua(h,f,w),d[0]<=h&&(l=oi(h,f,w)),d[d.length-1]>=f)if(E>=f&&t===ht){const M=oi(h,f,w);isFinite(M)&&(M>0?f=(Math.floor(f/M)+1)*M:M<0&&(f=(Math.ceil(f*-M)+1)/-M))}else d.pop()}for(var m=d.length,p=0,_=m;d[p]<=h;)++p;for(;d[_-1]>f;)--_;(p||_<m)&&(d=d.slice(p,_),m=_-p);var v=new Array(m+1),g;for(a=0;a<=m;++a)g=v[a]=[],g.x0=a>0?d[a-1]:h,g.x1=a<m?d[a]:f;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=c[a])!=null&&h<=s&&s<=f&&v[Math.min(m,Math.floor((s-h)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=c[a])!=null&&h<=s&&s<=f){const E=Math.floor((h-s)*l);v[Math.min(m,E+(d[E]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=c[a])!=null&&h<=s&&s<=f&&v[Us(d,s,0,m)].push(i[a]);return v}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:Ll(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:Ll([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Ll(Array.isArray(i)?ow.call(i):i),r):n},r}function Ge(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function dw(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Xt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function L1(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function B1(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Wo:R1(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(t-c*h/l+f)),m=Math.min(r,Math.floor(t+(l-c)*h/l+f));B1(e,t,d,m,i)}const a=e[t];let o=n,s=r;for($i(e,n,t),i(e[r],a)>0&&$i(e,n,r);o<s;){for($i(e,o,s),++o,--s;i(e[o],a)<0;)++o;for(;i(e[s],a)>0;)--s}i(e[n],a)===0?$i(e,n,s):(++s,$i(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function $i(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function O1(e,t=pt){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?pt(o,i)>0:pt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Ko(e,t,n){if(e=Float64Array.from(Y_(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Xt(e);if(t>=1)return Ge(e);var r,i=(r-1)*t,a=Math.floor(i),o=Ge(B1(e,a).subarray(0,a+1)),s=Xt(e.subarray(a+1));return o+(s-o)*(i-a)}}function mw(e,t,n=C1){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function F1(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function $c(e,t){return Ko(e,.5,t)}function*pw(e){for(const t of e)yield*t}function G1(e){return Array.from(pw(e))}function bw(e,t){const n=new Mr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function gw(e,t=yw){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function yw(e,t){return[e,t]}function Me(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Qn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Zo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function _w(e){return e}var ww=3,hh=1e-6;function vw(e){return"translate("+e+",0)"}function Mw(e){return t=>+e(t)}function xw(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Ew(){return!this.__axis}function Sw(e,t){var n=[],r=null,i=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1,u="y",h=vw;function f(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):_w),_=Math.max(a,0)+s,v=t.range(),g=+v[0]+l,E=+v[v.length-1]+l,w=(t.bandwidth?xw:Mw)(t.copy(),l),M=d.selection?d.selection():d,x=M.selectAll(".domain").data([null]),y=M.selectAll(".tick").data(m,t).order(),S=y.exit(),A=y.enter().append("g").attr("class","tick"),$=y.select("line"),C=y.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),y=y.merge(A),$=$.merge(A.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),C=C.merge(A.append("text").attr("fill","currentColor").attr(u,c*_).attr("dy","0.71em")),d!==M&&(x=x.transition(d),y=y.transition(d),$=$.transition(d),C=C.transition(d),S=S.transition(d).attr("opacity",hh).attr("transform",function(B){return isFinite(B=w(B))?h(B+l):this.getAttribute("transform")}),A.attr("opacity",hh).attr("transform",function(B){var O=this.parentNode.__axis;return h((O&&isFinite(O=O(B))?O:w(B))+l)})),S.remove(),x.attr("d",o?"M"+g+","+c*o+"V"+l+"H"+E+"V"+c*o:"M"+g+","+l+"H"+E),y.attr("opacity",1).attr("transform",function(B){return h(w(B)+l)}),$.attr(u+"2",c*a),C.attr(u,c*_).text(p),M.filter(Ew).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),M.each(function(){this.__axis=w})}return f.scale=function(d){return arguments.length?(t=d,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),f):n.slice()},f.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),f):r&&r.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(a=o=+d,f):a},f.tickSizeInner=function(d){return arguments.length?(a=+d,f):a},f.tickSizeOuter=function(d){return arguments.length?(o=+d,f):o},f.tickPadding=function(d){return arguments.length?(s=+d,f):s},f.offset=function(d){return arguments.length?(l=+d,f):l},f}function Aw(e){return Sw(ww,e)}var Pw={value:()=>{}};function U1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Do(n)}function Do(e){this._=e}function Nw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Do.prototype=U1.prototype={constructor:Do,on:function(e,t){var n=this._,r=Nw(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=Cw(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=dh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=dh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Do(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Cw(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function dh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Pw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var kc="http://www.w3.org/1999/xhtml";const si={svg:"http://www.w3.org/2000/svg",xhtml:kc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),si.hasOwnProperty(t)?{space:si[t],local:e}:e}function Tw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===kc&&t.documentElement.namespaceURI===kc?t.createElement(e):t.createElementNS(n,e)}}function $w(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vs(e){var t=zs(e);return(t.local?$w:Tw)(t)}function kw(){}function Uu(e){return e==null?kw:function(){return this.querySelector(e)}}function Iw(e){typeof e!="function"&&(e=Uu(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=a[u])&&(c=e.call(l,l.__data__,u,a))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new vt(r,this._parents)}function Dw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Rw(){return[]}function q1(e){return e==null?Rw:function(){return this.querySelectorAll(e)}}function Lw(e){return function(){return Dw(e.apply(this,arguments))}}function Bw(e){typeof e=="function"?e=Lw(e):e=q1(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),i.push(l));return new vt(r,i)}function H1(e){return function(){return this.matches(e)}}function z1(e){return function(t){return t.matches(e)}}var Ow=Array.prototype.find;function Fw(e){return function(){return Ow.call(this.children,e)}}function Gw(){return this.firstElementChild}function Uw(e){return this.select(e==null?Gw:Fw(typeof e=="function"?e:z1(e)))}var qw=Array.prototype.filter;function Hw(){return Array.from(this.children)}function zw(e){return function(){return qw.call(this.children,e)}}function Vw(e){return this.selectAll(e==null?Hw:zw(typeof e=="function"?e:z1(e)))}function jw(e){typeof e!="function"&&(e=H1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&e.call(l,l.__data__,c,a)&&s.push(l);return new vt(r,this._parents)}function V1(e){return new Array(e.length)}function Yw(){return new vt(this._enter||this._groups.map(V1),this._parents)}function Jo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jo.prototype={constructor:Jo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ww(e){return function(){return e}}function Xw(e,t,n,r,i,a){for(var o=0,s,l=t.length,c=a.length;o<c;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new Jo(e,a[o]);for(;o<l;++o)(s=t[o])&&(i[o]=s)}function Kw(e,t,n,r,i,a,o){var s,l,c=new Map,u=t.length,h=a.length,f=new Array(u),d;for(s=0;s<u;++s)(l=t[s])&&(f[s]=d=o.call(l,l.__data__,s,t)+"",c.has(d)?i[s]=l:c.set(d,l));for(s=0;s<h;++s)d=o.call(e,a[s],s,a)+"",(l=c.get(d))?(r[s]=l,l.__data__=a[s],c.delete(d)):n[s]=new Jo(e,a[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(f[s])===l&&(i[s]=l)}function Zw(e){return e.__data__}function Jw(e,t){if(!arguments.length)return Array.from(this,Zw);var n=t?Kw:Xw,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ww(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],h=i[c],f=h.length,d=Qw(e.call(u,u&&u.__data__,c,r)),m=d.length,p=s[c]=new Array(m),_=o[c]=new Array(m),v=l[c]=new Array(f);n(u,h,p,_,v,d,t);for(var g=0,E=0,w,M;g<m;++g)if(w=p[g]){for(g>=E&&(E=g+1);!(M=_[E])&&++E<m;);w._next=M||null}}return o=new vt(o,r),o._enter=s,o._exit=l,o}function Qw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ev(){return new vt(this._exit||this._groups.map(V1),this._parents)}function tv(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function nv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c=n[l],u=r[l],h=c.length,f=s[l]=new Array(h),d,m=0;m<h;++m)(d=c[m]||u[m])&&(f[m]=d);for(;l<i;++l)s[l]=n[l];return new vt(s,this._parents)}function rv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function iv(e){e||(e=av);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),c,u=0;u<s;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new vt(i,this._parents).order()}function av(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ov(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sv(){return Array.from(this)}function lv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function cv(){let e=0;for(const t of this)++e;return e}function uv(){return!this.node()}function fv(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function hv(e){return function(){this.removeAttribute(e)}}function dv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mv(e,t){return function(){this.setAttribute(e,t)}}function pv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function bv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yv(e,t){var n=zs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?dv:hv:typeof t=="function"?n.local?gv:bv:n.local?pv:mv)(n,t))}function j1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _v(e){return function(){this.style.removeProperty(e)}}function wv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function vv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Mv(e,t,n){return arguments.length>1?this.each((t==null?_v:typeof t=="function"?vv:wv)(e,t,n??"")):li(this.node(),e)}function li(e,t){return e.style.getPropertyValue(t)||j1(e).getComputedStyle(e,null).getPropertyValue(t)}function xv(e){return function(){delete this[e]}}function Ev(e,t){return function(){this[e]=t}}function Sv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Av(e,t){return arguments.length>1?this.each((t==null?xv:typeof t=="function"?Sv:Ev)(e,t)):this.node()[e]}function Y1(e){return e.trim().split(/^|\s+/)}function qu(e){return e.classList||new W1(e)}function W1(e){this._node=e,this._names=Y1(e.getAttribute("class")||"")}W1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function X1(e,t){for(var n=qu(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function K1(e,t){for(var n=qu(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Pv(e){return function(){X1(this,e)}}function Nv(e){return function(){K1(this,e)}}function Cv(e,t){return function(){(t.apply(this,arguments)?X1:K1)(this,e)}}function Tv(e,t){var n=Y1(e+"");if(arguments.length<2){for(var r=qu(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Cv:t?Pv:Nv)(n,t))}function $v(){this.textContent=""}function kv(e){return function(){this.textContent=e}}function Iv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Dv(e){return arguments.length?this.each(e==null?$v:(typeof e=="function"?Iv:kv)(e)):this.node().textContent}function Rv(){this.innerHTML=""}function Lv(e){return function(){this.innerHTML=e}}function Bv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ov(e){return arguments.length?this.each(e==null?Rv:(typeof e=="function"?Bv:Lv)(e)):this.node().innerHTML}function Fv(){this.nextSibling&&this.parentNode.appendChild(this)}function Gv(){return this.each(Fv)}function Uv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qv(){return this.each(Uv)}function Hv(e){var t=typeof e=="function"?e:Vs(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zv(){return null}function Vv(e,t){var n=typeof e=="function"?e:Vs(e),r=t==null?zv:typeof t=="function"?t:Uu(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function jv(){var e=this.parentNode;e&&e.removeChild(this)}function Yv(){return this.each(jv)}function Wv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Xv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kv(e){return this.select(e?Xv:Wv)}function Zv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Jv(e){return function(t){e.call(this,t,this.__data__)}}function Qv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function e3(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function t3(e,t,n){return function(){var r=this.__on,i,a=Jv(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function n3(e,t,n){var r=Qv(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(i=0,u=s[l];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?t3:e3,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Z1(e,t,n){var r=j1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function r3(e,t){return function(){return Z1(this,e,t)}}function i3(e,t){return function(){return Z1(this,e,t.apply(this,arguments))}}function a3(e,t){return this.each((typeof t=="function"?i3:r3)(e,t))}function*o3(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var J1=[null];function vt(e,t){this._groups=e,this._parents=t}function Ba(){return new vt([[document.documentElement]],J1)}function s3(){return this}vt.prototype=Ba.prototype={constructor:vt,select:Iw,selectAll:Bw,selectChild:Uw,selectChildren:Vw,filter:jw,data:Jw,enter:Yw,exit:ev,join:tv,merge:nv,selection:s3,order:rv,sort:iv,call:ov,nodes:sv,node:lv,size:cv,empty:uv,each:fv,attr:yv,style:Mv,property:Av,classed:Tv,text:Dv,html:Ov,raise:Gv,lower:qv,append:Hv,insert:Vv,remove:Yv,clone:Kv,datum:Zv,on:n3,dispatch:a3,[Symbol.iterator]:o3};function ea(e){return typeof e=="string"?new vt([[document.querySelector(e)]],[document.documentElement]):new vt([[e]],J1)}function l3(e){let t;for(;t=e.sourceEvent;)e=t;return e}function c3(e,t){if(e=l3(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ei(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Oa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ar(){}var xr=.7,ci=1/xr,Zr="\\s*([+-]?\\d+)\\s*",fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u3=/^#([0-9a-f]{3,8})$/,f3=new RegExp(`^rgb\\(${Zr},${Zr},${Zr}\\)$`),h3=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),d3=new RegExp(`^rgba\\(${Zr},${Zr},${Zr},${fa}\\)$`),m3=new RegExp(`^rgba\\(${hn},${hn},${hn},${fa}\\)$`),p3=new RegExp(`^hsl\\(${fa},${hn},${hn}\\)$`),b3=new RegExp(`^hsla\\(${fa},${hn},${hn},${fa}\\)$`),mh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ei(ar,Er,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ph,formatHex:ph,formatHex8:g3,formatHsl:y3,formatRgb:bh,toString:bh});function ph(){return this.rgb().formatHex()}function g3(){return this.rgb().formatHex8()}function y3(){return Q1(this).formatHsl()}function bh(){return this.rgb().formatRgb()}function Er(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=u3.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?gh(t):n===3?new Xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ho(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ho(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=f3.exec(e))?new Xe(t[1],t[2],t[3],1):(t=h3.exec(e))?new Xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=d3.exec(e))?ho(t[1],t[2],t[3],t[4]):(t=m3.exec(e))?ho(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=p3.exec(e))?wh(t[1],t[2]/100,t[3]/100,1):(t=b3.exec(e))?wh(t[1],t[2]/100,t[3]/100,t[4]):mh.hasOwnProperty(e)?gh(mh[e]):e==="transparent"?new Xe(NaN,NaN,NaN,0):null}function gh(e){return new Xe(e>>16&255,e>>8&255,e&255,1)}function ho(e,t,n,r){return r<=0&&(e=t=n=NaN),new Xe(e,t,n,r)}function Hu(e){return e instanceof ar||(e=Er(e)),e?(e=e.rgb(),new Xe(e.r,e.g,e.b,e.opacity)):new Xe}function er(e,t,n,r){return arguments.length===1?Hu(e):new Xe(e,t,n,r??1)}function Xe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ei(Xe,er,Oa(ar,{brighter(e){return e=e==null?ci:Math.pow(ci,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xr:Math.pow(xr,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xe(gr(this.r),gr(this.g),gr(this.b),Qo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yh,formatHex:yh,formatHex8:_3,formatRgb:_h,toString:_h}));function yh(){return`#${pr(this.r)}${pr(this.g)}${pr(this.b)}`}function _3(){return`#${pr(this.r)}${pr(this.g)}${pr(this.b)}${pr((isNaN(this.opacity)?1:this.opacity)*255)}`}function _h(){const e=Qo(this.opacity);return`${e===1?"rgb(":"rgba("}${gr(this.r)}, ${gr(this.g)}, ${gr(this.b)}${e===1?")":`, ${e})`}`}function Qo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pr(e){return e=gr(e),(e<16?"0":"")+e.toString(16)}function wh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ht(e,t,n,r)}function Q1(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);if(e instanceof ar||(e=Er(e)),!e)return new Ht;if(e instanceof Ht)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Ht(o,s,l,e.opacity)}function Ic(e,t,n,r){return arguments.length===1?Q1(e):new Ht(e,t,n,r??1)}function Ht(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ei(Ht,Ic,Oa(ar,{brighter(e){return e=e==null?ci:Math.pow(ci,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xr:Math.pow(xr,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Xe(Bl(e>=240?e-240:e+120,i,r),Bl(e,i,r),Bl(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ht(vh(this.h),mo(this.s),mo(this.l),Qo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qo(this.opacity);return`${e===1?"hsl(":"hsla("}${vh(this.h)}, ${mo(this.s)*100}%, ${mo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vh(e){return e=(e||0)%360,e<0?e+360:e}function mo(e){return Math.max(0,Math.min(1,e||0))}function Bl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const e0=Math.PI/180,t0=180/Math.PI,es=18,n0=.96422,r0=1,i0=.82521,a0=4/29,Jr=6/29,o0=3*Jr*Jr,w3=Jr*Jr*Jr;function s0(e){if(e instanceof dn)return new dn(e.l,e.a,e.b,e.opacity);if(e instanceof In)return l0(e);e instanceof Xe||(e=Hu(e));var t=Ul(e.r),n=Ul(e.g),r=Ul(e.b),i=Ol((.2225045*t+.7168786*n+.0606169*r)/r0),a,o;return t===n&&n===r?a=o=i:(a=Ol((.4360747*t+.3850649*n+.1430804*r)/n0),o=Ol((.0139322*t+.0971045*n+.7141733*r)/i0)),new dn(116*i-16,500*(a-i),200*(i-o),e.opacity)}function Dc(e,t,n,r){return arguments.length===1?s0(e):new dn(e,t,n,r??1)}function dn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ei(dn,Dc,Oa(ar,{brighter(e){return new dn(this.l+es*(e??1),this.a,this.b,this.opacity)},darker(e){return new dn(this.l-es*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=n0*Fl(t),e=r0*Fl(e),n=i0*Fl(n),new Xe(Gl(3.1338561*t-1.6168667*e-.4906146*n),Gl(-.9787684*t+1.9161415*e+.033454*n),Gl(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Ol(e){return e>w3?Math.pow(e,1/3):e/o0+a0}function Fl(e){return e>Jr?e*e*e:o0*(e-a0)}function Gl(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ul(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function v3(e){if(e instanceof In)return new In(e.h,e.c,e.l,e.opacity);if(e instanceof dn||(e=s0(e)),e.a===0&&e.b===0)return new In(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*t0;return new In(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Rc(e,t,n,r){return arguments.length===1?v3(e):new In(e,t,n,r??1)}function In(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function l0(e){if(isNaN(e.h))return new dn(e.l,0,0,e.opacity);var t=e.h*e0;return new dn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ei(In,Rc,Oa(ar,{brighter(e){return new In(this.h,this.c,this.l+es*(e??1),this.opacity)},darker(e){return new In(this.h,this.c,this.l-es*(e??1),this.opacity)},rgb(){return l0(this).rgb()}}));var c0=-.14861,zu=1.78277,Vu=-.29227,js=-.90649,ha=1.97294,Mh=ha*js,xh=ha*zu,Eh=zu*Vu-js*c0;function M3(e){if(e instanceof yr)return new yr(e.h,e.s,e.l,e.opacity);e instanceof Xe||(e=Hu(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Eh*r+Mh*t-xh*n)/(Eh+Mh-xh),a=r-i,o=(ha*(n-i)-Vu*a)/js,s=Math.sqrt(o*o+a*a)/(ha*i*(1-i)),l=s?Math.atan2(o,a)*t0-120:NaN;return new yr(l<0?l+360:l,s,i,e.opacity)}function pn(e,t,n,r){return arguments.length===1?M3(e):new yr(e,t,n,r??1)}function yr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ei(yr,pn,Oa(ar,{brighter(e){return e=e==null?ci:Math.pow(ci,e),new yr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xr:Math.pow(xr,e),new yr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*e0,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Xe(255*(t+n*(c0*r+zu*i)),255*(t+n*(Vu*r+js*i)),255*(t+n*(ha*r)),this.opacity)}}));function x3(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function E3(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return x3((n-r/t)*t,o,i,a,s)}}const Ys=e=>()=>e;function u0(e,t){return function(n){return e+n*t}}function S3(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ju(e,t){var n=t-e;return n?u0(e,n>180||n<-180?n-360*Math.round(n/360):n):Ys(isNaN(e)?t:e)}function A3(e){return(e=+e)==1?at:function(t,n){return n-t?S3(t,n,e):Ys(isNaN(t)?n:t)}}function at(e,t){var n=t-e;return n?u0(e,n):Ys(isNaN(e)?t:e)}const Sr=function e(t){var n=A3(t);function r(i,a){var o=n((i=er(i)).r,(a=er(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),c=at(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function P3(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=er(t[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=e(r),i=e(i),a=e(a),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=a(l),s+""}}}var N3=P3(E3);function C3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function T3(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $3(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Fa(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function k3(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function rt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function I3(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Fa(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Lc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ql=new RegExp(Lc.source,"g");function D3(e){return function(){return e}}function R3(e){return function(t){return e(t)+""}}function f0(e,t){var n=Lc.lastIndex=ql.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Lc.exec(e))&&(i=ql.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:rt(r,i)})),n=ql.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?R3(l[0].x):D3(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)s[(h=l[u]).i]=h.x(c);return s.join("")})}function Fa(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ys(t):(n==="number"?rt:n==="string"?(r=Er(t))?(t=r,Sr):f0:t instanceof Er?Sr:t instanceof Date?k3:T3(t)?C3:Array.isArray(t)?$3:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?I3:rt)(e,t)}function Yu(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Sh=180/Math.PI,Bc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function h0(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Sh,skewX:Math.atan(l)*Sh,scaleX:o,scaleY:s}}var po;function L3(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Bc:h0(t.a,t.b,t.c,t.d,t.e,t.f)}function B3(e){return e==null||(po||(po=document.createElementNS("http://www.w3.org/2000/svg","g")),po.setAttribute("transform",e),!(e=po.transform.baseVal.consolidate()))?Bc:(e=e.matrix,h0(e.a,e.b,e.c,e.d,e.e,e.f))}function d0(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,u,h,f,d,m){if(c!==h||u!==f){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:rt(c,h)},{i:p-2,x:rt(u,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function o(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:rt(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function s(c,u,h,f){c!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:rt(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,f,d,m){if(c!==h||u!==f){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:rt(c,h)},{i:p-2,x:rt(u,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=e(c),u=e(u),a(c.translateX,c.translateY,u.translateX,u.translateY,h,f),o(c.rotate,u.rotate,h,f),s(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var m=-1,p=f.length,_;++m<p;)h[(_=f[m]).i]=_.x(d);return h.join("")}}}var O3=d0(L3,"px, ","px)","deg)"),F3=d0(B3,", ",")",")");function G3(e){return function(t,n){var r=e((t=Ic(t)).h,(n=Ic(n)).h),i=at(t.s,n.s),a=at(t.l,n.l),o=at(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const U3=G3(ju);function q3(e,t){var n=at((e=Dc(e)).l,(t=Dc(t)).l),r=at(e.a,t.a),i=at(e.b,t.b),a=at(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function H3(e){return function(t,n){var r=e((t=Rc(t)).h,(n=Rc(n)).h),i=at(t.c,n.c),a=at(t.l,n.l),o=at(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const z3=H3(ju);function m0(e){return function t(n){n=+n;function r(i,a){var o=e((i=pn(i)).h,(a=pn(a)).h),s=at(i.s,a.s),l=at(i.l,a.l),c=at(i.opacity,a.opacity);return function(u){return i.h=o(u),i.s=s(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=t,r}(1)}m0(ju);var Wu=m0(at);function Ws(e,t){t===void 0&&(t=e,e=Fa);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function Kt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ui=0,Gi=0,ki=0,p0=1e3,ts,Ui,ns=0,Ar=0,Xs=0,da=typeof performance=="object"&&performance.now?performance:Date,b0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Xu(){return Ar||(b0(V3),Ar=da.now()+Xs)}function V3(){Ar=0}function rs(){this._call=this._time=this._next=null}rs.prototype=g0.prototype={constructor:rs,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Xu():+n)+(t==null?0:+t),!this._next&&Ui!==this&&(Ui?Ui._next=this:ts=this,Ui=this),this._call=e,this._time=n,Oc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oc())}};function g0(e,t,n){var r=new rs;return r.restart(e,t,n),r}function j3(){Xu(),++ui;for(var e=ts,t;e;)(t=Ar-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ui}function Ah(){Ar=(ns=da.now())+Xs,ui=Gi=0;try{j3()}finally{ui=0,W3(),Ar=0}}function Y3(){var e=da.now(),t=e-ns;t>p0&&(Xs-=t,ns=e)}function W3(){for(var e,t=ts,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ts=n);Ui=e,Oc(r)}function Oc(e){if(!ui){Gi&&(Gi=clearTimeout(Gi));var t=e-Ar;t>24?(e<1/0&&(Gi=setTimeout(Ah,e-da.now()-Xs)),ki&&(ki=clearInterval(ki))):(ki||(ns=da.now(),ki=setInterval(Y3,p0)),ui=1,b0(Ah))}}function Ph(e,t,n){var r=new rs;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var X3=U1("start","end","cancel","interrupt"),K3=[],y0=0,Nh=1,Fc=2,Ro=3,Ch=4,Gc=5,Lo=6;function Ks(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Z3(e,n,{name:t,index:r,group:i,on:X3,tween:K3,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:y0})}function Ku(e,t){var n=tn(e,t);if(n.state>y0)throw new Error("too late; already scheduled");return n}function _n(e,t){var n=tn(e,t);if(n.state>Ro)throw new Error("too late; already running");return n}function tn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Z3(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=g0(a,0,n.time);function a(c){n.state=Nh,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,f,d;if(n.state!==Nh)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Ro)return Ph(o);d.state===Ch?(d.state=Lo,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[u]):+u<t&&(d.state=Lo,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[u])}if(Ph(function(){n.state===Ro&&(n.state=Ch,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Fc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Fc){for(n.state=Ro,i=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Gc,1),h=-1,f=i.length;++h<f;)i[h].call(e,u);n.state===Gc&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Lo,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function J3(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Fc&&r.state<Gc,r.state=Lo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function Q3(e){return this.each(function(){J3(this,e)})}function e5(e,t){var n,r;return function(){var i=_n(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function t5(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=_n(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function n5(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=tn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?e5:t5)(n,e,t))}function Zu(e,t,n){var r=e._id;return e.each(function(){var i=_n(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return tn(i,r).value[t]}}function _0(e,t){var n;return(typeof t=="number"?rt:t instanceof Er?Sr:(n=Er(t))?(t=n,Sr):f0)(e,t)}function r5(e){return function(){this.removeAttribute(e)}}function i5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function a5(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function o5(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function s5(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function l5(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function c5(e,t){var n=zs(e),r=n==="transform"?F3:_0;return this.attrTween(e,typeof t=="function"?(n.local?l5:s5)(n,r,Zu(this,"attr."+e,t)):t==null?(n.local?i5:r5)(n):(n.local?o5:a5)(n,r,t))}function u5(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function f5(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function h5(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&f5(e,a)),n}return i._value=t,i}function d5(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&u5(e,a)),n}return i._value=t,i}function m5(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=zs(e);return this.tween(n,(r.local?h5:d5)(r,t))}function p5(e,t){return function(){Ku(this,e).delay=+t.apply(this,arguments)}}function b5(e,t){return t=+t,function(){Ku(this,e).delay=t}}function g5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?p5:b5)(t,e)):tn(this.node(),t).delay}function y5(e,t){return function(){_n(this,e).duration=+t.apply(this,arguments)}}function _5(e,t){return t=+t,function(){_n(this,e).duration=t}}function w5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?y5:_5)(t,e)):tn(this.node(),t).duration}function v5(e,t){if(typeof t!="function")throw new Error;return function(){_n(this,e).ease=t}}function M5(e){var t=this._id;return arguments.length?this.each(v5(t,e)):tn(this.node(),t).ease}function x5(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_n(this,e).ease=n}}function E5(e){if(typeof e!="function")throw new Error;return this.each(x5(this._id,e))}function S5(e){typeof e!="function"&&(e=H1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&e.call(l,l.__data__,c,a)&&s.push(l);return new Bn(r,this._parents,this._name,this._id)}function A5(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=t[s],c=n[s],u=l.length,h=o[s]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;s<r;++s)o[s]=t[s];return new Bn(o,this._parents,this._name,this._id)}function P5(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function N5(e,t,n){var r,i,a=P5(t)?Ku:_n;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function C5(e,t){var n=this._id;return arguments.length<2?tn(this.node(),n).on.on(e):this.each(N5(n,e,t))}function T5(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $5(){return this.on("end.remove",T5(this._id))}function k5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Uu(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,c=a[o]=new Array(l),u,h,f=0;f<l;++f)(u=s[f])&&(h=e.call(u,u.__data__,f,s))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,Ks(c[f],t,n,f,c,tn(u,n)));return new Bn(a,this._parents,t,n)}function I5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=q1(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=e.call(u,u.__data__,h,l),d,m=tn(u,n),p=0,_=f.length;p<_;++p)(d=f[p])&&Ks(d,t,n,p,f,m);a.push(f),o.push(u)}return new Bn(a,o,t,n)}var D5=Ba.prototype.constructor;function R5(){return new D5(this._groups,this._parents)}function L5(e,t){var n,r,i;return function(){var a=li(this,e),o=(this.style.removeProperty(e),li(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function w0(e){return function(){this.style.removeProperty(e)}}function B5(e,t,n){var r,i=n+"",a;return function(){var o=li(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function O5(e,t,n){var r,i,a;return function(){var o=li(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),li(this,e))),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}function F5(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var l=_n(this,e),c=l.on,u=l.value[a]==null?s||(s=w0(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function G5(e,t,n){var r=(e+="")=="transform"?O3:_0;return t==null?this.styleTween(e,L5(e,r)).on("end.style."+e,w0(e)):typeof t=="function"?this.styleTween(e,O5(e,r,Zu(this,"style."+e,t))).each(F5(this._id,e)):this.styleTween(e,B5(e,r,t),n).on("end.style."+e,null)}function U5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function q5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&U5(e,o,n)),r}return a._value=t,a}function H5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,q5(e,t,n??""))}function z5(e){return function(){this.textContent=e}}function V5(e){return function(){var t=e(this);this.textContent=t??""}}function j5(e){return this.tween("text",typeof e=="function"?V5(Zu(this,"text",e)):z5(e==null?"":e+""))}function Y5(e){return function(t){this.textContent=e.call(this,t)}}function W5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Y5(i)),t}return r._value=e,r}function X5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,W5(e))}function K5(){for(var e=this._name,t=this._id,n=v0(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var u=tn(l,t);Ks(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Bn(r,this._parents,e,n)}function Z5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var c=_n(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),i===0&&a()})}var J5=0;function Bn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function v0(){return++J5}var An=Ba.prototype;Bn.prototype={constructor:Bn,select:k5,selectAll:I5,selectChild:An.selectChild,selectChildren:An.selectChildren,filter:S5,merge:A5,selection:R5,transition:K5,call:An.call,nodes:An.nodes,node:An.node,size:An.size,empty:An.empty,each:An.each,on:C5,attr:c5,attrTween:m5,style:G5,styleTween:H5,text:j5,textTween:X5,remove:$5,tween:n5,delay:g5,duration:w5,ease:M5,easeVarying:E5,end:Z5,[Symbol.iterator]:An[Symbol.iterator]};function Q5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var e7={time:null,delay:0,duration:250,ease:Q5};function t7(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function n7(e){var t,n;e instanceof Bn?(t=e._id,e=e._name):(t=v0(),(n=e7).time=Xu(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&Ks(l,e,t,c,o,n||t7(l,t));return new Bn(r,this._parents,e,t)}Ba.prototype.interrupt=Q3;Ba.prototype.transition=n7;const Uc=Math.PI,qc=2*Uc,hr=1e-6,r7=qc-hr;function M0(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function i7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return M0;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class a7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?M0:i7(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-t,c=i-n,u=o-t,h=s-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>hr)if(!(Math.abs(h*l-c*u)>hr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-s,p=l*l+c*c,_=d*d+m*m,v=Math.sqrt(p),g=Math.sqrt(f),E=a*Math.tan((Uc-Math.acos((p+f-_)/(2*v*g)))/2),w=E/g,M=E/v;Math.abs(w-1)>hr&&this._append`L${t+w*u},${n+w*h}`,this._append`A${a},${a},0,0,${+(h*d>u*m)},${this._x1=t+M*l},${this._y1=n+M*c}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=t+s,u=n+l,h=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>hr||Math.abs(this._y1-u)>hr)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%qc+qc),f>r7?this._append`A${r},${r},0,1,${h},${t-s},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:f>hr&&this._append`A${r},${r},0,${+(f>=Uc)},${h},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Kn(e=3){return new a7(+e)}function o7(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function is(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function fi(e){return e=is(Math.abs(e)),e?e[1]:NaN}function s7(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function l7(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var c7=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ma(e){if(!(t=c7.exec(e)))throw new Error("invalid format: "+e);var t;return new Ju({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ma.prototype=Ju.prototype;function Ju(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ju.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u7(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var x0;function f7(e,t){var n=is(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(x0=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+is(e,Math.max(0,t+a-1))[0]}function Th(e,t){var n=is(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const $h={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:o7,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Th(e*100,t),r:Th,s:f7,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function kh(e){return e}var Ih=Array.prototype.map,Dh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function h7(e){var t=e.grouping===void 0||e.thousands===void 0?kh:s7(Ih.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?kh:l7(Ih.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=ma(h);var f=h.fill,d=h.align,m=h.sign,p=h.symbol,_=h.zero,v=h.width,g=h.comma,E=h.precision,w=h.trim,M=h.type;M==="n"?(g=!0,M="g"):$h[M]||(E===void 0&&(E=12),w=!0,M="g"),(_||f==="0"&&d==="=")&&(_=!0,f="0",d="=");var x=p==="$"?n:p==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",y=p==="$"?r:/[%p]/.test(M)?o:"",S=$h[M],A=/[defgprs%]/.test(M);E=E===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function $(C){var B=x,O=y,G,T,k;if(M==="c")O=S(C)+O,C="";else{C=+C;var L=C<0||1/C<0;if(C=isNaN(C)?l:S(Math.abs(C),E),w&&(C=u7(C)),L&&+C==0&&m!=="+"&&(L=!1),B=(L?m==="("?m:s:m==="-"||m==="("?"":m)+B,O=(M==="s"?Dh[8+x0/3]:"")+O+(L&&m==="("?")":""),A){for(G=-1,T=C.length;++G<T;)if(k=C.charCodeAt(G),48>k||k>57){O=(k===46?i+C.slice(G+1):C.slice(G))+O,C=C.slice(0,G);break}}}g&&!_&&(C=t(C,1/0));var q=B.length+C.length+O.length,z=q<v?new Array(v-q+1).join(f):"";switch(g&&_&&(C=t(z+C,z.length?v-O.length:1/0),z=""),d){case"<":C=B+C+O+z;break;case"=":C=B+z+C+O;break;case"^":C=z.slice(0,q=z.length>>1)+B+C+O+z.slice(q);break;default:C=z+B+C+O;break}return a(C)}return $.toString=function(){return h+""},$}function u(h,f){var d=c((h=ma(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(fi(f)/3)))*3,p=Math.pow(10,-m),_=Dh[8+m/3];return function(v){return d(p*v)+_}}return{format:c,formatPrefix:u}}var bo,Si,E0;d7({thousands:",",grouping:[3],currency:["$",""]});function d7(e){return bo=h7(e),Si=bo.format,E0=bo.formatPrefix,bo}function m7(e){return Math.max(0,-fi(Math.abs(e)))}function p7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fi(t)/3)))*3-fi(Math.abs(e)))}function b7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,fi(t)-fi(e))+1}var ge=1e-6,S0=1e-12,ve=Math.PI,Re=ve/2,Rh=ve/4,Mt=ve*2,ct=180/ve,De=ve/180,Ce=Math.abs,Ai=Math.atan,On=Math.atan2,we=Math.cos,A0=Math.exp,as=Math.log,Hl=Math.pow,pe=Math.sin,Ct=Math.sign||function(e){return e>0?1:e<0?-1:0},gt=Math.sqrt,Qu=Math.tan;function P0(e){return e>1?0:e<-1?ve:Math.acos(e)}function Dt(e){return e>1?Re:e<-1?-Re:Math.asin(e)}function Tt(){}function os(e,t){e&&Bh.hasOwnProperty(e.type)&&Bh[e.type](e,t)}var Lh={Feature:function(e,t){os(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)os(n[r].geometry,t)}},Bh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Hc(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Hc(n[r],t,0)},Polygon:function(e,t){Oh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Oh(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)os(n[r],t)}};function Hc(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Oh(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Hc(e[n],t,1);t.polygonEnd()}function dr(e,t){e&&Lh.hasOwnProperty(e.type)?Lh[e.type](e,t):os(e,t)}function zc(e){return[On(e[1],e[0]),Dt(e[2])]}function hi(e){var t=e[0],n=e[1],r=we(n);return[r*we(t),r*pe(t),pe(n)]}function go(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ss(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function zl(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yo(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Vc(e){var t=gt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function jc(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Yc(e,t){return Ce(e)>ve&&(e-=Math.round(e/Mt)*Mt),[e,t]}Yc.invert=Yc;function N0(e,t,n){return(e%=Mt)?t||n?jc(Gh(e),Uh(t,n)):Gh(e):t||n?Uh(t,n):Yc}function Fh(e){return function(t,n){return t+=e,Ce(t)>ve&&(t-=Math.round(t/Mt)*Mt),[t,n]}}function Gh(e){var t=Fh(e);return t.invert=Fh(-e),t}function Uh(e,t){var n=we(e),r=pe(e),i=we(t),a=pe(t);function o(s,l){var c=we(l),u=we(s)*c,h=pe(s)*c,f=pe(l),d=f*n+u*r;return[On(h*i-d*a,u*n-f*r),Dt(d*i+h*a)]}return o.invert=function(s,l){var c=we(l),u=we(s)*c,h=pe(s)*c,f=pe(l),d=f*i-h*a;return[On(h*i+f*a,u*n+d*r),Dt(d*n-u*r)]},o}function g7(e){e=N0(e[0]*De,e[1]*De,e.length>2?e[2]*De:0);function t(n){return n=e(n[0]*De,n[1]*De),n[0]*=ct,n[1]*=ct,n}return t.invert=function(n){return n=e.invert(n[0]*De,n[1]*De),n[0]*=ct,n[1]*=ct,n},t}function y7(e,t,n,r,i,a){if(n){var o=we(t),s=pe(t),l=r*n;i==null?(i=t+r*Mt,a=t-l/2):(i=qh(o,i),a=qh(o,a),(r>0?i<a:i>a)&&(i+=r*Mt));for(var c,u=i;r>0?u>a:u<a;u-=l)c=zc([o,-s*we(u),-s*pe(u)]),e.point(c[0],c[1])}}function qh(e,t){t=hi(t),t[0]-=e,Vc(t);var n=P0(-t[1]);return((-t[2]<0?-n:n)+Mt-ge)%Mt}function C0(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Tt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Bo(e,t){return Ce(e[0]-t[0])<ge&&Ce(e[1]-t[1])<ge}function _o(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function T0(e,t,n,r,i){var a=[],o=[],s,l;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,_=m[0],v=m[p],g;if(Bo(_,v)){if(!_[2]&&!v[2]){for(i.lineStart(),s=0;s<p;++s)i.point((_=m[s])[0],_[1]);i.lineEnd();return}v[0]+=2*ge}a.push(g=new _o(_,m,null,!0)),o.push(g.o=new _o(_,null,g,!1)),a.push(g=new _o(v,m,null,!1)),o.push(g.o=new _o(v,null,g,!0))}}),!!a.length){for(o.sort(t),Hh(a),Hh(o),s=0,l=o.length;s<l;++s)o[s].e=n=!n;for(var c=a[0],u,h;;){for(var f=c,d=!0;f.v;)if((f=f.n)===c)return;u=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(s=0,l=u.length;s<l;++s)i.point((h=u[s])[0],h[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(u=f.p.z,s=u.length-1;s>=0;--s)i.point((h=u[s])[0],h[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,u=f.z,d=!d}while(!f.v);i.lineEnd()}}}function Hh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Vl(e){return Ce(e[0])<=ve?e[0]:Ct(e[0])*((Ce(e[0])+ve)%Mt-ve)}function _7(e,t){var n=Vl(t),r=t[1],i=pe(r),a=[pe(n),-we(n),0],o=0,s=0,l=new vr;i===1?r=Re+ge:i===-1&&(r=-Re-ge);for(var c=0,u=e.length;c<u;++c)if(f=(h=e[c]).length)for(var h,f,d=h[f-1],m=Vl(d),p=d[1]/2+Rh,_=pe(p),v=we(p),g=0;g<f;++g,m=w,_=x,v=y,d=E){var E=h[g],w=Vl(E),M=E[1]/2+Rh,x=pe(M),y=we(M),S=w-m,A=S>=0?1:-1,$=A*S,C=$>ve,B=_*x;if(l.add(On(B*A*pe($),v*y+B*we($))),o+=C?S+A*Mt:S,C^m>=n^w>=n){var O=ss(hi(d),hi(E));Vc(O);var G=ss(a,O);Vc(G);var T=(C^S>=0?-1:1)*Dt(G[2]);(r>T||r===T&&(O[0]||O[1]))&&(s+=C^S>=0?1:-1)}}return(o<-ge||o<ge&&l<-S0)^s&1}function $0(e,t,n,r){return function(i){var a=t(i),o=C0(),s=t(o),l=!1,c,u,h,f={point:d,lineStart:p,lineEnd:_,polygonStart:function(){f.point=v,f.lineStart=g,f.lineEnd=E,u=[],c=[]},polygonEnd:function(){f.point=d,f.lineStart=p,f.lineEnd=_,u=G1(u);var w=_7(c,r);u.length?(l||(i.polygonStart(),l=!0),T0(u,v7,w,n,i)):w&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(w,M){e(w,M)&&i.point(w,M)}function m(w,M){a.point(w,M)}function p(){f.point=m,a.lineStart()}function _(){f.point=d,a.lineEnd()}function v(w,M){h.push([w,M]),s.point(w,M)}function g(){s.lineStart(),h=[]}function E(){v(h[0][0],h[0][1]),s.lineEnd();var w=s.clean(),M=o.result(),x,y=M.length,S,A,$;if(h.pop(),c.push(h),h=null,!!y){if(w&1){if(A=M[0],(S=A.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),x=0;x<S;++x)i.point(($=A[x])[0],$[1]);i.lineEnd()}return}y>1&&w&2&&M.push(M.pop().concat(M.shift())),u.push(M.filter(w7))}}return f}}function w7(e){return e.length>1}function v7(e,t){return((e=e.x)[0]<0?e[1]-Re-ge:Re-e[1])-((t=t.x)[0]<0?t[1]-Re-ge:Re-t[1])}const zh=$0(function(){return!0},M7,E7,[-ve,-Re]);function M7(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var s=a>0?ve:-ve,l=Ce(a-t);Ce(l-ve)<ge?(e.point(t,n=(n+o)/2>0?Re:-Re),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(a,n),i=0):r!==s&&l>=ve&&(Ce(t-r)<ge&&(t-=r*ge),Ce(a-s)<ge&&(a-=s*ge),n=x7(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=a,n=o),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function x7(e,t,n,r){var i,a,o=pe(e-n);return Ce(o)>ge?Ai((pe(t)*(a=we(r))*pe(n)-pe(r)*(i=we(t))*pe(e))/(i*a*o)):(t+r)/2}function E7(e,t,n,r){var i;if(e==null)i=n*Re,r.point(-ve,i),r.point(0,i),r.point(ve,i),r.point(ve,0),r.point(ve,-i),r.point(0,-i),r.point(-ve,-i),r.point(-ve,0),r.point(-ve,i);else if(Ce(e[0]-t[0])>ge){var a=e[0]<t[0]?ve:-ve;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function S7(e){var t=we(e),n=2*De,r=t>0,i=Ce(t)>ge;function a(u,h,f,d){y7(d,e,n,f,u,h)}function o(u,h){return we(u)*we(h)>t}function s(u){var h,f,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(_,v){var g=[_,v],E,w=o(_,v),M=r?w?0:c(_,v):w?c(_+(_<0?ve:-ve),v):0;if(!h&&(m=d=w)&&u.lineStart(),w!==d&&(E=l(h,g),(!E||Bo(h,E)||Bo(g,E))&&(g[2]=1)),w!==d)p=0,w?(u.lineStart(),E=l(g,h),u.point(E[0],E[1])):(E=l(h,g),u.point(E[0],E[1],2),u.lineEnd()),h=E;else if(i&&h&&r^w){var x;!(M&f)&&(x=l(g,h,!0))&&(p=0,r?(u.lineStart(),u.point(x[0][0],x[0][1]),u.point(x[1][0],x[1][1]),u.lineEnd()):(u.point(x[1][0],x[1][1]),u.lineEnd(),u.lineStart(),u.point(x[0][0],x[0][1],3)))}w&&(!h||!Bo(h,g))&&u.point(g[0],g[1]),h=g,d=w,f=M},lineEnd:function(){d&&u.lineEnd(),h=null},clean:function(){return p|(m&&d)<<1}}}function l(u,h,f){var d=hi(u),m=hi(h),p=[1,0,0],_=ss(d,m),v=go(_,_),g=_[0],E=v-g*g;if(!E)return!f&&u;var w=t*v/E,M=-t*g/E,x=ss(p,_),y=yo(p,w),S=yo(_,M);zl(y,S);var A=x,$=go(y,A),C=go(A,A),B=$*$-C*(go(y,y)-1);if(!(B<0)){var O=gt(B),G=yo(A,(-$-O)/C);if(zl(G,y),G=zc(G),!f)return G;var T=u[0],k=h[0],L=u[1],q=h[1],z;k<T&&(z=T,T=k,k=z);var H=k-T,J=Ce(H-ve)<ge,Z=J||H<ge;if(!J&&q<L&&(z=L,L=q,q=z),Z?J?L+q>0^G[1]<(Ce(G[0]-T)<ge?L:q):L<=G[1]&&G[1]<=q:H>ve^(T<=G[0]&&G[0]<=k)){var F=yo(A,(-$+O)/C);return zl(F,y),[G,zc(F)]}}}function c(u,h){var f=r?e:ve-e,d=0;return u<-f?d|=1:u>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return $0(o,s,a,r?[0,-e]:[-ve,e-ve])}function A7(e,t,n,r,i,a){var o=e[0],s=e[1],l=t[0],c=t[1],u=0,h=1,f=l-o,d=c-s,m;if(m=n-o,!(!f&&m>0)){if(m/=f,f<0){if(m<u)return;m<h&&(h=m)}else if(f>0){if(m>h)return;m>u&&(u=m)}if(m=i-o,!(!f&&m<0)){if(m/=f,f<0){if(m>h)return;m>u&&(u=m)}else if(f>0){if(m<u)return;m<h&&(h=m)}if(m=r-s,!(!d&&m>0)){if(m/=d,d<0){if(m<u)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>u&&(u=m)}if(m=a-s,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>u&&(u=m)}else if(d>0){if(m<u)return;m<h&&(h=m)}return u>0&&(e[0]=o+u*f,e[1]=s+u*d),h<1&&(t[0]=o+h*f,t[1]=s+h*d),!0}}}}}var qi=1e9,wo=-qi;function k0(e,t,n,r){function i(c,u){return e<=c&&c<=n&&t<=u&&u<=r}function a(c,u,h,f){var d=0,m=0;if(c==null||(d=o(c,h))!==(m=o(u,h))||l(c,u)<0^h>0)do f.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+h+4)%4)!==m);else f.point(u[0],u[1])}function o(c,u){return Ce(c[0]-e)<ge?u>0?0:3:Ce(c[0]-n)<ge?u>0?2:1:Ce(c[1]-t)<ge?u>0?1:0:u>0?3:2}function s(c,u){return l(c.x,u.x)}function l(c,u){var h=o(c,1),f=o(u,1);return h!==f?h-f:h===0?u[1]-c[1]:h===1?c[0]-u[0]:h===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,h=C0(),f,d,m,p,_,v,g,E,w,M,x,y={point:S,lineStart:B,lineEnd:O,polygonStart:$,polygonEnd:C};function S(T,k){i(T,k)&&u.point(T,k)}function A(){for(var T=0,k=0,L=d.length;k<L;++k)for(var q=d[k],z=1,H=q.length,J=q[0],Z,F,te=J[0],ne=J[1];z<H;++z)Z=te,F=ne,J=q[z],te=J[0],ne=J[1],F<=r?ne>r&&(te-Z)*(r-F)>(ne-F)*(e-Z)&&++T:ne<=r&&(te-Z)*(r-F)<(ne-F)*(e-Z)&&--T;return T}function $(){u=h,f=[],d=[],x=!0}function C(){var T=A(),k=x&&T,L=(f=G1(f)).length;(k||L)&&(c.polygonStart(),k&&(c.lineStart(),a(null,null,1,c),c.lineEnd()),L&&T0(f,s,T,a,c),c.polygonEnd()),u=c,f=d=m=null}function B(){y.point=G,d&&d.push(m=[]),M=!0,w=!1,g=E=NaN}function O(){f&&(G(p,_),v&&w&&h.rejoin(),f.push(h.result())),y.point=S,w&&u.lineEnd()}function G(T,k){var L=i(T,k);if(d&&m.push([T,k]),M)p=T,_=k,v=L,M=!1,L&&(u.lineStart(),u.point(T,k));else if(L&&w)u.point(T,k);else{var q=[g=Math.max(wo,Math.min(qi,g)),E=Math.max(wo,Math.min(qi,E))],z=[T=Math.max(wo,Math.min(qi,T)),k=Math.max(wo,Math.min(qi,k))];A7(q,z,e,t,n,r)?(w||(u.lineStart(),u.point(q[0],q[1])),u.point(z[0],z[1]),L||u.lineEnd(),x=!1):L&&(u.lineStart(),u.point(T,k),x=!1)}g=T,E=k,w=L}return y}}const Wc=e=>e;var jl=new vr,Xc=new vr,I0,D0,Kc,Zc,kn={point:Tt,lineStart:Tt,lineEnd:Tt,polygonStart:function(){kn.lineStart=P7,kn.lineEnd=C7},polygonEnd:function(){kn.lineStart=kn.lineEnd=kn.point=Tt,jl.add(Ce(Xc)),Xc=new vr},result:function(){var e=jl/2;return jl=new vr,e}};function P7(){kn.point=N7}function N7(e,t){kn.point=R0,I0=Kc=e,D0=Zc=t}function R0(e,t){Xc.add(Zc*e-Kc*t),Kc=e,Zc=t}function C7(){R0(I0,D0)}var di=1/0,ls=di,pa=-di,cs=pa,us={point:T7,lineStart:Tt,lineEnd:Tt,polygonStart:Tt,polygonEnd:Tt,result:function(){var e=[[di,ls],[pa,cs]];return pa=cs=-(ls=di=1/0),e}};function T7(e,t){e<di&&(di=e),e>pa&&(pa=e),t<ls&&(ls=t),t>cs&&(cs=t)}var Jc=0,Qc=0,Hi=0,fs=0,hs=0,jr=0,eu=0,tu=0,zi=0,L0,B0,ln,cn,Nt={point:Pr,lineStart:Vh,lineEnd:jh,polygonStart:function(){Nt.lineStart=I7,Nt.lineEnd=D7},polygonEnd:function(){Nt.point=Pr,Nt.lineStart=Vh,Nt.lineEnd=jh},result:function(){var e=zi?[eu/zi,tu/zi]:jr?[fs/jr,hs/jr]:Hi?[Jc/Hi,Qc/Hi]:[NaN,NaN];return Jc=Qc=Hi=fs=hs=jr=eu=tu=zi=0,e}};function Pr(e,t){Jc+=e,Qc+=t,++Hi}function Vh(){Nt.point=$7}function $7(e,t){Nt.point=k7,Pr(ln=e,cn=t)}function k7(e,t){var n=e-ln,r=t-cn,i=gt(n*n+r*r);fs+=i*(ln+e)/2,hs+=i*(cn+t)/2,jr+=i,Pr(ln=e,cn=t)}function jh(){Nt.point=Pr}function I7(){Nt.point=R7}function D7(){O0(L0,B0)}function R7(e,t){Nt.point=O0,Pr(L0=ln=e,B0=cn=t)}function O0(e,t){var n=e-ln,r=t-cn,i=gt(n*n+r*r);fs+=i*(ln+e)/2,hs+=i*(cn+t)/2,jr+=i,i=cn*e-ln*t,eu+=i*(ln+e),tu+=i*(cn+t),zi+=i*3,Pr(ln=e,cn=t)}function F0(e){this._context=e}F0.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Mt);break}}},result:Tt};var nu=new vr,Yl,G0,U0,Vi,ji,ba={point:Tt,lineStart:function(){ba.point=L7},lineEnd:function(){Yl&&q0(G0,U0),ba.point=Tt},polygonStart:function(){Yl=!0},polygonEnd:function(){Yl=null},result:function(){var e=+nu;return nu=new vr,e}};function L7(e,t){ba.point=q0,G0=Vi=e,U0=ji=t}function q0(e,t){Vi-=e,ji-=t,nu.add(gt(Vi*Vi+ji*ji)),Vi=e,ji=t}let Yh,ds,Wh,Xh;class Kh{constructor(t){this._append=t==null?H0:B7(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Wh||this._append!==ds){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Wh=r,ds=this._append,Xh=this._,this._=i}this._+=Xh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function H0(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function B7(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return H0;if(t!==Yh){const n=10**t;Yh=t,ds=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return ds}function ef(e,t){let n=3,r=4.5,i,a;function o(s){return s&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),dr(s,i(a))),a.result()}return o.area=function(s){return dr(s,i(kn)),kn.result()},o.measure=function(s){return dr(s,i(ba)),ba.result()},o.bounds=function(s){return dr(s,i(us)),us.result()},o.centroid=function(s){return dr(s,i(Nt)),Nt.result()},o.projection=function(s){return arguments.length?(i=s==null?(e=null,Wc):(e=s).stream,o):e},o.context=function(s){return arguments.length?(a=s==null?(t=null,new Kh(n)):new F0(t=s),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(a.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return t===null&&(a=new Kh(n)),o},o.projection(e).digits(n).context(t)}function ru(e){return{stream:Zs(e)}}function Zs(e){return function(t){var n=new iu;for(var r in e)n[r]=e[r];return n.stream=t,n}}function iu(){}iu.prototype={constructor:iu,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tf(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),dr(n,e.stream(us)),t(us.result()),r!=null&&e.clipExtent(r),e}function nf(e,t,n){return tf(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,l])},n)}function z0(e,t,n){return nf(e,[[0,0],t],n)}function V0(e,t,n){return tf(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];e.scale(150*a).translate([o,s])},n)}function j0(e,t,n){return tf(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,s])},n)}var Zh=16,O7=we(30*De);function Jh(e,t){return+t?G7(e,t):F7(e)}function F7(e){return Zs({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function G7(e,t){function n(r,i,a,o,s,l,c,u,h,f,d,m,p,_){var v=c-r,g=u-i,E=v*v+g*g;if(E>4*t&&p--){var w=o+f,M=s+d,x=l+m,y=gt(w*w+M*M+x*x),S=Dt(x/=y),A=Ce(Ce(x)-1)<ge||Ce(a-h)<ge?(a+h)/2:On(M,w),$=e(A,S),C=$[0],B=$[1],O=C-r,G=B-i,T=g*O-v*G;(T*T/E>t||Ce((v*O+g*G)/E-.5)>.3||o*f+s*d+l*m<O7)&&(n(r,i,a,o,s,l,C,B,A,w/=y,M/=y,x,p,_),_.point(C,B),n(C,B,A,w,M,x,c,u,h,f,d,m,p,_))}}return function(r){var i,a,o,s,l,c,u,h,f,d,m,p,_={point:v,lineStart:g,lineEnd:w,polygonStart:function(){r.polygonStart(),_.lineStart=M},polygonEnd:function(){r.polygonEnd(),_.lineStart=g}};function v(S,A){S=e(S,A),r.point(S[0],S[1])}function g(){h=NaN,_.point=E,r.lineStart()}function E(S,A){var $=hi([S,A]),C=e(S,A);n(h,f,u,d,m,p,h=C[0],f=C[1],u=S,d=$[0],m=$[1],p=$[2],Zh,r),r.point(h,f)}function w(){_.point=v,r.lineEnd()}function M(){g(),_.point=x,_.lineEnd=y}function x(S,A){E(i=S,A),a=h,o=f,s=d,l=m,c=p,_.point=E}function y(){n(h,f,u,d,m,p,a,o,i,s,l,c,Zh,r),_.lineEnd=w,w()}return _}}var U7=Zs({point:function(e,t){this.stream.point(e*De,t*De)}});function q7(e){return Zs({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function H7(e,t,n,r,i){function a(o,s){return o*=r,s*=i,[t+e*o,n-e*s]}return a.invert=function(o,s){return[(o-t)/e*r,(n-s)/e*i]},a}function Qh(e,t,n,r,i,a){if(!a)return H7(e,t,n,r,i);var o=we(a),s=pe(a),l=o*e,c=s*e,u=o/e,h=s/e,f=(s*n-o*t)/e,d=(s*t+o*n)/e;function m(p,_){return p*=r,_*=i,[l*p-c*_+t,n-c*p-l*_]}return m.invert=function(p,_){return[r*(u*p-h*_+f),i*(d-h*p-u*_)]},m}function or(e){return Y0(function(){return e})()}function Y0(e){var t,n=150,r=480,i=250,a=0,o=0,s=0,l=0,c=0,u,h=0,f=1,d=1,m=null,p=zh,_=null,v,g,E,w=Wc,M=.5,x,y,S,A,$;function C(T){return S(T[0]*De,T[1]*De)}function B(T){return T=S.invert(T[0],T[1]),T&&[T[0]*ct,T[1]*ct]}C.stream=function(T){return A&&$===T?A:A=U7(q7(u)(p(x(w($=T)))))},C.preclip=function(T){return arguments.length?(p=T,m=void 0,G()):p},C.postclip=function(T){return arguments.length?(w=T,_=v=g=E=null,G()):w},C.clipAngle=function(T){return arguments.length?(p=+T?S7(m=T*De):(m=null,zh),G()):m*ct},C.clipExtent=function(T){return arguments.length?(w=T==null?(_=v=g=E=null,Wc):k0(_=+T[0][0],v=+T[0][1],g=+T[1][0],E=+T[1][1]),G()):_==null?null:[[_,v],[g,E]]},C.scale=function(T){return arguments.length?(n=+T,O()):n},C.translate=function(T){return arguments.length?(r=+T[0],i=+T[1],O()):[r,i]},C.center=function(T){return arguments.length?(a=T[0]%360*De,o=T[1]%360*De,O()):[a*ct,o*ct]},C.rotate=function(T){return arguments.length?(s=T[0]%360*De,l=T[1]%360*De,c=T.length>2?T[2]%360*De:0,O()):[s*ct,l*ct,c*ct]},C.angle=function(T){return arguments.length?(h=T%360*De,O()):h*ct},C.reflectX=function(T){return arguments.length?(f=T?-1:1,O()):f<0},C.reflectY=function(T){return arguments.length?(d=T?-1:1,O()):d<0},C.precision=function(T){return arguments.length?(x=Jh(y,M=T*T),G()):gt(M)},C.fitExtent=function(T,k){return nf(C,T,k)},C.fitSize=function(T,k){return z0(C,T,k)},C.fitWidth=function(T,k){return V0(C,T,k)},C.fitHeight=function(T,k){return j0(C,T,k)};function O(){var T=Qh(n,0,0,f,d,h).apply(null,t(a,o)),k=Qh(n,r-T[0],i-T[1],f,d,h);return u=N0(s,l,c),y=jc(t,k),S=jc(u,y),x=Jh(y,M),G()}function G(){return A=$=null,C}return function(){return t=e.apply(this,arguments),C.invert=t.invert&&B,O()}}function rf(e){var t=0,n=ve/3,r=Y0(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*De,n=a[1]*De):[t*ct,n*ct]},i}function z7(e){var t=we(e);function n(r,i){return[r*t,pe(i)/t]}return n.invert=function(r,i){return[r/t,Dt(i*t)]},n}function V7(e,t){var n=pe(e),r=(n+pe(t))/2;if(Ce(r)<ge)return z7(e);var i=1+n*(2*r-n),a=gt(i)/r;function o(s,l){var c=gt(i-2*r*pe(l))/r;return[c*pe(s*=r),a-c*we(s)]}return o.invert=function(s,l){var c=a-l,u=On(s,Ce(c))*Ct(c);return c*r<0&&(u-=ve*Ct(s)*Ct(c)),[u/r,Dt((i-(s*s+c*c)*r*r)/(2*r))]},o}function ms(){return rf(V7).scale(155.424).center([0,33.6442])}function W0(){return ms().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function j7(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Y7(){var e,t,n=W0(),r,i=ms().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=ms().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,c={point:function(f,d){l=[f,d]}};function u(f){var d=f[0],m=f[1];return l=null,r.point(d,m),l||(a.point(d,m),l)||(s.point(d,m),l)}u.invert=function(f){var d=n.scale(),m=n.translate(),p=(f[0]-m[0])/d,_=(f[1]-m[1])/d;return(_>=.12&&_<.234&&p>=-.425&&p<-.214?i:_>=.166&&_<.234&&p>=-.214&&p<-.115?o:n).invert(f)},u.stream=function(f){return e&&t===f?e:e=j7([n.stream(t=f),i.stream(f),o.stream(f)])},u.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),h()):n.precision()},u.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),u.translate(n.translate())):n.scale()},u.translate=function(f){if(!arguments.length)return n.translate();var d=n.scale(),m=+f[0],p=+f[1];return r=n.translate(f).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(c),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+ge,p+.12*d+ge],[m-.214*d-ge,p+.234*d-ge]]).stream(c),s=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+ge,p+.166*d+ge],[m-.115*d-ge,p+.234*d-ge]]).stream(c),h()},u.fitExtent=function(f,d){return nf(u,f,d)},u.fitSize=function(f,d){return z0(u,f,d)},u.fitWidth=function(f,d){return V0(u,f,d)},u.fitHeight=function(f,d){return j0(u,f,d)};function h(){return e=t=null,u}return u.scale(1070)}function X0(e){return function(t,n){var r=we(t),i=we(n),a=e(r*i);return a===1/0?[2,0]:[a*i*pe(t),a*pe(n)]}}function Ga(e){return function(t,n){var r=gt(t*t+n*n),i=e(r),a=pe(i),o=we(i);return[On(t*a,r*o),Dt(r&&n*a/r)]}}var K0=X0(function(e){return gt(2/(1+e))});K0.invert=Ga(function(e){return 2*Dt(e/2)});function W7(){return or(K0).scale(124.75).clipAngle(180-.001)}var Z0=X0(function(e){return(e=P0(e))&&e/pe(e)});Z0.invert=Ga(function(e){return e});function X7(){return or(Z0).scale(79.4188).clipAngle(180-.001)}function Js(e,t){return[e,as(Qu((Re+t)/2))]}Js.invert=function(e,t){return[e,2*Ai(A0(t))-Re]};function K7(){return J0(Js).scale(961/Mt)}function J0(e){var t=or(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,s,l,c;t.scale=function(h){return arguments.length?(r(h),u()):r()},t.translate=function(h){return arguments.length?(i(h),u()):i()},t.center=function(h){return arguments.length?(n(h),u()):n()},t.clipExtent=function(h){return arguments.length?(h==null?o=s=l=c=null:(o=+h[0][0],s=+h[0][1],l=+h[1][0],c=+h[1][1]),u()):o==null?null:[[o,s],[l,c]]};function u(){var h=ve*r(),f=t(g7(t.rotate()).invert([0,0]));return a(o==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:e===Js?[[Math.max(f[0]-h,o),s],[Math.min(f[0]+h,l),c]]:[[o,Math.max(f[1]-h,s)],[l,Math.min(f[1]+h,c)]])}return u()}function vo(e){return Qu((Re+e)/2)}function Z7(e,t){var n=we(e),r=e===t?pe(e):as(n/we(t))/as(vo(t)/vo(e)),i=n*Hl(vo(e),r)/r;if(!r)return Js;function a(o,s){i>0?s<-Re+ge&&(s=-Re+ge):s>Re-ge&&(s=Re-ge);var l=i/Hl(vo(s),r);return[l*pe(r*o),i-l*we(r*o)]}return a.invert=function(o,s){var l=i-s,c=Ct(r)*gt(o*o+l*l),u=On(o,Ce(l))*Ct(l);return l*r<0&&(u-=ve*Ct(o)*Ct(l)),[u/r,2*Ai(Hl(i/c,1/r))-Re]},a}function J7(){return rf(Z7).scale(109.5).parallels([30,30])}function ps(e,t){return[e,t]}ps.invert=ps;function Q7(){return or(ps).scale(152.63)}function e6(e,t){var n=we(e),r=e===t?pe(e):(n-we(t))/(t-e),i=n/r+e;if(Ce(r)<ge)return ps;function a(o,s){var l=i-s,c=r*o;return[l*pe(c),i-l*we(c)]}return a.invert=function(o,s){var l=i-s,c=On(o,Ce(l))*Ct(l);return l*r<0&&(c-=ve*Ct(o)*Ct(l)),[c/r,i-Ct(r)*gt(o*o+l*l)]},a}function t6(){return rf(e6).scale(131.154).center([0,13.9389])}var ta=1.340264,na=-.081106,ra=893e-6,ia=.003796,bs=gt(3)/2,n6=12;function Q0(e,t){var n=Dt(bs*pe(t)),r=n*n,i=r*r*r;return[e*we(n)/(bs*(ta+3*na*r+i*(7*ra+9*ia*r))),n*(ta+na*r+i*(ra+ia*r))]}Q0.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,s,l;a<n6&&(s=n*(ta+na*r+i*(ra+ia*r))-t,l=ta+3*na*r+i*(7*ra+9*ia*r),n-=o=s/l,r=n*n,i=r*r*r,!(Ce(o)<S0));++a);return[bs*e*(ta+3*na*r+i*(7*ra+9*ia*r))/we(n),Dt(pe(n)/bs)]};function r6(){return or(Q0).scale(177.158)}function ep(e,t){var n=we(t),r=we(e)*n;return[n*pe(e)/r,pe(t)/r]}ep.invert=Ga(Ai);function i6(){return or(ep).scale(144.049).clipAngle(60)}function tp(e,t){return[we(t)*pe(e),pe(t)]}tp.invert=Ga(Dt);function a6(){return or(tp).scale(249.5).clipAngle(90+ge)}function np(e,t){var n=we(t),r=1+we(e)*n;return[n*pe(e)/r,pe(t)/r]}np.invert=Ga(function(e){return 2*Ai(e)});function o6(){return or(np).scale(250).clipAngle(142)}function rp(e,t){return[as(Qu((Re+t)/2)),-e]}rp.invert=function(e,t){return[-t,2*Ai(A0(e))-Re]};function s6(){var e=J0(rp),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function wn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const au=Symbol("implicit");function af(){var e=new Mr,t=[],n=[],r=au;function i(a){let o=e.get(a);if(o===void 0){if(r!==au)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Mr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return af(t,n).unknown(r)},wn.apply(i,arguments),i}function el(){var e=af().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,l=0,c=0,u=.5;delete e.unknown;function h(){var f=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,f-l+c*2),s&&(a=Math.floor(a)),m+=(p-m-a*(f-l))*u,o=a*(1-l),s&&(m=Math.round(m),o=Math.round(o));var _=Me(f).map(function(v){return m+a*v});return n(d?_.reverse():_)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,s=!0,h()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(f){return arguments.length?(s=!!f,h()):s},e.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},e.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return el(t(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},wn.apply(h(),arguments)}function ip(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ip(t())},e}function l6(){return ip(el.apply(null,arguments).paddingInner(1))}function c6(e){return function(){return e}}function ou(e){return+e}var ed=[0,1];function $t(e){return e}function su(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:c6(isNaN(t)?NaN:.5)}function u6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function f6(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=su(i,r),a=n(o,a)):(r=su(r,i),a=n(a,o)),function(s){return a(r(s))}}function h6(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=su(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var l=Us(e,s,1,r)-1;return a[l](i[l](s))}}function Ua(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function tl(){var e=ed,t=ed,n=Fa,r,i,a,o=$t,s,l,c;function u(){var f=Math.min(e.length,t.length);return o!==$t&&(o=u6(e[0],e[f-1])),s=f>2?h6:f6,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?a:(l||(l=s(e.map(r),t,n)))(r(o(f)))}return h.invert=function(f){return o(i((c||(c=s(t,e.map(r),rt)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,ou),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=Yu,u()},h.clamp=function(f){return arguments.length?(o=f?!0:$t,u()):o!==$t},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,d){return r=f,i=d,u()}}function ap(){return tl()($t,$t)}function d6(e,t,n,r){var i=Tc(e,t,n),a;switch(r=ma(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=p7(i,o))&&(r.precision=a),E0(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=b7(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=m7(i))&&(r.precision=a-(r.type==="%")*2);break}}return Si(r)}function qa(e){var t=e.domain;return e.ticks=function(n){var r=t();return ua(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return d6(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,u=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);u-- >0;){if(c=oi(o,s,n),c===l)return r[i]=o,r[a]=s,t(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return e},e}function of(){var e=ap();return e.copy=function(){return Ua(e,of())},wn.apply(e,arguments),qa(e)}function op(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,ou),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return op(e).unknown(t)},e=arguments.length?Array.from(e,ou):[0,1],qa(n)}function sp(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function td(e){return Math.log(e)}function nd(e){return Math.exp(e)}function m6(e){return-Math.log(-e)}function p6(e){return-Math.exp(-e)}function b6(e){return isFinite(e)?+("1e"+e):e<0?0:e}function g6(e){return e===10?b6:e===Math.E?Math.exp:t=>Math.pow(e,t)}function y6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rd(e){return(t,n)=>-e(-t,n)}function lp(e){const t=e(td,nd),n=t.domain;let r=10,i,a;function o(){return i=y6(r),a=g6(r),n()[0]<0?(i=rd(i),a=rd(a),e(m6,p6)):e(td,nd),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const l=n();let c=l[0],u=l[l.length-1];const h=u<c;h&&([c,u]=[u,c]);let f=i(c),d=i(u),m,p;const _=s==null?10:+s;let v=[];if(!(r%1)&&d-f<_){if(f=Math.floor(f),d=Math.ceil(d),c>0){for(;f<=d;++f)for(m=1;m<r;++m)if(p=f<0?m/a(-f):m*a(f),!(p<c)){if(p>u)break;v.push(p)}}else for(;f<=d;++f)for(m=r-1;m>=1;--m)if(p=f>0?m/a(-f):m*a(f),!(p<c)){if(p>u)break;v.push(p)}v.length*2<_&&(v=ua(c,u,_))}else v=ua(f,d,Math.min(d-f,_)).map(a);return h?v.reverse():v},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ma(l)).precision==null&&(l.trim=!0),l=Si(l)),s===1/0)return l;const c=Math.max(1,r*s/t.ticks().length);return u=>{let h=u/a(Math.round(i(u)));return h*r<r-.5&&(h*=r),h<=c?l(u):""}},t.nice=()=>n(sp(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),t}function cp(){const e=lp(tl()).domain([1,10]);return e.copy=()=>Ua(e,cp()).base(e.base()),wn.apply(e,arguments),e}function id(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ad(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function up(e){var t=1,n=e(id(t),ad(t));return n.constant=function(r){return arguments.length?e(id(t=+r),ad(t)):t},qa(n)}function fp(){var e=up(tl());return e.copy=function(){return Ua(e,fp()).constant(e.constant())},wn.apply(e,arguments)}function od(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function w6(e){return e<0?-e*e:e*e}function hp(e){var t=e($t,$t),n=1;function r(){return n===1?e($t,$t):n===.5?e(_6,w6):e(od(n),od(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},qa(t)}function dp(){var e=hp(tl());return e.copy=function(){return Ua(e,dp()).exponent(e.exponent())},wn.apply(e,arguments),e}function mp(){var e=[],t=[],n=[],r;function i(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=mw(e,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Us(n,o)]}return a.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(pt),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return mp().domain(e).range(t).unknown(r)},wn.apply(a,arguments)}function pp(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Us(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return pp().domain(e).range(t).unknown(n)},wn.apply(i,arguments)}const Wl=new Date,Xl=new Date;function ze(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),t(a,s),e(a);while(c<a&&a<o);return l},i.filter=a=>ze(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Wl.setTime(+a),Xl.setTime(+o),e(Wl),e(Xl),Math.floor(n(Wl,Xl))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const gs=ze(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gs.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ze(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gs);gs.range;const Dn=1e3,kt=Dn*60,Rn=kt*60,Fn=Rn*24,sf=Fn*7,sd=Fn*30,Kl=Fn*365,Vt=ze(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Dn)},(e,t)=>(t-e)/Dn,e=>e.getUTCSeconds());Vt.range;const Ha=ze(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dn)},(e,t)=>{e.setTime(+e+t*kt)},(e,t)=>(t-e)/kt,e=>e.getMinutes());Ha.range;const za=ze(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*kt)},(e,t)=>(t-e)/kt,e=>e.getUTCMinutes());za.range;const Va=ze(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dn-e.getMinutes()*kt)},(e,t)=>{e.setTime(+e+t*Rn)},(e,t)=>(t-e)/Rn,e=>e.getHours());Va.range;const ja=ze(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Rn)},(e,t)=>(t-e)/Rn,e=>e.getUTCHours());ja.range;const Ir=ze(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kt)/Fn,e=>e.getDate()-1);Ir.range;const nl=ze(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>e.getUTCDate()-1);nl.range;const rl=ze(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>Math.floor(e/Fn));rl.range;function Dr(e){return ze(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*kt)/sf)}const mi=Dr(0),ga=Dr(1),bp=Dr(2),gp=Dr(3),Nr=Dr(4),yp=Dr(5),_p=Dr(6);mi.range;ga.range;bp.range;gp.range;Nr.range;yp.range;_p.range;function Rr(e){return ze(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/sf)}const pi=Rr(0),ya=Rr(1),wp=Rr(2),vp=Rr(3),Cr=Rr(4),Mp=Rr(5),xp=Rr(6);pi.range;ya.range;wp.range;vp.range;Cr.range;Mp.range;xp.range;const Ya=ze(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ya.range;const Wa=ze(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Wa.range;const Zt=ze(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Zt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ze(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Zt.range;const Jt=ze(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ze(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Jt.range;function Ep(e,t,n,r,i,a){const o=[[Vt,1,Dn],[Vt,5,5*Dn],[Vt,15,15*Dn],[Vt,30,30*Dn],[a,1,kt],[a,5,5*kt],[a,15,15*kt],[a,30,30*kt],[i,1,Rn],[i,3,3*Rn],[i,6,6*Rn],[i,12,12*Rn],[r,1,Fn],[r,2,2*Fn],[n,1,sf],[t,1,sd],[t,3,3*sd],[e,1,Kl]];function s(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const d=h&&typeof h.range=="function"?h:l(c,u,h),m=d?d.range(c,+u+1):[];return f?m.reverse():m}function l(c,u,h){const f=Math.abs(u-c)/h,d=Gs(([,,_])=>_).right(o,f);if(d===o.length)return e.every(Tc(c/Kl,u/Kl,h));if(d===0)return gs.every(Math.max(Tc(c,u,h),1));const[m,p]=o[f/o[d-1][2]<o[d][2]/f?d-1:d];return m.every(p)}return[s,l]}const[v6,M6]=Ep(Jt,Wa,pi,rl,ja,za),[x6,E6]=Ep(Zt,Ya,mi,Ir,Va,Ha);function Zl(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jl(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ii(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function S6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=Di(i),u=Ri(i),h=Di(a),f=Ri(a),d=Di(o),m=Ri(o),p=Di(s),_=Ri(s),v=Di(l),g=Ri(l),E={a:L,A:q,b:z,B:H,c:null,d:dd,e:dd,f:W6,g:i4,G:o4,H:V6,I:j6,j:Y6,L:Sp,m:X6,M:K6,p:J,q:Z,Q:bd,s:gd,S:Z6,u:J6,U:Q6,V:e4,w:t4,W:n4,x:null,X:null,y:r4,Y:a4,Z:s4,"%":pd},w={a:F,A:te,b:ne,B:re,c:null,d:md,e:md,f:f4,g:v4,G:x4,H:l4,I:c4,j:u4,L:Pp,m:h4,M:d4,p:Q,q:Y,Q:bd,s:gd,S:m4,u:p4,U:b4,V:g4,w:y4,W:_4,x:null,X:null,y:w4,Y:M4,Z:E4,"%":pd},M={a:$,A:C,b:B,B:O,c:G,d:fd,e:fd,f:U6,g:ud,G:cd,H:hd,I:hd,j:B6,L:G6,m:L6,M:O6,p:A,q:R6,Q:H6,s:z6,S:F6,u:T6,U:$6,V:k6,w:C6,W:I6,x:T,X:k,y:ud,Y:cd,Z:D6,"%":q6};E.x=x(n,E),E.X=x(r,E),E.c=x(t,E),w.x=x(n,w),w.X=x(r,w),w.c=x(t,w);function x(D,V){return function(W){var U=[],fe=-1,ue=0,ie=D.length,he,se,je;for(W instanceof Date||(W=new Date(+W));++fe<ie;)D.charCodeAt(fe)===37&&(U.push(D.slice(ue,fe)),(se=ld[he=D.charAt(++fe)])!=null?he=D.charAt(++fe):se=he==="e"?" ":"0",(je=V[he])&&(he=je(W,se)),U.push(he),ue=fe+1);return U.push(D.slice(ue,fe)),U.join("")}}function y(D,V){return function(W){var U=Ii(1900,void 0,1),fe=S(U,D,W+="",0),ue,ie;if(fe!=W.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(V&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(ue=Jl(Ii(U.y,0,1)),ie=ue.getUTCDay(),ue=ie>4||ie===0?ya.ceil(ue):ya(ue),ue=nl.offset(ue,(U.V-1)*7),U.y=ue.getUTCFullYear(),U.m=ue.getUTCMonth(),U.d=ue.getUTCDate()+(U.w+6)%7):(ue=Zl(Ii(U.y,0,1)),ie=ue.getDay(),ue=ie>4||ie===0?ga.ceil(ue):ga(ue),ue=Ir.offset(ue,(U.V-1)*7),U.y=ue.getFullYear(),U.m=ue.getMonth(),U.d=ue.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),ie="Z"in U?Jl(Ii(U.y,0,1)).getUTCDay():Zl(Ii(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(ie+5)%7:U.w+U.U*7-(ie+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,Jl(U)):Zl(U)}}function S(D,V,W,U){for(var fe=0,ue=V.length,ie=W.length,he,se;fe<ue;){if(U>=ie)return-1;if(he=V.charCodeAt(fe++),he===37){if(he=V.charAt(fe++),se=M[he in ld?V.charAt(fe++):he],!se||(U=se(D,W,U))<0)return-1}else if(he!=W.charCodeAt(U++))return-1}return U}function A(D,V,W){var U=c.exec(V.slice(W));return U?(D.p=u.get(U[0].toLowerCase()),W+U[0].length):-1}function $(D,V,W){var U=d.exec(V.slice(W));return U?(D.w=m.get(U[0].toLowerCase()),W+U[0].length):-1}function C(D,V,W){var U=h.exec(V.slice(W));return U?(D.w=f.get(U[0].toLowerCase()),W+U[0].length):-1}function B(D,V,W){var U=v.exec(V.slice(W));return U?(D.m=g.get(U[0].toLowerCase()),W+U[0].length):-1}function O(D,V,W){var U=p.exec(V.slice(W));return U?(D.m=_.get(U[0].toLowerCase()),W+U[0].length):-1}function G(D,V,W){return S(D,t,V,W)}function T(D,V,W){return S(D,n,V,W)}function k(D,V,W){return S(D,r,V,W)}function L(D){return o[D.getDay()]}function q(D){return a[D.getDay()]}function z(D){return l[D.getMonth()]}function H(D){return s[D.getMonth()]}function J(D){return i[+(D.getHours()>=12)]}function Z(D){return 1+~~(D.getMonth()/3)}function F(D){return o[D.getUTCDay()]}function te(D){return a[D.getUTCDay()]}function ne(D){return l[D.getUTCMonth()]}function re(D){return s[D.getUTCMonth()]}function Q(D){return i[+(D.getUTCHours()>=12)]}function Y(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var V=x(D+="",E);return V.toString=function(){return D},V},parse:function(D){var V=y(D+="",!1);return V.toString=function(){return D},V},utcFormat:function(D){var V=x(D+="",w);return V.toString=function(){return D},V},utcParse:function(D){var V=y(D+="",!0);return V.toString=function(){return D},V}}}var ld={"-":"",_:" ",0:"0"},Je=/^\s*\d+/,A6=/^%/,P6=/[\\^$*+?|[\]().{}]/g;function Pe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function N6(e){return e.replace(P6,"\\$&")}function Di(e){return new RegExp("^(?:"+e.map(N6).join("|")+")","i")}function Ri(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function C6(e,t,n){var r=Je.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function T6(e,t,n){var r=Je.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function $6(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function k6(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function I6(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function cd(e,t,n){var r=Je.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ud(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function D6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function R6(e,t,n){var r=Je.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function L6(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function fd(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function B6(e,t,n){var r=Je.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function hd(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function O6(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function F6(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function G6(e,t,n){var r=Je.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function U6(e,t,n){var r=Je.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function q6(e,t,n){var r=A6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function H6(e,t,n){var r=Je.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function z6(e,t,n){var r=Je.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function dd(e,t){return Pe(e.getDate(),t,2)}function V6(e,t){return Pe(e.getHours(),t,2)}function j6(e,t){return Pe(e.getHours()%12||12,t,2)}function Y6(e,t){return Pe(1+Ir.count(Zt(e),e),t,3)}function Sp(e,t){return Pe(e.getMilliseconds(),t,3)}function W6(e,t){return Sp(e,t)+"000"}function X6(e,t){return Pe(e.getMonth()+1,t,2)}function K6(e,t){return Pe(e.getMinutes(),t,2)}function Z6(e,t){return Pe(e.getSeconds(),t,2)}function J6(e){var t=e.getDay();return t===0?7:t}function Q6(e,t){return Pe(mi.count(Zt(e)-1,e),t,2)}function Ap(e){var t=e.getDay();return t>=4||t===0?Nr(e):Nr.ceil(e)}function e4(e,t){return e=Ap(e),Pe(Nr.count(Zt(e),e)+(Zt(e).getDay()===4),t,2)}function t4(e){return e.getDay()}function n4(e,t){return Pe(ga.count(Zt(e)-1,e),t,2)}function r4(e,t){return Pe(e.getFullYear()%100,t,2)}function i4(e,t){return e=Ap(e),Pe(e.getFullYear()%100,t,2)}function a4(e,t){return Pe(e.getFullYear()%1e4,t,4)}function o4(e,t){var n=e.getDay();return e=n>=4||n===0?Nr(e):Nr.ceil(e),Pe(e.getFullYear()%1e4,t,4)}function s4(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pe(t/60|0,"0",2)+Pe(t%60,"0",2)}function md(e,t){return Pe(e.getUTCDate(),t,2)}function l4(e,t){return Pe(e.getUTCHours(),t,2)}function c4(e,t){return Pe(e.getUTCHours()%12||12,t,2)}function u4(e,t){return Pe(1+nl.count(Jt(e),e),t,3)}function Pp(e,t){return Pe(e.getUTCMilliseconds(),t,3)}function f4(e,t){return Pp(e,t)+"000"}function h4(e,t){return Pe(e.getUTCMonth()+1,t,2)}function d4(e,t){return Pe(e.getUTCMinutes(),t,2)}function m4(e,t){return Pe(e.getUTCSeconds(),t,2)}function p4(e){var t=e.getUTCDay();return t===0?7:t}function b4(e,t){return Pe(pi.count(Jt(e)-1,e),t,2)}function Np(e){var t=e.getUTCDay();return t>=4||t===0?Cr(e):Cr.ceil(e)}function g4(e,t){return e=Np(e),Pe(Cr.count(Jt(e),e)+(Jt(e).getUTCDay()===4),t,2)}function y4(e){return e.getUTCDay()}function _4(e,t){return Pe(ya.count(Jt(e)-1,e),t,2)}function w4(e,t){return Pe(e.getUTCFullYear()%100,t,2)}function v4(e,t){return e=Np(e),Pe(e.getUTCFullYear()%100,t,2)}function M4(e,t){return Pe(e.getUTCFullYear()%1e4,t,4)}function x4(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Cr(e):Cr.ceil(e),Pe(e.getUTCFullYear()%1e4,t,4)}function E4(){return"+0000"}function pd(){return"%"}function bd(e){return+e}function gd(e){return Math.floor(+e/1e3)}var Gr,lf,Xa;S4({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function S4(e){return Gr=S6(e),lf=Gr.format,Gr.parse,Xa=Gr.utcFormat,Gr.utcParse,Gr}function A4(e){return new Date(e)}function P4(e){return e instanceof Date?+e:+new Date(+e)}function cf(e,t,n,r,i,a,o,s,l,c){var u=ap(),h=u.invert,f=u.domain,d=c(".%L"),m=c(":%S"),p=c("%I:%M"),_=c("%I %p"),v=c("%a %d"),g=c("%b %d"),E=c("%B"),w=c("%Y");function M(x){return(l(x)<x?d:s(x)<x?m:o(x)<x?p:a(x)<x?_:r(x)<x?i(x)<x?v:g:n(x)<x?E:w)(x)}return u.invert=function(x){return new Date(h(x))},u.domain=function(x){return arguments.length?f(Array.from(x,P4)):f().map(A4)},u.ticks=function(x){var y=f();return e(y[0],y[y.length-1],x??10)},u.tickFormat=function(x,y){return y==null?M:c(y)},u.nice=function(x){var y=f();return(!x||typeof x.range!="function")&&(x=t(y[0],y[y.length-1],x??10)),x?f(sp(y,x)):u},u.copy=function(){return Ua(u,cf(e,t,n,r,i,a,o,s,l,c))},u}function N4(){return wn.apply(cf(x6,E6,Zt,Ya,mi,Ir,Va,Ha,Vt,lf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function C4(){return wn.apply(cf(v6,M6,Jt,Wa,pi,nl,ja,za,Vt,Xa).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function il(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function al(){var e=0,t=.5,n=1,r=1,i,a,o,s,l,c=$t,u,h=!1,f;function d(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-a)*(r*p<r*a?s:l),c(h?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=u(e=+e),a=u(t=+t),o=u(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(h=!!p,d):h},d.interpolator=function(p){return arguments.length?(c=p,d):c};function m(p){return function(_){var v,g,E;return arguments.length?([v,g,E]=_,c=Ws(p,[v,g,E]),d):[c(0),c(.5),c(1)]}}return d.range=m(Fa),d.rangeRound=m(Yu),d.unknown=function(p){return arguments.length?(f=p,d):f},function(p){return u=p,i=p(e),a=p(t),o=p(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function Cp(){var e=qa(al()($t));return e.copy=function(){return il(e,Cp())},Qs.apply(e,arguments)}function Tp(){var e=lp(al()).domain([.1,1,10]);return e.copy=function(){return il(e,Tp()).base(e.base())},Qs.apply(e,arguments)}function $p(){var e=up(al());return e.copy=function(){return il(e,$p()).constant(e.constant())},Qs.apply(e,arguments)}function kp(){var e=hp(al());return e.copy=function(){return il(e,kp()).exponent(e.exponent())},Qs.apply(e,arguments)}function be(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const T4=be("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),$4=be("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),k4=be("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),I4=be("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),D4=be("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),R4=be("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),L4=be("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),B4=be("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),O4=be("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),F4=be("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),G4=be("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),$e=e=>N3(e[e.length-1]);var Ip=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(be);const Dp=$e(Ip);var Rp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(be);const Lp=$e(Rp);var Bp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(be);const Op=$e(Bp);var Fp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(be);const Gp=$e(Fp);var lu=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(be);const ys=$e(lu);var Up=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(be);const qp=$e(Up);var cu=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(be);const _a=$e(cu);var Hp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(be);const zp=$e(Hp);var Vp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(be);const jp=$e(Vp);var Yp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(be);const Wp=$e(Yp);var Xp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(be);const Kp=$e(Xp);var Zp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(be);const Jp=$e(Zp);var Qp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(be);const eb=$e(Qp);var tb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(be);const nb=$e(tb);var rb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(be);const ib=$e(rb);var ab=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(be);const ob=$e(ab);var sb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(be);const lb=$e(sb);var cb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(be);const ub=$e(cb);var fb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(be);const hb=$e(fb);var db=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(be);const mb=$e(db);var pb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(be);const bb=$e(pb);var gb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(be);const yb=$e(gb);var _b=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(be);const wb=$e(_b);var vb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(be);const Mb=$e(vb);var xb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(be);const Eb=$e(xb);var Sb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(be);const Ab=$e(Sb);var Pb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(be);const Nb=$e(Pb);function Cb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const Tb=Wu(pn(300,.5,0),pn(-240,.5,1));var $b=Wu(pn(-100,.75,.35),pn(80,1.5,.8)),kb=Wu(pn(260,.75,.35),pn(80,1.5,.8)),Mo=pn();function Ib(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Mo.h=360*e-100,Mo.s=1.5-1.5*t,Mo.l=.8-.9*t,Mo+""}var xo=er(),U4=Math.PI/3,q4=Math.PI*2/3;function Db(e){var t;return e=(.5-e)*Math.PI,xo.r=255*(t=Math.sin(e))*t,xo.g=255*(t=Math.sin(e+U4))*t,xo.b=255*(t=Math.sin(e+q4))*t,xo+""}function Rb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function ol(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Lb=ol(be("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Bb=ol(be("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ob=ol(be("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Fb=ol(be("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const Gb=Math.cos,uf=Math.min,_s=Math.sin,Ve=Math.sqrt,yd=1e-12,ws=Math.PI,sl=2*ws;function Ub(e){this._context=e}Ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ff(e){return new Ub(e)}class qb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function H4(e){return new qb(e,!0)}function z4(e){return new qb(e,!1)}const V4=Ve(3),Hb={draw(e,t){const n=Ve(t+uf(t/28,.75))*.59436,r=n/2,i=r*V4;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},wa={draw(e,t){const n=Ve(t/ws);e.moveTo(n,0),e.arc(0,0,n,0,sl)}},zb={draw(e,t){const n=Ve(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Vb=Ve(1/3),j4=Vb*2,jb={draw(e,t){const n=Ve(t/j4),r=n*Vb;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Yb={draw(e,t){const n=Ve(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Wb={draw(e,t){const n=Ve(t-uf(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Xb={draw(e,t){const n=Ve(t),r=-n/2;e.rect(r,r,n,n)}},Kb={draw(e,t){const n=Ve(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},Y4=.8908130915292852,Zb=_s(ws/10)/_s(7*ws/10),W4=_s(sl/10)*Zb,X4=-Gb(sl/10)*Zb,Jb={draw(e,t){const n=Ve(t*Y4),r=W4*n,i=X4*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=sl*a/5,s=Gb(o),l=_s(o);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*i,l*r+s*i)}e.closePath()}},Ql=Ve(3),Qb={draw(e,t){const n=-Ve(t/(Ql*3));e.moveTo(0,n*2),e.lineTo(-Ql*n,-n),e.lineTo(Ql*n,-n),e.closePath()}},K4=Ve(3),eg={draw(e,t){const n=Ve(t)*.6824,r=n/2,i=n*K4/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},At=-.5,Pt=Ve(3)/2,uu=1/Ve(12),Z4=(uu/2+1)*3,tg={draw(e,t){const n=Ve(t/Z4),r=n/2,i=n*uu,a=r,o=n*uu+n,s=-a,l=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,l),e.lineTo(At*r-Pt*i,Pt*r+At*i),e.lineTo(At*a-Pt*o,Pt*a+At*o),e.lineTo(At*s-Pt*l,Pt*s+At*l),e.lineTo(At*r+Pt*i,At*i-Pt*r),e.lineTo(At*a+Pt*o,At*o-Pt*a),e.lineTo(At*s+Pt*l,At*l-Pt*s),e.closePath()}},ng={draw(e,t){const n=Ve(t-uf(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},J4=[wa,zb,jb,Xb,Jb,Qb,tg],Q4=[wa,Wb,ng,eg,Hb,Kb,Yb];function tr(){}function vs(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ll(e){this._context=e}ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vs(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eM(e){return new ll(e)}function rg(e){this._context=e}rg.prototype={areaStart:tr,areaEnd:tr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:vs(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tM(e){return new rg(e)}function ig(e){this._context=e}ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:vs(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nM(e){return new ig(e)}function ag(e,t){this._basis=new ll(e),this._beta=t}ag.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+l*a),this._beta*t[s]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const rM=function e(t){function n(r){return t===1?new ll(r):new ag(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Ms(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function hf(e,t){this._context=e,this._k=(1-t)/6}hf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ms(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ms(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const iM=function e(t){function n(r){return new hf(r,t)}return n.tension=function(r){return e(+r)},n}(0);function df(e,t){this._context=e,this._k=(1-t)/6}df.prototype={areaStart:tr,areaEnd:tr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ms(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const aM=function e(t){function n(r){return new df(r,t)}return n.tension=function(r){return e(+r)},n}(0);function mf(e,t){this._context=e,this._k=(1-t)/6}mf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ms(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const oM=function e(t){function n(r){return new mf(r,t)}return n.tension=function(r){return e(+r)},n}(0);function pf(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>yd){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>yd){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*c+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*c+e._y1*e._l23_2a-n*e._l12_2a)/u}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function og(e,t){this._context=e,this._alpha=t}og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:pf(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const sM=function e(t){function n(r){return t?new og(r,t):new hf(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function sg(e,t){this._context=e,this._alpha=t}sg.prototype={areaStart:tr,areaEnd:tr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pf(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lM=function e(t){function n(r){return t?new sg(r,t):new df(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lg(e,t){this._context=e,this._alpha=t}lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pf(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cM=function e(t){function n(r){return t?new lg(r,t):new mf(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function cg(e){this._context=e}cg.prototype={areaStart:tr,areaEnd:tr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uM(e){return new cg(e)}function _d(e){return e<0?-1:1}function wd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(_d(a)+_d(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function vd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ec(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function xs(e){this._context=e}xs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ec(this,this._t0,vd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ec(this,vd(this,n=wd(this,e,t)),n);break;default:ec(this,this._t0,n=wd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function ug(e){this._context=new fg(e)}(ug.prototype=Object.create(xs.prototype)).point=function(e,t){xs.prototype.point.call(this,t,e)};function fg(e){this._context=e}fg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function fM(e){return new xs(e)}function hM(e){return new ug(e)}function hg(e){this._context=e}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Md(e),i=Md(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Md(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function dM(e){return new hg(e)}function cl(e,t){this._context=e,this._t=t}cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function mM(e){return new cl(e,.5)}function pM(e){return new cl(e,0)}function bM(e){return new cl(e,1)}function Yi(e,t,n){this.k=e,this.x=t,this.y=n}Yi.prototype={constructor:Yi,scale:function(e){return e===1?this:new Yi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Yi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Yi.prototype;function dg(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function mg(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var pg=[0,2,4,-1,1,3,5],bg=pg.map(e=>Math.floor(e*7/12));function gg(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=pg[t]+7*n;if(r===void 0)return[i*a];const o=r-bg[t]-4*n;return[i*a,i*o]}var gM=[3,0,4,1,5,2,6];function yM(e){const[t,n,r]=e,i=gM[_M(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+bg[i];return{step:i,alt:a,oct:o,dir:r}}function _M(e){const t=(e+1)%7;return t<0?7+t:t}var xd=(e,t)=>Array(Math.abs(t)+1).join(e),fu=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),wM="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",vM="(AA|A|P|M|m|d|dd)([-+]?\\d+)",MM=new RegExp("^"+wM+"|"+vM+"$");function xM(e){const t=MM.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var Ed={};function Es(e){return typeof e=="string"?Ed[e]||(Ed[e]=EM(e)):mg(e)?Es(AM(e)):dg(e)?Es(e.name):fu}var Sd=[0,2,4,5,7,9,11],yg="PMMPPMM";function EM(e){const t=xM(e);if(t[0]==="")return fu;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=yg[i];if(a==="M"&&r==="P")return fu;const o=a==="M"?"majorable":"perfectable",s=""+n+r,l=n<0?-1:1,c=n===8||n===-8?n:l*(i+1),u=SM(o,r),h=Math.floor((Math.abs(n)-1)/7),f=l*(Sd[i]+u+12*h),d=(l*(Sd[i]+u)%12+12)%12,m=gg({step:i,alt:u,oct:h,dir:l});return{empty:!1,name:s,num:n,q:r,step:i,alt:u,dir:l,type:o,simple:c,semitones:f,chroma:d,coord:m,oct:h}}function SM(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function AM(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,s=i<0?"-":"",l=yg[t]==="M"?"majorable":"perfectable";return s+o+PM(l,n)}function PM(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?xd("A",t):xd("d",e==="perfectable"?t:t+1)}var Ad=(e,t)=>Array(Math.abs(t)+1).join(e),_g=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Pd=new Map,NM=e=>"CDEFGAB".charAt(e),CM=e=>e<0?Ad("b",-e):Ad("#",e),TM=e=>e[0]==="b"?-e.length:e.length;function Oe(e){const t=JSON.stringify(e),n=Pd.get(t);if(n)return n;const r=typeof e=="string"?RM(e):mg(e)?Oe(LM(e)):dg(e)?Oe(e.name):_g;return Pd.set(t,r),r}var $M=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function kM(e){const t=$M.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function IM(e){return Oe(yM(e))}var DM=(e,t)=>(e%t+t)%t,tc=[0,2,4,5,7,9,11];function RM(e){const t=kM(e);if(t[0]===""||t[3]!=="")return _g;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=TM(r),s=i.length?+i:void 0,l=gg({step:a,alt:o,oct:s}),c=n+r+i,u=n+r,h=(tc[a]+o+120)%12,f=s===void 0?DM(tc[a]+o,12)-12*99:tc[a]+o+12*(s+1),d=f>=0&&f<=127?f:null,m=s===void 0?null:Math.pow(2,(f-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:h,coord:l,freq:m,height:f,letter:n,midi:d,name:c,oct:s,pc:u,step:a}}function LM(e){const{step:t,alt:n,oct:r}=e,i=NM(t);if(!i)return"";const a=i+CM(n);return r||r===0?a+r:a}function bi(e,t){const n=Oe(e),r=Array.isArray(t)?t:Es(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return IM(a).name}function wg(e,t){const n=e.length;return r=>{if(!t)return"";const i=r<0?(n- -r%n)%n:r%n,a=Math.floor(r/n),o=bi(t,[0,a]);return bi(o,e[i])}}function BM(e,t,n){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,r)}}function OM(e,t){const n=[];for(;t--;n[t]=t+e);return n}function FM(e,t){const n=[];for(;t--;n[t]=e-t);return n}function GM(e,t){return e<t?OM(e,t-e+1):FM(e,e-t+1)}function Ka(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}function UM(e){return e.filter(t=>t===0||t)}var nr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},vg=e=>Number(e).toString(2).padStart(12,"0"),Nd=e=>parseInt(e,2),qM=/^[01]{12}$/;function bf(e){return qM.test(e)}var HM=e=>typeof e=="number"&&e>=0&&e<=4095,zM=e=>e&&bf(e.chroma),Cd={[nr.chroma]:nr};function Gn(e){const t=bf(e)?e:HM(e)?vg(e):Array.isArray(e)?KM(e):zM(e)?e.chroma:nr.chroma;return Cd[t]=Cd[t]||XM(t)}var VM=e=>Gn(e).chroma,jM=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function YM(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(jM[n]);return t}function Mg(e,t=!0){const r=Gn(e).chroma.split("");return UM(r.map((i,a)=>{const o=Ka(a,r);return t&&o[0]==="0"?null:o.join("")}))}function gf(e){const t=Gn(e).setNum;return n=>{const r=Gn(n).setNum;return t&&t!==r&&(r&t)===r}}function yf(e){const t=Gn(e).setNum;return n=>{const r=Gn(n).setNum;return t&&t!==r&&(r|t)===r}}function WM(e){const t=e.split("");return t.map((n,r)=>Ka(r,t).join(""))}function XM(e){const t=Nd(e),n=WM(e).map(Nd).filter(a=>a>=2048).sort()[0],r=vg(n),i=YM(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function KM(e){if(e.length===0)return nr.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=Oe(e[r]),t.empty&&(t=Es(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var ZM=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],JM=ZM;({...nr});var _f=[],Oo={};function xg(){return _f.slice()}function QM(e,t,n){const r=t8(e),i={...Gn(e),name:n||"",quality:r,intervals:e,aliases:t};_f.push(i),i.name&&(Oo[i.name]=i),Oo[i.setNum]=i,Oo[i.chroma]=i,i.aliases.forEach(a=>e8(i,a))}function e8(e,t){Oo[t]=e}function t8(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}JM.forEach(([e,t,n])=>QM(e.split(" "),n.split(" "),t));_f.sort((e,t)=>e.setNum-t.setNum);var n8=e=>{const t=e.reduce((n,r)=>{const i=Oe(r).chroma;return i!==void 0&&(n[i]=n[i]||Oe(r).name),n},{});return n=>t[n]};function r8(e,t={}){const n=e.map(i=>Oe(i).pc).filter(i=>i);return Oe.length===0?[]:u8(n,1,t).filter(i=>i.weight).sort((i,a)=>a.weight-i.weight).map(i=>i.name)}var ul={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},fl=e=>t=>!!(t&e),i8=fl(ul.anyThirds),a8=fl(ul.perfectFifth),o8=fl(ul.anySeventh),s8=fl(ul.nonPerfectFifths);function l8(e){const t=parseInt(e.chroma,2);return i8(t)&&a8(t)&&o8(t)}function c8(e){const t=parseInt(e,2);return s8(t)?e:(t|16).toString(2)}function u8(e,t,n){const r=e[0],i=Oe(r).chroma,a=n8(e),o=Mg(e,!1),s=[];return o.forEach((l,c)=>{const u=n.assumePerfectFifth&&c8(l);xg().filter(f=>n.assumePerfectFifth&&l8(f)?f.chroma===u:f.chroma===l).forEach(f=>{const d=f.aliases[0],m=a(c);c!==i?s.push({weight:.5*t,name:`${m}${d}/${r}`}):s.push({weight:1*t,name:`${m}${d}`})})}),s}function Eg(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function Sg(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"}var Ag=[0,2,4,-1,1,3,5],Pg=Ag.map(e=>Math.floor(e*7/12));function Ng(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=Ag[t]+7*n;if(r===void 0)return[i*a];const o=r-Pg[t]-4*n;return[i*a,i*o]}var f8=[3,0,4,1,5,2,6];function Cg(e){const[t,n,r]=e,i=f8[h8(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+Pg[i];return{step:i,alt:a,oct:o,dir:r}}function h8(e){const t=(e+1)%7;return t<0?7+t:t}var Td=(e,t)=>Array(Math.abs(t)+1).join(e),hu={empty:!0,name:"",acc:""},d8="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",m8="(AA|A|P|M|m|d|dd)([-+]?\\d+)",p8=new RegExp("^"+d8+"|"+m8+"$");function b8(e){const t=p8.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var $d={};function Ss(e){return typeof e=="string"?$d[e]||($d[e]=g8(e)):Sg(e)?Ss(w8(e)):Eg(e)?Ss(e.name):hu}var kd=[0,2,4,5,7,9,11],Tg="PMMPPMM";function g8(e){const t=b8(e);if(t[0]==="")return hu;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=Tg[i];if(a==="M"&&r==="P")return hu;const o=a==="M"?"majorable":"perfectable",s=""+n+r,l=n<0?-1:1,c=n===8||n===-8?n:l*(i+1),u=_8(o,r),h=Math.floor((Math.abs(n)-1)/7),f=l*(kd[i]+u+12*h),d=(l*(kd[i]+u)%12+12)%12,m=Ng({step:i,alt:u,oct:h,dir:l});return{empty:!1,name:s,num:n,q:r,step:i,alt:u,dir:l,type:o,simple:c,semitones:f,chroma:d,coord:m,oct:h}}function y8(e,t){const[n,r=0]=e,i=n*7+r*12<0,a=t||i?[-n,-r,-1]:[n,r,1];return Ss(Cg(a))}function _8(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function w8(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,s=i<0?"-":"",l=Tg[t]==="M"?"majorable":"perfectable";return s+o+v8(l,n)}function v8(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?Td("A",t):Td("d",e==="perfectable"?t:t+1)}var Id=(e,t)=>Array(Math.abs(t)+1).join(e),$g={empty:!0,name:"",pc:"",acc:""},Dd=new Map,M8=e=>"CDEFGAB".charAt(e),x8=e=>e<0?Id("b",-e):Id("#",e),E8=e=>e[0]==="b"?-e.length:e.length;function rr(e){const t=JSON.stringify(e),n=Dd.get(t);if(n)return n;const r=typeof e=="string"?N8(e):Sg(e)?rr(C8(e)):Eg(e)?rr(e.name):$g;return Dd.set(t,r),r}var S8=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function kg(e){const t=S8.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function A8(e){return rr(Cg(e))}var P8=(e,t)=>(e%t+t)%t,nc=[0,2,4,5,7,9,11];function N8(e){const t=kg(e);if(t[0]===""||t[3]!=="")return $g;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=E8(r),s=i.length?+i:void 0,l=Ng({step:a,alt:o,oct:s}),c=n+r+i,u=n+r,h=(nc[a]+o+120)%12,f=s===void 0?P8(nc[a]+o,12)-12*99:nc[a]+o+12*(s+1),d=f>=0&&f<=127?f:null,m=s===void 0?null:Math.pow(2,(f-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:h,coord:l,freq:m,height:f,letter:n,midi:d,name:c,oct:s,pc:u,step:a}}function C8(e){const{step:t,alt:n,oct:r}=e,i=M8(t);if(!i)return"";const a=i+x8(n);return r||r===0?a+r:a}function As(e,t){const n=rr(e),r=Array.isArray(t)?t:Ss(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return A8(a).name}function Ig(e,t){const n=e.length;return r=>{if(!t)return"";const i=r<0?(n- -r%n)%n:r%n,a=Math.floor(r/n),o=As(t,[0,a]);return As(o,e[i])}}function T8(e,t){const n=rr(e),r=rr(t);if(n.empty||r.empty)return"";const i=n.coord,a=r.coord,o=a[0]-i[0],s=i.length===2&&a.length===2?a[1]-i[1]:-Math.floor(o*7/12),l=r.height===n.height&&r.midi!==null&&n.midi!==null&&n.step>r.step;return y8([o,s],l).name}function $8(e,t,n){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,r)}}var k8=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],I8=k8,D8={...nr,name:"",quality:"Unknown",intervals:[],aliases:[]},wf=[],aa={};function R8(e){return aa[e]||D8}function Dg(){return wf.slice()}function L8(e,t,n){const r=O8(e),i={...Gn(e),name:n||"",quality:r,intervals:e,aliases:t};wf.push(i),i.name&&(aa[i.name]=i),aa[i.setNum]=i,aa[i.chroma]=i,i.aliases.forEach(a=>B8(i,a))}function B8(e,t){aa[t]=e}function O8(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}I8.forEach(([e,t,n])=>L8(e.split(" "),n.split(" "),t));wf.sort((e,t)=>e.setNum-t.setNum);var F8=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],G8=F8,U8={...nr,intervals:[],aliases:[]},vf=[],oa={};function q8(){return vf.map(e=>e.name)}function Rg(e){return oa[e]||U8}function hl(){return vf.slice()}function H8(e,t,n=[]){const r={...Gn(e),name:t,intervals:e,aliases:n};return vf.push(r),oa[r.name]=r,oa[r.setNum]=r,oa[r.chroma]=r,r.aliases.forEach(i=>z8(r,i)),r}function z8(e,t){oa[t]=e}G8.forEach(([e,t,...n])=>H8(e.split(" "),t,n));var du={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Mf(e){const[t,n,r,i]=kg(e);return t===""?["",e]:t==="A"&&i==="ug"?["","aug"]:[t+n,r+i]}function Lr(e){if(e==="")return du;if(Array.isArray(e)&&e.length===2)return Fo(e[1],e[0]);{const[t,n]=Mf(e),r=Fo(n,t);return r.empty?Fo(e):r}}function Fo(e,t,n){const r=R8(e),i=rr(t||""),a=rr(n||"");if(r.empty||t&&i.empty||n&&a.empty)return du;const o=T8(i.pc,a.pc),s=r.intervals.indexOf(o)+1;if(!a.empty&&!s)return du;const l=Array.from(r.intervals);for(let f=1;f<s;f++){const d=l[0][0],m=l[0][1],p=parseInt(d,10)+7;l.push(`${p}${m}`),l.shift()}const c=i.empty?[]:l.map(f=>As(i,f));e=r.aliases.indexOf(e)!==-1?e:r.aliases[0];const u=`${i.empty?"":i.pc}${e}${a.empty||s<=1?"":"/"+a.pc}`,h=`${t?i.pc+" ":""}${r.name}${s>1&&n?" over "+a.pc:""}`;return{...r,name:h,symbol:u,type:r.name,root:a.name,intervals:l,rootDegree:s,tonic:i.name,notes:c}}var V8=$8("Chord.chord","Chord.get",Lr);function j8(e,t){const[n,r]=Mf(e);return n?As(n,t)+r:e}function Y8(e){const t=Lr(e),n=yf(t.chroma);return hl().filter(r=>n(r.chroma)).map(r=>r.name)}function W8(e){const t=Lr(e),n=yf(t.chroma);return Dg().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function X8(e){const t=Lr(e),n=gf(t.chroma);return Dg().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function K8(e){const{intervals:t,tonic:n}=Lr(e),r=Ig(t,n);return i=>i?r(i>0?i-1:i):""}function Z8(e){const{intervals:t,tonic:n}=Lr(e);return Ig(t,n)}var Lg={getChord:Fo,get:Lr,detect:r8,chordScales:Y8,extended:W8,reduced:X8,tokenize:Mf,transpose:j8,degrees:K8,steps:Z8,chord:V8},J8=Math.log(2),Q8=Math.log(440);function Bg(e){const t=12*(Math.log(e)-Q8)/J8+69;return Math.round(t*100)/100}var e9="C C# D D# E F F# G G# A A# B".split(" "),t9="C Db D Eb E F Gb G Ab A Bb B".split(" ");function Pi(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);const r=(t.sharps===!0?e9:t9)[e%12];if(t.pitchClass)return r;const i=Math.floor(e/12)-1;return r+i}var n9=["C","D","E","F","G","A","B"],Og=e=>e.name,Fg=e=>e.map(Oe).filter(t=>!t.empty);function r9(e){return e===void 0?n9.slice():Array.isArray(e)?Fg(e).map(Og):[]}var Qt=Oe,i9=e=>Qt(e).name,a9=e=>Qt(e).pc,o9=e=>Qt(e).acc,s9=e=>Qt(e).oct,l9=e=>Qt(e).midi,c9=e=>Qt(e).freq,u9=e=>Qt(e).chroma;function Gg(e){return Pi(e)}function f9(e){return Pi(Bg(e))}function h9(e){return Pi(Bg(e),{sharps:!0})}function d9(e){return Pi(e,{sharps:!0})}var Za=bi,m9=bi,Ug=e=>t=>Za(t,e),p9=Ug,qg=e=>t=>Za(e,t),b9=qg;function Hg(e,t){return Za(e,[t,0])}var g9=Hg;function y9(e,t){return Za(e,[0,t])}var xf=(e,t)=>e.height-t.height,_9=(e,t)=>t.height-e.height;function zg(e,t){return t=t||xf,Fg(e).sort(t).map(Og)}function Vg(e){return zg(e,xf).filter((t,n,r)=>n===0||t!==r[n-1])}var w9=e=>{const t=Qt(e);return t.empty?"":Pi(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function jg(e,t){const n=Qt(e);if(n.empty)return"";const r=Qt(t||Pi(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;const i=n.chroma-n.alt,a=r.chroma-r.alt,o=i>11||a<0?-1:i<0||a>11?1:0,s=n.oct+o;return r.pc+s}var bn={names:r9,get:Qt,name:i9,pitchClass:a9,accidentals:o9,octave:s9,midi:l9,ascending:xf,descending:_9,sortedNames:zg,sortedUniqNames:Vg,fromMidi:Gg,fromMidiSharps:d9,freq:c9,fromFreq:f9,fromFreqSharps:h9,chroma:u9,transpose:Za,tr:m9,transposeBy:Ug,trBy:p9,transposeFrom:qg,trFrom:b9,transposeFifths:Hg,transposeOctaves:y9,trFifths:g9,simplify:w9,enharmonic:jg},Ef=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Rd={...nr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},v9=Ef.map(M9),mu={};v9.forEach(e=>{mu[e.name]=e,e.aliases.forEach(t=>{mu[t]=e})});function Yg(e){return typeof e=="string"?mu[e.toLowerCase()]||Rd:e&&e.name?Yg(e.name):Rd}function M9(e){const[t,n,r,i,a,o,s]=e,l=s?[s]:[],c=Number(n).toString(2);return{empty:!1,intervals:Rg(i).intervals,modeNum:t,chroma:c,normalized:c,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:l}}function Wg(e){return(t,n)=>{const r=Yg(t);if(r.empty)return[];const i=Ka(r.modeNum,e),a=r.intervals.map(o=>bi(n,o));return i.map((o,s)=>a[s]+o)}}Wg(Ef.map(e=>e[4]));Wg(Ef.map(e=>e[5]));var x9={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Xg(e){if(typeof e!="string")return["",""];const t=e.indexOf(" "),n=Oe(e.substring(0,t));if(n.empty){const i=Oe(e);return i.empty?["",e]:[i.name,""]}const r=e.substring(n.name.length+1).toLowerCase();return[n.name,r.length?r:""]}var E9=q8;function gn(e){const t=Array.isArray(e)?e:Xg(e),n=Oe(t[0]).name,r=Rg(t[1]);if(r.empty)return x9;const i=r.name,a=n?r.intervals.map(s=>bi(n,s)):[],o=n?n+" "+i:i;return{...r,name:o,type:i,tonic:n,notes:a}}var S9=BM("Scale.scale","Scale.get",gn);function A9(e,t={}){const n=VM(e),r=Oe(t.tonic??e[0]??""),i=r.chroma;if(i===void 0)return[];const a=n.split("");a[i]="1";const o=Ka(i,a).join(""),s=hl().find(c=>c.chroma===o),l=[];return s&&l.push(r.name+" "+s.name),t.match==="exact"||Kg(o).forEach(c=>{l.push(r.name+" "+c)}),l}function P9(e){const t=gn(e),n=gf(t.chroma);return xg().filter(r=>n(r.chroma)).map(r=>r.aliases[0])}function Kg(e){const t=bf(e)?e:gn(e).chroma,n=yf(t);return hl().filter(r=>n(r.chroma)).map(r=>r.name)}function N9(e){const t=gf(gn(e).chroma);return hl().filter(n=>t(n.chroma)).map(n=>n.name)}function Zg(e){const t=e.map(i=>Oe(i).pc).filter(i=>i),n=t[0],r=Vg(t);return Ka(r.indexOf(n),r)}function C9(e){const t=gn(e);if(t.empty)return[];const n=t.tonic?t.notes:t.intervals;return Mg(t.chroma).map((r,i)=>{const a=gn(r).name;return a?[n[i],a]:["",""]}).filter(r=>r[0])}function T9(e){const t=Array.isArray(e)?Zg(e):gn(e).notes,n=t.map(r=>Oe(r).chroma);return r=>{const i=Oe(typeof r=="number"?Gg(r):r),a=i.height;if(a===void 0)return;const o=a%12,s=n.indexOf(o);if(s!==-1)return jg(i.name,t[s])}}function $9(e){const t=T9(e);return(n,r)=>{const i=Oe(n).height,a=Oe(r).height;return i===void 0||a===void 0?[]:GM(i,a).map(t).filter(o=>o)}}function k9(e){const{intervals:t,tonic:n}=gn(e),r=wg(t,n);return i=>i?r(i>0?i-1:i):""}function I9(e){const{intervals:t,tonic:n}=gn(e);return wg(t,n)}var pu={degrees:k9,detect:A9,extended:Kg,get:gn,modeNames:C9,names:E9,rangeOf:$9,reduced:N9,scaleChords:P9,scaleNotes:Zg,steps:I9,tokenize:Xg,scale:S9};function D9(e){let t,n,r,i,a,o,s,l,c=e[0].join(", ")+"",u,h,f,d,m=e[1].join(" or ")+"",p;return{c(){t=P("main"),n=P("h2"),n.textContent="Chord Detection",r=R(),i=P("p"),i.textContent=`Play a chord on a MIDI instrument. The notes you played and the detected
        chord will be shown below.`,a=R(),o=P("div"),s=X("Notes: "),l=P("b"),u=X(c),h=P("br"),f=X(`
        Detected chord: `),d=P("b"),p=X(m),N(i,"class","explanation"),N(o,"class","visualization"),N(t,"class","demo")},m(_,v){le(_,t,v),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(o,l),b(l,u),b(o,h),b(o,f),b(o,d),b(d,p)},p(_,[v]){v&1&&c!==(c=_[0].join(", ")+"")&&Se(u,c),v&2&&m!==(m=_[1].join(" or ")+"")&&Se(p,m)},i:oe,o:oe,d(_){_&&ae(t)}}}function R9(e,t,n){let r=0,i=[],a=[],o=[];const s=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((u,h)=>{console.log(`MIDI device ${h}: ${u.name}`),u.addListener("noteon",l)}),[...I.inputs])},l=u=>{const h=(u.timestamp-r)/1e3,f={number:u.note.number,velocity:u.rawVelocity,time:h,channel:u.message.channel};i.push(f),c()},c=()=>{const u=Ge(i,h=>h.time);n(0,a=i.filter(h=>h.time>u-1).sort((h,f)=>h.number-f.number).map(h=>bn.fromMidiSharps(h.number))),n(0,a=[...new Set(a)]),n(1,o=Lg.detect(a))};return st(()=>{I.enable().then(s).catch(u=>alert(u)),r=performance.now(),c()}),lt(()=>{for(const u of I.inputs)u.removeListener()}),[a,o]}class L9 extends He{constructor(t){super(),qe(this,t,R9,D9,Ue,{})}}function Tr(e){return e!=null&&!Number.isNaN(e)}function en(e,t){return+Tr(t)-+Tr(e)||pt(e,t)}function Ps(e,t){return+Tr(t)-+Tr(e)||La(e,t)}function Jg(e){return e!=null&&`${e}`!=""}function Qg(e){return isFinite(e)?e:NaN}function dl(e){return e>0&&isFinite(e)?e:NaN}function Sf(e){return e<0&&isFinite(e)?e:NaN}function B9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${O9(e.getUTCFullYear())}-${$n(e.getUTCMonth()+1,2)}-${$n(e.getUTCDate(),2)}${n||r||i||a?`T${$n(n,2)}:${$n(r,2)}${i||a?`:${$n(i,2)}${a?`.${$n(a,3)}`:""}`:""}Z`:""}`}function O9(e){return e<0?`-${$n(-e,6)}`:e>9999?`+${$n(e,6)}`:$n(e,4)}function $n(e,t){return`${e}`.padStart(t,"0")}const F9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function e2(e,t){return F9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}function gi(e){if(e==null)return;const t=e[0],n=e[e.length-1];return La(t,n)}const Yr=1e3,Zn=Yr*60,Jn=Zn*60,yn=Jn*24,on=yn*7,_r=yn*30,Yn=yn*365,rc=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Yr],["5 seconds",5*Yr],["15 seconds",15*Yr],["30 seconds",30*Yr],["minute",Zn],["5 minutes",5*Zn],["15 minutes",15*Zn],["30 minutes",30*Zn],["hour",Jn],["3 hours",3*Jn],["6 hours",6*Jn],["12 hours",12*Jn],["day",yn],["2 days",2*yn],["week",on],["2 weeks",2*on],["month",_r],["3 months",3*_r],["6 months",6*_r],["year",Yn],["2 years",2*Yn],["5 years",5*Yn],["10 years",10*Yn],["20 years",20*Yn],["50 years",50*Yn],["100 years",100*Yn]],Af=new Map([["second",Yr],["minute",Zn],["hour",Jn],["day",yn],["monday",on],["tuesday",on],["wednesday",on],["thursday",on],["friday",on],["saturday",on],["sunday",on],["week",on],["month",_r],["year",Yn]]),t2=new Map([["second",Vt],["minute",Ha],["hour",Va],["day",Ir],["monday",ga],["tuesday",bp],["wednesday",gp],["thursday",Nr],["friday",yp],["saturday",_p],["sunday",mi],["week",mi],["month",Ya],["year",Zt]]),Pf=new Map([["second",Vt],["minute",za],["hour",ja],["day",rl],["monday",ya],["tuesday",wp],["wednesday",vp],["thursday",Cr],["friday",Mp],["saturday",xp],["sunday",pi],["week",pi],["month",Wa],["year",Jt]]),Ja=Symbol("intervalDuration"),ml=Symbol("intervalType");for(const[e,t]of t2)t[Ja]=Af.get(e),t[ml]="time";for(const[e,t]of Pf)t[Ja]=Af.get(e),t[ml]="utc";const Wi=[["year",Jt,"utc"],["month",Wa,"utc"],["day",rl,"utc",6*_r],["hour",ja,"utc",3*yn],["minute",za,"utc",6*Jn],["second",Vt,"utc",30*Zn]],Go=[["year",Zt,"time"],["month",Ya,"time"],["day",Ir,"time",6*_r],["hour",Va,"time",3*yn],["minute",Ha,"time",6*Jn],["second",Vt,"time",30*Zn]],G9=[Wi[0],Go[0],Wi[1],Go[1],Wi[2],Go[2],...Wi.slice(3)];function n2(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=Pf.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function r2(e){return a2(n2(e),"time")}function i2(e){return a2(n2(e),"utc")}function a2([e,t],n){let r=(n==="time"?t2:Pf).get(e);return t>1&&(r=r.every(t),r[Ja]=Af.get(e)*t,r[ml]=n),r}function Ld(e,t){if(!(t>1))return;const n=e[Ja];if(!rc.some(([,i])=>i===n)||n%yn===0&&yn<n&&n<_r)return;const[r]=rc[Gs(([,i])=>Math.log(i)).center(rc,Math.log(n*t))];return(e[ml]==="time"?r2:i2)(r)}function Bd(e,t,n){const r=t==="time"?lf:Xa;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=U9(n);switch(e){case"millisecond":return Ur(r(".%L"),r(":%M:%S"),i);case"second":return Ur(r(":%S"),r("%-I:%M"),i);case"minute":return Ur(r("%-I:%M"),r("%p"),i);case"hour":return Ur(r("%-I %p"),r("%b %-d"),i);case"day":return Ur(r("%-d"),r("%b"),i);case"month":return Ur(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function U9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function q9(e){return e==="time"?Go:e==="utc"?Wi:G9}function H9(e,t,n){const r=Ge(gw(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return Bd("millisecond","utc",n);for(const[i,a,o,s]of q9(e)){if(r>s||i==="hour"&&!r)break;if(t.every(l=>a.floor(l)>=l))return Bd(i,o,n)}}function Ur(e,t,n){return(r,i,a)=>{const o=e(r,i),s=t(r,i),l=i-gi(a);return i!==l&&a[l]!==void 0&&s===t(a[l],l)?o:n(o,s)}}const va=Object.getPrototypeOf(Uint8Array),z9=Object.prototype.toString,o2=Symbol("reindex");function We(e,t,n){const r=typeof t;return r==="string"?Od(e,s2(t),n):r==="function"?Od(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ze(e,Qa(t),n):typeof(t==null?void 0:t.transform)=="function"?Fd(t.transform(e),n):V9(Fd(t,n),e==null?void 0:e[o2])}function V9(e,t){return t?Tf(e,t):e}function Od(e,t,n){return Ze(e,(n==null?void 0:n.prototype)instanceof va?j9(t):t,n)}function Fd(e,t){return t===void 0?xt(e):e instanceof t?e:t.prototype instanceof va&&!(e instanceof va)?t.from(e,Cf):t.from(e)}function j9(e){return(t,n)=>Cf(e(t,n))}const Uo=[null],s2=e=>t=>t[e],Nf={transform:Hn},nt={transform:e=>e},Y9=()=>1,W9=()=>!0,ut=e=>e==null?e:`${e}`,Ie=e=>e==null?e:+e,l2=e=>e?e[0]:void 0,bu=e=>e?e[1]:void 0,Qa=e=>()=>e;function X9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Ko(n,t,r)}function Wr(e){return e instanceof va?e:Ze(e,Cf,Float64Array)}function Cf(e){return e==null?NaN:Number(e)}function K9(e){return Ze(e,Z9)}function Z9(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?e2(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Un(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:gl(e)?[void 0,e]:[e,void 0]}function ft(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function c2(e,t,n){if(e!=null)return nn(e,t,n)}function nn(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function xt(e){return e==null||e instanceof Array||e instanceof va?e:Array.from(e)}function Ze(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Ma(e,t=Array){return e instanceof t?e.slice():t.from(e)}function u2({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function f2({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function h2(e){return u2(e)||f2(e)||e.interval!==void 0}function sr(e){return(e==null?void 0:e.toString)===z9}function gu(e){return sr(e)&&(e.type!==void 0||e.domain!==void 0)}function pl(e){return sr(e)&&typeof e.transform!="function"}function yi(e){return pl(e)&&e.value===void 0&&e.channel===void 0}function d2(e,t,n,r=nt){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function eo(e,t){return e===void 0&&t===void 0?[l2,bu]:[e,t]}function J9({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Un(t)),e===void 0&&([e]=Un(n)),e}function Hn(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function Tf(e,t){return Ze(t,n=>e[n],e.constructor)}function Q9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Eo(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ex(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Ns(e){let t;return[{transform:()=>t,label:Ni(e)},n=>t=n]}function zr(e){return e==null?[e]:Ns(e)}function Ni(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function m2(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Rt(r)||Rt(i)?Ze(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Ze(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function yu(e,t){const n=p2(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ze(e,n):e}function p2(e,t){const n=$f(e,t);return n&&(r=>Tr(r)?n.floor(r):r)}function $f(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Me(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Me(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?r2:i2)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function to(e,t){if(e=$f(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function tx(e,t){if(e=to(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function nx(e){return typeof(e==null?void 0:e.range)=="function"}function bl(e){return e===void 0||pl(e)?e:{value:e}}function rx(e){return e==null?null:{transform:t=>We(t,e,Float64Array),label:Ni(e)}}function Br(e){return e&&typeof e[Symbol.iterator]=="function"}function b2(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Gd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Rt(e){for(const t of e)if(t!=null)return t instanceof Date}function ix(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&e2(t)}function ax(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function ox(e){for(const t of e)if(t!=null)return typeof t=="number"}function ic(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const sx=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function gl(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||sx.has(e))}function lx(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function dt(e){return e==null||xa(e)}function xa(e){return/^\s*none\s*$/i.test(e)}function cx(e){return/^\s*round\s*$/i.test(e)}function _u(e,t){return c2(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function yl(e="middle"){return _u(e,"frameAnchor")}function ux(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function fx(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function g2(e){return Br(e)?fx(e):e}function y2(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=nn(e,"clip",["frame","sphere"])),e}const fn=Symbol("position"),zn=Symbol("color"),no=Symbol("radius"),ro=Symbol("length"),io=Symbol("opacity"),_l=Symbol("symbol"),_2=Symbol("projection"),Be=new Map([["x",fn],["y",fn],["fx",fn],["fy",fn],["r",no],["color",zn],["opacity",io],["symbol",_l],["length",ro],["projection",_2]]);function hx(e){return e===fn||e===_2}function dx(e){return e===fn||e===no||e===ro||e===io}const mx=Math.sqrt(3),px=2/mx,bx={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*px,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},kf=new Map([["asterisk",Hb],["circle",wa],["cross",zb],["diamond",jb],["diamond2",Yb],["hexagon",bx],["plus",Wb],["square",Xb],["square2",Kb],["star",Jb],["times",ng],["triangle",Qb],["triangle2",eg],["wye",tg]]);function If(e){return e&&typeof e.draw=="function"}function gx(e){return If(e)?!0:typeof e!="string"?!1:kf.has(e.toLowerCase())}function Df(e){if(e==null||If(e))return e;const t=kf.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function yx(e){if(e==null||If(e))return[void 0,e];if(typeof e=="string"){const t=kf.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function wl({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=w2(e)),t!=null&&!yi(t)&&(r=ac(r,Rf(t))),n&&(r=ac(r,v2))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||yi(t))&&{sort:t},transform:ac(r,o)}}function _i({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=w2(e)),t!=null&&!yi(t)&&(r=oc(r,Rf(t))),n&&(r=oc(r,v2))),{...i,...(t===null||yi(t))&&{sort:t},initializer:oc(r,a)}}function ac(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,xt(n),r,i)}}function oc(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,s,l,c,u,h;return{data:s=n,facets:l=r,channels:o}=e.call(this,n,r,i,...a),{data:u=s,facets:h=l,channels:c}=t.call(this,s,l,{...i,...o},...a),{data:u,facets:h,channels:{...o,...c}}}}function _x(e,t){return(e.initializer!=null?_i:wl)(e,t)}function w2(e){return(t,n)=>{const r=We(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function v2(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function wx(e,{sort:t,...n}={}){return{...(pl(e)&&e.channel!==void 0?_i:_x)(n,Rf(e)),sort:yi(t)?t:null}}function Rf(e){return(typeof e=="function"&&e.length!==1?vx:Mx)(e)}function vx(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function Mx(e){let t,n;({channel:t,value:e,order:n}={...bl(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?Ps:en),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=en;break;case"descending":n=Ps;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let s;if(t===void 0)s=We(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(s=o[t],!s)return{};s=s.value}const l=(c,u)=>n(s[c],s[u]);return{data:i,facets:a.map(c=>c.slice().sort(l))}}}function xx(e={y:"count"},t={}){const{x:n=nt}=t;if(n==null)throw new Error("missing channel: x");return M2(n,null,e,t)}function Ex(e={fill:"count"},t={}){let{x:n,y:r}=t;if([n,r]=eo(n,r),n==null)throw new Error("missing channel: x");if(r==null)throw new Error("missing channel: y");return M2(n,r,e,t)}function M2(e,t,{data:n=N2,filter:r,sort:i,reverse:a,...o}={},s={}){o=Nx(o,s),n=P2(n,nt),i=i==null?void 0:S2("sort",i,s),r=r==null?void 0:A2("filter",r,s);const[l,c]=zr(e),[u,h]=zr(t),{z:f,fill:d,stroke:m,x1:p,x2:_,y1:v,y2:g,...E}=s,[w,M]=zr(f),[x]=Un(d),[y]=Un(m),[S,A]=zr(x),[$,C]=zr(y);return{..."z"in s&&{z:w||f},..."fill"in s&&{fill:S||d},..."stroke"in s&&{stroke:$||m},...wl(E,(B,O,G)=>{const T=yu(We(B,e),G==null?void 0:G.x),k=yu(We(B,t),G==null?void 0:G.y),L=We(B,f),q=We(B,x),z=We(B,y),H=Tx(o,{z:L,fill:q,stroke:z}),J=[],Z=[],F=T&&c([]),te=k&&h([]),ne=L&&M([]),re=q&&A([]),Q=z&&C([]);let Y=0;for(const D of o)D.initialize(B);i&&i.initialize(B),r&&r.initialize(B);for(const D of O){const V=[];for(const W of o)W.scope("facet",D);i&&i.scope("facet",D),r&&r.scope("facet",D);for(const[W,U]of sc(D,H))for(const[fe,ue]of sc(U,k))for(const[ie,he]of sc(ue,T)){const se={data:B};if(T&&(se.x=ie),k&&(se.y=fe),H&&(se.z=W),!(r&&!r.reduce(he,se))){V.push(Y++),Z.push(n.reduceIndex(he,B,se)),T&&F.push(ie),k&&te.push(fe),L&&ne.push(H===L?W:L[he[0]]),q&&re.push(H===q?W:q[he[0]]),z&&Q.push(H===z?W:z[he[0]]);for(const je of o)je.reduce(he,se);i&&i.reduce(he,se)}}J.push(V)}return $x(J,i,a),{data:Z,facets:J}}),...!Ud(o,"x")&&(l?{x:l}:{x1:p,x2:_}),...!Ud(o,"y")&&(u?{y:u}:{y1:v,y2:g}),...Object.fromEntries(o.map(({name:B,output:O})=>[B,O]))}}function Ud(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function Sx(e,t,n=x2){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",Dx]),t.href!=null&&e.href===void 0&&r.push(["href",C2]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?Ax(i):n(i,a,t))}function x2(e,t,n,r=E2){let i;sr(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,s]=Ns(a.label);let l;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(c){a.initialize(c),l=s([])},scope(c,u){a.scope(c,u)},reduce(c,u){l.push(a.reduce(c,u))}}}function Ax(e){return{name:e,initialize(){},scope(){},reduce(){}}}function E2(e,t,n,r=Lf){const i=ex(e,n),a=r(t,i);let o,s;return{label:Ni(a===wu?null:i,a.label),initialize(l){o=i===void 0?l:We(l,i),a.scope==="data"&&(s=a.reduceIndex(Hn(l),o))},scope(l,c){a.scope===l&&(s=a.reduceIndex(c,o))},reduce(l,c){return a.scope==null?a.reduceIndex(l,o,c):a.reduceIndex(l,o,s,c)}}}function sc(e,t){return t?Fu(e,n=>t[n]):[[,e]]}function Lf(e,t,n=Px){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&sr(e))return kx(e);if(typeof e=="function")return Ix(e);if(/^p\d{2}$/i.test(e))return Tn(X9(e));switch(`${e}`.toLowerCase()){case"first":return C2;case"last":return Rx;case"identity":return N2;case"count":return wu;case"distinct":return Lx;case"sum":return t==null?wu:Bx;case"proportion":return Hd(t,"data");case"proportion-facet":return Hd(t,"facet");case"deviation":return Tn(nw);case"min":return Tn(Xt);case"min-index":return Tn(L1);case"max":return Tn(Ge);case"max-index":return Tn(dw);case"mean":return qd(F1);case"median":return qd($c);case"variance":return Tn(T1);case"mode":return Tn(bw)}return n(e)}function Px(e){throw new Error(`invalid reduce: ${e}`)}function Nx(e,t){return Sx(e,t,S2)}function S2(e,t,n){return x2(e,t,n,A2)}function A2(e,t,n){return E2(e,t,n,P2)}function P2(e,t){return Lf(e,t,Cx)}function Cx(e){switch(`${e}`.toLowerCase()){case"x":return Ox;case"y":return Fx;case"z":return Gx}throw new Error(`invalid group reduce: ${e}`)}function Tx(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function $x(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>en(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function kx(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function Ix(e){return{reduceIndex(t,n,r){return e(Tf(n,t),r)}}}function Tn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function qd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Rt(n)?new Date(r):r}}}const N2={reduceIndex(e,t){return Tf(t,e)}},C2={reduceIndex(e,t){return t[e[0]]}},Dx={reduceIndex(e,t){const r=Yo(Kr(e,a=>a.length,a=>t[a]),bu),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[`… ${a.length.toLocaleString("en-US")} more`,Qn(a,bu)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},Rx={reduceIndex(e,t){return t[e[e.length-1]]}},wu={label:"Frequency",reduceIndex(e){return e.length}},Lx={label:"Distinct",reduceIndex(e,t){const n=new qs;for(const r of e)n.add(t[r]);return n.size}},Bx=Tn(Qn);function Hd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Qn(n,a=>r[a])/i}}const Ox={reduceIndex(e,t,{x:n}){return n}},Fx={reduceIndex(e,t,{y:n}){return n}},Gx={reduceIndex(e,t,{z:n}){return n}};function Ea(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=Ni(r)},s){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),T2(s,{scale:t,type:n,value:We(e,r),label:o,filter:i,hint:a})}function Ux(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Ea(t,r,n)]))}function qx(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Ze(a,o)]}));return n.channels=e,n}function T2(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&ic(r,gl)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&ic(r,lx)?null:"opacity";break;case"symbol":n!==!0&&ic(r,gx)?(t.scale=null,t.value=Ze(r,Df)):t.scale="symbol";break;default:t.scale=Be.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Be.has(n))throw new Error(`unknown scale: ${n}`);return t}function Hx(e,t,n,r,i){const{order:a,reverse:o,reduce:s=!0,limit:l}=i;for(const c in i){if(!Be.has(c))continue;let{value:u,order:h=a,reverse:f=o,reduce:d=s,limit:m=l}=bl(i[c]);const p=u==null?void 0:u.startsWith("-");if(p&&(u=u.slice(1)),h=h===void 0?p!==(u==="width"||u==="height")?k2:$2:jx(h),d==null||d===!1)continue;const _=c==="fx"||c==="fy"?Vx(t,r[c]):zx(n,c);if(!_)throw new Error(`missing channel for scale: ${c}`);const v=_.value,[g=0,E=1/0]=Br(m)?m:m<0?[m]:[0,m];if(u==null)_.domain=()=>{let w=Array.from(new qs(v));return f&&(w=w.reverse()),(g!==0||E!==1/0)&&(w=w.slice(g,E)),w};else{const w=u==="data"?e:u==="height"?zd(n,"y1","y2"):u==="width"?zd(n,"x1","x2"):vu(n,u,u==="y"?"y2":u==="x"?"x2":void 0),M=Lf(d===!0?"max":d,w);_.domain=()=>{let x=rw(Hn(v),y=>M.reduceIndex(y,w),y=>v[y]);return h&&x.sort(h),f&&x.reverse(),(g!==0||E!==1/0)&&(x=x.slice(g,E)),x.map(l2)}}}}function zx(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function Vx(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const s of e[a])i[s]=o}return t}function zd(e,t,n){const r=vu(e,t),i=vu(e,n);return Ze(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function vu(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function jx(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return $2;case"descending":return k2}throw new Error(`invalid order: ${e}`)}function $2([e,t],[n,r]){return en(t,r)||en(e,n)}function k2([e,t],[n,r]){return Ps(t,r)||en(e,n)}function Vd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function Bf(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:y2(n)}}function Qe(e,{document:t}){return ea(Vs(e).call(t.documentElement))}let Mu=0,xu;function Yx(){const e=Mu;return Mu=0,xu=void 0,e}function wr(e){e!==xu&&(xu=e,console.warn(e),++Mu)}const I2=Math.PI,Pn=2*I2,jd=.618;function Wx({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let s,l,c="frame";if(sr(e)){let M;if({type:e,domain:l,inset:M,insetTop:n=M!==void 0?M:n,insetRight:r=M!==void 0?M:r,insetBottom:i=M!==void 0?M:i,insetLeft:a=M!==void 0?M:a,clip:c=c,...s}=e,e==null)return}typeof e!="function"&&({type:e}=D2(e));const{width:u,height:h,marginLeft:f,marginRight:d,marginTop:m,marginBottom:p}=o,_=u-f-d-a-r,v=h-m-p-n-i;if(e=e==null?void 0:e({width:_,height:v,clip:c,...s}),e==null)return;c=Xx(c,f,m,u-d,h-p);let g=f+a,E=m+n,w;if(l!=null){const[[M,x],[y,S]]=ef(e).bounds(l),A=Math.min(_/(y-M),v/(S-x));A>0?(g-=(A*(M+y)-_)/2,E-=(A*(x+S)-v)/2,w=ru({point($,C){this.stream.point($*A+g,C*A+E)}})):wr("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=g===0&&E===0?R2():ru({point(M,x){this.stream.point(M+g,x+E)}})),{stream:M=>e.stream(w.stream(c(M)))}}function D2(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ut(Y7,.7463,.4673);case"albers":return So(W0,.7463,.4673);case"azimuthal-equal-area":return Ut(W7,4,4);case"azimuthal-equidistant":return Ut(X7,Pn,Pn);case"conic-conformal":return So(J7,Pn,Pn);case"conic-equal-area":return So(ms,6.1702,2.9781);case"conic-equidistant":return So(t6,7.312,3.6282);case"equal-earth":return Ut(r6,5.4133,2.6347);case"equirectangular":return Ut(Q7,Pn,I2);case"gnomonic":return Ut(i6,3.4641,3.4641);case"identity":return{type:R2};case"reflect-y":return{type:Kx};case"mercator":return Ut(K7,Pn,Pn);case"orthographic":return Ut(a6,2,2);case"stereographic":return Ut(o6,2,2);case"transverse-mercator":return Ut(s6,Pn,Pn);default:throw new Error(`unknown projection type: ${e}`)}}function Xx(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return k0(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ut(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:s})=>{var c,u,h;const l=e();return o!=null&&((c=l.precision)==null||c.call(l,o)),a!=null&&((u=l.rotate)==null||u.call(l,a)),typeof s=="number"&&((h=l.clipAngle)==null||h.call(l,s)),l.scale(Math.min(r/t,i/n)),l.translate([r/2,i/2]),l},aspectRatio:n/t}}function So(e,t,n){const{type:r,aspectRatio:i}=Ut(e,t,n);return{type:a=>{const{parallels:o,domain:s,width:l,height:c}=a,u=r(a);return o!=null&&(u.parallels(o),s===void 0&&u.fitSize([l,c],{type:"Sphere"})),u},aspectRatio:i}}const R2=Qa({stream:e=>e}),Kx=Qa(ru({point(e,t){this.stream.point(e,-t)}}));function Zx(e,t,n,r){const i=n[e],a=n[t],o=i.length,s=n[e]=new Float64Array(o).fill(NaN),l=n[t]=new Float64Array(o).fill(NaN);let c;const u=r.stream({point(h,f){s[c]=h,l[c]=f}});for(c=0;c<o;++c)u.point(i[c],a[c])}function Jx({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(sr(e)&&(e=e.type),e!=null)}function Qx(e){if(typeof(e==null?void 0:e.stream)=="function")return jd;if(sr(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=D2(e);if(t)return t}return jd}}function eE(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,s){t.push(o),n.push(s)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)dr(o,a);return[r,i]}const L2=new Map([["accent",$4],["category10",T4],["dark2",k4],["observable10",I4],["paired",D4],["pastel1",R4],["pastel2",L4],["set1",B4],["set2",O4],["set3",F4],["tableau10",G4]]);function tE(e){return e!=null&&L2.has(`${e}`.toLowerCase())}const Yd=new Map([...L2,["brbg",Nn(Ip,Dp)],["prgn",Nn(Rp,Lp)],["piyg",Nn(Bp,Op)],["puor",Nn(Fp,Gp)],["rdbu",Nn(lu,ys)],["rdgy",Nn(Up,qp)],["rdylbu",Nn(cu,_a)],["rdylgn",Nn(Hp,zp)],["spectral",Nn(Vp,jp)],["burd",Wd(lu,ys)],["buylrd",Wd(cu,_a)],["blues",Ye(gb,yb)],["greens",Ye(_b,wb)],["greys",Ye(vb,Mb)],["oranges",Ye(Pb,Nb)],["purples",Ye(xb,Eb)],["reds",Ye(Sb,Ab)],["turbo",Cn(Rb)],["viridis",Cn(Lb)],["magma",Cn(Bb)],["inferno",Cn(Ob)],["plasma",Cn(Fb)],["cividis",Cn(Cb)],["cubehelix",Cn(Tb)],["warm",Cn($b)],["cool",Cn(kb)],["bugn",Ye(Yp,Wp)],["bupu",Ye(Xp,Kp)],["gnbu",Ye(Zp,Jp)],["orrd",Ye(Qp,eb)],["pubu",Ye(rb,ib)],["pubugn",Ye(tb,nb)],["purd",Ye(ab,ob)],["rdpu",Ye(sb,lb)],["ylgn",Ye(fb,hb)],["ylgnbu",Ye(cb,ub)],["ylorbr",Ye(db,mb)],["ylorrd",Ye(pb,bb)],["rainbow",Xd(Ib)],["sinebow",Xd(Db)]]);function Ye(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Kt(t,n):e[n])}function Nn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Kt(t,n):e[n])}function Wd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Kt(r=>t(1-r),n):e[n].slice().reverse())}function Cn(e){return({length:t})=>Kt(e,Math.max(2,Math.floor(t)))}function Xd(e){return({length:t})=>Kt(e,Math.floor(t)+1).slice(0,-1)}function B2(e){const t=`${e}`.toLowerCase();if(!Yd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return Yd.get(t)}function vl(e,t){const n=B2(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function nE(e,t="greys"){const n=new Set,[r,i]=vl(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Kd=new Map([["brbg",Dp],["prgn",Lp],["piyg",Op],["puor",Gp],["rdbu",ys],["rdgy",qp],["rdylbu",_a],["rdylgn",zp],["spectral",jp],["burd",e=>ys(1-e)],["buylrd",e=>_a(1-e)],["blues",yb],["greens",wb],["greys",Mb],["purples",Eb],["reds",Ab],["oranges",Nb],["turbo",Rb],["viridis",Lb],["magma",Bb],["inferno",Ob],["plasma",Fb],["cividis",Cb],["cubehelix",Tb],["warm",$b],["cool",kb],["bugn",Wp],["bupu",Kp],["gnbu",Jp],["orrd",eb],["pubugn",nb],["pubu",ib],["purd",ob],["rdpu",lb],["ylgnbu",ub],["ylgn",hb],["ylorbr",mb],["ylorrd",bb],["rainbow",Ib],["sinebow",Db]]);function Of(e){const t=`${e}`.toLowerCase();if(!Kd.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Kd.get(t)}const rE=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function iE(e){return e!=null&&rE.has(`${e}`.toLowerCase())}const O2=e=>t=>e(1-t),lc=[0,1],Zd=new Map([["number",rt],["rgb",Sr],["hsl",U3],["hcl",z3],["lab",q3]]);function F2(e){const t=`${e}`.toLowerCase();if(!Zd.has(t))throw new Error(`unknown interpolator: ${t}`);return Zd.get(t)}function ao(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:s=U2(e,n),unknown:l,round:c,scheme:u,interval:h,range:f=Be.get(e)===no?pE(n,s):Be.get(e)===ro?bE(n,s):Be.get(e)===io?lc:void 0,interpolate:d=Be.get(e)===zn?u==null&&f!==void 0?Sr:Of(u!==void 0?u:r==="cyclical"?"rainbow":"turbo"):c?Yu:rt,reverse:m}){if(h=to(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=F2(d)),m=!!m,f!==void 0){const p=(s=xt(s)).length,_=(f=xt(f)).length;if(p!==_){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ws(d,f),f=void 0}}if(d.length===1?(m&&(d=O2(d),m=!1),f===void 0&&(f=Float64Array.from(s,(p,_)=>_/(s.length-1)),f.length===2&&(f=lc)),t.interpolate((f===lc?Qa:Gf)(d))):t.interpolate(d),o){const[p,_]=ht(s);(p>0||_<0)&&(s=Ma(s),gi(s)!==Math.sign(p)?s[s.length-1]=0:s[0]=0)}return m&&(s=Zo(s)),t.domain(s).unknown(l),i&&(t.nice(aE(i,r)),s=t.domain()),f!==void 0&&t.range(f),a&&t.clamp(a),{type:r,domain:s,range:f,scale:t,interpolate:d,interval:h}}function aE(e,t){return e===!0?void 0:typeof e=="number"?e:tx(e,t)}function oE(e,t,n){return ao(e,of(),t,n)}function sE(e,t,n){return G2(e,t,{...n,exponent:.5})}function G2(e,t,{exponent:n=1,...r}){return ao(e,dp().exponent(n),t,{...r,type:"pow"})}function lE(e,t,{base:n=10,domain:r=gE(t),...i}){return ao(e,cp().base(n),t,{...i,domain:r})}function cE(e,t,{constant:n=1,...r}){return ao(e,fp().constant(n),t,r)}function uE(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=yE(t),unknown:s,interpolate:l,reverse:c}){return n===void 0&&(n=l!==void 0?Kt(l,i):Be.get(e)===zn?vl(a,i):void 0),o.length>0&&(o=mp(o,n===void 0?{length:i}:n).quantiles()),Ff(e,t,{domain:o,range:n,reverse:c,unknown:s})}function fE(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=U2(e,t),unknown:o,interpolate:s,reverse:l}){const[c,u]=ht(a);let h;return n===void 0?(h=ua(c,u,r),h[0]<=c&&h.splice(0,1),h[h.length-1]>=u&&h.pop(),r=h.length+1,n=s!==void 0?Kt(s,r):Be.get(e)===zn?vl(i,r):void 0):(h=Kt(rt(c,u),r+1).slice(1,-1),c instanceof Date&&(h=h.map(f=>new Date(f)))),gi(xt(a))<0&&h.reverse(),Ff(e,t,{domain:h,range:n,reverse:l,unknown:o})}function Ff(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Kt(a,n.length+1):Be.get(e)===zn?vl(i,n.length+1):void 0,reverse:s}){n=xt(n);const l=gi(n);if(!isNaN(l)&&!hE(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return s&&(o=Zo(o)),{type:"threshold",scale:pp(l<0?Zo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function hE(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=La(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function dE(e){return{type:"identity",scale:dx(Be.get(e))?op():t=>t}}function Sa(e,t=Qg){return e.length?[Xt(e,({value:n})=>n===void 0?n:Xt(n,t)),Ge(e,({value:n})=>n===void 0?n:Ge(n,t))]:[0,1]}function U2(e,t){const n=Be.get(e);return(n===no||n===io||n===ro?mE:Sa)(t)}function mE(e){return[0,e.length?Ge(e,({value:t})=>t===void 0?t:Ge(t,Qg)):1]}function pE(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Ko(e,.5,({value:o})=>o===void 0?NaN:Ko(o,.25,dl)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/Ge(i);return a<1?i.map(o=>o*a):i}function bE(e,t){const n=$c(e,({value:a})=>a===void 0?NaN:$c(a,Math.abs)),r=t.map(a=>12*a/n),i=60/Ge(r);return i<1?r.map(a=>a*i):r}function gE(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Sa(e,dl);if(n<0)return Sa(e,Sf)}return[1,10]}function yE(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function Gf(e){return(t,n)=>r=>e(t+r*(n-t))}function Ml(e,t,n,r,{type:i,nice:a,clamp:o,domain:s=Sa(r),unknown:l,pivot:c=0,scheme:u,range:h,symmetric:f=!0,interpolate:d=Be.get(e)===zn?u==null&&h!==void 0?Sr:Of(u!==void 0?u:"rdbu"):rt,reverse:m}){c=+c,s=xt(s);let[p,_]=s;if(s.length>2&&wr(`Warning: the diverging ${e} scale domain contains extra elements.`),La(p,_)<0&&([p,_]=[_,p],m=!m),p=Math.min(p,c),_=Math.max(_,c),typeof d!="function"&&(d=F2(d)),h!==void 0&&(d=d.length===1?Gf(d)(...h):Ws(d,h)),m&&(d=O2(d)),f){const v=n.apply(c),g=v-n.apply(p),E=n.apply(_)-v;g<E?p=n.invert(v-E):g>E&&(_=n.invert(v+g))}return t.domain([p,c,_]).unknown(l).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,_],pivot:c,interpolate:d,scale:t}}function _E(e,t,n){return Ml(e,Cp(),xE,t,n)}function wE(e,t,n){return q2(e,t,{...n,exponent:.5})}function q2(e,t,{exponent:n=1,...r}){return Ml(e,kp().exponent(n=+n),AE(n),t,{...r,type:"diverging-pow"})}function vE(e,t,{base:n=10,pivot:r=1,domain:i=Sa(t,r<0?Sf:dl),...a}){return Ml(e,Tp().base(n=+n),EE,t,{domain:i,pivot:r,...a})}function ME(e,t,{constant:n=1,...r}){return Ml(e,$p().constant(n=+n),PE(n),t,r)}const xE={apply(e){return e},invert(e){return e}},EE={apply:Math.log,invert:Math.exp},SE={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function AE(e){return e===.5?SE:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function PE(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function H2(e,t,n,r){return ao(e,t,n,r)}function NE(e,t,n){return H2(e,N4(),t,n)}function CE(e,t,n){return H2(e,C4(),t,n)}const oo=Symbol("ordinal");function z2(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:s,hint:l}){return i=to(i,r),a===void 0&&(a=j2(n,i,e)),(r==="categorical"||r===oo)&&(r="ordinal"),s&&(a=Zo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:l,interval:i}}function TE(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:s,...l}){r=to(r,n),i===void 0&&(i=j2(t,r,e));let c;if(Be.get(e)===_l)c=IE(t),a=a===void 0?DE(c):Ze(a,Df);else if(Be.get(e)===zn&&(a===void 0&&(n==="ordinal"||n===oo)&&(a=nE(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const u=Of(o),h=a[0],f=a[1]-a[0];a=({length:d})=>Kt(m=>u(h+f*m),d)}else a=B2(o);if(s===au)throw new Error(`implicit unknown on ${e} scale is not supported`);return z2(e,af().unknown(s),t,{...l,type:n,domain:i,range:a,hint:c})}function $E(e,t,{align:n=.5,padding:r=.5,...i}){return V2(l6().align(n).padding(r),t,i,e)}function kE(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return V2(el().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function V2(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=z2(r,e,t,n),e.round=i,e}function j2(e,t,n){const r=new qs;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=ht(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Be.get(n)===fn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Yo(r,en)}function Jd(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function IE(e){return{fill:Jd(e,"fill"),stroke:Jd(e,"stroke")}}function DE(e){return dt(e.fill)?Q4:J4}function Eu(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:s,nice:l,clamp:c,zero:u,align:h,padding:f,projection:d,facet:{label:m=t}={},...p}={}){const _={};for(const[v,g]of e){const E=p[v],w=FE(v,g,{round:Be.get(v)===fn?s:void 0,nice:l,clamp:c,zero:u,align:h,padding:f,projection:d,...E});if(w){let{label:M=v==="fx"||v==="fy"?m:t,percent:x,transform:y,inset:S,insetTop:A=S!==void 0?S:v==="y"?r:0,insetRight:$=S!==void 0?S:v==="x"?i:0,insetBottom:C=S!==void 0?S:v==="y"?a:0,insetLeft:B=S!==void 0?S:v==="x"?o:0}=E||{};if(y==null)y=void 0;else if(typeof y!="function")throw new Error("invalid scale transform; not a function");w.percent=!!x,w.label=M===void 0?LE(g,w):M,w.transform=y,v==="x"||v==="fx"?(w.insetLeft=+B,w.insetRight=+$):(v==="y"||v==="fy")&&(w.insetTop=+A,w.insetBottom=+C),_[v]=w}}return _}function Qd(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:s,label:l}=i;t[r]=zE(i),n[r]=a,a.type=o,s!=null&&(a.interval=s),l!=null&&(a.label=l)}return n}function RE(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?Uf(t):t;i&&em(i,o),a&&tm(a,o);const s=i||a?Y2(e,t):t;n&&em(n,s),r&&tm(r,s)}function LE(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Or(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function BE(e){return Math.sign(gi(e.domain()))*Math.sign(gi(e.range()))}function Uf(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:s,marginRight:l,marginBottom:c,marginLeft:u}}=e;return{marginTop:Math.max(t,s),marginRight:Math.max(n,l),marginBottom:Math.max(r,c),marginLeft:Math.max(i,u),width:a,height:o}}function Y2({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:l}=Uf(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:s,height:t?t.scale.bandwidth()+r+a:l,facet:{width:s,height:l}}}function em(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,s=a+n,l=i-o-r;e.range=[s,Math.max(s,l)],Or(e)||(e.range=X2(e)),e.scale.range(e.range)}W2(e)}function tm(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,s=a+n,l=i-o-r;e.range=[Math.max(s,l),s],Or(e)?e.range.reverse():e.range=X2(e),e.scale.range(e.range)}W2(e)}function W2(e){e.round===void 0&&UE(e)&&OE(e)<=30&&e.scale.round(!0)}function OE({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,s=Math.abs(r-n)/Math.max(1,o+a*2);return(s-Math.floor(s))*o}function X2(e){const t=e.scale.domain().length+K2(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function FE(e,t=[],n={}){const r=GE(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Or({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(Rt)?wr(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${qr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`):i.some(ix)?wr(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${qr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`):i.some(ax)&&wr(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${qr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Ao(t,n,Wr);break;case"identity":switch(Be.get(e)){case fn:n=Ao(t,n,Wr);break;case _l:n=Ao(t,n,qE);break}break;case"utc":case"time":n=Ao(t,n,K9);break}switch(r){case"diverging":return _E(e,t,n);case"diverging-sqrt":return wE(e,t,n);case"diverging-pow":return q2(e,t,n);case"diverging-log":return vE(e,t,n);case"diverging-symlog":return ME(e,t,n);case"categorical":case"ordinal":case oo:return TE(e,t,n);case"cyclical":case"sequential":case"linear":return oE(e,t,n);case"sqrt":return sE(e,t,n);case"threshold":return Ff(e,t,n);case"quantile":return uE(e,t,n);case"quantize":return fE(e,t,n);case"pow":return G2(e,t,n);case"log":return lE(e,t,n);case"symlog":return cE(e,t,n);case"utc":return CE(e,t,n);case"time":return NE(e,t,n);case"point":return $E(e,t,n);case"band":return kE(e,t,n);case"identity":return dE(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function qr(e){return typeof e=="symbol"?e.description:e}function nm(e){return typeof e=="string"?`${e}`.toLowerCase():e}const rm={toString:()=>"projection"};function GE(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:s}){if(n=nm(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&s!=null&&(n=rm);for(const c of t){const u=nm(c.type);if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}}if(n===rm)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:c})=>c!==void 0))return;const l=Be.get(e);if(l===no)return"sqrt";if(l===io||l===ro)return"linear";if(l===_l)return"ordinal";if((r||i||[]).length>2)return cc(l);if(r!==void 0){if(Gd(r))return cc(l);if(Rt(r))return"utc"}else{const c=t.map(({value:u})=>u).filter(u=>u!==void 0);if(c.some(Gd))return cc(l);if(c.some(Rt))return"utc"}if(l===zn){if(o!=null||iE(a))return"diverging";if(tE(a))return"categorical"}return"linear"}function cc(e){switch(e){case fn:return"point";case zn:return oo;default:return"ordinal"}}function Or({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===oo}function K2({type:e}){return e==="threshold"}function UE({type:e}){return e==="point"||e==="band"}function ir(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function Ao(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function qE(e){return Ze(e,Df)}function HE(e){return t=>{if(!Be.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function zE({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:s,pivot:l}){if(t==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const c=e.unknown?e.unknown():void 0;return{type:t,domain:Ma(n),...r!==void 0&&{range:Ma(r)},...o!==void 0&&{transform:o},...s&&{percent:s},...c!==void 0&&{unknown:c},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:u=>e(u),...e.invert&&{invert:u=>e.invert(u)}}}function VE(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const jE=VE(e=>new Intl.NumberFormat(e));function YE(e="en-US"){const t=jE(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function WE(e){return B9(e,"Invalid Date")}function XE(e="en-US"){const t=YE(e);return n=>(n instanceof Date?WE:typeof n=="number"?t:ut)(n)}const wi=XE(),mt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let KE=0;function im(){return`plot-clip-${++KE}`}function ZE(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:s,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:h,strokeLinejoin:f,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:_,opacity:v,mixBlendMode:g,imageFilter:E,paintOrder:w,pointerEvents:M,shapeRendering:x,channels:y},{ariaLabel:S,fill:A="currentColor",fillOpacity:$,stroke:C="none",strokeOpacity:B,strokeWidth:O,strokeLinecap:G,strokeLinejoin:T,strokeMiterlimit:k,paintOrder:L}){A===null&&(s=null,l=null),C===null&&(c=null,h=null),dt(A)?!dt(C)&&(!dt(s)||y!=null&&y.fill)&&(C="none"):dt(C)&&(!dt(c)||y!=null&&y.stroke)&&(A="none");const[q,z]=Un(s,A),[H,J]=ft(l,$),[Z,F]=Un(c,C),[te,ne]=ft(h,B),[re,Q]=ft(v);xa(F)||(u===void 0&&(u=O),d===void 0&&(d=G),f===void 0&&(f=T),m===void 0&&!cx(f)&&(m=k),!xa(z)&&w===void 0&&(w=L));const[Y,D]=ft(u);return A!==null&&(e.fill=et(z,"currentColor"),e.fillOpacity=Li(J,1)),C!==null&&(e.stroke=et(F,"none"),e.strokeWidth=Li(D,1),e.strokeOpacity=Li(ne,1),e.strokeLinejoin=et(f,"miter"),e.strokeLinecap=et(d,"butt"),e.strokeMiterlimit=Li(m,4),e.strokeDasharray=et(p,"none"),e.strokeDashoffset=et(_,"0")),e.target=ut(o),e.ariaLabel=ut(S),e.ariaDescription=ut(i),e.ariaHidden=ut(a),e.opacity=Li(Q,1),e.mixBlendMode=et(g,"normal"),e.imageFilter=et(E,"none"),e.paintOrder=et(w,"normal"),e.pointerEvents=et(M,"auto"),e.shapeRendering=et(x,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:q,scale:"auto",optional:!0},fillOpacity:{value:H,scale:"auto",optional:!0},stroke:{value:Z,scale:"auto",optional:!0},strokeOpacity:{value:te,scale:"auto",optional:!0},strokeWidth:{value:Y,optional:!0},opacity:{value:re,scale:"auto",optional:!0}}}function JE(e,t){t&&e.filter(n=>Jg(t[n])).append("title").call(QE,t)}function QE(e,t){t&&e.text(n=>wi(t[n]))}function Vn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:s,strokeOpacity:l,strokeWidth:c,opacity:u,href:h}){r&&Ee(e,"aria-label",f=>r[f]),a&&Ee(e,"fill",f=>a[f]),o&&Ee(e,"fill-opacity",f=>o[f]),s&&Ee(e,"stroke",f=>s[f]),l&&Ee(e,"stroke-opacity",f=>l[f]),c&&Ee(e,"stroke-width",f=>c[f]),u&&Ee(e,"opacity",f=>u[f]),h&&tS(e,f=>h[f],t),n||JE(e,i)}function eS(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:s,marginLeft:l,marginRight:c,marginTop:u,marginBottom:h}=n,f=im();i=`url(#${f})`,e=Qe("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",f).append("rect").attr("x",l).attr("y",u).attr("width",o-c-l).attr("height",s-u-h)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const s=im();i=`url(#${s})`,e.append("clipPath").attr("id",s).append("path").attr("d",ef(o)({type:"Sphere"}));break}}Ee(e,"aria-label",t.ariaLabel),Ee(e,"aria-description",t.ariaDescription),Ee(e,"aria-hidden",t.ariaHidden),Ee(e,"clip-path",i)}function vn(e,t,n,r){eS(e,t,n,r),Ee(e,"fill",t.fill),Ee(e,"fill-opacity",t.fillOpacity),Ee(e,"stroke",t.stroke),Ee(e,"stroke-width",t.strokeWidth),Ee(e,"stroke-opacity",t.strokeOpacity),Ee(e,"stroke-linejoin",t.strokeLinejoin),Ee(e,"stroke-linecap",t.strokeLinecap),Ee(e,"stroke-miterlimit",t.strokeMiterlimit),Ee(e,"stroke-dasharray",t.strokeDasharray),Ee(e,"stroke-dashoffset",t.strokeDashoffset),Ee(e,"shape-rendering",t.shapeRendering),Ee(e,"filter",t.imageFilter),Ee(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;Ee(e,"pointer-events",i)}function Mn(e,t){nS(e,"mix-blend-mode",t.mixBlendMode),Ee(e,"opacity",t.opacity)}function tS(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(si.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(si.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function Ee(e,t,n){n!=null&&e.attr(t,n)}function nS(e,t,n){n!=null&&e.style(t,n)}function Ot(e,t,{x:n,y:r},i=mt,a=mt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function et(e,t){if((e=ut(e))!==t)return e}function Li(e,t){if((e=Ie(e))!==t)return e}const rS=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function qf(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!rS.test(e))throw new Error(`invalid class name: ${e}`);return e}function Hf(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function so({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function iS(e,t,n={}){let r=.5-mt,i=.5+mt,a=.5+mt,o=.5-mt;for(const{marginTop:p,marginRight:_,marginBottom:v,marginLeft:g}of t)p>r&&(r=p),_>i&&(i=_),v>a&&(a=v),g>o&&(o=g);let{margin:s,marginTop:l=s!==void 0?s:r,marginRight:c=s!==void 0?s:i,marginBottom:u=s!==void 0?s:a,marginLeft:h=s!==void 0?s:o}=n;l=+l,c=+c,u=+u,h=+h;let{width:f=640,height:d=aS(e,n,{width:f,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,l-r+u-a)}=n;f=+f,d=+d;const m={width:f,height:d,marginTop:l,marginRight:c,marginBottom:u,marginLeft:h};if(e.fx||e.fy){let{margin:p,marginTop:_=p!==void 0?p:l,marginRight:v=p!==void 0?p:c,marginBottom:g=p!==void 0?p:u,marginLeft:E=p!==void 0?p:h}=n.facet??{};_=+_,v=+v,g=+g,E=+E,m.facet={marginTop:_,marginRight:v,marginBottom:g,marginLeft:E}}return m}function aS({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:s,marginRightDefault:l,marginBottomDefault:c,marginLeftDefault:u}){const h=n?n.scale.domain().length:1,f=Qx(i);if(f){const m=r?r.scale.domain().length:1,p=(1.1*h-.1)/(1.1*m-.1)*f,_=Math.max(.1,Math.min(10,p));return Math.round((o-u-l)*_+s+c)}const d=t?Or(t)?t.scale.domain().length:Math.max(7,17/h):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=am("y",t)/(am("x",e)*a),p=r?r.scale.bandwidth():1,_=n?n.scale.bandwidth():1,v=p*(o-u-l)-e.insetLeft-e.insetRight;return(m*v+t.insetTop+t.insetBottom)/_+s+c}return!!(t||n)*Math.max(1,Math.min(60,d*h))*20+!!r*30+60}function am(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const s=t.scale.exponent();i=l=>Math.pow(l,s);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=ht(r);return Math.abs(i(o)-i(a))}function oS(e,t){const{fx:n,fy:r}=Eu(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?ew(i,a).map(([o,s],l)=>({x:o,y:s,i:l})):i?i.map((o,s)=>({x:o,i:s})):a?a.map((o,s)=>({y:o,i:s})):void 0}function sS(e,{x:t,y:n}){return t&&(t=Su(t)),n&&(n=Su(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function zf(e,{fx:t,fy:n}){const r=Hn(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Kr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Kr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Kr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function lS(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function cS(e){const t=[],n=new Uint32Array(Qn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const uS=new Map([["top",uc],["right",dc],["bottom",fc],["left",hc],["top-left",Po(uc,hc)],["top-right",Po(uc,dc)],["bottom-left",Po(fc,hc)],["bottom-right",Po(fc,dc)],["top-empty",dS],["right-empty",bS],["bottom-empty",mS],["left-empty",pS],["empty",gS]]);function fS(e){if(e==null)return null;const t=uS.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const om=new WeakMap;function Su(e){let t=om.get(e);return t||om.set(e,t=new Mr(Ze(e,(n,r)=>[n,r]))),t}function lr(e,t){return Su(e).get(t)}function hS(e,t,n){return t=Eo(t),n=Eo(n),e.find(r=>Object.is(Eo(r.x),t)&&Object.is(Eo(r.y),n))}function xl(e,t,n){var r;return(r=hS(e,t,n))==null?void 0:r.empty}function uc(e,{y:t},{y:n}){return t?lr(t,n)===0:!0}function fc(e,{y:t},{y:n}){return t?lr(t,n)===t.length-1:!0}function hc(e,{x:t},{x:n}){return t?lr(t,n)===0:!0}function dc(e,{x:t},{x:n}){return t?lr(t,n)===t.length-1:!0}function dS(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=lr(t,r);if(a>0)return xl(e,n,t[a-1])}function mS(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=lr(t,r);if(a<t.length-1)return xl(e,n,t[a+1])}function pS(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=lr(t,n);if(a>0)return xl(e,t[a-1],r)}function bS(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=lr(t,n);if(a<t.length-1)return xl(e,t[a+1],r)}function gS(e,t,{empty:n}){return n}function Po(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function mc(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class Et{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:s,fy:l,sort:c,dx:u=0,dy:h=0,margin:f=0,marginTop:d=f,marginRight:m=f,marginBottom:p=f,marginLeft:_=f,clip:v=i==null?void 0:i.clip,channels:g,tip:E,render:w}=r;if(this.data=t,this.sort=yi(c)?c:null,this.initializer=_i(r).initializer,this.transform=this.initializer?r.transform:wl(r).transform,a===null||a===!1?this.facet=null:(this.facet=nn(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Uo&&typeof s=="string"?[s]:s,this.fy=t===Uo&&typeof l=="string"?[l]:l),this.facetAnchor=fS(o),n=g2(n),g!==void 0&&(n={...yS(g),...n}),i!==void 0&&(n={...ZE(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([M,x])=>{if(pl(x.value)){const{value:y,label:S=x.label,scale:A=x.scale}=x.value;x={...x,label:S,scale:A,value:y}}if(t===Uo&&typeof x.value=="string"){const{value:y}=x;x={...x,value:[y]}}return[M,x]}).filter(([M,{value:x,optional:y}])=>{if(x!=null)return!0;if(y)return!1;throw new Error(`missing channel value: ${M}`)})),this.dx=+u,this.dy=+h,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+_,this.clip=y2(v),this.tip=_S(E),this.facet==="super"){if(s||l)throw new Error("super-faceting cannot use fx or fy");for(const M in this.channels){const{scale:x}=n[M];if(!(x!=="x"&&x!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=J2(w,this.render))}initialize(t,n,r){let i=xt(this.data);t===void 0&&i!=null&&(t=[Hn(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=xt(i)),t!==void 0&&(t.original=a);const o=Ux(this.channels,i);return this.sort!=null&&Hx(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=Tr}=n[i];if(a!==null){const o=r[i];t=t.filter(s=>a(o[s]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&Zx(i,a,n,r.projection)}}scale(t,n,r){const i=qx(t,n);return r.projection&&this.project(t,i,r),i}}function Z2(...e){return e.plot=Et.prototype.plot,e}function J2(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,s){return e.call(this,n,r,i,a,o,(l,c,u,h,f)=>t.call(this,l,c,u,h,f,s))}}function yS(e){return Object.fromEntries(Object.entries(g2(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:bl(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function _S(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?nn(e,"tip",["x","y","xy"]):e}function El(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:sr(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const sm=new WeakMap;function Vf(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:s,render:l,...c}={}){return o=+o,i!=null&&(n??(n=null),s={...s,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),s={...s,py:{value:a,scale:"y"}}),{x:n,y:r,channels:s,...c,render:J2(function(u,h,f,d,m,p){m={...m,pointerSticky:!1};const _=m.ownerSVGElement,{data:v}=m.getMarkState(this);let g=sm.get(_);g||sm.set(_,g={sticky:!1,roots:[],renders:[]});let E=g.renders.push(F)-1;const{x:w,y:M,fx:x,fy:y}=h;let S=x?x(u.fx)-d.marginLeft:0,A=y?y(u.fy)-d.marginTop:0;w!=null&&w.bandwidth&&(S+=w.bandwidth()/2),M!=null&&M.bandwidth&&(A+=M.bandwidth()/2);const $=u.fi!=null;let C;if($){let Q=g.facetStates;Q||(g.facetStates=Q=new Map),C=Q.get(this),C||Q.set(this,C=new Map)}const[B,O]=so(this,d),{px:G,py:T}=f,k=G?Q=>G[Q]:Q2(f,B),L=T?Q=>T[Q]:ey(f,O);let q,z,H,J;function Z(Q,Y){if($)if(J&&(J=cancelAnimationFrame(J)),Q==null)C.delete(u.fi);else{C.set(u.fi,Y),J=requestAnimationFrame(()=>{J=null;for(const[D,V]of C)if(V<Y||V===Y&&D<u.fi){Q=null;break}F(Q)});return}F(Q)}function F(Q){if(q===Q&&H===g.sticky)return;q=Q,H=m.pointerSticky=g.sticky;const Y=q==null?[]:[q];$&&(Y.fx=u.fx,Y.fy=u.fy,Y.fi=u.fi);const D=p(Y,h,f,d,m);if(z){if($){const V=z.parentNode,W=z.getAttribute("transform"),U=D.getAttribute("transform");W?D.setAttribute("transform",W):D.removeAttribute("transform"),U?V.setAttribute("transform",U):V.removeAttribute("transform"),D.removeAttribute("aria-label"),D.removeAttribute("aria-description"),D.removeAttribute("aria-hidden")}z.replaceWith(D)}return g.roots[E]=z=D,q==null&&(C==null?void 0:C.size)>1||m.dispatchValue(q==null?null:v[q]),D}function te(Q){if(g.sticky||Q.pointerType==="mouse"&&Q.buttons===1)return;let[Y,D]=c3(Q);Y-=S,D-=A;const V=Y<d.marginLeft||Y>d.width-d.marginRight?1:e,W=D<d.marginTop||D>d.height-d.marginBottom?1:t;let U=null,fe=o*o;for(const ue of u){const ie=V*(k(ue)-Y),he=W*(L(ue)-D),se=ie*ie+he*he;se<=fe&&(U=ue,fe=se)}if(U!=null&&(e!==1||t!==1)){const ue=k(U)-Y,ie=L(U)-D;fe=ue*ue+ie*ie}Z(U,fe)}function ne(Q){Q.pointerType==="mouse"&&q!=null&&(g.sticky&&g.roots.some(Y=>Y==null?void 0:Y.contains(Q.target))||(g.sticky?(g.sticky=!1,g.renders.forEach(Y=>Y(null))):(g.sticky=!0,F(q)),Q.stopImmediatePropagation()))}function re(Q){Q.pointerType==="mouse"&&(g.sticky||Z(null))}return _.addEventListener("pointerenter",te),_.addEventListener("pointermove",te),_.addEventListener("pointerdown",ne),_.addEventListener("pointerleave",re),F(null)},l)}}function wS(e){return Vf(1,1,e)}function vS(e){return Vf(1,.01,e)}function lm(e){return Vf(.01,1,e)}function Q2({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function ey({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function ty(e){return Or(e)&&e.interval===void 0?void 0:"tabular-nums"}function MS(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:s=0,marginBottom:l=16+r,marginLeft:c=0,style:u,ticks:h=(i-c-s)/64,tickFormat:f,fontVariant:d=ty(e),round:m=!0,opacity:p,className:_}=t;const v=Bf(t);_=qf(_),p=ft(p)[1],f===null&&(f=()=>null);const g=Qe("svg",v).attr("class",`${_}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(B=>B.append("style").text(`:where(.${_}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${_}-ramp text) {
  white-space: pre;
}`)).call(Hf,u);let E=B=>B.selectAll(".tick line").attr("y1",o+l-a),w;const M=m?(B,O)=>B.rangeRound(O):(B,O)=>B.range(O),{type:x,domain:y,range:S,interpolate:A,scale:$,pivot:C}=e;if(A){const B=S===void 0?A:Ws(A.length===1?Gf(A):A,S);w=M($.copy(),Kt(rt(c,i-s),Math.min(y.length+(C!==void 0),S===void 0?1/0:S.length)));const O=256,G=v.document.createElement("canvas");G.width=O,G.height=1;const T=G.getContext("2d");for(let k=0,L=O-1;k<O;++k)T.fillStyle=B(k/L),T.fillRect(k,0,1,1);g.append("image").attr("opacity",p).attr("x",c).attr("y",o).attr("width",i-c-s).attr("height",a-o-l).attr("preserveAspectRatio","none").attr("xlink:href",G.toDataURL())}else if(x==="threshold"){const B=y,O=f===void 0?G=>G:typeof f=="string"?Si(f):f;w=M(of().domain([-1,S.length-1]),[c,i-s]),g.append("g").attr("fill-opacity",p).selectAll().data(S).enter().append("rect").attr("x",(G,T)=>w(T-1)).attr("y",o).attr("width",(G,T)=>w(T)-w(T-1)).attr("height",a-o-l).attr("fill",G=>G),h=Ze(B,(G,T)=>T),f=G=>O(B[G],G)}else w=M(el().domain(y),[c,i-s]),g.append("g").attr("fill-opacity",p).selectAll().data(y).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",a-o-l).attr("fill",$),E=()=>{};return g.append("g").attr("transform",`translate(0,${a-l})`).call(Aw(w).ticks(Array.isArray(h)?null:h,typeof f=="string"?f:void 0).tickFormat(typeof f=="function"?f:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",et(d,"normal")).call(E).call(B=>B.select(".domain").remove()),n!==void 0&&g.append("text").attr("x",c).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),g.node()}const ny=Math.PI/180;function Sl(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=pc(n),e.markerMid=pc(r),e.markerEnd=pc(i)}function pc(e){if(e==null||e===!1)return null;if(e===!0)return um;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return cm("auto");case"arrow-reverse":return cm("auto-start-reverse");case"dot":return xS;case"circle":case"circle-fill":return um;case"circle-stroke":return ES;case"tick":return bc("auto");case"tick-x":return bc(90);case"tick-y":return bc(0)}throw new Error(`invalid marker: ${e}`)}function cm(e){return(t,n)=>Qe("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function xS(e,t){return Qe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function um(e,t){return Qe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function ES(e,t){return Qe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function bc(e){return(t,n)=>Qe("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let SS=0;function Al(e,t,{stroke:n},r){return AS(e,t,n&&(i=>n[i]),r)}function AS(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const s=new Map;function l(c){return function(u){const h=a(u);let f=s.get(c);f||s.set(c,f=new Map);let d=f.get(h);if(!d){const m=this.parentNode.insertBefore(c(h,o),this),p=`plot-marker-${++SS}`;m.setAttribute("id",p),f.set(h,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),r&&e.attr("marker-end",l(r))}function ry({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=ay(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function iy({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=ay(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function ay(e,t,n){return e===void 0&&t===void 0&&n===void 0?mt?[1,0]:[.5,.5]:[t,n]}function oy(e,{interval:t}){return e={...bl(e)},e.interval=$f(e.interval===void 0?t:e.interval),e}function sy(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:s,interval:l}=oy(i,n);if(s==null||l==null&&!r)return n;const c=Ni(i);if(l==null){let d;const m={transform:p=>d||(d=We(p,s)),label:c};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let u,h;function f(d){return h!==void 0&&d===u?h:h=Ze(We(u=d,s),m=>l.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:f,label:c}:a,[`${e}2`]:o===void 0?{transform:d=>f(d).map(m=>l.offset(m)),label:c}:o})}function ly(e,t,n){const{[e]:r}=n,{value:i,interval:a}=oy(r,n);return i==null||a==null?n:t({...n,[e]:{label:Ni(r),transform:o=>{const s=Ze(We(o,i),c=>a.floor(c)),l=s.map(c=>a.offset(c));return s.map(Rt(s)?(c,u)=>c==null||isNaN(c=+c)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((c+u)/2):(c,u)=>c==null||(u=l[u],u==null)?NaN:(+c+ +u)/2)}}})}function cy(e={}){return sy("x",ry,e)}function uy(e={}){return sy("y",iy,e)}function PS(e={}){return ly("x",ry,e)}function NS(e={}){return ly("y",iy,e)}const fy={ariaLabel:"rule",fill:null,stroke:"currentColor"};class CS extends Et{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:s=o,insetBottom:l=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},El(n,"x"),fy),this.insetTop=Ie(s),this.insetBottom=Ie(l),Sl(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:l,y1:c,y2:u}=r,{width:h,height:f,marginTop:d,marginRight:m,marginLeft:p,marginBottom:_}=i,{insetTop:v,insetBottom:g}=this;return Qe("svg:g",a).call(vn,this,i,a).call(Ot,this,{x:l&&o},mt,0).call(E=>E.selectAll().data(t).enter().append("line").call(Mn,this).attr("x1",l?w=>l[w]:(p+h-m)/2).attr("x2",l?w=>l[w]:(p+h-m)/2).attr("y1",c&&!ir(s)?w=>c[w]+v:d+v).attr("y2",u&&!ir(s)?s.bandwidth?w=>u[w]+s.bandwidth()-g:w=>u[w]-g:f-_-g).call(Vn,this,r).call(Al,this,r,a)).node()}}class TS extends Et{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:s=o,insetLeft:l=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},El(n,"y"),fy),this.insetRight=Ie(s),this.insetLeft=Ie(l),Sl(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{y:l,x1:c,x2:u}=r,{width:h,height:f,marginTop:d,marginRight:m,marginLeft:p,marginBottom:_}=i,{insetLeft:v,insetRight:g}=this;return Qe("svg:g",a).call(vn,this,i,a).call(Ot,this,{y:l&&s},0,mt).call(E=>E.selectAll().data(t).enter().append("line").call(Mn,this).attr("x1",c&&!ir(o)?w=>c[w]+v:p+v).attr("x2",u&&!ir(o)?o.bandwidth?w=>u[w]+o.bandwidth()-g:w=>u[w]-g:h-m-g).attr("y1",l?w=>l[w]:(d+f-_)/2).attr("y2",l?w=>l[w]:(d+f-_)/2).call(Vn,this,r).call(Al,this,r,a)).node()}}function jt(e,t){let{x:n=nt,y:r,y1:i,y2:a,...o}=uy(t);return[i,a]=hy(r,i,a),new CS(e,{...o,x:n,y1:i,y2:a})}function Lt(e,t){let{y:n=nt,x:r,x1:i,x2:a,...o}=cy(t);return[i,a]=hy(r,i,a),new TS(e,{...o,y:n,x1:i,x2:a})}function hy(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function jf(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const $S={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},dy="­";class Yf extends Et{constructor(t,n={}){const{x:r,y:i,text:a=Br(t)&&b2(t)?nt:Nf,frameAnchor:o,textAnchor:s=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:c=1,lineWidth:u=1/0,textOverflow:h,monospace:f,fontFamily:d=f?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:_,fontWeight:v,rotate:g}=n,[E,w]=ft(g,0),[M,x]=BS(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:M,optional:!0},rotate:{value:rx(E),optional:!0},text:{value:a,filter:Jg,optional:!0}},n,$S),this.rotate=w,this.textAnchor=et(s,"middle"),this.lineAnchor=nn(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+u,this.textOverflow=my(h),this.monospace=!!f,this.fontFamily=ut(d),this.fontSize=x,this.fontStyle=ut(p),this.fontVariant=ut(_),this.fontWeight=ut(v),this.frameAnchor=yl(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=by(this),this.clipLine=gy(this)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:l,y:c,rotate:u,text:h,title:f,fontSize:d}=r,{rotate:m}=this,[p,_]=so(this,i);return Qe("svg:g",a).call(vn,this,i,a).call(py,this,h,i).call(Ot,this,{x:l&&o,y:c&&s}).call(v=>v.selectAll().data(t).enter().append("text").call(Mn,this).call(kS,this,h,f).attr("transform",jf`translate(${l?g=>l[g]:p},${c?g=>c[g]:_})${u?g=>` rotate(${u[g]})`:m?` rotate(${m})`:""}`).call(Ee,"font-size",d&&(g=>d[g])).call(Vn,this,r)).node()}}function my(e){return e==null?null:nn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function kS(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:s,clipLine:l}=t;e.each(function(c){const u=s(wi(n[c])??"").map(l),h=u.length,f=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let m=0;m<h;++m){if(++d,!u[m])continue;const p=this.ownerDocument.createElementNS(si.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(f+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=u[m],this.appendChild(p),d=0}}else f&&this.setAttribute("y",`${f*a}em`),this.textContent=u[0];if(o&&!r&&u[0]!==n[c]){const d=this.ownerDocument.createElementNS(si.svg,"title");d.textContent=n[c],this.appendChild(d)}})}function $r(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=eo(t,n)),new Yf(e,{...r,x:t,y:n})}function IS(e,{x:t=nt,...n}={}){return new Yf(e,NS({...n,x:t}))}function DS(e,{y:t=nt,...n}={}){return new Yf(e,PS({...n,y:t}))}function py(e,t,n){Ee(e,"text-anchor",t.textAnchor),Ee(e,"font-family",t.fontFamily),Ee(e,"font-size",t.fontSize),Ee(e,"font-style",t.fontStyle),Ee(e,"font-variant",t.fontVariant===void 0?RS(n):t.fontVariant),Ee(e,"font-weight",t.fontWeight)}function RS(e){return e&&(ox(e)||Rt(e))?"tabular-nums":void 0}const LS=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function BS(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),LS.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function OS(e,t,n){const r=[];let i,a=0;for(const[o,s,l]of FS(e)){if(i===void 0&&(i=o),a>i&&n(e,i,s)>t&&(r.push(e.slice(i,a)+(e[a-1]===dy?"-":"")),i=o),l){r.push(e.slice(i,s)),i=void 0;continue}a=s}return r}function*FS(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case dy:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const fm={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Wf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ci(e,i))r+=fm[e[i]]??(_y(e,i)?120:fm.e);return r}function Xf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ci(e,i))r+=_y(e,i)?126:63;return r}function by({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?Xf:Wf,i=t*100;return a=>OS(a,i,r)}function gy({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?Xf:Wf,i=t*100;switch(n){case"clip-start":return a=>dm(a,i,r,"");case"clip-end":return a=>hm(a,i,r,"");case"ellipsis-start":return a=>dm(a,i,r,Qr);case"ellipsis-middle":return a=>GS(a,i,r,Qr);case"ellipsis-end":return a=>hm(a,i,r,Qr)}}const Qr="…";function vi(e,t,n,r){const i=[];let a=0;for(let o=0,s=0,l=e.length;o<l;o=s){s=Ci(e,o);const c=n(e,o,s);if(a+c>t){for(a+=r;a>t&&o>0;)s=o,o=i.pop(),a-=n(e,o,s);return[o,t-a]}a+=c,i.push(o)}return[-1,0]}function hm(e,t,n,r){e=e.trim();const i=n(r),[a]=vi(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function GS(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,s]=vi(e,t/2,n,a),[l]=vi(e,i-t/2-s+a,n,-a);return l<0?r:e.slice(0,o).trimEnd()+r+e.slice(Ci(e,l)).trimStart()}function dm(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=vi(e,i-t+a,n,-a);return o<0?r:r+e.slice(Ci(e,o)).trimStart()}const Au=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,mm=new RegExp("\\p{Extended_Pictographic}","uy");function Ci(e,t){return t+=US(e,t)?2:1,HS(e,t)&&(t=Au.lastIndex),qS(e,t)?Ci(e,t+1):t}function yy(e,t){return e.charCodeAt(t)<128}function US(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function qS(e,t){return e.charCodeAt(t)===8205}function HS(e,t){return yy(e,t)?!1:(Au.lastIndex=t,Au.test(e))}function _y(e,t){return yy(e,t)?!1:(mm.lastIndex=t,mm.test(e))}const zS={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},wy=3.5,VS=wy*5,vy={draw(e,t,n){const r=t*n/VS;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},jS={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},YS=new Map([["arrow",vy],["spike",jS]]);function WS(e){return e&&typeof e.draw=="function"}function XS(e){if(WS(e))return e;const t=YS.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class My extends Et{constructor(t,n={}){const{x:r,y:i,r:a=wy,length:o,rotate:s,shape:l=vy,anchor:c="middle",frameAnchor:u}=n,[h,f]=ft(o,12),[d,m]=ft(s,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,zS),this.r=+a,this.length=f,this.rotate=m,this.shape=XS(l),this.anchor=nn(c,"anchor",["start","middle","end"]),this.frameAnchor=yl(u)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:l,y:c,length:u,rotate:h}=r,{length:f,rotate:d,anchor:m,shape:p,r:_}=this,[v,g]=so(this,i);return Qe("svg:g",a).call(vn,this,i,a).call(Ot,this,{x:l&&o,y:c&&s}).call(E=>E.selectAll().data(t).enter().append("path").call(Mn,this).attr("transform",jf`translate(${l?w=>l[w]:v},${c?w=>c[w]:g})${h?w=>` rotate(${h[w]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${f})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${f/2})`}`).attr("d",u?w=>{const M=Kn();return p.draw(M,u[w],_),M}:(()=>{const w=Kn();return p.draw(w,f,_),w})()).call(Vn,this,r)).node()}}function KS(e,t={}){const{x:n=nt,...r}=t;return new My(e,{...r,x:n})}function ZS(e,t={}){const{y:n=nt,...r}=t;return new My(e,{...r,y:n})}function cr(e,t){return arguments.length<2&&!Br(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Pl({anchor:e}={},t){return e===void 0?t[0]:nn(e,"anchor",t)}function xy(e){return Pl(e,["left","right"])}function Ey(e){return Pl(e,["right","left"])}function Sy(e){return Pl(e,["bottom","top"])}function Ay(e){return Pl(e,["top","bottom"])}function Py(){const[e,t]=cr(...arguments);return Cy("y",xy(t),e,t)}function JS(){const[e,t]=cr(...arguments);return Cy("fy",Ey(t),e,t)}function Ny(){const[e,t]=cr(...arguments);return Ty("x",Sy(t),e,t)}function QS(){const[e,t]=cr(...arguments);return Ty("fx",Ay(t),e,t)}function Cy(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:_,x:v,margin:g,marginTop:E=g===void 0?20:g,marginRight:w=g===void 0?t==="right"?40:0:g,marginBottom:M=g===void 0?20:g,marginLeft:x=g===void 0?t==="left"?40:0:g,label:y,labelAnchor:S,labelArrow:A,labelOffset:$,...C}){return m=Ie(m),p=Ie(p),_=Ie(_),S!==void 0&&(S=nn(S,"labelAnchor",["center","top","bottom"])),A=Oy(A),Z2(m&&!dt(a)?eA(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:m,tickPadding:p,tickRotate:_,x:v,...C}):null,dt(l)?null:nA(e,t,n,{fill:l,fillOpacity:c,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:u,tickSize:m,tickPadding:p,tickRotate:_,x:v,marginTop:E,marginRight:w,marginBottom:M,marginLeft:x,...C}),!dt(l)&&y!==null?$r([],Dy({fill:l,fillOpacity:c,...C},function(B,O,G,T,k){const L=T[e],{marginTop:q,marginRight:z,marginBottom:H,marginLeft:J}=e==="y"&&k.inset||k,Z=S??(L.bandwidth?"center":"top"),F=$??(t==="right"?z:J)-3;return Z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=Z,this.frameAnchor=`${Z}-${t}`,this.rotate=0),this.dy=Z==="top"?3-q:Z==="bottom"?H-3:0,this.dx=t==="right"?F:-F,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[By(e,L,{anchor:t,label:y,labelAnchor:Z,labelArrow:A})]}}}})):null)}function Ty(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:l=r,fillOpacity:c=i,textAnchor:u,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:_,y:v,margin:g,marginTop:E=g===void 0?t==="top"?30:0:g,marginRight:w=g===void 0?20:g,marginBottom:M=g===void 0?t==="bottom"?30:0:g,marginLeft:x=g===void 0?20:g,label:y,labelAnchor:S,labelArrow:A,labelOffset:$,...C}){return m=Ie(m),p=Ie(p),_=Ie(_),S!==void 0&&(S=nn(S,"labelAnchor",["center","left","right"])),A=Oy(A),Z2(m&&!dt(a)?tA(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:m,tickPadding:p,tickRotate:_,y:v,...C}):null,dt(l)?null:rA(e,t,n,{fill:l,fillOpacity:c,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:u,tickSize:m,tickPadding:p,tickRotate:_,y:v,marginTop:E,marginRight:w,marginBottom:M,marginLeft:x,...C}),!dt(l)&&y!==null?$r([],Dy({fill:l,fillOpacity:c,...C},function(B,O,G,T,k){const L=T[e],{marginTop:q,marginRight:z,marginBottom:H,marginLeft:J}=e==="x"&&k.inset||k,Z=S??(L.bandwidth?"center":"right"),F=$??(t==="top"?q:H)-3;return Z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${Z}`,this.textAnchor=Z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-F:F,this.dx=Z==="right"?z-3:Z==="left"?3-J:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[By(e,L,{anchor:t,label:y,labelAnchor:Z,labelArrow:A})]}}}})):null)}function eA(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:s=t,tickSize:l,inset:c=0,insetLeft:u=c,insetRight:h=c,dx:f=0,y:d=e==="y"?void 0:null,...m}){return Ti(ZS,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:s,y:d,...m,dx:t==="left"?+f-mt+ +u:+f+mt-h,anchor:"start",length:l,shape:t==="left"?fA:hA})}function tA(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:s=t,tickSize:l,inset:c=0,insetTop:u=c,insetBottom:h=c,dy:f=0,x:d=e==="x"?void 0:null,...m}){return Ti(KS,e,n,{ariaLabel:`${e}-axis tick`,ariaHidden:!0},{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:s,x:d,...m,dy:t==="bottom"?+f-mt-h:+f+mt+ +u,anchor:"start",length:l,shape:t==="bottom"?cA:uA})}function nA(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*ny):0),text:l,textAnchor:c=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:u=o>60?"top":o<-60?"bottom":"middle",fontVariant:h,inset:f=0,insetLeft:d=f,insetRight:m=f,dx:p=0,y:_=e==="y"?void 0:null,...v}){return Ti(DS,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:l,textAnchor:c,lineAnchor:u,fontVariant:h,rotate:o,y:_,...v,dx:t==="left"?+p-a-s+ +d:+p+ +a+ +s-m},function(g,E,w,M,x){h===void 0&&(this.fontVariant=Ly(g)),l===void 0&&(x.text=Ry(g,E,w,M,t))})}function rA(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*ny):0),text:l,textAnchor:c=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:h,inset:f=0,insetTop:d=f,insetBottom:m=f,dy:p=0,x:_=e==="x"?void 0:null,...v}){return Ti(IS,e,n,{ariaLabel:`${e}-axis tick label`},{facetAnchor:r,frameAnchor:i,text:l===void 0?null:l,textAnchor:c,lineAnchor:u,fontVariant:h,rotate:o,x:_,...v,dy:t==="bottom"?+p+ +a+ +s-m:+p-a-s+ +d},function(g,E,w,M,x){h===void 0&&(this.fontVariant=Ly(g)),l===void 0&&(x.text=Ry(g,E,w,M,t))})}function iA(){const[e,t]=cr(...arguments);return $y("y",xy(t),e,t)}function aA(){const[e,t]=cr(...arguments);return $y("fy",Ey(t),e,t)}function oA(){const[e,t]=cr(...arguments);return ky("x",Sy(t),e,t)}function sA(){const[e,t]=cr(...arguments);return ky("fx",Ay(t),e,t)}function $y(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...s}){return Ti(Lt,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{y:r,x1:a,x2:o,...Iy(s)})}function ky(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...s}){return Ti(jt,e,n,{ariaLabel:`${e}-grid`,ariaHidden:!0},{x:r,y1:a,y2:o,...Iy(s)})}function Iy({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function Dy({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:l,shapeRendering:c,clip:u=!1},h){return[,e]=Un(e),[,t]=ft(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:l,shapeRendering:c,clip:u,initializer:h}}function Ti(e,t,n,r,i,a){let o;function s(u,h,f,d,m,p){const _=u==null&&(t==="fx"||t==="fy"),{[t]:v}=d;if(!v)throw new Error(`missing scale: ${t}`);const g=v.domain();let{interval:E,ticks:w,tickFormat:M,tickSpacing:x=t==="x"?80:35}=i;if(typeof w=="string"&&Fy(v)&&(E=w,w=void 0),w===void 0&&(w=to(E,v.type)??lA(v,x)),u==null){if(Br(w))u=xt(w);else if(nx(w))u=gc(w,...ht(g));else if(v.interval){let S=v.interval;if(v.ticks){const[A,$]=ht(g),C=($-A)/S[Ja];S=Ld(S,C/w)??S,u=gc(S,A,$)}else{u=g;const A=u.length;S=Ld(S,A/w)??S,S!==v.interval&&(u=gc(S,...ht(u)))}if(S===v.interval){const A=Math.round(u.length/w);A>1&&(u=u.filter(($,C)=>C%A===0))}}else v.ticks?u=v.ticks(w):u=g;if(!v.ticks&&u.length&&u!==g){const S=new qs(g);u=u.filter(A=>S.has(A)),u.length||wr(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[Hn(u)]:o[t]={scale:t,value:nt}}a==null||a.call(this,v,u,w,M,o);const y=Object.fromEntries(Object.entries(o).map(([S,A])=>[S,{...A,value:We(u,A.value)}]));return _&&(h=p.filterFacets(u,y)),{data:u,facets:h,channels:y}}const l=_i(i).initializer,c=e(n,_i({...i,initializer:s},l));return n==null?(o=c.channels,c.channels={}):o={},r!==void 0&&Object.assign(c,r),c.clip===void 0&&(c.clip=!1),c}function lA(e,t){const[n,r]=ht(e.range());return(r-n)/t}function Ry(e,t,n,r,i){return{value:Kf(e,t,n,r,i)}}function Kf(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&Rt(t)?H9(e.type,t,i)??wi:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?wi:typeof r=="string"?(Rt(e.domain())?Xa:Si)(r):Qa(r)}function gc(e,t,n){return e.range(t,e.offset(e.floor(n)))}const cA={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},uA={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},fA={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},hA={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function Ly(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function By(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&Fy(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!a)return r;if(a===!0){const o=BE(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function Oy(e="auto"){return dt(e)?!1:typeof e=="boolean"?e:nn(e,"labelArrow",["auto","up","right","down","left"])}function Fy(e){return Rt(e.domain())}function pm(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function dA(e,{opacity:t,...n}={}){if(!Or(e)&&!K2(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return Gy(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",ft(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function mA(e,{fill:t=(c=>(c=e.hint)==null?void 0:c.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(u=>(u=e.hint)==null?void 0:u.stroke)()!==void 0?e.hint.stroke:dt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...s}={},l){const[h,f]=Un(t),[d,m]=Un(r),p=pm(l,h),_=pm(l,d),v=o*o*Math.PI;return n=ft(n)[1],i=ft(i)[1],a=ft(a)[1],Gy(e,s,(g,E,w,M)=>g.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",M).attr("fill",h==="color"?x=>p.scale(x):f).attr("fill-opacity",n).attr("stroke",d==="color"?x=>_.scale(x):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",x=>{const y=Kn();return e.scale(x).draw(y,v),y}))}function Gy(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=ty(e),swatchSize:o=15,swatchWidth:s=o,swatchHeight:l=o,marginLeft:c=0,className:u,style:h,width:f}=t;const d=Bf(t);u=qf(u),i=Kf(e.scale,e.domain,void 0,i);const m=Qe("div",d).attr("class",`${u}-swatches ${u}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,e,s,l).call(_=>_.append("div").attr("class",`${u}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,e,s,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(_=>_.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",c?`${+c}px`:null).style("width",f===void 0?null:`${+f}px`).style("font-variant",et(a,"normal")).call(Hf,h).node()}const Pu=new Map([["symbol",mA],["color",qy],["opacity",bA]]);function pA(e,t,n={}){return(r,i)=>{if(!Pu.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return Pu.get(r)(e[r],Uy(t,n[r],i),a=>e[a])}}function Uy({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return ux(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function qy(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return dA(e,n);case"ramp":return MS(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function bA({type:e,interpolate:t,...n},{legend:r=!0,color:i=er(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return qy({type:e,...n,interpolate:gA(i)},{legend:r,...a})}function gA(e){const{r:t,g:n,b:r}=er(e)||er(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function yA(e,t,n){const r=[];for(const[i,a]of Pu){const o=n[i];if(o!=null&&o.legend&&i in e){const s=a(e[i],Uy(t,e[i],o),l=>e[l]);s!=null&&r.push(s)}}return r}const _A={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},wA={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class vA extends Et{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:s=r,rx:l,ry:c}=t;super(Uo,void 0,t,n==null?_A:wA),this.anchor=c2(n,"anchor",["top","right","bottom","left"]),this.insetTop=Ie(i),this.insetRight=Ie(a),this.insetBottom=Ie(o),this.insetLeft=Ie(s),this.rx=Ie(l),this.ry=Ie(c)}render(t,n,r,i,a){const{marginTop:o,marginRight:s,marginBottom:l,marginLeft:c,width:u,height:h}=i,{anchor:f,insetTop:d,insetRight:m,insetBottom:p,insetLeft:_,rx:v,ry:g}=this,E=c+_,w=u-s-m,M=o+d,x=h-l-p;return Qe(f?"svg:line":"svg:rect",a).datum(0).call(vn,this,i,a).call(Mn,this).call(Vn,this,r).call(Ot,this,{}).call(f==="left"?y=>y.attr("x1",E).attr("x2",E).attr("y1",M).attr("y2",x):f==="right"?y=>y.attr("x1",w).attr("x2",w).attr("y1",M).attr("y2",x):f==="top"?y=>y.attr("x1",E).attr("x2",w).attr("y1",M).attr("y2",M):f==="bottom"?y=>y.attr("x1",E).attr("x2",w).attr("y1",x).attr("y2",x):y=>y.attr("x",E).attr("y",M).attr("width",w-E).attr("height",x-M).attr("rx",v).attr("ry",g)).node()}}function MA(e){return new vA(e)}const yc={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},xA=new Set(["geometry","href","src","ariaLabel","scales"]);class EA extends Et{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Br(t)&&b2(t)&&(n={...n,title:nt});const{x:r,y:i,x1:a,x2:o,y1:s,y2:l,anchor:c,preferredAnchor:u="bottom",monospace:h,fontFamily:f=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:_,lineHeight:v=1,lineWidth:g=20,frameAnchor:E,format:w,textAnchor:M="start",textOverflow:x,textPadding:y=8,title:S,pointerSize:A=12,pathFilter:$="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:s!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:s,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:l,scale:"y",optional:s==null},title:{value:S,optional:!0}},n,yc),this.anchor=_u(c,"anchor"),this.preferredAnchor=_u(u,"preferredAnchor"),this.frameAnchor=yl(E),this.textAnchor=et(M,"middle"),this.textPadding=+y,this.pointerSize=+A,this.pathFilter=ut($),this.lineHeight=+v,this.lineWidth=+g,this.textOverflow=my(x),this.monospace=!!h,this.fontFamily=ut(f),this.fontSize=Ie(d),this.fontStyle=ut(m),this.fontVariant=ut(p),this.fontWeight=ut(_);for(const C in yc)C in this.channels&&(this[C]=yc[C]);this.splitLines=by(this),this.clipLine=gy(this),this.format={...w}}render(t,n,r,i,a){const o=this,{x:s,y:l,fx:c,fy:u}=n,{ownerSVGElement:h,document:f}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:_}=this,{textPadding:v,pointerSize:g,pathFilter:E}=this,{marginTop:w,marginLeft:M}=i,{x1:x,y1:y,x2:S,y2:A,x:$=x??S,y:C=y??A}=r,B=c?c(t.fx)-M:0,O=u?u(t.fy)-w:0,[G,T]=so(this,i),k=Q2(r,G),L=ey(r,T),q=m?Xf:Wf,z=q(Qr);let H,J;"title"in r?(H=r.channels,J=TA):(H=CA.call(this,r,n),J=$A);const Z=Qe("svg:g",a).call(vn,this,i,a).call(py,this).call(Ot,this,{x:$&&s,y:C&&l}).call(ne=>ne.selectAll().data(t).enter().append("g").attr("transform",re=>`translate(${Math.round(k(re))},${Math.round(L(re))})`).call(Mn,this).call(re=>re.append("path").attr("filter",E)).call(re=>re.append("text").each(function(Q){const Y=ea(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const D=J.call(o,Q,t,H,n,r);if(typeof D=="string")for(const V of o.splitLines(D))F(Y,{value:o.clipLine(V)});else{const V=new Set;for(const W of D){const{label:U=""}=W;U&&V.has(U)||(V.add(U),F(Y,W))}}})));function F(ne,{label:re,value:Q,color:Y,opacity:D}){re??(re=""),Q??(Q="");const V=Y!=null||D!=null;let W,U=_*100;const[fe]=vi(re,U,q,z);if(fe>=0)re=re.slice(0,fe).trimEnd()+Qr,W=Q.trim(),Q="";else{(re||!Q&&!V)&&(Q=" "+Q);const[ie]=vi(Q,U-q(re),q,z);ie>=0&&(W=Q.trim(),Q=Q.slice(0,ie).trimEnd()+Qr)}const ue=ne.append("tspan").attr("x",0).attr("dy",`${p}em`).text("​");re&&ue.append("tspan").attr("font-weight","bold").text(re),Q&&ue.append(()=>f.createTextNode(Q)),V&&ue.append("tspan").text(" ■").attr("fill",Y).attr("fill-opacity",D).style("user-select","none"),W&&ue.append("title").text(W)}function te(){const{width:ne,height:re}=i.facet??i;Z.selectChildren().each(function(Q){let{x:Y,width:D,height:V}=this.getBBox();D=Math.round(D),V=Math.round(V);let W=d;if(W===void 0){const ue=k(Q)+B,ie=L(Q)+O,he=ue+D+g+v*2<ne,se=ue-D-g-v*2>0,je=ie+V+g+v*2<re,Ae=ie-V-g-v*2>0;W=he&&se?je&&Ae?o.preferredAnchor:Ae?"bottom":"top":je&&Ae?he?"left":"right":(he||se)&&(je||Ae)?`${Ae?"bottom":"top"}-${he?"left":"right"}`:o.preferredAnchor}const U=this.firstChild,fe=this.lastChild;if(U.setAttribute("d",NA(W,g,v,D,V)),Y)for(const ue of fe.childNodes)ue.setAttribute("x",-Y);fe.setAttribute("y",`${+AA(W,fe.childNodes.length,p).toFixed(6)}em`),fe.setAttribute("transform",`translate(${PA(W,g,v,D,V)})`)}),Z.attr("visibility",null)}return t.length&&(Z.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(te):typeof requestAnimationFrame<"u"&&requestAnimationFrame(te)),Z.node()}}function SA(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=eo(t,n)),new EA(e,{...r,x:t,y:n})}function AA(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function PA(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function NA(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function CA({channels:e},t){var i,a;const n={};let r=this.format;r=bm(r,e,"x"),r=bm(r,e,"y"),this.format=r;for(const o in r){const s=r[o];if(!(s===null||s===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const l=Vd(e,o);l&&(n[o]=l)}}for(const o in e){if(o in n||o in r||xA.has(o))continue;const s=Vd(e,o);s&&(n[o]=s)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const s=this.format[o];if(typeof s=="string"){const l=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(Rt(l)?Xa:Si)(s)}else if(s===void 0||s===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?Kf(l,l.domain()):wi}}return n}function bm(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([s])=>s===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function TA(e,t,{title:n}){return wi(n.value[e],e)}function*$A(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:Cs(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:ym(r,n,"x"),value:gm(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:ym(r,n,"y"),value:gm(this.format.y2,n.y1,o,e)};else{const s=o.value[e],l=o.scale;if(!Tr(s)&&l==null)continue;yield{label:Cs(r,n,a),value:this.format[a](s,e),color:l==="color"?i[a][e]:null,opacity:l==="opacity"?i[a][e]:null}}}}function gm(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(n.value[r],r)}`}function ym(e,t,n){const r=Cs(e,t,`${n}1`,n),i=Cs(e,t,`${n}2`,n);return r===i?r:`${r}–${i}`}function Cs(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function Ke(e={}){var z;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:s}=e,l=qf(e.className),c=e.marks===void 0?[]:wm(e.marks);c.push(...FA(c));const u=BA(t,e),h=new Map;for(const H of c){const J=vm(H,u,e);J&&h.set(H,J)}const f=new Map;u&&Bi(f,[u],e),Bi(f,h,e);const d=wm(GA(c,f,e));for(const H of d){const J=vm(H,u,e);J&&h.set(H,J)}c.unshift(...d);let m=oS(f,e);if(m!==void 0){const H=u?mc(m,u):void 0;for(const Z of c){if(Z.facet===null||Z.facet==="super")continue;const F=h.get(Z);F!==void 0&&(F.facetsIndex=Z.fx!=null||Z.fy!=null?mc(m,F):H)}const J=new Set;for(const{facetsIndex:Z}of h.values())Z==null||Z.forEach((F,te)=>{(F==null?void 0:F.length)>0&&J.add(te)});m.forEach(0<J.size&&J.size<m.length?(Z,F)=>Z.empty=!J.has(F):Z=>Z.empty=!1);for(const Z of c)if(Z.facet==="exclude"){const F=h.get(Z);F!==void 0&&(F.facetsIndex=cS(F.facetsIndex))}}for(const H of Be.keys())gu(e[H])&&H!=="fx"&&H!=="fy"&&f.set(H,[]);const p=new Map;for(const H of c){if(p.has(H))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:J,channels:Z}=h.get(H)??{},{data:F,facets:te,channels:ne}=H.initialize(J,Z,e);Zf(ne,e),p.set(H,{data:F,facets:te,channels:ne})}const _=Eu(Bi(f,p,e),e),v=iS(_,c,e);RE(_,v);const g=Qd(_),{fx:E,fy:w}=g,M=E||w?Y2(_,v):v,x=E||w?YA(g,v):v,y=Bf(e),S=y.document,A=Vs("svg").call(S.documentElement);let $=A;y.ownerSVGElement=A,y.className=l,y.projection=Wx(e,M),y.filterFacets=(H,J)=>mc(m,{channels:J,groups:zf(H,J)}),y.getMarkState=H=>{const J=p.get(H),Z=h.get(H);return{...J,channels:{...J.channels,...Z==null?void 0:Z.channels}}},y.dispatchValue=H=>{$.value!==H&&($.value=H,$.dispatchEvent(new Event("input",{bubbles:!0})))};const C=new Set;for(const[H,J]of p)if(H.initializer!=null){const Z=H.facet==="super"?x:M,F=H.initializer(J.data,J.facets,J.channels,g,Z,y);if(F.data!==void 0&&(J.data=F.data),F.facets!==void 0&&(J.facets=F.facets),F.channels!==void 0){const{fx:te,fy:ne,...re}=F.channels;LA(re),Object.assign(J.channels,re);for(const Q of Object.values(re)){const{scale:Y}=Q;Y!=null&&!hx(Be.get(Y))&&(Hy(Q,e),C.add(Y))}(te!=null||ne!=null)&&h.set(H,!0)}}if(C.size){const H=new Map;Bi(H,p,e,te=>C.has(te)),Bi(f,p,e,te=>C.has(te));const J=jA(Eu(H,e),_),{scales:Z,...F}=Qd(J);Object.assign(_,J),Object.assign(g,F),Object.assign(g.scales,Z)}let B,O;m!==void 0&&(B={x:E==null?void 0:E.domain(),y:w==null?void 0:w.domain()},m=sS(m,B),O=lS(E,w,v));for(const[H,J]of p)J.values=H.scale(J.channels,g,y);const{width:G,height:T}=v;ea(A).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",G).attr("height",T).attr("viewBox",`0 0 ${G} ${T}`).attr("aria-label",o).attr("aria-description",s).call(H=>H.append("style").text(`:where(.${l}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${l} text),
:where(.${l} tspan) {
  white-space: pre;
}`)).call(Hf,n);for(const H of c){const{channels:J,values:Z,facets:F}=p.get(H);if(m===void 0||H.facet==="super"){let te=null;if(F&&(te=F[0],te=H.filter(te,J,Z),te.length===0))continue;const ne=H.render(te,g,Z,x,y);if(ne==null)continue;A.appendChild(ne)}else{let te;for(const ne of m){if(!(((z=H.facetAnchor)==null?void 0:z.call(H,m,B,ne))??!ne.empty))continue;let re=null;if(F){const Y=h.has(H);if(re=F[Y?ne.i:0],re=H.filter(re,J,Z),re.length===0)continue;!Y&&re===F[0]&&(re=Q9(re)),re.fx=ne.x,re.fy=ne.y,re.fi=ne.i}const Q=H.render(re,g,Z,M,y);if(Q!=null){(te??(te=ea(A).append("g"))).append(()=>Q).datum(ne);for(const Y of["aria-label","aria-description","aria-hidden","transform"])Q.hasAttribute(Y)&&(te.attr(Y,Q.getAttribute(Y)),Q.removeAttribute(Y))}}te==null||te.selectChildren().attr("transform",O)}}const k=yA(_,y,e),{figure:L=r!=null||i!=null||a!=null||k.length>0}=e;L&&($=S.createElement("figure"),$.className=`${l}-figure`,$.style.maxWidth="initial",r!=null&&$.append(_m(S,r,"h2")),i!=null&&$.append(_m(S,i,"h3")),$.append(...k,A),a!=null&&$.append(kA(S,a))),$.scale=HE(g.scales),$.legend=pA(_,y,e);const q=Yx();return q>0&&ea(A).append("text").attr("x",G).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${q.toLocaleString("en-US")} warning${q===1?"":"s"}. Please check the console.`),$}function _m(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function kA(e,t){const n=e.createElement("figcaption");return n.append(t),n}function IA({marks:e=[],...t}={}){return Ke({...t,marks:[...e,this]})}Et.prototype.plot=IA;function wm(e){return e.flat(1/0).filter(t=>t!=null).map(DA)}function DA(e){return typeof e.render=="function"?e:new RA(e)}class RA extends Et{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Zf(e,t){for(const n in e)Hy(e[n],t);return e}function Hy(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:s=a?l=>l*100:p2(o,i)}=t[n]??{};s!=null&&(e.value=Ze(e.value,s),e.transform=!1)}function LA(e){for(const t in e)T2(t,e[t])}function Bi(e,t,n,r=W9){var i,a;for(const{channels:o}of t.values())for(const s in o){const l=o[s],{scale:c}=l;if(c!=null&&r(c))if(c==="projection"){if(!Jx(n)){const u=((i=n.x)==null?void 0:i.domain)===void 0,h=((a=n.y)==null?void 0:a.domain)===void 0;if(u||h){const[f,d]=eE(l);u&&_c(e,"x",f),h&&_c(e,"y",d)}}}else _c(e,c,l)}return e}function _c(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function BA(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=xt(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=Ea(i,{value:n,scale:"fx"})),r!=null&&(a.fy=Ea(i,{value:r,scale:"fy"})),Zf(a,t);const o=zf(i,a);return{channels:a,groups:o,data:e.data}}function vm(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const c=xt(e.data??r??i);if(c===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(c===null)return;const u={};return r!=null&&(u.fx=Ea(c,{value:r,scale:"fx"})),i!=null&&(u.fy=Ea(c,{value:i,scale:"fy"})),Zf(u,n),{channels:u,groups:zf(c,u)}}if(t===void 0)return;const{channels:a,groups:o,data:s}=t;if(e.facet!=="auto"||e.data===s)return{channels:a,groups:o};s.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((l=xt(e.data))==null?void 0:l.length)===s.length&&wr(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function OA(e,t={}){return _i({...t,x:null,y:null},(n,r,i,a,o,s)=>s.getMarkState(e))}function FA(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?vS:/^y$/i.test(i)?lm:wS,r=i(OA(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===lm?"left":"bottom");const o=SA(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function GA(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:s={},axis:l,grid:c,facet:u={},facet:{axis:h=l,grid:f}=u,x:{axis:d=l,grid:m=d===null?null:c}=i,y:{axis:p=l,grid:_=p===null?null:c}=a,fx:{axis:v=h,grid:g=v===null?null:f}=o,fy:{axis:E=h,grid:w=E===null?null:f}=s}=n;(r||!gu(i)&&!Mm("x",e))&&(d=m=null),(r||!gu(a)&&!Mm("y",e))&&(p=_=null),t.has("fx")||(v=g=null),t.has("fy")||(E=w=null),d===void 0&&(d=!To(e,"x")),p===void 0&&(p=!To(e,"y")),v===void 0&&(v=!To(e,"fx")),E===void 0&&(E=!To(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),v===!0&&(v=d==="top"||d===null?"bottom":"top"),E===!0&&(E=p==="right"||p===null?"left":"right");const M=[];return Co(M,w,aA,s),No(M,E,JS,"right","left",u,s),Co(M,g,sA,o),No(M,v,QS,"top","bottom",u,o),Co(M,_,iA,a),No(M,p,Py,"left","right",n,a),Co(M,m,oA,i),No(M,d,Ny,"bottom","top",n,i),M}function No(e,t,n,r,i,a,o){if(!t)return;const s=UA(t);o=qA(s?r:t,a,o);const{line:l}=o;(n===Py||n===Ny)&&l&&!xa(l)&&e.push(MA(HA(o))),e.push(n(o)),s&&e.push(n({...o,anchor:i,label:null}))}function Co(e,t,n,r){!t||xa(t)||e.push(n(zA(t,r)))}function UA(e){return/^\s*both\s*$/i.test(e)}function qA(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:h,label:f=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:l,fontVariant:c,ariaLabel:u,ariaDescription:h,label:f,labelAnchor:d,labelArrow:m,labelOffset:p}}function HA(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function zA(e,{stroke:t=gl(e)?e:void 0,ticks:n=VA(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function VA(e){switch(typeof e){case"number":return!0;case"string":return!gl(e)}return Br(e)||typeof(e==null?void 0:e.range)=="function"}function To(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function Mm(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function jA(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function YA({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:l}=Uf(n),c=e&&xm(e),u=t&&xm(t);return{marginTop:t?u[0]:r,marginRight:e?s-c[1]:i,marginBottom:t?l-u[1]:a,marginLeft:e?c[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:s,height:l}}function xm(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const WA=new Map([["basis",eM],["basis-closed",tM],["basis-open",nM],["bundle",rM],["bump-x",H4],["bump-y",z4],["cardinal",iM],["cardinal-closed",aM],["cardinal-open",oM],["catmull-rom",sM],["catmull-rom-closed",lM],["catmull-rom-open",cM],["linear",ff],["linear-closed",uM],["monotone-x",fM],["monotone-y",hM],["natural",dM],["step",mM],["step-after",bM],["step-before",pM]]);function XA(e=ff,t){if(typeof e=="function")return e;const n=WA.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function KA(e=Ts,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Ts:XA(e,t)}function Ts(e){return ff(e)}function ZA(e={}){return u2(e)?e:{...e,x:nt}}function JA(e={}){return f2(e)?e:{...e,y:nt}}function QA(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const s of t)for(const l of s)r[l]&&++i,r[l]=1;if(i===0)return{data:e,facets:t};e=Ma(e);const a=e[o2]=new Uint32Array(n+i);t=t.map(s=>Ma(s,Uint32Array));let o=n;r.fill(0);for(const s of t)for(let l=0,c=s.length;l<c;++l){const u=s[l];r[u]?(s[l]=o,e[o]=e[u],a[o]=u,++o):a[u]=u,r[u]=1}return{data:e,facets:t}}function eP(e={},t={}){arguments.length===1&&([e,t]=zy(e));const{y1:n,y:r=n,x:i,...a}=t,[o,s,l,c]=Vy(r,i,"y","x",e,a);return{...o,y1:n,y:s,x1:l,x2:c,x:m2(l,c)}}function tP(e={},t={}){arguments.length===1&&([e,t]=zy(e));const{x1:n,x:r=n,y:i,...a}=t,[o,s,l,c]=Vy(r,i,"x","y",e,a);return{...o,x1:n,x:s,y1:l,y2:c,y:m2(l,c)}}function nP({x:e,x1:t,x2:n,...r}={}){return r=El(r,"y"),t===void 0&&n===void 0?eP({x:e,...r}):([t,n]=d2(e,t,n),{...r,x1:t,x2:n})}function rP({y:e,y1:t,y2:n,...r}={}){return r=El(r,"x"),t===void 0&&n===void 0?tP({y:e,...r}):([t,n]=d2(e,t,n),{...r,y1:t,y2:n})}function zy(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const iP={length:!0};function Vy(e,t=Y9,n,r,{offset:i,order:a,reverse:o},s){if(t===null)throw new Error(`stack requires ${r}`);const l=J9(s),[c,u]=zr(e),[h,f]=Ns(t),[d,m]=Ns(t);return h.hint=d.hint=iP,i=aP(i),a=lP(a,i,r),[wl(s,(p,_,v)=>{({data:p,facets:_}=QA(p,_));const g=e==null?void 0:u(yu(We(p,e),v==null?void 0:v[n])),E=We(p,t,Float64Array),w=We(p,l),M=a&&a(p,g,E,w),x=p.length,y=f(new Float64Array(x)),S=m(new Float64Array(x)),A=[];for(const $ of _){const C=g?Array.from(Fu($,B=>g[B]).values()):[$];if(M)for(const B of C)B.sort(M);for(const B of C){let O=0,G=0;o&&B.reverse();for(const T of B){const k=E[T];k<0?O=S[T]=(y[T]=O)+k:k>0?G=S[T]=(y[T]=G)+k:S[T]=y[T]=G}}A.push(C)}return i&&i(A,y,S,w),{data:p,facets:_}}),c,h,d]}function aP(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return oP;case"center":case"silhouette":return sP;case"wiggle":return Yy}throw new Error(`unknown offset: ${e}`)}}function jy(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function oP(e,t,n){for(const r of e)for(const i of r){const[a,o]=jy(i,n);for(const s of i){const l=1/(o-a||1);t[s]=l*(t[s]-a),n[s]=l*(n[s]-a)}}}function sP(e,t,n){for(const r of e){for(const i of r){const[a,o]=jy(i,n);for(const s of i){const l=(o+a)/2;t[s]-=l,n[s]-=l}}Wy(r,t,n)}Xy(e,t,n)}function Yy(e,t,n,r){for(const i of e){const a=new Mr;let o=0;for(const s of i){let l=-1;const c=s.map(d=>Math.abs(n[d]-t[d])),u=s.map(d=>{l=r?r[d]:++l;const m=n[d]-t[d],p=a.has(l)?m-a.get(l):0;return a.set(l,m),p}),h=[0,...tw(u)];for(const d of s)t[d]+=o,n[d]+=o;const f=Qn(c);f&&(o-=Qn(c,(d,m)=>(u[m]/2+h[m])*d)/f)}Wy(i,t,n)}Xy(e,t,n)}function Wy(e,t,n){const r=Xt(e,i=>Xt(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function Xy(e,t,n){const r=e.length;if(r===1)return;const i=e.map(s=>s.flat()),a=i.map(s=>(Xt(s,l=>t[l])+Ge(s,l=>n[l]))/2),o=Xt(a);for(let s=0;s<r;s++){const l=o-a[s];for(const c of i[s])t[c]+=l,n[c]+=l}}function lP(e,t,n){if(e===void 0&&t===Yy)return Em(en);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?Ps:en;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return cP(i);case"z":return uP(i);case"sum":return fP(i);case"appearance":return hP(i);case"inside-out":return Em(i)}return Sm(s2(e))}if(typeof e=="function")return(e.length===1?Sm:dP)(e);if(Array.isArray(e))return mP(e);throw new Error(`invalid order: ${e}`)}}function cP(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function uP(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function fP(e){return Nl(e,(t,n,r,i)=>Gu(Hn(t),a=>Qn(a,o=>r[o]),a=>i[a]))}function hP(e){return Nl(e,(t,n,r,i)=>Gu(Hn(t),a=>n[O1(a,o=>r[o])],a=>i[a]))}function Em(e){return Nl(e,(t,n,r,i)=>{const a=Hn(t),o=Gu(a,h=>n[O1(h,f=>r[f])],h=>i[h]),s=Kr(a,h=>Qn(h,f=>r[f]),h=>i[h]),l=[],c=[];let u=0;for(const h of o)u<0?(u+=s.get(h),l.push(h)):(u-=s.get(h),c.push(h));return c.reverse().concat(l)})}function Sm(e){return t=>{const n=We(t,e);return(r,i)=>en(n[r],n[i])}}function dP(e){return t=>(n,r)=>e(t[n],t[r])}function mP(e){return Nl(en,()=>e)}function Nl(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new Mr(t(n,r,i,a).map((s,l)=>[s,l]));return(s,l)=>e(o.get(a[s]),o.get(a[l]))}}const pP={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class bP extends Et{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:s,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,pP),this.curve=KA(s,l),Sl(this,n)}project(t,n,r){this.curve!==Ts&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:s,x2:l=o,y2:c=s}=r,{curve:u}=this;return Qe("svg:g",a).call(vn,this,i,a).call(Ot,this,n).call(h=>h.selectAll().data(t).enter().append("path").call(Mn,this).attr("d",u===Ts&&a.projection?gP(a.projection,o,s,l,c):f=>{const d=Kn(),m=u(d);return m.lineStart(),m.point(o[f],s[f]),m.point(l[f],c[f]),m.lineEnd(),d}).call(Vn,this,r).call(Al,this,r,a)).node()}}function gP(e,t,n,r,i){const a=ef(e);return t=Wr(t),n=Wr(n),r=Wr(r),i=Wr(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function Am(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...s}={}){return[n,r]=Pm(t,n,r),[a,o]=Pm(i,a,o),new bP(e,{...s,x1:n,x2:r,y1:a,y2:o})}function Pm(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class Jf extends Et{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:s=a,insetBottom:l=a,insetLeft:c=a,rx:u,ry:h}=r;this.insetTop=Ie(o),this.insetRight=Ie(s),this.insetBottom=Ie(l),this.insetLeft=Ie(c),this.rx=et(u,"auto"),this.ry=et(h,"auto")}render(t,n,r,i,a){const{rx:o,ry:s}=this;return Qe("svg:g",a).call(vn,this,i,a).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(Mn,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(Ee,"rx",o).call(Ee,"ry",s).call(Vn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:s}=this,l=n&&t?t.bandwidth():a-r-i;return Math.max(0,l-o-s)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:s}=this,l=n&&t?t.bandwidth():a-r-i;return Math.max(0,l-o-s)}}const Ky={ariaLabel:"bar"};class yP extends Jf{constructor(t,n={}){const{x1:r,x2:i,y:a}=n;super(t,{x1:{value:r,scale:"x"},x2:{value:i,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},n,Ky)}_transform(t,n,{x:r}){t.call(Ot,n,{x:r},0,0)}_x({x:t},{x1:n,x2:r},{marginLeft:i}){const{insetLeft:a}=this;return ir(t)?i+a:o=>Math.min(n[o],r[o])+a}_width({x:t},{x1:n,x2:r},{marginRight:i,marginLeft:a,width:o}){const{insetLeft:s,insetRight:l}=this;return ir(t)?o-i-a-s-l:c=>Math.max(0,Math.abs(r[c]-n[c])-s-l)}}class _P extends Jf{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,Ky)}_transform(t,n,{y:r}){t.call(Ot,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return ir(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:s,insetBottom:l}=this;return ir(t)?o-i-a-s-l:c=>Math.max(0,Math.abs(r[c]-n[c])-s-l)}}function Cl(e,t={}){return h2(t)||(t={...t,y:Nf,x2:nt}),new yP(e,nP(cy(ZA(t))))}function Tl(e,t={}){return h2(t)||(t={...t,x:Nf,y2:nt}),new _P(e,rP(uy(JA(t))))}const wP={ariaLabel:"cell"};class vP extends Jf{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,wP)}_transform(t,n){t.call(Ot,n,{},0,0)}}function Nu(e,{x:t,y:n,...r}={}){return[t,n]=eo(t,n),new vP(e,{...r,x:t,y:n})}const MP={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function xP(e){return e.sort===void 0&&e.reverse===void 0?wx({channel:"-r"},e):e}class EP extends Et{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:s=wa,frameAnchor:l}=n,[c,u]=ft(o,0),[h,f]=yx(s),[d,m]=ft(a,h==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:dl,optional:!0},rotate:{value:c,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},xP(n),MP),this.r=m,this.rotate=u,this.symbol=f,this.frameAnchor=yl(l);const{channels:p}=this,{symbol:_}=p;if(_){const{fill:v,stroke:g}=p;_.hint={fill:v?v.value===_.value?"color":"currentColor":this.fill??"currentColor",stroke:g?g.value===_.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:s}=n,{x:l,y:c,r:u,rotate:h,symbol:f}=r,{r:d,rotate:m,symbol:p}=this,[_,v]=so(this,i),g=p===wa,E=u?void 0:d*d*Math.PI;return Sf(d)&&(t=[]),Qe("svg:g",a).call(vn,this,i,a).call(Ot,this,{x:l&&o,y:c&&s}).call(w=>w.selectAll().data(t).enter().append(g?"circle":"path").call(Mn,this).call(g?M=>{M.attr("cx",l?x=>l[x]:_).attr("cy",c?x=>c[x]:v).attr("r",u?x=>u[x]:d)}:M=>{M.attr("transform",jf`translate(${l?x=>l[x]:_},${c?x=>c[x]:v})${h?x=>` rotate(${h[x]})`:m?` rotate(${m})`:""}`).attr("d",u&&f?x=>{const y=Kn();return f[x].draw(y,u[x]*u[x]*Math.PI),y}:u?x=>{const y=Kn();return p.draw(y,u[x]*u[x]*Math.PI),y}:f?x=>{const y=Kn();return f[x].draw(y,E),y}:(()=>{const x=Kn();return p.draw(x,E),x})())}).call(Vn,this,r)).node()}}function Ln(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=eo(t,n)),new EP(e,{...r,x:t,y:n})}const SP={ariaLabel:"tick",fill:null,stroke:"currentColor"};class AP extends Et{constructor(t,n,r){super(t,n,r,SP),Sl(this,r)}render(t,n,r,i,a){return Qe("svg:g",a).call(vn,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Mn,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Vn,this,r).call(Al,this,r,a)).node()}}class PP extends AP{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:s=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Ie(o),this.insetBottom=Ie(s)}_transform(t,n,{x:r}){t.call(Ot,n,{x:r},mt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function Nm(e,{x:t=nt,...n}={}){return new PP(e,{...n,x:t})}var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function NP(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const Zy=new Map,Jy=new Map,CP=new Map,TP=new Map;function $P(e){return Zy.get(e)}function Qy(e){return Jy.get(e)}function $s(e){const t=e%12;return t===1||t===3||t===6||t===8||t===10}const kP=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],e_=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Aa=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],IP=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],DP=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of Aa)Zy.set(e.pitch,e),Jy.set(e.label,e);for(const e of IP)CP.set(e.number,e);for(const e of DP){const t=`${e.number}-${e.subnumber}`;TP.set(t,e)}var RP={value:()=>{}};function t_(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new qo(n)}function qo(e){this._=e}function LP(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}qo.prototype=t_.prototype={constructor:qo,on:function(e,t){var n=this._,r=LP(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=BP(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Cm(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Cm(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new qo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function BP(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Cm(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=RP,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cu="http://www.w3.org/1999/xhtml";const Tm={svg:"http://www.w3.org/2000/svg",xhtml:Cu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $l(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Tm.hasOwnProperty(t)?{space:Tm[t],local:e}:e}function OP(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cu&&t.documentElement.namespaceURI===Cu?t.createElement(e):t.createElementNS(n,e)}}function FP(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function n_(e){var t=$l(e);return(t.local?FP:OP)(t)}function GP(){}function Qf(e){return e==null?GP:function(){return this.querySelector(e)}}function UP(e){typeof e!="function"&&(e=Qf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),l,c,u=0;u<o;++u)(l=a[u])&&(c=e.call(l,l.__data__,u,a))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new Bt(r,this._parents)}function r_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qP(){return[]}function i_(e){return e==null?qP:function(){return this.querySelectorAll(e)}}function HP(e){return function(){var t=e.apply(this,arguments);return t==null?[]:r_(t)}}function zP(e){typeof e=="function"?e=HP(e):e=i_(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),i.push(l));return new Bt(r,i)}function a_(e){return function(){return this.matches(e)}}function o_(e){return function(t){return t.matches(e)}}var VP=Array.prototype.find;function jP(e){return function(){return VP.call(this.children,e)}}function YP(){return this.firstElementChild}function WP(e){return this.select(e==null?YP:jP(typeof e=="function"?e:o_(e)))}var XP=Array.prototype.filter;function KP(){return this.children}function ZP(e){return function(){return XP.call(this.children,e)}}function JP(e){return this.selectAll(e==null?KP:ZP(typeof e=="function"?e:o_(e)))}function QP(e){typeof e!="function"&&(e=a_(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&e.call(l,l.__data__,c,a)&&s.push(l);return new Bt(r,this._parents)}function s_(e){return new Array(e.length)}function eN(){return new Bt(this._enter||this._groups.map(s_),this._parents)}function ks(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ks.prototype={constructor:ks,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function tN(e){return function(){return e}}function nN(e,t,n,r,i,a){for(var o=0,s,l=t.length,c=a.length;o<c;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new ks(e,a[o]);for(;o<l;++o)(s=t[o])&&(i[o]=s)}function rN(e,t,n,r,i,a,o){var s,l,c=new Map,u=t.length,h=a.length,f=new Array(u),d;for(s=0;s<u;++s)(l=t[s])&&(f[s]=d=o.call(l,l.__data__,s,t)+"",c.has(d)?i[s]=l:c.set(d,l));for(s=0;s<h;++s)d=o.call(e,a[s],s,a)+"",(l=c.get(d))?(r[s]=l,l.__data__=a[s],c.delete(d)):n[s]=new ks(e,a[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(f[s])===l&&(i[s]=l)}function iN(e){return e.__data__}function aN(e,t){if(!arguments.length)return Array.from(this,iN);var n=t?rN:nN,r=this._parents,i=this._groups;typeof e!="function"&&(e=tN(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],h=i[c],f=h.length,d=r_(e.call(u,u&&u.__data__,c,r)),m=d.length,p=s[c]=new Array(m),_=o[c]=new Array(m),v=l[c]=new Array(f);n(u,h,p,_,v,d,t);for(var g=0,E=0,w,M;g<m;++g)if(w=p[g]){for(g>=E&&(E=g+1);!(M=_[E])&&++E<m;);w._next=M||null}}return o=new Bt(o,r),o._enter=s,o._exit=l,o}function oN(){return new Bt(this._exit||this._groups.map(s_),this._parents)}function sN(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function lN(e){if(!(e instanceof Bt))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=t[s],c=n[s],u=l.length,h=o[s]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;s<r;++s)o[s]=t[s];return new Bt(o,this._parents)}function cN(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function uN(e){e||(e=fN);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),c,u=0;u<s;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Bt(i,this._parents).order()}function fN(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hN(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function dN(){return Array.from(this)}function mN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function pN(){let e=0;for(const t of this)++e;return e}function bN(){return!this.node()}function gN(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function yN(e){return function(){this.removeAttribute(e)}}function _N(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wN(e,t){return function(){this.setAttribute(e,t)}}function vN(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function MN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function xN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function EN(e,t){var n=$l(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?_N:yN:typeof t=="function"?n.local?xN:MN:n.local?vN:wN)(n,t))}function l_(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function SN(e){return function(){this.style.removeProperty(e)}}function AN(e,t,n){return function(){this.style.setProperty(e,t,n)}}function PN(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function NN(e,t,n){return arguments.length>1?this.each((t==null?SN:typeof t=="function"?PN:AN)(e,t,n??"")):Mi(this.node(),e)}function Mi(e,t){return e.style.getPropertyValue(t)||l_(e).getComputedStyle(e,null).getPropertyValue(t)}function CN(e){return function(){delete this[e]}}function TN(e,t){return function(){this[e]=t}}function $N(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function kN(e,t){return arguments.length>1?this.each((t==null?CN:typeof t=="function"?$N:TN)(e,t)):this.node()[e]}function c_(e){return e.trim().split(/^|\s+/)}function eh(e){return e.classList||new u_(e)}function u_(e){this._node=e,this._names=c_(e.getAttribute("class")||"")}u_.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function f_(e,t){for(var n=eh(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function h_(e,t){for(var n=eh(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function IN(e){return function(){f_(this,e)}}function DN(e){return function(){h_(this,e)}}function RN(e,t){return function(){(t.apply(this,arguments)?f_:h_)(this,e)}}function LN(e,t){var n=c_(e+"");if(arguments.length<2){for(var r=eh(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?RN:t?IN:DN)(n,t))}function BN(){this.textContent=""}function ON(e){return function(){this.textContent=e}}function FN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function GN(e){return arguments.length?this.each(e==null?BN:(typeof e=="function"?FN:ON)(e)):this.node().textContent}function UN(){this.innerHTML=""}function qN(e){return function(){this.innerHTML=e}}function HN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function zN(e){return arguments.length?this.each(e==null?UN:(typeof e=="function"?HN:qN)(e)):this.node().innerHTML}function VN(){this.nextSibling&&this.parentNode.appendChild(this)}function jN(){return this.each(VN)}function YN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function WN(){return this.each(YN)}function XN(e){var t=typeof e=="function"?e:n_(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function KN(){return null}function ZN(e,t){var n=typeof e=="function"?e:n_(e),r=t==null?KN:typeof t=="function"?t:Qf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function JN(){var e=this.parentNode;e&&e.removeChild(this)}function QN(){return this.each(JN)}function eC(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tC(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nC(e){return this.select(e?tC:eC)}function rC(e){return arguments.length?this.property("__data__",e):this.node().__data__}function iC(e){return function(t){e.call(this,t,this.__data__)}}function aC(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function oC(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function sC(e,t,n){return function(){var r=this.__on,i,a=iC(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function lC(e,t,n){var r=aC(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(i=0,u=s[l];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?sC:oC,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function d_(e,t,n){var r=l_(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function cC(e,t){return function(){return d_(this,e,t)}}function uC(e,t){return function(){return d_(this,e,t.apply(this,arguments))}}function fC(e,t){return this.each((typeof t=="function"?uC:cC)(e,t))}function*hC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var dC=[null];function Bt(e,t){this._groups=e,this._parents=t}function lo(){return new Bt([[document.documentElement]],dC)}function mC(){return this}Bt.prototype=lo.prototype={constructor:Bt,select:UP,selectAll:zP,selectChild:WP,selectChildren:JP,filter:QP,data:aN,enter:eN,exit:oN,join:sN,merge:lN,selection:mC,order:cN,sort:uN,call:hN,nodes:dN,node:mN,size:pN,empty:bN,each:gN,attr:EN,style:NN,property:kN,classed:LN,text:GN,html:zN,raise:jN,lower:WN,append:XN,insert:ZN,remove:QN,clone:nC,datum:rC,on:lC,dispatch:fC,[Symbol.iterator]:hC};function th(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function m_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function co(){}var Pa=.7,Is=1/Pa,ei="\\s*([+-]?\\d+)\\s*",Na="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pC=/^#([0-9a-f]{3,8})$/,bC=new RegExp("^rgb\\("+[ei,ei,ei]+"\\)$"),gC=new RegExp("^rgb\\("+[mn,mn,mn]+"\\)$"),yC=new RegExp("^rgba\\("+[ei,ei,ei,Na]+"\\)$"),_C=new RegExp("^rgba\\("+[mn,mn,mn,Na]+"\\)$"),wC=new RegExp("^hsl\\("+[Na,mn,mn]+"\\)$"),vC=new RegExp("^hsla\\("+[Na,mn,mn,Na]+"\\)$"),$m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};th(co,Ca,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:km,formatHex:km,formatHsl:MC,formatRgb:Im,toString:Im});function km(){return this.rgb().formatHex()}function MC(){return p_(this).formatHsl()}function Im(){return this.rgb().formatRgb()}function Ca(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pC.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Dm(t):n===3?new wt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$o(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$o(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bC.exec(e))?new wt(t[1],t[2],t[3],1):(t=gC.exec(e))?new wt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yC.exec(e))?$o(t[1],t[2],t[3],t[4]):(t=_C.exec(e))?$o(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wC.exec(e))?Bm(t[1],t[2]/100,t[3]/100,1):(t=vC.exec(e))?Bm(t[1],t[2]/100,t[3]/100,t[4]):$m.hasOwnProperty(e)?Dm($m[e]):e==="transparent"?new wt(NaN,NaN,NaN,0):null}function Dm(e){return new wt(e>>16&255,e>>8&255,e&255,1)}function $o(e,t,n,r){return r<=0&&(e=t=n=NaN),new wt(e,t,n,r)}function xC(e){return e instanceof co||(e=Ca(e)),e?(e=e.rgb(),new wt(e.r,e.g,e.b,e.opacity)):new wt}function Tu(e,t,n,r){return arguments.length===1?xC(e):new wt(e,t,n,r??1)}function wt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}th(wt,Tu,m_(co,{brighter:function(e){return e=e==null?Is:Math.pow(Is,e),new wt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Pa:Math.pow(Pa,e),new wt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rm,formatHex:Rm,formatRgb:Lm,toString:Lm}));function Rm(){return"#"+wc(this.r)+wc(this.g)+wc(this.b)}function Lm(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function wc(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Bm(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new un(e,t,n,r)}function p_(e){if(e instanceof un)return new un(e.h,e.s,e.l,e.opacity);if(e instanceof co||(e=Ca(e)),!e)return new un;if(e instanceof un)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new un(o,s,l,e.opacity)}function b_(e,t,n,r){return arguments.length===1?p_(e):new un(e,t,n,r??1)}function un(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}th(un,b_,m_(co,{brighter:function(e){return e=e==null?Is:Math.pow(Is,e),new un(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Pa:Math.pow(Pa,e),new un(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new wt(vc(e>=240?e-240:e+120,i,r),vc(e,i,r),vc(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function vc(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const g_=e=>()=>e;function EC(e,t){return function(n){return e+n*t}}function SC(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function AC(e){return(e=+e)==1?y_:function(t,n){return n-t?SC(t,n,e):g_(isNaN(t)?n:t)}}function y_(e,t){var n=t-e;return n?EC(e,n):g_(isNaN(e)?t:e)}const $u=function e(t){var n=AC(t);function r(i,a){var o=n((i=Tu(i)).r,(a=Tu(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),c=y_(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function Wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ku=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mc=new RegExp(ku.source,"g");function PC(e){return function(){return e}}function NC(e){return function(t){return e(t)+""}}function CC(e,t){var n=ku.lastIndex=Mc.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=ku.exec(e))&&(i=Mc.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Wn(r,i)})),n=Mc.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?NC(l[0].x):PC(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)s[(h=l[u]).i]=h.x(c);return s.join("")})}var Om=180/Math.PI,Iu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function __(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Om,skewX:Math.atan(l)*Om,scaleX:o,scaleY:s}}var ko;function TC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Iu:__(t.a,t.b,t.c,t.d,t.e,t.f)}function $C(e){return e==null||(ko||(ko=document.createElementNS("http://www.w3.org/2000/svg","g")),ko.setAttribute("transform",e),!(e=ko.transform.baseVal.consolidate()))?Iu:(e=e.matrix,__(e.a,e.b,e.c,e.d,e.e,e.f))}function w_(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,u,h,f,d,m){if(c!==h||u!==f){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Wn(c,h)},{i:p-2,x:Wn(u,f)})}else(h||f)&&d.push("translate("+h+t+f+n)}function o(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Wn(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function s(c,u,h,f){c!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Wn(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,f,d,m){if(c!==h||u!==f){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Wn(c,h)},{i:p-2,x:Wn(u,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=e(c),u=e(u),a(c.translateX,c.translateY,u.translateX,u.translateY,h,f),o(c.rotate,u.rotate,h,f),s(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var m=-1,p=f.length,_;++m<p;)h[(_=f[m]).i]=_.x(d);return h.join("")}}}var kC=w_(TC,"px, ","px)","deg)"),IC=w_($C,", ",")",")"),xi=0,Xi=0,Fi=0,v_=1e3,Ds,Ki,Rs=0,kr=0,kl=0,Ta=typeof performance=="object"&&performance.now?performance:Date,M_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function nh(){return kr||(M_(DC),kr=Ta.now()+kl)}function DC(){kr=0}function Ls(){this._call=this._time=this._next=null}Ls.prototype=x_.prototype={constructor:Ls,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?nh():+n)+(t==null?0:+t),!this._next&&Ki!==this&&(Ki?Ki._next=this:Ds=this,Ki=this),this._call=e,this._time=n,Du()},stop:function(){this._call&&(this._call=null,this._time=1/0,Du())}};function x_(e,t,n){var r=new Ls;return r.restart(e,t,n),r}function RC(){nh(),++xi;for(var e=Ds,t;e;)(t=kr-e._time)>=0&&e._call.call(null,t),e=e._next;--xi}function Fm(){kr=(Rs=Ta.now())+kl,xi=Xi=0;try{RC()}finally{xi=0,BC(),kr=0}}function LC(){var e=Ta.now(),t=e-Rs;t>v_&&(kl-=t,Rs=e)}function BC(){for(var e,t=Ds,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ds=n);Ki=e,Du(r)}function Du(e){if(!xi){Xi&&(Xi=clearTimeout(Xi));var t=e-kr;t>24?(e<1/0&&(Xi=setTimeout(Fm,e-Ta.now()-kl)),Fi&&(Fi=clearInterval(Fi))):(Fi||(Rs=Ta.now(),Fi=setInterval(LC,v_)),xi=1,M_(Fm))}}function Gm(e,t,n){var r=new Ls;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var OC=t_("start","end","cancel","interrupt"),FC=[],E_=0,Um=1,Ru=2,Ho=3,qm=4,Lu=5,zo=6;function Il(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;GC(e,n,{name:t,index:r,group:i,on:OC,tween:FC,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:E_})}function rh(e,t){var n=rn(e,t);if(n.state>E_)throw new Error("too late; already scheduled");return n}function xn(e,t){var n=rn(e,t);if(n.state>Ho)throw new Error("too late; already running");return n}function rn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function GC(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=x_(a,0,n.time);function a(c){n.state=Um,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,f,d;if(n.state!==Um)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Ho)return Gm(o);d.state===qm?(d.state=zo,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[u]):+u<t&&(d.state=zo,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[u])}if(Gm(function(){n.state===Ho&&(n.state=qm,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Ru,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ru){for(n.state=Ho,i=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Lu,1),h=-1,f=i.length;++h<f;)i[h].call(e,u);n.state===Lu&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=zo,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function UC(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Ru&&r.state<Lu,r.state=zo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function qC(e){return this.each(function(){UC(this,e)})}function HC(e,t){var n,r;return function(){var i=xn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function zC(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=xn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function VC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=rn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?HC:zC)(n,e,t))}function ih(e,t,n){var r=e._id;return e.each(function(){var i=xn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return rn(i,r).value[t]}}function S_(e,t){var n;return(typeof t=="number"?Wn:t instanceof Ca?$u:(n=Ca(t))?(t=n,$u):CC)(e,t)}function jC(e){return function(){this.removeAttribute(e)}}function YC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function WC(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function XC(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function KC(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function ZC(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function JC(e,t){var n=$l(e),r=n==="transform"?IC:S_;return this.attrTween(e,typeof t=="function"?(n.local?ZC:KC)(n,r,ih(this,"attr."+e,t)):t==null?(n.local?YC:jC)(n):(n.local?XC:WC)(n,r,t))}function QC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function eT(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tT(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&eT(e,a)),n}return i._value=t,i}function nT(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&QC(e,a)),n}return i._value=t,i}function rT(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$l(e);return this.tween(n,(r.local?tT:nT)(r,t))}function iT(e,t){return function(){rh(this,e).delay=+t.apply(this,arguments)}}function aT(e,t){return t=+t,function(){rh(this,e).delay=t}}function oT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iT:aT)(t,e)):rn(this.node(),t).delay}function sT(e,t){return function(){xn(this,e).duration=+t.apply(this,arguments)}}function lT(e,t){return t=+t,function(){xn(this,e).duration=t}}function cT(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sT:lT)(t,e)):rn(this.node(),t).duration}function uT(e,t){if(typeof t!="function")throw new Error;return function(){xn(this,e).ease=t}}function fT(e){var t=this._id;return arguments.length?this.each(uT(t,e)):rn(this.node(),t).ease}function hT(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;xn(this,e).ease=n}}function dT(e){if(typeof e!="function")throw new Error;return this.each(hT(this._id,e))}function mT(e){typeof e!="function"&&(e=a_(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&e.call(l,l.__data__,c,a)&&s.push(l);return new qn(r,this._parents,this._name,this._id)}function pT(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=t[s],c=n[s],u=l.length,h=o[s]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;s<r;++s)o[s]=t[s];return new qn(o,this._parents,this._name,this._id)}function bT(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function gT(e,t,n){var r,i,a=bT(t)?rh:xn;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function yT(e,t){var n=this._id;return arguments.length<2?rn(this.node(),n).on.on(e):this.each(gT(n,e,t))}function _T(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function wT(){return this.on("end.remove",_T(this._id))}function vT(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qf(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,c=a[o]=new Array(l),u,h,f=0;f<l;++f)(u=s[f])&&(h=e.call(u,u.__data__,f,s))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,Il(c[f],t,n,f,c,rn(u,n)));return new qn(a,this._parents,t,n)}function MT(e){var t=this._name,n=this._id;typeof e!="function"&&(e=i_(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=e.call(u,u.__data__,h,l),d,m=rn(u,n),p=0,_=f.length;p<_;++p)(d=f[p])&&Il(d,t,n,p,f,m);a.push(f),o.push(u)}return new qn(a,o,t,n)}var xT=lo.prototype.constructor;function ET(){return new xT(this._groups,this._parents)}function ST(e,t){var n,r,i;return function(){var a=Mi(this,e),o=(this.style.removeProperty(e),Mi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function A_(e){return function(){this.style.removeProperty(e)}}function AT(e,t,n){var r,i=n+"",a;return function(){var o=Mi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function PT(e,t,n){var r,i,a;return function(){var o=Mi(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Mi(this,e))),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}function NT(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var l=xn(this,e),c=l.on,u=l.value[a]==null?s||(s=A_(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),l.on=r}}function CT(e,t,n){var r=(e+="")=="transform"?kC:S_;return t==null?this.styleTween(e,ST(e,r)).on("end.style."+e,A_(e)):typeof t=="function"?this.styleTween(e,PT(e,r,ih(this,"style."+e,t))).each(NT(this._id,e)):this.styleTween(e,AT(e,r,t),n).on("end.style."+e,null)}function TT(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function $T(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&TT(e,o,n)),r}return a._value=t,a}function kT(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,$T(e,t,n??""))}function IT(e){return function(){this.textContent=e}}function DT(e){return function(){var t=e(this);this.textContent=t??""}}function RT(e){return this.tween("text",typeof e=="function"?DT(ih(this,"text",e)):IT(e==null?"":e+""))}function LT(e){return function(t){this.textContent=e.call(this,t)}}function BT(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&LT(i)),t}return r._value=e,r}function OT(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,BT(e))}function FT(){for(var e=this._name,t=this._id,n=P_(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var u=rn(l,t);Il(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new qn(r,this._parents,e,n)}function GT(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var c=xn(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),i===0&&a()})}var UT=0;function qn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function P_(){return++UT}var fr=lo.prototype;qn.prototype={constructor:qn,select:vT,selectAll:MT,filter:mT,merge:pT,selection:ET,transition:FT,call:fr.call,nodes:fr.nodes,node:fr.node,size:fr.size,empty:fr.empty,each:fr.each,on:yT,attr:JC,attrTween:rT,style:CT,styleTween:kT,text:RT,textTween:OT,remove:wT,tween:VC,delay:oT,duration:cT,ease:fT,easeVarying:dT,end:GT,[Symbol.iterator]:fr[Symbol.iterator]};function qT(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var HT={time:null,delay:0,duration:250,ease:qT};function zT(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function VT(e){var t,n;e instanceof qn?(t=e._id,e=e._name):(t=P_(),(n=HT).time=nh(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&Il(l,e,t,c,o,n||zT(l,t));return new qn(r,this._parents,e,t)}lo.prototype.interrupt=qC;lo.prototype.transition=VT;function Zi(e,t,n){this.k=e,this.x=t,this.y=n}Zi.prototype={constructor:Zi,scale:function(e){return e===1?this:new Zi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Zi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Zi.prototype;var jT={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,s="",l,c,u=0;for(;u<r.length;)o=i.indexOf(r.charAt(u++))<<18|i.indexOf(r.charAt(u++))<<12|(l=i.indexOf(r.charAt(u++)))<<6|(c=i.indexOf(r.charAt(u++))),s+=l===64?String.fromCharCode(o>>16&255):c===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return s},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(s){i(n.Uint8(new Uint8Array(s.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let s=0;s<a;s++)o[s]=i.charCodeAt(s);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(l){return this.pointer+=l,this.pointer},readInt:function(l){if(l=Math.min(l,this.data.byteLength-this.pointer),l<1)return-1;let c=0;if(l>1)for(let u=1;u<=l-1;u++)c+=this.data.getUint8(this.pointer)*Math.pow(256,l-u),this.pointer++;return c+=this.data.getUint8(this.pointer),this.pointer++,c},readStr:function(l){let c="";for(let u=1;u<=l;u++)c+=String.fromCharCode(this.readInt(1));return c},readIntVLV:function(){let l=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)l=this.readInt(1);else{let c=[];for(;this.data.getUint8(this.pointer)>=128;)c.push(this.readInt(1)-128);let u=this.readInt(1);for(let h=1;h<=c.length;h++)l+=c[c.length-h]*Math.pow(128,h);l+=u}return l}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),s=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=s):a.timeDivision=o*256+s;for(let l=1;l<=a.tracks;l++){a.track[l-1]={event:[]};let c=i.readInt(4);if(c===-1)break;if(c!==1297379947)return!1;i.readInt(4);let u=0,h=!1,f,d;for(;!h&&(u++,a.track[l-1].event[u-1]={},a.track[l-1].event[u-1].deltaTime=i.readIntVLV(),f=i.readInt(1),f!==-1);)if(f>=128?d=f:(f=d,i.movePointer(-1)),f===255){a.track[l-1].event[u-1].type=255,a.track[l-1].event[u-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[l-1].event[u-1].metaType){case 47:case-1:h=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[l-1].event[u-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[l-1].event[u-1].data=i.readInt(m);break;case 84:a.track[l-1].event[u-1].data=[],a.track[l-1].event[u-1].data[0]=i.readInt(1),a.track[l-1].event[u-1].data[1]=i.readInt(1),a.track[l-1].event[u-1].data[2]=i.readInt(1),a.track[l-1].event[u-1].data[3]=i.readInt(1),a.track[l-1].event[u-1].data[4]=i.readInt(1);break;case 88:a.track[l-1].event[u-1].data=[],a.track[l-1].event[u-1].data[0]=i.readInt(1),a.track[l-1].event[u-1].data[1]=i.readInt(1),a.track[l-1].event[u-1].data[2]=i.readInt(1),a.track[l-1].event[u-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[l-1].event[u-1].data=this.customInterpreter(a.track[l-1].event[u-1].metaType,i,m)),(this.customInterpreter===null||a.track[l-1].event[u-1].data===!1)&&(i.readInt(m),a.track[l-1].event[u-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(f=f.toString(16).split(""),f[1]||f.unshift("0"),a.track[l-1].event[u-1].type=parseInt(f[0],16),a.track[l-1].event[u-1].channel=parseInt(f[1],16),a.track[l-1].event[u-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[l-1].event[u-1].data=this.customInterpreter(a.track[l-1].event[u-1].type,i,!1)),this.customInterpreter===null||a.track[l-1].event[u-1].data===!1){let m=i.readIntVLV();a.track[l-1].event[u-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[l-1].event[u-1].data=[],a.track[l-1].event[u-1].data[0]=i.readInt(1),a.track[l-1].event[u-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[l-1].event[u-1].data=i.readInt(1);break;case-1:h=!0;break;default:if(this.customInterpreter!==null&&(a.track[l-1].event[u-1].data=this.customInterpreter(a.track[l-1].event[u-1].metaType,i,!1)),this.customInterpreter===null||a.track[l-1].event[u-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(jT);function Xn(e){return 1/(e/60)}const N_=[],YT=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of YT)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;N_.push({type:e,dots:t,duration:n})}N_.sort((e,t)=>e.duration-t.duration);function WT(e,t,n,r){e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.stroke()}class me{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>Qy(r).pitch),this.stringCount=n.length}}const XT=new Map([["Guitar",new Map([[6,[new me("E stand.",["E2","A2","D3","G3","B3","E4"]),new me("Drop D",["D2","A2","D3","G3","B3","E4"]),new me("Drop C",["C2","G2","C3","F3","A3","D4"]),new me("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new me("1 down",["D2","G2","C3","F3","A3","D4"]),new me("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new me("2 down",["C2","F2","A#2","D#3","G3","C4"]),new me("DADGAG",["D2","A2","D3","G3","A3","D4"])]],[7,[new me("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new me("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new me("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new me("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new me("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new me("2 down",["G1","C2","F2","A#2","D#3","G3","C4"])]],[8,[new me("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new me("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new me("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new me("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new me("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new me("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"])]]])],["Bass",new Map([[4,[new me("E stand.",["E1","A1","D2","G2"]),new me("Drop D",["D1","A1","D2","G2"]),new me("1/2 down",["D#1","G#1","C#2","F#2"]),new me("1 down",["D1","G1","C2","F2"]),new me("1 1/2 down",["C#1","F#1","B1","E2"]),new me("2 down",["C1","F1","A#1","D#2"])]],[5,[new me("B stand.",["B0","E1","A1","D2","G2"]),new me("Drop A",["A0","D1","A1","D2","G2"]),new me("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new me("1 down",["A0","D1","G1","C2","F2"]),new me("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new me("2 down",["G0","C1","F1","A#1","D#2"])]],[6,[new me("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new me("Drop E",["E0","A0","D1","A1","D2","G2"]),new me("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new me("1 down",["E1","A0","D1","G1","C2","F2"]),new me("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new me("2 down",["D0","G0","C1","F1","A#1","D#2"])]]])],["Ukulele",new Map([[4,[new me("Hawaii",["G4","C4","E4","A4"]),new me("Low G",["G3","C4","E4","A4"]),new me("D-tuning",["A4","D4","F#4","B4"]),new me("Canadian",["A3","D4","F#4","B4"]),new me("Bariton",["D3","G3","B3","E4"])]]])]]);class jn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>Qy(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="°",s-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="°",s-=12;const l=$P(i).name;n.set(i,{number:a,letterString:`${l}${o}`})}return[...n.values()].map(r=>r.letterString)}}new jn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new jn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new jn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new jn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new jn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new jn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new jn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new jn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function KT(e,t=1){const n=b_(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>KT(e,.5));const ZT=$u("black","steelblue");Array.from({length:12}).map((e,t)=>ZT(t/11));function JT(e,t,n){const r=e.slice();return r[17]=t[n],r}function QT(e){let t;return{c(){t=P("option"),t.textContent=`${e[17]}`,t.__value=e[17],ce(t,t.__value)},m(n,r){le(n,t,r)},p:oe,d(n){n&&ae(t)}}}function e$(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,m,p,_,v,g,E,w,M=Te(["velocity","piano","channel","none"]),x=[];for(let y=0;y<4;y+=1)x[y]=QT(JT(e,M,y));return{c(){t=P("main"),n=P("h2"),n.textContent="Guitar Tab",r=R(),i=P("p"),i.textContent=`The guitar tab below shows incoming MIDI notes as rectangles with their
        string (y position) and start and end times (x left and right side of
        the rectangle). The color encodes the MIDI velocity, which tells how
        hard/loud a note was played.`,a=R(),o=P("div"),s=P("label"),l=X(`color
            `),c=P("select");for(let y=0;y<4;y+=1)x[y].c();u=R(),h=P("label"),f=X(`time
            `),d=P("input"),m=R(),p=P("div"),_=R(),v=P("div"),g=P("button"),g.textContent="reset",N(i,"class","explanation"),e[2]===void 0&&bt(()=>e[5].call(c)),N(d,"type","number"),N(d,"min","10"),N(d,"max","300"),N(d,"step","10"),N(h,"title","time in seconds for past notes to be shown"),N(o,"class","control"),N(p,"class","visualization"),N(g,"title","Clear all played notes"),N(v,"class","control"),N(t,"class","demo")},m(y,S){le(y,t,S),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(s,l),b(s,c);for(let A=0;A<4;A+=1)x[A]&&x[A].m(c,null);Le(c,e[2],!0),b(o,u),b(o,h),b(h,f),b(h,d),ce(d,e[1]),b(t,m),b(t,p),e[7](p),b(t,_),b(t,v),b(v,g),E||(w=[K(c,"change",e[5]),K(d,"input",e[6]),K(g,"click",e[8])],E=!0)},p(y,[S]){S&4&&Le(c,y[2]),S&2&&_e(d.value)!==y[1]&&ce(d,y[1])},i:oe,o:oe,d(y){y&&ae(t),tt(x,y),e[7](null),E=!1,Fe(w)}}}let t$=1e3,n$=500,r$=6;function i$(e,t,n){let r=[64,59,55,50,45,40],i,a=30,o="velocity",s=0,l=[];const c=new Map;let u=null;const h=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((E,w)=>{console.log(`MIDI device ${w}: ${E.name}`),E.addListener("noteon",f),E.addListener("noteoff",d)}),[...I.inputs])},f=E=>{const w=(E.timestamp-s)/1e3,M=E.message.channel-1,x={number:E.note.number,velocity:E.rawVelocity,time:w,channel:E.message.channel,string:M,fret:E.note.number-r[M]};if(c.has(E.note.number)){const y=c.get(E.note.number);y.end===void 0&&(y.end=w)}l.push(x),c.set(E.note.number,x)},d=E=>{if(c.has(E.note.number)){const w=c.get(E.note.number),M=(E.timestamp-s)/1e3;w.end=M}},m=()=>{const E=(performance.now()-s)/1e3,w=E-a,M=l.filter(C=>C.end>w||C.end===void 0),x=ht(M,C=>C.number),y=r.map(bn.fromMidiSharps);let S,A;o==="velocity"?(S={label:"Note velocity",scheme:"blues",domain:[0,127]},A="velocity"):o==="piano"?(S={label:"Piano key color",domain:["black","white"],range:["black","white"]},A=C=>$s(C.number)?"black":"white"):o==="channel"?(S={type:"categorical",label:"MIDI channel",scheme:"tableau10"},A=C=>C.channel):o==="none"&&(A="#ddd");const $=Ke({insetRight:10,width:t$,height:n$,marginLeft:60,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[w,E]},y:{label:"String",grid:!0,domain:Me(0,r$),tickFormat:C=>y[C]},color:{...S,legend:o!=="none",marginLeft:100,width:300},marks:[Lt(Me(Math.ceil((x[0]-1)/12)*12,x[1]+2,12)),jt([E],{stroke:"#888"}),Cl(M,{clip:!0,x1:"time",x2:C=>C.end===void 0?E:Math.max(C.end,C.time+.025),y:"string",fill:A,stroke:"#ccc",rx:5}),$r(M,{clip:!0,x:"time",y:"string",fill:"black",stroke:"white",text:"fret",textAnchor:"start",dx:2})]});n(0,i.textContent="",i),i.appendChild($),u=requestAnimationFrame(m)};st(()=>{I.enable().then(h).catch(E=>alert(E)),n(3,s=performance.now()),u=requestAnimationFrame(m)}),lt(()=>{for(const E of I.inputs)E.removeListener();cancelAnimationFrame(u)});function p(){o=Yt(this),n(2,o)}function _(){a=_e(this.value),n(1,a)}function v(E){ot[E?"unshift":"push"](()=>{i=E,n(0,i)})}return[i,a,o,s,l,p,_,v,()=>{confirm("Reset played notes?")&&(n(4,l=[]),n(3,s=performance.now()))}]}class a$ extends He{constructor(t){super(),qe(this,t,i$,e$,Ue,{})}}function o$(e){let t,n,r,i,a,o,s,l,c,u,h,f,d=e[2]?"☑":"☐",m,p,_,v,g=e[3]?"☑":"☐",E,w,M,x,y,S,A,$,C=e[0]>=6?"guitar":"bass guitar",B,O,G=e[1]===0?"in standard tuning":`${Math.abs(e[1])} ${e[1]<0?"steps down":"steps up"}`,T,k,L=e[2]?"and dropped":"",q,z,H,J,Z,F,te,ne,re,Q;return{c(){t=P("main"),n=P("h2"),n.textContent="Guitar Tunings",r=R(),i=P("label"),a=X(`strings
        `),o=P("input"),s=R(),l=P("label"),c=X(`tune up/down (semitones)
        `),u=P("input"),h=R(),f=P("button"),m=X(d),p=X(" dropped"),_=R(),v=P("button"),E=X(g),w=X(" octave shown"),M=R(),x=P("div"),y=P("p"),S=X("You selected a "),A=X(e[0]),$=X(" string "),B=X(C),O=X(", tuned "),T=X(G),k=R(),q=X(L),z=R(),H=P("p"),J=X("Resulting tuning, low to high:"),Z=P("br"),F=R(),te=P("b"),ne=X(e[4]),N(o,"type","number"),N(o,"min","4"),N(o,"max","8"),N(o,"step","1"),N(u,"type","number"),N(u,"min","-12"),N(u,"max","12"),N(u,"step","1")},m(Y,D){le(Y,t,D),b(t,n),b(t,r),b(t,i),b(i,a),b(i,o),ce(o,e[0]),b(t,s),b(t,l),b(l,c),b(l,u),ce(u,e[1]),b(t,h),b(t,f),b(f,m),b(f,p),b(t,_),b(t,v),b(v,E),b(v,w),b(t,M),b(t,x),b(x,y),b(y,S),b(y,A),b(y,$),b(y,B),b(y,O),b(y,T),b(y,k),b(y,q),b(x,z),b(x,H),b(H,J),b(H,Z),b(H,F),b(H,te),b(te,ne),re||(Q=[K(o,"input",e[5]),K(u,"input",e[6]),K(f,"click",e[7]),K(v,"click",e[8])],re=!0)},p(Y,[D]){D&1&&_e(o.value)!==Y[0]&&ce(o,Y[0]),D&2&&_e(u.value)!==Y[1]&&ce(u,Y[1]),D&4&&d!==(d=Y[2]?"☑":"☐")&&Se(m,d),D&8&&g!==(g=Y[3]?"☑":"☐")&&Se(E,g),D&1&&Se(A,Y[0]),D&1&&C!==(C=Y[0]>=6?"guitar":"bass guitar")&&Se(B,C),D&2&&G!==(G=Y[1]===0?"in standard tuning":`${Math.abs(Y[1])} ${Y[1]<0?"steps down":"steps up"}`)&&Se(T,G),D&4&&L!==(L=Y[2]?"and dropped":"")&&Se(q,L),D&16&&Se(ne,Y[4])},i:oe,o:oe,d(Y){Y&&ae(t),re=!1,Fe(Q)}}}function s$(e,t,n){let r,i=6,a=0,o=!1,s=!0;const l=(d,m,p,_)=>{let g=XT.get(d>5?"Guitar":"Bass").get(d)[0].pitches.map(E=>E+m);return p&&(g[0]-=2),_?g=g.map(E=>Aa[E].label):g=g.map(E=>Aa[E].name),g.join(" ")};function c(){i=_e(this.value),n(0,i)}function u(){a=_e(this.value),n(1,a)}const h=()=>{n(2,o=!o)},f=()=>{n(3,s=!s)};return e.$$.update=()=>{e.$$.dirty&15&&n(4,r=l(i,a,o,s))},[i,a,o,s,r,c,u,h,f]}class l$ extends He{constructor(t){super(),qe(this,t,s$,o$,Ue,{})}}function Hm(e,t,n){const r=e.slice();return r[5]=t[n],r}function zm(e){let t,n,r=e[5].timestamp.toFixed(1)+"",i,a,o,s=e[5].port.manufacturer+"",l,c,u,h=e[5].port.name+"",f,d,m,p=e[5].message.command+"",_,v,g=e[5].message.type+"",E,w,M,x=e[5].message.dataBytes+"",y,S,A,$=(["noteon","noteoff"].includes(e[5].message.type)?bn.fromMidiSharps(e[5].message.dataBytes[0]):"")+"",C,B,O,G=(["noteon","noteoff"].includes(e[5].message.type)?e[5].message.dataBytes[1]:"")+"",T,k;return{c(){t=P("tr"),n=P("td"),i=X(r),a=R(),o=P("td"),l=X(s),c=R(),u=P("td"),f=X(h),d=R(),m=P("td"),_=X(p),v=R(),E=X(g),w=R(),M=P("td"),y=X(x),S=R(),A=P("td"),C=X($),B=R(),O=P("td"),T=X(G),k=R(),N(n,"class","svelte-1x83ix2"),N(o,"class","svelte-1x83ix2"),N(u,"class","svelte-1x83ix2"),N(m,"class","svelte-1x83ix2"),N(M,"class","svelte-1x83ix2"),N(A,"class","svelte-1x83ix2"),N(O,"class","svelte-1x83ix2"),N(t,"class","svelte-1x83ix2")},m(L,q){le(L,t,q),b(t,n),b(n,i),b(t,a),b(t,o),b(o,l),b(t,c),b(t,u),b(u,f),b(t,d),b(t,m),b(m,_),b(m,v),b(m,E),b(t,w),b(t,M),b(M,y),b(t,S),b(t,A),b(A,C),b(t,B),b(t,O),b(O,T),b(t,k)},p(L,q){q&1&&r!==(r=L[5].timestamp.toFixed(1)+"")&&Se(i,r),q&1&&s!==(s=L[5].port.manufacturer+"")&&Se(l,s),q&1&&h!==(h=L[5].port.name+"")&&Se(f,h),q&1&&p!==(p=L[5].message.command+"")&&Se(_,p),q&1&&g!==(g=L[5].message.type+"")&&Se(E,g),q&1&&x!==(x=L[5].message.dataBytes+"")&&Se(y,x),q&1&&$!==($=(["noteon","noteoff"].includes(L[5].message.type)?bn.fromMidiSharps(L[5].message.dataBytes[0]):"")+"")&&Se(C,$),q&1&&G!==(G=(["noteon","noteoff"].includes(L[5].message.type)?L[5].message.dataBytes[1]:"")+"")&&Se(T,G)},d(L){L&&ae(t)}}}function c$(e){let t,n,r,i,a,o,s,l,c,u,h=e[0].length+"",f,d,m,p,_,v,g,E,w,M=Te(e[0].slice(0,100)),x=[];for(let y=0;y<M.length;y+=1)x[y]=zm(Hm(e,M,y));return{c(){t=P("main"),n=P("h2"),n.textContent="MIDI Logger",r=R(),i=P("p"),i.textContent="Input anything on a MIDI device to see the incoming messages below.",a=R(),o=P("div"),s=P("button"),s.textContent="reset",l=R(),c=P("div"),u=P("p"),f=X(h),d=X(" messages received"),m=R(),p=P("table"),_=P("thead"),_.innerHTML="<th>timestamp</th> <th>manufacturer</th> <th>name</th> <th>command</th> <th>data</th> <th>note</th> <th>velocity</th>",v=R(),g=P("tbody");for(let y=0;y<x.length;y+=1)x[y].c();N(i,"class","explanation"),N(s,"title","Clear all messages"),N(o,"class","control"),N(p,"class","svelte-1x83ix2"),N(c,"class","visualization"),N(t,"class","demo")},m(y,S){le(y,t,S),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(t,l),b(t,c),b(c,u),b(u,f),b(u,d),b(c,m),b(c,p),b(p,_),b(p,v),b(p,g);for(let A=0;A<x.length;A+=1)x[A]&&x[A].m(g,null);E||(w=K(s,"click",e[1]),E=!0)},p(y,[S]){if(S&1&&h!==(h=y[0].length+"")&&Se(f,h),S&1){M=Te(y[0].slice(0,100));let A;for(A=0;A<M.length;A+=1){const $=Hm(y,M,A);x[A]?x[A].p($,S):(x[A]=zm($),x[A].c(),x[A].m(g,null))}for(;A<x.length;A+=1)x[A].d(1);x.length=M.length}},i:oe,o:oe,d(y){y&&ae(t),tt(x,y),E=!1,w()}}}function u$(e,t,n){let r=[];const i=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((o,s)=>{console.log(`MIDI device ${s}: ${o.name}`),o.addListener("midimessage",l=>{n(0,r=[l,...r]),console.log(l)})}),[...I.inputs])};return st(()=>{I.enable().then(i).catch(o=>alert(o)),performance.now()}),lt(()=>{for(const o of I.inputs)o.removeListener()}),[r,()=>{n(0,r=[])}]}class f$ extends He{constructor(t){super(),qe(this,t,u$,c$,Ue,{})}}function h$(e){return 60*1/e}function C_(e,t){return Me(Math.ceil(e/12)*12,t+1,12)}function d$(e,t,n){return e<t?t:e>n?n:e}function m$(e){return new Promise(t=>{setTimeout(t,e*1e3)})}function p$(e,t,n){const r=e.slice();return r[16]=t[n],r}function b$(e){let t;return{c(){t=P("option"),t.textContent=`${e[16]}`,t.__value=e[16],ce(t,t.__value)},m(n,r){le(n,t,r)},p:oe,d(n){n&&ae(t)}}}function g$(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,m,p,_,v,g,E,w,M=Te(["velocity","piano","channel","none"]),x=[];for(let y=0;y<4;y+=1)x[y]=b$(p$(e,M,y));return{c(){t=P("main"),n=P("h2"),n.textContent="Fretboard Heatmap",r=R(),i=P("p"),i.textContent=`The piano roll below shows incoming MIDI notes as rectangles with their
        pitch (y position) and start and end times (x left and right side of the
        rectangle). The color encodes the MIDI velocity, which tells how
        hard/loud a note was played.`,a=R(),o=P("div"),s=P("label"),l=X(`color
            `),c=P("select");for(let y=0;y<4;y+=1)x[y].c();u=R(),h=P("label"),f=X(`time
            `),d=P("input"),m=R(),p=P("div"),_=R(),v=P("div"),g=P("button"),g.textContent="reset",N(i,"class","explanation"),e[2]===void 0&&bt(()=>e[5].call(c)),N(d,"type","number"),N(d,"min","10"),N(d,"max","300"),N(d,"step","10"),N(h,"title","time in seconds for past notes to be shown"),N(o,"class","control"),N(p,"class","visualization"),N(g,"title","Clear all played notes"),N(v,"class","control"),N(t,"class","demo")},m(y,S){le(y,t,S),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(s,l),b(s,c);for(let A=0;A<4;A+=1)x[A]&&x[A].m(c,null);Le(c,e[2],!0),b(o,u),b(o,h),b(h,f),b(h,d),ce(d,e[1]),b(t,m),b(t,p),e[7](p),b(t,_),b(t,v),b(v,g),E||(w=[K(c,"change",e[5]),K(d,"input",e[6]),K(g,"click",e[8])],E=!0)},p(y,[S]){S&4&&Le(c,y[2]),S&2&&_e(d.value)!==y[1]&&ce(d,y[1])},i:oe,o:oe,d(y){y&&ae(t),tt(x,y),e[7](null),E=!1,Fe(w)}}}let y$=1e3,_$=500;function w$(e,t,n){let r,i=30,a="velocity",o=0,s=[];const l=new Map;let c=null;const u=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((g,E)=>{console.log(`MIDI device ${E}: ${g.name}`),g.addListener("noteon",h),g.addListener("noteoff",f)}),[...I.inputs])},h=g=>{const E=(g.timestamp-o)/1e3,w={number:g.note.number,velocity:g.rawVelocity,time:E,channel:g.message.channel};if(l.has(g.note.number)){const M=l.get(g.note.number);M.end===void 0&&(M.end=E)}s.push(w),l.set(g.note.number,w)},f=g=>{if(l.has(g.note.number)){const E=l.get(g.note.number),w=(g.timestamp-o)/1e3;E.end=w}},d=()=>{const g=(performance.now()-o)/1e3,E=g-i,w=s.filter(A=>A.end>E||A.end===void 0),M=ht(w,A=>A.number);let x,y;a==="velocity"?(x={label:"Note velocity",scheme:"blues",domain:[0,127]},y="velocity"):a==="piano"?(x={label:"Piano key color",domain:["black","white"],range:["black","white"]},y=A=>$s(A.number)?"black":"white"):a==="channel"?(x={type:"categorical",label:"MIDI channel",scheme:"tableau10"},y=A=>A.channel):a==="none"&&(y="#ddd");const S=Ke({insetRight:10,width:y$,height:_$,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[E,g]},y:{label:"MIDI Pitch",grid:!0,reverse:!0,domain:Me(M[0]-1,M[1]+2),tickFormat:A=>Aa[A].label},color:{...x,legend:a!=="none",marginLeft:100,width:300},marks:[Lt(C_(M[0]-1,M[1]+2)),jt([g],{stroke:"#888"}),Cl(w,{clip:!0,x1:"time",x2:A=>A.end===void 0?g:Math.max(A.end,A.time+.025),y:"number",fill:y,stroke:"#ccc",rx:5})]});n(0,r.textContent="",r),r.appendChild(S),c=requestAnimationFrame(d)};st(()=>{I.enable().then(u).catch(g=>alert(g)),n(3,o=performance.now()),c=requestAnimationFrame(d)}),lt(()=>{for(const g of I.inputs)g.removeListener();cancelAnimationFrame(c)});function m(){a=Yt(this),n(2,a)}function p(){i=_e(this.value),n(1,i)}function _(g){ot[g?"unshift":"push"](()=>{r=g,n(0,r)})}return[r,i,a,o,s,m,p,_,()=>{confirm("Reset played notes?")&&(n(4,s=[]),n(3,o=performance.now()))}]}class v$ extends He{constructor(t){super(),qe(this,t,w$,g$,Ue,{})}}function Vm(e,t,n){const r=e.slice();return r[3]=t[n],r}function M$(e){let t,n,r;var i=e[0].component;function a(o,s){return{}}return i&&(n=jo(i,a())),{c(){t=P("div"),n&&la(n.$$.fragment)},m(o,s){le(o,t,s),n&&ii(n,t,null),r=!0},p(o,s){if(s&1&&i!==(i=o[0].component)){if(n){Da();const l=n;Wt(l.$$.fragment,1,0,()=>{ai(l,1)}),Ra()}i?(n=jo(i,a()),la(n.$$.fragment),It(n.$$.fragment,1),ii(n,t,null)):n=null}},i(o){r||(n&&It(n.$$.fragment,o),r=!0)},o(o){n&&Wt(n.$$.fragment,o),r=!1},d(o){o&&ae(t),n&&ai(n)}}}function x$(e){let t,n,r,i=Te(e[1]),a=[];for(let o=0;o<i.length;o+=1)a[o]=jm(Vm(e,i,o));return{c(){t=P("p"),t.textContent="This page contains a collection of simple but useful tools.",n=R(),r=P("div");for(let o=0;o<a.length;o+=1)a[o].c();N(t,"class","explanation"),N(r,"class","grid")},m(o,s){le(o,t,s),le(o,n,s),le(o,r,s);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(r,null)},p(o,s){if(s&3){i=Te(o[1]);let l;for(l=0;l<i.length;l+=1){const c=Vm(o,i,l);a[l]?a[l].p(c,s):(a[l]=jm(c),a[l].c(),a[l].m(r,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=i.length}},i:oe,o:oe,d(o){o&&(ae(t),ae(n),ae(r)),tt(a,o)}}}function jm(e){let t,n,r,i,a,o,s;function l(){return e[2](e[3])}return{c(){t=P("div"),n=P("h2"),n.textContent=`${e[3].title}`,r=R(),i=P("div"),i.textContent=`${e[3].description}`,a=R(),N(i,"class","description"),N(t,"class","card")},m(c,u){le(c,t,u),b(t,n),b(t,r),b(t,i),b(t,a),o||(s=K(t,"click",l),o=!0)},p(c,u){e=c},d(c){c&&ae(t),o=!1,s()}}}function E$(e){let t,n,r,i;const a=[x$,M$],o=[];function s(l,c){return l[0]?1:0}return n=s(e),r=o[n]=a[n](e),{c(){t=P("main"),r.c()},m(l,c){le(l,t,c),o[n].m(t,null),i=!0},p(l,[c]){let u=n;n=s(l),n===u?o[n].p(l,c):(Da(),Wt(o[u],1,1,()=>{o[u]=null}),Ra(),r=o[n],r?r.p(l,c):(r=o[n]=a[n](l),r.c()),It(r,1),r.m(t,null))},i(l){i||(It(r),i=!0)},o(l){Wt(r),i=!1},d(l){l&&ae(t),o[n].d()}}}function S$(e,t,n){let r=[{id:"midi-logger",title:"MIDI Logger",description:"Logs all incoming MIDI messages. Useful for getting to know a device or debugging MIDI issues.",component:f$},{id:"piano-roll",title:"Piano Roll",description:"Shows MIDI input as a piano roll.",component:v$},{id:"guitar-tab",title:"Guitar Tab",description:"Shows MIDI input as guitar tab.",component:a$},{id:"guitar-tunings",title:"Guitar Tunings",description:"Small tool that computes the notes for a guitar tuning based on parameters. Open tunings are not included.",component:l$},{id:"chord-detection",title:"Chord Detection",description:"Play a chord and see what it's named.",component:L9}],i;return[i,r,o=>{n(0,i=o)}]}class A$ extends He{constructor(t){super(),qe(this,t,S$,E$,Ue,{})}}var T_={exports:{}};(function(e,t){(function(n,r){r()})(Oi,function(){function n(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,u,h){var f=new XMLHttpRequest;f.open("GET",c),f.responseType="blob",f.onload=function(){l(f.response,u,h)},f.onerror=function(){console.error("could not download file")},f.send()}function i(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function a(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Oi=="object"&&Oi.global===Oi?Oi:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(c,u,h){var f=o.URL||o.webkitURL,d=document.createElement("a");u=u||c.name||"download",d.download=u,d.rel="noopener",typeof c=="string"?(d.href=c,d.origin===location.origin?a(d):i(d.href)?r(c,u,h):a(d,d.target="_blank")):(d.href=f.createObjectURL(c),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,h){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,h),u);else if(i(c))r(c,u,h);else{var f=document.createElement("a");f.href=c,f.target="_blank",setTimeout(function(){a(f)})}}:function(c,u,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof c=="string")return r(c,u,h);var d=c.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||s)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var E=_.result;E=p?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=E:location=E,f=null},_.readAsDataURL(c)}else{var v=o.URL||o.webkitURL,g=v.createObjectURL(c);f?f.location=g:location.href=g,f=null,setTimeout(function(){v.revokeObjectURL(g)},4e4)}});o.saveAs=l.saveAs=l,e.exports=l})})(T_);var P$=T_.exports;const uo=NP(P$);function Ym(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function N$(e,t,n,r,i,a){const o=new Float64Array(a),s=(a-1)/(i-r);for(let l=0;l<e.length;++l){const c=e[l],u=t(c,l,e),h=n(c,l,e);if(!(Number.isFinite(u)&&Number.isFinite(h)))continue;const f=(u-r)*s,d=Math.floor(f),m=d+1;0<=d&&m<a?(o[d]+=(m-f)*h,o[m]+=(f-d)*h):d===-1?o[m]+=(f-d)*h:m===a&&(o[d]+=(m-f)*h)}return o}function Wm(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);C$(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,s=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:s}}function C$(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),s=.6318/n,l=1.997/n,c=Float64Array.of(-a*Math.cos(s),a*Math.sin(s),-a*Math.cos(-s),a*Math.sin(-s),-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l)),u=n*2.5066282746310007,h=Float64Array.of(i[0],i[1],0,0,0,0,0,0),f=Float64Array.of(1,0,c[0],c[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(h[m]=c[m]*h[m-2]-c[m+1]*h[m-1],h[m+1]=c[m]*h[m-1]+c[m+1]*h[m-2],d=m-2;d>0;d-=2)h[d]+=c[m]*h[d-2]-c[m+1]*h[d-1],h[d+1]+=c[m]*h[d-1]+c[m+1]*h[d-2];for(d=0;d<=m;d+=2)h[d]+=i[m]*f[d]-i[m+1]*f[d+1],h[d+1]+=i[m]*f[d+1]+i[m+1]*f[d];for(f[m+2]=c[m]*f[m]-c[m+1]*f[m+1],f[m+3]=c[m]*f[m+1]+c[m+1]*f[m],d=m;d>0;d-=2)f[d]+=c[m]*f[d-2]-c[m+1]*f[d-1],f[d+1]+=c[m]*f[d-1]+c[m+1]*f[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=h[d]/u,e[m+1]=f[d+2]}function T$(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),s=i,l=$$){const c=r*2,u=r*3,h=r*4,f=r*n;let d,m;for(l(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=h;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-c]+e.b_causal[3]*t[d-u]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(l(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=f-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+c]+e.b_anticausal[3]*t[d+u]+e.b_anticausal[4]*t[d+h]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)s[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)s[d]=Math.max(0,i[m]+a[n-m-1]);return s}function $$(e,t,n,r,i,a,o,s,l,c,u,h=.5){const f=Math.abs(r)*n,d=r<0?f+r:0;let m,p,_;for(p=0;p<s;++p)for(c[p]=p<=a?i[p]:0,_=1;_<=s&&_<=p;++_)c[p]-=o[_]*c[p-_];for(_=0;_<s;++_)for(e[_]=0,p=1;p<=_;++p)m=d+r*p,m>=0&&m<f&&(e[_]+=c[_-p]*t[m]);const v=t[d],g=Math.ceil(u*10);for(p=0;p<g;++p){for(_=0;_<s;++_)e[_]+=c[_]*v;if(l-=Math.abs(c[0]),l<=h)break;for(c[s]=p+s<=a?i[p+s]:0,_=1;_<=s;++_)c[s]-=o[_]*c[s-_];for(_=0;_<s;++_)c[_]=c[_+1]}}function k$(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const s=t(e[o],o,e);s!=null&&(i===void 0?s>=s&&(i=a=s):(s<i&&(i=s),s>a&&(a=s)))}return[i-n,a+n]}function I$(e,t){const n=e.map(t).filter(c=>c!=null&&c>=c);n.sort((c,u)=>c-u);const r=D$(n),i=Xm(n,.25),a=Xm(n,.75),o=n.length,s=(a-i)/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function D$(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const s=e[o];r=s-i,i+=r/++n,a+=r*(s-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function Xm(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function R$(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=Ym(t.x,v=>v),o=Ym(t.weight,()=>1/e.length);let s=t.bandwidth??n*I$(e,a);const[l,c]=t.extent??k$(e,a,r*s),u=N$(e,a,o,l,c,i),h=(c-l)/(i-1),f=u.some(v=>v<0);let d=Wm(s/h,f),m;function*p(v="x",g="y"){const E=_.grid(),w=1/h;for(let M=0;M<i;++M)yield{[v]:l+M*h,[g]:E[M]*w}}const _={[Symbol.iterator]:p,points:p,grid:()=>m||(m=T$(d,u,i)),extent:()=>[l,c],bandwidth(v){return arguments.length?(v!==s&&(s=v,m=null,d=Wm(s/h,f)),_):s}};return _}var Bs,Os,Fs,ti,$a,br,ka,ni,Ia,qt,sn,ri;class ah{constructor(){yt(this,Bs,.03);yt(this,Os,.5);yt(this,Fs,200);yt(this,ti,!1);yt(this,$a,null);yt(this,br,null);yt(this,ka,4);yt(this,ni,1/0);yt(this,Ia,void 0);yt(this,qt,null);yt(this,sn,new AudioContext);yt(this,ri,null);fo(this,"_scheduler",()=>{const t=Ne(this,ka),n=60/Ne(this,br);let r=Ne(this,Ia)+Ne(this,qt)*n;for(;r<Ne(this,sn).currentTime+Ne(this,Os);)if(Ne(this,qt)<Ne(this,ni)-1){r+=n;const i=Ne(this,qt)%t===t-1||Ne(this,qt)===-1,a=r-Ne(this,sn).currentTime,o=performance.now()+a*1e3;this._playSound(r,o,i),sh(this,qt)._++}Ne(this,qt)<Ne(this,ni)-1?Gt(this,$a,setTimeout(this._scheduler,Ne(this,Fs))):this.stop()})}get bpm(){return Ne(this,br)}get beatCount(){return Ne(this,qt)}onClick(t){Gt(this,ri,t)}start(t,n=4,r=1/0){if(!t||Number.isNaN(+t)){console.error(`[Metronome] Invalid bpm ${t}`);return}if(!n||Number.isNaN(+n)){console.error(`[Metronome] Invalid accent ${n}`);return}if(!r||Number.isNaN(+r)){console.error(`[Metronome] Invalid maxBeeps ${r}`);return}Ne(this,sn).state==="suspended"&&Ne(this,sn).resume(),Gt(this,br,+t),Gt(this,ka,+n),Gt(this,ni,+r),Gt(this,ti,!0),console.log(`Metronome @ ${t}bpm, accent every ${n}. beat, limited to ${r}`),Gt(this,qt,-1),Gt(this,Ia,Ne(this,sn).currentTime),this._scheduler()}stop(){console.log("[Metronome] stopped"),clearTimeout(Ne(this,$a)),Gt(this,ti,!1)}toggle(t,n=4){Ne(this,ti)?this.stop():(t===void 0&&(t=Ne(this,br)),this.start(t,n))}_playSound(t,n,r){Ne(this,ri)&&Ne(this,ri).call(this,t,n,r);const i=Ne(this,sn).createOscillator();i.connect(Ne(this,sn).destination);const a=r?300:200;i.frequency.value=a,i.start(t),i.stop(t+Ne(this,Bs))}}Bs=new WeakMap,Os=new WeakMap,Fs=new WeakMap,ti=new WeakMap,$a=new WeakMap,br=new WeakMap,ka=new WeakMap,ni=new WeakMap,Ia=new WeakMap,qt=new WeakMap,sn=new WeakMap,ri=new WeakMap;function L$(e,t,n){const r=e.slice();return r[28]=t[n],r}function Km(e,t,n){const r=e.slice();return r[28]=t[n],r}function Zm(e){let t,n=e[28]+"",r;return{c(){t=P("option"),r=X(n),t.__value=e[28],ce(t,t.__value)},m(i,a){le(i,t,a),b(t,r)},p:oe,d(i){i&&ae(t)}}}function B$(e){let t;return{c(){t=P("option"),t.textContent=`1/${e[28]} note`,t.__value=e[28],ce(t,t.__value)},m(n,r){le(n,t,r)},p:oe,d(n){n&&ae(t)}}}function O$(e){let t,n,r,i,a,o=e[1].length+"",s,l,c,u,h,f,d,m,p,_,v,g,E,w,M,x,y,S,A,$,C,B,O,G,T,k,L,q=e[7]?"area":"bars",z,H,J,Z,F,te,ne,re,Q,Y,D,V,W,U,fe,ue,ie,he=Te(e[9]),se=[];for(let de=0;de<he.length;de+=1)se[de]=Zm(Km(e,he,de));let je=Te([16,32,64,128]),Ae=[];for(let de=0;de<4;de+=1)Ae[de]=B$(L$(e,je,de));return{c(){t=P("main"),n=P("h2"),n.textContent="Live-Subdivision",r=R(),i=P("p"),a=X("Connect a MIDI instrument (currently "),s=X(o),l=X(` connected), choose
        your tempo and subdivision, and start playing. The bar chart will show you
        how often you hit each time bin and the last `),c=X(e[6]),u=X(` notes will be
        shown as ticks that fade out one new notes come in (from red for new to blue
        for old). You can play freely, use the integrated metronome, or play a song
        in the background (in another tab). All notes will be timed relative to the
        first one, but you can adjust all notes to make them earlier or later in
        case you messed up the first one.`),h=R(),f=P("div"),d=P("label"),m=X(`tempo
            `),p=P("input"),_=R(),v=P("label"),g=X(`grid
            `),E=P("select");for(let de=0;de<se.length;de+=1)se[de].c();w=R(),M=P("label"),x=X(`binning
            `),y=P("select");for(let de=0;de<4;de+=1)Ae[de].c();S=R(),A=P("label"),$=X(`adjust
            `),C=P("input"),B=R(),O=P("label"),G=X(`note ticks
            `),T=P("input"),k=R(),L=P("button"),z=X(q),H=R(),J=P("div"),Z=P("canvas"),F=R(),te=P("div"),ne=P("button"),ne.textContent="reset",re=R(),Q=P("button"),Q.textContent="export",Y=R(),D=P("button"),D.textContent="import",V=R(),W=P("input"),U=R(),fe=P("button"),fe.textContent="metronome",N(i,"class","explanation"),N(p,"type","number"),N(p,"step","1"),N(p,"min","10"),N(p,"max","400"),_t(p,"width","55px"),N(d,"title","The tempo in beats per minute (bpm)"),e[3]===void 0&&bt(()=>e[15].call(E)),N(v,"title","The whole circle is one bar, you can choose to divide it by 3 or 4 quarter notes and then further sub-divide it into, for example, triplets"),e[4]===void 0&&bt(()=>e[16].call(y)),N(M,"title","The width of each bar in rhythmic units. For example, each bin could be a 32nd note wide."),N(C,"type","number"),N(C,"step","0.01"),N(C,"min","-2"),N(C,"max","2"),_t(C,"width","55px"),N(A,"title","Shift all notes by an amount in seconds"),N(T,"type","number"),N(T,"step","1"),N(T,"min","0"),N(T,"max","100"),_t(T,"width","55px"),N(O,"title","The number of most recent notes that are shown as ticks."),N(L,"title","Toggle between bars and area"),N(f,"class","control"),_t(Z,"width",Ji+"px"),_t(Z,"height",Bu+"px"),N(J,"class","visualization"),N(ne,"title","Clear all played notes"),N(Q,"title","Export all data and settings"),N(D,"title","Export all data and settings"),N(W,"type","file"),N(W,"id","file-input"),_t(W,"display","none"),N(fe,"title","Toggle metronome (click)"),N(te,"class","control"),N(t,"class","demo")},m(de,ke){le(de,t,ke),b(t,n),b(t,r),b(t,i),b(i,a),b(i,s),b(i,l),b(i,c),b(i,u),b(t,h),b(t,f),b(f,d),b(d,m),b(d,p),ce(p,e[2]),b(f,_),b(f,v),b(v,g),b(v,E);for(let xe=0;xe<se.length;xe+=1)se[xe]&&se[xe].m(E,null);Le(E,e[3],!0),b(f,w),b(f,M),b(M,x),b(M,y);for(let xe=0;xe<4;xe+=1)Ae[xe]&&Ae[xe].m(y,null);Le(y,e[4],!0),b(f,S),b(f,A),b(A,$),b(A,C),ce(C,e[5]),b(f,B),b(f,O),b(O,G),b(O,T),ce(T,e[6]),b(f,k),b(f,L),b(L,z),b(t,H),b(t,J),b(J,Z),e[20](Z),b(t,F),b(t,te),b(te,ne),b(te,re),b(te,Q),b(te,Y),b(te,D),b(te,V),b(te,W),b(te,U),b(te,fe),ue||(ie=[K(p,"input",e[14]),K(p,"change",e[11]),K(E,"change",e[15]),K(E,"change",e[11]),K(y,"change",e[16]),K(y,"change",e[11]),K(C,"input",e[17]),K(C,"change",e[11]),K(T,"input",e[18]),K(T,"change",e[11]),K(L,"click",e[19]),K(ne,"click",e[21]),K(Q,"click",e[12]),K(D,"click",e[22]),K(W,"input",e[13]),K(fe,"click",e[23])],ue=!0)},p(de,ke){if(ke[0]&2&&o!==(o=de[1].length+"")&&Se(s,o),ke[0]&64&&Se(c,de[6]),ke[0]&4&&_e(p.value)!==de[2]&&ce(p,de[2]),ke[0]&512){he=Te(de[9]);let xe;for(xe=0;xe<he.length;xe+=1){const an=Km(de,he,xe);se[xe]?se[xe].p(an,ke):(se[xe]=Zm(an),se[xe].c(),se[xe].m(E,null))}for(;xe<se.length;xe+=1)se[xe].d(1);se.length=he.length}ke[0]&520&&Le(E,de[3]),ke[0]&16&&Le(y,de[4]),ke[0]&32&&_e(C.value)!==de[5]&&ce(C,de[5]),ke[0]&64&&_e(T.value)!==de[6]&&ce(T,de[6]),ke[0]&128&&q!==(q=de[7]?"area":"bars")&&Se(z,q)},i:oe,o:oe,d(de){de&&ae(t),tt(se,de),tt(Ae,de),e[20](null),ue=!1,Fe(ie)}}}let Ji=1e3,Bu=1e3;function F$(e,t,n){const r=["4:2","4:3","4:4","4:5","3:2","3:3","3:4","3:5"],i=Math.PI*2;let a,o=new ah,s=[],l=120,c=r[0],u=64,h=0,f=1,d=!1,m=0,p=[];const _=()=>{n(1,s=[]),I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((T,k)=>{console.log(`MIDI device ${k}: ${T.name}`),T.addListener("noteon",v)}),n(1,s=[...I.inputs]))},v=T=>{p.length===0&&(m=T.timestamp);const k=(T.timestamp-m)/1e3;p.push(k),g()},g=()=>{const T=Ji/2,k=Bu/2,L=Ji*.4,q=L*.8,z=L*.9,H=L*1.1,J=L*.95,Z=Math.PI/2,F=a.getContext("2d"),te=window.devicePixelRatio,ne=a.getBoundingClientRect();n(0,a.width=ne.width*te,a),n(0,a.height=ne.height*te,a),F.scale(te,te),n(0,a.style.width=`${ne.width}px`,a),n(0,a.style.height=`${ne.height}px`,a),F.clearRect(0,0,Ji,Bu);const[re,Q]=c.split(":").map(ie=>+ie),Y=Xn(l)*re,D=p.map(ie=>ie+h),W=D.map(ie=>ie%Y).map(ie=>ie/Y*i),U=Ji*.08;if(!d){F.fillStyle="#f8f8f8",F.strokeStyle="#aaa";const ie=u*re/4,se=hw().domain([0,i]).thresholds(Me(ie).map(Ae=>Ae/ie*i))(W),je=Ge(se,Ae=>Ae.length);for(const Ae of se){if(Ae.length===0)continue;const de=Ae.length/je*U,ke=L+de,xe=Ae.x0-Z,an=Math.cos(xe),Ft=Math.sin(xe),ur=Ae.x1-Z,En=Math.cos(ur),ye=Math.sin(ur);F.beginPath(),F.moveTo(T+an*L,k+Ft*L),F.lineTo(T+an*ke,k+Ft*ke),F.arc(T,k,ke,xe,ur),F.lineTo(T+En*L,k+ye*L),F.closePath(),F.fill(),F.stroke()}}if(d&&W.length>0){let ie=4/u;const Ae=R$(W,{bandwidth:ie,pad:.1,bins:360}).bandwidth(ie),de=Ge([...Ae],xe=>xe.y);console.log([...Ae]),F.beginPath();let ke=0;for(const xe of Ae){console.log(ke++,xe);const an=xe.x-Z,Ft=L+xe.y/de*U,ur=Math.cos(an),En=Math.sin(an);F.lineTo(T+ur*Ft,k+En*Ft)}F.closePath(),F.fillStyle="#e4f0fa",F.fill(),F.strokeStyle="#aaa",F.stroke()}if(f>0){F.lineWidth=3;const ie=se=>_a(1-se),he=D.slice(-f);for(const[se,je]of he.entries()){const Ae=je/Y*i-Z,de=Math.cos(Ae),ke=Math.sin(Ae);F.strokeStyle=ie(se/he.length),F.beginPath(),F.moveTo(T+de*L,k+ke*L),F.lineTo(T+de*H,k+ke*H),F.stroke()}}F.strokeStyle="#aaa",F.fillStyle="white",WT(F,T,k,L),F.lineWidth=2,F.fill(),F.stroke();const fe=Me(re).map(ie=>i/re*ie-Z),ue=Me(re*Q).map(ie=>i/(re*Q)*ie-Z);F.beginPath(),F.lineWidth=2;for(const ie of fe){const he=Math.cos(ie),se=Math.sin(ie);F.moveTo(T+he*q,k+se*q),F.lineTo(T+he*J,k+se*J)}F.stroke(),F.lineWidth=1,F.beginPath();for(const ie of ue){const he=Math.cos(ie),se=Math.sin(ie);F.moveTo(T+he*z,k+se*z),F.lineTo(T+he*J,k+se*J)}F.stroke()},E=()=>{const k=JSON.stringify({tempo:l,grid:c,binNote:u,adjustTime:h,noteTickLimit:f,noteOnTimes:p,showKde:d},void 0,2),L=new Blob([k],{type:"text/plain;charset=utf-8"});uo(L,"live-subdivision.json")},w=async T=>{const L=await T.target.files[0].text(),q=JSON.parse(L);(p.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,l=q.tempo),n(3,c=q.grid),n(4,u=q.binNote),n(5,h=q.adjustTime),n(6,f=q.noteTickLimit),n(8,p=q.noteOnTimes),n(7,d=q.showKde??!1),g())};st(()=>{I.enable().then(_).catch(T=>alert(T)),g()}),lt(()=>{o.stop();for(const T of I.inputs)T.removeListener()});function M(){l=_e(this.value),n(2,l)}function x(){c=Yt(this),n(3,c),n(9,r)}function y(){u=Yt(this),n(4,u)}function S(){h=_e(this.value),n(5,h)}function A(){f=_e(this.value),n(6,f)}const $=()=>{n(7,d=!d),g()};function C(T){ot[T?"unshift":"push"](()=>{a=T,n(0,a)})}return[a,s,l,c,u,h,f,d,p,r,o,g,E,w,M,x,y,S,A,$,C,()=>{confirm("Reset played notes?")&&(n(8,p=[]),g())},()=>document.querySelector("#file-input").click(),()=>{o.toggle(l,+c.split(":")[0])}]}class G$ extends He{constructor(t){super(),qe(this,t,F$,O$,Ue,{},null,[-1,-1])}}function U$(e,t,n){const r=e.slice();return r[21]=t[n],r}function q$(e,t,n){const r=e.slice();return r[21]=t[n],r}function H$(e){let t;return{c(){t=P("option"),t.textContent=`1/${e[21]} note`,t.__value=e[21],ce(t,t.__value)},m(n,r){le(n,t,r)},p:oe,d(n){n&&ae(t)}}}function z$(e){let t;return{c(){t=P("option"),t.textContent=`1/${e[21]} note`,t.__value=e[21],ce(t,t.__value)},m(n,r){le(n,t,r)},p:oe,d(n){n&&ae(t)}}}function Jm(e){let t,n,r=e[7].toFixed(1)+"",i,a;return{c(){t=P("div"),n=X("estimated: "),i=X(r),a=X(" bpm"),N(t,"class","svelte-1ruiyqw")},m(o,s){le(o,t,s),b(t,n),b(t,i),b(t,a)},p(o,s){s&128&&r!==(r=o[7].toFixed(1)+"")&&Se(i,r)},d(o){o&&ae(t)}}}function V$(e){let t,n,r,i,a,o=e[1].length+"",s,l,c,u,h,f,d,m,p,_,v,g,E,w,M,x,y,S,A,$,C,B,O,G,T,k,L,q,z,H,J,Z,F,te,ne,re=Te([16,32,64,128]),Q=[];for(let W=0;W<4;W+=1)Q[W]=H$(q$(e,re,W));let Y=Te([16,32,64,128]),D=[];for(let W=0;W<4;W+=1)D[W]=z$(U$(e,Y,W));let V=e[7]&&Jm(e);return{c(){t=P("main"),n=P("h2"),n.textContent="Tempo Drift",r=R(),i=P("p"),a=X("Connect a MIDI instrument (currently "),s=X(o),l=X(` connected), choose
        your tempo, and start playing. The time between two note onsets will be shown
        as a bar, so you can see how well you still hit, for example, quarter notes
        after playing for some time. Bar heights are either exact or rounded to the
        closest, for example, 64th note (binning dropdown). You can filter very short
        inter-note times, which happen whan playing two notes at roughly the same
        time as in a chord.`),c=R(),u=P("div"),h=P("label"),f=X(`tempo
            `),d=P("input"),m=R(),p=P("label"),_=X(`binning
            `),v=P("select"),g=P("option"),g.textContent="off";for(let W=0;W<4;W+=1)Q[W].c();E=R(),w=P("label"),M=X(`filtering
            `),x=P("select"),y=P("option"),y.textContent="off";for(let W=0;W<4;W+=1)D[W].c();S=R(),A=P("label"),$=X(`bars
            `),C=P("input"),B=R(),O=P("div"),G=R(),V&&V.c(),T=R(),k=P("div"),L=P("button"),L.textContent="reset",q=R(),z=P("button"),z.textContent="export",H=R(),J=P("button"),J.textContent="import",Z=R(),F=P("input"),N(i,"class","explanation"),N(d,"type","number"),N(d,"step","1"),N(d,"min","10"),N(d,"max","400"),_t(d,"width","55px"),N(h,"title","The tempo in beats per minute (bpm)"),g.__value=0,ce(g,g.__value),e[3]===void 0&&bt(()=>e[12].call(v)),N(p,"title","You can change between seeing exact bar heights and binned (rounded) heights."),y.__value=0,ce(y,y.__value),e[4]===void 0&&bt(()=>e[13].call(x)),N(w,"title","You can filter out bars that are shorter than a given note duration."),N(C,"type","number"),N(C,"step","25"),N(C,"min","25"),N(C,"max","1000"),_t(C,"width","55px"),N(A,"title","The number of most recent notes that are shown as bars."),N(u,"class","control svelte-1ruiyqw"),N(O,"class","visualization svelte-1ruiyqw"),N(L,"title","Clear all played notes"),N(z,"title","Export all data and settings"),N(J,"title","Export all data and settings"),N(F,"type","file"),N(F,"id","file-input"),_t(F,"display","none"),N(k,"class","control svelte-1ruiyqw"),N(t,"class","demo")},m(W,U){le(W,t,U),b(t,n),b(t,r),b(t,i),b(i,a),b(i,s),b(i,l),b(t,c),b(t,u),b(u,h),b(h,f),b(h,d),ce(d,e[2]),b(u,m),b(u,p),b(p,_),b(p,v),b(v,g);for(let fe=0;fe<4;fe+=1)Q[fe]&&Q[fe].m(v,null);Le(v,e[3],!0),b(u,E),b(u,w),b(w,M),b(w,x),b(x,y);for(let fe=0;fe<4;fe+=1)D[fe]&&D[fe].m(x,null);Le(x,e[4],!0),b(u,S),b(u,A),b(A,$),b(A,C),ce(C,e[5]),b(t,B),b(t,O),e[15](O),b(t,G),V&&V.m(t,null),b(t,T),b(t,k),b(k,L),b(k,q),b(k,z),b(k,H),b(k,J),b(k,Z),b(k,F),te||(ne=[K(d,"input",e[11]),K(d,"change",e[8]),K(v,"change",e[12]),K(v,"change",e[8]),K(x,"change",e[13]),K(x,"change",e[8]),K(C,"input",e[14]),K(C,"change",e[8]),K(L,"click",e[16]),K(z,"click",e[9]),K(J,"click",e[17]),K(F,"input",e[10])],te=!0)},p(W,[U]){U&2&&o!==(o=W[1].length+"")&&Se(s,o),U&4&&_e(d.value)!==W[2]&&ce(d,W[2]),U&8&&Le(v,W[3]),U&16&&Le(x,W[4]),U&32&&_e(C.value)!==W[5]&&ce(C,W[5]),W[7]?V?V.p(W,U):(V=Jm(W),V.c(),V.m(t,T)):V&&(V.d(1),V=null)},i:oe,o:oe,d(W){W&&ae(t),tt(Q,W),tt(D,W),e[15](null),V&&V.d(),te=!1,Fe(ne)}}}let j$=1e3,Y$=600;function W$(e,t,n){let r,i=[],a=120,o=64,s=0,l=50,c=0,u=[],h=0;const f=()=>{n(1,i=[]),I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((S,A)=>{console.log(`MIDI device ${A}: ${S.name}`),S.addListener("noteon",d)}),n(1,i=[...I.inputs]))},d=S=>{u.length===0&&(c=S.timestamp);const A=(S.timestamp-c)/1e3;u.push(A),m()},m=()=>{const S=Xn(a),A=S/4,$=S/2,C=S*2,B=S*4,O=[0,A,$,S,C],G=["0","𝅘𝅥𝅯","𝅘𝅥𝅮","𝅘𝅥","𝅗𝅥"];let T=u.map((z,H)=>H===0?0:z-u[H-1]);if(s!==0){const z=B/s;T=T.filter(H=>H>=z)}let k=T;if(o!==0){const z=B/o;k=T.map(H=>Math.round(H/z)*z)}const L=Ke({width:j$,height:Y$,marginLeft:35,marginRight:1,x:{axis:!1},y:{ticks:O,tickFormat:z=>{const H=O.indexOf(z);return G[H]},domain:[0,C*1.1],tickSize:0},marks:[Tl(k.slice(-l),{x:(z,H)=>H,y:z=>z,fill:"#ddd",inset:0,dx:.5}),Lt(O,{stroke:"#888"})]});n(0,r.textContent="",r),r.appendChild(L);const q=T.filter(z=>z>.8*A&&z<1.25*S).slice(-24).map(z=>z<.6*S?z*2:z>1.5*S?z/2:z);n(7,h=h$(F1(q)))},p=()=>{const A=JSON.stringify({tempo:a,binNote:o,filterNote:s,barLimit:l,noteOnTimes:u},void 0,2),$=new Blob([A],{type:"text/plain;charset=utf-8"});uo($,"tempo-drift.json")},_=async S=>{const $=await S.target.files[0].text(),C=JSON.parse($);(u.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,a=C.tempo),n(3,o=C.binNote),n(4,s=C.filterNote),n(5,l=C.barLimit),n(6,u=C.noteOnTimes),m())};st(()=>{I.enable().then(f).catch(S=>alert(S)),m()}),lt(()=>{for(const S of I.inputs)S.removeListener()});function v(){a=_e(this.value),n(2,a)}function g(){o=Yt(this),n(3,o)}function E(){s=Yt(this),n(4,s)}function w(){l=_e(this.value),n(5,l)}function M(S){ot[S?"unshift":"push"](()=>{r=S,n(0,r)})}return[r,i,a,o,s,l,u,h,m,p,_,v,g,E,w,M,()=>{confirm("Reset played notes?")&&(n(6,u=[]),m())},()=>document.querySelector("#file-input").click()]}class X$ extends He{constructor(t){super(),qe(this,t,W$,V$,Ue,{})}}function K$(e){let t,n,r,i,a,o=e[1].length+"",s,l,c,u,h,f,d,m,p=e[2]?"on":"off",_,v,g,E,w,M,x,y,S,A,$,C,B,O,G,T,k,L;return{c(){t=P("main"),n=P("h2"),n.textContent="Dynamics",r=R(),i=P("p"),a=X("Connect a MIDI instrument (currently "),s=X(o),l=X(` connected) and
        start playing. The loudness of each note will be shown as a bar. Bar heights
        are either exact or rounded to the
        `),c=P("a"),c.textContent="closest rough dynamics",u=X(", for example a forte."),h=R(),f=P("div"),d=P("button"),m=X("binning is "),_=X(p),v=R(),g=P("label"),E=X(`bars
            `),w=P("input"),M=R(),x=P("div"),y=R(),S=P("div"),A=P("button"),A.textContent="reset",$=R(),C=P("button"),C.textContent="export",B=R(),O=P("button"),O.textContent="import",G=R(),T=P("input"),N(c,"href","https://en.wikipedia.org/wiki/Dynamics_(music)"),N(i,"class","explanation"),N(d,"title","You can change between seeing exact bar heights and binned (rounded) heights."),N(w,"type","number"),N(w,"step","25"),N(w,"min","25"),N(w,"max","1000"),_t(w,"width","55px"),N(g,"title","The number of most recent notes that are shown as bars."),N(f,"class","control svelte-1p166uy"),N(x,"class","visualization svelte-1p166uy"),N(A,"title","Clear all played notes"),N(C,"title","Export all data and settings"),N(O,"title","Export all data and settings"),N(T,"type","file"),N(T,"id","file-input"),_t(T,"display","none"),N(S,"class","control svelte-1p166uy"),N(t,"class","demo")},m(q,z){le(q,t,z),b(t,n),b(t,r),b(t,i),b(i,a),b(i,s),b(i,l),b(i,c),b(i,u),b(t,h),b(t,f),b(f,d),b(d,m),b(d,_),b(f,v),b(f,g),b(g,E),b(g,w),ce(w,e[3]),b(t,M),b(t,x),e[10](x),b(t,y),b(t,S),b(S,A),b(S,$),b(S,C),b(S,B),b(S,O),b(S,G),b(S,T),k||(L=[K(d,"click",e[8]),K(w,"input",e[9]),K(w,"change",e[5]),K(A,"click",e[11]),K(C,"click",e[6]),K(O,"click",e[12]),K(T,"input",e[7])],k=!0)},p(q,[z]){z&2&&o!==(o=q[1].length+"")&&Se(s,o),z&4&&p!==(p=q[2]?"on":"off")&&Se(_,p),z&8&&_e(w.value)!==q[3]&&ce(w,q[3])},i:oe,o:oe,d(q){q&&ae(t),e[10](null),k=!1,Fe(L)}}}let Z$=1e3,J$=600;function Q$(e,t,n){let r,i=[];const o=new Map([[0,"silent"],[16,"ppp"],[32,"pp"],[48,"p"],[64,"mp"],[80,"mf"],[96,"f"],[112,"ff"],[127,"fff"]]);let s=!0,l=50,c=[];const u=()=>{console.log("MIDI enabled"),n(1,i=[]),I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((w,M)=>{console.log(`MIDI device ${M}: ${w.name}`),w.addListener("noteon",h)}),n(1,i=[...I.inputs]))},h=w=>{c.push(w.rawVelocity),f()},f=()=>{console.log("draw");let w=c;s&&(w=c.map(y=>{for(const S of o.keys())if(y<=S)return S}));const M=[...o.keys()],x=Ke({width:Z$,height:J$,marginLeft:45,marginRight:1,x:{axis:!1},y:{ticks:M,tickFormat:y=>o.get(y),domain:[0,128],tickSize:0},marks:[Tl(w.slice(-l),{x:(y,S)=>S,y:y=>y,fill:"#ddd",inset:0,dx:.5}),Lt(M,{stroke:"#888"})]});n(0,r.textContent="",r),r.appendChild(x)},d=()=>{const M=JSON.stringify({isBinning:s,barLimit:l,noteVelocities:c},void 0,2),x=new Blob([M],{type:"text/plain;charset=utf-8"});uo(x,"tempo-drift.json")},m=async w=>{const x=await w.target.files[0].text(),y=JSON.parse(x);(c.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,s=y.isBinning),n(3,l=y.barLimit),n(4,c=y.noteVelocities),f())};st(()=>{I.enable().then(u).catch(w=>alert(w)),f()}),lt(()=>{for(const w of I.inputs)w.removeListener()});const p=()=>{n(2,s=!s),f()};function _(){l=_e(this.value),n(3,l)}function v(w){ot[w?"unshift":"push"](()=>{r=w,n(0,r)})}return[r,i,s,l,c,f,d,m,p,_,v,()=>{confirm("Reset played notes?")&&(n(4,c=[]),f())},()=>document.querySelector("#file-input").click()]}class ek extends He{constructor(t){super(),qe(this,t,Q$,K$,Ue,{})}}function tk(e){let t,n,r,i,a,o=e[1].length+"",s,l,c,u,h,f,d=e[2]?"hidden":"shown",m,p,_,v,g=e[3]?"on":"off",E,w,M,x,y=e[4]?"on":"off",S,A,$,C,B,O,G,T,k,L,q,z,H,J;return{c(){t=P("main"),n=P("h2"),n.textContent="Improvisation Intervals",r=R(),i=P("p"),a=X("Connect a MIDI instrument (currently "),s=X(o),l=X(` connected) and
        start playing. The bar chart below shows how often you played each interval:
        when you go up in pitch, the bar of the played interval in the top half will
        increase. If you go down, it will show up in the bottom half. Colors denote
        the type of interval, so you can quickly see if you play, for example, more
        major or minor intervals.`),c=R(),u=P("div"),h=P("button"),f=X("unison "),m=X(d),p=R(),_=P("button"),v=X("colors "),E=X(g),w=R(),M=P("button"),x=X("semitones "),S=X(y),A=R(),$=P("div"),C=R(),B=P("div"),O=P("button"),O.textContent="reset",G=R(),T=P("button"),T.textContent="export",k=R(),L=P("button"),L.textContent="import",q=R(),z=P("input"),N(i,"class","explanation"),N(h,"title","Toggle filtering unison intervals"),N(_,"title","Use colors for interval types"),N(M,"title","Show number of semitones instead of musical names for intervals on the y axis"),N(u,"class","control svelte-13613lz"),N($,"class","visualization svelte-13613lz"),N(O,"title","Clear all played notes"),N(T,"title","Export all data and settings"),N(L,"title","Export all data and settings"),N(z,"type","file"),N(z,"id","file-input"),_t(z,"display","none"),N(B,"class","control svelte-13613lz"),N(t,"class","demo")},m(Z,F){le(Z,t,F),b(t,n),b(t,r),b(t,i),b(i,a),b(i,s),b(i,l),b(t,c),b(t,u),b(u,h),b(h,f),b(h,m),b(u,p),b(u,_),b(_,v),b(_,E),b(u,w),b(u,M),b(M,x),b(M,S),b(t,A),b(t,$),e[12]($),b(t,C),b(t,B),b(B,O),b(B,G),b(B,T),b(B,k),b(B,L),b(B,q),b(B,z),H||(J=[K(h,"click",e[9]),K(_,"click",e[10]),K(M,"click",e[11]),K(O,"click",e[13]),K(T,"click",e[7]),K(L,"click",e[14]),K(z,"input",e[8])],H=!0)},p(Z,[F]){F&2&&o!==(o=Z[1].length+"")&&Se(s,o),F&4&&d!==(d=Z[2]?"hidden":"shown")&&Se(m,d),F&8&&g!==(g=Z[3]?"on":"off")&&Se(E,g),F&16&&y!==(y=Z[4]?"on":"off")&&Se(S,y)},i:oe,o:oe,d(Z){Z&&ae(t),e[12](null),H=!1,Fe(J)}}}let nk=1e3,rk=650;function ik(e,t,n){let r,i=[],a=!0,o=!1,s=!1,l=[];const c=[{semitones:0,name:"Unison",short:"P1",type:"perfect"},{semitones:1,name:"Minor 2nd",short:"m2",type:"minor"},{semitones:2,name:"Major 2nd",short:"M2",type:"major"},{semitones:3,name:"Minor 3rd",short:"m3",type:"minor"},{semitones:4,name:"Major 3rd",short:"M3",type:"major"},{semitones:5,name:"Perfect 4th",short:"P4",type:"perfect"},{semitones:6,name:"Augmented 4th",short:"A4",type:"tritone"},{semitones:7,name:"Perfect 5th",short:"P5",type:"perfect"},{semitones:8,name:"Minor 6th",short:"m6",type:"minor"},{semitones:9,name:"Major 6th",short:"M6",type:"major"},{semitones:10,name:"Minor 7th",short:"m7",type:"minor"},{semitones:11,name:"Major 7th",short:"M7",type:"major"},{semitones:12,name:"Perfect 8ve",short:"P8",type:"perfect"}],u=()=>{n(1,i=[]),I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((M,x)=>{console.log(`MIDI device ${x}: ${M.name}`),M.addListener("noteon",h)}),n(1,i=[...I.inputs]))},h=M=>{const x={number:M.note.number,velocity:M.rawVelocity,time:M.timestamp};l.push(x),f()},f=()=>{let M=l.map((S,A)=>A===0?0:S.number-l[A-1].number);a&&(M=M.filter(S=>S!==0)),M=M.map(S=>{if(Math.abs(S)<=12)return S;{const A=S>0?12:-12;for(;Math.abs(S)>12;)S-=A;return S}});const x=D1(M,S=>S).map(([S,A])=>({interval:S,count:A.length})),y=Ke({width:nk,height:rk,marginLeft:120,marginRight:10,color:{legend:o,domain:["minor","major","perfect","tritone"],range:["#7da2e8","#ed796a","gold","#ccc"]},x:{},y:{tickFormat:s?S=>S:S=>S>=0?c[S].name:c[-S].name,domain:Me(-12,13,1),label:`🡸 going down ${" ".repeat(75)} going up 🡺     `,reverse:!0},marks:[Lt([-12,0,12],{stroke:"#888",strokeWidth:1.5}),Cl(x,{x:"count",y:"interval",fill:o?S=>c[Math.abs(S.interval)].type:"#ddd",dx:.5,rx:4})]});n(0,r.textContent="",r),r.appendChild(y)},d=()=>{const x=JSON.stringify({filterUnison:a,useColors:o,useSemitones:s,notes:l},void 0,2),y=new Blob([x],{type:"text/plain;charset=utf-8"});uo(y,"tempo-drift.json")},m=async M=>{const y=await M.target.files[0].text(),S=JSON.parse(y);(l.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,a=S.filterUnison),n(3,o=S.useColors),n(4,s=S.useSemitones),n(5,l=S.notes),f())};st(()=>{I.enable().then(u).catch(M=>alert(M)),f()}),lt(()=>{for(const M of I.inputs)M.removeListener()});const p=()=>{n(2,a=!a),f()},_=()=>{n(3,o=!o),f()},v=()=>{n(4,s=!s),f()};function g(M){ot[M?"unshift":"push"](()=>{r=M,n(0,r)})}return[r,i,a,o,s,l,f,d,m,p,_,v,g,()=>{confirm("Reset played notes?")&&(n(5,l=[]),f())},()=>document.querySelector("#file-input").click()]}class ak extends He{constructor(t){super(),qe(this,t,ik,tk,Ue,{})}}function Qm(e,t,n){const r=e.slice();return r[21]=t[n],r}function e1(e,t,n){const r=e.slice();return r[24]=t[n],r}function t1(e){let t,n=e[24]+"",r;return{c(){t=P("option"),r=X(n),t.__value=e[24],ce(t,t.__value)},m(i,a){le(i,t,a),b(t,r)},p:oe,d(i){i&&ae(t)}}}function n1(e){let t,n=e[21]+"",r;return{c(){t=P("option"),r=X(n),t.__value=e[21],ce(t,t.__value)},m(i,a){le(i,t,a),b(t,r)},p:oe,d(i){i&&ae(t)}}}function ok(e){let t,n,r,i,a,o=e[1].length+"",s,l,c,u,h,f,d,m,p,_,v,g,E,w=e[4]?"on":"off",M,x,y,S,A=e[5]?"shown":"hidden",$,C,B,O,G,T,k,L,q,z,H,J,Z,F,te=Te(e[7]),ne=[];for(let Y=0;Y<te.length;Y+=1)ne[Y]=t1(e1(e,te,Y));let re=Te(e[8]),Q=[];for(let Y=0;Y<re.length;Y+=1)Q[Y]=n1(Qm(e,re,Y));return{c(){t=P("main"),n=P("h2"),n.textContent="Improvisation Intervals",r=R(),i=P("p"),a=X("Connect a MIDI instrument (currently "),s=X(o),l=X(` connected) and
        start playing. The bar chart below shows how often you played each scale
        degree.`),c=R(),u=P("div"),h=P("label"),f=X(`scale
            `),d=P("select");for(let Y=0;Y<ne.length;Y+=1)ne[Y].c();m=R(),p=P("select");for(let Y=0;Y<Q.length;Y+=1)Q[Y].c();_=R(),v=P("div"),g=P("button"),E=X("colors "),M=X(w),x=R(),y=P("button"),S=X("non-scale notes "),$=X(A),C=R(),B=P("div"),O=R(),G=P("div"),T=P("button"),T.textContent="reset",k=R(),L=P("button"),L.textContent="export",q=R(),z=P("button"),z.textContent="import",H=R(),J=P("input"),N(i,"class","explanation"),e[2]===void 0&&bt(()=>e[12].call(d)),e[3]===void 0&&bt(()=>e[13].call(p)),N(u,"class","control svelte-13613lz"),N(g,"title","Use colors for root, in-scale, outside-scale"),N(y,"title","Show notes outside the scale"),N(v,"class","control svelte-13613lz"),N(B,"class","visualization svelte-13613lz"),N(T,"title","Clear all played notes"),N(L,"title","Export all data and settings"),N(z,"title","Export all data and settings"),N(J,"type","file"),N(J,"id","file-input"),_t(J,"display","none"),N(G,"class","control svelte-13613lz"),N(t,"class","demo")},m(Y,D){le(Y,t,D),b(t,n),b(t,r),b(t,i),b(i,a),b(i,s),b(i,l),b(t,c),b(t,u),b(u,h),b(h,f),b(h,d);for(let V=0;V<ne.length;V+=1)ne[V]&&ne[V].m(d,null);Le(d,e[2],!0),b(h,m),b(h,p);for(let V=0;V<Q.length;V+=1)Q[V]&&Q[V].m(p,null);Le(p,e[3],!0),b(t,_),b(t,v),b(v,g),b(g,E),b(g,M),b(v,x),b(v,y),b(y,S),b(y,$),b(t,C),b(t,B),e[16](B),b(t,O),b(t,G),b(G,T),b(G,k),b(G,L),b(G,q),b(G,z),b(G,H),b(G,J),Z||(F=[K(d,"change",e[12]),K(d,"change",e[9]),K(p,"change",e[13]),K(p,"change",e[9]),K(g,"click",e[14]),K(y,"click",e[15]),K(T,"click",e[17]),K(L,"click",e[10]),K(z,"click",e[18]),K(J,"input",e[11])],Z=!0)},p(Y,[D]){if(D&2&&o!==(o=Y[1].length+"")&&Se(s,o),D&128){te=Te(Y[7]);let V;for(V=0;V<te.length;V+=1){const W=e1(Y,te,V);ne[V]?ne[V].p(W,D):(ne[V]=t1(W),ne[V].c(),ne[V].m(d,null))}for(;V<ne.length;V+=1)ne[V].d(1);ne.length=te.length}if(D&132&&Le(d,Y[2]),D&256){re=Te(Y[8]);let V;for(V=0;V<re.length;V+=1){const W=Qm(Y,re,V);Q[V]?Q[V].p(W,D):(Q[V]=n1(W),Q[V].c(),Q[V].m(p,null))}for(;V<Q.length;V+=1)Q[V].d(1);Q.length=re.length}D&264&&Le(p,Y[3]),D&16&&w!==(w=Y[4]?"on":"off")&&Se(M,w),D&32&&A!==(A=Y[5]?"shown":"hidden")&&Se($,A)},i:oe,o:oe,d(Y){Y&&ae(t),tt(ne,Y),tt(Q,Y),e[16](null),Z=!1,Fe(F)}}}let sk=1e3,lk=650;function ck(e,t,n){let r,i=[],a="A",o="minor pentatonic",s=!0,l=!0,c=[];const u=e_,h=pu.names(),f=()=>{n(1,i=[]),I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((S,A)=>{console.log(`MIDI device ${A}: ${S.name}`),S.addListener("noteon",d)}),n(1,i=[...I.inputs]))},d=S=>{const A={number:S.note.number,velocity:S.rawVelocity,time:S.timestamp};c.push(A),m()},m=()=>{const S=u.indexOf(a),A=pu.get(`${a} ${o}`),$=A.notes.map((k,L)=>{const q=u.indexOf(k);let z=q-S;return z=z>=0?z:z+12,{name:k,chroma:q,interval:A.intervals[L],degree:L,offset:z}}),C=new Set($.map(k=>k.offset)),O=c.map(k=>k.number%12).map(k=>{const L=k-S;return L>=0?L:L+12}),G=D1(O,k=>k).map(([k,L])=>({value:k,count:L.length})),T=Ke({width:sk,height:lk,marginLeft:70,marginRight:10,color:{legend:s,domain:["root","scale","outside scale"],range:["#666","#aaa","#eee"]},y:{tickFormat:k=>u[(k+S)%12],domain:l?Me(0,12,1):[...C],reverse:!0,label:"notes, increasing semitones from root 🡺"},marks:[Cl(G,{x:"count",y:"value",fill:k=>s?k.value===0?"#666":C.has(k.value)?"#aaa":"#eee":"#ddd",dx:.5,rx:4})]});n(0,r.textContent="",r),r.appendChild(T)},p=()=>{const A=JSON.stringify({root:a,scale:o,useColors:s,showOutsideScale:l,notes:c},void 0,2),$=new Blob([A],{type:"text/plain;charset=utf-8"});uo($,"tempo-drift.json")},_=async S=>{const $=await S.target.files[0].text(),C=JSON.parse($);(c.length===0||confirm("Import data and overwrite currently unsaved data?"))&&(n(2,a=C.root),n(3,o=C.scale),n(4,s=C.useColors),n(5,l=C.showOutsideScale),n(6,c=C.notes),m())};st(()=>{I.enable().then(f).catch(S=>alert(S)),m()}),lt(()=>{for(const S of I.inputs)S.removeListener()});function v(){a=Yt(this),n(2,a),n(7,u)}function g(){o=Yt(this),n(3,o),n(8,h)}const E=()=>{n(4,s=!s),m()},w=()=>{n(5,l=!l),m()};function M(S){ot[S?"unshift":"push"](()=>{r=S,n(0,r)})}return[r,i,a,o,s,l,c,u,h,m,p,_,v,g,E,w,M,()=>{confirm("Reset played notes?")&&(n(6,c=[]),m())},()=>document.querySelector("#file-input").click()]}class uk extends He{constructor(t){super(),qe(this,t,ck,ok,Ue,{})}}function fk(e){let t,n,r,i,a,o,s,l,c,u,h,f,d;return{c(){t=P("main"),n=P("h2"),n.textContent="Fretboard Heatmap",r=R(),i=P("p"),i.textContent=`Connect a MIDI guitar and start playing. The heatmap below shows how
        often you played each fretboard position.`,a=R(),o=P("div"),o.innerHTML="",s=R(),l=P("div"),c=R(),u=P("div"),h=P("button"),h.textContent="reset",N(i,"class","explanation"),N(o,"class","control"),N(l,"class","visualization"),N(h,"title","Clear all played notes"),N(u,"class","control"),N(t,"class","demo")},m(m,p){le(m,t,p),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(t,s),b(t,l),e[3](l),b(t,c),b(t,u),b(u,h),f||(d=K(h,"click",e[4]),f=!0)},p:oe,i:oe,o:oe,d(m){m&&ae(t),e[3](null),f=!1,d()}}}let r1=1e3,hk=280,i1=6,xc=24;function dk(e,t,n){let r=[64,59,55,50,45,40],i,a=[];const o=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((h,f)=>{console.log(`MIDI device ${f}: ${h.name}`),h.addListener("noteon",s)}),[...I.inputs])},s=h=>{const f=h.message.channel-1,d={number:h.note.number,velocity:h.rawVelocity,time:h.timestamp,channel:h.message.channel,string:f,fret:h.note.number-r[f]};a.push(d),l()},l=()=>{const h=r.map(bn.fromMidiSharps),f=a.map(p=>{const _=p.channel-1;return{...p,string:_,fret:p.number-r[_]}}),d=(r1-100)/25,m=Ke({width:r1,height:hk,marginLeft:60,marginBottom:50,padding:0,x:{domain:Me(0,xc+1),ticks:Me(0,xc+1),tickSize:0},y:{domain:Me(0,i1),tickFormat:p=>h[p],tickSize:0},color:{legend:!0,marginLeft:100,width:400,scheme:"blues"},marks:[jt(Me(0,xc+1),{stroke:"#ddd",dx:d/2}),Lt(Me(0,i1),{stroke:"#ddd",strokeWidth:p=>Math.sqrt(p+1)}),Ln([3,5,7,9,15,17,19,21],{x:p=>p,y:2,dy:d/2,fill:"#ddd",r:8}),Ln([12,12,24,24],{x:p=>p,y:(p,_)=>_%2===0?1:3,dy:d/2,fill:"#ddd",r:8}),Nu(f,Ex({fill:"count"},{x:"fret",y:"string",fill:"count",inset:5,rx:"50%",tip:!0}))]});n(0,i.textContent="",i),i.appendChild(m)};st(()=>{I.enable().then(o).catch(h=>alert(h)),l()}),lt(()=>{for(const h of I.inputs)h.removeListener()});function c(h){ot[h?"unshift":"push"](()=>{i=h,n(0,i)})}return[i,a,l,c,()=>{confirm("Reset played notes?")&&(n(1,a=[]),l())}]}class mk extends He{constructor(t){super(),qe(this,t,dk,fk,Ue,{})}}function pk(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,m,p,_,v,g,E,w;return{c(){t=P("main"),n=P("h2"),n.textContent="Chord and Arpeggio Timing",r=R(),i=P("p"),i.innerHTML="",a=R(),o=P("div"),s=P("label"),l=X(`max. note distance
            `),c=P("input"),u=R(),h=P("label"),f=X(`time
            `),d=P("input"),m=R(),p=P("div"),_=R(),v=P("div"),g=P("button"),g.textContent="reset",N(i,"class","explanation"),N(c,"type","number"),N(c,"min","0.05"),N(c,"max","5"),N(c,"step","0.05"),N(s,"title","maximum distance between notes such that they still count as beloning to the same chord/arpeggio"),N(d,"type","number"),N(d,"min","10"),N(d,"max","300"),N(d,"step","10"),N(h,"title","time in seconds for past notes to be shown"),N(o,"class","control"),N(p,"class","visualization"),N(g,"title","Clear all played notes"),N(v,"class","control"),N(t,"class","demo")},m(M,x){le(M,t,x),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(s,l),b(s,c),ce(c,e[2]),b(o,u),b(o,h),b(h,f),b(h,d),ce(d,e[1]),b(t,m),b(t,p),e[8](p),b(t,_),b(t,v),b(v,g),E||(w=[K(c,"input",e[6]),K(c,"change",e[5]),K(d,"input",e[7]),K(d,"change",e[5]),K(g,"click",e[9])],E=!0)},p(M,[x]){x&4&&_e(c.value)!==M[2]&&ce(c,M[2]),x&2&&_e(d.value)!==M[1]&&ce(d,M[1])},i:oe,o:oe,d(M){M&&ae(t),e[8](null),E=!1,Fe(w)}}}let Ec=1e3,bk=400;function gk(e,t,n){let r,i=10,a=.2,o=0,s=[];const l=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((p,_)=>{console.log(`MIDI device ${_}: ${p.name}`),p.addListener("noteon",c)}),[...I.inputs])},c=p=>{const _=(p.timestamp-o)/1e3,v={number:p.note.number,velocity:p.rawVelocity,time:_,channel:p.message.channel};s.push(v),u()},u=()=>{const p=Ge(s,A=>A.time)+.5,_=p-i,v=s.filter(A=>A.end>_||A.end===void 0),g=[];let E=[];for(const A of v)E.length===0||A.time-E.at(-1).time<a?E.push(A):(g.push(E),E=[A]);g.push(E);const w=g.map(A=>ht(A,$=>$.time)),M=w.slice(1).map((A,$)=>[w[$][0],A[0]]),x=Ke({insetRight:10,width:Ec,height:bk,marginLeft:60,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[_,p]},y:{label:"MIDI Pitch",grid:!0,reverse:!0,tickFormat:A=>Aa[A].label},marks:[Nm(v,{clip:!0,x:"time",y:"number",fill:"#ddd",stroke:"#ccc"})]}),y=Ke({insetRight:10,width:Ec,height:100,marginLeft:60,marginTop:0,marginBottom:0,padding:0,x:{label:null,domain:[_,p],axis:!1},y:{ticks:[],label:"durations (s)"},marks:[Am(w,{clip:!0,x1:A=>A[0],x2:A=>A[1],y:0}),$r(w,{clip:!0,x:A=>A[0],y:0,text:(A,$)=>(A[1]-A[0]).toFixed(2),dy:10,textAnchor:"start"})]}),S=Ke({insetRight:10,width:Ec,height:100,marginLeft:60,marginBottom:40,padding:0,x:{label:"Time in seconds",domain:[_,p]},y:{ticks:[],label:"gaps (s)"},marks:[Am(M,{clip:!0,x1:A=>A[0],x2:A=>A[1],y:0}),Nm(M,{clip:!0,x:A=>A[0]}),$r(M,{clip:!0,x:A=>A[0],y:0,text:(A,$)=>(A[1]-A[0]).toFixed(2),dx:2,dy:10,textAnchor:"start"})]});n(0,r.textContent="",r),r.appendChild(x),r.appendChild(y),r.appendChild(S)};st(()=>{I.enable().then(l).catch(p=>alert(p)),n(3,o=performance.now()),u()}),lt(()=>{for(const p of I.inputs)p.removeListener()});function h(){a=_e(this.value),n(2,a)}function f(){i=_e(this.value),n(1,i)}function d(p){ot[p?"unshift":"push"](()=>{r=p,n(0,r)})}return[r,i,a,o,s,u,h,f,d,()=>{confirm("Reset played notes?")&&(n(4,s=[]),n(3,o=performance.now()))}]}class yk extends He{constructor(t){super(),qe(this,t,gk,pk,Ue,{})}}function _k(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,m,p,_;return{c(){t=P("main"),n=P("h2"),n.textContent="Keyboard Histogram",r=R(),i=P("p"),i.textContent=`Connect a MIDI keyboard and start playing. The heatmap below shows how
        often you played each keyboard key.`,a=R(),o=P("div"),s=P("label"),l=X(`number of notes
            `),c=P("input"),u=R(),h=P("div"),f=R(),d=P("div"),m=P("button"),m.textContent="reset",N(i,"class","explanation"),N(c,"type","number"),N(c,"min","0"),N(c,"max","250"),N(c,"step","1"),N(o,"class","control"),N(h,"class","visualization"),N(m,"title","Clear all played notes"),N(d,"class","control"),N(t,"class","demo")},m(v,g){le(v,t,g),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(s,l),b(s,c),ce(c,e[1]),b(t,u),b(t,h),e[5](h),b(t,f),b(t,d),b(d,m),p||(_=[K(c,"input",e[4]),K(m,"click",e[6])],p=!0)},p(v,[g]){g&2&&_e(c.value)!==v[1]&&ce(c,v[1])},i:oe,o:oe,d(v){v&&ae(t),e[5](null),p=!1,Fe(_)}}}let wk=1200,vk=280;const a1=21,o1=108;function Mk(e,t,n){let r,i=500,a=[];const o=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((d,m)=>{console.log(`MIDI device ${m}: ${d.name}`),d.addListener("noteon",s),d.addListener("controlchange",l)}),[...I.inputs])},s=d=>{const m={number:d.note.number,velocity:d.rawVelocity,time:d.timestamp,channel:d.message.channel};a.push(m),c()},l=d=>{const m=d$(d.rawValue*2,20,250);n(1,i=m),c()},c=()=>{const d=a.slice(-i),m=Ke({width:wk,height:vk,marginLeft:80,marginBottom:50,padding:0,x:{domain:Me(a1,o1),tickFormat:p=>$s(p)?"":p%12===0?`
`+bn.fromMidiSharps(p):bn.fromMidiSharps(p).slice(0,-1)},y:{},marks:[jt(C_(a1,o1),{stroke:"#ddd"}),Lt([0],{stroke:"#ddd"}),Tl(d,xx({y:"count"},{x:"number",fill:p=>$s(p.number)?"#888":"#ddd",inset:.5,rx:4,tip:!0}))]});n(0,r.textContent="",r),r.appendChild(m)};st(()=>{I.enable().then(o).catch(d=>alert(d)),c()}),lt(()=>{for(const d of I.inputs)d.removeListener()});function u(){i=_e(this.value),n(1,i)}function h(d){ot[d?"unshift":"push"](()=>{r=d,n(0,r)})}return[r,i,a,c,u,h,()=>{confirm("Reset played notes?")&&(n(2,a=[]),c())}]}class xk extends He{constructor(t){super(),qe(this,t,Mk,_k,Ue,{})}}function s1(e,t,n){const r=e.slice();return r[16]=t[n],r}function l1(e,t,n){const r=e.slice();return r[19]=t[n],r}function c1(e){let t,n=e[19]+"",r;return{c(){t=P("option"),r=X(n),t.__value=e[19],ce(t,t.__value)},m(i,a){le(i,t,a),b(t,r)},p:oe,d(i){i&&ae(t)}}}function u1(e){let t,n=e[16]+"",r;return{c(){t=P("option"),r=X(n),t.__value=e[16],ce(t,t.__value)},m(i,a){le(i,t,a),b(t,r)},p:oe,d(i){i&&ae(t)}}}function Ek(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,m,p,_,v,g,E=Te(e[4]),w=[];for(let y=0;y<E.length;y+=1)w[y]=c1(l1(e,E,y));let M=Te(e[5]),x=[];for(let y=0;y<M.length;y+=1)x[y]=u1(s1(e,M,y));return{c(){t=P("main"),n=P("h2"),n.textContent="Fretboard Improvisation Intervals",r=R(),i=P("p"),a=R(),o=P("div"),s=P("label"),l=X(`scale
            `),c=P("select");for(let y=0;y<w.length;y+=1)w[y].c();u=R(),h=P("select");for(let y=0;y<x.length;y+=1)x[y].c();f=R(),d=P("div"),m=R(),p=P("div"),_=P("button"),_.textContent="reset",N(i,"class","explanation"),e[1]===void 0&&bt(()=>e[7].call(c)),e[2]===void 0&&bt(()=>e[8].call(h)),N(o,"class","control"),N(d,"class","visualization"),N(_,"title","Clear all played notes"),N(p,"class","control"),N(t,"class","demo")},m(y,S){le(y,t,S),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(s,l),b(s,c);for(let A=0;A<w.length;A+=1)w[A]&&w[A].m(c,null);Le(c,e[1],!0),b(s,u),b(s,h);for(let A=0;A<x.length;A+=1)x[A]&&x[A].m(h,null);Le(h,e[2],!0),b(t,f),b(t,d),e[9](d),b(t,m),b(t,p),b(p,_),v||(g=[K(c,"change",e[7]),K(c,"change",e[6]),K(h,"change",e[8]),K(h,"change",e[6]),K(_,"click",e[10])],v=!0)},p(y,[S]){if(S&16){E=Te(y[4]);let A;for(A=0;A<E.length;A+=1){const $=l1(y,E,A);w[A]?w[A].p($,S):(w[A]=c1($),w[A].c(),w[A].m(c,null))}for(;A<w.length;A+=1)w[A].d(1);w.length=E.length}if(S&18&&Le(c,y[1]),S&32){M=Te(y[5]);let A;for(A=0;A<M.length;A+=1){const $=s1(y,M,A);x[A]?x[A].p($,S):(x[A]=u1($),x[A].c(),x[A].m(h,null))}for(;A<x.length;A+=1)x[A].d(1);x.length=M.length}S&36&&Le(h,y[2])},i:oe,o:oe,d(y){y&&ae(t),tt(w,y),tt(x,y),e[9](null),v=!1,Fe(g)}}}let f1=1e3,Sk=280,Sc=6,Ac=24;function Ak(e,t,n){let r,i="A",a="minor pentatonic",o=[],s=[64,59,55,50,45,40];const l=s.map(bn.fromMidiSharps),c=e_,u=pu.names(),h=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((g,E)=>{console.log(`MIDI device ${E}: ${g.name}`),g.addListener("noteon",f)}),[...I.inputs])},f=g=>{const E=g.message.channel-1,w={number:g.note.number,velocity:g.rawVelocity,time:g.timestamp,channel:g.message.channel,string:E,fret:g.note.number-s[E]};o.push(w),d()},d=()=>{const g=o.at(-1),E=[];if(g)for(let x=0;x<Sc;x++)for(let y=0;y<Ac+1;y++){let A=(s[x]+y-g.number)%12;A<0&&(A+=12),E.push({string:x,fret:y,step:A})}const w=(f1-100)/25,M=Ke({width:f1,height:Sk,marginLeft:60,marginBottom:50,padding:0,x:{domain:Me(0,Ac+1),tickSize:0},y:{domain:Me(0,Sc),tickFormat:x=>l[x]+" "+x,tickSize:0},color:{legend:!0,marginLeft:100,width:400,type:"categorical"},marks:[jt(Me(0,Ac+1),{stroke:"#ddd",dx:w/2}),Lt(Me(0,Sc),{stroke:"#ddd",strokeWidth:x=>Math.sqrt(x+1)}),Ln([3,5,7,9,15,17,19,21],{x:x=>x,y:2,dy:w/2,fill:"#ddd",r:8}),Ln([12,12,24,24],{x:x=>x,y:(x,y)=>y%2===0?1:3,dy:w/2,fill:"#ddd",r:8}),g?Nu([g],{x:"fret",y:"string",fill:"black",tip:!0,inset:5,rx:5}):null,Nu(E,{x:"fret",y:"string",fill:"step",inset:10,rx:"50%",tip:!0})]});n(0,r.textContent="",r),r.appendChild(M)};st(()=>{I.enable().then(h).catch(g=>alert(g)),d()}),lt(()=>{for(const g of I.inputs)g.removeListener()});function m(){i=Yt(this),n(1,i),n(4,c)}function p(){a=Yt(this),n(2,a),n(5,u)}function _(g){ot[g?"unshift":"push"](()=>{r=g,n(0,r)})}return[r,i,a,o,c,u,d,m,p,_,()=>{confirm("Reset played notes?")&&(n(3,o=[]),d())}]}class Pk extends He{constructor(t){super(),qe(this,t,Ak,Ek,Ue,{})}}function Nk(e,t,n){const r=e.slice();return r[30]=t[n],r}function Ck(e,t,n){const r=e.slice();return r[30]=t[n],r}function Tk(e){let t;return{c(){t=P("option"),t.textContent=`${e[30]}`,t.__value=e[30],ce(t,t.__value)},m(n,r){le(n,t,r)},p:oe,d(n){n&&ae(t)}}}function $k(e){let t;return{c(){t=P("option"),t.textContent=`${e[30]}`,t.__value=e[30],ce(t,t.__value)},m(n,r){le(n,t,r)},p:oe,d(n){n&&ae(t)}}}function kk(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,m,p,_,v,g,E,w,M,x,y,S,A,$,C,B,O,G,T,k,L,q,z,H,J,Z,F,te,ne,re,Q,Y,D,V,W,U,fe,ue,ie,he,se,je,Ae,de,ke,xe,an=Te(["off","32nd","16th","8th"]),Ft=[];for(let ye=0;ye<4;ye+=1)Ft[ye]=Tk(Ck(e,an,ye));let ur=Te(["quarter","eighth","quarter-triplets","swing"]),En=[];for(let ye=0;ye<4;ye+=1)En[ye]=$k(Nk(e,ur,ye));return{c(){t=P("main"),n=P("h2"),n.textContent="Speed-Up",r=R(),i=P("p"),i.textContent=`Adjust the initial and target tempo, record an exercise at the inital
        tempo, and then practice it with increasing speed until you reach your
        target tempo (or higher).`,a=R(),o=P("div"),s=P("label"),l=X(`initial tempo
            `),c=P("input"),u=R(),h=P("label"),f=X(`target tempo
            `),d=P("input"),m=R(),p=P("label"),_=X(`tempo increase
            `),v=P("input"),g=R(),E=P("label"),w=X(`quantize exercise
            `),M=P("select");for(let ye=0;ye<4;ye+=1)Ft[ye].c();x=R(),y=P("div"),S=P("label"),A=X(`pre-defined exercise
            `),$=P("select");for(let ye=0;ye<4;ye+=1)En[ye].c();C=R(),B=P("button"),O=X("input exercise"),T=R(),k=P("button"),L=X("save exercise"),z=R(),H=P("button"),J=X("start practice"),F=R(),te=P("button"),ne=X("stop practice"),Q=R(),Y=P("div"),D=X("current step: "),V=P("b"),W=X(e[5]),U=X(" current tempo: "),fe=P("b"),ue=X(e[6]),ie=X(" BPM"),he=R(),se=P("div"),je=R(),Ae=P("div"),de=P("button"),de.textContent="reset practice",N(i,"class","explanation"),N(c,"type","number"),N(c,"min","30"),N(c,"max","100"),N(c,"step","5"),N(s,"title","Set a tempo at which you are able to input the exercise precisely (in BPM)"),N(d,"type","number"),N(d,"min","60"),N(d,"max","200"),N(d,"step","5"),N(h,"title","Set the tempo you want to be able to play the exercise at (in BPM)"),N(v,"type","number"),N(v,"min","1"),N(v,"max","20"),N(v,"step","1"),N(p,"title","Set the tempo increase between practice runs (in BPM)"),e[4]===void 0&&bt(()=>e[19].call(M)),N(o,"class","control"),N(B,"title","Start recording the exercise."),B.disabled=G=e[5]==="input exercise"||e[5]==="practice",N(k,"title","Stop recording the exercise."),k.disabled=q=e[5]!=="input exercise",N(H,"title","Start recording the practice with speed-up."),H.disabled=Z=e[8].length===0,N(te,"title","Stop recording the practice with speed-up."),te.disabled=re=e[5]!=="practice",N(y,"class","control"),N(se,"class","visualization"),N(de,"title","Clear practice but not exercise"),N(Ae,"class","control"),N(t,"class","demo")},m(ye,St){le(ye,t,St),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(s,l),b(s,c),ce(c,e[1]),b(o,u),b(o,h),b(h,f),b(h,d),ce(d,e[2]),b(o,m),b(o,p),b(p,_),b(p,v),ce(v,e[3]),b(o,g),b(o,E),b(E,w),b(E,M);for(let Sn=0;Sn<4;Sn+=1)Ft[Sn]&&Ft[Sn].m(M,null);Le(M,e[4],!0),b(t,x),b(t,y),b(y,S),b(S,A),b(S,$);for(let Sn=0;Sn<4;Sn+=1)En[Sn]&&En[Sn].m($,null);b(y,C),b(y,B),b(B,O),b(y,T),b(y,k),b(k,L),b(y,z),b(y,H),b(H,J),b(y,F),b(y,te),b(te,ne),b(t,Q),b(t,Y),b(Y,D),b(Y,V),b(V,W),b(Y,U),b(Y,fe),b(fe,ue),b(Y,ie),b(t,he),b(t,se),e[20](se),b(t,je),b(t,Ae),b(Ae,de),ke||(xe=[K(c,"input",e[16]),K(c,"change",e[14]),K(d,"input",e[17]),K(d,"change",e[14]),K(v,"input",e[18]),K(M,"change",e[19]),K(M,"change",e[14]),K($,"change",e[15]),K(B,"click",e[10]),K(k,"click",e[11]),K(H,"click",e[12]),K(te,"click",e[13]),K(de,"click",e[21])],ke=!0)},p(ye,St){St[0]&2&&_e(c.value)!==ye[1]&&ce(c,ye[1]),St[0]&4&&_e(d.value)!==ye[2]&&ce(d,ye[2]),St[0]&8&&_e(v.value)!==ye[3]&&ce(v,ye[3]),St[0]&16&&Le(M,ye[4]),St[0]&32&&G!==(G=ye[5]==="input exercise"||ye[5]==="practice")&&(B.disabled=G),St[0]&32&&q!==(q=ye[5]!=="input exercise")&&(k.disabled=q),St[0]&256&&Z!==(Z=ye[8].length===0)&&(H.disabled=Z),St[0]&32&&re!==(re=ye[5]!=="practice")&&(te.disabled=re),St[0]&32&&Se(W,ye[5]),St[0]&64&&Se(ue,ye[6])},i:oe,o:oe,d(ye){ye&&ae(t),tt(Ft,ye),tt(En,ye),e[20](null),ke=!1,Fe(xe)}}}let h1=1e3,d1=60;function Ik(e,t,n){const r=e[0];return e.map(a=>{let o=a-r;if(t!=="off"){let s;t==="8th"&&(s=n/2),t==="16th"&&(s=n/4),t==="32nd"&&(s=n/8),o=Math.round(o/s)*s}return o/n})}function Dk(e,t,n){let r,i=new ah,a=60,o=120,s=10,l="off",c="",u=o,h=0,f=[],d,m=new Map,p=!0,_;const v=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((k,L)=>{console.log(`MIDI device ${L}: ${k.name}`),k.addListener("noteon",g)}),[...I.inputs])},g=async k=>{const q=(k.timestamp-h)/1e3;if(c==="input exercise")n(8,f=[...f,q]);else if(c==="practice"){m.has(u)||m.set(u,[]);const z=m.get(u);p&&z.push(q)}S()},E=async()=>{const k=m.get(u);if(!k)return;const L=Ge(k)-Xt(k);let q=Xn(u);const z=L/q;console.log(`${z} of ${d}`),z>=d&&(console.log("increasing bpm"),i.stop(),u<=o?(n(6,u+=s),p=!1,await m$(2),i.start(u,4),m.has(u)&&m.set(u,[]),p=!0):n(5,c=""))},w=()=>{n(5,c="input exercise"),n(8,f=[]),n(9,m=new Map),i.start(a,4),S()},M=()=>{if(n(5,c=""),i.stop(),f.length>0){const k=Ge(f)-Xt(f);let L=Xn(a);d=Math.ceil(k/L)}},x=async()=>{if(f.length===0){alert("You need to input an exercise first");return}n(5,c="practice"),n(6,u=a),n(9,m=new Map),i.start(u,4),_=setInterval(E,100)},y=()=>{n(5,c=""),n(6,u=o),clearInterval(_),i.stop()},S=()=>{if(n(0,r.textContent="",r),f.length===0)return;let k=Xn(a);const L=Ik(f,l,k);let q=Math.ceil(Ge(L)/4*4)+.5;console.log(L,q);const z=Ke({width:h1,height:d1,marginLeft:40,x:{label:"Time in beats",domain:[0,q]},y:{},marks:[jt(Me(0,q,1),{stroke:"#ddd"}),jt(Me(0,q,4)),Ln(L,{symbol:"times",stroke:"#333",x:H=>H,r:5})]});r.appendChild(z);for(const[H,J]of m){const Z=J[0];k=Xn(H);const F=J.map(ne=>(ne-Z)/k),te=Ke({width:h1,height:d1,marginLeft:40,x:{label:"Time in beats",domain:[0,q]},y:{label:`practice with ${H} BPM`},marks:[jt(Me(0,q,1),{stroke:"#ddd"}),jt(Me(0,q,4)),Ln(F,{symbol:"times",stroke:"#333",x:ne=>ne,r:5})]});r.appendChild(te)}};st(()=>{I.enable().then(v).catch(k=>alert(k)),n(7,h=performance.now()),S()}),lt(()=>{for(const k of I.inputs)k.removeListener();i.stop()});const A=k=>{const L=k.target.value,q=new Map([["quarter",Me(0,8,1)],["eighth",Me(0,8,.5)],["quarter-triplets",Me(0,8,.3)],["swing",Me(0,8,.5).map((J,Z)=>Z%2===0?Z:Z+.2)]]),z=Xn(a);n(4,l="off");const H=q.get(L);n(8,f=H.map(J=>J*z)),d=Math.ceil(Ge(H)+1),console.log(L,f),S()};function $(){a=_e(this.value),n(1,a)}function C(){o=_e(this.value),n(2,o)}function B(){s=_e(this.value),n(3,s)}function O(){l=Yt(this),n(4,l)}function G(k){ot[k?"unshift":"push"](()=>{r=k,n(0,r)})}return[r,a,o,s,l,c,u,h,f,m,w,M,x,y,S,A,$,C,B,O,G,()=>{confirm("Reset practice?")&&(n(9,m=new Map),n(7,h=performance.now()),S())}]}class Rk extends He{constructor(t){super(),qe(this,t,Dk,kk,Ue,{},null,[-1,-1])}}function Lk(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,m,p,_,v=e[3]?"on":"off",g,E,w,M,x,y,S,A,$,C;return{c(){t=P("main"),n=P("h2"),n.textContent="Rhythm Sheet Music",r=R(),i=P("p"),i.textContent=`Set a tempo and start playing. The time between the notes you play will
        be displayed as note symbols, so you can see whether you play, for
        example, correct quarter notes.`,a=R(),o=P("div"),s=P("label"),l=X(`tempo
            `),c=P("input"),u=R(),h=P("label"),f=X(`note count
            `),d=P("input"),m=R(),p=P("button"),_=X("dotted notes "),g=X(v),E=R(),w=P("div"),M=R(),x=P("div"),y=P("button"),y.textContent="reset",S=R(),A=P("button"),A.textContent="metronome",N(i,"class","explanation"),N(c,"type","number"),N(c,"min","30"),N(c,"max","100"),N(c,"step","5"),N(s,"title","Tempo (in BPM)"),N(d,"type","number"),N(d,"min","5"),N(d,"max","100"),N(d,"step","5"),N(h,"title","Number of shown notes"),N(p,"title","Use dotted notes? If not, the closest non-dotted note will be taken."),N(o,"class","control"),N(w,"class","visualization"),N(y,"title","Clear played notes"),N(A,"title","Toggle metronome (click)"),N(x,"class","control"),N(t,"class","demo")},m(B,O){le(B,t,O),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(s,l),b(s,c),ce(c,e[1]),b(o,u),b(o,h),b(h,f),b(h,d),ce(d,e[2]),b(o,m),b(o,p),b(p,_),b(p,g),b(t,E),b(t,w),e[11](w),b(t,M),b(t,x),b(x,y),b(x,S),b(x,A),$||(C=[K(c,"input",e[8]),K(c,"change",e[7]),K(d,"input",e[9]),K(d,"change",e[7]),K(p,"click",e[10]),K(y,"click",e[12]),K(A,"click",e[13])],$=!0)},p(B,[O]){O&2&&_e(c.value)!==B[1]&&ce(c,B[1]),O&4&&_e(d.value)!==B[2]&&ce(d,B[2]),O&8&&v!==(v=B[3]?"on":"off")&&Se(g,v)},i:oe,o:oe,d(B){B&&ae(t),e[11](null),$=!1,Fe(C)}}}let m1=1e3;function Bk(e,t,n){let r,i=new ah,a=120,o=10,s=!0,l=0,c=[];const u=[{name:"double-whole",beats:8,symbol:"𝅝_𝅝"},{name:"dotted-whole",beats:6,symbol:"𝅝.",dotted:!0},{name:"whole",beats:4,symbol:"𝅝"},{name:"dotted-half",beats:3,symbol:"𝅗𝅥.",dotted:!0},{name:"half",beats:2,symbol:"𝅗𝅥"},{name:"dotted-quarter",beats:1.5,symbol:"𝅘𝅥.",dotted:!0},{name:"quarter",beats:1,symbol:"𝅘𝅥"},{name:"dotted-eighth",beats:.75,symbol:"𝅘𝅥𝅮.",dotted:!0},{name:"eighth",beats:.5,symbol:"𝅘𝅥𝅮"},{name:"dotted-sixteenth",beats:.375,symbol:"𝅘𝅥𝅯.",dotted:!0},{name:"sixteenth",beats:.25,symbol:"𝅘𝅥𝅯"},{name:"thirtysecond",beats:.125,symbol:"𝅘𝅥𝅰"},{name:"sixtyfourth",beats:.0625,symbol:"𝅘𝅥𝅱"}],h=u.filter(M=>!M.dotted),f=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((M,x)=>{console.log(`MIDI device ${x}: ${M.name}`),M.addListener("noteon",d)}),[...I.inputs])},d=async M=>{const y=(M.timestamp-l)/1e3;c.push(y),m()},m=()=>{if(n(0,r.textContent="",r),c.length===0)return;let M=Xn(a);const x=c.slice(-(o+1)),S=x.map((O,G)=>G===0?0:O-x[G-1]).map(O=>O/M),A=s?u:h,$=S.map(O=>{const G=L1(A,k=>Math.abs(O-k.beats)),T=A[G];return{...T,beats:O,offsetPercent:(O/T.beats*100).toFixed()}}),C=Ke({width:m1,height:100,marginLeft:80,x:{label:"",domain:Me(1,o),ticks:[]},y:{domain:[1,0],ticks:Me(3),tickFormat:O=>["note","beats"][O]},marks:[$r($,{text:"symbol",x:(O,G)=>G,y:0,fontSize:40}),$r($,{text:"beats",x:(O,G)=>G,y:1,fontSize:20})]});r.appendChild(C);const B=Ke({width:m1,height:100,marginLeft:80,x:{label:"Note",domain:Me(1,o),tickSize:0,ticks:[]},y:{domain:[0,150],ticks:[0,50,100,150]},marks:[Tl($,{x:(O,G)=>G,y:"offsetPercent",fill:"#ddd"}),Lt([50,150],{stroke:"#aaa"}),Lt([100])]});r.appendChild(B)};st(()=>{I.enable().then(f).catch(M=>alert(M)),n(4,l=performance.now()),m()}),lt(()=>{for(const M of I.inputs)M.removeListener();i.stop()});function p(){a=_e(this.value),n(1,a)}function _(){o=_e(this.value),n(2,o)}const v=()=>n(3,s=!s);function g(M){ot[M?"unshift":"push"](()=>{r=M,n(0,r)})}return[r,a,o,s,l,c,i,m,p,_,v,g,()=>{confirm("Clear notes?")&&(n(4,l=performance.now()),n(5,c=[]),m())},()=>{i.toggle(a,4)}]}class Ok extends He{constructor(t){super(),qe(this,t,Bk,Lk,Ue,{})}}function Fk(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,m,p,_,v,g,E,w;return{c(){t=P("main"),n=P("h2"),n.textContent="Chord and Arpeggio Timing",r=R(),i=P("p"),i.innerHTML="",a=R(),o=P("div"),s=P("label"),l=X(`max. note distance
            `),c=P("input"),u=R(),h=P("label"),f=X(`chord count
            `),d=P("input"),m=R(),p=P("div"),_=R(),v=P("div"),g=P("button"),g.textContent="reset",N(i,"class","explanation"),N(c,"type","number"),N(c,"min","0.05"),N(c,"max","5"),N(c,"step","0.05"),N(s,"title","maximum distance between notes such that they still count as beloning to the same chord/arpeggio"),N(d,"type","number"),N(d,"min","10"),N(d,"max","300"),N(d,"step","10"),N(h,"title","The number of played chords that is displayed"),N(o,"class","control"),N(p,"class","visualization"),N(g,"title","Clear all played notes"),N(v,"class","control"),N(t,"class","demo")},m(M,x){le(M,t,x),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(o,s),b(s,l),b(s,c),ce(c,e[2]),b(o,u),b(o,h),b(h,f),b(h,d),ce(d,e[1]),b(t,m),b(t,p),e[8](p),b(t,_),b(t,v),b(v,g),E||(w=[K(c,"input",e[6]),K(c,"change",e[5]),K(d,"input",e[7]),K(d,"change",e[5]),K(g,"click",e[9])],E=!0)},p(M,[x]){x&4&&_e(c.value)!==M[2]&&ce(c,M[2]),x&2&&_e(d.value)!==M[1]&&ce(d,M[1])},i:oe,o:oe,d(M){M&&ae(t),e[8](null),E=!1,Fe(w)}}}let p1=1e3,Gk=200,b1=6,Uk=24;function qk(e,t,n){let r,i=5,a=.2,o=[64,59,55,50,45,40];const s=o.map(bn.fromMidiSharps);let l=0,c=[];const u=()=>{I.inputs.length<1?console.warn("No MIDI device detected"):(I.inputs.forEach((v,g)=>{console.log(`MIDI device ${g}: ${v.name}`),v.addListener("noteon",h)}),[...I.inputs])},h=v=>{const g=(v.timestamp-l)/1e3,E=v.message.channel-1,w={number:v.note.number,velocity:v.rawVelocity,time:g,channel:v.message.channel,string:E,fret:v.note.number-o[E]};c.push(w),f()},f=()=>{let v=[],g=[];for(const w of c)g.length===0||w.time-g.at(-1).time<a?g.push(w):(v.push(g),g=[w]);v.push(g),v=v.filter(w=>w.length>1).slice(-i);for(const[w,M]of v.entries())for(const x of M)x.chordId=w;v.map(w=>{let M=w.sort((x,y)=>x.number-y.number).map(x=>bn.fromMidiSharps(x.number));return M=[...new Set(M)],Lg.detect(M)}),console.log(v);const E=(p1-100)/25;n(0,r.textContent="",r);for(const w of v){const M=ht(w,y=>y.fret),x=Ke({width:p1,height:Gk,marginLeft:60,marginBottom:50,padding:0,x:{domain:Me(M[0]-1,Math.max(M[0]+6,M[1]+2),1),tickSize:0},y:{domain:Me(0,b1),tickFormat:y=>s[y],tickSize:0},color:{domain:Me(12),legend:!0,marginLeft:100,width:400,type:"categorical",tickFormat:y=>kP[y]},r:{legend:!0,domain:[0,100],range:[5,10]},marks:[jt(Me(0,Uk+1),{stroke:"#ddd",dx:E/2}),Lt(Me(0,b1),{stroke:"#ddd",strokeWidth:y=>Math.sqrt(y+1)}),Ln([3,5,7,9,15,17,19,21],{x:y=>y,y:2,dy:E/2,fill:"#ddd",r:8}),Ln([12,12,24,24],{x:y=>y,y:(y,S)=>S%2===0?1:3,dy:E/2,fill:"#ddd",r:8}),Ln(w,{x:"fret",y:"string",r:"velocity",fill:y=>y.number%12,tip:!0})]});r.appendChild(x)}};st(()=>{I.enable().then(u).catch(v=>alert(v)),n(3,l=performance.now()),f()}),lt(()=>{for(const v of I.inputs)v.removeListener()});function d(){a=_e(this.value),n(2,a)}function m(){i=_e(this.value),n(1,i)}function p(v){ot[v?"unshift":"push"](()=>{r=v,n(0,r)})}return[r,i,a,l,c,f,d,m,p,()=>{confirm("Reset played notes?")&&(n(4,c=[]),n(3,l=performance.now()))}]}class Hk extends He{constructor(t){super(),qe(this,t,qk,Fk,Ue,{})}}function g1(e,t,n){const r=e.slice();return r[20]=t[n],r}function y1(e,t,n){const r=e.slice();return r[23]=t[n],r}function _1(e,t,n){const r=e.slice();return r[23]=t[n],r}function zk(e){let t,n,r,i,a,o,s,l;const c=[Wk,Yk],u=[];function h(f,d){return f[2]==="tools"?0:1}return r=h(e),i=u[r]=c[r](e),{c(){t=P("button"),t.textContent="< back",n=R(),i.c(),a=Ou()},m(f,d){le(f,t,d),le(f,n,d),u[r].m(f,d),le(f,a,d),o=!0,s||(l=K(t,"click",e[18]),s=!0)},p(f,d){let m=r;r=h(f),r===m?u[r].p(f,d):(Da(),Wt(u[m],1,1,()=>{u[m]=null}),Ra(),i=u[r],i?i.p(f,d):(i=u[r]=c[r](f),i.c()),It(i,1),i.m(a.parentNode,a))},i(f){o||(It(i),o=!0)},o(f){Wt(i),o=!1},d(f){f&&(ae(t),ae(n),ae(a)),u[r].d(f),s=!1,l()}}}function Vk(e){let t,n,r,i,a,o,s,l,c,u,h,f,d,m,p,_,v,g=Te(e[5].values()),E=[];for(let S=0;S<g.length;S+=1)E[S]=w1(_1(e,g,S));let w=Te(e[6].values()),M=[];for(let S=0;S<w.length;S+=1)M[S]=v1(y1(e,w,S));let x=Te(e[4]),y=[];for(let S=0;S<x.length;S+=1)y[S]=x1(g1(e,x,S));return{c(){t=P("p"),t.textContent=`This page contains a collection of small tools (demos) that are each
      tailored to a specific musical skill and sometimes also specific kind of
      musical data. You can filter demos with the bottuns below. Click a button
      to toggle it, double click it to turn it on and all others of the same
      kind off. A demo will only be shown if it supports at least one of the
      active attributes.`,n=R(),r=P("div"),i=X(`task
      `),a=P("button"),a.textContent="all",o=R();for(let S=0;S<E.length;S+=1)E[S].c();s=R(),l=P("div"),c=X(`instrument
      `),u=P("button"),u.textContent="all",h=R();for(let S=0;S<M.length;S+=1)M[S].c();f=R(),d=P("div");for(let S=0;S<y.length;S+=1)y[S].c();m=R(),p=P("button"),p.textContent="Tools",N(t,"class","explanation"),N(d,"class","grid")},m(S,A){le(S,t,A),le(S,n,A),le(S,r,A),b(r,i),b(r,a),b(r,o);for(let $=0;$<E.length;$+=1)E[$]&&E[$].m(r,null);le(S,s,A),le(S,l,A),b(l,c),b(l,u),b(l,h);for(let $=0;$<M.length;$+=1)M[$]&&M[$].m(l,null);le(S,f,A),le(S,d,A);for(let $=0;$<y.length;$+=1)y[$]&&y[$].m(d,null);le(S,m,A),le(S,p,A),_||(v=[K(a,"click",e[10]),K(u,"click",e[13]),K(p,"click",e[17])],_=!0)},p(S,A){if(A&168){g=Te(S[5].values());let $;for($=0;$<g.length;$+=1){const C=_1(S,g,$);E[$]?E[$].p(C,A):(E[$]=w1(C),E[$].c(),E[$].m(r,null))}for(;$<E.length;$+=1)E[$].d(1);E.length=g.length}if(A&194){w=Te(S[6].values());let $;for($=0;$<w.length;$+=1){const C=y1(S,w,$);M[$]?M[$].p(C,A):(M[$]=v1(C),M[$].c(),M[$].m(l,null))}for(;$<M.length;$+=1)M[$].d(1);M.length=w.length}if(A&286){x=Te(S[4]);let $;for($=0;$<x.length;$+=1){const C=g1(S,x,$);y[$]?y[$].p(C,A):(y[$]=x1(C),y[$].c(),y[$].m(d,null))}for(;$<y.length;$+=1)y[$].d(1);y.length=x.length}},i:oe,o:oe,d(S){S&&(ae(t),ae(n),ae(r),ae(s),ae(l),ae(f),ae(d),ae(m),ae(p)),tt(E,S),tt(M,S),tt(y,S),_=!1,Fe(v)}}}function jk(e){let t,n,r;return{c(){t=P("input"),N(t,"type","password"),N(t,"placeholder","password")},m(i,a){le(i,t,a),ce(t,e[0]),n||(r=K(t,"input",e[9]),n=!0)},p(i,a){a&1&&t.value!==i[0]&&ce(t,i[0])},i:oe,o:oe,d(i){i&&ae(t),n=!1,r()}}}function Yk(e){let t,n,r;var i=e[2].component;function a(o,s){return{}}return i&&(t=jo(i,a())),{c(){t&&la(t.$$.fragment),n=Ou()},m(o,s){t&&ii(t,o,s),le(o,n,s),r=!0},p(o,s){if(s&4&&i!==(i=o[2].component)){if(t){Da();const l=t;Wt(l.$$.fragment,1,0,()=>{ai(l,1)}),Ra()}i?(t=jo(i,a()),la(t.$$.fragment),It(t.$$.fragment,1),ii(t,n.parentNode,n)):t=null}},i(o){r||(t&&It(t.$$.fragment,o),r=!0)},o(o){t&&Wt(t.$$.fragment,o),r=!1},d(o){o&&ae(n),t&&ai(t,o)}}}function Wk(e){let t,n;return t=new A$({}),{c(){la(t.$$.fragment)},m(r,i){ii(t,r,i),n=!0},p:oe,i(r){n||(It(t.$$.fragment,r),n=!0)},o(r){Wt(t.$$.fragment,r),n=!1},d(r){ai(t,r)}}}function w1(e){let t,n=e[23]+"",r,i,a,o,s;function l(){return e[11](e[23])}function c(){return e[12](e[23])}return{c(){t=P("button"),r=X(n),i=R(),N(t,"class",a=Vo(e[3].has(e[23])?"active":"hidden")+" svelte-fxws81")},m(u,h){le(u,t,h),b(t,r),b(t,i),o||(s=[K(t,"click",l),K(t,"dblclick",c)],o=!0)},p(u,h){e=u,h&8&&a!==(a=Vo(e[3].has(e[23])?"active":"hidden")+" svelte-fxws81")&&N(t,"class",a)},d(u){u&&ae(t),o=!1,Fe(s)}}}function v1(e){let t,n=e[23]+"",r,i,a,o,s;function l(){return e[14](e[23])}function c(){return e[15](e[23])}return{c(){t=P("button"),r=X(n),i=R(),N(t,"class",a=Vo(e[1].has(e[23])?"active":"hidden")+" svelte-fxws81")},m(u,h){le(u,t,h),b(t,r),b(t,i),o||(s=[K(t,"click",l),K(t,"dblclick",c)],o=!0)},p(u,h){e=u,h&2&&a!==(a=Vo(e[1].has(e[23])?"active":"hidden")+" svelte-fxws81")&&N(t,"class",a)},d(u){u&&ae(t),o=!1,Fe(s)}}}function M1(e){let t,n,r,i,a,o,s,l,c;function u(){return e[16](e[20])}return{c(){t=P("div"),n=P("h2"),n.textContent=`${e[20].title}`,r=R(),i=P("div"),i.textContent=`${e[20].description}`,a=R(),o=P("div"),o.textContent=`${e[20].instruments.includes("guitar/bass")?"🎸":""} ${e[20].instruments.includes("drum")?"🥁":""} ${e[20].instruments.includes("keyboard")?"🎘":""}`,s=R(),N(i,"class","description"),N(o,"class","instruments svelte-fxws81"),N(t,"class","card svelte-fxws81")},m(h,f){le(h,t,f),b(t,n),b(t,r),b(t,i),b(t,a),b(t,o),b(t,s),l||(c=K(t,"click",u),l=!0)},p(h,f){e=h},d(h){h&&ae(t),l=!1,c()}}}function x1(e){let t=e[3].has(e[20].task)&&e[8](e[1],e[20].instruments),n,r=t&&M1(e);return{c(){r&&r.c(),n=Ou()},m(i,a){r&&r.m(i,a),le(i,n,a)},p(i,a){a&10&&(t=i[3].has(i[20].task)&&i[8](i[1],i[20].instruments)),t?r?r.p(i,a):(r=M1(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){i&&ae(n),r&&r.d(i)}}}function Xk(e){let t,n,r,i,a,o;const s=[jk,Vk,zk],l=[];function c(u,h){return u[0]!==Kk?0:u[2]?2:1}return i=c(e),a=l[i]=s[i](e),{c(){t=P("main"),n=P("h1"),n.textContent="Data-Driven Music Education Demos",r=R(),a.c()},m(u,h){le(u,t,h),b(t,n),b(t,r),l[i].m(t,null),o=!0},p(u,[h]){let f=i;i=c(u),i===f?l[i].p(u,h):(Da(),Wt(l[f],1,1,()=>{l[f]=null}),Ra(),a=l[i],a?a.p(u,h):(a=l[i]=s[i](u),a.c()),It(a,1),a.m(t,null))},i(u){o||(It(a),o=!0)},o(u){Wt(a),o=!1},d(u){u&&ae(t),l[i].d()}}}let Kk="rhyvis";function Zk(e,t,n){const r=[{id:"sub-division",title:"Sub-Division",description:"Learn rhythmic playing in different sub-divisions.",task:"timing",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:G$},{id:"tempo-drift",title:"Tempo Drift",description:"Keep your tempo constant over a longer stretch of playing.",task:"timing",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:X$},{id:"dynamics",title:"Dynamics",description:"Check how well you control the loudness of notes.",tags:["task:dynamics","input:MIDI","encoding:bars"],task:"dynamics",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:ek},{id:"improvisation-intervals",title:"Improvisation Intervals",description:"See how often you use different intervals in improvisation.",task:"pitch",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:ak},{id:"improvisation-scale-degrees",title:"Improvisation Scale Degrees",description:"See how often you use different scale degrees in improvisation.",task:"pitch",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:uk},{id:"keyboard-histogram",title:"[new] Keyboard Histogram",description:"See how often you play different keyboard keys.",task:"pitch",input:"MIDI",instruments:["keyboard"],component:xk},{id:"fretboard-heatmap",title:"Fretboard Heatmap",description:"See how often you play different fretboard positions.",task:"pitch",input:"MIDI",instruments:["guitar/bass"],component:mk},{id:"fretboard-improvisation-intervals",title:"[new] Fretboard Improvisation Intervals",description:"Once you play a note, see where on the fretboard you can reach different intervals to the last played note.",task:"pitch",input:"MIDI",instruments:["guitar/bass"],component:Pk},{id:"chord-arpeggio-timing",title:"Chord and Arpeggio Timing",description:"See how spaced out the notes in a chord or arpeggio are, and how much time lies between these.",task:"timing",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:yk},{id:"speed-up",title:"[new] Speed-Up",description:"Record a short exercise at a slow tempo, then practice it with steadily increasing tempo.",task:"timing",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:Rk},{id:"rhythm-sheet-music",title:"[new] Rhythm Sheet Music",description:"This demo displays the notes you play as staff notation (𝅝, 𝅗𝅥, 𝅘𝅥, 𝅘𝅥𝅮, 𝅘𝅥𝅯) and offset in percent.",task:"timing",input:"MIDI",instruments:["drum","guitar/bass","keyboard"],component:Ok},{id:"chord-diagrams",title:"[new] Chord Diagrams",description:"See what chords you play on a guitar/bass as chord diagrams.",task:"chords",input:"MIDI",instruments:["guitar/bass"],component:Hk}];let i=null;const a=U_(window,"d");a&&a!==""&&(i=r.filter(y=>y.id===a)[0]);let o=localStorage.getItem("pwd")??"";window.onpopstate=y=>{i!==null&&n(2,i=null)};const s=new Set(r.flatMap(y=>y.task).sort()),l=new Set(r.flatMap(y=>y.instruments).sort());let c=new Set(s),u=new Set(l);const h=(y,S)=>(y.has(S)?y.delete(S):y.add(S),new Set(y)),f=(y,S)=>{for(const A of S)if(y.has(A))return!0;return!1};function d(){o=this.value,n(0,o)}const m=()=>{n(3,c=new Set(s))},p=y=>n(3,c=h(c,y)),_=y=>n(3,c=new Set([y])),v=()=>{n(1,u=new Set(l))},g=y=>n(1,u=h(u,y)),E=y=>n(1,u=new Set([y])),w=y=>{n(2,i=y),Rl(window,"d",y.id)},M=()=>{n(2,i="tools"),Rl(window,"d","tools")},x=()=>{n(2,i=null),Rl(window,"d","")};return e.$$.update=()=>{e.$$.dirty&1&&localStorage.setItem("pwd",o),e.$$.dirty&2&&console.log(u)},[o,u,i,c,r,s,l,h,f,d,m,p,_,v,g,E,w,M,x]}class Jk extends He{constructor(t){super(),qe(this,t,Zk,Xk,Ue,{})}}new Jk({target:document.getElementById("app")});

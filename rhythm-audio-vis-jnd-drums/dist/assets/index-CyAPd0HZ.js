var mv=Object.defineProperty;var pv=(e,t,n)=>t in e?mv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Rs=(e,t,n)=>(pv(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ce(){}function ym(e){return e()}function oh(){return Object.create(null)}function It(e){e.forEach(ym)}function _m(e){return typeof e=="function"}function et(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ca;function Rf(e,t){return e===t?!0:(ca||(ca=document.createElement("a")),ca.href=t,e===ca.href)}function bv(e){return Object.keys(e).length===0}function y(e,t){e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function B(e){e.parentNode&&e.parentNode.removeChild(e)}function wt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function P(e){return document.createElement(e)}function fi(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function J(e){return document.createTextNode(e)}function E(){return J(" ")}function jn(){return J("")}function Re(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function A(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $t(e){return e===""?null:+e}function gv(e){return Array.from(e.childNodes)}function Fe(e,t){t=""+t,e.data!==t&&(e.data=t)}function ke(e,t){e.value=t??""}function Qe(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function or(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ol(e){const t=e.querySelector(":checked");return t&&t.__value}let ho;function oo(e){ho=e}function Ff(){if(!ho)throw new Error("Function called outside component initialization");return ho}function Br(e){Ff().$$.on_mount.push(e)}function An(e){Ff().$$.after_update.push(e)}function yv(e){Ff().$$.on_destroy.push(e)}const ei=[],Pt=[];let ii=[];const ah=[],_v=Promise.resolve();let Cu=!1;function vv(){Cu||(Cu=!0,_v.then(vm))}function Ar(e){ii.push(e)}const Fs=new Set;let Wr=0;function vm(){if(Wr!==0)return;const e=ho;do{try{for(;Wr<ei.length;){const t=ei[Wr];Wr++,oo(t),wv(t.$$)}}catch(t){throw ei.length=0,Wr=0,t}for(oo(null),ei.length=0,Wr=0;Pt.length;)Pt.pop()();for(let t=0;t<ii.length;t+=1){const n=ii[t];Fs.has(n)||(Fs.add(n),n())}ii.length=0}while(ei.length);for(;ah.length;)ah.pop()();Cu=!1,Fs.clear(),oo(e)}function wv(e){if(e.fragment!==null){e.update(),It(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ar)}}function Mv(e){const t=[],n=[];ii.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),ii=t}const Fa=new Set;let vr;function He(){vr={r:0,c:[],p:vr}}function We(){vr.r||It(vr.c),vr=vr.p}function R(e,t){e&&e.i&&(Fa.delete(e),e.i(t))}function H(e,t,n,r){if(e&&e.o){if(Fa.has(e))return;Fa.add(e),vr.c.push(()=>{Fa.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Ue(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ce(e){e&&e.c()}function ue(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Ar(()=>{const o=e.$$.on_mount.map(ym).filter(_m);e.$$.on_destroy?e.$$.on_destroy.push(...o):It(o),e.$$.on_mount=[]}),i.forEach(Ar)}function fe(e,t){const n=e.$$;n.fragment!==null&&(Mv(n.after_update),It(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function xv(e,t){e.$$.dirty[0]===-1&&(ei.push(e),vv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function tt(e,t,n,r,i,o,a=null,l=[-1]){const s=ho;oo(e);const u=e.$$={fragment:null,ctx:[],props:o,update:Ce,not_equal:i,bound:oh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:oh(),dirty:l,skip_bound:!1,root:t.target||s.$$.root};a&&a(u.root);let f=!1;if(u.ctx=n?n(e,t.props||{},(h,c,...d)=>{const m=d.length?d[0]:c;return u.ctx&&i(u.ctx[h],u.ctx[h]=m)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](m),f&&xv(e,h)),c}):[],u.update(),f=!0,It(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const h=gv(t.target);u.fragment&&u.fragment.l(h),h.forEach(B)}else u.fragment&&u.fragment.c();t.intro&&R(e.$$.fragment),ue(e,t.target,t.anchor),vm()}oo(s)}class nt{constructor(){Rs(this,"$$");Rs(this,"$$set")}$destroy(){fe(this,1),this.$destroy=Ce}$on(t,n){if(!_m(n))return Ce;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!bv(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pv="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pv);function Tt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ql(e){let t,n,r;e.length!==2?(t=Tt,n=(l,s)=>Tt(e(l),s),r=(l,s)=>e(l)-s):(t=e===Tt||e===Fo?e:Sv,n=e,r=e);function i(l,s,u=0,f=l.length){if(u<f){if(t(s,s)!==0)return f;do{const h=u+f>>>1;n(l[h],s)<0?u=h+1:f=h}while(u<f)}return u}function o(l,s,u=0,f=l.length){if(u<f){if(t(s,s)!==0)return f;do{const h=u+f>>>1;n(l[h],s)<=0?u=h+1:f=h}while(u<f)}return u}function a(l,s,u=0,f=l.length){const h=i(l,s,u,f-1);return h>u&&r(l[h-1],s)>-r(l[h],s)?h-1:h}return{left:i,center:a,right:o}}function Sv(){return 0}function wm(e){return e===null?NaN:+e}function*Av(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const kv=ql(Tt),Gl=kv.right;ql(wm).center;function Bf(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function Ev(e){return e.length|0}function Cv(e){return!(e>0)}function Tv(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function $v(e){return t=>e(...t)}function Dv(...e){const t=typeof e[e.length-1]=="function"&&$v(e.pop());e=e.map(Tv);const n=e.map(Ev),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(Cv))return o;for(;;){o.push(i.map((l,s)=>e[s][l]));let a=r;for(;++i[a]===n[a];){if(a===0)return t?o.map(t):o;i[a--]=0}}}function Nv(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function Ul(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let l of e)(l=t(l,++a,e))!=null&&(l=+l)>=l&&(r=l-i,i+=r/++n,o+=r*(l-i))}if(n>1)return o/(n-1)}function Of(e,t){const n=Ul(e,t);return n&&Math.sqrt(n)}function Ht(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class kr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,l=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);l&&(n[r++]=l),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Er extends Map{constructor(t,n=Pm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Tu(this,t))}has(t){return super.has(Tu(this,t))}set(t,n){return super.set(Mm(this,t),n)}delete(t){return super.delete(xm(this,t))}}class zl extends Set{constructor(t,n=Pm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Tu(this,t))}add(t){return super.add(Mm(this,t))}delete(t){return super.delete(xm(this,t))}}function Tu({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Mm({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function xm({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Pm(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Xa(e){return e}function Hl(e,...t){return Wl(e,Xa,Xa,t)}function ct(e,...t){return Wl(e,Array.from,Xa,t)}function oi(e,t,...n){return Wl(e,Xa,t,n)}function Iv(e,t,...n){return Wl(e,Array.from,t,n)}function Wl(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);const l=new Er,s=r[a++];let u=-1;for(const f of o){const h=s(f,++u,o),c=l.get(h);c?c.push(f):l.set(h,[f])}for(const[f,h]of l)l.set(f,i(h,a));return t(l)}(e,0)}function Lv(e,t){return Array.from(t,n=>e[n])}function mo(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const a of t){const l=Za(a[i],a[o]);if(l)return l}})):(n=e.map(n),r.sort((i,o)=>Za(n[i],n[o]))),Lv(e,r)}return e.sort(Sm(n))}function Sm(e=Tt){if(e===Tt)return Za;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Za(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function qf(e,t,n){return(t.length!==2?mo(oi(e,t,n),([r,i],[o,a])=>Tt(i,a)||Tt(r,o)):mo(Hl(e,n),([r,i],[o,a])=>t(i,a)||Tt(r,o))).map(([r])=>r)}const Rv=Math.sqrt(50),Fv=Math.sqrt(10),Bv=Math.sqrt(2);function Ka(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Rv?10:o>=Fv?5:o>=Bv?2:1;let l,s,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(e*u),s=Math.round(t*u),l/u<e&&++l,s/u>t&&--s,u=-u):(u=Math.pow(10,i)*a,l=Math.round(e/u),s=Math.round(t/u),l*u<e&&++l,s*u>t&&--s),s<l&&.5<=n&&n<2?Ka(e,t,n*2):[l,s,u]}function po(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?Ka(t,e,n):Ka(e,t,n);if(!(o>=i))return[];const l=o-i+1,s=new Array(l);if(r)if(a<0)for(let u=0;u<l;++u)s[u]=(o-u)/-a;else for(let u=0;u<l;++u)s[u]=(o-u)*a;else if(a<0)for(let u=0;u<l;++u)s[u]=(i+u)/-a;else for(let u=0;u<l;++u)s[u]=(i+u)*a;return s}function Ja(e,t,n){return t=+t,e=+e,n=+n,Ka(e,t,n)[2]}function $u(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Ja(t,e,n):Ja(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Ov(e){return Math.max(1,Math.ceil(Math.log(Bf(e))/Math.LN2)+1)}function Rt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function qv(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Un(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Gv(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Am(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Za:Sm(i);r>n;){if(r-n>600){const s=r-n+1,u=t-n+1,f=Math.log(s),h=.5*Math.exp(2*f/3),c=.5*Math.sqrt(f*h*(s-h)/s)*(u-s/2<0?-1:1),d=Math.max(n,Math.floor(t-u*h/s+c)),m=Math.min(r,Math.floor(t+(s-u)*h/s+c));Am(e,t,d,m,i)}const o=e[t];let a=n,l=r;for(Li(e,n,t),i(e[r],o)>0&&Li(e,n,r);a<l;){for(Li(e,a,l),++a,--l;i(e[a],o)<0;)++a;for(;i(e[l],o)>0;)--l}i(e[n],o)===0?Li(e,n,l):(++l,Li(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function Li(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function km(e,t=Tt){let n,r=!1;if(t.length===1){let i;for(const o of e){const a=t(o);(r?Tt(a,i)>0:Tt(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function ci(e,t,n){if(e=Float64Array.from(Av(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Un(e);if(t>=1)return Rt(e);var r,i=(r-1)*t,o=Math.floor(i),a=Rt(Am(e,o).subarray(0,o+1)),l=Un(e.subarray(o+1));return a+(l-a)*(i-o)}}function Uv(e,t,n=wm){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),l=+n(e[o+1],o+1,e);return a+(l-a)*(i-o)}}function zv(e,t,n){const r=Bf(e),i=ci(e,.75)-ci(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function Em(e,t,n){const r=Bf(e),i=Of(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Vl(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Du(e,t){return ci(e,.5,t)}function*Hv(e){for(const t of e)yield*t}function Cm(e){return Array.from(Hv(e))}function Wv(e,t){const n=new Er;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function Vv(e,t=Yv){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function Yv(e,t){return[e,t]}function Nu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function ar(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Qa(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function jv(e){return e}var Bs=1,Os=2,Iu=3,ha=4,lh=1e-6;function Xv(e){return"translate("+e+",0)"}function Zv(e){return"translate(0,"+e+")"}function Kv(e){return t=>+e(t)}function Jv(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Qv(){return!this.__axis}function e3(e,t){var n=[],r=null,i=null,o=6,a=6,l=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===Bs||e===ha?-1:1,f=e===ha||e===Os?"x":"y",h=e===Bs||e===Iu?Xv:Zv;function c(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):jv),g=Math.max(o,0)+l,v=t.range(),b=+v[0]+s,w=+v[v.length-1]+s,_=(t.bandwidth?Jv:Kv)(t.copy(),s),x=d.selection?d.selection():d,M=x.selectAll(".domain").data([null]),S=x.selectAll(".tick").data(m,t).order(),T=S.exit(),I=S.enter().append("g").attr("class","tick"),L=S.select("line"),C=S.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(I),L=L.merge(I.append("line").attr("stroke","currentColor").attr(f+"2",u*o)),C=C.merge(I.append("text").attr("fill","currentColor").attr(f,u*g).attr("dy",e===Bs?"0em":e===Iu?"0.71em":"0.32em")),d!==x&&(M=M.transition(d),S=S.transition(d),L=L.transition(d),C=C.transition(d),T=T.transition(d).attr("opacity",lh).attr("transform",function(G){return isFinite(G=_(G))?h(G+s):this.getAttribute("transform")}),I.attr("opacity",lh).attr("transform",function(G){var Y=this.parentNode.__axis;return h((Y&&isFinite(Y=Y(G))?Y:_(G))+s)})),T.remove(),M.attr("d",e===ha||e===Os?a?"M"+u*a+","+b+"H"+s+"V"+w+"H"+u*a:"M"+s+","+b+"V"+w:a?"M"+b+","+u*a+"V"+s+"H"+w+"V"+u*a:"M"+b+","+s+"H"+w),S.attr("opacity",1).attr("transform",function(G){return h(_(G)+s)}),L.attr(f+"2",u*o),C.attr(f,u*g).text(p),x.filter(Qv).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Os?"start":e===ha?"end":"middle"),x.each(function(){this.__axis=_})}return c.scale=function(d){return arguments.length?(t=d,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),c):n.slice()},c.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),c):r&&r.slice()},c.tickFormat=function(d){return arguments.length?(i=d,c):i},c.tickSize=function(d){return arguments.length?(o=a=+d,c):o},c.tickSizeInner=function(d){return arguments.length?(o=+d,c):o},c.tickSizeOuter=function(d){return arguments.length?(a=+d,c):a},c.tickPadding=function(d){return arguments.length?(l=+d,c):l},c.offset=function(d){return arguments.length?(s=+d,c):s},c}function t3(e){return e3(Iu,e)}var n3={value:()=>{}};function Tm(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ba(n)}function Ba(e){this._=e}function r3(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ba.prototype=Tm.prototype={constructor:Ba,on:function(e,t){var n=this._,r=r3(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=i3(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=sh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=sh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ba(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function i3(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function sh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=n3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Lu="http://www.w3.org/1999/xhtml";const hi={svg:"http://www.w3.org/2000/svg",xhtml:Lu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),hi.hasOwnProperty(t)?{space:hi[t],local:e}:e}function o3(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Lu&&t.documentElement.namespaceURI===Lu?t.createElement(e):t.createElementNS(n,e)}}function a3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jl(e){var t=Yl(e);return(t.local?a3:o3)(t)}function l3(){}function Gf(e){return e==null?l3:function(){return this.querySelector(e)}}function s3(e){typeof e!="function"&&(e=Gf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=new Array(a),s,u,f=0;f<a;++f)(s=o[f])&&(u=e.call(s,s.__data__,f,o))&&("__data__"in s&&(u.__data__=s.__data__),l[f]=u);return new Ft(r,this._parents)}function u3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function f3(){return[]}function $m(e){return e==null?f3:function(){return this.querySelectorAll(e)}}function c3(e){return function(){return u3(e.apply(this,arguments))}}function h3(e){typeof e=="function"?e=c3(e):e=$m(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(r.push(e.call(s,s.__data__,u,a)),i.push(s));return new Ft(r,i)}function Dm(e){return function(){return this.matches(e)}}function Nm(e){return function(t){return t.matches(e)}}var d3=Array.prototype.find;function m3(e){return function(){return d3.call(this.children,e)}}function p3(){return this.firstElementChild}function b3(e){return this.select(e==null?p3:m3(typeof e=="function"?e:Nm(e)))}var g3=Array.prototype.filter;function y3(){return Array.from(this.children)}function _3(e){return function(){return g3.call(this.children,e)}}function v3(e){return this.selectAll(e==null?y3:_3(typeof e=="function"?e:Nm(e)))}function w3(e){typeof e!="function"&&(e=Dm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&l.push(s);return new Ft(r,this._parents)}function Im(e){return new Array(e.length)}function M3(){return new Ft(this._enter||this._groups.map(Im),this._parents)}function el(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}el.prototype={constructor:el,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function x3(e){return function(){return e}}function P3(e,t,n,r,i,o){for(var a=0,l,s=t.length,u=o.length;a<u;++a)(l=t[a])?(l.__data__=o[a],r[a]=l):n[a]=new el(e,o[a]);for(;a<s;++a)(l=t[a])&&(i[a]=l)}function S3(e,t,n,r,i,o,a){var l,s,u=new Map,f=t.length,h=o.length,c=new Array(f),d;for(l=0;l<f;++l)(s=t[l])&&(c[l]=d=a.call(s,s.__data__,l,t)+"",u.has(d)?i[l]=s:u.set(d,s));for(l=0;l<h;++l)d=a.call(e,o[l],l,o)+"",(s=u.get(d))?(r[l]=s,s.__data__=o[l],u.delete(d)):n[l]=new el(e,o[l]);for(l=0;l<f;++l)(s=t[l])&&u.get(c[l])===s&&(i[l]=s)}function A3(e){return e.__data__}function k3(e,t){if(!arguments.length)return Array.from(this,A3);var n=t?S3:P3,r=this._parents,i=this._groups;typeof e!="function"&&(e=x3(e));for(var o=i.length,a=new Array(o),l=new Array(o),s=new Array(o),u=0;u<o;++u){var f=r[u],h=i[u],c=h.length,d=E3(e.call(f,f&&f.__data__,u,r)),m=d.length,p=l[u]=new Array(m),g=a[u]=new Array(m),v=s[u]=new Array(c);n(f,h,p,g,v,d,t);for(var b=0,w=0,_,x;b<m;++b)if(_=p[b]){for(b>=w&&(w=b+1);!(x=g[w])&&++w<m;);_._next=x||null}}return a=new Ft(a,r),a._enter=l,a._exit=s,a}function E3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function C3(){return new Ft(this._exit||this._groups.map(Im),this._parents)}function T3(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function $3(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),l=new Array(i),s=0;s<a;++s)for(var u=n[s],f=r[s],h=u.length,c=l[s]=new Array(h),d,m=0;m<h;++m)(d=u[m]||f[m])&&(c[m]=d);for(;s<i;++s)l[s]=n[s];return new Ft(l,this._parents)}function D3(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function N3(e){e||(e=I3);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],l=a.length,s=i[o]=new Array(l),u,f=0;f<l;++f)(u=a[f])&&(s[f]=u);s.sort(t)}return new Ft(i,this._parents).order()}function I3(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function L3(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function R3(){return Array.from(this)}function F3(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function B3(){let e=0;for(const t of this)++e;return e}function O3(){return!this.node()}function q3(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,l;o<a;++o)(l=i[o])&&e.call(l,l.__data__,o,i);return this}function G3(e){return function(){this.removeAttribute(e)}}function U3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function z3(e,t){return function(){this.setAttribute(e,t)}}function H3(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function W3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function V3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Y3(e,t){var n=Yl(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?U3:G3:typeof t=="function"?n.local?V3:W3:n.local?H3:z3)(n,t))}function Lm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function j3(e){return function(){this.style.removeProperty(e)}}function X3(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Z3(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function K3(e,t,n){return arguments.length>1?this.each((t==null?j3:typeof t=="function"?Z3:X3)(e,t,n??"")):di(this.node(),e)}function di(e,t){return e.style.getPropertyValue(t)||Lm(e).getComputedStyle(e,null).getPropertyValue(t)}function J3(e){return function(){delete this[e]}}function Q3(e,t){return function(){this[e]=t}}function ew(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tw(e,t){return arguments.length>1?this.each((t==null?J3:typeof t=="function"?ew:Q3)(e,t)):this.node()[e]}function Rm(e){return e.trim().split(/^|\s+/)}function Uf(e){return e.classList||new Fm(e)}function Fm(e){this._node=e,this._names=Rm(e.getAttribute("class")||"")}Fm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Bm(e,t){for(var n=Uf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Om(e,t){for(var n=Uf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function nw(e){return function(){Bm(this,e)}}function rw(e){return function(){Om(this,e)}}function iw(e,t){return function(){(t.apply(this,arguments)?Bm:Om)(this,e)}}function ow(e,t){var n=Rm(e+"");if(arguments.length<2){for(var r=Uf(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?iw:t?nw:rw)(n,t))}function aw(){this.textContent=""}function lw(e){return function(){this.textContent=e}}function sw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function uw(e){return arguments.length?this.each(e==null?aw:(typeof e=="function"?sw:lw)(e)):this.node().textContent}function fw(){this.innerHTML=""}function cw(e){return function(){this.innerHTML=e}}function hw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function dw(e){return arguments.length?this.each(e==null?fw:(typeof e=="function"?hw:cw)(e)):this.node().innerHTML}function mw(){this.nextSibling&&this.parentNode.appendChild(this)}function pw(){return this.each(mw)}function bw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gw(){return this.each(bw)}function yw(e){var t=typeof e=="function"?e:jl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _w(){return null}function vw(e,t){var n=typeof e=="function"?e:jl(e),r=t==null?_w:typeof t=="function"?t:Gf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ww(){var e=this.parentNode;e&&e.removeChild(this)}function Mw(){return this.each(ww)}function xw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sw(e){return this.select(e?Pw:xw)}function Aw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kw(e){return function(t){e.call(this,t,this.__data__)}}function Ew(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Cw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Tw(e,t,n){return function(){var r=this.__on,i,o=kw(t);if(r){for(var a=0,l=r.length;a<l;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function $w(e,t,n){var r=Ew(e+""),i,o=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,f;s<u;++s)for(i=0,f=l[s];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=t?Tw:Cw,i=0;i<o;++i)this.each(l(r[i],t,n));return this}function qm(e,t,n){var r=Lm(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Dw(e,t){return function(){return qm(this,e,t)}}function Nw(e,t){return function(){return qm(this,e,t.apply(this,arguments))}}function Iw(e,t){return this.each((typeof t=="function"?Nw:Dw)(e,t))}function*Lw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Gm=[null];function Ft(e,t){this._groups=e,this._parents=t}function Bo(){return new Ft([[document.documentElement]],Gm)}function Rw(){return this}Ft.prototype=Bo.prototype={constructor:Ft,select:s3,selectAll:h3,selectChild:b3,selectChildren:v3,filter:w3,data:k3,enter:M3,exit:C3,join:T3,merge:$3,selection:Rw,order:D3,sort:N3,call:L3,nodes:R3,node:F3,size:B3,empty:O3,each:q3,attr:Y3,style:K3,property:tw,classed:ow,text:uw,html:dw,raise:pw,lower:gw,append:yw,insert:vw,remove:Mw,clone:Sw,datum:Aw,on:$w,dispatch:Iw,[Symbol.iterator]:Lw};function ao(e){return typeof e=="string"?new Ft([[document.querySelector(e)]],[document.documentElement]):new Ft([[e]],Gm)}function Fw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Bw(e,t){if(e=Fw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ci(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Oo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function cr(){}var Cr=.7,mi=1/Cr,ai="\\s*([+-]?\\d+)\\s*",bo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ow=/^#([0-9a-f]{3,8})$/,qw=new RegExp(`^rgb\\(${ai},${ai},${ai}\\)$`),Gw=new RegExp(`^rgb\\(${_n},${_n},${_n}\\)$`),Uw=new RegExp(`^rgba\\(${ai},${ai},${ai},${bo}\\)$`),zw=new RegExp(`^rgba\\(${_n},${_n},${_n},${bo}\\)$`),Hw=new RegExp(`^hsl\\(${bo},${_n},${_n}\\)$`),Ww=new RegExp(`^hsla\\(${bo},${_n},${_n},${bo}\\)$`),uh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ci(cr,Tr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fh,formatHex:fh,formatHex8:Vw,formatHsl:Yw,formatRgb:ch,toString:ch});function fh(){return this.rgb().formatHex()}function Vw(){return this.rgb().formatHex8()}function Yw(){return Um(this).formatHsl()}function ch(){return this.rgb().formatRgb()}function Tr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ow.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?hh(t):n===3?new ht(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?da(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?da(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qw.exec(e))?new ht(t[1],t[2],t[3],1):(t=Gw.exec(e))?new ht(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Uw.exec(e))?da(t[1],t[2],t[3],t[4]):(t=zw.exec(e))?da(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Hw.exec(e))?ph(t[1],t[2]/100,t[3]/100,1):(t=Ww.exec(e))?ph(t[1],t[2]/100,t[3]/100,t[4]):uh.hasOwnProperty(e)?hh(uh[e]):e==="transparent"?new ht(NaN,NaN,NaN,0):null}function hh(e){return new ht(e>>16&255,e>>8&255,e&255,1)}function da(e,t,n,r){return r<=0&&(e=t=n=NaN),new ht(e,t,n,r)}function zf(e){return e instanceof cr||(e=Tr(e)),e?(e=e.rgb(),new ht(e.r,e.g,e.b,e.opacity)):new ht}function lr(e,t,n,r){return arguments.length===1?zf(e):new ht(e,t,n,r??1)}function ht(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ci(ht,lr,Oo(cr,{brighter(e){return e=e==null?mi:Math.pow(mi,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ht(xr(this.r),xr(this.g),xr(this.b),tl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dh,formatHex:dh,formatHex8:jw,formatRgb:mh,toString:mh}));function dh(){return`#${wr(this.r)}${wr(this.g)}${wr(this.b)}`}function jw(){return`#${wr(this.r)}${wr(this.g)}${wr(this.b)}${wr((isNaN(this.opacity)?1:this.opacity)*255)}`}function mh(){const e=tl(this.opacity);return`${e===1?"rgb(":"rgba("}${xr(this.r)}, ${xr(this.g)}, ${xr(this.b)}${e===1?")":`, ${e})`}`}function tl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wr(e){return e=xr(e),(e<16?"0":"")+e.toString(16)}function ph(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tn(e,t,n,r)}function Um(e){if(e instanceof tn)return new tn(e.h,e.s,e.l,e.opacity);if(e instanceof cr||(e=Tr(e)),!e)return new tn;if(e instanceof tn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(t===o?a=(n-r)/l+(n<r)*6:n===o?a=(r-t)/l+2:a=(t-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new tn(a,l,s,e.opacity)}function Ru(e,t,n,r){return arguments.length===1?Um(e):new tn(e,t,n,r??1)}function tn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ci(tn,Ru,Oo(cr,{brighter(e){return e=e==null?mi:Math.pow(mi,e),new tn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new tn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ht(qs(e>=240?e-240:e+120,i,r),qs(e,i,r),qs(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new tn(bh(this.h),ma(this.s),ma(this.l),tl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tl(this.opacity);return`${e===1?"hsl(":"hsla("}${bh(this.h)}, ${ma(this.s)*100}%, ${ma(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bh(e){return e=(e||0)%360,e<0?e+360:e}function ma(e){return Math.max(0,Math.min(1,e||0))}function qs(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zm=Math.PI/180,Hm=180/Math.PI,nl=18,Wm=.96422,Vm=1,Ym=.82521,jm=4/29,li=6/29,Xm=3*li*li,Xw=li*li*li;function Zm(e){if(e instanceof vn)return new vn(e.l,e.a,e.b,e.opacity);if(e instanceof On)return Km(e);e instanceof ht||(e=zf(e));var t=Hs(e.r),n=Hs(e.g),r=Hs(e.b),i=Gs((.2225045*t+.7168786*n+.0606169*r)/Vm),o,a;return t===n&&n===r?o=a=i:(o=Gs((.4360747*t+.3850649*n+.1430804*r)/Wm),a=Gs((.0139322*t+.0971045*n+.7141733*r)/Ym)),new vn(116*i-16,500*(o-i),200*(i-a),e.opacity)}function Fu(e,t,n,r){return arguments.length===1?Zm(e):new vn(e,t,n,r??1)}function vn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ci(vn,Fu,Oo(cr,{brighter(e){return new vn(this.l+nl*(e??1),this.a,this.b,this.opacity)},darker(e){return new vn(this.l-nl*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Wm*Us(t),e=Vm*Us(e),n=Ym*Us(n),new ht(zs(3.1338561*t-1.6168667*e-.4906146*n),zs(-.9787684*t+1.9161415*e+.033454*n),zs(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Gs(e){return e>Xw?Math.pow(e,1/3):e/Xm+jm}function Us(e){return e>li?e*e*e:Xm*(e-jm)}function zs(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Hs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Zw(e){if(e instanceof On)return new On(e.h,e.c,e.l,e.opacity);if(e instanceof vn||(e=Zm(e)),e.a===0&&e.b===0)return new On(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Hm;return new On(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Bu(e,t,n,r){return arguments.length===1?Zw(e):new On(e,t,n,r??1)}function On(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Km(e){if(isNaN(e.h))return new vn(e.l,0,0,e.opacity);var t=e.h*zm;return new vn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ci(On,Bu,Oo(cr,{brighter(e){return new On(this.h,this.c,this.l+nl*(e??1),this.opacity)},darker(e){return new On(this.h,this.c,this.l-nl*(e??1),this.opacity)},rgb(){return Km(this).rgb()}}));var Jm=-.14861,Hf=1.78277,Wf=-.29227,Xl=-.90649,go=1.97294,gh=go*Xl,yh=go*Hf,_h=Hf*Wf-Xl*Jm;function Kw(e){if(e instanceof Pr)return new Pr(e.h,e.s,e.l,e.opacity);e instanceof ht||(e=zf(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(_h*r+gh*t-yh*n)/(_h+gh-yh),o=r-i,a=(go*(n-i)-Wf*o)/Xl,l=Math.sqrt(a*a+o*o)/(go*i*(1-i)),s=l?Math.atan2(a,o)*Hm-120:NaN;return new Pr(s<0?s+360:s,l,i,e.opacity)}function Pn(e,t,n,r){return arguments.length===1?Kw(e):new Pr(e,t,n,r??1)}function Pr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ci(Pr,Pn,Oo(cr,{brighter(e){return e=e==null?mi:Math.pow(mi,e),new Pr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new Pr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*zm,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ht(255*(t+n*(Jm*r+Hf*i)),255*(t+n*(Wf*r+Xl*i)),255*(t+n*(go*r)),this.opacity)}}));function Jw(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function Qw(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,l=r<t-1?e[r+2]:2*o-i;return Jw((n-r/t)*t,a,i,o,l)}}const Zl=e=>()=>e;function Qm(e,t){return function(n){return e+n*t}}function e5(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Vf(e,t){var n=t-e;return n?Qm(e,n>180||n<-180?n-360*Math.round(n/360):n):Zl(isNaN(e)?t:e)}function t5(e){return(e=+e)==1?yt:function(t,n){return n-t?e5(t,n,e):Zl(isNaN(t)?n:t)}}function yt(e,t){var n=t-e;return n?Qm(e,n):Zl(isNaN(e)?t:e)}const $r=function e(t){var n=t5(t);function r(i,o){var a=n((i=lr(i)).r,(o=lr(o)).r),l=n(i.g,o.g),s=n(i.b,o.b),u=yt(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function n5(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,l;for(a=0;a<n;++a)l=lr(t[a]),r[a]=l.r||0,i[a]=l.g||0,o[a]=l.b||0;return r=e(r),i=e(i),o=e(o),l.opacity=1,function(s){return l.r=r(s),l.g=i(s),l.b=o(s),l+""}}}var r5=n5(Qw);function i5(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function o5(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function a5(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=qo(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(l){for(a=0;a<r;++a)o[a]=i[a](l);return o}}function l5(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function gt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function s5(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=qo(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Ou=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ws=new RegExp(Ou.source,"g");function u5(e){return function(){return e}}function f5(e){return function(t){return e(t)+""}}function ep(e,t){var n=Ou.lastIndex=Ws.lastIndex=0,r,i,o,a=-1,l=[],s=[];for(e=e+"",t=t+"";(r=Ou.exec(e))&&(i=Ws.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:gt(r,i)})),n=Ws.lastIndex;return n<t.length&&(o=t.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?f5(s[0].x):u5(t):(t=s.length,function(u){for(var f=0,h;f<t;++f)l[(h=s[f]).i]=h.x(u);return l.join("")})}function qo(e,t){var n=typeof t,r;return t==null||n==="boolean"?Zl(t):(n==="number"?gt:n==="string"?(r=Tr(t))?(t=r,$r):ep:t instanceof Tr?$r:t instanceof Date?l5:o5(t)?i5:Array.isArray(t)?a5:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?s5:gt)(e,t)}function Yf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var vh=180/Math.PI,qu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tp(e,t,n,r,i,o){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),e*r<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*vh,skewX:Math.atan(s)*vh,scaleX:a,scaleY:l}}var pa;function c5(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qu:tp(t.a,t.b,t.c,t.d,t.e,t.f)}function h5(e){return e==null||(pa||(pa=document.createElementNS("http://www.w3.org/2000/svg","g")),pa.setAttribute("transform",e),!(e=pa.transform.baseVal.consolidate()))?qu:(e=e.matrix,tp(e.a,e.b,e.c,e.d,e.e,e.f))}function np(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,h,c,d,m){if(u!==h||f!==c){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:gt(u,h)},{i:p-2,x:gt(f,c)})}else(h||c)&&d.push("translate("+h+t+c+n)}function a(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:gt(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function l(u,f,h,c){u!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:gt(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function s(u,f,h,c,d,m){if(u!==h||f!==c){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:gt(u,h)},{i:p-2,x:gt(f,c)})}else(h!==1||c!==1)&&d.push(i(d)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,c),a(u.rotate,f.rotate,h,c),l(u.skewX,f.skewX,h,c),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(d){for(var m=-1,p=c.length,g;++m<p;)h[(g=c[m]).i]=g.x(d);return h.join("")}}}var d5=np(c5,"px, ","px)","deg)"),m5=np(h5,", ",")",")");function p5(e){return function(t,n){var r=e((t=Ru(t)).h,(n=Ru(n)).h),i=yt(t.s,n.s),o=yt(t.l,n.l),a=yt(t.opacity,n.opacity);return function(l){return t.h=r(l),t.s=i(l),t.l=o(l),t.opacity=a(l),t+""}}}const b5=p5(Vf);function g5(e,t){var n=yt((e=Fu(e)).l,(t=Fu(t)).l),r=yt(e.a,t.a),i=yt(e.b,t.b),o=yt(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function y5(e){return function(t,n){var r=e((t=Bu(t)).h,(n=Bu(n)).h),i=yt(t.c,n.c),o=yt(t.l,n.l),a=yt(t.opacity,n.opacity);return function(l){return t.h=r(l),t.c=i(l),t.l=o(l),t.opacity=a(l),t+""}}}const _5=y5(Vf);function rp(e){return function t(n){n=+n;function r(i,o){var a=e((i=Pn(i)).h,(o=Pn(o)).h),l=yt(i.s,o.s),s=yt(i.l,o.l),u=yt(i.opacity,o.opacity);return function(f){return i.h=a(f),i.s=l(f),i.l=s(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r}(1)}rp(Vf);var jf=rp(yt);function Kl(e,t){t===void 0&&(t=e,e=qo);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var l=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[l](a-l)}}function on(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var pi=0,Yi=0,Ri=0,ip=1e3,rl,ji,il=0,Dr=0,Jl=0,yo=typeof performance=="object"&&performance.now?performance:Date,op=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Xf(){return Dr||(op(v5),Dr=yo.now()+Jl)}function v5(){Dr=0}function ol(){this._call=this._time=this._next=null}ol.prototype=ap.prototype={constructor:ol,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Xf():+n)+(t==null?0:+t),!this._next&&ji!==this&&(ji?ji._next=this:rl=this,ji=this),this._call=e,this._time=n,Gu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gu())}};function ap(e,t,n){var r=new ol;return r.restart(e,t,n),r}function w5(){Xf(),++pi;for(var e=rl,t;e;)(t=Dr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pi}function wh(){Dr=(il=yo.now())+Jl,pi=Yi=0;try{w5()}finally{pi=0,x5(),Dr=0}}function M5(){var e=yo.now(),t=e-il;t>ip&&(Jl-=t,il=e)}function x5(){for(var e,t=rl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:rl=n);ji=e,Gu(r)}function Gu(e){if(!pi){Yi&&(Yi=clearTimeout(Yi));var t=e-Dr;t>24?(e<1/0&&(Yi=setTimeout(wh,e-yo.now()-Jl)),Ri&&(Ri=clearInterval(Ri))):(Ri||(il=yo.now(),Ri=setInterval(M5,ip)),pi=1,op(wh))}}function Mh(e,t,n){var r=new ol;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var P5=Tm("start","end","cancel","interrupt"),S5=[],lp=0,xh=1,Uu=2,Oa=3,Ph=4,zu=5,qa=6;function Ql(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;A5(e,n,{name:t,index:r,group:i,on:P5,tween:S5,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:lp})}function Zf(e,t){var n=un(e,t);if(n.state>lp)throw new Error("too late; already scheduled");return n}function kn(e,t){var n=un(e,t);if(n.state>Oa)throw new Error("too late; already running");return n}function un(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function A5(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ap(o,0,n.time);function o(u){n.state=xh,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,h,c,d;if(n.state!==xh)return s();for(f in r)if(d=r[f],d.name===n.name){if(d.state===Oa)return Mh(a);d.state===Ph?(d.state=qa,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[f]):+f<t&&(d.state=qa,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[f])}if(Mh(function(){n.state===Oa&&(n.state=Ph,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Uu,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Uu){for(n.state=Oa,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(d=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=zu,1),h=-1,c=i.length;++h<c;)i[h].call(e,f);n.state===zu&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=qa,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function k5(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Uu&&r.state<zu,r.state=qa,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function E5(e){return this.each(function(){k5(this,e)})}function C5(e,t){var n,r;return function(){var i=kn(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,l=r.length;a<l;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function T5(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=kn(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var l={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=l;break}s===u&&i.push(l)}o.tween=i}}function $5(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=un(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?C5:T5)(n,e,t))}function Kf(e,t,n){var r=e._id;return e.each(function(){var i=kn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return un(i,r).value[t]}}function sp(e,t){var n;return(typeof t=="number"?gt:t instanceof Tr?$r:(n=Tr(t))?(t=n,$r):ep)(e,t)}function D5(e){return function(){this.removeAttribute(e)}}function N5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function I5(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function L5(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function R5(e,t,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l)))}}function F5(e,t,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l)))}}function B5(e,t){var n=Yl(e),r=n==="transform"?m5:sp;return this.attrTween(e,typeof t=="function"?(n.local?F5:R5)(n,r,Kf(this,"attr."+e,t)):t==null?(n.local?N5:D5)(n):(n.local?L5:I5)(n,r,t))}function O5(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function q5(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function G5(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&q5(e,o)),n}return i._value=t,i}function U5(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&O5(e,o)),n}return i._value=t,i}function z5(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Yl(e);return this.tween(n,(r.local?G5:U5)(r,t))}function H5(e,t){return function(){Zf(this,e).delay=+t.apply(this,arguments)}}function W5(e,t){return t=+t,function(){Zf(this,e).delay=t}}function V5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?H5:W5)(t,e)):un(this.node(),t).delay}function Y5(e,t){return function(){kn(this,e).duration=+t.apply(this,arguments)}}function j5(e,t){return t=+t,function(){kn(this,e).duration=t}}function X5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Y5:j5)(t,e)):un(this.node(),t).duration}function Z5(e,t){if(typeof t!="function")throw new Error;return function(){kn(this,e).ease=t}}function K5(e){var t=this._id;return arguments.length?this.each(Z5(t,e)):un(this.node(),t).ease}function J5(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;kn(this,e).ease=n}}function Q5(e){if(typeof e!="function")throw new Error;return this.each(J5(this._id,e))}function e6(e){typeof e!="function"&&(e=Dm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&l.push(s);return new zn(r,this._parents,this._name,this._id)}function t6(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=t[l],u=n[l],f=s.length,h=a[l]=new Array(f),c,d=0;d<f;++d)(c=s[d]||u[d])&&(h[d]=c);for(;l<r;++l)a[l]=t[l];return new zn(a,this._parents,this._name,this._id)}function n6(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function r6(e,t,n){var r,i,o=n6(t)?Zf:kn;return function(){var a=o(this,e),l=a.on;l!==r&&(i=(r=l).copy()).on(t,n),a.on=i}}function i6(e,t){var n=this._id;return arguments.length<2?un(this.node(),n).on.on(e):this.each(r6(n,e,t))}function o6(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function a6(){return this.on("end.remove",o6(this._id))}function l6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gf(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var l=r[a],s=l.length,u=o[a]=new Array(s),f,h,c=0;c<s;++c)(f=l[c])&&(h=e.call(f,f.__data__,c,l))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,Ql(u[c],t,n,c,u,un(f,n)));return new zn(o,this._parents,t,n)}function s6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$m(e));for(var r=this._groups,i=r.length,o=[],a=[],l=0;l<i;++l)for(var s=r[l],u=s.length,f,h=0;h<u;++h)if(f=s[h]){for(var c=e.call(f,f.__data__,h,s),d,m=un(f,n),p=0,g=c.length;p<g;++p)(d=c[p])&&Ql(d,t,n,p,c,m);o.push(c),a.push(f)}return new zn(o,a,t,n)}var u6=Bo.prototype.constructor;function f6(){return new u6(this._groups,this._parents)}function c6(e,t){var n,r,i;return function(){var o=di(this,e),a=(this.style.removeProperty(e),di(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function up(e){return function(){this.style.removeProperty(e)}}function h6(e,t,n){var r,i=n+"",o;return function(){var a=di(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function d6(e,t,n){var r,i,o;return function(){var a=di(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),di(this,e))),a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function m6(e,t){var n,r,i,o="style."+t,a="end."+o,l;return function(){var s=kn(this,e),u=s.on,f=s.value[o]==null?l||(l=up(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),s.on=r}}function p6(e,t,n){var r=(e+="")=="transform"?d5:sp;return t==null?this.styleTween(e,c6(e,r)).on("end.style."+e,up(e)):typeof t=="function"?this.styleTween(e,d6(e,r,Kf(this,"style."+e,t))).each(m6(this._id,e)):this.styleTween(e,h6(e,r,t),n).on("end.style."+e,null)}function b6(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function g6(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&b6(e,a,n)),r}return o._value=t,o}function y6(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,g6(e,t,n??""))}function _6(e){return function(){this.textContent=e}}function v6(e){return function(){var t=e(this);this.textContent=t??""}}function w6(e){return this.tween("text",typeof e=="function"?v6(Kf(this,"text",e)):_6(e==null?"":e+""))}function M6(e){return function(t){this.textContent=e.call(this,t)}}function x6(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&M6(i)),t}return r._value=e,r}function P6(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,x6(e))}function S6(){for(var e=this._name,t=this._id,n=fp(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var f=un(s,t);Ql(s,e,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new zn(r,this._parents,e,n)}function A6(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var l={value:a},s={value:function(){--i===0&&o()}};n.each(function(){var u=kn(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),i===0&&o()})}var k6=0;function zn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function fp(){return++k6}var $n=Bo.prototype;zn.prototype={constructor:zn,select:l6,selectAll:s6,selectChild:$n.selectChild,selectChildren:$n.selectChildren,filter:e6,merge:t6,selection:f6,transition:S6,call:$n.call,nodes:$n.nodes,node:$n.node,size:$n.size,empty:$n.empty,each:$n.each,on:i6,attr:B5,attrTween:z5,style:p6,styleTween:y6,text:w6,textTween:P6,remove:a6,tween:$5,delay:V5,duration:X5,ease:K5,easeVarying:Q5,end:A6,[Symbol.iterator]:$n[Symbol.iterator]};function E6(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var C6={time:null,delay:0,duration:250,ease:E6};function T6(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function $6(e){var t,n;e instanceof zn?(t=e._id,e=e._name):(t=fp(),(n=C6).time=Xf(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&Ql(s,e,t,u,a,n||T6(s,t));return new zn(r,this._parents,e,t)}Bo.prototype.interrupt=E5;Bo.prototype.transition=$6;const Hu=Math.PI,Wu=2*Hu,yr=1e-6,D6=Wu-yr;function cp(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function N6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cp;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class hp{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cp:N6(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,l=this._y1,s=r-t,u=i-n,f=a-t,h=l-n,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(c>yr)if(!(Math.abs(h*s-u*f)>yr)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-a,m=i-l,p=s*s+u*u,g=d*d+m*m,v=Math.sqrt(p),b=Math.sqrt(c),w=o*Math.tan((Hu-Math.acos((p+c-g)/(2*v*b)))/2),_=w/b,x=w/v;Math.abs(_-1)>yr&&this._append`L${t+_*f},${n+_*h}`,this._append`A${o},${o},0,0,${+(h*d>f*m)},${this._x1=t+x*s},${this._y1=n+x*u}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),s=r*Math.sin(i),u=t+l,f=n+s,h=1^a,c=a?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>yr||Math.abs(this._y1-f)>yr)&&this._append`L${u},${f}`,r&&(c<0&&(c=c%Wu+Wu),c>D6?this._append`A${r},${r},0,1,${h},${t-l},${n-s}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:c>yr&&this._append`A${r},${r},0,${+(c>=Hu)},${h},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function tr(e=3){return new hp(+e)}var Sh={},Vs={},Ys=34,Fi=10,js=13;function dp(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function I6(e,t){var n=dp(e);return function(r,i){return t(n(r),i,e)}}function Ah(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function kt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function L6(e){return e<0?"-"+kt(-e,6):e>9999?"+"+kt(e,6):kt(e,4)}function R6(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":L6(e.getUTCFullYear())+"-"+kt(e.getUTCMonth()+1,2)+"-"+kt(e.getUTCDate(),2)+(i?"T"+kt(t,2)+":"+kt(n,2)+":"+kt(r,2)+"."+kt(i,3)+"Z":r?"T"+kt(t,2)+":"+kt(n,2)+":"+kt(r,2)+"Z":n||t?"T"+kt(t,2)+":"+kt(n,2)+"Z":"")}function F6(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(h,c){var d,m,p=i(h,function(g,v){if(d)return d(g,v-1);m=g,d=c?I6(g,c):dp(g)});return p.columns=m||[],p}function i(h,c){var d=[],m=h.length,p=0,g=0,v,b=m<=0,w=!1;h.charCodeAt(m-1)===Fi&&--m,h.charCodeAt(m-1)===js&&--m;function _(){if(b)return Vs;if(w)return w=!1,Sh;var M,S=p,T;if(h.charCodeAt(S)===Ys){for(;p++<m&&h.charCodeAt(p)!==Ys||h.charCodeAt(++p)===Ys;);return(M=p)>=m?b=!0:(T=h.charCodeAt(p++))===Fi?w=!0:T===js&&(w=!0,h.charCodeAt(p)===Fi&&++p),h.slice(S+1,M-1).replace(/""/g,'"')}for(;p<m;){if((T=h.charCodeAt(M=p++))===Fi)w=!0;else if(T===js)w=!0,h.charCodeAt(p)===Fi&&++p;else if(T!==n)continue;return h.slice(S,M)}return b=!0,h.slice(S,m)}for(;(v=_())!==Vs;){for(var x=[];v!==Sh&&v!==Vs;)x.push(v),v=_();c&&(x=c(x,g++))==null||d.push(x)}return d}function o(h,c){return h.map(function(d){return c.map(function(m){return f(d[m])}).join(e)})}function a(h,c){return c==null&&(c=Ah(h)),[c.map(f).join(e)].concat(o(h,c)).join(`
`)}function l(h,c){return c==null&&(c=Ah(h)),o(h,c).join(`
`)}function s(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?R6(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:a,formatBody:l,formatRows:s,formatRow:u,formatValue:f}}var B6=F6(","),mp=B6.parse;function O6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function al(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function bi(e){return e=al(Math.abs(e)),e?e[1]:NaN}function q6(e,t){return function(n,r){for(var i=n.length,o=[],a=0,l=e[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),o.push(n.substring(i-=l,i+l)),!((s+=l+1)>r));)l=e[a=(a+1)%e.length];return o.reverse().join(t)}}function G6(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var U6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _o(e){if(!(t=U6.exec(e)))throw new Error("invalid format: "+e);var t;return new Jf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_o.prototype=Jf.prototype;function Jf(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Jf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function z6(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var pp;function H6(e,t){var n=al(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(pp=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+al(e,Math.max(0,t+o-1))[0]}function kh(e,t){var n=al(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Eh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:O6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kh(e*100,t),r:kh,s:H6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ch(e){return e}var Th=Array.prototype.map,$h=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function W6(e){var t=e.grouping===void 0||e.thousands===void 0?Ch:q6(Th.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Ch:G6(Th.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(h){h=_o(h);var c=h.fill,d=h.align,m=h.sign,p=h.symbol,g=h.zero,v=h.width,b=h.comma,w=h.precision,_=h.trim,x=h.type;x==="n"?(b=!0,x="g"):Eh[x]||(w===void 0&&(w=12),_=!0,x="g"),(g||c==="0"&&d==="=")&&(g=!0,c="0",d="=");var M=p==="$"?n:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=p==="$"?r:/[%p]/.test(x)?a:"",T=Eh[x],I=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function L(C){var G=M,Y=S,N,$,V;if(x==="c")Y=T(C)+Y,C="";else{C=+C;var le=C<0||1/C<0;if(C=isNaN(C)?s:T(Math.abs(C),w),_&&(C=z6(C)),le&&+C==0&&m!=="+"&&(le=!1),G=(le?m==="("?m:l:m==="-"||m==="("?"":m)+G,Y=(x==="s"?$h[8+pp/3]:"")+Y+(le&&m==="("?")":""),I){for(N=-1,$=C.length;++N<$;)if(V=C.charCodeAt(N),48>V||V>57){Y=(V===46?i+C.slice(N+1):C.slice(N))+Y,C=C.slice(0,N);break}}}b&&!g&&(C=t(C,1/0));var ie=G.length+C.length+Y.length,se=ie<v?new Array(v-ie+1).join(c):"";switch(b&&g&&(C=t(se+C,se.length?v-Y.length:1/0),se=""),d){case"<":C=G+C+Y+se;break;case"=":C=G+se+C+Y;break;case"^":C=se.slice(0,ie=se.length>>1)+G+C+Y+se.slice(ie);break;default:C=se+G+C+Y;break}return o(C)}return L.toString=function(){return h+""},L}function f(h,c){var d=u((h=_o(h),h.type="f",h)),m=Math.max(-8,Math.min(8,Math.floor(bi(c)/3)))*3,p=Math.pow(10,-m),g=$h[8+m/3];return function(v){return d(p*v)+g}}return{format:u,formatPrefix:f}}var ba,Ti,bp;V6({thousands:",",grouping:[3],currency:["$",""]});function V6(e){return ba=W6(e),Ti=ba.format,bp=ba.formatPrefix,ba}function Y6(e){return Math.max(0,-bi(Math.abs(e)))}function j6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bi(t)/3)))*3-bi(Math.abs(e)))}function X6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bi(t)-bi(e))+1}var $e=1e-6,gp=1e-12,Ie=Math.PI,Ke=Ie/2,Dh=Ie/4,Bt=Ie*2,vt=180/Ie,Ze=Ie/180,ze=Math.abs,$i=Math.atan,Hn=Math.atan2,Ne=Math.cos,yp=Math.exp,ll=Math.log,Xs=Math.pow,Ee=Math.sin,Wt=Math.sign||function(e){return e>0?1:e<0?-1:0},Dt=Math.sqrt,Qf=Math.tan;function _p(e){return e>1?0:e<-1?Ie:Math.acos(e)}function Xt(e){return e>1?Ke:e<-1?-Ke:Math.asin(e)}function Vt(){}function sl(e,t){e&&Ih.hasOwnProperty(e.type)&&Ih[e.type](e,t)}var Nh={Feature:function(e,t){sl(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)sl(n[r].geometry,t)}},Ih={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Vu(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Vu(n[r],t,0)},Polygon:function(e,t){Lh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Lh(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)sl(n[r],t)}};function Vu(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function Lh(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Vu(e[n],t,1);t.polygonEnd()}function _r(e,t){e&&Nh.hasOwnProperty(e.type)?Nh[e.type](e,t):sl(e,t)}function Yu(e){return[Hn(e[1],e[0]),Xt(e[2])]}function gi(e){var t=e[0],n=e[1],r=Ne(n);return[r*Ne(t),r*Ee(t),Ee(n)]}function ga(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ul(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Zs(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ya(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ju(e){var t=Dt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Xu(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Zu(e,t){return ze(e)>Ie&&(e-=Math.round(e/Bt)*Bt),[e,t]}Zu.invert=Zu;function vp(e,t,n){return(e%=Bt)?t||n?Xu(Fh(e),Bh(t,n)):Fh(e):t||n?Bh(t,n):Zu}function Rh(e){return function(t,n){return t+=e,ze(t)>Ie&&(t-=Math.round(t/Bt)*Bt),[t,n]}}function Fh(e){var t=Rh(e);return t.invert=Rh(-e),t}function Bh(e,t){var n=Ne(e),r=Ee(e),i=Ne(t),o=Ee(t);function a(l,s){var u=Ne(s),f=Ne(l)*u,h=Ee(l)*u,c=Ee(s),d=c*n+f*r;return[Hn(h*i-d*o,f*n-c*r),Xt(d*i+h*o)]}return a.invert=function(l,s){var u=Ne(s),f=Ne(l)*u,h=Ee(l)*u,c=Ee(s),d=c*i-h*o;return[Hn(h*i+c*o,f*n+d*r),Xt(d*n-f*r)]},a}function Z6(e){e=vp(e[0]*Ze,e[1]*Ze,e.length>2?e[2]*Ze:0);function t(n){return n=e(n[0]*Ze,n[1]*Ze),n[0]*=vt,n[1]*=vt,n}return t.invert=function(n){return n=e.invert(n[0]*Ze,n[1]*Ze),n[0]*=vt,n[1]*=vt,n},t}function K6(e,t,n,r,i,o){if(n){var a=Ne(t),l=Ee(t),s=r*n;i==null?(i=t+r*Bt,o=t-s/2):(i=Oh(a,i),o=Oh(a,o),(r>0?i<o:i>o)&&(i+=r*Bt));for(var u,f=i;r>0?f>o:f<o;f-=s)u=Yu([a,-l*Ne(f),-l*Ee(f)]),e.point(u[0],u[1])}}function Oh(e,t){t=gi(t),t[0]-=e,ju(t);var n=_p(-t[1]);return((-t[2]<0?-n:n)+Bt-$e)%Bt}function wp(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Vt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ga(e,t){return ze(e[0]-t[0])<$e&&ze(e[1]-t[1])<$e}function _a(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Mp(e,t,n,r,i){var o=[],a=[],l,s;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,g=m[0],v=m[p],b;if(Ga(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),l=0;l<p;++l)i.point((g=m[l])[0],g[1]);i.lineEnd();return}v[0]+=2*$e}o.push(b=new _a(g,m,null,!0)),a.push(b.o=new _a(g,null,b,!1)),o.push(b=new _a(v,m,null,!1)),a.push(b.o=new _a(v,null,b,!0))}}),!!o.length){for(a.sort(t),qh(o),qh(a),l=0,s=a.length;l<s;++l)a[l].e=n=!n;for(var u=o[0],f,h;;){for(var c=u,d=!0;c.v;)if((c=c.n)===u)return;f=c.z,i.lineStart();do{if(c.v=c.o.v=!0,c.e){if(d)for(l=0,s=f.length;l<s;++l)i.point((h=f[l])[0],h[1]);else r(c.x,c.n.x,1,i);c=c.n}else{if(d)for(f=c.p.z,l=f.length-1;l>=0;--l)i.point((h=f[l])[0],h[1]);else r(c.x,c.p.x,-1,i);c=c.p}c=c.o,f=c.z,d=!d}while(!c.v);i.lineEnd()}}}function qh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Ks(e){return ze(e[0])<=Ie?e[0]:Wt(e[0])*((ze(e[0])+Ie)%Bt-Ie)}function J6(e,t){var n=Ks(t),r=t[1],i=Ee(r),o=[Ee(n),-Ne(n),0],a=0,l=0,s=new kr;i===1?r=Ke+$e:i===-1&&(r=-Ke-$e);for(var u=0,f=e.length;u<f;++u)if(c=(h=e[u]).length)for(var h,c,d=h[c-1],m=Ks(d),p=d[1]/2+Dh,g=Ee(p),v=Ne(p),b=0;b<c;++b,m=_,g=M,v=S,d=w){var w=h[b],_=Ks(w),x=w[1]/2+Dh,M=Ee(x),S=Ne(x),T=_-m,I=T>=0?1:-1,L=I*T,C=L>Ie,G=g*M;if(s.add(Hn(G*I*Ee(L),v*S+G*Ne(L))),a+=C?T+I*Bt:T,C^m>=n^_>=n){var Y=ul(gi(d),gi(w));ju(Y);var N=ul(o,Y);ju(N);var $=(C^T>=0?-1:1)*Xt(N[2]);(r>$||r===$&&(Y[0]||Y[1]))&&(l+=C^T>=0?1:-1)}}return(a<-$e||a<$e&&s<-gp)^l&1}function xp(e,t,n,r){return function(i){var o=t(i),a=wp(),l=t(a),s=!1,u,f,h,c={point:d,lineStart:p,lineEnd:g,polygonStart:function(){c.point=v,c.lineStart=b,c.lineEnd=w,f=[],u=[]},polygonEnd:function(){c.point=d,c.lineStart=p,c.lineEnd=g,f=Cm(f);var _=J6(u,r);f.length?(s||(i.polygonStart(),s=!0),Mp(f,e7,_,n,i)):_&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(_,x){e(_,x)&&i.point(_,x)}function m(_,x){o.point(_,x)}function p(){c.point=m,o.lineStart()}function g(){c.point=d,o.lineEnd()}function v(_,x){h.push([_,x]),l.point(_,x)}function b(){l.lineStart(),h=[]}function w(){v(h[0][0],h[0][1]),l.lineEnd();var _=l.clean(),x=a.result(),M,S=x.length,T,I,L;if(h.pop(),u.push(h),h=null,!!S){if(_&1){if(I=x[0],(T=I.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),M=0;M<T;++M)i.point((L=I[M])[0],L[1]);i.lineEnd()}return}S>1&&_&2&&x.push(x.pop().concat(x.shift())),f.push(x.filter(Q6))}}return c}}function Q6(e){return e.length>1}function e7(e,t){return((e=e.x)[0]<0?e[1]-Ke-$e:Ke-e[1])-((t=t.x)[0]<0?t[1]-Ke-$e:Ke-t[1])}const Gh=xp(function(){return!0},t7,r7,[-Ie,-Ke]);function t7(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var l=o>0?Ie:-Ie,s=ze(o-t);ze(s-Ie)<$e?(e.point(t,n=(n+a)/2>0?Ke:-Ke),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(o,n),i=0):r!==l&&s>=Ie&&(ze(t-r)<$e&&(t-=r*$e),ze(o-l)<$e&&(o-=l*$e),n=n7(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),i=0),e.point(t=o,n=a),r=l},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function n7(e,t,n,r){var i,o,a=Ee(e-n);return ze(a)>$e?$i((Ee(t)*(o=Ne(r))*Ee(n)-Ee(r)*(i=Ne(t))*Ee(e))/(i*o*a)):(t+r)/2}function r7(e,t,n,r){var i;if(e==null)i=n*Ke,r.point(-Ie,i),r.point(0,i),r.point(Ie,i),r.point(Ie,0),r.point(Ie,-i),r.point(0,-i),r.point(-Ie,-i),r.point(-Ie,0),r.point(-Ie,i);else if(ze(e[0]-t[0])>$e){var o=e[0]<t[0]?Ie:-Ie;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function i7(e){var t=Ne(e),n=6*Ze,r=t>0,i=ze(t)>$e;function o(f,h,c,d){K6(d,e,n,c,f,h)}function a(f,h){return Ne(f)*Ne(h)>t}function l(f){var h,c,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(g,v){var b=[g,v],w,_=a(g,v),x=r?_?0:u(g,v):_?u(g+(g<0?Ie:-Ie),v):0;if(!h&&(m=d=_)&&f.lineStart(),_!==d&&(w=s(h,b),(!w||Ga(h,w)||Ga(b,w))&&(b[2]=1)),_!==d)p=0,_?(f.lineStart(),w=s(b,h),f.point(w[0],w[1])):(w=s(h,b),f.point(w[0],w[1],2),f.lineEnd()),h=w;else if(i&&h&&r^_){var M;!(x&c)&&(M=s(b,h,!0))&&(p=0,r?(f.lineStart(),f.point(M[0][0],M[0][1]),f.point(M[1][0],M[1][1]),f.lineEnd()):(f.point(M[1][0],M[1][1]),f.lineEnd(),f.lineStart(),f.point(M[0][0],M[0][1],3)))}_&&(!h||!Ga(h,b))&&f.point(b[0],b[1]),h=b,d=_,c=x},lineEnd:function(){d&&f.lineEnd(),h=null},clean:function(){return p|(m&&d)<<1}}}function s(f,h,c){var d=gi(f),m=gi(h),p=[1,0,0],g=ul(d,m),v=ga(g,g),b=g[0],w=v-b*b;if(!w)return!c&&f;var _=t*v/w,x=-t*b/w,M=ul(p,g),S=ya(p,_),T=ya(g,x);Zs(S,T);var I=M,L=ga(S,I),C=ga(I,I),G=L*L-C*(ga(S,S)-1);if(!(G<0)){var Y=Dt(G),N=ya(I,(-L-Y)/C);if(Zs(N,S),N=Yu(N),!c)return N;var $=f[0],V=h[0],le=f[1],ie=h[1],se;V<$&&(se=$,$=V,V=se);var Z=V-$,Q=ze(Z-Ie)<$e,K=Q||Z<$e;if(!Q&&ie<le&&(se=le,le=ie,ie=se),K?Q?le+ie>0^N[1]<(ze(N[0]-$)<$e?le:ie):le<=N[1]&&N[1]<=ie:Z>Ie^($<=N[0]&&N[0]<=V)){var ne=ya(I,(-L+Y)/C);return Zs(ne,S),[N,Yu(ne)]}}}function u(f,h){var c=r?e:Ie-e,d=0;return f<-c?d|=1:f>c&&(d|=2),h<-c?d|=4:h>c&&(d|=8),d}return xp(a,l,o,r?[0,-e]:[-Ie,e-Ie])}function o7(e,t,n,r,i,o){var a=e[0],l=e[1],s=t[0],u=t[1],f=0,h=1,c=s-a,d=u-l,m;if(m=n-a,!(!c&&m>0)){if(m/=c,c<0){if(m<f)return;m<h&&(h=m)}else if(c>0){if(m>h)return;m>f&&(f=m)}if(m=i-a,!(!c&&m<0)){if(m/=c,c<0){if(m>h)return;m>f&&(f=m)}else if(c>0){if(m<f)return;m<h&&(h=m)}if(m=r-l,!(!d&&m>0)){if(m/=d,d<0){if(m<f)return;m<h&&(h=m)}else if(d>0){if(m>h)return;m>f&&(f=m)}if(m=o-l,!(!d&&m<0)){if(m/=d,d<0){if(m>h)return;m>f&&(f=m)}else if(d>0){if(m<f)return;m<h&&(h=m)}return f>0&&(e[0]=a+f*c,e[1]=l+f*d),h<1&&(t[0]=a+h*c,t[1]=l+h*d),!0}}}}}var Xi=1e9,va=-Xi;function Pp(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function o(u,f,h,c){var d=0,m=0;if(u==null||(d=a(u,h))!==(m=a(f,h))||s(u,f)<0^h>0)do c.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+h+4)%4)!==m);else c.point(f[0],f[1])}function a(u,f){return ze(u[0]-e)<$e?f>0?0:3:ze(u[0]-n)<$e?f>0?2:1:ze(u[1]-t)<$e?f>0?1:0:f>0?3:2}function l(u,f){return s(u.x,f.x)}function s(u,f){var h=a(u,1),c=a(f,1);return h!==c?h-c:h===0?f[1]-u[1]:h===1?u[0]-f[0]:h===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,h=wp(),c,d,m,p,g,v,b,w,_,x,M,S={point:T,lineStart:G,lineEnd:Y,polygonStart:L,polygonEnd:C};function T($,V){i($,V)&&f.point($,V)}function I(){for(var $=0,V=0,le=d.length;V<le;++V)for(var ie=d[V],se=1,Z=ie.length,Q=ie[0],K,ne,ge=Q[0],pe=Q[1];se<Z;++se)K=ge,ne=pe,Q=ie[se],ge=Q[0],pe=Q[1],ne<=r?pe>r&&(ge-K)*(r-ne)>(pe-ne)*(e-K)&&++$:pe<=r&&(ge-K)*(r-ne)<(pe-ne)*(e-K)&&--$;return $}function L(){f=h,c=[],d=[],M=!0}function C(){var $=I(),V=M&&$,le=(c=Cm(c)).length;(V||le)&&(u.polygonStart(),V&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),le&&Mp(c,l,$,o,u),u.polygonEnd()),f=u,c=d=m=null}function G(){S.point=N,d&&d.push(m=[]),x=!0,_=!1,b=w=NaN}function Y(){c&&(N(p,g),v&&_&&h.rejoin(),c.push(h.result())),S.point=T,_&&f.lineEnd()}function N($,V){var le=i($,V);if(d&&m.push([$,V]),x)p=$,g=V,v=le,x=!1,le&&(f.lineStart(),f.point($,V));else if(le&&_)f.point($,V);else{var ie=[b=Math.max(va,Math.min(Xi,b)),w=Math.max(va,Math.min(Xi,w))],se=[$=Math.max(va,Math.min(Xi,$)),V=Math.max(va,Math.min(Xi,V))];o7(ie,se,e,t,n,r)?(_||(f.lineStart(),f.point(ie[0],ie[1])),f.point(se[0],se[1]),le||f.lineEnd(),M=!1):le&&(f.lineStart(),f.point($,V),M=!1)}b=$,w=V,_=le}return S}}const Ku=e=>e;var Js=new kr,Ju=new kr,Sp,Ap,Qu,ef,Bn={point:Vt,lineStart:Vt,lineEnd:Vt,polygonStart:function(){Bn.lineStart=a7,Bn.lineEnd=s7},polygonEnd:function(){Bn.lineStart=Bn.lineEnd=Bn.point=Vt,Js.add(ze(Ju)),Ju=new kr},result:function(){var e=Js/2;return Js=new kr,e}};function a7(){Bn.point=l7}function l7(e,t){Bn.point=kp,Sp=Qu=e,Ap=ef=t}function kp(e,t){Ju.add(ef*e-Qu*t),Qu=e,ef=t}function s7(){kp(Sp,Ap)}var yi=1/0,fl=yi,vo=-yi,cl=vo,hl={point:u7,lineStart:Vt,lineEnd:Vt,polygonStart:Vt,polygonEnd:Vt,result:function(){var e=[[yi,fl],[vo,cl]];return vo=cl=-(fl=yi=1/0),e}};function u7(e,t){e<yi&&(yi=e),e>vo&&(vo=e),t<fl&&(fl=t),t>cl&&(cl=t)}var tf=0,nf=0,Zi=0,dl=0,ml=0,ti=0,rf=0,of=0,Ki=0,Ep,Cp,mn,pn,zt={point:Nr,lineStart:Uh,lineEnd:zh,polygonStart:function(){zt.lineStart=h7,zt.lineEnd=d7},polygonEnd:function(){zt.point=Nr,zt.lineStart=Uh,zt.lineEnd=zh},result:function(){var e=Ki?[rf/Ki,of/Ki]:ti?[dl/ti,ml/ti]:Zi?[tf/Zi,nf/Zi]:[NaN,NaN];return tf=nf=Zi=dl=ml=ti=rf=of=Ki=0,e}};function Nr(e,t){tf+=e,nf+=t,++Zi}function Uh(){zt.point=f7}function f7(e,t){zt.point=c7,Nr(mn=e,pn=t)}function c7(e,t){var n=e-mn,r=t-pn,i=Dt(n*n+r*r);dl+=i*(mn+e)/2,ml+=i*(pn+t)/2,ti+=i,Nr(mn=e,pn=t)}function zh(){zt.point=Nr}function h7(){zt.point=m7}function d7(){Tp(Ep,Cp)}function m7(e,t){zt.point=Tp,Nr(Ep=mn=e,Cp=pn=t)}function Tp(e,t){var n=e-mn,r=t-pn,i=Dt(n*n+r*r);dl+=i*(mn+e)/2,ml+=i*(pn+t)/2,ti+=i,i=pn*e-mn*t,rf+=i*(mn+e),of+=i*(pn+t),Ki+=i*3,Nr(mn=e,pn=t)}function $p(e){this._context=e}$p.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Bt);break}}},result:Vt};var af=new kr,Qs,Dp,Np,Ji,Qi,wo={point:Vt,lineStart:function(){wo.point=p7},lineEnd:function(){Qs&&Ip(Dp,Np),wo.point=Vt},polygonStart:function(){Qs=!0},polygonEnd:function(){Qs=null},result:function(){var e=+af;return af=new kr,e}};function p7(e,t){wo.point=Ip,Dp=Ji=e,Np=Qi=t}function Ip(e,t){Ji-=e,Qi-=t,af.add(Dt(Ji*Ji+Qi*Qi)),Ji=e,Qi=t}let Hh,pl,Wh,Vh;class Yh{constructor(t){this._append=t==null?Lp:b7(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Wh||this._append!==pl){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Wh=r,pl=this._append,Vh=this._,this._=i}this._+=Vh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Lp(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function b7(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Lp;if(t!==Hh){const n=10**t;Hh=t,pl=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return pl}function es(e,t){let n=3,r=4.5,i,o;function a(l){return l&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),_r(l,i(o))),o.result()}return a.area=function(l){return _r(l,i(Bn)),Bn.result()},a.measure=function(l){return _r(l,i(wo)),wo.result()},a.bounds=function(l){return _r(l,i(hl)),hl.result()},a.centroid=function(l){return _r(l,i(zt)),zt.result()},a.projection=function(l){return arguments.length?(i=l==null?(e=null,Ku):(e=l).stream,a):e},a.context=function(l){return arguments.length?(o=l==null?(t=null,new Yh(n)):new $p(t=l),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(l){return arguments.length?(r=typeof l=="function"?l:(o.pointRadius(+l),+l),a):r},a.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const s=Math.floor(l);if(!(s>=0))throw new RangeError(`invalid digits: ${l}`);n=s}return t===null&&(o=new Yh(n)),a},a.projection(e).digits(n).context(t)}function lf(e){return{stream:ts(e)}}function ts(e){return function(t){var n=new sf;for(var r in e)n[r]=e[r];return n.stream=t,n}}function sf(){}sf.prototype={constructor:sf,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ec(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),_r(n,e.stream(hl)),t(hl.result()),r!=null&&e.clipExtent(r),e}function tc(e,t,n){return ec(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),l=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([l,s])},n)}function Rp(e,t,n){return tc(e,[[0,0],t],n)}function Fp(e,t,n){return ec(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,l=-o*r[0][1];e.scale(150*o).translate([a,l])},n)}function Bp(e,t,n){return ec(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],l=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}var jh=16,g7=Ne(30*Ze);function Xh(e,t){return+t?_7(e,t):y7(e)}function y7(e){return ts({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function _7(e,t){function n(r,i,o,a,l,s,u,f,h,c,d,m,p,g){var v=u-r,b=f-i,w=v*v+b*b;if(w>4*t&&p--){var _=a+c,x=l+d,M=s+m,S=Dt(_*_+x*x+M*M),T=Xt(M/=S),I=ze(ze(M)-1)<$e||ze(o-h)<$e?(o+h)/2:Hn(x,_),L=e(I,T),C=L[0],G=L[1],Y=C-r,N=G-i,$=b*Y-v*N;($*$/w>t||ze((v*Y+b*N)/w-.5)>.3||a*c+l*d+s*m<g7)&&(n(r,i,o,a,l,s,C,G,I,_/=S,x/=S,M,p,g),g.point(C,G),n(C,G,I,_,x,M,u,f,h,c,d,m,p,g))}}return function(r){var i,o,a,l,s,u,f,h,c,d,m,p,g={point:v,lineStart:b,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function v(T,I){T=e(T,I),r.point(T[0],T[1])}function b(){h=NaN,g.point=w,r.lineStart()}function w(T,I){var L=gi([T,I]),C=e(T,I);n(h,c,f,d,m,p,h=C[0],c=C[1],f=T,d=L[0],m=L[1],p=L[2],jh,r),r.point(h,c)}function _(){g.point=v,r.lineEnd()}function x(){b(),g.point=M,g.lineEnd=S}function M(T,I){w(i=T,I),o=h,a=c,l=d,s=m,u=p,g.point=w}function S(){n(h,c,f,d,m,p,o,a,i,l,s,u,jh,r),g.lineEnd=_,_()}return g}}var v7=ts({point:function(e,t){this.stream.point(e*Ze,t*Ze)}});function w7(e){return ts({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function M7(e,t,n,r,i){function o(a,l){return a*=r,l*=i,[t+e*a,n-e*l]}return o.invert=function(a,l){return[(a-t)/e*r,(n-l)/e*i]},o}function Zh(e,t,n,r,i,o){if(!o)return M7(e,t,n,r,i);var a=Ne(o),l=Ee(o),s=a*e,u=l*e,f=a/e,h=l/e,c=(l*n-a*t)/e,d=(l*t+a*n)/e;function m(p,g){return p*=r,g*=i,[s*p-u*g+t,n-u*p-s*g]}return m.invert=function(p,g){return[r*(f*p-h*g+c),i*(d-h*p-f*g)]},m}function hr(e){return Op(function(){return e})()}function Op(e){var t,n=150,r=480,i=250,o=0,a=0,l=0,s=0,u=0,f,h=0,c=1,d=1,m=null,p=Gh,g=null,v,b,w,_=Ku,x=.5,M,S,T,I,L;function C($){return T($[0]*Ze,$[1]*Ze)}function G($){return $=T.invert($[0],$[1]),$&&[$[0]*vt,$[1]*vt]}C.stream=function($){return I&&L===$?I:I=v7(w7(f)(p(M(_(L=$)))))},C.preclip=function($){return arguments.length?(p=$,m=void 0,N()):p},C.postclip=function($){return arguments.length?(_=$,g=v=b=w=null,N()):_},C.clipAngle=function($){return arguments.length?(p=+$?i7(m=$*Ze):(m=null,Gh),N()):m*vt},C.clipExtent=function($){return arguments.length?(_=$==null?(g=v=b=w=null,Ku):Pp(g=+$[0][0],v=+$[0][1],b=+$[1][0],w=+$[1][1]),N()):g==null?null:[[g,v],[b,w]]},C.scale=function($){return arguments.length?(n=+$,Y()):n},C.translate=function($){return arguments.length?(r=+$[0],i=+$[1],Y()):[r,i]},C.center=function($){return arguments.length?(o=$[0]%360*Ze,a=$[1]%360*Ze,Y()):[o*vt,a*vt]},C.rotate=function($){return arguments.length?(l=$[0]%360*Ze,s=$[1]%360*Ze,u=$.length>2?$[2]%360*Ze:0,Y()):[l*vt,s*vt,u*vt]},C.angle=function($){return arguments.length?(h=$%360*Ze,Y()):h*vt},C.reflectX=function($){return arguments.length?(c=$?-1:1,Y()):c<0},C.reflectY=function($){return arguments.length?(d=$?-1:1,Y()):d<0},C.precision=function($){return arguments.length?(M=Xh(S,x=$*$),N()):Dt(x)},C.fitExtent=function($,V){return tc(C,$,V)},C.fitSize=function($,V){return Rp(C,$,V)},C.fitWidth=function($,V){return Fp(C,$,V)},C.fitHeight=function($,V){return Bp(C,$,V)};function Y(){var $=Zh(n,0,0,c,d,h).apply(null,t(o,a)),V=Zh(n,r-$[0],i-$[1],c,d,h);return f=vp(l,s,u),S=Xu(t,V),T=Xu(f,S),M=Xh(S,x),N()}function N(){return I=L=null,C}return function(){return t=e.apply(this,arguments),C.invert=t.invert&&G,Y()}}function nc(e){var t=0,n=Ie/3,r=Op(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ze,n=o[1]*Ze):[t*vt,n*vt]},i}function x7(e){var t=Ne(e);function n(r,i){return[r*t,Ee(i)/t]}return n.invert=function(r,i){return[r/t,Xt(i*t)]},n}function P7(e,t){var n=Ee(e),r=(n+Ee(t))/2;if(ze(r)<$e)return x7(e);var i=1+n*(2*r-n),o=Dt(i)/r;function a(l,s){var u=Dt(i-2*r*Ee(s))/r;return[u*Ee(l*=r),o-u*Ne(l)]}return a.invert=function(l,s){var u=o-s,f=Hn(l,ze(u))*Wt(u);return u*r<0&&(f-=Ie*Wt(l)*Wt(u)),[f/r,Xt((i-(l*l+u*u)*r*r)/(2*r))]},a}function bl(){return nc(P7).scale(155.424).center([0,33.6442])}function qp(){return bl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function S7(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function A7(){var e,t,n=qp(),r,i=bl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=bl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,s,u={point:function(c,d){s=[c,d]}};function f(c){var d=c[0],m=c[1];return s=null,r.point(d,m),s||(o.point(d,m),s)||(l.point(d,m),s)}f.invert=function(c){var d=n.scale(),m=n.translate(),p=(c[0]-m[0])/d,g=(c[1]-m[1])/d;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?a:n).invert(c)},f.stream=function(c){return e&&t===c?e:e=S7([n.stream(t=c),i.stream(c),a.stream(c)])},f.precision=function(c){return arguments.length?(n.precision(c),i.precision(c),a.precision(c),h()):n.precision()},f.scale=function(c){return arguments.length?(n.scale(c),i.scale(c*.35),a.scale(c),f.translate(n.translate())):n.scale()},f.translate=function(c){if(!arguments.length)return n.translate();var d=n.scale(),m=+c[0],p=+c[1];return r=n.translate(c).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(u),o=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+$e,p+.12*d+$e],[m-.214*d-$e,p+.234*d-$e]]).stream(u),l=a.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+$e,p+.166*d+$e],[m-.115*d-$e,p+.234*d-$e]]).stream(u),h()},f.fitExtent=function(c,d){return tc(f,c,d)},f.fitSize=function(c,d){return Rp(f,c,d)},f.fitWidth=function(c,d){return Fp(f,c,d)},f.fitHeight=function(c,d){return Bp(f,c,d)};function h(){return e=t=null,f}return f.scale(1070)}function Gp(e){return function(t,n){var r=Ne(t),i=Ne(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Ee(t),o*Ee(n)]}}function Go(e){return function(t,n){var r=Dt(t*t+n*n),i=e(r),o=Ee(i),a=Ne(i);return[Hn(t*o,r*a),Xt(r&&n*o/r)]}}var Up=Gp(function(e){return Dt(2/(1+e))});Up.invert=Go(function(e){return 2*Xt(e/2)});function k7(){return hr(Up).scale(124.75).clipAngle(180-.001)}var zp=Gp(function(e){return(e=_p(e))&&e/Ee(e)});zp.invert=Go(function(e){return e});function E7(){return hr(zp).scale(79.4188).clipAngle(180-.001)}function ns(e,t){return[e,ll(Qf((Ke+t)/2))]}ns.invert=function(e,t){return[e,2*$i(yp(t))-Ke]};function C7(){return Hp(ns).scale(961/Bt)}function Hp(e){var t=hr(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,l,s,u;t.scale=function(h){return arguments.length?(r(h),f()):r()},t.translate=function(h){return arguments.length?(i(h),f()):i()},t.center=function(h){return arguments.length?(n(h),f()):n()},t.clipExtent=function(h){return arguments.length?(h==null?a=l=s=u=null:(a=+h[0][0],l=+h[0][1],s=+h[1][0],u=+h[1][1]),f()):a==null?null:[[a,l],[s,u]]};function f(){var h=Ie*r(),c=t(Z6(t.rotate()).invert([0,0]));return o(a==null?[[c[0]-h,c[1]-h],[c[0]+h,c[1]+h]]:e===ns?[[Math.max(c[0]-h,a),l],[Math.min(c[0]+h,s),u]]:[[a,Math.max(c[1]-h,l)],[s,Math.min(c[1]+h,u)]])}return f()}function wa(e){return Qf((Ke+e)/2)}function T7(e,t){var n=Ne(e),r=e===t?Ee(e):ll(n/Ne(t))/ll(wa(t)/wa(e)),i=n*Xs(wa(e),r)/r;if(!r)return ns;function o(a,l){i>0?l<-Ke+$e&&(l=-Ke+$e):l>Ke-$e&&(l=Ke-$e);var s=i/Xs(wa(l),r);return[s*Ee(r*a),i-s*Ne(r*a)]}return o.invert=function(a,l){var s=i-l,u=Wt(r)*Dt(a*a+s*s),f=Hn(a,ze(s))*Wt(s);return s*r<0&&(f-=Ie*Wt(a)*Wt(s)),[f/r,2*$i(Xs(i/u,1/r))-Ke]},o}function $7(){return nc(T7).scale(109.5).parallels([30,30])}function gl(e,t){return[e,t]}gl.invert=gl;function D7(){return hr(gl).scale(152.63)}function N7(e,t){var n=Ne(e),r=e===t?Ee(e):(n-Ne(t))/(t-e),i=n/r+e;if(ze(r)<$e)return gl;function o(a,l){var s=i-l,u=r*a;return[s*Ee(u),i-s*Ne(u)]}return o.invert=function(a,l){var s=i-l,u=Hn(a,ze(s))*Wt(s);return s*r<0&&(u-=Ie*Wt(a)*Wt(s)),[u/r,i-Wt(r)*Dt(a*a+s*s)]},o}function I7(){return nc(N7).scale(131.154).center([0,13.9389])}var lo=1.340264,so=-.081106,uo=893e-6,fo=.003796,yl=Dt(3)/2,L7=12;function Wp(e,t){var n=Xt(yl*Ee(t)),r=n*n,i=r*r*r;return[e*Ne(n)/(yl*(lo+3*so*r+i*(7*uo+9*fo*r))),n*(lo+so*r+i*(uo+fo*r))]}Wp.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,l,s;o<L7&&(l=n*(lo+so*r+i*(uo+fo*r))-t,s=lo+3*so*r+i*(7*uo+9*fo*r),n-=a=l/s,r=n*n,i=r*r*r,!(ze(a)<gp));++o);return[yl*e*(lo+3*so*r+i*(7*uo+9*fo*r))/Ne(n),Xt(Ee(n)/yl)]};function R7(){return hr(Wp).scale(177.158)}function Vp(e,t){var n=Ne(t),r=Ne(e)*n;return[n*Ee(e)/r,Ee(t)/r]}Vp.invert=Go($i);function F7(){return hr(Vp).scale(144.049).clipAngle(60)}function Yp(e,t){return[Ne(t)*Ee(e),Ee(t)]}Yp.invert=Go(Xt);function B7(){return hr(Yp).scale(249.5).clipAngle(90+$e)}function jp(e,t){var n=Ne(t),r=1+Ne(e)*n;return[n*Ee(e)/r,Ee(t)/r]}jp.invert=Go(function(e){return 2*$i(e)});function O7(){return hr(jp).scale(250).clipAngle(142)}function Xp(e,t){return[ll(Qf((Ke+t)/2)),-e]}Xp.invert=function(e,t){return[-t,2*$i(yp(e))-Ke]};function q7(){var e=Hp(Xp),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function En(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function rs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const uf=Symbol("implicit");function rc(){var e=new Er,t=[],n=[],r=uf;function i(o){let a=e.get(o);if(a===void 0){if(r!==uf)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Er;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return rc(t,n).unknown(r)},En.apply(i,arguments),i}function is(){var e=rc().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,l=!1,s=0,u=0,f=.5;delete e.unknown;function h(){var c=t().length,d=i<r,m=d?i:r,p=d?r:i;o=(p-m)/Math.max(1,c-s+u*2),l&&(o=Math.floor(o)),m+=(p-m-o*(c-s))*f,a=o*(1-s),l&&(m=Math.round(m),a=Math.round(a));var g=Nu(c).map(function(v){return m+o*v});return n(d?g.reverse():g)}return e.domain=function(c){return arguments.length?(t(c),h()):t()},e.range=function(c){return arguments.length?([r,i]=c,r=+r,i=+i,h()):[r,i]},e.rangeRound=function(c){return[r,i]=c,r=+r,i=+i,l=!0,h()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(c){return arguments.length?(l=!!c,h()):l},e.padding=function(c){return arguments.length?(s=Math.min(1,u=+c),h()):s},e.paddingInner=function(c){return arguments.length?(s=Math.min(1,c),h()):s},e.paddingOuter=function(c){return arguments.length?(u=+c,h()):u},e.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},e.copy=function(){return is(t(),[r,i]).round(l).paddingInner(s).paddingOuter(u).align(f)},En.apply(h(),arguments)}function Zp(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Zp(t())},e}function G7(){return Zp(is.apply(null,arguments).paddingInner(1))}function U7(e){return function(){return e}}function ff(e){return+e}var Kh=[0,1];function Yt(e){return e}function cf(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:U7(isNaN(t)?NaN:.5)}function z7(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function H7(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=cf(i,r),o=n(a,o)):(r=cf(r,i),o=n(o,a)),function(l){return o(r(l))}}function W7(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=cf(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(l){var s=Gl(e,l,1,r)-1;return o[s](i[s](l))}}function Uo(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function os(){var e=Kh,t=Kh,n=qo,r,i,o,a=Yt,l,s,u;function f(){var c=Math.min(e.length,t.length);return a!==Yt&&(a=z7(e[0],e[c-1])),l=c>2?W7:H7,s=u=null,h}function h(c){return c==null||isNaN(c=+c)?o:(s||(s=l(e.map(r),t,n)))(r(a(c)))}return h.invert=function(c){return a(i((u||(u=l(t,e.map(r),gt)))(c)))},h.domain=function(c){return arguments.length?(e=Array.from(c,ff),f()):e.slice()},h.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},h.rangeRound=function(c){return t=Array.from(c),n=Yf,f()},h.clamp=function(c){return arguments.length?(a=c?!0:Yt,f()):a!==Yt},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,d){return r=c,i=d,f()}}function Kp(){return os()(Yt,Yt)}function V7(e,t,n,r){var i=$u(e,t,n),o;switch(r=_o(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=j6(i,a))&&(r.precision=o),bp(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=X6(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Y6(i))&&(r.precision=o-(r.type==="%")*2);break}}return Ti(r)}function zo(e){var t=e.domain;return e.ticks=function(n){var r=t();return po(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return V7(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],l=r[o],s,u,f=10;for(l<a&&(u=a,a=l,l=u,u=i,i=o,o=u);f-- >0;){if(u=Ja(a,l,n),u===s)return r[i]=a,r[o]=l,t(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;s=u}return e},e}function ic(){var e=Kp();return e.copy=function(){return Uo(e,ic())},En.apply(e,arguments),zo(e)}function Jp(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,ff),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Jp(e).unknown(t)},e=arguments.length?Array.from(e,ff):[0,1],zo(n)}function Qp(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Jh(e){return Math.log(e)}function Qh(e){return Math.exp(e)}function Y7(e){return-Math.log(-e)}function j7(e){return-Math.exp(-e)}function X7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Z7(e){return e===10?X7:e===Math.E?Math.exp:t=>Math.pow(e,t)}function K7(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ed(e){return(t,n)=>-e(-t,n)}function eb(e){const t=e(Jh,Qh),n=t.domain;let r=10,i,o;function a(){return i=K7(r),o=Z7(r),n()[0]<0?(i=ed(i),o=ed(o),e(Y7,j7)):e(Jh,Qh),t}return t.base=function(l){return arguments.length?(r=+l,a()):r},t.domain=function(l){return arguments.length?(n(l),a()):n()},t.ticks=l=>{const s=n();let u=s[0],f=s[s.length-1];const h=f<u;h&&([u,f]=[f,u]);let c=i(u),d=i(f),m,p;const g=l==null?10:+l;let v=[];if(!(r%1)&&d-c<g){if(c=Math.floor(c),d=Math.ceil(d),u>0){for(;c<=d;++c)for(m=1;m<r;++m)if(p=c<0?m/o(-c):m*o(c),!(p<u)){if(p>f)break;v.push(p)}}else for(;c<=d;++c)for(m=r-1;m>=1;--m)if(p=c>0?m/o(-c):m*o(c),!(p<u)){if(p>f)break;v.push(p)}v.length*2<g&&(v=po(u,f,g))}else v=po(c,d,Math.min(d-c,g)).map(o);return h?v.reverse():v},t.tickFormat=(l,s)=>{if(l==null&&(l=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=_o(s)).precision==null&&(s.trim=!0),s=Ti(s)),l===1/0)return s;const u=Math.max(1,r*l/t.ticks().length);return f=>{let h=f/o(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?s(f):""}},t.nice=()=>n(Qp(n(),{floor:l=>o(Math.floor(i(l))),ceil:l=>o(Math.ceil(i(l)))})),t}function tb(){const e=eb(os()).domain([1,10]);return e.copy=()=>Uo(e,tb()).base(e.base()),En.apply(e,arguments),e}function td(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function nd(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function nb(e){var t=1,n=e(td(t),nd(t));return n.constant=function(r){return arguments.length?e(td(t=+r),nd(t)):t},zo(n)}function rb(){var e=nb(os());return e.copy=function(){return Uo(e,rb()).constant(e.constant())},En.apply(e,arguments)}function rd(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function J7(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Q7(e){return e<0?-e*e:e*e}function ib(e){var t=e(Yt,Yt),n=1;function r(){return n===1?e(Yt,Yt):n===.5?e(J7,Q7):e(rd(n),rd(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},zo(t)}function ob(){var e=ib(os());return e.copy=function(){return Uo(e,ob()).exponent(e.exponent())},En.apply(e,arguments),e}function ab(){var e=[],t=[],n=[],r;function i(){var a=0,l=Math.max(1,t.length);for(n=new Array(l-1);++a<l;)n[a-1]=Uv(e,a/l);return o}function o(a){return a==null||isNaN(a=+a)?r:t[Gl(n,a)]}return o.invertExtent=function(a){var l=t.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Tt),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return ab().domain(e).range(t).unknown(r)},En.apply(o,arguments)}function lb(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Gl(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return lb().domain(e).range(t).unknown(n)},En.apply(i,arguments)}const eu=new Date,tu=new Date;function at(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),l=i.ceil(o);return o-a<l-o?a:l},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,l)=>{const s=[];if(o=i.ceil(o),l=l==null?1:Math.floor(l),!(o<a)||!(l>0))return s;let u;do s.push(u=new Date(+o)),t(o,l),e(o);while(u<o&&o<a);return s},i.filter=o=>at(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;t(a,-1),!o(a););else for(;--l>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(eu.setTime(+o),tu.setTime(+a),e(eu),e(tu),Math.floor(n(eu,tu))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const _l=at(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_l.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?at(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):_l);_l.range;const qn=1e3,jt=qn*60,Gn=jt*60,Wn=Gn*24,oc=Wn*7,id=Wn*30,nu=Wn*365,nn=at(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getUTCSeconds());nn.range;const Ho=at(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qn)},(e,t)=>{e.setTime(+e+t*jt)},(e,t)=>(t-e)/jt,e=>e.getMinutes());Ho.range;const Wo=at(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*jt)},(e,t)=>(t-e)/jt,e=>e.getUTCMinutes());Wo.range;const Vo=at(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qn-e.getMinutes()*jt)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getHours());Vo.range;const Yo=at(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getUTCHours());Yo.range;const Or=at(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jt)/Wn,e=>e.getDate()-1);Or.range;const as=at(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Wn,e=>e.getUTCDate()-1);as.range;const ls=at(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Wn,e=>Math.floor(e/Wn));ls.range;function qr(e){return at(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*jt)/oc)}const _i=qr(0),Mo=qr(1),sb=qr(2),ub=qr(3),Ir=qr(4),fb=qr(5),cb=qr(6);_i.range;Mo.range;sb.range;ub.range;Ir.range;fb.range;cb.range;function Gr(e){return at(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/oc)}const vi=Gr(0),xo=Gr(1),hb=Gr(2),db=Gr(3),Lr=Gr(4),mb=Gr(5),pb=Gr(6);vi.range;xo.range;hb.range;db.range;Lr.range;mb.range;pb.range;const jo=at(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());jo.range;const Xo=at(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Xo.range;const an=at(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());an.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:at(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});an.range;const ln=at(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ln.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:at(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ln.range;function bb(e,t,n,r,i,o){const a=[[nn,1,qn],[nn,5,5*qn],[nn,15,15*qn],[nn,30,30*qn],[o,1,jt],[o,5,5*jt],[o,15,15*jt],[o,30,30*jt],[i,1,Gn],[i,3,3*Gn],[i,6,6*Gn],[i,12,12*Gn],[r,1,Wn],[r,2,2*Wn],[n,1,oc],[t,1,id],[t,3,3*id],[e,1,nu]];function l(u,f,h){const c=f<u;c&&([u,f]=[f,u]);const d=h&&typeof h.range=="function"?h:s(u,f,h),m=d?d.range(u,+f+1):[];return c?m.reverse():m}function s(u,f,h){const c=Math.abs(f-u)/h,d=ql(([,,g])=>g).right(a,c);if(d===a.length)return e.every($u(u/nu,f/nu,h));if(d===0)return _l.every(Math.max($u(u,f,h),1));const[m,p]=a[c/a[d-1][2]<a[d][2]/c?d-1:d];return m.every(p)}return[l,s]}const[e4,gb]=bb(ln,Xo,vi,ls,Yo,Wo),[t4,n4]=bb(an,jo,_i,Or,Vo,Ho);function ru(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function iu(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Bi(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function r4(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,l=e.months,s=e.shortMonths,u=Oi(i),f=qi(i),h=Oi(o),c=qi(o),d=Oi(a),m=qi(a),p=Oi(l),g=qi(l),v=Oi(s),b=qi(s),w={a:le,A:ie,b:se,B:Z,c:null,d:fd,e:fd,f:A4,g:R4,G:B4,H:x4,I:P4,j:S4,L:yb,m:k4,M:E4,p:Q,q:K,Q:dd,s:md,S:C4,u:T4,U:$4,V:D4,w:N4,W:I4,x:null,X:null,y:L4,Y:F4,Z:O4,"%":hd},_={a:ne,A:ge,b:pe,B:de,c:null,d:cd,e:cd,f:z4,g:Q4,G:t8,H:q4,I:G4,j:U4,L:vb,m:H4,M:W4,p:re,q:ae,Q:dd,s:md,S:V4,u:Y4,U:j4,V:X4,w:Z4,W:K4,x:null,X:null,y:J4,Y:e8,Z:n8,"%":hd},x={a:L,A:C,b:G,B:Y,c:N,d:sd,e:sd,f:_4,g:ld,G:ad,H:ud,I:ud,j:p4,L:y4,m:m4,M:b4,p:I,q:d4,Q:w4,s:M4,S:g4,u:s4,U:u4,V:f4,w:l4,W:c4,x:$,X:V,y:ld,Y:ad,Z:h4,"%":v4};w.x=M(n,w),w.X=M(r,w),w.c=M(t,w),_.x=M(n,_),_.X=M(r,_),_.c=M(t,_);function M(W,ee){return function(oe){var F=[],he=-1,te=0,ve=W.length,ye,xe,me;for(oe instanceof Date||(oe=new Date(+oe));++he<ve;)W.charCodeAt(he)===37&&(F.push(W.slice(te,he)),(xe=od[ye=W.charAt(++he)])!=null?ye=W.charAt(++he):xe=ye==="e"?" ":"0",(me=ee[ye])&&(ye=me(oe,xe)),F.push(ye),te=he+1);return F.push(W.slice(te,he)),F.join("")}}function S(W,ee){return function(oe){var F=Bi(1900,void 0,1),he=T(F,W,oe+="",0),te,ve;if(he!=oe.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(ee&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(te=iu(Bi(F.y,0,1)),ve=te.getUTCDay(),te=ve>4||ve===0?xo.ceil(te):xo(te),te=as.offset(te,(F.V-1)*7),F.y=te.getUTCFullYear(),F.m=te.getUTCMonth(),F.d=te.getUTCDate()+(F.w+6)%7):(te=ru(Bi(F.y,0,1)),ve=te.getDay(),te=ve>4||ve===0?Mo.ceil(te):Mo(te),te=Or.offset(te,(F.V-1)*7),F.y=te.getFullYear(),F.m=te.getMonth(),F.d=te.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),ve="Z"in F?iu(Bi(F.y,0,1)).getUTCDay():ru(Bi(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(ve+5)%7:F.w+F.U*7-(ve+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,iu(F)):ru(F)}}function T(W,ee,oe,F){for(var he=0,te=ee.length,ve=oe.length,ye,xe;he<te;){if(F>=ve)return-1;if(ye=ee.charCodeAt(he++),ye===37){if(ye=ee.charAt(he++),xe=x[ye in od?ee.charAt(he++):ye],!xe||(F=xe(W,oe,F))<0)return-1}else if(ye!=oe.charCodeAt(F++))return-1}return F}function I(W,ee,oe){var F=u.exec(ee.slice(oe));return F?(W.p=f.get(F[0].toLowerCase()),oe+F[0].length):-1}function L(W,ee,oe){var F=d.exec(ee.slice(oe));return F?(W.w=m.get(F[0].toLowerCase()),oe+F[0].length):-1}function C(W,ee,oe){var F=h.exec(ee.slice(oe));return F?(W.w=c.get(F[0].toLowerCase()),oe+F[0].length):-1}function G(W,ee,oe){var F=v.exec(ee.slice(oe));return F?(W.m=b.get(F[0].toLowerCase()),oe+F[0].length):-1}function Y(W,ee,oe){var F=p.exec(ee.slice(oe));return F?(W.m=g.get(F[0].toLowerCase()),oe+F[0].length):-1}function N(W,ee,oe){return T(W,t,ee,oe)}function $(W,ee,oe){return T(W,n,ee,oe)}function V(W,ee,oe){return T(W,r,ee,oe)}function le(W){return a[W.getDay()]}function ie(W){return o[W.getDay()]}function se(W){return s[W.getMonth()]}function Z(W){return l[W.getMonth()]}function Q(W){return i[+(W.getHours()>=12)]}function K(W){return 1+~~(W.getMonth()/3)}function ne(W){return a[W.getUTCDay()]}function ge(W){return o[W.getUTCDay()]}function pe(W){return s[W.getUTCMonth()]}function de(W){return l[W.getUTCMonth()]}function re(W){return i[+(W.getUTCHours()>=12)]}function ae(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var ee=M(W+="",w);return ee.toString=function(){return W},ee},parse:function(W){var ee=S(W+="",!1);return ee.toString=function(){return W},ee},utcFormat:function(W){var ee=M(W+="",_);return ee.toString=function(){return W},ee},utcParse:function(W){var ee=S(W+="",!0);return ee.toString=function(){return W},ee}}}var od={"-":"",_:" ",0:"0"},mt=/^\s*\d+/,i4=/^%/,o4=/[\\^$*+?|[\]().{}]/g;function Oe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function a4(e){return e.replace(o4,"\\$&")}function Oi(e){return new RegExp("^(?:"+e.map(a4).join("|")+")","i")}function qi(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function l4(e,t,n){var r=mt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function s4(e,t,n){var r=mt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function u4(e,t,n){var r=mt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function f4(e,t,n){var r=mt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function c4(e,t,n){var r=mt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ad(e,t,n){var r=mt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ld(e,t,n){var r=mt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function h4(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function d4(e,t,n){var r=mt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function m4(e,t,n){var r=mt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function sd(e,t,n){var r=mt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function p4(e,t,n){var r=mt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ud(e,t,n){var r=mt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function b4(e,t,n){var r=mt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function g4(e,t,n){var r=mt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function y4(e,t,n){var r=mt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function _4(e,t,n){var r=mt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function v4(e,t,n){var r=i4.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function w4(e,t,n){var r=mt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function M4(e,t,n){var r=mt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function fd(e,t){return Oe(e.getDate(),t,2)}function x4(e,t){return Oe(e.getHours(),t,2)}function P4(e,t){return Oe(e.getHours()%12||12,t,2)}function S4(e,t){return Oe(1+Or.count(an(e),e),t,3)}function yb(e,t){return Oe(e.getMilliseconds(),t,3)}function A4(e,t){return yb(e,t)+"000"}function k4(e,t){return Oe(e.getMonth()+1,t,2)}function E4(e,t){return Oe(e.getMinutes(),t,2)}function C4(e,t){return Oe(e.getSeconds(),t,2)}function T4(e){var t=e.getDay();return t===0?7:t}function $4(e,t){return Oe(_i.count(an(e)-1,e),t,2)}function _b(e){var t=e.getDay();return t>=4||t===0?Ir(e):Ir.ceil(e)}function D4(e,t){return e=_b(e),Oe(Ir.count(an(e),e)+(an(e).getDay()===4),t,2)}function N4(e){return e.getDay()}function I4(e,t){return Oe(Mo.count(an(e)-1,e),t,2)}function L4(e,t){return Oe(e.getFullYear()%100,t,2)}function R4(e,t){return e=_b(e),Oe(e.getFullYear()%100,t,2)}function F4(e,t){return Oe(e.getFullYear()%1e4,t,4)}function B4(e,t){var n=e.getDay();return e=n>=4||n===0?Ir(e):Ir.ceil(e),Oe(e.getFullYear()%1e4,t,4)}function O4(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Oe(t/60|0,"0",2)+Oe(t%60,"0",2)}function cd(e,t){return Oe(e.getUTCDate(),t,2)}function q4(e,t){return Oe(e.getUTCHours(),t,2)}function G4(e,t){return Oe(e.getUTCHours()%12||12,t,2)}function U4(e,t){return Oe(1+as.count(ln(e),e),t,3)}function vb(e,t){return Oe(e.getUTCMilliseconds(),t,3)}function z4(e,t){return vb(e,t)+"000"}function H4(e,t){return Oe(e.getUTCMonth()+1,t,2)}function W4(e,t){return Oe(e.getUTCMinutes(),t,2)}function V4(e,t){return Oe(e.getUTCSeconds(),t,2)}function Y4(e){var t=e.getUTCDay();return t===0?7:t}function j4(e,t){return Oe(vi.count(ln(e)-1,e),t,2)}function wb(e){var t=e.getUTCDay();return t>=4||t===0?Lr(e):Lr.ceil(e)}function X4(e,t){return e=wb(e),Oe(Lr.count(ln(e),e)+(ln(e).getUTCDay()===4),t,2)}function Z4(e){return e.getUTCDay()}function K4(e,t){return Oe(xo.count(ln(e)-1,e),t,2)}function J4(e,t){return Oe(e.getUTCFullYear()%100,t,2)}function Q4(e,t){return e=wb(e),Oe(e.getUTCFullYear()%100,t,2)}function e8(e,t){return Oe(e.getUTCFullYear()%1e4,t,4)}function t8(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Lr(e):Lr.ceil(e),Oe(e.getUTCFullYear()%1e4,t,4)}function n8(){return"+0000"}function hd(){return"%"}function dd(e){return+e}function md(e){return Math.floor(+e/1e3)}var Vr,ac,Zo;r8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function r8(e){return Vr=r4(e),ac=Vr.format,Vr.parse,Zo=Vr.utcFormat,Vr.utcParse,Vr}function i8(e){return new Date(e)}function o8(e){return e instanceof Date?+e:+new Date(+e)}function lc(e,t,n,r,i,o,a,l,s,u){var f=Kp(),h=f.invert,c=f.domain,d=u(".%L"),m=u(":%S"),p=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),b=u("%b %d"),w=u("%B"),_=u("%Y");function x(M){return(s(M)<M?d:l(M)<M?m:a(M)<M?p:o(M)<M?g:r(M)<M?i(M)<M?v:b:n(M)<M?w:_)(M)}return f.invert=function(M){return new Date(h(M))},f.domain=function(M){return arguments.length?c(Array.from(M,o8)):c().map(i8)},f.ticks=function(M){var S=c();return e(S[0],S[S.length-1],M??10)},f.tickFormat=function(M,S){return S==null?x:u(S)},f.nice=function(M){var S=c();return(!M||typeof M.range!="function")&&(M=t(S[0],S[S.length-1],M??10)),M?c(Qp(S,M)):f},f.copy=function(){return Uo(f,lc(e,t,n,r,i,o,a,l,s,u))},f}function a8(){return En.apply(lc(t4,n4,an,jo,_i,Or,Vo,Ho,nn,ac).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function l8(){return En.apply(lc(e4,gb,ln,Xo,vi,as,Yo,Wo,nn,Zo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ss(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function us(){var e=0,t=.5,n=1,r=1,i,o,a,l,s,u=Yt,f,h=!1,c;function d(p){return isNaN(p=+p)?c:(p=.5+((p=+f(p))-o)*(r*p<r*o?l:s),u(h?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=f(e=+e),o=f(t=+t),a=f(n=+n),l=i===o?0:.5/(o-i),s=o===a?0:.5/(a-o),r=o<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(h=!!p,d):h},d.interpolator=function(p){return arguments.length?(u=p,d):u};function m(p){return function(g){var v,b,w;return arguments.length?([v,b,w]=g,u=Kl(p,[v,b,w]),d):[u(0),u(.5),u(1)]}}return d.range=m(qo),d.rangeRound=m(Yf),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return f=p,i=p(e),o=p(t),a=p(n),l=i===o?0:.5/(o-i),s=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function Mb(){var e=zo(us()(Yt));return e.copy=function(){return ss(e,Mb())},rs.apply(e,arguments)}function xb(){var e=eb(us()).domain([.1,1,10]);return e.copy=function(){return ss(e,xb()).base(e.base())},rs.apply(e,arguments)}function Pb(){var e=nb(us());return e.copy=function(){return ss(e,Pb()).constant(e.constant())},rs.apply(e,arguments)}function Sb(){var e=ib(us());return e.copy=function(){return ss(e,Sb()).exponent(e.exponent())},rs.apply(e,arguments)}function De(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const s8=De("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),u8=De("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),f8=De("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),c8=De("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),h8=De("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),d8=De("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),m8=De("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),p8=De("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),b8=De("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),g8=De("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ve=e=>r5(e[e.length-1]);var Ab=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(De);const kb=Ve(Ab);var Eb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(De);const Cb=Ve(Eb);var Tb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(De);const $b=Ve(Tb);var Db=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(De);const Nb=Ve(Db);var hf=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(De);const vl=Ve(hf);var Ib=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(De);const Lb=Ve(Ib);var df=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(De);const wl=Ve(df);var Rb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(De);const Fb=Ve(Rb);var Bb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(De);const Ob=Ve(Bb);var qb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(De);const Gb=Ve(qb);var Ub=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(De);const zb=Ve(Ub);var Hb=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(De);const Wb=Ve(Hb);var Vb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(De);const Yb=Ve(Vb);var jb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(De);const Xb=Ve(jb);var Zb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(De);const Kb=Ve(Zb);var Jb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(De);const Qb=Ve(Jb);var eg=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(De);const tg=Ve(eg);var ng=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(De);const rg=Ve(ng);var ig=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(De);const og=Ve(ig);var ag=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(De);const lg=Ve(ag);var sg=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(De);const ug=Ve(sg);var fg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(De);const cg=Ve(fg);var hg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(De);const dg=Ve(hg);var mg=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(De);const pg=Ve(mg);var bg=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(De);const gg=Ve(bg);var yg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(De);const _g=Ve(yg);var vg=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(De);const wg=Ve(vg);function Mg(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const xg=jf(Pn(300,.5,0),Pn(-240,.5,1));var Pg=jf(Pn(-100,.75,.35),Pn(80,1.5,.8)),Sg=jf(Pn(260,.75,.35),Pn(80,1.5,.8)),Ma=Pn();function Ag(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ma.h=360*e-100,Ma.s=1.5-1.5*t,Ma.l=.8-.9*t,Ma+""}var xa=lr(),y8=Math.PI/3,_8=Math.PI*2/3;function kg(e){var t;return e=(.5-e)*Math.PI,xa.r=255*(t=Math.sin(e))*t,xa.g=255*(t=Math.sin(e+y8))*t,xa.b=255*(t=Math.sin(e+_8))*t,xa+""}function Eg(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function fs(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Cg=fs(De("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Tg=fs(De("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),$g=fs(De("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Dg=fs(De("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function ft(e){return function(){return e}}const Ng=Math.cos,sc=Math.min,Ml=Math.sin,lt=Math.sqrt,pd=1e-12,xl=Math.PI,cs=2*xl;function Ig(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new hp(t)}function Lg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rg(e){this._context=e}Rg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ko(e){return new Rg(e)}function Fg(e){return e[0]}function Bg(e){return e[1]}function Og(e,t){var n=ft(!0),r=null,i=Ko,o=null,a=Ig(l);e=typeof e=="function"?e:e===void 0?Fg:ft(e),t=typeof t=="function"?t:t===void 0?Bg:ft(t);function l(s){var u,f=(s=Lg(s)).length,h,c=!1,d;for(r==null&&(o=i(d=a())),u=0;u<=f;++u)!(u<f&&n(h=s[u],u,s))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+e(h,u,s),+t(h,u,s));if(d)return o=null,d+""||null}return l.x=function(s){return arguments.length?(e=typeof s=="function"?s:ft(+s),l):e},l.y=function(s){return arguments.length?(t=typeof s=="function"?s:ft(+s),l):t},l.defined=function(s){return arguments.length?(n=typeof s=="function"?s:ft(!!s),l):n},l.curve=function(s){return arguments.length?(i=s,r!=null&&(o=i(r)),l):i},l.context=function(s){return arguments.length?(s==null?r=o=null:o=i(r=s),l):r},l}function v8(e,t,n){var r=null,i=ft(!0),o=null,a=Ko,l=null,s=Ig(u);e=typeof e=="function"?e:e===void 0?Fg:ft(+e),t=typeof t=="function"?t:ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Bg:ft(+n);function u(h){var c,d,m,p=(h=Lg(h)).length,g,v=!1,b,w=new Array(p),_=new Array(p);for(o==null&&(l=a(b=s())),c=0;c<=p;++c){if(!(c<p&&i(g=h[c],c,h))===v)if(v=!v)d=c,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=c-1;m>=d;--m)l.point(w[m],_[m]);l.lineEnd(),l.areaEnd()}v&&(w[c]=+e(g,c,h),_[c]=+t(g,c,h),l.point(r?+r(g,c,h):w[c],n?+n(g,c,h):_[c]))}if(b)return l=null,b+""||null}function f(){return Og().defined(i).curve(a).context(o)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:ft(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ft(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:ft(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:ft(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ft(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ft(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:ft(!!h),u):i},u.curve=function(h){return arguments.length?(a=h,o!=null&&(l=a(o)),u):a},u.context=function(h){return arguments.length?(h==null?o=l=null:l=a(o=h),u):o},u}class qg{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function w8(e){return new qg(e,!0)}function M8(e){return new qg(e,!1)}const x8=lt(3),Gg={draw(e,t){const n=lt(t+sc(t/28,.75))*.59436,r=n/2,i=r*x8;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},Po={draw(e,t){const n=lt(t/xl);e.moveTo(n,0),e.arc(0,0,n,0,cs)}},Ug={draw(e,t){const n=lt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},zg=lt(1/3),P8=zg*2,Hg={draw(e,t){const n=lt(t/P8),r=n*zg;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Wg={draw(e,t){const n=lt(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Vg={draw(e,t){const n=lt(t-sc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Yg={draw(e,t){const n=lt(t),r=-n/2;e.rect(r,r,n,n)}},jg={draw(e,t){const n=lt(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},S8=.8908130915292852,Xg=Ml(xl/10)/Ml(7*xl/10),A8=Ml(cs/10)*Xg,k8=-Ng(cs/10)*Xg,Zg={draw(e,t){const n=lt(t*S8),r=A8*n,i=k8*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const a=cs*o/5,l=Ng(a),s=Ml(a);e.lineTo(s*n,-l*n),e.lineTo(l*r-s*i,s*r+l*i)}e.closePath()}},ou=lt(3),Kg={draw(e,t){const n=-lt(t/(ou*3));e.moveTo(0,n*2),e.lineTo(-ou*n,-n),e.lineTo(ou*n,-n),e.closePath()}},E8=lt(3),Jg={draw(e,t){const n=lt(t)*.6824,r=n/2,i=n*E8/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Gt=-.5,Ut=lt(3)/2,mf=1/lt(12),C8=(mf/2+1)*3,Qg={draw(e,t){const n=lt(t/C8),r=n/2,i=n*mf,o=r,a=n*mf+n,l=-o,s=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(l,s),e.lineTo(Gt*r-Ut*i,Ut*r+Gt*i),e.lineTo(Gt*o-Ut*a,Ut*o+Gt*a),e.lineTo(Gt*l-Ut*s,Ut*l+Gt*s),e.lineTo(Gt*r+Ut*i,Gt*i-Ut*r),e.lineTo(Gt*o+Ut*a,Gt*a-Ut*o),e.lineTo(Gt*l+Ut*s,Gt*s-Ut*l),e.closePath()}},e2={draw(e,t){const n=lt(t-sc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},T8=[Po,Ug,Hg,Yg,Zg,Kg,Qg],$8=[Po,Vg,e2,Jg,Gg,jg,Wg];function sr(){}function Pl(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function hs(e){this._context=e}hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pl(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function D8(e){return new hs(e)}function t2(e){this._context=e}t2.prototype={areaStart:sr,areaEnd:sr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Pl(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function N8(e){return new t2(e)}function n2(e){this._context=e}n2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Pl(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I8(e){return new n2(e)}function r2(e,t){this._basis=new hs(e),this._beta=t}r2.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,l=-1,s;++l<=n;)s=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(r+s*o),this._beta*t[l]+(1-this._beta)*(i+s*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const L8=function e(t){function n(r){return t===1?new hs(r):new r2(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Sl(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function uc(e,t){this._context=e,this._k=(1-t)/6}uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Sl(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Sl(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R8=function e(t){function n(r){return new uc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fc(e,t){this._context=e,this._k=(1-t)/6}fc.prototype={areaStart:sr,areaEnd:sr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Sl(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const F8=function e(t){function n(r){return new fc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cc(e,t){this._context=e,this._k=(1-t)/6}cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Sl(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const B8=function e(t){function n(r){return new cc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function hc(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>pd){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>pd){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/f,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function i2(e,t){this._context=e,this._alpha=t}i2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:hc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const O8=function e(t){function n(r){return t?new i2(r,t):new uc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function o2(e,t){this._context=e,this._alpha=t}o2.prototype={areaStart:sr,areaEnd:sr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:hc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const q8=function e(t){function n(r){return t?new o2(r,t):new fc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function a2(e,t){this._context=e,this._alpha=t}a2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const G8=function e(t){function n(r){return t?new a2(r,t):new cc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function l2(e){this._context=e}l2.prototype={areaStart:sr,areaEnd:sr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function U8(e){return new l2(e)}function bd(e){return e<0?-1:1}function gd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),l=(o*i+a*r)/(r+i);return(bd(o)+bd(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function yd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function au(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,l=(o-r)/3;e._context.bezierCurveTo(r+l,i+l*t,o-l,a-l*n,o,a)}function Al(e){this._context=e}Al.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:au(this,this._t0,yd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,au(this,yd(this,n=gd(this,e,t)),n);break;default:au(this,this._t0,n=gd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function s2(e){this._context=new u2(e)}(s2.prototype=Object.create(Al.prototype)).point=function(e,t){Al.prototype.point.call(this,t,e)};function u2(e){this._context=e}u2.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function z8(e){return new Al(e)}function H8(e){return new s2(e)}function f2(e){this._context=e}f2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=_d(e),i=_d(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function _d(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function W8(e){return new f2(e)}function ds(e,t){this._context=e,this._t=t}ds.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function V8(e){return new ds(e,.5)}function Y8(e){return new ds(e,0)}function j8(e){return new ds(e,1)}function eo(e,t,n){this.k=e,this.x=t,this.y=n}eo.prototype={constructor:eo,scale:function(e){return e===1?this:new eo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new eo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};eo.prototype;const X8="modulepreload",Z8=function(e){return"/rhythm-vis/"+e},vd={},Yr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");i=Promise.all(n.map(a=>{if(a=Z8(a),a in vd)return;vd[a]=!0;const l=a.endsWith(".css"),s=l?'[rel="stylesheet"]':"";if(!!r)for(let h=o.length-1;h>=0;h--){const c=o[h];if(c.href===a&&(!l||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${s}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":X8,l||(f.as="script",f.crossOrigin=""),f.href=a,document.head.appendChild(f),l)return new Promise((h,c)=>{f.addEventListener("load",h),f.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function K8(e){if(e){if(e=new Uint8Array(e.buffer||e),Q8(e))return"wav";if(J8(e))return"mp3";if(t9(e))return"flac";if(n9(e))return"m4a";if(r9(e))return"opus";if(e9(e))return"oga";if(i9(e))return"qoa"}}function J8(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function Q8(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function e9(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function t9(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function n9(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function r9(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function i9(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let o9=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],o=r,a=0;o<this.length&&a<t.length;o++,a++)t[a]=i[o]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var o=r,a=0;o<this.length&&a<t.length;o++,a++)i[o]=t[a]}};const a9=globalThis.AudioBuffer||o9;async function l9(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=K8(e);if(!t)throw Error("Cannot detect audio format");if(!At[t])throw Error("Missing decoder for "+t+" format");return At[t](e)}const At={async oga(e){let{decoder:t}=At.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Yr(()=>import("./index-CcMunDgN.js"),__vite__mapDeps([0,1,2]));await(At.oga.decoder=t=new n).ready}return e&&jr(await t.decodeFile(e))},async mp3(e){let{decoder:t}=At.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Yr(()=>import("./index-D9673tnx.js"),__vite__mapDeps([3,2]));await(At.mp3.decoder=t=new n).ready}return e&&jr(await t.decode(e))},async flac(e){let{decoder:t}=At.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Yr(()=>import("./index-DMiZMqPG.js"),__vite__mapDeps([4,1,2]));await(At.flac.decoder=t=new n).ready}return e&&jr(await t.decode(e))},async opus(e){let{decoder:t}=At.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Yr(()=>import("./index-D7HLituM.js"),__vite__mapDeps([5,1,2]));await(At.opus.decoder=t=new n).ready}return e&&jr(await t.decodeFile(e))},async wav(e){let{decode:t}=At.wav;if(!t){let n=await Yr(()=>import("./index-CfsTeCEy.js").then(r=>r.i),__vite__mapDeps([]));t=At.wav.decode=n.default.decode}return e&&jr(await t(e))},async qoa(e){let{decode:t}=At.qoa;return t||(At.qoa.decode=t=(await Yr(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),e&&jr(await t(e))}};function jr({channelData:e,sampleRate:t}){let n=new a9({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s9=u9;function u9(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,o=i===3?32:16,a;return n===2?a=c9(e.getChannelData(0),e.getChannelData(1)):a=e.getChannelData(0),f9(a,i,r,n,o)}function f9(e,t,n,r,i){var o=i/8,a=r*o,l=new ArrayBuffer(44+e.length*o),s=new DataView(l);return Pa(s,0,"RIFF"),s.setUint32(4,36+e.length*o,!0),Pa(s,8,"WAVE"),Pa(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,t,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*a,!0),s.setUint16(32,a,!0),s.setUint16(34,i,!0),Pa(s,36,"data"),s.setUint32(40,e.length*o,!0),t===1?d9(s,44,e):h9(s,44,e),l}function c9(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,o=0;i<n;)r[i++]=e[o],r[i++]=t[o],o++;return r}function h9(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function d9(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function Pa(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const m9=c2(s9);async function ms(e){const n=await(await fetch(e)).arrayBuffer();return await l9(n)}function p9(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),o=new Float32Array(Math.ceil(r*e.sampleRate));for(const a of t){const l=Math.round(a*e.sampleRate);let s=1;for(let u=0;u<i.length;++u)s=Math.max(0,s-2/40100),o[l+u]=i[u]*s}return o}function dc(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([m9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function mc(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function So(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const o=i.audioBuffer.getChannelData(0);for(const a of i.times){const l=Math.round(a*n);for(let s=0;s<o.length;++s)r[l+s]=Math.min(r[l+s]+o[s],1)}}return r}function ur(e){return e!=null&&!Number.isNaN(e)}function sn(e,t){return+ur(t)-+ur(e)||Tt(e,t)}function kl(e,t){return+ur(t)-+ur(e)||Fo(e,t)}function pc(e){return e!=null&&`${e}`!=""}function h2(e){return isFinite(e)?e:NaN}function ps(e){return e>0&&isFinite(e)?e:NaN}function bc(e){return e<0&&isFinite(e)?e:NaN}function b9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${g9(e.getUTCFullYear())}-${Fn(e.getUTCMonth()+1,2)}-${Fn(e.getUTCDate(),2)}${n||r||i||o?`T${Fn(n,2)}:${Fn(r,2)}${i||o?`:${Fn(i,2)}${o?`.${Fn(o,3)}`:""}`:""}Z`:""}`}function g9(e){return e<0?`-${Fn(-e,6)}`:e>9999?`+${Fn(e,6)}`:Fn(e,4)}function Fn(e,t){return`${e}`.padStart(t,"0")}const y9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function d2(e,t){return y9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const ni=1e3,nr=ni*60,rr=nr*60,Sn=rr*24,dn=Sn*7,Sr=Sn*30,Qn=Sn*365,lu=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",ni],["5 seconds",5*ni],["15 seconds",15*ni],["30 seconds",30*ni],["minute",nr],["5 minutes",5*nr],["15 minutes",15*nr],["30 minutes",30*nr],["hour",rr],["3 hours",3*rr],["6 hours",6*rr],["12 hours",12*rr],["day",Sn],["2 days",2*Sn],["week",dn],["2 weeks",2*dn],["month",Sr],["3 months",3*Sr],["6 months",6*Sr],["year",Qn],["2 years",2*Qn],["5 years",5*Qn],["10 years",10*Qn],["20 years",20*Qn],["50 years",50*Qn],["100 years",100*Qn]],gc=new Map([["second",ni],["minute",nr],["hour",rr],["day",Sn],["monday",dn],["tuesday",dn],["wednesday",dn],["thursday",dn],["friday",dn],["saturday",dn],["sunday",dn],["week",dn],["month",Sr],["year",Qn]]),m2=new Map([["second",nn],["minute",Ho],["hour",Vo],["day",Or],["monday",Mo],["tuesday",sb],["wednesday",ub],["thursday",Ir],["friday",fb],["saturday",cb],["sunday",_i],["week",_i],["month",jo],["year",an]]),yc=new Map([["second",nn],["minute",Wo],["hour",Yo],["day",ls],["monday",xo],["tuesday",hb],["wednesday",db],["thursday",Lr],["friday",mb],["saturday",pb],["sunday",vi],["week",vi],["month",Xo],["year",ln]]),Jo=Symbol("intervalDuration"),bs=Symbol("intervalType");for(const[e,t]of m2)t[Jo]=gc.get(e),t[bs]="time";for(const[e,t]of yc)t[Jo]=gc.get(e),t[bs]="utc";const to=[["year",ln,"utc"],["month",Xo,"utc"],["day",ls,"utc",6*Sr],["hour",Yo,"utc",3*Sn],["minute",Wo,"utc",6*rr],["second",nn,"utc",30*nr]],Ua=[["year",an,"time"],["month",jo,"time"],["day",Or,"time",6*Sr],["hour",Vo,"time",3*Sn],["minute",Ho,"time",6*rr],["second",nn,"time",30*nr]],_9=[to[0],Ua[0],to[1],Ua[1],to[2],Ua[2],...to.slice(3)];function p2(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=yc.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function b2(e){return g2(p2(e),"time")}function _c(e){return g2(p2(e),"utc")}function g2([e,t],n){let r=(n==="time"?m2:yc).get(e);return t>1&&(r=r.every(t),r[Jo]=gc.get(e)*t,r[bs]=n),r}function wd(e,t){if(!(t>1))return;const n=e[Jo];if(!lu.some(([,i])=>i===n)||n%Sn===0&&Sn<n&&n<Sr)return;const[r]=lu[ql(([,i])=>Math.log(i)).center(lu,Math.log(n*t))];return(e[bs]==="time"?b2:_c)(r)}function Md(e,t,n){const r=t==="time"?ac:Zo;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=v9(n);switch(e){case"millisecond":return Xr(r(".%L"),r(":%M:%S"),i);case"second":return Xr(r(":%S"),r("%-I:%M"),i);case"minute":return Xr(r("%-I:%M"),r("%p"),i);case"hour":return Xr(r("%-I %p"),r("%b %-d"),i);case"day":return Xr(r("%-d"),r("%b"),i);case"month":return Xr(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function v9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function w9(e){return e==="time"?Ua:e==="utc"?to:_9}function M9(e,t,n){const r=Rt(Vv(t,(i,o)=>Math.abs(o-i)));if(r<1e3)return Md("millisecond","utc",n);for(const[i,o,a,l]of w9(e)){if(r>l||i==="hour"&&!r)break;if(t.every(s=>o.floor(s)>=s))return Md(i,a,n)}}function Xr(e,t,n){return(r,i,o)=>{const a=e(r,i),l=t(r,i),s=i-Mi(o);return i!==s&&o[s]!==void 0&&l===t(o[s],s)?a:n(a,l)}}const Ao=Object.getPrototypeOf(Uint8Array),x9=Object.prototype.toString,y2=Symbol("reindex");function dt(e,t,n){const r=typeof t;return r==="string"?xd(e,_2(t),n):r==="function"?xd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?ot(e,Qo(t),n):typeof(t==null?void 0:t.transform)=="function"?Pd(t.transform(e),n):P9(Pd(t,n),e==null?void 0:e[y2])}function P9(e,t){return t?xc(e,t):e}function xd(e,t,n){return ot(e,(n==null?void 0:n.prototype)instanceof Ao?S9(t):t,n)}function Pd(e,t){return t===void 0?Ot(e):e instanceof t?e:t.prototype instanceof Ao&&!(e instanceof Ao)?t.from(e,wc):t.from(e)}function S9(e){return(t,n)=>wc(e(t,n))}const za=[null],_2=e=>t=>t[e],gs={transform:Xn},_t={transform:e=>e},A9=()=>1,k9=()=>!0,Mt=e=>e==null?e:`${e}`,Xe=e=>e==null?e:+e,vc=e=>e?e[0]:void 0,pf=e=>e?e[1]:void 0,Qo=e=>()=>e;function E9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>ci(n,t,r)}function gn(e){return e instanceof Ao?e:ot(e,wc,Float64Array)}function wc(e){return e==null?NaN:Number(e)}function C9(e){return ot(e,v2)}function v2(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?d2(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Vn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:_s(e)?[void 0,e]:[e,void 0]}function xt(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function w2(e,t,n){if(e!=null)return fn(e,t,n)}function fn(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function Ot(e){return e==null||e instanceof Array||e instanceof Ao?e:Array.from(e)}function ot(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function ko(e,t=Array){return e instanceof t?e.slice():t.from(e)}function T9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function M2({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function $9(e){return T9(e)||M2(e)||e.interval!==void 0}function dr(e){return(e==null?void 0:e.toString)===x9}function bf(e){return dr(e)&&(e.type!==void 0||e.domain!==void 0)}function ys(e){return dr(e)&&typeof e.transform!="function"}function wi(e){return ys(e)&&e.value===void 0&&e.channel===void 0}function D9(e,t,n,r=_t){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function ea(e,t){return e===void 0&&t===void 0?[vc,pf]:[e,t]}function Mc({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Vn(t)),e===void 0&&([e]=Vn(n)),e}function Xn(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function xc(e,t){return ot(t,n=>e[n],e.constructor)}function N9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Mr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function I9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function El(e){let t;return[{transform:()=>t,label:Ur(e)},n=>t=n]}function Ln(e){return e==null?[e]:El(e)}function Ur(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function gf(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Nt(r)||Nt(i)?ot(r,(o,a)=>new Date((+r[a]+ +i[a])/2)):ot(r,(o,a)=>(+r[a]+ +i[a])/2,Float64Array)},label:e.label}}function x2(e,t){const n=P2(t==null?void 0:t.interval,t==null?void 0:t.type);return n?ot(e,n):e}function P2(e,t){const n=Pc(e,t);return n&&(r=>ur(r)?n.floor(r):r)}function Pc(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Nu(Math.ceil(r*n),i*n).map(o=>o/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Nu(Math.ceil(r/n),i/n).map(o=>o*n)}}if(typeof e=="string")return(t==="time"?b2:_c)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Di(e,t){if(e=Pc(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function L9(e,t){if(e=Di(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function R9(e){return ri(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function ri(e){return typeof(e==null?void 0:e.range)=="function"}function ta(e){return e===void 0||ys(e)?e:{value:e}}function F9(e){return e==null?null:{transform:t=>dt(t,e,Float64Array),label:Ur(e)}}function mr(e){return e&&typeof e[Symbol.iterator]=="function"}function S2(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Sd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Nt(e){for(const t of e)if(t!=null)return t instanceof Date}function B9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&d2(t)}function O9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function q9(e){for(const t of e)if(t!=null)return typeof t=="number"}function su(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const G9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function _s(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||G9.has(e))}function U9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function Et(e){return e==null||Eo(e)}function Eo(e){return/^\s*none\s*$/i.test(e)}function z9(e){return/^\s*round\s*$/i.test(e)}function yf(e,t){return w2(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function vs(e="middle"){return yf(e,"frameAnchor")}function Mi(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Fo(t,n)}function H9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const o=r[i];n===e?n={...n,[i]:o}:n[i]=o}return n}function W9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function A2(e){return mr(e)?W9(e):e}const yn=Symbol("position"),Zn=Symbol("color"),na=Symbol("radius"),ra=Symbol("length"),ia=Symbol("opacity"),ws=Symbol("symbol"),k2=Symbol("projection"),Je=new Map([["x",yn],["y",yn],["fx",yn],["fy",yn],["r",na],["color",Zn],["opacity",ia],["symbol",ws],["length",ra],["projection",k2]]);function V9(e){return e===yn||e===k2}function Y9(e){return e===yn||e===na||e===ra||e===ia}const j9=Math.sqrt(3),X9=2/j9,Z9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*X9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},Sc=new Map([["asterisk",Gg],["circle",Po],["cross",Ug],["diamond",Hg],["diamond2",Wg],["hexagon",Z9],["plus",Vg],["square",Yg],["square2",jg],["star",Zg],["times",e2],["triangle",Kg],["triangle2",Jg],["wye",Qg]]);function Ac(e){return e&&typeof e.draw=="function"}function K9(e){return Ac(e)?!0:typeof e!="string"?!1:Sc.has(e.toLowerCase())}function kc(e){if(e==null||Ac(e))return e;const t=Sc.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function J9(e){if(e==null||Ac(e))return[void 0,e];if(typeof e=="string"){const t=Sc.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function Ms({filter:e,sort:t,reverse:n,transform:r,initializer:i,...o}={},a){if(r===void 0&&(e!=null&&(r=E2(e)),t!=null&&!wi(t)&&(r=uu(r,Ec(t))),n&&(r=uu(r,C2))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(t===null||wi(t))&&{sort:t},transform:uu(r,a)}}function xi({filter:e,sort:t,reverse:n,initializer:r,...i}={},o){return r===void 0&&(e!=null&&(r=E2(e)),t!=null&&!wi(t)&&(r=fu(r,Ec(t))),n&&(r=fu(r,C2))),{...i,...(t===null||wi(t))&&{sort:t},initializer:fu(r,o)}}function uu(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,Ot(n),r,i)}}function fu(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...o){let a,l,s,u,f,h;return{data:l=n,facets:s=r,channels:a}=e.call(this,n,r,i,...o),{data:f=l,facets:h=s,channels:u}=t.call(this,l,s,{...i,...a},...o),{data:f,facets:h,channels:{...a,...u}}}}function Q9(e,t){return(e.initializer!=null?xi:Ms)(e,t)}function E2(e){return(t,n)=>{const r=dt(t,e);return{data:t,facets:n.map(i=>i.filter(o=>r[o]))}}}function C2(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function eM(e,{sort:t,...n}={}){return{...(ys(e)&&e.channel!==void 0?xi:Q9)(n,Ec(e)),sort:wi(t)?t:null}}function Ec(e){return(typeof e=="function"&&e.length!==1?tM:nM)(e)}function tM(e){return(t,n)=>{const r=(i,o)=>e(t[i],t[o]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function nM(e){let t,n;({channel:t,value:e,order:n}={...ta(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?kl:sn),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=sn;break;case"descending":n=kl;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,a)=>{let l;if(t===void 0)l=dt(i,e);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(l=a[t],!l)return{};l=l.value}const s=(u,f)=>n(l[u],l[f]);return{data:i,facets:o.map(u=>u.slice().sort(s))}}}function Sa(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function rM(e,t,n=T2){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",fM]),t.href!=null&&e.href===void 0&&r.push(["href",Tc]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?iM(i):n(i,o,t))}function T2(e,t,n,r=$2){let i;dr(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const o=r(e,t,n),[a,l]=El(o.label);let s;return{name:e,output:i===void 0?a:{value:a,scale:i},initialize(u){o.initialize(u),s=l([])},scope(u,f){o.scope(u,f)},reduce(u,f){s.push(o.reduce(u,f))}}}function iM(e){return{name:e,initialize(){},scope(){},reduce(){}}}function $2(e,t,n,r=Cc){const i=I9(e,n),o=r(t,i);let a,l;return{label:Ur(o===Cl?null:i,o.label),initialize(s){a=i===void 0?s:dt(s,i),o.scope==="data"&&(l=o.reduceIndex(Xn(s),a))},scope(s,u){o.scope===s&&(l=o.reduceIndex(u,a))},reduce(s,u){return o.scope==null?o.reduceIndex(s,a,u):o.reduceIndex(s,a,l,u)}}}function Ad(e,t){return t?mo(Hl(e,n=>t[n]),vc):[[,e]]}function Cc(e,t,n=oM){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&dr(e))return sM(e);if(typeof e=="function")return uM(e);if(/^p\d{2}$/i.test(e))return Rn(E9(e));switch(`${e}`.toLowerCase()){case"first":return Tc;case"last":return cM;case"identity":return D2;case"count":return Cl;case"distinct":return hM;case"sum":return t==null?Cl:dM;case"proportion":return Ed(t,"data");case"proportion-facet":return Ed(t,"facet");case"deviation":return Rn(Of);case"min":return Rn(Un);case"min-index":return Rn(Gv);case"max":return Rn(Rt);case"max-index":return Rn(qv);case"mean":return kd(Vl);case"median":return kd(Du);case"variance":return Rn(Ul);case"mode":return Rn(Wv)}return n(e)}function oM(e){throw new Error(`invalid reduce: ${e}`)}function aM(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function lM(e,t,n){if(t){const r=t.output.transform(),i=(o,a)=>sn(r[o],r[a]);e.forEach(o=>o.sort(i))}n&&e.forEach(r=>r.reverse())}function sM(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function uM(e){return{reduceIndex(t,n,r){return e(xc(n,t),r)}}}function Rn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function kd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Nt(n)?new Date(r):r}}}const D2={reduceIndex(e,t){return xc(t,e)}},Tc={reduceIndex(e,t){return t[e[0]]}},fM={reduceIndex(e,t){const r=mo(oi(e,o=>o.length,o=>t[o]),pf),i=r.slice(-5).reverse();if(i.length<r.length){const o=r.slice(0,-4);i[4]=[` ${o.length.toLocaleString("en-US")} more`,ar(o,pf)]}return i.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},cM={reduceIndex(e,t){return t[e[e.length-1]]}},Cl={label:"Frequency",reduceIndex(e){return e.length}},hM={label:"Distinct",reduceIndex(e,t){const n=new zl;for(const r of e)n.add(t[r]);return n.size}},dM=Rn(ar);function Ed(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>ar(n,o=>r[o])/i}}function Co(e,{scale:t,type:n,value:r,filter:i,hint:o,label:a=Ur(r)},l){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),N2(l,{scale:t,type:n,value:dt(e,r),label:a,filter:i,hint:o})}function mM(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Co(t,r,n)]))}function pM(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:o}])=>{const a=i==null?null:t[i];return[r,a==null?o:ot(o,a)]}));return n.channels=e,n}function N2(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&su(r,_s)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&su(r,U9)?null:"opacity";break;case"symbol":n!==!0&&su(r,K9)?(t.scale=null,t.value=ot(r,kc)):t.scale="symbol";break;default:t.scale=Je.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Je.has(n))throw new Error(`unknown scale: ${n}`);return t}function bM(e,t,n,r,i){const{order:o,reverse:a,reduce:l=!0,limit:s}=i;for(const u in i){if(!Je.has(u))continue;let{value:f,order:h=o,reverse:c=a,reduce:d=l,limit:m=s}=ta(i[u]);const p=f==null?void 0:f.startsWith("-");if(p&&(f=f.slice(1)),h=h===void 0?p!==(f==="width"||f==="height")?L2:I2:_M(h),d==null||d===!1)continue;const g=u==="fx"||u==="fy"?yM(t,r[u]):gM(n,u);if(!g)throw new Error(`missing channel for scale: ${u}`);const v=g.value,[b=0,w=1/0]=mr(m)?m:m<0?[m]:[0,m];if(f==null)g.domain=()=>{let _=Array.from(new zl(v));return c&&(_=_.reverse()),(b!==0||w!==1/0)&&(_=_.slice(b,w)),_};else{const _=f==="data"?e:f==="height"?Cd(n,"y1","y2"):f==="width"?Cd(n,"x1","x2"):_f(n,f,f==="y"?"y2":f==="x"?"x2":void 0),x=Cc(d===!0?"max":d,_);g.domain=()=>{let M=Iv(Xn(v),S=>x.reduceIndex(S,_),S=>v[S]);return h&&M.sort(h),c&&M.reverse(),(b!==0||w!==1/0)&&(M=M.slice(b,w)),M.map(vc)}}}}function gM(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function yM(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let o=0;o<n.length;++o){const a=r[n[o][0]];for(const l of e[o])i[l]=a}return t}function Cd(e,t,n){const r=_f(e,t),i=_f(e,n);return ot(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function _f(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function _M(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return I2;case"descending":return L2}throw new Error(`invalid order: ${e}`)}function I2([e,t],[n,r]){return sn(t,r)||sn(e,n)}function L2([e,t],[n,r]){return kl(t,r)||sn(e,n)}function Td(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function vM(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,o)=>i!==r[o]))&&(n=r,t=e(...r)),t)}const wM=vM(e=>new Intl.NumberFormat(e));function MM(e="en-US"){const t=wM(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function xM(e){return b9(e,"Invalid Date")}function PM(e="en-US"){const t=MM(e);return n=>(n instanceof Date?xM:typeof n=="number"?t:Mt)(n)}const Rr=PM();let vf=0,wf;function SM(){const e=vf;return vf=0,wf=void 0,e}function ir(e){e!==wf&&(wf=e,console.warn(e),++vf)}const Ct=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let AM=0;function $d(){return`plot-clip-${++AM}`}function kM(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:l,fillOpacity:s,stroke:u,strokeWidth:f,strokeOpacity:h,strokeLinejoin:c,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:g,opacity:v,mixBlendMode:b,imageFilter:w,paintOrder:_,pointerEvents:x,shapeRendering:M,channels:S},{ariaLabel:T,fill:I="currentColor",fillOpacity:L,stroke:C="none",strokeOpacity:G,strokeWidth:Y,strokeLinecap:N,strokeLinejoin:$,strokeMiterlimit:V,paintOrder:le}){I===null&&(l=null,s=null),C===null&&(u=null,h=null),Et(I)?!Et(C)&&(!Et(l)||S!=null&&S.fill)&&(C="none"):Et(C)&&(!Et(u)||S!=null&&S.stroke)&&(I="none");const[ie,se]=Vn(l,I),[Z,Q]=xt(s,L),[K,ne]=Vn(u,C),[ge,pe]=xt(h,G),[de,re]=xt(v);Eo(ne)||(f===void 0&&(f=Y),d===void 0&&(d=N),c===void 0&&(c=$),m===void 0&&!z9(c)&&(m=V),!Eo(se)&&_===void 0&&(_=le));const[ae,W]=xt(f);return I!==null&&(e.fill=pt(se,"currentColor"),e.fillOpacity=Ui(Q,1)),C!==null&&(e.stroke=pt(ne,"none"),e.strokeWidth=Ui(W,1),e.strokeOpacity=Ui(pe,1),e.strokeLinejoin=pt(c,"miter"),e.strokeLinecap=pt(d,"butt"),e.strokeMiterlimit=Ui(m,4),e.strokeDasharray=pt(p,"none"),e.strokeDashoffset=pt(g,"0")),e.target=Mt(a),e.ariaLabel=Mt(T),e.ariaDescription=Mt(i),e.ariaHidden=Mt(o),e.opacity=Ui(re,1),e.mixBlendMode=pt(b,"normal"),e.imageFilter=pt(w,"none"),e.paintOrder=pt(_,"normal"),e.pointerEvents=pt(x,"auto"),e.shapeRendering=pt(M,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:ie,scale:"auto",optional:!0},fillOpacity:{value:Z,scale:"auto",optional:!0},stroke:{value:K,scale:"auto",optional:!0},strokeOpacity:{value:ge,scale:"auto",optional:!0},strokeWidth:{value:ae,optional:!0},opacity:{value:de,scale:"auto",optional:!0}}}function EM(e,t){t&&e.filter(n=>pc(t[n])).append("title").call(TM,t)}function CM(e,t){t&&e.filter(([n])=>pc(t[n])).append("title").call($M,t)}function TM(e,t){t&&e.text(n=>Rr(t[n]))}function $M(e,t){t&&e.text(([n])=>Rr(t[n]))}function Kn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:l,strokeOpacity:s,strokeWidth:u,opacity:f,href:h}){r&&Ae(e,"aria-label",c=>r[c]),o&&Ae(e,"fill",c=>o[c]),a&&Ae(e,"fill-opacity",c=>a[c]),l&&Ae(e,"stroke",c=>l[c]),s&&Ae(e,"stroke-opacity",c=>s[c]),u&&Ae(e,"stroke-width",c=>u[c]),f&&Ae(e,"opacity",c=>f[c]),h&&O2(e,c=>h[c],t),n||EM(e,i)}function R2(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:l,strokeOpacity:s,strokeWidth:u,opacity:f,href:h}){r&&Ae(e,"aria-label",([c])=>r[c]),o&&Ae(e,"fill",([c])=>o[c]),a&&Ae(e,"fill-opacity",([c])=>a[c]),l&&Ae(e,"stroke",([c])=>l[c]),s&&Ae(e,"stroke-opacity",([c])=>s[c]),u&&Ae(e,"stroke-width",([c])=>u[c]),f&&Ae(e,"opacity",([c])=>f[c]),h&&O2(e,([c])=>h[c],t),n||CM(e,i)}function DM({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:l,href:s},{tip:u}){return[e,u?void 0:t,n,r,i,o,a,l,s].filter(f=>f!==void 0)}function NM(e,t,n){const r=Hl(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&ir("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*F2(e,t,n,r){const{z:i}=n,{z:o}=r,a=DM(r,n),l=[...t,...a];for(const s of o?NM(e,o,i):[e]){let u,f;e:for(const h of s){for(const c of l)if(!ur(c[h])){f&&f.push(-1);continue e}if(u===void 0){f&&(yield f),u=a.map(c=>Mr(c[h])),f=[h];continue}f.push(h);for(let c=0;c<a.length;++c)if(Mr(a[c][h])!==u[c]){yield f,u=a.map(m=>Mr(m[h])),f=[h];continue e}}f&&(yield f)}}function B2(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=fn(e,"clip",["frame","sphere"])),e}function IM(e,t,n,r){let i;const{clip:o=r.clip}=t;switch(o){case"frame":{const{width:a,height:l,marginLeft:s,marginRight:u,marginTop:f,marginBottom:h}=n,c=$d();i=`url(#${c})`,e=rt("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",c).append("rect").attr("x",s).attr("y",f).attr("width",a-u-s).attr("height",l-f-h)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:a}=r;if(!a)throw new Error('the "sphere" clip option requires a projection');const l=$d();i=`url(#${l})`,e.append("clipPath").attr("id",l).append("path").attr("d",es(a)({type:"Sphere"}));break}}Ae(e,"aria-label",t.ariaLabel),Ae(e,"aria-description",t.ariaDescription),Ae(e,"aria-hidden",t.ariaHidden),Ae(e,"clip-path",i)}function Jt(e,t,n,r){IM(e,t,n,r),Ae(e,"fill",t.fill),Ae(e,"fill-opacity",t.fillOpacity),Ae(e,"stroke",t.stroke),Ae(e,"stroke-width",t.strokeWidth),Ae(e,"stroke-opacity",t.strokeOpacity),Ae(e,"stroke-linejoin",t.strokeLinejoin),Ae(e,"stroke-linecap",t.strokeLinecap),Ae(e,"stroke-miterlimit",t.strokeMiterlimit),Ae(e,"stroke-dasharray",t.strokeDasharray),Ae(e,"stroke-dashoffset",t.strokeDashoffset),Ae(e,"shape-rendering",t.shapeRendering),Ae(e,"filter",t.imageFilter),Ae(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;Ae(e,"pointer-events",i)}function Qt(e,t){LM(e,"mix-blend-mode",t.mixBlendMode),Ae(e,"opacity",t.opacity)}function O2(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const o=this.ownerDocument.createElementNS(hi.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(hi.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function Ae(e,t,n){n!=null&&e.attr(t,n)}function LM(e,t,n){n!=null&&e.style(t,n)}function qt(e,t,{x:n,y:r},i=Ct,o=Ct){i+=t.dx,o+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&e.attr("transform",`translate(${i},${o})`)}function pt(e,t){if((e=Mt(e))!==t)return e}function Ui(e,t){if((e=Xe(e))!==t)return e}const RM=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function $c(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!RM.test(e))throw new Error(`invalid class name: ${e}`);return e}function Dc(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function oa({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(e)?a:/right$/.test(e)?t-i:(a+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-o:(r+n-o)/2]}function Nc(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:B2(n)}}function rt(e,{document:t}){return ao(jl(e).call(t.documentElement))}const q2=Math.PI,Dn=2*q2,Dd=.618;function FM({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={},a){if(e==null)return;if(typeof e.stream=="function")return e;let l,s,u="frame";if(dr(e)){let x;if({type:e,domain:s,inset:x,insetTop:n=x!==void 0?x:n,insetRight:r=x!==void 0?x:r,insetBottom:i=x!==void 0?x:i,insetLeft:o=x!==void 0?x:o,clip:u=u,...l}=e,e==null)return}typeof e!="function"&&({type:e}=G2(e));const{width:f,height:h,marginLeft:c,marginRight:d,marginTop:m,marginBottom:p}=a,g=f-c-d-o-r,v=h-m-p-n-i;if(e=e==null?void 0:e({width:g,height:v,clip:u,...l}),e==null)return;u=BM(u,c,m,f-d,h-p);let b=c+o,w=m+n,_;if(s!=null){const[[x,M],[S,T]]=es(e).bounds(s),I=Math.min(g/(S-x),v/(T-M));I>0?(b-=(I*(x+S)-g)/2,w-=(I*(M+T)-v)/2,_=lf({point(L,C){this.stream.point(L*I+b,C*I+w)}})):ir("Warning: the projection could not be fit to the specified domain; using the default scale.")}return _??(_=b===0&&w===0?U2():lf({point(x,M){this.stream.point(x+b,M+w)}})),{stream:x=>e.stream(_.stream(u(x)))}}function G2(e){switch(`${e}`.toLowerCase()){case"albers-usa":return en(A7,.7463,.4673);case"albers":return Aa(qp,.7463,.4673);case"azimuthal-equal-area":return en(k7,4,4);case"azimuthal-equidistant":return en(E7,Dn,Dn);case"conic-conformal":return Aa($7,Dn,Dn);case"conic-equal-area":return Aa(bl,6.1702,2.9781);case"conic-equidistant":return Aa(I7,7.312,3.6282);case"equal-earth":return en(R7,5.4133,2.6347);case"equirectangular":return en(D7,Dn,q2);case"gnomonic":return en(F7,3.4641,3.4641);case"identity":return{type:U2};case"reflect-y":return{type:OM};case"mercator":return en(C7,Dn,Dn);case"orthographic":return en(B7,2,2);case"stereographic":return en(O7,2,2);case"transverse-mercator":return en(q7,Dn,Dn);default:throw new Error(`unknown projection type: ${e}`)}}function BM(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return o=>o;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return Pp(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function en(e,t,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:l})=>{var u,f,h;const s=e();return a!=null&&((u=s.precision)==null||u.call(s,a)),o!=null&&((f=s.rotate)==null||f.call(s,o)),typeof l=="number"&&((h=s.clipAngle)==null||h.call(s,l)),s.scale(Math.min(r/t,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/t}}function Aa(e,t,n){const{type:r,aspectRatio:i}=en(e,t,n);return{type:o=>{const{parallels:a,domain:l,width:s,height:u}=o,f=r(o);return a!=null&&(f.parallels(a),l===void 0&&f.fitSize([s,u],{type:"Sphere"})),f},aspectRatio:i}}const U2=Qo({stream:e=>e}),OM=Qo(lf({point(e,t){this.stream.point(e,-t)}}));function qM(e,t,n,r){const i=n[e],o=n[t],a=i.length,l=n[e]=new Float64Array(a).fill(NaN),s=n[t]=new Float64Array(a).fill(NaN);let u;const f=r.stream({point(h,c){l[u]=h,s[u]=c}});for(u=0;u<a;++u)f.point(i[u],o[u])}function GM({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(dr(e)&&(e=e.type),e!=null)}function UM(e){if(typeof(e==null?void 0:e.stream)=="function")return Dd;if(dr(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=G2(e);if(t)return t}return Dd}}function zM(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},o={point(a,l){t.push(a),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of e.value)_r(a,o);return[r,i]}const HM=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],z2=new Map([["accent",u8],["category10",s8],["dark2",f8],["observable10",HM],["paired",c8],["pastel1",h8],["pastel2",d8],["set1",m8],["set2",p8],["set3",b8],["tableau10",g8]]);function WM(e){return e!=null&&z2.has(`${e}`.toLowerCase())}const Nd=new Map([...z2,["brbg",Nn(Ab,kb)],["prgn",Nn(Eb,Cb)],["piyg",Nn(Tb,$b)],["puor",Nn(Db,Nb)],["rdbu",Nn(hf,vl)],["rdgy",Nn(Ib,Lb)],["rdylbu",Nn(df,wl)],["rdylgn",Nn(Rb,Fb)],["spectral",Nn(Bb,Ob)],["burd",Id(hf,vl)],["buylrd",Id(df,wl)],["blues",ut(fg,cg)],["greens",ut(hg,dg)],["greys",ut(mg,pg)],["oranges",ut(vg,wg)],["purples",ut(bg,gg)],["reds",ut(yg,_g)],["turbo",In(Eg)],["viridis",In(Cg)],["magma",In(Tg)],["inferno",In($g)],["plasma",In(Dg)],["cividis",In(Mg)],["cubehelix",In(xg)],["warm",In(Pg)],["cool",In(Sg)],["bugn",ut(qb,Gb)],["bupu",ut(Ub,zb)],["gnbu",ut(Hb,Wb)],["orrd",ut(Vb,Yb)],["pubu",ut(Zb,Kb)],["pubugn",ut(jb,Xb)],["purd",ut(Jb,Qb)],["rdpu",ut(eg,tg)],["ylgn",ut(ig,og)],["ylgnbu",ut(ng,rg)],["ylorbr",ut(ag,lg)],["ylorrd",ut(sg,ug)],["rainbow",Ld(Ag)],["sinebow",Ld(kg)]]);function ut(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?on(t,n):e[n])}function Nn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?on(t,n):e[n])}function Id(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?on(r=>t(1-r),n):e[n].slice().reverse())}function In(e){return({length:t})=>on(e,Math.max(2,Math.floor(t)))}function Ld(e){return({length:t})=>on(e,Math.floor(t)+1).slice(0,-1)}function H2(e){const t=`${e}`.toLowerCase();if(!Nd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return Nd.get(t)}function xs(e,t){const n=H2(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function VM(e,t="greys"){const n=new Set,[r,i]=xs(t,2);for(const o of e)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const Rd=new Map([["brbg",kb],["prgn",Cb],["piyg",$b],["puor",Nb],["rdbu",vl],["rdgy",Lb],["rdylbu",wl],["rdylgn",Fb],["spectral",Ob],["burd",e=>vl(1-e)],["buylrd",e=>wl(1-e)],["blues",cg],["greens",dg],["greys",pg],["purples",gg],["reds",_g],["oranges",wg],["turbo",Eg],["viridis",Cg],["magma",Tg],["inferno",$g],["plasma",Dg],["cividis",Mg],["cubehelix",xg],["warm",Pg],["cool",Sg],["bugn",Gb],["bupu",zb],["gnbu",Wb],["orrd",Yb],["pubugn",Xb],["pubu",Kb],["purd",Qb],["rdpu",tg],["ylgnbu",rg],["ylgn",og],["ylorbr",lg],["ylorrd",ug],["rainbow",Ag],["sinebow",kg]]);function Ic(e){const t=`${e}`.toLowerCase();if(!Rd.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Rd.get(t)}const YM=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function jM(e){return e!=null&&YM.has(`${e}`.toLowerCase())}const W2=e=>t=>e(1-t),cu=[0,1],Fd=new Map([["number",gt],["rgb",$r],["hsl",b5],["hcl",_5],["lab",g5]]);function V2(e){const t=`${e}`.toLowerCase();if(!Fd.has(t))throw new Error(`unknown interpolator: ${t}`);return Fd.get(t)}function aa(e,t,n,{type:r,nice:i,clamp:o,zero:a,domain:l=j2(e,n),unknown:s,round:u,scheme:f,interval:h,range:c=Je.get(e)===na?ox(n,l):Je.get(e)===ra?ax(n,l):Je.get(e)===ia?cu:void 0,interpolate:d=Je.get(e)===Zn?f==null&&c!==void 0?$r:Ic(f!==void 0?f:r==="cyclical"?"rainbow":"turbo"):u?Yf:gt,reverse:m}){if(h=Di(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=V2(d)),m=!!m,c!==void 0){const p=(l=Ot(l)).length,g=(c=Ot(c)).length;if(p!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Kl(d,c),c=void 0}}if(d.length===1?(m&&(d=W2(d),m=!1),c===void 0&&(c=Float64Array.from(l,(p,g)=>g/(l.length-1)),c.length===2&&(c=cu)),t.interpolate((c===cu?Qo:Rc)(d))):t.interpolate(d),a){const[p,g]=Ht(l);(p>0||g<0)&&(l=ko(l),Mi(l)!==Math.sign(p)?l[l.length-1]=0:l[0]=0)}return m&&(l=Qa(l)),t.domain(l).unknown(s),i&&(t.nice(XM(i,r)),l=t.domain()),c!==void 0&&t.range(c),o&&t.clamp(o),{type:r,domain:l,range:c,scale:t,interpolate:d,interval:h}}function XM(e,t){return e===!0?void 0:typeof e=="number"?e:L9(e,t)}function ZM(e,t,n){return aa(e,ic(),t,n)}function KM(e,t,n){return Y2(e,t,{...n,exponent:.5})}function Y2(e,t,{exponent:n=1,...r}){return aa(e,ob().exponent(n),t,{...r,type:"pow"})}function JM(e,t,{base:n=10,domain:r=lx(t),...i}){return aa(e,tb().base(n),t,{...i,domain:r})}function QM(e,t,{constant:n=1,...r}){return aa(e,rb().constant(n),t,r)}function ex(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:a=sx(t),unknown:l,interpolate:s,reverse:u}){return n===void 0&&(n=s!==void 0?on(s,i):Je.get(e)===Zn?xs(o,i):void 0),a.length>0&&(a=ab(a,n===void 0?{length:i}:n).quantiles()),Lc(e,t,{domain:a,range:n,reverse:u,unknown:l})}function tx(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=j2(e,t),unknown:a,interpolate:l,reverse:s}){const[u,f]=Ht(o);let h;return n===void 0?(h=po(u,f,r),h[0]<=u&&h.splice(0,1),h[h.length-1]>=f&&h.pop(),r=h.length+1,n=l!==void 0?on(l,r):Je.get(e)===Zn?xs(i,r):void 0):(h=on(gt(u,f),r+1).slice(1,-1),u instanceof Date&&(h=h.map(c=>new Date(c)))),Mi(Ot(o))<0&&h.reverse(),Lc(e,t,{domain:h,range:n,reverse:s,unknown:a})}function Lc(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?on(o,n.length+1):Je.get(e)===Zn?xs(i,n.length+1):void 0,reverse:l}){n=Ot(n);const s=Mi(n);if(!isNaN(s)&&!nx(n,s))throw new Error(`the ${e} scale has a non-monotonic domain`);return l&&(a=Qa(a)),{type:"threshold",scale:lb(s<0?Qa(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function nx(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const o=Fo(i,i=e[n]);if(o!==0&&o!==t)return!1}return!0}function rx(e){return{type:"identity",scale:Y9(Je.get(e))?Jp():t=>t}}function To(e,t=h2){return e.length?[Un(e,({value:n})=>n===void 0?n:Un(n,t)),Rt(e,({value:n})=>n===void 0?n:Rt(n,t))]:[0,1]}function j2(e,t){const n=Je.get(e);return(n===na||n===ia||n===ra?ix:To)(t)}function ix(e){return[0,e.length?Rt(e,({value:t})=>t===void 0?t:Rt(t,h2)):1]}function ox(e,t){const n=e.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=ci(e,.5,({value:a})=>a===void 0?NaN:ci(a,.25,ps)),i=t.map(a=>3*Math.sqrt(a/r)),o=30/Rt(i);return o<1?i.map(a=>a*o):i}function ax(e,t){const n=Du(e,({value:o})=>o===void 0?NaN:Du(o,Math.abs)),r=t.map(o=>12*o/n),i=60/Rt(r);return i<1?r.map(o=>o*i):r}function lx(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return To(e,ps);if(n<0)return To(e,bc)}return[1,10]}function sx(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function Rc(e){return(t,n)=>r=>e(t+r*(n-t))}function Ps(e,t,n,r,{type:i,nice:o,clamp:a,domain:l=To(r),unknown:s,pivot:u=0,scheme:f,range:h,symmetric:c=!0,interpolate:d=Je.get(e)===Zn?f==null&&h!==void 0?$r:Ic(f!==void 0?f:"rdbu"):gt,reverse:m}){u=+u,l=Ot(l);let[p,g]=l;if(l.length>2&&ir(`Warning: the diverging ${e} scale domain contains extra elements.`),Fo(p,g)<0&&([p,g]=[g,p],m=!m),p=Math.min(p,u),g=Math.max(g,u),typeof d!="function"&&(d=V2(d)),h!==void 0&&(d=d.length===1?Rc(d)(...h):Kl(d,h)),m&&(d=W2(d)),c){const v=n.apply(u),b=v-n.apply(p),w=n.apply(g)-v;b<w?p=n.invert(v-w):b>w&&(g=n.invert(v+b))}return t.domain([p,u,g]).unknown(s).interpolator(d),a&&t.clamp(a),o&&t.nice(o),{type:i,domain:[p,g],pivot:u,interpolate:d,scale:t}}function ux(e,t,n){return Ps(e,Mb(),dx,t,n)}function fx(e,t,n){return X2(e,t,{...n,exponent:.5})}function X2(e,t,{exponent:n=1,...r}){return Ps(e,Sb().exponent(n=+n),bx(n),t,{...r,type:"diverging-pow"})}function cx(e,t,{base:n=10,pivot:r=1,domain:i=To(t,r<0?bc:ps),...o}){return Ps(e,xb().base(n=+n),mx,t,{domain:i,pivot:r,...o})}function hx(e,t,{constant:n=1,...r}){return Ps(e,Pb().constant(n=+n),gx(n),t,r)}const dx={apply(e){return e},invert(e){return e}},mx={apply:Math.log,invert:Math.exp},px={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function bx(e){return e===.5?px:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function gx(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Z2(e,t,n,r){return aa(e,t,n,r)}function yx(e,t,n){return Z2(e,a8(),t,n)}function _x(e,t,n){return Z2(e,l8(),t,n)}const la=Symbol("ordinal");function K2(e,t,n,{type:r,interval:i,domain:o,range:a,reverse:l,hint:s}){return i=Di(i,r),o===void 0&&(o=Q2(n,i,e)),(r==="categorical"||r===la)&&(r="ordinal"),l&&(o=Qa(o)),o=t.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),t.range(a)),{type:r,domain:o,range:a,scale:t,hint:s,interval:i}}function vx(e,t,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:l,...s}){r=Di(r,n),i===void 0&&(i=Q2(t,r,e));let u;if(Je.get(e)===ws)u=xx(t),o=o===void 0?Px(u):ot(o,kc);else if(Je.get(e)===Zn&&(o===void 0&&(n==="ordinal"||n===la)&&(o=VM(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const f=Ic(a),h=o[0],c=o[1]-o[0];o=({length:d})=>on(m=>f(h+c*m),d)}else o=H2(a);if(l===uf)throw new Error(`implicit unknown on ${e} scale is not supported`);return K2(e,rc().unknown(l),t,{...s,type:n,domain:i,range:o,hint:u})}function wx(e,t,{align:n=.5,padding:r=.5,...i}){return J2(G7().align(n).padding(r),t,i,e)}function Mx(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=e==="fx"||e==="fy"?0:r,...a}){return J2(is().align(n).paddingInner(i).paddingOuter(o),t,a,e)}function J2(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=K2(r,e,t,n),e.round=i,e}function Q2(e,t,n){const r=new zl;for(const{value:i,domain:o}of e){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(t!==void 0){const[i,o]=Ht(r).map(t.floor,t);return t.range(i,t.offset(o))}if(r.size>1e4&&Je.get(n)===yn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return mo(r,sn)}function Bd(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function xx(e){return{fill:Bd(e,"fill"),stroke:Bd(e,"stroke")}}function Px(e){return Et(e.fill)?$8:T8}function Mf(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:l,nice:s,clamp:u,zero:f,align:h,padding:c,projection:d,facet:{label:m=t}={},...p}={}){const g={};for(const[v,b]of e){const w=p[v],_=Cx(v,b,{round:Je.get(v)===yn?l:void 0,nice:s,clamp:u,zero:f,align:h,padding:c,projection:d,...w});if(_){let{label:x=v==="fx"||v==="fy"?m:t,percent:M,transform:S,inset:T,insetTop:I=T!==void 0?T:v==="y"?r:0,insetRight:L=T!==void 0?T:v==="x"?i:0,insetBottom:C=T!==void 0?T:v==="y"?o:0,insetLeft:G=T!==void 0?T:v==="x"?a:0}=w||{};if(S==null)S=void 0;else if(typeof S!="function")throw new Error("invalid scale transform; not a function");_.percent=!!M,_.label=x===void 0?Ax(b,_):x,_.transform=S,v==="x"||v==="fx"?(_.insetLeft=+G,_.insetRight=+L):(v==="y"||v==="fy")&&(_.insetTop=+I,_.insetBottom=+C),g[v]=_}}return g}function Od(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:o,type:a,interval:l,label:s}=i;t[r]=Ix(i),n[r]=o,o.type=a,l!=null&&(o.interval=l),s!=null&&(o.label=s)}return n}function Sx(e,t){const{x:n,y:r,fx:i,fy:o}=e,a=i||o?Fc(t):t;i&&qd(i,a),o&&Gd(o,a);const l=i||o?ey(e,t):t;n&&qd(n,l),r&&Gd(r,l)}function Ax(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!zr(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function kx(e){return Math.sign(Mi(e.domain()))*Math.sign(Mi(e.range()))}function Fc(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:l,marginRight:s,marginBottom:u,marginLeft:f}}=e;return{marginTop:Math.max(t,l),marginRight:Math.max(n,s),marginBottom:Math.max(r,u),marginLeft:Math.max(i,f),width:o,height:a}}function ey({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:l,height:s}=Fc(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:e?e.scale.bandwidth()+a+i:l,height:t?t.scale.bandwidth()+r+o:s,facet:{width:l,height:s}}}function qd(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:o=0,marginRight:a=0}=t,l=o+n,s=i-a-r;e.range=[l,Math.max(l,s)],zr(e)||(e.range=ny(e)),e.scale.range(e.range)}ty(e)}function Gd(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:o=0,marginBottom:a=0}=t,l=o+n,s=i-a-r;e.range=[Math.max(l,s),l],zr(e)?e.range.reverse():e.range=ny(e),e.scale.range(e.range)}ty(e)}function ty(e){e.round===void 0&&$x(e)&&Ex(e)<=30&&e.scale.round(!0)}function Ex({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),a=t-i,l=Math.abs(r-n)/Math.max(1,a+o*2);return(l-Math.floor(l))*a}function ny(e){const t=e.scale.domain().length+ry(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,o)=>n+o/(t-1)*(r-n))}function Cx(e,t=[],n={}){const r=Tx(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&zr({type:r})){const i=t.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Nt)?ir(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Zr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Zr(r)}".`):i.some(B9)?ir(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Zr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Zr(r)}".`):i.some(O9)&&ir(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Zr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Zr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=ka(t,n,gn);break;case"identity":switch(Je.get(e)){case yn:n=ka(t,n,gn);break;case ws:n=ka(t,n,Dx);break}break;case"utc":case"time":n=ka(t,n,C9);break}switch(r){case"diverging":return ux(e,t,n);case"diverging-sqrt":return fx(e,t,n);case"diverging-pow":return X2(e,t,n);case"diverging-log":return cx(e,t,n);case"diverging-symlog":return hx(e,t,n);case"categorical":case"ordinal":case la:return vx(e,t,n);case"cyclical":case"sequential":case"linear":return ZM(e,t,n);case"sqrt":return KM(e,t,n);case"threshold":return Lc(e,t,n);case"quantile":return ex(e,t,n);case"quantize":return tx(e,t,n);case"pow":return Y2(e,t,n);case"log":return JM(e,t,n);case"symlog":return QM(e,t,n);case"utc":return _x(e,t,n);case"time":return yx(e,t,n);case"point":return wx(e,t,n);case"band":return Mx(e,t,n);case"identity":return rx(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Zr(e){return typeof e=="symbol"?e.description:e}function Ud(e){return typeof e=="string"?`${e}`.toLowerCase():e}const zd={toString:()=>"projection"};function Tx(e,t,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:l}){if(n=Ud(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&l!=null&&(n=zd);for(const u of t){const f=Ud(u.type);if(f!==void 0){if(n===void 0)n=f;else if(n!==f)throw new Error(`scale incompatible with channel: ${n} !== ${f}`)}}if(n===zd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:u})=>u!==void 0))return;const s=Je.get(e);if(s===na)return"sqrt";if(s===ia||s===ra)return"linear";if(s===ws)return"ordinal";if((r||i||[]).length>2)return hu(s);if(r!==void 0){if(Sd(r))return hu(s);if(Nt(r))return"utc"}else{const u=t.map(({value:f})=>f).filter(f=>f!==void 0);if(u.some(Sd))return hu(s);if(u.some(Nt))return"utc"}if(s===Zn){if(a!=null||jM(o))return"diverging";if(WM(o))return"categorical"}return"linear"}function hu(e){switch(e){case yn:return"point";case Zn:return la;default:return"ordinal"}}function zr({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===la}function ry({type:e}){return e==="threshold"}function $x({type:e}){return e==="point"||e==="band"}function Pi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function ka(e,{domain:t,...n},r){var i;for(const o of e)o.value!==void 0&&(t===void 0&&(t=(i=o.value)==null?void 0:i.domain),o.value=r(o.value));return{domain:t===void 0?t:r(t),...n}}function Dx(e){return ot(e,kc)}function Nx(e){return t=>{if(!Je.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function Ix({scale:e,type:t,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:l,pivot:s}){if(t==="identity")return{type:"identity",apply:f=>f,invert:f=>f};const u=e.unknown?e.unknown():void 0;return{type:t,domain:ko(n),...r!==void 0&&{range:ko(r)},...a!==void 0&&{transform:a},...l&&{percent:l},...u!==void 0&&{unknown:u},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:f=>e(f),...e.invert&&{invert:f=>e.invert(f)}}}function Lx(e,t,n={}){let r=.5-Ct,i=.5+Ct,o=.5+Ct,a=.5-Ct;for(const{marginTop:p,marginRight:g,marginBottom:v,marginLeft:b}of t)p>r&&(r=p),g>i&&(i=g),v>o&&(o=v),b>a&&(a=b);let{margin:l,marginTop:s=l!==void 0?l:r,marginRight:u=l!==void 0?l:i,marginBottom:f=l!==void 0?l:o,marginLeft:h=l!==void 0?l:a}=n;s=+s,u=+u,f=+f,h=+h;let{width:c=640,height:d=Rx(e,n,{width:c,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,s-r+f-o)}=n;c=+c,d=+d;const m={width:c,height:d,marginTop:s,marginRight:u,marginBottom:f,marginLeft:h};if(e.fx||e.fy){let{margin:p,marginTop:g=p!==void 0?p:s,marginRight:v=p!==void 0?p:u,marginBottom:b=p!==void 0?p:f,marginLeft:w=p!==void 0?p:h}=n.facet??{};g=+g,v=+v,b=+b,w=+w,m.facet={marginTop:g,marginRight:v,marginBottom:b,marginLeft:w}}return m}function Rx({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:l,marginRightDefault:s,marginBottomDefault:u,marginLeftDefault:f}){const h=n?n.scale.domain().length:1,c=UM(i);if(c){const m=r?r.scale.domain().length:1,p=(1.1*h-.1)/(1.1*m-.1)*c,g=Math.max(.1,Math.min(10,p));return Math.round((a-f-s)*g+l+u)}const d=t?zr(t)?t.scale.domain().length:Math.max(7,17/h):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const m=Hd("y",t)/(Hd("x",e)*o),p=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,v=p*(a-f-s)-e.insetLeft-e.insetRight;return(m*v+t.insetTop+t.insetBottom)/g+l+u}return!!(t||n)*Math.max(1,Math.min(60,d*h))*20+!!r*30+60}function Hd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const l=t.scale.exponent();i=s=>Math.pow(s,l);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[o,a]=Ht(r);return Math.abs(i(a)-i(o))}function Fx(e,t){const{fx:n,fy:r}=Mf(e,t),i=n==null?void 0:n.scale.domain(),o=r==null?void 0:r.scale.domain();return i&&o?Dv(i,o).map(([a,l],s)=>({x:a,y:l,i:s})):i?i.map((a,l)=>({x:a,i:l})):o?o.map((a,l)=>({y:a,i:l})):void 0}function Bx(e,{x:t,y:n}){return t&&(t=xf(t)),n&&(n=xf(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Bc(e,{fx:t,fy:n}){const r=Xn(e),i=t==null?void 0:t.value,o=n==null?void 0:n.value;return t&&n?oi(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):t?oi(r,a=>(a.fx=i[a[0]],a),a=>i[a]):oi(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function Ox(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:o})=>`translate(${e(i)-r},${t(o)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function qx(e){const t=[],n=new Uint32Array(ar(e,r=>r.length));for(const r of e){let i=0;for(const o of e)r!==o&&(n.set(o,i),i+=o.length);t.push(n.slice(0,i))}return t}const Gx=new Map([["top",du],["right",bu],["bottom",mu],["left",pu],["top-left",Ea(du,pu)],["top-right",Ea(du,bu)],["bottom-left",Ea(mu,pu)],["bottom-right",Ea(mu,bu)],["top-empty",Hx],["right-empty",Yx],["bottom-empty",Wx],["left-empty",Vx],["empty",jx]]);function Ux(e){if(e==null)return null;const t=Gx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Wd=new WeakMap;function xf(e){let t=Wd.get(e);return t||Wd.set(e,t=new Er(ot(e,(n,r)=>[n,r]))),t}function pr(e,t){return xf(e).get(t)}function zx(e,t,n){return t=Mr(t),n=Mr(n),e.find(r=>Object.is(Mr(r.x),t)&&Object.is(Mr(r.y),n))}function Ss(e,t,n){var r;return(r=zx(e,t,n))==null?void 0:r.empty}function du(e,{y:t},{y:n}){return t?pr(t,n)===0:!0}function mu(e,{y:t},{y:n}){return t?pr(t,n)===t.length-1:!0}function pu(e,{x:t},{x:n}){return t?pr(t,n)===0:!0}function bu(e,{x:t},{x:n}){return t?pr(t,n)===t.length-1:!0}function Hx(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=pr(t,r);if(o>0)return Ss(e,n,t[o-1])}function Wx(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=pr(t,r);if(o<t.length-1)return Ss(e,n,t[o+1])}function Vx(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=pr(t,n);if(o>0)return Ss(e,t[o-1],r)}function Yx(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=pr(t,n);if(o<t.length-1)return Ss(e,t[o+1],r)}function jx(e,t,{empty:n}){return n}function Ea(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function gu(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:o})=>{var a;return((a=r.get(i))==null?void 0:a.get(o))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class St{constructor(t,n={},r={},i){const{facet:o="auto",facetAnchor:a,fx:l,fy:s,sort:u,dx:f=0,dy:h=0,margin:c=0,marginTop:d=c,marginRight:m=c,marginBottom:p=c,marginLeft:g=c,clip:v=i==null?void 0:i.clip,channels:b,tip:w,render:_}=r;if(this.data=t,this.sort=wi(u)?u:null,this.initializer=xi(r).initializer,this.transform=this.initializer?r.transform:Ms(r).transform,o===null||o===!1?this.facet=null:(this.facet=fn(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=t===za&&typeof l=="string"?[l]:l,this.fy=t===za&&typeof s=="string"?[s]:s),this.facetAnchor=Ux(a),n=A2(n),b!==void 0&&(n={...Xx(b),...n}),i!==void 0&&(n={...kM(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,M])=>{if(ys(M.value)){const{value:S,label:T=M.label,scale:I=M.scale}=M.value;M={...M,label:T,scale:I,value:S}}if(t===za&&typeof M.value=="string"){const{value:S}=M;M={...M,value:[S]}}return[x,M]}).filter(([x,{value:M,optional:S}])=>{if(M!=null)return!0;if(S)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+f,this.dy=+h,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+g,this.clip=B2(v),this.tip=Zx(w),this.facet==="super"){if(l||s)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:M}=n[x];if(!(M!=="x"&&M!=="y"))throw new Error("super-faceting cannot use x or y")}}_!=null&&(this.render=oy(_,this.render))}initialize(t,n,r){let i=Ot(this.data);t===void 0&&i!=null&&(t=[Xn(i)]);const o=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=Ot(i)),t!==void 0&&(t.original=o);const a=mM(this.channels,i);return this.sort!=null&&bM(i,t,a,n,this.sort),{data:i,facets:t,channels:a}}filter(t,n,r){for(const i in n){const{filter:o=ur}=n[i];if(o!==null){const a=r[i];t=t.filter(l=>o(a[l]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in t&&t[o].scale==="y"&&qM(i,o,n,r.projection)}}scale(t,n,r){const i=pM(t,n);return r.projection&&this.project(t,i,r),i}}function iy(...e){return e.plot=St.prototype.plot,e}function oy(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,o,a,l){return e.call(this,n,r,i,o,a,(s,u,f,h,c)=>t.call(this,s,u,f,h,c,l))}}function Xx(e){return Object.fromEntries(Object.entries(A2(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:ta(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function Zx(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?fn(e,"tip",["x","y","xy"]):e}function As(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:dr(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Vd=new WeakMap;function Oc(e,t,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:l,render:s,...u}={}){return a=+a,i!=null&&(n??(n=null),l={...l,px:{value:i,scale:"x"}}),o!=null&&(r??(r=null),l={...l,py:{value:o,scale:"y"}}),{x:n,y:r,channels:l,...u,render:oy(function(f,h,c,d,m,p){m={...m,pointerSticky:!1};const g=m.ownerSVGElement,{data:v}=m.getMarkState(this);let b=Vd.get(g);b||Vd.set(g,b={sticky:!1,roots:[],renders:[]});let w=b.renders.push(ne)-1;const{x:_,y:x,fx:M,fy:S}=h;let T=M?M(f.fx)-d.marginLeft:0,I=S?S(f.fy)-d.marginTop:0;_!=null&&_.bandwidth&&(T+=_.bandwidth()/2),x!=null&&x.bandwidth&&(I+=x.bandwidth()/2);const L=f.fi!=null;let C;if(L){let re=b.facetStates;re||(b.facetStates=re=new Map),C=re.get(this),C||re.set(this,C=new Map)}const[G,Y]=oa(this,d),{px:N,py:$}=c,V=N?re=>N[re]:ay(c,G),le=$?re=>$[re]:ly(c,Y);let ie,se,Z,Q;function K(re,ae){if(L)if(Q&&(Q=cancelAnimationFrame(Q)),re==null)C.delete(f.fi);else{C.set(f.fi,ae),Q=requestAnimationFrame(()=>{Q=null;for(const[W,ee]of C)if(ee<ae||ee===ae&&W<f.fi){re=null;break}ne(re)});return}ne(re)}function ne(re){if(ie===re&&Z===b.sticky)return;ie=re,Z=m.pointerSticky=b.sticky;const ae=ie==null?[]:[ie];L&&(ae.fx=f.fx,ae.fy=f.fy,ae.fi=f.fi);const W=p(ae,h,c,d,m);if(se){if(L){const ee=se.parentNode,oe=se.getAttribute("transform"),F=W.getAttribute("transform");oe?W.setAttribute("transform",oe):W.removeAttribute("transform"),F?ee.setAttribute("transform",F):ee.removeAttribute("transform"),W.removeAttribute("aria-label"),W.removeAttribute("aria-description"),W.removeAttribute("aria-hidden")}se.replaceWith(W)}return b.roots[w]=se=W,ie==null&&(C==null?void 0:C.size)>1||m.dispatchValue(ie==null?null:v[ie]),W}function ge(re){if(b.sticky||re.pointerType==="mouse"&&re.buttons===1)return;let[ae,W]=Bw(re);ae-=T,W-=I;const ee=ae<d.marginLeft||ae>d.width-d.marginRight?1:e,oe=W<d.marginTop||W>d.height-d.marginBottom?1:t;let F=null,he=a*a;for(const te of f){const ve=ee*(V(te)-ae),ye=oe*(le(te)-W),xe=ve*ve+ye*ye;xe<=he&&(F=te,he=xe)}if(F!=null&&(e!==1||t!==1)){const te=V(F)-ae,ve=le(F)-W;he=te*te+ve*ve}K(F,he)}function pe(re){re.pointerType==="mouse"&&ie!=null&&(b.sticky&&b.roots.some(ae=>ae==null?void 0:ae.contains(re.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(ae=>ae(null))):(b.sticky=!0,ne(ie)),re.stopImmediatePropagation()))}function de(re){re.pointerType==="mouse"&&(b.sticky||K(null))}return g.addEventListener("pointerenter",ge),g.addEventListener("pointermove",ge),g.addEventListener("pointerdown",pe),g.addEventListener("pointerleave",de),ne(null)},s)}}function Kx(e){return Oc(1,1,e)}function Jx(e){return Oc(1,.01,e)}function Yd(e){return Oc(.01,1,e)}function ay({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function ly({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function sy(e){return zr(e)&&e.interval===void 0?void 0:"tabular-nums"}function Qx(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:l=0,marginBottom:s=16+r,marginLeft:u=0,style:f,ticks:h=(i-u-l)/64,tickFormat:c,fontVariant:d=sy(e),round:m=!0,opacity:p,className:g}=t;const v=Nc(t);g=$c(g),p=xt(p)[1],c===null&&(c=()=>null);const b=rt("svg",v).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(G=>G.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(Dc,f);let w=G=>G.selectAll(".tick line").attr("y1",a+s-o),_;const x=m?(G,Y)=>G.rangeRound(Y):(G,Y)=>G.range(Y),{type:M,domain:S,range:T,interpolate:I,scale:L,pivot:C}=e;if(I){const G=T===void 0?I:Kl(I.length===1?Rc(I):I,T);_=x(L.copy(),on(gt(u,i-l),Math.min(S.length+(C!==void 0),T===void 0?1/0:T.length)));const Y=256,N=v.document.createElement("canvas");N.width=Y,N.height=1;const $=N.getContext("2d");for(let V=0,le=Y-1;V<Y;++V)$.fillStyle=G(V/le),$.fillRect(V,0,1,1);b.append("image").attr("opacity",p).attr("x",u).attr("y",a).attr("width",i-u-l).attr("height",o-a-s).attr("preserveAspectRatio","none").attr("xlink:href",N.toDataURL())}else if(M==="threshold"){const G=S,Y=c===void 0?N=>N:typeof c=="string"?Ti(c):c;_=x(ic().domain([-1,T.length-1]),[u,i-l]),b.append("g").attr("fill-opacity",p).selectAll().data(T).enter().append("rect").attr("x",(N,$)=>_($-1)).attr("y",a).attr("width",(N,$)=>_($)-_($-1)).attr("height",o-a-s).attr("fill",N=>N),h=ot(G,(N,$)=>$),c=N=>Y(G[N],N)}else _=x(is().domain(S),[u,i-l]),b.append("g").attr("fill-opacity",p).selectAll().data(S).enter().append("rect").attr("x",_).attr("y",a).attr("width",Math.max(0,_.bandwidth()-1)).attr("height",o-a-s).attr("fill",L),w=()=>{};return b.append("g").attr("transform",`translate(0,${o-s})`).call(t3(_).ticks(Array.isArray(h)?null:h,typeof c=="string"?c:void 0).tickFormat(typeof c=="function"?c:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",pt(d,"normal")).call(w).call(G=>G.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",u).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const uy=Math.PI/180;function sa(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=yu(n),e.markerMid=yu(r),e.markerEnd=yu(i)}function yu(e){if(e==null||e===!1)return null;if(e===!0)return Xd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return jd("auto");case"arrow-reverse":return jd("auto-start-reverse");case"dot":return eP;case"circle":case"circle-fill":return Xd;case"circle-stroke":return tP;case"tick":return _u("auto");case"tick-x":return _u(90);case"tick-y":return _u(0)}throw new Error(`invalid marker: ${e}`)}function jd(e){return(t,n)=>rt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function eP(e,t){return rt("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Xd(e,t){return rt("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function tP(e,t){return rt("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function _u(e){return(t,n)=>rt("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let nP=0;function ks(e,t,{stroke:n},r){return fy(e,t,n&&(i=>n[i]),r)}function rP(e,t,{stroke:n},r){return fy(e,t,n&&(([i])=>n[i]),r)}function fy(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},o=()=>i,a){const l=new Map;function s(u){return function(f){const h=o(f);let c=l.get(u);c||l.set(u,c=new Map);let d=c.get(h);if(!d){const m=this.parentNode.insertBefore(u(h,a),this),p=`plot-marker-${++nP}`;m.setAttribute("id",p),c.set(h,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",s(t)),n&&e.attr("marker-mid",s(n)),r&&e.attr("marker-end",s(r))}function qc({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=hy(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function cy({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=hy(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function hy(e,t,n){return e===void 0&&t===void 0&&n===void 0?Ct?[1,0]:[.5,.5]:[t,n]}function dy(e,{interval:t}){return e={...ta(e)},e.interval=Pc(e.interval===void 0?t:e.interval),e}function my(e,t,n,r){const{[e]:i,[`${e}1`]:o,[`${e}2`]:a}=n,{value:l,interval:s}=dy(i,n);if(l==null||s==null&&!r)return n;const u=Ur(i);if(s==null){let d;const m={transform:p=>d||(d=dt(p,l)),label:u};return{...n,[e]:void 0,[`${e}1`]:o===void 0?m:o,[`${e}2`]:a===void 0&&!(o===a&&r)?m:a}}let f,h;function c(d){return h!==void 0&&d===f?h:h=ot(dt(f=d,l),m=>s.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:o===void 0?{transform:c,label:u}:o,[`${e}2`]:a===void 0?{transform:d=>c(d).map(m=>s.offset(m)),label:u}:a})}function py(e,t,n){const{[e]:r}=n,{value:i,interval:o}=dy(r,n);return i==null||o==null?n:t({...n,[e]:{label:Ur(r),transform:a=>{const l=ot(dt(a,i),u=>o.floor(u)),s=l.map(u=>o.offset(u));return l.map(Nt(l)?(u,f)=>u==null||isNaN(u=+u)||(f=s[f],f==null)||isNaN(f=+f)?void 0:new Date((u+f)/2):(u,f)=>u==null||(f=s[f],f==null)?NaN:(+u+ +f)/2)}}})}function iP(e={}){return my("x",qc,e)}function by(e={}){return my("y",cy,e)}function oP(e={}){return py("x",qc,e)}function aP(e={}){return py("y",cy,e)}const gy={ariaLabel:"rule",fill:null,stroke:"currentColor"};class lP extends St{constructor(t,n={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:l=a,insetBottom:s=a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},As(n,"x"),gy),this.insetTop=Xe(l),this.insetBottom=Xe(s),sa(this,n)}render(t,n,r,i,o){const{x:a,y:l}=n,{x:s,y1:u,y2:f}=r,{width:h,height:c,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetTop:v,insetBottom:b}=this;return rt("svg:g",o).call(Jt,this,i,o).call(qt,this,{x:s&&a},Ct,0).call(w=>w.selectAll().data(t).enter().append("line").call(Qt,this).attr("x1",s?_=>s[_]:(p+h-m)/2).attr("x2",s?_=>s[_]:(p+h-m)/2).attr("y1",u&&!Pi(l)?_=>u[_]+v:d+v).attr("y2",f&&!Pi(l)?l.bandwidth?_=>f[_]+l.bandwidth()-b:_=>f[_]-b:c-g-b).call(Kn,this,r).call(ks,this,r,o)).node()}}class sP extends St{constructor(t,n={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:l=a,insetLeft:s=a}=n;super(t,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},As(n,"y"),gy),this.insetRight=Xe(l),this.insetLeft=Xe(s),sa(this,n)}render(t,n,r,i,o){const{x:a,y:l}=n,{y:s,x1:u,x2:f}=r,{width:h,height:c,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetLeft:v,insetRight:b}=this;return rt("svg:g",o).call(Jt,this,i,o).call(qt,this,{y:s&&l},0,Ct).call(w=>w.selectAll().data(t).enter().append("line").call(Qt,this).attr("x1",u&&!Pi(a)?_=>u[_]+v:p+v).attr("x2",f&&!Pi(a)?a.bandwidth?_=>f[_]+a.bandwidth()-b:_=>f[_]-b:h-m-b).attr("y1",s?_=>s[_]:(d+c-g)/2).attr("y2",s?_=>s[_]:(d+c-g)/2).call(Kn,this,r).call(ks,this,r,o)).node()}}function yy(e,t){let{x:n=_t,y:r,y1:i,y2:o,...a}=by(t);return[i,o]=_y(r,i,o),new lP(e,{...a,x:n,y1:i,y2:o})}function Tl(e,t){let{y:n=_t,x:r,x1:i,x2:o,...a}=iP(t);return[i,o]=_y(r,i,o),new sP(e,{...a,y:n,x1:i,x2:o})}function _y(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Gc(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let o=0;o<n;++o)i+=t[o](r)+e[o+1];return i}}const uP={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},vy="";class Uc extends St{constructor(t,n={}){const{x:r,y:i,text:o=mr(t)&&S2(t)?_t:gs,frameAnchor:a,textAnchor:l=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:s=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:u=1,lineWidth:f=1/0,textOverflow:h,monospace:c,fontFamily:d=c?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:g,fontWeight:v,rotate:b}=n,[w,_]=xt(b,0),[x,M]=pP(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:F9(w),optional:!0},text:{value:o,filter:pc,optional:!0}},n,uP),this.rotate=_,this.textAnchor=pt(l,"middle"),this.lineAnchor=fn(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+f,this.textOverflow=wy(h),this.monospace=!!c,this.fontFamily=Mt(d),this.fontSize=M,this.fontStyle=Mt(p),this.fontVariant=Mt(g),this.fontWeight=Mt(v),this.frameAnchor=vs(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${f}`);this.splitLines=xy(this),this.clipLine=Py(this)}render(t,n,r,i,o){const{x:a,y:l}=n,{x:s,y:u,rotate:f,text:h,title:c,fontSize:d}=r,{rotate:m}=this,[p,g]=oa(this,i);return rt("svg:g",o).call(Jt,this,i,o).call(My,this,h,i).call(qt,this,{x:s&&a,y:u&&l}).call(v=>v.selectAll().data(t).enter().append("text").call(Qt,this).call(fP,this,h,c).attr("transform",Gc`translate(${s?b=>s[b]:p},${u?b=>u[b]:g})${f?b=>` rotate(${f[b]})`:m?` rotate(${m})`:""}`).call(Ae,"font-size",d&&(b=>d[b])).call(Kn,this,r)).node()}}function wy(e){return e==null?null:fn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function fP(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:l,clipLine:s}=t;e.each(function(u){const f=l(Rr(n[u])??"").map(s),h=f.length,c=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let m=0;m<h;++m){if(++d,!f[m])continue;const p=this.ownerDocument.createElementNS(hi.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(c+m)*o}em`):p.setAttribute("dy",`${d*o}em`),p.textContent=f[m],this.appendChild(p),d=0}}else c&&this.setAttribute("y",`${c*o}em`),this.textContent=f[0];if(a&&!r&&f[0]!==n[u]){const d=this.ownerDocument.createElementNS(hi.svg,"title");d.textContent=n[u],this.appendChild(d)}})}function Es(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ea(t,n)),new Uc(e,{...r,x:t,y:n})}function cP(e,{x:t=_t,...n}={}){return new Uc(e,aP({...n,x:t}))}function hP(e,{y:t=_t,...n}={}){return new Uc(e,oP({...n,y:t}))}function My(e,t,n){Ae(e,"text-anchor",t.textAnchor),Ae(e,"font-family",t.fontFamily),Ae(e,"font-size",t.fontSize),Ae(e,"font-style",t.fontStyle),Ae(e,"font-variant",t.fontVariant===void 0?dP(n):t.fontVariant),Ae(e,"font-weight",t.fontWeight)}function dP(e){return e&&(q9(e)||Nt(e))?"tabular-nums":void 0}const mP=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function pP(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),mP.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function bP(e,t,n){const r=[];let i,o=0;for(const[a,l,s]of gP(e)){if(i===void 0&&(i=a),o>i&&n(e,i,l)>t&&(r.push(e.slice(i,o)+(e[o-1]===vy?"-":"")),i=a),s){r.push(e.slice(i,l)),i=void 0;continue}o=l}return r}function*gP(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case vy:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Zd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function zc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ni(e,i))r+=Zd[e[i]]??(Ay(e,i)?120:Zd.e);return r}function Hc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ni(e,i))r+=Ay(e,i)?126:63;return r}function xy({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return o=>o.split(/\r\n?|\n/g);const r=e?Hc:zc,i=t*100;return o=>bP(o,i,r)}function Py({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return o=>o;const r=e?Hc:zc,i=t*100;switch(n){case"clip-start":return o=>Jd(o,i,r,"");case"clip-end":return o=>Kd(o,i,r,"");case"ellipsis-start":return o=>Jd(o,i,r,si);case"ellipsis-middle":return o=>yP(o,i,r,si);case"ellipsis-end":return o=>Kd(o,i,r,si)}}const si="";function Si(e,t,n,r){const i=[];let o=0;for(let a=0,l=0,s=e.length;a<s;a=l){l=Ni(e,a);const u=n(e,a,l);if(o+u>t){for(o+=r;o>t&&a>0;)l=a,a=i.pop(),o-=n(e,a,l);return[a,t-o]}o+=u,i.push(a)}return[-1,0]}function Kd(e,t,n,r){e=e.trim();const i=n(r),[o]=Si(e,t,n,i);return o<0?e:e.slice(0,o).trimEnd()+r}function yP(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r)/2,[a,l]=Si(e,t/2,n,o),[s]=Si(e,i-t/2-l+o,n,-o);return s<0?r:e.slice(0,a).trimEnd()+r+e.slice(Ni(e,s)).trimStart()}function Jd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r),[a]=Si(e,i-t+o,n,-o);return a<0?r:r+e.slice(Ni(e,a)).trimStart()}const Pf=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Qd=new RegExp("\\p{Extended_Pictographic}","uy");function Ni(e,t){return t+=_P(e,t)?2:1,wP(e,t)&&(t=Pf.lastIndex),vP(e,t)?Ni(e,t+1):t}function Sy(e,t){return e.charCodeAt(t)<128}function _P(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function vP(e,t){return e.charCodeAt(t)===8205}function wP(e,t){return Sy(e,t)?!1:(Pf.lastIndex=t,Pf.test(e))}function Ay(e,t){return Sy(e,t)?!1:(Qd.lastIndex=t,Qd.test(e))}const MP={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},ky=3.5,xP=ky*5,Ey={draw(e,t,n){const r=t*n/xP;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},PP={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},SP=new Map([["arrow",Ey],["spike",PP]]);function AP(e){return e&&typeof e.draw=="function"}function kP(e){if(AP(e))return e;const t=SP.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class Cy extends St{constructor(t,n={}){const{x:r,y:i,r:o=ky,length:a,rotate:l,shape:s=Ey,anchor:u="middle",frameAnchor:f}=n,[h,c]=xt(a,12),[d,m]=xt(l,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,MP),this.r=+o,this.length=c,this.rotate=m,this.shape=kP(s),this.anchor=fn(u,"anchor",["start","middle","end"]),this.frameAnchor=vs(f)}render(t,n,r,i,o){const{x:a,y:l}=n,{x:s,y:u,length:f,rotate:h}=r,{length:c,rotate:d,anchor:m,shape:p,r:g}=this,[v,b]=oa(this,i);return rt("svg:g",o).call(Jt,this,i,o).call(qt,this,{x:s&&a,y:u&&l}).call(w=>w.selectAll().data(t).enter().append("path").call(Qt,this).attr("transform",Gc`translate(${s?_=>s[_]:v},${u?_=>u[_]:b})${h?_=>` rotate(${h[_]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?f?_=>` translate(0,${f[_]})`:` translate(0,${c})`:f?_=>` translate(0,${f[_]/2})`:` translate(0,${c/2})`}`).attr("d",f?_=>{const x=tr();return p.draw(x,f[_],g),x}:(()=>{const _=tr();return p.draw(_,c,g),_})()).call(Kn,this,r)).node()}}function EP(e,t={}){const{x:n=_t,...r}=t;return new Cy(e,{...r,x:n})}function CP(e,t={}){const{y:n=_t,...r}=t;return new Cy(e,{...r,y:n})}function br(e,t){return arguments.length<2&&!mr(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Cs({anchor:e}={},t){return e===void 0?t[0]:fn(e,"anchor",t)}function Ty(e){return Cs(e,["left","right"])}function $y(e){return Cs(e,["right","left"])}function Dy(e){return Cs(e,["bottom","top"])}function Ny(e){return Cs(e,["top","bottom"])}function Iy(){const[e,t]=br(...arguments);return Ry("y",Ty(t),e,t)}function TP(){const[e,t]=br(...arguments);return Ry("fy",$y(t),e,t)}function Ly(){const[e,t]=br(...arguments);return Fy("x",Dy(t),e,t)}function $P(){const[e,t]=br(...arguments);return Fy("fx",Ny(t),e,t)}function Ry(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:l=1,fill:s=r,fillOpacity:u=i,textAnchor:f,textStroke:h,textStrokeOpacity:c,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:g,x:v,margin:b,marginTop:w=b===void 0?20:b,marginRight:_=b===void 0?t==="right"?40:0:b,marginBottom:x=b===void 0?20:b,marginLeft:M=b===void 0?t==="left"?40:0:b,label:S,labelAnchor:T,labelArrow:I,labelOffset:L,...C}){return m=Xe(m),p=Xe(p),g=Xe(g),T!==void 0&&(T=fn(T,"labelAnchor",["center","top","bottom"])),I=Wy(I),iy(m&&!Et(o)?DP(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:m,tickPadding:p,tickRotate:g,x:v,...C}):null,Et(s)?null:IP(e,t,n,{fill:s,fillOpacity:u,stroke:h,strokeOpacity:c,strokeWidth:d,textAnchor:f,tickSize:m,tickPadding:p,tickRotate:g,x:v,marginTop:w,marginRight:_,marginBottom:x,marginLeft:M,...C}),!Et(s)&&S!==null?Es([],Gy({fill:s,fillOpacity:u,...C},function(G,Y,N,$,V){const le=$[e],{marginTop:ie,marginRight:se,marginBottom:Z,marginLeft:Q}=e==="y"&&V.inset||V,K=T??(le.bandwidth?"center":"top"),ne=L??(t==="right"?se:Q)-3;return K==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=K,this.frameAnchor=`${K}-${t}`,this.rotate=0),this.dy=K==="top"?3-ie:K==="bottom"?Z-3:0,this.dx=t==="right"?ne:-ne,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Hy(e,le,{anchor:t,label:S,labelAnchor:K,labelArrow:I})]}}}})):null)}function Fy(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:l=1,fill:s=r,fillOpacity:u=i,textAnchor:f,textStroke:h,textStrokeOpacity:c,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:g,y:v,margin:b,marginTop:w=b===void 0?t==="top"?30:0:b,marginRight:_=b===void 0?20:b,marginBottom:x=b===void 0?t==="bottom"?30:0:b,marginLeft:M=b===void 0?20:b,label:S,labelAnchor:T,labelArrow:I,labelOffset:L,...C}){return m=Xe(m),p=Xe(p),g=Xe(g),T!==void 0&&(T=fn(T,"labelAnchor",["center","left","right"])),I=Wy(I),iy(m&&!Et(o)?NP(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:m,tickPadding:p,tickRotate:g,y:v,...C}):null,Et(s)?null:LP(e,t,n,{fill:s,fillOpacity:u,stroke:h,strokeOpacity:c,strokeWidth:d,textAnchor:f,tickSize:m,tickPadding:p,tickRotate:g,y:v,marginTop:w,marginRight:_,marginBottom:x,marginLeft:M,...C}),!Et(s)&&S!==null?Es([],Gy({fill:s,fillOpacity:u,...C},function(G,Y,N,$,V){const le=$[e],{marginTop:ie,marginRight:se,marginBottom:Z,marginLeft:Q}=e==="x"&&V.inset||V,K=T??(le.bandwidth?"center":"right"),ne=L??(t==="top"?ie:Z)-3;return K==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${K}`,this.textAnchor=K==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-ne:ne,this.dx=K==="right"?se-3:K==="left"?3-Q:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Hy(e,le,{anchor:t,label:S,labelAnchor:K,labelArrow:I})]}}}})):null)}function DP(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="y"?"-empty":""),frameAnchor:l=t,tickSize:s,inset:u=0,insetLeft:f=u,insetRight:h=u,dx:c=0,y:d=e==="y"?void 0:null,...m}){return Ii(CP,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:l,y:d,...m,dx:t==="left"?+c-Ct+ +f:+c+Ct-h,anchor:"start",length:s,shape:t==="left"?zP:HP})}function NP(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="x"?"-empty":""),frameAnchor:l=t,tickSize:s,inset:u=0,insetTop:f=u,insetBottom:h=u,dy:c=0,x:d=e==="x"?void 0:null,...m}){return Ii(EP,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:l,x:d,...m,dy:t==="bottom"?+c-Ct-h:+c+Ct+ +f,anchor:"start",length:s,shape:t==="bottom"?GP:UP})}function IP(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*uy):0),text:s,textAnchor:u=Math.abs(a)>60?"middle":t==="left"?"end":"start",lineAnchor:f=a>60?"top":a<-60?"bottom":"middle",fontVariant:h,inset:c=0,insetLeft:d=c,insetRight:m=c,dx:p=0,y:g=e==="y"?void 0:null,...v}){return Ii(hP,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:u,lineAnchor:f,fontVariant:h,rotate:a,y:g,...v,dx:t==="left"?+p-o-l+ +d:+p+ +o+ +l-m},function(b,w,_,x,M){h===void 0&&(this.fontVariant=zy(b)),s===void 0&&(M.text=Uy(b,w,_,x,t))})}function LP(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*uy):0),text:s,textAnchor:u=Math.abs(a)>=10?a<0^t==="bottom"?"start":"end":"middle",lineAnchor:f=Math.abs(a)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:h,inset:c=0,insetTop:d=c,insetBottom:m=c,dy:p=0,x:g=e==="x"?void 0:null,...v}){return Ii(cP,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:u,lineAnchor:f,fontVariant:h,rotate:a,x:g,...v,dy:t==="bottom"?+p+ +o+ +l-m:+p-o-l+ +d},function(b,w,_,x,M){h===void 0&&(this.fontVariant=zy(b)),s===void 0&&(M.text=Uy(b,w,_,x,t))})}function RP(){const[e,t]=br(...arguments);return By("y",Ty(t),e,t)}function FP(){const[e,t]=br(...arguments);return By("fy",$y(t),e,t)}function BP(){const[e,t]=br(...arguments);return Oy("x",Dy(t),e,t)}function OP(){const[e,t]=br(...arguments);return Oy("fx",Ny(t),e,t)}function By(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:o=t==="left"?i:null,x2:a=t==="right"?i:null,...l}){return Ii(Tl,e,t,`${e}-grid`,n,{y:r,x1:o,x2:a,...qy(l)})}function Oy(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:o=t==="top"?i:null,y2:a=t==="bottom"?i:null,...l}){return Ii(yy,e,t,`${e}-grid`,n,{x:r,y1:o,y2:a,...qy(l)})}function qy({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function Gy({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:s,shapeRendering:u,clip:f=!1},h){return[,e]=Vn(e),[,t]=xt(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:s,shapeRendering:u,clip:f,initializer:h}}function Ii(e,t,n,r,i,o,a){let l;function s(h,c,d,m,p,g){const v=h==null&&(t==="fx"||t==="fy"),{[t]:b}=m;if(!b)throw new Error(`missing scale: ${t}`);const w=b.domain();let{interval:_,ticks:x,tickFormat:M,tickSpacing:S=t==="x"?80:35}=o;if(typeof x=="string"&&Vy(b)&&(_=x,x=void 0),x===void 0&&(x=Di(_,b.type)??qP(b,S)),h==null){if(mr(x))h=Ot(x);else if(ri(x))h=vu(x,...Ht(w));else if(b.interval){let I=b.interval;if(b.ticks){const[L,C]=Ht(w),G=(C-L)/I[Jo];I=wd(I,G/x)??I,h=vu(I,L,C)}else{h=w;const L=h.length;I=wd(I,L/x)??I,I!==b.interval&&(h=vu(I,...Ht(h)))}if(I===b.interval){const L=Math.round(h.length/x);L>1&&(h=h.filter((C,G)=>G%L===0))}}else b.ticks?h=b.ticks(x):h=w;if(!b.ticks&&h.length&&h!==w){const I=new zl(w);h=h.filter(L=>I.has(L)),h.length||ir(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?c=[Xn(h)]:l[t]={scale:t,value:_t}}a==null||a.call(this,b,h,x,M,l);const T=Object.fromEntries(Object.entries(l).map(([I,L])=>[I,{...L,value:dt(h,L.value)}]));return v&&(c=g.filterFacets(h,T)),{data:h,facets:c,channels:T}}const u=xi(o).initializer,f=e(i,xi({...o,initializer:s},u));return i==null?(l=f.channels,f.channels={}):l={},f.ariaLabel=r,f.clip===void 0&&(f.clip=!1),f}function qP(e,t){const[n,r]=Ht(e.range());return(r-n)/t}function Uy(e,t,n,r,i){return{value:Wc(e,t,n,r,i)}}function Wc(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&Nt(t)?M9(e.type,t,i)??Rr:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Rr:typeof r=="string"?(Nt(e.domain())?Zo:Ti)(r):Qo(r)}function vu(e,t,n){return e.range(t,e.offset(e.floor(n)))}const GP={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},UP={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},zP={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},HP={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function zy(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Hy(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&Vy(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!o)return r;if(o===!0){const a=kx(t);a&&(o=/x$/.test(e)||i==="center"?/x$/.test(e)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function Wy(e="auto"){return Et(e)?!1:typeof e=="boolean"?e:fn(e,"labelArrow",["auto","up","right","down","left"])}function Vy(e){return Nt(e.domain())}function e1(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function WP(e,{opacity:t,...n}={}){if(!zr(e)&&!ry(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return Yy(e,n,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",xt(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function VP(e,{fill:t=(u=>(u=e.hint)==null?void 0:u.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(f=>(f=e.hint)==null?void 0:f.stroke)()!==void 0?e.hint.stroke:Et(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...l}={},s){const[h,c]=Vn(t),[d,m]=Vn(r),p=e1(s,h),g=e1(s,d),v=a*a*Math.PI;return n=xt(n)[1],i=xt(i)[1],o=xt(o)[1],Yy(e,l,(b,w,_,x)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",_).attr("height",x).attr("fill",h==="color"?M=>p.scale(M):c).attr("fill-opacity",n).attr("stroke",d==="color"?M=>g.scale(M):m).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",M=>{const S=tr();return e.scale(M).draw(S,v),S}))}function Yy(e,t={},n){let{columns:r,tickFormat:i,fontVariant:o=sy(e),swatchSize:a=15,swatchWidth:l=a,swatchHeight:s=a,marginLeft:u=0,className:f,style:h,width:c}=t;const d=Nc(t);f=$c(f),i=Wc(e.scale,e.domain,void 0,i);const m=rt("div",d).attr("class",`${f}-swatches ${f}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${f}-swatches-columns .${f}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${f}-swatches-columns .${f}-swatch::before) {
  flex-shrink: 0;
}
:where(.${f}-swatches-columns .${f}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${f}-swatch`).call(n,e,l,s).call(g=>g.append("div").attr("class",`${f}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${f}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${f}-swatches-wrap .${f}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${f}-swatch`).call(n,e,l,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(g=>g.insert("style","*").text(`:where(.${f}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${f}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",u?`${+u}px`:null).style("width",c===void 0?null:`${+c}px`).style("font-variant",pt(o,"normal")).call(Dc,h).node()}const Sf=new Map([["symbol",VP],["color",Xy],["opacity",jP]]);function YP(e,t,n={}){return(r,i)=>{if(!Sf.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return Sf.get(r)(e[r],jy(t,n[r],i),o=>e[o])}}function jy({className:e,...t},{label:n,ticks:r,tickFormat:i}={},o){return H9(o,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function Xy(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return WP(e,n);case"ramp":return Qx(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function jP({type:e,interpolate:t,...n},{legend:r=!0,color:i=lr(0,0,0),...o}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return Xy({type:e,...n,interpolate:XP(i)},{legend:r,...o})}function XP(e){const{r:t,g:n,b:r}=lr(e)||lr(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function ZP(e,t,n){const r=[];for(const[i,o]of Sf){const a=n[i];if(a!=null&&a.legend&&i in e){const l=o(e[i],jy(t,e[i],a),s=>e[s]);l!=null&&r.push(l)}}return r}const KP={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},JP={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class QP extends St{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:o=r,insetBottom:a=r,insetLeft:l=r,rx:s,ry:u}=t;super(za,void 0,t,n==null?KP:JP),this.anchor=w2(n,"anchor",["top","right","bottom","left"]),this.insetTop=Xe(i),this.insetRight=Xe(o),this.insetBottom=Xe(a),this.insetLeft=Xe(l),this.rx=Xe(s),this.ry=Xe(u)}render(t,n,r,i,o){const{marginTop:a,marginRight:l,marginBottom:s,marginLeft:u,width:f,height:h}=i,{anchor:c,insetTop:d,insetRight:m,insetBottom:p,insetLeft:g,rx:v,ry:b}=this,w=u+g,_=f-l-m,x=a+d,M=h-s-p;return rt(c?"svg:line":"svg:rect",o).datum(0).call(Jt,this,i,o).call(Qt,this).call(Kn,this,r).call(qt,this,{}).call(c==="left"?S=>S.attr("x1",w).attr("x2",w).attr("y1",x).attr("y2",M):c==="right"?S=>S.attr("x1",_).attr("x2",_).attr("y1",x).attr("y2",M):c==="top"?S=>S.attr("x1",w).attr("x2",_).attr("y1",x).attr("y2",x):c==="bottom"?S=>S.attr("x1",w).attr("x2",_).attr("y1",M).attr("y2",M):S=>S.attr("x",w).attr("y",x).attr("width",_-w).attr("height",M-x).attr("rx",v).attr("ry",b)).node()}}function eS(e){return new QP(e)}const wu={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},tS=new Set(["geometry","href","src","ariaLabel","scales"]);class nS extends St{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&mr(t)&&S2(t)&&(n={...n,title:_t});const{x:r,y:i,x1:o,x2:a,y1:l,y2:s,anchor:u,preferredAnchor:f="bottom",monospace:h,fontFamily:c=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:g,lineHeight:v=1,lineWidth:b=20,frameAnchor:w,format:_,textAnchor:x="start",textOverflow:M,textPadding:S=8,title:T,pointerSize:I=12,pathFilter:L="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:l!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:l,scale:"y",optional:s==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:s,scale:"y",optional:l==null},title:{value:T,optional:!0}},n,wu),this.anchor=yf(u,"anchor"),this.preferredAnchor=yf(f,"preferredAnchor"),this.frameAnchor=vs(w),this.textAnchor=pt(x,"middle"),this.textPadding=+S,this.pointerSize=+I,this.pathFilter=Mt(L),this.lineHeight=+v,this.lineWidth=+b,this.textOverflow=wy(M),this.monospace=!!h,this.fontFamily=Mt(c),this.fontSize=Xe(d),this.fontStyle=Mt(m),this.fontVariant=Mt(p),this.fontWeight=Mt(g);for(const C in wu)C in this.channels&&(this[C]=wu[C]);this.splitLines=xy(this),this.clipLine=Py(this),this.format={..._}}render(t,n,r,i,o){const a=this,{x:l,y:s,fx:u,fy:f}=n,{ownerSVGElement:h,document:c}=o,{anchor:d,monospace:m,lineHeight:p,lineWidth:g}=this,{textPadding:v,pointerSize:b,pathFilter:w}=this,{marginTop:_,marginLeft:x}=i,{x1:M,y1:S,x2:T,y2:I,x:L=M??T,y:C=S??I}=r,G=u?u(t.fx)-x:0,Y=f?f(t.fy)-_:0,[N,$]=oa(this,i),V=ay(r,N),le=ly(r,$),ie=m?Hc:zc,se=ie(si);let Z,Q;"title"in r?(Z=r.channels,Q=sS):(Z=lS.call(this,r,n),Q=uS);const K=rt("svg:g",o).call(Jt,this,i,o).call(My,this).call(qt,this,{x:L&&l,y:C&&s}).call(pe=>pe.selectAll().data(t).enter().append("g").attr("transform",de=>`translate(${Math.round(V(de))},${Math.round(le(de))})`).call(Qt,this).call(de=>de.append("path").attr("filter",w)).call(de=>de.append("text").each(function(re){const ae=ao(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const W=Q.call(a,re,t,Z,n,r);if(typeof W=="string")for(const ee of a.splitLines(W))ne(ae,{value:a.clipLine(ee)});else{const ee=new Set;for(const oe of W){const{label:F=""}=oe;F&&ee.has(F)||(ee.add(F),ne(ae,oe))}}})));function ne(pe,{label:de,value:re,color:ae,opacity:W}){de??(de=""),re??(re="");const ee=ae!=null||W!=null;let oe,F=g*100;const[he]=Si(de,F,ie,se);if(he>=0)de=de.slice(0,he).trimEnd()+si,oe=re.trim(),re="";else{(de||!re&&!ee)&&(re=" "+re);const[ve]=Si(re,F-ie(de),ie,se);ve>=0&&(oe=re.trim(),re=re.slice(0,ve).trimEnd()+si)}const te=pe.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");de&&te.append("tspan").attr("font-weight","bold").text(de),re&&te.append(()=>c.createTextNode(re)),ee&&te.append("tspan").text(" ").attr("fill",ae).attr("fill-opacity",W).style("user-select","none"),oe&&te.append("title").text(oe)}function ge(){const{width:pe,height:de}=i.facet??i;K.selectChildren().each(function(re){let{x:ae,width:W,height:ee}=this.getBBox();W=Math.round(W),ee=Math.round(ee);let oe=d;if(oe===void 0){const te=V(re)+G,ve=le(re)+Y,ye=te+W+b+v*2<pe,xe=te-W-b-v*2>0,me=ve+ee+b+v*2<de,Ye=ve-ee-b-v*2>0;oe=ye&&xe?me&&Ye?a.preferredAnchor:Ye?"bottom":"top":me&&Ye?ye?"left":"right":(ye||xe)&&(me||Ye)?`${Ye?"bottom":"top"}-${ye?"left":"right"}`:a.preferredAnchor}const F=this.firstChild,he=this.lastChild;if(F.setAttribute("d",aS(oe,b,v,W,ee)),ae)for(const te of he.childNodes)te.setAttribute("x",-ae);he.setAttribute("y",`${+iS(oe,he.childNodes.length,p).toFixed(6)}em`),he.setAttribute("transform",`translate(${oS(oe,b,v,W,ee)})`)}),K.attr("visibility",null)}return t.length&&(K.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(ge):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ge)),K.node()}}function rS(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ea(t,n)),new nS(e,{...r,x:t,y:n})}function iS(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function oS(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function aS(e,t,n,r,i){const o=r+n*2,a=i+n*2;switch(e){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${a}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${a}h${-o}v${-a}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${a}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-a/2}h${-o}v${a}h${o}v${t/2-a/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-a}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-a}h${-o}v${a}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-a}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-a/2}h${o}v${a}h${-o}v${t/2-a/2}z`}}function lS({channels:e},t){var i,o;const n={};let r=this.format;r=t1(r,e,"x"),r=t1(r,e,"y"),this.format=r;for(const a in r){const l=r[a];if(!(l===null||l===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const s=Td(e,a);s&&(n[a]=s)}}for(const a in e){if(a in n||a in r||tS.has(a))continue;const l=Td(e,a);l&&(n[a]=l)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const a in n){const l=this.format[a];if(typeof l=="string"){const s=((i=n[a])==null?void 0:i.value)??((o=t[a])==null?void 0:o.domain())??[];this.format[a]=(Nt(s)?Zo:Ti)(l)}else if(l===void 0||l===!0){const s=t[a];this.format[a]=s!=null&&s.bandwidth?Wc(s,s.domain()):Rr}}return n}function t1(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const o=Object.entries(e),a=e[n];return o.splice(o.findIndex(([l])=>l===n)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function sS(e,t,{title:n}){return Rr(n.value[e],e)}function*uS(e,t,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:$l(r,n,o),value:this.format[o](t[o],e)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:r1(r,n,"x"),value:n1(this.format.x2,n.x1,a,e)};else if(o==="y2"&&"y1"in n)yield{label:r1(r,n,"y"),value:n1(this.format.y2,n.y1,a,e)};else{const l=a.value[e],s=a.scale;if(!ur(l)&&s==null)continue;yield{label:$l(r,n,o),value:this.format[o](l,e),color:s==="color"?i[o][e]:null,opacity:s==="opacity"?i[o][e]:null}}}}function n1(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function r1(e,t,n){const r=$l(e,t,`${n}1`,n),i=$l(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function $l(e,t,n,r=n){const i=t[n],o=e[(i==null?void 0:i.scale)??n];return String((o==null?void 0:o.label)??(i==null?void 0:i.label)??r)}function cn(e={}){var se;const{facet:t,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:l}=e,s=$c(e.className),u=e.marks===void 0?[]:o1(e.marks);u.push(...gS(u));const f=pS(t,e),h=new Map;for(const Z of u){const Q=a1(Z,f,e);Q&&h.set(Z,Q)}const c=new Map;f&&zi(c,[f],e),zi(c,h,e);const d=o1(yS(u,c,e));for(const Z of d){const Q=a1(Z,f,e);Q&&h.set(Z,Q)}u.unshift(...d);let m=Fx(c,e);if(m!==void 0){const Z=f?gu(m,f):void 0;for(const K of u){if(K.facet===null||K.facet==="super")continue;const ne=h.get(K);ne!==void 0&&(ne.facetsIndex=K.fx!=null||K.fy!=null?gu(m,ne):Z)}const Q=new Set;for(const{facetsIndex:K}of h.values())K==null||K.forEach((ne,ge)=>{(ne==null?void 0:ne.length)>0&&Q.add(ge)});m.forEach(0<Q.size&&Q.size<m.length?(K,ne)=>K.empty=!Q.has(ne):K=>K.empty=!1);for(const K of u)if(K.facet==="exclude"){const ne=h.get(K);ne!==void 0&&(ne.facetsIndex=qx(ne.facetsIndex))}}for(const Z of Je.keys())bf(e[Z])&&Z!=="fx"&&Z!=="fy"&&c.set(Z,[]);const p=new Map;for(const Z of u){if(p.has(Z))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:Q,channels:K}=h.get(Z)??{},{data:ne,facets:ge,channels:pe}=Z.initialize(Q,K,e);Vc(pe,e),p.set(Z,{data:ne,facets:ge,channels:pe})}const g=Mf(zi(c,p,e),e),v=Lx(g,u,e);Sx(g,v);const b=Od(g),{fx:w,fy:_}=b,x=w||_?ey(g,v):v,M=w||_?SS(b,v):v,S=Nc(e),T=S.document,I=jl("svg").call(T.documentElement);let L=I;S.ownerSVGElement=I,S.className=s,S.projection=FM(e,x),S.filterFacets=(Z,Q)=>gu(m,{channels:Q,groups:Bc(Z,Q)}),S.getMarkState=Z=>{const Q=p.get(Z),K=h.get(Z);return{...Q,channels:{...Q.channels,...K==null?void 0:K.channels}}},S.dispatchValue=Z=>{L.value!==Z&&(L.value=Z,L.dispatchEvent(new Event("input",{bubbles:!0})))};const C=new Set;for(const[Z,Q]of p)if(Z.initializer!=null){const K=Z.facet==="super"?M:x,ne=Z.initializer(Q.data,Q.facets,Q.channels,b,K,S);if(ne.data!==void 0&&(Q.data=ne.data),ne.facets!==void 0&&(Q.facets=ne.facets),ne.channels!==void 0){const{fx:ge,fy:pe,...de}=ne.channels;mS(de),Object.assign(Q.channels,de);for(const re of Object.values(de)){const{scale:ae}=re;ae!=null&&!V9(Je.get(ae))&&(Zy(re,e),C.add(ae))}(ge!=null||pe!=null)&&h.set(Z,!0)}}if(C.size){const Z=new Map;zi(Z,p,e,ge=>C.has(ge)),zi(c,p,e,ge=>C.has(ge));const Q=PS(Mf(Z,e),g),{scales:K,...ne}=Od(Q);Object.assign(g,Q),Object.assign(b,ne),Object.assign(b.scales,K)}let G,Y;m!==void 0&&(G={x:w==null?void 0:w.domain(),y:_==null?void 0:_.domain()},m=Bx(m,G),Y=Ox(w,_,v));for(const[Z,Q]of p)Q.values=Z.scale(Q.channels,b,S);const{width:N,height:$}=v;ao(I).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",N).attr("height",$).attr("viewBox",`0 0 ${N} ${$}`).attr("aria-label",a).attr("aria-description",l).call(Z=>Z.append("style").text(`:where(.${s}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${s} text),
:where(.${s} tspan) {
  white-space: pre;
}`)).call(Dc,n);for(const Z of u){const{channels:Q,values:K,facets:ne}=p.get(Z);if(m===void 0||Z.facet==="super"){let ge=null;if(ne&&(ge=ne[0],ge=Z.filter(ge,Q,K),ge.length===0))continue;const pe=Z.render(ge,b,K,M,S);if(pe==null)continue;I.appendChild(pe)}else{let ge;for(const pe of m){if(!(((se=Z.facetAnchor)==null?void 0:se.call(Z,m,G,pe))??!pe.empty))continue;let de=null;if(ne){const ae=h.has(Z);if(de=ne[ae?pe.i:0],de=Z.filter(de,Q,K),de.length===0)continue;!ae&&de===ne[0]&&(de=N9(de)),de.fx=pe.x,de.fy=pe.y,de.fi=pe.i}const re=Z.render(de,b,K,x,S);if(re!=null){(ge??(ge=ao(I).append("g"))).append(()=>re).datum(pe);for(const ae of["aria-label","aria-description","aria-hidden","transform"])re.hasAttribute(ae)&&(ge.attr(ae,re.getAttribute(ae)),re.removeAttribute(ae))}}ge==null||ge.selectChildren().attr("transform",Y)}}const V=ZP(g,S,e),{figure:le=r!=null||i!=null||o!=null||V.length>0}=e;le&&(L=T.createElement("figure"),L.className=`${s}-figure`,L.style.maxWidth="initial",r!=null&&L.append(i1(T,r,"h2")),i!=null&&L.append(i1(T,i,"h3")),L.append(...V,I),o!=null&&L.append(fS(T,o))),L.scale=Nx(b.scales),L.legend=YP(g,S,e);const ie=SM();return ie>0&&ao(I).append("text").attr("x",N).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${ie.toLocaleString("en-US")} warning${ie===1?"":"s"}. Please check the console.`),L}function i1(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function fS(e,t){const n=e.createElement("figcaption");return n.append(t),n}function cS({marks:e=[],...t}={}){return cn({...t,marks:[...e,this]})}St.prototype.plot=cS;function o1(e){return e.flat(1/0).filter(t=>t!=null).map(hS)}function hS(e){return typeof e.render=="function"?e:new dS(e)}class dS extends St{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Vc(e,t){for(const n in e)Zy(e[n],t);return e}function Zy(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:o,interval:a,transform:l=o?s=>s*100:P2(a,i)}=t[n]??{};l!=null&&(e.value=ot(e.value,l),e.transform=!1)}function mS(e){for(const t in e)N2(t,e[t])}function zi(e,t,n,r=k9){var i,o;for(const{channels:a}of t.values())for(const l in a){const s=a[l],{scale:u}=s;if(u!=null&&r(u))if(u==="projection"){if(!GM(n)){const f=((i=n.x)==null?void 0:i.domain)===void 0,h=((o=n.y)==null?void 0:o.domain)===void 0;if(f||h){const[c,d]=zM(s);f&&Mu(e,"x",c),h&&Mu(e,"y",d)}}}else Mu(e,u,s)}return e}function Mu(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function pS(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=Ot(e.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Co(i,{value:n,scale:"fx"})),r!=null&&(o.fy=Co(i,{value:r,scale:"fy"})),Vc(o,t);const a=Bc(i,o);return{channels:o,groups:a,data:e.data}}function a1(e,t,n){var s;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const u=Ot(e.data??r??i);if(u===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(u===null)return;const f={};return r!=null&&(f.fx=Co(u,{value:r,scale:"fx"})),i!=null&&(f.fy=Co(u,{value:i,scale:"fy"})),Vc(f,n),{channels:f,groups:Bc(u,f)}}if(t===void 0)return;const{channels:o,groups:a,data:l}=t;if(e.facet!=="auto"||e.data===l)return{channels:o,groups:a};l.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((s=Ot(e.data))==null?void 0:s.length)===l.length&&ir(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function bS(e,t={}){return xi({...t,x:null,y:null},(n,r,i,o,a,l)=>l.getMarkState(e))}function gS(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:o}=r;i=/^x$/i.test(i)?Jx:/^y$/i.test(i)?Yd:Kx,r=i(bS(n,r)),r.title=null,o===void 0&&(r.preferredAnchor=i===Yd?"left":"bottom");const a=rS(n.data,r);a.facet=n.facet,a.facetAnchor=n.facetAnchor,t.push(a)}}return t}function yS(e,t,n){let{projection:r,x:i={},y:o={},fx:a={},fy:l={},axis:s,grid:u,facet:f={},facet:{axis:h=s,grid:c}=f,x:{axis:d=s,grid:m=d===null?null:u}=i,y:{axis:p=s,grid:g=p===null?null:u}=o,fx:{axis:v=h,grid:b=v===null?null:c}=a,fy:{axis:w=h,grid:_=w===null?null:c}=l}=n;(r||!bf(i)&&!l1("x",e))&&(d=m=null),(r||!bf(o)&&!l1("y",e))&&(p=g=null),t.has("fx")||(v=b=null),t.has("fy")||(w=_=null),d===void 0&&(d=!$a(e,"x")),p===void 0&&(p=!$a(e,"y")),v===void 0&&(v=!$a(e,"fx")),w===void 0&&(w=!$a(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),v===!0&&(v=d==="top"||d===null?"bottom":"top"),w===!0&&(w=p==="right"||p===null?"left":"right");const x=[];return Ta(x,_,FP,l),Ca(x,w,TP,"right","left",f,l),Ta(x,b,OP,a),Ca(x,v,$P,"top","bottom",f,a),Ta(x,g,RP,o),Ca(x,p,Iy,"left","right",n,o),Ta(x,m,BP,i),Ca(x,d,Ly,"bottom","top",n,i),x}function Ca(e,t,n,r,i,o,a){if(!t)return;const l=_S(t);a=vS(l?r:t,o,a);const{line:s}=a;(n===Iy||n===Ly)&&s&&!Eo(s)&&e.push(eS(wS(a))),e.push(n(a)),l&&e.push(n({...a,anchor:i,label:null}))}function Ta(e,t,n,r){!t||Eo(t)||e.push(n(MS(t,r)))}function _S(e){return/^\s*both\s*$/i.test(e)}function vS(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:s,fontVariant:u,ariaLabel:f,ariaDescription:h,label:c=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:s,fontVariant:u,ariaLabel:f,ariaDescription:h,label:c,labelAnchor:d,labelArrow:m,labelOffset:p}}function wS(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function MS(e,{stroke:t=_s(e)?e:void 0,ticks:n=xS(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function xS(e){switch(typeof e){case"number":return!0;case"string":return!_s(e)}return mr(e)||typeof(e==null?void 0:e.range)=="function"}function $a(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function l1(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function PS(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function SS({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:l,height:s}=Fc(n),u=e&&s1(e),f=t&&s1(t);return{marginTop:t?f[0]:r,marginRight:e?l-u[1]:i,marginBottom:t?s-f[1]:o,marginLeft:e?u[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:s}}function s1(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const AS=new Map([["basis",D8],["basis-closed",N8],["basis-open",I8],["bundle",L8],["bump-x",w8],["bump-y",M8],["cardinal",R8],["cardinal-closed",F8],["cardinal-open",B8],["catmull-rom",O8],["catmull-rom-closed",q8],["catmull-rom-open",G8],["linear",Ko],["linear-closed",U8],["monotone-x",z8],["monotone-y",H8],["natural",W8],["step",V8],["step-after",j8],["step-before",Y8]]);function Ky(e=Ko,t){if(typeof e=="function")return e;const n=AS.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function Jy(e=Ai,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Ai:Ky(e,t)}function Ai(e){return Ko(e)}function kS(e={y:"count"},t={}){[e,t]=TS(e,t);const{x:n,y:r}=t;return CS($S(n,t,_t),null,null,r,e,qc(t))}function ES(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=Tc}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function Qy(e={}){return ES(kS,"y",As(e,"x"))}function CS(e,t,n,r,{data:i=D2,filter:o=Cl,sort:a,reverse:l,...s}={},u={}){e=u1(e),t=u1(t),s=NS(s,u),i=n_(i,_t),a=a==null?void 0:e_("sort",a,u),o=o==null?void 0:t_("filter",o,u),n!=null&&Sa(s,"x","x1","x2")&&(n=null),r!=null&&Sa(s,"y","y1","y2")&&(r=null);const[f,h]=Ln(e),[c,d]=Ln(e),[m,p]=Ln(t),[g,v]=Ln(t),[b,w]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[_,x]=Ln(b),{x:M,y:S,z:T,fill:I,stroke:L,x1:C,x2:G,y1:Y,y2:N,domain:$,cumulative:V,thresholds:le,interval:ie,...se}=u,[Z,Q]=Ln(T),[K]=Vn(I),[ne]=Vn(L),[ge,pe]=Ln(K),[de,re]=Ln(ne);return{..."z"in u&&{z:Z||T},..."fill"in u&&{fill:ge||I},..."stroke"in u&&{stroke:de||L},...Ms(se,(ae,W,ee)=>{const oe=x2(dt(ae,b),ee==null?void 0:ee[w]),F=dt(ae,T),he=dt(ae,K),te=dt(ae,ne),ve=aM(s,{z:F,fill:he,stroke:te}),ye=[],xe=[],me=oe&&x([]),Ye=F&&Q([]),Ge=he&&pe([]),Te=te&&re([]),Pe=e&&h([]),st=e&&d([]),we=t&&p([]),Be=t&&v([]),bt=RS(e,t,ae);let qe=0;for(const q of s)q.initialize(ae);a&&a.initialize(ae),o&&o.initialize(ae);for(const q of W){const _e=[];for(const U of s)U.scope("facet",q);a&&a.scope("facet",q),o&&o.scope("facet",q);for(const[U,D]of Ad(q,ve))for(const[k,z]of Ad(D,oe))for(const[X,be]of bt(z))if(!(o&&!o.reduce(X,be))){_e.push(qe++),xe.push(i.reduceIndex(X,ae,be)),oe&&me.push(k),F&&Ye.push(ve===F?U:F[(X.length>0?X:z)[0]]),he&&Ge.push(ve===he?U:he[(X.length>0?X:z)[0]]),te&&Te.push(ve===te?U:te[(X.length>0?X:z)[0]]),Pe&&(Pe.push(be.x1),st.push(be.x2)),we&&(we.push(be.y1),Be.push(be.y2));for(const Le of s)Le.reduce(X,be);a&&a.reduce(X)}ye.push(_e)}return lM(ye,a,l),{data:xe,facets:ye}}),...!Sa(s,"x")&&(f?{x1:f,x2:c,x:gf(f,c)}:{x:M,x1:C,x2:G}),...!Sa(s,"y")&&(m?{y1:m,y2:g,y:gf(m,g)}:{y:S,y1:Y,y2:N}),..._&&{[w]:_},...Object.fromEntries(s.map(({name:ae,output:W})=>[ae,W]))}}function TS({cumulative:e,domain:t,thresholds:n,interval:r,...i},o){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...o}]}function $S(e,{cumulative:t,domain:n,thresholds:r,interval:i},o){return e={...ta(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=o),e.thresholds=DS(e.thresholds,e.interval),e}function u1(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Ht,thresholds:i}=e,o=a=>{let l=dt(a,t),s;if(Nt(l)||LS(i)){l=ot(l,v2,Float64Array);let[f,h]=typeof r=="function"?r(l):r,c=typeof i=="function"&&!ri(i)?i(l,f,h):i;typeof c=="number"&&(c=gb(f,h,c)),ri(c)&&(r===Ht&&(f=c.floor(f),h=c.offset(c.floor(h))),c=c.range(f,c.offset(h))),s=c}else{l=gn(l);let[f,h]=typeof r=="function"?r(l):r,c=typeof i=="function"&&!ri(i)?i(l,f,h):i;if(typeof c=="number")if(r===Ht){let d=Ja(f,h,c);if(isFinite(d))if(d>0){let m=Math.round(f/d),p=Math.round(h/d);m*d<=f||--m,p*d>h||++p;let g=p-m+1;c=new Float64Array(g);for(let v=0;v<g;++v)c[v]=(m+v)*d}else if(d<0){d=-d;let m=Math.round(f*d),p=Math.round(h*d);m/d<=f||--m,p/d>h||++p;let g=p-m+1;c=new Float64Array(g);for(let v=0;v<g;++v)c[v]=(m+v)/d}else c=[f];else c=[f]}else c=po(f,h,c);else ri(c)&&(r===Ht&&(f=c.floor(f),h=c.offset(c.floor(h))),c=c.range(f,c.offset(h)));s=c}const u=[];if(s.length===1)u.push([s[0],s[0]]);else for(let f=1;f<s.length;++f)u.push([s[f-1],s[f]]);return u.bin=(n<0?BS:n>0?FS:Yc)(u,s,l),u};return o.label=Ur(t),o}function DS(e,t,n=f1){if(e===void 0)return t===void 0?n:Di(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return zv;case"scott":return Em;case"sturges":return Ov;case"auto":return f1}return _c(e)}return e}function NS(e,t){return rM(e,t,e_)}function e_(e,t,n){return T2(e,t,n,t_)}function t_(e,t,n){return $2(e,t,n,n_)}function n_(e,t){return Cc(e,t,IS)}function IS(e){switch(`${e}`.toLowerCase()){case"x":return OS;case"x1":return GS;case"x2":return US;case"y":return qS;case"y1":return zS;case"y2":return HS}throw new Error(`invalid bin reduce: ${e}`)}function f1(e,t,n){return Math.min(200,Em(e,t,n))}function LS(e){return R9(e)||mr(e)&&Nt(e)}function RS(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(o){const a=r.bin(o);for(const[l,[s,u]]of r.entries()){const f=i.bin(a[l]);for(const[h,[c,d]]of i.entries())yield[f[h],{data:n,x1:s,y1:c,x2:u,y2:d}]}}:r?function*(o){const a=r.bin(o);for(const[l,[s,u]]of r.entries())yield[a[l],{data:n,x1:s,x2:u}]}:function*(o){const a=i.bin(o);for(const[l,[s,u]]of i.entries())yield[a[l],{data:n,y1:s,y2:u}]}}function Yc(e,t,n){return t=gn(t),r=>{var o;const i=e.map(()=>[]);for(const a of r)(o=i[Gl(t,n[a])-1])==null||o.push(a);return i}}function FS(e,t,n){const r=Yc(e,t,n);return i=>{const o=r(i);for(let a=1,l=o.length;a<l;++a){const s=o[a-1],u=o[a];for(const f of s)u.push(f)}return o}}function BS(e,t,n){const r=Yc(e,t,n);return i=>{const o=r(i);for(let a=o.length-2;a>=0;--a){const l=o[a+1],s=o[a];for(const u of l)s.push(u)}return o}}function r_(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const OS={reduceIndex(e,t,{x1:n,x2:r}){return r_(n,r)}},qS={reduceIndex(e,t,{y1:n,y2:r}){return r_(n,r)}},GS={reduceIndex(e,t,{x1:n}){return n}},US={reduceIndex(e,t,{x2:n}){return n}},zS={reduceIndex(e,t,{y1:n}){return n}},HS={reduceIndex(e,t,{y2:n}){return n}};function i_(e={}){return M2(e)?e:{...e,y:_t}}function WS(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const l of t)for(const s of l)r[s]&&++i,r[s]=1;if(i===0)return{data:e,facets:t};e=ko(e);const o=e[y2]=new Uint32Array(n+i);t=t.map(l=>ko(l,Uint32Array));let a=n;r.fill(0);for(const l of t)for(let s=0,u=l.length;s<u;++s){const f=l[s];r[f]?(l[s]=a,e[a]=e[f],o[a]=f,++a):o[f]=f,r[f]=1}return{data:e,facets:t}}function VS(e={},t={}){arguments.length===1&&([e,t]=YS(e));const{x1:n,x:r=n,y:i,...o}=t,[a,l,s,u]=XS(r,i,"x","y",e,o);return{...a,x1:n,x:l,y1:s,y2:u,y:gf(s,u)}}function o_({y:e,y1:t,y2:n,...r}={}){return r=As(r,"x"),t===void 0&&n===void 0?VS({y:e,...r}):([t,n]=D9(e,t,n),{...r,y1:t,y2:n})}function YS(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const jS={length:!0};function XS(e,t=A9,n,r,{offset:i,order:o,reverse:a},l){if(t===null)throw new Error(`stack requires ${r}`);const s=Mc(l),[u,f]=Ln(e),[h,c]=El(t),[d,m]=El(t);return h.hint=d.hint=jS,i=ZS(i),o=QS(o,i,r),[Ms(l,(p,g,v)=>{({data:p,facets:g}=WS(p,g));const b=e==null?void 0:f(x2(dt(p,e),v==null?void 0:v[n])),w=dt(p,t,Float64Array),_=dt(p,s),x=o&&o(p,b,w,_),M=p.length,S=c(new Float64Array(M)),T=m(new Float64Array(M)),I=[];for(const L of g){const C=b?Array.from(Hl(L,G=>b[G]).values()):[L];if(x)for(const G of C)G.sort(x);for(const G of C){let Y=0,N=0;a&&G.reverse();for(const $ of G){const V=w[$];V<0?Y=T[$]=(S[$]=Y)+V:V>0?N=T[$]=(S[$]=N)+V:T[$]=S[$]=N}}I.push(C)}return i&&i(I,S,T,_),{data:p,facets:g}}),u,h,d]}function ZS(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return KS;case"center":case"silhouette":return JS;case"wiggle":return l_}throw new Error(`unknown offset: ${e}`)}}function a_(e,t){let n=0,r=0;for(const i of e){const o=t[i];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function KS(e,t,n){for(const r of e)for(const i of r){const[o,a]=a_(i,n);for(const l of i){const s=1/(a-o||1);t[l]=s*(t[l]-o),n[l]=s*(n[l]-o)}}}function JS(e,t,n){for(const r of e){for(const i of r){const[o,a]=a_(i,n);for(const l of i){const s=(a+o)/2;t[l]-=s,n[l]-=s}}s_(r,t,n)}u_(e,t,n)}function l_(e,t,n,r){for(const i of e){const o=new Er;let a=0;for(const l of i){let s=-1;const u=l.map(d=>Math.abs(n[d]-t[d])),f=l.map(d=>{s=r?r[d]:++s;const m=n[d]-t[d],p=o.has(s)?m-o.get(s):0;return o.set(s,m),p}),h=[0,...Nv(f)];for(const d of l)t[d]+=a,n[d]+=a;const c=ar(u);c&&(a-=ar(u,(d,m)=>(f[m]/2+h[m])*d)/c)}s_(i,t,n)}u_(e,t,n)}function s_(e,t,n){const r=Un(e,i=>Un(i,o=>t[o]));for(const i of e)for(const o of i)t[o]-=r,n[o]-=r}function u_(e,t,n){const r=e.length;if(r===1)return;const i=e.map(l=>l.flat()),o=i.map(l=>(Un(l,s=>t[s])+Rt(l,s=>n[s]))/2),a=Un(o);for(let l=0;l<r;l++){const s=a-o[l];for(const u of i[l])t[u]+=s,n[u]+=s}}function QS(e,t,n){if(e===void 0&&t===l_)return c1(sn);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?kl:sn;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return eA(i);case"z":return tA(i);case"sum":return nA(i);case"appearance":return rA(i);case"inside-out":return c1(i)}return h1(_2(e))}if(typeof e=="function")return(e.length===1?h1:iA)(e);if(Array.isArray(e))return oA(e);throw new Error(`invalid order: ${e}`)}}function eA(e){return(t,n,r)=>(i,o)=>e(r[i],r[o])}function tA(e){return(t,n,r,i)=>(o,a)=>e(i[o],i[a])}function nA(e){return Ts(e,(t,n,r,i)=>qf(Xn(t),o=>ar(o,a=>r[a]),o=>i[o]))}function rA(e){return Ts(e,(t,n,r,i)=>qf(Xn(t),o=>n[km(o,a=>r[a])],o=>i[o]))}function c1(e){return Ts(e,(t,n,r,i)=>{const o=Xn(t),a=qf(o,h=>n[km(h,c=>r[c])],h=>i[h]),l=oi(o,h=>ar(h,c=>r[c]),h=>i[h]),s=[],u=[];let f=0;for(const h of a)f<0?(f+=l.get(h),s.push(h)):(f-=l.get(h),u.push(h));return u.reverse().concat(s)})}function h1(e){return t=>{const n=dt(t,e);return(r,i)=>sn(n[r],n[i])}}function iA(e){return t=>(n,r)=>e(t[n],t[r])}function oA(e){return Ts(sn,()=>e)}function Ts(e,t){return(n,r,i,o)=>{if(!o)throw new Error("missing channel: z");const a=new Er(t(n,r,i,o).map((l,s)=>[l,s]));return(l,s)=>e(a.get(o[l]),a.get(o[s]))}}const aA={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class lA extends St{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:a,z:l,curve:s,tension:u}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:Mc(n),optional:!0}},n,aA),this.z=l,this.curve=Ky(s,u)}filter(t){return t}render(t,n,r,i,o){const{x1:a,y1:l,x2:s=a,y2:u=l}=r;return rt("svg:g",o).call(Jt,this,i,o).call(qt,this,n,0,0).call(f=>f.selectAll().data(F2(t,[a,l,s,u],this,r)).enter().append("path").call(Qt,this).call(R2,this,r).attr("d",v8().curve(this.curve).defined(h=>h>=0).x0(h=>a[h]).y0(h=>l[h]).x1(h=>s[h]).y1(h=>u[h]))).node()}}function sA(e,t){const{x:n=gs,...r}=Qy(t);return new lA(e,o_(i_({...r,x1:n,x2:void 0})))}const uA={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class fA extends St{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:a,curve:l,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,uA),this.curve=Jy(l,s),sa(this,n)}project(t,n,r){this.curve!==Ai&&super.project(t,n,r)}render(t,n,r,i,o){const{x1:a,y1:l,x2:s=a,y2:u=l}=r,{curve:f}=this;return rt("svg:g",o).call(Jt,this,i,o).call(qt,this,n).call(h=>h.selectAll().data(t).enter().append("path").call(Qt,this).attr("d",f===Ai&&o.projection?cA(o.projection,a,l,s,u):c=>{const d=tr(),m=f(d);return m.lineStart(),m.point(a[c],l[c]),m.point(s[c],u[c]),m.lineEnd(),d}).call(Kn,this,r).call(ks,this,r,o)).node()}}function cA(e,t,n,r,i){const o=es(e);return t=gn(t),n=gn(n),r=gn(r),i=gn(i),a=>o({type:"LineString",coordinates:[[t[a],n[a]],[r[a],i[a]]]})}function f_(e,{x:t,x1:n,x2:r,y:i,y1:o,y2:a,...l}={}){return[n,r]=d1(t,n,r),[o,a]=d1(i,o,a),new fA(e,{...l,x1:n,x2:r,y1:o,y2:a})}function d1(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class c_ extends St{constructor(t,n,r={},i){super(t,n,r,i);const{inset:o=0,insetTop:a=o,insetRight:l=o,insetBottom:s=o,insetLeft:u=o,rx:f,ry:h}=r;this.insetTop=Xe(a),this.insetRight=Xe(l),this.insetBottom=Xe(s),this.insetLeft=Xe(u),this.rx=pt(f,"auto"),this.ry=pt(h,"auto")}render(t,n,r,i,o){const{rx:a,ry:l}=this;return rt("svg:g",o).call(Jt,this,i,o).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("rect").call(Qt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(Ae,"rx",a).call(Ae,"ry",l).call(Kn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?o=>n[o]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?o=>n[o]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:o}){const{insetLeft:a,insetRight:l}=this,s=n&&t?t.bandwidth():o-r-i;return Math.max(0,s-a-l)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:o}){const{insetTop:a,insetBottom:l}=this,s=n&&t?t.bandwidth():o-r-i;return Math.max(0,s-a-l)}}const hA={ariaLabel:"bar"};class dA extends c_{constructor(t,n={}){const{x:r,y1:i,y2:o}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:o,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,hA)}_transform(t,n,{y:r}){t.call(qt,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:o}=this;return Pi(t)?i+o:a=>Math.min(n[a],r[a])+o}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:o,height:a}){const{insetTop:l,insetBottom:s}=this;return Pi(t)?a-i-o-l-s:u=>Math.max(0,Math.abs(r[u]-n[u])-l-s)}}function mA(e,t={}){return $9(t)||(t={...t,x:gs,y2:_t}),new dA(e,o_(by(i_(t))))}const pA={ariaLabel:"cell"};class bA extends c_{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,pA)}_transform(t,n){t.call(qt,n,{},0,0)}}function h_(e,{x:t,y:n,...r}={}){return[t,n]=ea(t,n),new bA(e,{...r,x:t,y:n})}const gA={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function yA(e){return e.sort===void 0&&e.reverse===void 0?eM({channel:"-r"},e):e}class _A extends St{constructor(t,n={}){const{x:r,y:i,r:o,rotate:a,symbol:l=Po,frameAnchor:s}=n,[u,f]=xt(a,0),[h,c]=J9(l),[d,m]=xt(o,h==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:ps,optional:!0},rotate:{value:u,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},yA(n),gA),this.r=m,this.rotate=f,this.symbol=c,this.frameAnchor=vs(s);const{channels:p}=this,{symbol:g}=p;if(g){const{fill:v,stroke:b}=p;g.hint={fill:v?v.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,o){const{x:a,y:l}=n,{x:s,y:u,r:f,rotate:h,symbol:c}=r,{r:d,rotate:m,symbol:p}=this,[g,v]=oa(this,i),b=p===Po,w=f?void 0:d*d*Math.PI;return bc(d)&&(t=[]),rt("svg:g",o).call(Jt,this,i,o).call(qt,this,{x:s&&a,y:u&&l}).call(_=>_.selectAll().data(t).enter().append(b?"circle":"path").call(Qt,this).call(b?x=>{x.attr("cx",s?M=>s[M]:g).attr("cy",u?M=>u[M]:v).attr("r",f?M=>f[M]:d)}:x=>{x.attr("transform",Gc`translate(${s?M=>s[M]:g},${u?M=>u[M]:v})${h?M=>` rotate(${h[M]})`:m?` rotate(${m})`:""}`).attr("d",f&&c?M=>{const S=tr();return c[M].draw(S,f[M]*f[M]*Math.PI),S}:f?M=>{const S=tr();return p.draw(S,f[M]*f[M]*Math.PI),S}:c?M=>{const S=tr();return c[M].draw(S,w),S}:(()=>{const M=tr();return p.draw(M,w),M})())}).call(Kn,this,r)).node()}}function jc(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ea(t,n)),new _A(e,{...r,x:t,y:n})}const vA={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class d_ extends St{constructor(t,n={}){const{x:r,y:i,z:o,curve:a,tension:l}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:Mc(n),optional:!0}},n,vA),this.z=o,this.curve=Jy(a,l),sa(this,n)}filter(t){return t}project(t,n,r){this.curve!==Ai&&super.project(t,n,r)}render(t,n,r,i,o){const{x:a,y:l}=r,{curve:s}=this;return rt("svg:g",o).call(Jt,this,i,o).call(qt,this,n).call(u=>u.selectAll().data(F2(t,[a,l],this,r)).enter().append("path").call(Qt,this).call(R2,this,r).call(rP,this,r,o).attr("d",s===Ai&&o.projection?wA(o.projection,a,l):Og().curve(s).defined(f=>f>=0).x(f=>a[f]).y(f=>l[f]))).node()}}function wA(e,t,n){const r=es(e);return t=gn(t),n=gn(n),i=>{let o=[];const a=[o];for(const l of i)l===-1?(o=[],a.push(o)):o.push([t[l],n[l]]);return r({type:"MultiLineString",coordinates:a})}}function MA(e,{x:t,y:n,...r}={}){return[t,n]=ea(t,n),new d_(e,{...r,x:t,y:n})}function xA(e,{x:t=gs,y:n=_t,...r}={}){return new d_(e,Qy({...r,x:t,y:n}))}const PA={ariaLabel:"tick",fill:null,stroke:"currentColor"};class SA extends St{constructor(t,n,r){super(t,n,r,PA),sa(this,r)}render(t,n,r,i,o){return rt("svg:g",o).call(Jt,this,i,o).call(this._transform,this,n).call(a=>a.selectAll().data(t).enter().append("line").call(Qt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Kn,this,r).call(ks,this,r,o)).node()}}class AA extends SA{constructor(t,n={}){const{x:r,y:i,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Xe(a),this.insetBottom=Xe(l)}_transform(t,n,{x:r}){t.call(qt,n,{x:r},Ct,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?o=>n[o]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:o}=this;return n&&t?a=>n[a]+t.bandwidth()-o:r-i-o}}function Xc(e,{x:t=_t,...n}={}){return new AA(e,{...n,x:t})}function kA(e){let t,n,r,i;return{c(){t=P("main"),n=P("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Qe(t,"width",e[0]+"px"),Qe(t,"margin","auto")},m(o,a){O(o,t,a),y(t,n),e[4](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Qe(t,"width",o[0]+"px")},i:Ce,o:Ce,d(o){o&&B(t),e[4](null)}}}function EA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:o=100}=t,a;An(()=>{const s=cn({width:i,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Xc(r,{x:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(s){Pt[s?"unshift":"push"](()=>{a=s,n(2,a)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,l]}class CA extends nt{constructor(t){super(),tt(this,t,EA,kA,et,{pattern:3,width:0,height:1})}}function TA(e){let t,n,r,i;return{c(){t=P("main"),n=P("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Qe(t,"width",e[0]+"px"),Qe(t,"margin","auto")},m(o,a){O(o,t,a),y(t,n),e[4](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Qe(t,"width",o[0]+"px")},i:Ce,o:Ce,d(o){o&&B(t),e[4](null)}}}function $A(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:o=100}=t,a;An(()=>{const s=r.map((f,h)=>h===0?0:f-r[h-1]),u=cn({width:i,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[mA(s,{x:(f,h)=>h+1,y:f=>f})]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){Pt[s?"unshift":"push"](()=>{a=s,n(2,a)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,l]}class DA extends nt{constructor(t){super(),tt(this,t,$A,TA,et,{pattern:3,width:0,height:1})}}function NA(e){let t,n,r,i;return{c(){t=P("main"),n=P("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Qe(t,"width",e[0]+"px"),Qe(t,"margin","auto")},m(o,a){O(o,t,a),y(t,n),e[4](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Qe(t,"width",o[0]+"px")},i:Ce,o:Ce,d(o){o&&B(t),e[4](null)}}}function IA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:o=100}=t,a;An(()=>{const s=r.map((f,h)=>h===0?0:f-r[h-1]),u=cn({width:i,height:o,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[h_(s,{x:(f,h)=>h+1,fill:f=>f})]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){Pt[s?"unshift":"push"](()=>{a=s,n(2,a)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,l]}class LA extends nt{constructor(t){super(),tt(this,t,IA,NA,et,{pattern:3,width:0,height:1})}}function RA(e){let t,n,r,i;return{c(){t=P("main"),n=P("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Qe(t,"width",e[0]+"px"),Qe(t,"margin","auto")},m(o,a){O(o,t,a),y(t,n),e[5](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Qe(t,"width",o[0]+"px")},i:Ce,o:Ce,d(o){o&&B(t),e[5](null)}}}function FA(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:o=800}=t,{height:a=50}=t,l;An(()=>{if(n(2,l.textContent="",l),!r)return;const u=cn({width:o,height:a,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[xA(r,{x:(f,h)=>h/i,y:f=>f})]});l.appendChild(u)});function s(u){Pt[u?"unshift":"push"](()=>{l=u,n(2,l)})}return e.$$set=u=>{"audioData"in u&&n(3,r=u.audioData),"sampleRate"in u&&n(4,i=u.sampleRate),"width"in u&&n(0,o=u.width),"height"in u&&n(1,a=u.height)},[o,a,l,r,i,s]}class wn extends nt{constructor(t){super(),tt(this,t,FA,RA,et,{audioData:3,sampleRate:4,width:0,height:1})}}function BA(e){let t,n,r,i,o,a;return{c(){t=P("main"),n=P("audio"),r=E(),i=P("button"),i.textContent="play audio (p)",n.controls=!1},m(l,s){O(l,t,s),y(t,n),e[5](n),y(t,r),y(t,i),o||(a=Re(i,"click",e[1]),o=!0)},p:Ce,i:Ce,o:Ce,d(l){l&&B(t),e[5](null),o=!1,a()}}}function OA(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:o=-1}=t,a;const l=h=>{h&&a&&dc(h,i,a)},s=()=>{a&&(n(0,a.currentTime=0,a),a.play())},u=h=>{h.key==="p"&&s()};Br(()=>{document.querySelector("html").addEventListener("keyup",u),l(r)}),yv(()=>{document.querySelector("html").removeEventListener("keyup",u)});function f(h){Pt[h?"unshift":"push"](()=>{a=h,n(0,a)})}return e.$$set=h=>{"audioData"in h&&n(2,r=h.audioData),"sampleRate"in h&&n(3,i=h.sampleRate),"currentTrialNumber"in h&&n(4,o=h.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&o>-1&&window.setTimeout(s,250),e.$$.dirty&4&&l(r)},[a,s,r,i,o,f]}class $s extends nt{constructor(t){super(),tt(this,t,OA,BA,et,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const m_=new Map,p_=new Map,qA=new Map,GA=new Map;function UA(e){return m_.get(e)}function b_(e){return p_.get(e)}const zA=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],HA=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],WA=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of zA)m_.set(e.pitch,e),p_.set(e.label,e);for(const e of HA)qA.set(e.number,e);for(const e of WA){const t=`${e.number}-${e.subnumber}`;GA.set(t,e)}var VA={value:()=>{}};function g_(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ha(n)}function Ha(e){this._=e}function YA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ha.prototype=g_.prototype={constructor:Ha,on:function(e,t){var n=this._,r=YA(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=jA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=m1(n[i],e.name,t);else if(t==null)for(i in n)n[i]=m1(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ha(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function jA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function m1(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=VA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Af="http://www.w3.org/1999/xhtml";const p1={svg:"http://www.w3.org/2000/svg",xhtml:Af,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ds(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),p1.hasOwnProperty(t)?{space:p1[t],local:e}:e}function XA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Af&&t.documentElement.namespaceURI===Af?t.createElement(e):t.createElementNS(n,e)}}function ZA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function y_(e){var t=Ds(e);return(t.local?ZA:XA)(t)}function KA(){}function Zc(e){return e==null?KA:function(){return this.querySelector(e)}}function JA(e){typeof e!="function"&&(e=Zc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=new Array(a),s,u,f=0;f<a;++f)(s=o[f])&&(u=e.call(s,s.__data__,f,o))&&("__data__"in s&&(u.__data__=s.__data__),l[f]=u);return new Zt(r,this._parents)}function __(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QA(){return[]}function v_(e){return e==null?QA:function(){return this.querySelectorAll(e)}}function ek(e){return function(){var t=e.apply(this,arguments);return t==null?[]:__(t)}}function tk(e){typeof e=="function"?e=ek(e):e=v_(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(r.push(e.call(s,s.__data__,u,a)),i.push(s));return new Zt(r,i)}function w_(e){return function(){return this.matches(e)}}function M_(e){return function(t){return t.matches(e)}}var nk=Array.prototype.find;function rk(e){return function(){return nk.call(this.children,e)}}function ik(){return this.firstElementChild}function ok(e){return this.select(e==null?ik:rk(typeof e=="function"?e:M_(e)))}var ak=Array.prototype.filter;function lk(){return this.children}function sk(e){return function(){return ak.call(this.children,e)}}function uk(e){return this.selectAll(e==null?lk:sk(typeof e=="function"?e:M_(e)))}function fk(e){typeof e!="function"&&(e=w_(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&l.push(s);return new Zt(r,this._parents)}function x_(e){return new Array(e.length)}function ck(){return new Zt(this._enter||this._groups.map(x_),this._parents)}function Dl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Dl.prototype={constructor:Dl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hk(e){return function(){return e}}function dk(e,t,n,r,i,o){for(var a=0,l,s=t.length,u=o.length;a<u;++a)(l=t[a])?(l.__data__=o[a],r[a]=l):n[a]=new Dl(e,o[a]);for(;a<s;++a)(l=t[a])&&(i[a]=l)}function mk(e,t,n,r,i,o,a){var l,s,u=new Map,f=t.length,h=o.length,c=new Array(f),d;for(l=0;l<f;++l)(s=t[l])&&(c[l]=d=a.call(s,s.__data__,l,t)+"",u.has(d)?i[l]=s:u.set(d,s));for(l=0;l<h;++l)d=a.call(e,o[l],l,o)+"",(s=u.get(d))?(r[l]=s,s.__data__=o[l],u.delete(d)):n[l]=new Dl(e,o[l]);for(l=0;l<f;++l)(s=t[l])&&u.get(c[l])===s&&(i[l]=s)}function pk(e){return e.__data__}function bk(e,t){if(!arguments.length)return Array.from(this,pk);var n=t?mk:dk,r=this._parents,i=this._groups;typeof e!="function"&&(e=hk(e));for(var o=i.length,a=new Array(o),l=new Array(o),s=new Array(o),u=0;u<o;++u){var f=r[u],h=i[u],c=h.length,d=__(e.call(f,f&&f.__data__,u,r)),m=d.length,p=l[u]=new Array(m),g=a[u]=new Array(m),v=s[u]=new Array(c);n(f,h,p,g,v,d,t);for(var b=0,w=0,_,x;b<m;++b)if(_=p[b]){for(b>=w&&(w=b+1);!(x=g[w])&&++w<m;);_._next=x||null}}return a=new Zt(a,r),a._enter=l,a._exit=s,a}function gk(){return new Zt(this._exit||this._groups.map(x_),this._parents)}function yk(e,t,n){var r=this.enter(),i=this,o=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function _k(e){if(!(e instanceof Zt))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=t[l],u=n[l],f=s.length,h=a[l]=new Array(f),c,d=0;d<f;++d)(c=s[d]||u[d])&&(h[d]=c);for(;l<r;++l)a[l]=t[l];return new Zt(a,this._parents)}function vk(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function wk(e){e||(e=Mk);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],l=a.length,s=i[o]=new Array(l),u,f=0;f<l;++f)(u=a[f])&&(s[f]=u);s.sort(t)}return new Zt(i,this._parents).order()}function Mk(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xk(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Pk(){return Array.from(this)}function Sk(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Ak(){let e=0;for(const t of this)++e;return e}function kk(){return!this.node()}function Ek(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,l;o<a;++o)(l=i[o])&&e.call(l,l.__data__,o,i);return this}function Ck(e){return function(){this.removeAttribute(e)}}function Tk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $k(e,t){return function(){this.setAttribute(e,t)}}function Dk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Nk(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ik(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Lk(e,t){var n=Ds(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Tk:Ck:typeof t=="function"?n.local?Ik:Nk:n.local?Dk:$k)(n,t))}function P_(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Rk(e){return function(){this.style.removeProperty(e)}}function Fk(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Bk(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ok(e,t,n){return arguments.length>1?this.each((t==null?Rk:typeof t=="function"?Bk:Fk)(e,t,n??"")):ki(this.node(),e)}function ki(e,t){return e.style.getPropertyValue(t)||P_(e).getComputedStyle(e,null).getPropertyValue(t)}function qk(e){return function(){delete this[e]}}function Gk(e,t){return function(){this[e]=t}}function Uk(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zk(e,t){return arguments.length>1?this.each((t==null?qk:typeof t=="function"?Uk:Gk)(e,t)):this.node()[e]}function S_(e){return e.trim().split(/^|\s+/)}function Kc(e){return e.classList||new A_(e)}function A_(e){this._node=e,this._names=S_(e.getAttribute("class")||"")}A_.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function k_(e,t){for(var n=Kc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function E_(e,t){for(var n=Kc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Hk(e){return function(){k_(this,e)}}function Wk(e){return function(){E_(this,e)}}function Vk(e,t){return function(){(t.apply(this,arguments)?k_:E_)(this,e)}}function Yk(e,t){var n=S_(e+"");if(arguments.length<2){for(var r=Kc(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Vk:t?Hk:Wk)(n,t))}function jk(){this.textContent=""}function Xk(e){return function(){this.textContent=e}}function Zk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Kk(e){return arguments.length?this.each(e==null?jk:(typeof e=="function"?Zk:Xk)(e)):this.node().textContent}function Jk(){this.innerHTML=""}function Qk(e){return function(){this.innerHTML=e}}function eE(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function tE(e){return arguments.length?this.each(e==null?Jk:(typeof e=="function"?eE:Qk)(e)):this.node().innerHTML}function nE(){this.nextSibling&&this.parentNode.appendChild(this)}function rE(){return this.each(nE)}function iE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oE(){return this.each(iE)}function aE(e){var t=typeof e=="function"?e:y_(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function lE(){return null}function sE(e,t){var n=typeof e=="function"?e:y_(e),r=t==null?lE:typeof t=="function"?t:Zc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function uE(){var e=this.parentNode;e&&e.removeChild(this)}function fE(){return this.each(uE)}function cE(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hE(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dE(e){return this.select(e?hE:cE)}function mE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pE(e){return function(t){e.call(this,t,this.__data__)}}function bE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function yE(e,t,n){return function(){var r=this.__on,i,o=pE(t);if(r){for(var a=0,l=r.length;a<l;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function _E(e,t,n){var r=bE(e+""),i,o=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,f;s<u;++s)for(i=0,f=l[s];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=t?yE:gE,i=0;i<o;++i)this.each(l(r[i],t,n));return this}function C_(e,t,n){var r=P_(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function vE(e,t){return function(){return C_(this,e,t)}}function wE(e,t){return function(){return C_(this,e,t.apply(this,arguments))}}function ME(e,t){return this.each((typeof t=="function"?wE:vE)(e,t))}function*xE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var PE=[null];function Zt(e,t){this._groups=e,this._parents=t}function ua(){return new Zt([[document.documentElement]],PE)}function SE(){return this}Zt.prototype=ua.prototype={constructor:Zt,select:JA,selectAll:tk,selectChild:ok,selectChildren:uk,filter:fk,data:bk,enter:ck,exit:gk,join:yk,merge:_k,selection:SE,order:vk,sort:wk,call:xk,nodes:Pk,node:Sk,size:Ak,empty:kk,each:Ek,attr:Lk,style:Ok,property:zk,classed:Yk,text:Kk,html:tE,raise:rE,lower:oE,append:aE,insert:sE,remove:fE,clone:dE,datum:mE,on:_E,dispatch:ME,[Symbol.iterator]:xE};function Jc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function T_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function fa(){}var $o=.7,Nl=1/$o,ui="\\s*([+-]?\\d+)\\s*",Do="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",AE=/^#([0-9a-f]{3,8})$/,kE=new RegExp("^rgb\\("+[ui,ui,ui]+"\\)$"),EE=new RegExp("^rgb\\("+[Mn,Mn,Mn]+"\\)$"),CE=new RegExp("^rgba\\("+[ui,ui,ui,Do]+"\\)$"),TE=new RegExp("^rgba\\("+[Mn,Mn,Mn,Do]+"\\)$"),$E=new RegExp("^hsl\\("+[Do,Mn,Mn]+"\\)$"),DE=new RegExp("^hsla\\("+[Do,Mn,Mn,Do]+"\\)$"),b1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jc(fa,No,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:g1,formatHex:g1,formatHsl:NE,formatRgb:y1,toString:y1});function g1(){return this.rgb().formatHex()}function NE(){return $_(this).formatHsl()}function y1(){return this.rgb().formatRgb()}function No(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=AE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?_1(t):n===3?new Lt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Da(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Da(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kE.exec(e))?new Lt(t[1],t[2],t[3],1):(t=EE.exec(e))?new Lt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=CE.exec(e))?Da(t[1],t[2],t[3],t[4]):(t=TE.exec(e))?Da(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$E.exec(e))?M1(t[1],t[2]/100,t[3]/100,1):(t=DE.exec(e))?M1(t[1],t[2]/100,t[3]/100,t[4]):b1.hasOwnProperty(e)?_1(b1[e]):e==="transparent"?new Lt(NaN,NaN,NaN,0):null}function _1(e){return new Lt(e>>16&255,e>>8&255,e&255,1)}function Da(e,t,n,r){return r<=0&&(e=t=n=NaN),new Lt(e,t,n,r)}function IE(e){return e instanceof fa||(e=No(e)),e?(e=e.rgb(),new Lt(e.r,e.g,e.b,e.opacity)):new Lt}function kf(e,t,n,r){return arguments.length===1?IE(e):new Lt(e,t,n,r??1)}function Lt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Jc(Lt,kf,T_(fa,{brighter:function(e){return e=e==null?Nl:Math.pow(Nl,e),new Lt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?$o:Math.pow($o,e),new Lt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:v1,formatHex:v1,formatRgb:w1,toString:w1}));function v1(){return"#"+xu(this.r)+xu(this.g)+xu(this.b)}function w1(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function xu(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function M1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bn(e,t,n,r)}function $_(e){if(e instanceof bn)return new bn(e.h,e.s,e.l,e.opacity);if(e instanceof fa||(e=No(e)),!e)return new bn;if(e instanceof bn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(t===o?a=(n-r)/l+(n<r)*6:n===o?a=(r-t)/l+2:a=(t-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new bn(a,l,s,e.opacity)}function D_(e,t,n,r){return arguments.length===1?$_(e):new bn(e,t,n,r??1)}function bn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Jc(bn,D_,T_(fa,{brighter:function(e){return e=e==null?Nl:Math.pow(Nl,e),new bn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?$o:Math.pow($o,e),new bn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Lt(Pu(e>=240?e-240:e+120,i,r),Pu(e,i,r),Pu(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Pu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const N_=e=>()=>e;function LE(e,t){return function(n){return e+n*t}}function RE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function FE(e){return(e=+e)==1?I_:function(t,n){return n-t?RE(t,n,e):N_(isNaN(t)?n:t)}}function I_(e,t){var n=t-e;return n?LE(e,n):N_(isNaN(e)?t:e)}const Ef=function e(t){var n=FE(t);function r(i,o){var a=n((i=kf(i)).r,(o=kf(o)).r),l=n(i.g,o.g),s=n(i.b,o.b),u=I_(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function er(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Cf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Su=new RegExp(Cf.source,"g");function BE(e){return function(){return e}}function OE(e){return function(t){return e(t)+""}}function qE(e,t){var n=Cf.lastIndex=Su.lastIndex=0,r,i,o,a=-1,l=[],s=[];for(e=e+"",t=t+"";(r=Cf.exec(e))&&(i=Su.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:er(r,i)})),n=Su.lastIndex;return n<t.length&&(o=t.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?OE(s[0].x):BE(t):(t=s.length,function(u){for(var f=0,h;f<t;++f)l[(h=s[f]).i]=h.x(u);return l.join("")})}var x1=180/Math.PI,Tf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function L_(e,t,n,r,i,o){var a,l,s;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),e*r<t*n&&(e=-e,t=-t,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*x1,skewX:Math.atan(s)*x1,scaleX:a,scaleY:l}}var Na;function GE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Tf:L_(t.a,t.b,t.c,t.d,t.e,t.f)}function UE(e){return e==null||(Na||(Na=document.createElementNS("http://www.w3.org/2000/svg","g")),Na.setAttribute("transform",e),!(e=Na.transform.baseVal.consolidate()))?Tf:(e=e.matrix,L_(e.a,e.b,e.c,e.d,e.e,e.f))}function R_(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,h,c,d,m){if(u!==h||f!==c){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:er(u,h)},{i:p-2,x:er(f,c)})}else(h||c)&&d.push("translate("+h+t+c+n)}function a(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:er(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function l(u,f,h,c){u!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:er(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function s(u,f,h,c,d,m){if(u!==h||f!==c){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:er(u,h)},{i:p-2,x:er(f,c)})}else(h!==1||c!==1)&&d.push(i(d)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,c),a(u.rotate,f.rotate,h,c),l(u.skewX,f.skewX,h,c),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(d){for(var m=-1,p=c.length,g;++m<p;)h[(g=c[m]).i]=g.x(d);return h.join("")}}}var zE=R_(GE,"px, ","px)","deg)"),HE=R_(UE,", ",")",")"),Ei=0,no=0,Hi=0,F_=1e3,Il,ro,Ll=0,Fr=0,Ns=0,Io=typeof performance=="object"&&performance.now?performance:Date,B_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qc(){return Fr||(B_(WE),Fr=Io.now()+Ns)}function WE(){Fr=0}function Rl(){this._call=this._time=this._next=null}Rl.prototype=O_.prototype={constructor:Rl,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Qc():+n)+(t==null?0:+t),!this._next&&ro!==this&&(ro?ro._next=this:Il=this,ro=this),this._call=e,this._time=n,$f()},stop:function(){this._call&&(this._call=null,this._time=1/0,$f())}};function O_(e,t,n){var r=new Rl;return r.restart(e,t,n),r}function VE(){Qc(),++Ei;for(var e=Il,t;e;)(t=Fr-e._time)>=0&&e._call.call(null,t),e=e._next;--Ei}function P1(){Fr=(Ll=Io.now())+Ns,Ei=no=0;try{VE()}finally{Ei=0,jE(),Fr=0}}function YE(){var e=Io.now(),t=e-Ll;t>F_&&(Ns-=t,Ll=e)}function jE(){for(var e,t=Il,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Il=n);ro=e,$f(r)}function $f(e){if(!Ei){no&&(no=clearTimeout(no));var t=e-Fr;t>24?(e<1/0&&(no=setTimeout(P1,e-Io.now()-Ns)),Hi&&(Hi=clearInterval(Hi))):(Hi||(Ll=Io.now(),Hi=setInterval(YE,F_)),Ei=1,B_(P1))}}function S1(e,t,n){var r=new Rl;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var XE=g_("start","end","cancel","interrupt"),ZE=[],q_=0,A1=1,Df=2,Wa=3,k1=4,Nf=5,Va=6;function Is(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;KE(e,n,{name:t,index:r,group:i,on:XE,tween:ZE,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:q_})}function eh(e,t){var n=hn(e,t);if(n.state>q_)throw new Error("too late; already scheduled");return n}function Cn(e,t){var n=hn(e,t);if(n.state>Wa)throw new Error("too late; already running");return n}function hn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function KE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=O_(o,0,n.time);function o(u){n.state=A1,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,h,c,d;if(n.state!==A1)return s();for(f in r)if(d=r[f],d.name===n.name){if(d.state===Wa)return S1(a);d.state===k1?(d.state=Va,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[f]):+f<t&&(d.state=Va,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[f])}if(S1(function(){n.state===Wa&&(n.state=k1,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Df,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Df){for(n.state=Wa,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(d=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(s),n.state=Nf,1),h=-1,c=i.length;++h<c;)i[h].call(e,f);n.state===Nf&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Va,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function JE(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Df&&r.state<Nf,r.state=Va,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function QE(e){return this.each(function(){JE(this,e)})}function eC(e,t){var n,r;return function(){var i=Cn(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,l=r.length;a<l;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function tC(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Cn(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var l={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=l;break}s===u&&i.push(l)}o.tween=i}}function nC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=hn(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?eC:tC)(n,e,t))}function th(e,t,n){var r=e._id;return e.each(function(){var i=Cn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return hn(i,r).value[t]}}function G_(e,t){var n;return(typeof t=="number"?er:t instanceof No?Ef:(n=No(t))?(t=n,Ef):qE)(e,t)}function rC(e){return function(){this.removeAttribute(e)}}function iC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oC(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function aC(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function lC(e,t,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l)))}}function sC(e,t,n){var r,i,o;return function(){var a,l=n(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l)))}}function uC(e,t){var n=Ds(e),r=n==="transform"?HE:G_;return this.attrTween(e,typeof t=="function"?(n.local?sC:lC)(n,r,th(this,"attr."+e,t)):t==null?(n.local?iC:rC)(n):(n.local?aC:oC)(n,r,t))}function fC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function cC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hC(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&cC(e,o)),n}return i._value=t,i}function dC(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&fC(e,o)),n}return i._value=t,i}function mC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ds(e);return this.tween(n,(r.local?hC:dC)(r,t))}function pC(e,t){return function(){eh(this,e).delay=+t.apply(this,arguments)}}function bC(e,t){return t=+t,function(){eh(this,e).delay=t}}function gC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pC:bC)(t,e)):hn(this.node(),t).delay}function yC(e,t){return function(){Cn(this,e).duration=+t.apply(this,arguments)}}function _C(e,t){return t=+t,function(){Cn(this,e).duration=t}}function vC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yC:_C)(t,e)):hn(this.node(),t).duration}function wC(e,t){if(typeof t!="function")throw new Error;return function(){Cn(this,e).ease=t}}function MC(e){var t=this._id;return arguments.length?this.each(wC(t,e)):hn(this.node(),t).ease}function xC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Cn(this,e).ease=n}}function PC(e){if(typeof e!="function")throw new Error;return this.each(xC(this._id,e))}function SC(e){typeof e!="function"&&(e=w_(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&l.push(s);return new Yn(r,this._parents,this._name,this._id)}function AC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=t[l],u=n[l],f=s.length,h=a[l]=new Array(f),c,d=0;d<f;++d)(c=s[d]||u[d])&&(h[d]=c);for(;l<r;++l)a[l]=t[l];return new Yn(a,this._parents,this._name,this._id)}function kC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function EC(e,t,n){var r,i,o=kC(t)?eh:Cn;return function(){var a=o(this,e),l=a.on;l!==r&&(i=(r=l).copy()).on(t,n),a.on=i}}function CC(e,t){var n=this._id;return arguments.length<2?hn(this.node(),n).on.on(e):this.each(EC(n,e,t))}function TC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $C(){return this.on("end.remove",TC(this._id))}function DC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zc(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var l=r[a],s=l.length,u=o[a]=new Array(s),f,h,c=0;c<s;++c)(f=l[c])&&(h=e.call(f,f.__data__,c,l))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,Is(u[c],t,n,c,u,hn(f,n)));return new Yn(o,this._parents,t,n)}function NC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=v_(e));for(var r=this._groups,i=r.length,o=[],a=[],l=0;l<i;++l)for(var s=r[l],u=s.length,f,h=0;h<u;++h)if(f=s[h]){for(var c=e.call(f,f.__data__,h,s),d,m=hn(f,n),p=0,g=c.length;p<g;++p)(d=c[p])&&Is(d,t,n,p,c,m);o.push(c),a.push(f)}return new Yn(o,a,t,n)}var IC=ua.prototype.constructor;function LC(){return new IC(this._groups,this._parents)}function RC(e,t){var n,r,i;return function(){var o=ki(this,e),a=(this.style.removeProperty(e),ki(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function U_(e){return function(){this.style.removeProperty(e)}}function FC(e,t,n){var r,i=n+"",o;return function(){var a=ki(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function BC(e,t,n){var r,i,o;return function(){var a=ki(this,e),l=n(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),ki(this,e))),a===s?null:a===r&&s===i?o:(i=s,o=t(r=a,l))}}function OC(e,t){var n,r,i,o="style."+t,a="end."+o,l;return function(){var s=Cn(this,e),u=s.on,f=s.value[o]==null?l||(l=U_(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),s.on=r}}function qC(e,t,n){var r=(e+="")=="transform"?zE:G_;return t==null?this.styleTween(e,RC(e,r)).on("end.style."+e,U_(e)):typeof t=="function"?this.styleTween(e,BC(e,r,th(this,"style."+e,t))).each(OC(this._id,e)):this.styleTween(e,FC(e,r,t),n).on("end.style."+e,null)}function GC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function UC(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&GC(e,a,n)),r}return o._value=t,o}function zC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,UC(e,t,n??""))}function HC(e){return function(){this.textContent=e}}function WC(e){return function(){var t=e(this);this.textContent=t??""}}function VC(e){return this.tween("text",typeof e=="function"?WC(th(this,"text",e)):HC(e==null?"":e+""))}function YC(e){return function(t){this.textContent=e.call(this,t)}}function jC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&YC(i)),t}return r._value=e,r}function XC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jC(e))}function ZC(){for(var e=this._name,t=this._id,n=z_(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var f=hn(s,t);Is(s,e,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Yn(r,this._parents,e,n)}function KC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var l={value:a},s={value:function(){--i===0&&o()}};n.each(function(){var u=Cn(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),i===0&&o()})}var JC=0;function Yn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function z_(){return++JC}var gr=ua.prototype;Yn.prototype={constructor:Yn,select:DC,selectAll:NC,filter:SC,merge:AC,selection:LC,transition:ZC,call:gr.call,nodes:gr.nodes,node:gr.node,size:gr.size,empty:gr.empty,each:gr.each,on:CC,attr:uC,attrTween:mC,style:qC,styleTween:zC,text:VC,textTween:XC,remove:$C,tween:nC,delay:gC,duration:vC,ease:MC,easeVarying:PC,end:KC,[Symbol.iterator]:gr[Symbol.iterator]};function QC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var eT={time:null,delay:0,duration:250,ease:QC};function tT(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function nT(e){var t,n;e instanceof Yn?(t=e._id,e=e._name):(t=z_(),(n=eT).time=Qc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&Is(s,e,t,u,a,n||tT(s,t));return new Yn(r,this._parents,e,t)}ua.prototype.interrupt=QE;ua.prototype.transition=nT;function io(e,t,n){this.k=e,this.x=t,this.y=n}io.prototype={constructor:io,scale:function(e){return e===1?this:new io(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new io(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};io.prototype;var rT={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!o.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let a,l="",s,u,f=0;for(;f<r.length;)a=i.indexOf(r.charAt(f++))<<18|i.indexOf(r.charAt(f++))<<12|(s=i.indexOf(r.charAt(f++)))<<6|(u=i.indexOf(r.charAt(f++))),l+=s===64?String.fromCharCode(a>>16&255):u===64?String.fromCharCode(a>>16&255,a>>8&255):String.fromCharCode(a>>16&255,a>>8&255,a&255);return l},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(o){if(!o.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let a=new FileReader;a.readAsArrayBuffer(o.target.files[0]),a.onload=function(l){i(n.Uint8(new Uint8Array(l.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),o=i.length,a=new Uint8Array(new ArrayBuffer(o));for(let l=0;l<o;l++)a[l]=i.charCodeAt(l);return n.Uint8(a)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(s){return this.pointer+=s,this.pointer},readInt:function(s){if(s=Math.min(s,this.data.byteLength-this.pointer),s<1)return-1;let u=0;if(s>1)for(let f=1;f<=s-1;f++)u+=this.data.getUint8(this.pointer)*Math.pow(256,s-f),this.pointer++;return u+=this.data.getUint8(this.pointer),this.pointer++,u},readStr:function(s){let u="";for(let f=1;f<=s;f++)u+=String.fromCharCode(this.readInt(1));return u},readIntVLV:function(){let s=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)s=this.readInt(1);else{let u=[];for(;this.data.getUint8(this.pointer)>=128;)u.push(this.readInt(1)-128);let f=this.readInt(1);for(let h=1;h<=u.length;h++)s+=u[u.length-h]*Math.pow(128,h);s+=f}return s}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let o={};o.formatType=i.readInt(2),o.tracks=i.readInt(2),o.track=[];let a=i.readInt(1),l=i.readInt(1);a>=128?(o.timeDivision=[],o.timeDivision[0]=a-128,o.timeDivision[1]=l):o.timeDivision=a*256+l;for(let s=1;s<=o.tracks;s++){o.track[s-1]={event:[]};let u=i.readInt(4);if(u===-1)break;if(u!==1297379947)return!1;i.readInt(4);let f=0,h=!1,c,d;for(;!h&&(f++,o.track[s-1].event[f-1]={},o.track[s-1].event[f-1].deltaTime=i.readIntVLV(),c=i.readInt(1),c!==-1);)if(c>=128?d=c:(c=d,i.movePointer(-1)),c===255){o.track[s-1].event[f-1].type=255,o.track[s-1].event[f-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(o.track[s-1].event[f-1].metaType){case 47:case-1:h=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:o.track[s-1].event[f-1].data=i.readStr(m);break;case 33:case 89:case 81:o.track[s-1].event[f-1].data=i.readInt(m);break;case 84:o.track[s-1].event[f-1].data=[],o.track[s-1].event[f-1].data[0]=i.readInt(1),o.track[s-1].event[f-1].data[1]=i.readInt(1),o.track[s-1].event[f-1].data[2]=i.readInt(1),o.track[s-1].event[f-1].data[3]=i.readInt(1),o.track[s-1].event[f-1].data[4]=i.readInt(1);break;case 88:o.track[s-1].event[f-1].data=[],o.track[s-1].event[f-1].data[0]=i.readInt(1),o.track[s-1].event[f-1].data[1]=i.readInt(1),o.track[s-1].event[f-1].data[2]=i.readInt(1),o.track[s-1].event[f-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(o.track[s-1].event[f-1].data=this.customInterpreter(o.track[s-1].event[f-1].metaType,i,m)),(this.customInterpreter===null||o.track[s-1].event[f-1].data===!1)&&(i.readInt(m),o.track[s-1].event[f-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(c=c.toString(16).split(""),c[1]||c.unshift("0"),o.track[s-1].event[f-1].type=parseInt(c[0],16),o.track[s-1].event[f-1].channel=parseInt(c[1],16),o.track[s-1].event[f-1].type){case 15:{if(this.customInterpreter!==null&&(o.track[s-1].event[f-1].data=this.customInterpreter(o.track[s-1].event[f-1].type,i,!1)),this.customInterpreter===null||o.track[s-1].event[f-1].data===!1){let m=i.readIntVLV();o.track[s-1].event[f-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:o.track[s-1].event[f-1].data=[],o.track[s-1].event[f-1].data[0]=i.readInt(1),o.track[s-1].event[f-1].data[1]=i.readInt(1);break;case 12:case 13:o.track[s-1].event[f-1].data=i.readInt(1);break;case-1:h=!0;break;default:if(this.customInterpreter!==null&&(o.track[s-1].event[f-1].data=this.customInterpreter(o.track[s-1].event[f-1].metaType,i,!1)),this.customInterpreter===null||o.track[s-1].event[f-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return o},customInterpreter:null};e.exports=n})()})(rT);function Lo(e){return 1/(e/60)}const H_=[],iT=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of iT)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;H_.push({type:e,dots:t,duration:n})}H_.sort((e,t)=>e.duration-t.duration);class Me{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>b_(r).pitch),this.stringCount=n.length}}new Me("E stand.",["E2","A2","D3","G3","B3","E4"]),new Me("Drop D",["D2","A2","D3","G3","B3","E4"]),new Me("Drop C",["C2","G2","C3","F3","A3","D4"]),new Me("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new Me("1 down",["D2","G2","C3","F3","A3","D4"]),new Me("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new Me("2 down",["C2","F2","A#2","D#3","G3","C4"]),new Me("DADGAG",["D2","A2","D3","G3","A3","D4"]),new Me("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new Me("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new Me("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new Me("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new Me("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new Me("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new Me("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new Me("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new Me("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new Me("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new Me("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new Me("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new Me("E stand.",["E1","A1","D2","G2"]),new Me("Drop D",["D1","A1","D2","G2"]),new Me("1/2 down",["D#1","G#1","C#2","F#2"]),new Me("1 down",["D1","G1","C2","F2"]),new Me("1 1/2 down",["C#1","F#1","B1","E2"]),new Me("2 down",["C1","F1","A#1","D#2"]),new Me("B stand.",["B0","E1","A1","D2","G2"]),new Me("Drop A",["A0","D1","A1","D2","G2"]),new Me("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new Me("1 down",["A0","D1","G1","C2","F2"]),new Me("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new Me("2 down",["G0","C1","F1","A#1","D#2"]),new Me("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new Me("Drop E",["E0","A0","D1","A1","D2","G2"]),new Me("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new Me("1 down",["E1","A0","D1","G1","C2","F2"]),new Me("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new Me("2 down",["D0","G0","C1","F1","A#1","D#2"]),new Me("Hawaii",["G4","C4","E4","A4"]),new Me("Low G",["G3","C4","E4","A4"]),new Me("D-tuning",["A4","D4","F#4","B4"]),new Me("Canadian",["A3","D4","F#4","B4"]),new Me("Bariton",["D3","G3","B3","E4"]);function W_(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function V_(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var Y_=[0,2,4,-1,1,3,5],j_=Y_.map(e=>Math.floor(e*7/12));function X_(e){const{step:t,alt:n,oct:r,dir:i=1}=e,o=Y_[t]+7*n;if(r===void 0)return[i*o];const a=r-j_[t]-4*n;return[i*o,i*a]}var oT=[3,0,4,1,5,2,6];function aT(e){const[t,n,r]=e,i=oT[lT(t)],o=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:o,dir:r};const a=n+4*o+j_[i];return{step:i,alt:o,oct:a,dir:r}}function lT(e){const t=(e+1)%7;return t<0?7+t:t}var E1=(e,t)=>Array(Math.abs(t)+1).join(e),If=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),sT="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",uT="(AA|A|P|M|m|d|dd)([-+]?\\d+)",fT=new RegExp("^"+sT+"|"+uT+"$");function cT(e){const t=fT.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var C1={};function Fl(e){return typeof e=="string"?C1[e]||(C1[e]=hT(e)):V_(e)?Fl(mT(e)):W_(e)?Fl(e.name):If}var T1=[0,2,4,5,7,9,11],Z_="PMMPPMM";function hT(e){const t=cT(e);if(t[0]==="")return If;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,o=Z_[i];if(o==="M"&&r==="P")return If;const a=o==="M"?"majorable":"perfectable",l=""+n+r,s=n<0?-1:1,u=n===8||n===-8?n:s*(i+1),f=dT(a,r),h=Math.floor((Math.abs(n)-1)/7),c=s*(T1[i]+f+12*h),d=(s*(T1[i]+f)%12+12)%12,m=X_({step:i,alt:f,oct:h,dir:s});return{empty:!1,name:l,num:n,q:r,step:i,alt:f,dir:s,type:a,simple:u,semitones:c,chroma:d,coord:m,oct:h}}function dT(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function mT(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const o=t+1+7*r,a=o===0?t+1:o,l=i<0?"-":"",s=Z_[t]==="M"?"majorable":"perfectable";return l+a+pT(s,n)}function pT(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?E1("A",t):E1("d",e==="perfectable"?t:t+1)}var $1=(e,t)=>Array(Math.abs(t)+1).join(e),K_=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),D1=new Map,bT=e=>"CDEFGAB".charAt(e),gT=e=>e<0?$1("b",-e):$1("#",e),yT=e=>e[0]==="b"?-e.length:e.length;function Ro(e){const t=JSON.stringify(e),n=D1.get(t);if(n)return n;const r=typeof e=="string"?xT(e):V_(e)?Ro(PT(e)):W_(e)?Ro(e.name):K_;return D1.set(t,r),r}var _T=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function vT(e){const t=_T.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function wT(e){return Ro(aT(e))}var MT=(e,t)=>(e%t+t)%t,Au=[0,2,4,5,7,9,11];function xT(e){const t=vT(e);if(t[0]===""||t[3]!=="")return K_;const n=t[0],r=t[1],i=t[2],o=(n.charCodeAt(0)+3)%7,a=yT(r),l=i.length?+i:void 0,s=X_({step:o,alt:a,oct:l}),u=n+r+i,f=n+r,h=(Au[o]+a+120)%12,c=l===void 0?MT(Au[o]+a,12)-12*99:Au[o]+a+12*(l+1),d=c>=0&&c<=127?c:null,m=l===void 0?null:Math.pow(2,(c-69)/12)*440;return{empty:!1,acc:r,alt:a,chroma:h,coord:s,freq:m,height:c,letter:n,midi:d,name:u,oct:l,pc:f,step:o}}function PT(e){const{step:t,alt:n,oct:r}=e,i=bT(t);if(!i)return"";const o=i+gT(n);return r||r===0?o+r:o}function ST(e,t){const n=Ro(e),r=Array.isArray(t)?t:Fl(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,o=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return wT(o).name}function J_(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var fr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Q_=e=>Number(e).toString(2).padStart(12,"0"),N1=e=>parseInt(e,2),AT=/^[01]{12}$/;function ev(e){return AT.test(e)}var kT=e=>typeof e=="number"&&e>=0&&e<=4095,ET=e=>e&&ev(e.chroma),I1={[fr.chroma]:fr};function nh(e){const t=ev(e)?e:kT(e)?Q_(e):Array.isArray(e)?NT(e):ET(e)?e.chroma:fr.chroma;return I1[t]=I1[t]||DT(t)}var CT=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function TT(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(CT[n]);return t}function $T(e){const t=e.split("");return t.map((n,r)=>J_(r,t).join(""))}function DT(e){const t=N1(e),n=$T(e).map(N1).filter(o=>o>=2048).sort()[0],r=Q_(n),i=TT(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function NT(e){if(e.length===0)return fr.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=Ro(e[r]),t.empty&&(t=Fl(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var IT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],LT=IT;({...fr});var tv=[],Ya={};function RT(e,t,n){const r=BT(e),i={...nh(e),name:n||"",quality:r,intervals:e,aliases:t};tv.push(i),i.name&&(Ya[i.name]=i),Ya[i.setNum]=i,Ya[i.chroma]=i,i.aliases.forEach(o=>FT(i,o))}function FT(e,t){Ya[t]=e}function BT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}LT.forEach(([e,t,n])=>RT(e.split(" "),n.split(" "),t));tv.sort((e,t)=>e.setNum-t.setNum);var OT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],qT=OT;({...fr});var nv=[],ja={};function GT(e,t,n){const r=zT(e),i={...nh(e),name:n||"",quality:r,intervals:e,aliases:t};nv.push(i),i.name&&(ja[i.name]=i),ja[i.setNum]=i,ja[i.chroma]=i,i.aliases.forEach(o=>UT(i,o))}function UT(e,t){ja[t]=e}function zT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}qT.forEach(([e,t,n])=>GT(e.split(" "),n.split(" "),t));nv.sort((e,t)=>e.setNum-t.setNum);var HT=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],WT=HT,VT={...fr,intervals:[],aliases:[]},co={};function YT(e){return co[e]||VT}function jT(e,t,n=[]){const r={...nh(e),name:t,intervals:e,aliases:n};return co[r.name]=r,co[r.setNum]=r,co[r.chroma]=r,r.aliases.forEach(i=>XT(r,i)),r}function XT(e,t){co[t]=e}WT.forEach(([e,t,...n])=>jT(e.split(" "),t,n));var rh=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],L1={...fr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},ZT=rh.map(KT),Lf={};ZT.forEach(e=>{Lf[e.name]=e,e.aliases.forEach(t=>{Lf[t]=e})});function rv(e){return typeof e=="string"?Lf[e.toLowerCase()]||L1:e&&e.name?rv(e.name):L1}function KT(e){const[t,n,r,i,o,a,l]=e,s=l?[l]:[],u=Number(n).toString(2);return{empty:!1,intervals:YT(i).intervals,modeNum:t,chroma:u,normalized:u,name:i,setNum:n,alt:r,triad:o,seventh:a,aliases:s}}function iv(e){return(t,n)=>{const r=rv(t);if(r.empty)return[];const i=J_(r.modeNum,e),o=r.intervals.map(a=>ST(n,a));return i.map((a,l)=>o[l]+a)}}iv(rh.map(e=>e[4]));iv(rh.map(e=>e[5]));class Jn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>b_(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let o=r+1,a="",l=i-12;for(;l>0&&n.has(l);)o=n.get(l).number,a+="",l-=12;n.set(i,{number:o,numberString:`${o}${a}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let o=r+1,a="",l=i-12;for(;l>0&&n.has(l);)o=n.get(l).number,a+="",l-=12;const s=UA(i).name;n.set(i,{number:o,letterString:`${s}${a}`})}return[...n.values()].map(r=>r.letterString)}}new Jn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Jn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Jn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Jn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Jn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Jn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Jn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Jn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function JT(e,t=1){const n=D_(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>JT(e,.5));const QT=Ef("black","steelblue");Array.from({length:12}).map((e,t)=>QT(t/11));function e$(e){let t,n,r,i;return{c(){t=P("main"),n=P("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Qe(t,"width",e[0]+"px"),Qe(t,"margin","auto")},m(o,a){O(o,t,a),y(t,n),e[4](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Qe(t,"width",o[0]+"px")},i:Ce,o:Ce,d(o){o&&B(t),e[4](null)}}}function t$(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:o=100}=t,a;An(()=>{const s=[...new Set(r)],u=s.map((h,c)=>c===0?0:h-s[c-1]),f=cn({width:i,height:o,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},x:{label:"beat"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[h_(u,{x:(h,c)=>c+1,fill:h=>h})]});n(2,a.textContent="",a),a.appendChild(f)});function l(s){Pt[s?"unshift":"push"](()=>{a=s,n(2,a)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,o=s.height)},[i,o,a,r,l]}class xn extends nt{constructor(t){super(),tt(this,t,t$,e$,et,{pattern:3,width:0,height:1})}}function n$(e,t,n){const r=e.slice();return r[16]=t[n],r}function r$(e){let t;return{c(){t=P("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],ke(t,t.__value)},m(n,r){O(n,t,r)},p:Ce,d(n){n&&B(t)}}}function i$(e){let t,n,r,i,o,a,l,s,u,f,h,c,d,m,p,g,v,b,w,_,x,M,S,T,I,L,C,G=Ue(["single note","single beat","only snare","beat 5"]),Y=[];for(let N=0;N<4;N+=1)Y[N]=r$(n$(e,G,N));return m=new $s({props:{audioData:e[2],sampleRate:e[3]}}),g=new wn({props:{audioData:e[2],width:Wi,height:Vi}}),b=new CA({props:{pattern:e[4],width:Wi,height:Vi}}),_=new DA({props:{pattern:e[4],width:Wi,height:Vi}}),M=new LA({props:{pattern:e[4],width:Wi,height:Vi}}),T=new xn({props:{pattern:e[4],width:Wi,height:Vi}}),{c(){t=P("main"),n=P("h2"),n.textContent="Playground",r=E(),i=P("div"),o=P("label"),a=J(`error mode:
      `),l=P("select");for(let N=0;N<4;N+=1)Y[N].c();s=E(),u=P("label"),f=J(`error severity (in seconds):
      `),h=P("input"),c=E(),d=P("div"),ce(m.$$.fragment),p=E(),ce(g.$$.fragment),v=E(),ce(b.$$.fragment),w=E(),ce(_.$$.fragment),x=E(),ce(M.$$.fragment),S=E(),ce(T.$$.fragment),e[0]===void 0&&Ar(()=>e[5].call(l)),A(o,"class","svelte-1sot113"),A(h,"type","number"),A(h,"min","-0.5"),A(h,"max","0.5"),A(h,"step","0.01"),A(u,"class","svelte-1sot113"),A(d,"class","stimuli svelte-1sot113")},m(N,$){O(N,t,$),y(t,n),y(t,r),y(t,i),y(i,o),y(o,a),y(o,l);for(let V=0;V<4;V+=1)Y[V]&&Y[V].m(l,null);or(l,e[0],!0),y(i,s),y(i,u),y(u,f),y(u,h),ke(h,e[1]),y(t,c),y(t,d),ue(m,d,null),y(d,p),ue(g,d,null),y(d,v),ue(b,d,null),y(d,w),ue(_,d,null),y(d,x),ue(M,d,null),y(d,S),ue(T,d,null),I=!0,L||(C=[Re(l,"change",e[5]),Re(h,"input",e[6])],L=!0)},p(N,[$]){$&1&&or(l,N[0]),$&2&&$t(h.value)!==N[1]&&ke(h,N[1]);const V={};$&4&&(V.audioData=N[2]),$&8&&(V.sampleRate=N[3]),m.$set(V);const le={};$&4&&(le.audioData=N[2]),g.$set(le);const ie={};$&16&&(ie.pattern=N[4]),b.$set(ie);const se={};$&16&&(se.pattern=N[4]),_.$set(se);const Z={};$&16&&(Z.pattern=N[4]),M.$set(Z);const Q={};$&16&&(Q.pattern=N[4]),T.$set(Q)},i(N){I||(R(m.$$.fragment,N),R(g.$$.fragment,N),R(b.$$.fragment,N),R(_.$$.fragment,N),R(M.$$.fragment,N),R(T.$$.fragment,N),I=!0)},o(N){H(m.$$.fragment,N),H(g.$$.fragment,N),H(b.$$.fragment,N),H(_.$$.fragment,N),H(M.$$.fragment,N),H(T.$$.fragment,N),I=!1},d(N){N&&B(t),wt(Y,N),fe(m),fe(g),fe(b),fe(_),fe(M),fe(T),L=!1,It(C)}}}let Wi=600,Vi=100,o$=120;const R1=4;function a$(e,t,n){let r="beat 5",i=0,o=Lo(o$),a=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const l=R1*o;let s=null,u,f=[];const h=async()=>{a=await Promise.all(a.map(async v=>({...v,times:v.beats.map(b=>o*(b-1)),timesOriginal:v.beats.map(b=>o*(b-1)),audioBuffer:await ms(v.sample)})))},c=(v="single note",b=0)=>{if(b===0)return a;console.log(`Adding error ${v} ${b}`);const w=d([a]),_=w.filter(S=>S.instrument==="snare")[0],x=w.filter(S=>S.instrument==="hihat")[0],M=w.filter(S=>S.instrument==="bass")[0];return v==="single note"?_.times[1]=_.timesOriginal[1]+b:v==="single beat"?(_.times[1]=_.timesOriginal[1]+b,x.times[6]=x.timesOriginal[6]+b):v==="only snare"?(_.times[0]=_.timesOriginal[0]+b,_.times[1]=_.timesOriginal[1]+b):v==="beat 5"&&(M.times[1]=M.timesOriginal[1]+b,x.times[4]=x.timesOriginal[4]+b),w},d=v=>{console.log(`concat ${v.length} patterns`);const b=v[0].map(w=>({...w,beats:[...w.beats],times:[...w.times],timesOriginal:[...w.timesOriginal]}));for(let w=1;w<v.length;w++){const _=v[w];for(const x of _){const M=b.filter(S=>S.instrument===x.instrument)[0];M.beats=[...M.beats,...x.beats.map(S=>S+w*R1)],M.times=[...M.times,...x.times.map(S=>S+w*l)],M.timesOriginal=[...M.timesOriginal,...x.timesOriginal.map(S=>S+w*l)]}}return b},m=async(v,b)=>{if(!a[0].audioBuffer)return;const _=[c(v,b)],x=d(_);n(4,f=x.map(M=>M.times).flat().sort()),x.map(M=>M.times.map(S=>({time:S,instr:M.instrument}))).flat(1/0).sort((M,S)=>{M.time-S.time}),n(3,u=x[0].audioBuffer.sampleRate),n(2,s=So(x,l*_.length+.1,u)),x.map(M=>{const S=So([M],l*_.length+.1,u);return{instr:M.instrument,audio:S}})};Br(async()=>{await h(),m()});function p(){r=Ol(this),n(0,r)}function g(){i=$t(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&m(r,i)},[r,i,s,u,f,p,g]}class l$ extends nt{constructor(t){super(),tt(this,t,a$,i$,et,{})}}function je(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}je.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};je.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};je.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};je.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=ov(0,e.length-1);return this.activate(e[t]),this};je.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=ov(0,e.length-1);this.activate(e[t])};je.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};je.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};je.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};je.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};je.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};je.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};je.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};je.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};je.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};je.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};je.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};je.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};je.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};je.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};je.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};je.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const ih=function(){};ih.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};ih.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};je.prototype.checkErr=new ih;function ov(e,t){return Math.floor(Math.random()*(t-e+1))+e}function rn(e,t){return new URLSearchParams(e.location.search).get(t)}function s$(e){let t,n,r,i,o,a,l;return{c(){t=P("main"),n=P("audio"),r=E(),i=P("button"),o=J(e[0]),n.controls=!1},m(s,u){O(s,t,u),y(t,n),e[5](n),y(t,r),y(t,i),y(i,o),a||(l=Re(i,"click",e[2]),a=!0)},p(s,[u]){u&1&&Fe(o,s[0])},i:Ce,o:Ce,d(s){s&&B(t),e[5](null),a=!1,l()}}}function u$(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:o="play audio"}=t,a=null,l;const s=(h,c)=>{c&&l&&(a=p9(c,h),dc(a,c.sampleRate,l))};Br(()=>s(r,i));const u=async()=>{l&&(n(1,l.currentTime=0,l),l.play())};function f(h){Pt[h?"unshift":"push"](()=>{l=h,n(1,l)})}return e.$$set=h=>{"pattern"in h&&n(3,r=h.pattern),"cachedAudio"in h&&n(4,i=h.cachedAudio),"label"in h&&n(0,o=h.label)},[o,l,u,r,i,f]}class ku extends nt{constructor(t){super(),tt(this,t,u$,s$,et,{pattern:3,cachedAudio:4,label:0})}}function f$(e){let t,n,r,i,o,a;return{c(){t=P("main"),n=P("audio"),r=E(),i=P("button"),i.textContent="play audio",n.controls=!1},m(l,s){O(l,t,s),y(t,n),e[4](n),y(t,r),y(t,i),o||(a=Re(i,"click",e[1]),o=!0)},p:Ce,i:Ce,o:Ce,d(l){l&&B(t),e[4](null),o=!1,a()}}}function c$(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,o;const a=u=>{u&&o&&dc(u,i,o)};Br(()=>a(r));const l=()=>{o&&(n(0,o.currentTime=0,o),o.play())};function s(u){Pt[u?"unshift":"push"](()=>{o=u,n(0,o)})}return e.$$set=u=>{"audioData"in u&&n(2,r=u.audioData),"sampleRate"in u&&n(3,i=u.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&a(r)},[o,l,r,i,s]}class Kt extends nt{constructor(t){super(),tt(this,t,c$,f$,et,{audioData:2,sampleRate:3})}}function h$(e){let t,n,r,i;return{c(){t=P("main"),n=P("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px")},m(o,a){O(o,t,a),y(t,n),e[9](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i)},i:Ce,o:Ce,d(o){o&&B(t),e[9](null)}}}function d$(e,t,n){let{title:r=void 0}=t,{final:i=void 0}=t,{width:o=600}=t,{height:a=180}=t,{data:l}=t,{x:s=(d,m)=>m}=t,{y:u=d=>d}=t,{xDomain:f=[0,70]}=t,h;An(()=>{n(2,h.textContent="",h);const d=cn({title:r,width:o,height:a,x:{domain:f},marks:[MA(l,{x:s,y:u,stroke:"#ccc"}),jc(l,{x:s,y:u,fill:"#aaa",r:2,tip:!0}),Tl([0]),Tl([i],{stroke:"#88888888"}),Es([i],{x:65,y:i,dy:-7,text:m=>`final: ${m.toFixed(3)}`})]});h.appendChild(d)});function c(d){Pt[d?"unshift":"push"](()=>{h=d,n(2,h)})}return e.$$set=d=>{"title"in d&&n(3,r=d.title),"final"in d&&n(4,i=d.final),"width"in d&&n(0,o=d.width),"height"in d&&n(1,a=d.height),"data"in d&&n(5,l=d.data),"x"in d&&n(6,s=d.x),"y"in d&&n(7,u=d.y),"xDomain"in d&&n(8,f=d.xDomain)},[o,a,h,r,i,l,s,u,f,c]}class av extends nt{constructor(t){super(),tt(this,t,d$,h$,et,{title:3,final:4,width:0,height:1,data:5,x:6,y:7,xDomain:8})}}function F1(e){let t,n,r,i,o,a,l,s,u,f,h;return{c(){t=P("div"),n=P("p"),n.textContent=`In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.`,r=E(),i=P("p"),i.innerHTML=`For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.`,o=E(),a=P("p"),a.innerHTML=`By clicking <i>next step</i> you consent to participating in this study and
        data collection.`,l=E(),s=P("p"),s.innerHTML=`If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.`,u=E(),f=P("a"),h=P("button"),h.textContent="I do NOT consent and will not participate",A(n,"class","svelte-9uo0u8"),A(i,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"href","https://app.prolific.com/submissions/complete?cc="+w$)},m(c,d){O(c,t,d),y(t,n),y(t,r),y(t,i),y(t,o),y(t,a),y(t,l),y(t,s),y(t,u),y(t,f),y(f,h)},p:Ce,d(c){c&&B(t)}}}function B1(e){let t,n,r,i,o,a,l,s,u,f;return i=new Kt({props:{audioData:e[19],sampleRate:e[17]}}),{c(){t=P("div"),n=P("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=E(),ce(i.$$.fragment),o=E(),a=P("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",l=E(),s=P("a"),u=P("button"),u.textContent="I can NOT hear the audio and will NOT participate in this study",A(n,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(s,"href","https://app.prolific.com/submissions/complete?cc="+M$)},m(h,c){O(h,t,c),y(t,n),y(t,r),ue(i,t,null),y(t,o),y(t,a),y(t,l),y(t,s),y(s,u),f=!0},p(h,c){const d={};c[0]&524288&&(d.audioData=h[19]),c[0]&131072&&(d.sampleRate=h[17]),i.$set(d)},i(h){f||(R(i.$$.fragment,h),f=!0)},o(h){H(i.$$.fragment,h),f=!1},d(h){h&&B(t),fe(i)}}}function O1(e){let t,n,r,i,o,a,l,s,u,f,h,c,d,m,p,g,v,b;return{c(){t=P("div"),n=P("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=E(),i=P("div"),o=P("button"),o.textContent="+",a=E(),l=P("button"),l.textContent="-",s=E(),u=fi("svg"),f=fi("rect"),p=E(),g=P("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,A(n,"class","svelte-9uo0u8"),A(f,"width",h=e[0]*.52),A(f,"height",c=e[25]*2),A(f,"fill","#ccc"),A(f,"rx","8"),A(u,"width",d=e[0]*.52+"px"),A(u,"height",m=e[25]*2+"px"),A(g,"class","svelte-9uo0u8")},m(w,_){O(w,t,_),y(t,n),y(t,r),y(t,i),y(i,o),y(i,a),y(i,l),y(t,s),y(t,u),y(u,f),y(t,p),y(t,g),v||(b=[Re(o,"click",e[27]),Re(l,"click",e[28])],v=!0)},p(w,_){_[0]&1&&h!==(h=w[0]*.52)&&A(f,"width",h),_[0]&33554432&&c!==(c=w[25]*2)&&A(f,"height",c),_[0]&1&&d!==(d=w[0]*.52+"px")&&A(u,"width",d),_[0]&33554432&&m!==(m=w[25]*2+"px")&&A(u,"height",m)},d(w){w&&B(t),v=!1,It(b)}}}function q1(e){let t,n,r,i,o,a,l,s,u,f,h,c,d,m,p,g,v,b,w,_;return c=new ku({props:{pattern:[.1],cachedAudio:e[1][0].audioBuffer,label:"hi-hat"}}),m=new ku({props:{pattern:[.1],cachedAudio:e[1][1].audioBuffer,label:"snare drum"}}),g=new ku({props:{pattern:[.1],cachedAudio:e[1][2].audioBuffer,label:"bass drum"}}),w=new Kt({props:{audioData:e[19],sampleRate:e[17]}}),{c(){t=P("div"),n=P("div"),n.innerHTML=`<p class="svelte-9uo0u8">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-9uo0u8">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-9uo0u8">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played together will still be played at
          the same time, but this time will be either too early or too late.
          Notes after the mistake will also be affected and be early/late, such
          that only one time interval is shorter/longer than supposed.</p>`,r=J(`
      This is what the pattern looks like in sheet music:
      `),i=P("div"),o=P("img"),s=E(),u=P("div"),f=P("span"),f.textContent="Click to hear the different sounds:",h=E(),ce(c.$$.fragment),d=E(),ce(m.$$.fragment),p=E(),ce(g.$$.fragment),v=J(`
      This is what the full, correctly played pattern sounds like:
      `),b=P("div"),ce(w.$$.fragment),A(o,"width",a=e[0]+"px"),Rf(o.src,l="drum-pattern-labels3.png")||A(o,"src",l),A(o,"alt","drum pattern as sheet music"),Qe(u,"display","grid"),Qe(u,"grid-template-columns","repeat(4,max-content)"),Qe(u,"gap","10px"),Qe(u,"align-items","center")},m(x,M){O(x,t,M),y(t,n),y(t,r),y(t,i),y(i,o),y(t,s),y(t,u),y(u,f),y(u,h),ue(c,u,null),y(u,d),ue(m,u,null),y(u,p),ue(g,u,null),y(t,v),y(t,b),ue(w,b,null),_=!0},p(x,M){(!_||M[0]&1&&a!==(a=x[0]+"px"))&&A(o,"width",a);const S={};M[0]&2&&(S.cachedAudio=x[1][0].audioBuffer),c.$set(S);const T={};M[0]&2&&(T.cachedAudio=x[1][1].audioBuffer),m.$set(T);const I={};M[0]&2&&(I.cachedAudio=x[1][2].audioBuffer),g.$set(I);const L={};M[0]&524288&&(L.audioData=x[19]),M[0]&131072&&(L.sampleRate=x[17]),w.$set(L)},i(x){_||(R(c.$$.fragment,x),R(m.$$.fragment,x),R(g.$$.fragment,x),R(w.$$.fragment,x),_=!0)},o(x){H(c.$$.fragment,x),H(m.$$.fragment,x),H(g.$$.fragment,x),H(w.$$.fragment,x),_=!1},d(x){x&&B(t),fe(c),fe(m),fe(g),fe(w)}}}function G1(e){let t,n,r,i,o,a,l,s,u,f,h,c,d,m,p,g,v,b,w,_,x,M,S,T,I,L,C,G,Y;return{c(){t=P("div"),n=P("p"),n.textContent="Please answer the following questions about yourself:",r=E(),i=P("label"),o=P("span"),o.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,a=E(),l=P("select"),s=P("option"),s.textContent="none",u=P("option"),u.textContent="high school",f=P("option"),f.textContent="bachelor",h=P("option"),h.textContent="master",c=P("option"),c.textContent="phd",d=E(),m=P("label"),p=P("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=E(),v=P("input"),b=E(),w=P("label"),_=P("span"),_.textContent="For how many years do you roughly play it/them?",x=E(),M=P("input"),S=E(),T=P("label"),I=P("span"),I.textContent=`How many years of experience do you have with information
          visualization?`,L=E(),C=P("input"),A(n,"class","svelte-9uo0u8"),s.__value="none",ke(s,s.__value),u.__value="highs",ke(u,u.__value),f.__value="bachelor",ke(f,f.__value),h.__value="master",ke(h,h.__value),c.__value="phd",ke(c,c.__value),e[7]===void 0&&Ar(()=>e[29].call(l)),A(i,"class","svelte-9uo0u8"),A(v,"type","text"),A(v,"placeholder","free text"),A(m,"class","svelte-9uo0u8"),A(M,"type","number"),A(M,"min","0"),A(M,"step","1"),A(w,"class","svelte-9uo0u8"),A(C,"type","number"),A(C,"min","0"),A(C,"step","1"),A(T,"class","svelte-9uo0u8"),A(t,"class","demo-form svelte-9uo0u8")},m(N,$){O(N,t,$),y(t,n),y(t,r),y(t,i),y(i,o),y(i,a),y(i,l),y(l,s),y(l,u),y(l,f),y(l,h),y(l,c),or(l,e[7],!0),y(t,d),y(t,m),y(m,p),y(m,g),y(m,v),ke(v,e[8]),y(t,b),y(t,w),y(w,_),y(w,x),y(w,M),ke(M,e[9]),y(t,S),y(t,T),y(T,I),y(T,L),y(T,C),ke(C,e[10]),G||(Y=[Re(l,"change",e[29]),Re(v,"input",e[30]),Re(M,"input",e[31]),Re(C,"input",e[32])],G=!0)},p(N,$){$[0]&128&&or(l,N[7]),$[0]&256&&v.value!==N[8]&&ke(v,N[8]),$[0]&512&&$t(M.value)!==N[9]&&ke(M,N[9]),$[0]&1024&&$t(C.value)!==N[10]&&ke(C,N[10])},d(N){N&&B(t),G=!1,It(Y)}}}function U1(e){let t,n,r=(e[13]||e[5])&&z1(e);return{c(){r&&r.c(),t=jn()},m(i,o){r&&r.m(i,o),O(i,t,o),n=!0},p(i,o){i[13]||i[5]?r?(r.p(i,o),o[0]&8224&&R(r,1)):(r=z1(i),r.c(),R(r,1),r.m(t.parentNode,t)):r&&(He(),H(r,1,1,()=>{r=null}),We())},i(i){n||(R(r),n=!0)},o(i){H(r),n=!1},d(i){i&&B(t),r&&r.d(i)}}}function z1(e){let t,n,r=e[4]+1+"",i,o,a=e[2].length+"",l,s,u,f,h,c,d,m,p;function g(M,S){return M[5]?p$:m$}let v=g(e),b=v(e);const w=[g$,b$],_=[];function x(M,S){return M[16]==="audio"?0:M[15]===!1?1:-1}return~(c=x(e))&&(d=_[c]=w[c](e)),{c(){t=P("p"),n=J("Test number "),i=J(r),o=J(" of "),l=J(a),s=E(),b.c(),u=E(),f=P("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,h=E(),d&&d.c(),m=jn(),A(t,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8")},m(M,S){O(M,t,S),y(t,n),y(t,i),y(t,o),y(t,l),O(M,s,S),b.m(M,S),O(M,u,S),O(M,f,S),O(M,h,S),~c&&_[c].m(M,S),O(M,m,S),p=!0},p(M,S){(!p||S[0]&16)&&r!==(r=M[4]+1+"")&&Fe(i,r),(!p||S[0]&4)&&a!==(a=M[2].length+"")&&Fe(l,a),v===(v=g(M))&&b?b.p(M,S):(b.d(1),b=v(M),b&&(b.c(),b.m(u.parentNode,u)));let T=c;c=x(M),c===T?~c&&_[c].p(M,S):(d&&(He(),H(_[T],1,1,()=>{_[T]=null}),We()),~c?(d=_[c],d?d.p(M,S):(d=_[c]=w[c](M),d.c()),R(d,1),d.m(m.parentNode,m)):d=null)},i(M){p||(R(d),p=!0)},o(M){H(d),p=!1},d(M){M&&(B(t),B(s),B(u),B(f),B(h),B(m)),b.d(M),~c&&_[c].d(M)}}}function m$(e){let t,n,r=e[12]+1+"",i;return{c(){t=P("p"),n=J("Trial number "),i=J(r),A(t,"class","svelte-9uo0u8")},m(o,a){O(o,t,a),y(t,n),y(t,i)},p(o,a){a[0]&4096&&r!==(r=o[12]+1+"")&&Fe(i,r)},d(o){o&&B(t)}}}function p$(e){let t,n,r,i,o,a,l,s,u,f,h,c;return{c(){t=P("p"),n=P("b"),n.textContent="Training:",r=J(" the training will end when you got "),i=J(lv),o=J(` correct
          in a streak.`),a=P("br"),l=J(`
          Current streak: `),s=J(e[6]),u=J("."),f=P("br"),h=E(),c=P("b"),c.innerHTML='<span id="trainingFeedback"></span>',A(t,"class","training svelte-9uo0u8")},m(d,m){O(d,t,m),y(t,n),y(t,r),y(t,i),y(t,o),y(t,a),y(t,l),y(t,s),y(t,u),y(t,f),y(t,h),y(t,c)},p(d,m){m[0]&64&&Fe(s,d[6])},d(d){d&&B(t)}}}function b$(e){let t,n,r,i=(e[16]==="waveform"||Ia)&&H1(e),o=(e[16]==="color"||Ia)&&W1(e);return{c(){i&&i.c(),t=E(),o&&o.c(),n=jn()},m(a,l){i&&i.m(a,l),O(a,t,l),o&&o.m(a,l),O(a,n,l),r=!0},p(a,l){a[16]==="waveform"||Ia?i?(i.p(a,l),l[0]&65536&&R(i,1)):(i=H1(a),i.c(),R(i,1),i.m(t.parentNode,t)):i&&(He(),H(i,1,1,()=>{i=null}),We()),a[16]==="color"||Ia?o?(o.p(a,l),l[0]&65536&&R(o,1)):(o=W1(a),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(He(),H(o,1,1,()=>{o=null}),We())},i(a){r||(R(i),R(o),r=!0)},o(a){H(i),H(o),r=!1},d(a){a&&(B(t),B(n)),i&&i.d(a),o&&o.d(a)}}}function g$(e){let t,n,r,i,o,a,l,s,u,f,h,c,d;return i=new Kt({props:{audioData:e[20],sampleRate:e[17]}}),a=new Kt({props:{audioData:e[21],sampleRate:e[17]}}),c=new $s({props:{audioData:e[18],sampleRate:e[17],currentTrialNumber:e[12]}}),{c(){t=P("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=E(),r=P("div"),ce(i.$$.fragment),o=E(),ce(a.$$.fragment),l=E(),s=P("div"),s.textContent="Example for early",u=E(),f=P("div"),f.textContent="Example for late",h=E(),ce(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(m,p){O(m,t,p),O(m,n,p),O(m,r,p),ue(i,r,null),y(r,o),ue(a,r,null),y(r,l),y(r,s),y(r,u),y(r,f),O(m,h,p),ue(c,m,p),d=!0},p(m,p){const g={};p[0]&1048576&&(g.audioData=m[20]),p[0]&131072&&(g.sampleRate=m[17]),i.$set(g);const v={};p[0]&2097152&&(v.audioData=m[21]),p[0]&131072&&(v.sampleRate=m[17]),a.$set(v);const b={};p[0]&262144&&(b.audioData=m[18]),p[0]&131072&&(b.sampleRate=m[17]),p[0]&4096&&(b.currentTrialNumber=m[12]),c.$set(b)},i(m){d||(R(i.$$.fragment,m),R(a.$$.fragment,m),R(c.$$.fragment,m),d=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),d=!1},d(m){m&&(B(t),B(n),B(r),B(h)),fe(i),fe(a),fe(c,m)}}}function H1(e){let t,n,r,i,o,a,l,s,u,f,h,c,d;return i=new wn({props:{audioData:e[20],width:e[0]/2,height:e[25]/2}}),a=new wn({props:{audioData:e[21],width:e[0]/2,height:e[25]/2}}),c=new wn({props:{audioData:e[18],width:e[0],height:e[25]}}),{c(){t=P("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=E(),r=P("div"),ce(i.$$.fragment),o=E(),ce(a.$$.fragment),l=E(),s=P("div"),s.textContent="Example for early",u=E(),f=P("div"),f.textContent="Example for late",h=E(),ce(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(m,p){O(m,t,p),O(m,n,p),O(m,r,p),ue(i,r,null),y(r,o),ue(a,r,null),y(r,l),y(r,s),y(r,u),y(r,f),O(m,h,p),ue(c,m,p),d=!0},p(m,p){const g={};p[0]&1048576&&(g.audioData=m[20]),p[0]&1&&(g.width=m[0]/2),p[0]&33554432&&(g.height=m[25]/2),i.$set(g);const v={};p[0]&2097152&&(v.audioData=m[21]),p[0]&1&&(v.width=m[0]/2),p[0]&33554432&&(v.height=m[25]/2),a.$set(v);const b={};p[0]&262144&&(b.audioData=m[18]),p[0]&1&&(b.width=m[0]),p[0]&33554432&&(b.height=m[25]),c.$set(b)},i(m){d||(R(i.$$.fragment,m),R(a.$$.fragment,m),R(c.$$.fragment,m),d=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),d=!1},d(m){m&&(B(t),B(n),B(r),B(h)),fe(i),fe(a),fe(c,m)}}}function W1(e){let t,n,r,i,o,a,l,s,u,f,h,c,d;return i=new xn({props:{pattern:e[23],width:e[0]/2,height:e[25]*.7}}),a=new xn({props:{pattern:e[24],width:e[0]/2,height:e[25]*.7}}),c=new xn({props:{pattern:e[22],width:e[0],height:e[25]}}),{c(){t=P("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Look at the rectangle at 5, it is either
            brigher (early) or darker (late) than the others.`,n=E(),r=P("div"),ce(i.$$.fragment),o=E(),ce(a.$$.fragment),l=E(),s=P("div"),s.textContent="Example for early",u=E(),f=P("div"),f.textContent="Example for late",h=E(),ce(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(m,p){O(m,t,p),O(m,n,p),O(m,r,p),ue(i,r,null),y(r,o),ue(a,r,null),y(r,l),y(r,s),y(r,u),y(r,f),O(m,h,p),ue(c,m,p),d=!0},p(m,p){const g={};p[0]&8388608&&(g.pattern=m[23]),p[0]&1&&(g.width=m[0]/2),p[0]&33554432&&(g.height=m[25]*.7),i.$set(g);const v={};p[0]&16777216&&(v.pattern=m[24]),p[0]&1&&(v.width=m[0]/2),p[0]&33554432&&(v.height=m[25]*.7),a.$set(v);const b={};p[0]&4194304&&(b.pattern=m[22]),p[0]&1&&(b.width=m[0]),p[0]&33554432&&(b.height=m[25]),c.$set(b)},i(m){d||(R(i.$$.fragment,m),R(a.$$.fragment,m),R(c.$$.fragment,m),d=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),d=!1},d(m){m&&(B(t),B(n),B(r),B(h)),fe(i),fe(a),fe(c,m)}}}function V1(e){let t,n,r,i,o,a,l;return{c(){t=P("div"),n=J(`Almost done!
      `),r=P("p"),r.textContent="Do you have any final feedback/comments?",i=E(),o=P("textarea"),A(r,"class","svelte-9uo0u8")},m(s,u){O(s,t,u),y(t,n),y(t,r),y(t,i),y(t,o),ke(o,e[11]),a||(l=Re(o,"input",e[33]),a=!0)},p(s,u){u[0]&2048&&ke(o,s[11])},d(s){s&&B(t),a=!1,l()}}}function Y1(e){let t,n,r,i;return{c(){t=P("div"),t.textContent="Thanks for participating!",n=E(),r=P("a"),i=P("b"),i.textContent="Click here to get your compensation",A(r,"href","https://app.prolific.com/submissions/complete?cc="+v$)},m(o,a){O(o,t,a),O(o,n,a),O(o,r,a),y(r,i)},p:Ce,d(o){o&&(B(t),B(n),B(r))}}}function j1(e){let t,n,r;return{c(){t=P("button"),t.textContent="next step",A(t,"class","next-btn svelte-9uo0u8")},m(i,o){O(i,t,o),n||(r=Re(t,"click",e[26]),n=!0)},p:Ce,d(i){i&&B(t),n=!1,r()}}}function y$(e){let t,n,r,i,o,a,l,s,u,f,h=e[3]==="consent"&&F1(),c=e[3]==="start1"&&B1(e),d=e[3]==="start2"&&O1(e),m=e[3]==="start3"&&q1(e),p=e[3]==="demo"&&G1(e),g=e[3]==="tests"&&U1(e),v=e[3]==="feedback"&&V1(e),b=e[3]==="done"&&Y1(),w=!e[14]&&e[3]!=="done"&&!e[5]&&j1(e);return{c(){t=P("main"),h&&h.c(),n=E(),c&&c.c(),r=E(),d&&d.c(),i=E(),m&&m.c(),o=E(),p&&p.c(),a=E(),g&&g.c(),l=E(),v&&v.c(),s=E(),b&&b.c(),u=E(),w&&w.c(),A(t,"class","svelte-9uo0u8")},m(_,x){O(_,t,x),h&&h.m(t,null),y(t,n),c&&c.m(t,null),y(t,r),d&&d.m(t,null),y(t,i),m&&m.m(t,null),y(t,o),p&&p.m(t,null),y(t,a),g&&g.m(t,null),y(t,l),v&&v.m(t,null),y(t,s),b&&b.m(t,null),y(t,u),w&&w.m(t,null),f=!0},p(_,x){_[3]==="consent"?h?h.p(_,x):(h=F1(),h.c(),h.m(t,n)):h&&(h.d(1),h=null),_[3]==="start1"?c?(c.p(_,x),x[0]&8&&R(c,1)):(c=B1(_),c.c(),R(c,1),c.m(t,r)):c&&(He(),H(c,1,1,()=>{c=null}),We()),_[3]==="start2"?d?d.p(_,x):(d=O1(_),d.c(),d.m(t,i)):d&&(d.d(1),d=null),_[3]==="start3"?m?(m.p(_,x),x[0]&8&&R(m,1)):(m=q1(_),m.c(),R(m,1),m.m(t,o)):m&&(He(),H(m,1,1,()=>{m=null}),We()),_[3]==="demo"?p?p.p(_,x):(p=G1(_),p.c(),p.m(t,a)):p&&(p.d(1),p=null),_[3]==="tests"?g?(g.p(_,x),x[0]&8&&R(g,1)):(g=U1(_),g.c(),R(g,1),g.m(t,l)):g&&(He(),H(g,1,1,()=>{g=null}),We()),_[3]==="feedback"?v?v.p(_,x):(v=V1(_),v.c(),v.m(t,s)):v&&(v.d(1),v=null),_[3]==="done"?b?b.p(_,x):(b=Y1(),b.c(),b.m(t,u)):b&&(b.d(1),b=null),!_[14]&&_[3]!=="done"&&!_[5]?w?w.p(_,x):(w=j1(_),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},i(_){f||(R(c),R(m),R(g),f=!0)},o(_){H(c),H(m),H(g),f=!1},d(_){_&&B(t),h&&h.d(),c&&c.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),v&&v.d(),b&&b.d(),w&&w.d()}}}const X1="8beat_backbeat_120bpm",Ia=!1,_$="/store",Z1=120,Kr=.1,v$="C11VVLWN",w$="COYRYK1U",M$="CILRS92A",K1=4;let lv=8;function x$(e,t,n){let r;console.log(X1,Z1,Kr);let i=rn(window,"PROLIFIC_PID"),o=rn(window,"STUDY_ID"),a=rn(window,"SESSION_ID"),l=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const s=(U=0)=>{if(U===0)return l;const D=Te([l]),k=D.filter(be=>be.instrument==="hihat")[0],z=D.filter(be=>be.instrument==="snare")[0],X=D.filter(be=>be.instrument==="bass")[0];X.times[1]=X.timesOriginal[1]+U,k.times[4]=k.timesOriginal[4]+U;for(const be of[6,7,8])k.times[be-1]=k.timesOriginal[be-1]+U;return z.times[1]=z.timesOriginal[1]+U,D};let u=["audio","waveform","color"].map(U=>({encoding:U})),f="consent",h=0,c,d=!1,m=0,p=0,g="",v="",b=0,w=0,_="",x=0,M,S={},T=[],I,L,C=!1,G=!1,Y=!1,N="",$=600,V=[],le=0;const ie=[];Br(()=>{document.querySelector("html").addEventListener("keyup",ae)});const se=()=>{L=new je({ratio:{firstVal:Kr,operation:"multiply",down:1,up:1,stepSizeDown:1.25,stepSizeUp:1.25*1.25*1.25,limits:[0,Kr],direction:-1,reversalLimit:12,verbosity:0}}),L.init()};function Z(){f==="consent"?n(3,f="start1"):f==="start1"?n(3,f="start2"):f==="start2"?n(3,f="start3"):f==="start3"?(n(2,u=mc(u)),n(3,f="demo")):f==="demo"?g==""||v==""?alert("please fill the form first"):(n(3,f="tests"),n(4,h=0)):f==="tests"?h>=u.length?n(3,f="feedback"):(n(16,N=u[h].encoding),m===0?(n(5,d=!0),ge()):(Q(),n(6,m=0))):f==="feedback"&&(W(),n(3,f="done"))}function Q(){se(),n(12,x=0),M=0,I=0,n(13,C=!0),V=[],T=[],c=new Date,K()}function K(){console.log("Starting trial "+x),S={},n(14,G=!0),ne()}function ne(){let D=L.getLast("ratio");D=Math.random()<.5?D:-D,S.deviation=D;const k=Pe(D);n(22,xe=k.noteTimes),k.noteTimesSeparate,n(17,F=k.sampleRate),n(18,he=k.renderedAudio),console.log("generated pattern"),n(15,Y=!0),window.setTimeout(()=>{n(15,Y=!1),S.startTime=new Date},1e3)}function ge(){console.log("show training");let U=(Math.random()*.5+.5)*Kr;U=Math.random()<.5?U:-U,p=U,console.log("training severity",U);const D=Pe(U);n(22,xe=D.noteTimes),D.noteTimesSeparate,n(17,F=D.sampleRate),n(18,he=D.renderedAudio),console.log("generated training",D),n(12,x++,x)}function pe(U){if(!G)return;n(14,G=!1),S.decisionChoice=U,S.errorCode=0,S.timeTaken=(new Date-S.startTime)/1e3;const D=I;(S.decisionChoice==0&&S.deviation<0||S.decisionChoice==1&&S.deviation>0)&&S.errorCode==0&&I++,S.errorCode==0&&(L.next(D!=I),T[T.length]=S),S.errorCode==0&&M++,n(12,x++,x),L.reversalLimitReached("ratio")?re():K()}function de(U){const D=document.querySelectorAll("#trainingFeedback")[0];U==="early"&&p<0||U==="late"&&p>0?(n(6,m++,m),m>=lv?n(5,d=!1):D.innerHTML='<span class="correct">correct!</span>'):(n(6,m=0),D.innerHTML='<span class="wrong">wrong!</span>'),console.log(D),ge()}function re(){n(13,C=!1),n(14,G=!1),V=[],le=L.getFinalVal("ratio");for(let D=0;D<T.length;D++)V[D]=T[D].deviation;console.log(V);const U=new Date;ie.push({encoding:N,final:le,data:V,score:I,testNumber:h,trialCount:x+1,trials:T,validTrialCount:M+1,testTimeSeconds:(U-c)/1e3}),n(4,h++,h)}function ae(U){if(!Y)switch(U.key){case"ArrowLeft":G&&pe(0),d&&de("early");break;case"ArrowRight":G&&pe(1),d&&de("late");break;case"PageDown":!G&&f!=="done"&&Z()}}function W(){const U={studyName:X1,studyStep:f,demographics:{partID:i,studyID:o,sessionID:a,partEduation:g,partMusicInstr:v,partMusicInstrYears:b,partVisExperienceYears:w,partFeedback:_,visWidth:$},date:new Date().toISOString(),tests:ie};console.log("saving data",U);const D=JSON.stringify(U,void 0,2);fetch(_$,{method:"POST",headers:{"Content-Type":"application/json"},body:D}).then(k=>{console.log("Data saved:",k)})}let ee=Lo(Z1);const oe=K1*ee;let F,he=null,te=null,ve=null,ye=null,xe=[],me=[],Ye=[];(async()=>{n(1,l=await Promise.all(l.map(async z=>({...z,times:z.beats.map(X=>ee*(X-1)),timesOriginal:z.beats.map(X=>ee*(X-1)),audioBuffer:await ms(z.sample)}))));const U=Pe(0),D=Pe(-Kr),k=Pe(Kr);U.noteTimes,n(23,me=D.noteTimes),n(24,Ye=k.noteTimes),n(19,te=U.renderedAudio),n(20,ve=D.renderedAudio),n(21,ye=k.renderedAudio),n(17,F=l[0].audioBuffer.sampleRate)})();const Te=U=>{const D=U[0].map(k=>({...k,beats:[...k.beats],times:[...k.times],timesOriginal:[...k.timesOriginal]}));for(let k=1;k<U.length;k++){const z=U[k];for(const X of z){const be=D.filter(Le=>Le.instrument===X.instrument)[0];be.beats=[...be.beats,...X.beats.map(Le=>Le+k*K1)],be.times=[...be.times,...X.times.map(Le=>Le+k*oe)],be.timesOriginal=[...be.timesOriginal,...X.timesOriginal.map(Le=>Le+k*oe)]}}return D},Pe=U=>{if(!l[0].audioBuffer)return;const k=[s(U)],z=Te(k),X=z.map(Se=>Se.times).flat().sort(),be=z.map(Se=>Se.times.map(Tn=>({time:Tn,instr:Se.instrument}))).flat(1/0).sort((Se,Tn)=>{Se.time-Tn.time}),Le=z[0].audioBuffer.sampleRate,j=So(z,oe*k.length+.1,Le);return{noteTimes:X,noteTimesSeparate:be,sampleRate:Le,renderedAudio:j}},st=()=>n(0,$*=1.05),we=()=>n(0,$*=.95);function Be(){g=Ol(this),n(7,g)}function bt(){v=this.value,n(8,v)}function qe(){b=$t(this.value),n(9,b)}function q(){w=$t(this.value),n(10,w)}function _e(){_=this.value,n(11,_)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(25,r=$/6)},[$,l,u,f,h,d,m,g,v,b,w,_,x,C,G,Y,N,F,he,te,ve,ye,xe,me,Ye,r,Z,st,we,Be,bt,qe,q,_e]}class P$ extends nt{constructor(t){super(),tt(this,t,x$,y$,et,{},null,[-1,-1,-1])}}function J1(e){let t,n,r,i,o,a,l,s,u,f,h;return{c(){t=P("div"),n=P("p"),n.textContent=`In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.`,r=E(),i=P("p"),i.innerHTML=`For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.`,o=E(),a=P("p"),a.innerHTML=`By clicking <i>next step</i> you consent to participating in this study and
        data collection.`,l=E(),s=P("p"),s.innerHTML=`If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.`,u=E(),f=P("a"),h=P("button"),h.textContent="I do NOT consent and will not participate",A(n,"class","svelte-9uo0u8"),A(i,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"href","https://app.prolific.com/submissions/complete?cc="+D$)},m(c,d){O(c,t,d),y(t,n),y(t,r),y(t,i),y(t,o),y(t,a),y(t,l),y(t,s),y(t,u),y(t,f),y(f,h)},p:Ce,d(c){c&&B(t)}}}function Q1(e){let t,n,r,i,o,a,l,s,u,f;return i=new Kt({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=P("div"),n=P("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=E(),ce(i.$$.fragment),o=E(),a=P("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",l=E(),s=P("a"),u=P("button"),u.textContent="I can NOT hear the audio and will NOT participate in this study",A(n,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(s,"href","https://app.prolific.com/submissions/complete?cc="+N$)},m(h,c){O(h,t,c),y(t,n),y(t,r),ue(i,t,null),y(t,o),y(t,a),y(t,l),y(t,s),y(s,u),f=!0},p(h,c){const d={};c[0]&262144&&(d.audioData=h[18]),c[0]&65536&&(d.sampleRate=h[16]),i.$set(d)},i(h){f||(R(i.$$.fragment,h),f=!0)},o(h){H(i.$$.fragment,h),f=!1},d(h){h&&B(t),fe(i)}}}function e0(e){let t,n,r,i,o,a,l,s,u,f,h,c,d,m,p,g,v,b;return{c(){t=P("div"),n=P("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=E(),i=P("div"),o=P("button"),o.textContent="+",a=E(),l=P("button"),l.textContent="-",s=E(),u=fi("svg"),f=fi("rect"),p=E(),g=P("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,A(n,"class","svelte-9uo0u8"),A(f,"width",h=e[0]*.52),A(f,"height",c=e[24]*2),A(f,"fill","#ccc"),A(f,"rx","8"),A(u,"width",d=e[0]*.52+"px"),A(u,"height",m=e[24]*2+"px"),A(g,"class","svelte-9uo0u8")},m(w,_){O(w,t,_),y(t,n),y(t,r),y(t,i),y(i,o),y(i,a),y(i,l),y(t,s),y(t,u),y(u,f),y(t,p),y(t,g),v||(b=[Re(o,"click",e[26]),Re(l,"click",e[27])],v=!0)},p(w,_){_[0]&1&&h!==(h=w[0]*.52)&&A(f,"width",h),_[0]&16777216&&c!==(c=w[24]*2)&&A(f,"height",c),_[0]&1&&d!==(d=w[0]*.52+"px")&&A(u,"width",d),_[0]&16777216&&m!==(m=w[24]*2+"px")&&A(u,"height",m)},d(w){w&&B(t),v=!1,It(b)}}}function t0(e){let t,n,r,i,o,a,l,s,u,f,h;return f=new Kt({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=P("div"),n=P("div"),n.innerHTML=`<p class="svelte-9uo0u8">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-9uo0u8">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-9uo0u8">This study uses a simple drum pattern that you can see and listen to
          below. Notes after the mistake will also be affected and be
          early/late, such that only one time interval is shorter/longer than
          supposed.</p>`,r=J(`
      This is what the pattern looks like in sheet music:
      `),i=P("div"),o=P("img"),s=J(`
      This is what the full, correctly played pattern sounds like:
      `),u=P("div"),ce(f.$$.fragment),A(o,"width",a=e[0]+"px"),Rf(o.src,l="8note-pattern-hihat.png")||A(o,"src",l),A(o,"alt","drum pattern as sheet music")},m(c,d){O(c,t,d),y(t,n),y(t,r),y(t,i),y(i,o),y(t,s),y(t,u),ue(f,u,null),h=!0},p(c,d){(!h||d[0]&1&&a!==(a=c[0]+"px"))&&A(o,"width",a);const m={};d[0]&262144&&(m.audioData=c[18]),d[0]&65536&&(m.sampleRate=c[16]),f.$set(m)},i(c){h||(R(f.$$.fragment,c),h=!0)},o(c){H(f.$$.fragment,c),h=!1},d(c){c&&B(t),fe(f)}}}function n0(e){let t,n,r,i,o,a,l,s,u,f,h,c,d,m,p,g,v,b,w,_,x,M,S,T,I,L,C,G,Y;return{c(){t=P("div"),n=P("p"),n.textContent="Please answer the following questions about yourself:",r=E(),i=P("label"),o=P("span"),o.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,a=E(),l=P("select"),s=P("option"),s.textContent="none",u=P("option"),u.textContent="high school",f=P("option"),f.textContent="bachelor",h=P("option"),h.textContent="master",c=P("option"),c.textContent="phd",d=E(),m=P("label"),p=P("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=E(),v=P("input"),b=E(),w=P("label"),_=P("span"),_.textContent="For how many years do you roughly play it/them?",x=E(),M=P("input"),S=E(),T=P("label"),I=P("span"),I.textContent=`How many years of experience do you have with information
          visualization?`,L=E(),C=P("input"),A(n,"class","svelte-9uo0u8"),s.__value="none",ke(s,s.__value),u.__value="highs",ke(u,u.__value),f.__value="bachelor",ke(f,f.__value),h.__value="master",ke(h,h.__value),c.__value="phd",ke(c,c.__value),e[6]===void 0&&Ar(()=>e[28].call(l)),A(i,"class","svelte-9uo0u8"),A(v,"type","text"),A(v,"placeholder","free text"),A(m,"class","svelte-9uo0u8"),A(M,"type","number"),A(M,"min","0"),A(M,"step","1"),A(w,"class","svelte-9uo0u8"),A(C,"type","number"),A(C,"min","0"),A(C,"step","1"),A(T,"class","svelte-9uo0u8"),A(t,"class","demo-form svelte-9uo0u8")},m(N,$){O(N,t,$),y(t,n),y(t,r),y(t,i),y(i,o),y(i,a),y(i,l),y(l,s),y(l,u),y(l,f),y(l,h),y(l,c),or(l,e[6],!0),y(t,d),y(t,m),y(m,p),y(m,g),y(m,v),ke(v,e[7]),y(t,b),y(t,w),y(w,_),y(w,x),y(w,M),ke(M,e[8]),y(t,S),y(t,T),y(T,I),y(T,L),y(T,C),ke(C,e[9]),G||(Y=[Re(l,"change",e[28]),Re(v,"input",e[29]),Re(M,"input",e[30]),Re(C,"input",e[31])],G=!0)},p(N,$){$[0]&64&&or(l,N[6]),$[0]&128&&v.value!==N[7]&&ke(v,N[7]),$[0]&256&&$t(M.value)!==N[8]&&ke(M,N[8]),$[0]&512&&$t(C.value)!==N[9]&&ke(C,N[9])},d(N){N&&B(t),G=!1,It(Y)}}}function r0(e){let t,n,r=(e[12]||e[4])&&i0(e);return{c(){r&&r.c(),t=jn()},m(i,o){r&&r.m(i,o),O(i,t,o),n=!0},p(i,o){i[12]||i[4]?r?(r.p(i,o),o[0]&4112&&R(r,1)):(r=i0(i),r.c(),R(r,1),r.m(t.parentNode,t)):r&&(He(),H(r,1,1,()=>{r=null}),We())},i(i){n||(R(r),n=!0)},o(i){H(r),n=!1},d(i){i&&B(t),r&&r.d(i)}}}function i0(e){let t,n,r=e[3]+1+"",i,o,a=e[1].length+"",l,s,u,f,h,c,d,m,p;function g(M,S){return M[4]?A$:S$}let v=g(e),b=v(e);const w=[E$,k$],_=[];function x(M,S){return M[15]==="audio"?0:M[14]===!1?1:-1}return~(c=x(e))&&(d=_[c]=w[c](e)),{c(){t=P("p"),n=J("Test number "),i=J(r),o=J(" of "),l=J(a),s=E(),b.c(),u=E(),f=P("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,h=E(),d&&d.c(),m=jn(),A(t,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8")},m(M,S){O(M,t,S),y(t,n),y(t,i),y(t,o),y(t,l),O(M,s,S),b.m(M,S),O(M,u,S),O(M,f,S),O(M,h,S),~c&&_[c].m(M,S),O(M,m,S),p=!0},p(M,S){(!p||S[0]&8)&&r!==(r=M[3]+1+"")&&Fe(i,r),(!p||S[0]&2)&&a!==(a=M[1].length+"")&&Fe(l,a),v===(v=g(M))&&b?b.p(M,S):(b.d(1),b=v(M),b&&(b.c(),b.m(u.parentNode,u)));let T=c;c=x(M),c===T?~c&&_[c].p(M,S):(d&&(He(),H(_[T],1,1,()=>{_[T]=null}),We()),~c?(d=_[c],d?d.p(M,S):(d=_[c]=w[c](M),d.c()),R(d,1),d.m(m.parentNode,m)):d=null)},i(M){p||(R(d),p=!0)},o(M){H(d),p=!1},d(M){M&&(B(t),B(s),B(u),B(f),B(h),B(m)),b.d(M),~c&&_[c].d(M)}}}function S$(e){let t,n,r=e[11]+1+"",i;return{c(){t=P("p"),n=J("Trial number "),i=J(r),A(t,"class","svelte-9uo0u8")},m(o,a){O(o,t,a),y(t,n),y(t,i)},p(o,a){a[0]&2048&&r!==(r=o[11]+1+"")&&Fe(i,r)},d(o){o&&B(t)}}}function A$(e){let t,n,r,i,o,a,l,s,u,f,h,c;return{c(){t=P("p"),n=P("b"),n.textContent="Training:",r=J(" the training will end when you got "),i=J(sv),o=J(` correct
          in a streak.`),a=P("br"),l=J(`
          Current streak: `),s=J(e[5]),u=J("."),f=P("br"),h=E(),c=P("b"),c.innerHTML='<span id="trainingFeedback"></span>',A(t,"class","training svelte-9uo0u8")},m(d,m){O(d,t,m),y(t,n),y(t,r),y(t,i),y(t,o),y(t,a),y(t,l),y(t,s),y(t,u),y(t,f),y(t,h),y(t,c)},p(d,m){m[0]&32&&Fe(s,d[5])},d(d){d&&B(t)}}}function k$(e){let t,n,r,i=(e[15]==="waveform"||La)&&o0(e),o=(e[15]==="color"||La)&&a0(e);return{c(){i&&i.c(),t=E(),o&&o.c(),n=jn()},m(a,l){i&&i.m(a,l),O(a,t,l),o&&o.m(a,l),O(a,n,l),r=!0},p(a,l){a[15]==="waveform"||La?i?(i.p(a,l),l[0]&32768&&R(i,1)):(i=o0(a),i.c(),R(i,1),i.m(t.parentNode,t)):i&&(He(),H(i,1,1,()=>{i=null}),We()),a[15]==="color"||La?o?(o.p(a,l),l[0]&32768&&R(o,1)):(o=a0(a),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(He(),H(o,1,1,()=>{o=null}),We())},i(a){r||(R(i),R(o),r=!0)},o(a){H(i),H(o),r=!1},d(a){a&&(B(t),B(n)),i&&i.d(a),o&&o.d(a)}}}function E$(e){let t,n,r,i,o,a,l,s,u,f,h,c,d;return i=new Kt({props:{audioData:e[19],sampleRate:e[16]}}),a=new Kt({props:{audioData:e[20],sampleRate:e[16]}}),c=new $s({props:{audioData:e[17],sampleRate:e[16],currentTrialNumber:e[11]}}),{c(){t=P("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=E(),r=P("div"),ce(i.$$.fragment),o=E(),ce(a.$$.fragment),l=E(),s=P("div"),s.textContent="Example for early",u=E(),f=P("div"),f.textContent="Example for late",h=E(),ce(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(m,p){O(m,t,p),O(m,n,p),O(m,r,p),ue(i,r,null),y(r,o),ue(a,r,null),y(r,l),y(r,s),y(r,u),y(r,f),O(m,h,p),ue(c,m,p),d=!0},p(m,p){const g={};p[0]&524288&&(g.audioData=m[19]),p[0]&65536&&(g.sampleRate=m[16]),i.$set(g);const v={};p[0]&1048576&&(v.audioData=m[20]),p[0]&65536&&(v.sampleRate=m[16]),a.$set(v);const b={};p[0]&131072&&(b.audioData=m[17]),p[0]&65536&&(b.sampleRate=m[16]),p[0]&2048&&(b.currentTrialNumber=m[11]),c.$set(b)},i(m){d||(R(i.$$.fragment,m),R(a.$$.fragment,m),R(c.$$.fragment,m),d=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),d=!1},d(m){m&&(B(t),B(n),B(r),B(h)),fe(i),fe(a),fe(c,m)}}}function o0(e){let t,n,r,i,o,a,l,s,u,f,h,c,d;return i=new wn({props:{audioData:e[19],width:e[0]/2,height:e[24]/2}}),a=new wn({props:{audioData:e[20],width:e[0]/2,height:e[24]/2}}),c=new wn({props:{audioData:e[17],width:e[0],height:e[24]}}),{c(){t=P("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=E(),r=P("div"),ce(i.$$.fragment),o=E(),ce(a.$$.fragment),l=E(),s=P("div"),s.textContent="Example for early",u=E(),f=P("div"),f.textContent="Example for late",h=E(),ce(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(m,p){O(m,t,p),O(m,n,p),O(m,r,p),ue(i,r,null),y(r,o),ue(a,r,null),y(r,l),y(r,s),y(r,u),y(r,f),O(m,h,p),ue(c,m,p),d=!0},p(m,p){const g={};p[0]&524288&&(g.audioData=m[19]),p[0]&1&&(g.width=m[0]/2),p[0]&16777216&&(g.height=m[24]/2),i.$set(g);const v={};p[0]&1048576&&(v.audioData=m[20]),p[0]&1&&(v.width=m[0]/2),p[0]&16777216&&(v.height=m[24]/2),a.$set(v);const b={};p[0]&131072&&(b.audioData=m[17]),p[0]&1&&(b.width=m[0]),p[0]&16777216&&(b.height=m[24]),c.$set(b)},i(m){d||(R(i.$$.fragment,m),R(a.$$.fragment,m),R(c.$$.fragment,m),d=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),d=!1},d(m){m&&(B(t),B(n),B(r),B(h)),fe(i),fe(a),fe(c,m)}}}function a0(e){let t,n,r,i,o,a,l,s,u,f,h,c,d;return i=new xn({props:{pattern:e[22],width:e[0]/2,height:e[24]*.7}}),a=new xn({props:{pattern:e[23],width:e[0]/2,height:e[24]*.7}}),c=new xn({props:{pattern:e[21],width:e[0],height:e[24]}}),{c(){t=P("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Look at the rectangle at 5, it is either
            brigher (early) or darker (late) than the others.`,n=E(),r=P("div"),ce(i.$$.fragment),o=E(),ce(a.$$.fragment),l=E(),s=P("div"),s.textContent="Example for early",u=E(),f=P("div"),f.textContent="Example for late",h=E(),ce(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(m,p){O(m,t,p),O(m,n,p),O(m,r,p),ue(i,r,null),y(r,o),ue(a,r,null),y(r,l),y(r,s),y(r,u),y(r,f),O(m,h,p),ue(c,m,p),d=!0},p(m,p){const g={};p[0]&4194304&&(g.pattern=m[22]),p[0]&1&&(g.width=m[0]/2),p[0]&16777216&&(g.height=m[24]*.7),i.$set(g);const v={};p[0]&8388608&&(v.pattern=m[23]),p[0]&1&&(v.width=m[0]/2),p[0]&16777216&&(v.height=m[24]*.7),a.$set(v);const b={};p[0]&2097152&&(b.pattern=m[21]),p[0]&1&&(b.width=m[0]),p[0]&16777216&&(b.height=m[24]),c.$set(b)},i(m){d||(R(i.$$.fragment,m),R(a.$$.fragment,m),R(c.$$.fragment,m),d=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),d=!1},d(m){m&&(B(t),B(n),B(r),B(h)),fe(i),fe(a),fe(c,m)}}}function l0(e){let t,n,r,i,o,a,l;return{c(){t=P("div"),n=J(`Almost done!
      `),r=P("p"),r.textContent="Do you have any final feedback/comments?",i=E(),o=P("textarea"),A(r,"class","svelte-9uo0u8")},m(s,u){O(s,t,u),y(t,n),y(t,r),y(t,i),y(t,o),ke(o,e[10]),a||(l=Re(o,"input",e[32]),a=!0)},p(s,u){u[0]&1024&&ke(o,s[10])},d(s){s&&B(t),a=!1,l()}}}function s0(e){let t,n,r,i;return{c(){t=P("div"),t.textContent="Thanks for participating!",n=E(),r=P("a"),i=P("b"),i.textContent="Click here to get your compensation",A(r,"href","https://app.prolific.com/submissions/complete?cc="+$$)},m(o,a){O(o,t,a),O(o,n,a),O(o,r,a),y(r,i)},p:Ce,d(o){o&&(B(t),B(n),B(r))}}}function u0(e){let t,n,r;return{c(){t=P("button"),t.textContent="next step",A(t,"class","next-btn svelte-9uo0u8")},m(i,o){O(i,t,o),n||(r=Re(t,"click",e[25]),n=!0)},p:Ce,d(i){i&&B(t),n=!1,r()}}}function C$(e){let t,n,r,i,o,a,l,s,u,f,h=e[2]==="consent"&&J1(),c=e[2]==="start1"&&Q1(e),d=e[2]==="start2"&&e0(e),m=e[2]==="start3"&&t0(e),p=e[2]==="demo"&&n0(e),g=e[2]==="tests"&&r0(e),v=e[2]==="feedback"&&l0(e),b=e[2]==="done"&&s0(),w=!e[13]&&e[2]!=="done"&&!e[4]&&u0(e);return{c(){t=P("main"),h&&h.c(),n=E(),c&&c.c(),r=E(),d&&d.c(),i=E(),m&&m.c(),o=E(),p&&p.c(),a=E(),g&&g.c(),l=E(),v&&v.c(),s=E(),b&&b.c(),u=E(),w&&w.c(),A(t,"class","svelte-9uo0u8")},m(_,x){O(_,t,x),h&&h.m(t,null),y(t,n),c&&c.m(t,null),y(t,r),d&&d.m(t,null),y(t,i),m&&m.m(t,null),y(t,o),p&&p.m(t,null),y(t,a),g&&g.m(t,null),y(t,l),v&&v.m(t,null),y(t,s),b&&b.m(t,null),y(t,u),w&&w.m(t,null),f=!0},p(_,x){_[2]==="consent"?h?h.p(_,x):(h=J1(),h.c(),h.m(t,n)):h&&(h.d(1),h=null),_[2]==="start1"?c?(c.p(_,x),x[0]&4&&R(c,1)):(c=Q1(_),c.c(),R(c,1),c.m(t,r)):c&&(He(),H(c,1,1,()=>{c=null}),We()),_[2]==="start2"?d?d.p(_,x):(d=e0(_),d.c(),d.m(t,i)):d&&(d.d(1),d=null),_[2]==="start3"?m?(m.p(_,x),x[0]&4&&R(m,1)):(m=t0(_),m.c(),R(m,1),m.m(t,o)):m&&(He(),H(m,1,1,()=>{m=null}),We()),_[2]==="demo"?p?p.p(_,x):(p=n0(_),p.c(),p.m(t,a)):p&&(p.d(1),p=null),_[2]==="tests"?g?(g.p(_,x),x[0]&4&&R(g,1)):(g=r0(_),g.c(),R(g,1),g.m(t,l)):g&&(He(),H(g,1,1,()=>{g=null}),We()),_[2]==="feedback"?v?v.p(_,x):(v=l0(_),v.c(),v.m(t,s)):v&&(v.d(1),v=null),_[2]==="done"?b?b.p(_,x):(b=s0(),b.c(),b.m(t,u)):b&&(b.d(1),b=null),!_[13]&&_[2]!=="done"&&!_[4]?w?w.p(_,x):(w=u0(_),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},i(_){f||(R(c),R(m),R(g),f=!0)},o(_){H(c),H(m),H(g),f=!1},d(_){_&&B(t),h&&h.d(),c&&c.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),v&&v.d(),b&&b.d(),w&&w.d()}}}const f0="8beat_hihat_8ths_120bpm",La=!1,T$="/store",c0=120,Jr=.1,$$="C11VVLWN",D$="COYRYK1U",N$="CILRS92A",h0=4;let sv=8;function I$(e,t,n){let r;console.log(f0,c0,Jr);let i=rn(window,"PROLIFIC_PID"),o=rn(window,"STUDY_ID"),a=rn(window,"SESSION_ID"),l=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]}];const s=(U=0)=>{if(U===0)return l;const D=Te([l]),k=D.filter(z=>z.instrument==="hihat")[0];for(const z of[5,6,7,8])k.times[z-1]=k.timesOriginal[z-1]+U;return D};let u=["audio","waveform","color"].map(U=>({encoding:U})),f="consent",h=0,c,d=!1,m=0,p=0,g="",v="",b=0,w=0,_="",x=0,M,S={},T=[],I,L,C=!1,G=!1,Y=!1,N="",$=600,V=[],le=0;const ie=[];Br(()=>{document.querySelector("html").addEventListener("keyup",ae)});const se=()=>{L=new je({ratio:{firstVal:Jr,operation:"multiply",down:1,up:1,stepSizeDown:1.25,stepSizeUp:1.25*1.25*1.25,limits:[0,Jr],direction:-1,reversalLimit:12,verbosity:0}}),L.init()};function Z(){f==="consent"?n(2,f="start1"):f==="start1"?n(2,f="start2"):f==="start2"?n(2,f="start3"):f==="start3"?(n(1,u=mc(u)),n(2,f="demo")):f==="demo"?g==""||v==""?alert("please fill the form first"):(n(2,f="tests"),n(3,h=0)):f==="tests"?h>=u.length?n(2,f="feedback"):(n(15,N=u[h].encoding),m===0?(n(4,d=!0),ge()):(Q(),n(5,m=0))):f==="feedback"&&(W(),n(2,f="done"))}function Q(){se(),n(11,x=0),M=0,I=0,n(12,C=!0),V=[],T=[],c=new Date,K()}function K(){console.log("Starting trial "+x),S={},n(13,G=!0),ne()}function ne(){let D=L.getLast("ratio");D=Math.random()<.5?D:-D,S.deviation=D;const k=Pe(D);n(21,xe=k.noteTimes),k.noteTimesSeparate,n(16,F=k.sampleRate),n(17,he=k.renderedAudio),console.log("generated pattern"),n(14,Y=!0),window.setTimeout(()=>{n(14,Y=!1),S.startTime=new Date},1e3)}function ge(){console.log("show training");let U=(Math.random()*.5+.5)*Jr;U=Math.random()<.5?U:-U,p=U,console.log("training severity",U);const D=Pe(U);n(21,xe=D.noteTimes),D.noteTimesSeparate,n(16,F=D.sampleRate),n(17,he=D.renderedAudio),console.log("generated training",D),n(11,x++,x)}function pe(U){if(!G)return;n(13,G=!1),S.decisionChoice=U,S.errorCode=0,S.timeTaken=(new Date-S.startTime)/1e3;const D=I;(S.decisionChoice==0&&S.deviation<0||S.decisionChoice==1&&S.deviation>0)&&S.errorCode==0&&I++,S.errorCode==0&&(L.next(D!=I),T[T.length]=S),S.errorCode==0&&M++,n(11,x++,x),L.reversalLimitReached("ratio")?re():K()}function de(U){const D=document.querySelectorAll("#trainingFeedback")[0];U==="early"&&p<0||U==="late"&&p>0?(n(5,m++,m),m>=sv?n(4,d=!1):D.innerHTML='<span class="correct">correct!</span>'):(n(5,m=0),D.innerHTML='<span class="wrong">wrong!</span>'),console.log(D),ge()}function re(){n(12,C=!1),n(13,G=!1),V=[],le=L.getFinalVal("ratio");for(let D=0;D<T.length;D++)V[D]=T[D].deviation;console.log(V);const U=new Date;ie.push({encoding:N,final:le,data:V,score:I,testNumber:h,trialCount:x+1,trials:T,validTrialCount:M+1,testTimeSeconds:(U-c)/1e3}),n(3,h++,h)}function ae(U){if(!Y)switch(U.key){case"ArrowLeft":G&&pe(0),d&&de("early");break;case"ArrowRight":G&&pe(1),d&&de("late");break;case"PageDown":!G&&f!=="done"&&Z()}}function W(){const U={studyName:f0,studyStep:f,demographics:{partID:i,studyID:o,sessionID:a,partEduation:g,partMusicInstr:v,partMusicInstrYears:b,partVisExperienceYears:w,partFeedback:_,visWidth:$},date:new Date().toISOString(),tests:ie};console.log("saving data",U);const D=JSON.stringify(U,void 0,2);fetch(T$,{method:"POST",headers:{"Content-Type":"application/json"},body:D}).then(k=>{console.log("Data saved:",k)})}let ee=Lo(c0);const oe=h0*ee;let F,he=null,te=null,ve=null,ye=null,xe=[],me=[],Ye=[];(async()=>{l=await Promise.all(l.map(async z=>({...z,times:z.beats.map(X=>ee*(X-1)),timesOriginal:z.beats.map(X=>ee*(X-1)),audioBuffer:await ms(z.sample)})));const U=Pe(0),D=Pe(-Jr),k=Pe(Jr);U.noteTimes,n(22,me=D.noteTimes),n(23,Ye=k.noteTimes),n(18,te=U.renderedAudio),n(19,ve=D.renderedAudio),n(20,ye=k.renderedAudio),n(16,F=l[0].audioBuffer.sampleRate)})();const Te=U=>{const D=U[0].map(k=>({...k,beats:[...k.beats],times:[...k.times],timesOriginal:[...k.timesOriginal]}));for(let k=1;k<U.length;k++){const z=U[k];for(const X of z){const be=D.filter(Le=>Le.instrument===X.instrument)[0];be.beats=[...be.beats,...X.beats.map(Le=>Le+k*h0)],be.times=[...be.times,...X.times.map(Le=>Le+k*oe)],be.timesOriginal=[...be.timesOriginal,...X.timesOriginal.map(Le=>Le+k*oe)]}}return D},Pe=U=>{if(!l[0].audioBuffer)return;const k=[s(U)],z=Te(k),X=z.map(Se=>Se.times).flat().sort(),be=z.map(Se=>Se.times.map(Tn=>({time:Tn,instr:Se.instrument}))).flat(1/0).sort((Se,Tn)=>{Se.time-Tn.time}),Le=z[0].audioBuffer.sampleRate,j=So(z,oe*k.length+.1,Le);return{noteTimes:X,noteTimesSeparate:be,sampleRate:Le,renderedAudio:j}},st=()=>n(0,$*=1.05),we=()=>n(0,$*=.95);function Be(){g=Ol(this),n(6,g)}function bt(){v=this.value,n(7,v)}function qe(){b=$t(this.value),n(8,b)}function q(){w=$t(this.value),n(9,w)}function _e(){_=this.value,n(10,_)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(24,r=$/6)},[$,u,f,h,d,m,g,v,b,w,_,x,C,G,Y,N,F,he,te,ve,ye,xe,me,Ye,r,Z,st,we,Be,bt,qe,q,_e]}class L$ extends nt{constructor(t){super(),tt(this,t,I$,C$,et,{},null,[-1,-1,-1])}}function d0(e){let t,n,r,i,o,a,l,s,u,f,h;return{c(){t=P("div"),n=P("p"),n.textContent=`In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.`,r=E(),i=P("p"),i.innerHTML=`For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.`,o=E(),a=P("p"),a.innerHTML=`By clicking <i>next step</i> you consent to participating in this study and
        data collection.`,l=E(),s=P("p"),s.innerHTML=`If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.`,u=E(),f=P("a"),h=P("button"),h.textContent="I do NOT consent and will not participate",A(n,"class","svelte-9uo0u8"),A(i,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"href","https://app.prolific.com/submissions/complete?cc="+z$)},m(c,d){O(c,t,d),y(t,n),y(t,r),y(t,i),y(t,o),y(t,a),y(t,l),y(t,s),y(t,u),y(t,f),y(f,h)},p:Ce,d(c){c&&B(t)}}}function m0(e){let t,n,r,i,o,a,l,s,u,f;return i=new Kt({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=P("div"),n=P("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=E(),ce(i.$$.fragment),o=E(),a=P("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",l=E(),s=P("a"),u=P("button"),u.textContent="I can NOT hear the audio and will NOT participate in this study",A(n,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(s,"href","https://app.prolific.com/submissions/complete?cc="+H$)},m(h,c){O(h,t,c),y(t,n),y(t,r),ue(i,t,null),y(t,o),y(t,a),y(t,l),y(t,s),y(s,u),f=!0},p(h,c){const d={};c[0]&262144&&(d.audioData=h[18]),c[0]&65536&&(d.sampleRate=h[16]),i.$set(d)},i(h){f||(R(i.$$.fragment,h),f=!0)},o(h){H(i.$$.fragment,h),f=!1},d(h){h&&B(t),fe(i)}}}function p0(e){let t,n,r,i,o,a,l,s,u,f,h,c,d,m,p,g,v,b;return{c(){t=P("div"),n=P("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=E(),i=P("div"),o=P("button"),o.textContent="+",a=E(),l=P("button"),l.textContent="-",s=E(),u=fi("svg"),f=fi("rect"),p=E(),g=P("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,A(n,"class","svelte-9uo0u8"),A(f,"width",h=e[0]*.52),A(f,"height",c=e[24]*2),A(f,"fill","#ccc"),A(f,"rx","8"),A(u,"width",d=e[0]*.52+"px"),A(u,"height",m=e[24]*2+"px"),A(g,"class","svelte-9uo0u8")},m(w,_){O(w,t,_),y(t,n),y(t,r),y(t,i),y(i,o),y(i,a),y(i,l),y(t,s),y(t,u),y(u,f),y(t,p),y(t,g),v||(b=[Re(o,"click",e[26]),Re(l,"click",e[27])],v=!0)},p(w,_){_[0]&1&&h!==(h=w[0]*.52)&&A(f,"width",h),_[0]&16777216&&c!==(c=w[24]*2)&&A(f,"height",c),_[0]&1&&d!==(d=w[0]*.52+"px")&&A(u,"width",d),_[0]&16777216&&m!==(m=w[24]*2+"px")&&A(u,"height",m)},d(w){w&&B(t),v=!1,It(b)}}}function b0(e){let t,n,r,i,o,a,l,s,u,f,h;return f=new Kt({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=P("div"),n=P("div"),n.innerHTML=`<p class="svelte-9uo0u8">We want to know, how small of a timing error is still clear to detect
          as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-9uo0u8">This study uses a simple drum pattern that you can see and listen to
          below. Notes after the mistake will also be affected and be
          early/late, such that only one time interval is shorter/longer than
          supposed.</p>`,r=J(`
      This is what the pattern looks like in sheet music:
      `),i=P("div"),o=P("img"),s=J(`
      This is what the full, correctly played pattern sounds like:
      `),u=P("div"),ce(f.$$.fragment),A(o,"width",a=e[0]+"px"),Rf(o.src,l="8note-pattern-hihat.png")||A(o,"src",l),A(o,"alt","drum pattern as sheet music")},m(c,d){O(c,t,d),y(t,n),y(t,r),y(t,i),y(i,o),y(t,s),y(t,u),ue(f,u,null),h=!0},p(c,d){(!h||d[0]&1&&a!==(a=c[0]+"px"))&&A(o,"width",a);const m={};d[0]&262144&&(m.audioData=c[18]),d[0]&65536&&(m.sampleRate=c[16]),f.$set(m)},i(c){h||(R(f.$$.fragment,c),h=!0)},o(c){H(f.$$.fragment,c),h=!1},d(c){c&&B(t),fe(f)}}}function g0(e){let t,n,r,i,o,a,l,s,u,f,h,c,d,m,p,g,v,b,w,_,x,M,S,T,I,L,C,G,Y;return{c(){t=P("div"),n=P("p"),n.textContent="Please answer the following questions about yourself:",r=E(),i=P("label"),o=P("span"),o.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,a=E(),l=P("select"),s=P("option"),s.textContent="none",u=P("option"),u.textContent="high school",f=P("option"),f.textContent="bachelor",h=P("option"),h.textContent="master",c=P("option"),c.textContent="phd",d=E(),m=P("label"),p=P("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=E(),v=P("input"),b=E(),w=P("label"),_=P("span"),_.textContent="For how many years do you roughly play it/them?",x=E(),M=P("input"),S=E(),T=P("label"),I=P("span"),I.textContent=`How many years of experience do you have with information
          visualization?`,L=E(),C=P("input"),A(n,"class","svelte-9uo0u8"),s.__value="none",ke(s,s.__value),u.__value="highs",ke(u,u.__value),f.__value="bachelor",ke(f,f.__value),h.__value="master",ke(h,h.__value),c.__value="phd",ke(c,c.__value),e[6]===void 0&&Ar(()=>e[28].call(l)),A(i,"class","svelte-9uo0u8"),A(v,"type","text"),A(v,"placeholder","free text"),A(m,"class","svelte-9uo0u8"),A(M,"type","number"),A(M,"min","0"),A(M,"step","1"),A(w,"class","svelte-9uo0u8"),A(C,"type","number"),A(C,"min","0"),A(C,"step","1"),A(T,"class","svelte-9uo0u8"),A(t,"class","demo-form svelte-9uo0u8")},m(N,$){O(N,t,$),y(t,n),y(t,r),y(t,i),y(i,o),y(i,a),y(i,l),y(l,s),y(l,u),y(l,f),y(l,h),y(l,c),or(l,e[6],!0),y(t,d),y(t,m),y(m,p),y(m,g),y(m,v),ke(v,e[7]),y(t,b),y(t,w),y(w,_),y(w,x),y(w,M),ke(M,e[8]),y(t,S),y(t,T),y(T,I),y(T,L),y(T,C),ke(C,e[9]),G||(Y=[Re(l,"change",e[28]),Re(v,"input",e[29]),Re(M,"input",e[30]),Re(C,"input",e[31])],G=!0)},p(N,$){$[0]&64&&or(l,N[6]),$[0]&128&&v.value!==N[7]&&ke(v,N[7]),$[0]&256&&$t(M.value)!==N[8]&&ke(M,N[8]),$[0]&512&&$t(C.value)!==N[9]&&ke(C,N[9])},d(N){N&&B(t),G=!1,It(Y)}}}function y0(e){let t,n,r=(e[12]||e[4])&&_0(e);return{c(){r&&r.c(),t=jn()},m(i,o){r&&r.m(i,o),O(i,t,o),n=!0},p(i,o){i[12]||i[4]?r?(r.p(i,o),o[0]&4112&&R(r,1)):(r=_0(i),r.c(),R(r,1),r.m(t.parentNode,t)):r&&(He(),H(r,1,1,()=>{r=null}),We())},i(i){n||(R(r),n=!0)},o(i){H(r),n=!1},d(i){i&&B(t),r&&r.d(i)}}}function _0(e){let t,n,r=e[3]+1+"",i,o,a=e[1].length+"",l,s,u,f,h,c,d,m,p;function g(M,S){return M[4]?F$:R$}let v=g(e),b=v(e);const w=[O$,B$],_=[];function x(M,S){return M[15]==="audio"?0:M[14]===!1?1:-1}return~(c=x(e))&&(d=_[c]=w[c](e)),{c(){t=P("p"),n=J("Test number "),i=J(r),o=J(" of "),l=J(a),s=E(),b.c(),u=E(),f=P("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,h=E(),d&&d.c(),m=jn(),A(t,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8")},m(M,S){O(M,t,S),y(t,n),y(t,i),y(t,o),y(t,l),O(M,s,S),b.m(M,S),O(M,u,S),O(M,f,S),O(M,h,S),~c&&_[c].m(M,S),O(M,m,S),p=!0},p(M,S){(!p||S[0]&8)&&r!==(r=M[3]+1+"")&&Fe(i,r),(!p||S[0]&2)&&a!==(a=M[1].length+"")&&Fe(l,a),v===(v=g(M))&&b?b.p(M,S):(b.d(1),b=v(M),b&&(b.c(),b.m(u.parentNode,u)));let T=c;c=x(M),c===T?~c&&_[c].p(M,S):(d&&(He(),H(_[T],1,1,()=>{_[T]=null}),We()),~c?(d=_[c],d?d.p(M,S):(d=_[c]=w[c](M),d.c()),R(d,1),d.m(m.parentNode,m)):d=null)},i(M){p||(R(d),p=!0)},o(M){H(d),p=!1},d(M){M&&(B(t),B(s),B(u),B(f),B(h),B(m)),b.d(M),~c&&_[c].d(M)}}}function R$(e){let t,n,r=e[11]+1+"",i;return{c(){t=P("p"),n=J("Trial number "),i=J(r),A(t,"class","svelte-9uo0u8")},m(o,a){O(o,t,a),y(t,n),y(t,i)},p(o,a){a[0]&2048&&r!==(r=o[11]+1+"")&&Fe(i,r)},d(o){o&&B(t)}}}function F$(e){let t,n,r,i,o,a,l,s,u,f,h,c;return{c(){t=P("p"),n=P("b"),n.textContent="Training:",r=J(" the training will end when you got "),i=J(uv),o=J(` correct
          in a streak.`),a=P("br"),l=J(`
          Current streak: `),s=J(e[5]),u=J("."),f=P("br"),h=E(),c=P("b"),c.innerHTML='<span id="trainingFeedback"></span>',A(t,"class","training svelte-9uo0u8")},m(d,m){O(d,t,m),y(t,n),y(t,r),y(t,i),y(t,o),y(t,a),y(t,l),y(t,s),y(t,u),y(t,f),y(t,h),y(t,c)},p(d,m){m[0]&32&&Fe(s,d[5])},d(d){d&&B(t)}}}function B$(e){let t,n,r,i=(e[15]==="waveform"||Ra)&&v0(e),o=(e[15]==="color"||Ra)&&w0(e);return{c(){i&&i.c(),t=E(),o&&o.c(),n=jn()},m(a,l){i&&i.m(a,l),O(a,t,l),o&&o.m(a,l),O(a,n,l),r=!0},p(a,l){a[15]==="waveform"||Ra?i?(i.p(a,l),l[0]&32768&&R(i,1)):(i=v0(a),i.c(),R(i,1),i.m(t.parentNode,t)):i&&(He(),H(i,1,1,()=>{i=null}),We()),a[15]==="color"||Ra?o?(o.p(a,l),l[0]&32768&&R(o,1)):(o=w0(a),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(He(),H(o,1,1,()=>{o=null}),We())},i(a){r||(R(i),R(o),r=!0)},o(a){H(i),H(o),r=!1},d(a){a&&(B(t),B(n)),i&&i.d(a),o&&o.d(a)}}}function O$(e){let t,n,r,i,o,a,l,s,u,f,h,c,d;return i=new Kt({props:{audioData:e[19],sampleRate:e[16]}}),a=new Kt({props:{audioData:e[20],sampleRate:e[16]}}),c=new $s({props:{audioData:e[17],sampleRate:e[16],currentTrialNumber:e[11]}}),{c(){t=P("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=E(),r=P("div"),ce(i.$$.fragment),o=E(),ce(a.$$.fragment),l=E(),s=P("div"),s.textContent="Example for early",u=E(),f=P("div"),f.textContent="Example for late",h=E(),ce(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(m,p){O(m,t,p),O(m,n,p),O(m,r,p),ue(i,r,null),y(r,o),ue(a,r,null),y(r,l),y(r,s),y(r,u),y(r,f),O(m,h,p),ue(c,m,p),d=!0},p(m,p){const g={};p[0]&524288&&(g.audioData=m[19]),p[0]&65536&&(g.sampleRate=m[16]),i.$set(g);const v={};p[0]&1048576&&(v.audioData=m[20]),p[0]&65536&&(v.sampleRate=m[16]),a.$set(v);const b={};p[0]&131072&&(b.audioData=m[17]),p[0]&65536&&(b.sampleRate=m[16]),p[0]&2048&&(b.currentTrialNumber=m[11]),c.$set(b)},i(m){d||(R(i.$$.fragment,m),R(a.$$.fragment,m),R(c.$$.fragment,m),d=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),d=!1},d(m){m&&(B(t),B(n),B(r),B(h)),fe(i),fe(a),fe(c,m)}}}function v0(e){let t,n,r,i,o,a,l,s,u,f,h,c,d;return i=new wn({props:{audioData:e[19],width:e[0]/2,height:e[24]/2}}),a=new wn({props:{audioData:e[20],width:e[0]/2,height:e[24]/2}}),c=new wn({props:{audioData:e[17],width:e[0],height:e[24]}}),{c(){t=P("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=E(),r=P("div"),ce(i.$$.fragment),o=E(),ce(a.$$.fragment),l=E(),s=P("div"),s.textContent="Example for early",u=E(),f=P("div"),f.textContent="Example for late",h=E(),ce(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(m,p){O(m,t,p),O(m,n,p),O(m,r,p),ue(i,r,null),y(r,o),ue(a,r,null),y(r,l),y(r,s),y(r,u),y(r,f),O(m,h,p),ue(c,m,p),d=!0},p(m,p){const g={};p[0]&524288&&(g.audioData=m[19]),p[0]&1&&(g.width=m[0]/2),p[0]&16777216&&(g.height=m[24]/2),i.$set(g);const v={};p[0]&1048576&&(v.audioData=m[20]),p[0]&1&&(v.width=m[0]/2),p[0]&16777216&&(v.height=m[24]/2),a.$set(v);const b={};p[0]&131072&&(b.audioData=m[17]),p[0]&1&&(b.width=m[0]),p[0]&16777216&&(b.height=m[24]),c.$set(b)},i(m){d||(R(i.$$.fragment,m),R(a.$$.fragment,m),R(c.$$.fragment,m),d=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),d=!1},d(m){m&&(B(t),B(n),B(r),B(h)),fe(i),fe(a),fe(c,m)}}}function w0(e){let t,n,r,i,o,a,l,s,u,f,h,c,d;return i=new xn({props:{pattern:e[22],width:e[0]/2,height:e[24]*.7}}),a=new xn({props:{pattern:e[23],width:e[0]/2,height:e[24]*.7}}),c=new xn({props:{pattern:e[21],width:e[0],height:e[24]}}),{c(){t=P("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Look at the rectangle at 5, it is either
            brigher (early) or darker (late) than the others.`,n=E(),r=P("div"),ce(i.$$.fragment),o=E(),ce(a.$$.fragment),l=E(),s=P("div"),s.textContent="Example for early",u=E(),f=P("div"),f.textContent="Example for late",h=E(),ce(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(s,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(m,p){O(m,t,p),O(m,n,p),O(m,r,p),ue(i,r,null),y(r,o),ue(a,r,null),y(r,l),y(r,s),y(r,u),y(r,f),O(m,h,p),ue(c,m,p),d=!0},p(m,p){const g={};p[0]&4194304&&(g.pattern=m[22]),p[0]&1&&(g.width=m[0]/2),p[0]&16777216&&(g.height=m[24]*.7),i.$set(g);const v={};p[0]&8388608&&(v.pattern=m[23]),p[0]&1&&(v.width=m[0]/2),p[0]&16777216&&(v.height=m[24]*.7),a.$set(v);const b={};p[0]&2097152&&(b.pattern=m[21]),p[0]&1&&(b.width=m[0]),p[0]&16777216&&(b.height=m[24]),c.$set(b)},i(m){d||(R(i.$$.fragment,m),R(a.$$.fragment,m),R(c.$$.fragment,m),d=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),d=!1},d(m){m&&(B(t),B(n),B(r),B(h)),fe(i),fe(a),fe(c,m)}}}function M0(e){let t,n,r,i,o,a,l;return{c(){t=P("div"),n=J(`Almost done!
      `),r=P("p"),r.textContent="Do you have any final feedback/comments?",i=E(),o=P("textarea"),A(r,"class","svelte-9uo0u8")},m(s,u){O(s,t,u),y(t,n),y(t,r),y(t,i),y(t,o),ke(o,e[10]),a||(l=Re(o,"input",e[32]),a=!0)},p(s,u){u[0]&1024&&ke(o,s[10])},d(s){s&&B(t),a=!1,l()}}}function x0(e){let t,n,r,i;return{c(){t=P("div"),t.textContent="Thanks for participating!",n=E(),r=P("a"),i=P("b"),i.textContent="Click here to get your compensation",A(r,"href","https://app.prolific.com/submissions/complete?cc="+U$)},m(o,a){O(o,t,a),O(o,n,a),O(o,r,a),y(r,i)},p:Ce,d(o){o&&(B(t),B(n),B(r))}}}function P0(e){let t,n,r;return{c(){t=P("button"),t.textContent="next step",A(t,"class","next-btn svelte-9uo0u8")},m(i,o){O(i,t,o),n||(r=Re(t,"click",e[25]),n=!0)},p:Ce,d(i){i&&B(t),n=!1,r()}}}function q$(e){let t,n,r,i,o,a,l,s,u,f,h=e[2]==="consent"&&d0(),c=e[2]==="start1"&&m0(e),d=e[2]==="start2"&&p0(e),m=e[2]==="start3"&&b0(e),p=e[2]==="demo"&&g0(e),g=e[2]==="tests"&&y0(e),v=e[2]==="feedback"&&M0(e),b=e[2]==="done"&&x0(),w=!e[13]&&e[2]!=="done"&&!e[4]&&P0(e);return{c(){t=P("main"),h&&h.c(),n=E(),c&&c.c(),r=E(),d&&d.c(),i=E(),m&&m.c(),o=E(),p&&p.c(),a=E(),g&&g.c(),l=E(),v&&v.c(),s=E(),b&&b.c(),u=E(),w&&w.c(),A(t,"class","svelte-9uo0u8")},m(_,x){O(_,t,x),h&&h.m(t,null),y(t,n),c&&c.m(t,null),y(t,r),d&&d.m(t,null),y(t,i),m&&m.m(t,null),y(t,o),p&&p.m(t,null),y(t,a),g&&g.m(t,null),y(t,l),v&&v.m(t,null),y(t,s),b&&b.m(t,null),y(t,u),w&&w.m(t,null),f=!0},p(_,x){_[2]==="consent"?h?h.p(_,x):(h=d0(),h.c(),h.m(t,n)):h&&(h.d(1),h=null),_[2]==="start1"?c?(c.p(_,x),x[0]&4&&R(c,1)):(c=m0(_),c.c(),R(c,1),c.m(t,r)):c&&(He(),H(c,1,1,()=>{c=null}),We()),_[2]==="start2"?d?d.p(_,x):(d=p0(_),d.c(),d.m(t,i)):d&&(d.d(1),d=null),_[2]==="start3"?m?(m.p(_,x),x[0]&4&&R(m,1)):(m=b0(_),m.c(),R(m,1),m.m(t,o)):m&&(He(),H(m,1,1,()=>{m=null}),We()),_[2]==="demo"?p?p.p(_,x):(p=g0(_),p.c(),p.m(t,a)):p&&(p.d(1),p=null),_[2]==="tests"?g?(g.p(_,x),x[0]&4&&R(g,1)):(g=y0(_),g.c(),R(g,1),g.m(t,l)):g&&(He(),H(g,1,1,()=>{g=null}),We()),_[2]==="feedback"?v?v.p(_,x):(v=M0(_),v.c(),v.m(t,s)):v&&(v.d(1),v=null),_[2]==="done"?b?b.p(_,x):(b=x0(),b.c(),b.m(t,u)):b&&(b.d(1),b=null),!_[13]&&_[2]!=="done"&&!_[4]?w?w.p(_,x):(w=P0(_),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},i(_){f||(R(c),R(m),R(g),f=!0)},o(_){H(c),H(m),H(g),f=!1},d(_){_&&B(t),h&&h.d(),c&&c.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),v&&v.d(),b&&b.d(),w&&w.d()}}}const S0="8beat_tempi",Ra=!1,G$="/store";let Qr=.1;const U$="C11VVLWN",z$="COYRYK1U",H$="CILRS92A",Eu=4;let uv=8;function W$(e,t,n){let r,i=120;console.log(S0,i,Qr);let o=rn(window,"e");(!o||!["audio","waveform"].includes(o))&&alert(`Invalid encoding ${o}`);let a=rn(window,"PROLIFIC_PID"),l=rn(window,"STUDY_ID"),s=rn(window,"SESSION_ID"),u=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]}];const f=(k=0)=>{if(k===0)return u;const z=st([u]),X=z.filter(be=>be.instrument==="hihat")[0];for(const be of[5,6,7,8])X.times[be-1]=X.timesOriginal[be-1]+k;return z};let h=[60,90,120].map(k=>({bpm:k})),c="consent",d=0,m,p=!1,g=0,v=0,b="",w="",_=0,x=0,M="",S=0,T,I={},L=[],C,G,Y=!1,N=!1,$=!1,V="",le=600,ie=[],se=0;const Z=[];Br(()=>{document.querySelector("html").addEventListener("keyup",ee)});const Q=()=>{G=new je({ratio:{firstVal:Qr,operation:"multiply",down:1,up:1,stepSizeDown:1.25,stepSizeUp:1.25*1.25*1.25,limits:[0,Qr],direction:-1,reversalLimit:12,verbosity:0}}),G.init()};async function K(){c==="consent"?n(2,c="start1"):c==="start1"?n(2,c="start2"):c==="start2"?n(2,c="start3"):c==="start3"?(n(1,h=mc(h)),n(2,c="demo")):c==="demo"?b==""||w==""?alert("please fill the form first"):(n(2,c="tests"),n(3,d=0)):c==="tests"?d>=h.length?n(2,c="feedback"):(n(15,V=o),i=h[d].bpm,F=Lo(i),he=Eu*F,await Pe(),g===0?(n(4,p=!0),de()):(n(4,p=!1),ne(),n(5,g=0))):c==="feedback"&&(oe(),n(2,c="done"))}function ne(){Q(),n(11,S=0),T=0,C=0,n(12,Y=!0),ie=[],L=[],m=new Date,ge()}function ge(){console.log("Starting trial "+S),I={},n(13,N=!0),pe()}function pe(){let z=G.getLast("ratio");z=Math.random()<.5?z:-z,I.deviation=z;const X=we(z);n(21,Ye=X.noteTimes),X.noteTimesSeparate,n(16,te=X.sampleRate),n(17,ve=X.renderedAudio),console.log("generated pattern"),n(14,$=!0),window.setTimeout(()=>{n(14,$=!1),I.startTime=new Date},1e3)}function de(){console.log("show training");let k=(Math.random()*.5+.5)*Qr;k=Math.random()<.5?k:-k,v=k,console.log("training severity",k);const z=we(k);n(21,Ye=z.noteTimes),z.noteTimesSeparate,n(16,te=z.sampleRate),n(17,ve=z.renderedAudio),console.log("generated training",z),n(11,S++,S)}function re(k){if(!N)return;n(13,N=!1),I.decisionChoice=k,I.errorCode=0,I.timeTaken=(new Date-I.startTime)/1e3;const z=C;(I.decisionChoice==0&&I.deviation<0||I.decisionChoice==1&&I.deviation>0)&&I.errorCode==0&&C++,I.errorCode==0&&(G.next(z!=C),L[L.length]=I),I.errorCode==0&&T++,n(11,S++,S),G.reversalLimitReached("ratio")?W():ge()}function ae(k){const z=document.querySelectorAll("#trainingFeedback")[0];k==="early"&&v<0||k==="late"&&v>0?(n(5,g++,g),g>=uv?n(4,p=!1):z.innerHTML='<span class="correct">correct!</span>'):(n(5,g=0),z.innerHTML='<span class="wrong">wrong!</span>'),console.log(z),de()}function W(){n(12,Y=!1),n(13,N=!1),ie=[],se=G.getFinalVal("ratio");for(let z=0;z<L.length;z++)ie[z]=L[z].deviation;console.log(ie);const k=new Date;Z.push({encoding:V,bpm:i,final:se,data:ie,score:C,testNumber:d,trialCount:S+1,trials:L,validTrialCount:T+1,testTimeSeconds:(k-m)/1e3}),n(3,d++,d)}function ee(k){if(!$)switch(k.key){case"ArrowLeft":N&&re(0),p&&ae("early");break;case"ArrowRight":N&&re(1),p&&ae("late");break;case"PageDown":!N&&c!=="done"&&K()}}function oe(){const k={studyName:S0,studyStep:c,demographics:{partID:a,studyID:l,sessionID:s,partEduation:b,partMusicInstr:w,partMusicInstrYears:_,partVisExperienceYears:x,partFeedback:M,visWidth:le},date:new Date().toISOString(),tests:Z};console.log("saving data",k);const z=JSON.stringify(k,void 0,2);fetch(G$,{method:"POST",headers:{"Content-Type":"application/json"},body:z}).then(X=>{console.log("Data saved:",X)})}let F=Lo(i),he=Eu*F,te,ve=null,ye=null,xe=null,me=null,Ye=[],Ge=[],Te=[];const Pe=async()=>{u=await Promise.all(u.map(async be=>({...be,times:be.beats.map(Le=>F*(Le-1)),timesOriginal:be.beats.map(Le=>F*(Le-1)),audioBuffer:be.audioBuffer??await ms(be.sample)})));const k=we(0),z=we(-Qr),X=we(Qr);k.noteTimes,n(22,Ge=z.noteTimes),n(23,Te=X.noteTimes),n(18,ye=k.renderedAudio),n(19,xe=z.renderedAudio),n(20,me=X.renderedAudio),n(16,te=u[0].audioBuffer.sampleRate)};Pe();const st=k=>{const z=k[0].map(X=>({...X,beats:[...X.beats],times:[...X.times],timesOriginal:[...X.timesOriginal]}));for(let X=1;X<k.length;X++){const be=k[X];for(const Le of be){const j=z.filter(Se=>Se.instrument===Le.instrument)[0];j.beats=[...j.beats,...Le.beats.map(Se=>Se+X*Eu)],j.times=[...j.times,...Le.times.map(Se=>Se+X*he)],j.timesOriginal=[...j.timesOriginal,...Le.timesOriginal.map(Se=>Se+X*he)]}}return z},we=k=>{if(!u[0].audioBuffer)return;const X=[f(k)],be=st(X),Le=be.map(Hr=>Hr.times).flat().sort(),j=be.map(Hr=>Hr.times.map(Ls=>({time:Ls,instr:Hr.instrument}))).flat(1/0).sort((Hr,Ls)=>{Hr.time-Ls.time}),Se=be[0].audioBuffer.sampleRate,Tn=So(be,he*X.length+.1,Se);return console.log("creating drum pattern",{BPM:i,duration:he}),{noteTimes:Le,noteTimesSeparate:j,sampleRate:Se,renderedAudio:Tn}},Be=()=>n(0,le*=1.05),bt=()=>n(0,le*=.95);function qe(){b=Ol(this),n(6,b)}function q(){w=this.value,n(7,w)}function _e(){_=$t(this.value),n(8,_)}function U(){x=$t(this.value),n(9,x)}function D(){M=this.value,n(10,M)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(24,r=le/6)},[le,h,c,d,p,g,b,w,_,x,M,S,Y,N,$,V,te,ve,ye,xe,me,Ye,Ge,Te,r,K,Be,bt,qe,q,_e,U,D]}class V$ extends nt{constructor(t){super(),tt(this,t,W$,q$,et,{},null,[-1,-1,-1])}}var fv={exports:{}};(function(e,t){(function(n,r){r()})(Gi,function(){function n(u,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,f,h){var c=new XMLHttpRequest;c.open("GET",u),c.responseType="blob",c.onload=function(){s(c.response,f,h)},c.onerror=function(){console.error("could not download file")},c.send()}function i(u){var f=new XMLHttpRequest;f.open("HEAD",u,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function o(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(f)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Gi=="object"&&Gi.global===Gi?Gi:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(u,f,h){var c=a.URL||a.webkitURL,d=document.createElement("a");f=f||u.name||"download",d.download=f,d.rel="noopener",typeof u=="string"?(d.href=u,d.origin===location.origin?o(d):i(d.href)?r(u,f,h):o(d,d.target="_blank")):(d.href=c.createObjectURL(u),setTimeout(function(){c.revokeObjectURL(d.href)},4e4),setTimeout(function(){o(d)},0))}:"msSaveOrOpenBlob"in navigator?function(u,f,h){if(f=f||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,h),f);else if(i(u))r(u,f,h);else{var c=document.createElement("a");c.href=u,c.target="_blank",setTimeout(function(){o(c)})}}:function(u,f,h,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof u=="string")return r(u,f,h);var d=u.type==="application/octet-stream",m=/constructor/i.test(a.HTMLElement)||a.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||l)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var w=g.result;w=p?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=w:location=w,c=null},g.readAsDataURL(u)}else{var v=a.URL||a.webkitURL,b=v.createObjectURL(u);c?c.location=b:location.href=b,c=null,setTimeout(function(){v.revokeObjectURL(b)},4e4)}});a.saveAs=s.saveAs=s,e.exports=s})})(fv);var Y$=fv.exports;const Bl=c2(Y$);function j$(e){let t,n,r;return{c(){t=P("div"),A(t,"width",n=e[0]+"px"),A(t,"height",r=e[1]+"px")},m(i,o){O(i,t,o),e[6](t)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&A(t,"width",n),o&2&&r!==(r=i[1]+"px")&&A(t,"height",r)},i:Ce,o:Ce,d(i){i&&B(t),e[6](null)}}}function X$(e,t,n){let{data:r}=t,{domain:i}=t,{title:o=""}=t,{width:a=800}=t,{height:l=100}=t,s;An(()=>{const f=cn({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:i},y:{axis:!1,type:"band"},marks:[Xc(r,{x:h=>h}),Es(r,{x:h=>h,dx:7,y:(h,c)=>c,text:(h,c)=>`P${c+1}`})]});n(2,s.textContent="",s),s.appendChild(f)});function u(f){Pt[f?"unshift":"push"](()=>{s=f,n(2,s)})}return e.$$set=f=>{"data"in f&&n(3,r=f.data),"domain"in f&&n(4,i=f.domain),"title"in f&&n(5,o=f.title),"width"in f&&n(0,a=f.width),"height"in f&&n(1,l=f.height)},[a,l,s,r,i,o,u]}class cv extends nt{constructor(t){super(),tt(this,t,X$,j$,et,{data:3,domain:4,title:5,width:0,height:1})}}function Z$(e){let t,n,r;return{c(){t=P("div"),A(t,"width",n=e[0]+"px"),A(t,"height",r=e[1]+"px")},m(i,o){O(i,t,o),e[5](t)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&A(t,"width",n),o&2&&r!==(r=i[1]+"px")&&A(t,"height",r)},i:Ce,o:Ce,d(i){i&&B(t),e[5](null)}}}function K$(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:o=200}=t,a;An(()=>{const u=r.map(h=>({encoding:h.encoding,...l(h.finals)})),f=cn({width:i,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:u.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[jc(u,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),f_(u,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),yy([0])]});n(2,a.textContent="",a),a.appendChild(f)});function l(u){const f=u.length,h=Vl(u),m=1.96*(Of(u)/Math.sqrt(f)),p=h-m,g=h+m;return{mean:h,low:p,high:g}}function s(u){Pt[u?"unshift":"push"](()=>{a=u,n(2,a)})}return e.$$set=u=>{"stimuli"in u&&n(3,r=u.stimuli),"width"in u&&n(0,i=u.width),"height"in u&&n(1,o=u.height)},[i,o,a,r,l,s]}class hv extends nt{constructor(t){super(),tt(this,t,K$,Z$,et,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function A0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function J$(e,t,n,r,i,o){const a=new Float64Array(o),l=(o-1)/(i-r);for(let s=0;s<e.length;++s){const u=e[s],f=t(u,s,e),h=n(u,s,e);if(!(Number.isFinite(f)&&Number.isFinite(h)))continue;const c=(f-r)*l,d=Math.floor(c),m=d+1;0<=d&&m<o?(a[d]+=(m-c)*h,a[m]+=(c-d)*h):d===-1?a[m]+=(c-d)*h:m===o&&(a[d]+=(m-c)*h)}return a}function k0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);Q$(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),o=1+n[1]+n[2]+n[3]+n[4],a=(r[0]+r[1]+r[2]+r[3])/o,l=(i[1]+i[2]+i[3]+i[4])/o;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:a,sum_anticausal:l}}function Q$(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),a=Math.exp(-1.723/n),l=.6318/n,s=1.997/n,u=Float64Array.of(-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l),-a*Math.cos(s),a*Math.sin(s),-a*Math.cos(-s),a*Math.sin(-s)),f=n*2.5066282746310007,h=Float64Array.of(i[0],i[1],0,0,0,0,0,0),c=Float64Array.of(1,0,u[0],u[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(h[m]=u[m]*h[m-2]-u[m+1]*h[m-1],h[m+1]=u[m]*h[m-1]+u[m+1]*h[m-2],d=m-2;d>0;d-=2)h[d]+=u[m]*h[d-2]-u[m+1]*h[d-1],h[d+1]+=u[m]*h[d-1]+u[m+1]*h[d-2];for(d=0;d<=m;d+=2)h[d]+=i[m]*c[d]-i[m+1]*c[d+1],h[d+1]+=i[m]*c[d+1]+i[m+1]*c[d];for(c[m+2]=u[m]*c[m]-u[m+1]*c[m+1],c[m+3]=u[m]*c[m+1]+u[m+1]*c[m],d=m;d>0;d-=2)c[d]+=u[m]*c[d-2]-u[m+1]*c[d-1],c[d+1]+=u[m]*c[d-1]+u[m+1]*c[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=h[d]/f,e[m+1]=c[d+2]}function eD(e,t,n,r=1,i=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(5),l=i,s=tD){const u=r*2,f=r*3,h=r*4,c=r*n;let d,m;for(s(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,a,e.sigma),m=4,d=h;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-u]+e.b_causal[3]*t[d-f]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(s(o,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,a,e.sigma),m=4,d=c-r*5;m<n;++m,d-=r)o[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+u]+e.b_anticausal[3]*t[d+f]+e.b_anticausal[4]*t[d+h]-e.a[1]*o[m-1]-e.a[2]*o[m-2]-e.a[3]*o[m-3]-e.a[4]*o[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)l[d]=i[m]+o[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)l[d]=Math.max(0,i[m]+o[n-m-1]);return l}function tD(e,t,n,r,i,o,a,l,s,u){const f=Math.abs(r)*n,h=r<0?f+r:0;let c,d,m;for(d=0;d<l;++d)for(u[d]=d<=o?i[d]:0,m=1;m<=l&&m<=d;++m)u[d]-=a[m]*u[d-m];for(m=0;m<l;++m)for(e[m]=0,d=1;d<=m;++d)c=h+r*d,c>=0&&c<f&&(e[m]+=u[m-d]*t[c]);const p=t[h];if(p>0)for(m=0;m<l;++m)e[m]+=u[m]*p}function nD(e,t,n=0){const r=e.length;let i,o;for(let a=0;a<r;++a){const l=t(e[a],a,e);l!=null&&(i===void 0?l>=l&&(i=o=l):(l<i&&(i=l),l>o&&(o=l)))}return[i-n,o+n]}function rD(e,t){const n=e.map(t).filter(u=>u!=null&&u>=u);n.sort((u,f)=>u-f);const r=iD(n),i=E0(n,.25),o=E0(n,.75),a=n.length,l=(o-i)/1.34;return 1.06*(Math.min(r,l)||r||Math.abs(i)||1)*Math.pow(a,-.2)}function iD(e){const t=e.length;let n=0,r,i=0,o=0;for(let a=0;a<t;++a){const l=e[a];r=l-i,i+=r/++n,o+=r*(l-i)}return n>1?Math.sqrt(o/(n-1)):NaN}function E0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),o=e[i];return o+(e[i+1]-o)*(r-i)}function oD(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,o=A0(t.x,v=>v),a=A0(t.weight,()=>1/e.length);let l=t.bandwidth??n*rD(e,o);const[s,u]=t.extent??nD(e,o,r*l),f=J$(e,o,a,s,u,i),h=(u-s)/(i-1),c=f.some(v=>v<0);let d=k0(l/h,c),m;function*p(v="x",b="y"){const w=g.grid(),_=1/h;for(let x=0;x<i;++x)yield{[v]:s+x*h,[b]:w[x]*_}}const g={[Symbol.iterator]:p,points:p,grid:()=>m||(m=eD(d,f,i)),extent:()=>[s,u],bandwidth(v){return arguments.length?(v!==l&&(l=v,m=null,d=k0(l/h,c)),g):l}};return g}function aD(e){let t,n,r,i;return{c(){t=P("main"),n=P("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px")},m(o,a){O(o,t,a),y(t,n),e[10](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i)},i:Ce,o:Ce,d(o){o&&B(t),e[10](null)}}}function lD(e,t,n){let r,{values:i}=t,{title:o=""}=t,{xLabel:a="some value"}=t,{xDomain:l=void 0}=t,{width:s=1e3}=t,{height:u=100}=t,{bandwidth:f=.25}=t,{bins:h=256}=t,{pad:c=4}=t,d;An(()=>{const p=[...r.bandwidth(f)];n(2,d.textContent="",d);const g=cn({width:s,height:u,title:o,style:{background:"none"},grid:!0,x:{label:a,domain:l},y:{label:"density",type:"linear"},marks:[sA(p,{x:"x",y:"y",fill:"#ccc"}),Xc(i,{x:v=>v,strokeWidth:.5}),Tl([0])]});d.appendChild(g)});function m(p){Pt[p?"unshift":"push"](()=>{d=p,n(2,d)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,o=p.title),"xLabel"in p&&n(5,a=p.xLabel),"xDomain"in p&&n(6,l=p.xDomain),"width"in p&&n(0,s=p.width),"height"in p&&n(1,u=p.height),"bandwidth"in p&&n(7,f=p.bandwidth),"bins"in p&&n(8,h=p.bins),"pad"in p&&n(9,c=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=oD(i,{bandwidth:f,pad:c,bins:h}))},[s,u,d,i,o,a,l,f,h,c,m]}class dv extends nt{constructor(t){super(),tt(this,t,lD,aD,et,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function sD(e){let t,n,r,i;return{c(){t=P("main"),n=P("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px")},m(o,a){O(o,t,a),y(t,n),e[14](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i)},i:Ce,o:Ce,d(o){o&&B(t),e[14](null)}}}function uD(e,t,n){let{title:r=""}=t,{data:i}=t,{x:o="x"}=t,{y:a="y"}=t,{fill:l=null}=t,{tipTitle:s=null}=t,{xLabel:u=null}=t,{yLabel:f=null}=t,{xDomain:h=void 0}=t,{yDomain:c=void 0}=t,{grid:d=!1}=t,{width:m=300}=t,{height:p=300}=t,g;An(()=>{console.log(i,o,a),n(2,g.textContent="",g);const b=cn({width:m,height:p,title:r,grid:d,style:{background:"none"},color:{legend:!0},x:{label:u||(typeof o=="string"?o:"x"),domain:h},y:{label:f||(typeof a=="string"?a:"y"),domain:c},marks:[jc(i,{x:o,y:a,stroke:l,tip:!0}),f_({length:1},{x1:h[0],x2:h[1],y1:c[0],y2:c[1],stroke:"#ccc"})]});g.appendChild(b)});function v(b){Pt[b?"unshift":"push"](()=>{g=b,n(2,g)})}return e.$$set=b=>{"title"in b&&n(3,r=b.title),"data"in b&&n(4,i=b.data),"x"in b&&n(5,o=b.x),"y"in b&&n(6,a=b.y),"fill"in b&&n(7,l=b.fill),"tipTitle"in b&&n(8,s=b.tipTitle),"xLabel"in b&&n(9,u=b.xLabel),"yLabel"in b&&n(10,f=b.yLabel),"xDomain"in b&&n(11,h=b.xDomain),"yDomain"in b&&n(12,c=b.yDomain),"grid"in b&&n(13,d=b.grid),"width"in b&&n(0,m=b.width),"height"in b&&n(1,p=b.height)},[m,p,g,r,i,o,a,l,s,u,f,h,c,d,v]}class C0 extends nt{constructor(t){super(),tt(this,t,uD,sD,et,{title:3,data:4,x:5,y:6,fill:7,tipTitle:8,xLabel:9,yLabel:10,xDomain:11,yDomain:12,grid:13,width:0,height:1})}}function T0(e,t,n){const r=e.slice();return r[13]=t[n],r}function $0(e,t,n){const r=e.slice();return r[16]=t[n],r}function D0(e,t,n){const r=e.slice();return r[19]=t[n],r}function N0(e,t,n){const r=e.slice();return r[22]=t[n],r}function I0(e,t,n){const r=e.slice();return r[25]=t[n],r}function L0(e,t,n){const r=e.slice();return r[28]=t[n][0],r[29]=t[n][1],r}function R0(e,t,n){const r=e.slice();return r[32]=t[n],r}function F0(e){let t,n=e[32]+"",r;return{c(){t=P("div"),r=J(n)},m(i,o){O(i,t,o),y(t,r)},p(i,o){o[0]&1&&n!==(n=i[32]+"")&&Fe(r,n)},d(i){i&&B(t)}}}function B0(e){let t,n=e[28]+"",r,i,o=e[29].length+"",a,l;return{c(){t=P("p"),r=J(n),i=J(": "),a=J(o),l=J(" times")},m(s,u){O(s,t,u),y(t,r),y(t,i),y(t,a),y(t,l)},p(s,u){u[0]&1&&n!==(n=s[28]+"")&&Fe(r,n),u[0]&1&&o!==(o=s[29].length+"")&&Fe(a,o)},d(s){s&&B(t)}}}function O0(e){let t,n;return t=new dv({props:{title:`Density of final values for ${e[25][0]}`,values:e[25][1].map(X0),xLabel:"final values",xDomain:[-.01,.2],bandwidth:hD}}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},p(r,i){const o={};i[0]&2&&(o.title=`Density of final values for ${r[25][0]}`),i[0]&2&&(o.values=r[25][1].map(X0)),t.$set(o)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function q0(e){let t,n;return t=new av({props:{title:e[22].studyName+" P"+e[22].internalPID+" "+e[22].encoding+" "+e[22].data.length+" trials "+(e[22].isOutlier?"OUTLIER":""),final:e[22].final,width:cD,height:120,data:e[22].data,x:mD,y:e[7],xDomain:[0,165]}}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},p(r,i){const o={};i[0]&2&&(o.title=r[22].studyName+" P"+r[22].internalPID+" "+r[22].encoding+" "+r[22].data.length+" trials "+(r[22].isOutlier?"OUTLIER":"")),i[0]&2&&(o.final=r[22].final),i[0]&2&&(o.data=r[22].data),t.$set(o)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function G0(e){let t,n=e[19].encoding+"",r,i,o,a;return o=new cv({props:{data:e[19].finals,title:e[19].encoding,domain:[0,e[2]]}}),{c(){t=P("b"),r=J(n),i=E(),ce(o.$$.fragment)},m(l,s){O(l,t,s),y(t,r),O(l,i,s),ue(o,l,s),a=!0},p(l,s){(!a||s[0]&8)&&n!==(n=l[19].encoding+"")&&Fe(r,n);const u={};s[0]&8&&(u.data=l[19].finals),s[0]&8&&(u.title=l[19].encoding),s[0]&4&&(u.domain=[0,l[2]]),o.$set(u)},i(l){a||(R(o.$$.fragment,l),a=!0)},o(l){H(o.$$.fragment,l),a=!1},d(l){l&&(B(t),B(i)),fe(o,l)}}}function U0(e){let t,n=e[16]+"",r;return{c(){t=P("p"),r=J(n)},m(i,o){O(i,t,o),y(t,r)},p(i,o){o[0]&1&&n!==(n=i[16]+"")&&Fe(r,n)},d(i){i&&B(t)}}}function z0(e){let t,n,r,i=e[13].demographics.internalPID+"",o,a,l=e[13].demographics.partID+"",s,u,f,h=Ue(e[13].demographics.partFeedback.split(`
`)),c=[];for(let d=0;d<h.length;d+=1)c[d]=U0($0(e,h,d));return{c(){t=P("div"),n=P("b"),r=J("P"),o=J(i),a=E(),s=J(l),u=J(`:
        `);for(let d=0;d<c.length;d+=1)c[d].c();f=E(),Qe(t,"text-align","left")},m(d,m){O(d,t,m),y(t,n),y(n,r),y(n,o),y(t,a),y(t,s),y(t,u);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(t,null);y(t,f)},p(d,m){if(m[0]&1&&i!==(i=d[13].demographics.internalPID+"")&&Fe(o,i),m[0]&1&&l!==(l=d[13].demographics.partID+"")&&Fe(s,l),m[0]&1){h=Ue(d[13].demographics.partFeedback.split(`
`));let p;for(p=0;p<h.length;p+=1){const g=$0(d,h,p);c[p]?c[p].p(g,m):(c[p]=U0(g),c[p].c(),c[p].m(t,f))}for(;p<c.length;p+=1)c[p].d(1);c.length=h.length}},d(d){d&&B(t),wt(c,d)}}}function fD(e){let t,n,r,i,o,a,l,s,u,f,h,c=e[0].length+"",d,m,p=e[1].length+"",g,v,b=e[4].length+"",w,_,x,M,S,T,I,L,C,G,Y,N,$,V,le,ie,se,Z,Q,K,ne,ge,pe,de,re,ae,W,ee,oe,F,he,te,ve,ye,xe=Ue(ct(e[0],H0).map(W0)),me=[];for(let k=0;k<xe.length;k+=1)me[k]=F0(R0(e,xe,k));let Ye=Ue(ct(e[0],V0).sort(Y0)),Ge=[];for(let k=0;k<Ye.length;k+=1)Ge[k]=B0(L0(e,Ye,k));let Te=Ue(ct(e[1],j0)),Pe=[];for(let k=0;k<Te.length;k+=1)Pe[k]=O0(I0(e,Te,k));const st=k=>H(Pe[k],1,1,()=>{Pe[k]=null});let we=Ue(e[1]),Be=[];for(let k=0;k<we.length;k+=1)Be[k]=q0(N0(e,we,k));const bt=k=>H(Be[k],1,1,()=>{Be[k]=null});ie=new C0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",fill:"studyName",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),Z=new C0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",fill:"studyName",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),pe=new hv({props:{stimuli:e[3]}});let qe=Ue(e[3]),q=[];for(let k=0;k<qe.length;k+=1)q[k]=G0(D0(e,qe,k));const _e=k=>H(q[k],1,1,()=>{q[k]=null});let U=Ue(e[0].filter(Z0)),D=[];for(let k=0;k<U.length;k+=1)D[k]=z0(T0(e,U,k));return{c(){t=P("main"),n=P("h2"),n.textContent="Analysis",r=E(),i=P("div"),o=P("label"),a=J(`Results JSONs and Prolific demographics CSV
      `),l=P("input"),s=E(),u=P("button"),u.textContent="export JSON",f=E(),h=P("div"),d=J(c),m=J(` participants completed -
    `),g=J(p),v=J(` tests -
    `),w=J(b),_=J(" filtered tests"),x=E(),M=P("div"),S=P("h3"),S.textContent="Studies",T=E();for(let k=0;k<me.length;k+=1)me[k].c();I=E(),L=P("div"),C=P("h3"),C.textContent="Encoding order",G=E();for(let k=0;k<Ge.length;k+=1)Ge[k].c();Y=E(),N=P("div");for(let k=0;k<Pe.length;k+=1)Pe[k].c();$=E(),V=P("div");for(let k=0;k<Be.length;k+=1)Be[k].c();le=E(),ce(ie.$$.fragment),se=E(),ce(Z.$$.fragment),Q=E(),K=P("div"),ne=P("h3"),ne.textContent="Mean and CI of Final Values",ge=E(),ce(pe.$$.fragment),de=E(),re=P("div"),ae=P("h3"),ae.textContent="Final Values for Each Stimulus and All Participants",W=E();for(let k=0;k<q.length;k+=1)q[k].c();ee=E(),oe=P("div"),F=P("h3"),F.textContent="Feedback",he=E();for(let k=0;k<D.length;k+=1)D[k].c();A(l,"type","file"),A(l,"accept",".json,.csv"),l.multiple=!0},m(k,z){O(k,t,z),y(t,n),y(t,r),y(t,i),y(i,o),y(o,a),y(o,l),y(i,s),y(i,u),y(t,f),y(t,h),y(h,d),y(h,m),y(h,g),y(h,v),y(h,w),y(h,_),y(t,x),y(t,M),y(M,S),y(M,T);for(let X=0;X<me.length;X+=1)me[X]&&me[X].m(M,null);y(t,I),y(t,L),y(L,C),y(L,G);for(let X=0;X<Ge.length;X+=1)Ge[X]&&Ge[X].m(L,null);y(t,Y),y(t,N);for(let X=0;X<Pe.length;X+=1)Pe[X]&&Pe[X].m(N,null);y(t,$),y(t,V);for(let X=0;X<Be.length;X+=1)Be[X]&&Be[X].m(V,null);y(t,le),ue(ie,t,null),y(t,se),ue(Z,t,null),y(t,Q),y(t,K),y(K,ne),y(K,ge),ue(pe,K,null),y(t,de),y(t,re),y(re,ae),y(re,W);for(let X=0;X<q.length;X+=1)q[X]&&q[X].m(re,null);y(t,ee),y(t,oe),y(oe,F),y(oe,he);for(let X=0;X<D.length;X+=1)D[X]&&D[X].m(oe,null);te=!0,ve||(ye=[Re(l,"input",e[5]),Re(u,"click",e[6])],ve=!0)},p(k,z){if((!te||z[0]&1)&&c!==(c=k[0].length+"")&&Fe(d,c),(!te||z[0]&2)&&p!==(p=k[1].length+"")&&Fe(g,p),(!te||z[0]&16)&&b!==(b=k[4].length+"")&&Fe(w,b),z[0]&1){xe=Ue(ct(k[0],H0).map(W0));let j;for(j=0;j<xe.length;j+=1){const Se=R0(k,xe,j);me[j]?me[j].p(Se,z):(me[j]=F0(Se),me[j].c(),me[j].m(M,null))}for(;j<me.length;j+=1)me[j].d(1);me.length=xe.length}if(z[0]&1){Ye=Ue(ct(k[0],V0).sort(Y0));let j;for(j=0;j<Ye.length;j+=1){const Se=L0(k,Ye,j);Ge[j]?Ge[j].p(Se,z):(Ge[j]=B0(Se),Ge[j].c(),Ge[j].m(L,null))}for(;j<Ge.length;j+=1)Ge[j].d(1);Ge.length=Ye.length}if(z[0]&2){Te=Ue(ct(k[1],j0));let j;for(j=0;j<Te.length;j+=1){const Se=I0(k,Te,j);Pe[j]?(Pe[j].p(Se,z),R(Pe[j],1)):(Pe[j]=O0(Se),Pe[j].c(),R(Pe[j],1),Pe[j].m(N,null))}for(He(),j=Te.length;j<Pe.length;j+=1)st(j);We()}if(z[0]&2){we=Ue(k[1]);let j;for(j=0;j<we.length;j+=1){const Se=N0(k,we,j);Be[j]?(Be[j].p(Se,z),R(Be[j],1)):(Be[j]=q0(Se),Be[j].c(),R(Be[j],1),Be[j].m(V,null))}for(He(),j=we.length;j<Be.length;j+=1)bt(j);We()}const X={};z[0]&1&&(X.data=k[0]),ie.$set(X);const be={};z[0]&1&&(be.data=k[0]),Z.$set(be);const Le={};if(z[0]&8&&(Le.stimuli=k[3]),pe.$set(Le),z[0]&12){qe=Ue(k[3]);let j;for(j=0;j<qe.length;j+=1){const Se=D0(k,qe,j);q[j]?(q[j].p(Se,z),R(q[j],1)):(q[j]=G0(Se),q[j].c(),R(q[j],1),q[j].m(re,null))}for(He(),j=qe.length;j<q.length;j+=1)_e(j);We()}if(z[0]&1){U=Ue(k[0].filter(Z0));let j;for(j=0;j<U.length;j+=1){const Se=T0(k,U,j);D[j]?D[j].p(Se,z):(D[j]=z0(Se),D[j].c(),D[j].m(oe,null))}for(;j<D.length;j+=1)D[j].d(1);D.length=U.length}},i(k){if(!te){for(let z=0;z<Te.length;z+=1)R(Pe[z]);for(let z=0;z<we.length;z+=1)R(Be[z]);R(ie.$$.fragment,k),R(Z.$$.fragment,k),R(pe.$$.fragment,k);for(let z=0;z<qe.length;z+=1)R(q[z]);te=!0}},o(k){Pe=Pe.filter(Boolean);for(let z=0;z<Pe.length;z+=1)H(Pe[z]);Be=Be.filter(Boolean);for(let z=0;z<Be.length;z+=1)H(Be[z]);H(ie.$$.fragment,k),H(Z.$$.fragment,k),H(pe.$$.fragment,k),q=q.filter(Boolean);for(let z=0;z<q.length;z+=1)H(q[z]);te=!1},d(k){k&&B(t),wt(me,k),wt(Ge,k),wt(Pe,k),wt(Be,k),fe(ie),fe(Z),fe(pe),wt(q,k),wt(D,k),ve=!1,It(ye)}}}const cD=1200;let hD=.001,dD=20;const H0=e=>e.studyName,W0=([e,t])=>`${e} had ${t.length} parts`,V0=e=>e.encodingOrder,Y0=(e,t)=>e[1].lenght-t[1].length,j0=e=>e.testType,X0=e=>e.final,mD=(e,t)=>t,Z0=e=>e.demographics.partFeedback.trim().length>0;function pD(e,t,n){let r,i,o,a,l=[],s=null;const u=async g=>{const v=[];s=[];for(const w of g.target.files)if(w.name.endsWith(".csv")){const _=await w.text(),x=mp(_);s=[...s,...x],console.log("p demo",s)}else{const _=await w.text();v.push(JSON.parse(_))}const b=ct(v,w=>w.demographics.partID);console.log(`${b.length} participants`,b),n(0,l=v.filter(w=>w.studyStep==="feedback").map((w,_)=>({...w,demographics:{...w.demographics,internalPID:_+1},prolificDemogr:s.filter(x=>x["Participant id"]===w.demographics.partID)[0],finalAudio:w.tests.filter(x=>x.encoding.startsWith("audio"))[0].final,finalColor:w.tests.filter(x=>x.encoding.startsWith("color"))[0].final,finalWaveform:w.tests.filter(x=>x.encoding.startsWith("waveform"))[0].final,encodingOrder:w.tests.map(x=>x.encoding).join(", ")})).filter(w=>w.prolificDemogr!==void 0)),console.log("participants",l)},f=g=>{if(g.lenght===0)return[];const v=(w,_=5)=>{const x=Math.floor(w/_)*_;return`${x}-${x+_-1}`},b=[];for(const w of g)for(const[_,x]of w.tests.entries()){let M=x.encoding;b.push({studyName:w.studyName,...w.demographics,partAge:w.demographics.partAge?w.demographics.partAge:v(w.prolificDemogr.Age,10),partSex:w.demographics.partGender?w.demographics.partGender:w.prolificDemogr.Sex,countryBirth:w.prolificDemogr["Country of birth"],countryResidence:w.prolificDemogr["Country of residence"],prolificApprovals:w.prolificDemogr["Total approvals"],...x,date:w.date,testType:M,testOrder:_,isOutlier:d(x,10,.1,2)})}return console.log("tests",b),b},h=(g,v)=>g.filter(b=>b.final<v),c=g=>g.length===0?[]:ct(g,b=>b.testType).map(([b,w])=>{const _=w.map(x=>x.final);return{encoding:b,testType:b,finals:_,finalMean:Vl(_),finalVar:Ul(_),trialCounts:w.map(x=>x.trialCount)}}),d=(g,v=10,b=.1,w=2)=>{const _=g.data.map(Math.abs);let x=0;for(let M=v;M<_.length;M++)if(_[M]>=b&&(x++,x>=w))return!0;return!1},m=()=>{const g=JSON.stringify(l,void 0,2),v=new Blob([g],{type:"text/plain;charset=utf-8"});Bl(v,"participants.json");const b=JSON.stringify(r,void 0,2),w=new Blob([b],{type:"text/plain;charset=utf-8"});Bl(w,"tests.json")},p=g=>Math.abs(g);return e.$$.update=()=>{e.$$.dirty[0]&1&&n(1,r=f(l)),e.$$.dirty[0]&2&&n(4,i=h(r,dD)),e.$$.dirty[0]&2&&n(3,o=c(r)),e.$$.dirty[0]&2&&n(2,a=Rt(r.map(g=>Math.abs(g.final)))),e.$$.dirty[0]&2&&console.log("tests by enc",ct(r,g=>g.testType))},[l,r,a,o,i,u,m,p]}class bD extends nt{constructor(t){super(),tt(this,t,pD,fD,et,{},null,[-1,-1])}}function K0(e,t,n){const r=e.slice();return r[13]=t[n],r}function J0(e,t,n){const r=e.slice();return r[16]=t[n],r}function Q0(e,t,n){const r=e.slice();return r[19]=t[n],r}function em(e,t,n){const r=e.slice();return r[22]=t[n],r}function tm(e,t,n){const r=e.slice();return r[25]=t[n],r}function nm(e,t,n){const r=e.slice();return r[28]=t[n][0],r[29]=t[n][1],r}function rm(e,t,n){const r=e.slice();return r[32]=t[n],r}function im(e){let t,n=e[32]+"",r;return{c(){t=P("div"),r=J(n)},m(i,o){O(i,t,o),y(t,r)},p(i,o){o[0]&1&&n!==(n=i[32]+"")&&Fe(r,n)},d(i){i&&B(t)}}}function om(e){let t,n=e[28]+"",r,i,o=e[29].length+"",a,l;return{c(){t=P("p"),r=J(n),i=J(": "),a=J(o),l=J(" times")},m(s,u){O(s,t,u),y(t,r),y(t,i),y(t,a),y(t,l)},p(s,u){u[0]&1&&n!==(n=s[28]+"")&&Fe(r,n),u[0]&1&&o!==(o=s[29].length+"")&&Fe(a,o)},d(s){s&&B(t)}}}function am(e){let t,n;return t=new dv({props:{title:`Density of final values for ${e[25][0]}`,values:e[25][1].map(bm),xLabel:"final values",xDomain:[-.01,.2],bandwidth:_D}}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},p(r,i){const o={};i[0]&2&&(o.title=`Density of final values for ${r[25][0]}`),i[0]&2&&(o.values=r[25][1].map(bm)),t.$set(o)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function lm(e){let t,n;return t=new av({props:{title:e[22].studyName+" P"+e[22].internalPID+" "+e[22].encoding+" "+e[22].bpm+" "+e[22].data.length+" trials "+(e[22].isOutlier?"OUTLIER":""),final:e[22].final,width:yD,height:120,data:e[22].data,x:wD,y:e[7],xDomain:[0,165]}}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},p(r,i){const o={};i[0]&2&&(o.title=r[22].studyName+" P"+r[22].internalPID+" "+r[22].encoding+" "+r[22].bpm+" "+r[22].data.length+" trials "+(r[22].isOutlier?"OUTLIER":"")),i[0]&2&&(o.final=r[22].final),i[0]&2&&(o.data=r[22].data),t.$set(o)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function sm(e){let t,n=e[19].encoding+"",r,i,o,a;return o=new cv({props:{data:e[19].finals,title:e[19].encoding,domain:[0,e[2]]}}),{c(){t=P("b"),r=J(n),i=E(),ce(o.$$.fragment)},m(l,s){O(l,t,s),y(t,r),O(l,i,s),ue(o,l,s),a=!0},p(l,s){(!a||s[0]&8)&&n!==(n=l[19].encoding+"")&&Fe(r,n);const u={};s[0]&8&&(u.data=l[19].finals),s[0]&8&&(u.title=l[19].encoding),s[0]&4&&(u.domain=[0,l[2]]),o.$set(u)},i(l){a||(R(o.$$.fragment,l),a=!0)},o(l){H(o.$$.fragment,l),a=!1},d(l){l&&(B(t),B(i)),fe(o,l)}}}function um(e){let t,n=e[16]+"",r;return{c(){t=P("p"),r=J(n)},m(i,o){O(i,t,o),y(t,r)},p(i,o){o[0]&1&&n!==(n=i[16]+"")&&Fe(r,n)},d(i){i&&B(t)}}}function fm(e){let t,n,r,i=e[13].demographics.internalPID+"",o,a,l=e[13].demographics.partID+"",s,u,f,h=Ue(e[13].demographics.partFeedback.split(`
`)),c=[];for(let d=0;d<h.length;d+=1)c[d]=um(J0(e,h,d));return{c(){t=P("div"),n=P("b"),r=J("P"),o=J(i),a=E(),s=J(l),u=J(`:
        `);for(let d=0;d<c.length;d+=1)c[d].c();f=E(),Qe(t,"text-align","left")},m(d,m){O(d,t,m),y(t,n),y(n,r),y(n,o),y(t,a),y(t,s),y(t,u);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(t,null);y(t,f)},p(d,m){if(m[0]&1&&i!==(i=d[13].demographics.internalPID+"")&&Fe(o,i),m[0]&1&&l!==(l=d[13].demographics.partID+"")&&Fe(s,l),m[0]&1){h=Ue(d[13].demographics.partFeedback.split(`
`));let p;for(p=0;p<h.length;p+=1){const g=J0(d,h,p);c[p]?c[p].p(g,m):(c[p]=um(g),c[p].c(),c[p].m(t,f))}for(;p<c.length;p+=1)c[p].d(1);c.length=h.length}},d(d){d&&B(t),wt(c,d)}}}function gD(e){let t,n,r,i,o,a,l,s,u,f,h,c=e[0].length+"",d,m,p=e[1].length+"",g,v,b=e[4].length+"",w,_,x,M,S,T,I,L,C,G,Y,N,$,V,le,ie,se,Z,Q,K,ne,ge,pe,de,re,ae,W,ee,oe,F,he=Ue(ct(e[0],cm).map(hm)),te=[];for(let q=0;q<he.length;q+=1)te[q]=im(rm(e,he,q));let ve=Ue(ct(e[0],dm).sort(mm)),ye=[];for(let q=0;q<ve.length;q+=1)ye[q]=om(nm(e,ve,q));let xe=Ue(ct(e[1],pm)),me=[];for(let q=0;q<xe.length;q+=1)me[q]=am(tm(e,xe,q));const Ye=q=>H(me[q],1,1,()=>{me[q]=null});let Ge=Ue(e[1]),Te=[];for(let q=0;q<Ge.length;q+=1)Te[q]=lm(em(e,Ge,q));const Pe=q=>H(Te[q],1,1,()=>{Te[q]=null});Q=new hv({props:{stimuli:e[3]}});let st=Ue(e[3]),we=[];for(let q=0;q<st.length;q+=1)we[q]=sm(Q0(e,st,q));const Be=q=>H(we[q],1,1,()=>{we[q]=null});let bt=Ue(e[0].filter(gm)),qe=[];for(let q=0;q<bt.length;q+=1)qe[q]=fm(K0(e,bt,q));return{c(){t=P("main"),n=P("h2"),n.textContent="Analysis (Tempi)",r=E(),i=P("div"),o=P("label"),a=J(`Results JSONs and Prolific demographics CSV
      `),l=P("input"),s=E(),u=P("button"),u.textContent="export JSON",f=E(),h=P("div"),d=J(c),m=J(` participants completed -
    `),g=J(p),v=J(` tests -
    `),w=J(b),_=J(" filtered tests"),x=E(),M=P("div"),S=P("h3"),S.textContent="Studies",T=E();for(let q=0;q<te.length;q+=1)te[q].c();I=E(),L=P("div"),C=P("h3"),C.textContent="Encoding order",G=E();for(let q=0;q<ye.length;q+=1)ye[q].c();Y=E(),N=P("div");for(let q=0;q<me.length;q+=1)me[q].c();$=E(),V=P("div");for(let q=0;q<Te.length;q+=1)Te[q].c();le=E(),ie=P("div"),se=P("h3"),se.textContent="Mean and CI of Final Values",Z=E(),ce(Q.$$.fragment),K=E(),ne=P("div"),ge=P("h3"),ge.textContent="Final Values for Each Stimulus and All Participants",pe=E();for(let q=0;q<we.length;q+=1)we[q].c();de=E(),re=P("div"),ae=P("h3"),ae.textContent="Feedback",W=E();for(let q=0;q<qe.length;q+=1)qe[q].c();A(l,"type","file"),A(l,"accept",".json,.csv"),l.multiple=!0},m(q,_e){O(q,t,_e),y(t,n),y(t,r),y(t,i),y(i,o),y(o,a),y(o,l),y(i,s),y(i,u),y(t,f),y(t,h),y(h,d),y(h,m),y(h,g),y(h,v),y(h,w),y(h,_),y(t,x),y(t,M),y(M,S),y(M,T);for(let U=0;U<te.length;U+=1)te[U]&&te[U].m(M,null);y(t,I),y(t,L),y(L,C),y(L,G);for(let U=0;U<ye.length;U+=1)ye[U]&&ye[U].m(L,null);y(t,Y),y(t,N);for(let U=0;U<me.length;U+=1)me[U]&&me[U].m(N,null);y(t,$),y(t,V);for(let U=0;U<Te.length;U+=1)Te[U]&&Te[U].m(V,null);y(t,le),y(t,ie),y(ie,se),y(ie,Z),ue(Q,ie,null),y(t,K),y(t,ne),y(ne,ge),y(ne,pe);for(let U=0;U<we.length;U+=1)we[U]&&we[U].m(ne,null);y(t,de),y(t,re),y(re,ae),y(re,W);for(let U=0;U<qe.length;U+=1)qe[U]&&qe[U].m(re,null);ee=!0,oe||(F=[Re(l,"input",e[5]),Re(u,"click",e[6])],oe=!0)},p(q,_e){if((!ee||_e[0]&1)&&c!==(c=q[0].length+"")&&Fe(d,c),(!ee||_e[0]&2)&&p!==(p=q[1].length+"")&&Fe(g,p),(!ee||_e[0]&16)&&b!==(b=q[4].length+"")&&Fe(w,b),_e[0]&1){he=Ue(ct(q[0],cm).map(hm));let D;for(D=0;D<he.length;D+=1){const k=rm(q,he,D);te[D]?te[D].p(k,_e):(te[D]=im(k),te[D].c(),te[D].m(M,null))}for(;D<te.length;D+=1)te[D].d(1);te.length=he.length}if(_e[0]&1){ve=Ue(ct(q[0],dm).sort(mm));let D;for(D=0;D<ve.length;D+=1){const k=nm(q,ve,D);ye[D]?ye[D].p(k,_e):(ye[D]=om(k),ye[D].c(),ye[D].m(L,null))}for(;D<ye.length;D+=1)ye[D].d(1);ye.length=ve.length}if(_e[0]&2){xe=Ue(ct(q[1],pm));let D;for(D=0;D<xe.length;D+=1){const k=tm(q,xe,D);me[D]?(me[D].p(k,_e),R(me[D],1)):(me[D]=am(k),me[D].c(),R(me[D],1),me[D].m(N,null))}for(He(),D=xe.length;D<me.length;D+=1)Ye(D);We()}if(_e[0]&2){Ge=Ue(q[1]);let D;for(D=0;D<Ge.length;D+=1){const k=em(q,Ge,D);Te[D]?(Te[D].p(k,_e),R(Te[D],1)):(Te[D]=lm(k),Te[D].c(),R(Te[D],1),Te[D].m(V,null))}for(He(),D=Ge.length;D<Te.length;D+=1)Pe(D);We()}const U={};if(_e[0]&8&&(U.stimuli=q[3]),Q.$set(U),_e[0]&12){st=Ue(q[3]);let D;for(D=0;D<st.length;D+=1){const k=Q0(q,st,D);we[D]?(we[D].p(k,_e),R(we[D],1)):(we[D]=sm(k),we[D].c(),R(we[D],1),we[D].m(ne,null))}for(He(),D=st.length;D<we.length;D+=1)Be(D);We()}if(_e[0]&1){bt=Ue(q[0].filter(gm));let D;for(D=0;D<bt.length;D+=1){const k=K0(q,bt,D);qe[D]?qe[D].p(k,_e):(qe[D]=fm(k),qe[D].c(),qe[D].m(re,null))}for(;D<qe.length;D+=1)qe[D].d(1);qe.length=bt.length}},i(q){if(!ee){for(let _e=0;_e<xe.length;_e+=1)R(me[_e]);for(let _e=0;_e<Ge.length;_e+=1)R(Te[_e]);R(Q.$$.fragment,q);for(let _e=0;_e<st.length;_e+=1)R(we[_e]);ee=!0}},o(q){me=me.filter(Boolean);for(let _e=0;_e<me.length;_e+=1)H(me[_e]);Te=Te.filter(Boolean);for(let _e=0;_e<Te.length;_e+=1)H(Te[_e]);H(Q.$$.fragment,q),we=we.filter(Boolean);for(let _e=0;_e<we.length;_e+=1)H(we[_e]);ee=!1},d(q){q&&B(t),wt(te,q),wt(ye,q),wt(me,q),wt(Te,q),fe(Q),wt(we,q),wt(qe,q),oe=!1,It(F)}}}const yD=1200;let _D=.001,vD=20;const cm=e=>e.studyName,hm=([e,t])=>`${e} had ${t.length} parts`,dm=e=>e.encodingOrder,mm=(e,t)=>e[1].lenght-t[1].length,pm=e=>e.testType,bm=e=>e.final,wD=(e,t)=>t,gm=e=>e.demographics.partFeedback.trim().length>0;function MD(e,t,n){let r,i,o,a,l=[],s=null;const u=async g=>{const v=[];s=[];for(const w of g.target.files)if(w.name.endsWith(".csv")){const _=await w.text(),x=mp(_);s=[...s,...x],console.log("p demo",s)}else{const _=await w.text();v.push(JSON.parse(_))}const b=ct(v,w=>w.demographics.partID);console.log(`${b.length} participants`,b),n(0,l=v.filter(w=>w.studyStep==="feedback").map((w,_)=>{var x,M,S;return{...w,demographics:{...w.demographics,internalPID:_+1},prolificDemogr:s.filter(T=>T["Participant id"]===w.demographics.partID)[0],finalAudio:((x=w.tests.filter(T=>T.encoding.startsWith("audio"))[0])==null?void 0:x.final)??null,finalColor:((M=w.tests.filter(T=>T.encoding.startsWith("color"))[0])==null?void 0:M.final)??null,finalWaveform:((S=w.tests.filter(T=>T.encoding.startsWith("waveform"))[0])==null?void 0:S.final)??null,encodingOrder:w.tests.map(T=>T.encoding).join(", ")}}).filter(w=>w.prolificDemogr!==void 0)),console.log("participants",l)},f=g=>{if(g.lenght===0)return[];const v=(w,_=5)=>{const x=Math.floor(w/_)*_;return`${x}-${x+_-1}`},b=[];for(const w of g)for(const[_,x]of w.tests.entries()){let M=x.encoding;b.push({studyName:w.studyName,...w.demographics,partAge:w.demographics.partAge?w.demographics.partAge:v(w.prolificDemogr.Age,10),partSex:w.demographics.partGender?w.demographics.partGender:w.prolificDemogr.Sex,countryBirth:w.prolificDemogr["Country of birth"],countryResidence:w.prolificDemogr["Country of residence"],prolificApprovals:w.prolificDemogr["Total approvals"],...x,date:w.date,testType:M,testOrder:_,isOutlier:d(x,10,.1,2)})}return console.log("tests",b),b},h=(g,v)=>g.filter(b=>b.final<v),c=g=>g.length===0?[]:ct(g,b=>b.testType).map(([b,w])=>{const _=w.map(x=>x.final);return{encoding:b,testType:b,finals:_,finalMean:Vl(_),finalVar:Ul(_),trialCounts:w.map(x=>x.trialCount)}}),d=(g,v=10,b=.1,w=2)=>{const _=g.data.map(Math.abs);let x=0;for(let M=v;M<_.length;M++)if(_[M]>=b&&(x++,x>=w))return!0;return!1},m=()=>{const g=JSON.stringify(l,void 0,2),v=new Blob([g],{type:"text/plain;charset=utf-8"});Bl(v,"participants.json");const b=JSON.stringify(r,void 0,2),w=new Blob([b],{type:"text/plain;charset=utf-8"});Bl(w,"tests.json")},p=g=>Math.abs(g);return e.$$.update=()=>{e.$$.dirty[0]&1&&n(1,r=f(l)),e.$$.dirty[0]&2&&n(4,i=h(r,vD)),e.$$.dirty[0]&2&&n(3,o=c(r)),e.$$.dirty[0]&2&&n(2,a=Rt(r.map(g=>Math.abs(g.final)))),e.$$.dirty[0]&2&&console.log("tests by enc",ct(r,g=>g.testType))},[l,r,a,o,i,u,m,p]}class xD extends nt{constructor(t){super(),tt(this,t,MD,gD,et,{},null,[-1,-1])}}function PD(e){let t,n;return t=new xD({}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function SD(e){let t,n;return t=new bD({}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function AD(e){let t,n;return t=new V$({}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function kD(e){let t,n;return t=new P$({}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function ED(e){let t,n;return t=new L$({}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function CD(e){let t,n;return t=new l$({}),{c(){ce(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){H(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function TD(e){let t,n,r,i,o,a;const l=[CD,ED,kD,AD,SD,PD],s=[];function u(f,h){return f[0]==="playground"?0:f[0]==="study_8note"?1:f[0]==="study_drums"?2:f[0]==="study_tempi"?3:f[0]==="analysis"?4:f[0]==="analysis2"?5:-1}return~(i=u(e))&&(o=s[i]=l[i](e)),{c(){t=P("main"),n=P("h1"),n.textContent="Rhythm Error Sensitivity Study",r=E(),o&&o.c()},m(f,h){O(f,t,h),y(t,n),y(t,r),~i&&s[i].m(t,null),a=!0},p:Ce,i(f){a||(R(o),a=!0)},o(f){H(o),a=!1},d(f){f&&B(t),~i&&s[i].d()}}}function $D(e){let t=rn(window,"p");return console.log(t),[t]}class DD extends nt{constructor(t){super(),tt(this,t,$D,TD,et,{})}}new DD({target:document.getElementById("app")});export{c2 as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-CcMunDgN.js","assets/index-L_DRW0pa.js","assets/browser-DJHd4PDt.js","assets/index-D9673tnx.js","assets/index-DMiZMqPG.js","assets/index-D7HLituM.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

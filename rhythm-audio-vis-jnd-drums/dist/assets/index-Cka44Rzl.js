import{g as A}from"./index-MCk_LybK.js";function v(l,n){for(var f=0;f<n.length;f++){const a=n[f];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in l)){const o=Object.getOwnPropertyDescriptor(a,i);o&&Object.defineProperty(l,i,o.get?o:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}const M={pcm8:(l,n,f,a,i)=>{let o=new Uint8Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=o[p++]-128;f[t][r]=e<0?e/128:e/127}},pcm16:(l,n,f,a,i)=>{let o=new Int16Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=o[p++];f[t][r]=e<0?e/32768:e/32767}},pcm24:(l,n,f,a,i)=>{let o=new Uint8Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=o[p++],m=o[p++],u=o[p++],c=e+(m<<8)+(u<<16),s=c>8388608?c-16777216:c;f[t][r]=s<0?s/8388608:s/8388607}},pcm32:(l,n,f,a,i)=>{let o=new Int32Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=o[p++];f[t][r]=e<0?e/2147483648:e/2147483647}},pcm32f:(l,n,f,a,i)=>{let o=new Float32Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t)f[t][r]=o[p++]},pcm64f:(l,n,f,a,i)=>{let o=new Float64Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t)f[t][r]=o[p++]}},b={pcm8:(l,n,f,a,i)=>{let o=new Uint8Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=Math.max(-1,Math.min(f[t][r],1));e=(e*.5+.5)*255|0,o[p++]=e}},pcm16:(l,n,f,a,i)=>{let o=new Int16Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=Math.max(-1,Math.min(f[t][r],1));e=(e<0?e*32768:e*32767)|0,o[p++]=e}},pcm24:(l,n,f,a,i)=>{let o=new Uint8Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=Math.max(-1,Math.min(f[t][r],1));e=(e<0?16777216+e*8388608:e*8388607)|0,o[p++]=e>>0&255,o[p++]=e>>8&255,o[p++]=e>>16&255}},pcm32:(l,n,f,a,i)=>{let o=new Int32Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=Math.max(-1,Math.min(f[t][r],1));e=(e<0?e*2147483648:e*2147483647)|0,o[p++]=e}},pcm32f:(l,n,f,a,i)=>{let o=new Float32Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=Math.max(-1,Math.min(f[t][r],1));o[p++]=e}},pcm64f:(l,n,f,a,i)=>{let o=new Float64Array(l,n),p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){let e=Math.max(-1,Math.min(f[t][r],1));o[p++]=e}}};function x(l,n,f){let a="pcm"+n+(f?"f":""),i=l[a];if(!i)throw new TypeError("Unsupported data format: "+a);return i}function U(l){let n=0,f=0;l.buffer?(n=l.byteOffset,f=l.length,l=l.buffer):(n=0,f=l.byteLength);let a=new DataView(l);function i(){let e=a.getUint8(n);return n++,e}function o(){let e=a.getUint16(n,!0);return n+=2,e}function p(){let e=a.getUint32(n,!0);return n+=4,e}function r(e){let m="";for(let u=0;u<e;++u)m+=String.fromCharCode(i());return m}if(r(4)!=="RIFF")throw new TypeError("Invalid WAV file");if(p(),r(4)!=="WAVE")throw new TypeError("Invalid WAV file");let t;for(;n<f;){let e=r(4),m=p(),u=n+m;switch(e){case"fmt ":let c=o();if(c!==1&&c!==3)throw new TypeError("Unsupported format in WAV file: "+c.toString(16));t={format:"lpcm",floatingPoint:c===3,channels:o(),sampleRate:p(),byteRate:p(),blockSize:o(),bitDepth:o()};break;case"data":if(!t)throw new TypeError('Missing "fmt " chunk.');let s=Math.floor(m/t.blockSize),h=t.channels,d=t.sampleRate,y=[];for(let w=0;w<h;++w)y[w]=new Float32Array(s);return x(M,t.bitDepth,t.floatingPoint)(l,n,y,h,s),{sampleRate:d,channelData:y}}n=u}}function F(l,n){let f=n.sampleRate||16e3,a=!!(n.float||n.floatingPoint),i=a?32:n.bitDepth|0||16,o=l.length,p=l[0].length,r=new ArrayBuffer(44+p*o*(i>>3)),t=new DataView(r),e=0;function m(h){t.setUint8(e++,h)}function u(h){t.setUint16(e,h,!0),e+=2}function c(h){t.setUint32(e,h,!0),e+=4}function s(h){for(var d=0;d<h.length;++d)m(h.charCodeAt(d))}return s("RIFF"),c(r.byteLength-8),s("WAVE"),s("fmt "),c(16),u(a?3:1),u(o),c(f),c(f*o*(i>>3)),u(o*(i>>3)),u(i),s("data"),c(r.byteLength-44),x(b,i,a)(r,e,l,o,p),Buffer(r)}var g={decode:U,encode:F};const I=A(g),D=v({__proto__:null,default:I},[g]);export{D as i};

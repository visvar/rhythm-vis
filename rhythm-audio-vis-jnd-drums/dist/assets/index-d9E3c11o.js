var bv=Object.defineProperty;var gv=(e,t,n)=>t in e?bv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Cu=(e,t,n)=>(gv(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Ee(){}function A0(e){return e()}function Jc(){return Object.create(null)}function Ht(e){e.forEach(A0)}function S0(e){return typeof e=="function"}function Ye(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let no;function E0(e,t){return e===t?!0:(no||(no=document.createElement("a")),no.href=t,e===no.href)}function yv(e){return Object.keys(e).length===0}function M(e,t){e.appendChild(t)}function q(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function fr(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function A(e){return document.createElement(e)}function Go(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function _e(e){return document.createTextNode(e)}function N(){return _e(" ")}function Sa(){return _e("")}function Le(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function C(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function bn(e){return e===""?null:+e}function vv(e){return Array.from(e.childNodes)}function lt(e,t){t=""+t,e.data!==t&&(e.data=t)}function $e(e,t){e.value=t??""}function Re(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ei(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ef(e){const t=e.querySelector(":checked");return t&&t.__value}let ia;function Ki(e){ia=e}function kf(){if(!ia)throw new Error("Function called outside component initialization");return ia}function wi(e){kf().$$.on_mount.push(e)}function tn(e){kf().$$.after_update.push(e)}function wv(e){kf().$$.on_destroy.push(e)}const Hr=[],ft=[];let jr=[];const eh=[],_v=Promise.resolve();let wl=!1;function Mv(){wl||(wl=!0,_v.then(k0))}function ti(e){jr.push(e)}const Tu=new Set;let Rr=0;function k0(){if(Rr!==0)return;const e=ia;do{try{for(;Rr<Hr.length;){const t=Hr[Rr];Rr++,Ki(t),xv(t.$$)}}catch(t){throw Hr.length=0,Rr=0,t}for(Ki(null),Hr.length=0,Rr=0;ft.length;)ft.pop()();for(let t=0;t<jr.length;t+=1){const n=jr[t];Tu.has(n)||(Tu.add(n),n())}jr.length=0}while(Hr.length);for(;eh.length;)eh.pop()();wl=!1,Tu.clear(),Ki(e)}function xv(e){if(e.fragment!==null){e.update(),Ht(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ti)}}function Pv(e){const t=[],n=[];jr.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),jr=t}const To=new Set;let hr;function nt(){hr={r:0,c:[],p:hr}}function rt(){hr.r||Ht(hr.c),hr=hr.p}function R(e,t){e&&e.i&&(To.delete(e),e.i(t))}function V(e,t,n,r){if(e&&e.o){if(To.has(e))return;To.add(e),hr.c.push(()=>{To.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Et(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function me(e){e&&e.c()}function he(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),ti(()=>{const a=e.$$.on_mount.map(A0).filter(S0);e.$$.on_destroy?e.$$.on_destroy.push(...a):Ht(a),e.$$.on_mount=[]}),i.forEach(ti)}function de(e,t){const n=e.$$;n.fragment!==null&&(Pv(n.after_update),Ht(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Av(e,t){e.$$.dirty[0]===-1&&(Hr.push(e),Mv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function je(e,t,n,r,i,a,o=null,s=[-1]){const u=ia;Ki(e);const l=e.$$={fragment:null,ctx:[],props:a,update:Ee,not_equal:i,bound:Jc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Jc(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};o&&o(l.root);let f=!1;if(l.ctx=n?n(e,t.props||{},(h,c,...m)=>{const d=m.length?m[0]:c;return l.ctx&&i(l.ctx[h],l.ctx[h]=d)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](d),f&&Av(e,h)),c}):[],l.update(),f=!0,Ht(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const h=vv(t.target);l.fragment&&l.fragment.l(h),h.forEach(O)}else l.fragment&&l.fragment.c();t.intro&&R(e.$$.fragment),he(e,t.target,t.anchor),k0()}Ki(u)}class Xe{constructor(){Cu(this,"$$");Cu(this,"$$set")}$destroy(){de(this,1),this.$destroy=Ee}$on(t,n){if(!S0(n))return Ee;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!yv(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Sv="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Sv);function _t(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ea(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fs(e){let t,n,r;e.length!==2?(t=_t,n=(s,u)=>_t(e(s),u),r=(s,u)=>e(s)-u):(t=e===_t||e===Ea?e:Ev,n=e,r=e);function i(s,u,l=0,f=s.length){if(l<f){if(t(u,u)!==0)return f;do{const h=l+f>>>1;n(s[h],u)<0?l=h+1:f=h}while(l<f)}return l}function a(s,u,l=0,f=s.length){if(l<f){if(t(u,u)!==0)return f;do{const h=l+f>>>1;n(s[h],u)<=0?l=h+1:f=h}while(l<f)}return l}function o(s,u,l=0,f=s.length){const h=i(s,u,l,f-1);return h>l&&r(s[h-1],u)>-r(s[h],u)?h-1:h}return{left:i,center:o,right:a}}function Ev(){return 0}function C0(e){return e===null?NaN:+e}function*kv(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Cv=Fs(_t),Ls=Cv.right;Fs(C0).center;function Cf(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function Tv(e){return e.length|0}function $v(e){return!(e>0)}function Dv(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function Nv(e){return t=>e(...t)}function Bv(...e){const t=typeof e[e.length-1]=="function"&&Nv(e.pop());e=e.map(Dv);const n=e.map(Tv),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some($v))return a;for(;;){a.push(i.map((s,u)=>e[u][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function Fv(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function Tf(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function Is(e,t){const n=Tf(e,t);return n&&Math.sqrt(n)}function Lt(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Mr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,s=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);s&&(n[r++]=s),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class xr extends Map{constructor(t,n=D0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(_l(this,t))}has(t){return super.has(_l(this,t))}set(t,n){return super.set(T0(this,t),n)}delete(t){return super.delete($0(this,t))}}class Rs extends Set{constructor(t,n=D0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(_l(this,t))}add(t){return super.add(T0(this,t))}delete(t){return super.delete($0(this,t))}}function _l({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function T0({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function $0({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function D0(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Uo(e){return e}function Os(e,...t){return qs(e,Uo,Uo,t)}function dr(e,...t){return qs(e,Array.from,Uo,t)}function Xr(e,t,...n){return qs(e,Uo,t,n)}function Lv(e,t,...n){return qs(e,Array.from,t,n)}function qs(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new xr,u=r[o++];let l=-1;for(const f of a){const h=u(f,++l,a),c=s.get(h);c?c.push(f):s.set(h,[f])}for(const[f,h]of s)s.set(f,i(h,o));return t(s)}(e,0)}function Iv(e,t){return Array.from(t,n=>e[n])}function aa(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const s=Ho(o[i],o[a]);if(s)return s}})):(n=e.map(n),r.sort((i,a)=>Ho(n[i],n[a]))),Iv(e,r)}return e.sort(N0(n))}function N0(e=_t){if(e===_t)return Ho;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Ho(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function $f(e,t,n){return(t.length!==2?aa(Xr(e,t,n),([r,i],[a,o])=>_t(i,o)||_t(r,a)):aa(Os(e,n),([r,i],[a,o])=>t(i,o)||_t(r,a))).map(([r])=>r)}const Rv=Math.sqrt(50),Ov=Math.sqrt(10),qv=Math.sqrt(2);function Wo(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Rv?10:a>=Ov?5:a>=qv?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/o,s=Math.round(e*l),u=Math.round(t*l),s/l<e&&++s,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,s=Math.round(e/l),u=Math.round(t/l),s*l<e&&++s,u*l>t&&--u),u<s&&.5<=n&&n<2?Wo(e,t,n*2):[s,u,l]}function oa(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Wo(t,e,n):Wo(e,t,n);if(!(a>=i))return[];const s=a-i+1,u=new Array(s);if(r)if(o<0)for(let l=0;l<s;++l)u[l]=(a-l)/-o;else for(let l=0;l<s;++l)u[l]=(a-l)*o;else if(o<0)for(let l=0;l<s;++l)u[l]=(i+l)/-o;else for(let l=0;l<s;++l)u[l]=(i+l)*o;return u}function Vo(e,t,n){return t=+t,e=+e,n=+n,Wo(e,t,n)[2]}function Ml(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Vo(t,e,n):Vo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function zv(e){return Math.max(1,Math.ceil(Math.log(Cf(e))/Math.LN2)+1)}function zt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Gv(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Nn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Uv(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function B0(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Ho:N0(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,f=Math.log(u),h=.5*Math.exp(2*f/3),c=.5*Math.sqrt(f*h*(u-h)/u)*(l-u/2<0?-1:1),m=Math.max(n,Math.floor(t-l*h/u+c)),d=Math.min(r,Math.floor(t+(u-l)*h/u+c));B0(e,t,m,d,i)}const a=e[t];let o=n,s=r;for(Ei(e,n,t),i(e[r],a)>0&&Ei(e,n,r);o<s;){for(Ei(e,o,s),++o,--s;i(e[o],a)<0;)++o;for(;i(e[s],a)>0;)--s}i(e[n],a)===0?Ei(e,n,s):(++s,Ei(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Ei(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function F0(e,t=_t){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?_t(o,i)>0:_t(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function ni(e,t,n){if(e=Float64Array.from(kv(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Nn(e);if(t>=1)return zt(e);var r,i=(r-1)*t,a=Math.floor(i),o=zt(B0(e,a).subarray(0,a+1)),s=Nn(e.subarray(a+1));return o+(s-o)*(i-a)}}function Hv(e,t,n=C0){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function Wv(e,t,n){const r=Cf(e),i=ni(e,.75)-ni(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function L0(e,t,n){const r=Cf(e),i=Is(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function zs(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function xl(e,t){return ni(e,.5,t)}function*Vv(e){for(const t of e)yield*t}function I0(e){return Array.from(Vv(e))}function Yv(e,t){const n=new xr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function jv(e,t=Xv){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function Xv(e,t){return[e,t]}function Pl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Kn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Yo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Zv(e){return e}var $u=1,Du=2,Al=3,ro=4,th=1e-6;function Kv(e){return"translate("+e+",0)"}function Qv(e){return"translate(0,"+e+")"}function Jv(e){return t=>+e(t)}function e3(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function t3(){return!this.__axis}function n3(e,t){var n=[],r=null,i=null,a=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===$u||e===ro?-1:1,f=e===ro||e===Du?"x":"y",h=e===$u||e===Al?Kv:Qv;function c(m){var d=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):Zv),g=Math.max(a,0)+s,v=t.range(),b=+v[0]+u,w=+v[v.length-1]+u,y=(t.bandwidth?e3:Jv)(t.copy(),u),_=m.selection?m.selection():m,x=_.selectAll(".domain").data([null]),P=_.selectAll(".tick").data(d,t).order(),T=P.exit(),S=P.enter().append("g").attr("class","tick"),$=P.select("line"),E=P.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(S),$=$.merge(S.append("line").attr("stroke","currentColor").attr(f+"2",l*a)),E=E.merge(S.append("text").attr("fill","currentColor").attr(f,l*g).attr("dy",e===$u?"0em":e===Al?"0.71em":"0.32em")),m!==_&&(x=x.transition(m),P=P.transition(m),$=$.transition(m),E=E.transition(m),T=T.transition(m).attr("opacity",th).attr("transform",function(L){return isFinite(L=y(L))?h(L+u):this.getAttribute("transform")}),S.attr("opacity",th).attr("transform",function(L){var U=this.parentNode.__axis;return h((U&&isFinite(U=U(L))?U:y(L))+u)})),T.remove(),x.attr("d",e===ro||e===Du?o?"M"+l*o+","+b+"H"+u+"V"+w+"H"+l*o:"M"+u+","+b+"V"+w:o?"M"+b+","+l*o+"V"+u+"H"+w+"V"+l*o:"M"+b+","+u+"H"+w),P.attr("opacity",1).attr("transform",function(L){return h(y(L)+u)}),$.attr(f+"2",l*a),E.attr(f,l*g).text(p),_.filter(t3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Du?"start":e===ro?"end":"middle"),_.each(function(){this.__axis=y})}return c.scale=function(m){return arguments.length?(t=m,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),c):n.slice()},c.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),c):r&&r.slice()},c.tickFormat=function(m){return arguments.length?(i=m,c):i},c.tickSize=function(m){return arguments.length?(a=o=+m,c):a},c.tickSizeInner=function(m){return arguments.length?(a=+m,c):a},c.tickSizeOuter=function(m){return arguments.length?(o=+m,c):o},c.tickPadding=function(m){return arguments.length?(s=+m,c):s},c.offset=function(m){return arguments.length?(u=+m,c):u},c}function r3(e){return n3(Al,e)}var i3={value:()=>{}};function R0(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new $o(n)}function $o(e){this._=e}function a3(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}$o.prototype=R0.prototype={constructor:$o,on:function(e,t){var n=this._,r=a3(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=o3(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=nh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=nh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new $o(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function o3(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function nh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=i3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Sl="http://www.w3.org/1999/xhtml";const ri={svg:"http://www.w3.org/2000/svg",xhtml:Sl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ri.hasOwnProperty(t)?{space:ri[t],local:e}:e}function s3(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Sl&&t.documentElement.namespaceURI===Sl?t.createElement(e):t.createElementNS(n,e)}}function u3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Us(e){var t=Gs(e);return(t.local?u3:s3)(t)}function l3(){}function Df(e){return e==null?l3:function(){return this.querySelector(e)}}function f3(e){typeof e!="function"&&(e=Df(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),u,l,f=0;f<o;++f)(u=a[f])&&(l=e.call(u,u.__data__,f,a))&&("__data__"in u&&(l.__data__=u.__data__),s[f]=l);return new Ct(r,this._parents)}function c3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function h3(){return[]}function O0(e){return e==null?h3:function(){return this.querySelectorAll(e)}}function d3(e){return function(){return c3(e.apply(this,arguments))}}function m3(e){typeof e=="function"?e=d3(e):e=O0(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ct(r,i)}function q0(e){return function(){return this.matches(e)}}function z0(e){return function(t){return t.matches(e)}}var p3=Array.prototype.find;function b3(e){return function(){return p3.call(this.children,e)}}function g3(){return this.firstElementChild}function y3(e){return this.select(e==null?g3:b3(typeof e=="function"?e:z0(e)))}var v3=Array.prototype.filter;function w3(){return Array.from(this.children)}function _3(e){return function(){return v3.call(this.children,e)}}function M3(e){return this.selectAll(e==null?w3:_3(typeof e=="function"?e:z0(e)))}function x3(e){typeof e!="function"&&(e=q0(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new Ct(r,this._parents)}function G0(e){return new Array(e.length)}function P3(){return new Ct(this._enter||this._groups.map(G0),this._parents)}function jo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jo.prototype={constructor:jo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function A3(e){return function(){return e}}function S3(e,t,n,r,i,a){for(var o=0,s,u=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new jo(e,a[o]);for(;o<u;++o)(s=t[o])&&(i[o]=s)}function E3(e,t,n,r,i,a,o){var s,u,l=new Map,f=t.length,h=a.length,c=new Array(f),m;for(s=0;s<f;++s)(u=t[s])&&(c[s]=m=o.call(u,u.__data__,s,t)+"",l.has(m)?i[s]=u:l.set(m,u));for(s=0;s<h;++s)m=o.call(e,a[s],s,a)+"",(u=l.get(m))?(r[s]=u,u.__data__=a[s],l.delete(m)):n[s]=new jo(e,a[s]);for(s=0;s<f;++s)(u=t[s])&&l.get(c[s])===u&&(i[s]=u)}function k3(e){return e.__data__}function C3(e,t){if(!arguments.length)return Array.from(this,k3);var n=t?E3:S3,r=this._parents,i=this._groups;typeof e!="function"&&(e=A3(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var f=r[l],h=i[l],c=h.length,m=T3(e.call(f,f&&f.__data__,l,r)),d=m.length,p=s[l]=new Array(d),g=o[l]=new Array(d),v=u[l]=new Array(c);n(f,h,p,g,v,m,t);for(var b=0,w=0,y,_;b<d;++b)if(y=p[b]){for(b>=w&&(w=b+1);!(_=g[w])&&++w<d;);y._next=_||null}}return o=new Ct(o,r),o._enter=s,o._exit=u,o}function T3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $3(){return new Ct(this._exit||this._groups.map(G0),this._parents)}function D3(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function N3(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var l=n[u],f=r[u],h=l.length,c=s[u]=new Array(h),m,d=0;d<h;++d)(m=l[d]||f[d])&&(c[d]=m);for(;u<i;++u)s[u]=n[u];return new Ct(s,this._parents)}function B3(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function F3(e){e||(e=L3);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),l,f=0;f<s;++f)(l=o[f])&&(u[f]=l);u.sort(t)}return new Ct(i,this._parents).order()}function L3(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function I3(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function R3(){return Array.from(this)}function O3(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function q3(){let e=0;for(const t of this)++e;return e}function z3(){return!this.node()}function G3(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function U3(e){return function(){this.removeAttribute(e)}}function H3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function W3(e,t){return function(){this.setAttribute(e,t)}}function V3(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Y3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function j3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function X3(e,t){var n=Gs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?H3:U3:typeof t=="function"?n.local?j3:Y3:n.local?V3:W3)(n,t))}function U0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Z3(e){return function(){this.style.removeProperty(e)}}function K3(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Q3(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function J3(e,t,n){return arguments.length>1?this.each((t==null?Z3:typeof t=="function"?Q3:K3)(e,t,n??"")):ii(this.node(),e)}function ii(e,t){return e.style.getPropertyValue(t)||U0(e).getComputedStyle(e,null).getPropertyValue(t)}function ew(e){return function(){delete this[e]}}function tw(e,t){return function(){this[e]=t}}function nw(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function rw(e,t){return arguments.length>1?this.each((t==null?ew:typeof t=="function"?nw:tw)(e,t)):this.node()[e]}function H0(e){return e.trim().split(/^|\s+/)}function Nf(e){return e.classList||new W0(e)}function W0(e){this._node=e,this._names=H0(e.getAttribute("class")||"")}W0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function V0(e,t){for(var n=Nf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Y0(e,t){for(var n=Nf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function iw(e){return function(){V0(this,e)}}function aw(e){return function(){Y0(this,e)}}function ow(e,t){return function(){(t.apply(this,arguments)?V0:Y0)(this,e)}}function sw(e,t){var n=H0(e+"");if(arguments.length<2){for(var r=Nf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ow:t?iw:aw)(n,t))}function uw(){this.textContent=""}function lw(e){return function(){this.textContent=e}}function fw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function cw(e){return arguments.length?this.each(e==null?uw:(typeof e=="function"?fw:lw)(e)):this.node().textContent}function hw(){this.innerHTML=""}function dw(e){return function(){this.innerHTML=e}}function mw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function pw(e){return arguments.length?this.each(e==null?hw:(typeof e=="function"?mw:dw)(e)):this.node().innerHTML}function bw(){this.nextSibling&&this.parentNode.appendChild(this)}function gw(){return this.each(bw)}function yw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vw(){return this.each(yw)}function ww(e){var t=typeof e=="function"?e:Us(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _w(){return null}function Mw(e,t){var n=typeof e=="function"?e:Us(e),r=t==null?_w:typeof t=="function"?t:Df(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xw(){var e=this.parentNode;e&&e.removeChild(this)}function Pw(){return this.each(xw)}function Aw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ew(e){return this.select(e?Sw:Aw)}function kw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Cw(e){return function(t){e.call(this,t,this.__data__)}}function Tw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function $w(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Dw(e,t,n){return function(){var r=this.__on,i,a=Cw(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Nw(e,t,n){var r=Tw(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,f;u<l;++u)for(i=0,f=s[u];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=t?Dw:$w,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function j0(e,t,n){var r=U0(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Bw(e,t){return function(){return j0(this,e,t)}}function Fw(e,t){return function(){return j0(this,e,t.apply(this,arguments))}}function Lw(e,t){return this.each((typeof t=="function"?Fw:Bw)(e,t))}function*Iw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var X0=[null];function Ct(e,t){this._groups=e,this._parents=t}function ka(){return new Ct([[document.documentElement]],X0)}function Rw(){return this}Ct.prototype=ka.prototype={constructor:Ct,select:f3,selectAll:m3,selectChild:y3,selectChildren:M3,filter:x3,data:C3,enter:P3,exit:$3,join:D3,merge:N3,selection:Rw,order:B3,sort:F3,call:I3,nodes:R3,node:O3,size:q3,empty:z3,each:G3,attr:X3,style:J3,property:rw,classed:sw,text:cw,html:pw,raise:gw,lower:vw,append:ww,insert:Mw,remove:Pw,clone:Ew,datum:kw,on:Nw,dispatch:Lw,[Symbol.iterator]:Iw};function Qi(e){return typeof e=="string"?new Ct([[document.querySelector(e)]],[document.documentElement]):new Ct([[e]],X0)}function Ow(e){let t;for(;t=e.sourceEvent;)e=t;return e}function qw(e,t){if(e=Ow(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function _i(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ca(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nr(){}var Pr=.7,ai=1/Pr,Zr="\\s*([+-]?\\d+)\\s*",sa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zw=/^#([0-9a-f]{3,8})$/,Gw=new RegExp(`^rgb\\(${Zr},${Zr},${Zr}\\)$`),Uw=new RegExp(`^rgb\\(${dn},${dn},${dn}\\)$`),Hw=new RegExp(`^rgba\\(${Zr},${Zr},${Zr},${sa}\\)$`),Ww=new RegExp(`^rgba\\(${dn},${dn},${dn},${sa}\\)$`),Vw=new RegExp(`^hsl\\(${sa},${dn},${dn}\\)$`),Yw=new RegExp(`^hsla\\(${sa},${dn},${dn},${sa}\\)$`),rh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_i(nr,Ar,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ih,formatHex:ih,formatHex8:jw,formatHsl:Xw,formatRgb:ah,toString:ah});function ih(){return this.rgb().formatHex()}function jw(){return this.rgb().formatHex8()}function Xw(){return Z0(this).formatHsl()}function ah(){return this.rgb().formatRgb()}function Ar(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?oh(t):n===3?new et(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?io(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?io(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Gw.exec(e))?new et(t[1],t[2],t[3],1):(t=Uw.exec(e))?new et(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hw.exec(e))?io(t[1],t[2],t[3],t[4]):(t=Ww.exec(e))?io(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Vw.exec(e))?lh(t[1],t[2]/100,t[3]/100,1):(t=Yw.exec(e))?lh(t[1],t[2]/100,t[3]/100,t[4]):rh.hasOwnProperty(e)?oh(rh[e]):e==="transparent"?new et(NaN,NaN,NaN,0):null}function oh(e){return new et(e>>16&255,e>>8&255,e&255,1)}function io(e,t,n,r){return r<=0&&(e=t=n=NaN),new et(e,t,n,r)}function Bf(e){return e instanceof nr||(e=Ar(e)),e?(e=e.rgb(),new et(e.r,e.g,e.b,e.opacity)):new et}function Qn(e,t,n,r){return arguments.length===1?Bf(e):new et(e,t,n,r??1)}function et(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}_i(et,Qn,Ca(nr,{brighter(e){return e=e==null?ai:Math.pow(ai,e),new et(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pr:Math.pow(Pr,e),new et(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new et(br(this.r),br(this.g),br(this.b),Xo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sh,formatHex:sh,formatHex8:Zw,formatRgb:uh,toString:uh}));function sh(){return`#${mr(this.r)}${mr(this.g)}${mr(this.b)}`}function Zw(){return`#${mr(this.r)}${mr(this.g)}${mr(this.b)}${mr((isNaN(this.opacity)?1:this.opacity)*255)}`}function uh(){const e=Xo(this.opacity);return`${e===1?"rgb(":"rgba("}${br(this.r)}, ${br(this.g)}, ${br(this.b)}${e===1?")":`, ${e})`}`}function Xo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function br(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mr(e){return e=br(e),(e<16?"0":"")+e.toString(16)}function lh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Xt(e,t,n,r)}function Z0(e){if(e instanceof Xt)return new Xt(e.h,e.s,e.l,e.opacity);if(e instanceof nr||(e=Ar(e)),!e)return new Xt;if(e instanceof Xt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Xt(o,s,u,e.opacity)}function El(e,t,n,r){return arguments.length===1?Z0(e):new Xt(e,t,n,r??1)}function Xt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}_i(Xt,El,Ca(nr,{brighter(e){return e=e==null?ai:Math.pow(ai,e),new Xt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pr:Math.pow(Pr,e),new Xt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new et(Nu(e>=240?e-240:e+120,i,r),Nu(e,i,r),Nu(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Xt(fh(this.h),ao(this.s),ao(this.l),Xo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xo(this.opacity);return`${e===1?"hsl(":"hsla("}${fh(this.h)}, ${ao(this.s)*100}%, ${ao(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fh(e){return e=(e||0)%360,e<0?e+360:e}function ao(e){return Math.max(0,Math.min(1,e||0))}function Nu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const K0=Math.PI/180,Q0=180/Math.PI,Zo=18,J0=.96422,em=1,tm=.82521,nm=4/29,Kr=6/29,rm=3*Kr*Kr,Kw=Kr*Kr*Kr;function im(e){if(e instanceof mn)return new mn(e.l,e.a,e.b,e.opacity);if(e instanceof Tn)return am(e);e instanceof et||(e=Bf(e));var t=Iu(e.r),n=Iu(e.g),r=Iu(e.b),i=Bu((.2225045*t+.7168786*n+.0606169*r)/em),a,o;return t===n&&n===r?a=o=i:(a=Bu((.4360747*t+.3850649*n+.1430804*r)/J0),o=Bu((.0139322*t+.0971045*n+.7141733*r)/tm)),new mn(116*i-16,500*(a-i),200*(i-o),e.opacity)}function kl(e,t,n,r){return arguments.length===1?im(e):new mn(e,t,n,r??1)}function mn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}_i(mn,kl,Ca(nr,{brighter(e){return new mn(this.l+Zo*(e??1),this.a,this.b,this.opacity)},darker(e){return new mn(this.l-Zo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=J0*Fu(t),e=em*Fu(e),n=tm*Fu(n),new et(Lu(3.1338561*t-1.6168667*e-.4906146*n),Lu(-.9787684*t+1.9161415*e+.033454*n),Lu(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Bu(e){return e>Kw?Math.pow(e,1/3):e/rm+nm}function Fu(e){return e>Kr?e*e*e:rm*(e-nm)}function Lu(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Iu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Qw(e){if(e instanceof Tn)return new Tn(e.h,e.c,e.l,e.opacity);if(e instanceof mn||(e=im(e)),e.a===0&&e.b===0)return new Tn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Q0;return new Tn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Cl(e,t,n,r){return arguments.length===1?Qw(e):new Tn(e,t,n,r??1)}function Tn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function am(e){if(isNaN(e.h))return new mn(e.l,0,0,e.opacity);var t=e.h*K0;return new mn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}_i(Tn,Cl,Ca(nr,{brighter(e){return new Tn(this.h,this.c,this.l+Zo*(e??1),this.opacity)},darker(e){return new Tn(this.h,this.c,this.l-Zo*(e??1),this.opacity)},rgb(){return am(this).rgb()}}));var om=-.14861,Ff=1.78277,Lf=-.29227,Hs=-.90649,ua=1.97294,ch=ua*Hs,hh=ua*Ff,dh=Ff*Lf-Hs*om;function Jw(e){if(e instanceof gr)return new gr(e.h,e.s,e.l,e.opacity);e instanceof et||(e=Bf(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(dh*r+ch*t-hh*n)/(dh+ch-hh),a=r-i,o=(ua*(n-i)-Lf*a)/Hs,s=Math.sqrt(o*o+a*a)/(ua*i*(1-i)),u=s?Math.atan2(o,a)*Q0-120:NaN;return new gr(u<0?u+360:u,s,i,e.opacity)}function gn(e,t,n,r){return arguments.length===1?Jw(e):new gr(e,t,n,r??1)}function gr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}_i(gr,gn,Ca(nr,{brighter(e){return e=e==null?ai:Math.pow(ai,e),new gr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pr:Math.pow(Pr,e),new gr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*K0,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new et(255*(t+n*(om*r+Ff*i)),255*(t+n*(Lf*r+Hs*i)),255*(t+n*(ua*r)),this.opacity)}}));function e_(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function t_(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return e_((n-r/t)*t,o,i,a,s)}}const Ws=e=>()=>e;function sm(e,t){return function(n){return e+n*t}}function n_(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function If(e,t){var n=t-e;return n?sm(e,n>180||n<-180?n-360*Math.round(n/360):n):Ws(isNaN(e)?t:e)}function r_(e){return(e=+e)==1?ut:function(t,n){return n-t?n_(t,n,e):Ws(isNaN(t)?n:t)}}function ut(e,t){var n=t-e;return n?sm(e,n):Ws(isNaN(e)?t:e)}const Sr=function e(t){var n=r_(t);function r(i,a){var o=n((i=Qn(i)).r,(a=Qn(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),l=ut(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=e,r}(1);function i_(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=Qn(t[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=e(r),i=e(i),a=e(a),s.opacity=1,function(u){return s.r=r(u),s.g=i(u),s.b=a(u),s+""}}}var a_=i_(t_);function o_(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function s_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function u_(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Ta(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function l_(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function st(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function f_(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ta(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Tl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ru=new RegExp(Tl.source,"g");function c_(e){return function(){return e}}function h_(e){return function(t){return e(t)+""}}function um(e,t){var n=Tl.lastIndex=Ru.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(r=Tl.exec(e))&&(i=Ru.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:st(r,i)})),n=Ru.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?h_(u[0].x):c_(t):(t=u.length,function(l){for(var f=0,h;f<t;++f)s[(h=u[f]).i]=h.x(l);return s.join("")})}function Ta(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ws(t):(n==="number"?st:n==="string"?(r=Ar(t))?(t=r,Sr):um:t instanceof Ar?Sr:t instanceof Date?l_:s_(t)?o_:Array.isArray(t)?u_:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?f_:st)(e,t)}function Rf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var mh=180/Math.PI,$l={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lm(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*mh,skewX:Math.atan(u)*mh,scaleX:o,scaleY:s}}var oo;function d_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$l:lm(t.a,t.b,t.c,t.d,t.e,t.f)}function m_(e){return e==null||(oo||(oo=document.createElementNS("http://www.w3.org/2000/svg","g")),oo.setAttribute("transform",e),!(e=oo.transform.baseVal.consolidate()))?$l:(e=e.matrix,lm(e.a,e.b,e.c,e.d,e.e,e.f))}function fm(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,f,h,c,m,d){if(l!==h||f!==c){var p=m.push("translate(",null,t,null,n);d.push({i:p-4,x:st(l,h)},{i:p-2,x:st(f,c)})}else(h||c)&&m.push("translate("+h+t+c+n)}function o(l,f,h,c){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:st(l,f)})):f&&h.push(i(h)+"rotate("+f+r)}function s(l,f,h,c){l!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:st(l,f)}):f&&h.push(i(h)+"skewX("+f+r)}function u(l,f,h,c,m,d){if(l!==h||f!==c){var p=m.push(i(m)+"scale(",null,",",null,")");d.push({i:p-4,x:st(l,h)},{i:p-2,x:st(f,c)})}else(h!==1||c!==1)&&m.push(i(m)+"scale("+h+","+c+")")}return function(l,f){var h=[],c=[];return l=e(l),f=e(f),a(l.translateX,l.translateY,f.translateX,f.translateY,h,c),o(l.rotate,f.rotate,h,c),s(l.skewX,f.skewX,h,c),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,h,c),l=f=null,function(m){for(var d=-1,p=c.length,g;++d<p;)h[(g=c[d]).i]=g.x(m);return h.join("")}}}var p_=fm(d_,"px, ","px)","deg)"),b_=fm(m_,", ",")",")");function g_(e){return function(t,n){var r=e((t=El(t)).h,(n=El(n)).h),i=ut(t.s,n.s),a=ut(t.l,n.l),o=ut(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const y_=g_(If);function v_(e,t){var n=ut((e=kl(e)).l,(t=kl(t)).l),r=ut(e.a,t.a),i=ut(e.b,t.b),a=ut(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function w_(e){return function(t,n){var r=e((t=Cl(t)).h,(n=Cl(n)).h),i=ut(t.c,n.c),a=ut(t.l,n.l),o=ut(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const __=w_(If);function cm(e){return function t(n){n=+n;function r(i,a){var o=e((i=gn(i)).h,(a=gn(a)).h),s=ut(i.s,a.s),u=ut(i.l,a.l),l=ut(i.opacity,a.opacity);return function(f){return i.h=o(f),i.s=s(f),i.l=u(Math.pow(f,n)),i.opacity=l(f),i+""}}return r.gamma=t,r}(1)}cm(If);var Of=cm(ut);function Vs(e,t){t===void 0&&(t=e,e=Ta);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function Kt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var oi=0,Oi=0,ki=0,hm=1e3,Ko,qi,Qo=0,Er=0,Ys=0,la=typeof performance=="object"&&performance.now?performance:Date,dm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qf(){return Er||(dm(M_),Er=la.now()+Ys)}function M_(){Er=0}function Jo(){this._call=this._time=this._next=null}Jo.prototype=mm.prototype={constructor:Jo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?qf():+n)+(t==null?0:+t),!this._next&&qi!==this&&(qi?qi._next=this:Ko=this,qi=this),this._call=e,this._time=n,Dl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dl())}};function mm(e,t,n){var r=new Jo;return r.restart(e,t,n),r}function x_(){qf(),++oi;for(var e=Ko,t;e;)(t=Er-e._time)>=0&&e._call.call(void 0,t),e=e._next;--oi}function ph(){Er=(Qo=la.now())+Ys,oi=Oi=0;try{x_()}finally{oi=0,A_(),Er=0}}function P_(){var e=la.now(),t=e-Qo;t>hm&&(Ys-=t,Qo=e)}function A_(){for(var e,t=Ko,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ko=n);qi=e,Dl(r)}function Dl(e){if(!oi){Oi&&(Oi=clearTimeout(Oi));var t=e-Er;t>24?(e<1/0&&(Oi=setTimeout(ph,e-la.now()-Ys)),ki&&(ki=clearInterval(ki))):(ki||(Qo=la.now(),ki=setInterval(P_,hm)),oi=1,dm(ph))}}function bh(e,t,n){var r=new Jo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var S_=R0("start","end","cancel","interrupt"),E_=[],pm=0,gh=1,Nl=2,Do=3,yh=4,Bl=5,No=6;function js(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;k_(e,n,{name:t,index:r,group:i,on:S_,tween:E_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:pm})}function zf(e,t){var n=nn(e,t);if(n.state>pm)throw new Error("too late; already scheduled");return n}function vn(e,t){var n=nn(e,t);if(n.state>Do)throw new Error("too late; already running");return n}function nn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function k_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=mm(a,0,n.time);function a(l){n.state=gh,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var f,h,c,m;if(n.state!==gh)return u();for(f in r)if(m=r[f],m.name===n.name){if(m.state===Do)return bh(o);m.state===yh?(m.state=No,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[f]):+f<t&&(m.state=No,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[f])}if(bh(function(){n.state===Do&&(n.state=yh,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Nl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Nl){for(n.state=Do,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(m=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=m);i.length=h+1}}function s(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Bl,1),h=-1,c=i.length;++h<c;)i[h].call(e,f);n.state===Bl&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=No,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function C_(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Nl&&r.state<Bl,r.state=No,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function T_(e){return this.each(function(){C_(this,e)})}function $_(e,t){var n,r;return function(){var i=vn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function D_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=vn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function N_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=nn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?$_:D_)(n,e,t))}function Gf(e,t,n){var r=e._id;return e.each(function(){var i=vn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return nn(i,r).value[t]}}function bm(e,t){var n;return(typeof t=="number"?st:t instanceof Ar?Sr:(n=Ar(t))?(t=n,Sr):um)(e,t)}function B_(e){return function(){this.removeAttribute(e)}}function F_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function I_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function R_(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function O_(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function q_(e,t){var n=Gs(e),r=n==="transform"?b_:bm;return this.attrTween(e,typeof t=="function"?(n.local?O_:R_)(n,r,Gf(this,"attr."+e,t)):t==null?(n.local?F_:B_)(n):(n.local?I_:L_)(n,r,t))}function z_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function G_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function U_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&G_(e,a)),n}return i._value=t,i}function H_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&z_(e,a)),n}return i._value=t,i}function W_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Gs(e);return this.tween(n,(r.local?U_:H_)(r,t))}function V_(e,t){return function(){zf(this,e).delay=+t.apply(this,arguments)}}function Y_(e,t){return t=+t,function(){zf(this,e).delay=t}}function j_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?V_:Y_)(t,e)):nn(this.node(),t).delay}function X_(e,t){return function(){vn(this,e).duration=+t.apply(this,arguments)}}function Z_(e,t){return t=+t,function(){vn(this,e).duration=t}}function K_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?X_:Z_)(t,e)):nn(this.node(),t).duration}function Q_(e,t){if(typeof t!="function")throw new Error;return function(){vn(this,e).ease=t}}function J_(e){var t=this._id;return arguments.length?this.each(Q_(t,e)):nn(this.node(),t).ease}function e5(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;vn(this,e).ease=n}}function t5(e){if(typeof e!="function")throw new Error;return this.each(e5(this._id,e))}function n5(e){typeof e!="function"&&(e=q0(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new Bn(r,this._parents,this._name,this._id)}function r5(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],l=n[s],f=u.length,h=o[s]=new Array(f),c,m=0;m<f;++m)(c=u[m]||l[m])&&(h[m]=c);for(;s<r;++s)o[s]=t[s];return new Bn(o,this._parents,this._name,this._id)}function i5(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function a5(e,t,n){var r,i,a=i5(t)?zf:vn;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function o5(e,t){var n=this._id;return arguments.length<2?nn(this.node(),n).on.on(e):this.each(a5(n,e,t))}function s5(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function u5(){return this.on("end.remove",s5(this._id))}function l5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Df(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,l=a[o]=new Array(u),f,h,c=0;c<u;++c)(f=s[c])&&(h=e.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),l[c]=h,js(l[c],t,n,c,l,nn(f,n)));return new Bn(a,this._parents,t,n)}function f5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=O0(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],l=u.length,f,h=0;h<l;++h)if(f=u[h]){for(var c=e.call(f,f.__data__,h,u),m,d=nn(f,n),p=0,g=c.length;p<g;++p)(m=c[p])&&js(m,t,n,p,c,d);a.push(c),o.push(f)}return new Bn(a,o,t,n)}var c5=ka.prototype.constructor;function h5(){return new c5(this._groups,this._parents)}function d5(e,t){var n,r,i;return function(){var a=ii(this,e),o=(this.style.removeProperty(e),ii(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function gm(e){return function(){this.style.removeProperty(e)}}function m5(e,t,n){var r,i=n+"",a;return function(){var o=ii(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function p5(e,t,n){var r,i,a;return function(){var o=ii(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),ii(this,e))),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}function b5(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var u=vn(this,e),l=u.on,f=u.value[a]==null?s||(s=gm(t)):void 0;(l!==n||i!==f)&&(r=(n=l).copy()).on(o,i=f),u.on=r}}function g5(e,t,n){var r=(e+="")=="transform"?p_:bm;return t==null?this.styleTween(e,d5(e,r)).on("end.style."+e,gm(e)):typeof t=="function"?this.styleTween(e,p5(e,r,Gf(this,"style."+e,t))).each(b5(this._id,e)):this.styleTween(e,m5(e,r,t),n).on("end.style."+e,null)}function y5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function v5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&y5(e,o,n)),r}return a._value=t,a}function w5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,v5(e,t,n??""))}function _5(e){return function(){this.textContent=e}}function M5(e){return function(){var t=e(this);this.textContent=t??""}}function x5(e){return this.tween("text",typeof e=="function"?M5(Gf(this,"text",e)):_5(e==null?"":e+""))}function P5(e){return function(t){this.textContent=e.call(this,t)}}function A5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&P5(i)),t}return r._value=e,r}function S5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,A5(e))}function E5(){for(var e=this._name,t=this._id,n=ym(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var f=nn(u,t);js(u,e,n,l,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Bn(r,this._parents,e,n)}function k5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var l=vn(this,r),f=l.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),i===0&&a()})}var C5=0;function Bn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ym(){return++C5}var Mn=ka.prototype;Bn.prototype={constructor:Bn,select:l5,selectAll:f5,selectChild:Mn.selectChild,selectChildren:Mn.selectChildren,filter:n5,merge:r5,selection:h5,transition:E5,call:Mn.call,nodes:Mn.nodes,node:Mn.node,size:Mn.size,empty:Mn.empty,each:Mn.each,on:o5,attr:q_,attrTween:W_,style:g5,styleTween:w5,text:x5,textTween:S5,remove:u5,tween:N_,delay:j_,duration:K_,ease:J_,easeVarying:t5,end:k5,[Symbol.iterator]:Mn[Symbol.iterator]};function T5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $5={time:null,delay:0,duration:250,ease:T5};function D5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function N5(e){var t,n;e instanceof Bn?(t=e._id,e=e._name):(t=ym(),(n=$5).time=qf(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&js(u,e,t,l,o,n||D5(u,t));return new Bn(r,this._parents,e,t)}ka.prototype.interrupt=T_;ka.prototype.transition=N5;const Fl=Math.PI,Ll=2*Fl,lr=1e-6,B5=Ll-lr;function vm(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function F5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return vm;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class wm{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?vm:F5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,u=r-t,l=i-n,f=o-t,h=s-n,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(c>lr)if(!(Math.abs(h*u-l*f)>lr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,d=i-s,p=u*u+l*l,g=m*m+d*d,v=Math.sqrt(p),b=Math.sqrt(c),w=a*Math.tan((Fl-Math.acos((p+c-g)/(2*v*b)))/2),y=w/b,_=w/v;Math.abs(y-1)>lr&&this._append`L${t+y*f},${n+y*h}`,this._append`A${a},${a},0,0,${+(h*m>f*d)},${this._x1=t+_*u},${this._y1=n+_*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=t+s,f=n+u,h=1^o,c=o?i-a:a-i;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>lr||Math.abs(this._y1-f)>lr)&&this._append`L${l},${f}`,r&&(c<0&&(c=c%Ll+Ll),c>B5?this._append`A${r},${r},0,1,${h},${t-s},${n-u}A${r},${r},0,1,${h},${this._x1=l},${this._y1=f}`:c>lr&&this._append`A${r},${r},0,${+(c>=Fl)},${h},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Vn(e=3){return new wm(+e)}var vh={},Ou={},qu=34,Ci=10,zu=13;function _m(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function L5(e,t){var n=_m(e);return function(r,i){return t(n(r),i,e)}}function wh(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function yt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function I5(e){return e<0?"-"+yt(-e,6):e>9999?"+"+yt(e,6):yt(e,4)}function R5(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":I5(e.getUTCFullYear())+"-"+yt(e.getUTCMonth()+1,2)+"-"+yt(e.getUTCDate(),2)+(i?"T"+yt(t,2)+":"+yt(n,2)+":"+yt(r,2)+"."+yt(i,3)+"Z":r?"T"+yt(t,2)+":"+yt(n,2)+":"+yt(r,2)+"Z":n||t?"T"+yt(t,2)+":"+yt(n,2)+"Z":"")}function O5(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(h,c){var m,d,p=i(h,function(g,v){if(m)return m(g,v-1);d=g,m=c?L5(g,c):_m(g)});return p.columns=d||[],p}function i(h,c){var m=[],d=h.length,p=0,g=0,v,b=d<=0,w=!1;h.charCodeAt(d-1)===Ci&&--d,h.charCodeAt(d-1)===zu&&--d;function y(){if(b)return Ou;if(w)return w=!1,vh;var x,P=p,T;if(h.charCodeAt(P)===qu){for(;p++<d&&h.charCodeAt(p)!==qu||h.charCodeAt(++p)===qu;);return(x=p)>=d?b=!0:(T=h.charCodeAt(p++))===Ci?w=!0:T===zu&&(w=!0,h.charCodeAt(p)===Ci&&++p),h.slice(P+1,x-1).replace(/""/g,'"')}for(;p<d;){if((T=h.charCodeAt(x=p++))===Ci)w=!0;else if(T===zu)w=!0,h.charCodeAt(p)===Ci&&++p;else if(T!==n)continue;return h.slice(P,x)}return b=!0,h.slice(P,d)}for(;(v=y())!==Ou;){for(var _=[];v!==vh&&v!==Ou;)_.push(v),v=y();c&&(_=c(_,g++))==null||m.push(_)}return m}function a(h,c){return h.map(function(m){return c.map(function(d){return f(m[d])}).join(e)})}function o(h,c){return c==null&&(c=wh(h)),[c.map(f).join(e)].concat(a(h,c)).join(`
`)}function s(h,c){return c==null&&(c=wh(h)),a(h,c).join(`
`)}function u(h){return h.map(l).join(`
`)}function l(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?R5(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:u,formatRow:l,formatValue:f}}var q5=O5(","),z5=q5.parse;function G5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function es(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function si(e){return e=es(Math.abs(e)),e?e[1]:NaN}function U5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function H5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var W5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fa(e){if(!(t=W5.exec(e)))throw new Error("invalid format: "+e);var t;return new Uf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fa.prototype=Uf.prototype;function Uf(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Uf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function V5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Mm;function Y5(e,t){var n=es(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Mm=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+es(e,Math.max(0,t+a-1))[0]}function _h(e,t){var n=es(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Mh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:G5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>_h(e*100,t),r:_h,s:Y5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xh(e){return e}var Ph=Array.prototype.map,Ah=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function j5(e){var t=e.grouping===void 0||e.thousands===void 0?xh:U5(Ph.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?xh:H5(Ph.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(h){h=fa(h);var c=h.fill,m=h.align,d=h.sign,p=h.symbol,g=h.zero,v=h.width,b=h.comma,w=h.precision,y=h.trim,_=h.type;_==="n"?(b=!0,_="g"):Mh[_]||(w===void 0&&(w=12),y=!0,_="g"),(g||c==="0"&&m==="=")&&(g=!0,c="0",m="=");var x=p==="$"?n:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",P=p==="$"?r:/[%p]/.test(_)?o:"",T=Mh[_],S=/[defgprs%]/.test(_);w=w===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function $(E){var L=x,U=P,D,k,z;if(_==="c")U=T(E)+U,E="";else{E=+E;var oe=E<0||1/E<0;if(E=isNaN(E)?u:T(Math.abs(E),w),y&&(E=V5(E)),oe&&+E==0&&d!=="+"&&(oe=!1),L=(oe?d==="("?d:s:d==="-"||d==="("?"":d)+L,U=(_==="s"?Ah[8+Mm/3]:"")+U+(oe&&d==="("?")":""),S){for(D=-1,k=E.length;++D<k;)if(z=E.charCodeAt(D),48>z||z>57){U=(z===46?i+E.slice(D+1):E.slice(D))+U,E=E.slice(0,D);break}}}b&&!g&&(E=t(E,1/0));var ae=L.length+E.length+U.length,te=ae<v?new Array(v-ae+1).join(c):"";switch(b&&g&&(E=t(te+E,te.length?v-U.length:1/0),te=""),m){case"<":E=L+E+U+te;break;case"=":E=L+te+E+U;break;case"^":E=te.slice(0,ae=te.length>>1)+L+E+U+te.slice(ae);break;default:E=te+L+E+U;break}return a(E)}return $.toString=function(){return h+""},$}function f(h,c){var m=l((h=fa(h),h.type="f",h)),d=Math.max(-8,Math.min(8,Math.floor(si(c)/3)))*3,p=Math.pow(10,-d),g=Ah[8+d/3];return function(v){return m(p*v)+g}}return{format:l,formatPrefix:f}}var so,Mi,xm;X5({thousands:",",grouping:[3],currency:["$",""]});function X5(e){return so=j5(e),Mi=so.format,xm=so.formatPrefix,so}function Z5(e){return Math.max(0,-si(Math.abs(e)))}function K5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(si(t)/3)))*3-si(Math.abs(e)))}function Q5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,si(t)-si(e))+1}var ye=1e-6,Pm=1e-12,Pe=Math.PI,Ge=Pe/2,Sh=Pe/4,Tt=Pe*2,ht=180/Pe,ze=Pe/180,De=Math.abs,xi=Math.atan,Fn=Math.atan2,xe=Math.cos,Am=Math.exp,ts=Math.log,Gu=Math.pow,ge=Math.sin,It=Math.sign||function(e){return e>0?1:e<0?-1:0},Mt=Math.sqrt,Hf=Math.tan;function Sm(e){return e>1?0:e<-1?Pe:Math.acos(e)}function Gt(e){return e>1?Ge:e<-1?-Ge:Math.asin(e)}function Rt(){}function ns(e,t){e&&kh.hasOwnProperty(e.type)&&kh[e.type](e,t)}var Eh={Feature:function(e,t){ns(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ns(n[r].geometry,t)}},kh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Il(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Il(n[r],t,0)},Polygon:function(e,t){Ch(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ch(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ns(n[r],t)}};function Il(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Ch(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Il(e[n],t,1);t.polygonEnd()}function cr(e,t){e&&Eh.hasOwnProperty(e.type)?Eh[e.type](e,t):ns(e,t)}function Rl(e){return[Fn(e[1],e[0]),Gt(e[2])]}function ui(e){var t=e[0],n=e[1],r=xe(n);return[r*xe(t),r*ge(t),ge(n)]}function uo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rs(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Uu(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function lo(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ol(e){var t=Mt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function ql(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function zl(e,t){return De(e)>Pe&&(e-=Math.round(e/Tt)*Tt),[e,t]}zl.invert=zl;function Em(e,t,n){return(e%=Tt)?t||n?ql($h(e),Dh(t,n)):$h(e):t||n?Dh(t,n):zl}function Th(e){return function(t,n){return t+=e,De(t)>Pe&&(t-=Math.round(t/Tt)*Tt),[t,n]}}function $h(e){var t=Th(e);return t.invert=Th(-e),t}function Dh(e,t){var n=xe(e),r=ge(e),i=xe(t),a=ge(t);function o(s,u){var l=xe(u),f=xe(s)*l,h=ge(s)*l,c=ge(u),m=c*n+f*r;return[Fn(h*i-m*a,f*n-c*r),Gt(m*i+h*a)]}return o.invert=function(s,u){var l=xe(u),f=xe(s)*l,h=ge(s)*l,c=ge(u),m=c*i-h*a;return[Fn(h*i+c*a,f*n+m*r),Gt(m*n-f*r)]},o}function J5(e){e=Em(e[0]*ze,e[1]*ze,e.length>2?e[2]*ze:0);function t(n){return n=e(n[0]*ze,n[1]*ze),n[0]*=ht,n[1]*=ht,n}return t.invert=function(n){return n=e.invert(n[0]*ze,n[1]*ze),n[0]*=ht,n[1]*=ht,n},t}function e4(e,t,n,r,i,a){if(n){var o=xe(t),s=ge(t),u=r*n;i==null?(i=t+r*Tt,a=t-u/2):(i=Nh(o,i),a=Nh(o,a),(r>0?i<a:i>a)&&(i+=r*Tt));for(var l,f=i;r>0?f>a:f<a;f-=u)l=Rl([o,-s*xe(f),-s*ge(f)]),e.point(l[0],l[1])}}function Nh(e,t){t=ui(t),t[0]-=e,Ol(t);var n=Sm(-t[1]);return((-t[2]<0?-n:n)+Tt-ye)%Tt}function km(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Rt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Bo(e,t){return De(e[0]-t[0])<ye&&De(e[1]-t[1])<ye}function fo(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Cm(e,t,n,r,i){var a=[],o=[],s,u;if(e.forEach(function(d){if(!((p=d.length-1)<=0)){var p,g=d[0],v=d[p],b;if(Bo(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),s=0;s<p;++s)i.point((g=d[s])[0],g[1]);i.lineEnd();return}v[0]+=2*ye}a.push(b=new fo(g,d,null,!0)),o.push(b.o=new fo(g,null,b,!1)),a.push(b=new fo(v,d,null,!1)),o.push(b.o=new fo(v,null,b,!0))}}),!!a.length){for(o.sort(t),Bh(a),Bh(o),s=0,u=o.length;s<u;++s)o[s].e=n=!n;for(var l=a[0],f,h;;){for(var c=l,m=!0;c.v;)if((c=c.n)===l)return;f=c.z,i.lineStart();do{if(c.v=c.o.v=!0,c.e){if(m)for(s=0,u=f.length;s<u;++s)i.point((h=f[s])[0],h[1]);else r(c.x,c.n.x,1,i);c=c.n}else{if(m)for(f=c.p.z,s=f.length-1;s>=0;--s)i.point((h=f[s])[0],h[1]);else r(c.x,c.p.x,-1,i);c=c.p}c=c.o,f=c.z,m=!m}while(!c.v);i.lineEnd()}}}function Bh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Hu(e){return De(e[0])<=Pe?e[0]:It(e[0])*((De(e[0])+Pe)%Tt-Pe)}function t4(e,t){var n=Hu(t),r=t[1],i=ge(r),a=[ge(n),-xe(n),0],o=0,s=0,u=new Mr;i===1?r=Ge+ye:i===-1&&(r=-Ge-ye);for(var l=0,f=e.length;l<f;++l)if(c=(h=e[l]).length)for(var h,c,m=h[c-1],d=Hu(m),p=m[1]/2+Sh,g=ge(p),v=xe(p),b=0;b<c;++b,d=y,g=x,v=P,m=w){var w=h[b],y=Hu(w),_=w[1]/2+Sh,x=ge(_),P=xe(_),T=y-d,S=T>=0?1:-1,$=S*T,E=$>Pe,L=g*x;if(u.add(Fn(L*S*ge($),v*P+L*xe($))),o+=E?T+S*Tt:T,E^d>=n^y>=n){var U=rs(ui(m),ui(w));Ol(U);var D=rs(a,U);Ol(D);var k=(E^T>=0?-1:1)*Gt(D[2]);(r>k||r===k&&(U[0]||U[1]))&&(s+=E^T>=0?1:-1)}}return(o<-ye||o<ye&&u<-Pm)^s&1}function Tm(e,t,n,r){return function(i){var a=t(i),o=km(),s=t(o),u=!1,l,f,h,c={point:m,lineStart:p,lineEnd:g,polygonStart:function(){c.point=v,c.lineStart=b,c.lineEnd=w,f=[],l=[]},polygonEnd:function(){c.point=m,c.lineStart=p,c.lineEnd=g,f=I0(f);var y=t4(l,r);f.length?(u||(i.polygonStart(),u=!0),Cm(f,r4,y,n,i)):y&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),f=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(y,_){e(y,_)&&i.point(y,_)}function d(y,_){a.point(y,_)}function p(){c.point=d,a.lineStart()}function g(){c.point=m,a.lineEnd()}function v(y,_){h.push([y,_]),s.point(y,_)}function b(){s.lineStart(),h=[]}function w(){v(h[0][0],h[0][1]),s.lineEnd();var y=s.clean(),_=o.result(),x,P=_.length,T,S,$;if(h.pop(),l.push(h),h=null,!!P){if(y&1){if(S=_[0],(T=S.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),x=0;x<T;++x)i.point(($=S[x])[0],$[1]);i.lineEnd()}return}P>1&&y&2&&_.push(_.pop().concat(_.shift())),f.push(_.filter(n4))}}return c}}function n4(e){return e.length>1}function r4(e,t){return((e=e.x)[0]<0?e[1]-Ge-ye:Ge-e[1])-((t=t.x)[0]<0?t[1]-Ge-ye:Ge-t[1])}const Fh=Tm(function(){return!0},i4,o4,[-Pe,-Ge]);function i4(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var s=a>0?Pe:-Pe,u=De(a-t);De(u-Pe)<ye?(e.point(t,n=(n+o)/2>0?Ge:-Ge),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(a,n),i=0):r!==s&&u>=Pe&&(De(t-r)<ye&&(t-=r*ye),De(a-s)<ye&&(a-=s*ye),n=a4(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=a,n=o),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function a4(e,t,n,r){var i,a,o=ge(e-n);return De(o)>ye?xi((ge(t)*(a=xe(r))*ge(n)-ge(r)*(i=xe(t))*ge(e))/(i*a*o)):(t+r)/2}function o4(e,t,n,r){var i;if(e==null)i=n*Ge,r.point(-Pe,i),r.point(0,i),r.point(Pe,i),r.point(Pe,0),r.point(Pe,-i),r.point(0,-i),r.point(-Pe,-i),r.point(-Pe,0),r.point(-Pe,i);else if(De(e[0]-t[0])>ye){var a=e[0]<t[0]?Pe:-Pe;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function s4(e){var t=xe(e),n=6*ze,r=t>0,i=De(t)>ye;function a(f,h,c,m){e4(m,e,n,c,f,h)}function o(f,h){return xe(f)*xe(h)>t}function s(f){var h,c,m,d,p;return{lineStart:function(){d=m=!1,p=1},point:function(g,v){var b=[g,v],w,y=o(g,v),_=r?y?0:l(g,v):y?l(g+(g<0?Pe:-Pe),v):0;if(!h&&(d=m=y)&&f.lineStart(),y!==m&&(w=u(h,b),(!w||Bo(h,w)||Bo(b,w))&&(b[2]=1)),y!==m)p=0,y?(f.lineStart(),w=u(b,h),f.point(w[0],w[1])):(w=u(h,b),f.point(w[0],w[1],2),f.lineEnd()),h=w;else if(i&&h&&r^y){var x;!(_&c)&&(x=u(b,h,!0))&&(p=0,r?(f.lineStart(),f.point(x[0][0],x[0][1]),f.point(x[1][0],x[1][1]),f.lineEnd()):(f.point(x[1][0],x[1][1]),f.lineEnd(),f.lineStart(),f.point(x[0][0],x[0][1],3)))}y&&(!h||!Bo(h,b))&&f.point(b[0],b[1]),h=b,m=y,c=_},lineEnd:function(){m&&f.lineEnd(),h=null},clean:function(){return p|(d&&m)<<1}}}function u(f,h,c){var m=ui(f),d=ui(h),p=[1,0,0],g=rs(m,d),v=uo(g,g),b=g[0],w=v-b*b;if(!w)return!c&&f;var y=t*v/w,_=-t*b/w,x=rs(p,g),P=lo(p,y),T=lo(g,_);Uu(P,T);var S=x,$=uo(P,S),E=uo(S,S),L=$*$-E*(uo(P,P)-1);if(!(L<0)){var U=Mt(L),D=lo(S,(-$-U)/E);if(Uu(D,P),D=Rl(D),!c)return D;var k=f[0],z=h[0],oe=f[1],ae=h[1],te;z<k&&(te=k,k=z,z=te);var H=z-k,Y=De(H-Pe)<ye,W=Y||H<ye;if(!Y&&ae<oe&&(te=oe,oe=ae,ae=te),W?Y?oe+ae>0^D[1]<(De(D[0]-k)<ye?oe:ae):oe<=D[1]&&D[1]<=ae:H>Pe^(k<=D[0]&&D[0]<=z)){var j=lo(S,(-$+U)/E);return Uu(j,P),[D,Rl(j)]}}}function l(f,h){var c=r?e:Pe-e,m=0;return f<-c?m|=1:f>c&&(m|=2),h<-c?m|=4:h>c&&(m|=8),m}return Tm(o,s,a,r?[0,-e]:[-Pe,e-Pe])}function u4(e,t,n,r,i,a){var o=e[0],s=e[1],u=t[0],l=t[1],f=0,h=1,c=u-o,m=l-s,d;if(d=n-o,!(!c&&d>0)){if(d/=c,c<0){if(d<f)return;d<h&&(h=d)}else if(c>0){if(d>h)return;d>f&&(f=d)}if(d=i-o,!(!c&&d<0)){if(d/=c,c<0){if(d>h)return;d>f&&(f=d)}else if(c>0){if(d<f)return;d<h&&(h=d)}if(d=r-s,!(!m&&d>0)){if(d/=m,m<0){if(d<f)return;d<h&&(h=d)}else if(m>0){if(d>h)return;d>f&&(f=d)}if(d=a-s,!(!m&&d<0)){if(d/=m,m<0){if(d>h)return;d>f&&(f=d)}else if(m>0){if(d<f)return;d<h&&(h=d)}return f>0&&(e[0]=o+f*c,e[1]=s+f*m),h<1&&(t[0]=o+h*c,t[1]=s+h*m),!0}}}}}var zi=1e9,co=-zi;function $m(e,t,n,r){function i(l,f){return e<=l&&l<=n&&t<=f&&f<=r}function a(l,f,h,c){var m=0,d=0;if(l==null||(m=o(l,h))!==(d=o(f,h))||u(l,f)<0^h>0)do c.point(m===0||m===3?e:n,m>1?r:t);while((m=(m+h+4)%4)!==d);else c.point(f[0],f[1])}function o(l,f){return De(l[0]-e)<ye?f>0?0:3:De(l[0]-n)<ye?f>0?2:1:De(l[1]-t)<ye?f>0?1:0:f>0?3:2}function s(l,f){return u(l.x,f.x)}function u(l,f){var h=o(l,1),c=o(f,1);return h!==c?h-c:h===0?f[1]-l[1]:h===1?l[0]-f[0]:h===2?l[1]-f[1]:f[0]-l[0]}return function(l){var f=l,h=km(),c,m,d,p,g,v,b,w,y,_,x,P={point:T,lineStart:L,lineEnd:U,polygonStart:$,polygonEnd:E};function T(k,z){i(k,z)&&f.point(k,z)}function S(){for(var k=0,z=0,oe=m.length;z<oe;++z)for(var ae=m[z],te=1,H=ae.length,Y=ae[0],W,j,se=Y[0],fe=Y[1];te<H;++te)W=se,j=fe,Y=ae[te],se=Y[0],fe=Y[1],j<=r?fe>r&&(se-W)*(r-j)>(fe-j)*(e-W)&&++k:fe<=r&&(se-W)*(r-j)<(fe-j)*(e-W)&&--k;return k}function $(){f=h,c=[],m=[],x=!0}function E(){var k=S(),z=x&&k,oe=(c=I0(c)).length;(z||oe)&&(l.polygonStart(),z&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),oe&&Cm(c,s,k,a,l),l.polygonEnd()),f=l,c=m=d=null}function L(){P.point=D,m&&m.push(d=[]),_=!0,y=!1,b=w=NaN}function U(){c&&(D(p,g),v&&y&&h.rejoin(),c.push(h.result())),P.point=T,y&&f.lineEnd()}function D(k,z){var oe=i(k,z);if(m&&d.push([k,z]),_)p=k,g=z,v=oe,_=!1,oe&&(f.lineStart(),f.point(k,z));else if(oe&&y)f.point(k,z);else{var ae=[b=Math.max(co,Math.min(zi,b)),w=Math.max(co,Math.min(zi,w))],te=[k=Math.max(co,Math.min(zi,k)),z=Math.max(co,Math.min(zi,z))];u4(ae,te,e,t,n,r)?(y||(f.lineStart(),f.point(ae[0],ae[1])),f.point(te[0],te[1]),oe||f.lineEnd(),x=!1):oe&&(f.lineStart(),f.point(k,z),x=!1)}b=k,w=z,y=oe}return P}}const Gl=e=>e;var Wu=new Mr,Ul=new Mr,Dm,Nm,Hl,Wl,Cn={point:Rt,lineStart:Rt,lineEnd:Rt,polygonStart:function(){Cn.lineStart=l4,Cn.lineEnd=c4},polygonEnd:function(){Cn.lineStart=Cn.lineEnd=Cn.point=Rt,Wu.add(De(Ul)),Ul=new Mr},result:function(){var e=Wu/2;return Wu=new Mr,e}};function l4(){Cn.point=f4}function f4(e,t){Cn.point=Bm,Dm=Hl=e,Nm=Wl=t}function Bm(e,t){Ul.add(Wl*e-Hl*t),Hl=e,Wl=t}function c4(){Bm(Dm,Nm)}var li=1/0,is=li,ca=-li,as=ca,os={point:h4,lineStart:Rt,lineEnd:Rt,polygonStart:Rt,polygonEnd:Rt,result:function(){var e=[[li,is],[ca,as]];return ca=as=-(is=li=1/0),e}};function h4(e,t){e<li&&(li=e),e>ca&&(ca=e),t<is&&(is=t),t>as&&(as=t)}var Vl=0,Yl=0,Gi=0,ss=0,us=0,Wr=0,jl=0,Xl=0,Ui=0,Fm,Lm,un,ln,Ft={point:kr,lineStart:Lh,lineEnd:Ih,polygonStart:function(){Ft.lineStart=p4,Ft.lineEnd=b4},polygonEnd:function(){Ft.point=kr,Ft.lineStart=Lh,Ft.lineEnd=Ih},result:function(){var e=Ui?[jl/Ui,Xl/Ui]:Wr?[ss/Wr,us/Wr]:Gi?[Vl/Gi,Yl/Gi]:[NaN,NaN];return Vl=Yl=Gi=ss=us=Wr=jl=Xl=Ui=0,e}};function kr(e,t){Vl+=e,Yl+=t,++Gi}function Lh(){Ft.point=d4}function d4(e,t){Ft.point=m4,kr(un=e,ln=t)}function m4(e,t){var n=e-un,r=t-ln,i=Mt(n*n+r*r);ss+=i*(un+e)/2,us+=i*(ln+t)/2,Wr+=i,kr(un=e,ln=t)}function Ih(){Ft.point=kr}function p4(){Ft.point=g4}function b4(){Im(Fm,Lm)}function g4(e,t){Ft.point=Im,kr(Fm=un=e,Lm=ln=t)}function Im(e,t){var n=e-un,r=t-ln,i=Mt(n*n+r*r);ss+=i*(un+e)/2,us+=i*(ln+t)/2,Wr+=i,i=ln*e-un*t,jl+=i*(un+e),Xl+=i*(ln+t),Ui+=i*3,kr(un=e,ln=t)}function Rm(e){this._context=e}Rm.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Tt);break}}},result:Rt};var Zl=new Mr,Vu,Om,qm,Hi,Wi,ha={point:Rt,lineStart:function(){ha.point=y4},lineEnd:function(){Vu&&zm(Om,qm),ha.point=Rt},polygonStart:function(){Vu=!0},polygonEnd:function(){Vu=null},result:function(){var e=+Zl;return Zl=new Mr,e}};function y4(e,t){ha.point=zm,Om=Hi=e,qm=Wi=t}function zm(e,t){Hi-=e,Wi-=t,Zl.add(Mt(Hi*Hi+Wi*Wi)),Hi=e,Wi=t}let Rh,ls,Oh,qh;class zh{constructor(t){this._append=t==null?Gm:v4(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Oh||this._append!==ls){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Oh=r,ls=this._append,qh=this._,this._=i}this._+=qh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Gm(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function v4(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Gm;if(t!==Rh){const n=10**t;Rh=t,ls=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return ls}function Xs(e,t){let n=3,r=4.5,i,a;function o(s){return s&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),cr(s,i(a))),a.result()}return o.area=function(s){return cr(s,i(Cn)),Cn.result()},o.measure=function(s){return cr(s,i(ha)),ha.result()},o.bounds=function(s){return cr(s,i(os)),os.result()},o.centroid=function(s){return cr(s,i(Ft)),Ft.result()},o.projection=function(s){return arguments.length?(i=s==null?(e=null,Gl):(e=s).stream,o):e},o.context=function(s){return arguments.length?(a=s==null?(t=null,new zh(n)):new Rm(t=s),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(a.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return t===null&&(a=new zh(n)),o},o.projection(e).digits(n).context(t)}function Kl(e){return{stream:Zs(e)}}function Zs(e){return function(t){var n=new Ql;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Ql(){}Ql.prototype={constructor:Ql,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Wf(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),cr(n,e.stream(os)),t(os.result()),r!=null&&e.clipExtent(r),e}function Vf(e,t,n){return Wf(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,u])},n)}function Um(e,t,n){return Vf(e,[[0,0],t],n)}function Hm(e,t,n){return Wf(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];e.scale(150*a).translate([o,s])},n)}function Wm(e,t,n){return Wf(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,s])},n)}var Gh=16,w4=xe(30*ze);function Uh(e,t){return+t?M4(e,t):_4(e)}function _4(e){return Zs({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function M4(e,t){function n(r,i,a,o,s,u,l,f,h,c,m,d,p,g){var v=l-r,b=f-i,w=v*v+b*b;if(w>4*t&&p--){var y=o+c,_=s+m,x=u+d,P=Mt(y*y+_*_+x*x),T=Gt(x/=P),S=De(De(x)-1)<ye||De(a-h)<ye?(a+h)/2:Fn(_,y),$=e(S,T),E=$[0],L=$[1],U=E-r,D=L-i,k=b*U-v*D;(k*k/w>t||De((v*U+b*D)/w-.5)>.3||o*c+s*m+u*d<w4)&&(n(r,i,a,o,s,u,E,L,S,y/=P,_/=P,x,p,g),g.point(E,L),n(E,L,S,y,_,x,l,f,h,c,m,d,p,g))}}return function(r){var i,a,o,s,u,l,f,h,c,m,d,p,g={point:v,lineStart:b,lineEnd:y,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function v(T,S){T=e(T,S),r.point(T[0],T[1])}function b(){h=NaN,g.point=w,r.lineStart()}function w(T,S){var $=ui([T,S]),E=e(T,S);n(h,c,f,m,d,p,h=E[0],c=E[1],f=T,m=$[0],d=$[1],p=$[2],Gh,r),r.point(h,c)}function y(){g.point=v,r.lineEnd()}function _(){b(),g.point=x,g.lineEnd=P}function x(T,S){w(i=T,S),a=h,o=c,s=m,u=d,l=p,g.point=w}function P(){n(h,c,f,m,d,p,a,o,i,s,u,l,Gh,r),g.lineEnd=y,y()}return g}}var x4=Zs({point:function(e,t){this.stream.point(e*ze,t*ze)}});function P4(e){return Zs({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function A4(e,t,n,r,i){function a(o,s){return o*=r,s*=i,[t+e*o,n-e*s]}return a.invert=function(o,s){return[(o-t)/e*r,(n-s)/e*i]},a}function Hh(e,t,n,r,i,a){if(!a)return A4(e,t,n,r,i);var o=xe(a),s=ge(a),u=o*e,l=s*e,f=o/e,h=s/e,c=(s*n-o*t)/e,m=(s*t+o*n)/e;function d(p,g){return p*=r,g*=i,[u*p-l*g+t,n-l*p-u*g]}return d.invert=function(p,g){return[r*(f*p-h*g+c),i*(m-h*p-f*g)]},d}function rr(e){return Vm(function(){return e})()}function Vm(e){var t,n=150,r=480,i=250,a=0,o=0,s=0,u=0,l=0,f,h=0,c=1,m=1,d=null,p=Fh,g=null,v,b,w,y=Gl,_=.5,x,P,T,S,$;function E(k){return T(k[0]*ze,k[1]*ze)}function L(k){return k=T.invert(k[0],k[1]),k&&[k[0]*ht,k[1]*ht]}E.stream=function(k){return S&&$===k?S:S=x4(P4(f)(p(x(y($=k)))))},E.preclip=function(k){return arguments.length?(p=k,d=void 0,D()):p},E.postclip=function(k){return arguments.length?(y=k,g=v=b=w=null,D()):y},E.clipAngle=function(k){return arguments.length?(p=+k?s4(d=k*ze):(d=null,Fh),D()):d*ht},E.clipExtent=function(k){return arguments.length?(y=k==null?(g=v=b=w=null,Gl):$m(g=+k[0][0],v=+k[0][1],b=+k[1][0],w=+k[1][1]),D()):g==null?null:[[g,v],[b,w]]},E.scale=function(k){return arguments.length?(n=+k,U()):n},E.translate=function(k){return arguments.length?(r=+k[0],i=+k[1],U()):[r,i]},E.center=function(k){return arguments.length?(a=k[0]%360*ze,o=k[1]%360*ze,U()):[a*ht,o*ht]},E.rotate=function(k){return arguments.length?(s=k[0]%360*ze,u=k[1]%360*ze,l=k.length>2?k[2]%360*ze:0,U()):[s*ht,u*ht,l*ht]},E.angle=function(k){return arguments.length?(h=k%360*ze,U()):h*ht},E.reflectX=function(k){return arguments.length?(c=k?-1:1,U()):c<0},E.reflectY=function(k){return arguments.length?(m=k?-1:1,U()):m<0},E.precision=function(k){return arguments.length?(x=Uh(P,_=k*k),D()):Mt(_)},E.fitExtent=function(k,z){return Vf(E,k,z)},E.fitSize=function(k,z){return Um(E,k,z)},E.fitWidth=function(k,z){return Hm(E,k,z)},E.fitHeight=function(k,z){return Wm(E,k,z)};function U(){var k=Hh(n,0,0,c,m,h).apply(null,t(a,o)),z=Hh(n,r-k[0],i-k[1],c,m,h);return f=Em(s,u,l),P=ql(t,z),T=ql(f,P),x=Uh(P,_),D()}function D(){return S=$=null,E}return function(){return t=e.apply(this,arguments),E.invert=t.invert&&L,U()}}function Yf(e){var t=0,n=Pe/3,r=Vm(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*ze,n=a[1]*ze):[t*ht,n*ht]},i}function S4(e){var t=xe(e);function n(r,i){return[r*t,ge(i)/t]}return n.invert=function(r,i){return[r/t,Gt(i*t)]},n}function E4(e,t){var n=ge(e),r=(n+ge(t))/2;if(De(r)<ye)return S4(e);var i=1+n*(2*r-n),a=Mt(i)/r;function o(s,u){var l=Mt(i-2*r*ge(u))/r;return[l*ge(s*=r),a-l*xe(s)]}return o.invert=function(s,u){var l=a-u,f=Fn(s,De(l))*It(l);return l*r<0&&(f-=Pe*It(s)*It(l)),[f/r,Gt((i-(s*s+l*l)*r*r)/(2*r))]},o}function fs(){return Yf(E4).scale(155.424).center([0,33.6442])}function Ym(){return fs().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function k4(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function C4(){var e,t,n=Ym(),r,i=fs().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=fs().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,u,l={point:function(c,m){u=[c,m]}};function f(c){var m=c[0],d=c[1];return u=null,r.point(m,d),u||(a.point(m,d),u)||(s.point(m,d),u)}f.invert=function(c){var m=n.scale(),d=n.translate(),p=(c[0]-d[0])/m,g=(c[1]-d[1])/m;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?o:n).invert(c)},f.stream=function(c){return e&&t===c?e:e=k4([n.stream(t=c),i.stream(c),o.stream(c)])},f.precision=function(c){return arguments.length?(n.precision(c),i.precision(c),o.precision(c),h()):n.precision()},f.scale=function(c){return arguments.length?(n.scale(c),i.scale(c*.35),o.scale(c),f.translate(n.translate())):n.scale()},f.translate=function(c){if(!arguments.length)return n.translate();var m=n.scale(),d=+c[0],p=+c[1];return r=n.translate(c).clipExtent([[d-.455*m,p-.238*m],[d+.455*m,p+.238*m]]).stream(l),a=i.translate([d-.307*m,p+.201*m]).clipExtent([[d-.425*m+ye,p+.12*m+ye],[d-.214*m-ye,p+.234*m-ye]]).stream(l),s=o.translate([d-.205*m,p+.212*m]).clipExtent([[d-.214*m+ye,p+.166*m+ye],[d-.115*m-ye,p+.234*m-ye]]).stream(l),h()},f.fitExtent=function(c,m){return Vf(f,c,m)},f.fitSize=function(c,m){return Um(f,c,m)},f.fitWidth=function(c,m){return Hm(f,c,m)},f.fitHeight=function(c,m){return Wm(f,c,m)};function h(){return e=t=null,f}return f.scale(1070)}function jm(e){return function(t,n){var r=xe(t),i=xe(n),a=e(r*i);return a===1/0?[2,0]:[a*i*ge(t),a*ge(n)]}}function $a(e){return function(t,n){var r=Mt(t*t+n*n),i=e(r),a=ge(i),o=xe(i);return[Fn(t*a,r*o),Gt(r&&n*a/r)]}}var Xm=jm(function(e){return Mt(2/(1+e))});Xm.invert=$a(function(e){return 2*Gt(e/2)});function T4(){return rr(Xm).scale(124.75).clipAngle(180-.001)}var Zm=jm(function(e){return(e=Sm(e))&&e/ge(e)});Zm.invert=$a(function(e){return e});function $4(){return rr(Zm).scale(79.4188).clipAngle(180-.001)}function Ks(e,t){return[e,ts(Hf((Ge+t)/2))]}Ks.invert=function(e,t){return[e,2*xi(Am(t))-Ge]};function D4(){return Km(Ks).scale(961/Tt)}function Km(e){var t=rr(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,s,u,l;t.scale=function(h){return arguments.length?(r(h),f()):r()},t.translate=function(h){return arguments.length?(i(h),f()):i()},t.center=function(h){return arguments.length?(n(h),f()):n()},t.clipExtent=function(h){return arguments.length?(h==null?o=s=u=l=null:(o=+h[0][0],s=+h[0][1],u=+h[1][0],l=+h[1][1]),f()):o==null?null:[[o,s],[u,l]]};function f(){var h=Pe*r(),c=t(J5(t.rotate()).invert([0,0]));return a(o==null?[[c[0]-h,c[1]-h],[c[0]+h,c[1]+h]]:e===Ks?[[Math.max(c[0]-h,o),s],[Math.min(c[0]+h,u),l]]:[[o,Math.max(c[1]-h,s)],[u,Math.min(c[1]+h,l)]])}return f()}function ho(e){return Hf((Ge+e)/2)}function N4(e,t){var n=xe(e),r=e===t?ge(e):ts(n/xe(t))/ts(ho(t)/ho(e)),i=n*Gu(ho(e),r)/r;if(!r)return Ks;function a(o,s){i>0?s<-Ge+ye&&(s=-Ge+ye):s>Ge-ye&&(s=Ge-ye);var u=i/Gu(ho(s),r);return[u*ge(r*o),i-u*xe(r*o)]}return a.invert=function(o,s){var u=i-s,l=It(r)*Mt(o*o+u*u),f=Fn(o,De(u))*It(u);return u*r<0&&(f-=Pe*It(o)*It(u)),[f/r,2*xi(Gu(i/l,1/r))-Ge]},a}function B4(){return Yf(N4).scale(109.5).parallels([30,30])}function cs(e,t){return[e,t]}cs.invert=cs;function F4(){return rr(cs).scale(152.63)}function L4(e,t){var n=xe(e),r=e===t?ge(e):(n-xe(t))/(t-e),i=n/r+e;if(De(r)<ye)return cs;function a(o,s){var u=i-s,l=r*o;return[u*ge(l),i-u*xe(l)]}return a.invert=function(o,s){var u=i-s,l=Fn(o,De(u))*It(u);return u*r<0&&(l-=Pe*It(o)*It(u)),[l/r,i-It(r)*Mt(o*o+u*u)]},a}function I4(){return Yf(L4).scale(131.154).center([0,13.9389])}var Ji=1.340264,ea=-.081106,ta=893e-6,na=.003796,hs=Mt(3)/2,R4=12;function Qm(e,t){var n=Gt(hs*ge(t)),r=n*n,i=r*r*r;return[e*xe(n)/(hs*(Ji+3*ea*r+i*(7*ta+9*na*r))),n*(Ji+ea*r+i*(ta+na*r))]}Qm.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,s,u;a<R4&&(s=n*(Ji+ea*r+i*(ta+na*r))-t,u=Ji+3*ea*r+i*(7*ta+9*na*r),n-=o=s/u,r=n*n,i=r*r*r,!(De(o)<Pm));++a);return[hs*e*(Ji+3*ea*r+i*(7*ta+9*na*r))/xe(n),Gt(ge(n)/hs)]};function O4(){return rr(Qm).scale(177.158)}function Jm(e,t){var n=xe(t),r=xe(e)*n;return[n*ge(e)/r,ge(t)/r]}Jm.invert=$a(xi);function q4(){return rr(Jm).scale(144.049).clipAngle(60)}function ep(e,t){return[xe(t)*ge(e),ge(t)]}ep.invert=$a(Gt);function z4(){return rr(ep).scale(249.5).clipAngle(90+ye)}function tp(e,t){var n=xe(t),r=1+xe(e)*n;return[n*ge(e)/r,ge(t)/r]}tp.invert=$a(function(e){return 2*xi(e)});function G4(){return rr(tp).scale(250).clipAngle(142)}function np(e,t){return[ts(Hf((Ge+t)/2)),-e]}np.invert=function(e,t){return[-t,2*xi(Am(e))-Ge]};function U4(){var e=Km(np),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function wn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Jl=Symbol("implicit");function jf(){var e=new xr,t=[],n=[],r=Jl;function i(a){let o=e.get(a);if(o===void 0){if(r!==Jl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new xr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return jf(t,n).unknown(r)},wn.apply(i,arguments),i}function Js(){var e=jf().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,u=0,l=0,f=.5;delete e.unknown;function h(){var c=t().length,m=i<r,d=m?i:r,p=m?r:i;a=(p-d)/Math.max(1,c-u+l*2),s&&(a=Math.floor(a)),d+=(p-d-a*(c-u))*f,o=a*(1-u),s&&(d=Math.round(d),o=Math.round(o));var g=Pl(c).map(function(v){return d+a*v});return n(m?g.reverse():g)}return e.domain=function(c){return arguments.length?(t(c),h()):t()},e.range=function(c){return arguments.length?([r,i]=c,r=+r,i=+i,h()):[r,i]},e.rangeRound=function(c){return[r,i]=c,r=+r,i=+i,s=!0,h()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(c){return arguments.length?(s=!!c,h()):s},e.padding=function(c){return arguments.length?(u=Math.min(1,l=+c),h()):u},e.paddingInner=function(c){return arguments.length?(u=Math.min(1,c),h()):u},e.paddingOuter=function(c){return arguments.length?(l=+c,h()):l},e.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},e.copy=function(){return Js(t(),[r,i]).round(s).paddingInner(u).paddingOuter(l).align(f)},wn.apply(h(),arguments)}function rp(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return rp(t())},e}function H4(){return rp(Js.apply(null,arguments).paddingInner(1))}function W4(e){return function(){return e}}function ef(e){return+e}var Wh=[0,1];function Ot(e){return e}function tf(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:W4(isNaN(t)?NaN:.5)}function V4(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Y4(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=tf(i,r),a=n(o,a)):(r=tf(r,i),a=n(a,o)),function(s){return a(r(s))}}function j4(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=tf(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var u=Ls(e,s,1,r)-1;return a[u](i[u](s))}}function Da(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function eu(){var e=Wh,t=Wh,n=Ta,r,i,a,o=Ot,s,u,l;function f(){var c=Math.min(e.length,t.length);return o!==Ot&&(o=V4(e[0],e[c-1])),s=c>2?j4:Y4,u=l=null,h}function h(c){return c==null||isNaN(c=+c)?a:(u||(u=s(e.map(r),t,n)))(r(o(c)))}return h.invert=function(c){return o(i((l||(l=s(t,e.map(r),st)))(c)))},h.domain=function(c){return arguments.length?(e=Array.from(c,ef),f()):e.slice()},h.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},h.rangeRound=function(c){return t=Array.from(c),n=Rf,f()},h.clamp=function(c){return arguments.length?(o=c?!0:Ot,f()):o!==Ot},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(a=c,h):a},function(c,m){return r=c,i=m,f()}}function ip(){return eu()(Ot,Ot)}function X4(e,t,n,r){var i=Ml(e,t,n),a;switch(r=fa(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=K5(i,o))&&(r.precision=a),xm(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Q5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Z5(i))&&(r.precision=a-(r.type==="%")*2);break}}return Mi(r)}function Na(e){var t=e.domain;return e.ticks=function(n){var r=t();return oa(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return X4(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],u,l,f=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);f-- >0;){if(l=Vo(o,s,n),l===u)return r[i]=o,r[a]=s,t(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return e},e}function Xf(){var e=ip();return e.copy=function(){return Da(e,Xf())},wn.apply(e,arguments),Na(e)}function ap(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,ef),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return ap(e).unknown(t)},e=arguments.length?Array.from(e,ef):[0,1],Na(n)}function op(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Vh(e){return Math.log(e)}function Yh(e){return Math.exp(e)}function Z4(e){return-Math.log(-e)}function K4(e){return-Math.exp(-e)}function Q4(e){return isFinite(e)?+("1e"+e):e<0?0:e}function J4(e){return e===10?Q4:e===Math.E?Math.exp:t=>Math.pow(e,t)}function e6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function jh(e){return(t,n)=>-e(-t,n)}function sp(e){const t=e(Vh,Yh),n=t.domain;let r=10,i,a;function o(){return i=e6(r),a=J4(r),n()[0]<0?(i=jh(i),a=jh(a),e(Z4,K4)):e(Vh,Yh),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const u=n();let l=u[0],f=u[u.length-1];const h=f<l;h&&([l,f]=[f,l]);let c=i(l),m=i(f),d,p;const g=s==null?10:+s;let v=[];if(!(r%1)&&m-c<g){if(c=Math.floor(c),m=Math.ceil(m),l>0){for(;c<=m;++c)for(d=1;d<r;++d)if(p=c<0?d/a(-c):d*a(c),!(p<l)){if(p>f)break;v.push(p)}}else for(;c<=m;++c)for(d=r-1;d>=1;--d)if(p=c>0?d/a(-c):d*a(c),!(p<l)){if(p>f)break;v.push(p)}v.length*2<g&&(v=oa(l,f,g))}else v=oa(c,m,Math.min(m-c,g)).map(a);return h?v.reverse():v},t.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=fa(u)).precision==null&&(u.trim=!0),u=Mi(u)),s===1/0)return u;const l=Math.max(1,r*s/t.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=l?u(f):""}},t.nice=()=>n(op(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),t}function up(){const e=sp(eu()).domain([1,10]);return e.copy=()=>Da(e,up()).base(e.base()),wn.apply(e,arguments),e}function Xh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Zh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function lp(e){var t=1,n=e(Xh(t),Zh(t));return n.constant=function(r){return arguments.length?e(Xh(t=+r),Zh(t)):t},Na(n)}function fp(){var e=lp(eu());return e.copy=function(){return Da(e,fp()).constant(e.constant())},wn.apply(e,arguments)}function Kh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function t6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function n6(e){return e<0?-e*e:e*e}function cp(e){var t=e(Ot,Ot),n=1;function r(){return n===1?e(Ot,Ot):n===.5?e(t6,n6):e(Kh(n),Kh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Na(t)}function hp(){var e=cp(eu());return e.copy=function(){return Da(e,hp()).exponent(e.exponent())},wn.apply(e,arguments),e}function dp(){var e=[],t=[],n=[],r;function i(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=Hv(e,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Ls(n,o)]}return a.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(_t),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return dp().domain(e).range(t).unknown(r)},wn.apply(a,arguments)}function mp(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Ls(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return mp().domain(e).range(t).unknown(n)},wn.apply(i,arguments)}const Yu=new Date,ju=new Date;function Ze(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const u=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return u;let l;do u.push(l=new Date(+a)),t(a,s),e(a);while(l<a&&a<o);return u},i.filter=a=>Ze(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Yu.setTime(+a),ju.setTime(+o),e(Yu),e(ju),Math.floor(n(Yu,ju))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const ds=Ze(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ds.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ze(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ds);ds.range;const $n=1e3,qt=$n*60,Dn=qt*60,Ln=Dn*24,Zf=Ln*7,Qh=Ln*30,Xu=Ln*365,Zt=Ze(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getUTCSeconds());Zt.range;const Ba=Ze(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$n)},(e,t)=>{e.setTime(+e+t*qt)},(e,t)=>(t-e)/qt,e=>e.getMinutes());Ba.range;const Fa=Ze(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*qt)},(e,t)=>(t-e)/qt,e=>e.getUTCMinutes());Fa.range;const La=Ze(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$n-e.getMinutes()*qt)},(e,t)=>{e.setTime(+e+t*Dn)},(e,t)=>(t-e)/Dn,e=>e.getHours());La.range;const Ia=Ze(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Dn)},(e,t)=>(t-e)/Dn,e=>e.getUTCHours());Ia.range;const Nr=Ze(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qt)/Ln,e=>e.getDate()-1);Nr.range;const tu=Ze(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ln,e=>e.getUTCDate()-1);tu.range;const nu=Ze(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ln,e=>Math.floor(e/Ln));nu.range;function Br(e){return Ze(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*qt)/Zf)}const fi=Br(0),da=Br(1),pp=Br(2),bp=Br(3),Cr=Br(4),gp=Br(5),yp=Br(6);fi.range;da.range;pp.range;bp.range;Cr.range;gp.range;yp.range;function Fr(e){return Ze(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Zf)}const ci=Fr(0),ma=Fr(1),vp=Fr(2),wp=Fr(3),Tr=Fr(4),_p=Fr(5),Mp=Fr(6);ci.range;ma.range;vp.range;wp.range;Tr.range;_p.range;Mp.range;const Ra=Ze(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ra.range;const Oa=Ze(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Oa.range;const Qt=Ze(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ze(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qt.range;const Jt=Ze(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ze(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Jt.range;function xp(e,t,n,r,i,a){const o=[[Zt,1,$n],[Zt,5,5*$n],[Zt,15,15*$n],[Zt,30,30*$n],[a,1,qt],[a,5,5*qt],[a,15,15*qt],[a,30,30*qt],[i,1,Dn],[i,3,3*Dn],[i,6,6*Dn],[i,12,12*Dn],[r,1,Ln],[r,2,2*Ln],[n,1,Zf],[t,1,Qh],[t,3,3*Qh],[e,1,Xu]];function s(l,f,h){const c=f<l;c&&([l,f]=[f,l]);const m=h&&typeof h.range=="function"?h:u(l,f,h),d=m?m.range(l,+f+1):[];return c?d.reverse():d}function u(l,f,h){const c=Math.abs(f-l)/h,m=Fs(([,,g])=>g).right(o,c);if(m===o.length)return e.every(Ml(l/Xu,f/Xu,h));if(m===0)return ds.every(Math.max(Ml(l,f,h),1));const[d,p]=o[c/o[m-1][2]<o[m][2]/c?m-1:m];return d.every(p)}return[s,u]}const[r6,Pp]=xp(Jt,Oa,ci,nu,Ia,Fa),[i6,a6]=xp(Qt,Ra,fi,Nr,La,Ba);function Zu(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ku(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ti(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function o6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,l=$i(i),f=Di(i),h=$i(a),c=Di(a),m=$i(o),d=Di(o),p=$i(s),g=Di(s),v=$i(u),b=Di(u),w={a:oe,A:ae,b:te,B:H,c:null,d:id,e:id,f:C6,g:O6,G:z6,H:S6,I:E6,j:k6,L:Ap,m:T6,M:$6,p:Y,q:W,Q:sd,s:ud,S:D6,u:N6,U:B6,V:F6,w:L6,W:I6,x:null,X:null,y:R6,Y:q6,Z:G6,"%":od},y={a:j,A:se,b:fe,B:ue,c:null,d:ad,e:ad,f:V6,g:n7,G:i7,H:U6,I:H6,j:W6,L:Ep,m:Y6,M:j6,p:K,q:Q,Q:sd,s:ud,S:X6,u:Z6,U:K6,V:Q6,w:J6,W:e7,x:null,X:null,y:t7,Y:r7,Z:a7,"%":od},_={a:$,A:E,b:L,B:U,c:D,d:nd,e:nd,f:M6,g:td,G:ed,H:rd,I:rd,j:y6,L:_6,m:g6,M:v6,p:S,q:b6,Q:P6,s:A6,S:w6,u:c6,U:h6,V:d6,w:f6,W:m6,x:k,X:z,y:td,Y:ed,Z:p6,"%":x6};w.x=x(n,w),w.X=x(r,w),w.c=x(t,w),y.x=x(n,y),y.X=x(r,y),y.c=x(t,y);function x(F,X){return function(ee){var B=[],Me=-1,re=0,ce=F.length,ke,qe,We;for(ee instanceof Date||(ee=new Date(+ee));++Me<ce;)F.charCodeAt(Me)===37&&(B.push(F.slice(re,Me)),(qe=Jh[ke=F.charAt(++Me)])!=null?ke=F.charAt(++Me):qe=ke==="e"?" ":"0",(We=X[ke])&&(ke=We(ee,qe)),B.push(ke),re=Me+1);return B.push(F.slice(re,Me)),B.join("")}}function P(F,X){return function(ee){var B=Ti(1900,void 0,1),Me=T(B,F,ee+="",0),re,ce;if(Me!=ee.length)return null;if("Q"in B)return new Date(B.Q);if("s"in B)return new Date(B.s*1e3+("L"in B?B.L:0));if(X&&!("Z"in B)&&(B.Z=0),"p"in B&&(B.H=B.H%12+B.p*12),B.m===void 0&&(B.m="q"in B?B.q:0),"V"in B){if(B.V<1||B.V>53)return null;"w"in B||(B.w=1),"Z"in B?(re=Ku(Ti(B.y,0,1)),ce=re.getUTCDay(),re=ce>4||ce===0?ma.ceil(re):ma(re),re=tu.offset(re,(B.V-1)*7),B.y=re.getUTCFullYear(),B.m=re.getUTCMonth(),B.d=re.getUTCDate()+(B.w+6)%7):(re=Zu(Ti(B.y,0,1)),ce=re.getDay(),re=ce>4||ce===0?da.ceil(re):da(re),re=Nr.offset(re,(B.V-1)*7),B.y=re.getFullYear(),B.m=re.getMonth(),B.d=re.getDate()+(B.w+6)%7)}else("W"in B||"U"in B)&&("w"in B||(B.w="u"in B?B.u%7:"W"in B?1:0),ce="Z"in B?Ku(Ti(B.y,0,1)).getUTCDay():Zu(Ti(B.y,0,1)).getDay(),B.m=0,B.d="W"in B?(B.w+6)%7+B.W*7-(ce+5)%7:B.w+B.U*7-(ce+6)%7);return"Z"in B?(B.H+=B.Z/100|0,B.M+=B.Z%100,Ku(B)):Zu(B)}}function T(F,X,ee,B){for(var Me=0,re=X.length,ce=ee.length,ke,qe;Me<re;){if(B>=ce)return-1;if(ke=X.charCodeAt(Me++),ke===37){if(ke=X.charAt(Me++),qe=_[ke in Jh?X.charAt(Me++):ke],!qe||(B=qe(F,ee,B))<0)return-1}else if(ke!=ee.charCodeAt(B++))return-1}return B}function S(F,X,ee){var B=l.exec(X.slice(ee));return B?(F.p=f.get(B[0].toLowerCase()),ee+B[0].length):-1}function $(F,X,ee){var B=m.exec(X.slice(ee));return B?(F.w=d.get(B[0].toLowerCase()),ee+B[0].length):-1}function E(F,X,ee){var B=h.exec(X.slice(ee));return B?(F.w=c.get(B[0].toLowerCase()),ee+B[0].length):-1}function L(F,X,ee){var B=v.exec(X.slice(ee));return B?(F.m=b.get(B[0].toLowerCase()),ee+B[0].length):-1}function U(F,X,ee){var B=p.exec(X.slice(ee));return B?(F.m=g.get(B[0].toLowerCase()),ee+B[0].length):-1}function D(F,X,ee){return T(F,t,X,ee)}function k(F,X,ee){return T(F,n,X,ee)}function z(F,X,ee){return T(F,r,X,ee)}function oe(F){return o[F.getDay()]}function ae(F){return a[F.getDay()]}function te(F){return u[F.getMonth()]}function H(F){return s[F.getMonth()]}function Y(F){return i[+(F.getHours()>=12)]}function W(F){return 1+~~(F.getMonth()/3)}function j(F){return o[F.getUTCDay()]}function se(F){return a[F.getUTCDay()]}function fe(F){return u[F.getUTCMonth()]}function ue(F){return s[F.getUTCMonth()]}function K(F){return i[+(F.getUTCHours()>=12)]}function Q(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var X=x(F+="",w);return X.toString=function(){return F},X},parse:function(F){var X=P(F+="",!1);return X.toString=function(){return F},X},utcFormat:function(F){var X=x(F+="",y);return X.toString=function(){return F},X},utcParse:function(F){var X=P(F+="",!0);return X.toString=function(){return F},X}}}var Jh={"-":"",_:" ",0:"0"},at=/^\s*\d+/,s6=/^%/,u6=/[\\^$*+?|[\]().{}]/g;function Ce(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function l6(e){return e.replace(u6,"\\$&")}function $i(e){return new RegExp("^(?:"+e.map(l6).join("|")+")","i")}function Di(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function f6(e,t,n){var r=at.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function c6(e,t,n){var r=at.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function h6(e,t,n){var r=at.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function d6(e,t,n){var r=at.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function m6(e,t,n){var r=at.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ed(e,t,n){var r=at.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function td(e,t,n){var r=at.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function p6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function b6(e,t,n){var r=at.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function g6(e,t,n){var r=at.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function nd(e,t,n){var r=at.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function y6(e,t,n){var r=at.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function rd(e,t,n){var r=at.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function v6(e,t,n){var r=at.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function w6(e,t,n){var r=at.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function _6(e,t,n){var r=at.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function M6(e,t,n){var r=at.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function x6(e,t,n){var r=s6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function P6(e,t,n){var r=at.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function A6(e,t,n){var r=at.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function id(e,t){return Ce(e.getDate(),t,2)}function S6(e,t){return Ce(e.getHours(),t,2)}function E6(e,t){return Ce(e.getHours()%12||12,t,2)}function k6(e,t){return Ce(1+Nr.count(Qt(e),e),t,3)}function Ap(e,t){return Ce(e.getMilliseconds(),t,3)}function C6(e,t){return Ap(e,t)+"000"}function T6(e,t){return Ce(e.getMonth()+1,t,2)}function $6(e,t){return Ce(e.getMinutes(),t,2)}function D6(e,t){return Ce(e.getSeconds(),t,2)}function N6(e){var t=e.getDay();return t===0?7:t}function B6(e,t){return Ce(fi.count(Qt(e)-1,e),t,2)}function Sp(e){var t=e.getDay();return t>=4||t===0?Cr(e):Cr.ceil(e)}function F6(e,t){return e=Sp(e),Ce(Cr.count(Qt(e),e)+(Qt(e).getDay()===4),t,2)}function L6(e){return e.getDay()}function I6(e,t){return Ce(da.count(Qt(e)-1,e),t,2)}function R6(e,t){return Ce(e.getFullYear()%100,t,2)}function O6(e,t){return e=Sp(e),Ce(e.getFullYear()%100,t,2)}function q6(e,t){return Ce(e.getFullYear()%1e4,t,4)}function z6(e,t){var n=e.getDay();return e=n>=4||n===0?Cr(e):Cr.ceil(e),Ce(e.getFullYear()%1e4,t,4)}function G6(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ce(t/60|0,"0",2)+Ce(t%60,"0",2)}function ad(e,t){return Ce(e.getUTCDate(),t,2)}function U6(e,t){return Ce(e.getUTCHours(),t,2)}function H6(e,t){return Ce(e.getUTCHours()%12||12,t,2)}function W6(e,t){return Ce(1+tu.count(Jt(e),e),t,3)}function Ep(e,t){return Ce(e.getUTCMilliseconds(),t,3)}function V6(e,t){return Ep(e,t)+"000"}function Y6(e,t){return Ce(e.getUTCMonth()+1,t,2)}function j6(e,t){return Ce(e.getUTCMinutes(),t,2)}function X6(e,t){return Ce(e.getUTCSeconds(),t,2)}function Z6(e){var t=e.getUTCDay();return t===0?7:t}function K6(e,t){return Ce(ci.count(Jt(e)-1,e),t,2)}function kp(e){var t=e.getUTCDay();return t>=4||t===0?Tr(e):Tr.ceil(e)}function Q6(e,t){return e=kp(e),Ce(Tr.count(Jt(e),e)+(Jt(e).getUTCDay()===4),t,2)}function J6(e){return e.getUTCDay()}function e7(e,t){return Ce(ma.count(Jt(e)-1,e),t,2)}function t7(e,t){return Ce(e.getUTCFullYear()%100,t,2)}function n7(e,t){return e=kp(e),Ce(e.getUTCFullYear()%100,t,2)}function r7(e,t){return Ce(e.getUTCFullYear()%1e4,t,4)}function i7(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Tr(e):Tr.ceil(e),Ce(e.getUTCFullYear()%1e4,t,4)}function a7(){return"+0000"}function od(){return"%"}function sd(e){return+e}function ud(e){return Math.floor(+e/1e3)}var Or,Kf,qa;o7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function o7(e){return Or=o6(e),Kf=Or.format,Or.parse,qa=Or.utcFormat,Or.utcParse,Or}function s7(e){return new Date(e)}function u7(e){return e instanceof Date?+e:+new Date(+e)}function Qf(e,t,n,r,i,a,o,s,u,l){var f=ip(),h=f.invert,c=f.domain,m=l(".%L"),d=l(":%S"),p=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),b=l("%b %d"),w=l("%B"),y=l("%Y");function _(x){return(u(x)<x?m:s(x)<x?d:o(x)<x?p:a(x)<x?g:r(x)<x?i(x)<x?v:b:n(x)<x?w:y)(x)}return f.invert=function(x){return new Date(h(x))},f.domain=function(x){return arguments.length?c(Array.from(x,u7)):c().map(s7)},f.ticks=function(x){var P=c();return e(P[0],P[P.length-1],x??10)},f.tickFormat=function(x,P){return P==null?_:l(P)},f.nice=function(x){var P=c();return(!x||typeof x.range!="function")&&(x=t(P[0],P[P.length-1],x??10)),x?c(op(P,x)):f},f.copy=function(){return Da(f,Qf(e,t,n,r,i,a,o,s,u,l))},f}function l7(){return wn.apply(Qf(i6,a6,Qt,Ra,fi,Nr,La,Ba,Zt,Kf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function f7(){return wn.apply(Qf(r6,Pp,Jt,Oa,ci,tu,Ia,Fa,Zt,qa).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ru(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function iu(){var e=0,t=.5,n=1,r=1,i,a,o,s,u,l=Ot,f,h=!1,c;function m(p){return isNaN(p=+p)?c:(p=.5+((p=+f(p))-a)*(r*p<r*a?s:u),l(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,n]=p,i=f(e=+e),a=f(t=+t),o=f(n=+n),s=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,m):[e,t,n]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(l=p,m):l};function d(p){return function(g){var v,b,w;return arguments.length?([v,b,w]=g,l=Vs(p,[v,b,w]),m):[l(0),l(.5),l(1)]}}return m.range=d(Ta),m.rangeRound=d(Rf),m.unknown=function(p){return arguments.length?(c=p,m):c},function(p){return f=p,i=p(e),a=p(t),o=p(n),s=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,m}}function Cp(){var e=Na(iu()(Ot));return e.copy=function(){return ru(e,Cp())},Qs.apply(e,arguments)}function Tp(){var e=sp(iu()).domain([.1,1,10]);return e.copy=function(){return ru(e,Tp()).base(e.base())},Qs.apply(e,arguments)}function $p(){var e=lp(iu());return e.copy=function(){return ru(e,$p()).constant(e.constant())},Qs.apply(e,arguments)}function Dp(){var e=cp(iu());return e.copy=function(){return ru(e,Dp()).exponent(e.exponent())},Qs.apply(e,arguments)}function ve(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const c7=ve("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),h7=ve("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),d7=ve("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),m7=ve("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),p7=ve("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),b7=ve("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),g7=ve("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),y7=ve("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),v7=ve("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),w7=ve("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Fe=e=>a_(e[e.length-1]);var Np=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ve);const Bp=Fe(Np);var Fp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ve);const Lp=Fe(Fp);var Ip=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ve);const Rp=Fe(Ip);var Op=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ve);const qp=Fe(Op);var nf=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ve);const ms=Fe(nf);var zp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ve);const Gp=Fe(zp);var rf=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ve);const ps=Fe(rf);var Up=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ve);const Hp=Fe(Up);var Wp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ve);const Vp=Fe(Wp);var Yp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ve);const jp=Fe(Yp);var Xp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ve);const Zp=Fe(Xp);var Kp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ve);const Qp=Fe(Kp);var Jp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ve);const eb=Fe(Jp);var tb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ve);const nb=Fe(tb);var rb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ve);const ib=Fe(rb);var ab=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ve);const ob=Fe(ab);var sb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ve);const ub=Fe(sb);var lb=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ve);const fb=Fe(lb);var cb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ve);const hb=Fe(cb);var db=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ve);const mb=Fe(db);var pb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ve);const bb=Fe(pb);var gb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ve);const yb=Fe(gb);var vb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ve);const wb=Fe(vb);var _b=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ve);const Mb=Fe(_b);var xb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ve);const Pb=Fe(xb);var Ab=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ve);const Sb=Fe(Ab);var Eb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ve);const kb=Fe(Eb);function Cb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const Tb=Of(gn(300,.5,0),gn(-240,.5,1));var $b=Of(gn(-100,.75,.35),gn(80,1.5,.8)),Db=Of(gn(260,.75,.35),gn(80,1.5,.8)),mo=gn();function Nb(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return mo.h=360*e-100,mo.s=1.5-1.5*t,mo.l=.8-.9*t,mo+""}var po=Qn(),_7=Math.PI/3,M7=Math.PI*2/3;function Bb(e){var t;return e=(.5-e)*Math.PI,po.r=255*(t=Math.sin(e))*t,po.g=255*(t=Math.sin(e+_7))*t,po.b=255*(t=Math.sin(e+M7))*t,po+""}function Fb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function au(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Lb=au(ve("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Ib=au(ve("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Rb=au(ve("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Ob=au(ve("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Je(e){return function(){return e}}const qb=Math.cos,Jf=Math.min,bs=Math.sin,Ke=Math.sqrt,ld=1e-12,gs=Math.PI,ou=2*gs;function zb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new wm(t)}function Gb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ub(e){this._context=e}Ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function za(e){return new Ub(e)}function Hb(e){return e[0]}function Wb(e){return e[1]}function Vb(e,t){var n=Je(!0),r=null,i=za,a=null,o=zb(s);e=typeof e=="function"?e:e===void 0?Hb:Je(e),t=typeof t=="function"?t:t===void 0?Wb:Je(t);function s(u){var l,f=(u=Gb(u)).length,h,c=!1,m;for(r==null&&(a=i(m=o())),l=0;l<=f;++l)!(l<f&&n(h=u[l],l,u))===c&&((c=!c)?a.lineStart():a.lineEnd()),c&&a.point(+e(h,l,u),+t(h,l,u));if(m)return a=null,m+""||null}return s.x=function(u){return arguments.length?(e=typeof u=="function"?u:Je(+u),s):e},s.y=function(u){return arguments.length?(t=typeof u=="function"?u:Je(+u),s):t},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Je(!!u),s):n},s.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),s):i},s.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),s):r},s}function x7(e,t,n){var r=null,i=Je(!0),a=null,o=za,s=null,u=zb(l);e=typeof e=="function"?e:e===void 0?Hb:Je(+e),t=typeof t=="function"?t:Je(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Wb:Je(+n);function l(h){var c,m,d,p=(h=Gb(h)).length,g,v=!1,b,w=new Array(p),y=new Array(p);for(a==null&&(s=o(b=u())),c=0;c<=p;++c){if(!(c<p&&i(g=h[c],c,h))===v)if(v=!v)m=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=c-1;d>=m;--d)s.point(w[d],y[d]);s.lineEnd(),s.areaEnd()}v&&(w[c]=+e(g,c,h),y[c]=+t(g,c,h),s.point(r?+r(g,c,h):w[c],n?+n(g,c,h):y[c]))}if(b)return s=null,b+""||null}function f(){return Vb().defined(i).curve(o).context(a)}return l.x=function(h){return arguments.length?(e=typeof h=="function"?h:Je(+h),r=null,l):e},l.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Je(+h),l):e},l.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Je(+h),l):r},l.y=function(h){return arguments.length?(t=typeof h=="function"?h:Je(+h),n=null,l):t},l.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Je(+h),l):t},l.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Je(+h),l):n},l.lineX0=l.lineY0=function(){return f().x(e).y(t)},l.lineY1=function(){return f().x(e).y(n)},l.lineX1=function(){return f().x(r).y(t)},l.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Je(!!h),l):i},l.curve=function(h){return arguments.length?(o=h,a!=null&&(s=o(a)),l):o},l.context=function(h){return arguments.length?(h==null?a=s=null:s=o(a=h),l):a},l}class Yb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function P7(e){return new Yb(e,!0)}function A7(e){return new Yb(e,!1)}const S7=Ke(3),jb={draw(e,t){const n=Ke(t+Jf(t/28,.75))*.59436,r=n/2,i=r*S7;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},pa={draw(e,t){const n=Ke(t/gs);e.moveTo(n,0),e.arc(0,0,n,0,ou)}},Xb={draw(e,t){const n=Ke(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Zb=Ke(1/3),E7=Zb*2,Kb={draw(e,t){const n=Ke(t/E7),r=n*Zb;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Qb={draw(e,t){const n=Ke(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Jb={draw(e,t){const n=Ke(t-Jf(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},eg={draw(e,t){const n=Ke(t),r=-n/2;e.rect(r,r,n,n)}},tg={draw(e,t){const n=Ke(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},k7=.8908130915292852,ng=bs(gs/10)/bs(7*gs/10),C7=bs(ou/10)*ng,T7=-qb(ou/10)*ng,rg={draw(e,t){const n=Ke(t*k7),r=C7*n,i=T7*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=ou*a/5,s=qb(o),u=bs(o);e.lineTo(u*n,-s*n),e.lineTo(s*r-u*i,u*r+s*i)}e.closePath()}},Qu=Ke(3),ig={draw(e,t){const n=-Ke(t/(Qu*3));e.moveTo(0,n*2),e.lineTo(-Qu*n,-n),e.lineTo(Qu*n,-n),e.closePath()}},$7=Ke(3),ag={draw(e,t){const n=Ke(t)*.6824,r=n/2,i=n*$7/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Nt=-.5,Bt=Ke(3)/2,af=1/Ke(12),D7=(af/2+1)*3,og={draw(e,t){const n=Ke(t/D7),r=n/2,i=n*af,a=r,o=n*af+n,s=-a,u=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,u),e.lineTo(Nt*r-Bt*i,Bt*r+Nt*i),e.lineTo(Nt*a-Bt*o,Bt*a+Nt*o),e.lineTo(Nt*s-Bt*u,Bt*s+Nt*u),e.lineTo(Nt*r+Bt*i,Nt*i-Bt*r),e.lineTo(Nt*a+Bt*o,Nt*o-Bt*a),e.lineTo(Nt*s+Bt*u,Nt*u-Bt*s),e.closePath()}},sg={draw(e,t){const n=Ke(t-Jf(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},N7=[pa,Xb,Kb,eg,rg,ig,og],B7=[pa,Jb,sg,ag,jb,tg,Qb];function Jn(){}function ys(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function su(e){this._context=e}su.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ys(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ys(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function F7(e){return new su(e)}function ug(e){this._context=e}ug.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ys(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function L7(e){return new ug(e)}function lg(e){this._context=e}lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ys(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I7(e){return new lg(e)}function fg(e,t){this._basis=new su(e),this._beta=t}fg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,s=-1,u;++s<=n;)u=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+u*a),this._beta*t[s]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const R7=function e(t){function n(r){return t===1?new su(r):new fg(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function vs(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ec(e,t){this._context=e,this._k=(1-t)/6}ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vs(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:vs(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const O7=function e(t){function n(r){return new ec(r,t)}return n.tension=function(r){return e(+r)},n}(0);function tc(e,t){this._context=e,this._k=(1-t)/6}tc.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:vs(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const q7=function e(t){function n(r){return new tc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function nc(e,t){this._context=e,this._k=(1-t)/6}nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vs(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const z7=function e(t){function n(r){return new nc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function rc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>ld){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ld){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/f,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function cg(e,t){this._context=e,this._alpha=t}cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:rc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const G7=function e(t){function n(r){return t?new cg(r,t):new ec(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function hg(e,t){this._context=e,this._alpha=t}hg.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:rc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const U7=function e(t){function n(r){return t?new hg(r,t):new tc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function dg(e,t){this._context=e,this._alpha=t}dg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const H7=function e(t){function n(r){return t?new dg(r,t):new nc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function mg(e){this._context=e}mg.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function W7(e){return new mg(e)}function fd(e){return e<0?-1:1}function cd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(fd(a)+fd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function hd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ju(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function ws(e){this._context=e}ws.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ju(this,this._t0,hd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ju(this,hd(this,n=cd(this,e,t)),n);break;default:Ju(this,this._t0,n=cd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function pg(e){this._context=new bg(e)}(pg.prototype=Object.create(ws.prototype)).point=function(e,t){ws.prototype.point.call(this,t,e)};function bg(e){this._context=e}bg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function V7(e){return new ws(e)}function Y7(e){return new pg(e)}function gg(e){this._context=e}gg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=dd(e),i=dd(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function dd(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function j7(e){return new gg(e)}function uu(e,t){this._context=e,this._t=t}uu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function X7(e){return new uu(e,.5)}function Z7(e){return new uu(e,0)}function K7(e){return new uu(e,1)}function Vi(e,t,n){this.k=e,this.x=t,this.y=n}Vi.prototype={constructor:Vi,scale:function(e){return e===1?this:new Vi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Vi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Vi.prototype;const Q7="modulepreload",J7=function(e){return"/rhythm-vis/"+e},md={},qr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=J7(o),o in md)return;md[o]=!0;const s=o.endsWith(".css"),u=s?'[rel="stylesheet"]':"";if(!!r)for(let h=a.length-1;h>=0;h--){const c=a[h];if(c.href===o&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const f=document.createElement("link");if(f.rel=s?"stylesheet":Q7,s||(f.as="script",f.crossOrigin=""),f.href=o,document.head.appendChild(f),s)return new Promise((h,c)=>{f.addEventListener("load",h),f.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function e9(e){if(e){if(e=new Uint8Array(e.buffer||e),n9(e))return"wav";if(t9(e))return"mp3";if(i9(e))return"flac";if(a9(e))return"m4a";if(o9(e))return"opus";if(r9(e))return"oga";if(s9(e))return"qoa"}}function t9(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function n9(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function r9(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function i9(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function a9(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function o9(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function s9(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let u9=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],a=r,o=0;a<this.length&&o<t.length;a++,o++)t[o]=i[a]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var a=r,o=0;a<this.length&&o<t.length;a++,o++)i[a]=t[o]}};const l9=globalThis.AudioBuffer||u9;async function f9(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=e9(e);if(!t)throw Error("Cannot detect audio format");if(!gt[t])throw Error("Missing decoder for "+t+" format");return gt[t](e)}const gt={async oga(e){let{decoder:t}=gt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await qr(()=>import("./index-H-nTbtTw.js"),__vite__mapDeps([0,1,2]));await(gt.oga.decoder=t=new n).ready}return e&&zr(await t.decodeFile(e))},async mp3(e){let{decoder:t}=gt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await qr(()=>import("./index-EN3ip_lF.js"),__vite__mapDeps([3,2]));await(gt.mp3.decoder=t=new n).ready}return e&&zr(await t.decode(e))},async flac(e){let{decoder:t}=gt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await qr(()=>import("./index-HvHGKpGR.js"),__vite__mapDeps([4,1,2]));await(gt.flac.decoder=t=new n).ready}return e&&zr(await t.decode(e))},async opus(e){let{decoder:t}=gt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await qr(()=>import("./index-4fTh1i4n.js"),__vite__mapDeps([5,1,2]));await(gt.opus.decoder=t=new n).ready}return e&&zr(await t.decodeFile(e))},async wav(e){let{decode:t}=gt.wav;if(!t){let n=await qr(()=>import("./index-gNX72Rk2.js").then(r=>r.i),__vite__mapDeps([]));t=gt.wav.decode=n.default.decode}return e&&zr(await t(e))},async qoa(e){let{decode:t}=gt.qoa;return t||(gt.qoa.decode=t=(await qr(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),e&&zr(await t(e))}};function zr({channelData:e,sampleRate:t}){let n=new l9({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Ni=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c9=h9;function h9(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,a=i===3?32:16,o;return n===2?o=m9(e.getChannelData(0),e.getChannelData(1)):o=e.getChannelData(0),d9(o,i,r,n,a)}function d9(e,t,n,r,i){var a=i/8,o=r*a,s=new ArrayBuffer(44+e.length*a),u=new DataView(s);return bo(u,0,"RIFF"),u.setUint32(4,36+e.length*a,!0),bo(u,8,"WAVE"),bo(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,t,!0),u.setUint16(22,r,!0),u.setUint32(24,n,!0),u.setUint32(28,n*o,!0),u.setUint16(32,o,!0),u.setUint16(34,i,!0),bo(u,36,"data"),u.setUint32(40,e.length*a,!0),t===1?b9(u,44,e):p9(u,44,e),s}function m9(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=t[a],a++;return r}function p9(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function b9(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function bo(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const g9=yg(c9);async function ic(e){const n=await(await fetch(e)).arrayBuffer();return await f9(n)}function y9(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),a=new Float32Array(Math.ceil(r*e.sampleRate));for(const o of t){const s=Math.round(o*e.sampleRate);let u=1;for(let l=0;l<i.length;++l)u=Math.max(0,u-2/40100),a[s+l]=i[l]*u}return a}function ac(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([g9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function vg(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function _s(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const a=i.audioBuffer.getChannelData(0);for(const o of i.times){const s=Math.round(o*n);for(let u=0;u<a.length;++u)r[s+u]=Math.min(r[s+u]+a[u],1)}}return r}function er(e){return e!=null&&!Number.isNaN(e)}function en(e,t){return+er(t)-+er(e)||_t(e,t)}function Ms(e,t){return+er(t)-+er(e)||Ea(e,t)}function oc(e){return e!=null&&`${e}`!=""}function wg(e){return isFinite(e)?e:NaN}function lu(e){return e>0&&isFinite(e)?e:NaN}function sc(e){return e<0&&isFinite(e)?e:NaN}function v9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${w9(e.getUTCFullYear())}-${kn(e.getUTCMonth()+1,2)}-${kn(e.getUTCDate(),2)}${n||r||i||a?`T${kn(n,2)}:${kn(r,2)}${i||a?`:${kn(i,2)}${a?`.${kn(a,3)}`:""}`:""}Z`:""}`}function w9(e){return e<0?`-${kn(-e,6)}`:e>9999?`+${kn(e,6)}`:kn(e,4)}function kn(e,t){return`${e}`.padStart(t,"0")}const _9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function _g(e,t){return _9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Vr=1e3,Yn=Vr*60,jn=Yn*60,yn=jn*24,sn=yn*7,yr=yn*30,Hn=yn*365,el=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Vr],["5 seconds",5*Vr],["15 seconds",15*Vr],["30 seconds",30*Vr],["minute",Yn],["5 minutes",5*Yn],["15 minutes",15*Yn],["30 minutes",30*Yn],["hour",jn],["3 hours",3*jn],["6 hours",6*jn],["12 hours",12*jn],["day",yn],["2 days",2*yn],["week",sn],["2 weeks",2*sn],["month",yr],["3 months",3*yr],["6 months",6*yr],["year",Hn],["2 years",2*Hn],["5 years",5*Hn],["10 years",10*Hn],["20 years",20*Hn],["50 years",50*Hn],["100 years",100*Hn]],uc=new Map([["second",Vr],["minute",Yn],["hour",jn],["day",yn],["monday",sn],["tuesday",sn],["wednesday",sn],["thursday",sn],["friday",sn],["saturday",sn],["sunday",sn],["week",sn],["month",yr],["year",Hn]]),Mg=new Map([["second",Zt],["minute",Ba],["hour",La],["day",Nr],["monday",da],["tuesday",pp],["wednesday",bp],["thursday",Cr],["friday",gp],["saturday",yp],["sunday",fi],["week",fi],["month",Ra],["year",Qt]]),lc=new Map([["second",Zt],["minute",Fa],["hour",Ia],["day",nu],["monday",ma],["tuesday",vp],["wednesday",wp],["thursday",Tr],["friday",_p],["saturday",Mp],["sunday",ci],["week",ci],["month",Oa],["year",Jt]]),Ga=Symbol("intervalDuration"),fu=Symbol("intervalType");for(const[e,t]of Mg)t[Ga]=uc.get(e),t[fu]="time";for(const[e,t]of lc)t[Ga]=uc.get(e),t[fu]="utc";const Yi=[["year",Jt,"utc"],["month",Oa,"utc"],["day",nu,"utc",6*yr],["hour",Ia,"utc",3*yn],["minute",Fa,"utc",6*jn],["second",Zt,"utc",30*Yn]],Fo=[["year",Qt,"time"],["month",Ra,"time"],["day",Nr,"time",6*yr],["hour",La,"time",3*yn],["minute",Ba,"time",6*jn],["second",Zt,"time",30*Yn]],M9=[Yi[0],Fo[0],Yi[1],Fo[1],Yi[2],Fo[2],...Yi.slice(3)];function xg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=lc.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function Pg(e){return Ag(xg(e),"time")}function fc(e){return Ag(xg(e),"utc")}function Ag([e,t],n){let r=(n==="time"?Mg:lc).get(e);return t>1&&(r=r.every(t),r[Ga]=uc.get(e)*t,r[fu]=n),r}function pd(e,t){if(!(t>1))return;const n=e[Ga];if(!el.some(([,i])=>i===n)||n%yn===0&&yn<n&&n<yr)return;const[r]=el[Fs(([,i])=>Math.log(i)).center(el,Math.log(n*t))];return(e[fu]==="time"?Pg:fc)(r)}function bd(e,t,n){const r=t==="time"?Kf:qa;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=x9(n);switch(e){case"millisecond":return Gr(r(".%L"),r(":%M:%S"),i);case"second":return Gr(r(":%S"),r("%-I:%M"),i);case"minute":return Gr(r("%-I:%M"),r("%p"),i);case"hour":return Gr(r("%-I %p"),r("%b %-d"),i);case"day":return Gr(r("%-d"),r("%b"),i);case"month":return Gr(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function x9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function P9(e){return e==="time"?Fo:e==="utc"?Yi:M9}function A9(e,t,n){const r=zt(jv(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return bd("millisecond","utc",n);for(const[i,a,o,s]of P9(e)){if(r>s||i==="hour"&&!r)break;if(t.every(u=>a.floor(u)>=u))return bd(i,o,n)}}function Gr(e,t,n){return(r,i,a)=>{const o=e(r,i),s=t(r,i),u=i-di(a);return i!==u&&a[u]!==void 0&&s===t(a[u],u)?o:n(o,s)}}const ba=Object.getPrototypeOf(Uint8Array),S9=Object.prototype.toString,Sg=Symbol("reindex");function tt(e,t,n){const r=typeof t;return r==="string"?gd(e,Eg(t),n):r==="function"?gd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ve(e,Ua(t),n):typeof(t==null?void 0:t.transform)=="function"?yd(t.transform(e),n):E9(yd(t,n),e==null?void 0:e[Sg])}function E9(e,t){return t?mc(e,t):e}function gd(e,t,n){return Ve(e,(n==null?void 0:n.prototype)instanceof ba?k9(t):t,n)}function yd(e,t){return t===void 0?$t(e):e instanceof t?e:t.prototype instanceof ba&&!(e instanceof ba)?t.from(e,hc):t.from(e)}function k9(e){return(t,n)=>hc(e(t,n))}const Lo=[null],Eg=e=>t=>t[e],cu={transform:On},ct={transform:e=>e},C9=()=>1,T9=()=>!0,dt=e=>e==null?e:`${e}`,Ie=e=>e==null?e:+e,cc=e=>e?e[0]:void 0,of=e=>e?e[1]:void 0,Ua=e=>()=>e;function $9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>ni(n,t,r)}function cn(e){return e instanceof ba?e:Ve(e,hc,Float64Array)}function hc(e){return e==null?NaN:Number(e)}function D9(e){return Ve(e,kg)}function kg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?_g(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function In(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:du(e)?[void 0,e]:[e,void 0]}function mt(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function Cg(e,t,n){if(e!=null)return rn(e,t,n)}function rn(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function $t(e){return e==null||e instanceof Array||e instanceof ba?e:Array.from(e)}function Ve(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function ga(e,t=Array){return e instanceof t?e.slice():t.from(e)}function N9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function Tg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function B9(e){return N9(e)||Tg(e)||e.interval!==void 0}function ir(e){return(e==null?void 0:e.toString)===S9}function sf(e){return ir(e)&&(e.type!==void 0||e.domain!==void 0)}function hu(e){return ir(e)&&typeof e.transform!="function"}function hi(e){return hu(e)&&e.value===void 0&&e.channel===void 0}function F9(e,t,n,r=ct){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ha(e,t){return e===void 0&&t===void 0?[cc,of]:[e,t]}function dc({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=In(t)),e===void 0&&([e]=In(n)),e}function On(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function mc(e,t){return Ve(t,n=>e[n],e.constructor)}function L9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function pr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function I9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function xs(e){let t;return[{transform:()=>t,label:Lr(e)},n=>t=n]}function Sn(e){return e==null?[e]:xs(e)}function Lr(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function uf(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return xt(r)||xt(i)?Ve(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Ve(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function $g(e,t){const n=Dg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ve(e,n):e}function Dg(e,t){const n=pc(e,t);return n&&(r=>er(r)?n.floor(r):r)}function pc(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Pl(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Pl(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?Pg:fc)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Pi(e,t){if(e=pc(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function R9(e,t){if(e=Pi(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function O9(e){return Yr(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Yr(e){return typeof(e==null?void 0:e.range)=="function"}function Wa(e){return e===void 0||hu(e)?e:{value:e}}function q9(e){return e==null?null:{transform:t=>tt(t,e,Float64Array),label:Lr(e)}}function ar(e){return e&&typeof e[Symbol.iterator]=="function"}function Ng(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function vd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function xt(e){for(const t of e)if(t!=null)return t instanceof Date}function z9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&_g(t)}function G9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function U9(e){for(const t of e)if(t!=null)return typeof t=="number"}function tl(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const H9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function du(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||H9.has(e))}function W9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function vt(e){return e==null||ya(e)}function ya(e){return/^\s*none\s*$/i.test(e)}function V9(e){return/^\s*round\s*$/i.test(e)}function lf(e,t){return Cg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function mu(e="middle"){return lf(e,"frameAnchor")}function di(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Ea(t,n)}function Y9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function j9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function Bg(e){return ar(e)?j9(e):e}const hn=Symbol("position"),qn=Symbol("color"),Va=Symbol("radius"),Ya=Symbol("length"),ja=Symbol("opacity"),pu=Symbol("symbol"),Fg=Symbol("projection"),Ue=new Map([["x",hn],["y",hn],["fx",hn],["fy",hn],["r",Va],["color",qn],["opacity",ja],["symbol",pu],["length",Ya],["projection",Fg]]);function X9(e){return e===hn||e===Fg}function Z9(e){return e===hn||e===Va||e===Ya||e===ja}const K9=Math.sqrt(3),Q9=2/K9,J9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*Q9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},bc=new Map([["asterisk",jb],["circle",pa],["cross",Xb],["diamond",Kb],["diamond2",Qb],["hexagon",J9],["plus",Jb],["square",eg],["square2",tg],["star",rg],["times",sg],["triangle",ig],["triangle2",ag],["wye",og]]);function gc(e){return e&&typeof e.draw=="function"}function e8(e){return gc(e)?!0:typeof e!="string"?!1:bc.has(e.toLowerCase())}function yc(e){if(e==null||gc(e))return e;const t=bc.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function t8(e){if(e==null||gc(e))return[void 0,e];if(typeof e=="string"){const t=bc.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function bu({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=Lg(e)),t!=null&&!hi(t)&&(r=nl(r,vc(t))),n&&(r=nl(r,Ig))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||hi(t))&&{sort:t},transform:nl(r,o)}}function mi({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=Lg(e)),t!=null&&!hi(t)&&(r=rl(r,vc(t))),n&&(r=rl(r,Ig))),{...i,...(t===null||hi(t))&&{sort:t},initializer:rl(r,a)}}function nl(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,$t(n),r,i)}}function rl(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,s,u,l,f,h;return{data:s=n,facets:u=r,channels:o}=e.call(this,n,r,i,...a),{data:f=s,facets:h=u,channels:l}=t.call(this,s,u,{...i,...o},...a),{data:f,facets:h,channels:{...o,...l}}}}function n8(e,t){return(e.initializer!=null?mi:bu)(e,t)}function Lg(e){return(t,n)=>{const r=tt(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function Ig(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function r8(e,{sort:t,...n}={}){return{...(hu(e)&&e.channel!==void 0?mi:n8)(n,vc(e)),sort:hi(t)?t:null}}function vc(e){return(typeof e=="function"&&e.length!==1?i8:a8)(e)}function i8(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function a8(e){let t,n;({channel:t,value:e,order:n}={...Wa(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?Ms:en),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=en;break;case"descending":n=Ms;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let s;if(t===void 0)s=tt(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(s=o[t],!s)return{};s=s.value}const u=(l,f)=>n(s[l],s[f]);return{data:i,facets:a.map(l=>l.slice().sort(u))}}}function go(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function o8(e,t,n=Rg){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",d8]),t.href!=null&&e.href===void 0&&r.push(["href",_c]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?s8(i):n(i,a,t))}function Rg(e,t,n,r=Og){let i;ir(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,s]=xs(a.label);let u;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){a.initialize(l),u=s([])},scope(l,f){a.scope(l,f)},reduce(l,f){u.push(a.reduce(l,f))}}}function s8(e){return{name:e,initialize(){},scope(){},reduce(){}}}function Og(e,t,n,r=wc){const i=I9(e,n),a=r(t,i);let o,s;return{label:Lr(a===Ps?null:i,a.label),initialize(u){o=i===void 0?u:tt(u,i),a.scope==="data"&&(s=a.reduceIndex(On(u),o))},scope(u,l){a.scope===u&&(s=a.reduceIndex(l,o))},reduce(u,l){return a.scope==null?a.reduceIndex(u,o,l):a.reduceIndex(u,o,s,l)}}}function wd(e,t){return t?aa(Os(e,n=>t[n]),cc):[[,e]]}function wc(e,t,n=u8){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&ir(e))return c8(e);if(typeof e=="function")return h8(e);if(/^p\d{2}$/i.test(e))return En($9(e));switch(`${e}`.toLowerCase()){case"first":return _c;case"last":return m8;case"identity":return qg;case"count":return Ps;case"distinct":return p8;case"sum":return t==null?Ps:b8;case"proportion":return Md(t,"data");case"proportion-facet":return Md(t,"facet");case"deviation":return En(Is);case"min":return En(Nn);case"min-index":return En(Uv);case"max":return En(zt);case"max-index":return En(Gv);case"mean":return _d(zs);case"median":return _d(xl);case"variance":return En(Tf);case"mode":return En(Yv)}return n(e)}function u8(e){throw new Error(`invalid reduce: ${e}`)}function l8(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function f8(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>en(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function c8(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function h8(e){return{reduceIndex(t,n,r){return e(mc(n,t),r)}}}function En(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function _d(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return xt(n)?new Date(r):r}}}const qg={reduceIndex(e,t){return mc(t,e)}},_c={reduceIndex(e,t){return t[e[0]]}},d8={reduceIndex(e,t){const r=aa(Xr(e,a=>a.length,a=>t[a]),of),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[` ${a.length.toLocaleString("en-US")} more`,Kn(a,of)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},m8={reduceIndex(e,t){return t[e[e.length-1]]}},Ps={label:"Frequency",reduceIndex(e){return e.length}},p8={label:"Distinct",reduceIndex(e,t){const n=new Rs;for(const r of e)n.add(t[r]);return n.size}},b8=En(Kn);function Md(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Kn(n,a=>r[a])/i}}function va(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=Lr(r)},s){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),zg(s,{scale:t,type:n,value:tt(e,r),label:o,filter:i,hint:a})}function g8(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,va(t,r,n)]))}function y8(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Ve(a,o)]}));return n.channels=e,n}function zg(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&tl(r,du)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&tl(r,W9)?null:"opacity";break;case"symbol":n!==!0&&tl(r,e8)?(t.scale=null,t.value=Ve(r,yc)):t.scale="symbol";break;default:t.scale=Ue.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ue.has(n))throw new Error(`unknown scale: ${n}`);return t}function v8(e,t,n,r,i){const{order:a,reverse:o,reduce:s=!0,limit:u}=i;for(const l in i){if(!Ue.has(l))continue;let{value:f,order:h=a,reverse:c=o,reduce:m=s,limit:d=u}=Wa(i[l]);const p=f==null?void 0:f.startsWith("-");if(p&&(f=f.slice(1)),h=h===void 0?p!==(f==="width"||f==="height")?Ug:Gg:M8(h),m==null||m===!1)continue;const g=l==="fx"||l==="fy"?_8(t,r[l]):w8(n,l);if(!g)throw new Error(`missing channel for scale: ${l}`);const v=g.value,[b=0,w=1/0]=ar(d)?d:d<0?[d]:[0,d];if(f==null)g.domain=()=>{let y=Array.from(new Rs(v));return c&&(y=y.reverse()),(b!==0||w!==1/0)&&(y=y.slice(b,w)),y};else{const y=f==="data"?e:f==="height"?xd(n,"y1","y2"):f==="width"?xd(n,"x1","x2"):ff(n,f,f==="y"?"y2":f==="x"?"x2":void 0),_=wc(m===!0?"max":m,y);g.domain=()=>{let x=Lv(On(v),P=>_.reduceIndex(P,y),P=>v[P]);return h&&x.sort(h),c&&x.reverse(),(b!==0||w!==1/0)&&(x=x.slice(b,w)),x.map(cc)}}}}function w8(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function _8(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const s of e[a])i[s]=o}return t}function xd(e,t,n){const r=ff(e,t),i=ff(e,n);return Ve(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function ff(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function M8(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return Gg;case"descending":return Ug}throw new Error(`invalid order: ${e}`)}function Gg([e,t],[n,r]){return en(t,r)||en(e,n)}function Ug([e,t],[n,r]){return Ms(t,r)||en(e,n)}function Pd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function x8(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const P8=x8(e=>new Intl.NumberFormat(e));function A8(e="en-US"){const t=P8(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function S8(e){return v9(e,"Invalid Date")}function E8(e="en-US"){const t=A8(e);return n=>(n instanceof Date?S8:typeof n=="number"?t:dt)(n)}const $r=E8();let cf=0,hf;function k8(){const e=cf;return cf=0,hf=void 0,e}function Xn(e){e!==hf&&(hf=e,console.warn(e),++cf)}const wt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let C8=0;function Ad(){return`plot-clip-${++C8}`}function T8(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:s,fillOpacity:u,stroke:l,strokeWidth:f,strokeOpacity:h,strokeLinejoin:c,strokeLinecap:m,strokeMiterlimit:d,strokeDasharray:p,strokeDashoffset:g,opacity:v,mixBlendMode:b,imageFilter:w,paintOrder:y,pointerEvents:_,shapeRendering:x,channels:P},{ariaLabel:T,fill:S="currentColor",fillOpacity:$,stroke:E="none",strokeOpacity:L,strokeWidth:U,strokeLinecap:D,strokeLinejoin:k,strokeMiterlimit:z,paintOrder:oe}){S===null&&(s=null,u=null),E===null&&(l=null,h=null),vt(S)?!vt(E)&&(!vt(s)||P!=null&&P.fill)&&(E="none"):vt(E)&&(!vt(l)||P!=null&&P.stroke)&&(S="none");const[ae,te]=In(s,S),[H,Y]=mt(u,$),[W,j]=In(l,E),[se,fe]=mt(h,L),[ue,K]=mt(v);ya(j)||(f===void 0&&(f=U),m===void 0&&(m=D),c===void 0&&(c=k),d===void 0&&!V9(c)&&(d=z),!ya(te)&&y===void 0&&(y=oe));const[Q,F]=mt(f);return S!==null&&(e.fill=ot(te,"currentColor"),e.fillOpacity=Bi(Y,1)),E!==null&&(e.stroke=ot(j,"none"),e.strokeWidth=Bi(F,1),e.strokeOpacity=Bi(fe,1),e.strokeLinejoin=ot(c,"miter"),e.strokeLinecap=ot(m,"butt"),e.strokeMiterlimit=Bi(d,4),e.strokeDasharray=ot(p,"none"),e.strokeDashoffset=ot(g,"0")),e.target=dt(o),e.ariaLabel=dt(T),e.ariaDescription=dt(i),e.ariaHidden=dt(a),e.opacity=Bi(K,1),e.mixBlendMode=ot(b,"normal"),e.imageFilter=ot(w,"none"),e.paintOrder=ot(y,"normal"),e.pointerEvents=ot(_,"auto"),e.shapeRendering=ot(x,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:ae,scale:"auto",optional:!0},fillOpacity:{value:H,scale:"auto",optional:!0},stroke:{value:W,scale:"auto",optional:!0},strokeOpacity:{value:se,scale:"auto",optional:!0},strokeWidth:{value:Q,optional:!0},opacity:{value:ue,scale:"auto",optional:!0}}}function $8(e,t){t&&e.filter(n=>oc(t[n])).append("title").call(N8,t)}function D8(e,t){t&&e.filter(([n])=>oc(t[n])).append("title").call(B8,t)}function N8(e,t){t&&e.text(n=>$r(t[n]))}function B8(e,t){t&&e.text(([n])=>$r(t[n]))}function zn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:s,strokeOpacity:u,strokeWidth:l,opacity:f,href:h}){r&&be(e,"aria-label",c=>r[c]),a&&be(e,"fill",c=>a[c]),o&&be(e,"fill-opacity",c=>o[c]),s&&be(e,"stroke",c=>s[c]),u&&be(e,"stroke-opacity",c=>u[c]),l&&be(e,"stroke-width",c=>l[c]),f&&be(e,"opacity",c=>f[c]),h&&Yg(e,c=>h[c],t),n||$8(e,i)}function Hg(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:s,strokeOpacity:u,strokeWidth:l,opacity:f,href:h}){r&&be(e,"aria-label",([c])=>r[c]),a&&be(e,"fill",([c])=>a[c]),o&&be(e,"fill-opacity",([c])=>o[c]),s&&be(e,"stroke",([c])=>s[c]),u&&be(e,"stroke-opacity",([c])=>u[c]),l&&be(e,"stroke-width",([c])=>l[c]),f&&be(e,"opacity",([c])=>f[c]),h&&Yg(e,([c])=>h[c],t),n||D8(e,i)}function F8({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:o,opacity:s,href:u},{tip:l}){return[e,l?void 0:t,n,r,i,a,o,s,u].filter(f=>f!==void 0)}function L8(e,t,n){const r=Os(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Xn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Wg(e,t,n,r){const{z:i}=n,{z:a}=r,o=F8(r,n),s=[...t,...o];for(const u of a?L8(e,a,i):[e]){let l,f;e:for(const h of u){for(const c of s)if(!er(c[h])){f&&f.push(-1);continue e}if(l===void 0){f&&(yield f),l=o.map(c=>pr(c[h])),f=[h];continue}f.push(h);for(let c=0;c<o.length;++c)if(pr(o[c][h])!==l[c]){yield f,l=o.map(d=>pr(d[h])),f=[h];continue e}}f&&(yield f)}}function Vg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=rn(e,"clip",["frame","sphere"])),e}function I8(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:s,marginLeft:u,marginRight:l,marginTop:f,marginBottom:h}=n,c=Ad();i=`url(#${c})`,e=He("svg:g",r).call(m=>m.append("svg:clipPath").attr("id",c).append("rect").attr("x",u).attr("y",f).attr("width",o-l-u).attr("height",s-f-h)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const s=Ad();i=`url(#${s})`,e.append("clipPath").attr("id",s).append("path").attr("d",Xs(o)({type:"Sphere"}));break}}be(e,"aria-label",t.ariaLabel),be(e,"aria-description",t.ariaDescription),be(e,"aria-hidden",t.ariaHidden),be(e,"clip-path",i)}function Wt(e,t,n,r){I8(e,t,n,r),be(e,"fill",t.fill),be(e,"fill-opacity",t.fillOpacity),be(e,"stroke",t.stroke),be(e,"stroke-width",t.strokeWidth),be(e,"stroke-opacity",t.strokeOpacity),be(e,"stroke-linejoin",t.strokeLinejoin),be(e,"stroke-linecap",t.strokeLinecap),be(e,"stroke-miterlimit",t.strokeMiterlimit),be(e,"stroke-dasharray",t.strokeDasharray),be(e,"stroke-dashoffset",t.strokeDashoffset),be(e,"shape-rendering",t.shapeRendering),be(e,"filter",t.imageFilter),be(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;be(e,"pointer-events",i)}function Vt(e,t){R8(e,"mix-blend-mode",t.mixBlendMode),be(e,"opacity",t.opacity)}function Yg(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(ri.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(ri.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function be(e,t,n){n!=null&&e.attr(t,n)}function R8(e,t,n){n!=null&&e.style(t,n)}function Dt(e,t,{x:n,y:r},i=wt,a=wt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function ot(e,t){if((e=dt(e))!==t)return e}function Bi(e,t){if((e=Ie(e))!==t)return e}const O8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Mc(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!O8.test(e))throw new Error(`invalid class name: ${e}`);return e}function xc(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Xa({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function Pc(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Vg(n)}}function He(e,{document:t}){return Qi(Us(e).call(t.documentElement))}const jg=Math.PI,xn=2*jg,Sd=.618;function q8({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let s,u,l="frame";if(ir(e)){let _;if({type:e,domain:u,inset:_,insetTop:n=_!==void 0?_:n,insetRight:r=_!==void 0?_:r,insetBottom:i=_!==void 0?_:i,insetLeft:a=_!==void 0?_:a,clip:l=l,...s}=e,e==null)return}typeof e!="function"&&({type:e}=Xg(e));const{width:f,height:h,marginLeft:c,marginRight:m,marginTop:d,marginBottom:p}=o,g=f-c-m-a-r,v=h-d-p-n-i;if(e=e==null?void 0:e({width:g,height:v,clip:l,...s}),e==null)return;l=z8(l,c,d,f-m,h-p);let b=c+a,w=d+n,y;if(u!=null){const[[_,x],[P,T]]=Xs(e).bounds(u),S=Math.min(g/(P-_),v/(T-x));S>0?(b-=(S*(_+P)-g)/2,w-=(S*(x+T)-v)/2,y=Kl({point($,E){this.stream.point($*S+b,E*S+w)}})):Xn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return y??(y=b===0&&w===0?Zg():Kl({point(_,x){this.stream.point(_+b,x+w)}})),{stream:_=>e.stream(y.stream(l(_)))}}function Xg(e){switch(`${e}`.toLowerCase()){case"albers-usa":return jt(C4,.7463,.4673);case"albers":return yo(Ym,.7463,.4673);case"azimuthal-equal-area":return jt(T4,4,4);case"azimuthal-equidistant":return jt($4,xn,xn);case"conic-conformal":return yo(B4,xn,xn);case"conic-equal-area":return yo(fs,6.1702,2.9781);case"conic-equidistant":return yo(I4,7.312,3.6282);case"equal-earth":return jt(O4,5.4133,2.6347);case"equirectangular":return jt(F4,xn,jg);case"gnomonic":return jt(q4,3.4641,3.4641);case"identity":return{type:Zg};case"reflect-y":return{type:G8};case"mercator":return jt(D4,xn,xn);case"orthographic":return jt(z4,2,2);case"stereographic":return jt(G4,2,2);case"transverse-mercator":return jt(U4,xn,xn);default:throw new Error(`unknown projection type: ${e}`)}}function z8(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return $m(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function jt(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:s})=>{var l,f,h;const u=e();return o!=null&&((l=u.precision)==null||l.call(u,o)),a!=null&&((f=u.rotate)==null||f.call(u,a)),typeof s=="number"&&((h=u.clipAngle)==null||h.call(u,s)),u.scale(Math.min(r/t,i/n)),u.translate([r/2,i/2]),u},aspectRatio:n/t}}function yo(e,t,n){const{type:r,aspectRatio:i}=jt(e,t,n);return{type:a=>{const{parallels:o,domain:s,width:u,height:l}=a,f=r(a);return o!=null&&(f.parallels(o),s===void 0&&f.fitSize([u,l],{type:"Sphere"})),f},aspectRatio:i}}const Zg=Ua({stream:e=>e}),G8=Ua(Kl({point(e,t){this.stream.point(e,-t)}}));function U8(e,t,n,r){const i=n[e],a=n[t],o=i.length,s=n[e]=new Float64Array(o).fill(NaN),u=n[t]=new Float64Array(o).fill(NaN);let l;const f=r.stream({point(h,c){s[l]=h,u[l]=c}});for(l=0;l<o;++l)f.point(i[l],a[l])}function H8({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(ir(e)&&(e=e.type),e!=null)}function W8(e){if(typeof(e==null?void 0:e.stream)=="function")return Sd;if(ir(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=Xg(e);if(t)return t}return Sd}}function V8(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,s){t.push(o),n.push(s)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)cr(o,a);return[r,i]}const Y8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Kg=new Map([["accent",h7],["category10",c7],["dark2",d7],["observable10",Y8],["paired",m7],["pastel1",p7],["pastel2",b7],["set1",g7],["set2",y7],["set3",v7],["tableau10",w7]]);function j8(e){return e!=null&&Kg.has(`${e}`.toLowerCase())}const Ed=new Map([...Kg,["brbg",Pn(Np,Bp)],["prgn",Pn(Fp,Lp)],["piyg",Pn(Ip,Rp)],["puor",Pn(Op,qp)],["rdbu",Pn(nf,ms)],["rdgy",Pn(zp,Gp)],["rdylbu",Pn(rf,ps)],["rdylgn",Pn(Up,Hp)],["spectral",Pn(Wp,Vp)],["burd",kd(nf,ms)],["buylrd",kd(rf,ps)],["blues",Qe(gb,yb)],["greens",Qe(vb,wb)],["greys",Qe(_b,Mb)],["oranges",Qe(Eb,kb)],["purples",Qe(xb,Pb)],["reds",Qe(Ab,Sb)],["turbo",An(Fb)],["viridis",An(Lb)],["magma",An(Ib)],["inferno",An(Rb)],["plasma",An(Ob)],["cividis",An(Cb)],["cubehelix",An(Tb)],["warm",An($b)],["cool",An(Db)],["bugn",Qe(Yp,jp)],["bupu",Qe(Xp,Zp)],["gnbu",Qe(Kp,Qp)],["orrd",Qe(Jp,eb)],["pubu",Qe(rb,ib)],["pubugn",Qe(tb,nb)],["purd",Qe(ab,ob)],["rdpu",Qe(sb,ub)],["ylgn",Qe(cb,hb)],["ylgnbu",Qe(lb,fb)],["ylorbr",Qe(db,mb)],["ylorrd",Qe(pb,bb)],["rainbow",Cd(Nb)],["sinebow",Cd(Bb)]]);function Qe(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Kt(t,n):e[n])}function Pn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Kt(t,n):e[n])}function kd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Kt(r=>t(1-r),n):e[n].slice().reverse())}function An(e){return({length:t})=>Kt(e,Math.max(2,Math.floor(t)))}function Cd(e){return({length:t})=>Kt(e,Math.floor(t)+1).slice(0,-1)}function Qg(e){const t=`${e}`.toLowerCase();if(!Ed.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return Ed.get(t)}function gu(e,t){const n=Qg(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function X8(e,t="greys"){const n=new Set,[r,i]=gu(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Td=new Map([["brbg",Bp],["prgn",Lp],["piyg",Rp],["puor",qp],["rdbu",ms],["rdgy",Gp],["rdylbu",ps],["rdylgn",Hp],["spectral",Vp],["burd",e=>ms(1-e)],["buylrd",e=>ps(1-e)],["blues",yb],["greens",wb],["greys",Mb],["purples",Pb],["reds",Sb],["oranges",kb],["turbo",Fb],["viridis",Lb],["magma",Ib],["inferno",Rb],["plasma",Ob],["cividis",Cb],["cubehelix",Tb],["warm",$b],["cool",Db],["bugn",jp],["bupu",Zp],["gnbu",Qp],["orrd",eb],["pubugn",nb],["pubu",ib],["purd",ob],["rdpu",ub],["ylgnbu",fb],["ylgn",hb],["ylorbr",mb],["ylorrd",bb],["rainbow",Nb],["sinebow",Bb]]);function Ac(e){const t=`${e}`.toLowerCase();if(!Td.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Td.get(t)}const Z8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function K8(e){return e!=null&&Z8.has(`${e}`.toLowerCase())}const Jg=e=>t=>e(1-t),il=[0,1],$d=new Map([["number",st],["rgb",Sr],["hsl",y_],["hcl",__],["lab",v_]]);function e2(e){const t=`${e}`.toLowerCase();if(!$d.has(t))throw new Error(`unknown interpolator: ${t}`);return $d.get(t)}function Za(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:s=n2(e,n),unknown:u,round:l,scheme:f,interval:h,range:c=Ue.get(e)===Va?uM(n,s):Ue.get(e)===Ya?lM(n,s):Ue.get(e)===ja?il:void 0,interpolate:m=Ue.get(e)===qn?f==null&&c!==void 0?Sr:Ac(f!==void 0?f:r==="cyclical"?"rainbow":"turbo"):l?Rf:st,reverse:d}){if(h=Pi(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof m!="function"&&(m=e2(m)),d=!!d,c!==void 0){const p=(s=$t(s)).length,g=(c=$t(c)).length;if(p!==g){if(m.length===1)throw new Error("invalid piecewise interpolator");m=Vs(m,c),c=void 0}}if(m.length===1?(d&&(m=Jg(m),d=!1),c===void 0&&(c=Float64Array.from(s,(p,g)=>g/(s.length-1)),c.length===2&&(c=il)),t.interpolate((c===il?Ua:Ec)(m))):t.interpolate(m),o){const[p,g]=Lt(s);(p>0||g<0)&&(s=ga(s),di(s)!==Math.sign(p)?s[s.length-1]=0:s[0]=0)}return d&&(s=Yo(s)),t.domain(s).unknown(u),i&&(t.nice(Q8(i,r)),s=t.domain()),c!==void 0&&t.range(c),a&&t.clamp(a),{type:r,domain:s,range:c,scale:t,interpolate:m,interval:h}}function Q8(e,t){return e===!0?void 0:typeof e=="number"?e:R9(e,t)}function J8(e,t,n){return Za(e,Xf(),t,n)}function eM(e,t,n){return t2(e,t,{...n,exponent:.5})}function t2(e,t,{exponent:n=1,...r}){return Za(e,hp().exponent(n),t,{...r,type:"pow"})}function tM(e,t,{base:n=10,domain:r=fM(t),...i}){return Za(e,up().base(n),t,{...i,domain:r})}function nM(e,t,{constant:n=1,...r}){return Za(e,fp().constant(n),t,r)}function rM(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=cM(t),unknown:s,interpolate:u,reverse:l}){return n===void 0&&(n=u!==void 0?Kt(u,i):Ue.get(e)===qn?gu(a,i):void 0),o.length>0&&(o=dp(o,n===void 0?{length:i}:n).quantiles()),Sc(e,t,{domain:o,range:n,reverse:l,unknown:s})}function iM(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=n2(e,t),unknown:o,interpolate:s,reverse:u}){const[l,f]=Lt(a);let h;return n===void 0?(h=oa(l,f,r),h[0]<=l&&h.splice(0,1),h[h.length-1]>=f&&h.pop(),r=h.length+1,n=s!==void 0?Kt(s,r):Ue.get(e)===qn?gu(i,r):void 0):(h=Kt(st(l,f),r+1).slice(1,-1),l instanceof Date&&(h=h.map(c=>new Date(c)))),di($t(a))<0&&h.reverse(),Sc(e,t,{domain:h,range:n,reverse:u,unknown:o})}function Sc(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Kt(a,n.length+1):Ue.get(e)===qn?gu(i,n.length+1):void 0,reverse:s}){n=$t(n);const u=di(n);if(!isNaN(u)&&!aM(n,u))throw new Error(`the ${e} scale has a non-monotonic domain`);return s&&(o=Yo(o)),{type:"threshold",scale:mp(u<0?Yo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function aM(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=Ea(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function oM(e){return{type:"identity",scale:Z9(Ue.get(e))?ap():t=>t}}function wa(e,t=wg){return e.length?[Nn(e,({value:n})=>n===void 0?n:Nn(n,t)),zt(e,({value:n})=>n===void 0?n:zt(n,t))]:[0,1]}function n2(e,t){const n=Ue.get(e);return(n===Va||n===ja||n===Ya?sM:wa)(t)}function sM(e){return[0,e.length?zt(e,({value:t})=>t===void 0?t:zt(t,wg)):1]}function uM(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=ni(e,.5,({value:o})=>o===void 0?NaN:ni(o,.25,lu)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/zt(i);return a<1?i.map(o=>o*a):i}function lM(e,t){const n=xl(e,({value:a})=>a===void 0?NaN:xl(a,Math.abs)),r=t.map(a=>12*a/n),i=60/zt(r);return i<1?r.map(a=>a*i):r}function fM(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return wa(e,lu);if(n<0)return wa(e,sc)}return[1,10]}function cM(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function Ec(e){return(t,n)=>r=>e(t+r*(n-t))}function yu(e,t,n,r,{type:i,nice:a,clamp:o,domain:s=wa(r),unknown:u,pivot:l=0,scheme:f,range:h,symmetric:c=!0,interpolate:m=Ue.get(e)===qn?f==null&&h!==void 0?Sr:Ac(f!==void 0?f:"rdbu"):st,reverse:d}){l=+l,s=$t(s);let[p,g]=s;if(s.length>2&&Xn(`Warning: the diverging ${e} scale domain contains extra elements.`),Ea(p,g)<0&&([p,g]=[g,p],d=!d),p=Math.min(p,l),g=Math.max(g,l),typeof m!="function"&&(m=e2(m)),h!==void 0&&(m=m.length===1?Ec(m)(...h):Vs(m,h)),d&&(m=Jg(m)),c){const v=n.apply(l),b=v-n.apply(p),w=n.apply(g)-v;b<w?p=n.invert(v-w):b>w&&(g=n.invert(v+b))}return t.domain([p,l,g]).unknown(u).interpolator(m),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,g],pivot:l,interpolate:m,scale:t}}function hM(e,t,n){return yu(e,Cp(),bM,t,n)}function dM(e,t,n){return r2(e,t,{...n,exponent:.5})}function r2(e,t,{exponent:n=1,...r}){return yu(e,Dp().exponent(n=+n),vM(n),t,{...r,type:"diverging-pow"})}function mM(e,t,{base:n=10,pivot:r=1,domain:i=wa(t,r<0?sc:lu),...a}){return yu(e,Tp().base(n=+n),gM,t,{domain:i,pivot:r,...a})}function pM(e,t,{constant:n=1,...r}){return yu(e,$p().constant(n=+n),wM(n),t,r)}const bM={apply(e){return e},invert(e){return e}},gM={apply:Math.log,invert:Math.exp},yM={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function vM(e){return e===.5?yM:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function wM(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function i2(e,t,n,r){return Za(e,t,n,r)}function _M(e,t,n){return i2(e,l7(),t,n)}function MM(e,t,n){return i2(e,f7(),t,n)}const Ka=Symbol("ordinal");function a2(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:s,hint:u}){return i=Pi(i,r),a===void 0&&(a=s2(n,i,e)),(r==="categorical"||r===Ka)&&(r="ordinal"),s&&(a=Yo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:u,interval:i}}function xM(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:s,...u}){r=Pi(r,n),i===void 0&&(i=s2(t,r,e));let l;if(Ue.get(e)===pu)l=SM(t),a=a===void 0?EM(l):Ve(a,yc);else if(Ue.get(e)===qn&&(a===void 0&&(n==="ordinal"||n===Ka)&&(a=X8(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const f=Ac(o),h=a[0],c=a[1]-a[0];a=({length:m})=>Kt(d=>f(h+c*d),m)}else a=Qg(o);if(s===Jl)throw new Error(`implicit unknown on ${e} scale is not supported`);return a2(e,jf().unknown(s),t,{...u,type:n,domain:i,range:a,hint:l})}function PM(e,t,{align:n=.5,padding:r=.5,...i}){return o2(H4().align(n).padding(r),t,i,e)}function AM(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return o2(Js().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function o2(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=a2(r,e,t,n),e.round=i,e}function s2(e,t,n){const r=new Rs;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Lt(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Ue.get(n)===hn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return aa(r,en)}function Dd(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function SM(e){return{fill:Dd(e,"fill"),stroke:Dd(e,"stroke")}}function EM(e){return vt(e.fill)?B7:N7}function df(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:s,nice:u,clamp:l,zero:f,align:h,padding:c,projection:m,facet:{label:d=t}={},...p}={}){const g={};for(const[v,b]of e){const w=p[v],y=DM(v,b,{round:Ue.get(v)===hn?s:void 0,nice:u,clamp:l,zero:f,align:h,padding:c,projection:m,...w});if(y){let{label:_=v==="fx"||v==="fy"?d:t,percent:x,transform:P,inset:T,insetTop:S=T!==void 0?T:v==="y"?r:0,insetRight:$=T!==void 0?T:v==="x"?i:0,insetBottom:E=T!==void 0?T:v==="y"?a:0,insetLeft:L=T!==void 0?T:v==="x"?o:0}=w||{};if(P==null)P=void 0;else if(typeof P!="function")throw new Error("invalid scale transform; not a function");y.percent=!!x,y.label=_===void 0?CM(b,y):_,y.transform=P,v==="x"||v==="fx"?(y.insetLeft=+L,y.insetRight=+$):(v==="y"||v==="fy")&&(y.insetTop=+S,y.insetBottom=+E),g[v]=y}}return g}function Nd(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:s,label:u}=i;t[r]=IM(i),n[r]=a,a.type=o,s!=null&&(a.interval=s),u!=null&&(a.label=u)}return n}function kM(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?kc(t):t;i&&Bd(i,o),a&&Fd(a,o);const s=i||a?u2(e,t):t;n&&Bd(n,s),r&&Fd(r,s)}function CM(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Ir(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function TM(e){return Math.sign(di(e.domain()))*Math.sign(di(e.range()))}function kc(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:s,marginRight:u,marginBottom:l,marginLeft:f}}=e;return{marginTop:Math.max(t,s),marginRight:Math.max(n,u),marginBottom:Math.max(r,l),marginLeft:Math.max(i,f),width:a,height:o}}function u2({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:u}=kc(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:s,height:t?t.scale.bandwidth()+r+a:u,facet:{width:s,height:u}}}function Bd(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,s=a+n,u=i-o-r;e.range=[s,Math.max(s,u)],Ir(e)||(e.range=f2(e)),e.scale.range(e.range)}l2(e)}function Fd(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,s=a+n,u=i-o-r;e.range=[Math.max(s,u),s],Ir(e)?e.range.reverse():e.range=f2(e),e.scale.range(e.range)}l2(e)}function l2(e){e.round===void 0&&BM(e)&&$M(e)<=30&&e.scale.round(!0)}function $M({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,s=Math.abs(r-n)/Math.max(1,o+a*2);return(s-Math.floor(s))*o}function f2(e){const t=e.scale.domain().length+c2(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function DM(e,t=[],n={}){const r=NM(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Ir({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(xt)?Xn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Ur(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Ur(r)}".`):i.some(z9)?Xn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Ur(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Ur(r)}".`):i.some(G9)&&Xn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Ur(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Ur(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=vo(t,n,cn);break;case"identity":switch(Ue.get(e)){case hn:n=vo(t,n,cn);break;case pu:n=vo(t,n,FM);break}break;case"utc":case"time":n=vo(t,n,D9);break}switch(r){case"diverging":return hM(e,t,n);case"diverging-sqrt":return dM(e,t,n);case"diverging-pow":return r2(e,t,n);case"diverging-log":return mM(e,t,n);case"diverging-symlog":return pM(e,t,n);case"categorical":case"ordinal":case Ka:return xM(e,t,n);case"cyclical":case"sequential":case"linear":return J8(e,t,n);case"sqrt":return eM(e,t,n);case"threshold":return Sc(e,t,n);case"quantile":return rM(e,t,n);case"quantize":return iM(e,t,n);case"pow":return t2(e,t,n);case"log":return tM(e,t,n);case"symlog":return nM(e,t,n);case"utc":return MM(e,t,n);case"time":return _M(e,t,n);case"point":return PM(e,t,n);case"band":return AM(e,t,n);case"identity":return oM(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Ur(e){return typeof e=="symbol"?e.description:e}function Ld(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Id={toString:()=>"projection"};function NM(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:s}){if(n=Ld(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&s!=null&&(n=Id);for(const l of t){const f=Ld(l.type);if(f!==void 0){if(n===void 0)n=f;else if(n!==f)throw new Error(`scale incompatible with channel: ${n} !== ${f}`)}}if(n===Id)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const u=Ue.get(e);if(u===Va)return"sqrt";if(u===ja||u===Ya)return"linear";if(u===pu)return"ordinal";if((r||i||[]).length>2)return al(u);if(r!==void 0){if(vd(r))return al(u);if(xt(r))return"utc"}else{const l=t.map(({value:f})=>f).filter(f=>f!==void 0);if(l.some(vd))return al(u);if(l.some(xt))return"utc"}if(u===qn){if(o!=null||K8(a))return"diverging";if(j8(a))return"categorical"}return"linear"}function al(e){switch(e){case hn:return"point";case qn:return Ka;default:return"ordinal"}}function Ir({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Ka}function c2({type:e}){return e==="threshold"}function BM({type:e}){return e==="point"||e==="band"}function pi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function vo(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function FM(e){return Ve(e,yc)}function LM(e){return t=>{if(!Ue.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function IM({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:s,pivot:u}){if(t==="identity")return{type:"identity",apply:f=>f,invert:f=>f};const l=e.unknown?e.unknown():void 0;return{type:t,domain:ga(n),...r!==void 0&&{range:ga(r)},...o!==void 0&&{transform:o},...s&&{percent:s},...l!==void 0&&{unknown:l},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...u!==void 0&&{pivot:u,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:f=>e(f),...e.invert&&{invert:f=>e.invert(f)}}}function RM(e,t,n={}){let r=.5-wt,i=.5+wt,a=.5+wt,o=.5-wt;for(const{marginTop:p,marginRight:g,marginBottom:v,marginLeft:b}of t)p>r&&(r=p),g>i&&(i=g),v>a&&(a=v),b>o&&(o=b);let{margin:s,marginTop:u=s!==void 0?s:r,marginRight:l=s!==void 0?s:i,marginBottom:f=s!==void 0?s:a,marginLeft:h=s!==void 0?s:o}=n;u=+u,l=+l,f=+f,h=+h;let{width:c=640,height:m=OM(e,n,{width:c,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,u-r+f-a)}=n;c=+c,m=+m;const d={width:c,height:m,marginTop:u,marginRight:l,marginBottom:f,marginLeft:h};if(e.fx||e.fy){let{margin:p,marginTop:g=p!==void 0?p:u,marginRight:v=p!==void 0?p:l,marginBottom:b=p!==void 0?p:f,marginLeft:w=p!==void 0?p:h}=n.facet??{};g=+g,v=+v,b=+b,w=+w,d.facet={marginTop:g,marginRight:v,marginBottom:b,marginLeft:w}}return d}function OM({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:s,marginRightDefault:u,marginBottomDefault:l,marginLeftDefault:f}){const h=n?n.scale.domain().length:1,c=W8(i);if(c){const d=r?r.scale.domain().length:1,p=(1.1*h-.1)/(1.1*d-.1)*c,g=Math.max(.1,Math.min(10,p));return Math.round((o-f-u)*g+s+l)}const m=t?Ir(t)?t.scale.domain().length:Math.max(7,17/h):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const d=Rd("y",t)/(Rd("x",e)*a),p=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,v=p*(o-f-u)-e.insetLeft-e.insetRight;return(d*v+t.insetTop+t.insetBottom)/g+s+l}return!!(t||n)*Math.max(1,Math.min(60,m*h))*20+!!r*30+60}function Rd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const s=t.scale.exponent();i=u=>Math.pow(u,s);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Lt(r);return Math.abs(i(o)-i(a))}function qM(e,t){const{fx:n,fy:r}=df(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?Bv(i,a).map(([o,s],u)=>({x:o,y:s,i:u})):i?i.map((o,s)=>({x:o,i:s})):a?a.map((o,s)=>({y:o,i:s})):void 0}function zM(e,{x:t,y:n}){return t&&(t=mf(t)),n&&(n=mf(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Cc(e,{fx:t,fy:n}){const r=On(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Xr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Xr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Xr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function GM(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function UM(e){const t=[],n=new Uint32Array(Kn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const HM=new Map([["top",ol],["right",ll],["bottom",sl],["left",ul],["top-left",wo(ol,ul)],["top-right",wo(ol,ll)],["bottom-left",wo(sl,ul)],["bottom-right",wo(sl,ll)],["top-empty",YM],["right-empty",ZM],["bottom-empty",jM],["left-empty",XM],["empty",KM]]);function WM(e){if(e==null)return null;const t=HM.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Od=new WeakMap;function mf(e){let t=Od.get(e);return t||Od.set(e,t=new xr(Ve(e,(n,r)=>[n,r]))),t}function or(e,t){return mf(e).get(t)}function VM(e,t,n){return t=pr(t),n=pr(n),e.find(r=>Object.is(pr(r.x),t)&&Object.is(pr(r.y),n))}function vu(e,t,n){var r;return(r=VM(e,t,n))==null?void 0:r.empty}function ol(e,{y:t},{y:n}){return t?or(t,n)===0:!0}function sl(e,{y:t},{y:n}){return t?or(t,n)===t.length-1:!0}function ul(e,{x:t},{x:n}){return t?or(t,n)===0:!0}function ll(e,{x:t},{x:n}){return t?or(t,n)===t.length-1:!0}function YM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,r);if(a>0)return vu(e,n,t[a-1])}function jM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,r);if(a<t.length-1)return vu(e,n,t[a+1])}function XM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,n);if(a>0)return vu(e,t[a-1],r)}function ZM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,n);if(a<t.length-1)return vu(e,t[a+1],r)}function KM(e,t,{empty:n}){return n}function wo(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function fl(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class pt{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:s,fy:u,sort:l,dx:f=0,dy:h=0,margin:c=0,marginTop:m=c,marginRight:d=c,marginBottom:p=c,marginLeft:g=c,clip:v=i==null?void 0:i.clip,channels:b,tip:w,render:y}=r;if(this.data=t,this.sort=hi(l)?l:null,this.initializer=mi(r).initializer,this.transform=this.initializer?r.transform:bu(r).transform,a===null||a===!1?this.facet=null:(this.facet=rn(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Lo&&typeof s=="string"?[s]:s,this.fy=t===Lo&&typeof u=="string"?[u]:u),this.facetAnchor=WM(o),n=Bg(n),b!==void 0&&(n={...QM(b),...n}),i!==void 0&&(n={...T8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,x])=>{if(hu(x.value)){const{value:P,label:T=x.label,scale:S=x.scale}=x.value;x={...x,label:T,scale:S,value:P}}if(t===Lo&&typeof x.value=="string"){const{value:P}=x;x={...x,value:[P]}}return[_,x]}).filter(([_,{value:x,optional:P}])=>{if(x!=null)return!0;if(P)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+f,this.dy=+h,this.marginTop=+m,this.marginRight=+d,this.marginBottom=+p,this.marginLeft=+g,this.clip=Vg(v),this.tip=JM(w),this.facet==="super"){if(s||u)throw new Error("super-faceting cannot use fx or fy");for(const _ in this.channels){const{scale:x}=n[_];if(!(x!=="x"&&x!=="y"))throw new Error("super-faceting cannot use x or y")}}y!=null&&(this.render=d2(y,this.render))}initialize(t,n,r){let i=$t(this.data);t===void 0&&i!=null&&(t=[On(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=$t(i)),t!==void 0&&(t.original=a);const o=g8(this.channels,i);return this.sort!=null&&v8(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=er}=n[i];if(a!==null){const o=r[i];t=t.filter(s=>a(o[s]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&U8(i,a,n,r.projection)}}scale(t,n,r){const i=y8(t,n);return r.projection&&this.project(t,i,r),i}}function h2(...e){return e.plot=pt.prototype.plot,e}function d2(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,s){return e.call(this,n,r,i,a,o,(u,l,f,h,c)=>t.call(this,u,l,f,h,c,s))}}function QM(e){return Object.fromEntries(Object.entries(Bg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Wa(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function JM(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?rn(e,"tip",["x","y","xy"]):e}function wu(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:ir(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const qd=new WeakMap;function Tc(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:s,render:u,...l}={}){return o=+o,i!=null&&(n??(n=null),s={...s,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),s={...s,py:{value:a,scale:"y"}}),{x:n,y:r,channels:s,...l,render:d2(function(f,h,c,m,d,p){d={...d,pointerSticky:!1};const g=d.ownerSVGElement,{data:v}=d.getMarkState(this);let b=qd.get(g);b||qd.set(g,b={sticky:!1,roots:[],renders:[]});let w=b.renders.push(j)-1;const{x:y,y:_,fx:x,fy:P}=h;let T=x?x(f.fx)-m.marginLeft:0,S=P?P(f.fy)-m.marginTop:0;y!=null&&y.bandwidth&&(T+=y.bandwidth()/2),_!=null&&_.bandwidth&&(S+=_.bandwidth()/2);const $=f.fi!=null;let E;if($){let K=b.facetStates;K||(b.facetStates=K=new Map),E=K.get(this),E||K.set(this,E=new Map)}const[L,U]=Xa(this,m),{px:D,py:k}=c,z=D?K=>D[K]:p2(c,L),oe=k?K=>k[K]:b2(c,U);let ae,te,H,Y;function W(K,Q){if($)if(Y&&(Y=cancelAnimationFrame(Y)),K==null)E.delete(f.fi);else{E.set(f.fi,Q),Y=requestAnimationFrame(()=>{Y=null;for(const[F,X]of E)if(X<Q||X===Q&&F<f.fi){K=null;break}j(K)});return}j(K)}function j(K){if(ae===K&&H===b.sticky)return;ae=K,H=d.pointerSticky=b.sticky;const Q=ae==null?[]:[ae];$&&(Q.fx=f.fx,Q.fy=f.fy,Q.fi=f.fi);const F=p(Q,h,c,m,d);if(te){if($){const X=te.parentNode,ee=te.getAttribute("transform"),B=F.getAttribute("transform");ee?F.setAttribute("transform",ee):F.removeAttribute("transform"),B?X.setAttribute("transform",B):X.removeAttribute("transform"),F.removeAttribute("aria-label"),F.removeAttribute("aria-description"),F.removeAttribute("aria-hidden")}te.replaceWith(F)}return b.roots[w]=te=F,ae==null&&(E==null?void 0:E.size)>1||d.dispatchValue(ae==null?null:v[ae]),F}function se(K){if(b.sticky||K.pointerType==="mouse"&&K.buttons===1)return;let[Q,F]=qw(K);Q-=T,F-=S;const X=Q<m.marginLeft||Q>m.width-m.marginRight?1:e,ee=F<m.marginTop||F>m.height-m.marginBottom?1:t;let B=null,Me=o*o;for(const re of f){const ce=X*(z(re)-Q),ke=ee*(oe(re)-F),qe=ce*ce+ke*ke;qe<=Me&&(B=re,Me=qe)}if(B!=null&&(e!==1||t!==1)){const re=z(B)-Q,ce=oe(B)-F;Me=re*re+ce*ce}W(B,Me)}function fe(K){K.pointerType==="mouse"&&ae!=null&&(b.sticky&&b.roots.some(Q=>Q==null?void 0:Q.contains(K.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(Q=>Q(null))):(b.sticky=!0,j(ae)),K.stopImmediatePropagation()))}function ue(K){K.pointerType==="mouse"&&(b.sticky||W(null))}return g.addEventListener("pointerenter",se),g.addEventListener("pointermove",se),g.addEventListener("pointerdown",fe),g.addEventListener("pointerleave",ue),j(null)},u)}}function m2(e){return Tc(1,1,e)}function ex(e){return Tc(1,.01,e)}function zd(e){return Tc(.01,1,e)}function p2({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function b2({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function g2(e){return Ir(e)&&e.interval===void 0?void 0:"tabular-nums"}function tx(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:s=0,marginBottom:u=16+r,marginLeft:l=0,style:f,ticks:h=(i-l-s)/64,tickFormat:c,fontVariant:m=g2(e),round:d=!0,opacity:p,className:g}=t;const v=Pc(t);g=Mc(g),p=mt(p)[1],c===null&&(c=()=>null);const b=He("svg",v).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(L=>L.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(xc,f);let w=L=>L.selectAll(".tick line").attr("y1",o+u-a),y;const _=d?(L,U)=>L.rangeRound(U):(L,U)=>L.range(U),{type:x,domain:P,range:T,interpolate:S,scale:$,pivot:E}=e;if(S){const L=T===void 0?S:Vs(S.length===1?Ec(S):S,T);y=_($.copy(),Kt(st(l,i-s),Math.min(P.length+(E!==void 0),T===void 0?1/0:T.length)));const U=256,D=v.document.createElement("canvas");D.width=U,D.height=1;const k=D.getContext("2d");for(let z=0,oe=U-1;z<U;++z)k.fillStyle=L(z/oe),k.fillRect(z,0,1,1);b.append("image").attr("opacity",p).attr("x",l).attr("y",o).attr("width",i-l-s).attr("height",a-o-u).attr("preserveAspectRatio","none").attr("xlink:href",D.toDataURL())}else if(x==="threshold"){const L=P,U=c===void 0?D=>D:typeof c=="string"?Mi(c):c;y=_(Xf().domain([-1,T.length-1]),[l,i-s]),b.append("g").attr("fill-opacity",p).selectAll().data(T).enter().append("rect").attr("x",(D,k)=>y(k-1)).attr("y",o).attr("width",(D,k)=>y(k)-y(k-1)).attr("height",a-o-u).attr("fill",D=>D),h=Ve(L,(D,k)=>k),c=D=>U(L[D],D)}else y=_(Js().domain(P),[l,i-s]),b.append("g").attr("fill-opacity",p).selectAll().data(P).enter().append("rect").attr("x",y).attr("y",o).attr("width",Math.max(0,y.bandwidth()-1)).attr("height",a-o-u).attr("fill",$),w=()=>{};return b.append("g").attr("transform",`translate(0,${a-u})`).call(r3(y).ticks(Array.isArray(h)?null:h,typeof c=="string"?c:void 0).tickFormat(typeof c=="function"?c:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",ot(m,"normal")).call(w).call(L=>L.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const y2=Math.PI/180;function Qa(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=cl(n),e.markerMid=cl(r),e.markerEnd=cl(i)}function cl(e){if(e==null||e===!1)return null;if(e===!0)return Ud;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Gd("auto");case"arrow-reverse":return Gd("auto-start-reverse");case"dot":return nx;case"circle":case"circle-fill":return Ud;case"circle-stroke":return rx;case"tick":return hl("auto");case"tick-x":return hl(90);case"tick-y":return hl(0)}throw new Error(`invalid marker: ${e}`)}function Gd(e){return(t,n)=>He("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function nx(e,t){return He("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Ud(e,t){return He("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function rx(e,t){return He("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function hl(e){return(t,n)=>He("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let ix=0;function _u(e,t,{stroke:n},r){return v2(e,t,n&&(i=>n[i]),r)}function ax(e,t,{stroke:n},r){return v2(e,t,n&&(([i])=>n[i]),r)}function v2(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const s=new Map;function u(l){return function(f){const h=a(f);let c=s.get(l);c||s.set(l,c=new Map);let m=c.get(h);if(!m){const d=this.parentNode.insertBefore(l(h,o),this),p=`plot-marker-${++ix}`;d.setAttribute("id",p),c.set(h,m=`url(#${p})`)}return m}}t&&e.attr("marker-start",u(t)),n&&e.attr("marker-mid",u(n)),r&&e.attr("marker-end",u(r))}function $c({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=_2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function w2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=_2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function _2(e,t,n){return e===void 0&&t===void 0&&n===void 0?wt?[1,0]:[.5,.5]:[t,n]}function M2(e,{interval:t}){return e={...Wa(e)},e.interval=pc(e.interval===void 0?t:e.interval),e}function x2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:s,interval:u}=M2(i,n);if(s==null||u==null&&!r)return n;const l=Lr(i);if(u==null){let m;const d={transform:p=>m||(m=tt(p,s)),label:l};return{...n,[e]:void 0,[`${e}1`]:a===void 0?d:a,[`${e}2`]:o===void 0&&!(a===o&&r)?d:o}}let f,h;function c(m){return h!==void 0&&m===f?h:h=Ve(tt(f=m,s),d=>u.floor(d))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:c,label:l}:a,[`${e}2`]:o===void 0?{transform:m=>c(m).map(d=>u.offset(d)),label:l}:o})}function P2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=M2(r,n);return i==null||a==null?n:t({...n,[e]:{label:Lr(r),transform:o=>{const s=Ve(tt(o,i),l=>a.floor(l)),u=s.map(l=>a.offset(l));return s.map(xt(s)?(l,f)=>l==null||isNaN(l=+l)||(f=u[f],f==null)||isNaN(f=+f)?void 0:new Date((l+f)/2):(l,f)=>l==null||(f=u[f],f==null)?NaN:(+l+ +f)/2)}}})}function ox(e={}){return x2("x",$c,e)}function A2(e={}){return x2("y",w2,e)}function sx(e={}){return P2("x",$c,e)}function ux(e={}){return P2("y",w2,e)}const S2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class lx extends pt{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:s=o,insetBottom:u=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},wu(n,"x"),S2),this.insetTop=Ie(s),this.insetBottom=Ie(u),Qa(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y1:l,y2:f}=r,{width:h,height:c,marginTop:m,marginRight:d,marginLeft:p,marginBottom:g}=i,{insetTop:v,insetBottom:b}=this;return He("svg:g",a).call(Wt,this,i,a).call(Dt,this,{x:u&&o},wt,0).call(w=>w.selectAll().data(t).enter().append("line").call(Vt,this).attr("x1",u?y=>u[y]:(p+h-d)/2).attr("x2",u?y=>u[y]:(p+h-d)/2).attr("y1",l&&!pi(s)?y=>l[y]+v:m+v).attr("y2",f&&!pi(s)?s.bandwidth?y=>f[y]+s.bandwidth()-b:y=>f[y]-b:c-g-b).call(zn,this,r).call(_u,this,r,a)).node()}}class fx extends pt{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:s=o,insetLeft:u=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},wu(n,"y"),S2),this.insetRight=Ie(s),this.insetLeft=Ie(u),Qa(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{y:u,x1:l,x2:f}=r,{width:h,height:c,marginTop:m,marginRight:d,marginLeft:p,marginBottom:g}=i,{insetLeft:v,insetRight:b}=this;return He("svg:g",a).call(Wt,this,i,a).call(Dt,this,{y:u&&s},0,wt).call(w=>w.selectAll().data(t).enter().append("line").call(Vt,this).attr("x1",l&&!pi(o)?y=>l[y]+v:p+v).attr("x2",f&&!pi(o)?o.bandwidth?y=>f[y]+o.bandwidth()-b:y=>f[y]-b:h-d-b).attr("y1",u?y=>u[y]:(m+c-g)/2).attr("y2",u?y=>u[y]:(m+c-g)/2).call(zn,this,r).call(_u,this,r,a)).node()}}function Dc(e,t){let{x:n=ct,y:r,y1:i,y2:a,...o}=A2(t);return[i,a]=E2(r,i,a),new lx(e,{...o,x:n,y1:i,y2:a})}function As(e,t){let{y:n=ct,x:r,x1:i,x2:a,...o}=ox(t);return[i,a]=E2(r,i,a),new fx(e,{...o,y:n,x1:i,x2:a})}function E2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Nc(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const cx={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},k2="";class Bc extends pt{constructor(t,n={}){const{x:r,y:i,text:a=ar(t)&&Ng(t)?ct:cu,frameAnchor:o,textAnchor:s=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:u=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:f=1/0,textOverflow:h,monospace:c,fontFamily:m=c?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:g,fontWeight:v,rotate:b}=n,[w,y]=mt(b,0),[_,x]=gx(d);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:_,optional:!0},rotate:{value:q9(w),optional:!0},text:{value:a,filter:oc,optional:!0}},n,cx),this.rotate=y,this.textAnchor=ot(s,"middle"),this.lineAnchor=rn(u,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+f,this.textOverflow=C2(h),this.monospace=!!c,this.fontFamily=dt(m),this.fontSize=x,this.fontStyle=dt(p),this.fontVariant=dt(g),this.fontWeight=dt(v),this.frameAnchor=mu(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${f}`);this.splitLines=$2(this),this.clipLine=D2(this)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:l,rotate:f,text:h,title:c,fontSize:m}=r,{rotate:d}=this,[p,g]=Xa(this,i);return He("svg:g",a).call(Wt,this,i,a).call(T2,this,h,i).call(Dt,this,{x:u&&o,y:l&&s}).call(v=>v.selectAll().data(t).enter().append("text").call(Vt,this).call(hx,this,h,c).attr("transform",Nc`translate(${u?b=>u[b]:p},${l?b=>l[b]:g})${f?b=>` rotate(${f[b]})`:d?` rotate(${d})`:""}`).call(be,"font-size",m&&(b=>m[b])).call(zn,this,r)).node()}}function C2(e){return e==null?null:rn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function hx(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:s,clipLine:u}=t;e.each(function(l){const f=s($r(n[l])??"").map(u),h=f.length,c=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let m=0;for(let d=0;d<h;++d){if(++m,!f[d])continue;const p=this.ownerDocument.createElementNS(ri.svg,"tspan");p.setAttribute("x",0),d===m-1?p.setAttribute("y",`${(c+d)*a}em`):p.setAttribute("dy",`${m*a}em`),p.textContent=f[d],this.appendChild(p),m=0}}else c&&this.setAttribute("y",`${c*a}em`),this.textContent=f[0];if(o&&!r&&f[0]!==n[l]){const m=this.ownerDocument.createElementNS(ri.svg,"title");m.textContent=n[l],this.appendChild(m)}})}function Mu(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ha(t,n)),new Bc(e,{...r,x:t,y:n})}function dx(e,{x:t=ct,...n}={}){return new Bc(e,ux({...n,x:t}))}function mx(e,{y:t=ct,...n}={}){return new Bc(e,sx({...n,y:t}))}function T2(e,t,n){be(e,"text-anchor",t.textAnchor),be(e,"font-family",t.fontFamily),be(e,"font-size",t.fontSize),be(e,"font-style",t.fontStyle),be(e,"font-variant",t.fontVariant===void 0?px(n):t.fontVariant),be(e,"font-weight",t.fontWeight)}function px(e){return e&&(U9(e)||xt(e))?"tabular-nums":void 0}const bx=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function gx(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),bx.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function yx(e,t,n){const r=[];let i,a=0;for(const[o,s,u]of vx(e)){if(i===void 0&&(i=o),a>i&&n(e,i,s)>t&&(r.push(e.slice(i,a)+(e[a-1]===k2?"-":"")),i=o),u){r.push(e.slice(i,s)),i=void 0;continue}a=s}return r}function*vx(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case k2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Hd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Fc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ai(e,i))r+=Hd[e[i]]??(B2(e,i)?120:Hd.e);return r}function Lc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ai(e,i))r+=B2(e,i)?126:63;return r}function $2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?Lc:Fc,i=t*100;return a=>yx(a,i,r)}function D2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?Lc:Fc,i=t*100;switch(n){case"clip-start":return a=>Vd(a,i,r,"");case"clip-end":return a=>Wd(a,i,r,"");case"ellipsis-start":return a=>Vd(a,i,r,Qr);case"ellipsis-middle":return a=>wx(a,i,r,Qr);case"ellipsis-end":return a=>Wd(a,i,r,Qr)}}const Qr="";function bi(e,t,n,r){const i=[];let a=0;for(let o=0,s=0,u=e.length;o<u;o=s){s=Ai(e,o);const l=n(e,o,s);if(a+l>t){for(a+=r;a>t&&o>0;)s=o,o=i.pop(),a-=n(e,o,s);return[o,t-a]}a+=l,i.push(o)}return[-1,0]}function Wd(e,t,n,r){e=e.trim();const i=n(r),[a]=bi(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function wx(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,s]=bi(e,t/2,n,a),[u]=bi(e,i-t/2-s+a,n,-a);return u<0?r:e.slice(0,o).trimEnd()+r+e.slice(Ai(e,u)).trimStart()}function Vd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=bi(e,i-t+a,n,-a);return o<0?r:r+e.slice(Ai(e,o)).trimStart()}const pf=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Yd=new RegExp("\\p{Extended_Pictographic}","uy");function Ai(e,t){return t+=_x(e,t)?2:1,xx(e,t)&&(t=pf.lastIndex),Mx(e,t)?Ai(e,t+1):t}function N2(e,t){return e.charCodeAt(t)<128}function _x(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function Mx(e,t){return e.charCodeAt(t)===8205}function xx(e,t){return N2(e,t)?!1:(pf.lastIndex=t,pf.test(e))}function B2(e,t){return N2(e,t)?!1:(Yd.lastIndex=t,Yd.test(e))}const Px={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},F2=3.5,Ax=F2*5,L2={draw(e,t,n){const r=t*n/Ax;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},Sx={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},Ex=new Map([["arrow",L2],["spike",Sx]]);function kx(e){return e&&typeof e.draw=="function"}function Cx(e){if(kx(e))return e;const t=Ex.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class I2 extends pt{constructor(t,n={}){const{x:r,y:i,r:a=F2,length:o,rotate:s,shape:u=L2,anchor:l="middle",frameAnchor:f}=n,[h,c]=mt(o,12),[m,d]=mt(s,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:m,optional:!0}},n,Px),this.r=+a,this.length=c,this.rotate=d,this.shape=Cx(u),this.anchor=rn(l,"anchor",["start","middle","end"]),this.frameAnchor=mu(f)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:l,length:f,rotate:h}=r,{length:c,rotate:m,anchor:d,shape:p,r:g}=this,[v,b]=Xa(this,i);return He("svg:g",a).call(Wt,this,i,a).call(Dt,this,{x:u&&o,y:l&&s}).call(w=>w.selectAll().data(t).enter().append("path").call(Vt,this).attr("transform",Nc`translate(${u?y=>u[y]:v},${l?y=>l[y]:b})${h?y=>` rotate(${h[y]})`:m?` rotate(${m})`:""}${d==="start"?"":d==="end"?f?y=>` translate(0,${f[y]})`:` translate(0,${c})`:f?y=>` translate(0,${f[y]/2})`:` translate(0,${c/2})`}`).attr("d",f?y=>{const _=Vn();return p.draw(_,f[y],g),_}:(()=>{const y=Vn();return p.draw(y,c,g),y})()).call(zn,this,r)).node()}}function Tx(e,t={}){const{x:n=ct,...r}=t;return new I2(e,{...r,x:n})}function $x(e,t={}){const{y:n=ct,...r}=t;return new I2(e,{...r,y:n})}function sr(e,t){return arguments.length<2&&!ar(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function xu({anchor:e}={},t){return e===void 0?t[0]:rn(e,"anchor",t)}function R2(e){return xu(e,["left","right"])}function O2(e){return xu(e,["right","left"])}function q2(e){return xu(e,["bottom","top"])}function z2(e){return xu(e,["top","bottom"])}function G2(){const[e,t]=sr(...arguments);return H2("y",R2(t),e,t)}function Dx(){const[e,t]=sr(...arguments);return H2("fy",O2(t),e,t)}function U2(){const[e,t]=sr(...arguments);return W2("x",q2(t),e,t)}function Nx(){const[e,t]=sr(...arguments);return W2("fx",z2(t),e,t)}function H2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:u=r,fillOpacity:l=i,textAnchor:f,textStroke:h,textStrokeOpacity:c,textStrokeWidth:m,tickSize:d=e==="y"?6:0,tickPadding:p,tickRotate:g,x:v,margin:b,marginTop:w=b===void 0?20:b,marginRight:y=b===void 0?t==="right"?40:0:b,marginBottom:_=b===void 0?20:b,marginLeft:x=b===void 0?t==="left"?40:0:b,label:P,labelAnchor:T,labelArrow:S,labelOffset:$,...E}){return d=Ie(d),p=Ie(p),g=Ie(g),T!==void 0&&(T=rn(T,"labelAnchor",["center","top","bottom"])),S=J2(S),h2(d&&!vt(a)?Bx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:d,tickPadding:p,tickRotate:g,x:v,...E}):null,vt(u)?null:Lx(e,t,n,{fill:u,fillOpacity:l,stroke:h,strokeOpacity:c,strokeWidth:m,textAnchor:f,tickSize:d,tickPadding:p,tickRotate:g,x:v,marginTop:w,marginRight:y,marginBottom:_,marginLeft:x,...E}),!vt(u)&&P!==null?Mu([],X2({fill:u,fillOpacity:l,...E},function(L,U,D,k,z){const oe=k[e],{marginTop:ae,marginRight:te,marginBottom:H,marginLeft:Y}=e==="y"&&z.inset||z,W=T??(oe.bandwidth?"center":"top"),j=$??(t==="right"?te:Y)-3;return W==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=W,this.frameAnchor=`${W}-${t}`,this.rotate=0),this.dy=W==="top"?3-ae:W==="bottom"?H-3:0,this.dx=t==="right"?j:-j,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Q2(e,oe,{anchor:t,label:P,labelAnchor:W,labelArrow:S})]}}}})):null)}function W2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:u=r,fillOpacity:l=i,textAnchor:f,textStroke:h,textStrokeOpacity:c,textStrokeWidth:m,tickSize:d=e==="x"?6:0,tickPadding:p,tickRotate:g,y:v,margin:b,marginTop:w=b===void 0?t==="top"?30:0:b,marginRight:y=b===void 0?20:b,marginBottom:_=b===void 0?t==="bottom"?30:0:b,marginLeft:x=b===void 0?20:b,label:P,labelAnchor:T,labelArrow:S,labelOffset:$,...E}){return d=Ie(d),p=Ie(p),g=Ie(g),T!==void 0&&(T=rn(T,"labelAnchor",["center","left","right"])),S=J2(S),h2(d&&!vt(a)?Fx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:d,tickPadding:p,tickRotate:g,y:v,...E}):null,vt(u)?null:Ix(e,t,n,{fill:u,fillOpacity:l,stroke:h,strokeOpacity:c,strokeWidth:m,textAnchor:f,tickSize:d,tickPadding:p,tickRotate:g,y:v,marginTop:w,marginRight:y,marginBottom:_,marginLeft:x,...E}),!vt(u)&&P!==null?Mu([],X2({fill:u,fillOpacity:l,...E},function(L,U,D,k,z){const oe=k[e],{marginTop:ae,marginRight:te,marginBottom:H,marginLeft:Y}=e==="x"&&z.inset||z,W=T??(oe.bandwidth?"center":"right"),j=$??(t==="top"?ae:H)-3;return W==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${W}`,this.textAnchor=W==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-j:j,this.dx=W==="right"?te-3:W==="left"?3-Y:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[Q2(e,oe,{anchor:t,label:P,labelAnchor:W,labelArrow:S})]}}}})):null)}function Bx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:l=0,insetLeft:f=l,insetRight:h=l,dx:c=0,y:m=e==="y"?void 0:null,...d}){return Si($x,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:s,y:m,...d,dx:t==="left"?+c-wt+ +f:+c+wt-h,anchor:"start",length:u,shape:t==="left"?Wx:Vx})}function Fx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:l=0,insetTop:f=l,insetBottom:h=l,dy:c=0,x:m=e==="x"?void 0:null,...d}){return Si(Tx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:s,x:m,...d,dy:t==="bottom"?+c-wt-h:+c+wt+ +f,anchor:"start",length:u,shape:t==="bottom"?Ux:Hx})}function Lx(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*y2):0),text:u,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:f=o>60?"top":o<-60?"bottom":"middle",fontVariant:h,inset:c=0,insetLeft:m=c,insetRight:d=c,dx:p=0,y:g=e==="y"?void 0:null,...v}){return Si(mx,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:u,textAnchor:l,lineAnchor:f,fontVariant:h,rotate:o,y:g,...v,dx:t==="left"?+p-a-s+ +m:+p+ +a+ +s-d},function(b,w,y,_,x){h===void 0&&(this.fontVariant=K2(b)),u===void 0&&(x.text=Z2(b,w,y,_,t))})}function Ix(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*y2):0),text:u,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:f=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:h,inset:c=0,insetTop:m=c,insetBottom:d=c,dy:p=0,x:g=e==="x"?void 0:null,...v}){return Si(dx,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:u===void 0?null:u,textAnchor:l,lineAnchor:f,fontVariant:h,rotate:o,x:g,...v,dy:t==="bottom"?+p+ +a+ +s-d:+p-a-s+ +m},function(b,w,y,_,x){h===void 0&&(this.fontVariant=K2(b)),u===void 0&&(x.text=Z2(b,w,y,_,t))})}function Rx(){const[e,t]=sr(...arguments);return V2("y",R2(t),e,t)}function Ox(){const[e,t]=sr(...arguments);return V2("fy",O2(t),e,t)}function qx(){const[e,t]=sr(...arguments);return Y2("x",q2(t),e,t)}function zx(){const[e,t]=sr(...arguments);return Y2("fx",z2(t),e,t)}function V2(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...s}){return Si(As,e,t,`${e}-grid`,n,{y:r,x1:a,x2:o,...j2(s)})}function Y2(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...s}){return Si(Dc,e,t,`${e}-grid`,n,{x:r,y1:a,y2:o,...j2(s)})}function j2({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function X2({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:u,shapeRendering:l,clip:f=!1},h){return[,e]=In(e),[,t]=mt(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:u,shapeRendering:l,clip:f,initializer:h}}function Si(e,t,n,r,i,a,o){let s;function u(h,c,m,d,p,g){const v=h==null&&(t==="fx"||t==="fy"),{[t]:b}=d;if(!b)throw new Error(`missing scale: ${t}`);const w=b.domain();let{interval:y,ticks:_,tickFormat:x,tickSpacing:P=t==="x"?80:35}=a;if(typeof _=="string"&&ey(b)&&(y=_,_=void 0),_===void 0&&(_=Pi(y,b.type)??Gx(b,P)),h==null){if(ar(_))h=$t(_);else if(Yr(_))h=dl(_,...Lt(w));else if(b.interval){let S=b.interval;if(b.ticks){const[$,E]=Lt(w),L=(E-$)/S[Ga];S=pd(S,L/_)??S,h=dl(S,$,E)}else{h=w;const $=h.length;S=pd(S,$/_)??S,S!==b.interval&&(h=dl(S,...Lt(h)))}if(S===b.interval){const $=Math.round(h.length/_);$>1&&(h=h.filter((E,L)=>L%$===0))}}else b.ticks?h=b.ticks(_):h=w;if(!b.ticks&&h.length&&h!==w){const S=new Rs(w);h=h.filter($=>S.has($)),h.length||Xn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?c=[On(h)]:s[t]={scale:t,value:ct}}o==null||o.call(this,b,h,_,x,s);const T=Object.fromEntries(Object.entries(s).map(([S,$])=>[S,{...$,value:tt(h,$.value)}]));return v&&(c=g.filterFacets(h,T)),{data:h,facets:c,channels:T}}const l=mi(a).initializer,f=e(i,mi({...a,initializer:u},l));return i==null?(s=f.channels,f.channels={}):s={},f.ariaLabel=r,f.clip===void 0&&(f.clip=!1),f}function Gx(e,t){const[n,r]=Lt(e.range());return(r-n)/t}function Z2(e,t,n,r,i){return{value:Ic(e,t,n,r,i)}}function Ic(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&xt(t)?A9(e.type,t,i)??$r:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?$r:typeof r=="string"?(xt(e.domain())?qa:Mi)(r):Ua(r)}function dl(e,t,n){return e.range(t,e.offset(e.floor(n)))}const Ux={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Hx={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Wx={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},Vx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function K2(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function Q2(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&ey(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!a)return r;if(a===!0){const o=TM(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function J2(e="auto"){return vt(e)?!1:typeof e=="boolean"?e:rn(e,"labelArrow",["auto","up","right","down","left"])}function ey(e){return xt(e.domain())}function jd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function Yx(e,{opacity:t,...n}={}){if(!Ir(e)&&!c2(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return ty(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",mt(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function jx(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(f=>(f=e.hint)==null?void 0:f.stroke)()!==void 0?e.hint.stroke:vt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...s}={},u){const[h,c]=In(t),[m,d]=In(r),p=jd(u,h),g=jd(u,m),v=o*o*Math.PI;return n=mt(n)[1],i=mt(i)[1],a=mt(a)[1],ty(e,s,(b,w,y,_)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",y).attr("height",_).attr("fill",h==="color"?x=>p.scale(x):c).attr("fill-opacity",n).attr("stroke",m==="color"?x=>g.scale(x):d).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",x=>{const P=Vn();return e.scale(x).draw(P,v),P}))}function ty(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=g2(e),swatchSize:o=15,swatchWidth:s=o,swatchHeight:u=o,marginLeft:l=0,className:f,style:h,width:c}=t;const m=Pc(t);f=Mc(f),i=Ic(e.scale,e.domain,void 0,i);const d=He("div",m).attr("class",`${f}-swatches ${f}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${f}-swatches-columns .${f}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${f}-swatches-columns .${f}-swatch::before) {
  flex-shrink: 0;
}
:where(.${f}-swatches-columns .${f}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,d.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${f}-swatch`).call(n,e,s,u).call(g=>g.append("div").attr("class",`${f}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${f}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${f}-swatches-wrap .${f}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,d.selectAll().data(e.domain).enter().append("span").attr("class",`${f}-swatch`).call(n,e,s,u).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),d.call(g=>g.insert("style","*").text(`:where(.${f}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${f}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",l?`${+l}px`:null).style("width",c===void 0?null:`${+c}px`).style("font-variant",ot(a,"normal")).call(xc,h).node()}const bf=new Map([["symbol",jx],["color",ry],["opacity",Zx]]);function Xx(e,t,n={}){return(r,i)=>{if(!bf.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return bf.get(r)(e[r],ny(t,n[r],i),a=>e[a])}}function ny({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return Y9(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function ry(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return Yx(e,n);case"ramp":return tx(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function Zx({type:e,interpolate:t,...n},{legend:r=!0,color:i=Qn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return ry({type:e,...n,interpolate:Kx(i)},{legend:r,...a})}function Kx(e){const{r:t,g:n,b:r}=Qn(e)||Qn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function Qx(e,t,n){const r=[];for(const[i,a]of bf){const o=n[i];if(o!=null&&o.legend&&i in e){const s=a(e[i],ny(t,e[i],o),u=>e[u]);s!=null&&r.push(s)}}return r}const Jx={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},eP={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class tP extends pt{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:s=r,rx:u,ry:l}=t;super(Lo,void 0,t,n==null?Jx:eP),this.anchor=Cg(n,"anchor",["top","right","bottom","left"]),this.insetTop=Ie(i),this.insetRight=Ie(a),this.insetBottom=Ie(o),this.insetLeft=Ie(s),this.rx=Ie(u),this.ry=Ie(l)}render(t,n,r,i,a){const{marginTop:o,marginRight:s,marginBottom:u,marginLeft:l,width:f,height:h}=i,{anchor:c,insetTop:m,insetRight:d,insetBottom:p,insetLeft:g,rx:v,ry:b}=this,w=l+g,y=f-s-d,_=o+m,x=h-u-p;return He(c?"svg:line":"svg:rect",a).datum(0).call(Wt,this,i,a).call(Vt,this).call(zn,this,r).call(Dt,this,{}).call(c==="left"?P=>P.attr("x1",w).attr("x2",w).attr("y1",_).attr("y2",x):c==="right"?P=>P.attr("x1",y).attr("x2",y).attr("y1",_).attr("y2",x):c==="top"?P=>P.attr("x1",w).attr("x2",y).attr("y1",_).attr("y2",_):c==="bottom"?P=>P.attr("x1",w).attr("x2",y).attr("y1",x).attr("y2",x):P=>P.attr("x",w).attr("y",_).attr("width",y-w).attr("height",x-_).attr("rx",v).attr("ry",b)).node()}}function nP(e){return new tP(e)}const ml={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},rP=new Set(["geometry","href","src","ariaLabel","scales"]);class iP extends pt{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ar(t)&&Ng(t)&&(n={...n,title:ct});const{x:r,y:i,x1:a,x2:o,y1:s,y2:u,anchor:l,preferredAnchor:f="bottom",monospace:h,fontFamily:c=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:d,fontVariant:p,fontWeight:g,lineHeight:v=1,lineWidth:b=20,frameAnchor:w,format:y,textAnchor:_="start",textOverflow:x,textPadding:P=8,title:T,pointerSize:S=12,pathFilter:$="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:s!=null&&u!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:s,scale:"y",optional:u==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:u,scale:"y",optional:s==null},title:{value:T,optional:!0}},n,ml),this.anchor=lf(l,"anchor"),this.preferredAnchor=lf(f,"preferredAnchor"),this.frameAnchor=mu(w),this.textAnchor=ot(_,"middle"),this.textPadding=+P,this.pointerSize=+S,this.pathFilter=dt($),this.lineHeight=+v,this.lineWidth=+b,this.textOverflow=C2(x),this.monospace=!!h,this.fontFamily=dt(c),this.fontSize=Ie(m),this.fontStyle=dt(d),this.fontVariant=dt(p),this.fontWeight=dt(g);for(const E in ml)E in this.channels&&(this[E]=ml[E]);this.splitLines=$2(this),this.clipLine=D2(this),this.format={...y}}render(t,n,r,i,a){const o=this,{x:s,y:u,fx:l,fy:f}=n,{ownerSVGElement:h,document:c}=a,{anchor:m,monospace:d,lineHeight:p,lineWidth:g}=this,{textPadding:v,pointerSize:b,pathFilter:w}=this,{marginTop:y,marginLeft:_}=i,{x1:x,y1:P,x2:T,y2:S,x:$=x??T,y:E=P??S}=r,L=l?l(t.fx)-_:0,U=f?f(t.fy)-y:0,[D,k]=Xa(this,i),z=p2(r,D),oe=b2(r,k),ae=d?Lc:Fc,te=ae(Qr);let H,Y;"title"in r?(H=r.channels,Y=lP):(H=uP.call(this,r,n),Y=fP);const W=He("svg:g",a).call(Wt,this,i,a).call(T2,this).call(Dt,this,{x:$&&s,y:E&&u}).call(fe=>fe.selectAll().data(t).enter().append("g").attr("transform",ue=>`translate(${Math.round(z(ue))},${Math.round(oe(ue))})`).call(Vt,this).call(ue=>ue.append("path").attr("filter",w)).call(ue=>ue.append("text").each(function(K){const Q=Qi(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const F=Y.call(o,K,t,H,n,r);if(typeof F=="string")for(const X of o.splitLines(F))j(Q,{value:o.clipLine(X)});else{const X=new Set;for(const ee of F){const{label:B=""}=ee;B&&X.has(B)||(X.add(B),j(Q,ee))}}})));function j(fe,{label:ue,value:K,color:Q,opacity:F}){ue??(ue=""),K??(K="");const X=Q!=null||F!=null;let ee,B=g*100;const[Me]=bi(ue,B,ae,te);if(Me>=0)ue=ue.slice(0,Me).trimEnd()+Qr,ee=K.trim(),K="";else{(ue||!K&&!X)&&(K=" "+K);const[ce]=bi(K,B-ae(ue),ae,te);ce>=0&&(ee=K.trim(),K=K.slice(0,ce).trimEnd()+Qr)}const re=fe.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");ue&&re.append("tspan").attr("font-weight","bold").text(ue),K&&re.append(()=>c.createTextNode(K)),X&&re.append("tspan").text(" ").attr("fill",Q).attr("fill-opacity",F).style("user-select","none"),ee&&re.append("title").text(ee)}function se(){const{width:fe,height:ue}=i.facet??i;W.selectChildren().each(function(K){let{x:Q,width:F,height:X}=this.getBBox();F=Math.round(F),X=Math.round(X);let ee=m;if(ee===void 0){const re=z(K)+L,ce=oe(K)+U,ke=re+F+b+v*2<fe,qe=re-F-b-v*2>0,We=ce+X+b+v*2<ue,Be=ce-X-b-v*2>0;ee=ke&&qe?We&&Be?o.preferredAnchor:Be?"bottom":"top":We&&Be?ke?"left":"right":(ke||qe)&&(We||Be)?`${Be?"bottom":"top"}-${ke?"left":"right"}`:o.preferredAnchor}const B=this.firstChild,Me=this.lastChild;if(B.setAttribute("d",sP(ee,b,v,F,X)),Q)for(const re of Me.childNodes)re.setAttribute("x",-Q);Me.setAttribute("y",`${+aP(ee,Me.childNodes.length,p).toFixed(6)}em`),Me.setAttribute("transform",`translate(${oP(ee,b,v,F,X)})`)}),W.attr("visibility",null)}return t.length&&(W.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(se):typeof requestAnimationFrame<"u"&&requestAnimationFrame(se)),W.node()}}function iy(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ha(t,n)),new iP(e,{...r,x:t,y:n})}function aP(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function oP(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function sP(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function uP({channels:e},t){var i,a;const n={};let r=this.format;r=Xd(r,e,"x"),r=Xd(r,e,"y"),this.format=r;for(const o in r){const s=r[o];if(!(s===null||s===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const u=Pd(e,o);u&&(n[o]=u)}}for(const o in e){if(o in n||o in r||rP.has(o))continue;const s=Pd(e,o);s&&(n[o]=s)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const s=this.format[o];if(typeof s=="string"){const u=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(xt(u)?qa:Mi)(s)}else if(s===void 0||s===!0){const u=t[o];this.format[o]=u!=null&&u.bandwidth?Ic(u,u.domain()):$r}}return n}function Xd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([s])=>s===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function lP(e,t,{title:n}){return $r(n.value[e],e)}function*fP(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:Ss(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:Kd(r,n,"x"),value:Zd(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:Kd(r,n,"y"),value:Zd(this.format.y2,n.y1,o,e)};else{const s=o.value[e],u=o.scale;if(!er(s)&&u==null)continue;yield{label:Ss(r,n,a),value:this.format[a](s,e),color:u==="color"?i[a][e]:null,opacity:u==="opacity"?i[a][e]:null}}}}function Zd(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Kd(e,t,n){const r=Ss(e,t,`${n}1`,n),i=Ss(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function Ss(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function Yt(e={}){var te;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:s}=e,u=Mc(e.className),l=e.marks===void 0?[]:Jd(e.marks);l.push(...yP(l));const f=bP(t,e),h=new Map;for(const H of l){const Y=e1(H,f,e);Y&&h.set(H,Y)}const c=new Map;f&&Fi(c,[f],e),Fi(c,h,e);const m=Jd(vP(l,c,e));for(const H of m){const Y=e1(H,f,e);Y&&h.set(H,Y)}l.unshift(...m);let d=qM(c,e);if(d!==void 0){const H=f?fl(d,f):void 0;for(const W of l){if(W.facet===null||W.facet==="super")continue;const j=h.get(W);j!==void 0&&(j.facetsIndex=W.fx!=null||W.fy!=null?fl(d,j):H)}const Y=new Set;for(const{facetsIndex:W}of h.values())W==null||W.forEach((j,se)=>{(j==null?void 0:j.length)>0&&Y.add(se)});d.forEach(0<Y.size&&Y.size<d.length?(W,j)=>W.empty=!Y.has(j):W=>W.empty=!1);for(const W of l)if(W.facet==="exclude"){const j=h.get(W);j!==void 0&&(j.facetsIndex=UM(j.facetsIndex))}}for(const H of Ue.keys())sf(e[H])&&H!=="fx"&&H!=="fy"&&c.set(H,[]);const p=new Map;for(const H of l){if(p.has(H))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:Y,channels:W}=h.get(H)??{},{data:j,facets:se,channels:fe}=H.initialize(Y,W,e);Rc(fe,e),p.set(H,{data:j,facets:se,channels:fe})}const g=df(Fi(c,p,e),e),v=RM(g,l,e);kM(g,v);const b=Nd(g),{fx:w,fy:y}=b,_=w||y?u2(g,v):v,x=w||y?SP(b,v):v,P=Pc(e),T=P.document,S=Us("svg").call(T.documentElement);let $=S;P.ownerSVGElement=S,P.className=u,P.projection=q8(e,_),P.filterFacets=(H,Y)=>fl(d,{channels:Y,groups:Cc(H,Y)}),P.getMarkState=H=>{const Y=p.get(H),W=h.get(H);return{...Y,channels:{...Y.channels,...W==null?void 0:W.channels}}},P.dispatchValue=H=>{$.value!==H&&($.value=H,$.dispatchEvent(new Event("input",{bubbles:!0})))};const E=new Set;for(const[H,Y]of p)if(H.initializer!=null){const W=H.facet==="super"?x:_,j=H.initializer(Y.data,Y.facets,Y.channels,b,W,P);if(j.data!==void 0&&(Y.data=j.data),j.facets!==void 0&&(Y.facets=j.facets),j.channels!==void 0){const{fx:se,fy:fe,...ue}=j.channels;pP(ue),Object.assign(Y.channels,ue);for(const K of Object.values(ue)){const{scale:Q}=K;Q!=null&&!X9(Ue.get(Q))&&(ay(K,e),E.add(Q))}(se!=null||fe!=null)&&h.set(H,!0)}}if(E.size){const H=new Map;Fi(H,p,e,se=>E.has(se)),Fi(c,p,e,se=>E.has(se));const Y=AP(df(H,e),g),{scales:W,...j}=Nd(Y);Object.assign(g,Y),Object.assign(b,j),Object.assign(b.scales,W)}let L,U;d!==void 0&&(L={x:w==null?void 0:w.domain(),y:y==null?void 0:y.domain()},d=zM(d,L),U=GM(w,y,v));for(const[H,Y]of p)Y.values=H.scale(Y.channels,b,P);const{width:D,height:k}=v;Qi(S).attr("class",u).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",D).attr("height",k).attr("viewBox",`0 0 ${D} ${k}`).attr("aria-label",o).attr("aria-description",s).call(H=>H.append("style").text(`:where(.${u}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${u} text),
:where(.${u} tspan) {
  white-space: pre;
}`)).call(xc,n);for(const H of l){const{channels:Y,values:W,facets:j}=p.get(H);if(d===void 0||H.facet==="super"){let se=null;if(j&&(se=j[0],se=H.filter(se,Y,W),se.length===0))continue;const fe=H.render(se,b,W,x,P);if(fe==null)continue;S.appendChild(fe)}else{let se;for(const fe of d){if(!(((te=H.facetAnchor)==null?void 0:te.call(H,d,L,fe))??!fe.empty))continue;let ue=null;if(j){const Q=h.has(H);if(ue=j[Q?fe.i:0],ue=H.filter(ue,Y,W),ue.length===0)continue;!Q&&ue===j[0]&&(ue=L9(ue)),ue.fx=fe.x,ue.fy=fe.y,ue.fi=fe.i}const K=H.render(ue,b,W,_,P);if(K!=null){(se??(se=Qi(S).append("g"))).append(()=>K).datum(fe);for(const Q of["aria-label","aria-description","aria-hidden","transform"])K.hasAttribute(Q)&&(se.attr(Q,K.getAttribute(Q)),K.removeAttribute(Q))}}se==null||se.selectChildren().attr("transform",U)}}const z=Qx(g,P,e),{figure:oe=r!=null||i!=null||a!=null||z.length>0}=e;oe&&($=T.createElement("figure"),$.className=`${u}-figure`,$.style.maxWidth="initial",r!=null&&$.append(Qd(T,r,"h2")),i!=null&&$.append(Qd(T,i,"h3")),$.append(...z,S),a!=null&&$.append(cP(T,a))),$.scale=LM(b.scales),$.legend=Xx(g,P,e);const ae=k8();return ae>0&&Qi(S).append("text").attr("x",D).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${ae.toLocaleString("en-US")} warning${ae===1?"":"s"}. Please check the console.`),$}function Qd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function cP(e,t){const n=e.createElement("figcaption");return n.append(t),n}function hP({marks:e=[],...t}={}){return Yt({...t,marks:[...e,this]})}pt.prototype.plot=hP;function Jd(e){return e.flat(1/0).filter(t=>t!=null).map(dP)}function dP(e){return typeof e.render=="function"?e:new mP(e)}class mP extends pt{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Rc(e,t){for(const n in e)ay(e[n],t);return e}function ay(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:s=a?u=>u*100:Dg(o,i)}=t[n]??{};s!=null&&(e.value=Ve(e.value,s),e.transform=!1)}function pP(e){for(const t in e)zg(t,e[t])}function Fi(e,t,n,r=T9){var i,a;for(const{channels:o}of t.values())for(const s in o){const u=o[s],{scale:l}=u;if(l!=null&&r(l))if(l==="projection"){if(!H8(n)){const f=((i=n.x)==null?void 0:i.domain)===void 0,h=((a=n.y)==null?void 0:a.domain)===void 0;if(f||h){const[c,m]=V8(u);f&&pl(e,"x",c),h&&pl(e,"y",m)}}}else pl(e,l,u)}return e}function pl(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function bP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=$t(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=va(i,{value:n,scale:"fx"})),r!=null&&(a.fy=va(i,{value:r,scale:"fy"})),Rc(a,t);const o=Cc(i,a);return{channels:a,groups:o,data:e.data}}function e1(e,t,n){var u;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=$t(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const f={};return r!=null&&(f.fx=va(l,{value:r,scale:"fx"})),i!=null&&(f.fy=va(l,{value:i,scale:"fy"})),Rc(f,n),{channels:f,groups:Cc(l,f)}}if(t===void 0)return;const{channels:a,groups:o,data:s}=t;if(e.facet!=="auto"||e.data===s)return{channels:a,groups:o};s.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((u=$t(e.data))==null?void 0:u.length)===s.length&&Xn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function gP(e,t={}){return mi({...t,x:null,y:null},(n,r,i,a,o,s)=>s.getMarkState(e))}function yP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?ex:/^y$/i.test(i)?zd:m2,r=i(gP(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===zd?"left":"bottom");const o=iy(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function vP(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:s={},axis:u,grid:l,facet:f={},facet:{axis:h=u,grid:c}=f,x:{axis:m=u,grid:d=m===null?null:l}=i,y:{axis:p=u,grid:g=p===null?null:l}=a,fx:{axis:v=h,grid:b=v===null?null:c}=o,fy:{axis:w=h,grid:y=w===null?null:c}=s}=n;(r||!sf(i)&&!t1("x",e))&&(m=d=null),(r||!sf(a)&&!t1("y",e))&&(p=g=null),t.has("fx")||(v=b=null),t.has("fy")||(w=y=null),m===void 0&&(m=!xo(e,"x")),p===void 0&&(p=!xo(e,"y")),v===void 0&&(v=!xo(e,"fx")),w===void 0&&(w=!xo(e,"fy")),m===!0&&(m="bottom"),p===!0&&(p="left"),v===!0&&(v=m==="top"||m===null?"bottom":"top"),w===!0&&(w=p==="right"||p===null?"left":"right");const _=[];return Mo(_,y,Ox,s),_o(_,w,Dx,"right","left",f,s),Mo(_,b,zx,o),_o(_,v,Nx,"top","bottom",f,o),Mo(_,g,Rx,a),_o(_,p,G2,"left","right",n,a),Mo(_,d,qx,i),_o(_,m,U2,"bottom","top",n,i),_}function _o(e,t,n,r,i,a,o){if(!t)return;const s=wP(t);o=_P(s?r:t,a,o);const{line:u}=o;(n===G2||n===U2)&&u&&!ya(u)&&e.push(nP(MP(o))),e.push(n(o)),s&&e.push(n({...o,anchor:i,label:null}))}function Mo(e,t,n,r){!t||ya(t)||e.push(n(xP(t,r)))}function wP(e){return/^\s*both\s*$/i.test(e)}function _P(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:u,fontVariant:l,ariaLabel:f,ariaDescription:h,label:c=t.label,labelAnchor:m,labelArrow:d=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:u,fontVariant:l,ariaLabel:f,ariaDescription:h,label:c,labelAnchor:m,labelArrow:d,labelOffset:p}}function MP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function xP(e,{stroke:t=du(e)?e:void 0,ticks:n=PP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function PP(e){switch(typeof e){case"number":return!0;case"string":return!du(e)}return ar(e)||typeof(e==null?void 0:e.range)=="function"}function xo(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function t1(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function AP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function SP({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:u}=kc(n),l=e&&n1(e),f=t&&n1(t);return{marginTop:t?f[0]:r,marginRight:e?s-l[1]:i,marginBottom:t?u-f[1]:a,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:s,height:u}}function n1(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const EP=new Map([["basis",F7],["basis-closed",L7],["basis-open",I7],["bundle",R7],["bump-x",P7],["bump-y",A7],["cardinal",O7],["cardinal-closed",q7],["cardinal-open",z7],["catmull-rom",G7],["catmull-rom-closed",U7],["catmull-rom-open",H7],["linear",za],["linear-closed",W7],["monotone-x",V7],["monotone-y",Y7],["natural",j7],["step",X7],["step-after",K7],["step-before",Z7]]);function oy(e=za,t){if(typeof e=="function")return e;const n=EP.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function sy(e=gi,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?gi:oy(e,t)}function gi(e){return za(e)}function kP(e={y:"count"},t={}){[e,t]=$P(e,t);const{x:n,y:r}=t;return TP(DP(n,t,ct),null,null,r,e,$c(t))}function CP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=_c}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function uy(e={}){return CP(kP,"y",wu(e,"x"))}function TP(e,t,n,r,{data:i=qg,filter:a=Ps,sort:o,reverse:s,...u}={},l={}){e=r1(e),t=r1(t),u=BP(u,l),i=cy(i,ct),o=o==null?void 0:ly("sort",o,l),a=a==null?void 0:fy("filter",a,l),n!=null&&go(u,"x","x1","x2")&&(n=null),r!=null&&go(u,"y","y1","y2")&&(r=null);const[f,h]=Sn(e),[c,m]=Sn(e),[d,p]=Sn(t),[g,v]=Sn(t),[b,w]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[y,_]=Sn(b),{x,y:P,z:T,fill:S,stroke:$,x1:E,x2:L,y1:U,y2:D,domain:k,cumulative:z,thresholds:oe,interval:ae,...te}=l,[H,Y]=Sn(T),[W]=In(S),[j]=In($),[se,fe]=Sn(W),[ue,K]=Sn(j);return{..."z"in l&&{z:H||T},..."fill"in l&&{fill:se||S},..."stroke"in l&&{stroke:ue||$},...bu(te,(Q,F,X)=>{const ee=$g(tt(Q,b),X==null?void 0:X[w]),B=tt(Q,T),Me=tt(Q,W),re=tt(Q,j),ce=l8(u,{z:B,fill:Me,stroke:re}),ke=[],qe=[],We=ee&&_([]),Be=B&&Y([]),Pt=Me&&fe([]),Ne=re&&K([]),Gn=e&&h([]),At=e&&m([]),G=t&&p([]),J=t&&v([]),ne=IP(e,t,Q);let Ae=0;for(const Se of u)Se.initialize(Q);o&&o.initialize(Q),a&&a.initialize(Q);for(const Se of F){const le=[];for(const Te of u)Te.scope("facet",Se);o&&o.scope("facet",Se),a&&a.scope("facet",Se);for(const[Te,I]of wd(Se,ce))for(const[ie,we]of wd(I,ee))for(const[St,on]of ne(we))if(!(a&&!a.reduce(St,on))){le.push(Ae++),qe.push(i.reduceIndex(St,Q,on)),ee&&We.push(ie),B&&Be.push(ce===B?Te:B[(St.length>0?St:we)[0]]),Me&&Pt.push(ce===Me?Te:Me[(St.length>0?St:we)[0]]),re&&Ne.push(ce===re?Te:re[(St.length>0?St:we)[0]]),Gn&&(Gn.push(on.x1),At.push(on.x2)),G&&(G.push(on.y1),J.push(on.y2));for(const to of u)to.reduce(St,on);o&&o.reduce(St)}ke.push(le)}return f8(ke,o,s),{data:qe,facets:ke}}),...!go(u,"x")&&(f?{x1:f,x2:c,x:uf(f,c)}:{x,x1:E,x2:L}),...!go(u,"y")&&(d?{y1:d,y2:g,y:uf(d,g)}:{y:P,y1:U,y2:D}),...y&&{[w]:y},...Object.fromEntries(u.map(({name:Q,output:F})=>[Q,F]))}}function $P({cumulative:e,domain:t,thresholds:n,interval:r,...i},a){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...a}]}function DP(e,{cumulative:t,domain:n,thresholds:r,interval:i},a){return e={...Wa(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=a),e.thresholds=NP(e.thresholds,e.interval),e}function r1(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Lt,thresholds:i}=e,a=o=>{let s=tt(o,t),u;if(xt(s)||LP(i)){s=Ve(s,kg,Float64Array);let[f,h]=typeof r=="function"?r(s):r,c=typeof i=="function"&&!Yr(i)?i(s,f,h):i;typeof c=="number"&&(c=Pp(f,h,c)),Yr(c)&&(r===Lt&&(f=c.floor(f),h=c.offset(c.floor(h))),c=c.range(f,c.offset(h))),u=c}else{s=cn(s);let[f,h]=typeof r=="function"?r(s):r,c=typeof i=="function"&&!Yr(i)?i(s,f,h):i;if(typeof c=="number")if(r===Lt){let m=Vo(f,h,c);if(isFinite(m))if(m>0){let d=Math.round(f/m),p=Math.round(h/m);d*m<=f||--d,p*m>h||++p;let g=p-d+1;c=new Float64Array(g);for(let v=0;v<g;++v)c[v]=(d+v)*m}else if(m<0){m=-m;let d=Math.round(f*m),p=Math.round(h*m);d/m<=f||--d,p/m>h||++p;let g=p-d+1;c=new Float64Array(g);for(let v=0;v<g;++v)c[v]=(d+v)/m}else c=[f];else c=[f]}else c=oa(f,h,c);else Yr(c)&&(r===Lt&&(f=c.floor(f),h=c.offset(c.floor(h))),c=c.range(f,c.offset(h)));u=c}const l=[];if(u.length===1)l.push([u[0],u[0]]);else for(let f=1;f<u.length;++f)l.push([u[f-1],u[f]]);return l.bin=(n<0?OP:n>0?RP:Oc)(l,u,s),l};return a.label=Lr(t),a}function NP(e,t,n=i1){if(e===void 0)return t===void 0?n:Pi(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return Wv;case"scott":return L0;case"sturges":return zv;case"auto":return i1}return fc(e)}return e}function BP(e,t){return o8(e,t,ly)}function ly(e,t,n){return Rg(e,t,n,fy)}function fy(e,t,n){return Og(e,t,n,cy)}function cy(e,t){return wc(e,t,FP)}function FP(e){switch(`${e}`.toLowerCase()){case"x":return qP;case"x1":return GP;case"x2":return UP;case"y":return zP;case"y1":return HP;case"y2":return WP}throw new Error(`invalid bin reduce: ${e}`)}function i1(e,t,n){return Math.min(200,L0(e,t,n))}function LP(e){return O9(e)||ar(e)&&xt(e)}function IP(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(a){const o=r.bin(a);for(const[s,[u,l]]of r.entries()){const f=i.bin(o[s]);for(const[h,[c,m]]of i.entries())yield[f[h],{data:n,x1:u,y1:c,x2:l,y2:m}]}}:r?function*(a){const o=r.bin(a);for(const[s,[u,l]]of r.entries())yield[o[s],{data:n,x1:u,x2:l}]}:function*(a){const o=i.bin(a);for(const[s,[u,l]]of i.entries())yield[o[s],{data:n,y1:u,y2:l}]}}function Oc(e,t,n){return t=cn(t),r=>{var a;const i=e.map(()=>[]);for(const o of r)(a=i[Ls(t,n[o])-1])==null||a.push(o);return i}}function RP(e,t,n){const r=Oc(e,t,n);return i=>{const a=r(i);for(let o=1,s=a.length;o<s;++o){const u=a[o-1],l=a[o];for(const f of u)l.push(f)}return a}}function OP(e,t,n){const r=Oc(e,t,n);return i=>{const a=r(i);for(let o=a.length-2;o>=0;--o){const s=a[o+1],u=a[o];for(const l of s)u.push(l)}return a}}function hy(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const qP={reduceIndex(e,t,{x1:n,x2:r}){return hy(n,r)}},zP={reduceIndex(e,t,{y1:n,y2:r}){return hy(n,r)}},GP={reduceIndex(e,t,{x1:n}){return n}},UP={reduceIndex(e,t,{x2:n}){return n}},HP={reduceIndex(e,t,{y1:n}){return n}},WP={reduceIndex(e,t,{y2:n}){return n}};function dy(e={}){return Tg(e)?e:{...e,y:ct}}function VP(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const s of t)for(const u of s)r[u]&&++i,r[u]=1;if(i===0)return{data:e,facets:t};e=ga(e);const a=e[Sg]=new Uint32Array(n+i);t=t.map(s=>ga(s,Uint32Array));let o=n;r.fill(0);for(const s of t)for(let u=0,l=s.length;u<l;++u){const f=s[u];r[f]?(s[u]=o,e[o]=e[f],a[o]=f,++o):a[f]=f,r[f]=1}return{data:e,facets:t}}function YP(e={},t={}){arguments.length===1&&([e,t]=jP(e));const{x1:n,x:r=n,y:i,...a}=t,[o,s,u,l]=ZP(r,i,"x","y",e,a);return{...o,x1:n,x:s,y1:u,y2:l,y:uf(u,l)}}function my({y:e,y1:t,y2:n,...r}={}){return r=wu(r,"x"),t===void 0&&n===void 0?YP({y:e,...r}):([t,n]=F9(e,t,n),{...r,y1:t,y2:n})}function jP(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const XP={length:!0};function ZP(e,t=C9,n,r,{offset:i,order:a,reverse:o},s){if(t===null)throw new Error(`stack requires ${r}`);const u=dc(s),[l,f]=Sn(e),[h,c]=xs(t),[m,d]=xs(t);return h.hint=m.hint=XP,i=KP(i),a=eA(a,i,r),[bu(s,(p,g,v)=>{({data:p,facets:g}=VP(p,g));const b=e==null?void 0:f($g(tt(p,e),v==null?void 0:v[n])),w=tt(p,t,Float64Array),y=tt(p,u),_=a&&a(p,b,w,y),x=p.length,P=c(new Float64Array(x)),T=d(new Float64Array(x)),S=[];for(const $ of g){const E=b?Array.from(Os($,L=>b[L]).values()):[$];if(_)for(const L of E)L.sort(_);for(const L of E){let U=0,D=0;o&&L.reverse();for(const k of L){const z=w[k];z<0?U=T[k]=(P[k]=U)+z:z>0?D=T[k]=(P[k]=D)+z:T[k]=P[k]=D}}S.push(E)}return i&&i(S,P,T,y),{data:p,facets:g}}),l,h,m]}function KP(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return QP;case"center":case"silhouette":return JP;case"wiggle":return by}throw new Error(`unknown offset: ${e}`)}}function py(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function QP(e,t,n){for(const r of e)for(const i of r){const[a,o]=py(i,n);for(const s of i){const u=1/(o-a||1);t[s]=u*(t[s]-a),n[s]=u*(n[s]-a)}}}function JP(e,t,n){for(const r of e){for(const i of r){const[a,o]=py(i,n);for(const s of i){const u=(o+a)/2;t[s]-=u,n[s]-=u}}gy(r,t,n)}yy(e,t,n)}function by(e,t,n,r){for(const i of e){const a=new xr;let o=0;for(const s of i){let u=-1;const l=s.map(m=>Math.abs(n[m]-t[m])),f=s.map(m=>{u=r?r[m]:++u;const d=n[m]-t[m],p=a.has(u)?d-a.get(u):0;return a.set(u,d),p}),h=[0,...Fv(f)];for(const m of s)t[m]+=o,n[m]+=o;const c=Kn(l);c&&(o-=Kn(l,(m,d)=>(f[d]/2+h[d])*m)/c)}gy(i,t,n)}yy(e,t,n)}function gy(e,t,n){const r=Nn(e,i=>Nn(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function yy(e,t,n){const r=e.length;if(r===1)return;const i=e.map(s=>s.flat()),a=i.map(s=>(Nn(s,u=>t[u])+zt(s,u=>n[u]))/2),o=Nn(a);for(let s=0;s<r;s++){const u=o-a[s];for(const l of i[s])t[l]+=u,n[l]+=u}}function eA(e,t,n){if(e===void 0&&t===by)return a1(en);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?Ms:en;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return tA(i);case"z":return nA(i);case"sum":return rA(i);case"appearance":return iA(i);case"inside-out":return a1(i)}return o1(Eg(e))}if(typeof e=="function")return(e.length===1?o1:aA)(e);if(Array.isArray(e))return oA(e);throw new Error(`invalid order: ${e}`)}}function tA(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function nA(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function rA(e){return Pu(e,(t,n,r,i)=>$f(On(t),a=>Kn(a,o=>r[o]),a=>i[a]))}function iA(e){return Pu(e,(t,n,r,i)=>$f(On(t),a=>n[F0(a,o=>r[o])],a=>i[a]))}function a1(e){return Pu(e,(t,n,r,i)=>{const a=On(t),o=$f(a,h=>n[F0(h,c=>r[c])],h=>i[h]),s=Xr(a,h=>Kn(h,c=>r[c]),h=>i[h]),u=[],l=[];let f=0;for(const h of o)f<0?(f+=s.get(h),u.push(h)):(f-=s.get(h),l.push(h));return l.reverse().concat(u)})}function o1(e){return t=>{const n=tt(t,e);return(r,i)=>en(n[r],n[i])}}function aA(e){return t=>(n,r)=>e(t[n],t[r])}function oA(e){return Pu(en,()=>e)}function Pu(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new xr(t(n,r,i,a).map((s,u)=>[s,u]));return(s,u)=>e(o.get(a[s]),o.get(a[u]))}}const sA={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class uA extends pt{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,z:s,curve:u,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:dc(n),optional:!0}},n,sA),this.z=s,this.curve=oy(u,l)}filter(t){return t}render(t,n,r,i,a){const{x1:o,y1:s,x2:u=o,y2:l=s}=r;return He("svg:g",a).call(Wt,this,i,a).call(Dt,this,n,0,0).call(f=>f.selectAll().data(Wg(t,[o,s,u,l],this,r)).enter().append("path").call(Vt,this).call(Hg,this,r).attr("d",x7().curve(this.curve).defined(h=>h>=0).x0(h=>o[h]).y0(h=>s[h]).x1(h=>u[h]).y1(h=>l[h]))).node()}}function lA(e,t){const{x:n=cu,...r}=uy(t);return new uA(e,my(dy({...r,x1:n,x2:void 0})))}const fA={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class cA extends pt{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:s,tension:u}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,fA),this.curve=sy(s,u),Qa(this,n)}project(t,n,r){this.curve!==gi&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:s,x2:u=o,y2:l=s}=r,{curve:f}=this;return He("svg:g",a).call(Wt,this,i,a).call(Dt,this,n).call(h=>h.selectAll().data(t).enter().append("path").call(Vt,this).attr("d",f===gi&&a.projection?hA(a.projection,o,s,u,l):c=>{const m=Vn(),d=f(m);return d.lineStart(),d.point(o[c],s[c]),d.point(u[c],l[c]),d.lineEnd(),m}).call(zn,this,r).call(_u,this,r,a)).node()}}function hA(e,t,n,r,i){const a=Xs(e);return t=cn(t),n=cn(n),r=cn(r),i=cn(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function qc(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...s}={}){return[n,r]=s1(t,n,r),[a,o]=s1(i,a,o),new cA(e,{...s,x1:n,x2:r,y1:a,y2:o})}function s1(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class vy extends pt{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:s=a,insetBottom:u=a,insetLeft:l=a,rx:f,ry:h}=r;this.insetTop=Ie(o),this.insetRight=Ie(s),this.insetBottom=Ie(u),this.insetLeft=Ie(l),this.rx=ot(f,"auto"),this.ry=ot(h,"auto")}render(t,n,r,i,a){const{rx:o,ry:s}=this;return He("svg:g",a).call(Wt,this,i,a).call(this._transform,this,n).call(u=>u.selectAll().data(t).enter().append("rect").call(Vt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(be,"rx",o).call(be,"ry",s).call(zn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:s}=this,u=n&&t?t.bandwidth():a-r-i;return Math.max(0,u-o-s)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:s}=this,u=n&&t?t.bandwidth():a-r-i;return Math.max(0,u-o-s)}}const dA={ariaLabel:"bar"};class mA extends vy{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,dA)}_transform(t,n,{y:r}){t.call(Dt,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return pi(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:s,insetBottom:u}=this;return pi(t)?o-i-a-s-u:l=>Math.max(0,Math.abs(r[l]-n[l])-s-u)}}function pA(e,t={}){return B9(t)||(t={...t,x:cu,y2:ct}),new mA(e,my(A2(dy(t))))}const bA={ariaLabel:"cell"};class gA extends vy{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,bA)}_transform(t,n){t.call(Dt,n,{},0,0)}}function wy(e,{x:t,y:n,...r}={}){return[t,n]=Ha(t,n),new gA(e,{...r,x:t,y:n})}const yA={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function vA(e){return e.sort===void 0&&e.reverse===void 0?r8({channel:"-r"},e):e}class wA extends pt{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:s=pa,frameAnchor:u}=n,[l,f]=mt(o,0),[h,c]=t8(s),[m,d]=mt(a,h==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:m,scale:"r",filter:lu,optional:!0},rotate:{value:l,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},vA(n),yA),this.r=d,this.rotate=f,this.symbol=c,this.frameAnchor=mu(u);const{channels:p}=this,{symbol:g}=p;if(g){const{fill:v,stroke:b}=p;g.hint={fill:v?v.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:l,r:f,rotate:h,symbol:c}=r,{r:m,rotate:d,symbol:p}=this,[g,v]=Xa(this,i),b=p===pa,w=f?void 0:m*m*Math.PI;return sc(m)&&(t=[]),He("svg:g",a).call(Wt,this,i,a).call(Dt,this,{x:u&&o,y:l&&s}).call(y=>y.selectAll().data(t).enter().append(b?"circle":"path").call(Vt,this).call(b?_=>{_.attr("cx",u?x=>u[x]:g).attr("cy",l?x=>l[x]:v).attr("r",f?x=>f[x]:m)}:_=>{_.attr("transform",Nc`translate(${u?x=>u[x]:g},${l?x=>l[x]:v})${h?x=>` rotate(${h[x]})`:d?` rotate(${d})`:""}`).attr("d",f&&c?x=>{const P=Vn();return c[x].draw(P,f[x]*f[x]*Math.PI),P}:f?x=>{const P=Vn();return p.draw(P,f[x]*f[x]*Math.PI),P}:c?x=>{const P=Vn();return c[x].draw(P,w),P}:(()=>{const x=Vn();return p.draw(x,w),x})())}).call(zn,this,r)).node()}}function Au(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ha(t,n)),new wA(e,{...r,x:t,y:n})}const _A={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class _y extends pt{constructor(t,n={}){const{x:r,y:i,z:a,curve:o,tension:s}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:dc(n),optional:!0}},n,_A),this.z=a,this.curve=sy(o,s),Qa(this,n)}filter(t){return t}project(t,n,r){this.curve!==gi&&super.project(t,n,r)}render(t,n,r,i,a){const{x:o,y:s}=r,{curve:u}=this;return He("svg:g",a).call(Wt,this,i,a).call(Dt,this,n).call(l=>l.selectAll().data(Wg(t,[o,s],this,r)).enter().append("path").call(Vt,this).call(Hg,this,r).call(ax,this,r,a).attr("d",u===gi&&a.projection?MA(a.projection,o,s):Vb().curve(u).defined(f=>f>=0).x(f=>o[f]).y(f=>s[f]))).node()}}function MA(e,t,n){const r=Xs(e);return t=cn(t),n=cn(n),i=>{let a=[];const o=[a];for(const s of i)s===-1?(a=[],o.push(a)):a.push([t[s],n[s]]);return r({type:"MultiLineString",coordinates:o})}}function xA(e,{x:t,y:n,...r}={}){return[t,n]=Ha(t,n),new _y(e,{...r,x:t,y:n})}function PA(e,{x:t=cu,y:n=ct,...r}={}){return new _y(e,uy({...r,x:t,y:n}))}const AA={ariaLabel:"tick",fill:null,stroke:"currentColor"};class SA extends pt{constructor(t,n,r){super(t,n,r,AA),Qa(this,r)}render(t,n,r,i,a){return He("svg:g",a).call(Wt,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Vt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(zn,this,r).call(_u,this,r,a)).node()}}class EA extends SA{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:s=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Ie(o),this.insetBottom=Ie(s)}_transform(t,n,{x:r}){t.call(Dt,n,{x:r},wt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function zc(e,{x:t=ct,...n}={}){return new EA(e,{...n,x:t})}function kA(e){let t,n,r,i;return{c(){t=A("main"),n=A("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),Re(t,"width",e[0]+"px"),Re(t,"margin","auto")},m(a,o){q(a,t,o),M(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&Re(t,"width",a[0]+"px")},i:Ee,o:Ee,d(a){a&&O(t),e[4](null)}}}function CA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;tn(()=>{const u=Yt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[zc(r,{x:l=>l})]});n(2,o.textContent="",o),o.appendChild(u)});function s(u){ft[u?"unshift":"push"](()=>{o=u,n(2,o)})}return e.$$set=u=>{"pattern"in u&&n(3,r=u.pattern),"width"in u&&n(0,i=u.width),"height"in u&&n(1,a=u.height)},[i,a,o,r,s]}class TA extends Xe{constructor(t){super(),je(this,t,CA,kA,Ye,{pattern:3,width:0,height:1})}}function $A(e){let t,n,r,i;return{c(){t=A("main"),n=A("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),Re(t,"width",e[0]+"px"),Re(t,"margin","auto")},m(a,o){q(a,t,o),M(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&Re(t,"width",a[0]+"px")},i:Ee,o:Ee,d(a){a&&O(t),e[4](null)}}}function DA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;tn(()=>{const u=r.map((f,h)=>h===0?0:f-r[h-1]),l=Yt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},marks:[pA(u,{x:(f,h)=>h+1,y:f=>f})]});n(2,o.textContent="",o),o.appendChild(l)});function s(u){ft[u?"unshift":"push"](()=>{o=u,n(2,o)})}return e.$$set=u=>{"pattern"in u&&n(3,r=u.pattern),"width"in u&&n(0,i=u.width),"height"in u&&n(1,a=u.height)},[i,a,o,r,s]}class NA extends Xe{constructor(t){super(),je(this,t,DA,$A,Ye,{pattern:3,width:0,height:1})}}function BA(e){let t,n,r,i;return{c(){t=A("main"),n=A("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),Re(t,"width",e[0]+"px"),Re(t,"margin","auto")},m(a,o){q(a,t,o),M(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&Re(t,"width",a[0]+"px")},i:Ee,o:Ee,d(a){a&&O(t),e[4](null)}}}function FA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;tn(()=>{const u=r.map((f,h)=>h===0?0:f-r[h-1]),l=Yt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[wy(u,{x:(f,h)=>h+1,fill:f=>f})]});n(2,o.textContent="",o),o.appendChild(l)});function s(u){ft[u?"unshift":"push"](()=>{o=u,n(2,o)})}return e.$$set=u=>{"pattern"in u&&n(3,r=u.pattern),"width"in u&&n(0,i=u.width),"height"in u&&n(1,a=u.height)},[i,a,o,r,s]}class LA extends Xe{constructor(t){super(),je(this,t,FA,BA,Ye,{pattern:3,width:0,height:1})}}function IA(e){let t,n,r,i;return{c(){t=A("main"),n=A("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),Re(t,"width",e[0]+"px"),Re(t,"margin","auto")},m(a,o){q(a,t,o),M(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&Re(t,"width",a[0]+"px")},i:Ee,o:Ee,d(a){a&&O(t),e[5](null)}}}function RA(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,s;tn(()=>{if(n(2,s.textContent="",s),!r)return;const l=Yt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[PA(r,{x:(f,h)=>h/i,y:f=>f})]});s.appendChild(l)});function u(l){ft[l?"unshift":"push"](()=>{s=l,n(2,s)})}return e.$$set=l=>{"audioData"in l&&n(3,r=l.audioData),"sampleRate"in l&&n(4,i=l.sampleRate),"width"in l&&n(0,a=l.width),"height"in l&&n(1,o=l.height)},[a,o,s,r,i,u]}class vr extends Xe{constructor(t){super(),je(this,t,RA,IA,Ye,{audioData:3,sampleRate:4,width:0,height:1})}}function OA(e){let t,n,r,i,a,o;return{c(){t=A("main"),n=A("audio"),r=N(),i=A("button"),i.textContent="play audio (p)",n.controls=!1},m(s,u){q(s,t,u),M(t,n),e[5](n),M(t,r),M(t,i),a||(o=Le(i,"click",e[1]),a=!0)},p:Ee,i:Ee,o:Ee,d(s){s&&O(t),e[5](null),a=!1,o()}}}function qA(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:a=-1}=t,o;const s=h=>{h&&o&&ac(h,i,o)},u=()=>{o&&(n(0,o.currentTime=0,o),o.play())},l=h=>{h.key==="p"&&u()};wi(()=>{document.querySelector("html").addEventListener("keyup",l),s(r)}),wv(()=>{document.querySelector("html").removeEventListener("keyup",l)});function f(h){ft[h?"unshift":"push"](()=>{o=h,n(0,o)})}return e.$$set=h=>{"audioData"in h&&n(2,r=h.audioData),"sampleRate"in h&&n(3,i=h.sampleRate),"currentTrialNumber"in h&&n(4,a=h.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&window.setTimeout(u,250),e.$$.dirty&4&&s(r)},[o,u,r,i,a,f]}class Gc extends Xe{constructor(t){super(),je(this,t,qA,OA,Ye,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const My=new Map,xy=new Map,zA=new Map,GA=new Map;function UA(e){return My.get(e)}function Py(e){return xy.get(e)}const HA=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],WA=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],VA=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of HA)My.set(e.pitch,e),xy.set(e.label,e);for(const e of WA)zA.set(e.number,e);for(const e of VA){const t=`${e.number}-${e.subnumber}`;GA.set(t,e)}var YA={value:()=>{}};function Ay(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Io(n)}function Io(e){this._=e}function jA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Io.prototype=Ay.prototype={constructor:Io,on:function(e,t){var n=this._,r=jA(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=XA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=u1(n[i],e.name,t);else if(t==null)for(i in n)n[i]=u1(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Io(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function XA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function u1(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=YA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var gf="http://www.w3.org/1999/xhtml";const l1={svg:"http://www.w3.org/2000/svg",xhtml:gf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Su(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),l1.hasOwnProperty(t)?{space:l1[t],local:e}:e}function ZA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gf&&t.documentElement.namespaceURI===gf?t.createElement(e):t.createElementNS(n,e)}}function KA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Sy(e){var t=Su(e);return(t.local?KA:ZA)(t)}function QA(){}function Uc(e){return e==null?QA:function(){return this.querySelector(e)}}function JA(e){typeof e!="function"&&(e=Uc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),u,l,f=0;f<o;++f)(u=a[f])&&(l=e.call(u,u.__data__,f,a))&&("__data__"in u&&(l.__data__=u.__data__),s[f]=l);return new Ut(r,this._parents)}function Ey(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eS(){return[]}function ky(e){return e==null?eS:function(){return this.querySelectorAll(e)}}function tS(e){return function(){var t=e.apply(this,arguments);return t==null?[]:Ey(t)}}function nS(e){typeof e=="function"?e=tS(e):e=ky(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ut(r,i)}function Cy(e){return function(){return this.matches(e)}}function Ty(e){return function(t){return t.matches(e)}}var rS=Array.prototype.find;function iS(e){return function(){return rS.call(this.children,e)}}function aS(){return this.firstElementChild}function oS(e){return this.select(e==null?aS:iS(typeof e=="function"?e:Ty(e)))}var sS=Array.prototype.filter;function uS(){return this.children}function lS(e){return function(){return sS.call(this.children,e)}}function fS(e){return this.selectAll(e==null?uS:lS(typeof e=="function"?e:Ty(e)))}function cS(e){typeof e!="function"&&(e=Cy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new Ut(r,this._parents)}function $y(e){return new Array(e.length)}function hS(){return new Ut(this._enter||this._groups.map($y),this._parents)}function Es(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Es.prototype={constructor:Es,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function dS(e){return function(){return e}}function mS(e,t,n,r,i,a){for(var o=0,s,u=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new Es(e,a[o]);for(;o<u;++o)(s=t[o])&&(i[o]=s)}function pS(e,t,n,r,i,a,o){var s,u,l=new Map,f=t.length,h=a.length,c=new Array(f),m;for(s=0;s<f;++s)(u=t[s])&&(c[s]=m=o.call(u,u.__data__,s,t)+"",l.has(m)?i[s]=u:l.set(m,u));for(s=0;s<h;++s)m=o.call(e,a[s],s,a)+"",(u=l.get(m))?(r[s]=u,u.__data__=a[s],l.delete(m)):n[s]=new Es(e,a[s]);for(s=0;s<f;++s)(u=t[s])&&l.get(c[s])===u&&(i[s]=u)}function bS(e){return e.__data__}function gS(e,t){if(!arguments.length)return Array.from(this,bS);var n=t?pS:mS,r=this._parents,i=this._groups;typeof e!="function"&&(e=dS(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var f=r[l],h=i[l],c=h.length,m=Ey(e.call(f,f&&f.__data__,l,r)),d=m.length,p=s[l]=new Array(d),g=o[l]=new Array(d),v=u[l]=new Array(c);n(f,h,p,g,v,m,t);for(var b=0,w=0,y,_;b<d;++b)if(y=p[b]){for(b>=w&&(w=b+1);!(_=g[w])&&++w<d;);y._next=_||null}}return o=new Ut(o,r),o._enter=s,o._exit=u,o}function yS(){return new Ut(this._exit||this._groups.map($y),this._parents)}function vS(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function wS(e){if(!(e instanceof Ut))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],l=n[s],f=u.length,h=o[s]=new Array(f),c,m=0;m<f;++m)(c=u[m]||l[m])&&(h[m]=c);for(;s<r;++s)o[s]=t[s];return new Ut(o,this._parents)}function _S(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function MS(e){e||(e=xS);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),l,f=0;f<s;++f)(l=o[f])&&(u[f]=l);u.sort(t)}return new Ut(i,this._parents).order()}function xS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function PS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function AS(){return Array.from(this)}function SS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function ES(){let e=0;for(const t of this)++e;return e}function kS(){return!this.node()}function CS(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function TS(e){return function(){this.removeAttribute(e)}}function $S(e){return function(){this.removeAttributeNS(e.space,e.local)}}function DS(e,t){return function(){this.setAttribute(e,t)}}function NS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function BS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function FS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function LS(e,t){var n=Su(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?$S:TS:typeof t=="function"?n.local?FS:BS:n.local?NS:DS)(n,t))}function Dy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function IS(e){return function(){this.style.removeProperty(e)}}function RS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function OS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function qS(e,t,n){return arguments.length>1?this.each((t==null?IS:typeof t=="function"?OS:RS)(e,t,n??"")):yi(this.node(),e)}function yi(e,t){return e.style.getPropertyValue(t)||Dy(e).getComputedStyle(e,null).getPropertyValue(t)}function zS(e){return function(){delete this[e]}}function GS(e,t){return function(){this[e]=t}}function US(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function HS(e,t){return arguments.length>1?this.each((t==null?zS:typeof t=="function"?US:GS)(e,t)):this.node()[e]}function Ny(e){return e.trim().split(/^|\s+/)}function Hc(e){return e.classList||new By(e)}function By(e){this._node=e,this._names=Ny(e.getAttribute("class")||"")}By.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Fy(e,t){for(var n=Hc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ly(e,t){for(var n=Hc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function WS(e){return function(){Fy(this,e)}}function VS(e){return function(){Ly(this,e)}}function YS(e,t){return function(){(t.apply(this,arguments)?Fy:Ly)(this,e)}}function jS(e,t){var n=Ny(e+"");if(arguments.length<2){for(var r=Hc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?YS:t?WS:VS)(n,t))}function XS(){this.textContent=""}function ZS(e){return function(){this.textContent=e}}function KS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function QS(e){return arguments.length?this.each(e==null?XS:(typeof e=="function"?KS:ZS)(e)):this.node().textContent}function JS(){this.innerHTML=""}function eE(e){return function(){this.innerHTML=e}}function tE(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function nE(e){return arguments.length?this.each(e==null?JS:(typeof e=="function"?tE:eE)(e)):this.node().innerHTML}function rE(){this.nextSibling&&this.parentNode.appendChild(this)}function iE(){return this.each(rE)}function aE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oE(){return this.each(aE)}function sE(e){var t=typeof e=="function"?e:Sy(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function uE(){return null}function lE(e,t){var n=typeof e=="function"?e:Sy(e),r=t==null?uE:typeof t=="function"?t:Uc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function fE(){var e=this.parentNode;e&&e.removeChild(this)}function cE(){return this.each(fE)}function hE(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dE(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mE(e){return this.select(e?dE:hE)}function pE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function bE(e){return function(t){e.call(this,t,this.__data__)}}function gE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function yE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function vE(e,t,n){return function(){var r=this.__on,i,a=bE(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function wE(e,t,n){var r=gE(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,f;u<l;++u)for(i=0,f=s[u];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=t?vE:yE,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Iy(e,t,n){var r=Dy(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function _E(e,t){return function(){return Iy(this,e,t)}}function ME(e,t){return function(){return Iy(this,e,t.apply(this,arguments))}}function xE(e,t){return this.each((typeof t=="function"?ME:_E)(e,t))}function*PE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var AE=[null];function Ut(e,t){this._groups=e,this._parents=t}function Ja(){return new Ut([[document.documentElement]],AE)}function SE(){return this}Ut.prototype=Ja.prototype={constructor:Ut,select:JA,selectAll:nS,selectChild:oS,selectChildren:fS,filter:cS,data:gS,enter:hS,exit:yS,join:vS,merge:wS,selection:SE,order:_S,sort:MS,call:PS,nodes:AS,node:SS,size:ES,empty:kS,each:CS,attr:LS,style:qS,property:HS,classed:jS,text:QS,html:nE,raise:iE,lower:oE,append:sE,insert:lE,remove:cE,clone:mE,datum:pE,on:wE,dispatch:xE,[Symbol.iterator]:PE};function Wc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ry(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function eo(){}var _a=.7,ks=1/_a,Jr="\\s*([+-]?\\d+)\\s*",Ma="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",pn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",EE=/^#([0-9a-f]{3,8})$/,kE=new RegExp("^rgb\\("+[Jr,Jr,Jr]+"\\)$"),CE=new RegExp("^rgb\\("+[pn,pn,pn]+"\\)$"),TE=new RegExp("^rgba\\("+[Jr,Jr,Jr,Ma]+"\\)$"),$E=new RegExp("^rgba\\("+[pn,pn,pn,Ma]+"\\)$"),DE=new RegExp("^hsl\\("+[Ma,pn,pn]+"\\)$"),NE=new RegExp("^hsla\\("+[Ma,pn,pn,Ma]+"\\)$"),f1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wc(eo,xa,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:c1,formatHex:c1,formatHsl:BE,formatRgb:h1,toString:h1});function c1(){return this.rgb().formatHex()}function BE(){return Oy(this).formatHsl()}function h1(){return this.rgb().formatRgb()}function xa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=EE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?d1(t):n===3?new kt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Po(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Po(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kE.exec(e))?new kt(t[1],t[2],t[3],1):(t=CE.exec(e))?new kt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=TE.exec(e))?Po(t[1],t[2],t[3],t[4]):(t=$E.exec(e))?Po(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=DE.exec(e))?b1(t[1],t[2]/100,t[3]/100,1):(t=NE.exec(e))?b1(t[1],t[2]/100,t[3]/100,t[4]):f1.hasOwnProperty(e)?d1(f1[e]):e==="transparent"?new kt(NaN,NaN,NaN,0):null}function d1(e){return new kt(e>>16&255,e>>8&255,e&255,1)}function Po(e,t,n,r){return r<=0&&(e=t=n=NaN),new kt(e,t,n,r)}function FE(e){return e instanceof eo||(e=xa(e)),e?(e=e.rgb(),new kt(e.r,e.g,e.b,e.opacity)):new kt}function yf(e,t,n,r){return arguments.length===1?FE(e):new kt(e,t,n,r??1)}function kt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Wc(kt,yf,Ry(eo,{brighter:function(e){return e=e==null?ks:Math.pow(ks,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?_a:Math.pow(_a,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:m1,formatHex:m1,formatRgb:p1,toString:p1}));function m1(){return"#"+bl(this.r)+bl(this.g)+bl(this.b)}function p1(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function bl(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function b1(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fn(e,t,n,r)}function Oy(e){if(e instanceof fn)return new fn(e.h,e.s,e.l,e.opacity);if(e instanceof eo||(e=xa(e)),!e)return new fn;if(e instanceof fn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new fn(o,s,u,e.opacity)}function qy(e,t,n,r){return arguments.length===1?Oy(e):new fn(e,t,n,r??1)}function fn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Wc(fn,qy,Ry(eo,{brighter:function(e){return e=e==null?ks:Math.pow(ks,e),new fn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?_a:Math.pow(_a,e),new fn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new kt(gl(e>=240?e-240:e+120,i,r),gl(e,i,r),gl(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function gl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zy=e=>()=>e;function LE(e,t){return function(n){return e+n*t}}function IE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function RE(e){return(e=+e)==1?Gy:function(t,n){return n-t?IE(t,n,e):zy(isNaN(t)?n:t)}}function Gy(e,t){var n=t-e;return n?LE(e,n):zy(isNaN(e)?t:e)}const vf=function e(t){var n=RE(t);function r(i,a){var o=n((i=yf(i)).r,(a=yf(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),l=Gy(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=e,r}(1);function Wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var wf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yl=new RegExp(wf.source,"g");function OE(e){return function(){return e}}function qE(e){return function(t){return e(t)+""}}function zE(e,t){var n=wf.lastIndex=yl.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(r=wf.exec(e))&&(i=yl.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:Wn(r,i)})),n=yl.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?qE(u[0].x):OE(t):(t=u.length,function(l){for(var f=0,h;f<t;++f)s[(h=u[f]).i]=h.x(l);return s.join("")})}var g1=180/Math.PI,_f={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Uy(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*g1,skewX:Math.atan(u)*g1,scaleX:o,scaleY:s}}var Ao;function GE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_f:Uy(t.a,t.b,t.c,t.d,t.e,t.f)}function UE(e){return e==null||(Ao||(Ao=document.createElementNS("http://www.w3.org/2000/svg","g")),Ao.setAttribute("transform",e),!(e=Ao.transform.baseVal.consolidate()))?_f:(e=e.matrix,Uy(e.a,e.b,e.c,e.d,e.e,e.f))}function Hy(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,f,h,c,m,d){if(l!==h||f!==c){var p=m.push("translate(",null,t,null,n);d.push({i:p-4,x:Wn(l,h)},{i:p-2,x:Wn(f,c)})}else(h||c)&&m.push("translate("+h+t+c+n)}function o(l,f,h,c){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Wn(l,f)})):f&&h.push(i(h)+"rotate("+f+r)}function s(l,f,h,c){l!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Wn(l,f)}):f&&h.push(i(h)+"skewX("+f+r)}function u(l,f,h,c,m,d){if(l!==h||f!==c){var p=m.push(i(m)+"scale(",null,",",null,")");d.push({i:p-4,x:Wn(l,h)},{i:p-2,x:Wn(f,c)})}else(h!==1||c!==1)&&m.push(i(m)+"scale("+h+","+c+")")}return function(l,f){var h=[],c=[];return l=e(l),f=e(f),a(l.translateX,l.translateY,f.translateX,f.translateY,h,c),o(l.rotate,f.rotate,h,c),s(l.skewX,f.skewX,h,c),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,h,c),l=f=null,function(m){for(var d=-1,p=c.length,g;++d<p;)h[(g=c[d]).i]=g.x(m);return h.join("")}}}var HE=Hy(GE,"px, ","px)","deg)"),WE=Hy(UE,", ",")",")"),vi=0,ji=0,Li=0,Wy=1e3,Cs,Xi,Ts=0,Dr=0,Eu=0,Pa=typeof performance=="object"&&performance.now?performance:Date,Vy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Vc(){return Dr||(Vy(VE),Dr=Pa.now()+Eu)}function VE(){Dr=0}function $s(){this._call=this._time=this._next=null}$s.prototype=Yy.prototype={constructor:$s,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Vc():+n)+(t==null?0:+t),!this._next&&Xi!==this&&(Xi?Xi._next=this:Cs=this,Xi=this),this._call=e,this._time=n,Mf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mf())}};function Yy(e,t,n){var r=new $s;return r.restart(e,t,n),r}function YE(){Vc(),++vi;for(var e=Cs,t;e;)(t=Dr-e._time)>=0&&e._call.call(null,t),e=e._next;--vi}function y1(){Dr=(Ts=Pa.now())+Eu,vi=ji=0;try{YE()}finally{vi=0,XE(),Dr=0}}function jE(){var e=Pa.now(),t=e-Ts;t>Wy&&(Eu-=t,Ts=e)}function XE(){for(var e,t=Cs,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Cs=n);Xi=e,Mf(r)}function Mf(e){if(!vi){ji&&(ji=clearTimeout(ji));var t=e-Dr;t>24?(e<1/0&&(ji=setTimeout(y1,e-Pa.now()-Eu)),Li&&(Li=clearInterval(Li))):(Li||(Ts=Pa.now(),Li=setInterval(jE,Wy)),vi=1,Vy(y1))}}function v1(e,t,n){var r=new $s;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var ZE=Ay("start","end","cancel","interrupt"),KE=[],jy=0,w1=1,xf=2,Ro=3,_1=4,Pf=5,Oo=6;function ku(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;QE(e,n,{name:t,index:r,group:i,on:ZE,tween:KE,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:jy})}function Yc(e,t){var n=an(e,t);if(n.state>jy)throw new Error("too late; already scheduled");return n}function _n(e,t){var n=an(e,t);if(n.state>Ro)throw new Error("too late; already running");return n}function an(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function QE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Yy(a,0,n.time);function a(l){n.state=w1,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var f,h,c,m;if(n.state!==w1)return u();for(f in r)if(m=r[f],m.name===n.name){if(m.state===Ro)return v1(o);m.state===_1?(m.state=Oo,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[f]):+f<t&&(m.state=Oo,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[f])}if(v1(function(){n.state===Ro&&(n.state=_1,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=xf,n.on.call("start",e,e.__data__,n.index,n.group),n.state===xf){for(n.state=Ro,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(m=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=m);i.length=h+1}}function s(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Pf,1),h=-1,c=i.length;++h<c;)i[h].call(e,f);n.state===Pf&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Oo,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function JE(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>xf&&r.state<Pf,r.state=Oo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function ek(e){return this.each(function(){JE(this,e)})}function tk(e,t){var n,r;return function(){var i=_n(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function nk(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=_n(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function rk(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=an(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?tk:nk)(n,e,t))}function jc(e,t,n){var r=e._id;return e.each(function(){var i=_n(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return an(i,r).value[t]}}function Xy(e,t){var n;return(typeof t=="number"?Wn:t instanceof xa?vf:(n=xa(t))?(t=n,vf):zE)(e,t)}function ik(e){return function(){this.removeAttribute(e)}}function ak(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ok(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function sk(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function uk(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function lk(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function fk(e,t){var n=Su(e),r=n==="transform"?WE:Xy;return this.attrTween(e,typeof t=="function"?(n.local?lk:uk)(n,r,jc(this,"attr."+e,t)):t==null?(n.local?ak:ik)(n):(n.local?sk:ok)(n,r,t))}function ck(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function hk(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function dk(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&hk(e,a)),n}return i._value=t,i}function mk(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ck(e,a)),n}return i._value=t,i}function pk(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Su(e);return this.tween(n,(r.local?dk:mk)(r,t))}function bk(e,t){return function(){Yc(this,e).delay=+t.apply(this,arguments)}}function gk(e,t){return t=+t,function(){Yc(this,e).delay=t}}function yk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bk:gk)(t,e)):an(this.node(),t).delay}function vk(e,t){return function(){_n(this,e).duration=+t.apply(this,arguments)}}function wk(e,t){return t=+t,function(){_n(this,e).duration=t}}function _k(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vk:wk)(t,e)):an(this.node(),t).duration}function Mk(e,t){if(typeof t!="function")throw new Error;return function(){_n(this,e).ease=t}}function xk(e){var t=this._id;return arguments.length?this.each(Mk(t,e)):an(this.node(),t).ease}function Pk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_n(this,e).ease=n}}function Ak(e){if(typeof e!="function")throw new Error;return this.each(Pk(this._id,e))}function Sk(e){typeof e!="function"&&(e=Cy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new Rn(r,this._parents,this._name,this._id)}function Ek(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],l=n[s],f=u.length,h=o[s]=new Array(f),c,m=0;m<f;++m)(c=u[m]||l[m])&&(h[m]=c);for(;s<r;++s)o[s]=t[s];return new Rn(o,this._parents,this._name,this._id)}function kk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ck(e,t,n){var r,i,a=kk(t)?Yc:_n;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function Tk(e,t){var n=this._id;return arguments.length<2?an(this.node(),n).on.on(e):this.each(Ck(n,e,t))}function $k(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Dk(){return this.on("end.remove",$k(this._id))}function Nk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Uc(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,l=a[o]=new Array(u),f,h,c=0;c<u;++c)(f=s[c])&&(h=e.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),l[c]=h,ku(l[c],t,n,c,l,an(f,n)));return new Rn(a,this._parents,t,n)}function Bk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ky(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],l=u.length,f,h=0;h<l;++h)if(f=u[h]){for(var c=e.call(f,f.__data__,h,u),m,d=an(f,n),p=0,g=c.length;p<g;++p)(m=c[p])&&ku(m,t,n,p,c,d);a.push(c),o.push(f)}return new Rn(a,o,t,n)}var Fk=Ja.prototype.constructor;function Lk(){return new Fk(this._groups,this._parents)}function Ik(e,t){var n,r,i;return function(){var a=yi(this,e),o=(this.style.removeProperty(e),yi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Zy(e){return function(){this.style.removeProperty(e)}}function Rk(e,t,n){var r,i=n+"",a;return function(){var o=yi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function Ok(e,t,n){var r,i,a;return function(){var o=yi(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),yi(this,e))),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}function qk(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var u=_n(this,e),l=u.on,f=u.value[a]==null?s||(s=Zy(t)):void 0;(l!==n||i!==f)&&(r=(n=l).copy()).on(o,i=f),u.on=r}}function zk(e,t,n){var r=(e+="")=="transform"?HE:Xy;return t==null?this.styleTween(e,Ik(e,r)).on("end.style."+e,Zy(e)):typeof t=="function"?this.styleTween(e,Ok(e,r,jc(this,"style."+e,t))).each(qk(this._id,e)):this.styleTween(e,Rk(e,r,t),n).on("end.style."+e,null)}function Gk(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Uk(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Gk(e,o,n)),r}return a._value=t,a}function Hk(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Uk(e,t,n??""))}function Wk(e){return function(){this.textContent=e}}function Vk(e){return function(){var t=e(this);this.textContent=t??""}}function Yk(e){return this.tween("text",typeof e=="function"?Vk(jc(this,"text",e)):Wk(e==null?"":e+""))}function jk(e){return function(t){this.textContent=e.call(this,t)}}function Xk(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&jk(i)),t}return r._value=e,r}function Zk(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xk(e))}function Kk(){for(var e=this._name,t=this._id,n=Ky(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var f=an(u,t);ku(u,e,n,l,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Rn(r,this._parents,e,n)}function Qk(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var l=_n(this,r),f=l.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),i===0&&a()})}var Jk=0;function Rn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ky(){return++Jk}var ur=Ja.prototype;Rn.prototype={constructor:Rn,select:Nk,selectAll:Bk,filter:Sk,merge:Ek,selection:Lk,transition:Kk,call:ur.call,nodes:ur.nodes,node:ur.node,size:ur.size,empty:ur.empty,each:ur.each,on:Tk,attr:fk,attrTween:pk,style:zk,styleTween:Hk,text:Yk,textTween:Zk,remove:Dk,tween:rk,delay:yk,duration:_k,ease:xk,easeVarying:Ak,end:Qk,[Symbol.iterator]:ur[Symbol.iterator]};function eC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var tC={time:null,delay:0,duration:250,ease:eC};function nC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rC(e){var t,n;e instanceof Rn?(t=e._id,e=e._name):(t=Ky(),(n=tC).time=Vc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&ku(u,e,t,l,o,n||nC(u,t));return new Rn(r,this._parents,e,t)}Ja.prototype.interrupt=ek;Ja.prototype.transition=rC;function Zi(e,t,n){this.k=e,this.x=t,this.y=n}Zi.prototype={constructor:Zi,scale:function(e){return e===1?this:new Zi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Zi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Zi.prototype;var iC={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,s="",u,l,f=0;for(;f<r.length;)o=i.indexOf(r.charAt(f++))<<18|i.indexOf(r.charAt(f++))<<12|(u=i.indexOf(r.charAt(f++)))<<6|(l=i.indexOf(r.charAt(f++))),s+=u===64?String.fromCharCode(o>>16&255):l===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return s},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(s){i(n.Uint8(new Uint8Array(s.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let s=0;s<a;s++)o[s]=i.charCodeAt(s);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(u){return this.pointer+=u,this.pointer},readInt:function(u){if(u=Math.min(u,this.data.byteLength-this.pointer),u<1)return-1;let l=0;if(u>1)for(let f=1;f<=u-1;f++)l+=this.data.getUint8(this.pointer)*Math.pow(256,u-f),this.pointer++;return l+=this.data.getUint8(this.pointer),this.pointer++,l},readStr:function(u){let l="";for(let f=1;f<=u;f++)l+=String.fromCharCode(this.readInt(1));return l},readIntVLV:function(){let u=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)u=this.readInt(1);else{let l=[];for(;this.data.getUint8(this.pointer)>=128;)l.push(this.readInt(1)-128);let f=this.readInt(1);for(let h=1;h<=l.length;h++)u+=l[l.length-h]*Math.pow(128,h);u+=f}return u}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),s=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=s):a.timeDivision=o*256+s;for(let u=1;u<=a.tracks;u++){a.track[u-1]={event:[]};let l=i.readInt(4);if(l===-1)break;if(l!==1297379947)return!1;i.readInt(4);let f=0,h=!1,c,m;for(;!h&&(f++,a.track[u-1].event[f-1]={},a.track[u-1].event[f-1].deltaTime=i.readIntVLV(),c=i.readInt(1),c!==-1);)if(c>=128?m=c:(c=m,i.movePointer(-1)),c===255){a.track[u-1].event[f-1].type=255,a.track[u-1].event[f-1].metaType=i.readInt(1);let d=i.readIntVLV();switch(a.track[u-1].event[f-1].metaType){case 47:case-1:h=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[u-1].event[f-1].data=i.readStr(d);break;case 33:case 89:case 81:a.track[u-1].event[f-1].data=i.readInt(d);break;case 84:a.track[u-1].event[f-1].data=[],a.track[u-1].event[f-1].data[0]=i.readInt(1),a.track[u-1].event[f-1].data[1]=i.readInt(1),a.track[u-1].event[f-1].data[2]=i.readInt(1),a.track[u-1].event[f-1].data[3]=i.readInt(1),a.track[u-1].event[f-1].data[4]=i.readInt(1);break;case 88:a.track[u-1].event[f-1].data=[],a.track[u-1].event[f-1].data[0]=i.readInt(1),a.track[u-1].event[f-1].data[1]=i.readInt(1),a.track[u-1].event[f-1].data[2]=i.readInt(1),a.track[u-1].event[f-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[u-1].event[f-1].data=this.customInterpreter(a.track[u-1].event[f-1].metaType,i,d)),(this.customInterpreter===null||a.track[u-1].event[f-1].data===!1)&&(i.readInt(d),a.track[u-1].event[f-1].data=i.readInt(d),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(c=c.toString(16).split(""),c[1]||c.unshift("0"),a.track[u-1].event[f-1].type=parseInt(c[0],16),a.track[u-1].event[f-1].channel=parseInt(c[1],16),a.track[u-1].event[f-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[u-1].event[f-1].data=this.customInterpreter(a.track[u-1].event[f-1].type,i,!1)),this.customInterpreter===null||a.track[u-1].event[f-1].data===!1){let d=i.readIntVLV();a.track[u-1].event[f-1].data=i.readInt(d),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[u-1].event[f-1].data=[],a.track[u-1].event[f-1].data[0]=i.readInt(1),a.track[u-1].event[f-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[u-1].event[f-1].data=i.readInt(1);break;case-1:h=!0;break;default:if(this.customInterpreter!==null&&(a.track[u-1].event[f-1].data=this.customInterpreter(a.track[u-1].event[f-1].metaType,i,!1)),this.customInterpreter===null||a.track[u-1].event[f-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(iC);function Xc(e){return 1/(e/60)}const Qy=[],aC=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of aC)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;Qy.push({type:e,dots:t,duration:n})}Qy.sort((e,t)=>e.duration-t.duration);class pe{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>Py(r).pitch),this.stringCount=n.length}}new pe("E stand.",["E2","A2","D3","G3","B3","E4"]),new pe("Drop D",["D2","A2","D3","G3","B3","E4"]),new pe("Drop C",["C2","G2","C3","F3","A3","D4"]),new pe("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new pe("1 down",["D2","G2","C3","F3","A3","D4"]),new pe("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new pe("2 down",["C2","F2","A#2","D#3","G3","C4"]),new pe("DADGAG",["D2","A2","D3","G3","A3","D4"]),new pe("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new pe("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new pe("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new pe("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new pe("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new pe("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new pe("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new pe("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new pe("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new pe("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new pe("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new pe("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new pe("E stand.",["E1","A1","D2","G2"]),new pe("Drop D",["D1","A1","D2","G2"]),new pe("1/2 down",["D#1","G#1","C#2","F#2"]),new pe("1 down",["D1","G1","C2","F2"]),new pe("1 1/2 down",["C#1","F#1","B1","E2"]),new pe("2 down",["C1","F1","A#1","D#2"]),new pe("B stand.",["B0","E1","A1","D2","G2"]),new pe("Drop A",["A0","D1","A1","D2","G2"]),new pe("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new pe("1 down",["A0","D1","G1","C2","F2"]),new pe("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new pe("2 down",["G0","C1","F1","A#1","D#2"]),new pe("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new pe("Drop E",["E0","A0","D1","A1","D2","G2"]),new pe("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new pe("1 down",["E1","A0","D1","G1","C2","F2"]),new pe("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new pe("2 down",["D0","G0","C1","F1","A#1","D#2"]),new pe("Hawaii",["G4","C4","E4","A4"]),new pe("Low G",["G3","C4","E4","A4"]),new pe("D-tuning",["A4","D4","F#4","B4"]),new pe("Canadian",["A3","D4","F#4","B4"]),new pe("Bariton",["D3","G3","B3","E4"]);var Ds=(e,t)=>Array(Math.abs(t)+1).join(e);function Jy(e){return e!==null&&typeof e=="object"&&typeof e.name=="string"}function ev(e){return e!==null&&typeof e=="object"&&typeof e.step=="number"&&typeof e.alt=="number"}var tv=[0,2,4,-1,1,3,5],nv=tv.map(e=>Math.floor(e*7/12));function rv(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=tv[t]+7*n;if(r===void 0)return[i*a];const o=r-nv[t]-4*n;return[i*a,i*o]}var oC=[3,0,4,1,5,2,6];function sC(e){const[t,n,r]=e,i=oC[uC(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+nv[i];return{step:i,alt:a,oct:o,dir:r}}function uC(e){const t=(e+1)%7;return t<0?7+t:t}var iv={empty:!0,name:"",pc:"",acc:""},M1=new Map,lC=e=>"CDEFGAB".charAt(e),fC=e=>e<0?Ds("b",-e):Ds("#",e),cC=e=>e[0]==="b"?-e.length:e.length;function Aa(e){const t=JSON.stringify(e),n=M1.get(t);if(n)return n;const r=typeof e=="string"?bC(e):ev(e)?Aa(gC(e)):Jy(e)?Aa(e.name):iv;return M1.set(t,r),r}var hC=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function dC(e){const t=hC.exec(e);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}function mC(e){return Aa(sC(e))}var pC=(e,t)=>(e%t+t)%t,vl=[0,2,4,5,7,9,11];function bC(e){const t=dC(e);if(t[0]===""||t[3]!=="")return iv;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=cC(r),s=i.length?+i:void 0,u=rv({step:a,alt:o,oct:s}),l=n+r+i,f=n+r,h=(vl[a]+o+120)%12,c=s===void 0?pC(vl[a]+o,12)-12*99:vl[a]+o+12*(s+1),m=c>=0&&c<=127?c:null,d=s===void 0?null:Math.pow(2,(c-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:h,coord:u,freq:d,height:c,letter:n,midi:m,name:l,oct:s,pc:f,step:a}}function gC(e){const{step:t,alt:n,oct:r}=e,i=lC(t);if(!i)return"";const a=i+fC(n);return r||r===0?a+r:a}var Af={empty:!0,name:"",acc:""},yC="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",vC="(AA|A|P|M|m|d|dd)([-+]?\\d+)",wC=new RegExp("^"+yC+"|"+vC+"$");function _C(e){const t=wC.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var x1={};function Ns(e){return typeof e=="string"?x1[e]||(x1[e]=MC(e)):ev(e)?Ns(PC(e)):Jy(e)?Ns(e.name):Af}var P1=[0,2,4,5,7,9,11],av="PMMPPMM";function MC(e){const t=_C(e);if(t[0]==="")return Af;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=av[i];if(a==="M"&&r==="P")return Af;const o=a==="M"?"majorable":"perfectable",s=""+n+r,u=n<0?-1:1,l=n===8||n===-8?n:u*(i+1),f=xC(o,r),h=Math.floor((Math.abs(n)-1)/7),c=u*(P1[i]+f+12*h),m=(u*(P1[i]+f)%12+12)%12,d=rv({step:i,alt:f,oct:h,dir:u});return{empty:!1,name:s,num:n,q:r,step:i,alt:f,dir:u,type:o,simple:l,semitones:c,chroma:m,coord:d,oct:h}}function xC(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function PC(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,s=i<0?"-":"",u=av[t]==="M"?"majorable":"perfectable";return s+o+AC(u,n)}function AC(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?Ds("A",t):Ds("d",e==="perfectable"?t:t+1)}function SC(e,t){const n=Aa(e),r=Array.isArray(t)?t:Ns(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return mC(a).name}function ov(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var tr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},sv=e=>Number(e).toString(2),A1=e=>parseInt(e,2),EC=/^[01]{12}$/;function uv(e){return EC.test(e)}var kC=e=>typeof e=="number"&&e>=0&&e<=4095,CC=e=>e&&uv(e.chroma),S1={[tr.chroma]:tr};function Zc(e){const t=uv(e)?e:kC(e)?sv(e):Array.isArray(e)?BC(e):CC(e)?e.chroma:tr.chroma;return S1[t]=S1[t]||NC(t)}var TC=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function $C(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(TC[n]);return t}function DC(e){const t=e.split("");return t.map((n,r)=>ov(r,t).join(""))}function NC(e){const t=A1(e),n=DC(e).map(A1).filter(a=>a>=2048).sort()[0],r=sv(n),i=$C(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function BC(e){if(e.length===0)return tr.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=Aa(e[r]),t.empty&&(t=Ns(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var FC=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],LC=FC;({...tr});var lv=[],qo={};function IC(e,t,n){const r=OC(e),i={...Zc(e),name:n||"",quality:r,intervals:e,aliases:t};lv.push(i),i.name&&(qo[i.name]=i),qo[i.setNum]=i,qo[i.chroma]=i,i.aliases.forEach(a=>RC(i,a))}function RC(e,t){qo[t]=e}function OC(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}LC.forEach(([e,t,n])=>IC(e.split(" "),n.split(" "),t));lv.sort((e,t)=>e.setNum-t.setNum);var qC=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],zC=qC;({...tr});var fv=[],zo={};function GC(e,t,n){const r=HC(e),i={...Zc(e),name:n||"",quality:r,intervals:e,aliases:t};fv.push(i),i.name&&(zo[i.name]=i),zo[i.setNum]=i,zo[i.chroma]=i,i.aliases.forEach(a=>UC(i,a))}function UC(e,t){zo[t]=e}function HC(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}zC.forEach(([e,t,n])=>GC(e.split(" "),n.split(" "),t));fv.sort((e,t)=>e.setNum-t.setNum);var WC=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],VC=WC,YC={...tr,intervals:[],aliases:[]},ra={};function jC(e){return ra[e]||YC}function XC(e,t,n=[]){const r={...Zc(e),name:t,intervals:e,aliases:n};return ra[r.name]=r,ra[r.setNum]=r,ra[r.chroma]=r,r.aliases.forEach(i=>ZC(r,i)),r}function ZC(e,t){ra[t]=e}VC.forEach(([e,t,...n])=>XC(e.split(" "),t,n));var Kc=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],E1={...tr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},KC=Kc.map(QC),Sf={};KC.forEach(e=>{Sf[e.name]=e,e.aliases.forEach(t=>{Sf[t]=e})});function cv(e){return typeof e=="string"?Sf[e.toLowerCase()]||E1:e&&e.name?cv(e.name):E1}function QC(e){const[t,n,r,i,a,o,s]=e,u=s?[s]:[],l=Number(n).toString(2);return{empty:!1,intervals:jC(i).intervals,modeNum:t,chroma:l,normalized:l,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:u}}function hv(e){return(t,n)=>{const r=cv(t);if(r.empty)return[];const i=ov(r.modeNum,e),a=r.intervals.map(o=>SC(n,o));return i.map((o,s)=>a[s]+o)}}hv(Kc.map(e=>e[4]));hv(Kc.map(e=>e[5]));class Un{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>Py(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="",s-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="",s-=12;const u=UA(i).name;n.set(i,{number:a,letterString:`${u}${o}`})}return[...n.values()].map(r=>r.letterString)}}new Un("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Un("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Un("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Un("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Un("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Un("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Un("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Un("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function JC(e,t=1){const n=qy(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>JC(e,.5));const eT=vf("black","steelblue");Array.from({length:12}).map((e,t)=>eT(t/11));function tT(e){let t,n,r,i;return{c(){t=A("main"),n=A("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),Re(t,"width",e[0]+"px"),Re(t,"margin","auto")},m(a,o){q(a,t,o),M(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&Re(t,"width",a[0]+"px")},i:Ee,o:Ee,d(a){a&&O(t),e[4](null)}}}function nT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;tn(()=>{const u=[...new Set(r)],l=u.map((h,c)=>c===0?0:h-u[c-1]),f=Yt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},x:{label:"beat"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[wy(l,{x:(h,c)=>c+1,fill:h=>h})]});n(2,o.textContent="",o),o.appendChild(f)});function s(u){ft[u?"unshift":"push"](()=>{o=u,n(2,o)})}return e.$$set=u=>{"pattern"in u&&n(3,r=u.pattern),"width"in u&&n(0,i=u.width),"height"in u&&n(1,a=u.height)},[i,a,o,r,s]}class wr extends Xe{constructor(t){super(),je(this,t,nT,tT,Ye,{pattern:3,width:0,height:1})}}function rT(e,t,n){const r=e.slice();return r[16]=t[n],r}function iT(e){let t;return{c(){t=A("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],$e(t,t.__value)},m(n,r){q(n,t,r)},p:Ee,d(n){n&&O(t)}}}function aT(e){let t,n,r,i,a,o,s,u,l,f,h,c,m,d,p,g,v,b,w,y,_,x,P,T,S,$,E,L=Et(["single note","single beat","only snare","beat 5"]),U=[];for(let D=0;D<4;D+=1)U[D]=iT(rT(e,L,D));return d=new Gc({props:{audioData:e[2],sampleRate:e[3]}}),g=new vr({props:{audioData:e[2],width:Ii,height:Ri}}),b=new TA({props:{pattern:e[4],width:Ii,height:Ri}}),y=new NA({props:{pattern:e[4],width:Ii,height:Ri}}),x=new LA({props:{pattern:e[4],width:Ii,height:Ri}}),T=new wr({props:{pattern:e[4],width:Ii,height:Ri}}),{c(){t=A("main"),n=A("h2"),n.textContent="Playground",r=N(),i=A("div"),a=A("label"),o=_e(`error mode:
      `),s=A("select");for(let D=0;D<4;D+=1)U[D].c();u=N(),l=A("label"),f=_e(`error severity (in seconds):
      `),h=A("input"),c=N(),m=A("div"),me(d.$$.fragment),p=N(),me(g.$$.fragment),v=N(),me(b.$$.fragment),w=N(),me(y.$$.fragment),_=N(),me(x.$$.fragment),P=N(),me(T.$$.fragment),e[0]===void 0&&ti(()=>e[5].call(s)),C(a,"class","svelte-1sot113"),C(h,"type","number"),C(h,"min","-0.5"),C(h,"max","0.5"),C(h,"step","0.01"),C(l,"class","svelte-1sot113"),C(m,"class","stimuli svelte-1sot113")},m(D,k){q(D,t,k),M(t,n),M(t,r),M(t,i),M(i,a),M(a,o),M(a,s);for(let z=0;z<4;z+=1)U[z]&&U[z].m(s,null);ei(s,e[0],!0),M(i,u),M(i,l),M(l,f),M(l,h),$e(h,e[1]),M(t,c),M(t,m),he(d,m,null),M(m,p),he(g,m,null),M(m,v),he(b,m,null),M(m,w),he(y,m,null),M(m,_),he(x,m,null),M(m,P),he(T,m,null),S=!0,$||(E=[Le(s,"change",e[5]),Le(h,"input",e[6])],$=!0)},p(D,[k]){k&1&&ei(s,D[0]),k&2&&bn(h.value)!==D[1]&&$e(h,D[1]);const z={};k&4&&(z.audioData=D[2]),k&8&&(z.sampleRate=D[3]),d.$set(z);const oe={};k&4&&(oe.audioData=D[2]),g.$set(oe);const ae={};k&16&&(ae.pattern=D[4]),b.$set(ae);const te={};k&16&&(te.pattern=D[4]),y.$set(te);const H={};k&16&&(H.pattern=D[4]),x.$set(H);const Y={};k&16&&(Y.pattern=D[4]),T.$set(Y)},i(D){S||(R(d.$$.fragment,D),R(g.$$.fragment,D),R(b.$$.fragment,D),R(y.$$.fragment,D),R(x.$$.fragment,D),R(T.$$.fragment,D),S=!0)},o(D){V(d.$$.fragment,D),V(g.$$.fragment,D),V(b.$$.fragment,D),V(y.$$.fragment,D),V(x.$$.fragment,D),V(T.$$.fragment,D),S=!1},d(D){D&&O(t),fr(U,D),de(d),de(g),de(b),de(y),de(x),de(T),$=!1,Ht(E)}}}let Ii=600,Ri=100,oT=120;const k1=4;function sT(e,t,n){let r="beat 5",i=0,a=Xc(oT),o=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const s=k1*a;let u=null,l,f=[];const h=async()=>{o=await Promise.all(o.map(async v=>({...v,times:v.beats.map(b=>a*(b-1)),timesOriginal:v.beats.map(b=>a*(b-1)),audioBuffer:await ic(v.sample)})))},c=(v="single note",b=0)=>{if(b===0)return o;console.log(`Adding error ${v} ${b}`);const w=m([o]),y=w.filter(P=>P.instrument==="snare")[0],_=w.filter(P=>P.instrument==="hihat")[0],x=w.filter(P=>P.instrument==="bass")[0];return v==="single note"?y.times[1]=y.timesOriginal[1]+b:v==="single beat"?(y.times[1]=y.timesOriginal[1]+b,_.times[6]=_.timesOriginal[6]+b):v==="only snare"?(y.times[0]=y.timesOriginal[0]+b,y.times[1]=y.timesOriginal[1]+b):v==="beat 5"&&(x.times[1]=x.timesOriginal[1]+b,_.times[4]=_.timesOriginal[4]+b),w},m=v=>{console.log(`concat ${v.length} patterns`);const b=v[0].map(w=>({...w,beats:[...w.beats],times:[...w.times],timesOriginal:[...w.timesOriginal]}));for(let w=1;w<v.length;w++){const y=v[w];for(const _ of y){const x=b.filter(P=>P.instrument===_.instrument)[0];x.beats=[...x.beats,..._.beats.map(P=>P+w*k1)],x.times=[...x.times,..._.times.map(P=>P+w*s)],x.timesOriginal=[...x.timesOriginal,..._.timesOriginal.map(P=>P+w*s)]}}return b},d=async(v,b)=>{if(!o[0].audioBuffer)return;const y=[c(v,b)],_=m(y);n(4,f=_.map(x=>x.times).flat().sort()),_.map(x=>x.times.map(P=>({time:P,instr:x.instrument}))).flat(1/0).sort((x,P)=>{x.time-P.time}),n(3,l=_[0].audioBuffer.sampleRate),n(2,u=_s(_,s*y.length+.1,l)),_.map(x=>{const P=_s([x],s*y.length+.1,l);return{instr:x.instrument,audio:P}})};wi(async()=>{await h(),d()});function p(){r=Ef(this),n(0,r)}function g(){i=bn(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&d(r,i)},[r,i,u,l,f,p,g]}class uT extends Xe{constructor(t){super(),je(this,t,sT,aT,Ye,{})}}function lT(e){let t,n,r,i;return{c(){t=A("main"),n=A("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px")},m(a,o){q(a,t,o),M(t,n),e[8](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i)},i:Ee,o:Ee,d(a){a&&O(t),e[8](null)}}}function fT(e,t,n){let{title:r=void 0}=t,{final:i=void 0}=t,{width:a=600}=t,{height:o=180}=t,{data:s}=t,{x:u=(c,m)=>m}=t,{y:l=c=>c}=t,f;tn(()=>{console.log({final:i}),n(2,f.textContent="",f);const c=Yt({title:r,width:a,height:o,x:{domain:[0,70]},marks:[xA(s,{x:u,y:l,stroke:"#ccc"}),Au(s,{x:u,y:l,fill:"#aaa",r:2,tip:!0}),As([0]),As([i],{stroke:"#88888888"}),Mu([i],{x:65,y:i,dy:-7,text:m=>`final: ${m.toFixed(3)}`})]});f.appendChild(c)});function h(c){ft[c?"unshift":"push"](()=>{f=c,n(2,f)})}return e.$$set=c=>{"title"in c&&n(3,r=c.title),"final"in c&&n(4,i=c.final),"width"in c&&n(0,a=c.width),"height"in c&&n(1,o=c.height),"data"in c&&n(5,s=c.data),"x"in c&&n(6,u=c.x),"y"in c&&n(7,l=c.y)},[a,o,f,r,i,s,u,l,h]}class dv extends Xe{constructor(t){super(),je(this,t,fT,lT,Ye,{title:3,final:4,width:0,height:1,data:5,x:6,y:7})}}var mv={exports:{}};(function(e,t){(function(n,r){r()})(Ni,function(){function n(l,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,f,h){var c=new XMLHttpRequest;c.open("GET",l),c.responseType="blob",c.onload=function(){u(c.response,f,h)},c.onerror=function(){console.error("could not download file")},c.send()}function i(l){var f=new XMLHttpRequest;f.open("HEAD",l,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ni=="object"&&Ni.global===Ni?Ni:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(l,f,h){var c=o.URL||o.webkitURL,m=document.createElement("a");f=f||l.name||"download",m.download=f,m.rel="noopener",typeof l=="string"?(m.href=l,m.origin===location.origin?a(m):i(m.href)?r(l,f,h):a(m,m.target="_blank")):(m.href=c.createObjectURL(l),setTimeout(function(){c.revokeObjectURL(m.href)},4e4),setTimeout(function(){a(m)},0))}:"msSaveOrOpenBlob"in navigator?function(l,f,h){if(f=f||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,h),f);else if(i(l))r(l,f,h);else{var c=document.createElement("a");c.href=l,c.target="_blank",setTimeout(function(){a(c)})}}:function(l,f,h,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof l=="string")return r(l,f,h);var m=l.type==="application/octet-stream",d=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||m&&d||s)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var w=g.result;w=p?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=w:location=w,c=null},g.readAsDataURL(l)}else{var v=o.URL||o.webkitURL,b=v.createObjectURL(l);c?c.location=b:location.href=b,c=null,setTimeout(function(){v.revokeObjectURL(b)},4e4)}});o.saveAs=u.saveAs=u,e.exports=u})})(mv);var cT=mv.exports;const C1=yg(cT);function hT(e){let t,n,r;return{c(){t=A("div"),C(t,"width",n=e[0]+"px"),C(t,"height",r=e[1]+"px")},m(i,a){q(i,t,a),e[6](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&C(t,"width",n),a&2&&r!==(r=i[1]+"px")&&C(t,"height",r)},i:Ee,o:Ee,d(i){i&&O(t),e[6](null)}}}function dT(e,t,n){let{data:r}=t,{domain:i}=t,{title:a=""}=t,{width:o=800}=t,{height:s=100}=t,u;tn(()=>{const f=Yt({width:o,height:s,marginLeft:70,marginRight:10,x:{label:a,domain:i},y:{axis:!1,type:"band"},marks:[zc(r,{x:h=>h}),Mu(r,{x:h=>h,dx:7,y:(h,c)=>c,text:(h,c)=>`P${c+1}`})]});n(2,u.textContent="",u),u.appendChild(f)});function l(f){ft[f?"unshift":"push"](()=>{u=f,n(2,u)})}return e.$$set=f=>{"data"in f&&n(3,r=f.data),"domain"in f&&n(4,i=f.domain),"title"in f&&n(5,a=f.title),"width"in f&&n(0,o=f.width),"height"in f&&n(1,s=f.height)},[o,s,u,r,i,a,l]}class mT extends Xe{constructor(t){super(),je(this,t,dT,hT,Ye,{data:3,domain:4,title:5,width:0,height:1})}}function pT(e){let t,n,r;return{c(){t=A("div"),C(t,"width",n=e[0]+"px"),C(t,"height",r=e[1]+"px")},m(i,a){q(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&C(t,"width",n),a&2&&r!==(r=i[1]+"px")&&C(t,"height",r)},i:Ee,o:Ee,d(i){i&&O(t),e[5](null)}}}function bT(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;tn(()=>{const l=r.map(h=>({encoding:h.encoding,...s(h.finals)})),f=Yt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:l.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[Au(l,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),qc(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Dc([0])]});n(2,o.textContent="",o),o.appendChild(f)});function s(l){const f=l.length,h=zs(l),d=1.96*(Is(l)/Math.sqrt(f)),p=h-d,g=h+d;return{mean:h,low:p,high:g}}function u(l){ft[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,s,u]}class gT extends Xe{constructor(t){super(),je(this,t,bT,pT,Ye,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function yT(e){let t,n,r;return{c(){t=A("div"),C(t,"width",n=e[0]+"px"),C(t,"height",r=e[1]+"px")},m(i,a){q(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&C(t,"width",n),a&2&&r!==(r=i[1]+"px")&&C(t,"height",r)},i:Ee,o:Ee,d(i){i&&O(t),e[5](null)}}}function vT(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;tn(()=>{const l=r.map(h=>({encoding:h.encoding,...s(h.trialCounts)})),f=Yt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:l.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[Au(l,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),qc(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Dc([0])]});n(2,o.textContent="",o),o.appendChild(f)});function s(l){const f=l.length,h=zs(l),d=1.96*(Is(l)/Math.sqrt(f)),p=h-d,g=h+d;return{mean:h,low:p,high:g}}function u(l){ft[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,s,u]}class wT extends Xe{constructor(t){super(),je(this,t,vT,yT,Ye,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function T1(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function _T(e,t,n,r,i,a){const o=new Float64Array(a),s=(a-1)/(i-r);for(let u=0;u<e.length;++u){const l=e[u],f=t(l,u,e),h=n(l,u,e);if(!(Number.isFinite(f)&&Number.isFinite(h)))continue;const c=(f-r)*s,m=Math.floor(c),d=m+1;0<=m&&d<a?(o[m]+=(d-c)*h,o[d]+=(c-m)*h):m===-1?o[d]+=(c-m)*h:d===a&&(o[m]+=(d-c)*h)}return o}function $1(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);MT(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,s=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:s}}function MT(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),s=.6318/n,u=1.997/n,l=Float64Array.of(-a*Math.cos(s),a*Math.sin(s),-a*Math.cos(-s),a*Math.sin(-s),-o*Math.cos(u),o*Math.sin(u),-o*Math.cos(-u),o*Math.sin(-u)),f=n*2.5066282746310007,h=Float64Array.of(i[0],i[1],0,0,0,0,0,0),c=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let m,d;for(d=2;d<8;d+=2){for(h[d]=l[d]*h[d-2]-l[d+1]*h[d-1],h[d+1]=l[d]*h[d-1]+l[d+1]*h[d-2],m=d-2;m>0;m-=2)h[m]+=l[d]*h[m-2]-l[d+1]*h[m-1],h[m+1]+=l[d]*h[m-1]+l[d+1]*h[m-2];for(m=0;m<=d;m+=2)h[m]+=i[d]*c[m]-i[d+1]*c[m+1],h[m+1]+=i[d]*c[m+1]+i[d+1]*c[m];for(c[d+2]=l[d]*c[d]-l[d+1]*c[d+1],c[d+3]=l[d]*c[d+1]+l[d+1]*c[d],m=d;m>0;m-=2)c[m]+=l[d]*c[m-2]-l[d+1]*c[m-1],c[m+1]+=l[d]*c[m-1]+l[d+1]*c[m-2]}for(d=0;d<4;++d)m=d<<1,t[d]=h[m]/f,e[d+1]=c[m+2]}function xT(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),s=i,u=PT){const l=r*2,f=r*3,h=r*4,c=r*n;let m,d;for(u(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),d=4,m=h;d<n;++d,m+=r)i[d]=e.b_causal[0]*t[m]+e.b_causal[1]*t[m-r]+e.b_causal[2]*t[m-l]+e.b_causal[3]*t[m-f]-e.a[1]*i[d-1]-e.a[2]*i[d-2]-e.a[3]*i[d-3]-e.a[4]*i[d-4];for(u(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),d=4,m=c-r*5;d<n;++d,m-=r)a[d]=e.b_anticausal[1]*t[m+r]+e.b_anticausal[2]*t[m+l]+e.b_anticausal[3]*t[m+f]+e.b_anticausal[4]*t[m+h]-e.a[1]*a[d-1]-e.a[2]*a[d-2]-e.a[3]*a[d-3]-e.a[4]*a[d-4];if(e.negative)for(d=0,m=0;d<n;++d,m+=r)s[m]=i[d]+a[n-d-1];else for(d=0,m=0;d<n;++d,m+=r)s[m]=Math.max(0,i[d]+a[n-d-1]);return s}function PT(e,t,n,r,i,a,o,s,u,l){const f=Math.abs(r)*n,h=r<0?f+r:0;let c,m,d;for(m=0;m<s;++m)for(l[m]=m<=a?i[m]:0,d=1;d<=s&&d<=m;++d)l[m]-=o[d]*l[m-d];for(d=0;d<s;++d)for(e[d]=0,m=1;m<=d;++m)c=h+r*m,c>=0&&c<f&&(e[d]+=l[d-m]*t[c]);const p=t[h];if(p>0)for(d=0;d<s;++d)e[d]+=l[d]*p}function AT(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const s=t(e[o],o,e);s!=null&&(i===void 0?s>=s&&(i=a=s):(s<i&&(i=s),s>a&&(a=s)))}return[i-n,a+n]}function ST(e,t){const n=e.map(t).filter(l=>l!=null&&l>=l);n.sort((l,f)=>l-f);const r=ET(n),i=D1(n,.25),a=D1(n,.75),o=n.length,s=(a-i)/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function ET(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const s=e[o];r=s-i,i+=r/++n,a+=r*(s-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function D1(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function kT(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=T1(t.x,v=>v),o=T1(t.weight,()=>1/e.length);let s=t.bandwidth??n*ST(e,a);const[u,l]=t.extent??AT(e,a,r*s),f=_T(e,a,o,u,l,i),h=(l-u)/(i-1),c=f.some(v=>v<0);let m=$1(s/h,c),d;function*p(v="x",b="y"){const w=g.grid(),y=1/h;for(let _=0;_<i;++_)yield{[v]:u+_*h,[b]:w[_]*y}}const g={[Symbol.iterator]:p,points:p,grid:()=>d||(d=xT(m,f,i)),extent:()=>[u,l],bandwidth(v){return arguments.length?(v!==s&&(s=v,d=null,m=$1(s/h,c)),g):s}};return g}function CT(e){let t,n,r,i;return{c(){t=A("main"),n=A("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px")},m(a,o){q(a,t,o),M(t,n),e[10](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i)},i:Ee,o:Ee,d(a){a&&O(t),e[10](null)}}}function TT(e,t,n){let r,{values:i}=t,{title:a=""}=t,{xLabel:o="some value"}=t,{xDomain:s=void 0}=t,{width:u=1e3}=t,{height:l=100}=t,{bandwidth:f=.25}=t,{bins:h=256}=t,{pad:c=4}=t,m;tn(()=>{const p=[...r.bandwidth(f)];n(2,m.textContent="",m);const g=Yt({width:u,height:l,title:a,style:{background:"none"},grid:!0,x:{label:o,domain:s},y:{label:"density",type:"linear"},marks:[lA(p,{x:"x",y:"y",fill:"#ccc"}),zc(i,{x:v=>v,strokeWidth:.5}),As([0])]});m.appendChild(g)});function d(p){ft[p?"unshift":"push"](()=>{m=p,n(2,m)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,a=p.title),"xLabel"in p&&n(5,o=p.xLabel),"xDomain"in p&&n(6,s=p.xDomain),"width"in p&&n(0,u=p.width),"height"in p&&n(1,l=p.height),"bandwidth"in p&&n(7,f=p.bandwidth),"bins"in p&&n(8,h=p.bins),"pad"in p&&n(9,c=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=kT(i,{bandwidth:f,pad:c,bins:h}))},[u,l,m,i,a,o,s,f,h,c,d]}class $T extends Xe{constructor(t){super(),je(this,t,TT,CT,Ye,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function DT(e){let t,n,r,i;return{c(){t=A("main"),n=A("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px")},m(a,o){q(a,t,o),M(t,n),e[13](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i)},i:Ee,o:Ee,d(a){a&&O(t),e[13](null)}}}function NT(e,t,n){let{title:r=""}=t,{data:i}=t,{x:a="x"}=t,{y:o="y"}=t,{tipTitle:s=null}=t,{xLabel:u=null}=t,{yLabel:l=null}=t,{xDomain:f=void 0}=t,{yDomain:h=void 0}=t,{grid:c=!1}=t,{width:m=300}=t,{height:d=300}=t,p;tn(()=>{console.log(i,a,o),n(2,p.textContent="",p);const v=Yt({width:m,height:d,title:r,grid:c,style:{background:"none"},x:{label:u||(typeof a=="string"?a:"x"),domain:f},y:{label:l||(typeof o=="string"?o:"y"),domain:h},marks:[Au(i,{x:a,y:o}),iy(i,m2({x:a,y:o,title:s})),qc({length:1},{x1:f[0],x2:f[1],y1:h[0],y2:h[1],stroke:"#ccc"})]});p.appendChild(v)});function g(v){ft[v?"unshift":"push"](()=>{p=v,n(2,p)})}return e.$$set=v=>{"title"in v&&n(3,r=v.title),"data"in v&&n(4,i=v.data),"x"in v&&n(5,a=v.x),"y"in v&&n(6,o=v.y),"tipTitle"in v&&n(7,s=v.tipTitle),"xLabel"in v&&n(8,u=v.xLabel),"yLabel"in v&&n(9,l=v.yLabel),"xDomain"in v&&n(10,f=v.xDomain),"yDomain"in v&&n(11,h=v.yDomain),"grid"in v&&n(12,c=v.grid),"width"in v&&n(0,m=v.width),"height"in v&&n(1,d=v.height)},[m,d,p,r,i,a,o,s,u,l,f,h,c,g]}class N1 extends Xe{constructor(t){super(),je(this,t,NT,DT,Ye,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function B1(e,t,n){const r=e.slice();return r[12]=t[n],r}function F1(e,t,n){const r=e.slice();return r[15]=t[n],r}function L1(e,t,n){const r=e.slice();return r[18]=t[n],r}function I1(e,t,n){const r=e.slice();return r[21]=t[n],r}function R1(e,t,n){const r=e.slice();return r[24]=t[n],r}function O1(e,t,n){const r=e.slice();return r[27]=t[n][0],r[28]=t[n][1],r}function q1(e){let t,n=e[27]+"",r,i,a=e[28].length+"",o,s;return{c(){t=A("p"),r=_e(n),i=_e(": "),o=_e(a),s=_e(" times")},m(u,l){q(u,t,l),M(t,r),M(t,i),M(t,o),M(t,s)},p(u,l){l&1&&n!==(n=u[27]+"")&&lt(r,n),l&1&&a!==(a=u[28].length+"")&&lt(o,a)},d(u){u&&O(t)}}}function z1(e){let t,n;return t=new $T({props:{title:`Density of final values for ${e[24][0]}`,values:e[24][1].map(X1),xLabel:"final values",xDomain:[-.2,.2],bandwidth:LT}}),{c(){me(t.$$.fragment)},m(r,i){he(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=`Density of final values for ${r[24][0]}`),i&2&&(a.values=r[24][1].map(X1)),t.$set(a)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){de(t,r)}}}function G1(e){let t,n=e[21].encoding+"",r,i,a,o;return a=new mT({props:{data:e[21].finals,title:e[21].encoding,domain:[0,e[2]]}}),{c(){t=A("b"),r=_e(n),i=N(),me(a.$$.fragment)},m(s,u){q(s,t,u),M(t,r),q(s,i,u),he(a,s,u),o=!0},p(s,u){(!o||u&8)&&n!==(n=s[21].encoding+"")&&lt(r,n);const l={};u&8&&(l.data=s[21].finals),u&8&&(l.title=s[21].encoding),u&4&&(l.domain=[0,s[2]]),a.$set(l)},i(s){o||(R(a.$$.fragment,s),o=!0)},o(s){V(a.$$.fragment,s),o=!1},d(s){s&&(O(t),O(i)),de(a,s)}}}function U1(e){let t,n=e[18]+"",r;return{c(){t=A("p"),r=_e(n)},m(i,a){q(i,t,a),M(t,r)},p(i,a){a&1&&n!==(n=i[18]+"")&&lt(r,n)},d(i){i&&O(t)}}}function H1(e){let t,n,r,i=e[15].demographics.internalPID+"",a,o,s=e[15].demographics.partID+"",u,l,f,h=Et(e[15].demographics.partFeedback.split(`
`)),c=[];for(let m=0;m<h.length;m+=1)c[m]=U1(L1(e,h,m));return{c(){t=A("div"),n=A("b"),r=_e("P"),a=_e(i),o=N(),u=_e(s),l=_e(`:
        `);for(let m=0;m<c.length;m+=1)c[m].c();f=N(),Re(t,"text-align","left")},m(m,d){q(m,t,d),M(t,n),M(n,r),M(n,a),M(t,o),M(t,u),M(t,l);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(t,null);M(t,f)},p(m,d){if(d&1&&i!==(i=m[15].demographics.internalPID+"")&&lt(a,i),d&1&&s!==(s=m[15].demographics.partID+"")&&lt(u,s),d&1){h=Et(m[15].demographics.partFeedback.split(`
`));let p;for(p=0;p<h.length;p+=1){const g=L1(m,h,p);c[p]?c[p].p(g,d):(c[p]=U1(g),c[p].c(),c[p].m(t,f))}for(;p<c.length;p+=1)c[p].d(1);c.length=h.length}},d(m){m&&O(t),fr(c,m)}}}function W1(e){let t,n;return t=new dv({props:{title:"P"+e[12].internalPID+" "+e[12].encoding,final:e[12].final,width:FT,height:120,data:e[12].data,x:RT,y:e[7]}}),{c(){me(t.$$.fragment)},m(r,i){he(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title="P"+r[12].internalPID+" "+r[12].encoding),i&2&&(a.final=r[12].final),i&2&&(a.data=r[12].data),t.$set(a)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){de(t,r)}}}function BT(e){let t,n,r,i,a,o,s,u,l,f,h,c=e[0].length+"",m,d,p=e[1].length+"",g,v,b=e[4].length+"",w,y,_,x,P,T,S,$,E,L,U,D,k,z,oe,ae,te,H,Y,W,j,se,fe,ue,K,Q,F,X,ee,B,Me,re,ce,ke,qe,We=Et(dr(e[0],V1).sort(Y1)),Be=[];for(let I=0;I<We.length;I+=1)Be[I]=q1(O1(e,We,I));let Pt=Et(dr(e[1],j1)),Ne=[];for(let I=0;I<Pt.length;I+=1)Ne[I]=z1(R1(e,Pt,I));const Gn=I=>V(Ne[I],1,1,()=>{Ne[I]=null});L=new N1({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),D=new N1({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),te=new gT({props:{stimuli:e[3]}}),se=new wT({props:{stimuli:e[3]}});let At=Et(e[3]),G=[];for(let I=0;I<At.length;I+=1)G[I]=G1(I1(e,At,I));const J=I=>V(G[I],1,1,()=>{G[I]=null});let ne=Et(e[0].filter(Z1)),Ae=[];for(let I=0;I<ne.length;I+=1)Ae[I]=H1(F1(e,ne,I));let Se=Et([...e[1]].sort(K1)),le=[];for(let I=0;I<Se.length;I+=1)le[I]=W1(B1(e,Se,I));const Te=I=>V(le[I],1,1,()=>{le[I]=null});return{c(){t=A("main"),n=A("h2"),n.textContent="Analysis",r=N(),i=A("div"),a=A("label"),o=_e(`Results JSONs and Prolific demographics CSV
      `),s=A("input"),u=N(),l=A("button"),l.textContent="export JSON",f=N(),h=A("div"),m=_e(c),d=_e(` participants completed -
    `),g=_e(p),v=_e(` tests -
    `),w=_e(b),y=_e(" filtered tests"),_=N(),x=A("div"),P=A("h3"),P.textContent="Encoding order",T=N();for(let I=0;I<Be.length;I+=1)Be[I].c();S=N(),$=A("div");for(let I=0;I<Ne.length;I+=1)Ne[I].c();E=N(),me(L.$$.fragment),U=N(),me(D.$$.fragment),k=N(),z=A("div"),oe=A("h3"),oe.textContent="Mean and CI of Final Values",ae=N(),me(te.$$.fragment),H=N(),Y=A("div"),W=A("h3"),W.textContent="Mean and CI of Trial Counts",j=N(),me(se.$$.fragment),fe=N(),ue=A("div"),K=A("h3"),K.textContent="Final Values for Each Stimulus and All Participants",Q=N();for(let I=0;I<G.length;I+=1)G[I].c();F=N(),X=A("div"),ee=A("h3"),ee.textContent="Feedback",B=N();for(let I=0;I<Ae.length;I+=1)Ae[I].c();Me=N(),re=A("div");for(let I=0;I<le.length;I+=1)le[I].c();C(s,"type","file"),C(s,"accept",".json,.csv"),s.multiple=!0},m(I,ie){q(I,t,ie),M(t,n),M(t,r),M(t,i),M(i,a),M(a,o),M(a,s),M(i,u),M(i,l),M(t,f),M(t,h),M(h,m),M(h,d),M(h,g),M(h,v),M(h,w),M(h,y),M(t,_),M(t,x),M(x,P),M(x,T);for(let we=0;we<Be.length;we+=1)Be[we]&&Be[we].m(x,null);M(t,S),M(t,$);for(let we=0;we<Ne.length;we+=1)Ne[we]&&Ne[we].m($,null);M(t,E),he(L,t,null),M(t,U),he(D,t,null),M(t,k),M(t,z),M(z,oe),M(z,ae),he(te,z,null),M(t,H),M(t,Y),M(Y,W),M(Y,j),he(se,Y,null),M(t,fe),M(t,ue),M(ue,K),M(ue,Q);for(let we=0;we<G.length;we+=1)G[we]&&G[we].m(ue,null);M(t,F),M(t,X),M(X,ee),M(X,B);for(let we=0;we<Ae.length;we+=1)Ae[we]&&Ae[we].m(X,null);M(t,Me),M(t,re);for(let we=0;we<le.length;we+=1)le[we]&&le[we].m(re,null);ce=!0,ke||(qe=[Le(s,"input",e[5]),Le(l,"click",e[6])],ke=!0)},p(I,[ie]){if((!ce||ie&1)&&c!==(c=I[0].length+"")&&lt(m,c),(!ce||ie&2)&&p!==(p=I[1].length+"")&&lt(g,p),(!ce||ie&16)&&b!==(b=I[4].length+"")&&lt(w,b),ie&1){We=Et(dr(I[0],V1).sort(Y1));let Z;for(Z=0;Z<We.length;Z+=1){const bt=O1(I,We,Z);Be[Z]?Be[Z].p(bt,ie):(Be[Z]=q1(bt),Be[Z].c(),Be[Z].m(x,null))}for(;Z<Be.length;Z+=1)Be[Z].d(1);Be.length=We.length}if(ie&2){Pt=Et(dr(I[1],j1));let Z;for(Z=0;Z<Pt.length;Z+=1){const bt=R1(I,Pt,Z);Ne[Z]?(Ne[Z].p(bt,ie),R(Ne[Z],1)):(Ne[Z]=z1(bt),Ne[Z].c(),R(Ne[Z],1),Ne[Z].m($,null))}for(nt(),Z=Pt.length;Z<Ne.length;Z+=1)Gn(Z);rt()}const we={};ie&1&&(we.data=I[0]),L.$set(we);const St={};ie&1&&(St.data=I[0]),D.$set(St);const on={};ie&8&&(on.stimuli=I[3]),te.$set(on);const to={};if(ie&8&&(to.stimuli=I[3]),se.$set(to),ie&12){At=Et(I[3]);let Z;for(Z=0;Z<At.length;Z+=1){const bt=I1(I,At,Z);G[Z]?(G[Z].p(bt,ie),R(G[Z],1)):(G[Z]=G1(bt),G[Z].c(),R(G[Z],1),G[Z].m(ue,null))}for(nt(),Z=At.length;Z<G.length;Z+=1)J(Z);rt()}if(ie&1){ne=Et(I[0].filter(Z1));let Z;for(Z=0;Z<ne.length;Z+=1){const bt=F1(I,ne,Z);Ae[Z]?Ae[Z].p(bt,ie):(Ae[Z]=H1(bt),Ae[Z].c(),Ae[Z].m(X,null))}for(;Z<Ae.length;Z+=1)Ae[Z].d(1);Ae.length=ne.length}if(ie&2){Se=Et([...I[1]].sort(K1));let Z;for(Z=0;Z<Se.length;Z+=1){const bt=B1(I,Se,Z);le[Z]?(le[Z].p(bt,ie),R(le[Z],1)):(le[Z]=W1(bt),le[Z].c(),R(le[Z],1),le[Z].m(re,null))}for(nt(),Z=Se.length;Z<le.length;Z+=1)Te(Z);rt()}},i(I){if(!ce){for(let ie=0;ie<Pt.length;ie+=1)R(Ne[ie]);R(L.$$.fragment,I),R(D.$$.fragment,I),R(te.$$.fragment,I),R(se.$$.fragment,I);for(let ie=0;ie<At.length;ie+=1)R(G[ie]);for(let ie=0;ie<Se.length;ie+=1)R(le[ie]);ce=!0}},o(I){Ne=Ne.filter(Boolean);for(let ie=0;ie<Ne.length;ie+=1)V(Ne[ie]);V(L.$$.fragment,I),V(D.$$.fragment,I),V(te.$$.fragment,I),V(se.$$.fragment,I),G=G.filter(Boolean);for(let ie=0;ie<G.length;ie+=1)V(G[ie]);le=le.filter(Boolean);for(let ie=0;ie<le.length;ie+=1)V(le[ie]);ce=!1},d(I){I&&O(t),fr(Be,I),fr(Ne,I),de(L),de(D),de(te),de(se),fr(G,I),fr(Ae,I),fr(le,I),ke=!1,Ht(qe)}}}const FT=800;let LT=.005,IT=20;const V1=e=>e.encodingOrder,Y1=(e,t)=>e[1].lenght-t[1].length,j1=e=>e.testType,X1=e=>e.final,Z1=e=>e.demographics.partFeedback.trim().length>0,K1=(e,t)=>e.final-t.final,RT=(e,t)=>t;function OT(e,t,n){let r,i,a,o,s=[],u=null;const l=async p=>{const g=[];for(const b of p.target.files)if(b.name.endsWith(".csv")){const w=await b.text();u=z5(w),console.log("p demo",u)}else{const w=await b.text();g.push(JSON.parse(w))}const v=dr(g,b=>b.demographics.partID);console.log(`${v.length} participants`,v),n(0,s=g.filter(b=>b.studyStep==="feedback").map((b,w)=>({...b,demographics:{...b.demographics,internalPID:w+1},prolificDemogr:u.filter(y=>y["Participant id"]===b.demographics.partID)[0],finalAudio:b.tests.filter(y=>y.encoding.startsWith("audio"))[0].final,finalColor:b.tests.filter(y=>y.encoding.startsWith("color"))[0].final,finalWaveform:b.tests.filter(y=>y.encoding.startsWith("waveform"))[0].final,encodingOrder:b.tests.map(y=>y.encoding).join(", ")})).filter(b=>b.prolificDemogr!==void 0)),console.log("participants",s)},f=p=>{if(p.lenght===0)return[];const g=(b,w=5)=>{const y=Math.floor(b/w)*w;return`${y}-${y+w-1}`},v=[];for(const b of p)for(const[w,y]of b.tests.entries()){let _=y.encoding;v.push({...b.demographics,partAge:b.demographics.partAge?b.demographics.partAge:g(b.prolificDemogr.Age,10),partSex:b.demographics.partGender?b.demographics.partGender:b.prolificDemogr.Sex,countryBirth:b.prolificDemogr["Country of birth"],countryResidence:b.prolificDemogr["Country of residence"],prolificApprovals:b.prolificDemogr["Total approvals"],...y,date:b.date,testType:_,testOrder:w})}return console.log("tests",v),v},h=(p,g)=>p.filter(v=>v.final<g),c=p=>p.length===0?[]:dr(p,v=>v.testType).map(([v,b])=>{const w=b.map(y=>y.final);return{encoding:v,testType:v,finals:w,finalMean:zs(w),finalVar:Tf(w),trialCounts:b.map(y=>y.trialCount)}}),m=()=>{const p=JSON.stringify(s,void 0,2),g=new Blob([p],{type:"text/plain;charset=utf-8"});C1(g,"participants.json");const v=JSON.stringify(r,void 0,2),b=new Blob([v],{type:"text/plain;charset=utf-8"});C1(b,"tests.json")},d=p=>Math.abs(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=f(s)),e.$$.dirty&2&&n(4,i=h(r,IT)),e.$$.dirty&2&&n(3,a=c(r)),e.$$.dirty&2&&n(2,o=zt(r.map(p=>Math.abs(p.final)))),e.$$.dirty&2&&console.log("tests by enc",dr(r,p=>p.testType))},[s,r,o,a,i,l,m,d]}class qT extends Xe{constructor(t){super(),je(this,t,OT,BT,Ye,{})}}function Oe(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}Oe.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};Oe.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};Oe.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};Oe.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=pv(0,e.length-1);return this.activate(e[t]),this};Oe.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=pv(0,e.length-1);this.activate(e[t])};Oe.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};Oe.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};Oe.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};Oe.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Oe.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};Oe.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};Oe.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};Oe.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};Oe.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};Oe.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};Oe.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};Oe.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};Oe.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};Oe.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};Oe.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};Oe.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const Qc=function(){};Qc.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};Qc.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};Oe.prototype.checkErr=new Qc;function pv(e,t){return Math.floor(Math.random()*(t-e+1))+e}function _r(e,t){return new URLSearchParams(e.location.search).get(t)}function zT(e){let t,n,r,i,a,o,s;return{c(){t=A("main"),n=A("audio"),r=N(),i=A("button"),a=_e(e[0]),n.controls=!1},m(u,l){q(u,t,l),M(t,n),e[5](n),M(t,r),M(t,i),M(i,a),o||(s=Le(i,"click",e[2]),o=!0)},p(u,[l]){l&1&&lt(a,u[0])},i:Ee,o:Ee,d(u){u&&O(t),e[5](null),o=!1,s()}}}function GT(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:a="play audio"}=t,o=null,s;const u=(h,c)=>{c&&s&&(o=y9(c,h),ac(o,c.sampleRate,s))};wi(()=>u(r,i));const l=async()=>{s&&(n(1,s.currentTime=0,s),s.play())};function f(h){ft[h?"unshift":"push"](()=>{s=h,n(1,s)})}return e.$$set=h=>{"pattern"in h&&n(3,r=h.pattern),"cachedAudio"in h&&n(4,i=h.cachedAudio),"label"in h&&n(0,a=h.label)},[a,s,l,r,i,f]}class Zn extends Xe{constructor(t){super(),je(this,t,GT,zT,Ye,{pattern:3,cachedAudio:4,label:0})}}function UT(e){let t,n,r,i,a,o;return{c(){t=A("main"),n=A("audio"),r=N(),i=A("button"),i.textContent="play audio",n.controls=!1},m(s,u){q(s,t,u),M(t,n),e[4](n),M(t,r),M(t,i),a||(o=Le(i,"click",e[1]),a=!0)},p:Ee,i:Ee,o:Ee,d(s){s&&O(t),e[4](null),a=!1,o()}}}function HT(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,a;const o=l=>{l&&a&&ac(l,i,a)};wi(()=>o(r));const s=()=>{a&&(n(0,a.currentTime=0,a),a.play())};function u(l){ft[l?"unshift":"push"](()=>{a=l,n(0,a)})}return e.$$set=l=>{"audioData"in l&&n(2,r=l.audioData),"sampleRate"in l&&n(3,i=l.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&o(r)},[a,s,r,i,u]}class Bs extends Xe{constructor(t){super(),je(this,t,HT,UT,Ye,{audioData:2,sampleRate:3})}}function Q1(e){let t;return{c(){t=A("div"),t.innerHTML=`<p class="svelte-rz4e1l">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-rz4e1l">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-rz4e1l">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-rz4e1l">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){q(n,t,r)},d(n){n&&O(t)}}}function J1(e){let t,n,r,i,a,o,s,u,l;return i=new Zn({props:{pattern:[.1,.6,1.1],cachedAudio:e[14][2].audioBuffer}}),{c(){t=A("div"),n=A("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=N(),me(i.$$.fragment),a=N(),o=A("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",s=N(),u=A("a"),u.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",C(n,"class","svelte-rz4e1l"),C(o,"class","svelte-rz4e1l"),C(u,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(f,h){q(f,t,h),M(t,n),M(t,r),he(i,t,null),M(t,a),M(t,o),M(t,s),M(t,u),l=!0},p(f,h){const c={};h[0]&16384&&(c.cachedAudio=f[14][2].audioBuffer),i.$set(c)},i(f){l||(R(i.$$.fragment,f),l=!0)},o(f){V(i.$$.fragment,f),l=!1},d(f){f&&O(t),de(i)}}}function e0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m,d,p,g,v,b;return{c(){t=A("div"),n=A("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=N(),i=A("div"),a=A("button"),a.textContent="+",o=N(),s=A("button"),s.textContent="-",u=N(),l=Go("svg"),f=Go("rect"),p=N(),g=A("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,C(n,"class","svelte-rz4e1l"),C(f,"width",h=e[0]*.52),C(f,"height",c=e[22]*2),C(f,"fill","#ccc"),C(f,"rx","8"),C(l,"width",m=e[0]*.52+"px"),C(l,"height",d=e[22]*2+"px"),C(g,"class","svelte-rz4e1l")},m(w,y){q(w,t,y),M(t,n),M(t,r),M(t,i),M(i,a),M(i,o),M(i,s),M(t,u),M(t,l),M(l,f),M(t,p),M(t,g),v||(b=[Le(a,"click",e[24]),Le(s,"click",e[25])],v=!0)},p(w,y){y[0]&1&&h!==(h=w[0]*.52)&&C(f,"width",h),y[0]&4194304&&c!==(c=w[22]*2)&&C(f,"height",c),y[0]&1&&m!==(m=w[0]*.52+"px")&&C(l,"width",m),y[0]&4194304&&d!==(d=w[22]*2+"px")&&C(l,"height",d)},d(w){w&&O(t),v=!1,Ht(b)}}}function t0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m,d,p,g,v,b,w;return c=new Zn({props:{pattern:[.1],cachedAudio:e[14][0].audioBuffer,label:"hi-hat"}}),d=new Zn({props:{pattern:[.1],cachedAudio:e[14][1].audioBuffer,label:"snare drum"}}),g=new Zn({props:{pattern:[.1],cachedAudio:e[14][2].audioBuffer,label:"bass drum"}}),{c(){t=A("div"),n=A("div"),n.innerHTML=`<p class="svelte-rz4e1l">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-rz4e1l">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-rz4e1l">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played together will still be played at
          the same time, but this time will be either too early or too late.
          Notes after the mistake will also be affected and be early/late, such
          that only one time interval is shorter/longer than supposed.</p>`,r=_e(`
      This is what the pattern looks like in sheet music:
      `),i=A("div"),a=A("img"),u=N(),l=A("div"),f=A("span"),f.textContent="Click to hear the different sounds:",h=N(),me(c.$$.fragment),m=N(),me(d.$$.fragment),p=N(),me(g.$$.fragment),v=_e(`
      This is what the full, correctly played pattern sounds like:
      `),b=A("div"),b.innerHTML='<audio src="drum-pattern-correct-once.wav" controls=""></audio>',C(a,"width",o=e[0]+"px"),E0(a.src,s="drum-pattern-labels3.png")||C(a,"src",s),C(a,"alt","drum pattern as sheet music"),Re(l,"display","grid"),Re(l,"grid-template-columns","repeat(4,max-content)"),Re(l,"gap","10px"),Re(l,"align-items","center")},m(y,_){q(y,t,_),M(t,n),M(t,r),M(t,i),M(i,a),M(t,u),M(t,l),M(l,f),M(l,h),he(c,l,null),M(l,m),he(d,l,null),M(l,p),he(g,l,null),M(t,v),M(t,b),w=!0},p(y,_){(!w||_[0]&1&&o!==(o=y[0]+"px"))&&C(a,"width",o);const x={};_[0]&16384&&(x.cachedAudio=y[14][0].audioBuffer),c.$set(x);const P={};_[0]&16384&&(P.cachedAudio=y[14][1].audioBuffer),d.$set(P);const T={};_[0]&16384&&(T.cachedAudio=y[14][2].audioBuffer),g.$set(T)},i(y){w||(R(c.$$.fragment,y),R(d.$$.fragment,y),R(g.$$.fragment,y),w=!0)},o(y){V(c.$$.fragment,y),V(d.$$.fragment,y),V(g.$$.fragment,y),w=!1},d(y){y&&O(t),de(c),de(d),de(g)}}}function n0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m,d,p,g,v,b,w,y,_,x,P,T,S,$,E,L,U;return{c(){t=A("div"),n=A("p"),n.textContent="Please answer the following questions about yourself:",r=N(),i=A("label"),a=A("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=N(),s=A("select"),u=A("option"),u.textContent="none",l=A("option"),l.textContent="high school",f=A("option"),f.textContent="bachelor",h=A("option"),h.textContent="master",c=A("option"),c.textContent="phd",m=N(),d=A("label"),p=A("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=N(),v=A("input"),b=N(),w=A("label"),y=A("span"),y.textContent="For how many years do you roughly play it/them?",_=N(),x=A("input"),P=N(),T=A("label"),S=A("span"),S.textContent=`How many years of experience do you have with information
          visualization?`,$=N(),E=A("input"),C(n,"class","svelte-rz4e1l"),u.__value="none",$e(u,u.__value),l.__value="highs",$e(l,l.__value),f.__value="bachelor",$e(f,f.__value),h.__value="master",$e(h,h.__value),c.__value="phd",$e(c,c.__value),e[4]===void 0&&ti(()=>e[26].call(s)),C(i,"class","svelte-rz4e1l"),C(v,"type","text"),C(v,"placeholder","free text"),C(d,"class","svelte-rz4e1l"),C(x,"type","number"),C(x,"min","0"),C(x,"step","1"),C(w,"class","svelte-rz4e1l"),C(E,"type","number"),C(E,"min","0"),C(E,"step","1"),C(T,"class","svelte-rz4e1l"),C(t,"class","demo-form svelte-rz4e1l")},m(D,k){q(D,t,k),M(t,n),M(t,r),M(t,i),M(i,a),M(i,o),M(i,s),M(s,u),M(s,l),M(s,f),M(s,h),M(s,c),ei(s,e[4],!0),M(t,m),M(t,d),M(d,p),M(d,g),M(d,v),$e(v,e[5]),M(t,b),M(t,w),M(w,y),M(w,_),M(w,x),$e(x,e[6]),M(t,P),M(t,T),M(T,S),M(T,$),M(T,E),$e(E,e[7]),L||(U=[Le(s,"change",e[26]),Le(v,"input",e[27]),Le(x,"input",e[28]),Le(E,"input",e[29])],L=!0)},p(D,k){k[0]&16&&ei(s,D[4]),k[0]&32&&v.value!==D[5]&&$e(v,D[5]),k[0]&64&&bn(x.value)!==D[6]&&$e(x,D[6]),k[0]&128&&bn(E.value)!==D[7]&&$e(E,D[7])},d(D){D&&O(t),L=!1,Ht(U)}}}function r0(e){let t,n,r=e[10]&&i0(e);return{c(){r&&r.c(),t=Sa()},m(i,a){r&&r.m(i,a),q(i,t,a),n=!0},p(i,a){i[10]?r?(r.p(i,a),a[0]&1024&&R(r,1)):(r=i0(i),r.c(),R(r,1),r.m(t.parentNode,t)):r&&(nt(),V(r,1,1,()=>{r=null}),rt())},i(i){n||(R(r),n=!0)},o(i){V(r),n=!1},d(i){i&&O(t),r&&r.d(i)}}}function i0(e){let t,n,r=e[3]+1+"",i,a,o=e[1].length+"",s,u,l,f,h,c,m,d,p=e[9]+1+"",g,v,b,w,y,_;const x=[VT,WT],P=[];function T(S,$){return S[13]==="audio"?0:S[12]===!1?1:-1}return~(b=T(e))&&(w=P[b]=x[b](e)),{c(){t=A("p"),n=_e("Test number "),i=_e(r),a=_e(" of "),s=_e(o),u=N(),l=A("p"),l.innerHTML="The <b>5th beat</b> with a <b>hi-hat and a bass</b> note is shifted.",f=N(),h=A("p"),h.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,c=N(),m=A("p"),d=_e("Trial number "),g=_e(p),v=N(),w&&w.c(),y=Sa(),C(t,"class","svelte-rz4e1l"),C(l,"class","svelte-rz4e1l"),C(h,"class","svelte-rz4e1l"),C(m,"class","svelte-rz4e1l")},m(S,$){q(S,t,$),M(t,n),M(t,i),M(t,a),M(t,s),q(S,u,$),q(S,l,$),q(S,f,$),q(S,h,$),q(S,c,$),q(S,m,$),M(m,d),M(m,g),q(S,v,$),~b&&P[b].m(S,$),q(S,y,$),_=!0},p(S,$){(!_||$[0]&8)&&r!==(r=S[3]+1+"")&&lt(i,r),(!_||$[0]&2)&&o!==(o=S[1].length+"")&&lt(s,o),(!_||$[0]&512)&&p!==(p=S[9]+1+"")&&lt(g,p);let E=b;b=T(S),b===E?~b&&P[b].p(S,$):(w&&(nt(),V(P[E],1,1,()=>{P[E]=null}),rt()),~b?(w=P[b],w?w.p(S,$):(w=P[b]=x[b](S),w.c()),R(w,1),w.m(y.parentNode,y)):w=null)},i(S){_||(R(w),_=!0)},o(S){V(w),_=!1},d(S){S&&(O(t),O(u),O(l),O(f),O(h),O(c),O(m),O(v),O(y)),~b&&P[b].d(S)}}}function WT(e){let t,n,r,i=(e[13]==="waveform"||So)&&a0(e),a=(e[13]==="color"||So)&&o0(e);return{c(){i&&i.c(),t=N(),a&&a.c(),n=Sa()},m(o,s){i&&i.m(o,s),q(o,t,s),a&&a.m(o,s),q(o,n,s),r=!0},p(o,s){o[13]==="waveform"||So?i?(i.p(o,s),s[0]&8192&&R(i,1)):(i=a0(o),i.c(),R(i,1),i.m(t.parentNode,t)):i&&(nt(),V(i,1,1,()=>{i=null}),rt()),o[13]==="color"||So?a?(a.p(o,s),s[0]&8192&&R(a,1)):(a=o0(o),a.c(),R(a,1),a.m(n.parentNode,n)):a&&(nt(),V(a,1,1,()=>{a=null}),rt())},i(o){r||(R(i),R(a),r=!0)},o(o){V(i),V(a),r=!1},d(o){o&&(O(t),O(n)),i&&i.d(o),a&&a.d(o)}}}function VT(e){let t,n,r,i,a,o,s,u,l,f,h,c,m;return i=new Bs({props:{audioData:e[16],sampleRate:e[18]}}),o=new Bs({props:{audioData:e[17],sampleRate:e[18]}}),c=new Gc({props:{audioData:e[15],sampleRate:e[18],currentTrialNumber:e[9]}}),{c(){t=A("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=N(),r=A("div"),me(i.$$.fragment),a=N(),me(o.$$.fragment),s=N(),u=A("div"),u.textContent="Example for early",l=N(),f=A("div"),f.textContent="Example for late",h=N(),me(c.$$.fragment),C(t,"class","svelte-rz4e1l"),C(u,"class","svelte-rz4e1l"),C(f,"class","svelte-rz4e1l"),C(r,"class","vis-example svelte-rz4e1l")},m(d,p){q(d,t,p),q(d,n,p),q(d,r,p),he(i,r,null),M(r,a),he(o,r,null),M(r,s),M(r,u),M(r,l),M(r,f),q(d,h,p),he(c,d,p),m=!0},p(d,p){const g={};p[0]&65536&&(g.audioData=d[16]),p[0]&262144&&(g.sampleRate=d[18]),i.$set(g);const v={};p[0]&131072&&(v.audioData=d[17]),p[0]&262144&&(v.sampleRate=d[18]),o.$set(v);const b={};p[0]&32768&&(b.audioData=d[15]),p[0]&262144&&(b.sampleRate=d[18]),p[0]&512&&(b.currentTrialNumber=d[9]),c.$set(b)},i(d){m||(R(i.$$.fragment,d),R(o.$$.fragment,d),R(c.$$.fragment,d),m=!0)},o(d){V(i.$$.fragment,d),V(o.$$.fragment,d),V(c.$$.fragment,d),m=!1},d(d){d&&(O(t),O(n),O(r),O(h)),de(i),de(o),de(c,d)}}}function a0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m;return i=new vr({props:{audioData:e[16],width:e[0]/2,height:e[22]/2}}),o=new vr({props:{audioData:e[17],width:e[0]/2,height:e[22]/2}}),c=new vr({props:{audioData:e[15],width:e[0],height:e[22]}}),{c(){t=A("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=N(),r=A("div"),me(i.$$.fragment),a=N(),me(o.$$.fragment),s=N(),u=A("div"),u.textContent="Example for early",l=N(),f=A("div"),f.textContent="Example for late",h=N(),me(c.$$.fragment),C(t,"class","svelte-rz4e1l"),C(u,"class","svelte-rz4e1l"),C(f,"class","svelte-rz4e1l"),C(r,"class","vis-example svelte-rz4e1l")},m(d,p){q(d,t,p),q(d,n,p),q(d,r,p),he(i,r,null),M(r,a),he(o,r,null),M(r,s),M(r,u),M(r,l),M(r,f),q(d,h,p),he(c,d,p),m=!0},p(d,p){const g={};p[0]&65536&&(g.audioData=d[16]),p[0]&1&&(g.width=d[0]/2),p[0]&4194304&&(g.height=d[22]/2),i.$set(g);const v={};p[0]&131072&&(v.audioData=d[17]),p[0]&1&&(v.width=d[0]/2),p[0]&4194304&&(v.height=d[22]/2),o.$set(v);const b={};p[0]&32768&&(b.audioData=d[15]),p[0]&1&&(b.width=d[0]),p[0]&4194304&&(b.height=d[22]),c.$set(b)},i(d){m||(R(i.$$.fragment,d),R(o.$$.fragment,d),R(c.$$.fragment,d),m=!0)},o(d){V(i.$$.fragment,d),V(o.$$.fragment,d),V(c.$$.fragment,d),m=!1},d(d){d&&(O(t),O(n),O(r),O(h)),de(i),de(o),de(c,d)}}}function o0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m;return i=new wr({props:{pattern:e[20],width:e[0]/2,height:e[22]*.7}}),o=new wr({props:{pattern:e[21],width:e[0]/2,height:e[22]*.7}}),c=new wr({props:{pattern:e[19],width:e[0],height:e[22]}}),{c(){t=A("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Brighter bars show smaller gaps (early),
            darker bars show wider gaps (late).`,n=N(),r=A("div"),me(i.$$.fragment),a=N(),me(o.$$.fragment),s=N(),u=A("div"),u.textContent="Example for early",l=N(),f=A("div"),f.textContent="Example for late",h=N(),me(c.$$.fragment),C(t,"class","svelte-rz4e1l"),C(u,"class","svelte-rz4e1l"),C(f,"class","svelte-rz4e1l"),C(r,"class","vis-example svelte-rz4e1l")},m(d,p){q(d,t,p),q(d,n,p),q(d,r,p),he(i,r,null),M(r,a),he(o,r,null),M(r,s),M(r,u),M(r,l),M(r,f),q(d,h,p),he(c,d,p),m=!0},p(d,p){const g={};p[0]&1048576&&(g.pattern=d[20]),p[0]&1&&(g.width=d[0]/2),p[0]&4194304&&(g.height=d[22]*.7),i.$set(g);const v={};p[0]&2097152&&(v.pattern=d[21]),p[0]&1&&(v.width=d[0]/2),p[0]&4194304&&(v.height=d[22]*.7),o.$set(v);const b={};p[0]&524288&&(b.pattern=d[19]),p[0]&1&&(b.width=d[0]),p[0]&4194304&&(b.height=d[22]),c.$set(b)},i(d){m||(R(i.$$.fragment,d),R(o.$$.fragment,d),R(c.$$.fragment,d),m=!0)},o(d){V(i.$$.fragment,d),V(o.$$.fragment,d),V(c.$$.fragment,d),m=!1},d(d){d&&(O(t),O(n),O(r),O(h)),de(i),de(o),de(c,d)}}}function s0(e){let t,n,r,i,a,o,s;return{c(){t=A("div"),n=_e(`Almost done!
      `),r=A("p"),r.textContent="Do you have any final feedback/comments?",i=N(),a=A("textarea"),C(r,"class","svelte-rz4e1l")},m(u,l){q(u,t,l),M(t,n),M(t,r),M(t,i),M(t,a),$e(a,e[8]),o||(s=Le(a,"input",e[30]),o=!0)},p(u,l){l[0]&256&&$e(a,u[8])},d(u){u&&O(t),o=!1,s()}}}function u0(e){let t,n,r;return{c(){t=A("div"),t.textContent="Thanks for participating!",n=N(),r=A("a"),r.textContent="click here to get your compensation",C(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){q(i,t,a),q(i,n,a),q(i,r,a)},d(i){i&&(O(t),O(n),O(r))}}}function l0(e){let t,n,r;return{c(){t=A("button"),t.textContent="next step",C(t,"class","next-btn svelte-rz4e1l")},m(i,a){q(i,t,a),n||(r=Le(t,"click",e[23]),n=!0)},p:Ee,d(i){i&&O(t),n=!1,r()}}}function YT(e){let t,n,r,i,a,o,s,u,l,f,h=e[2]==="consent"&&Q1(),c=e[2]==="start1"&&J1(e),m=e[2]==="start2"&&e0(e),d=e[2]==="start3"&&t0(e),p=e[2]==="demo"&&n0(e),g=e[2]==="tests"&&r0(e),v=e[2]==="feedback"&&s0(e),b=e[2]==="done"&&u0(),w=!e[11]&&e[2]!=="done"&&l0(e);return{c(){t=A("main"),h&&h.c(),n=N(),c&&c.c(),r=N(),m&&m.c(),i=N(),d&&d.c(),a=N(),p&&p.c(),o=N(),g&&g.c(),s=N(),v&&v.c(),u=N(),b&&b.c(),l=N(),w&&w.c(),C(t,"class","svelte-rz4e1l")},m(y,_){q(y,t,_),h&&h.m(t,null),M(t,n),c&&c.m(t,null),M(t,r),m&&m.m(t,null),M(t,i),d&&d.m(t,null),M(t,a),p&&p.m(t,null),M(t,o),g&&g.m(t,null),M(t,s),v&&v.m(t,null),M(t,u),b&&b.m(t,null),M(t,l),w&&w.m(t,null),f=!0},p(y,_){y[2]==="consent"?h||(h=Q1(),h.c(),h.m(t,n)):h&&(h.d(1),h=null),y[2]==="start1"?c?(c.p(y,_),_[0]&4&&R(c,1)):(c=J1(y),c.c(),R(c,1),c.m(t,r)):c&&(nt(),V(c,1,1,()=>{c=null}),rt()),y[2]==="start2"?m?m.p(y,_):(m=e0(y),m.c(),m.m(t,i)):m&&(m.d(1),m=null),y[2]==="start3"?d?(d.p(y,_),_[0]&4&&R(d,1)):(d=t0(y),d.c(),R(d,1),d.m(t,a)):d&&(nt(),V(d,1,1,()=>{d=null}),rt()),y[2]==="demo"?p?p.p(y,_):(p=n0(y),p.c(),p.m(t,o)):p&&(p.d(1),p=null),y[2]==="tests"?g?(g.p(y,_),_[0]&4&&R(g,1)):(g=r0(y),g.c(),R(g,1),g.m(t,s)):g&&(nt(),V(g,1,1,()=>{g=null}),rt()),y[2]==="feedback"?v?v.p(y,_):(v=s0(y),v.c(),v.m(t,u)):v&&(v.d(1),v=null),y[2]==="done"?b||(b=u0(),b.c(),b.m(t,l)):b&&(b.d(1),b=null),!y[11]&&y[2]!=="done"?w?w.p(y,_):(w=l0(y),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},i(y){f||(R(c),R(d),R(g),f=!0)},o(y){V(c),V(d),V(g),f=!1},d(y){y&&O(t),h&&h.d(),c&&c.d(),m&&m.d(),d&&d.d(),p&&p.d(),g&&g.d(),v&&v.d(),b&&b.d(),w&&w.d()}}}const So=!1,jT="/store",XT=120,Eo=.1,f0=4;function ZT(e,t,n){let r,i=_r(window,"PROLIFIC_PID"),a=_r(window,"STUDY_ID"),o=_r(window,"SESSION_ID"),s=["audio","waveform","color"].map(G=>({encoding:G}));console.log({tests:s});let u="consent",l=0,f,h="",c="",m=0,d=0,p="",g=0,v,b={},w=[],y,_,x=!1,P=!1,T=!1,S="tick",$=600,E=[],L=0;const U=[];wi(()=>{document.querySelector("html").addEventListener("keyup",Y)});const D=()=>{_=new Oe({ratio:{firstVal:Eo,operation:"multiply",down:2,up:1,stepSizeDown:1.25,stepSizeUp:1.25,limits:[0,Eo],direction:-1,reversalLimit:12,verbosity:0}}),_.init()};function k(){u==="consent"?n(2,u="start1"):u==="start1"?n(2,u="start2"):u==="start2"?n(2,u="start3"):u==="start3"?(n(1,s=vg(s)),n(2,u="demo")):u==="demo"?h==""||c==""?alert("please fill the form first"):(n(2,u="tests"),n(3,l=0)):u==="tests"?l<s.length?z():n(2,u="feedback"):u==="feedback"&&(W(),n(2,u="done"))}function z(){D(),n(13,S=s[l].encoding);const G=ke(-Eo),J=ke(Eo);n(20,ee=G.noteTimes),n(21,B=J.noteTimes),n(16,K=G.renderedAudio),n(17,Q=J.renderedAudio),n(9,g=0),v=0,y=0,n(10,x=!0),E=[],w=[],f=new Date,oe()}function oe(){console.log("Starting trial "+g),b={},n(11,P=!0),ae()}function ae(){let J=_.getLast("ratio");J=Math.random()<.5?J:-J,b.deviation=J;const ne=ke(J);n(19,X=ne.noteTimes),ne.noteTimesSeparate,n(18,F=ne.sampleRate),n(15,ue=ne.renderedAudio),console.log("generated pattern"),n(12,T=!0),window.setTimeout(()=>{n(12,T=!1),b.startTime=new Date},1e3)}function te(G){if(!P)return;n(11,P=!1),b.decisionChoice=G,b.errorCode=0,b.timeTaken=(new Date-b.startTime)/1e3;const J=y;(b.decisionChoice==0&&b.deviation<0||b.decisionChoice==1&&b.deviation>0)&&b.errorCode==0&&y++,b.errorCode==0&&(_.next(J!=y),w[w.length]=b),b.errorCode==0&&v++,n(9,g++,g),_.reversalLimitReached("ratio")?H():oe()}function H(){n(10,x=!1),n(11,P=!1),E=[],L=_.getFinalVal("ratio");for(let J=0;J<w.length;J++)E[J]=w[J].deviation;console.log(E);const G=new Date;U.push({encoding:S,final:L,data:E,score:y,testNumber:l,trialCount:g+1,trials:w,validTrialCount:v+1,testTimeSeconds:(G-f)/1e3}),n(3,l++,l)}function Y(G){if(!T)switch(G.key){case"ArrowLeft":P&&te(0);break;case"ArrowRight":P&&te(1);break;case"PageDown":!P&&u!=="done"&&k()}}function W(){const G={studyStep:u,demographics:{partID:i,studyID:a,sessionID:o,partEduation:h,partMusicInstr:c,partMusicInstrYears:m,partVisExperienceYears:d,partFeedback:p,visWidth:$},date:new Date().toISOString(),tests:U};console.log("saving data",G);const J=JSON.stringify(G,void 0,2);fetch(jT,{method:"POST",headers:{"Content-Type":"application/json"},body:J}).then(ne=>{console.log("Data saved:",ne)})}let j=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}],se=Xc(XT);const fe=f0*se;let ue=null,K=null,Q=null,F,X=[],ee=[],B=[];(async()=>{n(14,j=await Promise.all(j.map(async G=>({...G,times:G.beats.map(J=>se*(J-1)),timesOriginal:G.beats.map(J=>se*(J-1)),audioBuffer:await ic(G.sample)}))))})();const re=(G=0)=>{if(G===0)return j;const J=ce([j]),ne=J.filter(le=>le.instrument==="hihat")[0],Ae=J.filter(le=>le.instrument==="snare")[0],Se=J.filter(le=>le.instrument==="bass")[0];Se.times[1]=Se.timesOriginal[1]+G,ne.times[4]=ne.timesOriginal[4]+G;for(const le of[6,7,8])ne.times[le-1]=ne.timesOriginal[le-1]+G;return Ae.times[1]=Ae.timesOriginal[1]+G,J},ce=G=>{const J=G[0].map(ne=>({...ne,beats:[...ne.beats],times:[...ne.times],timesOriginal:[...ne.timesOriginal]}));for(let ne=1;ne<G.length;ne++){const Ae=G[ne];for(const Se of Ae){const le=J.filter(Te=>Te.instrument===Se.instrument)[0];le.beats=[...le.beats,...Se.beats.map(Te=>Te+ne*f0)],le.times=[...le.times,...Se.times.map(Te=>Te+ne*fe)],le.timesOriginal=[...le.timesOriginal,...Se.timesOriginal.map(Te=>Te+ne*fe)]}}return J},ke=G=>{if(!j[0].audioBuffer)return;const ne=[re(G)],Ae=ce(ne),Se=Ae.map(ie=>ie.times).flat().sort(),le=Ae.map(ie=>ie.times.map(we=>({time:we,instr:ie.instrument}))).flat(1/0).sort((ie,we)=>{ie.time-we.time}),Te=Ae[0].audioBuffer.sampleRate,I=_s(Ae,fe*ne.length+.1,Te);return{noteTimes:Se,noteTimesSeparate:le,sampleRate:Te,renderedAudio:I}},qe=()=>n(0,$*=1.05),We=()=>n(0,$*=.95);function Be(){h=Ef(this),n(4,h)}function Pt(){c=this.value,n(5,c)}function Ne(){m=bn(this.value),n(6,m)}function Gn(){d=bn(this.value),n(7,d)}function At(){p=this.value,n(8,p)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(22,r=$/6)},[$,s,u,l,h,c,m,d,p,g,x,P,T,S,j,ue,K,Q,F,X,ee,B,r,k,qe,We,Be,Pt,Ne,Gn,At]}class KT extends Xe{constructor(t){super(),je(this,t,ZT,YT,Ye,{},null,[-1,-1])}}function c0(e){let t;return{c(){t=A("div"),t.innerHTML=`<p class="svelte-rz4e1l">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-rz4e1l">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-rz4e1l">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-rz4e1l">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){q(n,t,r)},d(n){n&&O(t)}}}function h0(e){let t,n,r,i,a,o,s,u,l;return i=new Zn({props:{pattern:[.1,.6,1.1],cachedAudio:e[14][2].audioBuffer}}),{c(){t=A("div"),n=A("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=N(),me(i.$$.fragment),a=N(),o=A("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",s=N(),u=A("a"),u.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",C(n,"class","svelte-rz4e1l"),C(o,"class","svelte-rz4e1l"),C(u,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(f,h){q(f,t,h),M(t,n),M(t,r),he(i,t,null),M(t,a),M(t,o),M(t,s),M(t,u),l=!0},p(f,h){const c={};h[0]&16384&&(c.cachedAudio=f[14][2].audioBuffer),i.$set(c)},i(f){l||(R(i.$$.fragment,f),l=!0)},o(f){V(i.$$.fragment,f),l=!1},d(f){f&&O(t),de(i)}}}function d0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m,d,p,g,v,b;return{c(){t=A("div"),n=A("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=N(),i=A("div"),a=A("button"),a.textContent="+",o=N(),s=A("button"),s.textContent="-",u=N(),l=Go("svg"),f=Go("rect"),p=N(),g=A("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,C(n,"class","svelte-rz4e1l"),C(f,"width",h=e[0]*.52),C(f,"height",c=e[22]*2),C(f,"fill","#ccc"),C(f,"rx","8"),C(l,"width",m=e[0]*.52+"px"),C(l,"height",d=e[22]*2+"px"),C(g,"class","svelte-rz4e1l")},m(w,y){q(w,t,y),M(t,n),M(t,r),M(t,i),M(i,a),M(i,o),M(i,s),M(t,u),M(t,l),M(l,f),M(t,p),M(t,g),v||(b=[Le(a,"click",e[24]),Le(s,"click",e[25])],v=!0)},p(w,y){y[0]&1&&h!==(h=w[0]*.52)&&C(f,"width",h),y[0]&4194304&&c!==(c=w[22]*2)&&C(f,"height",c),y[0]&1&&m!==(m=w[0]*.52+"px")&&C(l,"width",m),y[0]&4194304&&d!==(d=w[22]*2+"px")&&C(l,"height",d)},d(w){w&&O(t),v=!1,Ht(b)}}}function m0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m,d,p,g,v,b,w;return c=new Zn({props:{pattern:[.1],cachedAudio:e[14][0].audioBuffer,label:"hi-hat"}}),d=new Zn({props:{pattern:[.1],cachedAudio:e[14][1].audioBuffer,label:"snare drum"}}),g=new Zn({props:{pattern:[.1],cachedAudio:e[14][2].audioBuffer,label:"bass drum"}}),{c(){t=A("div"),n=A("div"),n.innerHTML=`<p class="svelte-rz4e1l">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-rz4e1l">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-rz4e1l">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played togehter will still be played at
          the same time, but this time will be either too early or too late.</p>`,r=_e(`
      This is what the pattern looks like in sheet music:
      `),i=A("div"),a=A("img"),u=N(),l=A("div"),f=A("span"),f.textContent="Click to hear the different sounds:",h=N(),me(c.$$.fragment),m=N(),me(d.$$.fragment),p=N(),me(g.$$.fragment),v=_e(`
      This is what the full, correctly played pattern sounds like:
      `),b=A("div"),b.innerHTML='<audio src="drum-pattern-correct-once.wav" controls=""></audio>',C(a,"width",o=e[0]+"px"),E0(a.src,s="drum-pattern-labels3.png")||C(a,"src",s),C(a,"alt","drum pattern as sheet music"),Re(l,"display","grid"),Re(l,"grid-template-columns","repeat(4,max-content)"),Re(l,"gap","10px"),Re(l,"align-items","center")},m(y,_){q(y,t,_),M(t,n),M(t,r),M(t,i),M(i,a),M(t,u),M(t,l),M(l,f),M(l,h),he(c,l,null),M(l,m),he(d,l,null),M(l,p),he(g,l,null),M(t,v),M(t,b),w=!0},p(y,_){(!w||_[0]&1&&o!==(o=y[0]+"px"))&&C(a,"width",o);const x={};_[0]&16384&&(x.cachedAudio=y[14][0].audioBuffer),c.$set(x);const P={};_[0]&16384&&(P.cachedAudio=y[14][1].audioBuffer),d.$set(P);const T={};_[0]&16384&&(T.cachedAudio=y[14][2].audioBuffer),g.$set(T)},i(y){w||(R(c.$$.fragment,y),R(d.$$.fragment,y),R(g.$$.fragment,y),w=!0)},o(y){V(c.$$.fragment,y),V(d.$$.fragment,y),V(g.$$.fragment,y),w=!1},d(y){y&&O(t),de(c),de(d),de(g)}}}function p0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m,d,p,g,v,b,w,y,_,x,P,T,S,$,E,L,U;return{c(){t=A("div"),n=A("p"),n.textContent="Please answer the following questions about yourself:",r=N(),i=A("label"),a=A("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=N(),s=A("select"),u=A("option"),u.textContent="none",l=A("option"),l.textContent="high school",f=A("option"),f.textContent="bachelor",h=A("option"),h.textContent="master",c=A("option"),c.textContent="phd",m=N(),d=A("label"),p=A("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=N(),v=A("input"),b=N(),w=A("label"),y=A("span"),y.textContent="For how many years do you roughly play it/them?",_=N(),x=A("input"),P=N(),T=A("label"),S=A("span"),S.textContent=`How many years of experience do you have with information
          visualization?`,$=N(),E=A("input"),C(n,"class","svelte-rz4e1l"),u.__value="none",$e(u,u.__value),l.__value="highs",$e(l,l.__value),f.__value="bachelor",$e(f,f.__value),h.__value="master",$e(h,h.__value),c.__value="phd",$e(c,c.__value),e[4]===void 0&&ti(()=>e[26].call(s)),C(i,"class","svelte-rz4e1l"),C(v,"type","text"),C(v,"placeholder","free text"),C(d,"class","svelte-rz4e1l"),C(x,"type","number"),C(x,"min","0"),C(x,"step","1"),C(w,"class","svelte-rz4e1l"),C(E,"type","number"),C(E,"min","0"),C(E,"step","1"),C(T,"class","svelte-rz4e1l"),C(t,"class","demo-form svelte-rz4e1l")},m(D,k){q(D,t,k),M(t,n),M(t,r),M(t,i),M(i,a),M(i,o),M(i,s),M(s,u),M(s,l),M(s,f),M(s,h),M(s,c),ei(s,e[4],!0),M(t,m),M(t,d),M(d,p),M(d,g),M(d,v),$e(v,e[5]),M(t,b),M(t,w),M(w,y),M(w,_),M(w,x),$e(x,e[6]),M(t,P),M(t,T),M(T,S),M(T,$),M(T,E),$e(E,e[7]),L||(U=[Le(s,"change",e[26]),Le(v,"input",e[27]),Le(x,"input",e[28]),Le(E,"input",e[29])],L=!0)},p(D,k){k[0]&16&&ei(s,D[4]),k[0]&32&&v.value!==D[5]&&$e(v,D[5]),k[0]&64&&bn(x.value)!==D[6]&&$e(x,D[6]),k[0]&128&&bn(E.value)!==D[7]&&$e(E,D[7])},d(D){D&&O(t),L=!1,Ht(U)}}}function b0(e){let t,n,r,i=e[11]&&g0(e);return n=new dv({props:{data:e[10],final:0,x:r$,y:e[30]}}),{c(){i&&i.c(),t=N(),me(n.$$.fragment)},m(a,o){i&&i.m(a,o),q(a,t,o),he(n,a,o),r=!0},p(a,o){a[11]?i?(i.p(a,o),o[0]&2048&&R(i,1)):(i=g0(a),i.c(),R(i,1),i.m(t.parentNode,t)):i&&(nt(),V(i,1,1,()=>{i=null}),rt());const s={};o[0]&1024&&(s.data=a[10]),n.$set(s)},i(a){r||(R(i),R(n.$$.fragment,a),r=!0)},o(a){V(i),V(n.$$.fragment,a),r=!1},d(a){a&&O(t),i&&i.d(a),de(n,a)}}}function g0(e){let t,n,r=e[3]+1+"",i,a,o=e[1].length+"",s,u,l,f,h,c,m,d,p=e[9]+1+"",g,v,b,w,y,_;const x=[JT,QT],P=[];function T(S,$){return S[13]==="audio"?0:1}return b=T(e),w=P[b]=x[b](e),{c(){t=A("p"),n=_e("Test number "),i=_e(r),a=_e(" of "),s=_e(o),u=N(),l=A("p"),l.innerHTML="The <b>5th beat</b> with a <b>hi-hat and a bass</b> note is shifted.",f=N(),h=A("p"),h.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,c=N(),m=A("p"),d=_e("Trial number "),g=_e(p),v=N(),w.c(),y=Sa(),C(t,"class","svelte-rz4e1l"),C(l,"class","svelte-rz4e1l"),C(h,"class","svelte-rz4e1l"),C(m,"class","svelte-rz4e1l")},m(S,$){q(S,t,$),M(t,n),M(t,i),M(t,a),M(t,s),q(S,u,$),q(S,l,$),q(S,f,$),q(S,h,$),q(S,c,$),q(S,m,$),M(m,d),M(m,g),q(S,v,$),P[b].m(S,$),q(S,y,$),_=!0},p(S,$){(!_||$[0]&8)&&r!==(r=S[3]+1+"")&&lt(i,r),(!_||$[0]&2)&&o!==(o=S[1].length+"")&&lt(s,o),(!_||$[0]&512)&&p!==(p=S[9]+1+"")&&lt(g,p);let E=b;b=T(S),b===E?P[b].p(S,$):(nt(),V(P[E],1,1,()=>{P[E]=null}),rt(),w=P[b],w?w.p(S,$):(w=P[b]=x[b](S),w.c()),R(w,1),w.m(y.parentNode,y))},i(S){_||(R(w),_=!0)},o(S){V(w),_=!1},d(S){S&&(O(t),O(u),O(l),O(f),O(h),O(c),O(m),O(v),O(y)),P[b].d(S)}}}function QT(e){let t,n,r,i=(e[13]==="waveform"||ko)&&y0(e),a=(e[13]==="color"||ko)&&v0(e);return{c(){i&&i.c(),t=N(),a&&a.c(),n=Sa()},m(o,s){i&&i.m(o,s),q(o,t,s),a&&a.m(o,s),q(o,n,s),r=!0},p(o,s){o[13]==="waveform"||ko?i?(i.p(o,s),s[0]&8192&&R(i,1)):(i=y0(o),i.c(),R(i,1),i.m(t.parentNode,t)):i&&(nt(),V(i,1,1,()=>{i=null}),rt()),o[13]==="color"||ko?a?(a.p(o,s),s[0]&8192&&R(a,1)):(a=v0(o),a.c(),R(a,1),a.m(n.parentNode,n)):a&&(nt(),V(a,1,1,()=>{a=null}),rt())},i(o){r||(R(i),R(a),r=!0)},o(o){V(i),V(a),r=!1},d(o){o&&(O(t),O(n)),i&&i.d(o),a&&a.d(o)}}}function JT(e){let t,n,r,i,a,o,s,u,l,f,h,c,m;return i=new Bs({props:{audioData:e[16],sampleRate:e[18]}}),o=new Bs({props:{audioData:e[17],sampleRate:e[18]}}),c=new Gc({props:{audioData:e[15],sampleRate:e[18],currentTrialNumber:e[9]}}),{c(){t=A("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=N(),r=A("div"),me(i.$$.fragment),a=N(),me(o.$$.fragment),s=N(),u=A("div"),u.textContent="Example for early",l=N(),f=A("div"),f.textContent="Example for late",h=N(),me(c.$$.fragment),C(t,"class","svelte-rz4e1l"),C(u,"class","svelte-rz4e1l"),C(f,"class","svelte-rz4e1l"),C(r,"class","vis-example svelte-rz4e1l")},m(d,p){q(d,t,p),q(d,n,p),q(d,r,p),he(i,r,null),M(r,a),he(o,r,null),M(r,s),M(r,u),M(r,l),M(r,f),q(d,h,p),he(c,d,p),m=!0},p(d,p){const g={};p[0]&65536&&(g.audioData=d[16]),p[0]&262144&&(g.sampleRate=d[18]),i.$set(g);const v={};p[0]&131072&&(v.audioData=d[17]),p[0]&262144&&(v.sampleRate=d[18]),o.$set(v);const b={};p[0]&32768&&(b.audioData=d[15]),p[0]&262144&&(b.sampleRate=d[18]),p[0]&512&&(b.currentTrialNumber=d[9]),c.$set(b)},i(d){m||(R(i.$$.fragment,d),R(o.$$.fragment,d),R(c.$$.fragment,d),m=!0)},o(d){V(i.$$.fragment,d),V(o.$$.fragment,d),V(c.$$.fragment,d),m=!1},d(d){d&&(O(t),O(n),O(r),O(h)),de(i),de(o),de(c,d)}}}function y0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m;return i=new vr({props:{audioData:e[16],width:e[0]/2,height:e[22]/2}}),o=new vr({props:{audioData:e[17],width:e[0]/2,height:e[22]/2}}),c=new vr({props:{audioData:e[15],width:e[0],height:e[22]}}),{c(){t=A("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=N(),r=A("div"),me(i.$$.fragment),a=N(),me(o.$$.fragment),s=N(),u=A("div"),u.textContent="Example for early",l=N(),f=A("div"),f.textContent="Example for late",h=N(),me(c.$$.fragment),C(t,"class","svelte-rz4e1l"),C(u,"class","svelte-rz4e1l"),C(f,"class","svelte-rz4e1l"),C(r,"class","vis-example svelte-rz4e1l")},m(d,p){q(d,t,p),q(d,n,p),q(d,r,p),he(i,r,null),M(r,a),he(o,r,null),M(r,s),M(r,u),M(r,l),M(r,f),q(d,h,p),he(c,d,p),m=!0},p(d,p){const g={};p[0]&65536&&(g.audioData=d[16]),p[0]&1&&(g.width=d[0]/2),p[0]&4194304&&(g.height=d[22]/2),i.$set(g);const v={};p[0]&131072&&(v.audioData=d[17]),p[0]&1&&(v.width=d[0]/2),p[0]&4194304&&(v.height=d[22]/2),o.$set(v);const b={};p[0]&32768&&(b.audioData=d[15]),p[0]&1&&(b.width=d[0]),p[0]&4194304&&(b.height=d[22]),c.$set(b)},i(d){m||(R(i.$$.fragment,d),R(o.$$.fragment,d),R(c.$$.fragment,d),m=!0)},o(d){V(i.$$.fragment,d),V(o.$$.fragment,d),V(c.$$.fragment,d),m=!1},d(d){d&&(O(t),O(n),O(r),O(h)),de(i),de(o),de(c,d)}}}function v0(e){let t,n,r,i,a,o,s,u,l,f,h,c,m;return i=new wr({props:{pattern:e[20],width:e[0]/2,height:e[22]*.7}}),o=new wr({props:{pattern:e[21],width:e[0]/2,height:e[22]*.7}}),c=new wr({props:{pattern:e[19],width:e[0],height:e[22]}}),{c(){t=A("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Brighter bars show smaller gaps (early),
            darker bars show wider gaps (late).`,n=N(),r=A("div"),me(i.$$.fragment),a=N(),me(o.$$.fragment),s=N(),u=A("div"),u.textContent="Example for early",l=N(),f=A("div"),f.textContent="Example for late",h=N(),me(c.$$.fragment),C(t,"class","svelte-rz4e1l"),C(u,"class","svelte-rz4e1l"),C(f,"class","svelte-rz4e1l"),C(r,"class","vis-example svelte-rz4e1l")},m(d,p){q(d,t,p),q(d,n,p),q(d,r,p),he(i,r,null),M(r,a),he(o,r,null),M(r,s),M(r,u),M(r,l),M(r,f),q(d,h,p),he(c,d,p),m=!0},p(d,p){const g={};p[0]&1048576&&(g.pattern=d[20]),p[0]&1&&(g.width=d[0]/2),p[0]&4194304&&(g.height=d[22]*.7),i.$set(g);const v={};p[0]&2097152&&(v.pattern=d[21]),p[0]&1&&(v.width=d[0]/2),p[0]&4194304&&(v.height=d[22]*.7),o.$set(v);const b={};p[0]&524288&&(b.pattern=d[19]),p[0]&1&&(b.width=d[0]),p[0]&4194304&&(b.height=d[22]),c.$set(b)},i(d){m||(R(i.$$.fragment,d),R(o.$$.fragment,d),R(c.$$.fragment,d),m=!0)},o(d){V(i.$$.fragment,d),V(o.$$.fragment,d),V(c.$$.fragment,d),m=!1},d(d){d&&(O(t),O(n),O(r),O(h)),de(i),de(o),de(c,d)}}}function w0(e){let t,n,r,i,a,o,s;return{c(){t=A("div"),n=_e(`Almost done!
      `),r=A("p"),r.textContent="Do you have any final feedback/comments?",i=N(),a=A("textarea"),C(r,"class","svelte-rz4e1l")},m(u,l){q(u,t,l),M(t,n),M(t,r),M(t,i),M(t,a),$e(a,e[8]),o||(s=Le(a,"input",e[31]),o=!0)},p(u,l){l[0]&256&&$e(a,u[8])},d(u){u&&O(t),o=!1,s()}}}function _0(e){let t,n,r;return{c(){t=A("div"),t.textContent="Thanks for participating!",n=N(),r=A("a"),r.textContent="click here to get your compensation",C(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){q(i,t,a),q(i,n,a),q(i,r,a)},d(i){i&&(O(t),O(n),O(r))}}}function M0(e){let t,n,r;return{c(){t=A("button"),t.textContent="next step",C(t,"class","next-btn svelte-rz4e1l")},m(i,a){q(i,t,a),n||(r=Le(t,"click",e[23]),n=!0)},p:Ee,d(i){i&&O(t),n=!1,r()}}}function e$(e){let t,n,r,i,a,o,s,u,l,f,h=e[2]==="consent"&&c0(),c=e[2]==="start1"&&h0(e),m=e[2]==="start2"&&d0(e),d=e[2]==="start3"&&m0(e),p=e[2]==="demo"&&p0(e),g=e[2]==="tests"&&b0(e),v=e[2]==="feedback"&&w0(e),b=e[2]==="done"&&_0(),w=!e[12]&&e[2]!=="done"&&M0(e);return{c(){t=A("main"),h&&h.c(),n=N(),c&&c.c(),r=N(),m&&m.c(),i=N(),d&&d.c(),a=N(),p&&p.c(),o=N(),g&&g.c(),s=N(),v&&v.c(),u=N(),b&&b.c(),l=N(),w&&w.c(),C(t,"class","svelte-rz4e1l")},m(y,_){q(y,t,_),h&&h.m(t,null),M(t,n),c&&c.m(t,null),M(t,r),m&&m.m(t,null),M(t,i),d&&d.m(t,null),M(t,a),p&&p.m(t,null),M(t,o),g&&g.m(t,null),M(t,s),v&&v.m(t,null),M(t,u),b&&b.m(t,null),M(t,l),w&&w.m(t,null),f=!0},p(y,_){y[2]==="consent"?h||(h=c0(),h.c(),h.m(t,n)):h&&(h.d(1),h=null),y[2]==="start1"?c?(c.p(y,_),_[0]&4&&R(c,1)):(c=h0(y),c.c(),R(c,1),c.m(t,r)):c&&(nt(),V(c,1,1,()=>{c=null}),rt()),y[2]==="start2"?m?m.p(y,_):(m=d0(y),m.c(),m.m(t,i)):m&&(m.d(1),m=null),y[2]==="start3"?d?(d.p(y,_),_[0]&4&&R(d,1)):(d=m0(y),d.c(),R(d,1),d.m(t,a)):d&&(nt(),V(d,1,1,()=>{d=null}),rt()),y[2]==="demo"?p?p.p(y,_):(p=p0(y),p.c(),p.m(t,o)):p&&(p.d(1),p=null),y[2]==="tests"?g?(g.p(y,_),_[0]&4&&R(g,1)):(g=b0(y),g.c(),R(g,1),g.m(t,s)):g&&(nt(),V(g,1,1,()=>{g=null}),rt()),y[2]==="feedback"?v?v.p(y,_):(v=w0(y),v.c(),v.m(t,u)):v&&(v.d(1),v=null),y[2]==="done"?b||(b=_0(),b.c(),b.m(t,l)):b&&(b.d(1),b=null),!y[12]&&y[2]!=="done"?w?w.p(y,_):(w=M0(y),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},i(y){f||(R(c),R(d),R(g),f=!0)},o(y){V(c),V(d),V(g),f=!1},d(y){y&&O(t),h&&h.d(),c&&c.d(),m&&m.d(),d&&d.d(),p&&p.d(),g&&g.d(),v&&v.d(),b&&b.d(),w&&w.d()}}}const ko=!1,t$="/store",n$=120,Co=.1,x0=4,r$=(e,t)=>t;function i$(e,t,n){let r,i=_r(window,"PROLIFIC_PID"),a=_r(window,"STUDY_ID"),o=_r(window,"SESSION_ID"),s=["audio","waveform","color"].map(G=>({encoding:G}));console.log({tests:s});let u="tests",l=0,f,h="",c="",m=0,d=0,p="",g=0,v,b={},w=[],y,_,x=!1,P=!1,T="tick",S=600,$=[],E=0;const L=[];wi(()=>{document.querySelector("html").addEventListener("keyup",H)});const U=()=>{_=new Oe({ratio:{firstVal:Co,operation:"multiply",down:2,up:1,stepSizeDown:1.25,stepSizeUp:1.25,limits:[0,Co],direction:-1,reversalLimit:10,verbosity:1}}),_.init()};function D(){u==="consent"?n(2,u="start1"):u==="start1"?n(2,u="start2"):u==="start2"?n(2,u="start3"):u==="start3"?(n(1,s=vg(s)),n(2,u="demo")):u==="demo"?h==""||c==""?alert("please fill the form first"):(n(2,u="tests"),n(3,l=0)):u==="tests"?l<s.length?k():n(2,u="feedback"):u==="feedback"&&(Y(),n(2,u="done"))}function k(){U(),n(13,T=s[l].encoding);const G=ce(-Co),J=ce(Co);n(20,X=G.noteTimes),n(21,ee=J.noteTimes),n(16,ue=G.renderedAudio),n(17,K=J.renderedAudio),n(9,g=0),v=0,y=0,n(11,x=!0),$=[],n(10,w=[]),f=new Date,z()}function z(){console.log("Starting trial "+g),b={},n(12,P=!0),oe()}function oe(){let J=_.getLast("ratio");J=Math.random()<.5?J:-J,console.log({severity:J}),b.deviation=J;const ne=ce(J);n(19,F=ne.noteTimes),ne.noteTimesSeparate,n(18,Q=ne.sampleRate),n(15,fe=ne.renderedAudio),console.log("generated pattern"),window.setTimeout(()=>{b.startTime=new Date},1e3)}function ae(G){if(!P)return;n(12,P=!1),b.decisionChoice=G,b.errorCode=0,b.timeTaken=(new Date-b.startTime)/1e3;const J=y;(b.decisionChoice==0&&b.deviation<0||b.decisionChoice==1&&b.deviation>0)&&b.errorCode==0&&y++,b.errorCode==0&&(_.next(J!=y),n(10,w[w.length]=b,w)),b.errorCode==0&&v++,n(9,g++,g),_.reversalLimitReached("ratio")?te():z()}function te(){n(11,x=!1),n(12,P=!1),$=[],E=_.getFinalVal("ratio");for(let J=0;J<w.length;J++)$[J]=w[J].deviation;console.log($);const G=new Date;L.push({encoding:T,final:E,data:$,score:y,testNumber:l,trialCount:g+1,trials:w,validTrialCount:v+1,testTimeSeconds:(G-f)/1e3}),console.log("results (all)",L),n(3,l++,l)}function H(G){switch(G.key){case"ArrowLeft":P&&ae(0);break;case"ArrowRight":P&&ae(1);break;case"PageDown":!P&&u!=="done"&&D()}}function Y(){const G={studyStep:u,demographics:{partID:i,studyID:a,sessionID:o,partEduation:h,partMusicInstr:c,partMusicInstrYears:m,partVisExperienceYears:d,partFeedback:p,visWidth:S},date:new Date().toISOString(),tests:L};console.log("saving data",G);const J=JSON.stringify(G,void 0,2);fetch(t$,{method:"POST",headers:{"Content-Type":"application/json"},body:J}).then(ne=>{console.log("Data saved:",ne)})}let W=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}],j=Xc(n$);const se=x0*j;let fe=null,ue=null,K=null,Q,F=[],X=[],ee=[];(async()=>{n(14,W=await Promise.all(W.map(async G=>({...G,times:G.beats.map(J=>j*(J-1)),timesOriginal:G.beats.map(J=>j*(J-1)),audioBuffer:await ic(G.sample)}))))})();const Me=(G=0)=>{if(G===0)return W;const J=re([W]),ne=J.filter(Se=>Se.instrument==="hihat")[0];J.filter(Se=>Se.instrument==="snare")[0];const Ae=J.filter(Se=>Se.instrument==="bass")[0];return Ae.times[1]=Ae.timesOriginal[1]+G,ne.times[4]=ne.timesOriginal[4]+G,J},re=G=>{const J=G[0].map(ne=>({...ne,beats:[...ne.beats],times:[...ne.times],timesOriginal:[...ne.timesOriginal]}));for(let ne=1;ne<G.length;ne++){const Ae=G[ne];for(const Se of Ae){const le=J.filter(Te=>Te.instrument===Se.instrument)[0];le.beats=[...le.beats,...Se.beats.map(Te=>Te+ne*x0)],le.times=[...le.times,...Se.times.map(Te=>Te+ne*se)],le.timesOriginal=[...le.timesOriginal,...Se.timesOriginal.map(Te=>Te+ne*se)]}}return J},ce=G=>{if(!W[0].audioBuffer)return;const ne=[Me(G)],Ae=re(ne),Se=Ae.map(ie=>ie.times).flat().sort(),le=Ae.map(ie=>ie.times.map(we=>({time:we,instr:ie.instrument}))).flat(1/0).sort((ie,we)=>{ie.time-we.time}),Te=Ae[0].audioBuffer.sampleRate,I=_s(Ae,se*ne.length+.1,Te);return{noteTimes:Se,noteTimesSeparate:le,sampleRate:Te,renderedAudio:I}},ke=()=>n(0,S*=1.05),qe=()=>n(0,S*=.95);function We(){h=Ef(this),n(4,h)}function Be(){c=this.value,n(5,c)}function Pt(){m=bn(this.value),n(6,m)}function Ne(){d=bn(this.value),n(7,d)}const Gn=G=>Math.abs(G.deviation);function At(){p=this.value,n(8,p)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(22,r=S/6)},[S,s,u,l,h,c,m,d,p,g,w,x,P,T,W,fe,ue,K,Q,F,X,ee,r,D,ke,qe,We,Be,Pt,Ne,Gn,At]}class a$ extends Xe{constructor(t){super(),je(this,t,i$,e$,Ye,{},null,[-1,-1])}}function P0(e){let t,n,r,i,a,o,s,u;return{c(){t=A("div"),n=A("button"),n.textContent="Playground",r=N(),i=A("button"),i.textContent="Study",a=N(),o=A("button"),o.textContent="Analysis"},m(l,f){q(l,t,f),M(t,n),M(t,r),M(t,i),M(t,a),M(t,o),s||(u=[Le(n,"click",e[1]),Le(i,"click",e[2]),Le(o,"click",e[3])],s=!0)},p:Ee,d(l){l&&O(t),s=!1,Ht(u)}}}function o$(e){let t,n;return t=new qT({}),{c(){me(t.$$.fragment)},m(r,i){he(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){de(t,r)}}}function s$(e){let t,n;return t=new KT({}),{c(){me(t.$$.fragment)},m(r,i){he(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){de(t,r)}}}function u$(e){let t,n;return t=new uT({}),{c(){me(t.$$.fragment)},m(r,i){he(t,r,i),n=!0},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){V(t.$$.fragment,r),n=!1},d(r){de(t,r)}}}function l$(e){let t,n,r,i,a,o,s,u,l,f=e[0]!=="study_drums"&&P0(e);const h=[u$,s$,o$],c=[];function m(d,p){return d[0]==="playground"?0:d[0]==="study_drums"?1:d[0]==="analysis"?2:-1}return~(a=m(e))&&(o=c[a]=h[a](e)),u=new a$({}),{c(){t=A("main"),n=A("h1"),n.textContent="Rhythm Error Sensitivity Study",r=N(),f&&f.c(),i=N(),o&&o.c(),s=N(),me(u.$$.fragment)},m(d,p){q(d,t,p),M(t,n),M(t,r),f&&f.m(t,null),M(t,i),~a&&c[a].m(t,null),M(t,s),he(u,t,null),l=!0},p(d,[p]){d[0]!=="study_drums"?f?f.p(d,p):(f=P0(d),f.c(),f.m(t,i)):f&&(f.d(1),f=null);let g=a;a=m(d),a!==g&&(o&&(nt(),V(c[g],1,1,()=>{c[g]=null}),rt()),~a?(o=c[a],o||(o=c[a]=h[a](d),o.c()),R(o,1),o.m(t,s)):o=null)},i(d){l||(R(o),R(u.$$.fragment,d),l=!0)},o(d){V(o),V(u.$$.fragment,d),l=!1},d(d){d&&O(t),f&&f.d(),~a&&c[a].d(),de(u)}}}function f$(e,t,n){let r=_r(window,"p")??"study_drums";return r="",[r,()=>n(0,r="playground"),()=>n(0,r="study_drums"),()=>n(0,r="analysis")]}class c$ extends Xe{constructor(t){super(),je(this,t,f$,l$,Ye,{})}}new c$({target:document.getElementById("app")});export{yg as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-H-nTbtTw.js","assets/index-xbLYWxT7.js","assets/browser-ak4poWcd.js","assets/index-EN3ip_lF.js","assets/index-HvHGKpGR.js","assets/index-4fTh1i4n.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

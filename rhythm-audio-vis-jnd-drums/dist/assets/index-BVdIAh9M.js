var t3=Object.defineProperty;var n3=(e,t,n)=>t in e?t3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vs=(e,t,n)=>(n3(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function se(){}function s1(e){return e()}function Wf(){return Object.create(null)}function gn(e){e.forEach(s1)}function l1(e){return typeof e=="function"}function qe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Za;function r3(e,t){return e===t?!0:(Za||(Za=document.createElement("a")),Za.href=t,e===Za.href)}function i3(e){return Object.keys(e).length===0}function P(e,t){e.appendChild(t)}function K(e,t,n){e.insertBefore(t,n||null)}function Z(e){e.parentNode&&e.parentNode.removeChild(e)}function cr(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(e){return document.createElement(e)}function Vf(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ce(e){return document.createTextNode(e)}function O(){return Ce(" ")}function yc(){return Ce("")}function Qe(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function N(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Kr(e){return e===""?null:+e}function a3(e){return Array.from(e.childNodes)}function At(e,t){t=""+t,e.data!==t&&(e.data=t)}function at(e,t){e.value=t??""}function Ae(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Io(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function c1(e){const t=e.querySelector(":checked");return t&&t.__value}let Ki;function Hi(e){Ki=e}function wc(){if(!Ki)throw new Error("Function called outside component initialization");return Ki}function va(e){wc().$$.on_mount.push(e)}function dt(e){wc().$$.after_update.push(e)}function o3(e){wc().$$.on_destroy.push(e)}const Gr=[],He=[];let Wr=[];const Yf=[],u3=Promise.resolve();let fl=!1;function s3(){fl||(fl=!0,u3.then(f1))}function Qi(e){Wr.push(e)}const _s=new Set;let Fr=0;function f1(){if(Fr!==0)return;const e=Ki;do{try{for(;Fr<Gr.length;){const t=Gr[Fr];Fr++,Hi(t),l3(t.$$)}}catch(t){throw Gr.length=0,Fr=0,t}for(Hi(null),Gr.length=0,Fr=0;He.length;)He.pop()();for(let t=0;t<Wr.length;t+=1){const n=Wr[t];_s.has(n)||(_s.add(n),n())}Wr.length=0}while(Gr.length);for(;Yf.length;)Yf.pop()();fl=!1,_s.clear(),Hi(e)}function l3(e){if(e.fragment!==null){e.update(),gn(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Qi)}}function c3(e){const t=[],n=[];Wr.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Wr=t}const Mo=new Set;let hr;function Xt(){hr={r:0,c:[],p:hr}}function Zt(){hr.r||gn(hr.c),hr=hr.p}function X(e,t){e&&e.i&&(Mo.delete(e),e.i(t))}function ie(e,t,n,r){if(e&&e.o){if(Mo.has(e))return;Mo.add(e),hr.c.push(()=>{Mo.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Pt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Se(e){e&&e.c()}function _e(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Qi(()=>{const a=e.$$.on_mount.map(s1).filter(l1);e.$$.on_destroy?e.$$.on_destroy.push(...a):gn(a),e.$$.on_mount=[]}),i.forEach(Qi)}function Me(e,t){const n=e.$$;n.fragment!==null&&(c3(n.after_update),gn(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function f3(e,t){e.$$.dirty[0]===-1&&(Gr.push(e),s3(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ge(e,t,n,r,i,a,o=null,u=[-1]){const s=Ki;Hi(e);const l=e.$$={fragment:null,ctx:[],props:a,update:se,not_equal:i,bound:Wf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Wf(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,h,...d)=>{const m=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),c&&f3(e,f)),h}):[],l.update(),c=!0,gn(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=a3(t.target);l.fragment&&l.fragment.l(f),f.forEach(Z)}else l.fragment&&l.fragment.c();t.intro&&X(e.$$.fragment),_e(e,t.target,t.anchor),f1()}Hi(s)}class ze{constructor(){vs(this,"$$");vs(this,"$$set")}$destroy(){Me(this,1),this.$destroy=se}$on(t,n){if(!l1(n))return se;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!i3(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const h3="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(h3);function vt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _a(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Eu(e){let t,n,r;e.length!==2?(t=vt,n=(u,s)=>vt(e(u),s),r=(u,s)=>e(u)-s):(t=e===vt||e===_a?e:d3,n=e,r=e);function i(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<0?l=f+1:c=f}while(l<c)}return l}function a(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<=0?l=f+1:c=f}while(l<c)}return l}function o(u,s,l=0,c=u.length){const f=i(u,s,l,c-1);return f>l&&r(u[f-1],s)>-r(u[f],s)?f-1:f}return{left:i,center:o,right:a}}function d3(){return 0}function h1(e){return e===null?NaN:+e}function*m3(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const p3=Eu(vt),Cu=p3.right;Eu(h1).center;function vc(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function b3(e){return e.length|0}function g3(e){return!(e>0)}function y3(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function w3(e){return t=>e(...t)}function v3(...e){const t=typeof e[e.length-1]=="function"&&w3(e.pop());e=e.map(y3);const n=e.map(b3),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(g3))return a;for(;;){a.push(i.map((u,s)=>e[s][u]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function _3(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function _c(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let u of e)(u=t(u,++o,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,a+=r*(u-i))}if(n>1)return a/(n-1)}function Tu(e,t){const n=_c(e,t);return n&&Math.sqrt(n)}function Bt(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class yr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,u=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);u&&(n[r++]=u),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class wr extends Map{constructor(t,n=p1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(hl(this,t))}has(t){return super.has(hl(this,t))}set(t,n){return super.set(d1(this,t),n)}delete(t){return super.delete(m1(this,t))}}class ku extends Set{constructor(t,n=p1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(hl(this,t))}add(t){return super.add(d1(this,t))}delete(t){return super.delete(m1(this,t))}}function hl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function d1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function m1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function p1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Oo(e){return e}function $u(e,...t){return Du(e,Oo,Oo,t)}function $n(e,...t){return Du(e,Array.from,Oo,t)}function Vr(e,t,...n){return Du(e,Oo,t,n)}function M3(e,t,...n){return Du(e,Array.from,t,n)}function Du(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const u=new wr,s=r[o++];let l=-1;for(const c of a){const f=s(c,++l,a),h=u.get(f);h?h.push(c):u.set(f,[c])}for(const[c,f]of u)u.set(c,i(f,o));return t(u)}(e,0)}function x3(e,t){return Array.from(t,n=>e[n])}function Ji(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const u=qo(o[i],o[a]);if(u)return u}})):(n=e.map(n),r.sort((i,a)=>qo(n[i],n[a]))),x3(e,r)}return e.sort(b1(n))}function b1(e=vt){if(e===vt)return qo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Mc(e,t,n){return(t.length!==2?Ji(Vr(e,t,n),([r,i],[a,o])=>vt(i,o)||vt(r,a)):Ji($u(e,n),([r,i],[a,o])=>t(i,o)||vt(r,a))).map(([r])=>r)}const P3=Math.sqrt(50),S3=Math.sqrt(10),A3=Math.sqrt(2);function Go(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=P3?10:a>=S3?5:a>=A3?2:1;let u,s,l;return i<0?(l=Math.pow(10,-i)/o,u=Math.round(e*l),s=Math.round(t*l),u/l<e&&++u,s/l>t&&--s,l=-l):(l=Math.pow(10,i)*o,u=Math.round(e/l),s=Math.round(t/l),u*l<e&&++u,s*l>t&&--s),s<u&&.5<=n&&n<2?Go(e,t,n*2):[u,s,l]}function ea(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Go(t,e,n):Go(e,t,n);if(!(a>=i))return[];const u=a-i+1,s=new Array(u);if(r)if(o<0)for(let l=0;l<u;++l)s[l]=(a-l)/-o;else for(let l=0;l<u;++l)s[l]=(a-l)*o;else if(o<0)for(let l=0;l<u;++l)s[l]=(i+l)/-o;else for(let l=0;l<u;++l)s[l]=(i+l)*o;return s}function zo(e,t,n){return t=+t,e=+e,n=+n,Go(e,t,n)[2]}function dl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?zo(t,e,n):zo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function E3(e){return Math.max(1,Math.ceil(Math.log(vc(e))/Math.LN2)+1)}function Ot(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function C3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Fn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function T3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function g1(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?qo:b1(i);r>n;){if(r-n>600){const s=r-n+1,l=t-n+1,c=Math.log(s),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(s-f)/s)*(l-s/2<0?-1:1),d=Math.max(n,Math.floor(t-l*f/s+h)),m=Math.min(r,Math.floor(t+(s-l)*f/s+h));g1(e,t,d,m,i)}const a=e[t];let o=n,u=r;for(Mi(e,n,t),i(e[r],a)>0&&Mi(e,n,r);o<u;){for(Mi(e,o,u),++o,--u;i(e[o],a)<0;)++o;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?Mi(e,n,u):(++u,Mi(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Mi(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y1(e,t=vt){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?vt(o,i)>0:vt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Qr(e,t,n){if(e=Float64Array.from(m3(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Fn(e);if(t>=1)return Ot(e);var r,i=(r-1)*t,a=Math.floor(i),o=Ot(g1(e,a).subarray(0,a+1)),u=Fn(e.subarray(a+1));return o+(u-o)*(i-a)}}function k3(e,t,n=h1){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function $3(e,t,n){const r=vc(e),i=Qr(e,.75)-Qr(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function w1(e,t,n){const r=vc(e),i=Tu(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Nu(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function ml(e,t){return Qr(e,.5,t)}function*D3(e){for(const t of e)yield*t}function v1(e){return Array.from(D3(e))}function N3(e,t){const n=new wr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function B3(e,t=F3){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function F3(e,t){return[e,t]}function pl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Kn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Uo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function L3(e){return e}var Ms=1,xs=2,bl=3,Ka=4,jf=1e-6;function R3(e){return"translate("+e+",0)"}function I3(e){return"translate(0,"+e+")"}function O3(e){return t=>+e(t)}function q3(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function G3(){return!this.__axis}function z3(e,t){var n=[],r=null,i=null,a=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===Ms||e===Ka?-1:1,c=e===Ka||e===xs?"x":"y",f=e===Ms||e===bl?R3:I3;function h(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):L3),g=Math.max(a,0)+u,w=t.range(),b=+w[0]+s,v=+w[w.length-1]+s,y=(t.bandwidth?q3:O3)(t.copy(),s),_=d.selection?d.selection():d,M=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(m,t).order(),E=x.exit(),S=x.enter().append("g").attr("class","tick"),k=x.select("line"),A=x.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(S),k=k.merge(S.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),A=A.merge(S.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===Ms?"0em":e===bl?"0.71em":"0.32em")),d!==_&&(M=M.transition(d),x=x.transition(d),k=k.transition(d),A=A.transition(d),E=E.transition(d).attr("opacity",jf).attr("transform",function(L){return isFinite(L=y(L))?f(L+s):this.getAttribute("transform")}),S.attr("opacity",jf).attr("transform",function(L){var G=this.parentNode.__axis;return f((G&&isFinite(G=G(L))?G:y(L))+s)})),E.remove(),M.attr("d",e===Ka||e===xs?o?"M"+l*o+","+b+"H"+s+"V"+v+"H"+l*o:"M"+s+","+b+"V"+v:o?"M"+b+","+l*o+"V"+s+"H"+v+"V"+l*o:"M"+b+","+s+"H"+v),x.attr("opacity",1).attr("transform",function(L){return f(y(L)+s)}),k.attr(c+"2",l*a),A.attr(c,l*g).text(p),_.filter(G3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===xs?"start":e===Ka?"end":"middle"),_.each(function(){this.__axis=y})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(u=+d,h):u},h.offset=function(d){return arguments.length?(s=+d,h):s},h}function U3(e){return z3(bl,e)}var H3={value:()=>{}};function _1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new xo(n)}function xo(e){this._=e}function W3(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}xo.prototype=_1.prototype={constructor:xo,on:function(e,t){var n=this._,r=W3(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=V3(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Xf(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Xf(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new xo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function V3(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Xf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=H3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var gl="http://www.w3.org/1999/xhtml";const Jr={svg:"http://www.w3.org/2000/svg",xhtml:gl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Jr.hasOwnProperty(t)?{space:Jr[t],local:e}:e}function Y3(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gl&&t.documentElement.namespaceURI===gl?t.createElement(e):t.createElementNS(n,e)}}function j3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fu(e){var t=Bu(e);return(t.local?j3:Y3)(t)}function X3(){}function xc(e){return e==null?X3:function(){return this.querySelector(e)}}function Z3(e){typeof e!="function"&&(e=xc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Et(r,this._parents)}function K3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Q3(){return[]}function M1(e){return e==null?Q3:function(){return this.querySelectorAll(e)}}function J3(e){return function(){return K3(e.apply(this,arguments))}}function ew(e){typeof e=="function"?e=J3(e):e=M1(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Et(r,i)}function x1(e){return function(){return this.matches(e)}}function P1(e){return function(t){return t.matches(e)}}var tw=Array.prototype.find;function nw(e){return function(){return tw.call(this.children,e)}}function rw(){return this.firstElementChild}function iw(e){return this.select(e==null?rw:nw(typeof e=="function"?e:P1(e)))}var aw=Array.prototype.filter;function ow(){return Array.from(this.children)}function uw(e){return function(){return aw.call(this.children,e)}}function sw(e){return this.selectAll(e==null?ow:uw(typeof e=="function"?e:P1(e)))}function lw(e){typeof e!="function"&&(e=x1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Et(r,this._parents)}function S1(e){return new Array(e.length)}function cw(){return new Et(this._enter||this._groups.map(S1),this._parents)}function Ho(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ho.prototype={constructor:Ho,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function fw(e){return function(){return e}}function hw(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new Ho(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function dw(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new Ho(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function mw(e){return e.__data__}function pw(e,t){if(!arguments.length)return Array.from(this,mw);var n=t?dw:hw,r=this._parents,i=this._groups;typeof e!="function"&&(e=fw(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=bw(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),w=s[l]=new Array(h);n(c,f,p,g,w,d,t);for(var b=0,v=0,y,_;b<m;++b)if(y=p[b]){for(b>=v&&(v=b+1);!(_=g[v])&&++v<m;);y._next=_||null}}return o=new Et(o,r),o._enter=u,o._exit=s,o}function bw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gw(){return new Et(this._exit||this._groups.map(S1),this._parents)}function yw(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function ww(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var l=n[s],c=r[s],f=l.length,h=u[s]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;s<i;++s)u[s]=n[s];return new Et(u,this._parents)}function vw(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function _w(e){e||(e=Mw);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Et(i,this._parents).order()}function Mw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function xw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Pw(){return Array.from(this)}function Sw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Aw(){let e=0;for(const t of this)++e;return e}function Ew(){return!this.node()}function Cw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function Tw(e){return function(){this.removeAttribute(e)}}function kw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $w(e,t){return function(){this.setAttribute(e,t)}}function Dw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Nw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Bw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Fw(e,t){var n=Bu(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?kw:Tw:typeof t=="function"?n.local?Bw:Nw:n.local?Dw:$w)(n,t))}function A1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Lw(e){return function(){this.style.removeProperty(e)}}function Rw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Iw(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ow(e,t,n){return arguments.length>1?this.each((t==null?Lw:typeof t=="function"?Iw:Rw)(e,t,n??"")):ei(this.node(),e)}function ei(e,t){return e.style.getPropertyValue(t)||A1(e).getComputedStyle(e,null).getPropertyValue(t)}function qw(e){return function(){delete this[e]}}function Gw(e,t){return function(){this[e]=t}}function zw(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Uw(e,t){return arguments.length>1?this.each((t==null?qw:typeof t=="function"?zw:Gw)(e,t)):this.node()[e]}function E1(e){return e.trim().split(/^|\s+/)}function Pc(e){return e.classList||new C1(e)}function C1(e){this._node=e,this._names=E1(e.getAttribute("class")||"")}C1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function T1(e,t){for(var n=Pc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function k1(e,t){for(var n=Pc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Hw(e){return function(){T1(this,e)}}function Ww(e){return function(){k1(this,e)}}function Vw(e,t){return function(){(t.apply(this,arguments)?T1:k1)(this,e)}}function Yw(e,t){var n=E1(e+"");if(arguments.length<2){for(var r=Pc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Vw:t?Hw:Ww)(n,t))}function jw(){this.textContent=""}function Xw(e){return function(){this.textContent=e}}function Zw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Kw(e){return arguments.length?this.each(e==null?jw:(typeof e=="function"?Zw:Xw)(e)):this.node().textContent}function Qw(){this.innerHTML=""}function Jw(e){return function(){this.innerHTML=e}}function ev(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function tv(e){return arguments.length?this.each(e==null?Qw:(typeof e=="function"?ev:Jw)(e)):this.node().innerHTML}function nv(){this.nextSibling&&this.parentNode.appendChild(this)}function rv(){return this.each(nv)}function iv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function av(){return this.each(iv)}function ov(e){var t=typeof e=="function"?e:Fu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function uv(){return null}function sv(e,t){var n=typeof e=="function"?e:Fu(e),r=t==null?uv:typeof t=="function"?t:xc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function lv(){var e=this.parentNode;e&&e.removeChild(this)}function cv(){return this.each(lv)}function fv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dv(e){return this.select(e?hv:fv)}function mv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pv(e){return function(t){e.call(this,t,this.__data__)}}function bv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gv(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function yv(e,t,n){return function(){var r=this.__on,i,a=pv(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function wv(e,t,n){var r=bv(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?yv:gv,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function $1(e,t,n){var r=A1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function vv(e,t){return function(){return $1(this,e,t)}}function _v(e,t){return function(){return $1(this,e,t.apply(this,arguments))}}function Mv(e,t){return this.each((typeof t=="function"?_v:vv)(e,t))}function*xv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var D1=[null];function Et(e,t){this._groups=e,this._parents=t}function Ma(){return new Et([[document.documentElement]],D1)}function Pv(){return this}Et.prototype=Ma.prototype={constructor:Et,select:Z3,selectAll:ew,selectChild:iw,selectChildren:sw,filter:lw,data:pw,enter:cw,exit:gw,join:yw,merge:ww,selection:Pv,order:vw,sort:_w,call:xw,nodes:Pw,node:Sw,size:Aw,empty:Ew,each:Cw,attr:Fw,style:Ow,property:Uw,classed:Yw,text:Kw,html:tv,raise:rv,lower:av,append:ov,insert:sv,remove:cv,clone:dv,datum:mv,on:wv,dispatch:Mv,[Symbol.iterator]:xv};function Wi(e){return typeof e=="string"?new Et([[document.querySelector(e)]],[document.documentElement]):new Et([[e]],D1)}function Sv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Av(e,t){if(e=Sv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function bi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nr(){}var vr=.7,ti=1/vr,Yr="\\s*([+-]?\\d+)\\s*",ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ev=/^#([0-9a-f]{3,8})$/,Cv=new RegExp(`^rgb\\(${Yr},${Yr},${Yr}\\)$`),Tv=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),kv=new RegExp(`^rgba\\(${Yr},${Yr},${Yr},${ta}\\)$`),$v=new RegExp(`^rgba\\(${hn},${hn},${hn},${ta}\\)$`),Dv=new RegExp(`^hsl\\(${ta},${hn},${hn}\\)$`),Nv=new RegExp(`^hsla\\(${ta},${hn},${hn},${ta}\\)$`),Zf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bi(nr,_r,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Kf,formatHex:Kf,formatHex8:Bv,formatHsl:Fv,formatRgb:Qf,toString:Qf});function Kf(){return this.rgb().formatHex()}function Bv(){return this.rgb().formatHex8()}function Fv(){return N1(this).formatHsl()}function Qf(){return this.rgb().formatRgb()}function _r(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ev.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jf(t):n===3?new Je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Cv.exec(e))?new Je(t[1],t[2],t[3],1):(t=Tv.exec(e))?new Je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kv.exec(e))?Qa(t[1],t[2],t[3],t[4]):(t=$v.exec(e))?Qa(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Dv.exec(e))?nh(t[1],t[2]/100,t[3]/100,1):(t=Nv.exec(e))?nh(t[1],t[2]/100,t[3]/100,t[4]):Zf.hasOwnProperty(e)?Jf(Zf[e]):e==="transparent"?new Je(NaN,NaN,NaN,0):null}function Jf(e){return new Je(e>>16&255,e>>8&255,e&255,1)}function Qa(e,t,n,r){return r<=0&&(e=t=n=NaN),new Je(e,t,n,r)}function Sc(e){return e instanceof nr||(e=_r(e)),e?(e=e.rgb(),new Je(e.r,e.g,e.b,e.opacity)):new Je}function Qn(e,t,n,r){return arguments.length===1?Sc(e):new Je(e,t,n,r??1)}function Je(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}bi(Je,Qn,xa(nr,{brighter(e){return e=e==null?ti:Math.pow(ti,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Je(pr(this.r),pr(this.g),pr(this.b),Wo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eh,formatHex:eh,formatHex8:Lv,formatRgb:th,toString:th}));function eh(){return`#${dr(this.r)}${dr(this.g)}${dr(this.b)}`}function Lv(){return`#${dr(this.r)}${dr(this.g)}${dr(this.b)}${dr((isNaN(this.opacity)?1:this.opacity)*255)}`}function th(){const e=Wo(this.opacity);return`${e===1?"rgb(":"rgba("}${pr(this.r)}, ${pr(this.g)}, ${pr(this.b)}${e===1?")":`, ${e})`}`}function Wo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dr(e){return e=pr(e),(e<16?"0":"")+e.toString(16)}function nh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Yt(e,t,n,r)}function N1(e){if(e instanceof Yt)return new Yt(e.h,e.s,e.l,e.opacity);if(e instanceof nr||(e=_r(e)),!e)return new Yt;if(e instanceof Yt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new Yt(o,u,s,e.opacity)}function yl(e,t,n,r){return arguments.length===1?N1(e):new Yt(e,t,n,r??1)}function Yt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}bi(Yt,yl,xa(nr,{brighter(e){return e=e==null?ti:Math.pow(ti,e),new Yt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new Yt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Je(Ps(e>=240?e-240:e+120,i,r),Ps(e,i,r),Ps(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Yt(rh(this.h),Ja(this.s),Ja(this.l),Wo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wo(this.opacity);return`${e===1?"hsl(":"hsla("}${rh(this.h)}, ${Ja(this.s)*100}%, ${Ja(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rh(e){return e=(e||0)%360,e<0?e+360:e}function Ja(e){return Math.max(0,Math.min(1,e||0))}function Ps(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const B1=Math.PI/180,F1=180/Math.PI,Vo=18,L1=.96422,R1=1,I1=.82521,O1=4/29,jr=6/29,q1=3*jr*jr,Rv=jr*jr*jr;function G1(e){if(e instanceof dn)return new dn(e.l,e.a,e.b,e.opacity);if(e instanceof Dn)return z1(e);e instanceof Je||(e=Sc(e));var t=Cs(e.r),n=Cs(e.g),r=Cs(e.b),i=Ss((.2225045*t+.7168786*n+.0606169*r)/R1),a,o;return t===n&&n===r?a=o=i:(a=Ss((.4360747*t+.3850649*n+.1430804*r)/L1),o=Ss((.0139322*t+.0971045*n+.7141733*r)/I1)),new dn(116*i-16,500*(a-i),200*(i-o),e.opacity)}function wl(e,t,n,r){return arguments.length===1?G1(e):new dn(e,t,n,r??1)}function dn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}bi(dn,wl,xa(nr,{brighter(e){return new dn(this.l+Vo*(e??1),this.a,this.b,this.opacity)},darker(e){return new dn(this.l-Vo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=L1*As(t),e=R1*As(e),n=I1*As(n),new Je(Es(3.1338561*t-1.6168667*e-.4906146*n),Es(-.9787684*t+1.9161415*e+.033454*n),Es(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Ss(e){return e>Rv?Math.pow(e,1/3):e/q1+O1}function As(e){return e>jr?e*e*e:q1*(e-O1)}function Es(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Cs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Iv(e){if(e instanceof Dn)return new Dn(e.h,e.c,e.l,e.opacity);if(e instanceof dn||(e=G1(e)),e.a===0&&e.b===0)return new Dn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*F1;return new Dn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function vl(e,t,n,r){return arguments.length===1?Iv(e):new Dn(e,t,n,r??1)}function Dn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function z1(e){if(isNaN(e.h))return new dn(e.l,0,0,e.opacity);var t=e.h*B1;return new dn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}bi(Dn,vl,xa(nr,{brighter(e){return new Dn(this.h,this.c,this.l+Vo*(e??1),this.opacity)},darker(e){return new Dn(this.h,this.c,this.l-Vo*(e??1),this.opacity)},rgb(){return z1(this).rgb()}}));var U1=-.14861,Ac=1.78277,Ec=-.29227,Lu=-.90649,na=1.97294,ih=na*Lu,ah=na*Ac,oh=Ac*Ec-Lu*U1;function Ov(e){if(e instanceof br)return new br(e.h,e.s,e.l,e.opacity);e instanceof Je||(e=Sc(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(oh*r+ih*t-ah*n)/(oh+ih-ah),a=r-i,o=(na*(n-i)-Ec*a)/Lu,u=Math.sqrt(o*o+a*a)/(na*i*(1-i)),s=u?Math.atan2(o,a)*F1-120:NaN;return new br(s<0?s+360:s,u,i,e.opacity)}function pn(e,t,n,r){return arguments.length===1?Ov(e):new br(e,t,n,r??1)}function br(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}bi(br,pn,xa(nr,{brighter(e){return e=e==null?ti:Math.pow(ti,e),new br(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new br(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*B1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Je(255*(t+n*(U1*r+Ac*i)),255*(t+n*(Ec*r+Lu*i)),255*(t+n*(na*r)),this.opacity)}}));function qv(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function Gv(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return qv((n-r/t)*t,o,i,a,u)}}const Ru=e=>()=>e;function H1(e,t){return function(n){return e+n*t}}function zv(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Cc(e,t){var n=t-e;return n?H1(e,n>180||n<-180?n-360*Math.round(n/360):n):Ru(isNaN(e)?t:e)}function Uv(e){return(e=+e)==1?ut:function(t,n){return n-t?zv(t,n,e):Ru(isNaN(t)?n:t)}}function ut(e,t){var n=t-e;return n?H1(e,n):Ru(isNaN(e)?t:e)}const Mr=function e(t){var n=Uv(t);function r(i,a){var o=n((i=Qn(i)).r,(a=Qn(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=ut(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Hv(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,u;for(o=0;o<n;++o)u=Qn(t[o]),r[o]=u.r||0,i[o]=u.g||0,a[o]=u.b||0;return r=e(r),i=e(i),a=e(a),u.opacity=1,function(s){return u.r=r(s),u.g=i(s),u.b=a(s),u+""}}}var Wv=Hv(Gv);function Vv(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Yv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jv(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Pa(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function Xv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Zv(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Pa(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var _l=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ts=new RegExp(_l.source,"g");function Kv(e){return function(){return e}}function Qv(e){return function(t){return e(t)+""}}function W1(e,t){var n=_l.lastIndex=Ts.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=_l.exec(e))&&(i=Ts.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:ot(r,i)})),n=Ts.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?Qv(s[0].x):Kv(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}function Pa(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ru(t):(n==="number"?ot:n==="string"?(r=_r(t))?(t=r,Mr):W1:t instanceof _r?Mr:t instanceof Date?Xv:Yv(t)?Vv:Array.isArray(t)?jv:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Zv:ot)(e,t)}function Tc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var uh=180/Math.PI,Ml={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V1(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*uh,skewX:Math.atan(s)*uh,scaleX:o,scaleY:u}}var eo;function Jv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ml:V1(t.a,t.b,t.c,t.d,t.e,t.f)}function e_(e){return e==null||(eo||(eo=document.createElementNS("http://www.w3.org/2000/svg","g")),eo.setAttribute("transform",e),!(e=eo.transform.baseVal.consolidate()))?Ml:(e=e.matrix,V1(e.a,e.b,e.c,e.d,e.e,e.f))}function Y1(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:ot(l,f)},{i:p-2,x:ot(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ot(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ot(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:ot(l,f)},{i:p-2,x:ot(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var t_=Y1(Jv,"px, ","px)","deg)"),n_=Y1(e_,", ",")",")");function r_(e){return function(t,n){var r=e((t=yl(t)).h,(n=yl(n)).h),i=ut(t.s,n.s),a=ut(t.l,n.l),o=ut(t.opacity,n.opacity);return function(u){return t.h=r(u),t.s=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const i_=r_(Cc);function a_(e,t){var n=ut((e=wl(e)).l,(t=wl(t)).l),r=ut(e.a,t.a),i=ut(e.b,t.b),a=ut(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function o_(e){return function(t,n){var r=e((t=vl(t)).h,(n=vl(n)).h),i=ut(t.c,n.c),a=ut(t.l,n.l),o=ut(t.opacity,n.opacity);return function(u){return t.h=r(u),t.c=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const u_=o_(Cc);function j1(e){return function t(n){n=+n;function r(i,a){var o=e((i=pn(i)).h,(a=pn(a)).h),u=ut(i.s,a.s),s=ut(i.l,a.l),l=ut(i.opacity,a.opacity);return function(c){return i.h=o(c),i.s=u(c),i.l=s(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}j1(Cc);var kc=j1(ut);function Iu(e,t){t===void 0&&(t=e,e=Pa);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}function Kt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ni=0,Di=0,xi=0,X1=1e3,Yo,Ni,jo=0,xr=0,Ou=0,ra=typeof performance=="object"&&performance.now?performance:Date,Z1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $c(){return xr||(Z1(s_),xr=ra.now()+Ou)}function s_(){xr=0}function Xo(){this._call=this._time=this._next=null}Xo.prototype=K1.prototype={constructor:Xo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$c():+n)+(t==null?0:+t),!this._next&&Ni!==this&&(Ni?Ni._next=this:Yo=this,Ni=this),this._call=e,this._time=n,xl()},stop:function(){this._call&&(this._call=null,this._time=1/0,xl())}};function K1(e,t,n){var r=new Xo;return r.restart(e,t,n),r}function l_(){$c(),++ni;for(var e=Yo,t;e;)(t=xr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ni}function sh(){xr=(jo=ra.now())+Ou,ni=Di=0;try{l_()}finally{ni=0,f_(),xr=0}}function c_(){var e=ra.now(),t=e-jo;t>X1&&(Ou-=t,jo=e)}function f_(){for(var e,t=Yo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Yo=n);Ni=e,xl(r)}function xl(e){if(!ni){Di&&(Di=clearTimeout(Di));var t=e-xr;t>24?(e<1/0&&(Di=setTimeout(sh,e-ra.now()-Ou)),xi&&(xi=clearInterval(xi))):(xi||(jo=ra.now(),xi=setInterval(c_,X1)),ni=1,Z1(sh))}}function lh(e,t,n){var r=new Xo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var h_=_1("start","end","cancel","interrupt"),d_=[],Q1=0,ch=1,Pl=2,Po=3,fh=4,Sl=5,So=6;function qu(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;m_(e,n,{name:t,index:r,group:i,on:h_,tween:d_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Q1})}function Dc(e,t){var n=tn(e,t);if(n.state>Q1)throw new Error("too late; already scheduled");return n}function yn(e,t){var n=tn(e,t);if(n.state>Po)throw new Error("too late; already running");return n}function tn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function m_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=K1(a,0,n.time);function a(l){n.state=ch,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==ch)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Po)return lh(o);d.state===fh?(d.state=So,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=So,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(lh(function(){n.state===Po&&(n.state=fh,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=Pl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pl){for(n.state=Po,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=Sl,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===Sl&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=So,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function p_(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Pl&&r.state<Sl,r.state=So,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function b_(e){return this.each(function(){p_(this,e)})}function g_(e,t){var n,r;return function(){var i=yn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function y_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=yn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function w_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=tn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?g_:y_)(n,e,t))}function Nc(e,t,n){var r=e._id;return e.each(function(){var i=yn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return tn(i,r).value[t]}}function J1(e,t){var n;return(typeof t=="number"?ot:t instanceof _r?Mr:(n=_r(t))?(t=n,Mr):W1)(e,t)}function v_(e){return function(){this.removeAttribute(e)}}function __(e){return function(){this.removeAttributeNS(e.space,e.local)}}function M_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function x_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function P_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function S_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function A_(e,t){var n=Bu(e),r=n==="transform"?n_:J1;return this.attrTween(e,typeof t=="function"?(n.local?S_:P_)(n,r,Nc(this,"attr."+e,t)):t==null?(n.local?__:v_)(n):(n.local?x_:M_)(n,r,t))}function E_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function C_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function T_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&C_(e,a)),n}return i._value=t,i}function k_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&E_(e,a)),n}return i._value=t,i}function $_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Bu(e);return this.tween(n,(r.local?T_:k_)(r,t))}function D_(e,t){return function(){Dc(this,e).delay=+t.apply(this,arguments)}}function N_(e,t){return t=+t,function(){Dc(this,e).delay=t}}function B_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?D_:N_)(t,e)):tn(this.node(),t).delay}function F_(e,t){return function(){yn(this,e).duration=+t.apply(this,arguments)}}function L_(e,t){return t=+t,function(){yn(this,e).duration=t}}function R_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?F_:L_)(t,e)):tn(this.node(),t).duration}function I_(e,t){if(typeof t!="function")throw new Error;return function(){yn(this,e).ease=t}}function O_(e){var t=this._id;return arguments.length?this.each(I_(t,e)):tn(this.node(),t).ease}function q_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yn(this,e).ease=n}}function G_(e){if(typeof e!="function")throw new Error;return this.each(q_(this._id,e))}function z_(e){typeof e!="function"&&(e=x1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Ln(r,this._parents,this._name,this._id)}function U_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Ln(o,this._parents,this._name,this._id)}function H_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function W_(e,t,n){var r,i,a=H_(t)?Dc:yn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function V_(e,t){var n=this._id;return arguments.length<2?tn(this.node(),n).on.on(e):this.each(W_(n,e,t))}function Y_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function j_(){return this.on("end.remove",Y_(this._id))}function X_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=xc(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,qu(l[h],t,n,h,l,tn(c,n)));return new Ln(a,this._parents,t,n)}function Z_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=M1(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=tn(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&qu(d,t,n,p,h,m);a.push(h),o.push(c)}return new Ln(a,o,t,n)}var K_=Ma.prototype.constructor;function Q_(){return new K_(this._groups,this._parents)}function J_(e,t){var n,r,i;return function(){var a=ei(this,e),o=(this.style.removeProperty(e),ei(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function em(e){return function(){this.style.removeProperty(e)}}function e5(e,t,n){var r,i=n+"",a;return function(){var o=ei(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function t5(e,t,n){var r,i,a;return function(){var o=ei(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),ei(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function n5(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=yn(this,e),l=s.on,c=s.value[a]==null?u||(u=em(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function r5(e,t,n){var r=(e+="")=="transform"?t_:J1;return t==null?this.styleTween(e,J_(e,r)).on("end.style."+e,em(e)):typeof t=="function"?this.styleTween(e,t5(e,r,Nc(this,"style."+e,t))).each(n5(this._id,e)):this.styleTween(e,e5(e,r,t),n).on("end.style."+e,null)}function i5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function a5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&i5(e,o,n)),r}return a._value=t,a}function o5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,a5(e,t,n??""))}function u5(e){return function(){this.textContent=e}}function s5(e){return function(){var t=e(this);this.textContent=t??""}}function l5(e){return this.tween("text",typeof e=="function"?s5(Nc(this,"text",e)):u5(e==null?"":e+""))}function c5(e){return function(t){this.textContent=e.call(this,t)}}function f5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&c5(i)),t}return r._value=e,r}function h5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,f5(e))}function d5(){for(var e=this._name,t=this._id,n=tm(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=tn(s,t);qu(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ln(r,this._parents,e,n)}function m5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=yn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var p5=0;function Ln(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function tm(){return++p5}var _n=Ma.prototype;Ln.prototype={constructor:Ln,select:X_,selectAll:Z_,selectChild:_n.selectChild,selectChildren:_n.selectChildren,filter:z_,merge:U_,selection:Q_,transition:d5,call:_n.call,nodes:_n.nodes,node:_n.node,size:_n.size,empty:_n.empty,each:_n.each,on:V_,attr:A_,attrTween:$_,style:r5,styleTween:o5,text:l5,textTween:h5,remove:j_,tween:w_,delay:B_,duration:R_,ease:O_,easeVarying:G_,end:m5,[Symbol.iterator]:_n[Symbol.iterator]};function b5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var g5={time:null,delay:0,duration:250,ease:b5};function y5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function w5(e){var t,n;e instanceof Ln?(t=e._id,e=e._name):(t=tm(),(n=g5).time=$c(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&qu(s,e,t,l,o,n||y5(s,t));return new Ln(r,this._parents,e,t)}Ma.prototype.interrupt=b_;Ma.prototype.transition=w5;const Al=Math.PI,El=2*Al,lr=1e-6,v5=El-lr;function nm(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return nm;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class rm{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?nm:_5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-t,l=i-n,c=o-t,f=u-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>lr)if(!(Math.abs(f*s-l*c)>lr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-u,p=s*s+l*l,g=d*d+m*m,w=Math.sqrt(p),b=Math.sqrt(h),v=a*Math.tan((Al-Math.acos((p+h-g)/(2*w*b)))/2),y=v/b,_=v/w;Math.abs(y-1)>lr&&this._append`L${t+y*c},${n+y*f}`,this._append`A${a},${a},0,0,${+(f*d>c*m)},${this._x1=t+_*s},${this._y1=n+_*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),l=t+u,c=n+s,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>lr||Math.abs(this._y1-c)>lr)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%El+El),h>v5?this._append`A${r},${r},0,1,${f},${t-u},${n-s}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>lr&&this._append`A${r},${r},0,${+(h>=Al)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Yn(e=3){return new rm(+e)}var hh={},ks={},$s=34,Pi=10,Ds=13;function im(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function M5(e,t){var n=im(e);return function(r,i){return t(n(r),i,e)}}function dh(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function gt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function x5(e){return e<0?"-"+gt(-e,6):e>9999?"+"+gt(e,6):gt(e,4)}function P5(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":x5(e.getUTCFullYear())+"-"+gt(e.getUTCMonth()+1,2)+"-"+gt(e.getUTCDate(),2)+(i?"T"+gt(t,2)+":"+gt(n,2)+":"+gt(r,2)+"."+gt(i,3)+"Z":r?"T"+gt(t,2)+":"+gt(n,2)+":"+gt(r,2)+"Z":n||t?"T"+gt(t,2)+":"+gt(n,2)+"Z":"")}function S5(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var d,m,p=i(f,function(g,w){if(d)return d(g,w-1);m=g,d=h?M5(g,h):im(g)});return p.columns=m||[],p}function i(f,h){var d=[],m=f.length,p=0,g=0,w,b=m<=0,v=!1;f.charCodeAt(m-1)===Pi&&--m,f.charCodeAt(m-1)===Ds&&--m;function y(){if(b)return ks;if(v)return v=!1,hh;var M,x=p,E;if(f.charCodeAt(x)===$s){for(;p++<m&&f.charCodeAt(p)!==$s||f.charCodeAt(++p)===$s;);return(M=p)>=m?b=!0:(E=f.charCodeAt(p++))===Pi?v=!0:E===Ds&&(v=!0,f.charCodeAt(p)===Pi&&++p),f.slice(x+1,M-1).replace(/""/g,'"')}for(;p<m;){if((E=f.charCodeAt(M=p++))===Pi)v=!0;else if(E===Ds)v=!0,f.charCodeAt(p)===Pi&&++p;else if(E!==n)continue;return f.slice(x,M)}return b=!0,f.slice(x,m)}for(;(w=y())!==ks;){for(var _=[];w!==hh&&w!==ks;)_.push(w),w=y();h&&(_=h(_,g++))==null||d.push(_)}return d}function a(f,h){return f.map(function(d){return h.map(function(m){return c(d[m])}).join(e)})}function o(f,h){return h==null&&(h=dh(f)),[h.map(c).join(e)].concat(a(f,h)).join(`
`)}function u(f,h){return h==null&&(h=dh(f)),a(f,h).join(`
`)}function s(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?P5(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:u,formatRows:s,formatRow:l,formatValue:c}}var A5=S5(","),E5=A5.parse;function C5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ri(e){return e=Zo(Math.abs(e)),e?e[1]:NaN}function T5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function k5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ia(e){if(!(t=$5.exec(e)))throw new Error("invalid format: "+e);var t;return new Bc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ia.prototype=Bc.prototype;function Bc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Bc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function D5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var am;function N5(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(am=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zo(e,Math.max(0,t+a-1))[0]}function mh(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ph={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:C5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>mh(e*100,t),r:mh,s:N5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bh(e){return e}var gh=Array.prototype.map,yh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function B5(e){var t=e.grouping===void 0||e.thousands===void 0?bh:T5(gh.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?bh:k5(gh.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function l(f){f=ia(f);var h=f.fill,d=f.align,m=f.sign,p=f.symbol,g=f.zero,w=f.width,b=f.comma,v=f.precision,y=f.trim,_=f.type;_==="n"?(b=!0,_="g"):ph[_]||(v===void 0&&(v=12),y=!0,_="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var M=p==="$"?n:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",x=p==="$"?r:/[%p]/.test(_)?o:"",E=ph[_],S=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function k(A){var L=M,G=x,F,C,q;if(_==="c")G=E(A)+G,A="";else{A=+A;var ee=A<0||1/A<0;if(A=isNaN(A)?s:E(Math.abs(A),v),y&&(A=D5(A)),ee&&+A==0&&m!=="+"&&(ee=!1),L=(ee?m==="("?m:u:m==="-"||m==="("?"":m)+L,G=(_==="s"?yh[8+am/3]:"")+G+(ee&&m==="("?")":""),S){for(F=-1,C=A.length;++F<C;)if(q=A.charCodeAt(F),48>q||q>57){G=(q===46?i+A.slice(F+1):A.slice(F))+G,A=A.slice(0,F);break}}}b&&!g&&(A=t(A,1/0));var te=L.length+A.length+G.length,Q=te<w?new Array(w-te+1).join(h):"";switch(b&&g&&(A=t(Q+A,Q.length?w-G.length:1/0),Q=""),d){case"<":A=L+A+G+Q;break;case"=":A=L+Q+A+G;break;case"^":A=Q.slice(0,te=Q.length>>1)+L+A+G+Q.slice(te);break;default:A=Q+L+A+G;break}return a(A)}return k.toString=function(){return f+""},k}function c(f,h){var d=l((f=ia(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(ri(h)/3)))*3,p=Math.pow(10,-m),g=yh[8+m/3];return function(w){return d(p*w)+g}}return{format:l,formatPrefix:c}}var to,gi,om;F5({thousands:",",grouping:[3],currency:["$",""]});function F5(e){return to=B5(e),gi=to.format,om=to.formatPrefix,to}function L5(e){return Math.max(0,-ri(Math.abs(e)))}function R5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ri(t)/3)))*3-ri(Math.abs(e)))}function I5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ri(t)-ri(e))+1}var de=1e-6,um=1e-12,ge=Math.PI,Ie=ge/2,wh=ge/4,Ct=ge*2,ct=180/ge,Re=ge/180,Te=Math.abs,yi=Math.atan,Rn=Math.atan2,be=Math.cos,sm=Math.exp,Ko=Math.log,Ns=Math.pow,fe=Math.sin,Ft=Math.sign||function(e){return e>0?1:e<0?-1:0},_t=Math.sqrt,Fc=Math.tan;function lm(e){return e>1?0:e<-1?ge:Math.acos(e)}function qt(e){return e>1?Ie:e<-1?-Ie:Math.asin(e)}function Lt(){}function Qo(e,t){e&&_h.hasOwnProperty(e.type)&&_h[e.type](e,t)}var vh={Feature:function(e,t){Qo(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Qo(n[r].geometry,t)}},_h={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cl(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Cl(n[r],t,0)},Polygon:function(e,t){Mh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Mh(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Qo(n[r],t)}};function Cl(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Mh(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Cl(e[n],t,1);t.polygonEnd()}function fr(e,t){e&&vh.hasOwnProperty(e.type)?vh[e.type](e,t):Qo(e,t)}function Tl(e){return[Rn(e[1],e[0]),qt(e[2])]}function ii(e){var t=e[0],n=e[1],r=be(n);return[r*be(t),r*fe(t),fe(n)]}function no(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Bs(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ro(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kl(e){var t=_t(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function $l(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Dl(e,t){return Te(e)>ge&&(e-=Math.round(e/Ct)*Ct),[e,t]}Dl.invert=Dl;function cm(e,t,n){return(e%=Ct)?t||n?$l(Ph(e),Sh(t,n)):Ph(e):t||n?Sh(t,n):Dl}function xh(e){return function(t,n){return t+=e,Te(t)>ge&&(t-=Math.round(t/Ct)*Ct),[t,n]}}function Ph(e){var t=xh(e);return t.invert=xh(-e),t}function Sh(e,t){var n=be(e),r=fe(e),i=be(t),a=fe(t);function o(u,s){var l=be(s),c=be(u)*l,f=fe(u)*l,h=fe(s),d=h*n+c*r;return[Rn(f*i-d*a,c*n-h*r),qt(d*i+f*a)]}return o.invert=function(u,s){var l=be(s),c=be(u)*l,f=fe(u)*l,h=fe(s),d=h*i-f*a;return[Rn(f*i+h*a,c*n+d*r),qt(d*n-c*r)]},o}function O5(e){e=cm(e[0]*Re,e[1]*Re,e.length>2?e[2]*Re:0);function t(n){return n=e(n[0]*Re,n[1]*Re),n[0]*=ct,n[1]*=ct,n}return t.invert=function(n){return n=e.invert(n[0]*Re,n[1]*Re),n[0]*=ct,n[1]*=ct,n},t}function q5(e,t,n,r,i,a){if(n){var o=be(t),u=fe(t),s=r*n;i==null?(i=t+r*Ct,a=t-s/2):(i=Ah(o,i),a=Ah(o,a),(r>0?i<a:i>a)&&(i+=r*Ct));for(var l,c=i;r>0?c>a:c<a;c-=s)l=Tl([o,-u*be(c),-u*fe(c)]),e.point(l[0],l[1])}}function Ah(e,t){t=ii(t),t[0]-=e,kl(t);var n=lm(-t[1]);return((-t[2]<0?-n:n)+Ct-de)%Ct}function fm(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Lt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ao(e,t){return Te(e[0]-t[0])<de&&Te(e[1]-t[1])<de}function io(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function hm(e,t,n,r,i){var a=[],o=[],u,s;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,g=m[0],w=m[p],b;if(Ao(g,w)){if(!g[2]&&!w[2]){for(i.lineStart(),u=0;u<p;++u)i.point((g=m[u])[0],g[1]);i.lineEnd();return}w[0]+=2*de}a.push(b=new io(g,m,null,!0)),o.push(b.o=new io(g,null,b,!1)),a.push(b=new io(w,m,null,!1)),o.push(b.o=new io(w,null,b,!0))}}),!!a.length){for(o.sort(t),Eh(a),Eh(o),u=0,s=o.length;u<s;++u)o[u].e=n=!n;for(var l=a[0],c,f;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Eh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Fs(e){return Te(e[0])<=ge?e[0]:Ft(e[0])*((Te(e[0])+ge)%Ct-ge)}function G5(e,t){var n=Fs(t),r=t[1],i=fe(r),a=[fe(n),-be(n),0],o=0,u=0,s=new yr;i===1?r=Ie+de:i===-1&&(r=-Ie-de);for(var l=0,c=e.length;l<c;++l)if(h=(f=e[l]).length)for(var f,h,d=f[h-1],m=Fs(d),p=d[1]/2+wh,g=fe(p),w=be(p),b=0;b<h;++b,m=y,g=M,w=x,d=v){var v=f[b],y=Fs(v),_=v[1]/2+wh,M=fe(_),x=be(_),E=y-m,S=E>=0?1:-1,k=S*E,A=k>ge,L=g*M;if(s.add(Rn(L*S*fe(k),w*x+L*be(k))),o+=A?E+S*Ct:E,A^m>=n^y>=n){var G=Jo(ii(d),ii(v));kl(G);var F=Jo(a,G);kl(F);var C=(A^E>=0?-1:1)*qt(F[2]);(r>C||r===C&&(G[0]||G[1]))&&(u+=A^E>=0?1:-1)}}return(o<-de||o<de&&s<-um)^u&1}function dm(e,t,n,r){return function(i){var a=t(i),o=fm(),u=t(o),s=!1,l,c,f,h={point:d,lineStart:p,lineEnd:g,polygonStart:function(){h.point=w,h.lineStart=b,h.lineEnd=v,c=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=p,h.lineEnd=g,c=v1(c);var y=G5(l,r);c.length?(s||(i.polygonStart(),s=!0),hm(c,U5,y,n,i)):y&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(y,_){e(y,_)&&i.point(y,_)}function m(y,_){a.point(y,_)}function p(){h.point=m,a.lineStart()}function g(){h.point=d,a.lineEnd()}function w(y,_){f.push([y,_]),u.point(y,_)}function b(){u.lineStart(),f=[]}function v(){w(f[0][0],f[0][1]),u.lineEnd();var y=u.clean(),_=o.result(),M,x=_.length,E,S,k;if(f.pop(),l.push(f),f=null,!!x){if(y&1){if(S=_[0],(E=S.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),M=0;M<E;++M)i.point((k=S[M])[0],k[1]);i.lineEnd()}return}x>1&&y&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(z5))}}return h}}function z5(e){return e.length>1}function U5(e,t){return((e=e.x)[0]<0?e[1]-Ie-de:Ie-e[1])-((t=t.x)[0]<0?t[1]-Ie-de:Ie-t[1])}const Ch=dm(function(){return!0},H5,V5,[-ge,-Ie]);function H5(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var u=a>0?ge:-ge,s=Te(a-t);Te(s-ge)<de?(e.point(t,n=(n+o)/2>0?Ie:-Ie),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(a,n),i=0):r!==u&&s>=ge&&(Te(t-r)<de&&(t-=r*de),Te(a-u)<de&&(a-=u*de),n=W5(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=a,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function W5(e,t,n,r){var i,a,o=fe(e-n);return Te(o)>de?yi((fe(t)*(a=be(r))*fe(n)-fe(r)*(i=be(t))*fe(e))/(i*a*o)):(t+r)/2}function V5(e,t,n,r){var i;if(e==null)i=n*Ie,r.point(-ge,i),r.point(0,i),r.point(ge,i),r.point(ge,0),r.point(ge,-i),r.point(0,-i),r.point(-ge,-i),r.point(-ge,0),r.point(-ge,i);else if(Te(e[0]-t[0])>de){var a=e[0]<t[0]?ge:-ge;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Y5(e){var t=be(e),n=6*Re,r=t>0,i=Te(t)>de;function a(c,f,h,d){q5(d,e,n,h,c,f)}function o(c,f){return be(c)*be(f)>t}function u(c){var f,h,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(g,w){var b=[g,w],v,y=o(g,w),_=r?y?0:l(g,w):y?l(g+(g<0?ge:-ge),w):0;if(!f&&(m=d=y)&&c.lineStart(),y!==d&&(v=s(f,b),(!v||Ao(f,v)||Ao(b,v))&&(b[2]=1)),y!==d)p=0,y?(c.lineStart(),v=s(b,f),c.point(v[0],v[1])):(v=s(f,b),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(i&&f&&r^y){var M;!(_&h)&&(M=s(b,f,!0))&&(p=0,r?(c.lineStart(),c.point(M[0][0],M[0][1]),c.point(M[1][0],M[1][1]),c.lineEnd()):(c.point(M[1][0],M[1][1]),c.lineEnd(),c.lineStart(),c.point(M[0][0],M[0][1],3)))}y&&(!f||!Ao(f,b))&&c.point(b[0],b[1]),f=b,d=y,h=_},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return p|(m&&d)<<1}}}function s(c,f,h){var d=ii(c),m=ii(f),p=[1,0,0],g=Jo(d,m),w=no(g,g),b=g[0],v=w-b*b;if(!v)return!h&&c;var y=t*w/v,_=-t*b/v,M=Jo(p,g),x=ro(p,y),E=ro(g,_);Bs(x,E);var S=M,k=no(x,S),A=no(S,S),L=k*k-A*(no(x,x)-1);if(!(L<0)){var G=_t(L),F=ro(S,(-k-G)/A);if(Bs(F,x),F=Tl(F),!h)return F;var C=c[0],q=f[0],ee=c[1],te=f[1],Q;q<C&&(Q=C,C=q,q=Q);var z=q-C,U=Te(z-ge)<de,$=U||z<de;if(!U&&te<ee&&(Q=ee,ee=te,te=Q),$?U?ee+te>0^F[1]<(Te(F[0]-C)<de?ee:te):ee<=F[1]&&F[1]<=te:z>ge^(C<=F[0]&&F[0]<=q)){var I=ro(S,(-k+G)/A);return Bs(I,x),[F,Tl(I)]}}}function l(c,f){var h=r?e:ge-e,d=0;return c<-h?d|=1:c>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return dm(o,u,a,r?[0,-e]:[-ge,e-ge])}function j5(e,t,n,r,i,a){var o=e[0],u=e[1],s=t[0],l=t[1],c=0,f=1,h=s-o,d=l-u,m;if(m=n-o,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=i-o,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}if(m=r-u,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=a-u,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=o+c*h,e[1]=u+c*d),f<1&&(t[0]=o+f*h,t[1]=u+f*d),!0}}}}}var Bi=1e9,ao=-Bi;function mm(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function a(l,c,f,h){var d=0,m=0;if(l==null||(d=o(l,f))!==(m=o(c,f))||s(l,c)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==m);else h.point(c[0],c[1])}function o(l,c){return Te(l[0]-e)<de?c>0?0:3:Te(l[0]-n)<de?c>0?2:1:Te(l[1]-t)<de?c>0?1:0:c>0?3:2}function u(l,c){return s(l.x,c.x)}function s(l,c){var f=o(l,1),h=o(c,1);return f!==h?f-h:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=fm(),h,d,m,p,g,w,b,v,y,_,M,x={point:E,lineStart:L,lineEnd:G,polygonStart:k,polygonEnd:A};function E(C,q){i(C,q)&&c.point(C,q)}function S(){for(var C=0,q=0,ee=d.length;q<ee;++q)for(var te=d[q],Q=1,z=te.length,U=te[0],$,I,J=U[0],ue=U[1];Q<z;++Q)$=J,I=ue,U=te[Q],J=U[0],ue=U[1],I<=r?ue>r&&(J-$)*(r-I)>(ue-I)*(e-$)&&++C:ue<=r&&(J-$)*(r-I)<(ue-I)*(e-$)&&--C;return C}function k(){c=f,h=[],d=[],M=!0}function A(){var C=S(),q=M&&C,ee=(h=v1(h)).length;(q||ee)&&(l.polygonStart(),q&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),ee&&hm(h,u,C,a,l),l.polygonEnd()),c=l,h=d=m=null}function L(){x.point=F,d&&d.push(m=[]),_=!0,y=!1,b=v=NaN}function G(){h&&(F(p,g),w&&y&&f.rejoin(),h.push(f.result())),x.point=E,y&&c.lineEnd()}function F(C,q){var ee=i(C,q);if(d&&m.push([C,q]),_)p=C,g=q,w=ee,_=!1,ee&&(c.lineStart(),c.point(C,q));else if(ee&&y)c.point(C,q);else{var te=[b=Math.max(ao,Math.min(Bi,b)),v=Math.max(ao,Math.min(Bi,v))],Q=[C=Math.max(ao,Math.min(Bi,C)),q=Math.max(ao,Math.min(Bi,q))];j5(te,Q,e,t,n,r)?(y||(c.lineStart(),c.point(te[0],te[1])),c.point(Q[0],Q[1]),ee||c.lineEnd(),M=!1):ee&&(c.lineStart(),c.point(C,q),M=!1)}b=C,v=q,y=ee}return x}}const Nl=e=>e;var Ls=new yr,Bl=new yr,pm,bm,Fl,Ll,kn={point:Lt,lineStart:Lt,lineEnd:Lt,polygonStart:function(){kn.lineStart=X5,kn.lineEnd=K5},polygonEnd:function(){kn.lineStart=kn.lineEnd=kn.point=Lt,Ls.add(Te(Bl)),Bl=new yr},result:function(){var e=Ls/2;return Ls=new yr,e}};function X5(){kn.point=Z5}function Z5(e,t){kn.point=gm,pm=Fl=e,bm=Ll=t}function gm(e,t){Bl.add(Ll*e-Fl*t),Fl=e,Ll=t}function K5(){gm(pm,bm)}var ai=1/0,eu=ai,aa=-ai,tu=aa,nu={point:Q5,lineStart:Lt,lineEnd:Lt,polygonStart:Lt,polygonEnd:Lt,result:function(){var e=[[ai,eu],[aa,tu]];return aa=tu=-(eu=ai=1/0),e}};function Q5(e,t){e<ai&&(ai=e),e>aa&&(aa=e),t<eu&&(eu=t),t>tu&&(tu=t)}var Rl=0,Il=0,Fi=0,ru=0,iu=0,zr=0,Ol=0,ql=0,Li=0,ym,wm,un,sn,Nt={point:Pr,lineStart:Th,lineEnd:kh,polygonStart:function(){Nt.lineStart=t4,Nt.lineEnd=n4},polygonEnd:function(){Nt.point=Pr,Nt.lineStart=Th,Nt.lineEnd=kh},result:function(){var e=Li?[Ol/Li,ql/Li]:zr?[ru/zr,iu/zr]:Fi?[Rl/Fi,Il/Fi]:[NaN,NaN];return Rl=Il=Fi=ru=iu=zr=Ol=ql=Li=0,e}};function Pr(e,t){Rl+=e,Il+=t,++Fi}function Th(){Nt.point=J5}function J5(e,t){Nt.point=e4,Pr(un=e,sn=t)}function e4(e,t){var n=e-un,r=t-sn,i=_t(n*n+r*r);ru+=i*(un+e)/2,iu+=i*(sn+t)/2,zr+=i,Pr(un=e,sn=t)}function kh(){Nt.point=Pr}function t4(){Nt.point=r4}function n4(){vm(ym,wm)}function r4(e,t){Nt.point=vm,Pr(ym=un=e,wm=sn=t)}function vm(e,t){var n=e-un,r=t-sn,i=_t(n*n+r*r);ru+=i*(un+e)/2,iu+=i*(sn+t)/2,zr+=i,i=sn*e-un*t,Ol+=i*(un+e),ql+=i*(sn+t),Li+=i*3,Pr(un=e,sn=t)}function _m(e){this._context=e}_m.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ct);break}}},result:Lt};var Gl=new yr,Rs,Mm,xm,Ri,Ii,oa={point:Lt,lineStart:function(){oa.point=i4},lineEnd:function(){Rs&&Pm(Mm,xm),oa.point=Lt},polygonStart:function(){Rs=!0},polygonEnd:function(){Rs=null},result:function(){var e=+Gl;return Gl=new yr,e}};function i4(e,t){oa.point=Pm,Mm=Ri=e,xm=Ii=t}function Pm(e,t){Ri-=e,Ii-=t,Gl.add(_t(Ri*Ri+Ii*Ii)),Ri=e,Ii=t}let $h,au,Dh,Nh;class Bh{constructor(t){this._append=t==null?Sm:a4(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Dh||this._append!==au){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Dh=r,au=this._append,Nh=this._,this._=i}this._+=Nh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Sm(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function a4(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Sm;if(t!==$h){const n=10**t;$h=t,au=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return au}function Gu(e,t){let n=3,r=4.5,i,a;function o(u){return u&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),fr(u,i(a))),a.result()}return o.area=function(u){return fr(u,i(kn)),kn.result()},o.measure=function(u){return fr(u,i(oa)),oa.result()},o.bounds=function(u){return fr(u,i(nu)),nu.result()},o.centroid=function(u){return fr(u,i(Nt)),Nt.result()},o.projection=function(u){return arguments.length?(i=u==null?(e=null,Nl):(e=u).stream,o):e},o.context=function(u){return arguments.length?(a=u==null?(t=null,new Bh(n)):new _m(t=u),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(a.pointRadius(+u),+u),o):r},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const s=Math.floor(u);if(!(s>=0))throw new RangeError(`invalid digits: ${u}`);n=s}return t===null&&(a=new Bh(n)),o},o.projection(e).digits(n).context(t)}function zl(e){return{stream:zu(e)}}function zu(e){return function(t){var n=new Ul;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Ul(){}Ul.prototype={constructor:Ul,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Lc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),fr(n,e.stream(nu)),t(nu.result()),r!=null&&e.clipExtent(r),e}function Rc(e,t,n){return Lc(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([u,s])},n)}function Am(e,t,n){return Rc(e,[[0,0],t],n)}function Em(e,t,n){return Lc(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,u=-a*r[0][1];e.scale(150*a).translate([o,u])},n)}function Cm(e,t,n){return Lc(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],u=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,u])},n)}var Fh=16,o4=be(30*Re);function Lh(e,t){return+t?s4(e,t):u4(e)}function u4(e){return zu({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function s4(e,t){function n(r,i,a,o,u,s,l,c,f,h,d,m,p,g){var w=l-r,b=c-i,v=w*w+b*b;if(v>4*t&&p--){var y=o+h,_=u+d,M=s+m,x=_t(y*y+_*_+M*M),E=qt(M/=x),S=Te(Te(M)-1)<de||Te(a-f)<de?(a+f)/2:Rn(_,y),k=e(S,E),A=k[0],L=k[1],G=A-r,F=L-i,C=b*G-w*F;(C*C/v>t||Te((w*G+b*F)/v-.5)>.3||o*h+u*d+s*m<o4)&&(n(r,i,a,o,u,s,A,L,S,y/=x,_/=x,M,p,g),g.point(A,L),n(A,L,S,y,_,M,l,c,f,h,d,m,p,g))}}return function(r){var i,a,o,u,s,l,c,f,h,d,m,p,g={point:w,lineStart:b,lineEnd:y,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function w(E,S){E=e(E,S),r.point(E[0],E[1])}function b(){f=NaN,g.point=v,r.lineStart()}function v(E,S){var k=ii([E,S]),A=e(E,S);n(f,h,c,d,m,p,f=A[0],h=A[1],c=E,d=k[0],m=k[1],p=k[2],Fh,r),r.point(f,h)}function y(){g.point=w,r.lineEnd()}function _(){b(),g.point=M,g.lineEnd=x}function M(E,S){v(i=E,S),a=f,o=h,u=d,s=m,l=p,g.point=v}function x(){n(f,h,c,d,m,p,a,o,i,u,s,l,Fh,r),g.lineEnd=y,y()}return g}}var l4=zu({point:function(e,t){this.stream.point(e*Re,t*Re)}});function c4(e){return zu({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function f4(e,t,n,r,i){function a(o,u){return o*=r,u*=i,[t+e*o,n-e*u]}return a.invert=function(o,u){return[(o-t)/e*r,(n-u)/e*i]},a}function Rh(e,t,n,r,i,a){if(!a)return f4(e,t,n,r,i);var o=be(a),u=fe(a),s=o*e,l=u*e,c=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function m(p,g){return p*=r,g*=i,[s*p-l*g+t,n-l*p-s*g]}return m.invert=function(p,g){return[r*(c*p-f*g+h),i*(d-f*p-c*g)]},m}function rr(e){return Tm(function(){return e})()}function Tm(e){var t,n=150,r=480,i=250,a=0,o=0,u=0,s=0,l=0,c,f=0,h=1,d=1,m=null,p=Ch,g=null,w,b,v,y=Nl,_=.5,M,x,E,S,k;function A(C){return E(C[0]*Re,C[1]*Re)}function L(C){return C=E.invert(C[0],C[1]),C&&[C[0]*ct,C[1]*ct]}A.stream=function(C){return S&&k===C?S:S=l4(c4(c)(p(M(y(k=C)))))},A.preclip=function(C){return arguments.length?(p=C,m=void 0,F()):p},A.postclip=function(C){return arguments.length?(y=C,g=w=b=v=null,F()):y},A.clipAngle=function(C){return arguments.length?(p=+C?Y5(m=C*Re):(m=null,Ch),F()):m*ct},A.clipExtent=function(C){return arguments.length?(y=C==null?(g=w=b=v=null,Nl):mm(g=+C[0][0],w=+C[0][1],b=+C[1][0],v=+C[1][1]),F()):g==null?null:[[g,w],[b,v]]},A.scale=function(C){return arguments.length?(n=+C,G()):n},A.translate=function(C){return arguments.length?(r=+C[0],i=+C[1],G()):[r,i]},A.center=function(C){return arguments.length?(a=C[0]%360*Re,o=C[1]%360*Re,G()):[a*ct,o*ct]},A.rotate=function(C){return arguments.length?(u=C[0]%360*Re,s=C[1]%360*Re,l=C.length>2?C[2]%360*Re:0,G()):[u*ct,s*ct,l*ct]},A.angle=function(C){return arguments.length?(f=C%360*Re,G()):f*ct},A.reflectX=function(C){return arguments.length?(h=C?-1:1,G()):h<0},A.reflectY=function(C){return arguments.length?(d=C?-1:1,G()):d<0},A.precision=function(C){return arguments.length?(M=Lh(x,_=C*C),F()):_t(_)},A.fitExtent=function(C,q){return Rc(A,C,q)},A.fitSize=function(C,q){return Am(A,C,q)},A.fitWidth=function(C,q){return Em(A,C,q)},A.fitHeight=function(C,q){return Cm(A,C,q)};function G(){var C=Rh(n,0,0,h,d,f).apply(null,t(a,o)),q=Rh(n,r-C[0],i-C[1],h,d,f);return c=cm(u,s,l),x=$l(t,q),E=$l(c,x),M=Lh(x,_),F()}function F(){return S=k=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&L,G()}}function Ic(e){var t=0,n=ge/3,r=Tm(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Re,n=a[1]*Re):[t*ct,n*ct]},i}function h4(e){var t=be(e);function n(r,i){return[r*t,fe(i)/t]}return n.invert=function(r,i){return[r/t,qt(i*t)]},n}function d4(e,t){var n=fe(e),r=(n+fe(t))/2;if(Te(r)<de)return h4(e);var i=1+n*(2*r-n),a=_t(i)/r;function o(u,s){var l=_t(i-2*r*fe(s))/r;return[l*fe(u*=r),a-l*be(u)]}return o.invert=function(u,s){var l=a-s,c=Rn(u,Te(l))*Ft(l);return l*r<0&&(c-=ge*Ft(u)*Ft(l)),[c/r,qt((i-(u*u+l*l)*r*r)/(2*r))]},o}function ou(){return Ic(d4).scale(155.424).center([0,33.6442])}function km(){return ou().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function m4(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function p4(){var e,t,n=km(),r,i=ou().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=ou().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,s,l={point:function(h,d){s=[h,d]}};function c(h){var d=h[0],m=h[1];return s=null,r.point(d,m),s||(a.point(d,m),s)||(u.point(d,m),s)}c.invert=function(h){var d=n.scale(),m=n.translate(),p=(h[0]-m[0])/d,g=(h[1]-m[1])/d;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?o:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=m4([n.stream(t=h),i.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),f()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),m=+h[0],p=+h[1];return r=n.translate(h).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(l),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+de,p+.12*d+de],[m-.214*d-de,p+.234*d-de]]).stream(l),u=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+de,p+.166*d+de],[m-.115*d-de,p+.234*d-de]]).stream(l),f()},c.fitExtent=function(h,d){return Rc(c,h,d)},c.fitSize=function(h,d){return Am(c,h,d)},c.fitWidth=function(h,d){return Em(c,h,d)},c.fitHeight=function(h,d){return Cm(c,h,d)};function f(){return e=t=null,c}return c.scale(1070)}function $m(e){return function(t,n){var r=be(t),i=be(n),a=e(r*i);return a===1/0?[2,0]:[a*i*fe(t),a*fe(n)]}}function Sa(e){return function(t,n){var r=_t(t*t+n*n),i=e(r),a=fe(i),o=be(i);return[Rn(t*a,r*o),qt(r&&n*a/r)]}}var Dm=$m(function(e){return _t(2/(1+e))});Dm.invert=Sa(function(e){return 2*qt(e/2)});function b4(){return rr(Dm).scale(124.75).clipAngle(180-.001)}var Nm=$m(function(e){return(e=lm(e))&&e/fe(e)});Nm.invert=Sa(function(e){return e});function g4(){return rr(Nm).scale(79.4188).clipAngle(180-.001)}function Uu(e,t){return[e,Ko(Fc((Ie+t)/2))]}Uu.invert=function(e,t){return[e,2*yi(sm(t))-Ie]};function y4(){return Bm(Uu).scale(961/Ct)}function Bm(e){var t=rr(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,u,s,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=u=s=l=null:(o=+f[0][0],u=+f[0][1],s=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,u],[s,l]]};function c(){var f=ge*r(),h=t(O5(t.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Uu?[[Math.max(h[0]-f,o),u],[Math.min(h[0]+f,s),l]]:[[o,Math.max(h[1]-f,u)],[s,Math.min(h[1]+f,l)]])}return c()}function oo(e){return Fc((Ie+e)/2)}function w4(e,t){var n=be(e),r=e===t?fe(e):Ko(n/be(t))/Ko(oo(t)/oo(e)),i=n*Ns(oo(e),r)/r;if(!r)return Uu;function a(o,u){i>0?u<-Ie+de&&(u=-Ie+de):u>Ie-de&&(u=Ie-de);var s=i/Ns(oo(u),r);return[s*fe(r*o),i-s*be(r*o)]}return a.invert=function(o,u){var s=i-u,l=Ft(r)*_t(o*o+s*s),c=Rn(o,Te(s))*Ft(s);return s*r<0&&(c-=ge*Ft(o)*Ft(s)),[c/r,2*yi(Ns(i/l,1/r))-Ie]},a}function v4(){return Ic(w4).scale(109.5).parallels([30,30])}function uu(e,t){return[e,t]}uu.invert=uu;function _4(){return rr(uu).scale(152.63)}function M4(e,t){var n=be(e),r=e===t?fe(e):(n-be(t))/(t-e),i=n/r+e;if(Te(r)<de)return uu;function a(o,u){var s=i-u,l=r*o;return[s*fe(l),i-s*be(l)]}return a.invert=function(o,u){var s=i-u,l=Rn(o,Te(s))*Ft(s);return s*r<0&&(l-=ge*Ft(o)*Ft(s)),[l/r,i-Ft(r)*_t(o*o+s*s)]},a}function x4(){return Ic(M4).scale(131.154).center([0,13.9389])}var Vi=1.340264,Yi=-.081106,ji=893e-6,Xi=.003796,su=_t(3)/2,P4=12;function Fm(e,t){var n=qt(su*fe(t)),r=n*n,i=r*r*r;return[e*be(n)/(su*(Vi+3*Yi*r+i*(7*ji+9*Xi*r))),n*(Vi+Yi*r+i*(ji+Xi*r))]}Fm.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,u,s;a<P4&&(u=n*(Vi+Yi*r+i*(ji+Xi*r))-t,s=Vi+3*Yi*r+i*(7*ji+9*Xi*r),n-=o=u/s,r=n*n,i=r*r*r,!(Te(o)<um));++a);return[su*e*(Vi+3*Yi*r+i*(7*ji+9*Xi*r))/be(n),qt(fe(n)/su)]};function S4(){return rr(Fm).scale(177.158)}function Lm(e,t){var n=be(t),r=be(e)*n;return[n*fe(e)/r,fe(t)/r]}Lm.invert=Sa(yi);function A4(){return rr(Lm).scale(144.049).clipAngle(60)}function Rm(e,t){return[be(t)*fe(e),fe(t)]}Rm.invert=Sa(qt);function E4(){return rr(Rm).scale(249.5).clipAngle(90+de)}function Im(e,t){var n=be(t),r=1+be(e)*n;return[n*fe(e)/r,fe(t)/r]}Im.invert=Sa(function(e){return 2*yi(e)});function C4(){return rr(Im).scale(250).clipAngle(142)}function Om(e,t){return[Ko(Fc((Ie+t)/2)),-e]}Om.invert=function(e,t){return[-t,2*yi(sm(e))-Ie]};function T4(){var e=Bm(Om),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function wn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Hl=Symbol("implicit");function Oc(){var e=new wr,t=[],n=[],r=Hl;function i(a){let o=e.get(a);if(o===void 0){if(r!==Hl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new wr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Oc(t,n).unknown(r)},wn.apply(i,arguments),i}function Wu(){var e=Oc().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,u=!1,s=0,l=0,c=.5;delete e.unknown;function f(){var h=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,h-s+l*2),u&&(a=Math.floor(a)),m+=(p-m-a*(h-s))*c,o=a*(1-s),u&&(m=Math.round(m),o=Math.round(o));var g=pl(h).map(function(w){return m+a*w});return n(d?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(u=!!h,f()):u},e.padding=function(h){return arguments.length?(s=Math.min(1,l=+h),f()):s},e.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return Wu(t(),[r,i]).round(u).paddingInner(s).paddingOuter(l).align(c)},wn.apply(f(),arguments)}function qm(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return qm(t())},e}function k4(){return qm(Wu.apply(null,arguments).paddingInner(1))}function $4(e){return function(){return e}}function Wl(e){return+e}var Ih=[0,1];function Rt(e){return e}function Vl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:$4(isNaN(t)?NaN:.5)}function D4(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function N4(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Vl(i,r),a=n(o,a)):(r=Vl(r,i),a=n(a,o)),function(u){return a(r(u))}}function B4(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Vl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var s=Cu(e,u,1,r)-1;return a[s](i[s](u))}}function Aa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vu(){var e=Ih,t=Ih,n=Pa,r,i,a,o=Rt,u,s,l;function c(){var h=Math.min(e.length,t.length);return o!==Rt&&(o=D4(e[0],e[h-1])),u=h>2?B4:N4,s=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(s||(s=u(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=u(t,e.map(r),ot)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Wl),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=Tc,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Rt,c()):o!==Rt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Gm(){return Vu()(Rt,Rt)}function F4(e,t,n,r){var i=dl(e,t,n),a;switch(r=ia(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=R5(i,o))&&(r.precision=a),om(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=I5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=L5(i))&&(r.precision=a-(r.type==="%")*2);break}}return gi(r)}function Ea(e){var t=e.domain;return e.ticks=function(n){var r=t();return ea(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return F4(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],u=r[a],s,l,c=10;for(u<o&&(l=o,o=u,u=l,l=i,i=a,a=l);c-- >0;){if(l=zo(o,u,n),l===s)return r[i]=o,r[a]=u,t(r);if(l>0)o=Math.floor(o/l)*l,u=Math.ceil(u/l)*l;else if(l<0)o=Math.ceil(o*l)/l,u=Math.floor(u*l)/l;else break;s=l}return e},e}function qc(){var e=Gm();return e.copy=function(){return Aa(e,qc())},wn.apply(e,arguments),Ea(e)}function zm(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Wl),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return zm(e).unknown(t)},e=arguments.length?Array.from(e,Wl):[0,1],Ea(n)}function Um(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Oh(e){return Math.log(e)}function qh(e){return Math.exp(e)}function L4(e){return-Math.log(-e)}function R4(e){return-Math.exp(-e)}function I4(e){return isFinite(e)?+("1e"+e):e<0?0:e}function O4(e){return e===10?I4:e===Math.E?Math.exp:t=>Math.pow(e,t)}function q4(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Gh(e){return(t,n)=>-e(-t,n)}function Hm(e){const t=e(Oh,qh),n=t.domain;let r=10,i,a;function o(){return i=q4(r),a=O4(r),n()[0]<0?(i=Gh(i),a=Gh(a),e(L4,R4)):e(Oh,qh),t}return t.base=function(u){return arguments.length?(r=+u,o()):r},t.domain=function(u){return arguments.length?(n(u),o()):n()},t.ticks=u=>{const s=n();let l=s[0],c=s[s.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),m,p;const g=u==null?10:+u;let w=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(m=1;m<r;++m)if(p=h<0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;w.push(p)}}else for(;h<=d;++h)for(m=r-1;m>=1;--m)if(p=h>0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;w.push(p)}w.length*2<g&&(w=ea(l,c,g))}else w=ea(h,d,Math.min(d-h,g)).map(a);return f?w.reverse():w},t.tickFormat=(u,s)=>{if(u==null&&(u=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=ia(s)).precision==null&&(s.trim=!0),s=gi(s)),u===1/0)return s;const l=Math.max(1,r*u/t.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?s(c):""}},t.nice=()=>n(Um(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function Wm(){const e=Hm(Vu()).domain([1,10]);return e.copy=()=>Aa(e,Wm()).base(e.base()),wn.apply(e,arguments),e}function zh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Uh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Vm(e){var t=1,n=e(zh(t),Uh(t));return n.constant=function(r){return arguments.length?e(zh(t=+r),Uh(t)):t},Ea(n)}function Ym(){var e=Vm(Vu());return e.copy=function(){return Aa(e,Ym()).constant(e.constant())},wn.apply(e,arguments)}function Hh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function G4(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function z4(e){return e<0?-e*e:e*e}function jm(e){var t=e(Rt,Rt),n=1;function r(){return n===1?e(Rt,Rt):n===.5?e(G4,z4):e(Hh(n),Hh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ea(t)}function Xm(){var e=jm(Vu());return e.copy=function(){return Aa(e,Xm()).exponent(e.exponent())},wn.apply(e,arguments),e}function Zm(){var e=[],t=[],n=[],r;function i(){var o=0,u=Math.max(1,t.length);for(n=new Array(u-1);++o<u;)n[o-1]=k3(e,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Cu(n,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(vt),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Zm().domain(e).range(t).unknown(r)},wn.apply(a,arguments)}function Km(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Cu(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Km().domain(e).range(t).unknown(n)},wn.apply(i,arguments)}const Is=new Date,Os=new Date;function Ye(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const s=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return s;let l;do s.push(l=new Date(+a)),t(a,u),e(a);while(l<a&&a<o);return s},i.filter=a=>Ye(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Is.setTime(+a),Os.setTime(+o),e(Is),e(Os),Math.floor(n(Is,Os))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const lu=Ye(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ye(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):lu);lu.range;const Nn=1e3,It=Nn*60,Bn=It*60,In=Bn*24,Gc=In*7,Wh=In*30,qs=In*365,jt=Ye(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Nn)},(e,t)=>(t-e)/Nn,e=>e.getUTCSeconds());jt.range;const Ca=Ye(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nn)},(e,t)=>{e.setTime(+e+t*It)},(e,t)=>(t-e)/It,e=>e.getMinutes());Ca.range;const Ta=Ye(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*It)},(e,t)=>(t-e)/It,e=>e.getUTCMinutes());Ta.range;const ka=Ye(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Nn-e.getMinutes()*It)},(e,t)=>{e.setTime(+e+t*Bn)},(e,t)=>(t-e)/Bn,e=>e.getHours());ka.range;const $a=Ye(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bn)},(e,t)=>(t-e)/Bn,e=>e.getUTCHours());$a.range;const Tr=Ye(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*It)/In,e=>e.getDate()-1);Tr.range;const Yu=Ye(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/In,e=>e.getUTCDate()-1);Yu.range;const ju=Ye(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/In,e=>Math.floor(e/In));ju.range;function kr(e){return Ye(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*It)/Gc)}const oi=kr(0),ua=kr(1),Qm=kr(2),Jm=kr(3),Sr=kr(4),ep=kr(5),tp=kr(6);oi.range;ua.range;Qm.range;Jm.range;Sr.range;ep.range;tp.range;function $r(e){return Ye(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Gc)}const ui=$r(0),sa=$r(1),np=$r(2),rp=$r(3),Ar=$r(4),ip=$r(5),ap=$r(6);ui.range;sa.range;np.range;rp.range;Ar.range;ip.range;ap.range;const Da=Ye(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Da.range;const Na=Ye(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Na.range;const Qt=Ye(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ye(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qt.range;const Jt=Ye(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ye(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Jt.range;function op(e,t,n,r,i,a){const o=[[jt,1,Nn],[jt,5,5*Nn],[jt,15,15*Nn],[jt,30,30*Nn],[a,1,It],[a,5,5*It],[a,15,15*It],[a,30,30*It],[i,1,Bn],[i,3,3*Bn],[i,6,6*Bn],[i,12,12*Bn],[r,1,In],[r,2,2*In],[n,1,Gc],[t,1,Wh],[t,3,3*Wh],[e,1,qs]];function u(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:s(l,c,f),m=d?d.range(l,+c+1):[];return h?m.reverse():m}function s(l,c,f){const h=Math.abs(c-l)/f,d=Eu(([,,g])=>g).right(o,h);if(d===o.length)return e.every(dl(l/qs,c/qs,f));if(d===0)return lu.every(Math.max(dl(l,c,f),1));const[m,p]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return m.every(p)}return[u,s]}const[U4,up]=op(Jt,Na,ui,ju,$a,Ta),[H4,W4]=op(Qt,Da,oi,Tr,ka,Ca);function Gs(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Si(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function V4(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,l=Ai(i),c=Ei(i),f=Ai(a),h=Ei(a),d=Ai(o),m=Ei(o),p=Ai(u),g=Ei(u),w=Ai(s),b=Ei(s),v={a:ee,A:te,b:Q,B:z,c:null,d:Kh,e:Kh,f:p6,g:S6,G:E6,H:h6,I:d6,j:m6,L:sp,m:b6,M:g6,p:U,q:$,Q:ed,s:td,S:y6,u:w6,U:v6,V:_6,w:M6,W:x6,x:null,X:null,y:P6,Y:A6,Z:C6,"%":Jh},y={a:I,A:J,b:ue,B:ae,c:null,d:Qh,e:Qh,f:D6,g:z6,G:H6,H:T6,I:k6,j:$6,L:cp,m:N6,M:B6,p:V,q:Y,Q:ed,s:td,S:F6,u:L6,U:R6,V:I6,w:O6,W:q6,x:null,X:null,y:G6,Y:U6,Z:W6,"%":Jh},_={a:k,A,b:L,B:G,c:F,d:Xh,e:Xh,f:s6,g:jh,G:Yh,H:Zh,I:Zh,j:i6,L:u6,m:r6,M:a6,p:S,q:n6,Q:c6,s:f6,S:o6,u:K4,U:Q4,V:J4,w:Z4,W:e6,x:C,X:q,y:jh,Y:Yh,Z:t6,"%":l6};v.x=M(n,v),v.X=M(r,v),v.c=M(t,v),y.x=M(n,y),y.X=M(r,y),y.c=M(t,y);function M(B,H){return function(j){var D=[],pe=-1,ne=0,he=B.length,xe,Ue,nt;for(j instanceof Date||(j=new Date(+j));++pe<he;)B.charCodeAt(pe)===37&&(D.push(B.slice(ne,pe)),(Ue=Vh[xe=B.charAt(++pe)])!=null?xe=B.charAt(++pe):Ue=xe==="e"?" ":"0",(nt=H[xe])&&(xe=nt(j,Ue)),D.push(xe),ne=pe+1);return D.push(B.slice(ne,pe)),D.join("")}}function x(B,H){return function(j){var D=Si(1900,void 0,1),pe=E(D,B,j+="",0),ne,he;if(pe!=j.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(H&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(ne=zs(Si(D.y,0,1)),he=ne.getUTCDay(),ne=he>4||he===0?sa.ceil(ne):sa(ne),ne=Yu.offset(ne,(D.V-1)*7),D.y=ne.getUTCFullYear(),D.m=ne.getUTCMonth(),D.d=ne.getUTCDate()+(D.w+6)%7):(ne=Gs(Si(D.y,0,1)),he=ne.getDay(),ne=he>4||he===0?ua.ceil(ne):ua(ne),ne=Tr.offset(ne,(D.V-1)*7),D.y=ne.getFullYear(),D.m=ne.getMonth(),D.d=ne.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),he="Z"in D?zs(Si(D.y,0,1)).getUTCDay():Gs(Si(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(he+5)%7:D.w+D.U*7-(he+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,zs(D)):Gs(D)}}function E(B,H,j,D){for(var pe=0,ne=H.length,he=j.length,xe,Ue;pe<ne;){if(D>=he)return-1;if(xe=H.charCodeAt(pe++),xe===37){if(xe=H.charAt(pe++),Ue=_[xe in Vh?H.charAt(pe++):xe],!Ue||(D=Ue(B,j,D))<0)return-1}else if(xe!=j.charCodeAt(D++))return-1}return D}function S(B,H,j){var D=l.exec(H.slice(j));return D?(B.p=c.get(D[0].toLowerCase()),j+D[0].length):-1}function k(B,H,j){var D=d.exec(H.slice(j));return D?(B.w=m.get(D[0].toLowerCase()),j+D[0].length):-1}function A(B,H,j){var D=f.exec(H.slice(j));return D?(B.w=h.get(D[0].toLowerCase()),j+D[0].length):-1}function L(B,H,j){var D=w.exec(H.slice(j));return D?(B.m=b.get(D[0].toLowerCase()),j+D[0].length):-1}function G(B,H,j){var D=p.exec(H.slice(j));return D?(B.m=g.get(D[0].toLowerCase()),j+D[0].length):-1}function F(B,H,j){return E(B,t,H,j)}function C(B,H,j){return E(B,n,H,j)}function q(B,H,j){return E(B,r,H,j)}function ee(B){return o[B.getDay()]}function te(B){return a[B.getDay()]}function Q(B){return s[B.getMonth()]}function z(B){return u[B.getMonth()]}function U(B){return i[+(B.getHours()>=12)]}function $(B){return 1+~~(B.getMonth()/3)}function I(B){return o[B.getUTCDay()]}function J(B){return a[B.getUTCDay()]}function ue(B){return s[B.getUTCMonth()]}function ae(B){return u[B.getUTCMonth()]}function V(B){return i[+(B.getUTCHours()>=12)]}function Y(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var H=M(B+="",v);return H.toString=function(){return B},H},parse:function(B){var H=x(B+="",!1);return H.toString=function(){return B},H},utcFormat:function(B){var H=M(B+="",y);return H.toString=function(){return B},H},utcParse:function(B){var H=x(B+="",!0);return H.toString=function(){return B},H}}}var Vh={"-":"",_:" ",0:"0"},tt=/^\s*\d+/,Y4=/^%/,j4=/[\\^$*+?|[\]().{}]/g;function Ee(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function X4(e){return e.replace(j4,"\\$&")}function Ai(e){return new RegExp("^(?:"+e.map(X4).join("|")+")","i")}function Ei(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Z4(e,t,n){var r=tt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function K4(e,t,n){var r=tt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Q4(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function J4(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function e6(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Yh(e,t,n){var r=tt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function jh(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function t6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function n6(e,t,n){var r=tt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function r6(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Xh(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function i6(e,t,n){var r=tt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Zh(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function a6(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function o6(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function u6(e,t,n){var r=tt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function s6(e,t,n){var r=tt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function l6(e,t,n){var r=Y4.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function c6(e,t,n){var r=tt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function f6(e,t,n){var r=tt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Kh(e,t){return Ee(e.getDate(),t,2)}function h6(e,t){return Ee(e.getHours(),t,2)}function d6(e,t){return Ee(e.getHours()%12||12,t,2)}function m6(e,t){return Ee(1+Tr.count(Qt(e),e),t,3)}function sp(e,t){return Ee(e.getMilliseconds(),t,3)}function p6(e,t){return sp(e,t)+"000"}function b6(e,t){return Ee(e.getMonth()+1,t,2)}function g6(e,t){return Ee(e.getMinutes(),t,2)}function y6(e,t){return Ee(e.getSeconds(),t,2)}function w6(e){var t=e.getDay();return t===0?7:t}function v6(e,t){return Ee(oi.count(Qt(e)-1,e),t,2)}function lp(e){var t=e.getDay();return t>=4||t===0?Sr(e):Sr.ceil(e)}function _6(e,t){return e=lp(e),Ee(Sr.count(Qt(e),e)+(Qt(e).getDay()===4),t,2)}function M6(e){return e.getDay()}function x6(e,t){return Ee(ua.count(Qt(e)-1,e),t,2)}function P6(e,t){return Ee(e.getFullYear()%100,t,2)}function S6(e,t){return e=lp(e),Ee(e.getFullYear()%100,t,2)}function A6(e,t){return Ee(e.getFullYear()%1e4,t,4)}function E6(e,t){var n=e.getDay();return e=n>=4||n===0?Sr(e):Sr.ceil(e),Ee(e.getFullYear()%1e4,t,4)}function C6(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ee(t/60|0,"0",2)+Ee(t%60,"0",2)}function Qh(e,t){return Ee(e.getUTCDate(),t,2)}function T6(e,t){return Ee(e.getUTCHours(),t,2)}function k6(e,t){return Ee(e.getUTCHours()%12||12,t,2)}function $6(e,t){return Ee(1+Yu.count(Jt(e),e),t,3)}function cp(e,t){return Ee(e.getUTCMilliseconds(),t,3)}function D6(e,t){return cp(e,t)+"000"}function N6(e,t){return Ee(e.getUTCMonth()+1,t,2)}function B6(e,t){return Ee(e.getUTCMinutes(),t,2)}function F6(e,t){return Ee(e.getUTCSeconds(),t,2)}function L6(e){var t=e.getUTCDay();return t===0?7:t}function R6(e,t){return Ee(ui.count(Jt(e)-1,e),t,2)}function fp(e){var t=e.getUTCDay();return t>=4||t===0?Ar(e):Ar.ceil(e)}function I6(e,t){return e=fp(e),Ee(Ar.count(Jt(e),e)+(Jt(e).getUTCDay()===4),t,2)}function O6(e){return e.getUTCDay()}function q6(e,t){return Ee(sa.count(Jt(e)-1,e),t,2)}function G6(e,t){return Ee(e.getUTCFullYear()%100,t,2)}function z6(e,t){return e=fp(e),Ee(e.getUTCFullYear()%100,t,2)}function U6(e,t){return Ee(e.getUTCFullYear()%1e4,t,4)}function H6(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ar(e):Ar.ceil(e),Ee(e.getUTCFullYear()%1e4,t,4)}function W6(){return"+0000"}function Jh(){return"%"}function ed(e){return+e}function td(e){return Math.floor(+e/1e3)}var Lr,zc,Ba;V6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function V6(e){return Lr=V4(e),zc=Lr.format,Lr.parse,Ba=Lr.utcFormat,Lr.utcParse,Lr}function Y6(e){return new Date(e)}function j6(e){return e instanceof Date?+e:+new Date(+e)}function Uc(e,t,n,r,i,a,o,u,s,l){var c=Gm(),f=c.invert,h=c.domain,d=l(".%L"),m=l(":%S"),p=l("%I:%M"),g=l("%I %p"),w=l("%a %d"),b=l("%b %d"),v=l("%B"),y=l("%Y");function _(M){return(s(M)<M?d:u(M)<M?m:o(M)<M?p:a(M)<M?g:r(M)<M?i(M)<M?w:b:n(M)<M?v:y)(M)}return c.invert=function(M){return new Date(f(M))},c.domain=function(M){return arguments.length?h(Array.from(M,j6)):h().map(Y6)},c.ticks=function(M){var x=h();return e(x[0],x[x.length-1],M??10)},c.tickFormat=function(M,x){return x==null?_:l(x)},c.nice=function(M){var x=h();return(!M||typeof M.range!="function")&&(M=t(x[0],x[x.length-1],M??10)),M?h(Um(x,M)):c},c.copy=function(){return Aa(c,Uc(e,t,n,r,i,a,o,u,s,l))},c}function X6(){return wn.apply(Uc(H4,W4,Qt,Da,oi,Tr,ka,Ca,jt,zc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Z6(){return wn.apply(Uc(U4,up,Jt,Na,ui,Yu,$a,Ta,jt,Ba).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Zu(){var e=0,t=.5,n=1,r=1,i,a,o,u,s,l=Rt,c,f=!1,h;function d(p){return isNaN(p=+p)?h:(p=.5+((p=+c(p))-a)*(r*p<r*a?u:s),l(f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),a=c(t=+t),o=c(n=+n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(l=p,d):l};function m(p){return function(g){var w,b,v;return arguments.length?([w,b,v]=g,l=Iu(p,[w,b,v]),d):[l(0),l(.5),l(1)]}}return d.range=m(Pa),d.rangeRound=m(Tc),d.unknown=function(p){return arguments.length?(h=p,d):h},function(p){return c=p,i=p(e),a=p(t),o=p(n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function hp(){var e=Ea(Zu()(Rt));return e.copy=function(){return Xu(e,hp())},Hu.apply(e,arguments)}function dp(){var e=Hm(Zu()).domain([.1,1,10]);return e.copy=function(){return Xu(e,dp()).base(e.base())},Hu.apply(e,arguments)}function mp(){var e=Vm(Zu());return e.copy=function(){return Xu(e,mp()).constant(e.constant())},Hu.apply(e,arguments)}function pp(){var e=jm(Zu());return e.copy=function(){return Xu(e,pp()).exponent(e.exponent())},Hu.apply(e,arguments)}function me(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const K6=me("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Q6=me("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),J6=me("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),e7=me("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),t7=me("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),n7=me("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),r7=me("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),i7=me("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),a7=me("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),o7=me("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),De=e=>Wv(e[e.length-1]);var bp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(me);const gp=De(bp);var yp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(me);const wp=De(yp);var vp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(me);const _p=De(vp);var Mp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(me);const xp=De(Mp);var Yl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(me);const cu=De(Yl);var Pp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(me);const Sp=De(Pp);var jl=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(me);const fu=De(jl);var Ap=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(me);const Ep=De(Ap);var Cp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(me);const Tp=De(Cp);var kp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(me);const $p=De(kp);var Dp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(me);const Np=De(Dp);var Bp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(me);const Fp=De(Bp);var Lp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(me);const Rp=De(Lp);var Ip=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(me);const Op=De(Ip);var qp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(me);const Gp=De(qp);var zp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(me);const Up=De(zp);var Hp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(me);const Wp=De(Hp);var Vp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(me);const Yp=De(Vp);var jp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(me);const Xp=De(jp);var Zp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(me);const Kp=De(Zp);var Qp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(me);const Jp=De(Qp);var eb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(me);const tb=De(eb);var nb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(me);const rb=De(nb);var ib=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(me);const ab=De(ib);var ob=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(me);const ub=De(ob);var sb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(me);const lb=De(sb);var cb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(me);const fb=De(cb);function hb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const db=kc(pn(300,.5,0),pn(-240,.5,1));var mb=kc(pn(-100,.75,.35),pn(80,1.5,.8)),pb=kc(pn(260,.75,.35),pn(80,1.5,.8)),uo=pn();function bb(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return uo.h=360*e-100,uo.s=1.5-1.5*t,uo.l=.8-.9*t,uo+""}var so=Qn(),u7=Math.PI/3,s7=Math.PI*2/3;function gb(e){var t;return e=(.5-e)*Math.PI,so.r=255*(t=Math.sin(e))*t,so.g=255*(t=Math.sin(e+u7))*t,so.b=255*(t=Math.sin(e+s7))*t,so+""}function yb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Ku(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const wb=Ku(me("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var vb=Ku(me("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),_b=Ku(me("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Mb=Ku(me("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ke(e){return function(){return e}}const xb=Math.cos,Hc=Math.min,hu=Math.sin,je=Math.sqrt,nd=1e-12,du=Math.PI,Qu=2*du;function Pb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new rm(t)}function Sb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ab(e){this._context=e}Ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Fa(e){return new Ab(e)}function Eb(e){return e[0]}function Cb(e){return e[1]}function Tb(e,t){var n=Ke(!0),r=null,i=Fa,a=null,o=Pb(u);e=typeof e=="function"?e:e===void 0?Eb:Ke(e),t=typeof t=="function"?t:t===void 0?Cb:Ke(t);function u(s){var l,c=(s=Sb(s)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=c;++l)!(l<c&&n(f=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,l,s),+t(f,l,s));if(d)return a=null,d+""||null}return u.x=function(s){return arguments.length?(e=typeof s=="function"?s:Ke(+s),u):e},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:Ke(+s),u):t},u.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ke(!!s),u):n},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}function l7(e,t,n){var r=null,i=Ke(!0),a=null,o=Fa,u=null,s=Pb(l);e=typeof e=="function"?e:e===void 0?Eb:Ke(+e),t=typeof t=="function"?t:Ke(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Cb:Ke(+n);function l(f){var h,d,m,p=(f=Sb(f)).length,g,w=!1,b,v=new Array(p),y=new Array(p);for(a==null&&(u=o(b=s())),h=0;h<=p;++h){if(!(h<p&&i(g=f[h],h,f))===w)if(w=!w)d=h,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),m=h-1;m>=d;--m)u.point(v[m],y[m]);u.lineEnd(),u.areaEnd()}w&&(v[h]=+e(g,h,f),y[h]=+t(g,h,f),u.point(r?+r(g,h,f):v[h],n?+n(g,h,f):y[h]))}if(b)return u=null,b+""||null}function c(){return Tb().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ke(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ke(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ke(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ke(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ke(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(u=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=u=null:u=o(a=f),l):a},l}class kb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function c7(e){return new kb(e,!0)}function f7(e){return new kb(e,!1)}const h7=je(3),$b={draw(e,t){const n=je(t+Hc(t/28,.75))*.59436,r=n/2,i=r*h7;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},la={draw(e,t){const n=je(t/du);e.moveTo(n,0),e.arc(0,0,n,0,Qu)}},Db={draw(e,t){const n=je(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Nb=je(1/3),d7=Nb*2,Bb={draw(e,t){const n=je(t/d7),r=n*Nb;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Fb={draw(e,t){const n=je(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Lb={draw(e,t){const n=je(t-Hc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Rb={draw(e,t){const n=je(t),r=-n/2;e.rect(r,r,n,n)}},Ib={draw(e,t){const n=je(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},m7=.8908130915292852,Ob=hu(du/10)/hu(7*du/10),p7=hu(Qu/10)*Ob,b7=-xb(Qu/10)*Ob,qb={draw(e,t){const n=je(t*m7),r=p7*n,i=b7*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Qu*a/5,u=xb(o),s=hu(o);e.lineTo(s*n,-u*n),e.lineTo(u*r-s*i,s*r+u*i)}e.closePath()}},Us=je(3),Gb={draw(e,t){const n=-je(t/(Us*3));e.moveTo(0,n*2),e.lineTo(-Us*n,-n),e.lineTo(Us*n,-n),e.closePath()}},g7=je(3),zb={draw(e,t){const n=je(t)*.6824,r=n/2,i=n*g7/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},$t=-.5,Dt=je(3)/2,Xl=1/je(12),y7=(Xl/2+1)*3,Ub={draw(e,t){const n=je(t/y7),r=n/2,i=n*Xl,a=r,o=n*Xl+n,u=-a,s=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,s),e.lineTo($t*r-Dt*i,Dt*r+$t*i),e.lineTo($t*a-Dt*o,Dt*a+$t*o),e.lineTo($t*u-Dt*s,Dt*u+$t*s),e.lineTo($t*r+Dt*i,$t*i-Dt*r),e.lineTo($t*a+Dt*o,$t*o-Dt*a),e.lineTo($t*u+Dt*s,$t*s-Dt*u),e.closePath()}},Hb={draw(e,t){const n=je(t-Hc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},w7=[la,Db,Bb,Rb,qb,Gb,Ub],v7=[la,Lb,Hb,zb,$b,Ib,Fb];function Jn(){}function mu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Ju(e){this._context=e}Ju.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _7(e){return new Ju(e)}function Wb(e){this._context=e}Wb.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function M7(e){return new Wb(e)}function Vb(e){this._context=e}Vb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function x7(e){return new Vb(e)}function Yb(e,t){this._basis=new Ju(e),this._beta=t}Yb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,u=-1,s;++u<=n;)s=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+s*a),this._beta*t[u]+(1-this._beta)*(i+s*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const P7=function e(t){function n(r){return t===1?new Ju(r):new Yb(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function pu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Wc(e,t){this._context=e,this._k=(1-t)/6}Wc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S7=function e(t){function n(r){return new Wc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Vc(e,t){this._context=e,this._k=(1-t)/6}Vc.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A7=function e(t){function n(r){return new Vc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Yc(e,t){this._context=e,this._k=(1-t)/6}Yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E7=function e(t){function n(r){return new Yc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function jc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>nd){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>nd){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function jb(e,t){this._context=e,this._alpha=t}jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:jc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const C7=function e(t){function n(r){return t?new jb(r,t):new Wc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Xb(e,t){this._context=e,this._alpha=t}Xb.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:jc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const T7=function e(t){function n(r){return t?new Xb(r,t):new Vc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Zb(e,t){this._context=e,this._alpha=t}Zb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const k7=function e(t){function n(r){return t?new Zb(r,t):new Yc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Kb(e){this._context=e}Kb.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function $7(e){return new Kb(e)}function rd(e){return e<0?-1:1}function id(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(rd(a)+rd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function ad(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Hs(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function bu(e){this._context=e}bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hs(this,this._t0,ad(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Hs(this,ad(this,n=id(this,e,t)),n);break;default:Hs(this,this._t0,n=id(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Qb(e){this._context=new Jb(e)}(Qb.prototype=Object.create(bu.prototype)).point=function(e,t){bu.prototype.point.call(this,t,e)};function Jb(e){this._context=e}Jb.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function D7(e){return new bu(e)}function N7(e){return new Qb(e)}function eg(e){this._context=e}eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=od(e),i=od(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function od(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function B7(e){return new eg(e)}function es(e,t){this._context=e,this._t=t}es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function F7(e){return new es(e,.5)}function L7(e){return new es(e,0)}function R7(e){return new es(e,1)}function Oi(e,t,n){this.k=e,this.x=t,this.y=n}Oi.prototype={constructor:Oi,scale:function(e){return e===1?this:new Oi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Oi.prototype;const I7="modulepreload",O7=function(e){return"/rhythm-vis/"+e},ud={},Rr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=O7(o),o in ud)return;ud[o]=!0;const u=o.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.href===o&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":I7,u||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),u)return new Promise((f,h)=>{c.addEventListener("load",f),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function q7(e){if(e){if(e=new Uint8Array(e.buffer||e),z7(e))return"wav";if(G7(e))return"mp3";if(H7(e))return"flac";if(W7(e))return"m4a";if(V7(e))return"opus";if(U7(e))return"oga";if(Y7(e))return"qoa"}}function G7(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function z7(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function U7(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function H7(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function W7(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function V7(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function Y7(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let j7=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],a=r,o=0;a<this.length&&o<t.length;a++,o++)t[o]=i[a]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var a=r,o=0;a<this.length&&o<t.length;a++,o++)i[a]=t[o]}};const X7=globalThis.AudioBuffer||j7;async function Z7(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=q7(e);if(!t)throw Error("Cannot detect audio format");if(!bt[t])throw Error("Missing decoder for "+t+" format");return bt[t](e)}const bt={async oga(e){let{decoder:t}=bt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Rr(()=>import("./index-DvsFwHk4.js"),__vite__mapDeps([0,1,2]));await(bt.oga.decoder=t=new n).ready}return e&&Ir(await t.decodeFile(e))},async mp3(e){let{decoder:t}=bt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Rr(()=>import("./index-DQG9u_ur.js"),__vite__mapDeps([3,2]));await(bt.mp3.decoder=t=new n).ready}return e&&Ir(await t.decode(e))},async flac(e){let{decoder:t}=bt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Rr(()=>import("./index-GjRrMrAp.js"),__vite__mapDeps([4,1,2]));await(bt.flac.decoder=t=new n).ready}return e&&Ir(await t.decode(e))},async opus(e){let{decoder:t}=bt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Rr(()=>import("./index-Dp-YP1Pg.js"),__vite__mapDeps([5,1,2]));await(bt.opus.decoder=t=new n).ready}return e&&Ir(await t.decodeFile(e))},async wav(e){let{decode:t}=bt.wav;if(!t){let n=await Rr(()=>import("./index-D05uKT_C.js").then(r=>r.i),__vite__mapDeps([]));t=bt.wav.decode=n.default.decode}return e&&Ir(await t(e))},async qoa(e){let{decode:t}=bt.qoa;return t||(bt.qoa.decode=t=(await Rr(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),e&&Ir(await t(e))}};function Ir({channelData:e,sampleRate:t}){let n=new X7({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Ci=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var K7=Q7;function Q7(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,a=i===3?32:16,o;return n===2?o=e9(e.getChannelData(0),e.getChannelData(1)):o=e.getChannelData(0),J7(o,i,r,n,a)}function J7(e,t,n,r,i){var a=i/8,o=r*a,u=new ArrayBuffer(44+e.length*a),s=new DataView(u);return lo(s,0,"RIFF"),s.setUint32(4,36+e.length*a,!0),lo(s,8,"WAVE"),lo(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,t,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*o,!0),s.setUint16(32,o,!0),s.setUint16(34,i,!0),lo(s,36,"data"),s.setUint32(40,e.length*a,!0),t===1?n9(s,44,e):t9(s,44,e),u}function e9(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=t[a],a++;return r}function t9(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function n9(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function lo(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const r9=tg(K7);async function ng(e){const n=await(await fetch(e)).arrayBuffer();return await Z7(n)}function i9(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),a=new Float32Array(Math.ceil(r*e.sampleRate));for(const o of t){const u=Math.round(o*e.sampleRate);let s=1;for(let l=0;l<i.length;++l)s=Math.max(0,s-2/40100),a[u+l]=i[l]*s}return a}function Xc(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([r9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function a9(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function Zl(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const a=i.audioBuffer.getChannelData(0);for(const o of i.times){const u=Math.round(o*n);for(let s=0;s<a.length;++s)r[u+s]=Math.min(r[u+s]+a[s],1)}}return r}function er(e){return e!=null&&!Number.isNaN(e)}function en(e,t){return+er(t)-+er(e)||vt(e,t)}function gu(e,t){return+er(t)-+er(e)||_a(e,t)}function Zc(e){return e!=null&&`${e}`!=""}function rg(e){return isFinite(e)?e:NaN}function ts(e){return e>0&&isFinite(e)?e:NaN}function Kc(e){return e<0&&isFinite(e)?e:NaN}function o9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${u9(e.getUTCFullYear())}-${Tn(e.getUTCMonth()+1,2)}-${Tn(e.getUTCDate(),2)}${n||r||i||a?`T${Tn(n,2)}:${Tn(r,2)}${i||a?`:${Tn(i,2)}${a?`.${Tn(a,3)}`:""}`:""}Z`:""}`}function u9(e){return e<0?`-${Tn(-e,6)}`:e>9999?`+${Tn(e,6)}`:Tn(e,4)}function Tn(e,t){return`${e}`.padStart(t,"0")}const s9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function ig(e,t){return s9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Ur=1e3,jn=Ur*60,Xn=jn*60,bn=Xn*24,on=bn*7,gr=bn*30,Wn=bn*365,Ws=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ur],["5 seconds",5*Ur],["15 seconds",15*Ur],["30 seconds",30*Ur],["minute",jn],["5 minutes",5*jn],["15 minutes",15*jn],["30 minutes",30*jn],["hour",Xn],["3 hours",3*Xn],["6 hours",6*Xn],["12 hours",12*Xn],["day",bn],["2 days",2*bn],["week",on],["2 weeks",2*on],["month",gr],["3 months",3*gr],["6 months",6*gr],["year",Wn],["2 years",2*Wn],["5 years",5*Wn],["10 years",10*Wn],["20 years",20*Wn],["50 years",50*Wn],["100 years",100*Wn]],Qc=new Map([["second",Ur],["minute",jn],["hour",Xn],["day",bn],["monday",on],["tuesday",on],["wednesday",on],["thursday",on],["friday",on],["saturday",on],["sunday",on],["week",on],["month",gr],["year",Wn]]),ag=new Map([["second",jt],["minute",Ca],["hour",ka],["day",Tr],["monday",ua],["tuesday",Qm],["wednesday",Jm],["thursday",Sr],["friday",ep],["saturday",tp],["sunday",oi],["week",oi],["month",Da],["year",Qt]]),Jc=new Map([["second",jt],["minute",Ta],["hour",$a],["day",ju],["monday",sa],["tuesday",np],["wednesday",rp],["thursday",Ar],["friday",ip],["saturday",ap],["sunday",ui],["week",ui],["month",Na],["year",Jt]]),La=Symbol("intervalDuration"),ns=Symbol("intervalType");for(const[e,t]of ag)t[La]=Qc.get(e),t[ns]="time";for(const[e,t]of Jc)t[La]=Qc.get(e),t[ns]="utc";const qi=[["year",Jt,"utc"],["month",Na,"utc"],["day",ju,"utc",6*gr],["hour",$a,"utc",3*bn],["minute",Ta,"utc",6*Xn],["second",jt,"utc",30*jn]],Eo=[["year",Qt,"time"],["month",Da,"time"],["day",Tr,"time",6*gr],["hour",ka,"time",3*bn],["minute",Ca,"time",6*Xn],["second",jt,"time",30*jn]],l9=[qi[0],Eo[0],qi[1],Eo[1],qi[2],Eo[2],...qi.slice(3)];function og(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=Jc.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function ug(e){return sg(og(e),"time")}function ef(e){return sg(og(e),"utc")}function sg([e,t],n){let r=(n==="time"?ag:Jc).get(e);return t>1&&(r=r.every(t),r[La]=Qc.get(e)*t,r[ns]=n),r}function sd(e,t){if(!(t>1))return;const n=e[La];if(!Ws.some(([,i])=>i===n)||n%bn===0&&bn<n&&n<gr)return;const[r]=Ws[Eu(([,i])=>Math.log(i)).center(Ws,Math.log(n*t))];return(e[ns]==="time"?ug:ef)(r)}function ld(e,t,n){const r=t==="time"?zc:Ba;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=c9(n);switch(e){case"millisecond":return Or(r(".%L"),r(":%M:%S"),i);case"second":return Or(r(":%S"),r("%-I:%M"),i);case"minute":return Or(r("%-I:%M"),r("%p"),i);case"hour":return Or(r("%-I %p"),r("%b %-d"),i);case"day":return Or(r("%-d"),r("%b"),i);case"month":return Or(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function c9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function f9(e){return e==="time"?Eo:e==="utc"?qi:l9}function h9(e,t,n){const r=Ot(B3(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return ld("millisecond","utc",n);for(const[i,a,o,u]of f9(e)){if(r>u||i==="hour"&&!r)break;if(t.every(s=>a.floor(s)>=s))return ld(i,o,n)}}function Or(e,t,n){return(r,i,a)=>{const o=e(r,i),u=t(r,i),s=i-li(a);return i!==s&&a[s]!==void 0&&u===t(a[s],s)?o:n(o,u)}}const ca=Object.getPrototypeOf(Uint8Array),d9=Object.prototype.toString,lg=Symbol("reindex");function et(e,t,n){const r=typeof t;return r==="string"?cd(e,cg(t),n):r==="function"?cd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ve(e,Ra(t),n):typeof(t==null?void 0:t.transform)=="function"?fd(t.transform(e),n):m9(fd(t,n),e==null?void 0:e[lg])}function m9(e,t){return t?af(e,t):e}function cd(e,t,n){return Ve(e,(n==null?void 0:n.prototype)instanceof ca?p9(t):t,n)}function fd(e,t){return t===void 0?Tt(e):e instanceof t?e:t.prototype instanceof ca&&!(e instanceof ca)?t.from(e,nf):t.from(e)}function p9(e){return(t,n)=>nf(e(t,n))}const Co=[null],cg=e=>t=>t[e],rs={transform:Gn},st={transform:e=>e},b9=()=>1,g9=()=>!0,ft=e=>e==null?e:`${e}`,Fe=e=>e==null?e:+e,tf=e=>e?e[0]:void 0,Kl=e=>e?e[1]:void 0,Ra=e=>()=>e;function y9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Qr(n,t,r)}function cn(e){return e instanceof ca?e:Ve(e,nf,Float64Array)}function nf(e){return e==null?NaN:Number(e)}function w9(e){return Ve(e,fg)}function fg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?ig(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function On(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:as(e)?[void 0,e]:[e,void 0]}function ht(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function hg(e,t,n){if(e!=null)return nn(e,t,n)}function nn(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function Tt(e){return e==null||e instanceof Array||e instanceof ca?e:Array.from(e)}function Ve(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function fa(e,t=Array){return e instanceof t?e.slice():t.from(e)}function v9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function dg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function _9(e){return v9(e)||dg(e)||e.interval!==void 0}function ir(e){return(e==null?void 0:e.toString)===d9}function Ql(e){return ir(e)&&(e.type!==void 0||e.domain!==void 0)}function is(e){return ir(e)&&typeof e.transform!="function"}function si(e){return is(e)&&e.value===void 0&&e.channel===void 0}function M9(e,t,n,r=st){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ia(e,t){return e===void 0&&t===void 0?[tf,Kl]:[e,t]}function rf({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=On(t)),e===void 0&&([e]=On(n)),e}function Gn(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function af(e,t){return Ve(t,n=>e[n],e.constructor)}function x9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function mr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function P9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function yu(e){let t;return[{transform:()=>t,label:Dr(e)},n=>t=n]}function En(e){return e==null?[e]:yu(e)}function Dr(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function Jl(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Mt(r)||Mt(i)?Ve(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Ve(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function mg(e,t){const n=pg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ve(e,n):e}function pg(e,t){const n=of(e,t);return n&&(r=>er(r)?n.floor(r):r)}function of(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>pl(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>pl(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?ug:ef)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function wi(e,t){if(e=of(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function S9(e,t){if(e=wi(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function A9(e){return Hr(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Hr(e){return typeof(e==null?void 0:e.range)=="function"}function Oa(e){return e===void 0||is(e)?e:{value:e}}function E9(e){return e==null?null:{transform:t=>et(t,e,Float64Array),label:Dr(e)}}function ar(e){return e&&typeof e[Symbol.iterator]=="function"}function bg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function hd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Mt(e){for(const t of e)if(t!=null)return t instanceof Date}function C9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&ig(t)}function T9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function k9(e){for(const t of e)if(t!=null)return typeof t=="number"}function Vs(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const $9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function as(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||$9.has(e))}function D9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function yt(e){return e==null||ha(e)}function ha(e){return/^\s*none\s*$/i.test(e)}function N9(e){return/^\s*round\s*$/i.test(e)}function ec(e,t){return hg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function os(e="middle"){return ec(e,"frameAnchor")}function li(e){if(e==null)return;const t=e[0],n=e[e.length-1];return _a(t,n)}function B9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function F9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function gg(e){return ar(e)?F9(e):e}const fn=Symbol("position"),zn=Symbol("color"),qa=Symbol("radius"),Ga=Symbol("length"),za=Symbol("opacity"),us=Symbol("symbol"),yg=Symbol("projection"),Oe=new Map([["x",fn],["y",fn],["fx",fn],["fy",fn],["r",qa],["color",zn],["opacity",za],["symbol",us],["length",Ga],["projection",yg]]);function L9(e){return e===fn||e===yg}function R9(e){return e===fn||e===qa||e===Ga||e===za}const I9=Math.sqrt(3),O9=2/I9,q9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*O9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},uf=new Map([["asterisk",$b],["circle",la],["cross",Db],["diamond",Bb],["diamond2",Fb],["hexagon",q9],["plus",Lb],["square",Rb],["square2",Ib],["star",qb],["times",Hb],["triangle",Gb],["triangle2",zb],["wye",Ub]]);function sf(e){return e&&typeof e.draw=="function"}function G9(e){return sf(e)?!0:typeof e!="string"?!1:uf.has(e.toLowerCase())}function lf(e){if(e==null||sf(e))return e;const t=uf.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function z9(e){if(e==null||sf(e))return[void 0,e];if(typeof e=="string"){const t=uf.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function ss({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=wg(e)),t!=null&&!si(t)&&(r=Ys(r,cf(t))),n&&(r=Ys(r,vg))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||si(t))&&{sort:t},transform:Ys(r,o)}}function ci({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=wg(e)),t!=null&&!si(t)&&(r=js(r,cf(t))),n&&(r=js(r,vg))),{...i,...(t===null||si(t))&&{sort:t},initializer:js(r,a)}}function Ys(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,Tt(n),r,i)}}function js(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,u,s,l,c,f;return{data:u=n,facets:s=r,channels:o}=e.call(this,n,r,i,...a),{data:c=u,facets:f=s,channels:l}=t.call(this,u,s,{...i,...o},...a),{data:c,facets:f,channels:{...o,...l}}}}function U9(e,t){return(e.initializer!=null?ci:ss)(e,t)}function wg(e){return(t,n)=>{const r=et(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function vg(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function H9(e,{sort:t,...n}={}){return{...(is(e)&&e.channel!==void 0?ci:U9)(n,cf(e)),sort:si(t)?t:null}}function cf(e){return(typeof e=="function"&&e.length!==1?W9:V9)(e)}function W9(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function V9(e){let t,n;({channel:t,value:e,order:n}={...Oa(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?gu:en),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=en;break;case"descending":n=gu;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let u;if(t===void 0)u=et(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(u=o[t],!u)return{};u=u.value}const s=(l,c)=>n(u[l],u[c]);return{data:i,facets:a.map(l=>l.slice().sort(s))}}}function co(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function Y9(e,t,n=_g){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",e8]),t.href!=null&&e.href===void 0&&r.push(["href",hf]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?j9(i):n(i,a,t))}function _g(e,t,n,r=Mg){let i;ir(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,u]=yu(a.label);let s;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){a.initialize(l),s=u([])},scope(l,c){a.scope(l,c)},reduce(l,c){s.push(a.reduce(l,c))}}}function j9(e){return{name:e,initialize(){},scope(){},reduce(){}}}function Mg(e,t,n,r=ff){const i=P9(e,n),a=r(t,i);let o,u;return{label:Dr(a===wu?null:i,a.label),initialize(s){o=i===void 0?s:et(s,i),a.scope==="data"&&(u=a.reduceIndex(Gn(s),o))},scope(s,l){a.scope===s&&(u=a.reduceIndex(l,o))},reduce(s,l){return a.scope==null?a.reduceIndex(s,o,l):a.reduceIndex(s,o,u,l)}}}function dd(e,t){return t?Ji($u(e,n=>t[n]),tf):[[,e]]}function ff(e,t,n=X9){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&ir(e))return Q9(e);if(typeof e=="function")return J9(e);if(/^p\d{2}$/i.test(e))return Cn(y9(e));switch(`${e}`.toLowerCase()){case"first":return hf;case"last":return t8;case"identity":return xg;case"count":return wu;case"distinct":return n8;case"sum":return t==null?wu:r8;case"proportion":return pd(t,"data");case"proportion-facet":return pd(t,"facet");case"deviation":return Cn(Tu);case"min":return Cn(Fn);case"min-index":return Cn(T3);case"max":return Cn(Ot);case"max-index":return Cn(C3);case"mean":return md(Nu);case"median":return md(ml);case"variance":return Cn(_c);case"mode":return Cn(N3)}return n(e)}function X9(e){throw new Error(`invalid reduce: ${e}`)}function Z9(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function K9(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>en(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function Q9(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function J9(e){return{reduceIndex(t,n,r){return e(af(n,t),r)}}}function Cn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function md(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Mt(n)?new Date(r):r}}}const xg={reduceIndex(e,t){return af(t,e)}},hf={reduceIndex(e,t){return t[e[0]]}},e8={reduceIndex(e,t){const r=Ji(Vr(e,a=>a.length,a=>t[a]),Kl),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[` ${a.length.toLocaleString("en-US")} more`,Kn(a,Kl)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},t8={reduceIndex(e,t){return t[e[e.length-1]]}},wu={label:"Frequency",reduceIndex(e){return e.length}},n8={label:"Distinct",reduceIndex(e,t){const n=new ku;for(const r of e)n.add(t[r]);return n.size}},r8=Cn(Kn);function pd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Kn(n,a=>r[a])/i}}function da(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=Dr(r)},u){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),Pg(u,{scale:t,type:n,value:et(e,r),label:o,filter:i,hint:a})}function i8(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,da(t,r,n)]))}function a8(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Ve(a,o)]}));return n.channels=e,n}function Pg(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Vs(r,as)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Vs(r,D9)?null:"opacity";break;case"symbol":n!==!0&&Vs(r,G9)?(t.scale=null,t.value=Ve(r,lf)):t.scale="symbol";break;default:t.scale=Oe.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Oe.has(n))throw new Error(`unknown scale: ${n}`);return t}function o8(e,t,n,r,i){const{order:a,reverse:o,reduce:u=!0,limit:s}=i;for(const l in i){if(!Oe.has(l))continue;let{value:c,order:f=a,reverse:h=o,reduce:d=u,limit:m=s}=Oa(i[l]);const p=c==null?void 0:c.startsWith("-");if(p&&(c=c.slice(1)),f=f===void 0?p!==(c==="width"||c==="height")?Ag:Sg:l8(f),d==null||d===!1)continue;const g=l==="fx"||l==="fy"?s8(t,r[l]):u8(n,l);if(!g)throw new Error(`missing channel for scale: ${l}`);const w=g.value,[b=0,v=1/0]=ar(m)?m:m<0?[m]:[0,m];if(c==null)g.domain=()=>{let y=Array.from(new ku(w));return h&&(y=y.reverse()),(b!==0||v!==1/0)&&(y=y.slice(b,v)),y};else{const y=c==="data"?e:c==="height"?bd(n,"y1","y2"):c==="width"?bd(n,"x1","x2"):tc(n,c,c==="y"?"y2":c==="x"?"x2":void 0),_=ff(d===!0?"max":d,y);g.domain=()=>{let M=M3(Gn(w),x=>_.reduceIndex(x,y),x=>w[x]);return f&&M.sort(f),h&&M.reverse(),(b!==0||v!==1/0)&&(M=M.slice(b,v)),M.map(tf)}}}}function u8(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function s8(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const u of e[a])i[u]=o}return t}function bd(e,t,n){const r=tc(e,t),i=tc(e,n);return Ve(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function tc(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function l8(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return Sg;case"descending":return Ag}throw new Error(`invalid order: ${e}`)}function Sg([e,t],[n,r]){return en(t,r)||en(e,n)}function Ag([e,t],[n,r]){return gu(t,r)||en(e,n)}function gd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function c8(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const f8=c8(e=>new Intl.NumberFormat(e));function h8(e="en-US"){const t=f8(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function d8(e){return o9(e,"Invalid Date")}function m8(e="en-US"){const t=h8(e);return n=>(n instanceof Date?d8:typeof n=="number"?t:ft)(n)}const Er=m8();let nc=0,rc;function p8(){const e=nc;return nc=0,rc=void 0,e}function Zn(e){e!==rc&&(rc=e,console.warn(e),++nc)}const wt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let b8=0;function yd(){return`plot-clip-${++b8}`}function g8(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:u,fillOpacity:s,stroke:l,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:g,opacity:w,mixBlendMode:b,imageFilter:v,paintOrder:y,pointerEvents:_,shapeRendering:M,channels:x},{ariaLabel:E,fill:S="currentColor",fillOpacity:k,stroke:A="none",strokeOpacity:L,strokeWidth:G,strokeLinecap:F,strokeLinejoin:C,strokeMiterlimit:q,paintOrder:ee}){S===null&&(u=null,s=null),A===null&&(l=null,f=null),yt(S)?!yt(A)&&(!yt(u)||x!=null&&x.fill)&&(A="none"):yt(A)&&(!yt(l)||x!=null&&x.stroke)&&(S="none");const[te,Q]=On(u,S),[z,U]=ht(s,k),[$,I]=On(l,A),[J,ue]=ht(f,L),[ae,V]=ht(w);ha(I)||(c===void 0&&(c=G),d===void 0&&(d=F),h===void 0&&(h=C),m===void 0&&!N9(h)&&(m=q),!ha(Q)&&y===void 0&&(y=ee));const[Y,B]=ht(c);return S!==null&&(e.fill=rt(Q,"currentColor"),e.fillOpacity=Ti(U,1)),A!==null&&(e.stroke=rt(I,"none"),e.strokeWidth=Ti(B,1),e.strokeOpacity=Ti(ue,1),e.strokeLinejoin=rt(h,"miter"),e.strokeLinecap=rt(d,"butt"),e.strokeMiterlimit=Ti(m,4),e.strokeDasharray=rt(p,"none"),e.strokeDashoffset=rt(g,"0")),e.target=ft(o),e.ariaLabel=ft(E),e.ariaDescription=ft(i),e.ariaHidden=ft(a),e.opacity=Ti(V,1),e.mixBlendMode=rt(b,"normal"),e.imageFilter=rt(v,"none"),e.paintOrder=rt(y,"normal"),e.pointerEvents=rt(_,"auto"),e.shapeRendering=rt(M,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:te,scale:"auto",optional:!0},fillOpacity:{value:z,scale:"auto",optional:!0},stroke:{value:$,scale:"auto",optional:!0},strokeOpacity:{value:J,scale:"auto",optional:!0},strokeWidth:{value:Y,optional:!0},opacity:{value:ae,scale:"auto",optional:!0}}}function y8(e,t){t&&e.filter(n=>Zc(t[n])).append("title").call(v8,t)}function w8(e,t){t&&e.filter(([n])=>Zc(t[n])).append("title").call(_8,t)}function v8(e,t){t&&e.text(n=>Er(t[n]))}function _8(e,t){t&&e.text(([n])=>Er(t[n]))}function Un(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&ce(e,"aria-label",h=>r[h]),a&&ce(e,"fill",h=>a[h]),o&&ce(e,"fill-opacity",h=>o[h]),u&&ce(e,"stroke",h=>u[h]),s&&ce(e,"stroke-opacity",h=>s[h]),l&&ce(e,"stroke-width",h=>l[h]),c&&ce(e,"opacity",h=>c[h]),f&&kg(e,h=>f[h],t),n||y8(e,i)}function Eg(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&ce(e,"aria-label",([h])=>r[h]),a&&ce(e,"fill",([h])=>a[h]),o&&ce(e,"fill-opacity",([h])=>o[h]),u&&ce(e,"stroke",([h])=>u[h]),s&&ce(e,"stroke-opacity",([h])=>s[h]),l&&ce(e,"stroke-width",([h])=>l[h]),c&&ce(e,"opacity",([h])=>c[h]),f&&kg(e,([h])=>f[h],t),n||w8(e,i)}function M8({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:o,opacity:u,href:s},{tip:l}){return[e,l?void 0:t,n,r,i,a,o,u,s].filter(c=>c!==void 0)}function x8(e,t,n){const r=$u(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Zn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Cg(e,t,n,r){const{z:i}=n,{z:a}=r,o=M8(r,n),u=[...t,...o];for(const s of a?x8(e,a,i):[e]){let l,c;e:for(const f of s){for(const h of u)if(!er(h[f])){c&&c.push(-1);continue e}if(l===void 0){c&&(yield c),l=o.map(h=>mr(h[f])),c=[f];continue}c.push(f);for(let h=0;h<o.length;++h)if(mr(o[h][f])!==l[h]){yield c,l=o.map(m=>mr(m[f])),c=[f];continue e}}c&&(yield c)}}function Tg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=nn(e,"clip",["frame","sphere"])),e}function P8(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:u,marginLeft:s,marginRight:l,marginTop:c,marginBottom:f}=n,h=yd();i=`url(#${h})`,e=We("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",s).attr("y",c).attr("width",o-l-s).attr("height",u-c-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const u=yd();i=`url(#${u})`,e.append("clipPath").attr("id",u).append("path").attr("d",Gu(o)({type:"Sphere"}));break}}ce(e,"aria-label",t.ariaLabel),ce(e,"aria-description",t.ariaDescription),ce(e,"aria-hidden",t.ariaHidden),ce(e,"clip-path",i)}function zt(e,t,n,r){P8(e,t,n,r),ce(e,"fill",t.fill),ce(e,"fill-opacity",t.fillOpacity),ce(e,"stroke",t.stroke),ce(e,"stroke-width",t.strokeWidth),ce(e,"stroke-opacity",t.strokeOpacity),ce(e,"stroke-linejoin",t.strokeLinejoin),ce(e,"stroke-linecap",t.strokeLinecap),ce(e,"stroke-miterlimit",t.strokeMiterlimit),ce(e,"stroke-dasharray",t.strokeDasharray),ce(e,"stroke-dashoffset",t.strokeDashoffset),ce(e,"shape-rendering",t.shapeRendering),ce(e,"filter",t.imageFilter),ce(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;ce(e,"pointer-events",i)}function Ut(e,t){S8(e,"mix-blend-mode",t.mixBlendMode),ce(e,"opacity",t.opacity)}function kg(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(Jr.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(Jr.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function ce(e,t,n){n!=null&&e.attr(t,n)}function S8(e,t,n){n!=null&&e.style(t,n)}function kt(e,t,{x:n,y:r},i=wt,a=wt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function rt(e,t){if((e=ft(e))!==t)return e}function Ti(e,t){if((e=Fe(e))!==t)return e}const A8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function df(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!A8.test(e))throw new Error(`invalid class name: ${e}`);return e}function mf(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Ua({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function pf(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Tg(n)}}function We(e,{document:t}){return Wi(Fu(e).call(t.documentElement))}const $g=Math.PI,Mn=2*$g,wd=.618;function E8({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let u,s,l="frame";if(ir(e)){let _;if({type:e,domain:s,inset:_,insetTop:n=_!==void 0?_:n,insetRight:r=_!==void 0?_:r,insetBottom:i=_!==void 0?_:i,insetLeft:a=_!==void 0?_:a,clip:l=l,...u}=e,e==null)return}typeof e!="function"&&({type:e}=Dg(e));const{width:c,height:f,marginLeft:h,marginRight:d,marginTop:m,marginBottom:p}=o,g=c-h-d-a-r,w=f-m-p-n-i;if(e=e==null?void 0:e({width:g,height:w,clip:l,...u}),e==null)return;l=C8(l,h,m,c-d,f-p);let b=h+a,v=m+n,y;if(s!=null){const[[_,M],[x,E]]=Gu(e).bounds(s),S=Math.min(g/(x-_),w/(E-M));S>0?(b-=(S*(_+x)-g)/2,v-=(S*(M+E)-w)/2,y=zl({point(k,A){this.stream.point(k*S+b,A*S+v)}})):Zn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return y??(y=b===0&&v===0?Ng():zl({point(_,M){this.stream.point(_+b,M+v)}})),{stream:_=>e.stream(y.stream(l(_)))}}function Dg(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Vt(p4,.7463,.4673);case"albers":return fo(km,.7463,.4673);case"azimuthal-equal-area":return Vt(b4,4,4);case"azimuthal-equidistant":return Vt(g4,Mn,Mn);case"conic-conformal":return fo(v4,Mn,Mn);case"conic-equal-area":return fo(ou,6.1702,2.9781);case"conic-equidistant":return fo(x4,7.312,3.6282);case"equal-earth":return Vt(S4,5.4133,2.6347);case"equirectangular":return Vt(_4,Mn,$g);case"gnomonic":return Vt(A4,3.4641,3.4641);case"identity":return{type:Ng};case"reflect-y":return{type:T8};case"mercator":return Vt(y4,Mn,Mn);case"orthographic":return Vt(E4,2,2);case"stereographic":return Vt(C4,2,2);case"transverse-mercator":return Vt(T4,Mn,Mn);default:throw new Error(`unknown projection type: ${e}`)}}function C8(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return mm(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Vt(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:u})=>{var l,c,f;const s=e();return o!=null&&((l=s.precision)==null||l.call(s,o)),a!=null&&((c=s.rotate)==null||c.call(s,a)),typeof u=="number"&&((f=s.clipAngle)==null||f.call(s,u)),s.scale(Math.min(r/t,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/t}}function fo(e,t,n){const{type:r,aspectRatio:i}=Vt(e,t,n);return{type:a=>{const{parallels:o,domain:u,width:s,height:l}=a,c=r(a);return o!=null&&(c.parallels(o),u===void 0&&c.fitSize([s,l],{type:"Sphere"})),c},aspectRatio:i}}const Ng=Ra({stream:e=>e}),T8=Ra(zl({point(e,t){this.stream.point(e,-t)}}));function k8(e,t,n,r){const i=n[e],a=n[t],o=i.length,u=n[e]=new Float64Array(o).fill(NaN),s=n[t]=new Float64Array(o).fill(NaN);let l;const c=r.stream({point(f,h){u[l]=f,s[l]=h}});for(l=0;l<o;++l)c.point(i[l],a[l])}function $8({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(ir(e)&&(e=e.type),e!=null)}function D8(e){if(typeof(e==null?void 0:e.stream)=="function")return wd;if(ir(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=Dg(e);if(t)return t}return wd}}function N8(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,u){t.push(o),n.push(u)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)fr(o,a);return[r,i]}const B8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Bg=new Map([["accent",Q6],["category10",K6],["dark2",J6],["observable10",B8],["paired",e7],["pastel1",t7],["pastel2",n7],["set1",r7],["set2",i7],["set3",a7],["tableau10",o7]]);function F8(e){return e!=null&&Bg.has(`${e}`.toLowerCase())}const vd=new Map([...Bg,["brbg",xn(bp,gp)],["prgn",xn(yp,wp)],["piyg",xn(vp,_p)],["puor",xn(Mp,xp)],["rdbu",xn(Yl,cu)],["rdgy",xn(Pp,Sp)],["rdylbu",xn(jl,fu)],["rdylgn",xn(Ap,Ep)],["spectral",xn(Cp,Tp)],["burd",_d(Yl,cu)],["buylrd",_d(jl,fu)],["blues",Ze(eb,tb)],["greens",Ze(nb,rb)],["greys",Ze(ib,ab)],["oranges",Ze(cb,fb)],["purples",Ze(ob,ub)],["reds",Ze(sb,lb)],["turbo",Pn(yb)],["viridis",Pn(wb)],["magma",Pn(vb)],["inferno",Pn(_b)],["plasma",Pn(Mb)],["cividis",Pn(hb)],["cubehelix",Pn(db)],["warm",Pn(mb)],["cool",Pn(pb)],["bugn",Ze(kp,$p)],["bupu",Ze(Dp,Np)],["gnbu",Ze(Bp,Fp)],["orrd",Ze(Lp,Rp)],["pubu",Ze(qp,Gp)],["pubugn",Ze(Ip,Op)],["purd",Ze(zp,Up)],["rdpu",Ze(Hp,Wp)],["ylgn",Ze(jp,Xp)],["ylgnbu",Ze(Vp,Yp)],["ylorbr",Ze(Zp,Kp)],["ylorrd",Ze(Qp,Jp)],["rainbow",Md(bb)],["sinebow",Md(gb)]]);function Ze(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Kt(t,n):e[n])}function xn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Kt(t,n):e[n])}function _d(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Kt(r=>t(1-r),n):e[n].slice().reverse())}function Pn(e){return({length:t})=>Kt(e,Math.max(2,Math.floor(t)))}function Md(e){return({length:t})=>Kt(e,Math.floor(t)+1).slice(0,-1)}function Fg(e){const t=`${e}`.toLowerCase();if(!vd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return vd.get(t)}function ls(e,t){const n=Fg(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function L8(e,t="greys"){const n=new Set,[r,i]=ls(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const xd=new Map([["brbg",gp],["prgn",wp],["piyg",_p],["puor",xp],["rdbu",cu],["rdgy",Sp],["rdylbu",fu],["rdylgn",Ep],["spectral",Tp],["burd",e=>cu(1-e)],["buylrd",e=>fu(1-e)],["blues",tb],["greens",rb],["greys",ab],["purples",ub],["reds",lb],["oranges",fb],["turbo",yb],["viridis",wb],["magma",vb],["inferno",_b],["plasma",Mb],["cividis",hb],["cubehelix",db],["warm",mb],["cool",pb],["bugn",$p],["bupu",Np],["gnbu",Fp],["orrd",Rp],["pubugn",Op],["pubu",Gp],["purd",Up],["rdpu",Wp],["ylgnbu",Yp],["ylgn",Xp],["ylorbr",Kp],["ylorrd",Jp],["rainbow",bb],["sinebow",gb]]);function bf(e){const t=`${e}`.toLowerCase();if(!xd.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return xd.get(t)}const R8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function I8(e){return e!=null&&R8.has(`${e}`.toLowerCase())}const Lg=e=>t=>e(1-t),Xs=[0,1],Pd=new Map([["number",ot],["rgb",Mr],["hsl",i_],["hcl",u_],["lab",a_]]);function Rg(e){const t=`${e}`.toLowerCase();if(!Pd.has(t))throw new Error(`unknown interpolator: ${t}`);return Pd.get(t)}function Ha(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:u=Og(e,n),unknown:s,round:l,scheme:c,interval:f,range:h=Oe.get(e)===qa?X8(n,u):Oe.get(e)===Ga?Z8(n,u):Oe.get(e)===za?Xs:void 0,interpolate:d=Oe.get(e)===zn?c==null&&h!==void 0?Mr:bf(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):l?Tc:ot,reverse:m}){if(f=wi(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=Rg(d)),m=!!m,h!==void 0){const p=(u=Tt(u)).length,g=(h=Tt(h)).length;if(p!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Iu(d,h),h=void 0}}if(d.length===1?(m&&(d=Lg(d),m=!1),h===void 0&&(h=Float64Array.from(u,(p,g)=>g/(u.length-1)),h.length===2&&(h=Xs)),t.interpolate((h===Xs?Ra:yf)(d))):t.interpolate(d),o){const[p,g]=Bt(u);(p>0||g<0)&&(u=fa(u),li(u)!==Math.sign(p)?u[u.length-1]=0:u[0]=0)}return m&&(u=Uo(u)),t.domain(u).unknown(s),i&&(t.nice(O8(i,r)),u=t.domain()),h!==void 0&&t.range(h),a&&t.clamp(a),{type:r,domain:u,range:h,scale:t,interpolate:d,interval:f}}function O8(e,t){return e===!0?void 0:typeof e=="number"?e:S9(e,t)}function q8(e,t,n){return Ha(e,qc(),t,n)}function G8(e,t,n){return Ig(e,t,{...n,exponent:.5})}function Ig(e,t,{exponent:n=1,...r}){return Ha(e,Xm().exponent(n),t,{...r,type:"pow"})}function z8(e,t,{base:n=10,domain:r=K8(t),...i}){return Ha(e,Wm().base(n),t,{...i,domain:r})}function U8(e,t,{constant:n=1,...r}){return Ha(e,Ym().constant(n),t,r)}function H8(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=Q8(t),unknown:u,interpolate:s,reverse:l}){return n===void 0&&(n=s!==void 0?Kt(s,i):Oe.get(e)===zn?ls(a,i):void 0),o.length>0&&(o=Zm(o,n===void 0?{length:i}:n).quantiles()),gf(e,t,{domain:o,range:n,reverse:l,unknown:u})}function W8(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=Og(e,t),unknown:o,interpolate:u,reverse:s}){const[l,c]=Bt(a);let f;return n===void 0?(f=ea(l,c,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=u!==void 0?Kt(u,r):Oe.get(e)===zn?ls(i,r):void 0):(f=Kt(ot(l,c),r+1).slice(1,-1),l instanceof Date&&(f=f.map(h=>new Date(h)))),li(Tt(a))<0&&f.reverse(),gf(e,t,{domain:f,range:n,reverse:s,unknown:o})}function gf(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Kt(a,n.length+1):Oe.get(e)===zn?ls(i,n.length+1):void 0,reverse:u}){n=Tt(n);const s=li(n);if(!isNaN(s)&&!V8(n,s))throw new Error(`the ${e} scale has a non-monotonic domain`);return u&&(o=Uo(o)),{type:"threshold",scale:Km(s<0?Uo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function V8(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=_a(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function Y8(e){return{type:"identity",scale:R9(Oe.get(e))?zm():t=>t}}function ma(e,t=rg){return e.length?[Fn(e,({value:n})=>n===void 0?n:Fn(n,t)),Ot(e,({value:n})=>n===void 0?n:Ot(n,t))]:[0,1]}function Og(e,t){const n=Oe.get(e);return(n===qa||n===za||n===Ga?j8:ma)(t)}function j8(e){return[0,e.length?Ot(e,({value:t})=>t===void 0?t:Ot(t,rg)):1]}function X8(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Qr(e,.5,({value:o})=>o===void 0?NaN:Qr(o,.25,ts)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/Ot(i);return a<1?i.map(o=>o*a):i}function Z8(e,t){const n=ml(e,({value:a})=>a===void 0?NaN:ml(a,Math.abs)),r=t.map(a=>12*a/n),i=60/Ot(r);return i<1?r.map(a=>a*i):r}function K8(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return ma(e,ts);if(n<0)return ma(e,Kc)}return[1,10]}function Q8(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function yf(e){return(t,n)=>r=>e(t+r*(n-t))}function cs(e,t,n,r,{type:i,nice:a,clamp:o,domain:u=ma(r),unknown:s,pivot:l=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=Oe.get(e)===zn?c==null&&f!==void 0?Mr:bf(c!==void 0?c:"rdbu"):ot,reverse:m}){l=+l,u=Tt(u);let[p,g]=u;if(u.length>2&&Zn(`Warning: the diverging ${e} scale domain contains extra elements.`),_a(p,g)<0&&([p,g]=[g,p],m=!m),p=Math.min(p,l),g=Math.max(g,l),typeof d!="function"&&(d=Rg(d)),f!==void 0&&(d=d.length===1?yf(d)(...f):Iu(d,f)),m&&(d=Lg(d)),h){const w=n.apply(l),b=w-n.apply(p),v=n.apply(g)-w;b<v?p=n.invert(w-v):b>v&&(g=n.invert(w+b))}return t.domain([p,l,g]).unknown(s).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,g],pivot:l,interpolate:d,scale:t}}function J8(e,t,n){return cs(e,hp(),rM,t,n)}function eM(e,t,n){return qg(e,t,{...n,exponent:.5})}function qg(e,t,{exponent:n=1,...r}){return cs(e,pp().exponent(n=+n),oM(n),t,{...r,type:"diverging-pow"})}function tM(e,t,{base:n=10,pivot:r=1,domain:i=ma(t,r<0?Kc:ts),...a}){return cs(e,dp().base(n=+n),iM,t,{domain:i,pivot:r,...a})}function nM(e,t,{constant:n=1,...r}){return cs(e,mp().constant(n=+n),uM(n),t,r)}const rM={apply(e){return e},invert(e){return e}},iM={apply:Math.log,invert:Math.exp},aM={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function oM(e){return e===.5?aM:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function uM(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Gg(e,t,n,r){return Ha(e,t,n,r)}function sM(e,t,n){return Gg(e,X6(),t,n)}function lM(e,t,n){return Gg(e,Z6(),t,n)}const Wa=Symbol("ordinal");function zg(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:u,hint:s}){return i=wi(i,r),a===void 0&&(a=Hg(n,i,e)),(r==="categorical"||r===Wa)&&(r="ordinal"),u&&(a=Uo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:s,interval:i}}function cM(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:u,...s}){r=wi(r,n),i===void 0&&(i=Hg(t,r,e));let l;if(Oe.get(e)===us)l=dM(t),a=a===void 0?mM(l):Ve(a,lf);else if(Oe.get(e)===zn&&(a===void 0&&(n==="ordinal"||n===Wa)&&(a=L8(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const c=bf(o),f=a[0],h=a[1]-a[0];a=({length:d})=>Kt(m=>c(f+h*m),d)}else a=Fg(o);if(u===Hl)throw new Error(`implicit unknown on ${e} scale is not supported`);return zg(e,Oc().unknown(u),t,{...s,type:n,domain:i,range:a,hint:l})}function fM(e,t,{align:n=.5,padding:r=.5,...i}){return Ug(k4().align(n).padding(r),t,i,e)}function hM(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return Ug(Wu().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function Ug(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=zg(r,e,t,n),e.round=i,e}function Hg(e,t,n){const r=new ku;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Bt(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Oe.get(n)===fn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Ji(r,en)}function Sd(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function dM(e){return{fill:Sd(e,"fill"),stroke:Sd(e,"stroke")}}function mM(e){return yt(e.fill)?v7:w7}function ic(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:u,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,facet:{label:m=t}={},...p}={}){const g={};for(const[w,b]of e){const v=p[w],y=wM(w,b,{round:Oe.get(w)===fn?u:void 0,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,...v});if(y){let{label:_=w==="fx"||w==="fy"?m:t,percent:M,transform:x,inset:E,insetTop:S=E!==void 0?E:w==="y"?r:0,insetRight:k=E!==void 0?E:w==="x"?i:0,insetBottom:A=E!==void 0?E:w==="y"?a:0,insetLeft:L=E!==void 0?E:w==="x"?o:0}=v||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");y.percent=!!M,y.label=_===void 0?bM(b,y):_,y.transform=x,w==="x"||w==="fx"?(y.insetLeft=+L,y.insetRight=+k):(w==="y"||w==="fy")&&(y.insetTop=+S,y.insetBottom=+A),g[w]=y}}return g}function Ad(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:u,label:s}=i;t[r]=PM(i),n[r]=a,a.type=o,u!=null&&(a.interval=u),s!=null&&(a.label=s)}return n}function pM(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?wf(t):t;i&&Ed(i,o),a&&Cd(a,o);const u=i||a?Wg(e,t):t;n&&Ed(n,u),r&&Cd(r,u)}function bM(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Nr(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function gM(e){return Math.sign(li(e.domain()))*Math.sign(li(e.range()))}function wf(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:u,marginRight:s,marginBottom:l,marginLeft:c}}=e;return{marginTop:Math.max(t,u),marginRight:Math.max(n,s),marginBottom:Math.max(r,l),marginLeft:Math.max(i,c),width:a,height:o}}function Wg({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=wf(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:u,height:t?t.scale.bandwidth()+r+a:s,facet:{width:u,height:s}}}function Ed(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,u=a+n,s=i-o-r;e.range=[u,Math.max(u,s)],Nr(e)||(e.range=Yg(e)),e.scale.range(e.range)}Vg(e)}function Cd(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,u=a+n,s=i-o-r;e.range=[Math.max(u,s),u],Nr(e)?e.range.reverse():e.range=Yg(e),e.scale.range(e.range)}Vg(e)}function Vg(e){e.round===void 0&&_M(e)&&yM(e)<=30&&e.scale.round(!0)}function yM({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,u=Math.abs(r-n)/Math.max(1,o+a*2);return(u-Math.floor(u))*o}function Yg(e){const t=e.scale.domain().length+jg(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function wM(e,t=[],n={}){const r=vM(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Nr({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(Mt)?Zn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${qr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`):i.some(C9)?Zn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${qr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`):i.some(T9)&&Zn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${qr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=ho(t,n,cn);break;case"identity":switch(Oe.get(e)){case fn:n=ho(t,n,cn);break;case us:n=ho(t,n,MM);break}break;case"utc":case"time":n=ho(t,n,w9);break}switch(r){case"diverging":return J8(e,t,n);case"diverging-sqrt":return eM(e,t,n);case"diverging-pow":return qg(e,t,n);case"diverging-log":return tM(e,t,n);case"diverging-symlog":return nM(e,t,n);case"categorical":case"ordinal":case Wa:return cM(e,t,n);case"cyclical":case"sequential":case"linear":return q8(e,t,n);case"sqrt":return G8(e,t,n);case"threshold":return gf(e,t,n);case"quantile":return H8(e,t,n);case"quantize":return W8(e,t,n);case"pow":return Ig(e,t,n);case"log":return z8(e,t,n);case"symlog":return U8(e,t,n);case"utc":return lM(e,t,n);case"time":return sM(e,t,n);case"point":return fM(e,t,n);case"band":return hM(e,t,n);case"identity":return Y8(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function qr(e){return typeof e=="symbol"?e.description:e}function Td(e){return typeof e=="string"?`${e}`.toLowerCase():e}const kd={toString:()=>"projection"};function vM(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:u}){if(n=Td(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&u!=null&&(n=kd);for(const l of t){const c=Td(l.type);if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}}if(n===kd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const s=Oe.get(e);if(s===qa)return"sqrt";if(s===za||s===Ga)return"linear";if(s===us)return"ordinal";if((r||i||[]).length>2)return Zs(s);if(r!==void 0){if(hd(r))return Zs(s);if(Mt(r))return"utc"}else{const l=t.map(({value:c})=>c).filter(c=>c!==void 0);if(l.some(hd))return Zs(s);if(l.some(Mt))return"utc"}if(s===zn){if(o!=null||I8(a))return"diverging";if(F8(a))return"categorical"}return"linear"}function Zs(e){switch(e){case fn:return"point";case zn:return Wa;default:return"ordinal"}}function Nr({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Wa}function jg({type:e}){return e==="threshold"}function _M({type:e}){return e==="point"||e==="band"}function fi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function ho(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function MM(e){return Ve(e,lf)}function xM(e){return t=>{if(!Oe.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function PM({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:u,pivot:s}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const l=e.unknown?e.unknown():void 0;return{type:t,domain:fa(n),...r!==void 0&&{range:fa(r)},...o!==void 0&&{transform:o},...u&&{percent:u},...l!==void 0&&{unknown:l},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function SM(e,t,n={}){let r=.5-wt,i=.5+wt,a=.5+wt,o=.5-wt;for(const{marginTop:p,marginRight:g,marginBottom:w,marginLeft:b}of t)p>r&&(r=p),g>i&&(i=g),w>a&&(a=w),b>o&&(o=b);let{margin:u,marginTop:s=u!==void 0?u:r,marginRight:l=u!==void 0?u:i,marginBottom:c=u!==void 0?u:a,marginLeft:f=u!==void 0?u:o}=n;s=+s,l=+l,c=+c,f=+f;let{width:h=640,height:d=AM(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,s-r+c-a)}=n;h=+h,d=+d;const m={width:h,height:d,marginTop:s,marginRight:l,marginBottom:c,marginLeft:f};if(e.fx||e.fy){let{margin:p,marginTop:g=p!==void 0?p:s,marginRight:w=p!==void 0?p:l,marginBottom:b=p!==void 0?p:c,marginLeft:v=p!==void 0?p:f}=n.facet??{};g=+g,w=+w,b=+b,v=+v,m.facet={marginTop:g,marginRight:w,marginBottom:b,marginLeft:v}}return m}function AM({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:u,marginRightDefault:s,marginBottomDefault:l,marginLeftDefault:c}){const f=n?n.scale.domain().length:1,h=D8(i);if(h){const m=r?r.scale.domain().length:1,p=(1.1*f-.1)/(1.1*m-.1)*h,g=Math.max(.1,Math.min(10,p));return Math.round((o-c-s)*g+u+l)}const d=t?Nr(t)?t.scale.domain().length:Math.max(7,17/f):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=$d("y",t)/($d("x",e)*a),p=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,w=p*(o-c-s)-e.insetLeft-e.insetRight;return(m*w+t.insetTop+t.insetBottom)/g+u+l}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function $d(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const u=t.scale.exponent();i=s=>Math.pow(s,u);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Bt(r);return Math.abs(i(o)-i(a))}function EM(e,t){const{fx:n,fy:r}=ic(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?v3(i,a).map(([o,u],s)=>({x:o,y:u,i:s})):i?i.map((o,u)=>({x:o,i:u})):a?a.map((o,u)=>({y:o,i:u})):void 0}function CM(e,{x:t,y:n}){return t&&(t=ac(t)),n&&(n=ac(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function vf(e,{fx:t,fy:n}){const r=Gn(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Vr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Vr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Vr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function TM(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function kM(e){const t=[],n=new Uint32Array(Kn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const $M=new Map([["top",Ks],["right",el],["bottom",Qs],["left",Js],["top-left",mo(Ks,Js)],["top-right",mo(Ks,el)],["bottom-left",mo(Qs,Js)],["bottom-right",mo(Qs,el)],["top-empty",BM],["right-empty",RM],["bottom-empty",FM],["left-empty",LM],["empty",IM]]);function DM(e){if(e==null)return null;const t=$M.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Dd=new WeakMap;function ac(e){let t=Dd.get(e);return t||Dd.set(e,t=new wr(Ve(e,(n,r)=>[n,r]))),t}function or(e,t){return ac(e).get(t)}function NM(e,t,n){return t=mr(t),n=mr(n),e.find(r=>Object.is(mr(r.x),t)&&Object.is(mr(r.y),n))}function fs(e,t,n){var r;return(r=NM(e,t,n))==null?void 0:r.empty}function Ks(e,{y:t},{y:n}){return t?or(t,n)===0:!0}function Qs(e,{y:t},{y:n}){return t?or(t,n)===t.length-1:!0}function Js(e,{x:t},{x:n}){return t?or(t,n)===0:!0}function el(e,{x:t},{x:n}){return t?or(t,n)===t.length-1:!0}function BM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,r);if(a>0)return fs(e,n,t[a-1])}function FM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,r);if(a<t.length-1)return fs(e,n,t[a+1])}function LM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,n);if(a>0)return fs(e,t[a-1],r)}function RM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,n);if(a<t.length-1)return fs(e,t[a+1],r)}function IM(e,t,{empty:n}){return n}function mo(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function tl(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class mt{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:u,fy:s,sort:l,dx:c=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:m=h,marginBottom:p=h,marginLeft:g=h,clip:w=i==null?void 0:i.clip,channels:b,tip:v,render:y}=r;if(this.data=t,this.sort=si(l)?l:null,this.initializer=ci(r).initializer,this.transform=this.initializer?r.transform:ss(r).transform,a===null||a===!1?this.facet=null:(this.facet=nn(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Co&&typeof u=="string"?[u]:u,this.fy=t===Co&&typeof s=="string"?[s]:s),this.facetAnchor=DM(o),n=gg(n),b!==void 0&&(n={...OM(b),...n}),i!==void 0&&(n={...g8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,M])=>{if(is(M.value)){const{value:x,label:E=M.label,scale:S=M.scale}=M.value;M={...M,label:E,scale:S,value:x}}if(t===Co&&typeof M.value=="string"){const{value:x}=M;M={...M,value:[x]}}return[_,M]}).filter(([_,{value:M,optional:x}])=>{if(M!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+c,this.dy=+f,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+g,this.clip=Tg(w),this.tip=qM(v),this.facet==="super"){if(u||s)throw new Error("super-faceting cannot use fx or fy");for(const _ in this.channels){const{scale:M}=n[_];if(!(M!=="x"&&M!=="y"))throw new Error("super-faceting cannot use x or y")}}y!=null&&(this.render=Zg(y,this.render))}initialize(t,n,r){let i=Tt(this.data);t===void 0&&i!=null&&(t=[Gn(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=Tt(i)),t!==void 0&&(t.original=a);const o=i8(this.channels,i);return this.sort!=null&&o8(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=er}=n[i];if(a!==null){const o=r[i];t=t.filter(u=>a(o[u]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&k8(i,a,n,r.projection)}}scale(t,n,r){const i=a8(t,n);return r.projection&&this.project(t,i,r),i}}function Xg(...e){return e.plot=mt.prototype.plot,e}function Zg(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,u){return e.call(this,n,r,i,a,o,(s,l,c,f,h)=>t.call(this,s,l,c,f,h,u))}}function OM(e){return Object.fromEntries(Object.entries(gg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Oa(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function qM(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?nn(e,"tip",["x","y","xy"]):e}function hs(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:ir(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Nd=new WeakMap;function _f(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:u,render:s,...l}={}){return o=+o,i!=null&&(n??(n=null),u={...u,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),u={...u,py:{value:a,scale:"y"}}),{x:n,y:r,channels:u,...l,render:Zg(function(c,f,h,d,m,p){m={...m,pointerSticky:!1};const g=m.ownerSVGElement,{data:w}=m.getMarkState(this);let b=Nd.get(g);b||Nd.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(I)-1;const{x:y,y:_,fx:M,fy:x}=f;let E=M?M(c.fx)-d.marginLeft:0,S=x?x(c.fy)-d.marginTop:0;y!=null&&y.bandwidth&&(E+=y.bandwidth()/2),_!=null&&_.bandwidth&&(S+=_.bandwidth()/2);const k=c.fi!=null;let A;if(k){let V=b.facetStates;V||(b.facetStates=V=new Map),A=V.get(this),A||V.set(this,A=new Map)}const[L,G]=Ua(this,d),{px:F,py:C}=h,q=F?V=>F[V]:Qg(h,L),ee=C?V=>C[V]:Jg(h,G);let te,Q,z,U;function $(V,Y){if(k)if(U&&(U=cancelAnimationFrame(U)),V==null)A.delete(c.fi);else{A.set(c.fi,Y),U=requestAnimationFrame(()=>{U=null;for(const[B,H]of A)if(H<Y||H===Y&&B<c.fi){V=null;break}I(V)});return}I(V)}function I(V){if(te===V&&z===b.sticky)return;te=V,z=m.pointerSticky=b.sticky;const Y=te==null?[]:[te];k&&(Y.fx=c.fx,Y.fy=c.fy,Y.fi=c.fi);const B=p(Y,f,h,d,m);if(Q){if(k){const H=Q.parentNode,j=Q.getAttribute("transform"),D=B.getAttribute("transform");j?B.setAttribute("transform",j):B.removeAttribute("transform"),D?H.setAttribute("transform",D):H.removeAttribute("transform"),B.removeAttribute("aria-label"),B.removeAttribute("aria-description"),B.removeAttribute("aria-hidden")}Q.replaceWith(B)}return b.roots[v]=Q=B,te==null&&(A==null?void 0:A.size)>1||m.dispatchValue(te==null?null:w[te]),B}function J(V){if(b.sticky||V.pointerType==="mouse"&&V.buttons===1)return;let[Y,B]=Av(V);Y-=E,B-=S;const H=Y<d.marginLeft||Y>d.width-d.marginRight?1:e,j=B<d.marginTop||B>d.height-d.marginBottom?1:t;let D=null,pe=o*o;for(const ne of c){const he=H*(q(ne)-Y),xe=j*(ee(ne)-B),Ue=he*he+xe*xe;Ue<=pe&&(D=ne,pe=Ue)}if(D!=null&&(e!==1||t!==1)){const ne=q(D)-Y,he=ee(D)-B;pe=ne*ne+he*he}$(D,pe)}function ue(V){V.pointerType==="mouse"&&te!=null&&(b.sticky&&b.roots.some(Y=>Y==null?void 0:Y.contains(V.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(Y=>Y(null))):(b.sticky=!0,I(te)),V.stopImmediatePropagation()))}function ae(V){V.pointerType==="mouse"&&(b.sticky||$(null))}return g.addEventListener("pointerenter",J),g.addEventListener("pointermove",J),g.addEventListener("pointerdown",ue),g.addEventListener("pointerleave",ae),I(null)},s)}}function Kg(e){return _f(1,1,e)}function GM(e){return _f(1,.01,e)}function Bd(e){return _f(.01,1,e)}function Qg({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Jg({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function e2(e){return Nr(e)&&e.interval===void 0?void 0:"tabular-nums"}function zM(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:u=0,marginBottom:s=16+r,marginLeft:l=0,style:c,ticks:f=(i-l-u)/64,tickFormat:h,fontVariant:d=e2(e),round:m=!0,opacity:p,className:g}=t;const w=pf(t);g=df(g),p=ht(p)[1],h===null&&(h=()=>null);const b=We("svg",w).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(L=>L.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(mf,c);let v=L=>L.selectAll(".tick line").attr("y1",o+s-a),y;const _=m?(L,G)=>L.rangeRound(G):(L,G)=>L.range(G),{type:M,domain:x,range:E,interpolate:S,scale:k,pivot:A}=e;if(S){const L=E===void 0?S:Iu(S.length===1?yf(S):S,E);y=_(k.copy(),Kt(ot(l,i-u),Math.min(x.length+(A!==void 0),E===void 0?1/0:E.length)));const G=256,F=w.document.createElement("canvas");F.width=G,F.height=1;const C=F.getContext("2d");for(let q=0,ee=G-1;q<G;++q)C.fillStyle=L(q/ee),C.fillRect(q,0,1,1);b.append("image").attr("opacity",p).attr("x",l).attr("y",o).attr("width",i-l-u).attr("height",a-o-s).attr("preserveAspectRatio","none").attr("xlink:href",F.toDataURL())}else if(M==="threshold"){const L=x,G=h===void 0?F=>F:typeof h=="string"?gi(h):h;y=_(qc().domain([-1,E.length-1]),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(E).enter().append("rect").attr("x",(F,C)=>y(C-1)).attr("y",o).attr("width",(F,C)=>y(C)-y(C-1)).attr("height",a-o-s).attr("fill",F=>F),f=Ve(L,(F,C)=>C),h=F=>G(L[F],F)}else y=_(Wu().domain(x),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(x).enter().append("rect").attr("x",y).attr("y",o).attr("width",Math.max(0,y.bandwidth()-1)).attr("height",a-o-s).attr("fill",k),v=()=>{};return b.append("g").attr("transform",`translate(0,${a-s})`).call(U3(y).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",rt(d,"normal")).call(v).call(L=>L.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const t2=Math.PI/180;function Va(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=nl(n),e.markerMid=nl(r),e.markerEnd=nl(i)}function nl(e){if(e==null||e===!1)return null;if(e===!0)return Ld;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Fd("auto");case"arrow-reverse":return Fd("auto-start-reverse");case"dot":return UM;case"circle":case"circle-fill":return Ld;case"circle-stroke":return HM;case"tick":return rl("auto");case"tick-x":return rl(90);case"tick-y":return rl(0)}throw new Error(`invalid marker: ${e}`)}function Fd(e){return(t,n)=>We("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function UM(e,t){return We("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Ld(e,t){return We("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function HM(e,t){return We("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function rl(e){return(t,n)=>We("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let WM=0;function ds(e,t,{stroke:n},r){return n2(e,t,n&&(i=>n[i]),r)}function VM(e,t,{stroke:n},r){return n2(e,t,n&&(([i])=>n[i]),r)}function n2(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const u=new Map;function s(l){return function(c){const f=a(c);let h=u.get(l);h||u.set(l,h=new Map);let d=h.get(f);if(!d){const m=this.parentNode.insertBefore(l(f,o),this),p=`plot-marker-${++WM}`;m.setAttribute("id",p),h.set(f,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",s(t)),n&&e.attr("marker-mid",s(n)),r&&e.attr("marker-end",s(r))}function Mf({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=i2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function r2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=i2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function i2(e,t,n){return e===void 0&&t===void 0&&n===void 0?wt?[1,0]:[.5,.5]:[t,n]}function a2(e,{interval:t}){return e={...Oa(e)},e.interval=of(e.interval===void 0?t:e.interval),e}function o2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:u,interval:s}=a2(i,n);if(u==null||s==null&&!r)return n;const l=Dr(i);if(s==null){let d;const m={transform:p=>d||(d=et(p,u)),label:l};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let c,f;function h(d){return f!==void 0&&d===c?f:f=Ve(et(c=d,u),m=>s.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:h,label:l}:a,[`${e}2`]:o===void 0?{transform:d=>h(d).map(m=>s.offset(m)),label:l}:o})}function u2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=a2(r,n);return i==null||a==null?n:t({...n,[e]:{label:Dr(r),transform:o=>{const u=Ve(et(o,i),l=>a.floor(l)),s=u.map(l=>a.offset(l));return u.map(Mt(u)?(l,c)=>l==null||isNaN(l=+l)||(c=s[c],c==null)||isNaN(c=+c)?void 0:new Date((l+c)/2):(l,c)=>l==null||(c=s[c],c==null)?NaN:(+l+ +c)/2)}}})}function YM(e={}){return o2("x",Mf,e)}function s2(e={}){return o2("y",r2,e)}function jM(e={}){return u2("x",Mf,e)}function XM(e={}){return u2("y",r2,e)}const l2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class ZM extends mt{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:u=o,insetBottom:s=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},hs(n,"x"),l2),this.insetTop=Fe(u),this.insetBottom=Fe(s),Va(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y1:l,y2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetTop:w,insetBottom:b}=this;return We("svg:g",a).call(zt,this,i,a).call(kt,this,{x:s&&o},wt,0).call(v=>v.selectAll().data(t).enter().append("line").call(Ut,this).attr("x1",s?y=>s[y]:(p+f-m)/2).attr("x2",s?y=>s[y]:(p+f-m)/2).attr("y1",l&&!fi(u)?y=>l[y]+w:d+w).attr("y2",c&&!fi(u)?u.bandwidth?y=>c[y]+u.bandwidth()-b:y=>c[y]-b:h-g-b).call(Un,this,r).call(ds,this,r,a)).node()}}class KM extends mt{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:u=o,insetLeft:s=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},hs(n,"y"),l2),this.insetRight=Fe(u),this.insetLeft=Fe(s),Va(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{y:s,x1:l,x2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetLeft:w,insetRight:b}=this;return We("svg:g",a).call(zt,this,i,a).call(kt,this,{y:s&&u},0,wt).call(v=>v.selectAll().data(t).enter().append("line").call(Ut,this).attr("x1",l&&!fi(o)?y=>l[y]+w:p+w).attr("x2",c&&!fi(o)?o.bandwidth?y=>c[y]+o.bandwidth()-b:y=>c[y]-b:f-m-b).attr("y1",s?y=>s[y]:(d+h-g)/2).attr("y2",s?y=>s[y]:(d+h-g)/2).call(Un,this,r).call(ds,this,r,a)).node()}}function xf(e,t){let{x:n=st,y:r,y1:i,y2:a,...o}=s2(t);return[i,a]=c2(r,i,a),new ZM(e,{...o,x:n,y1:i,y2:a})}function Pf(e,t){let{y:n=st,x:r,x1:i,x2:a,...o}=YM(t);return[i,a]=c2(r,i,a),new KM(e,{...o,y:n,x1:i,x2:a})}function c2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Sf(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const QM={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},f2="";class Af extends mt{constructor(t,n={}){const{x:r,y:i,text:a=ar(t)&&bg(t)?st:rs,frameAnchor:o,textAnchor:u=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:s=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:g,fontWeight:w,rotate:b}=n,[v,y]=ht(b,0),[_,M]=ix(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:_,optional:!0},rotate:{value:E9(v),optional:!0},text:{value:a,filter:Zc,optional:!0}},n,QM),this.rotate=y,this.textAnchor=rt(u,"middle"),this.lineAnchor=nn(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=h2(f),this.monospace=!!h,this.fontFamily=ft(d),this.fontSize=M,this.fontStyle=ft(p),this.fontVariant=ft(g),this.fontWeight=ft(w),this.frameAnchor=os(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=m2(this),this.clipLine=p2(this)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,rotate:c,text:f,title:h,fontSize:d}=r,{rotate:m}=this,[p,g]=Ua(this,i);return We("svg:g",a).call(zt,this,i,a).call(d2,this,f,i).call(kt,this,{x:s&&o,y:l&&u}).call(w=>w.selectAll().data(t).enter().append("text").call(Ut,this).call(JM,this,f,h).attr("transform",Sf`translate(${s?b=>s[b]:p},${l?b=>l[b]:g})${c?b=>` rotate(${c[b]})`:m?` rotate(${m})`:""}`).call(ce,"font-size",d&&(b=>d[b])).call(Un,this,r)).node()}}function h2(e){return e==null?null:nn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function JM(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:u,clipLine:s}=t;e.each(function(l){const c=u(Er(n[l])??"").map(s),f=c.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let m=0;m<f;++m){if(++d,!c[m])continue;const p=this.ownerDocument.createElementNS(Jr.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(h+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=c[m],this.appendChild(p),d=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=c[0];if(o&&!r&&c[0]!==n[l]){const d=this.ownerDocument.createElementNS(Jr.svg,"title");d.textContent=n[l],this.appendChild(d)}})}function Ef(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ia(t,n)),new Af(e,{...r,x:t,y:n})}function ex(e,{x:t=st,...n}={}){return new Af(e,XM({...n,x:t}))}function tx(e,{y:t=st,...n}={}){return new Af(e,jM({...n,y:t}))}function d2(e,t,n){ce(e,"text-anchor",t.textAnchor),ce(e,"font-family",t.fontFamily),ce(e,"font-size",t.fontSize),ce(e,"font-style",t.fontStyle),ce(e,"font-variant",t.fontVariant===void 0?nx(n):t.fontVariant),ce(e,"font-weight",t.fontWeight)}function nx(e){return e&&(k9(e)||Mt(e))?"tabular-nums":void 0}const rx=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function ix(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),rx.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function ax(e,t,n){const r=[];let i,a=0;for(const[o,u,s]of ox(e)){if(i===void 0&&(i=o),a>i&&n(e,i,u)>t&&(r.push(e.slice(i,a)+(e[a-1]===f2?"-":"")),i=o),s){r.push(e.slice(i,u)),i=void 0;continue}a=u}return r}function*ox(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case f2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Rd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Cf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=vi(e,i))r+=Rd[e[i]]??(g2(e,i)?120:Rd.e);return r}function Tf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=vi(e,i))r+=g2(e,i)?126:63;return r}function m2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?Tf:Cf,i=t*100;return a=>ax(a,i,r)}function p2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?Tf:Cf,i=t*100;switch(n){case"clip-start":return a=>Od(a,i,r,"");case"clip-end":return a=>Id(a,i,r,"");case"ellipsis-start":return a=>Od(a,i,r,Xr);case"ellipsis-middle":return a=>ux(a,i,r,Xr);case"ellipsis-end":return a=>Id(a,i,r,Xr)}}const Xr="";function hi(e,t,n,r){const i=[];let a=0;for(let o=0,u=0,s=e.length;o<s;o=u){u=vi(e,o);const l=n(e,o,u);if(a+l>t){for(a+=r;a>t&&o>0;)u=o,o=i.pop(),a-=n(e,o,u);return[o,t-a]}a+=l,i.push(o)}return[-1,0]}function Id(e,t,n,r){e=e.trim();const i=n(r),[a]=hi(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function ux(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,u]=hi(e,t/2,n,a),[s]=hi(e,i-t/2-u+a,n,-a);return s<0?r:e.slice(0,o).trimEnd()+r+e.slice(vi(e,s)).trimStart()}function Od(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=hi(e,i-t+a,n,-a);return o<0?r:r+e.slice(vi(e,o)).trimStart()}const oc=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,qd=new RegExp("\\p{Extended_Pictographic}","uy");function vi(e,t){return t+=sx(e,t)?2:1,cx(e,t)&&(t=oc.lastIndex),lx(e,t)?vi(e,t+1):t}function b2(e,t){return e.charCodeAt(t)<128}function sx(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function lx(e,t){return e.charCodeAt(t)===8205}function cx(e,t){return b2(e,t)?!1:(oc.lastIndex=t,oc.test(e))}function g2(e,t){return b2(e,t)?!1:(qd.lastIndex=t,qd.test(e))}const fx={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},y2=3.5,hx=y2*5,w2={draw(e,t,n){const r=t*n/hx;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},dx={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},mx=new Map([["arrow",w2],["spike",dx]]);function px(e){return e&&typeof e.draw=="function"}function bx(e){if(px(e))return e;const t=mx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class v2 extends mt{constructor(t,n={}){const{x:r,y:i,r:a=y2,length:o,rotate:u,shape:s=w2,anchor:l="middle",frameAnchor:c}=n,[f,h]=ht(o,12),[d,m]=ht(u,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,fx),this.r=+a,this.length=h,this.rotate=m,this.shape=bx(s),this.anchor=nn(l,"anchor",["start","middle","end"]),this.frameAnchor=os(c)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,length:c,rotate:f}=r,{length:h,rotate:d,anchor:m,shape:p,r:g}=this,[w,b]=Ua(this,i);return We("svg:g",a).call(zt,this,i,a).call(kt,this,{x:s&&o,y:l&&u}).call(v=>v.selectAll().data(t).enter().append("path").call(Ut,this).attr("transform",Sf`translate(${s?y=>s[y]:w},${l?y=>l[y]:b})${f?y=>` rotate(${f[y]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?c?y=>` translate(0,${c[y]})`:` translate(0,${h})`:c?y=>` translate(0,${c[y]/2})`:` translate(0,${h/2})`}`).attr("d",c?y=>{const _=Yn();return p.draw(_,c[y],g),_}:(()=>{const y=Yn();return p.draw(y,h,g),y})()).call(Un,this,r)).node()}}function gx(e,t={}){const{x:n=st,...r}=t;return new v2(e,{...r,x:n})}function yx(e,t={}){const{y:n=st,...r}=t;return new v2(e,{...r,y:n})}function ur(e,t){return arguments.length<2&&!ar(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function ms({anchor:e}={},t){return e===void 0?t[0]:nn(e,"anchor",t)}function _2(e){return ms(e,["left","right"])}function M2(e){return ms(e,["right","left"])}function x2(e){return ms(e,["bottom","top"])}function P2(e){return ms(e,["top","bottom"])}function S2(){const[e,t]=ur(...arguments);return E2("y",_2(t),e,t)}function wx(){const[e,t]=ur(...arguments);return E2("fy",M2(t),e,t)}function A2(){const[e,t]=ur(...arguments);return C2("x",x2(t),e,t)}function vx(){const[e,t]=ur(...arguments);return C2("fx",P2(t),e,t)}function E2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:g,x:w,margin:b,marginTop:v=b===void 0?20:b,marginRight:y=b===void 0?t==="right"?40:0:b,marginBottom:_=b===void 0?20:b,marginLeft:M=b===void 0?t==="left"?40:0:b,label:x,labelAnchor:E,labelArrow:S,labelOffset:k,...A}){return m=Fe(m),p=Fe(p),g=Fe(g),E!==void 0&&(E=nn(E,"labelAnchor",["center","top","bottom"])),S=L2(S),Xg(m&&!yt(a)?_x(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,x:w,...A}):null,yt(s)?null:xx(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,x:w,marginTop:v,marginRight:y,marginBottom:_,marginLeft:M,...A}),!yt(s)&&x!==null?Ef([],D2({fill:s,fillOpacity:l,...A},function(L,G,F,C,q){const ee=C[e],{marginTop:te,marginRight:Q,marginBottom:z,marginLeft:U}=e==="y"&&q.inset||q,$=E??(ee.bandwidth?"center":"top"),I=k??(t==="right"?Q:U)-3;return $==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=$,this.frameAnchor=`${$}-${t}`,this.rotate=0),this.dy=$==="top"?3-te:$==="bottom"?z-3:0,this.dx=t==="right"?I:-I,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[F2(e,ee,{anchor:t,label:x,labelAnchor:$,labelArrow:S})]}}}})):null)}function C2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:g,y:w,margin:b,marginTop:v=b===void 0?t==="top"?30:0:b,marginRight:y=b===void 0?20:b,marginBottom:_=b===void 0?t==="bottom"?30:0:b,marginLeft:M=b===void 0?20:b,label:x,labelAnchor:E,labelArrow:S,labelOffset:k,...A}){return m=Fe(m),p=Fe(p),g=Fe(g),E!==void 0&&(E=nn(E,"labelAnchor",["center","left","right"])),S=L2(S),Xg(m&&!yt(a)?Mx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,y:w,...A}):null,yt(s)?null:Px(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,y:w,marginTop:v,marginRight:y,marginBottom:_,marginLeft:M,...A}),!yt(s)&&x!==null?Ef([],D2({fill:s,fillOpacity:l,...A},function(L,G,F,C,q){const ee=C[e],{marginTop:te,marginRight:Q,marginBottom:z,marginLeft:U}=e==="x"&&q.inset||q,$=E??(ee.bandwidth?"center":"right"),I=k??(t==="top"?te:z)-3;return $==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${$}`,this.textAnchor=$==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-I:I,this.dx=$==="right"?Q-3:$==="left"?3-U:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[F2(e,ee,{anchor:t,label:x,labelAnchor:$,labelArrow:S})]}}}})):null)}function _x(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetLeft:c=l,insetRight:f=l,dx:h=0,y:d=e==="y"?void 0:null,...m}){return _i(yx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:u,y:d,...m,dx:t==="left"?+h-wt+ +c:+h+wt-f,anchor:"start",length:s,shape:t==="left"?Dx:Nx})}function Mx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetTop:c=l,insetBottom:f=l,dy:h=0,x:d=e==="x"?void 0:null,...m}){return _i(gx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:u,x:d,...m,dy:t==="bottom"?+h-wt-f:+h+wt+ +c,anchor:"start",length:s,shape:t==="bottom"?kx:$x})}function xx(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*t2):0),text:s,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:c=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:m=h,dx:p=0,y:g=e==="y"?void 0:null,...w}){return _i(tx,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,y:g,...w,dx:t==="left"?+p-a-u+ +d:+p+ +a+ +u-m},function(b,v,y,_,M){f===void 0&&(this.fontVariant=B2(b)),s===void 0&&(M.text=N2(b,v,y,_,t))})}function Px(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*t2):0),text:s,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:m=h,dy:p=0,x:g=e==="x"?void 0:null,...w}){return _i(ex,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,x:g,...w,dy:t==="bottom"?+p+ +a+ +u-m:+p-a-u+ +d},function(b,v,y,_,M){f===void 0&&(this.fontVariant=B2(b)),s===void 0&&(M.text=N2(b,v,y,_,t))})}function Sx(){const[e,t]=ur(...arguments);return T2("y",_2(t),e,t)}function Ax(){const[e,t]=ur(...arguments);return T2("fy",M2(t),e,t)}function Ex(){const[e,t]=ur(...arguments);return k2("x",x2(t),e,t)}function Cx(){const[e,t]=ur(...arguments);return k2("fx",P2(t),e,t)}function T2(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...u}){return _i(Pf,e,t,`${e}-grid`,n,{y:r,x1:a,x2:o,...$2(u)})}function k2(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...u}){return _i(xf,e,t,`${e}-grid`,n,{x:r,y1:a,y2:o,...$2(u)})}function $2({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function D2({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c=!1},f){return[,e]=On(e),[,t]=ht(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c,initializer:f}}function _i(e,t,n,r,i,a,o){let u;function s(f,h,d,m,p,g){const w=f==null&&(t==="fx"||t==="fy"),{[t]:b}=m;if(!b)throw new Error(`missing scale: ${t}`);const v=b.domain();let{interval:y,ticks:_,tickFormat:M,tickSpacing:x=t==="x"?80:35}=a;if(typeof _=="string"&&R2(b)&&(y=_,_=void 0),_===void 0&&(_=wi(y,b.type)??Tx(b,x)),f==null){if(ar(_))f=Tt(_);else if(Hr(_))f=il(_,...Bt(v));else if(b.interval){let S=b.interval;if(b.ticks){const[k,A]=Bt(v),L=(A-k)/S[La];S=sd(S,L/_)??S,f=il(S,k,A)}else{f=v;const k=f.length;S=sd(S,k/_)??S,S!==b.interval&&(f=il(S,...Bt(f)))}if(S===b.interval){const k=Math.round(f.length/_);k>1&&(f=f.filter((A,L)=>L%k===0))}}else b.ticks?f=b.ticks(_):f=v;if(!b.ticks&&f.length&&f!==v){const S=new ku(v);f=f.filter(k=>S.has(k)),f.length||Zn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[Gn(f)]:u[t]={scale:t,value:st}}o==null||o.call(this,b,f,_,M,u);const E=Object.fromEntries(Object.entries(u).map(([S,k])=>[S,{...k,value:et(f,k.value)}]));return w&&(h=g.filterFacets(f,E)),{data:f,facets:h,channels:E}}const l=ci(a).initializer,c=e(i,ci({...a,initializer:s},l));return i==null?(u=c.channels,c.channels={}):u={},c.ariaLabel=r,c.clip===void 0&&(c.clip=!1),c}function Tx(e,t){const[n,r]=Bt(e.range());return(r-n)/t}function N2(e,t,n,r,i){return{value:kf(e,t,n,r,i)}}function kf(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&Mt(t)?h9(e.type,t,i)??Er:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Er:typeof r=="string"?(Mt(e.domain())?Ba:gi)(r):Ra(r)}function il(e,t,n){return e.range(t,e.offset(e.floor(n)))}const kx={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},$x={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Dx={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},Nx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function B2(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function F2(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&R2(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!a)return r;if(a===!0){const o=gM(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function L2(e="auto"){return yt(e)?!1:typeof e=="boolean"?e:nn(e,"labelArrow",["auto","up","right","down","left"])}function R2(e){return Mt(e.domain())}function Gd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function Bx(e,{opacity:t,...n}={}){if(!Nr(e)&&!jg(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return I2(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",ht(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Fx(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:yt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...u}={},s){const[f,h]=On(t),[d,m]=On(r),p=Gd(s,f),g=Gd(s,d),w=o*o*Math.PI;return n=ht(n)[1],i=ht(i)[1],a=ht(a)[1],I2(e,u,(b,v,y,_)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",y).attr("height",_).attr("fill",f==="color"?M=>p.scale(M):h).attr("fill-opacity",n).attr("stroke",d==="color"?M=>g.scale(M):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",M=>{const x=Yn();return e.scale(M).draw(x,w),x}))}function I2(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=e2(e),swatchSize:o=15,swatchWidth:u=o,swatchHeight:s=o,marginLeft:l=0,className:c,style:f,width:h}=t;const d=pf(t);c=df(c),i=kf(e.scale,e.domain,void 0,i);const m=We("div",d).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,u,s).call(g=>g.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,u,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(g=>g.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",l?`${+l}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",rt(a,"normal")).call(mf,f).node()}const uc=new Map([["symbol",Fx],["color",q2],["opacity",Rx]]);function Lx(e,t,n={}){return(r,i)=>{if(!uc.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return uc.get(r)(e[r],O2(t,n[r],i),a=>e[a])}}function O2({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return B9(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function q2(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return Bx(e,n);case"ramp":return zM(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function Rx({type:e,interpolate:t,...n},{legend:r=!0,color:i=Qn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return q2({type:e,...n,interpolate:Ix(i)},{legend:r,...a})}function Ix(e){const{r:t,g:n,b:r}=Qn(e)||Qn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function Ox(e,t,n){const r=[];for(const[i,a]of uc){const o=n[i];if(o!=null&&o.legend&&i in e){const u=a(e[i],O2(t,e[i],o),s=>e[s]);u!=null&&r.push(u)}}return r}const qx={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Gx={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class zx extends mt{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:u=r,rx:s,ry:l}=t;super(Co,void 0,t,n==null?qx:Gx),this.anchor=hg(n,"anchor",["top","right","bottom","left"]),this.insetTop=Fe(i),this.insetRight=Fe(a),this.insetBottom=Fe(o),this.insetLeft=Fe(u),this.rx=Fe(s),this.ry=Fe(l)}render(t,n,r,i,a){const{marginTop:o,marginRight:u,marginBottom:s,marginLeft:l,width:c,height:f}=i,{anchor:h,insetTop:d,insetRight:m,insetBottom:p,insetLeft:g,rx:w,ry:b}=this,v=l+g,y=c-u-m,_=o+d,M=f-s-p;return We(h?"svg:line":"svg:rect",a).datum(0).call(zt,this,i,a).call(Ut,this).call(Un,this,r).call(kt,this,{}).call(h==="left"?x=>x.attr("x1",v).attr("x2",v).attr("y1",_).attr("y2",M):h==="right"?x=>x.attr("x1",y).attr("x2",y).attr("y1",_).attr("y2",M):h==="top"?x=>x.attr("x1",v).attr("x2",y).attr("y1",_).attr("y2",_):h==="bottom"?x=>x.attr("x1",v).attr("x2",y).attr("y1",M).attr("y2",M):x=>x.attr("x",v).attr("y",_).attr("width",y-v).attr("height",M-_).attr("rx",w).attr("ry",b)).node()}}function Ux(e){return new zx(e)}const al={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},Hx=new Set(["geometry","href","src","ariaLabel","scales"]);class Wx extends mt{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ar(t)&&bg(t)&&(n={...n,title:st});const{x:r,y:i,x1:a,x2:o,y1:u,y2:s,anchor:l,preferredAnchor:c="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:g,lineHeight:w=1,lineWidth:b=20,frameAnchor:v,format:y,textAnchor:_="start",textOverflow:M,textPadding:x=8,title:E,pointerSize:S=12,pathFilter:k="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:u!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:u,scale:"y",optional:s==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:s,scale:"y",optional:u==null},title:{value:E,optional:!0}},n,al),this.anchor=ec(l,"anchor"),this.preferredAnchor=ec(c,"preferredAnchor"),this.frameAnchor=os(v),this.textAnchor=rt(_,"middle"),this.textPadding=+x,this.pointerSize=+S,this.pathFilter=ft(k),this.lineHeight=+w,this.lineWidth=+b,this.textOverflow=h2(M),this.monospace=!!f,this.fontFamily=ft(h),this.fontSize=Fe(d),this.fontStyle=ft(m),this.fontVariant=ft(p),this.fontWeight=ft(g);for(const A in al)A in this.channels&&(this[A]=al[A]);this.splitLines=m2(this),this.clipLine=p2(this),this.format={...y}}render(t,n,r,i,a){const o=this,{x:u,y:s,fx:l,fy:c}=n,{ownerSVGElement:f,document:h}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:g}=this,{textPadding:w,pointerSize:b,pathFilter:v}=this,{marginTop:y,marginLeft:_}=i,{x1:M,y1:x,x2:E,y2:S,x:k=M??E,y:A=x??S}=r,L=l?l(t.fx)-_:0,G=c?c(t.fy)-y:0,[F,C]=Ua(this,i),q=Qg(r,F),ee=Jg(r,C),te=m?Tf:Cf,Q=te(Xr);let z,U;"title"in r?(z=r.channels,U=Zx):(z=Xx.call(this,r,n),U=Kx);const $=We("svg:g",a).call(zt,this,i,a).call(d2,this).call(kt,this,{x:k&&u,y:A&&s}).call(ue=>ue.selectAll().data(t).enter().append("g").attr("transform",ae=>`translate(${Math.round(q(ae))},${Math.round(ee(ae))})`).call(Ut,this).call(ae=>ae.append("path").attr("filter",v)).call(ae=>ae.append("text").each(function(V){const Y=Wi(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const B=U.call(o,V,t,z,n,r);if(typeof B=="string")for(const H of o.splitLines(B))I(Y,{value:o.clipLine(H)});else{const H=new Set;for(const j of B){const{label:D=""}=j;D&&H.has(D)||(H.add(D),I(Y,j))}}})));function I(ue,{label:ae,value:V,color:Y,opacity:B}){ae??(ae=""),V??(V="");const H=Y!=null||B!=null;let j,D=g*100;const[pe]=hi(ae,D,te,Q);if(pe>=0)ae=ae.slice(0,pe).trimEnd()+Xr,j=V.trim(),V="";else{(ae||!V&&!H)&&(V=" "+V);const[he]=hi(V,D-te(ae),te,Q);he>=0&&(j=V.trim(),V=V.slice(0,he).trimEnd()+Xr)}const ne=ue.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");ae&&ne.append("tspan").attr("font-weight","bold").text(ae),V&&ne.append(()=>h.createTextNode(V)),H&&ne.append("tspan").text(" ").attr("fill",Y).attr("fill-opacity",B).style("user-select","none"),j&&ne.append("title").text(j)}function J(){const{width:ue,height:ae}=i.facet??i;$.selectChildren().each(function(V){let{x:Y,width:B,height:H}=this.getBBox();B=Math.round(B),H=Math.round(H);let j=d;if(j===void 0){const ne=q(V)+L,he=ee(V)+G,xe=ne+B+b+w*2<ue,Ue=ne-B-b-w*2>0,nt=he+H+b+w*2<ae,Be=he-H-b-w*2>0;j=xe&&Ue?nt&&Be?o.preferredAnchor:Be?"bottom":"top":nt&&Be?xe?"left":"right":(xe||Ue)&&(nt||Be)?`${Be?"bottom":"top"}-${xe?"left":"right"}`:o.preferredAnchor}const D=this.firstChild,pe=this.lastChild;if(D.setAttribute("d",jx(j,b,w,B,H)),Y)for(const ne of pe.childNodes)ne.setAttribute("x",-Y);pe.setAttribute("y",`${+Vx(j,pe.childNodes.length,p).toFixed(6)}em`),pe.setAttribute("transform",`translate(${Yx(j,b,w,B,H)})`)}),$.attr("visibility",null)}return t.length&&($.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(J):typeof requestAnimationFrame<"u"&&requestAnimationFrame(J)),$.node()}}function G2(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ia(t,n)),new Wx(e,{...r,x:t,y:n})}function Vx(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Yx(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function jx(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function Xx({channels:e},t){var i,a;const n={};let r=this.format;r=zd(r,e,"x"),r=zd(r,e,"y"),this.format=r;for(const o in r){const u=r[o];if(!(u===null||u===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const s=gd(e,o);s&&(n[o]=s)}}for(const o in e){if(o in n||o in r||Hx.has(o))continue;const u=gd(e,o);u&&(n[o]=u)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const u=this.format[o];if(typeof u=="string"){const s=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(Mt(s)?Ba:gi)(u)}else if(u===void 0||u===!0){const s=t[o];this.format[o]=s!=null&&s.bandwidth?kf(s,s.domain()):Er}}return n}function zd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([u])=>u===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function Zx(e,t,{title:n}){return Er(n.value[e],e)}function*Kx(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:vu(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:Hd(r,n,"x"),value:Ud(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:Hd(r,n,"y"),value:Ud(this.format.y2,n.y1,o,e)};else{const u=o.value[e],s=o.scale;if(!er(u)&&s==null)continue;yield{label:vu(r,n,a),value:this.format[a](u,e),color:s==="color"?i[a][e]:null,opacity:s==="opacity"?i[a][e]:null}}}}function Ud(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Hd(e,t,n){const r=vu(e,t,`${n}1`,n),i=vu(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function vu(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function lt(e={}){var Q;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:u}=e,s=df(e.className),l=e.marks===void 0?[]:Vd(e.marks);l.push(...aP(l));const c=rP(t,e),f=new Map;for(const z of l){const U=Yd(z,c,e);U&&f.set(z,U)}const h=new Map;c&&ki(h,[c],e),ki(h,f,e);const d=Vd(oP(l,h,e));for(const z of d){const U=Yd(z,c,e);U&&f.set(z,U)}l.unshift(...d);let m=EM(h,e);if(m!==void 0){const z=c?tl(m,c):void 0;for(const $ of l){if($.facet===null||$.facet==="super")continue;const I=f.get($);I!==void 0&&(I.facetsIndex=$.fx!=null||$.fy!=null?tl(m,I):z)}const U=new Set;for(const{facetsIndex:$}of f.values())$==null||$.forEach((I,J)=>{(I==null?void 0:I.length)>0&&U.add(J)});m.forEach(0<U.size&&U.size<m.length?($,I)=>$.empty=!U.has(I):$=>$.empty=!1);for(const $ of l)if($.facet==="exclude"){const I=f.get($);I!==void 0&&(I.facetsIndex=kM(I.facetsIndex))}}for(const z of Oe.keys())Ql(e[z])&&z!=="fx"&&z!=="fy"&&h.set(z,[]);const p=new Map;for(const z of l){if(p.has(z))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:U,channels:$}=f.get(z)??{},{data:I,facets:J,channels:ue}=z.initialize(U,$,e);$f(ue,e),p.set(z,{data:I,facets:J,channels:ue})}const g=ic(ki(h,p,e),e),w=SM(g,l,e);pM(g,w);const b=Ad(g),{fx:v,fy:y}=b,_=v||y?Wg(g,w):w,M=v||y?dP(b,w):w,x=pf(e),E=x.document,S=Fu("svg").call(E.documentElement);let k=S;x.ownerSVGElement=S,x.className=s,x.projection=E8(e,_),x.filterFacets=(z,U)=>tl(m,{channels:U,groups:vf(z,U)}),x.getMarkState=z=>{const U=p.get(z),$=f.get(z);return{...U,channels:{...U.channels,...$==null?void 0:$.channels}}},x.dispatchValue=z=>{k.value!==z&&(k.value=z,k.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[z,U]of p)if(z.initializer!=null){const $=z.facet==="super"?M:_,I=z.initializer(U.data,U.facets,U.channels,b,$,x);if(I.data!==void 0&&(U.data=I.data),I.facets!==void 0&&(U.facets=I.facets),I.channels!==void 0){const{fx:J,fy:ue,...ae}=I.channels;nP(ae),Object.assign(U.channels,ae);for(const V of Object.values(ae)){const{scale:Y}=V;Y!=null&&!L9(Oe.get(Y))&&(z2(V,e),A.add(Y))}(J!=null||ue!=null)&&f.set(z,!0)}}if(A.size){const z=new Map;ki(z,p,e,J=>A.has(J)),ki(h,p,e,J=>A.has(J));const U=hP(ic(z,e),g),{scales:$,...I}=Ad(U);Object.assign(g,U),Object.assign(b,I),Object.assign(b.scales,$)}let L,G;m!==void 0&&(L={x:v==null?void 0:v.domain(),y:y==null?void 0:y.domain()},m=CM(m,L),G=TM(v,y,w));for(const[z,U]of p)U.values=z.scale(U.channels,b,x);const{width:F,height:C}=w;Wi(S).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",F).attr("height",C).attr("viewBox",`0 0 ${F} ${C}`).attr("aria-label",o).attr("aria-description",u).call(z=>z.append("style").text(`:where(.${s}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${s} text),
:where(.${s} tspan) {
  white-space: pre;
}`)).call(mf,n);for(const z of l){const{channels:U,values:$,facets:I}=p.get(z);if(m===void 0||z.facet==="super"){let J=null;if(I&&(J=I[0],J=z.filter(J,U,$),J.length===0))continue;const ue=z.render(J,b,$,M,x);if(ue==null)continue;S.appendChild(ue)}else{let J;for(const ue of m){if(!(((Q=z.facetAnchor)==null?void 0:Q.call(z,m,L,ue))??!ue.empty))continue;let ae=null;if(I){const Y=f.has(z);if(ae=I[Y?ue.i:0],ae=z.filter(ae,U,$),ae.length===0)continue;!Y&&ae===I[0]&&(ae=x9(ae)),ae.fx=ue.x,ae.fy=ue.y,ae.fi=ue.i}const V=z.render(ae,b,$,_,x);if(V!=null){(J??(J=Wi(S).append("g"))).append(()=>V).datum(ue);for(const Y of["aria-label","aria-description","aria-hidden","transform"])V.hasAttribute(Y)&&(J.attr(Y,V.getAttribute(Y)),V.removeAttribute(Y))}}J==null||J.selectChildren().attr("transform",G)}}const q=Ox(g,x,e),{figure:ee=r!=null||i!=null||a!=null||q.length>0}=e;ee&&(k=E.createElement("figure"),k.className=`${s}-figure`,k.style.maxWidth="initial",r!=null&&k.append(Wd(E,r,"h2")),i!=null&&k.append(Wd(E,i,"h3")),k.append(...q,S),a!=null&&k.append(Qx(E,a))),k.scale=xM(b.scales),k.legend=Lx(g,x,e);const te=p8();return te>0&&Wi(S).append("text").attr("x",F).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${te.toLocaleString("en-US")} warning${te===1?"":"s"}. Please check the console.`),k}function Wd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Qx(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Jx({marks:e=[],...t}={}){return lt({...t,marks:[...e,this]})}mt.prototype.plot=Jx;function Vd(e){return e.flat(1/0).filter(t=>t!=null).map(eP)}function eP(e){return typeof e.render=="function"?e:new tP(e)}class tP extends mt{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function $f(e,t){for(const n in e)z2(e[n],t);return e}function z2(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:u=a?s=>s*100:pg(o,i)}=t[n]??{};u!=null&&(e.value=Ve(e.value,u),e.transform=!1)}function nP(e){for(const t in e)Pg(t,e[t])}function ki(e,t,n,r=g9){var i,a;for(const{channels:o}of t.values())for(const u in o){const s=o[u],{scale:l}=s;if(l!=null&&r(l))if(l==="projection"){if(!$8(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,f=((a=n.y)==null?void 0:a.domain)===void 0;if(c||f){const[h,d]=N8(s);c&&ol(e,"x",h),f&&ol(e,"y",d)}}}else ol(e,l,s)}return e}function ol(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function rP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=Tt(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=da(i,{value:n,scale:"fx"})),r!=null&&(a.fy=da(i,{value:r,scale:"fy"})),$f(a,t);const o=vf(i,a);return{channels:a,groups:o,data:e.data}}function Yd(e,t,n){var s;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=Tt(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const c={};return r!=null&&(c.fx=da(l,{value:r,scale:"fx"})),i!=null&&(c.fy=da(l,{value:i,scale:"fy"})),$f(c,n),{channels:c,groups:vf(l,c)}}if(t===void 0)return;const{channels:a,groups:o,data:u}=t;if(e.facet!=="auto"||e.data===u)return{channels:a,groups:o};u.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((s=Tt(e.data))==null?void 0:s.length)===u.length&&Zn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function iP(e,t={}){return ci({...t,x:null,y:null},(n,r,i,a,o,u)=>u.getMarkState(e))}function aP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?GM:/^y$/i.test(i)?Bd:Kg,r=i(iP(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===Bd?"left":"bottom");const o=G2(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function oP(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:u={},axis:s,grid:l,facet:c={},facet:{axis:f=s,grid:h}=c,x:{axis:d=s,grid:m=d===null?null:l}=i,y:{axis:p=s,grid:g=p===null?null:l}=a,fx:{axis:w=f,grid:b=w===null?null:h}=o,fy:{axis:v=f,grid:y=v===null?null:h}=u}=n;(r||!Ql(i)&&!jd("x",e))&&(d=m=null),(r||!Ql(a)&&!jd("y",e))&&(p=g=null),t.has("fx")||(w=b=null),t.has("fy")||(v=y=null),d===void 0&&(d=!go(e,"x")),p===void 0&&(p=!go(e,"y")),w===void 0&&(w=!go(e,"fx")),v===void 0&&(v=!go(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),w===!0&&(w=d==="top"||d===null?"bottom":"top"),v===!0&&(v=p==="right"||p===null?"left":"right");const _=[];return bo(_,y,Ax,u),po(_,v,wx,"right","left",c,u),bo(_,b,Cx,o),po(_,w,vx,"top","bottom",c,o),bo(_,g,Sx,a),po(_,p,S2,"left","right",n,a),bo(_,m,Ex,i),po(_,d,A2,"bottom","top",n,i),_}function po(e,t,n,r,i,a,o){if(!t)return;const u=uP(t);o=sP(u?r:t,a,o);const{line:s}=o;(n===S2||n===A2)&&s&&!ha(s)&&e.push(Ux(lP(o))),e.push(n(o)),u&&e.push(n({...o,anchor:i,label:null}))}function bo(e,t,n,r){!t||ha(t)||e.push(n(cP(t,r)))}function uP(e){return/^\s*both\s*$/i.test(e)}function sP(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:m,labelOffset:p}}function lP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function cP(e,{stroke:t=as(e)?e:void 0,ticks:n=fP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function fP(e){switch(typeof e){case"number":return!0;case"string":return!as(e)}return ar(e)||typeof(e==null?void 0:e.range)=="function"}function go(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function jd(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function hP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function dP({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=wf(n),l=e&&Xd(e),c=t&&Xd(t);return{marginTop:t?c[0]:r,marginRight:e?u-l[1]:i,marginBottom:t?s-c[1]:a,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:u,height:s}}function Xd(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const mP=new Map([["basis",_7],["basis-closed",M7],["basis-open",x7],["bundle",P7],["bump-x",c7],["bump-y",f7],["cardinal",S7],["cardinal-closed",A7],["cardinal-open",E7],["catmull-rom",C7],["catmull-rom-closed",T7],["catmull-rom-open",k7],["linear",Fa],["linear-closed",$7],["monotone-x",D7],["monotone-y",N7],["natural",B7],["step",F7],["step-after",R7],["step-before",L7]]);function U2(e=Fa,t){if(typeof e=="function")return e;const n=mP.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function H2(e=di,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?di:U2(e,t)}function di(e){return Fa(e)}function pP(e={y:"count"},t={}){[e,t]=yP(e,t);const{x:n,y:r}=t;return gP(wP(n,t,st),null,null,r,e,Mf(t))}function bP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=hf}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function W2(e={}){return bP(pP,"y",hs(e,"x"))}function gP(e,t,n,r,{data:i=xg,filter:a=wu,sort:o,reverse:u,...s}={},l={}){e=Zd(e),t=Zd(t),s=_P(s,l),i=j2(i,st),o=o==null?void 0:V2("sort",o,l),a=a==null?void 0:Y2("filter",a,l),n!=null&&co(s,"x","x1","x2")&&(n=null),r!=null&&co(s,"y","y1","y2")&&(r=null);const[c,f]=En(e),[h,d]=En(e),[m,p]=En(t),[g,w]=En(t),[b,v]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[y,_]=En(b),{x:M,y:x,z:E,fill:S,stroke:k,x1:A,x2:L,y1:G,y2:F,domain:C,cumulative:q,thresholds:ee,interval:te,...Q}=l,[z,U]=En(E),[$]=On(S),[I]=On(k),[J,ue]=En($),[ae,V]=En(I);return{..."z"in l&&{z:z||E},..."fill"in l&&{fill:J||S},..."stroke"in l&&{stroke:ae||k},...ss(Q,(Y,B,H)=>{const j=mg(et(Y,b),H==null?void 0:H[v]),D=et(Y,E),pe=et(Y,$),ne=et(Y,I),he=Z9(s,{z:D,fill:pe,stroke:ne}),xe=[],Ue=[],nt=j&&_([]),Be=D&&U([]),Ht=pe&&ue([]),Ne=ne&&V([]),Br=e&&f([]),Wt=e&&d([]),re=t&&p([]),we=t&&w([]),Pe=PP(e,t,Y);let ke=0;for(const $e of s)$e.initialize(Y);o&&o.initialize(Y),a&&a.initialize(Y);for(const $e of B){const ve=[];for(const Xe of s)Xe.scope("facet",$e);o&&o.scope("facet",$e),a&&a.scope("facet",$e);for(const[Xe,R]of dd($e,he))for(const[oe,ye]of dd(R,j))for(const[xt,an]of Pe(ye))if(!(a&&!a.reduce(xt,an))){ve.push(ke++),Ue.push(i.reduceIndex(xt,Y,an)),j&&nt.push(oe),D&&Be.push(he===D?Xe:D[(xt.length>0?xt:ye)[0]]),pe&&Ht.push(he===pe?Xe:pe[(xt.length>0?xt:ye)[0]]),ne&&Ne.push(he===ne?Xe:ne[(xt.length>0?xt:ye)[0]]),Br&&(Br.push(an.x1),Wt.push(an.x2)),re&&(re.push(an.y1),we.push(an.y2));for(const Xa of s)Xa.reduce(xt,an);o&&o.reduce(xt)}xe.push(ve)}return K9(xe,o,u),{data:Ue,facets:xe}}),...!co(s,"x")&&(c?{x1:c,x2:h,x:Jl(c,h)}:{x:M,x1:A,x2:L}),...!co(s,"y")&&(m?{y1:m,y2:g,y:Jl(m,g)}:{y:x,y1:G,y2:F}),...y&&{[v]:y},...Object.fromEntries(s.map(({name:Y,output:B})=>[Y,B]))}}function yP({cumulative:e,domain:t,thresholds:n,interval:r,...i},a){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...a}]}function wP(e,{cumulative:t,domain:n,thresholds:r,interval:i},a){return e={...Oa(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=a),e.thresholds=vP(e.thresholds,e.interval),e}function Zd(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Bt,thresholds:i}=e,a=o=>{let u=et(o,t),s;if(Mt(u)||xP(i)){u=Ve(u,fg,Float64Array);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Hr(i)?i(u,c,f):i;typeof h=="number"&&(h=up(c,f,h)),Hr(h)&&(r===Bt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f))),s=h}else{u=cn(u);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Hr(i)?i(u,c,f):i;if(typeof h=="number")if(r===Bt){let d=zo(c,f,h);if(isFinite(d))if(d>0){let m=Math.round(c/d),p=Math.round(f/d);m*d<=c||--m,p*d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let w=0;w<g;++w)h[w]=(m+w)*d}else if(d<0){d=-d;let m=Math.round(c*d),p=Math.round(f*d);m/d<=c||--m,p/d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let w=0;w<g;++w)h[w]=(m+w)/d}else h=[c];else h=[c]}else h=ea(c,f,h);else Hr(h)&&(r===Bt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f)));s=h}const l=[];if(s.length===1)l.push([s[0],s[0]]);else for(let c=1;c<s.length;++c)l.push([s[c-1],s[c]]);return l.bin=(n<0?AP:n>0?SP:Df)(l,s,u),l};return a.label=Dr(t),a}function vP(e,t,n=Kd){if(e===void 0)return t===void 0?n:wi(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return $3;case"scott":return w1;case"sturges":return E3;case"auto":return Kd}return ef(e)}return e}function _P(e,t){return Y9(e,t,V2)}function V2(e,t,n){return _g(e,t,n,Y2)}function Y2(e,t,n){return Mg(e,t,n,j2)}function j2(e,t){return ff(e,t,MP)}function MP(e){switch(`${e}`.toLowerCase()){case"x":return EP;case"x1":return TP;case"x2":return kP;case"y":return CP;case"y1":return $P;case"y2":return DP}throw new Error(`invalid bin reduce: ${e}`)}function Kd(e,t,n){return Math.min(200,w1(e,t,n))}function xP(e){return A9(e)||ar(e)&&Mt(e)}function PP(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries()){const c=i.bin(o[u]);for(const[f,[h,d]]of i.entries())yield[c[f],{data:n,x1:s,y1:h,x2:l,y2:d}]}}:r?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries())yield[o[u],{data:n,x1:s,x2:l}]}:function*(a){const o=i.bin(a);for(const[u,[s,l]]of i.entries())yield[o[u],{data:n,y1:s,y2:l}]}}function Df(e,t,n){return t=cn(t),r=>{var a;const i=e.map(()=>[]);for(const o of r)(a=i[Cu(t,n[o])-1])==null||a.push(o);return i}}function SP(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=1,u=a.length;o<u;++o){const s=a[o-1],l=a[o];for(const c of s)l.push(c)}return a}}function AP(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=a.length-2;o>=0;--o){const u=a[o+1],s=a[o];for(const l of u)s.push(l)}return a}}function X2(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const EP={reduceIndex(e,t,{x1:n,x2:r}){return X2(n,r)}},CP={reduceIndex(e,t,{y1:n,y2:r}){return X2(n,r)}},TP={reduceIndex(e,t,{x1:n}){return n}},kP={reduceIndex(e,t,{x2:n}){return n}},$P={reduceIndex(e,t,{y1:n}){return n}},DP={reduceIndex(e,t,{y2:n}){return n}};function Z2(e={}){return dg(e)?e:{...e,y:st}}function NP(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const u of t)for(const s of u)r[s]&&++i,r[s]=1;if(i===0)return{data:e,facets:t};e=fa(e);const a=e[lg]=new Uint32Array(n+i);t=t.map(u=>fa(u,Uint32Array));let o=n;r.fill(0);for(const u of t)for(let s=0,l=u.length;s<l;++s){const c=u[s];r[c]?(u[s]=o,e[o]=e[c],a[o]=c,++o):a[c]=c,r[c]=1}return{data:e,facets:t}}function BP(e={},t={}){arguments.length===1&&([e,t]=FP(e));const{x1:n,x:r=n,y:i,...a}=t,[o,u,s,l]=RP(r,i,"x","y",e,a);return{...o,x1:n,x:u,y1:s,y2:l,y:Jl(s,l)}}function K2({y:e,y1:t,y2:n,...r}={}){return r=hs(r,"x"),t===void 0&&n===void 0?BP({y:e,...r}):([t,n]=M9(e,t,n),{...r,y1:t,y2:n})}function FP(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const LP={length:!0};function RP(e,t=b9,n,r,{offset:i,order:a,reverse:o},u){if(t===null)throw new Error(`stack requires ${r}`);const s=rf(u),[l,c]=En(e),[f,h]=yu(t),[d,m]=yu(t);return f.hint=d.hint=LP,i=IP(i),a=GP(a,i,r),[ss(u,(p,g,w)=>{({data:p,facets:g}=NP(p,g));const b=e==null?void 0:c(mg(et(p,e),w==null?void 0:w[n])),v=et(p,t,Float64Array),y=et(p,s),_=a&&a(p,b,v,y),M=p.length,x=h(new Float64Array(M)),E=m(new Float64Array(M)),S=[];for(const k of g){const A=b?Array.from($u(k,L=>b[L]).values()):[k];if(_)for(const L of A)L.sort(_);for(const L of A){let G=0,F=0;o&&L.reverse();for(const C of L){const q=v[C];q<0?G=E[C]=(x[C]=G)+q:q>0?F=E[C]=(x[C]=F)+q:E[C]=x[C]=F}}S.push(A)}return i&&i(S,x,E,y),{data:p,facets:g}}),l,f,d]}function IP(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return OP;case"center":case"silhouette":return qP;case"wiggle":return J2}throw new Error(`unknown offset: ${e}`)}}function Q2(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function OP(e,t,n){for(const r of e)for(const i of r){const[a,o]=Q2(i,n);for(const u of i){const s=1/(o-a||1);t[u]=s*(t[u]-a),n[u]=s*(n[u]-a)}}}function qP(e,t,n){for(const r of e){for(const i of r){const[a,o]=Q2(i,n);for(const u of i){const s=(o+a)/2;t[u]-=s,n[u]-=s}}ey(r,t,n)}ty(e,t,n)}function J2(e,t,n,r){for(const i of e){const a=new wr;let o=0;for(const u of i){let s=-1;const l=u.map(d=>Math.abs(n[d]-t[d])),c=u.map(d=>{s=r?r[d]:++s;const m=n[d]-t[d],p=a.has(s)?m-a.get(s):0;return a.set(s,m),p}),f=[0,..._3(c)];for(const d of u)t[d]+=o,n[d]+=o;const h=Kn(l);h&&(o-=Kn(l,(d,m)=>(c[m]/2+f[m])*d)/h)}ey(i,t,n)}ty(e,t,n)}function ey(e,t,n){const r=Fn(e,i=>Fn(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function ty(e,t,n){const r=e.length;if(r===1)return;const i=e.map(u=>u.flat()),a=i.map(u=>(Fn(u,s=>t[s])+Ot(u,s=>n[s]))/2),o=Fn(a);for(let u=0;u<r;u++){const s=o-a[u];for(const l of i[u])t[l]+=s,n[l]+=s}}function GP(e,t,n){if(e===void 0&&t===J2)return Qd(en);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?gu:en;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return zP(i);case"z":return UP(i);case"sum":return HP(i);case"appearance":return WP(i);case"inside-out":return Qd(i)}return Jd(cg(e))}if(typeof e=="function")return(e.length===1?Jd:VP)(e);if(Array.isArray(e))return YP(e);throw new Error(`invalid order: ${e}`)}}function zP(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function UP(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function HP(e){return ps(e,(t,n,r,i)=>Mc(Gn(t),a=>Kn(a,o=>r[o]),a=>i[a]))}function WP(e){return ps(e,(t,n,r,i)=>Mc(Gn(t),a=>n[y1(a,o=>r[o])],a=>i[a]))}function Qd(e){return ps(e,(t,n,r,i)=>{const a=Gn(t),o=Mc(a,f=>n[y1(f,h=>r[h])],f=>i[f]),u=Vr(a,f=>Kn(f,h=>r[h]),f=>i[f]),s=[],l=[];let c=0;for(const f of o)c<0?(c+=u.get(f),s.push(f)):(c-=u.get(f),l.push(f));return l.reverse().concat(s)})}function Jd(e){return t=>{const n=et(t,e);return(r,i)=>en(n[r],n[i])}}function VP(e){return t=>(n,r)=>e(t[n],t[r])}function YP(e){return ps(en,()=>e)}function ps(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new wr(t(n,r,i,a).map((u,s)=>[u,s]));return(u,s)=>e(o.get(a[u]),o.get(a[s]))}}const jP={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class XP extends mt{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,z:u,curve:s,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:rf(n),optional:!0}},n,jP),this.z=u,this.curve=U2(s,l)}filter(t){return t}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r;return We("svg:g",a).call(zt,this,i,a).call(kt,this,n,0,0).call(c=>c.selectAll().data(Cg(t,[o,u,s,l],this,r)).enter().append("path").call(Ut,this).call(Eg,this,r).attr("d",l7().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>u[f]).x1(f=>s[f]).y1(f=>l[f]))).node()}}function ZP(e,t){const{x:n=rs,...r}=W2(t);return new XP(e,K2(Z2({...r,x1:n,x2:void 0})))}const KP={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class QP extends mt{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:u,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,KP),this.curve=H2(u,s),Va(this,n)}project(t,n,r){this.curve!==di&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r,{curve:c}=this;return We("svg:g",a).call(zt,this,i,a).call(kt,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Ut,this).attr("d",c===di&&a.projection?JP(a.projection,o,u,s,l):h=>{const d=Yn(),m=c(d);return m.lineStart(),m.point(o[h],u[h]),m.point(s[h],l[h]),m.lineEnd(),d}).call(Un,this,r).call(ds,this,r,a)).node()}}function JP(e,t,n,r,i){const a=Gu(e);return t=cn(t),n=cn(n),r=cn(r),i=cn(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function Nf(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...u}={}){return[n,r]=e0(t,n,r),[a,o]=e0(i,a,o),new QP(e,{...u,x1:n,x2:r,y1:a,y2:o})}function e0(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class ny extends mt{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:u=a,insetBottom:s=a,insetLeft:l=a,rx:c,ry:f}=r;this.insetTop=Fe(o),this.insetRight=Fe(u),this.insetBottom=Fe(s),this.insetLeft=Fe(l),this.rx=rt(c,"auto"),this.ry=rt(f,"auto")}render(t,n,r,i,a){const{rx:o,ry:u}=this;return We("svg:g",a).call(zt,this,i,a).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("rect").call(Ut,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(ce,"rx",o).call(ce,"ry",u).call(Un,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}}const eS={ariaLabel:"bar"};class tS extends ny{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,eS)}_transform(t,n,{y:r}){t.call(kt,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return fi(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:u,insetBottom:s}=this;return fi(t)?o-i-a-u-s:l=>Math.max(0,Math.abs(r[l]-n[l])-u-s)}}function ry(e,t={}){return _9(t)||(t={...t,x:rs,y2:st}),new tS(e,K2(s2(Z2(t))))}const nS={ariaLabel:"cell"};class rS extends ny{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,nS)}_transform(t,n){t.call(kt,n,{},0,0)}}function Bf(e,{x:t,y:n,...r}={}){return[t,n]=Ia(t,n),new rS(e,{...r,x:t,y:n})}const iS={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function aS(e){return e.sort===void 0&&e.reverse===void 0?H9({channel:"-r"},e):e}class oS extends mt{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:u=la,frameAnchor:s}=n,[l,c]=ht(o,0),[f,h]=z9(u),[d,m]=ht(a,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:ts,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},aS(n),iS),this.r=m,this.rotate=c,this.symbol=h,this.frameAnchor=os(s);const{channels:p}=this,{symbol:g}=p;if(g){const{fill:w,stroke:b}=p;g.hint={fill:w?w.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,r:c,rotate:f,symbol:h}=r,{r:d,rotate:m,symbol:p}=this,[g,w]=Ua(this,i),b=p===la,v=c?void 0:d*d*Math.PI;return Kc(d)&&(t=[]),We("svg:g",a).call(zt,this,i,a).call(kt,this,{x:s&&o,y:l&&u}).call(y=>y.selectAll().data(t).enter().append(b?"circle":"path").call(Ut,this).call(b?_=>{_.attr("cx",s?M=>s[M]:g).attr("cy",l?M=>l[M]:w).attr("r",c?M=>c[M]:d)}:_=>{_.attr("transform",Sf`translate(${s?M=>s[M]:g},${l?M=>l[M]:w})${f?M=>` rotate(${f[M]})`:m?` rotate(${m})`:""}`).attr("d",c&&h?M=>{const x=Yn();return h[M].draw(x,c[M]*c[M]*Math.PI),x}:c?M=>{const x=Yn();return p.draw(x,c[M]*c[M]*Math.PI),x}:h?M=>{const x=Yn();return h[M].draw(x,v),x}:(()=>{const M=Yn();return p.draw(M,v),M})())}).call(Un,this,r)).node()}}function Ff(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ia(t,n)),new oS(e,{...r,x:t,y:n})}const uS={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class iy extends mt{constructor(t,n={}){const{x:r,y:i,z:a,curve:o,tension:u}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:rf(n),optional:!0}},n,uS),this.z=a,this.curve=H2(o,u),Va(this,n)}filter(t){return t}project(t,n,r){this.curve!==di&&super.project(t,n,r)}render(t,n,r,i,a){const{x:o,y:u}=r,{curve:s}=this;return We("svg:g",a).call(zt,this,i,a).call(kt,this,n).call(l=>l.selectAll().data(Cg(t,[o,u],this,r)).enter().append("path").call(Ut,this).call(Eg,this,r).call(VM,this,r,a).attr("d",s===di&&a.projection?sS(a.projection,o,u):Tb().curve(s).defined(c=>c>=0).x(c=>o[c]).y(c=>u[c]))).node()}}function sS(e,t,n){const r=Gu(e);return t=cn(t),n=cn(n),i=>{let a=[];const o=[a];for(const u of i)u===-1?(a=[],o.push(a)):a.push([t[u],n[u]]);return r({type:"MultiLineString",coordinates:o})}}function lS(e,{x:t,y:n,...r}={}){return[t,n]=Ia(t,n),new iy(e,{...r,x:t,y:n})}function ay(e,{x:t=rs,y:n=st,...r}={}){return new iy(e,W2({...r,x:t,y:n}))}const cS={ariaLabel:"tick",fill:null,stroke:"currentColor"};class fS extends mt{constructor(t,n,r){super(t,n,r,cS),Va(this,r)}render(t,n,r,i,a){return We("svg:g",a).call(zt,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Ut,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Un,this,r).call(ds,this,r,a)).node()}}class hS extends fS{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Fe(o),this.insetBottom=Fe(u)}_transform(t,n,{x:r}){t.call(kt,n,{x:r},wt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function bs(e,{x:t=st,...n}={}){return new hS(e,{...n,x:t})}function dS(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ae(t,"width",e[0]+"px"),Ae(t,"margin","auto")},m(a,o){K(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ae(t,"width",a[0]+"px")},i:se,o:se,d(a){a&&Z(t),e[4](null)}}}function mS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dt(()=>{const s=lt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[bs(r,{x:l=>l})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){He[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class pS extends ze{constructor(t){super(),Ge(this,t,mS,dS,qe,{pattern:3,width:0,height:1})}}function bS(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ae(t,"width",e[0]+"px"),Ae(t,"margin","auto")},m(a,o){K(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ae(t,"width",a[0]+"px")},i:se,o:se,d(a){a&&Z(t),e[4](null)}}}function gS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dt(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=lt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},marks:[ry(s,{x:(c,f)=>f+1,y:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){He[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class yS extends ze{constructor(t){super(),Ge(this,t,gS,bS,qe,{pattern:3,width:0,height:1})}}function wS(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ae(t,"width",e[0]+"px"),Ae(t,"margin","auto")},m(a,o){K(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ae(t,"width",a[0]+"px")},i:se,o:se,d(a){a&&Z(t),e[4](null)}}}function vS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dt(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=lt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[Bf(s,{x:(c,f)=>f+1,fill:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){He[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class _S extends ze{constructor(t){super(),Ge(this,t,vS,wS,qe,{pattern:3,width:0,height:1})}}function MS(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ae(t,"width",e[0]+"px"),Ae(t,"margin","auto")},m(a,o){K(a,t,o),P(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ae(t,"width",a[0]+"px")},i:se,o:se,d(a){a&&Z(t),e[5](null)}}}function xS(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;dt(()=>{if(n(2,u.textContent="",u),!r)return;const l=lt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[ay(r,{x:(c,f)=>f/i,y:c=>c})]});u.appendChild(l)});function s(l){He[l?"unshift":"push"](()=>{u=l,n(2,u)})}return e.$$set=l=>{"audioData"in l&&n(3,r=l.audioData),"sampleRate"in l&&n(4,i=l.sampleRate),"width"in l&&n(0,a=l.width),"height"in l&&n(1,o=l.height)},[a,o,u,r,i,s]}class To extends ze{constructor(t){super(),Ge(this,t,xS,MS,qe,{audioData:3,sampleRate:4,width:0,height:1})}}function PS(e){let t,n,r,i,a,o;return{c(){t=T("main"),n=T("audio"),r=O(),i=T("button"),i.textContent="play audio (p)",n.controls=!1},m(u,s){K(u,t,s),P(t,n),e[5](n),P(t,r),P(t,i),a||(o=Qe(i,"click",e[1]),a=!0)},p:se,i:se,o:se,d(u){u&&Z(t),e[5](null),a=!1,o()}}}function SS(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:a=-1}=t,o;const u=f=>{f&&o&&Xc(f,i,o)},s=()=>{o&&(n(0,o.currentTime=0,o),o.play())},l=f=>{f.key==="p"&&s()};va(()=>{document.querySelector("html").addEventListener("keyup",l),u(r)}),o3(()=>{document.querySelector("html").removeEventListener("keyup",l)});function c(f){He[f?"unshift":"push"](()=>{o=f,n(0,o)})}return e.$$set=f=>{"audioData"in f&&n(2,r=f.audioData),"sampleRate"in f&&n(3,i=f.sampleRate),"currentTrialNumber"in f&&n(4,a=f.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&window.setTimeout(s,250),e.$$.dirty&4&&u(r)},[o,s,r,i,a,c]}class oy extends ze{constructor(t){super(),Ge(this,t,SS,PS,qe,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const uy=new Map,sy=new Map,AS=new Map,ES=new Map;function CS(e){return uy.get(e)}function ly(e){return sy.get(e)}const TS=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],kS=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],$S=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of TS)uy.set(e.pitch,e),sy.set(e.label,e);for(const e of kS)AS.set(e.number,e);for(const e of $S){const t=`${e.number}-${e.subnumber}`;ES.set(t,e)}var DS={value:()=>{}};function cy(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ko(n)}function ko(e){this._=e}function NS(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ko.prototype=cy.prototype={constructor:ko,on:function(e,t){var n=this._,r=NS(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=BS(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=t0(n[i],e.name,t);else if(t==null)for(i in n)n[i]=t0(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ko(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function BS(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function t0(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=DS,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var sc="http://www.w3.org/1999/xhtml";const n0={svg:"http://www.w3.org/2000/svg",xhtml:sc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),n0.hasOwnProperty(t)?{space:n0[t],local:e}:e}function FS(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===sc&&t.documentElement.namespaceURI===sc?t.createElement(e):t.createElementNS(n,e)}}function LS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fy(e){var t=gs(e);return(t.local?LS:FS)(t)}function RS(){}function Lf(e){return e==null?RS:function(){return this.querySelector(e)}}function IS(e){typeof e!="function"&&(e=Lf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Gt(r,this._parents)}function hy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OS(){return[]}function dy(e){return e==null?OS:function(){return this.querySelectorAll(e)}}function qS(e){return function(){var t=e.apply(this,arguments);return t==null?[]:hy(t)}}function GS(e){typeof e=="function"?e=qS(e):e=dy(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Gt(r,i)}function my(e){return function(){return this.matches(e)}}function py(e){return function(t){return t.matches(e)}}var zS=Array.prototype.find;function US(e){return function(){return zS.call(this.children,e)}}function HS(){return this.firstElementChild}function WS(e){return this.select(e==null?HS:US(typeof e=="function"?e:py(e)))}var VS=Array.prototype.filter;function YS(){return this.children}function jS(e){return function(){return VS.call(this.children,e)}}function XS(e){return this.selectAll(e==null?YS:jS(typeof e=="function"?e:py(e)))}function ZS(e){typeof e!="function"&&(e=my(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Gt(r,this._parents)}function by(e){return new Array(e.length)}function KS(){return new Gt(this._enter||this._groups.map(by),this._parents)}function _u(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_u.prototype={constructor:_u,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function QS(e){return function(){return e}}function JS(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new _u(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function eA(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new _u(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function tA(e){return e.__data__}function nA(e,t){if(!arguments.length)return Array.from(this,tA);var n=t?eA:JS,r=this._parents,i=this._groups;typeof e!="function"&&(e=QS(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=hy(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),w=s[l]=new Array(h);n(c,f,p,g,w,d,t);for(var b=0,v=0,y,_;b<m;++b)if(y=p[b]){for(b>=v&&(v=b+1);!(_=g[v])&&++v<m;);y._next=_||null}}return o=new Gt(o,r),o._enter=u,o._exit=s,o}function rA(){return new Gt(this._exit||this._groups.map(by),this._parents)}function iA(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function aA(e){if(!(e instanceof Gt))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Gt(o,this._parents)}function oA(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function uA(e){e||(e=sA);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Gt(i,this._parents).order()}function sA(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lA(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function cA(){return Array.from(this)}function fA(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function hA(){let e=0;for(const t of this)++e;return e}function dA(){return!this.node()}function mA(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function pA(e){return function(){this.removeAttribute(e)}}function bA(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gA(e,t){return function(){this.setAttribute(e,t)}}function yA(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _A(e,t){var n=gs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?bA:pA:typeof t=="function"?n.local?vA:wA:n.local?yA:gA)(n,t))}function gy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function MA(e){return function(){this.style.removeProperty(e)}}function xA(e,t,n){return function(){this.style.setProperty(e,t,n)}}function PA(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function SA(e,t,n){return arguments.length>1?this.each((t==null?MA:typeof t=="function"?PA:xA)(e,t,n??"")):mi(this.node(),e)}function mi(e,t){return e.style.getPropertyValue(t)||gy(e).getComputedStyle(e,null).getPropertyValue(t)}function AA(e){return function(){delete this[e]}}function EA(e,t){return function(){this[e]=t}}function CA(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function TA(e,t){return arguments.length>1?this.each((t==null?AA:typeof t=="function"?CA:EA)(e,t)):this.node()[e]}function yy(e){return e.trim().split(/^|\s+/)}function Rf(e){return e.classList||new wy(e)}function wy(e){this._node=e,this._names=yy(e.getAttribute("class")||"")}wy.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vy(e,t){for(var n=Rf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function _y(e,t){for(var n=Rf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function kA(e){return function(){vy(this,e)}}function $A(e){return function(){_y(this,e)}}function DA(e,t){return function(){(t.apply(this,arguments)?vy:_y)(this,e)}}function NA(e,t){var n=yy(e+"");if(arguments.length<2){for(var r=Rf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?DA:t?kA:$A)(n,t))}function BA(){this.textContent=""}function FA(e){return function(){this.textContent=e}}function LA(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function RA(e){return arguments.length?this.each(e==null?BA:(typeof e=="function"?LA:FA)(e)):this.node().textContent}function IA(){this.innerHTML=""}function OA(e){return function(){this.innerHTML=e}}function qA(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function GA(e){return arguments.length?this.each(e==null?IA:(typeof e=="function"?qA:OA)(e)):this.node().innerHTML}function zA(){this.nextSibling&&this.parentNode.appendChild(this)}function UA(){return this.each(zA)}function HA(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function WA(){return this.each(HA)}function VA(e){var t=typeof e=="function"?e:fy(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function YA(){return null}function jA(e,t){var n=typeof e=="function"?e:fy(e),r=t==null?YA:typeof t=="function"?t:Lf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function XA(){var e=this.parentNode;e&&e.removeChild(this)}function ZA(){return this.each(XA)}function KA(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function QA(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function JA(e){return this.select(e?QA:KA)}function eE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tE(e){return function(t){e.call(this,t,this.__data__)}}function nE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function rE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function iE(e,t,n){return function(){var r=this.__on,i,a=tE(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function aE(e,t,n){var r=nE(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?iE:rE,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function My(e,t,n){var r=gy(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function oE(e,t){return function(){return My(this,e,t)}}function uE(e,t){return function(){return My(this,e,t.apply(this,arguments))}}function sE(e,t){return this.each((typeof t=="function"?uE:oE)(e,t))}function*lE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var cE=[null];function Gt(e,t){this._groups=e,this._parents=t}function Ya(){return new Gt([[document.documentElement]],cE)}function fE(){return this}Gt.prototype=Ya.prototype={constructor:Gt,select:IS,selectAll:GS,selectChild:WS,selectChildren:XS,filter:ZS,data:nA,enter:KS,exit:rA,join:iA,merge:aA,selection:fE,order:oA,sort:uA,call:lA,nodes:cA,node:fA,size:hA,empty:dA,each:mA,attr:_A,style:SA,property:TA,classed:NA,text:RA,html:GA,raise:UA,lower:WA,append:VA,insert:jA,remove:ZA,clone:JA,datum:eE,on:aE,dispatch:sE,[Symbol.iterator]:lE};function If(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ja(){}var pa=.7,Mu=1/pa,Zr="\\s*([+-]?\\d+)\\s*",ba="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hE=/^#([0-9a-f]{3,8})$/,dE=new RegExp("^rgb\\("+[Zr,Zr,Zr]+"\\)$"),mE=new RegExp("^rgb\\("+[mn,mn,mn]+"\\)$"),pE=new RegExp("^rgba\\("+[Zr,Zr,Zr,ba]+"\\)$"),bE=new RegExp("^rgba\\("+[mn,mn,mn,ba]+"\\)$"),gE=new RegExp("^hsl\\("+[ba,mn,mn]+"\\)$"),yE=new RegExp("^hsla\\("+[ba,mn,mn,ba]+"\\)$"),r0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};If(ja,ga,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:i0,formatHex:i0,formatHsl:wE,formatRgb:a0,toString:a0});function i0(){return this.rgb().formatHex()}function wE(){return Py(this).formatHsl()}function a0(){return this.rgb().formatRgb()}function ga(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?o0(t):n===3?new St(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dE.exec(e))?new St(t[1],t[2],t[3],1):(t=mE.exec(e))?new St(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pE.exec(e))?yo(t[1],t[2],t[3],t[4]):(t=bE.exec(e))?yo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gE.exec(e))?l0(t[1],t[2]/100,t[3]/100,1):(t=yE.exec(e))?l0(t[1],t[2]/100,t[3]/100,t[4]):r0.hasOwnProperty(e)?o0(r0[e]):e==="transparent"?new St(NaN,NaN,NaN,0):null}function o0(e){return new St(e>>16&255,e>>8&255,e&255,1)}function yo(e,t,n,r){return r<=0&&(e=t=n=NaN),new St(e,t,n,r)}function vE(e){return e instanceof ja||(e=ga(e)),e?(e=e.rgb(),new St(e.r,e.g,e.b,e.opacity)):new St}function lc(e,t,n,r){return arguments.length===1?vE(e):new St(e,t,n,r??1)}function St(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}If(St,lc,xy(ja,{brighter:function(e){return e=e==null?Mu:Math.pow(Mu,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?pa:Math.pow(pa,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:u0,formatHex:u0,formatRgb:s0,toString:s0}));function u0(){return"#"+ul(this.r)+ul(this.g)+ul(this.b)}function s0(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ul(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function l0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ln(e,t,n,r)}function Py(e){if(e instanceof ln)return new ln(e.h,e.s,e.l,e.opacity);if(e instanceof ja||(e=ga(e)),!e)return new ln;if(e instanceof ln)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new ln(o,u,s,e.opacity)}function Sy(e,t,n,r){return arguments.length===1?Py(e):new ln(e,t,n,r??1)}function ln(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}If(ln,Sy,xy(ja,{brighter:function(e){return e=e==null?Mu:Math.pow(Mu,e),new ln(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?pa:Math.pow(pa,e),new ln(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new St(sl(e>=240?e-240:e+120,i,r),sl(e,i,r),sl(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function sl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ay=e=>()=>e;function _E(e,t){return function(n){return e+n*t}}function ME(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function xE(e){return(e=+e)==1?Ey:function(t,n){return n-t?ME(t,n,e):Ay(isNaN(t)?n:t)}}function Ey(e,t){var n=t-e;return n?_E(e,n):Ay(isNaN(e)?t:e)}const cc=function e(t){var n=xE(t);function r(i,a){var o=n((i=lc(i)).r,(a=lc(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=Ey(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Vn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var fc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ll=new RegExp(fc.source,"g");function PE(e){return function(){return e}}function SE(e){return function(t){return e(t)+""}}function AE(e,t){var n=fc.lastIndex=ll.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=fc.exec(e))&&(i=ll.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:Vn(r,i)})),n=ll.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?SE(s[0].x):PE(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}var c0=180/Math.PI,hc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cy(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*c0,skewX:Math.atan(s)*c0,scaleX:o,scaleY:u}}var wo;function EE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?hc:Cy(t.a,t.b,t.c,t.d,t.e,t.f)}function CE(e){return e==null||(wo||(wo=document.createElementNS("http://www.w3.org/2000/svg","g")),wo.setAttribute("transform",e),!(e=wo.transform.baseVal.consolidate()))?hc:(e=e.matrix,Cy(e.a,e.b,e.c,e.d,e.e,e.f))}function Ty(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Vn(l,f)},{i:p-2,x:Vn(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Vn(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Vn(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Vn(l,f)},{i:p-2,x:Vn(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var TE=Ty(EE,"px, ","px)","deg)"),kE=Ty(CE,", ",")",")"),pi=0,Gi=0,$i=0,ky=1e3,xu,zi,Pu=0,Cr=0,ys=0,ya=typeof performance=="object"&&performance.now?performance:Date,$y=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Of(){return Cr||($y($E),Cr=ya.now()+ys)}function $E(){Cr=0}function Su(){this._call=this._time=this._next=null}Su.prototype=Dy.prototype={constructor:Su,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Of():+n)+(t==null?0:+t),!this._next&&zi!==this&&(zi?zi._next=this:xu=this,zi=this),this._call=e,this._time=n,dc()},stop:function(){this._call&&(this._call=null,this._time=1/0,dc())}};function Dy(e,t,n){var r=new Su;return r.restart(e,t,n),r}function DE(){Of(),++pi;for(var e=xu,t;e;)(t=Cr-e._time)>=0&&e._call.call(null,t),e=e._next;--pi}function f0(){Cr=(Pu=ya.now())+ys,pi=Gi=0;try{DE()}finally{pi=0,BE(),Cr=0}}function NE(){var e=ya.now(),t=e-Pu;t>ky&&(ys-=t,Pu=e)}function BE(){for(var e,t=xu,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xu=n);zi=e,dc(r)}function dc(e){if(!pi){Gi&&(Gi=clearTimeout(Gi));var t=e-Cr;t>24?(e<1/0&&(Gi=setTimeout(f0,e-ya.now()-ys)),$i&&($i=clearInterval($i))):($i||(Pu=ya.now(),$i=setInterval(NE,ky)),pi=1,$y(f0))}}function h0(e,t,n){var r=new Su;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var FE=cy("start","end","cancel","interrupt"),LE=[],Ny=0,d0=1,mc=2,$o=3,m0=4,pc=5,Do=6;function ws(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;RE(e,n,{name:t,index:r,group:i,on:FE,tween:LE,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ny})}function qf(e,t){var n=rn(e,t);if(n.state>Ny)throw new Error("too late; already scheduled");return n}function vn(e,t){var n=rn(e,t);if(n.state>$o)throw new Error("too late; already running");return n}function rn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function RE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Dy(a,0,n.time);function a(l){n.state=d0,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==d0)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===$o)return h0(o);d.state===m0?(d.state=Do,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Do,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(h0(function(){n.state===$o&&(n.state=m0,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=mc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===mc){for(n.state=$o,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=pc,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===pc&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Do,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function IE(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>mc&&r.state<pc,r.state=Do,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function OE(e){return this.each(function(){IE(this,e)})}function qE(e,t){var n,r;return function(){var i=vn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function GE(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=vn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function zE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=rn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?qE:GE)(n,e,t))}function Gf(e,t,n){var r=e._id;return e.each(function(){var i=vn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return rn(i,r).value[t]}}function By(e,t){var n;return(typeof t=="number"?Vn:t instanceof ga?cc:(n=ga(t))?(t=n,cc):AE)(e,t)}function UE(e){return function(){this.removeAttribute(e)}}function HE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function WE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function VE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function YE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function jE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function XE(e,t){var n=gs(e),r=n==="transform"?kE:By;return this.attrTween(e,typeof t=="function"?(n.local?jE:YE)(n,r,Gf(this,"attr."+e,t)):t==null?(n.local?HE:UE)(n):(n.local?VE:WE)(n,r,t))}function ZE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function KE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function QE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&KE(e,a)),n}return i._value=t,i}function JE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ZE(e,a)),n}return i._value=t,i}function eC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=gs(e);return this.tween(n,(r.local?QE:JE)(r,t))}function tC(e,t){return function(){qf(this,e).delay=+t.apply(this,arguments)}}function nC(e,t){return t=+t,function(){qf(this,e).delay=t}}function rC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tC:nC)(t,e)):rn(this.node(),t).delay}function iC(e,t){return function(){vn(this,e).duration=+t.apply(this,arguments)}}function aC(e,t){return t=+t,function(){vn(this,e).duration=t}}function oC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iC:aC)(t,e)):rn(this.node(),t).duration}function uC(e,t){if(typeof t!="function")throw new Error;return function(){vn(this,e).ease=t}}function sC(e){var t=this._id;return arguments.length?this.each(uC(t,e)):rn(this.node(),t).ease}function lC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;vn(this,e).ease=n}}function cC(e){if(typeof e!="function")throw new Error;return this.each(lC(this._id,e))}function fC(e){typeof e!="function"&&(e=my(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new qn(r,this._parents,this._name,this._id)}function hC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new qn(o,this._parents,this._name,this._id)}function dC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function mC(e,t,n){var r,i,a=dC(t)?qf:vn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function pC(e,t){var n=this._id;return arguments.length<2?rn(this.node(),n).on.on(e):this.each(mC(n,e,t))}function bC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function gC(){return this.on("end.remove",bC(this._id))}function yC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lf(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,ws(l[h],t,n,h,l,rn(c,n)));return new qn(a,this._parents,t,n)}function wC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=dy(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=rn(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&ws(d,t,n,p,h,m);a.push(h),o.push(c)}return new qn(a,o,t,n)}var vC=Ya.prototype.constructor;function _C(){return new vC(this._groups,this._parents)}function MC(e,t){var n,r,i;return function(){var a=mi(this,e),o=(this.style.removeProperty(e),mi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Fy(e){return function(){this.style.removeProperty(e)}}function xC(e,t,n){var r,i=n+"",a;return function(){var o=mi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function PC(e,t,n){var r,i,a;return function(){var o=mi(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),mi(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function SC(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=vn(this,e),l=s.on,c=s.value[a]==null?u||(u=Fy(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function AC(e,t,n){var r=(e+="")=="transform"?TE:By;return t==null?this.styleTween(e,MC(e,r)).on("end.style."+e,Fy(e)):typeof t=="function"?this.styleTween(e,PC(e,r,Gf(this,"style."+e,t))).each(SC(this._id,e)):this.styleTween(e,xC(e,r,t),n).on("end.style."+e,null)}function EC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function CC(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&EC(e,o,n)),r}return a._value=t,a}function TC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,CC(e,t,n??""))}function kC(e){return function(){this.textContent=e}}function $C(e){return function(){var t=e(this);this.textContent=t??""}}function DC(e){return this.tween("text",typeof e=="function"?$C(Gf(this,"text",e)):kC(e==null?"":e+""))}function NC(e){return function(t){this.textContent=e.call(this,t)}}function BC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&NC(i)),t}return r._value=e,r}function FC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,BC(e))}function LC(){for(var e=this._name,t=this._id,n=Ly(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=rn(s,t);ws(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new qn(r,this._parents,e,n)}function RC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=vn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var IC=0;function qn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ly(){return++IC}var sr=Ya.prototype;qn.prototype={constructor:qn,select:yC,selectAll:wC,filter:fC,merge:hC,selection:_C,transition:LC,call:sr.call,nodes:sr.nodes,node:sr.node,size:sr.size,empty:sr.empty,each:sr.each,on:pC,attr:XE,attrTween:eC,style:AC,styleTween:TC,text:DC,textTween:FC,remove:gC,tween:zE,delay:rC,duration:oC,ease:sC,easeVarying:cC,end:RC,[Symbol.iterator]:sr[Symbol.iterator]};function OC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qC={time:null,delay:0,duration:250,ease:OC};function GC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function zC(e){var t,n;e instanceof qn?(t=e._id,e=e._name):(t=Ly(),(n=qC).time=Of(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&ws(s,e,t,l,o,n||GC(s,t));return new qn(r,this._parents,e,t)}Ya.prototype.interrupt=OE;Ya.prototype.transition=zC;function Ui(e,t,n){this.k=e,this.x=t,this.y=n}Ui.prototype={constructor:Ui,scale:function(e){return e===1?this:new Ui(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ui(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ui.prototype;var UC={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,u="",s,l,c=0;for(;c<r.length;)o=i.indexOf(r.charAt(c++))<<18|i.indexOf(r.charAt(c++))<<12|(s=i.indexOf(r.charAt(c++)))<<6|(l=i.indexOf(r.charAt(c++))),u+=s===64?String.fromCharCode(o>>16&255):l===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return u},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(u){i(n.Uint8(new Uint8Array(u.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let u=0;u<a;u++)o[u]=i.charCodeAt(u);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(s){return this.pointer+=s,this.pointer},readInt:function(s){if(s=Math.min(s,this.data.byteLength-this.pointer),s<1)return-1;let l=0;if(s>1)for(let c=1;c<=s-1;c++)l+=this.data.getUint8(this.pointer)*Math.pow(256,s-c),this.pointer++;return l+=this.data.getUint8(this.pointer),this.pointer++,l},readStr:function(s){let l="";for(let c=1;c<=s;c++)l+=String.fromCharCode(this.readInt(1));return l},readIntVLV:function(){let s=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)s=this.readInt(1);else{let l=[];for(;this.data.getUint8(this.pointer)>=128;)l.push(this.readInt(1)-128);let c=this.readInt(1);for(let f=1;f<=l.length;f++)s+=l[l.length-f]*Math.pow(128,f);s+=c}return s}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),u=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=u):a.timeDivision=o*256+u;for(let s=1;s<=a.tracks;s++){a.track[s-1]={event:[]};let l=i.readInt(4);if(l===-1)break;if(l!==1297379947)return!1;i.readInt(4);let c=0,f=!1,h,d;for(;!f&&(c++,a.track[s-1].event[c-1]={},a.track[s-1].event[c-1].deltaTime=i.readIntVLV(),h=i.readInt(1),h!==-1);)if(h>=128?d=h:(h=d,i.movePointer(-1)),h===255){a.track[s-1].event[c-1].type=255,a.track[s-1].event[c-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[s-1].event[c-1].metaType){case 47:case-1:f=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[s-1].event[c-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[s-1].event[c-1].data=i.readInt(m);break;case 84:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1),a.track[s-1].event[c-1].data[4]=i.readInt(1);break;case 88:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,m)),(this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)&&(i.readInt(m),a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(h=h.toString(16).split(""),h[1]||h.unshift("0"),a.track[s-1].event[c-1].type=parseInt(h[0],16),a.track[s-1].event[c-1].channel=parseInt(h[1],16),a.track[s-1].event[c-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].type,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1){let m=i.readIntVLV();a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[s-1].event[c-1].data=i.readInt(1);break;case-1:f=!0;break;default:if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(UC);function Ry(e){return 1/(e/60)}const Iy=[],HC=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of HC)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;Iy.push({type:e,dots:t,duration:n})}Iy.sort((e,t)=>e.duration-t.duration);class le{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>ly(r).pitch),this.stringCount=n.length}}new le("E stand.",["E2","A2","D3","G3","B3","E4"]),new le("Drop D",["D2","A2","D3","G3","B3","E4"]),new le("Drop C",["C2","G2","C3","F3","A3","D4"]),new le("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new le("1 down",["D2","G2","C3","F3","A3","D4"]),new le("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new le("2 down",["C2","F2","A#2","D#3","G3","C4"]),new le("DADGAG",["D2","A2","D3","G3","A3","D4"]),new le("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new le("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new le("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new le("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new le("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new le("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new le("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new le("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new le("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new le("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new le("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new le("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new le("E stand.",["E1","A1","D2","G2"]),new le("Drop D",["D1","A1","D2","G2"]),new le("1/2 down",["D#1","G#1","C#2","F#2"]),new le("1 down",["D1","G1","C2","F2"]),new le("1 1/2 down",["C#1","F#1","B1","E2"]),new le("2 down",["C1","F1","A#1","D#2"]),new le("B stand.",["B0","E1","A1","D2","G2"]),new le("Drop A",["A0","D1","A1","D2","G2"]),new le("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new le("1 down",["A0","D1","G1","C2","F2"]),new le("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new le("2 down",["G0","C1","F1","A#1","D#2"]),new le("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new le("Drop E",["E0","A0","D1","A1","D2","G2"]),new le("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new le("1 down",["E1","A0","D1","G1","C2","F2"]),new le("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new le("2 down",["D0","G0","C1","F1","A#1","D#2"]),new le("Hawaii",["G4","C4","E4","A4"]),new le("Low G",["G3","C4","E4","A4"]),new le("D-tuning",["A4","D4","F#4","B4"]),new le("Canadian",["A3","D4","F#4","B4"]),new le("Bariton",["D3","G3","B3","E4"]);function Oy(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function qy(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var Gy=[0,2,4,-1,1,3,5],zy=Gy.map(e=>Math.floor(e*7/12));function Uy(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=Gy[t]+7*n;if(r===void 0)return[i*a];const o=r-zy[t]-4*n;return[i*a,i*o]}var WC=[3,0,4,1,5,2,6];function VC(e){const[t,n,r]=e,i=WC[YC(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+zy[i];return{step:i,alt:a,oct:o,dir:r}}function YC(e){const t=(e+1)%7;return t<0?7+t:t}var p0=(e,t)=>Array(Math.abs(t)+1).join(e),bc=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),jC="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",XC="(AA|A|P|M|m|d|dd)([-+]?\\d+)",ZC=new RegExp("^"+jC+"|"+XC+"$");function KC(e){const t=ZC.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var b0={};function Au(e){return typeof e=="string"?b0[e]||(b0[e]=QC(e)):qy(e)?Au(eT(e)):Oy(e)?Au(e.name):bc}var g0=[0,2,4,5,7,9,11],Hy="PMMPPMM";function QC(e){const t=KC(e);if(t[0]==="")return bc;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=Hy[i];if(a==="M"&&r==="P")return bc;const o=a==="M"?"majorable":"perfectable",u=""+n+r,s=n<0?-1:1,l=n===8||n===-8?n:s*(i+1),c=JC(o,r),f=Math.floor((Math.abs(n)-1)/7),h=s*(g0[i]+c+12*f),d=(s*(g0[i]+c)%12+12)%12,m=Uy({step:i,alt:c,oct:f,dir:s});return{empty:!1,name:u,num:n,q:r,step:i,alt:c,dir:s,type:o,simple:l,semitones:h,chroma:d,coord:m,oct:f}}function JC(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function eT(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,u=i<0?"-":"",s=Hy[t]==="M"?"majorable":"perfectable";return u+o+tT(s,n)}function tT(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?p0("A",t):p0("d",e==="perfectable"?t:t+1)}var y0=(e,t)=>Array(Math.abs(t)+1).join(e),Wy=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),w0=new Map,nT=e=>"CDEFGAB".charAt(e),rT=e=>e<0?y0("b",-e):y0("#",e),iT=e=>e[0]==="b"?-e.length:e.length;function wa(e){const t=JSON.stringify(e),n=w0.get(t);if(n)return n;const r=typeof e=="string"?lT(e):qy(e)?wa(cT(e)):Oy(e)?wa(e.name):Wy;return w0.set(t,r),r}var aT=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function oT(e){const t=aT.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function uT(e){return wa(VC(e))}var sT=(e,t)=>(e%t+t)%t,cl=[0,2,4,5,7,9,11];function lT(e){const t=oT(e);if(t[0]===""||t[3]!=="")return Wy;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=iT(r),u=i.length?+i:void 0,s=Uy({step:a,alt:o,oct:u}),l=n+r+i,c=n+r,f=(cl[a]+o+120)%12,h=u===void 0?sT(cl[a]+o,12)-12*99:cl[a]+o+12*(u+1),d=h>=0&&h<=127?h:null,m=u===void 0?null:Math.pow(2,(h-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:f,coord:s,freq:m,height:h,letter:n,midi:d,name:l,oct:u,pc:c,step:a}}function cT(e){const{step:t,alt:n,oct:r}=e,i=nT(t);if(!i)return"";const a=i+rT(n);return r||r===0?a+r:a}function fT(e,t){const n=wa(e),r=Array.isArray(t)?t:Au(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return uT(a).name}function Vy(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var tr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Yy=e=>Number(e).toString(2).padStart(12,"0"),v0=e=>parseInt(e,2),hT=/^[01]{12}$/;function jy(e){return hT.test(e)}var dT=e=>typeof e=="number"&&e>=0&&e<=4095,mT=e=>e&&jy(e.chroma),_0={[tr.chroma]:tr};function zf(e){const t=jy(e)?e:dT(e)?Yy(e):Array.isArray(e)?wT(e):mT(e)?e.chroma:tr.chroma;return _0[t]=_0[t]||yT(t)}var pT=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function bT(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(pT[n]);return t}function gT(e){const t=e.split("");return t.map((n,r)=>Vy(r,t).join(""))}function yT(e){const t=v0(e),n=gT(e).map(v0).filter(a=>a>=2048).sort()[0],r=Yy(n),i=bT(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function wT(e){if(e.length===0)return tr.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=wa(e[r]),t.empty&&(t=Au(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var vT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],_T=vT;({...tr});var Xy=[],No={};function MT(e,t,n){const r=PT(e),i={...zf(e),name:n||"",quality:r,intervals:e,aliases:t};Xy.push(i),i.name&&(No[i.name]=i),No[i.setNum]=i,No[i.chroma]=i,i.aliases.forEach(a=>xT(i,a))}function xT(e,t){No[t]=e}function PT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}_T.forEach(([e,t,n])=>MT(e.split(" "),n.split(" "),t));Xy.sort((e,t)=>e.setNum-t.setNum);var ST=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],AT=ST;({...tr});var Zy=[],Bo={};function ET(e,t,n){const r=TT(e),i={...zf(e),name:n||"",quality:r,intervals:e,aliases:t};Zy.push(i),i.name&&(Bo[i.name]=i),Bo[i.setNum]=i,Bo[i.chroma]=i,i.aliases.forEach(a=>CT(i,a))}function CT(e,t){Bo[t]=e}function TT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}AT.forEach(([e,t,n])=>ET(e.split(" "),n.split(" "),t));Zy.sort((e,t)=>e.setNum-t.setNum);var kT=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],$T=kT,DT={...tr,intervals:[],aliases:[]},Zi={};function NT(e){return Zi[e]||DT}function BT(e,t,n=[]){const r={...zf(e),name:t,intervals:e,aliases:n};return Zi[r.name]=r,Zi[r.setNum]=r,Zi[r.chroma]=r,r.aliases.forEach(i=>FT(r,i)),r}function FT(e,t){Zi[t]=e}$T.forEach(([e,t,...n])=>BT(e.split(" "),t,n));var Uf=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],M0={...tr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},LT=Uf.map(RT),gc={};LT.forEach(e=>{gc[e.name]=e,e.aliases.forEach(t=>{gc[t]=e})});function Ky(e){return typeof e=="string"?gc[e.toLowerCase()]||M0:e&&e.name?Ky(e.name):M0}function RT(e){const[t,n,r,i,a,o,u]=e,s=u?[u]:[],l=Number(n).toString(2);return{empty:!1,intervals:NT(i).intervals,modeNum:t,chroma:l,normalized:l,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:s}}function Qy(e){return(t,n)=>{const r=Ky(t);if(r.empty)return[];const i=Vy(r.modeNum,e),a=r.intervals.map(o=>fT(n,o));return i.map((o,u)=>a[u]+o)}}Qy(Uf.map(e=>e[4]));Qy(Uf.map(e=>e[5]));class Hn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>ly(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;const s=CS(i).name;n.set(i,{number:a,letterString:`${s}${o}`})}return[...n.values()].map(r=>r.letterString)}}new Hn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Hn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Hn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Hn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Hn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Hn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Hn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Hn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function IT(e,t=1){const n=Sy(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>IT(e,.5));const OT=cc("black","steelblue");Array.from({length:12}).map((e,t)=>OT(t/11));function qT(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ae(t,"width",e[0]+"px"),Ae(t,"margin","auto")},m(a,o){K(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ae(t,"width",a[0]+"px")},i:se,o:se,d(a){a&&Z(t),e[4](null)}}}function GT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dt(()=>{const s=lt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1,domain:["hihat","snare","bass"]},marks:[bs(r,{x:"time",y:"instr"})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){He[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class zT extends ze{constructor(t){super(),Ge(this,t,GT,qT,qe,{pattern:3,width:0,height:1})}}function UT(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ae(t,"width",e[0]+"px"),Ae(t,"margin","auto")},m(a,o){K(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ae(t,"width",a[0]+"px")},i:se,o:se,d(a){a&&Z(t),e[4](null)}}}function HT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dt(()=>{const s=$n(r,c=>c.instr).map(([c,f])=>f.map((h,d)=>({index:d,instr:c,time:d===0?0:h.time-f[d-1].time}))).flat(),l=lt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},fy:{label:null,domain:["hihat","snare","bass"]},marks:[ry(s,{x:"index",y:"time",fy:"instr"})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){He[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class WT extends ze{constructor(t){super(),Ge(this,t,HT,UT,qe,{pattern:3,width:0,height:1})}}function VT(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ae(t,"width",e[0]+"px"),Ae(t,"margin","auto")},m(a,o){K(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ae(t,"width",a[0]+"px")},i:se,o:se,d(a){a&&Z(t),e[4](null)}}}function YT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dt(()=>{const s=$n(r,c=>c.instr).map(([c,f])=>f.map((h,d)=>({index:d,instr:c,time:d===0?0:h.time-f[d-1].time}))).flat(),l=lt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},fy:{label:null,domain:["hihat","snare","bass"]},marks:[Bf(s,{x:"index",fill:"time",fy:"instr"})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){He[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class jT extends ze{constructor(t){super(),Ge(this,t,YT,VT,qe,{pattern:3,width:0,height:1})}}function XT(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ae(t,"width",e[0]+"px"),Ae(t,"margin","auto")},m(a,o){K(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ae(t,"width",a[0]+"px")},i:se,o:se,d(a){a&&Z(t),e[4](null)}}}function ZT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dt(()=>{const s=[...new Set(r)],l=s.map((f,h)=>h===0?0:f-s[h-1]),c=lt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},x:{label:"beat"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[Bf(l,{x:(f,h)=>h+1,fill:f=>f})]});n(2,o.textContent="",o),o.appendChild(c)});function u(s){He[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Fo extends ze{constructor(t){super(),Ge(this,t,ZT,XT,qe,{pattern:3,width:0,height:1})}}function KT(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ae(t,"width",e[0]+"px"),Ae(t,"margin","auto")},m(a,o){K(a,t,o),P(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ae(t,"width",a[0]+"px")},i:se,o:se,d(a){a&&Z(t),e[5](null)}}}function QT(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;const s=c=>lt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[ay(c.audio,{x:(f,h)=>h/i,y:f=>f})]});dt(()=>{if(n(2,u.textContent="",u),!!r)for(const c of r){const f=s(c);u.appendChild(f)}});function l(c){He[c?"unshift":"push"](()=>{u=c,n(2,u)})}return e.$$set=c=>{"audioData"in c&&n(3,r=c.audioData),"sampleRate"in c&&n(4,i=c.sampleRate),"width"in c&&n(0,a=c.width),"height"in c&&n(1,o=c.height)},[a,o,u,r,i,l]}class JT extends ze{constructor(t){super(),Ge(this,t,QT,KT,qe,{audioData:3,sampleRate:4,width:0,height:1})}}function ek(e,t,n){const r=e.slice();return r[16]=t[n],r}function tk(e){let t;return{c(){t=T("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],at(t,t.__value)},m(n,r){K(n,t,r)},p:se,d(n){n&&Z(t)}}}function nk(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,w,b,v,y,_,M,x,E,S,k,A,L,G,F,C,q,ee,te,Q,z=Pt(["single note","single beat","only snare","beat 5"]),U=[];for(let $=0;$<4;$+=1)U[$]=tk(ek(e,z,$));return m=new oy({props:{audioData:e[2],sampleRate:e[4]}}),g=new To({props:{audioData:e[2],width:Sn,height:An}}),b=new JT({props:{audioData:e[3],width:Sn,height:An/3}}),y=new pS({props:{pattern:e[5],width:Sn,height:An}}),M=new zT({props:{pattern:e[6],width:Sn,height:An}}),E=new yS({props:{pattern:e[5],width:Sn,height:An}}),k=new WT({props:{pattern:e[6],width:Sn,height:An*2}}),L=new _S({props:{pattern:e[5],width:Sn,height:An}}),F=new jT({props:{pattern:e[6],width:Sn,height:An}}),q=new Fo({props:{pattern:e[5],width:Sn,height:An}}),{c(){t=T("main"),n=T("h2"),n.textContent="Playground",r=O(),i=T("div"),a=T("label"),o=Ce(`error mode:
      `),u=T("select");for(let $=0;$<4;$+=1)U[$].c();s=O(),l=T("label"),c=Ce(`error severity (in seconds):
      `),f=T("input"),h=O(),d=T("div"),Se(m.$$.fragment),p=O(),Se(g.$$.fragment),w=O(),Se(b.$$.fragment),v=O(),Se(y.$$.fragment),_=O(),Se(M.$$.fragment),x=O(),Se(E.$$.fragment),S=O(),Se(k.$$.fragment),A=O(),Se(L.$$.fragment),G=O(),Se(F.$$.fragment),C=O(),Se(q.$$.fragment),e[0]===void 0&&Qi(()=>e[7].call(u)),N(a,"class","svelte-1sot113"),N(f,"type","number"),N(f,"min","-0.5"),N(f,"max","0.5"),N(f,"step","0.01"),N(l,"class","svelte-1sot113"),N(d,"class","stimuli svelte-1sot113")},m($,I){K($,t,I),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u);for(let J=0;J<4;J+=1)U[J]&&U[J].m(u,null);Io(u,e[0],!0),P(i,s),P(i,l),P(l,c),P(l,f),at(f,e[1]),P(t,h),P(t,d),_e(m,d,null),P(d,p),_e(g,d,null),P(d,w),_e(b,d,null),P(d,v),_e(y,d,null),P(d,_),_e(M,d,null),P(d,x),_e(E,d,null),P(d,S),_e(k,d,null),P(d,A),_e(L,d,null),P(d,G),_e(F,d,null),P(d,C),_e(q,d,null),ee=!0,te||(Q=[Qe(u,"change",e[7]),Qe(f,"input",e[8])],te=!0)},p($,[I]){I&1&&Io(u,$[0]),I&2&&Kr(f.value)!==$[1]&&at(f,$[1]);const J={};I&4&&(J.audioData=$[2]),I&16&&(J.sampleRate=$[4]),m.$set(J);const ue={};I&4&&(ue.audioData=$[2]),g.$set(ue);const ae={};I&8&&(ae.audioData=$[3]),b.$set(ae);const V={};I&32&&(V.pattern=$[5]),y.$set(V);const Y={};I&64&&(Y.pattern=$[6]),M.$set(Y);const B={};I&32&&(B.pattern=$[5]),E.$set(B);const H={};I&64&&(H.pattern=$[6]),k.$set(H);const j={};I&32&&(j.pattern=$[5]),L.$set(j);const D={};I&64&&(D.pattern=$[6]),F.$set(D);const pe={};I&32&&(pe.pattern=$[5]),q.$set(pe)},i($){ee||(X(m.$$.fragment,$),X(g.$$.fragment,$),X(b.$$.fragment,$),X(y.$$.fragment,$),X(M.$$.fragment,$),X(E.$$.fragment,$),X(k.$$.fragment,$),X(L.$$.fragment,$),X(F.$$.fragment,$),X(q.$$.fragment,$),ee=!0)},o($){ie(m.$$.fragment,$),ie(g.$$.fragment,$),ie(b.$$.fragment,$),ie(y.$$.fragment,$),ie(M.$$.fragment,$),ie(E.$$.fragment,$),ie(k.$$.fragment,$),ie(L.$$.fragment,$),ie(F.$$.fragment,$),ie(q.$$.fragment,$),ee=!1},d($){$&&Z(t),cr(U,$),Me(m),Me(g),Me(b),Me(y),Me(M),Me(E),Me(k),Me(L),Me(F),Me(q),te=!1,gn(Q)}}}let Sn=600,An=100,rk=120;const x0=4;function ik(e,t,n){let r="beat 5",i=0,a=Ry(rk),o=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const u=x0*a;let s=null,l=[],c,f=[],h=[];const d=async()=>{o=await Promise.all(o.map(async v=>({...v,times:v.beats.map(y=>a*(y-1)),timesOriginal:v.beats.map(y=>a*(y-1)),audioBuffer:await ng(v.sample)})))},m=(v="single note",y=0)=>{if(y===0)return o;console.log(`Adding error ${v} ${y}`);const _=p([o]),M=_.filter(S=>S.instrument==="snare")[0],x=_.filter(S=>S.instrument==="hihat")[0],E=_.filter(S=>S.instrument==="bass")[0];return v==="single note"?M.times[1]=M.timesOriginal[1]+y:v==="single beat"?(M.times[1]=M.timesOriginal[1]+y,x.times[6]=x.timesOriginal[6]+y):v==="only snare"?(M.times[0]=M.timesOriginal[0]+y,M.times[1]=M.timesOriginal[1]+y):v==="beat 5"&&(E.times[1]=E.timesOriginal[1]+y,x.times[4]=x.timesOriginal[4]+y),_},p=v=>{console.log(`concat ${v.length} patterns`);const y=v[0].map(_=>({..._,beats:[..._.beats],times:[..._.times],timesOriginal:[..._.timesOriginal]}));for(let _=1;_<v.length;_++){const M=v[_];for(const x of M){const E=y.filter(S=>S.instrument===x.instrument)[0];E.beats=[...E.beats,...x.beats.map(S=>S+_*x0)],E.times=[...E.times,...x.times.map(S=>S+_*u)],E.timesOriginal=[...E.timesOriginal,...x.timesOriginal.map(S=>S+_*u)]}}return y},g=async(v,y)=>{if(!o[0].audioBuffer)return;const M=[m(v,y)],x=p(M);n(5,f=x.map(E=>E.times).flat().sort()),n(6,h=x.map(E=>E.times.map(S=>({time:S,instr:E.instrument}))).flat(1/0).sort((E,S)=>{E.time-S.time})),n(4,c=x[0].audioBuffer.sampleRate),n(2,s=Zl(x,u*M.length+.1,c)),n(3,l=x.map(E=>{const S=Zl([E],u*M.length+.1,c);return{instr:E.instrument,audio:S}}))};va(async()=>{await d(),g()});function w(){r=c1(this),n(0,r)}function b(){i=Kr(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&g(r,i)},[r,i,s,l,c,f,h,w,b]}class ak extends ze{constructor(t){super(),Ge(this,t,ik,nk,qe,{})}}function ok(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px")},m(a,o){K(a,t,o),P(t,n),e[7](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i)},i:se,o:se,d(a){a&&Z(t),e[7](null)}}}function uk(e,t,n){let{title:r=void 0}=t,{width:i=600}=t,{height:a=200}=t,{data:o}=t,{x:u="x"}=t,{y:s="y"}=t,l;dt(()=>{n(2,l.textContent="",l);const f=lt({title:r,width:i,height:a,x:{domain:[0,70]},marks:[lS(o,{x:u,y:s,stroke:"#ccc"}),Pf([0])]});l.appendChild(f)});function c(f){He[f?"unshift":"push"](()=>{l=f,n(2,l)})}return e.$$set=f=>{"title"in f&&n(3,r=f.title),"width"in f&&n(0,i=f.width),"height"in f&&n(1,a=f.height),"data"in f&&n(4,o=f.data),"x"in f&&n(5,u=f.x),"y"in f&&n(6,s=f.y)},[i,a,l,r,o,u,s,c]}class sk extends ze{constructor(t){super(),Ge(this,t,uk,ok,qe,{title:3,width:0,height:1,data:4,x:5,y:6})}}var Jy={exports:{}};(function(e,t){(function(n,r){r()})(Ci,function(){function n(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,c,f){var h=new XMLHttpRequest;h.open("GET",l),h.responseType="blob",h.onload=function(){s(h.response,c,f)},h.onerror=function(){console.error("could not download file")},h.send()}function i(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ci=="object"&&Ci.global===Ci?Ci:void 0,u=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(l,c,f){var h=o.URL||o.webkitURL,d=document.createElement("a");c=c||l.name||"download",d.download=c,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?a(d):i(d.href)?r(l,c,f):a(d,d.target="_blank")):(d.href=h.createObjectURL(l),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,f){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,f),c);else if(i(l))r(l,c,f);else{var h=document.createElement("a");h.href=l,h.target="_blank",setTimeout(function(){a(h)})}}:function(l,c,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof l=="string")return r(l,c,f);var d=l.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||u)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=p?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},g.readAsDataURL(l)}else{var w=o.URL||o.webkitURL,b=w.createObjectURL(l);h?h.location=b:location.href=b,h=null,setTimeout(function(){w.revokeObjectURL(b)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s})})(Jy);var lk=Jy.exports;const P0=tg(lk);function ck(e){let t,n,r;return{c(){t=T("div"),N(t,"width",n=e[0]+"px"),N(t,"height",r=e[1]+"px")},m(i,a){K(i,t,a),e[6](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&N(t,"width",n),a&2&&r!==(r=i[1]+"px")&&N(t,"height",r)},i:se,o:se,d(i){i&&Z(t),e[6](null)}}}function fk(e,t,n){let{data:r}=t,{domain:i}=t,{title:a=""}=t,{width:o=800}=t,{height:u=100}=t,s;dt(()=>{const c=lt({width:o,height:u,marginLeft:70,marginRight:10,x:{label:a,domain:i},y:{axis:!1,type:"band"},marks:[bs(r,{x:f=>f}),Ef(r,{x:f=>f,dx:7,y:(f,h)=>h,text:(f,h)=>`P${h+1}`})]});n(2,s.textContent="",s),s.appendChild(c)});function l(c){He[c?"unshift":"push"](()=>{s=c,n(2,s)})}return e.$$set=c=>{"data"in c&&n(3,r=c.data),"domain"in c&&n(4,i=c.domain),"title"in c&&n(5,a=c.title),"width"in c&&n(0,o=c.width),"height"in c&&n(1,u=c.height)},[o,u,s,r,i,a,l]}class hk extends ze{constructor(t){super(),Ge(this,t,fk,ck,qe,{data:3,domain:4,title:5,width:0,height:1})}}function dk(e){let t,n,r;return{c(){t=T("div"),N(t,"width",n=e[0]+"px"),N(t,"height",r=e[1]+"px")},m(i,a){K(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&N(t,"width",n),a&2&&r!==(r=i[1]+"px")&&N(t,"height",r)},i:se,o:se,d(i){i&&Z(t),e[5](null)}}}function mk(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;dt(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.finals)})),c=lt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[Ff(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Nf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),xf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Nu(l),m=1.96*(Tu(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){He[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class pk extends ze{constructor(t){super(),Ge(this,t,mk,dk,qe,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function bk(e){let t,n,r;return{c(){t=T("div"),N(t,"width",n=e[0]+"px"),N(t,"height",r=e[1]+"px")},m(i,a){K(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&N(t,"width",n),a&2&&r!==(r=i[1]+"px")&&N(t,"height",r)},i:se,o:se,d(i){i&&Z(t),e[5](null)}}}function gk(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;dt(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.trialCounts)})),c=lt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[Ff(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Nf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),xf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Nu(l),m=1.96*(Tu(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){He[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class yk extends ze{constructor(t){super(),Ge(this,t,gk,bk,qe,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function S0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function wk(e,t,n,r,i,a){const o=new Float64Array(a),u=(a-1)/(i-r);for(let s=0;s<e.length;++s){const l=e[s],c=t(l,s,e),f=n(l,s,e);if(!(Number.isFinite(c)&&Number.isFinite(f)))continue;const h=(c-r)*u,d=Math.floor(h),m=d+1;0<=d&&m<a?(o[d]+=(m-h)*f,o[m]+=(h-d)*f):d===-1?o[m]+=(h-d)*f:m===a&&(o[d]+=(m-h)*f)}return o}function A0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);vk(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,u=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:u}}function vk(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),u=.6318/n,s=1.997/n,l=Float64Array.of(-a*Math.cos(u),a*Math.sin(u),-a*Math.cos(-u),a*Math.sin(-u),-o*Math.cos(s),o*Math.sin(s),-o*Math.cos(-s),o*Math.sin(-s)),c=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(f[m]=l[m]*f[m-2]-l[m+1]*f[m-1],f[m+1]=l[m]*f[m-1]+l[m+1]*f[m-2],d=m-2;d>0;d-=2)f[d]+=l[m]*f[d-2]-l[m+1]*f[d-1],f[d+1]+=l[m]*f[d-1]+l[m+1]*f[d-2];for(d=0;d<=m;d+=2)f[d]+=i[m]*h[d]-i[m+1]*h[d+1],f[d+1]+=i[m]*h[d+1]+i[m+1]*h[d];for(h[m+2]=l[m]*h[m]-l[m+1]*h[m+1],h[m+3]=l[m]*h[m+1]+l[m+1]*h[m],d=m;d>0;d-=2)h[d]+=l[m]*h[d-2]-l[m+1]*h[d-1],h[d+1]+=l[m]*h[d-1]+l[m+1]*h[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=f[d]/c,e[m+1]=h[d+2]}function _k(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),u=i,s=Mk){const l=r*2,c=r*3,f=r*4,h=r*n;let d,m;for(s(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=f;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-l]+e.b_causal[3]*t[d-c]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(s(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=h-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+l]+e.b_anticausal[3]*t[d+c]+e.b_anticausal[4]*t[d+f]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)u[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)u[d]=Math.max(0,i[m]+a[n-m-1]);return u}function Mk(e,t,n,r,i,a,o,u,s,l){const c=Math.abs(r)*n,f=r<0?c+r:0;let h,d,m;for(d=0;d<u;++d)for(l[d]=d<=a?i[d]:0,m=1;m<=u&&m<=d;++m)l[d]-=o[m]*l[d-m];for(m=0;m<u;++m)for(e[m]=0,d=1;d<=m;++d)h=f+r*d,h>=0&&h<c&&(e[m]+=l[m-d]*t[h]);const p=t[f];if(p>0)for(m=0;m<u;++m)e[m]+=l[m]*p}function xk(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const u=t(e[o],o,e);u!=null&&(i===void 0?u>=u&&(i=a=u):(u<i&&(i=u),u>a&&(a=u)))}return[i-n,a+n]}function Pk(e,t){const n=e.map(t).filter(l=>l!=null&&l>=l);n.sort((l,c)=>l-c);const r=Sk(n),i=E0(n,.25),a=E0(n,.75),o=n.length,u=(a-i)/1.34;return 1.06*(Math.min(r,u)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function Sk(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const u=e[o];r=u-i,i+=r/++n,a+=r*(u-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function E0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function Ak(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=S0(t.x,w=>w),o=S0(t.weight,()=>1/e.length);let u=t.bandwidth??n*Pk(e,a);const[s,l]=t.extent??xk(e,a,r*u),c=wk(e,a,o,s,l,i),f=(l-s)/(i-1),h=c.some(w=>w<0);let d=A0(u/f,h),m;function*p(w="x",b="y"){const v=g.grid(),y=1/f;for(let _=0;_<i;++_)yield{[w]:s+_*f,[b]:v[_]*y}}const g={[Symbol.iterator]:p,points:p,grid:()=>m||(m=_k(d,c,i)),extent:()=>[s,l],bandwidth(w){return arguments.length?(w!==u&&(u=w,m=null,d=A0(u/f,h)),g):u}};return g}function Ek(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px")},m(a,o){K(a,t,o),P(t,n),e[10](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i)},i:se,o:se,d(a){a&&Z(t),e[10](null)}}}function Ck(e,t,n){let r,{values:i}=t,{title:a=""}=t,{xLabel:o="some value"}=t,{xDomain:u=void 0}=t,{width:s=1e3}=t,{height:l=100}=t,{bandwidth:c=.25}=t,{bins:f=256}=t,{pad:h=4}=t,d;dt(()=>{const p=[...r.bandwidth(c)];n(2,d.textContent="",d);const g=lt({width:s,height:l,title:a,style:{background:"none"},grid:!0,x:{label:o,domain:u},y:{label:"density",type:"linear"},marks:[ZP(p,{x:"x",y:"y",fill:"#ccc"}),bs(i,{x:w=>w,strokeWidth:.5}),Pf([0])]});d.appendChild(g)});function m(p){He[p?"unshift":"push"](()=>{d=p,n(2,d)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,a=p.title),"xLabel"in p&&n(5,o=p.xLabel),"xDomain"in p&&n(6,u=p.xDomain),"width"in p&&n(0,s=p.width),"height"in p&&n(1,l=p.height),"bandwidth"in p&&n(7,c=p.bandwidth),"bins"in p&&n(8,f=p.bins),"pad"in p&&n(9,h=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=Ak(i,{bandwidth:c,pad:h,bins:f}))},[s,l,d,i,a,o,u,c,f,h,m]}class Tk extends ze{constructor(t){super(),Ge(this,t,Ck,Ek,qe,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function kk(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px")},m(a,o){K(a,t,o),P(t,n),e[13](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i)},i:se,o:se,d(a){a&&Z(t),e[13](null)}}}function $k(e,t,n){let{title:r=""}=t,{data:i}=t,{x:a="x"}=t,{y:o="y"}=t,{tipTitle:u=null}=t,{xLabel:s=null}=t,{yLabel:l=null}=t,{xDomain:c=void 0}=t,{yDomain:f=void 0}=t,{grid:h=!1}=t,{width:d=300}=t,{height:m=300}=t,p;dt(()=>{console.log(i,a,o),n(2,p.textContent="",p);const w=lt({width:d,height:m,title:r,grid:h,style:{background:"none"},x:{label:s||(typeof a=="string"?a:"x"),domain:c},y:{label:l||(typeof o=="string"?o:"y"),domain:f},marks:[Ff(i,{x:a,y:o}),G2(i,Kg({x:a,y:o,title:u})),Nf({length:1},{x1:c[0],x2:c[1],y1:f[0],y2:f[1],stroke:"#ccc"})]});p.appendChild(w)});function g(w){He[w?"unshift":"push"](()=>{p=w,n(2,p)})}return e.$$set=w=>{"title"in w&&n(3,r=w.title),"data"in w&&n(4,i=w.data),"x"in w&&n(5,a=w.x),"y"in w&&n(6,o=w.y),"tipTitle"in w&&n(7,u=w.tipTitle),"xLabel"in w&&n(8,s=w.xLabel),"yLabel"in w&&n(9,l=w.yLabel),"xDomain"in w&&n(10,c=w.xDomain),"yDomain"in w&&n(11,f=w.yDomain),"grid"in w&&n(12,h=w.grid),"width"in w&&n(0,d=w.width),"height"in w&&n(1,m=w.height)},[d,m,p,r,i,a,o,u,s,l,c,f,h,g]}class C0 extends ze{constructor(t){super(),Ge(this,t,$k,kk,qe,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function T0(e,t,n){const r=e.slice();return r[12]=t[n],r}function k0(e,t,n){const r=e.slice();return r[15]=t[n],r}function $0(e,t,n){const r=e.slice();return r[18]=t[n],r}function D0(e,t,n){const r=e.slice();return r[21]=t[n],r}function N0(e,t,n){const r=e.slice();return r[24]=t[n],r}function B0(e,t,n){const r=e.slice();return r[27]=t[n][0],r[28]=t[n][1],r}function F0(e){let t,n=e[27]+"",r,i,a=e[28].length+"",o,u;return{c(){t=T("p"),r=Ce(n),i=Ce(": "),o=Ce(a),u=Ce(" times")},m(s,l){K(s,t,l),P(t,r),P(t,i),P(t,o),P(t,u)},p(s,l){l&1&&n!==(n=s[27]+"")&&At(r,n),l&1&&a!==(a=s[28].length+"")&&At(o,a)},d(s){s&&Z(t)}}}function L0(e){let t,n;return t=new Tk({props:{title:`Density of final values for ${e[24][0]}`,values:e[24][1].map(H0),xLabel:"final values",xDomain:[-1,1],bandwidth:Bk}}),{c(){Se(t.$$.fragment)},m(r,i){_e(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=`Density of final values for ${r[24][0]}`),i&2&&(a.values=r[24][1].map(H0)),t.$set(a)},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ie(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function R0(e){let t,n=e[21].encoding+"",r,i,a,o;return a=new hk({props:{data:e[21].finals,title:e[21].encoding,domain:[0,e[2]]}}),{c(){t=T("b"),r=Ce(n),i=O(),Se(a.$$.fragment)},m(u,s){K(u,t,s),P(t,r),K(u,i,s),_e(a,u,s),o=!0},p(u,s){(!o||s&8)&&n!==(n=u[21].encoding+"")&&At(r,n);const l={};s&8&&(l.data=u[21].finals),s&8&&(l.title=u[21].encoding),s&4&&(l.domain=[0,u[2]]),a.$set(l)},i(u){o||(X(a.$$.fragment,u),o=!0)},o(u){ie(a.$$.fragment,u),o=!1},d(u){u&&(Z(t),Z(i)),Me(a,u)}}}function I0(e){let t,n=e[18]+"",r;return{c(){t=T("p"),r=Ce(n)},m(i,a){K(i,t,a),P(t,r)},p(i,a){a&1&&n!==(n=i[18]+"")&&At(r,n)},d(i){i&&Z(t)}}}function O0(e){let t,n,r,i=e[15].demographics.internalPID+"",a,o,u=e[15].demographics.partID+"",s,l,c,f=Pt(e[15].demographics.partFeedback.split(`
`)),h=[];for(let d=0;d<f.length;d+=1)h[d]=I0($0(e,f,d));return{c(){t=T("div"),n=T("b"),r=Ce("P"),a=Ce(i),o=O(),s=Ce(u),l=Ce(`:
        `);for(let d=0;d<h.length;d+=1)h[d].c();c=O(),Ae(t,"text-align","left")},m(d,m){K(d,t,m),P(t,n),P(n,r),P(n,a),P(t,o),P(t,s),P(t,l);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(t,null);P(t,c)},p(d,m){if(m&1&&i!==(i=d[15].demographics.internalPID+"")&&At(a,i),m&1&&u!==(u=d[15].demographics.partID+"")&&At(s,u),m&1){f=Pt(d[15].demographics.partFeedback.split(`
`));let p;for(p=0;p<f.length;p+=1){const g=$0(d,f,p);h[p]?h[p].p(g,m):(h[p]=I0(g),h[p].c(),h[p].m(t,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=f.length}},d(d){d&&Z(t),cr(h,d)}}}function q0(e){let t,n;return t=new sk({props:{title:e[12].encoding,width:Nk,height:150,data:e[12].data,x:Lk,y:e[7]}}),{c(){Se(t.$$.fragment)},m(r,i){_e(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=r[12].encoding),i&2&&(a.data=r[12].data),t.$set(a)},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ie(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function Dk(e){let t,n,r,i,a,o,u,s,l,c,f,h=e[0].length+"",d,m,p=e[1].length+"",g,w,b=e[4].length+"",v,y,_,M,x,E,S,k,A,L,G,F,C,q,ee,te,Q,z,U,$,I,J,ue,ae,V,Y,B,H,j,D,pe,ne,he,xe,Ue,nt=Pt($n(e[0],G0).sort(z0)),Be=[];for(let R=0;R<nt.length;R+=1)Be[R]=F0(B0(e,nt,R));let Ht=Pt($n(e[1],U0)),Ne=[];for(let R=0;R<Ht.length;R+=1)Ne[R]=L0(N0(e,Ht,R));const Br=R=>ie(Ne[R],1,1,()=>{Ne[R]=null});L=new C0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,.5],yDomain:[0,.5],data:e[0]}}),F=new C0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,.5],yDomain:[0,.5],data:e[0]}}),Q=new pk({props:{stimuli:e[3]}}),J=new yk({props:{stimuli:e[3]}});let Wt=Pt(e[3]),re=[];for(let R=0;R<Wt.length;R+=1)re[R]=R0(D0(e,Wt,R));const we=R=>ie(re[R],1,1,()=>{re[R]=null});let Pe=Pt(e[0].filter(W0)),ke=[];for(let R=0;R<Pe.length;R+=1)ke[R]=O0(k0(e,Pe,R));let $e=Pt(e[1]),ve=[];for(let R=0;R<$e.length;R+=1)ve[R]=q0(T0(e,$e,R));const Xe=R=>ie(ve[R],1,1,()=>{ve[R]=null});return{c(){t=T("main"),n=T("h2"),n.textContent="Analysis",r=O(),i=T("div"),a=T("label"),o=Ce(`Results JSONs and Prolific demographics CSV
      `),u=T("input"),s=O(),l=T("button"),l.textContent="export JSON",c=O(),f=T("div"),d=Ce(h),m=Ce(` participants completed -
    `),g=Ce(p),w=Ce(` tests -
    `),v=Ce(b),y=Ce(" filtered tests"),_=O(),M=T("div"),x=T("h3"),x.textContent="Encoding order",E=O();for(let R=0;R<Be.length;R+=1)Be[R].c();S=O(),k=T("div");for(let R=0;R<Ne.length;R+=1)Ne[R].c();A=O(),Se(L.$$.fragment),G=O(),Se(F.$$.fragment),C=O(),q=T("div"),ee=T("h3"),ee.textContent="Mean and CI of Final Values",te=O(),Se(Q.$$.fragment),z=O(),U=T("div"),$=T("h3"),$.textContent="Mean and CI of Trial Counts",I=O(),Se(J.$$.fragment),ue=O(),ae=T("div"),V=T("h3"),V.textContent="Final Values for Each Stimulus and All Participants",Y=O();for(let R=0;R<re.length;R+=1)re[R].c();B=O(),H=T("div"),j=T("h3"),j.textContent="Feedback",D=O();for(let R=0;R<ke.length;R+=1)ke[R].c();pe=O(),ne=T("div");for(let R=0;R<ve.length;R+=1)ve[R].c();N(u,"type","file"),N(u,"accept",".json,.csv"),u.multiple=!0},m(R,oe){K(R,t,oe),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u),P(i,s),P(i,l),P(t,c),P(t,f),P(f,d),P(f,m),P(f,g),P(f,w),P(f,v),P(f,y),P(t,_),P(t,M),P(M,x),P(M,E);for(let ye=0;ye<Be.length;ye+=1)Be[ye]&&Be[ye].m(M,null);P(t,S),P(t,k);for(let ye=0;ye<Ne.length;ye+=1)Ne[ye]&&Ne[ye].m(k,null);P(t,A),_e(L,t,null),P(t,G),_e(F,t,null),P(t,C),P(t,q),P(q,ee),P(q,te),_e(Q,q,null),P(t,z),P(t,U),P(U,$),P(U,I),_e(J,U,null),P(t,ue),P(t,ae),P(ae,V),P(ae,Y);for(let ye=0;ye<re.length;ye+=1)re[ye]&&re[ye].m(ae,null);P(t,B),P(t,H),P(H,j),P(H,D);for(let ye=0;ye<ke.length;ye+=1)ke[ye]&&ke[ye].m(H,null);P(t,pe),P(t,ne);for(let ye=0;ye<ve.length;ye+=1)ve[ye]&&ve[ye].m(ne,null);he=!0,xe||(Ue=[Qe(u,"input",e[5]),Qe(l,"click",e[6])],xe=!0)},p(R,[oe]){if((!he||oe&1)&&h!==(h=R[0].length+"")&&At(d,h),(!he||oe&2)&&p!==(p=R[1].length+"")&&At(g,p),(!he||oe&16)&&b!==(b=R[4].length+"")&&At(v,b),oe&1){nt=Pt($n(R[0],G0).sort(z0));let W;for(W=0;W<nt.length;W+=1){const pt=B0(R,nt,W);Be[W]?Be[W].p(pt,oe):(Be[W]=F0(pt),Be[W].c(),Be[W].m(M,null))}for(;W<Be.length;W+=1)Be[W].d(1);Be.length=nt.length}if(oe&2){Ht=Pt($n(R[1],U0));let W;for(W=0;W<Ht.length;W+=1){const pt=N0(R,Ht,W);Ne[W]?(Ne[W].p(pt,oe),X(Ne[W],1)):(Ne[W]=L0(pt),Ne[W].c(),X(Ne[W],1),Ne[W].m(k,null))}for(Xt(),W=Ht.length;W<Ne.length;W+=1)Br(W);Zt()}const ye={};oe&1&&(ye.data=R[0]),L.$set(ye);const xt={};oe&1&&(xt.data=R[0]),F.$set(xt);const an={};oe&8&&(an.stimuli=R[3]),Q.$set(an);const Xa={};if(oe&8&&(Xa.stimuli=R[3]),J.$set(Xa),oe&12){Wt=Pt(R[3]);let W;for(W=0;W<Wt.length;W+=1){const pt=D0(R,Wt,W);re[W]?(re[W].p(pt,oe),X(re[W],1)):(re[W]=R0(pt),re[W].c(),X(re[W],1),re[W].m(ae,null))}for(Xt(),W=Wt.length;W<re.length;W+=1)we(W);Zt()}if(oe&1){Pe=Pt(R[0].filter(W0));let W;for(W=0;W<Pe.length;W+=1){const pt=k0(R,Pe,W);ke[W]?ke[W].p(pt,oe):(ke[W]=O0(pt),ke[W].c(),ke[W].m(H,null))}for(;W<ke.length;W+=1)ke[W].d(1);ke.length=Pe.length}if(oe&2){$e=Pt(R[1]);let W;for(W=0;W<$e.length;W+=1){const pt=T0(R,$e,W);ve[W]?(ve[W].p(pt,oe),X(ve[W],1)):(ve[W]=q0(pt),ve[W].c(),X(ve[W],1),ve[W].m(ne,null))}for(Xt(),W=$e.length;W<ve.length;W+=1)Xe(W);Zt()}},i(R){if(!he){for(let oe=0;oe<Ht.length;oe+=1)X(Ne[oe]);X(L.$$.fragment,R),X(F.$$.fragment,R),X(Q.$$.fragment,R),X(J.$$.fragment,R);for(let oe=0;oe<Wt.length;oe+=1)X(re[oe]);for(let oe=0;oe<$e.length;oe+=1)X(ve[oe]);he=!0}},o(R){Ne=Ne.filter(Boolean);for(let oe=0;oe<Ne.length;oe+=1)ie(Ne[oe]);ie(L.$$.fragment,R),ie(F.$$.fragment,R),ie(Q.$$.fragment,R),ie(J.$$.fragment,R),re=re.filter(Boolean);for(let oe=0;oe<re.length;oe+=1)ie(re[oe]);ve=ve.filter(Boolean);for(let oe=0;oe<ve.length;oe+=1)ie(ve[oe]);he=!1},d(R){R&&Z(t),cr(Be,R),cr(Ne,R),Me(L),Me(F),Me(Q),Me(J),cr(re,R),cr(ke,R),cr(ve,R),xe=!1,gn(Ue)}}}const Nk=800;let Bk=.1,Fk=20;const G0=e=>e.encodingOrder,z0=(e,t)=>e[1].lenght-t[1].length,U0=e=>e.testType,H0=e=>e.final,W0=e=>e.demographics.partFeedback.trim().length>0,Lk=(e,t)=>t;function Rk(e,t,n){let r,i,a,o,u=[],s=null;const l=async p=>{const g=[];for(const b of p.target.files)if(b.name.endsWith(".csv")){const v=await b.text();s=E5(v),console.log("p demo",s)}else{const v=await b.text();g.push(JSON.parse(v))}const w=$n(g,b=>b.demographics.partID);console.log(`${w.length} participants`,w),n(0,u=g.filter(b=>b.studyStep==="feedback").map((b,v)=>({...b,demographics:{...b.demographics,internalPID:v+1},prolificDemogr:s.filter(y=>y["Participant id"]===b.demographics.partID)[0],finalAudio:b.tests.filter(y=>y.encoding.startsWith("audio"))[0].final,finalColor:b.tests.filter(y=>y.encoding.startsWith("color"))[0].final,finalWaveform:b.tests.filter(y=>y.encoding.startsWith("waveform"))[0].final,encodingOrder:b.tests.map(y=>y.encoding).join(", ")})).filter(b=>b.prolificDemogr!==void 0)),console.log("participants",u)},c=p=>{if(p.lenght===0)return[];const g=(b,v=5)=>{const y=Math.floor(b/v)*v;return`${y}-${y+v-1}`},w=[];for(const b of p)for(const[v,y]of b.tests.entries()){let _=y.encoding;w.push({...b.demographics,partAge:b.demographics.partAge?b.demographics.partAge:g(b.prolificDemogr.Age,10),partSex:b.demographics.partGender?b.demographics.partGender:b.prolificDemogr.Sex,countryBirth:b.prolificDemogr["Country of birth"],countryResidence:b.prolificDemogr["Country of residence"],prolificApprovals:b.prolificDemogr["Total approvals"],...y,date:b.date,testType:_,testOrder:v})}return console.log("tests",w),w},f=(p,g)=>p.filter(w=>w.final<g),h=p=>p.length===0?[]:$n(p,w=>w.testType).map(([w,b])=>{const v=b.map(y=>y.final);return{encoding:w,testType:w,finals:v,finalMean:Nu(v),finalVar:_c(v),trialCounts:b.map(y=>y.trialCount)}}),d=()=>{const p=JSON.stringify(u,void 0,2),g=new Blob([p],{type:"text/plain;charset=utf-8"});P0(g,"participants.json");const w=JSON.stringify(r,void 0,2),b=new Blob([w],{type:"text/plain;charset=utf-8"});P0(b,"tests.json")},m=p=>Math.abs(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=c(u)),e.$$.dirty&2&&n(4,i=f(r,Fk)),e.$$.dirty&2&&n(3,a=h(r)),e.$$.dirty&2&&n(2,o=Ot(r.map(p=>Math.abs(p.final)))),e.$$.dirty&2&&console.log("tests by enc",$n(r,p=>p.testType))},[u,r,o,a,i,l,d,m]}class Ik extends ze{constructor(t){super(),Ge(this,t,Rk,Dk,qe,{})}}function Le(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}Le.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};Le.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};Le.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};Le.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=e3(0,e.length-1);return this.activate(e[t]),this};Le.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=e3(0,e.length-1);this.activate(e[t])};Le.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};Le.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};Le.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};Le.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Le.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};Le.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};Le.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};Le.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};Le.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};Le.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};Le.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};Le.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};Le.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};Le.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};Le.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};Le.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const Hf=function(){};Hf.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};Hf.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};Le.prototype.checkErr=new Hf;function e3(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Lo(e,t){return new URLSearchParams(e.location.search).get(t)}function Ok(e){let t,n,r,i,a,o,u;return{c(){t=T("main"),n=T("audio"),r=O(),i=T("button"),a=Ce(e[0]),n.controls=!1},m(s,l){K(s,t,l),P(t,n),e[5](n),P(t,r),P(t,i),P(i,a),o||(u=Qe(i,"click",e[2]),o=!0)},p(s,[l]){l&1&&At(a,s[0])},i:se,o:se,d(s){s&&Z(t),e[5](null),o=!1,u()}}}function qk(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:a="play audio"}=t,o=null,u;const s=(f,h)=>{h&&u&&(o=i9(h,f),Xc(o,h.sampleRate,u))};va(()=>s(r,i));const l=async()=>{u&&(n(1,u.currentTime=0,u),u.play())};function c(f){He[f?"unshift":"push"](()=>{u=f,n(1,u)})}return e.$$set=f=>{"pattern"in f&&n(3,r=f.pattern),"cachedAudio"in f&&n(4,i=f.cachedAudio),"label"in f&&n(0,a=f.label)},[a,u,l,r,i,c]}class Ro extends ze{constructor(t){super(),Ge(this,t,qk,Ok,qe,{pattern:3,cachedAudio:4,label:0})}}function Gk(e){let t,n,r,i,a,o;return{c(){t=T("main"),n=T("audio"),r=O(),i=T("button"),i.textContent="play audio",n.controls=!1},m(u,s){K(u,t,s),P(t,n),e[4](n),P(t,r),P(t,i),a||(o=Qe(i,"click",e[1]),a=!0)},p:se,i:se,o:se,d(u){u&&Z(t),e[4](null),a=!1,o()}}}function zk(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,a;const o=l=>{l&&a&&Xc(l,i,a)};va(()=>o(r));const u=()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(l){He[l?"unshift":"push"](()=>{a=l,n(0,a)})}return e.$$set=l=>{"audioData"in l&&n(2,r=l.audioData),"sampleRate"in l&&n(3,i=l.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&o(r)},[a,u,r,i,s]}class V0 extends ze{constructor(t){super(),Ge(this,t,zk,Gk,qe,{audioData:2,sampleRate:3})}}function Y0(e){let t;return{c(){t=T("div"),t.innerHTML=`<p class="svelte-rz4e1l">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-rz4e1l">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-rz4e1l">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-rz4e1l">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){K(n,t,r)},d(n){n&&Z(t)}}}function j0(e){let t,n,r,i,a,o,u,s,l;return i=new Ro({props:{pattern:[.1,.6,1.1],cachedAudio:e[14][2].audioBuffer}}),{c(){t=T("div"),n=T("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=O(),Se(i.$$.fragment),a=O(),o=T("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",u=O(),s=T("a"),s.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",N(n,"class","svelte-rz4e1l"),N(o,"class","svelte-rz4e1l"),N(s,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(c,f){K(c,t,f),P(t,n),P(t,r),_e(i,t,null),P(t,a),P(t,o),P(t,u),P(t,s),l=!0},p(c,f){const h={};f[0]&16384&&(h.cachedAudio=c[14][2].audioBuffer),i.$set(h)},i(c){l||(X(i.$$.fragment,c),l=!0)},o(c){ie(i.$$.fragment,c),l=!1},d(c){c&&Z(t),Me(i)}}}function X0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,w,b;return{c(){t=T("div"),n=T("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=O(),i=T("div"),a=T("button"),a.textContent="+",o=O(),u=T("button"),u.textContent="-",s=O(),l=Vf("svg"),c=Vf("rect"),p=O(),g=T("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,N(n,"class","svelte-rz4e1l"),N(c,"width",f=e[0]*.52),N(c,"height",h=e[22]*2),N(c,"fill","#ccc"),N(c,"rx","8"),N(l,"width",d=e[0]*.52+"px"),N(l,"height",m=e[22]*2+"px"),N(g,"class","svelte-rz4e1l")},m(v,y){K(v,t,y),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(t,s),P(t,l),P(l,c),P(t,p),P(t,g),w||(b=[Qe(a,"click",e[24]),Qe(u,"click",e[25])],w=!0)},p(v,y){y[0]&1&&f!==(f=v[0]*.52)&&N(c,"width",f),y[0]&4194304&&h!==(h=v[22]*2)&&N(c,"height",h),y[0]&1&&d!==(d=v[0]*.52+"px")&&N(l,"width",d),y[0]&4194304&&m!==(m=v[22]*2+"px")&&N(l,"height",m)},d(v){v&&Z(t),w=!1,gn(b)}}}function Z0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,w,b,v;return h=new Ro({props:{pattern:[.1],cachedAudio:e[14][0].audioBuffer,label:"hi-hat"}}),m=new Ro({props:{pattern:[.1],cachedAudio:e[14][1].audioBuffer,label:"snare drum"}}),g=new Ro({props:{pattern:[.1],cachedAudio:e[14][2].audioBuffer,label:"bass drum"}}),{c(){t=T("div"),n=T("div"),n.innerHTML=`<p class="svelte-rz4e1l">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-rz4e1l">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-rz4e1l">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played togehter will still be played at
          the same time, but this time will be either too early or too late.</p>`,r=Ce(`
      This is what the pattern looks like in sheet music:
      `),i=T("div"),a=T("img"),s=O(),l=T("div"),c=T("span"),c.textContent="Click to hear the different sounds:",f=O(),Se(h.$$.fragment),d=O(),Se(m.$$.fragment),p=O(),Se(g.$$.fragment),w=Ce(`
      This is what the full, correctly played pattern sounds like:
      `),b=T("div"),b.innerHTML='<audio src="drum-pattern-correct-once.wav" controls=""></audio>',N(a,"width",o=e[0]+"px"),r3(a.src,u="drum-pattern-labels3.png")||N(a,"src",u),N(a,"alt","drum pattern as sheet music"),Ae(l,"display","grid"),Ae(l,"grid-template-columns","repeat(4,max-content)"),Ae(l,"gap","10px"),Ae(l,"align-items","center")},m(y,_){K(y,t,_),P(t,n),P(t,r),P(t,i),P(i,a),P(t,s),P(t,l),P(l,c),P(l,f),_e(h,l,null),P(l,d),_e(m,l,null),P(l,p),_e(g,l,null),P(t,w),P(t,b),v=!0},p(y,_){(!v||_[0]&1&&o!==(o=y[0]+"px"))&&N(a,"width",o);const M={};_[0]&16384&&(M.cachedAudio=y[14][0].audioBuffer),h.$set(M);const x={};_[0]&16384&&(x.cachedAudio=y[14][1].audioBuffer),m.$set(x);const E={};_[0]&16384&&(E.cachedAudio=y[14][2].audioBuffer),g.$set(E)},i(y){v||(X(h.$$.fragment,y),X(m.$$.fragment,y),X(g.$$.fragment,y),v=!0)},o(y){ie(h.$$.fragment,y),ie(m.$$.fragment,y),ie(g.$$.fragment,y),v=!1},d(y){y&&Z(t),Me(h),Me(m),Me(g)}}}function K0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,w,b,v,y,_,M,x,E,S,k,A,L,G;return{c(){t=T("div"),n=T("p"),n.textContent="Please answer the following questions about yourself:",r=O(),i=T("label"),a=T("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=O(),u=T("select"),s=T("option"),s.textContent="none",l=T("option"),l.textContent="high school",c=T("option"),c.textContent="bachelor",f=T("option"),f.textContent="master",h=T("option"),h.textContent="phd",d=O(),m=T("label"),p=T("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=O(),w=T("input"),b=O(),v=T("label"),y=T("span"),y.textContent="For how many years do you roughly play it/them?",_=O(),M=T("input"),x=O(),E=T("label"),S=T("span"),S.textContent=`How many years of experience do you have with information
          visualization?`,k=O(),A=T("input"),N(n,"class","svelte-rz4e1l"),s.__value="none",at(s,s.__value),l.__value="highs",at(l,l.__value),c.__value="bachelor",at(c,c.__value),f.__value="master",at(f,f.__value),h.__value="phd",at(h,h.__value),e[4]===void 0&&Qi(()=>e[26].call(u)),N(i,"class","svelte-rz4e1l"),N(w,"type","text"),N(w,"placeholder","free text"),N(m,"class","svelte-rz4e1l"),N(M,"type","number"),N(M,"min","0"),N(M,"step","1"),N(v,"class","svelte-rz4e1l"),N(A,"type","number"),N(A,"min","0"),N(A,"step","1"),N(E,"class","svelte-rz4e1l"),N(t,"class","demo-form svelte-rz4e1l")},m(F,C){K(F,t,C),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(u,s),P(u,l),P(u,c),P(u,f),P(u,h),Io(u,e[4],!0),P(t,d),P(t,m),P(m,p),P(m,g),P(m,w),at(w,e[5]),P(t,b),P(t,v),P(v,y),P(v,_),P(v,M),at(M,e[6]),P(t,x),P(t,E),P(E,S),P(E,k),P(E,A),at(A,e[7]),L||(G=[Qe(u,"change",e[26]),Qe(w,"input",e[27]),Qe(M,"input",e[28]),Qe(A,"input",e[29])],L=!0)},p(F,C){C[0]&16&&Io(u,F[4]),C[0]&32&&w.value!==F[5]&&at(w,F[5]),C[0]&64&&Kr(M.value)!==F[6]&&at(M,F[6]),C[0]&128&&Kr(A.value)!==F[7]&&at(A,F[7])},d(F){F&&Z(t),L=!1,gn(G)}}}function Q0(e){let t,n,r=e[10]&&J0(e);return{c(){r&&r.c(),t=yc()},m(i,a){r&&r.m(i,a),K(i,t,a),n=!0},p(i,a){i[10]?r?(r.p(i,a),a[0]&1024&&X(r,1)):(r=J0(i),r.c(),X(r,1),r.m(t.parentNode,t)):r&&(Xt(),ie(r,1,1,()=>{r=null}),Zt())},i(i){n||(X(r),n=!0)},o(i){ie(r),n=!1},d(i){i&&Z(t),r&&r.d(i)}}}function J0(e){let t,n,r=e[3]+1+"",i,a,o=e[1].length+"",u,s,l,c,f,h,d,m,p=e[9]+1+"",g,w,b,v,y,_;const M=[Hk,Uk],x=[];function E(S,k){return S[13]==="audio"?0:S[12]===!1?1:-1}return~(b=E(e))&&(v=x[b]=M[b](e)),{c(){t=T("p"),n=Ce("Test number "),i=Ce(r),a=Ce(" of "),u=Ce(o),s=O(),l=T("p"),l.innerHTML="The <b>5th beat</b> with a <b>hi-hat and a bass</b> note is shifted.",c=O(),f=T("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,h=O(),d=T("p"),m=Ce("Trial number "),g=Ce(p),w=O(),v&&v.c(),y=yc(),N(t,"class","svelte-rz4e1l"),N(l,"class","svelte-rz4e1l"),N(f,"class","svelte-rz4e1l"),N(d,"class","svelte-rz4e1l")},m(S,k){K(S,t,k),P(t,n),P(t,i),P(t,a),P(t,u),K(S,s,k),K(S,l,k),K(S,c,k),K(S,f,k),K(S,h,k),K(S,d,k),P(d,m),P(d,g),K(S,w,k),~b&&x[b].m(S,k),K(S,y,k),_=!0},p(S,k){(!_||k[0]&8)&&r!==(r=S[3]+1+"")&&At(i,r),(!_||k[0]&2)&&o!==(o=S[1].length+"")&&At(u,o),(!_||k[0]&512)&&p!==(p=S[9]+1+"")&&At(g,p);let A=b;b=E(S),b===A?~b&&x[b].p(S,k):(v&&(Xt(),ie(x[A],1,1,()=>{x[A]=null}),Zt()),~b?(v=x[b],v?v.p(S,k):(v=x[b]=M[b](S),v.c()),X(v,1),v.m(y.parentNode,y)):v=null)},i(S){_||(X(v),_=!0)},o(S){ie(v),_=!1},d(S){S&&(Z(t),Z(s),Z(l),Z(c),Z(f),Z(h),Z(d),Z(w),Z(y)),~b&&x[b].d(S)}}}function Uk(e){let t,n,r,i=(e[13]==="waveform"||vo)&&e1(e),a=(e[13]==="color"||vo)&&t1(e);return{c(){i&&i.c(),t=O(),a&&a.c(),n=yc()},m(o,u){i&&i.m(o,u),K(o,t,u),a&&a.m(o,u),K(o,n,u),r=!0},p(o,u){o[13]==="waveform"||vo?i?(i.p(o,u),u[0]&8192&&X(i,1)):(i=e1(o),i.c(),X(i,1),i.m(t.parentNode,t)):i&&(Xt(),ie(i,1,1,()=>{i=null}),Zt()),o[13]==="color"||vo?a?(a.p(o,u),u[0]&8192&&X(a,1)):(a=t1(o),a.c(),X(a,1),a.m(n.parentNode,n)):a&&(Xt(),ie(a,1,1,()=>{a=null}),Zt())},i(o){r||(X(i),X(a),r=!0)},o(o){ie(i),ie(a),r=!1},d(o){o&&(Z(t),Z(n)),i&&i.d(o),a&&a.d(o)}}}function Hk(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new V0({props:{audioData:e[16],sampleRate:e[18]}}),o=new V0({props:{audioData:e[17],sampleRate:e[18]}}),h=new oy({props:{audioData:e[15],sampleRate:e[18],currentTrialNumber:e[9]}}),{c(){t=T("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=O(),r=T("div"),Se(i.$$.fragment),a=O(),Se(o.$$.fragment),u=O(),s=T("div"),s.textContent="Example for early",l=O(),c=T("div"),c.textContent="Example for late",f=O(),Se(h.$$.fragment),N(t,"class","svelte-rz4e1l"),N(s,"class","svelte-rz4e1l"),N(c,"class","svelte-rz4e1l"),N(r,"class","vis-example svelte-rz4e1l")},m(m,p){K(m,t,p),K(m,n,p),K(m,r,p),_e(i,r,null),P(r,a),_e(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),K(m,f,p),_e(h,m,p),d=!0},p(m,p){const g={};p[0]&65536&&(g.audioData=m[16]),p[0]&262144&&(g.sampleRate=m[18]),i.$set(g);const w={};p[0]&131072&&(w.audioData=m[17]),p[0]&262144&&(w.sampleRate=m[18]),o.$set(w);const b={};p[0]&32768&&(b.audioData=m[15]),p[0]&262144&&(b.sampleRate=m[18]),p[0]&512&&(b.currentTrialNumber=m[9]),h.$set(b)},i(m){d||(X(i.$$.fragment,m),X(o.$$.fragment,m),X(h.$$.fragment,m),d=!0)},o(m){ie(i.$$.fragment,m),ie(o.$$.fragment,m),ie(h.$$.fragment,m),d=!1},d(m){m&&(Z(t),Z(n),Z(r),Z(f)),Me(i),Me(o),Me(h,m)}}}function e1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new To({props:{audioData:e[16],width:e[0]/2,height:e[22]/2}}),o=new To({props:{audioData:e[17],width:e[0]/2,height:e[22]/2}}),h=new To({props:{audioData:e[15],width:e[0],height:e[22]}}),{c(){t=T("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=O(),r=T("div"),Se(i.$$.fragment),a=O(),Se(o.$$.fragment),u=O(),s=T("div"),s.textContent="Example for early",l=O(),c=T("div"),c.textContent="Example for late",f=O(),Se(h.$$.fragment),N(t,"class","svelte-rz4e1l"),N(s,"class","svelte-rz4e1l"),N(c,"class","svelte-rz4e1l"),N(r,"class","vis-example svelte-rz4e1l")},m(m,p){K(m,t,p),K(m,n,p),K(m,r,p),_e(i,r,null),P(r,a),_e(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),K(m,f,p),_e(h,m,p),d=!0},p(m,p){const g={};p[0]&65536&&(g.audioData=m[16]),p[0]&1&&(g.width=m[0]/2),p[0]&4194304&&(g.height=m[22]/2),i.$set(g);const w={};p[0]&131072&&(w.audioData=m[17]),p[0]&1&&(w.width=m[0]/2),p[0]&4194304&&(w.height=m[22]/2),o.$set(w);const b={};p[0]&32768&&(b.audioData=m[15]),p[0]&1&&(b.width=m[0]),p[0]&4194304&&(b.height=m[22]),h.$set(b)},i(m){d||(X(i.$$.fragment,m),X(o.$$.fragment,m),X(h.$$.fragment,m),d=!0)},o(m){ie(i.$$.fragment,m),ie(o.$$.fragment,m),ie(h.$$.fragment,m),d=!1},d(m){m&&(Z(t),Z(n),Z(r),Z(f)),Me(i),Me(o),Me(h,m)}}}function t1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new Fo({props:{pattern:e[20],width:e[0]/2,height:e[22]*.7}}),o=new Fo({props:{pattern:e[21],width:e[0]/2,height:e[22]*.7}}),h=new Fo({props:{pattern:e[19],width:e[0],height:e[22]}}),{c(){t=T("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Brighter bars show smaller gaps (early),
            darker bars show wider gaps (late).`,n=O(),r=T("div"),Se(i.$$.fragment),a=O(),Se(o.$$.fragment),u=O(),s=T("div"),s.textContent="Example for early",l=O(),c=T("div"),c.textContent="Example for late",f=O(),Se(h.$$.fragment),N(t,"class","svelte-rz4e1l"),N(s,"class","svelte-rz4e1l"),N(c,"class","svelte-rz4e1l"),N(r,"class","vis-example svelte-rz4e1l")},m(m,p){K(m,t,p),K(m,n,p),K(m,r,p),_e(i,r,null),P(r,a),_e(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),K(m,f,p),_e(h,m,p),d=!0},p(m,p){const g={};p[0]&1048576&&(g.pattern=m[20]),p[0]&1&&(g.width=m[0]/2),p[0]&4194304&&(g.height=m[22]*.7),i.$set(g);const w={};p[0]&2097152&&(w.pattern=m[21]),p[0]&1&&(w.width=m[0]/2),p[0]&4194304&&(w.height=m[22]*.7),o.$set(w);const b={};p[0]&524288&&(b.pattern=m[19]),p[0]&1&&(b.width=m[0]),p[0]&4194304&&(b.height=m[22]),h.$set(b)},i(m){d||(X(i.$$.fragment,m),X(o.$$.fragment,m),X(h.$$.fragment,m),d=!0)},o(m){ie(i.$$.fragment,m),ie(o.$$.fragment,m),ie(h.$$.fragment,m),d=!1},d(m){m&&(Z(t),Z(n),Z(r),Z(f)),Me(i),Me(o),Me(h,m)}}}function n1(e){let t,n,r,i,a,o,u;return{c(){t=T("div"),n=Ce(`Almost done!
      `),r=T("p"),r.textContent="Do you have any final feedback/comments?",i=O(),a=T("textarea"),N(r,"class","svelte-rz4e1l")},m(s,l){K(s,t,l),P(t,n),P(t,r),P(t,i),P(t,a),at(a,e[8]),o||(u=Qe(a,"input",e[30]),o=!0)},p(s,l){l[0]&256&&at(a,s[8])},d(s){s&&Z(t),o=!1,u()}}}function r1(e){let t,n,r;return{c(){t=T("div"),t.textContent="Thanks for participating!",n=O(),r=T("a"),r.textContent="click here to get your compensation",N(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){K(i,t,a),K(i,n,a),K(i,r,a)},d(i){i&&(Z(t),Z(n),Z(r))}}}function i1(e){let t,n,r;return{c(){t=T("button"),t.textContent="next step",N(t,"class","next-btn svelte-rz4e1l")},m(i,a){K(i,t,a),n||(r=Qe(t,"click",e[23]),n=!0)},p:se,d(i){i&&Z(t),n=!1,r()}}}function Wk(e){let t,n,r,i,a,o,u,s,l,c,f=e[2]==="consent"&&Y0(),h=e[2]==="start1"&&j0(e),d=e[2]==="start2"&&X0(e),m=e[2]==="start3"&&Z0(e),p=e[2]==="demo"&&K0(e),g=e[2]==="tests"&&Q0(e),w=e[2]==="feedback"&&n1(e),b=e[2]==="done"&&r1(),v=!e[11]&&e[2]!=="done"&&i1(e);return{c(){t=T("main"),f&&f.c(),n=O(),h&&h.c(),r=O(),d&&d.c(),i=O(),m&&m.c(),a=O(),p&&p.c(),o=O(),g&&g.c(),u=O(),w&&w.c(),s=O(),b&&b.c(),l=O(),v&&v.c(),N(t,"class","svelte-rz4e1l")},m(y,_){K(y,t,_),f&&f.m(t,null),P(t,n),h&&h.m(t,null),P(t,r),d&&d.m(t,null),P(t,i),m&&m.m(t,null),P(t,a),p&&p.m(t,null),P(t,o),g&&g.m(t,null),P(t,u),w&&w.m(t,null),P(t,s),b&&b.m(t,null),P(t,l),v&&v.m(t,null),c=!0},p(y,_){y[2]==="consent"?f||(f=Y0(),f.c(),f.m(t,n)):f&&(f.d(1),f=null),y[2]==="start1"?h?(h.p(y,_),_[0]&4&&X(h,1)):(h=j0(y),h.c(),X(h,1),h.m(t,r)):h&&(Xt(),ie(h,1,1,()=>{h=null}),Zt()),y[2]==="start2"?d?d.p(y,_):(d=X0(y),d.c(),d.m(t,i)):d&&(d.d(1),d=null),y[2]==="start3"?m?(m.p(y,_),_[0]&4&&X(m,1)):(m=Z0(y),m.c(),X(m,1),m.m(t,a)):m&&(Xt(),ie(m,1,1,()=>{m=null}),Zt()),y[2]==="demo"?p?p.p(y,_):(p=K0(y),p.c(),p.m(t,o)):p&&(p.d(1),p=null),y[2]==="tests"?g?(g.p(y,_),_[0]&4&&X(g,1)):(g=Q0(y),g.c(),X(g,1),g.m(t,u)):g&&(Xt(),ie(g,1,1,()=>{g=null}),Zt()),y[2]==="feedback"?w?w.p(y,_):(w=n1(y),w.c(),w.m(t,s)):w&&(w.d(1),w=null),y[2]==="done"?b||(b=r1(),b.c(),b.m(t,l)):b&&(b.d(1),b=null),!y[11]&&y[2]!=="done"?v?v.p(y,_):(v=i1(y),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(y){c||(X(h),X(m),X(g),c=!0)},o(y){ie(h),ie(m),ie(g),c=!1},d(y){y&&Z(t),f&&f.d(),h&&h.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),w&&w.d(),b&&b.d(),v&&v.d()}}}const vo=!1,Vk="/store",Yk=120,_o=.1,a1=.025,o1=4;function jk(e,t,n){let r,i=Lo(window,"PROLIFIC_PID"),a=Lo(window,"STUDY_ID"),o=Lo(window,"SESSION_ID"),u=["audio","waveform","color"].map(re=>({encoding:re}));console.log({tests:u});let s="consent",l=0,c,f="",h="",d=0,m=0,p="",g=0,w,b={},v=[],y,_,M=!1,x=!1,E=!1,S="tick",k=600,A=[],L=0;const G=[];va(()=>{document.querySelector("html").addEventListener("keyup",U)});const F=()=>{_=new Le({ratio:{firstVal:_o,down:2,up:1,stepSizeDown:a1,stepSizeUp:a1*.5488,limits:[0,_o],direction:-1,reversalLimit:5,verbosity:0}}),_.init()};function C(){s==="consent"?n(2,s="start1"):s==="start1"?n(2,s="start2"):s==="start2"?n(2,s="start3"):s==="start3"?(n(1,u=a9(u)),n(2,s="demo")):s==="demo"?f==""||h==""?alert("please fill the form first"):(n(2,s="tests"),n(3,l=0)):s==="tests"?l<u.length?q():n(2,s="feedback"):s==="feedback"&&($(),n(2,s="done"))}function q(){F(),n(13,S=u[l].encoding);const re=xe(-_o),we=xe(_o);n(20,j=re.noteTimes),n(21,D=we.noteTimes),n(16,V=re.renderedAudio),n(17,Y=we.renderedAudio),n(9,g=0),w=0,y=0,n(10,M=!0),A=[],v=[],c=new Date,ee()}function ee(){console.log("Starting trial "+g),b={},n(11,x=!0),te()}function te(){let we=_.getLast("ratio");we=Math.random()<.5?we:-we,b.deviation=we;const Pe=xe(we);n(19,H=Pe.noteTimes),Pe.noteTimesSeparate,n(18,B=Pe.sampleRate),n(15,ae=Pe.renderedAudio),console.log("generated pattern"),n(12,E=!0),window.setTimeout(()=>{n(12,E=!1),b.startTime=new Date},1e3)}function Q(re){if(!x)return;n(11,x=!1),b.decisionChoice=re,b.errorCode=0,b.timeTaken=(new Date-b.startTime)/1e3;const we=y;(b.decisionChoice==0&&b.deviation<0||b.decisionChoice==1&&b.deviation>0)&&b.errorCode==0&&y++,b.errorCode==0&&(_.next(we!=y),v[v.length]=b),b.errorCode==0&&w++,n(9,g++,g),_.reversalLimitReached("ratio")?z():ee()}function z(){n(10,M=!1),n(11,x=!1),A=[],L=_.getFinalVal("ratio");for(let we=0;we<v.length;we++)A[we]=v[we].deviation;console.log(A);const re=new Date;G.push({encoding:S,final:L,data:A,score:y,testNumber:l,trialCount:g+1,trials:v,validTrialCount:w+1,testTimeSeconds:(re-c)/1e3}),n(3,l++,l)}function U(re){if(!E)switch(re.key){case"ArrowLeft":x&&Q(0);break;case"ArrowRight":x&&Q(1);break;case"PageDown":!x&&s!=="done"&&C()}}function $(){const re={studyStep:s,demographics:{partID:i,studyID:a,sessionID:o,partEduation:f,partMusicInstr:h,partMusicInstrYears:d,partVisExperienceYears:m,partFeedback:p,visWidth:k},date:new Date().toISOString(),tests:G};console.log("saving data",re);const we=JSON.stringify(re,void 0,2);fetch(Vk,{method:"POST",headers:{"Content-Type":"application/json"},body:we}).then(Pe=>{console.log("Data saved:",Pe)})}let I=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}],J=Ry(Yk);const ue=o1*J;let ae=null,V=null,Y=null,B,H=[],j=[],D=[];(async()=>{n(14,I=await Promise.all(I.map(async re=>({...re,times:re.beats.map(we=>J*(we-1)),timesOriginal:re.beats.map(we=>J*(we-1)),audioBuffer:await ng(re.sample)}))))})();const ne=(re=0)=>{if(re===0)return I;const we=he([I]),Pe=we.filter($e=>$e.instrument==="hihat")[0];we.filter($e=>$e.instrument==="snare")[0];const ke=we.filter($e=>$e.instrument==="bass")[0];return ke.times[1]=ke.timesOriginal[1]+re,Pe.times[4]=Pe.timesOriginal[4]+re,we},he=re=>{const we=re[0].map(Pe=>({...Pe,beats:[...Pe.beats],times:[...Pe.times],timesOriginal:[...Pe.timesOriginal]}));for(let Pe=1;Pe<re.length;Pe++){const ke=re[Pe];for(const $e of ke){const ve=we.filter(Xe=>Xe.instrument===$e.instrument)[0];ve.beats=[...ve.beats,...$e.beats.map(Xe=>Xe+Pe*o1)],ve.times=[...ve.times,...$e.times.map(Xe=>Xe+Pe*ue)],ve.timesOriginal=[...ve.timesOriginal,...$e.timesOriginal.map(Xe=>Xe+Pe*ue)]}}return we},xe=re=>{if(!I[0].audioBuffer)return;const Pe=[ne(re)],ke=he(Pe),$e=ke.map(oe=>oe.times).flat().sort(),ve=ke.map(oe=>oe.times.map(ye=>({time:ye,instr:oe.instrument}))).flat(1/0).sort((oe,ye)=>{oe.time-ye.time}),Xe=ke[0].audioBuffer.sampleRate,R=Zl(ke,ue*Pe.length+.1,Xe);return{noteTimes:$e,noteTimesSeparate:ve,sampleRate:Xe,renderedAudio:R}},Ue=()=>n(0,k*=1.05),nt=()=>n(0,k*=.95);function Be(){f=c1(this),n(4,f)}function Ht(){h=this.value,n(5,h)}function Ne(){d=Kr(this.value),n(6,d)}function Br(){m=Kr(this.value),n(7,m)}function Wt(){p=this.value,n(8,p)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(22,r=k/6)},[k,u,s,l,f,h,d,m,p,g,M,x,E,S,I,ae,V,Y,B,H,j,D,r,C,Ue,nt,Be,Ht,Ne,Br,Wt]}class Xk extends ze{constructor(t){super(),Ge(this,t,jk,Wk,qe,{},null,[-1,-1])}}function u1(e){let t,n,r,i,a,o,u,s;return{c(){t=T("div"),n=T("button"),n.textContent="Playground",r=O(),i=T("button"),i.textContent="Study",a=O(),o=T("button"),o.textContent="Analysis"},m(l,c){K(l,t,c),P(t,n),P(t,r),P(t,i),P(t,a),P(t,o),u||(s=[Qe(n,"click",e[1]),Qe(i,"click",e[2]),Qe(o,"click",e[3])],u=!0)},p:se,d(l){l&&Z(t),u=!1,gn(s)}}}function Zk(e){let t,n;return t=new Ik({}),{c(){Se(t.$$.fragment)},m(r,i){_e(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ie(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function Kk(e){let t,n;return t=new Xk({}),{c(){Se(t.$$.fragment)},m(r,i){_e(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ie(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function Qk(e){let t,n;return t=new ak({}),{c(){Se(t.$$.fragment)},m(r,i){_e(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ie(t.$$.fragment,r),n=!1},d(r){Me(t,r)}}}function Jk(e){let t,n,r,i,a,o,u,s=e[0]!=="study_drums"&&u1(e);const l=[Qk,Kk,Zk],c=[];function f(h,d){return h[0]==="playground"?0:h[0]==="study_drums"?1:h[0]==="analysis"?2:-1}return~(a=f(e))&&(o=c[a]=l[a](e)),{c(){t=T("main"),n=T("h1"),n.textContent="Rhythm Error Sensitivity Study",r=O(),s&&s.c(),i=O(),o&&o.c()},m(h,d){K(h,t,d),P(t,n),P(t,r),s&&s.m(t,null),P(t,i),~a&&c[a].m(t,null),u=!0},p(h,[d]){h[0]!=="study_drums"?s?s.p(h,d):(s=u1(h),s.c(),s.m(t,i)):s&&(s.d(1),s=null);let m=a;a=f(h),a!==m&&(o&&(Xt(),ie(c[m],1,1,()=>{c[m]=null}),Zt()),~a?(o=c[a],o||(o=c[a]=l[a](h),o.c()),X(o,1),o.m(t,null)):o=null)},i(h){u||(X(o),u=!0)},o(h){ie(o),u=!1},d(h){h&&Z(t),s&&s.d(),~a&&c[a].d()}}}function e$(e,t,n){let r=Lo(window,"p")??"study_drums";return r="study_drums",[r,()=>n(0,r="playground"),()=>n(0,r="study_drums"),()=>n(0,r="analysis")]}class t$ extends ze{constructor(t){super(),Ge(this,t,e$,Jk,qe,{})}}new t$({target:document.getElementById("app")});export{tg as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-DvsFwHk4.js","assets/index-CEyQG3by.js","assets/browser-VxG-yQH_.js","assets/index-DQG9u_ur.js","assets/index-GjRrMrAp.js","assets/index-Dp-YP1Pg.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

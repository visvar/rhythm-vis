var Qy=Object.defineProperty;var Jy=(e,t,n)=>t in e?Qy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ms=(e,t,n)=>(Jy(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function ve(){}function a1(e){return e()}function Hf(){return Object.create(null)}function Ln(e){e.forEach(a1)}function o1(e){return typeof e=="function"}function Ze(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Ka;function e3(e,t){return e===t?!0:(Ka||(Ka=document.createElement("a")),Ka.href=t,e===Ka.href)}function t3(e){return Object.keys(e).length===0}function P(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode&&e.parentNode.removeChild(e)}function or(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(e){return document.createElement(e)}function Wf(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function we(e){return document.createTextNode(e)}function O(){return we(" ")}function vc(){return we("")}function ft(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function B(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Xr(e){return e===""?null:+e}function n3(e){return Array.from(e.childNodes)}function yt(e,t){t=""+t,e.data!==t&&(e.data=t)}function rt(e,t){e.value=t??""}function Oe(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Ro(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function u1(e){const t=e.querySelector(":checked");return t&&t.__value}let Ji;function Vi(e){Ji=e}function _c(){if(!Ji)throw new Error("Function called outside component initialization");return Ji}function Ma(e){_c().$$.on_mount.push(e)}function Kt(e){_c().$$.after_update.push(e)}function r3(e){_c().$$.on_destroy.push(e)}const Or=[],ut=[];let zr=[];const Vf=[],i3=Promise.resolve();let dl=!1;function a3(){dl||(dl=!0,i3.then(s1))}function ea(e){zr.push(e)}const xs=new Set;let Nr=0;function s1(){if(Nr!==0)return;const e=Ji;do{try{for(;Nr<Or.length;){const t=Or[Nr];Nr++,Vi(t),o3(t.$$)}}catch(t){throw Or.length=0,Nr=0,t}for(Vi(null),Or.length=0,Nr=0;ut.length;)ut.pop()();for(let t=0;t<zr.length;t+=1){const n=zr[t];xs.has(n)||(xs.add(n),n())}zr.length=0}while(Or.length);for(;Vf.length;)Vf.pop()();dl=!1,xs.clear(),Vi(e)}function o3(e){if(e.fragment!==null){e.update(),Ln(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ea)}}function u3(e){const t=[],n=[];zr.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),zr=t}const Mo=new Set;let sr;function ln(){sr={r:0,c:[],p:sr}}function cn(){sr.r||Ln(sr.c),sr=sr.p}function Z(e,t){e&&e.i&&(Mo.delete(e),e.i(t))}function ae(e,t,n,r){if(e&&e.o){if(Mo.has(e))return;Mo.add(e),sr.c.push(()=>{Mo.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Mt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ee(e){e&&e.c()}function Pe(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),ea(()=>{const a=e.$$.on_mount.map(a1).filter(o1);e.$$.on_destroy?e.$$.on_destroy.push(...a):Ln(a),e.$$.on_mount=[]}),i.forEach(ea)}function Ae(e,t){const n=e.$$;n.fragment!==null&&(u3(n.after_update),Ln(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function s3(e,t){e.$$.dirty[0]===-1&&(Or.push(e),a3(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ke(e,t,n,r,i,a,o=null,u=[-1]){const s=Ji;Vi(e);const l=e.$$={fragment:null,ctx:[],props:a,update:ve,not_equal:i,bound:Hf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Hf(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,h,...d)=>{const m=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),c&&s3(e,f)),h}):[],l.update(),c=!0,Ln(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=n3(t.target);l.fragment&&l.fragment.l(f),f.forEach(ee)}else l.fragment&&l.fragment.c();t.intro&&Z(e.$$.fragment),Pe(e,t.target,t.anchor),s1()}Vi(s)}class Qe{constructor(){Ms(this,"$$");Ms(this,"$$set")}$destroy(){Ae(this,1),this.$destroy=ve}$on(t,n){if(!o1(n))return ve;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!t3(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const l3="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(l3);function wt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xa(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cu(e){let t,n,r;e.length!==2?(t=wt,n=(u,s)=>wt(e(u),s),r=(u,s)=>e(u)-s):(t=e===wt||e===xa?e:c3,n=e,r=e);function i(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<0?l=f+1:c=f}while(l<c)}return l}function a(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<=0?l=f+1:c=f}while(l<c)}return l}function o(u,s,l=0,c=u.length){const f=i(u,s,l,c-1);return f>l&&r(u[f-1],s)>-r(u[f],s)?f-1:f}return{left:i,center:o,right:a}}function c3(){return 0}function l1(e){return e===null?NaN:+e}function*f3(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const h3=Cu(wt),Tu=h3.right;Cu(l1).center;function Mc(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function d3(e){return e.length|0}function m3(e){return!(e>0)}function p3(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function b3(e){return t=>e(...t)}function g3(...e){const t=typeof e[e.length-1]=="function"&&b3(e.pop());e=e.map(p3);const n=e.map(d3),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(m3))return a;for(;;){a.push(i.map((u,s)=>e[s][u]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function y3(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function xc(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let u of e)(u=t(u,++o,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,a+=r*(u-i))}if(n>1)return a/(n-1)}function ku(e,t){const n=xc(e,t);return n&&Math.sqrt(n)}function Dt(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class pr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,u=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);u&&(n[r++]=u),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class br extends Map{constructor(t,n=h1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ml(this,t))}has(t){return super.has(ml(this,t))}set(t,n){return super.set(c1(this,t),n)}delete(t){return super.delete(f1(this,t))}}class $u extends Set{constructor(t,n=h1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(ml(this,t))}add(t){return super.add(c1(this,t))}delete(t){return super.delete(f1(this,t))}}function ml({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function c1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function f1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function h1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Oo(e){return e}function Du(e,...t){return Nu(e,Oo,Oo,t)}function lr(e,...t){return Nu(e,Array.from,Oo,t)}function Hr(e,t,...n){return Nu(e,Oo,t,n)}function w3(e,t,...n){return Nu(e,Array.from,t,n)}function Nu(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const u=new br,s=r[o++];let l=-1;for(const c of a){const f=s(c,++l,a),h=u.get(f);h?h.push(c):u.set(f,[c])}for(const[c,f]of u)u.set(c,i(f,o));return t(u)}(e,0)}function v3(e,t){return Array.from(t,n=>e[n])}function ta(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const u=qo(o[i],o[a]);if(u)return u}})):(n=e.map(n),r.sort((i,a)=>qo(n[i],n[a]))),v3(e,r)}return e.sort(d1(n))}function d1(e=wt){if(e===wt)return qo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Pc(e,t,n){return(t.length!==2?ta(Hr(e,t,n),([r,i],[a,o])=>wt(i,o)||wt(r,a)):ta(Du(e,n),([r,i],[a,o])=>t(i,o)||wt(r,a))).map(([r])=>r)}const _3=Math.sqrt(50),M3=Math.sqrt(10),x3=Math.sqrt(2);function Go(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=_3?10:a>=M3?5:a>=x3?2:1;let u,s,l;return i<0?(l=Math.pow(10,-i)/o,u=Math.round(e*l),s=Math.round(t*l),u/l<e&&++u,s/l>t&&--s,l=-l):(l=Math.pow(10,i)*o,u=Math.round(e/l),s=Math.round(t/l),u*l<e&&++u,s*l>t&&--s),s<u&&.5<=n&&n<2?Go(e,t,n*2):[u,s,l]}function na(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Go(t,e,n):Go(e,t,n);if(!(a>=i))return[];const u=a-i+1,s=new Array(u);if(r)if(o<0)for(let l=0;l<u;++l)s[l]=(a-l)/-o;else for(let l=0;l<u;++l)s[l]=(a-l)*o;else if(o<0)for(let l=0;l<u;++l)s[l]=(i+l)/-o;else for(let l=0;l<u;++l)s[l]=(i+l)*o;return s}function Uo(e,t,n){return t=+t,e=+e,n=+n,Go(e,t,n)[2]}function pl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Uo(t,e,n):Uo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function P3(e){return Math.max(1,Math.ceil(Math.log(Mc(e))/Math.LN2)+1)}function It(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function A3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function kn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function S3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function m1(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?qo:d1(i);r>n;){if(r-n>600){const s=r-n+1,l=t-n+1,c=Math.log(s),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(s-f)/s)*(l-s/2<0?-1:1),d=Math.max(n,Math.floor(t-l*f/s+h)),m=Math.min(r,Math.floor(t+(s-l)*f/s+h));m1(e,t,d,m,i)}const a=e[t];let o=n,u=r;for(_i(e,n,t),i(e[r],a)>0&&_i(e,n,r);o<u;){for(_i(e,o,u),++o,--u;i(e[o],a)<0;)++o;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?_i(e,n,u):(++u,_i(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function _i(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function p1(e,t=wt){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?wt(o,i)>0:wt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Zr(e,t,n){if(e=Float64Array.from(f3(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return kn(e);if(t>=1)return It(e);var r,i=(r-1)*t,a=Math.floor(i),o=It(m1(e,a).subarray(0,a+1)),u=kn(e.subarray(a+1));return o+(u-o)*(i-a)}}function E3(e,t,n=l1){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function C3(e,t,n){const r=Mc(e),i=Zr(e,.75)-Zr(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function b1(e,t,n){const r=Mc(e),i=ku(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Fu(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function bl(e,t){return Zr(e,.5,t)}function*T3(e){for(const t of e)yield*t}function g1(e){return Array.from(T3(e))}function k3(e,t){const n=new br;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function $3(e,t=D3){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function D3(e,t){return[e,t]}function gl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Yn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function zo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function N3(e){return e}var Ps=1,As=2,yl=3,Qa=4,Yf=1e-6;function F3(e){return"translate("+e+",0)"}function B3(e){return"translate(0,"+e+")"}function L3(e){return t=>+e(t)}function I3(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function R3(){return!this.__axis}function O3(e,t){var n=[],r=null,i=null,a=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===Ps||e===Qa?-1:1,c=e===Qa||e===As?"x":"y",f=e===Ps||e===yl?F3:B3;function h(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):N3),g=Math.max(a,0)+u,y=t.range(),b=+y[0]+s,v=+y[y.length-1]+s,w=(t.bandwidth?I3:L3)(t.copy(),s),M=d.selection?d.selection():d,_=M.selectAll(".domain").data([null]),x=M.selectAll(".tick").data(m,t).order(),E=x.exit(),$=x.enter().append("g").attr("class","tick"),N=x.select("line"),A=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge($),N=N.merge($.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),A=A.merge($.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===Ps?"0em":e===yl?"0.71em":"0.32em")),d!==M&&(_=_.transition(d),x=x.transition(d),N=N.transition(d),A=A.transition(d),E=E.transition(d).attr("opacity",Yf).attr("transform",function(L){return isFinite(L=w(L))?f(L+s):this.getAttribute("transform")}),$.attr("opacity",Yf).attr("transform",function(L){var R=this.parentNode.__axis;return f((R&&isFinite(R=R(L))?R:w(L))+s)})),E.remove(),_.attr("d",e===Qa||e===As?o?"M"+l*o+","+b+"H"+s+"V"+v+"H"+l*o:"M"+s+","+b+"V"+v:o?"M"+b+","+l*o+"V"+s+"H"+v+"V"+l*o:"M"+b+","+s+"H"+v),x.attr("opacity",1).attr("transform",function(L){return f(w(L)+s)}),N.attr(c+"2",l*a),A.attr(c,l*g).text(p),M.filter(R3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===As?"start":e===Qa?"end":"middle"),M.each(function(){this.__axis=w})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(u=+d,h):u},h.offset=function(d){return arguments.length?(s=+d,h):s},h}function q3(e){return O3(yl,e)}var G3={value:()=>{}};function y1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new xo(n)}function xo(e){this._=e}function U3(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}xo.prototype=y1.prototype={constructor:xo,on:function(e,t){var n=this._,r=U3(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=z3(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=jf(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jf(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new xo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function z3(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=G3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var wl="http://www.w3.org/1999/xhtml";const Kr={svg:"http://www.w3.org/2000/svg",xhtml:wl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Kr.hasOwnProperty(t)?{space:Kr[t],local:e}:e}function H3(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===wl&&t.documentElement.namespaceURI===wl?t.createElement(e):t.createElementNS(n,e)}}function W3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lu(e){var t=Bu(e);return(t.local?W3:H3)(t)}function V3(){}function Ac(e){return e==null?V3:function(){return this.querySelector(e)}}function Y3(e){typeof e!="function"&&(e=Ac(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Pt(r,this._parents)}function j3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function X3(){return[]}function w1(e){return e==null?X3:function(){return this.querySelectorAll(e)}}function Z3(e){return function(){return j3(e.apply(this,arguments))}}function K3(e){typeof e=="function"?e=Z3(e):e=w1(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Pt(r,i)}function v1(e){return function(){return this.matches(e)}}function _1(e){return function(t){return t.matches(e)}}var Q3=Array.prototype.find;function J3(e){return function(){return Q3.call(this.children,e)}}function ew(){return this.firstElementChild}function tw(e){return this.select(e==null?ew:J3(typeof e=="function"?e:_1(e)))}var nw=Array.prototype.filter;function rw(){return Array.from(this.children)}function iw(e){return function(){return nw.call(this.children,e)}}function aw(e){return this.selectAll(e==null?rw:iw(typeof e=="function"?e:_1(e)))}function ow(e){typeof e!="function"&&(e=v1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Pt(r,this._parents)}function M1(e){return new Array(e.length)}function uw(){return new Pt(this._enter||this._groups.map(M1),this._parents)}function Ho(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ho.prototype={constructor:Ho,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sw(e){return function(){return e}}function lw(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new Ho(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function cw(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new Ho(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function fw(e){return e.__data__}function hw(e,t){if(!arguments.length)return Array.from(this,fw);var n=t?cw:lw,r=this._parents,i=this._groups;typeof e!="function"&&(e=sw(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=dw(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),y=s[l]=new Array(h);n(c,f,p,g,y,d,t);for(var b=0,v=0,w,M;b<m;++b)if(w=p[b]){for(b>=v&&(v=b+1);!(M=g[v])&&++v<m;);w._next=M||null}}return o=new Pt(o,r),o._enter=u,o._exit=s,o}function dw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mw(){return new Pt(this._exit||this._groups.map(M1),this._parents)}function pw(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function bw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var l=n[s],c=r[s],f=l.length,h=u[s]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;s<i;++s)u[s]=n[s];return new Pt(u,this._parents)}function gw(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function yw(e){e||(e=ww);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Pt(i,this._parents).order()}function ww(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _w(){return Array.from(this)}function Mw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function xw(){let e=0;for(const t of this)++e;return e}function Pw(){return!this.node()}function Aw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function Sw(e){return function(){this.removeAttribute(e)}}function Ew(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cw(e,t){return function(){this.setAttribute(e,t)}}function Tw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function kw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function $w(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dw(e,t){var n=Bu(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ew:Sw:typeof t=="function"?n.local?$w:kw:n.local?Tw:Cw)(n,t))}function x1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Nw(e){return function(){this.style.removeProperty(e)}}function Fw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Bw(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Lw(e,t,n){return arguments.length>1?this.each((t==null?Nw:typeof t=="function"?Bw:Fw)(e,t,n??"")):Qr(this.node(),e)}function Qr(e,t){return e.style.getPropertyValue(t)||x1(e).getComputedStyle(e,null).getPropertyValue(t)}function Iw(e){return function(){delete this[e]}}function Rw(e,t){return function(){this[e]=t}}function Ow(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function qw(e,t){return arguments.length>1?this.each((t==null?Iw:typeof t=="function"?Ow:Rw)(e,t)):this.node()[e]}function P1(e){return e.trim().split(/^|\s+/)}function Sc(e){return e.classList||new A1(e)}function A1(e){this._node=e,this._names=P1(e.getAttribute("class")||"")}A1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function S1(e,t){for(var n=Sc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function E1(e,t){for(var n=Sc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Gw(e){return function(){S1(this,e)}}function Uw(e){return function(){E1(this,e)}}function zw(e,t){return function(){(t.apply(this,arguments)?S1:E1)(this,e)}}function Hw(e,t){var n=P1(e+"");if(arguments.length<2){for(var r=Sc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?zw:t?Gw:Uw)(n,t))}function Ww(){this.textContent=""}function Vw(e){return function(){this.textContent=e}}function Yw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jw(e){return arguments.length?this.each(e==null?Ww:(typeof e=="function"?Yw:Vw)(e)):this.node().textContent}function Xw(){this.innerHTML=""}function Zw(e){return function(){this.innerHTML=e}}function Kw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Qw(e){return arguments.length?this.each(e==null?Xw:(typeof e=="function"?Kw:Zw)(e)):this.node().innerHTML}function Jw(){this.nextSibling&&this.parentNode.appendChild(this)}function ev(){return this.each(Jw)}function tv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nv(){return this.each(tv)}function rv(e){var t=typeof e=="function"?e:Lu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iv(){return null}function av(e,t){var n=typeof e=="function"?e:Lu(e),r=t==null?iv:typeof t=="function"?t:Ac(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ov(){var e=this.parentNode;e&&e.removeChild(this)}function uv(){return this.each(ov)}function sv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cv(e){return this.select(e?lv:sv)}function fv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hv(e){return function(t){e.call(this,t,this.__data__)}}function dv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function mv(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function pv(e,t,n){return function(){var r=this.__on,i,a=hv(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function bv(e,t,n){var r=dv(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?pv:mv,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function C1(e,t,n){var r=x1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gv(e,t){return function(){return C1(this,e,t)}}function yv(e,t){return function(){return C1(this,e,t.apply(this,arguments))}}function wv(e,t){return this.each((typeof t=="function"?yv:gv)(e,t))}function*vv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var T1=[null];function Pt(e,t){this._groups=e,this._parents=t}function Pa(){return new Pt([[document.documentElement]],T1)}function _v(){return this}Pt.prototype=Pa.prototype={constructor:Pt,select:Y3,selectAll:K3,selectChild:tw,selectChildren:aw,filter:ow,data:hw,enter:uw,exit:mw,join:pw,merge:bw,selection:_v,order:gw,sort:yw,call:vw,nodes:_w,node:Mw,size:xw,empty:Pw,each:Aw,attr:Dw,style:Lw,property:qw,classed:Hw,text:jw,html:Qw,raise:ev,lower:nv,append:rv,insert:av,remove:uv,clone:cv,datum:fv,on:bv,dispatch:wv,[Symbol.iterator]:vv};function Yi(e){return typeof e=="string"?new Pt([[document.querySelector(e)]],[document.documentElement]):new Pt([[e]],T1)}function Mv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xv(e,t){if(e=Mv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function mi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Aa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qn(){}var gr=.7,Jr=1/gr,Wr="\\s*([+-]?\\d+)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pv=/^#([0-9a-f]{3,8})$/,Av=new RegExp(`^rgb\\(${Wr},${Wr},${Wr}\\)$`),Sv=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),Ev=new RegExp(`^rgba\\(${Wr},${Wr},${Wr},${ra}\\)$`),Cv=new RegExp(`^rgba\\(${fn},${fn},${fn},${ra}\\)$`),Tv=new RegExp(`^hsl\\(${ra},${fn},${fn}\\)$`),kv=new RegExp(`^hsla\\(${ra},${fn},${fn},${ra}\\)$`),Xf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mi(Qn,yr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Zf,formatHex:Zf,formatHex8:$v,formatHsl:Dv,formatRgb:Kf,toString:Kf});function Zf(){return this.rgb().formatHex()}function $v(){return this.rgb().formatHex8()}function Dv(){return k1(this).formatHsl()}function Kf(){return this.rgb().formatRgb()}function yr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qf(t):n===3?new je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ja(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ja(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Av.exec(e))?new je(t[1],t[2],t[3],1):(t=Sv.exec(e))?new je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ev.exec(e))?Ja(t[1],t[2],t[3],t[4]):(t=Cv.exec(e))?Ja(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Tv.exec(e))?th(t[1],t[2]/100,t[3]/100,1):(t=kv.exec(e))?th(t[1],t[2]/100,t[3]/100,t[4]):Xf.hasOwnProperty(e)?Qf(Xf[e]):e==="transparent"?new je(NaN,NaN,NaN,0):null}function Qf(e){return new je(e>>16&255,e>>8&255,e&255,1)}function Ja(e,t,n,r){return r<=0&&(e=t=n=NaN),new je(e,t,n,r)}function Ec(e){return e instanceof Qn||(e=yr(e)),e?(e=e.rgb(),new je(e.r,e.g,e.b,e.opacity)):new je}function jn(e,t,n,r){return arguments.length===1?Ec(e):new je(e,t,n,r??1)}function je(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}mi(je,jn,Aa(Qn,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new je(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gr:Math.pow(gr,e),new je(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new je(hr(this.r),hr(this.g),hr(this.b),Wo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jf,formatHex:Jf,formatHex8:Nv,formatRgb:eh,toString:eh}));function Jf(){return`#${cr(this.r)}${cr(this.g)}${cr(this.b)}`}function Nv(){return`#${cr(this.r)}${cr(this.g)}${cr(this.b)}${cr((isNaN(this.opacity)?1:this.opacity)*255)}`}function eh(){const e=Wo(this.opacity);return`${e===1?"rgb(":"rgba("}${hr(this.r)}, ${hr(this.g)}, ${hr(this.b)}${e===1?")":`, ${e})`}`}function Wo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cr(e){return e=hr(e),(e<16?"0":"")+e.toString(16)}function th(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wt(e,t,n,r)}function k1(e){if(e instanceof Wt)return new Wt(e.h,e.s,e.l,e.opacity);if(e instanceof Qn||(e=yr(e)),!e)return new Wt;if(e instanceof Wt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new Wt(o,u,s,e.opacity)}function vl(e,t,n,r){return arguments.length===1?k1(e):new Wt(e,t,n,r??1)}function Wt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mi(Wt,vl,Aa(Qn,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new Wt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gr:Math.pow(gr,e),new Wt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new je(Ss(e>=240?e-240:e+120,i,r),Ss(e,i,r),Ss(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Wt(nh(this.h),eo(this.s),eo(this.l),Wo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wo(this.opacity);return`${e===1?"hsl(":"hsla("}${nh(this.h)}, ${eo(this.s)*100}%, ${eo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nh(e){return e=(e||0)%360,e<0?e+360:e}function eo(e){return Math.max(0,Math.min(1,e||0))}function Ss(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $1=Math.PI/180,D1=180/Math.PI,Vo=18,N1=.96422,F1=1,B1=.82521,L1=4/29,Vr=6/29,I1=3*Vr*Vr,Fv=Vr*Vr*Vr;function R1(e){if(e instanceof hn)return new hn(e.l,e.a,e.b,e.opacity);if(e instanceof En)return O1(e);e instanceof je||(e=Ec(e));var t=ks(e.r),n=ks(e.g),r=ks(e.b),i=Es((.2225045*t+.7168786*n+.0606169*r)/F1),a,o;return t===n&&n===r?a=o=i:(a=Es((.4360747*t+.3850649*n+.1430804*r)/N1),o=Es((.0139322*t+.0971045*n+.7141733*r)/B1)),new hn(116*i-16,500*(a-i),200*(i-o),e.opacity)}function _l(e,t,n,r){return arguments.length===1?R1(e):new hn(e,t,n,r??1)}function hn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}mi(hn,_l,Aa(Qn,{brighter(e){return new hn(this.l+Vo*(e??1),this.a,this.b,this.opacity)},darker(e){return new hn(this.l-Vo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=N1*Cs(t),e=F1*Cs(e),n=B1*Cs(n),new je(Ts(3.1338561*t-1.6168667*e-.4906146*n),Ts(-.9787684*t+1.9161415*e+.033454*n),Ts(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Es(e){return e>Fv?Math.pow(e,1/3):e/I1+L1}function Cs(e){return e>Vr?e*e*e:I1*(e-L1)}function Ts(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ks(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Bv(e){if(e instanceof En)return new En(e.h,e.c,e.l,e.opacity);if(e instanceof hn||(e=R1(e)),e.a===0&&e.b===0)return new En(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*D1;return new En(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ml(e,t,n,r){return arguments.length===1?Bv(e):new En(e,t,n,r??1)}function En(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function O1(e){if(isNaN(e.h))return new hn(e.l,0,0,e.opacity);var t=e.h*$1;return new hn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}mi(En,Ml,Aa(Qn,{brighter(e){return new En(this.h,this.c,this.l+Vo*(e??1),this.opacity)},darker(e){return new En(this.h,this.c,this.l-Vo*(e??1),this.opacity)},rgb(){return O1(this).rgb()}}));var q1=-.14861,Cc=1.78277,Tc=-.29227,Iu=-.90649,ia=1.97294,rh=ia*Iu,ih=ia*Cc,ah=Cc*Tc-Iu*q1;function Lv(e){if(e instanceof dr)return new dr(e.h,e.s,e.l,e.opacity);e instanceof je||(e=Ec(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ah*r+rh*t-ih*n)/(ah+rh-ih),a=r-i,o=(ia*(n-i)-Tc*a)/Iu,u=Math.sqrt(o*o+a*a)/(ia*i*(1-i)),s=u?Math.atan2(o,a)*D1-120:NaN;return new dr(s<0?s+360:s,u,i,e.opacity)}function mn(e,t,n,r){return arguments.length===1?Lv(e):new dr(e,t,n,r??1)}function dr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mi(dr,mn,Aa(Qn,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new dr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gr:Math.pow(gr,e),new dr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*$1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new je(255*(t+n*(q1*r+Cc*i)),255*(t+n*(Tc*r+Iu*i)),255*(t+n*(ia*r)),this.opacity)}}));function Iv(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function Rv(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return Iv((n-r/t)*t,o,i,a,u)}}const Ru=e=>()=>e;function G1(e,t){return function(n){return e+n*t}}function Ov(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function kc(e,t){var n=t-e;return n?G1(e,n>180||n<-180?n-360*Math.round(n/360):n):Ru(isNaN(e)?t:e)}function qv(e){return(e=+e)==1?ot:function(t,n){return n-t?Ov(t,n,e):Ru(isNaN(t)?n:t)}}function ot(e,t){var n=t-e;return n?G1(e,n):Ru(isNaN(e)?t:e)}const wr=function e(t){var n=qv(t);function r(i,a){var o=n((i=jn(i)).r,(a=jn(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=ot(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Gv(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,u;for(o=0;o<n;++o)u=jn(t[o]),r[o]=u.r||0,i[o]=u.g||0,a[o]=u.b||0;return r=e(r),i=e(i),a=e(a),u.opacity=1,function(s){return u.r=r(s),u.g=i(s),u.b=a(s),u+""}}}var Uv=Gv(Rv);function zv(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Hv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Wv(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Sa(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function Vv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function at(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Yv(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Sa(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var xl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$s=new RegExp(xl.source,"g");function jv(e){return function(){return e}}function Xv(e){return function(t){return e(t)+""}}function U1(e,t){var n=xl.lastIndex=$s.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=xl.exec(e))&&(i=$s.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:at(r,i)})),n=$s.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?Xv(s[0].x):jv(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}function Sa(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ru(t):(n==="number"?at:n==="string"?(r=yr(t))?(t=r,wr):U1:t instanceof yr?wr:t instanceof Date?Vv:Hv(t)?zv:Array.isArray(t)?Wv:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yv:at)(e,t)}function $c(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var oh=180/Math.PI,Pl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function z1(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*oh,skewX:Math.atan(s)*oh,scaleX:o,scaleY:u}}var to;function Zv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pl:z1(t.a,t.b,t.c,t.d,t.e,t.f)}function Kv(e){return e==null||(to||(to=document.createElementNS("http://www.w3.org/2000/svg","g")),to.setAttribute("transform",e),!(e=to.transform.baseVal.consolidate()))?Pl:(e=e.matrix,z1(e.a,e.b,e.c,e.d,e.e,e.f))}function H1(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:at(l,f)},{i:p-2,x:at(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:at(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:at(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:at(l,f)},{i:p-2,x:at(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var Qv=H1(Zv,"px, ","px)","deg)"),Jv=H1(Kv,", ",")",")");function e_(e){return function(t,n){var r=e((t=vl(t)).h,(n=vl(n)).h),i=ot(t.s,n.s),a=ot(t.l,n.l),o=ot(t.opacity,n.opacity);return function(u){return t.h=r(u),t.s=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const t_=e_(kc);function n_(e,t){var n=ot((e=_l(e)).l,(t=_l(t)).l),r=ot(e.a,t.a),i=ot(e.b,t.b),a=ot(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function r_(e){return function(t,n){var r=e((t=Ml(t)).h,(n=Ml(n)).h),i=ot(t.c,n.c),a=ot(t.l,n.l),o=ot(t.opacity,n.opacity);return function(u){return t.h=r(u),t.c=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const i_=r_(kc);function W1(e){return function t(n){n=+n;function r(i,a){var o=e((i=mn(i)).h,(a=mn(a)).h),u=ot(i.s,a.s),s=ot(i.l,a.l),l=ot(i.opacity,a.opacity);return function(c){return i.h=o(c),i.s=u(c),i.l=s(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}W1(kc);var Dc=W1(ot);function Ou(e,t){t===void 0&&(t=e,e=Sa);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}function Yt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ei=0,Fi=0,Mi=0,V1=1e3,Yo,Bi,jo=0,vr=0,qu=0,aa=typeof performance=="object"&&performance.now?performance:Date,Y1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Nc(){return vr||(Y1(a_),vr=aa.now()+qu)}function a_(){vr=0}function Xo(){this._call=this._time=this._next=null}Xo.prototype=j1.prototype={constructor:Xo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Nc():+n)+(t==null?0:+t),!this._next&&Bi!==this&&(Bi?Bi._next=this:Yo=this,Bi=this),this._call=e,this._time=n,Al()},stop:function(){this._call&&(this._call=null,this._time=1/0,Al())}};function j1(e,t,n){var r=new Xo;return r.restart(e,t,n),r}function o_(){Nc(),++ei;for(var e=Yo,t;e;)(t=vr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ei}function uh(){vr=(jo=aa.now())+qu,ei=Fi=0;try{o_()}finally{ei=0,s_(),vr=0}}function u_(){var e=aa.now(),t=e-jo;t>V1&&(qu-=t,jo=e)}function s_(){for(var e,t=Yo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Yo=n);Bi=e,Al(r)}function Al(e){if(!ei){Fi&&(Fi=clearTimeout(Fi));var t=e-vr;t>24?(e<1/0&&(Fi=setTimeout(uh,e-aa.now()-qu)),Mi&&(Mi=clearInterval(Mi))):(Mi||(jo=aa.now(),Mi=setInterval(u_,V1)),ei=1,Y1(uh))}}function sh(e,t,n){var r=new Xo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var l_=y1("start","end","cancel","interrupt"),c_=[],X1=0,lh=1,Sl=2,Po=3,ch=4,El=5,Ao=6;function Gu(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;f_(e,n,{name:t,index:r,group:i,on:l_,tween:c_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:X1})}function Fc(e,t){var n=Qt(e,t);if(n.state>X1)throw new Error("too late; already scheduled");return n}function bn(e,t){var n=Qt(e,t);if(n.state>Po)throw new Error("too late; already running");return n}function Qt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function f_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=j1(a,0,n.time);function a(l){n.state=lh,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==lh)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Po)return sh(o);d.state===ch?(d.state=Ao,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Ao,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(sh(function(){n.state===Po&&(n.state=ch,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=Sl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Sl){for(n.state=Po,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=El,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===El&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ao,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function h_(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Sl&&r.state<El,r.state=Ao,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function d_(e){return this.each(function(){h_(this,e)})}function m_(e,t){var n,r;return function(){var i=bn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function p_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=bn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function b_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Qt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?m_:p_)(n,e,t))}function Bc(e,t,n){var r=e._id;return e.each(function(){var i=bn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Qt(i,r).value[t]}}function Z1(e,t){var n;return(typeof t=="number"?at:t instanceof yr?wr:(n=yr(t))?(t=n,wr):U1)(e,t)}function g_(e){return function(){this.removeAttribute(e)}}function y_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function w_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function v_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function __(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function M_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function x_(e,t){var n=Bu(e),r=n==="transform"?Jv:Z1;return this.attrTween(e,typeof t=="function"?(n.local?M_:__)(n,r,Bc(this,"attr."+e,t)):t==null?(n.local?y_:g_)(n):(n.local?v_:w_)(n,r,t))}function P_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function A_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function S_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&A_(e,a)),n}return i._value=t,i}function E_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&P_(e,a)),n}return i._value=t,i}function C_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Bu(e);return this.tween(n,(r.local?S_:E_)(r,t))}function T_(e,t){return function(){Fc(this,e).delay=+t.apply(this,arguments)}}function k_(e,t){return t=+t,function(){Fc(this,e).delay=t}}function $_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?T_:k_)(t,e)):Qt(this.node(),t).delay}function D_(e,t){return function(){bn(this,e).duration=+t.apply(this,arguments)}}function N_(e,t){return t=+t,function(){bn(this,e).duration=t}}function F_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?D_:N_)(t,e)):Qt(this.node(),t).duration}function B_(e,t){if(typeof t!="function")throw new Error;return function(){bn(this,e).ease=t}}function L_(e){var t=this._id;return arguments.length?this.each(B_(t,e)):Qt(this.node(),t).ease}function I_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;bn(this,e).ease=n}}function R_(e){if(typeof e!="function")throw new Error;return this.each(I_(this._id,e))}function O_(e){typeof e!="function"&&(e=v1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new $n(r,this._parents,this._name,this._id)}function q_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new $n(o,this._parents,this._name,this._id)}function G_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function U_(e,t,n){var r,i,a=G_(t)?Fc:bn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function z_(e,t){var n=this._id;return arguments.length<2?Qt(this.node(),n).on.on(e):this.each(U_(n,e,t))}function H_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function W_(){return this.on("end.remove",H_(this._id))}function V_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ac(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Gu(l[h],t,n,h,l,Qt(c,n)));return new $n(a,this._parents,t,n)}function Y_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=w1(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=Qt(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&Gu(d,t,n,p,h,m);a.push(h),o.push(c)}return new $n(a,o,t,n)}var j_=Pa.prototype.constructor;function X_(){return new j_(this._groups,this._parents)}function Z_(e,t){var n,r,i;return function(){var a=Qr(this,e),o=(this.style.removeProperty(e),Qr(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function K1(e){return function(){this.style.removeProperty(e)}}function K_(e,t,n){var r,i=n+"",a;return function(){var o=Qr(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function Q_(e,t,n){var r,i,a;return function(){var o=Qr(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),Qr(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function J_(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=bn(this,e),l=s.on,c=s.value[a]==null?u||(u=K1(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function e5(e,t,n){var r=(e+="")=="transform"?Qv:Z1;return t==null?this.styleTween(e,Z_(e,r)).on("end.style."+e,K1(e)):typeof t=="function"?this.styleTween(e,Q_(e,r,Bc(this,"style."+e,t))).each(J_(this._id,e)):this.styleTween(e,K_(e,r,t),n).on("end.style."+e,null)}function t5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function n5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&t5(e,o,n)),r}return a._value=t,a}function r5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,n5(e,t,n??""))}function i5(e){return function(){this.textContent=e}}function a5(e){return function(){var t=e(this);this.textContent=t??""}}function o5(e){return this.tween("text",typeof e=="function"?a5(Bc(this,"text",e)):i5(e==null?"":e+""))}function u5(e){return function(t){this.textContent=e.call(this,t)}}function s5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&u5(i)),t}return r._value=e,r}function l5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,s5(e))}function c5(){for(var e=this._name,t=this._id,n=Q1(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=Qt(s,t);Gu(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $n(r,this._parents,e,n)}function f5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=bn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var h5=0;function $n(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Q1(){return++h5}var wn=Pa.prototype;$n.prototype={constructor:$n,select:V_,selectAll:Y_,selectChild:wn.selectChild,selectChildren:wn.selectChildren,filter:O_,merge:q_,selection:X_,transition:c5,call:wn.call,nodes:wn.nodes,node:wn.node,size:wn.size,empty:wn.empty,each:wn.each,on:z_,attr:x_,attrTween:C_,style:e5,styleTween:r5,text:o5,textTween:l5,remove:W_,tween:b_,delay:$_,duration:F_,ease:L_,easeVarying:R_,end:f5,[Symbol.iterator]:wn[Symbol.iterator]};function d5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var m5={time:null,delay:0,duration:250,ease:d5};function p5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function b5(e){var t,n;e instanceof $n?(t=e._id,e=e._name):(t=Q1(),(n=m5).time=Nc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&Gu(s,e,t,l,o,n||p5(s,t));return new $n(r,this._parents,e,t)}Pa.prototype.interrupt=d_;Pa.prototype.transition=b5;const Cl=Math.PI,Tl=2*Cl,ar=1e-6,g5=Tl-ar;function J1(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function y5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return J1;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class em{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?J1:y5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-t,l=i-n,c=o-t,f=u-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>ar)if(!(Math.abs(f*s-l*c)>ar)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-u,p=s*s+l*l,g=d*d+m*m,y=Math.sqrt(p),b=Math.sqrt(h),v=a*Math.tan((Cl-Math.acos((p+h-g)/(2*y*b)))/2),w=v/b,M=v/y;Math.abs(w-1)>ar&&this._append`L${t+w*c},${n+w*f}`,this._append`A${a},${a},0,0,${+(f*d>c*m)},${this._x1=t+M*s},${this._y1=n+M*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),l=t+u,c=n+s,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>ar||Math.abs(this._y1-c)>ar)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%Tl+Tl),h>g5?this._append`A${r},${r},0,1,${f},${t-u},${n-s}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>ar&&this._append`A${r},${r},0,${+(h>=Cl)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function zn(e=3){return new em(+e)}var fh={},Ds={},Ns=34,xi=10,Fs=13;function tm(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function w5(e,t){var n=tm(e);return function(r,i){return t(n(r),i,e)}}function hh(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function v5(e){return e<0?"-"+pt(-e,6):e>9999?"+"+pt(e,6):pt(e,4)}function _5(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":v5(e.getUTCFullYear())+"-"+pt(e.getUTCMonth()+1,2)+"-"+pt(e.getUTCDate(),2)+(i?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"."+pt(i,3)+"Z":r?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"Z":n||t?"T"+pt(t,2)+":"+pt(n,2)+"Z":"")}function M5(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var d,m,p=i(f,function(g,y){if(d)return d(g,y-1);m=g,d=h?w5(g,h):tm(g)});return p.columns=m||[],p}function i(f,h){var d=[],m=f.length,p=0,g=0,y,b=m<=0,v=!1;f.charCodeAt(m-1)===xi&&--m,f.charCodeAt(m-1)===Fs&&--m;function w(){if(b)return Ds;if(v)return v=!1,fh;var _,x=p,E;if(f.charCodeAt(x)===Ns){for(;p++<m&&f.charCodeAt(p)!==Ns||f.charCodeAt(++p)===Ns;);return(_=p)>=m?b=!0:(E=f.charCodeAt(p++))===xi?v=!0:E===Fs&&(v=!0,f.charCodeAt(p)===xi&&++p),f.slice(x+1,_-1).replace(/""/g,'"')}for(;p<m;){if((E=f.charCodeAt(_=p++))===xi)v=!0;else if(E===Fs)v=!0,f.charCodeAt(p)===xi&&++p;else if(E!==n)continue;return f.slice(x,_)}return b=!0,f.slice(x,m)}for(;(y=w())!==Ds;){for(var M=[];y!==fh&&y!==Ds;)M.push(y),y=w();h&&(M=h(M,g++))==null||d.push(M)}return d}function a(f,h){return f.map(function(d){return h.map(function(m){return c(d[m])}).join(e)})}function o(f,h){return h==null&&(h=hh(f)),[h.map(c).join(e)].concat(a(f,h)).join(`
`)}function u(f,h){return h==null&&(h=hh(f)),a(f,h).join(`
`)}function s(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?_5(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:u,formatRows:s,formatRow:l,formatValue:c}}var x5=M5(","),P5=x5.parse;function A5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ti(e){return e=Zo(Math.abs(e)),e?e[1]:NaN}function S5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function E5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var C5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oa(e){if(!(t=C5.exec(e)))throw new Error("invalid format: "+e);var t;return new Lc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}oa.prototype=Lc.prototype;function Lc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Lc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function T5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var nm;function k5(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(nm=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zo(e,Math.max(0,t+a-1))[0]}function dh(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const mh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:A5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>dh(e*100,t),r:dh,s:k5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ph(e){return e}var bh=Array.prototype.map,gh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $5(e){var t=e.grouping===void 0||e.thousands===void 0?ph:S5(bh.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?ph:E5(bh.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function l(f){f=oa(f);var h=f.fill,d=f.align,m=f.sign,p=f.symbol,g=f.zero,y=f.width,b=f.comma,v=f.precision,w=f.trim,M=f.type;M==="n"?(b=!0,M="g"):mh[M]||(v===void 0&&(v=12),w=!0,M="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var _=p==="$"?n:p==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",x=p==="$"?r:/[%p]/.test(M)?o:"",E=mh[M],$=/[defgprs%]/.test(M);v=v===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function N(A){var L=_,R=x,C,S,I;if(M==="c")R=E(A)+R,A="";else{A=+A;var re=A<0||1/A<0;if(A=isNaN(A)?s:E(Math.abs(A),v),w&&(A=T5(A)),re&&+A==0&&m!=="+"&&(re=!1),L=(re?m==="("?m:u:m==="-"||m==="("?"":m)+L,R=(M==="s"?gh[8+nm/3]:"")+R+(re&&m==="("?")":""),$){for(C=-1,S=A.length;++C<S;)if(I=A.charCodeAt(C),48>I||I>57){R=(I===46?i+A.slice(C+1):A.slice(C))+R,A=A.slice(0,C);break}}}b&&!g&&(A=t(A,1/0));var ne=L.length+A.length+R.length,Q=ne<y?new Array(y-ne+1).join(h):"";switch(b&&g&&(A=t(Q+A,Q.length?y-R.length:1/0),Q=""),d){case"<":A=L+A+R+Q;break;case"=":A=L+Q+A+R;break;case"^":A=Q.slice(0,ne=Q.length>>1)+L+A+R+Q.slice(ne);break;default:A=Q+L+A+R;break}return a(A)}return N.toString=function(){return f+""},N}function c(f,h){var d=l((f=oa(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(ti(h)/3)))*3,p=Math.pow(10,-m),g=gh[8+m/3];return function(y){return d(p*y)+g}}return{format:l,formatPrefix:c}}var no,pi,rm;D5({thousands:",",grouping:[3],currency:["$",""]});function D5(e){return no=$5(e),pi=no.format,rm=no.formatPrefix,no}function N5(e){return Math.max(0,-ti(Math.abs(e)))}function F5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ti(t)/3)))*3-ti(Math.abs(e)))}function B5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ti(t)-ti(e))+1}var me=1e-6,im=1e-12,ye=Math.PI,Le=ye/2,yh=ye/4,At=ye*2,lt=180/ye,Be=ye/180,Ce=Math.abs,bi=Math.atan,Dn=Math.atan2,ge=Math.cos,am=Math.exp,Ko=Math.log,Bs=Math.pow,he=Math.sin,Nt=Math.sign||function(e){return e>0?1:e<0?-1:0},vt=Math.sqrt,Ic=Math.tan;function om(e){return e>1?0:e<-1?ye:Math.acos(e)}function Rt(e){return e>1?Le:e<-1?-Le:Math.asin(e)}function Ft(){}function Qo(e,t){e&&vh.hasOwnProperty(e.type)&&vh[e.type](e,t)}var wh={Feature:function(e,t){Qo(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Qo(n[r].geometry,t)}},vh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){kl(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)kl(n[r],t,0)},Polygon:function(e,t){_h(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_h(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Qo(n[r],t)}};function kl(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function _h(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)kl(e[n],t,1);t.polygonEnd()}function ur(e,t){e&&wh.hasOwnProperty(e.type)?wh[e.type](e,t):Qo(e,t)}function $l(e){return[Dn(e[1],e[0]),Rt(e[2])]}function ni(e){var t=e[0],n=e[1],r=ge(n);return[r*ge(t),r*he(t),he(n)]}function ro(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ls(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function io(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Dl(e){var t=vt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Nl(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Fl(e,t){return Ce(e)>ye&&(e-=Math.round(e/At)*At),[e,t]}Fl.invert=Fl;function um(e,t,n){return(e%=At)?t||n?Nl(xh(e),Ph(t,n)):xh(e):t||n?Ph(t,n):Fl}function Mh(e){return function(t,n){return t+=e,Ce(t)>ye&&(t-=Math.round(t/At)*At),[t,n]}}function xh(e){var t=Mh(e);return t.invert=Mh(-e),t}function Ph(e,t){var n=ge(e),r=he(e),i=ge(t),a=he(t);function o(u,s){var l=ge(s),c=ge(u)*l,f=he(u)*l,h=he(s),d=h*n+c*r;return[Dn(f*i-d*a,c*n-h*r),Rt(d*i+f*a)]}return o.invert=function(u,s){var l=ge(s),c=ge(u)*l,f=he(u)*l,h=he(s),d=h*i-f*a;return[Dn(f*i+h*a,c*n+d*r),Rt(d*n-c*r)]},o}function L5(e){e=um(e[0]*Be,e[1]*Be,e.length>2?e[2]*Be:0);function t(n){return n=e(n[0]*Be,n[1]*Be),n[0]*=lt,n[1]*=lt,n}return t.invert=function(n){return n=e.invert(n[0]*Be,n[1]*Be),n[0]*=lt,n[1]*=lt,n},t}function I5(e,t,n,r,i,a){if(n){var o=ge(t),u=he(t),s=r*n;i==null?(i=t+r*At,a=t-s/2):(i=Ah(o,i),a=Ah(o,a),(r>0?i<a:i>a)&&(i+=r*At));for(var l,c=i;r>0?c>a:c<a;c-=s)l=$l([o,-u*ge(c),-u*he(c)]),e.point(l[0],l[1])}}function Ah(e,t){t=ni(t),t[0]-=e,Dl(t);var n=om(-t[1]);return((-t[2]<0?-n:n)+At-me)%At}function sm(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ft,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function So(e,t){return Ce(e[0]-t[0])<me&&Ce(e[1]-t[1])<me}function ao(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function lm(e,t,n,r,i){var a=[],o=[],u,s;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,g=m[0],y=m[p],b;if(So(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),u=0;u<p;++u)i.point((g=m[u])[0],g[1]);i.lineEnd();return}y[0]+=2*me}a.push(b=new ao(g,m,null,!0)),o.push(b.o=new ao(g,null,b,!1)),a.push(b=new ao(y,m,null,!1)),o.push(b.o=new ao(y,null,b,!0))}}),!!a.length){for(o.sort(t),Sh(a),Sh(o),u=0,s=o.length;u<s;++u)o[u].e=n=!n;for(var l=a[0],c,f;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Sh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Is(e){return Ce(e[0])<=ye?e[0]:Nt(e[0])*((Ce(e[0])+ye)%At-ye)}function R5(e,t){var n=Is(t),r=t[1],i=he(r),a=[he(n),-ge(n),0],o=0,u=0,s=new pr;i===1?r=Le+me:i===-1&&(r=-Le-me);for(var l=0,c=e.length;l<c;++l)if(h=(f=e[l]).length)for(var f,h,d=f[h-1],m=Is(d),p=d[1]/2+yh,g=he(p),y=ge(p),b=0;b<h;++b,m=w,g=_,y=x,d=v){var v=f[b],w=Is(v),M=v[1]/2+yh,_=he(M),x=ge(M),E=w-m,$=E>=0?1:-1,N=$*E,A=N>ye,L=g*_;if(s.add(Dn(L*$*he(N),y*x+L*ge(N))),o+=A?E+$*At:E,A^m>=n^w>=n){var R=Jo(ni(d),ni(v));Dl(R);var C=Jo(a,R);Dl(C);var S=(A^E>=0?-1:1)*Rt(C[2]);(r>S||r===S&&(R[0]||R[1]))&&(u+=A^E>=0?1:-1)}}return(o<-me||o<me&&s<-im)^u&1}function cm(e,t,n,r){return function(i){var a=t(i),o=sm(),u=t(o),s=!1,l,c,f,h={point:d,lineStart:p,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=b,h.lineEnd=v,c=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=p,h.lineEnd=g,c=g1(c);var w=R5(l,r);c.length?(s||(i.polygonStart(),s=!0),lm(c,q5,w,n,i)):w&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(w,M){e(w,M)&&i.point(w,M)}function m(w,M){a.point(w,M)}function p(){h.point=m,a.lineStart()}function g(){h.point=d,a.lineEnd()}function y(w,M){f.push([w,M]),u.point(w,M)}function b(){u.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),u.lineEnd();var w=u.clean(),M=o.result(),_,x=M.length,E,$,N;if(f.pop(),l.push(f),f=null,!!x){if(w&1){if($=M[0],(E=$.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),_=0;_<E;++_)i.point((N=$[_])[0],N[1]);i.lineEnd()}return}x>1&&w&2&&M.push(M.pop().concat(M.shift())),c.push(M.filter(O5))}}return h}}function O5(e){return e.length>1}function q5(e,t){return((e=e.x)[0]<0?e[1]-Le-me:Le-e[1])-((t=t.x)[0]<0?t[1]-Le-me:Le-t[1])}const Eh=cm(function(){return!0},G5,z5,[-ye,-Le]);function G5(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var u=a>0?ye:-ye,s=Ce(a-t);Ce(s-ye)<me?(e.point(t,n=(n+o)/2>0?Le:-Le),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(a,n),i=0):r!==u&&s>=ye&&(Ce(t-r)<me&&(t-=r*me),Ce(a-u)<me&&(a-=u*me),n=U5(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=a,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function U5(e,t,n,r){var i,a,o=he(e-n);return Ce(o)>me?bi((he(t)*(a=ge(r))*he(n)-he(r)*(i=ge(t))*he(e))/(i*a*o)):(t+r)/2}function z5(e,t,n,r){var i;if(e==null)i=n*Le,r.point(-ye,i),r.point(0,i),r.point(ye,i),r.point(ye,0),r.point(ye,-i),r.point(0,-i),r.point(-ye,-i),r.point(-ye,0),r.point(-ye,i);else if(Ce(e[0]-t[0])>me){var a=e[0]<t[0]?ye:-ye;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function H5(e){var t=ge(e),n=6*Be,r=t>0,i=Ce(t)>me;function a(c,f,h,d){I5(d,e,n,h,c,f)}function o(c,f){return ge(c)*ge(f)>t}function u(c){var f,h,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(g,y){var b=[g,y],v,w=o(g,y),M=r?w?0:l(g,y):w?l(g+(g<0?ye:-ye),y):0;if(!f&&(m=d=w)&&c.lineStart(),w!==d&&(v=s(f,b),(!v||So(f,v)||So(b,v))&&(b[2]=1)),w!==d)p=0,w?(c.lineStart(),v=s(b,f),c.point(v[0],v[1])):(v=s(f,b),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(i&&f&&r^w){var _;!(M&h)&&(_=s(b,f,!0))&&(p=0,r?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}w&&(!f||!So(f,b))&&c.point(b[0],b[1]),f=b,d=w,h=M},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return p|(m&&d)<<1}}}function s(c,f,h){var d=ni(c),m=ni(f),p=[1,0,0],g=Jo(d,m),y=ro(g,g),b=g[0],v=y-b*b;if(!v)return!h&&c;var w=t*y/v,M=-t*b/v,_=Jo(p,g),x=io(p,w),E=io(g,M);Ls(x,E);var $=_,N=ro(x,$),A=ro($,$),L=N*N-A*(ro(x,x)-1);if(!(L<0)){var R=vt(L),C=io($,(-N-R)/A);if(Ls(C,x),C=$l(C),!h)return C;var S=c[0],I=f[0],re=c[1],ne=f[1],Q;I<S&&(Q=S,S=I,I=Q);var q=I-S,U=Ce(q-ye)<me,z=U||q<me;if(!U&&ne<re&&(Q=re,re=ne,ne=Q),z?U?re+ne>0^C[1]<(Ce(C[0]-S)<me?re:ne):re<=C[1]&&C[1]<=ne:q>ye^(S<=C[0]&&C[0]<=I)){var W=io($,(-N+R)/A);return Ls(W,x),[C,$l(W)]}}}function l(c,f){var h=r?e:ye-e,d=0;return c<-h?d|=1:c>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return cm(o,u,a,r?[0,-e]:[-ye,e-ye])}function W5(e,t,n,r,i,a){var o=e[0],u=e[1],s=t[0],l=t[1],c=0,f=1,h=s-o,d=l-u,m;if(m=n-o,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=i-o,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}if(m=r-u,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=a-u,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=o+c*h,e[1]=u+c*d),f<1&&(t[0]=o+f*h,t[1]=u+f*d),!0}}}}}var Li=1e9,oo=-Li;function fm(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function a(l,c,f,h){var d=0,m=0;if(l==null||(d=o(l,f))!==(m=o(c,f))||s(l,c)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==m);else h.point(c[0],c[1])}function o(l,c){return Ce(l[0]-e)<me?c>0?0:3:Ce(l[0]-n)<me?c>0?2:1:Ce(l[1]-t)<me?c>0?1:0:c>0?3:2}function u(l,c){return s(l.x,c.x)}function s(l,c){var f=o(l,1),h=o(c,1);return f!==h?f-h:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=sm(),h,d,m,p,g,y,b,v,w,M,_,x={point:E,lineStart:L,lineEnd:R,polygonStart:N,polygonEnd:A};function E(S,I){i(S,I)&&c.point(S,I)}function $(){for(var S=0,I=0,re=d.length;I<re;++I)for(var ne=d[I],Q=1,q=ne.length,U=ne[0],z,W,oe=U[0],de=U[1];Q<q;++Q)z=oe,W=de,U=ne[Q],oe=U[0],de=U[1],W<=r?de>r&&(oe-z)*(r-W)>(de-W)*(e-z)&&++S:de<=r&&(oe-z)*(r-W)<(de-W)*(e-z)&&--S;return S}function N(){c=f,h=[],d=[],_=!0}function A(){var S=$(),I=_&&S,re=(h=g1(h)).length;(I||re)&&(l.polygonStart(),I&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),re&&lm(h,u,S,a,l),l.polygonEnd()),c=l,h=d=m=null}function L(){x.point=C,d&&d.push(m=[]),M=!0,w=!1,b=v=NaN}function R(){h&&(C(p,g),y&&w&&f.rejoin(),h.push(f.result())),x.point=E,w&&c.lineEnd()}function C(S,I){var re=i(S,I);if(d&&m.push([S,I]),M)p=S,g=I,y=re,M=!1,re&&(c.lineStart(),c.point(S,I));else if(re&&w)c.point(S,I);else{var ne=[b=Math.max(oo,Math.min(Li,b)),v=Math.max(oo,Math.min(Li,v))],Q=[S=Math.max(oo,Math.min(Li,S)),I=Math.max(oo,Math.min(Li,I))];W5(ne,Q,e,t,n,r)?(w||(c.lineStart(),c.point(ne[0],ne[1])),c.point(Q[0],Q[1]),re||c.lineEnd(),_=!1):re&&(c.lineStart(),c.point(S,I),_=!1)}b=S,v=I,w=re}return x}}const Bl=e=>e;var Rs=new pr,Ll=new pr,hm,dm,Il,Rl,Sn={point:Ft,lineStart:Ft,lineEnd:Ft,polygonStart:function(){Sn.lineStart=V5,Sn.lineEnd=j5},polygonEnd:function(){Sn.lineStart=Sn.lineEnd=Sn.point=Ft,Rs.add(Ce(Ll)),Ll=new pr},result:function(){var e=Rs/2;return Rs=new pr,e}};function V5(){Sn.point=Y5}function Y5(e,t){Sn.point=mm,hm=Il=e,dm=Rl=t}function mm(e,t){Ll.add(Rl*e-Il*t),Il=e,Rl=t}function j5(){mm(hm,dm)}var ri=1/0,eu=ri,ua=-ri,tu=ua,nu={point:X5,lineStart:Ft,lineEnd:Ft,polygonStart:Ft,polygonEnd:Ft,result:function(){var e=[[ri,eu],[ua,tu]];return ua=tu=-(eu=ri=1/0),e}};function X5(e,t){e<ri&&(ri=e),e>ua&&(ua=e),t<eu&&(eu=t),t>tu&&(tu=t)}var Ol=0,ql=0,Ii=0,ru=0,iu=0,qr=0,Gl=0,Ul=0,Ri=0,pm,bm,rn,an,$t={point:_r,lineStart:Ch,lineEnd:Th,polygonStart:function(){$t.lineStart=Q5,$t.lineEnd=J5},polygonEnd:function(){$t.point=_r,$t.lineStart=Ch,$t.lineEnd=Th},result:function(){var e=Ri?[Gl/Ri,Ul/Ri]:qr?[ru/qr,iu/qr]:Ii?[Ol/Ii,ql/Ii]:[NaN,NaN];return Ol=ql=Ii=ru=iu=qr=Gl=Ul=Ri=0,e}};function _r(e,t){Ol+=e,ql+=t,++Ii}function Ch(){$t.point=Z5}function Z5(e,t){$t.point=K5,_r(rn=e,an=t)}function K5(e,t){var n=e-rn,r=t-an,i=vt(n*n+r*r);ru+=i*(rn+e)/2,iu+=i*(an+t)/2,qr+=i,_r(rn=e,an=t)}function Th(){$t.point=_r}function Q5(){$t.point=e6}function J5(){gm(pm,bm)}function e6(e,t){$t.point=gm,_r(pm=rn=e,bm=an=t)}function gm(e,t){var n=e-rn,r=t-an,i=vt(n*n+r*r);ru+=i*(rn+e)/2,iu+=i*(an+t)/2,qr+=i,i=an*e-rn*t,Gl+=i*(rn+e),Ul+=i*(an+t),Ri+=i*3,_r(rn=e,an=t)}function ym(e){this._context=e}ym.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,At);break}}},result:Ft};var zl=new pr,Os,wm,vm,Oi,qi,sa={point:Ft,lineStart:function(){sa.point=t6},lineEnd:function(){Os&&_m(wm,vm),sa.point=Ft},polygonStart:function(){Os=!0},polygonEnd:function(){Os=null},result:function(){var e=+zl;return zl=new pr,e}};function t6(e,t){sa.point=_m,wm=Oi=e,vm=qi=t}function _m(e,t){Oi-=e,qi-=t,zl.add(vt(Oi*Oi+qi*qi)),Oi=e,qi=t}let kh,au,$h,Dh;class Nh{constructor(t){this._append=t==null?Mm:n6(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==$h||this._append!==au){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,$h=r,au=this._append,Dh=this._,this._=i}this._+=Dh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Mm(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function n6(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Mm;if(t!==kh){const n=10**t;kh=t,au=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return au}function Uu(e,t){let n=3,r=4.5,i,a;function o(u){return u&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),ur(u,i(a))),a.result()}return o.area=function(u){return ur(u,i(Sn)),Sn.result()},o.measure=function(u){return ur(u,i(sa)),sa.result()},o.bounds=function(u){return ur(u,i(nu)),nu.result()},o.centroid=function(u){return ur(u,i($t)),$t.result()},o.projection=function(u){return arguments.length?(i=u==null?(e=null,Bl):(e=u).stream,o):e},o.context=function(u){return arguments.length?(a=u==null?(t=null,new Nh(n)):new ym(t=u),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(a.pointRadius(+u),+u),o):r},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const s=Math.floor(u);if(!(s>=0))throw new RangeError(`invalid digits: ${u}`);n=s}return t===null&&(a=new Nh(n)),o},o.projection(e).digits(n).context(t)}function Hl(e){return{stream:zu(e)}}function zu(e){return function(t){var n=new Wl;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Wl(){}Wl.prototype={constructor:Wl,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Rc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),ur(n,e.stream(nu)),t(nu.result()),r!=null&&e.clipExtent(r),e}function Oc(e,t,n){return Rc(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([u,s])},n)}function xm(e,t,n){return Oc(e,[[0,0],t],n)}function Pm(e,t,n){return Rc(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,u=-a*r[0][1];e.scale(150*a).translate([o,u])},n)}function Am(e,t,n){return Rc(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],u=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,u])},n)}var Fh=16,r6=ge(30*Be);function Bh(e,t){return+t?a6(e,t):i6(e)}function i6(e){return zu({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function a6(e,t){function n(r,i,a,o,u,s,l,c,f,h,d,m,p,g){var y=l-r,b=c-i,v=y*y+b*b;if(v>4*t&&p--){var w=o+h,M=u+d,_=s+m,x=vt(w*w+M*M+_*_),E=Rt(_/=x),$=Ce(Ce(_)-1)<me||Ce(a-f)<me?(a+f)/2:Dn(M,w),N=e($,E),A=N[0],L=N[1],R=A-r,C=L-i,S=b*R-y*C;(S*S/v>t||Ce((y*R+b*C)/v-.5)>.3||o*h+u*d+s*m<r6)&&(n(r,i,a,o,u,s,A,L,$,w/=x,M/=x,_,p,g),g.point(A,L),n(A,L,$,w,M,_,l,c,f,h,d,m,p,g))}}return function(r){var i,a,o,u,s,l,c,f,h,d,m,p,g={point:y,lineStart:b,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(E,$){E=e(E,$),r.point(E[0],E[1])}function b(){f=NaN,g.point=v,r.lineStart()}function v(E,$){var N=ni([E,$]),A=e(E,$);n(f,h,c,d,m,p,f=A[0],h=A[1],c=E,d=N[0],m=N[1],p=N[2],Fh,r),r.point(f,h)}function w(){g.point=y,r.lineEnd()}function M(){b(),g.point=_,g.lineEnd=x}function _(E,$){v(i=E,$),a=f,o=h,u=d,s=m,l=p,g.point=v}function x(){n(f,h,c,d,m,p,a,o,i,u,s,l,Fh,r),g.lineEnd=w,w()}return g}}var o6=zu({point:function(e,t){this.stream.point(e*Be,t*Be)}});function u6(e){return zu({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function s6(e,t,n,r,i){function a(o,u){return o*=r,u*=i,[t+e*o,n-e*u]}return a.invert=function(o,u){return[(o-t)/e*r,(n-u)/e*i]},a}function Lh(e,t,n,r,i,a){if(!a)return s6(e,t,n,r,i);var o=ge(a),u=he(a),s=o*e,l=u*e,c=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function m(p,g){return p*=r,g*=i,[s*p-l*g+t,n-l*p-s*g]}return m.invert=function(p,g){return[r*(c*p-f*g+h),i*(d-f*p-c*g)]},m}function Jn(e){return Sm(function(){return e})()}function Sm(e){var t,n=150,r=480,i=250,a=0,o=0,u=0,s=0,l=0,c,f=0,h=1,d=1,m=null,p=Eh,g=null,y,b,v,w=Bl,M=.5,_,x,E,$,N;function A(S){return E(S[0]*Be,S[1]*Be)}function L(S){return S=E.invert(S[0],S[1]),S&&[S[0]*lt,S[1]*lt]}A.stream=function(S){return $&&N===S?$:$=o6(u6(c)(p(_(w(N=S)))))},A.preclip=function(S){return arguments.length?(p=S,m=void 0,C()):p},A.postclip=function(S){return arguments.length?(w=S,g=y=b=v=null,C()):w},A.clipAngle=function(S){return arguments.length?(p=+S?H5(m=S*Be):(m=null,Eh),C()):m*lt},A.clipExtent=function(S){return arguments.length?(w=S==null?(g=y=b=v=null,Bl):fm(g=+S[0][0],y=+S[0][1],b=+S[1][0],v=+S[1][1]),C()):g==null?null:[[g,y],[b,v]]},A.scale=function(S){return arguments.length?(n=+S,R()):n},A.translate=function(S){return arguments.length?(r=+S[0],i=+S[1],R()):[r,i]},A.center=function(S){return arguments.length?(a=S[0]%360*Be,o=S[1]%360*Be,R()):[a*lt,o*lt]},A.rotate=function(S){return arguments.length?(u=S[0]%360*Be,s=S[1]%360*Be,l=S.length>2?S[2]%360*Be:0,R()):[u*lt,s*lt,l*lt]},A.angle=function(S){return arguments.length?(f=S%360*Be,R()):f*lt},A.reflectX=function(S){return arguments.length?(h=S?-1:1,R()):h<0},A.reflectY=function(S){return arguments.length?(d=S?-1:1,R()):d<0},A.precision=function(S){return arguments.length?(_=Bh(x,M=S*S),C()):vt(M)},A.fitExtent=function(S,I){return Oc(A,S,I)},A.fitSize=function(S,I){return xm(A,S,I)},A.fitWidth=function(S,I){return Pm(A,S,I)},A.fitHeight=function(S,I){return Am(A,S,I)};function R(){var S=Lh(n,0,0,h,d,f).apply(null,t(a,o)),I=Lh(n,r-S[0],i-S[1],h,d,f);return c=um(u,s,l),x=Nl(t,I),E=Nl(c,x),_=Bh(x,M),C()}function C(){return $=N=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&L,R()}}function qc(e){var t=0,n=ye/3,r=Sm(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Be,n=a[1]*Be):[t*lt,n*lt]},i}function l6(e){var t=ge(e);function n(r,i){return[r*t,he(i)/t]}return n.invert=function(r,i){return[r/t,Rt(i*t)]},n}function c6(e,t){var n=he(e),r=(n+he(t))/2;if(Ce(r)<me)return l6(e);var i=1+n*(2*r-n),a=vt(i)/r;function o(u,s){var l=vt(i-2*r*he(s))/r;return[l*he(u*=r),a-l*ge(u)]}return o.invert=function(u,s){var l=a-s,c=Dn(u,Ce(l))*Nt(l);return l*r<0&&(c-=ye*Nt(u)*Nt(l)),[c/r,Rt((i-(u*u+l*l)*r*r)/(2*r))]},o}function ou(){return qc(c6).scale(155.424).center([0,33.6442])}function Em(){return ou().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function f6(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function h6(){var e,t,n=Em(),r,i=ou().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=ou().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,s,l={point:function(h,d){s=[h,d]}};function c(h){var d=h[0],m=h[1];return s=null,r.point(d,m),s||(a.point(d,m),s)||(u.point(d,m),s)}c.invert=function(h){var d=n.scale(),m=n.translate(),p=(h[0]-m[0])/d,g=(h[1]-m[1])/d;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?o:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=f6([n.stream(t=h),i.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),f()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),m=+h[0],p=+h[1];return r=n.translate(h).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(l),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+me,p+.12*d+me],[m-.214*d-me,p+.234*d-me]]).stream(l),u=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+me,p+.166*d+me],[m-.115*d-me,p+.234*d-me]]).stream(l),f()},c.fitExtent=function(h,d){return Oc(c,h,d)},c.fitSize=function(h,d){return xm(c,h,d)},c.fitWidth=function(h,d){return Pm(c,h,d)},c.fitHeight=function(h,d){return Am(c,h,d)};function f(){return e=t=null,c}return c.scale(1070)}function Cm(e){return function(t,n){var r=ge(t),i=ge(n),a=e(r*i);return a===1/0?[2,0]:[a*i*he(t),a*he(n)]}}function Ea(e){return function(t,n){var r=vt(t*t+n*n),i=e(r),a=he(i),o=ge(i);return[Dn(t*a,r*o),Rt(r&&n*a/r)]}}var Tm=Cm(function(e){return vt(2/(1+e))});Tm.invert=Ea(function(e){return 2*Rt(e/2)});function d6(){return Jn(Tm).scale(124.75).clipAngle(180-.001)}var km=Cm(function(e){return(e=om(e))&&e/he(e)});km.invert=Ea(function(e){return e});function m6(){return Jn(km).scale(79.4188).clipAngle(180-.001)}function Hu(e,t){return[e,Ko(Ic((Le+t)/2))]}Hu.invert=function(e,t){return[e,2*bi(am(t))-Le]};function p6(){return $m(Hu).scale(961/At)}function $m(e){var t=Jn(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,u,s,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=u=s=l=null:(o=+f[0][0],u=+f[0][1],s=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,u],[s,l]]};function c(){var f=ye*r(),h=t(L5(t.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Hu?[[Math.max(h[0]-f,o),u],[Math.min(h[0]+f,s),l]]:[[o,Math.max(h[1]-f,u)],[s,Math.min(h[1]+f,l)]])}return c()}function uo(e){return Ic((Le+e)/2)}function b6(e,t){var n=ge(e),r=e===t?he(e):Ko(n/ge(t))/Ko(uo(t)/uo(e)),i=n*Bs(uo(e),r)/r;if(!r)return Hu;function a(o,u){i>0?u<-Le+me&&(u=-Le+me):u>Le-me&&(u=Le-me);var s=i/Bs(uo(u),r);return[s*he(r*o),i-s*ge(r*o)]}return a.invert=function(o,u){var s=i-u,l=Nt(r)*vt(o*o+s*s),c=Dn(o,Ce(s))*Nt(s);return s*r<0&&(c-=ye*Nt(o)*Nt(s)),[c/r,2*bi(Bs(i/l,1/r))-Le]},a}function g6(){return qc(b6).scale(109.5).parallels([30,30])}function uu(e,t){return[e,t]}uu.invert=uu;function y6(){return Jn(uu).scale(152.63)}function w6(e,t){var n=ge(e),r=e===t?he(e):(n-ge(t))/(t-e),i=n/r+e;if(Ce(r)<me)return uu;function a(o,u){var s=i-u,l=r*o;return[s*he(l),i-s*ge(l)]}return a.invert=function(o,u){var s=i-u,l=Dn(o,Ce(s))*Nt(s);return s*r<0&&(l-=ye*Nt(o)*Nt(s)),[l/r,i-Nt(r)*vt(o*o+s*s)]},a}function v6(){return qc(w6).scale(131.154).center([0,13.9389])}var ji=1.340264,Xi=-.081106,Zi=893e-6,Ki=.003796,su=vt(3)/2,_6=12;function Dm(e,t){var n=Rt(su*he(t)),r=n*n,i=r*r*r;return[e*ge(n)/(su*(ji+3*Xi*r+i*(7*Zi+9*Ki*r))),n*(ji+Xi*r+i*(Zi+Ki*r))]}Dm.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,u,s;a<_6&&(u=n*(ji+Xi*r+i*(Zi+Ki*r))-t,s=ji+3*Xi*r+i*(7*Zi+9*Ki*r),n-=o=u/s,r=n*n,i=r*r*r,!(Ce(o)<im));++a);return[su*e*(ji+3*Xi*r+i*(7*Zi+9*Ki*r))/ge(n),Rt(he(n)/su)]};function M6(){return Jn(Dm).scale(177.158)}function Nm(e,t){var n=ge(t),r=ge(e)*n;return[n*he(e)/r,he(t)/r]}Nm.invert=Ea(bi);function x6(){return Jn(Nm).scale(144.049).clipAngle(60)}function Fm(e,t){return[ge(t)*he(e),he(t)]}Fm.invert=Ea(Rt);function P6(){return Jn(Fm).scale(249.5).clipAngle(90+me)}function Bm(e,t){var n=ge(t),r=1+ge(e)*n;return[n*he(e)/r,he(t)/r]}Bm.invert=Ea(function(e){return 2*bi(e)});function A6(){return Jn(Bm).scale(250).clipAngle(142)}function Lm(e,t){return[Ko(Ic((Le+t)/2)),-e]}Lm.invert=function(e,t){return[-t,2*bi(am(e))-Le]};function S6(){var e=$m(Lm),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function gn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Vl=Symbol("implicit");function Gc(){var e=new br,t=[],n=[],r=Vl;function i(a){let o=e.get(a);if(o===void 0){if(r!==Vl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new br;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Gc(t,n).unknown(r)},gn.apply(i,arguments),i}function Vu(){var e=Gc().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,u=!1,s=0,l=0,c=.5;delete e.unknown;function f(){var h=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,h-s+l*2),u&&(a=Math.floor(a)),m+=(p-m-a*(h-s))*c,o=a*(1-s),u&&(m=Math.round(m),o=Math.round(o));var g=gl(h).map(function(y){return m+a*y});return n(d?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(u=!!h,f()):u},e.padding=function(h){return arguments.length?(s=Math.min(1,l=+h),f()):s},e.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return Vu(t(),[r,i]).round(u).paddingInner(s).paddingOuter(l).align(c)},gn.apply(f(),arguments)}function Im(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Im(t())},e}function E6(){return Im(Vu.apply(null,arguments).paddingInner(1))}function C6(e){return function(){return e}}function Yl(e){return+e}var Ih=[0,1];function Bt(e){return e}function jl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:C6(isNaN(t)?NaN:.5)}function T6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function k6(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=jl(i,r),a=n(o,a)):(r=jl(r,i),a=n(a,o)),function(u){return a(r(u))}}function $6(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=jl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var s=Tu(e,u,1,r)-1;return a[s](i[s](u))}}function Ca(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yu(){var e=Ih,t=Ih,n=Sa,r,i,a,o=Bt,u,s,l;function c(){var h=Math.min(e.length,t.length);return o!==Bt&&(o=T6(e[0],e[h-1])),u=h>2?$6:k6,s=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(s||(s=u(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=u(t,e.map(r),at)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Yl),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=$c,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Bt,c()):o!==Bt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Rm(){return Yu()(Bt,Bt)}function D6(e,t,n,r){var i=pl(e,t,n),a;switch(r=oa(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=F5(i,o))&&(r.precision=a),rm(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=B5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=N5(i))&&(r.precision=a-(r.type==="%")*2);break}}return pi(r)}function Ta(e){var t=e.domain;return e.ticks=function(n){var r=t();return na(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return D6(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],u=r[a],s,l,c=10;for(u<o&&(l=o,o=u,u=l,l=i,i=a,a=l);c-- >0;){if(l=Uo(o,u,n),l===s)return r[i]=o,r[a]=u,t(r);if(l>0)o=Math.floor(o/l)*l,u=Math.ceil(u/l)*l;else if(l<0)o=Math.ceil(o*l)/l,u=Math.floor(u*l)/l;else break;s=l}return e},e}function Uc(){var e=Rm();return e.copy=function(){return Ca(e,Uc())},gn.apply(e,arguments),Ta(e)}function Om(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Yl),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Om(e).unknown(t)},e=arguments.length?Array.from(e,Yl):[0,1],Ta(n)}function qm(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Rh(e){return Math.log(e)}function Oh(e){return Math.exp(e)}function N6(e){return-Math.log(-e)}function F6(e){return-Math.exp(-e)}function B6(e){return isFinite(e)?+("1e"+e):e<0?0:e}function L6(e){return e===10?B6:e===Math.E?Math.exp:t=>Math.pow(e,t)}function I6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function qh(e){return(t,n)=>-e(-t,n)}function Gm(e){const t=e(Rh,Oh),n=t.domain;let r=10,i,a;function o(){return i=I6(r),a=L6(r),n()[0]<0?(i=qh(i),a=qh(a),e(N6,F6)):e(Rh,Oh),t}return t.base=function(u){return arguments.length?(r=+u,o()):r},t.domain=function(u){return arguments.length?(n(u),o()):n()},t.ticks=u=>{const s=n();let l=s[0],c=s[s.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),m,p;const g=u==null?10:+u;let y=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(m=1;m<r;++m)if(p=h<0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;y.push(p)}}else for(;h<=d;++h)for(m=r-1;m>=1;--m)if(p=h>0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;y.push(p)}y.length*2<g&&(y=na(l,c,g))}else y=na(h,d,Math.min(d-h,g)).map(a);return f?y.reverse():y},t.tickFormat=(u,s)=>{if(u==null&&(u=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=oa(s)).precision==null&&(s.trim=!0),s=pi(s)),u===1/0)return s;const l=Math.max(1,r*u/t.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?s(c):""}},t.nice=()=>n(qm(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function Um(){const e=Gm(Yu()).domain([1,10]);return e.copy=()=>Ca(e,Um()).base(e.base()),gn.apply(e,arguments),e}function Gh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Uh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zm(e){var t=1,n=e(Gh(t),Uh(t));return n.constant=function(r){return arguments.length?e(Gh(t=+r),Uh(t)):t},Ta(n)}function Hm(){var e=zm(Yu());return e.copy=function(){return Ca(e,Hm()).constant(e.constant())},gn.apply(e,arguments)}function zh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function R6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function O6(e){return e<0?-e*e:e*e}function Wm(e){var t=e(Bt,Bt),n=1;function r(){return n===1?e(Bt,Bt):n===.5?e(R6,O6):e(zh(n),zh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ta(t)}function Vm(){var e=Wm(Yu());return e.copy=function(){return Ca(e,Vm()).exponent(e.exponent())},gn.apply(e,arguments),e}function Ym(){var e=[],t=[],n=[],r;function i(){var o=0,u=Math.max(1,t.length);for(n=new Array(u-1);++o<u;)n[o-1]=E3(e,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Tu(n,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(wt),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Ym().domain(e).range(t).unknown(r)},gn.apply(a,arguments)}function jm(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Tu(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return jm().domain(e).range(t).unknown(n)},gn.apply(i,arguments)}const qs=new Date,Gs=new Date;function ze(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const s=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return s;let l;do s.push(l=new Date(+a)),t(a,u),e(a);while(l<a&&a<o);return s},i.filter=a=>ze(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(qs.setTime(+a),Gs.setTime(+o),e(qs),e(Gs),Math.floor(n(qs,Gs))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const lu=ze(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ze(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):lu);lu.range;const Cn=1e3,Lt=Cn*60,Tn=Lt*60,Nn=Tn*24,zc=Nn*7,Hh=Nn*30,Us=Nn*365,Vt=ze(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Cn)},(e,t)=>(t-e)/Cn,e=>e.getUTCSeconds());Vt.range;const ka=ze(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cn)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getMinutes());ka.range;const $a=ze(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getUTCMinutes());$a.range;const Da=ze(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Cn-e.getMinutes()*Lt)},(e,t)=>{e.setTime(+e+t*Tn)},(e,t)=>(t-e)/Tn,e=>e.getHours());Da.range;const Na=ze(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Tn)},(e,t)=>(t-e)/Tn,e=>e.getUTCHours());Na.range;const Sr=ze(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lt)/Nn,e=>e.getDate()-1);Sr.range;const ju=ze(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Nn,e=>e.getUTCDate()-1);ju.range;const Xu=ze(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Nn,e=>Math.floor(e/Nn));Xu.range;function Er(e){return ze(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Lt)/zc)}const ii=Er(0),la=Er(1),Xm=Er(2),Zm=Er(3),Mr=Er(4),Km=Er(5),Qm=Er(6);ii.range;la.range;Xm.range;Zm.range;Mr.range;Km.range;Qm.range;function Cr(e){return ze(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zc)}const ai=Cr(0),ca=Cr(1),Jm=Cr(2),ep=Cr(3),xr=Cr(4),tp=Cr(5),np=Cr(6);ai.range;ca.range;Jm.range;ep.range;xr.range;tp.range;np.range;const Fa=ze(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Fa.range;const Ba=ze(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ba.range;const jt=ze(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());jt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ze(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});jt.range;const Xt=ze(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ze(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Xt.range;function rp(e,t,n,r,i,a){const o=[[Vt,1,Cn],[Vt,5,5*Cn],[Vt,15,15*Cn],[Vt,30,30*Cn],[a,1,Lt],[a,5,5*Lt],[a,15,15*Lt],[a,30,30*Lt],[i,1,Tn],[i,3,3*Tn],[i,6,6*Tn],[i,12,12*Tn],[r,1,Nn],[r,2,2*Nn],[n,1,zc],[t,1,Hh],[t,3,3*Hh],[e,1,Us]];function u(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:s(l,c,f),m=d?d.range(l,+c+1):[];return h?m.reverse():m}function s(l,c,f){const h=Math.abs(c-l)/f,d=Cu(([,,g])=>g).right(o,h);if(d===o.length)return e.every(pl(l/Us,c/Us,f));if(d===0)return lu.every(Math.max(pl(l,c,f),1));const[m,p]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return m.every(p)}return[u,s]}const[q6,ip]=rp(Xt,Ba,ai,Xu,Na,$a),[G6,U6]=rp(jt,Fa,ii,Sr,Da,ka);function zs(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Hs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Pi(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function z6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,l=Ai(i),c=Si(i),f=Ai(a),h=Si(a),d=Ai(o),m=Si(o),p=Ai(u),g=Si(u),y=Ai(s),b=Si(s),v={a:re,A:ne,b:Q,B:q,c:null,d:Zh,e:Zh,f:h7,g:M7,G:P7,H:l7,I:c7,j:f7,L:ap,m:d7,M:m7,p:U,q:z,Q:Jh,s:ed,S:p7,u:b7,U:g7,V:y7,w:w7,W:v7,x:null,X:null,y:_7,Y:x7,Z:A7,"%":Qh},w={a:W,A:oe,b:de,B:ie,c:null,d:Kh,e:Kh,f:T7,g:O7,G:G7,H:S7,I:E7,j:C7,L:up,m:k7,M:$7,p:Y,q:V,Q:Jh,s:ed,S:D7,u:N7,U:F7,V:B7,w:L7,W:I7,x:null,X:null,y:R7,Y:q7,Z:U7,"%":Qh},M={a:N,A,b:L,B:R,c:C,d:jh,e:jh,f:a7,g:Yh,G:Vh,H:Xh,I:Xh,j:t7,L:i7,m:e7,M:n7,p:$,q:J6,Q:u7,s:s7,S:r7,u:j6,U:X6,V:Z6,w:Y6,W:K6,x:S,X:I,y:Yh,Y:Vh,Z:Q6,"%":o7};v.x=_(n,v),v.X=_(r,v),v.c=_(t,v),w.x=_(n,w),w.X=_(r,w),w.c=_(t,w);function _(F,H){return function(j){var D=[],be=-1,J=0,le=F.length,_e,Fe,tt;for(j instanceof Date||(j=new Date(+j));++be<le;)F.charCodeAt(be)===37&&(D.push(F.slice(J,be)),(Fe=Wh[_e=F.charAt(++be)])!=null?_e=F.charAt(++be):Fe=_e==="e"?" ":"0",(tt=H[_e])&&(_e=tt(j,Fe)),D.push(_e),J=be+1);return D.push(F.slice(J,be)),D.join("")}}function x(F,H){return function(j){var D=Pi(1900,void 0,1),be=E(D,F,j+="",0),J,le;if(be!=j.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(H&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(J=Hs(Pi(D.y,0,1)),le=J.getUTCDay(),J=le>4||le===0?ca.ceil(J):ca(J),J=ju.offset(J,(D.V-1)*7),D.y=J.getUTCFullYear(),D.m=J.getUTCMonth(),D.d=J.getUTCDate()+(D.w+6)%7):(J=zs(Pi(D.y,0,1)),le=J.getDay(),J=le>4||le===0?la.ceil(J):la(J),J=Sr.offset(J,(D.V-1)*7),D.y=J.getFullYear(),D.m=J.getMonth(),D.d=J.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),le="Z"in D?Hs(Pi(D.y,0,1)).getUTCDay():zs(Pi(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(le+5)%7:D.w+D.U*7-(le+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,Hs(D)):zs(D)}}function E(F,H,j,D){for(var be=0,J=H.length,le=j.length,_e,Fe;be<J;){if(D>=le)return-1;if(_e=H.charCodeAt(be++),_e===37){if(_e=H.charAt(be++),Fe=M[_e in Wh?H.charAt(be++):_e],!Fe||(D=Fe(F,j,D))<0)return-1}else if(_e!=j.charCodeAt(D++))return-1}return D}function $(F,H,j){var D=l.exec(H.slice(j));return D?(F.p=c.get(D[0].toLowerCase()),j+D[0].length):-1}function N(F,H,j){var D=d.exec(H.slice(j));return D?(F.w=m.get(D[0].toLowerCase()),j+D[0].length):-1}function A(F,H,j){var D=f.exec(H.slice(j));return D?(F.w=h.get(D[0].toLowerCase()),j+D[0].length):-1}function L(F,H,j){var D=y.exec(H.slice(j));return D?(F.m=b.get(D[0].toLowerCase()),j+D[0].length):-1}function R(F,H,j){var D=p.exec(H.slice(j));return D?(F.m=g.get(D[0].toLowerCase()),j+D[0].length):-1}function C(F,H,j){return E(F,t,H,j)}function S(F,H,j){return E(F,n,H,j)}function I(F,H,j){return E(F,r,H,j)}function re(F){return o[F.getDay()]}function ne(F){return a[F.getDay()]}function Q(F){return s[F.getMonth()]}function q(F){return u[F.getMonth()]}function U(F){return i[+(F.getHours()>=12)]}function z(F){return 1+~~(F.getMonth()/3)}function W(F){return o[F.getUTCDay()]}function oe(F){return a[F.getUTCDay()]}function de(F){return s[F.getUTCMonth()]}function ie(F){return u[F.getUTCMonth()]}function Y(F){return i[+(F.getUTCHours()>=12)]}function V(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var H=_(F+="",v);return H.toString=function(){return F},H},parse:function(F){var H=x(F+="",!1);return H.toString=function(){return F},H},utcFormat:function(F){var H=_(F+="",w);return H.toString=function(){return F},H},utcParse:function(F){var H=x(F+="",!0);return H.toString=function(){return F},H}}}var Wh={"-":"",_:" ",0:"0"},Je=/^\s*\d+/,H6=/^%/,W6=/[\\^$*+?|[\]().{}]/g;function Me(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function V6(e){return e.replace(W6,"\\$&")}function Ai(e){return new RegExp("^(?:"+e.map(V6).join("|")+")","i")}function Si(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Y6(e,t,n){var r=Je.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function j6(e,t,n){var r=Je.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function X6(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Z6(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function K6(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Vh(e,t,n){var r=Je.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yh(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Q6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function J6(e,t,n){var r=Je.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function e7(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function jh(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function t7(e,t,n){var r=Je.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Xh(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function n7(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function r7(e,t,n){var r=Je.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function i7(e,t,n){var r=Je.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function a7(e,t,n){var r=Je.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function o7(e,t,n){var r=H6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function u7(e,t,n){var r=Je.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function s7(e,t,n){var r=Je.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Zh(e,t){return Me(e.getDate(),t,2)}function l7(e,t){return Me(e.getHours(),t,2)}function c7(e,t){return Me(e.getHours()%12||12,t,2)}function f7(e,t){return Me(1+Sr.count(jt(e),e),t,3)}function ap(e,t){return Me(e.getMilliseconds(),t,3)}function h7(e,t){return ap(e,t)+"000"}function d7(e,t){return Me(e.getMonth()+1,t,2)}function m7(e,t){return Me(e.getMinutes(),t,2)}function p7(e,t){return Me(e.getSeconds(),t,2)}function b7(e){var t=e.getDay();return t===0?7:t}function g7(e,t){return Me(ii.count(jt(e)-1,e),t,2)}function op(e){var t=e.getDay();return t>=4||t===0?Mr(e):Mr.ceil(e)}function y7(e,t){return e=op(e),Me(Mr.count(jt(e),e)+(jt(e).getDay()===4),t,2)}function w7(e){return e.getDay()}function v7(e,t){return Me(la.count(jt(e)-1,e),t,2)}function _7(e,t){return Me(e.getFullYear()%100,t,2)}function M7(e,t){return e=op(e),Me(e.getFullYear()%100,t,2)}function x7(e,t){return Me(e.getFullYear()%1e4,t,4)}function P7(e,t){var n=e.getDay();return e=n>=4||n===0?Mr(e):Mr.ceil(e),Me(e.getFullYear()%1e4,t,4)}function A7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Me(t/60|0,"0",2)+Me(t%60,"0",2)}function Kh(e,t){return Me(e.getUTCDate(),t,2)}function S7(e,t){return Me(e.getUTCHours(),t,2)}function E7(e,t){return Me(e.getUTCHours()%12||12,t,2)}function C7(e,t){return Me(1+ju.count(Xt(e),e),t,3)}function up(e,t){return Me(e.getUTCMilliseconds(),t,3)}function T7(e,t){return up(e,t)+"000"}function k7(e,t){return Me(e.getUTCMonth()+1,t,2)}function $7(e,t){return Me(e.getUTCMinutes(),t,2)}function D7(e,t){return Me(e.getUTCSeconds(),t,2)}function N7(e){var t=e.getUTCDay();return t===0?7:t}function F7(e,t){return Me(ai.count(Xt(e)-1,e),t,2)}function sp(e){var t=e.getUTCDay();return t>=4||t===0?xr(e):xr.ceil(e)}function B7(e,t){return e=sp(e),Me(xr.count(Xt(e),e)+(Xt(e).getUTCDay()===4),t,2)}function L7(e){return e.getUTCDay()}function I7(e,t){return Me(ca.count(Xt(e)-1,e),t,2)}function R7(e,t){return Me(e.getUTCFullYear()%100,t,2)}function O7(e,t){return e=sp(e),Me(e.getUTCFullYear()%100,t,2)}function q7(e,t){return Me(e.getUTCFullYear()%1e4,t,4)}function G7(e,t){var n=e.getUTCDay();return e=n>=4||n===0?xr(e):xr.ceil(e),Me(e.getUTCFullYear()%1e4,t,4)}function U7(){return"+0000"}function Qh(){return"%"}function Jh(e){return+e}function ed(e){return Math.floor(+e/1e3)}var Fr,Hc,La;z7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function z7(e){return Fr=z6(e),Hc=Fr.format,Fr.parse,La=Fr.utcFormat,Fr.utcParse,Fr}function H7(e){return new Date(e)}function W7(e){return e instanceof Date?+e:+new Date(+e)}function Wc(e,t,n,r,i,a,o,u,s,l){var c=Rm(),f=c.invert,h=c.domain,d=l(".%L"),m=l(":%S"),p=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),v=l("%B"),w=l("%Y");function M(_){return(s(_)<_?d:u(_)<_?m:o(_)<_?p:a(_)<_?g:r(_)<_?i(_)<_?y:b:n(_)<_?v:w)(_)}return c.invert=function(_){return new Date(f(_))},c.domain=function(_){return arguments.length?h(Array.from(_,W7)):h().map(H7)},c.ticks=function(_){var x=h();return e(x[0],x[x.length-1],_??10)},c.tickFormat=function(_,x){return x==null?M:l(x)},c.nice=function(_){var x=h();return(!_||typeof _.range!="function")&&(_=t(x[0],x[x.length-1],_??10)),_?h(qm(x,_)):c},c.copy=function(){return Ca(c,Wc(e,t,n,r,i,a,o,u,s,l))},c}function V7(){return gn.apply(Wc(G6,U6,jt,Fa,ii,Sr,Da,ka,Vt,Hc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Y7(){return gn.apply(Wc(q6,ip,Xt,Ba,ai,ju,Na,$a,Vt,La).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ku(){var e=0,t=.5,n=1,r=1,i,a,o,u,s,l=Bt,c,f=!1,h;function d(p){return isNaN(p=+p)?h:(p=.5+((p=+c(p))-a)*(r*p<r*a?u:s),l(f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),a=c(t=+t),o=c(n=+n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(l=p,d):l};function m(p){return function(g){var y,b,v;return arguments.length?([y,b,v]=g,l=Ou(p,[y,b,v]),d):[l(0),l(.5),l(1)]}}return d.range=m(Sa),d.rangeRound=m($c),d.unknown=function(p){return arguments.length?(h=p,d):h},function(p){return c=p,i=p(e),a=p(t),o=p(n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function lp(){var e=Ta(Ku()(Bt));return e.copy=function(){return Zu(e,lp())},Wu.apply(e,arguments)}function cp(){var e=Gm(Ku()).domain([.1,1,10]);return e.copy=function(){return Zu(e,cp()).base(e.base())},Wu.apply(e,arguments)}function fp(){var e=zm(Ku());return e.copy=function(){return Zu(e,fp()).constant(e.constant())},Wu.apply(e,arguments)}function hp(){var e=Wm(Ku());return e.copy=function(){return Zu(e,hp()).exponent(e.exponent())},Wu.apply(e,arguments)}function pe(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const j7=pe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),X7=pe("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Z7=pe("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),K7=pe("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Q7=pe("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),J7=pe("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),e4=pe("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),t4=pe("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),n4=pe("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),r4=pe("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ke=e=>Uv(e[e.length-1]);var dp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(pe);const mp=ke(dp);var pp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(pe);const bp=ke(pp);var gp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(pe);const yp=ke(gp);var wp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(pe);const vp=ke(wp);var Xl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(pe);const cu=ke(Xl);var _p=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(pe);const Mp=ke(_p);var Zl=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(pe);const fu=ke(Zl);var xp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(pe);const Pp=ke(xp);var Ap=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(pe);const Sp=ke(Ap);var Ep=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(pe);const Cp=ke(Ep);var Tp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(pe);const kp=ke(Tp);var $p=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(pe);const Dp=ke($p);var Np=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(pe);const Fp=ke(Np);var Bp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(pe);const Lp=ke(Bp);var Ip=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(pe);const Rp=ke(Ip);var Op=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(pe);const qp=ke(Op);var Gp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(pe);const Up=ke(Gp);var zp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(pe);const Hp=ke(zp);var Wp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(pe);const Vp=ke(Wp);var Yp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(pe);const jp=ke(Yp);var Xp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(pe);const Zp=ke(Xp);var Kp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(pe);const Qp=ke(Kp);var Jp=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(pe);const eb=ke(Jp);var tb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(pe);const nb=ke(tb);var rb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(pe);const ib=ke(rb);var ab=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(pe);const ob=ke(ab);var ub=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(pe);const sb=ke(ub);function lb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const cb=Dc(mn(300,.5,0),mn(-240,.5,1));var fb=Dc(mn(-100,.75,.35),mn(80,1.5,.8)),hb=Dc(mn(260,.75,.35),mn(80,1.5,.8)),so=mn();function db(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return so.h=360*e-100,so.s=1.5-1.5*t,so.l=.8-.9*t,so+""}var lo=jn(),i4=Math.PI/3,a4=Math.PI*2/3;function mb(e){var t;return e=(.5-e)*Math.PI,lo.r=255*(t=Math.sin(e))*t,lo.g=255*(t=Math.sin(e+i4))*t,lo.b=255*(t=Math.sin(e+a4))*t,lo+""}function pb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Qu(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const bb=Qu(pe("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var gb=Qu(pe("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),yb=Qu(pe("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),wb=Qu(pe("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ye(e){return function(){return e}}const vb=Math.cos,Vc=Math.min,hu=Math.sin,He=Math.sqrt,td=1e-12,du=Math.PI,Ju=2*du;function _b(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new em(t)}function Mb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xb(e){this._context=e}xb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ia(e){return new xb(e)}function Pb(e){return e[0]}function Ab(e){return e[1]}function Sb(e,t){var n=Ye(!0),r=null,i=Ia,a=null,o=_b(u);e=typeof e=="function"?e:e===void 0?Pb:Ye(e),t=typeof t=="function"?t:t===void 0?Ab:Ye(t);function u(s){var l,c=(s=Mb(s)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=c;++l)!(l<c&&n(f=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,l,s),+t(f,l,s));if(d)return a=null,d+""||null}return u.x=function(s){return arguments.length?(e=typeof s=="function"?s:Ye(+s),u):e},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:Ye(+s),u):t},u.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ye(!!s),u):n},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}function o4(e,t,n){var r=null,i=Ye(!0),a=null,o=Ia,u=null,s=_b(l);e=typeof e=="function"?e:e===void 0?Pb:Ye(+e),t=typeof t=="function"?t:Ye(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Ab:Ye(+n);function l(f){var h,d,m,p=(f=Mb(f)).length,g,y=!1,b,v=new Array(p),w=new Array(p);for(a==null&&(u=o(b=s())),h=0;h<=p;++h){if(!(h<p&&i(g=f[h],h,f))===y)if(y=!y)d=h,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),m=h-1;m>=d;--m)u.point(v[m],w[m]);u.lineEnd(),u.areaEnd()}y&&(v[h]=+e(g,h,f),w[h]=+t(g,h,f),u.point(r?+r(g,h,f):v[h],n?+n(g,h,f):w[h]))}if(b)return u=null,b+""||null}function c(){return Sb().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ye(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ye(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ye(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ye(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ye(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ye(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ye(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(u=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=u=null:u=o(a=f),l):a},l}class Eb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function u4(e){return new Eb(e,!0)}function s4(e){return new Eb(e,!1)}const l4=He(3),Cb={draw(e,t){const n=He(t+Vc(t/28,.75))*.59436,r=n/2,i=r*l4;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},fa={draw(e,t){const n=He(t/du);e.moveTo(n,0),e.arc(0,0,n,0,Ju)}},Tb={draw(e,t){const n=He(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},kb=He(1/3),c4=kb*2,$b={draw(e,t){const n=He(t/c4),r=n*kb;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Db={draw(e,t){const n=He(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Nb={draw(e,t){const n=He(t-Vc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Fb={draw(e,t){const n=He(t),r=-n/2;e.rect(r,r,n,n)}},Bb={draw(e,t){const n=He(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},f4=.8908130915292852,Lb=hu(du/10)/hu(7*du/10),h4=hu(Ju/10)*Lb,d4=-vb(Ju/10)*Lb,Ib={draw(e,t){const n=He(t*f4),r=h4*n,i=d4*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Ju*a/5,u=vb(o),s=hu(o);e.lineTo(s*n,-u*n),e.lineTo(u*r-s*i,s*r+u*i)}e.closePath()}},Ws=He(3),Rb={draw(e,t){const n=-He(t/(Ws*3));e.moveTo(0,n*2),e.lineTo(-Ws*n,-n),e.lineTo(Ws*n,-n),e.closePath()}},m4=He(3),Ob={draw(e,t){const n=He(t)*.6824,r=n/2,i=n*m4/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Tt=-.5,kt=He(3)/2,Kl=1/He(12),p4=(Kl/2+1)*3,qb={draw(e,t){const n=He(t/p4),r=n/2,i=n*Kl,a=r,o=n*Kl+n,u=-a,s=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,s),e.lineTo(Tt*r-kt*i,kt*r+Tt*i),e.lineTo(Tt*a-kt*o,kt*a+Tt*o),e.lineTo(Tt*u-kt*s,kt*u+Tt*s),e.lineTo(Tt*r+kt*i,Tt*i-kt*r),e.lineTo(Tt*a+kt*o,Tt*o-kt*a),e.lineTo(Tt*u+kt*s,Tt*s-kt*u),e.closePath()}},Gb={draw(e,t){const n=He(t-Vc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},b4=[fa,Tb,$b,Fb,Ib,Rb,qb],g4=[fa,Nb,Gb,Ob,Cb,Bb,Db];function Xn(){}function mu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function es(e){this._context=e}es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y4(e){return new es(e)}function Ub(e){this._context=e}Ub.prototype={areaStart:Xn,areaEnd:Xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w4(e){return new Ub(e)}function zb(e){this._context=e}zb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v4(e){return new zb(e)}function Hb(e,t){this._basis=new es(e),this._beta=t}Hb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,u=-1,s;++u<=n;)s=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+s*a),this._beta*t[u]+(1-this._beta)*(i+s*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const _4=function e(t){function n(r){return t===1?new es(r):new Hb(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function pu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Yc(e,t){this._context=e,this._k=(1-t)/6}Yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const M4=function e(t){function n(r){return new Yc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function jc(e,t){this._context=e,this._k=(1-t)/6}jc.prototype={areaStart:Xn,areaEnd:Xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const x4=function e(t){function n(r){return new jc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Xc(e,t){this._context=e,this._k=(1-t)/6}Xc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P4=function e(t){function n(r){return new Xc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Zc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>td){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>td){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Wb(e,t){this._context=e,this._alpha=t}Wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Zc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A4=function e(t){function n(r){return t?new Wb(r,t):new Yc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Vb(e,t){this._context=e,this._alpha=t}Vb.prototype={areaStart:Xn,areaEnd:Xn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Zc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S4=function e(t){function n(r){return t?new Vb(r,t):new jc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Yb(e,t){this._context=e,this._alpha=t}Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Zc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E4=function e(t){function n(r){return t?new Yb(r,t):new Xc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function jb(e){this._context=e}jb.prototype={areaStart:Xn,areaEnd:Xn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function C4(e){return new jb(e)}function nd(e){return e<0?-1:1}function rd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(nd(a)+nd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function id(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Vs(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function bu(e){this._context=e}bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Vs(this,this._t0,id(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Vs(this,id(this,n=rd(this,e,t)),n);break;default:Vs(this,this._t0,n=rd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Xb(e){this._context=new Zb(e)}(Xb.prototype=Object.create(bu.prototype)).point=function(e,t){bu.prototype.point.call(this,t,e)};function Zb(e){this._context=e}Zb.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function T4(e){return new bu(e)}function k4(e){return new Xb(e)}function Kb(e){this._context=e}Kb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=ad(e),i=ad(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ad(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function $4(e){return new Kb(e)}function ts(e,t){this._context=e,this._t=t}ts.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function D4(e){return new ts(e,.5)}function N4(e){return new ts(e,0)}function F4(e){return new ts(e,1)}function Gi(e,t,n){this.k=e,this.x=t,this.y=n}Gi.prototype={constructor:Gi,scale:function(e){return e===1?this:new Gi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Gi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Gi.prototype;const B4="modulepreload",L4=function(e){return"/rhythm-vis/"+e},od={},Br=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=L4(o),o in od)return;od[o]=!0;const u=o.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.href===o&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":B4,u||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),u)return new Promise((f,h)=>{c.addEventListener("load",f),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function I4(e){if(e){if(e=new Uint8Array(e.buffer||e),O4(e))return"wav";if(R4(e))return"mp3";if(G4(e))return"flac";if(U4(e))return"m4a";if(z4(e))return"opus";if(q4(e))return"oga";if(H4(e))return"qoa"}}function R4(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function O4(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function q4(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function G4(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function U4(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function z4(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function H4(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let W4=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],a=r,o=0;a<this.length&&o<t.length;a++,o++)t[o]=i[a]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var a=r,o=0;a<this.length&&o<t.length;a++,o++)i[a]=t[o]}};const V4=globalThis.AudioBuffer||W4;async function Y4(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=I4(e);if(!t)throw Error("Cannot detect audio format");if(!mt[t])throw Error("Missing decoder for "+t+" format");return mt[t](e)}const mt={async oga(e){let{decoder:t}=mt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Br(()=>import("./index-BOwHdJY4.js"),__vite__mapDeps([0,1,2]));await(mt.oga.decoder=t=new n).ready}return e&&Lr(await t.decodeFile(e))},async mp3(e){let{decoder:t}=mt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Br(()=>import("./index-DJiXs683.js"),__vite__mapDeps([3,2]));await(mt.mp3.decoder=t=new n).ready}return e&&Lr(await t.decode(e))},async flac(e){let{decoder:t}=mt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Br(()=>import("./index-BFoiwJSS.js"),__vite__mapDeps([4,1,2]));await(mt.flac.decoder=t=new n).ready}return e&&Lr(await t.decode(e))},async opus(e){let{decoder:t}=mt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Br(()=>import("./index-BiFmGQMx.js"),__vite__mapDeps([5,1,2]));await(mt.opus.decoder=t=new n).ready}return e&&Lr(await t.decodeFile(e))},async wav(e){let{decode:t}=mt.wav;if(!t){let n=await Br(()=>import("./index-Cs-3Ui_B.js").then(r=>r.i),__vite__mapDeps([]));t=mt.wav.decode=n.default.decode}return e&&Lr(await t(e))},async qoa(e){let{decode:t}=mt.qoa;return t||(mt.qoa.decode=t=(await Br(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),e&&Lr(await t(e))}};function Lr({channelData:e,sampleRate:t}){let n=new V4({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var j4=X4;function X4(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,a=i===3?32:16,o;return n===2?o=K4(e.getChannelData(0),e.getChannelData(1)):o=e.getChannelData(0),Z4(o,i,r,n,a)}function Z4(e,t,n,r,i){var a=i/8,o=r*a,u=new ArrayBuffer(44+e.length*a),s=new DataView(u);return co(s,0,"RIFF"),s.setUint32(4,36+e.length*a,!0),co(s,8,"WAVE"),co(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,t,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*o,!0),s.setUint16(32,o,!0),s.setUint16(34,i,!0),co(s,36,"data"),s.setUint32(40,e.length*a,!0),t===1?J4(s,44,e):Q4(s,44,e),u}function K4(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=t[a],a++;return r}function Q4(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function J4(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function co(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const e9=Qb(j4);async function Jb(e){const n=await(await fetch(e)).arrayBuffer();return await Y4(n)}function t9(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),a=new Float32Array(Math.ceil(r*e.sampleRate));for(const o of t){const u=Math.round(o*e.sampleRate);let s=1;for(let l=0;l<i.length;++l)s=Math.max(0,s-2/40100),a[u+l]=i[l]*s}return a}function Kc(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([e9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function n9(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function Ql(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const a=i.audioBuffer.getChannelData(0);for(const o of i.times){const u=Math.round(o*n);for(let s=0;s<a.length;++s)r[u+s]=Math.min(r[u+s]+a[s],1)}}return r}function Zn(e){return e!=null&&!Number.isNaN(e)}function Zt(e,t){return+Zn(t)-+Zn(e)||wt(e,t)}function gu(e,t){return+Zn(t)-+Zn(e)||xa(e,t)}function Qc(e){return e!=null&&`${e}`!=""}function eg(e){return isFinite(e)?e:NaN}function ns(e){return e>0&&isFinite(e)?e:NaN}function Jc(e){return e<0&&isFinite(e)?e:NaN}function r9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${i9(e.getUTCFullYear())}-${An(e.getUTCMonth()+1,2)}-${An(e.getUTCDate(),2)}${n||r||i||a?`T${An(n,2)}:${An(r,2)}${i||a?`:${An(i,2)}${a?`.${An(a,3)}`:""}`:""}Z`:""}`}function i9(e){return e<0?`-${An(-e,6)}`:e>9999?`+${An(e,6)}`:An(e,4)}function An(e,t){return`${e}`.padStart(t,"0")}const a9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function tg(e,t){return a9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Gr=1e3,Hn=Gr*60,Wn=Hn*60,pn=Wn*24,nn=pn*7,mr=pn*30,Gn=pn*365,Ys=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Gr],["5 seconds",5*Gr],["15 seconds",15*Gr],["30 seconds",30*Gr],["minute",Hn],["5 minutes",5*Hn],["15 minutes",15*Hn],["30 minutes",30*Hn],["hour",Wn],["3 hours",3*Wn],["6 hours",6*Wn],["12 hours",12*Wn],["day",pn],["2 days",2*pn],["week",nn],["2 weeks",2*nn],["month",mr],["3 months",3*mr],["6 months",6*mr],["year",Gn],["2 years",2*Gn],["5 years",5*Gn],["10 years",10*Gn],["20 years",20*Gn],["50 years",50*Gn],["100 years",100*Gn]],ef=new Map([["second",Gr],["minute",Hn],["hour",Wn],["day",pn],["monday",nn],["tuesday",nn],["wednesday",nn],["thursday",nn],["friday",nn],["saturday",nn],["sunday",nn],["week",nn],["month",mr],["year",Gn]]),ng=new Map([["second",Vt],["minute",ka],["hour",Da],["day",Sr],["monday",la],["tuesday",Xm],["wednesday",Zm],["thursday",Mr],["friday",Km],["saturday",Qm],["sunday",ii],["week",ii],["month",Fa],["year",jt]]),tf=new Map([["second",Vt],["minute",$a],["hour",Na],["day",Xu],["monday",ca],["tuesday",Jm],["wednesday",ep],["thursday",xr],["friday",tp],["saturday",np],["sunday",ai],["week",ai],["month",Ba],["year",Xt]]),Ra=Symbol("intervalDuration"),rs=Symbol("intervalType");for(const[e,t]of ng)t[Ra]=ef.get(e),t[rs]="time";for(const[e,t]of tf)t[Ra]=ef.get(e),t[rs]="utc";const Ui=[["year",Xt,"utc"],["month",Ba,"utc"],["day",Xu,"utc",6*mr],["hour",Na,"utc",3*pn],["minute",$a,"utc",6*Wn],["second",Vt,"utc",30*Hn]],Eo=[["year",jt,"time"],["month",Fa,"time"],["day",Sr,"time",6*mr],["hour",Da,"time",3*pn],["minute",ka,"time",6*Wn],["second",Vt,"time",30*Hn]],o9=[Ui[0],Eo[0],Ui[1],Eo[1],Ui[2],Eo[2],...Ui.slice(3)];function rg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=tf.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function ig(e){return ag(rg(e),"time")}function nf(e){return ag(rg(e),"utc")}function ag([e,t],n){let r=(n==="time"?ng:tf).get(e);return t>1&&(r=r.every(t),r[Ra]=ef.get(e)*t,r[rs]=n),r}function ud(e,t){if(!(t>1))return;const n=e[Ra];if(!Ys.some(([,i])=>i===n)||n%pn===0&&pn<n&&n<mr)return;const[r]=Ys[Cu(([,i])=>Math.log(i)).center(Ys,Math.log(n*t))];return(e[rs]==="time"?ig:nf)(r)}function sd(e,t,n){const r=t==="time"?Hc:La;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=u9(n);switch(e){case"millisecond":return Ir(r(".%L"),r(":%M:%S"),i);case"second":return Ir(r(":%S"),r("%-I:%M"),i);case"minute":return Ir(r("%-I:%M"),r("%p"),i);case"hour":return Ir(r("%-I %p"),r("%b %-d"),i);case"day":return Ir(r("%-d"),r("%b"),i);case"month":return Ir(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function u9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function s9(e){return e==="time"?Eo:e==="utc"?Ui:o9}function l9(e,t,n){const r=It($3(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return sd("millisecond","utc",n);for(const[i,a,o,u]of s9(e)){if(r>u||i==="hour"&&!r)break;if(t.every(s=>a.floor(s)>=s))return sd(i,o,n)}}function Ir(e,t,n){return(r,i,a)=>{const o=e(r,i),u=t(r,i),s=i-ui(a);return i!==s&&a[s]!==void 0&&u===t(a[s],s)?o:n(o,u)}}const ha=Object.getPrototypeOf(Uint8Array),c9=Object.prototype.toString,og=Symbol("reindex");function Xe(e,t,n){const r=typeof t;return r==="string"?ld(e,ug(t),n):r==="function"?ld(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ue(e,Oa(t),n):typeof(t==null?void 0:t.transform)=="function"?cd(t.transform(e),n):f9(cd(t,n),e==null?void 0:e[og])}function f9(e,t){return t?uf(e,t):e}function ld(e,t,n){return Ue(e,(n==null?void 0:n.prototype)instanceof ha?h9(t):t,n)}function cd(e,t){return t===void 0?St(e):e instanceof t?e:t.prototype instanceof ha&&!(e instanceof ha)?t.from(e,af):t.from(e)}function h9(e){return(t,n)=>af(e(t,n))}const Co=[null],ug=e=>t=>t[e],is={transform:In},st={transform:e=>e},d9=()=>1,m9=()=>!0,ct=e=>e==null?e:`${e}`,De=e=>e==null?e:+e,rf=e=>e?e[0]:void 0,Jl=e=>e?e[1]:void 0,Oa=e=>()=>e;function p9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Zr(n,t,r)}function un(e){return e instanceof ha?e:Ue(e,af,Float64Array)}function af(e){return e==null?NaN:Number(e)}function b9(e){return Ue(e,sg)}function sg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?tg(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Fn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:os(e)?[void 0,e]:[e,void 0]}function ht(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function lg(e,t,n){if(e!=null)return Jt(e,t,n)}function Jt(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function St(e){return e==null||e instanceof Array||e instanceof ha?e:Array.from(e)}function Ue(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function da(e,t=Array){return e instanceof t?e.slice():t.from(e)}function g9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function cg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function y9(e){return g9(e)||cg(e)||e.interval!==void 0}function er(e){return(e==null?void 0:e.toString)===c9}function ec(e){return er(e)&&(e.type!==void 0||e.domain!==void 0)}function as(e){return er(e)&&typeof e.transform!="function"}function oi(e){return as(e)&&e.value===void 0&&e.channel===void 0}function w9(e,t,n,r=st){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function qa(e,t){return e===void 0&&t===void 0?[rf,Jl]:[e,t]}function of({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Fn(t)),e===void 0&&([e]=Fn(n)),e}function In(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function uf(e,t){return Ue(t,n=>e[n],e.constructor)}function v9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function fr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function yu(e){let t;return[{transform:()=>t,label:Tr(e)},n=>t=n]}function xn(e){return e==null?[e]:yu(e)}function Tr(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function tc(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return _t(r)||_t(i)?Ue(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Ue(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function fg(e,t){const n=hg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ue(e,n):e}function hg(e,t){const n=sf(e,t);return n&&(r=>Zn(r)?n.floor(r):r)}function sf(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>gl(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>gl(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?ig:nf)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function gi(e,t){if(e=sf(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function M9(e,t){if(e=gi(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function x9(e){return Ur(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Ur(e){return typeof(e==null?void 0:e.range)=="function"}function Ga(e){return e===void 0||as(e)?e:{value:e}}function P9(e){return e==null?null:{transform:t=>Xe(t,e,Float64Array),label:Tr(e)}}function tr(e){return e&&typeof e[Symbol.iterator]=="function"}function dg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function fd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function _t(e){for(const t of e)if(t!=null)return t instanceof Date}function A9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&tg(t)}function S9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function E9(e){for(const t of e)if(t!=null)return typeof t=="number"}function js(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const C9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function os(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||C9.has(e))}function T9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function bt(e){return e==null||ma(e)}function ma(e){return/^\s*none\s*$/i.test(e)}function k9(e){return/^\s*round\s*$/i.test(e)}function nc(e,t){return lg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function us(e="middle"){return nc(e,"frameAnchor")}function ui(e){if(e==null)return;const t=e[0],n=e[e.length-1];return xa(t,n)}function $9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function D9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function mg(e){return tr(e)?D9(e):e}const sn=Symbol("position"),Rn=Symbol("color"),Ua=Symbol("radius"),za=Symbol("length"),Ha=Symbol("opacity"),ss=Symbol("symbol"),pg=Symbol("projection"),Ie=new Map([["x",sn],["y",sn],["fx",sn],["fy",sn],["r",Ua],["color",Rn],["opacity",Ha],["symbol",ss],["length",za],["projection",pg]]);function N9(e){return e===sn||e===pg}function F9(e){return e===sn||e===Ua||e===za||e===Ha}const B9=Math.sqrt(3),L9=2/B9,I9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*L9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},lf=new Map([["asterisk",Cb],["circle",fa],["cross",Tb],["diamond",$b],["diamond2",Db],["hexagon",I9],["plus",Nb],["square",Fb],["square2",Bb],["star",Ib],["times",Gb],["triangle",Rb],["triangle2",Ob],["wye",qb]]);function cf(e){return e&&typeof e.draw=="function"}function R9(e){return cf(e)?!0:typeof e!="string"?!1:lf.has(e.toLowerCase())}function ff(e){if(e==null||cf(e))return e;const t=lf.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function O9(e){if(e==null||cf(e))return[void 0,e];if(typeof e=="string"){const t=lf.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function ls({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=bg(e)),t!=null&&!oi(t)&&(r=Xs(r,hf(t))),n&&(r=Xs(r,gg))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||oi(t))&&{sort:t},transform:Xs(r,o)}}function si({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=bg(e)),t!=null&&!oi(t)&&(r=Zs(r,hf(t))),n&&(r=Zs(r,gg))),{...i,...(t===null||oi(t))&&{sort:t},initializer:Zs(r,a)}}function Xs(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,St(n),r,i)}}function Zs(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,u,s,l,c,f;return{data:u=n,facets:s=r,channels:o}=e.call(this,n,r,i,...a),{data:c=u,facets:f=s,channels:l}=t.call(this,u,s,{...i,...o},...a),{data:c,facets:f,channels:{...o,...l}}}}function q9(e,t){return(e.initializer!=null?si:ls)(e,t)}function bg(e){return(t,n)=>{const r=Xe(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function gg(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function G9(e,{sort:t,...n}={}){return{...(as(e)&&e.channel!==void 0?si:q9)(n,hf(e)),sort:oi(t)?t:null}}function hf(e){return(typeof e=="function"&&e.length!==1?U9:z9)(e)}function U9(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function z9(e){let t,n;({channel:t,value:e,order:n}={...Ga(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?gu:Zt),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Zt;break;case"descending":n=gu;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let u;if(t===void 0)u=Xe(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(u=o[t],!u)return{};u=u.value}const s=(l,c)=>n(u[l],u[c]);return{data:i,facets:a.map(l=>l.slice().sort(s))}}}function fo(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function H9(e,t,n=yg){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",K9]),t.href!=null&&e.href===void 0&&r.push(["href",mf]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?W9(i):n(i,a,t))}function yg(e,t,n,r=wg){let i;er(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,u]=yu(a.label);let s;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){a.initialize(l),s=u([])},scope(l,c){a.scope(l,c)},reduce(l,c){s.push(a.reduce(l,c))}}}function W9(e){return{name:e,initialize(){},scope(){},reduce(){}}}function wg(e,t,n,r=df){const i=_9(e,n),a=r(t,i);let o,u;return{label:Tr(a===wu?null:i,a.label),initialize(s){o=i===void 0?s:Xe(s,i),a.scope==="data"&&(u=a.reduceIndex(In(s),o))},scope(s,l){a.scope===s&&(u=a.reduceIndex(l,o))},reduce(s,l){return a.scope==null?a.reduceIndex(s,o,l):a.reduceIndex(s,o,u,l)}}}function hd(e,t){return t?ta(Du(e,n=>t[n]),rf):[[,e]]}function df(e,t,n=V9){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&er(e))return X9(e);if(typeof e=="function")return Z9(e);if(/^p\d{2}$/i.test(e))return Pn(p9(e));switch(`${e}`.toLowerCase()){case"first":return mf;case"last":return Q9;case"identity":return vg;case"count":return wu;case"distinct":return J9;case"sum":return t==null?wu:e8;case"proportion":return md(t,"data");case"proportion-facet":return md(t,"facet");case"deviation":return Pn(ku);case"min":return Pn(kn);case"min-index":return Pn(S3);case"max":return Pn(It);case"max-index":return Pn(A3);case"mean":return dd(Fu);case"median":return dd(bl);case"variance":return Pn(xc);case"mode":return Pn(k3)}return n(e)}function V9(e){throw new Error(`invalid reduce: ${e}`)}function Y9(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function j9(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>Zt(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function X9(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function Z9(e){return{reduceIndex(t,n,r){return e(uf(n,t),r)}}}function Pn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function dd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return _t(n)?new Date(r):r}}}const vg={reduceIndex(e,t){return uf(t,e)}},mf={reduceIndex(e,t){return t[e[0]]}},K9={reduceIndex(e,t){const r=ta(Hr(e,a=>a.length,a=>t[a]),Jl),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[` ${a.length.toLocaleString("en-US")} more`,Yn(a,Jl)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},Q9={reduceIndex(e,t){return t[e[e.length-1]]}},wu={label:"Frequency",reduceIndex(e){return e.length}},J9={label:"Distinct",reduceIndex(e,t){const n=new $u;for(const r of e)n.add(t[r]);return n.size}},e8=Pn(Yn);function md(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Yn(n,a=>r[a])/i}}function pa(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=Tr(r)},u){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),_g(u,{scale:t,type:n,value:Xe(e,r),label:o,filter:i,hint:a})}function t8(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,pa(t,r,n)]))}function n8(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Ue(a,o)]}));return n.channels=e,n}function _g(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&js(r,os)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&js(r,T9)?null:"opacity";break;case"symbol":n!==!0&&js(r,R9)?(t.scale=null,t.value=Ue(r,ff)):t.scale="symbol";break;default:t.scale=Ie.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ie.has(n))throw new Error(`unknown scale: ${n}`);return t}function r8(e,t,n,r,i){const{order:a,reverse:o,reduce:u=!0,limit:s}=i;for(const l in i){if(!Ie.has(l))continue;let{value:c,order:f=a,reverse:h=o,reduce:d=u,limit:m=s}=Ga(i[l]);const p=c==null?void 0:c.startsWith("-");if(p&&(c=c.slice(1)),f=f===void 0?p!==(c==="width"||c==="height")?xg:Mg:o8(f),d==null||d===!1)continue;const g=l==="fx"||l==="fy"?a8(t,r[l]):i8(n,l);if(!g)throw new Error(`missing channel for scale: ${l}`);const y=g.value,[b=0,v=1/0]=tr(m)?m:m<0?[m]:[0,m];if(c==null)g.domain=()=>{let w=Array.from(new $u(y));return h&&(w=w.reverse()),(b!==0||v!==1/0)&&(w=w.slice(b,v)),w};else{const w=c==="data"?e:c==="height"?pd(n,"y1","y2"):c==="width"?pd(n,"x1","x2"):rc(n,c,c==="y"?"y2":c==="x"?"x2":void 0),M=df(d===!0?"max":d,w);g.domain=()=>{let _=w3(In(y),x=>M.reduceIndex(x,w),x=>y[x]);return f&&_.sort(f),h&&_.reverse(),(b!==0||v!==1/0)&&(_=_.slice(b,v)),_.map(rf)}}}}function i8(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function a8(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const u of e[a])i[u]=o}return t}function pd(e,t,n){const r=rc(e,t),i=rc(e,n);return Ue(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function rc(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function o8(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return Mg;case"descending":return xg}throw new Error(`invalid order: ${e}`)}function Mg([e,t],[n,r]){return Zt(t,r)||Zt(e,n)}function xg([e,t],[n,r]){return gu(t,r)||Zt(e,n)}function bd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function u8(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const s8=u8(e=>new Intl.NumberFormat(e));function l8(e="en-US"){const t=s8(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function c8(e){return r9(e,"Invalid Date")}function f8(e="en-US"){const t=l8(e);return n=>(n instanceof Date?c8:typeof n=="number"?t:ct)(n)}const Pr=f8();let ic=0,ac;function h8(){const e=ic;return ic=0,ac=void 0,e}function Vn(e){e!==ac&&(ac=e,console.warn(e),++ic)}const gt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let d8=0;function gd(){return`plot-clip-${++d8}`}function m8(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:u,fillOpacity:s,stroke:l,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:g,opacity:y,mixBlendMode:b,imageFilter:v,paintOrder:w,pointerEvents:M,shapeRendering:_,channels:x},{ariaLabel:E,fill:$="currentColor",fillOpacity:N,stroke:A="none",strokeOpacity:L,strokeWidth:R,strokeLinecap:C,strokeLinejoin:S,strokeMiterlimit:I,paintOrder:re}){$===null&&(u=null,s=null),A===null&&(l=null,f=null),bt($)?!bt(A)&&(!bt(u)||x!=null&&x.fill)&&(A="none"):bt(A)&&(!bt(l)||x!=null&&x.stroke)&&($="none");const[ne,Q]=Fn(u,$),[q,U]=ht(s,N),[z,W]=Fn(l,A),[oe,de]=ht(f,L),[ie,Y]=ht(y);ma(W)||(c===void 0&&(c=R),d===void 0&&(d=C),h===void 0&&(h=S),m===void 0&&!k9(h)&&(m=I),!ma(Q)&&w===void 0&&(w=re));const[V,F]=ht(c);return $!==null&&(e.fill=et(Q,"currentColor"),e.fillOpacity=Ci(U,1)),A!==null&&(e.stroke=et(W,"none"),e.strokeWidth=Ci(F,1),e.strokeOpacity=Ci(de,1),e.strokeLinejoin=et(h,"miter"),e.strokeLinecap=et(d,"butt"),e.strokeMiterlimit=Ci(m,4),e.strokeDasharray=et(p,"none"),e.strokeDashoffset=et(g,"0")),e.target=ct(o),e.ariaLabel=ct(E),e.ariaDescription=ct(i),e.ariaHidden=ct(a),e.opacity=Ci(Y,1),e.mixBlendMode=et(b,"normal"),e.imageFilter=et(v,"none"),e.paintOrder=et(w,"normal"),e.pointerEvents=et(M,"auto"),e.shapeRendering=et(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:ne,scale:"auto",optional:!0},fillOpacity:{value:q,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:oe,scale:"auto",optional:!0},strokeWidth:{value:V,optional:!0},opacity:{value:ie,scale:"auto",optional:!0}}}function p8(e,t){t&&e.filter(n=>Qc(t[n])).append("title").call(g8,t)}function b8(e,t){t&&e.filter(([n])=>Qc(t[n])).append("title").call(y8,t)}function g8(e,t){t&&e.text(n=>Pr(t[n]))}function y8(e,t){t&&e.text(([n])=>Pr(t[n]))}function On(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&fe(e,"aria-label",h=>r[h]),a&&fe(e,"fill",h=>a[h]),o&&fe(e,"fill-opacity",h=>o[h]),u&&fe(e,"stroke",h=>u[h]),s&&fe(e,"stroke-opacity",h=>s[h]),l&&fe(e,"stroke-width",h=>l[h]),c&&fe(e,"opacity",h=>c[h]),f&&Eg(e,h=>f[h],t),n||p8(e,i)}function Pg(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&fe(e,"aria-label",([h])=>r[h]),a&&fe(e,"fill",([h])=>a[h]),o&&fe(e,"fill-opacity",([h])=>o[h]),u&&fe(e,"stroke",([h])=>u[h]),s&&fe(e,"stroke-opacity",([h])=>s[h]),l&&fe(e,"stroke-width",([h])=>l[h]),c&&fe(e,"opacity",([h])=>c[h]),f&&Eg(e,([h])=>f[h],t),n||b8(e,i)}function w8({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:o,opacity:u,href:s},{tip:l}){return[e,l?void 0:t,n,r,i,a,o,u,s].filter(c=>c!==void 0)}function v8(e,t,n){const r=Du(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Vn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Ag(e,t,n,r){const{z:i}=n,{z:a}=r,o=w8(r,n),u=[...t,...o];for(const s of a?v8(e,a,i):[e]){let l,c;e:for(const f of s){for(const h of u)if(!Zn(h[f])){c&&c.push(-1);continue e}if(l===void 0){c&&(yield c),l=o.map(h=>fr(h[f])),c=[f];continue}c.push(f);for(let h=0;h<o.length;++h)if(fr(o[h][f])!==l[h]){yield c,l=o.map(m=>fr(m[f])),c=[f];continue e}}c&&(yield c)}}function Sg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Jt(e,"clip",["frame","sphere"])),e}function _8(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:u,marginLeft:s,marginRight:l,marginTop:c,marginBottom:f}=n,h=gd();i=`url(#${h})`,e=qe("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",s).attr("y",c).attr("width",o-l-s).attr("height",u-c-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const u=gd();i=`url(#${u})`,e.append("clipPath").attr("id",u).append("path").attr("d",Uu(o)({type:"Sphere"}));break}}fe(e,"aria-label",t.ariaLabel),fe(e,"aria-description",t.ariaDescription),fe(e,"aria-hidden",t.ariaHidden),fe(e,"clip-path",i)}function qt(e,t,n,r){_8(e,t,n,r),fe(e,"fill",t.fill),fe(e,"fill-opacity",t.fillOpacity),fe(e,"stroke",t.stroke),fe(e,"stroke-width",t.strokeWidth),fe(e,"stroke-opacity",t.strokeOpacity),fe(e,"stroke-linejoin",t.strokeLinejoin),fe(e,"stroke-linecap",t.strokeLinecap),fe(e,"stroke-miterlimit",t.strokeMiterlimit),fe(e,"stroke-dasharray",t.strokeDasharray),fe(e,"stroke-dashoffset",t.strokeDashoffset),fe(e,"shape-rendering",t.shapeRendering),fe(e,"filter",t.imageFilter),fe(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;fe(e,"pointer-events",i)}function Gt(e,t){M8(e,"mix-blend-mode",t.mixBlendMode),fe(e,"opacity",t.opacity)}function Eg(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(Kr.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(Kr.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function fe(e,t,n){n!=null&&e.attr(t,n)}function M8(e,t,n){n!=null&&e.style(t,n)}function Et(e,t,{x:n,y:r},i=gt,a=gt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function et(e,t){if((e=ct(e))!==t)return e}function Ci(e,t){if((e=De(e))!==t)return e}const x8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function pf(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!x8.test(e))throw new Error(`invalid class name: ${e}`);return e}function bf(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Wa({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function gf(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Sg(n)}}function qe(e,{document:t}){return Yi(Lu(e).call(t.documentElement))}const Cg=Math.PI,vn=2*Cg,yd=.618;function P8({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let u,s,l="frame";if(er(e)){let M;if({type:e,domain:s,inset:M,insetTop:n=M!==void 0?M:n,insetRight:r=M!==void 0?M:r,insetBottom:i=M!==void 0?M:i,insetLeft:a=M!==void 0?M:a,clip:l=l,...u}=e,e==null)return}typeof e!="function"&&({type:e}=Tg(e));const{width:c,height:f,marginLeft:h,marginRight:d,marginTop:m,marginBottom:p}=o,g=c-h-d-a-r,y=f-m-p-n-i;if(e=e==null?void 0:e({width:g,height:y,clip:l,...u}),e==null)return;l=A8(l,h,m,c-d,f-p);let b=h+a,v=m+n,w;if(s!=null){const[[M,_],[x,E]]=Uu(e).bounds(s),$=Math.min(g/(x-M),y/(E-_));$>0?(b-=($*(M+x)-g)/2,v-=($*(_+E)-y)/2,w=Hl({point(N,A){this.stream.point(N*$+b,A*$+v)}})):Vn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=b===0&&v===0?kg():Hl({point(M,_){this.stream.point(M+b,_+v)}})),{stream:M=>e.stream(w.stream(l(M)))}}function Tg(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ht(h6,.7463,.4673);case"albers":return ho(Em,.7463,.4673);case"azimuthal-equal-area":return Ht(d6,4,4);case"azimuthal-equidistant":return Ht(m6,vn,vn);case"conic-conformal":return ho(g6,vn,vn);case"conic-equal-area":return ho(ou,6.1702,2.9781);case"conic-equidistant":return ho(v6,7.312,3.6282);case"equal-earth":return Ht(M6,5.4133,2.6347);case"equirectangular":return Ht(y6,vn,Cg);case"gnomonic":return Ht(x6,3.4641,3.4641);case"identity":return{type:kg};case"reflect-y":return{type:S8};case"mercator":return Ht(p6,vn,vn);case"orthographic":return Ht(P6,2,2);case"stereographic":return Ht(A6,2,2);case"transverse-mercator":return Ht(S6,vn,vn);default:throw new Error(`unknown projection type: ${e}`)}}function A8(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return fm(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ht(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:u})=>{var l,c,f;const s=e();return o!=null&&((l=s.precision)==null||l.call(s,o)),a!=null&&((c=s.rotate)==null||c.call(s,a)),typeof u=="number"&&((f=s.clipAngle)==null||f.call(s,u)),s.scale(Math.min(r/t,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/t}}function ho(e,t,n){const{type:r,aspectRatio:i}=Ht(e,t,n);return{type:a=>{const{parallels:o,domain:u,width:s,height:l}=a,c=r(a);return o!=null&&(c.parallels(o),u===void 0&&c.fitSize([s,l],{type:"Sphere"})),c},aspectRatio:i}}const kg=Oa({stream:e=>e}),S8=Oa(Hl({point(e,t){this.stream.point(e,-t)}}));function E8(e,t,n,r){const i=n[e],a=n[t],o=i.length,u=n[e]=new Float64Array(o).fill(NaN),s=n[t]=new Float64Array(o).fill(NaN);let l;const c=r.stream({point(f,h){u[l]=f,s[l]=h}});for(l=0;l<o;++l)c.point(i[l],a[l])}function C8({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(er(e)&&(e=e.type),e!=null)}function T8(e){if(typeof(e==null?void 0:e.stream)=="function")return yd;if(er(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=Tg(e);if(t)return t}return yd}}function k8(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,u){t.push(o),n.push(u)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)ur(o,a);return[r,i]}const $8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],$g=new Map([["accent",X7],["category10",j7],["dark2",Z7],["observable10",$8],["paired",K7],["pastel1",Q7],["pastel2",J7],["set1",e4],["set2",t4],["set3",n4],["tableau10",r4]]);function D8(e){return e!=null&&$g.has(`${e}`.toLowerCase())}const wd=new Map([...$g,["brbg",_n(dp,mp)],["prgn",_n(pp,bp)],["piyg",_n(gp,yp)],["puor",_n(wp,vp)],["rdbu",_n(Xl,cu)],["rdgy",_n(_p,Mp)],["rdylbu",_n(Zl,fu)],["rdylgn",_n(xp,Pp)],["spectral",_n(Ap,Sp)],["burd",vd(Xl,cu)],["buylrd",vd(Zl,fu)],["blues",Ve(Kp,Qp)],["greens",Ve(Jp,eb)],["greys",Ve(tb,nb)],["oranges",Ve(ub,sb)],["purples",Ve(rb,ib)],["reds",Ve(ab,ob)],["turbo",Mn(pb)],["viridis",Mn(bb)],["magma",Mn(gb)],["inferno",Mn(yb)],["plasma",Mn(wb)],["cividis",Mn(lb)],["cubehelix",Mn(cb)],["warm",Mn(fb)],["cool",Mn(hb)],["bugn",Ve(Ep,Cp)],["bupu",Ve(Tp,kp)],["gnbu",Ve($p,Dp)],["orrd",Ve(Np,Fp)],["pubu",Ve(Ip,Rp)],["pubugn",Ve(Bp,Lp)],["purd",Ve(Op,qp)],["rdpu",Ve(Gp,Up)],["ylgn",Ve(Wp,Vp)],["ylgnbu",Ve(zp,Hp)],["ylorbr",Ve(Yp,jp)],["ylorrd",Ve(Xp,Zp)],["rainbow",_d(db)],["sinebow",_d(mb)]]);function Ve(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Yt(t,n):e[n])}function _n(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Yt(t,n):e[n])}function vd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Yt(r=>t(1-r),n):e[n].slice().reverse())}function Mn(e){return({length:t})=>Yt(e,Math.max(2,Math.floor(t)))}function _d(e){return({length:t})=>Yt(e,Math.floor(t)+1).slice(0,-1)}function Dg(e){const t=`${e}`.toLowerCase();if(!wd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return wd.get(t)}function cs(e,t){const n=Dg(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function N8(e,t="greys"){const n=new Set,[r,i]=cs(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Md=new Map([["brbg",mp],["prgn",bp],["piyg",yp],["puor",vp],["rdbu",cu],["rdgy",Mp],["rdylbu",fu],["rdylgn",Pp],["spectral",Sp],["burd",e=>cu(1-e)],["buylrd",e=>fu(1-e)],["blues",Qp],["greens",eb],["greys",nb],["purples",ib],["reds",ob],["oranges",sb],["turbo",pb],["viridis",bb],["magma",gb],["inferno",yb],["plasma",wb],["cividis",lb],["cubehelix",cb],["warm",fb],["cool",hb],["bugn",Cp],["bupu",kp],["gnbu",Dp],["orrd",Fp],["pubugn",Lp],["pubu",Rp],["purd",qp],["rdpu",Up],["ylgnbu",Hp],["ylgn",Vp],["ylorbr",jp],["ylorrd",Zp],["rainbow",db],["sinebow",mb]]);function yf(e){const t=`${e}`.toLowerCase();if(!Md.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Md.get(t)}const F8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function B8(e){return e!=null&&F8.has(`${e}`.toLowerCase())}const Ng=e=>t=>e(1-t),Ks=[0,1],xd=new Map([["number",at],["rgb",wr],["hsl",t_],["hcl",i_],["lab",n_]]);function Fg(e){const t=`${e}`.toLowerCase();if(!xd.has(t))throw new Error(`unknown interpolator: ${t}`);return xd.get(t)}function Va(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:u=Lg(e,n),unknown:s,round:l,scheme:c,interval:f,range:h=Ie.get(e)===Ua?V8(n,u):Ie.get(e)===za?Y8(n,u):Ie.get(e)===Ha?Ks:void 0,interpolate:d=Ie.get(e)===Rn?c==null&&h!==void 0?wr:yf(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):l?$c:at,reverse:m}){if(f=gi(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=Fg(d)),m=!!m,h!==void 0){const p=(u=St(u)).length,g=(h=St(h)).length;if(p!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ou(d,h),h=void 0}}if(d.length===1?(m&&(d=Ng(d),m=!1),h===void 0&&(h=Float64Array.from(u,(p,g)=>g/(u.length-1)),h.length===2&&(h=Ks)),t.interpolate((h===Ks?Oa:vf)(d))):t.interpolate(d),o){const[p,g]=Dt(u);(p>0||g<0)&&(u=da(u),ui(u)!==Math.sign(p)?u[u.length-1]=0:u[0]=0)}return m&&(u=zo(u)),t.domain(u).unknown(s),i&&(t.nice(L8(i,r)),u=t.domain()),h!==void 0&&t.range(h),a&&t.clamp(a),{type:r,domain:u,range:h,scale:t,interpolate:d,interval:f}}function L8(e,t){return e===!0?void 0:typeof e=="number"?e:M9(e,t)}function I8(e,t,n){return Va(e,Uc(),t,n)}function R8(e,t,n){return Bg(e,t,{...n,exponent:.5})}function Bg(e,t,{exponent:n=1,...r}){return Va(e,Vm().exponent(n),t,{...r,type:"pow"})}function O8(e,t,{base:n=10,domain:r=j8(t),...i}){return Va(e,Um().base(n),t,{...i,domain:r})}function q8(e,t,{constant:n=1,...r}){return Va(e,Hm().constant(n),t,r)}function G8(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=X8(t),unknown:u,interpolate:s,reverse:l}){return n===void 0&&(n=s!==void 0?Yt(s,i):Ie.get(e)===Rn?cs(a,i):void 0),o.length>0&&(o=Ym(o,n===void 0?{length:i}:n).quantiles()),wf(e,t,{domain:o,range:n,reverse:l,unknown:u})}function U8(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=Lg(e,t),unknown:o,interpolate:u,reverse:s}){const[l,c]=Dt(a);let f;return n===void 0?(f=na(l,c,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=u!==void 0?Yt(u,r):Ie.get(e)===Rn?cs(i,r):void 0):(f=Yt(at(l,c),r+1).slice(1,-1),l instanceof Date&&(f=f.map(h=>new Date(h)))),ui(St(a))<0&&f.reverse(),wf(e,t,{domain:f,range:n,reverse:s,unknown:o})}function wf(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Yt(a,n.length+1):Ie.get(e)===Rn?cs(i,n.length+1):void 0,reverse:u}){n=St(n);const s=ui(n);if(!isNaN(s)&&!z8(n,s))throw new Error(`the ${e} scale has a non-monotonic domain`);return u&&(o=zo(o)),{type:"threshold",scale:jm(s<0?zo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function z8(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=xa(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function H8(e){return{type:"identity",scale:F9(Ie.get(e))?Om():t=>t}}function ba(e,t=eg){return e.length?[kn(e,({value:n})=>n===void 0?n:kn(n,t)),It(e,({value:n})=>n===void 0?n:It(n,t))]:[0,1]}function Lg(e,t){const n=Ie.get(e);return(n===Ua||n===Ha||n===za?W8:ba)(t)}function W8(e){return[0,e.length?It(e,({value:t})=>t===void 0?t:It(t,eg)):1]}function V8(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Zr(e,.5,({value:o})=>o===void 0?NaN:Zr(o,.25,ns)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/It(i);return a<1?i.map(o=>o*a):i}function Y8(e,t){const n=bl(e,({value:a})=>a===void 0?NaN:bl(a,Math.abs)),r=t.map(a=>12*a/n),i=60/It(r);return i<1?r.map(a=>a*i):r}function j8(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return ba(e,ns);if(n<0)return ba(e,Jc)}return[1,10]}function X8(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function vf(e){return(t,n)=>r=>e(t+r*(n-t))}function fs(e,t,n,r,{type:i,nice:a,clamp:o,domain:u=ba(r),unknown:s,pivot:l=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=Ie.get(e)===Rn?c==null&&f!==void 0?wr:yf(c!==void 0?c:"rdbu"):at,reverse:m}){l=+l,u=St(u);let[p,g]=u;if(u.length>2&&Vn(`Warning: the diverging ${e} scale domain contains extra elements.`),xa(p,g)<0&&([p,g]=[g,p],m=!m),p=Math.min(p,l),g=Math.max(g,l),typeof d!="function"&&(d=Fg(d)),f!==void 0&&(d=d.length===1?vf(d)(...f):Ou(d,f)),m&&(d=Ng(d)),h){const y=n.apply(l),b=y-n.apply(p),v=n.apply(g)-y;b<v?p=n.invert(y-v):b>v&&(g=n.invert(y+b))}return t.domain([p,l,g]).unknown(s).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,g],pivot:l,interpolate:d,scale:t}}function Z8(e,t,n){return fs(e,lp(),eM,t,n)}function K8(e,t,n){return Ig(e,t,{...n,exponent:.5})}function Ig(e,t,{exponent:n=1,...r}){return fs(e,hp().exponent(n=+n),rM(n),t,{...r,type:"diverging-pow"})}function Q8(e,t,{base:n=10,pivot:r=1,domain:i=ba(t,r<0?Jc:ns),...a}){return fs(e,cp().base(n=+n),tM,t,{domain:i,pivot:r,...a})}function J8(e,t,{constant:n=1,...r}){return fs(e,fp().constant(n=+n),iM(n),t,r)}const eM={apply(e){return e},invert(e){return e}},tM={apply:Math.log,invert:Math.exp},nM={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function rM(e){return e===.5?nM:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function iM(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Rg(e,t,n,r){return Va(e,t,n,r)}function aM(e,t,n){return Rg(e,V7(),t,n)}function oM(e,t,n){return Rg(e,Y7(),t,n)}const Ya=Symbol("ordinal");function Og(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:u,hint:s}){return i=gi(i,r),a===void 0&&(a=Gg(n,i,e)),(r==="categorical"||r===Ya)&&(r="ordinal"),u&&(a=zo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:s,interval:i}}function uM(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:u,...s}){r=gi(r,n),i===void 0&&(i=Gg(t,r,e));let l;if(Ie.get(e)===ss)l=cM(t),a=a===void 0?fM(l):Ue(a,ff);else if(Ie.get(e)===Rn&&(a===void 0&&(n==="ordinal"||n===Ya)&&(a=N8(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const c=yf(o),f=a[0],h=a[1]-a[0];a=({length:d})=>Yt(m=>c(f+h*m),d)}else a=Dg(o);if(u===Vl)throw new Error(`implicit unknown on ${e} scale is not supported`);return Og(e,Gc().unknown(u),t,{...s,type:n,domain:i,range:a,hint:l})}function sM(e,t,{align:n=.5,padding:r=.5,...i}){return qg(E6().align(n).padding(r),t,i,e)}function lM(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return qg(Vu().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function qg(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=Og(r,e,t,n),e.round=i,e}function Gg(e,t,n){const r=new $u;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Dt(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Ie.get(n)===sn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return ta(r,Zt)}function Pd(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function cM(e){return{fill:Pd(e,"fill"),stroke:Pd(e,"stroke")}}function fM(e){return bt(e.fill)?g4:b4}function oc(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:u,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,facet:{label:m=t}={},...p}={}){const g={};for(const[y,b]of e){const v=p[y],w=bM(y,b,{round:Ie.get(y)===sn?u:void 0,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,...v});if(w){let{label:M=y==="fx"||y==="fy"?m:t,percent:_,transform:x,inset:E,insetTop:$=E!==void 0?E:y==="y"?r:0,insetRight:N=E!==void 0?E:y==="x"?i:0,insetBottom:A=E!==void 0?E:y==="y"?a:0,insetLeft:L=E!==void 0?E:y==="x"?o:0}=v||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");w.percent=!!_,w.label=M===void 0?dM(b,w):M,w.transform=x,y==="x"||y==="fx"?(w.insetLeft=+L,w.insetRight=+N):(y==="y"||y==="fy")&&(w.insetTop=+$,w.insetBottom=+A),g[y]=w}}return g}function Ad(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:u,label:s}=i;t[r]=_M(i),n[r]=a,a.type=o,u!=null&&(a.interval=u),s!=null&&(a.label=s)}return n}function hM(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?_f(t):t;i&&Sd(i,o),a&&Ed(a,o);const u=i||a?Ug(e,t):t;n&&Sd(n,u),r&&Ed(r,u)}function dM(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!kr(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function mM(e){return Math.sign(ui(e.domain()))*Math.sign(ui(e.range()))}function _f(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:u,marginRight:s,marginBottom:l,marginLeft:c}}=e;return{marginTop:Math.max(t,u),marginRight:Math.max(n,s),marginBottom:Math.max(r,l),marginLeft:Math.max(i,c),width:a,height:o}}function Ug({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=_f(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:u,height:t?t.scale.bandwidth()+r+a:s,facet:{width:u,height:s}}}function Sd(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,u=a+n,s=i-o-r;e.range=[u,Math.max(u,s)],kr(e)||(e.range=Hg(e)),e.scale.range(e.range)}zg(e)}function Ed(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,u=a+n,s=i-o-r;e.range=[Math.max(u,s),u],kr(e)?e.range.reverse():e.range=Hg(e),e.scale.range(e.range)}zg(e)}function zg(e){e.round===void 0&&yM(e)&&pM(e)<=30&&e.scale.round(!0)}function pM({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,u=Math.abs(r-n)/Math.max(1,o+a*2);return(u-Math.floor(u))*o}function Hg(e){const t=e.scale.domain().length+Wg(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function bM(e,t=[],n={}){const r=gM(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&kr({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(_t)?Vn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Rr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Rr(r)}".`):i.some(A9)?Vn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Rr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Rr(r)}".`):i.some(S9)&&Vn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Rr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Rr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=mo(t,n,un);break;case"identity":switch(Ie.get(e)){case sn:n=mo(t,n,un);break;case ss:n=mo(t,n,wM);break}break;case"utc":case"time":n=mo(t,n,b9);break}switch(r){case"diverging":return Z8(e,t,n);case"diverging-sqrt":return K8(e,t,n);case"diverging-pow":return Ig(e,t,n);case"diverging-log":return Q8(e,t,n);case"diverging-symlog":return J8(e,t,n);case"categorical":case"ordinal":case Ya:return uM(e,t,n);case"cyclical":case"sequential":case"linear":return I8(e,t,n);case"sqrt":return R8(e,t,n);case"threshold":return wf(e,t,n);case"quantile":return G8(e,t,n);case"quantize":return U8(e,t,n);case"pow":return Bg(e,t,n);case"log":return O8(e,t,n);case"symlog":return q8(e,t,n);case"utc":return oM(e,t,n);case"time":return aM(e,t,n);case"point":return sM(e,t,n);case"band":return lM(e,t,n);case"identity":return H8(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Rr(e){return typeof e=="symbol"?e.description:e}function Cd(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Td={toString:()=>"projection"};function gM(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:u}){if(n=Cd(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&u!=null&&(n=Td);for(const l of t){const c=Cd(l.type);if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}}if(n===Td)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const s=Ie.get(e);if(s===Ua)return"sqrt";if(s===Ha||s===za)return"linear";if(s===ss)return"ordinal";if((r||i||[]).length>2)return Qs(s);if(r!==void 0){if(fd(r))return Qs(s);if(_t(r))return"utc"}else{const l=t.map(({value:c})=>c).filter(c=>c!==void 0);if(l.some(fd))return Qs(s);if(l.some(_t))return"utc"}if(s===Rn){if(o!=null||B8(a))return"diverging";if(D8(a))return"categorical"}return"linear"}function Qs(e){switch(e){case sn:return"point";case Rn:return Ya;default:return"ordinal"}}function kr({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Ya}function Wg({type:e}){return e==="threshold"}function yM({type:e}){return e==="point"||e==="band"}function li(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function mo(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function wM(e){return Ue(e,ff)}function vM(e){return t=>{if(!Ie.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function _M({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:u,pivot:s}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const l=e.unknown?e.unknown():void 0;return{type:t,domain:da(n),...r!==void 0&&{range:da(r)},...o!==void 0&&{transform:o},...u&&{percent:u},...l!==void 0&&{unknown:l},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function MM(e,t,n={}){let r=.5-gt,i=.5+gt,a=.5+gt,o=.5-gt;for(const{marginTop:p,marginRight:g,marginBottom:y,marginLeft:b}of t)p>r&&(r=p),g>i&&(i=g),y>a&&(a=y),b>o&&(o=b);let{margin:u,marginTop:s=u!==void 0?u:r,marginRight:l=u!==void 0?u:i,marginBottom:c=u!==void 0?u:a,marginLeft:f=u!==void 0?u:o}=n;s=+s,l=+l,c=+c,f=+f;let{width:h=640,height:d=xM(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,s-r+c-a)}=n;h=+h,d=+d;const m={width:h,height:d,marginTop:s,marginRight:l,marginBottom:c,marginLeft:f};if(e.fx||e.fy){let{margin:p,marginTop:g=p!==void 0?p:s,marginRight:y=p!==void 0?p:l,marginBottom:b=p!==void 0?p:c,marginLeft:v=p!==void 0?p:f}=n.facet??{};g=+g,y=+y,b=+b,v=+v,m.facet={marginTop:g,marginRight:y,marginBottom:b,marginLeft:v}}return m}function xM({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:u,marginRightDefault:s,marginBottomDefault:l,marginLeftDefault:c}){const f=n?n.scale.domain().length:1,h=T8(i);if(h){const m=r?r.scale.domain().length:1,p=(1.1*f-.1)/(1.1*m-.1)*h,g=Math.max(.1,Math.min(10,p));return Math.round((o-c-s)*g+u+l)}const d=t?kr(t)?t.scale.domain().length:Math.max(7,17/f):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=kd("y",t)/(kd("x",e)*a),p=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,y=p*(o-c-s)-e.insetLeft-e.insetRight;return(m*y+t.insetTop+t.insetBottom)/g+u+l}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function kd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const u=t.scale.exponent();i=s=>Math.pow(s,u);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Dt(r);return Math.abs(i(o)-i(a))}function PM(e,t){const{fx:n,fy:r}=oc(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?g3(i,a).map(([o,u],s)=>({x:o,y:u,i:s})):i?i.map((o,u)=>({x:o,i:u})):a?a.map((o,u)=>({y:o,i:u})):void 0}function AM(e,{x:t,y:n}){return t&&(t=uc(t)),n&&(n=uc(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Mf(e,{fx:t,fy:n}){const r=In(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Hr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Hr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Hr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function SM(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function EM(e){const t=[],n=new Uint32Array(Yn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const CM=new Map([["top",Js],["right",nl],["bottom",el],["left",tl],["top-left",po(Js,tl)],["top-right",po(Js,nl)],["bottom-left",po(el,tl)],["bottom-right",po(el,nl)],["top-empty",$M],["right-empty",FM],["bottom-empty",DM],["left-empty",NM],["empty",BM]]);function TM(e){if(e==null)return null;const t=CM.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const $d=new WeakMap;function uc(e){let t=$d.get(e);return t||$d.set(e,t=new br(Ue(e,(n,r)=>[n,r]))),t}function nr(e,t){return uc(e).get(t)}function kM(e,t,n){return t=fr(t),n=fr(n),e.find(r=>Object.is(fr(r.x),t)&&Object.is(fr(r.y),n))}function hs(e,t,n){var r;return(r=kM(e,t,n))==null?void 0:r.empty}function Js(e,{y:t},{y:n}){return t?nr(t,n)===0:!0}function el(e,{y:t},{y:n}){return t?nr(t,n)===t.length-1:!0}function tl(e,{x:t},{x:n}){return t?nr(t,n)===0:!0}function nl(e,{x:t},{x:n}){return t?nr(t,n)===t.length-1:!0}function $M(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=nr(t,r);if(a>0)return hs(e,n,t[a-1])}function DM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=nr(t,r);if(a<t.length-1)return hs(e,n,t[a+1])}function NM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=nr(t,n);if(a>0)return hs(e,t[a-1],r)}function FM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=nr(t,n);if(a<t.length-1)return hs(e,t[a+1],r)}function BM(e,t,{empty:n}){return n}function po(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function rl(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class dt{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:u,fy:s,sort:l,dx:c=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:m=h,marginBottom:p=h,marginLeft:g=h,clip:y=i==null?void 0:i.clip,channels:b,tip:v,render:w}=r;if(this.data=t,this.sort=oi(l)?l:null,this.initializer=si(r).initializer,this.transform=this.initializer?r.transform:ls(r).transform,a===null||a===!1?this.facet=null:(this.facet=Jt(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Co&&typeof u=="string"?[u]:u,this.fy=t===Co&&typeof s=="string"?[s]:s),this.facetAnchor=TM(o),n=mg(n),b!==void 0&&(n={...LM(b),...n}),i!==void 0&&(n={...m8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([M,_])=>{if(as(_.value)){const{value:x,label:E=_.label,scale:$=_.scale}=_.value;_={..._,label:E,scale:$,value:x}}if(t===Co&&typeof _.value=="string"){const{value:x}=_;_={..._,value:[x]}}return[M,_]}).filter(([M,{value:_,optional:x}])=>{if(_!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${M}`)})),this.dx=+c,this.dy=+f,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+g,this.clip=Sg(y),this.tip=IM(v),this.facet==="super"){if(u||s)throw new Error("super-faceting cannot use fx or fy");for(const M in this.channels){const{scale:_}=n[M];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=Yg(w,this.render))}initialize(t,n,r){let i=St(this.data);t===void 0&&i!=null&&(t=[In(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=St(i)),t!==void 0&&(t.original=a);const o=t8(this.channels,i);return this.sort!=null&&r8(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=Zn}=n[i];if(a!==null){const o=r[i];t=t.filter(u=>a(o[u]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&E8(i,a,n,r.projection)}}scale(t,n,r){const i=n8(t,n);return r.projection&&this.project(t,i,r),i}}function Vg(...e){return e.plot=dt.prototype.plot,e}function Yg(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,u){return e.call(this,n,r,i,a,o,(s,l,c,f,h)=>t.call(this,s,l,c,f,h,u))}}function LM(e){return Object.fromEntries(Object.entries(mg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Ga(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function IM(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Jt(e,"tip",["x","y","xy"]):e}function ds(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:er(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Dd=new WeakMap;function xf(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:u,render:s,...l}={}){return o=+o,i!=null&&(n??(n=null),u={...u,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),u={...u,py:{value:a,scale:"y"}}),{x:n,y:r,channels:u,...l,render:Yg(function(c,f,h,d,m,p){m={...m,pointerSticky:!1};const g=m.ownerSVGElement,{data:y}=m.getMarkState(this);let b=Dd.get(g);b||Dd.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(W)-1;const{x:w,y:M,fx:_,fy:x}=f;let E=_?_(c.fx)-d.marginLeft:0,$=x?x(c.fy)-d.marginTop:0;w!=null&&w.bandwidth&&(E+=w.bandwidth()/2),M!=null&&M.bandwidth&&($+=M.bandwidth()/2);const N=c.fi!=null;let A;if(N){let Y=b.facetStates;Y||(b.facetStates=Y=new Map),A=Y.get(this),A||Y.set(this,A=new Map)}const[L,R]=Wa(this,d),{px:C,py:S}=h,I=C?Y=>C[Y]:Xg(h,L),re=S?Y=>S[Y]:Zg(h,R);let ne,Q,q,U;function z(Y,V){if(N)if(U&&(U=cancelAnimationFrame(U)),Y==null)A.delete(c.fi);else{A.set(c.fi,V),U=requestAnimationFrame(()=>{U=null;for(const[F,H]of A)if(H<V||H===V&&F<c.fi){Y=null;break}W(Y)});return}W(Y)}function W(Y){if(ne===Y&&q===b.sticky)return;ne=Y,q=m.pointerSticky=b.sticky;const V=ne==null?[]:[ne];N&&(V.fx=c.fx,V.fy=c.fy,V.fi=c.fi);const F=p(V,f,h,d,m);if(Q){if(N){const H=Q.parentNode,j=Q.getAttribute("transform"),D=F.getAttribute("transform");j?F.setAttribute("transform",j):F.removeAttribute("transform"),D?H.setAttribute("transform",D):H.removeAttribute("transform"),F.removeAttribute("aria-label"),F.removeAttribute("aria-description"),F.removeAttribute("aria-hidden")}Q.replaceWith(F)}return b.roots[v]=Q=F,ne==null&&(A==null?void 0:A.size)>1||m.dispatchValue(ne==null?null:y[ne]),F}function oe(Y){if(b.sticky||Y.pointerType==="mouse"&&Y.buttons===1)return;let[V,F]=xv(Y);V-=E,F-=$;const H=V<d.marginLeft||V>d.width-d.marginRight?1:e,j=F<d.marginTop||F>d.height-d.marginBottom?1:t;let D=null,be=o*o;for(const J of c){const le=H*(I(J)-V),_e=j*(re(J)-F),Fe=le*le+_e*_e;Fe<=be&&(D=J,be=Fe)}if(D!=null&&(e!==1||t!==1)){const J=I(D)-V,le=re(D)-F;be=J*J+le*le}z(D,be)}function de(Y){Y.pointerType==="mouse"&&ne!=null&&(b.sticky&&b.roots.some(V=>V==null?void 0:V.contains(Y.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(V=>V(null))):(b.sticky=!0,W(ne)),Y.stopImmediatePropagation()))}function ie(Y){Y.pointerType==="mouse"&&(b.sticky||z(null))}return g.addEventListener("pointerenter",oe),g.addEventListener("pointermove",oe),g.addEventListener("pointerdown",de),g.addEventListener("pointerleave",ie),W(null)},s)}}function jg(e){return xf(1,1,e)}function RM(e){return xf(1,.01,e)}function Nd(e){return xf(.01,1,e)}function Xg({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Zg({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Kg(e){return kr(e)&&e.interval===void 0?void 0:"tabular-nums"}function OM(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:u=0,marginBottom:s=16+r,marginLeft:l=0,style:c,ticks:f=(i-l-u)/64,tickFormat:h,fontVariant:d=Kg(e),round:m=!0,opacity:p,className:g}=t;const y=gf(t);g=pf(g),p=ht(p)[1],h===null&&(h=()=>null);const b=qe("svg",y).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(L=>L.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(bf,c);let v=L=>L.selectAll(".tick line").attr("y1",o+s-a),w;const M=m?(L,R)=>L.rangeRound(R):(L,R)=>L.range(R),{type:_,domain:x,range:E,interpolate:$,scale:N,pivot:A}=e;if($){const L=E===void 0?$:Ou($.length===1?vf($):$,E);w=M(N.copy(),Yt(at(l,i-u),Math.min(x.length+(A!==void 0),E===void 0?1/0:E.length)));const R=256,C=y.document.createElement("canvas");C.width=R,C.height=1;const S=C.getContext("2d");for(let I=0,re=R-1;I<R;++I)S.fillStyle=L(I/re),S.fillRect(I,0,1,1);b.append("image").attr("opacity",p).attr("x",l).attr("y",o).attr("width",i-l-u).attr("height",a-o-s).attr("preserveAspectRatio","none").attr("xlink:href",C.toDataURL())}else if(_==="threshold"){const L=x,R=h===void 0?C=>C:typeof h=="string"?pi(h):h;w=M(Uc().domain([-1,E.length-1]),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(E).enter().append("rect").attr("x",(C,S)=>w(S-1)).attr("y",o).attr("width",(C,S)=>w(S)-w(S-1)).attr("height",a-o-s).attr("fill",C=>C),f=Ue(L,(C,S)=>S),h=C=>R(L[C],C)}else w=M(Vu().domain(x),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(x).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",a-o-s).attr("fill",N),v=()=>{};return b.append("g").attr("transform",`translate(0,${a-s})`).call(q3(w).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",et(d,"normal")).call(v).call(L=>L.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const Qg=Math.PI/180;function ja(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=il(n),e.markerMid=il(r),e.markerEnd=il(i)}function il(e){if(e==null||e===!1)return null;if(e===!0)return Bd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Fd("auto");case"arrow-reverse":return Fd("auto-start-reverse");case"dot":return qM;case"circle":case"circle-fill":return Bd;case"circle-stroke":return GM;case"tick":return al("auto");case"tick-x":return al(90);case"tick-y":return al(0)}throw new Error(`invalid marker: ${e}`)}function Fd(e){return(t,n)=>qe("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function qM(e,t){return qe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Bd(e,t){return qe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function GM(e,t){return qe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function al(e){return(t,n)=>qe("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let UM=0;function ms(e,t,{stroke:n},r){return Jg(e,t,n&&(i=>n[i]),r)}function zM(e,t,{stroke:n},r){return Jg(e,t,n&&(([i])=>n[i]),r)}function Jg(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const u=new Map;function s(l){return function(c){const f=a(c);let h=u.get(l);h||u.set(l,h=new Map);let d=h.get(f);if(!d){const m=this.parentNode.insertBefore(l(f,o),this),p=`plot-marker-${++UM}`;m.setAttribute("id",p),h.set(f,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",s(t)),n&&e.attr("marker-mid",s(n)),r&&e.attr("marker-end",s(r))}function Pf({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=t2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function e2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=t2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function t2(e,t,n){return e===void 0&&t===void 0&&n===void 0?gt?[1,0]:[.5,.5]:[t,n]}function n2(e,{interval:t}){return e={...Ga(e)},e.interval=sf(e.interval===void 0?t:e.interval),e}function r2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:u,interval:s}=n2(i,n);if(u==null||s==null&&!r)return n;const l=Tr(i);if(s==null){let d;const m={transform:p=>d||(d=Xe(p,u)),label:l};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let c,f;function h(d){return f!==void 0&&d===c?f:f=Ue(Xe(c=d,u),m=>s.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:h,label:l}:a,[`${e}2`]:o===void 0?{transform:d=>h(d).map(m=>s.offset(m)),label:l}:o})}function i2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=n2(r,n);return i==null||a==null?n:t({...n,[e]:{label:Tr(r),transform:o=>{const u=Ue(Xe(o,i),l=>a.floor(l)),s=u.map(l=>a.offset(l));return u.map(_t(u)?(l,c)=>l==null||isNaN(l=+l)||(c=s[c],c==null)||isNaN(c=+c)?void 0:new Date((l+c)/2):(l,c)=>l==null||(c=s[c],c==null)?NaN:(+l+ +c)/2)}}})}function HM(e={}){return r2("x",Pf,e)}function a2(e={}){return r2("y",e2,e)}function WM(e={}){return i2("x",Pf,e)}function VM(e={}){return i2("y",e2,e)}const o2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class YM extends dt{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:u=o,insetBottom:s=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},ds(n,"x"),o2),this.insetTop=De(u),this.insetBottom=De(s),ja(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y1:l,y2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetTop:y,insetBottom:b}=this;return qe("svg:g",a).call(qt,this,i,a).call(Et,this,{x:s&&o},gt,0).call(v=>v.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",s?w=>s[w]:(p+f-m)/2).attr("x2",s?w=>s[w]:(p+f-m)/2).attr("y1",l&&!li(u)?w=>l[w]+y:d+y).attr("y2",c&&!li(u)?u.bandwidth?w=>c[w]+u.bandwidth()-b:w=>c[w]-b:h-g-b).call(On,this,r).call(ms,this,r,a)).node()}}class jM extends dt{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:u=o,insetLeft:s=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},ds(n,"y"),o2),this.insetRight=De(u),this.insetLeft=De(s),ja(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{y:s,x1:l,x2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetLeft:y,insetRight:b}=this;return qe("svg:g",a).call(qt,this,i,a).call(Et,this,{y:s&&u},0,gt).call(v=>v.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",l&&!li(o)?w=>l[w]+y:p+y).attr("x2",c&&!li(o)?o.bandwidth?w=>c[w]+o.bandwidth()-b:w=>c[w]-b:f-m-b).attr("y1",s?w=>s[w]:(d+h-g)/2).attr("y2",s?w=>s[w]:(d+h-g)/2).call(On,this,r).call(ms,this,r,a)).node()}}function Af(e,t){let{x:n=st,y:r,y1:i,y2:a,...o}=a2(t);return[i,a]=u2(r,i,a),new YM(e,{...o,x:n,y1:i,y2:a})}function vu(e,t){let{y:n=st,x:r,x1:i,x2:a,...o}=HM(t);return[i,a]=u2(r,i,a),new jM(e,{...o,y:n,x1:i,x2:a})}function u2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Sf(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const XM={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},s2="";class Ef extends dt{constructor(t,n={}){const{x:r,y:i,text:a=tr(t)&&dg(t)?st:is,frameAnchor:o,textAnchor:u=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:s=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:g,fontWeight:y,rotate:b}=n,[v,w]=ht(b,0),[M,_]=tx(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:M,optional:!0},rotate:{value:P9(v),optional:!0},text:{value:a,filter:Qc,optional:!0}},n,XM),this.rotate=w,this.textAnchor=et(u,"middle"),this.lineAnchor=Jt(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=l2(f),this.monospace=!!h,this.fontFamily=ct(d),this.fontSize=_,this.fontStyle=ct(p),this.fontVariant=ct(g),this.fontWeight=ct(y),this.frameAnchor=us(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=f2(this),this.clipLine=h2(this)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,rotate:c,text:f,title:h,fontSize:d}=r,{rotate:m}=this,[p,g]=Wa(this,i);return qe("svg:g",a).call(qt,this,i,a).call(c2,this,f,i).call(Et,this,{x:s&&o,y:l&&u}).call(y=>y.selectAll().data(t).enter().append("text").call(Gt,this).call(ZM,this,f,h).attr("transform",Sf`translate(${s?b=>s[b]:p},${l?b=>l[b]:g})${c?b=>` rotate(${c[b]})`:m?` rotate(${m})`:""}`).call(fe,"font-size",d&&(b=>d[b])).call(On,this,r)).node()}}function l2(e){return e==null?null:Jt(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function ZM(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:u,clipLine:s}=t;e.each(function(l){const c=u(Pr(n[l])??"").map(s),f=c.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let m=0;m<f;++m){if(++d,!c[m])continue;const p=this.ownerDocument.createElementNS(Kr.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(h+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=c[m],this.appendChild(p),d=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=c[0];if(o&&!r&&c[0]!==n[l]){const d=this.ownerDocument.createElementNS(Kr.svg,"title");d.textContent=n[l],this.appendChild(d)}})}function ps(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=qa(t,n)),new Ef(e,{...r,x:t,y:n})}function KM(e,{x:t=st,...n}={}){return new Ef(e,VM({...n,x:t}))}function QM(e,{y:t=st,...n}={}){return new Ef(e,WM({...n,y:t}))}function c2(e,t,n){fe(e,"text-anchor",t.textAnchor),fe(e,"font-family",t.fontFamily),fe(e,"font-size",t.fontSize),fe(e,"font-style",t.fontStyle),fe(e,"font-variant",t.fontVariant===void 0?JM(n):t.fontVariant),fe(e,"font-weight",t.fontWeight)}function JM(e){return e&&(E9(e)||_t(e))?"tabular-nums":void 0}const ex=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function tx(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),ex.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function nx(e,t,n){const r=[];let i,a=0;for(const[o,u,s]of rx(e)){if(i===void 0&&(i=o),a>i&&n(e,i,u)>t&&(r.push(e.slice(i,a)+(e[a-1]===s2?"-":"")),i=o),s){r.push(e.slice(i,u)),i=void 0;continue}a=u}return r}function*rx(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case s2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Ld={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Cf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=yi(e,i))r+=Ld[e[i]]??(m2(e,i)?120:Ld.e);return r}function Tf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=yi(e,i))r+=m2(e,i)?126:63;return r}function f2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?Tf:Cf,i=t*100;return a=>nx(a,i,r)}function h2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?Tf:Cf,i=t*100;switch(n){case"clip-start":return a=>Rd(a,i,r,"");case"clip-end":return a=>Id(a,i,r,"");case"ellipsis-start":return a=>Rd(a,i,r,Yr);case"ellipsis-middle":return a=>ix(a,i,r,Yr);case"ellipsis-end":return a=>Id(a,i,r,Yr)}}const Yr="";function ci(e,t,n,r){const i=[];let a=0;for(let o=0,u=0,s=e.length;o<s;o=u){u=yi(e,o);const l=n(e,o,u);if(a+l>t){for(a+=r;a>t&&o>0;)u=o,o=i.pop(),a-=n(e,o,u);return[o,t-a]}a+=l,i.push(o)}return[-1,0]}function Id(e,t,n,r){e=e.trim();const i=n(r),[a]=ci(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function ix(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,u]=ci(e,t/2,n,a),[s]=ci(e,i-t/2-u+a,n,-a);return s<0?r:e.slice(0,o).trimEnd()+r+e.slice(yi(e,s)).trimStart()}function Rd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=ci(e,i-t+a,n,-a);return o<0?r:r+e.slice(yi(e,o)).trimStart()}const sc=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Od=new RegExp("\\p{Extended_Pictographic}","uy");function yi(e,t){return t+=ax(e,t)?2:1,ux(e,t)&&(t=sc.lastIndex),ox(e,t)?yi(e,t+1):t}function d2(e,t){return e.charCodeAt(t)<128}function ax(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function ox(e,t){return e.charCodeAt(t)===8205}function ux(e,t){return d2(e,t)?!1:(sc.lastIndex=t,sc.test(e))}function m2(e,t){return d2(e,t)?!1:(Od.lastIndex=t,Od.test(e))}const sx={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},p2=3.5,lx=p2*5,b2={draw(e,t,n){const r=t*n/lx;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},cx={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},fx=new Map([["arrow",b2],["spike",cx]]);function hx(e){return e&&typeof e.draw=="function"}function dx(e){if(hx(e))return e;const t=fx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class g2 extends dt{constructor(t,n={}){const{x:r,y:i,r:a=p2,length:o,rotate:u,shape:s=b2,anchor:l="middle",frameAnchor:c}=n,[f,h]=ht(o,12),[d,m]=ht(u,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,sx),this.r=+a,this.length=h,this.rotate=m,this.shape=dx(s),this.anchor=Jt(l,"anchor",["start","middle","end"]),this.frameAnchor=us(c)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,length:c,rotate:f}=r,{length:h,rotate:d,anchor:m,shape:p,r:g}=this,[y,b]=Wa(this,i);return qe("svg:g",a).call(qt,this,i,a).call(Et,this,{x:s&&o,y:l&&u}).call(v=>v.selectAll().data(t).enter().append("path").call(Gt,this).attr("transform",Sf`translate(${s?w=>s[w]:y},${l?w=>l[w]:b})${f?w=>` rotate(${f[w]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?c?w=>` translate(0,${c[w]})`:` translate(0,${h})`:c?w=>` translate(0,${c[w]/2})`:` translate(0,${h/2})`}`).attr("d",c?w=>{const M=zn();return p.draw(M,c[w],g),M}:(()=>{const w=zn();return p.draw(w,h,g),w})()).call(On,this,r)).node()}}function mx(e,t={}){const{x:n=st,...r}=t;return new g2(e,{...r,x:n})}function px(e,t={}){const{y:n=st,...r}=t;return new g2(e,{...r,y:n})}function rr(e,t){return arguments.length<2&&!tr(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function bs({anchor:e}={},t){return e===void 0?t[0]:Jt(e,"anchor",t)}function y2(e){return bs(e,["left","right"])}function w2(e){return bs(e,["right","left"])}function v2(e){return bs(e,["bottom","top"])}function _2(e){return bs(e,["top","bottom"])}function M2(){const[e,t]=rr(...arguments);return P2("y",y2(t),e,t)}function bx(){const[e,t]=rr(...arguments);return P2("fy",w2(t),e,t)}function x2(){const[e,t]=rr(...arguments);return A2("x",v2(t),e,t)}function gx(){const[e,t]=rr(...arguments);return A2("fx",_2(t),e,t)}function P2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:g,x:y,margin:b,marginTop:v=b===void 0?20:b,marginRight:w=b===void 0?t==="right"?40:0:b,marginBottom:M=b===void 0?20:b,marginLeft:_=b===void 0?t==="left"?40:0:b,label:x,labelAnchor:E,labelArrow:$,labelOffset:N,...A}){return m=De(m),p=De(p),g=De(g),E!==void 0&&(E=Jt(E,"labelAnchor",["center","top","bottom"])),$=N2($),Vg(m&&!bt(a)?yx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,x:y,...A}):null,bt(s)?null:vx(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,x:y,marginTop:v,marginRight:w,marginBottom:M,marginLeft:_,...A}),!bt(s)&&x!==null?ps([],T2({fill:s,fillOpacity:l,...A},function(L,R,C,S,I){const re=S[e],{marginTop:ne,marginRight:Q,marginBottom:q,marginLeft:U}=e==="y"&&I.inset||I,z=E??(re.bandwidth?"center":"top"),W=N??(t==="right"?Q:U)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-ne:z==="bottom"?q-3:0,this.dx=t==="right"?W:-W,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[D2(e,re,{anchor:t,label:x,labelAnchor:z,labelArrow:$})]}}}})):null)}function A2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:g,y,margin:b,marginTop:v=b===void 0?t==="top"?30:0:b,marginRight:w=b===void 0?20:b,marginBottom:M=b===void 0?t==="bottom"?30:0:b,marginLeft:_=b===void 0?20:b,label:x,labelAnchor:E,labelArrow:$,labelOffset:N,...A}){return m=De(m),p=De(p),g=De(g),E!==void 0&&(E=Jt(E,"labelAnchor",["center","left","right"])),$=N2($),Vg(m&&!bt(a)?wx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,y,...A}):null,bt(s)?null:_x(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,y,marginTop:v,marginRight:w,marginBottom:M,marginLeft:_,...A}),!bt(s)&&x!==null?ps([],T2({fill:s,fillOpacity:l,...A},function(L,R,C,S,I){const re=S[e],{marginTop:ne,marginRight:Q,marginBottom:q,marginLeft:U}=e==="x"&&I.inset||I,z=E??(re.bandwidth?"center":"right"),W=N??(t==="top"?ne:q)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-W:W,this.dx=z==="right"?Q-3:z==="left"?3-U:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[D2(e,re,{anchor:t,label:x,labelAnchor:z,labelArrow:$})]}}}})):null)}function yx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetLeft:c=l,insetRight:f=l,dx:h=0,y:d=e==="y"?void 0:null,...m}){return wi(px,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:u,y:d,...m,dx:t==="left"?+h-gt+ +c:+h+gt-f,anchor:"start",length:s,shape:t==="left"?Tx:kx})}function wx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetTop:c=l,insetBottom:f=l,dy:h=0,x:d=e==="x"?void 0:null,...m}){return wi(mx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:u,x:d,...m,dy:t==="bottom"?+h-gt-f:+h+gt+ +c,anchor:"start",length:s,shape:t==="bottom"?Ex:Cx})}function vx(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*Qg):0),text:s,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:c=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:m=h,dx:p=0,y:g=e==="y"?void 0:null,...y}){return wi(QM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,y:g,...y,dx:t==="left"?+p-a-u+ +d:+p+ +a+ +u-m},function(b,v,w,M,_){f===void 0&&(this.fontVariant=$2(b)),s===void 0&&(_.text=k2(b,v,w,M,t))})}function _x(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*Qg):0),text:s,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:m=h,dy:p=0,x:g=e==="x"?void 0:null,...y}){return wi(KM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,x:g,...y,dy:t==="bottom"?+p+ +a+ +u-m:+p-a-u+ +d},function(b,v,w,M,_){f===void 0&&(this.fontVariant=$2(b)),s===void 0&&(_.text=k2(b,v,w,M,t))})}function Mx(){const[e,t]=rr(...arguments);return S2("y",y2(t),e,t)}function xx(){const[e,t]=rr(...arguments);return S2("fy",w2(t),e,t)}function Px(){const[e,t]=rr(...arguments);return E2("x",v2(t),e,t)}function Ax(){const[e,t]=rr(...arguments);return E2("fx",_2(t),e,t)}function S2(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...u}){return wi(vu,e,t,`${e}-grid`,n,{y:r,x1:a,x2:o,...C2(u)})}function E2(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...u}){return wi(Af,e,t,`${e}-grid`,n,{x:r,y1:a,y2:o,...C2(u)})}function C2({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function T2({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c=!1},f){return[,e]=Fn(e),[,t]=ht(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c,initializer:f}}function wi(e,t,n,r,i,a,o){let u;function s(f,h,d,m,p,g){const y=f==null&&(t==="fx"||t==="fy"),{[t]:b}=m;if(!b)throw new Error(`missing scale: ${t}`);const v=b.domain();let{interval:w,ticks:M,tickFormat:_,tickSpacing:x=t==="x"?80:35}=a;if(typeof M=="string"&&F2(b)&&(w=M,M=void 0),M===void 0&&(M=gi(w,b.type)??Sx(b,x)),f==null){if(tr(M))f=St(M);else if(Ur(M))f=ol(M,...Dt(v));else if(b.interval){let $=b.interval;if(b.ticks){const[N,A]=Dt(v),L=(A-N)/$[Ra];$=ud($,L/M)??$,f=ol($,N,A)}else{f=v;const N=f.length;$=ud($,N/M)??$,$!==b.interval&&(f=ol($,...Dt(f)))}if($===b.interval){const N=Math.round(f.length/M);N>1&&(f=f.filter((A,L)=>L%N===0))}}else b.ticks?f=b.ticks(M):f=v;if(!b.ticks&&f.length&&f!==v){const $=new $u(v);f=f.filter(N=>$.has(N)),f.length||Vn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[In(f)]:u[t]={scale:t,value:st}}o==null||o.call(this,b,f,M,_,u);const E=Object.fromEntries(Object.entries(u).map(([$,N])=>[$,{...N,value:Xe(f,N.value)}]));return y&&(h=g.filterFacets(f,E)),{data:f,facets:h,channels:E}}const l=si(a).initializer,c=e(i,si({...a,initializer:s},l));return i==null?(u=c.channels,c.channels={}):u={},c.ariaLabel=r,c.clip===void 0&&(c.clip=!1),c}function Sx(e,t){const[n,r]=Dt(e.range());return(r-n)/t}function k2(e,t,n,r,i){return{value:kf(e,t,n,r,i)}}function kf(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&_t(t)?l9(e.type,t,i)??Pr:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Pr:typeof r=="string"?(_t(e.domain())?La:pi)(r):Oa(r)}function ol(e,t,n){return e.range(t,e.offset(e.floor(n)))}const Ex={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Cx={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Tx={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},kx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function $2(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function D2(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&F2(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!a)return r;if(a===!0){const o=mM(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function N2(e="auto"){return bt(e)?!1:typeof e=="boolean"?e:Jt(e,"labelArrow",["auto","up","right","down","left"])}function F2(e){return _t(e.domain())}function qd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function $x(e,{opacity:t,...n}={}){if(!kr(e)&&!Wg(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return B2(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",ht(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Dx(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:bt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...u}={},s){const[f,h]=Fn(t),[d,m]=Fn(r),p=qd(s,f),g=qd(s,d),y=o*o*Math.PI;return n=ht(n)[1],i=ht(i)[1],a=ht(a)[1],B2(e,u,(b,v,w,M)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",M).attr("fill",f==="color"?_=>p.scale(_):h).attr("fill-opacity",n).attr("stroke",d==="color"?_=>g.scale(_):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",_=>{const x=zn();return e.scale(_).draw(x,y),x}))}function B2(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=Kg(e),swatchSize:o=15,swatchWidth:u=o,swatchHeight:s=o,marginLeft:l=0,className:c,style:f,width:h}=t;const d=gf(t);c=pf(c),i=kf(e.scale,e.domain,void 0,i);const m=qe("div",d).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,u,s).call(g=>g.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,u,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(g=>g.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",l?`${+l}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",et(a,"normal")).call(bf,f).node()}const lc=new Map([["symbol",Dx],["color",I2],["opacity",Fx]]);function Nx(e,t,n={}){return(r,i)=>{if(!lc.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return lc.get(r)(e[r],L2(t,n[r],i),a=>e[a])}}function L2({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return $9(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function I2(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return $x(e,n);case"ramp":return OM(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function Fx({type:e,interpolate:t,...n},{legend:r=!0,color:i=jn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return I2({type:e,...n,interpolate:Bx(i)},{legend:r,...a})}function Bx(e){const{r:t,g:n,b:r}=jn(e)||jn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function Lx(e,t,n){const r=[];for(const[i,a]of lc){const o=n[i];if(o!=null&&o.legend&&i in e){const u=a(e[i],L2(t,e[i],o),s=>e[s]);u!=null&&r.push(u)}}return r}const Ix={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Rx={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Ox extends dt{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:u=r,rx:s,ry:l}=t;super(Co,void 0,t,n==null?Ix:Rx),this.anchor=lg(n,"anchor",["top","right","bottom","left"]),this.insetTop=De(i),this.insetRight=De(a),this.insetBottom=De(o),this.insetLeft=De(u),this.rx=De(s),this.ry=De(l)}render(t,n,r,i,a){const{marginTop:o,marginRight:u,marginBottom:s,marginLeft:l,width:c,height:f}=i,{anchor:h,insetTop:d,insetRight:m,insetBottom:p,insetLeft:g,rx:y,ry:b}=this,v=l+g,w=c-u-m,M=o+d,_=f-s-p;return qe(h?"svg:line":"svg:rect",a).datum(0).call(qt,this,i,a).call(Gt,this).call(On,this,r).call(Et,this,{}).call(h==="left"?x=>x.attr("x1",v).attr("x2",v).attr("y1",M).attr("y2",_):h==="right"?x=>x.attr("x1",w).attr("x2",w).attr("y1",M).attr("y2",_):h==="top"?x=>x.attr("x1",v).attr("x2",w).attr("y1",M).attr("y2",M):h==="bottom"?x=>x.attr("x1",v).attr("x2",w).attr("y1",_).attr("y2",_):x=>x.attr("x",v).attr("y",M).attr("width",w-v).attr("height",_-M).attr("rx",y).attr("ry",b)).node()}}function qx(e){return new Ox(e)}const ul={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},Gx=new Set(["geometry","href","src","ariaLabel","scales"]);class Ux extends dt{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&tr(t)&&dg(t)&&(n={...n,title:st});const{x:r,y:i,x1:a,x2:o,y1:u,y2:s,anchor:l,preferredAnchor:c="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:g,lineHeight:y=1,lineWidth:b=20,frameAnchor:v,format:w,textAnchor:M="start",textOverflow:_,textPadding:x=8,title:E,pointerSize:$=12,pathFilter:N="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:u!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:u,scale:"y",optional:s==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:s,scale:"y",optional:u==null},title:{value:E,optional:!0}},n,ul),this.anchor=nc(l,"anchor"),this.preferredAnchor=nc(c,"preferredAnchor"),this.frameAnchor=us(v),this.textAnchor=et(M,"middle"),this.textPadding=+x,this.pointerSize=+$,this.pathFilter=ct(N),this.lineHeight=+y,this.lineWidth=+b,this.textOverflow=l2(_),this.monospace=!!f,this.fontFamily=ct(h),this.fontSize=De(d),this.fontStyle=ct(m),this.fontVariant=ct(p),this.fontWeight=ct(g);for(const A in ul)A in this.channels&&(this[A]=ul[A]);this.splitLines=f2(this),this.clipLine=h2(this),this.format={...w}}render(t,n,r,i,a){const o=this,{x:u,y:s,fx:l,fy:c}=n,{ownerSVGElement:f,document:h}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:g}=this,{textPadding:y,pointerSize:b,pathFilter:v}=this,{marginTop:w,marginLeft:M}=i,{x1:_,y1:x,x2:E,y2:$,x:N=_??E,y:A=x??$}=r,L=l?l(t.fx)-M:0,R=c?c(t.fy)-w:0,[C,S]=Wa(this,i),I=Xg(r,C),re=Zg(r,S),ne=m?Tf:Cf,Q=ne(Yr);let q,U;"title"in r?(q=r.channels,U=Yx):(q=Vx.call(this,r,n),U=jx);const z=qe("svg:g",a).call(qt,this,i,a).call(c2,this).call(Et,this,{x:N&&u,y:A&&s}).call(de=>de.selectAll().data(t).enter().append("g").attr("transform",ie=>`translate(${Math.round(I(ie))},${Math.round(re(ie))})`).call(Gt,this).call(ie=>ie.append("path").attr("filter",v)).call(ie=>ie.append("text").each(function(Y){const V=Yi(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const F=U.call(o,Y,t,q,n,r);if(typeof F=="string")for(const H of o.splitLines(F))W(V,{value:o.clipLine(H)});else{const H=new Set;for(const j of F){const{label:D=""}=j;D&&H.has(D)||(H.add(D),W(V,j))}}})));function W(de,{label:ie,value:Y,color:V,opacity:F}){ie??(ie=""),Y??(Y="");const H=V!=null||F!=null;let j,D=g*100;const[be]=ci(ie,D,ne,Q);if(be>=0)ie=ie.slice(0,be).trimEnd()+Yr,j=Y.trim(),Y="";else{(ie||!Y&&!H)&&(Y=" "+Y);const[le]=ci(Y,D-ne(ie),ne,Q);le>=0&&(j=Y.trim(),Y=Y.slice(0,le).trimEnd()+Yr)}const J=de.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");ie&&J.append("tspan").attr("font-weight","bold").text(ie),Y&&J.append(()=>h.createTextNode(Y)),H&&J.append("tspan").text(" ").attr("fill",V).attr("fill-opacity",F).style("user-select","none"),j&&J.append("title").text(j)}function oe(){const{width:de,height:ie}=i.facet??i;z.selectChildren().each(function(Y){let{x:V,width:F,height:H}=this.getBBox();F=Math.round(F),H=Math.round(H);let j=d;if(j===void 0){const J=I(Y)+L,le=re(Y)+R,_e=J+F+b+y*2<de,Fe=J-F-b-y*2>0,tt=le+H+b+y*2<ie,$e=le-H-b-y*2>0;j=_e&&Fe?tt&&$e?o.preferredAnchor:$e?"bottom":"top":tt&&$e?_e?"left":"right":(_e||Fe)&&(tt||$e)?`${$e?"bottom":"top"}-${_e?"left":"right"}`:o.preferredAnchor}const D=this.firstChild,be=this.lastChild;if(D.setAttribute("d",Wx(j,b,y,F,H)),V)for(const J of be.childNodes)J.setAttribute("x",-V);be.setAttribute("y",`${+zx(j,be.childNodes.length,p).toFixed(6)}em`),be.setAttribute("transform",`translate(${Hx(j,b,y,F,H)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(oe):typeof requestAnimationFrame<"u"&&requestAnimationFrame(oe)),z.node()}}function R2(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=qa(t,n)),new Ux(e,{...r,x:t,y:n})}function zx(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Hx(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Wx(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function Vx({channels:e},t){var i,a;const n={};let r=this.format;r=Gd(r,e,"x"),r=Gd(r,e,"y"),this.format=r;for(const o in r){const u=r[o];if(!(u===null||u===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const s=bd(e,o);s&&(n[o]=s)}}for(const o in e){if(o in n||o in r||Gx.has(o))continue;const u=bd(e,o);u&&(n[o]=u)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const u=this.format[o];if(typeof u=="string"){const s=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(_t(s)?La:pi)(u)}else if(u===void 0||u===!0){const s=t[o];this.format[o]=s!=null&&s.bandwidth?kf(s,s.domain()):Pr}}return n}function Gd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([u])=>u===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function Yx(e,t,{title:n}){return Pr(n.value[e],e)}function*jx(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:_u(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:zd(r,n,"x"),value:Ud(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:zd(r,n,"y"),value:Ud(this.format.y2,n.y1,o,e)};else{const u=o.value[e],s=o.scale;if(!Zn(u)&&s==null)continue;yield{label:_u(r,n,a),value:this.format[a](u,e),color:s==="color"?i[a][e]:null,opacity:s==="opacity"?i[a][e]:null}}}}function Ud(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function zd(e,t,n){const r=_u(e,t,`${n}1`,n),i=_u(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function _u(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function Ut(e={}){var Q;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:u}=e,s=pf(e.className),l=e.marks===void 0?[]:Wd(e.marks);l.push(...nP(l));const c=eP(t,e),f=new Map;for(const q of l){const U=Vd(q,c,e);U&&f.set(q,U)}const h=new Map;c&&Ti(h,[c],e),Ti(h,f,e);const d=Wd(rP(l,h,e));for(const q of d){const U=Vd(q,c,e);U&&f.set(q,U)}l.unshift(...d);let m=PM(h,e);if(m!==void 0){const q=c?rl(m,c):void 0;for(const z of l){if(z.facet===null||z.facet==="super")continue;const W=f.get(z);W!==void 0&&(W.facetsIndex=z.fx!=null||z.fy!=null?rl(m,W):q)}const U=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((W,oe)=>{(W==null?void 0:W.length)>0&&U.add(oe)});m.forEach(0<U.size&&U.size<m.length?(z,W)=>z.empty=!U.has(W):z=>z.empty=!1);for(const z of l)if(z.facet==="exclude"){const W=f.get(z);W!==void 0&&(W.facetsIndex=EM(W.facetsIndex))}}for(const q of Ie.keys())ec(e[q])&&q!=="fx"&&q!=="fy"&&h.set(q,[]);const p=new Map;for(const q of l){if(p.has(q))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:U,channels:z}=f.get(q)??{},{data:W,facets:oe,channels:de}=q.initialize(U,z,e);$f(de,e),p.set(q,{data:W,facets:oe,channels:de})}const g=oc(Ti(h,p,e),e),y=MM(g,l,e);hM(g,y);const b=Ad(g),{fx:v,fy:w}=b,M=v||w?Ug(g,y):y,_=v||w?cP(b,y):y,x=gf(e),E=x.document,$=Lu("svg").call(E.documentElement);let N=$;x.ownerSVGElement=$,x.className=s,x.projection=P8(e,M),x.filterFacets=(q,U)=>rl(m,{channels:U,groups:Mf(q,U)}),x.getMarkState=q=>{const U=p.get(q),z=f.get(q);return{...U,channels:{...U.channels,...z==null?void 0:z.channels}}},x.dispatchValue=q=>{N.value!==q&&(N.value=q,N.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[q,U]of p)if(q.initializer!=null){const z=q.facet==="super"?_:M,W=q.initializer(U.data,U.facets,U.channels,b,z,x);if(W.data!==void 0&&(U.data=W.data),W.facets!==void 0&&(U.facets=W.facets),W.channels!==void 0){const{fx:oe,fy:de,...ie}=W.channels;Jx(ie),Object.assign(U.channels,ie);for(const Y of Object.values(ie)){const{scale:V}=Y;V!=null&&!N9(Ie.get(V))&&(O2(Y,e),A.add(V))}(oe!=null||de!=null)&&f.set(q,!0)}}if(A.size){const q=new Map;Ti(q,p,e,oe=>A.has(oe)),Ti(h,p,e,oe=>A.has(oe));const U=lP(oc(q,e),g),{scales:z,...W}=Ad(U);Object.assign(g,U),Object.assign(b,W),Object.assign(b.scales,z)}let L,R;m!==void 0&&(L={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},m=AM(m,L),R=SM(v,w,y));for(const[q,U]of p)U.values=q.scale(U.channels,b,x);const{width:C,height:S}=y;Yi($).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",C).attr("height",S).attr("viewBox",`0 0 ${C} ${S}`).attr("aria-label",o).attr("aria-description",u).call(q=>q.append("style").text(`:where(.${s}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${s} text),
:where(.${s} tspan) {
  white-space: pre;
}`)).call(bf,n);for(const q of l){const{channels:U,values:z,facets:W}=p.get(q);if(m===void 0||q.facet==="super"){let oe=null;if(W&&(oe=W[0],oe=q.filter(oe,U,z),oe.length===0))continue;const de=q.render(oe,b,z,_,x);if(de==null)continue;$.appendChild(de)}else{let oe;for(const de of m){if(!(((Q=q.facetAnchor)==null?void 0:Q.call(q,m,L,de))??!de.empty))continue;let ie=null;if(W){const V=f.has(q);if(ie=W[V?de.i:0],ie=q.filter(ie,U,z),ie.length===0)continue;!V&&ie===W[0]&&(ie=v9(ie)),ie.fx=de.x,ie.fy=de.y,ie.fi=de.i}const Y=q.render(ie,b,z,M,x);if(Y!=null){(oe??(oe=Yi($).append("g"))).append(()=>Y).datum(de);for(const V of["aria-label","aria-description","aria-hidden","transform"])Y.hasAttribute(V)&&(oe.attr(V,Y.getAttribute(V)),Y.removeAttribute(V))}}oe==null||oe.selectChildren().attr("transform",R)}}const I=Lx(g,x,e),{figure:re=r!=null||i!=null||a!=null||I.length>0}=e;re&&(N=E.createElement("figure"),N.className=`${s}-figure`,N.style.maxWidth="initial",r!=null&&N.append(Hd(E,r,"h2")),i!=null&&N.append(Hd(E,i,"h3")),N.append(...I,$),a!=null&&N.append(Xx(E,a))),N.scale=vM(b.scales),N.legend=Nx(g,x,e);const ne=h8();return ne>0&&Yi($).append("text").attr("x",C).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${ne.toLocaleString("en-US")} warning${ne===1?"":"s"}. Please check the console.`),N}function Hd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Xx(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Zx({marks:e=[],...t}={}){return Ut({...t,marks:[...e,this]})}dt.prototype.plot=Zx;function Wd(e){return e.flat(1/0).filter(t=>t!=null).map(Kx)}function Kx(e){return typeof e.render=="function"?e:new Qx(e)}class Qx extends dt{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function $f(e,t){for(const n in e)O2(e[n],t);return e}function O2(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:u=a?s=>s*100:hg(o,i)}=t[n]??{};u!=null&&(e.value=Ue(e.value,u),e.transform=!1)}function Jx(e){for(const t in e)_g(t,e[t])}function Ti(e,t,n,r=m9){var i,a;for(const{channels:o}of t.values())for(const u in o){const s=o[u],{scale:l}=s;if(l!=null&&r(l))if(l==="projection"){if(!C8(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,f=((a=n.y)==null?void 0:a.domain)===void 0;if(c||f){const[h,d]=k8(s);c&&sl(e,"x",h),f&&sl(e,"y",d)}}}else sl(e,l,s)}return e}function sl(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function eP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=St(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=pa(i,{value:n,scale:"fx"})),r!=null&&(a.fy=pa(i,{value:r,scale:"fy"})),$f(a,t);const o=Mf(i,a);return{channels:a,groups:o,data:e.data}}function Vd(e,t,n){var s;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=St(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const c={};return r!=null&&(c.fx=pa(l,{value:r,scale:"fx"})),i!=null&&(c.fy=pa(l,{value:i,scale:"fy"})),$f(c,n),{channels:c,groups:Mf(l,c)}}if(t===void 0)return;const{channels:a,groups:o,data:u}=t;if(e.facet!=="auto"||e.data===u)return{channels:a,groups:o};u.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((s=St(e.data))==null?void 0:s.length)===u.length&&Vn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function tP(e,t={}){return si({...t,x:null,y:null},(n,r,i,a,o,u)=>u.getMarkState(e))}function nP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?RM:/^y$/i.test(i)?Nd:jg,r=i(tP(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===Nd?"left":"bottom");const o=R2(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function rP(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:u={},axis:s,grid:l,facet:c={},facet:{axis:f=s,grid:h}=c,x:{axis:d=s,grid:m=d===null?null:l}=i,y:{axis:p=s,grid:g=p===null?null:l}=a,fx:{axis:y=f,grid:b=y===null?null:h}=o,fy:{axis:v=f,grid:w=v===null?null:h}=u}=n;(r||!ec(i)&&!Yd("x",e))&&(d=m=null),(r||!ec(a)&&!Yd("y",e))&&(p=g=null),t.has("fx")||(y=b=null),t.has("fy")||(v=w=null),d===void 0&&(d=!yo(e,"x")),p===void 0&&(p=!yo(e,"y")),y===void 0&&(y=!yo(e,"fx")),v===void 0&&(v=!yo(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),y===!0&&(y=d==="top"||d===null?"bottom":"top"),v===!0&&(v=p==="right"||p===null?"left":"right");const M=[];return go(M,w,xx,u),bo(M,v,bx,"right","left",c,u),go(M,b,Ax,o),bo(M,y,gx,"top","bottom",c,o),go(M,g,Mx,a),bo(M,p,M2,"left","right",n,a),go(M,m,Px,i),bo(M,d,x2,"bottom","top",n,i),M}function bo(e,t,n,r,i,a,o){if(!t)return;const u=iP(t);o=aP(u?r:t,a,o);const{line:s}=o;(n===M2||n===x2)&&s&&!ma(s)&&e.push(qx(oP(o))),e.push(n(o)),u&&e.push(n({...o,anchor:i,label:null}))}function go(e,t,n,r){!t||ma(t)||e.push(n(uP(t,r)))}function iP(e){return/^\s*both\s*$/i.test(e)}function aP(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:m,labelOffset:p}}function oP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function uP(e,{stroke:t=os(e)?e:void 0,ticks:n=sP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function sP(e){switch(typeof e){case"number":return!0;case"string":return!os(e)}return tr(e)||typeof(e==null?void 0:e.range)=="function"}function yo(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function Yd(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function lP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function cP({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=_f(n),l=e&&jd(e),c=t&&jd(t);return{marginTop:t?c[0]:r,marginRight:e?u-l[1]:i,marginBottom:t?s-c[1]:a,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:u,height:s}}function jd(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const fP=new Map([["basis",y4],["basis-closed",w4],["basis-open",v4],["bundle",_4],["bump-x",u4],["bump-y",s4],["cardinal",M4],["cardinal-closed",x4],["cardinal-open",P4],["catmull-rom",A4],["catmull-rom-closed",S4],["catmull-rom-open",E4],["linear",Ia],["linear-closed",C4],["monotone-x",T4],["monotone-y",k4],["natural",$4],["step",D4],["step-after",F4],["step-before",N4]]);function q2(e=Ia,t){if(typeof e=="function")return e;const n=fP.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function G2(e=fi,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?fi:q2(e,t)}function fi(e){return Ia(e)}function hP(e={y:"count"},t={}){[e,t]=pP(e,t);const{x:n,y:r}=t;return mP(bP(n,t,st),null,null,r,e,Pf(t))}function dP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=mf}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function U2(e={}){return dP(hP,"y",ds(e,"x"))}function mP(e,t,n,r,{data:i=vg,filter:a=wu,sort:o,reverse:u,...s}={},l={}){e=Xd(e),t=Xd(t),s=yP(s,l),i=W2(i,st),o=o==null?void 0:z2("sort",o,l),a=a==null?void 0:H2("filter",a,l),n!=null&&fo(s,"x","x1","x2")&&(n=null),r!=null&&fo(s,"y","y1","y2")&&(r=null);const[c,f]=xn(e),[h,d]=xn(e),[m,p]=xn(t),[g,y]=xn(t),[b,v]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,M]=xn(b),{x:_,y:x,z:E,fill:$,stroke:N,x1:A,x2:L,y1:R,y2:C,domain:S,cumulative:I,thresholds:re,interval:ne,...Q}=l,[q,U]=xn(E),[z]=Fn($),[W]=Fn(N),[oe,de]=xn(z),[ie,Y]=xn(W);return{..."z"in l&&{z:q||E},..."fill"in l&&{fill:oe||$},..."stroke"in l&&{stroke:ie||N},...ls(Q,(V,F,H)=>{const j=fg(Xe(V,b),H==null?void 0:H[v]),D=Xe(V,E),be=Xe(V,z),J=Xe(V,W),le=Y9(s,{z:D,fill:be,stroke:J}),_e=[],Fe=[],tt=j&&M([]),$e=D&&U([]),Ct=be&&de([]),Se=J&&Y([]),$r=e&&f([]),zt=e&&d([]),Te=t&&p([]),vi=t&&y([]),tn=_P(e,t,V);let Ge=0;for(const nt of s)nt.initialize(V);o&&o.initialize(V),a&&a.initialize(V);for(const nt of F){const X=[];for(const ue of s)ue.scope("facet",nt);o&&o.scope("facet",nt),a&&a.scope("facet",nt);for(const[ue,k]of hd(nt,le))for(const[K,ce]of hd(k,j))for(const[xe,Re]of tn(ce))if(!(a&&!a.reduce(xe,Re))){X.push(Ge++),Fe.push(i.reduceIndex(xe,V,Re)),j&&tt.push(K),D&&$e.push(le===D?ue:D[(xe.length>0?xe:ce)[0]]),be&&Ct.push(le===be?ue:be[(xe.length>0?xe:ce)[0]]),J&&Se.push(le===J?ue:J[(xe.length>0?xe:ce)[0]]),$r&&($r.push(Re.x1),zt.push(Re.x2)),Te&&(Te.push(Re.y1),vi.push(Re.y2));for(const Dr of s)Dr.reduce(xe,Re);o&&o.reduce(xe)}_e.push(X)}return j9(_e,o,u),{data:Fe,facets:_e}}),...!fo(s,"x")&&(c?{x1:c,x2:h,x:tc(c,h)}:{x:_,x1:A,x2:L}),...!fo(s,"y")&&(m?{y1:m,y2:g,y:tc(m,g)}:{y:x,y1:R,y2:C}),...w&&{[v]:w},...Object.fromEntries(s.map(({name:V,output:F})=>[V,F]))}}function pP({cumulative:e,domain:t,thresholds:n,interval:r,...i},a){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...a}]}function bP(e,{cumulative:t,domain:n,thresholds:r,interval:i},a){return e={...Ga(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=a),e.thresholds=gP(e.thresholds,e.interval),e}function Xd(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Dt,thresholds:i}=e,a=o=>{let u=Xe(o,t),s;if(_t(u)||vP(i)){u=Ue(u,sg,Float64Array);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Ur(i)?i(u,c,f):i;typeof h=="number"&&(h=ip(c,f,h)),Ur(h)&&(r===Dt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f))),s=h}else{u=un(u);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Ur(i)?i(u,c,f):i;if(typeof h=="number")if(r===Dt){let d=Uo(c,f,h);if(isFinite(d))if(d>0){let m=Math.round(c/d),p=Math.round(f/d);m*d<=c||--m,p*d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let y=0;y<g;++y)h[y]=(m+y)*d}else if(d<0){d=-d;let m=Math.round(c*d),p=Math.round(f*d);m/d<=c||--m,p/d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let y=0;y<g;++y)h[y]=(m+y)/d}else h=[c];else h=[c]}else h=na(c,f,h);else Ur(h)&&(r===Dt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f)));s=h}const l=[];if(s.length===1)l.push([s[0],s[0]]);else for(let c=1;c<s.length;++c)l.push([s[c-1],s[c]]);return l.bin=(n<0?xP:n>0?MP:Df)(l,s,u),l};return a.label=Tr(t),a}function gP(e,t,n=Zd){if(e===void 0)return t===void 0?n:gi(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return C3;case"scott":return b1;case"sturges":return P3;case"auto":return Zd}return nf(e)}return e}function yP(e,t){return H9(e,t,z2)}function z2(e,t,n){return yg(e,t,n,H2)}function H2(e,t,n){return wg(e,t,n,W2)}function W2(e,t){return df(e,t,wP)}function wP(e){switch(`${e}`.toLowerCase()){case"x":return PP;case"x1":return SP;case"x2":return EP;case"y":return AP;case"y1":return CP;case"y2":return TP}throw new Error(`invalid bin reduce: ${e}`)}function Zd(e,t,n){return Math.min(200,b1(e,t,n))}function vP(e){return x9(e)||tr(e)&&_t(e)}function _P(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries()){const c=i.bin(o[u]);for(const[f,[h,d]]of i.entries())yield[c[f],{data:n,x1:s,y1:h,x2:l,y2:d}]}}:r?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries())yield[o[u],{data:n,x1:s,x2:l}]}:function*(a){const o=i.bin(a);for(const[u,[s,l]]of i.entries())yield[o[u],{data:n,y1:s,y2:l}]}}function Df(e,t,n){return t=un(t),r=>{var a;const i=e.map(()=>[]);for(const o of r)(a=i[Tu(t,n[o])-1])==null||a.push(o);return i}}function MP(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=1,u=a.length;o<u;++o){const s=a[o-1],l=a[o];for(const c of s)l.push(c)}return a}}function xP(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=a.length-2;o>=0;--o){const u=a[o+1],s=a[o];for(const l of u)s.push(l)}return a}}function V2(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const PP={reduceIndex(e,t,{x1:n,x2:r}){return V2(n,r)}},AP={reduceIndex(e,t,{y1:n,y2:r}){return V2(n,r)}},SP={reduceIndex(e,t,{x1:n}){return n}},EP={reduceIndex(e,t,{x2:n}){return n}},CP={reduceIndex(e,t,{y1:n}){return n}},TP={reduceIndex(e,t,{y2:n}){return n}};function Y2(e={}){return cg(e)?e:{...e,y:st}}function kP(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const u of t)for(const s of u)r[s]&&++i,r[s]=1;if(i===0)return{data:e,facets:t};e=da(e);const a=e[og]=new Uint32Array(n+i);t=t.map(u=>da(u,Uint32Array));let o=n;r.fill(0);for(const u of t)for(let s=0,l=u.length;s<l;++s){const c=u[s];r[c]?(u[s]=o,e[o]=e[c],a[o]=c,++o):a[c]=c,r[c]=1}return{data:e,facets:t}}function $P(e={},t={}){arguments.length===1&&([e,t]=DP(e));const{x1:n,x:r=n,y:i,...a}=t,[o,u,s,l]=FP(r,i,"x","y",e,a);return{...o,x1:n,x:u,y1:s,y2:l,y:tc(s,l)}}function j2({y:e,y1:t,y2:n,...r}={}){return r=ds(r,"x"),t===void 0&&n===void 0?$P({y:e,...r}):([t,n]=w9(e,t,n),{...r,y1:t,y2:n})}function DP(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const NP={length:!0};function FP(e,t=d9,n,r,{offset:i,order:a,reverse:o},u){if(t===null)throw new Error(`stack requires ${r}`);const s=of(u),[l,c]=xn(e),[f,h]=yu(t),[d,m]=yu(t);return f.hint=d.hint=NP,i=BP(i),a=RP(a,i,r),[ls(u,(p,g,y)=>{({data:p,facets:g}=kP(p,g));const b=e==null?void 0:c(fg(Xe(p,e),y==null?void 0:y[n])),v=Xe(p,t,Float64Array),w=Xe(p,s),M=a&&a(p,b,v,w),_=p.length,x=h(new Float64Array(_)),E=m(new Float64Array(_)),$=[];for(const N of g){const A=b?Array.from(Du(N,L=>b[L]).values()):[N];if(M)for(const L of A)L.sort(M);for(const L of A){let R=0,C=0;o&&L.reverse();for(const S of L){const I=v[S];I<0?R=E[S]=(x[S]=R)+I:I>0?C=E[S]=(x[S]=C)+I:E[S]=x[S]=C}}$.push(A)}return i&&i($,x,E,w),{data:p,facets:g}}),l,f,d]}function BP(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return LP;case"center":case"silhouette":return IP;case"wiggle":return Z2}throw new Error(`unknown offset: ${e}`)}}function X2(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function LP(e,t,n){for(const r of e)for(const i of r){const[a,o]=X2(i,n);for(const u of i){const s=1/(o-a||1);t[u]=s*(t[u]-a),n[u]=s*(n[u]-a)}}}function IP(e,t,n){for(const r of e){for(const i of r){const[a,o]=X2(i,n);for(const u of i){const s=(o+a)/2;t[u]-=s,n[u]-=s}}K2(r,t,n)}Q2(e,t,n)}function Z2(e,t,n,r){for(const i of e){const a=new br;let o=0;for(const u of i){let s=-1;const l=u.map(d=>Math.abs(n[d]-t[d])),c=u.map(d=>{s=r?r[d]:++s;const m=n[d]-t[d],p=a.has(s)?m-a.get(s):0;return a.set(s,m),p}),f=[0,...y3(c)];for(const d of u)t[d]+=o,n[d]+=o;const h=Yn(l);h&&(o-=Yn(l,(d,m)=>(c[m]/2+f[m])*d)/h)}K2(i,t,n)}Q2(e,t,n)}function K2(e,t,n){const r=kn(e,i=>kn(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function Q2(e,t,n){const r=e.length;if(r===1)return;const i=e.map(u=>u.flat()),a=i.map(u=>(kn(u,s=>t[s])+It(u,s=>n[s]))/2),o=kn(a);for(let u=0;u<r;u++){const s=o-a[u];for(const l of i[u])t[l]+=s,n[l]+=s}}function RP(e,t,n){if(e===void 0&&t===Z2)return Kd(Zt);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?gu:Zt;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return OP(i);case"z":return qP(i);case"sum":return GP(i);case"appearance":return UP(i);case"inside-out":return Kd(i)}return Qd(ug(e))}if(typeof e=="function")return(e.length===1?Qd:zP)(e);if(Array.isArray(e))return HP(e);throw new Error(`invalid order: ${e}`)}}function OP(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function qP(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function GP(e){return gs(e,(t,n,r,i)=>Pc(In(t),a=>Yn(a,o=>r[o]),a=>i[a]))}function UP(e){return gs(e,(t,n,r,i)=>Pc(In(t),a=>n[p1(a,o=>r[o])],a=>i[a]))}function Kd(e){return gs(e,(t,n,r,i)=>{const a=In(t),o=Pc(a,f=>n[p1(f,h=>r[h])],f=>i[f]),u=Hr(a,f=>Yn(f,h=>r[h]),f=>i[f]),s=[],l=[];let c=0;for(const f of o)c<0?(c+=u.get(f),s.push(f)):(c-=u.get(f),l.push(f));return l.reverse().concat(s)})}function Qd(e){return t=>{const n=Xe(t,e);return(r,i)=>Zt(n[r],n[i])}}function zP(e){return t=>(n,r)=>e(t[n],t[r])}function HP(e){return gs(Zt,()=>e)}function gs(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new br(t(n,r,i,a).map((u,s)=>[u,s]));return(u,s)=>e(o.get(a[u]),o.get(a[s]))}}const WP={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class VP extends dt{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,z:u,curve:s,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:of(n),optional:!0}},n,WP),this.z=u,this.curve=q2(s,l)}filter(t){return t}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r;return qe("svg:g",a).call(qt,this,i,a).call(Et,this,n,0,0).call(c=>c.selectAll().data(Ag(t,[o,u,s,l],this,r)).enter().append("path").call(Gt,this).call(Pg,this,r).attr("d",o4().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>u[f]).x1(f=>s[f]).y1(f=>l[f]))).node()}}function YP(e,t){const{x:n=is,...r}=U2(t);return new VP(e,j2(Y2({...r,x1:n,x2:void 0})))}const jP={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class XP extends dt{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:u,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,jP),this.curve=G2(u,s),ja(this,n)}project(t,n,r){this.curve!==fi&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r,{curve:c}=this;return qe("svg:g",a).call(qt,this,i,a).call(Et,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Gt,this).attr("d",c===fi&&a.projection?ZP(a.projection,o,u,s,l):h=>{const d=zn(),m=c(d);return m.lineStart(),m.point(o[h],u[h]),m.point(s[h],l[h]),m.lineEnd(),d}).call(On,this,r).call(ms,this,r,a)).node()}}function ZP(e,t,n,r,i){const a=Uu(e);return t=un(t),n=un(n),r=un(r),i=un(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function Nf(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...u}={}){return[n,r]=Jd(t,n,r),[a,o]=Jd(i,a,o),new XP(e,{...u,x1:n,x2:r,y1:a,y2:o})}function Jd(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class J2 extends dt{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:u=a,insetBottom:s=a,insetLeft:l=a,rx:c,ry:f}=r;this.insetTop=De(o),this.insetRight=De(u),this.insetBottom=De(s),this.insetLeft=De(l),this.rx=et(c,"auto"),this.ry=et(f,"auto")}render(t,n,r,i,a){const{rx:o,ry:u}=this;return qe("svg:g",a).call(qt,this,i,a).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("rect").call(Gt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(fe,"rx",o).call(fe,"ry",u).call(On,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}}const KP={ariaLabel:"bar"};class QP extends J2{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,KP)}_transform(t,n,{y:r}){t.call(Et,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return li(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:u,insetBottom:s}=this;return li(t)?o-i-a-u-s:l=>Math.max(0,Math.abs(r[l]-n[l])-u-s)}}function JP(e,t={}){return y9(t)||(t={...t,x:is,y2:st}),new QP(e,j2(a2(Y2(t))))}const eA={ariaLabel:"cell"};class tA extends J2{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,eA)}_transform(t,n){t.call(Et,n,{},0,0)}}function ey(e,{x:t,y:n,...r}={}){return[t,n]=qa(t,n),new tA(e,{...r,x:t,y:n})}const nA={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function rA(e){return e.sort===void 0&&e.reverse===void 0?G9({channel:"-r"},e):e}class iA extends dt{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:u=fa,frameAnchor:s}=n,[l,c]=ht(o,0),[f,h]=O9(u),[d,m]=ht(a,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:ns,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},rA(n),nA),this.r=m,this.rotate=c,this.symbol=h,this.frameAnchor=us(s);const{channels:p}=this,{symbol:g}=p;if(g){const{fill:y,stroke:b}=p;g.hint={fill:y?y.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,r:c,rotate:f,symbol:h}=r,{r:d,rotate:m,symbol:p}=this,[g,y]=Wa(this,i),b=p===fa,v=c?void 0:d*d*Math.PI;return Jc(d)&&(t=[]),qe("svg:g",a).call(qt,this,i,a).call(Et,this,{x:s&&o,y:l&&u}).call(w=>w.selectAll().data(t).enter().append(b?"circle":"path").call(Gt,this).call(b?M=>{M.attr("cx",s?_=>s[_]:g).attr("cy",l?_=>l[_]:y).attr("r",c?_=>c[_]:d)}:M=>{M.attr("transform",Sf`translate(${s?_=>s[_]:g},${l?_=>l[_]:y})${f?_=>` rotate(${f[_]})`:m?` rotate(${m})`:""}`).attr("d",c&&h?_=>{const x=zn();return h[_].draw(x,c[_]*c[_]*Math.PI),x}:c?_=>{const x=zn();return p.draw(x,c[_]*c[_]*Math.PI),x}:h?_=>{const x=zn();return h[_].draw(x,v),x}:(()=>{const _=zn();return p.draw(_,v),_})())}).call(On,this,r)).node()}}function ys(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=qa(t,n)),new iA(e,{...r,x:t,y:n})}const aA={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ty extends dt{constructor(t,n={}){const{x:r,y:i,z:a,curve:o,tension:u}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:of(n),optional:!0}},n,aA),this.z=a,this.curve=G2(o,u),ja(this,n)}filter(t){return t}project(t,n,r){this.curve!==fi&&super.project(t,n,r)}render(t,n,r,i,a){const{x:o,y:u}=r,{curve:s}=this;return qe("svg:g",a).call(qt,this,i,a).call(Et,this,n).call(l=>l.selectAll().data(Ag(t,[o,u],this,r)).enter().append("path").call(Gt,this).call(Pg,this,r).call(zM,this,r,a).attr("d",s===fi&&a.projection?oA(a.projection,o,u):Sb().curve(s).defined(c=>c>=0).x(c=>o[c]).y(c=>u[c]))).node()}}function oA(e,t,n){const r=Uu(e);return t=un(t),n=un(n),i=>{let a=[];const o=[a];for(const u of i)u===-1?(a=[],o.push(a)):a.push([t[u],n[u]]);return r({type:"MultiLineString",coordinates:o})}}function uA(e,{x:t,y:n,...r}={}){return[t,n]=qa(t,n),new ty(e,{...r,x:t,y:n})}function sA(e,{x:t=is,y:n=st,...r}={}){return new ty(e,U2({...r,x:t,y:n}))}const lA={ariaLabel:"tick",fill:null,stroke:"currentColor"};class cA extends dt{constructor(t,n,r){super(t,n,r,lA),ja(this,r)}render(t,n,r,i,a){return qe("svg:g",a).call(qt,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(On,this,r).call(ms,this,r,a)).node()}}class fA extends cA{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=De(o),this.insetBottom=De(u)}_transform(t,n,{x:r}){t.call(Et,n,{x:r},gt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function Ff(e,{x:t=st,...n}={}){return new fA(e,{...n,x:t})}function hA(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),Oe(t,"width",e[0]+"px"),Oe(t,"margin","auto")},m(a,o){te(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&Oe(t,"width",a[0]+"px")},i:ve,o:ve,d(a){a&&ee(t),e[4](null)}}}function dA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;Kt(()=>{const s=Ut({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Ff(r,{x:l=>l})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class mA extends Qe{constructor(t){super(),Ke(this,t,dA,hA,Ze,{pattern:3,width:0,height:1})}}function pA(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),Oe(t,"width",e[0]+"px"),Oe(t,"margin","auto")},m(a,o){te(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&Oe(t,"width",a[0]+"px")},i:ve,o:ve,d(a){a&&ee(t),e[4](null)}}}function bA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;Kt(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=Ut({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},marks:[JP(s,{x:(c,f)=>f+1,y:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class gA extends Qe{constructor(t){super(),Ke(this,t,bA,pA,Ze,{pattern:3,width:0,height:1})}}function yA(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),Oe(t,"width",e[0]+"px"),Oe(t,"margin","auto")},m(a,o){te(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&Oe(t,"width",a[0]+"px")},i:ve,o:ve,d(a){a&&ee(t),e[4](null)}}}function wA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;Kt(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=Ut({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[ey(s,{x:(c,f)=>f+1,fill:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class vA extends Qe{constructor(t){super(),Ke(this,t,wA,yA,Ze,{pattern:3,width:0,height:1})}}function _A(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),Oe(t,"width",e[0]+"px"),Oe(t,"margin","auto")},m(a,o){te(a,t,o),P(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&Oe(t,"width",a[0]+"px")},i:ve,o:ve,d(a){a&&ee(t),e[5](null)}}}function MA(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;Kt(()=>{if(n(2,u.textContent="",u),!r)return;const l=Ut({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[sA(r,{x:(c,f)=>f/i,y:c=>c})]});u.appendChild(l)});function s(l){ut[l?"unshift":"push"](()=>{u=l,n(2,u)})}return e.$$set=l=>{"audioData"in l&&n(3,r=l.audioData),"sampleRate"in l&&n(4,i=l.sampleRate),"width"in l&&n(0,a=l.width),"height"in l&&n(1,o=l.height)},[a,o,u,r,i,s]}class To extends Qe{constructor(t){super(),Ke(this,t,MA,_A,Ze,{audioData:3,sampleRate:4,width:0,height:1})}}function xA(e){let t,n,r,i,a,o;return{c(){t=T("main"),n=T("audio"),r=O(),i=T("button"),i.textContent="play audio (p)",n.controls=!1},m(u,s){te(u,t,s),P(t,n),e[5](n),P(t,r),P(t,i),a||(o=ft(i,"click",e[1]),a=!0)},p:ve,i:ve,o:ve,d(u){u&&ee(t),e[5](null),a=!1,o()}}}function PA(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:a=-1}=t,o;const u=f=>{f&&o&&Kc(f,i,o)},s=()=>{o&&(n(0,o.currentTime=0,o),o.play())},l=f=>{f.key==="p"&&s()};Ma(()=>{document.querySelector("html").addEventListener("keyup",l),u(r)}),r3(()=>{document.querySelector("html").removeEventListener("keyup",l)});function c(f){ut[f?"unshift":"push"](()=>{o=f,n(0,o)})}return e.$$set=f=>{"audioData"in f&&n(2,r=f.audioData),"sampleRate"in f&&n(3,i=f.sampleRate),"currentTrialNumber"in f&&n(4,a=f.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&window.setTimeout(s,250),e.$$.dirty&4&&u(r)},[o,s,r,i,a,c]}class ny extends Qe{constructor(t){super(),Ke(this,t,PA,xA,Ze,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const ry=new Map,iy=new Map,AA=new Map,SA=new Map;function EA(e){return ry.get(e)}function ay(e){return iy.get(e)}const CA=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],TA=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],kA=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of CA)ry.set(e.pitch,e),iy.set(e.label,e);for(const e of TA)AA.set(e.number,e);for(const e of kA){const t=`${e.number}-${e.subnumber}`;SA.set(t,e)}var $A={value:()=>{}};function oy(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ko(n)}function ko(e){this._=e}function DA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ko.prototype=oy.prototype={constructor:ko,on:function(e,t){var n=this._,r=DA(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=NA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=e0(n[i],e.name,t);else if(t==null)for(i in n)n[i]=e0(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ko(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function NA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function e0(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=$A,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var cc="http://www.w3.org/1999/xhtml";const t0={svg:"http://www.w3.org/2000/svg",xhtml:cc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ws(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),t0.hasOwnProperty(t)?{space:t0[t],local:e}:e}function FA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===cc&&t.documentElement.namespaceURI===cc?t.createElement(e):t.createElementNS(n,e)}}function BA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function uy(e){var t=ws(e);return(t.local?BA:FA)(t)}function LA(){}function Bf(e){return e==null?LA:function(){return this.querySelector(e)}}function IA(e){typeof e!="function"&&(e=Bf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Ot(r,this._parents)}function sy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function RA(){return[]}function ly(e){return e==null?RA:function(){return this.querySelectorAll(e)}}function OA(e){return function(){var t=e.apply(this,arguments);return t==null?[]:sy(t)}}function qA(e){typeof e=="function"?e=OA(e):e=ly(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Ot(r,i)}function cy(e){return function(){return this.matches(e)}}function fy(e){return function(t){return t.matches(e)}}var GA=Array.prototype.find;function UA(e){return function(){return GA.call(this.children,e)}}function zA(){return this.firstElementChild}function HA(e){return this.select(e==null?zA:UA(typeof e=="function"?e:fy(e)))}var WA=Array.prototype.filter;function VA(){return this.children}function YA(e){return function(){return WA.call(this.children,e)}}function jA(e){return this.selectAll(e==null?VA:YA(typeof e=="function"?e:fy(e)))}function XA(e){typeof e!="function"&&(e=cy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Ot(r,this._parents)}function hy(e){return new Array(e.length)}function ZA(){return new Ot(this._enter||this._groups.map(hy),this._parents)}function Mu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mu.prototype={constructor:Mu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function KA(e){return function(){return e}}function QA(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new Mu(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function JA(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new Mu(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function eS(e){return e.__data__}function tS(e,t){if(!arguments.length)return Array.from(this,eS);var n=t?JA:QA,r=this._parents,i=this._groups;typeof e!="function"&&(e=KA(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=sy(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),y=s[l]=new Array(h);n(c,f,p,g,y,d,t);for(var b=0,v=0,w,M;b<m;++b)if(w=p[b]){for(b>=v&&(v=b+1);!(M=g[v])&&++v<m;);w._next=M||null}}return o=new Ot(o,r),o._enter=u,o._exit=s,o}function nS(){return new Ot(this._exit||this._groups.map(hy),this._parents)}function rS(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function iS(e){if(!(e instanceof Ot))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Ot(o,this._parents)}function aS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function oS(e){e||(e=uS);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Ot(i,this._parents).order()}function uS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lS(){return Array.from(this)}function cS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function fS(){let e=0;for(const t of this)++e;return e}function hS(){return!this.node()}function dS(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function mS(e){return function(){this.removeAttribute(e)}}function pS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bS(e,t){return function(){this.setAttribute(e,t)}}function gS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function yS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function wS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vS(e,t){var n=ws(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?pS:mS:typeof t=="function"?n.local?wS:yS:n.local?gS:bS)(n,t))}function dy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _S(e){return function(){this.style.removeProperty(e)}}function MS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function PS(e,t,n){return arguments.length>1?this.each((t==null?_S:typeof t=="function"?xS:MS)(e,t,n??"")):hi(this.node(),e)}function hi(e,t){return e.style.getPropertyValue(t)||dy(e).getComputedStyle(e,null).getPropertyValue(t)}function AS(e){return function(){delete this[e]}}function SS(e,t){return function(){this[e]=t}}function ES(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function CS(e,t){return arguments.length>1?this.each((t==null?AS:typeof t=="function"?ES:SS)(e,t)):this.node()[e]}function my(e){return e.trim().split(/^|\s+/)}function Lf(e){return e.classList||new py(e)}function py(e){this._node=e,this._names=my(e.getAttribute("class")||"")}py.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function by(e,t){for(var n=Lf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function gy(e,t){for(var n=Lf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function TS(e){return function(){by(this,e)}}function kS(e){return function(){gy(this,e)}}function $S(e,t){return function(){(t.apply(this,arguments)?by:gy)(this,e)}}function DS(e,t){var n=my(e+"");if(arguments.length<2){for(var r=Lf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?$S:t?TS:kS)(n,t))}function NS(){this.textContent=""}function FS(e){return function(){this.textContent=e}}function BS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function LS(e){return arguments.length?this.each(e==null?NS:(typeof e=="function"?BS:FS)(e)):this.node().textContent}function IS(){this.innerHTML=""}function RS(e){return function(){this.innerHTML=e}}function OS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function qS(e){return arguments.length?this.each(e==null?IS:(typeof e=="function"?OS:RS)(e)):this.node().innerHTML}function GS(){this.nextSibling&&this.parentNode.appendChild(this)}function US(){return this.each(GS)}function zS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function HS(){return this.each(zS)}function WS(e){var t=typeof e=="function"?e:uy(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function VS(){return null}function YS(e,t){var n=typeof e=="function"?e:uy(e),r=t==null?VS:typeof t=="function"?t:Bf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function jS(){var e=this.parentNode;e&&e.removeChild(this)}function XS(){return this.each(jS)}function ZS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function KS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function QS(e){return this.select(e?KS:ZS)}function JS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eE(e){return function(t){e.call(this,t,this.__data__)}}function tE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function rE(e,t,n){return function(){var r=this.__on,i,a=eE(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function iE(e,t,n){var r=tE(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?rE:nE,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function yy(e,t,n){var r=dy(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function aE(e,t){return function(){return yy(this,e,t)}}function oE(e,t){return function(){return yy(this,e,t.apply(this,arguments))}}function uE(e,t){return this.each((typeof t=="function"?oE:aE)(e,t))}function*sE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var lE=[null];function Ot(e,t){this._groups=e,this._parents=t}function Xa(){return new Ot([[document.documentElement]],lE)}function cE(){return this}Ot.prototype=Xa.prototype={constructor:Ot,select:IA,selectAll:qA,selectChild:HA,selectChildren:jA,filter:XA,data:tS,enter:ZA,exit:nS,join:rS,merge:iS,selection:cE,order:aS,sort:oS,call:sS,nodes:lS,node:cS,size:fS,empty:hS,each:dS,attr:vS,style:PS,property:CS,classed:DS,text:LS,html:qS,raise:US,lower:HS,append:WS,insert:YS,remove:XS,clone:QS,datum:JS,on:iE,dispatch:uE,[Symbol.iterator]:sE};function If(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Za(){}var ga=.7,xu=1/ga,jr="\\s*([+-]?\\d+)\\s*",ya="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",dn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fE=/^#([0-9a-f]{3,8})$/,hE=new RegExp("^rgb\\("+[jr,jr,jr]+"\\)$"),dE=new RegExp("^rgb\\("+[dn,dn,dn]+"\\)$"),mE=new RegExp("^rgba\\("+[jr,jr,jr,ya]+"\\)$"),pE=new RegExp("^rgba\\("+[dn,dn,dn,ya]+"\\)$"),bE=new RegExp("^hsl\\("+[ya,dn,dn]+"\\)$"),gE=new RegExp("^hsla\\("+[ya,dn,dn,ya]+"\\)$"),n0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};If(Za,wa,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:r0,formatHex:r0,formatHsl:yE,formatRgb:i0,toString:i0});function r0(){return this.rgb().formatHex()}function yE(){return vy(this).formatHsl()}function i0(){return this.rgb().formatRgb()}function wa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?a0(t):n===3?new xt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hE.exec(e))?new xt(t[1],t[2],t[3],1):(t=dE.exec(e))?new xt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mE.exec(e))?wo(t[1],t[2],t[3],t[4]):(t=pE.exec(e))?wo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bE.exec(e))?s0(t[1],t[2]/100,t[3]/100,1):(t=gE.exec(e))?s0(t[1],t[2]/100,t[3]/100,t[4]):n0.hasOwnProperty(e)?a0(n0[e]):e==="transparent"?new xt(NaN,NaN,NaN,0):null}function a0(e){return new xt(e>>16&255,e>>8&255,e&255,1)}function wo(e,t,n,r){return r<=0&&(e=t=n=NaN),new xt(e,t,n,r)}function wE(e){return e instanceof Za||(e=wa(e)),e?(e=e.rgb(),new xt(e.r,e.g,e.b,e.opacity)):new xt}function fc(e,t,n,r){return arguments.length===1?wE(e):new xt(e,t,n,r??1)}function xt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}If(xt,fc,wy(Za,{brighter:function(e){return e=e==null?xu:Math.pow(xu,e),new xt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?ga:Math.pow(ga,e),new xt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:o0,formatHex:o0,formatRgb:u0,toString:u0}));function o0(){return"#"+ll(this.r)+ll(this.g)+ll(this.b)}function u0(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ll(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function s0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new on(e,t,n,r)}function vy(e){if(e instanceof on)return new on(e.h,e.s,e.l,e.opacity);if(e instanceof Za||(e=wa(e)),!e)return new on;if(e instanceof on)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new on(o,u,s,e.opacity)}function _y(e,t,n,r){return arguments.length===1?vy(e):new on(e,t,n,r??1)}function on(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}If(on,_y,wy(Za,{brighter:function(e){return e=e==null?xu:Math.pow(xu,e),new on(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ga:Math.pow(ga,e),new on(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new xt(cl(e>=240?e-240:e+120,i,r),cl(e,i,r),cl(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function cl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const My=e=>()=>e;function vE(e,t){return function(n){return e+n*t}}function _E(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ME(e){return(e=+e)==1?xy:function(t,n){return n-t?_E(t,n,e):My(isNaN(t)?n:t)}}function xy(e,t){var n=t-e;return n?vE(e,n):My(isNaN(e)?t:e)}const hc=function e(t){var n=ME(t);function r(i,a){var o=n((i=fc(i)).r,(a=fc(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=xy(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Un(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var dc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fl=new RegExp(dc.source,"g");function xE(e){return function(){return e}}function PE(e){return function(t){return e(t)+""}}function AE(e,t){var n=dc.lastIndex=fl.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=dc.exec(e))&&(i=fl.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:Un(r,i)})),n=fl.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?PE(s[0].x):xE(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}var l0=180/Math.PI,mc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Py(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*l0,skewX:Math.atan(s)*l0,scaleX:o,scaleY:u}}var vo;function SE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mc:Py(t.a,t.b,t.c,t.d,t.e,t.f)}function EE(e){return e==null||(vo||(vo=document.createElementNS("http://www.w3.org/2000/svg","g")),vo.setAttribute("transform",e),!(e=vo.transform.baseVal.consolidate()))?mc:(e=e.matrix,Py(e.a,e.b,e.c,e.d,e.e,e.f))}function Ay(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Un(l,f)},{i:p-2,x:Un(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Un(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Un(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Un(l,f)},{i:p-2,x:Un(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var CE=Ay(SE,"px, ","px)","deg)"),TE=Ay(EE,", ",")",")"),di=0,zi=0,ki=0,Sy=1e3,Pu,Hi,Au=0,Ar=0,vs=0,va=typeof performance=="object"&&performance.now?performance:Date,Ey=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rf(){return Ar||(Ey(kE),Ar=va.now()+vs)}function kE(){Ar=0}function Su(){this._call=this._time=this._next=null}Su.prototype=Cy.prototype={constructor:Su,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Rf():+n)+(t==null?0:+t),!this._next&&Hi!==this&&(Hi?Hi._next=this:Pu=this,Hi=this),this._call=e,this._time=n,pc()},stop:function(){this._call&&(this._call=null,this._time=1/0,pc())}};function Cy(e,t,n){var r=new Su;return r.restart(e,t,n),r}function $E(){Rf(),++di;for(var e=Pu,t;e;)(t=Ar-e._time)>=0&&e._call.call(null,t),e=e._next;--di}function c0(){Ar=(Au=va.now())+vs,di=zi=0;try{$E()}finally{di=0,NE(),Ar=0}}function DE(){var e=va.now(),t=e-Au;t>Sy&&(vs-=t,Au=e)}function NE(){for(var e,t=Pu,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Pu=n);Hi=e,pc(r)}function pc(e){if(!di){zi&&(zi=clearTimeout(zi));var t=e-Ar;t>24?(e<1/0&&(zi=setTimeout(c0,e-va.now()-vs)),ki&&(ki=clearInterval(ki))):(ki||(Au=va.now(),ki=setInterval(DE,Sy)),di=1,Ey(c0))}}function f0(e,t,n){var r=new Su;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var FE=oy("start","end","cancel","interrupt"),BE=[],Ty=0,h0=1,bc=2,$o=3,d0=4,gc=5,Do=6;function _s(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;LE(e,n,{name:t,index:r,group:i,on:FE,tween:BE,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ty})}function Of(e,t){var n=en(e,t);if(n.state>Ty)throw new Error("too late; already scheduled");return n}function yn(e,t){var n=en(e,t);if(n.state>$o)throw new Error("too late; already running");return n}function en(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function LE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Cy(a,0,n.time);function a(l){n.state=h0,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==h0)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===$o)return f0(o);d.state===d0?(d.state=Do,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Do,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(f0(function(){n.state===$o&&(n.state=d0,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=bc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bc){for(n.state=$o,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=gc,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===gc&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Do,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function IE(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>bc&&r.state<gc,r.state=Do,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function RE(e){return this.each(function(){IE(this,e)})}function OE(e,t){var n,r;return function(){var i=yn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function qE(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=yn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function GE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=en(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?OE:qE)(n,e,t))}function qf(e,t,n){var r=e._id;return e.each(function(){var i=yn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return en(i,r).value[t]}}function ky(e,t){var n;return(typeof t=="number"?Un:t instanceof wa?hc:(n=wa(t))?(t=n,hc):AE)(e,t)}function UE(e){return function(){this.removeAttribute(e)}}function zE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function HE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function WE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function VE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function YE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function jE(e,t){var n=ws(e),r=n==="transform"?TE:ky;return this.attrTween(e,typeof t=="function"?(n.local?YE:VE)(n,r,qf(this,"attr."+e,t)):t==null?(n.local?zE:UE)(n):(n.local?WE:HE)(n,r,t))}function XE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ZE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function KE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ZE(e,a)),n}return i._value=t,i}function QE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&XE(e,a)),n}return i._value=t,i}function JE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ws(e);return this.tween(n,(r.local?KE:QE)(r,t))}function eC(e,t){return function(){Of(this,e).delay=+t.apply(this,arguments)}}function tC(e,t){return t=+t,function(){Of(this,e).delay=t}}function nC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eC:tC)(t,e)):en(this.node(),t).delay}function rC(e,t){return function(){yn(this,e).duration=+t.apply(this,arguments)}}function iC(e,t){return t=+t,function(){yn(this,e).duration=t}}function aC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rC:iC)(t,e)):en(this.node(),t).duration}function oC(e,t){if(typeof t!="function")throw new Error;return function(){yn(this,e).ease=t}}function uC(e){var t=this._id;return arguments.length?this.each(oC(t,e)):en(this.node(),t).ease}function sC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yn(this,e).ease=n}}function lC(e){if(typeof e!="function")throw new Error;return this.each(sC(this._id,e))}function cC(e){typeof e!="function"&&(e=cy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Bn(r,this._parents,this._name,this._id)}function fC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Bn(o,this._parents,this._name,this._id)}function hC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function dC(e,t,n){var r,i,a=hC(t)?Of:yn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function mC(e,t){var n=this._id;return arguments.length<2?en(this.node(),n).on.on(e):this.each(dC(n,e,t))}function pC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bC(){return this.on("end.remove",pC(this._id))}function gC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bf(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,_s(l[h],t,n,h,l,en(c,n)));return new Bn(a,this._parents,t,n)}function yC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ly(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=en(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&_s(d,t,n,p,h,m);a.push(h),o.push(c)}return new Bn(a,o,t,n)}var wC=Xa.prototype.constructor;function vC(){return new wC(this._groups,this._parents)}function _C(e,t){var n,r,i;return function(){var a=hi(this,e),o=(this.style.removeProperty(e),hi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function $y(e){return function(){this.style.removeProperty(e)}}function MC(e,t,n){var r,i=n+"",a;return function(){var o=hi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function xC(e,t,n){var r,i,a;return function(){var o=hi(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),hi(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function PC(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=yn(this,e),l=s.on,c=s.value[a]==null?u||(u=$y(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function AC(e,t,n){var r=(e+="")=="transform"?CE:ky;return t==null?this.styleTween(e,_C(e,r)).on("end.style."+e,$y(e)):typeof t=="function"?this.styleTween(e,xC(e,r,qf(this,"style."+e,t))).each(PC(this._id,e)):this.styleTween(e,MC(e,r,t),n).on("end.style."+e,null)}function SC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function EC(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&SC(e,o,n)),r}return a._value=t,a}function CC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,EC(e,t,n??""))}function TC(e){return function(){this.textContent=e}}function kC(e){return function(){var t=e(this);this.textContent=t??""}}function $C(e){return this.tween("text",typeof e=="function"?kC(qf(this,"text",e)):TC(e==null?"":e+""))}function DC(e){return function(t){this.textContent=e.call(this,t)}}function NC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&DC(i)),t}return r._value=e,r}function FC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,NC(e))}function BC(){for(var e=this._name,t=this._id,n=Dy(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=en(s,t);_s(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Bn(r,this._parents,e,n)}function LC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=yn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var IC=0;function Bn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Dy(){return++IC}var ir=Xa.prototype;Bn.prototype={constructor:Bn,select:gC,selectAll:yC,filter:cC,merge:fC,selection:vC,transition:BC,call:ir.call,nodes:ir.nodes,node:ir.node,size:ir.size,empty:ir.empty,each:ir.each,on:mC,attr:jE,attrTween:JE,style:AC,styleTween:CC,text:$C,textTween:FC,remove:bC,tween:GE,delay:nC,duration:aC,ease:uC,easeVarying:lC,end:LC,[Symbol.iterator]:ir[Symbol.iterator]};function RC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var OC={time:null,delay:0,duration:250,ease:RC};function qC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function GC(e){var t,n;e instanceof Bn?(t=e._id,e=e._name):(t=Dy(),(n=OC).time=Rf(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&_s(s,e,t,l,o,n||qC(s,t));return new Bn(r,this._parents,e,t)}Xa.prototype.interrupt=RE;Xa.prototype.transition=GC;function Wi(e,t,n){this.k=e,this.x=t,this.y=n}Wi.prototype={constructor:Wi,scale:function(e){return e===1?this:new Wi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Wi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Wi.prototype;var UC={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,u="",s,l,c=0;for(;c<r.length;)o=i.indexOf(r.charAt(c++))<<18|i.indexOf(r.charAt(c++))<<12|(s=i.indexOf(r.charAt(c++)))<<6|(l=i.indexOf(r.charAt(c++))),u+=s===64?String.fromCharCode(o>>16&255):l===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return u},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(u){i(n.Uint8(new Uint8Array(u.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let u=0;u<a;u++)o[u]=i.charCodeAt(u);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(s){return this.pointer+=s,this.pointer},readInt:function(s){if(s=Math.min(s,this.data.byteLength-this.pointer),s<1)return-1;let l=0;if(s>1)for(let c=1;c<=s-1;c++)l+=this.data.getUint8(this.pointer)*Math.pow(256,s-c),this.pointer++;return l+=this.data.getUint8(this.pointer),this.pointer++,l},readStr:function(s){let l="";for(let c=1;c<=s;c++)l+=String.fromCharCode(this.readInt(1));return l},readIntVLV:function(){let s=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)s=this.readInt(1);else{let l=[];for(;this.data.getUint8(this.pointer)>=128;)l.push(this.readInt(1)-128);let c=this.readInt(1);for(let f=1;f<=l.length;f++)s+=l[l.length-f]*Math.pow(128,f);s+=c}return s}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),u=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=u):a.timeDivision=o*256+u;for(let s=1;s<=a.tracks;s++){a.track[s-1]={event:[]};let l=i.readInt(4);if(l===-1)break;if(l!==1297379947)return!1;i.readInt(4);let c=0,f=!1,h,d;for(;!f&&(c++,a.track[s-1].event[c-1]={},a.track[s-1].event[c-1].deltaTime=i.readIntVLV(),h=i.readInt(1),h!==-1);)if(h>=128?d=h:(h=d,i.movePointer(-1)),h===255){a.track[s-1].event[c-1].type=255,a.track[s-1].event[c-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[s-1].event[c-1].metaType){case 47:case-1:f=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[s-1].event[c-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[s-1].event[c-1].data=i.readInt(m);break;case 84:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1),a.track[s-1].event[c-1].data[4]=i.readInt(1);break;case 88:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,m)),(this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)&&(i.readInt(m),a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(h=h.toString(16).split(""),h[1]||h.unshift("0"),a.track[s-1].event[c-1].type=parseInt(h[0],16),a.track[s-1].event[c-1].channel=parseInt(h[1],16),a.track[s-1].event[c-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].type,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1){let m=i.readIntVLV();a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[s-1].event[c-1].data=i.readInt(1);break;case-1:f=!0;break;default:if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(UC);function Ny(e){return 1/(e/60)}const Fy=[],zC=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of zC)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;Fy.push({type:e,dots:t,duration:n})}Fy.sort((e,t)=>e.duration-t.duration);class se{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>ay(r).pitch),this.stringCount=n.length}}new se("E stand.",["E2","A2","D3","G3","B3","E4"]),new se("Drop D",["D2","A2","D3","G3","B3","E4"]),new se("Drop C",["C2","G2","C3","F3","A3","D4"]),new se("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new se("1 down",["D2","G2","C3","F3","A3","D4"]),new se("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new se("2 down",["C2","F2","A#2","D#3","G3","C4"]),new se("DADGAG",["D2","A2","D3","G3","A3","D4"]),new se("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new se("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new se("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new se("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new se("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new se("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new se("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new se("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new se("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new se("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new se("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new se("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new se("E stand.",["E1","A1","D2","G2"]),new se("Drop D",["D1","A1","D2","G2"]),new se("1/2 down",["D#1","G#1","C#2","F#2"]),new se("1 down",["D1","G1","C2","F2"]),new se("1 1/2 down",["C#1","F#1","B1","E2"]),new se("2 down",["C1","F1","A#1","D#2"]),new se("B stand.",["B0","E1","A1","D2","G2"]),new se("Drop A",["A0","D1","A1","D2","G2"]),new se("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new se("1 down",["A0","D1","G1","C2","F2"]),new se("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new se("2 down",["G0","C1","F1","A#1","D#2"]),new se("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new se("Drop E",["E0","A0","D1","A1","D2","G2"]),new se("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new se("1 down",["E1","A0","D1","G1","C2","F2"]),new se("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new se("2 down",["D0","G0","C1","F1","A#1","D#2"]),new se("Hawaii",["G4","C4","E4","A4"]),new se("Low G",["G3","C4","E4","A4"]),new se("D-tuning",["A4","D4","F#4","B4"]),new se("Canadian",["A3","D4","F#4","B4"]),new se("Bariton",["D3","G3","B3","E4"]);function By(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function Ly(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var Iy=[0,2,4,-1,1,3,5],Ry=Iy.map(e=>Math.floor(e*7/12));function Oy(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=Iy[t]+7*n;if(r===void 0)return[i*a];const o=r-Ry[t]-4*n;return[i*a,i*o]}var HC=[3,0,4,1,5,2,6];function WC(e){const[t,n,r]=e,i=HC[VC(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+Ry[i];return{step:i,alt:a,oct:o,dir:r}}function VC(e){const t=(e+1)%7;return t<0?7+t:t}var m0=(e,t)=>Array(Math.abs(t)+1).join(e),yc=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),YC="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",jC="(AA|A|P|M|m|d|dd)([-+]?\\d+)",XC=new RegExp("^"+YC+"|"+jC+"$");function ZC(e){const t=XC.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var p0={};function Eu(e){return typeof e=="string"?p0[e]||(p0[e]=KC(e)):Ly(e)?Eu(JC(e)):By(e)?Eu(e.name):yc}var b0=[0,2,4,5,7,9,11],qy="PMMPPMM";function KC(e){const t=ZC(e);if(t[0]==="")return yc;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=qy[i];if(a==="M"&&r==="P")return yc;const o=a==="M"?"majorable":"perfectable",u=""+n+r,s=n<0?-1:1,l=n===8||n===-8?n:s*(i+1),c=QC(o,r),f=Math.floor((Math.abs(n)-1)/7),h=s*(b0[i]+c+12*f),d=(s*(b0[i]+c)%12+12)%12,m=Oy({step:i,alt:c,oct:f,dir:s});return{empty:!1,name:u,num:n,q:r,step:i,alt:c,dir:s,type:o,simple:l,semitones:h,chroma:d,coord:m,oct:f}}function QC(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function JC(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,u=i<0?"-":"",s=qy[t]==="M"?"majorable":"perfectable";return u+o+eT(s,n)}function eT(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?m0("A",t):m0("d",e==="perfectable"?t:t+1)}var g0=(e,t)=>Array(Math.abs(t)+1).join(e),Gy=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),y0=new Map,tT=e=>"CDEFGAB".charAt(e),nT=e=>e<0?g0("b",-e):g0("#",e),rT=e=>e[0]==="b"?-e.length:e.length;function _a(e){const t=JSON.stringify(e),n=y0.get(t);if(n)return n;const r=typeof e=="string"?sT(e):Ly(e)?_a(lT(e)):By(e)?_a(e.name):Gy;return y0.set(t,r),r}var iT=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function aT(e){const t=iT.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function oT(e){return _a(WC(e))}var uT=(e,t)=>(e%t+t)%t,hl=[0,2,4,5,7,9,11];function sT(e){const t=aT(e);if(t[0]===""||t[3]!=="")return Gy;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=rT(r),u=i.length?+i:void 0,s=Oy({step:a,alt:o,oct:u}),l=n+r+i,c=n+r,f=(hl[a]+o+120)%12,h=u===void 0?uT(hl[a]+o,12)-12*99:hl[a]+o+12*(u+1),d=h>=0&&h<=127?h:null,m=u===void 0?null:Math.pow(2,(h-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:f,coord:s,freq:m,height:h,letter:n,midi:d,name:l,oct:u,pc:c,step:a}}function lT(e){const{step:t,alt:n,oct:r}=e,i=tT(t);if(!i)return"";const a=i+nT(n);return r||r===0?a+r:a}function cT(e,t){const n=_a(e),r=Array.isArray(t)?t:Eu(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return oT(a).name}function Uy(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var Kn={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},zy=e=>Number(e).toString(2).padStart(12,"0"),w0=e=>parseInt(e,2),fT=/^[01]{12}$/;function Hy(e){return fT.test(e)}var hT=e=>typeof e=="number"&&e>=0&&e<=4095,dT=e=>e&&Hy(e.chroma),v0={[Kn.chroma]:Kn};function Gf(e){const t=Hy(e)?e:hT(e)?zy(e):Array.isArray(e)?yT(e):dT(e)?e.chroma:Kn.chroma;return v0[t]=v0[t]||gT(t)}var mT=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function pT(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(mT[n]);return t}function bT(e){const t=e.split("");return t.map((n,r)=>Uy(r,t).join(""))}function gT(e){const t=w0(e),n=bT(e).map(w0).filter(a=>a>=2048).sort()[0],r=zy(n),i=pT(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function yT(e){if(e.length===0)return Kn.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=_a(e[r]),t.empty&&(t=Eu(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var wT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],vT=wT;({...Kn});var Wy=[],No={};function _T(e,t,n){const r=xT(e),i={...Gf(e),name:n||"",quality:r,intervals:e,aliases:t};Wy.push(i),i.name&&(No[i.name]=i),No[i.setNum]=i,No[i.chroma]=i,i.aliases.forEach(a=>MT(i,a))}function MT(e,t){No[t]=e}function xT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}vT.forEach(([e,t,n])=>_T(e.split(" "),n.split(" "),t));Wy.sort((e,t)=>e.setNum-t.setNum);var PT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],AT=PT;({...Kn});var Vy=[],Fo={};function ST(e,t,n){const r=CT(e),i={...Gf(e),name:n||"",quality:r,intervals:e,aliases:t};Vy.push(i),i.name&&(Fo[i.name]=i),Fo[i.setNum]=i,Fo[i.chroma]=i,i.aliases.forEach(a=>ET(i,a))}function ET(e,t){Fo[t]=e}function CT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}AT.forEach(([e,t,n])=>ST(e.split(" "),n.split(" "),t));Vy.sort((e,t)=>e.setNum-t.setNum);var TT=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],kT=TT,$T={...Kn,intervals:[],aliases:[]},Qi={};function DT(e){return Qi[e]||$T}function NT(e,t,n=[]){const r={...Gf(e),name:t,intervals:e,aliases:n};return Qi[r.name]=r,Qi[r.setNum]=r,Qi[r.chroma]=r,r.aliases.forEach(i=>FT(r,i)),r}function FT(e,t){Qi[t]=e}kT.forEach(([e,t,...n])=>NT(e.split(" "),t,n));var Uf=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],_0={...Kn,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},BT=Uf.map(LT),wc={};BT.forEach(e=>{wc[e.name]=e,e.aliases.forEach(t=>{wc[t]=e})});function Yy(e){return typeof e=="string"?wc[e.toLowerCase()]||_0:e&&e.name?Yy(e.name):_0}function LT(e){const[t,n,r,i,a,o,u]=e,s=u?[u]:[],l=Number(n).toString(2);return{empty:!1,intervals:DT(i).intervals,modeNum:t,chroma:l,normalized:l,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:s}}function jy(e){return(t,n)=>{const r=Yy(t);if(r.empty)return[];const i=Uy(r.modeNum,e),a=r.intervals.map(o=>cT(n,o));return i.map((o,u)=>a[u]+o)}}jy(Uf.map(e=>e[4]));jy(Uf.map(e=>e[5]));class qn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>ay(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;const s=EA(i).name;n.set(i,{number:a,letterString:`${s}${o}`})}return[...n.values()].map(r=>r.letterString)}}new qn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new qn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new qn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new qn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new qn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new qn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new qn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new qn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function IT(e,t=1){const n=_y(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>IT(e,.5));const RT=hc("black","steelblue");Array.from({length:12}).map((e,t)=>RT(t/11));function OT(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),Oe(t,"width",e[0]+"px"),Oe(t,"margin","auto")},m(a,o){te(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&Oe(t,"width",a[0]+"px")},i:ve,o:ve,d(a){a&&ee(t),e[4](null)}}}function qT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;Kt(()=>{const s=[...new Set(r)],l=s.map((f,h)=>h===0?0:f-s[h-1]),c=Ut({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},x:{label:"beat"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[ey(l,{x:(f,h)=>h+1,fill:f=>f})]});n(2,o.textContent="",o),o.appendChild(c)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Bo extends Qe{constructor(t){super(),Ke(this,t,qT,OT,Ze,{pattern:3,width:0,height:1})}}function GT(e,t,n){const r=e.slice();return r[16]=t[n],r}function UT(e){let t;return{c(){t=T("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],rt(t,t.__value)},m(n,r){te(n,t,r)},p:ve,d(n){n&&ee(t)}}}function zT(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b,v,w,M,_,x,E,$,N,A,L=Mt(["single note","single beat","only snare","beat 5"]),R=[];for(let C=0;C<4;C+=1)R[C]=UT(GT(e,L,C));return m=new ny({props:{audioData:e[2],sampleRate:e[3]}}),g=new To({props:{audioData:e[2],width:$i,height:Di}}),b=new mA({props:{pattern:e[4],width:$i,height:Di}}),w=new gA({props:{pattern:e[4],width:$i,height:Di}}),_=new vA({props:{pattern:e[4],width:$i,height:Di}}),E=new Bo({props:{pattern:e[4],width:$i,height:Di}}),{c(){t=T("main"),n=T("h2"),n.textContent="Playground",r=O(),i=T("div"),a=T("label"),o=we(`error mode:
      `),u=T("select");for(let C=0;C<4;C+=1)R[C].c();s=O(),l=T("label"),c=we(`error severity (in seconds):
      `),f=T("input"),h=O(),d=T("div"),Ee(m.$$.fragment),p=O(),Ee(g.$$.fragment),y=O(),Ee(b.$$.fragment),v=O(),Ee(w.$$.fragment),M=O(),Ee(_.$$.fragment),x=O(),Ee(E.$$.fragment),e[0]===void 0&&ea(()=>e[5].call(u)),B(a,"class","svelte-1sot113"),B(f,"type","number"),B(f,"min","-0.5"),B(f,"max","0.5"),B(f,"step","0.01"),B(l,"class","svelte-1sot113"),B(d,"class","stimuli svelte-1sot113")},m(C,S){te(C,t,S),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u);for(let I=0;I<4;I+=1)R[I]&&R[I].m(u,null);Ro(u,e[0],!0),P(i,s),P(i,l),P(l,c),P(l,f),rt(f,e[1]),P(t,h),P(t,d),Pe(m,d,null),P(d,p),Pe(g,d,null),P(d,y),Pe(b,d,null),P(d,v),Pe(w,d,null),P(d,M),Pe(_,d,null),P(d,x),Pe(E,d,null),$=!0,N||(A=[ft(u,"change",e[5]),ft(f,"input",e[6])],N=!0)},p(C,[S]){S&1&&Ro(u,C[0]),S&2&&Xr(f.value)!==C[1]&&rt(f,C[1]);const I={};S&4&&(I.audioData=C[2]),S&8&&(I.sampleRate=C[3]),m.$set(I);const re={};S&4&&(re.audioData=C[2]),g.$set(re);const ne={};S&16&&(ne.pattern=C[4]),b.$set(ne);const Q={};S&16&&(Q.pattern=C[4]),w.$set(Q);const q={};S&16&&(q.pattern=C[4]),_.$set(q);const U={};S&16&&(U.pattern=C[4]),E.$set(U)},i(C){$||(Z(m.$$.fragment,C),Z(g.$$.fragment,C),Z(b.$$.fragment,C),Z(w.$$.fragment,C),Z(_.$$.fragment,C),Z(E.$$.fragment,C),$=!0)},o(C){ae(m.$$.fragment,C),ae(g.$$.fragment,C),ae(b.$$.fragment,C),ae(w.$$.fragment,C),ae(_.$$.fragment,C),ae(E.$$.fragment,C),$=!1},d(C){C&&ee(t),or(R,C),Ae(m),Ae(g),Ae(b),Ae(w),Ae(_),Ae(E),N=!1,Ln(A)}}}let $i=600,Di=100,HT=120;const M0=4;function WT(e,t,n){let r="beat 5",i=0,a=Ny(HT),o=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const u=M0*a;let s=null,l,c=[];const f=async()=>{o=await Promise.all(o.map(async y=>({...y,times:y.beats.map(b=>a*(b-1)),timesOriginal:y.beats.map(b=>a*(b-1)),audioBuffer:await Jb(y.sample)})))},h=(y="single note",b=0)=>{if(b===0)return o;console.log(`Adding error ${y} ${b}`);const v=d([o]),w=v.filter(x=>x.instrument==="snare")[0],M=v.filter(x=>x.instrument==="hihat")[0],_=v.filter(x=>x.instrument==="bass")[0];return y==="single note"?w.times[1]=w.timesOriginal[1]+b:y==="single beat"?(w.times[1]=w.timesOriginal[1]+b,M.times[6]=M.timesOriginal[6]+b):y==="only snare"?(w.times[0]=w.timesOriginal[0]+b,w.times[1]=w.timesOriginal[1]+b):y==="beat 5"&&(_.times[1]=_.timesOriginal[1]+b,M.times[4]=M.timesOriginal[4]+b),v},d=y=>{console.log(`concat ${y.length} patterns`);const b=y[0].map(v=>({...v,beats:[...v.beats],times:[...v.times],timesOriginal:[...v.timesOriginal]}));for(let v=1;v<y.length;v++){const w=y[v];for(const M of w){const _=b.filter(x=>x.instrument===M.instrument)[0];_.beats=[..._.beats,...M.beats.map(x=>x+v*M0)],_.times=[..._.times,...M.times.map(x=>x+v*u)],_.timesOriginal=[..._.timesOriginal,...M.timesOriginal.map(x=>x+v*u)]}}return b},m=async(y,b)=>{if(!o[0].audioBuffer)return;const w=[h(y,b)],M=d(w);n(4,c=M.map(_=>_.times).flat().sort()),M.map(_=>_.times.map(x=>({time:x,instr:_.instrument}))).flat(1/0).sort((_,x)=>{_.time-x.time}),n(3,l=M[0].audioBuffer.sampleRate),n(2,s=Ql(M,u*w.length+.1,l)),M.map(_=>{const x=Ql([_],u*w.length+.1,l);return{instr:_.instrument,audio:x}})};Ma(async()=>{await f(),m()});function p(){r=u1(this),n(0,r)}function g(){i=Xr(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&m(r,i)},[r,i,s,l,c,p,g]}class VT extends Qe{constructor(t){super(),Ke(this,t,WT,zT,Ze,{})}}function YT(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px")},m(a,o){te(a,t,o),P(t,n),e[9](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i)},i:ve,o:ve,d(a){a&&ee(t),e[9](null)}}}function jT(e,t,n){let{title:r=void 0}=t,{final:i=void 0}=t,{width:a=600}=t,{height:o=180}=t,{data:u}=t,{x:s=(d,m)=>m}=t,{y:l=d=>d}=t,{xDomain:c=[0,70]}=t,f;Kt(()=>{console.log({final:i}),n(2,f.textContent="",f);const d=Ut({title:r,width:a,height:o,x:{domain:c},marks:[uA(u,{x:s,y:l,stroke:"#ccc"}),ys(u,{x:s,y:l,fill:"#aaa",r:2,tip:!0}),vu([0]),vu([i],{stroke:"#88888888"}),ps([i],{x:65,y:i,dy:-7,text:m=>`final: ${m.toFixed(3)}`})]});f.appendChild(d)});function h(d){ut[d?"unshift":"push"](()=>{f=d,n(2,f)})}return e.$$set=d=>{"title"in d&&n(3,r=d.title),"final"in d&&n(4,i=d.final),"width"in d&&n(0,a=d.width),"height"in d&&n(1,o=d.height),"data"in d&&n(5,u=d.data),"x"in d&&n(6,s=d.x),"y"in d&&n(7,l=d.y),"xDomain"in d&&n(8,c=d.xDomain)},[a,o,f,r,i,u,s,l,c,h]}class XT extends Qe{constructor(t){super(),Ke(this,t,jT,YT,Ze,{title:3,final:4,width:0,height:1,data:5,x:6,y:7,xDomain:8})}}var Xy={exports:{}};(function(e,t){(function(n,r){r()})(Ei,function(){function n(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,c,f){var h=new XMLHttpRequest;h.open("GET",l),h.responseType="blob",h.onload=function(){s(h.response,c,f)},h.onerror=function(){console.error("could not download file")},h.send()}function i(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ei=="object"&&Ei.global===Ei?Ei:void 0,u=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(l,c,f){var h=o.URL||o.webkitURL,d=document.createElement("a");c=c||l.name||"download",d.download=c,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?a(d):i(d.href)?r(l,c,f):a(d,d.target="_blank")):(d.href=h.createObjectURL(l),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,f){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,f),c);else if(i(l))r(l,c,f);else{var h=document.createElement("a");h.href=l,h.target="_blank",setTimeout(function(){a(h)})}}:function(l,c,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof l=="string")return r(l,c,f);var d=l.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||u)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=p?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},g.readAsDataURL(l)}else{var y=o.URL||o.webkitURL,b=y.createObjectURL(l);h?h.location=b:location.href=b,h=null,setTimeout(function(){y.revokeObjectURL(b)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s})})(Xy);var ZT=Xy.exports;const x0=Qb(ZT);function KT(e){let t,n,r;return{c(){t=T("div"),B(t,"width",n=e[0]+"px"),B(t,"height",r=e[1]+"px")},m(i,a){te(i,t,a),e[6](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&B(t,"width",n),a&2&&r!==(r=i[1]+"px")&&B(t,"height",r)},i:ve,o:ve,d(i){i&&ee(t),e[6](null)}}}function QT(e,t,n){let{data:r}=t,{domain:i}=t,{title:a=""}=t,{width:o=800}=t,{height:u=100}=t,s;Kt(()=>{const c=Ut({width:o,height:u,marginLeft:70,marginRight:10,x:{label:a,domain:i},y:{axis:!1,type:"band"},marks:[Ff(r,{x:f=>f}),ps(r,{x:f=>f,dx:7,y:(f,h)=>h,text:(f,h)=>`P${h+1}`})]});n(2,s.textContent="",s),s.appendChild(c)});function l(c){ut[c?"unshift":"push"](()=>{s=c,n(2,s)})}return e.$$set=c=>{"data"in c&&n(3,r=c.data),"domain"in c&&n(4,i=c.domain),"title"in c&&n(5,a=c.title),"width"in c&&n(0,o=c.width),"height"in c&&n(1,u=c.height)},[o,u,s,r,i,a,l]}class JT extends Qe{constructor(t){super(),Ke(this,t,QT,KT,Ze,{data:3,domain:4,title:5,width:0,height:1})}}function ek(e){let t,n,r;return{c(){t=T("div"),B(t,"width",n=e[0]+"px"),B(t,"height",r=e[1]+"px")},m(i,a){te(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&B(t,"width",n),a&2&&r!==(r=i[1]+"px")&&B(t,"height",r)},i:ve,o:ve,d(i){i&&ee(t),e[5](null)}}}function tk(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;Kt(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.finals)})),c=Ut({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[ys(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Nf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Af([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Fu(l),m=1.96*(ku(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){ut[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class nk extends Qe{constructor(t){super(),Ke(this,t,tk,ek,Ze,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function rk(e){let t,n,r;return{c(){t=T("div"),B(t,"width",n=e[0]+"px"),B(t,"height",r=e[1]+"px")},m(i,a){te(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&B(t,"width",n),a&2&&r!==(r=i[1]+"px")&&B(t,"height",r)},i:ve,o:ve,d(i){i&&ee(t),e[5](null)}}}function ik(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;Kt(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.trialCounts)})),c=Ut({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[ys(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Nf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Af([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Fu(l),m=1.96*(ku(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){ut[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class ak extends Qe{constructor(t){super(),Ke(this,t,ik,rk,Ze,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function P0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function ok(e,t,n,r,i,a){const o=new Float64Array(a),u=(a-1)/(i-r);for(let s=0;s<e.length;++s){const l=e[s],c=t(l,s,e),f=n(l,s,e);if(!(Number.isFinite(c)&&Number.isFinite(f)))continue;const h=(c-r)*u,d=Math.floor(h),m=d+1;0<=d&&m<a?(o[d]+=(m-h)*f,o[m]+=(h-d)*f):d===-1?o[m]+=(h-d)*f:m===a&&(o[d]+=(m-h)*f)}return o}function A0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);uk(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,u=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:u}}function uk(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),u=.6318/n,s=1.997/n,l=Float64Array.of(-a*Math.cos(u),a*Math.sin(u),-a*Math.cos(-u),a*Math.sin(-u),-o*Math.cos(s),o*Math.sin(s),-o*Math.cos(-s),o*Math.sin(-s)),c=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(f[m]=l[m]*f[m-2]-l[m+1]*f[m-1],f[m+1]=l[m]*f[m-1]+l[m+1]*f[m-2],d=m-2;d>0;d-=2)f[d]+=l[m]*f[d-2]-l[m+1]*f[d-1],f[d+1]+=l[m]*f[d-1]+l[m+1]*f[d-2];for(d=0;d<=m;d+=2)f[d]+=i[m]*h[d]-i[m+1]*h[d+1],f[d+1]+=i[m]*h[d+1]+i[m+1]*h[d];for(h[m+2]=l[m]*h[m]-l[m+1]*h[m+1],h[m+3]=l[m]*h[m+1]+l[m+1]*h[m],d=m;d>0;d-=2)h[d]+=l[m]*h[d-2]-l[m+1]*h[d-1],h[d+1]+=l[m]*h[d-1]+l[m+1]*h[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=f[d]/c,e[m+1]=h[d+2]}function sk(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),u=i,s=lk){const l=r*2,c=r*3,f=r*4,h=r*n;let d,m;for(s(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=f;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-l]+e.b_causal[3]*t[d-c]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(s(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=h-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+l]+e.b_anticausal[3]*t[d+c]+e.b_anticausal[4]*t[d+f]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)u[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)u[d]=Math.max(0,i[m]+a[n-m-1]);return u}function lk(e,t,n,r,i,a,o,u,s,l){const c=Math.abs(r)*n,f=r<0?c+r:0;let h,d,m;for(d=0;d<u;++d)for(l[d]=d<=a?i[d]:0,m=1;m<=u&&m<=d;++m)l[d]-=o[m]*l[d-m];for(m=0;m<u;++m)for(e[m]=0,d=1;d<=m;++d)h=f+r*d,h>=0&&h<c&&(e[m]+=l[m-d]*t[h]);const p=t[f];if(p>0)for(m=0;m<u;++m)e[m]+=l[m]*p}function ck(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const u=t(e[o],o,e);u!=null&&(i===void 0?u>=u&&(i=a=u):(u<i&&(i=u),u>a&&(a=u)))}return[i-n,a+n]}function fk(e,t){const n=e.map(t).filter(l=>l!=null&&l>=l);n.sort((l,c)=>l-c);const r=hk(n),i=S0(n,.25),a=S0(n,.75),o=n.length,u=(a-i)/1.34;return 1.06*(Math.min(r,u)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function hk(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const u=e[o];r=u-i,i+=r/++n,a+=r*(u-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function S0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function dk(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=P0(t.x,y=>y),o=P0(t.weight,()=>1/e.length);let u=t.bandwidth??n*fk(e,a);const[s,l]=t.extent??ck(e,a,r*u),c=ok(e,a,o,s,l,i),f=(l-s)/(i-1),h=c.some(y=>y<0);let d=A0(u/f,h),m;function*p(y="x",b="y"){const v=g.grid(),w=1/f;for(let M=0;M<i;++M)yield{[y]:s+M*f,[b]:v[M]*w}}const g={[Symbol.iterator]:p,points:p,grid:()=>m||(m=sk(d,c,i)),extent:()=>[s,l],bandwidth(y){return arguments.length?(y!==u&&(u=y,m=null,d=A0(u/f,h)),g):u}};return g}function mk(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px")},m(a,o){te(a,t,o),P(t,n),e[10](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i)},i:ve,o:ve,d(a){a&&ee(t),e[10](null)}}}function pk(e,t,n){let r,{values:i}=t,{title:a=""}=t,{xLabel:o="some value"}=t,{xDomain:u=void 0}=t,{width:s=1e3}=t,{height:l=100}=t,{bandwidth:c=.25}=t,{bins:f=256}=t,{pad:h=4}=t,d;Kt(()=>{const p=[...r.bandwidth(c)];n(2,d.textContent="",d);const g=Ut({width:s,height:l,title:a,style:{background:"none"},grid:!0,x:{label:o,domain:u},y:{label:"density",type:"linear"},marks:[YP(p,{x:"x",y:"y",fill:"#ccc"}),Ff(i,{x:y=>y,strokeWidth:.5}),vu([0])]});d.appendChild(g)});function m(p){ut[p?"unshift":"push"](()=>{d=p,n(2,d)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,a=p.title),"xLabel"in p&&n(5,o=p.xLabel),"xDomain"in p&&n(6,u=p.xDomain),"width"in p&&n(0,s=p.width),"height"in p&&n(1,l=p.height),"bandwidth"in p&&n(7,c=p.bandwidth),"bins"in p&&n(8,f=p.bins),"pad"in p&&n(9,h=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=dk(i,{bandwidth:c,pad:h,bins:f}))},[s,l,d,i,a,o,u,c,f,h,m]}class bk extends Qe{constructor(t){super(),Ke(this,t,pk,mk,Ze,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function gk(e){let t,n,r,i;return{c(){t=T("main"),n=T("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px")},m(a,o){te(a,t,o),P(t,n),e[13](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i)},i:ve,o:ve,d(a){a&&ee(t),e[13](null)}}}function yk(e,t,n){let{title:r=""}=t,{data:i}=t,{x:a="x"}=t,{y:o="y"}=t,{tipTitle:u=null}=t,{xLabel:s=null}=t,{yLabel:l=null}=t,{xDomain:c=void 0}=t,{yDomain:f=void 0}=t,{grid:h=!1}=t,{width:d=300}=t,{height:m=300}=t,p;Kt(()=>{console.log(i,a,o),n(2,p.textContent="",p);const y=Ut({width:d,height:m,title:r,grid:h,style:{background:"none"},x:{label:s||(typeof a=="string"?a:"x"),domain:c},y:{label:l||(typeof o=="string"?o:"y"),domain:f},marks:[ys(i,{x:a,y:o}),R2(i,jg({x:a,y:o,title:u})),Nf({length:1},{x1:c[0],x2:c[1],y1:f[0],y2:f[1],stroke:"#ccc"})]});p.appendChild(y)});function g(y){ut[y?"unshift":"push"](()=>{p=y,n(2,p)})}return e.$$set=y=>{"title"in y&&n(3,r=y.title),"data"in y&&n(4,i=y.data),"x"in y&&n(5,a=y.x),"y"in y&&n(6,o=y.y),"tipTitle"in y&&n(7,u=y.tipTitle),"xLabel"in y&&n(8,s=y.xLabel),"yLabel"in y&&n(9,l=y.yLabel),"xDomain"in y&&n(10,c=y.xDomain),"yDomain"in y&&n(11,f=y.yDomain),"grid"in y&&n(12,h=y.grid),"width"in y&&n(0,d=y.width),"height"in y&&n(1,m=y.height)},[d,m,p,r,i,a,o,u,s,l,c,f,h,g]}class E0 extends Qe{constructor(t){super(),Ke(this,t,yk,gk,Ze,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function C0(e,t,n){const r=e.slice();return r[12]=t[n],r}function T0(e,t,n){const r=e.slice();return r[15]=t[n],r}function k0(e,t,n){const r=e.slice();return r[18]=t[n],r}function $0(e,t,n){const r=e.slice();return r[21]=t[n],r}function D0(e,t,n){const r=e.slice();return r[24]=t[n],r}function N0(e,t,n){const r=e.slice();return r[27]=t[n][0],r[28]=t[n][1],r}function F0(e){let t,n=e[27]+"",r,i,a=e[28].length+"",o,u;return{c(){t=T("p"),r=we(n),i=we(": "),o=we(a),u=we(" times")},m(s,l){te(s,t,l),P(t,r),P(t,i),P(t,o),P(t,u)},p(s,l){l&1&&n!==(n=s[27]+"")&&yt(r,n),l&1&&a!==(a=s[28].length+"")&&yt(o,a)},d(s){s&&ee(t)}}}function B0(e){let t,n;return t=new bk({props:{title:`Density of final values for ${e[24][0]}`,values:e[24][1].map(z0),xLabel:"final values",xDomain:[-.01,.2],bandwidth:_k}}),{c(){Ee(t.$$.fragment)},m(r,i){Pe(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=`Density of final values for ${r[24][0]}`),i&2&&(a.values=r[24][1].map(z0)),t.$set(a)},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Ae(t,r)}}}function L0(e){let t,n=e[21].encoding+"",r,i,a,o;return a=new JT({props:{data:e[21].finals,title:e[21].encoding,domain:[0,e[2]]}}),{c(){t=T("b"),r=we(n),i=O(),Ee(a.$$.fragment)},m(u,s){te(u,t,s),P(t,r),te(u,i,s),Pe(a,u,s),o=!0},p(u,s){(!o||s&8)&&n!==(n=u[21].encoding+"")&&yt(r,n);const l={};s&8&&(l.data=u[21].finals),s&8&&(l.title=u[21].encoding),s&4&&(l.domain=[0,u[2]]),a.$set(l)},i(u){o||(Z(a.$$.fragment,u),o=!0)},o(u){ae(a.$$.fragment,u),o=!1},d(u){u&&(ee(t),ee(i)),Ae(a,u)}}}function I0(e){let t,n=e[18]+"",r;return{c(){t=T("p"),r=we(n)},m(i,a){te(i,t,a),P(t,r)},p(i,a){a&1&&n!==(n=i[18]+"")&&yt(r,n)},d(i){i&&ee(t)}}}function R0(e){let t,n,r,i=e[15].demographics.internalPID+"",a,o,u=e[15].demographics.partID+"",s,l,c,f=Mt(e[15].demographics.partFeedback.split(`
`)),h=[];for(let d=0;d<f.length;d+=1)h[d]=I0(k0(e,f,d));return{c(){t=T("div"),n=T("b"),r=we("P"),a=we(i),o=O(),s=we(u),l=we(`:
        `);for(let d=0;d<h.length;d+=1)h[d].c();c=O(),Oe(t,"text-align","left")},m(d,m){te(d,t,m),P(t,n),P(n,r),P(n,a),P(t,o),P(t,s),P(t,l);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(t,null);P(t,c)},p(d,m){if(m&1&&i!==(i=d[15].demographics.internalPID+"")&&yt(a,i),m&1&&u!==(u=d[15].demographics.partID+"")&&yt(s,u),m&1){f=Mt(d[15].demographics.partFeedback.split(`
`));let p;for(p=0;p<f.length;p+=1){const g=k0(d,f,p);h[p]?h[p].p(g,m):(h[p]=I0(g),h[p].c(),h[p].m(t,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=f.length}},d(d){d&&ee(t),or(h,d)}}}function O0(e){let t,n;return t=new XT({props:{title:"P"+e[12].internalPID+" "+e[12].encoding+" "+e[12].data.length+" trials",final:e[12].final,width:vk,height:120,data:e[12].data,x:xk,y:e[7],xDomain:[0,165]}}),{c(){Ee(t.$$.fragment)},m(r,i){Pe(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title="P"+r[12].internalPID+" "+r[12].encoding+" "+r[12].data.length+" trials"),i&2&&(a.final=r[12].final),i&2&&(a.data=r[12].data),t.$set(a)},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Ae(t,r)}}}function wk(e){let t,n,r,i,a,o,u,s,l,c,f,h=e[0].length+"",d,m,p=e[1].length+"",g,y,b=e[4].length+"",v,w,M,_,x,E,$,N,A,L,R,C,S,I,re,ne,Q,q,U,z,W,oe,de,ie,Y,V,F,H,j,D,be,J,le,_e,Fe,tt=Mt(lr(e[0],q0).sort(G0)),$e=[];for(let k=0;k<tt.length;k+=1)$e[k]=F0(N0(e,tt,k));let Ct=Mt(lr(e[1],U0)),Se=[];for(let k=0;k<Ct.length;k+=1)Se[k]=B0(D0(e,Ct,k));const $r=k=>ae(Se[k],1,1,()=>{Se[k]=null});L=new E0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),C=new E0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),Q=new nk({props:{stimuli:e[3]}}),oe=new ak({props:{stimuli:e[3]}});let zt=Mt(e[3]),Te=[];for(let k=0;k<zt.length;k+=1)Te[k]=L0($0(e,zt,k));const vi=k=>ae(Te[k],1,1,()=>{Te[k]=null});let tn=Mt(e[0].filter(H0)),Ge=[];for(let k=0;k<tn.length;k+=1)Ge[k]=R0(T0(e,tn,k));let nt=Mt(e[1]),X=[];for(let k=0;k<nt.length;k+=1)X[k]=O0(C0(e,nt,k));const ue=k=>ae(X[k],1,1,()=>{X[k]=null});return{c(){t=T("main"),n=T("h2"),n.textContent="Analysis",r=O(),i=T("div"),a=T("label"),o=we(`Results JSONs and Prolific demographics CSV
      `),u=T("input"),s=O(),l=T("button"),l.textContent="export JSON",c=O(),f=T("div"),d=we(h),m=we(` participants completed -
    `),g=we(p),y=we(` tests -
    `),v=we(b),w=we(" filtered tests"),M=O(),_=T("div"),x=T("h3"),x.textContent="Encoding order",E=O();for(let k=0;k<$e.length;k+=1)$e[k].c();$=O(),N=T("div");for(let k=0;k<Se.length;k+=1)Se[k].c();A=O(),Ee(L.$$.fragment),R=O(),Ee(C.$$.fragment),S=O(),I=T("div"),re=T("h3"),re.textContent="Mean and CI of Final Values",ne=O(),Ee(Q.$$.fragment),q=O(),U=T("div"),z=T("h3"),z.textContent="Mean and CI of Trial Counts",W=O(),Ee(oe.$$.fragment),de=O(),ie=T("div"),Y=T("h3"),Y.textContent="Final Values for Each Stimulus and All Participants",V=O();for(let k=0;k<Te.length;k+=1)Te[k].c();F=O(),H=T("div"),j=T("h3"),j.textContent="Feedback",D=O();for(let k=0;k<Ge.length;k+=1)Ge[k].c();be=O(),J=T("div");for(let k=0;k<X.length;k+=1)X[k].c();B(u,"type","file"),B(u,"accept",".json,.csv"),u.multiple=!0},m(k,K){te(k,t,K),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u),P(i,s),P(i,l),P(t,c),P(t,f),P(f,d),P(f,m),P(f,g),P(f,y),P(f,v),P(f,w),P(t,M),P(t,_),P(_,x),P(_,E);for(let ce=0;ce<$e.length;ce+=1)$e[ce]&&$e[ce].m(_,null);P(t,$),P(t,N);for(let ce=0;ce<Se.length;ce+=1)Se[ce]&&Se[ce].m(N,null);P(t,A),Pe(L,t,null),P(t,R),Pe(C,t,null),P(t,S),P(t,I),P(I,re),P(I,ne),Pe(Q,I,null),P(t,q),P(t,U),P(U,z),P(U,W),Pe(oe,U,null),P(t,de),P(t,ie),P(ie,Y),P(ie,V);for(let ce=0;ce<Te.length;ce+=1)Te[ce]&&Te[ce].m(ie,null);P(t,F),P(t,H),P(H,j),P(H,D);for(let ce=0;ce<Ge.length;ce+=1)Ge[ce]&&Ge[ce].m(H,null);P(t,be),P(t,J);for(let ce=0;ce<X.length;ce+=1)X[ce]&&X[ce].m(J,null);le=!0,_e||(Fe=[ft(u,"input",e[5]),ft(l,"click",e[6])],_e=!0)},p(k,[K]){if((!le||K&1)&&h!==(h=k[0].length+"")&&yt(d,h),(!le||K&2)&&p!==(p=k[1].length+"")&&yt(g,p),(!le||K&16)&&b!==(b=k[4].length+"")&&yt(v,b),K&1){tt=Mt(lr(k[0],q0).sort(G0));let G;for(G=0;G<tt.length;G+=1){const We=N0(k,tt,G);$e[G]?$e[G].p(We,K):($e[G]=F0(We),$e[G].c(),$e[G].m(_,null))}for(;G<$e.length;G+=1)$e[G].d(1);$e.length=tt.length}if(K&2){Ct=Mt(lr(k[1],U0));let G;for(G=0;G<Ct.length;G+=1){const We=D0(k,Ct,G);Se[G]?(Se[G].p(We,K),Z(Se[G],1)):(Se[G]=B0(We),Se[G].c(),Z(Se[G],1),Se[G].m(N,null))}for(ln(),G=Ct.length;G<Se.length;G+=1)$r(G);cn()}const ce={};K&1&&(ce.data=k[0]),L.$set(ce);const xe={};K&1&&(xe.data=k[0]),C.$set(xe);const Re={};K&8&&(Re.stimuli=k[3]),Q.$set(Re);const Dr={};if(K&8&&(Dr.stimuli=k[3]),oe.$set(Dr),K&12){zt=Mt(k[3]);let G;for(G=0;G<zt.length;G+=1){const We=$0(k,zt,G);Te[G]?(Te[G].p(We,K),Z(Te[G],1)):(Te[G]=L0(We),Te[G].c(),Z(Te[G],1),Te[G].m(ie,null))}for(ln(),G=zt.length;G<Te.length;G+=1)vi(G);cn()}if(K&1){tn=Mt(k[0].filter(H0));let G;for(G=0;G<tn.length;G+=1){const We=T0(k,tn,G);Ge[G]?Ge[G].p(We,K):(Ge[G]=R0(We),Ge[G].c(),Ge[G].m(H,null))}for(;G<Ge.length;G+=1)Ge[G].d(1);Ge.length=tn.length}if(K&2){nt=Mt(k[1]);let G;for(G=0;G<nt.length;G+=1){const We=C0(k,nt,G);X[G]?(X[G].p(We,K),Z(X[G],1)):(X[G]=O0(We),X[G].c(),Z(X[G],1),X[G].m(J,null))}for(ln(),G=nt.length;G<X.length;G+=1)ue(G);cn()}},i(k){if(!le){for(let K=0;K<Ct.length;K+=1)Z(Se[K]);Z(L.$$.fragment,k),Z(C.$$.fragment,k),Z(Q.$$.fragment,k),Z(oe.$$.fragment,k);for(let K=0;K<zt.length;K+=1)Z(Te[K]);for(let K=0;K<nt.length;K+=1)Z(X[K]);le=!0}},o(k){Se=Se.filter(Boolean);for(let K=0;K<Se.length;K+=1)ae(Se[K]);ae(L.$$.fragment,k),ae(C.$$.fragment,k),ae(Q.$$.fragment,k),ae(oe.$$.fragment,k),Te=Te.filter(Boolean);for(let K=0;K<Te.length;K+=1)ae(Te[K]);X=X.filter(Boolean);for(let K=0;K<X.length;K+=1)ae(X[K]);le=!1},d(k){k&&ee(t),or($e,k),or(Se,k),Ae(L),Ae(C),Ae(Q),Ae(oe),or(Te,k),or(Ge,k),or(X,k),_e=!1,Ln(Fe)}}}const vk=1200;let _k=.001,Mk=20;const q0=e=>e.encodingOrder,G0=(e,t)=>e[1].lenght-t[1].length,U0=e=>e.testType,z0=e=>e.final,H0=e=>e.demographics.partFeedback.trim().length>0,xk=(e,t)=>t;function Pk(e,t,n){let r,i,a,o,u=[],s=null;const l=async p=>{const g=[];for(const b of p.target.files)if(b.name.endsWith(".csv")){const v=await b.text();s=P5(v),console.log("p demo",s)}else{const v=await b.text();g.push(JSON.parse(v))}const y=lr(g,b=>b.demographics.partID);console.log(`${y.length} participants`,y),n(0,u=g.filter(b=>b.studyStep==="feedback").map((b,v)=>({...b,demographics:{...b.demographics,internalPID:v+1},prolificDemogr:s.filter(w=>w["Participant id"]===b.demographics.partID)[0],finalAudio:b.tests.filter(w=>w.encoding.startsWith("audio"))[0].final,finalColor:b.tests.filter(w=>w.encoding.startsWith("color"))[0].final,finalWaveform:b.tests.filter(w=>w.encoding.startsWith("waveform"))[0].final,encodingOrder:b.tests.map(w=>w.encoding).join(", ")})).filter(b=>b.prolificDemogr!==void 0)),console.log("participants",u)},c=p=>{if(p.lenght===0)return[];const g=(b,v=5)=>{const w=Math.floor(b/v)*v;return`${w}-${w+v-1}`},y=[];for(const b of p)for(const[v,w]of b.tests.entries()){let M=w.encoding;y.push({...b.demographics,partAge:b.demographics.partAge?b.demographics.partAge:g(b.prolificDemogr.Age,10),partSex:b.demographics.partGender?b.demographics.partGender:b.prolificDemogr.Sex,countryBirth:b.prolificDemogr["Country of birth"],countryResidence:b.prolificDemogr["Country of residence"],prolificApprovals:b.prolificDemogr["Total approvals"],...w,date:b.date,testType:M,testOrder:v})}return console.log("tests",y),y},f=(p,g)=>p.filter(y=>y.final<g),h=p=>p.length===0?[]:lr(p,y=>y.testType).map(([y,b])=>{const v=b.map(w=>w.final);return{encoding:y,testType:y,finals:v,finalMean:Fu(v),finalVar:xc(v),trialCounts:b.map(w=>w.trialCount)}}),d=()=>{const p=JSON.stringify(u,void 0,2),g=new Blob([p],{type:"text/plain;charset=utf-8"});x0(g,"participants.json");const y=JSON.stringify(r,void 0,2),b=new Blob([y],{type:"text/plain;charset=utf-8"});x0(b,"tests.json")},m=p=>Math.abs(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=c(u)),e.$$.dirty&2&&n(4,i=f(r,Mk)),e.$$.dirty&2&&n(3,a=h(r)),e.$$.dirty&2&&n(2,o=It(r.map(p=>Math.abs(p.final)))),e.$$.dirty&2&&console.log("tests by enc",lr(r,p=>p.testType))},[u,r,o,a,i,l,d,m]}class Ak extends Qe{constructor(t){super(),Ke(this,t,Pk,wk,Ze,{})}}function Ne(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}Ne.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};Ne.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};Ne.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};Ne.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=Zy(0,e.length-1);return this.activate(e[t]),this};Ne.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=Zy(0,e.length-1);this.activate(e[t])};Ne.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};Ne.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};Ne.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};Ne.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Ne.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};Ne.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};Ne.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};Ne.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};Ne.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};Ne.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};Ne.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};Ne.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};Ne.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};Ne.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};Ne.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};Ne.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const zf=function(){};zf.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};zf.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};Ne.prototype.checkErr=new zf;function Zy(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Lo(e,t){return new URLSearchParams(e.location.search).get(t)}function Sk(e){let t,n,r,i,a,o,u;return{c(){t=T("main"),n=T("audio"),r=O(),i=T("button"),a=we(e[0]),n.controls=!1},m(s,l){te(s,t,l),P(t,n),e[5](n),P(t,r),P(t,i),P(i,a),o||(u=ft(i,"click",e[2]),o=!0)},p(s,[l]){l&1&&yt(a,s[0])},i:ve,o:ve,d(s){s&&ee(t),e[5](null),o=!1,u()}}}function Ek(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:a="play audio"}=t,o=null,u;const s=(f,h)=>{h&&u&&(o=t9(h,f),Kc(o,h.sampleRate,u))};Ma(()=>s(r,i));const l=async()=>{u&&(n(1,u.currentTime=0,u),u.play())};function c(f){ut[f?"unshift":"push"](()=>{u=f,n(1,u)})}return e.$$set=f=>{"pattern"in f&&n(3,r=f.pattern),"cachedAudio"in f&&n(4,i=f.cachedAudio),"label"in f&&n(0,a=f.label)},[a,u,l,r,i,c]}class Io extends Qe{constructor(t){super(),Ke(this,t,Ek,Sk,Ze,{pattern:3,cachedAudio:4,label:0})}}function Ck(e){let t,n,r,i,a,o;return{c(){t=T("main"),n=T("audio"),r=O(),i=T("button"),i.textContent="play audio",n.controls=!1},m(u,s){te(u,t,s),P(t,n),e[4](n),P(t,r),P(t,i),a||(o=ft(i,"click",e[1]),a=!0)},p:ve,i:ve,o:ve,d(u){u&&ee(t),e[4](null),a=!1,o()}}}function Tk(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,a;const o=l=>{l&&a&&Kc(l,i,a)};Ma(()=>o(r));const u=()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(l){ut[l?"unshift":"push"](()=>{a=l,n(0,a)})}return e.$$set=l=>{"audioData"in l&&n(2,r=l.audioData),"sampleRate"in l&&n(3,i=l.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&o(r)},[a,u,r,i,s]}class W0 extends Qe{constructor(t){super(),Ke(this,t,Tk,Ck,Ze,{audioData:2,sampleRate:3})}}function V0(e){let t;return{c(){t=T("div"),t.innerHTML=`<p class="svelte-9uo0u8">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-9uo0u8">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-9uo0u8">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-9uo0u8">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){te(n,t,r)},d(n){n&&ee(t)}}}function Y0(e){let t,n,r,i,a,o,u,s,l;return i=new Io({props:{pattern:[.1,.6,1.1],cachedAudio:e[16][2].audioBuffer}}),{c(){t=T("div"),n=T("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=O(),Ee(i.$$.fragment),a=O(),o=T("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",u=O(),s=T("a"),s.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",B(n,"class","svelte-9uo0u8"),B(o,"class","svelte-9uo0u8"),B(s,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(c,f){te(c,t,f),P(t,n),P(t,r),Pe(i,t,null),P(t,a),P(t,o),P(t,u),P(t,s),l=!0},p(c,f){const h={};f[0]&65536&&(h.cachedAudio=c[16][2].audioBuffer),i.$set(h)},i(c){l||(Z(i.$$.fragment,c),l=!0)},o(c){ae(i.$$.fragment,c),l=!1},d(c){c&&ee(t),Ae(i)}}}function j0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b;return{c(){t=T("div"),n=T("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=O(),i=T("div"),a=T("button"),a.textContent="+",o=O(),u=T("button"),u.textContent="-",s=O(),l=Wf("svg"),c=Wf("rect"),p=O(),g=T("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,B(n,"class","svelte-9uo0u8"),B(c,"width",f=e[0]*.52),B(c,"height",h=e[24]*2),B(c,"fill","#ccc"),B(c,"rx","8"),B(l,"width",d=e[0]*.52+"px"),B(l,"height",m=e[24]*2+"px"),B(g,"class","svelte-9uo0u8")},m(v,w){te(v,t,w),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(t,s),P(t,l),P(l,c),P(t,p),P(t,g),y||(b=[ft(a,"click",e[26]),ft(u,"click",e[27])],y=!0)},p(v,w){w[0]&1&&f!==(f=v[0]*.52)&&B(c,"width",f),w[0]&16777216&&h!==(h=v[24]*2)&&B(c,"height",h),w[0]&1&&d!==(d=v[0]*.52+"px")&&B(l,"width",d),w[0]&16777216&&m!==(m=v[24]*2+"px")&&B(l,"height",m)},d(v){v&&ee(t),y=!1,Ln(b)}}}function X0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b,v;return h=new Io({props:{pattern:[.1],cachedAudio:e[16][0].audioBuffer,label:"hi-hat"}}),m=new Io({props:{pattern:[.1],cachedAudio:e[16][1].audioBuffer,label:"snare drum"}}),g=new Io({props:{pattern:[.1],cachedAudio:e[16][2].audioBuffer,label:"bass drum"}}),{c(){t=T("div"),n=T("div"),n.innerHTML=`<p class="svelte-9uo0u8">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-9uo0u8">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-9uo0u8">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played together will still be played at
          the same time, but this time will be either too early or too late.
          Notes after the mistake will also be affected and be early/late, such
          that only one time interval is shorter/longer than supposed.</p>`,r=we(`
      This is what the pattern looks like in sheet music:
      `),i=T("div"),a=T("img"),s=O(),l=T("div"),c=T("span"),c.textContent="Click to hear the different sounds:",f=O(),Ee(h.$$.fragment),d=O(),Ee(m.$$.fragment),p=O(),Ee(g.$$.fragment),y=we(`
      This is what the full, correctly played pattern sounds like:
      `),b=T("div"),b.innerHTML='<audio src="drum-pattern-correct-once.wav" controls=""></audio>',B(a,"width",o=e[0]+"px"),e3(a.src,u="drum-pattern-labels3.png")||B(a,"src",u),B(a,"alt","drum pattern as sheet music"),Oe(l,"display","grid"),Oe(l,"grid-template-columns","repeat(4,max-content)"),Oe(l,"gap","10px"),Oe(l,"align-items","center")},m(w,M){te(w,t,M),P(t,n),P(t,r),P(t,i),P(i,a),P(t,s),P(t,l),P(l,c),P(l,f),Pe(h,l,null),P(l,d),Pe(m,l,null),P(l,p),Pe(g,l,null),P(t,y),P(t,b),v=!0},p(w,M){(!v||M[0]&1&&o!==(o=w[0]+"px"))&&B(a,"width",o);const _={};M[0]&65536&&(_.cachedAudio=w[16][0].audioBuffer),h.$set(_);const x={};M[0]&65536&&(x.cachedAudio=w[16][1].audioBuffer),m.$set(x);const E={};M[0]&65536&&(E.cachedAudio=w[16][2].audioBuffer),g.$set(E)},i(w){v||(Z(h.$$.fragment,w),Z(m.$$.fragment,w),Z(g.$$.fragment,w),v=!0)},o(w){ae(h.$$.fragment,w),ae(m.$$.fragment,w),ae(g.$$.fragment,w),v=!1},d(w){w&&ee(t),Ae(h),Ae(m),Ae(g)}}}function Z0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b,v,w,M,_,x,E,$,N,A,L,R;return{c(){t=T("div"),n=T("p"),n.textContent="Please answer the following questions about yourself:",r=O(),i=T("label"),a=T("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=O(),u=T("select"),s=T("option"),s.textContent="none",l=T("option"),l.textContent="high school",c=T("option"),c.textContent="bachelor",f=T("option"),f.textContent="master",h=T("option"),h.textContent="phd",d=O(),m=T("label"),p=T("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=O(),y=T("input"),b=O(),v=T("label"),w=T("span"),w.textContent="For how many years do you roughly play it/them?",M=O(),_=T("input"),x=O(),E=T("label"),$=T("span"),$.textContent=`How many years of experience do you have with information
          visualization?`,N=O(),A=T("input"),B(n,"class","svelte-9uo0u8"),s.__value="none",rt(s,s.__value),l.__value="highs",rt(l,l.__value),c.__value="bachelor",rt(c,c.__value),f.__value="master",rt(f,f.__value),h.__value="phd",rt(h,h.__value),e[6]===void 0&&ea(()=>e[28].call(u)),B(i,"class","svelte-9uo0u8"),B(y,"type","text"),B(y,"placeholder","free text"),B(m,"class","svelte-9uo0u8"),B(_,"type","number"),B(_,"min","0"),B(_,"step","1"),B(v,"class","svelte-9uo0u8"),B(A,"type","number"),B(A,"min","0"),B(A,"step","1"),B(E,"class","svelte-9uo0u8"),B(t,"class","demo-form svelte-9uo0u8")},m(C,S){te(C,t,S),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(u,s),P(u,l),P(u,c),P(u,f),P(u,h),Ro(u,e[6],!0),P(t,d),P(t,m),P(m,p),P(m,g),P(m,y),rt(y,e[7]),P(t,b),P(t,v),P(v,w),P(v,M),P(v,_),rt(_,e[8]),P(t,x),P(t,E),P(E,$),P(E,N),P(E,A),rt(A,e[9]),L||(R=[ft(u,"change",e[28]),ft(y,"input",e[29]),ft(_,"input",e[30]),ft(A,"input",e[31])],L=!0)},p(C,S){S[0]&64&&Ro(u,C[6]),S[0]&128&&y.value!==C[7]&&rt(y,C[7]),S[0]&256&&Xr(_.value)!==C[8]&&rt(_,C[8]),S[0]&512&&Xr(A.value)!==C[9]&&rt(A,C[9])},d(C){C&&ee(t),L=!1,Ln(R)}}}function K0(e){let t,n,r=(e[12]||e[4])&&Q0(e);return{c(){r&&r.c(),t=vc()},m(i,a){r&&r.m(i,a),te(i,t,a),n=!0},p(i,a){i[12]||i[4]?r?(r.p(i,a),a[0]&4112&&Z(r,1)):(r=Q0(i),r.c(),Z(r,1),r.m(t.parentNode,t)):r&&(ln(),ae(r,1,1,()=>{r=null}),cn())},i(i){n||(Z(r),n=!0)},o(i){ae(r),n=!1},d(i){i&&ee(t),r&&r.d(i)}}}function Q0(e){let t,n,r=e[3]+1+"",i,a,o=e[1].length+"",u,s,l,c,f,h,d,m,p;function g(_,x){return _[4]?$k:kk}let y=g(e),b=y(e);const v=[Nk,Dk],w=[];function M(_,x){return _[15]==="audio"?0:_[14]===!1?1:-1}return~(h=M(e))&&(d=w[h]=v[h](e)),{c(){t=T("p"),n=we("Test number "),i=we(r),a=we(" of "),u=we(o),s=O(),b.c(),l=O(),c=T("p"),c.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,f=O(),d&&d.c(),m=vc(),B(t,"class","svelte-9uo0u8"),B(c,"class","svelte-9uo0u8")},m(_,x){te(_,t,x),P(t,n),P(t,i),P(t,a),P(t,u),te(_,s,x),b.m(_,x),te(_,l,x),te(_,c,x),te(_,f,x),~h&&w[h].m(_,x),te(_,m,x),p=!0},p(_,x){(!p||x[0]&8)&&r!==(r=_[3]+1+"")&&yt(i,r),(!p||x[0]&2)&&o!==(o=_[1].length+"")&&yt(u,o),y===(y=g(_))&&b?b.p(_,x):(b.d(1),b=y(_),b&&(b.c(),b.m(l.parentNode,l)));let E=h;h=M(_),h===E?~h&&w[h].p(_,x):(d&&(ln(),ae(w[E],1,1,()=>{w[E]=null}),cn()),~h?(d=w[h],d?d.p(_,x):(d=w[h]=v[h](_),d.c()),Z(d,1),d.m(m.parentNode,m)):d=null)},i(_){p||(Z(d),p=!0)},o(_){ae(d),p=!1},d(_){_&&(ee(t),ee(s),ee(l),ee(c),ee(f),ee(m)),b.d(_),~h&&w[h].d(_)}}}function kk(e){let t,n,r=e[11]+1+"",i;return{c(){t=T("p"),n=we("Trial number "),i=we(r),B(t,"class","svelte-9uo0u8")},m(a,o){te(a,t,o),P(t,n),P(t,i)},p(a,o){o[0]&2048&&r!==(r=a[11]+1+"")&&yt(i,r)},d(a){a&&ee(t)}}}function $k(e){let t,n,r,i,a,o,u,s,l,c,f,h;return{c(){t=T("p"),n=T("b"),n.textContent="Training:",r=we(" the training will end when you got "),i=we(Ky),a=we(` correct
          in a streak.`),o=T("br"),u=we(`
          Current streak: `),s=we(e[5]),l=we("."),c=T("br"),f=O(),h=T("b"),h.innerHTML='<span id="trainingFeedback"></span>',B(t,"class","training svelte-9uo0u8")},m(d,m){te(d,t,m),P(t,n),P(t,r),P(t,i),P(t,a),P(t,o),P(t,u),P(t,s),P(t,l),P(t,c),P(t,f),P(t,h)},p(d,m){m[0]&32&&yt(s,d[5])},d(d){d&&ee(t)}}}function Dk(e){let t,n,r,i=(e[15]==="waveform"||_o)&&J0(e),a=(e[15]==="color"||_o)&&e1(e);return{c(){i&&i.c(),t=O(),a&&a.c(),n=vc()},m(o,u){i&&i.m(o,u),te(o,t,u),a&&a.m(o,u),te(o,n,u),r=!0},p(o,u){o[15]==="waveform"||_o?i?(i.p(o,u),u[0]&32768&&Z(i,1)):(i=J0(o),i.c(),Z(i,1),i.m(t.parentNode,t)):i&&(ln(),ae(i,1,1,()=>{i=null}),cn()),o[15]==="color"||_o?a?(a.p(o,u),u[0]&32768&&Z(a,1)):(a=e1(o),a.c(),Z(a,1),a.m(n.parentNode,n)):a&&(ln(),ae(a,1,1,()=>{a=null}),cn())},i(o){r||(Z(i),Z(a),r=!0)},o(o){ae(i),ae(a),r=!1},d(o){o&&(ee(t),ee(n)),i&&i.d(o),a&&a.d(o)}}}function Nk(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new W0({props:{audioData:e[18],sampleRate:e[20]}}),o=new W0({props:{audioData:e[19],sampleRate:e[20]}}),h=new ny({props:{audioData:e[17],sampleRate:e[20],currentTrialNumber:e[11]}}),{c(){t=T("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=O(),r=T("div"),Ee(i.$$.fragment),a=O(),Ee(o.$$.fragment),u=O(),s=T("div"),s.textContent="Example for early",l=O(),c=T("div"),c.textContent="Example for late",f=O(),Ee(h.$$.fragment),B(t,"class","svelte-9uo0u8"),B(s,"class","svelte-9uo0u8"),B(c,"class","svelte-9uo0u8"),B(r,"class","vis-example svelte-9uo0u8")},m(m,p){te(m,t,p),te(m,n,p),te(m,r,p),Pe(i,r,null),P(r,a),Pe(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),te(m,f,p),Pe(h,m,p),d=!0},p(m,p){const g={};p[0]&262144&&(g.audioData=m[18]),p[0]&1048576&&(g.sampleRate=m[20]),i.$set(g);const y={};p[0]&524288&&(y.audioData=m[19]),p[0]&1048576&&(y.sampleRate=m[20]),o.$set(y);const b={};p[0]&131072&&(b.audioData=m[17]),p[0]&1048576&&(b.sampleRate=m[20]),p[0]&2048&&(b.currentTrialNumber=m[11]),h.$set(b)},i(m){d||(Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!0)},o(m){ae(i.$$.fragment,m),ae(o.$$.fragment,m),ae(h.$$.fragment,m),d=!1},d(m){m&&(ee(t),ee(n),ee(r),ee(f)),Ae(i),Ae(o),Ae(h,m)}}}function J0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new To({props:{audioData:e[18],width:e[0]/2,height:e[24]/2}}),o=new To({props:{audioData:e[19],width:e[0]/2,height:e[24]/2}}),h=new To({props:{audioData:e[17],width:e[0],height:e[24]}}),{c(){t=T("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=O(),r=T("div"),Ee(i.$$.fragment),a=O(),Ee(o.$$.fragment),u=O(),s=T("div"),s.textContent="Example for early",l=O(),c=T("div"),c.textContent="Example for late",f=O(),Ee(h.$$.fragment),B(t,"class","svelte-9uo0u8"),B(s,"class","svelte-9uo0u8"),B(c,"class","svelte-9uo0u8"),B(r,"class","vis-example svelte-9uo0u8")},m(m,p){te(m,t,p),te(m,n,p),te(m,r,p),Pe(i,r,null),P(r,a),Pe(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),te(m,f,p),Pe(h,m,p),d=!0},p(m,p){const g={};p[0]&262144&&(g.audioData=m[18]),p[0]&1&&(g.width=m[0]/2),p[0]&16777216&&(g.height=m[24]/2),i.$set(g);const y={};p[0]&524288&&(y.audioData=m[19]),p[0]&1&&(y.width=m[0]/2),p[0]&16777216&&(y.height=m[24]/2),o.$set(y);const b={};p[0]&131072&&(b.audioData=m[17]),p[0]&1&&(b.width=m[0]),p[0]&16777216&&(b.height=m[24]),h.$set(b)},i(m){d||(Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!0)},o(m){ae(i.$$.fragment,m),ae(o.$$.fragment,m),ae(h.$$.fragment,m),d=!1},d(m){m&&(ee(t),ee(n),ee(r),ee(f)),Ae(i),Ae(o),Ae(h,m)}}}function e1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new Bo({props:{pattern:e[22],width:e[0]/2,height:e[24]*.7}}),o=new Bo({props:{pattern:e[23],width:e[0]/2,height:e[24]*.7}}),h=new Bo({props:{pattern:e[21],width:e[0],height:e[24]}}),{c(){t=T("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Look at the rectangle at 5, it is either
            brigher (early) or darker (late) than the others.`,n=O(),r=T("div"),Ee(i.$$.fragment),a=O(),Ee(o.$$.fragment),u=O(),s=T("div"),s.textContent="Example for early",l=O(),c=T("div"),c.textContent="Example for late",f=O(),Ee(h.$$.fragment),B(t,"class","svelte-9uo0u8"),B(s,"class","svelte-9uo0u8"),B(c,"class","svelte-9uo0u8"),B(r,"class","vis-example svelte-9uo0u8")},m(m,p){te(m,t,p),te(m,n,p),te(m,r,p),Pe(i,r,null),P(r,a),Pe(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),te(m,f,p),Pe(h,m,p),d=!0},p(m,p){const g={};p[0]&4194304&&(g.pattern=m[22]),p[0]&1&&(g.width=m[0]/2),p[0]&16777216&&(g.height=m[24]*.7),i.$set(g);const y={};p[0]&8388608&&(y.pattern=m[23]),p[0]&1&&(y.width=m[0]/2),p[0]&16777216&&(y.height=m[24]*.7),o.$set(y);const b={};p[0]&2097152&&(b.pattern=m[21]),p[0]&1&&(b.width=m[0]),p[0]&16777216&&(b.height=m[24]),h.$set(b)},i(m){d||(Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!0)},o(m){ae(i.$$.fragment,m),ae(o.$$.fragment,m),ae(h.$$.fragment,m),d=!1},d(m){m&&(ee(t),ee(n),ee(r),ee(f)),Ae(i),Ae(o),Ae(h,m)}}}function t1(e){let t,n,r,i,a,o,u;return{c(){t=T("div"),n=we(`Almost done!
      `),r=T("p"),r.textContent="Do you have any final feedback/comments?",i=O(),a=T("textarea"),B(r,"class","svelte-9uo0u8")},m(s,l){te(s,t,l),P(t,n),P(t,r),P(t,i),P(t,a),rt(a,e[10]),o||(u=ft(a,"input",e[32]),o=!0)},p(s,l){l[0]&1024&&rt(a,s[10])},d(s){s&&ee(t),o=!1,u()}}}function n1(e){let t,n,r;return{c(){t=T("div"),t.textContent="Thanks for participating!",n=O(),r=T("a"),r.textContent="click here to get your compensation",B(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){te(i,t,a),te(i,n,a),te(i,r,a)},d(i){i&&(ee(t),ee(n),ee(r))}}}function r1(e){let t,n,r;return{c(){t=T("button"),t.textContent="next step",B(t,"class","next-btn svelte-9uo0u8")},m(i,a){te(i,t,a),n||(r=ft(t,"click",e[25]),n=!0)},p:ve,d(i){i&&ee(t),n=!1,r()}}}function Fk(e){let t,n,r,i,a,o,u,s,l,c,f=e[2]==="consent"&&V0(),h=e[2]==="start1"&&Y0(e),d=e[2]==="start2"&&j0(e),m=e[2]==="start3"&&X0(e),p=e[2]==="demo"&&Z0(e),g=e[2]==="tests"&&K0(e),y=e[2]==="feedback"&&t1(e),b=e[2]==="done"&&n1(),v=!e[13]&&e[2]!=="done"&&!e[4]&&r1(e);return{c(){t=T("main"),f&&f.c(),n=O(),h&&h.c(),r=O(),d&&d.c(),i=O(),m&&m.c(),a=O(),p&&p.c(),o=O(),g&&g.c(),u=O(),y&&y.c(),s=O(),b&&b.c(),l=O(),v&&v.c(),B(t,"class","svelte-9uo0u8")},m(w,M){te(w,t,M),f&&f.m(t,null),P(t,n),h&&h.m(t,null),P(t,r),d&&d.m(t,null),P(t,i),m&&m.m(t,null),P(t,a),p&&p.m(t,null),P(t,o),g&&g.m(t,null),P(t,u),y&&y.m(t,null),P(t,s),b&&b.m(t,null),P(t,l),v&&v.m(t,null),c=!0},p(w,M){w[2]==="consent"?f||(f=V0(),f.c(),f.m(t,n)):f&&(f.d(1),f=null),w[2]==="start1"?h?(h.p(w,M),M[0]&4&&Z(h,1)):(h=Y0(w),h.c(),Z(h,1),h.m(t,r)):h&&(ln(),ae(h,1,1,()=>{h=null}),cn()),w[2]==="start2"?d?d.p(w,M):(d=j0(w),d.c(),d.m(t,i)):d&&(d.d(1),d=null),w[2]==="start3"?m?(m.p(w,M),M[0]&4&&Z(m,1)):(m=X0(w),m.c(),Z(m,1),m.m(t,a)):m&&(ln(),ae(m,1,1,()=>{m=null}),cn()),w[2]==="demo"?p?p.p(w,M):(p=Z0(w),p.c(),p.m(t,o)):p&&(p.d(1),p=null),w[2]==="tests"?g?(g.p(w,M),M[0]&4&&Z(g,1)):(g=K0(w),g.c(),Z(g,1),g.m(t,u)):g&&(ln(),ae(g,1,1,()=>{g=null}),cn()),w[2]==="feedback"?y?y.p(w,M):(y=t1(w),y.c(),y.m(t,s)):y&&(y.d(1),y=null),w[2]==="done"?b||(b=n1(),b.c(),b.m(t,l)):b&&(b.d(1),b=null),!w[13]&&w[2]!=="done"&&!w[4]?v?v.p(w,M):(v=r1(w),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(w){c||(Z(h),Z(m),Z(g),c=!0)},o(w){ae(h),ae(m),ae(g),c=!1},d(w){w&&ee(t),f&&f.d(),h&&h.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),y&&y.d(),b&&b.d(),v&&v.d()}}}const _o=!1,Bk="/store",Lk=120,Ni=.1;let Ky=8;const i1=4;function Ik(e,t,n){let r,i=Lo(window,"PROLIFIC_PID"),a=Lo(window,"STUDY_ID"),o=Lo(window,"SESSION_ID"),u=["audio","waveform","color"].map(X=>({encoding:X}));console.log({tests:u});let s="consent",l=0,c,f=!1,h=0,d=0,m="",p="",g=0,y=0,b="",v=0,w,M={},_=[],x,E,$=!1,N=!1,A=!1,L="",R=600,C=[],S=0;const I=[];Ma(()=>{document.querySelector("html").addEventListener("keyup",ie)});const re=()=>{E=new Ne({ratio:{firstVal:Ni,operation:"multiply",down:1,up:1,stepSizeDown:1.25,stepSizeUp:1.25*1.25*1.25,limits:[0,Ni],direction:-1,reversalLimit:12,verbosity:0}}),E.init()};function ne(){s==="consent"?n(2,s="start1"):s==="start1"?n(2,s="start2"):s==="start2"?n(2,s="start3"):s==="start3"?(n(1,u=n9(u)),n(2,s="demo")):s==="demo"?m==""||p==""?alert("please fill the form first"):(n(2,s="tests"),n(3,l=0)):s==="tests"?l>=u.length?n(2,s="feedback"):(n(15,L=u[l].encoding),h===0?(n(4,f=!0),z()):(Q(),n(5,h=0))):s==="feedback"&&(Y(),n(2,s="done"))}function Q(){re(),n(11,v=0),w=0,x=0,n(12,$=!0),C=[],_=[],c=new Date,q()}function q(){console.log("Starting trial "+v),M={},n(13,N=!0),U()}function U(){let ue=E.getLast("ratio");ue=Math.random()<.5?ue:-ue,M.deviation=ue;const k=Se(ue);n(21,le=k.noteTimes),k.noteTimesSeparate,n(20,J=k.sampleRate),n(17,j=k.renderedAudio),console.log("generated pattern"),n(14,A=!0),window.setTimeout(()=>{n(14,A=!1),M.startTime=new Date},1e3)}function z(){console.log("show training");let X=(Math.random()*.5+.5)*Ni;X=Math.random()<.5?X:-X,d=X,console.log("training severity",X);const ue=Se(X);n(21,le=ue.noteTimes),ue.noteTimesSeparate,n(20,J=ue.sampleRate),n(17,j=ue.renderedAudio),console.log("generated training",ue),n(11,v++,v)}function W(X){if(!N)return;n(13,N=!1),M.decisionChoice=X,M.errorCode=0,M.timeTaken=(new Date-M.startTime)/1e3;const ue=x;(M.decisionChoice==0&&M.deviation<0||M.decisionChoice==1&&M.deviation>0)&&M.errorCode==0&&x++,M.errorCode==0&&(E.next(ue!=x),_[_.length]=M),M.errorCode==0&&w++,n(11,v++,v),E.reversalLimitReached("ratio")?de():q()}function oe(X){const ue=document.querySelectorAll("#trainingFeedback")[0];X==="early"&&d<0||X==="late"&&d>0?(n(5,h++,h),h>=Ky?n(4,f=!1):ue.innerHTML='<span class="correct">correct!</span>'):(n(5,h=0),ue.innerHTML='<span class="wrong">wrong!</span>'),console.log(ue),z()}function de(){n(12,$=!1),n(13,N=!1),C=[],S=E.getFinalVal("ratio");for(let ue=0;ue<_.length;ue++)C[ue]=_[ue].deviation;console.log(C);const X=new Date;I.push({encoding:L,final:S,data:C,score:x,testNumber:l,trialCount:v+1,trials:_,validTrialCount:w+1,testTimeSeconds:(X-c)/1e3}),n(3,l++,l)}function ie(X){if(!A)switch(X.key){case"ArrowLeft":N&&W(0),f&&oe("early");break;case"ArrowRight":N&&W(1),f&&oe("late");break;case"PageDown":!N&&s!=="done"&&ne()}}function Y(){const X={studyStep:s,demographics:{partID:i,studyID:a,sessionID:o,partEduation:m,partMusicInstr:p,partMusicInstrYears:g,partVisExperienceYears:y,partFeedback:b,visWidth:R},date:new Date().toISOString(),tests:I};console.log("saving data",X);const ue=JSON.stringify(X,void 0,2);fetch(Bk,{method:"POST",headers:{"Content-Type":"application/json"},body:ue}).then(k=>{console.log("Data saved:",k)})}let V=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}],F=Ny(Lk);const H=i1*F;let j=null,D=null,be=null,J,le=[],_e=[],Fe=[];(async()=>{n(16,V=await Promise.all(V.map(async k=>({...k,times:k.beats.map(K=>F*(K-1)),timesOriginal:k.beats.map(K=>F*(K-1)),audioBuffer:await Jb(k.sample)}))));const X=Se(-Ni),ue=Se(Ni);n(22,_e=X.noteTimes),n(23,Fe=ue.noteTimes),n(18,D=X.renderedAudio),n(19,be=ue.renderedAudio)})();const $e=(X=0)=>{if(X===0)return V;const ue=Ct([V]),k=ue.filter(xe=>xe.instrument==="hihat")[0],K=ue.filter(xe=>xe.instrument==="snare")[0],ce=ue.filter(xe=>xe.instrument==="bass")[0];ce.times[1]=ce.timesOriginal[1]+X,k.times[4]=k.timesOriginal[4]+X;for(const xe of[6,7,8])k.times[xe-1]=k.timesOriginal[xe-1]+X;return K.times[1]=K.timesOriginal[1]+X,ue},Ct=X=>{const ue=X[0].map(k=>({...k,beats:[...k.beats],times:[...k.times],timesOriginal:[...k.timesOriginal]}));for(let k=1;k<X.length;k++){const K=X[k];for(const ce of K){const xe=ue.filter(Re=>Re.instrument===ce.instrument)[0];xe.beats=[...xe.beats,...ce.beats.map(Re=>Re+k*i1)],xe.times=[...xe.times,...ce.times.map(Re=>Re+k*H)],xe.timesOriginal=[...xe.timesOriginal,...ce.timesOriginal.map(Re=>Re+k*H)]}}return ue},Se=X=>{if(!V[0].audioBuffer)return;const k=[$e(X)],K=Ct(k),ce=K.map(G=>G.times).flat().sort(),xe=K.map(G=>G.times.map(We=>({time:We,instr:G.instrument}))).flat(1/0).sort((G,We)=>{G.time-We.time}),Re=K[0].audioBuffer.sampleRate,Dr=Ql(K,H*k.length+.1,Re);return{noteTimes:ce,noteTimesSeparate:xe,sampleRate:Re,renderedAudio:Dr}},$r=()=>n(0,R*=1.05),zt=()=>n(0,R*=.95);function Te(){m=u1(this),n(6,m)}function vi(){p=this.value,n(7,p)}function tn(){g=Xr(this.value),n(8,g)}function Ge(){y=Xr(this.value),n(9,y)}function nt(){b=this.value,n(10,b)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(24,r=R/6)},[R,u,s,l,f,h,m,p,g,y,b,v,$,N,A,L,V,j,D,be,J,le,_e,Fe,r,ne,$r,zt,Te,vi,tn,Ge,nt]}class Rk extends Qe{constructor(t){super(),Ke(this,t,Ik,Fk,Ze,{},null,[-1,-1,-1])}}function Ok(e){let t,n;return t=new Ak({}),{c(){Ee(t.$$.fragment)},m(r,i){Pe(t,r,i),n=!0},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Ae(t,r)}}}function qk(e){let t,n;return t=new Rk({}),{c(){Ee(t.$$.fragment)},m(r,i){Pe(t,r,i),n=!0},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Ae(t,r)}}}function Gk(e){let t,n;return t=new VT({}),{c(){Ee(t.$$.fragment)},m(r,i){Pe(t,r,i),n=!0},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Ae(t,r)}}}function Uk(e){let t,n,r,i,a,o;const u=[Gk,qk,Ok],s=[];function l(c,f){return c[0]==="playground"?0:c[0]==="study_drums"?1:c[0]==="analysis"?2:-1}return~(i=l(e))&&(a=s[i]=u[i](e)),{c(){t=T("main"),n=T("h1"),n.textContent="Rhythm Error Sensitivity Study",r=O(),a&&a.c()},m(c,f){te(c,t,f),P(t,n),P(t,r),~i&&s[i].m(t,null),o=!0},p:ve,i(c){o||(Z(a),o=!0)},o(c){ae(a),o=!1},d(c){c&&ee(t),~i&&s[i].d()}}}function zk(e){return[Lo(window,"p")??"study_drums"]}class Hk extends Qe{constructor(t){super(),Ke(this,t,zk,Uk,Ze,{})}}new Hk({target:document.getElementById("app")});export{Qb as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-BOwHdJY4.js","assets/index-DPobgNEi.js","assets/browser-BVvz4k8J.js","assets/index-DJiXs683.js","assets/index-BFoiwJSS.js","assets/index-BiFmGQMx.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

var e3=Object.defineProperty;var t3=(e,t,n)=>t in e?e3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ms=(e,t,n)=>(t3(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function ye(){}function s1(e){return e()}function Hf(){return Object.create(null)}function gn(e){e.forEach(s1)}function l1(e){return typeof e=="function"}function Ke(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Za;function n3(e,t){return e===t?!0:(Za||(Za=document.createElement("a")),Za.href=t,e===Za.href)}function r3(e){return Object.keys(e).length===0}function P(e,t){e.appendChild(t)}function Q(e,t,n){e.insertBefore(t,n||null)}function Z(e){e.parentNode&&e.parentNode.removeChild(e)}function ur(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function Wf(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Pe(e){return document.createTextNode(e)}function R(){return Pe(" ")}function wc(){return Pe("")}function je(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function B(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Xr(e){return e===""?null:+e}function i3(e){return Array.from(e.childNodes)}function Pt(e,t){t=""+t,e.data!==t&&(e.data=t)}function rt(e,t){e.value=t??""}function qe(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Ro(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function c1(e){const t=e.querySelector(":checked");return t&&t.__value}let Ki;function Hi(e){Ki=e}function _c(){if(!Ki)throw new Error("Function called outside component initialization");return Ki}function wa(e){_c().$$.on_mount.push(e)}function en(e){_c().$$.after_update.push(e)}function a3(e){_c().$$.on_destroy.push(e)}const Or=[],ut=[];let Ur=[];const Vf=[],o3=Promise.resolve();let dl=!1;function u3(){dl||(dl=!0,o3.then(f1))}function Qi(e){Ur.push(e)}const xs=new Set;let Nr=0;function f1(){if(Nr!==0)return;const e=Ki;do{try{for(;Nr<Or.length;){const t=Or[Nr];Nr++,Hi(t),s3(t.$$)}}catch(t){throw Or.length=0,Nr=0,t}for(Hi(null),Or.length=0,Nr=0;ut.length;)ut.pop()();for(let t=0;t<Ur.length;t+=1){const n=Ur[t];xs.has(n)||(xs.add(n),n())}Ur.length=0}while(Or.length);for(;Vf.length;)Vf.pop()();dl=!1,xs.clear(),Hi(e)}function s3(e){if(e.fragment!==null){e.update(),gn(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Qi)}}function l3(e){const t=[],n=[];Ur.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Ur=t}const Mo=new Set;let lr;function jt(){lr={r:0,c:[],p:lr}}function Xt(){lr.r||gn(lr.c),lr=lr.p}function X(e,t){e&&e.i&&(Mo.delete(e),e.i(t))}function ae(e,t,n,r){if(e&&e.o){if(Mo.has(e))return;Mo.add(e),lr.c.push(()=>{Mo.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Mt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ee(e){e&&e.c()}function Ae(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Qi(()=>{const a=e.$$.on_mount.map(s1).filter(l1);e.$$.on_destroy?e.$$.on_destroy.push(...a):gn(a),e.$$.on_mount=[]}),i.forEach(Qi)}function Se(e,t){const n=e.$$;n.fragment!==null&&(l3(n.after_update),gn(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function c3(e,t){e.$$.dirty[0]===-1&&(Or.push(e),u3(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Qe(e,t,n,r,i,a,o=null,u=[-1]){const s=Ki;Hi(e);const l=e.$$={fragment:null,ctx:[],props:a,update:ye,not_equal:i,bound:Hf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Hf(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,h,...d)=>{const m=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),c&&c3(e,f)),h}):[],l.update(),c=!0,gn(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=i3(t.target);l.fragment&&l.fragment.l(f),f.forEach(Z)}else l.fragment&&l.fragment.c();t.intro&&X(e.$$.fragment),Ae(e,t.target,t.anchor),f1()}Hi(s)}class Je{constructor(){Ms(this,"$$");Ms(this,"$$set")}$destroy(){Se(this,1),this.$destroy=ye}$on(t,n){if(!l1(n))return ye;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!r3(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const f3="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(f3);function yt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _a(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cu(e){let t,n,r;e.length!==2?(t=yt,n=(u,s)=>yt(e(u),s),r=(u,s)=>e(u)-s):(t=e===yt||e===_a?e:h3,n=e,r=e);function i(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<0?l=f+1:c=f}while(l<c)}return l}function a(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<=0?l=f+1:c=f}while(l<c)}return l}function o(u,s,l=0,c=u.length){const f=i(u,s,l,c-1);return f>l&&r(u[f-1],s)>-r(u[f],s)?f-1:f}return{left:i,center:o,right:a}}function h3(){return 0}function h1(e){return e===null?NaN:+e}function*d3(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const m3=Cu(yt),Tu=m3.right;Cu(h1).center;function Mc(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function p3(e){return e.length|0}function b3(e){return!(e>0)}function g3(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function y3(e){return t=>e(...t)}function v3(...e){const t=typeof e[e.length-1]=="function"&&y3(e.pop());e=e.map(g3);const n=e.map(p3),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(b3))return a;for(;;){a.push(i.map((u,s)=>e[s][u]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function w3(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function xc(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let u of e)(u=t(u,++o,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,a+=r*(u-i))}if(n>1)return a/(n-1)}function ku(e,t){const n=xc(e,t);return n&&Math.sqrt(n)}function Dt(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class br{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,u=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);u&&(n[r++]=u),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class gr extends Map{constructor(t,n=p1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ml(this,t))}has(t){return super.has(ml(this,t))}set(t,n){return super.set(d1(this,t),n)}delete(t){return super.delete(m1(this,t))}}class $u extends Set{constructor(t,n=p1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(ml(this,t))}add(t){return super.add(d1(this,t))}delete(t){return super.delete(m1(this,t))}}function ml({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function d1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function m1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function p1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Oo(e){return e}function Du(e,...t){return Nu(e,Oo,Oo,t)}function cr(e,...t){return Nu(e,Array.from,Oo,t)}function Hr(e,t,...n){return Nu(e,Oo,t,n)}function _3(e,t,...n){return Nu(e,Array.from,t,n)}function Nu(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const u=new gr,s=r[o++];let l=-1;for(const c of a){const f=s(c,++l,a),h=u.get(f);h?h.push(c):u.set(f,[c])}for(const[c,f]of u)u.set(c,i(f,o));return t(u)}(e,0)}function M3(e,t){return Array.from(t,n=>e[n])}function Ji(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const u=qo(o[i],o[a]);if(u)return u}})):(n=e.map(n),r.sort((i,a)=>qo(n[i],n[a]))),M3(e,r)}return e.sort(b1(n))}function b1(e=yt){if(e===yt)return qo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Pc(e,t,n){return(t.length!==2?Ji(Hr(e,t,n),([r,i],[a,o])=>yt(i,o)||yt(r,a)):Ji(Du(e,n),([r,i],[a,o])=>t(i,o)||yt(r,a))).map(([r])=>r)}const x3=Math.sqrt(50),P3=Math.sqrt(10),A3=Math.sqrt(2);function Go(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=x3?10:a>=P3?5:a>=A3?2:1;let u,s,l;return i<0?(l=Math.pow(10,-i)/o,u=Math.round(e*l),s=Math.round(t*l),u/l<e&&++u,s/l>t&&--s,l=-l):(l=Math.pow(10,i)*o,u=Math.round(e/l),s=Math.round(t/l),u*l<e&&++u,s*l>t&&--s),s<u&&.5<=n&&n<2?Go(e,t,n*2):[u,s,l]}function ea(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Go(t,e,n):Go(e,t,n);if(!(a>=i))return[];const u=a-i+1,s=new Array(u);if(r)if(o<0)for(let l=0;l<u;++l)s[l]=(a-l)/-o;else for(let l=0;l<u;++l)s[l]=(a-l)*o;else if(o<0)for(let l=0;l<u;++l)s[l]=(i+l)/-o;else for(let l=0;l<u;++l)s[l]=(i+l)*o;return s}function zo(e,t,n){return t=+t,e=+e,n=+n,Go(e,t,n)[2]}function pl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?zo(t,e,n):zo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function S3(e){return Math.max(1,Math.ceil(Math.log(Mc(e))/Math.LN2)+1)}function It(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function E3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Dn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function C3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function g1(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?qo:b1(i);r>n;){if(r-n>600){const s=r-n+1,l=t-n+1,c=Math.log(s),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(s-f)/s)*(l-s/2<0?-1:1),d=Math.max(n,Math.floor(t-l*f/s+h)),m=Math.min(r,Math.floor(t+(s-l)*f/s+h));g1(e,t,d,m,i)}const a=e[t];let o=n,u=r;for(wi(e,n,t),i(e[r],a)>0&&wi(e,n,r);o<u;){for(wi(e,o,u),++o,--u;i(e[o],a)<0;)++o;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?wi(e,n,u):(++u,wi(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function wi(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y1(e,t=yt){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?yt(o,i)>0:yt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Zr(e,t,n){if(e=Float64Array.from(d3(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Dn(e);if(t>=1)return It(e);var r,i=(r-1)*t,a=Math.floor(i),o=It(g1(e,a).subarray(0,a+1)),u=Dn(e.subarray(a+1));return o+(u-o)*(i-a)}}function T3(e,t,n=h1){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function k3(e,t,n){const r=Mc(e),i=Zr(e,.75)-Zr(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function v1(e,t,n){const r=Mc(e),i=ku(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Bu(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function bl(e,t){return Zr(e,.5,t)}function*$3(e){for(const t of e)yield*t}function w1(e){return Array.from($3(e))}function D3(e,t){const n=new gr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function N3(e,t=B3){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function B3(e,t){return[e,t]}function gl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function jn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Uo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function F3(e){return e}var Ps=1,As=2,yl=3,Ka=4,Yf=1e-6;function L3(e){return"translate("+e+",0)"}function I3(e){return"translate(0,"+e+")"}function R3(e){return t=>+e(t)}function O3(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function q3(){return!this.__axis}function G3(e,t){var n=[],r=null,i=null,a=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===Ps||e===Ka?-1:1,c=e===Ka||e===As?"x":"y",f=e===Ps||e===yl?L3:I3;function h(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):F3),g=Math.max(a,0)+u,y=t.range(),b=+y[0]+s,w=+y[y.length-1]+s,v=(t.bandwidth?O3:R3)(t.copy(),s),_=d.selection?d.selection():d,M=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(m,t).order(),C=x.exit(),E=x.enter().append("g").attr("class","tick"),$=x.select("line"),A=x.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(E),$=$.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),A=A.merge(E.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===Ps?"0em":e===yl?"0.71em":"0.32em")),d!==_&&(M=M.transition(d),x=x.transition(d),$=$.transition(d),A=A.transition(d),C=C.transition(d).attr("opacity",Yf).attr("transform",function(L){return isFinite(L=v(L))?f(L+s):this.getAttribute("transform")}),E.attr("opacity",Yf).attr("transform",function(L){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(L))?O:v(L))+s)})),C.remove(),M.attr("d",e===Ka||e===As?o?"M"+l*o+","+b+"H"+s+"V"+w+"H"+l*o:"M"+s+","+b+"V"+w:o?"M"+b+","+l*o+"V"+s+"H"+w+"V"+l*o:"M"+b+","+s+"H"+w),x.attr("opacity",1).attr("transform",function(L){return f(v(L)+s)}),$.attr(c+"2",l*a),A.attr(c,l*g).text(p),_.filter(q3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===As?"start":e===Ka?"end":"middle"),_.each(function(){this.__axis=v})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(u=+d,h):u},h.offset=function(d){return arguments.length?(s=+d,h):s},h}function z3(e){return G3(yl,e)}var U3={value:()=>{}};function _1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new xo(n)}function xo(e){this._=e}function H3(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}xo.prototype=_1.prototype={constructor:xo,on:function(e,t){var n=this._,r=H3(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=W3(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=jf(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jf(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new xo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function W3(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=U3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var vl="http://www.w3.org/1999/xhtml";const Kr={svg:"http://www.w3.org/2000/svg",xhtml:vl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Kr.hasOwnProperty(t)?{space:Kr[t],local:e}:e}function V3(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vl&&t.documentElement.namespaceURI===vl?t.createElement(e):t.createElementNS(n,e)}}function Y3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lu(e){var t=Fu(e);return(t.local?Y3:V3)(t)}function j3(){}function Ac(e){return e==null?j3:function(){return this.querySelector(e)}}function X3(e){typeof e!="function"&&(e=Ac(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new At(r,this._parents)}function Z3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function K3(){return[]}function M1(e){return e==null?K3:function(){return this.querySelectorAll(e)}}function Q3(e){return function(){return Z3(e.apply(this,arguments))}}function J3(e){typeof e=="function"?e=Q3(e):e=M1(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new At(r,i)}function x1(e){return function(){return this.matches(e)}}function P1(e){return function(t){return t.matches(e)}}var ev=Array.prototype.find;function tv(e){return function(){return ev.call(this.children,e)}}function nv(){return this.firstElementChild}function rv(e){return this.select(e==null?nv:tv(typeof e=="function"?e:P1(e)))}var iv=Array.prototype.filter;function av(){return Array.from(this.children)}function ov(e){return function(){return iv.call(this.children,e)}}function uv(e){return this.selectAll(e==null?av:ov(typeof e=="function"?e:P1(e)))}function sv(e){typeof e!="function"&&(e=x1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new At(r,this._parents)}function A1(e){return new Array(e.length)}function lv(){return new At(this._enter||this._groups.map(A1),this._parents)}function Ho(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ho.prototype={constructor:Ho,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cv(e){return function(){return e}}function fv(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new Ho(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function hv(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new Ho(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function dv(e){return e.__data__}function mv(e,t){if(!arguments.length)return Array.from(this,dv);var n=t?hv:fv,r=this._parents,i=this._groups;typeof e!="function"&&(e=cv(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=pv(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),y=s[l]=new Array(h);n(c,f,p,g,y,d,t);for(var b=0,w=0,v,_;b<m;++b)if(v=p[b]){for(b>=w&&(w=b+1);!(_=g[w])&&++w<m;);v._next=_||null}}return o=new At(o,r),o._enter=u,o._exit=s,o}function pv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bv(){return new At(this._exit||this._groups.map(A1),this._parents)}function gv(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function yv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var l=n[s],c=r[s],f=l.length,h=u[s]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;s<i;++s)u[s]=n[s];return new At(u,this._parents)}function vv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function wv(e){e||(e=_v);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new At(i,this._parents).order()}function _v(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Mv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function xv(){return Array.from(this)}function Pv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Av(){let e=0;for(const t of this)++e;return e}function Sv(){return!this.node()}function Ev(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function Cv(e){return function(){this.removeAttribute(e)}}function Tv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kv(e,t){return function(){this.setAttribute(e,t)}}function $v(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Dv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Nv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Bv(e,t){var n=Fu(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Tv:Cv:typeof t=="function"?n.local?Nv:Dv:n.local?$v:kv)(n,t))}function S1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Fv(e){return function(){this.style.removeProperty(e)}}function Lv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Iv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Rv(e,t,n){return arguments.length>1?this.each((t==null?Fv:typeof t=="function"?Iv:Lv)(e,t,n??"")):Qr(this.node(),e)}function Qr(e,t){return e.style.getPropertyValue(t)||S1(e).getComputedStyle(e,null).getPropertyValue(t)}function Ov(e){return function(){delete this[e]}}function qv(e,t){return function(){this[e]=t}}function Gv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function zv(e,t){return arguments.length>1?this.each((t==null?Ov:typeof t=="function"?Gv:qv)(e,t)):this.node()[e]}function E1(e){return e.trim().split(/^|\s+/)}function Sc(e){return e.classList||new C1(e)}function C1(e){this._node=e,this._names=E1(e.getAttribute("class")||"")}C1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function T1(e,t){for(var n=Sc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function k1(e,t){for(var n=Sc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Uv(e){return function(){T1(this,e)}}function Hv(e){return function(){k1(this,e)}}function Wv(e,t){return function(){(t.apply(this,arguments)?T1:k1)(this,e)}}function Vv(e,t){var n=E1(e+"");if(arguments.length<2){for(var r=Sc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Wv:t?Uv:Hv)(n,t))}function Yv(){this.textContent=""}function jv(e){return function(){this.textContent=e}}function Xv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Zv(e){return arguments.length?this.each(e==null?Yv:(typeof e=="function"?Xv:jv)(e)):this.node().textContent}function Kv(){this.innerHTML=""}function Qv(e){return function(){this.innerHTML=e}}function Jv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ew(e){return arguments.length?this.each(e==null?Kv:(typeof e=="function"?Jv:Qv)(e)):this.node().innerHTML}function tw(){this.nextSibling&&this.parentNode.appendChild(this)}function nw(){return this.each(tw)}function rw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iw(){return this.each(rw)}function aw(e){var t=typeof e=="function"?e:Lu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ow(){return null}function uw(e,t){var n=typeof e=="function"?e:Lu(e),r=t==null?ow:typeof t=="function"?t:Ac(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function sw(){var e=this.parentNode;e&&e.removeChild(this)}function lw(){return this.each(sw)}function cw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hw(e){return this.select(e?fw:cw)}function dw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mw(e){return function(t){e.call(this,t,this.__data__)}}function pw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function bw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function gw(e,t,n){return function(){var r=this.__on,i,a=mw(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function yw(e,t,n){var r=pw(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?gw:bw,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function $1(e,t,n){var r=S1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function vw(e,t){return function(){return $1(this,e,t)}}function ww(e,t){return function(){return $1(this,e,t.apply(this,arguments))}}function _w(e,t){return this.each((typeof t=="function"?ww:vw)(e,t))}function*Mw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var D1=[null];function At(e,t){this._groups=e,this._parents=t}function Ma(){return new At([[document.documentElement]],D1)}function xw(){return this}At.prototype=Ma.prototype={constructor:At,select:X3,selectAll:J3,selectChild:rv,selectChildren:uv,filter:sv,data:mv,enter:lv,exit:bv,join:gv,merge:yv,selection:xw,order:vv,sort:wv,call:Mv,nodes:xv,node:Pv,size:Av,empty:Sv,each:Ev,attr:Bv,style:Rv,property:zv,classed:Vv,text:Zv,html:ew,raise:nw,lower:iw,append:aw,insert:uw,remove:lw,clone:hw,datum:dw,on:yw,dispatch:_w,[Symbol.iterator]:Mw};function Wi(e){return typeof e=="string"?new At([[document.querySelector(e)]],[document.documentElement]):new At([[e]],D1)}function Pw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Aw(e,t){if(e=Pw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function mi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Jn(){}var yr=.7,Jr=1/yr,Wr="\\s*([+-]?\\d+)\\s*",ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sw=/^#([0-9a-f]{3,8})$/,Ew=new RegExp(`^rgb\\(${Wr},${Wr},${Wr}\\)$`),Cw=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),Tw=new RegExp(`^rgba\\(${Wr},${Wr},${Wr},${ta}\\)$`),kw=new RegExp(`^rgba\\(${hn},${hn},${hn},${ta}\\)$`),$w=new RegExp(`^hsl\\(${ta},${hn},${hn}\\)$`),Dw=new RegExp(`^hsla\\(${ta},${hn},${hn},${ta}\\)$`),Xf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mi(Jn,vr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Zf,formatHex:Zf,formatHex8:Nw,formatHsl:Bw,formatRgb:Kf,toString:Kf});function Zf(){return this.rgb().formatHex()}function Nw(){return this.rgb().formatHex8()}function Bw(){return N1(this).formatHsl()}function Kf(){return this.rgb().formatRgb()}function vr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Sw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qf(t):n===3?new Xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ew.exec(e))?new Xe(t[1],t[2],t[3],1):(t=Cw.exec(e))?new Xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Tw.exec(e))?Qa(t[1],t[2],t[3],t[4]):(t=kw.exec(e))?Qa(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$w.exec(e))?th(t[1],t[2]/100,t[3]/100,1):(t=Dw.exec(e))?th(t[1],t[2]/100,t[3]/100,t[4]):Xf.hasOwnProperty(e)?Qf(Xf[e]):e==="transparent"?new Xe(NaN,NaN,NaN,0):null}function Qf(e){return new Xe(e>>16&255,e>>8&255,e&255,1)}function Qa(e,t,n,r){return r<=0&&(e=t=n=NaN),new Xe(e,t,n,r)}function Ec(e){return e instanceof Jn||(e=vr(e)),e?(e=e.rgb(),new Xe(e.r,e.g,e.b,e.opacity)):new Xe}function Xn(e,t,n,r){return arguments.length===1?Ec(e):new Xe(e,t,n,r??1)}function Xe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}mi(Xe,Xn,xa(Jn,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yr:Math.pow(yr,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xe(dr(this.r),dr(this.g),dr(this.b),Wo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jf,formatHex:Jf,formatHex8:Fw,formatRgb:eh,toString:eh}));function Jf(){return`#${fr(this.r)}${fr(this.g)}${fr(this.b)}`}function Fw(){return`#${fr(this.r)}${fr(this.g)}${fr(this.b)}${fr((isNaN(this.opacity)?1:this.opacity)*255)}`}function eh(){const e=Wo(this.opacity);return`${e===1?"rgb(":"rgba("}${dr(this.r)}, ${dr(this.g)}, ${dr(this.b)}${e===1?")":`, ${e})`}`}function Wo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fr(e){return e=dr(e),(e<16?"0":"")+e.toString(16)}function th(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vt(e,t,n,r)}function N1(e){if(e instanceof Vt)return new Vt(e.h,e.s,e.l,e.opacity);if(e instanceof Jn||(e=vr(e)),!e)return new Vt;if(e instanceof Vt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new Vt(o,u,s,e.opacity)}function wl(e,t,n,r){return arguments.length===1?N1(e):new Vt(e,t,n,r??1)}function Vt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mi(Vt,wl,xa(Jn,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new Vt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yr:Math.pow(yr,e),new Vt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Xe(Ss(e>=240?e-240:e+120,i,r),Ss(e,i,r),Ss(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Vt(nh(this.h),Ja(this.s),Ja(this.l),Wo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wo(this.opacity);return`${e===1?"hsl(":"hsla("}${nh(this.h)}, ${Ja(this.s)*100}%, ${Ja(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nh(e){return e=(e||0)%360,e<0?e+360:e}function Ja(e){return Math.max(0,Math.min(1,e||0))}function Ss(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const B1=Math.PI/180,F1=180/Math.PI,Vo=18,L1=.96422,I1=1,R1=.82521,O1=4/29,Vr=6/29,q1=3*Vr*Vr,Lw=Vr*Vr*Vr;function G1(e){if(e instanceof dn)return new dn(e.l,e.a,e.b,e.opacity);if(e instanceof Tn)return z1(e);e instanceof Xe||(e=Ec(e));var t=ks(e.r),n=ks(e.g),r=ks(e.b),i=Es((.2225045*t+.7168786*n+.0606169*r)/I1),a,o;return t===n&&n===r?a=o=i:(a=Es((.4360747*t+.3850649*n+.1430804*r)/L1),o=Es((.0139322*t+.0971045*n+.7141733*r)/R1)),new dn(116*i-16,500*(a-i),200*(i-o),e.opacity)}function _l(e,t,n,r){return arguments.length===1?G1(e):new dn(e,t,n,r??1)}function dn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}mi(dn,_l,xa(Jn,{brighter(e){return new dn(this.l+Vo*(e??1),this.a,this.b,this.opacity)},darker(e){return new dn(this.l-Vo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=L1*Cs(t),e=I1*Cs(e),n=R1*Cs(n),new Xe(Ts(3.1338561*t-1.6168667*e-.4906146*n),Ts(-.9787684*t+1.9161415*e+.033454*n),Ts(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Es(e){return e>Lw?Math.pow(e,1/3):e/q1+O1}function Cs(e){return e>Vr?e*e*e:q1*(e-O1)}function Ts(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ks(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Iw(e){if(e instanceof Tn)return new Tn(e.h,e.c,e.l,e.opacity);if(e instanceof dn||(e=G1(e)),e.a===0&&e.b===0)return new Tn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*F1;return new Tn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ml(e,t,n,r){return arguments.length===1?Iw(e):new Tn(e,t,n,r??1)}function Tn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function z1(e){if(isNaN(e.h))return new dn(e.l,0,0,e.opacity);var t=e.h*B1;return new dn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}mi(Tn,Ml,xa(Jn,{brighter(e){return new Tn(this.h,this.c,this.l+Vo*(e??1),this.opacity)},darker(e){return new Tn(this.h,this.c,this.l-Vo*(e??1),this.opacity)},rgb(){return z1(this).rgb()}}));var U1=-.14861,Cc=1.78277,Tc=-.29227,Iu=-.90649,na=1.97294,rh=na*Iu,ih=na*Cc,ah=Cc*Tc-Iu*U1;function Rw(e){if(e instanceof mr)return new mr(e.h,e.s,e.l,e.opacity);e instanceof Xe||(e=Ec(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ah*r+rh*t-ih*n)/(ah+rh-ih),a=r-i,o=(na*(n-i)-Tc*a)/Iu,u=Math.sqrt(o*o+a*a)/(na*i*(1-i)),s=u?Math.atan2(o,a)*F1-120:NaN;return new mr(s<0?s+360:s,u,i,e.opacity)}function pn(e,t,n,r){return arguments.length===1?Rw(e):new mr(e,t,n,r??1)}function mr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mi(mr,pn,xa(Jn,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new mr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yr:Math.pow(yr,e),new mr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*B1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Xe(255*(t+n*(U1*r+Cc*i)),255*(t+n*(Tc*r+Iu*i)),255*(t+n*(na*r)),this.opacity)}}));function Ow(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function qw(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return Ow((n-r/t)*t,o,i,a,u)}}const Ru=e=>()=>e;function H1(e,t){return function(n){return e+n*t}}function Gw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function kc(e,t){var n=t-e;return n?H1(e,n>180||n<-180?n-360*Math.round(n/360):n):Ru(isNaN(e)?t:e)}function zw(e){return(e=+e)==1?ot:function(t,n){return n-t?Gw(t,n,e):Ru(isNaN(t)?n:t)}}function ot(e,t){var n=t-e;return n?H1(e,n):Ru(isNaN(e)?t:e)}const wr=function e(t){var n=zw(t);function r(i,a){var o=n((i=Xn(i)).r,(a=Xn(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=ot(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Uw(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,u;for(o=0;o<n;++o)u=Xn(t[o]),r[o]=u.r||0,i[o]=u.g||0,a[o]=u.b||0;return r=e(r),i=e(i),a=e(a),u.opacity=1,function(s){return u.r=r(s),u.g=i(s),u.b=a(s),u+""}}}var Hw=Uw(qw);function Ww(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Vw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Yw(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Pa(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function jw(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function at(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Xw(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Pa(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var xl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$s=new RegExp(xl.source,"g");function Zw(e){return function(){return e}}function Kw(e){return function(t){return e(t)+""}}function W1(e,t){var n=xl.lastIndex=$s.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=xl.exec(e))&&(i=$s.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:at(r,i)})),n=$s.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?Kw(s[0].x):Zw(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}function Pa(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ru(t):(n==="number"?at:n==="string"?(r=vr(t))?(t=r,wr):W1:t instanceof vr?wr:t instanceof Date?jw:Vw(t)?Ww:Array.isArray(t)?Yw:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Xw:at)(e,t)}function $c(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var oh=180/Math.PI,Pl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V1(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*oh,skewX:Math.atan(s)*oh,scaleX:o,scaleY:u}}var eo;function Qw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pl:V1(t.a,t.b,t.c,t.d,t.e,t.f)}function Jw(e){return e==null||(eo||(eo=document.createElementNS("http://www.w3.org/2000/svg","g")),eo.setAttribute("transform",e),!(e=eo.transform.baseVal.consolidate()))?Pl:(e=e.matrix,V1(e.a,e.b,e.c,e.d,e.e,e.f))}function Y1(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:at(l,f)},{i:p-2,x:at(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:at(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:at(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:at(l,f)},{i:p-2,x:at(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var e_=Y1(Qw,"px, ","px)","deg)"),t_=Y1(Jw,", ",")",")");function n_(e){return function(t,n){var r=e((t=wl(t)).h,(n=wl(n)).h),i=ot(t.s,n.s),a=ot(t.l,n.l),o=ot(t.opacity,n.opacity);return function(u){return t.h=r(u),t.s=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const r_=n_(kc);function i_(e,t){var n=ot((e=_l(e)).l,(t=_l(t)).l),r=ot(e.a,t.a),i=ot(e.b,t.b),a=ot(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function a_(e){return function(t,n){var r=e((t=Ml(t)).h,(n=Ml(n)).h),i=ot(t.c,n.c),a=ot(t.l,n.l),o=ot(t.opacity,n.opacity);return function(u){return t.h=r(u),t.c=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const o_=a_(kc);function j1(e){return function t(n){n=+n;function r(i,a){var o=e((i=pn(i)).h,(a=pn(a)).h),u=ot(i.s,a.s),s=ot(i.l,a.l),l=ot(i.opacity,a.opacity);return function(c){return i.h=o(c),i.s=u(c),i.l=s(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}j1(kc);var Dc=j1(ot);function Ou(e,t){t===void 0&&(t=e,e=Pa);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}function Zt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ei=0,Di=0,_i=0,X1=1e3,Yo,Ni,jo=0,_r=0,qu=0,ra=typeof performance=="object"&&performance.now?performance:Date,Z1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Nc(){return _r||(Z1(u_),_r=ra.now()+qu)}function u_(){_r=0}function Xo(){this._call=this._time=this._next=null}Xo.prototype=K1.prototype={constructor:Xo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Nc():+n)+(t==null?0:+t),!this._next&&Ni!==this&&(Ni?Ni._next=this:Yo=this,Ni=this),this._call=e,this._time=n,Al()},stop:function(){this._call&&(this._call=null,this._time=1/0,Al())}};function K1(e,t,n){var r=new Xo;return r.restart(e,t,n),r}function s_(){Nc(),++ei;for(var e=Yo,t;e;)(t=_r-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ei}function uh(){_r=(jo=ra.now())+qu,ei=Di=0;try{s_()}finally{ei=0,c_(),_r=0}}function l_(){var e=ra.now(),t=e-jo;t>X1&&(qu-=t,jo=e)}function c_(){for(var e,t=Yo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Yo=n);Ni=e,Al(r)}function Al(e){if(!ei){Di&&(Di=clearTimeout(Di));var t=e-_r;t>24?(e<1/0&&(Di=setTimeout(uh,e-ra.now()-qu)),_i&&(_i=clearInterval(_i))):(_i||(jo=ra.now(),_i=setInterval(l_,X1)),ei=1,Z1(uh))}}function sh(e,t,n){var r=new Xo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var f_=_1("start","end","cancel","interrupt"),h_=[],Q1=0,lh=1,Sl=2,Po=3,ch=4,El=5,Ao=6;function Gu(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;d_(e,n,{name:t,index:r,group:i,on:f_,tween:h_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Q1})}function Bc(e,t){var n=tn(e,t);if(n.state>Q1)throw new Error("too late; already scheduled");return n}function yn(e,t){var n=tn(e,t);if(n.state>Po)throw new Error("too late; already running");return n}function tn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function d_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=K1(a,0,n.time);function a(l){n.state=lh,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==lh)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Po)return sh(o);d.state===ch?(d.state=Ao,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Ao,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(sh(function(){n.state===Po&&(n.state=ch,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=Sl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Sl){for(n.state=Po,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=El,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===El&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ao,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function m_(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Sl&&r.state<El,r.state=Ao,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function p_(e){return this.each(function(){m_(this,e)})}function b_(e,t){var n,r;return function(){var i=yn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function g_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=yn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function y_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=tn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?b_:g_)(n,e,t))}function Fc(e,t,n){var r=e._id;return e.each(function(){var i=yn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return tn(i,r).value[t]}}function J1(e,t){var n;return(typeof t=="number"?at:t instanceof vr?wr:(n=vr(t))?(t=n,wr):W1)(e,t)}function v_(e){return function(){this.removeAttribute(e)}}function w_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function __(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function M_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function x_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function P_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function A_(e,t){var n=Fu(e),r=n==="transform"?t_:J1;return this.attrTween(e,typeof t=="function"?(n.local?P_:x_)(n,r,Fc(this,"attr."+e,t)):t==null?(n.local?w_:v_)(n):(n.local?M_:__)(n,r,t))}function S_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function E_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function C_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&E_(e,a)),n}return i._value=t,i}function T_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&S_(e,a)),n}return i._value=t,i}function k_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Fu(e);return this.tween(n,(r.local?C_:T_)(r,t))}function $_(e,t){return function(){Bc(this,e).delay=+t.apply(this,arguments)}}function D_(e,t){return t=+t,function(){Bc(this,e).delay=t}}function N_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$_:D_)(t,e)):tn(this.node(),t).delay}function B_(e,t){return function(){yn(this,e).duration=+t.apply(this,arguments)}}function F_(e,t){return t=+t,function(){yn(this,e).duration=t}}function L_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?B_:F_)(t,e)):tn(this.node(),t).duration}function I_(e,t){if(typeof t!="function")throw new Error;return function(){yn(this,e).ease=t}}function R_(e){var t=this._id;return arguments.length?this.each(I_(t,e)):tn(this.node(),t).ease}function O_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yn(this,e).ease=n}}function q_(e){if(typeof e!="function")throw new Error;return this.each(O_(this._id,e))}function G_(e){typeof e!="function"&&(e=x1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Nn(r,this._parents,this._name,this._id)}function z_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Nn(o,this._parents,this._name,this._id)}function U_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function H_(e,t,n){var r,i,a=U_(t)?Bc:yn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function W_(e,t){var n=this._id;return arguments.length<2?tn(this.node(),n).on.on(e):this.each(H_(n,e,t))}function V_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Y_(){return this.on("end.remove",V_(this._id))}function j_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ac(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Gu(l[h],t,n,h,l,tn(c,n)));return new Nn(a,this._parents,t,n)}function X_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=M1(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=tn(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&Gu(d,t,n,p,h,m);a.push(h),o.push(c)}return new Nn(a,o,t,n)}var Z_=Ma.prototype.constructor;function K_(){return new Z_(this._groups,this._parents)}function Q_(e,t){var n,r,i;return function(){var a=Qr(this,e),o=(this.style.removeProperty(e),Qr(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function em(e){return function(){this.style.removeProperty(e)}}function J_(e,t,n){var r,i=n+"",a;return function(){var o=Qr(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function e5(e,t,n){var r,i,a;return function(){var o=Qr(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),Qr(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function t5(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=yn(this,e),l=s.on,c=s.value[a]==null?u||(u=em(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function n5(e,t,n){var r=(e+="")=="transform"?e_:J1;return t==null?this.styleTween(e,Q_(e,r)).on("end.style."+e,em(e)):typeof t=="function"?this.styleTween(e,e5(e,r,Fc(this,"style."+e,t))).each(t5(this._id,e)):this.styleTween(e,J_(e,r,t),n).on("end.style."+e,null)}function r5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function i5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&r5(e,o,n)),r}return a._value=t,a}function a5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,i5(e,t,n??""))}function o5(e){return function(){this.textContent=e}}function u5(e){return function(){var t=e(this);this.textContent=t??""}}function s5(e){return this.tween("text",typeof e=="function"?u5(Fc(this,"text",e)):o5(e==null?"":e+""))}function l5(e){return function(t){this.textContent=e.call(this,t)}}function c5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&l5(i)),t}return r._value=e,r}function f5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,c5(e))}function h5(){for(var e=this._name,t=this._id,n=tm(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=tn(s,t);Gu(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Nn(r,this._parents,e,n)}function d5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=yn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var m5=0;function Nn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function tm(){return++m5}var _n=Ma.prototype;Nn.prototype={constructor:Nn,select:j_,selectAll:X_,selectChild:_n.selectChild,selectChildren:_n.selectChildren,filter:G_,merge:z_,selection:K_,transition:h5,call:_n.call,nodes:_n.nodes,node:_n.node,size:_n.size,empty:_n.empty,each:_n.each,on:W_,attr:A_,attrTween:k_,style:n5,styleTween:a5,text:s5,textTween:f5,remove:Y_,tween:y_,delay:N_,duration:L_,ease:R_,easeVarying:q_,end:d5,[Symbol.iterator]:_n[Symbol.iterator]};function p5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var b5={time:null,delay:0,duration:250,ease:p5};function g5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function y5(e){var t,n;e instanceof Nn?(t=e._id,e=e._name):(t=tm(),(n=b5).time=Nc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&Gu(s,e,t,l,o,n||g5(s,t));return new Nn(r,this._parents,e,t)}Ma.prototype.interrupt=p_;Ma.prototype.transition=y5;const Cl=Math.PI,Tl=2*Cl,or=1e-6,v5=Tl-or;function nm(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function w5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return nm;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class rm{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?nm:w5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-t,l=i-n,c=o-t,f=u-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>or)if(!(Math.abs(f*s-l*c)>or)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-u,p=s*s+l*l,g=d*d+m*m,y=Math.sqrt(p),b=Math.sqrt(h),w=a*Math.tan((Cl-Math.acos((p+h-g)/(2*y*b)))/2),v=w/b,_=w/y;Math.abs(v-1)>or&&this._append`L${t+v*c},${n+v*f}`,this._append`A${a},${a},0,0,${+(f*d>c*m)},${this._x1=t+_*s},${this._y1=n+_*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),l=t+u,c=n+s,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>or||Math.abs(this._y1-c)>or)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%Tl+Tl),h>v5?this._append`A${r},${r},0,1,${f},${t-u},${n-s}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>or&&this._append`A${r},${r},0,${+(h>=Cl)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Hn(e=3){return new rm(+e)}var fh={},Ds={},Ns=34,Mi=10,Bs=13;function im(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function _5(e,t){var n=im(e);return function(r,i){return t(n(r),i,e)}}function hh(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function M5(e){return e<0?"-"+pt(-e,6):e>9999?"+"+pt(e,6):pt(e,4)}function x5(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":M5(e.getUTCFullYear())+"-"+pt(e.getUTCMonth()+1,2)+"-"+pt(e.getUTCDate(),2)+(i?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"."+pt(i,3)+"Z":r?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"Z":n||t?"T"+pt(t,2)+":"+pt(n,2)+"Z":"")}function P5(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var d,m,p=i(f,function(g,y){if(d)return d(g,y-1);m=g,d=h?_5(g,h):im(g)});return p.columns=m||[],p}function i(f,h){var d=[],m=f.length,p=0,g=0,y,b=m<=0,w=!1;f.charCodeAt(m-1)===Mi&&--m,f.charCodeAt(m-1)===Bs&&--m;function v(){if(b)return Ds;if(w)return w=!1,fh;var M,x=p,C;if(f.charCodeAt(x)===Ns){for(;p++<m&&f.charCodeAt(p)!==Ns||f.charCodeAt(++p)===Ns;);return(M=p)>=m?b=!0:(C=f.charCodeAt(p++))===Mi?w=!0:C===Bs&&(w=!0,f.charCodeAt(p)===Mi&&++p),f.slice(x+1,M-1).replace(/""/g,'"')}for(;p<m;){if((C=f.charCodeAt(M=p++))===Mi)w=!0;else if(C===Bs)w=!0,f.charCodeAt(p)===Mi&&++p;else if(C!==n)continue;return f.slice(x,M)}return b=!0,f.slice(x,m)}for(;(y=v())!==Ds;){for(var _=[];y!==fh&&y!==Ds;)_.push(y),y=v();h&&(_=h(_,g++))==null||d.push(_)}return d}function a(f,h){return f.map(function(d){return h.map(function(m){return c(d[m])}).join(e)})}function o(f,h){return h==null&&(h=hh(f)),[h.map(c).join(e)].concat(a(f,h)).join(`
`)}function u(f,h){return h==null&&(h=hh(f)),a(f,h).join(`
`)}function s(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?x5(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:u,formatRows:s,formatRow:l,formatValue:c}}var A5=P5(","),S5=A5.parse;function E5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ti(e){return e=Zo(Math.abs(e)),e?e[1]:NaN}function C5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function T5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var k5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ia(e){if(!(t=k5.exec(e)))throw new Error("invalid format: "+e);var t;return new Lc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ia.prototype=Lc.prototype;function Lc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Lc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var am;function D5(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(am=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zo(e,Math.max(0,t+a-1))[0]}function dh(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const mh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:E5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>dh(e*100,t),r:dh,s:D5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ph(e){return e}var bh=Array.prototype.map,gh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function N5(e){var t=e.grouping===void 0||e.thousands===void 0?ph:C5(bh.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?ph:T5(bh.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function l(f){f=ia(f);var h=f.fill,d=f.align,m=f.sign,p=f.symbol,g=f.zero,y=f.width,b=f.comma,w=f.precision,v=f.trim,_=f.type;_==="n"?(b=!0,_="g"):mh[_]||(w===void 0&&(w=12),v=!0,_="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var M=p==="$"?n:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",x=p==="$"?r:/[%p]/.test(_)?o:"",C=mh[_],E=/[defgprs%]/.test(_);w=w===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function $(A){var L=M,O=x,T,S,I;if(_==="c")O=C(A)+O,A="";else{A=+A;var ne=A<0||1/A<0;if(A=isNaN(A)?s:C(Math.abs(A),w),v&&(A=$5(A)),ne&&+A==0&&m!=="+"&&(ne=!1),L=(ne?m==="("?m:u:m==="-"||m==="("?"":m)+L,O=(_==="s"?gh[8+am/3]:"")+O+(ne&&m==="("?")":""),E){for(T=-1,S=A.length;++T<S;)if(I=A.charCodeAt(T),48>I||I>57){O=(I===46?i+A.slice(T+1):A.slice(T))+O,A=A.slice(0,T);break}}}b&&!g&&(A=t(A,1/0));var ee=L.length+A.length+O.length,K=ee<y?new Array(y-ee+1).join(h):"";switch(b&&g&&(A=t(K+A,K.length?y-O.length:1/0),K=""),d){case"<":A=L+A+O+K;break;case"=":A=L+K+A+O;break;case"^":A=K.slice(0,ee=K.length>>1)+L+A+O+K.slice(ee);break;default:A=K+L+A+O;break}return a(A)}return $.toString=function(){return f+""},$}function c(f,h){var d=l((f=ia(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(ti(h)/3)))*3,p=Math.pow(10,-m),g=gh[8+m/3];return function(y){return d(p*y)+g}}return{format:l,formatPrefix:c}}var to,pi,om;B5({thousands:",",grouping:[3],currency:["$",""]});function B5(e){return to=N5(e),pi=to.format,om=to.formatPrefix,to}function F5(e){return Math.max(0,-ti(Math.abs(e)))}function L5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ti(t)/3)))*3-ti(Math.abs(e)))}function I5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ti(t)-ti(e))+1}var he=1e-6,um=1e-12,pe=Math.PI,Ie=pe/2,yh=pe/4,St=pe*2,lt=180/pe,Le=pe/180,Ce=Math.abs,bi=Math.atan,Bn=Math.atan2,me=Math.cos,sm=Math.exp,Ko=Math.log,Fs=Math.pow,ce=Math.sin,Nt=Math.sign||function(e){return e>0?1:e<0?-1:0},vt=Math.sqrt,Ic=Math.tan;function lm(e){return e>1?0:e<-1?pe:Math.acos(e)}function Rt(e){return e>1?Ie:e<-1?-Ie:Math.asin(e)}function Bt(){}function Qo(e,t){e&&wh.hasOwnProperty(e.type)&&wh[e.type](e,t)}var vh={Feature:function(e,t){Qo(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Qo(n[r].geometry,t)}},wh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){kl(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)kl(n[r],t,0)},Polygon:function(e,t){_h(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_h(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Qo(n[r],t)}};function kl(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function _h(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)kl(e[n],t,1);t.polygonEnd()}function sr(e,t){e&&vh.hasOwnProperty(e.type)?vh[e.type](e,t):Qo(e,t)}function $l(e){return[Bn(e[1],e[0]),Rt(e[2])]}function ni(e){var t=e[0],n=e[1],r=me(n);return[r*me(t),r*ce(t),ce(n)]}function no(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ls(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ro(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Dl(e){var t=vt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Nl(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Bl(e,t){return Ce(e)>pe&&(e-=Math.round(e/St)*St),[e,t]}Bl.invert=Bl;function cm(e,t,n){return(e%=St)?t||n?Nl(xh(e),Ph(t,n)):xh(e):t||n?Ph(t,n):Bl}function Mh(e){return function(t,n){return t+=e,Ce(t)>pe&&(t-=Math.round(t/St)*St),[t,n]}}function xh(e){var t=Mh(e);return t.invert=Mh(-e),t}function Ph(e,t){var n=me(e),r=ce(e),i=me(t),a=ce(t);function o(u,s){var l=me(s),c=me(u)*l,f=ce(u)*l,h=ce(s),d=h*n+c*r;return[Bn(f*i-d*a,c*n-h*r),Rt(d*i+f*a)]}return o.invert=function(u,s){var l=me(s),c=me(u)*l,f=ce(u)*l,h=ce(s),d=h*i-f*a;return[Bn(f*i+h*a,c*n+d*r),Rt(d*n-c*r)]},o}function R5(e){e=cm(e[0]*Le,e[1]*Le,e.length>2?e[2]*Le:0);function t(n){return n=e(n[0]*Le,n[1]*Le),n[0]*=lt,n[1]*=lt,n}return t.invert=function(n){return n=e.invert(n[0]*Le,n[1]*Le),n[0]*=lt,n[1]*=lt,n},t}function O5(e,t,n,r,i,a){if(n){var o=me(t),u=ce(t),s=r*n;i==null?(i=t+r*St,a=t-s/2):(i=Ah(o,i),a=Ah(o,a),(r>0?i<a:i>a)&&(i+=r*St));for(var l,c=i;r>0?c>a:c<a;c-=s)l=$l([o,-u*me(c),-u*ce(c)]),e.point(l[0],l[1])}}function Ah(e,t){t=ni(t),t[0]-=e,Dl(t);var n=lm(-t[1]);return((-t[2]<0?-n:n)+St-he)%St}function fm(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Bt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function So(e,t){return Ce(e[0]-t[0])<he&&Ce(e[1]-t[1])<he}function io(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function hm(e,t,n,r,i){var a=[],o=[],u,s;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,g=m[0],y=m[p],b;if(So(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),u=0;u<p;++u)i.point((g=m[u])[0],g[1]);i.lineEnd();return}y[0]+=2*he}a.push(b=new io(g,m,null,!0)),o.push(b.o=new io(g,null,b,!1)),a.push(b=new io(y,m,null,!1)),o.push(b.o=new io(y,null,b,!0))}}),!!a.length){for(o.sort(t),Sh(a),Sh(o),u=0,s=o.length;u<s;++u)o[u].e=n=!n;for(var l=a[0],c,f;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Sh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Is(e){return Ce(e[0])<=pe?e[0]:Nt(e[0])*((Ce(e[0])+pe)%St-pe)}function q5(e,t){var n=Is(t),r=t[1],i=ce(r),a=[ce(n),-me(n),0],o=0,u=0,s=new br;i===1?r=Ie+he:i===-1&&(r=-Ie-he);for(var l=0,c=e.length;l<c;++l)if(h=(f=e[l]).length)for(var f,h,d=f[h-1],m=Is(d),p=d[1]/2+yh,g=ce(p),y=me(p),b=0;b<h;++b,m=v,g=M,y=x,d=w){var w=f[b],v=Is(w),_=w[1]/2+yh,M=ce(_),x=me(_),C=v-m,E=C>=0?1:-1,$=E*C,A=$>pe,L=g*M;if(s.add(Bn(L*E*ce($),y*x+L*me($))),o+=A?C+E*St:C,A^m>=n^v>=n){var O=Jo(ni(d),ni(w));Dl(O);var T=Jo(a,O);Dl(T);var S=(A^C>=0?-1:1)*Rt(T[2]);(r>S||r===S&&(O[0]||O[1]))&&(u+=A^C>=0?1:-1)}}return(o<-he||o<he&&s<-um)^u&1}function dm(e,t,n,r){return function(i){var a=t(i),o=fm(),u=t(o),s=!1,l,c,f,h={point:d,lineStart:p,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=b,h.lineEnd=w,c=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=p,h.lineEnd=g,c=w1(c);var v=q5(l,r);c.length?(s||(i.polygonStart(),s=!0),hm(c,z5,v,n,i)):v&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(v,_){e(v,_)&&i.point(v,_)}function m(v,_){a.point(v,_)}function p(){h.point=m,a.lineStart()}function g(){h.point=d,a.lineEnd()}function y(v,_){f.push([v,_]),u.point(v,_)}function b(){u.lineStart(),f=[]}function w(){y(f[0][0],f[0][1]),u.lineEnd();var v=u.clean(),_=o.result(),M,x=_.length,C,E,$;if(f.pop(),l.push(f),f=null,!!x){if(v&1){if(E=_[0],(C=E.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),M=0;M<C;++M)i.point(($=E[M])[0],$[1]);i.lineEnd()}return}x>1&&v&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(G5))}}return h}}function G5(e){return e.length>1}function z5(e,t){return((e=e.x)[0]<0?e[1]-Ie-he:Ie-e[1])-((t=t.x)[0]<0?t[1]-Ie-he:Ie-t[1])}const Eh=dm(function(){return!0},U5,W5,[-pe,-Ie]);function U5(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var u=a>0?pe:-pe,s=Ce(a-t);Ce(s-pe)<he?(e.point(t,n=(n+o)/2>0?Ie:-Ie),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(a,n),i=0):r!==u&&s>=pe&&(Ce(t-r)<he&&(t-=r*he),Ce(a-u)<he&&(a-=u*he),n=H5(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=a,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function H5(e,t,n,r){var i,a,o=ce(e-n);return Ce(o)>he?bi((ce(t)*(a=me(r))*ce(n)-ce(r)*(i=me(t))*ce(e))/(i*a*o)):(t+r)/2}function W5(e,t,n,r){var i;if(e==null)i=n*Ie,r.point(-pe,i),r.point(0,i),r.point(pe,i),r.point(pe,0),r.point(pe,-i),r.point(0,-i),r.point(-pe,-i),r.point(-pe,0),r.point(-pe,i);else if(Ce(e[0]-t[0])>he){var a=e[0]<t[0]?pe:-pe;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function V5(e){var t=me(e),n=6*Le,r=t>0,i=Ce(t)>he;function a(c,f,h,d){O5(d,e,n,h,c,f)}function o(c,f){return me(c)*me(f)>t}function u(c){var f,h,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(g,y){var b=[g,y],w,v=o(g,y),_=r?v?0:l(g,y):v?l(g+(g<0?pe:-pe),y):0;if(!f&&(m=d=v)&&c.lineStart(),v!==d&&(w=s(f,b),(!w||So(f,w)||So(b,w))&&(b[2]=1)),v!==d)p=0,v?(c.lineStart(),w=s(b,f),c.point(w[0],w[1])):(w=s(f,b),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^v){var M;!(_&h)&&(M=s(b,f,!0))&&(p=0,r?(c.lineStart(),c.point(M[0][0],M[0][1]),c.point(M[1][0],M[1][1]),c.lineEnd()):(c.point(M[1][0],M[1][1]),c.lineEnd(),c.lineStart(),c.point(M[0][0],M[0][1],3)))}v&&(!f||!So(f,b))&&c.point(b[0],b[1]),f=b,d=v,h=_},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return p|(m&&d)<<1}}}function s(c,f,h){var d=ni(c),m=ni(f),p=[1,0,0],g=Jo(d,m),y=no(g,g),b=g[0],w=y-b*b;if(!w)return!h&&c;var v=t*y/w,_=-t*b/w,M=Jo(p,g),x=ro(p,v),C=ro(g,_);Ls(x,C);var E=M,$=no(x,E),A=no(E,E),L=$*$-A*(no(x,x)-1);if(!(L<0)){var O=vt(L),T=ro(E,(-$-O)/A);if(Ls(T,x),T=$l(T),!h)return T;var S=c[0],I=f[0],ne=c[1],ee=f[1],K;I<S&&(K=S,S=I,I=K);var q=I-S,G=Ce(q-pe)<he,z=G||q<he;if(!G&&ee<ne&&(K=ne,ne=ee,ee=K),z?G?ne+ee>0^T[1]<(Ce(T[0]-S)<he?ne:ee):ne<=T[1]&&T[1]<=ee:q>pe^(S<=T[0]&&T[0]<=I)){var U=ro(E,(-$+O)/A);return Ls(U,x),[T,$l(U)]}}}function l(c,f){var h=r?e:pe-e,d=0;return c<-h?d|=1:c>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return dm(o,u,a,r?[0,-e]:[-pe,e-pe])}function Y5(e,t,n,r,i,a){var o=e[0],u=e[1],s=t[0],l=t[1],c=0,f=1,h=s-o,d=l-u,m;if(m=n-o,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=i-o,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}if(m=r-u,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=a-u,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=o+c*h,e[1]=u+c*d),f<1&&(t[0]=o+f*h,t[1]=u+f*d),!0}}}}}var Bi=1e9,ao=-Bi;function mm(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function a(l,c,f,h){var d=0,m=0;if(l==null||(d=o(l,f))!==(m=o(c,f))||s(l,c)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==m);else h.point(c[0],c[1])}function o(l,c){return Ce(l[0]-e)<he?c>0?0:3:Ce(l[0]-n)<he?c>0?2:1:Ce(l[1]-t)<he?c>0?1:0:c>0?3:2}function u(l,c){return s(l.x,c.x)}function s(l,c){var f=o(l,1),h=o(c,1);return f!==h?f-h:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=fm(),h,d,m,p,g,y,b,w,v,_,M,x={point:C,lineStart:L,lineEnd:O,polygonStart:$,polygonEnd:A};function C(S,I){i(S,I)&&c.point(S,I)}function E(){for(var S=0,I=0,ne=d.length;I<ne;++I)for(var ee=d[I],K=1,q=ee.length,G=ee[0],z,U,oe=G[0],ue=G[1];K<q;++K)z=oe,U=ue,G=ee[K],oe=G[0],ue=G[1],U<=r?ue>r&&(oe-z)*(r-U)>(ue-U)*(e-z)&&++S:ue<=r&&(oe-z)*(r-U)<(ue-U)*(e-z)&&--S;return S}function $(){c=f,h=[],d=[],M=!0}function A(){var S=E(),I=M&&S,ne=(h=w1(h)).length;(I||ne)&&(l.polygonStart(),I&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),ne&&hm(h,u,S,a,l),l.polygonEnd()),c=l,h=d=m=null}function L(){x.point=T,d&&d.push(m=[]),_=!0,v=!1,b=w=NaN}function O(){h&&(T(p,g),y&&v&&f.rejoin(),h.push(f.result())),x.point=C,v&&c.lineEnd()}function T(S,I){var ne=i(S,I);if(d&&m.push([S,I]),_)p=S,g=I,y=ne,_=!1,ne&&(c.lineStart(),c.point(S,I));else if(ne&&v)c.point(S,I);else{var ee=[b=Math.max(ao,Math.min(Bi,b)),w=Math.max(ao,Math.min(Bi,w))],K=[S=Math.max(ao,Math.min(Bi,S)),I=Math.max(ao,Math.min(Bi,I))];Y5(ee,K,e,t,n,r)?(v||(c.lineStart(),c.point(ee[0],ee[1])),c.point(K[0],K[1]),ne||c.lineEnd(),M=!1):ne&&(c.lineStart(),c.point(S,I),M=!1)}b=S,w=I,v=ne}return x}}const Fl=e=>e;var Rs=new br,Ll=new br,pm,bm,Il,Rl,Cn={point:Bt,lineStart:Bt,lineEnd:Bt,polygonStart:function(){Cn.lineStart=j5,Cn.lineEnd=Z5},polygonEnd:function(){Cn.lineStart=Cn.lineEnd=Cn.point=Bt,Rs.add(Ce(Ll)),Ll=new br},result:function(){var e=Rs/2;return Rs=new br,e}};function j5(){Cn.point=X5}function X5(e,t){Cn.point=gm,pm=Il=e,bm=Rl=t}function gm(e,t){Ll.add(Rl*e-Il*t),Il=e,Rl=t}function Z5(){gm(pm,bm)}var ri=1/0,eu=ri,aa=-ri,tu=aa,nu={point:K5,lineStart:Bt,lineEnd:Bt,polygonStart:Bt,polygonEnd:Bt,result:function(){var e=[[ri,eu],[aa,tu]];return aa=tu=-(eu=ri=1/0),e}};function K5(e,t){e<ri&&(ri=e),e>aa&&(aa=e),t<eu&&(eu=t),t>tu&&(tu=t)}var Ol=0,ql=0,Fi=0,ru=0,iu=0,qr=0,Gl=0,zl=0,Li=0,ym,vm,un,sn,$t={point:Mr,lineStart:Ch,lineEnd:Th,polygonStart:function(){$t.lineStart=e4,$t.lineEnd=t4},polygonEnd:function(){$t.point=Mr,$t.lineStart=Ch,$t.lineEnd=Th},result:function(){var e=Li?[Gl/Li,zl/Li]:qr?[ru/qr,iu/qr]:Fi?[Ol/Fi,ql/Fi]:[NaN,NaN];return Ol=ql=Fi=ru=iu=qr=Gl=zl=Li=0,e}};function Mr(e,t){Ol+=e,ql+=t,++Fi}function Ch(){$t.point=Q5}function Q5(e,t){$t.point=J5,Mr(un=e,sn=t)}function J5(e,t){var n=e-un,r=t-sn,i=vt(n*n+r*r);ru+=i*(un+e)/2,iu+=i*(sn+t)/2,qr+=i,Mr(un=e,sn=t)}function Th(){$t.point=Mr}function e4(){$t.point=n4}function t4(){wm(ym,vm)}function n4(e,t){$t.point=wm,Mr(ym=un=e,vm=sn=t)}function wm(e,t){var n=e-un,r=t-sn,i=vt(n*n+r*r);ru+=i*(un+e)/2,iu+=i*(sn+t)/2,qr+=i,i=sn*e-un*t,Gl+=i*(un+e),zl+=i*(sn+t),Li+=i*3,Mr(un=e,sn=t)}function _m(e){this._context=e}_m.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,St);break}}},result:Bt};var Ul=new br,Os,Mm,xm,Ii,Ri,oa={point:Bt,lineStart:function(){oa.point=r4},lineEnd:function(){Os&&Pm(Mm,xm),oa.point=Bt},polygonStart:function(){Os=!0},polygonEnd:function(){Os=null},result:function(){var e=+Ul;return Ul=new br,e}};function r4(e,t){oa.point=Pm,Mm=Ii=e,xm=Ri=t}function Pm(e,t){Ii-=e,Ri-=t,Ul.add(vt(Ii*Ii+Ri*Ri)),Ii=e,Ri=t}let kh,au,$h,Dh;class Nh{constructor(t){this._append=t==null?Am:i4(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==$h||this._append!==au){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,$h=r,au=this._append,Dh=this._,this._=i}this._+=Dh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Am(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function i4(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Am;if(t!==kh){const n=10**t;kh=t,au=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return au}function zu(e,t){let n=3,r=4.5,i,a;function o(u){return u&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),sr(u,i(a))),a.result()}return o.area=function(u){return sr(u,i(Cn)),Cn.result()},o.measure=function(u){return sr(u,i(oa)),oa.result()},o.bounds=function(u){return sr(u,i(nu)),nu.result()},o.centroid=function(u){return sr(u,i($t)),$t.result()},o.projection=function(u){return arguments.length?(i=u==null?(e=null,Fl):(e=u).stream,o):e},o.context=function(u){return arguments.length?(a=u==null?(t=null,new Nh(n)):new _m(t=u),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(a.pointRadius(+u),+u),o):r},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const s=Math.floor(u);if(!(s>=0))throw new RangeError(`invalid digits: ${u}`);n=s}return t===null&&(a=new Nh(n)),o},o.projection(e).digits(n).context(t)}function Hl(e){return{stream:Uu(e)}}function Uu(e){return function(t){var n=new Wl;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Wl(){}Wl.prototype={constructor:Wl,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Rc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),sr(n,e.stream(nu)),t(nu.result()),r!=null&&e.clipExtent(r),e}function Oc(e,t,n){return Rc(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([u,s])},n)}function Sm(e,t,n){return Oc(e,[[0,0],t],n)}function Em(e,t,n){return Rc(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,u=-a*r[0][1];e.scale(150*a).translate([o,u])},n)}function Cm(e,t,n){return Rc(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],u=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,u])},n)}var Bh=16,a4=me(30*Le);function Fh(e,t){return+t?u4(e,t):o4(e)}function o4(e){return Uu({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function u4(e,t){function n(r,i,a,o,u,s,l,c,f,h,d,m,p,g){var y=l-r,b=c-i,w=y*y+b*b;if(w>4*t&&p--){var v=o+h,_=u+d,M=s+m,x=vt(v*v+_*_+M*M),C=Rt(M/=x),E=Ce(Ce(M)-1)<he||Ce(a-f)<he?(a+f)/2:Bn(_,v),$=e(E,C),A=$[0],L=$[1],O=A-r,T=L-i,S=b*O-y*T;(S*S/w>t||Ce((y*O+b*T)/w-.5)>.3||o*h+u*d+s*m<a4)&&(n(r,i,a,o,u,s,A,L,E,v/=x,_/=x,M,p,g),g.point(A,L),n(A,L,E,v,_,M,l,c,f,h,d,m,p,g))}}return function(r){var i,a,o,u,s,l,c,f,h,d,m,p,g={point:y,lineStart:b,lineEnd:v,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(C,E){C=e(C,E),r.point(C[0],C[1])}function b(){f=NaN,g.point=w,r.lineStart()}function w(C,E){var $=ni([C,E]),A=e(C,E);n(f,h,c,d,m,p,f=A[0],h=A[1],c=C,d=$[0],m=$[1],p=$[2],Bh,r),r.point(f,h)}function v(){g.point=y,r.lineEnd()}function _(){b(),g.point=M,g.lineEnd=x}function M(C,E){w(i=C,E),a=f,o=h,u=d,s=m,l=p,g.point=w}function x(){n(f,h,c,d,m,p,a,o,i,u,s,l,Bh,r),g.lineEnd=v,v()}return g}}var s4=Uu({point:function(e,t){this.stream.point(e*Le,t*Le)}});function l4(e){return Uu({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function c4(e,t,n,r,i){function a(o,u){return o*=r,u*=i,[t+e*o,n-e*u]}return a.invert=function(o,u){return[(o-t)/e*r,(n-u)/e*i]},a}function Lh(e,t,n,r,i,a){if(!a)return c4(e,t,n,r,i);var o=me(a),u=ce(a),s=o*e,l=u*e,c=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function m(p,g){return p*=r,g*=i,[s*p-l*g+t,n-l*p-s*g]}return m.invert=function(p,g){return[r*(c*p-f*g+h),i*(d-f*p-c*g)]},m}function er(e){return Tm(function(){return e})()}function Tm(e){var t,n=150,r=480,i=250,a=0,o=0,u=0,s=0,l=0,c,f=0,h=1,d=1,m=null,p=Eh,g=null,y,b,w,v=Fl,_=.5,M,x,C,E,$;function A(S){return C(S[0]*Le,S[1]*Le)}function L(S){return S=C.invert(S[0],S[1]),S&&[S[0]*lt,S[1]*lt]}A.stream=function(S){return E&&$===S?E:E=s4(l4(c)(p(M(v($=S)))))},A.preclip=function(S){return arguments.length?(p=S,m=void 0,T()):p},A.postclip=function(S){return arguments.length?(v=S,g=y=b=w=null,T()):v},A.clipAngle=function(S){return arguments.length?(p=+S?V5(m=S*Le):(m=null,Eh),T()):m*lt},A.clipExtent=function(S){return arguments.length?(v=S==null?(g=y=b=w=null,Fl):mm(g=+S[0][0],y=+S[0][1],b=+S[1][0],w=+S[1][1]),T()):g==null?null:[[g,y],[b,w]]},A.scale=function(S){return arguments.length?(n=+S,O()):n},A.translate=function(S){return arguments.length?(r=+S[0],i=+S[1],O()):[r,i]},A.center=function(S){return arguments.length?(a=S[0]%360*Le,o=S[1]%360*Le,O()):[a*lt,o*lt]},A.rotate=function(S){return arguments.length?(u=S[0]%360*Le,s=S[1]%360*Le,l=S.length>2?S[2]%360*Le:0,O()):[u*lt,s*lt,l*lt]},A.angle=function(S){return arguments.length?(f=S%360*Le,O()):f*lt},A.reflectX=function(S){return arguments.length?(h=S?-1:1,O()):h<0},A.reflectY=function(S){return arguments.length?(d=S?-1:1,O()):d<0},A.precision=function(S){return arguments.length?(M=Fh(x,_=S*S),T()):vt(_)},A.fitExtent=function(S,I){return Oc(A,S,I)},A.fitSize=function(S,I){return Sm(A,S,I)},A.fitWidth=function(S,I){return Em(A,S,I)},A.fitHeight=function(S,I){return Cm(A,S,I)};function O(){var S=Lh(n,0,0,h,d,f).apply(null,t(a,o)),I=Lh(n,r-S[0],i-S[1],h,d,f);return c=cm(u,s,l),x=Nl(t,I),C=Nl(c,x),M=Fh(x,_),T()}function T(){return E=$=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&L,O()}}function qc(e){var t=0,n=pe/3,r=Tm(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Le,n=a[1]*Le):[t*lt,n*lt]},i}function f4(e){var t=me(e);function n(r,i){return[r*t,ce(i)/t]}return n.invert=function(r,i){return[r/t,Rt(i*t)]},n}function h4(e,t){var n=ce(e),r=(n+ce(t))/2;if(Ce(r)<he)return f4(e);var i=1+n*(2*r-n),a=vt(i)/r;function o(u,s){var l=vt(i-2*r*ce(s))/r;return[l*ce(u*=r),a-l*me(u)]}return o.invert=function(u,s){var l=a-s,c=Bn(u,Ce(l))*Nt(l);return l*r<0&&(c-=pe*Nt(u)*Nt(l)),[c/r,Rt((i-(u*u+l*l)*r*r)/(2*r))]},o}function ou(){return qc(h4).scale(155.424).center([0,33.6442])}function km(){return ou().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function d4(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function m4(){var e,t,n=km(),r,i=ou().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=ou().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,s,l={point:function(h,d){s=[h,d]}};function c(h){var d=h[0],m=h[1];return s=null,r.point(d,m),s||(a.point(d,m),s)||(u.point(d,m),s)}c.invert=function(h){var d=n.scale(),m=n.translate(),p=(h[0]-m[0])/d,g=(h[1]-m[1])/d;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?o:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=d4([n.stream(t=h),i.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),f()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),m=+h[0],p=+h[1];return r=n.translate(h).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(l),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+he,p+.12*d+he],[m-.214*d-he,p+.234*d-he]]).stream(l),u=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+he,p+.166*d+he],[m-.115*d-he,p+.234*d-he]]).stream(l),f()},c.fitExtent=function(h,d){return Oc(c,h,d)},c.fitSize=function(h,d){return Sm(c,h,d)},c.fitWidth=function(h,d){return Em(c,h,d)},c.fitHeight=function(h,d){return Cm(c,h,d)};function f(){return e=t=null,c}return c.scale(1070)}function $m(e){return function(t,n){var r=me(t),i=me(n),a=e(r*i);return a===1/0?[2,0]:[a*i*ce(t),a*ce(n)]}}function Aa(e){return function(t,n){var r=vt(t*t+n*n),i=e(r),a=ce(i),o=me(i);return[Bn(t*a,r*o),Rt(r&&n*a/r)]}}var Dm=$m(function(e){return vt(2/(1+e))});Dm.invert=Aa(function(e){return 2*Rt(e/2)});function p4(){return er(Dm).scale(124.75).clipAngle(180-.001)}var Nm=$m(function(e){return(e=lm(e))&&e/ce(e)});Nm.invert=Aa(function(e){return e});function b4(){return er(Nm).scale(79.4188).clipAngle(180-.001)}function Hu(e,t){return[e,Ko(Ic((Ie+t)/2))]}Hu.invert=function(e,t){return[e,2*bi(sm(t))-Ie]};function g4(){return Bm(Hu).scale(961/St)}function Bm(e){var t=er(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,u,s,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=u=s=l=null:(o=+f[0][0],u=+f[0][1],s=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,u],[s,l]]};function c(){var f=pe*r(),h=t(R5(t.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Hu?[[Math.max(h[0]-f,o),u],[Math.min(h[0]+f,s),l]]:[[o,Math.max(h[1]-f,u)],[s,Math.min(h[1]+f,l)]])}return c()}function oo(e){return Ic((Ie+e)/2)}function y4(e,t){var n=me(e),r=e===t?ce(e):Ko(n/me(t))/Ko(oo(t)/oo(e)),i=n*Fs(oo(e),r)/r;if(!r)return Hu;function a(o,u){i>0?u<-Ie+he&&(u=-Ie+he):u>Ie-he&&(u=Ie-he);var s=i/Fs(oo(u),r);return[s*ce(r*o),i-s*me(r*o)]}return a.invert=function(o,u){var s=i-u,l=Nt(r)*vt(o*o+s*s),c=Bn(o,Ce(s))*Nt(s);return s*r<0&&(c-=pe*Nt(o)*Nt(s)),[c/r,2*bi(Fs(i/l,1/r))-Ie]},a}function v4(){return qc(y4).scale(109.5).parallels([30,30])}function uu(e,t){return[e,t]}uu.invert=uu;function w4(){return er(uu).scale(152.63)}function _4(e,t){var n=me(e),r=e===t?ce(e):(n-me(t))/(t-e),i=n/r+e;if(Ce(r)<he)return uu;function a(o,u){var s=i-u,l=r*o;return[s*ce(l),i-s*me(l)]}return a.invert=function(o,u){var s=i-u,l=Bn(o,Ce(s))*Nt(s);return s*r<0&&(l-=pe*Nt(o)*Nt(s)),[l/r,i-Nt(r)*vt(o*o+s*s)]},a}function M4(){return qc(_4).scale(131.154).center([0,13.9389])}var Vi=1.340264,Yi=-.081106,ji=893e-6,Xi=.003796,su=vt(3)/2,x4=12;function Fm(e,t){var n=Rt(su*ce(t)),r=n*n,i=r*r*r;return[e*me(n)/(su*(Vi+3*Yi*r+i*(7*ji+9*Xi*r))),n*(Vi+Yi*r+i*(ji+Xi*r))]}Fm.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,u,s;a<x4&&(u=n*(Vi+Yi*r+i*(ji+Xi*r))-t,s=Vi+3*Yi*r+i*(7*ji+9*Xi*r),n-=o=u/s,r=n*n,i=r*r*r,!(Ce(o)<um));++a);return[su*e*(Vi+3*Yi*r+i*(7*ji+9*Xi*r))/me(n),Rt(ce(n)/su)]};function P4(){return er(Fm).scale(177.158)}function Lm(e,t){var n=me(t),r=me(e)*n;return[n*ce(e)/r,ce(t)/r]}Lm.invert=Aa(bi);function A4(){return er(Lm).scale(144.049).clipAngle(60)}function Im(e,t){return[me(t)*ce(e),ce(t)]}Im.invert=Aa(Rt);function S4(){return er(Im).scale(249.5).clipAngle(90+he)}function Rm(e,t){var n=me(t),r=1+me(e)*n;return[n*ce(e)/r,ce(t)/r]}Rm.invert=Aa(function(e){return 2*bi(e)});function E4(){return er(Rm).scale(250).clipAngle(142)}function Om(e,t){return[Ko(Ic((Ie+t)/2)),-e]}Om.invert=function(e,t){return[-t,2*bi(sm(e))-Ie]};function C4(){var e=Bm(Om),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function vn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Wu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Vl=Symbol("implicit");function Gc(){var e=new gr,t=[],n=[],r=Vl;function i(a){let o=e.get(a);if(o===void 0){if(r!==Vl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new gr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Gc(t,n).unknown(r)},vn.apply(i,arguments),i}function Vu(){var e=Gc().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,u=!1,s=0,l=0,c=.5;delete e.unknown;function f(){var h=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,h-s+l*2),u&&(a=Math.floor(a)),m+=(p-m-a*(h-s))*c,o=a*(1-s),u&&(m=Math.round(m),o=Math.round(o));var g=gl(h).map(function(y){return m+a*y});return n(d?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(u=!!h,f()):u},e.padding=function(h){return arguments.length?(s=Math.min(1,l=+h),f()):s},e.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return Vu(t(),[r,i]).round(u).paddingInner(s).paddingOuter(l).align(c)},vn.apply(f(),arguments)}function qm(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return qm(t())},e}function T4(){return qm(Vu.apply(null,arguments).paddingInner(1))}function k4(e){return function(){return e}}function Yl(e){return+e}var Ih=[0,1];function Ft(e){return e}function jl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:k4(isNaN(t)?NaN:.5)}function $4(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function D4(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=jl(i,r),a=n(o,a)):(r=jl(r,i),a=n(a,o)),function(u){return a(r(u))}}function N4(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=jl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var s=Tu(e,u,1,r)-1;return a[s](i[s](u))}}function Sa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yu(){var e=Ih,t=Ih,n=Pa,r,i,a,o=Ft,u,s,l;function c(){var h=Math.min(e.length,t.length);return o!==Ft&&(o=$4(e[0],e[h-1])),u=h>2?N4:D4,s=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(s||(s=u(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=u(t,e.map(r),at)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Yl),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=$c,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Ft,c()):o!==Ft},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Gm(){return Yu()(Ft,Ft)}function B4(e,t,n,r){var i=pl(e,t,n),a;switch(r=ia(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=L5(i,o))&&(r.precision=a),om(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=I5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=F5(i))&&(r.precision=a-(r.type==="%")*2);break}}return pi(r)}function Ea(e){var t=e.domain;return e.ticks=function(n){var r=t();return ea(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return B4(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],u=r[a],s,l,c=10;for(u<o&&(l=o,o=u,u=l,l=i,i=a,a=l);c-- >0;){if(l=zo(o,u,n),l===s)return r[i]=o,r[a]=u,t(r);if(l>0)o=Math.floor(o/l)*l,u=Math.ceil(u/l)*l;else if(l<0)o=Math.ceil(o*l)/l,u=Math.floor(u*l)/l;else break;s=l}return e},e}function zc(){var e=Gm();return e.copy=function(){return Sa(e,zc())},vn.apply(e,arguments),Ea(e)}function zm(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Yl),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return zm(e).unknown(t)},e=arguments.length?Array.from(e,Yl):[0,1],Ea(n)}function Um(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Rh(e){return Math.log(e)}function Oh(e){return Math.exp(e)}function F4(e){return-Math.log(-e)}function L4(e){return-Math.exp(-e)}function I4(e){return isFinite(e)?+("1e"+e):e<0?0:e}function R4(e){return e===10?I4:e===Math.E?Math.exp:t=>Math.pow(e,t)}function O4(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function qh(e){return(t,n)=>-e(-t,n)}function Hm(e){const t=e(Rh,Oh),n=t.domain;let r=10,i,a;function o(){return i=O4(r),a=R4(r),n()[0]<0?(i=qh(i),a=qh(a),e(F4,L4)):e(Rh,Oh),t}return t.base=function(u){return arguments.length?(r=+u,o()):r},t.domain=function(u){return arguments.length?(n(u),o()):n()},t.ticks=u=>{const s=n();let l=s[0],c=s[s.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),m,p;const g=u==null?10:+u;let y=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(m=1;m<r;++m)if(p=h<0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;y.push(p)}}else for(;h<=d;++h)for(m=r-1;m>=1;--m)if(p=h>0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;y.push(p)}y.length*2<g&&(y=ea(l,c,g))}else y=ea(h,d,Math.min(d-h,g)).map(a);return f?y.reverse():y},t.tickFormat=(u,s)=>{if(u==null&&(u=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=ia(s)).precision==null&&(s.trim=!0),s=pi(s)),u===1/0)return s;const l=Math.max(1,r*u/t.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?s(c):""}},t.nice=()=>n(Um(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function Wm(){const e=Hm(Yu()).domain([1,10]);return e.copy=()=>Sa(e,Wm()).base(e.base()),vn.apply(e,arguments),e}function Gh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Vm(e){var t=1,n=e(Gh(t),zh(t));return n.constant=function(r){return arguments.length?e(Gh(t=+r),zh(t)):t},Ea(n)}function Ym(){var e=Vm(Yu());return e.copy=function(){return Sa(e,Ym()).constant(e.constant())},vn.apply(e,arguments)}function Uh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function q4(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function G4(e){return e<0?-e*e:e*e}function jm(e){var t=e(Ft,Ft),n=1;function r(){return n===1?e(Ft,Ft):n===.5?e(q4,G4):e(Uh(n),Uh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ea(t)}function Xm(){var e=jm(Yu());return e.copy=function(){return Sa(e,Xm()).exponent(e.exponent())},vn.apply(e,arguments),e}function Zm(){var e=[],t=[],n=[],r;function i(){var o=0,u=Math.max(1,t.length);for(n=new Array(u-1);++o<u;)n[o-1]=T3(e,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Tu(n,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(yt),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Zm().domain(e).range(t).unknown(r)},vn.apply(a,arguments)}function Km(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Tu(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Km().domain(e).range(t).unknown(n)},vn.apply(i,arguments)}const qs=new Date,Gs=new Date;function Ue(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const s=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return s;let l;do s.push(l=new Date(+a)),t(a,u),e(a);while(l<a&&a<o);return s},i.filter=a=>Ue(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(qs.setTime(+a),Gs.setTime(+o),e(qs),e(Gs),Math.floor(n(qs,Gs))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const lu=Ue(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ue(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):lu);lu.range;const kn=1e3,Lt=kn*60,$n=Lt*60,Fn=$n*24,Uc=Fn*7,Hh=Fn*30,zs=Fn*365,Yt=Ue(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*kn)},(e,t)=>(t-e)/kn,e=>e.getUTCSeconds());Yt.range;const Ca=Ue(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kn)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getMinutes());Ca.range;const Ta=Ue(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getUTCMinutes());Ta.range;const ka=Ue(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kn-e.getMinutes()*Lt)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getHours());ka.range;const $a=Ue(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getUTCHours());$a.range;const Er=Ue(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lt)/Fn,e=>e.getDate()-1);Er.range;const ju=Ue(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>e.getUTCDate()-1);ju.range;const Xu=Ue(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>Math.floor(e/Fn));Xu.range;function Cr(e){return Ue(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Lt)/Uc)}const ii=Cr(0),ua=Cr(1),Qm=Cr(2),Jm=Cr(3),xr=Cr(4),ep=Cr(5),tp=Cr(6);ii.range;ua.range;Qm.range;Jm.range;xr.range;ep.range;tp.range;function Tr(e){return Ue(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Uc)}const ai=Tr(0),sa=Tr(1),np=Tr(2),rp=Tr(3),Pr=Tr(4),ip=Tr(5),ap=Tr(6);ai.range;sa.range;np.range;rp.range;Pr.range;ip.range;ap.range;const Da=Ue(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Da.range;const Na=Ue(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Na.range;const Kt=Ue(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Kt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ue(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Kt.range;const Qt=Ue(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Qt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ue(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Qt.range;function op(e,t,n,r,i,a){const o=[[Yt,1,kn],[Yt,5,5*kn],[Yt,15,15*kn],[Yt,30,30*kn],[a,1,Lt],[a,5,5*Lt],[a,15,15*Lt],[a,30,30*Lt],[i,1,$n],[i,3,3*$n],[i,6,6*$n],[i,12,12*$n],[r,1,Fn],[r,2,2*Fn],[n,1,Uc],[t,1,Hh],[t,3,3*Hh],[e,1,zs]];function u(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:s(l,c,f),m=d?d.range(l,+c+1):[];return h?m.reverse():m}function s(l,c,f){const h=Math.abs(c-l)/f,d=Cu(([,,g])=>g).right(o,h);if(d===o.length)return e.every(pl(l/zs,c/zs,f));if(d===0)return lu.every(Math.max(pl(l,c,f),1));const[m,p]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return m.every(p)}return[u,s]}const[z4,up]=op(Qt,Na,ai,Xu,$a,Ta),[U4,H4]=op(Kt,Da,ii,Er,ka,Ca);function Us(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Hs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xi(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function W4(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,l=Pi(i),c=Ai(i),f=Pi(a),h=Ai(a),d=Pi(o),m=Ai(o),p=Pi(u),g=Ai(u),y=Pi(s),b=Ai(s),w={a:ne,A:ee,b:K,B:q,c:null,d:Zh,e:Zh,f:m6,g:P6,G:S6,H:f6,I:h6,j:d6,L:sp,m:p6,M:b6,p:G,q:z,Q:Jh,s:ed,S:g6,u:y6,U:v6,V:w6,w:_6,W:M6,x:null,X:null,y:x6,Y:A6,Z:E6,"%":Qh},v={a:U,A:oe,b:ue,B:ie,c:null,d:Kh,e:Kh,f:$6,g:G6,G:U6,H:C6,I:T6,j:k6,L:cp,m:D6,M:N6,p:V,q:Y,Q:Jh,s:ed,S:B6,u:F6,U:L6,V:I6,w:R6,W:O6,x:null,X:null,y:q6,Y:z6,Z:H6,"%":Qh},_={a:$,A,b:L,B:O,c:T,d:jh,e:jh,f:u6,g:Yh,G:Vh,H:Xh,I:Xh,j:r6,L:o6,m:n6,M:i6,p:E,q:t6,Q:l6,s:c6,S:a6,u:Z4,U:K4,V:Q4,w:X4,W:J4,x:S,X:I,y:Yh,Y:Vh,Z:e6,"%":s6};w.x=M(n,w),w.X=M(r,w),w.c=M(t,w),v.x=M(n,v),v.X=M(r,v),v.c=M(t,v);function M(N,H){return function(j){var D=[],be=-1,J=0,fe=N.length,_e,Oe,tt;for(j instanceof Date||(j=new Date(+j));++be<fe;)N.charCodeAt(be)===37&&(D.push(N.slice(J,be)),(Oe=Wh[_e=N.charAt(++be)])!=null?_e=N.charAt(++be):Oe=_e==="e"?" ":"0",(tt=H[_e])&&(_e=tt(j,Oe)),D.push(_e),J=be+1);return D.push(N.slice(J,be)),D.join("")}}function x(N,H){return function(j){var D=xi(1900,void 0,1),be=C(D,N,j+="",0),J,fe;if(be!=j.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(H&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(J=Hs(xi(D.y,0,1)),fe=J.getUTCDay(),J=fe>4||fe===0?sa.ceil(J):sa(J),J=ju.offset(J,(D.V-1)*7),D.y=J.getUTCFullYear(),D.m=J.getUTCMonth(),D.d=J.getUTCDate()+(D.w+6)%7):(J=Us(xi(D.y,0,1)),fe=J.getDay(),J=fe>4||fe===0?ua.ceil(J):ua(J),J=Er.offset(J,(D.V-1)*7),D.y=J.getFullYear(),D.m=J.getMonth(),D.d=J.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),fe="Z"in D?Hs(xi(D.y,0,1)).getUTCDay():Us(xi(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(fe+5)%7:D.w+D.U*7-(fe+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,Hs(D)):Us(D)}}function C(N,H,j,D){for(var be=0,J=H.length,fe=j.length,_e,Oe;be<J;){if(D>=fe)return-1;if(_e=H.charCodeAt(be++),_e===37){if(_e=H.charAt(be++),Oe=_[_e in Wh?H.charAt(be++):_e],!Oe||(D=Oe(N,j,D))<0)return-1}else if(_e!=j.charCodeAt(D++))return-1}return D}function E(N,H,j){var D=l.exec(H.slice(j));return D?(N.p=c.get(D[0].toLowerCase()),j+D[0].length):-1}function $(N,H,j){var D=d.exec(H.slice(j));return D?(N.w=m.get(D[0].toLowerCase()),j+D[0].length):-1}function A(N,H,j){var D=f.exec(H.slice(j));return D?(N.w=h.get(D[0].toLowerCase()),j+D[0].length):-1}function L(N,H,j){var D=y.exec(H.slice(j));return D?(N.m=b.get(D[0].toLowerCase()),j+D[0].length):-1}function O(N,H,j){var D=p.exec(H.slice(j));return D?(N.m=g.get(D[0].toLowerCase()),j+D[0].length):-1}function T(N,H,j){return C(N,t,H,j)}function S(N,H,j){return C(N,n,H,j)}function I(N,H,j){return C(N,r,H,j)}function ne(N){return o[N.getDay()]}function ee(N){return a[N.getDay()]}function K(N){return s[N.getMonth()]}function q(N){return u[N.getMonth()]}function G(N){return i[+(N.getHours()>=12)]}function z(N){return 1+~~(N.getMonth()/3)}function U(N){return o[N.getUTCDay()]}function oe(N){return a[N.getUTCDay()]}function ue(N){return s[N.getUTCMonth()]}function ie(N){return u[N.getUTCMonth()]}function V(N){return i[+(N.getUTCHours()>=12)]}function Y(N){return 1+~~(N.getUTCMonth()/3)}return{format:function(N){var H=M(N+="",w);return H.toString=function(){return N},H},parse:function(N){var H=x(N+="",!1);return H.toString=function(){return N},H},utcFormat:function(N){var H=M(N+="",v);return H.toString=function(){return N},H},utcParse:function(N){var H=x(N+="",!0);return H.toString=function(){return N},H}}}var Wh={"-":"",_:" ",0:"0"},et=/^\s*\d+/,V4=/^%/,Y4=/[\\^$*+?|[\]().{}]/g;function xe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function j4(e){return e.replace(Y4,"\\$&")}function Pi(e){return new RegExp("^(?:"+e.map(j4).join("|")+")","i")}function Ai(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function X4(e,t,n){var r=et.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Z4(e,t,n){var r=et.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function K4(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Q4(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function J4(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Vh(e,t,n){var r=et.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yh(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function e6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function t6(e,t,n){var r=et.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function n6(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function jh(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function r6(e,t,n){var r=et.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Xh(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function i6(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function a6(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function o6(e,t,n){var r=et.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function u6(e,t,n){var r=et.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function s6(e,t,n){var r=V4.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function l6(e,t,n){var r=et.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function c6(e,t,n){var r=et.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Zh(e,t){return xe(e.getDate(),t,2)}function f6(e,t){return xe(e.getHours(),t,2)}function h6(e,t){return xe(e.getHours()%12||12,t,2)}function d6(e,t){return xe(1+Er.count(Kt(e),e),t,3)}function sp(e,t){return xe(e.getMilliseconds(),t,3)}function m6(e,t){return sp(e,t)+"000"}function p6(e,t){return xe(e.getMonth()+1,t,2)}function b6(e,t){return xe(e.getMinutes(),t,2)}function g6(e,t){return xe(e.getSeconds(),t,2)}function y6(e){var t=e.getDay();return t===0?7:t}function v6(e,t){return xe(ii.count(Kt(e)-1,e),t,2)}function lp(e){var t=e.getDay();return t>=4||t===0?xr(e):xr.ceil(e)}function w6(e,t){return e=lp(e),xe(xr.count(Kt(e),e)+(Kt(e).getDay()===4),t,2)}function _6(e){return e.getDay()}function M6(e,t){return xe(ua.count(Kt(e)-1,e),t,2)}function x6(e,t){return xe(e.getFullYear()%100,t,2)}function P6(e,t){return e=lp(e),xe(e.getFullYear()%100,t,2)}function A6(e,t){return xe(e.getFullYear()%1e4,t,4)}function S6(e,t){var n=e.getDay();return e=n>=4||n===0?xr(e):xr.ceil(e),xe(e.getFullYear()%1e4,t,4)}function E6(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xe(t/60|0,"0",2)+xe(t%60,"0",2)}function Kh(e,t){return xe(e.getUTCDate(),t,2)}function C6(e,t){return xe(e.getUTCHours(),t,2)}function T6(e,t){return xe(e.getUTCHours()%12||12,t,2)}function k6(e,t){return xe(1+ju.count(Qt(e),e),t,3)}function cp(e,t){return xe(e.getUTCMilliseconds(),t,3)}function $6(e,t){return cp(e,t)+"000"}function D6(e,t){return xe(e.getUTCMonth()+1,t,2)}function N6(e,t){return xe(e.getUTCMinutes(),t,2)}function B6(e,t){return xe(e.getUTCSeconds(),t,2)}function F6(e){var t=e.getUTCDay();return t===0?7:t}function L6(e,t){return xe(ai.count(Qt(e)-1,e),t,2)}function fp(e){var t=e.getUTCDay();return t>=4||t===0?Pr(e):Pr.ceil(e)}function I6(e,t){return e=fp(e),xe(Pr.count(Qt(e),e)+(Qt(e).getUTCDay()===4),t,2)}function R6(e){return e.getUTCDay()}function O6(e,t){return xe(sa.count(Qt(e)-1,e),t,2)}function q6(e,t){return xe(e.getUTCFullYear()%100,t,2)}function G6(e,t){return e=fp(e),xe(e.getUTCFullYear()%100,t,2)}function z6(e,t){return xe(e.getUTCFullYear()%1e4,t,4)}function U6(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pr(e):Pr.ceil(e),xe(e.getUTCFullYear()%1e4,t,4)}function H6(){return"+0000"}function Qh(){return"%"}function Jh(e){return+e}function ed(e){return Math.floor(+e/1e3)}var Br,Hc,Ba;W6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function W6(e){return Br=W4(e),Hc=Br.format,Br.parse,Ba=Br.utcFormat,Br.utcParse,Br}function V6(e){return new Date(e)}function Y6(e){return e instanceof Date?+e:+new Date(+e)}function Wc(e,t,n,r,i,a,o,u,s,l){var c=Gm(),f=c.invert,h=c.domain,d=l(".%L"),m=l(":%S"),p=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),w=l("%B"),v=l("%Y");function _(M){return(s(M)<M?d:u(M)<M?m:o(M)<M?p:a(M)<M?g:r(M)<M?i(M)<M?y:b:n(M)<M?w:v)(M)}return c.invert=function(M){return new Date(f(M))},c.domain=function(M){return arguments.length?h(Array.from(M,Y6)):h().map(V6)},c.ticks=function(M){var x=h();return e(x[0],x[x.length-1],M??10)},c.tickFormat=function(M,x){return x==null?_:l(x)},c.nice=function(M){var x=h();return(!M||typeof M.range!="function")&&(M=t(x[0],x[x.length-1],M??10)),M?h(Um(x,M)):c},c.copy=function(){return Sa(c,Wc(e,t,n,r,i,a,o,u,s,l))},c}function j6(){return vn.apply(Wc(U4,H4,Kt,Da,ii,Er,ka,Ca,Yt,Hc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function X6(){return vn.apply(Wc(z4,up,Qt,Na,ai,ju,$a,Ta,Yt,Ba).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ku(){var e=0,t=.5,n=1,r=1,i,a,o,u,s,l=Ft,c,f=!1,h;function d(p){return isNaN(p=+p)?h:(p=.5+((p=+c(p))-a)*(r*p<r*a?u:s),l(f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),a=c(t=+t),o=c(n=+n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(l=p,d):l};function m(p){return function(g){var y,b,w;return arguments.length?([y,b,w]=g,l=Ou(p,[y,b,w]),d):[l(0),l(.5),l(1)]}}return d.range=m(Pa),d.rangeRound=m($c),d.unknown=function(p){return arguments.length?(h=p,d):h},function(p){return c=p,i=p(e),a=p(t),o=p(n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function hp(){var e=Ea(Ku()(Ft));return e.copy=function(){return Zu(e,hp())},Wu.apply(e,arguments)}function dp(){var e=Hm(Ku()).domain([.1,1,10]);return e.copy=function(){return Zu(e,dp()).base(e.base())},Wu.apply(e,arguments)}function mp(){var e=Vm(Ku());return e.copy=function(){return Zu(e,mp()).constant(e.constant())},Wu.apply(e,arguments)}function pp(){var e=jm(Ku());return e.copy=function(){return Zu(e,pp()).exponent(e.exponent())},Wu.apply(e,arguments)}function de(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Z6=de("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),K6=de("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Q6=de("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),J6=de("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),e7=de("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),t7=de("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),n7=de("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),r7=de("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),i7=de("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),a7=de("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),$e=e=>Hw(e[e.length-1]);var bp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(de);const gp=$e(bp);var yp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(de);const vp=$e(yp);var wp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(de);const _p=$e(wp);var Mp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(de);const xp=$e(Mp);var Xl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(de);const cu=$e(Xl);var Pp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(de);const Ap=$e(Pp);var Zl=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(de);const fu=$e(Zl);var Sp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(de);const Ep=$e(Sp);var Cp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(de);const Tp=$e(Cp);var kp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(de);const $p=$e(kp);var Dp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(de);const Np=$e(Dp);var Bp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(de);const Fp=$e(Bp);var Lp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(de);const Ip=$e(Lp);var Rp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(de);const Op=$e(Rp);var qp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(de);const Gp=$e(qp);var zp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(de);const Up=$e(zp);var Hp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(de);const Wp=$e(Hp);var Vp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(de);const Yp=$e(Vp);var jp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(de);const Xp=$e(jp);var Zp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(de);const Kp=$e(Zp);var Qp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(de);const Jp=$e(Qp);var eb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(de);const tb=$e(eb);var nb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(de);const rb=$e(nb);var ib=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(de);const ab=$e(ib);var ob=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(de);const ub=$e(ob);var sb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(de);const lb=$e(sb);var cb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(de);const fb=$e(cb);function hb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const db=Dc(pn(300,.5,0),pn(-240,.5,1));var mb=Dc(pn(-100,.75,.35),pn(80,1.5,.8)),pb=Dc(pn(260,.75,.35),pn(80,1.5,.8)),uo=pn();function bb(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return uo.h=360*e-100,uo.s=1.5-1.5*t,uo.l=.8-.9*t,uo+""}var so=Xn(),o7=Math.PI/3,u7=Math.PI*2/3;function gb(e){var t;return e=(.5-e)*Math.PI,so.r=255*(t=Math.sin(e))*t,so.g=255*(t=Math.sin(e+o7))*t,so.b=255*(t=Math.sin(e+u7))*t,so+""}function yb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Qu(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const vb=Qu(de("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var wb=Qu(de("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),_b=Qu(de("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Mb=Qu(de("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ye(e){return function(){return e}}const xb=Math.cos,Vc=Math.min,hu=Math.sin,He=Math.sqrt,td=1e-12,du=Math.PI,Ju=2*du;function Pb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new rm(t)}function Ab(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sb(e){this._context=e}Sb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Fa(e){return new Sb(e)}function Eb(e){return e[0]}function Cb(e){return e[1]}function Tb(e,t){var n=Ye(!0),r=null,i=Fa,a=null,o=Pb(u);e=typeof e=="function"?e:e===void 0?Eb:Ye(e),t=typeof t=="function"?t:t===void 0?Cb:Ye(t);function u(s){var l,c=(s=Ab(s)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=c;++l)!(l<c&&n(f=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,l,s),+t(f,l,s));if(d)return a=null,d+""||null}return u.x=function(s){return arguments.length?(e=typeof s=="function"?s:Ye(+s),u):e},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:Ye(+s),u):t},u.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ye(!!s),u):n},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}function s7(e,t,n){var r=null,i=Ye(!0),a=null,o=Fa,u=null,s=Pb(l);e=typeof e=="function"?e:e===void 0?Eb:Ye(+e),t=typeof t=="function"?t:Ye(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Cb:Ye(+n);function l(f){var h,d,m,p=(f=Ab(f)).length,g,y=!1,b,w=new Array(p),v=new Array(p);for(a==null&&(u=o(b=s())),h=0;h<=p;++h){if(!(h<p&&i(g=f[h],h,f))===y)if(y=!y)d=h,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),m=h-1;m>=d;--m)u.point(w[m],v[m]);u.lineEnd(),u.areaEnd()}y&&(w[h]=+e(g,h,f),v[h]=+t(g,h,f),u.point(r?+r(g,h,f):w[h],n?+n(g,h,f):v[h]))}if(b)return u=null,b+""||null}function c(){return Tb().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ye(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ye(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ye(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ye(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ye(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ye(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ye(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(u=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=u=null:u=o(a=f),l):a},l}class kb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function l7(e){return new kb(e,!0)}function c7(e){return new kb(e,!1)}const f7=He(3),$b={draw(e,t){const n=He(t+Vc(t/28,.75))*.59436,r=n/2,i=r*f7;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},la={draw(e,t){const n=He(t/du);e.moveTo(n,0),e.arc(0,0,n,0,Ju)}},Db={draw(e,t){const n=He(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Nb=He(1/3),h7=Nb*2,Bb={draw(e,t){const n=He(t/h7),r=n*Nb;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Fb={draw(e,t){const n=He(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Lb={draw(e,t){const n=He(t-Vc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Ib={draw(e,t){const n=He(t),r=-n/2;e.rect(r,r,n,n)}},Rb={draw(e,t){const n=He(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},d7=.8908130915292852,Ob=hu(du/10)/hu(7*du/10),m7=hu(Ju/10)*Ob,p7=-xb(Ju/10)*Ob,qb={draw(e,t){const n=He(t*d7),r=m7*n,i=p7*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Ju*a/5,u=xb(o),s=hu(o);e.lineTo(s*n,-u*n),e.lineTo(u*r-s*i,s*r+u*i)}e.closePath()}},Ws=He(3),Gb={draw(e,t){const n=-He(t/(Ws*3));e.moveTo(0,n*2),e.lineTo(-Ws*n,-n),e.lineTo(Ws*n,-n),e.closePath()}},b7=He(3),zb={draw(e,t){const n=He(t)*.6824,r=n/2,i=n*b7/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Tt=-.5,kt=He(3)/2,Kl=1/He(12),g7=(Kl/2+1)*3,Ub={draw(e,t){const n=He(t/g7),r=n/2,i=n*Kl,a=r,o=n*Kl+n,u=-a,s=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,s),e.lineTo(Tt*r-kt*i,kt*r+Tt*i),e.lineTo(Tt*a-kt*o,kt*a+Tt*o),e.lineTo(Tt*u-kt*s,kt*u+Tt*s),e.lineTo(Tt*r+kt*i,Tt*i-kt*r),e.lineTo(Tt*a+kt*o,Tt*o-kt*a),e.lineTo(Tt*u+kt*s,Tt*s-kt*u),e.closePath()}},Hb={draw(e,t){const n=He(t-Vc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},y7=[la,Db,Bb,Ib,qb,Gb,Ub],v7=[la,Lb,Hb,zb,$b,Rb,Fb];function Zn(){}function mu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function es(e){this._context=e}es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w7(e){return new es(e)}function Wb(e){this._context=e}Wb.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _7(e){return new Wb(e)}function Vb(e){this._context=e}Vb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function M7(e){return new Vb(e)}function Yb(e,t){this._basis=new es(e),this._beta=t}Yb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,u=-1,s;++u<=n;)s=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+s*a),this._beta*t[u]+(1-this._beta)*(i+s*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const x7=function e(t){function n(r){return t===1?new es(r):new Yb(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function pu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Yc(e,t){this._context=e,this._k=(1-t)/6}Yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P7=function e(t){function n(r){return new Yc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function jc(e,t){this._context=e,this._k=(1-t)/6}jc.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A7=function e(t){function n(r){return new jc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Xc(e,t){this._context=e,this._k=(1-t)/6}Xc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S7=function e(t){function n(r){return new Xc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Zc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>td){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>td){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function jb(e,t){this._context=e,this._alpha=t}jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Zc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E7=function e(t){function n(r){return t?new jb(r,t):new Yc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Xb(e,t){this._context=e,this._alpha=t}Xb.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Zc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const C7=function e(t){function n(r){return t?new Xb(r,t):new jc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Zb(e,t){this._context=e,this._alpha=t}Zb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Zc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const T7=function e(t){function n(r){return t?new Zb(r,t):new Xc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Kb(e){this._context=e}Kb.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function k7(e){return new Kb(e)}function nd(e){return e<0?-1:1}function rd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(nd(a)+nd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function id(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Vs(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function bu(e){this._context=e}bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Vs(this,this._t0,id(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Vs(this,id(this,n=rd(this,e,t)),n);break;default:Vs(this,this._t0,n=rd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Qb(e){this._context=new Jb(e)}(Qb.prototype=Object.create(bu.prototype)).point=function(e,t){bu.prototype.point.call(this,t,e)};function Jb(e){this._context=e}Jb.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function $7(e){return new bu(e)}function D7(e){return new Qb(e)}function eg(e){this._context=e}eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=ad(e),i=ad(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ad(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function N7(e){return new eg(e)}function ts(e,t){this._context=e,this._t=t}ts.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function B7(e){return new ts(e,.5)}function F7(e){return new ts(e,0)}function L7(e){return new ts(e,1)}function Oi(e,t,n){this.k=e,this.x=t,this.y=n}Oi.prototype={constructor:Oi,scale:function(e){return e===1?this:new Oi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Oi.prototype;const I7="modulepreload",R7=function(e){return"/rhythm-vis/"+e},od={},Fr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=R7(o),o in od)return;od[o]=!0;const u=o.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.href===o&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":I7,u||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),u)return new Promise((f,h)=>{c.addEventListener("load",f),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function O7(e){if(e){if(e=new Uint8Array(e.buffer||e),G7(e))return"wav";if(q7(e))return"mp3";if(U7(e))return"flac";if(H7(e))return"m4a";if(W7(e))return"opus";if(z7(e))return"oga";if(V7(e))return"qoa"}}function q7(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function G7(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function z7(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function U7(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function H7(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function W7(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function V7(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let Y7=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],a=r,o=0;a<this.length&&o<t.length;a++,o++)t[o]=i[a]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var a=r,o=0;a<this.length&&o<t.length;a++,o++)i[a]=t[o]}};const j7=globalThis.AudioBuffer||Y7;async function X7(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=O7(e);if(!t)throw Error("Cannot detect audio format");if(!mt[t])throw Error("Missing decoder for "+t+" format");return mt[t](e)}const mt={async oga(e){let{decoder:t}=mt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Fr(()=>import("./index-BF11uHJ_.js"),__vite__mapDeps([0,1,2]));await(mt.oga.decoder=t=new n).ready}return e&&Lr(await t.decodeFile(e))},async mp3(e){let{decoder:t}=mt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Fr(()=>import("./index-CxYqNccK.js"),__vite__mapDeps([3,2]));await(mt.mp3.decoder=t=new n).ready}return e&&Lr(await t.decode(e))},async flac(e){let{decoder:t}=mt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Fr(()=>import("./index-DQwxBdfg.js"),__vite__mapDeps([4,1,2]));await(mt.flac.decoder=t=new n).ready}return e&&Lr(await t.decode(e))},async opus(e){let{decoder:t}=mt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Fr(()=>import("./index-jdmoobcS.js"),__vite__mapDeps([5,1,2]));await(mt.opus.decoder=t=new n).ready}return e&&Lr(await t.decodeFile(e))},async wav(e){let{decode:t}=mt.wav;if(!t){let n=await Fr(()=>import("./index-DgK06Fi6.js").then(r=>r.i),__vite__mapDeps([]));t=mt.wav.decode=n.default.decode}return e&&Lr(await t(e))},async qoa(e){let{decode:t}=mt.qoa;return t||(mt.qoa.decode=t=(await Fr(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),e&&Lr(await t(e))}};function Lr({channelData:e,sampleRate:t}){let n=new j7({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Si=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Z7=K7;function K7(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,a=i===3?32:16,o;return n===2?o=J7(e.getChannelData(0),e.getChannelData(1)):o=e.getChannelData(0),Q7(o,i,r,n,a)}function Q7(e,t,n,r,i){var a=i/8,o=r*a,u=new ArrayBuffer(44+e.length*a),s=new DataView(u);return lo(s,0,"RIFF"),s.setUint32(4,36+e.length*a,!0),lo(s,8,"WAVE"),lo(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,t,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*o,!0),s.setUint16(32,o,!0),s.setUint16(34,i,!0),lo(s,36,"data"),s.setUint32(40,e.length*a,!0),t===1?t9(s,44,e):e9(s,44,e),u}function J7(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=t[a],a++;return r}function e9(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function t9(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function lo(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const n9=tg(Z7);async function ng(e){const n=await(await fetch(e)).arrayBuffer();return await X7(n)}function r9(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),a=new Float32Array(Math.ceil(r*e.sampleRate));for(const o of t){const u=Math.round(o*e.sampleRate);let s=1;for(let l=0;l<i.length;++l)s=Math.max(0,s-2/40100),a[u+l]=i[l]*s}return a}function Kc(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([n9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function i9(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function Ql(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const a=i.audioBuffer.getChannelData(0);for(const o of i.times){const u=Math.round(o*n);for(let s=0;s<a.length;++s)r[u+s]=Math.min(r[u+s]+a[s],1)}}return r}function Kn(e){return e!=null&&!Number.isNaN(e)}function Jt(e,t){return+Kn(t)-+Kn(e)||yt(e,t)}function gu(e,t){return+Kn(t)-+Kn(e)||_a(e,t)}function Qc(e){return e!=null&&`${e}`!=""}function rg(e){return isFinite(e)?e:NaN}function ns(e){return e>0&&isFinite(e)?e:NaN}function Jc(e){return e<0&&isFinite(e)?e:NaN}function a9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${o9(e.getUTCFullYear())}-${En(e.getUTCMonth()+1,2)}-${En(e.getUTCDate(),2)}${n||r||i||a?`T${En(n,2)}:${En(r,2)}${i||a?`:${En(i,2)}${a?`.${En(a,3)}`:""}`:""}Z`:""}`}function o9(e){return e<0?`-${En(-e,6)}`:e>9999?`+${En(e,6)}`:En(e,4)}function En(e,t){return`${e}`.padStart(t,"0")}const u9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function ig(e,t){return u9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Gr=1e3,Wn=Gr*60,Vn=Wn*60,bn=Vn*24,on=bn*7,pr=bn*30,zn=bn*365,Ys=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Gr],["5 seconds",5*Gr],["15 seconds",15*Gr],["30 seconds",30*Gr],["minute",Wn],["5 minutes",5*Wn],["15 minutes",15*Wn],["30 minutes",30*Wn],["hour",Vn],["3 hours",3*Vn],["6 hours",6*Vn],["12 hours",12*Vn],["day",bn],["2 days",2*bn],["week",on],["2 weeks",2*on],["month",pr],["3 months",3*pr],["6 months",6*pr],["year",zn],["2 years",2*zn],["5 years",5*zn],["10 years",10*zn],["20 years",20*zn],["50 years",50*zn],["100 years",100*zn]],ef=new Map([["second",Gr],["minute",Wn],["hour",Vn],["day",bn],["monday",on],["tuesday",on],["wednesday",on],["thursday",on],["friday",on],["saturday",on],["sunday",on],["week",on],["month",pr],["year",zn]]),ag=new Map([["second",Yt],["minute",Ca],["hour",ka],["day",Er],["monday",ua],["tuesday",Qm],["wednesday",Jm],["thursday",xr],["friday",ep],["saturday",tp],["sunday",ii],["week",ii],["month",Da],["year",Kt]]),tf=new Map([["second",Yt],["minute",Ta],["hour",$a],["day",Xu],["monday",sa],["tuesday",np],["wednesday",rp],["thursday",Pr],["friday",ip],["saturday",ap],["sunday",ai],["week",ai],["month",Na],["year",Qt]]),La=Symbol("intervalDuration"),rs=Symbol("intervalType");for(const[e,t]of ag)t[La]=ef.get(e),t[rs]="time";for(const[e,t]of tf)t[La]=ef.get(e),t[rs]="utc";const qi=[["year",Qt,"utc"],["month",Na,"utc"],["day",Xu,"utc",6*pr],["hour",$a,"utc",3*bn],["minute",Ta,"utc",6*Vn],["second",Yt,"utc",30*Wn]],Eo=[["year",Kt,"time"],["month",Da,"time"],["day",Er,"time",6*pr],["hour",ka,"time",3*bn],["minute",Ca,"time",6*Vn],["second",Yt,"time",30*Wn]],s9=[qi[0],Eo[0],qi[1],Eo[1],qi[2],Eo[2],...qi.slice(3)];function og(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=tf.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function ug(e){return sg(og(e),"time")}function nf(e){return sg(og(e),"utc")}function sg([e,t],n){let r=(n==="time"?ag:tf).get(e);return t>1&&(r=r.every(t),r[La]=ef.get(e)*t,r[rs]=n),r}function ud(e,t){if(!(t>1))return;const n=e[La];if(!Ys.some(([,i])=>i===n)||n%bn===0&&bn<n&&n<pr)return;const[r]=Ys[Cu(([,i])=>Math.log(i)).center(Ys,Math.log(n*t))];return(e[rs]==="time"?ug:nf)(r)}function sd(e,t,n){const r=t==="time"?Hc:Ba;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=l9(n);switch(e){case"millisecond":return Ir(r(".%L"),r(":%M:%S"),i);case"second":return Ir(r(":%S"),r("%-I:%M"),i);case"minute":return Ir(r("%-I:%M"),r("%p"),i);case"hour":return Ir(r("%-I %p"),r("%b %-d"),i);case"day":return Ir(r("%-d"),r("%b"),i);case"month":return Ir(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function l9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function c9(e){return e==="time"?Eo:e==="utc"?qi:s9}function f9(e,t,n){const r=It(N3(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return sd("millisecond","utc",n);for(const[i,a,o,u]of c9(e)){if(r>u||i==="hour"&&!r)break;if(t.every(s=>a.floor(s)>=s))return sd(i,o,n)}}function Ir(e,t,n){return(r,i,a)=>{const o=e(r,i),u=t(r,i),s=i-ui(a);return i!==s&&a[s]!==void 0&&u===t(a[s],s)?o:n(o,u)}}const ca=Object.getPrototypeOf(Uint8Array),h9=Object.prototype.toString,lg=Symbol("reindex");function Ze(e,t,n){const r=typeof t;return r==="string"?ld(e,cg(t),n):r==="function"?ld(e,t,n):r==="number"||t instanceof Date||r==="boolean"?ze(e,Ia(t),n):typeof(t==null?void 0:t.transform)=="function"?cd(t.transform(e),n):d9(cd(t,n),e==null?void 0:e[lg])}function d9(e,t){return t?uf(e,t):e}function ld(e,t,n){return ze(e,(n==null?void 0:n.prototype)instanceof ca?m9(t):t,n)}function cd(e,t){return t===void 0?Et(e):e instanceof t?e:t.prototype instanceof ca&&!(e instanceof ca)?t.from(e,af):t.from(e)}function m9(e){return(t,n)=>af(e(t,n))}const Co=[null],cg=e=>t=>t[e],is={transform:Rn},st={transform:e=>e},p9=()=>1,b9=()=>!0,ct=e=>e==null?e:`${e}`,Be=e=>e==null?e:+e,rf=e=>e?e[0]:void 0,Jl=e=>e?e[1]:void 0,Ia=e=>()=>e;function g9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Zr(n,t,r)}function cn(e){return e instanceof ca?e:ze(e,af,Float64Array)}function af(e){return e==null?NaN:Number(e)}function y9(e){return ze(e,fg)}function fg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?ig(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Ln(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:os(e)?[void 0,e]:[e,void 0]}function ft(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function hg(e,t,n){if(e!=null)return nn(e,t,n)}function nn(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function Et(e){return e==null||e instanceof Array||e instanceof ca?e:Array.from(e)}function ze(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function fa(e,t=Array){return e instanceof t?e.slice():t.from(e)}function v9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function dg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function w9(e){return v9(e)||dg(e)||e.interval!==void 0}function tr(e){return(e==null?void 0:e.toString)===h9}function ec(e){return tr(e)&&(e.type!==void 0||e.domain!==void 0)}function as(e){return tr(e)&&typeof e.transform!="function"}function oi(e){return as(e)&&e.value===void 0&&e.channel===void 0}function _9(e,t,n,r=st){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ra(e,t){return e===void 0&&t===void 0?[rf,Jl]:[e,t]}function of({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Ln(t)),e===void 0&&([e]=Ln(n)),e}function Rn(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function uf(e,t){return ze(t,n=>e[n],e.constructor)}function M9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function hr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function x9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function yu(e){let t;return[{transform:()=>t,label:kr(e)},n=>t=n]}function An(e){return e==null?[e]:yu(e)}function kr(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function tc(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return wt(r)||wt(i)?ze(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):ze(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function mg(e,t){const n=pg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?ze(e,n):e}function pg(e,t){const n=sf(e,t);return n&&(r=>Kn(r)?n.floor(r):r)}function sf(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>gl(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>gl(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?ug:nf)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function gi(e,t){if(e=sf(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function P9(e,t){if(e=gi(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function A9(e){return zr(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function zr(e){return typeof(e==null?void 0:e.range)=="function"}function Oa(e){return e===void 0||as(e)?e:{value:e}}function S9(e){return e==null?null:{transform:t=>Ze(t,e,Float64Array),label:kr(e)}}function nr(e){return e&&typeof e[Symbol.iterator]=="function"}function bg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function fd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function wt(e){for(const t of e)if(t!=null)return t instanceof Date}function E9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&ig(t)}function C9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function T9(e){for(const t of e)if(t!=null)return typeof t=="number"}function js(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const k9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function os(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||k9.has(e))}function $9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function bt(e){return e==null||ha(e)}function ha(e){return/^\s*none\s*$/i.test(e)}function D9(e){return/^\s*round\s*$/i.test(e)}function nc(e,t){return hg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function us(e="middle"){return nc(e,"frameAnchor")}function ui(e){if(e==null)return;const t=e[0],n=e[e.length-1];return _a(t,n)}function N9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function B9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function gg(e){return nr(e)?B9(e):e}const fn=Symbol("position"),On=Symbol("color"),qa=Symbol("radius"),Ga=Symbol("length"),za=Symbol("opacity"),ss=Symbol("symbol"),yg=Symbol("projection"),Re=new Map([["x",fn],["y",fn],["fx",fn],["fy",fn],["r",qa],["color",On],["opacity",za],["symbol",ss],["length",Ga],["projection",yg]]);function F9(e){return e===fn||e===yg}function L9(e){return e===fn||e===qa||e===Ga||e===za}const I9=Math.sqrt(3),R9=2/I9,O9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*R9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},lf=new Map([["asterisk",$b],["circle",la],["cross",Db],["diamond",Bb],["diamond2",Fb],["hexagon",O9],["plus",Lb],["square",Ib],["square2",Rb],["star",qb],["times",Hb],["triangle",Gb],["triangle2",zb],["wye",Ub]]);function cf(e){return e&&typeof e.draw=="function"}function q9(e){return cf(e)?!0:typeof e!="string"?!1:lf.has(e.toLowerCase())}function ff(e){if(e==null||cf(e))return e;const t=lf.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function G9(e){if(e==null||cf(e))return[void 0,e];if(typeof e=="string"){const t=lf.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function ls({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=vg(e)),t!=null&&!oi(t)&&(r=Xs(r,hf(t))),n&&(r=Xs(r,wg))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||oi(t))&&{sort:t},transform:Xs(r,o)}}function si({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=vg(e)),t!=null&&!oi(t)&&(r=Zs(r,hf(t))),n&&(r=Zs(r,wg))),{...i,...(t===null||oi(t))&&{sort:t},initializer:Zs(r,a)}}function Xs(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,Et(n),r,i)}}function Zs(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,u,s,l,c,f;return{data:u=n,facets:s=r,channels:o}=e.call(this,n,r,i,...a),{data:c=u,facets:f=s,channels:l}=t.call(this,u,s,{...i,...o},...a),{data:c,facets:f,channels:{...o,...l}}}}function z9(e,t){return(e.initializer!=null?si:ls)(e,t)}function vg(e){return(t,n)=>{const r=Ze(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function wg(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function U9(e,{sort:t,...n}={}){return{...(as(e)&&e.channel!==void 0?si:z9)(n,hf(e)),sort:oi(t)?t:null}}function hf(e){return(typeof e=="function"&&e.length!==1?H9:W9)(e)}function H9(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function W9(e){let t,n;({channel:t,value:e,order:n}={...Oa(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?gu:Jt),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Jt;break;case"descending":n=gu;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let u;if(t===void 0)u=Ze(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(u=o[t],!u)return{};u=u.value}const s=(l,c)=>n(u[l],u[c]);return{data:i,facets:a.map(l=>l.slice().sort(s))}}}function co(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function V9(e,t,n=_g){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",J9]),t.href!=null&&e.href===void 0&&r.push(["href",mf]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?Y9(i):n(i,a,t))}function _g(e,t,n,r=Mg){let i;tr(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,u]=yu(a.label);let s;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){a.initialize(l),s=u([])},scope(l,c){a.scope(l,c)},reduce(l,c){s.push(a.reduce(l,c))}}}function Y9(e){return{name:e,initialize(){},scope(){},reduce(){}}}function Mg(e,t,n,r=df){const i=x9(e,n),a=r(t,i);let o,u;return{label:kr(a===vu?null:i,a.label),initialize(s){o=i===void 0?s:Ze(s,i),a.scope==="data"&&(u=a.reduceIndex(Rn(s),o))},scope(s,l){a.scope===s&&(u=a.reduceIndex(l,o))},reduce(s,l){return a.scope==null?a.reduceIndex(s,o,l):a.reduceIndex(s,o,u,l)}}}function hd(e,t){return t?Ji(Du(e,n=>t[n]),rf):[[,e]]}function df(e,t,n=j9){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&tr(e))return K9(e);if(typeof e=="function")return Q9(e);if(/^p\d{2}$/i.test(e))return Sn(g9(e));switch(`${e}`.toLowerCase()){case"first":return mf;case"last":return e8;case"identity":return xg;case"count":return vu;case"distinct":return t8;case"sum":return t==null?vu:n8;case"proportion":return md(t,"data");case"proportion-facet":return md(t,"facet");case"deviation":return Sn(ku);case"min":return Sn(Dn);case"min-index":return Sn(C3);case"max":return Sn(It);case"max-index":return Sn(E3);case"mean":return dd(Bu);case"median":return dd(bl);case"variance":return Sn(xc);case"mode":return Sn(D3)}return n(e)}function j9(e){throw new Error(`invalid reduce: ${e}`)}function X9(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function Z9(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>Jt(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function K9(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function Q9(e){return{reduceIndex(t,n,r){return e(uf(n,t),r)}}}function Sn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function dd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return wt(n)?new Date(r):r}}}const xg={reduceIndex(e,t){return uf(t,e)}},mf={reduceIndex(e,t){return t[e[0]]}},J9={reduceIndex(e,t){const r=Ji(Hr(e,a=>a.length,a=>t[a]),Jl),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[` ${a.length.toLocaleString("en-US")} more`,jn(a,Jl)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},e8={reduceIndex(e,t){return t[e[e.length-1]]}},vu={label:"Frequency",reduceIndex(e){return e.length}},t8={label:"Distinct",reduceIndex(e,t){const n=new $u;for(const r of e)n.add(t[r]);return n.size}},n8=Sn(jn);function md(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>jn(n,a=>r[a])/i}}function da(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=kr(r)},u){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),Pg(u,{scale:t,type:n,value:Ze(e,r),label:o,filter:i,hint:a})}function r8(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,da(t,r,n)]))}function i8(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:ze(a,o)]}));return n.channels=e,n}function Pg(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&js(r,os)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&js(r,$9)?null:"opacity";break;case"symbol":n!==!0&&js(r,q9)?(t.scale=null,t.value=ze(r,ff)):t.scale="symbol";break;default:t.scale=Re.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Re.has(n))throw new Error(`unknown scale: ${n}`);return t}function a8(e,t,n,r,i){const{order:a,reverse:o,reduce:u=!0,limit:s}=i;for(const l in i){if(!Re.has(l))continue;let{value:c,order:f=a,reverse:h=o,reduce:d=u,limit:m=s}=Oa(i[l]);const p=c==null?void 0:c.startsWith("-");if(p&&(c=c.slice(1)),f=f===void 0?p!==(c==="width"||c==="height")?Sg:Ag:s8(f),d==null||d===!1)continue;const g=l==="fx"||l==="fy"?u8(t,r[l]):o8(n,l);if(!g)throw new Error(`missing channel for scale: ${l}`);const y=g.value,[b=0,w=1/0]=nr(m)?m:m<0?[m]:[0,m];if(c==null)g.domain=()=>{let v=Array.from(new $u(y));return h&&(v=v.reverse()),(b!==0||w!==1/0)&&(v=v.slice(b,w)),v};else{const v=c==="data"?e:c==="height"?pd(n,"y1","y2"):c==="width"?pd(n,"x1","x2"):rc(n,c,c==="y"?"y2":c==="x"?"x2":void 0),_=df(d===!0?"max":d,v);g.domain=()=>{let M=_3(Rn(y),x=>_.reduceIndex(x,v),x=>y[x]);return f&&M.sort(f),h&&M.reverse(),(b!==0||w!==1/0)&&(M=M.slice(b,w)),M.map(rf)}}}}function o8(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function u8(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const u of e[a])i[u]=o}return t}function pd(e,t,n){const r=rc(e,t),i=rc(e,n);return ze(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function rc(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function s8(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return Ag;case"descending":return Sg}throw new Error(`invalid order: ${e}`)}function Ag([e,t],[n,r]){return Jt(t,r)||Jt(e,n)}function Sg([e,t],[n,r]){return gu(t,r)||Jt(e,n)}function bd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function l8(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const c8=l8(e=>new Intl.NumberFormat(e));function f8(e="en-US"){const t=c8(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function h8(e){return a9(e,"Invalid Date")}function d8(e="en-US"){const t=f8(e);return n=>(n instanceof Date?h8:typeof n=="number"?t:ct)(n)}const Ar=d8();let ic=0,ac;function m8(){const e=ic;return ic=0,ac=void 0,e}function Yn(e){e!==ac&&(ac=e,console.warn(e),++ic)}const gt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let p8=0;function gd(){return`plot-clip-${++p8}`}function b8(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:u,fillOpacity:s,stroke:l,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:g,opacity:y,mixBlendMode:b,imageFilter:w,paintOrder:v,pointerEvents:_,shapeRendering:M,channels:x},{ariaLabel:C,fill:E="currentColor",fillOpacity:$,stroke:A="none",strokeOpacity:L,strokeWidth:O,strokeLinecap:T,strokeLinejoin:S,strokeMiterlimit:I,paintOrder:ne}){E===null&&(u=null,s=null),A===null&&(l=null,f=null),bt(E)?!bt(A)&&(!bt(u)||x!=null&&x.fill)&&(A="none"):bt(A)&&(!bt(l)||x!=null&&x.stroke)&&(E="none");const[ee,K]=Ln(u,E),[q,G]=ft(s,$),[z,U]=Ln(l,A),[oe,ue]=ft(f,L),[ie,V]=ft(y);ha(U)||(c===void 0&&(c=O),d===void 0&&(d=T),h===void 0&&(h=S),m===void 0&&!D9(h)&&(m=I),!ha(K)&&v===void 0&&(v=ne));const[Y,N]=ft(c);return E!==null&&(e.fill=nt(K,"currentColor"),e.fillOpacity=Ei(G,1)),A!==null&&(e.stroke=nt(U,"none"),e.strokeWidth=Ei(N,1),e.strokeOpacity=Ei(ue,1),e.strokeLinejoin=nt(h,"miter"),e.strokeLinecap=nt(d,"butt"),e.strokeMiterlimit=Ei(m,4),e.strokeDasharray=nt(p,"none"),e.strokeDashoffset=nt(g,"0")),e.target=ct(o),e.ariaLabel=ct(C),e.ariaDescription=ct(i),e.ariaHidden=ct(a),e.opacity=Ei(V,1),e.mixBlendMode=nt(b,"normal"),e.imageFilter=nt(w,"none"),e.paintOrder=nt(v,"normal"),e.pointerEvents=nt(_,"auto"),e.shapeRendering=nt(M,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:ee,scale:"auto",optional:!0},fillOpacity:{value:q,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:oe,scale:"auto",optional:!0},strokeWidth:{value:Y,optional:!0},opacity:{value:ie,scale:"auto",optional:!0}}}function g8(e,t){t&&e.filter(n=>Qc(t[n])).append("title").call(v8,t)}function y8(e,t){t&&e.filter(([n])=>Qc(t[n])).append("title").call(w8,t)}function v8(e,t){t&&e.text(n=>Ar(t[n]))}function w8(e,t){t&&e.text(([n])=>Ar(t[n]))}function qn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&le(e,"aria-label",h=>r[h]),a&&le(e,"fill",h=>a[h]),o&&le(e,"fill-opacity",h=>o[h]),u&&le(e,"stroke",h=>u[h]),s&&le(e,"stroke-opacity",h=>s[h]),l&&le(e,"stroke-width",h=>l[h]),c&&le(e,"opacity",h=>c[h]),f&&kg(e,h=>f[h],t),n||g8(e,i)}function Eg(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&le(e,"aria-label",([h])=>r[h]),a&&le(e,"fill",([h])=>a[h]),o&&le(e,"fill-opacity",([h])=>o[h]),u&&le(e,"stroke",([h])=>u[h]),s&&le(e,"stroke-opacity",([h])=>s[h]),l&&le(e,"stroke-width",([h])=>l[h]),c&&le(e,"opacity",([h])=>c[h]),f&&kg(e,([h])=>f[h],t),n||y8(e,i)}function _8({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:o,opacity:u,href:s},{tip:l}){return[e,l?void 0:t,n,r,i,a,o,u,s].filter(c=>c!==void 0)}function M8(e,t,n){const r=Du(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Yn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Cg(e,t,n,r){const{z:i}=n,{z:a}=r,o=_8(r,n),u=[...t,...o];for(const s of a?M8(e,a,i):[e]){let l,c;e:for(const f of s){for(const h of u)if(!Kn(h[f])){c&&c.push(-1);continue e}if(l===void 0){c&&(yield c),l=o.map(h=>hr(h[f])),c=[f];continue}c.push(f);for(let h=0;h<o.length;++h)if(hr(o[h][f])!==l[h]){yield c,l=o.map(m=>hr(m[f])),c=[f];continue e}}c&&(yield c)}}function Tg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=nn(e,"clip",["frame","sphere"])),e}function x8(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:u,marginLeft:s,marginRight:l,marginTop:c,marginBottom:f}=n,h=gd();i=`url(#${h})`,e=Ge("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",s).attr("y",c).attr("width",o-l-s).attr("height",u-c-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const u=gd();i=`url(#${u})`,e.append("clipPath").attr("id",u).append("path").attr("d",zu(o)({type:"Sphere"}));break}}le(e,"aria-label",t.ariaLabel),le(e,"aria-description",t.ariaDescription),le(e,"aria-hidden",t.ariaHidden),le(e,"clip-path",i)}function qt(e,t,n,r){x8(e,t,n,r),le(e,"fill",t.fill),le(e,"fill-opacity",t.fillOpacity),le(e,"stroke",t.stroke),le(e,"stroke-width",t.strokeWidth),le(e,"stroke-opacity",t.strokeOpacity),le(e,"stroke-linejoin",t.strokeLinejoin),le(e,"stroke-linecap",t.strokeLinecap),le(e,"stroke-miterlimit",t.strokeMiterlimit),le(e,"stroke-dasharray",t.strokeDasharray),le(e,"stroke-dashoffset",t.strokeDashoffset),le(e,"shape-rendering",t.shapeRendering),le(e,"filter",t.imageFilter),le(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;le(e,"pointer-events",i)}function Gt(e,t){P8(e,"mix-blend-mode",t.mixBlendMode),le(e,"opacity",t.opacity)}function kg(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(Kr.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(Kr.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function le(e,t,n){n!=null&&e.attr(t,n)}function P8(e,t,n){n!=null&&e.style(t,n)}function Ct(e,t,{x:n,y:r},i=gt,a=gt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function nt(e,t){if((e=ct(e))!==t)return e}function Ei(e,t){if((e=Be(e))!==t)return e}const A8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function pf(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!A8.test(e))throw new Error(`invalid class name: ${e}`);return e}function bf(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Ua({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function gf(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Tg(n)}}function Ge(e,{document:t}){return Wi(Lu(e).call(t.documentElement))}const $g=Math.PI,Mn=2*$g,yd=.618;function S8({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let u,s,l="frame";if(tr(e)){let _;if({type:e,domain:s,inset:_,insetTop:n=_!==void 0?_:n,insetRight:r=_!==void 0?_:r,insetBottom:i=_!==void 0?_:i,insetLeft:a=_!==void 0?_:a,clip:l=l,...u}=e,e==null)return}typeof e!="function"&&({type:e}=Dg(e));const{width:c,height:f,marginLeft:h,marginRight:d,marginTop:m,marginBottom:p}=o,g=c-h-d-a-r,y=f-m-p-n-i;if(e=e==null?void 0:e({width:g,height:y,clip:l,...u}),e==null)return;l=E8(l,h,m,c-d,f-p);let b=h+a,w=m+n,v;if(s!=null){const[[_,M],[x,C]]=zu(e).bounds(s),E=Math.min(g/(x-_),y/(C-M));E>0?(b-=(E*(_+x)-g)/2,w-=(E*(M+C)-y)/2,v=Hl({point($,A){this.stream.point($*E+b,A*E+w)}})):Yn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??(v=b===0&&w===0?Ng():Hl({point(_,M){this.stream.point(_+b,M+w)}})),{stream:_=>e.stream(v.stream(l(_)))}}function Dg(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Wt(m4,.7463,.4673);case"albers":return fo(km,.7463,.4673);case"azimuthal-equal-area":return Wt(p4,4,4);case"azimuthal-equidistant":return Wt(b4,Mn,Mn);case"conic-conformal":return fo(v4,Mn,Mn);case"conic-equal-area":return fo(ou,6.1702,2.9781);case"conic-equidistant":return fo(M4,7.312,3.6282);case"equal-earth":return Wt(P4,5.4133,2.6347);case"equirectangular":return Wt(w4,Mn,$g);case"gnomonic":return Wt(A4,3.4641,3.4641);case"identity":return{type:Ng};case"reflect-y":return{type:C8};case"mercator":return Wt(g4,Mn,Mn);case"orthographic":return Wt(S4,2,2);case"stereographic":return Wt(E4,2,2);case"transverse-mercator":return Wt(C4,Mn,Mn);default:throw new Error(`unknown projection type: ${e}`)}}function E8(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return mm(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Wt(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:u})=>{var l,c,f;const s=e();return o!=null&&((l=s.precision)==null||l.call(s,o)),a!=null&&((c=s.rotate)==null||c.call(s,a)),typeof u=="number"&&((f=s.clipAngle)==null||f.call(s,u)),s.scale(Math.min(r/t,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/t}}function fo(e,t,n){const{type:r,aspectRatio:i}=Wt(e,t,n);return{type:a=>{const{parallels:o,domain:u,width:s,height:l}=a,c=r(a);return o!=null&&(c.parallels(o),u===void 0&&c.fitSize([s,l],{type:"Sphere"})),c},aspectRatio:i}}const Ng=Ia({stream:e=>e}),C8=Ia(Hl({point(e,t){this.stream.point(e,-t)}}));function T8(e,t,n,r){const i=n[e],a=n[t],o=i.length,u=n[e]=new Float64Array(o).fill(NaN),s=n[t]=new Float64Array(o).fill(NaN);let l;const c=r.stream({point(f,h){u[l]=f,s[l]=h}});for(l=0;l<o;++l)c.point(i[l],a[l])}function k8({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(tr(e)&&(e=e.type),e!=null)}function $8(e){if(typeof(e==null?void 0:e.stream)=="function")return yd;if(tr(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=Dg(e);if(t)return t}return yd}}function D8(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,u){t.push(o),n.push(u)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)sr(o,a);return[r,i]}const N8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Bg=new Map([["accent",K6],["category10",Z6],["dark2",Q6],["observable10",N8],["paired",J6],["pastel1",e7],["pastel2",t7],["set1",n7],["set2",r7],["set3",i7],["tableau10",a7]]);function B8(e){return e!=null&&Bg.has(`${e}`.toLowerCase())}const vd=new Map([...Bg,["brbg",xn(bp,gp)],["prgn",xn(yp,vp)],["piyg",xn(wp,_p)],["puor",xn(Mp,xp)],["rdbu",xn(Xl,cu)],["rdgy",xn(Pp,Ap)],["rdylbu",xn(Zl,fu)],["rdylgn",xn(Sp,Ep)],["spectral",xn(Cp,Tp)],["burd",wd(Xl,cu)],["buylrd",wd(Zl,fu)],["blues",Ve(eb,tb)],["greens",Ve(nb,rb)],["greys",Ve(ib,ab)],["oranges",Ve(cb,fb)],["purples",Ve(ob,ub)],["reds",Ve(sb,lb)],["turbo",Pn(yb)],["viridis",Pn(vb)],["magma",Pn(wb)],["inferno",Pn(_b)],["plasma",Pn(Mb)],["cividis",Pn(hb)],["cubehelix",Pn(db)],["warm",Pn(mb)],["cool",Pn(pb)],["bugn",Ve(kp,$p)],["bupu",Ve(Dp,Np)],["gnbu",Ve(Bp,Fp)],["orrd",Ve(Lp,Ip)],["pubu",Ve(qp,Gp)],["pubugn",Ve(Rp,Op)],["purd",Ve(zp,Up)],["rdpu",Ve(Hp,Wp)],["ylgn",Ve(jp,Xp)],["ylgnbu",Ve(Vp,Yp)],["ylorbr",Ve(Zp,Kp)],["ylorrd",Ve(Qp,Jp)],["rainbow",_d(bb)],["sinebow",_d(gb)]]);function Ve(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Zt(t,n):e[n])}function xn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Zt(t,n):e[n])}function wd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Zt(r=>t(1-r),n):e[n].slice().reverse())}function Pn(e){return({length:t})=>Zt(e,Math.max(2,Math.floor(t)))}function _d(e){return({length:t})=>Zt(e,Math.floor(t)+1).slice(0,-1)}function Fg(e){const t=`${e}`.toLowerCase();if(!vd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return vd.get(t)}function cs(e,t){const n=Fg(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function F8(e,t="greys"){const n=new Set,[r,i]=cs(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Md=new Map([["brbg",gp],["prgn",vp],["piyg",_p],["puor",xp],["rdbu",cu],["rdgy",Ap],["rdylbu",fu],["rdylgn",Ep],["spectral",Tp],["burd",e=>cu(1-e)],["buylrd",e=>fu(1-e)],["blues",tb],["greens",rb],["greys",ab],["purples",ub],["reds",lb],["oranges",fb],["turbo",yb],["viridis",vb],["magma",wb],["inferno",_b],["plasma",Mb],["cividis",hb],["cubehelix",db],["warm",mb],["cool",pb],["bugn",$p],["bupu",Np],["gnbu",Fp],["orrd",Ip],["pubugn",Op],["pubu",Gp],["purd",Up],["rdpu",Wp],["ylgnbu",Yp],["ylgn",Xp],["ylorbr",Kp],["ylorrd",Jp],["rainbow",bb],["sinebow",gb]]);function yf(e){const t=`${e}`.toLowerCase();if(!Md.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Md.get(t)}const L8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function I8(e){return e!=null&&L8.has(`${e}`.toLowerCase())}const Lg=e=>t=>e(1-t),Ks=[0,1],xd=new Map([["number",at],["rgb",wr],["hsl",r_],["hcl",o_],["lab",i_]]);function Ig(e){const t=`${e}`.toLowerCase();if(!xd.has(t))throw new Error(`unknown interpolator: ${t}`);return xd.get(t)}function Ha(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:u=Og(e,n),unknown:s,round:l,scheme:c,interval:f,range:h=Re.get(e)===qa?j8(n,u):Re.get(e)===Ga?X8(n,u):Re.get(e)===za?Ks:void 0,interpolate:d=Re.get(e)===On?c==null&&h!==void 0?wr:yf(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):l?$c:at,reverse:m}){if(f=gi(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=Ig(d)),m=!!m,h!==void 0){const p=(u=Et(u)).length,g=(h=Et(h)).length;if(p!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ou(d,h),h=void 0}}if(d.length===1?(m&&(d=Lg(d),m=!1),h===void 0&&(h=Float64Array.from(u,(p,g)=>g/(u.length-1)),h.length===2&&(h=Ks)),t.interpolate((h===Ks?Ia:wf)(d))):t.interpolate(d),o){const[p,g]=Dt(u);(p>0||g<0)&&(u=fa(u),ui(u)!==Math.sign(p)?u[u.length-1]=0:u[0]=0)}return m&&(u=Uo(u)),t.domain(u).unknown(s),i&&(t.nice(R8(i,r)),u=t.domain()),h!==void 0&&t.range(h),a&&t.clamp(a),{type:r,domain:u,range:h,scale:t,interpolate:d,interval:f}}function R8(e,t){return e===!0?void 0:typeof e=="number"?e:P9(e,t)}function O8(e,t,n){return Ha(e,zc(),t,n)}function q8(e,t,n){return Rg(e,t,{...n,exponent:.5})}function Rg(e,t,{exponent:n=1,...r}){return Ha(e,Xm().exponent(n),t,{...r,type:"pow"})}function G8(e,t,{base:n=10,domain:r=Z8(t),...i}){return Ha(e,Wm().base(n),t,{...i,domain:r})}function z8(e,t,{constant:n=1,...r}){return Ha(e,Ym().constant(n),t,r)}function U8(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=K8(t),unknown:u,interpolate:s,reverse:l}){return n===void 0&&(n=s!==void 0?Zt(s,i):Re.get(e)===On?cs(a,i):void 0),o.length>0&&(o=Zm(o,n===void 0?{length:i}:n).quantiles()),vf(e,t,{domain:o,range:n,reverse:l,unknown:u})}function H8(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=Og(e,t),unknown:o,interpolate:u,reverse:s}){const[l,c]=Dt(a);let f;return n===void 0?(f=ea(l,c,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=u!==void 0?Zt(u,r):Re.get(e)===On?cs(i,r):void 0):(f=Zt(at(l,c),r+1).slice(1,-1),l instanceof Date&&(f=f.map(h=>new Date(h)))),ui(Et(a))<0&&f.reverse(),vf(e,t,{domain:f,range:n,reverse:s,unknown:o})}function vf(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Zt(a,n.length+1):Re.get(e)===On?cs(i,n.length+1):void 0,reverse:u}){n=Et(n);const s=ui(n);if(!isNaN(s)&&!W8(n,s))throw new Error(`the ${e} scale has a non-monotonic domain`);return u&&(o=Uo(o)),{type:"threshold",scale:Km(s<0?Uo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function W8(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=_a(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function V8(e){return{type:"identity",scale:L9(Re.get(e))?zm():t=>t}}function ma(e,t=rg){return e.length?[Dn(e,({value:n})=>n===void 0?n:Dn(n,t)),It(e,({value:n})=>n===void 0?n:It(n,t))]:[0,1]}function Og(e,t){const n=Re.get(e);return(n===qa||n===za||n===Ga?Y8:ma)(t)}function Y8(e){return[0,e.length?It(e,({value:t})=>t===void 0?t:It(t,rg)):1]}function j8(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Zr(e,.5,({value:o})=>o===void 0?NaN:Zr(o,.25,ns)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/It(i);return a<1?i.map(o=>o*a):i}function X8(e,t){const n=bl(e,({value:a})=>a===void 0?NaN:bl(a,Math.abs)),r=t.map(a=>12*a/n),i=60/It(r);return i<1?r.map(a=>a*i):r}function Z8(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return ma(e,ns);if(n<0)return ma(e,Jc)}return[1,10]}function K8(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function wf(e){return(t,n)=>r=>e(t+r*(n-t))}function fs(e,t,n,r,{type:i,nice:a,clamp:o,domain:u=ma(r),unknown:s,pivot:l=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=Re.get(e)===On?c==null&&f!==void 0?wr:yf(c!==void 0?c:"rdbu"):at,reverse:m}){l=+l,u=Et(u);let[p,g]=u;if(u.length>2&&Yn(`Warning: the diverging ${e} scale domain contains extra elements.`),_a(p,g)<0&&([p,g]=[g,p],m=!m),p=Math.min(p,l),g=Math.max(g,l),typeof d!="function"&&(d=Ig(d)),f!==void 0&&(d=d.length===1?wf(d)(...f):Ou(d,f)),m&&(d=Lg(d)),h){const y=n.apply(l),b=y-n.apply(p),w=n.apply(g)-y;b<w?p=n.invert(y-w):b>w&&(g=n.invert(y+b))}return t.domain([p,l,g]).unknown(s).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,g],pivot:l,interpolate:d,scale:t}}function Q8(e,t,n){return fs(e,hp(),nM,t,n)}function J8(e,t,n){return qg(e,t,{...n,exponent:.5})}function qg(e,t,{exponent:n=1,...r}){return fs(e,pp().exponent(n=+n),aM(n),t,{...r,type:"diverging-pow"})}function eM(e,t,{base:n=10,pivot:r=1,domain:i=ma(t,r<0?Jc:ns),...a}){return fs(e,dp().base(n=+n),rM,t,{domain:i,pivot:r,...a})}function tM(e,t,{constant:n=1,...r}){return fs(e,mp().constant(n=+n),oM(n),t,r)}const nM={apply(e){return e},invert(e){return e}},rM={apply:Math.log,invert:Math.exp},iM={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function aM(e){return e===.5?iM:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function oM(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Gg(e,t,n,r){return Ha(e,t,n,r)}function uM(e,t,n){return Gg(e,j6(),t,n)}function sM(e,t,n){return Gg(e,X6(),t,n)}const Wa=Symbol("ordinal");function zg(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:u,hint:s}){return i=gi(i,r),a===void 0&&(a=Hg(n,i,e)),(r==="categorical"||r===Wa)&&(r="ordinal"),u&&(a=Uo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:s,interval:i}}function lM(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:u,...s}){r=gi(r,n),i===void 0&&(i=Hg(t,r,e));let l;if(Re.get(e)===ss)l=hM(t),a=a===void 0?dM(l):ze(a,ff);else if(Re.get(e)===On&&(a===void 0&&(n==="ordinal"||n===Wa)&&(a=F8(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const c=yf(o),f=a[0],h=a[1]-a[0];a=({length:d})=>Zt(m=>c(f+h*m),d)}else a=Fg(o);if(u===Vl)throw new Error(`implicit unknown on ${e} scale is not supported`);return zg(e,Gc().unknown(u),t,{...s,type:n,domain:i,range:a,hint:l})}function cM(e,t,{align:n=.5,padding:r=.5,...i}){return Ug(T4().align(n).padding(r),t,i,e)}function fM(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return Ug(Vu().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function Ug(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=zg(r,e,t,n),e.round=i,e}function Hg(e,t,n){const r=new $u;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Dt(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Re.get(n)===fn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Ji(r,Jt)}function Pd(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function hM(e){return{fill:Pd(e,"fill"),stroke:Pd(e,"stroke")}}function dM(e){return bt(e.fill)?v7:y7}function oc(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:u,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,facet:{label:m=t}={},...p}={}){const g={};for(const[y,b]of e){const w=p[y],v=yM(y,b,{round:Re.get(y)===fn?u:void 0,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,...w});if(v){let{label:_=y==="fx"||y==="fy"?m:t,percent:M,transform:x,inset:C,insetTop:E=C!==void 0?C:y==="y"?r:0,insetRight:$=C!==void 0?C:y==="x"?i:0,insetBottom:A=C!==void 0?C:y==="y"?a:0,insetLeft:L=C!==void 0?C:y==="x"?o:0}=w||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");v.percent=!!M,v.label=_===void 0?pM(b,v):_,v.transform=x,y==="x"||y==="fx"?(v.insetLeft=+L,v.insetRight=+$):(y==="y"||y==="fy")&&(v.insetTop=+E,v.insetBottom=+A),g[y]=v}}return g}function Ad(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:u,label:s}=i;t[r]=xM(i),n[r]=a,a.type=o,u!=null&&(a.interval=u),s!=null&&(a.label=s)}return n}function mM(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?_f(t):t;i&&Sd(i,o),a&&Ed(a,o);const u=i||a?Wg(e,t):t;n&&Sd(n,u),r&&Ed(r,u)}function pM(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!$r(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function bM(e){return Math.sign(ui(e.domain()))*Math.sign(ui(e.range()))}function _f(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:u,marginRight:s,marginBottom:l,marginLeft:c}}=e;return{marginTop:Math.max(t,u),marginRight:Math.max(n,s),marginBottom:Math.max(r,l),marginLeft:Math.max(i,c),width:a,height:o}}function Wg({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=_f(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:u,height:t?t.scale.bandwidth()+r+a:s,facet:{width:u,height:s}}}function Sd(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,u=a+n,s=i-o-r;e.range=[u,Math.max(u,s)],$r(e)||(e.range=Yg(e)),e.scale.range(e.range)}Vg(e)}function Ed(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,u=a+n,s=i-o-r;e.range=[Math.max(u,s),u],$r(e)?e.range.reverse():e.range=Yg(e),e.scale.range(e.range)}Vg(e)}function Vg(e){e.round===void 0&&wM(e)&&gM(e)<=30&&e.scale.round(!0)}function gM({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,u=Math.abs(r-n)/Math.max(1,o+a*2);return(u-Math.floor(u))*o}function Yg(e){const t=e.scale.domain().length+jg(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function yM(e,t=[],n={}){const r=vM(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&$r({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(wt)?Yn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Rr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Rr(r)}".`):i.some(E9)?Yn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Rr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Rr(r)}".`):i.some(C9)&&Yn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Rr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Rr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=ho(t,n,cn);break;case"identity":switch(Re.get(e)){case fn:n=ho(t,n,cn);break;case ss:n=ho(t,n,_M);break}break;case"utc":case"time":n=ho(t,n,y9);break}switch(r){case"diverging":return Q8(e,t,n);case"diverging-sqrt":return J8(e,t,n);case"diverging-pow":return qg(e,t,n);case"diverging-log":return eM(e,t,n);case"diverging-symlog":return tM(e,t,n);case"categorical":case"ordinal":case Wa:return lM(e,t,n);case"cyclical":case"sequential":case"linear":return O8(e,t,n);case"sqrt":return q8(e,t,n);case"threshold":return vf(e,t,n);case"quantile":return U8(e,t,n);case"quantize":return H8(e,t,n);case"pow":return Rg(e,t,n);case"log":return G8(e,t,n);case"symlog":return z8(e,t,n);case"utc":return sM(e,t,n);case"time":return uM(e,t,n);case"point":return cM(e,t,n);case"band":return fM(e,t,n);case"identity":return V8(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Rr(e){return typeof e=="symbol"?e.description:e}function Cd(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Td={toString:()=>"projection"};function vM(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:u}){if(n=Cd(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&u!=null&&(n=Td);for(const l of t){const c=Cd(l.type);if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}}if(n===Td)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const s=Re.get(e);if(s===qa)return"sqrt";if(s===za||s===Ga)return"linear";if(s===ss)return"ordinal";if((r||i||[]).length>2)return Qs(s);if(r!==void 0){if(fd(r))return Qs(s);if(wt(r))return"utc"}else{const l=t.map(({value:c})=>c).filter(c=>c!==void 0);if(l.some(fd))return Qs(s);if(l.some(wt))return"utc"}if(s===On){if(o!=null||I8(a))return"diverging";if(B8(a))return"categorical"}return"linear"}function Qs(e){switch(e){case fn:return"point";case On:return Wa;default:return"ordinal"}}function $r({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Wa}function jg({type:e}){return e==="threshold"}function wM({type:e}){return e==="point"||e==="band"}function li(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function ho(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function _M(e){return ze(e,ff)}function MM(e){return t=>{if(!Re.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function xM({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:u,pivot:s}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const l=e.unknown?e.unknown():void 0;return{type:t,domain:fa(n),...r!==void 0&&{range:fa(r)},...o!==void 0&&{transform:o},...u&&{percent:u},...l!==void 0&&{unknown:l},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function PM(e,t,n={}){let r=.5-gt,i=.5+gt,a=.5+gt,o=.5-gt;for(const{marginTop:p,marginRight:g,marginBottom:y,marginLeft:b}of t)p>r&&(r=p),g>i&&(i=g),y>a&&(a=y),b>o&&(o=b);let{margin:u,marginTop:s=u!==void 0?u:r,marginRight:l=u!==void 0?u:i,marginBottom:c=u!==void 0?u:a,marginLeft:f=u!==void 0?u:o}=n;s=+s,l=+l,c=+c,f=+f;let{width:h=640,height:d=AM(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,s-r+c-a)}=n;h=+h,d=+d;const m={width:h,height:d,marginTop:s,marginRight:l,marginBottom:c,marginLeft:f};if(e.fx||e.fy){let{margin:p,marginTop:g=p!==void 0?p:s,marginRight:y=p!==void 0?p:l,marginBottom:b=p!==void 0?p:c,marginLeft:w=p!==void 0?p:f}=n.facet??{};g=+g,y=+y,b=+b,w=+w,m.facet={marginTop:g,marginRight:y,marginBottom:b,marginLeft:w}}return m}function AM({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:u,marginRightDefault:s,marginBottomDefault:l,marginLeftDefault:c}){const f=n?n.scale.domain().length:1,h=$8(i);if(h){const m=r?r.scale.domain().length:1,p=(1.1*f-.1)/(1.1*m-.1)*h,g=Math.max(.1,Math.min(10,p));return Math.round((o-c-s)*g+u+l)}const d=t?$r(t)?t.scale.domain().length:Math.max(7,17/f):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=kd("y",t)/(kd("x",e)*a),p=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,y=p*(o-c-s)-e.insetLeft-e.insetRight;return(m*y+t.insetTop+t.insetBottom)/g+u+l}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function kd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const u=t.scale.exponent();i=s=>Math.pow(s,u);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Dt(r);return Math.abs(i(o)-i(a))}function SM(e,t){const{fx:n,fy:r}=oc(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?v3(i,a).map(([o,u],s)=>({x:o,y:u,i:s})):i?i.map((o,u)=>({x:o,i:u})):a?a.map((o,u)=>({y:o,i:u})):void 0}function EM(e,{x:t,y:n}){return t&&(t=uc(t)),n&&(n=uc(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Mf(e,{fx:t,fy:n}){const r=Rn(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Hr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Hr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Hr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function CM(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function TM(e){const t=[],n=new Uint32Array(jn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const kM=new Map([["top",Js],["right",nl],["bottom",el],["left",tl],["top-left",mo(Js,tl)],["top-right",mo(Js,nl)],["bottom-left",mo(el,tl)],["bottom-right",mo(el,nl)],["top-empty",NM],["right-empty",LM],["bottom-empty",BM],["left-empty",FM],["empty",IM]]);function $M(e){if(e==null)return null;const t=kM.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const $d=new WeakMap;function uc(e){let t=$d.get(e);return t||$d.set(e,t=new gr(ze(e,(n,r)=>[n,r]))),t}function rr(e,t){return uc(e).get(t)}function DM(e,t,n){return t=hr(t),n=hr(n),e.find(r=>Object.is(hr(r.x),t)&&Object.is(hr(r.y),n))}function hs(e,t,n){var r;return(r=DM(e,t,n))==null?void 0:r.empty}function Js(e,{y:t},{y:n}){return t?rr(t,n)===0:!0}function el(e,{y:t},{y:n}){return t?rr(t,n)===t.length-1:!0}function tl(e,{x:t},{x:n}){return t?rr(t,n)===0:!0}function nl(e,{x:t},{x:n}){return t?rr(t,n)===t.length-1:!0}function NM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=rr(t,r);if(a>0)return hs(e,n,t[a-1])}function BM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=rr(t,r);if(a<t.length-1)return hs(e,n,t[a+1])}function FM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=rr(t,n);if(a>0)return hs(e,t[a-1],r)}function LM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=rr(t,n);if(a<t.length-1)return hs(e,t[a+1],r)}function IM(e,t,{empty:n}){return n}function mo(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function rl(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class ht{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:u,fy:s,sort:l,dx:c=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:m=h,marginBottom:p=h,marginLeft:g=h,clip:y=i==null?void 0:i.clip,channels:b,tip:w,render:v}=r;if(this.data=t,this.sort=oi(l)?l:null,this.initializer=si(r).initializer,this.transform=this.initializer?r.transform:ls(r).transform,a===null||a===!1?this.facet=null:(this.facet=nn(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Co&&typeof u=="string"?[u]:u,this.fy=t===Co&&typeof s=="string"?[s]:s),this.facetAnchor=$M(o),n=gg(n),b!==void 0&&(n={...RM(b),...n}),i!==void 0&&(n={...b8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,M])=>{if(as(M.value)){const{value:x,label:C=M.label,scale:E=M.scale}=M.value;M={...M,label:C,scale:E,value:x}}if(t===Co&&typeof M.value=="string"){const{value:x}=M;M={...M,value:[x]}}return[_,M]}).filter(([_,{value:M,optional:x}])=>{if(M!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+c,this.dy=+f,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+g,this.clip=Tg(y),this.tip=OM(w),this.facet==="super"){if(u||s)throw new Error("super-faceting cannot use fx or fy");for(const _ in this.channels){const{scale:M}=n[_];if(!(M!=="x"&&M!=="y"))throw new Error("super-faceting cannot use x or y")}}v!=null&&(this.render=Zg(v,this.render))}initialize(t,n,r){let i=Et(this.data);t===void 0&&i!=null&&(t=[Rn(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=Et(i)),t!==void 0&&(t.original=a);const o=r8(this.channels,i);return this.sort!=null&&a8(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=Kn}=n[i];if(a!==null){const o=r[i];t=t.filter(u=>a(o[u]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&T8(i,a,n,r.projection)}}scale(t,n,r){const i=i8(t,n);return r.projection&&this.project(t,i,r),i}}function Xg(...e){return e.plot=ht.prototype.plot,e}function Zg(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,u){return e.call(this,n,r,i,a,o,(s,l,c,f,h)=>t.call(this,s,l,c,f,h,u))}}function RM(e){return Object.fromEntries(Object.entries(gg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Oa(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function OM(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?nn(e,"tip",["x","y","xy"]):e}function ds(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:tr(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Dd=new WeakMap;function xf(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:u,render:s,...l}={}){return o=+o,i!=null&&(n??(n=null),u={...u,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),u={...u,py:{value:a,scale:"y"}}),{x:n,y:r,channels:u,...l,render:Zg(function(c,f,h,d,m,p){m={...m,pointerSticky:!1};const g=m.ownerSVGElement,{data:y}=m.getMarkState(this);let b=Dd.get(g);b||Dd.set(g,b={sticky:!1,roots:[],renders:[]});let w=b.renders.push(U)-1;const{x:v,y:_,fx:M,fy:x}=f;let C=M?M(c.fx)-d.marginLeft:0,E=x?x(c.fy)-d.marginTop:0;v!=null&&v.bandwidth&&(C+=v.bandwidth()/2),_!=null&&_.bandwidth&&(E+=_.bandwidth()/2);const $=c.fi!=null;let A;if($){let V=b.facetStates;V||(b.facetStates=V=new Map),A=V.get(this),A||V.set(this,A=new Map)}const[L,O]=Ua(this,d),{px:T,py:S}=h,I=T?V=>T[V]:Qg(h,L),ne=S?V=>S[V]:Jg(h,O);let ee,K,q,G;function z(V,Y){if($)if(G&&(G=cancelAnimationFrame(G)),V==null)A.delete(c.fi);else{A.set(c.fi,Y),G=requestAnimationFrame(()=>{G=null;for(const[N,H]of A)if(H<Y||H===Y&&N<c.fi){V=null;break}U(V)});return}U(V)}function U(V){if(ee===V&&q===b.sticky)return;ee=V,q=m.pointerSticky=b.sticky;const Y=ee==null?[]:[ee];$&&(Y.fx=c.fx,Y.fy=c.fy,Y.fi=c.fi);const N=p(Y,f,h,d,m);if(K){if($){const H=K.parentNode,j=K.getAttribute("transform"),D=N.getAttribute("transform");j?N.setAttribute("transform",j):N.removeAttribute("transform"),D?H.setAttribute("transform",D):H.removeAttribute("transform"),N.removeAttribute("aria-label"),N.removeAttribute("aria-description"),N.removeAttribute("aria-hidden")}K.replaceWith(N)}return b.roots[w]=K=N,ee==null&&(A==null?void 0:A.size)>1||m.dispatchValue(ee==null?null:y[ee]),N}function oe(V){if(b.sticky||V.pointerType==="mouse"&&V.buttons===1)return;let[Y,N]=Aw(V);Y-=C,N-=E;const H=Y<d.marginLeft||Y>d.width-d.marginRight?1:e,j=N<d.marginTop||N>d.height-d.marginBottom?1:t;let D=null,be=o*o;for(const J of c){const fe=H*(I(J)-Y),_e=j*(ne(J)-N),Oe=fe*fe+_e*_e;Oe<=be&&(D=J,be=Oe)}if(D!=null&&(e!==1||t!==1)){const J=I(D)-Y,fe=ne(D)-N;be=J*J+fe*fe}z(D,be)}function ue(V){V.pointerType==="mouse"&&ee!=null&&(b.sticky&&b.roots.some(Y=>Y==null?void 0:Y.contains(V.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(Y=>Y(null))):(b.sticky=!0,U(ee)),V.stopImmediatePropagation()))}function ie(V){V.pointerType==="mouse"&&(b.sticky||z(null))}return g.addEventListener("pointerenter",oe),g.addEventListener("pointermove",oe),g.addEventListener("pointerdown",ue),g.addEventListener("pointerleave",ie),U(null)},s)}}function Kg(e){return xf(1,1,e)}function qM(e){return xf(1,.01,e)}function Nd(e){return xf(.01,1,e)}function Qg({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Jg({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function e2(e){return $r(e)&&e.interval===void 0?void 0:"tabular-nums"}function GM(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:u=0,marginBottom:s=16+r,marginLeft:l=0,style:c,ticks:f=(i-l-u)/64,tickFormat:h,fontVariant:d=e2(e),round:m=!0,opacity:p,className:g}=t;const y=gf(t);g=pf(g),p=ft(p)[1],h===null&&(h=()=>null);const b=Ge("svg",y).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(L=>L.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(bf,c);let w=L=>L.selectAll(".tick line").attr("y1",o+s-a),v;const _=m?(L,O)=>L.rangeRound(O):(L,O)=>L.range(O),{type:M,domain:x,range:C,interpolate:E,scale:$,pivot:A}=e;if(E){const L=C===void 0?E:Ou(E.length===1?wf(E):E,C);v=_($.copy(),Zt(at(l,i-u),Math.min(x.length+(A!==void 0),C===void 0?1/0:C.length)));const O=256,T=y.document.createElement("canvas");T.width=O,T.height=1;const S=T.getContext("2d");for(let I=0,ne=O-1;I<O;++I)S.fillStyle=L(I/ne),S.fillRect(I,0,1,1);b.append("image").attr("opacity",p).attr("x",l).attr("y",o).attr("width",i-l-u).attr("height",a-o-s).attr("preserveAspectRatio","none").attr("xlink:href",T.toDataURL())}else if(M==="threshold"){const L=x,O=h===void 0?T=>T:typeof h=="string"?pi(h):h;v=_(zc().domain([-1,C.length-1]),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(C).enter().append("rect").attr("x",(T,S)=>v(S-1)).attr("y",o).attr("width",(T,S)=>v(S)-v(S-1)).attr("height",a-o-s).attr("fill",T=>T),f=ze(L,(T,S)=>S),h=T=>O(L[T],T)}else v=_(Vu().domain(x),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(x).enter().append("rect").attr("x",v).attr("y",o).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",a-o-s).attr("fill",$),w=()=>{};return b.append("g").attr("transform",`translate(0,${a-s})`).call(z3(v).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",nt(d,"normal")).call(w).call(L=>L.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const t2=Math.PI/180;function Va(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=il(n),e.markerMid=il(r),e.markerEnd=il(i)}function il(e){if(e==null||e===!1)return null;if(e===!0)return Fd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Bd("auto");case"arrow-reverse":return Bd("auto-start-reverse");case"dot":return zM;case"circle":case"circle-fill":return Fd;case"circle-stroke":return UM;case"tick":return al("auto");case"tick-x":return al(90);case"tick-y":return al(0)}throw new Error(`invalid marker: ${e}`)}function Bd(e){return(t,n)=>Ge("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function zM(e,t){return Ge("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Fd(e,t){return Ge("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function UM(e,t){return Ge("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function al(e){return(t,n)=>Ge("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let HM=0;function ms(e,t,{stroke:n},r){return n2(e,t,n&&(i=>n[i]),r)}function WM(e,t,{stroke:n},r){return n2(e,t,n&&(([i])=>n[i]),r)}function n2(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const u=new Map;function s(l){return function(c){const f=a(c);let h=u.get(l);h||u.set(l,h=new Map);let d=h.get(f);if(!d){const m=this.parentNode.insertBefore(l(f,o),this),p=`plot-marker-${++HM}`;m.setAttribute("id",p),h.set(f,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",s(t)),n&&e.attr("marker-mid",s(n)),r&&e.attr("marker-end",s(r))}function Pf({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=i2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function r2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=i2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function i2(e,t,n){return e===void 0&&t===void 0&&n===void 0?gt?[1,0]:[.5,.5]:[t,n]}function a2(e,{interval:t}){return e={...Oa(e)},e.interval=sf(e.interval===void 0?t:e.interval),e}function o2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:u,interval:s}=a2(i,n);if(u==null||s==null&&!r)return n;const l=kr(i);if(s==null){let d;const m={transform:p=>d||(d=Ze(p,u)),label:l};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let c,f;function h(d){return f!==void 0&&d===c?f:f=ze(Ze(c=d,u),m=>s.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:h,label:l}:a,[`${e}2`]:o===void 0?{transform:d=>h(d).map(m=>s.offset(m)),label:l}:o})}function u2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=a2(r,n);return i==null||a==null?n:t({...n,[e]:{label:kr(r),transform:o=>{const u=ze(Ze(o,i),l=>a.floor(l)),s=u.map(l=>a.offset(l));return u.map(wt(u)?(l,c)=>l==null||isNaN(l=+l)||(c=s[c],c==null)||isNaN(c=+c)?void 0:new Date((l+c)/2):(l,c)=>l==null||(c=s[c],c==null)?NaN:(+l+ +c)/2)}}})}function VM(e={}){return o2("x",Pf,e)}function s2(e={}){return o2("y",r2,e)}function YM(e={}){return u2("x",Pf,e)}function jM(e={}){return u2("y",r2,e)}const l2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class XM extends ht{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:u=o,insetBottom:s=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},ds(n,"x"),l2),this.insetTop=Be(u),this.insetBottom=Be(s),Va(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y1:l,y2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetTop:y,insetBottom:b}=this;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,{x:s&&o},gt,0).call(w=>w.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",s?v=>s[v]:(p+f-m)/2).attr("x2",s?v=>s[v]:(p+f-m)/2).attr("y1",l&&!li(u)?v=>l[v]+y:d+y).attr("y2",c&&!li(u)?u.bandwidth?v=>c[v]+u.bandwidth()-b:v=>c[v]-b:h-g-b).call(qn,this,r).call(ms,this,r,a)).node()}}class ZM extends ht{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:u=o,insetLeft:s=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},ds(n,"y"),l2),this.insetRight=Be(u),this.insetLeft=Be(s),Va(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{y:s,x1:l,x2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetLeft:y,insetRight:b}=this;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,{y:s&&u},0,gt).call(w=>w.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",l&&!li(o)?v=>l[v]+y:p+y).attr("x2",c&&!li(o)?o.bandwidth?v=>c[v]+o.bandwidth()-b:v=>c[v]-b:f-m-b).attr("y1",s?v=>s[v]:(d+h-g)/2).attr("y2",s?v=>s[v]:(d+h-g)/2).call(qn,this,r).call(ms,this,r,a)).node()}}function Af(e,t){let{x:n=st,y:r,y1:i,y2:a,...o}=s2(t);return[i,a]=c2(r,i,a),new XM(e,{...o,x:n,y1:i,y2:a})}function wu(e,t){let{y:n=st,x:r,x1:i,x2:a,...o}=VM(t);return[i,a]=c2(r,i,a),new ZM(e,{...o,y:n,x1:i,x2:a})}function c2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Sf(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const KM={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},f2="";class Ef extends ht{constructor(t,n={}){const{x:r,y:i,text:a=nr(t)&&bg(t)?st:is,frameAnchor:o,textAnchor:u=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:s=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:g,fontWeight:y,rotate:b}=n,[w,v]=ft(b,0),[_,M]=rx(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:_,optional:!0},rotate:{value:S9(w),optional:!0},text:{value:a,filter:Qc,optional:!0}},n,KM),this.rotate=v,this.textAnchor=nt(u,"middle"),this.lineAnchor=nn(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=h2(f),this.monospace=!!h,this.fontFamily=ct(d),this.fontSize=M,this.fontStyle=ct(p),this.fontVariant=ct(g),this.fontWeight=ct(y),this.frameAnchor=us(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=m2(this),this.clipLine=p2(this)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,rotate:c,text:f,title:h,fontSize:d}=r,{rotate:m}=this,[p,g]=Ua(this,i);return Ge("svg:g",a).call(qt,this,i,a).call(d2,this,f,i).call(Ct,this,{x:s&&o,y:l&&u}).call(y=>y.selectAll().data(t).enter().append("text").call(Gt,this).call(QM,this,f,h).attr("transform",Sf`translate(${s?b=>s[b]:p},${l?b=>l[b]:g})${c?b=>` rotate(${c[b]})`:m?` rotate(${m})`:""}`).call(le,"font-size",d&&(b=>d[b])).call(qn,this,r)).node()}}function h2(e){return e==null?null:nn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function QM(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:u,clipLine:s}=t;e.each(function(l){const c=u(Ar(n[l])??"").map(s),f=c.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let m=0;m<f;++m){if(++d,!c[m])continue;const p=this.ownerDocument.createElementNS(Kr.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(h+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=c[m],this.appendChild(p),d=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=c[0];if(o&&!r&&c[0]!==n[l]){const d=this.ownerDocument.createElementNS(Kr.svg,"title");d.textContent=n[l],this.appendChild(d)}})}function ps(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ra(t,n)),new Ef(e,{...r,x:t,y:n})}function JM(e,{x:t=st,...n}={}){return new Ef(e,jM({...n,x:t}))}function ex(e,{y:t=st,...n}={}){return new Ef(e,YM({...n,y:t}))}function d2(e,t,n){le(e,"text-anchor",t.textAnchor),le(e,"font-family",t.fontFamily),le(e,"font-size",t.fontSize),le(e,"font-style",t.fontStyle),le(e,"font-variant",t.fontVariant===void 0?tx(n):t.fontVariant),le(e,"font-weight",t.fontWeight)}function tx(e){return e&&(T9(e)||wt(e))?"tabular-nums":void 0}const nx=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function rx(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),nx.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function ix(e,t,n){const r=[];let i,a=0;for(const[o,u,s]of ax(e)){if(i===void 0&&(i=o),a>i&&n(e,i,u)>t&&(r.push(e.slice(i,a)+(e[a-1]===f2?"-":"")),i=o),s){r.push(e.slice(i,u)),i=void 0;continue}a=u}return r}function*ax(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case f2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Ld={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Cf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=yi(e,i))r+=Ld[e[i]]??(g2(e,i)?120:Ld.e);return r}function Tf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=yi(e,i))r+=g2(e,i)?126:63;return r}function m2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?Tf:Cf,i=t*100;return a=>ix(a,i,r)}function p2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?Tf:Cf,i=t*100;switch(n){case"clip-start":return a=>Rd(a,i,r,"");case"clip-end":return a=>Id(a,i,r,"");case"ellipsis-start":return a=>Rd(a,i,r,Yr);case"ellipsis-middle":return a=>ox(a,i,r,Yr);case"ellipsis-end":return a=>Id(a,i,r,Yr)}}const Yr="";function ci(e,t,n,r){const i=[];let a=0;for(let o=0,u=0,s=e.length;o<s;o=u){u=yi(e,o);const l=n(e,o,u);if(a+l>t){for(a+=r;a>t&&o>0;)u=o,o=i.pop(),a-=n(e,o,u);return[o,t-a]}a+=l,i.push(o)}return[-1,0]}function Id(e,t,n,r){e=e.trim();const i=n(r),[a]=ci(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function ox(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,u]=ci(e,t/2,n,a),[s]=ci(e,i-t/2-u+a,n,-a);return s<0?r:e.slice(0,o).trimEnd()+r+e.slice(yi(e,s)).trimStart()}function Rd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=ci(e,i-t+a,n,-a);return o<0?r:r+e.slice(yi(e,o)).trimStart()}const sc=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Od=new RegExp("\\p{Extended_Pictographic}","uy");function yi(e,t){return t+=ux(e,t)?2:1,lx(e,t)&&(t=sc.lastIndex),sx(e,t)?yi(e,t+1):t}function b2(e,t){return e.charCodeAt(t)<128}function ux(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function sx(e,t){return e.charCodeAt(t)===8205}function lx(e,t){return b2(e,t)?!1:(sc.lastIndex=t,sc.test(e))}function g2(e,t){return b2(e,t)?!1:(Od.lastIndex=t,Od.test(e))}const cx={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},y2=3.5,fx=y2*5,v2={draw(e,t,n){const r=t*n/fx;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},hx={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},dx=new Map([["arrow",v2],["spike",hx]]);function mx(e){return e&&typeof e.draw=="function"}function px(e){if(mx(e))return e;const t=dx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class w2 extends ht{constructor(t,n={}){const{x:r,y:i,r:a=y2,length:o,rotate:u,shape:s=v2,anchor:l="middle",frameAnchor:c}=n,[f,h]=ft(o,12),[d,m]=ft(u,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,cx),this.r=+a,this.length=h,this.rotate=m,this.shape=px(s),this.anchor=nn(l,"anchor",["start","middle","end"]),this.frameAnchor=us(c)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,length:c,rotate:f}=r,{length:h,rotate:d,anchor:m,shape:p,r:g}=this,[y,b]=Ua(this,i);return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,{x:s&&o,y:l&&u}).call(w=>w.selectAll().data(t).enter().append("path").call(Gt,this).attr("transform",Sf`translate(${s?v=>s[v]:y},${l?v=>l[v]:b})${f?v=>` rotate(${f[v]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?c?v=>` translate(0,${c[v]})`:` translate(0,${h})`:c?v=>` translate(0,${c[v]/2})`:` translate(0,${h/2})`}`).attr("d",c?v=>{const _=Hn();return p.draw(_,c[v],g),_}:(()=>{const v=Hn();return p.draw(v,h,g),v})()).call(qn,this,r)).node()}}function bx(e,t={}){const{x:n=st,...r}=t;return new w2(e,{...r,x:n})}function gx(e,t={}){const{y:n=st,...r}=t;return new w2(e,{...r,y:n})}function ir(e,t){return arguments.length<2&&!nr(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function bs({anchor:e}={},t){return e===void 0?t[0]:nn(e,"anchor",t)}function _2(e){return bs(e,["left","right"])}function M2(e){return bs(e,["right","left"])}function x2(e){return bs(e,["bottom","top"])}function P2(e){return bs(e,["top","bottom"])}function A2(){const[e,t]=ir(...arguments);return E2("y",_2(t),e,t)}function yx(){const[e,t]=ir(...arguments);return E2("fy",M2(t),e,t)}function S2(){const[e,t]=ir(...arguments);return C2("x",x2(t),e,t)}function vx(){const[e,t]=ir(...arguments);return C2("fx",P2(t),e,t)}function E2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:g,x:y,margin:b,marginTop:w=b===void 0?20:b,marginRight:v=b===void 0?t==="right"?40:0:b,marginBottom:_=b===void 0?20:b,marginLeft:M=b===void 0?t==="left"?40:0:b,label:x,labelAnchor:C,labelArrow:E,labelOffset:$,...A}){return m=Be(m),p=Be(p),g=Be(g),C!==void 0&&(C=nn(C,"labelAnchor",["center","top","bottom"])),E=L2(E),Xg(m&&!bt(a)?wx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,x:y,...A}):null,bt(s)?null:Mx(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,x:y,marginTop:w,marginRight:v,marginBottom:_,marginLeft:M,...A}),!bt(s)&&x!==null?ps([],D2({fill:s,fillOpacity:l,...A},function(L,O,T,S,I){const ne=S[e],{marginTop:ee,marginRight:K,marginBottom:q,marginLeft:G}=e==="y"&&I.inset||I,z=C??(ne.bandwidth?"center":"top"),U=$??(t==="right"?K:G)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-ee:z==="bottom"?q-3:0,this.dx=t==="right"?U:-U,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[F2(e,ne,{anchor:t,label:x,labelAnchor:z,labelArrow:E})]}}}})):null)}function C2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:g,y,margin:b,marginTop:w=b===void 0?t==="top"?30:0:b,marginRight:v=b===void 0?20:b,marginBottom:_=b===void 0?t==="bottom"?30:0:b,marginLeft:M=b===void 0?20:b,label:x,labelAnchor:C,labelArrow:E,labelOffset:$,...A}){return m=Be(m),p=Be(p),g=Be(g),C!==void 0&&(C=nn(C,"labelAnchor",["center","left","right"])),E=L2(E),Xg(m&&!bt(a)?_x(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,y,...A}):null,bt(s)?null:xx(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,y,marginTop:w,marginRight:v,marginBottom:_,marginLeft:M,...A}),!bt(s)&&x!==null?ps([],D2({fill:s,fillOpacity:l,...A},function(L,O,T,S,I){const ne=S[e],{marginTop:ee,marginRight:K,marginBottom:q,marginLeft:G}=e==="x"&&I.inset||I,z=C??(ne.bandwidth?"center":"right"),U=$??(t==="top"?ee:q)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-U:U,this.dx=z==="right"?K-3:z==="left"?3-G:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[F2(e,ne,{anchor:t,label:x,labelAnchor:z,labelArrow:E})]}}}})):null)}function wx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetLeft:c=l,insetRight:f=l,dx:h=0,y:d=e==="y"?void 0:null,...m}){return vi(gx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:u,y:d,...m,dx:t==="left"?+h-gt+ +c:+h+gt-f,anchor:"start",length:s,shape:t==="left"?$x:Dx})}function _x(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetTop:c=l,insetBottom:f=l,dy:h=0,x:d=e==="x"?void 0:null,...m}){return vi(bx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:u,x:d,...m,dy:t==="bottom"?+h-gt-f:+h+gt+ +c,anchor:"start",length:s,shape:t==="bottom"?Tx:kx})}function Mx(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*t2):0),text:s,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:c=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:m=h,dx:p=0,y:g=e==="y"?void 0:null,...y}){return vi(ex,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,y:g,...y,dx:t==="left"?+p-a-u+ +d:+p+ +a+ +u-m},function(b,w,v,_,M){f===void 0&&(this.fontVariant=B2(b)),s===void 0&&(M.text=N2(b,w,v,_,t))})}function xx(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*t2):0),text:s,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:m=h,dy:p=0,x:g=e==="x"?void 0:null,...y}){return vi(JM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,x:g,...y,dy:t==="bottom"?+p+ +a+ +u-m:+p-a-u+ +d},function(b,w,v,_,M){f===void 0&&(this.fontVariant=B2(b)),s===void 0&&(M.text=N2(b,w,v,_,t))})}function Px(){const[e,t]=ir(...arguments);return T2("y",_2(t),e,t)}function Ax(){const[e,t]=ir(...arguments);return T2("fy",M2(t),e,t)}function Sx(){const[e,t]=ir(...arguments);return k2("x",x2(t),e,t)}function Ex(){const[e,t]=ir(...arguments);return k2("fx",P2(t),e,t)}function T2(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...u}){return vi(wu,e,t,`${e}-grid`,n,{y:r,x1:a,x2:o,...$2(u)})}function k2(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...u}){return vi(Af,e,t,`${e}-grid`,n,{x:r,y1:a,y2:o,...$2(u)})}function $2({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function D2({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c=!1},f){return[,e]=Ln(e),[,t]=ft(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c,initializer:f}}function vi(e,t,n,r,i,a,o){let u;function s(f,h,d,m,p,g){const y=f==null&&(t==="fx"||t==="fy"),{[t]:b}=m;if(!b)throw new Error(`missing scale: ${t}`);const w=b.domain();let{interval:v,ticks:_,tickFormat:M,tickSpacing:x=t==="x"?80:35}=a;if(typeof _=="string"&&I2(b)&&(v=_,_=void 0),_===void 0&&(_=gi(v,b.type)??Cx(b,x)),f==null){if(nr(_))f=Et(_);else if(zr(_))f=ol(_,...Dt(w));else if(b.interval){let E=b.interval;if(b.ticks){const[$,A]=Dt(w),L=(A-$)/E[La];E=ud(E,L/_)??E,f=ol(E,$,A)}else{f=w;const $=f.length;E=ud(E,$/_)??E,E!==b.interval&&(f=ol(E,...Dt(f)))}if(E===b.interval){const $=Math.round(f.length/_);$>1&&(f=f.filter((A,L)=>L%$===0))}}else b.ticks?f=b.ticks(_):f=w;if(!b.ticks&&f.length&&f!==w){const E=new $u(w);f=f.filter($=>E.has($)),f.length||Yn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[Rn(f)]:u[t]={scale:t,value:st}}o==null||o.call(this,b,f,_,M,u);const C=Object.fromEntries(Object.entries(u).map(([E,$])=>[E,{...$,value:Ze(f,$.value)}]));return y&&(h=g.filterFacets(f,C)),{data:f,facets:h,channels:C}}const l=si(a).initializer,c=e(i,si({...a,initializer:s},l));return i==null?(u=c.channels,c.channels={}):u={},c.ariaLabel=r,c.clip===void 0&&(c.clip=!1),c}function Cx(e,t){const[n,r]=Dt(e.range());return(r-n)/t}function N2(e,t,n,r,i){return{value:kf(e,t,n,r,i)}}function kf(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&wt(t)?f9(e.type,t,i)??Ar:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Ar:typeof r=="string"?(wt(e.domain())?Ba:pi)(r):Ia(r)}function ol(e,t,n){return e.range(t,e.offset(e.floor(n)))}const Tx={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},kx={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},$x={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},Dx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function B2(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function F2(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&I2(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!a)return r;if(a===!0){const o=bM(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function L2(e="auto"){return bt(e)?!1:typeof e=="boolean"?e:nn(e,"labelArrow",["auto","up","right","down","left"])}function I2(e){return wt(e.domain())}function qd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function Nx(e,{opacity:t,...n}={}){if(!$r(e)&&!jg(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return R2(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",ft(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Bx(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:bt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...u}={},s){const[f,h]=Ln(t),[d,m]=Ln(r),p=qd(s,f),g=qd(s,d),y=o*o*Math.PI;return n=ft(n)[1],i=ft(i)[1],a=ft(a)[1],R2(e,u,(b,w,v,_)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",_).attr("fill",f==="color"?M=>p.scale(M):h).attr("fill-opacity",n).attr("stroke",d==="color"?M=>g.scale(M):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",M=>{const x=Hn();return e.scale(M).draw(x,y),x}))}function R2(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=e2(e),swatchSize:o=15,swatchWidth:u=o,swatchHeight:s=o,marginLeft:l=0,className:c,style:f,width:h}=t;const d=gf(t);c=pf(c),i=kf(e.scale,e.domain,void 0,i);const m=Ge("div",d).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,u,s).call(g=>g.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,u,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(g=>g.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",l?`${+l}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",nt(a,"normal")).call(bf,f).node()}const lc=new Map([["symbol",Bx],["color",q2],["opacity",Lx]]);function Fx(e,t,n={}){return(r,i)=>{if(!lc.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return lc.get(r)(e[r],O2(t,n[r],i),a=>e[a])}}function O2({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return N9(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function q2(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return Nx(e,n);case"ramp":return GM(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function Lx({type:e,interpolate:t,...n},{legend:r=!0,color:i=Xn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return q2({type:e,...n,interpolate:Ix(i)},{legend:r,...a})}function Ix(e){const{r:t,g:n,b:r}=Xn(e)||Xn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function Rx(e,t,n){const r=[];for(const[i,a]of lc){const o=n[i];if(o!=null&&o.legend&&i in e){const u=a(e[i],O2(t,e[i],o),s=>e[s]);u!=null&&r.push(u)}}return r}const Ox={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},qx={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Gx extends ht{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:u=r,rx:s,ry:l}=t;super(Co,void 0,t,n==null?Ox:qx),this.anchor=hg(n,"anchor",["top","right","bottom","left"]),this.insetTop=Be(i),this.insetRight=Be(a),this.insetBottom=Be(o),this.insetLeft=Be(u),this.rx=Be(s),this.ry=Be(l)}render(t,n,r,i,a){const{marginTop:o,marginRight:u,marginBottom:s,marginLeft:l,width:c,height:f}=i,{anchor:h,insetTop:d,insetRight:m,insetBottom:p,insetLeft:g,rx:y,ry:b}=this,w=l+g,v=c-u-m,_=o+d,M=f-s-p;return Ge(h?"svg:line":"svg:rect",a).datum(0).call(qt,this,i,a).call(Gt,this).call(qn,this,r).call(Ct,this,{}).call(h==="left"?x=>x.attr("x1",w).attr("x2",w).attr("y1",_).attr("y2",M):h==="right"?x=>x.attr("x1",v).attr("x2",v).attr("y1",_).attr("y2",M):h==="top"?x=>x.attr("x1",w).attr("x2",v).attr("y1",_).attr("y2",_):h==="bottom"?x=>x.attr("x1",w).attr("x2",v).attr("y1",M).attr("y2",M):x=>x.attr("x",w).attr("y",_).attr("width",v-w).attr("height",M-_).attr("rx",y).attr("ry",b)).node()}}function zx(e){return new Gx(e)}const ul={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},Ux=new Set(["geometry","href","src","ariaLabel","scales"]);class Hx extends ht{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&nr(t)&&bg(t)&&(n={...n,title:st});const{x:r,y:i,x1:a,x2:o,y1:u,y2:s,anchor:l,preferredAnchor:c="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:g,lineHeight:y=1,lineWidth:b=20,frameAnchor:w,format:v,textAnchor:_="start",textOverflow:M,textPadding:x=8,title:C,pointerSize:E=12,pathFilter:$="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:u!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:u,scale:"y",optional:s==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:s,scale:"y",optional:u==null},title:{value:C,optional:!0}},n,ul),this.anchor=nc(l,"anchor"),this.preferredAnchor=nc(c,"preferredAnchor"),this.frameAnchor=us(w),this.textAnchor=nt(_,"middle"),this.textPadding=+x,this.pointerSize=+E,this.pathFilter=ct($),this.lineHeight=+y,this.lineWidth=+b,this.textOverflow=h2(M),this.monospace=!!f,this.fontFamily=ct(h),this.fontSize=Be(d),this.fontStyle=ct(m),this.fontVariant=ct(p),this.fontWeight=ct(g);for(const A in ul)A in this.channels&&(this[A]=ul[A]);this.splitLines=m2(this),this.clipLine=p2(this),this.format={...v}}render(t,n,r,i,a){const o=this,{x:u,y:s,fx:l,fy:c}=n,{ownerSVGElement:f,document:h}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:g}=this,{textPadding:y,pointerSize:b,pathFilter:w}=this,{marginTop:v,marginLeft:_}=i,{x1:M,y1:x,x2:C,y2:E,x:$=M??C,y:A=x??E}=r,L=l?l(t.fx)-_:0,O=c?c(t.fy)-v:0,[T,S]=Ua(this,i),I=Qg(r,T),ne=Jg(r,S),ee=m?Tf:Cf,K=ee(Yr);let q,G;"title"in r?(q=r.channels,G=Xx):(q=jx.call(this,r,n),G=Zx);const z=Ge("svg:g",a).call(qt,this,i,a).call(d2,this).call(Ct,this,{x:$&&u,y:A&&s}).call(ue=>ue.selectAll().data(t).enter().append("g").attr("transform",ie=>`translate(${Math.round(I(ie))},${Math.round(ne(ie))})`).call(Gt,this).call(ie=>ie.append("path").attr("filter",w)).call(ie=>ie.append("text").each(function(V){const Y=Wi(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const N=G.call(o,V,t,q,n,r);if(typeof N=="string")for(const H of o.splitLines(N))U(Y,{value:o.clipLine(H)});else{const H=new Set;for(const j of N){const{label:D=""}=j;D&&H.has(D)||(H.add(D),U(Y,j))}}})));function U(ue,{label:ie,value:V,color:Y,opacity:N}){ie??(ie=""),V??(V="");const H=Y!=null||N!=null;let j,D=g*100;const[be]=ci(ie,D,ee,K);if(be>=0)ie=ie.slice(0,be).trimEnd()+Yr,j=V.trim(),V="";else{(ie||!V&&!H)&&(V=" "+V);const[fe]=ci(V,D-ee(ie),ee,K);fe>=0&&(j=V.trim(),V=V.slice(0,fe).trimEnd()+Yr)}const J=ue.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");ie&&J.append("tspan").attr("font-weight","bold").text(ie),V&&J.append(()=>h.createTextNode(V)),H&&J.append("tspan").text(" ").attr("fill",Y).attr("fill-opacity",N).style("user-select","none"),j&&J.append("title").text(j)}function oe(){const{width:ue,height:ie}=i.facet??i;z.selectChildren().each(function(V){let{x:Y,width:N,height:H}=this.getBBox();N=Math.round(N),H=Math.round(H);let j=d;if(j===void 0){const J=I(V)+L,fe=ne(V)+O,_e=J+N+b+y*2<ue,Oe=J-N-b-y*2>0,tt=fe+H+b+y*2<ie,Ne=fe-H-b-y*2>0;j=_e&&Oe?tt&&Ne?o.preferredAnchor:Ne?"bottom":"top":tt&&Ne?_e?"left":"right":(_e||Oe)&&(tt||Ne)?`${Ne?"bottom":"top"}-${_e?"left":"right"}`:o.preferredAnchor}const D=this.firstChild,be=this.lastChild;if(D.setAttribute("d",Yx(j,b,y,N,H)),Y)for(const J of be.childNodes)J.setAttribute("x",-Y);be.setAttribute("y",`${+Wx(j,be.childNodes.length,p).toFixed(6)}em`),be.setAttribute("transform",`translate(${Vx(j,b,y,N,H)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(oe):typeof requestAnimationFrame<"u"&&requestAnimationFrame(oe)),z.node()}}function G2(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ra(t,n)),new Hx(e,{...r,x:t,y:n})}function Wx(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Vx(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Yx(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function jx({channels:e},t){var i,a;const n={};let r=this.format;r=Gd(r,e,"x"),r=Gd(r,e,"y"),this.format=r;for(const o in r){const u=r[o];if(!(u===null||u===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const s=bd(e,o);s&&(n[o]=s)}}for(const o in e){if(o in n||o in r||Ux.has(o))continue;const u=bd(e,o);u&&(n[o]=u)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const u=this.format[o];if(typeof u=="string"){const s=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(wt(s)?Ba:pi)(u)}else if(u===void 0||u===!0){const s=t[o];this.format[o]=s!=null&&s.bandwidth?kf(s,s.domain()):Ar}}return n}function Gd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([u])=>u===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function Xx(e,t,{title:n}){return Ar(n.value[e],e)}function*Zx(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:_u(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:Ud(r,n,"x"),value:zd(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:Ud(r,n,"y"),value:zd(this.format.y2,n.y1,o,e)};else{const u=o.value[e],s=o.scale;if(!Kn(u)&&s==null)continue;yield{label:_u(r,n,a),value:this.format[a](u,e),color:s==="color"?i[a][e]:null,opacity:s==="opacity"?i[a][e]:null}}}}function zd(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Ud(e,t,n){const r=_u(e,t,`${n}1`,n),i=_u(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function _u(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function zt(e={}){var K;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:u}=e,s=pf(e.className),l=e.marks===void 0?[]:Wd(e.marks);l.push(...iP(l));const c=nP(t,e),f=new Map;for(const q of l){const G=Vd(q,c,e);G&&f.set(q,G)}const h=new Map;c&&Ci(h,[c],e),Ci(h,f,e);const d=Wd(aP(l,h,e));for(const q of d){const G=Vd(q,c,e);G&&f.set(q,G)}l.unshift(...d);let m=SM(h,e);if(m!==void 0){const q=c?rl(m,c):void 0;for(const z of l){if(z.facet===null||z.facet==="super")continue;const U=f.get(z);U!==void 0&&(U.facetsIndex=z.fx!=null||z.fy!=null?rl(m,U):q)}const G=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((U,oe)=>{(U==null?void 0:U.length)>0&&G.add(oe)});m.forEach(0<G.size&&G.size<m.length?(z,U)=>z.empty=!G.has(U):z=>z.empty=!1);for(const z of l)if(z.facet==="exclude"){const U=f.get(z);U!==void 0&&(U.facetsIndex=TM(U.facetsIndex))}}for(const q of Re.keys())ec(e[q])&&q!=="fx"&&q!=="fy"&&h.set(q,[]);const p=new Map;for(const q of l){if(p.has(q))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:G,channels:z}=f.get(q)??{},{data:U,facets:oe,channels:ue}=q.initialize(G,z,e);$f(ue,e),p.set(q,{data:U,facets:oe,channels:ue})}const g=oc(Ci(h,p,e),e),y=PM(g,l,e);mM(g,y);const b=Ad(g),{fx:w,fy:v}=b,_=w||v?Wg(g,y):y,M=w||v?hP(b,y):y,x=gf(e),C=x.document,E=Lu("svg").call(C.documentElement);let $=E;x.ownerSVGElement=E,x.className=s,x.projection=S8(e,_),x.filterFacets=(q,G)=>rl(m,{channels:G,groups:Mf(q,G)}),x.getMarkState=q=>{const G=p.get(q),z=f.get(q);return{...G,channels:{...G.channels,...z==null?void 0:z.channels}}},x.dispatchValue=q=>{$.value!==q&&($.value=q,$.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[q,G]of p)if(q.initializer!=null){const z=q.facet==="super"?M:_,U=q.initializer(G.data,G.facets,G.channels,b,z,x);if(U.data!==void 0&&(G.data=U.data),U.facets!==void 0&&(G.facets=U.facets),U.channels!==void 0){const{fx:oe,fy:ue,...ie}=U.channels;tP(ie),Object.assign(G.channels,ie);for(const V of Object.values(ie)){const{scale:Y}=V;Y!=null&&!F9(Re.get(Y))&&(z2(V,e),A.add(Y))}(oe!=null||ue!=null)&&f.set(q,!0)}}if(A.size){const q=new Map;Ci(q,p,e,oe=>A.has(oe)),Ci(h,p,e,oe=>A.has(oe));const G=fP(oc(q,e),g),{scales:z,...U}=Ad(G);Object.assign(g,G),Object.assign(b,U),Object.assign(b.scales,z)}let L,O;m!==void 0&&(L={x:w==null?void 0:w.domain(),y:v==null?void 0:v.domain()},m=EM(m,L),O=CM(w,v,y));for(const[q,G]of p)G.values=q.scale(G.channels,b,x);const{width:T,height:S}=y;Wi(E).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",T).attr("height",S).attr("viewBox",`0 0 ${T} ${S}`).attr("aria-label",o).attr("aria-description",u).call(q=>q.append("style").text(`:where(.${s}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${s} text),
:where(.${s} tspan) {
  white-space: pre;
}`)).call(bf,n);for(const q of l){const{channels:G,values:z,facets:U}=p.get(q);if(m===void 0||q.facet==="super"){let oe=null;if(U&&(oe=U[0],oe=q.filter(oe,G,z),oe.length===0))continue;const ue=q.render(oe,b,z,M,x);if(ue==null)continue;E.appendChild(ue)}else{let oe;for(const ue of m){if(!(((K=q.facetAnchor)==null?void 0:K.call(q,m,L,ue))??!ue.empty))continue;let ie=null;if(U){const Y=f.has(q);if(ie=U[Y?ue.i:0],ie=q.filter(ie,G,z),ie.length===0)continue;!Y&&ie===U[0]&&(ie=M9(ie)),ie.fx=ue.x,ie.fy=ue.y,ie.fi=ue.i}const V=q.render(ie,b,z,_,x);if(V!=null){(oe??(oe=Wi(E).append("g"))).append(()=>V).datum(ue);for(const Y of["aria-label","aria-description","aria-hidden","transform"])V.hasAttribute(Y)&&(oe.attr(Y,V.getAttribute(Y)),V.removeAttribute(Y))}}oe==null||oe.selectChildren().attr("transform",O)}}const I=Rx(g,x,e),{figure:ne=r!=null||i!=null||a!=null||I.length>0}=e;ne&&($=C.createElement("figure"),$.className=`${s}-figure`,$.style.maxWidth="initial",r!=null&&$.append(Hd(C,r,"h2")),i!=null&&$.append(Hd(C,i,"h3")),$.append(...I,E),a!=null&&$.append(Kx(C,a))),$.scale=MM(b.scales),$.legend=Fx(g,x,e);const ee=m8();return ee>0&&Wi(E).append("text").attr("x",T).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${ee.toLocaleString("en-US")} warning${ee===1?"":"s"}. Please check the console.`),$}function Hd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Kx(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Qx({marks:e=[],...t}={}){return zt({...t,marks:[...e,this]})}ht.prototype.plot=Qx;function Wd(e){return e.flat(1/0).filter(t=>t!=null).map(Jx)}function Jx(e){return typeof e.render=="function"?e:new eP(e)}class eP extends ht{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function $f(e,t){for(const n in e)z2(e[n],t);return e}function z2(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:u=a?s=>s*100:pg(o,i)}=t[n]??{};u!=null&&(e.value=ze(e.value,u),e.transform=!1)}function tP(e){for(const t in e)Pg(t,e[t])}function Ci(e,t,n,r=b9){var i,a;for(const{channels:o}of t.values())for(const u in o){const s=o[u],{scale:l}=s;if(l!=null&&r(l))if(l==="projection"){if(!k8(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,f=((a=n.y)==null?void 0:a.domain)===void 0;if(c||f){const[h,d]=D8(s);c&&sl(e,"x",h),f&&sl(e,"y",d)}}}else sl(e,l,s)}return e}function sl(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function nP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=Et(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=da(i,{value:n,scale:"fx"})),r!=null&&(a.fy=da(i,{value:r,scale:"fy"})),$f(a,t);const o=Mf(i,a);return{channels:a,groups:o,data:e.data}}function Vd(e,t,n){var s;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=Et(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const c={};return r!=null&&(c.fx=da(l,{value:r,scale:"fx"})),i!=null&&(c.fy=da(l,{value:i,scale:"fy"})),$f(c,n),{channels:c,groups:Mf(l,c)}}if(t===void 0)return;const{channels:a,groups:o,data:u}=t;if(e.facet!=="auto"||e.data===u)return{channels:a,groups:o};u.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((s=Et(e.data))==null?void 0:s.length)===u.length&&Yn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function rP(e,t={}){return si({...t,x:null,y:null},(n,r,i,a,o,u)=>u.getMarkState(e))}function iP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?qM:/^y$/i.test(i)?Nd:Kg,r=i(rP(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===Nd?"left":"bottom");const o=G2(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function aP(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:u={},axis:s,grid:l,facet:c={},facet:{axis:f=s,grid:h}=c,x:{axis:d=s,grid:m=d===null?null:l}=i,y:{axis:p=s,grid:g=p===null?null:l}=a,fx:{axis:y=f,grid:b=y===null?null:h}=o,fy:{axis:w=f,grid:v=w===null?null:h}=u}=n;(r||!ec(i)&&!Yd("x",e))&&(d=m=null),(r||!ec(a)&&!Yd("y",e))&&(p=g=null),t.has("fx")||(y=b=null),t.has("fy")||(w=v=null),d===void 0&&(d=!go(e,"x")),p===void 0&&(p=!go(e,"y")),y===void 0&&(y=!go(e,"fx")),w===void 0&&(w=!go(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),y===!0&&(y=d==="top"||d===null?"bottom":"top"),w===!0&&(w=p==="right"||p===null?"left":"right");const _=[];return bo(_,v,Ax,u),po(_,w,yx,"right","left",c,u),bo(_,b,Ex,o),po(_,y,vx,"top","bottom",c,o),bo(_,g,Px,a),po(_,p,A2,"left","right",n,a),bo(_,m,Sx,i),po(_,d,S2,"bottom","top",n,i),_}function po(e,t,n,r,i,a,o){if(!t)return;const u=oP(t);o=uP(u?r:t,a,o);const{line:s}=o;(n===A2||n===S2)&&s&&!ha(s)&&e.push(zx(sP(o))),e.push(n(o)),u&&e.push(n({...o,anchor:i,label:null}))}function bo(e,t,n,r){!t||ha(t)||e.push(n(lP(t,r)))}function oP(e){return/^\s*both\s*$/i.test(e)}function uP(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:m,labelOffset:p}}function sP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function lP(e,{stroke:t=os(e)?e:void 0,ticks:n=cP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function cP(e){switch(typeof e){case"number":return!0;case"string":return!os(e)}return nr(e)||typeof(e==null?void 0:e.range)=="function"}function go(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function Yd(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function fP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function hP({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=_f(n),l=e&&jd(e),c=t&&jd(t);return{marginTop:t?c[0]:r,marginRight:e?u-l[1]:i,marginBottom:t?s-c[1]:a,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:u,height:s}}function jd(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const dP=new Map([["basis",w7],["basis-closed",_7],["basis-open",M7],["bundle",x7],["bump-x",l7],["bump-y",c7],["cardinal",P7],["cardinal-closed",A7],["cardinal-open",S7],["catmull-rom",E7],["catmull-rom-closed",C7],["catmull-rom-open",T7],["linear",Fa],["linear-closed",k7],["monotone-x",$7],["monotone-y",D7],["natural",N7],["step",B7],["step-after",L7],["step-before",F7]]);function U2(e=Fa,t){if(typeof e=="function")return e;const n=dP.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function H2(e=fi,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?fi:U2(e,t)}function fi(e){return Fa(e)}function mP(e={y:"count"},t={}){[e,t]=gP(e,t);const{x:n,y:r}=t;return bP(yP(n,t,st),null,null,r,e,Pf(t))}function pP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=mf}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function W2(e={}){return pP(mP,"y",ds(e,"x"))}function bP(e,t,n,r,{data:i=xg,filter:a=vu,sort:o,reverse:u,...s}={},l={}){e=Xd(e),t=Xd(t),s=wP(s,l),i=j2(i,st),o=o==null?void 0:V2("sort",o,l),a=a==null?void 0:Y2("filter",a,l),n!=null&&co(s,"x","x1","x2")&&(n=null),r!=null&&co(s,"y","y1","y2")&&(r=null);const[c,f]=An(e),[h,d]=An(e),[m,p]=An(t),[g,y]=An(t),[b,w]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[v,_]=An(b),{x:M,y:x,z:C,fill:E,stroke:$,x1:A,x2:L,y1:O,y2:T,domain:S,cumulative:I,thresholds:ne,interval:ee,...K}=l,[q,G]=An(C),[z]=Ln(E),[U]=Ln($),[oe,ue]=An(z),[ie,V]=An(U);return{..."z"in l&&{z:q||C},..."fill"in l&&{fill:oe||E},..."stroke"in l&&{stroke:ie||$},...ls(K,(Y,N,H)=>{const j=mg(Ze(Y,b),H==null?void 0:H[w]),D=Ze(Y,C),be=Ze(Y,z),J=Ze(Y,U),fe=X9(s,{z:D,fill:be,stroke:J}),_e=[],Oe=[],tt=j&&_([]),Ne=D&&G([]),Ut=be&&ue([]),De=J&&V([]),Dr=e&&f([]),Ht=e&&d([]),te=t&&p([]),ve=t&&y([]),Me=xP(e,t,Y);let Te=0;for(const ke of s)ke.initialize(Y);o&&o.initialize(Y),a&&a.initialize(Y);for(const ke of N){const we=[];for(const We of s)We.scope("facet",ke);o&&o.scope("facet",ke),a&&a.scope("facet",ke);for(const[We,F]of hd(ke,fe))for(const[re,ge]of hd(F,j))for(const[_t,an]of Me(ge))if(!(a&&!a.reduce(_t,an))){we.push(Te++),Oe.push(i.reduceIndex(_t,Y,an)),j&&tt.push(re),D&&Ne.push(fe===D?We:D[(_t.length>0?_t:ge)[0]]),be&&Ut.push(fe===be?We:be[(_t.length>0?_t:ge)[0]]),J&&De.push(fe===J?We:J[(_t.length>0?_t:ge)[0]]),Dr&&(Dr.push(an.x1),Ht.push(an.x2)),te&&(te.push(an.y1),ve.push(an.y2));for(const Xa of s)Xa.reduce(_t,an);o&&o.reduce(_t)}_e.push(we)}return Z9(_e,o,u),{data:Oe,facets:_e}}),...!co(s,"x")&&(c?{x1:c,x2:h,x:tc(c,h)}:{x:M,x1:A,x2:L}),...!co(s,"y")&&(m?{y1:m,y2:g,y:tc(m,g)}:{y:x,y1:O,y2:T}),...v&&{[w]:v},...Object.fromEntries(s.map(({name:Y,output:N})=>[Y,N]))}}function gP({cumulative:e,domain:t,thresholds:n,interval:r,...i},a){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...a}]}function yP(e,{cumulative:t,domain:n,thresholds:r,interval:i},a){return e={...Oa(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=a),e.thresholds=vP(e.thresholds,e.interval),e}function Xd(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Dt,thresholds:i}=e,a=o=>{let u=Ze(o,t),s;if(wt(u)||MP(i)){u=ze(u,fg,Float64Array);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!zr(i)?i(u,c,f):i;typeof h=="number"&&(h=up(c,f,h)),zr(h)&&(r===Dt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f))),s=h}else{u=cn(u);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!zr(i)?i(u,c,f):i;if(typeof h=="number")if(r===Dt){let d=zo(c,f,h);if(isFinite(d))if(d>0){let m=Math.round(c/d),p=Math.round(f/d);m*d<=c||--m,p*d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let y=0;y<g;++y)h[y]=(m+y)*d}else if(d<0){d=-d;let m=Math.round(c*d),p=Math.round(f*d);m/d<=c||--m,p/d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let y=0;y<g;++y)h[y]=(m+y)/d}else h=[c];else h=[c]}else h=ea(c,f,h);else zr(h)&&(r===Dt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f)));s=h}const l=[];if(s.length===1)l.push([s[0],s[0]]);else for(let c=1;c<s.length;++c)l.push([s[c-1],s[c]]);return l.bin=(n<0?AP:n>0?PP:Df)(l,s,u),l};return a.label=kr(t),a}function vP(e,t,n=Zd){if(e===void 0)return t===void 0?n:gi(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return k3;case"scott":return v1;case"sturges":return S3;case"auto":return Zd}return nf(e)}return e}function wP(e,t){return V9(e,t,V2)}function V2(e,t,n){return _g(e,t,n,Y2)}function Y2(e,t,n){return Mg(e,t,n,j2)}function j2(e,t){return df(e,t,_P)}function _P(e){switch(`${e}`.toLowerCase()){case"x":return SP;case"x1":return CP;case"x2":return TP;case"y":return EP;case"y1":return kP;case"y2":return $P}throw new Error(`invalid bin reduce: ${e}`)}function Zd(e,t,n){return Math.min(200,v1(e,t,n))}function MP(e){return A9(e)||nr(e)&&wt(e)}function xP(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries()){const c=i.bin(o[u]);for(const[f,[h,d]]of i.entries())yield[c[f],{data:n,x1:s,y1:h,x2:l,y2:d}]}}:r?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries())yield[o[u],{data:n,x1:s,x2:l}]}:function*(a){const o=i.bin(a);for(const[u,[s,l]]of i.entries())yield[o[u],{data:n,y1:s,y2:l}]}}function Df(e,t,n){return t=cn(t),r=>{var a;const i=e.map(()=>[]);for(const o of r)(a=i[Tu(t,n[o])-1])==null||a.push(o);return i}}function PP(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=1,u=a.length;o<u;++o){const s=a[o-1],l=a[o];for(const c of s)l.push(c)}return a}}function AP(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=a.length-2;o>=0;--o){const u=a[o+1],s=a[o];for(const l of u)s.push(l)}return a}}function X2(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const SP={reduceIndex(e,t,{x1:n,x2:r}){return X2(n,r)}},EP={reduceIndex(e,t,{y1:n,y2:r}){return X2(n,r)}},CP={reduceIndex(e,t,{x1:n}){return n}},TP={reduceIndex(e,t,{x2:n}){return n}},kP={reduceIndex(e,t,{y1:n}){return n}},$P={reduceIndex(e,t,{y2:n}){return n}};function Z2(e={}){return dg(e)?e:{...e,y:st}}function DP(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const u of t)for(const s of u)r[s]&&++i,r[s]=1;if(i===0)return{data:e,facets:t};e=fa(e);const a=e[lg]=new Uint32Array(n+i);t=t.map(u=>fa(u,Uint32Array));let o=n;r.fill(0);for(const u of t)for(let s=0,l=u.length;s<l;++s){const c=u[s];r[c]?(u[s]=o,e[o]=e[c],a[o]=c,++o):a[c]=c,r[c]=1}return{data:e,facets:t}}function NP(e={},t={}){arguments.length===1&&([e,t]=BP(e));const{x1:n,x:r=n,y:i,...a}=t,[o,u,s,l]=LP(r,i,"x","y",e,a);return{...o,x1:n,x:u,y1:s,y2:l,y:tc(s,l)}}function K2({y:e,y1:t,y2:n,...r}={}){return r=ds(r,"x"),t===void 0&&n===void 0?NP({y:e,...r}):([t,n]=_9(e,t,n),{...r,y1:t,y2:n})}function BP(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const FP={length:!0};function LP(e,t=p9,n,r,{offset:i,order:a,reverse:o},u){if(t===null)throw new Error(`stack requires ${r}`);const s=of(u),[l,c]=An(e),[f,h]=yu(t),[d,m]=yu(t);return f.hint=d.hint=FP,i=IP(i),a=qP(a,i,r),[ls(u,(p,g,y)=>{({data:p,facets:g}=DP(p,g));const b=e==null?void 0:c(mg(Ze(p,e),y==null?void 0:y[n])),w=Ze(p,t,Float64Array),v=Ze(p,s),_=a&&a(p,b,w,v),M=p.length,x=h(new Float64Array(M)),C=m(new Float64Array(M)),E=[];for(const $ of g){const A=b?Array.from(Du($,L=>b[L]).values()):[$];if(_)for(const L of A)L.sort(_);for(const L of A){let O=0,T=0;o&&L.reverse();for(const S of L){const I=w[S];I<0?O=C[S]=(x[S]=O)+I:I>0?T=C[S]=(x[S]=T)+I:C[S]=x[S]=T}}E.push(A)}return i&&i(E,x,C,v),{data:p,facets:g}}),l,f,d]}function IP(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return RP;case"center":case"silhouette":return OP;case"wiggle":return J2}throw new Error(`unknown offset: ${e}`)}}function Q2(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function RP(e,t,n){for(const r of e)for(const i of r){const[a,o]=Q2(i,n);for(const u of i){const s=1/(o-a||1);t[u]=s*(t[u]-a),n[u]=s*(n[u]-a)}}}function OP(e,t,n){for(const r of e){for(const i of r){const[a,o]=Q2(i,n);for(const u of i){const s=(o+a)/2;t[u]-=s,n[u]-=s}}ey(r,t,n)}ty(e,t,n)}function J2(e,t,n,r){for(const i of e){const a=new gr;let o=0;for(const u of i){let s=-1;const l=u.map(d=>Math.abs(n[d]-t[d])),c=u.map(d=>{s=r?r[d]:++s;const m=n[d]-t[d],p=a.has(s)?m-a.get(s):0;return a.set(s,m),p}),f=[0,...w3(c)];for(const d of u)t[d]+=o,n[d]+=o;const h=jn(l);h&&(o-=jn(l,(d,m)=>(c[m]/2+f[m])*d)/h)}ey(i,t,n)}ty(e,t,n)}function ey(e,t,n){const r=Dn(e,i=>Dn(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function ty(e,t,n){const r=e.length;if(r===1)return;const i=e.map(u=>u.flat()),a=i.map(u=>(Dn(u,s=>t[s])+It(u,s=>n[s]))/2),o=Dn(a);for(let u=0;u<r;u++){const s=o-a[u];for(const l of i[u])t[l]+=s,n[l]+=s}}function qP(e,t,n){if(e===void 0&&t===J2)return Kd(Jt);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?gu:Jt;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return GP(i);case"z":return zP(i);case"sum":return UP(i);case"appearance":return HP(i);case"inside-out":return Kd(i)}return Qd(cg(e))}if(typeof e=="function")return(e.length===1?Qd:WP)(e);if(Array.isArray(e))return VP(e);throw new Error(`invalid order: ${e}`)}}function GP(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function zP(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function UP(e){return gs(e,(t,n,r,i)=>Pc(Rn(t),a=>jn(a,o=>r[o]),a=>i[a]))}function HP(e){return gs(e,(t,n,r,i)=>Pc(Rn(t),a=>n[y1(a,o=>r[o])],a=>i[a]))}function Kd(e){return gs(e,(t,n,r,i)=>{const a=Rn(t),o=Pc(a,f=>n[y1(f,h=>r[h])],f=>i[f]),u=Hr(a,f=>jn(f,h=>r[h]),f=>i[f]),s=[],l=[];let c=0;for(const f of o)c<0?(c+=u.get(f),s.push(f)):(c-=u.get(f),l.push(f));return l.reverse().concat(s)})}function Qd(e){return t=>{const n=Ze(t,e);return(r,i)=>Jt(n[r],n[i])}}function WP(e){return t=>(n,r)=>e(t[n],t[r])}function VP(e){return gs(Jt,()=>e)}function gs(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new gr(t(n,r,i,a).map((u,s)=>[u,s]));return(u,s)=>e(o.get(a[u]),o.get(a[s]))}}const YP={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class jP extends ht{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,z:u,curve:s,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:of(n),optional:!0}},n,YP),this.z=u,this.curve=U2(s,l)}filter(t){return t}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,n,0,0).call(c=>c.selectAll().data(Cg(t,[o,u,s,l],this,r)).enter().append("path").call(Gt,this).call(Eg,this,r).attr("d",s7().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>u[f]).x1(f=>s[f]).y1(f=>l[f]))).node()}}function XP(e,t){const{x:n=is,...r}=W2(t);return new jP(e,K2(Z2({...r,x1:n,x2:void 0})))}const ZP={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class KP extends ht{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:u,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,ZP),this.curve=H2(u,s),Va(this,n)}project(t,n,r){this.curve!==fi&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r,{curve:c}=this;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Gt,this).attr("d",c===fi&&a.projection?QP(a.projection,o,u,s,l):h=>{const d=Hn(),m=c(d);return m.lineStart(),m.point(o[h],u[h]),m.point(s[h],l[h]),m.lineEnd(),d}).call(qn,this,r).call(ms,this,r,a)).node()}}function QP(e,t,n,r,i){const a=zu(e);return t=cn(t),n=cn(n),r=cn(r),i=cn(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function Nf(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...u}={}){return[n,r]=Jd(t,n,r),[a,o]=Jd(i,a,o),new KP(e,{...u,x1:n,x2:r,y1:a,y2:o})}function Jd(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class ny extends ht{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:u=a,insetBottom:s=a,insetLeft:l=a,rx:c,ry:f}=r;this.insetTop=Be(o),this.insetRight=Be(u),this.insetBottom=Be(s),this.insetLeft=Be(l),this.rx=nt(c,"auto"),this.ry=nt(f,"auto")}render(t,n,r,i,a){const{rx:o,ry:u}=this;return Ge("svg:g",a).call(qt,this,i,a).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("rect").call(Gt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(le,"rx",o).call(le,"ry",u).call(qn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}}const JP={ariaLabel:"bar"};class eA extends ny{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,JP)}_transform(t,n,{y:r}){t.call(Ct,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return li(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:u,insetBottom:s}=this;return li(t)?o-i-a-u-s:l=>Math.max(0,Math.abs(r[l]-n[l])-u-s)}}function tA(e,t={}){return w9(t)||(t={...t,x:is,y2:st}),new eA(e,K2(s2(Z2(t))))}const nA={ariaLabel:"cell"};class rA extends ny{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,nA)}_transform(t,n){t.call(Ct,n,{},0,0)}}function ry(e,{x:t,y:n,...r}={}){return[t,n]=Ra(t,n),new rA(e,{...r,x:t,y:n})}const iA={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function aA(e){return e.sort===void 0&&e.reverse===void 0?U9({channel:"-r"},e):e}class oA extends ht{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:u=la,frameAnchor:s}=n,[l,c]=ft(o,0),[f,h]=G9(u),[d,m]=ft(a,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:ns,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},aA(n),iA),this.r=m,this.rotate=c,this.symbol=h,this.frameAnchor=us(s);const{channels:p}=this,{symbol:g}=p;if(g){const{fill:y,stroke:b}=p;g.hint={fill:y?y.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,r:c,rotate:f,symbol:h}=r,{r:d,rotate:m,symbol:p}=this,[g,y]=Ua(this,i),b=p===la,w=c?void 0:d*d*Math.PI;return Jc(d)&&(t=[]),Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,{x:s&&o,y:l&&u}).call(v=>v.selectAll().data(t).enter().append(b?"circle":"path").call(Gt,this).call(b?_=>{_.attr("cx",s?M=>s[M]:g).attr("cy",l?M=>l[M]:y).attr("r",c?M=>c[M]:d)}:_=>{_.attr("transform",Sf`translate(${s?M=>s[M]:g},${l?M=>l[M]:y})${f?M=>` rotate(${f[M]})`:m?` rotate(${m})`:""}`).attr("d",c&&h?M=>{const x=Hn();return h[M].draw(x,c[M]*c[M]*Math.PI),x}:c?M=>{const x=Hn();return p.draw(x,c[M]*c[M]*Math.PI),x}:h?M=>{const x=Hn();return h[M].draw(x,w),x}:(()=>{const M=Hn();return p.draw(M,w),M})())}).call(qn,this,r)).node()}}function ys(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ra(t,n)),new oA(e,{...r,x:t,y:n})}const uA={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class iy extends ht{constructor(t,n={}){const{x:r,y:i,z:a,curve:o,tension:u}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:of(n),optional:!0}},n,uA),this.z=a,this.curve=H2(o,u),Va(this,n)}filter(t){return t}project(t,n,r){this.curve!==fi&&super.project(t,n,r)}render(t,n,r,i,a){const{x:o,y:u}=r,{curve:s}=this;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,n).call(l=>l.selectAll().data(Cg(t,[o,u],this,r)).enter().append("path").call(Gt,this).call(Eg,this,r).call(WM,this,r,a).attr("d",s===fi&&a.projection?sA(a.projection,o,u):Tb().curve(s).defined(c=>c>=0).x(c=>o[c]).y(c=>u[c]))).node()}}function sA(e,t,n){const r=zu(e);return t=cn(t),n=cn(n),i=>{let a=[];const o=[a];for(const u of i)u===-1?(a=[],o.push(a)):a.push([t[u],n[u]]);return r({type:"MultiLineString",coordinates:o})}}function lA(e,{x:t,y:n,...r}={}){return[t,n]=Ra(t,n),new iy(e,{...r,x:t,y:n})}function cA(e,{x:t=is,y:n=st,...r}={}){return new iy(e,W2({...r,x:t,y:n}))}const fA={ariaLabel:"tick",fill:null,stroke:"currentColor"};class hA extends ht{constructor(t,n,r){super(t,n,r,fA),Va(this,r)}render(t,n,r,i,a){return Ge("svg:g",a).call(qt,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(qn,this,r).call(ms,this,r,a)).node()}}class dA extends hA{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Be(o),this.insetBottom=Be(u)}_transform(t,n,{x:r}){t.call(Ct,n,{x:r},gt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function Bf(e,{x:t=st,...n}={}){return new dA(e,{...n,x:t})}function mA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:ye,o:ye,d(a){a&&Z(t),e[4](null)}}}function pA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;en(()=>{const s=zt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Bf(r,{x:l=>l})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class bA extends Je{constructor(t){super(),Qe(this,t,pA,mA,Ke,{pattern:3,width:0,height:1})}}function gA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:ye,o:ye,d(a){a&&Z(t),e[4](null)}}}function yA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;en(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=zt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},marks:[tA(s,{x:(c,f)=>f+1,y:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class vA extends Je{constructor(t){super(),Qe(this,t,yA,gA,Ke,{pattern:3,width:0,height:1})}}function wA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:ye,o:ye,d(a){a&&Z(t),e[4](null)}}}function _A(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;en(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=zt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[ry(s,{x:(c,f)=>f+1,fill:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class MA extends Je{constructor(t){super(),Qe(this,t,_A,wA,Ke,{pattern:3,width:0,height:1})}}function xA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:ye,o:ye,d(a){a&&Z(t),e[5](null)}}}function PA(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;en(()=>{if(n(2,u.textContent="",u),!r)return;const l=zt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[cA(r,{x:(c,f)=>f/i,y:c=>c})]});u.appendChild(l)});function s(l){ut[l?"unshift":"push"](()=>{u=l,n(2,u)})}return e.$$set=l=>{"audioData"in l&&n(3,r=l.audioData),"sampleRate"in l&&n(4,i=l.sampleRate),"width"in l&&n(0,a=l.width),"height"in l&&n(1,o=l.height)},[a,o,u,r,i,s]}class To extends Je{constructor(t){super(),Qe(this,t,PA,xA,Ke,{audioData:3,sampleRate:4,width:0,height:1})}}function AA(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=R(),i=k("button"),i.textContent="play audio (p)",n.controls=!1},m(u,s){Q(u,t,s),P(t,n),e[5](n),P(t,r),P(t,i),a||(o=je(i,"click",e[1]),a=!0)},p:ye,i:ye,o:ye,d(u){u&&Z(t),e[5](null),a=!1,o()}}}function SA(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:a=-1}=t,o;const u=f=>{f&&o&&Kc(f,i,o)},s=()=>{o&&(n(0,o.currentTime=0,o),o.play())},l=f=>{f.key==="p"&&s()};wa(()=>{document.querySelector("html").addEventListener("keyup",l),u(r)}),a3(()=>{document.querySelector("html").removeEventListener("keyup",l)});function c(f){ut[f?"unshift":"push"](()=>{o=f,n(0,o)})}return e.$$set=f=>{"audioData"in f&&n(2,r=f.audioData),"sampleRate"in f&&n(3,i=f.sampleRate),"currentTrialNumber"in f&&n(4,a=f.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&window.setTimeout(s,250),e.$$.dirty&4&&u(r)},[o,s,r,i,a,c]}class ay extends Je{constructor(t){super(),Qe(this,t,SA,AA,Ke,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const oy=new Map,uy=new Map,EA=new Map,CA=new Map;function TA(e){return oy.get(e)}function sy(e){return uy.get(e)}const kA=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],$A=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],DA=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of kA)oy.set(e.pitch,e),uy.set(e.label,e);for(const e of $A)EA.set(e.number,e);for(const e of DA){const t=`${e.number}-${e.subnumber}`;CA.set(t,e)}var NA={value:()=>{}};function ly(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ko(n)}function ko(e){this._=e}function BA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ko.prototype=ly.prototype={constructor:ko,on:function(e,t){var n=this._,r=BA(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=FA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=e0(n[i],e.name,t);else if(t==null)for(i in n)n[i]=e0(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ko(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function FA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function e0(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=NA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var cc="http://www.w3.org/1999/xhtml";const t0={svg:"http://www.w3.org/2000/svg",xhtml:cc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),t0.hasOwnProperty(t)?{space:t0[t],local:e}:e}function LA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===cc&&t.documentElement.namespaceURI===cc?t.createElement(e):t.createElementNS(n,e)}}function IA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function cy(e){var t=vs(e);return(t.local?IA:LA)(t)}function RA(){}function Ff(e){return e==null?RA:function(){return this.querySelector(e)}}function OA(e){typeof e!="function"&&(e=Ff(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Ot(r,this._parents)}function fy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qA(){return[]}function hy(e){return e==null?qA:function(){return this.querySelectorAll(e)}}function GA(e){return function(){var t=e.apply(this,arguments);return t==null?[]:fy(t)}}function zA(e){typeof e=="function"?e=GA(e):e=hy(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Ot(r,i)}function dy(e){return function(){return this.matches(e)}}function my(e){return function(t){return t.matches(e)}}var UA=Array.prototype.find;function HA(e){return function(){return UA.call(this.children,e)}}function WA(){return this.firstElementChild}function VA(e){return this.select(e==null?WA:HA(typeof e=="function"?e:my(e)))}var YA=Array.prototype.filter;function jA(){return this.children}function XA(e){return function(){return YA.call(this.children,e)}}function ZA(e){return this.selectAll(e==null?jA:XA(typeof e=="function"?e:my(e)))}function KA(e){typeof e!="function"&&(e=dy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Ot(r,this._parents)}function py(e){return new Array(e.length)}function QA(){return new Ot(this._enter||this._groups.map(py),this._parents)}function Mu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mu.prototype={constructor:Mu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function JA(e){return function(){return e}}function eS(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new Mu(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function tS(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new Mu(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function nS(e){return e.__data__}function rS(e,t){if(!arguments.length)return Array.from(this,nS);var n=t?tS:eS,r=this._parents,i=this._groups;typeof e!="function"&&(e=JA(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=fy(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),y=s[l]=new Array(h);n(c,f,p,g,y,d,t);for(var b=0,w=0,v,_;b<m;++b)if(v=p[b]){for(b>=w&&(w=b+1);!(_=g[w])&&++w<m;);v._next=_||null}}return o=new Ot(o,r),o._enter=u,o._exit=s,o}function iS(){return new Ot(this._exit||this._groups.map(py),this._parents)}function aS(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function oS(e){if(!(e instanceof Ot))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Ot(o,this._parents)}function uS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function sS(e){e||(e=lS);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Ot(i,this._parents).order()}function lS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function cS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fS(){return Array.from(this)}function hS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function dS(){let e=0;for(const t of this)++e;return e}function mS(){return!this.node()}function pS(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function bS(e){return function(){this.removeAttribute(e)}}function gS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yS(e,t){return function(){this.setAttribute(e,t)}}function vS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _S(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function MS(e,t){var n=vs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?gS:bS:typeof t=="function"?n.local?_S:wS:n.local?vS:yS)(n,t))}function by(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function xS(e){return function(){this.style.removeProperty(e)}}function PS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function AS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function SS(e,t,n){return arguments.length>1?this.each((t==null?xS:typeof t=="function"?AS:PS)(e,t,n??"")):hi(this.node(),e)}function hi(e,t){return e.style.getPropertyValue(t)||by(e).getComputedStyle(e,null).getPropertyValue(t)}function ES(e){return function(){delete this[e]}}function CS(e,t){return function(){this[e]=t}}function TS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function kS(e,t){return arguments.length>1?this.each((t==null?ES:typeof t=="function"?TS:CS)(e,t)):this.node()[e]}function gy(e){return e.trim().split(/^|\s+/)}function Lf(e){return e.classList||new yy(e)}function yy(e){this._node=e,this._names=gy(e.getAttribute("class")||"")}yy.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vy(e,t){for(var n=Lf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function wy(e,t){for(var n=Lf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function $S(e){return function(){vy(this,e)}}function DS(e){return function(){wy(this,e)}}function NS(e,t){return function(){(t.apply(this,arguments)?vy:wy)(this,e)}}function BS(e,t){var n=gy(e+"");if(arguments.length<2){for(var r=Lf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?NS:t?$S:DS)(n,t))}function FS(){this.textContent=""}function LS(e){return function(){this.textContent=e}}function IS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function RS(e){return arguments.length?this.each(e==null?FS:(typeof e=="function"?IS:LS)(e)):this.node().textContent}function OS(){this.innerHTML=""}function qS(e){return function(){this.innerHTML=e}}function GS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function zS(e){return arguments.length?this.each(e==null?OS:(typeof e=="function"?GS:qS)(e)):this.node().innerHTML}function US(){this.nextSibling&&this.parentNode.appendChild(this)}function HS(){return this.each(US)}function WS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function VS(){return this.each(WS)}function YS(e){var t=typeof e=="function"?e:cy(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jS(){return null}function XS(e,t){var n=typeof e=="function"?e:cy(e),r=t==null?jS:typeof t=="function"?t:Ff(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ZS(){var e=this.parentNode;e&&e.removeChild(this)}function KS(){return this.each(ZS)}function QS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function JS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eE(e){return this.select(e?JS:QS)}function tE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nE(e){return function(t){e.call(this,t,this.__data__)}}function rE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function iE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function aE(e,t,n){return function(){var r=this.__on,i,a=nE(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function oE(e,t,n){var r=rE(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?aE:iE,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function _y(e,t,n){var r=by(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function uE(e,t){return function(){return _y(this,e,t)}}function sE(e,t){return function(){return _y(this,e,t.apply(this,arguments))}}function lE(e,t){return this.each((typeof t=="function"?sE:uE)(e,t))}function*cE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var fE=[null];function Ot(e,t){this._groups=e,this._parents=t}function Ya(){return new Ot([[document.documentElement]],fE)}function hE(){return this}Ot.prototype=Ya.prototype={constructor:Ot,select:OA,selectAll:zA,selectChild:VA,selectChildren:ZA,filter:KA,data:rS,enter:QA,exit:iS,join:aS,merge:oS,selection:hE,order:uS,sort:sS,call:cS,nodes:fS,node:hS,size:dS,empty:mS,each:pS,attr:MS,style:SS,property:kS,classed:BS,text:RS,html:zS,raise:HS,lower:VS,append:YS,insert:XS,remove:KS,clone:eE,datum:tE,on:oE,dispatch:lE,[Symbol.iterator]:cE};function If(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function My(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ja(){}var pa=.7,xu=1/pa,jr="\\s*([+-]?\\d+)\\s*",ba="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dE=/^#([0-9a-f]{3,8})$/,mE=new RegExp("^rgb\\("+[jr,jr,jr]+"\\)$"),pE=new RegExp("^rgb\\("+[mn,mn,mn]+"\\)$"),bE=new RegExp("^rgba\\("+[jr,jr,jr,ba]+"\\)$"),gE=new RegExp("^rgba\\("+[mn,mn,mn,ba]+"\\)$"),yE=new RegExp("^hsl\\("+[ba,mn,mn]+"\\)$"),vE=new RegExp("^hsla\\("+[ba,mn,mn,ba]+"\\)$"),n0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};If(ja,ga,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:r0,formatHex:r0,formatHsl:wE,formatRgb:i0,toString:i0});function r0(){return this.rgb().formatHex()}function wE(){return xy(this).formatHsl()}function i0(){return this.rgb().formatRgb()}function ga(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?a0(t):n===3?new xt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mE.exec(e))?new xt(t[1],t[2],t[3],1):(t=pE.exec(e))?new xt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bE.exec(e))?yo(t[1],t[2],t[3],t[4]):(t=gE.exec(e))?yo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yE.exec(e))?s0(t[1],t[2]/100,t[3]/100,1):(t=vE.exec(e))?s0(t[1],t[2]/100,t[3]/100,t[4]):n0.hasOwnProperty(e)?a0(n0[e]):e==="transparent"?new xt(NaN,NaN,NaN,0):null}function a0(e){return new xt(e>>16&255,e>>8&255,e&255,1)}function yo(e,t,n,r){return r<=0&&(e=t=n=NaN),new xt(e,t,n,r)}function _E(e){return e instanceof ja||(e=ga(e)),e?(e=e.rgb(),new xt(e.r,e.g,e.b,e.opacity)):new xt}function fc(e,t,n,r){return arguments.length===1?_E(e):new xt(e,t,n,r??1)}function xt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}If(xt,fc,My(ja,{brighter:function(e){return e=e==null?xu:Math.pow(xu,e),new xt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?pa:Math.pow(pa,e),new xt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:o0,formatHex:o0,formatRgb:u0,toString:u0}));function o0(){return"#"+ll(this.r)+ll(this.g)+ll(this.b)}function u0(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ll(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function s0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ln(e,t,n,r)}function xy(e){if(e instanceof ln)return new ln(e.h,e.s,e.l,e.opacity);if(e instanceof ja||(e=ga(e)),!e)return new ln;if(e instanceof ln)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new ln(o,u,s,e.opacity)}function Py(e,t,n,r){return arguments.length===1?xy(e):new ln(e,t,n,r??1)}function ln(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}If(ln,Py,My(ja,{brighter:function(e){return e=e==null?xu:Math.pow(xu,e),new ln(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?pa:Math.pow(pa,e),new ln(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new xt(cl(e>=240?e-240:e+120,i,r),cl(e,i,r),cl(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function cl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ay=e=>()=>e;function ME(e,t){return function(n){return e+n*t}}function xE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function PE(e){return(e=+e)==1?Sy:function(t,n){return n-t?xE(t,n,e):Ay(isNaN(t)?n:t)}}function Sy(e,t){var n=t-e;return n?ME(e,n):Ay(isNaN(e)?t:e)}const hc=function e(t){var n=PE(t);function r(i,a){var o=n((i=fc(i)).r,(a=fc(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=Sy(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Un(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var dc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fl=new RegExp(dc.source,"g");function AE(e){return function(){return e}}function SE(e){return function(t){return e(t)+""}}function EE(e,t){var n=dc.lastIndex=fl.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=dc.exec(e))&&(i=fl.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:Un(r,i)})),n=fl.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?SE(s[0].x):AE(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}var l0=180/Math.PI,mc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ey(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*l0,skewX:Math.atan(s)*l0,scaleX:o,scaleY:u}}var vo;function CE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mc:Ey(t.a,t.b,t.c,t.d,t.e,t.f)}function TE(e){return e==null||(vo||(vo=document.createElementNS("http://www.w3.org/2000/svg","g")),vo.setAttribute("transform",e),!(e=vo.transform.baseVal.consolidate()))?mc:(e=e.matrix,Ey(e.a,e.b,e.c,e.d,e.e,e.f))}function Cy(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Un(l,f)},{i:p-2,x:Un(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Un(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Un(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Un(l,f)},{i:p-2,x:Un(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var kE=Cy(CE,"px, ","px)","deg)"),$E=Cy(TE,", ",")",")"),di=0,Gi=0,Ti=0,Ty=1e3,Pu,zi,Au=0,Sr=0,ws=0,ya=typeof performance=="object"&&performance.now?performance:Date,ky=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rf(){return Sr||(ky(DE),Sr=ya.now()+ws)}function DE(){Sr=0}function Su(){this._call=this._time=this._next=null}Su.prototype=$y.prototype={constructor:Su,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Rf():+n)+(t==null?0:+t),!this._next&&zi!==this&&(zi?zi._next=this:Pu=this,zi=this),this._call=e,this._time=n,pc()},stop:function(){this._call&&(this._call=null,this._time=1/0,pc())}};function $y(e,t,n){var r=new Su;return r.restart(e,t,n),r}function NE(){Rf(),++di;for(var e=Pu,t;e;)(t=Sr-e._time)>=0&&e._call.call(null,t),e=e._next;--di}function c0(){Sr=(Au=ya.now())+ws,di=Gi=0;try{NE()}finally{di=0,FE(),Sr=0}}function BE(){var e=ya.now(),t=e-Au;t>Ty&&(ws-=t,Au=e)}function FE(){for(var e,t=Pu,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Pu=n);zi=e,pc(r)}function pc(e){if(!di){Gi&&(Gi=clearTimeout(Gi));var t=e-Sr;t>24?(e<1/0&&(Gi=setTimeout(c0,e-ya.now()-ws)),Ti&&(Ti=clearInterval(Ti))):(Ti||(Au=ya.now(),Ti=setInterval(BE,Ty)),di=1,ky(c0))}}function f0(e,t,n){var r=new Su;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var LE=ly("start","end","cancel","interrupt"),IE=[],Dy=0,h0=1,bc=2,$o=3,d0=4,gc=5,Do=6;function _s(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;RE(e,n,{name:t,index:r,group:i,on:LE,tween:IE,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Dy})}function Of(e,t){var n=rn(e,t);if(n.state>Dy)throw new Error("too late; already scheduled");return n}function wn(e,t){var n=rn(e,t);if(n.state>$o)throw new Error("too late; already running");return n}function rn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function RE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=$y(a,0,n.time);function a(l){n.state=h0,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==h0)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===$o)return f0(o);d.state===d0?(d.state=Do,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Do,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(f0(function(){n.state===$o&&(n.state=d0,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=bc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bc){for(n.state=$o,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=gc,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===gc&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Do,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function OE(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>bc&&r.state<gc,r.state=Do,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function qE(e){return this.each(function(){OE(this,e)})}function GE(e,t){var n,r;return function(){var i=wn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function zE(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=wn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function UE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=rn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?GE:zE)(n,e,t))}function qf(e,t,n){var r=e._id;return e.each(function(){var i=wn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return rn(i,r).value[t]}}function Ny(e,t){var n;return(typeof t=="number"?Un:t instanceof ga?hc:(n=ga(t))?(t=n,hc):EE)(e,t)}function HE(e){return function(){this.removeAttribute(e)}}function WE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function YE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function jE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function XE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function ZE(e,t){var n=vs(e),r=n==="transform"?$E:Ny;return this.attrTween(e,typeof t=="function"?(n.local?XE:jE)(n,r,qf(this,"attr."+e,t)):t==null?(n.local?WE:HE)(n):(n.local?YE:VE)(n,r,t))}function KE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function QE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function JE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&QE(e,a)),n}return i._value=t,i}function eC(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&KE(e,a)),n}return i._value=t,i}function tC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=vs(e);return this.tween(n,(r.local?JE:eC)(r,t))}function nC(e,t){return function(){Of(this,e).delay=+t.apply(this,arguments)}}function rC(e,t){return t=+t,function(){Of(this,e).delay=t}}function iC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nC:rC)(t,e)):rn(this.node(),t).delay}function aC(e,t){return function(){wn(this,e).duration=+t.apply(this,arguments)}}function oC(e,t){return t=+t,function(){wn(this,e).duration=t}}function uC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?aC:oC)(t,e)):rn(this.node(),t).duration}function sC(e,t){if(typeof t!="function")throw new Error;return function(){wn(this,e).ease=t}}function lC(e){var t=this._id;return arguments.length?this.each(sC(t,e)):rn(this.node(),t).ease}function cC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wn(this,e).ease=n}}function fC(e){if(typeof e!="function")throw new Error;return this.each(cC(this._id,e))}function hC(e){typeof e!="function"&&(e=dy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new In(r,this._parents,this._name,this._id)}function dC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new In(o,this._parents,this._name,this._id)}function mC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function pC(e,t,n){var r,i,a=mC(t)?Of:wn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function bC(e,t){var n=this._id;return arguments.length<2?rn(this.node(),n).on.on(e):this.each(pC(n,e,t))}function gC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function yC(){return this.on("end.remove",gC(this._id))}function vC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ff(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,_s(l[h],t,n,h,l,rn(c,n)));return new In(a,this._parents,t,n)}function wC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hy(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=rn(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&_s(d,t,n,p,h,m);a.push(h),o.push(c)}return new In(a,o,t,n)}var _C=Ya.prototype.constructor;function MC(){return new _C(this._groups,this._parents)}function xC(e,t){var n,r,i;return function(){var a=hi(this,e),o=(this.style.removeProperty(e),hi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function By(e){return function(){this.style.removeProperty(e)}}function PC(e,t,n){var r,i=n+"",a;return function(){var o=hi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function AC(e,t,n){var r,i,a;return function(){var o=hi(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),hi(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function SC(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=wn(this,e),l=s.on,c=s.value[a]==null?u||(u=By(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function EC(e,t,n){var r=(e+="")=="transform"?kE:Ny;return t==null?this.styleTween(e,xC(e,r)).on("end.style."+e,By(e)):typeof t=="function"?this.styleTween(e,AC(e,r,qf(this,"style."+e,t))).each(SC(this._id,e)):this.styleTween(e,PC(e,r,t),n).on("end.style."+e,null)}function CC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function TC(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&CC(e,o,n)),r}return a._value=t,a}function kC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,TC(e,t,n??""))}function $C(e){return function(){this.textContent=e}}function DC(e){return function(){var t=e(this);this.textContent=t??""}}function NC(e){return this.tween("text",typeof e=="function"?DC(qf(this,"text",e)):$C(e==null?"":e+""))}function BC(e){return function(t){this.textContent=e.call(this,t)}}function FC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&BC(i)),t}return r._value=e,r}function LC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,FC(e))}function IC(){for(var e=this._name,t=this._id,n=Fy(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=rn(s,t);_s(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new In(r,this._parents,e,n)}function RC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=wn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var OC=0;function In(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Fy(){return++OC}var ar=Ya.prototype;In.prototype={constructor:In,select:vC,selectAll:wC,filter:hC,merge:dC,selection:MC,transition:IC,call:ar.call,nodes:ar.nodes,node:ar.node,size:ar.size,empty:ar.empty,each:ar.each,on:bC,attr:ZE,attrTween:tC,style:EC,styleTween:kC,text:NC,textTween:LC,remove:yC,tween:UE,delay:iC,duration:uC,ease:lC,easeVarying:fC,end:RC,[Symbol.iterator]:ar[Symbol.iterator]};function qC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var GC={time:null,delay:0,duration:250,ease:qC};function zC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function UC(e){var t,n;e instanceof In?(t=e._id,e=e._name):(t=Fy(),(n=GC).time=Rf(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&_s(s,e,t,l,o,n||zC(s,t));return new In(r,this._parents,e,t)}Ya.prototype.interrupt=qE;Ya.prototype.transition=UC;function Ui(e,t,n){this.k=e,this.x=t,this.y=n}Ui.prototype={constructor:Ui,scale:function(e){return e===1?this:new Ui(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ui(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ui.prototype;var HC={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,u="",s,l,c=0;for(;c<r.length;)o=i.indexOf(r.charAt(c++))<<18|i.indexOf(r.charAt(c++))<<12|(s=i.indexOf(r.charAt(c++)))<<6|(l=i.indexOf(r.charAt(c++))),u+=s===64?String.fromCharCode(o>>16&255):l===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return u},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(u){i(n.Uint8(new Uint8Array(u.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let u=0;u<a;u++)o[u]=i.charCodeAt(u);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(s){return this.pointer+=s,this.pointer},readInt:function(s){if(s=Math.min(s,this.data.byteLength-this.pointer),s<1)return-1;let l=0;if(s>1)for(let c=1;c<=s-1;c++)l+=this.data.getUint8(this.pointer)*Math.pow(256,s-c),this.pointer++;return l+=this.data.getUint8(this.pointer),this.pointer++,l},readStr:function(s){let l="";for(let c=1;c<=s;c++)l+=String.fromCharCode(this.readInt(1));return l},readIntVLV:function(){let s=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)s=this.readInt(1);else{let l=[];for(;this.data.getUint8(this.pointer)>=128;)l.push(this.readInt(1)-128);let c=this.readInt(1);for(let f=1;f<=l.length;f++)s+=l[l.length-f]*Math.pow(128,f);s+=c}return s}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),u=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=u):a.timeDivision=o*256+u;for(let s=1;s<=a.tracks;s++){a.track[s-1]={event:[]};let l=i.readInt(4);if(l===-1)break;if(l!==1297379947)return!1;i.readInt(4);let c=0,f=!1,h,d;for(;!f&&(c++,a.track[s-1].event[c-1]={},a.track[s-1].event[c-1].deltaTime=i.readIntVLV(),h=i.readInt(1),h!==-1);)if(h>=128?d=h:(h=d,i.movePointer(-1)),h===255){a.track[s-1].event[c-1].type=255,a.track[s-1].event[c-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[s-1].event[c-1].metaType){case 47:case-1:f=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[s-1].event[c-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[s-1].event[c-1].data=i.readInt(m);break;case 84:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1),a.track[s-1].event[c-1].data[4]=i.readInt(1);break;case 88:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,m)),(this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)&&(i.readInt(m),a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(h=h.toString(16).split(""),h[1]||h.unshift("0"),a.track[s-1].event[c-1].type=parseInt(h[0],16),a.track[s-1].event[c-1].channel=parseInt(h[1],16),a.track[s-1].event[c-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].type,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1){let m=i.readIntVLV();a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[s-1].event[c-1].data=i.readInt(1);break;case-1:f=!0;break;default:if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(HC);function Ly(e){return 1/(e/60)}const Iy=[],WC=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of WC)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;Iy.push({type:e,dots:t,duration:n})}Iy.sort((e,t)=>e.duration-t.duration);class se{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>sy(r).pitch),this.stringCount=n.length}}new se("E stand.",["E2","A2","D3","G3","B3","E4"]),new se("Drop D",["D2","A2","D3","G3","B3","E4"]),new se("Drop C",["C2","G2","C3","F3","A3","D4"]),new se("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new se("1 down",["D2","G2","C3","F3","A3","D4"]),new se("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new se("2 down",["C2","F2","A#2","D#3","G3","C4"]),new se("DADGAG",["D2","A2","D3","G3","A3","D4"]),new se("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new se("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new se("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new se("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new se("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new se("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new se("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new se("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new se("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new se("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new se("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new se("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new se("E stand.",["E1","A1","D2","G2"]),new se("Drop D",["D1","A1","D2","G2"]),new se("1/2 down",["D#1","G#1","C#2","F#2"]),new se("1 down",["D1","G1","C2","F2"]),new se("1 1/2 down",["C#1","F#1","B1","E2"]),new se("2 down",["C1","F1","A#1","D#2"]),new se("B stand.",["B0","E1","A1","D2","G2"]),new se("Drop A",["A0","D1","A1","D2","G2"]),new se("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new se("1 down",["A0","D1","G1","C2","F2"]),new se("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new se("2 down",["G0","C1","F1","A#1","D#2"]),new se("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new se("Drop E",["E0","A0","D1","A1","D2","G2"]),new se("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new se("1 down",["E1","A0","D1","G1","C2","F2"]),new se("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new se("2 down",["D0","G0","C1","F1","A#1","D#2"]),new se("Hawaii",["G4","C4","E4","A4"]),new se("Low G",["G3","C4","E4","A4"]),new se("D-tuning",["A4","D4","F#4","B4"]),new se("Canadian",["A3","D4","F#4","B4"]),new se("Bariton",["D3","G3","B3","E4"]);function Ry(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function Oy(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var qy=[0,2,4,-1,1,3,5],Gy=qy.map(e=>Math.floor(e*7/12));function zy(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=qy[t]+7*n;if(r===void 0)return[i*a];const o=r-Gy[t]-4*n;return[i*a,i*o]}var VC=[3,0,4,1,5,2,6];function YC(e){const[t,n,r]=e,i=VC[jC(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+Gy[i];return{step:i,alt:a,oct:o,dir:r}}function jC(e){const t=(e+1)%7;return t<0?7+t:t}var m0=(e,t)=>Array(Math.abs(t)+1).join(e),yc=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),XC="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",ZC="(AA|A|P|M|m|d|dd)([-+]?\\d+)",KC=new RegExp("^"+XC+"|"+ZC+"$");function QC(e){const t=KC.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var p0={};function Eu(e){return typeof e=="string"?p0[e]||(p0[e]=JC(e)):Oy(e)?Eu(tT(e)):Ry(e)?Eu(e.name):yc}var b0=[0,2,4,5,7,9,11],Uy="PMMPPMM";function JC(e){const t=QC(e);if(t[0]==="")return yc;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=Uy[i];if(a==="M"&&r==="P")return yc;const o=a==="M"?"majorable":"perfectable",u=""+n+r,s=n<0?-1:1,l=n===8||n===-8?n:s*(i+1),c=eT(o,r),f=Math.floor((Math.abs(n)-1)/7),h=s*(b0[i]+c+12*f),d=(s*(b0[i]+c)%12+12)%12,m=zy({step:i,alt:c,oct:f,dir:s});return{empty:!1,name:u,num:n,q:r,step:i,alt:c,dir:s,type:o,simple:l,semitones:h,chroma:d,coord:m,oct:f}}function eT(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function tT(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,u=i<0?"-":"",s=Uy[t]==="M"?"majorable":"perfectable";return u+o+nT(s,n)}function nT(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?m0("A",t):m0("d",e==="perfectable"?t:t+1)}var g0=(e,t)=>Array(Math.abs(t)+1).join(e),Hy=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),y0=new Map,rT=e=>"CDEFGAB".charAt(e),iT=e=>e<0?g0("b",-e):g0("#",e),aT=e=>e[0]==="b"?-e.length:e.length;function va(e){const t=JSON.stringify(e),n=y0.get(t);if(n)return n;const r=typeof e=="string"?cT(e):Oy(e)?va(fT(e)):Ry(e)?va(e.name):Hy;return y0.set(t,r),r}var oT=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function uT(e){const t=oT.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function sT(e){return va(YC(e))}var lT=(e,t)=>(e%t+t)%t,hl=[0,2,4,5,7,9,11];function cT(e){const t=uT(e);if(t[0]===""||t[3]!=="")return Hy;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=aT(r),u=i.length?+i:void 0,s=zy({step:a,alt:o,oct:u}),l=n+r+i,c=n+r,f=(hl[a]+o+120)%12,h=u===void 0?lT(hl[a]+o,12)-12*99:hl[a]+o+12*(u+1),d=h>=0&&h<=127?h:null,m=u===void 0?null:Math.pow(2,(h-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:f,coord:s,freq:m,height:h,letter:n,midi:d,name:l,oct:u,pc:c,step:a}}function fT(e){const{step:t,alt:n,oct:r}=e,i=rT(t);if(!i)return"";const a=i+iT(n);return r||r===0?a+r:a}function hT(e,t){const n=va(e),r=Array.isArray(t)?t:Eu(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return sT(a).name}function Wy(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var Qn={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Vy=e=>Number(e).toString(2).padStart(12,"0"),v0=e=>parseInt(e,2),dT=/^[01]{12}$/;function Yy(e){return dT.test(e)}var mT=e=>typeof e=="number"&&e>=0&&e<=4095,pT=e=>e&&Yy(e.chroma),w0={[Qn.chroma]:Qn};function Gf(e){const t=Yy(e)?e:mT(e)?Vy(e):Array.isArray(e)?wT(e):pT(e)?e.chroma:Qn.chroma;return w0[t]=w0[t]||vT(t)}var bT=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function gT(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(bT[n]);return t}function yT(e){const t=e.split("");return t.map((n,r)=>Wy(r,t).join(""))}function vT(e){const t=v0(e),n=yT(e).map(v0).filter(a=>a>=2048).sort()[0],r=Vy(n),i=gT(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function wT(e){if(e.length===0)return Qn.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=va(e[r]),t.empty&&(t=Eu(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var _T=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],MT=_T;({...Qn});var jy=[],No={};function xT(e,t,n){const r=AT(e),i={...Gf(e),name:n||"",quality:r,intervals:e,aliases:t};jy.push(i),i.name&&(No[i.name]=i),No[i.setNum]=i,No[i.chroma]=i,i.aliases.forEach(a=>PT(i,a))}function PT(e,t){No[t]=e}function AT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}MT.forEach(([e,t,n])=>xT(e.split(" "),n.split(" "),t));jy.sort((e,t)=>e.setNum-t.setNum);var ST=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],ET=ST;({...Qn});var Xy=[],Bo={};function CT(e,t,n){const r=kT(e),i={...Gf(e),name:n||"",quality:r,intervals:e,aliases:t};Xy.push(i),i.name&&(Bo[i.name]=i),Bo[i.setNum]=i,Bo[i.chroma]=i,i.aliases.forEach(a=>TT(i,a))}function TT(e,t){Bo[t]=e}function kT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}ET.forEach(([e,t,n])=>CT(e.split(" "),n.split(" "),t));Xy.sort((e,t)=>e.setNum-t.setNum);var $T=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],DT=$T,NT={...Qn,intervals:[],aliases:[]},Zi={};function BT(e){return Zi[e]||NT}function FT(e,t,n=[]){const r={...Gf(e),name:t,intervals:e,aliases:n};return Zi[r.name]=r,Zi[r.setNum]=r,Zi[r.chroma]=r,r.aliases.forEach(i=>LT(r,i)),r}function LT(e,t){Zi[t]=e}DT.forEach(([e,t,...n])=>FT(e.split(" "),t,n));var zf=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],_0={...Qn,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},IT=zf.map(RT),vc={};IT.forEach(e=>{vc[e.name]=e,e.aliases.forEach(t=>{vc[t]=e})});function Zy(e){return typeof e=="string"?vc[e.toLowerCase()]||_0:e&&e.name?Zy(e.name):_0}function RT(e){const[t,n,r,i,a,o,u]=e,s=u?[u]:[],l=Number(n).toString(2);return{empty:!1,intervals:BT(i).intervals,modeNum:t,chroma:l,normalized:l,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:s}}function Ky(e){return(t,n)=>{const r=Zy(t);if(r.empty)return[];const i=Wy(r.modeNum,e),a=r.intervals.map(o=>hT(n,o));return i.map((o,u)=>a[u]+o)}}Ky(zf.map(e=>e[4]));Ky(zf.map(e=>e[5]));class Gn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>sy(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;const s=TA(i).name;n.set(i,{number:a,letterString:`${s}${o}`})}return[...n.values()].map(r=>r.letterString)}}new Gn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Gn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Gn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Gn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Gn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Gn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Gn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Gn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function OT(e,t=1){const n=Py(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>OT(e,.5));const qT=hc("black","steelblue");Array.from({length:12}).map((e,t)=>qT(t/11));function GT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:ye,o:ye,d(a){a&&Z(t),e[4](null)}}}function zT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;en(()=>{const s=[...new Set(r)],l=s.map((f,h)=>h===0?0:f-s[h-1]),c=zt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},x:{label:"beat"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[ry(l,{x:(f,h)=>h+1,fill:f=>f})]});n(2,o.textContent="",o),o.appendChild(c)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Fo extends Je{constructor(t){super(),Qe(this,t,zT,GT,Ke,{pattern:3,width:0,height:1})}}function UT(e,t,n){const r=e.slice();return r[16]=t[n],r}function HT(e){let t;return{c(){t=k("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],rt(t,t.__value)},m(n,r){Q(n,t,r)},p:ye,d(n){n&&Z(t)}}}function WT(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b,w,v,_,M,x,C,E,$,A,L=Mt(["single note","single beat","only snare","beat 5"]),O=[];for(let T=0;T<4;T+=1)O[T]=HT(UT(e,L,T));return m=new ay({props:{audioData:e[2],sampleRate:e[3]}}),g=new To({props:{audioData:e[2],width:ki,height:$i}}),b=new bA({props:{pattern:e[4],width:ki,height:$i}}),v=new vA({props:{pattern:e[4],width:ki,height:$i}}),M=new MA({props:{pattern:e[4],width:ki,height:$i}}),C=new Fo({props:{pattern:e[4],width:ki,height:$i}}),{c(){t=k("main"),n=k("h2"),n.textContent="Playground",r=R(),i=k("div"),a=k("label"),o=Pe(`error mode:
      `),u=k("select");for(let T=0;T<4;T+=1)O[T].c();s=R(),l=k("label"),c=Pe(`error severity (in seconds):
      `),f=k("input"),h=R(),d=k("div"),Ee(m.$$.fragment),p=R(),Ee(g.$$.fragment),y=R(),Ee(b.$$.fragment),w=R(),Ee(v.$$.fragment),_=R(),Ee(M.$$.fragment),x=R(),Ee(C.$$.fragment),e[0]===void 0&&Qi(()=>e[5].call(u)),B(a,"class","svelte-1sot113"),B(f,"type","number"),B(f,"min","-0.5"),B(f,"max","0.5"),B(f,"step","0.01"),B(l,"class","svelte-1sot113"),B(d,"class","stimuli svelte-1sot113")},m(T,S){Q(T,t,S),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u);for(let I=0;I<4;I+=1)O[I]&&O[I].m(u,null);Ro(u,e[0],!0),P(i,s),P(i,l),P(l,c),P(l,f),rt(f,e[1]),P(t,h),P(t,d),Ae(m,d,null),P(d,p),Ae(g,d,null),P(d,y),Ae(b,d,null),P(d,w),Ae(v,d,null),P(d,_),Ae(M,d,null),P(d,x),Ae(C,d,null),E=!0,$||(A=[je(u,"change",e[5]),je(f,"input",e[6])],$=!0)},p(T,[S]){S&1&&Ro(u,T[0]),S&2&&Xr(f.value)!==T[1]&&rt(f,T[1]);const I={};S&4&&(I.audioData=T[2]),S&8&&(I.sampleRate=T[3]),m.$set(I);const ne={};S&4&&(ne.audioData=T[2]),g.$set(ne);const ee={};S&16&&(ee.pattern=T[4]),b.$set(ee);const K={};S&16&&(K.pattern=T[4]),v.$set(K);const q={};S&16&&(q.pattern=T[4]),M.$set(q);const G={};S&16&&(G.pattern=T[4]),C.$set(G)},i(T){E||(X(m.$$.fragment,T),X(g.$$.fragment,T),X(b.$$.fragment,T),X(v.$$.fragment,T),X(M.$$.fragment,T),X(C.$$.fragment,T),E=!0)},o(T){ae(m.$$.fragment,T),ae(g.$$.fragment,T),ae(b.$$.fragment,T),ae(v.$$.fragment,T),ae(M.$$.fragment,T),ae(C.$$.fragment,T),E=!1},d(T){T&&Z(t),ur(O,T),Se(m),Se(g),Se(b),Se(v),Se(M),Se(C),$=!1,gn(A)}}}let ki=600,$i=100,VT=120;const M0=4;function YT(e,t,n){let r="beat 5",i=0,a=Ly(VT),o=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const u=M0*a;let s=null,l,c=[];const f=async()=>{o=await Promise.all(o.map(async y=>({...y,times:y.beats.map(b=>a*(b-1)),timesOriginal:y.beats.map(b=>a*(b-1)),audioBuffer:await ng(y.sample)})))},h=(y="single note",b=0)=>{if(b===0)return o;console.log(`Adding error ${y} ${b}`);const w=d([o]),v=w.filter(x=>x.instrument==="snare")[0],_=w.filter(x=>x.instrument==="hihat")[0],M=w.filter(x=>x.instrument==="bass")[0];return y==="single note"?v.times[1]=v.timesOriginal[1]+b:y==="single beat"?(v.times[1]=v.timesOriginal[1]+b,_.times[6]=_.timesOriginal[6]+b):y==="only snare"?(v.times[0]=v.timesOriginal[0]+b,v.times[1]=v.timesOriginal[1]+b):y==="beat 5"&&(M.times[1]=M.timesOriginal[1]+b,_.times[4]=_.timesOriginal[4]+b),w},d=y=>{console.log(`concat ${y.length} patterns`);const b=y[0].map(w=>({...w,beats:[...w.beats],times:[...w.times],timesOriginal:[...w.timesOriginal]}));for(let w=1;w<y.length;w++){const v=y[w];for(const _ of v){const M=b.filter(x=>x.instrument===_.instrument)[0];M.beats=[...M.beats,..._.beats.map(x=>x+w*M0)],M.times=[...M.times,..._.times.map(x=>x+w*u)],M.timesOriginal=[...M.timesOriginal,..._.timesOriginal.map(x=>x+w*u)]}}return b},m=async(y,b)=>{if(!o[0].audioBuffer)return;const v=[h(y,b)],_=d(v);n(4,c=_.map(M=>M.times).flat().sort()),_.map(M=>M.times.map(x=>({time:x,instr:M.instrument}))).flat(1/0).sort((M,x)=>{M.time-x.time}),n(3,l=_[0].audioBuffer.sampleRate),n(2,s=Ql(_,u*v.length+.1,l)),_.map(M=>{const x=Ql([M],u*v.length+.1,l);return{instr:M.instrument,audio:x}})};wa(async()=>{await f(),m()});function p(){r=c1(this),n(0,r)}function g(){i=Xr(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&m(r,i)},[r,i,s,l,c,p,g]}class jT extends Je{constructor(t){super(),Qe(this,t,YT,WT,Ke,{})}}function XT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px")},m(a,o){Q(a,t,o),P(t,n),e[8](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i)},i:ye,o:ye,d(a){a&&Z(t),e[8](null)}}}function ZT(e,t,n){let{title:r=void 0}=t,{final:i=void 0}=t,{width:a=600}=t,{height:o=180}=t,{data:u}=t,{x:s="x"}=t,{y:l="y"}=t,c;en(()=>{console.log({final:i}),n(2,c.textContent="",c);const h=zt({title:r,width:a,height:o,x:{domain:[0,70]},marks:[lA(u,{x:s,y:l,stroke:"#ccc"}),ys(u,{x:s,y:l,fill:"#aaa",r:2,tip:!0}),wu([0]),wu([i],{stroke:"#88888888"}),ps([i],{x:65,y:i,dy:-7,text:d=>`final: ${d.toFixed(3)}`})]});c.appendChild(h)});function f(h){ut[h?"unshift":"push"](()=>{c=h,n(2,c)})}return e.$$set=h=>{"title"in h&&n(3,r=h.title),"final"in h&&n(4,i=h.final),"width"in h&&n(0,a=h.width),"height"in h&&n(1,o=h.height),"data"in h&&n(5,u=h.data),"x"in h&&n(6,s=h.x),"y"in h&&n(7,l=h.y)},[a,o,c,r,i,u,s,l,f]}class KT extends Je{constructor(t){super(),Qe(this,t,ZT,XT,Ke,{title:3,final:4,width:0,height:1,data:5,x:6,y:7})}}var Qy={exports:{}};(function(e,t){(function(n,r){r()})(Si,function(){function n(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,c,f){var h=new XMLHttpRequest;h.open("GET",l),h.responseType="blob",h.onload=function(){s(h.response,c,f)},h.onerror=function(){console.error("could not download file")},h.send()}function i(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Si=="object"&&Si.global===Si?Si:void 0,u=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(l,c,f){var h=o.URL||o.webkitURL,d=document.createElement("a");c=c||l.name||"download",d.download=c,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?a(d):i(d.href)?r(l,c,f):a(d,d.target="_blank")):(d.href=h.createObjectURL(l),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,f){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,f),c);else if(i(l))r(l,c,f);else{var h=document.createElement("a");h.href=l,h.target="_blank",setTimeout(function(){a(h)})}}:function(l,c,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof l=="string")return r(l,c,f);var d=l.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||u)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var w=g.result;w=p?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=w:location=w,h=null},g.readAsDataURL(l)}else{var y=o.URL||o.webkitURL,b=y.createObjectURL(l);h?h.location=b:location.href=b,h=null,setTimeout(function(){y.revokeObjectURL(b)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s})})(Qy);var QT=Qy.exports;const x0=tg(QT);function JT(e){let t,n,r;return{c(){t=k("div"),B(t,"width",n=e[0]+"px"),B(t,"height",r=e[1]+"px")},m(i,a){Q(i,t,a),e[6](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&B(t,"width",n),a&2&&r!==(r=i[1]+"px")&&B(t,"height",r)},i:ye,o:ye,d(i){i&&Z(t),e[6](null)}}}function ek(e,t,n){let{data:r}=t,{domain:i}=t,{title:a=""}=t,{width:o=800}=t,{height:u=100}=t,s;en(()=>{const c=zt({width:o,height:u,marginLeft:70,marginRight:10,x:{label:a,domain:i},y:{axis:!1,type:"band"},marks:[Bf(r,{x:f=>f}),ps(r,{x:f=>f,dx:7,y:(f,h)=>h,text:(f,h)=>`P${h+1}`})]});n(2,s.textContent="",s),s.appendChild(c)});function l(c){ut[c?"unshift":"push"](()=>{s=c,n(2,s)})}return e.$$set=c=>{"data"in c&&n(3,r=c.data),"domain"in c&&n(4,i=c.domain),"title"in c&&n(5,a=c.title),"width"in c&&n(0,o=c.width),"height"in c&&n(1,u=c.height)},[o,u,s,r,i,a,l]}class tk extends Je{constructor(t){super(),Qe(this,t,ek,JT,Ke,{data:3,domain:4,title:5,width:0,height:1})}}function nk(e){let t,n,r;return{c(){t=k("div"),B(t,"width",n=e[0]+"px"),B(t,"height",r=e[1]+"px")},m(i,a){Q(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&B(t,"width",n),a&2&&r!==(r=i[1]+"px")&&B(t,"height",r)},i:ye,o:ye,d(i){i&&Z(t),e[5](null)}}}function rk(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;en(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.finals)})),c=zt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[ys(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Nf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Af([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Bu(l),m=1.96*(ku(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){ut[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class ik extends Je{constructor(t){super(),Qe(this,t,rk,nk,Ke,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function ak(e){let t,n,r;return{c(){t=k("div"),B(t,"width",n=e[0]+"px"),B(t,"height",r=e[1]+"px")},m(i,a){Q(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&B(t,"width",n),a&2&&r!==(r=i[1]+"px")&&B(t,"height",r)},i:ye,o:ye,d(i){i&&Z(t),e[5](null)}}}function ok(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;en(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.trialCounts)})),c=zt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[ys(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Nf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Af([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Bu(l),m=1.96*(ku(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){ut[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class uk extends Je{constructor(t){super(),Qe(this,t,ok,ak,Ke,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function P0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function sk(e,t,n,r,i,a){const o=new Float64Array(a),u=(a-1)/(i-r);for(let s=0;s<e.length;++s){const l=e[s],c=t(l,s,e),f=n(l,s,e);if(!(Number.isFinite(c)&&Number.isFinite(f)))continue;const h=(c-r)*u,d=Math.floor(h),m=d+1;0<=d&&m<a?(o[d]+=(m-h)*f,o[m]+=(h-d)*f):d===-1?o[m]+=(h-d)*f:m===a&&(o[d]+=(m-h)*f)}return o}function A0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);lk(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,u=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:u}}function lk(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),u=.6318/n,s=1.997/n,l=Float64Array.of(-a*Math.cos(u),a*Math.sin(u),-a*Math.cos(-u),a*Math.sin(-u),-o*Math.cos(s),o*Math.sin(s),-o*Math.cos(-s),o*Math.sin(-s)),c=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(f[m]=l[m]*f[m-2]-l[m+1]*f[m-1],f[m+1]=l[m]*f[m-1]+l[m+1]*f[m-2],d=m-2;d>0;d-=2)f[d]+=l[m]*f[d-2]-l[m+1]*f[d-1],f[d+1]+=l[m]*f[d-1]+l[m+1]*f[d-2];for(d=0;d<=m;d+=2)f[d]+=i[m]*h[d]-i[m+1]*h[d+1],f[d+1]+=i[m]*h[d+1]+i[m+1]*h[d];for(h[m+2]=l[m]*h[m]-l[m+1]*h[m+1],h[m+3]=l[m]*h[m+1]+l[m+1]*h[m],d=m;d>0;d-=2)h[d]+=l[m]*h[d-2]-l[m+1]*h[d-1],h[d+1]+=l[m]*h[d-1]+l[m+1]*h[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=f[d]/c,e[m+1]=h[d+2]}function ck(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),u=i,s=fk){const l=r*2,c=r*3,f=r*4,h=r*n;let d,m;for(s(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=f;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-l]+e.b_causal[3]*t[d-c]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(s(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=h-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+l]+e.b_anticausal[3]*t[d+c]+e.b_anticausal[4]*t[d+f]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)u[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)u[d]=Math.max(0,i[m]+a[n-m-1]);return u}function fk(e,t,n,r,i,a,o,u,s,l){const c=Math.abs(r)*n,f=r<0?c+r:0;let h,d,m;for(d=0;d<u;++d)for(l[d]=d<=a?i[d]:0,m=1;m<=u&&m<=d;++m)l[d]-=o[m]*l[d-m];for(m=0;m<u;++m)for(e[m]=0,d=1;d<=m;++d)h=f+r*d,h>=0&&h<c&&(e[m]+=l[m-d]*t[h]);const p=t[f];if(p>0)for(m=0;m<u;++m)e[m]+=l[m]*p}function hk(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const u=t(e[o],o,e);u!=null&&(i===void 0?u>=u&&(i=a=u):(u<i&&(i=u),u>a&&(a=u)))}return[i-n,a+n]}function dk(e,t){const n=e.map(t).filter(l=>l!=null&&l>=l);n.sort((l,c)=>l-c);const r=mk(n),i=S0(n,.25),a=S0(n,.75),o=n.length,u=(a-i)/1.34;return 1.06*(Math.min(r,u)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function mk(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const u=e[o];r=u-i,i+=r/++n,a+=r*(u-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function S0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function pk(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=P0(t.x,y=>y),o=P0(t.weight,()=>1/e.length);let u=t.bandwidth??n*dk(e,a);const[s,l]=t.extent??hk(e,a,r*u),c=sk(e,a,o,s,l,i),f=(l-s)/(i-1),h=c.some(y=>y<0);let d=A0(u/f,h),m;function*p(y="x",b="y"){const w=g.grid(),v=1/f;for(let _=0;_<i;++_)yield{[y]:s+_*f,[b]:w[_]*v}}const g={[Symbol.iterator]:p,points:p,grid:()=>m||(m=ck(d,c,i)),extent:()=>[s,l],bandwidth(y){return arguments.length?(y!==u&&(u=y,m=null,d=A0(u/f,h)),g):u}};return g}function bk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px")},m(a,o){Q(a,t,o),P(t,n),e[10](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i)},i:ye,o:ye,d(a){a&&Z(t),e[10](null)}}}function gk(e,t,n){let r,{values:i}=t,{title:a=""}=t,{xLabel:o="some value"}=t,{xDomain:u=void 0}=t,{width:s=1e3}=t,{height:l=100}=t,{bandwidth:c=.25}=t,{bins:f=256}=t,{pad:h=4}=t,d;en(()=>{const p=[...r.bandwidth(c)];n(2,d.textContent="",d);const g=zt({width:s,height:l,title:a,style:{background:"none"},grid:!0,x:{label:o,domain:u},y:{label:"density",type:"linear"},marks:[XP(p,{x:"x",y:"y",fill:"#ccc"}),Bf(i,{x:y=>y,strokeWidth:.5}),wu([0])]});d.appendChild(g)});function m(p){ut[p?"unshift":"push"](()=>{d=p,n(2,d)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,a=p.title),"xLabel"in p&&n(5,o=p.xLabel),"xDomain"in p&&n(6,u=p.xDomain),"width"in p&&n(0,s=p.width),"height"in p&&n(1,l=p.height),"bandwidth"in p&&n(7,c=p.bandwidth),"bins"in p&&n(8,f=p.bins),"pad"in p&&n(9,h=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=pk(i,{bandwidth:c,pad:h,bins:f}))},[s,l,d,i,a,o,u,c,f,h,m]}class yk extends Je{constructor(t){super(),Qe(this,t,gk,bk,Ke,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function vk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px")},m(a,o){Q(a,t,o),P(t,n),e[13](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i)},i:ye,o:ye,d(a){a&&Z(t),e[13](null)}}}function wk(e,t,n){let{title:r=""}=t,{data:i}=t,{x:a="x"}=t,{y:o="y"}=t,{tipTitle:u=null}=t,{xLabel:s=null}=t,{yLabel:l=null}=t,{xDomain:c=void 0}=t,{yDomain:f=void 0}=t,{grid:h=!1}=t,{width:d=300}=t,{height:m=300}=t,p;en(()=>{console.log(i,a,o),n(2,p.textContent="",p);const y=zt({width:d,height:m,title:r,grid:h,style:{background:"none"},x:{label:s||(typeof a=="string"?a:"x"),domain:c},y:{label:l||(typeof o=="string"?o:"y"),domain:f},marks:[ys(i,{x:a,y:o}),G2(i,Kg({x:a,y:o,title:u})),Nf({length:1},{x1:c[0],x2:c[1],y1:f[0],y2:f[1],stroke:"#ccc"})]});p.appendChild(y)});function g(y){ut[y?"unshift":"push"](()=>{p=y,n(2,p)})}return e.$$set=y=>{"title"in y&&n(3,r=y.title),"data"in y&&n(4,i=y.data),"x"in y&&n(5,a=y.x),"y"in y&&n(6,o=y.y),"tipTitle"in y&&n(7,u=y.tipTitle),"xLabel"in y&&n(8,s=y.xLabel),"yLabel"in y&&n(9,l=y.yLabel),"xDomain"in y&&n(10,c=y.xDomain),"yDomain"in y&&n(11,f=y.yDomain),"grid"in y&&n(12,h=y.grid),"width"in y&&n(0,d=y.width),"height"in y&&n(1,m=y.height)},[d,m,p,r,i,a,o,u,s,l,c,f,h,g]}class E0 extends Je{constructor(t){super(),Qe(this,t,wk,vk,Ke,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function C0(e,t,n){const r=e.slice();return r[12]=t[n],r}function T0(e,t,n){const r=e.slice();return r[15]=t[n],r}function k0(e,t,n){const r=e.slice();return r[18]=t[n],r}function $0(e,t,n){const r=e.slice();return r[21]=t[n],r}function D0(e,t,n){const r=e.slice();return r[24]=t[n],r}function N0(e,t,n){const r=e.slice();return r[27]=t[n][0],r[28]=t[n][1],r}function B0(e){let t,n=e[27]+"",r,i,a=e[28].length+"",o,u;return{c(){t=k("p"),r=Pe(n),i=Pe(": "),o=Pe(a),u=Pe(" times")},m(s,l){Q(s,t,l),P(t,r),P(t,i),P(t,o),P(t,u)},p(s,l){l&1&&n!==(n=s[27]+"")&&Pt(r,n),l&1&&a!==(a=s[28].length+"")&&Pt(o,a)},d(s){s&&Z(t)}}}function F0(e){let t,n;return t=new yk({props:{title:`Density of final values for ${e[24][0]}`,values:e[24][1].map(U0),xLabel:"final values",xDomain:[-.2,.2],bandwidth:xk}}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=`Density of final values for ${r[24][0]}`),i&2&&(a.values=r[24][1].map(U0)),t.$set(a)},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function L0(e){let t,n=e[21].encoding+"",r,i,a,o;return a=new tk({props:{data:e[21].finals,title:e[21].encoding,domain:[0,e[2]]}}),{c(){t=k("b"),r=Pe(n),i=R(),Ee(a.$$.fragment)},m(u,s){Q(u,t,s),P(t,r),Q(u,i,s),Ae(a,u,s),o=!0},p(u,s){(!o||s&8)&&n!==(n=u[21].encoding+"")&&Pt(r,n);const l={};s&8&&(l.data=u[21].finals),s&8&&(l.title=u[21].encoding),s&4&&(l.domain=[0,u[2]]),a.$set(l)},i(u){o||(X(a.$$.fragment,u),o=!0)},o(u){ae(a.$$.fragment,u),o=!1},d(u){u&&(Z(t),Z(i)),Se(a,u)}}}function I0(e){let t,n=e[18]+"",r;return{c(){t=k("p"),r=Pe(n)},m(i,a){Q(i,t,a),P(t,r)},p(i,a){a&1&&n!==(n=i[18]+"")&&Pt(r,n)},d(i){i&&Z(t)}}}function R0(e){let t,n,r,i=e[15].demographics.internalPID+"",a,o,u=e[15].demographics.partID+"",s,l,c,f=Mt(e[15].demographics.partFeedback.split(`
`)),h=[];for(let d=0;d<f.length;d+=1)h[d]=I0(k0(e,f,d));return{c(){t=k("div"),n=k("b"),r=Pe("P"),a=Pe(i),o=R(),s=Pe(u),l=Pe(`:
        `);for(let d=0;d<h.length;d+=1)h[d].c();c=R(),qe(t,"text-align","left")},m(d,m){Q(d,t,m),P(t,n),P(n,r),P(n,a),P(t,o),P(t,s),P(t,l);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(t,null);P(t,c)},p(d,m){if(m&1&&i!==(i=d[15].demographics.internalPID+"")&&Pt(a,i),m&1&&u!==(u=d[15].demographics.partID+"")&&Pt(s,u),m&1){f=Mt(d[15].demographics.partFeedback.split(`
`));let p;for(p=0;p<f.length;p+=1){const g=k0(d,f,p);h[p]?h[p].p(g,m):(h[p]=I0(g),h[p].c(),h[p].m(t,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=f.length}},d(d){d&&Z(t),ur(h,d)}}}function O0(e){let t,n;return t=new KT({props:{title:"P"+e[12].internalPID+" "+e[12].encoding,final:e[12].final,width:Mk,height:120,data:e[12].data,x:Ak,y:e[7]}}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title="P"+r[12].internalPID+" "+r[12].encoding),i&2&&(a.final=r[12].final),i&2&&(a.data=r[12].data),t.$set(a)},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function _k(e){let t,n,r,i,a,o,u,s,l,c,f,h=e[0].length+"",d,m,p=e[1].length+"",g,y,b=e[4].length+"",w,v,_,M,x,C,E,$,A,L,O,T,S,I,ne,ee,K,q,G,z,U,oe,ue,ie,V,Y,N,H,j,D,be,J,fe,_e,Oe,tt=Mt(cr(e[0],q0).sort(G0)),Ne=[];for(let F=0;F<tt.length;F+=1)Ne[F]=B0(N0(e,tt,F));let Ut=Mt(cr(e[1],z0)),De=[];for(let F=0;F<Ut.length;F+=1)De[F]=F0(D0(e,Ut,F));const Dr=F=>ae(De[F],1,1,()=>{De[F]=null});L=new E0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),T=new E0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),K=new ik({props:{stimuli:e[3]}}),oe=new uk({props:{stimuli:e[3]}});let Ht=Mt(e[3]),te=[];for(let F=0;F<Ht.length;F+=1)te[F]=L0($0(e,Ht,F));const ve=F=>ae(te[F],1,1,()=>{te[F]=null});let Me=Mt(e[0].filter(H0)),Te=[];for(let F=0;F<Me.length;F+=1)Te[F]=R0(T0(e,Me,F));let ke=Mt([...e[1]].sort(W0)),we=[];for(let F=0;F<ke.length;F+=1)we[F]=O0(C0(e,ke,F));const We=F=>ae(we[F],1,1,()=>{we[F]=null});return{c(){t=k("main"),n=k("h2"),n.textContent="Analysis",r=R(),i=k("div"),a=k("label"),o=Pe(`Results JSONs and Prolific demographics CSV
      `),u=k("input"),s=R(),l=k("button"),l.textContent="export JSON",c=R(),f=k("div"),d=Pe(h),m=Pe(` participants completed -
    `),g=Pe(p),y=Pe(` tests -
    `),w=Pe(b),v=Pe(" filtered tests"),_=R(),M=k("div"),x=k("h3"),x.textContent="Encoding order",C=R();for(let F=0;F<Ne.length;F+=1)Ne[F].c();E=R(),$=k("div");for(let F=0;F<De.length;F+=1)De[F].c();A=R(),Ee(L.$$.fragment),O=R(),Ee(T.$$.fragment),S=R(),I=k("div"),ne=k("h3"),ne.textContent="Mean and CI of Final Values",ee=R(),Ee(K.$$.fragment),q=R(),G=k("div"),z=k("h3"),z.textContent="Mean and CI of Trial Counts",U=R(),Ee(oe.$$.fragment),ue=R(),ie=k("div"),V=k("h3"),V.textContent="Final Values for Each Stimulus and All Participants",Y=R();for(let F=0;F<te.length;F+=1)te[F].c();N=R(),H=k("div"),j=k("h3"),j.textContent="Feedback",D=R();for(let F=0;F<Te.length;F+=1)Te[F].c();be=R(),J=k("div");for(let F=0;F<we.length;F+=1)we[F].c();B(u,"type","file"),B(u,"accept",".json,.csv"),u.multiple=!0},m(F,re){Q(F,t,re),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u),P(i,s),P(i,l),P(t,c),P(t,f),P(f,d),P(f,m),P(f,g),P(f,y),P(f,w),P(f,v),P(t,_),P(t,M),P(M,x),P(M,C);for(let ge=0;ge<Ne.length;ge+=1)Ne[ge]&&Ne[ge].m(M,null);P(t,E),P(t,$);for(let ge=0;ge<De.length;ge+=1)De[ge]&&De[ge].m($,null);P(t,A),Ae(L,t,null),P(t,O),Ae(T,t,null),P(t,S),P(t,I),P(I,ne),P(I,ee),Ae(K,I,null),P(t,q),P(t,G),P(G,z),P(G,U),Ae(oe,G,null),P(t,ue),P(t,ie),P(ie,V),P(ie,Y);for(let ge=0;ge<te.length;ge+=1)te[ge]&&te[ge].m(ie,null);P(t,N),P(t,H),P(H,j),P(H,D);for(let ge=0;ge<Te.length;ge+=1)Te[ge]&&Te[ge].m(H,null);P(t,be),P(t,J);for(let ge=0;ge<we.length;ge+=1)we[ge]&&we[ge].m(J,null);fe=!0,_e||(Oe=[je(u,"input",e[5]),je(l,"click",e[6])],_e=!0)},p(F,[re]){if((!fe||re&1)&&h!==(h=F[0].length+"")&&Pt(d,h),(!fe||re&2)&&p!==(p=F[1].length+"")&&Pt(g,p),(!fe||re&16)&&b!==(b=F[4].length+"")&&Pt(w,b),re&1){tt=Mt(cr(F[0],q0).sort(G0));let W;for(W=0;W<tt.length;W+=1){const dt=N0(F,tt,W);Ne[W]?Ne[W].p(dt,re):(Ne[W]=B0(dt),Ne[W].c(),Ne[W].m(M,null))}for(;W<Ne.length;W+=1)Ne[W].d(1);Ne.length=tt.length}if(re&2){Ut=Mt(cr(F[1],z0));let W;for(W=0;W<Ut.length;W+=1){const dt=D0(F,Ut,W);De[W]?(De[W].p(dt,re),X(De[W],1)):(De[W]=F0(dt),De[W].c(),X(De[W],1),De[W].m($,null))}for(jt(),W=Ut.length;W<De.length;W+=1)Dr(W);Xt()}const ge={};re&1&&(ge.data=F[0]),L.$set(ge);const _t={};re&1&&(_t.data=F[0]),T.$set(_t);const an={};re&8&&(an.stimuli=F[3]),K.$set(an);const Xa={};if(re&8&&(Xa.stimuli=F[3]),oe.$set(Xa),re&12){Ht=Mt(F[3]);let W;for(W=0;W<Ht.length;W+=1){const dt=$0(F,Ht,W);te[W]?(te[W].p(dt,re),X(te[W],1)):(te[W]=L0(dt),te[W].c(),X(te[W],1),te[W].m(ie,null))}for(jt(),W=Ht.length;W<te.length;W+=1)ve(W);Xt()}if(re&1){Me=Mt(F[0].filter(H0));let W;for(W=0;W<Me.length;W+=1){const dt=T0(F,Me,W);Te[W]?Te[W].p(dt,re):(Te[W]=R0(dt),Te[W].c(),Te[W].m(H,null))}for(;W<Te.length;W+=1)Te[W].d(1);Te.length=Me.length}if(re&2){ke=Mt([...F[1]].sort(W0));let W;for(W=0;W<ke.length;W+=1){const dt=C0(F,ke,W);we[W]?(we[W].p(dt,re),X(we[W],1)):(we[W]=O0(dt),we[W].c(),X(we[W],1),we[W].m(J,null))}for(jt(),W=ke.length;W<we.length;W+=1)We(W);Xt()}},i(F){if(!fe){for(let re=0;re<Ut.length;re+=1)X(De[re]);X(L.$$.fragment,F),X(T.$$.fragment,F),X(K.$$.fragment,F),X(oe.$$.fragment,F);for(let re=0;re<Ht.length;re+=1)X(te[re]);for(let re=0;re<ke.length;re+=1)X(we[re]);fe=!0}},o(F){De=De.filter(Boolean);for(let re=0;re<De.length;re+=1)ae(De[re]);ae(L.$$.fragment,F),ae(T.$$.fragment,F),ae(K.$$.fragment,F),ae(oe.$$.fragment,F),te=te.filter(Boolean);for(let re=0;re<te.length;re+=1)ae(te[re]);we=we.filter(Boolean);for(let re=0;re<we.length;re+=1)ae(we[re]);fe=!1},d(F){F&&Z(t),ur(Ne,F),ur(De,F),Se(L),Se(T),Se(K),Se(oe),ur(te,F),ur(Te,F),ur(we,F),_e=!1,gn(Oe)}}}const Mk=800;let xk=.005,Pk=20;const q0=e=>e.encodingOrder,G0=(e,t)=>e[1].lenght-t[1].length,z0=e=>e.testType,U0=e=>e.final,H0=e=>e.demographics.partFeedback.trim().length>0,W0=(e,t)=>e.final-t.final,Ak=(e,t)=>t;function Sk(e,t,n){let r,i,a,o,u=[],s=null;const l=async p=>{const g=[];for(const b of p.target.files)if(b.name.endsWith(".csv")){const w=await b.text();s=S5(w),console.log("p demo",s)}else{const w=await b.text();g.push(JSON.parse(w))}const y=cr(g,b=>b.demographics.partID);console.log(`${y.length} participants`,y),n(0,u=g.filter(b=>b.studyStep==="feedback").map((b,w)=>({...b,demographics:{...b.demographics,internalPID:w+1},prolificDemogr:s.filter(v=>v["Participant id"]===b.demographics.partID)[0],finalAudio:b.tests.filter(v=>v.encoding.startsWith("audio"))[0].final,finalColor:b.tests.filter(v=>v.encoding.startsWith("color"))[0].final,finalWaveform:b.tests.filter(v=>v.encoding.startsWith("waveform"))[0].final,encodingOrder:b.tests.map(v=>v.encoding).join(", ")})).filter(b=>b.prolificDemogr!==void 0)),console.log("participants",u)},c=p=>{if(p.lenght===0)return[];const g=(b,w=5)=>{const v=Math.floor(b/w)*w;return`${v}-${v+w-1}`},y=[];for(const b of p)for(const[w,v]of b.tests.entries()){let _=v.encoding;y.push({...b.demographics,partAge:b.demographics.partAge?b.demographics.partAge:g(b.prolificDemogr.Age,10),partSex:b.demographics.partGender?b.demographics.partGender:b.prolificDemogr.Sex,countryBirth:b.prolificDemogr["Country of birth"],countryResidence:b.prolificDemogr["Country of residence"],prolificApprovals:b.prolificDemogr["Total approvals"],...v,date:b.date,testType:_,testOrder:w})}return console.log("tests",y),y},f=(p,g)=>p.filter(y=>y.final<g),h=p=>p.length===0?[]:cr(p,y=>y.testType).map(([y,b])=>{const w=b.map(v=>v.final);return{encoding:y,testType:y,finals:w,finalMean:Bu(w),finalVar:xc(w),trialCounts:b.map(v=>v.trialCount)}}),d=()=>{const p=JSON.stringify(u,void 0,2),g=new Blob([p],{type:"text/plain;charset=utf-8"});x0(g,"participants.json");const y=JSON.stringify(r,void 0,2),b=new Blob([y],{type:"text/plain;charset=utf-8"});x0(b,"tests.json")},m=p=>Math.abs(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=c(u)),e.$$.dirty&2&&n(4,i=f(r,Pk)),e.$$.dirty&2&&n(3,a=h(r)),e.$$.dirty&2&&n(2,o=It(r.map(p=>Math.abs(p.final)))),e.$$.dirty&2&&console.log("tests by enc",cr(r,p=>p.testType))},[u,r,o,a,i,l,d,m]}class Ek extends Je{constructor(t){super(),Qe(this,t,Sk,_k,Ke,{})}}function Fe(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}Fe.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};Fe.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};Fe.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};Fe.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=Jy(0,e.length-1);return this.activate(e[t]),this};Fe.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=Jy(0,e.length-1);this.activate(e[t])};Fe.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};Fe.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};Fe.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};Fe.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Fe.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};Fe.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};Fe.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};Fe.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};Fe.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};Fe.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};Fe.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};Fe.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};Fe.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};Fe.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};Fe.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};Fe.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const Uf=function(){};Uf.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};Uf.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};Fe.prototype.checkErr=new Uf;function Jy(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Lo(e,t){return new URLSearchParams(e.location.search).get(t)}function Ck(e){let t,n,r,i,a,o,u;return{c(){t=k("main"),n=k("audio"),r=R(),i=k("button"),a=Pe(e[0]),n.controls=!1},m(s,l){Q(s,t,l),P(t,n),e[5](n),P(t,r),P(t,i),P(i,a),o||(u=je(i,"click",e[2]),o=!0)},p(s,[l]){l&1&&Pt(a,s[0])},i:ye,o:ye,d(s){s&&Z(t),e[5](null),o=!1,u()}}}function Tk(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:a="play audio"}=t,o=null,u;const s=(f,h)=>{h&&u&&(o=r9(h,f),Kc(o,h.sampleRate,u))};wa(()=>s(r,i));const l=async()=>{u&&(n(1,u.currentTime=0,u),u.play())};function c(f){ut[f?"unshift":"push"](()=>{u=f,n(1,u)})}return e.$$set=f=>{"pattern"in f&&n(3,r=f.pattern),"cachedAudio"in f&&n(4,i=f.cachedAudio),"label"in f&&n(0,a=f.label)},[a,u,l,r,i,c]}class Io extends Je{constructor(t){super(),Qe(this,t,Tk,Ck,Ke,{pattern:3,cachedAudio:4,label:0})}}function kk(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=R(),i=k("button"),i.textContent="play audio",n.controls=!1},m(u,s){Q(u,t,s),P(t,n),e[4](n),P(t,r),P(t,i),a||(o=je(i,"click",e[1]),a=!0)},p:ye,i:ye,o:ye,d(u){u&&Z(t),e[4](null),a=!1,o()}}}function $k(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,a;const o=l=>{l&&a&&Kc(l,i,a)};wa(()=>o(r));const u=()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(l){ut[l?"unshift":"push"](()=>{a=l,n(0,a)})}return e.$$set=l=>{"audioData"in l&&n(2,r=l.audioData),"sampleRate"in l&&n(3,i=l.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&o(r)},[a,u,r,i,s]}class V0 extends Je{constructor(t){super(),Qe(this,t,$k,kk,Ke,{audioData:2,sampleRate:3})}}function Y0(e){let t;return{c(){t=k("div"),t.innerHTML=`<p class="svelte-rz4e1l">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-rz4e1l">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-rz4e1l">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-rz4e1l">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){Q(n,t,r)},d(n){n&&Z(t)}}}function j0(e){let t,n,r,i,a,o,u,s,l;return i=new Io({props:{pattern:[.1,.6,1.1],cachedAudio:e[14][2].audioBuffer}}),{c(){t=k("div"),n=k("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=R(),Ee(i.$$.fragment),a=R(),o=k("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",u=R(),s=k("a"),s.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",B(n,"class","svelte-rz4e1l"),B(o,"class","svelte-rz4e1l"),B(s,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(c,f){Q(c,t,f),P(t,n),P(t,r),Ae(i,t,null),P(t,a),P(t,o),P(t,u),P(t,s),l=!0},p(c,f){const h={};f[0]&16384&&(h.cachedAudio=c[14][2].audioBuffer),i.$set(h)},i(c){l||(X(i.$$.fragment,c),l=!0)},o(c){ae(i.$$.fragment,c),l=!1},d(c){c&&Z(t),Se(i)}}}function X0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b;return{c(){t=k("div"),n=k("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=R(),i=k("div"),a=k("button"),a.textContent="+",o=R(),u=k("button"),u.textContent="-",s=R(),l=Wf("svg"),c=Wf("rect"),p=R(),g=k("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,B(n,"class","svelte-rz4e1l"),B(c,"width",f=e[0]*.52),B(c,"height",h=e[22]*2),B(c,"fill","#ccc"),B(c,"rx","8"),B(l,"width",d=e[0]*.52+"px"),B(l,"height",m=e[22]*2+"px"),B(g,"class","svelte-rz4e1l")},m(w,v){Q(w,t,v),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(t,s),P(t,l),P(l,c),P(t,p),P(t,g),y||(b=[je(a,"click",e[24]),je(u,"click",e[25])],y=!0)},p(w,v){v[0]&1&&f!==(f=w[0]*.52)&&B(c,"width",f),v[0]&4194304&&h!==(h=w[22]*2)&&B(c,"height",h),v[0]&1&&d!==(d=w[0]*.52+"px")&&B(l,"width",d),v[0]&4194304&&m!==(m=w[22]*2+"px")&&B(l,"height",m)},d(w){w&&Z(t),y=!1,gn(b)}}}function Z0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b,w;return h=new Io({props:{pattern:[.1],cachedAudio:e[14][0].audioBuffer,label:"hi-hat"}}),m=new Io({props:{pattern:[.1],cachedAudio:e[14][1].audioBuffer,label:"snare drum"}}),g=new Io({props:{pattern:[.1],cachedAudio:e[14][2].audioBuffer,label:"bass drum"}}),{c(){t=k("div"),n=k("div"),n.innerHTML=`<p class="svelte-rz4e1l">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-rz4e1l">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-rz4e1l">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played togehter will still be played at
          the same time, but this time will be either too early or too late.</p>`,r=Pe(`
      This is what the pattern looks like in sheet music:
      `),i=k("div"),a=k("img"),s=R(),l=k("div"),c=k("span"),c.textContent="Click to hear the different sounds:",f=R(),Ee(h.$$.fragment),d=R(),Ee(m.$$.fragment),p=R(),Ee(g.$$.fragment),y=Pe(`
      This is what the full, correctly played pattern sounds like:
      `),b=k("div"),b.innerHTML='<audio src="drum-pattern-correct-once.wav" controls=""></audio>',B(a,"width",o=e[0]+"px"),n3(a.src,u="drum-pattern-labels3.png")||B(a,"src",u),B(a,"alt","drum pattern as sheet music"),qe(l,"display","grid"),qe(l,"grid-template-columns","repeat(4,max-content)"),qe(l,"gap","10px"),qe(l,"align-items","center")},m(v,_){Q(v,t,_),P(t,n),P(t,r),P(t,i),P(i,a),P(t,s),P(t,l),P(l,c),P(l,f),Ae(h,l,null),P(l,d),Ae(m,l,null),P(l,p),Ae(g,l,null),P(t,y),P(t,b),w=!0},p(v,_){(!w||_[0]&1&&o!==(o=v[0]+"px"))&&B(a,"width",o);const M={};_[0]&16384&&(M.cachedAudio=v[14][0].audioBuffer),h.$set(M);const x={};_[0]&16384&&(x.cachedAudio=v[14][1].audioBuffer),m.$set(x);const C={};_[0]&16384&&(C.cachedAudio=v[14][2].audioBuffer),g.$set(C)},i(v){w||(X(h.$$.fragment,v),X(m.$$.fragment,v),X(g.$$.fragment,v),w=!0)},o(v){ae(h.$$.fragment,v),ae(m.$$.fragment,v),ae(g.$$.fragment,v),w=!1},d(v){v&&Z(t),Se(h),Se(m),Se(g)}}}function K0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b,w,v,_,M,x,C,E,$,A,L,O;return{c(){t=k("div"),n=k("p"),n.textContent="Please answer the following questions about yourself:",r=R(),i=k("label"),a=k("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=R(),u=k("select"),s=k("option"),s.textContent="none",l=k("option"),l.textContent="high school",c=k("option"),c.textContent="bachelor",f=k("option"),f.textContent="master",h=k("option"),h.textContent="phd",d=R(),m=k("label"),p=k("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=R(),y=k("input"),b=R(),w=k("label"),v=k("span"),v.textContent="For how many years do you roughly play it/them?",_=R(),M=k("input"),x=R(),C=k("label"),E=k("span"),E.textContent=`How many years of experience do you have with information
          visualization?`,$=R(),A=k("input"),B(n,"class","svelte-rz4e1l"),s.__value="none",rt(s,s.__value),l.__value="highs",rt(l,l.__value),c.__value="bachelor",rt(c,c.__value),f.__value="master",rt(f,f.__value),h.__value="phd",rt(h,h.__value),e[4]===void 0&&Qi(()=>e[26].call(u)),B(i,"class","svelte-rz4e1l"),B(y,"type","text"),B(y,"placeholder","free text"),B(m,"class","svelte-rz4e1l"),B(M,"type","number"),B(M,"min","0"),B(M,"step","1"),B(w,"class","svelte-rz4e1l"),B(A,"type","number"),B(A,"min","0"),B(A,"step","1"),B(C,"class","svelte-rz4e1l"),B(t,"class","demo-form svelte-rz4e1l")},m(T,S){Q(T,t,S),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(u,s),P(u,l),P(u,c),P(u,f),P(u,h),Ro(u,e[4],!0),P(t,d),P(t,m),P(m,p),P(m,g),P(m,y),rt(y,e[5]),P(t,b),P(t,w),P(w,v),P(w,_),P(w,M),rt(M,e[6]),P(t,x),P(t,C),P(C,E),P(C,$),P(C,A),rt(A,e[7]),L||(O=[je(u,"change",e[26]),je(y,"input",e[27]),je(M,"input",e[28]),je(A,"input",e[29])],L=!0)},p(T,S){S[0]&16&&Ro(u,T[4]),S[0]&32&&y.value!==T[5]&&rt(y,T[5]),S[0]&64&&Xr(M.value)!==T[6]&&rt(M,T[6]),S[0]&128&&Xr(A.value)!==T[7]&&rt(A,T[7])},d(T){T&&Z(t),L=!1,gn(O)}}}function Q0(e){let t,n,r=e[10]&&J0(e);return{c(){r&&r.c(),t=wc()},m(i,a){r&&r.m(i,a),Q(i,t,a),n=!0},p(i,a){i[10]?r?(r.p(i,a),a[0]&1024&&X(r,1)):(r=J0(i),r.c(),X(r,1),r.m(t.parentNode,t)):r&&(jt(),ae(r,1,1,()=>{r=null}),Xt())},i(i){n||(X(r),n=!0)},o(i){ae(r),n=!1},d(i){i&&Z(t),r&&r.d(i)}}}function J0(e){let t,n,r=e[3]+1+"",i,a,o=e[1].length+"",u,s,l,c,f,h,d,m,p=e[9]+1+"",g,y,b,w,v,_;const M=[Nk,Dk],x=[];function C(E,$){return E[13]==="audio"?0:E[12]===!1?1:-1}return~(b=C(e))&&(w=x[b]=M[b](e)),{c(){t=k("p"),n=Pe("Test number "),i=Pe(r),a=Pe(" of "),u=Pe(o),s=R(),l=k("p"),l.innerHTML="The <b>5th beat</b> with a <b>hi-hat and a bass</b> note is shifted.",c=R(),f=k("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,h=R(),d=k("p"),m=Pe("Trial number "),g=Pe(p),y=R(),w&&w.c(),v=wc(),B(t,"class","svelte-rz4e1l"),B(l,"class","svelte-rz4e1l"),B(f,"class","svelte-rz4e1l"),B(d,"class","svelte-rz4e1l")},m(E,$){Q(E,t,$),P(t,n),P(t,i),P(t,a),P(t,u),Q(E,s,$),Q(E,l,$),Q(E,c,$),Q(E,f,$),Q(E,h,$),Q(E,d,$),P(d,m),P(d,g),Q(E,y,$),~b&&x[b].m(E,$),Q(E,v,$),_=!0},p(E,$){(!_||$[0]&8)&&r!==(r=E[3]+1+"")&&Pt(i,r),(!_||$[0]&2)&&o!==(o=E[1].length+"")&&Pt(u,o),(!_||$[0]&512)&&p!==(p=E[9]+1+"")&&Pt(g,p);let A=b;b=C(E),b===A?~b&&x[b].p(E,$):(w&&(jt(),ae(x[A],1,1,()=>{x[A]=null}),Xt()),~b?(w=x[b],w?w.p(E,$):(w=x[b]=M[b](E),w.c()),X(w,1),w.m(v.parentNode,v)):w=null)},i(E){_||(X(w),_=!0)},o(E){ae(w),_=!1},d(E){E&&(Z(t),Z(s),Z(l),Z(c),Z(f),Z(h),Z(d),Z(y),Z(v)),~b&&x[b].d(E)}}}function Dk(e){let t,n,r,i=(e[13]==="waveform"||wo)&&e1(e),a=(e[13]==="color"||wo)&&t1(e);return{c(){i&&i.c(),t=R(),a&&a.c(),n=wc()},m(o,u){i&&i.m(o,u),Q(o,t,u),a&&a.m(o,u),Q(o,n,u),r=!0},p(o,u){o[13]==="waveform"||wo?i?(i.p(o,u),u[0]&8192&&X(i,1)):(i=e1(o),i.c(),X(i,1),i.m(t.parentNode,t)):i&&(jt(),ae(i,1,1,()=>{i=null}),Xt()),o[13]==="color"||wo?a?(a.p(o,u),u[0]&8192&&X(a,1)):(a=t1(o),a.c(),X(a,1),a.m(n.parentNode,n)):a&&(jt(),ae(a,1,1,()=>{a=null}),Xt())},i(o){r||(X(i),X(a),r=!0)},o(o){ae(i),ae(a),r=!1},d(o){o&&(Z(t),Z(n)),i&&i.d(o),a&&a.d(o)}}}function Nk(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new V0({props:{audioData:e[16],sampleRate:e[18]}}),o=new V0({props:{audioData:e[17],sampleRate:e[18]}}),h=new ay({props:{audioData:e[15],sampleRate:e[18],currentTrialNumber:e[9]}}),{c(){t=k("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=R(),r=k("div"),Ee(i.$$.fragment),a=R(),Ee(o.$$.fragment),u=R(),s=k("div"),s.textContent="Example for early",l=R(),c=k("div"),c.textContent="Example for late",f=R(),Ee(h.$$.fragment),B(t,"class","svelte-rz4e1l"),B(s,"class","svelte-rz4e1l"),B(c,"class","svelte-rz4e1l"),B(r,"class","vis-example svelte-rz4e1l")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),Ae(i,r,null),P(r,a),Ae(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),Q(m,f,p),Ae(h,m,p),d=!0},p(m,p){const g={};p[0]&65536&&(g.audioData=m[16]),p[0]&262144&&(g.sampleRate=m[18]),i.$set(g);const y={};p[0]&131072&&(y.audioData=m[17]),p[0]&262144&&(y.sampleRate=m[18]),o.$set(y);const b={};p[0]&32768&&(b.audioData=m[15]),p[0]&262144&&(b.sampleRate=m[18]),p[0]&512&&(b.currentTrialNumber=m[9]),h.$set(b)},i(m){d||(X(i.$$.fragment,m),X(o.$$.fragment,m),X(h.$$.fragment,m),d=!0)},o(m){ae(i.$$.fragment,m),ae(o.$$.fragment,m),ae(h.$$.fragment,m),d=!1},d(m){m&&(Z(t),Z(n),Z(r),Z(f)),Se(i),Se(o),Se(h,m)}}}function e1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new To({props:{audioData:e[16],width:e[0]/2,height:e[22]/2}}),o=new To({props:{audioData:e[17],width:e[0]/2,height:e[22]/2}}),h=new To({props:{audioData:e[15],width:e[0],height:e[22]}}),{c(){t=k("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=R(),r=k("div"),Ee(i.$$.fragment),a=R(),Ee(o.$$.fragment),u=R(),s=k("div"),s.textContent="Example for early",l=R(),c=k("div"),c.textContent="Example for late",f=R(),Ee(h.$$.fragment),B(t,"class","svelte-rz4e1l"),B(s,"class","svelte-rz4e1l"),B(c,"class","svelte-rz4e1l"),B(r,"class","vis-example svelte-rz4e1l")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),Ae(i,r,null),P(r,a),Ae(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),Q(m,f,p),Ae(h,m,p),d=!0},p(m,p){const g={};p[0]&65536&&(g.audioData=m[16]),p[0]&1&&(g.width=m[0]/2),p[0]&4194304&&(g.height=m[22]/2),i.$set(g);const y={};p[0]&131072&&(y.audioData=m[17]),p[0]&1&&(y.width=m[0]/2),p[0]&4194304&&(y.height=m[22]/2),o.$set(y);const b={};p[0]&32768&&(b.audioData=m[15]),p[0]&1&&(b.width=m[0]),p[0]&4194304&&(b.height=m[22]),h.$set(b)},i(m){d||(X(i.$$.fragment,m),X(o.$$.fragment,m),X(h.$$.fragment,m),d=!0)},o(m){ae(i.$$.fragment,m),ae(o.$$.fragment,m),ae(h.$$.fragment,m),d=!1},d(m){m&&(Z(t),Z(n),Z(r),Z(f)),Se(i),Se(o),Se(h,m)}}}function t1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new Fo({props:{pattern:e[20],width:e[0]/2,height:e[22]*.7}}),o=new Fo({props:{pattern:e[21],width:e[0]/2,height:e[22]*.7}}),h=new Fo({props:{pattern:e[19],width:e[0],height:e[22]}}),{c(){t=k("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Brighter bars show smaller gaps (early),
            darker bars show wider gaps (late).`,n=R(),r=k("div"),Ee(i.$$.fragment),a=R(),Ee(o.$$.fragment),u=R(),s=k("div"),s.textContent="Example for early",l=R(),c=k("div"),c.textContent="Example for late",f=R(),Ee(h.$$.fragment),B(t,"class","svelte-rz4e1l"),B(s,"class","svelte-rz4e1l"),B(c,"class","svelte-rz4e1l"),B(r,"class","vis-example svelte-rz4e1l")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),Ae(i,r,null),P(r,a),Ae(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),Q(m,f,p),Ae(h,m,p),d=!0},p(m,p){const g={};p[0]&1048576&&(g.pattern=m[20]),p[0]&1&&(g.width=m[0]/2),p[0]&4194304&&(g.height=m[22]*.7),i.$set(g);const y={};p[0]&2097152&&(y.pattern=m[21]),p[0]&1&&(y.width=m[0]/2),p[0]&4194304&&(y.height=m[22]*.7),o.$set(y);const b={};p[0]&524288&&(b.pattern=m[19]),p[0]&1&&(b.width=m[0]),p[0]&4194304&&(b.height=m[22]),h.$set(b)},i(m){d||(X(i.$$.fragment,m),X(o.$$.fragment,m),X(h.$$.fragment,m),d=!0)},o(m){ae(i.$$.fragment,m),ae(o.$$.fragment,m),ae(h.$$.fragment,m),d=!1},d(m){m&&(Z(t),Z(n),Z(r),Z(f)),Se(i),Se(o),Se(h,m)}}}function n1(e){let t,n,r,i,a,o,u;return{c(){t=k("div"),n=Pe(`Almost done!
      `),r=k("p"),r.textContent="Do you have any final feedback/comments?",i=R(),a=k("textarea"),B(r,"class","svelte-rz4e1l")},m(s,l){Q(s,t,l),P(t,n),P(t,r),P(t,i),P(t,a),rt(a,e[8]),o||(u=je(a,"input",e[30]),o=!0)},p(s,l){l[0]&256&&rt(a,s[8])},d(s){s&&Z(t),o=!1,u()}}}function r1(e){let t,n,r;return{c(){t=k("div"),t.textContent="Thanks for participating!",n=R(),r=k("a"),r.textContent="click here to get your compensation",B(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){Q(i,t,a),Q(i,n,a),Q(i,r,a)},d(i){i&&(Z(t),Z(n),Z(r))}}}function i1(e){let t,n,r;return{c(){t=k("button"),t.textContent="next step",B(t,"class","next-btn svelte-rz4e1l")},m(i,a){Q(i,t,a),n||(r=je(t,"click",e[23]),n=!0)},p:ye,d(i){i&&Z(t),n=!1,r()}}}function Bk(e){let t,n,r,i,a,o,u,s,l,c,f=e[2]==="consent"&&Y0(),h=e[2]==="start1"&&j0(e),d=e[2]==="start2"&&X0(e),m=e[2]==="start3"&&Z0(e),p=e[2]==="demo"&&K0(e),g=e[2]==="tests"&&Q0(e),y=e[2]==="feedback"&&n1(e),b=e[2]==="done"&&r1(),w=!e[11]&&e[2]!=="done"&&i1(e);return{c(){t=k("main"),f&&f.c(),n=R(),h&&h.c(),r=R(),d&&d.c(),i=R(),m&&m.c(),a=R(),p&&p.c(),o=R(),g&&g.c(),u=R(),y&&y.c(),s=R(),b&&b.c(),l=R(),w&&w.c(),B(t,"class","svelte-rz4e1l")},m(v,_){Q(v,t,_),f&&f.m(t,null),P(t,n),h&&h.m(t,null),P(t,r),d&&d.m(t,null),P(t,i),m&&m.m(t,null),P(t,a),p&&p.m(t,null),P(t,o),g&&g.m(t,null),P(t,u),y&&y.m(t,null),P(t,s),b&&b.m(t,null),P(t,l),w&&w.m(t,null),c=!0},p(v,_){v[2]==="consent"?f||(f=Y0(),f.c(),f.m(t,n)):f&&(f.d(1),f=null),v[2]==="start1"?h?(h.p(v,_),_[0]&4&&X(h,1)):(h=j0(v),h.c(),X(h,1),h.m(t,r)):h&&(jt(),ae(h,1,1,()=>{h=null}),Xt()),v[2]==="start2"?d?d.p(v,_):(d=X0(v),d.c(),d.m(t,i)):d&&(d.d(1),d=null),v[2]==="start3"?m?(m.p(v,_),_[0]&4&&X(m,1)):(m=Z0(v),m.c(),X(m,1),m.m(t,a)):m&&(jt(),ae(m,1,1,()=>{m=null}),Xt()),v[2]==="demo"?p?p.p(v,_):(p=K0(v),p.c(),p.m(t,o)):p&&(p.d(1),p=null),v[2]==="tests"?g?(g.p(v,_),_[0]&4&&X(g,1)):(g=Q0(v),g.c(),X(g,1),g.m(t,u)):g&&(jt(),ae(g,1,1,()=>{g=null}),Xt()),v[2]==="feedback"?y?y.p(v,_):(y=n1(v),y.c(),y.m(t,s)):y&&(y.d(1),y=null),v[2]==="done"?b||(b=r1(),b.c(),b.m(t,l)):b&&(b.d(1),b=null),!v[11]&&v[2]!=="done"?w?w.p(v,_):(w=i1(v),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},i(v){c||(X(h),X(m),X(g),c=!0)},o(v){ae(h),ae(m),ae(g),c=!1},d(v){v&&Z(t),f&&f.d(),h&&h.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),y&&y.d(),b&&b.d(),w&&w.d()}}}const wo=!1,Fk="/store",Lk=120,_o=.1,a1=.005,o1=4;function Ik(e,t,n){let r,i=Lo(window,"PROLIFIC_PID"),a=Lo(window,"STUDY_ID"),o=Lo(window,"SESSION_ID"),u=["audio","waveform","color"].map(te=>({encoding:te}));console.log({tests:u});let s="consent",l=0,c,f="",h="",d=0,m=0,p="",g=0,y,b={},w=[],v,_,M=!1,x=!1,C=!1,E="tick",$=600,A=[],L=0;const O=[];wa(()=>{document.querySelector("html").addEventListener("keyup",G)});const T=()=>{_=new Fe({ratio:{firstVal:_o,down:2,up:1,stepSizeDown:a1,stepSizeUp:a1*.5488,limits:[0,_o],direction:-1,reversalLimit:5,verbosity:0}}),_.init()};function S(){s==="consent"?n(2,s="start1"):s==="start1"?n(2,s="start2"):s==="start2"?n(2,s="start3"):s==="start3"?(n(1,u=i9(u)),n(2,s="demo")):s==="demo"?f==""||h==""?alert("please fill the form first"):(n(2,s="tests"),n(3,l=0)):s==="tests"?l<u.length?I():n(2,s="feedback"):s==="feedback"&&(z(),n(2,s="done"))}function I(){T(),n(13,E=u[l].encoding);const te=_e(-_o),ve=_e(_o);n(20,j=te.noteTimes),n(21,D=ve.noteTimes),n(16,V=te.renderedAudio),n(17,Y=ve.renderedAudio),n(9,g=0),y=0,v=0,n(10,M=!0),A=[],w=[],c=new Date,ne()}function ne(){console.log("Starting trial "+g),b={},n(11,x=!0),ee()}function ee(){let ve=_.getLast("ratio");ve=Math.random()<.5?ve:-ve,b.deviation=ve;const Me=_e(ve);n(19,H=Me.noteTimes),Me.noteTimesSeparate,n(18,N=Me.sampleRate),n(15,ie=Me.renderedAudio),console.log("generated pattern"),n(12,C=!0),window.setTimeout(()=>{n(12,C=!1),b.startTime=new Date},1e3)}function K(te){if(!x)return;n(11,x=!1),b.decisionChoice=te,b.errorCode=0,b.timeTaken=(new Date-b.startTime)/1e3;const ve=v;(b.decisionChoice==0&&b.deviation<0||b.decisionChoice==1&&b.deviation>0)&&b.errorCode==0&&v++,b.errorCode==0&&(_.next(ve!=v),w[w.length]=b),b.errorCode==0&&y++,n(9,g++,g),_.reversalLimitReached("ratio")?q():ne()}function q(){n(10,M=!1),n(11,x=!1),A=[],L=_.getFinalVal("ratio");for(let ve=0;ve<w.length;ve++)A[ve]=w[ve].deviation;console.log(A);const te=new Date;O.push({encoding:E,final:L,data:A,score:v,testNumber:l,trialCount:g+1,trials:w,validTrialCount:y+1,testTimeSeconds:(te-c)/1e3}),n(3,l++,l)}function G(te){if(!C)switch(te.key){case"ArrowLeft":x&&K(0);break;case"ArrowRight":x&&K(1);break;case"PageDown":!x&&s!=="done"&&S()}}function z(){const te={studyStep:s,demographics:{partID:i,studyID:a,sessionID:o,partEduation:f,partMusicInstr:h,partMusicInstrYears:d,partVisExperienceYears:m,partFeedback:p,visWidth:$},date:new Date().toISOString(),tests:O};console.log("saving data",te);const ve=JSON.stringify(te,void 0,2);fetch(Fk,{method:"POST",headers:{"Content-Type":"application/json"},body:ve}).then(Me=>{console.log("Data saved:",Me)})}let U=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}],oe=Ly(Lk);const ue=o1*oe;let ie=null,V=null,Y=null,N,H=[],j=[],D=[];(async()=>{n(14,U=await Promise.all(U.map(async te=>({...te,times:te.beats.map(ve=>oe*(ve-1)),timesOriginal:te.beats.map(ve=>oe*(ve-1)),audioBuffer:await ng(te.sample)}))))})();const J=(te=0)=>{if(te===0)return U;const ve=fe([U]),Me=ve.filter(ke=>ke.instrument==="hihat")[0];ve.filter(ke=>ke.instrument==="snare")[0];const Te=ve.filter(ke=>ke.instrument==="bass")[0];return Te.times[1]=Te.timesOriginal[1]+te,Me.times[4]=Me.timesOriginal[4]+te,ve},fe=te=>{const ve=te[0].map(Me=>({...Me,beats:[...Me.beats],times:[...Me.times],timesOriginal:[...Me.timesOriginal]}));for(let Me=1;Me<te.length;Me++){const Te=te[Me];for(const ke of Te){const we=ve.filter(We=>We.instrument===ke.instrument)[0];we.beats=[...we.beats,...ke.beats.map(We=>We+Me*o1)],we.times=[...we.times,...ke.times.map(We=>We+Me*ue)],we.timesOriginal=[...we.timesOriginal,...ke.timesOriginal.map(We=>We+Me*ue)]}}return ve},_e=te=>{if(!U[0].audioBuffer)return;const Me=[J(te)],Te=fe(Me),ke=Te.map(re=>re.times).flat().sort(),we=Te.map(re=>re.times.map(ge=>({time:ge,instr:re.instrument}))).flat(1/0).sort((re,ge)=>{re.time-ge.time}),We=Te[0].audioBuffer.sampleRate,F=Ql(Te,ue*Me.length+.1,We);return{noteTimes:ke,noteTimesSeparate:we,sampleRate:We,renderedAudio:F}},Oe=()=>n(0,$*=1.05),tt=()=>n(0,$*=.95);function Ne(){f=c1(this),n(4,f)}function Ut(){h=this.value,n(5,h)}function De(){d=Xr(this.value),n(6,d)}function Dr(){m=Xr(this.value),n(7,m)}function Ht(){p=this.value,n(8,p)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(22,r=$/6)},[$,u,s,l,f,h,d,m,p,g,M,x,C,E,U,ie,V,Y,N,H,j,D,r,S,Oe,tt,Ne,Ut,De,Dr,Ht]}class Rk extends Je{constructor(t){super(),Qe(this,t,Ik,Bk,Ke,{},null,[-1,-1])}}function u1(e){let t,n,r,i,a,o,u,s;return{c(){t=k("div"),n=k("button"),n.textContent="Playground",r=R(),i=k("button"),i.textContent="Study",a=R(),o=k("button"),o.textContent="Analysis"},m(l,c){Q(l,t,c),P(t,n),P(t,r),P(t,i),P(t,a),P(t,o),u||(s=[je(n,"click",e[1]),je(i,"click",e[2]),je(o,"click",e[3])],u=!0)},p:ye,d(l){l&&Z(t),u=!1,gn(s)}}}function Ok(e){let t,n;return t=new Ek({}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function qk(e){let t,n;return t=new Rk({}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function Gk(e){let t,n;return t=new jT({}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function zk(e){let t,n,r,i,a,o,u,s=e[0]!=="study_drums"&&u1(e);const l=[Gk,qk,Ok],c=[];function f(h,d){return h[0]==="playground"?0:h[0]==="study_drums"?1:h[0]==="analysis"?2:-1}return~(a=f(e))&&(o=c[a]=l[a](e)),{c(){t=k("main"),n=k("h1"),n.textContent="Rhythm Error Sensitivity Study",r=R(),s&&s.c(),i=R(),o&&o.c()},m(h,d){Q(h,t,d),P(t,n),P(t,r),s&&s.m(t,null),P(t,i),~a&&c[a].m(t,null),u=!0},p(h,[d]){h[0]!=="study_drums"?s?s.p(h,d):(s=u1(h),s.c(),s.m(t,i)):s&&(s.d(1),s=null);let m=a;a=f(h),a!==m&&(o&&(jt(),ae(c[m],1,1,()=>{c[m]=null}),Xt()),~a?(o=c[a],o||(o=c[a]=l[a](h),o.c()),X(o,1),o.m(t,null)):o=null)},i(h){u||(X(o),u=!0)},o(h){ae(o),u=!1},d(h){h&&Z(t),s&&s.d(),~a&&c[a].d()}}}function Uk(e,t,n){let r=Lo(window,"p")??"study_drums";return[r,()=>n(0,r="playground"),()=>n(0,r="study_drums"),()=>n(0,r="analysis")]}class Hk extends Je{constructor(t){super(),Qe(this,t,Uk,zk,Ke,{})}}new Hk({target:document.getElementById("app")});export{tg as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-BF11uHJ_.js","assets/index-DpCkqEUs.js","assets/browser-BS8zXkYK.js","assets/index-CxYqNccK.js","assets/index-DQwxBdfg.js","assets/index-jdmoobcS.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

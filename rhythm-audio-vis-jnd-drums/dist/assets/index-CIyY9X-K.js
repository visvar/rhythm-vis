var v3=Object.defineProperty;var M3=(e,t,n)=>t in e?v3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ku=(e,t,n)=>(M3(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Pe(){}function C1(e){return e()}function Jc(){return Object.create(null)}function nn(e){e.forEach(C1)}function T1(e){return typeof e=="function"}function je(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ao;function $1(e,t){return e===t?!0:(ao||(ao=document.createElement("a")),ao.href=t,e===ao.href)}function x3(e){return Object.keys(e).length===0}function x(e,t){e.appendChild(t)}function z(e,t,n){e.insertBefore(t,n||null)}function U(e){e.parentNode&&e.parentNode.removeChild(e)}function hr(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S(e){return document.createElement(e)}function zo(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ue(e){return document.createTextNode(e)}function L(){return ue(" ")}function Pi(){return ue("")}function Oe(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function C(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function gn(e){return e===""?null:+e}function P3(e){return Array.from(e.childNodes)}function at(e,t){t=""+t,e.data!==t&&(e.data=t)}function $e(e,t){e.value=t??""}function We(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ii(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ef(e){const t=e.querySelector(":checked");return t&&t.__value}let la;function na(e){la=e}function kf(){if(!la)throw new Error("Function called outside component initialization");return la}function Si(e){kf().$$.on_mount.push(e)}function rn(e){kf().$$.after_update.push(e)}function S3(e){kf().$$.on_destroy.push(e)}const jr=[],dt=[];let Qr=[];const eh=[],A3=Promise.resolve();let _l=!1;function E3(){_l||(_l=!0,A3.then(D1))}function ai(e){Qr.push(e)}const Cu=new Set;let qr=0;function D1(){if(qr!==0)return;const e=la;do{try{for(;qr<jr.length;){const t=jr[qr];qr++,na(t),k3(t.$$)}}catch(t){throw jr.length=0,qr=0,t}for(na(null),jr.length=0,qr=0;dt.length;)dt.pop()();for(let t=0;t<Qr.length;t+=1){const n=Qr[t];Cu.has(n)||(Cu.add(n),n())}Qr.length=0}while(jr.length);for(;eh.length;)eh.pop()();_l=!1,Cu.clear(),na(e)}function k3(e){if(e.fragment!==null){e.update(),nn(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ai)}}function C3(e){const t=[],n=[];Qr.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Qr=t}const $o=new Set;let mr;function ut(){mr={r:0,c:[],p:mr}}function lt(){mr.r||nn(mr.c),mr=mr.p}function q(e,t){e&&e.i&&($o.delete(e),e.i(t))}function Z(e,t,n,r){if(e&&e.o){if($o.has(e))return;$o.add(e),mr.c.push(()=>{$o.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Et(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function be(e){e&&e.c()}function de(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),ai(()=>{const a=e.$$.on_mount.map(C1).filter(T1);e.$$.on_destroy?e.$$.on_destroy.push(...a):nn(a),e.$$.on_mount=[]}),i.forEach(ai)}function me(e,t){const n=e.$$;n.fragment!==null&&(C3(n.after_update),nn(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function T3(e,t){e.$$.dirty[0]===-1&&(jr.push(e),E3(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Xe(e,t,n,r,i,a,o=null,s=[-1]){const u=la;na(e);const l=e.$$={fragment:null,ctx:[],props:a,update:Pe,not_equal:i,bound:Jc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Jc(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};o&&o(l.root);let f=!1;if(l.ctx=n?n(e,t.props||{},(c,h,...d)=>{const m=d.length?d[0]:h;return l.ctx&&i(l.ctx[c],l.ctx[c]=m)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](m),f&&T3(e,c)),h}):[],l.update(),f=!0,nn(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const c=P3(t.target);l.fragment&&l.fragment.l(c),c.forEach(U)}else l.fragment&&l.fragment.c();t.intro&&q(e.$$.fragment),de(e,t.target,t.anchor),D1()}na(u)}class Ze{constructor(){ku(this,"$$");ku(this,"$$set")}$destroy(){me(this,1),this.$destroy=Pe}$on(t,n){if(!T1(n))return Pe;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!x3(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const $3="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($3);function xt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $a(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ls(e){let t,n,r;e.length!==2?(t=xt,n=(s,u)=>xt(e(s),u),r=(s,u)=>e(s)-u):(t=e===xt||e===$a?e:D3,n=e,r=e);function i(s,u,l=0,f=s.length){if(l<f){if(t(u,u)!==0)return f;do{const c=l+f>>>1;n(s[c],u)<0?l=c+1:f=c}while(l<f)}return l}function a(s,u,l=0,f=s.length){if(l<f){if(t(u,u)!==0)return f;do{const c=l+f>>>1;n(s[c],u)<=0?l=c+1:f=c}while(l<f)}return l}function o(s,u,l=0,f=s.length){const c=i(s,u,l,f-1);return c>l&&r(s[c-1],u)>-r(s[c],u)?c-1:c}return{left:i,center:o,right:a}}function D3(){return 0}function N1(e){return e===null?NaN:+e}function*N3(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const L3=Ls(xt),Is=L3.right;Ls(N1).center;function Cf(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function I3(e){return e.length|0}function F3(e){return!(e>0)}function R3(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function B3(e){return t=>e(...t)}function O3(...e){const t=typeof e[e.length-1]=="function"&&B3(e.pop());e=e.map(R3);const n=e.map(I3),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(F3))return a;for(;;){a.push(i.map((s,u)=>e[u][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function q3(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function Tf(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function Fs(e,t){const n=Tf(e,t);return n&&Math.sqrt(n)}function Rt(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Pr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,s=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);s&&(n[r++]=s),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class Sr extends Map{constructor(t,n=F1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(vl(this,t))}has(t){return super.has(vl(this,t))}set(t,n){return super.set(L1(this,t),n)}delete(t){return super.delete(I1(this,t))}}class Rs extends Set{constructor(t,n=F1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(vl(this,t))}add(t){return super.add(L1(this,t))}delete(t){return super.delete(I1(this,t))}}function vl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function L1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function I1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function F1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ho(e){return e}function Bs(e,...t){return Os(e,Ho,Ho,t)}function pr(e,...t){return Os(e,Array.from,Ho,t)}function Jr(e,t,...n){return Os(e,Ho,t,n)}function G3(e,t,...n){return Os(e,Array.from,t,n)}function Os(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new Sr,u=r[o++];let l=-1;for(const f of a){const c=u(f,++l,a),h=s.get(c);h?h.push(f):s.set(c,[f])}for(const[f,c]of s)s.set(f,i(c,o));return t(s)}(e,0)}function U3(e,t){return Array.from(t,n=>e[n])}function fa(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const s=Wo(o[i],o[a]);if(s)return s}})):(n=e.map(n),r.sort((i,a)=>Wo(n[i],n[a]))),U3(e,r)}return e.sort(R1(n))}function R1(e=xt){if(e===xt)return Wo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Wo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function $f(e,t,n){return(t.length!==2?fa(Jr(e,t,n),([r,i],[a,o])=>xt(i,o)||xt(r,a)):fa(Bs(e,n),([r,i],[a,o])=>t(i,o)||xt(r,a))).map(([r])=>r)}const z3=Math.sqrt(50),H3=Math.sqrt(10),W3=Math.sqrt(2);function Vo(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=z3?10:a>=H3?5:a>=W3?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/o,s=Math.round(e*l),u=Math.round(t*l),s/l<e&&++s,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,s=Math.round(e/l),u=Math.round(t/l),s*l<e&&++s,u*l>t&&--u),u<s&&.5<=n&&n<2?Vo(e,t,n*2):[s,u,l]}function ca(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Vo(t,e,n):Vo(e,t,n);if(!(a>=i))return[];const s=a-i+1,u=new Array(s);if(r)if(o<0)for(let l=0;l<s;++l)u[l]=(a-l)/-o;else for(let l=0;l<s;++l)u[l]=(a-l)*o;else if(o<0)for(let l=0;l<s;++l)u[l]=(i+l)/-o;else for(let l=0;l<s;++l)u[l]=(i+l)*o;return u}function Yo(e,t,n){return t=+t,e=+e,n=+n,Vo(e,t,n)[2]}function Ml(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Yo(t,e,n):Yo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function V3(e){return Math.max(1,Math.ceil(Math.log(Cf(e))/Math.LN2)+1)}function Ut(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Y3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Ln(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function j3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function B1(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Wo:R1(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,f=Math.log(u),c=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*c*(u-c)/u)*(l-u/2<0?-1:1),d=Math.max(n,Math.floor(t-l*c/u+h)),m=Math.min(r,Math.floor(t+(u-l)*c/u+h));B1(e,t,d,m,i)}const a=e[t];let o=n,s=r;for(Di(e,n,t),i(e[r],a)>0&&Di(e,n,r);o<s;){for(Di(e,o,s),++o,--s;i(e[o],a)<0;)++o;for(;i(e[s],a)>0;)--s}i(e[n],a)===0?Di(e,n,s):(++s,Di(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Di(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function O1(e,t=xt){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?xt(o,i)>0:xt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function oi(e,t,n){if(e=Float64Array.from(N3(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Ln(e);if(t>=1)return Ut(e);var r,i=(r-1)*t,a=Math.floor(i),o=Ut(B1(e,a).subarray(0,a+1)),s=Ln(e.subarray(a+1));return o+(s-o)*(i-a)}}function X3(e,t,n=N1){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function Z3(e,t,n){const r=Cf(e),i=oi(e,.75)-oi(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function q1(e,t,n){const r=Cf(e),i=Fs(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function qs(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function xl(e,t){return oi(e,.5,t)}function*K3(e){for(const t of e)yield*t}function G1(e){return Array.from(K3(e))}function Q3(e,t){const n=new Sr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function J3(e,t=ew){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function ew(e,t){return[e,t]}function Pl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Zn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function jo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function tw(e){return e}var Tu=1,$u=2,Sl=3,oo=4,th=1e-6;function nw(e){return"translate("+e+",0)"}function rw(e){return"translate(0,"+e+")"}function iw(e){return t=>+e(t)}function aw(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function ow(){return!this.__axis}function sw(e,t){var n=[],r=null,i=null,a=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===Tu||e===oo?-1:1,f=e===oo||e===$u?"x":"y",c=e===Tu||e===Sl?nw:rw;function h(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):tw),g=Math.max(a,0)+s,y=t.range(),b=+y[0]+u,v=+y[y.length-1]+u,w=(t.bandwidth?aw:iw)(t.copy(),u),M=d.selection?d.selection():d,_=M.selectAll(".domain").data([null]),P=M.selectAll(".tick").data(m,t).order(),T=P.exit(),D=P.enter().append("g").attr("class","tick"),I=P.select("line"),E=P.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(D),I=I.merge(D.append("line").attr("stroke","currentColor").attr(f+"2",l*a)),E=E.merge(D.append("text").attr("fill","currentColor").attr(f,l*g).attr("dy",e===Tu?"0em":e===Sl?"0.71em":"0.32em")),d!==M&&(_=_.transition(d),P=P.transition(d),I=I.transition(d),E=E.transition(d),T=T.transition(d).attr("opacity",th).attr("transform",function(F){return isFinite(F=w(F))?c(F+u):this.getAttribute("transform")}),D.attr("opacity",th).attr("transform",function(F){var G=this.parentNode.__axis;return c((G&&isFinite(G=G(F))?G:w(F))+u)})),T.remove(),_.attr("d",e===oo||e===$u?o?"M"+l*o+","+b+"H"+u+"V"+v+"H"+l*o:"M"+u+","+b+"V"+v:o?"M"+b+","+l*o+"V"+u+"H"+v+"V"+l*o:"M"+b+","+u+"H"+v),P.attr("opacity",1).attr("transform",function(F){return c(w(F)+u)}),I.attr(f+"2",l*a),E.attr(f,l*g).text(p),M.filter(ow).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===$u?"start":e===oo?"end":"middle"),M.each(function(){this.__axis=w})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(u=+d,h):u},h}function uw(e){return sw(Sl,e)}var lw={value:()=>{}};function U1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Do(n)}function Do(e){this._=e}function fw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Do.prototype=U1.prototype={constructor:Do,on:function(e,t){var n=this._,r=fw(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=cw(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=nh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=nh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Do(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function cw(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function nh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=lw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Al="http://www.w3.org/1999/xhtml";const si={svg:"http://www.w3.org/2000/svg",xhtml:Al,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),si.hasOwnProperty(t)?{space:si[t],local:e}:e}function hw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Al&&t.documentElement.namespaceURI===Al?t.createElement(e):t.createElementNS(n,e)}}function dw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Us(e){var t=Gs(e);return(t.local?dw:hw)(t)}function mw(){}function Df(e){return e==null?mw:function(){return this.querySelector(e)}}function pw(e){typeof e!="function"&&(e=Df(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),u,l,f=0;f<o;++f)(u=a[f])&&(l=e.call(u,u.__data__,f,a))&&("__data__"in u&&(l.__data__=u.__data__),s[f]=l);return new Ct(r,this._parents)}function bw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function gw(){return[]}function z1(e){return e==null?gw:function(){return this.querySelectorAll(e)}}function yw(e){return function(){return bw(e.apply(this,arguments))}}function ww(e){typeof e=="function"?e=yw(e):e=z1(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ct(r,i)}function H1(e){return function(){return this.matches(e)}}function W1(e){return function(t){return t.matches(e)}}var _w=Array.prototype.find;function vw(e){return function(){return _w.call(this.children,e)}}function Mw(){return this.firstElementChild}function xw(e){return this.select(e==null?Mw:vw(typeof e=="function"?e:W1(e)))}var Pw=Array.prototype.filter;function Sw(){return Array.from(this.children)}function Aw(e){return function(){return Pw.call(this.children,e)}}function Ew(e){return this.selectAll(e==null?Sw:Aw(typeof e=="function"?e:W1(e)))}function kw(e){typeof e!="function"&&(e=H1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new Ct(r,this._parents)}function V1(e){return new Array(e.length)}function Cw(){return new Ct(this._enter||this._groups.map(V1),this._parents)}function Xo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Xo.prototype={constructor:Xo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Tw(e){return function(){return e}}function $w(e,t,n,r,i,a){for(var o=0,s,u=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new Xo(e,a[o]);for(;o<u;++o)(s=t[o])&&(i[o]=s)}function Dw(e,t,n,r,i,a,o){var s,u,l=new Map,f=t.length,c=a.length,h=new Array(f),d;for(s=0;s<f;++s)(u=t[s])&&(h[s]=d=o.call(u,u.__data__,s,t)+"",l.has(d)?i[s]=u:l.set(d,u));for(s=0;s<c;++s)d=o.call(e,a[s],s,a)+"",(u=l.get(d))?(r[s]=u,u.__data__=a[s],l.delete(d)):n[s]=new Xo(e,a[s]);for(s=0;s<f;++s)(u=t[s])&&l.get(h[s])===u&&(i[s]=u)}function Nw(e){return e.__data__}function Lw(e,t){if(!arguments.length)return Array.from(this,Nw);var n=t?Dw:$w,r=this._parents,i=this._groups;typeof e!="function"&&(e=Tw(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var f=r[l],c=i[l],h=c.length,d=Iw(e.call(f,f&&f.__data__,l,r)),m=d.length,p=s[l]=new Array(m),g=o[l]=new Array(m),y=u[l]=new Array(h);n(f,c,p,g,y,d,t);for(var b=0,v=0,w,M;b<m;++b)if(w=p[b]){for(b>=v&&(v=b+1);!(M=g[v])&&++v<m;);w._next=M||null}}return o=new Ct(o,r),o._enter=s,o._exit=u,o}function Iw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fw(){return new Ct(this._exit||this._groups.map(V1),this._parents)}function Rw(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Bw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var l=n[u],f=r[u],c=l.length,h=s[u]=new Array(c),d,m=0;m<c;++m)(d=l[m]||f[m])&&(h[m]=d);for(;u<i;++u)s[u]=n[u];return new Ct(s,this._parents)}function Ow(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function qw(e){e||(e=Gw);function t(c,h){return c&&h?e(c.__data__,h.__data__):!c-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),l,f=0;f<s;++f)(l=o[f])&&(u[f]=l);u.sort(t)}return new Ct(i,this._parents).order()}function Gw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Uw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zw(){return Array.from(this)}function Hw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Ww(){let e=0;for(const t of this)++e;return e}function Vw(){return!this.node()}function Yw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function jw(e){return function(){this.removeAttribute(e)}}function Xw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zw(e,t){return function(){this.setAttribute(e,t)}}function Kw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Qw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function e_(e,t){var n=Gs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Xw:jw:typeof t=="function"?n.local?Jw:Qw:n.local?Kw:Zw)(n,t))}function Y1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function t_(e){return function(){this.style.removeProperty(e)}}function n_(e,t,n){return function(){this.style.setProperty(e,t,n)}}function r_(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function i_(e,t,n){return arguments.length>1?this.each((t==null?t_:typeof t=="function"?r_:n_)(e,t,n??"")):ui(this.node(),e)}function ui(e,t){return e.style.getPropertyValue(t)||Y1(e).getComputedStyle(e,null).getPropertyValue(t)}function a_(e){return function(){delete this[e]}}function o_(e,t){return function(){this[e]=t}}function s_(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function u_(e,t){return arguments.length>1?this.each((t==null?a_:typeof t=="function"?s_:o_)(e,t)):this.node()[e]}function j1(e){return e.trim().split(/^|\s+/)}function Nf(e){return e.classList||new X1(e)}function X1(e){this._node=e,this._names=j1(e.getAttribute("class")||"")}X1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Z1(e,t){for(var n=Nf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function K1(e,t){for(var n=Nf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function l_(e){return function(){Z1(this,e)}}function f_(e){return function(){K1(this,e)}}function c_(e,t){return function(){(t.apply(this,arguments)?Z1:K1)(this,e)}}function h_(e,t){var n=j1(e+"");if(arguments.length<2){for(var r=Nf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?c_:t?l_:f_)(n,t))}function d_(){this.textContent=""}function m_(e){return function(){this.textContent=e}}function p_(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function b_(e){return arguments.length?this.each(e==null?d_:(typeof e=="function"?p_:m_)(e)):this.node().textContent}function g_(){this.innerHTML=""}function y_(e){return function(){this.innerHTML=e}}function w_(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function __(e){return arguments.length?this.each(e==null?g_:(typeof e=="function"?w_:y_)(e)):this.node().innerHTML}function v_(){this.nextSibling&&this.parentNode.appendChild(this)}function M_(){return this.each(v_)}function x_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function P_(){return this.each(x_)}function S_(e){var t=typeof e=="function"?e:Us(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function A_(){return null}function E_(e,t){var n=typeof e=="function"?e:Us(e),r=t==null?A_:typeof t=="function"?t:Df(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function k_(){var e=this.parentNode;e&&e.removeChild(this)}function C_(){return this.each(k_)}function T_(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $_(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function D_(e){return this.select(e?$_:T_)}function N_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function L_(e){return function(t){e.call(this,t,this.__data__)}}function I_(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function F_(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function R_(e,t,n){return function(){var r=this.__on,i,a=L_(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function B_(e,t,n){var r=I_(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,f;u<l;++u)for(i=0,f=s[u];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=t?R_:F_,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Q1(e,t,n){var r=Y1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function O_(e,t){return function(){return Q1(this,e,t)}}function q_(e,t){return function(){return Q1(this,e,t.apply(this,arguments))}}function G_(e,t){return this.each((typeof t=="function"?q_:O_)(e,t))}function*U_(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var J1=[null];function Ct(e,t){this._groups=e,this._parents=t}function Da(){return new Ct([[document.documentElement]],J1)}function z_(){return this}Ct.prototype=Da.prototype={constructor:Ct,select:pw,selectAll:ww,selectChild:xw,selectChildren:Ew,filter:kw,data:Lw,enter:Cw,exit:Fw,join:Rw,merge:Bw,selection:z_,order:Ow,sort:qw,call:Uw,nodes:zw,node:Hw,size:Ww,empty:Vw,each:Yw,attr:e_,style:i_,property:u_,classed:h_,text:b_,html:__,raise:M_,lower:P_,append:S_,insert:E_,remove:C_,clone:D_,datum:N_,on:B_,dispatch:G_,[Symbol.iterator]:U_};function ra(e){return typeof e=="string"?new Ct([[document.querySelector(e)]],[document.documentElement]):new Ct([[e]],J1)}function H_(e){let t;for(;t=e.sourceEvent;)e=t;return e}function W_(e,t){if(e=H_(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ai(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Na(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nr(){}var Ar=.7,li=1/Ar,ei="\\s*([+-]?\\d+)\\s*",ha="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",V_=/^#([0-9a-f]{3,8})$/,Y_=new RegExp(`^rgb\\(${ei},${ei},${ei}\\)$`),j_=new RegExp(`^rgb\\(${mn},${mn},${mn}\\)$`),X_=new RegExp(`^rgba\\(${ei},${ei},${ei},${ha}\\)$`),Z_=new RegExp(`^rgba\\(${mn},${mn},${mn},${ha}\\)$`),K_=new RegExp(`^hsl\\(${ha},${mn},${mn}\\)$`),Q_=new RegExp(`^hsla\\(${ha},${mn},${mn},${ha}\\)$`),rh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ai(nr,Er,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ih,formatHex:ih,formatHex8:J_,formatHsl:ev,formatRgb:ah,toString:ah});function ih(){return this.rgb().formatHex()}function J_(){return this.rgb().formatHex8()}function ev(){return em(this).formatHsl()}function ah(){return this.rgb().formatRgb()}function Er(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=V_.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?oh(t):n===3?new nt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?so(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?so(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Y_.exec(e))?new nt(t[1],t[2],t[3],1):(t=j_.exec(e))?new nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=X_.exec(e))?so(t[1],t[2],t[3],t[4]):(t=Z_.exec(e))?so(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=K_.exec(e))?lh(t[1],t[2]/100,t[3]/100,1):(t=Q_.exec(e))?lh(t[1],t[2]/100,t[3]/100,t[4]):rh.hasOwnProperty(e)?oh(rh[e]):e==="transparent"?new nt(NaN,NaN,NaN,0):null}function oh(e){return new nt(e>>16&255,e>>8&255,e&255,1)}function so(e,t,n,r){return r<=0&&(e=t=n=NaN),new nt(e,t,n,r)}function Lf(e){return e instanceof nr||(e=Er(e)),e?(e=e.rgb(),new nt(e.r,e.g,e.b,e.opacity)):new nt}function Kn(e,t,n,r){return arguments.length===1?Lf(e):new nt(e,t,n,r??1)}function nt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ai(nt,Kn,Na(nr,{brighter(e){return e=e==null?li:Math.pow(li,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ar:Math.pow(Ar,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nt(yr(this.r),yr(this.g),yr(this.b),Zo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sh,formatHex:sh,formatHex8:tv,formatRgb:uh,toString:uh}));function sh(){return`#${br(this.r)}${br(this.g)}${br(this.b)}`}function tv(){return`#${br(this.r)}${br(this.g)}${br(this.b)}${br((isNaN(this.opacity)?1:this.opacity)*255)}`}function uh(){const e=Zo(this.opacity);return`${e===1?"rgb(":"rgba("}${yr(this.r)}, ${yr(this.g)}, ${yr(this.b)}${e===1?")":`, ${e})`}`}function Zo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function br(e){return e=yr(e),(e<16?"0":"")+e.toString(16)}function lh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Zt(e,t,n,r)}function em(e){if(e instanceof Zt)return new Zt(e.h,e.s,e.l,e.opacity);if(e instanceof nr||(e=Er(e)),!e)return new Zt;if(e instanceof Zt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new Zt(o,s,u,e.opacity)}function El(e,t,n,r){return arguments.length===1?em(e):new Zt(e,t,n,r??1)}function Zt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ai(Zt,El,Na(nr,{brighter(e){return e=e==null?li:Math.pow(li,e),new Zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ar:Math.pow(Ar,e),new Zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new nt(Du(e>=240?e-240:e+120,i,r),Du(e,i,r),Du(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Zt(fh(this.h),uo(this.s),uo(this.l),Zo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zo(this.opacity);return`${e===1?"hsl(":"hsla("}${fh(this.h)}, ${uo(this.s)*100}%, ${uo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fh(e){return e=(e||0)%360,e<0?e+360:e}function uo(e){return Math.max(0,Math.min(1,e||0))}function Du(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const tm=Math.PI/180,nm=180/Math.PI,Ko=18,rm=.96422,im=1,am=.82521,om=4/29,ti=6/29,sm=3*ti*ti,nv=ti*ti*ti;function um(e){if(e instanceof pn)return new pn(e.l,e.a,e.b,e.opacity);if(e instanceof $n)return lm(e);e instanceof nt||(e=Lf(e));var t=Fu(e.r),n=Fu(e.g),r=Fu(e.b),i=Nu((.2225045*t+.7168786*n+.0606169*r)/im),a,o;return t===n&&n===r?a=o=i:(a=Nu((.4360747*t+.3850649*n+.1430804*r)/rm),o=Nu((.0139322*t+.0971045*n+.7141733*r)/am)),new pn(116*i-16,500*(a-i),200*(i-o),e.opacity)}function kl(e,t,n,r){return arguments.length===1?um(e):new pn(e,t,n,r??1)}function pn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ai(pn,kl,Na(nr,{brighter(e){return new pn(this.l+Ko*(e??1),this.a,this.b,this.opacity)},darker(e){return new pn(this.l-Ko*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=rm*Lu(t),e=im*Lu(e),n=am*Lu(n),new nt(Iu(3.1338561*t-1.6168667*e-.4906146*n),Iu(-.9787684*t+1.9161415*e+.033454*n),Iu(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Nu(e){return e>nv?Math.pow(e,1/3):e/sm+om}function Lu(e){return e>ti?e*e*e:sm*(e-om)}function Iu(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Fu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function rv(e){if(e instanceof $n)return new $n(e.h,e.c,e.l,e.opacity);if(e instanceof pn||(e=um(e)),e.a===0&&e.b===0)return new $n(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*nm;return new $n(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Cl(e,t,n,r){return arguments.length===1?rv(e):new $n(e,t,n,r??1)}function $n(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function lm(e){if(isNaN(e.h))return new pn(e.l,0,0,e.opacity);var t=e.h*tm;return new pn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ai($n,Cl,Na(nr,{brighter(e){return new $n(this.h,this.c,this.l+Ko*(e??1),this.opacity)},darker(e){return new $n(this.h,this.c,this.l-Ko*(e??1),this.opacity)},rgb(){return lm(this).rgb()}}));var fm=-.14861,If=1.78277,Ff=-.29227,zs=-.90649,da=1.97294,ch=da*zs,hh=da*If,dh=If*Ff-zs*fm;function iv(e){if(e instanceof wr)return new wr(e.h,e.s,e.l,e.opacity);e instanceof nt||(e=Lf(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(dh*r+ch*t-hh*n)/(dh+ch-hh),a=r-i,o=(da*(n-i)-Ff*a)/zs,s=Math.sqrt(o*o+a*a)/(da*i*(1-i)),u=s?Math.atan2(o,a)*nm-120:NaN;return new wr(u<0?u+360:u,s,i,e.opacity)}function yn(e,t,n,r){return arguments.length===1?iv(e):new wr(e,t,n,r??1)}function wr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ai(wr,yn,Na(nr,{brighter(e){return e=e==null?li:Math.pow(li,e),new wr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ar:Math.pow(Ar,e),new wr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*tm,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new nt(255*(t+n*(fm*r+If*i)),255*(t+n*(Ff*r+zs*i)),255*(t+n*(da*r)),this.opacity)}}));function av(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function ov(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return av((n-r/t)*t,o,i,a,s)}}const Hs=e=>()=>e;function cm(e,t){return function(n){return e+n*t}}function sv(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Rf(e,t){var n=t-e;return n?cm(e,n>180||n<-180?n-360*Math.round(n/360):n):Hs(isNaN(e)?t:e)}function uv(e){return(e=+e)==1?ht:function(t,n){return n-t?sv(t,n,e):Hs(isNaN(t)?n:t)}}function ht(e,t){var n=t-e;return n?cm(e,n):Hs(isNaN(e)?t:e)}const kr=function e(t){var n=uv(t);function r(i,a){var o=n((i=Kn(i)).r,(a=Kn(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),l=ht(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=e,r}(1);function lv(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=Kn(t[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=e(r),i=e(i),a=e(a),s.opacity=1,function(u){return s.r=r(u),s.g=i(u),s.b=a(u),s+""}}}var fv=lv(ov);function cv(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function hv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dv(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=La(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function mv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ct(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function pv(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=La(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Tl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ru=new RegExp(Tl.source,"g");function bv(e){return function(){return e}}function gv(e){return function(t){return e(t)+""}}function hm(e,t){var n=Tl.lastIndex=Ru.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(r=Tl.exec(e))&&(i=Ru.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:ct(r,i)})),n=Ru.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?gv(u[0].x):bv(t):(t=u.length,function(l){for(var f=0,c;f<t;++f)s[(c=u[f]).i]=c.x(l);return s.join("")})}function La(e,t){var n=typeof t,r;return t==null||n==="boolean"?Hs(t):(n==="number"?ct:n==="string"?(r=Er(t))?(t=r,kr):hm:t instanceof Er?kr:t instanceof Date?mv:hv(t)?cv:Array.isArray(t)?dv:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pv:ct)(e,t)}function Bf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var mh=180/Math.PI,$l={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dm(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*mh,skewX:Math.atan(u)*mh,scaleX:o,scaleY:s}}var lo;function yv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?$l:dm(t.a,t.b,t.c,t.d,t.e,t.f)}function wv(e){return e==null||(lo||(lo=document.createElementNS("http://www.w3.org/2000/svg","g")),lo.setAttribute("transform",e),!(e=lo.transform.baseVal.consolidate()))?$l:(e=e.matrix,dm(e.a,e.b,e.c,e.d,e.e,e.f))}function mm(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,f,c,h,d,m){if(l!==c||f!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:ct(l,c)},{i:p-2,x:ct(f,h)})}else(c||h)&&d.push("translate("+c+t+h+n)}function o(l,f,c,h){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:ct(l,f)})):f&&c.push(i(c)+"rotate("+f+r)}function s(l,f,c,h){l!==f?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:ct(l,f)}):f&&c.push(i(c)+"skewX("+f+r)}function u(l,f,c,h,d,m){if(l!==c||f!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:ct(l,c)},{i:p-2,x:ct(f,h)})}else(c!==1||h!==1)&&d.push(i(d)+"scale("+c+","+h+")")}return function(l,f){var c=[],h=[];return l=e(l),f=e(f),a(l.translateX,l.translateY,f.translateX,f.translateY,c,h),o(l.rotate,f.rotate,c,h),s(l.skewX,f.skewX,c,h),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,c,h),l=f=null,function(d){for(var m=-1,p=h.length,g;++m<p;)c[(g=h[m]).i]=g.x(d);return c.join("")}}}var _v=mm(yv,"px, ","px)","deg)"),vv=mm(wv,", ",")",")");function Mv(e){return function(t,n){var r=e((t=El(t)).h,(n=El(n)).h),i=ht(t.s,n.s),a=ht(t.l,n.l),o=ht(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const xv=Mv(Rf);function Pv(e,t){var n=ht((e=kl(e)).l,(t=kl(t)).l),r=ht(e.a,t.a),i=ht(e.b,t.b),a=ht(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function Sv(e){return function(t,n){var r=e((t=Cl(t)).h,(n=Cl(n)).h),i=ht(t.c,n.c),a=ht(t.l,n.l),o=ht(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=a(s),t.opacity=o(s),t+""}}}const Av=Sv(Rf);function pm(e){return function t(n){n=+n;function r(i,a){var o=e((i=yn(i)).h,(a=yn(a)).h),s=ht(i.s,a.s),u=ht(i.l,a.l),l=ht(i.opacity,a.opacity);return function(f){return i.h=o(f),i.s=s(f),i.l=u(Math.pow(f,n)),i.opacity=l(f),i+""}}return r.gamma=t,r}(1)}pm(Rf);var Of=pm(ht);function Ws(e,t){t===void 0&&(t=e,e=La);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function Qt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var fi=0,Hi=0,Ni=0,bm=1e3,Qo,Wi,Jo=0,Cr=0,Vs=0,ma=typeof performance=="object"&&performance.now?performance:Date,gm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qf(){return Cr||(gm(Ev),Cr=ma.now()+Vs)}function Ev(){Cr=0}function es(){this._call=this._time=this._next=null}es.prototype=ym.prototype={constructor:es,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?qf():+n)+(t==null?0:+t),!this._next&&Wi!==this&&(Wi?Wi._next=this:Qo=this,Wi=this),this._call=e,this._time=n,Dl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dl())}};function ym(e,t,n){var r=new es;return r.restart(e,t,n),r}function kv(){qf(),++fi;for(var e=Qo,t;e;)(t=Cr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fi}function ph(){Cr=(Jo=ma.now())+Vs,fi=Hi=0;try{kv()}finally{fi=0,Tv(),Cr=0}}function Cv(){var e=ma.now(),t=e-Jo;t>bm&&(Vs-=t,Jo=e)}function Tv(){for(var e,t=Qo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Qo=n);Wi=e,Dl(r)}function Dl(e){if(!fi){Hi&&(Hi=clearTimeout(Hi));var t=e-Cr;t>24?(e<1/0&&(Hi=setTimeout(ph,e-ma.now()-Vs)),Ni&&(Ni=clearInterval(Ni))):(Ni||(Jo=ma.now(),Ni=setInterval(Cv,bm)),fi=1,gm(ph))}}function bh(e,t,n){var r=new es;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var $v=U1("start","end","cancel","interrupt"),Dv=[],wm=0,gh=1,Nl=2,No=3,yh=4,Ll=5,Lo=6;function Ys(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Nv(e,n,{name:t,index:r,group:i,on:$v,tween:Dv,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:wm})}function Gf(e,t){var n=an(e,t);if(n.state>wm)throw new Error("too late; already scheduled");return n}function _n(e,t){var n=an(e,t);if(n.state>No)throw new Error("too late; already running");return n}function an(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Nv(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ym(a,0,n.time);function a(l){n.state=gh,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var f,c,h,d;if(n.state!==gh)return u();for(f in r)if(d=r[f],d.name===n.name){if(d.state===No)return bh(o);d.state===yh?(d.state=Lo,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[f]):+f<t&&(d.state=Lo,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[f])}if(bh(function(){n.state===No&&(n.state=yh,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Nl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Nl){for(n.state=No,i=new Array(h=n.tween.length),f=0,c=-1;f<h;++f)(d=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=d);i.length=c+1}}function s(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Ll,1),c=-1,h=i.length;++c<h;)i[c].call(e,f);n.state===Ll&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Lo,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Lv(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Nl&&r.state<Ll,r.state=Lo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function Iv(e){return this.each(function(){Lv(this,e)})}function Fv(e,t){var n,r;return function(){var i=_n(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Rv(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=_n(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function Bv(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=an(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Fv:Rv)(n,e,t))}function Uf(e,t,n){var r=e._id;return e.each(function(){var i=_n(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return an(i,r).value[t]}}function _m(e,t){var n;return(typeof t=="number"?ct:t instanceof Er?kr:(n=Er(t))?(t=n,kr):hm)(e,t)}function Ov(e){return function(){this.removeAttribute(e)}}function qv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gv(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function Uv(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function zv(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function Hv(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function Wv(e,t){var n=Gs(e),r=n==="transform"?vv:_m;return this.attrTween(e,typeof t=="function"?(n.local?Hv:zv)(n,r,Uf(this,"attr."+e,t)):t==null?(n.local?qv:Ov)(n):(n.local?Uv:Gv)(n,r,t))}function Vv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Yv(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function jv(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Yv(e,a)),n}return i._value=t,i}function Xv(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Vv(e,a)),n}return i._value=t,i}function Zv(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Gs(e);return this.tween(n,(r.local?jv:Xv)(r,t))}function Kv(e,t){return function(){Gf(this,e).delay=+t.apply(this,arguments)}}function Qv(e,t){return t=+t,function(){Gf(this,e).delay=t}}function Jv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Kv:Qv)(t,e)):an(this.node(),t).delay}function e5(e,t){return function(){_n(this,e).duration=+t.apply(this,arguments)}}function t5(e,t){return t=+t,function(){_n(this,e).duration=t}}function n5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?e5:t5)(t,e)):an(this.node(),t).duration}function r5(e,t){if(typeof t!="function")throw new Error;return function(){_n(this,e).ease=t}}function i5(e){var t=this._id;return arguments.length?this.each(r5(t,e)):an(this.node(),t).ease}function a5(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_n(this,e).ease=n}}function o5(e){if(typeof e!="function")throw new Error;return this.each(a5(this._id,e))}function s5(e){typeof e!="function"&&(e=H1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new In(r,this._parents,this._name,this._id)}function u5(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],l=n[s],f=u.length,c=o[s]=new Array(f),h,d=0;d<f;++d)(h=u[d]||l[d])&&(c[d]=h);for(;s<r;++s)o[s]=t[s];return new In(o,this._parents,this._name,this._id)}function l5(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function f5(e,t,n){var r,i,a=l5(t)?Gf:_n;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function c5(e,t){var n=this._id;return arguments.length<2?an(this.node(),n).on.on(e):this.each(f5(n,e,t))}function h5(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function d5(){return this.on("end.remove",h5(this._id))}function m5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Df(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,l=a[o]=new Array(u),f,c,h=0;h<u;++h)(f=s[h])&&(c=e.call(f,f.__data__,h,s))&&("__data__"in f&&(c.__data__=f.__data__),l[h]=c,Ys(l[h],t,n,h,l,an(f,n)));return new In(a,this._parents,t,n)}function p5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=z1(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],l=u.length,f,c=0;c<l;++c)if(f=u[c]){for(var h=e.call(f,f.__data__,c,u),d,m=an(f,n),p=0,g=h.length;p<g;++p)(d=h[p])&&Ys(d,t,n,p,h,m);a.push(h),o.push(f)}return new In(a,o,t,n)}var b5=Da.prototype.constructor;function g5(){return new b5(this._groups,this._parents)}function y5(e,t){var n,r,i;return function(){var a=ui(this,e),o=(this.style.removeProperty(e),ui(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function vm(e){return function(){this.style.removeProperty(e)}}function w5(e,t,n){var r,i=n+"",a;return function(){var o=ui(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function _5(e,t,n){var r,i,a;return function(){var o=ui(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),ui(this,e))),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}function v5(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var u=_n(this,e),l=u.on,f=u.value[a]==null?s||(s=vm(t)):void 0;(l!==n||i!==f)&&(r=(n=l).copy()).on(o,i=f),u.on=r}}function M5(e,t,n){var r=(e+="")=="transform"?_v:_m;return t==null?this.styleTween(e,y5(e,r)).on("end.style."+e,vm(e)):typeof t=="function"?this.styleTween(e,_5(e,r,Uf(this,"style."+e,t))).each(v5(this._id,e)):this.styleTween(e,w5(e,r,t),n).on("end.style."+e,null)}function x5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function P5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&x5(e,o,n)),r}return a._value=t,a}function S5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,P5(e,t,n??""))}function A5(e){return function(){this.textContent=e}}function E5(e){return function(){var t=e(this);this.textContent=t??""}}function k5(e){return this.tween("text",typeof e=="function"?E5(Uf(this,"text",e)):A5(e==null?"":e+""))}function C5(e){return function(t){this.textContent=e.call(this,t)}}function T5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&C5(i)),t}return r._value=e,r}function $5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,T5(e))}function D5(){for(var e=this._name,t=this._id,n=Mm(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var f=an(u,t);Ys(u,e,n,l,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new In(r,this._parents,e,n)}function N5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var l=_n(this,r),f=l.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),i===0&&a()})}var L5=0;function In(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Mm(){return++L5}var xn=Da.prototype;In.prototype={constructor:In,select:m5,selectAll:p5,selectChild:xn.selectChild,selectChildren:xn.selectChildren,filter:s5,merge:u5,selection:g5,transition:D5,call:xn.call,nodes:xn.nodes,node:xn.node,size:xn.size,empty:xn.empty,each:xn.each,on:c5,attr:Wv,attrTween:Zv,style:M5,styleTween:S5,text:k5,textTween:$5,remove:d5,tween:Bv,delay:Jv,duration:n5,ease:i5,easeVarying:o5,end:N5,[Symbol.iterator]:xn[Symbol.iterator]};function I5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var F5={time:null,delay:0,duration:250,ease:I5};function R5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function B5(e){var t,n;e instanceof In?(t=e._id,e=e._name):(t=Mm(),(n=F5).time=qf(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&Ys(u,e,t,l,o,n||R5(u,t));return new In(r,this._parents,e,t)}Da.prototype.interrupt=Iv;Da.prototype.transition=B5;const Il=Math.PI,Fl=2*Il,cr=1e-6,O5=Fl-cr;function xm(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function q5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xm;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Pm{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xm:q5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,u=r-t,l=i-n,f=o-t,c=s-n,h=f*f+c*c;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>cr)if(!(Math.abs(c*u-l*f)>cr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-s,p=u*u+l*l,g=d*d+m*m,y=Math.sqrt(p),b=Math.sqrt(h),v=a*Math.tan((Il-Math.acos((p+h-g)/(2*y*b)))/2),w=v/b,M=v/y;Math.abs(w-1)>cr&&this._append`L${t+w*f},${n+w*c}`,this._append`A${a},${a},0,0,${+(c*d>f*m)},${this._x1=t+M*u},${this._y1=n+M*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=t+s,f=n+u,c=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>cr||Math.abs(this._y1-f)>cr)&&this._append`L${l},${f}`,r&&(h<0&&(h=h%Fl+Fl),h>O5?this._append`A${r},${r},0,1,${c},${t-s},${n-u}A${r},${r},0,1,${c},${this._x1=l},${this._y1=f}`:h>cr&&this._append`A${r},${r},0,${+(h>=Il)},${c},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Vn(e=3){return new Pm(+e)}var wh={},Bu={},Ou=34,Li=10,qu=13;function Sm(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function G5(e,t){var n=Sm(e);return function(r,i){return t(n(r),i,e)}}function _h(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function _t(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function U5(e){return e<0?"-"+_t(-e,6):e>9999?"+"+_t(e,6):_t(e,4)}function z5(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":U5(e.getUTCFullYear())+"-"+_t(e.getUTCMonth()+1,2)+"-"+_t(e.getUTCDate(),2)+(i?"T"+_t(t,2)+":"+_t(n,2)+":"+_t(r,2)+"."+_t(i,3)+"Z":r?"T"+_t(t,2)+":"+_t(n,2)+":"+_t(r,2)+"Z":n||t?"T"+_t(t,2)+":"+_t(n,2)+"Z":"")}function H5(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(c,h){var d,m,p=i(c,function(g,y){if(d)return d(g,y-1);m=g,d=h?G5(g,h):Sm(g)});return p.columns=m||[],p}function i(c,h){var d=[],m=c.length,p=0,g=0,y,b=m<=0,v=!1;c.charCodeAt(m-1)===Li&&--m,c.charCodeAt(m-1)===qu&&--m;function w(){if(b)return Bu;if(v)return v=!1,wh;var _,P=p,T;if(c.charCodeAt(P)===Ou){for(;p++<m&&c.charCodeAt(p)!==Ou||c.charCodeAt(++p)===Ou;);return(_=p)>=m?b=!0:(T=c.charCodeAt(p++))===Li?v=!0:T===qu&&(v=!0,c.charCodeAt(p)===Li&&++p),c.slice(P+1,_-1).replace(/""/g,'"')}for(;p<m;){if((T=c.charCodeAt(_=p++))===Li)v=!0;else if(T===qu)v=!0,c.charCodeAt(p)===Li&&++p;else if(T!==n)continue;return c.slice(P,_)}return b=!0,c.slice(P,m)}for(;(y=w())!==Bu;){for(var M=[];y!==wh&&y!==Bu;)M.push(y),y=w();h&&(M=h(M,g++))==null||d.push(M)}return d}function a(c,h){return c.map(function(d){return h.map(function(m){return f(d[m])}).join(e)})}function o(c,h){return h==null&&(h=_h(c)),[h.map(f).join(e)].concat(a(c,h)).join(`
`)}function s(c,h){return h==null&&(h=_h(c)),a(c,h).join(`
`)}function u(c){return c.map(l).join(`
`)}function l(c){return c.map(f).join(e)}function f(c){return c==null?"":c instanceof Date?z5(c):t.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:u,formatRow:l,formatValue:f}}var W5=H5(","),V5=W5.parse;function Y5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ts(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ci(e){return e=ts(Math.abs(e)),e?e[1]:NaN}function j5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function X5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Z5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pa(e){if(!(t=Z5.exec(e)))throw new Error("invalid format: "+e);var t;return new zf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}pa.prototype=zf.prototype;function zf(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function K5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Am;function Q5(e,t){var n=ts(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Am=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ts(e,Math.max(0,t+a-1))[0]}function vh(e,t){var n=ts(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Mh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Y5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vh(e*100,t),r:vh,s:Q5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xh(e){return e}var Ph=Array.prototype.map,Sh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function J5(e){var t=e.grouping===void 0||e.thousands===void 0?xh:j5(Ph.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?xh:X5(Ph.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(c){c=pa(c);var h=c.fill,d=c.align,m=c.sign,p=c.symbol,g=c.zero,y=c.width,b=c.comma,v=c.precision,w=c.trim,M=c.type;M==="n"?(b=!0,M="g"):Mh[M]||(v===void 0&&(v=12),w=!0,M="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var _=p==="$"?n:p==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",P=p==="$"?r:/[%p]/.test(M)?o:"",T=Mh[M],D=/[defgprs%]/.test(M);v=v===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function I(E){var F=_,G=P,$,A,O;if(M==="c")G=T(E)+G,E="";else{E=+E;var ae=E<0||1/E<0;if(E=isNaN(E)?u:T(Math.abs(E),v),w&&(E=K5(E)),ae&&+E==0&&m!=="+"&&(ae=!1),F=(ae?m==="("?m:s:m==="-"||m==="("?"":m)+F,G=(M==="s"?Sh[8+Am/3]:"")+G+(ae&&m==="("?")":""),D){for($=-1,A=E.length;++$<A;)if(O=E.charCodeAt($),48>O||O>57){G=(O===46?i+E.slice($+1):E.slice($))+G,E=E.slice(0,$);break}}}b&&!g&&(E=t(E,1/0));var ie=F.length+E.length+G.length,ne=ie<y?new Array(y-ie+1).join(h):"";switch(b&&g&&(E=t(ne+E,ne.length?y-G.length:1/0),ne=""),d){case"<":E=F+E+G+ne;break;case"=":E=F+ne+E+G;break;case"^":E=ne.slice(0,ie=ne.length>>1)+F+E+G+ne.slice(ie);break;default:E=ne+F+E+G;break}return a(E)}return I.toString=function(){return c+""},I}function f(c,h){var d=l((c=pa(c),c.type="f",c)),m=Math.max(-8,Math.min(8,Math.floor(ci(h)/3)))*3,p=Math.pow(10,-m),g=Sh[8+m/3];return function(y){return d(p*y)+g}}return{format:l,formatPrefix:f}}var fo,Ei,Em;e6({thousands:",",grouping:[3],currency:["$",""]});function e6(e){return fo=J5(e),Ei=fo.format,Em=fo.formatPrefix,fo}function t6(e){return Math.max(0,-ci(Math.abs(e)))}function n6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ci(t)/3)))*3-ci(Math.abs(e)))}function r6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ci(t)-ci(e))+1}var ye=1e-6,km=1e-12,Me=Math.PI,Ge=Me/2,Ah=Me/4,Tt=Me*2,pt=180/Me,qe=Me/180,De=Math.abs,ki=Math.atan,Fn=Math.atan2,_e=Math.cos,Cm=Math.exp,ns=Math.log,Gu=Math.pow,ge=Math.sin,Bt=Math.sign||function(e){return e>0?1:e<0?-1:0},Pt=Math.sqrt,Hf=Math.tan;function Tm(e){return e>1?0:e<-1?Me:Math.acos(e)}function zt(e){return e>1?Ge:e<-1?-Ge:Math.asin(e)}function Ot(){}function rs(e,t){e&&kh.hasOwnProperty(e.type)&&kh[e.type](e,t)}var Eh={Feature:function(e,t){rs(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)rs(n[r].geometry,t)}},kh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Rl(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Rl(n[r],t,0)},Polygon:function(e,t){Ch(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ch(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)rs(n[r],t)}};function Rl(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Ch(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Rl(e[n],t,1);t.polygonEnd()}function dr(e,t){e&&Eh.hasOwnProperty(e.type)?Eh[e.type](e,t):rs(e,t)}function Bl(e){return[Fn(e[1],e[0]),zt(e[2])]}function hi(e){var t=e[0],n=e[1],r=_e(n);return[r*_e(t),r*ge(t),ge(n)]}function co(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function is(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Uu(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ho(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ol(e){var t=Pt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function ql(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Gl(e,t){return De(e)>Me&&(e-=Math.round(e/Tt)*Tt),[e,t]}Gl.invert=Gl;function $m(e,t,n){return(e%=Tt)?t||n?ql($h(e),Dh(t,n)):$h(e):t||n?Dh(t,n):Gl}function Th(e){return function(t,n){return t+=e,De(t)>Me&&(t-=Math.round(t/Tt)*Tt),[t,n]}}function $h(e){var t=Th(e);return t.invert=Th(-e),t}function Dh(e,t){var n=_e(e),r=ge(e),i=_e(t),a=ge(t);function o(s,u){var l=_e(u),f=_e(s)*l,c=ge(s)*l,h=ge(u),d=h*n+f*r;return[Fn(c*i-d*a,f*n-h*r),zt(d*i+c*a)]}return o.invert=function(s,u){var l=_e(u),f=_e(s)*l,c=ge(s)*l,h=ge(u),d=h*i-c*a;return[Fn(c*i+h*a,f*n+d*r),zt(d*n-f*r)]},o}function i6(e){e=$m(e[0]*qe,e[1]*qe,e.length>2?e[2]*qe:0);function t(n){return n=e(n[0]*qe,n[1]*qe),n[0]*=pt,n[1]*=pt,n}return t.invert=function(n){return n=e.invert(n[0]*qe,n[1]*qe),n[0]*=pt,n[1]*=pt,n},t}function a6(e,t,n,r,i,a){if(n){var o=_e(t),s=ge(t),u=r*n;i==null?(i=t+r*Tt,a=t-u/2):(i=Nh(o,i),a=Nh(o,a),(r>0?i<a:i>a)&&(i+=r*Tt));for(var l,f=i;r>0?f>a:f<a;f-=u)l=Bl([o,-s*_e(f),-s*ge(f)]),e.point(l[0],l[1])}}function Nh(e,t){t=hi(t),t[0]-=e,Ol(t);var n=Tm(-t[1]);return((-t[2]<0?-n:n)+Tt-ye)%Tt}function Dm(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ot,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Io(e,t){return De(e[0]-t[0])<ye&&De(e[1]-t[1])<ye}function mo(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Nm(e,t,n,r,i){var a=[],o=[],s,u;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,g=m[0],y=m[p],b;if(Io(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),s=0;s<p;++s)i.point((g=m[s])[0],g[1]);i.lineEnd();return}y[0]+=2*ye}a.push(b=new mo(g,m,null,!0)),o.push(b.o=new mo(g,null,b,!1)),a.push(b=new mo(y,m,null,!1)),o.push(b.o=new mo(y,null,b,!0))}}),!!a.length){for(o.sort(t),Lh(a),Lh(o),s=0,u=o.length;s<u;++s)o[s].e=n=!n;for(var l=a[0],f,c;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;f=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(s=0,u=f.length;s<u;++s)i.point((c=f[s])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(f=h.p.z,s=f.length-1;s>=0;--s)i.point((c=f[s])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,f=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Lh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function zu(e){return De(e[0])<=Me?e[0]:Bt(e[0])*((De(e[0])+Me)%Tt-Me)}function o6(e,t){var n=zu(t),r=t[1],i=ge(r),a=[ge(n),-_e(n),0],o=0,s=0,u=new Pr;i===1?r=Ge+ye:i===-1&&(r=-Ge-ye);for(var l=0,f=e.length;l<f;++l)if(h=(c=e[l]).length)for(var c,h,d=c[h-1],m=zu(d),p=d[1]/2+Ah,g=ge(p),y=_e(p),b=0;b<h;++b,m=w,g=_,y=P,d=v){var v=c[b],w=zu(v),M=v[1]/2+Ah,_=ge(M),P=_e(M),T=w-m,D=T>=0?1:-1,I=D*T,E=I>Me,F=g*_;if(u.add(Fn(F*D*ge(I),y*P+F*_e(I))),o+=E?T+D*Tt:T,E^m>=n^w>=n){var G=is(hi(d),hi(v));Ol(G);var $=is(a,G);Ol($);var A=(E^T>=0?-1:1)*zt($[2]);(r>A||r===A&&(G[0]||G[1]))&&(s+=E^T>=0?1:-1)}}return(o<-ye||o<ye&&u<-km)^s&1}function Lm(e,t,n,r){return function(i){var a=t(i),o=Dm(),s=t(o),u=!1,l,f,c,h={point:d,lineStart:p,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=b,h.lineEnd=v,f=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=p,h.lineEnd=g,f=G1(f);var w=o6(l,r);f.length?(u||(i.polygonStart(),u=!0),Nm(f,u6,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),f=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(w,M){e(w,M)&&i.point(w,M)}function m(w,M){a.point(w,M)}function p(){h.point=m,a.lineStart()}function g(){h.point=d,a.lineEnd()}function y(w,M){c.push([w,M]),s.point(w,M)}function b(){s.lineStart(),c=[]}function v(){y(c[0][0],c[0][1]),s.lineEnd();var w=s.clean(),M=o.result(),_,P=M.length,T,D,I;if(c.pop(),l.push(c),c=null,!!P){if(w&1){if(D=M[0],(T=D.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),_=0;_<T;++_)i.point((I=D[_])[0],I[1]);i.lineEnd()}return}P>1&&w&2&&M.push(M.pop().concat(M.shift())),f.push(M.filter(s6))}}return h}}function s6(e){return e.length>1}function u6(e,t){return((e=e.x)[0]<0?e[1]-Ge-ye:Ge-e[1])-((t=t.x)[0]<0?t[1]-Ge-ye:Ge-t[1])}const Ih=Lm(function(){return!0},l6,c6,[-Me,-Ge]);function l6(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var s=a>0?Me:-Me,u=De(a-t);De(u-Me)<ye?(e.point(t,n=(n+o)/2>0?Ge:-Ge),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(a,n),i=0):r!==s&&u>=Me&&(De(t-r)<ye&&(t-=r*ye),De(a-s)<ye&&(a-=s*ye),n=f6(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=a,n=o),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function f6(e,t,n,r){var i,a,o=ge(e-n);return De(o)>ye?ki((ge(t)*(a=_e(r))*ge(n)-ge(r)*(i=_e(t))*ge(e))/(i*a*o)):(t+r)/2}function c6(e,t,n,r){var i;if(e==null)i=n*Ge,r.point(-Me,i),r.point(0,i),r.point(Me,i),r.point(Me,0),r.point(Me,-i),r.point(0,-i),r.point(-Me,-i),r.point(-Me,0),r.point(-Me,i);else if(De(e[0]-t[0])>ye){var a=e[0]<t[0]?Me:-Me;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function h6(e){var t=_e(e),n=6*qe,r=t>0,i=De(t)>ye;function a(f,c,h,d){a6(d,e,n,h,f,c)}function o(f,c){return _e(f)*_e(c)>t}function s(f){var c,h,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(g,y){var b=[g,y],v,w=o(g,y),M=r?w?0:l(g,y):w?l(g+(g<0?Me:-Me),y):0;if(!c&&(m=d=w)&&f.lineStart(),w!==d&&(v=u(c,b),(!v||Io(c,v)||Io(b,v))&&(b[2]=1)),w!==d)p=0,w?(f.lineStart(),v=u(b,c),f.point(v[0],v[1])):(v=u(c,b),f.point(v[0],v[1],2),f.lineEnd()),c=v;else if(i&&c&&r^w){var _;!(M&h)&&(_=u(b,c,!0))&&(p=0,r?(f.lineStart(),f.point(_[0][0],_[0][1]),f.point(_[1][0],_[1][1]),f.lineEnd()):(f.point(_[1][0],_[1][1]),f.lineEnd(),f.lineStart(),f.point(_[0][0],_[0][1],3)))}w&&(!c||!Io(c,b))&&f.point(b[0],b[1]),c=b,d=w,h=M},lineEnd:function(){d&&f.lineEnd(),c=null},clean:function(){return p|(m&&d)<<1}}}function u(f,c,h){var d=hi(f),m=hi(c),p=[1,0,0],g=is(d,m),y=co(g,g),b=g[0],v=y-b*b;if(!v)return!h&&f;var w=t*y/v,M=-t*b/v,_=is(p,g),P=ho(p,w),T=ho(g,M);Uu(P,T);var D=_,I=co(P,D),E=co(D,D),F=I*I-E*(co(P,P)-1);if(!(F<0)){var G=Pt(F),$=ho(D,(-I-G)/E);if(Uu($,P),$=Bl($),!h)return $;var A=f[0],O=c[0],ae=f[1],ie=c[1],ne;O<A&&(ne=A,A=O,O=ne);var H=O-A,j=De(H-Me)<ye,W=j||H<ye;if(!j&&ie<ae&&(ne=ae,ae=ie,ie=ne),W?j?ae+ie>0^$[1]<(De($[0]-A)<ye?ae:ie):ae<=$[1]&&$[1]<=ie:H>Me^(A<=$[0]&&$[0]<=O)){var K=ho(D,(-I+G)/E);return Uu(K,P),[$,Bl(K)]}}}function l(f,c){var h=r?e:Me-e,d=0;return f<-h?d|=1:f>h&&(d|=2),c<-h?d|=4:c>h&&(d|=8),d}return Lm(o,s,a,r?[0,-e]:[-Me,e-Me])}function d6(e,t,n,r,i,a){var o=e[0],s=e[1],u=t[0],l=t[1],f=0,c=1,h=u-o,d=l-s,m;if(m=n-o,!(!h&&m>0)){if(m/=h,h<0){if(m<f)return;m<c&&(c=m)}else if(h>0){if(m>c)return;m>f&&(f=m)}if(m=i-o,!(!h&&m<0)){if(m/=h,h<0){if(m>c)return;m>f&&(f=m)}else if(h>0){if(m<f)return;m<c&&(c=m)}if(m=r-s,!(!d&&m>0)){if(m/=d,d<0){if(m<f)return;m<c&&(c=m)}else if(d>0){if(m>c)return;m>f&&(f=m)}if(m=a-s,!(!d&&m<0)){if(m/=d,d<0){if(m>c)return;m>f&&(f=m)}else if(d>0){if(m<f)return;m<c&&(c=m)}return f>0&&(e[0]=o+f*h,e[1]=s+f*d),c<1&&(t[0]=o+c*h,t[1]=s+c*d),!0}}}}}var Vi=1e9,po=-Vi;function Im(e,t,n,r){function i(l,f){return e<=l&&l<=n&&t<=f&&f<=r}function a(l,f,c,h){var d=0,m=0;if(l==null||(d=o(l,c))!==(m=o(f,c))||u(l,f)<0^c>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+c+4)%4)!==m);else h.point(f[0],f[1])}function o(l,f){return De(l[0]-e)<ye?f>0?0:3:De(l[0]-n)<ye?f>0?2:1:De(l[1]-t)<ye?f>0?1:0:f>0?3:2}function s(l,f){return u(l.x,f.x)}function u(l,f){var c=o(l,1),h=o(f,1);return c!==h?c-h:c===0?f[1]-l[1]:c===1?l[0]-f[0]:c===2?l[1]-f[1]:f[0]-l[0]}return function(l){var f=l,c=Dm(),h,d,m,p,g,y,b,v,w,M,_,P={point:T,lineStart:F,lineEnd:G,polygonStart:I,polygonEnd:E};function T(A,O){i(A,O)&&f.point(A,O)}function D(){for(var A=0,O=0,ae=d.length;O<ae;++O)for(var ie=d[O],ne=1,H=ie.length,j=ie[0],W,K,se=j[0],le=j[1];ne<H;++ne)W=se,K=le,j=ie[ne],se=j[0],le=j[1],K<=r?le>r&&(se-W)*(r-K)>(le-K)*(e-W)&&++A:le<=r&&(se-W)*(r-K)<(le-K)*(e-W)&&--A;return A}function I(){f=c,h=[],d=[],_=!0}function E(){var A=D(),O=_&&A,ae=(h=G1(h)).length;(O||ae)&&(l.polygonStart(),O&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),ae&&Nm(h,s,A,a,l),l.polygonEnd()),f=l,h=d=m=null}function F(){P.point=$,d&&d.push(m=[]),M=!0,w=!1,b=v=NaN}function G(){h&&($(p,g),y&&w&&c.rejoin(),h.push(c.result())),P.point=T,w&&f.lineEnd()}function $(A,O){var ae=i(A,O);if(d&&m.push([A,O]),M)p=A,g=O,y=ae,M=!1,ae&&(f.lineStart(),f.point(A,O));else if(ae&&w)f.point(A,O);else{var ie=[b=Math.max(po,Math.min(Vi,b)),v=Math.max(po,Math.min(Vi,v))],ne=[A=Math.max(po,Math.min(Vi,A)),O=Math.max(po,Math.min(Vi,O))];d6(ie,ne,e,t,n,r)?(w||(f.lineStart(),f.point(ie[0],ie[1])),f.point(ne[0],ne[1]),ae||f.lineEnd(),_=!1):ae&&(f.lineStart(),f.point(A,O),_=!1)}b=A,v=O,w=ae}return P}}const Ul=e=>e;var Hu=new Pr,zl=new Pr,Fm,Rm,Hl,Wl,Tn={point:Ot,lineStart:Ot,lineEnd:Ot,polygonStart:function(){Tn.lineStart=m6,Tn.lineEnd=b6},polygonEnd:function(){Tn.lineStart=Tn.lineEnd=Tn.point=Ot,Hu.add(De(zl)),zl=new Pr},result:function(){var e=Hu/2;return Hu=new Pr,e}};function m6(){Tn.point=p6}function p6(e,t){Tn.point=Bm,Fm=Hl=e,Rm=Wl=t}function Bm(e,t){zl.add(Wl*e-Hl*t),Hl=e,Wl=t}function b6(){Bm(Fm,Rm)}var di=1/0,as=di,ba=-di,os=ba,ss={point:g6,lineStart:Ot,lineEnd:Ot,polygonStart:Ot,polygonEnd:Ot,result:function(){var e=[[di,as],[ba,os]];return ba=os=-(as=di=1/0),e}};function g6(e,t){e<di&&(di=e),e>ba&&(ba=e),t<as&&(as=t),t>os&&(os=t)}var Vl=0,Yl=0,Yi=0,us=0,ls=0,Xr=0,jl=0,Xl=0,ji=0,Om,qm,ln,fn,Ft={point:Tr,lineStart:Fh,lineEnd:Rh,polygonStart:function(){Ft.lineStart=_6,Ft.lineEnd=v6},polygonEnd:function(){Ft.point=Tr,Ft.lineStart=Fh,Ft.lineEnd=Rh},result:function(){var e=ji?[jl/ji,Xl/ji]:Xr?[us/Xr,ls/Xr]:Yi?[Vl/Yi,Yl/Yi]:[NaN,NaN];return Vl=Yl=Yi=us=ls=Xr=jl=Xl=ji=0,e}};function Tr(e,t){Vl+=e,Yl+=t,++Yi}function Fh(){Ft.point=y6}function y6(e,t){Ft.point=w6,Tr(ln=e,fn=t)}function w6(e,t){var n=e-ln,r=t-fn,i=Pt(n*n+r*r);us+=i*(ln+e)/2,ls+=i*(fn+t)/2,Xr+=i,Tr(ln=e,fn=t)}function Rh(){Ft.point=Tr}function _6(){Ft.point=M6}function v6(){Gm(Om,qm)}function M6(e,t){Ft.point=Gm,Tr(Om=ln=e,qm=fn=t)}function Gm(e,t){var n=e-ln,r=t-fn,i=Pt(n*n+r*r);us+=i*(ln+e)/2,ls+=i*(fn+t)/2,Xr+=i,i=fn*e-ln*t,jl+=i*(ln+e),Xl+=i*(fn+t),ji+=i*3,Tr(ln=e,fn=t)}function Um(e){this._context=e}Um.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Tt);break}}},result:Ot};var Zl=new Pr,Wu,zm,Hm,Xi,Zi,ga={point:Ot,lineStart:function(){ga.point=x6},lineEnd:function(){Wu&&Wm(zm,Hm),ga.point=Ot},polygonStart:function(){Wu=!0},polygonEnd:function(){Wu=null},result:function(){var e=+Zl;return Zl=new Pr,e}};function x6(e,t){ga.point=Wm,zm=Xi=e,Hm=Zi=t}function Wm(e,t){Xi-=e,Zi-=t,Zl.add(Pt(Xi*Xi+Zi*Zi)),Xi=e,Zi=t}let Bh,fs,Oh,qh;class Gh{constructor(t){this._append=t==null?Vm:P6(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Oh||this._append!==fs){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Oh=r,fs=this._append,qh=this._,this._=i}this._+=qh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Vm(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function P6(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Vm;if(t!==Bh){const n=10**t;Bh=t,fs=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return fs}function js(e,t){let n=3,r=4.5,i,a;function o(s){return s&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),dr(s,i(a))),a.result()}return o.area=function(s){return dr(s,i(Tn)),Tn.result()},o.measure=function(s){return dr(s,i(ga)),ga.result()},o.bounds=function(s){return dr(s,i(ss)),ss.result()},o.centroid=function(s){return dr(s,i(Ft)),Ft.result()},o.projection=function(s){return arguments.length?(i=s==null?(e=null,Ul):(e=s).stream,o):e},o.context=function(s){return arguments.length?(a=s==null?(t=null,new Gh(n)):new Um(t=s),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(a.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const u=Math.floor(s);if(!(u>=0))throw new RangeError(`invalid digits: ${s}`);n=u}return t===null&&(a=new Gh(n)),o},o.projection(e).digits(n).context(t)}function Kl(e){return{stream:Xs(e)}}function Xs(e){return function(t){var n=new Ql;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Ql(){}Ql.prototype={constructor:Ql,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Wf(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),dr(n,e.stream(ss)),t(ss.result()),r!=null&&e.clipExtent(r),e}function Vf(e,t,n){return Wf(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,u])},n)}function Ym(e,t,n){return Vf(e,[[0,0],t],n)}function jm(e,t,n){return Wf(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];e.scale(150*a).translate([o,s])},n)}function Xm(e,t,n){return Wf(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,s])},n)}var Uh=16,S6=_e(30*qe);function zh(e,t){return+t?E6(e,t):A6(e)}function A6(e){return Xs({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function E6(e,t){function n(r,i,a,o,s,u,l,f,c,h,d,m,p,g){var y=l-r,b=f-i,v=y*y+b*b;if(v>4*t&&p--){var w=o+h,M=s+d,_=u+m,P=Pt(w*w+M*M+_*_),T=zt(_/=P),D=De(De(_)-1)<ye||De(a-c)<ye?(a+c)/2:Fn(M,w),I=e(D,T),E=I[0],F=I[1],G=E-r,$=F-i,A=b*G-y*$;(A*A/v>t||De((y*G+b*$)/v-.5)>.3||o*h+s*d+u*m<S6)&&(n(r,i,a,o,s,u,E,F,D,w/=P,M/=P,_,p,g),g.point(E,F),n(E,F,D,w,M,_,l,f,c,h,d,m,p,g))}}return function(r){var i,a,o,s,u,l,f,c,h,d,m,p,g={point:y,lineStart:b,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(T,D){T=e(T,D),r.point(T[0],T[1])}function b(){c=NaN,g.point=v,r.lineStart()}function v(T,D){var I=hi([T,D]),E=e(T,D);n(c,h,f,d,m,p,c=E[0],h=E[1],f=T,d=I[0],m=I[1],p=I[2],Uh,r),r.point(c,h)}function w(){g.point=y,r.lineEnd()}function M(){b(),g.point=_,g.lineEnd=P}function _(T,D){v(i=T,D),a=c,o=h,s=d,u=m,l=p,g.point=v}function P(){n(c,h,f,d,m,p,a,o,i,s,u,l,Uh,r),g.lineEnd=w,w()}return g}}var k6=Xs({point:function(e,t){this.stream.point(e*qe,t*qe)}});function C6(e){return Xs({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function T6(e,t,n,r,i){function a(o,s){return o*=r,s*=i,[t+e*o,n-e*s]}return a.invert=function(o,s){return[(o-t)/e*r,(n-s)/e*i]},a}function Hh(e,t,n,r,i,a){if(!a)return T6(e,t,n,r,i);var o=_e(a),s=ge(a),u=o*e,l=s*e,f=o/e,c=s/e,h=(s*n-o*t)/e,d=(s*t+o*n)/e;function m(p,g){return p*=r,g*=i,[u*p-l*g+t,n-l*p-u*g]}return m.invert=function(p,g){return[r*(f*p-c*g+h),i*(d-c*p-f*g)]},m}function rr(e){return Zm(function(){return e})()}function Zm(e){var t,n=150,r=480,i=250,a=0,o=0,s=0,u=0,l=0,f,c=0,h=1,d=1,m=null,p=Ih,g=null,y,b,v,w=Ul,M=.5,_,P,T,D,I;function E(A){return T(A[0]*qe,A[1]*qe)}function F(A){return A=T.invert(A[0],A[1]),A&&[A[0]*pt,A[1]*pt]}E.stream=function(A){return D&&I===A?D:D=k6(C6(f)(p(_(w(I=A)))))},E.preclip=function(A){return arguments.length?(p=A,m=void 0,$()):p},E.postclip=function(A){return arguments.length?(w=A,g=y=b=v=null,$()):w},E.clipAngle=function(A){return arguments.length?(p=+A?h6(m=A*qe):(m=null,Ih),$()):m*pt},E.clipExtent=function(A){return arguments.length?(w=A==null?(g=y=b=v=null,Ul):Im(g=+A[0][0],y=+A[0][1],b=+A[1][0],v=+A[1][1]),$()):g==null?null:[[g,y],[b,v]]},E.scale=function(A){return arguments.length?(n=+A,G()):n},E.translate=function(A){return arguments.length?(r=+A[0],i=+A[1],G()):[r,i]},E.center=function(A){return arguments.length?(a=A[0]%360*qe,o=A[1]%360*qe,G()):[a*pt,o*pt]},E.rotate=function(A){return arguments.length?(s=A[0]%360*qe,u=A[1]%360*qe,l=A.length>2?A[2]%360*qe:0,G()):[s*pt,u*pt,l*pt]},E.angle=function(A){return arguments.length?(c=A%360*qe,G()):c*pt},E.reflectX=function(A){return arguments.length?(h=A?-1:1,G()):h<0},E.reflectY=function(A){return arguments.length?(d=A?-1:1,G()):d<0},E.precision=function(A){return arguments.length?(_=zh(P,M=A*A),$()):Pt(M)},E.fitExtent=function(A,O){return Vf(E,A,O)},E.fitSize=function(A,O){return Ym(E,A,O)},E.fitWidth=function(A,O){return jm(E,A,O)},E.fitHeight=function(A,O){return Xm(E,A,O)};function G(){var A=Hh(n,0,0,h,d,c).apply(null,t(a,o)),O=Hh(n,r-A[0],i-A[1],h,d,c);return f=$m(s,u,l),P=ql(t,O),T=ql(f,P),_=zh(P,M),$()}function $(){return D=I=null,E}return function(){return t=e.apply(this,arguments),E.invert=t.invert&&F,G()}}function Yf(e){var t=0,n=Me/3,r=Zm(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*qe,n=a[1]*qe):[t*pt,n*pt]},i}function $6(e){var t=_e(e);function n(r,i){return[r*t,ge(i)/t]}return n.invert=function(r,i){return[r/t,zt(i*t)]},n}function D6(e,t){var n=ge(e),r=(n+ge(t))/2;if(De(r)<ye)return $6(e);var i=1+n*(2*r-n),a=Pt(i)/r;function o(s,u){var l=Pt(i-2*r*ge(u))/r;return[l*ge(s*=r),a-l*_e(s)]}return o.invert=function(s,u){var l=a-u,f=Fn(s,De(l))*Bt(l);return l*r<0&&(f-=Me*Bt(s)*Bt(l)),[f/r,zt((i-(s*s+l*l)*r*r)/(2*r))]},o}function cs(){return Yf(D6).scale(155.424).center([0,33.6442])}function Km(){return cs().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function N6(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function L6(){var e,t,n=Km(),r,i=cs().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=cs().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,u,l={point:function(h,d){u=[h,d]}};function f(h){var d=h[0],m=h[1];return u=null,r.point(d,m),u||(a.point(d,m),u)||(s.point(d,m),u)}f.invert=function(h){var d=n.scale(),m=n.translate(),p=(h[0]-m[0])/d,g=(h[1]-m[1])/d;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?o:n).invert(h)},f.stream=function(h){return e&&t===h?e:e=N6([n.stream(t=h),i.stream(h),o.stream(h)])},f.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),c()):n.precision()},f.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),f.translate(n.translate())):n.scale()},f.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),m=+h[0],p=+h[1];return r=n.translate(h).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(l),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+ye,p+.12*d+ye],[m-.214*d-ye,p+.234*d-ye]]).stream(l),s=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+ye,p+.166*d+ye],[m-.115*d-ye,p+.234*d-ye]]).stream(l),c()},f.fitExtent=function(h,d){return Vf(f,h,d)},f.fitSize=function(h,d){return Ym(f,h,d)},f.fitWidth=function(h,d){return jm(f,h,d)},f.fitHeight=function(h,d){return Xm(f,h,d)};function c(){return e=t=null,f}return f.scale(1070)}function Qm(e){return function(t,n){var r=_e(t),i=_e(n),a=e(r*i);return a===1/0?[2,0]:[a*i*ge(t),a*ge(n)]}}function Ia(e){return function(t,n){var r=Pt(t*t+n*n),i=e(r),a=ge(i),o=_e(i);return[Fn(t*a,r*o),zt(r&&n*a/r)]}}var Jm=Qm(function(e){return Pt(2/(1+e))});Jm.invert=Ia(function(e){return 2*zt(e/2)});function I6(){return rr(Jm).scale(124.75).clipAngle(180-.001)}var ep=Qm(function(e){return(e=Tm(e))&&e/ge(e)});ep.invert=Ia(function(e){return e});function F6(){return rr(ep).scale(79.4188).clipAngle(180-.001)}function Zs(e,t){return[e,ns(Hf((Ge+t)/2))]}Zs.invert=function(e,t){return[e,2*ki(Cm(t))-Ge]};function R6(){return tp(Zs).scale(961/Tt)}function tp(e){var t=rr(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,s,u,l;t.scale=function(c){return arguments.length?(r(c),f()):r()},t.translate=function(c){return arguments.length?(i(c),f()):i()},t.center=function(c){return arguments.length?(n(c),f()):n()},t.clipExtent=function(c){return arguments.length?(c==null?o=s=u=l=null:(o=+c[0][0],s=+c[0][1],u=+c[1][0],l=+c[1][1]),f()):o==null?null:[[o,s],[u,l]]};function f(){var c=Me*r(),h=t(i6(t.rotate()).invert([0,0]));return a(o==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:e===Zs?[[Math.max(h[0]-c,o),s],[Math.min(h[0]+c,u),l]]:[[o,Math.max(h[1]-c,s)],[u,Math.min(h[1]+c,l)]])}return f()}function bo(e){return Hf((Ge+e)/2)}function B6(e,t){var n=_e(e),r=e===t?ge(e):ns(n/_e(t))/ns(bo(t)/bo(e)),i=n*Gu(bo(e),r)/r;if(!r)return Zs;function a(o,s){i>0?s<-Ge+ye&&(s=-Ge+ye):s>Ge-ye&&(s=Ge-ye);var u=i/Gu(bo(s),r);return[u*ge(r*o),i-u*_e(r*o)]}return a.invert=function(o,s){var u=i-s,l=Bt(r)*Pt(o*o+u*u),f=Fn(o,De(u))*Bt(u);return u*r<0&&(f-=Me*Bt(o)*Bt(u)),[f/r,2*ki(Gu(i/l,1/r))-Ge]},a}function O6(){return Yf(B6).scale(109.5).parallels([30,30])}function hs(e,t){return[e,t]}hs.invert=hs;function q6(){return rr(hs).scale(152.63)}function G6(e,t){var n=_e(e),r=e===t?ge(e):(n-_e(t))/(t-e),i=n/r+e;if(De(r)<ye)return hs;function a(o,s){var u=i-s,l=r*o;return[u*ge(l),i-u*_e(l)]}return a.invert=function(o,s){var u=i-s,l=Fn(o,De(u))*Bt(u);return u*r<0&&(l-=Me*Bt(o)*Bt(u)),[l/r,i-Bt(r)*Pt(o*o+u*u)]},a}function U6(){return Yf(G6).scale(131.154).center([0,13.9389])}var ia=1.340264,aa=-.081106,oa=893e-6,sa=.003796,ds=Pt(3)/2,z6=12;function np(e,t){var n=zt(ds*ge(t)),r=n*n,i=r*r*r;return[e*_e(n)/(ds*(ia+3*aa*r+i*(7*oa+9*sa*r))),n*(ia+aa*r+i*(oa+sa*r))]}np.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,s,u;a<z6&&(s=n*(ia+aa*r+i*(oa+sa*r))-t,u=ia+3*aa*r+i*(7*oa+9*sa*r),n-=o=s/u,r=n*n,i=r*r*r,!(De(o)<km));++a);return[ds*e*(ia+3*aa*r+i*(7*oa+9*sa*r))/_e(n),zt(ge(n)/ds)]};function H6(){return rr(np).scale(177.158)}function rp(e,t){var n=_e(t),r=_e(e)*n;return[n*ge(e)/r,ge(t)/r]}rp.invert=Ia(ki);function W6(){return rr(rp).scale(144.049).clipAngle(60)}function ip(e,t){return[_e(t)*ge(e),ge(t)]}ip.invert=Ia(zt);function V6(){return rr(ip).scale(249.5).clipAngle(90+ye)}function ap(e,t){var n=_e(t),r=1+_e(e)*n;return[n*ge(e)/r,ge(t)/r]}ap.invert=Ia(function(e){return 2*ki(e)});function Y6(){return rr(ap).scale(250).clipAngle(142)}function op(e,t){return[ns(Hf((Ge+t)/2)),-e]}op.invert=function(e,t){return[-t,2*ki(Cm(e))-Ge]};function j6(){var e=tp(op),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function vn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ks(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Jl=Symbol("implicit");function jf(){var e=new Sr,t=[],n=[],r=Jl;function i(a){let o=e.get(a);if(o===void 0){if(r!==Jl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Sr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return jf(t,n).unknown(r)},vn.apply(i,arguments),i}function Qs(){var e=jf().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,u=0,l=0,f=.5;delete e.unknown;function c(){var h=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,h-u+l*2),s&&(a=Math.floor(a)),m+=(p-m-a*(h-u))*f,o=a*(1-u),s&&(m=Math.round(m),o=Math.round(o));var g=Pl(h).map(function(y){return m+a*y});return n(d?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),c()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,c()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(s=!!h,c()):s},e.padding=function(h){return arguments.length?(u=Math.min(1,l=+h),c()):u},e.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),c()):u},e.paddingOuter=function(h){return arguments.length?(l=+h,c()):l},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),c()):f},e.copy=function(){return Qs(t(),[r,i]).round(s).paddingInner(u).paddingOuter(l).align(f)},vn.apply(c(),arguments)}function sp(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return sp(t())},e}function X6(){return sp(Qs.apply(null,arguments).paddingInner(1))}function Z6(e){return function(){return e}}function ef(e){return+e}var Wh=[0,1];function qt(e){return e}function tf(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Z6(isNaN(t)?NaN:.5)}function K6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Q6(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=tf(i,r),a=n(o,a)):(r=tf(r,i),a=n(a,o)),function(s){return a(r(s))}}function J6(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=tf(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var u=Is(e,s,1,r)-1;return a[u](i[u](s))}}function Fa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Js(){var e=Wh,t=Wh,n=La,r,i,a,o=qt,s,u,l;function f(){var h=Math.min(e.length,t.length);return o!==qt&&(o=K6(e[0],e[h-1])),s=h>2?J6:Q6,u=l=null,c}function c(h){return h==null||isNaN(h=+h)?a:(u||(u=s(e.map(r),t,n)))(r(o(h)))}return c.invert=function(h){return o(i((l||(l=s(t,e.map(r),ct)))(h)))},c.domain=function(h){return arguments.length?(e=Array.from(h,ef),f()):e.slice()},c.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},c.rangeRound=function(h){return t=Array.from(h),n=Bf,f()},c.clamp=function(h){return arguments.length?(o=h?!0:qt,f()):o!==qt},c.interpolate=function(h){return arguments.length?(n=h,f()):n},c.unknown=function(h){return arguments.length?(a=h,c):a},function(h,d){return r=h,i=d,f()}}function up(){return Js()(qt,qt)}function e7(e,t,n,r){var i=Ml(e,t,n),a;switch(r=pa(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=n6(i,o))&&(r.precision=a),Em(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=r6(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=t6(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ei(r)}function Ra(e){var t=e.domain;return e.ticks=function(n){var r=t();return ca(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return e7(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],u,l,f=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);f-- >0;){if(l=Yo(o,s,n),l===u)return r[i]=o,r[a]=s,t(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return e},e}function Xf(){var e=up();return e.copy=function(){return Fa(e,Xf())},vn.apply(e,arguments),Ra(e)}function lp(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,ef),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return lp(e).unknown(t)},e=arguments.length?Array.from(e,ef):[0,1],Ra(n)}function fp(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Vh(e){return Math.log(e)}function Yh(e){return Math.exp(e)}function t7(e){return-Math.log(-e)}function n7(e){return-Math.exp(-e)}function r7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function i7(e){return e===10?r7:e===Math.E?Math.exp:t=>Math.pow(e,t)}function a7(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function jh(e){return(t,n)=>-e(-t,n)}function cp(e){const t=e(Vh,Yh),n=t.domain;let r=10,i,a;function o(){return i=a7(r),a=i7(r),n()[0]<0?(i=jh(i),a=jh(a),e(t7,n7)):e(Vh,Yh),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const u=n();let l=u[0],f=u[u.length-1];const c=f<l;c&&([l,f]=[f,l]);let h=i(l),d=i(f),m,p;const g=s==null?10:+s;let y=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(m=1;m<r;++m)if(p=h<0?m/a(-h):m*a(h),!(p<l)){if(p>f)break;y.push(p)}}else for(;h<=d;++h)for(m=r-1;m>=1;--m)if(p=h>0?m/a(-h):m*a(h),!(p<l)){if(p>f)break;y.push(p)}y.length*2<g&&(y=ca(l,f,g))}else y=ca(h,d,Math.min(d-h,g)).map(a);return c?y.reverse():y},t.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=pa(u)).precision==null&&(u.trim=!0),u=Ei(u)),s===1/0)return u;const l=Math.max(1,r*s/t.ticks().length);return f=>{let c=f/a(Math.round(i(f)));return c*r<r-.5&&(c*=r),c<=l?u(f):""}},t.nice=()=>n(fp(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),t}function hp(){const e=cp(Js()).domain([1,10]);return e.copy=()=>Fa(e,hp()).base(e.base()),vn.apply(e,arguments),e}function Xh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Zh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function dp(e){var t=1,n=e(Xh(t),Zh(t));return n.constant=function(r){return arguments.length?e(Xh(t=+r),Zh(t)):t},Ra(n)}function mp(){var e=dp(Js());return e.copy=function(){return Fa(e,mp()).constant(e.constant())},vn.apply(e,arguments)}function Kh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function o7(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function s7(e){return e<0?-e*e:e*e}function pp(e){var t=e(qt,qt),n=1;function r(){return n===1?e(qt,qt):n===.5?e(o7,s7):e(Kh(n),Kh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ra(t)}function bp(){var e=pp(Js());return e.copy=function(){return Fa(e,bp()).exponent(e.exponent())},vn.apply(e,arguments),e}function gp(){var e=[],t=[],n=[],r;function i(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=X3(e,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Is(n,o)]}return a.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(xt),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return gp().domain(e).range(t).unknown(r)},vn.apply(a,arguments)}function yp(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Is(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return yp().domain(e).range(t).unknown(n)},vn.apply(i,arguments)}const Vu=new Date,Yu=new Date;function Ke(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const u=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return u;let l;do u.push(l=new Date(+a)),t(a,s),e(a);while(l<a&&a<o);return u},i.filter=a=>Ke(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Vu.setTime(+a),Yu.setTime(+o),e(Vu),e(Yu),Math.floor(n(Vu,Yu))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const ms=Ke(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ms.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ke(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ms);ms.range;const Dn=1e3,Gt=Dn*60,Nn=Gt*60,Rn=Nn*24,Zf=Rn*7,Qh=Rn*30,ju=Rn*365,Kt=Ke(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Dn)},(e,t)=>(t-e)/Dn,e=>e.getUTCSeconds());Kt.range;const Ba=Ke(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dn)},(e,t)=>{e.setTime(+e+t*Gt)},(e,t)=>(t-e)/Gt,e=>e.getMinutes());Ba.range;const Oa=Ke(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Gt)},(e,t)=>(t-e)/Gt,e=>e.getUTCMinutes());Oa.range;const qa=Ke(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dn-e.getMinutes()*Gt)},(e,t)=>{e.setTime(+e+t*Nn)},(e,t)=>(t-e)/Nn,e=>e.getHours());qa.range;const Ga=Ke(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Nn)},(e,t)=>(t-e)/Nn,e=>e.getUTCHours());Ga.range;const Ir=Ke(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gt)/Rn,e=>e.getDate()-1);Ir.range;const eu=Ke(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rn,e=>e.getUTCDate()-1);eu.range;const tu=Ke(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Rn,e=>Math.floor(e/Rn));tu.range;function Fr(e){return Ke(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Gt)/Zf)}const mi=Fr(0),ya=Fr(1),wp=Fr(2),_p=Fr(3),$r=Fr(4),vp=Fr(5),Mp=Fr(6);mi.range;ya.range;wp.range;_p.range;$r.range;vp.range;Mp.range;function Rr(e){return Ke(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Zf)}const pi=Rr(0),wa=Rr(1),xp=Rr(2),Pp=Rr(3),Dr=Rr(4),Sp=Rr(5),Ap=Rr(6);pi.range;wa.range;xp.range;Pp.range;Dr.range;Sp.range;Ap.range;const Ua=Ke(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ua.range;const za=Ke(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());za.range;const Jt=Ke(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Jt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ke(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Jt.range;const en=Ke(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());en.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ke(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});en.range;function Ep(e,t,n,r,i,a){const o=[[Kt,1,Dn],[Kt,5,5*Dn],[Kt,15,15*Dn],[Kt,30,30*Dn],[a,1,Gt],[a,5,5*Gt],[a,15,15*Gt],[a,30,30*Gt],[i,1,Nn],[i,3,3*Nn],[i,6,6*Nn],[i,12,12*Nn],[r,1,Rn],[r,2,2*Rn],[n,1,Zf],[t,1,Qh],[t,3,3*Qh],[e,1,ju]];function s(l,f,c){const h=f<l;h&&([l,f]=[f,l]);const d=c&&typeof c.range=="function"?c:u(l,f,c),m=d?d.range(l,+f+1):[];return h?m.reverse():m}function u(l,f,c){const h=Math.abs(f-l)/c,d=Ls(([,,g])=>g).right(o,h);if(d===o.length)return e.every(Ml(l/ju,f/ju,c));if(d===0)return ms.every(Math.max(Ml(l,f,c),1));const[m,p]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return m.every(p)}return[s,u]}const[u7,kp]=Ep(en,za,pi,tu,Ga,Oa),[l7,f7]=Ep(Jt,Ua,mi,Ir,qa,Ba);function Xu(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Zu(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ii(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function c7(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,l=Fi(i),f=Ri(i),c=Fi(a),h=Ri(a),d=Fi(o),m=Ri(o),p=Fi(s),g=Ri(s),y=Fi(u),b=Ri(u),v={a:ae,A:ie,b:ne,B:H,c:null,d:id,e:id,f:L7,g:H7,G:V7,H:$7,I:D7,j:N7,L:Cp,m:I7,M:F7,p:j,q:W,Q:sd,s:ud,S:R7,u:B7,U:O7,V:q7,w:G7,W:U7,x:null,X:null,y:z7,Y:W7,Z:Y7,"%":od},w={a:K,A:se,b:le,B:oe,c:null,d:ad,e:ad,f:K7,g:s4,G:l4,H:j7,I:X7,j:Z7,L:$p,m:Q7,M:J7,p:Q,q:ee,Q:sd,s:ud,S:e4,u:t4,U:n4,V:r4,w:i4,W:a4,x:null,X:null,y:o4,Y:u4,Z:f4,"%":od},M={a:I,A:E,b:F,B:G,c:$,d:nd,e:nd,f:E7,g:td,G:ed,H:rd,I:rd,j:x7,L:A7,m:M7,M:P7,p:D,q:v7,Q:C7,s:T7,S:S7,u:b7,U:g7,V:y7,w:p7,W:w7,x:A,X:O,y:td,Y:ed,Z:_7,"%":k7};v.x=_(n,v),v.X=_(r,v),v.c=_(t,v),w.x=_(n,w),w.X=_(r,w),w.c=_(t,w);function _(R,V){return function(J){var N=[],fe=-1,re=0,ce=R.length,Se,Le,ze;for(J instanceof Date||(J=new Date(+J));++fe<ce;)R.charCodeAt(fe)===37&&(N.push(R.slice(re,fe)),(Le=Jh[Se=R.charAt(++fe)])!=null?Se=R.charAt(++fe):Le=Se==="e"?" ":"0",(ze=V[Se])&&(Se=ze(J,Le)),N.push(Se),re=fe+1);return N.push(R.slice(re,fe)),N.join("")}}function P(R,V){return function(J){var N=Ii(1900,void 0,1),fe=T(N,R,J+="",0),re,ce;if(fe!=J.length)return null;if("Q"in N)return new Date(N.Q);if("s"in N)return new Date(N.s*1e3+("L"in N?N.L:0));if(V&&!("Z"in N)&&(N.Z=0),"p"in N&&(N.H=N.H%12+N.p*12),N.m===void 0&&(N.m="q"in N?N.q:0),"V"in N){if(N.V<1||N.V>53)return null;"w"in N||(N.w=1),"Z"in N?(re=Zu(Ii(N.y,0,1)),ce=re.getUTCDay(),re=ce>4||ce===0?wa.ceil(re):wa(re),re=eu.offset(re,(N.V-1)*7),N.y=re.getUTCFullYear(),N.m=re.getUTCMonth(),N.d=re.getUTCDate()+(N.w+6)%7):(re=Xu(Ii(N.y,0,1)),ce=re.getDay(),re=ce>4||ce===0?ya.ceil(re):ya(re),re=Ir.offset(re,(N.V-1)*7),N.y=re.getFullYear(),N.m=re.getMonth(),N.d=re.getDate()+(N.w+6)%7)}else("W"in N||"U"in N)&&("w"in N||(N.w="u"in N?N.u%7:"W"in N?1:0),ce="Z"in N?Zu(Ii(N.y,0,1)).getUTCDay():Xu(Ii(N.y,0,1)).getDay(),N.m=0,N.d="W"in N?(N.w+6)%7+N.W*7-(ce+5)%7:N.w+N.U*7-(ce+6)%7);return"Z"in N?(N.H+=N.Z/100|0,N.M+=N.Z%100,Zu(N)):Xu(N)}}function T(R,V,J,N){for(var fe=0,re=V.length,ce=J.length,Se,Le;fe<re;){if(N>=ce)return-1;if(Se=V.charCodeAt(fe++),Se===37){if(Se=V.charAt(fe++),Le=M[Se in Jh?V.charAt(fe++):Se],!Le||(N=Le(R,J,N))<0)return-1}else if(Se!=J.charCodeAt(N++))return-1}return N}function D(R,V,J){var N=l.exec(V.slice(J));return N?(R.p=f.get(N[0].toLowerCase()),J+N[0].length):-1}function I(R,V,J){var N=d.exec(V.slice(J));return N?(R.w=m.get(N[0].toLowerCase()),J+N[0].length):-1}function E(R,V,J){var N=c.exec(V.slice(J));return N?(R.w=h.get(N[0].toLowerCase()),J+N[0].length):-1}function F(R,V,J){var N=y.exec(V.slice(J));return N?(R.m=b.get(N[0].toLowerCase()),J+N[0].length):-1}function G(R,V,J){var N=p.exec(V.slice(J));return N?(R.m=g.get(N[0].toLowerCase()),J+N[0].length):-1}function $(R,V,J){return T(R,t,V,J)}function A(R,V,J){return T(R,n,V,J)}function O(R,V,J){return T(R,r,V,J)}function ae(R){return o[R.getDay()]}function ie(R){return a[R.getDay()]}function ne(R){return u[R.getMonth()]}function H(R){return s[R.getMonth()]}function j(R){return i[+(R.getHours()>=12)]}function W(R){return 1+~~(R.getMonth()/3)}function K(R){return o[R.getUTCDay()]}function se(R){return a[R.getUTCDay()]}function le(R){return u[R.getUTCMonth()]}function oe(R){return s[R.getUTCMonth()]}function Q(R){return i[+(R.getUTCHours()>=12)]}function ee(R){return 1+~~(R.getUTCMonth()/3)}return{format:function(R){var V=_(R+="",v);return V.toString=function(){return R},V},parse:function(R){var V=P(R+="",!1);return V.toString=function(){return R},V},utcFormat:function(R){var V=_(R+="",w);return V.toString=function(){return R},V},utcParse:function(R){var V=P(R+="",!0);return V.toString=function(){return R},V}}}var Jh={"-":"",_:" ",0:"0"},ot=/^\s*\d+/,h7=/^%/,d7=/[\\^$*+?|[\]().{}]/g;function Ae(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function m7(e){return e.replace(d7,"\\$&")}function Fi(e){return new RegExp("^(?:"+e.map(m7).join("|")+")","i")}function Ri(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function p7(e,t,n){var r=ot.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function b7(e,t,n){var r=ot.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function g7(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function y7(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function w7(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ed(e,t,n){var r=ot.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function td(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _7(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function v7(e,t,n){var r=ot.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function M7(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function nd(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function x7(e,t,n){var r=ot.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function rd(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function P7(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function S7(e,t,n){var r=ot.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function A7(e,t,n){var r=ot.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function E7(e,t,n){var r=ot.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function k7(e,t,n){var r=h7.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function C7(e,t,n){var r=ot.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function T7(e,t,n){var r=ot.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function id(e,t){return Ae(e.getDate(),t,2)}function $7(e,t){return Ae(e.getHours(),t,2)}function D7(e,t){return Ae(e.getHours()%12||12,t,2)}function N7(e,t){return Ae(1+Ir.count(Jt(e),e),t,3)}function Cp(e,t){return Ae(e.getMilliseconds(),t,3)}function L7(e,t){return Cp(e,t)+"000"}function I7(e,t){return Ae(e.getMonth()+1,t,2)}function F7(e,t){return Ae(e.getMinutes(),t,2)}function R7(e,t){return Ae(e.getSeconds(),t,2)}function B7(e){var t=e.getDay();return t===0?7:t}function O7(e,t){return Ae(mi.count(Jt(e)-1,e),t,2)}function Tp(e){var t=e.getDay();return t>=4||t===0?$r(e):$r.ceil(e)}function q7(e,t){return e=Tp(e),Ae($r.count(Jt(e),e)+(Jt(e).getDay()===4),t,2)}function G7(e){return e.getDay()}function U7(e,t){return Ae(ya.count(Jt(e)-1,e),t,2)}function z7(e,t){return Ae(e.getFullYear()%100,t,2)}function H7(e,t){return e=Tp(e),Ae(e.getFullYear()%100,t,2)}function W7(e,t){return Ae(e.getFullYear()%1e4,t,4)}function V7(e,t){var n=e.getDay();return e=n>=4||n===0?$r(e):$r.ceil(e),Ae(e.getFullYear()%1e4,t,4)}function Y7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ae(t/60|0,"0",2)+Ae(t%60,"0",2)}function ad(e,t){return Ae(e.getUTCDate(),t,2)}function j7(e,t){return Ae(e.getUTCHours(),t,2)}function X7(e,t){return Ae(e.getUTCHours()%12||12,t,2)}function Z7(e,t){return Ae(1+eu.count(en(e),e),t,3)}function $p(e,t){return Ae(e.getUTCMilliseconds(),t,3)}function K7(e,t){return $p(e,t)+"000"}function Q7(e,t){return Ae(e.getUTCMonth()+1,t,2)}function J7(e,t){return Ae(e.getUTCMinutes(),t,2)}function e4(e,t){return Ae(e.getUTCSeconds(),t,2)}function t4(e){var t=e.getUTCDay();return t===0?7:t}function n4(e,t){return Ae(pi.count(en(e)-1,e),t,2)}function Dp(e){var t=e.getUTCDay();return t>=4||t===0?Dr(e):Dr.ceil(e)}function r4(e,t){return e=Dp(e),Ae(Dr.count(en(e),e)+(en(e).getUTCDay()===4),t,2)}function i4(e){return e.getUTCDay()}function a4(e,t){return Ae(wa.count(en(e)-1,e),t,2)}function o4(e,t){return Ae(e.getUTCFullYear()%100,t,2)}function s4(e,t){return e=Dp(e),Ae(e.getUTCFullYear()%100,t,2)}function u4(e,t){return Ae(e.getUTCFullYear()%1e4,t,4)}function l4(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Dr(e):Dr.ceil(e),Ae(e.getUTCFullYear()%1e4,t,4)}function f4(){return"+0000"}function od(){return"%"}function sd(e){return+e}function ud(e){return Math.floor(+e/1e3)}var Gr,Kf,Ha;c4({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function c4(e){return Gr=c7(e),Kf=Gr.format,Gr.parse,Ha=Gr.utcFormat,Gr.utcParse,Gr}function h4(e){return new Date(e)}function d4(e){return e instanceof Date?+e:+new Date(+e)}function Qf(e,t,n,r,i,a,o,s,u,l){var f=up(),c=f.invert,h=f.domain,d=l(".%L"),m=l(":%S"),p=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),v=l("%B"),w=l("%Y");function M(_){return(u(_)<_?d:s(_)<_?m:o(_)<_?p:a(_)<_?g:r(_)<_?i(_)<_?y:b:n(_)<_?v:w)(_)}return f.invert=function(_){return new Date(c(_))},f.domain=function(_){return arguments.length?h(Array.from(_,d4)):h().map(h4)},f.ticks=function(_){var P=h();return e(P[0],P[P.length-1],_??10)},f.tickFormat=function(_,P){return P==null?M:l(P)},f.nice=function(_){var P=h();return(!_||typeof _.range!="function")&&(_=t(P[0],P[P.length-1],_??10)),_?h(fp(P,_)):f},f.copy=function(){return Fa(f,Qf(e,t,n,r,i,a,o,s,u,l))},f}function m4(){return vn.apply(Qf(l7,f7,Jt,Ua,mi,Ir,qa,Ba,Kt,Kf).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function p4(){return vn.apply(Qf(u7,kp,en,za,pi,eu,Ga,Oa,Kt,Ha).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function nu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ru(){var e=0,t=.5,n=1,r=1,i,a,o,s,u,l=qt,f,c=!1,h;function d(p){return isNaN(p=+p)?h:(p=.5+((p=+f(p))-a)*(r*p<r*a?s:u),l(c?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=f(e=+e),a=f(t=+t),o=f(n=+n),s=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(c=!!p,d):c},d.interpolator=function(p){return arguments.length?(l=p,d):l};function m(p){return function(g){var y,b,v;return arguments.length?([y,b,v]=g,l=Ws(p,[y,b,v]),d):[l(0),l(.5),l(1)]}}return d.range=m(La),d.rangeRound=m(Bf),d.unknown=function(p){return arguments.length?(h=p,d):h},function(p){return f=p,i=p(e),a=p(t),o=p(n),s=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function Np(){var e=Ra(ru()(qt));return e.copy=function(){return nu(e,Np())},Ks.apply(e,arguments)}function Lp(){var e=cp(ru()).domain([.1,1,10]);return e.copy=function(){return nu(e,Lp()).base(e.base())},Ks.apply(e,arguments)}function Ip(){var e=dp(ru());return e.copy=function(){return nu(e,Ip()).constant(e.constant())},Ks.apply(e,arguments)}function Fp(){var e=pp(ru());return e.copy=function(){return nu(e,Fp()).exponent(e.exponent())},Ks.apply(e,arguments)}function we(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const b4=we("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),g4=we("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),y4=we("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),w4=we("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),_4=we("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),v4=we("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),M4=we("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),x4=we("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),P4=we("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),S4=we("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ie=e=>fv(e[e.length-1]);var Rp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(we);const Bp=Ie(Rp);var Op=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(we);const qp=Ie(Op);var Gp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(we);const Up=Ie(Gp);var zp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(we);const Hp=Ie(zp);var nf=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(we);const ps=Ie(nf);var Wp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(we);const Vp=Ie(Wp);var rf=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(we);const bs=Ie(rf);var Yp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(we);const jp=Ie(Yp);var Xp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(we);const Zp=Ie(Xp);var Kp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(we);const Qp=Ie(Kp);var Jp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(we);const eb=Ie(Jp);var tb=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(we);const nb=Ie(tb);var rb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(we);const ib=Ie(rb);var ab=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(we);const ob=Ie(ab);var sb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(we);const ub=Ie(sb);var lb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(we);const fb=Ie(lb);var cb=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(we);const hb=Ie(cb);var db=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(we);const mb=Ie(db);var pb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(we);const bb=Ie(pb);var gb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(we);const yb=Ie(gb);var wb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(we);const _b=Ie(wb);var vb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(we);const Mb=Ie(vb);var xb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(we);const Pb=Ie(xb);var Sb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(we);const Ab=Ie(Sb);var Eb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(we);const kb=Ie(Eb);var Cb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(we);const Tb=Ie(Cb);var $b=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(we);const Db=Ie($b);function Nb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const Lb=Of(yn(300,.5,0),yn(-240,.5,1));var Ib=Of(yn(-100,.75,.35),yn(80,1.5,.8)),Fb=Of(yn(260,.75,.35),yn(80,1.5,.8)),go=yn();function Rb(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return go.h=360*e-100,go.s=1.5-1.5*t,go.l=.8-.9*t,go+""}var yo=Kn(),A4=Math.PI/3,E4=Math.PI*2/3;function Bb(e){var t;return e=(.5-e)*Math.PI,yo.r=255*(t=Math.sin(e))*t,yo.g=255*(t=Math.sin(e+A4))*t,yo.b=255*(t=Math.sin(e+E4))*t,yo+""}function Ob(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function iu(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const qb=iu(we("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Gb=iu(we("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ub=iu(we("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),zb=iu(we("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function tt(e){return function(){return e}}const Hb=Math.cos,Jf=Math.min,gs=Math.sin,Qe=Math.sqrt,ld=1e-12,ys=Math.PI,au=2*ys;function Wb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Pm(t)}function Vb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Yb(e){this._context=e}Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Wa(e){return new Yb(e)}function jb(e){return e[0]}function Xb(e){return e[1]}function Zb(e,t){var n=tt(!0),r=null,i=Wa,a=null,o=Wb(s);e=typeof e=="function"?e:e===void 0?jb:tt(e),t=typeof t=="function"?t:t===void 0?Xb:tt(t);function s(u){var l,f=(u=Vb(u)).length,c,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=f;++l)!(l<f&&n(c=u[l],l,u))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(c,l,u),+t(c,l,u));if(d)return a=null,d+""||null}return s.x=function(u){return arguments.length?(e=typeof u=="function"?u:tt(+u),s):e},s.y=function(u){return arguments.length?(t=typeof u=="function"?u:tt(+u),s):t},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:tt(!!u),s):n},s.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),s):i},s.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),s):r},s}function k4(e,t,n){var r=null,i=tt(!0),a=null,o=Wa,s=null,u=Wb(l);e=typeof e=="function"?e:e===void 0?jb:tt(+e),t=typeof t=="function"?t:tt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Xb:tt(+n);function l(c){var h,d,m,p=(c=Vb(c)).length,g,y=!1,b,v=new Array(p),w=new Array(p);for(a==null&&(s=o(b=u())),h=0;h<=p;++h){if(!(h<p&&i(g=c[h],h,c))===y)if(y=!y)d=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=d;--m)s.point(v[m],w[m]);s.lineEnd(),s.areaEnd()}y&&(v[h]=+e(g,h,c),w[h]=+t(g,h,c),s.point(r?+r(g,h,c):v[h],n?+n(g,h,c):w[h]))}if(b)return s=null,b+""||null}function f(){return Zb().defined(i).curve(o).context(a)}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:tt(+c),r=null,l):e},l.x0=function(c){return arguments.length?(e=typeof c=="function"?c:tt(+c),l):e},l.x1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:tt(+c),l):r},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:tt(+c),n=null,l):t},l.y0=function(c){return arguments.length?(t=typeof c=="function"?c:tt(+c),l):t},l.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:tt(+c),l):n},l.lineX0=l.lineY0=function(){return f().x(e).y(t)},l.lineY1=function(){return f().x(e).y(n)},l.lineX1=function(){return f().x(r).y(t)},l.defined=function(c){return arguments.length?(i=typeof c=="function"?c:tt(!!c),l):i},l.curve=function(c){return arguments.length?(o=c,a!=null&&(s=o(a)),l):o},l.context=function(c){return arguments.length?(c==null?a=s=null:s=o(a=c),l):a},l}class Kb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function C4(e){return new Kb(e,!0)}function T4(e){return new Kb(e,!1)}const $4=Qe(3),Qb={draw(e,t){const n=Qe(t+Jf(t/28,.75))*.59436,r=n/2,i=r*$4;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},_a={draw(e,t){const n=Qe(t/ys);e.moveTo(n,0),e.arc(0,0,n,0,au)}},Jb={draw(e,t){const n=Qe(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},eg=Qe(1/3),D4=eg*2,tg={draw(e,t){const n=Qe(t/D4),r=n*eg;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},ng={draw(e,t){const n=Qe(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},rg={draw(e,t){const n=Qe(t-Jf(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},ig={draw(e,t){const n=Qe(t),r=-n/2;e.rect(r,r,n,n)}},ag={draw(e,t){const n=Qe(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},N4=.8908130915292852,og=gs(ys/10)/gs(7*ys/10),L4=gs(au/10)*og,I4=-Hb(au/10)*og,sg={draw(e,t){const n=Qe(t*N4),r=L4*n,i=I4*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=au*a/5,s=Hb(o),u=gs(o);e.lineTo(u*n,-s*n),e.lineTo(s*r-u*i,u*r+s*i)}e.closePath()}},Ku=Qe(3),ug={draw(e,t){const n=-Qe(t/(Ku*3));e.moveTo(0,n*2),e.lineTo(-Ku*n,-n),e.lineTo(Ku*n,-n),e.closePath()}},F4=Qe(3),lg={draw(e,t){const n=Qe(t)*.6824,r=n/2,i=n*F4/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Lt=-.5,It=Qe(3)/2,af=1/Qe(12),R4=(af/2+1)*3,fg={draw(e,t){const n=Qe(t/R4),r=n/2,i=n*af,a=r,o=n*af+n,s=-a,u=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,u),e.lineTo(Lt*r-It*i,It*r+Lt*i),e.lineTo(Lt*a-It*o,It*a+Lt*o),e.lineTo(Lt*s-It*u,It*s+Lt*u),e.lineTo(Lt*r+It*i,Lt*i-It*r),e.lineTo(Lt*a+It*o,Lt*o-It*a),e.lineTo(Lt*s+It*u,Lt*u-It*s),e.closePath()}},cg={draw(e,t){const n=Qe(t-Jf(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},B4=[_a,Jb,tg,ig,sg,ug,fg],O4=[_a,rg,cg,lg,Qb,ag,ng];function Qn(){}function ws(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ou(e){this._context=e}ou.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ws(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ws(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q4(e){return new ou(e)}function hg(e){this._context=e}hg.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ws(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function G4(e){return new hg(e)}function dg(e){this._context=e}dg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ws(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function U4(e){return new dg(e)}function mg(e,t){this._basis=new ou(e),this._beta=t}mg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,s=-1,u;++s<=n;)u=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+u*a),this._beta*t[s]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const z4=function e(t){function n(r){return t===1?new ou(r):new mg(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function _s(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ec(e,t){this._context=e,this._k=(1-t)/6}ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_s(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:_s(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const H4=function e(t){function n(r){return new ec(r,t)}return n.tension=function(r){return e(+r)},n}(0);function tc(e,t){this._context=e,this._k=(1-t)/6}tc.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_s(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const W4=function e(t){function n(r){return new tc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function nc(e,t){this._context=e,this._k=(1-t)/6}nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_s(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const V4=function e(t){function n(r){return new nc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function rc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>ld){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ld){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/f,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function pg(e,t){this._context=e,this._alpha=t}pg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:rc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Y4=function e(t){function n(r){return t?new pg(r,t):new ec(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function bg(e,t){this._context=e,this._alpha=t}bg.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:rc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const j4=function e(t){function n(r){return t?new bg(r,t):new tc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function gg(e,t){this._context=e,this._alpha=t}gg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const X4=function e(t){function n(r){return t?new gg(r,t):new nc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function yg(e){this._context=e}yg.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Z4(e){return new yg(e)}function fd(e){return e<0?-1:1}function cd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(fd(a)+fd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function hd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Qu(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function vs(e){this._context=e}vs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qu(this,this._t0,hd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Qu(this,hd(this,n=cd(this,e,t)),n);break;default:Qu(this,this._t0,n=cd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function wg(e){this._context=new _g(e)}(wg.prototype=Object.create(vs.prototype)).point=function(e,t){vs.prototype.point.call(this,t,e)};function _g(e){this._context=e}_g.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function K4(e){return new vs(e)}function Q4(e){return new wg(e)}function vg(e){this._context=e}vg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=dd(e),i=dd(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function dd(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function J4(e){return new vg(e)}function su(e,t){this._context=e,this._t=t}su.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function e9(e){return new su(e,.5)}function t9(e){return new su(e,0)}function n9(e){return new su(e,1)}function Ki(e,t,n){this.k=e,this.x=t,this.y=n}Ki.prototype={constructor:Ki,scale:function(e){return e===1?this:new Ki(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ki(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ki.prototype;const r9="modulepreload",i9=function(e){return"/rhythm-vis/"+e},md={},Ur=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=i9(o),o in md)return;md[o]=!0;const s=o.endsWith(".css"),u=s?'[rel="stylesheet"]':"";if(!!r)for(let c=a.length-1;c>=0;c--){const h=a[c];if(h.href===o&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const f=document.createElement("link");if(f.rel=s?"stylesheet":r9,s||(f.as="script",f.crossOrigin=""),f.href=o,document.head.appendChild(f),s)return new Promise((c,h)=>{f.addEventListener("load",c),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function a9(e){if(e){if(e=new Uint8Array(e.buffer||e),s9(e))return"wav";if(o9(e))return"mp3";if(l9(e))return"flac";if(f9(e))return"m4a";if(c9(e))return"opus";if(u9(e))return"oga";if(h9(e))return"qoa"}}function o9(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function s9(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function u9(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function l9(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function f9(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function c9(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function h9(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let d9=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],a=r,o=0;a<this.length&&o<t.length;a++,o++)t[o]=i[a]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var a=r,o=0;a<this.length&&o<t.length;a++,o++)i[a]=t[o]}};const m9=globalThis.AudioBuffer||d9;async function p9(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=a9(e);if(!t)throw Error("Cannot detect audio format");if(!wt[t])throw Error("Missing decoder for "+t+" format");return wt[t](e)}const wt={async oga(e){let{decoder:t}=wt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Ur(()=>import("./index-DZQDBL-7.js"),__vite__mapDeps([0,1,2]));await(wt.oga.decoder=t=new n).ready}return e&&zr(await t.decodeFile(e))},async mp3(e){let{decoder:t}=wt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Ur(()=>import("./index-Cw-fkcZt.js"),__vite__mapDeps([3,2]));await(wt.mp3.decoder=t=new n).ready}return e&&zr(await t.decode(e))},async flac(e){let{decoder:t}=wt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Ur(()=>import("./index-BHNhxocg.js"),__vite__mapDeps([4,1,2]));await(wt.flac.decoder=t=new n).ready}return e&&zr(await t.decode(e))},async opus(e){let{decoder:t}=wt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Ur(()=>import("./index-BfM8P78U.js"),__vite__mapDeps([5,1,2]));await(wt.opus.decoder=t=new n).ready}return e&&zr(await t.decodeFile(e))},async wav(e){let{decode:t}=wt.wav;if(!t){let n=await Ur(()=>import("./index-CcedxHbM.js").then(r=>r.i),__vite__mapDeps([]));t=wt.wav.decode=n.default.decode}return e&&zr(await t(e))},async qoa(e){let{decode:t}=wt.qoa;return t||(wt.qoa.decode=t=(await Ur(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),e&&zr(await t(e))}};function zr({channelData:e,sampleRate:t}){let n=new m9({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Bi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var b9=g9;function g9(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,a=i===3?32:16,o;return n===2?o=w9(e.getChannelData(0),e.getChannelData(1)):o=e.getChannelData(0),y9(o,i,r,n,a)}function y9(e,t,n,r,i){var a=i/8,o=r*a,s=new ArrayBuffer(44+e.length*a),u=new DataView(s);return wo(u,0,"RIFF"),u.setUint32(4,36+e.length*a,!0),wo(u,8,"WAVE"),wo(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,t,!0),u.setUint16(22,r,!0),u.setUint32(24,n,!0),u.setUint32(28,n*o,!0),u.setUint16(32,o,!0),u.setUint16(34,i,!0),wo(u,36,"data"),u.setUint32(40,e.length*a,!0),t===1?v9(u,44,e):_9(u,44,e),s}function w9(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=t[a],a++;return r}function _9(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function v9(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function wo(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const M9=Mg(b9);async function ic(e){const n=await(await fetch(e)).arrayBuffer();return await p9(n)}function x9(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),a=new Float32Array(Math.ceil(r*e.sampleRate));for(const o of t){const s=Math.round(o*e.sampleRate);let u=1;for(let l=0;l<i.length;++l)u=Math.max(0,u-2/40100),a[s+l]=i[l]*u}return a}function ac(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([M9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function xg(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function Ms(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const a=i.audioBuffer.getChannelData(0);for(const o of i.times){const s=Math.round(o*n);for(let u=0;u<a.length;++u)r[s+u]=Math.min(r[s+u]+a[u],1)}}return r}function Jn(e){return e!=null&&!Number.isNaN(e)}function tn(e,t){return+Jn(t)-+Jn(e)||xt(e,t)}function xs(e,t){return+Jn(t)-+Jn(e)||$a(e,t)}function oc(e){return e!=null&&`${e}`!=""}function Pg(e){return isFinite(e)?e:NaN}function uu(e){return e>0&&isFinite(e)?e:NaN}function sc(e){return e<0&&isFinite(e)?e:NaN}function P9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${S9(e.getUTCFullYear())}-${Cn(e.getUTCMonth()+1,2)}-${Cn(e.getUTCDate(),2)}${n||r||i||a?`T${Cn(n,2)}:${Cn(r,2)}${i||a?`:${Cn(i,2)}${a?`.${Cn(a,3)}`:""}`:""}Z`:""}`}function S9(e){return e<0?`-${Cn(-e,6)}`:e>9999?`+${Cn(e,6)}`:Cn(e,4)}function Cn(e,t){return`${e}`.padStart(t,"0")}const A9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Sg(e,t){return A9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Zr=1e3,Yn=Zr*60,jn=Yn*60,wn=jn*24,un=wn*7,_r=wn*30,Hn=wn*365,Ju=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Zr],["5 seconds",5*Zr],["15 seconds",15*Zr],["30 seconds",30*Zr],["minute",Yn],["5 minutes",5*Yn],["15 minutes",15*Yn],["30 minutes",30*Yn],["hour",jn],["3 hours",3*jn],["6 hours",6*jn],["12 hours",12*jn],["day",wn],["2 days",2*wn],["week",un],["2 weeks",2*un],["month",_r],["3 months",3*_r],["6 months",6*_r],["year",Hn],["2 years",2*Hn],["5 years",5*Hn],["10 years",10*Hn],["20 years",20*Hn],["50 years",50*Hn],["100 years",100*Hn]],uc=new Map([["second",Zr],["minute",Yn],["hour",jn],["day",wn],["monday",un],["tuesday",un],["wednesday",un],["thursday",un],["friday",un],["saturday",un],["sunday",un],["week",un],["month",_r],["year",Hn]]),Ag=new Map([["second",Kt],["minute",Ba],["hour",qa],["day",Ir],["monday",ya],["tuesday",wp],["wednesday",_p],["thursday",$r],["friday",vp],["saturday",Mp],["sunday",mi],["week",mi],["month",Ua],["year",Jt]]),lc=new Map([["second",Kt],["minute",Oa],["hour",Ga],["day",tu],["monday",wa],["tuesday",xp],["wednesday",Pp],["thursday",Dr],["friday",Sp],["saturday",Ap],["sunday",pi],["week",pi],["month",za],["year",en]]),Va=Symbol("intervalDuration"),lu=Symbol("intervalType");for(const[e,t]of Ag)t[Va]=uc.get(e),t[lu]="time";for(const[e,t]of lc)t[Va]=uc.get(e),t[lu]="utc";const Qi=[["year",en,"utc"],["month",za,"utc"],["day",tu,"utc",6*_r],["hour",Ga,"utc",3*wn],["minute",Oa,"utc",6*jn],["second",Kt,"utc",30*Yn]],Fo=[["year",Jt,"time"],["month",Ua,"time"],["day",Ir,"time",6*_r],["hour",qa,"time",3*wn],["minute",Ba,"time",6*jn],["second",Kt,"time",30*Yn]],E9=[Qi[0],Fo[0],Qi[1],Fo[1],Qi[2],Fo[2],...Qi.slice(3)];function Eg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=lc.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function kg(e){return Cg(Eg(e),"time")}function fc(e){return Cg(Eg(e),"utc")}function Cg([e,t],n){let r=(n==="time"?Ag:lc).get(e);return t>1&&(r=r.every(t),r[Va]=uc.get(e)*t,r[lu]=n),r}function pd(e,t){if(!(t>1))return;const n=e[Va];if(!Ju.some(([,i])=>i===n)||n%wn===0&&wn<n&&n<_r)return;const[r]=Ju[Ls(([,i])=>Math.log(i)).center(Ju,Math.log(n*t))];return(e[lu]==="time"?kg:fc)(r)}function bd(e,t,n){const r=t==="time"?Kf:Ha;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=k9(n);switch(e){case"millisecond":return Hr(r(".%L"),r(":%M:%S"),i);case"second":return Hr(r(":%S"),r("%-I:%M"),i);case"minute":return Hr(r("%-I:%M"),r("%p"),i);case"hour":return Hr(r("%-I %p"),r("%b %-d"),i);case"day":return Hr(r("%-d"),r("%b"),i);case"month":return Hr(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function k9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function C9(e){return e==="time"?Fo:e==="utc"?Qi:E9}function T9(e,t,n){const r=Ut(J3(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return bd("millisecond","utc",n);for(const[i,a,o,s]of C9(e)){if(r>s||i==="hour"&&!r)break;if(t.every(u=>a.floor(u)>=u))return bd(i,o,n)}}function Hr(e,t,n){return(r,i,a)=>{const o=e(r,i),s=t(r,i),u=i-gi(a);return i!==u&&a[u]!==void 0&&s===t(a[u],u)?o:n(o,s)}}const va=Object.getPrototypeOf(Uint8Array),$9=Object.prototype.toString,Tg=Symbol("reindex");function rt(e,t,n){const r=typeof t;return r==="string"?gd(e,$g(t),n):r==="function"?gd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ye(e,Ya(t),n):typeof(t==null?void 0:t.transform)=="function"?yd(t.transform(e),n):D9(yd(t,n),e==null?void 0:e[Tg])}function D9(e,t){return t?mc(e,t):e}function gd(e,t,n){return Ye(e,(n==null?void 0:n.prototype)instanceof va?N9(t):t,n)}function yd(e,t){return t===void 0?$t(e):e instanceof t?e:t.prototype instanceof va&&!(e instanceof va)?t.from(e,hc):t.from(e)}function N9(e){return(t,n)=>hc(e(t,n))}const Ro=[null],$g=e=>t=>t[e],fu={transform:qn},mt={transform:e=>e},L9=()=>1,I9=()=>!0,bt=e=>e==null?e:`${e}`,Re=e=>e==null?e:+e,cc=e=>e?e[0]:void 0,of=e=>e?e[1]:void 0,Ya=e=>()=>e;function F9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>oi(n,t,r)}function hn(e){return e instanceof va?e:Ye(e,hc,Float64Array)}function hc(e){return e==null?NaN:Number(e)}function R9(e){return Ye(e,Dg)}function Dg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Sg(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Bn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:hu(e)?[void 0,e]:[e,void 0]}function gt(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function Ng(e,t,n){if(e!=null)return on(e,t,n)}function on(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function $t(e){return e==null||e instanceof Array||e instanceof va?e:Array.from(e)}function Ye(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function Ma(e,t=Array){return e instanceof t?e.slice():t.from(e)}function B9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function Lg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function O9(e){return B9(e)||Lg(e)||e.interval!==void 0}function ir(e){return(e==null?void 0:e.toString)===$9}function sf(e){return ir(e)&&(e.type!==void 0||e.domain!==void 0)}function cu(e){return ir(e)&&typeof e.transform!="function"}function bi(e){return cu(e)&&e.value===void 0&&e.channel===void 0}function q9(e,t,n,r=mt){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function ja(e,t){return e===void 0&&t===void 0?[cc,of]:[e,t]}function dc({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Bn(t)),e===void 0&&([e]=Bn(n)),e}function qn(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function mc(e,t){return Ye(t,n=>e[n],e.constructor)}function G9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function gr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function U9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Ps(e){let t;return[{transform:()=>t,label:Br(e)},n=>t=n]}function En(e){return e==null?[e]:Ps(e)}function Br(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function uf(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return St(r)||St(i)?Ye(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Ye(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function Ig(e,t){const n=Fg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ye(e,n):e}function Fg(e,t){const n=pc(e,t);return n&&(r=>Jn(r)?n.floor(r):r)}function pc(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Pl(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Pl(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?kg:fc)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Ci(e,t){if(e=pc(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function z9(e,t){if(e=Ci(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function H9(e){return Kr(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Kr(e){return typeof(e==null?void 0:e.range)=="function"}function Xa(e){return e===void 0||cu(e)?e:{value:e}}function W9(e){return e==null?null:{transform:t=>rt(t,e,Float64Array),label:Br(e)}}function ar(e){return e&&typeof e[Symbol.iterator]=="function"}function Rg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function wd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function St(e){for(const t of e)if(t!=null)return t instanceof Date}function V9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&Sg(t)}function Y9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function j9(e){for(const t of e)if(t!=null)return typeof t=="number"}function el(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const X9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function hu(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||X9.has(e))}function Z9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function vt(e){return e==null||xa(e)}function xa(e){return/^\s*none\s*$/i.test(e)}function K9(e){return/^\s*round\s*$/i.test(e)}function lf(e,t){return Ng(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function du(e="middle"){return lf(e,"frameAnchor")}function gi(e){if(e==null)return;const t=e[0],n=e[e.length-1];return $a(t,n)}function Q9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function J9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function Bg(e){return ar(e)?J9(e):e}const dn=Symbol("position"),Gn=Symbol("color"),Za=Symbol("radius"),Ka=Symbol("length"),Qa=Symbol("opacity"),mu=Symbol("symbol"),Og=Symbol("projection"),Ue=new Map([["x",dn],["y",dn],["fx",dn],["fy",dn],["r",Za],["color",Gn],["opacity",Qa],["symbol",mu],["length",Ka],["projection",Og]]);function e8(e){return e===dn||e===Og}function t8(e){return e===dn||e===Za||e===Ka||e===Qa}const n8=Math.sqrt(3),r8=2/n8,i8={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*r8,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},bc=new Map([["asterisk",Qb],["circle",_a],["cross",Jb],["diamond",tg],["diamond2",ng],["hexagon",i8],["plus",rg],["square",ig],["square2",ag],["star",sg],["times",cg],["triangle",ug],["triangle2",lg],["wye",fg]]);function gc(e){return e&&typeof e.draw=="function"}function a8(e){return gc(e)?!0:typeof e!="string"?!1:bc.has(e.toLowerCase())}function yc(e){if(e==null||gc(e))return e;const t=bc.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function o8(e){if(e==null||gc(e))return[void 0,e];if(typeof e=="string"){const t=bc.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function pu({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=qg(e)),t!=null&&!bi(t)&&(r=tl(r,wc(t))),n&&(r=tl(r,Gg))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||bi(t))&&{sort:t},transform:tl(r,o)}}function yi({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=qg(e)),t!=null&&!bi(t)&&(r=nl(r,wc(t))),n&&(r=nl(r,Gg))),{...i,...(t===null||bi(t))&&{sort:t},initializer:nl(r,a)}}function tl(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,$t(n),r,i)}}function nl(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,s,u,l,f,c;return{data:s=n,facets:u=r,channels:o}=e.call(this,n,r,i,...a),{data:f=s,facets:c=u,channels:l}=t.call(this,s,u,{...i,...o},...a),{data:f,facets:c,channels:{...o,...l}}}}function s8(e,t){return(e.initializer!=null?yi:pu)(e,t)}function qg(e){return(t,n)=>{const r=rt(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function Gg(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function u8(e,{sort:t,...n}={}){return{...(cu(e)&&e.channel!==void 0?yi:s8)(n,wc(e)),sort:bi(t)?t:null}}function wc(e){return(typeof e=="function"&&e.length!==1?l8:f8)(e)}function l8(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function f8(e){let t,n;({channel:t,value:e,order:n}={...Xa(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?xs:tn),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=tn;break;case"descending":n=xs;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let s;if(t===void 0)s=rt(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(s=o[t],!s)return{};s=s.value}const u=(l,f)=>n(s[l],s[f]);return{data:i,facets:a.map(l=>l.slice().sort(u))}}}function _o(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function c8(e,t,n=Ug){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",y8]),t.href!=null&&e.href===void 0&&r.push(["href",vc]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?h8(i):n(i,a,t))}function Ug(e,t,n,r=zg){let i;ir(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,s]=Ps(a.label);let u;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){a.initialize(l),u=s([])},scope(l,f){a.scope(l,f)},reduce(l,f){u.push(a.reduce(l,f))}}}function h8(e){return{name:e,initialize(){},scope(){},reduce(){}}}function zg(e,t,n,r=_c){const i=U9(e,n),a=r(t,i);let o,s;return{label:Br(a===Ss?null:i,a.label),initialize(u){o=i===void 0?u:rt(u,i),a.scope==="data"&&(s=a.reduceIndex(qn(u),o))},scope(u,l){a.scope===u&&(s=a.reduceIndex(l,o))},reduce(u,l){return a.scope==null?a.reduceIndex(u,o,l):a.reduceIndex(u,o,s,l)}}}function _d(e,t){return t?fa(Bs(e,n=>t[n]),cc):[[,e]]}function _c(e,t,n=d8){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&ir(e))return b8(e);if(typeof e=="function")return g8(e);if(/^p\d{2}$/i.test(e))return kn(F9(e));switch(`${e}`.toLowerCase()){case"first":return vc;case"last":return w8;case"identity":return Hg;case"count":return Ss;case"distinct":return _8;case"sum":return t==null?Ss:v8;case"proportion":return Md(t,"data");case"proportion-facet":return Md(t,"facet");case"deviation":return kn(Fs);case"min":return kn(Ln);case"min-index":return kn(j3);case"max":return kn(Ut);case"max-index":return kn(Y3);case"mean":return vd(qs);case"median":return vd(xl);case"variance":return kn(Tf);case"mode":return kn(Q3)}return n(e)}function d8(e){throw new Error(`invalid reduce: ${e}`)}function m8(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function p8(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>tn(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function b8(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function g8(e){return{reduceIndex(t,n,r){return e(mc(n,t),r)}}}function kn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function vd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return St(n)?new Date(r):r}}}const Hg={reduceIndex(e,t){return mc(t,e)}},vc={reduceIndex(e,t){return t[e[0]]}},y8={reduceIndex(e,t){const r=fa(Jr(e,a=>a.length,a=>t[a]),of),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[`… ${a.length.toLocaleString("en-US")} more`,Zn(a,of)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},w8={reduceIndex(e,t){return t[e[e.length-1]]}},Ss={label:"Frequency",reduceIndex(e){return e.length}},_8={label:"Distinct",reduceIndex(e,t){const n=new Rs;for(const r of e)n.add(t[r]);return n.size}},v8=kn(Zn);function Md(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Zn(n,a=>r[a])/i}}function Pa(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=Br(r)},s){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),Wg(s,{scale:t,type:n,value:rt(e,r),label:o,filter:i,hint:a})}function M8(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Pa(t,r,n)]))}function x8(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Ye(a,o)]}));return n.channels=e,n}function Wg(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&el(r,hu)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&el(r,Z9)?null:"opacity";break;case"symbol":n!==!0&&el(r,a8)?(t.scale=null,t.value=Ye(r,yc)):t.scale="symbol";break;default:t.scale=Ue.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ue.has(n))throw new Error(`unknown scale: ${n}`);return t}function P8(e,t,n,r,i){const{order:a,reverse:o,reduce:s=!0,limit:u}=i;for(const l in i){if(!Ue.has(l))continue;let{value:f,order:c=a,reverse:h=o,reduce:d=s,limit:m=u}=Xa(i[l]);const p=f==null?void 0:f.startsWith("-");if(p&&(f=f.slice(1)),c=c===void 0?p!==(f==="width"||f==="height")?Yg:Vg:E8(c),d==null||d===!1)continue;const g=l==="fx"||l==="fy"?A8(t,r[l]):S8(n,l);if(!g)throw new Error(`missing channel for scale: ${l}`);const y=g.value,[b=0,v=1/0]=ar(m)?m:m<0?[m]:[0,m];if(f==null)g.domain=()=>{let w=Array.from(new Rs(y));return h&&(w=w.reverse()),(b!==0||v!==1/0)&&(w=w.slice(b,v)),w};else{const w=f==="data"?e:f==="height"?xd(n,"y1","y2"):f==="width"?xd(n,"x1","x2"):ff(n,f,f==="y"?"y2":f==="x"?"x2":void 0),M=_c(d===!0?"max":d,w);g.domain=()=>{let _=G3(qn(y),P=>M.reduceIndex(P,w),P=>y[P]);return c&&_.sort(c),h&&_.reverse(),(b!==0||v!==1/0)&&(_=_.slice(b,v)),_.map(cc)}}}}function S8(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function A8(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const s of e[a])i[s]=o}return t}function xd(e,t,n){const r=ff(e,t),i=ff(e,n);return Ye(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function ff(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function E8(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return Vg;case"descending":return Yg}throw new Error(`invalid order: ${e}`)}function Vg([e,t],[n,r]){return tn(t,r)||tn(e,n)}function Yg([e,t],[n,r]){return xs(t,r)||tn(e,n)}function Pd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function k8(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const C8=k8(e=>new Intl.NumberFormat(e));function T8(e="en-US"){const t=C8(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function $8(e){return P9(e,"Invalid Date")}function D8(e="en-US"){const t=T8(e);return n=>(n instanceof Date?$8:typeof n=="number"?t:bt)(n)}const Nr=D8();let cf=0,hf;function N8(){const e=cf;return cf=0,hf=void 0,e}function Xn(e){e!==hf&&(hf=e,console.warn(e),++cf)}const Mt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let L8=0;function Sd(){return`plot-clip-${++L8}`}function I8(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:s,fillOpacity:u,stroke:l,strokeWidth:f,strokeOpacity:c,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:g,opacity:y,mixBlendMode:b,imageFilter:v,paintOrder:w,pointerEvents:M,shapeRendering:_,channels:P},{ariaLabel:T,fill:D="currentColor",fillOpacity:I,stroke:E="none",strokeOpacity:F,strokeWidth:G,strokeLinecap:$,strokeLinejoin:A,strokeMiterlimit:O,paintOrder:ae}){D===null&&(s=null,u=null),E===null&&(l=null,c=null),vt(D)?!vt(E)&&(!vt(s)||P!=null&&P.fill)&&(E="none"):vt(E)&&(!vt(l)||P!=null&&P.stroke)&&(D="none");const[ie,ne]=Bn(s,D),[H,j]=gt(u,I),[W,K]=Bn(l,E),[se,le]=gt(c,F),[oe,Q]=gt(y);xa(K)||(f===void 0&&(f=G),d===void 0&&(d=$),h===void 0&&(h=A),m===void 0&&!K9(h)&&(m=O),!xa(ne)&&w===void 0&&(w=ae));const[ee,R]=gt(f);return D!==null&&(e.fill=st(ne,"currentColor"),e.fillOpacity=Oi(j,1)),E!==null&&(e.stroke=st(K,"none"),e.strokeWidth=Oi(R,1),e.strokeOpacity=Oi(le,1),e.strokeLinejoin=st(h,"miter"),e.strokeLinecap=st(d,"butt"),e.strokeMiterlimit=Oi(m,4),e.strokeDasharray=st(p,"none"),e.strokeDashoffset=st(g,"0")),e.target=bt(o),e.ariaLabel=bt(T),e.ariaDescription=bt(i),e.ariaHidden=bt(a),e.opacity=Oi(Q,1),e.mixBlendMode=st(b,"normal"),e.imageFilter=st(v,"none"),e.paintOrder=st(w,"normal"),e.pointerEvents=st(M,"auto"),e.shapeRendering=st(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:ie,scale:"auto",optional:!0},fillOpacity:{value:H,scale:"auto",optional:!0},stroke:{value:W,scale:"auto",optional:!0},strokeOpacity:{value:se,scale:"auto",optional:!0},strokeWidth:{value:ee,optional:!0},opacity:{value:oe,scale:"auto",optional:!0}}}function F8(e,t){t&&e.filter(n=>oc(t[n])).append("title").call(B8,t)}function R8(e,t){t&&e.filter(([n])=>oc(t[n])).append("title").call(O8,t)}function B8(e,t){t&&e.text(n=>Nr(t[n]))}function O8(e,t){t&&e.text(([n])=>Nr(t[n]))}function Un(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:s,strokeOpacity:u,strokeWidth:l,opacity:f,href:c}){r&&pe(e,"aria-label",h=>r[h]),a&&pe(e,"fill",h=>a[h]),o&&pe(e,"fill-opacity",h=>o[h]),s&&pe(e,"stroke",h=>s[h]),u&&pe(e,"stroke-opacity",h=>u[h]),l&&pe(e,"stroke-width",h=>l[h]),f&&pe(e,"opacity",h=>f[h]),c&&Kg(e,h=>c[h],t),n||F8(e,i)}function jg(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:s,strokeOpacity:u,strokeWidth:l,opacity:f,href:c}){r&&pe(e,"aria-label",([h])=>r[h]),a&&pe(e,"fill",([h])=>a[h]),o&&pe(e,"fill-opacity",([h])=>o[h]),s&&pe(e,"stroke",([h])=>s[h]),u&&pe(e,"stroke-opacity",([h])=>u[h]),l&&pe(e,"stroke-width",([h])=>l[h]),f&&pe(e,"opacity",([h])=>f[h]),c&&Kg(e,([h])=>c[h],t),n||R8(e,i)}function q8({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:o,opacity:s,href:u},{tip:l}){return[e,l?void 0:t,n,r,i,a,o,s,u].filter(f=>f!==void 0)}function G8(e,t,n){const r=Bs(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Xn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Xg(e,t,n,r){const{z:i}=n,{z:a}=r,o=q8(r,n),s=[...t,...o];for(const u of a?G8(e,a,i):[e]){let l,f;e:for(const c of u){for(const h of s)if(!Jn(h[c])){f&&f.push(-1);continue e}if(l===void 0){f&&(yield f),l=o.map(h=>gr(h[c])),f=[c];continue}f.push(c);for(let h=0;h<o.length;++h)if(gr(o[h][c])!==l[h]){yield f,l=o.map(m=>gr(m[c])),f=[c];continue e}}f&&(yield f)}}function Zg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=on(e,"clip",["frame","sphere"])),e}function U8(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:s,marginLeft:u,marginRight:l,marginTop:f,marginBottom:c}=n,h=Sd();i=`url(#${h})`,e=Ve("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",u).attr("y",f).attr("width",o-l-u).attr("height",s-f-c)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const s=Sd();i=`url(#${s})`,e.append("clipPath").attr("id",s).append("path").attr("d",js(o)({type:"Sphere"}));break}}pe(e,"aria-label",t.ariaLabel),pe(e,"aria-description",t.ariaDescription),pe(e,"aria-hidden",t.ariaHidden),pe(e,"clip-path",i)}function Wt(e,t,n,r){U8(e,t,n,r),pe(e,"fill",t.fill),pe(e,"fill-opacity",t.fillOpacity),pe(e,"stroke",t.stroke),pe(e,"stroke-width",t.strokeWidth),pe(e,"stroke-opacity",t.strokeOpacity),pe(e,"stroke-linejoin",t.strokeLinejoin),pe(e,"stroke-linecap",t.strokeLinecap),pe(e,"stroke-miterlimit",t.strokeMiterlimit),pe(e,"stroke-dasharray",t.strokeDasharray),pe(e,"stroke-dashoffset",t.strokeDashoffset),pe(e,"shape-rendering",t.shapeRendering),pe(e,"filter",t.imageFilter),pe(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;pe(e,"pointer-events",i)}function Vt(e,t){z8(e,"mix-blend-mode",t.mixBlendMode),pe(e,"opacity",t.opacity)}function Kg(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(si.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(si.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function pe(e,t,n){n!=null&&e.attr(t,n)}function z8(e,t,n){n!=null&&e.style(t,n)}function Dt(e,t,{x:n,y:r},i=Mt,a=Mt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function st(e,t){if((e=bt(e))!==t)return e}function Oi(e,t){if((e=Re(e))!==t)return e}const H8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Mc(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!H8.test(e))throw new Error(`invalid class name: ${e}`);return e}function xc(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Ja({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function Pc(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Zg(n)}}function Ve(e,{document:t}){return ra(Us(e).call(t.documentElement))}const Qg=Math.PI,Pn=2*Qg,Ad=.618;function W8({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let s,u,l="frame";if(ir(e)){let M;if({type:e,domain:u,inset:M,insetTop:n=M!==void 0?M:n,insetRight:r=M!==void 0?M:r,insetBottom:i=M!==void 0?M:i,insetLeft:a=M!==void 0?M:a,clip:l=l,...s}=e,e==null)return}typeof e!="function"&&({type:e}=Jg(e));const{width:f,height:c,marginLeft:h,marginRight:d,marginTop:m,marginBottom:p}=o,g=f-h-d-a-r,y=c-m-p-n-i;if(e=e==null?void 0:e({width:g,height:y,clip:l,...s}),e==null)return;l=V8(l,h,m,f-d,c-p);let b=h+a,v=m+n,w;if(u!=null){const[[M,_],[P,T]]=js(e).bounds(u),D=Math.min(g/(P-M),y/(T-_));D>0?(b-=(D*(M+P)-g)/2,v-=(D*(_+T)-y)/2,w=Kl({point(I,E){this.stream.point(I*D+b,E*D+v)}})):Xn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=b===0&&v===0?e2():Kl({point(M,_){this.stream.point(M+b,_+v)}})),{stream:M=>e.stream(w.stream(l(M)))}}function Jg(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Xt(L6,.7463,.4673);case"albers":return vo(Km,.7463,.4673);case"azimuthal-equal-area":return Xt(I6,4,4);case"azimuthal-equidistant":return Xt(F6,Pn,Pn);case"conic-conformal":return vo(O6,Pn,Pn);case"conic-equal-area":return vo(cs,6.1702,2.9781);case"conic-equidistant":return vo(U6,7.312,3.6282);case"equal-earth":return Xt(H6,5.4133,2.6347);case"equirectangular":return Xt(q6,Pn,Qg);case"gnomonic":return Xt(W6,3.4641,3.4641);case"identity":return{type:e2};case"reflect-y":return{type:Y8};case"mercator":return Xt(R6,Pn,Pn);case"orthographic":return Xt(V6,2,2);case"stereographic":return Xt(Y6,2,2);case"transverse-mercator":return Xt(j6,Pn,Pn);default:throw new Error(`unknown projection type: ${e}`)}}function V8(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return Im(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Xt(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:s})=>{var l,f,c;const u=e();return o!=null&&((l=u.precision)==null||l.call(u,o)),a!=null&&((f=u.rotate)==null||f.call(u,a)),typeof s=="number"&&((c=u.clipAngle)==null||c.call(u,s)),u.scale(Math.min(r/t,i/n)),u.translate([r/2,i/2]),u},aspectRatio:n/t}}function vo(e,t,n){const{type:r,aspectRatio:i}=Xt(e,t,n);return{type:a=>{const{parallels:o,domain:s,width:u,height:l}=a,f=r(a);return o!=null&&(f.parallels(o),s===void 0&&f.fitSize([u,l],{type:"Sphere"})),f},aspectRatio:i}}const e2=Ya({stream:e=>e}),Y8=Ya(Kl({point(e,t){this.stream.point(e,-t)}}));function j8(e,t,n,r){const i=n[e],a=n[t],o=i.length,s=n[e]=new Float64Array(o).fill(NaN),u=n[t]=new Float64Array(o).fill(NaN);let l;const f=r.stream({point(c,h){s[l]=c,u[l]=h}});for(l=0;l<o;++l)f.point(i[l],a[l])}function X8({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(ir(e)&&(e=e.type),e!=null)}function Z8(e){if(typeof(e==null?void 0:e.stream)=="function")return Ad;if(ir(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=Jg(e);if(t)return t}return Ad}}function K8(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,s){t.push(o),n.push(s)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)dr(o,a);return[r,i]}const Q8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],t2=new Map([["accent",g4],["category10",b4],["dark2",y4],["observable10",Q8],["paired",w4],["pastel1",_4],["pastel2",v4],["set1",M4],["set2",x4],["set3",P4],["tableau10",S4]]);function J8(e){return e!=null&&t2.has(`${e}`.toLowerCase())}const Ed=new Map([...t2,["brbg",Sn(Rp,Bp)],["prgn",Sn(Op,qp)],["piyg",Sn(Gp,Up)],["puor",Sn(zp,Hp)],["rdbu",Sn(nf,ps)],["rdgy",Sn(Wp,Vp)],["rdylbu",Sn(rf,bs)],["rdylgn",Sn(Yp,jp)],["spectral",Sn(Xp,Zp)],["burd",kd(nf,ps)],["buylrd",kd(rf,bs)],["blues",et(vb,Mb)],["greens",et(xb,Pb)],["greys",et(Sb,Ab)],["oranges",et($b,Db)],["purples",et(Eb,kb)],["reds",et(Cb,Tb)],["turbo",An(Ob)],["viridis",An(qb)],["magma",An(Gb)],["inferno",An(Ub)],["plasma",An(zb)],["cividis",An(Nb)],["cubehelix",An(Lb)],["warm",An(Ib)],["cool",An(Fb)],["bugn",et(Kp,Qp)],["bupu",et(Jp,eb)],["gnbu",et(tb,nb)],["orrd",et(rb,ib)],["pubu",et(sb,ub)],["pubugn",et(ab,ob)],["purd",et(lb,fb)],["rdpu",et(cb,hb)],["ylgn",et(pb,bb)],["ylgnbu",et(db,mb)],["ylorbr",et(gb,yb)],["ylorrd",et(wb,_b)],["rainbow",Cd(Rb)],["sinebow",Cd(Bb)]]);function et(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Qt(t,n):e[n])}function Sn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Qt(t,n):e[n])}function kd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Qt(r=>t(1-r),n):e[n].slice().reverse())}function An(e){return({length:t})=>Qt(e,Math.max(2,Math.floor(t)))}function Cd(e){return({length:t})=>Qt(e,Math.floor(t)+1).slice(0,-1)}function n2(e){const t=`${e}`.toLowerCase();if(!Ed.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return Ed.get(t)}function bu(e,t){const n=n2(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function eM(e,t="greys"){const n=new Set,[r,i]=bu(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Td=new Map([["brbg",Bp],["prgn",qp],["piyg",Up],["puor",Hp],["rdbu",ps],["rdgy",Vp],["rdylbu",bs],["rdylgn",jp],["spectral",Zp],["burd",e=>ps(1-e)],["buylrd",e=>bs(1-e)],["blues",Mb],["greens",Pb],["greys",Ab],["purples",kb],["reds",Tb],["oranges",Db],["turbo",Ob],["viridis",qb],["magma",Gb],["inferno",Ub],["plasma",zb],["cividis",Nb],["cubehelix",Lb],["warm",Ib],["cool",Fb],["bugn",Qp],["bupu",eb],["gnbu",nb],["orrd",ib],["pubugn",ob],["pubu",ub],["purd",fb],["rdpu",hb],["ylgnbu",mb],["ylgn",bb],["ylorbr",yb],["ylorrd",_b],["rainbow",Rb],["sinebow",Bb]]);function Sc(e){const t=`${e}`.toLowerCase();if(!Td.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Td.get(t)}const tM=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function nM(e){return e!=null&&tM.has(`${e}`.toLowerCase())}const r2=e=>t=>e(1-t),rl=[0,1],$d=new Map([["number",ct],["rgb",kr],["hsl",xv],["hcl",Av],["lab",Pv]]);function i2(e){const t=`${e}`.toLowerCase();if(!$d.has(t))throw new Error(`unknown interpolator: ${t}`);return $d.get(t)}function eo(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:s=o2(e,n),unknown:u,round:l,scheme:f,interval:c,range:h=Ue.get(e)===Za?dM(n,s):Ue.get(e)===Ka?mM(n,s):Ue.get(e)===Qa?rl:void 0,interpolate:d=Ue.get(e)===Gn?f==null&&h!==void 0?kr:Sc(f!==void 0?f:r==="cyclical"?"rainbow":"turbo"):l?Bf:ct,reverse:m}){if(c=Ci(c,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=i2(d)),m=!!m,h!==void 0){const p=(s=$t(s)).length,g=(h=$t(h)).length;if(p!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ws(d,h),h=void 0}}if(d.length===1?(m&&(d=r2(d),m=!1),h===void 0&&(h=Float64Array.from(s,(p,g)=>g/(s.length-1)),h.length===2&&(h=rl)),t.interpolate((h===rl?Ya:Ec)(d))):t.interpolate(d),o){const[p,g]=Rt(s);(p>0||g<0)&&(s=Ma(s),gi(s)!==Math.sign(p)?s[s.length-1]=0:s[0]=0)}return m&&(s=jo(s)),t.domain(s).unknown(u),i&&(t.nice(rM(i,r)),s=t.domain()),h!==void 0&&t.range(h),a&&t.clamp(a),{type:r,domain:s,range:h,scale:t,interpolate:d,interval:c}}function rM(e,t){return e===!0?void 0:typeof e=="number"?e:z9(e,t)}function iM(e,t,n){return eo(e,Xf(),t,n)}function aM(e,t,n){return a2(e,t,{...n,exponent:.5})}function a2(e,t,{exponent:n=1,...r}){return eo(e,bp().exponent(n),t,{...r,type:"pow"})}function oM(e,t,{base:n=10,domain:r=pM(t),...i}){return eo(e,hp().base(n),t,{...i,domain:r})}function sM(e,t,{constant:n=1,...r}){return eo(e,mp().constant(n),t,r)}function uM(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=bM(t),unknown:s,interpolate:u,reverse:l}){return n===void 0&&(n=u!==void 0?Qt(u,i):Ue.get(e)===Gn?bu(a,i):void 0),o.length>0&&(o=gp(o,n===void 0?{length:i}:n).quantiles()),Ac(e,t,{domain:o,range:n,reverse:l,unknown:s})}function lM(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=o2(e,t),unknown:o,interpolate:s,reverse:u}){const[l,f]=Rt(a);let c;return n===void 0?(c=ca(l,f,r),c[0]<=l&&c.splice(0,1),c[c.length-1]>=f&&c.pop(),r=c.length+1,n=s!==void 0?Qt(s,r):Ue.get(e)===Gn?bu(i,r):void 0):(c=Qt(ct(l,f),r+1).slice(1,-1),l instanceof Date&&(c=c.map(h=>new Date(h)))),gi($t(a))<0&&c.reverse(),Ac(e,t,{domain:c,range:n,reverse:u,unknown:o})}function Ac(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Qt(a,n.length+1):Ue.get(e)===Gn?bu(i,n.length+1):void 0,reverse:s}){n=$t(n);const u=gi(n);if(!isNaN(u)&&!fM(n,u))throw new Error(`the ${e} scale has a non-monotonic domain`);return s&&(o=jo(o)),{type:"threshold",scale:yp(u<0?jo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function fM(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=$a(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function cM(e){return{type:"identity",scale:t8(Ue.get(e))?lp():t=>t}}function Sa(e,t=Pg){return e.length?[Ln(e,({value:n})=>n===void 0?n:Ln(n,t)),Ut(e,({value:n})=>n===void 0?n:Ut(n,t))]:[0,1]}function o2(e,t){const n=Ue.get(e);return(n===Za||n===Qa||n===Ka?hM:Sa)(t)}function hM(e){return[0,e.length?Ut(e,({value:t})=>t===void 0?t:Ut(t,Pg)):1]}function dM(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=oi(e,.5,({value:o})=>o===void 0?NaN:oi(o,.25,uu)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/Ut(i);return a<1?i.map(o=>o*a):i}function mM(e,t){const n=xl(e,({value:a})=>a===void 0?NaN:xl(a,Math.abs)),r=t.map(a=>12*a/n),i=60/Ut(r);return i<1?r.map(a=>a*i):r}function pM(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return Sa(e,uu);if(n<0)return Sa(e,sc)}return[1,10]}function bM(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function Ec(e){return(t,n)=>r=>e(t+r*(n-t))}function gu(e,t,n,r,{type:i,nice:a,clamp:o,domain:s=Sa(r),unknown:u,pivot:l=0,scheme:f,range:c,symmetric:h=!0,interpolate:d=Ue.get(e)===Gn?f==null&&c!==void 0?kr:Sc(f!==void 0?f:"rdbu"):ct,reverse:m}){l=+l,s=$t(s);let[p,g]=s;if(s.length>2&&Xn(`Warning: the diverging ${e} scale domain contains extra elements.`),$a(p,g)<0&&([p,g]=[g,p],m=!m),p=Math.min(p,l),g=Math.max(g,l),typeof d!="function"&&(d=i2(d)),c!==void 0&&(d=d.length===1?Ec(d)(...c):Ws(d,c)),m&&(d=r2(d)),h){const y=n.apply(l),b=y-n.apply(p),v=n.apply(g)-y;b<v?p=n.invert(y-v):b>v&&(g=n.invert(y+b))}return t.domain([p,l,g]).unknown(u).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,g],pivot:l,interpolate:d,scale:t}}function gM(e,t,n){return gu(e,Np(),vM,t,n)}function yM(e,t,n){return s2(e,t,{...n,exponent:.5})}function s2(e,t,{exponent:n=1,...r}){return gu(e,Fp().exponent(n=+n),PM(n),t,{...r,type:"diverging-pow"})}function wM(e,t,{base:n=10,pivot:r=1,domain:i=Sa(t,r<0?sc:uu),...a}){return gu(e,Lp().base(n=+n),MM,t,{domain:i,pivot:r,...a})}function _M(e,t,{constant:n=1,...r}){return gu(e,Ip().constant(n=+n),SM(n),t,r)}const vM={apply(e){return e},invert(e){return e}},MM={apply:Math.log,invert:Math.exp},xM={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function PM(e){return e===.5?xM:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function SM(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function u2(e,t,n,r){return eo(e,t,n,r)}function AM(e,t,n){return u2(e,m4(),t,n)}function EM(e,t,n){return u2(e,p4(),t,n)}const to=Symbol("ordinal");function l2(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:s,hint:u}){return i=Ci(i,r),a===void 0&&(a=c2(n,i,e)),(r==="categorical"||r===to)&&(r="ordinal"),s&&(a=jo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:u,interval:i}}function kM(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:s,...u}){r=Ci(r,n),i===void 0&&(i=c2(t,r,e));let l;if(Ue.get(e)===mu)l=$M(t),a=a===void 0?DM(l):Ye(a,yc);else if(Ue.get(e)===Gn&&(a===void 0&&(n==="ordinal"||n===to)&&(a=eM(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const f=Sc(o),c=a[0],h=a[1]-a[0];a=({length:d})=>Qt(m=>f(c+h*m),d)}else a=n2(o);if(s===Jl)throw new Error(`implicit unknown on ${e} scale is not supported`);return l2(e,jf().unknown(s),t,{...u,type:n,domain:i,range:a,hint:l})}function CM(e,t,{align:n=.5,padding:r=.5,...i}){return f2(X6().align(n).padding(r),t,i,e)}function TM(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return f2(Qs().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function f2(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=l2(r,e,t,n),e.round=i,e}function c2(e,t,n){const r=new Rs;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Rt(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Ue.get(n)===dn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return fa(r,tn)}function Dd(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function $M(e){return{fill:Dd(e,"fill"),stroke:Dd(e,"stroke")}}function DM(e){return vt(e.fill)?O4:B4}function df(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:s,nice:u,clamp:l,zero:f,align:c,padding:h,projection:d,facet:{label:m=t}={},...p}={}){const g={};for(const[y,b]of e){const v=p[y],w=RM(y,b,{round:Ue.get(y)===dn?s:void 0,nice:u,clamp:l,zero:f,align:c,padding:h,projection:d,...v});if(w){let{label:M=y==="fx"||y==="fy"?m:t,percent:_,transform:P,inset:T,insetTop:D=T!==void 0?T:y==="y"?r:0,insetRight:I=T!==void 0?T:y==="x"?i:0,insetBottom:E=T!==void 0?T:y==="y"?a:0,insetLeft:F=T!==void 0?T:y==="x"?o:0}=v||{};if(P==null)P=void 0;else if(typeof P!="function")throw new Error("invalid scale transform; not a function");w.percent=!!_,w.label=M===void 0?LM(b,w):M,w.transform=P,y==="x"||y==="fx"?(w.insetLeft=+F,w.insetRight=+I):(y==="y"||y==="fy")&&(w.insetTop=+D,w.insetBottom=+E),g[y]=w}}return g}function Nd(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:s,label:u}=i;t[r]=UM(i),n[r]=a,a.type=o,s!=null&&(a.interval=s),u!=null&&(a.label=u)}return n}function NM(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?kc(t):t;i&&Ld(i,o),a&&Id(a,o);const s=i||a?h2(e,t):t;n&&Ld(n,s),r&&Id(r,s)}function LM(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Or(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function IM(e){return Math.sign(gi(e.domain()))*Math.sign(gi(e.range()))}function kc(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:s,marginRight:u,marginBottom:l,marginLeft:f}}=e;return{marginTop:Math.max(t,s),marginRight:Math.max(n,u),marginBottom:Math.max(r,l),marginLeft:Math.max(i,f),width:a,height:o}}function h2({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:u}=kc(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:s,height:t?t.scale.bandwidth()+r+a:u,facet:{width:s,height:u}}}function Ld(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,s=a+n,u=i-o-r;e.range=[s,Math.max(s,u)],Or(e)||(e.range=m2(e)),e.scale.range(e.range)}d2(e)}function Id(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,s=a+n,u=i-o-r;e.range=[Math.max(s,u),s],Or(e)?e.range.reverse():e.range=m2(e),e.scale.range(e.range)}d2(e)}function d2(e){e.round===void 0&&OM(e)&&FM(e)<=30&&e.scale.round(!0)}function FM({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,s=Math.abs(r-n)/Math.max(1,o+a*2);return(s-Math.floor(s))*o}function m2(e){const t=e.scale.domain().length+p2(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function RM(e,t=[],n={}){const r=BM(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Or({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(St)?Xn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Wr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Wr(r)}".`):i.some(V9)?Xn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Wr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Wr(r)}".`):i.some(Y9)&&Xn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Wr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Wr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Mo(t,n,hn);break;case"identity":switch(Ue.get(e)){case dn:n=Mo(t,n,hn);break;case mu:n=Mo(t,n,qM);break}break;case"utc":case"time":n=Mo(t,n,R9);break}switch(r){case"diverging":return gM(e,t,n);case"diverging-sqrt":return yM(e,t,n);case"diverging-pow":return s2(e,t,n);case"diverging-log":return wM(e,t,n);case"diverging-symlog":return _M(e,t,n);case"categorical":case"ordinal":case to:return kM(e,t,n);case"cyclical":case"sequential":case"linear":return iM(e,t,n);case"sqrt":return aM(e,t,n);case"threshold":return Ac(e,t,n);case"quantile":return uM(e,t,n);case"quantize":return lM(e,t,n);case"pow":return a2(e,t,n);case"log":return oM(e,t,n);case"symlog":return sM(e,t,n);case"utc":return EM(e,t,n);case"time":return AM(e,t,n);case"point":return CM(e,t,n);case"band":return TM(e,t,n);case"identity":return cM(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Wr(e){return typeof e=="symbol"?e.description:e}function Fd(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Rd={toString:()=>"projection"};function BM(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:s}){if(n=Fd(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&s!=null&&(n=Rd);for(const l of t){const f=Fd(l.type);if(f!==void 0){if(n===void 0)n=f;else if(n!==f)throw new Error(`scale incompatible with channel: ${n} !== ${f}`)}}if(n===Rd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const u=Ue.get(e);if(u===Za)return"sqrt";if(u===Qa||u===Ka)return"linear";if(u===mu)return"ordinal";if((r||i||[]).length>2)return il(u);if(r!==void 0){if(wd(r))return il(u);if(St(r))return"utc"}else{const l=t.map(({value:f})=>f).filter(f=>f!==void 0);if(l.some(wd))return il(u);if(l.some(St))return"utc"}if(u===Gn){if(o!=null||nM(a))return"diverging";if(J8(a))return"categorical"}return"linear"}function il(e){switch(e){case dn:return"point";case Gn:return to;default:return"ordinal"}}function Or({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===to}function p2({type:e}){return e==="threshold"}function OM({type:e}){return e==="point"||e==="band"}function wi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function Mo(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function qM(e){return Ye(e,yc)}function GM(e){return t=>{if(!Ue.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function UM({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:s,pivot:u}){if(t==="identity")return{type:"identity",apply:f=>f,invert:f=>f};const l=e.unknown?e.unknown():void 0;return{type:t,domain:Ma(n),...r!==void 0&&{range:Ma(r)},...o!==void 0&&{transform:o},...s&&{percent:s},...l!==void 0&&{unknown:l},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...u!==void 0&&{pivot:u,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:f=>e(f),...e.invert&&{invert:f=>e.invert(f)}}}function zM(e,t,n={}){let r=.5-Mt,i=.5+Mt,a=.5+Mt,o=.5-Mt;for(const{marginTop:p,marginRight:g,marginBottom:y,marginLeft:b}of t)p>r&&(r=p),g>i&&(i=g),y>a&&(a=y),b>o&&(o=b);let{margin:s,marginTop:u=s!==void 0?s:r,marginRight:l=s!==void 0?s:i,marginBottom:f=s!==void 0?s:a,marginLeft:c=s!==void 0?s:o}=n;u=+u,l=+l,f=+f,c=+c;let{width:h=640,height:d=HM(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,u-r+f-a)}=n;h=+h,d=+d;const m={width:h,height:d,marginTop:u,marginRight:l,marginBottom:f,marginLeft:c};if(e.fx||e.fy){let{margin:p,marginTop:g=p!==void 0?p:u,marginRight:y=p!==void 0?p:l,marginBottom:b=p!==void 0?p:f,marginLeft:v=p!==void 0?p:c}=n.facet??{};g=+g,y=+y,b=+b,v=+v,m.facet={marginTop:g,marginRight:y,marginBottom:b,marginLeft:v}}return m}function HM({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:s,marginRightDefault:u,marginBottomDefault:l,marginLeftDefault:f}){const c=n?n.scale.domain().length:1,h=Z8(i);if(h){const m=r?r.scale.domain().length:1,p=(1.1*c-.1)/(1.1*m-.1)*h,g=Math.max(.1,Math.min(10,p));return Math.round((o-f-u)*g+s+l)}const d=t?Or(t)?t.scale.domain().length:Math.max(7,17/c):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=Bd("y",t)/(Bd("x",e)*a),p=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,y=p*(o-f-u)-e.insetLeft-e.insetRight;return(m*y+t.insetTop+t.insetBottom)/g+s+l}return!!(t||n)*Math.max(1,Math.min(60,d*c))*20+!!r*30+60}function Bd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const s=t.scale.exponent();i=u=>Math.pow(u,s);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Rt(r);return Math.abs(i(o)-i(a))}function WM(e,t){const{fx:n,fy:r}=df(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?O3(i,a).map(([o,s],u)=>({x:o,y:s,i:u})):i?i.map((o,s)=>({x:o,i:s})):a?a.map((o,s)=>({y:o,i:s})):void 0}function VM(e,{x:t,y:n}){return t&&(t=mf(t)),n&&(n=mf(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Cc(e,{fx:t,fy:n}){const r=qn(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Jr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Jr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Jr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function YM(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function jM(e){const t=[],n=new Uint32Array(Zn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const XM=new Map([["top",al],["right",ul],["bottom",ol],["left",sl],["top-left",xo(al,sl)],["top-right",xo(al,ul)],["bottom-left",xo(ol,sl)],["bottom-right",xo(ol,ul)],["top-empty",QM],["right-empty",tx],["bottom-empty",JM],["left-empty",ex],["empty",nx]]);function ZM(e){if(e==null)return null;const t=XM.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Od=new WeakMap;function mf(e){let t=Od.get(e);return t||Od.set(e,t=new Sr(Ye(e,(n,r)=>[n,r]))),t}function or(e,t){return mf(e).get(t)}function KM(e,t,n){return t=gr(t),n=gr(n),e.find(r=>Object.is(gr(r.x),t)&&Object.is(gr(r.y),n))}function yu(e,t,n){var r;return(r=KM(e,t,n))==null?void 0:r.empty}function al(e,{y:t},{y:n}){return t?or(t,n)===0:!0}function ol(e,{y:t},{y:n}){return t?or(t,n)===t.length-1:!0}function sl(e,{x:t},{x:n}){return t?or(t,n)===0:!0}function ul(e,{x:t},{x:n}){return t?or(t,n)===t.length-1:!0}function QM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,r);if(a>0)return yu(e,n,t[a-1])}function JM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,r);if(a<t.length-1)return yu(e,n,t[a+1])}function ex(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,n);if(a>0)return yu(e,t[a-1],r)}function tx(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,n);if(a<t.length-1)return yu(e,t[a+1],r)}function nx(e,t,{empty:n}){return n}function xo(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function ll(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class yt{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:s,fy:u,sort:l,dx:f=0,dy:c=0,margin:h=0,marginTop:d=h,marginRight:m=h,marginBottom:p=h,marginLeft:g=h,clip:y=i==null?void 0:i.clip,channels:b,tip:v,render:w}=r;if(this.data=t,this.sort=bi(l)?l:null,this.initializer=yi(r).initializer,this.transform=this.initializer?r.transform:pu(r).transform,a===null||a===!1?this.facet=null:(this.facet=on(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Ro&&typeof s=="string"?[s]:s,this.fy=t===Ro&&typeof u=="string"?[u]:u),this.facetAnchor=ZM(o),n=Bg(n),b!==void 0&&(n={...rx(b),...n}),i!==void 0&&(n={...I8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([M,_])=>{if(cu(_.value)){const{value:P,label:T=_.label,scale:D=_.scale}=_.value;_={..._,label:T,scale:D,value:P}}if(t===Ro&&typeof _.value=="string"){const{value:P}=_;_={..._,value:[P]}}return[M,_]}).filter(([M,{value:_,optional:P}])=>{if(_!=null)return!0;if(P)return!1;throw new Error(`missing channel value: ${M}`)})),this.dx=+f,this.dy=+c,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+g,this.clip=Zg(y),this.tip=ix(v),this.facet==="super"){if(s||u)throw new Error("super-faceting cannot use fx or fy");for(const M in this.channels){const{scale:_}=n[M];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=g2(w,this.render))}initialize(t,n,r){let i=$t(this.data);t===void 0&&i!=null&&(t=[qn(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=$t(i)),t!==void 0&&(t.original=a);const o=M8(this.channels,i);return this.sort!=null&&P8(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=Jn}=n[i];if(a!==null){const o=r[i];t=t.filter(s=>a(o[s]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&j8(i,a,n,r.projection)}}scale(t,n,r){const i=x8(t,n);return r.projection&&this.project(t,i,r),i}}function b2(...e){return e.plot=yt.prototype.plot,e}function g2(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,s){return e.call(this,n,r,i,a,o,(u,l,f,c,h)=>t.call(this,u,l,f,c,h,s))}}function rx(e){return Object.fromEntries(Object.entries(Bg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Xa(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function ix(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?on(e,"tip",["x","y","xy"]):e}function wu(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:ir(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const qd=new WeakMap;function Tc(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:s,render:u,...l}={}){return o=+o,i!=null&&(n??(n=null),s={...s,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),s={...s,py:{value:a,scale:"y"}}),{x:n,y:r,channels:s,...l,render:g2(function(f,c,h,d,m,p){m={...m,pointerSticky:!1};const g=m.ownerSVGElement,{data:y}=m.getMarkState(this);let b=qd.get(g);b||qd.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(K)-1;const{x:w,y:M,fx:_,fy:P}=c;let T=_?_(f.fx)-d.marginLeft:0,D=P?P(f.fy)-d.marginTop:0;w!=null&&w.bandwidth&&(T+=w.bandwidth()/2),M!=null&&M.bandwidth&&(D+=M.bandwidth()/2);const I=f.fi!=null;let E;if(I){let Q=b.facetStates;Q||(b.facetStates=Q=new Map),E=Q.get(this),E||Q.set(this,E=new Map)}const[F,G]=Ja(this,d),{px:$,py:A}=h,O=$?Q=>$[Q]:w2(h,F),ae=A?Q=>A[Q]:_2(h,G);let ie,ne,H,j;function W(Q,ee){if(I)if(j&&(j=cancelAnimationFrame(j)),Q==null)E.delete(f.fi);else{E.set(f.fi,ee),j=requestAnimationFrame(()=>{j=null;for(const[R,V]of E)if(V<ee||V===ee&&R<f.fi){Q=null;break}K(Q)});return}K(Q)}function K(Q){if(ie===Q&&H===b.sticky)return;ie=Q,H=m.pointerSticky=b.sticky;const ee=ie==null?[]:[ie];I&&(ee.fx=f.fx,ee.fy=f.fy,ee.fi=f.fi);const R=p(ee,c,h,d,m);if(ne){if(I){const V=ne.parentNode,J=ne.getAttribute("transform"),N=R.getAttribute("transform");J?R.setAttribute("transform",J):R.removeAttribute("transform"),N?V.setAttribute("transform",N):V.removeAttribute("transform"),R.removeAttribute("aria-label"),R.removeAttribute("aria-description"),R.removeAttribute("aria-hidden")}ne.replaceWith(R)}return b.roots[v]=ne=R,ie==null&&(E==null?void 0:E.size)>1||m.dispatchValue(ie==null?null:y[ie]),R}function se(Q){if(b.sticky||Q.pointerType==="mouse"&&Q.buttons===1)return;let[ee,R]=W_(Q);ee-=T,R-=D;const V=ee<d.marginLeft||ee>d.width-d.marginRight?1:e,J=R<d.marginTop||R>d.height-d.marginBottom?1:t;let N=null,fe=o*o;for(const re of f){const ce=V*(O(re)-ee),Se=J*(ae(re)-R),Le=ce*ce+Se*Se;Le<=fe&&(N=re,fe=Le)}if(N!=null&&(e!==1||t!==1)){const re=O(N)-ee,ce=ae(N)-R;fe=re*re+ce*ce}W(N,fe)}function le(Q){Q.pointerType==="mouse"&&ie!=null&&(b.sticky&&b.roots.some(ee=>ee==null?void 0:ee.contains(Q.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(ee=>ee(null))):(b.sticky=!0,K(ie)),Q.stopImmediatePropagation()))}function oe(Q){Q.pointerType==="mouse"&&(b.sticky||W(null))}return g.addEventListener("pointerenter",se),g.addEventListener("pointermove",se),g.addEventListener("pointerdown",le),g.addEventListener("pointerleave",oe),K(null)},u)}}function y2(e){return Tc(1,1,e)}function ax(e){return Tc(1,.01,e)}function Gd(e){return Tc(.01,1,e)}function w2({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function _2({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function v2(e){return Or(e)&&e.interval===void 0?void 0:"tabular-nums"}function ox(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:s=0,marginBottom:u=16+r,marginLeft:l=0,style:f,ticks:c=(i-l-s)/64,tickFormat:h,fontVariant:d=v2(e),round:m=!0,opacity:p,className:g}=t;const y=Pc(t);g=Mc(g),p=gt(p)[1],h===null&&(h=()=>null);const b=Ve("svg",y).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(F=>F.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(xc,f);let v=F=>F.selectAll(".tick line").attr("y1",o+u-a),w;const M=m?(F,G)=>F.rangeRound(G):(F,G)=>F.range(G),{type:_,domain:P,range:T,interpolate:D,scale:I,pivot:E}=e;if(D){const F=T===void 0?D:Ws(D.length===1?Ec(D):D,T);w=M(I.copy(),Qt(ct(l,i-s),Math.min(P.length+(E!==void 0),T===void 0?1/0:T.length)));const G=256,$=y.document.createElement("canvas");$.width=G,$.height=1;const A=$.getContext("2d");for(let O=0,ae=G-1;O<G;++O)A.fillStyle=F(O/ae),A.fillRect(O,0,1,1);b.append("image").attr("opacity",p).attr("x",l).attr("y",o).attr("width",i-l-s).attr("height",a-o-u).attr("preserveAspectRatio","none").attr("xlink:href",$.toDataURL())}else if(_==="threshold"){const F=P,G=h===void 0?$=>$:typeof h=="string"?Ei(h):h;w=M(Xf().domain([-1,T.length-1]),[l,i-s]),b.append("g").attr("fill-opacity",p).selectAll().data(T).enter().append("rect").attr("x",($,A)=>w(A-1)).attr("y",o).attr("width",($,A)=>w(A)-w(A-1)).attr("height",a-o-u).attr("fill",$=>$),c=Ye(F,($,A)=>A),h=$=>G(F[$],$)}else w=M(Qs().domain(P),[l,i-s]),b.append("g").attr("fill-opacity",p).selectAll().data(P).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",a-o-u).attr("fill",I),v=()=>{};return b.append("g").attr("transform",`translate(0,${a-u})`).call(uw(w).ticks(Array.isArray(c)?null:c,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(c)?c:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",st(d,"normal")).call(v).call(F=>F.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const M2=Math.PI/180;function no(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=fl(n),e.markerMid=fl(r),e.markerEnd=fl(i)}function fl(e){if(e==null||e===!1)return null;if(e===!0)return zd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Ud("auto");case"arrow-reverse":return Ud("auto-start-reverse");case"dot":return sx;case"circle":case"circle-fill":return zd;case"circle-stroke":return ux;case"tick":return cl("auto");case"tick-x":return cl(90);case"tick-y":return cl(0)}throw new Error(`invalid marker: ${e}`)}function Ud(e){return(t,n)=>Ve("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function sx(e,t){return Ve("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function zd(e,t){return Ve("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function ux(e,t){return Ve("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function cl(e){return(t,n)=>Ve("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let lx=0;function _u(e,t,{stroke:n},r){return x2(e,t,n&&(i=>n[i]),r)}function fx(e,t,{stroke:n},r){return x2(e,t,n&&(([i])=>n[i]),r)}function x2(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const s=new Map;function u(l){return function(f){const c=a(f);let h=s.get(l);h||s.set(l,h=new Map);let d=h.get(c);if(!d){const m=this.parentNode.insertBefore(l(c,o),this),p=`plot-marker-${++lx}`;m.setAttribute("id",p),h.set(c,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",u(t)),n&&e.attr("marker-mid",u(n)),r&&e.attr("marker-end",u(r))}function $c({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=S2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function P2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=S2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function S2(e,t,n){return e===void 0&&t===void 0&&n===void 0?Mt?[1,0]:[.5,.5]:[t,n]}function A2(e,{interval:t}){return e={...Xa(e)},e.interval=pc(e.interval===void 0?t:e.interval),e}function E2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:s,interval:u}=A2(i,n);if(s==null||u==null&&!r)return n;const l=Br(i);if(u==null){let d;const m={transform:p=>d||(d=rt(p,s)),label:l};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let f,c;function h(d){return c!==void 0&&d===f?c:c=Ye(rt(f=d,s),m=>u.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:h,label:l}:a,[`${e}2`]:o===void 0?{transform:d=>h(d).map(m=>u.offset(m)),label:l}:o})}function k2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=A2(r,n);return i==null||a==null?n:t({...n,[e]:{label:Br(r),transform:o=>{const s=Ye(rt(o,i),l=>a.floor(l)),u=s.map(l=>a.offset(l));return s.map(St(s)?(l,f)=>l==null||isNaN(l=+l)||(f=u[f],f==null)||isNaN(f=+f)?void 0:new Date((l+f)/2):(l,f)=>l==null||(f=u[f],f==null)?NaN:(+l+ +f)/2)}}})}function cx(e={}){return E2("x",$c,e)}function C2(e={}){return E2("y",P2,e)}function hx(e={}){return k2("x",$c,e)}function dx(e={}){return k2("y",P2,e)}const T2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class mx extends yt{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:s=o,insetBottom:u=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},wu(n,"x"),T2),this.insetTop=Re(s),this.insetBottom=Re(u),no(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y1:l,y2:f}=r,{width:c,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetTop:y,insetBottom:b}=this;return Ve("svg:g",a).call(Wt,this,i,a).call(Dt,this,{x:u&&o},Mt,0).call(v=>v.selectAll().data(t).enter().append("line").call(Vt,this).attr("x1",u?w=>u[w]:(p+c-m)/2).attr("x2",u?w=>u[w]:(p+c-m)/2).attr("y1",l&&!wi(s)?w=>l[w]+y:d+y).attr("y2",f&&!wi(s)?s.bandwidth?w=>f[w]+s.bandwidth()-b:w=>f[w]-b:h-g-b).call(Un,this,r).call(_u,this,r,a)).node()}}class px extends yt{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:s=o,insetLeft:u=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},wu(n,"y"),T2),this.insetRight=Re(s),this.insetLeft=Re(u),no(this,n)}render(t,n,r,i,a){const{x:o,y:s}=n,{y:u,x1:l,x2:f}=r,{width:c,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetLeft:y,insetRight:b}=this;return Ve("svg:g",a).call(Wt,this,i,a).call(Dt,this,{y:u&&s},0,Mt).call(v=>v.selectAll().data(t).enter().append("line").call(Vt,this).attr("x1",l&&!wi(o)?w=>l[w]+y:p+y).attr("x2",f&&!wi(o)?o.bandwidth?w=>f[w]+o.bandwidth()-b:w=>f[w]-b:c-m-b).attr("y1",u?w=>u[w]:(d+h-g)/2).attr("y2",u?w=>u[w]:(d+h-g)/2).call(Un,this,r).call(_u,this,r,a)).node()}}function Dc(e,t){let{x:n=mt,y:r,y1:i,y2:a,...o}=C2(t);return[i,a]=$2(r,i,a),new mx(e,{...o,x:n,y1:i,y2:a})}function As(e,t){let{y:n=mt,x:r,x1:i,x2:a,...o}=cx(t);return[i,a]=$2(r,i,a),new px(e,{...o,y:n,x1:i,x2:a})}function $2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Nc(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const bx={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},D2="­";class Lc extends yt{constructor(t,n={}){const{x:r,y:i,text:a=ar(t)&&Rg(t)?mt:fu,frameAnchor:o,textAnchor:s=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:u=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:f=1/0,textOverflow:c,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:g,fontWeight:y,rotate:b}=n,[v,w]=gt(b,0),[M,_]=Mx(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:M,optional:!0},rotate:{value:W9(v),optional:!0},text:{value:a,filter:oc,optional:!0}},n,bx),this.rotate=w,this.textAnchor=st(s,"middle"),this.lineAnchor=on(u,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+f,this.textOverflow=N2(c),this.monospace=!!h,this.fontFamily=bt(d),this.fontSize=_,this.fontStyle=bt(p),this.fontVariant=bt(g),this.fontWeight=bt(y),this.frameAnchor=du(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${f}`);this.splitLines=I2(this),this.clipLine=F2(this)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:l,rotate:f,text:c,title:h,fontSize:d}=r,{rotate:m}=this,[p,g]=Ja(this,i);return Ve("svg:g",a).call(Wt,this,i,a).call(L2,this,c,i).call(Dt,this,{x:u&&o,y:l&&s}).call(y=>y.selectAll().data(t).enter().append("text").call(Vt,this).call(gx,this,c,h).attr("transform",Nc`translate(${u?b=>u[b]:p},${l?b=>l[b]:g})${f?b=>` rotate(${f[b]})`:m?` rotate(${m})`:""}`).call(pe,"font-size",d&&(b=>d[b])).call(Un,this,r)).node()}}function N2(e){return e==null?null:on(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function gx(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:s,clipLine:u}=t;e.each(function(l){const f=s(Nr(n[l])??"").map(u),c=f.length,h=i==="top"?.71:i==="bottom"?1-c:(164-c*100)/200;if(c>1){let d=0;for(let m=0;m<c;++m){if(++d,!f[m])continue;const p=this.ownerDocument.createElementNS(si.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(h+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=f[m],this.appendChild(p),d=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=f[0];if(o&&!r&&f[0]!==n[l]){const d=this.ownerDocument.createElementNS(si.svg,"title");d.textContent=n[l],this.appendChild(d)}})}function vu(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ja(t,n)),new Lc(e,{...r,x:t,y:n})}function yx(e,{x:t=mt,...n}={}){return new Lc(e,dx({...n,x:t}))}function wx(e,{y:t=mt,...n}={}){return new Lc(e,hx({...n,y:t}))}function L2(e,t,n){pe(e,"text-anchor",t.textAnchor),pe(e,"font-family",t.fontFamily),pe(e,"font-size",t.fontSize),pe(e,"font-style",t.fontStyle),pe(e,"font-variant",t.fontVariant===void 0?_x(n):t.fontVariant),pe(e,"font-weight",t.fontWeight)}function _x(e){return e&&(j9(e)||St(e))?"tabular-nums":void 0}const vx=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Mx(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),vx.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function xx(e,t,n){const r=[];let i,a=0;for(const[o,s,u]of Px(e)){if(i===void 0&&(i=o),a>i&&n(e,i,s)>t&&(r.push(e.slice(i,a)+(e[a-1]===D2?"-":"")),i=o),u){r.push(e.slice(i,s)),i=void 0;continue}a=s}return r}function*Px(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case D2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Hd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Ic(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ti(e,i))r+=Hd[e[i]]??(B2(e,i)?120:Hd.e);return r}function Fc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ti(e,i))r+=B2(e,i)?126:63;return r}function I2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?Fc:Ic,i=t*100;return a=>xx(a,i,r)}function F2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?Fc:Ic,i=t*100;switch(n){case"clip-start":return a=>Vd(a,i,r,"");case"clip-end":return a=>Wd(a,i,r,"");case"ellipsis-start":return a=>Vd(a,i,r,ni);case"ellipsis-middle":return a=>Sx(a,i,r,ni);case"ellipsis-end":return a=>Wd(a,i,r,ni)}}const ni="…";function _i(e,t,n,r){const i=[];let a=0;for(let o=0,s=0,u=e.length;o<u;o=s){s=Ti(e,o);const l=n(e,o,s);if(a+l>t){for(a+=r;a>t&&o>0;)s=o,o=i.pop(),a-=n(e,o,s);return[o,t-a]}a+=l,i.push(o)}return[-1,0]}function Wd(e,t,n,r){e=e.trim();const i=n(r),[a]=_i(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function Sx(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,s]=_i(e,t/2,n,a),[u]=_i(e,i-t/2-s+a,n,-a);return u<0?r:e.slice(0,o).trimEnd()+r+e.slice(Ti(e,u)).trimStart()}function Vd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=_i(e,i-t+a,n,-a);return o<0?r:r+e.slice(Ti(e,o)).trimStart()}const pf=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Yd=new RegExp("\\p{Extended_Pictographic}","uy");function Ti(e,t){return t+=Ax(e,t)?2:1,kx(e,t)&&(t=pf.lastIndex),Ex(e,t)?Ti(e,t+1):t}function R2(e,t){return e.charCodeAt(t)<128}function Ax(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function Ex(e,t){return e.charCodeAt(t)===8205}function kx(e,t){return R2(e,t)?!1:(pf.lastIndex=t,pf.test(e))}function B2(e,t){return R2(e,t)?!1:(Yd.lastIndex=t,Yd.test(e))}const Cx={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},O2=3.5,Tx=O2*5,q2={draw(e,t,n){const r=t*n/Tx;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},$x={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},Dx=new Map([["arrow",q2],["spike",$x]]);function Nx(e){return e&&typeof e.draw=="function"}function Lx(e){if(Nx(e))return e;const t=Dx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class G2 extends yt{constructor(t,n={}){const{x:r,y:i,r:a=O2,length:o,rotate:s,shape:u=q2,anchor:l="middle",frameAnchor:f}=n,[c,h]=gt(o,12),[d,m]=gt(s,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:c,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,Cx),this.r=+a,this.length=h,this.rotate=m,this.shape=Lx(u),this.anchor=on(l,"anchor",["start","middle","end"]),this.frameAnchor=du(f)}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:l,length:f,rotate:c}=r,{length:h,rotate:d,anchor:m,shape:p,r:g}=this,[y,b]=Ja(this,i);return Ve("svg:g",a).call(Wt,this,i,a).call(Dt,this,{x:u&&o,y:l&&s}).call(v=>v.selectAll().data(t).enter().append("path").call(Vt,this).attr("transform",Nc`translate(${u?w=>u[w]:y},${l?w=>l[w]:b})${c?w=>` rotate(${c[w]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?f?w=>` translate(0,${f[w]})`:` translate(0,${h})`:f?w=>` translate(0,${f[w]/2})`:` translate(0,${h/2})`}`).attr("d",f?w=>{const M=Vn();return p.draw(M,f[w],g),M}:(()=>{const w=Vn();return p.draw(w,h,g),w})()).call(Un,this,r)).node()}}function Ix(e,t={}){const{x:n=mt,...r}=t;return new G2(e,{...r,x:n})}function Fx(e,t={}){const{y:n=mt,...r}=t;return new G2(e,{...r,y:n})}function sr(e,t){return arguments.length<2&&!ar(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Mu({anchor:e}={},t){return e===void 0?t[0]:on(e,"anchor",t)}function U2(e){return Mu(e,["left","right"])}function z2(e){return Mu(e,["right","left"])}function H2(e){return Mu(e,["bottom","top"])}function W2(e){return Mu(e,["top","bottom"])}function V2(){const[e,t]=sr(...arguments);return j2("y",U2(t),e,t)}function Rx(){const[e,t]=sr(...arguments);return j2("fy",z2(t),e,t)}function Y2(){const[e,t]=sr(...arguments);return X2("x",H2(t),e,t)}function Bx(){const[e,t]=sr(...arguments);return X2("fx",W2(t),e,t)}function j2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:u=r,fillOpacity:l=i,textAnchor:f,textStroke:c,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:g,x:y,margin:b,marginTop:v=b===void 0?20:b,marginRight:w=b===void 0?t==="right"?40:0:b,marginBottom:M=b===void 0?20:b,marginLeft:_=b===void 0?t==="left"?40:0:b,label:P,labelAnchor:T,labelArrow:D,labelOffset:I,...E}){return m=Re(m),p=Re(p),g=Re(g),T!==void 0&&(T=on(T,"labelAnchor",["center","top","bottom"])),D=ry(D),b2(m&&!vt(a)?Ox(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:m,tickPadding:p,tickRotate:g,x:y,...E}):null,vt(u)?null:Gx(e,t,n,{fill:u,fillOpacity:l,stroke:c,strokeOpacity:h,strokeWidth:d,textAnchor:f,tickSize:m,tickPadding:p,tickRotate:g,x:y,marginTop:v,marginRight:w,marginBottom:M,marginLeft:_,...E}),!vt(u)&&P!==null?vu([],J2({fill:u,fillOpacity:l,...E},function(F,G,$,A,O){const ae=A[e],{marginTop:ie,marginRight:ne,marginBottom:H,marginLeft:j}=e==="y"&&O.inset||O,W=T??(ae.bandwidth?"center":"top"),K=I??(t==="right"?ne:j)-3;return W==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=W,this.frameAnchor=`${W}-${t}`,this.rotate=0),this.dy=W==="top"?3-ie:W==="bottom"?H-3:0,this.dx=t==="right"?K:-K,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[ny(e,ae,{anchor:t,label:P,labelAnchor:W,labelArrow:D})]}}}})):null)}function X2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:s=1,fill:u=r,fillOpacity:l=i,textAnchor:f,textStroke:c,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:g,y,margin:b,marginTop:v=b===void 0?t==="top"?30:0:b,marginRight:w=b===void 0?20:b,marginBottom:M=b===void 0?t==="bottom"?30:0:b,marginLeft:_=b===void 0?20:b,label:P,labelAnchor:T,labelArrow:D,labelOffset:I,...E}){return m=Re(m),p=Re(p),g=Re(g),T!==void 0&&(T=on(T,"labelAnchor",["center","left","right"])),D=ry(D),b2(m&&!vt(a)?qx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:s,tickSize:m,tickPadding:p,tickRotate:g,y,...E}):null,vt(u)?null:Ux(e,t,n,{fill:u,fillOpacity:l,stroke:c,strokeOpacity:h,strokeWidth:d,textAnchor:f,tickSize:m,tickPadding:p,tickRotate:g,y,marginTop:v,marginRight:w,marginBottom:M,marginLeft:_,...E}),!vt(u)&&P!==null?vu([],J2({fill:u,fillOpacity:l,...E},function(F,G,$,A,O){const ae=A[e],{marginTop:ie,marginRight:ne,marginBottom:H,marginLeft:j}=e==="x"&&O.inset||O,W=T??(ae.bandwidth?"center":"right"),K=I??(t==="top"?ie:H)-3;return W==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${W}`,this.textAnchor=W==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-K:K,this.dx=W==="right"?ne-3:W==="left"?3-j:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[ny(e,ae,{anchor:t,label:P,labelAnchor:W,labelArrow:D})]}}}})):null)}function Ox(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:l=0,insetLeft:f=l,insetRight:c=l,dx:h=0,y:d=e==="y"?void 0:null,...m}){return $i(Fx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:s,y:d,...m,dx:t==="left"?+h-Mt+ +f:+h+Mt-c,anchor:"start",length:u,shape:t==="left"?Zx:Kx})}function qx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:s=t,tickSize:u,inset:l=0,insetTop:f=l,insetBottom:c=l,dy:h=0,x:d=e==="x"?void 0:null,...m}){return $i(Ix,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:s,x:d,...m,dy:t==="bottom"?+h-Mt-c:+h+Mt+ +f,anchor:"start",length:u,shape:t==="bottom"?jx:Xx})}function Gx(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*M2):0),text:u,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:f=o>60?"top":o<-60?"bottom":"middle",fontVariant:c,inset:h=0,insetLeft:d=h,insetRight:m=h,dx:p=0,y:g=e==="y"?void 0:null,...y}){return $i(wx,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:u,textAnchor:l,lineAnchor:f,fontVariant:c,rotate:o,y:g,...y,dx:t==="left"?+p-a-s+ +d:+p+ +a+ +s-m},function(b,v,w,M,_){c===void 0&&(this.fontVariant=ty(b)),u===void 0&&(_.text=ey(b,v,w,M,t))})}function Ux(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:s=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*M2):0),text:u,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:f=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:c,inset:h=0,insetTop:d=h,insetBottom:m=h,dy:p=0,x:g=e==="x"?void 0:null,...y}){return $i(yx,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:u===void 0?null:u,textAnchor:l,lineAnchor:f,fontVariant:c,rotate:o,x:g,...y,dy:t==="bottom"?+p+ +a+ +s-m:+p-a-s+ +d},function(b,v,w,M,_){c===void 0&&(this.fontVariant=ty(b)),u===void 0&&(_.text=ey(b,v,w,M,t))})}function zx(){const[e,t]=sr(...arguments);return Z2("y",U2(t),e,t)}function Hx(){const[e,t]=sr(...arguments);return Z2("fy",z2(t),e,t)}function Wx(){const[e,t]=sr(...arguments);return K2("x",H2(t),e,t)}function Vx(){const[e,t]=sr(...arguments);return K2("fx",W2(t),e,t)}function Z2(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...s}){return $i(As,e,t,`${e}-grid`,n,{y:r,x1:a,x2:o,...Q2(s)})}function K2(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...s}){return $i(Dc,e,t,`${e}-grid`,n,{x:r,y1:a,y2:o,...Q2(s)})}function Q2({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function J2({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:u,shapeRendering:l,clip:f=!1},c){return[,e]=Bn(e),[,t]=gt(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:s,pointerEvents:u,shapeRendering:l,clip:f,initializer:c}}function $i(e,t,n,r,i,a,o){let s;function u(c,h,d,m,p,g){const y=c==null&&(t==="fx"||t==="fy"),{[t]:b}=m;if(!b)throw new Error(`missing scale: ${t}`);const v=b.domain();let{interval:w,ticks:M,tickFormat:_,tickSpacing:P=t==="x"?80:35}=a;if(typeof M=="string"&&iy(b)&&(w=M,M=void 0),M===void 0&&(M=Ci(w,b.type)??Yx(b,P)),c==null){if(ar(M))c=$t(M);else if(Kr(M))c=hl(M,...Rt(v));else if(b.interval){let D=b.interval;if(b.ticks){const[I,E]=Rt(v),F=(E-I)/D[Va];D=pd(D,F/M)??D,c=hl(D,I,E)}else{c=v;const I=c.length;D=pd(D,I/M)??D,D!==b.interval&&(c=hl(D,...Rt(c)))}if(D===b.interval){const I=Math.round(c.length/M);I>1&&(c=c.filter((E,F)=>F%I===0))}}else b.ticks?c=b.ticks(M):c=v;if(!b.ticks&&c.length&&c!==v){const D=new Rs(v);c=c.filter(I=>D.has(I)),c.length||Xn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[qn(c)]:s[t]={scale:t,value:mt}}o==null||o.call(this,b,c,M,_,s);const T=Object.fromEntries(Object.entries(s).map(([D,I])=>[D,{...I,value:rt(c,I.value)}]));return y&&(h=g.filterFacets(c,T)),{data:c,facets:h,channels:T}}const l=yi(a).initializer,f=e(i,yi({...a,initializer:u},l));return i==null?(s=f.channels,f.channels={}):s={},f.ariaLabel=r,f.clip===void 0&&(f.clip=!1),f}function Yx(e,t){const[n,r]=Rt(e.range());return(r-n)/t}function ey(e,t,n,r,i){return{value:Rc(e,t,n,r,i)}}function Rc(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&St(t)?T9(e.type,t,i)??Nr:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Nr:typeof r=="string"?(St(e.domain())?Ha:Ei)(r):Ya(r)}function hl(e,t,n){return e.range(t,e.offset(e.floor(n)))}const jx={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Xx={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Zx={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},Kx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function ty(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function ny(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&iy(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!a)return r;if(a===!0){const o=IM(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function ry(e="auto"){return vt(e)?!1:typeof e=="boolean"?e:on(e,"labelArrow",["auto","up","right","down","left"])}function iy(e){return St(e.domain())}function jd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function Qx(e,{opacity:t,...n}={}){if(!Or(e)&&!p2(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return ay(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",gt(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Jx(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(f=>(f=e.hint)==null?void 0:f.stroke)()!==void 0?e.hint.stroke:vt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...s}={},u){const[c,h]=Bn(t),[d,m]=Bn(r),p=jd(u,c),g=jd(u,d),y=o*o*Math.PI;return n=gt(n)[1],i=gt(i)[1],a=gt(a)[1],ay(e,s,(b,v,w,M)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",M).attr("fill",c==="color"?_=>p.scale(_):h).attr("fill-opacity",n).attr("stroke",d==="color"?_=>g.scale(_):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",_=>{const P=Vn();return e.scale(_).draw(P,y),P}))}function ay(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=v2(e),swatchSize:o=15,swatchWidth:s=o,swatchHeight:u=o,marginLeft:l=0,className:f,style:c,width:h}=t;const d=Pc(t);f=Mc(f),i=Rc(e.scale,e.domain,void 0,i);const m=Ve("div",d).attr("class",`${f}-swatches ${f}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${f}-swatches-columns .${f}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${f}-swatches-columns .${f}-swatch::before) {
  flex-shrink: 0;
}
:where(.${f}-swatches-columns .${f}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${f}-swatch`).call(n,e,s,u).call(g=>g.append("div").attr("class",`${f}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${f}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${f}-swatches-wrap .${f}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${f}-swatch`).call(n,e,s,u).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(g=>g.insert("style","*").text(`:where(.${f}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${f}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",l?`${+l}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",st(a,"normal")).call(xc,c).node()}const bf=new Map([["symbol",Jx],["color",sy],["opacity",tP]]);function eP(e,t,n={}){return(r,i)=>{if(!bf.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return bf.get(r)(e[r],oy(t,n[r],i),a=>e[a])}}function oy({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return Q9(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function sy(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return Qx(e,n);case"ramp":return ox(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function tP({type:e,interpolate:t,...n},{legend:r=!0,color:i=Kn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return sy({type:e,...n,interpolate:nP(i)},{legend:r,...a})}function nP(e){const{r:t,g:n,b:r}=Kn(e)||Kn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function rP(e,t,n){const r=[];for(const[i,a]of bf){const o=n[i];if(o!=null&&o.legend&&i in e){const s=a(e[i],oy(t,e[i],o),u=>e[u]);s!=null&&r.push(s)}}return r}const iP={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},aP={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class oP extends yt{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:s=r,rx:u,ry:l}=t;super(Ro,void 0,t,n==null?iP:aP),this.anchor=Ng(n,"anchor",["top","right","bottom","left"]),this.insetTop=Re(i),this.insetRight=Re(a),this.insetBottom=Re(o),this.insetLeft=Re(s),this.rx=Re(u),this.ry=Re(l)}render(t,n,r,i,a){const{marginTop:o,marginRight:s,marginBottom:u,marginLeft:l,width:f,height:c}=i,{anchor:h,insetTop:d,insetRight:m,insetBottom:p,insetLeft:g,rx:y,ry:b}=this,v=l+g,w=f-s-m,M=o+d,_=c-u-p;return Ve(h?"svg:line":"svg:rect",a).datum(0).call(Wt,this,i,a).call(Vt,this).call(Un,this,r).call(Dt,this,{}).call(h==="left"?P=>P.attr("x1",v).attr("x2",v).attr("y1",M).attr("y2",_):h==="right"?P=>P.attr("x1",w).attr("x2",w).attr("y1",M).attr("y2",_):h==="top"?P=>P.attr("x1",v).attr("x2",w).attr("y1",M).attr("y2",M):h==="bottom"?P=>P.attr("x1",v).attr("x2",w).attr("y1",_).attr("y2",_):P=>P.attr("x",v).attr("y",M).attr("width",w-v).attr("height",_-M).attr("rx",y).attr("ry",b)).node()}}function sP(e){return new oP(e)}const dl={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},uP=new Set(["geometry","href","src","ariaLabel","scales"]);class lP extends yt{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ar(t)&&Rg(t)&&(n={...n,title:mt});const{x:r,y:i,x1:a,x2:o,y1:s,y2:u,anchor:l,preferredAnchor:f="bottom",monospace:c,fontFamily:h=c?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:g,lineHeight:y=1,lineWidth:b=20,frameAnchor:v,format:w,textAnchor:M="start",textOverflow:_,textPadding:P=8,title:T,pointerSize:D=12,pathFilter:I="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:s!=null&&u!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:s,scale:"y",optional:u==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:u,scale:"y",optional:s==null},title:{value:T,optional:!0}},n,dl),this.anchor=lf(l,"anchor"),this.preferredAnchor=lf(f,"preferredAnchor"),this.frameAnchor=du(v),this.textAnchor=st(M,"middle"),this.textPadding=+P,this.pointerSize=+D,this.pathFilter=bt(I),this.lineHeight=+y,this.lineWidth=+b,this.textOverflow=N2(_),this.monospace=!!c,this.fontFamily=bt(h),this.fontSize=Re(d),this.fontStyle=bt(m),this.fontVariant=bt(p),this.fontWeight=bt(g);for(const E in dl)E in this.channels&&(this[E]=dl[E]);this.splitLines=I2(this),this.clipLine=F2(this),this.format={...w}}render(t,n,r,i,a){const o=this,{x:s,y:u,fx:l,fy:f}=n,{ownerSVGElement:c,document:h}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:g}=this,{textPadding:y,pointerSize:b,pathFilter:v}=this,{marginTop:w,marginLeft:M}=i,{x1:_,y1:P,x2:T,y2:D,x:I=_??T,y:E=P??D}=r,F=l?l(t.fx)-M:0,G=f?f(t.fy)-w:0,[$,A]=Ja(this,i),O=w2(r,$),ae=_2(r,A),ie=m?Fc:Ic,ne=ie(ni);let H,j;"title"in r?(H=r.channels,j=mP):(H=dP.call(this,r,n),j=pP);const W=Ve("svg:g",a).call(Wt,this,i,a).call(L2,this).call(Dt,this,{x:I&&s,y:E&&u}).call(le=>le.selectAll().data(t).enter().append("g").attr("transform",oe=>`translate(${Math.round(O(oe))},${Math.round(ae(oe))})`).call(Vt,this).call(oe=>oe.append("path").attr("filter",v)).call(oe=>oe.append("text").each(function(Q){const ee=ra(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const R=j.call(o,Q,t,H,n,r);if(typeof R=="string")for(const V of o.splitLines(R))K(ee,{value:o.clipLine(V)});else{const V=new Set;for(const J of R){const{label:N=""}=J;N&&V.has(N)||(V.add(N),K(ee,J))}}})));function K(le,{label:oe,value:Q,color:ee,opacity:R}){oe??(oe=""),Q??(Q="");const V=ee!=null||R!=null;let J,N=g*100;const[fe]=_i(oe,N,ie,ne);if(fe>=0)oe=oe.slice(0,fe).trimEnd()+ni,J=Q.trim(),Q="";else{(oe||!Q&&!V)&&(Q=" "+Q);const[ce]=_i(Q,N-ie(oe),ie,ne);ce>=0&&(J=Q.trim(),Q=Q.slice(0,ce).trimEnd()+ni)}const re=le.append("tspan").attr("x",0).attr("dy",`${p}em`).text("​");oe&&re.append("tspan").attr("font-weight","bold").text(oe),Q&&re.append(()=>h.createTextNode(Q)),V&&re.append("tspan").text(" ■").attr("fill",ee).attr("fill-opacity",R).style("user-select","none"),J&&re.append("title").text(J)}function se(){const{width:le,height:oe}=i.facet??i;W.selectChildren().each(function(Q){let{x:ee,width:R,height:V}=this.getBBox();R=Math.round(R),V=Math.round(V);let J=d;if(J===void 0){const re=O(Q)+F,ce=ae(Q)+G,Se=re+R+b+y*2<le,Le=re-R-b-y*2>0,ze=ce+V+b+y*2<oe,ke=ce-V-b-y*2>0;J=Se&&Le?ze&&ke?o.preferredAnchor:ke?"bottom":"top":ze&&ke?Se?"left":"right":(Se||Le)&&(ze||ke)?`${ke?"bottom":"top"}-${Se?"left":"right"}`:o.preferredAnchor}const N=this.firstChild,fe=this.lastChild;if(N.setAttribute("d",hP(J,b,y,R,V)),ee)for(const re of fe.childNodes)re.setAttribute("x",-ee);fe.setAttribute("y",`${+fP(J,fe.childNodes.length,p).toFixed(6)}em`),fe.setAttribute("transform",`translate(${cP(J,b,y,R,V)})`)}),W.attr("visibility",null)}return t.length&&(W.attr("visibility","hidden"),c.isConnected?Promise.resolve().then(se):typeof requestAnimationFrame<"u"&&requestAnimationFrame(se)),W.node()}}function uy(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ja(t,n)),new lP(e,{...r,x:t,y:n})}function fP(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function cP(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function hP(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function dP({channels:e},t){var i,a;const n={};let r=this.format;r=Xd(r,e,"x"),r=Xd(r,e,"y"),this.format=r;for(const o in r){const s=r[o];if(!(s===null||s===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const u=Pd(e,o);u&&(n[o]=u)}}for(const o in e){if(o in n||o in r||uP.has(o))continue;const s=Pd(e,o);s&&(n[o]=s)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const s=this.format[o];if(typeof s=="string"){const u=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(St(u)?Ha:Ei)(s)}else if(s===void 0||s===!0){const u=t[o];this.format[o]=u!=null&&u.bandwidth?Rc(u,u.domain()):Nr}}return n}function Xd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([s])=>s===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function mP(e,t,{title:n}){return Nr(n.value[e],e)}function*pP(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:Es(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:Kd(r,n,"x"),value:Zd(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:Kd(r,n,"y"),value:Zd(this.format.y2,n.y1,o,e)};else{const s=o.value[e],u=o.scale;if(!Jn(s)&&u==null)continue;yield{label:Es(r,n,a),value:this.format[a](s,e),color:u==="color"?i[a][e]:null,opacity:u==="opacity"?i[a][e]:null}}}}function Zd(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(n.value[r],r)}`}function Kd(e,t,n){const r=Es(e,t,`${n}1`,n),i=Es(e,t,`${n}2`,n);return r===i?r:`${r}–${i}`}function Es(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function Yt(e={}){var ne;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:s}=e,u=Mc(e.className),l=e.marks===void 0?[]:Jd(e.marks);l.push(...xP(l));const f=vP(t,e),c=new Map;for(const H of l){const j=e0(H,f,e);j&&c.set(H,j)}const h=new Map;f&&qi(h,[f],e),qi(h,c,e);const d=Jd(PP(l,h,e));for(const H of d){const j=e0(H,f,e);j&&c.set(H,j)}l.unshift(...d);let m=WM(h,e);if(m!==void 0){const H=f?ll(m,f):void 0;for(const W of l){if(W.facet===null||W.facet==="super")continue;const K=c.get(W);K!==void 0&&(K.facetsIndex=W.fx!=null||W.fy!=null?ll(m,K):H)}const j=new Set;for(const{facetsIndex:W}of c.values())W==null||W.forEach((K,se)=>{(K==null?void 0:K.length)>0&&j.add(se)});m.forEach(0<j.size&&j.size<m.length?(W,K)=>W.empty=!j.has(K):W=>W.empty=!1);for(const W of l)if(W.facet==="exclude"){const K=c.get(W);K!==void 0&&(K.facetsIndex=jM(K.facetsIndex))}}for(const H of Ue.keys())sf(e[H])&&H!=="fx"&&H!=="fy"&&h.set(H,[]);const p=new Map;for(const H of l){if(p.has(H))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:j,channels:W}=c.get(H)??{},{data:K,facets:se,channels:le}=H.initialize(j,W,e);Bc(le,e),p.set(H,{data:K,facets:se,channels:le})}const g=df(qi(h,p,e),e),y=zM(g,l,e);NM(g,y);const b=Nd(g),{fx:v,fy:w}=b,M=v||w?h2(g,y):y,_=v||w?$P(b,y):y,P=Pc(e),T=P.document,D=Us("svg").call(T.documentElement);let I=D;P.ownerSVGElement=D,P.className=u,P.projection=W8(e,M),P.filterFacets=(H,j)=>ll(m,{channels:j,groups:Cc(H,j)}),P.getMarkState=H=>{const j=p.get(H),W=c.get(H);return{...j,channels:{...j.channels,...W==null?void 0:W.channels}}},P.dispatchValue=H=>{I.value!==H&&(I.value=H,I.dispatchEvent(new Event("input",{bubbles:!0})))};const E=new Set;for(const[H,j]of p)if(H.initializer!=null){const W=H.facet==="super"?_:M,K=H.initializer(j.data,j.facets,j.channels,b,W,P);if(K.data!==void 0&&(j.data=K.data),K.facets!==void 0&&(j.facets=K.facets),K.channels!==void 0){const{fx:se,fy:le,...oe}=K.channels;_P(oe),Object.assign(j.channels,oe);for(const Q of Object.values(oe)){const{scale:ee}=Q;ee!=null&&!e8(Ue.get(ee))&&(ly(Q,e),E.add(ee))}(se!=null||le!=null)&&c.set(H,!0)}}if(E.size){const H=new Map;qi(H,p,e,se=>E.has(se)),qi(h,p,e,se=>E.has(se));const j=TP(df(H,e),g),{scales:W,...K}=Nd(j);Object.assign(g,j),Object.assign(b,K),Object.assign(b.scales,W)}let F,G;m!==void 0&&(F={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},m=VM(m,F),G=YM(v,w,y));for(const[H,j]of p)j.values=H.scale(j.channels,b,P);const{width:$,height:A}=y;ra(D).attr("class",u).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",$).attr("height",A).attr("viewBox",`0 0 ${$} ${A}`).attr("aria-label",o).attr("aria-description",s).call(H=>H.append("style").text(`:where(.${u}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${u} text),
:where(.${u} tspan) {
  white-space: pre;
}`)).call(xc,n);for(const H of l){const{channels:j,values:W,facets:K}=p.get(H);if(m===void 0||H.facet==="super"){let se=null;if(K&&(se=K[0],se=H.filter(se,j,W),se.length===0))continue;const le=H.render(se,b,W,_,P);if(le==null)continue;D.appendChild(le)}else{let se;for(const le of m){if(!(((ne=H.facetAnchor)==null?void 0:ne.call(H,m,F,le))??!le.empty))continue;let oe=null;if(K){const ee=c.has(H);if(oe=K[ee?le.i:0],oe=H.filter(oe,j,W),oe.length===0)continue;!ee&&oe===K[0]&&(oe=G9(oe)),oe.fx=le.x,oe.fy=le.y,oe.fi=le.i}const Q=H.render(oe,b,W,M,P);if(Q!=null){(se??(se=ra(D).append("g"))).append(()=>Q).datum(le);for(const ee of["aria-label","aria-description","aria-hidden","transform"])Q.hasAttribute(ee)&&(se.attr(ee,Q.getAttribute(ee)),Q.removeAttribute(ee))}}se==null||se.selectChildren().attr("transform",G)}}const O=rP(g,P,e),{figure:ae=r!=null||i!=null||a!=null||O.length>0}=e;ae&&(I=T.createElement("figure"),I.className=`${u}-figure`,I.style.maxWidth="initial",r!=null&&I.append(Qd(T,r,"h2")),i!=null&&I.append(Qd(T,i,"h3")),I.append(...O,D),a!=null&&I.append(bP(T,a))),I.scale=GM(b.scales),I.legend=eP(g,P,e);const ie=N8();return ie>0&&ra(D).append("text").attr("x",$).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${ie.toLocaleString("en-US")} warning${ie===1?"":"s"}. Please check the console.`),I}function Qd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function bP(e,t){const n=e.createElement("figcaption");return n.append(t),n}function gP({marks:e=[],...t}={}){return Yt({...t,marks:[...e,this]})}yt.prototype.plot=gP;function Jd(e){return e.flat(1/0).filter(t=>t!=null).map(yP)}function yP(e){return typeof e.render=="function"?e:new wP(e)}class wP extends yt{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Bc(e,t){for(const n in e)ly(e[n],t);return e}function ly(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:s=a?u=>u*100:Fg(o,i)}=t[n]??{};s!=null&&(e.value=Ye(e.value,s),e.transform=!1)}function _P(e){for(const t in e)Wg(t,e[t])}function qi(e,t,n,r=I9){var i,a;for(const{channels:o}of t.values())for(const s in o){const u=o[s],{scale:l}=u;if(l!=null&&r(l))if(l==="projection"){if(!X8(n)){const f=((i=n.x)==null?void 0:i.domain)===void 0,c=((a=n.y)==null?void 0:a.domain)===void 0;if(f||c){const[h,d]=K8(u);f&&ml(e,"x",h),c&&ml(e,"y",d)}}}else ml(e,l,u)}return e}function ml(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function vP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=$t(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=Pa(i,{value:n,scale:"fx"})),r!=null&&(a.fy=Pa(i,{value:r,scale:"fy"})),Bc(a,t);const o=Cc(i,a);return{channels:a,groups:o,data:e.data}}function e0(e,t,n){var u;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=$t(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const f={};return r!=null&&(f.fx=Pa(l,{value:r,scale:"fx"})),i!=null&&(f.fy=Pa(l,{value:i,scale:"fy"})),Bc(f,n),{channels:f,groups:Cc(l,f)}}if(t===void 0)return;const{channels:a,groups:o,data:s}=t;if(e.facet!=="auto"||e.data===s)return{channels:a,groups:o};s.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((u=$t(e.data))==null?void 0:u.length)===s.length&&Xn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function MP(e,t={}){return yi({...t,x:null,y:null},(n,r,i,a,o,s)=>s.getMarkState(e))}function xP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?ax:/^y$/i.test(i)?Gd:y2,r=i(MP(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===Gd?"left":"bottom");const o=uy(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function PP(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:s={},axis:u,grid:l,facet:f={},facet:{axis:c=u,grid:h}=f,x:{axis:d=u,grid:m=d===null?null:l}=i,y:{axis:p=u,grid:g=p===null?null:l}=a,fx:{axis:y=c,grid:b=y===null?null:h}=o,fy:{axis:v=c,grid:w=v===null?null:h}=s}=n;(r||!sf(i)&&!t0("x",e))&&(d=m=null),(r||!sf(a)&&!t0("y",e))&&(p=g=null),t.has("fx")||(y=b=null),t.has("fy")||(v=w=null),d===void 0&&(d=!Ao(e,"x")),p===void 0&&(p=!Ao(e,"y")),y===void 0&&(y=!Ao(e,"fx")),v===void 0&&(v=!Ao(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),y===!0&&(y=d==="top"||d===null?"bottom":"top"),v===!0&&(v=p==="right"||p===null?"left":"right");const M=[];return So(M,w,Hx,s),Po(M,v,Rx,"right","left",f,s),So(M,b,Vx,o),Po(M,y,Bx,"top","bottom",f,o),So(M,g,zx,a),Po(M,p,V2,"left","right",n,a),So(M,m,Wx,i),Po(M,d,Y2,"bottom","top",n,i),M}function Po(e,t,n,r,i,a,o){if(!t)return;const s=SP(t);o=AP(s?r:t,a,o);const{line:u}=o;(n===V2||n===Y2)&&u&&!xa(u)&&e.push(sP(EP(o))),e.push(n(o)),s&&e.push(n({...o,anchor:i,label:null}))}function So(e,t,n,r){!t||xa(t)||e.push(n(kP(t,r)))}function SP(e){return/^\s*both\s*$/i.test(e)}function AP(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:u,fontVariant:l,ariaLabel:f,ariaDescription:c,label:h=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:s,tickRotate:u,fontVariant:l,ariaLabel:f,ariaDescription:c,label:h,labelAnchor:d,labelArrow:m,labelOffset:p}}function EP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function kP(e,{stroke:t=hu(e)?e:void 0,ticks:n=CP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function CP(e){switch(typeof e){case"number":return!0;case"string":return!hu(e)}return ar(e)||typeof(e==null?void 0:e.range)=="function"}function Ao(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function t0(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function TP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function $P({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:s,height:u}=kc(n),l=e&&n0(e),f=t&&n0(t);return{marginTop:t?f[0]:r,marginRight:e?s-l[1]:i,marginBottom:t?u-f[1]:a,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:s,height:u}}function n0(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const DP=new Map([["basis",q4],["basis-closed",G4],["basis-open",U4],["bundle",z4],["bump-x",C4],["bump-y",T4],["cardinal",H4],["cardinal-closed",W4],["cardinal-open",V4],["catmull-rom",Y4],["catmull-rom-closed",j4],["catmull-rom-open",X4],["linear",Wa],["linear-closed",Z4],["monotone-x",K4],["monotone-y",Q4],["natural",J4],["step",e9],["step-after",n9],["step-before",t9]]);function fy(e=Wa,t){if(typeof e=="function")return e;const n=DP.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function cy(e=vi,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?vi:fy(e,t)}function vi(e){return Wa(e)}function NP(e={y:"count"},t={}){[e,t]=FP(e,t);const{x:n,y:r}=t;return IP(RP(n,t,mt),null,null,r,e,$c(t))}function LP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=vc}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function hy(e={}){return LP(NP,"y",wu(e,"x"))}function IP(e,t,n,r,{data:i=Hg,filter:a=Ss,sort:o,reverse:s,...u}={},l={}){e=r0(e),t=r0(t),u=OP(u,l),i=py(i,mt),o=o==null?void 0:dy("sort",o,l),a=a==null?void 0:my("filter",a,l),n!=null&&_o(u,"x","x1","x2")&&(n=null),r!=null&&_o(u,"y","y1","y2")&&(r=null);const[f,c]=En(e),[h,d]=En(e),[m,p]=En(t),[g,y]=En(t),[b,v]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,M]=En(b),{x:_,y:P,z:T,fill:D,stroke:I,x1:E,x2:F,y1:G,y2:$,domain:A,cumulative:O,thresholds:ae,interval:ie,...ne}=l,[H,j]=En(T),[W]=Bn(D),[K]=Bn(I),[se,le]=En(W),[oe,Q]=En(K);return{..."z"in l&&{z:H||T},..."fill"in l&&{fill:se||D},..."stroke"in l&&{stroke:oe||I},...pu(ne,(ee,R,V)=>{const J=Ig(rt(ee,b),V==null?void 0:V[v]),N=rt(ee,T),fe=rt(ee,W),re=rt(ee,K),ce=m8(u,{z:N,fill:fe,stroke:re}),Se=[],Le=[],ze=J&&M([]),ke=N&&j([]),jt=fe&&le([]),Ee=re&&Q([]),ft=e&&c([]),At=e&&d([]),Ce=t&&p([]),ur=t&&y([]),Nt=UP(e,t,ee);let He=0;for(const Je of u)Je.initialize(ee);o&&o.initialize(ee),a&&a.initialize(ee);for(const Je of R){const Te=[];for(const Y of u)Y.scope("facet",Je);o&&o.scope("facet",Je),a&&a.scope("facet",Je);for(const[Y,k]of _d(Je,ce))for(const[B,te]of _d(k,J))for(const[ve,xe]of Nt(te))if(!(a&&!a.reduce(ve,xe))){Te.push(He++),Le.push(i.reduceIndex(ve,ee,xe)),J&&ze.push(B),N&&ke.push(ce===N?Y:N[(ve.length>0?ve:te)[0]]),fe&&jt.push(ce===fe?Y:fe[(ve.length>0?ve:te)[0]]),re&&Ee.push(ce===re?Y:re[(ve.length>0?ve:te)[0]]),ft&&(ft.push(xe.x1),At.push(xe.x2)),Ce&&(Ce.push(xe.y1),ur.push(xe.y2));for(const Fe of u)Fe.reduce(ve,xe);o&&o.reduce(ve)}Se.push(Te)}return p8(Se,o,s),{data:Le,facets:Se}}),...!_o(u,"x")&&(f?{x1:f,x2:h,x:uf(f,h)}:{x:_,x1:E,x2:F}),...!_o(u,"y")&&(m?{y1:m,y2:g,y:uf(m,g)}:{y:P,y1:G,y2:$}),...w&&{[v]:w},...Object.fromEntries(u.map(({name:ee,output:R})=>[ee,R]))}}function FP({cumulative:e,domain:t,thresholds:n,interval:r,...i},a){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...a}]}function RP(e,{cumulative:t,domain:n,thresholds:r,interval:i},a){return e={...Xa(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=a),e.thresholds=BP(e.thresholds,e.interval),e}function r0(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Rt,thresholds:i}=e,a=o=>{let s=rt(o,t),u;if(St(s)||GP(i)){s=Ye(s,Dg,Float64Array);let[f,c]=typeof r=="function"?r(s):r,h=typeof i=="function"&&!Kr(i)?i(s,f,c):i;typeof h=="number"&&(h=kp(f,c,h)),Kr(h)&&(r===Rt&&(f=h.floor(f),c=h.offset(h.floor(c))),h=h.range(f,h.offset(c))),u=h}else{s=hn(s);let[f,c]=typeof r=="function"?r(s):r,h=typeof i=="function"&&!Kr(i)?i(s,f,c):i;if(typeof h=="number")if(r===Rt){let d=Yo(f,c,h);if(isFinite(d))if(d>0){let m=Math.round(f/d),p=Math.round(c/d);m*d<=f||--m,p*d>c||++p;let g=p-m+1;h=new Float64Array(g);for(let y=0;y<g;++y)h[y]=(m+y)*d}else if(d<0){d=-d;let m=Math.round(f*d),p=Math.round(c*d);m/d<=f||--m,p/d>c||++p;let g=p-m+1;h=new Float64Array(g);for(let y=0;y<g;++y)h[y]=(m+y)/d}else h=[f];else h=[f]}else h=ca(f,c,h);else Kr(h)&&(r===Rt&&(f=h.floor(f),c=h.offset(h.floor(c))),h=h.range(f,h.offset(c)));u=h}const l=[];if(u.length===1)l.push([u[0],u[0]]);else for(let f=1;f<u.length;++f)l.push([u[f-1],u[f]]);return l.bin=(n<0?HP:n>0?zP:Oc)(l,u,s),l};return a.label=Br(t),a}function BP(e,t,n=i0){if(e===void 0)return t===void 0?n:Ci(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return Z3;case"scott":return q1;case"sturges":return V3;case"auto":return i0}return fc(e)}return e}function OP(e,t){return c8(e,t,dy)}function dy(e,t,n){return Ug(e,t,n,my)}function my(e,t,n){return zg(e,t,n,py)}function py(e,t){return _c(e,t,qP)}function qP(e){switch(`${e}`.toLowerCase()){case"x":return WP;case"x1":return YP;case"x2":return jP;case"y":return VP;case"y1":return XP;case"y2":return ZP}throw new Error(`invalid bin reduce: ${e}`)}function i0(e,t,n){return Math.min(200,q1(e,t,n))}function GP(e){return H9(e)||ar(e)&&St(e)}function UP(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(a){const o=r.bin(a);for(const[s,[u,l]]of r.entries()){const f=i.bin(o[s]);for(const[c,[h,d]]of i.entries())yield[f[c],{data:n,x1:u,y1:h,x2:l,y2:d}]}}:r?function*(a){const o=r.bin(a);for(const[s,[u,l]]of r.entries())yield[o[s],{data:n,x1:u,x2:l}]}:function*(a){const o=i.bin(a);for(const[s,[u,l]]of i.entries())yield[o[s],{data:n,y1:u,y2:l}]}}function Oc(e,t,n){return t=hn(t),r=>{var a;const i=e.map(()=>[]);for(const o of r)(a=i[Is(t,n[o])-1])==null||a.push(o);return i}}function zP(e,t,n){const r=Oc(e,t,n);return i=>{const a=r(i);for(let o=1,s=a.length;o<s;++o){const u=a[o-1],l=a[o];for(const f of u)l.push(f)}return a}}function HP(e,t,n){const r=Oc(e,t,n);return i=>{const a=r(i);for(let o=a.length-2;o>=0;--o){const s=a[o+1],u=a[o];for(const l of s)u.push(l)}return a}}function by(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const WP={reduceIndex(e,t,{x1:n,x2:r}){return by(n,r)}},VP={reduceIndex(e,t,{y1:n,y2:r}){return by(n,r)}},YP={reduceIndex(e,t,{x1:n}){return n}},jP={reduceIndex(e,t,{x2:n}){return n}},XP={reduceIndex(e,t,{y1:n}){return n}},ZP={reduceIndex(e,t,{y2:n}){return n}};function gy(e={}){return Lg(e)?e:{...e,y:mt}}function KP(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const s of t)for(const u of s)r[u]&&++i,r[u]=1;if(i===0)return{data:e,facets:t};e=Ma(e);const a=e[Tg]=new Uint32Array(n+i);t=t.map(s=>Ma(s,Uint32Array));let o=n;r.fill(0);for(const s of t)for(let u=0,l=s.length;u<l;++u){const f=s[u];r[f]?(s[u]=o,e[o]=e[f],a[o]=f,++o):a[f]=f,r[f]=1}return{data:e,facets:t}}function QP(e={},t={}){arguments.length===1&&([e,t]=JP(e));const{x1:n,x:r=n,y:i,...a}=t,[o,s,u,l]=tS(r,i,"x","y",e,a);return{...o,x1:n,x:s,y1:u,y2:l,y:uf(u,l)}}function yy({y:e,y1:t,y2:n,...r}={}){return r=wu(r,"x"),t===void 0&&n===void 0?QP({y:e,...r}):([t,n]=q9(e,t,n),{...r,y1:t,y2:n})}function JP(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const eS={length:!0};function tS(e,t=L9,n,r,{offset:i,order:a,reverse:o},s){if(t===null)throw new Error(`stack requires ${r}`);const u=dc(s),[l,f]=En(e),[c,h]=Ps(t),[d,m]=Ps(t);return c.hint=d.hint=eS,i=nS(i),a=aS(a,i,r),[pu(s,(p,g,y)=>{({data:p,facets:g}=KP(p,g));const b=e==null?void 0:f(Ig(rt(p,e),y==null?void 0:y[n])),v=rt(p,t,Float64Array),w=rt(p,u),M=a&&a(p,b,v,w),_=p.length,P=h(new Float64Array(_)),T=m(new Float64Array(_)),D=[];for(const I of g){const E=b?Array.from(Bs(I,F=>b[F]).values()):[I];if(M)for(const F of E)F.sort(M);for(const F of E){let G=0,$=0;o&&F.reverse();for(const A of F){const O=v[A];O<0?G=T[A]=(P[A]=G)+O:O>0?$=T[A]=(P[A]=$)+O:T[A]=P[A]=$}}D.push(E)}return i&&i(D,P,T,w),{data:p,facets:g}}),l,c,d]}function nS(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return rS;case"center":case"silhouette":return iS;case"wiggle":return _y}throw new Error(`unknown offset: ${e}`)}}function wy(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function rS(e,t,n){for(const r of e)for(const i of r){const[a,o]=wy(i,n);for(const s of i){const u=1/(o-a||1);t[s]=u*(t[s]-a),n[s]=u*(n[s]-a)}}}function iS(e,t,n){for(const r of e){for(const i of r){const[a,o]=wy(i,n);for(const s of i){const u=(o+a)/2;t[s]-=u,n[s]-=u}}vy(r,t,n)}My(e,t,n)}function _y(e,t,n,r){for(const i of e){const a=new Sr;let o=0;for(const s of i){let u=-1;const l=s.map(d=>Math.abs(n[d]-t[d])),f=s.map(d=>{u=r?r[d]:++u;const m=n[d]-t[d],p=a.has(u)?m-a.get(u):0;return a.set(u,m),p}),c=[0,...q3(f)];for(const d of s)t[d]+=o,n[d]+=o;const h=Zn(l);h&&(o-=Zn(l,(d,m)=>(f[m]/2+c[m])*d)/h)}vy(i,t,n)}My(e,t,n)}function vy(e,t,n){const r=Ln(e,i=>Ln(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function My(e,t,n){const r=e.length;if(r===1)return;const i=e.map(s=>s.flat()),a=i.map(s=>(Ln(s,u=>t[u])+Ut(s,u=>n[u]))/2),o=Ln(a);for(let s=0;s<r;s++){const u=o-a[s];for(const l of i[s])t[l]+=u,n[l]+=u}}function aS(e,t,n){if(e===void 0&&t===_y)return a0(tn);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?xs:tn;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return oS(i);case"z":return sS(i);case"sum":return uS(i);case"appearance":return lS(i);case"inside-out":return a0(i)}return o0($g(e))}if(typeof e=="function")return(e.length===1?o0:fS)(e);if(Array.isArray(e))return cS(e);throw new Error(`invalid order: ${e}`)}}function oS(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function sS(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function uS(e){return xu(e,(t,n,r,i)=>$f(qn(t),a=>Zn(a,o=>r[o]),a=>i[a]))}function lS(e){return xu(e,(t,n,r,i)=>$f(qn(t),a=>n[O1(a,o=>r[o])],a=>i[a]))}function a0(e){return xu(e,(t,n,r,i)=>{const a=qn(t),o=$f(a,c=>n[O1(c,h=>r[h])],c=>i[c]),s=Jr(a,c=>Zn(c,h=>r[h]),c=>i[c]),u=[],l=[];let f=0;for(const c of o)f<0?(f+=s.get(c),u.push(c)):(f-=s.get(c),l.push(c));return l.reverse().concat(u)})}function o0(e){return t=>{const n=rt(t,e);return(r,i)=>tn(n[r],n[i])}}function fS(e){return t=>(n,r)=>e(t[n],t[r])}function cS(e){return xu(tn,()=>e)}function xu(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new Sr(t(n,r,i,a).map((s,u)=>[s,u]));return(s,u)=>e(o.get(a[s]),o.get(a[u]))}}const hS={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class dS extends yt{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,z:s,curve:u,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:dc(n),optional:!0}},n,hS),this.z=s,this.curve=fy(u,l)}filter(t){return t}render(t,n,r,i,a){const{x1:o,y1:s,x2:u=o,y2:l=s}=r;return Ve("svg:g",a).call(Wt,this,i,a).call(Dt,this,n,0,0).call(f=>f.selectAll().data(Xg(t,[o,s,u,l],this,r)).enter().append("path").call(Vt,this).call(jg,this,r).attr("d",k4().curve(this.curve).defined(c=>c>=0).x0(c=>o[c]).y0(c=>s[c]).x1(c=>u[c]).y1(c=>l[c]))).node()}}function mS(e,t){const{x:n=fu,...r}=hy(t);return new dS(e,yy(gy({...r,x1:n,x2:void 0})))}const pS={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class bS extends yt{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:s,tension:u}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,pS),this.curve=cy(s,u),no(this,n)}project(t,n,r){this.curve!==vi&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:s,x2:u=o,y2:l=s}=r,{curve:f}=this;return Ve("svg:g",a).call(Wt,this,i,a).call(Dt,this,n).call(c=>c.selectAll().data(t).enter().append("path").call(Vt,this).attr("d",f===vi&&a.projection?gS(a.projection,o,s,u,l):h=>{const d=Vn(),m=f(d);return m.lineStart(),m.point(o[h],s[h]),m.point(u[h],l[h]),m.lineEnd(),d}).call(Un,this,r).call(_u,this,r,a)).node()}}function gS(e,t,n,r,i){const a=js(e);return t=hn(t),n=hn(n),r=hn(r),i=hn(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function qc(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...s}={}){return[n,r]=s0(t,n,r),[a,o]=s0(i,a,o),new bS(e,{...s,x1:n,x2:r,y1:a,y2:o})}function s0(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class xy extends yt{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:s=a,insetBottom:u=a,insetLeft:l=a,rx:f,ry:c}=r;this.insetTop=Re(o),this.insetRight=Re(s),this.insetBottom=Re(u),this.insetLeft=Re(l),this.rx=st(f,"auto"),this.ry=st(c,"auto")}render(t,n,r,i,a){const{rx:o,ry:s}=this;return Ve("svg:g",a).call(Wt,this,i,a).call(this._transform,this,n).call(u=>u.selectAll().data(t).enter().append("rect").call(Vt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(pe,"rx",o).call(pe,"ry",s).call(Un,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:s}=this,u=n&&t?t.bandwidth():a-r-i;return Math.max(0,u-o-s)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:s}=this,u=n&&t?t.bandwidth():a-r-i;return Math.max(0,u-o-s)}}const yS={ariaLabel:"bar"};class wS extends xy{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,yS)}_transform(t,n,{y:r}){t.call(Dt,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return wi(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:s,insetBottom:u}=this;return wi(t)?o-i-a-s-u:l=>Math.max(0,Math.abs(r[l]-n[l])-s-u)}}function _S(e,t={}){return O9(t)||(t={...t,x:fu,y2:mt}),new wS(e,yy(C2(gy(t))))}const vS={ariaLabel:"cell"};class MS extends xy{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,vS)}_transform(t,n){t.call(Dt,n,{},0,0)}}function Py(e,{x:t,y:n,...r}={}){return[t,n]=ja(t,n),new MS(e,{...r,x:t,y:n})}const xS={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function PS(e){return e.sort===void 0&&e.reverse===void 0?u8({channel:"-r"},e):e}class SS extends yt{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:s=_a,frameAnchor:u}=n,[l,f]=gt(o,0),[c,h]=o8(s),[d,m]=gt(a,c==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:uu,optional:!0},rotate:{value:l,optional:!0},symbol:{value:c,scale:"auto",optional:!0}},PS(n),xS),this.r=m,this.rotate=f,this.symbol=h,this.frameAnchor=du(u);const{channels:p}=this,{symbol:g}=p;if(g){const{fill:y,stroke:b}=p;g.hint={fill:y?y.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:s}=n,{x:u,y:l,r:f,rotate:c,symbol:h}=r,{r:d,rotate:m,symbol:p}=this,[g,y]=Ja(this,i),b=p===_a,v=f?void 0:d*d*Math.PI;return sc(d)&&(t=[]),Ve("svg:g",a).call(Wt,this,i,a).call(Dt,this,{x:u&&o,y:l&&s}).call(w=>w.selectAll().data(t).enter().append(b?"circle":"path").call(Vt,this).call(b?M=>{M.attr("cx",u?_=>u[_]:g).attr("cy",l?_=>l[_]:y).attr("r",f?_=>f[_]:d)}:M=>{M.attr("transform",Nc`translate(${u?_=>u[_]:g},${l?_=>l[_]:y})${c?_=>` rotate(${c[_]})`:m?` rotate(${m})`:""}`).attr("d",f&&h?_=>{const P=Vn();return h[_].draw(P,f[_]*f[_]*Math.PI),P}:f?_=>{const P=Vn();return p.draw(P,f[_]*f[_]*Math.PI),P}:h?_=>{const P=Vn();return h[_].draw(P,v),P}:(()=>{const _=Vn();return p.draw(_,v),_})())}).call(Un,this,r)).node()}}function Pu(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ja(t,n)),new SS(e,{...r,x:t,y:n})}const AS={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Sy extends yt{constructor(t,n={}){const{x:r,y:i,z:a,curve:o,tension:s}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:dc(n),optional:!0}},n,AS),this.z=a,this.curve=cy(o,s),no(this,n)}filter(t){return t}project(t,n,r){this.curve!==vi&&super.project(t,n,r)}render(t,n,r,i,a){const{x:o,y:s}=r,{curve:u}=this;return Ve("svg:g",a).call(Wt,this,i,a).call(Dt,this,n).call(l=>l.selectAll().data(Xg(t,[o,s],this,r)).enter().append("path").call(Vt,this).call(jg,this,r).call(fx,this,r,a).attr("d",u===vi&&a.projection?ES(a.projection,o,s):Zb().curve(u).defined(f=>f>=0).x(f=>o[f]).y(f=>s[f]))).node()}}function ES(e,t,n){const r=js(e);return t=hn(t),n=hn(n),i=>{let a=[];const o=[a];for(const s of i)s===-1?(a=[],o.push(a)):a.push([t[s],n[s]]);return r({type:"MultiLineString",coordinates:o})}}function kS(e,{x:t,y:n,...r}={}){return[t,n]=ja(t,n),new Sy(e,{...r,x:t,y:n})}function CS(e,{x:t=fu,y:n=mt,...r}={}){return new Sy(e,hy({...r,x:t,y:n}))}const TS={ariaLabel:"tick",fill:null,stroke:"currentColor"};class $S extends yt{constructor(t,n,r){super(t,n,r,TS),no(this,r)}render(t,n,r,i,a){return Ve("svg:g",a).call(Wt,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Vt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Un,this,r).call(_u,this,r,a)).node()}}class DS extends $S{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:s=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Re(o),this.insetBottom=Re(s)}_transform(t,n,{x:r}){t.call(Dt,n,{x:r},Mt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function Gc(e,{x:t=mt,...n}={}){return new DS(e,{...n,x:t})}function NS(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),We(t,"width",e[0]+"px"),We(t,"margin","auto")},m(a,o){z(a,t,o),x(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&We(t,"width",a[0]+"px")},i:Pe,o:Pe,d(a){a&&U(t),e[4](null)}}}function LS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;rn(()=>{const u=Yt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Gc(r,{x:l=>l})]});n(2,o.textContent="",o),o.appendChild(u)});function s(u){dt[u?"unshift":"push"](()=>{o=u,n(2,o)})}return e.$$set=u=>{"pattern"in u&&n(3,r=u.pattern),"width"in u&&n(0,i=u.width),"height"in u&&n(1,a=u.height)},[i,a,o,r,s]}class IS extends Ze{constructor(t){super(),Xe(this,t,LS,NS,je,{pattern:3,width:0,height:1})}}function FS(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),We(t,"width",e[0]+"px"),We(t,"margin","auto")},m(a,o){z(a,t,o),x(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&We(t,"width",a[0]+"px")},i:Pe,o:Pe,d(a){a&&U(t),e[4](null)}}}function RS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;rn(()=>{const u=r.map((f,c)=>c===0?0:f-r[c-1]),l=Yt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},marks:[_S(u,{x:(f,c)=>c+1,y:f=>f})]});n(2,o.textContent="",o),o.appendChild(l)});function s(u){dt[u?"unshift":"push"](()=>{o=u,n(2,o)})}return e.$$set=u=>{"pattern"in u&&n(3,r=u.pattern),"width"in u&&n(0,i=u.width),"height"in u&&n(1,a=u.height)},[i,a,o,r,s]}class BS extends Ze{constructor(t){super(),Xe(this,t,RS,FS,je,{pattern:3,width:0,height:1})}}function OS(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),We(t,"width",e[0]+"px"),We(t,"margin","auto")},m(a,o){z(a,t,o),x(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&We(t,"width",a[0]+"px")},i:Pe,o:Pe,d(a){a&&U(t),e[4](null)}}}function qS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;rn(()=>{const u=r.map((f,c)=>c===0?0:f-r[c-1]),l=Yt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[Py(u,{x:(f,c)=>c+1,fill:f=>f})]});n(2,o.textContent="",o),o.appendChild(l)});function s(u){dt[u?"unshift":"push"](()=>{o=u,n(2,o)})}return e.$$set=u=>{"pattern"in u&&n(3,r=u.pattern),"width"in u&&n(0,i=u.width),"height"in u&&n(1,a=u.height)},[i,a,o,r,s]}class GS extends Ze{constructor(t){super(),Xe(this,t,qS,OS,je,{pattern:3,width:0,height:1})}}function US(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),We(t,"width",e[0]+"px"),We(t,"margin","auto")},m(a,o){z(a,t,o),x(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&We(t,"width",a[0]+"px")},i:Pe,o:Pe,d(a){a&&U(t),e[5](null)}}}function zS(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,s;rn(()=>{if(n(2,s.textContent="",s),!r)return;const l=Yt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[CS(r,{x:(f,c)=>c/i,y:f=>f})]});s.appendChild(l)});function u(l){dt[l?"unshift":"push"](()=>{s=l,n(2,s)})}return e.$$set=l=>{"audioData"in l&&n(3,r=l.audioData),"sampleRate"in l&&n(4,i=l.sampleRate),"width"in l&&n(0,a=l.width),"height"in l&&n(1,o=l.height)},[a,o,s,r,i,u]}class vr extends Ze{constructor(t){super(),Xe(this,t,zS,US,je,{audioData:3,sampleRate:4,width:0,height:1})}}function HS(e){let t,n,r,i,a,o;return{c(){t=S("main"),n=S("audio"),r=L(),i=S("button"),i.textContent="play audio (p)",n.controls=!1},m(s,u){z(s,t,u),x(t,n),e[5](n),x(t,r),x(t,i),a||(o=Oe(i,"click",e[1]),a=!0)},p:Pe,i:Pe,o:Pe,d(s){s&&U(t),e[5](null),a=!1,o()}}}function WS(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:a=-1}=t,o;const s=c=>{c&&o&&ac(c,i,o)},u=()=>{o&&(n(0,o.currentTime=0,o),o.play())},l=c=>{c.key==="p"&&u()};Si(()=>{document.querySelector("html").addEventListener("keyup",l),s(r)}),S3(()=>{document.querySelector("html").removeEventListener("keyup",l)});function f(c){dt[c?"unshift":"push"](()=>{o=c,n(0,o)})}return e.$$set=c=>{"audioData"in c&&n(2,r=c.audioData),"sampleRate"in c&&n(3,i=c.sampleRate),"currentTrialNumber"in c&&n(4,a=c.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&window.setTimeout(u,250),e.$$.dirty&4&&s(r)},[o,u,r,i,a,f]}class Uc extends Ze{constructor(t){super(),Xe(this,t,WS,HS,je,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const Ay=new Map,Ey=new Map,VS=new Map,YS=new Map;function jS(e){return Ay.get(e)}function ky(e){return Ey.get(e)}const XS=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],ZS=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],KS=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of XS)Ay.set(e.pitch,e),Ey.set(e.label,e);for(const e of ZS)VS.set(e.number,e);for(const e of KS){const t=`${e.number}-${e.subnumber}`;YS.set(t,e)}var QS={value:()=>{}};function Cy(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Bo(n)}function Bo(e){this._=e}function JS(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Bo.prototype=Cy.prototype={constructor:Bo,on:function(e,t){var n=this._,r=JS(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=eA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=u0(n[i],e.name,t);else if(t==null)for(i in n)n[i]=u0(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Bo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function eA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function u0(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=QS,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var gf="http://www.w3.org/1999/xhtml";const l0={svg:"http://www.w3.org/2000/svg",xhtml:gf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Su(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),l0.hasOwnProperty(t)?{space:l0[t],local:e}:e}function tA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gf&&t.documentElement.namespaceURI===gf?t.createElement(e):t.createElementNS(n,e)}}function nA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ty(e){var t=Su(e);return(t.local?nA:tA)(t)}function rA(){}function zc(e){return e==null?rA:function(){return this.querySelector(e)}}function iA(e){typeof e!="function"&&(e=zc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),u,l,f=0;f<o;++f)(u=a[f])&&(l=e.call(u,u.__data__,f,a))&&("__data__"in u&&(l.__data__=u.__data__),s[f]=l);return new Ht(r,this._parents)}function $y(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aA(){return[]}function Dy(e){return e==null?aA:function(){return this.querySelectorAll(e)}}function oA(e){return function(){var t=e.apply(this,arguments);return t==null?[]:$y(t)}}function sA(e){typeof e=="function"?e=oA(e):e=Dy(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ht(r,i)}function Ny(e){return function(){return this.matches(e)}}function Ly(e){return function(t){return t.matches(e)}}var uA=Array.prototype.find;function lA(e){return function(){return uA.call(this.children,e)}}function fA(){return this.firstElementChild}function cA(e){return this.select(e==null?fA:lA(typeof e=="function"?e:Ly(e)))}var hA=Array.prototype.filter;function dA(){return this.children}function mA(e){return function(){return hA.call(this.children,e)}}function pA(e){return this.selectAll(e==null?dA:mA(typeof e=="function"?e:Ly(e)))}function bA(e){typeof e!="function"&&(e=Ny(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new Ht(r,this._parents)}function Iy(e){return new Array(e.length)}function gA(){return new Ht(this._enter||this._groups.map(Iy),this._parents)}function ks(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ks.prototype={constructor:ks,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function yA(e){return function(){return e}}function wA(e,t,n,r,i,a){for(var o=0,s,u=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new ks(e,a[o]);for(;o<u;++o)(s=t[o])&&(i[o]=s)}function _A(e,t,n,r,i,a,o){var s,u,l=new Map,f=t.length,c=a.length,h=new Array(f),d;for(s=0;s<f;++s)(u=t[s])&&(h[s]=d=o.call(u,u.__data__,s,t)+"",l.has(d)?i[s]=u:l.set(d,u));for(s=0;s<c;++s)d=o.call(e,a[s],s,a)+"",(u=l.get(d))?(r[s]=u,u.__data__=a[s],l.delete(d)):n[s]=new ks(e,a[s]);for(s=0;s<f;++s)(u=t[s])&&l.get(h[s])===u&&(i[s]=u)}function vA(e){return e.__data__}function MA(e,t){if(!arguments.length)return Array.from(this,vA);var n=t?_A:wA,r=this._parents,i=this._groups;typeof e!="function"&&(e=yA(e));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var f=r[l],c=i[l],h=c.length,d=$y(e.call(f,f&&f.__data__,l,r)),m=d.length,p=s[l]=new Array(m),g=o[l]=new Array(m),y=u[l]=new Array(h);n(f,c,p,g,y,d,t);for(var b=0,v=0,w,M;b<m;++b)if(w=p[b]){for(b>=v&&(v=b+1);!(M=g[v])&&++v<m;);w._next=M||null}}return o=new Ht(o,r),o._enter=s,o._exit=u,o}function xA(){return new Ht(this._exit||this._groups.map(Iy),this._parents)}function PA(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function SA(e){if(!(e instanceof Ht))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],l=n[s],f=u.length,c=o[s]=new Array(f),h,d=0;d<f;++d)(h=u[d]||l[d])&&(c[d]=h);for(;s<r;++s)o[s]=t[s];return new Ht(o,this._parents)}function AA(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function EA(e){e||(e=kA);function t(c,h){return c&&h?e(c.__data__,h.__data__):!c-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),l,f=0;f<s;++f)(l=o[f])&&(u[f]=l);u.sort(t)}return new Ht(i,this._parents).order()}function kA(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function CA(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function TA(){return Array.from(this)}function $A(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function DA(){let e=0;for(const t of this)++e;return e}function NA(){return!this.node()}function LA(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function IA(e){return function(){this.removeAttribute(e)}}function FA(e){return function(){this.removeAttributeNS(e.space,e.local)}}function RA(e,t){return function(){this.setAttribute(e,t)}}function BA(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function OA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function qA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function GA(e,t){var n=Su(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?FA:IA:typeof t=="function"?n.local?qA:OA:n.local?BA:RA)(n,t))}function Fy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function UA(e){return function(){this.style.removeProperty(e)}}function zA(e,t,n){return function(){this.style.setProperty(e,t,n)}}function HA(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function WA(e,t,n){return arguments.length>1?this.each((t==null?UA:typeof t=="function"?HA:zA)(e,t,n??"")):Mi(this.node(),e)}function Mi(e,t){return e.style.getPropertyValue(t)||Fy(e).getComputedStyle(e,null).getPropertyValue(t)}function VA(e){return function(){delete this[e]}}function YA(e,t){return function(){this[e]=t}}function jA(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function XA(e,t){return arguments.length>1?this.each((t==null?VA:typeof t=="function"?jA:YA)(e,t)):this.node()[e]}function Ry(e){return e.trim().split(/^|\s+/)}function Hc(e){return e.classList||new By(e)}function By(e){this._node=e,this._names=Ry(e.getAttribute("class")||"")}By.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Oy(e,t){for(var n=Hc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function qy(e,t){for(var n=Hc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ZA(e){return function(){Oy(this,e)}}function KA(e){return function(){qy(this,e)}}function QA(e,t){return function(){(t.apply(this,arguments)?Oy:qy)(this,e)}}function JA(e,t){var n=Ry(e+"");if(arguments.length<2){for(var r=Hc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?QA:t?ZA:KA)(n,t))}function eE(){this.textContent=""}function tE(e){return function(){this.textContent=e}}function nE(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function rE(e){return arguments.length?this.each(e==null?eE:(typeof e=="function"?nE:tE)(e)):this.node().textContent}function iE(){this.innerHTML=""}function aE(e){return function(){this.innerHTML=e}}function oE(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function sE(e){return arguments.length?this.each(e==null?iE:(typeof e=="function"?oE:aE)(e)):this.node().innerHTML}function uE(){this.nextSibling&&this.parentNode.appendChild(this)}function lE(){return this.each(uE)}function fE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cE(){return this.each(fE)}function hE(e){var t=typeof e=="function"?e:Ty(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function dE(){return null}function mE(e,t){var n=typeof e=="function"?e:Ty(e),r=t==null?dE:typeof t=="function"?t:zc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function pE(){var e=this.parentNode;e&&e.removeChild(this)}function bE(){return this.each(pE)}function gE(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yE(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wE(e){return this.select(e?yE:gE)}function _E(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vE(e){return function(t){e.call(this,t,this.__data__)}}function ME(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function xE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function PE(e,t,n){return function(){var r=this.__on,i,a=vE(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function SE(e,t,n){var r=ME(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,f;u<l;++u)for(i=0,f=s[u];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=t?PE:xE,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Gy(e,t,n){var r=Fy(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function AE(e,t){return function(){return Gy(this,e,t)}}function EE(e,t){return function(){return Gy(this,e,t.apply(this,arguments))}}function kE(e,t){return this.each((typeof t=="function"?EE:AE)(e,t))}function*CE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var TE=[null];function Ht(e,t){this._groups=e,this._parents=t}function ro(){return new Ht([[document.documentElement]],TE)}function $E(){return this}Ht.prototype=ro.prototype={constructor:Ht,select:iA,selectAll:sA,selectChild:cA,selectChildren:pA,filter:bA,data:MA,enter:gA,exit:xA,join:PA,merge:SA,selection:$E,order:AA,sort:EA,call:CA,nodes:TA,node:$A,size:DA,empty:NA,each:LA,attr:GA,style:WA,property:XA,classed:JA,text:rE,html:sE,raise:lE,lower:cE,append:hE,insert:mE,remove:bE,clone:wE,datum:_E,on:SE,dispatch:kE,[Symbol.iterator]:CE};function Wc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Uy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function io(){}var Aa=.7,Cs=1/Aa,ri="\\s*([+-]?\\d+)\\s*",Ea="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",bn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DE=/^#([0-9a-f]{3,8})$/,NE=new RegExp("^rgb\\("+[ri,ri,ri]+"\\)$"),LE=new RegExp("^rgb\\("+[bn,bn,bn]+"\\)$"),IE=new RegExp("^rgba\\("+[ri,ri,ri,Ea]+"\\)$"),FE=new RegExp("^rgba\\("+[bn,bn,bn,Ea]+"\\)$"),RE=new RegExp("^hsl\\("+[Ea,bn,bn]+"\\)$"),BE=new RegExp("^hsla\\("+[Ea,bn,bn,Ea]+"\\)$"),f0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wc(io,ka,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:c0,formatHex:c0,formatHsl:OE,formatRgb:h0,toString:h0});function c0(){return this.rgb().formatHex()}function OE(){return zy(this).formatHsl()}function h0(){return this.rgb().formatRgb()}function ka(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=DE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?d0(t):n===3?new kt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Eo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Eo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=NE.exec(e))?new kt(t[1],t[2],t[3],1):(t=LE.exec(e))?new kt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=IE.exec(e))?Eo(t[1],t[2],t[3],t[4]):(t=FE.exec(e))?Eo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=RE.exec(e))?b0(t[1],t[2]/100,t[3]/100,1):(t=BE.exec(e))?b0(t[1],t[2]/100,t[3]/100,t[4]):f0.hasOwnProperty(e)?d0(f0[e]):e==="transparent"?new kt(NaN,NaN,NaN,0):null}function d0(e){return new kt(e>>16&255,e>>8&255,e&255,1)}function Eo(e,t,n,r){return r<=0&&(e=t=n=NaN),new kt(e,t,n,r)}function qE(e){return e instanceof io||(e=ka(e)),e?(e=e.rgb(),new kt(e.r,e.g,e.b,e.opacity)):new kt}function yf(e,t,n,r){return arguments.length===1?qE(e):new kt(e,t,n,r??1)}function kt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Wc(kt,yf,Uy(io,{brighter:function(e){return e=e==null?Cs:Math.pow(Cs,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Aa:Math.pow(Aa,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:m0,formatHex:m0,formatRgb:p0,toString:p0}));function m0(){return"#"+pl(this.r)+pl(this.g)+pl(this.b)}function p0(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function pl(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function b0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new cn(e,t,n,r)}function zy(e){if(e instanceof cn)return new cn(e.h,e.s,e.l,e.opacity);if(e instanceof io||(e=ka(e)),!e)return new cn;if(e instanceof cn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new cn(o,s,u,e.opacity)}function Hy(e,t,n,r){return arguments.length===1?zy(e):new cn(e,t,n,r??1)}function cn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Wc(cn,Hy,Uy(io,{brighter:function(e){return e=e==null?Cs:Math.pow(Cs,e),new cn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Aa:Math.pow(Aa,e),new cn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new kt(bl(e>=240?e-240:e+120,i,r),bl(e,i,r),bl(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function bl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Wy=e=>()=>e;function GE(e,t){return function(n){return e+n*t}}function UE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function zE(e){return(e=+e)==1?Vy:function(t,n){return n-t?UE(t,n,e):Wy(isNaN(t)?n:t)}}function Vy(e,t){var n=t-e;return n?GE(e,n):Wy(isNaN(e)?t:e)}const wf=function e(t){var n=zE(t);function r(i,a){var o=n((i=yf(i)).r,(a=yf(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),l=Vy(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=e,r}(1);function Wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var _f=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gl=new RegExp(_f.source,"g");function HE(e){return function(){return e}}function WE(e){return function(t){return e(t)+""}}function VE(e,t){var n=_f.lastIndex=gl.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(r=_f.exec(e))&&(i=gl.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:Wn(r,i)})),n=gl.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?WE(u[0].x):HE(t):(t=u.length,function(l){for(var f=0,c;f<t;++f)s[(c=u[f]).i]=c.x(l);return s.join("")})}var g0=180/Math.PI,vf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yy(e,t,n,r,i,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*g0,skewX:Math.atan(u)*g0,scaleX:o,scaleY:s}}var ko;function YE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vf:Yy(t.a,t.b,t.c,t.d,t.e,t.f)}function jE(e){return e==null||(ko||(ko=document.createElementNS("http://www.w3.org/2000/svg","g")),ko.setAttribute("transform",e),!(e=ko.transform.baseVal.consolidate()))?vf:(e=e.matrix,Yy(e.a,e.b,e.c,e.d,e.e,e.f))}function jy(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,f,c,h,d,m){if(l!==c||f!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Wn(l,c)},{i:p-2,x:Wn(f,h)})}else(c||h)&&d.push("translate("+c+t+h+n)}function o(l,f,c,h){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),h.push({i:c.push(i(c)+"rotate(",null,r)-2,x:Wn(l,f)})):f&&c.push(i(c)+"rotate("+f+r)}function s(l,f,c,h){l!==f?h.push({i:c.push(i(c)+"skewX(",null,r)-2,x:Wn(l,f)}):f&&c.push(i(c)+"skewX("+f+r)}function u(l,f,c,h,d,m){if(l!==c||f!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Wn(l,c)},{i:p-2,x:Wn(f,h)})}else(c!==1||h!==1)&&d.push(i(d)+"scale("+c+","+h+")")}return function(l,f){var c=[],h=[];return l=e(l),f=e(f),a(l.translateX,l.translateY,f.translateX,f.translateY,c,h),o(l.rotate,f.rotate,c,h),s(l.skewX,f.skewX,c,h),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,c,h),l=f=null,function(d){for(var m=-1,p=h.length,g;++m<p;)c[(g=h[m]).i]=g.x(d);return c.join("")}}}var XE=jy(YE,"px, ","px)","deg)"),ZE=jy(jE,", ",")",")"),xi=0,Ji=0,Gi=0,Xy=1e3,Ts,ea,$s=0,Lr=0,Au=0,Ca=typeof performance=="object"&&performance.now?performance:Date,Zy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Vc(){return Lr||(Zy(KE),Lr=Ca.now()+Au)}function KE(){Lr=0}function Ds(){this._call=this._time=this._next=null}Ds.prototype=Ky.prototype={constructor:Ds,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Vc():+n)+(t==null?0:+t),!this._next&&ea!==this&&(ea?ea._next=this:Ts=this,ea=this),this._call=e,this._time=n,Mf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mf())}};function Ky(e,t,n){var r=new Ds;return r.restart(e,t,n),r}function QE(){Vc(),++xi;for(var e=Ts,t;e;)(t=Lr-e._time)>=0&&e._call.call(null,t),e=e._next;--xi}function y0(){Lr=($s=Ca.now())+Au,xi=Ji=0;try{QE()}finally{xi=0,ek(),Lr=0}}function JE(){var e=Ca.now(),t=e-$s;t>Xy&&(Au-=t,$s=e)}function ek(){for(var e,t=Ts,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ts=n);ea=e,Mf(r)}function Mf(e){if(!xi){Ji&&(Ji=clearTimeout(Ji));var t=e-Lr;t>24?(e<1/0&&(Ji=setTimeout(y0,e-Ca.now()-Au)),Gi&&(Gi=clearInterval(Gi))):(Gi||($s=Ca.now(),Gi=setInterval(JE,Xy)),xi=1,Zy(y0))}}function w0(e,t,n){var r=new Ds;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var tk=Cy("start","end","cancel","interrupt"),nk=[],Qy=0,_0=1,xf=2,Oo=3,v0=4,Pf=5,qo=6;function Eu(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;rk(e,n,{name:t,index:r,group:i,on:tk,tween:nk,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Qy})}function Yc(e,t){var n=sn(e,t);if(n.state>Qy)throw new Error("too late; already scheduled");return n}function Mn(e,t){var n=sn(e,t);if(n.state>Oo)throw new Error("too late; already running");return n}function sn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rk(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ky(a,0,n.time);function a(l){n.state=_0,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var f,c,h,d;if(n.state!==_0)return u();for(f in r)if(d=r[f],d.name===n.name){if(d.state===Oo)return w0(o);d.state===v0?(d.state=qo,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[f]):+f<t&&(d.state=qo,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[f])}if(w0(function(){n.state===Oo&&(n.state=v0,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=xf,n.on.call("start",e,e.__data__,n.index,n.group),n.state===xf){for(n.state=Oo,i=new Array(h=n.tween.length),f=0,c=-1;f<h;++f)(d=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++c]=d);i.length=c+1}}function s(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Pf,1),c=-1,h=i.length;++c<h;)i[c].call(e,f);n.state===Pf&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=qo,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function ik(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>xf&&r.state<Pf,r.state=qo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function ak(e){return this.each(function(){ik(this,e)})}function ok(e,t){var n,r;return function(){var i=Mn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function sk(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=Mn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function uk(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=sn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?ok:sk)(n,e,t))}function jc(e,t,n){var r=e._id;return e.each(function(){var i=Mn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return sn(i,r).value[t]}}function Jy(e,t){var n;return(typeof t=="number"?Wn:t instanceof ka?wf:(n=ka(t))?(t=n,wf):VE)(e,t)}function lk(e){return function(){this.removeAttribute(e)}}function fk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ck(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function hk(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function dk(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function mk(e,t,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s)))}}function pk(e,t){var n=Su(e),r=n==="transform"?ZE:Jy;return this.attrTween(e,typeof t=="function"?(n.local?mk:dk)(n,r,jc(this,"attr."+e,t)):t==null?(n.local?fk:lk)(n):(n.local?hk:ck)(n,r,t))}function bk(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function gk(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function yk(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&gk(e,a)),n}return i._value=t,i}function wk(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&bk(e,a)),n}return i._value=t,i}function _k(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Su(e);return this.tween(n,(r.local?yk:wk)(r,t))}function vk(e,t){return function(){Yc(this,e).delay=+t.apply(this,arguments)}}function Mk(e,t){return t=+t,function(){Yc(this,e).delay=t}}function xk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vk:Mk)(t,e)):sn(this.node(),t).delay}function Pk(e,t){return function(){Mn(this,e).duration=+t.apply(this,arguments)}}function Sk(e,t){return t=+t,function(){Mn(this,e).duration=t}}function Ak(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Pk:Sk)(t,e)):sn(this.node(),t).duration}function Ek(e,t){if(typeof t!="function")throw new Error;return function(){Mn(this,e).ease=t}}function kk(e){var t=this._id;return arguments.length?this.each(Ek(t,e)):sn(this.node(),t).ease}function Ck(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Mn(this,e).ease=n}}function Tk(e){if(typeof e!="function")throw new Error;return this.each(Ck(this._id,e))}function $k(e){typeof e!="function"&&(e=Ny(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&e.call(u,u.__data__,l,a)&&s.push(u);return new On(r,this._parents,this._name,this._id)}function Dk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=t[s],l=n[s],f=u.length,c=o[s]=new Array(f),h,d=0;d<f;++d)(h=u[d]||l[d])&&(c[d]=h);for(;s<r;++s)o[s]=t[s];return new On(o,this._parents,this._name,this._id)}function Nk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Lk(e,t,n){var r,i,a=Nk(t)?Yc:Mn;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function Ik(e,t){var n=this._id;return arguments.length<2?sn(this.node(),n).on.on(e):this.each(Lk(n,e,t))}function Fk(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Rk(){return this.on("end.remove",Fk(this._id))}function Bk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zc(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,l=a[o]=new Array(u),f,c,h=0;h<u;++h)(f=s[h])&&(c=e.call(f,f.__data__,h,s))&&("__data__"in f&&(c.__data__=f.__data__),l[h]=c,Eu(l[h],t,n,h,l,sn(f,n)));return new On(a,this._parents,t,n)}function Ok(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Dy(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],l=u.length,f,c=0;c<l;++c)if(f=u[c]){for(var h=e.call(f,f.__data__,c,u),d,m=sn(f,n),p=0,g=h.length;p<g;++p)(d=h[p])&&Eu(d,t,n,p,h,m);a.push(h),o.push(f)}return new On(a,o,t,n)}var qk=ro.prototype.constructor;function Gk(){return new qk(this._groups,this._parents)}function Uk(e,t){var n,r,i;return function(){var a=Mi(this,e),o=(this.style.removeProperty(e),Mi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function e3(e){return function(){this.style.removeProperty(e)}}function zk(e,t,n){var r,i=n+"",a;return function(){var o=Mi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function Hk(e,t,n){var r,i,a;return function(){var o=Mi(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Mi(this,e))),o===u?null:o===r&&u===i?a:(i=u,a=t(r=o,s))}}function Wk(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var u=Mn(this,e),l=u.on,f=u.value[a]==null?s||(s=e3(t)):void 0;(l!==n||i!==f)&&(r=(n=l).copy()).on(o,i=f),u.on=r}}function Vk(e,t,n){var r=(e+="")=="transform"?XE:Jy;return t==null?this.styleTween(e,Uk(e,r)).on("end.style."+e,e3(e)):typeof t=="function"?this.styleTween(e,Hk(e,r,jc(this,"style."+e,t))).each(Wk(this._id,e)):this.styleTween(e,zk(e,r,t),n).on("end.style."+e,null)}function Yk(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function jk(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Yk(e,o,n)),r}return a._value=t,a}function Xk(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,jk(e,t,n??""))}function Zk(e){return function(){this.textContent=e}}function Kk(e){return function(){var t=e(this);this.textContent=t??""}}function Qk(e){return this.tween("text",typeof e=="function"?Kk(jc(this,"text",e)):Zk(e==null?"":e+""))}function Jk(e){return function(t){this.textContent=e.call(this,t)}}function eC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Jk(i)),t}return r._value=e,r}function tC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,eC(e))}function nC(){for(var e=this._name,t=this._id,n=t3(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var f=sn(u,t);Eu(u,e,n,l,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new On(r,this._parents,e,n)}function rC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var l=Mn(this,r),f=l.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),i===0&&a()})}var iC=0;function On(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function t3(){return++iC}var fr=ro.prototype;On.prototype={constructor:On,select:Bk,selectAll:Ok,filter:$k,merge:Dk,selection:Gk,transition:nC,call:fr.call,nodes:fr.nodes,node:fr.node,size:fr.size,empty:fr.empty,each:fr.each,on:Ik,attr:pk,attrTween:_k,style:Vk,styleTween:Xk,text:Qk,textTween:tC,remove:Rk,tween:uk,delay:xk,duration:Ak,ease:kk,easeVarying:Tk,end:rC,[Symbol.iterator]:fr[Symbol.iterator]};function aC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var oC={time:null,delay:0,duration:250,ease:aC};function sC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function uC(e){var t,n;e instanceof On?(t=e._id,e=e._name):(t=t3(),(n=oC).time=Vc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&Eu(u,e,t,l,o,n||sC(u,t));return new On(r,this._parents,e,t)}ro.prototype.interrupt=ak;ro.prototype.transition=uC;function ta(e,t,n){this.k=e,this.x=t,this.y=n}ta.prototype={constructor:ta,scale:function(e){return e===1?this:new ta(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ta(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ta.prototype;var lC={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,s="",u,l,f=0;for(;f<r.length;)o=i.indexOf(r.charAt(f++))<<18|i.indexOf(r.charAt(f++))<<12|(u=i.indexOf(r.charAt(f++)))<<6|(l=i.indexOf(r.charAt(f++))),s+=u===64?String.fromCharCode(o>>16&255):l===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return s},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(s){i(n.Uint8(new Uint8Array(s.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let s=0;s<a;s++)o[s]=i.charCodeAt(s);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(u){return this.pointer+=u,this.pointer},readInt:function(u){if(u=Math.min(u,this.data.byteLength-this.pointer),u<1)return-1;let l=0;if(u>1)for(let f=1;f<=u-1;f++)l+=this.data.getUint8(this.pointer)*Math.pow(256,u-f),this.pointer++;return l+=this.data.getUint8(this.pointer),this.pointer++,l},readStr:function(u){let l="";for(let f=1;f<=u;f++)l+=String.fromCharCode(this.readInt(1));return l},readIntVLV:function(){let u=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)u=this.readInt(1);else{let l=[];for(;this.data.getUint8(this.pointer)>=128;)l.push(this.readInt(1)-128);let f=this.readInt(1);for(let c=1;c<=l.length;c++)u+=l[l.length-c]*Math.pow(128,c);u+=f}return u}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),s=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=s):a.timeDivision=o*256+s;for(let u=1;u<=a.tracks;u++){a.track[u-1]={event:[]};let l=i.readInt(4);if(l===-1)break;if(l!==1297379947)return!1;i.readInt(4);let f=0,c=!1,h,d;for(;!c&&(f++,a.track[u-1].event[f-1]={},a.track[u-1].event[f-1].deltaTime=i.readIntVLV(),h=i.readInt(1),h!==-1);)if(h>=128?d=h:(h=d,i.movePointer(-1)),h===255){a.track[u-1].event[f-1].type=255,a.track[u-1].event[f-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[u-1].event[f-1].metaType){case 47:case-1:c=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[u-1].event[f-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[u-1].event[f-1].data=i.readInt(m);break;case 84:a.track[u-1].event[f-1].data=[],a.track[u-1].event[f-1].data[0]=i.readInt(1),a.track[u-1].event[f-1].data[1]=i.readInt(1),a.track[u-1].event[f-1].data[2]=i.readInt(1),a.track[u-1].event[f-1].data[3]=i.readInt(1),a.track[u-1].event[f-1].data[4]=i.readInt(1);break;case 88:a.track[u-1].event[f-1].data=[],a.track[u-1].event[f-1].data[0]=i.readInt(1),a.track[u-1].event[f-1].data[1]=i.readInt(1),a.track[u-1].event[f-1].data[2]=i.readInt(1),a.track[u-1].event[f-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[u-1].event[f-1].data=this.customInterpreter(a.track[u-1].event[f-1].metaType,i,m)),(this.customInterpreter===null||a.track[u-1].event[f-1].data===!1)&&(i.readInt(m),a.track[u-1].event[f-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(h=h.toString(16).split(""),h[1]||h.unshift("0"),a.track[u-1].event[f-1].type=parseInt(h[0],16),a.track[u-1].event[f-1].channel=parseInt(h[1],16),a.track[u-1].event[f-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[u-1].event[f-1].data=this.customInterpreter(a.track[u-1].event[f-1].type,i,!1)),this.customInterpreter===null||a.track[u-1].event[f-1].data===!1){let m=i.readIntVLV();a.track[u-1].event[f-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[u-1].event[f-1].data=[],a.track[u-1].event[f-1].data[0]=i.readInt(1),a.track[u-1].event[f-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[u-1].event[f-1].data=i.readInt(1);break;case-1:c=!0;break;default:if(this.customInterpreter!==null&&(a.track[u-1].event[f-1].data=this.customInterpreter(a.track[u-1].event[f-1].metaType,i,!1)),this.customInterpreter===null||a.track[u-1].event[f-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(lC);function Xc(e){return 1/(e/60)}const n3=[],fC=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of fC)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;n3.push({type:e,dots:t,duration:n})}n3.sort((e,t)=>e.duration-t.duration);class he{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>ky(r).pitch),this.stringCount=n.length}}new he("E stand.",["E2","A2","D3","G3","B3","E4"]),new he("Drop D",["D2","A2","D3","G3","B3","E4"]),new he("Drop C",["C2","G2","C3","F3","A3","D4"]),new he("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new he("1 down",["D2","G2","C3","F3","A3","D4"]),new he("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new he("2 down",["C2","F2","A#2","D#3","G3","C4"]),new he("DADGAG",["D2","A2","D3","G3","A3","D4"]),new he("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new he("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new he("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new he("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new he("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new he("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new he("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new he("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new he("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new he("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new he("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new he("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new he("E stand.",["E1","A1","D2","G2"]),new he("Drop D",["D1","A1","D2","G2"]),new he("1/2 down",["D#1","G#1","C#2","F#2"]),new he("1 down",["D1","G1","C2","F2"]),new he("1 1/2 down",["C#1","F#1","B1","E2"]),new he("2 down",["C1","F1","A#1","D#2"]),new he("B stand.",["B0","E1","A1","D2","G2"]),new he("Drop A",["A0","D1","A1","D2","G2"]),new he("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new he("1 down",["A0","D1","G1","C2","F2"]),new he("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new he("2 down",["G0","C1","F1","A#1","D#2"]),new he("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new he("Drop E",["E0","A0","D1","A1","D2","G2"]),new he("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new he("1 down",["E1","A0","D1","G1","C2","F2"]),new he("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new he("2 down",["D0","G0","C1","F1","A#1","D#2"]),new he("Hawaii",["G4","C4","E4","A4"]),new he("Low G",["G3","C4","E4","A4"]),new he("D-tuning",["A4","D4","F#4","B4"]),new he("Canadian",["A3","D4","F#4","B4"]),new he("Bariton",["D3","G3","B3","E4"]);function r3(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function i3(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var a3=[0,2,4,-1,1,3,5],o3=a3.map(e=>Math.floor(e*7/12));function s3(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=a3[t]+7*n;if(r===void 0)return[i*a];const o=r-o3[t]-4*n;return[i*a,i*o]}var cC=[3,0,4,1,5,2,6];function hC(e){const[t,n,r]=e,i=cC[dC(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+o3[i];return{step:i,alt:a,oct:o,dir:r}}function dC(e){const t=(e+1)%7;return t<0?7+t:t}var M0=(e,t)=>Array(Math.abs(t)+1).join(e),Sf=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),mC="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",pC="(AA|A|P|M|m|d|dd)([-+]?\\d+)",bC=new RegExp("^"+mC+"|"+pC+"$");function gC(e){const t=bC.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var x0={};function Ns(e){return typeof e=="string"?x0[e]||(x0[e]=yC(e)):i3(e)?Ns(_C(e)):r3(e)?Ns(e.name):Sf}var P0=[0,2,4,5,7,9,11],u3="PMMPPMM";function yC(e){const t=gC(e);if(t[0]==="")return Sf;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=u3[i];if(a==="M"&&r==="P")return Sf;const o=a==="M"?"majorable":"perfectable",s=""+n+r,u=n<0?-1:1,l=n===8||n===-8?n:u*(i+1),f=wC(o,r),c=Math.floor((Math.abs(n)-1)/7),h=u*(P0[i]+f+12*c),d=(u*(P0[i]+f)%12+12)%12,m=s3({step:i,alt:f,oct:c,dir:u});return{empty:!1,name:s,num:n,q:r,step:i,alt:f,dir:u,type:o,simple:l,semitones:h,chroma:d,coord:m,oct:c}}function wC(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function _C(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,s=i<0?"-":"",u=u3[t]==="M"?"majorable":"perfectable";return s+o+vC(u,n)}function vC(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?M0("A",t):M0("d",e==="perfectable"?t:t+1)}var S0=(e,t)=>Array(Math.abs(t)+1).join(e),l3=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),A0=new Map,MC=e=>"CDEFGAB".charAt(e),xC=e=>e<0?S0("b",-e):S0("#",e),PC=e=>e[0]==="b"?-e.length:e.length;function Ta(e){const t=JSON.stringify(e),n=A0.get(t);if(n)return n;const r=typeof e=="string"?CC(e):i3(e)?Ta(TC(e)):r3(e)?Ta(e.name):l3;return A0.set(t,r),r}var SC=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function AC(e){const t=SC.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function EC(e){return Ta(hC(e))}var kC=(e,t)=>(e%t+t)%t,yl=[0,2,4,5,7,9,11];function CC(e){const t=AC(e);if(t[0]===""||t[3]!=="")return l3;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=PC(r),s=i.length?+i:void 0,u=s3({step:a,alt:o,oct:s}),l=n+r+i,f=n+r,c=(yl[a]+o+120)%12,h=s===void 0?kC(yl[a]+o,12)-12*99:yl[a]+o+12*(s+1),d=h>=0&&h<=127?h:null,m=s===void 0?null:Math.pow(2,(h-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:c,coord:u,freq:m,height:h,letter:n,midi:d,name:l,oct:s,pc:f,step:a}}function TC(e){const{step:t,alt:n,oct:r}=e,i=MC(t);if(!i)return"";const a=i+xC(n);return r||r===0?a+r:a}function $C(e,t){const n=Ta(e),r=Array.isArray(t)?t:Ns(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return EC(a).name}function f3(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var er={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},c3=e=>Number(e).toString(2).padStart(12,"0"),E0=e=>parseInt(e,2),DC=/^[01]{12}$/;function h3(e){return DC.test(e)}var NC=e=>typeof e=="number"&&e>=0&&e<=4095,LC=e=>e&&h3(e.chroma),k0={[er.chroma]:er};function Zc(e){const t=h3(e)?e:NC(e)?c3(e):Array.isArray(e)?OC(e):LC(e)?e.chroma:er.chroma;return k0[t]=k0[t]||BC(t)}var IC=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function FC(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(IC[n]);return t}function RC(e){const t=e.split("");return t.map((n,r)=>f3(r,t).join(""))}function BC(e){const t=E0(e),n=RC(e).map(E0).filter(a=>a>=2048).sort()[0],r=c3(n),i=FC(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function OC(e){if(e.length===0)return er.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=Ta(e[r]),t.empty&&(t=Ns(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var qC=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],GC=qC;({...er});var d3=[],Go={};function UC(e,t,n){const r=HC(e),i={...Zc(e),name:n||"",quality:r,intervals:e,aliases:t};d3.push(i),i.name&&(Go[i.name]=i),Go[i.setNum]=i,Go[i.chroma]=i,i.aliases.forEach(a=>zC(i,a))}function zC(e,t){Go[t]=e}function HC(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}GC.forEach(([e,t,n])=>UC(e.split(" "),n.split(" "),t));d3.sort((e,t)=>e.setNum-t.setNum);var WC=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],VC=WC;({...er});var m3=[],Uo={};function YC(e,t,n){const r=XC(e),i={...Zc(e),name:n||"",quality:r,intervals:e,aliases:t};m3.push(i),i.name&&(Uo[i.name]=i),Uo[i.setNum]=i,Uo[i.chroma]=i,i.aliases.forEach(a=>jC(i,a))}function jC(e,t){Uo[t]=e}function XC(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}VC.forEach(([e,t,n])=>YC(e.split(" "),n.split(" "),t));m3.sort((e,t)=>e.setNum-t.setNum);var ZC=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],KC=ZC,QC={...er,intervals:[],aliases:[]},ua={};function JC(e){return ua[e]||QC}function eT(e,t,n=[]){const r={...Zc(e),name:t,intervals:e,aliases:n};return ua[r.name]=r,ua[r.setNum]=r,ua[r.chroma]=r,r.aliases.forEach(i=>tT(r,i)),r}function tT(e,t){ua[t]=e}KC.forEach(([e,t,...n])=>eT(e.split(" "),t,n));var Kc=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],C0={...er,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},nT=Kc.map(rT),Af={};nT.forEach(e=>{Af[e.name]=e,e.aliases.forEach(t=>{Af[t]=e})});function p3(e){return typeof e=="string"?Af[e.toLowerCase()]||C0:e&&e.name?p3(e.name):C0}function rT(e){const[t,n,r,i,a,o,s]=e,u=s?[s]:[],l=Number(n).toString(2);return{empty:!1,intervals:JC(i).intervals,modeNum:t,chroma:l,normalized:l,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:u}}function b3(e){return(t,n)=>{const r=p3(t);if(r.empty)return[];const i=f3(r.modeNum,e),a=r.intervals.map(o=>$C(n,o));return i.map((o,s)=>a[s]+o)}}b3(Kc.map(e=>e[4]));b3(Kc.map(e=>e[5]));class zn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>ky(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="°",s-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",s=i-12;for(;s>0&&n.has(s);)a=n.get(s).number,o+="°",s-=12;const u=jS(i).name;n.set(i,{number:a,letterString:`${u}${o}`})}return[...n.values()].map(r=>r.letterString)}}new zn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new zn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new zn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new zn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new zn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new zn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new zn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new zn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function iT(e,t=1){const n=Hy(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>iT(e,.5));const aT=wf("black","steelblue");Array.from({length:12}).map((e,t)=>aT(t/11));function oT(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px"),We(t,"width",e[0]+"px"),We(t,"margin","auto")},m(a,o){z(a,t,o),x(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i),o&1&&We(t,"width",a[0]+"px")},i:Pe,o:Pe,d(a){a&&U(t),e[4](null)}}}function sT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;rn(()=>{const u=[...new Set(r)],l=u.map((c,h)=>h===0?0:c-u[h-1]),f=Yt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},x:{label:"beat"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[Py(l,{x:(c,h)=>h+1,fill:c=>c})]});n(2,o.textContent="",o),o.appendChild(f)});function s(u){dt[u?"unshift":"push"](()=>{o=u,n(2,o)})}return e.$$set=u=>{"pattern"in u&&n(3,r=u.pattern),"width"in u&&n(0,i=u.width),"height"in u&&n(1,a=u.height)},[i,a,o,r,s]}class Mr extends Ze{constructor(t){super(),Xe(this,t,sT,oT,je,{pattern:3,width:0,height:1})}}function uT(e,t,n){const r=e.slice();return r[16]=t[n],r}function lT(e){let t;return{c(){t=S("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],$e(t,t.__value)},m(n,r){z(n,t,r)},p:Pe,d(n){n&&U(t)}}}function fT(e){let t,n,r,i,a,o,s,u,l,f,c,h,d,m,p,g,y,b,v,w,M,_,P,T,D,I,E,F=Et(["single note","single beat","only snare","beat 5"]),G=[];for(let $=0;$<4;$+=1)G[$]=lT(uT(e,F,$));return m=new Uc({props:{audioData:e[2],sampleRate:e[3]}}),g=new vr({props:{audioData:e[2],width:Ui,height:zi}}),b=new IS({props:{pattern:e[4],width:Ui,height:zi}}),w=new BS({props:{pattern:e[4],width:Ui,height:zi}}),_=new GS({props:{pattern:e[4],width:Ui,height:zi}}),T=new Mr({props:{pattern:e[4],width:Ui,height:zi}}),{c(){t=S("main"),n=S("h2"),n.textContent="Playground",r=L(),i=S("div"),a=S("label"),o=ue(`error mode:
      `),s=S("select");for(let $=0;$<4;$+=1)G[$].c();u=L(),l=S("label"),f=ue(`error severity (in seconds):
      `),c=S("input"),h=L(),d=S("div"),be(m.$$.fragment),p=L(),be(g.$$.fragment),y=L(),be(b.$$.fragment),v=L(),be(w.$$.fragment),M=L(),be(_.$$.fragment),P=L(),be(T.$$.fragment),e[0]===void 0&&ai(()=>e[5].call(s)),C(a,"class","svelte-1sot113"),C(c,"type","number"),C(c,"min","-0.5"),C(c,"max","0.5"),C(c,"step","0.01"),C(l,"class","svelte-1sot113"),C(d,"class","stimuli svelte-1sot113")},m($,A){z($,t,A),x(t,n),x(t,r),x(t,i),x(i,a),x(a,o),x(a,s);for(let O=0;O<4;O+=1)G[O]&&G[O].m(s,null);ii(s,e[0],!0),x(i,u),x(i,l),x(l,f),x(l,c),$e(c,e[1]),x(t,h),x(t,d),de(m,d,null),x(d,p),de(g,d,null),x(d,y),de(b,d,null),x(d,v),de(w,d,null),x(d,M),de(_,d,null),x(d,P),de(T,d,null),D=!0,I||(E=[Oe(s,"change",e[5]),Oe(c,"input",e[6])],I=!0)},p($,[A]){A&1&&ii(s,$[0]),A&2&&gn(c.value)!==$[1]&&$e(c,$[1]);const O={};A&4&&(O.audioData=$[2]),A&8&&(O.sampleRate=$[3]),m.$set(O);const ae={};A&4&&(ae.audioData=$[2]),g.$set(ae);const ie={};A&16&&(ie.pattern=$[4]),b.$set(ie);const ne={};A&16&&(ne.pattern=$[4]),w.$set(ne);const H={};A&16&&(H.pattern=$[4]),_.$set(H);const j={};A&16&&(j.pattern=$[4]),T.$set(j)},i($){D||(q(m.$$.fragment,$),q(g.$$.fragment,$),q(b.$$.fragment,$),q(w.$$.fragment,$),q(_.$$.fragment,$),q(T.$$.fragment,$),D=!0)},o($){Z(m.$$.fragment,$),Z(g.$$.fragment,$),Z(b.$$.fragment,$),Z(w.$$.fragment,$),Z(_.$$.fragment,$),Z(T.$$.fragment,$),D=!1},d($){$&&U(t),hr(G,$),me(m),me(g),me(b),me(w),me(_),me(T),I=!1,nn(E)}}}let Ui=600,zi=100,cT=120;const T0=4;function hT(e,t,n){let r="beat 5",i=0,a=Xc(cT),o=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const s=T0*a;let u=null,l,f=[];const c=async()=>{o=await Promise.all(o.map(async y=>({...y,times:y.beats.map(b=>a*(b-1)),timesOriginal:y.beats.map(b=>a*(b-1)),audioBuffer:await ic(y.sample)})))},h=(y="single note",b=0)=>{if(b===0)return o;console.log(`Adding error ${y} ${b}`);const v=d([o]),w=v.filter(P=>P.instrument==="snare")[0],M=v.filter(P=>P.instrument==="hihat")[0],_=v.filter(P=>P.instrument==="bass")[0];return y==="single note"?w.times[1]=w.timesOriginal[1]+b:y==="single beat"?(w.times[1]=w.timesOriginal[1]+b,M.times[6]=M.timesOriginal[6]+b):y==="only snare"?(w.times[0]=w.timesOriginal[0]+b,w.times[1]=w.timesOriginal[1]+b):y==="beat 5"&&(_.times[1]=_.timesOriginal[1]+b,M.times[4]=M.timesOriginal[4]+b),v},d=y=>{console.log(`concat ${y.length} patterns`);const b=y[0].map(v=>({...v,beats:[...v.beats],times:[...v.times],timesOriginal:[...v.timesOriginal]}));for(let v=1;v<y.length;v++){const w=y[v];for(const M of w){const _=b.filter(P=>P.instrument===M.instrument)[0];_.beats=[..._.beats,...M.beats.map(P=>P+v*T0)],_.times=[..._.times,...M.times.map(P=>P+v*s)],_.timesOriginal=[..._.timesOriginal,...M.timesOriginal.map(P=>P+v*s)]}}return b},m=async(y,b)=>{if(!o[0].audioBuffer)return;const w=[h(y,b)],M=d(w);n(4,f=M.map(_=>_.times).flat().sort()),M.map(_=>_.times.map(P=>({time:P,instr:_.instrument}))).flat(1/0).sort((_,P)=>{_.time-P.time}),n(3,l=M[0].audioBuffer.sampleRate),n(2,u=Ms(M,s*w.length+.1,l)),M.map(_=>{const P=Ms([_],s*w.length+.1,l);return{instr:_.instrument,audio:P}})};Si(async()=>{await c(),m()});function p(){r=Ef(this),n(0,r)}function g(){i=gn(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&m(r,i)},[r,i,u,l,f,p,g]}class dT extends Ze{constructor(t){super(),Xe(this,t,hT,fT,je,{})}}function mT(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px")},m(a,o){z(a,t,o),x(t,n),e[9](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i)},i:Pe,o:Pe,d(a){a&&U(t),e[9](null)}}}function pT(e,t,n){let{title:r=void 0}=t,{final:i=void 0}=t,{width:a=600}=t,{height:o=180}=t,{data:s}=t,{x:u=(d,m)=>m}=t,{y:l=d=>d}=t,{xDomain:f=[0,70]}=t,c;rn(()=>{console.log({final:i}),n(2,c.textContent="",c);const d=Yt({title:r,width:a,height:o,x:{domain:f},marks:[kS(s,{x:u,y:l,stroke:"#ccc"}),Pu(s,{x:u,y:l,fill:"#aaa",r:2,tip:!0}),As([0]),As([i],{stroke:"#88888888"}),vu([i],{x:65,y:i,dy:-7,text:m=>`final: ${m.toFixed(3)}`})]});c.appendChild(d)});function h(d){dt[d?"unshift":"push"](()=>{c=d,n(2,c)})}return e.$$set=d=>{"title"in d&&n(3,r=d.title),"final"in d&&n(4,i=d.final),"width"in d&&n(0,a=d.width),"height"in d&&n(1,o=d.height),"data"in d&&n(5,s=d.data),"x"in d&&n(6,u=d.x),"y"in d&&n(7,l=d.y),"xDomain"in d&&n(8,f=d.xDomain)},[a,o,c,r,i,s,u,l,f,h]}class bT extends Ze{constructor(t){super(),Xe(this,t,pT,mT,je,{title:3,final:4,width:0,height:1,data:5,x:6,y:7,xDomain:8})}}var g3={exports:{}};(function(e,t){(function(n,r){r()})(Bi,function(){function n(l,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,f,c){var h=new XMLHttpRequest;h.open("GET",l),h.responseType="blob",h.onload=function(){u(h.response,f,c)},h.onerror=function(){console.error("could not download file")},h.send()}function i(l){var f=new XMLHttpRequest;f.open("HEAD",l,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Bi=="object"&&Bi.global===Bi?Bi:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(l,f,c){var h=o.URL||o.webkitURL,d=document.createElement("a");f=f||l.name||"download",d.download=f,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?a(d):i(d.href)?r(l,f,c):a(d,d.target="_blank")):(d.href=h.createObjectURL(l),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,f,c){if(f=f||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,c),f);else if(i(l))r(l,f,c);else{var h=document.createElement("a");h.href=l,h.target="_blank",setTimeout(function(){a(h)})}}:function(l,f,c,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof l=="string")return r(l,f,c);var d=l.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||s)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=p?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},g.readAsDataURL(l)}else{var y=o.URL||o.webkitURL,b=y.createObjectURL(l);h?h.location=b:location.href=b,h=null,setTimeout(function(){y.revokeObjectURL(b)},4e4)}});o.saveAs=u.saveAs=u,e.exports=u})})(g3);var gT=g3.exports;const $0=Mg(gT);function yT(e){let t,n,r;return{c(){t=S("div"),C(t,"width",n=e[0]+"px"),C(t,"height",r=e[1]+"px")},m(i,a){z(i,t,a),e[6](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&C(t,"width",n),a&2&&r!==(r=i[1]+"px")&&C(t,"height",r)},i:Pe,o:Pe,d(i){i&&U(t),e[6](null)}}}function wT(e,t,n){let{data:r}=t,{domain:i}=t,{title:a=""}=t,{width:o=800}=t,{height:s=100}=t,u;rn(()=>{const f=Yt({width:o,height:s,marginLeft:70,marginRight:10,x:{label:a,domain:i},y:{axis:!1,type:"band"},marks:[Gc(r,{x:c=>c}),vu(r,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${h+1}`})]});n(2,u.textContent="",u),u.appendChild(f)});function l(f){dt[f?"unshift":"push"](()=>{u=f,n(2,u)})}return e.$$set=f=>{"data"in f&&n(3,r=f.data),"domain"in f&&n(4,i=f.domain),"title"in f&&n(5,a=f.title),"width"in f&&n(0,o=f.width),"height"in f&&n(1,s=f.height)},[o,s,u,r,i,a,l]}class _T extends Ze{constructor(t){super(),Xe(this,t,wT,yT,je,{data:3,domain:4,title:5,width:0,height:1})}}function vT(e){let t,n,r;return{c(){t=S("div"),C(t,"width",n=e[0]+"px"),C(t,"height",r=e[1]+"px")},m(i,a){z(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&C(t,"width",n),a&2&&r!==(r=i[1]+"px")&&C(t,"height",r)},i:Pe,o:Pe,d(i){i&&U(t),e[5](null)}}}function MT(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;rn(()=>{const l=r.map(c=>({encoding:c.encoding,...s(c.finals)})),f=Yt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:l.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[Pu(l,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),qc(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Dc([0])]});n(2,o.textContent="",o),o.appendChild(f)});function s(l){const f=l.length,c=qs(l),m=1.96*(Fs(l)/Math.sqrt(f)),p=c-m,g=c+m;return{mean:c,low:p,high:g}}function u(l){dt[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,s,u]}class xT extends Ze{constructor(t){super(),Xe(this,t,MT,vT,je,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function PT(e){let t,n,r;return{c(){t=S("div"),C(t,"width",n=e[0]+"px"),C(t,"height",r=e[1]+"px")},m(i,a){z(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&C(t,"width",n),a&2&&r!==(r=i[1]+"px")&&C(t,"height",r)},i:Pe,o:Pe,d(i){i&&U(t),e[5](null)}}}function ST(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;rn(()=>{const l=r.map(c=>({encoding:c.encoding,...s(c.trialCounts)})),f=Yt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:l.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[Pu(l,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),qc(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Dc([0])]});n(2,o.textContent="",o),o.appendChild(f)});function s(l){const f=l.length,c=qs(l),m=1.96*(Fs(l)/Math.sqrt(f)),p=c-m,g=c+m;return{mean:c,low:p,high:g}}function u(l){dt[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,s,u]}class AT extends Ze{constructor(t){super(),Xe(this,t,ST,PT,je,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function D0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function ET(e,t,n,r,i,a){const o=new Float64Array(a),s=(a-1)/(i-r);for(let u=0;u<e.length;++u){const l=e[u],f=t(l,u,e),c=n(l,u,e);if(!(Number.isFinite(f)&&Number.isFinite(c)))continue;const h=(f-r)*s,d=Math.floor(h),m=d+1;0<=d&&m<a?(o[d]+=(m-h)*c,o[m]+=(h-d)*c):d===-1?o[m]+=(h-d)*c:m===a&&(o[d]+=(m-h)*c)}return o}function N0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);kT(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,s=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:s}}function kT(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),s=.6318/n,u=1.997/n,l=Float64Array.of(-a*Math.cos(s),a*Math.sin(s),-a*Math.cos(-s),a*Math.sin(-s),-o*Math.cos(u),o*Math.sin(u),-o*Math.cos(-u),o*Math.sin(-u)),f=n*2.5066282746310007,c=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(c[m]=l[m]*c[m-2]-l[m+1]*c[m-1],c[m+1]=l[m]*c[m-1]+l[m+1]*c[m-2],d=m-2;d>0;d-=2)c[d]+=l[m]*c[d-2]-l[m+1]*c[d-1],c[d+1]+=l[m]*c[d-1]+l[m+1]*c[d-2];for(d=0;d<=m;d+=2)c[d]+=i[m]*h[d]-i[m+1]*h[d+1],c[d+1]+=i[m]*h[d+1]+i[m+1]*h[d];for(h[m+2]=l[m]*h[m]-l[m+1]*h[m+1],h[m+3]=l[m]*h[m+1]+l[m+1]*h[m],d=m;d>0;d-=2)h[d]+=l[m]*h[d-2]-l[m+1]*h[d-1],h[d+1]+=l[m]*h[d-1]+l[m+1]*h[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=c[d]/f,e[m+1]=h[d+2]}function CT(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),s=i,u=TT){const l=r*2,f=r*3,c=r*4,h=r*n;let d,m;for(u(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=c;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-l]+e.b_causal[3]*t[d-f]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(u(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=h-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+l]+e.b_anticausal[3]*t[d+f]+e.b_anticausal[4]*t[d+c]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)s[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)s[d]=Math.max(0,i[m]+a[n-m-1]);return s}function TT(e,t,n,r,i,a,o,s,u,l){const f=Math.abs(r)*n,c=r<0?f+r:0;let h,d,m;for(d=0;d<s;++d)for(l[d]=d<=a?i[d]:0,m=1;m<=s&&m<=d;++m)l[d]-=o[m]*l[d-m];for(m=0;m<s;++m)for(e[m]=0,d=1;d<=m;++d)h=c+r*d,h>=0&&h<f&&(e[m]+=l[m-d]*t[h]);const p=t[c];if(p>0)for(m=0;m<s;++m)e[m]+=l[m]*p}function $T(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const s=t(e[o],o,e);s!=null&&(i===void 0?s>=s&&(i=a=s):(s<i&&(i=s),s>a&&(a=s)))}return[i-n,a+n]}function DT(e,t){const n=e.map(t).filter(l=>l!=null&&l>=l);n.sort((l,f)=>l-f);const r=NT(n),i=L0(n,.25),a=L0(n,.75),o=n.length,s=(a-i)/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function NT(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const s=e[o];r=s-i,i+=r/++n,a+=r*(s-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function L0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function LT(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=D0(t.x,y=>y),o=D0(t.weight,()=>1/e.length);let s=t.bandwidth??n*DT(e,a);const[u,l]=t.extent??$T(e,a,r*s),f=ET(e,a,o,u,l,i),c=(l-u)/(i-1),h=f.some(y=>y<0);let d=N0(s/c,h),m;function*p(y="x",b="y"){const v=g.grid(),w=1/c;for(let M=0;M<i;++M)yield{[y]:u+M*c,[b]:v[M]*w}}const g={[Symbol.iterator]:p,points:p,grid:()=>m||(m=CT(d,f,i)),extent:()=>[u,l],bandwidth(y){return arguments.length?(y!==s&&(s=y,m=null,d=N0(s/c,h)),g):s}};return g}function IT(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px")},m(a,o){z(a,t,o),x(t,n),e[10](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i)},i:Pe,o:Pe,d(a){a&&U(t),e[10](null)}}}function FT(e,t,n){let r,{values:i}=t,{title:a=""}=t,{xLabel:o="some value"}=t,{xDomain:s=void 0}=t,{width:u=1e3}=t,{height:l=100}=t,{bandwidth:f=.25}=t,{bins:c=256}=t,{pad:h=4}=t,d;rn(()=>{const p=[...r.bandwidth(f)];n(2,d.textContent="",d);const g=Yt({width:u,height:l,title:a,style:{background:"none"},grid:!0,x:{label:o,domain:s},y:{label:"density",type:"linear"},marks:[mS(p,{x:"x",y:"y",fill:"#ccc"}),Gc(i,{x:y=>y,strokeWidth:.5}),As([0])]});d.appendChild(g)});function m(p){dt[p?"unshift":"push"](()=>{d=p,n(2,d)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,a=p.title),"xLabel"in p&&n(5,o=p.xLabel),"xDomain"in p&&n(6,s=p.xDomain),"width"in p&&n(0,u=p.width),"height"in p&&n(1,l=p.height),"bandwidth"in p&&n(7,f=p.bandwidth),"bins"in p&&n(8,c=p.bins),"pad"in p&&n(9,h=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=LT(i,{bandwidth:f,pad:h,bins:c}))},[u,l,d,i,a,o,s,f,c,h,m]}class RT extends Ze{constructor(t){super(),Xe(this,t,FT,IT,je,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function BT(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),C(n,"width",r=e[0]+"px"),C(n,"height",i=e[1]+"px")},m(a,o){z(a,t,o),x(t,n),e[13](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&C(n,"width",r),o&2&&i!==(i=a[1]+"px")&&C(n,"height",i)},i:Pe,o:Pe,d(a){a&&U(t),e[13](null)}}}function OT(e,t,n){let{title:r=""}=t,{data:i}=t,{x:a="x"}=t,{y:o="y"}=t,{tipTitle:s=null}=t,{xLabel:u=null}=t,{yLabel:l=null}=t,{xDomain:f=void 0}=t,{yDomain:c=void 0}=t,{grid:h=!1}=t,{width:d=300}=t,{height:m=300}=t,p;rn(()=>{console.log(i,a,o),n(2,p.textContent="",p);const y=Yt({width:d,height:m,title:r,grid:h,style:{background:"none"},x:{label:u||(typeof a=="string"?a:"x"),domain:f},y:{label:l||(typeof o=="string"?o:"y"),domain:c},marks:[Pu(i,{x:a,y:o}),uy(i,y2({x:a,y:o,title:s})),qc({length:1},{x1:f[0],x2:f[1],y1:c[0],y2:c[1],stroke:"#ccc"})]});p.appendChild(y)});function g(y){dt[y?"unshift":"push"](()=>{p=y,n(2,p)})}return e.$$set=y=>{"title"in y&&n(3,r=y.title),"data"in y&&n(4,i=y.data),"x"in y&&n(5,a=y.x),"y"in y&&n(6,o=y.y),"tipTitle"in y&&n(7,s=y.tipTitle),"xLabel"in y&&n(8,u=y.xLabel),"yLabel"in y&&n(9,l=y.yLabel),"xDomain"in y&&n(10,f=y.xDomain),"yDomain"in y&&n(11,c=y.yDomain),"grid"in y&&n(12,h=y.grid),"width"in y&&n(0,d=y.width),"height"in y&&n(1,m=y.height)},[d,m,p,r,i,a,o,s,u,l,f,c,h,g]}class I0 extends Ze{constructor(t){super(),Xe(this,t,OT,BT,je,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function F0(e,t,n){const r=e.slice();return r[12]=t[n],r}function R0(e,t,n){const r=e.slice();return r[15]=t[n],r}function B0(e,t,n){const r=e.slice();return r[18]=t[n],r}function O0(e,t,n){const r=e.slice();return r[21]=t[n],r}function q0(e,t,n){const r=e.slice();return r[24]=t[n],r}function G0(e,t,n){const r=e.slice();return r[27]=t[n][0],r[28]=t[n][1],r}function U0(e){let t,n=e[27]+"",r,i,a=e[28].length+"",o,s;return{c(){t=S("p"),r=ue(n),i=ue(": "),o=ue(a),s=ue(" times")},m(u,l){z(u,t,l),x(t,r),x(t,i),x(t,o),x(t,s)},p(u,l){l&1&&n!==(n=u[27]+"")&&at(r,n),l&1&&a!==(a=u[28].length+"")&&at(o,a)},d(u){u&&U(t)}}}function z0(e){let t,n;return t=new RT({props:{title:`Density of final values for ${e[24][0]}`,values:e[24][1].map(K0),xLabel:"final values",xDomain:[-.01,.2],bandwidth:UT}}),{c(){be(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=`Density of final values for ${r[24][0]}`),i&2&&(a.values=r[24][1].map(K0)),t.$set(a)},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){Z(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function H0(e){let t,n=e[21].encoding+"",r,i,a,o;return a=new _T({props:{data:e[21].finals,title:e[21].encoding,domain:[0,e[2]]}}),{c(){t=S("b"),r=ue(n),i=L(),be(a.$$.fragment)},m(s,u){z(s,t,u),x(t,r),z(s,i,u),de(a,s,u),o=!0},p(s,u){(!o||u&8)&&n!==(n=s[21].encoding+"")&&at(r,n);const l={};u&8&&(l.data=s[21].finals),u&8&&(l.title=s[21].encoding),u&4&&(l.domain=[0,s[2]]),a.$set(l)},i(s){o||(q(a.$$.fragment,s),o=!0)},o(s){Z(a.$$.fragment,s),o=!1},d(s){s&&(U(t),U(i)),me(a,s)}}}function W0(e){let t,n=e[18]+"",r;return{c(){t=S("p"),r=ue(n)},m(i,a){z(i,t,a),x(t,r)},p(i,a){a&1&&n!==(n=i[18]+"")&&at(r,n)},d(i){i&&U(t)}}}function V0(e){let t,n,r,i=e[15].demographics.internalPID+"",a,o,s=e[15].demographics.partID+"",u,l,f,c=Et(e[15].demographics.partFeedback.split(`
`)),h=[];for(let d=0;d<c.length;d+=1)h[d]=W0(B0(e,c,d));return{c(){t=S("div"),n=S("b"),r=ue("P"),a=ue(i),o=L(),u=ue(s),l=ue(`:
        `);for(let d=0;d<h.length;d+=1)h[d].c();f=L(),We(t,"text-align","left")},m(d,m){z(d,t,m),x(t,n),x(n,r),x(n,a),x(t,o),x(t,u),x(t,l);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(t,null);x(t,f)},p(d,m){if(m&1&&i!==(i=d[15].demographics.internalPID+"")&&at(a,i),m&1&&s!==(s=d[15].demographics.partID+"")&&at(u,s),m&1){c=Et(d[15].demographics.partFeedback.split(`
`));let p;for(p=0;p<c.length;p+=1){const g=B0(d,c,p);h[p]?h[p].p(g,m):(h[p]=W0(g),h[p].c(),h[p].m(t,f))}for(;p<h.length;p+=1)h[p].d(1);h.length=c.length}},d(d){d&&U(t),hr(h,d)}}}function Y0(e){let t,n;return t=new bT({props:{title:"P"+e[12].internalPID+" "+e[12].encoding+" "+e[12].data.length+" trials",final:e[12].final,width:GT,height:120,data:e[12].data,x:HT,y:e[7],xDomain:[0,165]}}),{c(){be(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title="P"+r[12].internalPID+" "+r[12].encoding+" "+r[12].data.length+" trials"),i&2&&(a.final=r[12].final),i&2&&(a.data=r[12].data),t.$set(a)},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){Z(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function qT(e){let t,n,r,i,a,o,s,u,l,f,c,h=e[0].length+"",d,m,p=e[1].length+"",g,y,b=e[4].length+"",v,w,M,_,P,T,D,I,E,F,G,$,A,O,ae,ie,ne,H,j,W,K,se,le,oe,Q,ee,R,V,J,N,fe,re,ce,Se,Le,ze=Et(pr(e[0],j0).sort(X0)),ke=[];for(let k=0;k<ze.length;k+=1)ke[k]=U0(G0(e,ze,k));let jt=Et(pr(e[1],Z0)),Ee=[];for(let k=0;k<jt.length;k+=1)Ee[k]=z0(q0(e,jt,k));const ft=k=>Z(Ee[k],1,1,()=>{Ee[k]=null});F=new I0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),$=new I0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),ne=new xT({props:{stimuli:e[3]}}),se=new AT({props:{stimuli:e[3]}});let At=Et(e[3]),Ce=[];for(let k=0;k<At.length;k+=1)Ce[k]=H0(O0(e,At,k));const ur=k=>Z(Ce[k],1,1,()=>{Ce[k]=null});let Nt=Et(e[0].filter(Q0)),He=[];for(let k=0;k<Nt.length;k+=1)He[k]=V0(R0(e,Nt,k));let Je=Et(e[1]),Te=[];for(let k=0;k<Je.length;k+=1)Te[k]=Y0(F0(e,Je,k));const Y=k=>Z(Te[k],1,1,()=>{Te[k]=null});return{c(){t=S("main"),n=S("h2"),n.textContent="Analysis",r=L(),i=S("div"),a=S("label"),o=ue(`Results JSONs and Prolific demographics CSV
      `),s=S("input"),u=L(),l=S("button"),l.textContent="export JSON",f=L(),c=S("div"),d=ue(h),m=ue(` participants completed -
    `),g=ue(p),y=ue(` tests -
    `),v=ue(b),w=ue(" filtered tests"),M=L(),_=S("div"),P=S("h3"),P.textContent="Encoding order",T=L();for(let k=0;k<ke.length;k+=1)ke[k].c();D=L(),I=S("div");for(let k=0;k<Ee.length;k+=1)Ee[k].c();E=L(),be(F.$$.fragment),G=L(),be($.$$.fragment),A=L(),O=S("div"),ae=S("h3"),ae.textContent="Mean and CI of Final Values",ie=L(),be(ne.$$.fragment),H=L(),j=S("div"),W=S("h3"),W.textContent="Mean and CI of Trial Counts",K=L(),be(se.$$.fragment),le=L(),oe=S("div"),Q=S("h3"),Q.textContent="Final Values for Each Stimulus and All Participants",ee=L();for(let k=0;k<Ce.length;k+=1)Ce[k].c();R=L(),V=S("div"),J=S("h3"),J.textContent="Feedback",N=L();for(let k=0;k<He.length;k+=1)He[k].c();fe=L(),re=S("div");for(let k=0;k<Te.length;k+=1)Te[k].c();C(s,"type","file"),C(s,"accept",".json,.csv"),s.multiple=!0},m(k,B){z(k,t,B),x(t,n),x(t,r),x(t,i),x(i,a),x(a,o),x(a,s),x(i,u),x(i,l),x(t,f),x(t,c),x(c,d),x(c,m),x(c,g),x(c,y),x(c,v),x(c,w),x(t,M),x(t,_),x(_,P),x(_,T);for(let te=0;te<ke.length;te+=1)ke[te]&&ke[te].m(_,null);x(t,D),x(t,I);for(let te=0;te<Ee.length;te+=1)Ee[te]&&Ee[te].m(I,null);x(t,E),de(F,t,null),x(t,G),de($,t,null),x(t,A),x(t,O),x(O,ae),x(O,ie),de(ne,O,null),x(t,H),x(t,j),x(j,W),x(j,K),de(se,j,null),x(t,le),x(t,oe),x(oe,Q),x(oe,ee);for(let te=0;te<Ce.length;te+=1)Ce[te]&&Ce[te].m(oe,null);x(t,R),x(t,V),x(V,J),x(V,N);for(let te=0;te<He.length;te+=1)He[te]&&He[te].m(V,null);x(t,fe),x(t,re);for(let te=0;te<Te.length;te+=1)Te[te]&&Te[te].m(re,null);ce=!0,Se||(Le=[Oe(s,"input",e[5]),Oe(l,"click",e[6])],Se=!0)},p(k,[B]){if((!ce||B&1)&&h!==(h=k[0].length+"")&&at(d,h),(!ce||B&2)&&p!==(p=k[1].length+"")&&at(g,p),(!ce||B&16)&&b!==(b=k[4].length+"")&&at(v,b),B&1){ze=Et(pr(k[0],j0).sort(X0));let X;for(X=0;X<ze.length;X+=1){const Ne=G0(k,ze,X);ke[X]?ke[X].p(Ne,B):(ke[X]=U0(Ne),ke[X].c(),ke[X].m(_,null))}for(;X<ke.length;X+=1)ke[X].d(1);ke.length=ze.length}if(B&2){jt=Et(pr(k[1],Z0));let X;for(X=0;X<jt.length;X+=1){const Ne=q0(k,jt,X);Ee[X]?(Ee[X].p(Ne,B),q(Ee[X],1)):(Ee[X]=z0(Ne),Ee[X].c(),q(Ee[X],1),Ee[X].m(I,null))}for(ut(),X=jt.length;X<Ee.length;X+=1)ft(X);lt()}const te={};B&1&&(te.data=k[0]),F.$set(te);const ve={};B&1&&(ve.data=k[0]),$.$set(ve);const xe={};B&8&&(xe.stimuli=k[3]),ne.$set(xe);const Fe={};if(B&8&&(Fe.stimuli=k[3]),se.$set(Fe),B&12){At=Et(k[3]);let X;for(X=0;X<At.length;X+=1){const Ne=O0(k,At,X);Ce[X]?(Ce[X].p(Ne,B),q(Ce[X],1)):(Ce[X]=H0(Ne),Ce[X].c(),q(Ce[X],1),Ce[X].m(oe,null))}for(ut(),X=At.length;X<Ce.length;X+=1)ur(X);lt()}if(B&1){Nt=Et(k[0].filter(Q0));let X;for(X=0;X<Nt.length;X+=1){const Ne=R0(k,Nt,X);He[X]?He[X].p(Ne,B):(He[X]=V0(Ne),He[X].c(),He[X].m(V,null))}for(;X<He.length;X+=1)He[X].d(1);He.length=Nt.length}if(B&2){Je=Et(k[1]);let X;for(X=0;X<Je.length;X+=1){const Ne=F0(k,Je,X);Te[X]?(Te[X].p(Ne,B),q(Te[X],1)):(Te[X]=Y0(Ne),Te[X].c(),q(Te[X],1),Te[X].m(re,null))}for(ut(),X=Je.length;X<Te.length;X+=1)Y(X);lt()}},i(k){if(!ce){for(let B=0;B<jt.length;B+=1)q(Ee[B]);q(F.$$.fragment,k),q($.$$.fragment,k),q(ne.$$.fragment,k),q(se.$$.fragment,k);for(let B=0;B<At.length;B+=1)q(Ce[B]);for(let B=0;B<Je.length;B+=1)q(Te[B]);ce=!0}},o(k){Ee=Ee.filter(Boolean);for(let B=0;B<Ee.length;B+=1)Z(Ee[B]);Z(F.$$.fragment,k),Z($.$$.fragment,k),Z(ne.$$.fragment,k),Z(se.$$.fragment,k),Ce=Ce.filter(Boolean);for(let B=0;B<Ce.length;B+=1)Z(Ce[B]);Te=Te.filter(Boolean);for(let B=0;B<Te.length;B+=1)Z(Te[B]);ce=!1},d(k){k&&U(t),hr(ke,k),hr(Ee,k),me(F),me($),me(ne),me(se),hr(Ce,k),hr(He,k),hr(Te,k),Se=!1,nn(Le)}}}const GT=1200;let UT=.001,zT=20;const j0=e=>e.encodingOrder,X0=(e,t)=>e[1].lenght-t[1].length,Z0=e=>e.testType,K0=e=>e.final,Q0=e=>e.demographics.partFeedback.trim().length>0,HT=(e,t)=>t;function WT(e,t,n){let r,i,a,o,s=[],u=null;const l=async p=>{const g=[];for(const b of p.target.files)if(b.name.endsWith(".csv")){const v=await b.text();u=V5(v),console.log("p demo",u)}else{const v=await b.text();g.push(JSON.parse(v))}const y=pr(g,b=>b.demographics.partID);console.log(`${y.length} participants`,y),n(0,s=g.filter(b=>b.studyStep==="feedback").map((b,v)=>({...b,demographics:{...b.demographics,internalPID:v+1},prolificDemogr:u.filter(w=>w["Participant id"]===b.demographics.partID)[0],finalAudio:b.tests.filter(w=>w.encoding.startsWith("audio"))[0].final,finalColor:b.tests.filter(w=>w.encoding.startsWith("color"))[0].final,finalWaveform:b.tests.filter(w=>w.encoding.startsWith("waveform"))[0].final,encodingOrder:b.tests.map(w=>w.encoding).join(", ")})).filter(b=>b.prolificDemogr!==void 0)),console.log("participants",s)},f=p=>{if(p.lenght===0)return[];const g=(b,v=5)=>{const w=Math.floor(b/v)*v;return`${w}-${w+v-1}`},y=[];for(const b of p)for(const[v,w]of b.tests.entries()){let M=w.encoding;y.push({...b.demographics,partAge:b.demographics.partAge?b.demographics.partAge:g(b.prolificDemogr.Age,10),partSex:b.demographics.partGender?b.demographics.partGender:b.prolificDemogr.Sex,countryBirth:b.prolificDemogr["Country of birth"],countryResidence:b.prolificDemogr["Country of residence"],prolificApprovals:b.prolificDemogr["Total approvals"],...w,date:b.date,testType:M,testOrder:v})}return console.log("tests",y),y},c=(p,g)=>p.filter(y=>y.final<g),h=p=>p.length===0?[]:pr(p,y=>y.testType).map(([y,b])=>{const v=b.map(w=>w.final);return{encoding:y,testType:y,finals:v,finalMean:qs(v),finalVar:Tf(v),trialCounts:b.map(w=>w.trialCount)}}),d=()=>{const p=JSON.stringify(s,void 0,2),g=new Blob([p],{type:"text/plain;charset=utf-8"});$0(g,"participants.json");const y=JSON.stringify(r,void 0,2),b=new Blob([y],{type:"text/plain;charset=utf-8"});$0(b,"tests.json")},m=p=>Math.abs(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=f(s)),e.$$.dirty&2&&n(4,i=c(r,zT)),e.$$.dirty&2&&n(3,a=h(r)),e.$$.dirty&2&&n(2,o=Ut(r.map(p=>Math.abs(p.final)))),e.$$.dirty&2&&console.log("tests by enc",pr(r,p=>p.testType))},[s,r,o,a,i,l,d,m]}class VT extends Ze{constructor(t){super(),Xe(this,t,WT,qT,je,{})}}function Be(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}Be.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};Be.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};Be.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};Be.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=y3(0,e.length-1);return this.activate(e[t]),this};Be.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=y3(0,e.length-1);this.activate(e[t])};Be.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};Be.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};Be.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};Be.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Be.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};Be.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};Be.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};Be.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};Be.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};Be.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};Be.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};Be.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};Be.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};Be.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};Be.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};Be.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const Qc=function(){};Qc.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};Qc.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};Be.prototype.checkErr=new Qc;function y3(e,t){return Math.floor(Math.random()*(t-e+1))+e}function xr(e,t){return new URLSearchParams(e.location.search).get(t)}function YT(e){let t,n,r,i,a,o,s;return{c(){t=S("main"),n=S("audio"),r=L(),i=S("button"),a=ue(e[0]),n.controls=!1},m(u,l){z(u,t,l),x(t,n),e[5](n),x(t,r),x(t,i),x(i,a),o||(s=Oe(i,"click",e[2]),o=!0)},p(u,[l]){l&1&&at(a,u[0])},i:Pe,o:Pe,d(u){u&&U(t),e[5](null),o=!1,s()}}}function jT(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:a="play audio"}=t,o=null,s;const u=(c,h)=>{h&&s&&(o=x9(h,c),ac(o,h.sampleRate,s))};Si(()=>u(r,i));const l=async()=>{s&&(n(1,s.currentTime=0,s),s.play())};function f(c){dt[c?"unshift":"push"](()=>{s=c,n(1,s)})}return e.$$set=c=>{"pattern"in c&&n(3,r=c.pattern),"cachedAudio"in c&&n(4,i=c.cachedAudio),"label"in c&&n(0,a=c.label)},[a,s,l,r,i,f]}class wl extends Ze{constructor(t){super(),Xe(this,t,jT,YT,je,{pattern:3,cachedAudio:4,label:0})}}function XT(e){let t,n,r,i,a,o;return{c(){t=S("main"),n=S("audio"),r=L(),i=S("button"),i.textContent="play audio",n.controls=!1},m(s,u){z(s,t,u),x(t,n),e[4](n),x(t,r),x(t,i),a||(o=Oe(i,"click",e[1]),a=!0)},p:Pe,i:Pe,o:Pe,d(s){s&&U(t),e[4](null),a=!1,o()}}}function ZT(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,a;const o=l=>{l&&a&&ac(l,i,a)};Si(()=>o(r));const s=()=>{a&&(n(0,a.currentTime=0,a),a.play())};function u(l){dt[l?"unshift":"push"](()=>{a=l,n(0,a)})}return e.$$set=l=>{"audioData"in l&&n(2,r=l.audioData),"sampleRate"in l&&n(3,i=l.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&o(r)},[a,s,r,i,u]}class tr extends Ze{constructor(t){super(),Xe(this,t,ZT,XT,je,{audioData:2,sampleRate:3})}}function J0(e){let t;return{c(){t=S("div"),t.innerHTML=`<p class="svelte-9uo0u8">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-9uo0u8">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-9uo0u8">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-9uo0u8">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){z(n,t,r)},d(n){n&&U(t)}}}function e1(e){let t,n,r,i,a,o,s,u,l;return i=new tr({props:{audioData:e[19],sampleRate:e[17]}}),{c(){t=S("div"),n=S("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=L(),be(i.$$.fragment),a=L(),o=S("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",s=L(),u=S("a"),u.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",C(n,"class","svelte-9uo0u8"),C(o,"class","svelte-9uo0u8"),C(u,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(f,c){z(f,t,c),x(t,n),x(t,r),de(i,t,null),x(t,a),x(t,o),x(t,s),x(t,u),l=!0},p(f,c){const h={};c[0]&524288&&(h.audioData=f[19]),c[0]&131072&&(h.sampleRate=f[17]),i.$set(h)},i(f){l||(q(i.$$.fragment,f),l=!0)},o(f){Z(i.$$.fragment,f),l=!1},d(f){f&&U(t),me(i)}}}function t1(e){let t,n,r,i,a,o,s,u,l,f,c,h,d,m,p,g,y,b;return{c(){t=S("div"),n=S("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=L(),i=S("div"),a=S("button"),a.textContent="+",o=L(),s=S("button"),s.textContent="-",u=L(),l=zo("svg"),f=zo("rect"),p=L(),g=S("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,C(n,"class","svelte-9uo0u8"),C(f,"width",c=e[0]*.52),C(f,"height",h=e[25]*2),C(f,"fill","#ccc"),C(f,"rx","8"),C(l,"width",d=e[0]*.52+"px"),C(l,"height",m=e[25]*2+"px"),C(g,"class","svelte-9uo0u8")},m(v,w){z(v,t,w),x(t,n),x(t,r),x(t,i),x(i,a),x(i,o),x(i,s),x(t,u),x(t,l),x(l,f),x(t,p),x(t,g),y||(b=[Oe(a,"click",e[27]),Oe(s,"click",e[28])],y=!0)},p(v,w){w[0]&1&&c!==(c=v[0]*.52)&&C(f,"width",c),w[0]&33554432&&h!==(h=v[25]*2)&&C(f,"height",h),w[0]&1&&d!==(d=v[0]*.52+"px")&&C(l,"width",d),w[0]&33554432&&m!==(m=v[25]*2+"px")&&C(l,"height",m)},d(v){v&&U(t),y=!1,nn(b)}}}function n1(e){let t,n,r,i,a,o,s,u,l,f,c,h,d,m,p,g,y,b,v,w;return h=new wl({props:{pattern:[.1],cachedAudio:e[1][0].audioBuffer,label:"hi-hat"}}),m=new wl({props:{pattern:[.1],cachedAudio:e[1][1].audioBuffer,label:"snare drum"}}),g=new wl({props:{pattern:[.1],cachedAudio:e[1][2].audioBuffer,label:"bass drum"}}),v=new tr({props:{audioData:e[19],sampleRate:e[17]}}),{c(){t=S("div"),n=S("div"),n.innerHTML=`<p class="svelte-9uo0u8">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-9uo0u8">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-9uo0u8">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played together will still be played at
          the same time, but this time will be either too early or too late.
          Notes after the mistake will also be affected and be early/late, such
          that only one time interval is shorter/longer than supposed.</p>`,r=ue(`
      This is what the pattern looks like in sheet music:
      `),i=S("div"),a=S("img"),u=L(),l=S("div"),f=S("span"),f.textContent="Click to hear the different sounds:",c=L(),be(h.$$.fragment),d=L(),be(m.$$.fragment),p=L(),be(g.$$.fragment),y=ue(`
      This is what the full, correctly played pattern sounds like:
      `),b=S("div"),be(v.$$.fragment),C(a,"width",o=e[0]+"px"),$1(a.src,s="drum-pattern-labels3.png")||C(a,"src",s),C(a,"alt","drum pattern as sheet music"),We(l,"display","grid"),We(l,"grid-template-columns","repeat(4,max-content)"),We(l,"gap","10px"),We(l,"align-items","center")},m(M,_){z(M,t,_),x(t,n),x(t,r),x(t,i),x(i,a),x(t,u),x(t,l),x(l,f),x(l,c),de(h,l,null),x(l,d),de(m,l,null),x(l,p),de(g,l,null),x(t,y),x(t,b),de(v,b,null),w=!0},p(M,_){(!w||_[0]&1&&o!==(o=M[0]+"px"))&&C(a,"width",o);const P={};_[0]&2&&(P.cachedAudio=M[1][0].audioBuffer),h.$set(P);const T={};_[0]&2&&(T.cachedAudio=M[1][1].audioBuffer),m.$set(T);const D={};_[0]&2&&(D.cachedAudio=M[1][2].audioBuffer),g.$set(D);const I={};_[0]&524288&&(I.audioData=M[19]),_[0]&131072&&(I.sampleRate=M[17]),v.$set(I)},i(M){w||(q(h.$$.fragment,M),q(m.$$.fragment,M),q(g.$$.fragment,M),q(v.$$.fragment,M),w=!0)},o(M){Z(h.$$.fragment,M),Z(m.$$.fragment,M),Z(g.$$.fragment,M),Z(v.$$.fragment,M),w=!1},d(M){M&&U(t),me(h),me(m),me(g),me(v)}}}function r1(e){let t,n,r,i,a,o,s,u,l,f,c,h,d,m,p,g,y,b,v,w,M,_,P,T,D,I,E,F,G;return{c(){t=S("div"),n=S("p"),n.textContent="Please answer the following questions about yourself:",r=L(),i=S("label"),a=S("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=L(),s=S("select"),u=S("option"),u.textContent="none",l=S("option"),l.textContent="high school",f=S("option"),f.textContent="bachelor",c=S("option"),c.textContent="master",h=S("option"),h.textContent="phd",d=L(),m=S("label"),p=S("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=L(),y=S("input"),b=L(),v=S("label"),w=S("span"),w.textContent="For how many years do you roughly play it/them?",M=L(),_=S("input"),P=L(),T=S("label"),D=S("span"),D.textContent=`How many years of experience do you have with information
          visualization?`,I=L(),E=S("input"),C(n,"class","svelte-9uo0u8"),u.__value="none",$e(u,u.__value),l.__value="highs",$e(l,l.__value),f.__value="bachelor",$e(f,f.__value),c.__value="master",$e(c,c.__value),h.__value="phd",$e(h,h.__value),e[7]===void 0&&ai(()=>e[29].call(s)),C(i,"class","svelte-9uo0u8"),C(y,"type","text"),C(y,"placeholder","free text"),C(m,"class","svelte-9uo0u8"),C(_,"type","number"),C(_,"min","0"),C(_,"step","1"),C(v,"class","svelte-9uo0u8"),C(E,"type","number"),C(E,"min","0"),C(E,"step","1"),C(T,"class","svelte-9uo0u8"),C(t,"class","demo-form svelte-9uo0u8")},m($,A){z($,t,A),x(t,n),x(t,r),x(t,i),x(i,a),x(i,o),x(i,s),x(s,u),x(s,l),x(s,f),x(s,c),x(s,h),ii(s,e[7],!0),x(t,d),x(t,m),x(m,p),x(m,g),x(m,y),$e(y,e[8]),x(t,b),x(t,v),x(v,w),x(v,M),x(v,_),$e(_,e[9]),x(t,P),x(t,T),x(T,D),x(T,I),x(T,E),$e(E,e[10]),F||(G=[Oe(s,"change",e[29]),Oe(y,"input",e[30]),Oe(_,"input",e[31]),Oe(E,"input",e[32])],F=!0)},p($,A){A[0]&128&&ii(s,$[7]),A[0]&256&&y.value!==$[8]&&$e(y,$[8]),A[0]&512&&gn(_.value)!==$[9]&&$e(_,$[9]),A[0]&1024&&gn(E.value)!==$[10]&&$e(E,$[10])},d($){$&&U(t),F=!1,nn(G)}}}function i1(e){let t,n,r=(e[13]||e[5])&&a1(e);return{c(){r&&r.c(),t=Pi()},m(i,a){r&&r.m(i,a),z(i,t,a),n=!0},p(i,a){i[13]||i[5]?r?(r.p(i,a),a[0]&8224&&q(r,1)):(r=a1(i),r.c(),q(r,1),r.m(t.parentNode,t)):r&&(ut(),Z(r,1,1,()=>{r=null}),lt())},i(i){n||(q(r),n=!0)},o(i){Z(r),n=!1},d(i){i&&U(t),r&&r.d(i)}}}function a1(e){let t,n,r=e[4]+1+"",i,a,o=e[2].length+"",s,u,l,f,c,h,d,m,p;function g(_,P){return _[5]?QT:KT}let y=g(e),b=y(e);const v=[e$,JT],w=[];function M(_,P){return _[16]==="audio"?0:_[15]===!1?1:-1}return~(h=M(e))&&(d=w[h]=v[h](e)),{c(){t=S("p"),n=ue("Test number "),i=ue(r),a=ue(" of "),s=ue(o),u=L(),b.c(),l=L(),f=S("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,c=L(),d&&d.c(),m=Pi(),C(t,"class","svelte-9uo0u8"),C(f,"class","svelte-9uo0u8")},m(_,P){z(_,t,P),x(t,n),x(t,i),x(t,a),x(t,s),z(_,u,P),b.m(_,P),z(_,l,P),z(_,f,P),z(_,c,P),~h&&w[h].m(_,P),z(_,m,P),p=!0},p(_,P){(!p||P[0]&16)&&r!==(r=_[4]+1+"")&&at(i,r),(!p||P[0]&4)&&o!==(o=_[2].length+"")&&at(s,o),y===(y=g(_))&&b?b.p(_,P):(b.d(1),b=y(_),b&&(b.c(),b.m(l.parentNode,l)));let T=h;h=M(_),h===T?~h&&w[h].p(_,P):(d&&(ut(),Z(w[T],1,1,()=>{w[T]=null}),lt()),~h?(d=w[h],d?d.p(_,P):(d=w[h]=v[h](_),d.c()),q(d,1),d.m(m.parentNode,m)):d=null)},i(_){p||(q(d),p=!0)},o(_){Z(d),p=!1},d(_){_&&(U(t),U(u),U(l),U(f),U(c),U(m)),b.d(_),~h&&w[h].d(_)}}}function KT(e){let t,n,r=e[12]+1+"",i;return{c(){t=S("p"),n=ue("Trial number "),i=ue(r),C(t,"class","svelte-9uo0u8")},m(a,o){z(a,t,o),x(t,n),x(t,i)},p(a,o){o[0]&4096&&r!==(r=a[12]+1+"")&&at(i,r)},d(a){a&&U(t)}}}function QT(e){let t,n,r,i,a,o,s,u,l,f,c,h;return{c(){t=S("p"),n=S("b"),n.textContent="Training:",r=ue(" the training will end when you got "),i=ue(w3),a=ue(` correct
          in a streak.`),o=S("br"),s=ue(`
          Current streak: `),u=ue(e[6]),l=ue("."),f=S("br"),c=L(),h=S("b"),h.innerHTML='<span id="trainingFeedback"></span>',C(t,"class","training svelte-9uo0u8")},m(d,m){z(d,t,m),x(t,n),x(t,r),x(t,i),x(t,a),x(t,o),x(t,s),x(t,u),x(t,l),x(t,f),x(t,c),x(t,h)},p(d,m){m[0]&64&&at(u,d[6])},d(d){d&&U(t)}}}function JT(e){let t,n,r,i=(e[16]==="waveform"||Co)&&o1(e),a=(e[16]==="color"||Co)&&s1(e);return{c(){i&&i.c(),t=L(),a&&a.c(),n=Pi()},m(o,s){i&&i.m(o,s),z(o,t,s),a&&a.m(o,s),z(o,n,s),r=!0},p(o,s){o[16]==="waveform"||Co?i?(i.p(o,s),s[0]&65536&&q(i,1)):(i=o1(o),i.c(),q(i,1),i.m(t.parentNode,t)):i&&(ut(),Z(i,1,1,()=>{i=null}),lt()),o[16]==="color"||Co?a?(a.p(o,s),s[0]&65536&&q(a,1)):(a=s1(o),a.c(),q(a,1),a.m(n.parentNode,n)):a&&(ut(),Z(a,1,1,()=>{a=null}),lt())},i(o){r||(q(i),q(a),r=!0)},o(o){Z(i),Z(a),r=!1},d(o){o&&(U(t),U(n)),i&&i.d(o),a&&a.d(o)}}}function e$(e){let t,n,r,i,a,o,s,u,l,f,c,h,d;return i=new tr({props:{audioData:e[20],sampleRate:e[17]}}),o=new tr({props:{audioData:e[21],sampleRate:e[17]}}),h=new Uc({props:{audioData:e[18],sampleRate:e[17],currentTrialNumber:e[12]}}),{c(){t=S("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=L(),r=S("div"),be(i.$$.fragment),a=L(),be(o.$$.fragment),s=L(),u=S("div"),u.textContent="Example for early",l=L(),f=S("div"),f.textContent="Example for late",c=L(),be(h.$$.fragment),C(t,"class","svelte-9uo0u8"),C(u,"class","svelte-9uo0u8"),C(f,"class","svelte-9uo0u8"),C(r,"class","vis-example svelte-9uo0u8")},m(m,p){z(m,t,p),z(m,n,p),z(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,s),x(r,u),x(r,l),x(r,f),z(m,c,p),de(h,m,p),d=!0},p(m,p){const g={};p[0]&1048576&&(g.audioData=m[20]),p[0]&131072&&(g.sampleRate=m[17]),i.$set(g);const y={};p[0]&2097152&&(y.audioData=m[21]),p[0]&131072&&(y.sampleRate=m[17]),o.$set(y);const b={};p[0]&262144&&(b.audioData=m[18]),p[0]&131072&&(b.sampleRate=m[17]),p[0]&4096&&(b.currentTrialNumber=m[12]),h.$set(b)},i(m){d||(q(i.$$.fragment,m),q(o.$$.fragment,m),q(h.$$.fragment,m),d=!0)},o(m){Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!1},d(m){m&&(U(t),U(n),U(r),U(c)),me(i),me(o),me(h,m)}}}function o1(e){let t,n,r,i,a,o,s,u,l,f,c,h,d;return i=new vr({props:{audioData:e[20],width:e[0]/2,height:e[25]/2}}),o=new vr({props:{audioData:e[21],width:e[0]/2,height:e[25]/2}}),h=new vr({props:{audioData:e[18],width:e[0],height:e[25]}}),{c(){t=S("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=L(),r=S("div"),be(i.$$.fragment),a=L(),be(o.$$.fragment),s=L(),u=S("div"),u.textContent="Example for early",l=L(),f=S("div"),f.textContent="Example for late",c=L(),be(h.$$.fragment),C(t,"class","svelte-9uo0u8"),C(u,"class","svelte-9uo0u8"),C(f,"class","svelte-9uo0u8"),C(r,"class","vis-example svelte-9uo0u8")},m(m,p){z(m,t,p),z(m,n,p),z(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,s),x(r,u),x(r,l),x(r,f),z(m,c,p),de(h,m,p),d=!0},p(m,p){const g={};p[0]&1048576&&(g.audioData=m[20]),p[0]&1&&(g.width=m[0]/2),p[0]&33554432&&(g.height=m[25]/2),i.$set(g);const y={};p[0]&2097152&&(y.audioData=m[21]),p[0]&1&&(y.width=m[0]/2),p[0]&33554432&&(y.height=m[25]/2),o.$set(y);const b={};p[0]&262144&&(b.audioData=m[18]),p[0]&1&&(b.width=m[0]),p[0]&33554432&&(b.height=m[25]),h.$set(b)},i(m){d||(q(i.$$.fragment,m),q(o.$$.fragment,m),q(h.$$.fragment,m),d=!0)},o(m){Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!1},d(m){m&&(U(t),U(n),U(r),U(c)),me(i),me(o),me(h,m)}}}function s1(e){let t,n,r,i,a,o,s,u,l,f,c,h,d;return i=new Mr({props:{pattern:e[23],width:e[0]/2,height:e[25]*.7}}),o=new Mr({props:{pattern:e[24],width:e[0]/2,height:e[25]*.7}}),h=new Mr({props:{pattern:e[22],width:e[0],height:e[25]}}),{c(){t=S("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Look at the rectangle at 5, it is either
            brigher (early) or darker (late) than the others.`,n=L(),r=S("div"),be(i.$$.fragment),a=L(),be(o.$$.fragment),s=L(),u=S("div"),u.textContent="Example for early",l=L(),f=S("div"),f.textContent="Example for late",c=L(),be(h.$$.fragment),C(t,"class","svelte-9uo0u8"),C(u,"class","svelte-9uo0u8"),C(f,"class","svelte-9uo0u8"),C(r,"class","vis-example svelte-9uo0u8")},m(m,p){z(m,t,p),z(m,n,p),z(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,s),x(r,u),x(r,l),x(r,f),z(m,c,p),de(h,m,p),d=!0},p(m,p){const g={};p[0]&8388608&&(g.pattern=m[23]),p[0]&1&&(g.width=m[0]/2),p[0]&33554432&&(g.height=m[25]*.7),i.$set(g);const y={};p[0]&16777216&&(y.pattern=m[24]),p[0]&1&&(y.width=m[0]/2),p[0]&33554432&&(y.height=m[25]*.7),o.$set(y);const b={};p[0]&4194304&&(b.pattern=m[22]),p[0]&1&&(b.width=m[0]),p[0]&33554432&&(b.height=m[25]),h.$set(b)},i(m){d||(q(i.$$.fragment,m),q(o.$$.fragment,m),q(h.$$.fragment,m),d=!0)},o(m){Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!1},d(m){m&&(U(t),U(n),U(r),U(c)),me(i),me(o),me(h,m)}}}function u1(e){let t,n,r,i,a,o,s;return{c(){t=S("div"),n=ue(`Almost done!
      `),r=S("p"),r.textContent="Do you have any final feedback/comments?",i=L(),a=S("textarea"),C(r,"class","svelte-9uo0u8")},m(u,l){z(u,t,l),x(t,n),x(t,r),x(t,i),x(t,a),$e(a,e[11]),o||(s=Oe(a,"input",e[33]),o=!0)},p(u,l){l[0]&2048&&$e(a,u[11])},d(u){u&&U(t),o=!1,s()}}}function l1(e){let t,n,r;return{c(){t=S("div"),t.textContent="Thanks for participating!",n=L(),r=S("a"),r.textContent="click here to get your compensation",C(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){z(i,t,a),z(i,n,a),z(i,r,a)},d(i){i&&(U(t),U(n),U(r))}}}function f1(e){let t,n,r;return{c(){t=S("button"),t.textContent="next step",C(t,"class","next-btn svelte-9uo0u8")},m(i,a){z(i,t,a),n||(r=Oe(t,"click",e[26]),n=!0)},p:Pe,d(i){i&&U(t),n=!1,r()}}}function t$(e){let t,n,r,i,a,o,s,u,l,f,c=e[3]==="consent"&&J0(),h=e[3]==="start1"&&e1(e),d=e[3]==="start2"&&t1(e),m=e[3]==="start3"&&n1(e),p=e[3]==="demo"&&r1(e),g=e[3]==="tests"&&i1(e),y=e[3]==="feedback"&&u1(e),b=e[3]==="done"&&l1(),v=!e[14]&&e[3]!=="done"&&!e[5]&&f1(e);return{c(){t=S("main"),c&&c.c(),n=L(),h&&h.c(),r=L(),d&&d.c(),i=L(),m&&m.c(),a=L(),p&&p.c(),o=L(),g&&g.c(),s=L(),y&&y.c(),u=L(),b&&b.c(),l=L(),v&&v.c(),C(t,"class","svelte-9uo0u8")},m(w,M){z(w,t,M),c&&c.m(t,null),x(t,n),h&&h.m(t,null),x(t,r),d&&d.m(t,null),x(t,i),m&&m.m(t,null),x(t,a),p&&p.m(t,null),x(t,o),g&&g.m(t,null),x(t,s),y&&y.m(t,null),x(t,u),b&&b.m(t,null),x(t,l),v&&v.m(t,null),f=!0},p(w,M){w[3]==="consent"?c||(c=J0(),c.c(),c.m(t,n)):c&&(c.d(1),c=null),w[3]==="start1"?h?(h.p(w,M),M[0]&8&&q(h,1)):(h=e1(w),h.c(),q(h,1),h.m(t,r)):h&&(ut(),Z(h,1,1,()=>{h=null}),lt()),w[3]==="start2"?d?d.p(w,M):(d=t1(w),d.c(),d.m(t,i)):d&&(d.d(1),d=null),w[3]==="start3"?m?(m.p(w,M),M[0]&8&&q(m,1)):(m=n1(w),m.c(),q(m,1),m.m(t,a)):m&&(ut(),Z(m,1,1,()=>{m=null}),lt()),w[3]==="demo"?p?p.p(w,M):(p=r1(w),p.c(),p.m(t,o)):p&&(p.d(1),p=null),w[3]==="tests"?g?(g.p(w,M),M[0]&8&&q(g,1)):(g=i1(w),g.c(),q(g,1),g.m(t,s)):g&&(ut(),Z(g,1,1,()=>{g=null}),lt()),w[3]==="feedback"?y?y.p(w,M):(y=u1(w),y.c(),y.m(t,u)):y&&(y.d(1),y=null),w[3]==="done"?b||(b=l1(),b.c(),b.m(t,l)):b&&(b.d(1),b=null),!w[14]&&w[3]!=="done"&&!w[5]?v?v.p(w,M):(v=f1(w),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(w){f||(q(h),q(m),q(g),f=!0)},o(w){Z(h),Z(m),Z(g),f=!1},d(w){w&&U(t),c&&c.d(),h&&h.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),y&&y.d(),b&&b.d(),v&&v.d()}}}const c1="8beat_backbeat_120bpm",Co=!1,n$="/store",h1=120,Vr=.1,d1=4;let w3=8;function r$(e,t,n){let r;console.log(c1,h1,Vr);let i=xr(window,"PROLIFIC_PID"),a=xr(window,"STUDY_ID"),o=xr(window,"SESSION_ID"),s=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const u=(Y=0)=>{if(Y===0)return s;const k=Ee([s]),B=k.filter(xe=>xe.instrument==="hihat")[0],te=k.filter(xe=>xe.instrument==="snare")[0],ve=k.filter(xe=>xe.instrument==="bass")[0];ve.times[1]=ve.timesOriginal[1]+Y,B.times[4]=B.timesOriginal[4]+Y;for(const xe of[6,7,8])B.times[xe-1]=B.timesOriginal[xe-1]+Y;return te.times[1]=te.timesOriginal[1]+Y,k};let l=["audio","waveform","color"].map(Y=>({encoding:Y})),f="consent",c=0,h,d=!1,m=0,p=0,g="",y="",b=0,v=0,w="",M=0,_,P={},T=[],D,I,E=!1,F=!1,G=!1,$="",A=600,O=[],ae=0;const ie=[];Si(()=>{document.querySelector("html").addEventListener("keyup",ee)});const ne=()=>{I=new Be({ratio:{firstVal:Vr,operation:"multiply",down:1,up:1,stepSizeDown:1.25,stepSizeUp:1.25*1.25*1.25,limits:[0,Vr],direction:-1,reversalLimit:12,verbosity:0}}),I.init()};function H(){f==="consent"?n(3,f="start1"):f==="start1"?n(3,f="start2"):f==="start2"?n(3,f="start3"):f==="start3"?(n(2,l=xg(l)),n(3,f="demo")):f==="demo"?g==""||y==""?alert("please fill the form first"):(n(3,f="tests"),n(4,c=0)):f==="tests"?c>=l.length?n(3,f="feedback"):(n(16,$=l[c].encoding),m===0?(n(5,d=!0),se()):(j(),n(6,m=0))):f==="feedback"&&(R(),n(3,f="done"))}function j(){ne(),n(12,M=0),_=0,D=0,n(13,E=!0),O=[],T=[],h=new Date,W()}function W(){console.log("Starting trial "+M),P={},n(14,F=!0),K()}function K(){let k=I.getLast("ratio");k=Math.random()<.5?k:-k,P.deviation=k;const B=ft(k);n(22,Le=B.noteTimes),B.noteTimesSeparate,n(17,N=B.sampleRate),n(18,fe=B.renderedAudio),console.log("generated pattern"),n(15,G=!0),window.setTimeout(()=>{n(15,G=!1),P.startTime=new Date},1e3)}function se(){console.log("show training");let Y=(Math.random()*.5+.5)*Vr;Y=Math.random()<.5?Y:-Y,p=Y,console.log("training severity",Y);const k=ft(Y);n(22,Le=k.noteTimes),k.noteTimesSeparate,n(17,N=k.sampleRate),n(18,fe=k.renderedAudio),console.log("generated training",k),n(12,M++,M)}function le(Y){if(!F)return;n(14,F=!1),P.decisionChoice=Y,P.errorCode=0,P.timeTaken=(new Date-P.startTime)/1e3;const k=D;(P.decisionChoice==0&&P.deviation<0||P.decisionChoice==1&&P.deviation>0)&&P.errorCode==0&&D++,P.errorCode==0&&(I.next(k!=D),T[T.length]=P),P.errorCode==0&&_++,n(12,M++,M),I.reversalLimitReached("ratio")?Q():W()}function oe(Y){const k=document.querySelectorAll("#trainingFeedback")[0];Y==="early"&&p<0||Y==="late"&&p>0?(n(6,m++,m),m>=w3?n(5,d=!1):k.innerHTML='<span class="correct">correct!</span>'):(n(6,m=0),k.innerHTML='<span class="wrong">wrong!</span>'),console.log(k),se()}function Q(){n(13,E=!1),n(14,F=!1),O=[],ae=I.getFinalVal("ratio");for(let k=0;k<T.length;k++)O[k]=T[k].deviation;console.log(O);const Y=new Date;ie.push({encoding:$,final:ae,data:O,score:D,testNumber:c,trialCount:M+1,trials:T,validTrialCount:_+1,testTimeSeconds:(Y-h)/1e3}),n(4,c++,c)}function ee(Y){if(!G)switch(Y.key){case"ArrowLeft":F&&le(0),d&&oe("early");break;case"ArrowRight":F&&le(1),d&&oe("late");break;case"PageDown":!F&&f!=="done"&&H()}}function R(){const Y={studyName:c1,studyStep:f,demographics:{partID:i,studyID:a,sessionID:o,partEduation:g,partMusicInstr:y,partMusicInstrYears:b,partVisExperienceYears:v,partFeedback:w,visWidth:A},date:new Date().toISOString(),tests:ie};console.log("saving data",Y);const k=JSON.stringify(Y,void 0,2);fetch(n$,{method:"POST",headers:{"Content-Type":"application/json"},body:k}).then(B=>{console.log("Data saved:",B)})}let V=Xc(h1);const J=d1*V;let N,fe=null,re=null,ce=null,Se=null,Le=[],ze=[],ke=[];(async()=>{n(1,s=await Promise.all(s.map(async te=>({...te,times:te.beats.map(ve=>V*(ve-1)),timesOriginal:te.beats.map(ve=>V*(ve-1)),audioBuffer:await ic(te.sample)}))));const Y=ft(0),k=ft(-Vr),B=ft(Vr);Y.noteTimes,n(23,ze=k.noteTimes),n(24,ke=B.noteTimes),n(19,re=Y.renderedAudio),n(20,ce=k.renderedAudio),n(21,Se=B.renderedAudio),n(17,N=s[0].audioBuffer.sampleRate)})();const Ee=Y=>{const k=Y[0].map(B=>({...B,beats:[...B.beats],times:[...B.times],timesOriginal:[...B.timesOriginal]}));for(let B=1;B<Y.length;B++){const te=Y[B];for(const ve of te){const xe=k.filter(Fe=>Fe.instrument===ve.instrument)[0];xe.beats=[...xe.beats,...ve.beats.map(Fe=>Fe+B*d1)],xe.times=[...xe.times,...ve.times.map(Fe=>Fe+B*J)],xe.timesOriginal=[...xe.timesOriginal,...ve.timesOriginal.map(Fe=>Fe+B*J)]}}return k},ft=Y=>{if(!s[0].audioBuffer)return;const B=[u(Y)],te=Ee(B),ve=te.map(Ne=>Ne.times).flat().sort(),xe=te.map(Ne=>Ne.times.map(lr=>({time:lr,instr:Ne.instrument}))).flat(1/0).sort((Ne,lr)=>{Ne.time-lr.time}),Fe=te[0].audioBuffer.sampleRate,X=Ms(te,J*B.length+.1,Fe);return{noteTimes:ve,noteTimesSeparate:xe,sampleRate:Fe,renderedAudio:X}},At=()=>n(0,A*=1.05),Ce=()=>n(0,A*=.95);function ur(){g=Ef(this),n(7,g)}function Nt(){y=this.value,n(8,y)}function He(){b=gn(this.value),n(9,b)}function Je(){v=gn(this.value),n(10,v)}function Te(){w=this.value,n(11,w)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(25,r=A/6)},[A,s,l,f,c,d,m,g,y,b,v,w,M,E,F,G,$,N,fe,re,ce,Se,Le,ze,ke,r,H,At,Ce,ur,Nt,He,Je,Te]}class i$ extends Ze{constructor(t){super(),Xe(this,t,r$,t$,je,{},null,[-1,-1,-1])}}function m1(e){let t;return{c(){t=S("div"),t.innerHTML=`<p class="svelte-9uo0u8">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-9uo0u8">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-9uo0u8">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-9uo0u8">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){z(n,t,r)},d(n){n&&U(t)}}}function p1(e){let t,n,r,i,a,o,s,u,l;return i=new tr({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=S("div"),n=S("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=L(),be(i.$$.fragment),a=L(),o=S("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",s=L(),u=S("a"),u.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",C(n,"class","svelte-9uo0u8"),C(o,"class","svelte-9uo0u8"),C(u,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(f,c){z(f,t,c),x(t,n),x(t,r),de(i,t,null),x(t,a),x(t,o),x(t,s),x(t,u),l=!0},p(f,c){const h={};c[0]&262144&&(h.audioData=f[18]),c[0]&65536&&(h.sampleRate=f[16]),i.$set(h)},i(f){l||(q(i.$$.fragment,f),l=!0)},o(f){Z(i.$$.fragment,f),l=!1},d(f){f&&U(t),me(i)}}}function b1(e){let t,n,r,i,a,o,s,u,l,f,c,h,d,m,p,g,y,b;return{c(){t=S("div"),n=S("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=L(),i=S("div"),a=S("button"),a.textContent="+",o=L(),s=S("button"),s.textContent="-",u=L(),l=zo("svg"),f=zo("rect"),p=L(),g=S("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,C(n,"class","svelte-9uo0u8"),C(f,"width",c=e[0]*.52),C(f,"height",h=e[24]*2),C(f,"fill","#ccc"),C(f,"rx","8"),C(l,"width",d=e[0]*.52+"px"),C(l,"height",m=e[24]*2+"px"),C(g,"class","svelte-9uo0u8")},m(v,w){z(v,t,w),x(t,n),x(t,r),x(t,i),x(i,a),x(i,o),x(i,s),x(t,u),x(t,l),x(l,f),x(t,p),x(t,g),y||(b=[Oe(a,"click",e[26]),Oe(s,"click",e[27])],y=!0)},p(v,w){w[0]&1&&c!==(c=v[0]*.52)&&C(f,"width",c),w[0]&16777216&&h!==(h=v[24]*2)&&C(f,"height",h),w[0]&1&&d!==(d=v[0]*.52+"px")&&C(l,"width",d),w[0]&16777216&&m!==(m=v[24]*2+"px")&&C(l,"height",m)},d(v){v&&U(t),y=!1,nn(b)}}}function g1(e){let t,n,r,i,a,o,s,u,l,f,c;return f=new tr({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=S("div"),n=S("div"),n.innerHTML=`<p class="svelte-9uo0u8">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-9uo0u8">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-9uo0u8">This study uses a simple drum pattern that you can see and listen to
          below. Notes after the mistake will also be affected and be
          early/late, such that only one time interval is shorter/longer than
          supposed.</p>`,r=ue(`
      This is what the pattern looks like in sheet music:
      `),i=S("div"),a=S("img"),u=ue(`
      This is what the full, correctly played pattern sounds like:
      `),l=S("div"),be(f.$$.fragment),C(a,"width",o=e[0]+"px"),$1(a.src,s="8note-pattern-hihat.png")||C(a,"src",s),C(a,"alt","drum pattern as sheet music")},m(h,d){z(h,t,d),x(t,n),x(t,r),x(t,i),x(i,a),x(t,u),x(t,l),de(f,l,null),c=!0},p(h,d){(!c||d[0]&1&&o!==(o=h[0]+"px"))&&C(a,"width",o);const m={};d[0]&262144&&(m.audioData=h[18]),d[0]&65536&&(m.sampleRate=h[16]),f.$set(m)},i(h){c||(q(f.$$.fragment,h),c=!0)},o(h){Z(f.$$.fragment,h),c=!1},d(h){h&&U(t),me(f)}}}function y1(e){let t,n,r,i,a,o,s,u,l,f,c,h,d,m,p,g,y,b,v,w,M,_,P,T,D,I,E,F,G;return{c(){t=S("div"),n=S("p"),n.textContent="Please answer the following questions about yourself:",r=L(),i=S("label"),a=S("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=L(),s=S("select"),u=S("option"),u.textContent="none",l=S("option"),l.textContent="high school",f=S("option"),f.textContent="bachelor",c=S("option"),c.textContent="master",h=S("option"),h.textContent="phd",d=L(),m=S("label"),p=S("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=L(),y=S("input"),b=L(),v=S("label"),w=S("span"),w.textContent="For how many years do you roughly play it/them?",M=L(),_=S("input"),P=L(),T=S("label"),D=S("span"),D.textContent=`How many years of experience do you have with information
          visualization?`,I=L(),E=S("input"),C(n,"class","svelte-9uo0u8"),u.__value="none",$e(u,u.__value),l.__value="highs",$e(l,l.__value),f.__value="bachelor",$e(f,f.__value),c.__value="master",$e(c,c.__value),h.__value="phd",$e(h,h.__value),e[6]===void 0&&ai(()=>e[28].call(s)),C(i,"class","svelte-9uo0u8"),C(y,"type","text"),C(y,"placeholder","free text"),C(m,"class","svelte-9uo0u8"),C(_,"type","number"),C(_,"min","0"),C(_,"step","1"),C(v,"class","svelte-9uo0u8"),C(E,"type","number"),C(E,"min","0"),C(E,"step","1"),C(T,"class","svelte-9uo0u8"),C(t,"class","demo-form svelte-9uo0u8")},m($,A){z($,t,A),x(t,n),x(t,r),x(t,i),x(i,a),x(i,o),x(i,s),x(s,u),x(s,l),x(s,f),x(s,c),x(s,h),ii(s,e[6],!0),x(t,d),x(t,m),x(m,p),x(m,g),x(m,y),$e(y,e[7]),x(t,b),x(t,v),x(v,w),x(v,M),x(v,_),$e(_,e[8]),x(t,P),x(t,T),x(T,D),x(T,I),x(T,E),$e(E,e[9]),F||(G=[Oe(s,"change",e[28]),Oe(y,"input",e[29]),Oe(_,"input",e[30]),Oe(E,"input",e[31])],F=!0)},p($,A){A[0]&64&&ii(s,$[6]),A[0]&128&&y.value!==$[7]&&$e(y,$[7]),A[0]&256&&gn(_.value)!==$[8]&&$e(_,$[8]),A[0]&512&&gn(E.value)!==$[9]&&$e(E,$[9])},d($){$&&U(t),F=!1,nn(G)}}}function w1(e){let t,n,r=(e[12]||e[4])&&_1(e);return{c(){r&&r.c(),t=Pi()},m(i,a){r&&r.m(i,a),z(i,t,a),n=!0},p(i,a){i[12]||i[4]?r?(r.p(i,a),a[0]&4112&&q(r,1)):(r=_1(i),r.c(),q(r,1),r.m(t.parentNode,t)):r&&(ut(),Z(r,1,1,()=>{r=null}),lt())},i(i){n||(q(r),n=!0)},o(i){Z(r),n=!1},d(i){i&&U(t),r&&r.d(i)}}}function _1(e){let t,n,r=e[3]+1+"",i,a,o=e[1].length+"",s,u,l,f,c,h,d,m,p;function g(_,P){return _[4]?o$:a$}let y=g(e),b=y(e);const v=[u$,s$],w=[];function M(_,P){return _[15]==="audio"?0:_[14]===!1?1:-1}return~(h=M(e))&&(d=w[h]=v[h](e)),{c(){t=S("p"),n=ue("Test number "),i=ue(r),a=ue(" of "),s=ue(o),u=L(),b.c(),l=L(),f=S("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,c=L(),d&&d.c(),m=Pi(),C(t,"class","svelte-9uo0u8"),C(f,"class","svelte-9uo0u8")},m(_,P){z(_,t,P),x(t,n),x(t,i),x(t,a),x(t,s),z(_,u,P),b.m(_,P),z(_,l,P),z(_,f,P),z(_,c,P),~h&&w[h].m(_,P),z(_,m,P),p=!0},p(_,P){(!p||P[0]&8)&&r!==(r=_[3]+1+"")&&at(i,r),(!p||P[0]&2)&&o!==(o=_[1].length+"")&&at(s,o),y===(y=g(_))&&b?b.p(_,P):(b.d(1),b=y(_),b&&(b.c(),b.m(l.parentNode,l)));let T=h;h=M(_),h===T?~h&&w[h].p(_,P):(d&&(ut(),Z(w[T],1,1,()=>{w[T]=null}),lt()),~h?(d=w[h],d?d.p(_,P):(d=w[h]=v[h](_),d.c()),q(d,1),d.m(m.parentNode,m)):d=null)},i(_){p||(q(d),p=!0)},o(_){Z(d),p=!1},d(_){_&&(U(t),U(u),U(l),U(f),U(c),U(m)),b.d(_),~h&&w[h].d(_)}}}function a$(e){let t,n,r=e[11]+1+"",i;return{c(){t=S("p"),n=ue("Trial number "),i=ue(r),C(t,"class","svelte-9uo0u8")},m(a,o){z(a,t,o),x(t,n),x(t,i)},p(a,o){o[0]&2048&&r!==(r=a[11]+1+"")&&at(i,r)},d(a){a&&U(t)}}}function o$(e){let t,n,r,i,a,o,s,u,l,f,c,h;return{c(){t=S("p"),n=S("b"),n.textContent="Training:",r=ue(" the training will end when you got "),i=ue(_3),a=ue(` correct
          in a streak.`),o=S("br"),s=ue(`
          Current streak: `),u=ue(e[5]),l=ue("."),f=S("br"),c=L(),h=S("b"),h.innerHTML='<span id="trainingFeedback"></span>',C(t,"class","training svelte-9uo0u8")},m(d,m){z(d,t,m),x(t,n),x(t,r),x(t,i),x(t,a),x(t,o),x(t,s),x(t,u),x(t,l),x(t,f),x(t,c),x(t,h)},p(d,m){m[0]&32&&at(u,d[5])},d(d){d&&U(t)}}}function s$(e){let t,n,r,i=(e[15]==="waveform"||To)&&v1(e),a=(e[15]==="color"||To)&&M1(e);return{c(){i&&i.c(),t=L(),a&&a.c(),n=Pi()},m(o,s){i&&i.m(o,s),z(o,t,s),a&&a.m(o,s),z(o,n,s),r=!0},p(o,s){o[15]==="waveform"||To?i?(i.p(o,s),s[0]&32768&&q(i,1)):(i=v1(o),i.c(),q(i,1),i.m(t.parentNode,t)):i&&(ut(),Z(i,1,1,()=>{i=null}),lt()),o[15]==="color"||To?a?(a.p(o,s),s[0]&32768&&q(a,1)):(a=M1(o),a.c(),q(a,1),a.m(n.parentNode,n)):a&&(ut(),Z(a,1,1,()=>{a=null}),lt())},i(o){r||(q(i),q(a),r=!0)},o(o){Z(i),Z(a),r=!1},d(o){o&&(U(t),U(n)),i&&i.d(o),a&&a.d(o)}}}function u$(e){let t,n,r,i,a,o,s,u,l,f,c,h,d;return i=new tr({props:{audioData:e[19],sampleRate:e[16]}}),o=new tr({props:{audioData:e[20],sampleRate:e[16]}}),h=new Uc({props:{audioData:e[17],sampleRate:e[16],currentTrialNumber:e[11]}}),{c(){t=S("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=L(),r=S("div"),be(i.$$.fragment),a=L(),be(o.$$.fragment),s=L(),u=S("div"),u.textContent="Example for early",l=L(),f=S("div"),f.textContent="Example for late",c=L(),be(h.$$.fragment),C(t,"class","svelte-9uo0u8"),C(u,"class","svelte-9uo0u8"),C(f,"class","svelte-9uo0u8"),C(r,"class","vis-example svelte-9uo0u8")},m(m,p){z(m,t,p),z(m,n,p),z(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,s),x(r,u),x(r,l),x(r,f),z(m,c,p),de(h,m,p),d=!0},p(m,p){const g={};p[0]&524288&&(g.audioData=m[19]),p[0]&65536&&(g.sampleRate=m[16]),i.$set(g);const y={};p[0]&1048576&&(y.audioData=m[20]),p[0]&65536&&(y.sampleRate=m[16]),o.$set(y);const b={};p[0]&131072&&(b.audioData=m[17]),p[0]&65536&&(b.sampleRate=m[16]),p[0]&2048&&(b.currentTrialNumber=m[11]),h.$set(b)},i(m){d||(q(i.$$.fragment,m),q(o.$$.fragment,m),q(h.$$.fragment,m),d=!0)},o(m){Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!1},d(m){m&&(U(t),U(n),U(r),U(c)),me(i),me(o),me(h,m)}}}function v1(e){let t,n,r,i,a,o,s,u,l,f,c,h,d;return i=new vr({props:{audioData:e[19],width:e[0]/2,height:e[24]/2}}),o=new vr({props:{audioData:e[20],width:e[0]/2,height:e[24]/2}}),h=new vr({props:{audioData:e[17],width:e[0],height:e[24]}}),{c(){t=S("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=L(),r=S("div"),be(i.$$.fragment),a=L(),be(o.$$.fragment),s=L(),u=S("div"),u.textContent="Example for early",l=L(),f=S("div"),f.textContent="Example for late",c=L(),be(h.$$.fragment),C(t,"class","svelte-9uo0u8"),C(u,"class","svelte-9uo0u8"),C(f,"class","svelte-9uo0u8"),C(r,"class","vis-example svelte-9uo0u8")},m(m,p){z(m,t,p),z(m,n,p),z(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,s),x(r,u),x(r,l),x(r,f),z(m,c,p),de(h,m,p),d=!0},p(m,p){const g={};p[0]&524288&&(g.audioData=m[19]),p[0]&1&&(g.width=m[0]/2),p[0]&16777216&&(g.height=m[24]/2),i.$set(g);const y={};p[0]&1048576&&(y.audioData=m[20]),p[0]&1&&(y.width=m[0]/2),p[0]&16777216&&(y.height=m[24]/2),o.$set(y);const b={};p[0]&131072&&(b.audioData=m[17]),p[0]&1&&(b.width=m[0]),p[0]&16777216&&(b.height=m[24]),h.$set(b)},i(m){d||(q(i.$$.fragment,m),q(o.$$.fragment,m),q(h.$$.fragment,m),d=!0)},o(m){Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!1},d(m){m&&(U(t),U(n),U(r),U(c)),me(i),me(o),me(h,m)}}}function M1(e){let t,n,r,i,a,o,s,u,l,f,c,h,d;return i=new Mr({props:{pattern:e[22],width:e[0]/2,height:e[24]*.7}}),o=new Mr({props:{pattern:e[23],width:e[0]/2,height:e[24]*.7}}),h=new Mr({props:{pattern:e[21],width:e[0],height:e[24]}}),{c(){t=S("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Look at the rectangle at 5, it is either
            brigher (early) or darker (late) than the others.`,n=L(),r=S("div"),be(i.$$.fragment),a=L(),be(o.$$.fragment),s=L(),u=S("div"),u.textContent="Example for early",l=L(),f=S("div"),f.textContent="Example for late",c=L(),be(h.$$.fragment),C(t,"class","svelte-9uo0u8"),C(u,"class","svelte-9uo0u8"),C(f,"class","svelte-9uo0u8"),C(r,"class","vis-example svelte-9uo0u8")},m(m,p){z(m,t,p),z(m,n,p),z(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,s),x(r,u),x(r,l),x(r,f),z(m,c,p),de(h,m,p),d=!0},p(m,p){const g={};p[0]&4194304&&(g.pattern=m[22]),p[0]&1&&(g.width=m[0]/2),p[0]&16777216&&(g.height=m[24]*.7),i.$set(g);const y={};p[0]&8388608&&(y.pattern=m[23]),p[0]&1&&(y.width=m[0]/2),p[0]&16777216&&(y.height=m[24]*.7),o.$set(y);const b={};p[0]&2097152&&(b.pattern=m[21]),p[0]&1&&(b.width=m[0]),p[0]&16777216&&(b.height=m[24]),h.$set(b)},i(m){d||(q(i.$$.fragment,m),q(o.$$.fragment,m),q(h.$$.fragment,m),d=!0)},o(m){Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!1},d(m){m&&(U(t),U(n),U(r),U(c)),me(i),me(o),me(h,m)}}}function x1(e){let t,n,r,i,a,o,s;return{c(){t=S("div"),n=ue(`Almost done!
      `),r=S("p"),r.textContent="Do you have any final feedback/comments?",i=L(),a=S("textarea"),C(r,"class","svelte-9uo0u8")},m(u,l){z(u,t,l),x(t,n),x(t,r),x(t,i),x(t,a),$e(a,e[10]),o||(s=Oe(a,"input",e[32]),o=!0)},p(u,l){l[0]&1024&&$e(a,u[10])},d(u){u&&U(t),o=!1,s()}}}function P1(e){let t,n,r;return{c(){t=S("div"),t.textContent="Thanks for participating!",n=L(),r=S("a"),r.textContent="click here to get your compensation",C(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){z(i,t,a),z(i,n,a),z(i,r,a)},d(i){i&&(U(t),U(n),U(r))}}}function S1(e){let t,n,r;return{c(){t=S("button"),t.textContent="next step",C(t,"class","next-btn svelte-9uo0u8")},m(i,a){z(i,t,a),n||(r=Oe(t,"click",e[25]),n=!0)},p:Pe,d(i){i&&U(t),n=!1,r()}}}function l$(e){let t,n,r,i,a,o,s,u,l,f,c=e[2]==="consent"&&m1(),h=e[2]==="start1"&&p1(e),d=e[2]==="start2"&&b1(e),m=e[2]==="start3"&&g1(e),p=e[2]==="demo"&&y1(e),g=e[2]==="tests"&&w1(e),y=e[2]==="feedback"&&x1(e),b=e[2]==="done"&&P1(),v=!e[13]&&e[2]!=="done"&&!e[4]&&S1(e);return{c(){t=S("main"),c&&c.c(),n=L(),h&&h.c(),r=L(),d&&d.c(),i=L(),m&&m.c(),a=L(),p&&p.c(),o=L(),g&&g.c(),s=L(),y&&y.c(),u=L(),b&&b.c(),l=L(),v&&v.c(),C(t,"class","svelte-9uo0u8")},m(w,M){z(w,t,M),c&&c.m(t,null),x(t,n),h&&h.m(t,null),x(t,r),d&&d.m(t,null),x(t,i),m&&m.m(t,null),x(t,a),p&&p.m(t,null),x(t,o),g&&g.m(t,null),x(t,s),y&&y.m(t,null),x(t,u),b&&b.m(t,null),x(t,l),v&&v.m(t,null),f=!0},p(w,M){w[2]==="consent"?c||(c=m1(),c.c(),c.m(t,n)):c&&(c.d(1),c=null),w[2]==="start1"?h?(h.p(w,M),M[0]&4&&q(h,1)):(h=p1(w),h.c(),q(h,1),h.m(t,r)):h&&(ut(),Z(h,1,1,()=>{h=null}),lt()),w[2]==="start2"?d?d.p(w,M):(d=b1(w),d.c(),d.m(t,i)):d&&(d.d(1),d=null),w[2]==="start3"?m?(m.p(w,M),M[0]&4&&q(m,1)):(m=g1(w),m.c(),q(m,1),m.m(t,a)):m&&(ut(),Z(m,1,1,()=>{m=null}),lt()),w[2]==="demo"?p?p.p(w,M):(p=y1(w),p.c(),p.m(t,o)):p&&(p.d(1),p=null),w[2]==="tests"?g?(g.p(w,M),M[0]&4&&q(g,1)):(g=w1(w),g.c(),q(g,1),g.m(t,s)):g&&(ut(),Z(g,1,1,()=>{g=null}),lt()),w[2]==="feedback"?y?y.p(w,M):(y=x1(w),y.c(),y.m(t,u)):y&&(y.d(1),y=null),w[2]==="done"?b||(b=P1(),b.c(),b.m(t,l)):b&&(b.d(1),b=null),!w[13]&&w[2]!=="done"&&!w[4]?v?v.p(w,M):(v=S1(w),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(w){f||(q(h),q(m),q(g),f=!0)},o(w){Z(h),Z(m),Z(g),f=!1},d(w){w&&U(t),c&&c.d(),h&&h.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),y&&y.d(),b&&b.d(),v&&v.d()}}}const A1="8beat_hihat_8ths_120bpm",To=!1,f$="/store",E1=120,Yr=.1,k1=4;let _3=8;function c$(e,t,n){let r;console.log(A1,E1,Yr);let i=xr(window,"PROLIFIC_PID"),a=xr(window,"STUDY_ID"),o=xr(window,"SESSION_ID"),s=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]}];const u=(Y=0)=>{if(Y===0)return s;const k=Ee([s]),B=k.filter(te=>te.instrument==="hihat")[0];for(const te of[5,6,7,8])B.times[te-1]=B.timesOriginal[te-1]+Y;return k};let l=["audio","waveform","color"].map(Y=>({encoding:Y})),f="consent",c=0,h,d=!1,m=0,p=0,g="",y="",b=0,v=0,w="",M=0,_,P={},T=[],D,I,E=!1,F=!1,G=!1,$="",A=600,O=[],ae=0;const ie=[];Si(()=>{document.querySelector("html").addEventListener("keyup",ee)});const ne=()=>{I=new Be({ratio:{firstVal:Yr,operation:"multiply",down:1,up:1,stepSizeDown:1.25,stepSizeUp:1.25*1.25*1.25,limits:[0,Yr],direction:-1,reversalLimit:12,verbosity:0}}),I.init()};function H(){f==="consent"?n(2,f="start1"):f==="start1"?n(2,f="start2"):f==="start2"?n(2,f="start3"):f==="start3"?(n(1,l=xg(l)),n(2,f="demo")):f==="demo"?g==""||y==""?alert("please fill the form first"):(n(2,f="tests"),n(3,c=0)):f==="tests"?c>=l.length?n(2,f="feedback"):(n(15,$=l[c].encoding),m===0?(n(4,d=!0),se()):(j(),n(5,m=0))):f==="feedback"&&(R(),n(2,f="done"))}function j(){ne(),n(11,M=0),_=0,D=0,n(12,E=!0),O=[],T=[],h=new Date,W()}function W(){console.log("Starting trial "+M),P={},n(13,F=!0),K()}function K(){let k=I.getLast("ratio");k=Math.random()<.5?k:-k,P.deviation=k;const B=ft(k);n(21,Le=B.noteTimes),B.noteTimesSeparate,n(16,N=B.sampleRate),n(17,fe=B.renderedAudio),console.log("generated pattern"),n(14,G=!0),window.setTimeout(()=>{n(14,G=!1),P.startTime=new Date},1e3)}function se(){console.log("show training");let Y=(Math.random()*.5+.5)*Yr;Y=Math.random()<.5?Y:-Y,p=Y,console.log("training severity",Y);const k=ft(Y);n(21,Le=k.noteTimes),k.noteTimesSeparate,n(16,N=k.sampleRate),n(17,fe=k.renderedAudio),console.log("generated training",k),n(11,M++,M)}function le(Y){if(!F)return;n(13,F=!1),P.decisionChoice=Y,P.errorCode=0,P.timeTaken=(new Date-P.startTime)/1e3;const k=D;(P.decisionChoice==0&&P.deviation<0||P.decisionChoice==1&&P.deviation>0)&&P.errorCode==0&&D++,P.errorCode==0&&(I.next(k!=D),T[T.length]=P),P.errorCode==0&&_++,n(11,M++,M),I.reversalLimitReached("ratio")?Q():W()}function oe(Y){const k=document.querySelectorAll("#trainingFeedback")[0];Y==="early"&&p<0||Y==="late"&&p>0?(n(5,m++,m),m>=_3?n(4,d=!1):k.innerHTML='<span class="correct">correct!</span>'):(n(5,m=0),k.innerHTML='<span class="wrong">wrong!</span>'),console.log(k),se()}function Q(){n(12,E=!1),n(13,F=!1),O=[],ae=I.getFinalVal("ratio");for(let k=0;k<T.length;k++)O[k]=T[k].deviation;console.log(O);const Y=new Date;ie.push({encoding:$,final:ae,data:O,score:D,testNumber:c,trialCount:M+1,trials:T,validTrialCount:_+1,testTimeSeconds:(Y-h)/1e3}),n(3,c++,c)}function ee(Y){if(!G)switch(Y.key){case"ArrowLeft":F&&le(0),d&&oe("early");break;case"ArrowRight":F&&le(1),d&&oe("late");break;case"PageDown":!F&&f!=="done"&&H()}}function R(){const Y={studyName:A1,studyStep:f,demographics:{partID:i,studyID:a,sessionID:o,partEduation:g,partMusicInstr:y,partMusicInstrYears:b,partVisExperienceYears:v,partFeedback:w,visWidth:A},date:new Date().toISOString(),tests:ie};console.log("saving data",Y);const k=JSON.stringify(Y,void 0,2);fetch(f$,{method:"POST",headers:{"Content-Type":"application/json"},body:k}).then(B=>{console.log("Data saved:",B)})}let V=Xc(E1);const J=k1*V;let N,fe=null,re=null,ce=null,Se=null,Le=[],ze=[],ke=[];(async()=>{s=await Promise.all(s.map(async te=>({...te,times:te.beats.map(ve=>V*(ve-1)),timesOriginal:te.beats.map(ve=>V*(ve-1)),audioBuffer:await ic(te.sample)})));const Y=ft(0),k=ft(-Yr),B=ft(Yr);Y.noteTimes,n(22,ze=k.noteTimes),n(23,ke=B.noteTimes),n(18,re=Y.renderedAudio),n(19,ce=k.renderedAudio),n(20,Se=B.renderedAudio),n(16,N=s[0].audioBuffer.sampleRate)})();const Ee=Y=>{const k=Y[0].map(B=>({...B,beats:[...B.beats],times:[...B.times],timesOriginal:[...B.timesOriginal]}));for(let B=1;B<Y.length;B++){const te=Y[B];for(const ve of te){const xe=k.filter(Fe=>Fe.instrument===ve.instrument)[0];xe.beats=[...xe.beats,...ve.beats.map(Fe=>Fe+B*k1)],xe.times=[...xe.times,...ve.times.map(Fe=>Fe+B*J)],xe.timesOriginal=[...xe.timesOriginal,...ve.timesOriginal.map(Fe=>Fe+B*J)]}}return k},ft=Y=>{if(!s[0].audioBuffer)return;const B=[u(Y)],te=Ee(B),ve=te.map(Ne=>Ne.times).flat().sort(),xe=te.map(Ne=>Ne.times.map(lr=>({time:lr,instr:Ne.instrument}))).flat(1/0).sort((Ne,lr)=>{Ne.time-lr.time}),Fe=te[0].audioBuffer.sampleRate,X=Ms(te,J*B.length+.1,Fe);return{noteTimes:ve,noteTimesSeparate:xe,sampleRate:Fe,renderedAudio:X}},At=()=>n(0,A*=1.05),Ce=()=>n(0,A*=.95);function ur(){g=Ef(this),n(6,g)}function Nt(){y=this.value,n(7,y)}function He(){b=gn(this.value),n(8,b)}function Je(){v=gn(this.value),n(9,v)}function Te(){w=this.value,n(10,w)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(24,r=A/6)},[A,l,f,c,d,m,g,y,b,v,w,M,E,F,G,$,N,fe,re,ce,Se,Le,ze,ke,r,H,At,Ce,ur,Nt,He,Je,Te]}class h$ extends Ze{constructor(t){super(),Xe(this,t,c$,l$,je,{},null,[-1,-1,-1])}}function d$(e){let t,n;return t=new VT({}),{c(){be(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){Z(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function m$(e){let t,n;return t=new i$({}),{c(){be(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){Z(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function p$(e){let t,n;return t=new h$({}),{c(){be(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){Z(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function b$(e){let t,n;return t=new dT({}),{c(){be(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},i(r){n||(q(t.$$.fragment,r),n=!0)},o(r){Z(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function g$(e){let t,n,r,i,a,o;const s=[b$,p$,m$,d$],u=[];function l(f,c){return f[0]==="playground"?0:f[0]==="study_8note"?1:f[0]==="study_drums"?2:f[0]==="analysis"?3:-1}return~(i=l(e))&&(a=u[i]=s[i](e)),{c(){t=S("main"),n=S("h1"),n.textContent="Rhythm Error Sensitivity Study",r=L(),a&&a.c()},m(f,c){z(f,t,c),x(t,n),x(t,r),~i&&u[i].m(t,null),o=!0},p:Pe,i(f){o||(q(a),o=!0)},o(f){Z(a),o=!1},d(f){f&&U(t),~i&&u[i].d()}}}function y$(e){return[xr(window,"p")??"study_8note"]}class w$ extends Ze{constructor(t){super(),Xe(this,t,y$,g$,je,{})}}new w$({target:document.getElementById("app")});export{Mg as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-DZQDBL-7.js","assets/index-2Ay5aob0.js","assets/browser-CtyLng39.js","assets/index-Cw-fkcZt.js","assets/index-BHNhxocg.js","assets/index-BfM8P78U.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

var Qy=Object.defineProperty;var Jy=(e,t,n)=>t in e?Qy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xs=(e,t,n)=>(Jy(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function we(){}function o1(e){return e()}function Wf(){return Object.create(null)}function gn(e){e.forEach(o1)}function u1(e){return typeof e=="function"}function Ke(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Za;function e3(e,t){return e===t?!0:(Za||(Za=document.createElement("a")),Za.href=t,e===Za.href)}function t3(e){return Object.keys(e).length===0}function P(e,t){e.appendChild(t)}function Q(e,t,n){e.insertBefore(t,n||null)}function Z(e){e.parentNode&&e.parentNode.removeChild(e)}function ur(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function Vf(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Pe(e){return document.createTextNode(e)}function R(){return Pe(" ")}function _c(){return Pe("")}function je(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function B(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Xr(e){return e===""?null:+e}function n3(e){return Array.from(e.childNodes)}function Pt(e,t){t=""+t,e.data!==t&&(e.data=t)}function rt(e,t){e.value=t??""}function qe(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Ro(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function s1(e){const t=e.querySelector(":checked");return t&&t.__value}let Ki;function Hi(e){Ki=e}function Mc(){if(!Ki)throw new Error("Function called outside component initialization");return Ki}function va(e){Mc().$$.on_mount.push(e)}function en(e){Mc().$$.after_update.push(e)}function r3(e){Mc().$$.on_destroy.push(e)}const Or=[],ut=[];let Ur=[];const Yf=[],i3=Promise.resolve();let ml=!1;function a3(){ml||(ml=!0,i3.then(l1))}function Qi(e){Ur.push(e)}const Ps=new Set;let Nr=0;function l1(){if(Nr!==0)return;const e=Ki;do{try{for(;Nr<Or.length;){const t=Or[Nr];Nr++,Hi(t),o3(t.$$)}}catch(t){throw Or.length=0,Nr=0,t}for(Hi(null),Or.length=0,Nr=0;ut.length;)ut.pop()();for(let t=0;t<Ur.length;t+=1){const n=Ur[t];Ps.has(n)||(Ps.add(n),n())}Ur.length=0}while(Or.length);for(;Yf.length;)Yf.pop()();ml=!1,Ps.clear(),Hi(e)}function o3(e){if(e.fragment!==null){e.update(),gn(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Qi)}}function u3(e){const t=[],n=[];Ur.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Ur=t}const Mo=new Set;let lr;function jt(){lr={r:0,c:[],p:lr}}function Xt(){lr.r||gn(lr.c),lr=lr.p}function X(e,t){e&&e.i&&(Mo.delete(e),e.i(t))}function ae(e,t,n,r){if(e&&e.o){if(Mo.has(e))return;Mo.add(e),lr.c.push(()=>{Mo.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Mt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ee(e){e&&e.c()}function Ae(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Qi(()=>{const a=e.$$.on_mount.map(o1).filter(u1);e.$$.on_destroy?e.$$.on_destroy.push(...a):gn(a),e.$$.on_mount=[]}),i.forEach(Qi)}function Se(e,t){const n=e.$$;n.fragment!==null&&(u3(n.after_update),gn(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function s3(e,t){e.$$.dirty[0]===-1&&(Or.push(e),a3(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Qe(e,t,n,r,i,a,o=null,u=[-1]){const s=Ki;Hi(e);const l=e.$$={fragment:null,ctx:[],props:a,update:we,not_equal:i,bound:Wf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Wf(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,h,...d)=>{const m=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),c&&s3(e,f)),h}):[],l.update(),c=!0,gn(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=n3(t.target);l.fragment&&l.fragment.l(f),f.forEach(Z)}else l.fragment&&l.fragment.c();t.intro&&X(e.$$.fragment),Ae(e,t.target,t.anchor),l1()}Hi(s)}class Je{constructor(){xs(this,"$$");xs(this,"$$set")}$destroy(){Se(this,1),this.$destroy=we}$on(t,n){if(!u1(n))return we;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!t3(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const l3="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(l3);function yt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _a(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Tu(e){let t,n,r;e.length!==2?(t=yt,n=(u,s)=>yt(e(u),s),r=(u,s)=>e(u)-s):(t=e===yt||e===_a?e:c3,n=e,r=e);function i(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<0?l=f+1:c=f}while(l<c)}return l}function a(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<=0?l=f+1:c=f}while(l<c)}return l}function o(u,s,l=0,c=u.length){const f=i(u,s,l,c-1);return f>l&&r(u[f-1],s)>-r(u[f],s)?f-1:f}return{left:i,center:o,right:a}}function c3(){return 0}function c1(e){return e===null?NaN:+e}function*f3(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const h3=Tu(yt),ku=h3.right;Tu(c1).center;function xc(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function d3(e){return e.length|0}function m3(e){return!(e>0)}function p3(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function b3(e){return t=>e(...t)}function g3(...e){const t=typeof e[e.length-1]=="function"&&b3(e.pop());e=e.map(p3);const n=e.map(d3),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(m3))return a;for(;;){a.push(i.map((u,s)=>e[s][u]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function y3(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function Pc(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let u of e)(u=t(u,++o,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,a+=r*(u-i))}if(n>1)return a/(n-1)}function $u(e,t){const n=Pc(e,t);return n&&Math.sqrt(n)}function Dt(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class br{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,u=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);u&&(n[r++]=u),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class gr extends Map{constructor(t,n=d1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(pl(this,t))}has(t){return super.has(pl(this,t))}set(t,n){return super.set(f1(this,t),n)}delete(t){return super.delete(h1(this,t))}}class Du extends Set{constructor(t,n=d1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(pl(this,t))}add(t){return super.add(f1(this,t))}delete(t){return super.delete(h1(this,t))}}function pl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function f1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function h1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function d1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Oo(e){return e}function Nu(e,...t){return Bu(e,Oo,Oo,t)}function cr(e,...t){return Bu(e,Array.from,Oo,t)}function Hr(e,t,...n){return Bu(e,Oo,t,n)}function w3(e,t,...n){return Bu(e,Array.from,t,n)}function Bu(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const u=new gr,s=r[o++];let l=-1;for(const c of a){const f=s(c,++l,a),h=u.get(f);h?h.push(c):u.set(f,[c])}for(const[c,f]of u)u.set(c,i(f,o));return t(u)}(e,0)}function v3(e,t){return Array.from(t,n=>e[n])}function Ji(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const u=qo(o[i],o[a]);if(u)return u}})):(n=e.map(n),r.sort((i,a)=>qo(n[i],n[a]))),v3(e,r)}return e.sort(m1(n))}function m1(e=yt){if(e===yt)return qo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Ac(e,t,n){return(t.length!==2?Ji(Hr(e,t,n),([r,i],[a,o])=>yt(i,o)||yt(r,a)):Ji(Nu(e,n),([r,i],[a,o])=>t(i,o)||yt(r,a))).map(([r])=>r)}const _3=Math.sqrt(50),M3=Math.sqrt(10),x3=Math.sqrt(2);function Go(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=_3?10:a>=M3?5:a>=x3?2:1;let u,s,l;return i<0?(l=Math.pow(10,-i)/o,u=Math.round(e*l),s=Math.round(t*l),u/l<e&&++u,s/l>t&&--s,l=-l):(l=Math.pow(10,i)*o,u=Math.round(e/l),s=Math.round(t/l),u*l<e&&++u,s*l>t&&--s),s<u&&.5<=n&&n<2?Go(e,t,n*2):[u,s,l]}function ea(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Go(t,e,n):Go(e,t,n);if(!(a>=i))return[];const u=a-i+1,s=new Array(u);if(r)if(o<0)for(let l=0;l<u;++l)s[l]=(a-l)/-o;else for(let l=0;l<u;++l)s[l]=(a-l)*o;else if(o<0)for(let l=0;l<u;++l)s[l]=(i+l)/-o;else for(let l=0;l<u;++l)s[l]=(i+l)*o;return s}function zo(e,t,n){return t=+t,e=+e,n=+n,Go(e,t,n)[2]}function bl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?zo(t,e,n):zo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function P3(e){return Math.max(1,Math.ceil(Math.log(xc(e))/Math.LN2)+1)}function It(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function A3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Dn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function S3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function p1(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?qo:m1(i);r>n;){if(r-n>600){const s=r-n+1,l=t-n+1,c=Math.log(s),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(s-f)/s)*(l-s/2<0?-1:1),d=Math.max(n,Math.floor(t-l*f/s+h)),m=Math.min(r,Math.floor(t+(s-l)*f/s+h));p1(e,t,d,m,i)}const a=e[t];let o=n,u=r;for(vi(e,n,t),i(e[r],a)>0&&vi(e,n,r);o<u;){for(vi(e,o,u),++o,--u;i(e[o],a)<0;)++o;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?vi(e,n,u):(++u,vi(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function vi(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function b1(e,t=yt){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?yt(o,i)>0:yt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Zr(e,t,n){if(e=Float64Array.from(f3(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Dn(e);if(t>=1)return It(e);var r,i=(r-1)*t,a=Math.floor(i),o=It(p1(e,a).subarray(0,a+1)),u=Dn(e.subarray(a+1));return o+(u-o)*(i-a)}}function E3(e,t,n=c1){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function C3(e,t,n){const r=xc(e),i=Zr(e,.75)-Zr(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function g1(e,t,n){const r=xc(e),i=$u(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Fu(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function gl(e,t){return Zr(e,.5,t)}function*T3(e){for(const t of e)yield*t}function y1(e){return Array.from(T3(e))}function k3(e,t){const n=new gr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function $3(e,t=D3){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function D3(e,t){return[e,t]}function yl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function jn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Uo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function N3(e){return e}var As=1,Ss=2,wl=3,Ka=4,jf=1e-6;function B3(e){return"translate("+e+",0)"}function F3(e){return"translate(0,"+e+")"}function L3(e){return t=>+e(t)}function I3(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function R3(){return!this.__axis}function O3(e,t){var n=[],r=null,i=null,a=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===As||e===Ka?-1:1,c=e===Ka||e===Ss?"x":"y",f=e===As||e===wl?B3:F3;function h(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):N3),g=Math.max(a,0)+u,y=t.range(),b=+y[0]+s,v=+y[y.length-1]+s,w=(t.bandwidth?I3:L3)(t.copy(),s),_=d.selection?d.selection():d,M=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(m,t).order(),C=x.exit(),E=x.enter().append("g").attr("class","tick"),$=x.select("line"),A=x.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(E),$=$.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),A=A.merge(E.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===As?"0em":e===wl?"0.71em":"0.32em")),d!==_&&(M=M.transition(d),x=x.transition(d),$=$.transition(d),A=A.transition(d),C=C.transition(d).attr("opacity",jf).attr("transform",function(L){return isFinite(L=w(L))?f(L+s):this.getAttribute("transform")}),E.attr("opacity",jf).attr("transform",function(L){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(L))?O:w(L))+s)})),C.remove(),M.attr("d",e===Ka||e===Ss?o?"M"+l*o+","+b+"H"+s+"V"+v+"H"+l*o:"M"+s+","+b+"V"+v:o?"M"+b+","+l*o+"V"+s+"H"+v+"V"+l*o:"M"+b+","+s+"H"+v),x.attr("opacity",1).attr("transform",function(L){return f(w(L)+s)}),$.attr(c+"2",l*a),A.attr(c,l*g).text(p),_.filter(R3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ss?"start":e===Ka?"end":"middle"),_.each(function(){this.__axis=w})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(u=+d,h):u},h.offset=function(d){return arguments.length?(s=+d,h):s},h}function q3(e){return O3(wl,e)}var G3={value:()=>{}};function w1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new xo(n)}function xo(e){this._=e}function z3(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}xo.prototype=w1.prototype={constructor:xo,on:function(e,t){var n=this._,r=z3(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=U3(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Xf(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Xf(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new xo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function U3(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Xf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=G3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var vl="http://www.w3.org/1999/xhtml";const Kr={svg:"http://www.w3.org/2000/svg",xhtml:vl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Kr.hasOwnProperty(t)?{space:Kr[t],local:e}:e}function H3(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vl&&t.documentElement.namespaceURI===vl?t.createElement(e):t.createElementNS(n,e)}}function W3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Iu(e){var t=Lu(e);return(t.local?W3:H3)(t)}function V3(){}function Sc(e){return e==null?V3:function(){return this.querySelector(e)}}function Y3(e){typeof e!="function"&&(e=Sc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new At(r,this._parents)}function j3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function X3(){return[]}function v1(e){return e==null?X3:function(){return this.querySelectorAll(e)}}function Z3(e){return function(){return j3(e.apply(this,arguments))}}function K3(e){typeof e=="function"?e=Z3(e):e=v1(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new At(r,i)}function _1(e){return function(){return this.matches(e)}}function M1(e){return function(t){return t.matches(e)}}var Q3=Array.prototype.find;function J3(e){return function(){return Q3.call(this.children,e)}}function ew(){return this.firstElementChild}function tw(e){return this.select(e==null?ew:J3(typeof e=="function"?e:M1(e)))}var nw=Array.prototype.filter;function rw(){return Array.from(this.children)}function iw(e){return function(){return nw.call(this.children,e)}}function aw(e){return this.selectAll(e==null?rw:iw(typeof e=="function"?e:M1(e)))}function ow(e){typeof e!="function"&&(e=_1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new At(r,this._parents)}function x1(e){return new Array(e.length)}function uw(){return new At(this._enter||this._groups.map(x1),this._parents)}function Ho(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ho.prototype={constructor:Ho,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sw(e){return function(){return e}}function lw(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new Ho(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function cw(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new Ho(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function fw(e){return e.__data__}function hw(e,t){if(!arguments.length)return Array.from(this,fw);var n=t?cw:lw,r=this._parents,i=this._groups;typeof e!="function"&&(e=sw(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=dw(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),y=s[l]=new Array(h);n(c,f,p,g,y,d,t);for(var b=0,v=0,w,_;b<m;++b)if(w=p[b]){for(b>=v&&(v=b+1);!(_=g[v])&&++v<m;);w._next=_||null}}return o=new At(o,r),o._enter=u,o._exit=s,o}function dw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mw(){return new At(this._exit||this._groups.map(x1),this._parents)}function pw(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function bw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var l=n[s],c=r[s],f=l.length,h=u[s]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;s<i;++s)u[s]=n[s];return new At(u,this._parents)}function gw(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function yw(e){e||(e=ww);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new At(i,this._parents).order()}function ww(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _w(){return Array.from(this)}function Mw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function xw(){let e=0;for(const t of this)++e;return e}function Pw(){return!this.node()}function Aw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function Sw(e){return function(){this.removeAttribute(e)}}function Ew(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cw(e,t){return function(){this.setAttribute(e,t)}}function Tw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function kw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function $w(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dw(e,t){var n=Lu(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ew:Sw:typeof t=="function"?n.local?$w:kw:n.local?Tw:Cw)(n,t))}function P1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Nw(e){return function(){this.style.removeProperty(e)}}function Bw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Fw(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Lw(e,t,n){return arguments.length>1?this.each((t==null?Nw:typeof t=="function"?Fw:Bw)(e,t,n??"")):Qr(this.node(),e)}function Qr(e,t){return e.style.getPropertyValue(t)||P1(e).getComputedStyle(e,null).getPropertyValue(t)}function Iw(e){return function(){delete this[e]}}function Rw(e,t){return function(){this[e]=t}}function Ow(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function qw(e,t){return arguments.length>1?this.each((t==null?Iw:typeof t=="function"?Ow:Rw)(e,t)):this.node()[e]}function A1(e){return e.trim().split(/^|\s+/)}function Ec(e){return e.classList||new S1(e)}function S1(e){this._node=e,this._names=A1(e.getAttribute("class")||"")}S1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function E1(e,t){for(var n=Ec(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function C1(e,t){for(var n=Ec(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Gw(e){return function(){E1(this,e)}}function zw(e){return function(){C1(this,e)}}function Uw(e,t){return function(){(t.apply(this,arguments)?E1:C1)(this,e)}}function Hw(e,t){var n=A1(e+"");if(arguments.length<2){for(var r=Ec(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Uw:t?Gw:zw)(n,t))}function Ww(){this.textContent=""}function Vw(e){return function(){this.textContent=e}}function Yw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jw(e){return arguments.length?this.each(e==null?Ww:(typeof e=="function"?Yw:Vw)(e)):this.node().textContent}function Xw(){this.innerHTML=""}function Zw(e){return function(){this.innerHTML=e}}function Kw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Qw(e){return arguments.length?this.each(e==null?Xw:(typeof e=="function"?Kw:Zw)(e)):this.node().innerHTML}function Jw(){this.nextSibling&&this.parentNode.appendChild(this)}function ev(){return this.each(Jw)}function tv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nv(){return this.each(tv)}function rv(e){var t=typeof e=="function"?e:Iu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iv(){return null}function av(e,t){var n=typeof e=="function"?e:Iu(e),r=t==null?iv:typeof t=="function"?t:Sc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ov(){var e=this.parentNode;e&&e.removeChild(this)}function uv(){return this.each(ov)}function sv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cv(e){return this.select(e?lv:sv)}function fv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hv(e){return function(t){e.call(this,t,this.__data__)}}function dv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function mv(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function pv(e,t,n){return function(){var r=this.__on,i,a=hv(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function bv(e,t,n){var r=dv(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?pv:mv,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function T1(e,t,n){var r=P1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gv(e,t){return function(){return T1(this,e,t)}}function yv(e,t){return function(){return T1(this,e,t.apply(this,arguments))}}function wv(e,t){return this.each((typeof t=="function"?yv:gv)(e,t))}function*vv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var k1=[null];function At(e,t){this._groups=e,this._parents=t}function Ma(){return new At([[document.documentElement]],k1)}function _v(){return this}At.prototype=Ma.prototype={constructor:At,select:Y3,selectAll:K3,selectChild:tw,selectChildren:aw,filter:ow,data:hw,enter:uw,exit:mw,join:pw,merge:bw,selection:_v,order:gw,sort:yw,call:vw,nodes:_w,node:Mw,size:xw,empty:Pw,each:Aw,attr:Dw,style:Lw,property:qw,classed:Hw,text:jw,html:Qw,raise:ev,lower:nv,append:rv,insert:av,remove:uv,clone:cv,datum:fv,on:bv,dispatch:wv,[Symbol.iterator]:vv};function Wi(e){return typeof e=="string"?new At([[document.querySelector(e)]],[document.documentElement]):new At([[e]],k1)}function Mv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xv(e,t){if(e=Mv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function mi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Jn(){}var yr=.7,Jr=1/yr,Wr="\\s*([+-]?\\d+)\\s*",ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pv=/^#([0-9a-f]{3,8})$/,Av=new RegExp(`^rgb\\(${Wr},${Wr},${Wr}\\)$`),Sv=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),Ev=new RegExp(`^rgba\\(${Wr},${Wr},${Wr},${ta}\\)$`),Cv=new RegExp(`^rgba\\(${hn},${hn},${hn},${ta}\\)$`),Tv=new RegExp(`^hsl\\(${ta},${hn},${hn}\\)$`),kv=new RegExp(`^hsla\\(${ta},${hn},${hn},${ta}\\)$`),Zf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mi(Jn,wr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Kf,formatHex:Kf,formatHex8:$v,formatHsl:Dv,formatRgb:Qf,toString:Qf});function Kf(){return this.rgb().formatHex()}function $v(){return this.rgb().formatHex8()}function Dv(){return $1(this).formatHsl()}function Qf(){return this.rgb().formatRgb()}function wr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jf(t):n===3?new Xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Av.exec(e))?new Xe(t[1],t[2],t[3],1):(t=Sv.exec(e))?new Xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ev.exec(e))?Qa(t[1],t[2],t[3],t[4]):(t=Cv.exec(e))?Qa(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Tv.exec(e))?nh(t[1],t[2]/100,t[3]/100,1):(t=kv.exec(e))?nh(t[1],t[2]/100,t[3]/100,t[4]):Zf.hasOwnProperty(e)?Jf(Zf[e]):e==="transparent"?new Xe(NaN,NaN,NaN,0):null}function Jf(e){return new Xe(e>>16&255,e>>8&255,e&255,1)}function Qa(e,t,n,r){return r<=0&&(e=t=n=NaN),new Xe(e,t,n,r)}function Cc(e){return e instanceof Jn||(e=wr(e)),e?(e=e.rgb(),new Xe(e.r,e.g,e.b,e.opacity)):new Xe}function Xn(e,t,n,r){return arguments.length===1?Cc(e):new Xe(e,t,n,r??1)}function Xe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}mi(Xe,Xn,xa(Jn,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yr:Math.pow(yr,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xe(dr(this.r),dr(this.g),dr(this.b),Wo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eh,formatHex:eh,formatHex8:Nv,formatRgb:th,toString:th}));function eh(){return`#${fr(this.r)}${fr(this.g)}${fr(this.b)}`}function Nv(){return`#${fr(this.r)}${fr(this.g)}${fr(this.b)}${fr((isNaN(this.opacity)?1:this.opacity)*255)}`}function th(){const e=Wo(this.opacity);return`${e===1?"rgb(":"rgba("}${dr(this.r)}, ${dr(this.g)}, ${dr(this.b)}${e===1?")":`, ${e})`}`}function Wo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fr(e){return e=dr(e),(e<16?"0":"")+e.toString(16)}function nh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vt(e,t,n,r)}function $1(e){if(e instanceof Vt)return new Vt(e.h,e.s,e.l,e.opacity);if(e instanceof Jn||(e=wr(e)),!e)return new Vt;if(e instanceof Vt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new Vt(o,u,s,e.opacity)}function _l(e,t,n,r){return arguments.length===1?$1(e):new Vt(e,t,n,r??1)}function Vt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mi(Vt,_l,xa(Jn,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new Vt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yr:Math.pow(yr,e),new Vt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Xe(Es(e>=240?e-240:e+120,i,r),Es(e,i,r),Es(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Vt(rh(this.h),Ja(this.s),Ja(this.l),Wo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wo(this.opacity);return`${e===1?"hsl(":"hsla("}${rh(this.h)}, ${Ja(this.s)*100}%, ${Ja(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rh(e){return e=(e||0)%360,e<0?e+360:e}function Ja(e){return Math.max(0,Math.min(1,e||0))}function Es(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const D1=Math.PI/180,N1=180/Math.PI,Vo=18,B1=.96422,F1=1,L1=.82521,I1=4/29,Vr=6/29,R1=3*Vr*Vr,Bv=Vr*Vr*Vr;function O1(e){if(e instanceof dn)return new dn(e.l,e.a,e.b,e.opacity);if(e instanceof Tn)return q1(e);e instanceof Xe||(e=Cc(e));var t=$s(e.r),n=$s(e.g),r=$s(e.b),i=Cs((.2225045*t+.7168786*n+.0606169*r)/F1),a,o;return t===n&&n===r?a=o=i:(a=Cs((.4360747*t+.3850649*n+.1430804*r)/B1),o=Cs((.0139322*t+.0971045*n+.7141733*r)/L1)),new dn(116*i-16,500*(a-i),200*(i-o),e.opacity)}function Ml(e,t,n,r){return arguments.length===1?O1(e):new dn(e,t,n,r??1)}function dn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}mi(dn,Ml,xa(Jn,{brighter(e){return new dn(this.l+Vo*(e??1),this.a,this.b,this.opacity)},darker(e){return new dn(this.l-Vo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=B1*Ts(t),e=F1*Ts(e),n=L1*Ts(n),new Xe(ks(3.1338561*t-1.6168667*e-.4906146*n),ks(-.9787684*t+1.9161415*e+.033454*n),ks(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Cs(e){return e>Bv?Math.pow(e,1/3):e/R1+I1}function Ts(e){return e>Vr?e*e*e:R1*(e-I1)}function ks(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function $s(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Fv(e){if(e instanceof Tn)return new Tn(e.h,e.c,e.l,e.opacity);if(e instanceof dn||(e=O1(e)),e.a===0&&e.b===0)return new Tn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*N1;return new Tn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function xl(e,t,n,r){return arguments.length===1?Fv(e):new Tn(e,t,n,r??1)}function Tn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function q1(e){if(isNaN(e.h))return new dn(e.l,0,0,e.opacity);var t=e.h*D1;return new dn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}mi(Tn,xl,xa(Jn,{brighter(e){return new Tn(this.h,this.c,this.l+Vo*(e??1),this.opacity)},darker(e){return new Tn(this.h,this.c,this.l-Vo*(e??1),this.opacity)},rgb(){return q1(this).rgb()}}));var G1=-.14861,Tc=1.78277,kc=-.29227,Ru=-.90649,na=1.97294,ih=na*Ru,ah=na*Tc,oh=Tc*kc-Ru*G1;function Lv(e){if(e instanceof mr)return new mr(e.h,e.s,e.l,e.opacity);e instanceof Xe||(e=Cc(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(oh*r+ih*t-ah*n)/(oh+ih-ah),a=r-i,o=(na*(n-i)-kc*a)/Ru,u=Math.sqrt(o*o+a*a)/(na*i*(1-i)),s=u?Math.atan2(o,a)*N1-120:NaN;return new mr(s<0?s+360:s,u,i,e.opacity)}function pn(e,t,n,r){return arguments.length===1?Lv(e):new mr(e,t,n,r??1)}function mr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}mi(mr,pn,xa(Jn,{brighter(e){return e=e==null?Jr:Math.pow(Jr,e),new mr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yr:Math.pow(yr,e),new mr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*D1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Xe(255*(t+n*(G1*r+Tc*i)),255*(t+n*(kc*r+Ru*i)),255*(t+n*(na*r)),this.opacity)}}));function Iv(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function Rv(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return Iv((n-r/t)*t,o,i,a,u)}}const Ou=e=>()=>e;function z1(e,t){return function(n){return e+n*t}}function Ov(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function $c(e,t){var n=t-e;return n?z1(e,n>180||n<-180?n-360*Math.round(n/360):n):Ou(isNaN(e)?t:e)}function qv(e){return(e=+e)==1?ot:function(t,n){return n-t?Ov(t,n,e):Ou(isNaN(t)?n:t)}}function ot(e,t){var n=t-e;return n?z1(e,n):Ou(isNaN(e)?t:e)}const vr=function e(t){var n=qv(t);function r(i,a){var o=n((i=Xn(i)).r,(a=Xn(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=ot(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Gv(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,u;for(o=0;o<n;++o)u=Xn(t[o]),r[o]=u.r||0,i[o]=u.g||0,a[o]=u.b||0;return r=e(r),i=e(i),a=e(a),u.opacity=1,function(s){return u.r=r(s),u.g=i(s),u.b=a(s),u+""}}}var zv=Gv(Rv);function Uv(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Hv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Wv(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Pa(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function Vv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function at(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Yv(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Pa(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Pl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ds=new RegExp(Pl.source,"g");function jv(e){return function(){return e}}function Xv(e){return function(t){return e(t)+""}}function U1(e,t){var n=Pl.lastIndex=Ds.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=Pl.exec(e))&&(i=Ds.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:at(r,i)})),n=Ds.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?Xv(s[0].x):jv(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}function Pa(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ou(t):(n==="number"?at:n==="string"?(r=wr(t))?(t=r,vr):U1:t instanceof wr?vr:t instanceof Date?Vv:Hv(t)?Uv:Array.isArray(t)?Wv:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yv:at)(e,t)}function Dc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var uh=180/Math.PI,Al={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function H1(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*uh,skewX:Math.atan(s)*uh,scaleX:o,scaleY:u}}var eo;function Zv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Al:H1(t.a,t.b,t.c,t.d,t.e,t.f)}function Kv(e){return e==null||(eo||(eo=document.createElementNS("http://www.w3.org/2000/svg","g")),eo.setAttribute("transform",e),!(e=eo.transform.baseVal.consolidate()))?Al:(e=e.matrix,H1(e.a,e.b,e.c,e.d,e.e,e.f))}function W1(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:at(l,f)},{i:p-2,x:at(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:at(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:at(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:at(l,f)},{i:p-2,x:at(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var Qv=W1(Zv,"px, ","px)","deg)"),Jv=W1(Kv,", ",")",")");function e_(e){return function(t,n){var r=e((t=_l(t)).h,(n=_l(n)).h),i=ot(t.s,n.s),a=ot(t.l,n.l),o=ot(t.opacity,n.opacity);return function(u){return t.h=r(u),t.s=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const t_=e_($c);function n_(e,t){var n=ot((e=Ml(e)).l,(t=Ml(t)).l),r=ot(e.a,t.a),i=ot(e.b,t.b),a=ot(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function r_(e){return function(t,n){var r=e((t=xl(t)).h,(n=xl(n)).h),i=ot(t.c,n.c),a=ot(t.l,n.l),o=ot(t.opacity,n.opacity);return function(u){return t.h=r(u),t.c=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const i_=r_($c);function V1(e){return function t(n){n=+n;function r(i,a){var o=e((i=pn(i)).h,(a=pn(a)).h),u=ot(i.s,a.s),s=ot(i.l,a.l),l=ot(i.opacity,a.opacity);return function(c){return i.h=o(c),i.s=u(c),i.l=s(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}V1($c);var Nc=V1(ot);function qu(e,t){t===void 0&&(t=e,e=Pa);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}function Zt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ei=0,Di=0,_i=0,Y1=1e3,Yo,Ni,jo=0,_r=0,Gu=0,ra=typeof performance=="object"&&performance.now?performance:Date,j1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bc(){return _r||(j1(a_),_r=ra.now()+Gu)}function a_(){_r=0}function Xo(){this._call=this._time=this._next=null}Xo.prototype=X1.prototype={constructor:Xo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Bc():+n)+(t==null?0:+t),!this._next&&Ni!==this&&(Ni?Ni._next=this:Yo=this,Ni=this),this._call=e,this._time=n,Sl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sl())}};function X1(e,t,n){var r=new Xo;return r.restart(e,t,n),r}function o_(){Bc(),++ei;for(var e=Yo,t;e;)(t=_r-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ei}function sh(){_r=(jo=ra.now())+Gu,ei=Di=0;try{o_()}finally{ei=0,s_(),_r=0}}function u_(){var e=ra.now(),t=e-jo;t>Y1&&(Gu-=t,jo=e)}function s_(){for(var e,t=Yo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Yo=n);Ni=e,Sl(r)}function Sl(e){if(!ei){Di&&(Di=clearTimeout(Di));var t=e-_r;t>24?(e<1/0&&(Di=setTimeout(sh,e-ra.now()-Gu)),_i&&(_i=clearInterval(_i))):(_i||(jo=ra.now(),_i=setInterval(u_,Y1)),ei=1,j1(sh))}}function lh(e,t,n){var r=new Xo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var l_=w1("start","end","cancel","interrupt"),c_=[],Z1=0,ch=1,El=2,Po=3,fh=4,Cl=5,Ao=6;function zu(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;f_(e,n,{name:t,index:r,group:i,on:l_,tween:c_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Z1})}function Fc(e,t){var n=tn(e,t);if(n.state>Z1)throw new Error("too late; already scheduled");return n}function yn(e,t){var n=tn(e,t);if(n.state>Po)throw new Error("too late; already running");return n}function tn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function f_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=X1(a,0,n.time);function a(l){n.state=ch,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==ch)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Po)return lh(o);d.state===fh?(d.state=Ao,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Ao,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(lh(function(){n.state===Po&&(n.state=fh,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=El,n.on.call("start",e,e.__data__,n.index,n.group),n.state===El){for(n.state=Po,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=Cl,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===Cl&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ao,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function h_(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>El&&r.state<Cl,r.state=Ao,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function d_(e){return this.each(function(){h_(this,e)})}function m_(e,t){var n,r;return function(){var i=yn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function p_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=yn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function b_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=tn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?m_:p_)(n,e,t))}function Lc(e,t,n){var r=e._id;return e.each(function(){var i=yn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return tn(i,r).value[t]}}function K1(e,t){var n;return(typeof t=="number"?at:t instanceof wr?vr:(n=wr(t))?(t=n,vr):U1)(e,t)}function g_(e){return function(){this.removeAttribute(e)}}function y_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function w_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function v_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function __(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function M_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function x_(e,t){var n=Lu(e),r=n==="transform"?Jv:K1;return this.attrTween(e,typeof t=="function"?(n.local?M_:__)(n,r,Lc(this,"attr."+e,t)):t==null?(n.local?y_:g_)(n):(n.local?v_:w_)(n,r,t))}function P_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function A_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function S_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&A_(e,a)),n}return i._value=t,i}function E_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&P_(e,a)),n}return i._value=t,i}function C_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Lu(e);return this.tween(n,(r.local?S_:E_)(r,t))}function T_(e,t){return function(){Fc(this,e).delay=+t.apply(this,arguments)}}function k_(e,t){return t=+t,function(){Fc(this,e).delay=t}}function $_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?T_:k_)(t,e)):tn(this.node(),t).delay}function D_(e,t){return function(){yn(this,e).duration=+t.apply(this,arguments)}}function N_(e,t){return t=+t,function(){yn(this,e).duration=t}}function B_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?D_:N_)(t,e)):tn(this.node(),t).duration}function F_(e,t){if(typeof t!="function")throw new Error;return function(){yn(this,e).ease=t}}function L_(e){var t=this._id;return arguments.length?this.each(F_(t,e)):tn(this.node(),t).ease}function I_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yn(this,e).ease=n}}function R_(e){if(typeof e!="function")throw new Error;return this.each(I_(this._id,e))}function O_(e){typeof e!="function"&&(e=_1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Nn(r,this._parents,this._name,this._id)}function q_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Nn(o,this._parents,this._name,this._id)}function G_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function z_(e,t,n){var r,i,a=G_(t)?Fc:yn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function U_(e,t){var n=this._id;return arguments.length<2?tn(this.node(),n).on.on(e):this.each(z_(n,e,t))}function H_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function W_(){return this.on("end.remove",H_(this._id))}function V_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Sc(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,zu(l[h],t,n,h,l,tn(c,n)));return new Nn(a,this._parents,t,n)}function Y_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=v1(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=tn(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&zu(d,t,n,p,h,m);a.push(h),o.push(c)}return new Nn(a,o,t,n)}var j_=Ma.prototype.constructor;function X_(){return new j_(this._groups,this._parents)}function Z_(e,t){var n,r,i;return function(){var a=Qr(this,e),o=(this.style.removeProperty(e),Qr(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Q1(e){return function(){this.style.removeProperty(e)}}function K_(e,t,n){var r,i=n+"",a;return function(){var o=Qr(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function Q_(e,t,n){var r,i,a;return function(){var o=Qr(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),Qr(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function J_(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=yn(this,e),l=s.on,c=s.value[a]==null?u||(u=Q1(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function e5(e,t,n){var r=(e+="")=="transform"?Qv:K1;return t==null?this.styleTween(e,Z_(e,r)).on("end.style."+e,Q1(e)):typeof t=="function"?this.styleTween(e,Q_(e,r,Lc(this,"style."+e,t))).each(J_(this._id,e)):this.styleTween(e,K_(e,r,t),n).on("end.style."+e,null)}function t5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function n5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&t5(e,o,n)),r}return a._value=t,a}function r5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,n5(e,t,n??""))}function i5(e){return function(){this.textContent=e}}function a5(e){return function(){var t=e(this);this.textContent=t??""}}function o5(e){return this.tween("text",typeof e=="function"?a5(Lc(this,"text",e)):i5(e==null?"":e+""))}function u5(e){return function(t){this.textContent=e.call(this,t)}}function s5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&u5(i)),t}return r._value=e,r}function l5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,s5(e))}function c5(){for(var e=this._name,t=this._id,n=J1(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=tn(s,t);zu(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Nn(r,this._parents,e,n)}function f5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=yn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var h5=0;function Nn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function J1(){return++h5}var _n=Ma.prototype;Nn.prototype={constructor:Nn,select:V_,selectAll:Y_,selectChild:_n.selectChild,selectChildren:_n.selectChildren,filter:O_,merge:q_,selection:X_,transition:c5,call:_n.call,nodes:_n.nodes,node:_n.node,size:_n.size,empty:_n.empty,each:_n.each,on:U_,attr:x_,attrTween:C_,style:e5,styleTween:r5,text:o5,textTween:l5,remove:W_,tween:b_,delay:$_,duration:B_,ease:L_,easeVarying:R_,end:f5,[Symbol.iterator]:_n[Symbol.iterator]};function d5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var m5={time:null,delay:0,duration:250,ease:d5};function p5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function b5(e){var t,n;e instanceof Nn?(t=e._id,e=e._name):(t=J1(),(n=m5).time=Bc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&zu(s,e,t,l,o,n||p5(s,t));return new Nn(r,this._parents,e,t)}Ma.prototype.interrupt=d_;Ma.prototype.transition=b5;const Tl=Math.PI,kl=2*Tl,or=1e-6,g5=kl-or;function em(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function y5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return em;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class tm{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?em:y5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-t,l=i-n,c=o-t,f=u-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>or)if(!(Math.abs(f*s-l*c)>or)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-u,p=s*s+l*l,g=d*d+m*m,y=Math.sqrt(p),b=Math.sqrt(h),v=a*Math.tan((Tl-Math.acos((p+h-g)/(2*y*b)))/2),w=v/b,_=v/y;Math.abs(w-1)>or&&this._append`L${t+w*c},${n+w*f}`,this._append`A${a},${a},0,0,${+(f*d>c*m)},${this._x1=t+_*s},${this._y1=n+_*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),l=t+u,c=n+s,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>or||Math.abs(this._y1-c)>or)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%kl+kl),h>g5?this._append`A${r},${r},0,1,${f},${t-u},${n-s}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>or&&this._append`A${r},${r},0,${+(h>=Tl)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Hn(e=3){return new tm(+e)}var hh={},Ns={},Bs=34,Mi=10,Fs=13;function nm(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function w5(e,t){var n=nm(e);return function(r,i){return t(n(r),i,e)}}function dh(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function v5(e){return e<0?"-"+pt(-e,6):e>9999?"+"+pt(e,6):pt(e,4)}function _5(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":v5(e.getUTCFullYear())+"-"+pt(e.getUTCMonth()+1,2)+"-"+pt(e.getUTCDate(),2)+(i?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"."+pt(i,3)+"Z":r?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"Z":n||t?"T"+pt(t,2)+":"+pt(n,2)+"Z":"")}function M5(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var d,m,p=i(f,function(g,y){if(d)return d(g,y-1);m=g,d=h?w5(g,h):nm(g)});return p.columns=m||[],p}function i(f,h){var d=[],m=f.length,p=0,g=0,y,b=m<=0,v=!1;f.charCodeAt(m-1)===Mi&&--m,f.charCodeAt(m-1)===Fs&&--m;function w(){if(b)return Ns;if(v)return v=!1,hh;var M,x=p,C;if(f.charCodeAt(x)===Bs){for(;p++<m&&f.charCodeAt(p)!==Bs||f.charCodeAt(++p)===Bs;);return(M=p)>=m?b=!0:(C=f.charCodeAt(p++))===Mi?v=!0:C===Fs&&(v=!0,f.charCodeAt(p)===Mi&&++p),f.slice(x+1,M-1).replace(/""/g,'"')}for(;p<m;){if((C=f.charCodeAt(M=p++))===Mi)v=!0;else if(C===Fs)v=!0,f.charCodeAt(p)===Mi&&++p;else if(C!==n)continue;return f.slice(x,M)}return b=!0,f.slice(x,m)}for(;(y=w())!==Ns;){for(var _=[];y!==hh&&y!==Ns;)_.push(y),y=w();h&&(_=h(_,g++))==null||d.push(_)}return d}function a(f,h){return f.map(function(d){return h.map(function(m){return c(d[m])}).join(e)})}function o(f,h){return h==null&&(h=dh(f)),[h.map(c).join(e)].concat(a(f,h)).join(`
`)}function u(f,h){return h==null&&(h=dh(f)),a(f,h).join(`
`)}function s(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?_5(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:u,formatRows:s,formatRow:l,formatValue:c}}var x5=M5(","),P5=x5.parse;function A5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ti(e){return e=Zo(Math.abs(e)),e?e[1]:NaN}function S5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function E5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var C5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ia(e){if(!(t=C5.exec(e)))throw new Error("invalid format: "+e);var t;return new Ic({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ia.prototype=Ic.prototype;function Ic(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ic.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function T5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var rm;function k5(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(rm=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zo(e,Math.max(0,t+a-1))[0]}function mh(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ph={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:A5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>mh(e*100,t),r:mh,s:k5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bh(e){return e}var gh=Array.prototype.map,yh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $5(e){var t=e.grouping===void 0||e.thousands===void 0?bh:S5(gh.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?bh:E5(gh.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function l(f){f=ia(f);var h=f.fill,d=f.align,m=f.sign,p=f.symbol,g=f.zero,y=f.width,b=f.comma,v=f.precision,w=f.trim,_=f.type;_==="n"?(b=!0,_="g"):ph[_]||(v===void 0&&(v=12),w=!0,_="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var M=p==="$"?n:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",x=p==="$"?r:/[%p]/.test(_)?o:"",C=ph[_],E=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function $(A){var L=M,O=x,T,S,I;if(_==="c")O=C(A)+O,A="";else{A=+A;var ne=A<0||1/A<0;if(A=isNaN(A)?s:C(Math.abs(A),v),w&&(A=T5(A)),ne&&+A==0&&m!=="+"&&(ne=!1),L=(ne?m==="("?m:u:m==="-"||m==="("?"":m)+L,O=(_==="s"?yh[8+rm/3]:"")+O+(ne&&m==="("?")":""),E){for(T=-1,S=A.length;++T<S;)if(I=A.charCodeAt(T),48>I||I>57){O=(I===46?i+A.slice(T+1):A.slice(T))+O,A=A.slice(0,T);break}}}b&&!g&&(A=t(A,1/0));var te=L.length+A.length+O.length,K=te<y?new Array(y-te+1).join(h):"";switch(b&&g&&(A=t(K+A,K.length?y-O.length:1/0),K=""),d){case"<":A=L+A+O+K;break;case"=":A=L+K+A+O;break;case"^":A=K.slice(0,te=K.length>>1)+L+A+O+K.slice(te);break;default:A=K+L+A+O;break}return a(A)}return $.toString=function(){return f+""},$}function c(f,h){var d=l((f=ia(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(ti(h)/3)))*3,p=Math.pow(10,-m),g=yh[8+m/3];return function(y){return d(p*y)+g}}return{format:l,formatPrefix:c}}var to,pi,im;D5({thousands:",",grouping:[3],currency:["$",""]});function D5(e){return to=$5(e),pi=to.format,im=to.formatPrefix,to}function N5(e){return Math.max(0,-ti(Math.abs(e)))}function B5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ti(t)/3)))*3-ti(Math.abs(e)))}function F5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ti(t)-ti(e))+1}var de=1e-6,am=1e-12,be=Math.PI,Ie=be/2,wh=be/4,St=be*2,lt=180/be,Le=be/180,Ce=Math.abs,bi=Math.atan,Bn=Math.atan2,pe=Math.cos,om=Math.exp,Ko=Math.log,Ls=Math.pow,fe=Math.sin,Nt=Math.sign||function(e){return e>0?1:e<0?-1:0},wt=Math.sqrt,Rc=Math.tan;function um(e){return e>1?0:e<-1?be:Math.acos(e)}function Rt(e){return e>1?Ie:e<-1?-Ie:Math.asin(e)}function Bt(){}function Qo(e,t){e&&_h.hasOwnProperty(e.type)&&_h[e.type](e,t)}var vh={Feature:function(e,t){Qo(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Qo(n[r].geometry,t)}},_h={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){$l(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$l(n[r],t,0)},Polygon:function(e,t){Mh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Mh(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Qo(n[r],t)}};function $l(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Mh(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)$l(e[n],t,1);t.polygonEnd()}function sr(e,t){e&&vh.hasOwnProperty(e.type)?vh[e.type](e,t):Qo(e,t)}function Dl(e){return[Bn(e[1],e[0]),Rt(e[2])]}function ni(e){var t=e[0],n=e[1],r=pe(n);return[r*pe(t),r*fe(t),fe(n)]}function no(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Is(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ro(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Nl(e){var t=wt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Bl(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Fl(e,t){return Ce(e)>be&&(e-=Math.round(e/St)*St),[e,t]}Fl.invert=Fl;function sm(e,t,n){return(e%=St)?t||n?Bl(Ph(e),Ah(t,n)):Ph(e):t||n?Ah(t,n):Fl}function xh(e){return function(t,n){return t+=e,Ce(t)>be&&(t-=Math.round(t/St)*St),[t,n]}}function Ph(e){var t=xh(e);return t.invert=xh(-e),t}function Ah(e,t){var n=pe(e),r=fe(e),i=pe(t),a=fe(t);function o(u,s){var l=pe(s),c=pe(u)*l,f=fe(u)*l,h=fe(s),d=h*n+c*r;return[Bn(f*i-d*a,c*n-h*r),Rt(d*i+f*a)]}return o.invert=function(u,s){var l=pe(s),c=pe(u)*l,f=fe(u)*l,h=fe(s),d=h*i-f*a;return[Bn(f*i+h*a,c*n+d*r),Rt(d*n-c*r)]},o}function L5(e){e=sm(e[0]*Le,e[1]*Le,e.length>2?e[2]*Le:0);function t(n){return n=e(n[0]*Le,n[1]*Le),n[0]*=lt,n[1]*=lt,n}return t.invert=function(n){return n=e.invert(n[0]*Le,n[1]*Le),n[0]*=lt,n[1]*=lt,n},t}function I5(e,t,n,r,i,a){if(n){var o=pe(t),u=fe(t),s=r*n;i==null?(i=t+r*St,a=t-s/2):(i=Sh(o,i),a=Sh(o,a),(r>0?i<a:i>a)&&(i+=r*St));for(var l,c=i;r>0?c>a:c<a;c-=s)l=Dl([o,-u*pe(c),-u*fe(c)]),e.point(l[0],l[1])}}function Sh(e,t){t=ni(t),t[0]-=e,Nl(t);var n=um(-t[1]);return((-t[2]<0?-n:n)+St-de)%St}function lm(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Bt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function So(e,t){return Ce(e[0]-t[0])<de&&Ce(e[1]-t[1])<de}function io(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function cm(e,t,n,r,i){var a=[],o=[],u,s;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,g=m[0],y=m[p],b;if(So(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),u=0;u<p;++u)i.point((g=m[u])[0],g[1]);i.lineEnd();return}y[0]+=2*de}a.push(b=new io(g,m,null,!0)),o.push(b.o=new io(g,null,b,!1)),a.push(b=new io(y,m,null,!1)),o.push(b.o=new io(y,null,b,!0))}}),!!a.length){for(o.sort(t),Eh(a),Eh(o),u=0,s=o.length;u<s;++u)o[u].e=n=!n;for(var l=a[0],c,f;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Eh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Rs(e){return Ce(e[0])<=be?e[0]:Nt(e[0])*((Ce(e[0])+be)%St-be)}function R5(e,t){var n=Rs(t),r=t[1],i=fe(r),a=[fe(n),-pe(n),0],o=0,u=0,s=new br;i===1?r=Ie+de:i===-1&&(r=-Ie-de);for(var l=0,c=e.length;l<c;++l)if(h=(f=e[l]).length)for(var f,h,d=f[h-1],m=Rs(d),p=d[1]/2+wh,g=fe(p),y=pe(p),b=0;b<h;++b,m=w,g=M,y=x,d=v){var v=f[b],w=Rs(v),_=v[1]/2+wh,M=fe(_),x=pe(_),C=w-m,E=C>=0?1:-1,$=E*C,A=$>be,L=g*M;if(s.add(Bn(L*E*fe($),y*x+L*pe($))),o+=A?C+E*St:C,A^m>=n^w>=n){var O=Jo(ni(d),ni(v));Nl(O);var T=Jo(a,O);Nl(T);var S=(A^C>=0?-1:1)*Rt(T[2]);(r>S||r===S&&(O[0]||O[1]))&&(u+=A^C>=0?1:-1)}}return(o<-de||o<de&&s<-am)^u&1}function fm(e,t,n,r){return function(i){var a=t(i),o=lm(),u=t(o),s=!1,l,c,f,h={point:d,lineStart:p,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=b,h.lineEnd=v,c=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=p,h.lineEnd=g,c=y1(c);var w=R5(l,r);c.length?(s||(i.polygonStart(),s=!0),cm(c,q5,w,n,i)):w&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(w,_){e(w,_)&&i.point(w,_)}function m(w,_){a.point(w,_)}function p(){h.point=m,a.lineStart()}function g(){h.point=d,a.lineEnd()}function y(w,_){f.push([w,_]),u.point(w,_)}function b(){u.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),u.lineEnd();var w=u.clean(),_=o.result(),M,x=_.length,C,E,$;if(f.pop(),l.push(f),f=null,!!x){if(w&1){if(E=_[0],(C=E.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),M=0;M<C;++M)i.point(($=E[M])[0],$[1]);i.lineEnd()}return}x>1&&w&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(O5))}}return h}}function O5(e){return e.length>1}function q5(e,t){return((e=e.x)[0]<0?e[1]-Ie-de:Ie-e[1])-((t=t.x)[0]<0?t[1]-Ie-de:Ie-t[1])}const Ch=fm(function(){return!0},G5,U5,[-be,-Ie]);function G5(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var u=a>0?be:-be,s=Ce(a-t);Ce(s-be)<de?(e.point(t,n=(n+o)/2>0?Ie:-Ie),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(a,n),i=0):r!==u&&s>=be&&(Ce(t-r)<de&&(t-=r*de),Ce(a-u)<de&&(a-=u*de),n=z5(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=a,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function z5(e,t,n,r){var i,a,o=fe(e-n);return Ce(o)>de?bi((fe(t)*(a=pe(r))*fe(n)-fe(r)*(i=pe(t))*fe(e))/(i*a*o)):(t+r)/2}function U5(e,t,n,r){var i;if(e==null)i=n*Ie,r.point(-be,i),r.point(0,i),r.point(be,i),r.point(be,0),r.point(be,-i),r.point(0,-i),r.point(-be,-i),r.point(-be,0),r.point(-be,i);else if(Ce(e[0]-t[0])>de){var a=e[0]<t[0]?be:-be;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function H5(e){var t=pe(e),n=6*Le,r=t>0,i=Ce(t)>de;function a(c,f,h,d){I5(d,e,n,h,c,f)}function o(c,f){return pe(c)*pe(f)>t}function u(c){var f,h,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(g,y){var b=[g,y],v,w=o(g,y),_=r?w?0:l(g,y):w?l(g+(g<0?be:-be),y):0;if(!f&&(m=d=w)&&c.lineStart(),w!==d&&(v=s(f,b),(!v||So(f,v)||So(b,v))&&(b[2]=1)),w!==d)p=0,w?(c.lineStart(),v=s(b,f),c.point(v[0],v[1])):(v=s(f,b),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(i&&f&&r^w){var M;!(_&h)&&(M=s(b,f,!0))&&(p=0,r?(c.lineStart(),c.point(M[0][0],M[0][1]),c.point(M[1][0],M[1][1]),c.lineEnd()):(c.point(M[1][0],M[1][1]),c.lineEnd(),c.lineStart(),c.point(M[0][0],M[0][1],3)))}w&&(!f||!So(f,b))&&c.point(b[0],b[1]),f=b,d=w,h=_},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return p|(m&&d)<<1}}}function s(c,f,h){var d=ni(c),m=ni(f),p=[1,0,0],g=Jo(d,m),y=no(g,g),b=g[0],v=y-b*b;if(!v)return!h&&c;var w=t*y/v,_=-t*b/v,M=Jo(p,g),x=ro(p,w),C=ro(g,_);Is(x,C);var E=M,$=no(x,E),A=no(E,E),L=$*$-A*(no(x,x)-1);if(!(L<0)){var O=wt(L),T=ro(E,(-$-O)/A);if(Is(T,x),T=Dl(T),!h)return T;var S=c[0],I=f[0],ne=c[1],te=f[1],K;I<S&&(K=S,S=I,I=K);var q=I-S,G=Ce(q-be)<de,z=G||q<de;if(!G&&te<ne&&(K=ne,ne=te,te=K),z?G?ne+te>0^T[1]<(Ce(T[0]-S)<de?ne:te):ne<=T[1]&&T[1]<=te:q>be^(S<=T[0]&&T[0]<=I)){var U=ro(E,(-$+O)/A);return Is(U,x),[T,Dl(U)]}}}function l(c,f){var h=r?e:be-e,d=0;return c<-h?d|=1:c>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return fm(o,u,a,r?[0,-e]:[-be,e-be])}function W5(e,t,n,r,i,a){var o=e[0],u=e[1],s=t[0],l=t[1],c=0,f=1,h=s-o,d=l-u,m;if(m=n-o,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=i-o,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}if(m=r-u,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=a-u,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=o+c*h,e[1]=u+c*d),f<1&&(t[0]=o+f*h,t[1]=u+f*d),!0}}}}}var Bi=1e9,ao=-Bi;function hm(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function a(l,c,f,h){var d=0,m=0;if(l==null||(d=o(l,f))!==(m=o(c,f))||s(l,c)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==m);else h.point(c[0],c[1])}function o(l,c){return Ce(l[0]-e)<de?c>0?0:3:Ce(l[0]-n)<de?c>0?2:1:Ce(l[1]-t)<de?c>0?1:0:c>0?3:2}function u(l,c){return s(l.x,c.x)}function s(l,c){var f=o(l,1),h=o(c,1);return f!==h?f-h:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=lm(),h,d,m,p,g,y,b,v,w,_,M,x={point:C,lineStart:L,lineEnd:O,polygonStart:$,polygonEnd:A};function C(S,I){i(S,I)&&c.point(S,I)}function E(){for(var S=0,I=0,ne=d.length;I<ne;++I)for(var te=d[I],K=1,q=te.length,G=te[0],z,U,oe=G[0],ue=G[1];K<q;++K)z=oe,U=ue,G=te[K],oe=G[0],ue=G[1],U<=r?ue>r&&(oe-z)*(r-U)>(ue-U)*(e-z)&&++S:ue<=r&&(oe-z)*(r-U)<(ue-U)*(e-z)&&--S;return S}function $(){c=f,h=[],d=[],M=!0}function A(){var S=E(),I=M&&S,ne=(h=y1(h)).length;(I||ne)&&(l.polygonStart(),I&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),ne&&cm(h,u,S,a,l),l.polygonEnd()),c=l,h=d=m=null}function L(){x.point=T,d&&d.push(m=[]),_=!0,w=!1,b=v=NaN}function O(){h&&(T(p,g),y&&w&&f.rejoin(),h.push(f.result())),x.point=C,w&&c.lineEnd()}function T(S,I){var ne=i(S,I);if(d&&m.push([S,I]),_)p=S,g=I,y=ne,_=!1,ne&&(c.lineStart(),c.point(S,I));else if(ne&&w)c.point(S,I);else{var te=[b=Math.max(ao,Math.min(Bi,b)),v=Math.max(ao,Math.min(Bi,v))],K=[S=Math.max(ao,Math.min(Bi,S)),I=Math.max(ao,Math.min(Bi,I))];W5(te,K,e,t,n,r)?(w||(c.lineStart(),c.point(te[0],te[1])),c.point(K[0],K[1]),ne||c.lineEnd(),M=!1):ne&&(c.lineStart(),c.point(S,I),M=!1)}b=S,v=I,w=ne}return x}}const Ll=e=>e;var Os=new br,Il=new br,dm,mm,Rl,Ol,Cn={point:Bt,lineStart:Bt,lineEnd:Bt,polygonStart:function(){Cn.lineStart=V5,Cn.lineEnd=j5},polygonEnd:function(){Cn.lineStart=Cn.lineEnd=Cn.point=Bt,Os.add(Ce(Il)),Il=new br},result:function(){var e=Os/2;return Os=new br,e}};function V5(){Cn.point=Y5}function Y5(e,t){Cn.point=pm,dm=Rl=e,mm=Ol=t}function pm(e,t){Il.add(Ol*e-Rl*t),Rl=e,Ol=t}function j5(){pm(dm,mm)}var ri=1/0,eu=ri,aa=-ri,tu=aa,nu={point:X5,lineStart:Bt,lineEnd:Bt,polygonStart:Bt,polygonEnd:Bt,result:function(){var e=[[ri,eu],[aa,tu]];return aa=tu=-(eu=ri=1/0),e}};function X5(e,t){e<ri&&(ri=e),e>aa&&(aa=e),t<eu&&(eu=t),t>tu&&(tu=t)}var ql=0,Gl=0,Fi=0,ru=0,iu=0,qr=0,zl=0,Ul=0,Li=0,bm,gm,un,sn,$t={point:Mr,lineStart:Th,lineEnd:kh,polygonStart:function(){$t.lineStart=Q5,$t.lineEnd=J5},polygonEnd:function(){$t.point=Mr,$t.lineStart=Th,$t.lineEnd=kh},result:function(){var e=Li?[zl/Li,Ul/Li]:qr?[ru/qr,iu/qr]:Fi?[ql/Fi,Gl/Fi]:[NaN,NaN];return ql=Gl=Fi=ru=iu=qr=zl=Ul=Li=0,e}};function Mr(e,t){ql+=e,Gl+=t,++Fi}function Th(){$t.point=Z5}function Z5(e,t){$t.point=K5,Mr(un=e,sn=t)}function K5(e,t){var n=e-un,r=t-sn,i=wt(n*n+r*r);ru+=i*(un+e)/2,iu+=i*(sn+t)/2,qr+=i,Mr(un=e,sn=t)}function kh(){$t.point=Mr}function Q5(){$t.point=e4}function J5(){ym(bm,gm)}function e4(e,t){$t.point=ym,Mr(bm=un=e,gm=sn=t)}function ym(e,t){var n=e-un,r=t-sn,i=wt(n*n+r*r);ru+=i*(un+e)/2,iu+=i*(sn+t)/2,qr+=i,i=sn*e-un*t,zl+=i*(un+e),Ul+=i*(sn+t),Li+=i*3,Mr(un=e,sn=t)}function wm(e){this._context=e}wm.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,St);break}}},result:Bt};var Hl=new br,qs,vm,_m,Ii,Ri,oa={point:Bt,lineStart:function(){oa.point=t4},lineEnd:function(){qs&&Mm(vm,_m),oa.point=Bt},polygonStart:function(){qs=!0},polygonEnd:function(){qs=null},result:function(){var e=+Hl;return Hl=new br,e}};function t4(e,t){oa.point=Mm,vm=Ii=e,_m=Ri=t}function Mm(e,t){Ii-=e,Ri-=t,Hl.add(wt(Ii*Ii+Ri*Ri)),Ii=e,Ri=t}let $h,au,Dh,Nh;class Bh{constructor(t){this._append=t==null?xm:n4(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Dh||this._append!==au){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Dh=r,au=this._append,Nh=this._,this._=i}this._+=Nh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function xm(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function n4(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return xm;if(t!==$h){const n=10**t;$h=t,au=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return au}function Uu(e,t){let n=3,r=4.5,i,a;function o(u){return u&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),sr(u,i(a))),a.result()}return o.area=function(u){return sr(u,i(Cn)),Cn.result()},o.measure=function(u){return sr(u,i(oa)),oa.result()},o.bounds=function(u){return sr(u,i(nu)),nu.result()},o.centroid=function(u){return sr(u,i($t)),$t.result()},o.projection=function(u){return arguments.length?(i=u==null?(e=null,Ll):(e=u).stream,o):e},o.context=function(u){return arguments.length?(a=u==null?(t=null,new Bh(n)):new wm(t=u),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(a.pointRadius(+u),+u),o):r},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const s=Math.floor(u);if(!(s>=0))throw new RangeError(`invalid digits: ${u}`);n=s}return t===null&&(a=new Bh(n)),o},o.projection(e).digits(n).context(t)}function Wl(e){return{stream:Hu(e)}}function Hu(e){return function(t){var n=new Vl;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Vl(){}Vl.prototype={constructor:Vl,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Oc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),sr(n,e.stream(nu)),t(nu.result()),r!=null&&e.clipExtent(r),e}function qc(e,t,n){return Oc(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([u,s])},n)}function Pm(e,t,n){return qc(e,[[0,0],t],n)}function Am(e,t,n){return Oc(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,u=-a*r[0][1];e.scale(150*a).translate([o,u])},n)}function Sm(e,t,n){return Oc(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],u=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,u])},n)}var Fh=16,r4=pe(30*Le);function Lh(e,t){return+t?a4(e,t):i4(e)}function i4(e){return Hu({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function a4(e,t){function n(r,i,a,o,u,s,l,c,f,h,d,m,p,g){var y=l-r,b=c-i,v=y*y+b*b;if(v>4*t&&p--){var w=o+h,_=u+d,M=s+m,x=wt(w*w+_*_+M*M),C=Rt(M/=x),E=Ce(Ce(M)-1)<de||Ce(a-f)<de?(a+f)/2:Bn(_,w),$=e(E,C),A=$[0],L=$[1],O=A-r,T=L-i,S=b*O-y*T;(S*S/v>t||Ce((y*O+b*T)/v-.5)>.3||o*h+u*d+s*m<r4)&&(n(r,i,a,o,u,s,A,L,E,w/=x,_/=x,M,p,g),g.point(A,L),n(A,L,E,w,_,M,l,c,f,h,d,m,p,g))}}return function(r){var i,a,o,u,s,l,c,f,h,d,m,p,g={point:y,lineStart:b,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(C,E){C=e(C,E),r.point(C[0],C[1])}function b(){f=NaN,g.point=v,r.lineStart()}function v(C,E){var $=ni([C,E]),A=e(C,E);n(f,h,c,d,m,p,f=A[0],h=A[1],c=C,d=$[0],m=$[1],p=$[2],Fh,r),r.point(f,h)}function w(){g.point=y,r.lineEnd()}function _(){b(),g.point=M,g.lineEnd=x}function M(C,E){v(i=C,E),a=f,o=h,u=d,s=m,l=p,g.point=v}function x(){n(f,h,c,d,m,p,a,o,i,u,s,l,Fh,r),g.lineEnd=w,w()}return g}}var o4=Hu({point:function(e,t){this.stream.point(e*Le,t*Le)}});function u4(e){return Hu({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function s4(e,t,n,r,i){function a(o,u){return o*=r,u*=i,[t+e*o,n-e*u]}return a.invert=function(o,u){return[(o-t)/e*r,(n-u)/e*i]},a}function Ih(e,t,n,r,i,a){if(!a)return s4(e,t,n,r,i);var o=pe(a),u=fe(a),s=o*e,l=u*e,c=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function m(p,g){return p*=r,g*=i,[s*p-l*g+t,n-l*p-s*g]}return m.invert=function(p,g){return[r*(c*p-f*g+h),i*(d-f*p-c*g)]},m}function er(e){return Em(function(){return e})()}function Em(e){var t,n=150,r=480,i=250,a=0,o=0,u=0,s=0,l=0,c,f=0,h=1,d=1,m=null,p=Ch,g=null,y,b,v,w=Ll,_=.5,M,x,C,E,$;function A(S){return C(S[0]*Le,S[1]*Le)}function L(S){return S=C.invert(S[0],S[1]),S&&[S[0]*lt,S[1]*lt]}A.stream=function(S){return E&&$===S?E:E=o4(u4(c)(p(M(w($=S)))))},A.preclip=function(S){return arguments.length?(p=S,m=void 0,T()):p},A.postclip=function(S){return arguments.length?(w=S,g=y=b=v=null,T()):w},A.clipAngle=function(S){return arguments.length?(p=+S?H5(m=S*Le):(m=null,Ch),T()):m*lt},A.clipExtent=function(S){return arguments.length?(w=S==null?(g=y=b=v=null,Ll):hm(g=+S[0][0],y=+S[0][1],b=+S[1][0],v=+S[1][1]),T()):g==null?null:[[g,y],[b,v]]},A.scale=function(S){return arguments.length?(n=+S,O()):n},A.translate=function(S){return arguments.length?(r=+S[0],i=+S[1],O()):[r,i]},A.center=function(S){return arguments.length?(a=S[0]%360*Le,o=S[1]%360*Le,O()):[a*lt,o*lt]},A.rotate=function(S){return arguments.length?(u=S[0]%360*Le,s=S[1]%360*Le,l=S.length>2?S[2]%360*Le:0,O()):[u*lt,s*lt,l*lt]},A.angle=function(S){return arguments.length?(f=S%360*Le,O()):f*lt},A.reflectX=function(S){return arguments.length?(h=S?-1:1,O()):h<0},A.reflectY=function(S){return arguments.length?(d=S?-1:1,O()):d<0},A.precision=function(S){return arguments.length?(M=Lh(x,_=S*S),T()):wt(_)},A.fitExtent=function(S,I){return qc(A,S,I)},A.fitSize=function(S,I){return Pm(A,S,I)},A.fitWidth=function(S,I){return Am(A,S,I)},A.fitHeight=function(S,I){return Sm(A,S,I)};function O(){var S=Ih(n,0,0,h,d,f).apply(null,t(a,o)),I=Ih(n,r-S[0],i-S[1],h,d,f);return c=sm(u,s,l),x=Bl(t,I),C=Bl(c,x),M=Lh(x,_),T()}function T(){return E=$=null,A}return function(){return t=e.apply(this,arguments),A.invert=t.invert&&L,O()}}function Gc(e){var t=0,n=be/3,r=Em(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Le,n=a[1]*Le):[t*lt,n*lt]},i}function l4(e){var t=pe(e);function n(r,i){return[r*t,fe(i)/t]}return n.invert=function(r,i){return[r/t,Rt(i*t)]},n}function c4(e,t){var n=fe(e),r=(n+fe(t))/2;if(Ce(r)<de)return l4(e);var i=1+n*(2*r-n),a=wt(i)/r;function o(u,s){var l=wt(i-2*r*fe(s))/r;return[l*fe(u*=r),a-l*pe(u)]}return o.invert=function(u,s){var l=a-s,c=Bn(u,Ce(l))*Nt(l);return l*r<0&&(c-=be*Nt(u)*Nt(l)),[c/r,Rt((i-(u*u+l*l)*r*r)/(2*r))]},o}function ou(){return Gc(c4).scale(155.424).center([0,33.6442])}function Cm(){return ou().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function f4(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function h4(){var e,t,n=Cm(),r,i=ou().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=ou().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,s,l={point:function(h,d){s=[h,d]}};function c(h){var d=h[0],m=h[1];return s=null,r.point(d,m),s||(a.point(d,m),s)||(u.point(d,m),s)}c.invert=function(h){var d=n.scale(),m=n.translate(),p=(h[0]-m[0])/d,g=(h[1]-m[1])/d;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?o:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=f4([n.stream(t=h),i.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),f()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),m=+h[0],p=+h[1];return r=n.translate(h).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(l),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+de,p+.12*d+de],[m-.214*d-de,p+.234*d-de]]).stream(l),u=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+de,p+.166*d+de],[m-.115*d-de,p+.234*d-de]]).stream(l),f()},c.fitExtent=function(h,d){return qc(c,h,d)},c.fitSize=function(h,d){return Pm(c,h,d)},c.fitWidth=function(h,d){return Am(c,h,d)},c.fitHeight=function(h,d){return Sm(c,h,d)};function f(){return e=t=null,c}return c.scale(1070)}function Tm(e){return function(t,n){var r=pe(t),i=pe(n),a=e(r*i);return a===1/0?[2,0]:[a*i*fe(t),a*fe(n)]}}function Aa(e){return function(t,n){var r=wt(t*t+n*n),i=e(r),a=fe(i),o=pe(i);return[Bn(t*a,r*o),Rt(r&&n*a/r)]}}var km=Tm(function(e){return wt(2/(1+e))});km.invert=Aa(function(e){return 2*Rt(e/2)});function d4(){return er(km).scale(124.75).clipAngle(180-.001)}var $m=Tm(function(e){return(e=um(e))&&e/fe(e)});$m.invert=Aa(function(e){return e});function m4(){return er($m).scale(79.4188).clipAngle(180-.001)}function Wu(e,t){return[e,Ko(Rc((Ie+t)/2))]}Wu.invert=function(e,t){return[e,2*bi(om(t))-Ie]};function p4(){return Dm(Wu).scale(961/St)}function Dm(e){var t=er(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,u,s,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=u=s=l=null:(o=+f[0][0],u=+f[0][1],s=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,u],[s,l]]};function c(){var f=be*r(),h=t(L5(t.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Wu?[[Math.max(h[0]-f,o),u],[Math.min(h[0]+f,s),l]]:[[o,Math.max(h[1]-f,u)],[s,Math.min(h[1]+f,l)]])}return c()}function oo(e){return Rc((Ie+e)/2)}function b4(e,t){var n=pe(e),r=e===t?fe(e):Ko(n/pe(t))/Ko(oo(t)/oo(e)),i=n*Ls(oo(e),r)/r;if(!r)return Wu;function a(o,u){i>0?u<-Ie+de&&(u=-Ie+de):u>Ie-de&&(u=Ie-de);var s=i/Ls(oo(u),r);return[s*fe(r*o),i-s*pe(r*o)]}return a.invert=function(o,u){var s=i-u,l=Nt(r)*wt(o*o+s*s),c=Bn(o,Ce(s))*Nt(s);return s*r<0&&(c-=be*Nt(o)*Nt(s)),[c/r,2*bi(Ls(i/l,1/r))-Ie]},a}function g4(){return Gc(b4).scale(109.5).parallels([30,30])}function uu(e,t){return[e,t]}uu.invert=uu;function y4(){return er(uu).scale(152.63)}function w4(e,t){var n=pe(e),r=e===t?fe(e):(n-pe(t))/(t-e),i=n/r+e;if(Ce(r)<de)return uu;function a(o,u){var s=i-u,l=r*o;return[s*fe(l),i-s*pe(l)]}return a.invert=function(o,u){var s=i-u,l=Bn(o,Ce(s))*Nt(s);return s*r<0&&(l-=be*Nt(o)*Nt(s)),[l/r,i-Nt(r)*wt(o*o+s*s)]},a}function v4(){return Gc(w4).scale(131.154).center([0,13.9389])}var Vi=1.340264,Yi=-.081106,ji=893e-6,Xi=.003796,su=wt(3)/2,_4=12;function Nm(e,t){var n=Rt(su*fe(t)),r=n*n,i=r*r*r;return[e*pe(n)/(su*(Vi+3*Yi*r+i*(7*ji+9*Xi*r))),n*(Vi+Yi*r+i*(ji+Xi*r))]}Nm.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,u,s;a<_4&&(u=n*(Vi+Yi*r+i*(ji+Xi*r))-t,s=Vi+3*Yi*r+i*(7*ji+9*Xi*r),n-=o=u/s,r=n*n,i=r*r*r,!(Ce(o)<am));++a);return[su*e*(Vi+3*Yi*r+i*(7*ji+9*Xi*r))/pe(n),Rt(fe(n)/su)]};function M4(){return er(Nm).scale(177.158)}function Bm(e,t){var n=pe(t),r=pe(e)*n;return[n*fe(e)/r,fe(t)/r]}Bm.invert=Aa(bi);function x4(){return er(Bm).scale(144.049).clipAngle(60)}function Fm(e,t){return[pe(t)*fe(e),fe(t)]}Fm.invert=Aa(Rt);function P4(){return er(Fm).scale(249.5).clipAngle(90+de)}function Lm(e,t){var n=pe(t),r=1+pe(e)*n;return[n*fe(e)/r,fe(t)/r]}Lm.invert=Aa(function(e){return 2*bi(e)});function A4(){return er(Lm).scale(250).clipAngle(142)}function Im(e,t){return[Ko(Rc((Ie+t)/2)),-e]}Im.invert=function(e,t){return[-t,2*bi(om(e))-Ie]};function S4(){var e=Dm(Im),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function wn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Vu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Yl=Symbol("implicit");function zc(){var e=new gr,t=[],n=[],r=Yl;function i(a){let o=e.get(a);if(o===void 0){if(r!==Yl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new gr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return zc(t,n).unknown(r)},wn.apply(i,arguments),i}function Yu(){var e=zc().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,u=!1,s=0,l=0,c=.5;delete e.unknown;function f(){var h=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,h-s+l*2),u&&(a=Math.floor(a)),m+=(p-m-a*(h-s))*c,o=a*(1-s),u&&(m=Math.round(m),o=Math.round(o));var g=yl(h).map(function(y){return m+a*y});return n(d?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(u=!!h,f()):u},e.padding=function(h){return arguments.length?(s=Math.min(1,l=+h),f()):s},e.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return Yu(t(),[r,i]).round(u).paddingInner(s).paddingOuter(l).align(c)},wn.apply(f(),arguments)}function Rm(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Rm(t())},e}function E4(){return Rm(Yu.apply(null,arguments).paddingInner(1))}function C4(e){return function(){return e}}function jl(e){return+e}var Rh=[0,1];function Ft(e){return e}function Xl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:C4(isNaN(t)?NaN:.5)}function T4(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function k4(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Xl(i,r),a=n(o,a)):(r=Xl(r,i),a=n(a,o)),function(u){return a(r(u))}}function $4(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Xl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var s=ku(e,u,1,r)-1;return a[s](i[s](u))}}function Sa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ju(){var e=Rh,t=Rh,n=Pa,r,i,a,o=Ft,u,s,l;function c(){var h=Math.min(e.length,t.length);return o!==Ft&&(o=T4(e[0],e[h-1])),u=h>2?$4:k4,s=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(s||(s=u(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=u(t,e.map(r),at)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,jl),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=Dc,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Ft,c()):o!==Ft},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Om(){return ju()(Ft,Ft)}function D4(e,t,n,r){var i=bl(e,t,n),a;switch(r=ia(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=B5(i,o))&&(r.precision=a),im(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=F5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=N5(i))&&(r.precision=a-(r.type==="%")*2);break}}return pi(r)}function Ea(e){var t=e.domain;return e.ticks=function(n){var r=t();return ea(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return D4(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],u=r[a],s,l,c=10;for(u<o&&(l=o,o=u,u=l,l=i,i=a,a=l);c-- >0;){if(l=zo(o,u,n),l===s)return r[i]=o,r[a]=u,t(r);if(l>0)o=Math.floor(o/l)*l,u=Math.ceil(u/l)*l;else if(l<0)o=Math.ceil(o*l)/l,u=Math.floor(u*l)/l;else break;s=l}return e},e}function Uc(){var e=Om();return e.copy=function(){return Sa(e,Uc())},wn.apply(e,arguments),Ea(e)}function qm(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,jl),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return qm(e).unknown(t)},e=arguments.length?Array.from(e,jl):[0,1],Ea(n)}function Gm(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Oh(e){return Math.log(e)}function qh(e){return Math.exp(e)}function N4(e){return-Math.log(-e)}function B4(e){return-Math.exp(-e)}function F4(e){return isFinite(e)?+("1e"+e):e<0?0:e}function L4(e){return e===10?F4:e===Math.E?Math.exp:t=>Math.pow(e,t)}function I4(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Gh(e){return(t,n)=>-e(-t,n)}function zm(e){const t=e(Oh,qh),n=t.domain;let r=10,i,a;function o(){return i=I4(r),a=L4(r),n()[0]<0?(i=Gh(i),a=Gh(a),e(N4,B4)):e(Oh,qh),t}return t.base=function(u){return arguments.length?(r=+u,o()):r},t.domain=function(u){return arguments.length?(n(u),o()):n()},t.ticks=u=>{const s=n();let l=s[0],c=s[s.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),m,p;const g=u==null?10:+u;let y=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(m=1;m<r;++m)if(p=h<0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;y.push(p)}}else for(;h<=d;++h)for(m=r-1;m>=1;--m)if(p=h>0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;y.push(p)}y.length*2<g&&(y=ea(l,c,g))}else y=ea(h,d,Math.min(d-h,g)).map(a);return f?y.reverse():y},t.tickFormat=(u,s)=>{if(u==null&&(u=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=ia(s)).precision==null&&(s.trim=!0),s=pi(s)),u===1/0)return s;const l=Math.max(1,r*u/t.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?s(c):""}},t.nice=()=>n(Gm(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function Um(){const e=zm(ju()).domain([1,10]);return e.copy=()=>Sa(e,Um()).base(e.base()),wn.apply(e,arguments),e}function zh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Uh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Hm(e){var t=1,n=e(zh(t),Uh(t));return n.constant=function(r){return arguments.length?e(zh(t=+r),Uh(t)):t},Ea(n)}function Wm(){var e=Hm(ju());return e.copy=function(){return Sa(e,Wm()).constant(e.constant())},wn.apply(e,arguments)}function Hh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function R4(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function O4(e){return e<0?-e*e:e*e}function Vm(e){var t=e(Ft,Ft),n=1;function r(){return n===1?e(Ft,Ft):n===.5?e(R4,O4):e(Hh(n),Hh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ea(t)}function Ym(){var e=Vm(ju());return e.copy=function(){return Sa(e,Ym()).exponent(e.exponent())},wn.apply(e,arguments),e}function jm(){var e=[],t=[],n=[],r;function i(){var o=0,u=Math.max(1,t.length);for(n=new Array(u-1);++o<u;)n[o-1]=E3(e,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:t[ku(n,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(yt),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return jm().domain(e).range(t).unknown(r)},wn.apply(a,arguments)}function Xm(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[ku(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Xm().domain(e).range(t).unknown(n)},wn.apply(i,arguments)}const Gs=new Date,zs=new Date;function Ue(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const s=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return s;let l;do s.push(l=new Date(+a)),t(a,u),e(a);while(l<a&&a<o);return s},i.filter=a=>Ue(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Gs.setTime(+a),zs.setTime(+o),e(Gs),e(zs),Math.floor(n(Gs,zs))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const lu=Ue(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ue(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):lu);lu.range;const kn=1e3,Lt=kn*60,$n=Lt*60,Fn=$n*24,Hc=Fn*7,Wh=Fn*30,Us=Fn*365,Yt=Ue(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*kn)},(e,t)=>(t-e)/kn,e=>e.getUTCSeconds());Yt.range;const Ca=Ue(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kn)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getMinutes());Ca.range;const Ta=Ue(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getUTCMinutes());Ta.range;const ka=Ue(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kn-e.getMinutes()*Lt)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getHours());ka.range;const $a=Ue(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getUTCHours());$a.range;const Er=Ue(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lt)/Fn,e=>e.getDate()-1);Er.range;const Xu=Ue(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>e.getUTCDate()-1);Xu.range;const Zu=Ue(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Fn,e=>Math.floor(e/Fn));Zu.range;function Cr(e){return Ue(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Lt)/Hc)}const ii=Cr(0),ua=Cr(1),Zm=Cr(2),Km=Cr(3),xr=Cr(4),Qm=Cr(5),Jm=Cr(6);ii.range;ua.range;Zm.range;Km.range;xr.range;Qm.range;Jm.range;function Tr(e){return Ue(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Hc)}const ai=Tr(0),sa=Tr(1),ep=Tr(2),tp=Tr(3),Pr=Tr(4),np=Tr(5),rp=Tr(6);ai.range;sa.range;ep.range;tp.range;Pr.range;np.range;rp.range;const Da=Ue(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Da.range;const Na=Ue(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Na.range;const Kt=Ue(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Kt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ue(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Kt.range;const Qt=Ue(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Qt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ue(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Qt.range;function ip(e,t,n,r,i,a){const o=[[Yt,1,kn],[Yt,5,5*kn],[Yt,15,15*kn],[Yt,30,30*kn],[a,1,Lt],[a,5,5*Lt],[a,15,15*Lt],[a,30,30*Lt],[i,1,$n],[i,3,3*$n],[i,6,6*$n],[i,12,12*$n],[r,1,Fn],[r,2,2*Fn],[n,1,Hc],[t,1,Wh],[t,3,3*Wh],[e,1,Us]];function u(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:s(l,c,f),m=d?d.range(l,+c+1):[];return h?m.reverse():m}function s(l,c,f){const h=Math.abs(c-l)/f,d=Tu(([,,g])=>g).right(o,h);if(d===o.length)return e.every(bl(l/Us,c/Us,f));if(d===0)return lu.every(Math.max(bl(l,c,f),1));const[m,p]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return m.every(p)}return[u,s]}const[q4,ap]=ip(Qt,Na,ai,Zu,$a,Ta),[G4,z4]=ip(Kt,Da,ii,Er,ka,Ca);function Hs(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ws(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xi(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function U4(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,l=Pi(i),c=Ai(i),f=Pi(a),h=Ai(a),d=Pi(o),m=Ai(o),p=Pi(u),g=Ai(u),y=Pi(s),b=Ai(s),v={a:ne,A:te,b:K,B:q,c:null,d:Kh,e:Kh,f:h6,g:M6,G:P6,H:l6,I:c6,j:f6,L:op,m:d6,M:m6,p:G,q:z,Q:ed,s:td,S:p6,u:b6,U:g6,V:y6,w:w6,W:v6,x:null,X:null,y:_6,Y:x6,Z:A6,"%":Jh},w={a:U,A:oe,b:ue,B:ie,c:null,d:Qh,e:Qh,f:T6,g:O6,G:G6,H:S6,I:E6,j:C6,L:sp,m:k6,M:$6,p:V,q:Y,Q:ed,s:td,S:D6,u:N6,U:B6,V:F6,w:L6,W:I6,x:null,X:null,y:R6,Y:q6,Z:z6,"%":Jh},_={a:$,A,b:L,B:O,c:T,d:Xh,e:Xh,f:a6,g:jh,G:Yh,H:Zh,I:Zh,j:t6,L:i6,m:e6,M:n6,p:E,q:J4,Q:u6,s:s6,S:r6,u:j4,U:X4,V:Z4,w:Y4,W:K4,x:S,X:I,y:jh,Y:Yh,Z:Q4,"%":o6};v.x=M(n,v),v.X=M(r,v),v.c=M(t,v),w.x=M(n,w),w.X=M(r,w),w.c=M(t,w);function M(N,H){return function(j){var D=[],ge=-1,ee=0,he=N.length,Me,Oe,tt;for(j instanceof Date||(j=new Date(+j));++ge<he;)N.charCodeAt(ge)===37&&(D.push(N.slice(ee,ge)),(Oe=Vh[Me=N.charAt(++ge)])!=null?Me=N.charAt(++ge):Oe=Me==="e"?" ":"0",(tt=H[Me])&&(Me=tt(j,Oe)),D.push(Me),ee=ge+1);return D.push(N.slice(ee,ge)),D.join("")}}function x(N,H){return function(j){var D=xi(1900,void 0,1),ge=C(D,N,j+="",0),ee,he;if(ge!=j.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(H&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(ee=Ws(xi(D.y,0,1)),he=ee.getUTCDay(),ee=he>4||he===0?sa.ceil(ee):sa(ee),ee=Xu.offset(ee,(D.V-1)*7),D.y=ee.getUTCFullYear(),D.m=ee.getUTCMonth(),D.d=ee.getUTCDate()+(D.w+6)%7):(ee=Hs(xi(D.y,0,1)),he=ee.getDay(),ee=he>4||he===0?ua.ceil(ee):ua(ee),ee=Er.offset(ee,(D.V-1)*7),D.y=ee.getFullYear(),D.m=ee.getMonth(),D.d=ee.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),he="Z"in D?Ws(xi(D.y,0,1)).getUTCDay():Hs(xi(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(he+5)%7:D.w+D.U*7-(he+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,Ws(D)):Hs(D)}}function C(N,H,j,D){for(var ge=0,ee=H.length,he=j.length,Me,Oe;ge<ee;){if(D>=he)return-1;if(Me=H.charCodeAt(ge++),Me===37){if(Me=H.charAt(ge++),Oe=_[Me in Vh?H.charAt(ge++):Me],!Oe||(D=Oe(N,j,D))<0)return-1}else if(Me!=j.charCodeAt(D++))return-1}return D}function E(N,H,j){var D=l.exec(H.slice(j));return D?(N.p=c.get(D[0].toLowerCase()),j+D[0].length):-1}function $(N,H,j){var D=d.exec(H.slice(j));return D?(N.w=m.get(D[0].toLowerCase()),j+D[0].length):-1}function A(N,H,j){var D=f.exec(H.slice(j));return D?(N.w=h.get(D[0].toLowerCase()),j+D[0].length):-1}function L(N,H,j){var D=y.exec(H.slice(j));return D?(N.m=b.get(D[0].toLowerCase()),j+D[0].length):-1}function O(N,H,j){var D=p.exec(H.slice(j));return D?(N.m=g.get(D[0].toLowerCase()),j+D[0].length):-1}function T(N,H,j){return C(N,t,H,j)}function S(N,H,j){return C(N,n,H,j)}function I(N,H,j){return C(N,r,H,j)}function ne(N){return o[N.getDay()]}function te(N){return a[N.getDay()]}function K(N){return s[N.getMonth()]}function q(N){return u[N.getMonth()]}function G(N){return i[+(N.getHours()>=12)]}function z(N){return 1+~~(N.getMonth()/3)}function U(N){return o[N.getUTCDay()]}function oe(N){return a[N.getUTCDay()]}function ue(N){return s[N.getUTCMonth()]}function ie(N){return u[N.getUTCMonth()]}function V(N){return i[+(N.getUTCHours()>=12)]}function Y(N){return 1+~~(N.getUTCMonth()/3)}return{format:function(N){var H=M(N+="",v);return H.toString=function(){return N},H},parse:function(N){var H=x(N+="",!1);return H.toString=function(){return N},H},utcFormat:function(N){var H=M(N+="",w);return H.toString=function(){return N},H},utcParse:function(N){var H=x(N+="",!0);return H.toString=function(){return N},H}}}var Vh={"-":"",_:" ",0:"0"},et=/^\s*\d+/,H4=/^%/,W4=/[\\^$*+?|[\]().{}]/g;function xe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function V4(e){return e.replace(W4,"\\$&")}function Pi(e){return new RegExp("^(?:"+e.map(V4).join("|")+")","i")}function Ai(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Y4(e,t,n){var r=et.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function j4(e,t,n){var r=et.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function X4(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Z4(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function K4(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Yh(e,t,n){var r=et.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function jh(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Q4(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function J4(e,t,n){var r=et.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function e6(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Xh(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function t6(e,t,n){var r=et.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Zh(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function n6(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function r6(e,t,n){var r=et.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function i6(e,t,n){var r=et.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function a6(e,t,n){var r=et.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function o6(e,t,n){var r=H4.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function u6(e,t,n){var r=et.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function s6(e,t,n){var r=et.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Kh(e,t){return xe(e.getDate(),t,2)}function l6(e,t){return xe(e.getHours(),t,2)}function c6(e,t){return xe(e.getHours()%12||12,t,2)}function f6(e,t){return xe(1+Er.count(Kt(e),e),t,3)}function op(e,t){return xe(e.getMilliseconds(),t,3)}function h6(e,t){return op(e,t)+"000"}function d6(e,t){return xe(e.getMonth()+1,t,2)}function m6(e,t){return xe(e.getMinutes(),t,2)}function p6(e,t){return xe(e.getSeconds(),t,2)}function b6(e){var t=e.getDay();return t===0?7:t}function g6(e,t){return xe(ii.count(Kt(e)-1,e),t,2)}function up(e){var t=e.getDay();return t>=4||t===0?xr(e):xr.ceil(e)}function y6(e,t){return e=up(e),xe(xr.count(Kt(e),e)+(Kt(e).getDay()===4),t,2)}function w6(e){return e.getDay()}function v6(e,t){return xe(ua.count(Kt(e)-1,e),t,2)}function _6(e,t){return xe(e.getFullYear()%100,t,2)}function M6(e,t){return e=up(e),xe(e.getFullYear()%100,t,2)}function x6(e,t){return xe(e.getFullYear()%1e4,t,4)}function P6(e,t){var n=e.getDay();return e=n>=4||n===0?xr(e):xr.ceil(e),xe(e.getFullYear()%1e4,t,4)}function A6(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xe(t/60|0,"0",2)+xe(t%60,"0",2)}function Qh(e,t){return xe(e.getUTCDate(),t,2)}function S6(e,t){return xe(e.getUTCHours(),t,2)}function E6(e,t){return xe(e.getUTCHours()%12||12,t,2)}function C6(e,t){return xe(1+Xu.count(Qt(e),e),t,3)}function sp(e,t){return xe(e.getUTCMilliseconds(),t,3)}function T6(e,t){return sp(e,t)+"000"}function k6(e,t){return xe(e.getUTCMonth()+1,t,2)}function $6(e,t){return xe(e.getUTCMinutes(),t,2)}function D6(e,t){return xe(e.getUTCSeconds(),t,2)}function N6(e){var t=e.getUTCDay();return t===0?7:t}function B6(e,t){return xe(ai.count(Qt(e)-1,e),t,2)}function lp(e){var t=e.getUTCDay();return t>=4||t===0?Pr(e):Pr.ceil(e)}function F6(e,t){return e=lp(e),xe(Pr.count(Qt(e),e)+(Qt(e).getUTCDay()===4),t,2)}function L6(e){return e.getUTCDay()}function I6(e,t){return xe(sa.count(Qt(e)-1,e),t,2)}function R6(e,t){return xe(e.getUTCFullYear()%100,t,2)}function O6(e,t){return e=lp(e),xe(e.getUTCFullYear()%100,t,2)}function q6(e,t){return xe(e.getUTCFullYear()%1e4,t,4)}function G6(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pr(e):Pr.ceil(e),xe(e.getUTCFullYear()%1e4,t,4)}function z6(){return"+0000"}function Jh(){return"%"}function ed(e){return+e}function td(e){return Math.floor(+e/1e3)}var Br,Wc,Ba;U6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function U6(e){return Br=U4(e),Wc=Br.format,Br.parse,Ba=Br.utcFormat,Br.utcParse,Br}function H6(e){return new Date(e)}function W6(e){return e instanceof Date?+e:+new Date(+e)}function Vc(e,t,n,r,i,a,o,u,s,l){var c=Om(),f=c.invert,h=c.domain,d=l(".%L"),m=l(":%S"),p=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),v=l("%B"),w=l("%Y");function _(M){return(s(M)<M?d:u(M)<M?m:o(M)<M?p:a(M)<M?g:r(M)<M?i(M)<M?y:b:n(M)<M?v:w)(M)}return c.invert=function(M){return new Date(f(M))},c.domain=function(M){return arguments.length?h(Array.from(M,W6)):h().map(H6)},c.ticks=function(M){var x=h();return e(x[0],x[x.length-1],M??10)},c.tickFormat=function(M,x){return x==null?_:l(x)},c.nice=function(M){var x=h();return(!M||typeof M.range!="function")&&(M=t(x[0],x[x.length-1],M??10)),M?h(Gm(x,M)):c},c.copy=function(){return Sa(c,Vc(e,t,n,r,i,a,o,u,s,l))},c}function V6(){return wn.apply(Vc(G4,z4,Kt,Da,ii,Er,ka,Ca,Yt,Wc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Y6(){return wn.apply(Vc(q4,ap,Qt,Na,ai,Xu,$a,Ta,Yt,Ba).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ku(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Qu(){var e=0,t=.5,n=1,r=1,i,a,o,u,s,l=Ft,c,f=!1,h;function d(p){return isNaN(p=+p)?h:(p=.5+((p=+c(p))-a)*(r*p<r*a?u:s),l(f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),a=c(t=+t),o=c(n=+n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(l=p,d):l};function m(p){return function(g){var y,b,v;return arguments.length?([y,b,v]=g,l=qu(p,[y,b,v]),d):[l(0),l(.5),l(1)]}}return d.range=m(Pa),d.rangeRound=m(Dc),d.unknown=function(p){return arguments.length?(h=p,d):h},function(p){return c=p,i=p(e),a=p(t),o=p(n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function cp(){var e=Ea(Qu()(Ft));return e.copy=function(){return Ku(e,cp())},Vu.apply(e,arguments)}function fp(){var e=zm(Qu()).domain([.1,1,10]);return e.copy=function(){return Ku(e,fp()).base(e.base())},Vu.apply(e,arguments)}function hp(){var e=Hm(Qu());return e.copy=function(){return Ku(e,hp()).constant(e.constant())},Vu.apply(e,arguments)}function dp(){var e=Vm(Qu());return e.copy=function(){return Ku(e,dp()).exponent(e.exponent())},Vu.apply(e,arguments)}function me(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const j6=me("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),X6=me("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Z6=me("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),K6=me("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Q6=me("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),J6=me("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),e7=me("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),t7=me("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),n7=me("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),r7=me("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ke=e=>zv(e[e.length-1]);var mp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(me);const pp=ke(mp);var bp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(me);const gp=ke(bp);var yp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(me);const wp=ke(yp);var vp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(me);const _p=ke(vp);var Zl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(me);const cu=ke(Zl);var Mp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(me);const xp=ke(Mp);var Kl=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(me);const fu=ke(Kl);var Pp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(me);const Ap=ke(Pp);var Sp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(me);const Ep=ke(Sp);var Cp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(me);const Tp=ke(Cp);var kp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(me);const $p=ke(kp);var Dp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(me);const Np=ke(Dp);var Bp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(me);const Fp=ke(Bp);var Lp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(me);const Ip=ke(Lp);var Rp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(me);const Op=ke(Rp);var qp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(me);const Gp=ke(qp);var zp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(me);const Up=ke(zp);var Hp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(me);const Wp=ke(Hp);var Vp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(me);const Yp=ke(Vp);var jp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(me);const Xp=ke(jp);var Zp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(me);const Kp=ke(Zp);var Qp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(me);const Jp=ke(Qp);var eb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(me);const tb=ke(eb);var nb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(me);const rb=ke(nb);var ib=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(me);const ab=ke(ib);var ob=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(me);const ub=ke(ob);var sb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(me);const lb=ke(sb);function cb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const fb=Nc(pn(300,.5,0),pn(-240,.5,1));var hb=Nc(pn(-100,.75,.35),pn(80,1.5,.8)),db=Nc(pn(260,.75,.35),pn(80,1.5,.8)),uo=pn();function mb(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return uo.h=360*e-100,uo.s=1.5-1.5*t,uo.l=.8-.9*t,uo+""}var so=Xn(),i7=Math.PI/3,a7=Math.PI*2/3;function pb(e){var t;return e=(.5-e)*Math.PI,so.r=255*(t=Math.sin(e))*t,so.g=255*(t=Math.sin(e+i7))*t,so.b=255*(t=Math.sin(e+a7))*t,so+""}function bb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Ju(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const gb=Ju(me("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var yb=Ju(me("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),wb=Ju(me("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),vb=Ju(me("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ye(e){return function(){return e}}const _b=Math.cos,Yc=Math.min,hu=Math.sin,He=Math.sqrt,nd=1e-12,du=Math.PI,es=2*du;function Mb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new tm(t)}function xb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pb(e){this._context=e}Pb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Fa(e){return new Pb(e)}function Ab(e){return e[0]}function Sb(e){return e[1]}function Eb(e,t){var n=Ye(!0),r=null,i=Fa,a=null,o=Mb(u);e=typeof e=="function"?e:e===void 0?Ab:Ye(e),t=typeof t=="function"?t:t===void 0?Sb:Ye(t);function u(s){var l,c=(s=xb(s)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=c;++l)!(l<c&&n(f=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,l,s),+t(f,l,s));if(d)return a=null,d+""||null}return u.x=function(s){return arguments.length?(e=typeof s=="function"?s:Ye(+s),u):e},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:Ye(+s),u):t},u.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ye(!!s),u):n},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}function o7(e,t,n){var r=null,i=Ye(!0),a=null,o=Fa,u=null,s=Mb(l);e=typeof e=="function"?e:e===void 0?Ab:Ye(+e),t=typeof t=="function"?t:Ye(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Sb:Ye(+n);function l(f){var h,d,m,p=(f=xb(f)).length,g,y=!1,b,v=new Array(p),w=new Array(p);for(a==null&&(u=o(b=s())),h=0;h<=p;++h){if(!(h<p&&i(g=f[h],h,f))===y)if(y=!y)d=h,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),m=h-1;m>=d;--m)u.point(v[m],w[m]);u.lineEnd(),u.areaEnd()}y&&(v[h]=+e(g,h,f),w[h]=+t(g,h,f),u.point(r?+r(g,h,f):v[h],n?+n(g,h,f):w[h]))}if(b)return u=null,b+""||null}function c(){return Eb().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ye(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ye(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ye(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ye(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ye(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ye(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ye(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(u=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=u=null:u=o(a=f),l):a},l}class Cb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function u7(e){return new Cb(e,!0)}function s7(e){return new Cb(e,!1)}const l7=He(3),Tb={draw(e,t){const n=He(t+Yc(t/28,.75))*.59436,r=n/2,i=r*l7;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},la={draw(e,t){const n=He(t/du);e.moveTo(n,0),e.arc(0,0,n,0,es)}},kb={draw(e,t){const n=He(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},$b=He(1/3),c7=$b*2,Db={draw(e,t){const n=He(t/c7),r=n*$b;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Nb={draw(e,t){const n=He(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Bb={draw(e,t){const n=He(t-Yc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Fb={draw(e,t){const n=He(t),r=-n/2;e.rect(r,r,n,n)}},Lb={draw(e,t){const n=He(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},f7=.8908130915292852,Ib=hu(du/10)/hu(7*du/10),h7=hu(es/10)*Ib,d7=-_b(es/10)*Ib,Rb={draw(e,t){const n=He(t*f7),r=h7*n,i=d7*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=es*a/5,u=_b(o),s=hu(o);e.lineTo(s*n,-u*n),e.lineTo(u*r-s*i,s*r+u*i)}e.closePath()}},Vs=He(3),Ob={draw(e,t){const n=-He(t/(Vs*3));e.moveTo(0,n*2),e.lineTo(-Vs*n,-n),e.lineTo(Vs*n,-n),e.closePath()}},m7=He(3),qb={draw(e,t){const n=He(t)*.6824,r=n/2,i=n*m7/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Tt=-.5,kt=He(3)/2,Ql=1/He(12),p7=(Ql/2+1)*3,Gb={draw(e,t){const n=He(t/p7),r=n/2,i=n*Ql,a=r,o=n*Ql+n,u=-a,s=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,s),e.lineTo(Tt*r-kt*i,kt*r+Tt*i),e.lineTo(Tt*a-kt*o,kt*a+Tt*o),e.lineTo(Tt*u-kt*s,kt*u+Tt*s),e.lineTo(Tt*r+kt*i,Tt*i-kt*r),e.lineTo(Tt*a+kt*o,Tt*o-kt*a),e.lineTo(Tt*u+kt*s,Tt*s-kt*u),e.closePath()}},zb={draw(e,t){const n=He(t-Yc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},b7=[la,kb,Db,Fb,Rb,Ob,Gb],g7=[la,Bb,zb,qb,Tb,Lb,Nb];function Zn(){}function mu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ts(e){this._context=e}ts.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y7(e){return new ts(e)}function Ub(e){this._context=e}Ub.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w7(e){return new Ub(e)}function Hb(e){this._context=e}Hb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v7(e){return new Hb(e)}function Wb(e,t){this._basis=new ts(e),this._beta=t}Wb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,u=-1,s;++u<=n;)s=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+s*a),this._beta*t[u]+(1-this._beta)*(i+s*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const _7=function e(t){function n(r){return t===1?new ts(r):new Wb(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function pu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function jc(e,t){this._context=e,this._k=(1-t)/6}jc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const M7=function e(t){function n(r){return new jc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Xc(e,t){this._context=e,this._k=(1-t)/6}Xc.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const x7=function e(t){function n(r){return new Xc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Zc(e,t){this._context=e,this._k=(1-t)/6}Zc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P7=function e(t){function n(r){return new Zc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Kc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>nd){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>nd){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Vb(e,t){this._context=e,this._alpha=t}Vb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Kc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A7=function e(t){function n(r){return t?new Vb(r,t):new jc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Yb(e,t){this._context=e,this._alpha=t}Yb.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Kc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S7=function e(t){function n(r){return t?new Yb(r,t):new Xc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function jb(e,t){this._context=e,this._alpha=t}jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Kc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E7=function e(t){function n(r){return t?new jb(r,t):new Zc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Xb(e){this._context=e}Xb.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function C7(e){return new Xb(e)}function rd(e){return e<0?-1:1}function id(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(rd(a)+rd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function ad(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ys(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function bu(e){this._context=e}bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ys(this,this._t0,ad(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ys(this,ad(this,n=id(this,e,t)),n);break;default:Ys(this,this._t0,n=id(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Zb(e){this._context=new Kb(e)}(Zb.prototype=Object.create(bu.prototype)).point=function(e,t){bu.prototype.point.call(this,t,e)};function Kb(e){this._context=e}Kb.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function T7(e){return new bu(e)}function k7(e){return new Zb(e)}function Qb(e){this._context=e}Qb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=od(e),i=od(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function od(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function $7(e){return new Qb(e)}function ns(e,t){this._context=e,this._t=t}ns.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function D7(e){return new ns(e,.5)}function N7(e){return new ns(e,0)}function B7(e){return new ns(e,1)}function Oi(e,t,n){this.k=e,this.x=t,this.y=n}Oi.prototype={constructor:Oi,scale:function(e){return e===1?this:new Oi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Oi.prototype;const F7="modulepreload",L7=function(e){return"/rhythm-vis/"+e},ud={},Fr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=L7(o),o in ud)return;ud[o]=!0;const u=o.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.href===o&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":F7,u||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),u)return new Promise((f,h)=>{c.addEventListener("load",f),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function I7(e){if(e){if(e=new Uint8Array(e.buffer||e),O7(e))return"wav";if(R7(e))return"mp3";if(G7(e))return"flac";if(z7(e))return"m4a";if(U7(e))return"opus";if(q7(e))return"oga";if(H7(e))return"qoa"}}function R7(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function O7(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function q7(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function G7(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function z7(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function U7(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function H7(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let W7=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],a=r,o=0;a<this.length&&o<t.length;a++,o++)t[o]=i[a]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var a=r,o=0;a<this.length&&o<t.length;a++,o++)i[a]=t[o]}};const V7=globalThis.AudioBuffer||W7;async function Y7(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=I7(e);if(!t)throw Error("Cannot detect audio format");if(!mt[t])throw Error("Missing decoder for "+t+" format");return mt[t](e)}const mt={async oga(e){let{decoder:t}=mt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Fr(()=>import("./index-GaIx5qy7.js"),__vite__mapDeps([0,1,2]));await(mt.oga.decoder=t=new n).ready}return e&&Lr(await t.decodeFile(e))},async mp3(e){let{decoder:t}=mt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Fr(()=>import("./index-DQSth_Ee.js"),__vite__mapDeps([3,2]));await(mt.mp3.decoder=t=new n).ready}return e&&Lr(await t.decode(e))},async flac(e){let{decoder:t}=mt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Fr(()=>import("./index-ZJDti_Zy.js"),__vite__mapDeps([4,1,2]));await(mt.flac.decoder=t=new n).ready}return e&&Lr(await t.decode(e))},async opus(e){let{decoder:t}=mt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Fr(()=>import("./index-2kMqE1XE.js"),__vite__mapDeps([5,1,2]));await(mt.opus.decoder=t=new n).ready}return e&&Lr(await t.decodeFile(e))},async wav(e){let{decode:t}=mt.wav;if(!t){let n=await Fr(()=>import("./index-wNXVkwnC.js").then(r=>r.i),__vite__mapDeps([]));t=mt.wav.decode=n.default.decode}return e&&Lr(await t(e))},async qoa(e){let{decode:t}=mt.qoa;return t||(mt.qoa.decode=t=(await Fr(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),e&&Lr(await t(e))}};function Lr({channelData:e,sampleRate:t}){let n=new V7({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Si=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var j7=X7;function X7(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,a=i===3?32:16,o;return n===2?o=K7(e.getChannelData(0),e.getChannelData(1)):o=e.getChannelData(0),Z7(o,i,r,n,a)}function Z7(e,t,n,r,i){var a=i/8,o=r*a,u=new ArrayBuffer(44+e.length*a),s=new DataView(u);return lo(s,0,"RIFF"),s.setUint32(4,36+e.length*a,!0),lo(s,8,"WAVE"),lo(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,t,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*o,!0),s.setUint16(32,o,!0),s.setUint16(34,i,!0),lo(s,36,"data"),s.setUint32(40,e.length*a,!0),t===1?J7(s,44,e):Q7(s,44,e),u}function K7(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=t[a],a++;return r}function Q7(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function J7(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function lo(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const e9=Jb(j7);async function eg(e){const n=await(await fetch(e)).arrayBuffer();return await Y7(n)}function t9(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),a=new Float32Array(Math.ceil(r*e.sampleRate));for(const o of t){const u=Math.round(o*e.sampleRate);let s=1;for(let l=0;l<i.length;++l)s=Math.max(0,s-2/40100),a[u+l]=i[l]*s}return a}function Qc(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([e9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function n9(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function Jl(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const a=i.audioBuffer.getChannelData(0);for(const o of i.times){const u=Math.round(o*n);for(let s=0;s<a.length;++s)r[u+s]=Math.min(r[u+s]+a[s],1)}}return r}function Kn(e){return e!=null&&!Number.isNaN(e)}function Jt(e,t){return+Kn(t)-+Kn(e)||yt(e,t)}function gu(e,t){return+Kn(t)-+Kn(e)||_a(e,t)}function Jc(e){return e!=null&&`${e}`!=""}function tg(e){return isFinite(e)?e:NaN}function rs(e){return e>0&&isFinite(e)?e:NaN}function ef(e){return e<0&&isFinite(e)?e:NaN}function r9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${i9(e.getUTCFullYear())}-${En(e.getUTCMonth()+1,2)}-${En(e.getUTCDate(),2)}${n||r||i||a?`T${En(n,2)}:${En(r,2)}${i||a?`:${En(i,2)}${a?`.${En(a,3)}`:""}`:""}Z`:""}`}function i9(e){return e<0?`-${En(-e,6)}`:e>9999?`+${En(e,6)}`:En(e,4)}function En(e,t){return`${e}`.padStart(t,"0")}const a9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function ng(e,t){return a9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Gr=1e3,Wn=Gr*60,Vn=Wn*60,bn=Vn*24,on=bn*7,pr=bn*30,zn=bn*365,js=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Gr],["5 seconds",5*Gr],["15 seconds",15*Gr],["30 seconds",30*Gr],["minute",Wn],["5 minutes",5*Wn],["15 minutes",15*Wn],["30 minutes",30*Wn],["hour",Vn],["3 hours",3*Vn],["6 hours",6*Vn],["12 hours",12*Vn],["day",bn],["2 days",2*bn],["week",on],["2 weeks",2*on],["month",pr],["3 months",3*pr],["6 months",6*pr],["year",zn],["2 years",2*zn],["5 years",5*zn],["10 years",10*zn],["20 years",20*zn],["50 years",50*zn],["100 years",100*zn]],tf=new Map([["second",Gr],["minute",Wn],["hour",Vn],["day",bn],["monday",on],["tuesday",on],["wednesday",on],["thursday",on],["friday",on],["saturday",on],["sunday",on],["week",on],["month",pr],["year",zn]]),rg=new Map([["second",Yt],["minute",Ca],["hour",ka],["day",Er],["monday",ua],["tuesday",Zm],["wednesday",Km],["thursday",xr],["friday",Qm],["saturday",Jm],["sunday",ii],["week",ii],["month",Da],["year",Kt]]),nf=new Map([["second",Yt],["minute",Ta],["hour",$a],["day",Zu],["monday",sa],["tuesday",ep],["wednesday",tp],["thursday",Pr],["friday",np],["saturday",rp],["sunday",ai],["week",ai],["month",Na],["year",Qt]]),La=Symbol("intervalDuration"),is=Symbol("intervalType");for(const[e,t]of rg)t[La]=tf.get(e),t[is]="time";for(const[e,t]of nf)t[La]=tf.get(e),t[is]="utc";const qi=[["year",Qt,"utc"],["month",Na,"utc"],["day",Zu,"utc",6*pr],["hour",$a,"utc",3*bn],["minute",Ta,"utc",6*Vn],["second",Yt,"utc",30*Wn]],Eo=[["year",Kt,"time"],["month",Da,"time"],["day",Er,"time",6*pr],["hour",ka,"time",3*bn],["minute",Ca,"time",6*Vn],["second",Yt,"time",30*Wn]],o9=[qi[0],Eo[0],qi[1],Eo[1],qi[2],Eo[2],...qi.slice(3)];function ig(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=nf.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function ag(e){return og(ig(e),"time")}function rf(e){return og(ig(e),"utc")}function og([e,t],n){let r=(n==="time"?rg:nf).get(e);return t>1&&(r=r.every(t),r[La]=tf.get(e)*t,r[is]=n),r}function sd(e,t){if(!(t>1))return;const n=e[La];if(!js.some(([,i])=>i===n)||n%bn===0&&bn<n&&n<pr)return;const[r]=js[Tu(([,i])=>Math.log(i)).center(js,Math.log(n*t))];return(e[is]==="time"?ag:rf)(r)}function ld(e,t,n){const r=t==="time"?Wc:Ba;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=u9(n);switch(e){case"millisecond":return Ir(r(".%L"),r(":%M:%S"),i);case"second":return Ir(r(":%S"),r("%-I:%M"),i);case"minute":return Ir(r("%-I:%M"),r("%p"),i);case"hour":return Ir(r("%-I %p"),r("%b %-d"),i);case"day":return Ir(r("%-d"),r("%b"),i);case"month":return Ir(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function u9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function s9(e){return e==="time"?Eo:e==="utc"?qi:o9}function l9(e,t,n){const r=It($3(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return ld("millisecond","utc",n);for(const[i,a,o,u]of s9(e)){if(r>u||i==="hour"&&!r)break;if(t.every(s=>a.floor(s)>=s))return ld(i,o,n)}}function Ir(e,t,n){return(r,i,a)=>{const o=e(r,i),u=t(r,i),s=i-ui(a);return i!==s&&a[s]!==void 0&&u===t(a[s],s)?o:n(o,u)}}const ca=Object.getPrototypeOf(Uint8Array),c9=Object.prototype.toString,ug=Symbol("reindex");function Ze(e,t,n){const r=typeof t;return r==="string"?cd(e,sg(t),n):r==="function"?cd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?ze(e,Ia(t),n):typeof(t==null?void 0:t.transform)=="function"?fd(t.transform(e),n):f9(fd(t,n),e==null?void 0:e[ug])}function f9(e,t){return t?sf(e,t):e}function cd(e,t,n){return ze(e,(n==null?void 0:n.prototype)instanceof ca?h9(t):t,n)}function fd(e,t){return t===void 0?Et(e):e instanceof t?e:t.prototype instanceof ca&&!(e instanceof ca)?t.from(e,of):t.from(e)}function h9(e){return(t,n)=>of(e(t,n))}const Co=[null],sg=e=>t=>t[e],as={transform:Rn},st={transform:e=>e},d9=()=>1,m9=()=>!0,ct=e=>e==null?e:`${e}`,Be=e=>e==null?e:+e,af=e=>e?e[0]:void 0,ec=e=>e?e[1]:void 0,Ia=e=>()=>e;function p9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Zr(n,t,r)}function cn(e){return e instanceof ca?e:ze(e,of,Float64Array)}function of(e){return e==null?NaN:Number(e)}function b9(e){return ze(e,lg)}function lg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?ng(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Ln(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:us(e)?[void 0,e]:[e,void 0]}function ft(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function cg(e,t,n){if(e!=null)return nn(e,t,n)}function nn(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function Et(e){return e==null||e instanceof Array||e instanceof ca?e:Array.from(e)}function ze(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function fa(e,t=Array){return e instanceof t?e.slice():t.from(e)}function g9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function fg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function y9(e){return g9(e)||fg(e)||e.interval!==void 0}function tr(e){return(e==null?void 0:e.toString)===c9}function tc(e){return tr(e)&&(e.type!==void 0||e.domain!==void 0)}function os(e){return tr(e)&&typeof e.transform!="function"}function oi(e){return os(e)&&e.value===void 0&&e.channel===void 0}function w9(e,t,n,r=st){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ra(e,t){return e===void 0&&t===void 0?[af,ec]:[e,t]}function uf({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Ln(t)),e===void 0&&([e]=Ln(n)),e}function Rn(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function sf(e,t){return ze(t,n=>e[n],e.constructor)}function v9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function hr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function yu(e){let t;return[{transform:()=>t,label:kr(e)},n=>t=n]}function An(e){return e==null?[e]:yu(e)}function kr(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function nc(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return vt(r)||vt(i)?ze(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):ze(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function hg(e,t){const n=dg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?ze(e,n):e}function dg(e,t){const n=lf(e,t);return n&&(r=>Kn(r)?n.floor(r):r)}function lf(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>yl(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>yl(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?ag:rf)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function gi(e,t){if(e=lf(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function M9(e,t){if(e=gi(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function x9(e){return zr(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function zr(e){return typeof(e==null?void 0:e.range)=="function"}function Oa(e){return e===void 0||os(e)?e:{value:e}}function P9(e){return e==null?null:{transform:t=>Ze(t,e,Float64Array),label:kr(e)}}function nr(e){return e&&typeof e[Symbol.iterator]=="function"}function mg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function hd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function vt(e){for(const t of e)if(t!=null)return t instanceof Date}function A9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&ng(t)}function S9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function E9(e){for(const t of e)if(t!=null)return typeof t=="number"}function Xs(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const C9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function us(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||C9.has(e))}function T9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function bt(e){return e==null||ha(e)}function ha(e){return/^\s*none\s*$/i.test(e)}function k9(e){return/^\s*round\s*$/i.test(e)}function rc(e,t){return cg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function ss(e="middle"){return rc(e,"frameAnchor")}function ui(e){if(e==null)return;const t=e[0],n=e[e.length-1];return _a(t,n)}function $9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function D9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function pg(e){return nr(e)?D9(e):e}const fn=Symbol("position"),On=Symbol("color"),qa=Symbol("radius"),Ga=Symbol("length"),za=Symbol("opacity"),ls=Symbol("symbol"),bg=Symbol("projection"),Re=new Map([["x",fn],["y",fn],["fx",fn],["fy",fn],["r",qa],["color",On],["opacity",za],["symbol",ls],["length",Ga],["projection",bg]]);function N9(e){return e===fn||e===bg}function B9(e){return e===fn||e===qa||e===Ga||e===za}const F9=Math.sqrt(3),L9=2/F9,I9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*L9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},cf=new Map([["asterisk",Tb],["circle",la],["cross",kb],["diamond",Db],["diamond2",Nb],["hexagon",I9],["plus",Bb],["square",Fb],["square2",Lb],["star",Rb],["times",zb],["triangle",Ob],["triangle2",qb],["wye",Gb]]);function ff(e){return e&&typeof e.draw=="function"}function R9(e){return ff(e)?!0:typeof e!="string"?!1:cf.has(e.toLowerCase())}function hf(e){if(e==null||ff(e))return e;const t=cf.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function O9(e){if(e==null||ff(e))return[void 0,e];if(typeof e=="string"){const t=cf.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function cs({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=gg(e)),t!=null&&!oi(t)&&(r=Zs(r,df(t))),n&&(r=Zs(r,yg))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||oi(t))&&{sort:t},transform:Zs(r,o)}}function si({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=gg(e)),t!=null&&!oi(t)&&(r=Ks(r,df(t))),n&&(r=Ks(r,yg))),{...i,...(t===null||oi(t))&&{sort:t},initializer:Ks(r,a)}}function Zs(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,Et(n),r,i)}}function Ks(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,u,s,l,c,f;return{data:u=n,facets:s=r,channels:o}=e.call(this,n,r,i,...a),{data:c=u,facets:f=s,channels:l}=t.call(this,u,s,{...i,...o},...a),{data:c,facets:f,channels:{...o,...l}}}}function q9(e,t){return(e.initializer!=null?si:cs)(e,t)}function gg(e){return(t,n)=>{const r=Ze(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function yg(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function G9(e,{sort:t,...n}={}){return{...(os(e)&&e.channel!==void 0?si:q9)(n,df(e)),sort:oi(t)?t:null}}function df(e){return(typeof e=="function"&&e.length!==1?z9:U9)(e)}function z9(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function U9(e){let t,n;({channel:t,value:e,order:n}={...Oa(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?gu:Jt),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Jt;break;case"descending":n=gu;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let u;if(t===void 0)u=Ze(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(u=o[t],!u)return{};u=u.value}const s=(l,c)=>n(u[l],u[c]);return{data:i,facets:a.map(l=>l.slice().sort(s))}}}function co(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function H9(e,t,n=wg){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",K9]),t.href!=null&&e.href===void 0&&r.push(["href",pf]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?W9(i):n(i,a,t))}function wg(e,t,n,r=vg){let i;tr(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,u]=yu(a.label);let s;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){a.initialize(l),s=u([])},scope(l,c){a.scope(l,c)},reduce(l,c){s.push(a.reduce(l,c))}}}function W9(e){return{name:e,initialize(){},scope(){},reduce(){}}}function vg(e,t,n,r=mf){const i=_9(e,n),a=r(t,i);let o,u;return{label:kr(a===wu?null:i,a.label),initialize(s){o=i===void 0?s:Ze(s,i),a.scope==="data"&&(u=a.reduceIndex(Rn(s),o))},scope(s,l){a.scope===s&&(u=a.reduceIndex(l,o))},reduce(s,l){return a.scope==null?a.reduceIndex(s,o,l):a.reduceIndex(s,o,u,l)}}}function dd(e,t){return t?Ji(Nu(e,n=>t[n]),af):[[,e]]}function mf(e,t,n=V9){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&tr(e))return X9(e);if(typeof e=="function")return Z9(e);if(/^p\d{2}$/i.test(e))return Sn(p9(e));switch(`${e}`.toLowerCase()){case"first":return pf;case"last":return Q9;case"identity":return _g;case"count":return wu;case"distinct":return J9;case"sum":return t==null?wu:e8;case"proportion":return pd(t,"data");case"proportion-facet":return pd(t,"facet");case"deviation":return Sn($u);case"min":return Sn(Dn);case"min-index":return Sn(S3);case"max":return Sn(It);case"max-index":return Sn(A3);case"mean":return md(Fu);case"median":return md(gl);case"variance":return Sn(Pc);case"mode":return Sn(k3)}return n(e)}function V9(e){throw new Error(`invalid reduce: ${e}`)}function Y9(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function j9(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>Jt(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function X9(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function Z9(e){return{reduceIndex(t,n,r){return e(sf(n,t),r)}}}function Sn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function md(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return vt(n)?new Date(r):r}}}const _g={reduceIndex(e,t){return sf(t,e)}},pf={reduceIndex(e,t){return t[e[0]]}},K9={reduceIndex(e,t){const r=Ji(Hr(e,a=>a.length,a=>t[a]),ec),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[` ${a.length.toLocaleString("en-US")} more`,jn(a,ec)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},Q9={reduceIndex(e,t){return t[e[e.length-1]]}},wu={label:"Frequency",reduceIndex(e){return e.length}},J9={label:"Distinct",reduceIndex(e,t){const n=new Du;for(const r of e)n.add(t[r]);return n.size}},e8=Sn(jn);function pd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>jn(n,a=>r[a])/i}}function da(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=kr(r)},u){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),Mg(u,{scale:t,type:n,value:Ze(e,r),label:o,filter:i,hint:a})}function t8(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,da(t,r,n)]))}function n8(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:ze(a,o)]}));return n.channels=e,n}function Mg(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Xs(r,us)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Xs(r,T9)?null:"opacity";break;case"symbol":n!==!0&&Xs(r,R9)?(t.scale=null,t.value=ze(r,hf)):t.scale="symbol";break;default:t.scale=Re.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Re.has(n))throw new Error(`unknown scale: ${n}`);return t}function r8(e,t,n,r,i){const{order:a,reverse:o,reduce:u=!0,limit:s}=i;for(const l in i){if(!Re.has(l))continue;let{value:c,order:f=a,reverse:h=o,reduce:d=u,limit:m=s}=Oa(i[l]);const p=c==null?void 0:c.startsWith("-");if(p&&(c=c.slice(1)),f=f===void 0?p!==(c==="width"||c==="height")?Pg:xg:o8(f),d==null||d===!1)continue;const g=l==="fx"||l==="fy"?a8(t,r[l]):i8(n,l);if(!g)throw new Error(`missing channel for scale: ${l}`);const y=g.value,[b=0,v=1/0]=nr(m)?m:m<0?[m]:[0,m];if(c==null)g.domain=()=>{let w=Array.from(new Du(y));return h&&(w=w.reverse()),(b!==0||v!==1/0)&&(w=w.slice(b,v)),w};else{const w=c==="data"?e:c==="height"?bd(n,"y1","y2"):c==="width"?bd(n,"x1","x2"):ic(n,c,c==="y"?"y2":c==="x"?"x2":void 0),_=mf(d===!0?"max":d,w);g.domain=()=>{let M=w3(Rn(y),x=>_.reduceIndex(x,w),x=>y[x]);return f&&M.sort(f),h&&M.reverse(),(b!==0||v!==1/0)&&(M=M.slice(b,v)),M.map(af)}}}}function i8(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function a8(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const u of e[a])i[u]=o}return t}function bd(e,t,n){const r=ic(e,t),i=ic(e,n);return ze(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function ic(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function o8(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return xg;case"descending":return Pg}throw new Error(`invalid order: ${e}`)}function xg([e,t],[n,r]){return Jt(t,r)||Jt(e,n)}function Pg([e,t],[n,r]){return gu(t,r)||Jt(e,n)}function gd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function u8(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const s8=u8(e=>new Intl.NumberFormat(e));function l8(e="en-US"){const t=s8(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function c8(e){return r9(e,"Invalid Date")}function f8(e="en-US"){const t=l8(e);return n=>(n instanceof Date?c8:typeof n=="number"?t:ct)(n)}const Ar=f8();let ac=0,oc;function h8(){const e=ac;return ac=0,oc=void 0,e}function Yn(e){e!==oc&&(oc=e,console.warn(e),++ac)}const gt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let d8=0;function yd(){return`plot-clip-${++d8}`}function m8(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:u,fillOpacity:s,stroke:l,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:g,opacity:y,mixBlendMode:b,imageFilter:v,paintOrder:w,pointerEvents:_,shapeRendering:M,channels:x},{ariaLabel:C,fill:E="currentColor",fillOpacity:$,stroke:A="none",strokeOpacity:L,strokeWidth:O,strokeLinecap:T,strokeLinejoin:S,strokeMiterlimit:I,paintOrder:ne}){E===null&&(u=null,s=null),A===null&&(l=null,f=null),bt(E)?!bt(A)&&(!bt(u)||x!=null&&x.fill)&&(A="none"):bt(A)&&(!bt(l)||x!=null&&x.stroke)&&(E="none");const[te,K]=Ln(u,E),[q,G]=ft(s,$),[z,U]=Ln(l,A),[oe,ue]=ft(f,L),[ie,V]=ft(y);ha(U)||(c===void 0&&(c=O),d===void 0&&(d=T),h===void 0&&(h=S),m===void 0&&!k9(h)&&(m=I),!ha(K)&&w===void 0&&(w=ne));const[Y,N]=ft(c);return E!==null&&(e.fill=nt(K,"currentColor"),e.fillOpacity=Ei(G,1)),A!==null&&(e.stroke=nt(U,"none"),e.strokeWidth=Ei(N,1),e.strokeOpacity=Ei(ue,1),e.strokeLinejoin=nt(h,"miter"),e.strokeLinecap=nt(d,"butt"),e.strokeMiterlimit=Ei(m,4),e.strokeDasharray=nt(p,"none"),e.strokeDashoffset=nt(g,"0")),e.target=ct(o),e.ariaLabel=ct(C),e.ariaDescription=ct(i),e.ariaHidden=ct(a),e.opacity=Ei(V,1),e.mixBlendMode=nt(b,"normal"),e.imageFilter=nt(v,"none"),e.paintOrder=nt(w,"normal"),e.pointerEvents=nt(_,"auto"),e.shapeRendering=nt(M,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:te,scale:"auto",optional:!0},fillOpacity:{value:q,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:oe,scale:"auto",optional:!0},strokeWidth:{value:Y,optional:!0},opacity:{value:ie,scale:"auto",optional:!0}}}function p8(e,t){t&&e.filter(n=>Jc(t[n])).append("title").call(g8,t)}function b8(e,t){t&&e.filter(([n])=>Jc(t[n])).append("title").call(y8,t)}function g8(e,t){t&&e.text(n=>Ar(t[n]))}function y8(e,t){t&&e.text(([n])=>Ar(t[n]))}function qn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&ce(e,"aria-label",h=>r[h]),a&&ce(e,"fill",h=>a[h]),o&&ce(e,"fill-opacity",h=>o[h]),u&&ce(e,"stroke",h=>u[h]),s&&ce(e,"stroke-opacity",h=>s[h]),l&&ce(e,"stroke-width",h=>l[h]),c&&ce(e,"opacity",h=>c[h]),f&&Cg(e,h=>f[h],t),n||p8(e,i)}function Ag(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&ce(e,"aria-label",([h])=>r[h]),a&&ce(e,"fill",([h])=>a[h]),o&&ce(e,"fill-opacity",([h])=>o[h]),u&&ce(e,"stroke",([h])=>u[h]),s&&ce(e,"stroke-opacity",([h])=>s[h]),l&&ce(e,"stroke-width",([h])=>l[h]),c&&ce(e,"opacity",([h])=>c[h]),f&&Cg(e,([h])=>f[h],t),n||b8(e,i)}function w8({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:o,opacity:u,href:s},{tip:l}){return[e,l?void 0:t,n,r,i,a,o,u,s].filter(c=>c!==void 0)}function v8(e,t,n){const r=Nu(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Yn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Sg(e,t,n,r){const{z:i}=n,{z:a}=r,o=w8(r,n),u=[...t,...o];for(const s of a?v8(e,a,i):[e]){let l,c;e:for(const f of s){for(const h of u)if(!Kn(h[f])){c&&c.push(-1);continue e}if(l===void 0){c&&(yield c),l=o.map(h=>hr(h[f])),c=[f];continue}c.push(f);for(let h=0;h<o.length;++h)if(hr(o[h][f])!==l[h]){yield c,l=o.map(m=>hr(m[f])),c=[f];continue e}}c&&(yield c)}}function Eg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=nn(e,"clip",["frame","sphere"])),e}function _8(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:u,marginLeft:s,marginRight:l,marginTop:c,marginBottom:f}=n,h=yd();i=`url(#${h})`,e=Ge("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",s).attr("y",c).attr("width",o-l-s).attr("height",u-c-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const u=yd();i=`url(#${u})`,e.append("clipPath").attr("id",u).append("path").attr("d",Uu(o)({type:"Sphere"}));break}}ce(e,"aria-label",t.ariaLabel),ce(e,"aria-description",t.ariaDescription),ce(e,"aria-hidden",t.ariaHidden),ce(e,"clip-path",i)}function qt(e,t,n,r){_8(e,t,n,r),ce(e,"fill",t.fill),ce(e,"fill-opacity",t.fillOpacity),ce(e,"stroke",t.stroke),ce(e,"stroke-width",t.strokeWidth),ce(e,"stroke-opacity",t.strokeOpacity),ce(e,"stroke-linejoin",t.strokeLinejoin),ce(e,"stroke-linecap",t.strokeLinecap),ce(e,"stroke-miterlimit",t.strokeMiterlimit),ce(e,"stroke-dasharray",t.strokeDasharray),ce(e,"stroke-dashoffset",t.strokeDashoffset),ce(e,"shape-rendering",t.shapeRendering),ce(e,"filter",t.imageFilter),ce(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;ce(e,"pointer-events",i)}function Gt(e,t){M8(e,"mix-blend-mode",t.mixBlendMode),ce(e,"opacity",t.opacity)}function Cg(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(Kr.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(Kr.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function ce(e,t,n){n!=null&&e.attr(t,n)}function M8(e,t,n){n!=null&&e.style(t,n)}function Ct(e,t,{x:n,y:r},i=gt,a=gt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function nt(e,t){if((e=ct(e))!==t)return e}function Ei(e,t){if((e=Be(e))!==t)return e}const x8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function bf(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!x8.test(e))throw new Error(`invalid class name: ${e}`);return e}function gf(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Ua({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function yf(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Eg(n)}}function Ge(e,{document:t}){return Wi(Iu(e).call(t.documentElement))}const Tg=Math.PI,Mn=2*Tg,wd=.618;function P8({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let u,s,l="frame";if(tr(e)){let _;if({type:e,domain:s,inset:_,insetTop:n=_!==void 0?_:n,insetRight:r=_!==void 0?_:r,insetBottom:i=_!==void 0?_:i,insetLeft:a=_!==void 0?_:a,clip:l=l,...u}=e,e==null)return}typeof e!="function"&&({type:e}=kg(e));const{width:c,height:f,marginLeft:h,marginRight:d,marginTop:m,marginBottom:p}=o,g=c-h-d-a-r,y=f-m-p-n-i;if(e=e==null?void 0:e({width:g,height:y,clip:l,...u}),e==null)return;l=A8(l,h,m,c-d,f-p);let b=h+a,v=m+n,w;if(s!=null){const[[_,M],[x,C]]=Uu(e).bounds(s),E=Math.min(g/(x-_),y/(C-M));E>0?(b-=(E*(_+x)-g)/2,v-=(E*(M+C)-y)/2,w=Wl({point($,A){this.stream.point($*E+b,A*E+v)}})):Yn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=b===0&&v===0?$g():Wl({point(_,M){this.stream.point(_+b,M+v)}})),{stream:_=>e.stream(w.stream(l(_)))}}function kg(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Wt(h4,.7463,.4673);case"albers":return fo(Cm,.7463,.4673);case"azimuthal-equal-area":return Wt(d4,4,4);case"azimuthal-equidistant":return Wt(m4,Mn,Mn);case"conic-conformal":return fo(g4,Mn,Mn);case"conic-equal-area":return fo(ou,6.1702,2.9781);case"conic-equidistant":return fo(v4,7.312,3.6282);case"equal-earth":return Wt(M4,5.4133,2.6347);case"equirectangular":return Wt(y4,Mn,Tg);case"gnomonic":return Wt(x4,3.4641,3.4641);case"identity":return{type:$g};case"reflect-y":return{type:S8};case"mercator":return Wt(p4,Mn,Mn);case"orthographic":return Wt(P4,2,2);case"stereographic":return Wt(A4,2,2);case"transverse-mercator":return Wt(S4,Mn,Mn);default:throw new Error(`unknown projection type: ${e}`)}}function A8(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return hm(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Wt(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:u})=>{var l,c,f;const s=e();return o!=null&&((l=s.precision)==null||l.call(s,o)),a!=null&&((c=s.rotate)==null||c.call(s,a)),typeof u=="number"&&((f=s.clipAngle)==null||f.call(s,u)),s.scale(Math.min(r/t,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/t}}function fo(e,t,n){const{type:r,aspectRatio:i}=Wt(e,t,n);return{type:a=>{const{parallels:o,domain:u,width:s,height:l}=a,c=r(a);return o!=null&&(c.parallels(o),u===void 0&&c.fitSize([s,l],{type:"Sphere"})),c},aspectRatio:i}}const $g=Ia({stream:e=>e}),S8=Ia(Wl({point(e,t){this.stream.point(e,-t)}}));function E8(e,t,n,r){const i=n[e],a=n[t],o=i.length,u=n[e]=new Float64Array(o).fill(NaN),s=n[t]=new Float64Array(o).fill(NaN);let l;const c=r.stream({point(f,h){u[l]=f,s[l]=h}});for(l=0;l<o;++l)c.point(i[l],a[l])}function C8({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(tr(e)&&(e=e.type),e!=null)}function T8(e){if(typeof(e==null?void 0:e.stream)=="function")return wd;if(tr(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=kg(e);if(t)return t}return wd}}function k8(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,u){t.push(o),n.push(u)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)sr(o,a);return[r,i]}const $8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Dg=new Map([["accent",X6],["category10",j6],["dark2",Z6],["observable10",$8],["paired",K6],["pastel1",Q6],["pastel2",J6],["set1",e7],["set2",t7],["set3",n7],["tableau10",r7]]);function D8(e){return e!=null&&Dg.has(`${e}`.toLowerCase())}const vd=new Map([...Dg,["brbg",xn(mp,pp)],["prgn",xn(bp,gp)],["piyg",xn(yp,wp)],["puor",xn(vp,_p)],["rdbu",xn(Zl,cu)],["rdgy",xn(Mp,xp)],["rdylbu",xn(Kl,fu)],["rdylgn",xn(Pp,Ap)],["spectral",xn(Sp,Ep)],["burd",_d(Zl,cu)],["buylrd",_d(Kl,fu)],["blues",Ve(Qp,Jp)],["greens",Ve(eb,tb)],["greys",Ve(nb,rb)],["oranges",Ve(sb,lb)],["purples",Ve(ib,ab)],["reds",Ve(ob,ub)],["turbo",Pn(bb)],["viridis",Pn(gb)],["magma",Pn(yb)],["inferno",Pn(wb)],["plasma",Pn(vb)],["cividis",Pn(cb)],["cubehelix",Pn(fb)],["warm",Pn(hb)],["cool",Pn(db)],["bugn",Ve(Cp,Tp)],["bupu",Ve(kp,$p)],["gnbu",Ve(Dp,Np)],["orrd",Ve(Bp,Fp)],["pubu",Ve(Rp,Op)],["pubugn",Ve(Lp,Ip)],["purd",Ve(qp,Gp)],["rdpu",Ve(zp,Up)],["ylgn",Ve(Vp,Yp)],["ylgnbu",Ve(Hp,Wp)],["ylorbr",Ve(jp,Xp)],["ylorrd",Ve(Zp,Kp)],["rainbow",Md(mb)],["sinebow",Md(pb)]]);function Ve(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Zt(t,n):e[n])}function xn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Zt(t,n):e[n])}function _d(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Zt(r=>t(1-r),n):e[n].slice().reverse())}function Pn(e){return({length:t})=>Zt(e,Math.max(2,Math.floor(t)))}function Md(e){return({length:t})=>Zt(e,Math.floor(t)+1).slice(0,-1)}function Ng(e){const t=`${e}`.toLowerCase();if(!vd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return vd.get(t)}function fs(e,t){const n=Ng(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function N8(e,t="greys"){const n=new Set,[r,i]=fs(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const xd=new Map([["brbg",pp],["prgn",gp],["piyg",wp],["puor",_p],["rdbu",cu],["rdgy",xp],["rdylbu",fu],["rdylgn",Ap],["spectral",Ep],["burd",e=>cu(1-e)],["buylrd",e=>fu(1-e)],["blues",Jp],["greens",tb],["greys",rb],["purples",ab],["reds",ub],["oranges",lb],["turbo",bb],["viridis",gb],["magma",yb],["inferno",wb],["plasma",vb],["cividis",cb],["cubehelix",fb],["warm",hb],["cool",db],["bugn",Tp],["bupu",$p],["gnbu",Np],["orrd",Fp],["pubugn",Ip],["pubu",Op],["purd",Gp],["rdpu",Up],["ylgnbu",Wp],["ylgn",Yp],["ylorbr",Xp],["ylorrd",Kp],["rainbow",mb],["sinebow",pb]]);function wf(e){const t=`${e}`.toLowerCase();if(!xd.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return xd.get(t)}const B8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function F8(e){return e!=null&&B8.has(`${e}`.toLowerCase())}const Bg=e=>t=>e(1-t),Qs=[0,1],Pd=new Map([["number",at],["rgb",vr],["hsl",t_],["hcl",i_],["lab",n_]]);function Fg(e){const t=`${e}`.toLowerCase();if(!Pd.has(t))throw new Error(`unknown interpolator: ${t}`);return Pd.get(t)}function Ha(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:u=Ig(e,n),unknown:s,round:l,scheme:c,interval:f,range:h=Re.get(e)===qa?V8(n,u):Re.get(e)===Ga?Y8(n,u):Re.get(e)===za?Qs:void 0,interpolate:d=Re.get(e)===On?c==null&&h!==void 0?vr:wf(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):l?Dc:at,reverse:m}){if(f=gi(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=Fg(d)),m=!!m,h!==void 0){const p=(u=Et(u)).length,g=(h=Et(h)).length;if(p!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=qu(d,h),h=void 0}}if(d.length===1?(m&&(d=Bg(d),m=!1),h===void 0&&(h=Float64Array.from(u,(p,g)=>g/(u.length-1)),h.length===2&&(h=Qs)),t.interpolate((h===Qs?Ia:_f)(d))):t.interpolate(d),o){const[p,g]=Dt(u);(p>0||g<0)&&(u=fa(u),ui(u)!==Math.sign(p)?u[u.length-1]=0:u[0]=0)}return m&&(u=Uo(u)),t.domain(u).unknown(s),i&&(t.nice(L8(i,r)),u=t.domain()),h!==void 0&&t.range(h),a&&t.clamp(a),{type:r,domain:u,range:h,scale:t,interpolate:d,interval:f}}function L8(e,t){return e===!0?void 0:typeof e=="number"?e:M9(e,t)}function I8(e,t,n){return Ha(e,Uc(),t,n)}function R8(e,t,n){return Lg(e,t,{...n,exponent:.5})}function Lg(e,t,{exponent:n=1,...r}){return Ha(e,Ym().exponent(n),t,{...r,type:"pow"})}function O8(e,t,{base:n=10,domain:r=j8(t),...i}){return Ha(e,Um().base(n),t,{...i,domain:r})}function q8(e,t,{constant:n=1,...r}){return Ha(e,Wm().constant(n),t,r)}function G8(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=X8(t),unknown:u,interpolate:s,reverse:l}){return n===void 0&&(n=s!==void 0?Zt(s,i):Re.get(e)===On?fs(a,i):void 0),o.length>0&&(o=jm(o,n===void 0?{length:i}:n).quantiles()),vf(e,t,{domain:o,range:n,reverse:l,unknown:u})}function z8(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=Ig(e,t),unknown:o,interpolate:u,reverse:s}){const[l,c]=Dt(a);let f;return n===void 0?(f=ea(l,c,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=u!==void 0?Zt(u,r):Re.get(e)===On?fs(i,r):void 0):(f=Zt(at(l,c),r+1).slice(1,-1),l instanceof Date&&(f=f.map(h=>new Date(h)))),ui(Et(a))<0&&f.reverse(),vf(e,t,{domain:f,range:n,reverse:s,unknown:o})}function vf(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Zt(a,n.length+1):Re.get(e)===On?fs(i,n.length+1):void 0,reverse:u}){n=Et(n);const s=ui(n);if(!isNaN(s)&&!U8(n,s))throw new Error(`the ${e} scale has a non-monotonic domain`);return u&&(o=Uo(o)),{type:"threshold",scale:Xm(s<0?Uo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function U8(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=_a(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function H8(e){return{type:"identity",scale:B9(Re.get(e))?qm():t=>t}}function ma(e,t=tg){return e.length?[Dn(e,({value:n})=>n===void 0?n:Dn(n,t)),It(e,({value:n})=>n===void 0?n:It(n,t))]:[0,1]}function Ig(e,t){const n=Re.get(e);return(n===qa||n===za||n===Ga?W8:ma)(t)}function W8(e){return[0,e.length?It(e,({value:t})=>t===void 0?t:It(t,tg)):1]}function V8(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Zr(e,.5,({value:o})=>o===void 0?NaN:Zr(o,.25,rs)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/It(i);return a<1?i.map(o=>o*a):i}function Y8(e,t){const n=gl(e,({value:a})=>a===void 0?NaN:gl(a,Math.abs)),r=t.map(a=>12*a/n),i=60/It(r);return i<1?r.map(a=>a*i):r}function j8(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return ma(e,rs);if(n<0)return ma(e,ef)}return[1,10]}function X8(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function _f(e){return(t,n)=>r=>e(t+r*(n-t))}function hs(e,t,n,r,{type:i,nice:a,clamp:o,domain:u=ma(r),unknown:s,pivot:l=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=Re.get(e)===On?c==null&&f!==void 0?vr:wf(c!==void 0?c:"rdbu"):at,reverse:m}){l=+l,u=Et(u);let[p,g]=u;if(u.length>2&&Yn(`Warning: the diverging ${e} scale domain contains extra elements.`),_a(p,g)<0&&([p,g]=[g,p],m=!m),p=Math.min(p,l),g=Math.max(g,l),typeof d!="function"&&(d=Fg(d)),f!==void 0&&(d=d.length===1?_f(d)(...f):qu(d,f)),m&&(d=Bg(d)),h){const y=n.apply(l),b=y-n.apply(p),v=n.apply(g)-y;b<v?p=n.invert(y-v):b>v&&(g=n.invert(y+b))}return t.domain([p,l,g]).unknown(s).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,g],pivot:l,interpolate:d,scale:t}}function Z8(e,t,n){return hs(e,cp(),eM,t,n)}function K8(e,t,n){return Rg(e,t,{...n,exponent:.5})}function Rg(e,t,{exponent:n=1,...r}){return hs(e,dp().exponent(n=+n),rM(n),t,{...r,type:"diverging-pow"})}function Q8(e,t,{base:n=10,pivot:r=1,domain:i=ma(t,r<0?ef:rs),...a}){return hs(e,fp().base(n=+n),tM,t,{domain:i,pivot:r,...a})}function J8(e,t,{constant:n=1,...r}){return hs(e,hp().constant(n=+n),iM(n),t,r)}const eM={apply(e){return e},invert(e){return e}},tM={apply:Math.log,invert:Math.exp},nM={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function rM(e){return e===.5?nM:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function iM(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Og(e,t,n,r){return Ha(e,t,n,r)}function aM(e,t,n){return Og(e,V6(),t,n)}function oM(e,t,n){return Og(e,Y6(),t,n)}const Wa=Symbol("ordinal");function qg(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:u,hint:s}){return i=gi(i,r),a===void 0&&(a=zg(n,i,e)),(r==="categorical"||r===Wa)&&(r="ordinal"),u&&(a=Uo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:s,interval:i}}function uM(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:u,...s}){r=gi(r,n),i===void 0&&(i=zg(t,r,e));let l;if(Re.get(e)===ls)l=cM(t),a=a===void 0?fM(l):ze(a,hf);else if(Re.get(e)===On&&(a===void 0&&(n==="ordinal"||n===Wa)&&(a=N8(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const c=wf(o),f=a[0],h=a[1]-a[0];a=({length:d})=>Zt(m=>c(f+h*m),d)}else a=Ng(o);if(u===Yl)throw new Error(`implicit unknown on ${e} scale is not supported`);return qg(e,zc().unknown(u),t,{...s,type:n,domain:i,range:a,hint:l})}function sM(e,t,{align:n=.5,padding:r=.5,...i}){return Gg(E4().align(n).padding(r),t,i,e)}function lM(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return Gg(Yu().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function Gg(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=qg(r,e,t,n),e.round=i,e}function zg(e,t,n){const r=new Du;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Dt(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Re.get(n)===fn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Ji(r,Jt)}function Ad(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function cM(e){return{fill:Ad(e,"fill"),stroke:Ad(e,"stroke")}}function fM(e){return bt(e.fill)?g7:b7}function uc(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:u,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,facet:{label:m=t}={},...p}={}){const g={};for(const[y,b]of e){const v=p[y],w=bM(y,b,{round:Re.get(y)===fn?u:void 0,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,...v});if(w){let{label:_=y==="fx"||y==="fy"?m:t,percent:M,transform:x,inset:C,insetTop:E=C!==void 0?C:y==="y"?r:0,insetRight:$=C!==void 0?C:y==="x"?i:0,insetBottom:A=C!==void 0?C:y==="y"?a:0,insetLeft:L=C!==void 0?C:y==="x"?o:0}=v||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");w.percent=!!M,w.label=_===void 0?dM(b,w):_,w.transform=x,y==="x"||y==="fx"?(w.insetLeft=+L,w.insetRight=+$):(y==="y"||y==="fy")&&(w.insetTop=+E,w.insetBottom=+A),g[y]=w}}return g}function Sd(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:u,label:s}=i;t[r]=_M(i),n[r]=a,a.type=o,u!=null&&(a.interval=u),s!=null&&(a.label=s)}return n}function hM(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?Mf(t):t;i&&Ed(i,o),a&&Cd(a,o);const u=i||a?Ug(e,t):t;n&&Ed(n,u),r&&Cd(r,u)}function dM(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!$r(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function mM(e){return Math.sign(ui(e.domain()))*Math.sign(ui(e.range()))}function Mf(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:u,marginRight:s,marginBottom:l,marginLeft:c}}=e;return{marginTop:Math.max(t,u),marginRight:Math.max(n,s),marginBottom:Math.max(r,l),marginLeft:Math.max(i,c),width:a,height:o}}function Ug({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=Mf(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:u,height:t?t.scale.bandwidth()+r+a:s,facet:{width:u,height:s}}}function Ed(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,u=a+n,s=i-o-r;e.range=[u,Math.max(u,s)],$r(e)||(e.range=Wg(e)),e.scale.range(e.range)}Hg(e)}function Cd(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,u=a+n,s=i-o-r;e.range=[Math.max(u,s),u],$r(e)?e.range.reverse():e.range=Wg(e),e.scale.range(e.range)}Hg(e)}function Hg(e){e.round===void 0&&yM(e)&&pM(e)<=30&&e.scale.round(!0)}function pM({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,u=Math.abs(r-n)/Math.max(1,o+a*2);return(u-Math.floor(u))*o}function Wg(e){const t=e.scale.domain().length+Vg(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function bM(e,t=[],n={}){const r=gM(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&$r({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(vt)?Yn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Rr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Rr(r)}".`):i.some(A9)?Yn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Rr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Rr(r)}".`):i.some(S9)&&Yn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Rr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Rr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=ho(t,n,cn);break;case"identity":switch(Re.get(e)){case fn:n=ho(t,n,cn);break;case ls:n=ho(t,n,wM);break}break;case"utc":case"time":n=ho(t,n,b9);break}switch(r){case"diverging":return Z8(e,t,n);case"diverging-sqrt":return K8(e,t,n);case"diverging-pow":return Rg(e,t,n);case"diverging-log":return Q8(e,t,n);case"diverging-symlog":return J8(e,t,n);case"categorical":case"ordinal":case Wa:return uM(e,t,n);case"cyclical":case"sequential":case"linear":return I8(e,t,n);case"sqrt":return R8(e,t,n);case"threshold":return vf(e,t,n);case"quantile":return G8(e,t,n);case"quantize":return z8(e,t,n);case"pow":return Lg(e,t,n);case"log":return O8(e,t,n);case"symlog":return q8(e,t,n);case"utc":return oM(e,t,n);case"time":return aM(e,t,n);case"point":return sM(e,t,n);case"band":return lM(e,t,n);case"identity":return H8(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Rr(e){return typeof e=="symbol"?e.description:e}function Td(e){return typeof e=="string"?`${e}`.toLowerCase():e}const kd={toString:()=>"projection"};function gM(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:u}){if(n=Td(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&u!=null&&(n=kd);for(const l of t){const c=Td(l.type);if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}}if(n===kd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const s=Re.get(e);if(s===qa)return"sqrt";if(s===za||s===Ga)return"linear";if(s===ls)return"ordinal";if((r||i||[]).length>2)return Js(s);if(r!==void 0){if(hd(r))return Js(s);if(vt(r))return"utc"}else{const l=t.map(({value:c})=>c).filter(c=>c!==void 0);if(l.some(hd))return Js(s);if(l.some(vt))return"utc"}if(s===On){if(o!=null||F8(a))return"diverging";if(D8(a))return"categorical"}return"linear"}function Js(e){switch(e){case fn:return"point";case On:return Wa;default:return"ordinal"}}function $r({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Wa}function Vg({type:e}){return e==="threshold"}function yM({type:e}){return e==="point"||e==="band"}function li(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function ho(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function wM(e){return ze(e,hf)}function vM(e){return t=>{if(!Re.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function _M({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:u,pivot:s}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const l=e.unknown?e.unknown():void 0;return{type:t,domain:fa(n),...r!==void 0&&{range:fa(r)},...o!==void 0&&{transform:o},...u&&{percent:u},...l!==void 0&&{unknown:l},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function MM(e,t,n={}){let r=.5-gt,i=.5+gt,a=.5+gt,o=.5-gt;for(const{marginTop:p,marginRight:g,marginBottom:y,marginLeft:b}of t)p>r&&(r=p),g>i&&(i=g),y>a&&(a=y),b>o&&(o=b);let{margin:u,marginTop:s=u!==void 0?u:r,marginRight:l=u!==void 0?u:i,marginBottom:c=u!==void 0?u:a,marginLeft:f=u!==void 0?u:o}=n;s=+s,l=+l,c=+c,f=+f;let{width:h=640,height:d=xM(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,s-r+c-a)}=n;h=+h,d=+d;const m={width:h,height:d,marginTop:s,marginRight:l,marginBottom:c,marginLeft:f};if(e.fx||e.fy){let{margin:p,marginTop:g=p!==void 0?p:s,marginRight:y=p!==void 0?p:l,marginBottom:b=p!==void 0?p:c,marginLeft:v=p!==void 0?p:f}=n.facet??{};g=+g,y=+y,b=+b,v=+v,m.facet={marginTop:g,marginRight:y,marginBottom:b,marginLeft:v}}return m}function xM({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:u,marginRightDefault:s,marginBottomDefault:l,marginLeftDefault:c}){const f=n?n.scale.domain().length:1,h=T8(i);if(h){const m=r?r.scale.domain().length:1,p=(1.1*f-.1)/(1.1*m-.1)*h,g=Math.max(.1,Math.min(10,p));return Math.round((o-c-s)*g+u+l)}const d=t?$r(t)?t.scale.domain().length:Math.max(7,17/f):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=$d("y",t)/($d("x",e)*a),p=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,y=p*(o-c-s)-e.insetLeft-e.insetRight;return(m*y+t.insetTop+t.insetBottom)/g+u+l}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function $d(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const u=t.scale.exponent();i=s=>Math.pow(s,u);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Dt(r);return Math.abs(i(o)-i(a))}function PM(e,t){const{fx:n,fy:r}=uc(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?g3(i,a).map(([o,u],s)=>({x:o,y:u,i:s})):i?i.map((o,u)=>({x:o,i:u})):a?a.map((o,u)=>({y:o,i:u})):void 0}function AM(e,{x:t,y:n}){return t&&(t=sc(t)),n&&(n=sc(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function xf(e,{fx:t,fy:n}){const r=Rn(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Hr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Hr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Hr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function SM(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function EM(e){const t=[],n=new Uint32Array(jn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const CM=new Map([["top",el],["right",rl],["bottom",tl],["left",nl],["top-left",mo(el,nl)],["top-right",mo(el,rl)],["bottom-left",mo(tl,nl)],["bottom-right",mo(tl,rl)],["top-empty",$M],["right-empty",BM],["bottom-empty",DM],["left-empty",NM],["empty",FM]]);function TM(e){if(e==null)return null;const t=CM.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Dd=new WeakMap;function sc(e){let t=Dd.get(e);return t||Dd.set(e,t=new gr(ze(e,(n,r)=>[n,r]))),t}function rr(e,t){return sc(e).get(t)}function kM(e,t,n){return t=hr(t),n=hr(n),e.find(r=>Object.is(hr(r.x),t)&&Object.is(hr(r.y),n))}function ds(e,t,n){var r;return(r=kM(e,t,n))==null?void 0:r.empty}function el(e,{y:t},{y:n}){return t?rr(t,n)===0:!0}function tl(e,{y:t},{y:n}){return t?rr(t,n)===t.length-1:!0}function nl(e,{x:t},{x:n}){return t?rr(t,n)===0:!0}function rl(e,{x:t},{x:n}){return t?rr(t,n)===t.length-1:!0}function $M(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=rr(t,r);if(a>0)return ds(e,n,t[a-1])}function DM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=rr(t,r);if(a<t.length-1)return ds(e,n,t[a+1])}function NM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=rr(t,n);if(a>0)return ds(e,t[a-1],r)}function BM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=rr(t,n);if(a<t.length-1)return ds(e,t[a+1],r)}function FM(e,t,{empty:n}){return n}function mo(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function il(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class ht{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:u,fy:s,sort:l,dx:c=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:m=h,marginBottom:p=h,marginLeft:g=h,clip:y=i==null?void 0:i.clip,channels:b,tip:v,render:w}=r;if(this.data=t,this.sort=oi(l)?l:null,this.initializer=si(r).initializer,this.transform=this.initializer?r.transform:cs(r).transform,a===null||a===!1?this.facet=null:(this.facet=nn(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Co&&typeof u=="string"?[u]:u,this.fy=t===Co&&typeof s=="string"?[s]:s),this.facetAnchor=TM(o),n=pg(n),b!==void 0&&(n={...LM(b),...n}),i!==void 0&&(n={...m8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,M])=>{if(os(M.value)){const{value:x,label:C=M.label,scale:E=M.scale}=M.value;M={...M,label:C,scale:E,value:x}}if(t===Co&&typeof M.value=="string"){const{value:x}=M;M={...M,value:[x]}}return[_,M]}).filter(([_,{value:M,optional:x}])=>{if(M!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+c,this.dy=+f,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+g,this.clip=Eg(y),this.tip=IM(v),this.facet==="super"){if(u||s)throw new Error("super-faceting cannot use fx or fy");for(const _ in this.channels){const{scale:M}=n[_];if(!(M!=="x"&&M!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=jg(w,this.render))}initialize(t,n,r){let i=Et(this.data);t===void 0&&i!=null&&(t=[Rn(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=Et(i)),t!==void 0&&(t.original=a);const o=t8(this.channels,i);return this.sort!=null&&r8(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=Kn}=n[i];if(a!==null){const o=r[i];t=t.filter(u=>a(o[u]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&E8(i,a,n,r.projection)}}scale(t,n,r){const i=n8(t,n);return r.projection&&this.project(t,i,r),i}}function Yg(...e){return e.plot=ht.prototype.plot,e}function jg(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,u){return e.call(this,n,r,i,a,o,(s,l,c,f,h)=>t.call(this,s,l,c,f,h,u))}}function LM(e){return Object.fromEntries(Object.entries(pg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Oa(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function IM(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?nn(e,"tip",["x","y","xy"]):e}function ms(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:tr(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Nd=new WeakMap;function Pf(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:u,render:s,...l}={}){return o=+o,i!=null&&(n??(n=null),u={...u,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),u={...u,py:{value:a,scale:"y"}}),{x:n,y:r,channels:u,...l,render:jg(function(c,f,h,d,m,p){m={...m,pointerSticky:!1};const g=m.ownerSVGElement,{data:y}=m.getMarkState(this);let b=Nd.get(g);b||Nd.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(U)-1;const{x:w,y:_,fx:M,fy:x}=f;let C=M?M(c.fx)-d.marginLeft:0,E=x?x(c.fy)-d.marginTop:0;w!=null&&w.bandwidth&&(C+=w.bandwidth()/2),_!=null&&_.bandwidth&&(E+=_.bandwidth()/2);const $=c.fi!=null;let A;if($){let V=b.facetStates;V||(b.facetStates=V=new Map),A=V.get(this),A||V.set(this,A=new Map)}const[L,O]=Ua(this,d),{px:T,py:S}=h,I=T?V=>T[V]:Zg(h,L),ne=S?V=>S[V]:Kg(h,O);let te,K,q,G;function z(V,Y){if($)if(G&&(G=cancelAnimationFrame(G)),V==null)A.delete(c.fi);else{A.set(c.fi,Y),G=requestAnimationFrame(()=>{G=null;for(const[N,H]of A)if(H<Y||H===Y&&N<c.fi){V=null;break}U(V)});return}U(V)}function U(V){if(te===V&&q===b.sticky)return;te=V,q=m.pointerSticky=b.sticky;const Y=te==null?[]:[te];$&&(Y.fx=c.fx,Y.fy=c.fy,Y.fi=c.fi);const N=p(Y,f,h,d,m);if(K){if($){const H=K.parentNode,j=K.getAttribute("transform"),D=N.getAttribute("transform");j?N.setAttribute("transform",j):N.removeAttribute("transform"),D?H.setAttribute("transform",D):H.removeAttribute("transform"),N.removeAttribute("aria-label"),N.removeAttribute("aria-description"),N.removeAttribute("aria-hidden")}K.replaceWith(N)}return b.roots[v]=K=N,te==null&&(A==null?void 0:A.size)>1||m.dispatchValue(te==null?null:y[te]),N}function oe(V){if(b.sticky||V.pointerType==="mouse"&&V.buttons===1)return;let[Y,N]=xv(V);Y-=C,N-=E;const H=Y<d.marginLeft||Y>d.width-d.marginRight?1:e,j=N<d.marginTop||N>d.height-d.marginBottom?1:t;let D=null,ge=o*o;for(const ee of c){const he=H*(I(ee)-Y),Me=j*(ne(ee)-N),Oe=he*he+Me*Me;Oe<=ge&&(D=ee,ge=Oe)}if(D!=null&&(e!==1||t!==1)){const ee=I(D)-Y,he=ne(D)-N;ge=ee*ee+he*he}z(D,ge)}function ue(V){V.pointerType==="mouse"&&te!=null&&(b.sticky&&b.roots.some(Y=>Y==null?void 0:Y.contains(V.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(Y=>Y(null))):(b.sticky=!0,U(te)),V.stopImmediatePropagation()))}function ie(V){V.pointerType==="mouse"&&(b.sticky||z(null))}return g.addEventListener("pointerenter",oe),g.addEventListener("pointermove",oe),g.addEventListener("pointerdown",ue),g.addEventListener("pointerleave",ie),U(null)},s)}}function Xg(e){return Pf(1,1,e)}function RM(e){return Pf(1,.01,e)}function Bd(e){return Pf(.01,1,e)}function Zg({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Kg({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Qg(e){return $r(e)&&e.interval===void 0?void 0:"tabular-nums"}function OM(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:u=0,marginBottom:s=16+r,marginLeft:l=0,style:c,ticks:f=(i-l-u)/64,tickFormat:h,fontVariant:d=Qg(e),round:m=!0,opacity:p,className:g}=t;const y=yf(t);g=bf(g),p=ft(p)[1],h===null&&(h=()=>null);const b=Ge("svg",y).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(L=>L.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(gf,c);let v=L=>L.selectAll(".tick line").attr("y1",o+s-a),w;const _=m?(L,O)=>L.rangeRound(O):(L,O)=>L.range(O),{type:M,domain:x,range:C,interpolate:E,scale:$,pivot:A}=e;if(E){const L=C===void 0?E:qu(E.length===1?_f(E):E,C);w=_($.copy(),Zt(at(l,i-u),Math.min(x.length+(A!==void 0),C===void 0?1/0:C.length)));const O=256,T=y.document.createElement("canvas");T.width=O,T.height=1;const S=T.getContext("2d");for(let I=0,ne=O-1;I<O;++I)S.fillStyle=L(I/ne),S.fillRect(I,0,1,1);b.append("image").attr("opacity",p).attr("x",l).attr("y",o).attr("width",i-l-u).attr("height",a-o-s).attr("preserveAspectRatio","none").attr("xlink:href",T.toDataURL())}else if(M==="threshold"){const L=x,O=h===void 0?T=>T:typeof h=="string"?pi(h):h;w=_(Uc().domain([-1,C.length-1]),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(C).enter().append("rect").attr("x",(T,S)=>w(S-1)).attr("y",o).attr("width",(T,S)=>w(S)-w(S-1)).attr("height",a-o-s).attr("fill",T=>T),f=ze(L,(T,S)=>S),h=T=>O(L[T],T)}else w=_(Yu().domain(x),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(x).enter().append("rect").attr("x",w).attr("y",o).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",a-o-s).attr("fill",$),v=()=>{};return b.append("g").attr("transform",`translate(0,${a-s})`).call(q3(w).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",nt(d,"normal")).call(v).call(L=>L.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const Jg=Math.PI/180;function Va(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=al(n),e.markerMid=al(r),e.markerEnd=al(i)}function al(e){if(e==null||e===!1)return null;if(e===!0)return Ld;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Fd("auto");case"arrow-reverse":return Fd("auto-start-reverse");case"dot":return qM;case"circle":case"circle-fill":return Ld;case"circle-stroke":return GM;case"tick":return ol("auto");case"tick-x":return ol(90);case"tick-y":return ol(0)}throw new Error(`invalid marker: ${e}`)}function Fd(e){return(t,n)=>Ge("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function qM(e,t){return Ge("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Ld(e,t){return Ge("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function GM(e,t){return Ge("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function ol(e){return(t,n)=>Ge("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let zM=0;function ps(e,t,{stroke:n},r){return e2(e,t,n&&(i=>n[i]),r)}function UM(e,t,{stroke:n},r){return e2(e,t,n&&(([i])=>n[i]),r)}function e2(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const u=new Map;function s(l){return function(c){const f=a(c);let h=u.get(l);h||u.set(l,h=new Map);let d=h.get(f);if(!d){const m=this.parentNode.insertBefore(l(f,o),this),p=`plot-marker-${++zM}`;m.setAttribute("id",p),h.set(f,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",s(t)),n&&e.attr("marker-mid",s(n)),r&&e.attr("marker-end",s(r))}function Af({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=n2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function t2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=n2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function n2(e,t,n){return e===void 0&&t===void 0&&n===void 0?gt?[1,0]:[.5,.5]:[t,n]}function r2(e,{interval:t}){return e={...Oa(e)},e.interval=lf(e.interval===void 0?t:e.interval),e}function i2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:u,interval:s}=r2(i,n);if(u==null||s==null&&!r)return n;const l=kr(i);if(s==null){let d;const m={transform:p=>d||(d=Ze(p,u)),label:l};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let c,f;function h(d){return f!==void 0&&d===c?f:f=ze(Ze(c=d,u),m=>s.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:h,label:l}:a,[`${e}2`]:o===void 0?{transform:d=>h(d).map(m=>s.offset(m)),label:l}:o})}function a2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=r2(r,n);return i==null||a==null?n:t({...n,[e]:{label:kr(r),transform:o=>{const u=ze(Ze(o,i),l=>a.floor(l)),s=u.map(l=>a.offset(l));return u.map(vt(u)?(l,c)=>l==null||isNaN(l=+l)||(c=s[c],c==null)||isNaN(c=+c)?void 0:new Date((l+c)/2):(l,c)=>l==null||(c=s[c],c==null)?NaN:(+l+ +c)/2)}}})}function HM(e={}){return i2("x",Af,e)}function o2(e={}){return i2("y",t2,e)}function WM(e={}){return a2("x",Af,e)}function VM(e={}){return a2("y",t2,e)}const u2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class YM extends ht{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:u=o,insetBottom:s=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},ms(n,"x"),u2),this.insetTop=Be(u),this.insetBottom=Be(s),Va(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y1:l,y2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetTop:y,insetBottom:b}=this;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,{x:s&&o},gt,0).call(v=>v.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",s?w=>s[w]:(p+f-m)/2).attr("x2",s?w=>s[w]:(p+f-m)/2).attr("y1",l&&!li(u)?w=>l[w]+y:d+y).attr("y2",c&&!li(u)?u.bandwidth?w=>c[w]+u.bandwidth()-b:w=>c[w]-b:h-g-b).call(qn,this,r).call(ps,this,r,a)).node()}}class jM extends ht{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:u=o,insetLeft:s=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},ms(n,"y"),u2),this.insetRight=Be(u),this.insetLeft=Be(s),Va(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{y:s,x1:l,x2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetLeft:y,insetRight:b}=this;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,{y:s&&u},0,gt).call(v=>v.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",l&&!li(o)?w=>l[w]+y:p+y).attr("x2",c&&!li(o)?o.bandwidth?w=>c[w]+o.bandwidth()-b:w=>c[w]-b:f-m-b).attr("y1",s?w=>s[w]:(d+h-g)/2).attr("y2",s?w=>s[w]:(d+h-g)/2).call(qn,this,r).call(ps,this,r,a)).node()}}function Sf(e,t){let{x:n=st,y:r,y1:i,y2:a,...o}=o2(t);return[i,a]=s2(r,i,a),new YM(e,{...o,x:n,y1:i,y2:a})}function vu(e,t){let{y:n=st,x:r,x1:i,x2:a,...o}=HM(t);return[i,a]=s2(r,i,a),new jM(e,{...o,y:n,x1:i,x2:a})}function s2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Ef(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const XM={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},l2="";class Cf extends ht{constructor(t,n={}){const{x:r,y:i,text:a=nr(t)&&mg(t)?st:as,frameAnchor:o,textAnchor:u=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:s=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:g,fontWeight:y,rotate:b}=n,[v,w]=ft(b,0),[_,M]=tx(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:_,optional:!0},rotate:{value:P9(v),optional:!0},text:{value:a,filter:Jc,optional:!0}},n,XM),this.rotate=w,this.textAnchor=nt(u,"middle"),this.lineAnchor=nn(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=c2(f),this.monospace=!!h,this.fontFamily=ct(d),this.fontSize=M,this.fontStyle=ct(p),this.fontVariant=ct(g),this.fontWeight=ct(y),this.frameAnchor=ss(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=h2(this),this.clipLine=d2(this)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,rotate:c,text:f,title:h,fontSize:d}=r,{rotate:m}=this,[p,g]=Ua(this,i);return Ge("svg:g",a).call(qt,this,i,a).call(f2,this,f,i).call(Ct,this,{x:s&&o,y:l&&u}).call(y=>y.selectAll().data(t).enter().append("text").call(Gt,this).call(ZM,this,f,h).attr("transform",Ef`translate(${s?b=>s[b]:p},${l?b=>l[b]:g})${c?b=>` rotate(${c[b]})`:m?` rotate(${m})`:""}`).call(ce,"font-size",d&&(b=>d[b])).call(qn,this,r)).node()}}function c2(e){return e==null?null:nn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function ZM(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:u,clipLine:s}=t;e.each(function(l){const c=u(Ar(n[l])??"").map(s),f=c.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let m=0;m<f;++m){if(++d,!c[m])continue;const p=this.ownerDocument.createElementNS(Kr.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(h+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=c[m],this.appendChild(p),d=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=c[0];if(o&&!r&&c[0]!==n[l]){const d=this.ownerDocument.createElementNS(Kr.svg,"title");d.textContent=n[l],this.appendChild(d)}})}function bs(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ra(t,n)),new Cf(e,{...r,x:t,y:n})}function KM(e,{x:t=st,...n}={}){return new Cf(e,VM({...n,x:t}))}function QM(e,{y:t=st,...n}={}){return new Cf(e,WM({...n,y:t}))}function f2(e,t,n){ce(e,"text-anchor",t.textAnchor),ce(e,"font-family",t.fontFamily),ce(e,"font-size",t.fontSize),ce(e,"font-style",t.fontStyle),ce(e,"font-variant",t.fontVariant===void 0?JM(n):t.fontVariant),ce(e,"font-weight",t.fontWeight)}function JM(e){return e&&(E9(e)||vt(e))?"tabular-nums":void 0}const ex=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function tx(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),ex.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function nx(e,t,n){const r=[];let i,a=0;for(const[o,u,s]of rx(e)){if(i===void 0&&(i=o),a>i&&n(e,i,u)>t&&(r.push(e.slice(i,a)+(e[a-1]===l2?"-":"")),i=o),s){r.push(e.slice(i,u)),i=void 0;continue}a=u}return r}function*rx(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case l2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Id={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Tf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=yi(e,i))r+=Id[e[i]]??(p2(e,i)?120:Id.e);return r}function kf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=yi(e,i))r+=p2(e,i)?126:63;return r}function h2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?kf:Tf,i=t*100;return a=>nx(a,i,r)}function d2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?kf:Tf,i=t*100;switch(n){case"clip-start":return a=>Od(a,i,r,"");case"clip-end":return a=>Rd(a,i,r,"");case"ellipsis-start":return a=>Od(a,i,r,Yr);case"ellipsis-middle":return a=>ix(a,i,r,Yr);case"ellipsis-end":return a=>Rd(a,i,r,Yr)}}const Yr="";function ci(e,t,n,r){const i=[];let a=0;for(let o=0,u=0,s=e.length;o<s;o=u){u=yi(e,o);const l=n(e,o,u);if(a+l>t){for(a+=r;a>t&&o>0;)u=o,o=i.pop(),a-=n(e,o,u);return[o,t-a]}a+=l,i.push(o)}return[-1,0]}function Rd(e,t,n,r){e=e.trim();const i=n(r),[a]=ci(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function ix(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,u]=ci(e,t/2,n,a),[s]=ci(e,i-t/2-u+a,n,-a);return s<0?r:e.slice(0,o).trimEnd()+r+e.slice(yi(e,s)).trimStart()}function Od(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=ci(e,i-t+a,n,-a);return o<0?r:r+e.slice(yi(e,o)).trimStart()}const lc=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,qd=new RegExp("\\p{Extended_Pictographic}","uy");function yi(e,t){return t+=ax(e,t)?2:1,ux(e,t)&&(t=lc.lastIndex),ox(e,t)?yi(e,t+1):t}function m2(e,t){return e.charCodeAt(t)<128}function ax(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function ox(e,t){return e.charCodeAt(t)===8205}function ux(e,t){return m2(e,t)?!1:(lc.lastIndex=t,lc.test(e))}function p2(e,t){return m2(e,t)?!1:(qd.lastIndex=t,qd.test(e))}const sx={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},b2=3.5,lx=b2*5,g2={draw(e,t,n){const r=t*n/lx;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},cx={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},fx=new Map([["arrow",g2],["spike",cx]]);function hx(e){return e&&typeof e.draw=="function"}function dx(e){if(hx(e))return e;const t=fx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class y2 extends ht{constructor(t,n={}){const{x:r,y:i,r:a=b2,length:o,rotate:u,shape:s=g2,anchor:l="middle",frameAnchor:c}=n,[f,h]=ft(o,12),[d,m]=ft(u,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,sx),this.r=+a,this.length=h,this.rotate=m,this.shape=dx(s),this.anchor=nn(l,"anchor",["start","middle","end"]),this.frameAnchor=ss(c)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,length:c,rotate:f}=r,{length:h,rotate:d,anchor:m,shape:p,r:g}=this,[y,b]=Ua(this,i);return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,{x:s&&o,y:l&&u}).call(v=>v.selectAll().data(t).enter().append("path").call(Gt,this).attr("transform",Ef`translate(${s?w=>s[w]:y},${l?w=>l[w]:b})${f?w=>` rotate(${f[w]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?c?w=>` translate(0,${c[w]})`:` translate(0,${h})`:c?w=>` translate(0,${c[w]/2})`:` translate(0,${h/2})`}`).attr("d",c?w=>{const _=Hn();return p.draw(_,c[w],g),_}:(()=>{const w=Hn();return p.draw(w,h,g),w})()).call(qn,this,r)).node()}}function mx(e,t={}){const{x:n=st,...r}=t;return new y2(e,{...r,x:n})}function px(e,t={}){const{y:n=st,...r}=t;return new y2(e,{...r,y:n})}function ir(e,t){return arguments.length<2&&!nr(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function gs({anchor:e}={},t){return e===void 0?t[0]:nn(e,"anchor",t)}function w2(e){return gs(e,["left","right"])}function v2(e){return gs(e,["right","left"])}function _2(e){return gs(e,["bottom","top"])}function M2(e){return gs(e,["top","bottom"])}function x2(){const[e,t]=ir(...arguments);return A2("y",w2(t),e,t)}function bx(){const[e,t]=ir(...arguments);return A2("fy",v2(t),e,t)}function P2(){const[e,t]=ir(...arguments);return S2("x",_2(t),e,t)}function gx(){const[e,t]=ir(...arguments);return S2("fx",M2(t),e,t)}function A2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:g,x:y,margin:b,marginTop:v=b===void 0?20:b,marginRight:w=b===void 0?t==="right"?40:0:b,marginBottom:_=b===void 0?20:b,marginLeft:M=b===void 0?t==="left"?40:0:b,label:x,labelAnchor:C,labelArrow:E,labelOffset:$,...A}){return m=Be(m),p=Be(p),g=Be(g),C!==void 0&&(C=nn(C,"labelAnchor",["center","top","bottom"])),E=B2(E),Yg(m&&!bt(a)?yx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,x:y,...A}):null,bt(s)?null:vx(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,x:y,marginTop:v,marginRight:w,marginBottom:_,marginLeft:M,...A}),!bt(s)&&x!==null?bs([],k2({fill:s,fillOpacity:l,...A},function(L,O,T,S,I){const ne=S[e],{marginTop:te,marginRight:K,marginBottom:q,marginLeft:G}=e==="y"&&I.inset||I,z=C??(ne.bandwidth?"center":"top"),U=$??(t==="right"?K:G)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-te:z==="bottom"?q-3:0,this.dx=t==="right"?U:-U,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[N2(e,ne,{anchor:t,label:x,labelAnchor:z,labelArrow:E})]}}}})):null)}function S2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:g,y,margin:b,marginTop:v=b===void 0?t==="top"?30:0:b,marginRight:w=b===void 0?20:b,marginBottom:_=b===void 0?t==="bottom"?30:0:b,marginLeft:M=b===void 0?20:b,label:x,labelAnchor:C,labelArrow:E,labelOffset:$,...A}){return m=Be(m),p=Be(p),g=Be(g),C!==void 0&&(C=nn(C,"labelAnchor",["center","left","right"])),E=B2(E),Yg(m&&!bt(a)?wx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,y,...A}):null,bt(s)?null:_x(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,y,marginTop:v,marginRight:w,marginBottom:_,marginLeft:M,...A}),!bt(s)&&x!==null?bs([],k2({fill:s,fillOpacity:l,...A},function(L,O,T,S,I){const ne=S[e],{marginTop:te,marginRight:K,marginBottom:q,marginLeft:G}=e==="x"&&I.inset||I,z=C??(ne.bandwidth?"center":"right"),U=$??(t==="top"?te:q)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-U:U,this.dx=z==="right"?K-3:z==="left"?3-G:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[N2(e,ne,{anchor:t,label:x,labelAnchor:z,labelArrow:E})]}}}})):null)}function yx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetLeft:c=l,insetRight:f=l,dx:h=0,y:d=e==="y"?void 0:null,...m}){return wi(px,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:u,y:d,...m,dx:t==="left"?+h-gt+ +c:+h+gt-f,anchor:"start",length:s,shape:t==="left"?Tx:kx})}function wx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetTop:c=l,insetBottom:f=l,dy:h=0,x:d=e==="x"?void 0:null,...m}){return wi(mx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:u,x:d,...m,dy:t==="bottom"?+h-gt-f:+h+gt+ +c,anchor:"start",length:s,shape:t==="bottom"?Ex:Cx})}function vx(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*Jg):0),text:s,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:c=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:m=h,dx:p=0,y:g=e==="y"?void 0:null,...y}){return wi(QM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,y:g,...y,dx:t==="left"?+p-a-u+ +d:+p+ +a+ +u-m},function(b,v,w,_,M){f===void 0&&(this.fontVariant=D2(b)),s===void 0&&(M.text=$2(b,v,w,_,t))})}function _x(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*Jg):0),text:s,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:m=h,dy:p=0,x:g=e==="x"?void 0:null,...y}){return wi(KM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,x:g,...y,dy:t==="bottom"?+p+ +a+ +u-m:+p-a-u+ +d},function(b,v,w,_,M){f===void 0&&(this.fontVariant=D2(b)),s===void 0&&(M.text=$2(b,v,w,_,t))})}function Mx(){const[e,t]=ir(...arguments);return E2("y",w2(t),e,t)}function xx(){const[e,t]=ir(...arguments);return E2("fy",v2(t),e,t)}function Px(){const[e,t]=ir(...arguments);return C2("x",_2(t),e,t)}function Ax(){const[e,t]=ir(...arguments);return C2("fx",M2(t),e,t)}function E2(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...u}){return wi(vu,e,t,`${e}-grid`,n,{y:r,x1:a,x2:o,...T2(u)})}function C2(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...u}){return wi(Sf,e,t,`${e}-grid`,n,{x:r,y1:a,y2:o,...T2(u)})}function T2({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function k2({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c=!1},f){return[,e]=Ln(e),[,t]=ft(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c,initializer:f}}function wi(e,t,n,r,i,a,o){let u;function s(f,h,d,m,p,g){const y=f==null&&(t==="fx"||t==="fy"),{[t]:b}=m;if(!b)throw new Error(`missing scale: ${t}`);const v=b.domain();let{interval:w,ticks:_,tickFormat:M,tickSpacing:x=t==="x"?80:35}=a;if(typeof _=="string"&&F2(b)&&(w=_,_=void 0),_===void 0&&(_=gi(w,b.type)??Sx(b,x)),f==null){if(nr(_))f=Et(_);else if(zr(_))f=ul(_,...Dt(v));else if(b.interval){let E=b.interval;if(b.ticks){const[$,A]=Dt(v),L=(A-$)/E[La];E=sd(E,L/_)??E,f=ul(E,$,A)}else{f=v;const $=f.length;E=sd(E,$/_)??E,E!==b.interval&&(f=ul(E,...Dt(f)))}if(E===b.interval){const $=Math.round(f.length/_);$>1&&(f=f.filter((A,L)=>L%$===0))}}else b.ticks?f=b.ticks(_):f=v;if(!b.ticks&&f.length&&f!==v){const E=new Du(v);f=f.filter($=>E.has($)),f.length||Yn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[Rn(f)]:u[t]={scale:t,value:st}}o==null||o.call(this,b,f,_,M,u);const C=Object.fromEntries(Object.entries(u).map(([E,$])=>[E,{...$,value:Ze(f,$.value)}]));return y&&(h=g.filterFacets(f,C)),{data:f,facets:h,channels:C}}const l=si(a).initializer,c=e(i,si({...a,initializer:s},l));return i==null?(u=c.channels,c.channels={}):u={},c.ariaLabel=r,c.clip===void 0&&(c.clip=!1),c}function Sx(e,t){const[n,r]=Dt(e.range());return(r-n)/t}function $2(e,t,n,r,i){return{value:$f(e,t,n,r,i)}}function $f(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&vt(t)?l9(e.type,t,i)??Ar:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Ar:typeof r=="string"?(vt(e.domain())?Ba:pi)(r):Ia(r)}function ul(e,t,n){return e.range(t,e.offset(e.floor(n)))}const Ex={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Cx={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},Tx={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},kx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function D2(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function N2(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&F2(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!a)return r;if(a===!0){const o=mM(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function B2(e="auto"){return bt(e)?!1:typeof e=="boolean"?e:nn(e,"labelArrow",["auto","up","right","down","left"])}function F2(e){return vt(e.domain())}function Gd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function $x(e,{opacity:t,...n}={}){if(!$r(e)&&!Vg(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return L2(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",ft(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Dx(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:bt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...u}={},s){const[f,h]=Ln(t),[d,m]=Ln(r),p=Gd(s,f),g=Gd(s,d),y=o*o*Math.PI;return n=ft(n)[1],i=ft(i)[1],a=ft(a)[1],L2(e,u,(b,v,w,_)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",_).attr("fill",f==="color"?M=>p.scale(M):h).attr("fill-opacity",n).attr("stroke",d==="color"?M=>g.scale(M):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",M=>{const x=Hn();return e.scale(M).draw(x,y),x}))}function L2(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=Qg(e),swatchSize:o=15,swatchWidth:u=o,swatchHeight:s=o,marginLeft:l=0,className:c,style:f,width:h}=t;const d=yf(t);c=bf(c),i=$f(e.scale,e.domain,void 0,i);const m=Ge("div",d).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,u,s).call(g=>g.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,u,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(g=>g.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",l?`${+l}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",nt(a,"normal")).call(gf,f).node()}const cc=new Map([["symbol",Dx],["color",R2],["opacity",Bx]]);function Nx(e,t,n={}){return(r,i)=>{if(!cc.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return cc.get(r)(e[r],I2(t,n[r],i),a=>e[a])}}function I2({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return $9(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function R2(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return $x(e,n);case"ramp":return OM(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function Bx({type:e,interpolate:t,...n},{legend:r=!0,color:i=Xn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return R2({type:e,...n,interpolate:Fx(i)},{legend:r,...a})}function Fx(e){const{r:t,g:n,b:r}=Xn(e)||Xn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function Lx(e,t,n){const r=[];for(const[i,a]of cc){const o=n[i];if(o!=null&&o.legend&&i in e){const u=a(e[i],I2(t,e[i],o),s=>e[s]);u!=null&&r.push(u)}}return r}const Ix={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Rx={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Ox extends ht{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:u=r,rx:s,ry:l}=t;super(Co,void 0,t,n==null?Ix:Rx),this.anchor=cg(n,"anchor",["top","right","bottom","left"]),this.insetTop=Be(i),this.insetRight=Be(a),this.insetBottom=Be(o),this.insetLeft=Be(u),this.rx=Be(s),this.ry=Be(l)}render(t,n,r,i,a){const{marginTop:o,marginRight:u,marginBottom:s,marginLeft:l,width:c,height:f}=i,{anchor:h,insetTop:d,insetRight:m,insetBottom:p,insetLeft:g,rx:y,ry:b}=this,v=l+g,w=c-u-m,_=o+d,M=f-s-p;return Ge(h?"svg:line":"svg:rect",a).datum(0).call(qt,this,i,a).call(Gt,this).call(qn,this,r).call(Ct,this,{}).call(h==="left"?x=>x.attr("x1",v).attr("x2",v).attr("y1",_).attr("y2",M):h==="right"?x=>x.attr("x1",w).attr("x2",w).attr("y1",_).attr("y2",M):h==="top"?x=>x.attr("x1",v).attr("x2",w).attr("y1",_).attr("y2",_):h==="bottom"?x=>x.attr("x1",v).attr("x2",w).attr("y1",M).attr("y2",M):x=>x.attr("x",v).attr("y",_).attr("width",w-v).attr("height",M-_).attr("rx",y).attr("ry",b)).node()}}function qx(e){return new Ox(e)}const sl={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},Gx=new Set(["geometry","href","src","ariaLabel","scales"]);class zx extends ht{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&nr(t)&&mg(t)&&(n={...n,title:st});const{x:r,y:i,x1:a,x2:o,y1:u,y2:s,anchor:l,preferredAnchor:c="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:g,lineHeight:y=1,lineWidth:b=20,frameAnchor:v,format:w,textAnchor:_="start",textOverflow:M,textPadding:x=8,title:C,pointerSize:E=12,pathFilter:$="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:u!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:u,scale:"y",optional:s==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:s,scale:"y",optional:u==null},title:{value:C,optional:!0}},n,sl),this.anchor=rc(l,"anchor"),this.preferredAnchor=rc(c,"preferredAnchor"),this.frameAnchor=ss(v),this.textAnchor=nt(_,"middle"),this.textPadding=+x,this.pointerSize=+E,this.pathFilter=ct($),this.lineHeight=+y,this.lineWidth=+b,this.textOverflow=c2(M),this.monospace=!!f,this.fontFamily=ct(h),this.fontSize=Be(d),this.fontStyle=ct(m),this.fontVariant=ct(p),this.fontWeight=ct(g);for(const A in sl)A in this.channels&&(this[A]=sl[A]);this.splitLines=h2(this),this.clipLine=d2(this),this.format={...w}}render(t,n,r,i,a){const o=this,{x:u,y:s,fx:l,fy:c}=n,{ownerSVGElement:f,document:h}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:g}=this,{textPadding:y,pointerSize:b,pathFilter:v}=this,{marginTop:w,marginLeft:_}=i,{x1:M,y1:x,x2:C,y2:E,x:$=M??C,y:A=x??E}=r,L=l?l(t.fx)-_:0,O=c?c(t.fy)-w:0,[T,S]=Ua(this,i),I=Zg(r,T),ne=Kg(r,S),te=m?kf:Tf,K=te(Yr);let q,G;"title"in r?(q=r.channels,G=Yx):(q=Vx.call(this,r,n),G=jx);const z=Ge("svg:g",a).call(qt,this,i,a).call(f2,this).call(Ct,this,{x:$&&u,y:A&&s}).call(ue=>ue.selectAll().data(t).enter().append("g").attr("transform",ie=>`translate(${Math.round(I(ie))},${Math.round(ne(ie))})`).call(Gt,this).call(ie=>ie.append("path").attr("filter",v)).call(ie=>ie.append("text").each(function(V){const Y=Wi(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const N=G.call(o,V,t,q,n,r);if(typeof N=="string")for(const H of o.splitLines(N))U(Y,{value:o.clipLine(H)});else{const H=new Set;for(const j of N){const{label:D=""}=j;D&&H.has(D)||(H.add(D),U(Y,j))}}})));function U(ue,{label:ie,value:V,color:Y,opacity:N}){ie??(ie=""),V??(V="");const H=Y!=null||N!=null;let j,D=g*100;const[ge]=ci(ie,D,te,K);if(ge>=0)ie=ie.slice(0,ge).trimEnd()+Yr,j=V.trim(),V="";else{(ie||!V&&!H)&&(V=" "+V);const[he]=ci(V,D-te(ie),te,K);he>=0&&(j=V.trim(),V=V.slice(0,he).trimEnd()+Yr)}const ee=ue.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");ie&&ee.append("tspan").attr("font-weight","bold").text(ie),V&&ee.append(()=>h.createTextNode(V)),H&&ee.append("tspan").text(" ").attr("fill",Y).attr("fill-opacity",N).style("user-select","none"),j&&ee.append("title").text(j)}function oe(){const{width:ue,height:ie}=i.facet??i;z.selectChildren().each(function(V){let{x:Y,width:N,height:H}=this.getBBox();N=Math.round(N),H=Math.round(H);let j=d;if(j===void 0){const ee=I(V)+L,he=ne(V)+O,Me=ee+N+b+y*2<ue,Oe=ee-N-b-y*2>0,tt=he+H+b+y*2<ie,De=he-H-b-y*2>0;j=Me&&Oe?tt&&De?o.preferredAnchor:De?"bottom":"top":tt&&De?Me?"left":"right":(Me||Oe)&&(tt||De)?`${De?"bottom":"top"}-${Me?"left":"right"}`:o.preferredAnchor}const D=this.firstChild,ge=this.lastChild;if(D.setAttribute("d",Wx(j,b,y,N,H)),Y)for(const ee of ge.childNodes)ee.setAttribute("x",-Y);ge.setAttribute("y",`${+Ux(j,ge.childNodes.length,p).toFixed(6)}em`),ge.setAttribute("transform",`translate(${Hx(j,b,y,N,H)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(oe):typeof requestAnimationFrame<"u"&&requestAnimationFrame(oe)),z.node()}}function O2(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ra(t,n)),new zx(e,{...r,x:t,y:n})}function Ux(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Hx(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Wx(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function Vx({channels:e},t){var i,a;const n={};let r=this.format;r=zd(r,e,"x"),r=zd(r,e,"y"),this.format=r;for(const o in r){const u=r[o];if(!(u===null||u===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const s=gd(e,o);s&&(n[o]=s)}}for(const o in e){if(o in n||o in r||Gx.has(o))continue;const u=gd(e,o);u&&(n[o]=u)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const u=this.format[o];if(typeof u=="string"){const s=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(vt(s)?Ba:pi)(u)}else if(u===void 0||u===!0){const s=t[o];this.format[o]=s!=null&&s.bandwidth?$f(s,s.domain()):Ar}}return n}function zd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([u])=>u===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function Yx(e,t,{title:n}){return Ar(n.value[e],e)}function*jx(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:_u(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:Hd(r,n,"x"),value:Ud(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:Hd(r,n,"y"),value:Ud(this.format.y2,n.y1,o,e)};else{const u=o.value[e],s=o.scale;if(!Kn(u)&&s==null)continue;yield{label:_u(r,n,a),value:this.format[a](u,e),color:s==="color"?i[a][e]:null,opacity:s==="opacity"?i[a][e]:null}}}}function Ud(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Hd(e,t,n){const r=_u(e,t,`${n}1`,n),i=_u(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function _u(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function zt(e={}){var K;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:u}=e,s=bf(e.className),l=e.marks===void 0?[]:Vd(e.marks);l.push(...nP(l));const c=eP(t,e),f=new Map;for(const q of l){const G=Yd(q,c,e);G&&f.set(q,G)}const h=new Map;c&&Ci(h,[c],e),Ci(h,f,e);const d=Vd(rP(l,h,e));for(const q of d){const G=Yd(q,c,e);G&&f.set(q,G)}l.unshift(...d);let m=PM(h,e);if(m!==void 0){const q=c?il(m,c):void 0;for(const z of l){if(z.facet===null||z.facet==="super")continue;const U=f.get(z);U!==void 0&&(U.facetsIndex=z.fx!=null||z.fy!=null?il(m,U):q)}const G=new Set;for(const{facetsIndex:z}of f.values())z==null||z.forEach((U,oe)=>{(U==null?void 0:U.length)>0&&G.add(oe)});m.forEach(0<G.size&&G.size<m.length?(z,U)=>z.empty=!G.has(U):z=>z.empty=!1);for(const z of l)if(z.facet==="exclude"){const U=f.get(z);U!==void 0&&(U.facetsIndex=EM(U.facetsIndex))}}for(const q of Re.keys())tc(e[q])&&q!=="fx"&&q!=="fy"&&h.set(q,[]);const p=new Map;for(const q of l){if(p.has(q))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:G,channels:z}=f.get(q)??{},{data:U,facets:oe,channels:ue}=q.initialize(G,z,e);Df(ue,e),p.set(q,{data:U,facets:oe,channels:ue})}const g=uc(Ci(h,p,e),e),y=MM(g,l,e);hM(g,y);const b=Sd(g),{fx:v,fy:w}=b,_=v||w?Ug(g,y):y,M=v||w?cP(b,y):y,x=yf(e),C=x.document,E=Iu("svg").call(C.documentElement);let $=E;x.ownerSVGElement=E,x.className=s,x.projection=P8(e,_),x.filterFacets=(q,G)=>il(m,{channels:G,groups:xf(q,G)}),x.getMarkState=q=>{const G=p.get(q),z=f.get(q);return{...G,channels:{...G.channels,...z==null?void 0:z.channels}}},x.dispatchValue=q=>{$.value!==q&&($.value=q,$.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[q,G]of p)if(q.initializer!=null){const z=q.facet==="super"?M:_,U=q.initializer(G.data,G.facets,G.channels,b,z,x);if(U.data!==void 0&&(G.data=U.data),U.facets!==void 0&&(G.facets=U.facets),U.channels!==void 0){const{fx:oe,fy:ue,...ie}=U.channels;Jx(ie),Object.assign(G.channels,ie);for(const V of Object.values(ie)){const{scale:Y}=V;Y!=null&&!N9(Re.get(Y))&&(q2(V,e),A.add(Y))}(oe!=null||ue!=null)&&f.set(q,!0)}}if(A.size){const q=new Map;Ci(q,p,e,oe=>A.has(oe)),Ci(h,p,e,oe=>A.has(oe));const G=lP(uc(q,e),g),{scales:z,...U}=Sd(G);Object.assign(g,G),Object.assign(b,U),Object.assign(b.scales,z)}let L,O;m!==void 0&&(L={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},m=AM(m,L),O=SM(v,w,y));for(const[q,G]of p)G.values=q.scale(G.channels,b,x);const{width:T,height:S}=y;Wi(E).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",T).attr("height",S).attr("viewBox",`0 0 ${T} ${S}`).attr("aria-label",o).attr("aria-description",u).call(q=>q.append("style").text(`:where(.${s}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${s} text),
:where(.${s} tspan) {
  white-space: pre;
}`)).call(gf,n);for(const q of l){const{channels:G,values:z,facets:U}=p.get(q);if(m===void 0||q.facet==="super"){let oe=null;if(U&&(oe=U[0],oe=q.filter(oe,G,z),oe.length===0))continue;const ue=q.render(oe,b,z,M,x);if(ue==null)continue;E.appendChild(ue)}else{let oe;for(const ue of m){if(!(((K=q.facetAnchor)==null?void 0:K.call(q,m,L,ue))??!ue.empty))continue;let ie=null;if(U){const Y=f.has(q);if(ie=U[Y?ue.i:0],ie=q.filter(ie,G,z),ie.length===0)continue;!Y&&ie===U[0]&&(ie=v9(ie)),ie.fx=ue.x,ie.fy=ue.y,ie.fi=ue.i}const V=q.render(ie,b,z,_,x);if(V!=null){(oe??(oe=Wi(E).append("g"))).append(()=>V).datum(ue);for(const Y of["aria-label","aria-description","aria-hidden","transform"])V.hasAttribute(Y)&&(oe.attr(Y,V.getAttribute(Y)),V.removeAttribute(Y))}}oe==null||oe.selectChildren().attr("transform",O)}}const I=Lx(g,x,e),{figure:ne=r!=null||i!=null||a!=null||I.length>0}=e;ne&&($=C.createElement("figure"),$.className=`${s}-figure`,$.style.maxWidth="initial",r!=null&&$.append(Wd(C,r,"h2")),i!=null&&$.append(Wd(C,i,"h3")),$.append(...I,E),a!=null&&$.append(Xx(C,a))),$.scale=vM(b.scales),$.legend=Nx(g,x,e);const te=h8();return te>0&&Wi(E).append("text").attr("x",T).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${te.toLocaleString("en-US")} warning${te===1?"":"s"}. Please check the console.`),$}function Wd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Xx(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Zx({marks:e=[],...t}={}){return zt({...t,marks:[...e,this]})}ht.prototype.plot=Zx;function Vd(e){return e.flat(1/0).filter(t=>t!=null).map(Kx)}function Kx(e){return typeof e.render=="function"?e:new Qx(e)}class Qx extends ht{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Df(e,t){for(const n in e)q2(e[n],t);return e}function q2(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:u=a?s=>s*100:dg(o,i)}=t[n]??{};u!=null&&(e.value=ze(e.value,u),e.transform=!1)}function Jx(e){for(const t in e)Mg(t,e[t])}function Ci(e,t,n,r=m9){var i,a;for(const{channels:o}of t.values())for(const u in o){const s=o[u],{scale:l}=s;if(l!=null&&r(l))if(l==="projection"){if(!C8(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,f=((a=n.y)==null?void 0:a.domain)===void 0;if(c||f){const[h,d]=k8(s);c&&ll(e,"x",h),f&&ll(e,"y",d)}}}else ll(e,l,s)}return e}function ll(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function eP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=Et(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=da(i,{value:n,scale:"fx"})),r!=null&&(a.fy=da(i,{value:r,scale:"fy"})),Df(a,t);const o=xf(i,a);return{channels:a,groups:o,data:e.data}}function Yd(e,t,n){var s;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=Et(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const c={};return r!=null&&(c.fx=da(l,{value:r,scale:"fx"})),i!=null&&(c.fy=da(l,{value:i,scale:"fy"})),Df(c,n),{channels:c,groups:xf(l,c)}}if(t===void 0)return;const{channels:a,groups:o,data:u}=t;if(e.facet!=="auto"||e.data===u)return{channels:a,groups:o};u.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((s=Et(e.data))==null?void 0:s.length)===u.length&&Yn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function tP(e,t={}){return si({...t,x:null,y:null},(n,r,i,a,o,u)=>u.getMarkState(e))}function nP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?RM:/^y$/i.test(i)?Bd:Xg,r=i(tP(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===Bd?"left":"bottom");const o=O2(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function rP(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:u={},axis:s,grid:l,facet:c={},facet:{axis:f=s,grid:h}=c,x:{axis:d=s,grid:m=d===null?null:l}=i,y:{axis:p=s,grid:g=p===null?null:l}=a,fx:{axis:y=f,grid:b=y===null?null:h}=o,fy:{axis:v=f,grid:w=v===null?null:h}=u}=n;(r||!tc(i)&&!jd("x",e))&&(d=m=null),(r||!tc(a)&&!jd("y",e))&&(p=g=null),t.has("fx")||(y=b=null),t.has("fy")||(v=w=null),d===void 0&&(d=!go(e,"x")),p===void 0&&(p=!go(e,"y")),y===void 0&&(y=!go(e,"fx")),v===void 0&&(v=!go(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),y===!0&&(y=d==="top"||d===null?"bottom":"top"),v===!0&&(v=p==="right"||p===null?"left":"right");const _=[];return bo(_,w,xx,u),po(_,v,bx,"right","left",c,u),bo(_,b,Ax,o),po(_,y,gx,"top","bottom",c,o),bo(_,g,Mx,a),po(_,p,x2,"left","right",n,a),bo(_,m,Px,i),po(_,d,P2,"bottom","top",n,i),_}function po(e,t,n,r,i,a,o){if(!t)return;const u=iP(t);o=aP(u?r:t,a,o);const{line:s}=o;(n===x2||n===P2)&&s&&!ha(s)&&e.push(qx(oP(o))),e.push(n(o)),u&&e.push(n({...o,anchor:i,label:null}))}function bo(e,t,n,r){!t||ha(t)||e.push(n(uP(t,r)))}function iP(e){return/^\s*both\s*$/i.test(e)}function aP(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:m,labelOffset:p}}function oP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function uP(e,{stroke:t=us(e)?e:void 0,ticks:n=sP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function sP(e){switch(typeof e){case"number":return!0;case"string":return!us(e)}return nr(e)||typeof(e==null?void 0:e.range)=="function"}function go(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function jd(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function lP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function cP({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=Mf(n),l=e&&Xd(e),c=t&&Xd(t);return{marginTop:t?c[0]:r,marginRight:e?u-l[1]:i,marginBottom:t?s-c[1]:a,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:u,height:s}}function Xd(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const fP=new Map([["basis",y7],["basis-closed",w7],["basis-open",v7],["bundle",_7],["bump-x",u7],["bump-y",s7],["cardinal",M7],["cardinal-closed",x7],["cardinal-open",P7],["catmull-rom",A7],["catmull-rom-closed",S7],["catmull-rom-open",E7],["linear",Fa],["linear-closed",C7],["monotone-x",T7],["monotone-y",k7],["natural",$7],["step",D7],["step-after",B7],["step-before",N7]]);function G2(e=Fa,t){if(typeof e=="function")return e;const n=fP.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function z2(e=fi,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?fi:G2(e,t)}function fi(e){return Fa(e)}function hP(e={y:"count"},t={}){[e,t]=pP(e,t);const{x:n,y:r}=t;return mP(bP(n,t,st),null,null,r,e,Af(t))}function dP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=pf}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function U2(e={}){return dP(hP,"y",ms(e,"x"))}function mP(e,t,n,r,{data:i=_g,filter:a=wu,sort:o,reverse:u,...s}={},l={}){e=Zd(e),t=Zd(t),s=yP(s,l),i=V2(i,st),o=o==null?void 0:H2("sort",o,l),a=a==null?void 0:W2("filter",a,l),n!=null&&co(s,"x","x1","x2")&&(n=null),r!=null&&co(s,"y","y1","y2")&&(r=null);const[c,f]=An(e),[h,d]=An(e),[m,p]=An(t),[g,y]=An(t),[b,v]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[w,_]=An(b),{x:M,y:x,z:C,fill:E,stroke:$,x1:A,x2:L,y1:O,y2:T,domain:S,cumulative:I,thresholds:ne,interval:te,...K}=l,[q,G]=An(C),[z]=Ln(E),[U]=Ln($),[oe,ue]=An(z),[ie,V]=An(U);return{..."z"in l&&{z:q||C},..."fill"in l&&{fill:oe||E},..."stroke"in l&&{stroke:ie||$},...cs(K,(Y,N,H)=>{const j=hg(Ze(Y,b),H==null?void 0:H[v]),D=Ze(Y,C),ge=Ze(Y,z),ee=Ze(Y,U),he=Y9(s,{z:D,fill:ge,stroke:ee}),Me=[],Oe=[],tt=j&&_([]),De=D&&G([]),Ut=ge&&ue([]),$e=ee&&V([]),Dr=e&&f([]),Ht=e&&d([]),J=t&&p([]),_e=t&&y([]),ve=_P(e,t,Y);let Te=0;for(const Ne of s)Ne.initialize(Y);o&&o.initialize(Y),a&&a.initialize(Y);for(const Ne of N){const se=[];for(const We of s)We.scope("facet",Ne);o&&o.scope("facet",Ne),a&&a.scope("facet",Ne);for(const[We,F]of dd(Ne,he))for(const[re,ye]of dd(F,j))for(const[_t,an]of ve(ye))if(!(a&&!a.reduce(_t,an))){se.push(Te++),Oe.push(i.reduceIndex(_t,Y,an)),j&&tt.push(re),D&&De.push(he===D?We:D[(_t.length>0?_t:ye)[0]]),ge&&Ut.push(he===ge?We:ge[(_t.length>0?_t:ye)[0]]),ee&&$e.push(he===ee?We:ee[(_t.length>0?_t:ye)[0]]),Dr&&(Dr.push(an.x1),Ht.push(an.x2)),J&&(J.push(an.y1),_e.push(an.y2));for(const Xa of s)Xa.reduce(_t,an);o&&o.reduce(_t)}Me.push(se)}return j9(Me,o,u),{data:Oe,facets:Me}}),...!co(s,"x")&&(c?{x1:c,x2:h,x:nc(c,h)}:{x:M,x1:A,x2:L}),...!co(s,"y")&&(m?{y1:m,y2:g,y:nc(m,g)}:{y:x,y1:O,y2:T}),...w&&{[v]:w},...Object.fromEntries(s.map(({name:Y,output:N})=>[Y,N]))}}function pP({cumulative:e,domain:t,thresholds:n,interval:r,...i},a){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...a}]}function bP(e,{cumulative:t,domain:n,thresholds:r,interval:i},a){return e={...Oa(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=a),e.thresholds=gP(e.thresholds,e.interval),e}function Zd(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Dt,thresholds:i}=e,a=o=>{let u=Ze(o,t),s;if(vt(u)||vP(i)){u=ze(u,lg,Float64Array);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!zr(i)?i(u,c,f):i;typeof h=="number"&&(h=ap(c,f,h)),zr(h)&&(r===Dt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f))),s=h}else{u=cn(u);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!zr(i)?i(u,c,f):i;if(typeof h=="number")if(r===Dt){let d=zo(c,f,h);if(isFinite(d))if(d>0){let m=Math.round(c/d),p=Math.round(f/d);m*d<=c||--m,p*d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let y=0;y<g;++y)h[y]=(m+y)*d}else if(d<0){d=-d;let m=Math.round(c*d),p=Math.round(f*d);m/d<=c||--m,p/d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let y=0;y<g;++y)h[y]=(m+y)/d}else h=[c];else h=[c]}else h=ea(c,f,h);else zr(h)&&(r===Dt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f)));s=h}const l=[];if(s.length===1)l.push([s[0],s[0]]);else for(let c=1;c<s.length;++c)l.push([s[c-1],s[c]]);return l.bin=(n<0?xP:n>0?MP:Nf)(l,s,u),l};return a.label=kr(t),a}function gP(e,t,n=Kd){if(e===void 0)return t===void 0?n:gi(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return C3;case"scott":return g1;case"sturges":return P3;case"auto":return Kd}return rf(e)}return e}function yP(e,t){return H9(e,t,H2)}function H2(e,t,n){return wg(e,t,n,W2)}function W2(e,t,n){return vg(e,t,n,V2)}function V2(e,t){return mf(e,t,wP)}function wP(e){switch(`${e}`.toLowerCase()){case"x":return PP;case"x1":return SP;case"x2":return EP;case"y":return AP;case"y1":return CP;case"y2":return TP}throw new Error(`invalid bin reduce: ${e}`)}function Kd(e,t,n){return Math.min(200,g1(e,t,n))}function vP(e){return x9(e)||nr(e)&&vt(e)}function _P(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries()){const c=i.bin(o[u]);for(const[f,[h,d]]of i.entries())yield[c[f],{data:n,x1:s,y1:h,x2:l,y2:d}]}}:r?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries())yield[o[u],{data:n,x1:s,x2:l}]}:function*(a){const o=i.bin(a);for(const[u,[s,l]]of i.entries())yield[o[u],{data:n,y1:s,y2:l}]}}function Nf(e,t,n){return t=cn(t),r=>{var a;const i=e.map(()=>[]);for(const o of r)(a=i[ku(t,n[o])-1])==null||a.push(o);return i}}function MP(e,t,n){const r=Nf(e,t,n);return i=>{const a=r(i);for(let o=1,u=a.length;o<u;++o){const s=a[o-1],l=a[o];for(const c of s)l.push(c)}return a}}function xP(e,t,n){const r=Nf(e,t,n);return i=>{const a=r(i);for(let o=a.length-2;o>=0;--o){const u=a[o+1],s=a[o];for(const l of u)s.push(l)}return a}}function Y2(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const PP={reduceIndex(e,t,{x1:n,x2:r}){return Y2(n,r)}},AP={reduceIndex(e,t,{y1:n,y2:r}){return Y2(n,r)}},SP={reduceIndex(e,t,{x1:n}){return n}},EP={reduceIndex(e,t,{x2:n}){return n}},CP={reduceIndex(e,t,{y1:n}){return n}},TP={reduceIndex(e,t,{y2:n}){return n}};function j2(e={}){return fg(e)?e:{...e,y:st}}function kP(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const u of t)for(const s of u)r[s]&&++i,r[s]=1;if(i===0)return{data:e,facets:t};e=fa(e);const a=e[ug]=new Uint32Array(n+i);t=t.map(u=>fa(u,Uint32Array));let o=n;r.fill(0);for(const u of t)for(let s=0,l=u.length;s<l;++s){const c=u[s];r[c]?(u[s]=o,e[o]=e[c],a[o]=c,++o):a[c]=c,r[c]=1}return{data:e,facets:t}}function $P(e={},t={}){arguments.length===1&&([e,t]=DP(e));const{x1:n,x:r=n,y:i,...a}=t,[o,u,s,l]=BP(r,i,"x","y",e,a);return{...o,x1:n,x:u,y1:s,y2:l,y:nc(s,l)}}function X2({y:e,y1:t,y2:n,...r}={}){return r=ms(r,"x"),t===void 0&&n===void 0?$P({y:e,...r}):([t,n]=w9(e,t,n),{...r,y1:t,y2:n})}function DP(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const NP={length:!0};function BP(e,t=d9,n,r,{offset:i,order:a,reverse:o},u){if(t===null)throw new Error(`stack requires ${r}`);const s=uf(u),[l,c]=An(e),[f,h]=yu(t),[d,m]=yu(t);return f.hint=d.hint=NP,i=FP(i),a=RP(a,i,r),[cs(u,(p,g,y)=>{({data:p,facets:g}=kP(p,g));const b=e==null?void 0:c(hg(Ze(p,e),y==null?void 0:y[n])),v=Ze(p,t,Float64Array),w=Ze(p,s),_=a&&a(p,b,v,w),M=p.length,x=h(new Float64Array(M)),C=m(new Float64Array(M)),E=[];for(const $ of g){const A=b?Array.from(Nu($,L=>b[L]).values()):[$];if(_)for(const L of A)L.sort(_);for(const L of A){let O=0,T=0;o&&L.reverse();for(const S of L){const I=v[S];I<0?O=C[S]=(x[S]=O)+I:I>0?T=C[S]=(x[S]=T)+I:C[S]=x[S]=T}}E.push(A)}return i&&i(E,x,C,w),{data:p,facets:g}}),l,f,d]}function FP(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return LP;case"center":case"silhouette":return IP;case"wiggle":return K2}throw new Error(`unknown offset: ${e}`)}}function Z2(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function LP(e,t,n){for(const r of e)for(const i of r){const[a,o]=Z2(i,n);for(const u of i){const s=1/(o-a||1);t[u]=s*(t[u]-a),n[u]=s*(n[u]-a)}}}function IP(e,t,n){for(const r of e){for(const i of r){const[a,o]=Z2(i,n);for(const u of i){const s=(o+a)/2;t[u]-=s,n[u]-=s}}Q2(r,t,n)}J2(e,t,n)}function K2(e,t,n,r){for(const i of e){const a=new gr;let o=0;for(const u of i){let s=-1;const l=u.map(d=>Math.abs(n[d]-t[d])),c=u.map(d=>{s=r?r[d]:++s;const m=n[d]-t[d],p=a.has(s)?m-a.get(s):0;return a.set(s,m),p}),f=[0,...y3(c)];for(const d of u)t[d]+=o,n[d]+=o;const h=jn(l);h&&(o-=jn(l,(d,m)=>(c[m]/2+f[m])*d)/h)}Q2(i,t,n)}J2(e,t,n)}function Q2(e,t,n){const r=Dn(e,i=>Dn(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function J2(e,t,n){const r=e.length;if(r===1)return;const i=e.map(u=>u.flat()),a=i.map(u=>(Dn(u,s=>t[s])+It(u,s=>n[s]))/2),o=Dn(a);for(let u=0;u<r;u++){const s=o-a[u];for(const l of i[u])t[l]+=s,n[l]+=s}}function RP(e,t,n){if(e===void 0&&t===K2)return Qd(Jt);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?gu:Jt;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return OP(i);case"z":return qP(i);case"sum":return GP(i);case"appearance":return zP(i);case"inside-out":return Qd(i)}return Jd(sg(e))}if(typeof e=="function")return(e.length===1?Jd:UP)(e);if(Array.isArray(e))return HP(e);throw new Error(`invalid order: ${e}`)}}function OP(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function qP(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function GP(e){return ys(e,(t,n,r,i)=>Ac(Rn(t),a=>jn(a,o=>r[o]),a=>i[a]))}function zP(e){return ys(e,(t,n,r,i)=>Ac(Rn(t),a=>n[b1(a,o=>r[o])],a=>i[a]))}function Qd(e){return ys(e,(t,n,r,i)=>{const a=Rn(t),o=Ac(a,f=>n[b1(f,h=>r[h])],f=>i[f]),u=Hr(a,f=>jn(f,h=>r[h]),f=>i[f]),s=[],l=[];let c=0;for(const f of o)c<0?(c+=u.get(f),s.push(f)):(c-=u.get(f),l.push(f));return l.reverse().concat(s)})}function Jd(e){return t=>{const n=Ze(t,e);return(r,i)=>Jt(n[r],n[i])}}function UP(e){return t=>(n,r)=>e(t[n],t[r])}function HP(e){return ys(Jt,()=>e)}function ys(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new gr(t(n,r,i,a).map((u,s)=>[u,s]));return(u,s)=>e(o.get(a[u]),o.get(a[s]))}}const WP={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class VP extends ht{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,z:u,curve:s,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:uf(n),optional:!0}},n,WP),this.z=u,this.curve=G2(s,l)}filter(t){return t}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,n,0,0).call(c=>c.selectAll().data(Sg(t,[o,u,s,l],this,r)).enter().append("path").call(Gt,this).call(Ag,this,r).attr("d",o7().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>u[f]).x1(f=>s[f]).y1(f=>l[f]))).node()}}function YP(e,t){const{x:n=as,...r}=U2(t);return new VP(e,X2(j2({...r,x1:n,x2:void 0})))}const jP={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class XP extends ht{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:u,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,jP),this.curve=z2(u,s),Va(this,n)}project(t,n,r){this.curve!==fi&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r,{curve:c}=this;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Gt,this).attr("d",c===fi&&a.projection?ZP(a.projection,o,u,s,l):h=>{const d=Hn(),m=c(d);return m.lineStart(),m.point(o[h],u[h]),m.point(s[h],l[h]),m.lineEnd(),d}).call(qn,this,r).call(ps,this,r,a)).node()}}function ZP(e,t,n,r,i){const a=Uu(e);return t=cn(t),n=cn(n),r=cn(r),i=cn(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function Bf(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...u}={}){return[n,r]=e0(t,n,r),[a,o]=e0(i,a,o),new XP(e,{...u,x1:n,x2:r,y1:a,y2:o})}function e0(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class ey extends ht{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:u=a,insetBottom:s=a,insetLeft:l=a,rx:c,ry:f}=r;this.insetTop=Be(o),this.insetRight=Be(u),this.insetBottom=Be(s),this.insetLeft=Be(l),this.rx=nt(c,"auto"),this.ry=nt(f,"auto")}render(t,n,r,i,a){const{rx:o,ry:u}=this;return Ge("svg:g",a).call(qt,this,i,a).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("rect").call(Gt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(ce,"rx",o).call(ce,"ry",u).call(qn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}}const KP={ariaLabel:"bar"};class QP extends ey{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,KP)}_transform(t,n,{y:r}){t.call(Ct,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return li(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:u,insetBottom:s}=this;return li(t)?o-i-a-u-s:l=>Math.max(0,Math.abs(r[l]-n[l])-u-s)}}function JP(e,t={}){return y9(t)||(t={...t,x:as,y2:st}),new QP(e,X2(o2(j2(t))))}const eA={ariaLabel:"cell"};class tA extends ey{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,eA)}_transform(t,n){t.call(Ct,n,{},0,0)}}function ty(e,{x:t,y:n,...r}={}){return[t,n]=Ra(t,n),new tA(e,{...r,x:t,y:n})}const nA={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function rA(e){return e.sort===void 0&&e.reverse===void 0?G9({channel:"-r"},e):e}class iA extends ht{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:u=la,frameAnchor:s}=n,[l,c]=ft(o,0),[f,h]=O9(u),[d,m]=ft(a,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:rs,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},rA(n),nA),this.r=m,this.rotate=c,this.symbol=h,this.frameAnchor=ss(s);const{channels:p}=this,{symbol:g}=p;if(g){const{fill:y,stroke:b}=p;g.hint={fill:y?y.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,r:c,rotate:f,symbol:h}=r,{r:d,rotate:m,symbol:p}=this,[g,y]=Ua(this,i),b=p===la,v=c?void 0:d*d*Math.PI;return ef(d)&&(t=[]),Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,{x:s&&o,y:l&&u}).call(w=>w.selectAll().data(t).enter().append(b?"circle":"path").call(Gt,this).call(b?_=>{_.attr("cx",s?M=>s[M]:g).attr("cy",l?M=>l[M]:y).attr("r",c?M=>c[M]:d)}:_=>{_.attr("transform",Ef`translate(${s?M=>s[M]:g},${l?M=>l[M]:y})${f?M=>` rotate(${f[M]})`:m?` rotate(${m})`:""}`).attr("d",c&&h?M=>{const x=Hn();return h[M].draw(x,c[M]*c[M]*Math.PI),x}:c?M=>{const x=Hn();return p.draw(x,c[M]*c[M]*Math.PI),x}:h?M=>{const x=Hn();return h[M].draw(x,v),x}:(()=>{const M=Hn();return p.draw(M,v),M})())}).call(qn,this,r)).node()}}function ws(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ra(t,n)),new iA(e,{...r,x:t,y:n})}const aA={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ny extends ht{constructor(t,n={}){const{x:r,y:i,z:a,curve:o,tension:u}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:uf(n),optional:!0}},n,aA),this.z=a,this.curve=z2(o,u),Va(this,n)}filter(t){return t}project(t,n,r){this.curve!==fi&&super.project(t,n,r)}render(t,n,r,i,a){const{x:o,y:u}=r,{curve:s}=this;return Ge("svg:g",a).call(qt,this,i,a).call(Ct,this,n).call(l=>l.selectAll().data(Sg(t,[o,u],this,r)).enter().append("path").call(Gt,this).call(Ag,this,r).call(UM,this,r,a).attr("d",s===fi&&a.projection?oA(a.projection,o,u):Eb().curve(s).defined(c=>c>=0).x(c=>o[c]).y(c=>u[c]))).node()}}function oA(e,t,n){const r=Uu(e);return t=cn(t),n=cn(n),i=>{let a=[];const o=[a];for(const u of i)u===-1?(a=[],o.push(a)):a.push([t[u],n[u]]);return r({type:"MultiLineString",coordinates:o})}}function uA(e,{x:t,y:n,...r}={}){return[t,n]=Ra(t,n),new ny(e,{...r,x:t,y:n})}function sA(e,{x:t=as,y:n=st,...r}={}){return new ny(e,U2({...r,x:t,y:n}))}const lA={ariaLabel:"tick",fill:null,stroke:"currentColor"};class cA extends ht{constructor(t,n,r){super(t,n,r,lA),Va(this,r)}render(t,n,r,i,a){return Ge("svg:g",a).call(qt,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(qn,this,r).call(ps,this,r,a)).node()}}class fA extends cA{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Be(o),this.insetBottom=Be(u)}_transform(t,n,{x:r}){t.call(Ct,n,{x:r},gt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function Ff(e,{x:t=st,...n}={}){return new fA(e,{...n,x:t})}function hA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:we,o:we,d(a){a&&Z(t),e[4](null)}}}function dA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;en(()=>{const s=zt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Ff(r,{x:l=>l})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class mA extends Je{constructor(t){super(),Qe(this,t,dA,hA,Ke,{pattern:3,width:0,height:1})}}function pA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:we,o:we,d(a){a&&Z(t),e[4](null)}}}function bA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;en(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=zt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},marks:[JP(s,{x:(c,f)=>f+1,y:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class gA extends Je{constructor(t){super(),Qe(this,t,bA,pA,Ke,{pattern:3,width:0,height:1})}}function yA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:we,o:we,d(a){a&&Z(t),e[4](null)}}}function wA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;en(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=zt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[ty(s,{x:(c,f)=>f+1,fill:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class vA extends Je{constructor(t){super(),Qe(this,t,wA,yA,Ke,{pattern:3,width:0,height:1})}}function _A(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:we,o:we,d(a){a&&Z(t),e[5](null)}}}function MA(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;en(()=>{if(n(2,u.textContent="",u),!r)return;const l=zt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[sA(r,{x:(c,f)=>f/i,y:c=>c})]});u.appendChild(l)});function s(l){ut[l?"unshift":"push"](()=>{u=l,n(2,u)})}return e.$$set=l=>{"audioData"in l&&n(3,r=l.audioData),"sampleRate"in l&&n(4,i=l.sampleRate),"width"in l&&n(0,a=l.width),"height"in l&&n(1,o=l.height)},[a,o,u,r,i,s]}class To extends Je{constructor(t){super(),Qe(this,t,MA,_A,Ke,{audioData:3,sampleRate:4,width:0,height:1})}}function xA(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=R(),i=k("button"),i.textContent="play audio (p)",n.controls=!1},m(u,s){Q(u,t,s),P(t,n),e[5](n),P(t,r),P(t,i),a||(o=je(i,"click",e[1]),a=!0)},p:we,i:we,o:we,d(u){u&&Z(t),e[5](null),a=!1,o()}}}function PA(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:a=-1}=t,o;const u=f=>{f&&o&&Qc(f,i,o)},s=()=>{o&&(n(0,o.currentTime=0,o),o.play())},l=f=>{f.key==="p"&&s()};va(()=>{document.querySelector("html").addEventListener("keyup",l),u(r)}),r3(()=>{document.querySelector("html").removeEventListener("keyup",l)});function c(f){ut[f?"unshift":"push"](()=>{o=f,n(0,o)})}return e.$$set=f=>{"audioData"in f&&n(2,r=f.audioData),"sampleRate"in f&&n(3,i=f.sampleRate),"currentTrialNumber"in f&&n(4,a=f.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&window.setTimeout(s,250),e.$$.dirty&4&&u(r)},[o,s,r,i,a,c]}class ry extends Je{constructor(t){super(),Qe(this,t,PA,xA,Ke,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const iy=new Map,ay=new Map,AA=new Map,SA=new Map;function EA(e){return iy.get(e)}function oy(e){return ay.get(e)}const CA=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],TA=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],kA=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of CA)iy.set(e.pitch,e),ay.set(e.label,e);for(const e of TA)AA.set(e.number,e);for(const e of kA){const t=`${e.number}-${e.subnumber}`;SA.set(t,e)}var $A={value:()=>{}};function uy(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ko(n)}function ko(e){this._=e}function DA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ko.prototype=uy.prototype={constructor:ko,on:function(e,t){var n=this._,r=DA(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=NA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=t0(n[i],e.name,t);else if(t==null)for(i in n)n[i]=t0(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ko(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function NA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function t0(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=$A,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var fc="http://www.w3.org/1999/xhtml";const n0={svg:"http://www.w3.org/2000/svg",xhtml:fc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),n0.hasOwnProperty(t)?{space:n0[t],local:e}:e}function BA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===fc&&t.documentElement.namespaceURI===fc?t.createElement(e):t.createElementNS(n,e)}}function FA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function sy(e){var t=vs(e);return(t.local?FA:BA)(t)}function LA(){}function Lf(e){return e==null?LA:function(){return this.querySelector(e)}}function IA(e){typeof e!="function"&&(e=Lf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Ot(r,this._parents)}function ly(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function RA(){return[]}function cy(e){return e==null?RA:function(){return this.querySelectorAll(e)}}function OA(e){return function(){var t=e.apply(this,arguments);return t==null?[]:ly(t)}}function qA(e){typeof e=="function"?e=OA(e):e=cy(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Ot(r,i)}function fy(e){return function(){return this.matches(e)}}function hy(e){return function(t){return t.matches(e)}}var GA=Array.prototype.find;function zA(e){return function(){return GA.call(this.children,e)}}function UA(){return this.firstElementChild}function HA(e){return this.select(e==null?UA:zA(typeof e=="function"?e:hy(e)))}var WA=Array.prototype.filter;function VA(){return this.children}function YA(e){return function(){return WA.call(this.children,e)}}function jA(e){return this.selectAll(e==null?VA:YA(typeof e=="function"?e:hy(e)))}function XA(e){typeof e!="function"&&(e=fy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Ot(r,this._parents)}function dy(e){return new Array(e.length)}function ZA(){return new Ot(this._enter||this._groups.map(dy),this._parents)}function Mu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mu.prototype={constructor:Mu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function KA(e){return function(){return e}}function QA(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new Mu(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function JA(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new Mu(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function eS(e){return e.__data__}function tS(e,t){if(!arguments.length)return Array.from(this,eS);var n=t?JA:QA,r=this._parents,i=this._groups;typeof e!="function"&&(e=KA(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=ly(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),y=s[l]=new Array(h);n(c,f,p,g,y,d,t);for(var b=0,v=0,w,_;b<m;++b)if(w=p[b]){for(b>=v&&(v=b+1);!(_=g[v])&&++v<m;);w._next=_||null}}return o=new Ot(o,r),o._enter=u,o._exit=s,o}function nS(){return new Ot(this._exit||this._groups.map(dy),this._parents)}function rS(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function iS(e){if(!(e instanceof Ot))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Ot(o,this._parents)}function aS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function oS(e){e||(e=uS);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Ot(i,this._parents).order()}function uS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lS(){return Array.from(this)}function cS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function fS(){let e=0;for(const t of this)++e;return e}function hS(){return!this.node()}function dS(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function mS(e){return function(){this.removeAttribute(e)}}function pS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bS(e,t){return function(){this.setAttribute(e,t)}}function gS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function yS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function wS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vS(e,t){var n=vs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?pS:mS:typeof t=="function"?n.local?wS:yS:n.local?gS:bS)(n,t))}function my(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _S(e){return function(){this.style.removeProperty(e)}}function MS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function PS(e,t,n){return arguments.length>1?this.each((t==null?_S:typeof t=="function"?xS:MS)(e,t,n??"")):hi(this.node(),e)}function hi(e,t){return e.style.getPropertyValue(t)||my(e).getComputedStyle(e,null).getPropertyValue(t)}function AS(e){return function(){delete this[e]}}function SS(e,t){return function(){this[e]=t}}function ES(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function CS(e,t){return arguments.length>1?this.each((t==null?AS:typeof t=="function"?ES:SS)(e,t)):this.node()[e]}function py(e){return e.trim().split(/^|\s+/)}function If(e){return e.classList||new by(e)}function by(e){this._node=e,this._names=py(e.getAttribute("class")||"")}by.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function gy(e,t){for(var n=If(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function yy(e,t){for(var n=If(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function TS(e){return function(){gy(this,e)}}function kS(e){return function(){yy(this,e)}}function $S(e,t){return function(){(t.apply(this,arguments)?gy:yy)(this,e)}}function DS(e,t){var n=py(e+"");if(arguments.length<2){for(var r=If(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?$S:t?TS:kS)(n,t))}function NS(){this.textContent=""}function BS(e){return function(){this.textContent=e}}function FS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function LS(e){return arguments.length?this.each(e==null?NS:(typeof e=="function"?FS:BS)(e)):this.node().textContent}function IS(){this.innerHTML=""}function RS(e){return function(){this.innerHTML=e}}function OS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function qS(e){return arguments.length?this.each(e==null?IS:(typeof e=="function"?OS:RS)(e)):this.node().innerHTML}function GS(){this.nextSibling&&this.parentNode.appendChild(this)}function zS(){return this.each(GS)}function US(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function HS(){return this.each(US)}function WS(e){var t=typeof e=="function"?e:sy(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function VS(){return null}function YS(e,t){var n=typeof e=="function"?e:sy(e),r=t==null?VS:typeof t=="function"?t:Lf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function jS(){var e=this.parentNode;e&&e.removeChild(this)}function XS(){return this.each(jS)}function ZS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function KS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function QS(e){return this.select(e?KS:ZS)}function JS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eE(e){return function(t){e.call(this,t,this.__data__)}}function tE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function rE(e,t,n){return function(){var r=this.__on,i,a=eE(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function iE(e,t,n){var r=tE(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?rE:nE,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function wy(e,t,n){var r=my(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function aE(e,t){return function(){return wy(this,e,t)}}function oE(e,t){return function(){return wy(this,e,t.apply(this,arguments))}}function uE(e,t){return this.each((typeof t=="function"?oE:aE)(e,t))}function*sE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var lE=[null];function Ot(e,t){this._groups=e,this._parents=t}function Ya(){return new Ot([[document.documentElement]],lE)}function cE(){return this}Ot.prototype=Ya.prototype={constructor:Ot,select:IA,selectAll:qA,selectChild:HA,selectChildren:jA,filter:XA,data:tS,enter:ZA,exit:nS,join:rS,merge:iS,selection:cE,order:aS,sort:oS,call:sS,nodes:lS,node:cS,size:fS,empty:hS,each:dS,attr:vS,style:PS,property:CS,classed:DS,text:LS,html:qS,raise:zS,lower:HS,append:WS,insert:YS,remove:XS,clone:QS,datum:JS,on:iE,dispatch:uE,[Symbol.iterator]:sE};function Rf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ja(){}var pa=.7,xu=1/pa,jr="\\s*([+-]?\\d+)\\s*",ba="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fE=/^#([0-9a-f]{3,8})$/,hE=new RegExp("^rgb\\("+[jr,jr,jr]+"\\)$"),dE=new RegExp("^rgb\\("+[mn,mn,mn]+"\\)$"),mE=new RegExp("^rgba\\("+[jr,jr,jr,ba]+"\\)$"),pE=new RegExp("^rgba\\("+[mn,mn,mn,ba]+"\\)$"),bE=new RegExp("^hsl\\("+[ba,mn,mn]+"\\)$"),gE=new RegExp("^hsla\\("+[ba,mn,mn,ba]+"\\)$"),r0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rf(ja,ga,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:i0,formatHex:i0,formatHsl:yE,formatRgb:a0,toString:a0});function i0(){return this.rgb().formatHex()}function yE(){return _y(this).formatHsl()}function a0(){return this.rgb().formatRgb()}function ga(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?o0(t):n===3?new xt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hE.exec(e))?new xt(t[1],t[2],t[3],1):(t=dE.exec(e))?new xt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mE.exec(e))?yo(t[1],t[2],t[3],t[4]):(t=pE.exec(e))?yo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bE.exec(e))?l0(t[1],t[2]/100,t[3]/100,1):(t=gE.exec(e))?l0(t[1],t[2]/100,t[3]/100,t[4]):r0.hasOwnProperty(e)?o0(r0[e]):e==="transparent"?new xt(NaN,NaN,NaN,0):null}function o0(e){return new xt(e>>16&255,e>>8&255,e&255,1)}function yo(e,t,n,r){return r<=0&&(e=t=n=NaN),new xt(e,t,n,r)}function wE(e){return e instanceof ja||(e=ga(e)),e?(e=e.rgb(),new xt(e.r,e.g,e.b,e.opacity)):new xt}function hc(e,t,n,r){return arguments.length===1?wE(e):new xt(e,t,n,r??1)}function xt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Rf(xt,hc,vy(ja,{brighter:function(e){return e=e==null?xu:Math.pow(xu,e),new xt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?pa:Math.pow(pa,e),new xt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:u0,formatHex:u0,formatRgb:s0,toString:s0}));function u0(){return"#"+cl(this.r)+cl(this.g)+cl(this.b)}function s0(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function cl(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function l0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ln(e,t,n,r)}function _y(e){if(e instanceof ln)return new ln(e.h,e.s,e.l,e.opacity);if(e instanceof ja||(e=ga(e)),!e)return new ln;if(e instanceof ln)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new ln(o,u,s,e.opacity)}function My(e,t,n,r){return arguments.length===1?_y(e):new ln(e,t,n,r??1)}function ln(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Rf(ln,My,vy(ja,{brighter:function(e){return e=e==null?xu:Math.pow(xu,e),new ln(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?pa:Math.pow(pa,e),new ln(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new xt(fl(e>=240?e-240:e+120,i,r),fl(e,i,r),fl(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function fl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xy=e=>()=>e;function vE(e,t){return function(n){return e+n*t}}function _E(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ME(e){return(e=+e)==1?Py:function(t,n){return n-t?_E(t,n,e):xy(isNaN(t)?n:t)}}function Py(e,t){var n=t-e;return n?vE(e,n):xy(isNaN(e)?t:e)}const dc=function e(t){var n=ME(t);function r(i,a){var o=n((i=hc(i)).r,(a=hc(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=Py(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Un(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var mc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hl=new RegExp(mc.source,"g");function xE(e){return function(){return e}}function PE(e){return function(t){return e(t)+""}}function AE(e,t){var n=mc.lastIndex=hl.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=mc.exec(e))&&(i=hl.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:Un(r,i)})),n=hl.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?PE(s[0].x):xE(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}var c0=180/Math.PI,pc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ay(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*c0,skewX:Math.atan(s)*c0,scaleX:o,scaleY:u}}var wo;function SE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pc:Ay(t.a,t.b,t.c,t.d,t.e,t.f)}function EE(e){return e==null||(wo||(wo=document.createElementNS("http://www.w3.org/2000/svg","g")),wo.setAttribute("transform",e),!(e=wo.transform.baseVal.consolidate()))?pc:(e=e.matrix,Ay(e.a,e.b,e.c,e.d,e.e,e.f))}function Sy(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Un(l,f)},{i:p-2,x:Un(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Un(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Un(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Un(l,f)},{i:p-2,x:Un(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var CE=Sy(SE,"px, ","px)","deg)"),TE=Sy(EE,", ",")",")"),di=0,Gi=0,Ti=0,Ey=1e3,Pu,zi,Au=0,Sr=0,_s=0,ya=typeof performance=="object"&&performance.now?performance:Date,Cy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Of(){return Sr||(Cy(kE),Sr=ya.now()+_s)}function kE(){Sr=0}function Su(){this._call=this._time=this._next=null}Su.prototype=Ty.prototype={constructor:Su,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Of():+n)+(t==null?0:+t),!this._next&&zi!==this&&(zi?zi._next=this:Pu=this,zi=this),this._call=e,this._time=n,bc()},stop:function(){this._call&&(this._call=null,this._time=1/0,bc())}};function Ty(e,t,n){var r=new Su;return r.restart(e,t,n),r}function $E(){Of(),++di;for(var e=Pu,t;e;)(t=Sr-e._time)>=0&&e._call.call(null,t),e=e._next;--di}function f0(){Sr=(Au=ya.now())+_s,di=Gi=0;try{$E()}finally{di=0,NE(),Sr=0}}function DE(){var e=ya.now(),t=e-Au;t>Ey&&(_s-=t,Au=e)}function NE(){for(var e,t=Pu,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Pu=n);zi=e,bc(r)}function bc(e){if(!di){Gi&&(Gi=clearTimeout(Gi));var t=e-Sr;t>24?(e<1/0&&(Gi=setTimeout(f0,e-ya.now()-_s)),Ti&&(Ti=clearInterval(Ti))):(Ti||(Au=ya.now(),Ti=setInterval(DE,Ey)),di=1,Cy(f0))}}function h0(e,t,n){var r=new Su;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var BE=uy("start","end","cancel","interrupt"),FE=[],ky=0,d0=1,gc=2,$o=3,m0=4,yc=5,Do=6;function Ms(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;LE(e,n,{name:t,index:r,group:i,on:BE,tween:FE,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ky})}function qf(e,t){var n=rn(e,t);if(n.state>ky)throw new Error("too late; already scheduled");return n}function vn(e,t){var n=rn(e,t);if(n.state>$o)throw new Error("too late; already running");return n}function rn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function LE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ty(a,0,n.time);function a(l){n.state=d0,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==d0)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===$o)return h0(o);d.state===m0?(d.state=Do,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Do,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(h0(function(){n.state===$o&&(n.state=m0,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=gc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===gc){for(n.state=$o,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=yc,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===yc&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Do,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function IE(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>gc&&r.state<yc,r.state=Do,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function RE(e){return this.each(function(){IE(this,e)})}function OE(e,t){var n,r;return function(){var i=vn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function qE(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=vn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function GE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=rn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?OE:qE)(n,e,t))}function Gf(e,t,n){var r=e._id;return e.each(function(){var i=vn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return rn(i,r).value[t]}}function $y(e,t){var n;return(typeof t=="number"?Un:t instanceof ga?dc:(n=ga(t))?(t=n,dc):AE)(e,t)}function zE(e){return function(){this.removeAttribute(e)}}function UE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function HE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function WE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function VE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function YE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function jE(e,t){var n=vs(e),r=n==="transform"?TE:$y;return this.attrTween(e,typeof t=="function"?(n.local?YE:VE)(n,r,Gf(this,"attr."+e,t)):t==null?(n.local?UE:zE)(n):(n.local?WE:HE)(n,r,t))}function XE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ZE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function KE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ZE(e,a)),n}return i._value=t,i}function QE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&XE(e,a)),n}return i._value=t,i}function JE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=vs(e);return this.tween(n,(r.local?KE:QE)(r,t))}function eC(e,t){return function(){qf(this,e).delay=+t.apply(this,arguments)}}function tC(e,t){return t=+t,function(){qf(this,e).delay=t}}function nC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eC:tC)(t,e)):rn(this.node(),t).delay}function rC(e,t){return function(){vn(this,e).duration=+t.apply(this,arguments)}}function iC(e,t){return t=+t,function(){vn(this,e).duration=t}}function aC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rC:iC)(t,e)):rn(this.node(),t).duration}function oC(e,t){if(typeof t!="function")throw new Error;return function(){vn(this,e).ease=t}}function uC(e){var t=this._id;return arguments.length?this.each(oC(t,e)):rn(this.node(),t).ease}function sC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;vn(this,e).ease=n}}function lC(e){if(typeof e!="function")throw new Error;return this.each(sC(this._id,e))}function cC(e){typeof e!="function"&&(e=fy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new In(r,this._parents,this._name,this._id)}function fC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new In(o,this._parents,this._name,this._id)}function hC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function dC(e,t,n){var r,i,a=hC(t)?qf:vn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function mC(e,t){var n=this._id;return arguments.length<2?rn(this.node(),n).on.on(e):this.each(dC(n,e,t))}function pC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bC(){return this.on("end.remove",pC(this._id))}function gC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lf(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Ms(l[h],t,n,h,l,rn(c,n)));return new In(a,this._parents,t,n)}function yC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=cy(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=rn(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&Ms(d,t,n,p,h,m);a.push(h),o.push(c)}return new In(a,o,t,n)}var wC=Ya.prototype.constructor;function vC(){return new wC(this._groups,this._parents)}function _C(e,t){var n,r,i;return function(){var a=hi(this,e),o=(this.style.removeProperty(e),hi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Dy(e){return function(){this.style.removeProperty(e)}}function MC(e,t,n){var r,i=n+"",a;return function(){var o=hi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function xC(e,t,n){var r,i,a;return function(){var o=hi(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),hi(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function PC(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=vn(this,e),l=s.on,c=s.value[a]==null?u||(u=Dy(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function AC(e,t,n){var r=(e+="")=="transform"?CE:$y;return t==null?this.styleTween(e,_C(e,r)).on("end.style."+e,Dy(e)):typeof t=="function"?this.styleTween(e,xC(e,r,Gf(this,"style."+e,t))).each(PC(this._id,e)):this.styleTween(e,MC(e,r,t),n).on("end.style."+e,null)}function SC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function EC(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&SC(e,o,n)),r}return a._value=t,a}function CC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,EC(e,t,n??""))}function TC(e){return function(){this.textContent=e}}function kC(e){return function(){var t=e(this);this.textContent=t??""}}function $C(e){return this.tween("text",typeof e=="function"?kC(Gf(this,"text",e)):TC(e==null?"":e+""))}function DC(e){return function(t){this.textContent=e.call(this,t)}}function NC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&DC(i)),t}return r._value=e,r}function BC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,NC(e))}function FC(){for(var e=this._name,t=this._id,n=Ny(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=rn(s,t);Ms(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new In(r,this._parents,e,n)}function LC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=vn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var IC=0;function In(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ny(){return++IC}var ar=Ya.prototype;In.prototype={constructor:In,select:gC,selectAll:yC,filter:cC,merge:fC,selection:vC,transition:FC,call:ar.call,nodes:ar.nodes,node:ar.node,size:ar.size,empty:ar.empty,each:ar.each,on:mC,attr:jE,attrTween:JE,style:AC,styleTween:CC,text:$C,textTween:BC,remove:bC,tween:GE,delay:nC,duration:aC,ease:uC,easeVarying:lC,end:LC,[Symbol.iterator]:ar[Symbol.iterator]};function RC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var OC={time:null,delay:0,duration:250,ease:RC};function qC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function GC(e){var t,n;e instanceof In?(t=e._id,e=e._name):(t=Ny(),(n=OC).time=Of(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&Ms(s,e,t,l,o,n||qC(s,t));return new In(r,this._parents,e,t)}Ya.prototype.interrupt=RE;Ya.prototype.transition=GC;function Ui(e,t,n){this.k=e,this.x=t,this.y=n}Ui.prototype={constructor:Ui,scale:function(e){return e===1?this:new Ui(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ui(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ui.prototype;var zC={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,u="",s,l,c=0;for(;c<r.length;)o=i.indexOf(r.charAt(c++))<<18|i.indexOf(r.charAt(c++))<<12|(s=i.indexOf(r.charAt(c++)))<<6|(l=i.indexOf(r.charAt(c++))),u+=s===64?String.fromCharCode(o>>16&255):l===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return u},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(u){i(n.Uint8(new Uint8Array(u.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let u=0;u<a;u++)o[u]=i.charCodeAt(u);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(s){return this.pointer+=s,this.pointer},readInt:function(s){if(s=Math.min(s,this.data.byteLength-this.pointer),s<1)return-1;let l=0;if(s>1)for(let c=1;c<=s-1;c++)l+=this.data.getUint8(this.pointer)*Math.pow(256,s-c),this.pointer++;return l+=this.data.getUint8(this.pointer),this.pointer++,l},readStr:function(s){let l="";for(let c=1;c<=s;c++)l+=String.fromCharCode(this.readInt(1));return l},readIntVLV:function(){let s=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)s=this.readInt(1);else{let l=[];for(;this.data.getUint8(this.pointer)>=128;)l.push(this.readInt(1)-128);let c=this.readInt(1);for(let f=1;f<=l.length;f++)s+=l[l.length-f]*Math.pow(128,f);s+=c}return s}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),u=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=u):a.timeDivision=o*256+u;for(let s=1;s<=a.tracks;s++){a.track[s-1]={event:[]};let l=i.readInt(4);if(l===-1)break;if(l!==1297379947)return!1;i.readInt(4);let c=0,f=!1,h,d;for(;!f&&(c++,a.track[s-1].event[c-1]={},a.track[s-1].event[c-1].deltaTime=i.readIntVLV(),h=i.readInt(1),h!==-1);)if(h>=128?d=h:(h=d,i.movePointer(-1)),h===255){a.track[s-1].event[c-1].type=255,a.track[s-1].event[c-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[s-1].event[c-1].metaType){case 47:case-1:f=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[s-1].event[c-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[s-1].event[c-1].data=i.readInt(m);break;case 84:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1),a.track[s-1].event[c-1].data[4]=i.readInt(1);break;case 88:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,m)),(this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)&&(i.readInt(m),a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(h=h.toString(16).split(""),h[1]||h.unshift("0"),a.track[s-1].event[c-1].type=parseInt(h[0],16),a.track[s-1].event[c-1].channel=parseInt(h[1],16),a.track[s-1].event[c-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].type,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1){let m=i.readIntVLV();a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[s-1].event[c-1].data=i.readInt(1);break;case-1:f=!0;break;default:if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(zC);function By(e){return 1/(e/60)}const Fy=[],UC=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of UC)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;Fy.push({type:e,dots:t,duration:n})}Fy.sort((e,t)=>e.duration-t.duration);class le{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>oy(r).pitch),this.stringCount=n.length}}new le("E stand.",["E2","A2","D3","G3","B3","E4"]),new le("Drop D",["D2","A2","D3","G3","B3","E4"]),new le("Drop C",["C2","G2","C3","F3","A3","D4"]),new le("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new le("1 down",["D2","G2","C3","F3","A3","D4"]),new le("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new le("2 down",["C2","F2","A#2","D#3","G3","C4"]),new le("DADGAG",["D2","A2","D3","G3","A3","D4"]),new le("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new le("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new le("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new le("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new le("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new le("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new le("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new le("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new le("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new le("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new le("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new le("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new le("E stand.",["E1","A1","D2","G2"]),new le("Drop D",["D1","A1","D2","G2"]),new le("1/2 down",["D#1","G#1","C#2","F#2"]),new le("1 down",["D1","G1","C2","F2"]),new le("1 1/2 down",["C#1","F#1","B1","E2"]),new le("2 down",["C1","F1","A#1","D#2"]),new le("B stand.",["B0","E1","A1","D2","G2"]),new le("Drop A",["A0","D1","A1","D2","G2"]),new le("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new le("1 down",["A0","D1","G1","C2","F2"]),new le("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new le("2 down",["G0","C1","F1","A#1","D#2"]),new le("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new le("Drop E",["E0","A0","D1","A1","D2","G2"]),new le("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new le("1 down",["E1","A0","D1","G1","C2","F2"]),new le("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new le("2 down",["D0","G0","C1","F1","A#1","D#2"]),new le("Hawaii",["G4","C4","E4","A4"]),new le("Low G",["G3","C4","E4","A4"]),new le("D-tuning",["A4","D4","F#4","B4"]),new le("Canadian",["A3","D4","F#4","B4"]),new le("Bariton",["D3","G3","B3","E4"]);var Eu=(e,t)=>Array(Math.abs(t)+1).join(e);function Ly(e){return e!==null&&typeof e=="object"&&typeof e.name=="string"}function Iy(e){return e!==null&&typeof e=="object"&&typeof e.step=="number"&&typeof e.alt=="number"}var Ry=[0,2,4,-1,1,3,5],Oy=Ry.map(e=>Math.floor(e*7/12));function qy(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=Ry[t]+7*n;if(r===void 0)return[i*a];const o=r-Oy[t]-4*n;return[i*a,i*o]}var HC=[3,0,4,1,5,2,6];function WC(e){const[t,n,r]=e,i=HC[VC(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+Oy[i];return{step:i,alt:a,oct:o,dir:r}}function VC(e){const t=(e+1)%7;return t<0?7+t:t}var Gy={empty:!0,name:"",pc:"",acc:""},p0=new Map,YC=e=>"CDEFGAB".charAt(e),jC=e=>e<0?Eu("b",-e):Eu("#",e),XC=e=>e[0]==="b"?-e.length:e.length;function wa(e){const t=JSON.stringify(e),n=p0.get(t);if(n)return n;const r=typeof e=="string"?eT(e):Iy(e)?wa(tT(e)):Ly(e)?wa(e.name):Gy;return p0.set(t,r),r}var ZC=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function KC(e){const t=ZC.exec(e);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}function QC(e){return wa(WC(e))}var JC=(e,t)=>(e%t+t)%t,dl=[0,2,4,5,7,9,11];function eT(e){const t=KC(e);if(t[0]===""||t[3]!=="")return Gy;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=XC(r),u=i.length?+i:void 0,s=qy({step:a,alt:o,oct:u}),l=n+r+i,c=n+r,f=(dl[a]+o+120)%12,h=u===void 0?JC(dl[a]+o,12)-12*99:dl[a]+o+12*(u+1),d=h>=0&&h<=127?h:null,m=u===void 0?null:Math.pow(2,(h-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:f,coord:s,freq:m,height:h,letter:n,midi:d,name:l,oct:u,pc:c,step:a}}function tT(e){const{step:t,alt:n,oct:r}=e,i=YC(t);if(!i)return"";const a=i+jC(n);return r||r===0?a+r:a}var wc={empty:!0,name:"",acc:""},nT="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",rT="(AA|A|P|M|m|d|dd)([-+]?\\d+)",iT=new RegExp("^"+nT+"|"+rT+"$");function aT(e){const t=iT.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var b0={};function Cu(e){return typeof e=="string"?b0[e]||(b0[e]=oT(e)):Iy(e)?Cu(sT(e)):Ly(e)?Cu(e.name):wc}var g0=[0,2,4,5,7,9,11],zy="PMMPPMM";function oT(e){const t=aT(e);if(t[0]==="")return wc;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=zy[i];if(a==="M"&&r==="P")return wc;const o=a==="M"?"majorable":"perfectable",u=""+n+r,s=n<0?-1:1,l=n===8||n===-8?n:s*(i+1),c=uT(o,r),f=Math.floor((Math.abs(n)-1)/7),h=s*(g0[i]+c+12*f),d=(s*(g0[i]+c)%12+12)%12,m=qy({step:i,alt:c,oct:f,dir:s});return{empty:!1,name:u,num:n,q:r,step:i,alt:c,dir:s,type:o,simple:l,semitones:h,chroma:d,coord:m,oct:f}}function uT(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function sT(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,u=i<0?"-":"",s=zy[t]==="M"?"majorable":"perfectable";return u+o+lT(s,n)}function lT(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?Eu("A",t):Eu("d",e==="perfectable"?t:t+1)}function cT(e,t){const n=wa(e),r=Array.isArray(t)?t:Cu(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return QC(a).name}function Uy(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var Qn={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Hy=e=>Number(e).toString(2),y0=e=>parseInt(e,2),fT=/^[01]{12}$/;function Wy(e){return fT.test(e)}var hT=e=>typeof e=="number"&&e>=0&&e<=4095,dT=e=>e&&Wy(e.chroma),w0={[Qn.chroma]:Qn};function zf(e){const t=Wy(e)?e:hT(e)?Hy(e):Array.isArray(e)?yT(e):dT(e)?e.chroma:Qn.chroma;return w0[t]=w0[t]||gT(t)}var mT=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function pT(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(mT[n]);return t}function bT(e){const t=e.split("");return t.map((n,r)=>Uy(r,t).join(""))}function gT(e){const t=y0(e),n=bT(e).map(y0).filter(a=>a>=2048).sort()[0],r=Hy(n),i=pT(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function yT(e){if(e.length===0)return Qn.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=wa(e[r]),t.empty&&(t=Cu(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var wT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],vT=wT;({...Qn});var Vy=[],No={};function _T(e,t,n){const r=xT(e),i={...zf(e),name:n||"",quality:r,intervals:e,aliases:t};Vy.push(i),i.name&&(No[i.name]=i),No[i.setNum]=i,No[i.chroma]=i,i.aliases.forEach(a=>MT(i,a))}function MT(e,t){No[t]=e}function xT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}vT.forEach(([e,t,n])=>_T(e.split(" "),n.split(" "),t));Vy.sort((e,t)=>e.setNum-t.setNum);var PT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],AT=PT;({...Qn});var Yy=[],Bo={};function ST(e,t,n){const r=CT(e),i={...zf(e),name:n||"",quality:r,intervals:e,aliases:t};Yy.push(i),i.name&&(Bo[i.name]=i),Bo[i.setNum]=i,Bo[i.chroma]=i,i.aliases.forEach(a=>ET(i,a))}function ET(e,t){Bo[t]=e}function CT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}AT.forEach(([e,t,n])=>ST(e.split(" "),n.split(" "),t));Yy.sort((e,t)=>e.setNum-t.setNum);var TT=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],kT=TT,$T={...Qn,intervals:[],aliases:[]},Zi={};function DT(e){return Zi[e]||$T}function NT(e,t,n=[]){const r={...zf(e),name:t,intervals:e,aliases:n};return Zi[r.name]=r,Zi[r.setNum]=r,Zi[r.chroma]=r,r.aliases.forEach(i=>BT(r,i)),r}function BT(e,t){Zi[t]=e}kT.forEach(([e,t,...n])=>NT(e.split(" "),t,n));var Uf=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],v0={...Qn,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},FT=Uf.map(LT),vc={};FT.forEach(e=>{vc[e.name]=e,e.aliases.forEach(t=>{vc[t]=e})});function jy(e){return typeof e=="string"?vc[e.toLowerCase()]||v0:e&&e.name?jy(e.name):v0}function LT(e){const[t,n,r,i,a,o,u]=e,s=u?[u]:[],l=Number(n).toString(2);return{empty:!1,intervals:DT(i).intervals,modeNum:t,chroma:l,normalized:l,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:s}}function Xy(e){return(t,n)=>{const r=jy(t);if(r.empty)return[];const i=Uy(r.modeNum,e),a=r.intervals.map(o=>cT(n,o));return i.map((o,u)=>a[u]+o)}}Xy(Uf.map(e=>e[4]));Xy(Uf.map(e=>e[5]));class Gn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>oy(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;const s=EA(i).name;n.set(i,{number:a,letterString:`${s}${o}`})}return[...n.values()].map(r=>r.letterString)}}new Gn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Gn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Gn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Gn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Gn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Gn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Gn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Gn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function IT(e,t=1){const n=My(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>IT(e,.5));const RT=dc("black","steelblue");Array.from({length:12}).map((e,t)=>RT(t/11));function OT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px"),qe(t,"width",e[0]+"px"),qe(t,"margin","auto")},m(a,o){Q(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i),o&1&&qe(t,"width",a[0]+"px")},i:we,o:we,d(a){a&&Z(t),e[4](null)}}}function qT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;en(()=>{const s=[...new Set(r)],l=s.map((f,h)=>h===0?0:f-s[h-1]),c=zt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},x:{label:"beat"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[ty(l,{x:(f,h)=>h+1,fill:f=>f})]});n(2,o.textContent="",o),o.appendChild(c)});function u(s){ut[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Fo extends Je{constructor(t){super(),Qe(this,t,qT,OT,Ke,{pattern:3,width:0,height:1})}}function GT(e,t,n){const r=e.slice();return r[16]=t[n],r}function zT(e){let t;return{c(){t=k("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],rt(t,t.__value)},m(n,r){Q(n,t,r)},p:we,d(n){n&&Z(t)}}}function UT(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b,v,w,_,M,x,C,E,$,A,L=Mt(["single note","single beat","only snare","beat 5"]),O=[];for(let T=0;T<4;T+=1)O[T]=zT(GT(e,L,T));return m=new ry({props:{audioData:e[2],sampleRate:e[3]}}),g=new To({props:{audioData:e[2],width:ki,height:$i}}),b=new mA({props:{pattern:e[4],width:ki,height:$i}}),w=new gA({props:{pattern:e[4],width:ki,height:$i}}),M=new vA({props:{pattern:e[4],width:ki,height:$i}}),C=new Fo({props:{pattern:e[4],width:ki,height:$i}}),{c(){t=k("main"),n=k("h2"),n.textContent="Playground",r=R(),i=k("div"),a=k("label"),o=Pe(`error mode:
      `),u=k("select");for(let T=0;T<4;T+=1)O[T].c();s=R(),l=k("label"),c=Pe(`error severity (in seconds):
      `),f=k("input"),h=R(),d=k("div"),Ee(m.$$.fragment),p=R(),Ee(g.$$.fragment),y=R(),Ee(b.$$.fragment),v=R(),Ee(w.$$.fragment),_=R(),Ee(M.$$.fragment),x=R(),Ee(C.$$.fragment),e[0]===void 0&&Qi(()=>e[5].call(u)),B(a,"class","svelte-1sot113"),B(f,"type","number"),B(f,"min","-0.5"),B(f,"max","0.5"),B(f,"step","0.01"),B(l,"class","svelte-1sot113"),B(d,"class","stimuli svelte-1sot113")},m(T,S){Q(T,t,S),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u);for(let I=0;I<4;I+=1)O[I]&&O[I].m(u,null);Ro(u,e[0],!0),P(i,s),P(i,l),P(l,c),P(l,f),rt(f,e[1]),P(t,h),P(t,d),Ae(m,d,null),P(d,p),Ae(g,d,null),P(d,y),Ae(b,d,null),P(d,v),Ae(w,d,null),P(d,_),Ae(M,d,null),P(d,x),Ae(C,d,null),E=!0,$||(A=[je(u,"change",e[5]),je(f,"input",e[6])],$=!0)},p(T,[S]){S&1&&Ro(u,T[0]),S&2&&Xr(f.value)!==T[1]&&rt(f,T[1]);const I={};S&4&&(I.audioData=T[2]),S&8&&(I.sampleRate=T[3]),m.$set(I);const ne={};S&4&&(ne.audioData=T[2]),g.$set(ne);const te={};S&16&&(te.pattern=T[4]),b.$set(te);const K={};S&16&&(K.pattern=T[4]),w.$set(K);const q={};S&16&&(q.pattern=T[4]),M.$set(q);const G={};S&16&&(G.pattern=T[4]),C.$set(G)},i(T){E||(X(m.$$.fragment,T),X(g.$$.fragment,T),X(b.$$.fragment,T),X(w.$$.fragment,T),X(M.$$.fragment,T),X(C.$$.fragment,T),E=!0)},o(T){ae(m.$$.fragment,T),ae(g.$$.fragment,T),ae(b.$$.fragment,T),ae(w.$$.fragment,T),ae(M.$$.fragment,T),ae(C.$$.fragment,T),E=!1},d(T){T&&Z(t),ur(O,T),Se(m),Se(g),Se(b),Se(w),Se(M),Se(C),$=!1,gn(A)}}}let ki=600,$i=100,HT=120;const _0=4;function WT(e,t,n){let r="beat 5",i=0,a=By(HT),o=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const u=_0*a;let s=null,l,c=[];const f=async()=>{o=await Promise.all(o.map(async y=>({...y,times:y.beats.map(b=>a*(b-1)),timesOriginal:y.beats.map(b=>a*(b-1)),audioBuffer:await eg(y.sample)})))},h=(y="single note",b=0)=>{if(b===0)return o;console.log(`Adding error ${y} ${b}`);const v=d([o]),w=v.filter(x=>x.instrument==="snare")[0],_=v.filter(x=>x.instrument==="hihat")[0],M=v.filter(x=>x.instrument==="bass")[0];return y==="single note"?w.times[1]=w.timesOriginal[1]+b:y==="single beat"?(w.times[1]=w.timesOriginal[1]+b,_.times[6]=_.timesOriginal[6]+b):y==="only snare"?(w.times[0]=w.timesOriginal[0]+b,w.times[1]=w.timesOriginal[1]+b):y==="beat 5"&&(M.times[1]=M.timesOriginal[1]+b,_.times[4]=_.timesOriginal[4]+b),v},d=y=>{console.log(`concat ${y.length} patterns`);const b=y[0].map(v=>({...v,beats:[...v.beats],times:[...v.times],timesOriginal:[...v.timesOriginal]}));for(let v=1;v<y.length;v++){const w=y[v];for(const _ of w){const M=b.filter(x=>x.instrument===_.instrument)[0];M.beats=[...M.beats,..._.beats.map(x=>x+v*_0)],M.times=[...M.times,..._.times.map(x=>x+v*u)],M.timesOriginal=[...M.timesOriginal,..._.timesOriginal.map(x=>x+v*u)]}}return b},m=async(y,b)=>{if(!o[0].audioBuffer)return;const w=[h(y,b)],_=d(w);n(4,c=_.map(M=>M.times).flat().sort()),_.map(M=>M.times.map(x=>({time:x,instr:M.instrument}))).flat(1/0).sort((M,x)=>{M.time-x.time}),n(3,l=_[0].audioBuffer.sampleRate),n(2,s=Jl(_,u*w.length+.1,l)),_.map(M=>{const x=Jl([M],u*w.length+.1,l);return{instr:M.instrument,audio:x}})};va(async()=>{await f(),m()});function p(){r=s1(this),n(0,r)}function g(){i=Xr(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&m(r,i)},[r,i,s,l,c,p,g]}class VT extends Je{constructor(t){super(),Qe(this,t,WT,UT,Ke,{})}}function YT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px")},m(a,o){Q(a,t,o),P(t,n),e[8](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i)},i:we,o:we,d(a){a&&Z(t),e[8](null)}}}function jT(e,t,n){let{title:r=void 0}=t,{final:i=void 0}=t,{width:a=600}=t,{height:o=180}=t,{data:u}=t,{x:s=(h,d)=>d}=t,{y:l=h=>h}=t,c;en(()=>{console.log({final:i}),n(2,c.textContent="",c);const h=zt({title:r,width:a,height:o,x:{domain:[0,70]},marks:[uA(u,{x:s,y:l,stroke:"#ccc"}),ws(u,{x:s,y:l,fill:"#aaa",r:2,tip:!0}),vu([0]),vu([i],{stroke:"#88888888"}),bs([i],{x:65,y:i,dy:-7,text:d=>`final: ${d.toFixed(3)}`})]});c.appendChild(h)});function f(h){ut[h?"unshift":"push"](()=>{c=h,n(2,c)})}return e.$$set=h=>{"title"in h&&n(3,r=h.title),"final"in h&&n(4,i=h.final),"width"in h&&n(0,a=h.width),"height"in h&&n(1,o=h.height),"data"in h&&n(5,u=h.data),"x"in h&&n(6,s=h.x),"y"in h&&n(7,l=h.y)},[a,o,c,r,i,u,s,l,f]}class XT extends Je{constructor(t){super(),Qe(this,t,jT,YT,Ke,{title:3,final:4,width:0,height:1,data:5,x:6,y:7})}}var Zy={exports:{}};(function(e,t){(function(n,r){r()})(Si,function(){function n(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,c,f){var h=new XMLHttpRequest;h.open("GET",l),h.responseType="blob",h.onload=function(){s(h.response,c,f)},h.onerror=function(){console.error("could not download file")},h.send()}function i(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Si=="object"&&Si.global===Si?Si:void 0,u=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(l,c,f){var h=o.URL||o.webkitURL,d=document.createElement("a");c=c||l.name||"download",d.download=c,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?a(d):i(d.href)?r(l,c,f):a(d,d.target="_blank")):(d.href=h.createObjectURL(l),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,f){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,f),c);else if(i(l))r(l,c,f);else{var h=document.createElement("a");h.href=l,h.target="_blank",setTimeout(function(){a(h)})}}:function(l,c,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof l=="string")return r(l,c,f);var d=l.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||u)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=p?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},g.readAsDataURL(l)}else{var y=o.URL||o.webkitURL,b=y.createObjectURL(l);h?h.location=b:location.href=b,h=null,setTimeout(function(){y.revokeObjectURL(b)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s})})(Zy);var ZT=Zy.exports;const M0=Jb(ZT);function KT(e){let t,n,r;return{c(){t=k("div"),B(t,"width",n=e[0]+"px"),B(t,"height",r=e[1]+"px")},m(i,a){Q(i,t,a),e[6](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&B(t,"width",n),a&2&&r!==(r=i[1]+"px")&&B(t,"height",r)},i:we,o:we,d(i){i&&Z(t),e[6](null)}}}function QT(e,t,n){let{data:r}=t,{domain:i}=t,{title:a=""}=t,{width:o=800}=t,{height:u=100}=t,s;en(()=>{const c=zt({width:o,height:u,marginLeft:70,marginRight:10,x:{label:a,domain:i},y:{axis:!1,type:"band"},marks:[Ff(r,{x:f=>f}),bs(r,{x:f=>f,dx:7,y:(f,h)=>h,text:(f,h)=>`P${h+1}`})]});n(2,s.textContent="",s),s.appendChild(c)});function l(c){ut[c?"unshift":"push"](()=>{s=c,n(2,s)})}return e.$$set=c=>{"data"in c&&n(3,r=c.data),"domain"in c&&n(4,i=c.domain),"title"in c&&n(5,a=c.title),"width"in c&&n(0,o=c.width),"height"in c&&n(1,u=c.height)},[o,u,s,r,i,a,l]}class JT extends Je{constructor(t){super(),Qe(this,t,QT,KT,Ke,{data:3,domain:4,title:5,width:0,height:1})}}function ek(e){let t,n,r;return{c(){t=k("div"),B(t,"width",n=e[0]+"px"),B(t,"height",r=e[1]+"px")},m(i,a){Q(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&B(t,"width",n),a&2&&r!==(r=i[1]+"px")&&B(t,"height",r)},i:we,o:we,d(i){i&&Z(t),e[5](null)}}}function tk(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;en(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.finals)})),c=zt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[ws(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Bf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Sf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Fu(l),m=1.96*($u(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){ut[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class nk extends Je{constructor(t){super(),Qe(this,t,tk,ek,Ke,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function rk(e){let t,n,r;return{c(){t=k("div"),B(t,"width",n=e[0]+"px"),B(t,"height",r=e[1]+"px")},m(i,a){Q(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&B(t,"width",n),a&2&&r!==(r=i[1]+"px")&&B(t,"height",r)},i:we,o:we,d(i){i&&Z(t),e[5](null)}}}function ik(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;en(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.trialCounts)})),c=zt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[ws(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Bf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Sf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Fu(l),m=1.96*($u(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){ut[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class ak extends Je{constructor(t){super(),Qe(this,t,ik,rk,Ke,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function x0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function ok(e,t,n,r,i,a){const o=new Float64Array(a),u=(a-1)/(i-r);for(let s=0;s<e.length;++s){const l=e[s],c=t(l,s,e),f=n(l,s,e);if(!(Number.isFinite(c)&&Number.isFinite(f)))continue;const h=(c-r)*u,d=Math.floor(h),m=d+1;0<=d&&m<a?(o[d]+=(m-h)*f,o[m]+=(h-d)*f):d===-1?o[m]+=(h-d)*f:m===a&&(o[d]+=(m-h)*f)}return o}function P0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);uk(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,u=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:u}}function uk(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),u=.6318/n,s=1.997/n,l=Float64Array.of(-a*Math.cos(u),a*Math.sin(u),-a*Math.cos(-u),a*Math.sin(-u),-o*Math.cos(s),o*Math.sin(s),-o*Math.cos(-s),o*Math.sin(-s)),c=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(f[m]=l[m]*f[m-2]-l[m+1]*f[m-1],f[m+1]=l[m]*f[m-1]+l[m+1]*f[m-2],d=m-2;d>0;d-=2)f[d]+=l[m]*f[d-2]-l[m+1]*f[d-1],f[d+1]+=l[m]*f[d-1]+l[m+1]*f[d-2];for(d=0;d<=m;d+=2)f[d]+=i[m]*h[d]-i[m+1]*h[d+1],f[d+1]+=i[m]*h[d+1]+i[m+1]*h[d];for(h[m+2]=l[m]*h[m]-l[m+1]*h[m+1],h[m+3]=l[m]*h[m+1]+l[m+1]*h[m],d=m;d>0;d-=2)h[d]+=l[m]*h[d-2]-l[m+1]*h[d-1],h[d+1]+=l[m]*h[d-1]+l[m+1]*h[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=f[d]/c,e[m+1]=h[d+2]}function sk(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),u=i,s=lk){const l=r*2,c=r*3,f=r*4,h=r*n;let d,m;for(s(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=f;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-l]+e.b_causal[3]*t[d-c]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(s(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=h-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+l]+e.b_anticausal[3]*t[d+c]+e.b_anticausal[4]*t[d+f]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)u[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)u[d]=Math.max(0,i[m]+a[n-m-1]);return u}function lk(e,t,n,r,i,a,o,u,s,l){const c=Math.abs(r)*n,f=r<0?c+r:0;let h,d,m;for(d=0;d<u;++d)for(l[d]=d<=a?i[d]:0,m=1;m<=u&&m<=d;++m)l[d]-=o[m]*l[d-m];for(m=0;m<u;++m)for(e[m]=0,d=1;d<=m;++d)h=f+r*d,h>=0&&h<c&&(e[m]+=l[m-d]*t[h]);const p=t[f];if(p>0)for(m=0;m<u;++m)e[m]+=l[m]*p}function ck(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const u=t(e[o],o,e);u!=null&&(i===void 0?u>=u&&(i=a=u):(u<i&&(i=u),u>a&&(a=u)))}return[i-n,a+n]}function fk(e,t){const n=e.map(t).filter(l=>l!=null&&l>=l);n.sort((l,c)=>l-c);const r=hk(n),i=A0(n,.25),a=A0(n,.75),o=n.length,u=(a-i)/1.34;return 1.06*(Math.min(r,u)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function hk(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const u=e[o];r=u-i,i+=r/++n,a+=r*(u-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function A0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function dk(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=x0(t.x,y=>y),o=x0(t.weight,()=>1/e.length);let u=t.bandwidth??n*fk(e,a);const[s,l]=t.extent??ck(e,a,r*u),c=ok(e,a,o,s,l,i),f=(l-s)/(i-1),h=c.some(y=>y<0);let d=P0(u/f,h),m;function*p(y="x",b="y"){const v=g.grid(),w=1/f;for(let _=0;_<i;++_)yield{[y]:s+_*f,[b]:v[_]*w}}const g={[Symbol.iterator]:p,points:p,grid:()=>m||(m=sk(d,c,i)),extent:()=>[s,l],bandwidth(y){return arguments.length?(y!==u&&(u=y,m=null,d=P0(u/f,h)),g):u}};return g}function mk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px")},m(a,o){Q(a,t,o),P(t,n),e[10](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i)},i:we,o:we,d(a){a&&Z(t),e[10](null)}}}function pk(e,t,n){let r,{values:i}=t,{title:a=""}=t,{xLabel:o="some value"}=t,{xDomain:u=void 0}=t,{width:s=1e3}=t,{height:l=100}=t,{bandwidth:c=.25}=t,{bins:f=256}=t,{pad:h=4}=t,d;en(()=>{const p=[...r.bandwidth(c)];n(2,d.textContent="",d);const g=zt({width:s,height:l,title:a,style:{background:"none"},grid:!0,x:{label:o,domain:u},y:{label:"density",type:"linear"},marks:[YP(p,{x:"x",y:"y",fill:"#ccc"}),Ff(i,{x:y=>y,strokeWidth:.5}),vu([0])]});d.appendChild(g)});function m(p){ut[p?"unshift":"push"](()=>{d=p,n(2,d)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,a=p.title),"xLabel"in p&&n(5,o=p.xLabel),"xDomain"in p&&n(6,u=p.xDomain),"width"in p&&n(0,s=p.width),"height"in p&&n(1,l=p.height),"bandwidth"in p&&n(7,c=p.bandwidth),"bins"in p&&n(8,f=p.bins),"pad"in p&&n(9,h=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=dk(i,{bandwidth:c,pad:h,bins:f}))},[s,l,d,i,a,o,u,c,f,h,m]}class bk extends Je{constructor(t){super(),Qe(this,t,pk,mk,Ke,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function gk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),B(n,"width",r=e[0]+"px"),B(n,"height",i=e[1]+"px")},m(a,o){Q(a,t,o),P(t,n),e[13](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&B(n,"width",r),o&2&&i!==(i=a[1]+"px")&&B(n,"height",i)},i:we,o:we,d(a){a&&Z(t),e[13](null)}}}function yk(e,t,n){let{title:r=""}=t,{data:i}=t,{x:a="x"}=t,{y:o="y"}=t,{tipTitle:u=null}=t,{xLabel:s=null}=t,{yLabel:l=null}=t,{xDomain:c=void 0}=t,{yDomain:f=void 0}=t,{grid:h=!1}=t,{width:d=300}=t,{height:m=300}=t,p;en(()=>{console.log(i,a,o),n(2,p.textContent="",p);const y=zt({width:d,height:m,title:r,grid:h,style:{background:"none"},x:{label:s||(typeof a=="string"?a:"x"),domain:c},y:{label:l||(typeof o=="string"?o:"y"),domain:f},marks:[ws(i,{x:a,y:o}),O2(i,Xg({x:a,y:o,title:u})),Bf({length:1},{x1:c[0],x2:c[1],y1:f[0],y2:f[1],stroke:"#ccc"})]});p.appendChild(y)});function g(y){ut[y?"unshift":"push"](()=>{p=y,n(2,p)})}return e.$$set=y=>{"title"in y&&n(3,r=y.title),"data"in y&&n(4,i=y.data),"x"in y&&n(5,a=y.x),"y"in y&&n(6,o=y.y),"tipTitle"in y&&n(7,u=y.tipTitle),"xLabel"in y&&n(8,s=y.xLabel),"yLabel"in y&&n(9,l=y.yLabel),"xDomain"in y&&n(10,c=y.xDomain),"yDomain"in y&&n(11,f=y.yDomain),"grid"in y&&n(12,h=y.grid),"width"in y&&n(0,d=y.width),"height"in y&&n(1,m=y.height)},[d,m,p,r,i,a,o,u,s,l,c,f,h,g]}class S0 extends Je{constructor(t){super(),Qe(this,t,yk,gk,Ke,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function E0(e,t,n){const r=e.slice();return r[12]=t[n],r}function C0(e,t,n){const r=e.slice();return r[15]=t[n],r}function T0(e,t,n){const r=e.slice();return r[18]=t[n],r}function k0(e,t,n){const r=e.slice();return r[21]=t[n],r}function $0(e,t,n){const r=e.slice();return r[24]=t[n],r}function D0(e,t,n){const r=e.slice();return r[27]=t[n][0],r[28]=t[n][1],r}function N0(e){let t,n=e[27]+"",r,i,a=e[28].length+"",o,u;return{c(){t=k("p"),r=Pe(n),i=Pe(": "),o=Pe(a),u=Pe(" times")},m(s,l){Q(s,t,l),P(t,r),P(t,i),P(t,o),P(t,u)},p(s,l){l&1&&n!==(n=s[27]+"")&&Pt(r,n),l&1&&a!==(a=s[28].length+"")&&Pt(o,a)},d(s){s&&Z(t)}}}function B0(e){let t,n;return t=new bk({props:{title:`Density of final values for ${e[24][0]}`,values:e[24][1].map(z0),xLabel:"final values",xDomain:[-.2,.2],bandwidth:_k}}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=`Density of final values for ${r[24][0]}`),i&2&&(a.values=r[24][1].map(z0)),t.$set(a)},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function F0(e){let t,n=e[21].encoding+"",r,i,a,o;return a=new JT({props:{data:e[21].finals,title:e[21].encoding,domain:[0,e[2]]}}),{c(){t=k("b"),r=Pe(n),i=R(),Ee(a.$$.fragment)},m(u,s){Q(u,t,s),P(t,r),Q(u,i,s),Ae(a,u,s),o=!0},p(u,s){(!o||s&8)&&n!==(n=u[21].encoding+"")&&Pt(r,n);const l={};s&8&&(l.data=u[21].finals),s&8&&(l.title=u[21].encoding),s&4&&(l.domain=[0,u[2]]),a.$set(l)},i(u){o||(X(a.$$.fragment,u),o=!0)},o(u){ae(a.$$.fragment,u),o=!1},d(u){u&&(Z(t),Z(i)),Se(a,u)}}}function L0(e){let t,n=e[18]+"",r;return{c(){t=k("p"),r=Pe(n)},m(i,a){Q(i,t,a),P(t,r)},p(i,a){a&1&&n!==(n=i[18]+"")&&Pt(r,n)},d(i){i&&Z(t)}}}function I0(e){let t,n,r,i=e[15].demographics.internalPID+"",a,o,u=e[15].demographics.partID+"",s,l,c,f=Mt(e[15].demographics.partFeedback.split(`
`)),h=[];for(let d=0;d<f.length;d+=1)h[d]=L0(T0(e,f,d));return{c(){t=k("div"),n=k("b"),r=Pe("P"),a=Pe(i),o=R(),s=Pe(u),l=Pe(`:
        `);for(let d=0;d<h.length;d+=1)h[d].c();c=R(),qe(t,"text-align","left")},m(d,m){Q(d,t,m),P(t,n),P(n,r),P(n,a),P(t,o),P(t,s),P(t,l);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(t,null);P(t,c)},p(d,m){if(m&1&&i!==(i=d[15].demographics.internalPID+"")&&Pt(a,i),m&1&&u!==(u=d[15].demographics.partID+"")&&Pt(s,u),m&1){f=Mt(d[15].demographics.partFeedback.split(`
`));let p;for(p=0;p<f.length;p+=1){const g=T0(d,f,p);h[p]?h[p].p(g,m):(h[p]=L0(g),h[p].c(),h[p].m(t,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=f.length}},d(d){d&&Z(t),ur(h,d)}}}function R0(e){let t,n;return t=new XT({props:{title:"P"+e[12].internalPID+" "+e[12].encoding,final:e[12].final,width:vk,height:120,data:e[12].data,x:xk,y:e[7]}}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title="P"+r[12].internalPID+" "+r[12].encoding),i&2&&(a.final=r[12].final),i&2&&(a.data=r[12].data),t.$set(a)},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function wk(e){let t,n,r,i,a,o,u,s,l,c,f,h=e[0].length+"",d,m,p=e[1].length+"",g,y,b=e[4].length+"",v,w,_,M,x,C,E,$,A,L,O,T,S,I,ne,te,K,q,G,z,U,oe,ue,ie,V,Y,N,H,j,D,ge,ee,he,Me,Oe,tt=Mt(cr(e[0],O0).sort(q0)),De=[];for(let F=0;F<tt.length;F+=1)De[F]=N0(D0(e,tt,F));let Ut=Mt(cr(e[1],G0)),$e=[];for(let F=0;F<Ut.length;F+=1)$e[F]=B0($0(e,Ut,F));const Dr=F=>ae($e[F],1,1,()=>{$e[F]=null});L=new S0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),T=new S0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),K=new nk({props:{stimuli:e[3]}}),oe=new ak({props:{stimuli:e[3]}});let Ht=Mt(e[3]),J=[];for(let F=0;F<Ht.length;F+=1)J[F]=F0(k0(e,Ht,F));const _e=F=>ae(J[F],1,1,()=>{J[F]=null});let ve=Mt(e[0].filter(U0)),Te=[];for(let F=0;F<ve.length;F+=1)Te[F]=I0(C0(e,ve,F));let Ne=Mt([...e[1]].sort(H0)),se=[];for(let F=0;F<Ne.length;F+=1)se[F]=R0(E0(e,Ne,F));const We=F=>ae(se[F],1,1,()=>{se[F]=null});return{c(){t=k("main"),n=k("h2"),n.textContent="Analysis",r=R(),i=k("div"),a=k("label"),o=Pe(`Results JSONs and Prolific demographics CSV
      `),u=k("input"),s=R(),l=k("button"),l.textContent="export JSON",c=R(),f=k("div"),d=Pe(h),m=Pe(` participants completed -
    `),g=Pe(p),y=Pe(` tests -
    `),v=Pe(b),w=Pe(" filtered tests"),_=R(),M=k("div"),x=k("h3"),x.textContent="Encoding order",C=R();for(let F=0;F<De.length;F+=1)De[F].c();E=R(),$=k("div");for(let F=0;F<$e.length;F+=1)$e[F].c();A=R(),Ee(L.$$.fragment),O=R(),Ee(T.$$.fragment),S=R(),I=k("div"),ne=k("h3"),ne.textContent="Mean and CI of Final Values",te=R(),Ee(K.$$.fragment),q=R(),G=k("div"),z=k("h3"),z.textContent="Mean and CI of Trial Counts",U=R(),Ee(oe.$$.fragment),ue=R(),ie=k("div"),V=k("h3"),V.textContent="Final Values for Each Stimulus and All Participants",Y=R();for(let F=0;F<J.length;F+=1)J[F].c();N=R(),H=k("div"),j=k("h3"),j.textContent="Feedback",D=R();for(let F=0;F<Te.length;F+=1)Te[F].c();ge=R(),ee=k("div");for(let F=0;F<se.length;F+=1)se[F].c();B(u,"type","file"),B(u,"accept",".json,.csv"),u.multiple=!0},m(F,re){Q(F,t,re),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u),P(i,s),P(i,l),P(t,c),P(t,f),P(f,d),P(f,m),P(f,g),P(f,y),P(f,v),P(f,w),P(t,_),P(t,M),P(M,x),P(M,C);for(let ye=0;ye<De.length;ye+=1)De[ye]&&De[ye].m(M,null);P(t,E),P(t,$);for(let ye=0;ye<$e.length;ye+=1)$e[ye]&&$e[ye].m($,null);P(t,A),Ae(L,t,null),P(t,O),Ae(T,t,null),P(t,S),P(t,I),P(I,ne),P(I,te),Ae(K,I,null),P(t,q),P(t,G),P(G,z),P(G,U),Ae(oe,G,null),P(t,ue),P(t,ie),P(ie,V),P(ie,Y);for(let ye=0;ye<J.length;ye+=1)J[ye]&&J[ye].m(ie,null);P(t,N),P(t,H),P(H,j),P(H,D);for(let ye=0;ye<Te.length;ye+=1)Te[ye]&&Te[ye].m(H,null);P(t,ge),P(t,ee);for(let ye=0;ye<se.length;ye+=1)se[ye]&&se[ye].m(ee,null);he=!0,Me||(Oe=[je(u,"input",e[5]),je(l,"click",e[6])],Me=!0)},p(F,[re]){if((!he||re&1)&&h!==(h=F[0].length+"")&&Pt(d,h),(!he||re&2)&&p!==(p=F[1].length+"")&&Pt(g,p),(!he||re&16)&&b!==(b=F[4].length+"")&&Pt(v,b),re&1){tt=Mt(cr(F[0],O0).sort(q0));let W;for(W=0;W<tt.length;W+=1){const dt=D0(F,tt,W);De[W]?De[W].p(dt,re):(De[W]=N0(dt),De[W].c(),De[W].m(M,null))}for(;W<De.length;W+=1)De[W].d(1);De.length=tt.length}if(re&2){Ut=Mt(cr(F[1],G0));let W;for(W=0;W<Ut.length;W+=1){const dt=$0(F,Ut,W);$e[W]?($e[W].p(dt,re),X($e[W],1)):($e[W]=B0(dt),$e[W].c(),X($e[W],1),$e[W].m($,null))}for(jt(),W=Ut.length;W<$e.length;W+=1)Dr(W);Xt()}const ye={};re&1&&(ye.data=F[0]),L.$set(ye);const _t={};re&1&&(_t.data=F[0]),T.$set(_t);const an={};re&8&&(an.stimuli=F[3]),K.$set(an);const Xa={};if(re&8&&(Xa.stimuli=F[3]),oe.$set(Xa),re&12){Ht=Mt(F[3]);let W;for(W=0;W<Ht.length;W+=1){const dt=k0(F,Ht,W);J[W]?(J[W].p(dt,re),X(J[W],1)):(J[W]=F0(dt),J[W].c(),X(J[W],1),J[W].m(ie,null))}for(jt(),W=Ht.length;W<J.length;W+=1)_e(W);Xt()}if(re&1){ve=Mt(F[0].filter(U0));let W;for(W=0;W<ve.length;W+=1){const dt=C0(F,ve,W);Te[W]?Te[W].p(dt,re):(Te[W]=I0(dt),Te[W].c(),Te[W].m(H,null))}for(;W<Te.length;W+=1)Te[W].d(1);Te.length=ve.length}if(re&2){Ne=Mt([...F[1]].sort(H0));let W;for(W=0;W<Ne.length;W+=1){const dt=E0(F,Ne,W);se[W]?(se[W].p(dt,re),X(se[W],1)):(se[W]=R0(dt),se[W].c(),X(se[W],1),se[W].m(ee,null))}for(jt(),W=Ne.length;W<se.length;W+=1)We(W);Xt()}},i(F){if(!he){for(let re=0;re<Ut.length;re+=1)X($e[re]);X(L.$$.fragment,F),X(T.$$.fragment,F),X(K.$$.fragment,F),X(oe.$$.fragment,F);for(let re=0;re<Ht.length;re+=1)X(J[re]);for(let re=0;re<Ne.length;re+=1)X(se[re]);he=!0}},o(F){$e=$e.filter(Boolean);for(let re=0;re<$e.length;re+=1)ae($e[re]);ae(L.$$.fragment,F),ae(T.$$.fragment,F),ae(K.$$.fragment,F),ae(oe.$$.fragment,F),J=J.filter(Boolean);for(let re=0;re<J.length;re+=1)ae(J[re]);se=se.filter(Boolean);for(let re=0;re<se.length;re+=1)ae(se[re]);he=!1},d(F){F&&Z(t),ur(De,F),ur($e,F),Se(L),Se(T),Se(K),Se(oe),ur(J,F),ur(Te,F),ur(se,F),Me=!1,gn(Oe)}}}const vk=800;let _k=.005,Mk=20;const O0=e=>e.encodingOrder,q0=(e,t)=>e[1].lenght-t[1].length,G0=e=>e.testType,z0=e=>e.final,U0=e=>e.demographics.partFeedback.trim().length>0,H0=(e,t)=>e.final-t.final,xk=(e,t)=>t;function Pk(e,t,n){let r,i,a,o,u=[],s=null;const l=async p=>{const g=[];for(const b of p.target.files)if(b.name.endsWith(".csv")){const v=await b.text();s=P5(v),console.log("p demo",s)}else{const v=await b.text();g.push(JSON.parse(v))}const y=cr(g,b=>b.demographics.partID);console.log(`${y.length} participants`,y),n(0,u=g.filter(b=>b.studyStep==="feedback").map((b,v)=>({...b,demographics:{...b.demographics,internalPID:v+1},prolificDemogr:s.filter(w=>w["Participant id"]===b.demographics.partID)[0],finalAudio:b.tests.filter(w=>w.encoding.startsWith("audio"))[0].final,finalColor:b.tests.filter(w=>w.encoding.startsWith("color"))[0].final,finalWaveform:b.tests.filter(w=>w.encoding.startsWith("waveform"))[0].final,encodingOrder:b.tests.map(w=>w.encoding).join(", ")})).filter(b=>b.prolificDemogr!==void 0)),console.log("participants",u)},c=p=>{if(p.lenght===0)return[];const g=(b,v=5)=>{const w=Math.floor(b/v)*v;return`${w}-${w+v-1}`},y=[];for(const b of p)for(const[v,w]of b.tests.entries()){let _=w.encoding;y.push({...b.demographics,partAge:b.demographics.partAge?b.demographics.partAge:g(b.prolificDemogr.Age,10),partSex:b.demographics.partGender?b.demographics.partGender:b.prolificDemogr.Sex,countryBirth:b.prolificDemogr["Country of birth"],countryResidence:b.prolificDemogr["Country of residence"],prolificApprovals:b.prolificDemogr["Total approvals"],...w,date:b.date,testType:_,testOrder:v})}return console.log("tests",y),y},f=(p,g)=>p.filter(y=>y.final<g),h=p=>p.length===0?[]:cr(p,y=>y.testType).map(([y,b])=>{const v=b.map(w=>w.final);return{encoding:y,testType:y,finals:v,finalMean:Fu(v),finalVar:Pc(v),trialCounts:b.map(w=>w.trialCount)}}),d=()=>{const p=JSON.stringify(u,void 0,2),g=new Blob([p],{type:"text/plain;charset=utf-8"});M0(g,"participants.json");const y=JSON.stringify(r,void 0,2),b=new Blob([y],{type:"text/plain;charset=utf-8"});M0(b,"tests.json")},m=p=>Math.abs(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=c(u)),e.$$.dirty&2&&n(4,i=f(r,Mk)),e.$$.dirty&2&&n(3,a=h(r)),e.$$.dirty&2&&n(2,o=It(r.map(p=>Math.abs(p.final)))),e.$$.dirty&2&&console.log("tests by enc",cr(r,p=>p.testType))},[u,r,o,a,i,l,d,m]}class Ak extends Je{constructor(t){super(),Qe(this,t,Pk,wk,Ke,{})}}function Fe(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}Fe.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};Fe.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};Fe.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};Fe.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=Ky(0,e.length-1);return this.activate(e[t]),this};Fe.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=Ky(0,e.length-1);this.activate(e[t])};Fe.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};Fe.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};Fe.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};Fe.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Fe.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};Fe.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};Fe.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};Fe.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};Fe.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};Fe.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};Fe.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};Fe.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};Fe.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};Fe.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};Fe.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};Fe.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const Hf=function(){};Hf.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};Hf.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};Fe.prototype.checkErr=new Hf;function Ky(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Lo(e,t){return new URLSearchParams(e.location.search).get(t)}function Sk(e){let t,n,r,i,a,o,u;return{c(){t=k("main"),n=k("audio"),r=R(),i=k("button"),a=Pe(e[0]),n.controls=!1},m(s,l){Q(s,t,l),P(t,n),e[5](n),P(t,r),P(t,i),P(i,a),o||(u=je(i,"click",e[2]),o=!0)},p(s,[l]){l&1&&Pt(a,s[0])},i:we,o:we,d(s){s&&Z(t),e[5](null),o=!1,u()}}}function Ek(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:a="play audio"}=t,o=null,u;const s=(f,h)=>{h&&u&&(o=t9(h,f),Qc(o,h.sampleRate,u))};va(()=>s(r,i));const l=async()=>{u&&(n(1,u.currentTime=0,u),u.play())};function c(f){ut[f?"unshift":"push"](()=>{u=f,n(1,u)})}return e.$$set=f=>{"pattern"in f&&n(3,r=f.pattern),"cachedAudio"in f&&n(4,i=f.cachedAudio),"label"in f&&n(0,a=f.label)},[a,u,l,r,i,c]}class Io extends Je{constructor(t){super(),Qe(this,t,Ek,Sk,Ke,{pattern:3,cachedAudio:4,label:0})}}function Ck(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=R(),i=k("button"),i.textContent="play audio",n.controls=!1},m(u,s){Q(u,t,s),P(t,n),e[4](n),P(t,r),P(t,i),a||(o=je(i,"click",e[1]),a=!0)},p:we,i:we,o:we,d(u){u&&Z(t),e[4](null),a=!1,o()}}}function Tk(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,a;const o=l=>{l&&a&&Qc(l,i,a)};va(()=>o(r));const u=()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(l){ut[l?"unshift":"push"](()=>{a=l,n(0,a)})}return e.$$set=l=>{"audioData"in l&&n(2,r=l.audioData),"sampleRate"in l&&n(3,i=l.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&o(r)},[a,u,r,i,s]}class W0 extends Je{constructor(t){super(),Qe(this,t,Tk,Ck,Ke,{audioData:2,sampleRate:3})}}function V0(e){let t;return{c(){t=k("div"),t.innerHTML=`<p class="svelte-rz4e1l">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-rz4e1l">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-rz4e1l">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-rz4e1l">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){Q(n,t,r)},d(n){n&&Z(t)}}}function Y0(e){let t,n,r,i,a,o,u,s,l;return i=new Io({props:{pattern:[.1,.6,1.1],cachedAudio:e[14][2].audioBuffer}}),{c(){t=k("div"),n=k("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=R(),Ee(i.$$.fragment),a=R(),o=k("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",u=R(),s=k("a"),s.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",B(n,"class","svelte-rz4e1l"),B(o,"class","svelte-rz4e1l"),B(s,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(c,f){Q(c,t,f),P(t,n),P(t,r),Ae(i,t,null),P(t,a),P(t,o),P(t,u),P(t,s),l=!0},p(c,f){const h={};f[0]&16384&&(h.cachedAudio=c[14][2].audioBuffer),i.$set(h)},i(c){l||(X(i.$$.fragment,c),l=!0)},o(c){ae(i.$$.fragment,c),l=!1},d(c){c&&Z(t),Se(i)}}}function j0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b;return{c(){t=k("div"),n=k("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=R(),i=k("div"),a=k("button"),a.textContent="+",o=R(),u=k("button"),u.textContent="-",s=R(),l=Vf("svg"),c=Vf("rect"),p=R(),g=k("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,B(n,"class","svelte-rz4e1l"),B(c,"width",f=e[0]*.52),B(c,"height",h=e[22]*2),B(c,"fill","#ccc"),B(c,"rx","8"),B(l,"width",d=e[0]*.52+"px"),B(l,"height",m=e[22]*2+"px"),B(g,"class","svelte-rz4e1l")},m(v,w){Q(v,t,w),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(t,s),P(t,l),P(l,c),P(t,p),P(t,g),y||(b=[je(a,"click",e[24]),je(u,"click",e[25])],y=!0)},p(v,w){w[0]&1&&f!==(f=v[0]*.52)&&B(c,"width",f),w[0]&4194304&&h!==(h=v[22]*2)&&B(c,"height",h),w[0]&1&&d!==(d=v[0]*.52+"px")&&B(l,"width",d),w[0]&4194304&&m!==(m=v[22]*2+"px")&&B(l,"height",m)},d(v){v&&Z(t),y=!1,gn(b)}}}function X0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b,v;return h=new Io({props:{pattern:[.1],cachedAudio:e[14][0].audioBuffer,label:"hi-hat"}}),m=new Io({props:{pattern:[.1],cachedAudio:e[14][1].audioBuffer,label:"snare drum"}}),g=new Io({props:{pattern:[.1],cachedAudio:e[14][2].audioBuffer,label:"bass drum"}}),{c(){t=k("div"),n=k("div"),n.innerHTML=`<p class="svelte-rz4e1l">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-rz4e1l">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-rz4e1l">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played together will still be played at
          the same time, but this time will be either too early or too late.
          Notes after the mistake will also be affected and be early/late, such
          that only one time interval is shorter/longer than supposed.</p>`,r=Pe(`
      This is what the pattern looks like in sheet music:
      `),i=k("div"),a=k("img"),s=R(),l=k("div"),c=k("span"),c.textContent="Click to hear the different sounds:",f=R(),Ee(h.$$.fragment),d=R(),Ee(m.$$.fragment),p=R(),Ee(g.$$.fragment),y=Pe(`
      This is what the full, correctly played pattern sounds like:
      `),b=k("div"),b.innerHTML='<audio src="drum-pattern-correct-once.wav" controls=""></audio>',B(a,"width",o=e[0]+"px"),e3(a.src,u="drum-pattern-labels3.png")||B(a,"src",u),B(a,"alt","drum pattern as sheet music"),qe(l,"display","grid"),qe(l,"grid-template-columns","repeat(4,max-content)"),qe(l,"gap","10px"),qe(l,"align-items","center")},m(w,_){Q(w,t,_),P(t,n),P(t,r),P(t,i),P(i,a),P(t,s),P(t,l),P(l,c),P(l,f),Ae(h,l,null),P(l,d),Ae(m,l,null),P(l,p),Ae(g,l,null),P(t,y),P(t,b),v=!0},p(w,_){(!v||_[0]&1&&o!==(o=w[0]+"px"))&&B(a,"width",o);const M={};_[0]&16384&&(M.cachedAudio=w[14][0].audioBuffer),h.$set(M);const x={};_[0]&16384&&(x.cachedAudio=w[14][1].audioBuffer),m.$set(x);const C={};_[0]&16384&&(C.cachedAudio=w[14][2].audioBuffer),g.$set(C)},i(w){v||(X(h.$$.fragment,w),X(m.$$.fragment,w),X(g.$$.fragment,w),v=!0)},o(w){ae(h.$$.fragment,w),ae(m.$$.fragment,w),ae(g.$$.fragment,w),v=!1},d(w){w&&Z(t),Se(h),Se(m),Se(g)}}}function Z0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,y,b,v,w,_,M,x,C,E,$,A,L,O;return{c(){t=k("div"),n=k("p"),n.textContent="Please answer the following questions about yourself:",r=R(),i=k("label"),a=k("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=R(),u=k("select"),s=k("option"),s.textContent="none",l=k("option"),l.textContent="high school",c=k("option"),c.textContent="bachelor",f=k("option"),f.textContent="master",h=k("option"),h.textContent="phd",d=R(),m=k("label"),p=k("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=R(),y=k("input"),b=R(),v=k("label"),w=k("span"),w.textContent="For how many years do you roughly play it/them?",_=R(),M=k("input"),x=R(),C=k("label"),E=k("span"),E.textContent=`How many years of experience do you have with information
          visualization?`,$=R(),A=k("input"),B(n,"class","svelte-rz4e1l"),s.__value="none",rt(s,s.__value),l.__value="highs",rt(l,l.__value),c.__value="bachelor",rt(c,c.__value),f.__value="master",rt(f,f.__value),h.__value="phd",rt(h,h.__value),e[4]===void 0&&Qi(()=>e[26].call(u)),B(i,"class","svelte-rz4e1l"),B(y,"type","text"),B(y,"placeholder","free text"),B(m,"class","svelte-rz4e1l"),B(M,"type","number"),B(M,"min","0"),B(M,"step","1"),B(v,"class","svelte-rz4e1l"),B(A,"type","number"),B(A,"min","0"),B(A,"step","1"),B(C,"class","svelte-rz4e1l"),B(t,"class","demo-form svelte-rz4e1l")},m(T,S){Q(T,t,S),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(u,s),P(u,l),P(u,c),P(u,f),P(u,h),Ro(u,e[4],!0),P(t,d),P(t,m),P(m,p),P(m,g),P(m,y),rt(y,e[5]),P(t,b),P(t,v),P(v,w),P(v,_),P(v,M),rt(M,e[6]),P(t,x),P(t,C),P(C,E),P(C,$),P(C,A),rt(A,e[7]),L||(O=[je(u,"change",e[26]),je(y,"input",e[27]),je(M,"input",e[28]),je(A,"input",e[29])],L=!0)},p(T,S){S[0]&16&&Ro(u,T[4]),S[0]&32&&y.value!==T[5]&&rt(y,T[5]),S[0]&64&&Xr(M.value)!==T[6]&&rt(M,T[6]),S[0]&128&&Xr(A.value)!==T[7]&&rt(A,T[7])},d(T){T&&Z(t),L=!1,gn(O)}}}function K0(e){let t,n,r=e[10]&&Q0(e);return{c(){r&&r.c(),t=_c()},m(i,a){r&&r.m(i,a),Q(i,t,a),n=!0},p(i,a){i[10]?r?(r.p(i,a),a[0]&1024&&X(r,1)):(r=Q0(i),r.c(),X(r,1),r.m(t.parentNode,t)):r&&(jt(),ae(r,1,1,()=>{r=null}),Xt())},i(i){n||(X(r),n=!0)},o(i){ae(r),n=!1},d(i){i&&Z(t),r&&r.d(i)}}}function Q0(e){let t,n,r=e[3]+1+"",i,a,o=e[1].length+"",u,s,l,c,f,h,d,m,p=e[9]+1+"",g,y,b,v,w,_;const M=[$k,kk],x=[];function C(E,$){return E[13]==="audio"?0:E[12]===!1?1:-1}return~(b=C(e))&&(v=x[b]=M[b](e)),{c(){t=k("p"),n=Pe("Test number "),i=Pe(r),a=Pe(" of "),u=Pe(o),s=R(),l=k("p"),l.innerHTML="The <b>5th beat</b> with a <b>hi-hat and a bass</b> note is shifted.",c=R(),f=k("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,h=R(),d=k("p"),m=Pe("Trial number "),g=Pe(p),y=R(),v&&v.c(),w=_c(),B(t,"class","svelte-rz4e1l"),B(l,"class","svelte-rz4e1l"),B(f,"class","svelte-rz4e1l"),B(d,"class","svelte-rz4e1l")},m(E,$){Q(E,t,$),P(t,n),P(t,i),P(t,a),P(t,u),Q(E,s,$),Q(E,l,$),Q(E,c,$),Q(E,f,$),Q(E,h,$),Q(E,d,$),P(d,m),P(d,g),Q(E,y,$),~b&&x[b].m(E,$),Q(E,w,$),_=!0},p(E,$){(!_||$[0]&8)&&r!==(r=E[3]+1+"")&&Pt(i,r),(!_||$[0]&2)&&o!==(o=E[1].length+"")&&Pt(u,o),(!_||$[0]&512)&&p!==(p=E[9]+1+"")&&Pt(g,p);let A=b;b=C(E),b===A?~b&&x[b].p(E,$):(v&&(jt(),ae(x[A],1,1,()=>{x[A]=null}),Xt()),~b?(v=x[b],v?v.p(E,$):(v=x[b]=M[b](E),v.c()),X(v,1),v.m(w.parentNode,w)):v=null)},i(E){_||(X(v),_=!0)},o(E){ae(v),_=!1},d(E){E&&(Z(t),Z(s),Z(l),Z(c),Z(f),Z(h),Z(d),Z(y),Z(w)),~b&&x[b].d(E)}}}function kk(e){let t,n,r,i=(e[13]==="waveform"||vo)&&J0(e),a=(e[13]==="color"||vo)&&e1(e);return{c(){i&&i.c(),t=R(),a&&a.c(),n=_c()},m(o,u){i&&i.m(o,u),Q(o,t,u),a&&a.m(o,u),Q(o,n,u),r=!0},p(o,u){o[13]==="waveform"||vo?i?(i.p(o,u),u[0]&8192&&X(i,1)):(i=J0(o),i.c(),X(i,1),i.m(t.parentNode,t)):i&&(jt(),ae(i,1,1,()=>{i=null}),Xt()),o[13]==="color"||vo?a?(a.p(o,u),u[0]&8192&&X(a,1)):(a=e1(o),a.c(),X(a,1),a.m(n.parentNode,n)):a&&(jt(),ae(a,1,1,()=>{a=null}),Xt())},i(o){r||(X(i),X(a),r=!0)},o(o){ae(i),ae(a),r=!1},d(o){o&&(Z(t),Z(n)),i&&i.d(o),a&&a.d(o)}}}function $k(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new W0({props:{audioData:e[16],sampleRate:e[18]}}),o=new W0({props:{audioData:e[17],sampleRate:e[18]}}),h=new ry({props:{audioData:e[15],sampleRate:e[18],currentTrialNumber:e[9]}}),{c(){t=k("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=R(),r=k("div"),Ee(i.$$.fragment),a=R(),Ee(o.$$.fragment),u=R(),s=k("div"),s.textContent="Example for early",l=R(),c=k("div"),c.textContent="Example for late",f=R(),Ee(h.$$.fragment),B(t,"class","svelte-rz4e1l"),B(s,"class","svelte-rz4e1l"),B(c,"class","svelte-rz4e1l"),B(r,"class","vis-example svelte-rz4e1l")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),Ae(i,r,null),P(r,a),Ae(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),Q(m,f,p),Ae(h,m,p),d=!0},p(m,p){const g={};p[0]&65536&&(g.audioData=m[16]),p[0]&262144&&(g.sampleRate=m[18]),i.$set(g);const y={};p[0]&131072&&(y.audioData=m[17]),p[0]&262144&&(y.sampleRate=m[18]),o.$set(y);const b={};p[0]&32768&&(b.audioData=m[15]),p[0]&262144&&(b.sampleRate=m[18]),p[0]&512&&(b.currentTrialNumber=m[9]),h.$set(b)},i(m){d||(X(i.$$.fragment,m),X(o.$$.fragment,m),X(h.$$.fragment,m),d=!0)},o(m){ae(i.$$.fragment,m),ae(o.$$.fragment,m),ae(h.$$.fragment,m),d=!1},d(m){m&&(Z(t),Z(n),Z(r),Z(f)),Se(i),Se(o),Se(h,m)}}}function J0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new To({props:{audioData:e[16],width:e[0]/2,height:e[22]/2}}),o=new To({props:{audioData:e[17],width:e[0]/2,height:e[22]/2}}),h=new To({props:{audioData:e[15],width:e[0],height:e[22]}}),{c(){t=k("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=R(),r=k("div"),Ee(i.$$.fragment),a=R(),Ee(o.$$.fragment),u=R(),s=k("div"),s.textContent="Example for early",l=R(),c=k("div"),c.textContent="Example for late",f=R(),Ee(h.$$.fragment),B(t,"class","svelte-rz4e1l"),B(s,"class","svelte-rz4e1l"),B(c,"class","svelte-rz4e1l"),B(r,"class","vis-example svelte-rz4e1l")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),Ae(i,r,null),P(r,a),Ae(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),Q(m,f,p),Ae(h,m,p),d=!0},p(m,p){const g={};p[0]&65536&&(g.audioData=m[16]),p[0]&1&&(g.width=m[0]/2),p[0]&4194304&&(g.height=m[22]/2),i.$set(g);const y={};p[0]&131072&&(y.audioData=m[17]),p[0]&1&&(y.width=m[0]/2),p[0]&4194304&&(y.height=m[22]/2),o.$set(y);const b={};p[0]&32768&&(b.audioData=m[15]),p[0]&1&&(b.width=m[0]),p[0]&4194304&&(b.height=m[22]),h.$set(b)},i(m){d||(X(i.$$.fragment,m),X(o.$$.fragment,m),X(h.$$.fragment,m),d=!0)},o(m){ae(i.$$.fragment,m),ae(o.$$.fragment,m),ae(h.$$.fragment,m),d=!1},d(m){m&&(Z(t),Z(n),Z(r),Z(f)),Se(i),Se(o),Se(h,m)}}}function e1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new Fo({props:{pattern:e[20],width:e[0]/2,height:e[22]*.7}}),o=new Fo({props:{pattern:e[21],width:e[0]/2,height:e[22]*.7}}),h=new Fo({props:{pattern:e[19],width:e[0],height:e[22]}}),{c(){t=k("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Brighter bars show smaller gaps (early),
            darker bars show wider gaps (late).`,n=R(),r=k("div"),Ee(i.$$.fragment),a=R(),Ee(o.$$.fragment),u=R(),s=k("div"),s.textContent="Example for early",l=R(),c=k("div"),c.textContent="Example for late",f=R(),Ee(h.$$.fragment),B(t,"class","svelte-rz4e1l"),B(s,"class","svelte-rz4e1l"),B(c,"class","svelte-rz4e1l"),B(r,"class","vis-example svelte-rz4e1l")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),Ae(i,r,null),P(r,a),Ae(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),Q(m,f,p),Ae(h,m,p),d=!0},p(m,p){const g={};p[0]&1048576&&(g.pattern=m[20]),p[0]&1&&(g.width=m[0]/2),p[0]&4194304&&(g.height=m[22]*.7),i.$set(g);const y={};p[0]&2097152&&(y.pattern=m[21]),p[0]&1&&(y.width=m[0]/2),p[0]&4194304&&(y.height=m[22]*.7),o.$set(y);const b={};p[0]&524288&&(b.pattern=m[19]),p[0]&1&&(b.width=m[0]),p[0]&4194304&&(b.height=m[22]),h.$set(b)},i(m){d||(X(i.$$.fragment,m),X(o.$$.fragment,m),X(h.$$.fragment,m),d=!0)},o(m){ae(i.$$.fragment,m),ae(o.$$.fragment,m),ae(h.$$.fragment,m),d=!1},d(m){m&&(Z(t),Z(n),Z(r),Z(f)),Se(i),Se(o),Se(h,m)}}}function t1(e){let t,n,r,i,a,o,u;return{c(){t=k("div"),n=Pe(`Almost done!
      `),r=k("p"),r.textContent="Do you have any final feedback/comments?",i=R(),a=k("textarea"),B(r,"class","svelte-rz4e1l")},m(s,l){Q(s,t,l),P(t,n),P(t,r),P(t,i),P(t,a),rt(a,e[8]),o||(u=je(a,"input",e[30]),o=!0)},p(s,l){l[0]&256&&rt(a,s[8])},d(s){s&&Z(t),o=!1,u()}}}function n1(e){let t,n,r;return{c(){t=k("div"),t.textContent="Thanks for participating!",n=R(),r=k("a"),r.textContent="click here to get your compensation",B(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){Q(i,t,a),Q(i,n,a),Q(i,r,a)},d(i){i&&(Z(t),Z(n),Z(r))}}}function r1(e){let t,n,r;return{c(){t=k("button"),t.textContent="next step",B(t,"class","next-btn svelte-rz4e1l")},m(i,a){Q(i,t,a),n||(r=je(t,"click",e[23]),n=!0)},p:we,d(i){i&&Z(t),n=!1,r()}}}function Dk(e){let t,n,r,i,a,o,u,s,l,c,f=e[2]==="consent"&&V0(),h=e[2]==="start1"&&Y0(e),d=e[2]==="start2"&&j0(e),m=e[2]==="start3"&&X0(e),p=e[2]==="demo"&&Z0(e),g=e[2]==="tests"&&K0(e),y=e[2]==="feedback"&&t1(e),b=e[2]==="done"&&n1(),v=!e[11]&&e[2]!=="done"&&r1(e);return{c(){t=k("main"),f&&f.c(),n=R(),h&&h.c(),r=R(),d&&d.c(),i=R(),m&&m.c(),a=R(),p&&p.c(),o=R(),g&&g.c(),u=R(),y&&y.c(),s=R(),b&&b.c(),l=R(),v&&v.c(),B(t,"class","svelte-rz4e1l")},m(w,_){Q(w,t,_),f&&f.m(t,null),P(t,n),h&&h.m(t,null),P(t,r),d&&d.m(t,null),P(t,i),m&&m.m(t,null),P(t,a),p&&p.m(t,null),P(t,o),g&&g.m(t,null),P(t,u),y&&y.m(t,null),P(t,s),b&&b.m(t,null),P(t,l),v&&v.m(t,null),c=!0},p(w,_){w[2]==="consent"?f||(f=V0(),f.c(),f.m(t,n)):f&&(f.d(1),f=null),w[2]==="start1"?h?(h.p(w,_),_[0]&4&&X(h,1)):(h=Y0(w),h.c(),X(h,1),h.m(t,r)):h&&(jt(),ae(h,1,1,()=>{h=null}),Xt()),w[2]==="start2"?d?d.p(w,_):(d=j0(w),d.c(),d.m(t,i)):d&&(d.d(1),d=null),w[2]==="start3"?m?(m.p(w,_),_[0]&4&&X(m,1)):(m=X0(w),m.c(),X(m,1),m.m(t,a)):m&&(jt(),ae(m,1,1,()=>{m=null}),Xt()),w[2]==="demo"?p?p.p(w,_):(p=Z0(w),p.c(),p.m(t,o)):p&&(p.d(1),p=null),w[2]==="tests"?g?(g.p(w,_),_[0]&4&&X(g,1)):(g=K0(w),g.c(),X(g,1),g.m(t,u)):g&&(jt(),ae(g,1,1,()=>{g=null}),Xt()),w[2]==="feedback"?y?y.p(w,_):(y=t1(w),y.c(),y.m(t,s)):y&&(y.d(1),y=null),w[2]==="done"?b||(b=n1(),b.c(),b.m(t,l)):b&&(b.d(1),b=null),!w[11]&&w[2]!=="done"?v?v.p(w,_):(v=r1(w),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(w){c||(X(h),X(m),X(g),c=!0)},o(w){ae(h),ae(m),ae(g),c=!1},d(w){w&&Z(t),f&&f.d(),h&&h.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),y&&y.d(),b&&b.d(),v&&v.d()}}}const vo=!1,Nk="/store",Bk=120,_o=.1,i1=4;function Fk(e,t,n){let r,i=Lo(window,"PROLIFIC_PID"),a=Lo(window,"STUDY_ID"),o=Lo(window,"SESSION_ID"),u=["audio","waveform","color"].map(J=>({encoding:J}));console.log({tests:u});let s="consent",l=0,c,f="",h="",d=0,m=0,p="",g=0,y,b={},v=[],w,_,M=!1,x=!1,C=!1,E="tick",$=600,A=[],L=0;const O=[];va(()=>{document.querySelector("html").addEventListener("keyup",G)});const T=()=>{_=new Fe({ratio:{firstVal:_o,operation:"multiply",down:2,up:1,stepSizeDown:1.25,stepSizeUp:1.25,limits:[0,_o],direction:-1,reversalLimit:6,verbosity:0}}),_.init()};function S(){s==="consent"?n(2,s="start1"):s==="start1"?n(2,s="start2"):s==="start2"?n(2,s="start3"):s==="start3"?(n(1,u=n9(u)),n(2,s="demo")):s==="demo"?f==""||h==""?alert("please fill the form first"):(n(2,s="tests"),n(3,l=0)):s==="tests"?l<u.length?I():n(2,s="feedback"):s==="feedback"&&(z(),n(2,s="done"))}function I(){T(),n(13,E=u[l].encoding);const J=Me(-_o),_e=Me(_o);n(20,j=J.noteTimes),n(21,D=_e.noteTimes),n(16,V=J.renderedAudio),n(17,Y=_e.renderedAudio),n(9,g=0),y=0,w=0,n(10,M=!0),A=[],v=[],c=new Date,ne()}function ne(){console.log("Starting trial "+g),b={},n(11,x=!0),te()}function te(){let _e=_.getLast("ratio");_e=Math.random()<.5?_e:-_e,b.deviation=_e;const ve=Me(_e);n(19,H=ve.noteTimes),ve.noteTimesSeparate,n(18,N=ve.sampleRate),n(15,ie=ve.renderedAudio),console.log("generated pattern"),n(12,C=!0),window.setTimeout(()=>{n(12,C=!1),b.startTime=new Date},1e3)}function K(J){if(!x)return;n(11,x=!1),b.decisionChoice=J,b.errorCode=0,b.timeTaken=(new Date-b.startTime)/1e3;const _e=w;(b.decisionChoice==0&&b.deviation<0||b.decisionChoice==1&&b.deviation>0)&&b.errorCode==0&&w++,b.errorCode==0&&(_.next(_e!=w),v[v.length]=b),b.errorCode==0&&y++,n(9,g++,g),_.reversalLimitReached("ratio")?q():ne()}function q(){n(10,M=!1),n(11,x=!1),A=[],L=_.getFinalVal("ratio");for(let _e=0;_e<v.length;_e++)A[_e]=v[_e].deviation;console.log(A);const J=new Date;O.push({encoding:E,final:L,data:A,score:w,testNumber:l,trialCount:g+1,trials:v,validTrialCount:y+1,testTimeSeconds:(J-c)/1e3}),n(3,l++,l)}function G(J){if(!C)switch(J.key){case"ArrowLeft":x&&K(0);break;case"ArrowRight":x&&K(1);break;case"PageDown":!x&&s!=="done"&&S()}}function z(){const J={studyStep:s,demographics:{partID:i,studyID:a,sessionID:o,partEduation:f,partMusicInstr:h,partMusicInstrYears:d,partVisExperienceYears:m,partFeedback:p,visWidth:$},date:new Date().toISOString(),tests:O};console.log("saving data",J);const _e=JSON.stringify(J,void 0,2);fetch(Nk,{method:"POST",headers:{"Content-Type":"application/json"},body:_e}).then(ve=>{console.log("Data saved:",ve)})}let U=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}],oe=By(Bk);const ue=i1*oe;let ie=null,V=null,Y=null,N,H=[],j=[],D=[];(async()=>{n(14,U=await Promise.all(U.map(async J=>({...J,times:J.beats.map(_e=>oe*(_e-1)),timesOriginal:J.beats.map(_e=>oe*(_e-1)),audioBuffer:await eg(J.sample)}))))})();const ee=(J=0)=>{if(J===0)return U;const _e=he([U]),ve=_e.filter(se=>se.instrument==="hihat")[0],Te=_e.filter(se=>se.instrument==="snare")[0],Ne=_e.filter(se=>se.instrument==="bass")[0];Ne.times[1]=Ne.timesOriginal[1]+J,ve.times[4]=ve.timesOriginal[4]+J;for(const se of[6,7,8])ve.times[se-1]=ve.timesOriginal[se-1]+J;return Te.times[1]=Te.timesOriginal[1]+J,_e},he=J=>{const _e=J[0].map(ve=>({...ve,beats:[...ve.beats],times:[...ve.times],timesOriginal:[...ve.timesOriginal]}));for(let ve=1;ve<J.length;ve++){const Te=J[ve];for(const Ne of Te){const se=_e.filter(We=>We.instrument===Ne.instrument)[0];se.beats=[...se.beats,...Ne.beats.map(We=>We+ve*i1)],se.times=[...se.times,...Ne.times.map(We=>We+ve*ue)],se.timesOriginal=[...se.timesOriginal,...Ne.timesOriginal.map(We=>We+ve*ue)]}}return _e},Me=J=>{if(!U[0].audioBuffer)return;const ve=[ee(J)],Te=he(ve),Ne=Te.map(re=>re.times).flat().sort(),se=Te.map(re=>re.times.map(ye=>({time:ye,instr:re.instrument}))).flat(1/0).sort((re,ye)=>{re.time-ye.time}),We=Te[0].audioBuffer.sampleRate,F=Jl(Te,ue*ve.length+.1,We);return{noteTimes:Ne,noteTimesSeparate:se,sampleRate:We,renderedAudio:F}},Oe=()=>n(0,$*=1.05),tt=()=>n(0,$*=.95);function De(){f=s1(this),n(4,f)}function Ut(){h=this.value,n(5,h)}function $e(){d=Xr(this.value),n(6,d)}function Dr(){m=Xr(this.value),n(7,m)}function Ht(){p=this.value,n(8,p)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(22,r=$/6)},[$,u,s,l,f,h,d,m,p,g,M,x,C,E,U,ie,V,Y,N,H,j,D,r,S,Oe,tt,De,Ut,$e,Dr,Ht]}class Lk extends Je{constructor(t){super(),Qe(this,t,Fk,Dk,Ke,{},null,[-1,-1])}}function a1(e){let t,n,r,i,a,o,u,s;return{c(){t=k("div"),n=k("button"),n.textContent="Playground",r=R(),i=k("button"),i.textContent="Study",a=R(),o=k("button"),o.textContent="Analysis"},m(l,c){Q(l,t,c),P(t,n),P(t,r),P(t,i),P(t,a),P(t,o),u||(s=[je(n,"click",e[1]),je(i,"click",e[2]),je(o,"click",e[3])],u=!0)},p:we,d(l){l&&Z(t),u=!1,gn(s)}}}function Ik(e){let t,n;return t=new Ak({}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function Rk(e){let t,n;return t=new Lk({}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function Ok(e){let t,n;return t=new VT({}),{c(){Ee(t.$$.fragment)},m(r,i){Ae(t,r,i),n=!0},i(r){n||(X(t.$$.fragment,r),n=!0)},o(r){ae(t.$$.fragment,r),n=!1},d(r){Se(t,r)}}}function qk(e){let t,n,r,i,a,o,u,s=e[0]!=="study_drums"&&a1(e);const l=[Ok,Rk,Ik],c=[];function f(h,d){return h[0]==="playground"?0:h[0]==="study_drums"?1:h[0]==="analysis"?2:-1}return~(a=f(e))&&(o=c[a]=l[a](e)),{c(){t=k("main"),n=k("h1"),n.textContent="Rhythm Error Sensitivity Study",r=R(),s&&s.c(),i=R(),o&&o.c()},m(h,d){Q(h,t,d),P(t,n),P(t,r),s&&s.m(t,null),P(t,i),~a&&c[a].m(t,null),u=!0},p(h,[d]){h[0]!=="study_drums"?s?s.p(h,d):(s=a1(h),s.c(),s.m(t,i)):s&&(s.d(1),s=null);let m=a;a=f(h),a!==m&&(o&&(jt(),ae(c[m],1,1,()=>{c[m]=null}),Xt()),~a?(o=c[a],o||(o=c[a]=l[a](h),o.c()),X(o,1),o.m(t,null)):o=null)},i(h){u||(X(o),u=!0)},o(h){ae(o),u=!1},d(h){h&&Z(t),s&&s.d(),~a&&c[a].d()}}}function Gk(e,t,n){let r=Lo(window,"p")??"study_drums";return[r,()=>n(0,r="playground"),()=>n(0,r="study_drums"),()=>n(0,r="analysis")]}class zk extends Je{constructor(t){super(),Qe(this,t,Gk,qk,Ke,{})}}new zk({target:document.getElementById("app")});export{Jb as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-GaIx5qy7.js","assets/index-GL9KMdm6.js","assets/browser-ZoSHTSXt.js","assets/index-DQSth_Ee.js","assets/index-ZJDti_Zy.js","assets/index-2kMqE1XE.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

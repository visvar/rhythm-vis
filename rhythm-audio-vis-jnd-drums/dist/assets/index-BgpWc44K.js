var t3=Object.defineProperty;var n3=(e,t,n)=>t in e?t3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vs=(e,t,n)=>(n3(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function we(){}function c1(e){return e()}function Vf(){return Object.create(null)}function Xt(e){e.forEach(c1)}function f1(e){return typeof e=="function"}function Xe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function r3(e){return Object.keys(e).length===0}function x(e,t){e.appendChild(t)}function Q(e,t,n){e.insertBefore(t,n||null)}function K(e){e.parentNode&&e.parentNode.removeChild(e)}function Wn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function Yf(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Me(e){return document.createTextNode(e)}function I(){return Me(" ")}function h1(){return Me("")}function Le(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function R(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function yr(e){return e===""?null:+e}function i3(e){return Array.from(e.childNodes)}function Mt(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ge(e,t){e.value=t??""}function xt(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ti(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function wc(e){const t=e.querySelector(":checked");return t&&t.__value}let ra;function Zi(e){ra=e}function d1(){if(!ra)throw new Error("Function called outside component initialization");return ra}function ni(e){d1().$$.on_mount.push(e)}function dn(e){d1().$$.after_update.push(e)}const Gr=[],lt=[];let Wr=[];const jf=[],a3=Promise.resolve();let hl=!1;function o3(){hl||(hl=!0,a3.then(m1))}function ri(e){Wr.push(e)}const ws=new Set;let Br=0;function m1(){if(Br!==0)return;const e=ra;do{try{for(;Br<Gr.length;){const t=Gr[Br];Br++,Zi(t),u3(t.$$)}}catch(t){throw Gr.length=0,Br=0,t}for(Zi(null),Gr.length=0,Br=0;lt.length;)lt.pop()();for(let t=0;t<Wr.length;t+=1){const n=Wr[t];ws.has(n)||(ws.add(n),n())}Wr.length=0}while(Gr.length);for(;jf.length;)jf.pop()();hl=!1,ws.clear(),Zi(e)}function u3(e){if(e.fragment!==null){e.update(),Xt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ri)}}function s3(e){const t=[],n=[];Wr.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Wr=t}const So=new Set;let fr;function $n(){fr={r:0,c:[],p:fr}}function Cn(){fr.r||Xt(fr.c),fr=fr.p}function Z(e,t){e&&e.i&&(So.delete(e),e.i(t))}function te(e,t,n,r){if(e&&e.o){if(So.has(e))return;So.add(e),fr.c.push(()=>{So.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function at(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ge(e){e&&e.c()}function de(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),ri(()=>{const a=e.$$.on_mount.map(c1).filter(f1);e.$$.on_destroy?e.$$.on_destroy.push(...a):Xt(a),e.$$.on_mount=[]}),i.forEach(ri)}function me(e,t){const n=e.$$;n.fragment!==null&&(s3(n.after_update),Xt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function l3(e,t){e.$$.dirty[0]===-1&&(Gr.push(e),o3(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ze(e,t,n,r,i,a,o=null,u=[-1]){const s=ra;Zi(e);const l=e.$$={fragment:null,ctx:[],props:a,update:we,not_equal:i,bound:Vf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Vf(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,h,...d)=>{const m=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),c&&l3(e,f)),h}):[],l.update(),c=!0,Xt(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=i3(t.target);l.fragment&&l.fragment.l(f),f.forEach(K)}else l.fragment&&l.fragment.c();t.intro&&Z(e.$$.fragment),de(e,t.target,t.anchor),m1()}Zi(s)}class Ke{constructor(){vs(this,"$$");vs(this,"$$set")}$destroy(){me(this,1),this.$destroy=we}$on(t,n){if(!f1(n))return we;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!r3(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const c3="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(c3);function gt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Sa(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Au(e){let t,n,r;e.length!==2?(t=gt,n=(u,s)=>gt(e(u),s),r=(u,s)=>e(u)-s):(t=e===gt||e===Sa?e:f3,n=e,r=e);function i(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<0?l=f+1:c=f}while(l<c)}return l}function a(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<=0?l=f+1:c=f}while(l<c)}return l}function o(u,s,l=0,c=u.length){const f=i(u,s,l,c-1);return f>l&&r(u[f-1],s)>-r(u[f],s)?f-1:f}return{left:i,center:o,right:a}}function f3(){return 0}function p1(e){return e===null?NaN:+e}function*h3(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const d3=Au(gt),Eu=d3.right;Au(p1).center;function _c(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function m3(e){return e.length|0}function p3(e){return!(e>0)}function b3(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function g3(e){return t=>e(...t)}function y3(...e){const t=typeof e[e.length-1]=="function"&&g3(e.pop());e=e.map(b3);const n=e.map(m3),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(p3))return a;for(;;){a.push(i.map((u,s)=>e[s][u]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function v3(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function Mc(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let u of e)(u=t(u,++o,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,a+=r*(u-i))}if(n>1)return a/(n-1)}function $u(e,t){const n=Mc(e,t);return n&&Math.sqrt(n)}function Nt(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class vr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,u=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);u&&(n[r++]=u),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class wr extends Map{constructor(t,n=y1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(dl(this,t))}has(t){return super.has(dl(this,t))}set(t,n){return super.set(b1(this,t),n)}delete(t){return super.delete(g1(this,t))}}class Cu extends Set{constructor(t,n=y1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(dl(this,t))}add(t){return super.add(b1(this,t))}delete(t){return super.delete(g1(this,t))}}function dl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function b1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function g1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function y1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ro(e){return e}function ku(e,...t){return Tu(e,Ro,Ro,t)}function hr(e,...t){return Tu(e,Array.from,Ro,t)}function Vr(e,t,...n){return Tu(e,Ro,t,n)}function w3(e,t,...n){return Tu(e,Array.from,t,n)}function Tu(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const u=new wr,s=r[o++];let l=-1;for(const c of a){const f=s(c,++l,a),h=u.get(f);h?h.push(c):u.set(f,[c])}for(const[c,f]of u)u.set(c,i(f,o));return t(u)}(e,0)}function _3(e,t){return Array.from(t,n=>e[n])}function ia(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const u=Oo(o[i],o[a]);if(u)return u}})):(n=e.map(n),r.sort((i,a)=>Oo(n[i],n[a]))),_3(e,r)}return e.sort(v1(n))}function v1(e=gt){if(e===gt)return Oo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Oo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function xc(e,t,n){return(t.length!==2?ia(Vr(e,t,n),([r,i],[a,o])=>gt(i,o)||gt(r,a)):ia(ku(e,n),([r,i],[a,o])=>t(i,o)||gt(r,a))).map(([r])=>r)}const M3=Math.sqrt(50),x3=Math.sqrt(10),P3=Math.sqrt(2);function qo(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=M3?10:a>=x3?5:a>=P3?2:1;let u,s,l;return i<0?(l=Math.pow(10,-i)/o,u=Math.round(e*l),s=Math.round(t*l),u/l<e&&++u,s/l>t&&--s,l=-l):(l=Math.pow(10,i)*o,u=Math.round(e/l),s=Math.round(t/l),u*l<e&&++u,s*l>t&&--s),s<u&&.5<=n&&n<2?qo(e,t,n*2):[u,s,l]}function aa(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?qo(t,e,n):qo(e,t,n);if(!(a>=i))return[];const u=a-i+1,s=new Array(u);if(r)if(o<0)for(let l=0;l<u;++l)s[l]=(a-l)/-o;else for(let l=0;l<u;++l)s[l]=(a-l)*o;else if(o<0)for(let l=0;l<u;++l)s[l]=(i+l)/-o;else for(let l=0;l<u;++l)s[l]=(i+l)*o;return s}function Go(e,t,n){return t=+t,e=+e,n=+n,qo(e,t,n)[2]}function ml(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Go(t,e,n):Go(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function S3(e){return Math.max(1,Math.ceil(Math.log(_c(e))/Math.LN2)+1)}function It(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function A3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function kn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function E3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function w1(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Oo:v1(i);r>n;){if(r-n>600){const s=r-n+1,l=t-n+1,c=Math.log(s),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(s-f)/s)*(l-s/2<0?-1:1),d=Math.max(n,Math.floor(t-l*f/s+h)),m=Math.min(r,Math.floor(t+(s-l)*f/s+h));w1(e,t,d,m,i)}const a=e[t];let o=n,u=r;for($i(e,n,t),i(e[r],a)>0&&$i(e,n,r);o<u;){for($i(e,o,u),++o,--u;i(e[o],a)<0;)++o;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?$i(e,n,u):(++u,$i(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function $i(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function _1(e,t=gt){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?gt(o,i)>0:gt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function ii(e,t,n){if(e=Float64Array.from(h3(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return kn(e);if(t>=1)return It(e);var r,i=(r-1)*t,a=Math.floor(i),o=It(w1(e,a).subarray(0,a+1)),u=kn(e.subarray(a+1));return o+(u-o)*(i-a)}}function $3(e,t,n=p1){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function C3(e,t,n){const r=_c(e),i=ii(e,.75)-ii(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function M1(e,t,n){const r=_c(e),i=$u(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Nu(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function pl(e,t){return ii(e,.5,t)}function*k3(e){for(const t of e)yield*t}function x1(e){return Array.from(k3(e))}function T3(e,t){const n=new wr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function N3(e,t=D3){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function D3(e,t){return[e,t]}function bl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Zn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Uo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function F3(e){return e}var _s=1,Ms=2,gl=3,eo=4,Xf=1e-6;function B3(e){return"translate("+e+",0)"}function L3(e){return"translate(0,"+e+")"}function I3(e){return t=>+e(t)}function R3(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function O3(){return!this.__axis}function q3(e,t){var n=[],r=null,i=null,a=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===_s||e===eo?-1:1,c=e===eo||e===Ms?"x":"y",f=e===_s||e===gl?B3:L3;function h(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):F3),y=Math.max(a,0)+u,g=t.range(),b=+g[0]+s,w=+g[g.length-1]+s,v=(t.bandwidth?R3:I3)(t.copy(),s),M=d.selection?d.selection():d,_=M.selectAll(".domain").data([null]),P=M.selectAll(".tick").data(m,t).order(),$=P.exit(),C=P.enter().append("g").attr("class","tick"),F=P.select("line"),S=P.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(C),F=F.merge(C.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),S=S.merge(C.append("text").attr("fill","currentColor").attr(c,l*y).attr("dy",e===_s?"0em":e===gl?"0.71em":"0.32em")),d!==M&&(_=_.transition(d),P=P.transition(d),F=F.transition(d),S=S.transition(d),$=$.transition(d).attr("opacity",Xf).attr("transform",function(A){return isFinite(A=v(A))?f(A+s):this.getAttribute("transform")}),C.attr("opacity",Xf).attr("transform",function(A){var B=this.parentNode.__axis;return f((B&&isFinite(B=B(A))?B:v(A))+s)})),$.remove(),_.attr("d",e===eo||e===Ms?o?"M"+l*o+","+b+"H"+s+"V"+w+"H"+l*o:"M"+s+","+b+"V"+w:o?"M"+b+","+l*o+"V"+s+"H"+w+"V"+l*o:"M"+b+","+s+"H"+w),P.attr("opacity",1).attr("transform",function(A){return f(v(A)+s)}),F.attr(c+"2",l*a),S.attr(c,l*y).text(p),M.filter(O3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ms?"start":e===eo?"end":"middle"),M.each(function(){this.__axis=v})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(u=+d,h):u},h.offset=function(d){return arguments.length?(s=+d,h):s},h}function G3(e){return q3(gl,e)}var U3={value:()=>{}};function P1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ao(n)}function Ao(e){this._=e}function z3(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ao.prototype=P1.prototype={constructor:Ao,on:function(e,t){var n=this._,r=z3(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=H3(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Zf(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Zf(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ao(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function H3(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Zf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=U3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var yl="http://www.w3.org/1999/xhtml";const ai={svg:"http://www.w3.org/2000/svg",xhtml:yl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Du(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ai.hasOwnProperty(t)?{space:ai[t],local:e}:e}function W3(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===yl&&t.documentElement.namespaceURI===yl?t.createElement(e):t.createElementNS(n,e)}}function V3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fu(e){var t=Du(e);return(t.local?V3:W3)(t)}function Y3(){}function Pc(e){return e==null?Y3:function(){return this.querySelector(e)}}function j3(e){typeof e!="function"&&(e=Pc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Pt(r,this._parents)}function X3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Z3(){return[]}function S1(e){return e==null?Z3:function(){return this.querySelectorAll(e)}}function K3(e){return function(){return X3(e.apply(this,arguments))}}function Q3(e){typeof e=="function"?e=K3(e):e=S1(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Pt(r,i)}function A1(e){return function(){return this.matches(e)}}function E1(e){return function(t){return t.matches(e)}}var J3=Array.prototype.find;function ev(e){return function(){return J3.call(this.children,e)}}function tv(){return this.firstElementChild}function nv(e){return this.select(e==null?tv:ev(typeof e=="function"?e:E1(e)))}var rv=Array.prototype.filter;function iv(){return Array.from(this.children)}function av(e){return function(){return rv.call(this.children,e)}}function ov(e){return this.selectAll(e==null?iv:av(typeof e=="function"?e:E1(e)))}function uv(e){typeof e!="function"&&(e=A1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Pt(r,this._parents)}function $1(e){return new Array(e.length)}function sv(){return new Pt(this._enter||this._groups.map($1),this._parents)}function zo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zo.prototype={constructor:zo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function lv(e){return function(){return e}}function cv(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new zo(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function fv(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new zo(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function hv(e){return e.__data__}function dv(e,t){if(!arguments.length)return Array.from(this,hv);var n=t?fv:cv,r=this._parents,i=this._groups;typeof e!="function"&&(e=lv(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=mv(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),y=o[l]=new Array(m),g=s[l]=new Array(h);n(c,f,p,y,g,d,t);for(var b=0,w=0,v,M;b<m;++b)if(v=p[b]){for(b>=w&&(w=b+1);!(M=y[w])&&++w<m;);v._next=M||null}}return o=new Pt(o,r),o._enter=u,o._exit=s,o}function mv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pv(){return new Pt(this._exit||this._groups.map($1),this._parents)}function bv(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function gv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var l=n[s],c=r[s],f=l.length,h=u[s]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;s<i;++s)u[s]=n[s];return new Pt(u,this._parents)}function yv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function vv(e){e||(e=wv);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Pt(i,this._parents).order()}function wv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _v(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Mv(){return Array.from(this)}function xv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Pv(){let e=0;for(const t of this)++e;return e}function Sv(){return!this.node()}function Av(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function Ev(e){return function(){this.removeAttribute(e)}}function $v(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cv(e,t){return function(){this.setAttribute(e,t)}}function kv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Nv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dv(e,t){var n=Du(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?$v:Ev:typeof t=="function"?n.local?Nv:Tv:n.local?kv:Cv)(n,t))}function C1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Fv(e){return function(){this.style.removeProperty(e)}}function Bv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Lv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Iv(e,t,n){return arguments.length>1?this.each((t==null?Fv:typeof t=="function"?Lv:Bv)(e,t,n??"")):oi(this.node(),e)}function oi(e,t){return e.style.getPropertyValue(t)||C1(e).getComputedStyle(e,null).getPropertyValue(t)}function Rv(e){return function(){delete this[e]}}function Ov(e,t){return function(){this[e]=t}}function qv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Gv(e,t){return arguments.length>1?this.each((t==null?Rv:typeof t=="function"?qv:Ov)(e,t)):this.node()[e]}function k1(e){return e.trim().split(/^|\s+/)}function Sc(e){return e.classList||new T1(e)}function T1(e){this._node=e,this._names=k1(e.getAttribute("class")||"")}T1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function N1(e,t){for(var n=Sc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function D1(e,t){for(var n=Sc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Uv(e){return function(){N1(this,e)}}function zv(e){return function(){D1(this,e)}}function Hv(e,t){return function(){(t.apply(this,arguments)?N1:D1)(this,e)}}function Wv(e,t){var n=k1(e+"");if(arguments.length<2){for(var r=Sc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Hv:t?Uv:zv)(n,t))}function Vv(){this.textContent=""}function Yv(e){return function(){this.textContent=e}}function jv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Xv(e){return arguments.length?this.each(e==null?Vv:(typeof e=="function"?jv:Yv)(e)):this.node().textContent}function Zv(){this.innerHTML=""}function Kv(e){return function(){this.innerHTML=e}}function Qv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Jv(e){return arguments.length?this.each(e==null?Zv:(typeof e=="function"?Qv:Kv)(e)):this.node().innerHTML}function ew(){this.nextSibling&&this.parentNode.appendChild(this)}function tw(){return this.each(ew)}function nw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rw(){return this.each(nw)}function iw(e){var t=typeof e=="function"?e:Fu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function aw(){return null}function ow(e,t){var n=typeof e=="function"?e:Fu(e),r=t==null?aw:typeof t=="function"?t:Pc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function uw(){var e=this.parentNode;e&&e.removeChild(this)}function sw(){return this.each(uw)}function lw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fw(e){return this.select(e?cw:lw)}function hw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function dw(e){return function(t){e.call(this,t,this.__data__)}}function mw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function pw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function bw(e,t,n){return function(){var r=this.__on,i,a=dw(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function gw(e,t,n){var r=mw(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?bw:pw,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function F1(e,t,n){var r=C1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function yw(e,t){return function(){return F1(this,e,t)}}function vw(e,t){return function(){return F1(this,e,t.apply(this,arguments))}}function ww(e,t){return this.each((typeof t=="function"?vw:yw)(e,t))}function*_w(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var B1=[null];function Pt(e,t){this._groups=e,this._parents=t}function Aa(){return new Pt([[document.documentElement]],B1)}function Mw(){return this}Pt.prototype=Aa.prototype={constructor:Pt,select:j3,selectAll:Q3,selectChild:nv,selectChildren:ov,filter:uv,data:dv,enter:sv,exit:pv,join:bv,merge:gv,selection:Mw,order:yv,sort:vv,call:_v,nodes:Mv,node:xv,size:Pv,empty:Sv,each:Av,attr:Dv,style:Iv,property:Gv,classed:Wv,text:Xv,html:Jv,raise:tw,lower:rw,append:iw,insert:ow,remove:sw,clone:fw,datum:hw,on:gw,dispatch:ww,[Symbol.iterator]:_w};function Ki(e){return typeof e=="string"?new Pt([[document.querySelector(e)]],[document.documentElement]):new Pt([[e]],B1)}function xw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pw(e,t){if(e=xw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Mi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ea(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tr(){}var _r=.7,ui=1/_r,Yr="\\s*([+-]?\\d+)\\s*",oa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sw=/^#([0-9a-f]{3,8})$/,Aw=new RegExp(`^rgb\\(${Yr},${Yr},${Yr}\\)$`),Ew=new RegExp(`^rgb\\(${sn},${sn},${sn}\\)$`),$w=new RegExp(`^rgba\\(${Yr},${Yr},${Yr},${oa}\\)$`),Cw=new RegExp(`^rgba\\(${sn},${sn},${sn},${oa}\\)$`),kw=new RegExp(`^hsl\\(${oa},${sn},${sn}\\)$`),Tw=new RegExp(`^hsla\\(${oa},${sn},${sn},${oa}\\)$`),Kf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mi(tr,Mr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Qf,formatHex:Qf,formatHex8:Nw,formatHsl:Dw,formatRgb:Jf,toString:Jf});function Qf(){return this.rgb().formatHex()}function Nw(){return this.rgb().formatHex8()}function Dw(){return L1(this).formatHsl()}function Jf(){return this.rgb().formatRgb()}function Mr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Sw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?eh(t):n===3?new Ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?to(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?to(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Aw.exec(e))?new Ye(t[1],t[2],t[3],1):(t=Ew.exec(e))?new Ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$w.exec(e))?to(t[1],t[2],t[3],t[4]):(t=Cw.exec(e))?to(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kw.exec(e))?rh(t[1],t[2]/100,t[3]/100,1):(t=Tw.exec(e))?rh(t[1],t[2]/100,t[3]/100,t[4]):Kf.hasOwnProperty(e)?eh(Kf[e]):e==="transparent"?new Ye(NaN,NaN,NaN,0):null}function eh(e){return new Ye(e>>16&255,e>>8&255,e&255,1)}function to(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ye(e,t,n,r)}function Ac(e){return e instanceof tr||(e=Mr(e)),e?(e=e.rgb(),new Ye(e.r,e.g,e.b,e.opacity)):new Ye}function Kn(e,t,n,r){return arguments.length===1?Ac(e):new Ye(e,t,n,r??1)}function Ye(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Mi(Ye,Kn,Ea(tr,{brighter(e){return e=e==null?ui:Math.pow(ui,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_r:Math.pow(_r,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ye(pr(this.r),pr(this.g),pr(this.b),Ho(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:th,formatHex:th,formatHex8:Fw,formatRgb:nh,toString:nh}));function th(){return`#${dr(this.r)}${dr(this.g)}${dr(this.b)}`}function Fw(){return`#${dr(this.r)}${dr(this.g)}${dr(this.b)}${dr((isNaN(this.opacity)?1:this.opacity)*255)}`}function nh(){const e=Ho(this.opacity);return`${e===1?"rgb(":"rgba("}${pr(this.r)}, ${pr(this.g)}, ${pr(this.b)}${e===1?")":`, ${e})`}`}function Ho(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dr(e){return e=pr(e),(e<16?"0":"")+e.toString(16)}function rh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new zt(e,t,n,r)}function L1(e){if(e instanceof zt)return new zt(e.h,e.s,e.l,e.opacity);if(e instanceof tr||(e=Mr(e)),!e)return new zt;if(e instanceof zt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new zt(o,u,s,e.opacity)}function vl(e,t,n,r){return arguments.length===1?L1(e):new zt(e,t,n,r??1)}function zt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Mi(zt,vl,Ea(tr,{brighter(e){return e=e==null?ui:Math.pow(ui,e),new zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_r:Math.pow(_r,e),new zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ye(xs(e>=240?e-240:e+120,i,r),xs(e,i,r),xs(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new zt(ih(this.h),no(this.s),no(this.l),Ho(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ho(this.opacity);return`${e===1?"hsl(":"hsla("}${ih(this.h)}, ${no(this.s)*100}%, ${no(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ih(e){return e=(e||0)%360,e<0?e+360:e}function no(e){return Math.max(0,Math.min(1,e||0))}function xs(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const I1=Math.PI/180,R1=180/Math.PI,Wo=18,O1=.96422,q1=1,G1=.82521,U1=4/29,jr=6/29,z1=3*jr*jr,Bw=jr*jr*jr;function H1(e){if(e instanceof ln)return new ln(e.l,e.a,e.b,e.opacity);if(e instanceof Sn)return W1(e);e instanceof Ye||(e=Ac(e));var t=Es(e.r),n=Es(e.g),r=Es(e.b),i=Ps((.2225045*t+.7168786*n+.0606169*r)/q1),a,o;return t===n&&n===r?a=o=i:(a=Ps((.4360747*t+.3850649*n+.1430804*r)/O1),o=Ps((.0139322*t+.0971045*n+.7141733*r)/G1)),new ln(116*i-16,500*(a-i),200*(i-o),e.opacity)}function wl(e,t,n,r){return arguments.length===1?H1(e):new ln(e,t,n,r??1)}function ln(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Mi(ln,wl,Ea(tr,{brighter(e){return new ln(this.l+Wo*(e??1),this.a,this.b,this.opacity)},darker(e){return new ln(this.l-Wo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=O1*Ss(t),e=q1*Ss(e),n=G1*Ss(n),new Ye(As(3.1338561*t-1.6168667*e-.4906146*n),As(-.9787684*t+1.9161415*e+.033454*n),As(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Ps(e){return e>Bw?Math.pow(e,1/3):e/z1+U1}function Ss(e){return e>jr?e*e*e:z1*(e-U1)}function As(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Es(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Lw(e){if(e instanceof Sn)return new Sn(e.h,e.c,e.l,e.opacity);if(e instanceof ln||(e=H1(e)),e.a===0&&e.b===0)return new Sn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*R1;return new Sn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function _l(e,t,n,r){return arguments.length===1?Lw(e):new Sn(e,t,n,r??1)}function Sn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function W1(e){if(isNaN(e.h))return new ln(e.l,0,0,e.opacity);var t=e.h*I1;return new ln(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Mi(Sn,_l,Ea(tr,{brighter(e){return new Sn(this.h,this.c,this.l+Wo*(e??1),this.opacity)},darker(e){return new Sn(this.h,this.c,this.l-Wo*(e??1),this.opacity)},rgb(){return W1(this).rgb()}}));var V1=-.14861,Ec=1.78277,$c=-.29227,Bu=-.90649,ua=1.97294,ah=ua*Bu,oh=ua*Ec,uh=Ec*$c-Bu*V1;function Iw(e){if(e instanceof br)return new br(e.h,e.s,e.l,e.opacity);e instanceof Ye||(e=Ac(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(uh*r+ah*t-oh*n)/(uh+ah-oh),a=r-i,o=(ua*(n-i)-$c*a)/Bu,u=Math.sqrt(o*o+a*a)/(ua*i*(1-i)),s=u?Math.atan2(o,a)*R1-120:NaN;return new br(s<0?s+360:s,u,i,e.opacity)}function fn(e,t,n,r){return arguments.length===1?Iw(e):new br(e,t,n,r??1)}function br(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Mi(br,fn,Ea(tr,{brighter(e){return e=e==null?ui:Math.pow(ui,e),new br(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_r:Math.pow(_r,e),new br(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*I1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ye(255*(t+n*(V1*r+Ec*i)),255*(t+n*($c*r+Bu*i)),255*(t+n*(ua*r)),this.opacity)}}));function Rw(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function Ow(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return Rw((n-r/t)*t,o,i,a,u)}}const Lu=e=>()=>e;function Y1(e,t){return function(n){return e+n*t}}function qw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Cc(e,t){var n=t-e;return n?Y1(e,n>180||n<-180?n-360*Math.round(n/360):n):Lu(isNaN(e)?t:e)}function Gw(e){return(e=+e)==1?nt:function(t,n){return n-t?qw(t,n,e):Lu(isNaN(t)?n:t)}}function nt(e,t){var n=t-e;return n?Y1(e,n):Lu(isNaN(e)?t:e)}const xr=function e(t){var n=Gw(t);function r(i,a){var o=n((i=Kn(i)).r,(a=Kn(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=nt(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Uw(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,u;for(o=0;o<n;++o)u=Kn(t[o]),r[o]=u.r||0,i[o]=u.g||0,a[o]=u.b||0;return r=e(r),i=e(i),a=e(a),u.opacity=1,function(s){return u.r=r(s),u.g=i(s),u.b=a(s),u+""}}}var zw=Uw(Ow);function Hw(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Ww(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Vw(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=$a(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function Yw(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function jw(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=$a(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ml=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$s=new RegExp(Ml.source,"g");function Xw(e){return function(){return e}}function Zw(e){return function(t){return e(t)+""}}function j1(e,t){var n=Ml.lastIndex=$s.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=Ml.exec(e))&&(i=$s.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:tt(r,i)})),n=$s.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?Zw(s[0].x):Xw(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}function $a(e,t){var n=typeof t,r;return t==null||n==="boolean"?Lu(t):(n==="number"?tt:n==="string"?(r=Mr(t))?(t=r,xr):j1:t instanceof Mr?xr:t instanceof Date?Yw:Ww(t)?Hw:Array.isArray(t)?Vw:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?jw:tt)(e,t)}function kc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var sh=180/Math.PI,xl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function X1(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*sh,skewX:Math.atan(s)*sh,scaleX:o,scaleY:u}}var ro;function Kw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xl:X1(t.a,t.b,t.c,t.d,t.e,t.f)}function Qw(e){return e==null||(ro||(ro=document.createElementNS("http://www.w3.org/2000/svg","g")),ro.setAttribute("transform",e),!(e=ro.transform.baseVal.consolidate()))?xl:(e=e.matrix,X1(e.a,e.b,e.c,e.d,e.e,e.f))}function Z1(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:tt(l,f)},{i:p-2,x:tt(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:tt(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:tt(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:tt(l,f)},{i:p-2,x:tt(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,y;++m<p;)f[(y=h[m]).i]=y.x(d);return f.join("")}}}var Jw=Z1(Kw,"px, ","px)","deg)"),e_=Z1(Qw,", ",")",")");function t_(e){return function(t,n){var r=e((t=vl(t)).h,(n=vl(n)).h),i=nt(t.s,n.s),a=nt(t.l,n.l),o=nt(t.opacity,n.opacity);return function(u){return t.h=r(u),t.s=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const n_=t_(Cc);function r_(e,t){var n=nt((e=wl(e)).l,(t=wl(t)).l),r=nt(e.a,t.a),i=nt(e.b,t.b),a=nt(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function i_(e){return function(t,n){var r=e((t=_l(t)).h,(n=_l(n)).h),i=nt(t.c,n.c),a=nt(t.l,n.l),o=nt(t.opacity,n.opacity);return function(u){return t.h=r(u),t.c=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const a_=i_(Cc);function K1(e){return function t(n){n=+n;function r(i,a){var o=e((i=fn(i)).h,(a=fn(a)).h),u=nt(i.s,a.s),s=nt(i.l,a.l),l=nt(i.opacity,a.opacity);return function(c){return i.h=o(c),i.s=u(c),i.l=s(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}K1(Cc);var Tc=K1(nt);function Iu(e,t){t===void 0&&(t=e,e=$a);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}function Wt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var si=0,Ri=0,Ci=0,Q1=1e3,Vo,Oi,Yo=0,Pr=0,Ru=0,sa=typeof performance=="object"&&performance.now?performance:Date,J1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Nc(){return Pr||(J1(o_),Pr=sa.now()+Ru)}function o_(){Pr=0}function jo(){this._call=this._time=this._next=null}jo.prototype=em.prototype={constructor:jo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Nc():+n)+(t==null?0:+t),!this._next&&Oi!==this&&(Oi?Oi._next=this:Vo=this,Oi=this),this._call=e,this._time=n,Pl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pl())}};function em(e,t,n){var r=new jo;return r.restart(e,t,n),r}function u_(){Nc(),++si;for(var e=Vo,t;e;)(t=Pr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--si}function lh(){Pr=(Yo=sa.now())+Ru,si=Ri=0;try{u_()}finally{si=0,l_(),Pr=0}}function s_(){var e=sa.now(),t=e-Yo;t>Q1&&(Ru-=t,Yo=e)}function l_(){for(var e,t=Vo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Vo=n);Oi=e,Pl(r)}function Pl(e){if(!si){Ri&&(Ri=clearTimeout(Ri));var t=e-Pr;t>24?(e<1/0&&(Ri=setTimeout(lh,e-sa.now()-Ru)),Ci&&(Ci=clearInterval(Ci))):(Ci||(Yo=sa.now(),Ci=setInterval(s_,Q1)),si=1,J1(lh))}}function ch(e,t,n){var r=new jo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var c_=P1("start","end","cancel","interrupt"),f_=[],tm=0,fh=1,Sl=2,Eo=3,hh=4,Al=5,$o=6;function Ou(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;h_(e,n,{name:t,index:r,group:i,on:c_,tween:f_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:tm})}function Dc(e,t){var n=Zt(e,t);if(n.state>tm)throw new Error("too late; already scheduled");return n}function mn(e,t){var n=Zt(e,t);if(n.state>Eo)throw new Error("too late; already running");return n}function Zt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function h_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=em(a,0,n.time);function a(l){n.state=fh,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==fh)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Eo)return ch(o);d.state===hh?(d.state=$o,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=$o,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(ch(function(){n.state===Eo&&(n.state=hh,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=Sl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Sl){for(n.state=Eo,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=Al,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===Al&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=$o,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function d_(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Sl&&r.state<Al,r.state=$o,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function m_(e){return this.each(function(){d_(this,e)})}function p_(e,t){var n,r;return function(){var i=mn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function b_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=mn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function g_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Zt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?p_:b_)(n,e,t))}function Fc(e,t,n){var r=e._id;return e.each(function(){var i=mn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Zt(i,r).value[t]}}function nm(e,t){var n;return(typeof t=="number"?tt:t instanceof Mr?xr:(n=Mr(t))?(t=n,xr):j1)(e,t)}function y_(e){return function(){this.removeAttribute(e)}}function v_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function w_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function __(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function M_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function x_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function P_(e,t){var n=Du(e),r=n==="transform"?e_:nm;return this.attrTween(e,typeof t=="function"?(n.local?x_:M_)(n,r,Fc(this,"attr."+e,t)):t==null?(n.local?v_:y_)(n):(n.local?__:w_)(n,r,t))}function S_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function A_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function E_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&A_(e,a)),n}return i._value=t,i}function $_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&S_(e,a)),n}return i._value=t,i}function C_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Du(e);return this.tween(n,(r.local?E_:$_)(r,t))}function k_(e,t){return function(){Dc(this,e).delay=+t.apply(this,arguments)}}function T_(e,t){return t=+t,function(){Dc(this,e).delay=t}}function N_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?k_:T_)(t,e)):Zt(this.node(),t).delay}function D_(e,t){return function(){mn(this,e).duration=+t.apply(this,arguments)}}function F_(e,t){return t=+t,function(){mn(this,e).duration=t}}function B_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?D_:F_)(t,e)):Zt(this.node(),t).duration}function L_(e,t){if(typeof t!="function")throw new Error;return function(){mn(this,e).ease=t}}function I_(e){var t=this._id;return arguments.length?this.each(L_(t,e)):Zt(this.node(),t).ease}function R_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;mn(this,e).ease=n}}function O_(e){if(typeof e!="function")throw new Error;return this.each(R_(this._id,e))}function q_(e){typeof e!="function"&&(e=A1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Tn(r,this._parents,this._name,this._id)}function G_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Tn(o,this._parents,this._name,this._id)}function U_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function z_(e,t,n){var r,i,a=U_(t)?Dc:mn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function H_(e,t){var n=this._id;return arguments.length<2?Zt(this.node(),n).on.on(e):this.each(z_(n,e,t))}function W_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function V_(){return this.on("end.remove",W_(this._id))}function Y_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pc(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Ou(l[h],t,n,h,l,Zt(c,n)));return new Tn(a,this._parents,t,n)}function j_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=S1(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=Zt(c,n),p=0,y=h.length;p<y;++p)(d=h[p])&&Ou(d,t,n,p,h,m);a.push(h),o.push(c)}return new Tn(a,o,t,n)}var X_=Aa.prototype.constructor;function Z_(){return new X_(this._groups,this._parents)}function K_(e,t){var n,r,i;return function(){var a=oi(this,e),o=(this.style.removeProperty(e),oi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function rm(e){return function(){this.style.removeProperty(e)}}function Q_(e,t,n){var r,i=n+"",a;return function(){var o=oi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function J_(e,t,n){var r,i,a;return function(){var o=oi(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),oi(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function e5(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=mn(this,e),l=s.on,c=s.value[a]==null?u||(u=rm(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function t5(e,t,n){var r=(e+="")=="transform"?Jw:nm;return t==null?this.styleTween(e,K_(e,r)).on("end.style."+e,rm(e)):typeof t=="function"?this.styleTween(e,J_(e,r,Fc(this,"style."+e,t))).each(e5(this._id,e)):this.styleTween(e,Q_(e,r,t),n).on("end.style."+e,null)}function n5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function r5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&n5(e,o,n)),r}return a._value=t,a}function i5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,r5(e,t,n??""))}function a5(e){return function(){this.textContent=e}}function o5(e){return function(){var t=e(this);this.textContent=t??""}}function u5(e){return this.tween("text",typeof e=="function"?o5(Fc(this,"text",e)):a5(e==null?"":e+""))}function s5(e){return function(t){this.textContent=e.call(this,t)}}function l5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&s5(i)),t}return r._value=e,r}function c5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,l5(e))}function f5(){for(var e=this._name,t=this._id,n=im(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=Zt(s,t);Ou(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Tn(r,this._parents,e,n)}function h5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=mn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var d5=0;function Tn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function im(){return++d5}var gn=Aa.prototype;Tn.prototype={constructor:Tn,select:Y_,selectAll:j_,selectChild:gn.selectChild,selectChildren:gn.selectChildren,filter:q_,merge:G_,selection:Z_,transition:f5,call:gn.call,nodes:gn.nodes,node:gn.node,size:gn.size,empty:gn.empty,each:gn.each,on:H_,attr:P_,attrTween:C_,style:t5,styleTween:i5,text:u5,textTween:c5,remove:V_,tween:g_,delay:N_,duration:B_,ease:I_,easeVarying:O_,end:h5,[Symbol.iterator]:gn[Symbol.iterator]};function m5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var p5={time:null,delay:0,duration:250,ease:m5};function b5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function g5(e){var t,n;e instanceof Tn?(t=e._id,e=e._name):(t=im(),(n=p5).time=Nc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&Ou(s,e,t,l,o,n||b5(s,t));return new Tn(r,this._parents,e,t)}Aa.prototype.interrupt=m_;Aa.prototype.transition=g5;const El=Math.PI,$l=2*El,lr=1e-6,y5=$l-lr;function am(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function v5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return am;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class om{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?am:v5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-t,l=i-n,c=o-t,f=u-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>lr)if(!(Math.abs(f*s-l*c)>lr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-u,p=s*s+l*l,y=d*d+m*m,g=Math.sqrt(p),b=Math.sqrt(h),w=a*Math.tan((El-Math.acos((p+h-y)/(2*g*b)))/2),v=w/b,M=w/g;Math.abs(v-1)>lr&&this._append`L${t+v*c},${n+v*f}`,this._append`A${a},${a},0,0,${+(f*d>c*m)},${this._x1=t+M*s},${this._y1=n+M*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),l=t+u,c=n+s,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>lr||Math.abs(this._y1-c)>lr)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%$l+$l),h>y5?this._append`A${r},${r},0,1,${f},${t-u},${n-s}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>lr&&this._append`A${r},${r},0,${+(h>=El)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Vn(e=3){return new om(+e)}var dh={},Cs={},ks=34,ki=10,Ts=13;function um(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function w5(e,t){var n=um(e);return function(r,i){return t(n(r),i,e)}}function mh(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function mt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function _5(e){return e<0?"-"+mt(-e,6):e>9999?"+"+mt(e,6):mt(e,4)}function M5(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":_5(e.getUTCFullYear())+"-"+mt(e.getUTCMonth()+1,2)+"-"+mt(e.getUTCDate(),2)+(i?"T"+mt(t,2)+":"+mt(n,2)+":"+mt(r,2)+"."+mt(i,3)+"Z":r?"T"+mt(t,2)+":"+mt(n,2)+":"+mt(r,2)+"Z":n||t?"T"+mt(t,2)+":"+mt(n,2)+"Z":"")}function x5(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var d,m,p=i(f,function(y,g){if(d)return d(y,g-1);m=y,d=h?w5(y,h):um(y)});return p.columns=m||[],p}function i(f,h){var d=[],m=f.length,p=0,y=0,g,b=m<=0,w=!1;f.charCodeAt(m-1)===ki&&--m,f.charCodeAt(m-1)===Ts&&--m;function v(){if(b)return Cs;if(w)return w=!1,dh;var _,P=p,$;if(f.charCodeAt(P)===ks){for(;p++<m&&f.charCodeAt(p)!==ks||f.charCodeAt(++p)===ks;);return(_=p)>=m?b=!0:($=f.charCodeAt(p++))===ki?w=!0:$===Ts&&(w=!0,f.charCodeAt(p)===ki&&++p),f.slice(P+1,_-1).replace(/""/g,'"')}for(;p<m;){if(($=f.charCodeAt(_=p++))===ki)w=!0;else if($===Ts)w=!0,f.charCodeAt(p)===ki&&++p;else if($!==n)continue;return f.slice(P,_)}return b=!0,f.slice(P,m)}for(;(g=v())!==Cs;){for(var M=[];g!==dh&&g!==Cs;)M.push(g),g=v();h&&(M=h(M,y++))==null||d.push(M)}return d}function a(f,h){return f.map(function(d){return h.map(function(m){return c(d[m])}).join(e)})}function o(f,h){return h==null&&(h=mh(f)),[h.map(c).join(e)].concat(a(f,h)).join(`
`)}function u(f,h){return h==null&&(h=mh(f)),a(f,h).join(`
`)}function s(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?M5(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:u,formatRows:s,formatRow:l,formatValue:c}}var P5=x5(","),S5=P5.parse;function A5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Xo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function li(e){return e=Xo(Math.abs(e)),e?e[1]:NaN}function E5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function $5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var C5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function la(e){if(!(t=C5.exec(e)))throw new Error("invalid format: "+e);var t;return new Bc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}la.prototype=Bc.prototype;function Bc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Bc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var sm;function T5(e,t){var n=Xo(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(sm=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Xo(e,Math.max(0,t+a-1))[0]}function ph(e,t){var n=Xo(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const bh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:A5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ph(e*100,t),r:ph,s:T5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gh(e){return e}var yh=Array.prototype.map,vh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function N5(e){var t=e.grouping===void 0||e.thousands===void 0?gh:E5(yh.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?gh:$5(yh.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"−":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function l(f){f=la(f);var h=f.fill,d=f.align,m=f.sign,p=f.symbol,y=f.zero,g=f.width,b=f.comma,w=f.precision,v=f.trim,M=f.type;M==="n"?(b=!0,M="g"):bh[M]||(w===void 0&&(w=12),v=!0,M="g"),(y||h==="0"&&d==="=")&&(y=!0,h="0",d="=");var _=p==="$"?n:p==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",P=p==="$"?r:/[%p]/.test(M)?o:"",$=bh[M],C=/[defgprs%]/.test(M);w=w===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function F(S){var A=_,B=P,L,E,q;if(M==="c")B=$(S)+B,S="";else{S=+S;var re=S<0||1/S<0;if(S=isNaN(S)?s:$(Math.abs(S),w),v&&(S=k5(S)),re&&+S==0&&m!=="+"&&(re=!1),A=(re?m==="("?m:u:m==="-"||m==="("?"":m)+A,B=(M==="s"?vh[8+sm/3]:"")+B+(re&&m==="("?")":""),C){for(L=-1,E=S.length;++L<E;)if(q=S.charCodeAt(L),48>q||q>57){B=(q===46?i+S.slice(L+1):S.slice(L))+B,S=S.slice(0,L);break}}}b&&!y&&(S=t(S,1/0));var X=A.length+S.length+B.length,J=X<g?new Array(g-X+1).join(h):"";switch(b&&y&&(S=t(J+S,J.length?g-B.length:1/0),J=""),d){case"<":S=A+S+B+J;break;case"=":S=A+J+S+B;break;case"^":S=J.slice(0,X=J.length>>1)+A+S+B+J.slice(X);break;default:S=J+A+S+B;break}return a(S)}return F.toString=function(){return f+""},F}function c(f,h){var d=l((f=la(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(li(h)/3)))*3,p=Math.pow(10,-m),y=vh[8+m/3];return function(g){return d(p*g)+y}}return{format:l,formatPrefix:c}}var io,xi,lm;D5({thousands:",",grouping:[3],currency:["$",""]});function D5(e){return io=N5(e),xi=io.format,lm=io.formatPrefix,io}function F5(e){return Math.max(0,-li(Math.abs(e)))}function B5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(li(t)/3)))*3-li(Math.abs(e)))}function L5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,li(t)-li(e))+1}var pe=1e-6,cm=1e-12,ve=Math.PI,Be=ve/2,wh=ve/4,St=ve*2,ot=180/ve,Fe=ve/180,Se=Math.abs,Pi=Math.atan,Nn=Math.atan2,ye=Math.cos,fm=Math.exp,Zo=Math.log,Ns=Math.pow,he=Math.sin,Dt=Math.sign||function(e){return e>0?1:e<0?-1:0},yt=Math.sqrt,Lc=Math.tan;function hm(e){return e>1?0:e<-1?ve:Math.acos(e)}function Rt(e){return e>1?Be:e<-1?-Be:Math.asin(e)}function Ft(){}function Ko(e,t){e&&Mh.hasOwnProperty(e.type)&&Mh[e.type](e,t)}var _h={Feature:function(e,t){Ko(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Ko(n[r].geometry,t)}},Mh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cl(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Cl(n[r],t,0)},Polygon:function(e,t){xh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)xh(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Ko(n[r],t)}};function Cl(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function xh(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Cl(e[n],t,1);t.polygonEnd()}function cr(e,t){e&&_h.hasOwnProperty(e.type)?_h[e.type](e,t):Ko(e,t)}function kl(e){return[Nn(e[1],e[0]),Rt(e[2])]}function ci(e){var t=e[0],n=e[1],r=ye(n);return[r*ye(t),r*he(t),he(n)]}function ao(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ds(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function oo(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Tl(e){var t=yt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Nl(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Dl(e,t){return Se(e)>ve&&(e-=Math.round(e/St)*St),[e,t]}Dl.invert=Dl;function dm(e,t,n){return(e%=St)?t||n?Nl(Sh(e),Ah(t,n)):Sh(e):t||n?Ah(t,n):Dl}function Ph(e){return function(t,n){return t+=e,Se(t)>ve&&(t-=Math.round(t/St)*St),[t,n]}}function Sh(e){var t=Ph(e);return t.invert=Ph(-e),t}function Ah(e,t){var n=ye(e),r=he(e),i=ye(t),a=he(t);function o(u,s){var l=ye(s),c=ye(u)*l,f=he(u)*l,h=he(s),d=h*n+c*r;return[Nn(f*i-d*a,c*n-h*r),Rt(d*i+f*a)]}return o.invert=function(u,s){var l=ye(s),c=ye(u)*l,f=he(u)*l,h=he(s),d=h*i-f*a;return[Nn(f*i+h*a,c*n+d*r),Rt(d*n-c*r)]},o}function I5(e){e=dm(e[0]*Fe,e[1]*Fe,e.length>2?e[2]*Fe:0);function t(n){return n=e(n[0]*Fe,n[1]*Fe),n[0]*=ot,n[1]*=ot,n}return t.invert=function(n){return n=e.invert(n[0]*Fe,n[1]*Fe),n[0]*=ot,n[1]*=ot,n},t}function R5(e,t,n,r,i,a){if(n){var o=ye(t),u=he(t),s=r*n;i==null?(i=t+r*St,a=t-s/2):(i=Eh(o,i),a=Eh(o,a),(r>0?i<a:i>a)&&(i+=r*St));for(var l,c=i;r>0?c>a:c<a;c-=s)l=kl([o,-u*ye(c),-u*he(c)]),e.point(l[0],l[1])}}function Eh(e,t){t=ci(t),t[0]-=e,Tl(t);var n=hm(-t[1]);return((-t[2]<0?-n:n)+St-pe)%St}function mm(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ft,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Co(e,t){return Se(e[0]-t[0])<pe&&Se(e[1]-t[1])<pe}function uo(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pm(e,t,n,r,i){var a=[],o=[],u,s;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,y=m[0],g=m[p],b;if(Co(y,g)){if(!y[2]&&!g[2]){for(i.lineStart(),u=0;u<p;++u)i.point((y=m[u])[0],y[1]);i.lineEnd();return}g[0]+=2*pe}a.push(b=new uo(y,m,null,!0)),o.push(b.o=new uo(y,null,b,!1)),a.push(b=new uo(g,m,null,!1)),o.push(b.o=new uo(g,null,b,!0))}}),!!a.length){for(o.sort(t),$h(a),$h(o),u=0,s=o.length;u<s;++u)o[u].e=n=!n;for(var l=a[0],c,f;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function $h(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Fs(e){return Se(e[0])<=ve?e[0]:Dt(e[0])*((Se(e[0])+ve)%St-ve)}function O5(e,t){var n=Fs(t),r=t[1],i=he(r),a=[he(n),-ye(n),0],o=0,u=0,s=new vr;i===1?r=Be+pe:i===-1&&(r=-Be-pe);for(var l=0,c=e.length;l<c;++l)if(h=(f=e[l]).length)for(var f,h,d=f[h-1],m=Fs(d),p=d[1]/2+wh,y=he(p),g=ye(p),b=0;b<h;++b,m=v,y=_,g=P,d=w){var w=f[b],v=Fs(w),M=w[1]/2+wh,_=he(M),P=ye(M),$=v-m,C=$>=0?1:-1,F=C*$,S=F>ve,A=y*_;if(s.add(Nn(A*C*he(F),g*P+A*ye(F))),o+=S?$+C*St:$,S^m>=n^v>=n){var B=Qo(ci(d),ci(w));Tl(B);var L=Qo(a,B);Tl(L);var E=(S^$>=0?-1:1)*Rt(L[2]);(r>E||r===E&&(B[0]||B[1]))&&(u+=S^$>=0?1:-1)}}return(o<-pe||o<pe&&s<-cm)^u&1}function bm(e,t,n,r){return function(i){var a=t(i),o=mm(),u=t(o),s=!1,l,c,f,h={point:d,lineStart:p,lineEnd:y,polygonStart:function(){h.point=g,h.lineStart=b,h.lineEnd=w,c=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=p,h.lineEnd=y,c=x1(c);var v=O5(l,r);c.length?(s||(i.polygonStart(),s=!0),pm(c,G5,v,n,i)):v&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(v,M){e(v,M)&&i.point(v,M)}function m(v,M){a.point(v,M)}function p(){h.point=m,a.lineStart()}function y(){h.point=d,a.lineEnd()}function g(v,M){f.push([v,M]),u.point(v,M)}function b(){u.lineStart(),f=[]}function w(){g(f[0][0],f[0][1]),u.lineEnd();var v=u.clean(),M=o.result(),_,P=M.length,$,C,F;if(f.pop(),l.push(f),f=null,!!P){if(v&1){if(C=M[0],($=C.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),_=0;_<$;++_)i.point((F=C[_])[0],F[1]);i.lineEnd()}return}P>1&&v&2&&M.push(M.pop().concat(M.shift())),c.push(M.filter(q5))}}return h}}function q5(e){return e.length>1}function G5(e,t){return((e=e.x)[0]<0?e[1]-Be-pe:Be-e[1])-((t=t.x)[0]<0?t[1]-Be-pe:Be-t[1])}const Ch=bm(function(){return!0},U5,H5,[-ve,-Be]);function U5(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var u=a>0?ve:-ve,s=Se(a-t);Se(s-ve)<pe?(e.point(t,n=(n+o)/2>0?Be:-Be),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(a,n),i=0):r!==u&&s>=ve&&(Se(t-r)<pe&&(t-=r*pe),Se(a-u)<pe&&(a-=u*pe),n=z5(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=a,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function z5(e,t,n,r){var i,a,o=he(e-n);return Se(o)>pe?Pi((he(t)*(a=ye(r))*he(n)-he(r)*(i=ye(t))*he(e))/(i*a*o)):(t+r)/2}function H5(e,t,n,r){var i;if(e==null)i=n*Be,r.point(-ve,i),r.point(0,i),r.point(ve,i),r.point(ve,0),r.point(ve,-i),r.point(0,-i),r.point(-ve,-i),r.point(-ve,0),r.point(-ve,i);else if(Se(e[0]-t[0])>pe){var a=e[0]<t[0]?ve:-ve;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function W5(e){var t=ye(e),n=6*Fe,r=t>0,i=Se(t)>pe;function a(c,f,h,d){R5(d,e,n,h,c,f)}function o(c,f){return ye(c)*ye(f)>t}function u(c){var f,h,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(y,g){var b=[y,g],w,v=o(y,g),M=r?v?0:l(y,g):v?l(y+(y<0?ve:-ve),g):0;if(!f&&(m=d=v)&&c.lineStart(),v!==d&&(w=s(f,b),(!w||Co(f,w)||Co(b,w))&&(b[2]=1)),v!==d)p=0,v?(c.lineStart(),w=s(b,f),c.point(w[0],w[1])):(w=s(f,b),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^v){var _;!(M&h)&&(_=s(b,f,!0))&&(p=0,r?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}v&&(!f||!Co(f,b))&&c.point(b[0],b[1]),f=b,d=v,h=M},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return p|(m&&d)<<1}}}function s(c,f,h){var d=ci(c),m=ci(f),p=[1,0,0],y=Qo(d,m),g=ao(y,y),b=y[0],w=g-b*b;if(!w)return!h&&c;var v=t*g/w,M=-t*b/w,_=Qo(p,y),P=oo(p,v),$=oo(y,M);Ds(P,$);var C=_,F=ao(P,C),S=ao(C,C),A=F*F-S*(ao(P,P)-1);if(!(A<0)){var B=yt(A),L=oo(C,(-F-B)/S);if(Ds(L,P),L=kl(L),!h)return L;var E=c[0],q=f[0],re=c[1],X=f[1],J;q<E&&(J=E,E=q,q=J);var G=q-E,H=Se(G-ve)<pe,U=H||G<pe;if(!H&&X<re&&(J=re,re=X,X=J),U?H?re+X>0^L[1]<(Se(L[0]-E)<pe?re:X):re<=L[1]&&L[1]<=X:G>ve^(E<=L[0]&&L[0]<=q)){var V=oo(C,(-F+B)/S);return Ds(V,P),[L,kl(V)]}}}function l(c,f){var h=r?e:ve-e,d=0;return c<-h?d|=1:c>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return bm(o,u,a,r?[0,-e]:[-ve,e-ve])}function V5(e,t,n,r,i,a){var o=e[0],u=e[1],s=t[0],l=t[1],c=0,f=1,h=s-o,d=l-u,m;if(m=n-o,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=i-o,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}if(m=r-u,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=a-u,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=o+c*h,e[1]=u+c*d),f<1&&(t[0]=o+f*h,t[1]=u+f*d),!0}}}}}var qi=1e9,so=-qi;function gm(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function a(l,c,f,h){var d=0,m=0;if(l==null||(d=o(l,f))!==(m=o(c,f))||s(l,c)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==m);else h.point(c[0],c[1])}function o(l,c){return Se(l[0]-e)<pe?c>0?0:3:Se(l[0]-n)<pe?c>0?2:1:Se(l[1]-t)<pe?c>0?1:0:c>0?3:2}function u(l,c){return s(l.x,c.x)}function s(l,c){var f=o(l,1),h=o(c,1);return f!==h?f-h:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=mm(),h,d,m,p,y,g,b,w,v,M,_,P={point:$,lineStart:A,lineEnd:B,polygonStart:F,polygonEnd:S};function $(E,q){i(E,q)&&c.point(E,q)}function C(){for(var E=0,q=0,re=d.length;q<re;++q)for(var X=d[q],J=1,G=X.length,H=X[0],U,V,ne=H[0],ae=H[1];J<G;++J)U=ne,V=ae,H=X[J],ne=H[0],ae=H[1],V<=r?ae>r&&(ne-U)*(r-V)>(ae-V)*(e-U)&&++E:ae<=r&&(ne-U)*(r-V)<(ae-V)*(e-U)&&--E;return E}function F(){c=f,h=[],d=[],_=!0}function S(){var E=C(),q=_&&E,re=(h=x1(h)).length;(q||re)&&(l.polygonStart(),q&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),re&&pm(h,u,E,a,l),l.polygonEnd()),c=l,h=d=m=null}function A(){P.point=L,d&&d.push(m=[]),M=!0,v=!1,b=w=NaN}function B(){h&&(L(p,y),g&&v&&f.rejoin(),h.push(f.result())),P.point=$,v&&c.lineEnd()}function L(E,q){var re=i(E,q);if(d&&m.push([E,q]),M)p=E,y=q,g=re,M=!1,re&&(c.lineStart(),c.point(E,q));else if(re&&v)c.point(E,q);else{var X=[b=Math.max(so,Math.min(qi,b)),w=Math.max(so,Math.min(qi,w))],J=[E=Math.max(so,Math.min(qi,E)),q=Math.max(so,Math.min(qi,q))];V5(X,J,e,t,n,r)?(v||(c.lineStart(),c.point(X[0],X[1])),c.point(J[0],J[1]),re||c.lineEnd(),_=!1):re&&(c.lineStart(),c.point(E,q),_=!1)}b=E,w=q,v=re}return P}}const Fl=e=>e;var Bs=new vr,Bl=new vr,ym,vm,Ll,Il,Pn={point:Ft,lineStart:Ft,lineEnd:Ft,polygonStart:function(){Pn.lineStart=Y5,Pn.lineEnd=X5},polygonEnd:function(){Pn.lineStart=Pn.lineEnd=Pn.point=Ft,Bs.add(Se(Bl)),Bl=new vr},result:function(){var e=Bs/2;return Bs=new vr,e}};function Y5(){Pn.point=j5}function j5(e,t){Pn.point=wm,ym=Ll=e,vm=Il=t}function wm(e,t){Bl.add(Il*e-Ll*t),Ll=e,Il=t}function X5(){wm(ym,vm)}var fi=1/0,Jo=fi,ca=-fi,eu=ca,tu={point:Z5,lineStart:Ft,lineEnd:Ft,polygonStart:Ft,polygonEnd:Ft,result:function(){var e=[[fi,Jo],[ca,eu]];return ca=eu=-(Jo=fi=1/0),e}};function Z5(e,t){e<fi&&(fi=e),e>ca&&(ca=e),t<Jo&&(Jo=t),t>eu&&(eu=t)}var Rl=0,Ol=0,Gi=0,nu=0,ru=0,Ur=0,ql=0,Gl=0,Ui=0,_m,Mm,nn,rn,Tt={point:Sr,lineStart:kh,lineEnd:Th,polygonStart:function(){Tt.lineStart=J5,Tt.lineEnd=e7},polygonEnd:function(){Tt.point=Sr,Tt.lineStart=kh,Tt.lineEnd=Th},result:function(){var e=Ui?[ql/Ui,Gl/Ui]:Ur?[nu/Ur,ru/Ur]:Gi?[Rl/Gi,Ol/Gi]:[NaN,NaN];return Rl=Ol=Gi=nu=ru=Ur=ql=Gl=Ui=0,e}};function Sr(e,t){Rl+=e,Ol+=t,++Gi}function kh(){Tt.point=K5}function K5(e,t){Tt.point=Q5,Sr(nn=e,rn=t)}function Q5(e,t){var n=e-nn,r=t-rn,i=yt(n*n+r*r);nu+=i*(nn+e)/2,ru+=i*(rn+t)/2,Ur+=i,Sr(nn=e,rn=t)}function Th(){Tt.point=Sr}function J5(){Tt.point=t7}function e7(){xm(_m,Mm)}function t7(e,t){Tt.point=xm,Sr(_m=nn=e,Mm=rn=t)}function xm(e,t){var n=e-nn,r=t-rn,i=yt(n*n+r*r);nu+=i*(nn+e)/2,ru+=i*(rn+t)/2,Ur+=i,i=rn*e-nn*t,ql+=i*(nn+e),Gl+=i*(rn+t),Ui+=i*3,Sr(nn=e,rn=t)}function Pm(e){this._context=e}Pm.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,St);break}}},result:Ft};var Ul=new vr,Ls,Sm,Am,zi,Hi,fa={point:Ft,lineStart:function(){fa.point=n7},lineEnd:function(){Ls&&Em(Sm,Am),fa.point=Ft},polygonStart:function(){Ls=!0},polygonEnd:function(){Ls=null},result:function(){var e=+Ul;return Ul=new vr,e}};function n7(e,t){fa.point=Em,Sm=zi=e,Am=Hi=t}function Em(e,t){zi-=e,Hi-=t,Ul.add(yt(zi*zi+Hi*Hi)),zi=e,Hi=t}let Nh,iu,Dh,Fh;class Bh{constructor(t){this._append=t==null?$m:r7(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Dh||this._append!==iu){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Dh=r,iu=this._append,Fh=this._,this._=i}this._+=Fh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function $m(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function r7(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return $m;if(t!==Nh){const n=10**t;Nh=t,iu=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return iu}function qu(e,t){let n=3,r=4.5,i,a;function o(u){return u&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),cr(u,i(a))),a.result()}return o.area=function(u){return cr(u,i(Pn)),Pn.result()},o.measure=function(u){return cr(u,i(fa)),fa.result()},o.bounds=function(u){return cr(u,i(tu)),tu.result()},o.centroid=function(u){return cr(u,i(Tt)),Tt.result()},o.projection=function(u){return arguments.length?(i=u==null?(e=null,Fl):(e=u).stream,o):e},o.context=function(u){return arguments.length?(a=u==null?(t=null,new Bh(n)):new Pm(t=u),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(a.pointRadius(+u),+u),o):r},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const s=Math.floor(u);if(!(s>=0))throw new RangeError(`invalid digits: ${u}`);n=s}return t===null&&(a=new Bh(n)),o},o.projection(e).digits(n).context(t)}function zl(e){return{stream:Gu(e)}}function Gu(e){return function(t){var n=new Hl;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Hl(){}Hl.prototype={constructor:Hl,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ic(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),cr(n,e.stream(tu)),t(tu.result()),r!=null&&e.clipExtent(r),e}function Rc(e,t,n){return Ic(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([u,s])},n)}function Cm(e,t,n){return Rc(e,[[0,0],t],n)}function km(e,t,n){return Ic(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,u=-a*r[0][1];e.scale(150*a).translate([o,u])},n)}function Tm(e,t,n){return Ic(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],u=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,u])},n)}var Lh=16,i7=ye(30*Fe);function Ih(e,t){return+t?o7(e,t):a7(e)}function a7(e){return Gu({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function o7(e,t){function n(r,i,a,o,u,s,l,c,f,h,d,m,p,y){var g=l-r,b=c-i,w=g*g+b*b;if(w>4*t&&p--){var v=o+h,M=u+d,_=s+m,P=yt(v*v+M*M+_*_),$=Rt(_/=P),C=Se(Se(_)-1)<pe||Se(a-f)<pe?(a+f)/2:Nn(M,v),F=e(C,$),S=F[0],A=F[1],B=S-r,L=A-i,E=b*B-g*L;(E*E/w>t||Se((g*B+b*L)/w-.5)>.3||o*h+u*d+s*m<i7)&&(n(r,i,a,o,u,s,S,A,C,v/=P,M/=P,_,p,y),y.point(S,A),n(S,A,C,v,M,_,l,c,f,h,d,m,p,y))}}return function(r){var i,a,o,u,s,l,c,f,h,d,m,p,y={point:g,lineStart:b,lineEnd:v,polygonStart:function(){r.polygonStart(),y.lineStart=M},polygonEnd:function(){r.polygonEnd(),y.lineStart=b}};function g($,C){$=e($,C),r.point($[0],$[1])}function b(){f=NaN,y.point=w,r.lineStart()}function w($,C){var F=ci([$,C]),S=e($,C);n(f,h,c,d,m,p,f=S[0],h=S[1],c=$,d=F[0],m=F[1],p=F[2],Lh,r),r.point(f,h)}function v(){y.point=g,r.lineEnd()}function M(){b(),y.point=_,y.lineEnd=P}function _($,C){w(i=$,C),a=f,o=h,u=d,s=m,l=p,y.point=w}function P(){n(f,h,c,d,m,p,a,o,i,u,s,l,Lh,r),y.lineEnd=v,v()}return y}}var u7=Gu({point:function(e,t){this.stream.point(e*Fe,t*Fe)}});function s7(e){return Gu({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function l7(e,t,n,r,i){function a(o,u){return o*=r,u*=i,[t+e*o,n-e*u]}return a.invert=function(o,u){return[(o-t)/e*r,(n-u)/e*i]},a}function Rh(e,t,n,r,i,a){if(!a)return l7(e,t,n,r,i);var o=ye(a),u=he(a),s=o*e,l=u*e,c=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function m(p,y){return p*=r,y*=i,[s*p-l*y+t,n-l*p-s*y]}return m.invert=function(p,y){return[r*(c*p-f*y+h),i*(d-f*p-c*y)]},m}function nr(e){return Nm(function(){return e})()}function Nm(e){var t,n=150,r=480,i=250,a=0,o=0,u=0,s=0,l=0,c,f=0,h=1,d=1,m=null,p=Ch,y=null,g,b,w,v=Fl,M=.5,_,P,$,C,F;function S(E){return $(E[0]*Fe,E[1]*Fe)}function A(E){return E=$.invert(E[0],E[1]),E&&[E[0]*ot,E[1]*ot]}S.stream=function(E){return C&&F===E?C:C=u7(s7(c)(p(_(v(F=E)))))},S.preclip=function(E){return arguments.length?(p=E,m=void 0,L()):p},S.postclip=function(E){return arguments.length?(v=E,y=g=b=w=null,L()):v},S.clipAngle=function(E){return arguments.length?(p=+E?W5(m=E*Fe):(m=null,Ch),L()):m*ot},S.clipExtent=function(E){return arguments.length?(v=E==null?(y=g=b=w=null,Fl):gm(y=+E[0][0],g=+E[0][1],b=+E[1][0],w=+E[1][1]),L()):y==null?null:[[y,g],[b,w]]},S.scale=function(E){return arguments.length?(n=+E,B()):n},S.translate=function(E){return arguments.length?(r=+E[0],i=+E[1],B()):[r,i]},S.center=function(E){return arguments.length?(a=E[0]%360*Fe,o=E[1]%360*Fe,B()):[a*ot,o*ot]},S.rotate=function(E){return arguments.length?(u=E[0]%360*Fe,s=E[1]%360*Fe,l=E.length>2?E[2]%360*Fe:0,B()):[u*ot,s*ot,l*ot]},S.angle=function(E){return arguments.length?(f=E%360*Fe,B()):f*ot},S.reflectX=function(E){return arguments.length?(h=E?-1:1,B()):h<0},S.reflectY=function(E){return arguments.length?(d=E?-1:1,B()):d<0},S.precision=function(E){return arguments.length?(_=Ih(P,M=E*E),L()):yt(M)},S.fitExtent=function(E,q){return Rc(S,E,q)},S.fitSize=function(E,q){return Cm(S,E,q)},S.fitWidth=function(E,q){return km(S,E,q)},S.fitHeight=function(E,q){return Tm(S,E,q)};function B(){var E=Rh(n,0,0,h,d,f).apply(null,t(a,o)),q=Rh(n,r-E[0],i-E[1],h,d,f);return c=dm(u,s,l),P=Nl(t,q),$=Nl(c,P),_=Ih(P,M),L()}function L(){return C=F=null,S}return function(){return t=e.apply(this,arguments),S.invert=t.invert&&A,B()}}function Oc(e){var t=0,n=ve/3,r=Nm(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Fe,n=a[1]*Fe):[t*ot,n*ot]},i}function c7(e){var t=ye(e);function n(r,i){return[r*t,he(i)/t]}return n.invert=function(r,i){return[r/t,Rt(i*t)]},n}function f7(e,t){var n=he(e),r=(n+he(t))/2;if(Se(r)<pe)return c7(e);var i=1+n*(2*r-n),a=yt(i)/r;function o(u,s){var l=yt(i-2*r*he(s))/r;return[l*he(u*=r),a-l*ye(u)]}return o.invert=function(u,s){var l=a-s,c=Nn(u,Se(l))*Dt(l);return l*r<0&&(c-=ve*Dt(u)*Dt(l)),[c/r,Rt((i-(u*u+l*l)*r*r)/(2*r))]},o}function au(){return Oc(f7).scale(155.424).center([0,33.6442])}function Dm(){return au().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function h7(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function d7(){var e,t,n=Dm(),r,i=au().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=au().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,s,l={point:function(h,d){s=[h,d]}};function c(h){var d=h[0],m=h[1];return s=null,r.point(d,m),s||(a.point(d,m),s)||(u.point(d,m),s)}c.invert=function(h){var d=n.scale(),m=n.translate(),p=(h[0]-m[0])/d,y=(h[1]-m[1])/d;return(y>=.12&&y<.234&&p>=-.425&&p<-.214?i:y>=.166&&y<.234&&p>=-.214&&p<-.115?o:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=h7([n.stream(t=h),i.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),f()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),m=+h[0],p=+h[1];return r=n.translate(h).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(l),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+pe,p+.12*d+pe],[m-.214*d-pe,p+.234*d-pe]]).stream(l),u=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+pe,p+.166*d+pe],[m-.115*d-pe,p+.234*d-pe]]).stream(l),f()},c.fitExtent=function(h,d){return Rc(c,h,d)},c.fitSize=function(h,d){return Cm(c,h,d)},c.fitWidth=function(h,d){return km(c,h,d)},c.fitHeight=function(h,d){return Tm(c,h,d)};function f(){return e=t=null,c}return c.scale(1070)}function Fm(e){return function(t,n){var r=ye(t),i=ye(n),a=e(r*i);return a===1/0?[2,0]:[a*i*he(t),a*he(n)]}}function Ca(e){return function(t,n){var r=yt(t*t+n*n),i=e(r),a=he(i),o=ye(i);return[Nn(t*a,r*o),Rt(r&&n*a/r)]}}var Bm=Fm(function(e){return yt(2/(1+e))});Bm.invert=Ca(function(e){return 2*Rt(e/2)});function m7(){return nr(Bm).scale(124.75).clipAngle(180-.001)}var Lm=Fm(function(e){return(e=hm(e))&&e/he(e)});Lm.invert=Ca(function(e){return e});function p7(){return nr(Lm).scale(79.4188).clipAngle(180-.001)}function Uu(e,t){return[e,Zo(Lc((Be+t)/2))]}Uu.invert=function(e,t){return[e,2*Pi(fm(t))-Be]};function b7(){return Im(Uu).scale(961/St)}function Im(e){var t=nr(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,u,s,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=u=s=l=null:(o=+f[0][0],u=+f[0][1],s=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,u],[s,l]]};function c(){var f=ve*r(),h=t(I5(t.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Uu?[[Math.max(h[0]-f,o),u],[Math.min(h[0]+f,s),l]]:[[o,Math.max(h[1]-f,u)],[s,Math.min(h[1]+f,l)]])}return c()}function lo(e){return Lc((Be+e)/2)}function g7(e,t){var n=ye(e),r=e===t?he(e):Zo(n/ye(t))/Zo(lo(t)/lo(e)),i=n*Ns(lo(e),r)/r;if(!r)return Uu;function a(o,u){i>0?u<-Be+pe&&(u=-Be+pe):u>Be-pe&&(u=Be-pe);var s=i/Ns(lo(u),r);return[s*he(r*o),i-s*ye(r*o)]}return a.invert=function(o,u){var s=i-u,l=Dt(r)*yt(o*o+s*s),c=Nn(o,Se(s))*Dt(s);return s*r<0&&(c-=ve*Dt(o)*Dt(s)),[c/r,2*Pi(Ns(i/l,1/r))-Be]},a}function y7(){return Oc(g7).scale(109.5).parallels([30,30])}function ou(e,t){return[e,t]}ou.invert=ou;function v7(){return nr(ou).scale(152.63)}function w7(e,t){var n=ye(e),r=e===t?he(e):(n-ye(t))/(t-e),i=n/r+e;if(Se(r)<pe)return ou;function a(o,u){var s=i-u,l=r*o;return[s*he(l),i-s*ye(l)]}return a.invert=function(o,u){var s=i-u,l=Nn(o,Se(s))*Dt(s);return s*r<0&&(l-=ve*Dt(o)*Dt(s)),[l/r,i-Dt(r)*yt(o*o+s*s)]},a}function _7(){return Oc(w7).scale(131.154).center([0,13.9389])}var Qi=1.340264,Ji=-.081106,ea=893e-6,ta=.003796,uu=yt(3)/2,M7=12;function Rm(e,t){var n=Rt(uu*he(t)),r=n*n,i=r*r*r;return[e*ye(n)/(uu*(Qi+3*Ji*r+i*(7*ea+9*ta*r))),n*(Qi+Ji*r+i*(ea+ta*r))]}Rm.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,u,s;a<M7&&(u=n*(Qi+Ji*r+i*(ea+ta*r))-t,s=Qi+3*Ji*r+i*(7*ea+9*ta*r),n-=o=u/s,r=n*n,i=r*r*r,!(Se(o)<cm));++a);return[uu*e*(Qi+3*Ji*r+i*(7*ea+9*ta*r))/ye(n),Rt(he(n)/uu)]};function x7(){return nr(Rm).scale(177.158)}function Om(e,t){var n=ye(t),r=ye(e)*n;return[n*he(e)/r,he(t)/r]}Om.invert=Ca(Pi);function P7(){return nr(Om).scale(144.049).clipAngle(60)}function qm(e,t){return[ye(t)*he(e),he(t)]}qm.invert=Ca(Rt);function S7(){return nr(qm).scale(249.5).clipAngle(90+pe)}function Gm(e,t){var n=ye(t),r=1+ye(e)*n;return[n*he(e)/r,he(t)/r]}Gm.invert=Ca(function(e){return 2*Pi(e)});function A7(){return nr(Gm).scale(250).clipAngle(142)}function Um(e,t){return[Zo(Lc((Be+t)/2)),-e]}Um.invert=function(e,t){return[-t,2*Pi(fm(e))-Be]};function E7(){var e=Im(Um),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function pn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function zu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Wl=Symbol("implicit");function qc(){var e=new wr,t=[],n=[],r=Wl;function i(a){let o=e.get(a);if(o===void 0){if(r!==Wl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new wr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return qc(t,n).unknown(r)},pn.apply(i,arguments),i}function Hu(){var e=qc().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,u=!1,s=0,l=0,c=.5;delete e.unknown;function f(){var h=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,h-s+l*2),u&&(a=Math.floor(a)),m+=(p-m-a*(h-s))*c,o=a*(1-s),u&&(m=Math.round(m),o=Math.round(o));var y=bl(h).map(function(g){return m+a*g});return n(d?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(u=!!h,f()):u},e.padding=function(h){return arguments.length?(s=Math.min(1,l=+h),f()):s},e.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return Hu(t(),[r,i]).round(u).paddingInner(s).paddingOuter(l).align(c)},pn.apply(f(),arguments)}function zm(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return zm(t())},e}function $7(){return zm(Hu.apply(null,arguments).paddingInner(1))}function C7(e){return function(){return e}}function Vl(e){return+e}var Oh=[0,1];function Bt(e){return e}function Yl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:C7(isNaN(t)?NaN:.5)}function k7(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function T7(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Yl(i,r),a=n(o,a)):(r=Yl(r,i),a=n(a,o)),function(u){return a(r(u))}}function N7(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Yl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var s=Eu(e,u,1,r)-1;return a[s](i[s](u))}}function ka(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wu(){var e=Oh,t=Oh,n=$a,r,i,a,o=Bt,u,s,l;function c(){var h=Math.min(e.length,t.length);return o!==Bt&&(o=k7(e[0],e[h-1])),u=h>2?N7:T7,s=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(s||(s=u(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=u(t,e.map(r),tt)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Vl),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=kc,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Bt,c()):o!==Bt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Hm(){return Wu()(Bt,Bt)}function D7(e,t,n,r){var i=ml(e,t,n),a;switch(r=la(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=B5(i,o))&&(r.precision=a),lm(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=L5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=F5(i))&&(r.precision=a-(r.type==="%")*2);break}}return xi(r)}function Ta(e){var t=e.domain;return e.ticks=function(n){var r=t();return aa(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return D7(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],u=r[a],s,l,c=10;for(u<o&&(l=o,o=u,u=l,l=i,i=a,a=l);c-- >0;){if(l=Go(o,u,n),l===s)return r[i]=o,r[a]=u,t(r);if(l>0)o=Math.floor(o/l)*l,u=Math.ceil(u/l)*l;else if(l<0)o=Math.ceil(o*l)/l,u=Math.floor(u*l)/l;else break;s=l}return e},e}function Gc(){var e=Hm();return e.copy=function(){return ka(e,Gc())},pn.apply(e,arguments),Ta(e)}function Wm(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Vl),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Wm(e).unknown(t)},e=arguments.length?Array.from(e,Vl):[0,1],Ta(n)}function Vm(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function qh(e){return Math.log(e)}function Gh(e){return Math.exp(e)}function F7(e){return-Math.log(-e)}function B7(e){return-Math.exp(-e)}function L7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function I7(e){return e===10?L7:e===Math.E?Math.exp:t=>Math.pow(e,t)}function R7(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Uh(e){return(t,n)=>-e(-t,n)}function Ym(e){const t=e(qh,Gh),n=t.domain;let r=10,i,a;function o(){return i=R7(r),a=I7(r),n()[0]<0?(i=Uh(i),a=Uh(a),e(F7,B7)):e(qh,Gh),t}return t.base=function(u){return arguments.length?(r=+u,o()):r},t.domain=function(u){return arguments.length?(n(u),o()):n()},t.ticks=u=>{const s=n();let l=s[0],c=s[s.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),m,p;const y=u==null?10:+u;let g=[];if(!(r%1)&&d-h<y){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(m=1;m<r;++m)if(p=h<0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;g.push(p)}}else for(;h<=d;++h)for(m=r-1;m>=1;--m)if(p=h>0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;g.push(p)}g.length*2<y&&(g=aa(l,c,y))}else g=aa(h,d,Math.min(d-h,y)).map(a);return f?g.reverse():g},t.tickFormat=(u,s)=>{if(u==null&&(u=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=la(s)).precision==null&&(s.trim=!0),s=xi(s)),u===1/0)return s;const l=Math.max(1,r*u/t.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?s(c):""}},t.nice=()=>n(Vm(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function jm(){const e=Ym(Wu()).domain([1,10]);return e.copy=()=>ka(e,jm()).base(e.base()),pn.apply(e,arguments),e}function zh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Hh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Xm(e){var t=1,n=e(zh(t),Hh(t));return n.constant=function(r){return arguments.length?e(zh(t=+r),Hh(t)):t},Ta(n)}function Zm(){var e=Xm(Wu());return e.copy=function(){return ka(e,Zm()).constant(e.constant())},pn.apply(e,arguments)}function Wh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function O7(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function q7(e){return e<0?-e*e:e*e}function Km(e){var t=e(Bt,Bt),n=1;function r(){return n===1?e(Bt,Bt):n===.5?e(O7,q7):e(Wh(n),Wh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ta(t)}function Qm(){var e=Km(Wu());return e.copy=function(){return ka(e,Qm()).exponent(e.exponent())},pn.apply(e,arguments),e}function Jm(){var e=[],t=[],n=[],r;function i(){var o=0,u=Math.max(1,t.length);for(n=new Array(u-1);++o<u;)n[o-1]=$3(e,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Eu(n,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(gt),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Jm().domain(e).range(t).unknown(r)},pn.apply(a,arguments)}function ep(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Eu(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return ep().domain(e).range(t).unknown(n)},pn.apply(i,arguments)}const Is=new Date,Rs=new Date;function ze(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const s=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return s;let l;do s.push(l=new Date(+a)),t(a,u),e(a);while(l<a&&a<o);return s},i.filter=a=>ze(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Is.setTime(+a),Rs.setTime(+o),e(Is),e(Rs),Math.floor(n(Is,Rs))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const su=ze(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);su.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ze(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):su);su.range;const An=1e3,Lt=An*60,En=Lt*60,Dn=En*24,Uc=Dn*7,Vh=Dn*30,Os=Dn*365,Ht=ze(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*An)},(e,t)=>(t-e)/An,e=>e.getUTCSeconds());Ht.range;const Na=ze(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*An)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getMinutes());Na.range;const Da=ze(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Lt)},(e,t)=>(t-e)/Lt,e=>e.getUTCMinutes());Da.range;const Fa=ze(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*An-e.getMinutes()*Lt)},(e,t)=>{e.setTime(+e+t*En)},(e,t)=>(t-e)/En,e=>e.getHours());Fa.range;const Ba=ze(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*En)},(e,t)=>(t-e)/En,e=>e.getUTCHours());Ba.range;const kr=ze(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Lt)/Dn,e=>e.getDate()-1);kr.range;const Vu=ze(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dn,e=>e.getUTCDate()-1);Vu.range;const Yu=ze(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dn,e=>Math.floor(e/Dn));Yu.range;function Tr(e){return ze(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Lt)/Uc)}const hi=Tr(0),ha=Tr(1),tp=Tr(2),np=Tr(3),Ar=Tr(4),rp=Tr(5),ip=Tr(6);hi.range;ha.range;tp.range;np.range;Ar.range;rp.range;ip.range;function Nr(e){return ze(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Uc)}const di=Nr(0),da=Nr(1),ap=Nr(2),op=Nr(3),Er=Nr(4),up=Nr(5),sp=Nr(6);di.range;da.range;ap.range;op.range;Er.range;up.range;sp.range;const La=ze(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());La.range;const Ia=ze(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ia.range;const Vt=ze(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Vt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ze(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Vt.range;const Yt=ze(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Yt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ze(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Yt.range;function lp(e,t,n,r,i,a){const o=[[Ht,1,An],[Ht,5,5*An],[Ht,15,15*An],[Ht,30,30*An],[a,1,Lt],[a,5,5*Lt],[a,15,15*Lt],[a,30,30*Lt],[i,1,En],[i,3,3*En],[i,6,6*En],[i,12,12*En],[r,1,Dn],[r,2,2*Dn],[n,1,Uc],[t,1,Vh],[t,3,3*Vh],[e,1,Os]];function u(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:s(l,c,f),m=d?d.range(l,+c+1):[];return h?m.reverse():m}function s(l,c,f){const h=Math.abs(c-l)/f,d=Au(([,,y])=>y).right(o,h);if(d===o.length)return e.every(ml(l/Os,c/Os,f));if(d===0)return su.every(Math.max(ml(l,c,f),1));const[m,p]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return m.every(p)}return[u,s]}const[G7,cp]=lp(Yt,Ia,di,Yu,Ba,Da),[U7,z7]=lp(Vt,La,hi,kr,Fa,Na);function qs(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Gs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ti(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function H7(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,l=Ni(i),c=Di(i),f=Ni(a),h=Di(a),d=Ni(o),m=Di(o),p=Ni(u),y=Di(u),g=Ni(s),b=Di(s),w={a:re,A:X,b:J,B:G,c:null,d:Qh,e:Qh,f:d6,g:x6,G:S6,H:c6,I:f6,j:h6,L:fp,m:m6,M:p6,p:H,q:U,Q:td,s:nd,S:b6,u:g6,U:y6,V:v6,w:w6,W:_6,x:null,X:null,y:M6,Y:P6,Z:A6,"%":ed},v={a:V,A:ne,b:ae,B:ie,c:null,d:Jh,e:Jh,f:k6,g:q6,G:U6,H:E6,I:$6,j:C6,L:dp,m:T6,M:N6,p:j,q:Y,Q:td,s:nd,S:D6,u:F6,U:B6,V:L6,w:I6,W:R6,x:null,X:null,y:O6,Y:G6,Z:z6,"%":ed},M={a:F,A:S,b:A,B,c:L,d:Zh,e:Zh,f:o6,g:Xh,G:jh,H:Kh,I:Kh,j:n6,L:a6,m:t6,M:r6,p:C,q:e6,Q:s6,s:l6,S:i6,u:X7,U:Z7,V:K7,w:j7,W:Q7,x:E,X:q,y:Xh,Y:jh,Z:J7,"%":u6};w.x=_(n,w),w.X=_(r,w),w.c=_(t,w),v.x=_(n,v),v.X=_(r,v),v.c=_(t,v);function _(D,T){return function(z){var N=[],le=-1,ee=0,ue=D.length,_e,Te,Re;for(z instanceof Date||(z=new Date(+z));++le<ue;)D.charCodeAt(le)===37&&(N.push(D.slice(ee,le)),(Te=Yh[_e=D.charAt(++le)])!=null?_e=D.charAt(++le):Te=_e==="e"?" ":"0",(Re=T[_e])&&(_e=Re(z,Te)),N.push(_e),ee=le+1);return N.push(D.slice(ee,le)),N.join("")}}function P(D,T){return function(z){var N=Ti(1900,void 0,1),le=$(N,D,z+="",0),ee,ue;if(le!=z.length)return null;if("Q"in N)return new Date(N.Q);if("s"in N)return new Date(N.s*1e3+("L"in N?N.L:0));if(T&&!("Z"in N)&&(N.Z=0),"p"in N&&(N.H=N.H%12+N.p*12),N.m===void 0&&(N.m="q"in N?N.q:0),"V"in N){if(N.V<1||N.V>53)return null;"w"in N||(N.w=1),"Z"in N?(ee=Gs(Ti(N.y,0,1)),ue=ee.getUTCDay(),ee=ue>4||ue===0?da.ceil(ee):da(ee),ee=Vu.offset(ee,(N.V-1)*7),N.y=ee.getUTCFullYear(),N.m=ee.getUTCMonth(),N.d=ee.getUTCDate()+(N.w+6)%7):(ee=qs(Ti(N.y,0,1)),ue=ee.getDay(),ee=ue>4||ue===0?ha.ceil(ee):ha(ee),ee=kr.offset(ee,(N.V-1)*7),N.y=ee.getFullYear(),N.m=ee.getMonth(),N.d=ee.getDate()+(N.w+6)%7)}else("W"in N||"U"in N)&&("w"in N||(N.w="u"in N?N.u%7:"W"in N?1:0),ue="Z"in N?Gs(Ti(N.y,0,1)).getUTCDay():qs(Ti(N.y,0,1)).getDay(),N.m=0,N.d="W"in N?(N.w+6)%7+N.W*7-(ue+5)%7:N.w+N.U*7-(ue+6)%7);return"Z"in N?(N.H+=N.Z/100|0,N.M+=N.Z%100,Gs(N)):qs(N)}}function $(D,T,z,N){for(var le=0,ee=T.length,ue=z.length,_e,Te;le<ee;){if(N>=ue)return-1;if(_e=T.charCodeAt(le++),_e===37){if(_e=T.charAt(le++),Te=M[_e in Yh?T.charAt(le++):_e],!Te||(N=Te(D,z,N))<0)return-1}else if(_e!=z.charCodeAt(N++))return-1}return N}function C(D,T,z){var N=l.exec(T.slice(z));return N?(D.p=c.get(N[0].toLowerCase()),z+N[0].length):-1}function F(D,T,z){var N=d.exec(T.slice(z));return N?(D.w=m.get(N[0].toLowerCase()),z+N[0].length):-1}function S(D,T,z){var N=f.exec(T.slice(z));return N?(D.w=h.get(N[0].toLowerCase()),z+N[0].length):-1}function A(D,T,z){var N=g.exec(T.slice(z));return N?(D.m=b.get(N[0].toLowerCase()),z+N[0].length):-1}function B(D,T,z){var N=p.exec(T.slice(z));return N?(D.m=y.get(N[0].toLowerCase()),z+N[0].length):-1}function L(D,T,z){return $(D,t,T,z)}function E(D,T,z){return $(D,n,T,z)}function q(D,T,z){return $(D,r,T,z)}function re(D){return o[D.getDay()]}function X(D){return a[D.getDay()]}function J(D){return s[D.getMonth()]}function G(D){return u[D.getMonth()]}function H(D){return i[+(D.getHours()>=12)]}function U(D){return 1+~~(D.getMonth()/3)}function V(D){return o[D.getUTCDay()]}function ne(D){return a[D.getUTCDay()]}function ae(D){return s[D.getUTCMonth()]}function ie(D){return u[D.getUTCMonth()]}function j(D){return i[+(D.getUTCHours()>=12)]}function Y(D){return 1+~~(D.getUTCMonth()/3)}return{format:function(D){var T=_(D+="",w);return T.toString=function(){return D},T},parse:function(D){var T=P(D+="",!1);return T.toString=function(){return D},T},utcFormat:function(D){var T=_(D+="",v);return T.toString=function(){return D},T},utcParse:function(D){var T=P(D+="",!0);return T.toString=function(){return D},T}}}var Yh={"-":"",_:" ",0:"0"},Qe=/^\s*\d+/,W7=/^%/,V7=/[\\^$*+?|[\]().{}]/g;function Pe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Y7(e){return e.replace(V7,"\\$&")}function Ni(e){return new RegExp("^(?:"+e.map(Y7).join("|")+")","i")}function Di(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function j7(e,t,n){var r=Qe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function X7(e,t,n){var r=Qe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Z7(e,t,n){var r=Qe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function K7(e,t,n){var r=Qe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Q7(e,t,n){var r=Qe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function jh(e,t,n){var r=Qe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xh(e,t,n){var r=Qe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function J7(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function e6(e,t,n){var r=Qe.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function t6(e,t,n){var r=Qe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Zh(e,t,n){var r=Qe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function n6(e,t,n){var r=Qe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Kh(e,t,n){var r=Qe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function r6(e,t,n){var r=Qe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function i6(e,t,n){var r=Qe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function a6(e,t,n){var r=Qe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function o6(e,t,n){var r=Qe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function u6(e,t,n){var r=W7.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function s6(e,t,n){var r=Qe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function l6(e,t,n){var r=Qe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Qh(e,t){return Pe(e.getDate(),t,2)}function c6(e,t){return Pe(e.getHours(),t,2)}function f6(e,t){return Pe(e.getHours()%12||12,t,2)}function h6(e,t){return Pe(1+kr.count(Vt(e),e),t,3)}function fp(e,t){return Pe(e.getMilliseconds(),t,3)}function d6(e,t){return fp(e,t)+"000"}function m6(e,t){return Pe(e.getMonth()+1,t,2)}function p6(e,t){return Pe(e.getMinutes(),t,2)}function b6(e,t){return Pe(e.getSeconds(),t,2)}function g6(e){var t=e.getDay();return t===0?7:t}function y6(e,t){return Pe(hi.count(Vt(e)-1,e),t,2)}function hp(e){var t=e.getDay();return t>=4||t===0?Ar(e):Ar.ceil(e)}function v6(e,t){return e=hp(e),Pe(Ar.count(Vt(e),e)+(Vt(e).getDay()===4),t,2)}function w6(e){return e.getDay()}function _6(e,t){return Pe(ha.count(Vt(e)-1,e),t,2)}function M6(e,t){return Pe(e.getFullYear()%100,t,2)}function x6(e,t){return e=hp(e),Pe(e.getFullYear()%100,t,2)}function P6(e,t){return Pe(e.getFullYear()%1e4,t,4)}function S6(e,t){var n=e.getDay();return e=n>=4||n===0?Ar(e):Ar.ceil(e),Pe(e.getFullYear()%1e4,t,4)}function A6(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pe(t/60|0,"0",2)+Pe(t%60,"0",2)}function Jh(e,t){return Pe(e.getUTCDate(),t,2)}function E6(e,t){return Pe(e.getUTCHours(),t,2)}function $6(e,t){return Pe(e.getUTCHours()%12||12,t,2)}function C6(e,t){return Pe(1+Vu.count(Yt(e),e),t,3)}function dp(e,t){return Pe(e.getUTCMilliseconds(),t,3)}function k6(e,t){return dp(e,t)+"000"}function T6(e,t){return Pe(e.getUTCMonth()+1,t,2)}function N6(e,t){return Pe(e.getUTCMinutes(),t,2)}function D6(e,t){return Pe(e.getUTCSeconds(),t,2)}function F6(e){var t=e.getUTCDay();return t===0?7:t}function B6(e,t){return Pe(di.count(Yt(e)-1,e),t,2)}function mp(e){var t=e.getUTCDay();return t>=4||t===0?Er(e):Er.ceil(e)}function L6(e,t){return e=mp(e),Pe(Er.count(Yt(e),e)+(Yt(e).getUTCDay()===4),t,2)}function I6(e){return e.getUTCDay()}function R6(e,t){return Pe(da.count(Yt(e)-1,e),t,2)}function O6(e,t){return Pe(e.getUTCFullYear()%100,t,2)}function q6(e,t){return e=mp(e),Pe(e.getUTCFullYear()%100,t,2)}function G6(e,t){return Pe(e.getUTCFullYear()%1e4,t,4)}function U6(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Er(e):Er.ceil(e),Pe(e.getUTCFullYear()%1e4,t,4)}function z6(){return"+0000"}function ed(){return"%"}function td(e){return+e}function nd(e){return Math.floor(+e/1e3)}var Lr,zc,Ra;H6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function H6(e){return Lr=H7(e),zc=Lr.format,Lr.parse,Ra=Lr.utcFormat,Lr.utcParse,Lr}function W6(e){return new Date(e)}function V6(e){return e instanceof Date?+e:+new Date(+e)}function Hc(e,t,n,r,i,a,o,u,s,l){var c=Hm(),f=c.invert,h=c.domain,d=l(".%L"),m=l(":%S"),p=l("%I:%M"),y=l("%I %p"),g=l("%a %d"),b=l("%b %d"),w=l("%B"),v=l("%Y");function M(_){return(s(_)<_?d:u(_)<_?m:o(_)<_?p:a(_)<_?y:r(_)<_?i(_)<_?g:b:n(_)<_?w:v)(_)}return c.invert=function(_){return new Date(f(_))},c.domain=function(_){return arguments.length?h(Array.from(_,V6)):h().map(W6)},c.ticks=function(_){var P=h();return e(P[0],P[P.length-1],_??10)},c.tickFormat=function(_,P){return P==null?M:l(P)},c.nice=function(_){var P=h();return(!_||typeof _.range!="function")&&(_=t(P[0],P[P.length-1],_??10)),_?h(Vm(P,_)):c},c.copy=function(){return ka(c,Hc(e,t,n,r,i,a,o,u,s,l))},c}function Y6(){return pn.apply(Hc(U7,z7,Vt,La,hi,kr,Fa,Na,Ht,zc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function j6(){return pn.apply(Hc(G7,cp,Yt,Ia,di,Vu,Ba,Da,Ht,Ra).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ju(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Xu(){var e=0,t=.5,n=1,r=1,i,a,o,u,s,l=Bt,c,f=!1,h;function d(p){return isNaN(p=+p)?h:(p=.5+((p=+c(p))-a)*(r*p<r*a?u:s),l(f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),a=c(t=+t),o=c(n=+n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(l=p,d):l};function m(p){return function(y){var g,b,w;return arguments.length?([g,b,w]=y,l=Iu(p,[g,b,w]),d):[l(0),l(.5),l(1)]}}return d.range=m($a),d.rangeRound=m(kc),d.unknown=function(p){return arguments.length?(h=p,d):h},function(p){return c=p,i=p(e),a=p(t),o=p(n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function pp(){var e=Ta(Xu()(Bt));return e.copy=function(){return ju(e,pp())},zu.apply(e,arguments)}function bp(){var e=Ym(Xu()).domain([.1,1,10]);return e.copy=function(){return ju(e,bp()).base(e.base())},zu.apply(e,arguments)}function gp(){var e=Xm(Xu());return e.copy=function(){return ju(e,gp()).constant(e.constant())},zu.apply(e,arguments)}function yp(){var e=Km(Xu());return e.copy=function(){return ju(e,yp()).exponent(e.exponent())},zu.apply(e,arguments)}function be(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const X6=be("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Z6=be("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),K6=be("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Q6=be("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),J6=be("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),e4=be("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),t4=be("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),n4=be("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),r4=be("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),i4=be("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Ee=e=>zw(e[e.length-1]);var vp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(be);const wp=Ee(vp);var _p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(be);const Mp=Ee(_p);var xp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(be);const Pp=Ee(xp);var Sp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(be);const Ap=Ee(Sp);var jl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(be);const lu=Ee(jl);var Ep=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(be);const $p=Ee(Ep);var Xl=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(be);const cu=Ee(Xl);var Cp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(be);const kp=Ee(Cp);var Tp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(be);const Np=Ee(Tp);var Dp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(be);const Fp=Ee(Dp);var Bp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(be);const Lp=Ee(Bp);var Ip=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(be);const Rp=Ee(Ip);var Op=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(be);const qp=Ee(Op);var Gp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(be);const Up=Ee(Gp);var zp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(be);const Hp=Ee(zp);var Wp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(be);const Vp=Ee(Wp);var Yp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(be);const jp=Ee(Yp);var Xp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(be);const Zp=Ee(Xp);var Kp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(be);const Qp=Ee(Kp);var Jp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(be);const eb=Ee(Jp);var tb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(be);const nb=Ee(tb);var rb=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(be);const ib=Ee(rb);var ab=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(be);const ob=Ee(ab);var ub=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(be);const sb=Ee(ub);var lb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(be);const cb=Ee(lb);var fb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(be);const hb=Ee(fb);var db=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(be);const mb=Ee(db);function pb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const bb=Tc(fn(300,.5,0),fn(-240,.5,1));var gb=Tc(fn(-100,.75,.35),fn(80,1.5,.8)),yb=Tc(fn(260,.75,.35),fn(80,1.5,.8)),co=fn();function vb(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return co.h=360*e-100,co.s=1.5-1.5*t,co.l=.8-.9*t,co+""}var fo=Kn(),a4=Math.PI/3,o4=Math.PI*2/3;function wb(e){var t;return e=(.5-e)*Math.PI,fo.r=255*(t=Math.sin(e))*t,fo.g=255*(t=Math.sin(e+a4))*t,fo.b=255*(t=Math.sin(e+o4))*t,fo+""}function _b(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Zu(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Mb=Zu(be("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var xb=Zu(be("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Pb=Zu(be("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Sb=Zu(be("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ve(e){return function(){return e}}const Ab=Math.cos,Wc=Math.min,fu=Math.sin,He=Math.sqrt,rd=1e-12,hu=Math.PI,Ku=2*hu;function Eb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new om(t)}function $b(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cb(e){this._context=e}Cb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Oa(e){return new Cb(e)}function kb(e){return e[0]}function Tb(e){return e[1]}function Nb(e,t){var n=Ve(!0),r=null,i=Oa,a=null,o=Eb(u);e=typeof e=="function"?e:e===void 0?kb:Ve(e),t=typeof t=="function"?t:t===void 0?Tb:Ve(t);function u(s){var l,c=(s=$b(s)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=c;++l)!(l<c&&n(f=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,l,s),+t(f,l,s));if(d)return a=null,d+""||null}return u.x=function(s){return arguments.length?(e=typeof s=="function"?s:Ve(+s),u):e},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:Ve(+s),u):t},u.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ve(!!s),u):n},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}function u4(e,t,n){var r=null,i=Ve(!0),a=null,o=Oa,u=null,s=Eb(l);e=typeof e=="function"?e:e===void 0?kb:Ve(+e),t=typeof t=="function"?t:Ve(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Tb:Ve(+n);function l(f){var h,d,m,p=(f=$b(f)).length,y,g=!1,b,w=new Array(p),v=new Array(p);for(a==null&&(u=o(b=s())),h=0;h<=p;++h){if(!(h<p&&i(y=f[h],h,f))===g)if(g=!g)d=h,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),m=h-1;m>=d;--m)u.point(w[m],v[m]);u.lineEnd(),u.areaEnd()}g&&(w[h]=+e(y,h,f),v[h]=+t(y,h,f),u.point(r?+r(y,h,f):w[h],n?+n(y,h,f):v[h]))}if(b)return u=null,b+""||null}function c(){return Nb().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ve(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ve(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ve(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ve(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ve(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ve(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ve(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(u=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=u=null:u=o(a=f),l):a},l}class Db{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function s4(e){return new Db(e,!0)}function l4(e){return new Db(e,!1)}const c4=He(3),Fb={draw(e,t){const n=He(t+Wc(t/28,.75))*.59436,r=n/2,i=r*c4;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},ma={draw(e,t){const n=He(t/hu);e.moveTo(n,0),e.arc(0,0,n,0,Ku)}},Bb={draw(e,t){const n=He(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Lb=He(1/3),f4=Lb*2,Ib={draw(e,t){const n=He(t/f4),r=n*Lb;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Rb={draw(e,t){const n=He(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Ob={draw(e,t){const n=He(t-Wc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},qb={draw(e,t){const n=He(t),r=-n/2;e.rect(r,r,n,n)}},Gb={draw(e,t){const n=He(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},h4=.8908130915292852,Ub=fu(hu/10)/fu(7*hu/10),d4=fu(Ku/10)*Ub,m4=-Ab(Ku/10)*Ub,zb={draw(e,t){const n=He(t*h4),r=d4*n,i=m4*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Ku*a/5,u=Ab(o),s=fu(o);e.lineTo(s*n,-u*n),e.lineTo(u*r-s*i,s*r+u*i)}e.closePath()}},Us=He(3),Hb={draw(e,t){const n=-He(t/(Us*3));e.moveTo(0,n*2),e.lineTo(-Us*n,-n),e.lineTo(Us*n,-n),e.closePath()}},p4=He(3),Wb={draw(e,t){const n=He(t)*.6824,r=n/2,i=n*p4/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Ct=-.5,kt=He(3)/2,Zl=1/He(12),b4=(Zl/2+1)*3,Vb={draw(e,t){const n=He(t/b4),r=n/2,i=n*Zl,a=r,o=n*Zl+n,u=-a,s=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,s),e.lineTo(Ct*r-kt*i,kt*r+Ct*i),e.lineTo(Ct*a-kt*o,kt*a+Ct*o),e.lineTo(Ct*u-kt*s,kt*u+Ct*s),e.lineTo(Ct*r+kt*i,Ct*i-kt*r),e.lineTo(Ct*a+kt*o,Ct*o-kt*a),e.lineTo(Ct*u+kt*s,Ct*s-kt*u),e.closePath()}},Yb={draw(e,t){const n=He(t-Wc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},g4=[ma,Bb,Ib,qb,zb,Hb,Vb],y4=[ma,Ob,Yb,Wb,Fb,Gb,Rb];function Qn(){}function du(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Qu(e){this._context=e}Qu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:du(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:du(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v4(e){return new Qu(e)}function jb(e){this._context=e}jb.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:du(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w4(e){return new jb(e)}function Xb(e){this._context=e}Xb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:du(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _4(e){return new Xb(e)}function Zb(e,t){this._basis=new Qu(e),this._beta=t}Zb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,u=-1,s;++u<=n;)s=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+s*a),this._beta*t[u]+(1-this._beta)*(i+s*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const M4=function e(t){function n(r){return t===1?new Qu(r):new Zb(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function mu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Vc(e,t){this._context=e,this._k=(1-t)/6}Vc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:mu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:mu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const x4=function e(t){function n(r){return new Vc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Yc(e,t){this._context=e,this._k=(1-t)/6}Yc.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:mu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P4=function e(t){function n(r){return new Yc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function jc(e,t){this._context=e,this._k=(1-t)/6}jc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:mu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S4=function e(t){function n(r){return new jc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Xc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>rd){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>rd){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Kb(e,t){this._context=e,this._alpha=t}Kb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Xc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A4=function e(t){function n(r){return t?new Kb(r,t):new Vc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Qb(e,t){this._context=e,this._alpha=t}Qb.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Xc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E4=function e(t){function n(r){return t?new Qb(r,t):new Yc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Jb(e,t){this._context=e,this._alpha=t}Jb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Xc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $4=function e(t){function n(r){return t?new Jb(r,t):new jc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function eg(e){this._context=e}eg.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function C4(e){return new eg(e)}function id(e){return e<0?-1:1}function ad(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(id(a)+id(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function od(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function zs(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function pu(e){this._context=e}pu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zs(this,this._t0,od(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zs(this,od(this,n=ad(this,e,t)),n);break;default:zs(this,this._t0,n=ad(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function tg(e){this._context=new ng(e)}(tg.prototype=Object.create(pu.prototype)).point=function(e,t){pu.prototype.point.call(this,t,e)};function ng(e){this._context=e}ng.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function k4(e){return new pu(e)}function T4(e){return new tg(e)}function rg(e){this._context=e}rg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=ud(e),i=ud(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ud(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function N4(e){return new rg(e)}function Ju(e,t){this._context=e,this._t=t}Ju.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function D4(e){return new Ju(e,.5)}function F4(e){return new Ju(e,0)}function B4(e){return new Ju(e,1)}function Wi(e,t,n){this.k=e,this.x=t,this.y=n}Wi.prototype={constructor:Wi,scale:function(e){return e===1?this:new Wi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Wi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Wi.prototype;const L4="modulepreload",I4=function(e){return"/rhythm-vis/"+e},sd={},Ir=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=I4(o),o in sd)return;sd[o]=!0;const u=o.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.href===o&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":L4,u||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),u)return new Promise((f,h)=>{c.addEventListener("load",f),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function R4(e){if(e){if(e=new Uint8Array(e.buffer||e),q4(e))return"wav";if(O4(e))return"mp3";if(U4(e))return"flac";if(z4(e))return"m4a";if(H4(e))return"opus";if(G4(e))return"oga";if(W4(e))return"qoa"}}function O4(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function q4(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function G4(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function U4(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function z4(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function H4(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function W4(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let V4=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],a=r,o=0;a<this.length&&o<t.length;a++,o++)t[o]=i[a]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var a=r,o=0;a<this.length&&o<t.length;a++,o++)i[a]=t[o]}};const Y4=globalThis.AudioBuffer||V4;async function j4(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=R4(e);if(!t)throw Error("Cannot detect audio format");if(!dt[t])throw Error("Missing decoder for "+t+" format");return dt[t](e)}const dt={async oga(e){let{decoder:t}=dt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Ir(()=>import("./index-CNlOOYox.js"),__vite__mapDeps([0,1,2]));await(dt.oga.decoder=t=new n).ready}return e&&Rr(await t.decodeFile(e))},async mp3(e){let{decoder:t}=dt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Ir(()=>import("./index-Djhv-S3c.js"),__vite__mapDeps([3,2]));await(dt.mp3.decoder=t=new n).ready}return e&&Rr(await t.decode(e))},async flac(e){let{decoder:t}=dt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Ir(()=>import("./index-DjRGtbFJ.js"),__vite__mapDeps([4,1,2]));await(dt.flac.decoder=t=new n).ready}return e&&Rr(await t.decode(e))},async opus(e){let{decoder:t}=dt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Ir(()=>import("./index-B9J8Rb36.js"),__vite__mapDeps([5,1,2]));await(dt.opus.decoder=t=new n).ready}return e&&Rr(await t.decodeFile(e))},async wav(e){let{decode:t}=dt.wav;if(!t){let n=await Ir(()=>import("./index-D2bQpQev.js").then(r=>r.i),__vite__mapDeps([]));t=dt.wav.decode=n.default.decode}return e&&Rr(await t(e))},async qoa(e){let{decode:t}=dt.qoa;return t||(dt.qoa.decode=t=(await Ir(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),e&&Rr(await t(e))}};function Rr({channelData:e,sampleRate:t}){let n=new Y4({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Fi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ig(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var X4=Z4;function Z4(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,a=i===3?32:16,o;return n===2?o=Q4(e.getChannelData(0),e.getChannelData(1)):o=e.getChannelData(0),K4(o,i,r,n,a)}function K4(e,t,n,r,i){var a=i/8,o=r*a,u=new ArrayBuffer(44+e.length*a),s=new DataView(u);return ho(s,0,"RIFF"),s.setUint32(4,36+e.length*a,!0),ho(s,8,"WAVE"),ho(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,t,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*o,!0),s.setUint16(32,o,!0),s.setUint16(34,i,!0),ho(s,36,"data"),s.setUint32(40,e.length*a,!0),t===1?e9(s,44,e):J4(s,44,e),u}function Q4(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=t[a],a++;return r}function J4(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function e9(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function ho(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const t9=ig(X4);function Kl(e=16,t=.5,n=0,r=0,i=!1,a=0){const o=[];for(let u=0;u<e;++u){let s;i?s=u>=n?r:0:s=u===n?r:0,o.push(u*t+a+s)}return o}async function ag(e){const n=await(await fetch(e)).arrayBuffer();return await j4(n)}function og(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),a=new Float32Array(Math.ceil(r*e.sampleRate));for(const o of t){const u=Math.round(o*e.sampleRate);let s=1;for(let l=0;l<i.length;++l)s=Math.max(0,s-2/40100),a[u+l]=i[l]*s}return a}function Zc(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([t9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function n9(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function r9(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const a=i.audioBuffer.getChannelData(0);for(const o of i.times){const u=Math.round(o*n);for(let s=0;s<a.length;++s)r[u+s]+=a[s]}}return r}function Jn(e){return e!=null&&!Number.isNaN(e)}function jt(e,t){return+Jn(t)-+Jn(e)||gt(e,t)}function bu(e,t){return+Jn(t)-+Jn(e)||Sa(e,t)}function Kc(e){return e!=null&&`${e}`!=""}function ug(e){return isFinite(e)?e:NaN}function es(e){return e>0&&isFinite(e)?e:NaN}function Qc(e){return e<0&&isFinite(e)?e:NaN}function i9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${a9(e.getUTCFullYear())}-${xn(e.getUTCMonth()+1,2)}-${xn(e.getUTCDate(),2)}${n||r||i||a?`T${xn(n,2)}:${xn(r,2)}${i||a?`:${xn(i,2)}${a?`.${xn(a,3)}`:""}`:""}Z`:""}`}function a9(e){return e<0?`-${xn(-e,6)}`:e>9999?`+${xn(e,6)}`:xn(e,4)}function xn(e,t){return`${e}`.padStart(t,"0")}const o9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function sg(e,t){return o9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const zr=1e3,Yn=zr*60,jn=Yn*60,hn=jn*24,tn=hn*7,gr=hn*30,zn=hn*365,Hs=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",zr],["5 seconds",5*zr],["15 seconds",15*zr],["30 seconds",30*zr],["minute",Yn],["5 minutes",5*Yn],["15 minutes",15*Yn],["30 minutes",30*Yn],["hour",jn],["3 hours",3*jn],["6 hours",6*jn],["12 hours",12*jn],["day",hn],["2 days",2*hn],["week",tn],["2 weeks",2*tn],["month",gr],["3 months",3*gr],["6 months",6*gr],["year",zn],["2 years",2*zn],["5 years",5*zn],["10 years",10*zn],["20 years",20*zn],["50 years",50*zn],["100 years",100*zn]],Jc=new Map([["second",zr],["minute",Yn],["hour",jn],["day",hn],["monday",tn],["tuesday",tn],["wednesday",tn],["thursday",tn],["friday",tn],["saturday",tn],["sunday",tn],["week",tn],["month",gr],["year",zn]]),lg=new Map([["second",Ht],["minute",Na],["hour",Fa],["day",kr],["monday",ha],["tuesday",tp],["wednesday",np],["thursday",Ar],["friday",rp],["saturday",ip],["sunday",hi],["week",hi],["month",La],["year",Vt]]),ef=new Map([["second",Ht],["minute",Da],["hour",Ba],["day",Yu],["monday",da],["tuesday",ap],["wednesday",op],["thursday",Er],["friday",up],["saturday",sp],["sunday",di],["week",di],["month",Ia],["year",Yt]]),qa=Symbol("intervalDuration"),ts=Symbol("intervalType");for(const[e,t]of lg)t[qa]=Jc.get(e),t[ts]="time";for(const[e,t]of ef)t[qa]=Jc.get(e),t[ts]="utc";const Vi=[["year",Yt,"utc"],["month",Ia,"utc"],["day",Yu,"utc",6*gr],["hour",Ba,"utc",3*hn],["minute",Da,"utc",6*jn],["second",Ht,"utc",30*Yn]],ko=[["year",Vt,"time"],["month",La,"time"],["day",kr,"time",6*gr],["hour",Fa,"time",3*hn],["minute",Na,"time",6*jn],["second",Ht,"time",30*Yn]],u9=[Vi[0],ko[0],Vi[1],ko[1],Vi[2],ko[2],...Vi.slice(3)];function cg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=ef.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function fg(e){return hg(cg(e),"time")}function tf(e){return hg(cg(e),"utc")}function hg([e,t],n){let r=(n==="time"?lg:ef).get(e);return t>1&&(r=r.every(t),r[qa]=Jc.get(e)*t,r[ts]=n),r}function ld(e,t){if(!(t>1))return;const n=e[qa];if(!Hs.some(([,i])=>i===n)||n%hn===0&&hn<n&&n<gr)return;const[r]=Hs[Au(([,i])=>Math.log(i)).center(Hs,Math.log(n*t))];return(e[ts]==="time"?fg:tf)(r)}function cd(e,t,n){const r=t==="time"?zc:Ra;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=s9(n);switch(e){case"millisecond":return Or(r(".%L"),r(":%M:%S"),i);case"second":return Or(r(":%S"),r("%-I:%M"),i);case"minute":return Or(r("%-I:%M"),r("%p"),i);case"hour":return Or(r("%-I %p"),r("%b %-d"),i);case"day":return Or(r("%-d"),r("%b"),i);case"month":return Or(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function s9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function l9(e){return e==="time"?ko:e==="utc"?Vi:u9}function c9(e,t,n){const r=It(N3(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return cd("millisecond","utc",n);for(const[i,a,o,u]of l9(e)){if(r>u||i==="hour"&&!r)break;if(t.every(s=>a.floor(s)>=s))return cd(i,o,n)}}function Or(e,t,n){return(r,i,a)=>{const o=e(r,i),u=t(r,i),s=i-pi(a);return i!==s&&a[s]!==void 0&&u===t(a[s],s)?o:n(o,u)}}const pa=Object.getPrototypeOf(Uint8Array),f9=Object.prototype.toString,dg=Symbol("reindex");function je(e,t,n){const r=typeof t;return r==="string"?fd(e,mg(t),n):r==="function"?fd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ue(e,Ga(t),n):typeof(t==null?void 0:t.transform)=="function"?hd(t.transform(e),n):h9(hd(t,n),e==null?void 0:e[dg])}function h9(e,t){return t?of(e,t):e}function fd(e,t,n){return Ue(e,(n==null?void 0:n.prototype)instanceof pa?d9(t):t,n)}function hd(e,t){return t===void 0?At(e):e instanceof t?e:t.prototype instanceof pa&&!(e instanceof pa)?t.from(e,rf):t.from(e)}function d9(e){return(t,n)=>rf(e(t,n))}const To=[null],mg=e=>t=>t[e],ns={transform:Ln},rt={transform:e=>e},m9=()=>1,p9=()=>!0,ut=e=>e==null?e:`${e}`,Ne=e=>e==null?e:+e,nf=e=>e?e[0]:void 0,Ql=e=>e?e[1]:void 0,Ga=e=>()=>e;function b9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>ii(n,t,r)}function on(e){return e instanceof pa?e:Ue(e,rf,Float64Array)}function rf(e){return e==null?NaN:Number(e)}function g9(e){return Ue(e,pg)}function pg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?sg(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Fn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:is(e)?[void 0,e]:[e,void 0]}function st(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function bg(e,t,n){if(e!=null)return Kt(e,t,n)}function Kt(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function At(e){return e==null||e instanceof Array||e instanceof pa?e:Array.from(e)}function Ue(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function ba(e,t=Array){return e instanceof t?e.slice():t.from(e)}function y9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function gg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function v9(e){return y9(e)||gg(e)||e.interval!==void 0}function rr(e){return(e==null?void 0:e.toString)===f9}function Jl(e){return rr(e)&&(e.type!==void 0||e.domain!==void 0)}function rs(e){return rr(e)&&typeof e.transform!="function"}function mi(e){return rs(e)&&e.value===void 0&&e.channel===void 0}function w9(e,t,n,r=rt){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Ua(e,t){return e===void 0&&t===void 0?[nf,Ql]:[e,t]}function af({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Fn(t)),e===void 0&&([e]=Fn(n)),e}function Ln(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function of(e,t){return Ue(t,n=>e[n],e.constructor)}function _9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function mr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function M9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function gu(e){let t;return[{transform:()=>t,label:Dr(e)},n=>t=n]}function _n(e){return e==null?[e]:gu(e)}function Dr(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function ec(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return vt(r)||vt(i)?Ue(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Ue(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function yg(e,t){const n=vg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ue(e,n):e}function vg(e,t){const n=uf(e,t);return n&&(r=>Jn(r)?n.floor(r):r)}function uf(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>bl(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>bl(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?fg:tf)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Si(e,t){if(e=uf(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function x9(e,t){if(e=Si(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function P9(e){return Hr(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Hr(e){return typeof(e==null?void 0:e.range)=="function"}function za(e){return e===void 0||rs(e)?e:{value:e}}function S9(e){return e==null?null:{transform:t=>je(t,e,Float64Array),label:Dr(e)}}function ir(e){return e&&typeof e[Symbol.iterator]=="function"}function wg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function dd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function vt(e){for(const t of e)if(t!=null)return t instanceof Date}function A9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&sg(t)}function E9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function $9(e){for(const t of e)if(t!=null)return typeof t=="number"}function Ws(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const C9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function is(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||C9.has(e))}function k9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function pt(e){return e==null||ga(e)}function ga(e){return/^\s*none\s*$/i.test(e)}function T9(e){return/^\s*round\s*$/i.test(e)}function tc(e,t){return bg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function as(e="middle"){return tc(e,"frameAnchor")}function pi(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Sa(t,n)}function N9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function D9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function _g(e){return ir(e)?D9(e):e}const un=Symbol("position"),In=Symbol("color"),Ha=Symbol("radius"),Wa=Symbol("length"),Va=Symbol("opacity"),os=Symbol("symbol"),Mg=Symbol("projection"),Ie=new Map([["x",un],["y",un],["fx",un],["fy",un],["r",Ha],["color",In],["opacity",Va],["symbol",os],["length",Wa],["projection",Mg]]);function F9(e){return e===un||e===Mg}function B9(e){return e===un||e===Ha||e===Wa||e===Va}const L9=Math.sqrt(3),I9=2/L9,R9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*I9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},sf=new Map([["asterisk",Fb],["circle",ma],["cross",Bb],["diamond",Ib],["diamond2",Rb],["hexagon",R9],["plus",Ob],["square",qb],["square2",Gb],["star",zb],["times",Yb],["triangle",Hb],["triangle2",Wb],["wye",Vb]]);function lf(e){return e&&typeof e.draw=="function"}function O9(e){return lf(e)?!0:typeof e!="string"?!1:sf.has(e.toLowerCase())}function cf(e){if(e==null||lf(e))return e;const t=sf.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function q9(e){if(e==null||lf(e))return[void 0,e];if(typeof e=="string"){const t=sf.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function us({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=xg(e)),t!=null&&!mi(t)&&(r=Vs(r,ff(t))),n&&(r=Vs(r,Pg))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||mi(t))&&{sort:t},transform:Vs(r,o)}}function bi({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=xg(e)),t!=null&&!mi(t)&&(r=Ys(r,ff(t))),n&&(r=Ys(r,Pg))),{...i,...(t===null||mi(t))&&{sort:t},initializer:Ys(r,a)}}function Vs(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,At(n),r,i)}}function Ys(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,u,s,l,c,f;return{data:u=n,facets:s=r,channels:o}=e.call(this,n,r,i,...a),{data:c=u,facets:f=s,channels:l}=t.call(this,u,s,{...i,...o},...a),{data:c,facets:f,channels:{...o,...l}}}}function G9(e,t){return(e.initializer!=null?bi:us)(e,t)}function xg(e){return(t,n)=>{const r=je(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function Pg(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function U9(e,{sort:t,...n}={}){return{...(rs(e)&&e.channel!==void 0?bi:G9)(n,ff(e)),sort:mi(t)?t:null}}function ff(e){return(typeof e=="function"&&e.length!==1?z9:H9)(e)}function z9(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function H9(e){let t,n;({channel:t,value:e,order:n}={...za(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?bu:jt),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=jt;break;case"descending":n=bu;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let u;if(t===void 0)u=je(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(u=o[t],!u)return{};u=u.value}const s=(l,c)=>n(u[l],u[c]);return{data:i,facets:a.map(l=>l.slice().sort(s))}}}function mo(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function W9(e,t,n=Sg){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",Q9]),t.href!=null&&e.href===void 0&&r.push(["href",df]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?V9(i):n(i,a,t))}function Sg(e,t,n,r=Ag){let i;rr(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,u]=gu(a.label);let s;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){a.initialize(l),s=u([])},scope(l,c){a.scope(l,c)},reduce(l,c){s.push(a.reduce(l,c))}}}function V9(e){return{name:e,initialize(){},scope(){},reduce(){}}}function Ag(e,t,n,r=hf){const i=M9(e,n),a=r(t,i);let o,u;return{label:Dr(a===yu?null:i,a.label),initialize(s){o=i===void 0?s:je(s,i),a.scope==="data"&&(u=a.reduceIndex(Ln(s),o))},scope(s,l){a.scope===s&&(u=a.reduceIndex(l,o))},reduce(s,l){return a.scope==null?a.reduceIndex(s,o,l):a.reduceIndex(s,o,u,l)}}}function md(e,t){return t?ia(ku(e,n=>t[n]),nf):[[,e]]}function hf(e,t,n=Y9){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&rr(e))return Z9(e);if(typeof e=="function")return K9(e);if(/^p\d{2}$/i.test(e))return Mn(b9(e));switch(`${e}`.toLowerCase()){case"first":return df;case"last":return J9;case"identity":return Eg;case"count":return yu;case"distinct":return e8;case"sum":return t==null?yu:t8;case"proportion":return bd(t,"data");case"proportion-facet":return bd(t,"facet");case"deviation":return Mn($u);case"min":return Mn(kn);case"min-index":return Mn(E3);case"max":return Mn(It);case"max-index":return Mn(A3);case"mean":return pd(Nu);case"median":return pd(pl);case"variance":return Mn(Mc);case"mode":return Mn(T3)}return n(e)}function Y9(e){throw new Error(`invalid reduce: ${e}`)}function j9(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function X9(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>jt(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function Z9(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function K9(e){return{reduceIndex(t,n,r){return e(of(n,t),r)}}}function Mn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function pd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return vt(n)?new Date(r):r}}}const Eg={reduceIndex(e,t){return of(t,e)}},df={reduceIndex(e,t){return t[e[0]]}},Q9={reduceIndex(e,t){const r=ia(Vr(e,a=>a.length,a=>t[a]),Ql),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[`… ${a.length.toLocaleString("en-US")} more`,Zn(a,Ql)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},J9={reduceIndex(e,t){return t[e[e.length-1]]}},yu={label:"Frequency",reduceIndex(e){return e.length}},e8={label:"Distinct",reduceIndex(e,t){const n=new Cu;for(const r of e)n.add(t[r]);return n.size}},t8=Mn(Zn);function bd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Zn(n,a=>r[a])/i}}function ya(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=Dr(r)},u){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),$g(u,{scale:t,type:n,value:je(e,r),label:o,filter:i,hint:a})}function n8(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,ya(t,r,n)]))}function r8(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Ue(a,o)]}));return n.channels=e,n}function $g(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Ws(r,is)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Ws(r,k9)?null:"opacity";break;case"symbol":n!==!0&&Ws(r,O9)?(t.scale=null,t.value=Ue(r,cf)):t.scale="symbol";break;default:t.scale=Ie.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ie.has(n))throw new Error(`unknown scale: ${n}`);return t}function i8(e,t,n,r,i){const{order:a,reverse:o,reduce:u=!0,limit:s}=i;for(const l in i){if(!Ie.has(l))continue;let{value:c,order:f=a,reverse:h=o,reduce:d=u,limit:m=s}=za(i[l]);const p=c==null?void 0:c.startsWith("-");if(p&&(c=c.slice(1)),f=f===void 0?p!==(c==="width"||c==="height")?kg:Cg:u8(f),d==null||d===!1)continue;const y=l==="fx"||l==="fy"?o8(t,r[l]):a8(n,l);if(!y)throw new Error(`missing channel for scale: ${l}`);const g=y.value,[b=0,w=1/0]=ir(m)?m:m<0?[m]:[0,m];if(c==null)y.domain=()=>{let v=Array.from(new Cu(g));return h&&(v=v.reverse()),(b!==0||w!==1/0)&&(v=v.slice(b,w)),v};else{const v=c==="data"?e:c==="height"?gd(n,"y1","y2"):c==="width"?gd(n,"x1","x2"):nc(n,c,c==="y"?"y2":c==="x"?"x2":void 0),M=hf(d===!0?"max":d,v);y.domain=()=>{let _=w3(Ln(g),P=>M.reduceIndex(P,v),P=>g[P]);return f&&_.sort(f),h&&_.reverse(),(b!==0||w!==1/0)&&(_=_.slice(b,w)),_.map(nf)}}}}function a8(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function o8(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const u of e[a])i[u]=o}return t}function gd(e,t,n){const r=nc(e,t),i=nc(e,n);return Ue(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function nc(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function u8(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return Cg;case"descending":return kg}throw new Error(`invalid order: ${e}`)}function Cg([e,t],[n,r]){return jt(t,r)||jt(e,n)}function kg([e,t],[n,r]){return bu(t,r)||jt(e,n)}function yd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function s8(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const l8=s8(e=>new Intl.NumberFormat(e));function c8(e="en-US"){const t=l8(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function f8(e){return i9(e,"Invalid Date")}function h8(e="en-US"){const t=c8(e);return n=>(n instanceof Date?f8:typeof n=="number"?t:ut)(n)}const $r=h8();let rc=0,ic;function d8(){const e=rc;return rc=0,ic=void 0,e}function Xn(e){e!==ic&&(ic=e,console.warn(e),++rc)}const bt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let m8=0;function vd(){return`plot-clip-${++m8}`}function p8(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:u,fillOpacity:s,stroke:l,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:y,opacity:g,mixBlendMode:b,imageFilter:w,paintOrder:v,pointerEvents:M,shapeRendering:_,channels:P},{ariaLabel:$,fill:C="currentColor",fillOpacity:F,stroke:S="none",strokeOpacity:A,strokeWidth:B,strokeLinecap:L,strokeLinejoin:E,strokeMiterlimit:q,paintOrder:re}){C===null&&(u=null,s=null),S===null&&(l=null,f=null),pt(C)?!pt(S)&&(!pt(u)||P!=null&&P.fill)&&(S="none"):pt(S)&&(!pt(l)||P!=null&&P.stroke)&&(C="none");const[X,J]=Fn(u,C),[G,H]=st(s,F),[U,V]=Fn(l,S),[ne,ae]=st(f,A),[ie,j]=st(g);ga(V)||(c===void 0&&(c=B),d===void 0&&(d=L),h===void 0&&(h=E),m===void 0&&!T9(h)&&(m=q),!ga(J)&&v===void 0&&(v=re));const[Y,D]=st(c);return C!==null&&(e.fill=et(J,"currentColor"),e.fillOpacity=Bi(H,1)),S!==null&&(e.stroke=et(V,"none"),e.strokeWidth=Bi(D,1),e.strokeOpacity=Bi(ae,1),e.strokeLinejoin=et(h,"miter"),e.strokeLinecap=et(d,"butt"),e.strokeMiterlimit=Bi(m,4),e.strokeDasharray=et(p,"none"),e.strokeDashoffset=et(y,"0")),e.target=ut(o),e.ariaLabel=ut($),e.ariaDescription=ut(i),e.ariaHidden=ut(a),e.opacity=Bi(j,1),e.mixBlendMode=et(b,"normal"),e.imageFilter=et(w,"none"),e.paintOrder=et(v,"normal"),e.pointerEvents=et(M,"auto"),e.shapeRendering=et(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:X,scale:"auto",optional:!0},fillOpacity:{value:G,scale:"auto",optional:!0},stroke:{value:U,scale:"auto",optional:!0},strokeOpacity:{value:ne,scale:"auto",optional:!0},strokeWidth:{value:Y,optional:!0},opacity:{value:ie,scale:"auto",optional:!0}}}function b8(e,t){t&&e.filter(n=>Kc(t[n])).append("title").call(y8,t)}function g8(e,t){t&&e.filter(([n])=>Kc(t[n])).append("title").call(v8,t)}function y8(e,t){t&&e.text(n=>$r(t[n]))}function v8(e,t){t&&e.text(([n])=>$r(t[n]))}function Rn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&fe(e,"aria-label",h=>r[h]),a&&fe(e,"fill",h=>a[h]),o&&fe(e,"fill-opacity",h=>o[h]),u&&fe(e,"stroke",h=>u[h]),s&&fe(e,"stroke-opacity",h=>s[h]),l&&fe(e,"stroke-width",h=>l[h]),c&&fe(e,"opacity",h=>c[h]),f&&Fg(e,h=>f[h],t),n||b8(e,i)}function Tg(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&fe(e,"aria-label",([h])=>r[h]),a&&fe(e,"fill",([h])=>a[h]),o&&fe(e,"fill-opacity",([h])=>o[h]),u&&fe(e,"stroke",([h])=>u[h]),s&&fe(e,"stroke-opacity",([h])=>s[h]),l&&fe(e,"stroke-width",([h])=>l[h]),c&&fe(e,"opacity",([h])=>c[h]),f&&Fg(e,([h])=>f[h],t),n||g8(e,i)}function w8({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:o,opacity:u,href:s},{tip:l}){return[e,l?void 0:t,n,r,i,a,o,u,s].filter(c=>c!==void 0)}function _8(e,t,n){const r=ku(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Xn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Ng(e,t,n,r){const{z:i}=n,{z:a}=r,o=w8(r,n),u=[...t,...o];for(const s of a?_8(e,a,i):[e]){let l,c;e:for(const f of s){for(const h of u)if(!Jn(h[f])){c&&c.push(-1);continue e}if(l===void 0){c&&(yield c),l=o.map(h=>mr(h[f])),c=[f];continue}c.push(f);for(let h=0;h<o.length;++h)if(mr(o[h][f])!==l[h]){yield c,l=o.map(m=>mr(m[f])),c=[f];continue e}}c&&(yield c)}}function Dg(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Kt(e,"clip",["frame","sphere"])),e}function M8(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:u,marginLeft:s,marginRight:l,marginTop:c,marginBottom:f}=n,h=vd();i=`url(#${h})`,e=Oe("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",s).attr("y",c).attr("width",o-l-s).attr("height",u-c-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const u=vd();i=`url(#${u})`,e.append("clipPath").attr("id",u).append("path").attr("d",qu(o)({type:"Sphere"}));break}}fe(e,"aria-label",t.ariaLabel),fe(e,"aria-description",t.ariaDescription),fe(e,"aria-hidden",t.ariaHidden),fe(e,"clip-path",i)}function qt(e,t,n,r){M8(e,t,n,r),fe(e,"fill",t.fill),fe(e,"fill-opacity",t.fillOpacity),fe(e,"stroke",t.stroke),fe(e,"stroke-width",t.strokeWidth),fe(e,"stroke-opacity",t.strokeOpacity),fe(e,"stroke-linejoin",t.strokeLinejoin),fe(e,"stroke-linecap",t.strokeLinecap),fe(e,"stroke-miterlimit",t.strokeMiterlimit),fe(e,"stroke-dasharray",t.strokeDasharray),fe(e,"stroke-dashoffset",t.strokeDashoffset),fe(e,"shape-rendering",t.shapeRendering),fe(e,"filter",t.imageFilter),fe(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;fe(e,"pointer-events",i)}function Gt(e,t){x8(e,"mix-blend-mode",t.mixBlendMode),fe(e,"opacity",t.opacity)}function Fg(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(ai.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(ai.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function fe(e,t,n){n!=null&&e.attr(t,n)}function x8(e,t,n){n!=null&&e.style(t,n)}function Et(e,t,{x:n,y:r},i=bt,a=bt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function et(e,t){if((e=ut(e))!==t)return e}function Bi(e,t){if((e=Ne(e))!==t)return e}const P8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function mf(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!P8.test(e))throw new Error(`invalid class name: ${e}`);return e}function pf(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Ya({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function bf(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Dg(n)}}function Oe(e,{document:t}){return Ki(Fu(e).call(t.documentElement))}const Bg=Math.PI,yn=2*Bg,wd=.618;function S8({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let u,s,l="frame";if(rr(e)){let M;if({type:e,domain:s,inset:M,insetTop:n=M!==void 0?M:n,insetRight:r=M!==void 0?M:r,insetBottom:i=M!==void 0?M:i,insetLeft:a=M!==void 0?M:a,clip:l=l,...u}=e,e==null)return}typeof e!="function"&&({type:e}=Lg(e));const{width:c,height:f,marginLeft:h,marginRight:d,marginTop:m,marginBottom:p}=o,y=c-h-d-a-r,g=f-m-p-n-i;if(e=e==null?void 0:e({width:y,height:g,clip:l,...u}),e==null)return;l=A8(l,h,m,c-d,f-p);let b=h+a,w=m+n,v;if(s!=null){const[[M,_],[P,$]]=qu(e).bounds(s),C=Math.min(y/(P-M),g/($-_));C>0?(b-=(C*(M+P)-y)/2,w-=(C*(_+$)-g)/2,v=zl({point(F,S){this.stream.point(F*C+b,S*C+w)}})):Xn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??(v=b===0&&w===0?Ig():zl({point(M,_){this.stream.point(M+b,_+w)}})),{stream:M=>e.stream(v.stream(l(M)))}}function Lg(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ut(d7,.7463,.4673);case"albers":return po(Dm,.7463,.4673);case"azimuthal-equal-area":return Ut(m7,4,4);case"azimuthal-equidistant":return Ut(p7,yn,yn);case"conic-conformal":return po(y7,yn,yn);case"conic-equal-area":return po(au,6.1702,2.9781);case"conic-equidistant":return po(_7,7.312,3.6282);case"equal-earth":return Ut(x7,5.4133,2.6347);case"equirectangular":return Ut(v7,yn,Bg);case"gnomonic":return Ut(P7,3.4641,3.4641);case"identity":return{type:Ig};case"reflect-y":return{type:E8};case"mercator":return Ut(b7,yn,yn);case"orthographic":return Ut(S7,2,2);case"stereographic":return Ut(A7,2,2);case"transverse-mercator":return Ut(E7,yn,yn);default:throw new Error(`unknown projection type: ${e}`)}}function A8(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return gm(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ut(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:u})=>{var l,c,f;const s=e();return o!=null&&((l=s.precision)==null||l.call(s,o)),a!=null&&((c=s.rotate)==null||c.call(s,a)),typeof u=="number"&&((f=s.clipAngle)==null||f.call(s,u)),s.scale(Math.min(r/t,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/t}}function po(e,t,n){const{type:r,aspectRatio:i}=Ut(e,t,n);return{type:a=>{const{parallels:o,domain:u,width:s,height:l}=a,c=r(a);return o!=null&&(c.parallels(o),u===void 0&&c.fitSize([s,l],{type:"Sphere"})),c},aspectRatio:i}}const Ig=Ga({stream:e=>e}),E8=Ga(zl({point(e,t){this.stream.point(e,-t)}}));function $8(e,t,n,r){const i=n[e],a=n[t],o=i.length,u=n[e]=new Float64Array(o).fill(NaN),s=n[t]=new Float64Array(o).fill(NaN);let l;const c=r.stream({point(f,h){u[l]=f,s[l]=h}});for(l=0;l<o;++l)c.point(i[l],a[l])}function C8({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(rr(e)&&(e=e.type),e!=null)}function k8(e){if(typeof(e==null?void 0:e.stream)=="function")return wd;if(rr(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=Lg(e);if(t)return t}return wd}}function T8(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,u){t.push(o),n.push(u)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)cr(o,a);return[r,i]}const N8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Rg=new Map([["accent",Z6],["category10",X6],["dark2",K6],["observable10",N8],["paired",Q6],["pastel1",J6],["pastel2",e4],["set1",t4],["set2",n4],["set3",r4],["tableau10",i4]]);function D8(e){return e!=null&&Rg.has(`${e}`.toLowerCase())}const _d=new Map([...Rg,["brbg",vn(vp,wp)],["prgn",vn(_p,Mp)],["piyg",vn(xp,Pp)],["puor",vn(Sp,Ap)],["rdbu",vn(jl,lu)],["rdgy",vn(Ep,$p)],["rdylbu",vn(Xl,cu)],["rdylgn",vn(Cp,kp)],["spectral",vn(Tp,Np)],["burd",Md(jl,lu)],["buylrd",Md(Xl,cu)],["blues",We(rb,ib)],["greens",We(ab,ob)],["greys",We(ub,sb)],["oranges",We(db,mb)],["purples",We(lb,cb)],["reds",We(fb,hb)],["turbo",wn(_b)],["viridis",wn(Mb)],["magma",wn(xb)],["inferno",wn(Pb)],["plasma",wn(Sb)],["cividis",wn(pb)],["cubehelix",wn(bb)],["warm",wn(gb)],["cool",wn(yb)],["bugn",We(Dp,Fp)],["bupu",We(Bp,Lp)],["gnbu",We(Ip,Rp)],["orrd",We(Op,qp)],["pubu",We(zp,Hp)],["pubugn",We(Gp,Up)],["purd",We(Wp,Vp)],["rdpu",We(Yp,jp)],["ylgn",We(Kp,Qp)],["ylgnbu",We(Xp,Zp)],["ylorbr",We(Jp,eb)],["ylorrd",We(tb,nb)],["rainbow",xd(vb)],["sinebow",xd(wb)]]);function We(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Wt(t,n):e[n])}function vn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Wt(t,n):e[n])}function Md(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Wt(r=>t(1-r),n):e[n].slice().reverse())}function wn(e){return({length:t})=>Wt(e,Math.max(2,Math.floor(t)))}function xd(e){return({length:t})=>Wt(e,Math.floor(t)+1).slice(0,-1)}function Og(e){const t=`${e}`.toLowerCase();if(!_d.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return _d.get(t)}function ss(e,t){const n=Og(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function F8(e,t="greys"){const n=new Set,[r,i]=ss(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Pd=new Map([["brbg",wp],["prgn",Mp],["piyg",Pp],["puor",Ap],["rdbu",lu],["rdgy",$p],["rdylbu",cu],["rdylgn",kp],["spectral",Np],["burd",e=>lu(1-e)],["buylrd",e=>cu(1-e)],["blues",ib],["greens",ob],["greys",sb],["purples",cb],["reds",hb],["oranges",mb],["turbo",_b],["viridis",Mb],["magma",xb],["inferno",Pb],["plasma",Sb],["cividis",pb],["cubehelix",bb],["warm",gb],["cool",yb],["bugn",Fp],["bupu",Lp],["gnbu",Rp],["orrd",qp],["pubugn",Up],["pubu",Hp],["purd",Vp],["rdpu",jp],["ylgnbu",Zp],["ylgn",Qp],["ylorbr",eb],["ylorrd",nb],["rainbow",vb],["sinebow",wb]]);function gf(e){const t=`${e}`.toLowerCase();if(!Pd.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Pd.get(t)}const B8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function L8(e){return e!=null&&B8.has(`${e}`.toLowerCase())}const qg=e=>t=>e(1-t),js=[0,1],Sd=new Map([["number",tt],["rgb",xr],["hsl",n_],["hcl",a_],["lab",r_]]);function Gg(e){const t=`${e}`.toLowerCase();if(!Sd.has(t))throw new Error(`unknown interpolator: ${t}`);return Sd.get(t)}function ja(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:u=zg(e,n),unknown:s,round:l,scheme:c,interval:f,range:h=Ie.get(e)===Ha?Y8(n,u):Ie.get(e)===Wa?j8(n,u):Ie.get(e)===Va?js:void 0,interpolate:d=Ie.get(e)===In?c==null&&h!==void 0?xr:gf(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):l?kc:tt,reverse:m}){if(f=Si(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=Gg(d)),m=!!m,h!==void 0){const p=(u=At(u)).length,y=(h=At(h)).length;if(p!==y){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Iu(d,h),h=void 0}}if(d.length===1?(m&&(d=qg(d),m=!1),h===void 0&&(h=Float64Array.from(u,(p,y)=>y/(u.length-1)),h.length===2&&(h=js)),t.interpolate((h===js?Ga:vf)(d))):t.interpolate(d),o){const[p,y]=Nt(u);(p>0||y<0)&&(u=ba(u),pi(u)!==Math.sign(p)?u[u.length-1]=0:u[0]=0)}return m&&(u=Uo(u)),t.domain(u).unknown(s),i&&(t.nice(I8(i,r)),u=t.domain()),h!==void 0&&t.range(h),a&&t.clamp(a),{type:r,domain:u,range:h,scale:t,interpolate:d,interval:f}}function I8(e,t){return e===!0?void 0:typeof e=="number"?e:x9(e,t)}function R8(e,t,n){return ja(e,Gc(),t,n)}function O8(e,t,n){return Ug(e,t,{...n,exponent:.5})}function Ug(e,t,{exponent:n=1,...r}){return ja(e,Qm().exponent(n),t,{...r,type:"pow"})}function q8(e,t,{base:n=10,domain:r=X8(t),...i}){return ja(e,jm().base(n),t,{...i,domain:r})}function G8(e,t,{constant:n=1,...r}){return ja(e,Zm().constant(n),t,r)}function U8(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=Z8(t),unknown:u,interpolate:s,reverse:l}){return n===void 0&&(n=s!==void 0?Wt(s,i):Ie.get(e)===In?ss(a,i):void 0),o.length>0&&(o=Jm(o,n===void 0?{length:i}:n).quantiles()),yf(e,t,{domain:o,range:n,reverse:l,unknown:u})}function z8(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=zg(e,t),unknown:o,interpolate:u,reverse:s}){const[l,c]=Nt(a);let f;return n===void 0?(f=aa(l,c,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=u!==void 0?Wt(u,r):Ie.get(e)===In?ss(i,r):void 0):(f=Wt(tt(l,c),r+1).slice(1,-1),l instanceof Date&&(f=f.map(h=>new Date(h)))),pi(At(a))<0&&f.reverse(),yf(e,t,{domain:f,range:n,reverse:s,unknown:o})}function yf(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Wt(a,n.length+1):Ie.get(e)===In?ss(i,n.length+1):void 0,reverse:u}){n=At(n);const s=pi(n);if(!isNaN(s)&&!H8(n,s))throw new Error(`the ${e} scale has a non-monotonic domain`);return u&&(o=Uo(o)),{type:"threshold",scale:ep(s<0?Uo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function H8(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=Sa(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function W8(e){return{type:"identity",scale:B9(Ie.get(e))?Wm():t=>t}}function va(e,t=ug){return e.length?[kn(e,({value:n})=>n===void 0?n:kn(n,t)),It(e,({value:n})=>n===void 0?n:It(n,t))]:[0,1]}function zg(e,t){const n=Ie.get(e);return(n===Ha||n===Va||n===Wa?V8:va)(t)}function V8(e){return[0,e.length?It(e,({value:t})=>t===void 0?t:It(t,ug)):1]}function Y8(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=ii(e,.5,({value:o})=>o===void 0?NaN:ii(o,.25,es)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/It(i);return a<1?i.map(o=>o*a):i}function j8(e,t){const n=pl(e,({value:a})=>a===void 0?NaN:pl(a,Math.abs)),r=t.map(a=>12*a/n),i=60/It(r);return i<1?r.map(a=>a*i):r}function X8(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return va(e,es);if(n<0)return va(e,Qc)}return[1,10]}function Z8(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function vf(e){return(t,n)=>r=>e(t+r*(n-t))}function ls(e,t,n,r,{type:i,nice:a,clamp:o,domain:u=va(r),unknown:s,pivot:l=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=Ie.get(e)===In?c==null&&f!==void 0?xr:gf(c!==void 0?c:"rdbu"):tt,reverse:m}){l=+l,u=At(u);let[p,y]=u;if(u.length>2&&Xn(`Warning: the diverging ${e} scale domain contains extra elements.`),Sa(p,y)<0&&([p,y]=[y,p],m=!m),p=Math.min(p,l),y=Math.max(y,l),typeof d!="function"&&(d=Gg(d)),f!==void 0&&(d=d.length===1?vf(d)(...f):Iu(d,f)),m&&(d=qg(d)),h){const g=n.apply(l),b=g-n.apply(p),w=n.apply(y)-g;b<w?p=n.invert(g-w):b>w&&(y=n.invert(g+b))}return t.domain([p,l,y]).unknown(s).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,y],pivot:l,interpolate:d,scale:t}}function K8(e,t,n){return ls(e,pp(),tM,t,n)}function Q8(e,t,n){return Hg(e,t,{...n,exponent:.5})}function Hg(e,t,{exponent:n=1,...r}){return ls(e,yp().exponent(n=+n),iM(n),t,{...r,type:"diverging-pow"})}function J8(e,t,{base:n=10,pivot:r=1,domain:i=va(t,r<0?Qc:es),...a}){return ls(e,bp().base(n=+n),nM,t,{domain:i,pivot:r,...a})}function eM(e,t,{constant:n=1,...r}){return ls(e,gp().constant(n=+n),aM(n),t,r)}const tM={apply(e){return e},invert(e){return e}},nM={apply:Math.log,invert:Math.exp},rM={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function iM(e){return e===.5?rM:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function aM(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Wg(e,t,n,r){return ja(e,t,n,r)}function oM(e,t,n){return Wg(e,Y6(),t,n)}function uM(e,t,n){return Wg(e,j6(),t,n)}const Xa=Symbol("ordinal");function Vg(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:u,hint:s}){return i=Si(i,r),a===void 0&&(a=jg(n,i,e)),(r==="categorical"||r===Xa)&&(r="ordinal"),u&&(a=Uo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:s,interval:i}}function sM(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:u,...s}){r=Si(r,n),i===void 0&&(i=jg(t,r,e));let l;if(Ie.get(e)===os)l=fM(t),a=a===void 0?hM(l):Ue(a,cf);else if(Ie.get(e)===In&&(a===void 0&&(n==="ordinal"||n===Xa)&&(a=F8(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const c=gf(o),f=a[0],h=a[1]-a[0];a=({length:d})=>Wt(m=>c(f+h*m),d)}else a=Og(o);if(u===Wl)throw new Error(`implicit unknown on ${e} scale is not supported`);return Vg(e,qc().unknown(u),t,{...s,type:n,domain:i,range:a,hint:l})}function lM(e,t,{align:n=.5,padding:r=.5,...i}){return Yg($7().align(n).padding(r),t,i,e)}function cM(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return Yg(Hu().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function Yg(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=Vg(r,e,t,n),e.round=i,e}function jg(e,t,n){const r=new Cu;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Nt(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Ie.get(n)===un)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return ia(r,jt)}function Ad(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function fM(e){return{fill:Ad(e,"fill"),stroke:Ad(e,"stroke")}}function hM(e){return pt(e.fill)?y4:g4}function ac(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:u,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,facet:{label:m=t}={},...p}={}){const y={};for(const[g,b]of e){const w=p[g],v=gM(g,b,{round:Ie.get(g)===un?u:void 0,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,...w});if(v){let{label:M=g==="fx"||g==="fy"?m:t,percent:_,transform:P,inset:$,insetTop:C=$!==void 0?$:g==="y"?r:0,insetRight:F=$!==void 0?$:g==="x"?i:0,insetBottom:S=$!==void 0?$:g==="y"?a:0,insetLeft:A=$!==void 0?$:g==="x"?o:0}=w||{};if(P==null)P=void 0;else if(typeof P!="function")throw new Error("invalid scale transform; not a function");v.percent=!!_,v.label=M===void 0?mM(b,v):M,v.transform=P,g==="x"||g==="fx"?(v.insetLeft=+A,v.insetRight=+F):(g==="y"||g==="fy")&&(v.insetTop=+C,v.insetBottom=+S),y[g]=v}}return y}function Ed(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:u,label:s}=i;t[r]=MM(i),n[r]=a,a.type=o,u!=null&&(a.interval=u),s!=null&&(a.label=s)}return n}function dM(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?wf(t):t;i&&$d(i,o),a&&Cd(a,o);const u=i||a?Xg(e,t):t;n&&$d(n,u),r&&Cd(r,u)}function mM(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Fr(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function pM(e){return Math.sign(pi(e.domain()))*Math.sign(pi(e.range()))}function wf(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:u,marginRight:s,marginBottom:l,marginLeft:c}}=e;return{marginTop:Math.max(t,u),marginRight:Math.max(n,s),marginBottom:Math.max(r,l),marginLeft:Math.max(i,c),width:a,height:o}}function Xg({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=wf(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:u,height:t?t.scale.bandwidth()+r+a:s,facet:{width:u,height:s}}}function $d(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,u=a+n,s=i-o-r;e.range=[u,Math.max(u,s)],Fr(e)||(e.range=Kg(e)),e.scale.range(e.range)}Zg(e)}function Cd(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,u=a+n,s=i-o-r;e.range=[Math.max(u,s),u],Fr(e)?e.range.reverse():e.range=Kg(e),e.scale.range(e.range)}Zg(e)}function Zg(e){e.round===void 0&&vM(e)&&bM(e)<=30&&e.scale.round(!0)}function bM({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,u=Math.abs(r-n)/Math.max(1,o+a*2);return(u-Math.floor(u))*o}function Kg(e){const t=e.scale.domain().length+Qg(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function gM(e,t=[],n={}){const r=yM(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Fr({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(vt)?Xn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${qr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`):i.some(A9)?Xn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${qr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`):i.some(E9)&&Xn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${qr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=bo(t,n,on);break;case"identity":switch(Ie.get(e)){case un:n=bo(t,n,on);break;case os:n=bo(t,n,wM);break}break;case"utc":case"time":n=bo(t,n,g9);break}switch(r){case"diverging":return K8(e,t,n);case"diverging-sqrt":return Q8(e,t,n);case"diverging-pow":return Hg(e,t,n);case"diverging-log":return J8(e,t,n);case"diverging-symlog":return eM(e,t,n);case"categorical":case"ordinal":case Xa:return sM(e,t,n);case"cyclical":case"sequential":case"linear":return R8(e,t,n);case"sqrt":return O8(e,t,n);case"threshold":return yf(e,t,n);case"quantile":return U8(e,t,n);case"quantize":return z8(e,t,n);case"pow":return Ug(e,t,n);case"log":return q8(e,t,n);case"symlog":return G8(e,t,n);case"utc":return uM(e,t,n);case"time":return oM(e,t,n);case"point":return lM(e,t,n);case"band":return cM(e,t,n);case"identity":return W8(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function qr(e){return typeof e=="symbol"?e.description:e}function kd(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Td={toString:()=>"projection"};function yM(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:u}){if(n=kd(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&u!=null&&(n=Td);for(const l of t){const c=kd(l.type);if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}}if(n===Td)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const s=Ie.get(e);if(s===Ha)return"sqrt";if(s===Va||s===Wa)return"linear";if(s===os)return"ordinal";if((r||i||[]).length>2)return Xs(s);if(r!==void 0){if(dd(r))return Xs(s);if(vt(r))return"utc"}else{const l=t.map(({value:c})=>c).filter(c=>c!==void 0);if(l.some(dd))return Xs(s);if(l.some(vt))return"utc"}if(s===In){if(o!=null||L8(a))return"diverging";if(D8(a))return"categorical"}return"linear"}function Xs(e){switch(e){case un:return"point";case In:return Xa;default:return"ordinal"}}function Fr({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Xa}function Qg({type:e}){return e==="threshold"}function vM({type:e}){return e==="point"||e==="band"}function gi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function bo(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function wM(e){return Ue(e,cf)}function _M(e){return t=>{if(!Ie.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function MM({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:u,pivot:s}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const l=e.unknown?e.unknown():void 0;return{type:t,domain:ba(n),...r!==void 0&&{range:ba(r)},...o!==void 0&&{transform:o},...u&&{percent:u},...l!==void 0&&{unknown:l},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function xM(e,t,n={}){let r=.5-bt,i=.5+bt,a=.5+bt,o=.5-bt;for(const{marginTop:p,marginRight:y,marginBottom:g,marginLeft:b}of t)p>r&&(r=p),y>i&&(i=y),g>a&&(a=g),b>o&&(o=b);let{margin:u,marginTop:s=u!==void 0?u:r,marginRight:l=u!==void 0?u:i,marginBottom:c=u!==void 0?u:a,marginLeft:f=u!==void 0?u:o}=n;s=+s,l=+l,c=+c,f=+f;let{width:h=640,height:d=PM(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,s-r+c-a)}=n;h=+h,d=+d;const m={width:h,height:d,marginTop:s,marginRight:l,marginBottom:c,marginLeft:f};if(e.fx||e.fy){let{margin:p,marginTop:y=p!==void 0?p:s,marginRight:g=p!==void 0?p:l,marginBottom:b=p!==void 0?p:c,marginLeft:w=p!==void 0?p:f}=n.facet??{};y=+y,g=+g,b=+b,w=+w,m.facet={marginTop:y,marginRight:g,marginBottom:b,marginLeft:w}}return m}function PM({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:u,marginRightDefault:s,marginBottomDefault:l,marginLeftDefault:c}){const f=n?n.scale.domain().length:1,h=k8(i);if(h){const m=r?r.scale.domain().length:1,p=(1.1*f-.1)/(1.1*m-.1)*h,y=Math.max(.1,Math.min(10,p));return Math.round((o-c-s)*y+u+l)}const d=t?Fr(t)?t.scale.domain().length:Math.max(7,17/f):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=Nd("y",t)/(Nd("x",e)*a),p=r?r.scale.bandwidth():1,y=n?n.scale.bandwidth():1,g=p*(o-c-s)-e.insetLeft-e.insetRight;return(m*g+t.insetTop+t.insetBottom)/y+u+l}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function Nd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const u=t.scale.exponent();i=s=>Math.pow(s,u);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Nt(r);return Math.abs(i(o)-i(a))}function SM(e,t){const{fx:n,fy:r}=ac(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?y3(i,a).map(([o,u],s)=>({x:o,y:u,i:s})):i?i.map((o,u)=>({x:o,i:u})):a?a.map((o,u)=>({y:o,i:u})):void 0}function AM(e,{x:t,y:n}){return t&&(t=oc(t)),n&&(n=oc(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function _f(e,{fx:t,fy:n}){const r=Ln(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Vr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Vr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Vr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function EM(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function $M(e){const t=[],n=new Uint32Array(Zn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const CM=new Map([["top",Zs],["right",Js],["bottom",Ks],["left",Qs],["top-left",go(Zs,Qs)],["top-right",go(Zs,Js)],["bottom-left",go(Ks,Qs)],["bottom-right",go(Ks,Js)],["top-empty",NM],["right-empty",BM],["bottom-empty",DM],["left-empty",FM],["empty",LM]]);function kM(e){if(e==null)return null;const t=CM.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Dd=new WeakMap;function oc(e){let t=Dd.get(e);return t||Dd.set(e,t=new wr(Ue(e,(n,r)=>[n,r]))),t}function ar(e,t){return oc(e).get(t)}function TM(e,t,n){return t=mr(t),n=mr(n),e.find(r=>Object.is(mr(r.x),t)&&Object.is(mr(r.y),n))}function cs(e,t,n){var r;return(r=TM(e,t,n))==null?void 0:r.empty}function Zs(e,{y:t},{y:n}){return t?ar(t,n)===0:!0}function Ks(e,{y:t},{y:n}){return t?ar(t,n)===t.length-1:!0}function Qs(e,{x:t},{x:n}){return t?ar(t,n)===0:!0}function Js(e,{x:t},{x:n}){return t?ar(t,n)===t.length-1:!0}function NM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=ar(t,r);if(a>0)return cs(e,n,t[a-1])}function DM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=ar(t,r);if(a<t.length-1)return cs(e,n,t[a+1])}function FM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=ar(t,n);if(a>0)return cs(e,t[a-1],r)}function BM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=ar(t,n);if(a<t.length-1)return cs(e,t[a+1],r)}function LM(e,t,{empty:n}){return n}function go(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function el(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class ct{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:u,fy:s,sort:l,dx:c=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:m=h,marginBottom:p=h,marginLeft:y=h,clip:g=i==null?void 0:i.clip,channels:b,tip:w,render:v}=r;if(this.data=t,this.sort=mi(l)?l:null,this.initializer=bi(r).initializer,this.transform=this.initializer?r.transform:us(r).transform,a===null||a===!1?this.facet=null:(this.facet=Kt(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===To&&typeof u=="string"?[u]:u,this.fy=t===To&&typeof s=="string"?[s]:s),this.facetAnchor=kM(o),n=_g(n),b!==void 0&&(n={...IM(b),...n}),i!==void 0&&(n={...p8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([M,_])=>{if(rs(_.value)){const{value:P,label:$=_.label,scale:C=_.scale}=_.value;_={..._,label:$,scale:C,value:P}}if(t===To&&typeof _.value=="string"){const{value:P}=_;_={..._,value:[P]}}return[M,_]}).filter(([M,{value:_,optional:P}])=>{if(_!=null)return!0;if(P)return!1;throw new Error(`missing channel value: ${M}`)})),this.dx=+c,this.dy=+f,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+y,this.clip=Dg(g),this.tip=RM(w),this.facet==="super"){if(u||s)throw new Error("super-faceting cannot use fx or fy");for(const M in this.channels){const{scale:_}=n[M];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}v!=null&&(this.render=e2(v,this.render))}initialize(t,n,r){let i=At(this.data);t===void 0&&i!=null&&(t=[Ln(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=At(i)),t!==void 0&&(t.original=a);const o=n8(this.channels,i);return this.sort!=null&&i8(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=Jn}=n[i];if(a!==null){const o=r[i];t=t.filter(u=>a(o[u]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&$8(i,a,n,r.projection)}}scale(t,n,r){const i=r8(t,n);return r.projection&&this.project(t,i,r),i}}function Jg(...e){return e.plot=ct.prototype.plot,e}function e2(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,u){return e.call(this,n,r,i,a,o,(s,l,c,f,h)=>t.call(this,s,l,c,f,h,u))}}function IM(e){return Object.fromEntries(Object.entries(_g(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:za(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function RM(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Kt(e,"tip",["x","y","xy"]):e}function fs(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:rr(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Fd=new WeakMap;function Mf(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:u,render:s,...l}={}){return o=+o,i!=null&&(n??(n=null),u={...u,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),u={...u,py:{value:a,scale:"y"}}),{x:n,y:r,channels:u,...l,render:e2(function(c,f,h,d,m,p){m={...m,pointerSticky:!1};const y=m.ownerSVGElement,{data:g}=m.getMarkState(this);let b=Fd.get(y);b||Fd.set(y,b={sticky:!1,roots:[],renders:[]});let w=b.renders.push(V)-1;const{x:v,y:M,fx:_,fy:P}=f;let $=_?_(c.fx)-d.marginLeft:0,C=P?P(c.fy)-d.marginTop:0;v!=null&&v.bandwidth&&($+=v.bandwidth()/2),M!=null&&M.bandwidth&&(C+=M.bandwidth()/2);const F=c.fi!=null;let S;if(F){let j=b.facetStates;j||(b.facetStates=j=new Map),S=j.get(this),S||j.set(this,S=new Map)}const[A,B]=Ya(this,d),{px:L,py:E}=h,q=L?j=>L[j]:n2(h,A),re=E?j=>E[j]:r2(h,B);let X,J,G,H;function U(j,Y){if(F)if(H&&(H=cancelAnimationFrame(H)),j==null)S.delete(c.fi);else{S.set(c.fi,Y),H=requestAnimationFrame(()=>{H=null;for(const[D,T]of S)if(T<Y||T===Y&&D<c.fi){j=null;break}V(j)});return}V(j)}function V(j){if(X===j&&G===b.sticky)return;X=j,G=m.pointerSticky=b.sticky;const Y=X==null?[]:[X];F&&(Y.fx=c.fx,Y.fy=c.fy,Y.fi=c.fi);const D=p(Y,f,h,d,m);if(J){if(F){const T=J.parentNode,z=J.getAttribute("transform"),N=D.getAttribute("transform");z?D.setAttribute("transform",z):D.removeAttribute("transform"),N?T.setAttribute("transform",N):T.removeAttribute("transform"),D.removeAttribute("aria-label"),D.removeAttribute("aria-description"),D.removeAttribute("aria-hidden")}J.replaceWith(D)}return b.roots[w]=J=D,X==null&&(S==null?void 0:S.size)>1||m.dispatchValue(X==null?null:g[X]),D}function ne(j){if(b.sticky||j.pointerType==="mouse"&&j.buttons===1)return;let[Y,D]=Pw(j);Y-=$,D-=C;const T=Y<d.marginLeft||Y>d.width-d.marginRight?1:e,z=D<d.marginTop||D>d.height-d.marginBottom?1:t;let N=null,le=o*o;for(const ee of c){const ue=T*(q(ee)-Y),_e=z*(re(ee)-D),Te=ue*ue+_e*_e;Te<=le&&(N=ee,le=Te)}if(N!=null&&(e!==1||t!==1)){const ee=q(N)-Y,ue=re(N)-D;le=ee*ee+ue*ue}U(N,le)}function ae(j){j.pointerType==="mouse"&&X!=null&&(b.sticky&&b.roots.some(Y=>Y==null?void 0:Y.contains(j.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(Y=>Y(null))):(b.sticky=!0,V(X)),j.stopImmediatePropagation()))}function ie(j){j.pointerType==="mouse"&&(b.sticky||U(null))}return y.addEventListener("pointerenter",ne),y.addEventListener("pointermove",ne),y.addEventListener("pointerdown",ae),y.addEventListener("pointerleave",ie),V(null)},s)}}function t2(e){return Mf(1,1,e)}function OM(e){return Mf(1,.01,e)}function Bd(e){return Mf(.01,1,e)}function n2({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function r2({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function i2(e){return Fr(e)&&e.interval===void 0?void 0:"tabular-nums"}function qM(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:u=0,marginBottom:s=16+r,marginLeft:l=0,style:c,ticks:f=(i-l-u)/64,tickFormat:h,fontVariant:d=i2(e),round:m=!0,opacity:p,className:y}=t;const g=bf(t);y=mf(y),p=st(p)[1],h===null&&(h=()=>null);const b=Oe("svg",g).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(A=>A.append("style").text(`:where(.${y}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${y}-ramp text) {
  white-space: pre;
}`)).call(pf,c);let w=A=>A.selectAll(".tick line").attr("y1",o+s-a),v;const M=m?(A,B)=>A.rangeRound(B):(A,B)=>A.range(B),{type:_,domain:P,range:$,interpolate:C,scale:F,pivot:S}=e;if(C){const A=$===void 0?C:Iu(C.length===1?vf(C):C,$);v=M(F.copy(),Wt(tt(l,i-u),Math.min(P.length+(S!==void 0),$===void 0?1/0:$.length)));const B=256,L=g.document.createElement("canvas");L.width=B,L.height=1;const E=L.getContext("2d");for(let q=0,re=B-1;q<B;++q)E.fillStyle=A(q/re),E.fillRect(q,0,1,1);b.append("image").attr("opacity",p).attr("x",l).attr("y",o).attr("width",i-l-u).attr("height",a-o-s).attr("preserveAspectRatio","none").attr("xlink:href",L.toDataURL())}else if(_==="threshold"){const A=P,B=h===void 0?L=>L:typeof h=="string"?xi(h):h;v=M(Gc().domain([-1,$.length-1]),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data($).enter().append("rect").attr("x",(L,E)=>v(E-1)).attr("y",o).attr("width",(L,E)=>v(E)-v(E-1)).attr("height",a-o-s).attr("fill",L=>L),f=Ue(A,(L,E)=>E),h=L=>B(A[L],L)}else v=M(Hu().domain(P),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(P).enter().append("rect").attr("x",v).attr("y",o).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",a-o-s).attr("fill",F),w=()=>{};return b.append("g").attr("transform",`translate(0,${a-s})`).call(G3(v).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",et(d,"normal")).call(w).call(A=>A.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const a2=Math.PI/180;function Za(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=tl(n),e.markerMid=tl(r),e.markerEnd=tl(i)}function tl(e){if(e==null||e===!1)return null;if(e===!0)return Id;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Ld("auto");case"arrow-reverse":return Ld("auto-start-reverse");case"dot":return GM;case"circle":case"circle-fill":return Id;case"circle-stroke":return UM;case"tick":return nl("auto");case"tick-x":return nl(90);case"tick-y":return nl(0)}throw new Error(`invalid marker: ${e}`)}function Ld(e){return(t,n)=>Oe("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function GM(e,t){return Oe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Id(e,t){return Oe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function UM(e,t){return Oe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function nl(e){return(t,n)=>Oe("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let zM=0;function hs(e,t,{stroke:n},r){return o2(e,t,n&&(i=>n[i]),r)}function HM(e,t,{stroke:n},r){return o2(e,t,n&&(([i])=>n[i]),r)}function o2(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const u=new Map;function s(l){return function(c){const f=a(c);let h=u.get(l);h||u.set(l,h=new Map);let d=h.get(f);if(!d){const m=this.parentNode.insertBefore(l(f,o),this),p=`plot-marker-${++zM}`;m.setAttribute("id",p),h.set(f,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",s(t)),n&&e.attr("marker-mid",s(n)),r&&e.attr("marker-end",s(r))}function xf({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=s2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function u2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=s2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function s2(e,t,n){return e===void 0&&t===void 0&&n===void 0?bt?[1,0]:[.5,.5]:[t,n]}function l2(e,{interval:t}){return e={...za(e)},e.interval=uf(e.interval===void 0?t:e.interval),e}function c2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:u,interval:s}=l2(i,n);if(u==null||s==null&&!r)return n;const l=Dr(i);if(s==null){let d;const m={transform:p=>d||(d=je(p,u)),label:l};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let c,f;function h(d){return f!==void 0&&d===c?f:f=Ue(je(c=d,u),m=>s.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:h,label:l}:a,[`${e}2`]:o===void 0?{transform:d=>h(d).map(m=>s.offset(m)),label:l}:o})}function f2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=l2(r,n);return i==null||a==null?n:t({...n,[e]:{label:Dr(r),transform:o=>{const u=Ue(je(o,i),l=>a.floor(l)),s=u.map(l=>a.offset(l));return u.map(vt(u)?(l,c)=>l==null||isNaN(l=+l)||(c=s[c],c==null)||isNaN(c=+c)?void 0:new Date((l+c)/2):(l,c)=>l==null||(c=s[c],c==null)?NaN:(+l+ +c)/2)}}})}function WM(e={}){return c2("x",xf,e)}function h2(e={}){return c2("y",u2,e)}function VM(e={}){return f2("x",xf,e)}function YM(e={}){return f2("y",u2,e)}const d2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class jM extends ct{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:u=o,insetBottom:s=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},fs(n,"x"),d2),this.insetTop=Ne(u),this.insetBottom=Ne(s),Za(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y1:l,y2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:y}=i,{insetTop:g,insetBottom:b}=this;return Oe("svg:g",a).call(qt,this,i,a).call(Et,this,{x:s&&o},bt,0).call(w=>w.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",s?v=>s[v]:(p+f-m)/2).attr("x2",s?v=>s[v]:(p+f-m)/2).attr("y1",l&&!gi(u)?v=>l[v]+g:d+g).attr("y2",c&&!gi(u)?u.bandwidth?v=>c[v]+u.bandwidth()-b:v=>c[v]-b:h-y-b).call(Rn,this,r).call(hs,this,r,a)).node()}}class XM extends ct{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:u=o,insetLeft:s=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},fs(n,"y"),d2),this.insetRight=Ne(u),this.insetLeft=Ne(s),Za(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{y:s,x1:l,x2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:y}=i,{insetLeft:g,insetRight:b}=this;return Oe("svg:g",a).call(qt,this,i,a).call(Et,this,{y:s&&u},0,bt).call(w=>w.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",l&&!gi(o)?v=>l[v]+g:p+g).attr("x2",c&&!gi(o)?o.bandwidth?v=>c[v]+o.bandwidth()-b:v=>c[v]-b:f-m-b).attr("y1",s?v=>s[v]:(d+h-y)/2).attr("y2",s?v=>s[v]:(d+h-y)/2).call(Rn,this,r).call(hs,this,r,a)).node()}}function Pf(e,t){let{x:n=rt,y:r,y1:i,y2:a,...o}=h2(t);return[i,a]=m2(r,i,a),new jM(e,{...o,x:n,y1:i,y2:a})}function Sf(e,t){let{y:n=rt,x:r,x1:i,x2:a,...o}=WM(t);return[i,a]=m2(r,i,a),new XM(e,{...o,y:n,x1:i,x2:a})}function m2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Af(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const ZM={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},p2="­";class Ef extends ct{constructor(t,n={}){const{x:r,y:i,text:a=ir(t)&&wg(t)?rt:ns,frameAnchor:o,textAnchor:u=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:s=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:y,fontWeight:g,rotate:b}=n,[w,v]=st(b,0),[M,_]=nx(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:M,optional:!0},rotate:{value:S9(w),optional:!0},text:{value:a,filter:Kc,optional:!0}},n,ZM),this.rotate=v,this.textAnchor=et(u,"middle"),this.lineAnchor=Kt(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=b2(f),this.monospace=!!h,this.fontFamily=ut(d),this.fontSize=_,this.fontStyle=ut(p),this.fontVariant=ut(y),this.fontWeight=ut(g),this.frameAnchor=as(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=y2(this),this.clipLine=v2(this)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,rotate:c,text:f,title:h,fontSize:d}=r,{rotate:m}=this,[p,y]=Ya(this,i);return Oe("svg:g",a).call(qt,this,i,a).call(g2,this,f,i).call(Et,this,{x:s&&o,y:l&&u}).call(g=>g.selectAll().data(t).enter().append("text").call(Gt,this).call(KM,this,f,h).attr("transform",Af`translate(${s?b=>s[b]:p},${l?b=>l[b]:y})${c?b=>` rotate(${c[b]})`:m?` rotate(${m})`:""}`).call(fe,"font-size",d&&(b=>d[b])).call(Rn,this,r)).node()}}function b2(e){return e==null?null:Kt(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function KM(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:u,clipLine:s}=t;e.each(function(l){const c=u($r(n[l])??"").map(s),f=c.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let m=0;m<f;++m){if(++d,!c[m])continue;const p=this.ownerDocument.createElementNS(ai.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(h+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=c[m],this.appendChild(p),d=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=c[0];if(o&&!r&&c[0]!==n[l]){const d=this.ownerDocument.createElementNS(ai.svg,"title");d.textContent=n[l],this.appendChild(d)}})}function $f(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ua(t,n)),new Ef(e,{...r,x:t,y:n})}function QM(e,{x:t=rt,...n}={}){return new Ef(e,YM({...n,x:t}))}function JM(e,{y:t=rt,...n}={}){return new Ef(e,VM({...n,y:t}))}function g2(e,t,n){fe(e,"text-anchor",t.textAnchor),fe(e,"font-family",t.fontFamily),fe(e,"font-size",t.fontSize),fe(e,"font-style",t.fontStyle),fe(e,"font-variant",t.fontVariant===void 0?ex(n):t.fontVariant),fe(e,"font-weight",t.fontWeight)}function ex(e){return e&&($9(e)||vt(e))?"tabular-nums":void 0}const tx=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function nx(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),tx.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function rx(e,t,n){const r=[];let i,a=0;for(const[o,u,s]of ix(e)){if(i===void 0&&(i=o),a>i&&n(e,i,u)>t&&(r.push(e.slice(i,a)+(e[a-1]===p2?"-":"")),i=o),s){r.push(e.slice(i,u)),i=void 0;continue}a=u}return r}function*ix(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case p2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Rd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Cf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ai(e,i))r+=Rd[e[i]]??(_2(e,i)?120:Rd.e);return r}function kf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ai(e,i))r+=_2(e,i)?126:63;return r}function y2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?kf:Cf,i=t*100;return a=>rx(a,i,r)}function v2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?kf:Cf,i=t*100;switch(n){case"clip-start":return a=>qd(a,i,r,"");case"clip-end":return a=>Od(a,i,r,"");case"ellipsis-start":return a=>qd(a,i,r,Xr);case"ellipsis-middle":return a=>ax(a,i,r,Xr);case"ellipsis-end":return a=>Od(a,i,r,Xr)}}const Xr="…";function yi(e,t,n,r){const i=[];let a=0;for(let o=0,u=0,s=e.length;o<s;o=u){u=Ai(e,o);const l=n(e,o,u);if(a+l>t){for(a+=r;a>t&&o>0;)u=o,o=i.pop(),a-=n(e,o,u);return[o,t-a]}a+=l,i.push(o)}return[-1,0]}function Od(e,t,n,r){e=e.trim();const i=n(r),[a]=yi(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function ax(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,u]=yi(e,t/2,n,a),[s]=yi(e,i-t/2-u+a,n,-a);return s<0?r:e.slice(0,o).trimEnd()+r+e.slice(Ai(e,s)).trimStart()}function qd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=yi(e,i-t+a,n,-a);return o<0?r:r+e.slice(Ai(e,o)).trimStart()}const uc=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Gd=new RegExp("\\p{Extended_Pictographic}","uy");function Ai(e,t){return t+=ox(e,t)?2:1,sx(e,t)&&(t=uc.lastIndex),ux(e,t)?Ai(e,t+1):t}function w2(e,t){return e.charCodeAt(t)<128}function ox(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function ux(e,t){return e.charCodeAt(t)===8205}function sx(e,t){return w2(e,t)?!1:(uc.lastIndex=t,uc.test(e))}function _2(e,t){return w2(e,t)?!1:(Gd.lastIndex=t,Gd.test(e))}const lx={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},M2=3.5,cx=M2*5,x2={draw(e,t,n){const r=t*n/cx;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},fx={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},hx=new Map([["arrow",x2],["spike",fx]]);function dx(e){return e&&typeof e.draw=="function"}function mx(e){if(dx(e))return e;const t=hx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class P2 extends ct{constructor(t,n={}){const{x:r,y:i,r:a=M2,length:o,rotate:u,shape:s=x2,anchor:l="middle",frameAnchor:c}=n,[f,h]=st(o,12),[d,m]=st(u,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,lx),this.r=+a,this.length=h,this.rotate=m,this.shape=mx(s),this.anchor=Kt(l,"anchor",["start","middle","end"]),this.frameAnchor=as(c)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,length:c,rotate:f}=r,{length:h,rotate:d,anchor:m,shape:p,r:y}=this,[g,b]=Ya(this,i);return Oe("svg:g",a).call(qt,this,i,a).call(Et,this,{x:s&&o,y:l&&u}).call(w=>w.selectAll().data(t).enter().append("path").call(Gt,this).attr("transform",Af`translate(${s?v=>s[v]:g},${l?v=>l[v]:b})${f?v=>` rotate(${f[v]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?c?v=>` translate(0,${c[v]})`:` translate(0,${h})`:c?v=>` translate(0,${c[v]/2})`:` translate(0,${h/2})`}`).attr("d",c?v=>{const M=Vn();return p.draw(M,c[v],y),M}:(()=>{const v=Vn();return p.draw(v,h,y),v})()).call(Rn,this,r)).node()}}function px(e,t={}){const{x:n=rt,...r}=t;return new P2(e,{...r,x:n})}function bx(e,t={}){const{y:n=rt,...r}=t;return new P2(e,{...r,y:n})}function or(e,t){return arguments.length<2&&!ir(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function ds({anchor:e}={},t){return e===void 0?t[0]:Kt(e,"anchor",t)}function S2(e){return ds(e,["left","right"])}function A2(e){return ds(e,["right","left"])}function E2(e){return ds(e,["bottom","top"])}function $2(e){return ds(e,["top","bottom"])}function C2(){const[e,t]=or(...arguments);return T2("y",S2(t),e,t)}function gx(){const[e,t]=or(...arguments);return T2("fy",A2(t),e,t)}function k2(){const[e,t]=or(...arguments);return N2("x",E2(t),e,t)}function yx(){const[e,t]=or(...arguments);return N2("fx",$2(t),e,t)}function T2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:y,x:g,margin:b,marginTop:w=b===void 0?20:b,marginRight:v=b===void 0?t==="right"?40:0:b,marginBottom:M=b===void 0?20:b,marginLeft:_=b===void 0?t==="left"?40:0:b,label:P,labelAnchor:$,labelArrow:C,labelOffset:F,...S}){return m=Ne(m),p=Ne(p),y=Ne(y),$!==void 0&&($=Kt($,"labelAnchor",["center","top","bottom"])),C=q2(C),Jg(m&&!pt(a)?vx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:y,x:g,...S}):null,pt(s)?null:_x(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:y,x:g,marginTop:w,marginRight:v,marginBottom:M,marginLeft:_,...S}),!pt(s)&&P!==null?$f([],L2({fill:s,fillOpacity:l,...S},function(A,B,L,E,q){const re=E[e],{marginTop:X,marginRight:J,marginBottom:G,marginLeft:H}=e==="y"&&q.inset||q,U=$??(re.bandwidth?"center":"top"),V=F??(t==="right"?J:H)-3;return U==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=U,this.frameAnchor=`${U}-${t}`,this.rotate=0),this.dy=U==="top"?3-X:U==="bottom"?G-3:0,this.dx=t==="right"?V:-V,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[O2(e,re,{anchor:t,label:P,labelAnchor:U,labelArrow:C})]}}}})):null)}function N2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:y,y:g,margin:b,marginTop:w=b===void 0?t==="top"?30:0:b,marginRight:v=b===void 0?20:b,marginBottom:M=b===void 0?t==="bottom"?30:0:b,marginLeft:_=b===void 0?20:b,label:P,labelAnchor:$,labelArrow:C,labelOffset:F,...S}){return m=Ne(m),p=Ne(p),y=Ne(y),$!==void 0&&($=Kt($,"labelAnchor",["center","left","right"])),C=q2(C),Jg(m&&!pt(a)?wx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:y,y:g,...S}):null,pt(s)?null:Mx(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:y,y:g,marginTop:w,marginRight:v,marginBottom:M,marginLeft:_,...S}),!pt(s)&&P!==null?$f([],L2({fill:s,fillOpacity:l,...S},function(A,B,L,E,q){const re=E[e],{marginTop:X,marginRight:J,marginBottom:G,marginLeft:H}=e==="x"&&q.inset||q,U=$??(re.bandwidth?"center":"right"),V=F??(t==="top"?X:G)-3;return U==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${U}`,this.textAnchor=U==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-V:V,this.dx=U==="right"?J-3:U==="left"?3-H:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[O2(e,re,{anchor:t,label:P,labelAnchor:U,labelArrow:C})]}}}})):null)}function vx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetLeft:c=l,insetRight:f=l,dx:h=0,y:d=e==="y"?void 0:null,...m}){return Ei(bx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:u,y:d,...m,dx:t==="left"?+h-bt+ +c:+h+bt-f,anchor:"start",length:s,shape:t==="left"?kx:Tx})}function wx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetTop:c=l,insetBottom:f=l,dy:h=0,x:d=e==="x"?void 0:null,...m}){return Ei(px,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:u,x:d,...m,dy:t==="bottom"?+h-bt-f:+h+bt+ +c,anchor:"start",length:s,shape:t==="bottom"?$x:Cx})}function _x(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*a2):0),text:s,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:c=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:m=h,dx:p=0,y=e==="y"?void 0:null,...g}){return Ei(JM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,y,...g,dx:t==="left"?+p-a-u+ +d:+p+ +a+ +u-m},function(b,w,v,M,_){f===void 0&&(this.fontVariant=R2(b)),s===void 0&&(_.text=I2(b,w,v,M,t))})}function Mx(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*a2):0),text:s,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:m=h,dy:p=0,x:y=e==="x"?void 0:null,...g}){return Ei(QM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,x:y,...g,dy:t==="bottom"?+p+ +a+ +u-m:+p-a-u+ +d},function(b,w,v,M,_){f===void 0&&(this.fontVariant=R2(b)),s===void 0&&(_.text=I2(b,w,v,M,t))})}function xx(){const[e,t]=or(...arguments);return D2("y",S2(t),e,t)}function Px(){const[e,t]=or(...arguments);return D2("fy",A2(t),e,t)}function Sx(){const[e,t]=or(...arguments);return F2("x",E2(t),e,t)}function Ax(){const[e,t]=or(...arguments);return F2("fx",$2(t),e,t)}function D2(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...u}){return Ei(Sf,e,t,`${e}-grid`,n,{y:r,x1:a,x2:o,...B2(u)})}function F2(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...u}){return Ei(Pf,e,t,`${e}-grid`,n,{x:r,y1:a,y2:o,...B2(u)})}function B2({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function L2({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c=!1},f){return[,e]=Fn(e),[,t]=st(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c,initializer:f}}function Ei(e,t,n,r,i,a,o){let u;function s(f,h,d,m,p,y){const g=f==null&&(t==="fx"||t==="fy"),{[t]:b}=m;if(!b)throw new Error(`missing scale: ${t}`);const w=b.domain();let{interval:v,ticks:M,tickFormat:_,tickSpacing:P=t==="x"?80:35}=a;if(typeof M=="string"&&G2(b)&&(v=M,M=void 0),M===void 0&&(M=Si(v,b.type)??Ex(b,P)),f==null){if(ir(M))f=At(M);else if(Hr(M))f=rl(M,...Nt(w));else if(b.interval){let C=b.interval;if(b.ticks){const[F,S]=Nt(w),A=(S-F)/C[qa];C=ld(C,A/M)??C,f=rl(C,F,S)}else{f=w;const F=f.length;C=ld(C,F/M)??C,C!==b.interval&&(f=rl(C,...Nt(f)))}if(C===b.interval){const F=Math.round(f.length/M);F>1&&(f=f.filter((S,A)=>A%F===0))}}else b.ticks?f=b.ticks(M):f=w;if(!b.ticks&&f.length&&f!==w){const C=new Cu(w);f=f.filter(F=>C.has(F)),f.length||Xn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[Ln(f)]:u[t]={scale:t,value:rt}}o==null||o.call(this,b,f,M,_,u);const $=Object.fromEntries(Object.entries(u).map(([C,F])=>[C,{...F,value:je(f,F.value)}]));return g&&(h=y.filterFacets(f,$)),{data:f,facets:h,channels:$}}const l=bi(a).initializer,c=e(i,bi({...a,initializer:s},l));return i==null?(u=c.channels,c.channels={}):u={},c.ariaLabel=r,c.clip===void 0&&(c.clip=!1),c}function Ex(e,t){const[n,r]=Nt(e.range());return(r-n)/t}function I2(e,t,n,r,i){return{value:Tf(e,t,n,r,i)}}function Tf(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&vt(t)?c9(e.type,t,i)??$r:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?$r:typeof r=="string"?(vt(e.domain())?Ra:xi)(r):Ga(r)}function rl(e,t,n){return e.range(t,e.offset(e.floor(n)))}const $x={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Cx={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},kx={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},Tx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function R2(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function O2(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&G2(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[↑↓→←]/.test(r)),!a)return r;if(a===!0){const o=pM(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return`← ${r}`;case"right":return`${r} →`;case"up":return n==="right"?`${r} ↑`:`↑ ${r}`;case"down":return n==="right"?`${r} ↓`:`↓ ${r}`}return r}}function q2(e="auto"){return pt(e)?!1:typeof e=="boolean"?e:Kt(e,"labelArrow",["auto","up","right","down","left"])}function G2(e){return vt(e.domain())}function Ud(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function Nx(e,{opacity:t,...n}={}){if(!Fr(e)&&!Qg(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return U2(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",st(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Dx(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:pt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...u}={},s){const[f,h]=Fn(t),[d,m]=Fn(r),p=Ud(s,f),y=Ud(s,d),g=o*o*Math.PI;return n=st(n)[1],i=st(i)[1],a=st(a)[1],U2(e,u,(b,w,v,M)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",M).attr("fill",f==="color"?_=>p.scale(_):h).attr("fill-opacity",n).attr("stroke",d==="color"?_=>y.scale(_):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",_=>{const P=Vn();return e.scale(_).draw(P,g),P}))}function U2(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=i2(e),swatchSize:o=15,swatchWidth:u=o,swatchHeight:s=o,marginLeft:l=0,className:c,style:f,width:h}=t;const d=bf(t);c=mf(c),i=Tf(e.scale,e.domain,void 0,i);const m=Oe("div",d).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,u,s).call(y=>y.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,u,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(y=>y.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",l?`${+l}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",et(a,"normal")).call(pf,f).node()}const sc=new Map([["symbol",Dx],["color",H2],["opacity",Bx]]);function Fx(e,t,n={}){return(r,i)=>{if(!sc.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return sc.get(r)(e[r],z2(t,n[r],i),a=>e[a])}}function z2({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return N9(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function H2(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return Nx(e,n);case"ramp":return qM(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function Bx({type:e,interpolate:t,...n},{legend:r=!0,color:i=Kn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return H2({type:e,...n,interpolate:Lx(i)},{legend:r,...a})}function Lx(e){const{r:t,g:n,b:r}=Kn(e)||Kn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function Ix(e,t,n){const r=[];for(const[i,a]of sc){const o=n[i];if(o!=null&&o.legend&&i in e){const u=a(e[i],z2(t,e[i],o),s=>e[s]);u!=null&&r.push(u)}}return r}const Rx={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Ox={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class qx extends ct{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:u=r,rx:s,ry:l}=t;super(To,void 0,t,n==null?Rx:Ox),this.anchor=bg(n,"anchor",["top","right","bottom","left"]),this.insetTop=Ne(i),this.insetRight=Ne(a),this.insetBottom=Ne(o),this.insetLeft=Ne(u),this.rx=Ne(s),this.ry=Ne(l)}render(t,n,r,i,a){const{marginTop:o,marginRight:u,marginBottom:s,marginLeft:l,width:c,height:f}=i,{anchor:h,insetTop:d,insetRight:m,insetBottom:p,insetLeft:y,rx:g,ry:b}=this,w=l+y,v=c-u-m,M=o+d,_=f-s-p;return Oe(h?"svg:line":"svg:rect",a).datum(0).call(qt,this,i,a).call(Gt,this).call(Rn,this,r).call(Et,this,{}).call(h==="left"?P=>P.attr("x1",w).attr("x2",w).attr("y1",M).attr("y2",_):h==="right"?P=>P.attr("x1",v).attr("x2",v).attr("y1",M).attr("y2",_):h==="top"?P=>P.attr("x1",w).attr("x2",v).attr("y1",M).attr("y2",M):h==="bottom"?P=>P.attr("x1",w).attr("x2",v).attr("y1",_).attr("y2",_):P=>P.attr("x",w).attr("y",M).attr("width",v-w).attr("height",_-M).attr("rx",g).attr("ry",b)).node()}}function Gx(e){return new qx(e)}const il={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},Ux=new Set(["geometry","href","src","ariaLabel","scales"]);class zx extends ct{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ir(t)&&wg(t)&&(n={...n,title:rt});const{x:r,y:i,x1:a,x2:o,y1:u,y2:s,anchor:l,preferredAnchor:c="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:y,lineHeight:g=1,lineWidth:b=20,frameAnchor:w,format:v,textAnchor:M="start",textOverflow:_,textPadding:P=8,title:$,pointerSize:C=12,pathFilter:F="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:u!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:u,scale:"y",optional:s==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:s,scale:"y",optional:u==null},title:{value:$,optional:!0}},n,il),this.anchor=tc(l,"anchor"),this.preferredAnchor=tc(c,"preferredAnchor"),this.frameAnchor=as(w),this.textAnchor=et(M,"middle"),this.textPadding=+P,this.pointerSize=+C,this.pathFilter=ut(F),this.lineHeight=+g,this.lineWidth=+b,this.textOverflow=b2(_),this.monospace=!!f,this.fontFamily=ut(h),this.fontSize=Ne(d),this.fontStyle=ut(m),this.fontVariant=ut(p),this.fontWeight=ut(y);for(const S in il)S in this.channels&&(this[S]=il[S]);this.splitLines=y2(this),this.clipLine=v2(this),this.format={...v}}render(t,n,r,i,a){const o=this,{x:u,y:s,fx:l,fy:c}=n,{ownerSVGElement:f,document:h}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:y}=this,{textPadding:g,pointerSize:b,pathFilter:w}=this,{marginTop:v,marginLeft:M}=i,{x1:_,y1:P,x2:$,y2:C,x:F=_??$,y:S=P??C}=r,A=l?l(t.fx)-M:0,B=c?c(t.fy)-v:0,[L,E]=Ya(this,i),q=n2(r,L),re=r2(r,E),X=m?kf:Cf,J=X(Xr);let G,H;"title"in r?(G=r.channels,H=jx):(G=Yx.call(this,r,n),H=Xx);const U=Oe("svg:g",a).call(qt,this,i,a).call(g2,this).call(Et,this,{x:F&&u,y:S&&s}).call(ae=>ae.selectAll().data(t).enter().append("g").attr("transform",ie=>`translate(${Math.round(q(ie))},${Math.round(re(ie))})`).call(Gt,this).call(ie=>ie.append("path").attr("filter",w)).call(ie=>ie.append("text").each(function(j){const Y=Ki(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const D=H.call(o,j,t,G,n,r);if(typeof D=="string")for(const T of o.splitLines(D))V(Y,{value:o.clipLine(T)});else{const T=new Set;for(const z of D){const{label:N=""}=z;N&&T.has(N)||(T.add(N),V(Y,z))}}})));function V(ae,{label:ie,value:j,color:Y,opacity:D}){ie??(ie=""),j??(j="");const T=Y!=null||D!=null;let z,N=y*100;const[le]=yi(ie,N,X,J);if(le>=0)ie=ie.slice(0,le).trimEnd()+Xr,z=j.trim(),j="";else{(ie||!j&&!T)&&(j=" "+j);const[ue]=yi(j,N-X(ie),X,J);ue>=0&&(z=j.trim(),j=j.slice(0,ue).trimEnd()+Xr)}const ee=ae.append("tspan").attr("x",0).attr("dy",`${p}em`).text("​");ie&&ee.append("tspan").attr("font-weight","bold").text(ie),j&&ee.append(()=>h.createTextNode(j)),T&&ee.append("tspan").text(" ■").attr("fill",Y).attr("fill-opacity",D).style("user-select","none"),z&&ee.append("title").text(z)}function ne(){const{width:ae,height:ie}=i.facet??i;U.selectChildren().each(function(j){let{x:Y,width:D,height:T}=this.getBBox();D=Math.round(D),T=Math.round(T);let z=d;if(z===void 0){const ee=q(j)+A,ue=re(j)+B,_e=ee+D+b+g*2<ae,Te=ee-D-b-g*2>0,Re=ue+T+b+g*2<ie,Ae=ue-T-b-g*2>0;z=_e&&Te?Re&&Ae?o.preferredAnchor:Ae?"bottom":"top":Re&&Ae?_e?"left":"right":(_e||Te)&&(Re||Ae)?`${Ae?"bottom":"top"}-${_e?"left":"right"}`:o.preferredAnchor}const N=this.firstChild,le=this.lastChild;if(N.setAttribute("d",Vx(z,b,g,D,T)),Y)for(const ee of le.childNodes)ee.setAttribute("x",-Y);le.setAttribute("y",`${+Hx(z,le.childNodes.length,p).toFixed(6)}em`),le.setAttribute("transform",`translate(${Wx(z,b,g,D,T)})`)}),U.attr("visibility",null)}return t.length&&(U.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(ne):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ne)),U.node()}}function W2(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ua(t,n)),new zx(e,{...r,x:t,y:n})}function Hx(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Wx(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Vx(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function Yx({channels:e},t){var i,a;const n={};let r=this.format;r=zd(r,e,"x"),r=zd(r,e,"y"),this.format=r;for(const o in r){const u=r[o];if(!(u===null||u===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const s=yd(e,o);s&&(n[o]=s)}}for(const o in e){if(o in n||o in r||Ux.has(o))continue;const u=yd(e,o);u&&(n[o]=u)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const u=this.format[o];if(typeof u=="string"){const s=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(vt(s)?Ra:xi)(u)}else if(u===void 0||u===!0){const s=t[o];this.format[o]=s!=null&&s.bandwidth?Tf(s,s.domain()):$r}}return n}function zd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([u])=>u===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function jx(e,t,{title:n}){return $r(n.value[e],e)}function*Xx(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:vu(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:Wd(r,n,"x"),value:Hd(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:Wd(r,n,"y"),value:Hd(this.format.y2,n.y1,o,e)};else{const u=o.value[e],s=o.scale;if(!Jn(u)&&s==null)continue;yield{label:vu(r,n,a),value:this.format[a](u,e),color:s==="color"?i[a][e]:null,opacity:s==="opacity"?i[a][e]:null}}}}function Hd(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}–${e(n.value[r],r)}`}function Wd(e,t,n){const r=vu(e,t,`${n}1`,n),i=vu(e,t,`${n}2`,n);return r===i?r:`${r}–${i}`}function vu(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function Qt(e={}){var J;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:u}=e,s=mf(e.className),l=e.marks===void 0?[]:Yd(e.marks);l.push(...rP(l));const c=tP(t,e),f=new Map;for(const G of l){const H=jd(G,c,e);H&&f.set(G,H)}const h=new Map;c&&Li(h,[c],e),Li(h,f,e);const d=Yd(iP(l,h,e));for(const G of d){const H=jd(G,c,e);H&&f.set(G,H)}l.unshift(...d);let m=SM(h,e);if(m!==void 0){const G=c?el(m,c):void 0;for(const U of l){if(U.facet===null||U.facet==="super")continue;const V=f.get(U);V!==void 0&&(V.facetsIndex=U.fx!=null||U.fy!=null?el(m,V):G)}const H=new Set;for(const{facetsIndex:U}of f.values())U==null||U.forEach((V,ne)=>{(V==null?void 0:V.length)>0&&H.add(ne)});m.forEach(0<H.size&&H.size<m.length?(U,V)=>U.empty=!H.has(V):U=>U.empty=!1);for(const U of l)if(U.facet==="exclude"){const V=f.get(U);V!==void 0&&(V.facetsIndex=$M(V.facetsIndex))}}for(const G of Ie.keys())Jl(e[G])&&G!=="fx"&&G!=="fy"&&h.set(G,[]);const p=new Map;for(const G of l){if(p.has(G))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:H,channels:U}=f.get(G)??{},{data:V,facets:ne,channels:ae}=G.initialize(H,U,e);Nf(ae,e),p.set(G,{data:V,facets:ne,channels:ae})}const y=ac(Li(h,p,e),e),g=xM(y,l,e);dM(y,g);const b=Ed(y),{fx:w,fy:v}=b,M=w||v?Xg(y,g):g,_=w||v?fP(b,g):g,P=bf(e),$=P.document,C=Fu("svg").call($.documentElement);let F=C;P.ownerSVGElement=C,P.className=s,P.projection=S8(e,M),P.filterFacets=(G,H)=>el(m,{channels:H,groups:_f(G,H)}),P.getMarkState=G=>{const H=p.get(G),U=f.get(G);return{...H,channels:{...H.channels,...U==null?void 0:U.channels}}},P.dispatchValue=G=>{F.value!==G&&(F.value=G,F.dispatchEvent(new Event("input",{bubbles:!0})))};const S=new Set;for(const[G,H]of p)if(G.initializer!=null){const U=G.facet==="super"?_:M,V=G.initializer(H.data,H.facets,H.channels,b,U,P);if(V.data!==void 0&&(H.data=V.data),V.facets!==void 0&&(H.facets=V.facets),V.channels!==void 0){const{fx:ne,fy:ae,...ie}=V.channels;eP(ie),Object.assign(H.channels,ie);for(const j of Object.values(ie)){const{scale:Y}=j;Y!=null&&!F9(Ie.get(Y))&&(V2(j,e),S.add(Y))}(ne!=null||ae!=null)&&f.set(G,!0)}}if(S.size){const G=new Map;Li(G,p,e,ne=>S.has(ne)),Li(h,p,e,ne=>S.has(ne));const H=cP(ac(G,e),y),{scales:U,...V}=Ed(H);Object.assign(y,H),Object.assign(b,V),Object.assign(b.scales,U)}let A,B;m!==void 0&&(A={x:w==null?void 0:w.domain(),y:v==null?void 0:v.domain()},m=AM(m,A),B=EM(w,v,g));for(const[G,H]of p)H.values=G.scale(H.channels,b,P);const{width:L,height:E}=g;Ki(C).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",L).attr("height",E).attr("viewBox",`0 0 ${L} ${E}`).attr("aria-label",o).attr("aria-description",u).call(G=>G.append("style").text(`:where(.${s}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${s} text),
:where(.${s} tspan) {
  white-space: pre;
}`)).call(pf,n);for(const G of l){const{channels:H,values:U,facets:V}=p.get(G);if(m===void 0||G.facet==="super"){let ne=null;if(V&&(ne=V[0],ne=G.filter(ne,H,U),ne.length===0))continue;const ae=G.render(ne,b,U,_,P);if(ae==null)continue;C.appendChild(ae)}else{let ne;for(const ae of m){if(!(((J=G.facetAnchor)==null?void 0:J.call(G,m,A,ae))??!ae.empty))continue;let ie=null;if(V){const Y=f.has(G);if(ie=V[Y?ae.i:0],ie=G.filter(ie,H,U),ie.length===0)continue;!Y&&ie===V[0]&&(ie=_9(ie)),ie.fx=ae.x,ie.fy=ae.y,ie.fi=ae.i}const j=G.render(ie,b,U,M,P);if(j!=null){(ne??(ne=Ki(C).append("g"))).append(()=>j).datum(ae);for(const Y of["aria-label","aria-description","aria-hidden","transform"])j.hasAttribute(Y)&&(ne.attr(Y,j.getAttribute(Y)),j.removeAttribute(Y))}}ne==null||ne.selectChildren().attr("transform",B)}}const q=Ix(y,P,e),{figure:re=r!=null||i!=null||a!=null||q.length>0}=e;re&&(F=$.createElement("figure"),F.className=`${s}-figure`,F.style.maxWidth="initial",r!=null&&F.append(Vd($,r,"h2")),i!=null&&F.append(Vd($,i,"h3")),F.append(...q,C),a!=null&&F.append(Zx($,a))),F.scale=_M(b.scales),F.legend=Fx(y,P,e);const X=d8();return X>0&&Ki(C).append("text").attr("x",L).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${X.toLocaleString("en-US")} warning${X===1?"":"s"}. Please check the console.`),F}function Vd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Zx(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Kx({marks:e=[],...t}={}){return Qt({...t,marks:[...e,this]})}ct.prototype.plot=Kx;function Yd(e){return e.flat(1/0).filter(t=>t!=null).map(Qx)}function Qx(e){return typeof e.render=="function"?e:new Jx(e)}class Jx extends ct{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Nf(e,t){for(const n in e)V2(e[n],t);return e}function V2(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:u=a?s=>s*100:vg(o,i)}=t[n]??{};u!=null&&(e.value=Ue(e.value,u),e.transform=!1)}function eP(e){for(const t in e)$g(t,e[t])}function Li(e,t,n,r=p9){var i,a;for(const{channels:o}of t.values())for(const u in o){const s=o[u],{scale:l}=s;if(l!=null&&r(l))if(l==="projection"){if(!C8(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,f=((a=n.y)==null?void 0:a.domain)===void 0;if(c||f){const[h,d]=T8(s);c&&al(e,"x",h),f&&al(e,"y",d)}}}else al(e,l,s)}return e}function al(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function tP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=At(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=ya(i,{value:n,scale:"fx"})),r!=null&&(a.fy=ya(i,{value:r,scale:"fy"})),Nf(a,t);const o=_f(i,a);return{channels:a,groups:o,data:e.data}}function jd(e,t,n){var s;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=At(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const c={};return r!=null&&(c.fx=ya(l,{value:r,scale:"fx"})),i!=null&&(c.fy=ya(l,{value:i,scale:"fy"})),Nf(c,n),{channels:c,groups:_f(l,c)}}if(t===void 0)return;const{channels:a,groups:o,data:u}=t;if(e.facet!=="auto"||e.data===u)return{channels:a,groups:o};u.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((s=At(e.data))==null?void 0:s.length)===u.length&&Xn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function nP(e,t={}){return bi({...t,x:null,y:null},(n,r,i,a,o,u)=>u.getMarkState(e))}function rP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?OM:/^y$/i.test(i)?Bd:t2,r=i(nP(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===Bd?"left":"bottom");const o=W2(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function iP(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:u={},axis:s,grid:l,facet:c={},facet:{axis:f=s,grid:h}=c,x:{axis:d=s,grid:m=d===null?null:l}=i,y:{axis:p=s,grid:y=p===null?null:l}=a,fx:{axis:g=f,grid:b=g===null?null:h}=o,fy:{axis:w=f,grid:v=w===null?null:h}=u}=n;(r||!Jl(i)&&!Xd("x",e))&&(d=m=null),(r||!Jl(a)&&!Xd("y",e))&&(p=y=null),t.has("fx")||(g=b=null),t.has("fy")||(w=v=null),d===void 0&&(d=!wo(e,"x")),p===void 0&&(p=!wo(e,"y")),g===void 0&&(g=!wo(e,"fx")),w===void 0&&(w=!wo(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),g===!0&&(g=d==="top"||d===null?"bottom":"top"),w===!0&&(w=p==="right"||p===null?"left":"right");const M=[];return vo(M,v,Px,u),yo(M,w,gx,"right","left",c,u),vo(M,b,Ax,o),yo(M,g,yx,"top","bottom",c,o),vo(M,y,xx,a),yo(M,p,C2,"left","right",n,a),vo(M,m,Sx,i),yo(M,d,k2,"bottom","top",n,i),M}function yo(e,t,n,r,i,a,o){if(!t)return;const u=aP(t);o=oP(u?r:t,a,o);const{line:s}=o;(n===C2||n===k2)&&s&&!ga(s)&&e.push(Gx(uP(o))),e.push(n(o)),u&&e.push(n({...o,anchor:i,label:null}))}function vo(e,t,n,r){!t||ga(t)||e.push(n(sP(t,r)))}function aP(e){return/^\s*both\s*$/i.test(e)}function oP(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:m,labelOffset:p}}function uP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function sP(e,{stroke:t=is(e)?e:void 0,ticks:n=lP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function lP(e){switch(typeof e){case"number":return!0;case"string":return!is(e)}return ir(e)||typeof(e==null?void 0:e.range)=="function"}function wo(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function Xd(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function cP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function fP({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=wf(n),l=e&&Zd(e),c=t&&Zd(t);return{marginTop:t?c[0]:r,marginRight:e?u-l[1]:i,marginBottom:t?s-c[1]:a,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:u,height:s}}function Zd(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const hP=new Map([["basis",v4],["basis-closed",w4],["basis-open",_4],["bundle",M4],["bump-x",s4],["bump-y",l4],["cardinal",x4],["cardinal-closed",P4],["cardinal-open",S4],["catmull-rom",A4],["catmull-rom-closed",E4],["catmull-rom-open",$4],["linear",Oa],["linear-closed",C4],["monotone-x",k4],["monotone-y",T4],["natural",N4],["step",D4],["step-after",B4],["step-before",F4]]);function Y2(e=Oa,t){if(typeof e=="function")return e;const n=hP.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function j2(e=vi,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?vi:Y2(e,t)}function vi(e){return Oa(e)}function dP(e={y:"count"},t={}){[e,t]=bP(e,t);const{x:n,y:r}=t;return pP(gP(n,t,rt),null,null,r,e,xf(t))}function mP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=df}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function X2(e={}){return mP(dP,"y",fs(e,"x"))}function pP(e,t,n,r,{data:i=Eg,filter:a=yu,sort:o,reverse:u,...s}={},l={}){e=Kd(e),t=Kd(t),s=vP(s,l),i=Q2(i,rt),o=o==null?void 0:Z2("sort",o,l),a=a==null?void 0:K2("filter",a,l),n!=null&&mo(s,"x","x1","x2")&&(n=null),r!=null&&mo(s,"y","y1","y2")&&(r=null);const[c,f]=_n(e),[h,d]=_n(e),[m,p]=_n(t),[y,g]=_n(t),[b,w]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[v,M]=_n(b),{x:_,y:P,z:$,fill:C,stroke:F,x1:S,x2:A,y1:B,y2:L,domain:E,cumulative:q,thresholds:re,interval:X,...J}=l,[G,H]=_n($),[U]=Fn(C),[V]=Fn(F),[ne,ae]=_n(U),[ie,j]=_n(V);return{..."z"in l&&{z:G||$},..."fill"in l&&{fill:ne||C},..."stroke"in l&&{stroke:ie||F},...us(J,(Y,D,T)=>{const z=yg(je(Y,b),T==null?void 0:T[w]),N=je(Y,$),le=je(Y,U),ee=je(Y,V),ue=j9(s,{z:N,fill:le,stroke:ee}),_e=[],Te=[],Re=z&&M([]),Ae=N&&H([]),$e=le&&ae([]),ce=ee&&j([]),qe=e&&f([]),$t=e&&d([]),Ce=t&&p([]),ys=t&&g([]),On=MP(e,t,Y);let Je=0;for(const ft of s)ft.initialize(Y);o&&o.initialize(Y),a&&a.initialize(Y);for(const ft of D){const ke=[];for(const ur of s)ur.scope("facet",ft);o&&o.scope("facet",ft),a&&a.scope("facet",ft);for(const[ur,O]of md(ft,ue))for(const[oe,xe]of md(O,z))for(const[wt,en]of On(xe))if(!(a&&!a.reduce(wt,en))){ke.push(Je++),Te.push(i.reduceIndex(wt,Y,en)),z&&Re.push(oe),N&&Ae.push(ue===N?ur:N[(wt.length>0?wt:xe)[0]]),le&&$e.push(ue===le?ur:le[(wt.length>0?wt:xe)[0]]),ee&&ce.push(ue===ee?ur:ee[(wt.length>0?wt:xe)[0]]),qe&&(qe.push(en.x1),$t.push(en.x2)),Ce&&(Ce.push(en.y1),ys.push(en.y2));for(const Ja of s)Ja.reduce(wt,en);o&&o.reduce(wt)}_e.push(ke)}return X9(_e,o,u),{data:Te,facets:_e}}),...!mo(s,"x")&&(c?{x1:c,x2:h,x:ec(c,h)}:{x:_,x1:S,x2:A}),...!mo(s,"y")&&(m?{y1:m,y2:y,y:ec(m,y)}:{y:P,y1:B,y2:L}),...v&&{[w]:v},...Object.fromEntries(s.map(({name:Y,output:D})=>[Y,D]))}}function bP({cumulative:e,domain:t,thresholds:n,interval:r,...i},a){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...a}]}function gP(e,{cumulative:t,domain:n,thresholds:r,interval:i},a){return e={...za(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=a),e.thresholds=yP(e.thresholds,e.interval),e}function Kd(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Nt,thresholds:i}=e,a=o=>{let u=je(o,t),s;if(vt(u)||_P(i)){u=Ue(u,pg,Float64Array);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Hr(i)?i(u,c,f):i;typeof h=="number"&&(h=cp(c,f,h)),Hr(h)&&(r===Nt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f))),s=h}else{u=on(u);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Hr(i)?i(u,c,f):i;if(typeof h=="number")if(r===Nt){let d=Go(c,f,h);if(isFinite(d))if(d>0){let m=Math.round(c/d),p=Math.round(f/d);m*d<=c||--m,p*d>f||++p;let y=p-m+1;h=new Float64Array(y);for(let g=0;g<y;++g)h[g]=(m+g)*d}else if(d<0){d=-d;let m=Math.round(c*d),p=Math.round(f*d);m/d<=c||--m,p/d>f||++p;let y=p-m+1;h=new Float64Array(y);for(let g=0;g<y;++g)h[g]=(m+g)/d}else h=[c];else h=[c]}else h=aa(c,f,h);else Hr(h)&&(r===Nt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f)));s=h}const l=[];if(s.length===1)l.push([s[0],s[0]]);else for(let c=1;c<s.length;++c)l.push([s[c-1],s[c]]);return l.bin=(n<0?PP:n>0?xP:Df)(l,s,u),l};return a.label=Dr(t),a}function yP(e,t,n=Qd){if(e===void 0)return t===void 0?n:Si(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return C3;case"scott":return M1;case"sturges":return S3;case"auto":return Qd}return tf(e)}return e}function vP(e,t){return W9(e,t,Z2)}function Z2(e,t,n){return Sg(e,t,n,K2)}function K2(e,t,n){return Ag(e,t,n,Q2)}function Q2(e,t){return hf(e,t,wP)}function wP(e){switch(`${e}`.toLowerCase()){case"x":return SP;case"x1":return EP;case"x2":return $P;case"y":return AP;case"y1":return CP;case"y2":return kP}throw new Error(`invalid bin reduce: ${e}`)}function Qd(e,t,n){return Math.min(200,M1(e,t,n))}function _P(e){return P9(e)||ir(e)&&vt(e)}function MP(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries()){const c=i.bin(o[u]);for(const[f,[h,d]]of i.entries())yield[c[f],{data:n,x1:s,y1:h,x2:l,y2:d}]}}:r?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries())yield[o[u],{data:n,x1:s,x2:l}]}:function*(a){const o=i.bin(a);for(const[u,[s,l]]of i.entries())yield[o[u],{data:n,y1:s,y2:l}]}}function Df(e,t,n){return t=on(t),r=>{var a;const i=e.map(()=>[]);for(const o of r)(a=i[Eu(t,n[o])-1])==null||a.push(o);return i}}function xP(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=1,u=a.length;o<u;++o){const s=a[o-1],l=a[o];for(const c of s)l.push(c)}return a}}function PP(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=a.length-2;o>=0;--o){const u=a[o+1],s=a[o];for(const l of u)s.push(l)}return a}}function J2(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const SP={reduceIndex(e,t,{x1:n,x2:r}){return J2(n,r)}},AP={reduceIndex(e,t,{y1:n,y2:r}){return J2(n,r)}},EP={reduceIndex(e,t,{x1:n}){return n}},$P={reduceIndex(e,t,{x2:n}){return n}},CP={reduceIndex(e,t,{y1:n}){return n}},kP={reduceIndex(e,t,{y2:n}){return n}};function ey(e={}){return gg(e)?e:{...e,y:rt}}function TP(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const u of t)for(const s of u)r[s]&&++i,r[s]=1;if(i===0)return{data:e,facets:t};e=ba(e);const a=e[dg]=new Uint32Array(n+i);t=t.map(u=>ba(u,Uint32Array));let o=n;r.fill(0);for(const u of t)for(let s=0,l=u.length;s<l;++s){const c=u[s];r[c]?(u[s]=o,e[o]=e[c],a[o]=c,++o):a[c]=c,r[c]=1}return{data:e,facets:t}}function NP(e={},t={}){arguments.length===1&&([e,t]=DP(e));const{x1:n,x:r=n,y:i,...a}=t,[o,u,s,l]=BP(r,i,"x","y",e,a);return{...o,x1:n,x:u,y1:s,y2:l,y:ec(s,l)}}function ty({y:e,y1:t,y2:n,...r}={}){return r=fs(r,"x"),t===void 0&&n===void 0?NP({y:e,...r}):([t,n]=w9(e,t,n),{...r,y1:t,y2:n})}function DP(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const FP={length:!0};function BP(e,t=m9,n,r,{offset:i,order:a,reverse:o},u){if(t===null)throw new Error(`stack requires ${r}`);const s=af(u),[l,c]=_n(e),[f,h]=gu(t),[d,m]=gu(t);return f.hint=d.hint=FP,i=LP(i),a=OP(a,i,r),[us(u,(p,y,g)=>{({data:p,facets:y}=TP(p,y));const b=e==null?void 0:c(yg(je(p,e),g==null?void 0:g[n])),w=je(p,t,Float64Array),v=je(p,s),M=a&&a(p,b,w,v),_=p.length,P=h(new Float64Array(_)),$=m(new Float64Array(_)),C=[];for(const F of y){const S=b?Array.from(ku(F,A=>b[A]).values()):[F];if(M)for(const A of S)A.sort(M);for(const A of S){let B=0,L=0;o&&A.reverse();for(const E of A){const q=w[E];q<0?B=$[E]=(P[E]=B)+q:q>0?L=$[E]=(P[E]=L)+q:$[E]=P[E]=L}}C.push(S)}return i&&i(C,P,$,v),{data:p,facets:y}}),l,f,d]}function LP(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return IP;case"center":case"silhouette":return RP;case"wiggle":return ry}throw new Error(`unknown offset: ${e}`)}}function ny(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function IP(e,t,n){for(const r of e)for(const i of r){const[a,o]=ny(i,n);for(const u of i){const s=1/(o-a||1);t[u]=s*(t[u]-a),n[u]=s*(n[u]-a)}}}function RP(e,t,n){for(const r of e){for(const i of r){const[a,o]=ny(i,n);for(const u of i){const s=(o+a)/2;t[u]-=s,n[u]-=s}}iy(r,t,n)}ay(e,t,n)}function ry(e,t,n,r){for(const i of e){const a=new wr;let o=0;for(const u of i){let s=-1;const l=u.map(d=>Math.abs(n[d]-t[d])),c=u.map(d=>{s=r?r[d]:++s;const m=n[d]-t[d],p=a.has(s)?m-a.get(s):0;return a.set(s,m),p}),f=[0,...v3(c)];for(const d of u)t[d]+=o,n[d]+=o;const h=Zn(l);h&&(o-=Zn(l,(d,m)=>(c[m]/2+f[m])*d)/h)}iy(i,t,n)}ay(e,t,n)}function iy(e,t,n){const r=kn(e,i=>kn(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function ay(e,t,n){const r=e.length;if(r===1)return;const i=e.map(u=>u.flat()),a=i.map(u=>(kn(u,s=>t[s])+It(u,s=>n[s]))/2),o=kn(a);for(let u=0;u<r;u++){const s=o-a[u];for(const l of i[u])t[l]+=s,n[l]+=s}}function OP(e,t,n){if(e===void 0&&t===ry)return Jd(jt);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?bu:jt;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return qP(i);case"z":return GP(i);case"sum":return UP(i);case"appearance":return zP(i);case"inside-out":return Jd(i)}return e0(mg(e))}if(typeof e=="function")return(e.length===1?e0:HP)(e);if(Array.isArray(e))return WP(e);throw new Error(`invalid order: ${e}`)}}function qP(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function GP(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function UP(e){return ms(e,(t,n,r,i)=>xc(Ln(t),a=>Zn(a,o=>r[o]),a=>i[a]))}function zP(e){return ms(e,(t,n,r,i)=>xc(Ln(t),a=>n[_1(a,o=>r[o])],a=>i[a]))}function Jd(e){return ms(e,(t,n,r,i)=>{const a=Ln(t),o=xc(a,f=>n[_1(f,h=>r[h])],f=>i[f]),u=Vr(a,f=>Zn(f,h=>r[h]),f=>i[f]),s=[],l=[];let c=0;for(const f of o)c<0?(c+=u.get(f),s.push(f)):(c-=u.get(f),l.push(f));return l.reverse().concat(s)})}function e0(e){return t=>{const n=je(t,e);return(r,i)=>jt(n[r],n[i])}}function HP(e){return t=>(n,r)=>e(t[n],t[r])}function WP(e){return ms(jt,()=>e)}function ms(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new wr(t(n,r,i,a).map((u,s)=>[u,s]));return(u,s)=>e(o.get(a[u]),o.get(a[s]))}}const VP={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class YP extends ct{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,z:u,curve:s,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:af(n),optional:!0}},n,VP),this.z=u,this.curve=Y2(s,l)}filter(t){return t}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r;return Oe("svg:g",a).call(qt,this,i,a).call(Et,this,n,0,0).call(c=>c.selectAll().data(Ng(t,[o,u,s,l],this,r)).enter().append("path").call(Gt,this).call(Tg,this,r).attr("d",u4().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>u[f]).x1(f=>s[f]).y1(f=>l[f]))).node()}}function jP(e,t){const{x:n=ns,...r}=X2(t);return new YP(e,ty(ey({...r,x1:n,x2:void 0})))}const XP={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class ZP extends ct{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:u,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,XP),this.curve=j2(u,s),Za(this,n)}project(t,n,r){this.curve!==vi&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r,{curve:c}=this;return Oe("svg:g",a).call(qt,this,i,a).call(Et,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Gt,this).attr("d",c===vi&&a.projection?KP(a.projection,o,u,s,l):h=>{const d=Vn(),m=c(d);return m.lineStart(),m.point(o[h],u[h]),m.point(s[h],l[h]),m.lineEnd(),d}).call(Rn,this,r).call(hs,this,r,a)).node()}}function KP(e,t,n,r,i){const a=qu(e);return t=on(t),n=on(n),r=on(r),i=on(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function Ff(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...u}={}){return[n,r]=t0(t,n,r),[a,o]=t0(i,a,o),new ZP(e,{...u,x1:n,x2:r,y1:a,y2:o})}function t0(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class oy extends ct{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:u=a,insetBottom:s=a,insetLeft:l=a,rx:c,ry:f}=r;this.insetTop=Ne(o),this.insetRight=Ne(u),this.insetBottom=Ne(s),this.insetLeft=Ne(l),this.rx=et(c,"auto"),this.ry=et(f,"auto")}render(t,n,r,i,a){const{rx:o,ry:u}=this;return Oe("svg:g",a).call(qt,this,i,a).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("rect").call(Gt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(fe,"rx",o).call(fe,"ry",u).call(Rn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}}const QP={ariaLabel:"bar"};class JP extends oy{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,QP)}_transform(t,n,{y:r}){t.call(Et,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return gi(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:u,insetBottom:s}=this;return gi(t)?o-i-a-u-s:l=>Math.max(0,Math.abs(r[l]-n[l])-u-s)}}function eS(e,t={}){return v9(t)||(t={...t,x:ns,y2:rt}),new JP(e,ty(h2(ey(t))))}const tS={ariaLabel:"cell"};class nS extends oy{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,tS)}_transform(t,n){t.call(Et,n,{},0,0)}}function rS(e,{x:t,y:n,...r}={}){return[t,n]=Ua(t,n),new nS(e,{...r,x:t,y:n})}const iS={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function aS(e){return e.sort===void 0&&e.reverse===void 0?U9({channel:"-r"},e):e}class oS extends ct{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:u=ma,frameAnchor:s}=n,[l,c]=st(o,0),[f,h]=q9(u),[d,m]=st(a,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:es,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},aS(n),iS),this.r=m,this.rotate=c,this.symbol=h,this.frameAnchor=as(s);const{channels:p}=this,{symbol:y}=p;if(y){const{fill:g,stroke:b}=p;y.hint={fill:g?g.value===y.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===y.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,r:c,rotate:f,symbol:h}=r,{r:d,rotate:m,symbol:p}=this,[y,g]=Ya(this,i),b=p===ma,w=c?void 0:d*d*Math.PI;return Qc(d)&&(t=[]),Oe("svg:g",a).call(qt,this,i,a).call(Et,this,{x:s&&o,y:l&&u}).call(v=>v.selectAll().data(t).enter().append(b?"circle":"path").call(Gt,this).call(b?M=>{M.attr("cx",s?_=>s[_]:y).attr("cy",l?_=>l[_]:g).attr("r",c?_=>c[_]:d)}:M=>{M.attr("transform",Af`translate(${s?_=>s[_]:y},${l?_=>l[_]:g})${f?_=>` rotate(${f[_]})`:m?` rotate(${m})`:""}`).attr("d",c&&h?_=>{const P=Vn();return h[_].draw(P,c[_]*c[_]*Math.PI),P}:c?_=>{const P=Vn();return p.draw(P,c[_]*c[_]*Math.PI),P}:h?_=>{const P=Vn();return h[_].draw(P,w),P}:(()=>{const _=Vn();return p.draw(_,w),_})())}).call(Rn,this,r)).node()}}function Bf(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Ua(t,n)),new oS(e,{...r,x:t,y:n})}const uS={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class uy extends ct{constructor(t,n={}){const{x:r,y:i,z:a,curve:o,tension:u}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:af(n),optional:!0}},n,uS),this.z=a,this.curve=j2(o,u),Za(this,n)}filter(t){return t}project(t,n,r){this.curve!==vi&&super.project(t,n,r)}render(t,n,r,i,a){const{x:o,y:u}=r,{curve:s}=this;return Oe("svg:g",a).call(qt,this,i,a).call(Et,this,n).call(l=>l.selectAll().data(Ng(t,[o,u],this,r)).enter().append("path").call(Gt,this).call(Tg,this,r).call(HM,this,r,a).attr("d",s===vi&&a.projection?sS(a.projection,o,u):Nb().curve(s).defined(c=>c>=0).x(c=>o[c]).y(c=>u[c]))).node()}}function sS(e,t,n){const r=qu(e);return t=on(t),n=on(n),i=>{let a=[];const o=[a];for(const u of i)u===-1?(a=[],o.push(a)):a.push([t[u],n[u]]);return r({type:"MultiLineString",coordinates:o})}}function lS(e,{x:t,y:n,...r}={}){return[t,n]=Ua(t,n),new uy(e,{...r,x:t,y:n})}function cS(e,{x:t=ns,y:n=rt,...r}={}){return new uy(e,X2({...r,x:t,y:n}))}const fS={ariaLabel:"tick",fill:null,stroke:"currentColor"};class hS extends ct{constructor(t,n,r){super(t,n,r,fS),Za(this,r)}render(t,n,r,i,a){return Oe("svg:g",a).call(qt,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Gt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Rn,this,r).call(hs,this,r,a)).node()}}class dS extends hS{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Ne(o),this.insetBottom=Ne(u)}_transform(t,n,{x:r}){t.call(Et,n,{x:r},bt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function Lf(e,{x:t=rt,...n}={}){return new dS(e,{...n,x:t})}function mS(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),R(n,"width",r=e[0]+"px"),R(n,"height",i=e[1]+"px"),xt(t,"width",e[0]+"px"),xt(t,"margin","auto")},m(a,o){Q(a,t,o),x(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&R(n,"width",r),o&2&&i!==(i=a[1]+"px")&&R(n,"height",i),o&1&&xt(t,"width",a[0]+"px")},i:we,o:we,d(a){a&&K(t),e[4](null)}}}function pS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dn(()=>{const s=Qt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Lf(r,{x:l=>l})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){lt[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Zr extends Ke{constructor(t){super(),Ze(this,t,pS,mS,Xe,{pattern:3,width:0,height:1})}}function bS(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),R(n,"width",r=e[0]+"px"),R(n,"height",i=e[1]+"px"),xt(t,"width",e[0]+"px"),xt(t,"margin","auto")},m(a,o){Q(a,t,o),x(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&R(n,"width",r),o&2&&i!==(i=a[1]+"px")&&R(n,"height",i),o&1&&xt(t,"width",a[0]+"px")},i:we,o:we,d(a){a&&K(t),e[4](null)}}}function gS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dn(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=Qt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},marks:[eS(s,{x:(c,f)=>f+1,y:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){lt[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Kr extends Ke{constructor(t){super(),Ze(this,t,gS,bS,Xe,{pattern:3,width:0,height:1})}}function yS(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),R(n,"width",r=e[0]+"px"),R(n,"height",i=e[1]+"px"),xt(t,"width",e[0]+"px"),xt(t,"margin","auto")},m(a,o){Q(a,t,o),x(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&R(n,"width",r),o&2&&i!==(i=a[1]+"px")&&R(n,"height",i),o&1&&xt(t,"width",a[0]+"px")},i:we,o:we,d(a){a&&K(t),e[4](null)}}}function vS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;dn(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=Qt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[rS(s,{x:(c,f)=>f+1,fill:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){lt[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Qr extends Ke{constructor(t){super(),Ze(this,t,vS,yS,Xe,{pattern:3,width:0,height:1})}}function wS(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),R(n,"width",r=e[0]+"px"),R(n,"height",i=e[1]+"px"),xt(t,"width",e[0]+"px"),xt(t,"margin","auto")},m(a,o){Q(a,t,o),x(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&R(n,"width",r),o&2&&i!==(i=a[1]+"px")&&R(n,"height",i),o&1&&xt(t,"width",a[0]+"px")},i:we,o:we,d(a){a&&K(t),e[5](null)}}}function _S(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;dn(()=>{if(n(2,u.textContent="",u),!r)return;const l=Qt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[cS(r,{x:(c,f)=>f/i,y:c=>c})]});u.appendChild(l)});function s(l){lt[l?"unshift":"push"](()=>{u=l,n(2,u)})}return e.$$set=l=>{"audioData"in l&&n(3,r=l.audioData),"sampleRate"in l&&n(4,i=l.sampleRate),"width"in l&&n(0,a=l.width),"height"in l&&n(1,o=l.height)},[a,o,u,r,i,s]}class Jr extends Ke{constructor(t){super(),Ze(this,t,_S,wS,Xe,{audioData:3,sampleRate:4,width:0,height:1})}}function MS(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=I(),i=k("button"),i.textContent="play audio (p)",n.controls=!0},m(u,s){Q(u,t,s),x(t,n),e[5](n),x(t,r),x(t,i),a||(o=Le(i,"click",e[1]),a=!0)},p:we,i:we,o:we,d(u){u&&K(t),e[5](null),a=!1,o()}}}function xS(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:a=-1}=t,o;const u=c=>{c&&o&&Zc(c,i,o)},s=()=>{o&&(o.pause(),n(0,o.currentTime=0,o),o.play())};ni(()=>{document.querySelector("html").addEventListener("keyup",c=>{c.key==="p"&&s()})});function l(c){lt[c?"unshift":"push"](()=>{o=c,n(0,o)})}return e.$$set=c=>{"audioData"in c&&n(2,r=c.audioData),"sampleRate"in c&&n(3,i=c.sampleRate),"currentTrialNumber"in c&&n(4,a=c.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&window.setTimeout(s,200),e.$$.dirty&4&&u(r)},[o,s,r,i,a,l]}class lc extends Ke{constructor(t){super(),Ze(this,t,xS,MS,Xe,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const sy=new Map,ly=new Map,PS=new Map,SS=new Map;function AS(e){return sy.get(e)}function cy(e){return ly.get(e)}const ES=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],$S=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],CS=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of ES)sy.set(e.pitch,e),ly.set(e.label,e);for(const e of $S)PS.set(e.number,e);for(const e of CS){const t=`${e.number}-${e.subnumber}`;SS.set(t,e)}var kS={value:()=>{}};function fy(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new No(n)}function No(e){this._=e}function TS(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}No.prototype=fy.prototype={constructor:No,on:function(e,t){var n=this._,r=TS(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=NS(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=n0(n[i],e.name,t);else if(t==null)for(i in n)n[i]=n0(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new No(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function NS(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function n0(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=kS,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var cc="http://www.w3.org/1999/xhtml";const r0={svg:"http://www.w3.org/2000/svg",xhtml:cc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ps(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),r0.hasOwnProperty(t)?{space:r0[t],local:e}:e}function DS(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===cc&&t.documentElement.namespaceURI===cc?t.createElement(e):t.createElementNS(n,e)}}function FS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hy(e){var t=ps(e);return(t.local?FS:DS)(t)}function BS(){}function If(e){return e==null?BS:function(){return this.querySelector(e)}}function LS(e){typeof e!="function"&&(e=If(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Ot(r,this._parents)}function dy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function IS(){return[]}function my(e){return e==null?IS:function(){return this.querySelectorAll(e)}}function RS(e){return function(){var t=e.apply(this,arguments);return t==null?[]:dy(t)}}function OS(e){typeof e=="function"?e=RS(e):e=my(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Ot(r,i)}function py(e){return function(){return this.matches(e)}}function by(e){return function(t){return t.matches(e)}}var qS=Array.prototype.find;function GS(e){return function(){return qS.call(this.children,e)}}function US(){return this.firstElementChild}function zS(e){return this.select(e==null?US:GS(typeof e=="function"?e:by(e)))}var HS=Array.prototype.filter;function WS(){return this.children}function VS(e){return function(){return HS.call(this.children,e)}}function YS(e){return this.selectAll(e==null?WS:VS(typeof e=="function"?e:by(e)))}function jS(e){typeof e!="function"&&(e=py(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Ot(r,this._parents)}function gy(e){return new Array(e.length)}function XS(){return new Ot(this._enter||this._groups.map(gy),this._parents)}function wu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wu.prototype={constructor:wu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ZS(e){return function(){return e}}function KS(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new wu(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function QS(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new wu(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function JS(e){return e.__data__}function eA(e,t){if(!arguments.length)return Array.from(this,JS);var n=t?QS:KS,r=this._parents,i=this._groups;typeof e!="function"&&(e=ZS(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=dy(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),y=o[l]=new Array(m),g=s[l]=new Array(h);n(c,f,p,y,g,d,t);for(var b=0,w=0,v,M;b<m;++b)if(v=p[b]){for(b>=w&&(w=b+1);!(M=y[w])&&++w<m;);v._next=M||null}}return o=new Ot(o,r),o._enter=u,o._exit=s,o}function tA(){return new Ot(this._exit||this._groups.map(gy),this._parents)}function nA(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function rA(e){if(!(e instanceof Ot))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Ot(o,this._parents)}function iA(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function aA(e){e||(e=oA);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Ot(i,this._parents).order()}function oA(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uA(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sA(){return Array.from(this)}function lA(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function cA(){let e=0;for(const t of this)++e;return e}function fA(){return!this.node()}function hA(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function dA(e){return function(){this.removeAttribute(e)}}function mA(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pA(e,t){return function(){this.setAttribute(e,t)}}function bA(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function yA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vA(e,t){var n=ps(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?mA:dA:typeof t=="function"?n.local?yA:gA:n.local?bA:pA)(n,t))}function yy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wA(e){return function(){this.style.removeProperty(e)}}function _A(e,t,n){return function(){this.style.setProperty(e,t,n)}}function MA(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function xA(e,t,n){return arguments.length>1?this.each((t==null?wA:typeof t=="function"?MA:_A)(e,t,n??"")):wi(this.node(),e)}function wi(e,t){return e.style.getPropertyValue(t)||yy(e).getComputedStyle(e,null).getPropertyValue(t)}function PA(e){return function(){delete this[e]}}function SA(e,t){return function(){this[e]=t}}function AA(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function EA(e,t){return arguments.length>1?this.each((t==null?PA:typeof t=="function"?AA:SA)(e,t)):this.node()[e]}function vy(e){return e.trim().split(/^|\s+/)}function Rf(e){return e.classList||new wy(e)}function wy(e){this._node=e,this._names=vy(e.getAttribute("class")||"")}wy.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _y(e,t){for(var n=Rf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function My(e,t){for(var n=Rf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function $A(e){return function(){_y(this,e)}}function CA(e){return function(){My(this,e)}}function kA(e,t){return function(){(t.apply(this,arguments)?_y:My)(this,e)}}function TA(e,t){var n=vy(e+"");if(arguments.length<2){for(var r=Rf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?kA:t?$A:CA)(n,t))}function NA(){this.textContent=""}function DA(e){return function(){this.textContent=e}}function FA(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function BA(e){return arguments.length?this.each(e==null?NA:(typeof e=="function"?FA:DA)(e)):this.node().textContent}function LA(){this.innerHTML=""}function IA(e){return function(){this.innerHTML=e}}function RA(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function OA(e){return arguments.length?this.each(e==null?LA:(typeof e=="function"?RA:IA)(e)):this.node().innerHTML}function qA(){this.nextSibling&&this.parentNode.appendChild(this)}function GA(){return this.each(qA)}function UA(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zA(){return this.each(UA)}function HA(e){var t=typeof e=="function"?e:hy(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function WA(){return null}function VA(e,t){var n=typeof e=="function"?e:hy(e),r=t==null?WA:typeof t=="function"?t:If(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function YA(){var e=this.parentNode;e&&e.removeChild(this)}function jA(){return this.each(YA)}function XA(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ZA(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function KA(e){return this.select(e?ZA:XA)}function QA(e){return arguments.length?this.property("__data__",e):this.node().__data__}function JA(e){return function(t){e.call(this,t,this.__data__)}}function eE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function tE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function nE(e,t,n){return function(){var r=this.__on,i,a=JA(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function rE(e,t,n){var r=eE(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?nE:tE,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function xy(e,t,n){var r=yy(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function iE(e,t){return function(){return xy(this,e,t)}}function aE(e,t){return function(){return xy(this,e,t.apply(this,arguments))}}function oE(e,t){return this.each((typeof t=="function"?aE:iE)(e,t))}function*uE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var sE=[null];function Ot(e,t){this._groups=e,this._parents=t}function Ka(){return new Ot([[document.documentElement]],sE)}function lE(){return this}Ot.prototype=Ka.prototype={constructor:Ot,select:LS,selectAll:OS,selectChild:zS,selectChildren:YS,filter:jS,data:eA,enter:XS,exit:tA,join:nA,merge:rA,selection:lE,order:iA,sort:aA,call:uA,nodes:sA,node:lA,size:cA,empty:fA,each:hA,attr:vA,style:xA,property:EA,classed:TA,text:BA,html:OA,raise:GA,lower:zA,append:HA,insert:VA,remove:jA,clone:KA,datum:QA,on:rE,dispatch:oE,[Symbol.iterator]:uE};function Of(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Py(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qa(){}var wa=.7,_u=1/wa,ei="\\s*([+-]?\\d+)\\s*",_a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",cn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cE=/^#([0-9a-f]{3,8})$/,fE=new RegExp("^rgb\\("+[ei,ei,ei]+"\\)$"),hE=new RegExp("^rgb\\("+[cn,cn,cn]+"\\)$"),dE=new RegExp("^rgba\\("+[ei,ei,ei,_a]+"\\)$"),mE=new RegExp("^rgba\\("+[cn,cn,cn,_a]+"\\)$"),pE=new RegExp("^hsl\\("+[_a,cn,cn]+"\\)$"),bE=new RegExp("^hsla\\("+[_a,cn,cn,_a]+"\\)$"),i0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Of(Qa,Ma,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:a0,formatHex:a0,formatHsl:gE,formatRgb:o0,toString:o0});function a0(){return this.rgb().formatHex()}function gE(){return Sy(this).formatHsl()}function o0(){return this.rgb().formatRgb()}function Ma(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=cE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?u0(t):n===3?new _t(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_o(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_o(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fE.exec(e))?new _t(t[1],t[2],t[3],1):(t=hE.exec(e))?new _t(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=dE.exec(e))?_o(t[1],t[2],t[3],t[4]):(t=mE.exec(e))?_o(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pE.exec(e))?c0(t[1],t[2]/100,t[3]/100,1):(t=bE.exec(e))?c0(t[1],t[2]/100,t[3]/100,t[4]):i0.hasOwnProperty(e)?u0(i0[e]):e==="transparent"?new _t(NaN,NaN,NaN,0):null}function u0(e){return new _t(e>>16&255,e>>8&255,e&255,1)}function _o(e,t,n,r){return r<=0&&(e=t=n=NaN),new _t(e,t,n,r)}function yE(e){return e instanceof Qa||(e=Ma(e)),e?(e=e.rgb(),new _t(e.r,e.g,e.b,e.opacity)):new _t}function fc(e,t,n,r){return arguments.length===1?yE(e):new _t(e,t,n,r??1)}function _t(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Of(_t,fc,Py(Qa,{brighter:function(e){return e=e==null?_u:Math.pow(_u,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?wa:Math.pow(wa,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:s0,formatHex:s0,formatRgb:l0,toString:l0}));function s0(){return"#"+ol(this.r)+ol(this.g)+ol(this.b)}function l0(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ol(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function c0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new an(e,t,n,r)}function Sy(e){if(e instanceof an)return new an(e.h,e.s,e.l,e.opacity);if(e instanceof Qa||(e=Ma(e)),!e)return new an;if(e instanceof an)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new an(o,u,s,e.opacity)}function Ay(e,t,n,r){return arguments.length===1?Sy(e):new an(e,t,n,r??1)}function an(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Of(an,Ay,Py(Qa,{brighter:function(e){return e=e==null?_u:Math.pow(_u,e),new an(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?wa:Math.pow(wa,e),new an(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new _t(ul(e>=240?e-240:e+120,i,r),ul(e,i,r),ul(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function ul(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ey=e=>()=>e;function vE(e,t){return function(n){return e+n*t}}function wE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function _E(e){return(e=+e)==1?$y:function(t,n){return n-t?wE(t,n,e):Ey(isNaN(t)?n:t)}}function $y(e,t){var n=t-e;return n?vE(e,n):Ey(isNaN(e)?t:e)}const hc=function e(t){var n=_E(t);function r(i,a){var o=n((i=fc(i)).r,(a=fc(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=$y(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Hn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var dc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sl=new RegExp(dc.source,"g");function ME(e){return function(){return e}}function xE(e){return function(t){return e(t)+""}}function PE(e,t){var n=dc.lastIndex=sl.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=dc.exec(e))&&(i=sl.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:Hn(r,i)})),n=sl.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?xE(s[0].x):ME(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}var f0=180/Math.PI,mc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cy(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*f0,skewX:Math.atan(s)*f0,scaleX:o,scaleY:u}}var Mo;function SE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mc:Cy(t.a,t.b,t.c,t.d,t.e,t.f)}function AE(e){return e==null||(Mo||(Mo=document.createElementNS("http://www.w3.org/2000/svg","g")),Mo.setAttribute("transform",e),!(e=Mo.transform.baseVal.consolidate()))?mc:(e=e.matrix,Cy(e.a,e.b,e.c,e.d,e.e,e.f))}function ky(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Hn(l,f)},{i:p-2,x:Hn(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Hn(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Hn(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Hn(l,f)},{i:p-2,x:Hn(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,y;++m<p;)f[(y=h[m]).i]=y.x(d);return f.join("")}}}var EE=ky(SE,"px, ","px)","deg)"),$E=ky(AE,", ",")",")"),_i=0,Yi=0,Ii=0,Ty=1e3,Mu,ji,xu=0,Cr=0,bs=0,xa=typeof performance=="object"&&performance.now?performance:Date,Ny=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qf(){return Cr||(Ny(CE),Cr=xa.now()+bs)}function CE(){Cr=0}function Pu(){this._call=this._time=this._next=null}Pu.prototype=Dy.prototype={constructor:Pu,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?qf():+n)+(t==null?0:+t),!this._next&&ji!==this&&(ji?ji._next=this:Mu=this,ji=this),this._call=e,this._time=n,pc()},stop:function(){this._call&&(this._call=null,this._time=1/0,pc())}};function Dy(e,t,n){var r=new Pu;return r.restart(e,t,n),r}function kE(){qf(),++_i;for(var e=Mu,t;e;)(t=Cr-e._time)>=0&&e._call.call(null,t),e=e._next;--_i}function h0(){Cr=(xu=xa.now())+bs,_i=Yi=0;try{kE()}finally{_i=0,NE(),Cr=0}}function TE(){var e=xa.now(),t=e-xu;t>Ty&&(bs-=t,xu=e)}function NE(){for(var e,t=Mu,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Mu=n);ji=e,pc(r)}function pc(e){if(!_i){Yi&&(Yi=clearTimeout(Yi));var t=e-Cr;t>24?(e<1/0&&(Yi=setTimeout(h0,e-xa.now()-bs)),Ii&&(Ii=clearInterval(Ii))):(Ii||(xu=xa.now(),Ii=setInterval(TE,Ty)),_i=1,Ny(h0))}}function d0(e,t,n){var r=new Pu;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var DE=fy("start","end","cancel","interrupt"),FE=[],Fy=0,m0=1,bc=2,Do=3,p0=4,gc=5,Fo=6;function gs(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;BE(e,n,{name:t,index:r,group:i,on:DE,tween:FE,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Fy})}function Gf(e,t){var n=Jt(e,t);if(n.state>Fy)throw new Error("too late; already scheduled");return n}function bn(e,t){var n=Jt(e,t);if(n.state>Do)throw new Error("too late; already running");return n}function Jt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function BE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Dy(a,0,n.time);function a(l){n.state=m0,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==m0)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Do)return d0(o);d.state===p0?(d.state=Fo,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Fo,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(d0(function(){n.state===Do&&(n.state=p0,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=bc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bc){for(n.state=Do,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=gc,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===gc&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Fo,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function LE(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>bc&&r.state<gc,r.state=Fo,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function IE(e){return this.each(function(){LE(this,e)})}function RE(e,t){var n,r;return function(){var i=bn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function OE(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=bn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function qE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Jt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?RE:OE)(n,e,t))}function Uf(e,t,n){var r=e._id;return e.each(function(){var i=bn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Jt(i,r).value[t]}}function By(e,t){var n;return(typeof t=="number"?Hn:t instanceof Ma?hc:(n=Ma(t))?(t=n,hc):PE)(e,t)}function GE(e){return function(){this.removeAttribute(e)}}function UE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function HE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function WE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function VE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function YE(e,t){var n=ps(e),r=n==="transform"?$E:By;return this.attrTween(e,typeof t=="function"?(n.local?VE:WE)(n,r,Uf(this,"attr."+e,t)):t==null?(n.local?UE:GE)(n):(n.local?HE:zE)(n,r,t))}function jE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function XE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ZE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&XE(e,a)),n}return i._value=t,i}function KE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&jE(e,a)),n}return i._value=t,i}function QE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ps(e);return this.tween(n,(r.local?ZE:KE)(r,t))}function JE(e,t){return function(){Gf(this,e).delay=+t.apply(this,arguments)}}function e$(e,t){return t=+t,function(){Gf(this,e).delay=t}}function t$(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?JE:e$)(t,e)):Jt(this.node(),t).delay}function n$(e,t){return function(){bn(this,e).duration=+t.apply(this,arguments)}}function r$(e,t){return t=+t,function(){bn(this,e).duration=t}}function i$(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?n$:r$)(t,e)):Jt(this.node(),t).duration}function a$(e,t){if(typeof t!="function")throw new Error;return function(){bn(this,e).ease=t}}function o$(e){var t=this._id;return arguments.length?this.each(a$(t,e)):Jt(this.node(),t).ease}function u$(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;bn(this,e).ease=n}}function s$(e){if(typeof e!="function")throw new Error;return this.each(u$(this._id,e))}function l$(e){typeof e!="function"&&(e=py(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Bn(r,this._parents,this._name,this._id)}function c$(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Bn(o,this._parents,this._name,this._id)}function f$(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function h$(e,t,n){var r,i,a=f$(t)?Gf:bn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function d$(e,t){var n=this._id;return arguments.length<2?Jt(this.node(),n).on.on(e):this.each(h$(n,e,t))}function m$(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function p$(){return this.on("end.remove",m$(this._id))}function b$(e){var t=this._name,n=this._id;typeof e!="function"&&(e=If(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,gs(l[h],t,n,h,l,Jt(c,n)));return new Bn(a,this._parents,t,n)}function g$(e){var t=this._name,n=this._id;typeof e!="function"&&(e=my(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=Jt(c,n),p=0,y=h.length;p<y;++p)(d=h[p])&&gs(d,t,n,p,h,m);a.push(h),o.push(c)}return new Bn(a,o,t,n)}var y$=Ka.prototype.constructor;function v$(){return new y$(this._groups,this._parents)}function w$(e,t){var n,r,i;return function(){var a=wi(this,e),o=(this.style.removeProperty(e),wi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Ly(e){return function(){this.style.removeProperty(e)}}function _$(e,t,n){var r,i=n+"",a;return function(){var o=wi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function M$(e,t,n){var r,i,a;return function(){var o=wi(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),wi(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function x$(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=bn(this,e),l=s.on,c=s.value[a]==null?u||(u=Ly(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function P$(e,t,n){var r=(e+="")=="transform"?EE:By;return t==null?this.styleTween(e,w$(e,r)).on("end.style."+e,Ly(e)):typeof t=="function"?this.styleTween(e,M$(e,r,Uf(this,"style."+e,t))).each(x$(this._id,e)):this.styleTween(e,_$(e,r,t),n).on("end.style."+e,null)}function S$(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function A$(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&S$(e,o,n)),r}return a._value=t,a}function E$(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,A$(e,t,n??""))}function $$(e){return function(){this.textContent=e}}function C$(e){return function(){var t=e(this);this.textContent=t??""}}function k$(e){return this.tween("text",typeof e=="function"?C$(Uf(this,"text",e)):$$(e==null?"":e+""))}function T$(e){return function(t){this.textContent=e.call(this,t)}}function N$(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&T$(i)),t}return r._value=e,r}function D$(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,N$(e))}function F$(){for(var e=this._name,t=this._id,n=Iy(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=Jt(s,t);gs(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Bn(r,this._parents,e,n)}function B$(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=bn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var L$=0;function Bn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Iy(){return++L$}var sr=Ka.prototype;Bn.prototype={constructor:Bn,select:b$,selectAll:g$,filter:l$,merge:c$,selection:v$,transition:F$,call:sr.call,nodes:sr.nodes,node:sr.node,size:sr.size,empty:sr.empty,each:sr.each,on:d$,attr:YE,attrTween:QE,style:P$,styleTween:E$,text:k$,textTween:D$,remove:p$,tween:qE,delay:t$,duration:i$,ease:o$,easeVarying:s$,end:B$,[Symbol.iterator]:sr[Symbol.iterator]};function I$(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var R$={time:null,delay:0,duration:250,ease:I$};function O$(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function q$(e){var t,n;e instanceof Bn?(t=e._id,e=e._name):(t=Iy(),(n=R$).time=qf(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&gs(s,e,t,l,o,n||O$(s,t));return new Bn(r,this._parents,e,t)}Ka.prototype.interrupt=IE;Ka.prototype.transition=q$;function Xi(e,t,n){this.k=e,this.x=t,this.y=n}Xi.prototype={constructor:Xi,scale:function(e){return e===1?this:new Xi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Xi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Xi.prototype;var G$={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,u="",s,l,c=0;for(;c<r.length;)o=i.indexOf(r.charAt(c++))<<18|i.indexOf(r.charAt(c++))<<12|(s=i.indexOf(r.charAt(c++)))<<6|(l=i.indexOf(r.charAt(c++))),u+=s===64?String.fromCharCode(o>>16&255):l===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return u},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(u){i(n.Uint8(new Uint8Array(u.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let u=0;u<a;u++)o[u]=i.charCodeAt(u);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(s){return this.pointer+=s,this.pointer},readInt:function(s){if(s=Math.min(s,this.data.byteLength-this.pointer),s<1)return-1;let l=0;if(s>1)for(let c=1;c<=s-1;c++)l+=this.data.getUint8(this.pointer)*Math.pow(256,s-c),this.pointer++;return l+=this.data.getUint8(this.pointer),this.pointer++,l},readStr:function(s){let l="";for(let c=1;c<=s;c++)l+=String.fromCharCode(this.readInt(1));return l},readIntVLV:function(){let s=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)s=this.readInt(1);else{let l=[];for(;this.data.getUint8(this.pointer)>=128;)l.push(this.readInt(1)-128);let c=this.readInt(1);for(let f=1;f<=l.length;f++)s+=l[l.length-f]*Math.pow(128,f);s+=c}return s}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),u=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=u):a.timeDivision=o*256+u;for(let s=1;s<=a.tracks;s++){a.track[s-1]={event:[]};let l=i.readInt(4);if(l===-1)break;if(l!==1297379947)return!1;i.readInt(4);let c=0,f=!1,h,d;for(;!f&&(c++,a.track[s-1].event[c-1]={},a.track[s-1].event[c-1].deltaTime=i.readIntVLV(),h=i.readInt(1),h!==-1);)if(h>=128?d=h:(h=d,i.movePointer(-1)),h===255){a.track[s-1].event[c-1].type=255,a.track[s-1].event[c-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[s-1].event[c-1].metaType){case 47:case-1:f=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[s-1].event[c-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[s-1].event[c-1].data=i.readInt(m);break;case 84:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1),a.track[s-1].event[c-1].data[4]=i.readInt(1);break;case 88:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,m)),(this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)&&(i.readInt(m),a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(h=h.toString(16).split(""),h[1]||h.unshift("0"),a.track[s-1].event[c-1].type=parseInt(h[0],16),a.track[s-1].event[c-1].channel=parseInt(h[1],16),a.track[s-1].event[c-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].type,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1){let m=i.readIntVLV();a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[s-1].event[c-1].data=i.readInt(1);break;case-1:f=!0;break;default:if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(G$);function U$(e){return 1/(e/60)}const Ry=[],z$=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of z$)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;Ry.push({type:e,dots:t,duration:n})}Ry.sort((e,t)=>e.duration-t.duration);class se{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>cy(r).pitch),this.stringCount=n.length}}new se("E stand.",["E2","A2","D3","G3","B3","E4"]),new se("Drop D",["D2","A2","D3","G3","B3","E4"]),new se("Drop C",["C2","G2","C3","F3","A3","D4"]),new se("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new se("1 down",["D2","G2","C3","F3","A3","D4"]),new se("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new se("2 down",["C2","F2","A#2","D#3","G3","C4"]),new se("DADGAG",["D2","A2","D3","G3","A3","D4"]),new se("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new se("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new se("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new se("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new se("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new se("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new se("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new se("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new se("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new se("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new se("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new se("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new se("E stand.",["E1","A1","D2","G2"]),new se("Drop D",["D1","A1","D2","G2"]),new se("1/2 down",["D#1","G#1","C#2","F#2"]),new se("1 down",["D1","G1","C2","F2"]),new se("1 1/2 down",["C#1","F#1","B1","E2"]),new se("2 down",["C1","F1","A#1","D#2"]),new se("B stand.",["B0","E1","A1","D2","G2"]),new se("Drop A",["A0","D1","A1","D2","G2"]),new se("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new se("1 down",["A0","D1","G1","C2","F2"]),new se("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new se("2 down",["G0","C1","F1","A#1","D#2"]),new se("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new se("Drop E",["E0","A0","D1","A1","D2","G2"]),new se("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new se("1 down",["E1","A0","D1","G1","C2","F2"]),new se("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new se("2 down",["D0","G0","C1","F1","A#1","D#2"]),new se("Hawaii",["G4","C4","E4","A4"]),new se("Low G",["G3","C4","E4","A4"]),new se("D-tuning",["A4","D4","F#4","B4"]),new se("Canadian",["A3","D4","F#4","B4"]),new se("Bariton",["D3","G3","B3","E4"]);function Oy(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function qy(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var Gy=[0,2,4,-1,1,3,5],Uy=Gy.map(e=>Math.floor(e*7/12));function zy(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=Gy[t]+7*n;if(r===void 0)return[i*a];const o=r-Uy[t]-4*n;return[i*a,i*o]}var H$=[3,0,4,1,5,2,6];function W$(e){const[t,n,r]=e,i=H$[V$(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+Uy[i];return{step:i,alt:a,oct:o,dir:r}}function V$(e){const t=(e+1)%7;return t<0?7+t:t}var b0=(e,t)=>Array(Math.abs(t)+1).join(e),yc=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),Y$="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",j$="(AA|A|P|M|m|d|dd)([-+]?\\d+)",X$=new RegExp("^"+Y$+"|"+j$+"$");function Z$(e){const t=X$.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var g0={};function Su(e){return typeof e=="string"?g0[e]||(g0[e]=K$(e)):qy(e)?Su(J$(e)):Oy(e)?Su(e.name):yc}var y0=[0,2,4,5,7,9,11],Hy="PMMPPMM";function K$(e){const t=Z$(e);if(t[0]==="")return yc;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=Hy[i];if(a==="M"&&r==="P")return yc;const o=a==="M"?"majorable":"perfectable",u=""+n+r,s=n<0?-1:1,l=n===8||n===-8?n:s*(i+1),c=Q$(o,r),f=Math.floor((Math.abs(n)-1)/7),h=s*(y0[i]+c+12*f),d=(s*(y0[i]+c)%12+12)%12,m=zy({step:i,alt:c,oct:f,dir:s});return{empty:!1,name:u,num:n,q:r,step:i,alt:c,dir:s,type:o,simple:l,semitones:h,chroma:d,coord:m,oct:f}}function Q$(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function J$(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,u=i<0?"-":"",s=Hy[t]==="M"?"majorable":"perfectable";return u+o+eC(s,n)}function eC(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?b0("A",t):b0("d",e==="perfectable"?t:t+1)}var v0=(e,t)=>Array(Math.abs(t)+1).join(e),Wy=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),w0=new Map,tC=e=>"CDEFGAB".charAt(e),nC=e=>e<0?v0("b",-e):v0("#",e),rC=e=>e[0]==="b"?-e.length:e.length;function Pa(e){const t=JSON.stringify(e),n=w0.get(t);if(n)return n;const r=typeof e=="string"?sC(e):qy(e)?Pa(lC(e)):Oy(e)?Pa(e.name):Wy;return w0.set(t,r),r}var iC=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function aC(e){const t=iC.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function oC(e){return Pa(W$(e))}var uC=(e,t)=>(e%t+t)%t,ll=[0,2,4,5,7,9,11];function sC(e){const t=aC(e);if(t[0]===""||t[3]!=="")return Wy;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=rC(r),u=i.length?+i:void 0,s=zy({step:a,alt:o,oct:u}),l=n+r+i,c=n+r,f=(ll[a]+o+120)%12,h=u===void 0?uC(ll[a]+o,12)-12*99:ll[a]+o+12*(u+1),d=h>=0&&h<=127?h:null,m=u===void 0?null:Math.pow(2,(h-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:f,coord:s,freq:m,height:h,letter:n,midi:d,name:l,oct:u,pc:c,step:a}}function lC(e){const{step:t,alt:n,oct:r}=e,i=tC(t);if(!i)return"";const a=i+nC(n);return r||r===0?a+r:a}function cC(e,t){const n=Pa(e),r=Array.isArray(t)?t:Su(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return oC(a).name}function Vy(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var er={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Yy=e=>Number(e).toString(2).padStart(12,"0"),_0=e=>parseInt(e,2),fC=/^[01]{12}$/;function jy(e){return fC.test(e)}var hC=e=>typeof e=="number"&&e>=0&&e<=4095,dC=e=>e&&jy(e.chroma),M0={[er.chroma]:er};function zf(e){const t=jy(e)?e:hC(e)?Yy(e):Array.isArray(e)?yC(e):dC(e)?e.chroma:er.chroma;return M0[t]=M0[t]||gC(t)}var mC=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function pC(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(mC[n]);return t}function bC(e){const t=e.split("");return t.map((n,r)=>Vy(r,t).join(""))}function gC(e){const t=_0(e),n=bC(e).map(_0).filter(a=>a>=2048).sort()[0],r=Yy(n),i=pC(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function yC(e){if(e.length===0)return er.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=Pa(e[r]),t.empty&&(t=Su(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var vC=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],wC=vC;({...er});var Xy=[],Bo={};function _C(e,t,n){const r=xC(e),i={...zf(e),name:n||"",quality:r,intervals:e,aliases:t};Xy.push(i),i.name&&(Bo[i.name]=i),Bo[i.setNum]=i,Bo[i.chroma]=i,i.aliases.forEach(a=>MC(i,a))}function MC(e,t){Bo[t]=e}function xC(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}wC.forEach(([e,t,n])=>_C(e.split(" "),n.split(" "),t));Xy.sort((e,t)=>e.setNum-t.setNum);var PC=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],SC=PC;({...er});var Zy=[],Lo={};function AC(e,t,n){const r=$C(e),i={...zf(e),name:n||"",quality:r,intervals:e,aliases:t};Zy.push(i),i.name&&(Lo[i.name]=i),Lo[i.setNum]=i,Lo[i.chroma]=i,i.aliases.forEach(a=>EC(i,a))}function EC(e,t){Lo[t]=e}function $C(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}SC.forEach(([e,t,n])=>AC(e.split(" "),n.split(" "),t));Zy.sort((e,t)=>e.setNum-t.setNum);var CC=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],kC=CC,TC={...er,intervals:[],aliases:[]},na={};function NC(e){return na[e]||TC}function DC(e,t,n=[]){const r={...zf(e),name:t,intervals:e,aliases:n};return na[r.name]=r,na[r.setNum]=r,na[r.chroma]=r,r.aliases.forEach(i=>FC(r,i)),r}function FC(e,t){na[t]=e}kC.forEach(([e,t,...n])=>DC(e.split(" "),t,n));var Hf=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],x0={...er,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},BC=Hf.map(LC),vc={};BC.forEach(e=>{vc[e.name]=e,e.aliases.forEach(t=>{vc[t]=e})});function Ky(e){return typeof e=="string"?vc[e.toLowerCase()]||x0:e&&e.name?Ky(e.name):x0}function LC(e){const[t,n,r,i,a,o,u]=e,s=u?[u]:[],l=Number(n).toString(2);return{empty:!1,intervals:NC(i).intervals,modeNum:t,chroma:l,normalized:l,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:s}}function Qy(e){return(t,n)=>{const r=Ky(t);if(r.empty)return[];const i=Vy(r.modeNum,e),a=r.intervals.map(o=>cC(n,o));return i.map((o,u)=>a[u]+o)}}Qy(Hf.map(e=>e[4]));Qy(Hf.map(e=>e[5]));class qn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>cy(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="°",u-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="°",u-=12;const s=AS(i).name;n.set(i,{number:a,letterString:`${s}${o}`})}return[...n.values()].map(r=>r.letterString)}}new qn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new qn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new qn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new qn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new qn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new qn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new qn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new qn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function IC(e,t=1){const n=Ay(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>IC(e,.5));const RC=hc("black","steelblue");Array.from({length:12}).map((e,t)=>RC(t/11));function OC(e,t,n){const r=e.slice();return r[14]=t[n],r}function qC(e){let t;return{c(){t=k("option"),t.textContent=`${e[14].substring(0,30)}`,t.__value=e[14],Ge(t,t.__value)},m(n,r){Q(n,t,r)},p:we,d(n){n&&K(t)}}}function GC(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,y,g,b,w,v,M,_,P,$,C,F=at(["single note","single beat","only snare"]),S=[];for(let A=0;A<3;A+=1)S[A]=qC(OC(e,F,A));return m=new lc({props:{audioData:e[2],sampleRate:e[3]}}),y=new Jr({props:{audioData:e[2],width:xo,height:Po}}),b=new Zr({props:{pattern:e[4],width:xo,height:Po}}),v=new Kr({props:{pattern:e[4],width:xo,height:Po}}),_=new Qr({props:{pattern:e[4],width:xo,height:Po}}),{c(){t=k("main"),n=k("h2"),n.textContent="Playground",r=I(),i=k("div"),a=k("label"),o=Me(`error mode:
      `),u=k("select");for(let A=0;A<3;A+=1)S[A].c();s=I(),l=k("label"),c=Me(`error severity (in seconds):
      `),f=k("input"),h=I(),d=k("div"),ge(m.$$.fragment),p=I(),ge(y.$$.fragment),g=I(),ge(b.$$.fragment),w=I(),ge(v.$$.fragment),M=I(),ge(_.$$.fragment),e[0]===void 0&&ri(()=>e[5].call(u)),R(a,"class","svelte-1sot113"),R(f,"type","number"),R(f,"min","-0.5"),R(f,"max","0.5"),R(f,"step","0.01"),R(l,"class","svelte-1sot113"),R(d,"class","stimuli svelte-1sot113")},m(A,B){Q(A,t,B),x(t,n),x(t,r),x(t,i),x(i,a),x(a,o),x(a,u);for(let L=0;L<3;L+=1)S[L]&&S[L].m(u,null);ti(u,e[0],!0),x(i,s),x(i,l),x(l,c),x(l,f),Ge(f,e[1]),x(t,h),x(t,d),de(m,d,null),x(d,p),de(y,d,null),x(d,g),de(b,d,null),x(d,w),de(v,d,null),x(d,M),de(_,d,null),P=!0,$||(C=[Le(u,"change",e[5]),Le(f,"input",e[6])],$=!0)},p(A,[B]){B&1&&ti(u,A[0]),B&2&&yr(f.value)!==A[1]&&Ge(f,A[1]);const L={};B&4&&(L.audioData=A[2]),B&8&&(L.sampleRate=A[3]),m.$set(L);const E={};B&4&&(E.audioData=A[2]),y.$set(E);const q={};B&16&&(q.pattern=A[4]),b.$set(q);const re={};B&16&&(re.pattern=A[4]),v.$set(re);const X={};B&16&&(X.pattern=A[4]),_.$set(X)},i(A){P||(Z(m.$$.fragment,A),Z(y.$$.fragment,A),Z(b.$$.fragment,A),Z(v.$$.fragment,A),Z(_.$$.fragment,A),P=!0)},o(A){te(m.$$.fragment,A),te(y.$$.fragment,A),te(b.$$.fragment,A),te(v.$$.fragment,A),te(_.$$.fragment,A),P=!1},d(A){A&&K(t),Wn(S,A),me(m),me(y),me(b),me(v),me(_),$=!1,Xt(C)}}}let xo=600,Po=100,UC=120;const P0=4;function zC(e,t,n){let r="single note",i=0,a=U$(UC),o=[{instrument:"bass",sample:"./bass.mp3",beats:[1,3]},{instrument:"snare",sample:"./snare.mp3",beats:[2,4]},{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]}];const u=P0*a;let s=null,l,c=[];const f=async()=>{o=await Promise.all(o.map(async g=>({...g,times:g.beats.map(b=>a*(b-1)),timesOriginal:g.beats.map(b=>a*(b-1)),audioBuffer:await ag(g.sample)})))},h=(g="single note",b=0)=>{if(b===0)return o;console.log(`Adding error ${g} ${b}`);const w=d([o]),v=w.filter(_=>_.instrument==="snare")[0],M=w.filter(_=>_.instrument==="hihat")[0];return g==="single note"?v.times[1]=v.timesOriginal[1]+b:g==="single beat"?(v.times[1]=v.timesOriginal[1]+b,M.times[6]=M.timesOriginal[6]+b):g==="only snare"&&(v.times[0]=v.timesOriginal[0]+b,v.times[1]=v.timesOriginal[1]+b),w},d=g=>{console.log(`concat ${g.length} patterns`);const b=g[0].map(w=>({...w,beats:[...w.beats],times:[...w.times],timesOriginal:[...w.timesOriginal]}));for(let w=1;w<g.length;w++){const v=g[w];for(const M of v){const _=b.filter(P=>P.instrument===M.instrument)[0];_.beats=[..._.beats,...M.beats.map(P=>P+w*P0)],_.times=[..._.times,...M.times.map(P=>P+w*u)],_.timesOriginal=[..._.timesOriginal,...M.timesOriginal.map(P=>P+w*u)]}}return b},m=async(g,b)=>{if(!o[0].audioBuffer)return;const w=h(g,b),v=[o,w],M=d(v);n(4,c=M.map(_=>_.times).flat().sort()),n(3,l=M[0].audioBuffer.sampleRate),n(2,s=r9(M,u*v.length+.1,l))};ni(async()=>{await f(),m()});function p(){r=wc(this),n(0,r)}function y(){i=yr(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&m(r,i)},[r,i,s,l,c,p,y]}class HC extends Ke{constructor(t){super(),Ze(this,t,zC,GC,Xe,{})}}function WC(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),R(n,"width",r=e[0]+"px"),R(n,"height",i=e[1]+"px")},m(a,o){Q(a,t,o),x(t,n),e[7](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&R(n,"width",r),o&2&&i!==(i=a[1]+"px")&&R(n,"height",i)},i:we,o:we,d(a){a&&K(t),e[7](null)}}}function VC(e,t,n){let{title:r=void 0}=t,{width:i=600}=t,{height:a=200}=t,{data:o}=t,{x:u="x"}=t,{y:s="y"}=t,l;dn(()=>{n(2,l.textContent="",l);const f=Qt({title:r,width:i,height:a,x:{domain:[0,70]},marks:[lS(o,{x:u,y:s,stroke:"#ccc"}),Sf([0])]});l.appendChild(f)});function c(f){lt[f?"unshift":"push"](()=>{l=f,n(2,l)})}return e.$$set=f=>{"title"in f&&n(3,r=f.title),"width"in f&&n(0,i=f.width),"height"in f&&n(1,a=f.height),"data"in f&&n(4,o=f.data),"x"in f&&n(5,u=f.x),"y"in f&&n(6,s=f.y)},[i,a,l,r,o,u,s,c]}class YC extends Ke{constructor(t){super(),Ze(this,t,VC,WC,Xe,{title:3,width:0,height:1,data:4,x:5,y:6})}}var Jy={exports:{}};(function(e,t){(function(n,r){r()})(Fi,function(){function n(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,c,f){var h=new XMLHttpRequest;h.open("GET",l),h.responseType="blob",h.onload=function(){s(h.response,c,f)},h.onerror=function(){console.error("could not download file")},h.send()}function i(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Fi=="object"&&Fi.global===Fi?Fi:void 0,u=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(l,c,f){var h=o.URL||o.webkitURL,d=document.createElement("a");c=c||l.name||"download",d.download=c,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?a(d):i(d.href)?r(l,c,f):a(d,d.target="_blank")):(d.href=h.createObjectURL(l),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,f){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,f),c);else if(i(l))r(l,c,f);else{var h=document.createElement("a");h.href=l,h.target="_blank",setTimeout(function(){a(h)})}}:function(l,c,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof l=="string")return r(l,c,f);var d=l.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||u)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var w=y.result;w=p?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=w:location=w,h=null},y.readAsDataURL(l)}else{var g=o.URL||o.webkitURL,b=g.createObjectURL(l);h?h.location=b:location.href=b,h=null,setTimeout(function(){g.revokeObjectURL(b)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s})})(Jy);var jC=Jy.exports;const S0=ig(jC);function XC(e){let t,n,r;return{c(){t=k("div"),R(t,"width",n=e[0]+"px"),R(t,"height",r=e[1]+"px")},m(i,a){Q(i,t,a),e[6](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&R(t,"width",n),a&2&&r!==(r=i[1]+"px")&&R(t,"height",r)},i:we,o:we,d(i){i&&K(t),e[6](null)}}}function ZC(e,t,n){let{data:r}=t,{domain:i}=t,{title:a=""}=t,{width:o=800}=t,{height:u=100}=t,s;dn(()=>{const c=Qt({width:o,height:u,marginLeft:70,marginRight:10,x:{label:a,domain:i},y:{axis:!1,type:"band"},marks:[Lf(r,{x:f=>f}),$f(r,{x:f=>f,dx:7,y:(f,h)=>h,text:(f,h)=>`P${h+1}`})]});n(2,s.textContent="",s),s.appendChild(c)});function l(c){lt[c?"unshift":"push"](()=>{s=c,n(2,s)})}return e.$$set=c=>{"data"in c&&n(3,r=c.data),"domain"in c&&n(4,i=c.domain),"title"in c&&n(5,a=c.title),"width"in c&&n(0,o=c.width),"height"in c&&n(1,u=c.height)},[o,u,s,r,i,a,l]}class KC extends Ke{constructor(t){super(),Ze(this,t,ZC,XC,Xe,{data:3,domain:4,title:5,width:0,height:1})}}function QC(e){let t,n,r;return{c(){t=k("div"),R(t,"width",n=e[0]+"px"),R(t,"height",r=e[1]+"px")},m(i,a){Q(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&R(t,"width",n),a&2&&r!==(r=i[1]+"px")&&R(t,"height",r)},i:we,o:we,d(i){i&&K(t),e[5](null)}}}function JC(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;dn(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.finals)})),c=Qt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[Bf(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Ff(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Pf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Nu(l),m=1.96*($u(l)/Math.sqrt(c)),p=f-m,y=f+m;return{mean:f,low:p,high:y}}function s(l){lt[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class ek extends Ke{constructor(t){super(),Ze(this,t,JC,QC,Xe,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function tk(e){let t,n,r;return{c(){t=k("div"),R(t,"width",n=e[0]+"px"),R(t,"height",r=e[1]+"px")},m(i,a){Q(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&R(t,"width",n),a&2&&r!==(r=i[1]+"px")&&R(t,"height",r)},i:we,o:we,d(i){i&&K(t),e[5](null)}}}function nk(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;dn(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.trialCounts)})),c=Qt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[Bf(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Ff(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Pf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Nu(l),m=1.96*($u(l)/Math.sqrt(c)),p=f-m,y=f+m;return{mean:f,low:p,high:y}}function s(l){lt[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class rk extends Ke{constructor(t){super(),Ze(this,t,nk,tk,Xe,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function A0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function ik(e,t,n,r,i,a){const o=new Float64Array(a),u=(a-1)/(i-r);for(let s=0;s<e.length;++s){const l=e[s],c=t(l,s,e),f=n(l,s,e);if(!(Number.isFinite(c)&&Number.isFinite(f)))continue;const h=(c-r)*u,d=Math.floor(h),m=d+1;0<=d&&m<a?(o[d]+=(m-h)*f,o[m]+=(h-d)*f):d===-1?o[m]+=(h-d)*f:m===a&&(o[d]+=(m-h)*f)}return o}function E0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);ak(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,u=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:u}}function ak(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),u=.6318/n,s=1.997/n,l=Float64Array.of(-a*Math.cos(u),a*Math.sin(u),-a*Math.cos(-u),a*Math.sin(-u),-o*Math.cos(s),o*Math.sin(s),-o*Math.cos(-s),o*Math.sin(-s)),c=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(f[m]=l[m]*f[m-2]-l[m+1]*f[m-1],f[m+1]=l[m]*f[m-1]+l[m+1]*f[m-2],d=m-2;d>0;d-=2)f[d]+=l[m]*f[d-2]-l[m+1]*f[d-1],f[d+1]+=l[m]*f[d-1]+l[m+1]*f[d-2];for(d=0;d<=m;d+=2)f[d]+=i[m]*h[d]-i[m+1]*h[d+1],f[d+1]+=i[m]*h[d+1]+i[m+1]*h[d];for(h[m+2]=l[m]*h[m]-l[m+1]*h[m+1],h[m+3]=l[m]*h[m+1]+l[m+1]*h[m],d=m;d>0;d-=2)h[d]+=l[m]*h[d-2]-l[m+1]*h[d-1],h[d+1]+=l[m]*h[d-1]+l[m+1]*h[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=f[d]/c,e[m+1]=h[d+2]}function ok(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),u=i,s=uk){const l=r*2,c=r*3,f=r*4,h=r*n;let d,m;for(s(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=f;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-l]+e.b_causal[3]*t[d-c]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(s(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=h-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+l]+e.b_anticausal[3]*t[d+c]+e.b_anticausal[4]*t[d+f]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)u[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)u[d]=Math.max(0,i[m]+a[n-m-1]);return u}function uk(e,t,n,r,i,a,o,u,s,l){const c=Math.abs(r)*n,f=r<0?c+r:0;let h,d,m;for(d=0;d<u;++d)for(l[d]=d<=a?i[d]:0,m=1;m<=u&&m<=d;++m)l[d]-=o[m]*l[d-m];for(m=0;m<u;++m)for(e[m]=0,d=1;d<=m;++d)h=f+r*d,h>=0&&h<c&&(e[m]+=l[m-d]*t[h]);const p=t[f];if(p>0)for(m=0;m<u;++m)e[m]+=l[m]*p}function sk(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const u=t(e[o],o,e);u!=null&&(i===void 0?u>=u&&(i=a=u):(u<i&&(i=u),u>a&&(a=u)))}return[i-n,a+n]}function lk(e,t){const n=e.map(t).filter(l=>l!=null&&l>=l);n.sort((l,c)=>l-c);const r=ck(n),i=$0(n,.25),a=$0(n,.75),o=n.length,u=(a-i)/1.34;return 1.06*(Math.min(r,u)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function ck(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const u=e[o];r=u-i,i+=r/++n,a+=r*(u-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function $0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function fk(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=A0(t.x,g=>g),o=A0(t.weight,()=>1/e.length);let u=t.bandwidth??n*lk(e,a);const[s,l]=t.extent??sk(e,a,r*u),c=ik(e,a,o,s,l,i),f=(l-s)/(i-1),h=c.some(g=>g<0);let d=E0(u/f,h),m;function*p(g="x",b="y"){const w=y.grid(),v=1/f;for(let M=0;M<i;++M)yield{[g]:s+M*f,[b]:w[M]*v}}const y={[Symbol.iterator]:p,points:p,grid:()=>m||(m=ok(d,c,i)),extent:()=>[s,l],bandwidth(g){return arguments.length?(g!==u&&(u=g,m=null,d=E0(u/f,h)),y):u}};return y}function hk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),R(n,"width",r=e[0]+"px"),R(n,"height",i=e[1]+"px")},m(a,o){Q(a,t,o),x(t,n),e[10](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&R(n,"width",r),o&2&&i!==(i=a[1]+"px")&&R(n,"height",i)},i:we,o:we,d(a){a&&K(t),e[10](null)}}}function dk(e,t,n){let r,{values:i}=t,{title:a=""}=t,{xLabel:o="some value"}=t,{xDomain:u=void 0}=t,{width:s=1e3}=t,{height:l=100}=t,{bandwidth:c=.25}=t,{bins:f=256}=t,{pad:h=4}=t,d;dn(()=>{const p=[...r.bandwidth(c)];n(2,d.textContent="",d);const y=Qt({width:s,height:l,title:a,style:{background:"none"},grid:!0,x:{label:o,domain:u},y:{label:"density",type:"linear"},marks:[jP(p,{x:"x",y:"y",fill:"#ccc"}),Lf(i,{x:g=>g,strokeWidth:.5}),Sf([0])]});d.appendChild(y)});function m(p){lt[p?"unshift":"push"](()=>{d=p,n(2,d)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,a=p.title),"xLabel"in p&&n(5,o=p.xLabel),"xDomain"in p&&n(6,u=p.xDomain),"width"in p&&n(0,s=p.width),"height"in p&&n(1,l=p.height),"bandwidth"in p&&n(7,c=p.bandwidth),"bins"in p&&n(8,f=p.bins),"pad"in p&&n(9,h=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=fk(i,{bandwidth:c,pad:h,bins:f}))},[s,l,d,i,a,o,u,c,f,h,m]}class mk extends Ke{constructor(t){super(),Ze(this,t,dk,hk,Xe,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function pk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),R(n,"width",r=e[0]+"px"),R(n,"height",i=e[1]+"px")},m(a,o){Q(a,t,o),x(t,n),e[13](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&R(n,"width",r),o&2&&i!==(i=a[1]+"px")&&R(n,"height",i)},i:we,o:we,d(a){a&&K(t),e[13](null)}}}function bk(e,t,n){let{title:r=""}=t,{data:i}=t,{x:a="x"}=t,{y:o="y"}=t,{tipTitle:u=null}=t,{xLabel:s=null}=t,{yLabel:l=null}=t,{xDomain:c=void 0}=t,{yDomain:f=void 0}=t,{grid:h=!1}=t,{width:d=300}=t,{height:m=300}=t,p;dn(()=>{console.log(i,a,o),n(2,p.textContent="",p);const g=Qt({width:d,height:m,title:r,grid:h,style:{background:"none"},x:{label:s||(typeof a=="string"?a:"x"),domain:c},y:{label:l||(typeof o=="string"?o:"y"),domain:f},marks:[Bf(i,{x:a,y:o}),W2(i,t2({x:a,y:o,title:u})),Ff({length:1},{x1:c[0],x2:c[1],y1:f[0],y2:f[1],stroke:"#ccc"})]});p.appendChild(g)});function y(g){lt[g?"unshift":"push"](()=>{p=g,n(2,p)})}return e.$$set=g=>{"title"in g&&n(3,r=g.title),"data"in g&&n(4,i=g.data),"x"in g&&n(5,a=g.x),"y"in g&&n(6,o=g.y),"tipTitle"in g&&n(7,u=g.tipTitle),"xLabel"in g&&n(8,s=g.xLabel),"yLabel"in g&&n(9,l=g.yLabel),"xDomain"in g&&n(10,c=g.xDomain),"yDomain"in g&&n(11,f=g.yDomain),"grid"in g&&n(12,h=g.grid),"width"in g&&n(0,d=g.width),"height"in g&&n(1,m=g.height)},[d,m,p,r,i,a,o,u,s,l,c,f,h,y]}class C0 extends Ke{constructor(t){super(),Ze(this,t,bk,pk,Xe,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function k0(e,t,n){const r=e.slice();return r[12]=t[n],r}function T0(e,t,n){const r=e.slice();return r[15]=t[n],r}function N0(e,t,n){const r=e.slice();return r[18]=t[n],r}function D0(e,t,n){const r=e.slice();return r[21]=t[n],r}function F0(e,t,n){const r=e.slice();return r[24]=t[n],r}function B0(e,t,n){const r=e.slice();return r[27]=t[n][0],r[28]=t[n][1],r}function L0(e){let t,n=e[27]+"",r,i,a=e[28].length+"",o,u;return{c(){t=k("p"),r=Me(n),i=Me(": "),o=Me(a),u=Me(" times")},m(s,l){Q(s,t,l),x(t,r),x(t,i),x(t,o),x(t,u)},p(s,l){l&1&&n!==(n=s[27]+"")&&Mt(r,n),l&1&&a!==(a=s[28].length+"")&&Mt(o,a)},d(s){s&&K(t)}}}function I0(e){let t,n;return t=new mk({props:{title:`Density of final values for ${e[24][0]}`,values:e[24][1].map(W0),xLabel:"final values",xDomain:[-1,20],bandwidth:vk}}),{c(){ge(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=`Density of final values for ${r[24][0]}`),i&2&&(a.values=r[24][1].map(W0)),t.$set(a)},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){te(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function R0(e){let t,n=e[21].encoding+"",r,i,a,o;return a=new KC({props:{data:e[21].finals,title:e[21].encoding,domain:[0,e[2]]}}),{c(){t=k("b"),r=Me(n),i=I(),ge(a.$$.fragment)},m(u,s){Q(u,t,s),x(t,r),Q(u,i,s),de(a,u,s),o=!0},p(u,s){(!o||s&8)&&n!==(n=u[21].encoding+"")&&Mt(r,n);const l={};s&8&&(l.data=u[21].finals),s&8&&(l.title=u[21].encoding),s&4&&(l.domain=[0,u[2]]),a.$set(l)},i(u){o||(Z(a.$$.fragment,u),o=!0)},o(u){te(a.$$.fragment,u),o=!1},d(u){u&&(K(t),K(i)),me(a,u)}}}function O0(e){let t,n=e[18]+"",r;return{c(){t=k("p"),r=Me(n)},m(i,a){Q(i,t,a),x(t,r)},p(i,a){a&1&&n!==(n=i[18]+"")&&Mt(r,n)},d(i){i&&K(t)}}}function q0(e){let t,n,r,i=e[15].demographics.internalPID+"",a,o,u=e[15].demographics.partID+"",s,l,c,f=at(e[15].demographics.partFeedback.split(`
`)),h=[];for(let d=0;d<f.length;d+=1)h[d]=O0(N0(e,f,d));return{c(){t=k("div"),n=k("b"),r=Me("P"),a=Me(i),o=I(),s=Me(u),l=Me(`:
        `);for(let d=0;d<h.length;d+=1)h[d].c();c=I(),xt(t,"text-align","left")},m(d,m){Q(d,t,m),x(t,n),x(n,r),x(n,a),x(t,o),x(t,s),x(t,l);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(t,null);x(t,c)},p(d,m){if(m&1&&i!==(i=d[15].demographics.internalPID+"")&&Mt(a,i),m&1&&u!==(u=d[15].demographics.partID+"")&&Mt(s,u),m&1){f=at(d[15].demographics.partFeedback.split(`
`));let p;for(p=0;p<f.length;p+=1){const y=N0(d,f,p);h[p]?h[p].p(y,m):(h[p]=O0(y),h[p].c(),h[p].m(t,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=f.length}},d(d){d&&K(t),Wn(h,d)}}}function G0(e){let t,n;return t=new YC({props:{title:e[12].encoding,width:yk,height:150,data:e[12].data,x:_k,y:e[7]}}),{c(){ge(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=r[12].encoding),i&2&&(a.data=r[12].data),t.$set(a)},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){te(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function gk(e){let t,n,r,i,a,o,u,s,l,c,f,h=e[0].length+"",d,m,p=e[1].length+"",y,g,b=e[4].length+"",w,v,M,_,P,$,C,F,S,A,B,L,E,q,re,X,J,G,H,U,V,ne,ae,ie,j,Y,D,T,z,N,le,ee,ue,_e,Te,Re=at(hr(e[0],U0).sort(z0)),Ae=[];for(let O=0;O<Re.length;O+=1)Ae[O]=L0(B0(e,Re,O));let $e=at(hr(e[1],H0)),ce=[];for(let O=0;O<$e.length;O+=1)ce[O]=I0(F0(e,$e,O));const qe=O=>te(ce[O],1,1,()=>{ce[O]=null});A=new C0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:e[0]}}),L=new C0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:e[0]}}),J=new ek({props:{stimuli:e[3]}}),ne=new rk({props:{stimuli:e[3]}});let $t=at(e[3]),Ce=[];for(let O=0;O<$t.length;O+=1)Ce[O]=R0(D0(e,$t,O));const ys=O=>te(Ce[O],1,1,()=>{Ce[O]=null});let On=at(e[0].filter(V0)),Je=[];for(let O=0;O<On.length;O+=1)Je[O]=q0(T0(e,On,O));let ft=at(e[1]),ke=[];for(let O=0;O<ft.length;O+=1)ke[O]=G0(k0(e,ft,O));const ur=O=>te(ke[O],1,1,()=>{ke[O]=null});return{c(){t=k("main"),n=k("h2"),n.textContent="Analysis",r=I(),i=k("div"),a=k("label"),o=Me(`Results JSONs and Prolific demographics CSV
      `),u=k("input"),s=I(),l=k("button"),l.textContent="export JSON",c=I(),f=k("div"),d=Me(h),m=Me(` participants completed -
    `),y=Me(p),g=Me(` tests -
    `),w=Me(b),v=Me(" filtered tests"),M=I(),_=k("div"),P=k("h3"),P.textContent="Encoding order",$=I();for(let O=0;O<Ae.length;O+=1)Ae[O].c();C=I(),F=k("div");for(let O=0;O<ce.length;O+=1)ce[O].c();S=I(),ge(A.$$.fragment),B=I(),ge(L.$$.fragment),E=I(),q=k("div"),re=k("h3"),re.textContent="Mean and CI of Final Values",X=I(),ge(J.$$.fragment),G=I(),H=k("div"),U=k("h3"),U.textContent="Mean and CI of Trial Counts",V=I(),ge(ne.$$.fragment),ae=I(),ie=k("div"),j=k("h3"),j.textContent="Final Values for Each Stimulus and All Participants",Y=I();for(let O=0;O<Ce.length;O+=1)Ce[O].c();D=I(),T=k("div"),z=k("h3"),z.textContent="Feedback",N=I();for(let O=0;O<Je.length;O+=1)Je[O].c();le=I(),ee=k("div");for(let O=0;O<ke.length;O+=1)ke[O].c();R(u,"type","file"),R(u,"accept",".json,.csv"),u.multiple=!0},m(O,oe){Q(O,t,oe),x(t,n),x(t,r),x(t,i),x(i,a),x(a,o),x(a,u),x(i,s),x(i,l),x(t,c),x(t,f),x(f,d),x(f,m),x(f,y),x(f,g),x(f,w),x(f,v),x(t,M),x(t,_),x(_,P),x(_,$);for(let xe=0;xe<Ae.length;xe+=1)Ae[xe]&&Ae[xe].m(_,null);x(t,C),x(t,F);for(let xe=0;xe<ce.length;xe+=1)ce[xe]&&ce[xe].m(F,null);x(t,S),de(A,t,null),x(t,B),de(L,t,null),x(t,E),x(t,q),x(q,re),x(q,X),de(J,q,null),x(t,G),x(t,H),x(H,U),x(H,V),de(ne,H,null),x(t,ae),x(t,ie),x(ie,j),x(ie,Y);for(let xe=0;xe<Ce.length;xe+=1)Ce[xe]&&Ce[xe].m(ie,null);x(t,D),x(t,T),x(T,z),x(T,N);for(let xe=0;xe<Je.length;xe+=1)Je[xe]&&Je[xe].m(T,null);x(t,le),x(t,ee);for(let xe=0;xe<ke.length;xe+=1)ke[xe]&&ke[xe].m(ee,null);ue=!0,_e||(Te=[Le(u,"input",e[5]),Le(l,"click",e[6])],_e=!0)},p(O,[oe]){if((!ue||oe&1)&&h!==(h=O[0].length+"")&&Mt(d,h),(!ue||oe&2)&&p!==(p=O[1].length+"")&&Mt(y,p),(!ue||oe&16)&&b!==(b=O[4].length+"")&&Mt(w,b),oe&1){Re=at(hr(O[0],U0).sort(z0));let W;for(W=0;W<Re.length;W+=1){const ht=B0(O,Re,W);Ae[W]?Ae[W].p(ht,oe):(Ae[W]=L0(ht),Ae[W].c(),Ae[W].m(_,null))}for(;W<Ae.length;W+=1)Ae[W].d(1);Ae.length=Re.length}if(oe&2){$e=at(hr(O[1],H0));let W;for(W=0;W<$e.length;W+=1){const ht=F0(O,$e,W);ce[W]?(ce[W].p(ht,oe),Z(ce[W],1)):(ce[W]=I0(ht),ce[W].c(),Z(ce[W],1),ce[W].m(F,null))}for($n(),W=$e.length;W<ce.length;W+=1)qe(W);Cn()}const xe={};oe&1&&(xe.data=O[0]),A.$set(xe);const wt={};oe&1&&(wt.data=O[0]),L.$set(wt);const en={};oe&8&&(en.stimuli=O[3]),J.$set(en);const Ja={};if(oe&8&&(Ja.stimuli=O[3]),ne.$set(Ja),oe&12){$t=at(O[3]);let W;for(W=0;W<$t.length;W+=1){const ht=D0(O,$t,W);Ce[W]?(Ce[W].p(ht,oe),Z(Ce[W],1)):(Ce[W]=R0(ht),Ce[W].c(),Z(Ce[W],1),Ce[W].m(ie,null))}for($n(),W=$t.length;W<Ce.length;W+=1)ys(W);Cn()}if(oe&1){On=at(O[0].filter(V0));let W;for(W=0;W<On.length;W+=1){const ht=T0(O,On,W);Je[W]?Je[W].p(ht,oe):(Je[W]=q0(ht),Je[W].c(),Je[W].m(T,null))}for(;W<Je.length;W+=1)Je[W].d(1);Je.length=On.length}if(oe&2){ft=at(O[1]);let W;for(W=0;W<ft.length;W+=1){const ht=k0(O,ft,W);ke[W]?(ke[W].p(ht,oe),Z(ke[W],1)):(ke[W]=G0(ht),ke[W].c(),Z(ke[W],1),ke[W].m(ee,null))}for($n(),W=ft.length;W<ke.length;W+=1)ur(W);Cn()}},i(O){if(!ue){for(let oe=0;oe<$e.length;oe+=1)Z(ce[oe]);Z(A.$$.fragment,O),Z(L.$$.fragment,O),Z(J.$$.fragment,O),Z(ne.$$.fragment,O);for(let oe=0;oe<$t.length;oe+=1)Z(Ce[oe]);for(let oe=0;oe<ft.length;oe+=1)Z(ke[oe]);ue=!0}},o(O){ce=ce.filter(Boolean);for(let oe=0;oe<ce.length;oe+=1)te(ce[oe]);te(A.$$.fragment,O),te(L.$$.fragment,O),te(J.$$.fragment,O),te(ne.$$.fragment,O),Ce=Ce.filter(Boolean);for(let oe=0;oe<Ce.length;oe+=1)te(Ce[oe]);ke=ke.filter(Boolean);for(let oe=0;oe<ke.length;oe+=1)te(ke[oe]);ue=!1},d(O){O&&K(t),Wn(Ae,O),Wn(ce,O),me(A),me(L),me(J),me(ne),Wn(Ce,O),Wn(Je,O),Wn(ke,O),_e=!1,Xt(Te)}}}const yk=800;let vk=1,wk=20;const U0=e=>e.encodingOrder,z0=(e,t)=>e[1].lenght-t[1].length,H0=e=>e.testType,W0=e=>e.final,V0=e=>e.demographics.partFeedback.trim().length>0,_k=(e,t)=>t;function Mk(e,t,n){let r,i,a,o,u=[],s=null;const l=async p=>{const y=[];for(const b of p.target.files)if(b.name.endsWith(".csv")){const w=await b.text();s=S5(w),console.log("p demo",s)}else{const w=await b.text();y.push(JSON.parse(w))}const g=hr(y,b=>b.demographics.partID);console.log(`${g.length} participants`,g),n(0,u=y.filter(b=>b.studyStep==="feedback").map((b,w)=>({...b,demographics:{...b.demographics,internalPID:w+1},prolificDemogr:s.filter(v=>v["Participant id"]===b.demographics.partID)[0],finalAudio:b.tests.filter(v=>v.encoding.startsWith("audio"))[0].final,finalColor:b.tests.filter(v=>v.encoding.startsWith("color"))[0].final,finalWaveform:b.tests.filter(v=>v.encoding.startsWith("waveform"))[0].final,encodingOrder:b.tests.map(v=>v.encoding).join(", ")}))),console.log("participants",u)},c=p=>{if(p.lenght===0)return[];const y=(b,w=5)=>{const v=Math.floor(b/w)*w;return`${v}-${v+w-1}`},g=[];for(const b of p)for(const[w,v]of b.tests.entries()){let M=v.encoding;(v.encoding==="audio"||v.encoding==="waveform")&&(M=`${v.encoding} + ${v.audioFile.startsWith("./Fluid")?"piano":"drums"}`),g.push({...b.demographics,partAge:b.demographics.partAge?b.demographics.partAge:y(b.prolificDemogr.Age),partSex:b.demographics.partGender?b.demographics.partGender:b.prolificDemogr.Sex,countryBirth:b.prolificDemogr["Country of birth"],countryResidence:b.prolificDemogr["Country of residence"],prolificApprovals:b.prolificDemogr["Total approvals"],...v,date:b.date,testType:M,testOrder:w})}return console.log("tests",g),g},f=(p,y)=>p.filter(g=>g.final<y),h=p=>p.length===0?[]:hr(p,g=>g.testType).map(([g,b])=>{const w=b.map(v=>v.final);return{encoding:g,testType:g,finals:w,finalMean:Nu(w),finalVar:Mc(w),trialCounts:b.map(v=>v.trialCount)}}),d=()=>{const p=JSON.stringify(u,void 0,2),y=new Blob([p],{type:"text/plain;charset=utf-8"});S0(y,"participants.json");const g=JSON.stringify(r,void 0,2),b=new Blob([g],{type:"text/plain;charset=utf-8"});S0(b,"tests.json")},m=p=>Math.abs(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=c(u)),e.$$.dirty&2&&n(4,i=f(r,wk)),e.$$.dirty&2&&n(3,a=h(r)),e.$$.dirty&2&&n(2,o=It(r.map(p=>Math.abs(p.final)))),e.$$.dirty&2&&console.log("tests by enc",hr(r,p=>p.testType))},[u,r,o,a,i,l,d,m]}class xk extends Ke{constructor(t){super(),Ze(this,t,Mk,gk,Xe,{})}}function Y0(e,t,n){const r=e.slice();return r[8]=t[n],r}function j0(e){let t,n=e[8].substring(0,30)+"",r;return{c(){t=k("option"),r=Me(n),t.__value=e[8],Ge(t,t.__value)},m(i,a){Q(i,t,a),x(t,r)},p:we,d(i){i&&K(t)}}}function Pk(e){let t,n,r,i,a,o,u,s,l=(e[1]*1e3).toFixed(1)+"",c,f,h,d,m,p,y,g,b,w,v,M,_,P,$,C,F,S,A,B,L,E,q,re,X,J,G,H,U,V,ne,ae,ie,j,Y=at(e[5]),D=[];for(let T=0;T<Y.length;T+=1)D[T]=j0(Y0(e,Y,T));return _=new lc({props:{pattern:e[3],audioFile:e[2]}}),$=new lc({props:{pattern:e[4],audioFile:e[2]}}),F=new Jr({props:{pattern:e[3],audioFile:e[2],width:Gn,height:Un}}),A=new Jr({props:{pattern:e[4],audioFile:e[2],width:Gn,height:Un}}),L=new Zr({props:{pattern:e[3],width:Gn,height:Un}}),q=new Zr({props:{pattern:e[4],width:Gn,height:Un}}),X=new Kr({props:{pattern:e[3],width:Gn,height:Un}}),G=new Kr({props:{pattern:e[4],width:Gn,height:Un}}),U=new Qr({props:{pattern:e[3],width:Gn,height:Un}}),ne=new Qr({props:{pattern:e[4],width:Gn,height:Un}}),{c(){t=k("main"),n=k("h2"),n.textContent="Examples",r=I(),i=k("div"),a=k("label"),o=Me(`deviation
      `),u=k("input"),s=Me(`
      (`),c=Me(l),f=Me(" milliseconds)"),h=I(),d=k("label"),m=Me(`instrument sample:
      `),p=k("select");for(let T=0;T<D.length;T+=1)D[T].c();y=I(),g=k("div"),b=k("h2"),b.textContent="early fourth note",w=I(),v=k("h2"),v.textContent="late fourth note",M=I(),ge(_.$$.fragment),P=I(),ge($.$$.fragment),C=I(),ge(F.$$.fragment),S=I(),ge(A.$$.fragment),B=I(),ge(L.$$.fragment),E=I(),ge(q.$$.fragment),re=I(),ge(X.$$.fragment),J=I(),ge(G.$$.fragment),H=I(),ge(U.$$.fragment),V=I(),ge(ne.$$.fragment),R(u,"type","range"),R(u,"min","0"),R(u,"max","20"),R(u,"step","1"),R(a,"class","svelte-1kjj0oz"),e[2]===void 0&&ri(()=>e[7].call(p)),R(d,"class","svelte-1kjj0oz"),R(g,"class","stimuli svelte-1kjj0oz")},m(T,z){Q(T,t,z),x(t,n),x(t,r),x(t,i),x(i,a),x(a,o),x(a,u),Ge(u,e[0]),x(a,s),x(a,c),x(a,f),x(i,h),x(i,d),x(d,m),x(d,p);for(let N=0;N<D.length;N+=1)D[N]&&D[N].m(p,null);ti(p,e[2],!0),x(t,y),x(t,g),x(g,b),x(g,w),x(g,v),x(g,M),de(_,g,null),x(g,P),de($,g,null),x(g,C),de(F,g,null),x(g,S),de(A,g,null),x(g,B),de(L,g,null),x(g,E),de(q,g,null),x(g,re),de(X,g,null),x(g,J),de(G,g,null),x(g,H),de(U,g,null),x(g,V),de(ne,g,null),ae=!0,ie||(j=[Le(u,"change",e[6]),Le(u,"input",e[6]),Le(p,"change",e[7])],ie=!0)},p(T,[z]){if(z&1&&Ge(u,T[0]),(!ae||z&2)&&l!==(l=(T[1]*1e3).toFixed(1)+"")&&Mt(c,l),z&32){Y=at(T[5]);let qe;for(qe=0;qe<Y.length;qe+=1){const $t=Y0(T,Y,qe);D[qe]?D[qe].p($t,z):(D[qe]=j0($t),D[qe].c(),D[qe].m(p,null))}for(;qe<D.length;qe+=1)D[qe].d(1);D.length=Y.length}z&36&&ti(p,T[2]);const N={};z&8&&(N.pattern=T[3]),z&4&&(N.audioFile=T[2]),_.$set(N);const le={};z&16&&(le.pattern=T[4]),z&4&&(le.audioFile=T[2]),$.$set(le);const ee={};z&8&&(ee.pattern=T[3]),z&4&&(ee.audioFile=T[2]),F.$set(ee);const ue={};z&16&&(ue.pattern=T[4]),z&4&&(ue.audioFile=T[2]),A.$set(ue);const _e={};z&8&&(_e.pattern=T[3]),L.$set(_e);const Te={};z&16&&(Te.pattern=T[4]),q.$set(Te);const Re={};z&8&&(Re.pattern=T[3]),X.$set(Re);const Ae={};z&16&&(Ae.pattern=T[4]),G.$set(Ae);const $e={};z&8&&($e.pattern=T[3]),U.$set($e);const ce={};z&16&&(ce.pattern=T[4]),ne.$set(ce)},i(T){ae||(Z(_.$$.fragment,T),Z($.$$.fragment,T),Z(F.$$.fragment,T),Z(A.$$.fragment,T),Z(L.$$.fragment,T),Z(q.$$.fragment,T),Z(X.$$.fragment,T),Z(G.$$.fragment,T),Z(U.$$.fragment,T),Z(ne.$$.fragment,T),ae=!0)},o(T){te(_.$$.fragment,T),te($.$$.fragment,T),te(F.$$.fragment,T),te(A.$$.fragment,T),te(L.$$.fragment,T),te(q.$$.fragment,T),te(X.$$.fragment,T),te(G.$$.fragment,T),te(U.$$.fragment,T),te(ne.$$.fragment,T),ae=!1},d(T){T&&K(t),Wn(D,T),me(_),me($),me(F),me(A),me(L),me(q),me(X),me(G),me(U),me(ne),ie=!1,Xt(j)}}}let Gn=600,Un=100,cl=.5,X0=6,Z0=3,K0=!0,Q0=0;function Sk(e,t,n){let r;const i=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=i[0],o=20,u=[],s=[];function l(){o=yr(this.value),n(0,o)}function c(){a=wc(this),n(2,a),n(5,i)}return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=o/100*cl),e.$$.dirty&2&&n(3,u=Kl(X0,cl,Z0,-r,K0,Q0)),e.$$.dirty&2&&n(4,s=Kl(X0,cl,Z0,r,K0,Q0))},[o,r,a,u,s,i,l,c]}class Ak extends Ke{constructor(t){super(),Ze(this,t,Sk,Pk,Xe,{})}}function Ek(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=I(),i=k("button"),i.textContent="play audio (p)",n.controls=!1},m(u,s){Q(u,t,s),x(t,n),e[5](n),x(t,r),x(t,i),a||(o=Le(i,"click",e[1]),a=!0)},p:we,i:we,o:we,d(u){u&&K(t),e[5](null),a=!1,o()}}}function $k(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{currentTrialNumber:a=-1}=t,o=null,u;const s=()=>{i&&u&&(o=og(i,r),Zc(o,i.sampleRate,u))};ni(s);const l=()=>{u&&(n(0,u.currentTime=0,u),u.play())};ni(()=>{document.querySelector("html").addEventListener("keyup",f=>{f.key==="p"&&l()})});function c(f){lt[f?"unshift":"push"](()=>{u=f,n(0,u)})}return e.$$set=f=>{"pattern"in f&&n(2,r=f.pattern),"cachedAudio"in f&&n(3,i=f.cachedAudio),"currentTrialNumber"in f&&n(4,a=f.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&(s(),window.setTimeout(l,200))},[u,l,r,i,a,c]}class Ck extends Ke{constructor(t){super(),Ze(this,t,$k,Ek,Xe,{pattern:2,cachedAudio:3,currentTrialNumber:4})}}function De(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}De.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};De.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};De.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};De.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=e3(0,e.length-1);return this.activate(e[t]),this};De.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=e3(0,e.length-1);this.activate(e[t])};De.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};De.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};De.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};De.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};De.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};De.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};De.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};De.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};De.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};De.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};De.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};De.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};De.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};De.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};De.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};De.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const Wf=function(){};Wf.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};Wf.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};De.prototype.checkErr=new Wf;function e3(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Io(e,t){return new URLSearchParams(e.location.search).get(t)}function kk(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=I(),i=k("button"),i.textContent="play audio",n.controls=!1},m(u,s){Q(u,t,s),x(t,n),e[4](n),x(t,r),x(t,i),a||(o=Le(i,"click",e[1]),a=!0)},p:we,i:we,o:we,d(u){u&&K(t),e[4](null),a=!1,o()}}}function Tk(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,a=null,o;const u=(c,f)=>{f&&o&&(a=og(f,c),Zc(a,f.sampleRate,o))};ni(()=>u(r,i));const s=async()=>{o&&(n(0,o.currentTime=0,o),o.play())};function l(c){lt[c?"unshift":"push"](()=>{o=c,n(0,o)})}return e.$$set=c=>{"pattern"in c&&n(2,r=c.pattern),"cachedAudio"in c&&n(3,i=c.cachedAudio)},[o,s,r,i,l]}class Nk extends Ke{constructor(t){super(),Ze(this,t,Tk,kk,Xe,{pattern:2,cachedAudio:3})}}function J0(e){let t;return{c(){t=k("div"),t.innerHTML=`<p>In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p>For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p>By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p>If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){Q(n,t,r)},d(n){n&&K(t)}}}function e1(e){let t,n,r,i,a,o,u,s,l;return i=new Nk({props:{pattern:[.1,.6,1.1],cachedAudio:e[3]}}),{c(){t=k("div"),n=k("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=I(),ge(i.$$.fragment),a=I(),o=k("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",u=I(),s=k("a"),s.innerHTML="<button>I cannot hear the audio and will not participate in this study</button>",R(s,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(c,f){Q(c,t,f),x(t,n),x(t,r),de(i,t,null),x(t,a),x(t,o),x(t,u),x(t,s),l=!0},p(c,f){const h={};f[0]&8&&(h.cachedAudio=c[3]),i.$set(h)},i(c){l||(Z(i.$$.fragment,c),l=!0)},o(c){te(i.$$.fragment,c),l=!1},d(c){c&&K(t),me(i)}}}function t1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,y,g,b;return{c(){t=k("div"),n=k("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=I(),i=k("p"),a=k("button"),a.textContent="+",o=I(),u=k("button"),u.textContent="-",s=I(),l=Yf("svg"),c=Yf("rect"),p=I(),y=k("p"),y.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,R(c,"width",f=e[0]*.52),R(c,"height",h=e[17]*2),R(c,"fill","#ccc"),R(c,"rx","8"),R(l,"width",d=e[0]*.52+"px"),R(l,"height",m=e[17]*2+"px")},m(w,v){Q(w,t,v),x(t,n),x(t,r),x(t,i),x(i,a),x(i,o),x(i,u),x(t,s),x(t,l),x(l,c),x(t,p),x(t,y),g||(b=[Le(a,"click",e[23]),Le(u,"click",e[24])],g=!0)},p(w,v){v[0]&1&&f!==(f=w[0]*.52)&&R(c,"width",f),v[0]&131072&&h!==(h=w[17]*2)&&R(c,"height",h),v[0]&1&&d!==(d=w[0]*.52+"px")&&R(l,"width",d),v[0]&131072&&m!==(m=w[17]*2+"px")&&R(l,"height",m)},d(w){w&&K(t),g=!1,Xt(b)}}}function n1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,y,g,b,w,v,M,_,P,$,C,F,S;return{c(){t=k("div"),n=k("label"),r=k("span"),r.textContent="Highest finished education (select the best fitting one):",i=I(),a=k("select"),o=k("option"),o.textContent="none",u=k("option"),u.textContent="high school",s=k("option"),s.textContent="bachelor",l=k("option"),l.textContent="master",c=k("option"),c.textContent="phd",f=I(),h=k("label"),d=k("span"),d.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,m=I(),p=k("input"),y=I(),g=k("label"),b=k("span"),b.textContent="For how many years do you roughly play it/them?",w=I(),v=k("input"),M=I(),_=k("label"),P=k("span"),P.textContent=`How many years of experience do you have with information
          visualization?`,$=I(),C=k("input"),o.__value="none",Ge(o,o.__value),u.__value="highs",Ge(u,u.__value),s.__value="bachelor",Ge(s,s.__value),l.__value="master",Ge(l,l.__value),c.__value="phd",Ge(c,c.__value),e[7]===void 0&&ri(()=>e[25].call(a)),R(n,"class","svelte-1u8tzxr"),R(p,"type","text"),R(p,"placeholder","free text"),R(h,"class","svelte-1u8tzxr"),R(v,"type","number"),R(v,"min","0"),R(v,"step","1"),R(g,"class","svelte-1u8tzxr"),R(C,"type","number"),R(C,"min","0"),R(C,"step","1"),R(_,"class","svelte-1u8tzxr"),R(t,"class","demo-form svelte-1u8tzxr")},m(A,B){Q(A,t,B),x(t,n),x(n,r),x(n,i),x(n,a),x(a,o),x(a,u),x(a,s),x(a,l),x(a,c),ti(a,e[7],!0),x(t,f),x(t,h),x(h,d),x(h,m),x(h,p),Ge(p,e[8]),x(t,y),x(t,g),x(g,b),x(g,w),x(g,v),Ge(v,e[9]),x(t,M),x(t,_),x(_,P),x(_,$),x(_,C),Ge(C,e[10]),F||(S=[Le(a,"change",e[25]),Le(p,"input",e[26]),Le(v,"input",e[27]),Le(C,"input",e[28])],F=!0)},p(A,B){B[0]&128&&ti(a,A[7]),B[0]&256&&p.value!==A[8]&&Ge(p,A[8]),B[0]&512&&yr(v.value)!==A[9]&&Ge(v,A[9]),B[0]&1024&&yr(C.value)!==A[10]&&Ge(C,A[10])},d(A){A&&K(t),F=!1,Xt(S)}}}function r1(e){let t,n,r,i,a=e[13]&&i1(e);return{c(){t=k("p"),t.innerHTML=`You will be presented with a sequence of six piano notes which should have
      equal distances in time. The <b>fourth note</b> might be played
      <b>too early or too late</b>, also affecting the ones after. This
      deviation will get smaller, but you always have to answer &quot;early&quot; or
      &quot;late&quot;.`,n=I(),a&&a.c(),r=h1()},m(o,u){Q(o,t,u),Q(o,n,u),a&&a.m(o,u),Q(o,r,u),i=!0},p(o,u){o[13]?a?(a.p(o,u),u[0]&8192&&Z(a,1)):(a=i1(o),a.c(),Z(a,1),a.m(r.parentNode,r)):a&&($n(),te(a,1,1,()=>{a=null}),Cn())},i(o){i||(Z(a),i=!0)},o(o){te(a),i=!1},d(o){o&&(K(t),K(n),K(r)),a&&a.d(o)}}}function i1(e){let t,n,r=e[6]+1+"",i,a,o=e[4].length+"",u,s,l=e[12]+1+"",c,f,h,d,m,p,y;const g=[Fk,Dk],b=[];function w(v,M){return v[16]==="audio"?0:v[15]===!1?1:-1}return~(h=w(e))&&(d=b[h]=g[h](e)),{c(){t=k("p"),n=Me("Test number "),i=Me(r),a=Me(" / "),u=Me(o),s=Me(", trial number "),c=Me(l),f=I(),d&&d.c(),m=I(),p=k("p"),p.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`},m(v,M){Q(v,t,M),x(t,n),x(t,i),x(t,a),x(t,u),x(t,s),x(t,c),Q(v,f,M),~h&&b[h].m(v,M),Q(v,m,M),Q(v,p,M),y=!0},p(v,M){(!y||M[0]&64)&&r!==(r=v[6]+1+"")&&Mt(i,r),(!y||M[0]&16)&&o!==(o=v[4].length+"")&&Mt(u,o),(!y||M[0]&4096)&&l!==(l=v[12]+1+"")&&Mt(c,l);let _=h;h=w(v),h===_?~h&&b[h].p(v,M):(d&&($n(),te(b[_],1,1,()=>{b[_]=null}),Cn()),~h?(d=b[h],d?d.p(v,M):(d=b[h]=g[h](v),d.c()),Z(d,1),d.m(m.parentNode,m)):d=null)},i(v){y||(Z(d),y=!0)},o(v){te(d),y=!1},d(v){v&&(K(t),K(f),K(m),K(p)),~h&&b[h].d(v)}}}function Dk(e){let t,n,r,i;const a=[Rk,Ik,Lk,Bk],o=[];function u(s,l){return s[16]==="waveform"?0:s[16]==="tick"?1:s[16]==="bar"?2:s[16]==="color"?3:-1}return~(t=u(e))&&(n=o[t]=a[t](e)),{c(){n&&n.c(),r=h1()},m(s,l){~t&&o[t].m(s,l),Q(s,r,l),i=!0},p(s,l){let c=t;t=u(s),t===c?~t&&o[t].p(s,l):(n&&($n(),te(o[c],1,1,()=>{o[c]=null}),Cn()),~t?(n=o[t],n?n.p(s,l):(n=o[t]=a[t](s),n.c()),Z(n,1),n.m(r.parentNode,r)):n=null)},i(s){i||(Z(n),i=!0)},o(s){te(n),i=!1},d(s){s&&K(r),~t&&o[t].d(s)}}}function Fk(e){let t,n,r,i;return r=new Ck({props:{pattern:[...e[1].slice(0,e[1].length-1),e[1].at(-1)+Math.random()*1e-4],cachedAudio:e[3],currentTrialNumber:e[12]}}),{c(){t=k("div"),t.innerHTML=`Listen to the audio, the forth note comes either too soon or too late.
          Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=I(),ge(r.$$.fragment)},m(a,o){Q(a,t,o),Q(a,n,o),de(r,a,o),i=!0},p(a,o){const u={};o[0]&2&&(u.pattern=[...a[1].slice(0,a[1].length-1),a[1].at(-1)+Math.random()*1e-4]),o[0]&8&&(u.cachedAudio=a[3]),o[0]&4096&&(u.currentTrialNumber=a[12]),r.$set(u)},i(a){i||(Z(r.$$.fragment,a),i=!0)},o(a){te(r.$$.fragment,a),i=!1},d(a){a&&(K(t),K(n)),me(r,a)}}}function Bk(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new Qr({props:{pattern:e[18],width:e[0]/2,height:e[17]/2}}),o=new Qr({props:{pattern:e[19],width:e[0]/2,height:e[17]/2}}),h=new Qr({props:{pattern:e[1],width:e[0],height:e[17]}}),{c(){t=k("div"),t.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Look at the third bar, it is either brigher
            (early) or darker (late) than the others.`,n=I(),r=k("div"),ge(i.$$.fragment),a=I(),ge(o.$$.fragment),u=I(),s=k("div"),s.textContent="Example for early",l=I(),c=k("div"),c.textContent="Example for late",f=I(),ge(h.$$.fragment),R(s,"class","svelte-1u8tzxr"),R(c,"class","svelte-1u8tzxr"),R(r,"class","vis-example svelte-1u8tzxr")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,u),x(r,s),x(r,l),x(r,c),Q(m,f,p),de(h,m,p),d=!0},p(m,p){const y={};p[0]&1&&(y.width=m[0]/2),p[0]&131072&&(y.height=m[17]/2),i.$set(y);const g={};p[0]&1&&(g.width=m[0]/2),p[0]&131072&&(g.height=m[17]/2),o.$set(g);const b={};p[0]&2&&(b.pattern=m[1]),p[0]&1&&(b.width=m[0]),p[0]&131072&&(b.height=m[17]),h.$set(b)},i(m){d||(Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!0)},o(m){te(i.$$.fragment,m),te(o.$$.fragment,m),te(h.$$.fragment,m),d=!1},d(m){m&&(K(t),K(n),K(r),K(f)),me(i),me(o),me(h,m)}}}function Lk(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new Kr({props:{pattern:e[18],width:e[0]/2,height:e[17]/2}}),o=new Kr({props:{pattern:e[19],width:e[0]/2,height:e[17]/2}}),h=new Kr({props:{pattern:e[1],width:e[0],height:e[17]}}),{c(){t=k("div"),t.textContent=`The bar chart shows the size of the gaps between notes in the bars'
            height (example: the bar at 2 shows the gap between the first and
            second note). Look at the third bar, it is either lower (early) or
            higher (late) than the others.`,n=I(),r=k("div"),ge(i.$$.fragment),a=I(),ge(o.$$.fragment),u=I(),s=k("div"),s.textContent="Example for early",l=I(),c=k("div"),c.textContent="Example for late",f=I(),ge(h.$$.fragment),R(s,"class","svelte-1u8tzxr"),R(c,"class","svelte-1u8tzxr"),R(r,"class","vis-example svelte-1u8tzxr")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,u),x(r,s),x(r,l),x(r,c),Q(m,f,p),de(h,m,p),d=!0},p(m,p){const y={};p[0]&1&&(y.width=m[0]/2),p[0]&131072&&(y.height=m[17]/2),i.$set(y);const g={};p[0]&1&&(g.width=m[0]/2),p[0]&131072&&(g.height=m[17]/2),o.$set(g);const b={};p[0]&2&&(b.pattern=m[1]),p[0]&1&&(b.width=m[0]),p[0]&131072&&(b.height=m[17]),h.$set(b)},i(m){d||(Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!0)},o(m){te(i.$$.fragment,m),te(o.$$.fragment,m),te(h.$$.fragment,m),d=!1},d(m){m&&(K(t),K(n),K(r),K(f)),me(i),me(o),me(h,m)}}}function Ik(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new Zr({props:{pattern:e[18],width:e[0]/2,height:e[17]/2}}),o=new Zr({props:{pattern:e[19],width:e[0]/2,height:e[17]/2}}),h=new Zr({props:{pattern:e[1],width:e[0],height:e[17]}}),{c(){t=k("div"),t.textContent=`Look at the peaks, the gap between the third and forth tick is
            either smaller (early) or larger (late) than the other gaps.`,n=I(),r=k("div"),ge(i.$$.fragment),a=I(),ge(o.$$.fragment),u=I(),s=k("div"),s.textContent="Example for early",l=I(),c=k("div"),c.textContent="Example for late",f=I(),ge(h.$$.fragment),R(s,"class","svelte-1u8tzxr"),R(c,"class","svelte-1u8tzxr"),R(r,"class","vis-example svelte-1u8tzxr")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,u),x(r,s),x(r,l),x(r,c),Q(m,f,p),de(h,m,p),d=!0},p(m,p){const y={};p[0]&1&&(y.width=m[0]/2),p[0]&131072&&(y.height=m[17]/2),i.$set(y);const g={};p[0]&1&&(g.width=m[0]/2),p[0]&131072&&(g.height=m[17]/2),o.$set(g);const b={};p[0]&2&&(b.pattern=m[1]),p[0]&1&&(b.width=m[0]),p[0]&131072&&(b.height=m[17]),h.$set(b)},i(m){d||(Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!0)},o(m){te(i.$$.fragment,m),te(o.$$.fragment,m),te(h.$$.fragment,m),d=!1},d(m){m&&(K(t),K(n),K(r),K(f)),me(i),me(o),me(h,m)}}}function Rk(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new Jr({props:{pattern:e[18],audioFile:e[2],cachedAudio:e[3],width:e[0]/2,height:e[17]/2}}),o=new Jr({props:{pattern:e[19],audioFile:e[2],cachedAudio:e[3],width:e[0]/2,height:e[17]/2}}),h=new Jr({props:{pattern:e[1],audioFile:e[2],cachedAudio:e[3],width:e[0],height:e[17]}}),{c(){t=k("div"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the peaks, the gap between the third and forth peaks is either
            smaller (early) or larger (late) than the other gaps.`,n=I(),r=k("div"),ge(i.$$.fragment),a=I(),ge(o.$$.fragment),u=I(),s=k("div"),s.textContent="Example for early",l=I(),c=k("div"),c.textContent="Example for late",f=I(),ge(h.$$.fragment),R(s,"class","svelte-1u8tzxr"),R(c,"class","svelte-1u8tzxr"),R(r,"class","vis-example svelte-1u8tzxr")},m(m,p){Q(m,t,p),Q(m,n,p),Q(m,r,p),de(i,r,null),x(r,a),de(o,r,null),x(r,u),x(r,s),x(r,l),x(r,c),Q(m,f,p),de(h,m,p),d=!0},p(m,p){const y={};p[0]&4&&(y.audioFile=m[2]),p[0]&8&&(y.cachedAudio=m[3]),p[0]&1&&(y.width=m[0]/2),p[0]&131072&&(y.height=m[17]/2),i.$set(y);const g={};p[0]&4&&(g.audioFile=m[2]),p[0]&8&&(g.cachedAudio=m[3]),p[0]&1&&(g.width=m[0]/2),p[0]&131072&&(g.height=m[17]/2),o.$set(g);const b={};p[0]&2&&(b.pattern=m[1]),p[0]&4&&(b.audioFile=m[2]),p[0]&8&&(b.cachedAudio=m[3]),p[0]&1&&(b.width=m[0]),p[0]&131072&&(b.height=m[17]),h.$set(b)},i(m){d||(Z(i.$$.fragment,m),Z(o.$$.fragment,m),Z(h.$$.fragment,m),d=!0)},o(m){te(i.$$.fragment,m),te(o.$$.fragment,m),te(h.$$.fragment,m),d=!1},d(m){m&&(K(t),K(n),K(r),K(f)),me(i),me(o),me(h,m)}}}function a1(e){let t,n,r,i,a,o;return{c(){t=k("div"),n=k("label"),r=Me(`Do you have any final feedback/comments?
        `),i=k("textarea")},m(u,s){Q(u,t,s),x(t,n),x(n,r),x(n,i),Ge(i,e[11]),a||(o=Le(i,"input",e[29]),a=!0)},p(u,s){s[0]&2048&&Ge(i,u[11])},d(u){u&&K(t),a=!1,o()}}}function o1(e){let t,n,r;return{c(){t=k("div"),t.textContent="Thanks for participating!",n=I(),r=k("a"),r.textContent="click here to get your compensation",R(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){Q(i,t,a),Q(i,n,a),Q(i,r,a)},d(i){i&&(K(t),K(n),K(r))}}}function u1(e){let t,n,r;return{c(){t=k("button"),t.textContent="next step",R(t,"class","next-btn svelte-1u8tzxr")},m(i,a){Q(i,t,a),n||(r=Le(t,"click",e[20]),n=!0)},p:we,d(i){i&&K(t),n=!1,r()}}}function Ok(e){let t,n,r,i,a,o,u,s,l,c=e[5]==="consent"&&J0(),f=e[5]==="start1"&&e1(e),h=e[5]==="start2"&&t1(e),d=e[5]==="demo"&&n1(e),m=e[5]==="tests"&&r1(e),p=e[5]==="feedback"&&a1(e),y=e[5]==="done"&&o1(),g=!e[14]&&e[5]!=="done"&&u1(e);return{c(){t=k("main"),c&&c.c(),n=I(),f&&f.c(),r=I(),h&&h.c(),i=I(),d&&d.c(),a=I(),m&&m.c(),o=I(),p&&p.c(),u=I(),y&&y.c(),s=I(),g&&g.c(),R(t,"class","svelte-1u8tzxr")},m(b,w){Q(b,t,w),c&&c.m(t,null),x(t,n),f&&f.m(t,null),x(t,r),h&&h.m(t,null),x(t,i),d&&d.m(t,null),x(t,a),m&&m.m(t,null),x(t,o),p&&p.m(t,null),x(t,u),y&&y.m(t,null),x(t,s),g&&g.m(t,null),l=!0},p(b,w){b[5]==="consent"?c||(c=J0(),c.c(),c.m(t,n)):c&&(c.d(1),c=null),b[5]==="start1"?f?(f.p(b,w),w[0]&32&&Z(f,1)):(f=e1(b),f.c(),Z(f,1),f.m(t,r)):f&&($n(),te(f,1,1,()=>{f=null}),Cn()),b[5]==="start2"?h?h.p(b,w):(h=t1(b),h.c(),h.m(t,i)):h&&(h.d(1),h=null),b[5]==="demo"?d?d.p(b,w):(d=n1(b),d.c(),d.m(t,a)):d&&(d.d(1),d=null),b[5]==="tests"?m?(m.p(b,w),w[0]&32&&Z(m,1)):(m=r1(b),m.c(),Z(m,1),m.m(t,o)):m&&($n(),te(m,1,1,()=>{m=null}),Cn()),b[5]==="feedback"?p?p.p(b,w):(p=a1(b),p.c(),p.m(t,u)):p&&(p.d(1),p=null),b[5]==="done"?y||(y=o1(),y.c(),y.m(t,s)):y&&(y.d(1),y=null),!b[14]&&b[5]!=="done"?g?g.p(b,w):(g=u1(b),g.c(),g.m(t,null)):g&&(g.d(1),g=null)},i(b){l||(Z(f),Z(m),l=!0)},o(b){te(f),te(m),l=!1},d(b){b&&K(t),c&&c.d(),f&&f.d(),h&&h.d(),d&&d.d(),m&&m.d(),p&&p.d(),y&&y.d(),g&&g.d()}}}const qk="/store";let s1=.5;const fl=20;let Gk=6,Uk=!0,zk=0;function Hk(e,t,n){let r,i,a=Io(window,"PROLIFIC_PID"),o=Io(window,"STUDY_ID"),u=Io(window,"SESSION_ID");const s=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let l=s[0],c;ag(l).then($e=>{n(3,c=$e),console.log("Audio fetched",$e)});let f=[{stimulus:"audio",audioFile:s[0]},{stimulus:"waveform",audioFile:s[0]},{stimulus:"color"}];const h=[0,.5,1,1.4,1.9,2.4],d=[0,.5,1,1.6,2.1,2.6];let m="consent",p=0,y,g="",b="",w=0,v=0,M="",_=0,P,$={},C=[],F,S,A=!1,B=!1,L=!1,E="tick",q=fl,re=3,X=600,J=[],G=[],H=0;const U=[];ni(()=>{document.querySelector("html").addEventListener("keyup",T)});const V=()=>{S=new De({ratio:{firstVal:fl,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,fl],direction:-1,reversalLimit:5,verbosity:0}}),S.init()};function ne(){m==="consent"?n(5,m="start1"):m==="start1"?n(5,m="start2"):m==="start2"?(n(4,f=n9(f)),n(5,m="demo")):m==="demo"?g==""||b==""?alert("please fill the form first"):(n(5,m="tests"),n(6,p=0)):m==="tests"?p<f.length?(n(16,E=f[p].stimulus),n(2,l=f[p].audioFile),ae()):n(5,m="feedback"):m==="feedback"&&(N(),n(5,m="done"))}function ae(){V(),n(12,_=0),P=0,F=0,n(13,A=!0),G=[],C=[],y=new Date,ie()}function ie(){console.log("Starting trial "+_),$={},n(14,B=!0),j()}function j(){let ce=S.getLast("ratio");ce=Math.random()<.5?ce:-ce,$.deviation=ce,n(21,q=ce),$.startTime=new Date,n(15,L=!0),window.setTimeout(()=>{n(15,L=!1)},1e3)}function Y($e){if(!B)return;n(14,B=!1),$.decisionChoice=$e,$.errorCode=0,$.timeTaken=(new Date-$.startTime)/1e3;const ce=F;($.decisionChoice==0&&$.deviation<0||$.decisionChoice==1&&$.deviation>0)&&$.errorCode==0&&F++,$.errorCode==0&&(S.next(ce!=F),C[C.length]=$),$.errorCode==0&&P++,n(12,_++,_),S.reversalLimitReached("ratio")?D():ie()}function D(){n(13,A=!1),n(14,B=!1),z(),G=[],H=S.getFinalVal("ratio");for(let ce=0;ce<C.length;ce++)G[ce]=C[ce].deviation;console.log(G);const $e=new Date;U.push({encoding:E,audioFile:l,final:H,data:G,score:F,testNumber:p,trialCount:_+1,trials:C,validTrialCount:P+1,testTimeSeconds:($e-y)/1e3}),n(6,p++,p)}function T($e){if(!L)switch($e.key){case"ArrowLeft":B&&Y(0);break;case"ArrowRight":B&&Y(1);break;case"PageDown":!B&&m!=="done"&&ne()}}function z(){`${F}`,_+1,`${(F/(_+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function N(){const $e={studyStep:m,demographics:{partID:a,studyID:o,sessionID:u,partEduation:g,partMusicInstr:b,partMusicInstrYears:w,partVisExperienceYears:v,partFeedback:M,visWidth:X},date:new Date().toISOString(),tests:U};console.log("saving data",$e);const ce=JSON.stringify($e,void 0,2);fetch(qk,{method:"POST",headers:{"Content-Type":"application/json"},body:ce}).then(qe=>{console.log("Data saved:",qe)})}const le=()=>n(0,X*=1.05),ee=()=>n(0,X*=.95);function ue(){g=wc(this),n(7,g)}function _e(){b=this.value,n(8,b)}function Te(){w=yr(this.value),n(9,w)}function Re(){v=yr(this.value),n(10,v)}function Ae(){M=this.value,n(11,M)}return e.$$.update=()=>{e.$$.dirty[0]&2097152&&n(22,r=q/100*s1),e.$$.dirty[0]&1&&n(17,i=X/6),e.$$.dirty[0]&4194306&&(n(1,J=Kl(Gk,s1,re,r,Uk,zk)),console.log("generated pattern",J))},[X,J,l,c,f,m,p,g,b,w,v,M,_,A,B,L,E,i,h,d,ne,q,r,le,ee,ue,_e,Te,Re,Ae]}class Wk extends Ke{constructor(t){super(),Ze(this,t,Hk,Ok,Xe,{},null,[-1,-1])}}function l1(e){let t,n,r,i,a,o,u,s,l,c;return{c(){t=k("div"),n=k("button"),n.textContent="Playground",r=I(),i=k("button"),i.textContent="Examples",a=I(),o=k("button"),o.textContent="Study",u=I(),s=k("button"),s.textContent="Analysis"},m(f,h){Q(f,t,h),x(t,n),x(t,r),x(t,i),x(t,a),x(t,o),x(t,u),x(t,s),l||(c=[Le(n,"click",e[1]),Le(i,"click",e[2]),Le(o,"click",e[3]),Le(s,"click",e[4])],l=!0)},p:we,d(f){f&&K(t),l=!1,Xt(c)}}}function Vk(e){let t,n;return t=new xk({}),{c(){ge(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){te(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function Yk(e){let t,n;return t=new Wk({}),{c(){ge(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){te(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function jk(e){let t,n;return t=new Ak({}),{c(){ge(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){te(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function Xk(e){let t,n;return t=new HC({}),{c(){ge(t.$$.fragment)},m(r,i){de(t,r,i),n=!0},i(r){n||(Z(t.$$.fragment,r),n=!0)},o(r){te(t.$$.fragment,r),n=!1},d(r){me(t,r)}}}function Zk(e){let t,n,r,i,a,o,u,s=e[0]!=="study_prolific"&&l1(e);const l=[Xk,jk,Yk,Vk],c=[];function f(h,d){return h[0]==="playground"?0:h[0]==="examples"?1:h[0]==="study_drums"?2:h[0]==="analysis_prolific"?3:-1}return~(a=f(e))&&(o=c[a]=l[a](e)),{c(){t=k("main"),n=k("h1"),n.textContent="Rhythm Error Sensitivity Study",r=I(),s&&s.c(),i=I(),o&&o.c()},m(h,d){Q(h,t,d),x(t,n),x(t,r),s&&s.m(t,null),x(t,i),~a&&c[a].m(t,null),u=!0},p(h,[d]){h[0]!=="study_prolific"?s?s.p(h,d):(s=l1(h),s.c(),s.m(t,i)):s&&(s.d(1),s=null);let m=a;a=f(h),a!==m&&(o&&($n(),te(c[m],1,1,()=>{c[m]=null}),Cn()),~a?(o=c[a],o||(o=c[a]=l[a](h),o.c()),Z(o,1),o.m(t,null)):o=null)},i(h){u||(Z(o),u=!0)},o(h){te(o),u=!1},d(h){h&&K(t),s&&s.d(),~a&&c[a].d()}}}function Kk(e,t,n){let r=Io(window,"p")??"study_prolific";return r="playground",[r,()=>n(0,r="playground"),()=>n(0,r="examples"),()=>n(0,r="study_prolific"),()=>n(0,r="analysis_prolific")]}class Qk extends Ke{constructor(t){super(),Ze(this,t,Kk,Zk,Xe,{})}}new Qk({target:document.getElementById("app")});export{ig as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-CNlOOYox.js","assets/index-BcJ-wqc6.js","assets/browser-Bw6UQkrp.js","assets/index-Djhv-S3c.js","assets/index-DjRGtbFJ.js","assets/index-B9J8Rb36.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

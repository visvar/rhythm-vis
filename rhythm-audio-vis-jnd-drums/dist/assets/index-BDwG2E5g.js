var Jy=Object.defineProperty;var e3=(e,t,n)=>t in e?Jy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ws=(e,t,n)=>(e3(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function de(){}function i1(e){return e()}function zf(){return Object.create(null)}function bn(e){e.forEach(i1)}function a1(e){return typeof e=="function"}function Oe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Za;function t3(e,t){return e===t?!0:(Za||(Za=document.createElement("a")),Za.href=t,e===Za.href)}function n3(e){return Object.keys(e).length===0}function P(e,t){e.appendChild(t)}function Z(e,t,n){e.insertBefore(t,n||null)}function X(e){e.parentNode&&e.parentNode.removeChild(e)}function lr(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function Hf(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ae(e){return document.createTextNode(e)}function I(){return Ae(" ")}function gc(){return Ae("")}function Qe(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function N(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Kr(e){return e===""?null:+e}function r3(e){return Array.from(e.childNodes)}function At(e,t){t=""+t,e.data!==t&&(e.data=t)}function at(e,t){e.value=t??""}function Ce(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Ro(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function o1(e){const t=e.querySelector(":checked");return t&&t.__value}let Qi;function Wi(e){Qi=e}function yc(){if(!Qi)throw new Error("Function called outside component initialization");return Qi}function _a(e){yc().$$.on_mount.push(e)}function _t(e){yc().$$.after_update.push(e)}function i3(e){yc().$$.on_destroy.push(e)}const Gr=[],We=[];let Wr=[];const Wf=[],a3=Promise.resolve();let cl=!1;function o3(){cl||(cl=!0,a3.then(u1))}function Ji(e){Wr.push(e)}const vs=new Set;let Br=0;function u1(){if(Br!==0)return;const e=Qi;do{try{for(;Br<Gr.length;){const t=Gr[Br];Br++,Wi(t),u3(t.$$)}}catch(t){throw Gr.length=0,Br=0,t}for(Wi(null),Gr.length=0,Br=0;We.length;)We.pop()();for(let t=0;t<Wr.length;t+=1){const n=Wr[t];vs.has(n)||(vs.add(n),n())}Wr.length=0}while(Gr.length);for(;Wf.length;)Wf.pop()();cl=!1,vs.clear(),Wi(e)}function u3(e){if(e.fragment!==null){e.update(),bn(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ji)}}function s3(e){const t=[],n=[];Wr.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Wr=t}const _o=new Set;let fr;function ln(){fr={r:0,c:[],p:fr}}function cn(){fr.r||bn(fr.c),fr=fr.p}function Q(e,t){e&&e.i&&(_o.delete(e),e.i(t))}function oe(e,t,n,r){if(e&&e.o){if(_o.has(e))return;_o.add(e),fr.c.push(()=>{_o.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Pt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Pe(e){e&&e.c()}function ve(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Ji(()=>{const a=e.$$.on_mount.map(i1).filter(a1);e.$$.on_destroy?e.$$.on_destroy.push(...a):bn(a),e.$$.on_mount=[]}),i.forEach(Ji)}function _e(e,t){const n=e.$$;n.fragment!==null&&(s3(n.after_update),bn(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function l3(e,t){e.$$.dirty[0]===-1&&(Gr.push(e),o3(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qe(e,t,n,r,i,a,o=null,u=[-1]){const s=Qi;Wi(e);const l=e.$$={fragment:null,ctx:[],props:a,update:de,not_equal:i,bound:zf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:zf(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,h,...d)=>{const m=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),c&&l3(e,f)),h}):[],l.update(),c=!0,bn(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=r3(t.target);l.fragment&&l.fragment.l(f),f.forEach(X)}else l.fragment&&l.fragment.c();t.intro&&Q(e.$$.fragment),ve(e,t.target,t.anchor),u1()}Wi(s)}class Ge{constructor(){ws(this,"$$");ws(this,"$$set")}$destroy(){_e(this,1),this.$destroy=de}$on(t,n){if(!a1(n))return de;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!n3(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const c3="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(c3);function yt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ma(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Au(e){let t,n,r;e.length!==2?(t=yt,n=(u,s)=>yt(e(u),s),r=(u,s)=>e(u)-s):(t=e===yt||e===Ma?e:f3,n=e,r=e);function i(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<0?l=f+1:c=f}while(l<c)}return l}function a(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<=0?l=f+1:c=f}while(l<c)}return l}function o(u,s,l=0,c=u.length){const f=i(u,s,l,c-1);return f>l&&r(u[f-1],s)>-r(u[f],s)?f-1:f}return{left:i,center:o,right:a}}function f3(){return 0}function s1(e){return e===null?NaN:+e}function*h3(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const d3=Au(yt),Eu=d3.right;Au(s1).center;function wc(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function m3(e){return e.length|0}function p3(e){return!(e>0)}function b3(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function g3(e){return t=>e(...t)}function l1(...e){const t=typeof e[e.length-1]=="function"&&g3(e.pop());e=e.map(b3);const n=e.map(m3),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(p3))return a;for(;;){a.push(i.map((u,s)=>e[s][u]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function y3(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function vc(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let u of e)(u=t(u,++o,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,a+=r*(u-i))}if(n>1)return a/(n-1)}function Cu(e,t){const n=vc(e,t);return n&&Math.sqrt(n)}function Ft(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class gr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,u=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);u&&(n[r++]=u),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class yr extends Map{constructor(t,n=h1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(fl(this,t))}has(t){return super.has(fl(this,t))}set(t,n){return super.set(c1(this,t),n)}delete(t){return super.delete(f1(this,t))}}class ku extends Set{constructor(t,n=h1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(fl(this,t))}add(t){return super.add(c1(this,t))}delete(t){return super.delete(f1(this,t))}}function fl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function c1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function f1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function h1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Io(e){return e}function Tu(e,...t){return $u(e,Io,Io,t)}function Cn(e,...t){return $u(e,Array.from,Io,t)}function Vr(e,t,...n){return $u(e,Io,t,n)}function w3(e,t,...n){return $u(e,Array.from,t,n)}function $u(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const u=new yr,s=r[o++];let l=-1;for(const c of a){const f=s(c,++l,a),h=u.get(f);h?h.push(c):u.set(f,[c])}for(const[c,f]of u)u.set(c,i(f,o));return t(u)}(e,0)}function v3(e,t){return Array.from(t,n=>e[n])}function ea(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const u=Oo(o[i],o[a]);if(u)return u}})):(n=e.map(n),r.sort((i,a)=>Oo(n[i],n[a]))),v3(e,r)}return e.sort(d1(n))}function d1(e=yt){if(e===yt)return Oo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Oo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function _c(e,t,n){return(t.length!==2?ea(Vr(e,t,n),([r,i],[a,o])=>yt(i,o)||yt(r,a)):ea(Tu(e,n),([r,i],[a,o])=>t(i,o)||yt(r,a))).map(([r])=>r)}const _3=Math.sqrt(50),M3=Math.sqrt(10),x3=Math.sqrt(2);function qo(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=_3?10:a>=M3?5:a>=x3?2:1;let u,s,l;return i<0?(l=Math.pow(10,-i)/o,u=Math.round(e*l),s=Math.round(t*l),u/l<e&&++u,s/l>t&&--s,l=-l):(l=Math.pow(10,i)*o,u=Math.round(e/l),s=Math.round(t/l),u*l<e&&++u,s*l>t&&--s),s<u&&.5<=n&&n<2?qo(e,t,n*2):[u,s,l]}function ta(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?qo(t,e,n):qo(e,t,n);if(!(a>=i))return[];const u=a-i+1,s=new Array(u);if(r)if(o<0)for(let l=0;l<u;++l)s[l]=(a-l)/-o;else for(let l=0;l<u;++l)s[l]=(a-l)*o;else if(o<0)for(let l=0;l<u;++l)s[l]=(i+l)/-o;else for(let l=0;l<u;++l)s[l]=(i+l)*o;return s}function Go(e,t,n){return t=+t,e=+e,n=+n,qo(e,t,n)[2]}function hl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Go(t,e,n):Go(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function P3(e){return Math.max(1,Math.ceil(Math.log(wc(e))/Math.LN2)+1)}function Ot(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function S3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Dn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function A3(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function m1(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Oo:d1(i);r>n;){if(r-n>600){const s=r-n+1,l=t-n+1,c=Math.log(s),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(s-f)/s)*(l-s/2<0?-1:1),d=Math.max(n,Math.floor(t-l*f/s+h)),m=Math.min(r,Math.floor(t+(s-l)*f/s+h));m1(e,t,d,m,i)}const a=e[t];let o=n,u=r;for(xi(e,n,t),i(e[r],a)>0&&xi(e,n,r);o<u;){for(xi(e,o,u),++o,--u;i(e[o],a)<0;)++o;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?xi(e,n,u):(++u,xi(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function xi(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function p1(e,t=yt){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?yt(o,i)>0:yt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Qr(e,t,n){if(e=Float64Array.from(h3(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Dn(e);if(t>=1)return Ot(e);var r,i=(r-1)*t,a=Math.floor(i),o=Ot(m1(e,a).subarray(0,a+1)),u=Dn(e.subarray(a+1));return o+(u-o)*(i-a)}}function E3(e,t,n=s1){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function C3(e,t,n){const r=wc(e),i=Qr(e,.75)-Qr(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function b1(e,t,n){const r=wc(e),i=Cu(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Du(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function dl(e,t){return Qr(e,.5,t)}function*k3(e){for(const t of e)yield*t}function g1(e){return Array.from(k3(e))}function T3(e,t){const n=new yr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function $3(e,t=D3){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function D3(e,t){return[e,t]}function ml(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Zn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Uo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function N3(e){return e}var _s=1,Ms=2,pl=3,Ka=4,Vf=1e-6;function F3(e){return"translate("+e+",0)"}function B3(e){return"translate(0,"+e+")"}function L3(e){return t=>+e(t)}function R3(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function I3(){return!this.__axis}function O3(e,t){var n=[],r=null,i=null,a=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===_s||e===Ka?-1:1,c=e===Ka||e===Ms?"x":"y",f=e===_s||e===pl?F3:B3;function h(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):N3),g=Math.max(a,0)+u,w=t.range(),b=+w[0]+s,v=+w[w.length-1]+s,y=(t.bandwidth?R3:L3)(t.copy(),s),M=d.selection?d.selection():d,_=M.selectAll(".domain").data([null]),x=M.selectAll(".tick").data(m,t).order(),A=x.exit(),E=x.enter().append("g").attr("class","tick"),F=x.select("line"),S=x.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(E),F=F.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),S=S.merge(E.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===_s?"0em":e===pl?"0.71em":"0.32em")),d!==M&&(_=_.transition(d),x=x.transition(d),F=F.transition(d),S=S.transition(d),A=A.transition(d).attr("opacity",Vf).attr("transform",function(D){return isFinite(D=y(D))?f(D+s):this.getAttribute("transform")}),E.attr("opacity",Vf).attr("transform",function(D){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(D))?O:y(D))+s)})),A.remove(),_.attr("d",e===Ka||e===Ms?o?"M"+l*o+","+b+"H"+s+"V"+v+"H"+l*o:"M"+s+","+b+"V"+v:o?"M"+b+","+l*o+"V"+s+"H"+v+"V"+l*o:"M"+b+","+s+"H"+v),x.attr("opacity",1).attr("transform",function(D){return f(y(D)+s)}),F.attr(c+"2",l*a),S.attr(c,l*g).text(p),M.filter(I3).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ms?"start":e===Ka?"end":"middle"),M.each(function(){this.__axis=y})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(u=+d,h):u},h.offset=function(d){return arguments.length?(s=+d,h):s},h}function q3(e){return O3(pl,e)}var G3={value:()=>{}};function y1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Mo(n)}function Mo(e){this._=e}function U3(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Mo.prototype=y1.prototype={constructor:Mo,on:function(e,t){var n=this._,r=U3(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=z3(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Yf(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Yf(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Mo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function z3(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Yf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=G3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var bl="http://www.w3.org/1999/xhtml";const Jr={svg:"http://www.w3.org/2000/svg",xhtml:bl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Jr.hasOwnProperty(t)?{space:Jr[t],local:e}:e}function H3(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bl&&t.documentElement.namespaceURI===bl?t.createElement(e):t.createElementNS(n,e)}}function W3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fu(e){var t=Nu(e);return(t.local?W3:H3)(t)}function V3(){}function Mc(e){return e==null?V3:function(){return this.querySelector(e)}}function Y3(e){typeof e!="function"&&(e=Mc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Et(r,this._parents)}function j3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function X3(){return[]}function w1(e){return e==null?X3:function(){return this.querySelectorAll(e)}}function Z3(e){return function(){return j3(e.apply(this,arguments))}}function K3(e){typeof e=="function"?e=Z3(e):e=w1(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Et(r,i)}function v1(e){return function(){return this.matches(e)}}function _1(e){return function(t){return t.matches(e)}}var Q3=Array.prototype.find;function J3(e){return function(){return Q3.call(this.children,e)}}function ew(){return this.firstElementChild}function tw(e){return this.select(e==null?ew:J3(typeof e=="function"?e:_1(e)))}var nw=Array.prototype.filter;function rw(){return Array.from(this.children)}function iw(e){return function(){return nw.call(this.children,e)}}function aw(e){return this.selectAll(e==null?rw:iw(typeof e=="function"?e:_1(e)))}function ow(e){typeof e!="function"&&(e=v1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Et(r,this._parents)}function M1(e){return new Array(e.length)}function uw(){return new Et(this._enter||this._groups.map(M1),this._parents)}function zo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zo.prototype={constructor:zo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sw(e){return function(){return e}}function lw(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new zo(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function cw(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new zo(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function fw(e){return e.__data__}function hw(e,t){if(!arguments.length)return Array.from(this,fw);var n=t?cw:lw,r=this._parents,i=this._groups;typeof e!="function"&&(e=sw(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=dw(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),w=s[l]=new Array(h);n(c,f,p,g,w,d,t);for(var b=0,v=0,y,M;b<m;++b)if(y=p[b]){for(b>=v&&(v=b+1);!(M=g[v])&&++v<m;);y._next=M||null}}return o=new Et(o,r),o._enter=u,o._exit=s,o}function dw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mw(){return new Et(this._exit||this._groups.map(M1),this._parents)}function pw(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function bw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var l=n[s],c=r[s],f=l.length,h=u[s]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;s<i;++s)u[s]=n[s];return new Et(u,this._parents)}function gw(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function yw(e){e||(e=ww);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Et(i,this._parents).order()}function ww(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vw(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _w(){return Array.from(this)}function Mw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function xw(){let e=0;for(const t of this)++e;return e}function Pw(){return!this.node()}function Sw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function Aw(e){return function(){this.removeAttribute(e)}}function Ew(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Cw(e,t){return function(){this.setAttribute(e,t)}}function kw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function $w(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dw(e,t){var n=Nu(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ew:Aw:typeof t=="function"?n.local?$w:Tw:n.local?kw:Cw)(n,t))}function x1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Nw(e){return function(){this.style.removeProperty(e)}}function Fw(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Bw(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Lw(e,t,n){return arguments.length>1?this.each((t==null?Nw:typeof t=="function"?Bw:Fw)(e,t,n??"")):ei(this.node(),e)}function ei(e,t){return e.style.getPropertyValue(t)||x1(e).getComputedStyle(e,null).getPropertyValue(t)}function Rw(e){return function(){delete this[e]}}function Iw(e,t){return function(){this[e]=t}}function Ow(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function qw(e,t){return arguments.length>1?this.each((t==null?Rw:typeof t=="function"?Ow:Iw)(e,t)):this.node()[e]}function P1(e){return e.trim().split(/^|\s+/)}function xc(e){return e.classList||new S1(e)}function S1(e){this._node=e,this._names=P1(e.getAttribute("class")||"")}S1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function A1(e,t){for(var n=xc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function E1(e,t){for(var n=xc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Gw(e){return function(){A1(this,e)}}function Uw(e){return function(){E1(this,e)}}function zw(e,t){return function(){(t.apply(this,arguments)?A1:E1)(this,e)}}function Hw(e,t){var n=P1(e+"");if(arguments.length<2){for(var r=xc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?zw:t?Gw:Uw)(n,t))}function Ww(){this.textContent=""}function Vw(e){return function(){this.textContent=e}}function Yw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jw(e){return arguments.length?this.each(e==null?Ww:(typeof e=="function"?Yw:Vw)(e)):this.node().textContent}function Xw(){this.innerHTML=""}function Zw(e){return function(){this.innerHTML=e}}function Kw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Qw(e){return arguments.length?this.each(e==null?Xw:(typeof e=="function"?Kw:Zw)(e)):this.node().innerHTML}function Jw(){this.nextSibling&&this.parentNode.appendChild(this)}function ev(){return this.each(Jw)}function tv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nv(){return this.each(tv)}function rv(e){var t=typeof e=="function"?e:Fu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function iv(){return null}function av(e,t){var n=typeof e=="function"?e:Fu(e),r=t==null?iv:typeof t=="function"?t:Mc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ov(){var e=this.parentNode;e&&e.removeChild(this)}function uv(){return this.each(ov)}function sv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cv(e){return this.select(e?lv:sv)}function fv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hv(e){return function(t){e.call(this,t,this.__data__)}}function dv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function mv(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function pv(e,t,n){return function(){var r=this.__on,i,a=hv(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function bv(e,t,n){var r=dv(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?pv:mv,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function C1(e,t,n){var r=x1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gv(e,t){return function(){return C1(this,e,t)}}function yv(e,t){return function(){return C1(this,e,t.apply(this,arguments))}}function wv(e,t){return this.each((typeof t=="function"?yv:gv)(e,t))}function*vv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var k1=[null];function Et(e,t){this._groups=e,this._parents=t}function xa(){return new Et([[document.documentElement]],k1)}function _v(){return this}Et.prototype=xa.prototype={constructor:Et,select:Y3,selectAll:K3,selectChild:tw,selectChildren:aw,filter:ow,data:hw,enter:uw,exit:mw,join:pw,merge:bw,selection:_v,order:gw,sort:yw,call:vw,nodes:_w,node:Mw,size:xw,empty:Pw,each:Sw,attr:Dw,style:Lw,property:qw,classed:Hw,text:jw,html:Qw,raise:ev,lower:nv,append:rv,insert:av,remove:uv,clone:cv,datum:fv,on:bv,dispatch:wv,[Symbol.iterator]:vv};function Vi(e){return typeof e=="string"?new Et([[document.querySelector(e)]],[document.documentElement]):new Et([[e]],k1)}function Mv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xv(e,t){if(e=Mv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function bi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function tr(){}var wr=.7,ti=1/wr,Yr="\\s*([+-]?\\d+)\\s*",na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pv=/^#([0-9a-f]{3,8})$/,Sv=new RegExp(`^rgb\\(${Yr},${Yr},${Yr}\\)$`),Av=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),Ev=new RegExp(`^rgba\\(${Yr},${Yr},${Yr},${na}\\)$`),Cv=new RegExp(`^rgba\\(${fn},${fn},${fn},${na}\\)$`),kv=new RegExp(`^hsl\\(${na},${fn},${fn}\\)$`),Tv=new RegExp(`^hsla\\(${na},${fn},${fn},${na}\\)$`),jf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bi(tr,vr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xf,formatHex:Xf,formatHex8:$v,formatHsl:Dv,formatRgb:Zf,toString:Zf});function Xf(){return this.rgb().formatHex()}function $v(){return this.rgb().formatHex8()}function Dv(){return T1(this).formatHsl()}function Zf(){return this.rgb().formatRgb()}function vr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Kf(t):n===3?new Je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qa(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qa(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Sv.exec(e))?new Je(t[1],t[2],t[3],1):(t=Av.exec(e))?new Je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ev.exec(e))?Qa(t[1],t[2],t[3],t[4]):(t=Cv.exec(e))?Qa(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kv.exec(e))?eh(t[1],t[2]/100,t[3]/100,1):(t=Tv.exec(e))?eh(t[1],t[2]/100,t[3]/100,t[4]):jf.hasOwnProperty(e)?Kf(jf[e]):e==="transparent"?new Je(NaN,NaN,NaN,0):null}function Kf(e){return new Je(e>>16&255,e>>8&255,e&255,1)}function Qa(e,t,n,r){return r<=0&&(e=t=n=NaN),new Je(e,t,n,r)}function Pc(e){return e instanceof tr||(e=vr(e)),e?(e=e.rgb(),new Je(e.r,e.g,e.b,e.opacity)):new Je}function Kn(e,t,n,r){return arguments.length===1?Pc(e):new Je(e,t,n,r??1)}function Je(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}bi(Je,Kn,Pa(tr,{brighter(e){return e=e==null?ti:Math.pow(ti,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wr:Math.pow(wr,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Je(mr(this.r),mr(this.g),mr(this.b),Ho(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qf,formatHex:Qf,formatHex8:Nv,formatRgb:Jf,toString:Jf}));function Qf(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}`}function Nv(){return`#${hr(this.r)}${hr(this.g)}${hr(this.b)}${hr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jf(){const e=Ho(this.opacity);return`${e===1?"rgb(":"rgba("}${mr(this.r)}, ${mr(this.g)}, ${mr(this.b)}${e===1?")":`, ${e})`}`}function Ho(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hr(e){return e=mr(e),(e<16?"0":"")+e.toString(16)}function eh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vt(e,t,n,r)}function T1(e){if(e instanceof Vt)return new Vt(e.h,e.s,e.l,e.opacity);if(e instanceof tr||(e=vr(e)),!e)return new Vt;if(e instanceof Vt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new Vt(o,u,s,e.opacity)}function gl(e,t,n,r){return arguments.length===1?T1(e):new Vt(e,t,n,r??1)}function Vt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}bi(Vt,gl,Pa(tr,{brighter(e){return e=e==null?ti:Math.pow(ti,e),new Vt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wr:Math.pow(wr,e),new Vt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Je(xs(e>=240?e-240:e+120,i,r),xs(e,i,r),xs(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Vt(th(this.h),Ja(this.s),Ja(this.l),Ho(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ho(this.opacity);return`${e===1?"hsl(":"hsla("}${th(this.h)}, ${Ja(this.s)*100}%, ${Ja(this.l)*100}%${e===1?")":`, ${e})`}`}}));function th(e){return e=(e||0)%360,e<0?e+360:e}function Ja(e){return Math.max(0,Math.min(1,e||0))}function xs(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $1=Math.PI/180,D1=180/Math.PI,Wo=18,N1=.96422,F1=1,B1=.82521,L1=4/29,jr=6/29,R1=3*jr*jr,Fv=jr*jr*jr;function I1(e){if(e instanceof hn)return new hn(e.l,e.a,e.b,e.opacity);if(e instanceof kn)return O1(e);e instanceof Je||(e=Pc(e));var t=Es(e.r),n=Es(e.g),r=Es(e.b),i=Ps((.2225045*t+.7168786*n+.0606169*r)/F1),a,o;return t===n&&n===r?a=o=i:(a=Ps((.4360747*t+.3850649*n+.1430804*r)/N1),o=Ps((.0139322*t+.0971045*n+.7141733*r)/B1)),new hn(116*i-16,500*(a-i),200*(i-o),e.opacity)}function yl(e,t,n,r){return arguments.length===1?I1(e):new hn(e,t,n,r??1)}function hn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}bi(hn,yl,Pa(tr,{brighter(e){return new hn(this.l+Wo*(e??1),this.a,this.b,this.opacity)},darker(e){return new hn(this.l-Wo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=N1*Ss(t),e=F1*Ss(e),n=B1*Ss(n),new Je(As(3.1338561*t-1.6168667*e-.4906146*n),As(-.9787684*t+1.9161415*e+.033454*n),As(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Ps(e){return e>Fv?Math.pow(e,1/3):e/R1+L1}function Ss(e){return e>jr?e*e*e:R1*(e-L1)}function As(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Es(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Bv(e){if(e instanceof kn)return new kn(e.h,e.c,e.l,e.opacity);if(e instanceof hn||(e=I1(e)),e.a===0&&e.b===0)return new kn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*D1;return new kn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function wl(e,t,n,r){return arguments.length===1?Bv(e):new kn(e,t,n,r??1)}function kn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function O1(e){if(isNaN(e.h))return new hn(e.l,0,0,e.opacity);var t=e.h*$1;return new hn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}bi(kn,wl,Pa(tr,{brighter(e){return new kn(this.h,this.c,this.l+Wo*(e??1),this.opacity)},darker(e){return new kn(this.h,this.c,this.l-Wo*(e??1),this.opacity)},rgb(){return O1(this).rgb()}}));var q1=-.14861,Sc=1.78277,Ac=-.29227,Bu=-.90649,ra=1.97294,nh=ra*Bu,rh=ra*Sc,ih=Sc*Ac-Bu*q1;function Lv(e){if(e instanceof pr)return new pr(e.h,e.s,e.l,e.opacity);e instanceof Je||(e=Pc(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ih*r+nh*t-rh*n)/(ih+nh-rh),a=r-i,o=(ra*(n-i)-Ac*a)/Bu,u=Math.sqrt(o*o+a*a)/(ra*i*(1-i)),s=u?Math.atan2(o,a)*D1-120:NaN;return new pr(s<0?s+360:s,u,i,e.opacity)}function mn(e,t,n,r){return arguments.length===1?Lv(e):new pr(e,t,n,r??1)}function pr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}bi(pr,mn,Pa(tr,{brighter(e){return e=e==null?ti:Math.pow(ti,e),new pr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wr:Math.pow(wr,e),new pr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*$1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Je(255*(t+n*(q1*r+Sc*i)),255*(t+n*(Ac*r+Bu*i)),255*(t+n*(ra*r)),this.opacity)}}));function Rv(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function Iv(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return Rv((n-r/t)*t,o,i,a,u)}}const Lu=e=>()=>e;function G1(e,t){return function(n){return e+n*t}}function Ov(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ec(e,t){var n=t-e;return n?G1(e,n>180||n<-180?n-360*Math.round(n/360):n):Lu(isNaN(e)?t:e)}function qv(e){return(e=+e)==1?ut:function(t,n){return n-t?Ov(t,n,e):Lu(isNaN(t)?n:t)}}function ut(e,t){var n=t-e;return n?G1(e,n):Lu(isNaN(e)?t:e)}const _r=function e(t){var n=qv(t);function r(i,a){var o=n((i=Kn(i)).r,(a=Kn(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=ut(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Gv(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,u;for(o=0;o<n;++o)u=Kn(t[o]),r[o]=u.r||0,i[o]=u.g||0,a[o]=u.b||0;return r=e(r),i=e(i),a=e(a),u.opacity=1,function(s){return u.r=r(s),u.g=i(s),u.b=a(s),u+""}}}var Uv=Gv(Iv);function zv(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Hv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Wv(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Sa(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function Vv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Yv(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Sa(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var vl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cs=new RegExp(vl.source,"g");function jv(e){return function(){return e}}function Xv(e){return function(t){return e(t)+""}}function U1(e,t){var n=vl.lastIndex=Cs.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=vl.exec(e))&&(i=Cs.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:ot(r,i)})),n=Cs.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?Xv(s[0].x):jv(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}function Sa(e,t){var n=typeof t,r;return t==null||n==="boolean"?Lu(t):(n==="number"?ot:n==="string"?(r=vr(t))?(t=r,_r):U1:t instanceof vr?_r:t instanceof Date?Vv:Hv(t)?zv:Array.isArray(t)?Wv:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yv:ot)(e,t)}function Cc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ah=180/Math.PI,_l={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function z1(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*ah,skewX:Math.atan(s)*ah,scaleX:o,scaleY:u}}var eo;function Zv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_l:z1(t.a,t.b,t.c,t.d,t.e,t.f)}function Kv(e){return e==null||(eo||(eo=document.createElementNS("http://www.w3.org/2000/svg","g")),eo.setAttribute("transform",e),!(e=eo.transform.baseVal.consolidate()))?_l:(e=e.matrix,z1(e.a,e.b,e.c,e.d,e.e,e.f))}function H1(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:ot(l,f)},{i:p-2,x:ot(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ot(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ot(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:ot(l,f)},{i:p-2,x:ot(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var Qv=H1(Zv,"px, ","px)","deg)"),Jv=H1(Kv,", ",")",")");function e_(e){return function(t,n){var r=e((t=gl(t)).h,(n=gl(n)).h),i=ut(t.s,n.s),a=ut(t.l,n.l),o=ut(t.opacity,n.opacity);return function(u){return t.h=r(u),t.s=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const t_=e_(Ec);function n_(e,t){var n=ut((e=yl(e)).l,(t=yl(t)).l),r=ut(e.a,t.a),i=ut(e.b,t.b),a=ut(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function r_(e){return function(t,n){var r=e((t=wl(t)).h,(n=wl(n)).h),i=ut(t.c,n.c),a=ut(t.l,n.l),o=ut(t.opacity,n.opacity);return function(u){return t.h=r(u),t.c=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const i_=r_(Ec);function W1(e){return function t(n){n=+n;function r(i,a){var o=e((i=mn(i)).h,(a=mn(a)).h),u=ut(i.s,a.s),s=ut(i.l,a.l),l=ut(i.opacity,a.opacity);return function(c){return i.h=o(c),i.s=u(c),i.l=s(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}W1(Ec);var kc=W1(ut);function Ru(e,t){t===void 0&&(t=e,e=Sa);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}function jt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ni=0,Ni=0,Pi=0,V1=1e3,Vo,Fi,Yo=0,Mr=0,Iu=0,ia=typeof performance=="object"&&performance.now?performance:Date,Y1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Tc(){return Mr||(Y1(a_),Mr=ia.now()+Iu)}function a_(){Mr=0}function jo(){this._call=this._time=this._next=null}jo.prototype=j1.prototype={constructor:jo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Tc():+n)+(t==null?0:+t),!this._next&&Fi!==this&&(Fi?Fi._next=this:Vo=this,Fi=this),this._call=e,this._time=n,Ml()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ml())}};function j1(e,t,n){var r=new jo;return r.restart(e,t,n),r}function o_(){Tc(),++ni;for(var e=Vo,t;e;)(t=Mr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ni}function oh(){Mr=(Yo=ia.now())+Iu,ni=Ni=0;try{o_()}finally{ni=0,s_(),Mr=0}}function u_(){var e=ia.now(),t=e-Yo;t>V1&&(Iu-=t,Yo=e)}function s_(){for(var e,t=Vo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Vo=n);Fi=e,Ml(r)}function Ml(e){if(!ni){Ni&&(Ni=clearTimeout(Ni));var t=e-Mr;t>24?(e<1/0&&(Ni=setTimeout(oh,e-ia.now()-Iu)),Pi&&(Pi=clearInterval(Pi))):(Pi||(Yo=ia.now(),Pi=setInterval(u_,V1)),ni=1,Y1(oh))}}function uh(e,t,n){var r=new jo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var l_=y1("start","end","cancel","interrupt"),c_=[],X1=0,sh=1,xl=2,xo=3,lh=4,Pl=5,Po=6;function Ou(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;f_(e,n,{name:t,index:r,group:i,on:l_,tween:c_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:X1})}function $c(e,t){var n=Qt(e,t);if(n.state>X1)throw new Error("too late; already scheduled");return n}function gn(e,t){var n=Qt(e,t);if(n.state>xo)throw new Error("too late; already running");return n}function Qt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function f_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=j1(a,0,n.time);function a(l){n.state=sh,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==sh)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===xo)return uh(o);d.state===lh?(d.state=Po,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Po,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(uh(function(){n.state===xo&&(n.state=lh,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=xl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===xl){for(n.state=xo,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=Pl,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===Pl&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Po,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function h_(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>xl&&r.state<Pl,r.state=Po,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function d_(e){return this.each(function(){h_(this,e)})}function m_(e,t){var n,r;return function(){var i=gn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function p_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=gn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function b_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Qt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?m_:p_)(n,e,t))}function Dc(e,t,n){var r=e._id;return e.each(function(){var i=gn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Qt(i,r).value[t]}}function Z1(e,t){var n;return(typeof t=="number"?ot:t instanceof vr?_r:(n=vr(t))?(t=n,_r):U1)(e,t)}function g_(e){return function(){this.removeAttribute(e)}}function y_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function w_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function v_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function __(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function M_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function x_(e,t){var n=Nu(e),r=n==="transform"?Jv:Z1;return this.attrTween(e,typeof t=="function"?(n.local?M_:__)(n,r,Dc(this,"attr."+e,t)):t==null?(n.local?y_:g_)(n):(n.local?v_:w_)(n,r,t))}function P_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function S_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function A_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&S_(e,a)),n}return i._value=t,i}function E_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&P_(e,a)),n}return i._value=t,i}function C_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Nu(e);return this.tween(n,(r.local?A_:E_)(r,t))}function k_(e,t){return function(){$c(this,e).delay=+t.apply(this,arguments)}}function T_(e,t){return t=+t,function(){$c(this,e).delay=t}}function $_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?k_:T_)(t,e)):Qt(this.node(),t).delay}function D_(e,t){return function(){gn(this,e).duration=+t.apply(this,arguments)}}function N_(e,t){return t=+t,function(){gn(this,e).duration=t}}function F_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?D_:N_)(t,e)):Qt(this.node(),t).duration}function B_(e,t){if(typeof t!="function")throw new Error;return function(){gn(this,e).ease=t}}function L_(e){var t=this._id;return arguments.length?this.each(B_(t,e)):Qt(this.node(),t).ease}function R_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;gn(this,e).ease=n}}function I_(e){if(typeof e!="function")throw new Error;return this.each(R_(this._id,e))}function O_(e){typeof e!="function"&&(e=v1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Nn(r,this._parents,this._name,this._id)}function q_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Nn(o,this._parents,this._name,this._id)}function G_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function U_(e,t,n){var r,i,a=G_(t)?$c:gn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function z_(e,t){var n=this._id;return arguments.length<2?Qt(this.node(),n).on.on(e):this.each(U_(n,e,t))}function H_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function W_(){return this.on("end.remove",H_(this._id))}function V_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mc(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Ou(l[h],t,n,h,l,Qt(c,n)));return new Nn(a,this._parents,t,n)}function Y_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=w1(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=Qt(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&Ou(d,t,n,p,h,m);a.push(h),o.push(c)}return new Nn(a,o,t,n)}var j_=xa.prototype.constructor;function X_(){return new j_(this._groups,this._parents)}function Z_(e,t){var n,r,i;return function(){var a=ei(this,e),o=(this.style.removeProperty(e),ei(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function K1(e){return function(){this.style.removeProperty(e)}}function K_(e,t,n){var r,i=n+"",a;return function(){var o=ei(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function Q_(e,t,n){var r,i,a;return function(){var o=ei(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),ei(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function J_(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=gn(this,e),l=s.on,c=s.value[a]==null?u||(u=K1(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function e5(e,t,n){var r=(e+="")=="transform"?Qv:Z1;return t==null?this.styleTween(e,Z_(e,r)).on("end.style."+e,K1(e)):typeof t=="function"?this.styleTween(e,Q_(e,r,Dc(this,"style."+e,t))).each(J_(this._id,e)):this.styleTween(e,K_(e,r,t),n).on("end.style."+e,null)}function t5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function n5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&t5(e,o,n)),r}return a._value=t,a}function r5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,n5(e,t,n??""))}function i5(e){return function(){this.textContent=e}}function a5(e){return function(){var t=e(this);this.textContent=t??""}}function o5(e){return this.tween("text",typeof e=="function"?a5(Dc(this,"text",e)):i5(e==null?"":e+""))}function u5(e){return function(t){this.textContent=e.call(this,t)}}function s5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&u5(i)),t}return r._value=e,r}function l5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,s5(e))}function c5(){for(var e=this._name,t=this._id,n=Q1(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=Qt(s,t);Ou(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Nn(r,this._parents,e,n)}function f5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=gn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var h5=0;function Nn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Q1(){return++h5}var vn=xa.prototype;Nn.prototype={constructor:Nn,select:V_,selectAll:Y_,selectChild:vn.selectChild,selectChildren:vn.selectChildren,filter:O_,merge:q_,selection:X_,transition:c5,call:vn.call,nodes:vn.nodes,node:vn.node,size:vn.size,empty:vn.empty,each:vn.each,on:z_,attr:x_,attrTween:C_,style:e5,styleTween:r5,text:o5,textTween:l5,remove:W_,tween:b_,delay:$_,duration:F_,ease:L_,easeVarying:I_,end:f5,[Symbol.iterator]:vn[Symbol.iterator]};function d5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var m5={time:null,delay:0,duration:250,ease:d5};function p5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function b5(e){var t,n;e instanceof Nn?(t=e._id,e=e._name):(t=Q1(),(n=m5).time=Tc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&Ou(s,e,t,l,o,n||p5(s,t));return new Nn(r,this._parents,e,t)}xa.prototype.interrupt=d_;xa.prototype.transition=b5;const Sl=Math.PI,Al=2*Sl,sr=1e-6,g5=Al-sr;function J1(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function y5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return J1;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class em{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?J1:y5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-t,l=i-n,c=o-t,f=u-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>sr)if(!(Math.abs(f*s-l*c)>sr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-u,p=s*s+l*l,g=d*d+m*m,w=Math.sqrt(p),b=Math.sqrt(h),v=a*Math.tan((Sl-Math.acos((p+h-g)/(2*w*b)))/2),y=v/b,M=v/w;Math.abs(y-1)>sr&&this._append`L${t+y*c},${n+y*f}`,this._append`A${a},${a},0,0,${+(f*d>c*m)},${this._x1=t+M*s},${this._y1=n+M*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),l=t+u,c=n+s,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>sr||Math.abs(this._y1-c)>sr)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%Al+Al),h>g5?this._append`A${r},${r},0,1,${f},${t-u},${n-s}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>sr&&this._append`A${r},${r},0,${+(h>=Sl)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Vn(e=3){return new em(+e)}var ch={},ks={},Ts=34,Si=10,$s=13;function tm(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function w5(e,t){var n=tm(e);return function(r,i){return t(n(r),i,e)}}function fh(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function v5(e){return e<0?"-"+pt(-e,6):e>9999?"+"+pt(e,6):pt(e,4)}function _5(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":v5(e.getUTCFullYear())+"-"+pt(e.getUTCMonth()+1,2)+"-"+pt(e.getUTCDate(),2)+(i?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"."+pt(i,3)+"Z":r?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"Z":n||t?"T"+pt(t,2)+":"+pt(n,2)+"Z":"")}function M5(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var d,m,p=i(f,function(g,w){if(d)return d(g,w-1);m=g,d=h?w5(g,h):tm(g)});return p.columns=m||[],p}function i(f,h){var d=[],m=f.length,p=0,g=0,w,b=m<=0,v=!1;f.charCodeAt(m-1)===Si&&--m,f.charCodeAt(m-1)===$s&&--m;function y(){if(b)return ks;if(v)return v=!1,ch;var _,x=p,A;if(f.charCodeAt(x)===Ts){for(;p++<m&&f.charCodeAt(p)!==Ts||f.charCodeAt(++p)===Ts;);return(_=p)>=m?b=!0:(A=f.charCodeAt(p++))===Si?v=!0:A===$s&&(v=!0,f.charCodeAt(p)===Si&&++p),f.slice(x+1,_-1).replace(/""/g,'"')}for(;p<m;){if((A=f.charCodeAt(_=p++))===Si)v=!0;else if(A===$s)v=!0,f.charCodeAt(p)===Si&&++p;else if(A!==n)continue;return f.slice(x,_)}return b=!0,f.slice(x,m)}for(;(w=y())!==ks;){for(var M=[];w!==ch&&w!==ks;)M.push(w),w=y();h&&(M=h(M,g++))==null||d.push(M)}return d}function a(f,h){return f.map(function(d){return h.map(function(m){return c(d[m])}).join(e)})}function o(f,h){return h==null&&(h=fh(f)),[h.map(c).join(e)].concat(a(f,h)).join(`
`)}function u(f,h){return h==null&&(h=fh(f)),a(f,h).join(`
`)}function s(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?_5(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:u,formatRows:s,formatRow:l,formatValue:c}}var x5=M5(","),P5=x5.parse;function S5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Xo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ri(e){return e=Xo(Math.abs(e)),e?e[1]:NaN}function A5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function E5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var C5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function aa(e){if(!(t=C5.exec(e)))throw new Error("invalid format: "+e);var t;return new Nc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}aa.prototype=Nc.prototype;function Nc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Nc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var nm;function T5(e,t){var n=Xo(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(nm=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Xo(e,Math.max(0,t+a-1))[0]}function hh(e,t){var n=Xo(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:S5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hh(e*100,t),r:hh,s:T5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function mh(e){return e}var ph=Array.prototype.map,bh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $5(e){var t=e.grouping===void 0||e.thousands===void 0?mh:A5(ph.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?mh:E5(ph.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function l(f){f=aa(f);var h=f.fill,d=f.align,m=f.sign,p=f.symbol,g=f.zero,w=f.width,b=f.comma,v=f.precision,y=f.trim,M=f.type;M==="n"?(b=!0,M="g"):dh[M]||(v===void 0&&(v=12),y=!0,M="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var _=p==="$"?n:p==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",x=p==="$"?r:/[%p]/.test(M)?o:"",A=dh[M],E=/[defgprs%]/.test(M);v=v===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function F(S){var D=_,O=x,L,C,q;if(M==="c")O=A(S)+O,S="";else{S=+S;var ie=S<0||1/S<0;if(S=isNaN(S)?s:A(Math.abs(S),v),y&&(S=k5(S)),ie&&+S==0&&m!=="+"&&(ie=!1),D=(ie?m==="("?m:u:m==="-"||m==="("?"":m)+D,O=(M==="s"?bh[8+nm/3]:"")+O+(ie&&m==="("?")":""),E){for(L=-1,C=S.length;++L<C;)if(q=S.charCodeAt(L),48>q||q>57){O=(q===46?i+S.slice(L+1):S.slice(L))+O,S=S.slice(0,L);break}}}b&&!g&&(S=t(S,1/0));var te=D.length+S.length+O.length,J=te<w?new Array(w-te+1).join(h):"";switch(b&&g&&(S=t(J+S,J.length?w-O.length:1/0),J=""),d){case"<":S=D+S+O+J;break;case"=":S=D+J+S+O;break;case"^":S=J.slice(0,te=J.length>>1)+D+S+O+J.slice(te);break;default:S=J+D+S+O;break}return a(S)}return F.toString=function(){return f+""},F}function c(f,h){var d=l((f=aa(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(ri(h)/3)))*3,p=Math.pow(10,-m),g=bh[8+m/3];return function(w){return d(p*w)+g}}return{format:l,formatPrefix:c}}var to,gi,rm;D5({thousands:",",grouping:[3],currency:["$",""]});function D5(e){return to=$5(e),gi=to.format,rm=to.formatPrefix,to}function N5(e){return Math.max(0,-ri(Math.abs(e)))}function F5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ri(t)/3)))*3-ri(Math.abs(e)))}function B5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ri(t)-ri(e))+1}var pe=1e-6,im=1e-12,we=Math.PI,Re=we/2,gh=we/4,Ct=we*2,lt=180/we,Le=we/180,ke=Math.abs,yi=Math.atan,Fn=Math.atan2,ye=Math.cos,am=Math.exp,Zo=Math.log,Ds=Math.pow,he=Math.sin,Bt=Math.sign||function(e){return e>0?1:e<0?-1:0},wt=Math.sqrt,Fc=Math.tan;function om(e){return e>1?0:e<-1?we:Math.acos(e)}function qt(e){return e>1?Re:e<-1?-Re:Math.asin(e)}function Lt(){}function Ko(e,t){e&&wh.hasOwnProperty(e.type)&&wh[e.type](e,t)}var yh={Feature:function(e,t){Ko(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Ko(n[r].geometry,t)}},wh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){El(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)El(n[r],t,0)},Polygon:function(e,t){vh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)vh(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Ko(n[r],t)}};function El(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function vh(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)El(e[n],t,1);t.polygonEnd()}function cr(e,t){e&&yh.hasOwnProperty(e.type)?yh[e.type](e,t):Ko(e,t)}function Cl(e){return[Fn(e[1],e[0]),qt(e[2])]}function ii(e){var t=e[0],n=e[1],r=ye(n);return[r*ye(t),r*he(t),he(n)]}function no(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ns(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ro(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kl(e){var t=wt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Tl(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function $l(e,t){return ke(e)>we&&(e-=Math.round(e/Ct)*Ct),[e,t]}$l.invert=$l;function um(e,t,n){return(e%=Ct)?t||n?Tl(Mh(e),xh(t,n)):Mh(e):t||n?xh(t,n):$l}function _h(e){return function(t,n){return t+=e,ke(t)>we&&(t-=Math.round(t/Ct)*Ct),[t,n]}}function Mh(e){var t=_h(e);return t.invert=_h(-e),t}function xh(e,t){var n=ye(e),r=he(e),i=ye(t),a=he(t);function o(u,s){var l=ye(s),c=ye(u)*l,f=he(u)*l,h=he(s),d=h*n+c*r;return[Fn(f*i-d*a,c*n-h*r),qt(d*i+f*a)]}return o.invert=function(u,s){var l=ye(s),c=ye(u)*l,f=he(u)*l,h=he(s),d=h*i-f*a;return[Fn(f*i+h*a,c*n+d*r),qt(d*n-c*r)]},o}function L5(e){e=um(e[0]*Le,e[1]*Le,e.length>2?e[2]*Le:0);function t(n){return n=e(n[0]*Le,n[1]*Le),n[0]*=lt,n[1]*=lt,n}return t.invert=function(n){return n=e.invert(n[0]*Le,n[1]*Le),n[0]*=lt,n[1]*=lt,n},t}function R5(e,t,n,r,i,a){if(n){var o=ye(t),u=he(t),s=r*n;i==null?(i=t+r*Ct,a=t-s/2):(i=Ph(o,i),a=Ph(o,a),(r>0?i<a:i>a)&&(i+=r*Ct));for(var l,c=i;r>0?c>a:c<a;c-=s)l=Cl([o,-u*ye(c),-u*he(c)]),e.point(l[0],l[1])}}function Ph(e,t){t=ii(t),t[0]-=e,kl(t);var n=om(-t[1]);return((-t[2]<0?-n:n)+Ct-pe)%Ct}function sm(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Lt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function So(e,t){return ke(e[0]-t[0])<pe&&ke(e[1]-t[1])<pe}function io(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function lm(e,t,n,r,i){var a=[],o=[],u,s;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,g=m[0],w=m[p],b;if(So(g,w)){if(!g[2]&&!w[2]){for(i.lineStart(),u=0;u<p;++u)i.point((g=m[u])[0],g[1]);i.lineEnd();return}w[0]+=2*pe}a.push(b=new io(g,m,null,!0)),o.push(b.o=new io(g,null,b,!1)),a.push(b=new io(w,m,null,!1)),o.push(b.o=new io(w,null,b,!0))}}),!!a.length){for(o.sort(t),Sh(a),Sh(o),u=0,s=o.length;u<s;++u)o[u].e=n=!n;for(var l=a[0],c,f;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Sh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Fs(e){return ke(e[0])<=we?e[0]:Bt(e[0])*((ke(e[0])+we)%Ct-we)}function I5(e,t){var n=Fs(t),r=t[1],i=he(r),a=[he(n),-ye(n),0],o=0,u=0,s=new gr;i===1?r=Re+pe:i===-1&&(r=-Re-pe);for(var l=0,c=e.length;l<c;++l)if(h=(f=e[l]).length)for(var f,h,d=f[h-1],m=Fs(d),p=d[1]/2+gh,g=he(p),w=ye(p),b=0;b<h;++b,m=y,g=_,w=x,d=v){var v=f[b],y=Fs(v),M=v[1]/2+gh,_=he(M),x=ye(M),A=y-m,E=A>=0?1:-1,F=E*A,S=F>we,D=g*_;if(s.add(Fn(D*E*he(F),w*x+D*ye(F))),o+=S?A+E*Ct:A,S^m>=n^y>=n){var O=Qo(ii(d),ii(v));kl(O);var L=Qo(a,O);kl(L);var C=(S^A>=0?-1:1)*qt(L[2]);(r>C||r===C&&(O[0]||O[1]))&&(u+=S^A>=0?1:-1)}}return(o<-pe||o<pe&&s<-im)^u&1}function cm(e,t,n,r){return function(i){var a=t(i),o=sm(),u=t(o),s=!1,l,c,f,h={point:d,lineStart:p,lineEnd:g,polygonStart:function(){h.point=w,h.lineStart=b,h.lineEnd=v,c=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=p,h.lineEnd=g,c=g1(c);var y=I5(l,r);c.length?(s||(i.polygonStart(),s=!0),lm(c,q5,y,n,i)):y&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(y,M){e(y,M)&&i.point(y,M)}function m(y,M){a.point(y,M)}function p(){h.point=m,a.lineStart()}function g(){h.point=d,a.lineEnd()}function w(y,M){f.push([y,M]),u.point(y,M)}function b(){u.lineStart(),f=[]}function v(){w(f[0][0],f[0][1]),u.lineEnd();var y=u.clean(),M=o.result(),_,x=M.length,A,E,F;if(f.pop(),l.push(f),f=null,!!x){if(y&1){if(E=M[0],(A=E.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),_=0;_<A;++_)i.point((F=E[_])[0],F[1]);i.lineEnd()}return}x>1&&y&2&&M.push(M.pop().concat(M.shift())),c.push(M.filter(O5))}}return h}}function O5(e){return e.length>1}function q5(e,t){return((e=e.x)[0]<0?e[1]-Re-pe:Re-e[1])-((t=t.x)[0]<0?t[1]-Re-pe:Re-t[1])}const Ah=cm(function(){return!0},G5,z5,[-we,-Re]);function G5(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var u=a>0?we:-we,s=ke(a-t);ke(s-we)<pe?(e.point(t,n=(n+o)/2>0?Re:-Re),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(a,n),i=0):r!==u&&s>=we&&(ke(t-r)<pe&&(t-=r*pe),ke(a-u)<pe&&(a-=u*pe),n=U5(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=a,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function U5(e,t,n,r){var i,a,o=he(e-n);return ke(o)>pe?yi((he(t)*(a=ye(r))*he(n)-he(r)*(i=ye(t))*he(e))/(i*a*o)):(t+r)/2}function z5(e,t,n,r){var i;if(e==null)i=n*Re,r.point(-we,i),r.point(0,i),r.point(we,i),r.point(we,0),r.point(we,-i),r.point(0,-i),r.point(-we,-i),r.point(-we,0),r.point(-we,i);else if(ke(e[0]-t[0])>pe){var a=e[0]<t[0]?we:-we;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function H5(e){var t=ye(e),n=6*Le,r=t>0,i=ke(t)>pe;function a(c,f,h,d){R5(d,e,n,h,c,f)}function o(c,f){return ye(c)*ye(f)>t}function u(c){var f,h,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(g,w){var b=[g,w],v,y=o(g,w),M=r?y?0:l(g,w):y?l(g+(g<0?we:-we),w):0;if(!f&&(m=d=y)&&c.lineStart(),y!==d&&(v=s(f,b),(!v||So(f,v)||So(b,v))&&(b[2]=1)),y!==d)p=0,y?(c.lineStart(),v=s(b,f),c.point(v[0],v[1])):(v=s(f,b),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(i&&f&&r^y){var _;!(M&h)&&(_=s(b,f,!0))&&(p=0,r?(c.lineStart(),c.point(_[0][0],_[0][1]),c.point(_[1][0],_[1][1]),c.lineEnd()):(c.point(_[1][0],_[1][1]),c.lineEnd(),c.lineStart(),c.point(_[0][0],_[0][1],3)))}y&&(!f||!So(f,b))&&c.point(b[0],b[1]),f=b,d=y,h=M},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return p|(m&&d)<<1}}}function s(c,f,h){var d=ii(c),m=ii(f),p=[1,0,0],g=Qo(d,m),w=no(g,g),b=g[0],v=w-b*b;if(!v)return!h&&c;var y=t*w/v,M=-t*b/v,_=Qo(p,g),x=ro(p,y),A=ro(g,M);Ns(x,A);var E=_,F=no(x,E),S=no(E,E),D=F*F-S*(no(x,x)-1);if(!(D<0)){var O=wt(D),L=ro(E,(-F-O)/S);if(Ns(L,x),L=Cl(L),!h)return L;var C=c[0],q=f[0],ie=c[1],te=f[1],J;q<C&&(J=C,C=q,q=J);var z=q-C,H=ke(z-we)<pe,T=H||z<pe;if(!H&&te<ie&&(J=ie,ie=te,te=J),T?H?ie+te>0^L[1]<(ke(L[0]-C)<pe?ie:te):ie<=L[1]&&L[1]<=te:z>we^(C<=L[0]&&L[0]<=q)){var G=ro(E,(-F+O)/S);return Ns(G,x),[L,Cl(G)]}}}function l(c,f){var h=r?e:we-e,d=0;return c<-h?d|=1:c>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return cm(o,u,a,r?[0,-e]:[-we,e-we])}function W5(e,t,n,r,i,a){var o=e[0],u=e[1],s=t[0],l=t[1],c=0,f=1,h=s-o,d=l-u,m;if(m=n-o,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=i-o,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}if(m=r-u,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=a-u,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=o+c*h,e[1]=u+c*d),f<1&&(t[0]=o+f*h,t[1]=u+f*d),!0}}}}}var Bi=1e9,ao=-Bi;function fm(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function a(l,c,f,h){var d=0,m=0;if(l==null||(d=o(l,f))!==(m=o(c,f))||s(l,c)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==m);else h.point(c[0],c[1])}function o(l,c){return ke(l[0]-e)<pe?c>0?0:3:ke(l[0]-n)<pe?c>0?2:1:ke(l[1]-t)<pe?c>0?1:0:c>0?3:2}function u(l,c){return s(l.x,c.x)}function s(l,c){var f=o(l,1),h=o(c,1);return f!==h?f-h:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=sm(),h,d,m,p,g,w,b,v,y,M,_,x={point:A,lineStart:D,lineEnd:O,polygonStart:F,polygonEnd:S};function A(C,q){i(C,q)&&c.point(C,q)}function E(){for(var C=0,q=0,ie=d.length;q<ie;++q)for(var te=d[q],J=1,z=te.length,H=te[0],T,G,ne=H[0],ue=H[1];J<z;++J)T=ne,G=ue,H=te[J],ne=H[0],ue=H[1],G<=r?ue>r&&(ne-T)*(r-G)>(ue-G)*(e-T)&&++C:ue<=r&&(ne-T)*(r-G)<(ue-G)*(e-T)&&--C;return C}function F(){c=f,h=[],d=[],_=!0}function S(){var C=E(),q=_&&C,ie=(h=g1(h)).length;(q||ie)&&(l.polygonStart(),q&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),ie&&lm(h,u,C,a,l),l.polygonEnd()),c=l,h=d=m=null}function D(){x.point=L,d&&d.push(m=[]),M=!0,y=!1,b=v=NaN}function O(){h&&(L(p,g),w&&y&&f.rejoin(),h.push(f.result())),x.point=A,y&&c.lineEnd()}function L(C,q){var ie=i(C,q);if(d&&m.push([C,q]),M)p=C,g=q,w=ie,M=!1,ie&&(c.lineStart(),c.point(C,q));else if(ie&&y)c.point(C,q);else{var te=[b=Math.max(ao,Math.min(Bi,b)),v=Math.max(ao,Math.min(Bi,v))],J=[C=Math.max(ao,Math.min(Bi,C)),q=Math.max(ao,Math.min(Bi,q))];W5(te,J,e,t,n,r)?(y||(c.lineStart(),c.point(te[0],te[1])),c.point(J[0],J[1]),ie||c.lineEnd(),_=!1):ie&&(c.lineStart(),c.point(C,q),_=!1)}b=C,v=q,y=ie}return x}}const Dl=e=>e;var Bs=new gr,Nl=new gr,hm,dm,Fl,Bl,En={point:Lt,lineStart:Lt,lineEnd:Lt,polygonStart:function(){En.lineStart=V5,En.lineEnd=j5},polygonEnd:function(){En.lineStart=En.lineEnd=En.point=Lt,Bs.add(ke(Nl)),Nl=new gr},result:function(){var e=Bs/2;return Bs=new gr,e}};function V5(){En.point=Y5}function Y5(e,t){En.point=mm,hm=Fl=e,dm=Bl=t}function mm(e,t){Nl.add(Bl*e-Fl*t),Fl=e,Bl=t}function j5(){mm(hm,dm)}var ai=1/0,Jo=ai,oa=-ai,eu=oa,tu={point:X5,lineStart:Lt,lineEnd:Lt,polygonStart:Lt,polygonEnd:Lt,result:function(){var e=[[ai,Jo],[oa,eu]];return oa=eu=-(Jo=ai=1/0),e}};function X5(e,t){e<ai&&(ai=e),e>oa&&(oa=e),t<Jo&&(Jo=t),t>eu&&(eu=t)}var Ll=0,Rl=0,Li=0,nu=0,ru=0,Ur=0,Il=0,Ol=0,Ri=0,pm,bm,rn,an,Nt={point:xr,lineStart:Eh,lineEnd:Ch,polygonStart:function(){Nt.lineStart=Q5,Nt.lineEnd=J5},polygonEnd:function(){Nt.point=xr,Nt.lineStart=Eh,Nt.lineEnd=Ch},result:function(){var e=Ri?[Il/Ri,Ol/Ri]:Ur?[nu/Ur,ru/Ur]:Li?[Ll/Li,Rl/Li]:[NaN,NaN];return Ll=Rl=Li=nu=ru=Ur=Il=Ol=Ri=0,e}};function xr(e,t){Ll+=e,Rl+=t,++Li}function Eh(){Nt.point=Z5}function Z5(e,t){Nt.point=K5,xr(rn=e,an=t)}function K5(e,t){var n=e-rn,r=t-an,i=wt(n*n+r*r);nu+=i*(rn+e)/2,ru+=i*(an+t)/2,Ur+=i,xr(rn=e,an=t)}function Ch(){Nt.point=xr}function Q5(){Nt.point=e6}function J5(){gm(pm,bm)}function e6(e,t){Nt.point=gm,xr(pm=rn=e,bm=an=t)}function gm(e,t){var n=e-rn,r=t-an,i=wt(n*n+r*r);nu+=i*(rn+e)/2,ru+=i*(an+t)/2,Ur+=i,i=an*e-rn*t,Il+=i*(rn+e),Ol+=i*(an+t),Ri+=i*3,xr(rn=e,an=t)}function ym(e){this._context=e}ym.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ct);break}}},result:Lt};var ql=new gr,Ls,wm,vm,Ii,Oi,ua={point:Lt,lineStart:function(){ua.point=t6},lineEnd:function(){Ls&&_m(wm,vm),ua.point=Lt},polygonStart:function(){Ls=!0},polygonEnd:function(){Ls=null},result:function(){var e=+ql;return ql=new gr,e}};function t6(e,t){ua.point=_m,wm=Ii=e,vm=Oi=t}function _m(e,t){Ii-=e,Oi-=t,ql.add(wt(Ii*Ii+Oi*Oi)),Ii=e,Oi=t}let kh,iu,Th,$h;class Dh{constructor(t){this._append=t==null?Mm:n6(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Th||this._append!==iu){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Th=r,iu=this._append,$h=this._,this._=i}this._+=$h;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Mm(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function n6(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Mm;if(t!==kh){const n=10**t;kh=t,iu=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return iu}function qu(e,t){let n=3,r=4.5,i,a;function o(u){return u&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),cr(u,i(a))),a.result()}return o.area=function(u){return cr(u,i(En)),En.result()},o.measure=function(u){return cr(u,i(ua)),ua.result()},o.bounds=function(u){return cr(u,i(tu)),tu.result()},o.centroid=function(u){return cr(u,i(Nt)),Nt.result()},o.projection=function(u){return arguments.length?(i=u==null?(e=null,Dl):(e=u).stream,o):e},o.context=function(u){return arguments.length?(a=u==null?(t=null,new Dh(n)):new ym(t=u),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(a.pointRadius(+u),+u),o):r},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const s=Math.floor(u);if(!(s>=0))throw new RangeError(`invalid digits: ${u}`);n=s}return t===null&&(a=new Dh(n)),o},o.projection(e).digits(n).context(t)}function Gl(e){return{stream:Gu(e)}}function Gu(e){return function(t){var n=new Ul;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Ul(){}Ul.prototype={constructor:Ul,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Bc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),cr(n,e.stream(tu)),t(tu.result()),r!=null&&e.clipExtent(r),e}function Lc(e,t,n){return Bc(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([u,s])},n)}function xm(e,t,n){return Lc(e,[[0,0],t],n)}function Pm(e,t,n){return Bc(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,u=-a*r[0][1];e.scale(150*a).translate([o,u])},n)}function Sm(e,t,n){return Bc(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],u=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,u])},n)}var Nh=16,r6=ye(30*Le);function Fh(e,t){return+t?a6(e,t):i6(e)}function i6(e){return Gu({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function a6(e,t){function n(r,i,a,o,u,s,l,c,f,h,d,m,p,g){var w=l-r,b=c-i,v=w*w+b*b;if(v>4*t&&p--){var y=o+h,M=u+d,_=s+m,x=wt(y*y+M*M+_*_),A=qt(_/=x),E=ke(ke(_)-1)<pe||ke(a-f)<pe?(a+f)/2:Fn(M,y),F=e(E,A),S=F[0],D=F[1],O=S-r,L=D-i,C=b*O-w*L;(C*C/v>t||ke((w*O+b*L)/v-.5)>.3||o*h+u*d+s*m<r6)&&(n(r,i,a,o,u,s,S,D,E,y/=x,M/=x,_,p,g),g.point(S,D),n(S,D,E,y,M,_,l,c,f,h,d,m,p,g))}}return function(r){var i,a,o,u,s,l,c,f,h,d,m,p,g={point:w,lineStart:b,lineEnd:y,polygonStart:function(){r.polygonStart(),g.lineStart=M},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function w(A,E){A=e(A,E),r.point(A[0],A[1])}function b(){f=NaN,g.point=v,r.lineStart()}function v(A,E){var F=ii([A,E]),S=e(A,E);n(f,h,c,d,m,p,f=S[0],h=S[1],c=A,d=F[0],m=F[1],p=F[2],Nh,r),r.point(f,h)}function y(){g.point=w,r.lineEnd()}function M(){b(),g.point=_,g.lineEnd=x}function _(A,E){v(i=A,E),a=f,o=h,u=d,s=m,l=p,g.point=v}function x(){n(f,h,c,d,m,p,a,o,i,u,s,l,Nh,r),g.lineEnd=y,y()}return g}}var o6=Gu({point:function(e,t){this.stream.point(e*Le,t*Le)}});function u6(e){return Gu({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function s6(e,t,n,r,i){function a(o,u){return o*=r,u*=i,[t+e*o,n-e*u]}return a.invert=function(o,u){return[(o-t)/e*r,(n-u)/e*i]},a}function Bh(e,t,n,r,i,a){if(!a)return s6(e,t,n,r,i);var o=ye(a),u=he(a),s=o*e,l=u*e,c=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function m(p,g){return p*=r,g*=i,[s*p-l*g+t,n-l*p-s*g]}return m.invert=function(p,g){return[r*(c*p-f*g+h),i*(d-f*p-c*g)]},m}function nr(e){return Am(function(){return e})()}function Am(e){var t,n=150,r=480,i=250,a=0,o=0,u=0,s=0,l=0,c,f=0,h=1,d=1,m=null,p=Ah,g=null,w,b,v,y=Dl,M=.5,_,x,A,E,F;function S(C){return A(C[0]*Le,C[1]*Le)}function D(C){return C=A.invert(C[0],C[1]),C&&[C[0]*lt,C[1]*lt]}S.stream=function(C){return E&&F===C?E:E=o6(u6(c)(p(_(y(F=C)))))},S.preclip=function(C){return arguments.length?(p=C,m=void 0,L()):p},S.postclip=function(C){return arguments.length?(y=C,g=w=b=v=null,L()):y},S.clipAngle=function(C){return arguments.length?(p=+C?H5(m=C*Le):(m=null,Ah),L()):m*lt},S.clipExtent=function(C){return arguments.length?(y=C==null?(g=w=b=v=null,Dl):fm(g=+C[0][0],w=+C[0][1],b=+C[1][0],v=+C[1][1]),L()):g==null?null:[[g,w],[b,v]]},S.scale=function(C){return arguments.length?(n=+C,O()):n},S.translate=function(C){return arguments.length?(r=+C[0],i=+C[1],O()):[r,i]},S.center=function(C){return arguments.length?(a=C[0]%360*Le,o=C[1]%360*Le,O()):[a*lt,o*lt]},S.rotate=function(C){return arguments.length?(u=C[0]%360*Le,s=C[1]%360*Le,l=C.length>2?C[2]%360*Le:0,O()):[u*lt,s*lt,l*lt]},S.angle=function(C){return arguments.length?(f=C%360*Le,O()):f*lt},S.reflectX=function(C){return arguments.length?(h=C?-1:1,O()):h<0},S.reflectY=function(C){return arguments.length?(d=C?-1:1,O()):d<0},S.precision=function(C){return arguments.length?(_=Fh(x,M=C*C),L()):wt(M)},S.fitExtent=function(C,q){return Lc(S,C,q)},S.fitSize=function(C,q){return xm(S,C,q)},S.fitWidth=function(C,q){return Pm(S,C,q)},S.fitHeight=function(C,q){return Sm(S,C,q)};function O(){var C=Bh(n,0,0,h,d,f).apply(null,t(a,o)),q=Bh(n,r-C[0],i-C[1],h,d,f);return c=um(u,s,l),x=Tl(t,q),A=Tl(c,x),_=Fh(x,M),L()}function L(){return E=F=null,S}return function(){return t=e.apply(this,arguments),S.invert=t.invert&&D,O()}}function Rc(e){var t=0,n=we/3,r=Am(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Le,n=a[1]*Le):[t*lt,n*lt]},i}function l6(e){var t=ye(e);function n(r,i){return[r*t,he(i)/t]}return n.invert=function(r,i){return[r/t,qt(i*t)]},n}function c6(e,t){var n=he(e),r=(n+he(t))/2;if(ke(r)<pe)return l6(e);var i=1+n*(2*r-n),a=wt(i)/r;function o(u,s){var l=wt(i-2*r*he(s))/r;return[l*he(u*=r),a-l*ye(u)]}return o.invert=function(u,s){var l=a-s,c=Fn(u,ke(l))*Bt(l);return l*r<0&&(c-=we*Bt(u)*Bt(l)),[c/r,qt((i-(u*u+l*l)*r*r)/(2*r))]},o}function au(){return Rc(c6).scale(155.424).center([0,33.6442])}function Em(){return au().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function f6(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function h6(){var e,t,n=Em(),r,i=au().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=au().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,s,l={point:function(h,d){s=[h,d]}};function c(h){var d=h[0],m=h[1];return s=null,r.point(d,m),s||(a.point(d,m),s)||(u.point(d,m),s)}c.invert=function(h){var d=n.scale(),m=n.translate(),p=(h[0]-m[0])/d,g=(h[1]-m[1])/d;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?o:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=f6([n.stream(t=h),i.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),f()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),m=+h[0],p=+h[1];return r=n.translate(h).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(l),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+pe,p+.12*d+pe],[m-.214*d-pe,p+.234*d-pe]]).stream(l),u=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+pe,p+.166*d+pe],[m-.115*d-pe,p+.234*d-pe]]).stream(l),f()},c.fitExtent=function(h,d){return Lc(c,h,d)},c.fitSize=function(h,d){return xm(c,h,d)},c.fitWidth=function(h,d){return Pm(c,h,d)},c.fitHeight=function(h,d){return Sm(c,h,d)};function f(){return e=t=null,c}return c.scale(1070)}function Cm(e){return function(t,n){var r=ye(t),i=ye(n),a=e(r*i);return a===1/0?[2,0]:[a*i*he(t),a*he(n)]}}function Aa(e){return function(t,n){var r=wt(t*t+n*n),i=e(r),a=he(i),o=ye(i);return[Fn(t*a,r*o),qt(r&&n*a/r)]}}var km=Cm(function(e){return wt(2/(1+e))});km.invert=Aa(function(e){return 2*qt(e/2)});function d6(){return nr(km).scale(124.75).clipAngle(180-.001)}var Tm=Cm(function(e){return(e=om(e))&&e/he(e)});Tm.invert=Aa(function(e){return e});function m6(){return nr(Tm).scale(79.4188).clipAngle(180-.001)}function Uu(e,t){return[e,Zo(Fc((Re+t)/2))]}Uu.invert=function(e,t){return[e,2*yi(am(t))-Re]};function p6(){return $m(Uu).scale(961/Ct)}function $m(e){var t=nr(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,u,s,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=u=s=l=null:(o=+f[0][0],u=+f[0][1],s=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,u],[s,l]]};function c(){var f=we*r(),h=t(L5(t.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Uu?[[Math.max(h[0]-f,o),u],[Math.min(h[0]+f,s),l]]:[[o,Math.max(h[1]-f,u)],[s,Math.min(h[1]+f,l)]])}return c()}function oo(e){return Fc((Re+e)/2)}function b6(e,t){var n=ye(e),r=e===t?he(e):Zo(n/ye(t))/Zo(oo(t)/oo(e)),i=n*Ds(oo(e),r)/r;if(!r)return Uu;function a(o,u){i>0?u<-Re+pe&&(u=-Re+pe):u>Re-pe&&(u=Re-pe);var s=i/Ds(oo(u),r);return[s*he(r*o),i-s*ye(r*o)]}return a.invert=function(o,u){var s=i-u,l=Bt(r)*wt(o*o+s*s),c=Fn(o,ke(s))*Bt(s);return s*r<0&&(c-=we*Bt(o)*Bt(s)),[c/r,2*yi(Ds(i/l,1/r))-Re]},a}function g6(){return Rc(b6).scale(109.5).parallels([30,30])}function ou(e,t){return[e,t]}ou.invert=ou;function y6(){return nr(ou).scale(152.63)}function w6(e,t){var n=ye(e),r=e===t?he(e):(n-ye(t))/(t-e),i=n/r+e;if(ke(r)<pe)return ou;function a(o,u){var s=i-u,l=r*o;return[s*he(l),i-s*ye(l)]}return a.invert=function(o,u){var s=i-u,l=Fn(o,ke(s))*Bt(s);return s*r<0&&(l-=we*Bt(o)*Bt(s)),[l/r,i-Bt(r)*wt(o*o+s*s)]},a}function v6(){return Rc(w6).scale(131.154).center([0,13.9389])}var Yi=1.340264,ji=-.081106,Xi=893e-6,Zi=.003796,uu=wt(3)/2,_6=12;function Dm(e,t){var n=qt(uu*he(t)),r=n*n,i=r*r*r;return[e*ye(n)/(uu*(Yi+3*ji*r+i*(7*Xi+9*Zi*r))),n*(Yi+ji*r+i*(Xi+Zi*r))]}Dm.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,u,s;a<_6&&(u=n*(Yi+ji*r+i*(Xi+Zi*r))-t,s=Yi+3*ji*r+i*(7*Xi+9*Zi*r),n-=o=u/s,r=n*n,i=r*r*r,!(ke(o)<im));++a);return[uu*e*(Yi+3*ji*r+i*(7*Xi+9*Zi*r))/ye(n),qt(he(n)/uu)]};function M6(){return nr(Dm).scale(177.158)}function Nm(e,t){var n=ye(t),r=ye(e)*n;return[n*he(e)/r,he(t)/r]}Nm.invert=Aa(yi);function x6(){return nr(Nm).scale(144.049).clipAngle(60)}function Fm(e,t){return[ye(t)*he(e),he(t)]}Fm.invert=Aa(qt);function P6(){return nr(Fm).scale(249.5).clipAngle(90+pe)}function Bm(e,t){var n=ye(t),r=1+ye(e)*n;return[n*he(e)/r,he(t)/r]}Bm.invert=Aa(function(e){return 2*yi(e)});function S6(){return nr(Bm).scale(250).clipAngle(142)}function Lm(e,t){return[Zo(Fc((Re+t)/2)),-e]}Lm.invert=function(e,t){return[-t,2*yi(am(e))-Re]};function A6(){var e=$m(Lm),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function yn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function zu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const zl=Symbol("implicit");function Ic(){var e=new yr,t=[],n=[],r=zl;function i(a){let o=e.get(a);if(o===void 0){if(r!==zl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new yr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Ic(t,n).unknown(r)},yn.apply(i,arguments),i}function Hu(){var e=Ic().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,u=!1,s=0,l=0,c=.5;delete e.unknown;function f(){var h=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,h-s+l*2),u&&(a=Math.floor(a)),m+=(p-m-a*(h-s))*c,o=a*(1-s),u&&(m=Math.round(m),o=Math.round(o));var g=ml(h).map(function(w){return m+a*w});return n(d?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(u=!!h,f()):u},e.padding=function(h){return arguments.length?(s=Math.min(1,l=+h),f()):s},e.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return Hu(t(),[r,i]).round(u).paddingInner(s).paddingOuter(l).align(c)},yn.apply(f(),arguments)}function Rm(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Rm(t())},e}function E6(){return Rm(Hu.apply(null,arguments).paddingInner(1))}function C6(e){return function(){return e}}function Hl(e){return+e}var Lh=[0,1];function Rt(e){return e}function Wl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:C6(isNaN(t)?NaN:.5)}function k6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function T6(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Wl(i,r),a=n(o,a)):(r=Wl(r,i),a=n(a,o)),function(u){return a(r(u))}}function $6(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Wl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var s=Eu(e,u,1,r)-1;return a[s](i[s](u))}}function Ea(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Wu(){var e=Lh,t=Lh,n=Sa,r,i,a,o=Rt,u,s,l;function c(){var h=Math.min(e.length,t.length);return o!==Rt&&(o=k6(e[0],e[h-1])),u=h>2?$6:T6,s=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(s||(s=u(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=u(t,e.map(r),ot)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Hl),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=Cc,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Rt,c()):o!==Rt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Im(){return Wu()(Rt,Rt)}function D6(e,t,n,r){var i=hl(e,t,n),a;switch(r=aa(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=F5(i,o))&&(r.precision=a),rm(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=B5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=N5(i))&&(r.precision=a-(r.type==="%")*2);break}}return gi(r)}function Ca(e){var t=e.domain;return e.ticks=function(n){var r=t();return ta(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return D6(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],u=r[a],s,l,c=10;for(u<o&&(l=o,o=u,u=l,l=i,i=a,a=l);c-- >0;){if(l=Go(o,u,n),l===s)return r[i]=o,r[a]=u,t(r);if(l>0)o=Math.floor(o/l)*l,u=Math.ceil(u/l)*l;else if(l<0)o=Math.ceil(o*l)/l,u=Math.floor(u*l)/l;else break;s=l}return e},e}function Oc(){var e=Im();return e.copy=function(){return Ea(e,Oc())},yn.apply(e,arguments),Ca(e)}function Om(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Hl),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Om(e).unknown(t)},e=arguments.length?Array.from(e,Hl):[0,1],Ca(n)}function qm(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Rh(e){return Math.log(e)}function Ih(e){return Math.exp(e)}function N6(e){return-Math.log(-e)}function F6(e){return-Math.exp(-e)}function B6(e){return isFinite(e)?+("1e"+e):e<0?0:e}function L6(e){return e===10?B6:e===Math.E?Math.exp:t=>Math.pow(e,t)}function R6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Oh(e){return(t,n)=>-e(-t,n)}function Gm(e){const t=e(Rh,Ih),n=t.domain;let r=10,i,a;function o(){return i=R6(r),a=L6(r),n()[0]<0?(i=Oh(i),a=Oh(a),e(N6,F6)):e(Rh,Ih),t}return t.base=function(u){return arguments.length?(r=+u,o()):r},t.domain=function(u){return arguments.length?(n(u),o()):n()},t.ticks=u=>{const s=n();let l=s[0],c=s[s.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),m,p;const g=u==null?10:+u;let w=[];if(!(r%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(m=1;m<r;++m)if(p=h<0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;w.push(p)}}else for(;h<=d;++h)for(m=r-1;m>=1;--m)if(p=h>0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;w.push(p)}w.length*2<g&&(w=ta(l,c,g))}else w=ta(h,d,Math.min(d-h,g)).map(a);return f?w.reverse():w},t.tickFormat=(u,s)=>{if(u==null&&(u=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=aa(s)).precision==null&&(s.trim=!0),s=gi(s)),u===1/0)return s;const l=Math.max(1,r*u/t.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?s(c):""}},t.nice=()=>n(qm(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function Um(){const e=Gm(Wu()).domain([1,10]);return e.copy=()=>Ea(e,Um()).base(e.base()),yn.apply(e,arguments),e}function qh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Gh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zm(e){var t=1,n=e(qh(t),Gh(t));return n.constant=function(r){return arguments.length?e(qh(t=+r),Gh(t)):t},Ca(n)}function Hm(){var e=zm(Wu());return e.copy=function(){return Ea(e,Hm()).constant(e.constant())},yn.apply(e,arguments)}function Uh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function I6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function O6(e){return e<0?-e*e:e*e}function Wm(e){var t=e(Rt,Rt),n=1;function r(){return n===1?e(Rt,Rt):n===.5?e(I6,O6):e(Uh(n),Uh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ca(t)}function Vm(){var e=Wm(Wu());return e.copy=function(){return Ea(e,Vm()).exponent(e.exponent())},yn.apply(e,arguments),e}function Ym(){var e=[],t=[],n=[],r;function i(){var o=0,u=Math.max(1,t.length);for(n=new Array(u-1);++o<u;)n[o-1]=E3(e,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Eu(n,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(yt),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Ym().domain(e).range(t).unknown(r)},yn.apply(a,arguments)}function jm(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Eu(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return jm().domain(e).range(t).unknown(n)},yn.apply(i,arguments)}const Rs=new Date,Is=new Date;function Ye(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const s=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return s;let l;do s.push(l=new Date(+a)),t(a,u),e(a);while(l<a&&a<o);return s},i.filter=a=>Ye(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Rs.setTime(+a),Is.setTime(+o),e(Rs),e(Is),Math.floor(n(Rs,Is))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const su=Ye(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);su.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ye(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):su);su.range;const Tn=1e3,It=Tn*60,$n=It*60,Bn=$n*24,qc=Bn*7,zh=Bn*30,Os=Bn*365,Yt=Ye(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Tn)},(e,t)=>(t-e)/Tn,e=>e.getUTCSeconds());Yt.range;const ka=Ye(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tn)},(e,t)=>{e.setTime(+e+t*It)},(e,t)=>(t-e)/It,e=>e.getMinutes());ka.range;const Ta=Ye(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*It)},(e,t)=>(t-e)/It,e=>e.getUTCMinutes());Ta.range;const $a=Ye(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Tn-e.getMinutes()*It)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getHours());$a.range;const Da=Ye(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getUTCHours());Da.range;const Cr=Ye(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*It)/Bn,e=>e.getDate()-1);Cr.range;const Vu=Ye(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bn,e=>e.getUTCDate()-1);Vu.range;const Yu=Ye(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bn,e=>Math.floor(e/Bn));Yu.range;function kr(e){return Ye(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*It)/qc)}const oi=kr(0),sa=kr(1),Xm=kr(2),Zm=kr(3),Pr=kr(4),Km=kr(5),Qm=kr(6);oi.range;sa.range;Xm.range;Zm.range;Pr.range;Km.range;Qm.range;function Tr(e){return Ye(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/qc)}const ui=Tr(0),la=Tr(1),Jm=Tr(2),ep=Tr(3),Sr=Tr(4),tp=Tr(5),np=Tr(6);ui.range;la.range;Jm.range;ep.range;Sr.range;tp.range;np.range;const Na=Ye(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Na.range;const Fa=Ye(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Fa.range;const Xt=Ye(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Xt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ye(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Xt.range;const Zt=Ye(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ye(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Zt.range;function rp(e,t,n,r,i,a){const o=[[Yt,1,Tn],[Yt,5,5*Tn],[Yt,15,15*Tn],[Yt,30,30*Tn],[a,1,It],[a,5,5*It],[a,15,15*It],[a,30,30*It],[i,1,$n],[i,3,3*$n],[i,6,6*$n],[i,12,12*$n],[r,1,Bn],[r,2,2*Bn],[n,1,qc],[t,1,zh],[t,3,3*zh],[e,1,Os]];function u(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:s(l,c,f),m=d?d.range(l,+c+1):[];return h?m.reverse():m}function s(l,c,f){const h=Math.abs(c-l)/f,d=Au(([,,g])=>g).right(o,h);if(d===o.length)return e.every(hl(l/Os,c/Os,f));if(d===0)return su.every(Math.max(hl(l,c,f),1));const[m,p]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return m.every(p)}return[u,s]}const[q6,ip]=rp(Zt,Fa,ui,Yu,Da,Ta),[G6,U6]=rp(Xt,Na,oi,Cr,$a,ka);function qs(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Gs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ai(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function z6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,l=Ei(i),c=Ci(i),f=Ei(a),h=Ci(a),d=Ei(o),m=Ci(o),p=Ei(u),g=Ci(u),w=Ei(s),b=Ci(s),v={a:ie,A:te,b:J,B:z,c:null,d:Xh,e:Xh,f:h7,g:M7,G:P7,H:l7,I:c7,j:f7,L:ap,m:d7,M:m7,p:H,q:T,Q:Qh,s:Jh,S:p7,u:b7,U:g7,V:y7,w:w7,W:v7,x:null,X:null,y:_7,Y:x7,Z:S7,"%":Kh},y={a:G,A:ne,b:ue,B:ae,c:null,d:Zh,e:Zh,f:k7,g:O7,G:G7,H:A7,I:E7,j:C7,L:up,m:T7,M:$7,p:V,q:Y,Q:Qh,s:Jh,S:D7,u:N7,U:F7,V:B7,w:L7,W:R7,x:null,X:null,y:I7,Y:q7,Z:U7,"%":Kh},M={a:F,A:S,b:D,B:O,c:L,d:Yh,e:Yh,f:a7,g:Vh,G:Wh,H:jh,I:jh,j:t7,L:i7,m:e7,M:n7,p:E,q:J6,Q:u7,s:s7,S:r7,u:j6,U:X6,V:Z6,w:Y6,W:K6,x:C,X:q,y:Vh,Y:Wh,Z:Q6,"%":o7};v.x=_(n,v),v.X=_(r,v),v.c=_(t,v),y.x=_(n,y),y.X=_(r,y),y.c=_(t,y);function _(B,W){return function(j){var $=[],ge=-1,re=0,me=B.length,Me,Ue,nt;for(j instanceof Date||(j=new Date(+j));++ge<me;)B.charCodeAt(ge)===37&&($.push(B.slice(re,ge)),(Ue=Hh[Me=B.charAt(++ge)])!=null?Me=B.charAt(++ge):Ue=Me==="e"?" ":"0",(nt=W[Me])&&(Me=nt(j,Ue)),$.push(Me),re=ge+1);return $.push(B.slice(re,ge)),$.join("")}}function x(B,W){return function(j){var $=Ai(1900,void 0,1),ge=A($,B,j+="",0),re,me;if(ge!=j.length)return null;if("Q"in $)return new Date($.Q);if("s"in $)return new Date($.s*1e3+("L"in $?$.L:0));if(W&&!("Z"in $)&&($.Z=0),"p"in $&&($.H=$.H%12+$.p*12),$.m===void 0&&($.m="q"in $?$.q:0),"V"in $){if($.V<1||$.V>53)return null;"w"in $||($.w=1),"Z"in $?(re=Gs(Ai($.y,0,1)),me=re.getUTCDay(),re=me>4||me===0?la.ceil(re):la(re),re=Vu.offset(re,($.V-1)*7),$.y=re.getUTCFullYear(),$.m=re.getUTCMonth(),$.d=re.getUTCDate()+($.w+6)%7):(re=qs(Ai($.y,0,1)),me=re.getDay(),re=me>4||me===0?sa.ceil(re):sa(re),re=Cr.offset(re,($.V-1)*7),$.y=re.getFullYear(),$.m=re.getMonth(),$.d=re.getDate()+($.w+6)%7)}else("W"in $||"U"in $)&&("w"in $||($.w="u"in $?$.u%7:"W"in $?1:0),me="Z"in $?Gs(Ai($.y,0,1)).getUTCDay():qs(Ai($.y,0,1)).getDay(),$.m=0,$.d="W"in $?($.w+6)%7+$.W*7-(me+5)%7:$.w+$.U*7-(me+6)%7);return"Z"in $?($.H+=$.Z/100|0,$.M+=$.Z%100,Gs($)):qs($)}}function A(B,W,j,$){for(var ge=0,re=W.length,me=j.length,Me,Ue;ge<re;){if($>=me)return-1;if(Me=W.charCodeAt(ge++),Me===37){if(Me=W.charAt(ge++),Ue=M[Me in Hh?W.charAt(ge++):Me],!Ue||($=Ue(B,j,$))<0)return-1}else if(Me!=j.charCodeAt($++))return-1}return $}function E(B,W,j){var $=l.exec(W.slice(j));return $?(B.p=c.get($[0].toLowerCase()),j+$[0].length):-1}function F(B,W,j){var $=d.exec(W.slice(j));return $?(B.w=m.get($[0].toLowerCase()),j+$[0].length):-1}function S(B,W,j){var $=f.exec(W.slice(j));return $?(B.w=h.get($[0].toLowerCase()),j+$[0].length):-1}function D(B,W,j){var $=w.exec(W.slice(j));return $?(B.m=b.get($[0].toLowerCase()),j+$[0].length):-1}function O(B,W,j){var $=p.exec(W.slice(j));return $?(B.m=g.get($[0].toLowerCase()),j+$[0].length):-1}function L(B,W,j){return A(B,t,W,j)}function C(B,W,j){return A(B,n,W,j)}function q(B,W,j){return A(B,r,W,j)}function ie(B){return o[B.getDay()]}function te(B){return a[B.getDay()]}function J(B){return s[B.getMonth()]}function z(B){return u[B.getMonth()]}function H(B){return i[+(B.getHours()>=12)]}function T(B){return 1+~~(B.getMonth()/3)}function G(B){return o[B.getUTCDay()]}function ne(B){return a[B.getUTCDay()]}function ue(B){return s[B.getUTCMonth()]}function ae(B){return u[B.getUTCMonth()]}function V(B){return i[+(B.getUTCHours()>=12)]}function Y(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var W=_(B+="",v);return W.toString=function(){return B},W},parse:function(B){var W=x(B+="",!1);return W.toString=function(){return B},W},utcFormat:function(B){var W=_(B+="",y);return W.toString=function(){return B},W},utcParse:function(B){var W=x(B+="",!0);return W.toString=function(){return B},W}}}var Hh={"-":"",_:" ",0:"0"},tt=/^\s*\d+/,H6=/^%/,W6=/[\\^$*+?|[\]().{}]/g;function Se(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function V6(e){return e.replace(W6,"\\$&")}function Ei(e){return new RegExp("^(?:"+e.map(V6).join("|")+")","i")}function Ci(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Y6(e,t,n){var r=tt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function j6(e,t,n){var r=tt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function X6(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Z6(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function K6(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Wh(e,t,n){var r=tt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Vh(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Q6(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function J6(e,t,n){var r=tt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function e7(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Yh(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function t7(e,t,n){var r=tt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function jh(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function n7(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function r7(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function i7(e,t,n){var r=tt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function a7(e,t,n){var r=tt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function o7(e,t,n){var r=H6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function u7(e,t,n){var r=tt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function s7(e,t,n){var r=tt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Xh(e,t){return Se(e.getDate(),t,2)}function l7(e,t){return Se(e.getHours(),t,2)}function c7(e,t){return Se(e.getHours()%12||12,t,2)}function f7(e,t){return Se(1+Cr.count(Xt(e),e),t,3)}function ap(e,t){return Se(e.getMilliseconds(),t,3)}function h7(e,t){return ap(e,t)+"000"}function d7(e,t){return Se(e.getMonth()+1,t,2)}function m7(e,t){return Se(e.getMinutes(),t,2)}function p7(e,t){return Se(e.getSeconds(),t,2)}function b7(e){var t=e.getDay();return t===0?7:t}function g7(e,t){return Se(oi.count(Xt(e)-1,e),t,2)}function op(e){var t=e.getDay();return t>=4||t===0?Pr(e):Pr.ceil(e)}function y7(e,t){return e=op(e),Se(Pr.count(Xt(e),e)+(Xt(e).getDay()===4),t,2)}function w7(e){return e.getDay()}function v7(e,t){return Se(sa.count(Xt(e)-1,e),t,2)}function _7(e,t){return Se(e.getFullYear()%100,t,2)}function M7(e,t){return e=op(e),Se(e.getFullYear()%100,t,2)}function x7(e,t){return Se(e.getFullYear()%1e4,t,4)}function P7(e,t){var n=e.getDay();return e=n>=4||n===0?Pr(e):Pr.ceil(e),Se(e.getFullYear()%1e4,t,4)}function S7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Se(t/60|0,"0",2)+Se(t%60,"0",2)}function Zh(e,t){return Se(e.getUTCDate(),t,2)}function A7(e,t){return Se(e.getUTCHours(),t,2)}function E7(e,t){return Se(e.getUTCHours()%12||12,t,2)}function C7(e,t){return Se(1+Vu.count(Zt(e),e),t,3)}function up(e,t){return Se(e.getUTCMilliseconds(),t,3)}function k7(e,t){return up(e,t)+"000"}function T7(e,t){return Se(e.getUTCMonth()+1,t,2)}function $7(e,t){return Se(e.getUTCMinutes(),t,2)}function D7(e,t){return Se(e.getUTCSeconds(),t,2)}function N7(e){var t=e.getUTCDay();return t===0?7:t}function F7(e,t){return Se(ui.count(Zt(e)-1,e),t,2)}function sp(e){var t=e.getUTCDay();return t>=4||t===0?Sr(e):Sr.ceil(e)}function B7(e,t){return e=sp(e),Se(Sr.count(Zt(e),e)+(Zt(e).getUTCDay()===4),t,2)}function L7(e){return e.getUTCDay()}function R7(e,t){return Se(la.count(Zt(e)-1,e),t,2)}function I7(e,t){return Se(e.getUTCFullYear()%100,t,2)}function O7(e,t){return e=sp(e),Se(e.getUTCFullYear()%100,t,2)}function q7(e,t){return Se(e.getUTCFullYear()%1e4,t,4)}function G7(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Sr(e):Sr.ceil(e),Se(e.getUTCFullYear()%1e4,t,4)}function U7(){return"+0000"}function Kh(){return"%"}function Qh(e){return+e}function Jh(e){return Math.floor(+e/1e3)}var Lr,Gc,Ba;z7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function z7(e){return Lr=z6(e),Gc=Lr.format,Lr.parse,Ba=Lr.utcFormat,Lr.utcParse,Lr}function H7(e){return new Date(e)}function W7(e){return e instanceof Date?+e:+new Date(+e)}function Uc(e,t,n,r,i,a,o,u,s,l){var c=Im(),f=c.invert,h=c.domain,d=l(".%L"),m=l(":%S"),p=l("%I:%M"),g=l("%I %p"),w=l("%a %d"),b=l("%b %d"),v=l("%B"),y=l("%Y");function M(_){return(s(_)<_?d:u(_)<_?m:o(_)<_?p:a(_)<_?g:r(_)<_?i(_)<_?w:b:n(_)<_?v:y)(_)}return c.invert=function(_){return new Date(f(_))},c.domain=function(_){return arguments.length?h(Array.from(_,W7)):h().map(H7)},c.ticks=function(_){var x=h();return e(x[0],x[x.length-1],_??10)},c.tickFormat=function(_,x){return x==null?M:l(x)},c.nice=function(_){var x=h();return(!_||typeof _.range!="function")&&(_=t(x[0],x[x.length-1],_??10)),_?h(qm(x,_)):c},c.copy=function(){return Ea(c,Uc(e,t,n,r,i,a,o,u,s,l))},c}function V7(){return yn.apply(Uc(G6,U6,Xt,Na,oi,Cr,$a,ka,Yt,Gc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Y7(){return yn.apply(Uc(q6,ip,Zt,Fa,ui,Vu,Da,Ta,Yt,Ba).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ju(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Xu(){var e=0,t=.5,n=1,r=1,i,a,o,u,s,l=Rt,c,f=!1,h;function d(p){return isNaN(p=+p)?h:(p=.5+((p=+c(p))-a)*(r*p<r*a?u:s),l(f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),a=c(t=+t),o=c(n=+n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(l=p,d):l};function m(p){return function(g){var w,b,v;return arguments.length?([w,b,v]=g,l=Ru(p,[w,b,v]),d):[l(0),l(.5),l(1)]}}return d.range=m(Sa),d.rangeRound=m(Cc),d.unknown=function(p){return arguments.length?(h=p,d):h},function(p){return c=p,i=p(e),a=p(t),o=p(n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function lp(){var e=Ca(Xu()(Rt));return e.copy=function(){return ju(e,lp())},zu.apply(e,arguments)}function cp(){var e=Gm(Xu()).domain([.1,1,10]);return e.copy=function(){return ju(e,cp()).base(e.base())},zu.apply(e,arguments)}function fp(){var e=zm(Xu());return e.copy=function(){return ju(e,fp()).constant(e.constant())},zu.apply(e,arguments)}function hp(){var e=Wm(Xu());return e.copy=function(){return ju(e,hp()).exponent(e.exponent())},zu.apply(e,arguments)}function be(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const j7=be("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),X7=be("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Z7=be("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),K7=be("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Q7=be("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),J7=be("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),e4=be("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),t4=be("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),n4=be("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),r4=be("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),$e=e=>Uv(e[e.length-1]);var dp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(be);const mp=$e(dp);var pp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(be);const bp=$e(pp);var gp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(be);const yp=$e(gp);var wp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(be);const vp=$e(wp);var Vl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(be);const lu=$e(Vl);var _p=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(be);const Mp=$e(_p);var Yl=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(be);const cu=$e(Yl);var xp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(be);const Pp=$e(xp);var Sp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(be);const Ap=$e(Sp);var Ep=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(be);const Cp=$e(Ep);var kp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(be);const Tp=$e(kp);var $p=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(be);const Dp=$e($p);var Np=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(be);const Fp=$e(Np);var Bp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(be);const Lp=$e(Bp);var Rp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(be);const Ip=$e(Rp);var Op=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(be);const qp=$e(Op);var Gp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(be);const Up=$e(Gp);var zp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(be);const Hp=$e(zp);var Wp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(be);const Vp=$e(Wp);var Yp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(be);const jp=$e(Yp);var Xp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(be);const Zp=$e(Xp);var Kp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(be);const Qp=$e(Kp);var Jp=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(be);const eb=$e(Jp);var tb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(be);const nb=$e(tb);var rb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(be);const ib=$e(rb);var ab=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(be);const ob=$e(ab);var ub=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(be);const sb=$e(ub);function lb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const cb=kc(mn(300,.5,0),mn(-240,.5,1));var fb=kc(mn(-100,.75,.35),mn(80,1.5,.8)),hb=kc(mn(260,.75,.35),mn(80,1.5,.8)),uo=mn();function db(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return uo.h=360*e-100,uo.s=1.5-1.5*t,uo.l=.8-.9*t,uo+""}var so=Kn(),i4=Math.PI/3,a4=Math.PI*2/3;function mb(e){var t;return e=(.5-e)*Math.PI,so.r=255*(t=Math.sin(e))*t,so.g=255*(t=Math.sin(e+i4))*t,so.b=255*(t=Math.sin(e+a4))*t,so+""}function pb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Zu(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const bb=Zu(be("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var gb=Zu(be("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),yb=Zu(be("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),wb=Zu(be("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ke(e){return function(){return e}}const vb=Math.cos,zc=Math.min,fu=Math.sin,je=Math.sqrt,ed=1e-12,hu=Math.PI,Ku=2*hu;function _b(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new em(t)}function Mb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xb(e){this._context=e}xb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function La(e){return new xb(e)}function Pb(e){return e[0]}function Sb(e){return e[1]}function Ab(e,t){var n=Ke(!0),r=null,i=La,a=null,o=_b(u);e=typeof e=="function"?e:e===void 0?Pb:Ke(e),t=typeof t=="function"?t:t===void 0?Sb:Ke(t);function u(s){var l,c=(s=Mb(s)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=c;++l)!(l<c&&n(f=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,l,s),+t(f,l,s));if(d)return a=null,d+""||null}return u.x=function(s){return arguments.length?(e=typeof s=="function"?s:Ke(+s),u):e},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:Ke(+s),u):t},u.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ke(!!s),u):n},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}function o4(e,t,n){var r=null,i=Ke(!0),a=null,o=La,u=null,s=_b(l);e=typeof e=="function"?e:e===void 0?Pb:Ke(+e),t=typeof t=="function"?t:Ke(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Sb:Ke(+n);function l(f){var h,d,m,p=(f=Mb(f)).length,g,w=!1,b,v=new Array(p),y=new Array(p);for(a==null&&(u=o(b=s())),h=0;h<=p;++h){if(!(h<p&&i(g=f[h],h,f))===w)if(w=!w)d=h,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),m=h-1;m>=d;--m)u.point(v[m],y[m]);u.lineEnd(),u.areaEnd()}w&&(v[h]=+e(g,h,f),y[h]=+t(g,h,f),u.point(r?+r(g,h,f):v[h],n?+n(g,h,f):y[h]))}if(b)return u=null,b+""||null}function c(){return Ab().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ke(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ke(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ke(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ke(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ke(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(u=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=u=null:u=o(a=f),l):a},l}class Eb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function u4(e){return new Eb(e,!0)}function s4(e){return new Eb(e,!1)}const l4=je(3),Cb={draw(e,t){const n=je(t+zc(t/28,.75))*.59436,r=n/2,i=r*l4;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},ca={draw(e,t){const n=je(t/hu);e.moveTo(n,0),e.arc(0,0,n,0,Ku)}},kb={draw(e,t){const n=je(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Tb=je(1/3),c4=Tb*2,$b={draw(e,t){const n=je(t/c4),r=n*Tb;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Db={draw(e,t){const n=je(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Nb={draw(e,t){const n=je(t-zc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Fb={draw(e,t){const n=je(t),r=-n/2;e.rect(r,r,n,n)}},Bb={draw(e,t){const n=je(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},f4=.8908130915292852,Lb=fu(hu/10)/fu(7*hu/10),h4=fu(Ku/10)*Lb,d4=-vb(Ku/10)*Lb,Rb={draw(e,t){const n=je(t*f4),r=h4*n,i=d4*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Ku*a/5,u=vb(o),s=fu(o);e.lineTo(s*n,-u*n),e.lineTo(u*r-s*i,s*r+u*i)}e.closePath()}},Us=je(3),Ib={draw(e,t){const n=-je(t/(Us*3));e.moveTo(0,n*2),e.lineTo(-Us*n,-n),e.lineTo(Us*n,-n),e.closePath()}},m4=je(3),Ob={draw(e,t){const n=je(t)*.6824,r=n/2,i=n*m4/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},$t=-.5,Dt=je(3)/2,jl=1/je(12),p4=(jl/2+1)*3,qb={draw(e,t){const n=je(t/p4),r=n/2,i=n*jl,a=r,o=n*jl+n,u=-a,s=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,s),e.lineTo($t*r-Dt*i,Dt*r+$t*i),e.lineTo($t*a-Dt*o,Dt*a+$t*o),e.lineTo($t*u-Dt*s,Dt*u+$t*s),e.lineTo($t*r+Dt*i,$t*i-Dt*r),e.lineTo($t*a+Dt*o,$t*o-Dt*a),e.lineTo($t*u+Dt*s,$t*s-Dt*u),e.closePath()}},Gb={draw(e,t){const n=je(t-zc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},b4=[ca,kb,$b,Fb,Rb,Ib,qb],g4=[ca,Nb,Gb,Ob,Cb,Bb,Db];function Qn(){}function du(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Qu(e){this._context=e}Qu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:du(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:du(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y4(e){return new Qu(e)}function Ub(e){this._context=e}Ub.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:du(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w4(e){return new Ub(e)}function zb(e){this._context=e}zb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:du(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v4(e){return new zb(e)}function Hb(e,t){this._basis=new Qu(e),this._beta=t}Hb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,u=-1,s;++u<=n;)s=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+s*a),this._beta*t[u]+(1-this._beta)*(i+s*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const _4=function e(t){function n(r){return t===1?new Qu(r):new Hb(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function mu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Hc(e,t){this._context=e,this._k=(1-t)/6}Hc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:mu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:mu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const M4=function e(t){function n(r){return new Hc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Wc(e,t){this._context=e,this._k=(1-t)/6}Wc.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:mu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const x4=function e(t){function n(r){return new Wc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Vc(e,t){this._context=e,this._k=(1-t)/6}Vc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:mu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P4=function e(t){function n(r){return new Vc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Yc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>ed){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>ed){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Wb(e,t){this._context=e,this._alpha=t}Wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Yc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S4=function e(t){function n(r){return t?new Wb(r,t):new Hc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Vb(e,t){this._context=e,this._alpha=t}Vb.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Yc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A4=function e(t){function n(r){return t?new Vb(r,t):new Wc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Yb(e,t){this._context=e,this._alpha=t}Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Yc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E4=function e(t){function n(r){return t?new Yb(r,t):new Vc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function jb(e){this._context=e}jb.prototype={areaStart:Qn,areaEnd:Qn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function C4(e){return new jb(e)}function td(e){return e<0?-1:1}function nd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(td(a)+td(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function rd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function zs(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function pu(e){this._context=e}pu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zs(this,this._t0,rd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zs(this,rd(this,n=nd(this,e,t)),n);break;default:zs(this,this._t0,n=nd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Xb(e){this._context=new Zb(e)}(Xb.prototype=Object.create(pu.prototype)).point=function(e,t){pu.prototype.point.call(this,t,e)};function Zb(e){this._context=e}Zb.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function k4(e){return new pu(e)}function T4(e){return new Xb(e)}function Kb(e){this._context=e}Kb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=id(e),i=id(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function id(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function $4(e){return new Kb(e)}function Ju(e,t){this._context=e,this._t=t}Ju.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function D4(e){return new Ju(e,.5)}function N4(e){return new Ju(e,0)}function F4(e){return new Ju(e,1)}function qi(e,t,n){this.k=e,this.x=t,this.y=n}qi.prototype={constructor:qi,scale:function(e){return e===1?this:new qi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};qi.prototype;const B4="modulepreload",L4=function(e){return"/rhythm-vis/"+e},ad={},Rr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=L4(o),o in ad)return;ad[o]=!0;const u=o.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.href===o&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":B4,u||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),u)return new Promise((f,h)=>{c.addEventListener("load",f),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function R4(e){if(e){if(e=new Uint8Array(e.buffer||e),O4(e))return"wav";if(I4(e))return"mp3";if(G4(e))return"flac";if(U4(e))return"m4a";if(z4(e))return"opus";if(q4(e))return"oga";if(H4(e))return"qoa"}}function I4(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function O4(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function q4(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function G4(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function U4(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function z4(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function H4(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let W4=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],a=r,o=0;a<this.length&&o<t.length;a++,o++)t[o]=i[a]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var a=r,o=0;a<this.length&&o<t.length;a++,o++)i[a]=t[o]}};const V4=globalThis.AudioBuffer||W4;async function Y4(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=R4(e);if(!t)throw Error("Cannot detect audio format");if(!mt[t])throw Error("Missing decoder for "+t+" format");return mt[t](e)}const mt={async oga(e){let{decoder:t}=mt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Rr(()=>import("./index-BtgXmuIM.js"),__vite__mapDeps([0,1,2]));await(mt.oga.decoder=t=new n).ready}return e&&Ir(await t.decodeFile(e))},async mp3(e){let{decoder:t}=mt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Rr(()=>import("./index-CCbttyT8.js"),__vite__mapDeps([3,2]));await(mt.mp3.decoder=t=new n).ready}return e&&Ir(await t.decode(e))},async flac(e){let{decoder:t}=mt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Rr(()=>import("./index-DKrb-GDM.js"),__vite__mapDeps([4,1,2]));await(mt.flac.decoder=t=new n).ready}return e&&Ir(await t.decode(e))},async opus(e){let{decoder:t}=mt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Rr(()=>import("./index-B0pw5zsw.js"),__vite__mapDeps([5,1,2]));await(mt.opus.decoder=t=new n).ready}return e&&Ir(await t.decodeFile(e))},async wav(e){let{decode:t}=mt.wav;if(!t){let n=await Rr(()=>import("./index-BzNqrfvN.js").then(r=>r.i),__vite__mapDeps([]));t=mt.wav.decode=n.default.decode}return e&&Ir(await t(e))},async qoa(e){let{decode:t}=mt.qoa;return t||(mt.qoa.decode=t=(await Rr(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),e&&Ir(await t(e))}};function Ir({channelData:e,sampleRate:t}){let n=new V4({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var j4=X4;function X4(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,a=i===3?32:16,o;return n===2?o=K4(e.getChannelData(0),e.getChannelData(1)):o=e.getChannelData(0),Z4(o,i,r,n,a)}function Z4(e,t,n,r,i){var a=i/8,o=r*a,u=new ArrayBuffer(44+e.length*a),s=new DataView(u);return lo(s,0,"RIFF"),s.setUint32(4,36+e.length*a,!0),lo(s,8,"WAVE"),lo(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,t,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*o,!0),s.setUint16(32,o,!0),s.setUint16(34,i,!0),lo(s,36,"data"),s.setUint32(40,e.length*a,!0),t===1?J4(s,44,e):Q4(s,44,e),u}function K4(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=t[a],a++;return r}function Q4(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function J4(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function lo(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const e9=Qb(j4);async function Jb(e){const n=await(await fetch(e)).arrayBuffer();return await Y4(n)}function t9(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),a=new Float32Array(Math.ceil(r*e.sampleRate));for(const o of t){const u=Math.round(o*e.sampleRate);let s=1;for(let l=0;l<i.length;++l)s=Math.max(0,s-2/40100),a[u+l]=i[l]*s}return a}function jc(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([e9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function n9(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function Xl(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const a=i.audioBuffer.getChannelData(0);for(const o of i.times){const u=Math.round(o*n);for(let s=0;s<a.length;++s)r[u+s]=Math.min(r[u+s]+a[s],1)}}return r}function Jn(e){return e!=null&&!Number.isNaN(e)}function Kt(e,t){return+Jn(t)-+Jn(e)||yt(e,t)}function bu(e,t){return+Jn(t)-+Jn(e)||Ma(e,t)}function Xc(e){return e!=null&&`${e}`!=""}function eg(e){return isFinite(e)?e:NaN}function es(e){return e>0&&isFinite(e)?e:NaN}function Zc(e){return e<0&&isFinite(e)?e:NaN}function r9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${i9(e.getUTCFullYear())}-${An(e.getUTCMonth()+1,2)}-${An(e.getUTCDate(),2)}${n||r||i||a?`T${An(n,2)}:${An(r,2)}${i||a?`:${An(i,2)}${a?`.${An(a,3)}`:""}`:""}Z`:""}`}function i9(e){return e<0?`-${An(-e,6)}`:e>9999?`+${An(e,6)}`:An(e,4)}function An(e,t){return`${e}`.padStart(t,"0")}const a9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function tg(e,t){return a9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const zr=1e3,Yn=zr*60,jn=Yn*60,pn=jn*24,nn=pn*7,br=pn*30,Hn=pn*365,Hs=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",zr],["5 seconds",5*zr],["15 seconds",15*zr],["30 seconds",30*zr],["minute",Yn],["5 minutes",5*Yn],["15 minutes",15*Yn],["30 minutes",30*Yn],["hour",jn],["3 hours",3*jn],["6 hours",6*jn],["12 hours",12*jn],["day",pn],["2 days",2*pn],["week",nn],["2 weeks",2*nn],["month",br],["3 months",3*br],["6 months",6*br],["year",Hn],["2 years",2*Hn],["5 years",5*Hn],["10 years",10*Hn],["20 years",20*Hn],["50 years",50*Hn],["100 years",100*Hn]],Kc=new Map([["second",zr],["minute",Yn],["hour",jn],["day",pn],["monday",nn],["tuesday",nn],["wednesday",nn],["thursday",nn],["friday",nn],["saturday",nn],["sunday",nn],["week",nn],["month",br],["year",Hn]]),ng=new Map([["second",Yt],["minute",ka],["hour",$a],["day",Cr],["monday",sa],["tuesday",Xm],["wednesday",Zm],["thursday",Pr],["friday",Km],["saturday",Qm],["sunday",oi],["week",oi],["month",Na],["year",Xt]]),Qc=new Map([["second",Yt],["minute",Ta],["hour",Da],["day",Yu],["monday",la],["tuesday",Jm],["wednesday",ep],["thursday",Sr],["friday",tp],["saturday",np],["sunday",ui],["week",ui],["month",Fa],["year",Zt]]),Ra=Symbol("intervalDuration"),ts=Symbol("intervalType");for(const[e,t]of ng)t[Ra]=Kc.get(e),t[ts]="time";for(const[e,t]of Qc)t[Ra]=Kc.get(e),t[ts]="utc";const Gi=[["year",Zt,"utc"],["month",Fa,"utc"],["day",Yu,"utc",6*br],["hour",Da,"utc",3*pn],["minute",Ta,"utc",6*jn],["second",Yt,"utc",30*Yn]],Ao=[["year",Xt,"time"],["month",Na,"time"],["day",Cr,"time",6*br],["hour",$a,"time",3*pn],["minute",ka,"time",6*jn],["second",Yt,"time",30*Yn]],o9=[Gi[0],Ao[0],Gi[1],Ao[1],Gi[2],Ao[2],...Gi.slice(3)];function rg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=Qc.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function ig(e){return ag(rg(e),"time")}function Jc(e){return ag(rg(e),"utc")}function ag([e,t],n){let r=(n==="time"?ng:Qc).get(e);return t>1&&(r=r.every(t),r[Ra]=Kc.get(e)*t,r[ts]=n),r}function od(e,t){if(!(t>1))return;const n=e[Ra];if(!Hs.some(([,i])=>i===n)||n%pn===0&&pn<n&&n<br)return;const[r]=Hs[Au(([,i])=>Math.log(i)).center(Hs,Math.log(n*t))];return(e[ts]==="time"?ig:Jc)(r)}function ud(e,t,n){const r=t==="time"?Gc:Ba;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=u9(n);switch(e){case"millisecond":return Or(r(".%L"),r(":%M:%S"),i);case"second":return Or(r(":%S"),r("%-I:%M"),i);case"minute":return Or(r("%-I:%M"),r("%p"),i);case"hour":return Or(r("%-I %p"),r("%b %-d"),i);case"day":return Or(r("%-d"),r("%b"),i);case"month":return Or(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function u9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function s9(e){return e==="time"?Ao:e==="utc"?Gi:o9}function l9(e,t,n){const r=Ot($3(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return ud("millisecond","utc",n);for(const[i,a,o,u]of s9(e)){if(r>u||i==="hour"&&!r)break;if(t.every(s=>a.floor(s)>=s))return ud(i,o,n)}}function Or(e,t,n){return(r,i,a)=>{const o=e(r,i),u=t(r,i),s=i-li(a);return i!==s&&a[s]!==void 0&&u===t(a[s],s)?o:n(o,u)}}const fa=Object.getPrototypeOf(Uint8Array),c9=Object.prototype.toString,og=Symbol("reindex");function et(e,t,n){const r=typeof t;return r==="string"?sd(e,ug(t),n):r==="function"?sd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ve(e,Ia(t),n):typeof(t==null?void 0:t.transform)=="function"?ld(t.transform(e),n):f9(ld(t,n),e==null?void 0:e[og])}function f9(e,t){return t?rf(e,t):e}function sd(e,t,n){return Ve(e,(n==null?void 0:n.prototype)instanceof fa?h9(t):t,n)}function ld(e,t){return t===void 0?kt(e):e instanceof t?e:t.prototype instanceof fa&&!(e instanceof fa)?t.from(e,tf):t.from(e)}function h9(e){return(t,n)=>tf(e(t,n))}const Eo=[null],ug=e=>t=>t[e],ns={transform:In},st={transform:e=>e},d9=()=>1,m9=()=>!0,ct=e=>e==null?e:`${e}`,Fe=e=>e==null?e:+e,ef=e=>e?e[0]:void 0,Zl=e=>e?e[1]:void 0,Ia=e=>()=>e;function p9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Qr(n,t,r)}function un(e){return e instanceof fa?e:Ve(e,tf,Float64Array)}function tf(e){return e==null?NaN:Number(e)}function b9(e){return Ve(e,sg)}function sg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?tg(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Ln(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:is(e)?[void 0,e]:[e,void 0]}function ft(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function lg(e,t,n){if(e!=null)return Jt(e,t,n)}function Jt(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function kt(e){return e==null||e instanceof Array||e instanceof fa?e:Array.from(e)}function Ve(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function ha(e,t=Array){return e instanceof t?e.slice():t.from(e)}function g9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function cg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function y9(e){return g9(e)||cg(e)||e.interval!==void 0}function rr(e){return(e==null?void 0:e.toString)===c9}function Kl(e){return rr(e)&&(e.type!==void 0||e.domain!==void 0)}function rs(e){return rr(e)&&typeof e.transform!="function"}function si(e){return rs(e)&&e.value===void 0&&e.channel===void 0}function w9(e,t,n,r=st){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function Oa(e,t){return e===void 0&&t===void 0?[ef,Zl]:[e,t]}function nf({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Ln(t)),e===void 0&&([e]=Ln(n)),e}function In(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function rf(e,t){return Ve(t,n=>e[n],e.constructor)}function v9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function dr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function gu(e){let t;return[{transform:()=>t,label:$r(e)},n=>t=n]}function Pn(e){return e==null?[e]:gu(e)}function $r(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function Ql(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return vt(r)||vt(i)?Ve(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Ve(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function fg(e,t){const n=hg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ve(e,n):e}function hg(e,t){const n=af(e,t);return n&&(r=>Jn(r)?n.floor(r):r)}function af(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>ml(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>ml(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?ig:Jc)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function wi(e,t){if(e=af(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function M9(e,t){if(e=wi(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function x9(e){return Hr(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Hr(e){return typeof(e==null?void 0:e.range)=="function"}function qa(e){return e===void 0||rs(e)?e:{value:e}}function P9(e){return e==null?null:{transform:t=>et(t,e,Float64Array),label:$r(e)}}function ir(e){return e&&typeof e[Symbol.iterator]=="function"}function dg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function cd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function vt(e){for(const t of e)if(t!=null)return t instanceof Date}function S9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&tg(t)}function A9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function E9(e){for(const t of e)if(t!=null)return typeof t=="number"}function Ws(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const C9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function is(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||C9.has(e))}function k9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function bt(e){return e==null||da(e)}function da(e){return/^\s*none\s*$/i.test(e)}function T9(e){return/^\s*round\s*$/i.test(e)}function Jl(e,t){return lg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function as(e="middle"){return Jl(e,"frameAnchor")}function li(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Ma(t,n)}function $9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function D9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function mg(e){return ir(e)?D9(e):e}const sn=Symbol("position"),On=Symbol("color"),Ga=Symbol("radius"),Ua=Symbol("length"),za=Symbol("opacity"),os=Symbol("symbol"),pg=Symbol("projection"),Ie=new Map([["x",sn],["y",sn],["fx",sn],["fy",sn],["r",Ga],["color",On],["opacity",za],["symbol",os],["length",Ua],["projection",pg]]);function N9(e){return e===sn||e===pg}function F9(e){return e===sn||e===Ga||e===Ua||e===za}const B9=Math.sqrt(3),L9=2/B9,R9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*L9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},of=new Map([["asterisk",Cb],["circle",ca],["cross",kb],["diamond",$b],["diamond2",Db],["hexagon",R9],["plus",Nb],["square",Fb],["square2",Bb],["star",Rb],["times",Gb],["triangle",Ib],["triangle2",Ob],["wye",qb]]);function uf(e){return e&&typeof e.draw=="function"}function I9(e){return uf(e)?!0:typeof e!="string"?!1:of.has(e.toLowerCase())}function sf(e){if(e==null||uf(e))return e;const t=of.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function O9(e){if(e==null||uf(e))return[void 0,e];if(typeof e=="string"){const t=of.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function us({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=bg(e)),t!=null&&!si(t)&&(r=Vs(r,lf(t))),n&&(r=Vs(r,gg))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||si(t))&&{sort:t},transform:Vs(r,o)}}function ci({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=bg(e)),t!=null&&!si(t)&&(r=Ys(r,lf(t))),n&&(r=Ys(r,gg))),{...i,...(t===null||si(t))&&{sort:t},initializer:Ys(r,a)}}function Vs(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,kt(n),r,i)}}function Ys(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,u,s,l,c,f;return{data:u=n,facets:s=r,channels:o}=e.call(this,n,r,i,...a),{data:c=u,facets:f=s,channels:l}=t.call(this,u,s,{...i,...o},...a),{data:c,facets:f,channels:{...o,...l}}}}function q9(e,t){return(e.initializer!=null?ci:us)(e,t)}function bg(e){return(t,n)=>{const r=et(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function gg(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function G9(e,{sort:t,...n}={}){return{...(rs(e)&&e.channel!==void 0?ci:q9)(n,lf(e)),sort:si(t)?t:null}}function lf(e){return(typeof e=="function"&&e.length!==1?U9:z9)(e)}function U9(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function z9(e){let t,n;({channel:t,value:e,order:n}={...qa(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?bu:Kt),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Kt;break;case"descending":n=bu;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let u;if(t===void 0)u=et(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(u=o[t],!u)return{};u=u.value}const s=(l,c)=>n(u[l],u[c]);return{data:i,facets:a.map(l=>l.slice().sort(s))}}}function co(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function H9(e,t,n=yg){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",K9]),t.href!=null&&e.href===void 0&&r.push(["href",ff]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?W9(i):n(i,a,t))}function yg(e,t,n,r=wg){let i;rr(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,u]=gu(a.label);let s;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){a.initialize(l),s=u([])},scope(l,c){a.scope(l,c)},reduce(l,c){s.push(a.reduce(l,c))}}}function W9(e){return{name:e,initialize(){},scope(){},reduce(){}}}function wg(e,t,n,r=cf){const i=_9(e,n),a=r(t,i);let o,u;return{label:$r(a===yu?null:i,a.label),initialize(s){o=i===void 0?s:et(s,i),a.scope==="data"&&(u=a.reduceIndex(In(s),o))},scope(s,l){a.scope===s&&(u=a.reduceIndex(l,o))},reduce(s,l){return a.scope==null?a.reduceIndex(s,o,l):a.reduceIndex(s,o,u,l)}}}function fd(e,t){return t?ea(Tu(e,n=>t[n]),ef):[[,e]]}function cf(e,t,n=V9){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&rr(e))return X9(e);if(typeof e=="function")return Z9(e);if(/^p\d{2}$/i.test(e))return Sn(p9(e));switch(`${e}`.toLowerCase()){case"first":return ff;case"last":return Q9;case"identity":return vg;case"count":return yu;case"distinct":return J9;case"sum":return t==null?yu:e8;case"proportion":return dd(t,"data");case"proportion-facet":return dd(t,"facet");case"deviation":return Sn(Cu);case"min":return Sn(Dn);case"min-index":return Sn(A3);case"max":return Sn(Ot);case"max-index":return Sn(S3);case"mean":return hd(Du);case"median":return hd(dl);case"variance":return Sn(vc);case"mode":return Sn(T3)}return n(e)}function V9(e){throw new Error(`invalid reduce: ${e}`)}function Y9(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function j9(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>Kt(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function X9(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function Z9(e){return{reduceIndex(t,n,r){return e(rf(n,t),r)}}}function Sn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function hd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return vt(n)?new Date(r):r}}}const vg={reduceIndex(e,t){return rf(t,e)}},ff={reduceIndex(e,t){return t[e[0]]}},K9={reduceIndex(e,t){const r=ea(Vr(e,a=>a.length,a=>t[a]),Zl),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[` ${a.length.toLocaleString("en-US")} more`,Zn(a,Zl)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},Q9={reduceIndex(e,t){return t[e[e.length-1]]}},yu={label:"Frequency",reduceIndex(e){return e.length}},J9={label:"Distinct",reduceIndex(e,t){const n=new ku;for(const r of e)n.add(t[r]);return n.size}},e8=Sn(Zn);function dd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Zn(n,a=>r[a])/i}}function ma(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=$r(r)},u){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),_g(u,{scale:t,type:n,value:et(e,r),label:o,filter:i,hint:a})}function t8(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,ma(t,r,n)]))}function n8(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Ve(a,o)]}));return n.channels=e,n}function _g(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Ws(r,is)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Ws(r,k9)?null:"opacity";break;case"symbol":n!==!0&&Ws(r,I9)?(t.scale=null,t.value=Ve(r,sf)):t.scale="symbol";break;default:t.scale=Ie.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ie.has(n))throw new Error(`unknown scale: ${n}`);return t}function r8(e,t,n,r,i){const{order:a,reverse:o,reduce:u=!0,limit:s}=i;for(const l in i){if(!Ie.has(l))continue;let{value:c,order:f=a,reverse:h=o,reduce:d=u,limit:m=s}=qa(i[l]);const p=c==null?void 0:c.startsWith("-");if(p&&(c=c.slice(1)),f=f===void 0?p!==(c==="width"||c==="height")?xg:Mg:o8(f),d==null||d===!1)continue;const g=l==="fx"||l==="fy"?a8(t,r[l]):i8(n,l);if(!g)throw new Error(`missing channel for scale: ${l}`);const w=g.value,[b=0,v=1/0]=ir(m)?m:m<0?[m]:[0,m];if(c==null)g.domain=()=>{let y=Array.from(new ku(w));return h&&(y=y.reverse()),(b!==0||v!==1/0)&&(y=y.slice(b,v)),y};else{const y=c==="data"?e:c==="height"?md(n,"y1","y2"):c==="width"?md(n,"x1","x2"):ec(n,c,c==="y"?"y2":c==="x"?"x2":void 0),M=cf(d===!0?"max":d,y);g.domain=()=>{let _=w3(In(w),x=>M.reduceIndex(x,y),x=>w[x]);return f&&_.sort(f),h&&_.reverse(),(b!==0||v!==1/0)&&(_=_.slice(b,v)),_.map(ef)}}}}function i8(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function a8(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const u of e[a])i[u]=o}return t}function md(e,t,n){const r=ec(e,t),i=ec(e,n);return Ve(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function ec(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function o8(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return Mg;case"descending":return xg}throw new Error(`invalid order: ${e}`)}function Mg([e,t],[n,r]){return Kt(t,r)||Kt(e,n)}function xg([e,t],[n,r]){return bu(t,r)||Kt(e,n)}function pd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function u8(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const s8=u8(e=>new Intl.NumberFormat(e));function l8(e="en-US"){const t=s8(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function c8(e){return r9(e,"Invalid Date")}function f8(e="en-US"){const t=l8(e);return n=>(n instanceof Date?c8:typeof n=="number"?t:ct)(n)}const Ar=f8();let tc=0,nc;function h8(){const e=tc;return tc=0,nc=void 0,e}function Xn(e){e!==nc&&(nc=e,console.warn(e),++tc)}const gt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let d8=0;function bd(){return`plot-clip-${++d8}`}function m8(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:u,fillOpacity:s,stroke:l,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:g,opacity:w,mixBlendMode:b,imageFilter:v,paintOrder:y,pointerEvents:M,shapeRendering:_,channels:x},{ariaLabel:A,fill:E="currentColor",fillOpacity:F,stroke:S="none",strokeOpacity:D,strokeWidth:O,strokeLinecap:L,strokeLinejoin:C,strokeMiterlimit:q,paintOrder:ie}){E===null&&(u=null,s=null),S===null&&(l=null,f=null),bt(E)?!bt(S)&&(!bt(u)||x!=null&&x.fill)&&(S="none"):bt(S)&&(!bt(l)||x!=null&&x.stroke)&&(E="none");const[te,J]=Ln(u,E),[z,H]=ft(s,F),[T,G]=Ln(l,S),[ne,ue]=ft(f,D),[ae,V]=ft(w);da(G)||(c===void 0&&(c=O),d===void 0&&(d=L),h===void 0&&(h=C),m===void 0&&!T9(h)&&(m=q),!da(J)&&y===void 0&&(y=ie));const[Y,B]=ft(c);return E!==null&&(e.fill=rt(J,"currentColor"),e.fillOpacity=Ti(H,1)),S!==null&&(e.stroke=rt(G,"none"),e.strokeWidth=Ti(B,1),e.strokeOpacity=Ti(ue,1),e.strokeLinejoin=rt(h,"miter"),e.strokeLinecap=rt(d,"butt"),e.strokeMiterlimit=Ti(m,4),e.strokeDasharray=rt(p,"none"),e.strokeDashoffset=rt(g,"0")),e.target=ct(o),e.ariaLabel=ct(A),e.ariaDescription=ct(i),e.ariaHidden=ct(a),e.opacity=Ti(V,1),e.mixBlendMode=rt(b,"normal"),e.imageFilter=rt(v,"none"),e.paintOrder=rt(y,"normal"),e.pointerEvents=rt(M,"auto"),e.shapeRendering=rt(_,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:te,scale:"auto",optional:!0},fillOpacity:{value:z,scale:"auto",optional:!0},stroke:{value:T,scale:"auto",optional:!0},strokeOpacity:{value:ne,scale:"auto",optional:!0},strokeWidth:{value:Y,optional:!0},opacity:{value:ae,scale:"auto",optional:!0}}}function p8(e,t){t&&e.filter(n=>Xc(t[n])).append("title").call(g8,t)}function b8(e,t){t&&e.filter(([n])=>Xc(t[n])).append("title").call(y8,t)}function g8(e,t){t&&e.text(n=>Ar(t[n]))}function y8(e,t){t&&e.text(([n])=>Ar(t[n]))}function qn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&fe(e,"aria-label",h=>r[h]),a&&fe(e,"fill",h=>a[h]),o&&fe(e,"fill-opacity",h=>o[h]),u&&fe(e,"stroke",h=>u[h]),s&&fe(e,"stroke-opacity",h=>s[h]),l&&fe(e,"stroke-width",h=>l[h]),c&&fe(e,"opacity",h=>c[h]),f&&Eg(e,h=>f[h],t),n||p8(e,i)}function Pg(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&fe(e,"aria-label",([h])=>r[h]),a&&fe(e,"fill",([h])=>a[h]),o&&fe(e,"fill-opacity",([h])=>o[h]),u&&fe(e,"stroke",([h])=>u[h]),s&&fe(e,"stroke-opacity",([h])=>s[h]),l&&fe(e,"stroke-width",([h])=>l[h]),c&&fe(e,"opacity",([h])=>c[h]),f&&Eg(e,([h])=>f[h],t),n||b8(e,i)}function w8({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:o,opacity:u,href:s},{tip:l}){return[e,l?void 0:t,n,r,i,a,o,u,s].filter(c=>c!==void 0)}function v8(e,t,n){const r=Tu(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Xn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Sg(e,t,n,r){const{z:i}=n,{z:a}=r,o=w8(r,n),u=[...t,...o];for(const s of a?v8(e,a,i):[e]){let l,c;e:for(const f of s){for(const h of u)if(!Jn(h[f])){c&&c.push(-1);continue e}if(l===void 0){c&&(yield c),l=o.map(h=>dr(h[f])),c=[f];continue}c.push(f);for(let h=0;h<o.length;++h)if(dr(o[h][f])!==l[h]){yield c,l=o.map(m=>dr(m[f])),c=[f];continue e}}c&&(yield c)}}function Ag(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=Jt(e,"clip",["frame","sphere"])),e}function _8(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:u,marginLeft:s,marginRight:l,marginTop:c,marginBottom:f}=n,h=bd();i=`url(#${h})`,e=ze("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",s).attr("y",c).attr("width",o-l-s).attr("height",u-c-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const u=bd();i=`url(#${u})`,e.append("clipPath").attr("id",u).append("path").attr("d",qu(o)({type:"Sphere"}));break}}fe(e,"aria-label",t.ariaLabel),fe(e,"aria-description",t.ariaDescription),fe(e,"aria-hidden",t.ariaHidden),fe(e,"clip-path",i)}function Ut(e,t,n,r){_8(e,t,n,r),fe(e,"fill",t.fill),fe(e,"fill-opacity",t.fillOpacity),fe(e,"stroke",t.stroke),fe(e,"stroke-width",t.strokeWidth),fe(e,"stroke-opacity",t.strokeOpacity),fe(e,"stroke-linejoin",t.strokeLinejoin),fe(e,"stroke-linecap",t.strokeLinecap),fe(e,"stroke-miterlimit",t.strokeMiterlimit),fe(e,"stroke-dasharray",t.strokeDasharray),fe(e,"stroke-dashoffset",t.strokeDashoffset),fe(e,"shape-rendering",t.shapeRendering),fe(e,"filter",t.imageFilter),fe(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;fe(e,"pointer-events",i)}function zt(e,t){M8(e,"mix-blend-mode",t.mixBlendMode),fe(e,"opacity",t.opacity)}function Eg(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(Jr.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(Jr.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function fe(e,t,n){n!=null&&e.attr(t,n)}function M8(e,t,n){n!=null&&e.style(t,n)}function Tt(e,t,{x:n,y:r},i=gt,a=gt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function rt(e,t){if((e=ct(e))!==t)return e}function Ti(e,t){if((e=Fe(e))!==t)return e}const x8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function hf(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!x8.test(e))throw new Error(`invalid class name: ${e}`);return e}function df(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Ha({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function mf(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Ag(n)}}function ze(e,{document:t}){return Vi(Fu(e).call(t.documentElement))}const Cg=Math.PI,_n=2*Cg,gd=.618;function P8({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let u,s,l="frame";if(rr(e)){let M;if({type:e,domain:s,inset:M,insetTop:n=M!==void 0?M:n,insetRight:r=M!==void 0?M:r,insetBottom:i=M!==void 0?M:i,insetLeft:a=M!==void 0?M:a,clip:l=l,...u}=e,e==null)return}typeof e!="function"&&({type:e}=kg(e));const{width:c,height:f,marginLeft:h,marginRight:d,marginTop:m,marginBottom:p}=o,g=c-h-d-a-r,w=f-m-p-n-i;if(e=e==null?void 0:e({width:g,height:w,clip:l,...u}),e==null)return;l=S8(l,h,m,c-d,f-p);let b=h+a,v=m+n,y;if(s!=null){const[[M,_],[x,A]]=qu(e).bounds(s),E=Math.min(g/(x-M),w/(A-_));E>0?(b-=(E*(M+x)-g)/2,v-=(E*(_+A)-w)/2,y=Gl({point(F,S){this.stream.point(F*E+b,S*E+v)}})):Xn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return y??(y=b===0&&v===0?Tg():Gl({point(M,_){this.stream.point(M+b,_+v)}})),{stream:M=>e.stream(y.stream(l(M)))}}function kg(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Wt(h6,.7463,.4673);case"albers":return fo(Em,.7463,.4673);case"azimuthal-equal-area":return Wt(d6,4,4);case"azimuthal-equidistant":return Wt(m6,_n,_n);case"conic-conformal":return fo(g6,_n,_n);case"conic-equal-area":return fo(au,6.1702,2.9781);case"conic-equidistant":return fo(v6,7.312,3.6282);case"equal-earth":return Wt(M6,5.4133,2.6347);case"equirectangular":return Wt(y6,_n,Cg);case"gnomonic":return Wt(x6,3.4641,3.4641);case"identity":return{type:Tg};case"reflect-y":return{type:A8};case"mercator":return Wt(p6,_n,_n);case"orthographic":return Wt(P6,2,2);case"stereographic":return Wt(S6,2,2);case"transverse-mercator":return Wt(A6,_n,_n);default:throw new Error(`unknown projection type: ${e}`)}}function S8(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return fm(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Wt(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:u})=>{var l,c,f;const s=e();return o!=null&&((l=s.precision)==null||l.call(s,o)),a!=null&&((c=s.rotate)==null||c.call(s,a)),typeof u=="number"&&((f=s.clipAngle)==null||f.call(s,u)),s.scale(Math.min(r/t,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/t}}function fo(e,t,n){const{type:r,aspectRatio:i}=Wt(e,t,n);return{type:a=>{const{parallels:o,domain:u,width:s,height:l}=a,c=r(a);return o!=null&&(c.parallels(o),u===void 0&&c.fitSize([s,l],{type:"Sphere"})),c},aspectRatio:i}}const Tg=Ia({stream:e=>e}),A8=Ia(Gl({point(e,t){this.stream.point(e,-t)}}));function E8(e,t,n,r){const i=n[e],a=n[t],o=i.length,u=n[e]=new Float64Array(o).fill(NaN),s=n[t]=new Float64Array(o).fill(NaN);let l;const c=r.stream({point(f,h){u[l]=f,s[l]=h}});for(l=0;l<o;++l)c.point(i[l],a[l])}function C8({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(rr(e)&&(e=e.type),e!=null)}function k8(e){if(typeof(e==null?void 0:e.stream)=="function")return gd;if(rr(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=kg(e);if(t)return t}return gd}}function T8(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,u){t.push(o),n.push(u)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)cr(o,a);return[r,i]}const $8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],$g=new Map([["accent",X7],["category10",j7],["dark2",Z7],["observable10",$8],["paired",K7],["pastel1",Q7],["pastel2",J7],["set1",e4],["set2",t4],["set3",n4],["tableau10",r4]]);function D8(e){return e!=null&&$g.has(`${e}`.toLowerCase())}const yd=new Map([...$g,["brbg",Mn(dp,mp)],["prgn",Mn(pp,bp)],["piyg",Mn(gp,yp)],["puor",Mn(wp,vp)],["rdbu",Mn(Vl,lu)],["rdgy",Mn(_p,Mp)],["rdylbu",Mn(Yl,cu)],["rdylgn",Mn(xp,Pp)],["spectral",Mn(Sp,Ap)],["burd",wd(Vl,lu)],["buylrd",wd(Yl,cu)],["blues",Ze(Kp,Qp)],["greens",Ze(Jp,eb)],["greys",Ze(tb,nb)],["oranges",Ze(ub,sb)],["purples",Ze(rb,ib)],["reds",Ze(ab,ob)],["turbo",xn(pb)],["viridis",xn(bb)],["magma",xn(gb)],["inferno",xn(yb)],["plasma",xn(wb)],["cividis",xn(lb)],["cubehelix",xn(cb)],["warm",xn(fb)],["cool",xn(hb)],["bugn",Ze(Ep,Cp)],["bupu",Ze(kp,Tp)],["gnbu",Ze($p,Dp)],["orrd",Ze(Np,Fp)],["pubu",Ze(Rp,Ip)],["pubugn",Ze(Bp,Lp)],["purd",Ze(Op,qp)],["rdpu",Ze(Gp,Up)],["ylgn",Ze(Wp,Vp)],["ylgnbu",Ze(zp,Hp)],["ylorbr",Ze(Yp,jp)],["ylorrd",Ze(Xp,Zp)],["rainbow",vd(db)],["sinebow",vd(mb)]]);function Ze(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?jt(t,n):e[n])}function Mn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?jt(t,n):e[n])}function wd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?jt(r=>t(1-r),n):e[n].slice().reverse())}function xn(e){return({length:t})=>jt(e,Math.max(2,Math.floor(t)))}function vd(e){return({length:t})=>jt(e,Math.floor(t)+1).slice(0,-1)}function Dg(e){const t=`${e}`.toLowerCase();if(!yd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return yd.get(t)}function ss(e,t){const n=Dg(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function N8(e,t="greys"){const n=new Set,[r,i]=ss(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const _d=new Map([["brbg",mp],["prgn",bp],["piyg",yp],["puor",vp],["rdbu",lu],["rdgy",Mp],["rdylbu",cu],["rdylgn",Pp],["spectral",Ap],["burd",e=>lu(1-e)],["buylrd",e=>cu(1-e)],["blues",Qp],["greens",eb],["greys",nb],["purples",ib],["reds",ob],["oranges",sb],["turbo",pb],["viridis",bb],["magma",gb],["inferno",yb],["plasma",wb],["cividis",lb],["cubehelix",cb],["warm",fb],["cool",hb],["bugn",Cp],["bupu",Tp],["gnbu",Dp],["orrd",Fp],["pubugn",Lp],["pubu",Ip],["purd",qp],["rdpu",Up],["ylgnbu",Hp],["ylgn",Vp],["ylorbr",jp],["ylorrd",Zp],["rainbow",db],["sinebow",mb]]);function pf(e){const t=`${e}`.toLowerCase();if(!_d.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return _d.get(t)}const F8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function B8(e){return e!=null&&F8.has(`${e}`.toLowerCase())}const Ng=e=>t=>e(1-t),js=[0,1],Md=new Map([["number",ot],["rgb",_r],["hsl",t_],["hcl",i_],["lab",n_]]);function Fg(e){const t=`${e}`.toLowerCase();if(!Md.has(t))throw new Error(`unknown interpolator: ${t}`);return Md.get(t)}function Wa(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:u=Lg(e,n),unknown:s,round:l,scheme:c,interval:f,range:h=Ie.get(e)===Ga?V8(n,u):Ie.get(e)===Ua?Y8(n,u):Ie.get(e)===za?js:void 0,interpolate:d=Ie.get(e)===On?c==null&&h!==void 0?_r:pf(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):l?Cc:ot,reverse:m}){if(f=wi(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=Fg(d)),m=!!m,h!==void 0){const p=(u=kt(u)).length,g=(h=kt(h)).length;if(p!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Ru(d,h),h=void 0}}if(d.length===1?(m&&(d=Ng(d),m=!1),h===void 0&&(h=Float64Array.from(u,(p,g)=>g/(u.length-1)),h.length===2&&(h=js)),t.interpolate((h===js?Ia:gf)(d))):t.interpolate(d),o){const[p,g]=Ft(u);(p>0||g<0)&&(u=ha(u),li(u)!==Math.sign(p)?u[u.length-1]=0:u[0]=0)}return m&&(u=Uo(u)),t.domain(u).unknown(s),i&&(t.nice(L8(i,r)),u=t.domain()),h!==void 0&&t.range(h),a&&t.clamp(a),{type:r,domain:u,range:h,scale:t,interpolate:d,interval:f}}function L8(e,t){return e===!0?void 0:typeof e=="number"?e:M9(e,t)}function R8(e,t,n){return Wa(e,Oc(),t,n)}function I8(e,t,n){return Bg(e,t,{...n,exponent:.5})}function Bg(e,t,{exponent:n=1,...r}){return Wa(e,Vm().exponent(n),t,{...r,type:"pow"})}function O8(e,t,{base:n=10,domain:r=j8(t),...i}){return Wa(e,Um().base(n),t,{...i,domain:r})}function q8(e,t,{constant:n=1,...r}){return Wa(e,Hm().constant(n),t,r)}function G8(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=X8(t),unknown:u,interpolate:s,reverse:l}){return n===void 0&&(n=s!==void 0?jt(s,i):Ie.get(e)===On?ss(a,i):void 0),o.length>0&&(o=Ym(o,n===void 0?{length:i}:n).quantiles()),bf(e,t,{domain:o,range:n,reverse:l,unknown:u})}function U8(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=Lg(e,t),unknown:o,interpolate:u,reverse:s}){const[l,c]=Ft(a);let f;return n===void 0?(f=ta(l,c,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=u!==void 0?jt(u,r):Ie.get(e)===On?ss(i,r):void 0):(f=jt(ot(l,c),r+1).slice(1,-1),l instanceof Date&&(f=f.map(h=>new Date(h)))),li(kt(a))<0&&f.reverse(),bf(e,t,{domain:f,range:n,reverse:s,unknown:o})}function bf(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?jt(a,n.length+1):Ie.get(e)===On?ss(i,n.length+1):void 0,reverse:u}){n=kt(n);const s=li(n);if(!isNaN(s)&&!z8(n,s))throw new Error(`the ${e} scale has a non-monotonic domain`);return u&&(o=Uo(o)),{type:"threshold",scale:jm(s<0?Uo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function z8(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=Ma(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function H8(e){return{type:"identity",scale:F9(Ie.get(e))?Om():t=>t}}function pa(e,t=eg){return e.length?[Dn(e,({value:n})=>n===void 0?n:Dn(n,t)),Ot(e,({value:n})=>n===void 0?n:Ot(n,t))]:[0,1]}function Lg(e,t){const n=Ie.get(e);return(n===Ga||n===za||n===Ua?W8:pa)(t)}function W8(e){return[0,e.length?Ot(e,({value:t})=>t===void 0?t:Ot(t,eg)):1]}function V8(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Qr(e,.5,({value:o})=>o===void 0?NaN:Qr(o,.25,es)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/Ot(i);return a<1?i.map(o=>o*a):i}function Y8(e,t){const n=dl(e,({value:a})=>a===void 0?NaN:dl(a,Math.abs)),r=t.map(a=>12*a/n),i=60/Ot(r);return i<1?r.map(a=>a*i):r}function j8(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return pa(e,es);if(n<0)return pa(e,Zc)}return[1,10]}function X8(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function gf(e){return(t,n)=>r=>e(t+r*(n-t))}function ls(e,t,n,r,{type:i,nice:a,clamp:o,domain:u=pa(r),unknown:s,pivot:l=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=Ie.get(e)===On?c==null&&f!==void 0?_r:pf(c!==void 0?c:"rdbu"):ot,reverse:m}){l=+l,u=kt(u);let[p,g]=u;if(u.length>2&&Xn(`Warning: the diverging ${e} scale domain contains extra elements.`),Ma(p,g)<0&&([p,g]=[g,p],m=!m),p=Math.min(p,l),g=Math.max(g,l),typeof d!="function"&&(d=Fg(d)),f!==void 0&&(d=d.length===1?gf(d)(...f):Ru(d,f)),m&&(d=Ng(d)),h){const w=n.apply(l),b=w-n.apply(p),v=n.apply(g)-w;b<v?p=n.invert(w-v):b>v&&(g=n.invert(w+b))}return t.domain([p,l,g]).unknown(s).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,g],pivot:l,interpolate:d,scale:t}}function Z8(e,t,n){return ls(e,lp(),eM,t,n)}function K8(e,t,n){return Rg(e,t,{...n,exponent:.5})}function Rg(e,t,{exponent:n=1,...r}){return ls(e,hp().exponent(n=+n),rM(n),t,{...r,type:"diverging-pow"})}function Q8(e,t,{base:n=10,pivot:r=1,domain:i=pa(t,r<0?Zc:es),...a}){return ls(e,cp().base(n=+n),tM,t,{domain:i,pivot:r,...a})}function J8(e,t,{constant:n=1,...r}){return ls(e,fp().constant(n=+n),iM(n),t,r)}const eM={apply(e){return e},invert(e){return e}},tM={apply:Math.log,invert:Math.exp},nM={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function rM(e){return e===.5?nM:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function iM(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Ig(e,t,n,r){return Wa(e,t,n,r)}function aM(e,t,n){return Ig(e,V7(),t,n)}function oM(e,t,n){return Ig(e,Y7(),t,n)}const Va=Symbol("ordinal");function Og(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:u,hint:s}){return i=wi(i,r),a===void 0&&(a=Gg(n,i,e)),(r==="categorical"||r===Va)&&(r="ordinal"),u&&(a=Uo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:s,interval:i}}function uM(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:u,...s}){r=wi(r,n),i===void 0&&(i=Gg(t,r,e));let l;if(Ie.get(e)===os)l=cM(t),a=a===void 0?fM(l):Ve(a,sf);else if(Ie.get(e)===On&&(a===void 0&&(n==="ordinal"||n===Va)&&(a=N8(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const c=pf(o),f=a[0],h=a[1]-a[0];a=({length:d})=>jt(m=>c(f+h*m),d)}else a=Dg(o);if(u===zl)throw new Error(`implicit unknown on ${e} scale is not supported`);return Og(e,Ic().unknown(u),t,{...s,type:n,domain:i,range:a,hint:l})}function sM(e,t,{align:n=.5,padding:r=.5,...i}){return qg(E6().align(n).padding(r),t,i,e)}function lM(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return qg(Hu().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function qg(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=Og(r,e,t,n),e.round=i,e}function Gg(e,t,n){const r=new ku;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Ft(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Ie.get(n)===sn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return ea(r,Kt)}function xd(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function cM(e){return{fill:xd(e,"fill"),stroke:xd(e,"stroke")}}function fM(e){return bt(e.fill)?g4:b4}function rc(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:u,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,facet:{label:m=t}={},...p}={}){const g={};for(const[w,b]of e){const v=p[w],y=bM(w,b,{round:Ie.get(w)===sn?u:void 0,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,...v});if(y){let{label:M=w==="fx"||w==="fy"?m:t,percent:_,transform:x,inset:A,insetTop:E=A!==void 0?A:w==="y"?r:0,insetRight:F=A!==void 0?A:w==="x"?i:0,insetBottom:S=A!==void 0?A:w==="y"?a:0,insetLeft:D=A!==void 0?A:w==="x"?o:0}=v||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");y.percent=!!_,y.label=M===void 0?dM(b,y):M,y.transform=x,w==="x"||w==="fx"?(y.insetLeft=+D,y.insetRight=+F):(w==="y"||w==="fy")&&(y.insetTop=+E,y.insetBottom=+S),g[w]=y}}return g}function Pd(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:u,label:s}=i;t[r]=_M(i),n[r]=a,a.type=o,u!=null&&(a.interval=u),s!=null&&(a.label=s)}return n}function hM(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?yf(t):t;i&&Sd(i,o),a&&Ad(a,o);const u=i||a?Ug(e,t):t;n&&Sd(n,u),r&&Ad(r,u)}function dM(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Dr(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function mM(e){return Math.sign(li(e.domain()))*Math.sign(li(e.range()))}function yf(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:u,marginRight:s,marginBottom:l,marginLeft:c}}=e;return{marginTop:Math.max(t,u),marginRight:Math.max(n,s),marginBottom:Math.max(r,l),marginLeft:Math.max(i,c),width:a,height:o}}function Ug({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=yf(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:u,height:t?t.scale.bandwidth()+r+a:s,facet:{width:u,height:s}}}function Sd(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,u=a+n,s=i-o-r;e.range=[u,Math.max(u,s)],Dr(e)||(e.range=Hg(e)),e.scale.range(e.range)}zg(e)}function Ad(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,u=a+n,s=i-o-r;e.range=[Math.max(u,s),u],Dr(e)?e.range.reverse():e.range=Hg(e),e.scale.range(e.range)}zg(e)}function zg(e){e.round===void 0&&yM(e)&&pM(e)<=30&&e.scale.round(!0)}function pM({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,u=Math.abs(r-n)/Math.max(1,o+a*2);return(u-Math.floor(u))*o}function Hg(e){const t=e.scale.domain().length+Wg(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function bM(e,t=[],n={}){const r=gM(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Dr({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(vt)?Xn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${qr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`):i.some(S9)?Xn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${qr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`):i.some(A9)&&Xn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${qr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${qr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=ho(t,n,un);break;case"identity":switch(Ie.get(e)){case sn:n=ho(t,n,un);break;case os:n=ho(t,n,wM);break}break;case"utc":case"time":n=ho(t,n,b9);break}switch(r){case"diverging":return Z8(e,t,n);case"diverging-sqrt":return K8(e,t,n);case"diverging-pow":return Rg(e,t,n);case"diverging-log":return Q8(e,t,n);case"diverging-symlog":return J8(e,t,n);case"categorical":case"ordinal":case Va:return uM(e,t,n);case"cyclical":case"sequential":case"linear":return R8(e,t,n);case"sqrt":return I8(e,t,n);case"threshold":return bf(e,t,n);case"quantile":return G8(e,t,n);case"quantize":return U8(e,t,n);case"pow":return Bg(e,t,n);case"log":return O8(e,t,n);case"symlog":return q8(e,t,n);case"utc":return oM(e,t,n);case"time":return aM(e,t,n);case"point":return sM(e,t,n);case"band":return lM(e,t,n);case"identity":return H8(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function qr(e){return typeof e=="symbol"?e.description:e}function Ed(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Cd={toString:()=>"projection"};function gM(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:u}){if(n=Ed(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&u!=null&&(n=Cd);for(const l of t){const c=Ed(l.type);if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}}if(n===Cd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const s=Ie.get(e);if(s===Ga)return"sqrt";if(s===za||s===Ua)return"linear";if(s===os)return"ordinal";if((r||i||[]).length>2)return Xs(s);if(r!==void 0){if(cd(r))return Xs(s);if(vt(r))return"utc"}else{const l=t.map(({value:c})=>c).filter(c=>c!==void 0);if(l.some(cd))return Xs(s);if(l.some(vt))return"utc"}if(s===On){if(o!=null||B8(a))return"diverging";if(D8(a))return"categorical"}return"linear"}function Xs(e){switch(e){case sn:return"point";case On:return Va;default:return"ordinal"}}function Dr({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Va}function Wg({type:e}){return e==="threshold"}function yM({type:e}){return e==="point"||e==="band"}function fi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function ho(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function wM(e){return Ve(e,sf)}function vM(e){return t=>{if(!Ie.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function _M({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:u,pivot:s}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const l=e.unknown?e.unknown():void 0;return{type:t,domain:ha(n),...r!==void 0&&{range:ha(r)},...o!==void 0&&{transform:o},...u&&{percent:u},...l!==void 0&&{unknown:l},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function MM(e,t,n={}){let r=.5-gt,i=.5+gt,a=.5+gt,o=.5-gt;for(const{marginTop:p,marginRight:g,marginBottom:w,marginLeft:b}of t)p>r&&(r=p),g>i&&(i=g),w>a&&(a=w),b>o&&(o=b);let{margin:u,marginTop:s=u!==void 0?u:r,marginRight:l=u!==void 0?u:i,marginBottom:c=u!==void 0?u:a,marginLeft:f=u!==void 0?u:o}=n;s=+s,l=+l,c=+c,f=+f;let{width:h=640,height:d=xM(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,s-r+c-a)}=n;h=+h,d=+d;const m={width:h,height:d,marginTop:s,marginRight:l,marginBottom:c,marginLeft:f};if(e.fx||e.fy){let{margin:p,marginTop:g=p!==void 0?p:s,marginRight:w=p!==void 0?p:l,marginBottom:b=p!==void 0?p:c,marginLeft:v=p!==void 0?p:f}=n.facet??{};g=+g,w=+w,b=+b,v=+v,m.facet={marginTop:g,marginRight:w,marginBottom:b,marginLeft:v}}return m}function xM({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:u,marginRightDefault:s,marginBottomDefault:l,marginLeftDefault:c}){const f=n?n.scale.domain().length:1,h=k8(i);if(h){const m=r?r.scale.domain().length:1,p=(1.1*f-.1)/(1.1*m-.1)*h,g=Math.max(.1,Math.min(10,p));return Math.round((o-c-s)*g+u+l)}const d=t?Dr(t)?t.scale.domain().length:Math.max(7,17/f):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=kd("y",t)/(kd("x",e)*a),p=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,w=p*(o-c-s)-e.insetLeft-e.insetRight;return(m*w+t.insetTop+t.insetBottom)/g+u+l}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function kd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const u=t.scale.exponent();i=s=>Math.pow(s,u);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Ft(r);return Math.abs(i(o)-i(a))}function PM(e,t){const{fx:n,fy:r}=rc(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?l1(i,a).map(([o,u],s)=>({x:o,y:u,i:s})):i?i.map((o,u)=>({x:o,i:u})):a?a.map((o,u)=>({y:o,i:u})):void 0}function SM(e,{x:t,y:n}){return t&&(t=ic(t)),n&&(n=ic(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function wf(e,{fx:t,fy:n}){const r=In(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?Vr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?Vr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):Vr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function AM(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function EM(e){const t=[],n=new Uint32Array(Zn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const CM=new Map([["top",Zs],["right",Js],["bottom",Ks],["left",Qs],["top-left",mo(Zs,Qs)],["top-right",mo(Zs,Js)],["bottom-left",mo(Ks,Qs)],["bottom-right",mo(Ks,Js)],["top-empty",$M],["right-empty",FM],["bottom-empty",DM],["left-empty",NM],["empty",BM]]);function kM(e){if(e==null)return null;const t=CM.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Td=new WeakMap;function ic(e){let t=Td.get(e);return t||Td.set(e,t=new yr(Ve(e,(n,r)=>[n,r]))),t}function ar(e,t){return ic(e).get(t)}function TM(e,t,n){return t=dr(t),n=dr(n),e.find(r=>Object.is(dr(r.x),t)&&Object.is(dr(r.y),n))}function cs(e,t,n){var r;return(r=TM(e,t,n))==null?void 0:r.empty}function Zs(e,{y:t},{y:n}){return t?ar(t,n)===0:!0}function Ks(e,{y:t},{y:n}){return t?ar(t,n)===t.length-1:!0}function Qs(e,{x:t},{x:n}){return t?ar(t,n)===0:!0}function Js(e,{x:t},{x:n}){return t?ar(t,n)===t.length-1:!0}function $M(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=ar(t,r);if(a>0)return cs(e,n,t[a-1])}function DM(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=ar(t,r);if(a<t.length-1)return cs(e,n,t[a+1])}function NM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=ar(t,n);if(a>0)return cs(e,t[a-1],r)}function FM(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=ar(t,n);if(a<t.length-1)return cs(e,t[a+1],r)}function BM(e,t,{empty:n}){return n}function mo(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function el(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class ht{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:u,fy:s,sort:l,dx:c=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:m=h,marginBottom:p=h,marginLeft:g=h,clip:w=i==null?void 0:i.clip,channels:b,tip:v,render:y}=r;if(this.data=t,this.sort=si(l)?l:null,this.initializer=ci(r).initializer,this.transform=this.initializer?r.transform:us(r).transform,a===null||a===!1?this.facet=null:(this.facet=Jt(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Eo&&typeof u=="string"?[u]:u,this.fy=t===Eo&&typeof s=="string"?[s]:s),this.facetAnchor=kM(o),n=mg(n),b!==void 0&&(n={...LM(b),...n}),i!==void 0&&(n={...m8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([M,_])=>{if(rs(_.value)){const{value:x,label:A=_.label,scale:E=_.scale}=_.value;_={..._,label:A,scale:E,value:x}}if(t===Eo&&typeof _.value=="string"){const{value:x}=_;_={..._,value:[x]}}return[M,_]}).filter(([M,{value:_,optional:x}])=>{if(_!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${M}`)})),this.dx=+c,this.dy=+f,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+g,this.clip=Ag(w),this.tip=RM(v),this.facet==="super"){if(u||s)throw new Error("super-faceting cannot use fx or fy");for(const M in this.channels){const{scale:_}=n[M];if(!(_!=="x"&&_!=="y"))throw new Error("super-faceting cannot use x or y")}}y!=null&&(this.render=Yg(y,this.render))}initialize(t,n,r){let i=kt(this.data);t===void 0&&i!=null&&(t=[In(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=kt(i)),t!==void 0&&(t.original=a);const o=t8(this.channels,i);return this.sort!=null&&r8(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=Jn}=n[i];if(a!==null){const o=r[i];t=t.filter(u=>a(o[u]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&E8(i,a,n,r.projection)}}scale(t,n,r){const i=n8(t,n);return r.projection&&this.project(t,i,r),i}}function Vg(...e){return e.plot=ht.prototype.plot,e}function Yg(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,u){return e.call(this,n,r,i,a,o,(s,l,c,f,h)=>t.call(this,s,l,c,f,h,u))}}function LM(e){return Object.fromEntries(Object.entries(mg(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:qa(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function RM(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?Jt(e,"tip",["x","y","xy"]):e}function fs(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:rr(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const $d=new WeakMap;function vf(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:u,render:s,...l}={}){return o=+o,i!=null&&(n??(n=null),u={...u,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),u={...u,py:{value:a,scale:"y"}}),{x:n,y:r,channels:u,...l,render:Yg(function(c,f,h,d,m,p){m={...m,pointerSticky:!1};const g=m.ownerSVGElement,{data:w}=m.getMarkState(this);let b=$d.get(g);b||$d.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(G)-1;const{x:y,y:M,fx:_,fy:x}=f;let A=_?_(c.fx)-d.marginLeft:0,E=x?x(c.fy)-d.marginTop:0;y!=null&&y.bandwidth&&(A+=y.bandwidth()/2),M!=null&&M.bandwidth&&(E+=M.bandwidth()/2);const F=c.fi!=null;let S;if(F){let V=b.facetStates;V||(b.facetStates=V=new Map),S=V.get(this),S||V.set(this,S=new Map)}const[D,O]=Ha(this,d),{px:L,py:C}=h,q=L?V=>L[V]:Xg(h,D),ie=C?V=>C[V]:Zg(h,O);let te,J,z,H;function T(V,Y){if(F)if(H&&(H=cancelAnimationFrame(H)),V==null)S.delete(c.fi);else{S.set(c.fi,Y),H=requestAnimationFrame(()=>{H=null;for(const[B,W]of S)if(W<Y||W===Y&&B<c.fi){V=null;break}G(V)});return}G(V)}function G(V){if(te===V&&z===b.sticky)return;te=V,z=m.pointerSticky=b.sticky;const Y=te==null?[]:[te];F&&(Y.fx=c.fx,Y.fy=c.fy,Y.fi=c.fi);const B=p(Y,f,h,d,m);if(J){if(F){const W=J.parentNode,j=J.getAttribute("transform"),$=B.getAttribute("transform");j?B.setAttribute("transform",j):B.removeAttribute("transform"),$?W.setAttribute("transform",$):W.removeAttribute("transform"),B.removeAttribute("aria-label"),B.removeAttribute("aria-description"),B.removeAttribute("aria-hidden")}J.replaceWith(B)}return b.roots[v]=J=B,te==null&&(S==null?void 0:S.size)>1||m.dispatchValue(te==null?null:w[te]),B}function ne(V){if(b.sticky||V.pointerType==="mouse"&&V.buttons===1)return;let[Y,B]=xv(V);Y-=A,B-=E;const W=Y<d.marginLeft||Y>d.width-d.marginRight?1:e,j=B<d.marginTop||B>d.height-d.marginBottom?1:t;let $=null,ge=o*o;for(const re of c){const me=W*(q(re)-Y),Me=j*(ie(re)-B),Ue=me*me+Me*Me;Ue<=ge&&($=re,ge=Ue)}if($!=null&&(e!==1||t!==1)){const re=q($)-Y,me=ie($)-B;ge=re*re+me*me}T($,ge)}function ue(V){V.pointerType==="mouse"&&te!=null&&(b.sticky&&b.roots.some(Y=>Y==null?void 0:Y.contains(V.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(Y=>Y(null))):(b.sticky=!0,G(te)),V.stopImmediatePropagation()))}function ae(V){V.pointerType==="mouse"&&(b.sticky||T(null))}return g.addEventListener("pointerenter",ne),g.addEventListener("pointermove",ne),g.addEventListener("pointerdown",ue),g.addEventListener("pointerleave",ae),G(null)},s)}}function jg(e){return vf(1,1,e)}function IM(e){return vf(1,.01,e)}function Dd(e){return vf(.01,1,e)}function Xg({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Zg({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function Kg(e){return Dr(e)&&e.interval===void 0?void 0:"tabular-nums"}function OM(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:u=0,marginBottom:s=16+r,marginLeft:l=0,style:c,ticks:f=(i-l-u)/64,tickFormat:h,fontVariant:d=Kg(e),round:m=!0,opacity:p,className:g}=t;const w=mf(t);g=hf(g),p=ft(p)[1],h===null&&(h=()=>null);const b=ze("svg",w).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(D=>D.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(df,c);let v=D=>D.selectAll(".tick line").attr("y1",o+s-a),y;const M=m?(D,O)=>D.rangeRound(O):(D,O)=>D.range(O),{type:_,domain:x,range:A,interpolate:E,scale:F,pivot:S}=e;if(E){const D=A===void 0?E:Ru(E.length===1?gf(E):E,A);y=M(F.copy(),jt(ot(l,i-u),Math.min(x.length+(S!==void 0),A===void 0?1/0:A.length)));const O=256,L=w.document.createElement("canvas");L.width=O,L.height=1;const C=L.getContext("2d");for(let q=0,ie=O-1;q<O;++q)C.fillStyle=D(q/ie),C.fillRect(q,0,1,1);b.append("image").attr("opacity",p).attr("x",l).attr("y",o).attr("width",i-l-u).attr("height",a-o-s).attr("preserveAspectRatio","none").attr("xlink:href",L.toDataURL())}else if(_==="threshold"){const D=x,O=h===void 0?L=>L:typeof h=="string"?gi(h):h;y=M(Oc().domain([-1,A.length-1]),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(A).enter().append("rect").attr("x",(L,C)=>y(C-1)).attr("y",o).attr("width",(L,C)=>y(C)-y(C-1)).attr("height",a-o-s).attr("fill",L=>L),f=Ve(D,(L,C)=>C),h=L=>O(D[L],L)}else y=M(Hu().domain(x),[l,i-u]),b.append("g").attr("fill-opacity",p).selectAll().data(x).enter().append("rect").attr("x",y).attr("y",o).attr("width",Math.max(0,y.bandwidth()-1)).attr("height",a-o-s).attr("fill",F),v=()=>{};return b.append("g").attr("transform",`translate(0,${a-s})`).call(q3(y).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",rt(d,"normal")).call(v).call(D=>D.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const Qg=Math.PI/180;function Ya(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=tl(n),e.markerMid=tl(r),e.markerEnd=tl(i)}function tl(e){if(e==null||e===!1)return null;if(e===!0)return Fd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Nd("auto");case"arrow-reverse":return Nd("auto-start-reverse");case"dot":return qM;case"circle":case"circle-fill":return Fd;case"circle-stroke":return GM;case"tick":return nl("auto");case"tick-x":return nl(90);case"tick-y":return nl(0)}throw new Error(`invalid marker: ${e}`)}function Nd(e){return(t,n)=>ze("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function qM(e,t){return ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Fd(e,t){return ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function GM(e,t){return ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function nl(e){return(t,n)=>ze("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let UM=0;function hs(e,t,{stroke:n},r){return Jg(e,t,n&&(i=>n[i]),r)}function zM(e,t,{stroke:n},r){return Jg(e,t,n&&(([i])=>n[i]),r)}function Jg(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const u=new Map;function s(l){return function(c){const f=a(c);let h=u.get(l);h||u.set(l,h=new Map);let d=h.get(f);if(!d){const m=this.parentNode.insertBefore(l(f,o),this),p=`plot-marker-${++UM}`;m.setAttribute("id",p),h.set(f,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",s(t)),n&&e.attr("marker-mid",s(n)),r&&e.attr("marker-end",s(r))}function _f({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=t2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function e2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=t2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function t2(e,t,n){return e===void 0&&t===void 0&&n===void 0?gt?[1,0]:[.5,.5]:[t,n]}function n2(e,{interval:t}){return e={...qa(e)},e.interval=af(e.interval===void 0?t:e.interval),e}function r2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:u,interval:s}=n2(i,n);if(u==null||s==null&&!r)return n;const l=$r(i);if(s==null){let d;const m={transform:p=>d||(d=et(p,u)),label:l};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let c,f;function h(d){return f!==void 0&&d===c?f:f=Ve(et(c=d,u),m=>s.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:h,label:l}:a,[`${e}2`]:o===void 0?{transform:d=>h(d).map(m=>s.offset(m)),label:l}:o})}function i2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=n2(r,n);return i==null||a==null?n:t({...n,[e]:{label:$r(r),transform:o=>{const u=Ve(et(o,i),l=>a.floor(l)),s=u.map(l=>a.offset(l));return u.map(vt(u)?(l,c)=>l==null||isNaN(l=+l)||(c=s[c],c==null)||isNaN(c=+c)?void 0:new Date((l+c)/2):(l,c)=>l==null||(c=s[c],c==null)?NaN:(+l+ +c)/2)}}})}function HM(e={}){return r2("x",_f,e)}function a2(e={}){return r2("y",e2,e)}function WM(e={}){return i2("x",_f,e)}function VM(e={}){return i2("y",e2,e)}const o2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class YM extends ht{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:u=o,insetBottom:s=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},fs(n,"x"),o2),this.insetTop=Fe(u),this.insetBottom=Fe(s),Ya(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y1:l,y2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetTop:w,insetBottom:b}=this;return ze("svg:g",a).call(Ut,this,i,a).call(Tt,this,{x:s&&o},gt,0).call(v=>v.selectAll().data(t).enter().append("line").call(zt,this).attr("x1",s?y=>s[y]:(p+f-m)/2).attr("x2",s?y=>s[y]:(p+f-m)/2).attr("y1",l&&!fi(u)?y=>l[y]+w:d+w).attr("y2",c&&!fi(u)?u.bandwidth?y=>c[y]+u.bandwidth()-b:y=>c[y]-b:h-g-b).call(qn,this,r).call(hs,this,r,a)).node()}}class jM extends ht{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:u=o,insetLeft:s=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},fs(n,"y"),o2),this.insetRight=Fe(u),this.insetLeft=Fe(s),Ya(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{y:s,x1:l,x2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:g}=i,{insetLeft:w,insetRight:b}=this;return ze("svg:g",a).call(Ut,this,i,a).call(Tt,this,{y:s&&u},0,gt).call(v=>v.selectAll().data(t).enter().append("line").call(zt,this).attr("x1",l&&!fi(o)?y=>l[y]+w:p+w).attr("x2",c&&!fi(o)?o.bandwidth?y=>c[y]+o.bandwidth()-b:y=>c[y]-b:f-m-b).attr("y1",s?y=>s[y]:(d+h-g)/2).attr("y2",s?y=>s[y]:(d+h-g)/2).call(qn,this,r).call(hs,this,r,a)).node()}}function Mf(e,t){let{x:n=st,y:r,y1:i,y2:a,...o}=a2(t);return[i,a]=u2(r,i,a),new YM(e,{...o,x:n,y1:i,y2:a})}function xf(e,t){let{y:n=st,x:r,x1:i,x2:a,...o}=HM(t);return[i,a]=u2(r,i,a),new jM(e,{...o,y:n,x1:i,x2:a})}function u2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Pf(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const XM={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},s2="";class Sf extends ht{constructor(t,n={}){const{x:r,y:i,text:a=ir(t)&&dg(t)?st:ns,frameAnchor:o,textAnchor:u=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:s=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:g,fontWeight:w,rotate:b}=n,[v,y]=ft(b,0),[M,_]=tx(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:M,optional:!0},rotate:{value:P9(v),optional:!0},text:{value:a,filter:Xc,optional:!0}},n,XM),this.rotate=y,this.textAnchor=rt(u,"middle"),this.lineAnchor=Jt(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=l2(f),this.monospace=!!h,this.fontFamily=ct(d),this.fontSize=_,this.fontStyle=ct(p),this.fontVariant=ct(g),this.fontWeight=ct(w),this.frameAnchor=as(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=f2(this),this.clipLine=h2(this)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,rotate:c,text:f,title:h,fontSize:d}=r,{rotate:m}=this,[p,g]=Ha(this,i);return ze("svg:g",a).call(Ut,this,i,a).call(c2,this,f,i).call(Tt,this,{x:s&&o,y:l&&u}).call(w=>w.selectAll().data(t).enter().append("text").call(zt,this).call(ZM,this,f,h).attr("transform",Pf`translate(${s?b=>s[b]:p},${l?b=>l[b]:g})${c?b=>` rotate(${c[b]})`:m?` rotate(${m})`:""}`).call(fe,"font-size",d&&(b=>d[b])).call(qn,this,r)).node()}}function l2(e){return e==null?null:Jt(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function ZM(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:u,clipLine:s}=t;e.each(function(l){const c=u(Ar(n[l])??"").map(s),f=c.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let m=0;m<f;++m){if(++d,!c[m])continue;const p=this.ownerDocument.createElementNS(Jr.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(h+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=c[m],this.appendChild(p),d=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=c[0];if(o&&!r&&c[0]!==n[l]){const d=this.ownerDocument.createElementNS(Jr.svg,"title");d.textContent=n[l],this.appendChild(d)}})}function Af(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Oa(t,n)),new Sf(e,{...r,x:t,y:n})}function KM(e,{x:t=st,...n}={}){return new Sf(e,VM({...n,x:t}))}function QM(e,{y:t=st,...n}={}){return new Sf(e,WM({...n,y:t}))}function c2(e,t,n){fe(e,"text-anchor",t.textAnchor),fe(e,"font-family",t.fontFamily),fe(e,"font-size",t.fontSize),fe(e,"font-style",t.fontStyle),fe(e,"font-variant",t.fontVariant===void 0?JM(n):t.fontVariant),fe(e,"font-weight",t.fontWeight)}function JM(e){return e&&(E9(e)||vt(e))?"tabular-nums":void 0}const ex=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function tx(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),ex.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function nx(e,t,n){const r=[];let i,a=0;for(const[o,u,s]of rx(e)){if(i===void 0&&(i=o),a>i&&n(e,i,u)>t&&(r.push(e.slice(i,a)+(e[a-1]===s2?"-":"")),i=o),s){r.push(e.slice(i,u)),i=void 0;continue}a=u}return r}function*rx(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case s2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Bd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Ef(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=vi(e,i))r+=Bd[e[i]]??(m2(e,i)?120:Bd.e);return r}function Cf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=vi(e,i))r+=m2(e,i)?126:63;return r}function f2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?Cf:Ef,i=t*100;return a=>nx(a,i,r)}function h2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?Cf:Ef,i=t*100;switch(n){case"clip-start":return a=>Rd(a,i,r,"");case"clip-end":return a=>Ld(a,i,r,"");case"ellipsis-start":return a=>Rd(a,i,r,Xr);case"ellipsis-middle":return a=>ix(a,i,r,Xr);case"ellipsis-end":return a=>Ld(a,i,r,Xr)}}const Xr="";function hi(e,t,n,r){const i=[];let a=0;for(let o=0,u=0,s=e.length;o<s;o=u){u=vi(e,o);const l=n(e,o,u);if(a+l>t){for(a+=r;a>t&&o>0;)u=o,o=i.pop(),a-=n(e,o,u);return[o,t-a]}a+=l,i.push(o)}return[-1,0]}function Ld(e,t,n,r){e=e.trim();const i=n(r),[a]=hi(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function ix(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,u]=hi(e,t/2,n,a),[s]=hi(e,i-t/2-u+a,n,-a);return s<0?r:e.slice(0,o).trimEnd()+r+e.slice(vi(e,s)).trimStart()}function Rd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=hi(e,i-t+a,n,-a);return o<0?r:r+e.slice(vi(e,o)).trimStart()}const ac=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Id=new RegExp("\\p{Extended_Pictographic}","uy");function vi(e,t){return t+=ax(e,t)?2:1,ux(e,t)&&(t=ac.lastIndex),ox(e,t)?vi(e,t+1):t}function d2(e,t){return e.charCodeAt(t)<128}function ax(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function ox(e,t){return e.charCodeAt(t)===8205}function ux(e,t){return d2(e,t)?!1:(ac.lastIndex=t,ac.test(e))}function m2(e,t){return d2(e,t)?!1:(Id.lastIndex=t,Id.test(e))}const sx={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},p2=3.5,lx=p2*5,b2={draw(e,t,n){const r=t*n/lx;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},cx={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},fx=new Map([["arrow",b2],["spike",cx]]);function hx(e){return e&&typeof e.draw=="function"}function dx(e){if(hx(e))return e;const t=fx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class g2 extends ht{constructor(t,n={}){const{x:r,y:i,r:a=p2,length:o,rotate:u,shape:s=b2,anchor:l="middle",frameAnchor:c}=n,[f,h]=ft(o,12),[d,m]=ft(u,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,sx),this.r=+a,this.length=h,this.rotate=m,this.shape=dx(s),this.anchor=Jt(l,"anchor",["start","middle","end"]),this.frameAnchor=as(c)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,length:c,rotate:f}=r,{length:h,rotate:d,anchor:m,shape:p,r:g}=this,[w,b]=Ha(this,i);return ze("svg:g",a).call(Ut,this,i,a).call(Tt,this,{x:s&&o,y:l&&u}).call(v=>v.selectAll().data(t).enter().append("path").call(zt,this).attr("transform",Pf`translate(${s?y=>s[y]:w},${l?y=>l[y]:b})${f?y=>` rotate(${f[y]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?c?y=>` translate(0,${c[y]})`:` translate(0,${h})`:c?y=>` translate(0,${c[y]/2})`:` translate(0,${h/2})`}`).attr("d",c?y=>{const M=Vn();return p.draw(M,c[y],g),M}:(()=>{const y=Vn();return p.draw(y,h,g),y})()).call(qn,this,r)).node()}}function mx(e,t={}){const{x:n=st,...r}=t;return new g2(e,{...r,x:n})}function px(e,t={}){const{y:n=st,...r}=t;return new g2(e,{...r,y:n})}function or(e,t){return arguments.length<2&&!ir(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function ds({anchor:e}={},t){return e===void 0?t[0]:Jt(e,"anchor",t)}function y2(e){return ds(e,["left","right"])}function w2(e){return ds(e,["right","left"])}function v2(e){return ds(e,["bottom","top"])}function _2(e){return ds(e,["top","bottom"])}function M2(){const[e,t]=or(...arguments);return P2("y",y2(t),e,t)}function bx(){const[e,t]=or(...arguments);return P2("fy",w2(t),e,t)}function x2(){const[e,t]=or(...arguments);return S2("x",v2(t),e,t)}function gx(){const[e,t]=or(...arguments);return S2("fx",_2(t),e,t)}function P2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:g,x:w,margin:b,marginTop:v=b===void 0?20:b,marginRight:y=b===void 0?t==="right"?40:0:b,marginBottom:M=b===void 0?20:b,marginLeft:_=b===void 0?t==="left"?40:0:b,label:x,labelAnchor:A,labelArrow:E,labelOffset:F,...S}){return m=Fe(m),p=Fe(p),g=Fe(g),A!==void 0&&(A=Jt(A,"labelAnchor",["center","top","bottom"])),E=N2(E),Vg(m&&!bt(a)?yx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,x:w,...S}):null,bt(s)?null:vx(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,x:w,marginTop:v,marginRight:y,marginBottom:M,marginLeft:_,...S}),!bt(s)&&x!==null?Af([],k2({fill:s,fillOpacity:l,...S},function(D,O,L,C,q){const ie=C[e],{marginTop:te,marginRight:J,marginBottom:z,marginLeft:H}=e==="y"&&q.inset||q,T=A??(ie.bandwidth?"center":"top"),G=F??(t==="right"?J:H)-3;return T==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=T,this.frameAnchor=`${T}-${t}`,this.rotate=0),this.dy=T==="top"?3-te:T==="bottom"?z-3:0,this.dx=t==="right"?G:-G,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[D2(e,ie,{anchor:t,label:x,labelAnchor:T,labelArrow:E})]}}}})):null)}function S2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:g,y:w,margin:b,marginTop:v=b===void 0?t==="top"?30:0:b,marginRight:y=b===void 0?20:b,marginBottom:M=b===void 0?t==="bottom"?30:0:b,marginLeft:_=b===void 0?20:b,label:x,labelAnchor:A,labelArrow:E,labelOffset:F,...S}){return m=Fe(m),p=Fe(p),g=Fe(g),A!==void 0&&(A=Jt(A,"labelAnchor",["center","left","right"])),E=N2(E),Vg(m&&!bt(a)?wx(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:g,y:w,...S}):null,bt(s)?null:_x(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:g,y:w,marginTop:v,marginRight:y,marginBottom:M,marginLeft:_,...S}),!bt(s)&&x!==null?Af([],k2({fill:s,fillOpacity:l,...S},function(D,O,L,C,q){const ie=C[e],{marginTop:te,marginRight:J,marginBottom:z,marginLeft:H}=e==="x"&&q.inset||q,T=A??(ie.bandwidth?"center":"right"),G=F??(t==="top"?te:z)-3;return T==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${T}`,this.textAnchor=T==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-G:G,this.dx=T==="right"?J-3:T==="left"?3-H:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[D2(e,ie,{anchor:t,label:x,labelAnchor:T,labelArrow:E})]}}}})):null)}function yx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetLeft:c=l,insetRight:f=l,dx:h=0,y:d=e==="y"?void 0:null,...m}){return _i(px,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:u,y:d,...m,dx:t==="left"?+h-gt+ +c:+h+gt-f,anchor:"start",length:s,shape:t==="left"?kx:Tx})}function wx(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetTop:c=l,insetBottom:f=l,dy:h=0,x:d=e==="x"?void 0:null,...m}){return _i(mx,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:u,x:d,...m,dy:t==="bottom"?+h-gt-f:+h+gt+ +c,anchor:"start",length:s,shape:t==="bottom"?Ex:Cx})}function vx(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*Qg):0),text:s,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:c=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:m=h,dx:p=0,y:g=e==="y"?void 0:null,...w}){return _i(QM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,y:g,...w,dx:t==="left"?+p-a-u+ +d:+p+ +a+ +u-m},function(b,v,y,M,_){f===void 0&&(this.fontVariant=$2(b)),s===void 0&&(_.text=T2(b,v,y,M,t))})}function _x(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*Qg):0),text:s,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:m=h,dy:p=0,x:g=e==="x"?void 0:null,...w}){return _i(KM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,x:g,...w,dy:t==="bottom"?+p+ +a+ +u-m:+p-a-u+ +d},function(b,v,y,M,_){f===void 0&&(this.fontVariant=$2(b)),s===void 0&&(_.text=T2(b,v,y,M,t))})}function Mx(){const[e,t]=or(...arguments);return A2("y",y2(t),e,t)}function xx(){const[e,t]=or(...arguments);return A2("fy",w2(t),e,t)}function Px(){const[e,t]=or(...arguments);return E2("x",v2(t),e,t)}function Sx(){const[e,t]=or(...arguments);return E2("fx",_2(t),e,t)}function A2(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...u}){return _i(xf,e,t,`${e}-grid`,n,{y:r,x1:a,x2:o,...C2(u)})}function E2(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...u}){return _i(Mf,e,t,`${e}-grid`,n,{x:r,y1:a,y2:o,...C2(u)})}function C2({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function k2({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c=!1},f){return[,e]=Ln(e),[,t]=ft(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c,initializer:f}}function _i(e,t,n,r,i,a,o){let u;function s(f,h,d,m,p,g){const w=f==null&&(t==="fx"||t==="fy"),{[t]:b}=m;if(!b)throw new Error(`missing scale: ${t}`);const v=b.domain();let{interval:y,ticks:M,tickFormat:_,tickSpacing:x=t==="x"?80:35}=a;if(typeof M=="string"&&F2(b)&&(y=M,M=void 0),M===void 0&&(M=wi(y,b.type)??Ax(b,x)),f==null){if(ir(M))f=kt(M);else if(Hr(M))f=rl(M,...Ft(v));else if(b.interval){let E=b.interval;if(b.ticks){const[F,S]=Ft(v),D=(S-F)/E[Ra];E=od(E,D/M)??E,f=rl(E,F,S)}else{f=v;const F=f.length;E=od(E,F/M)??E,E!==b.interval&&(f=rl(E,...Ft(f)))}if(E===b.interval){const F=Math.round(f.length/M);F>1&&(f=f.filter((S,D)=>D%F===0))}}else b.ticks?f=b.ticks(M):f=v;if(!b.ticks&&f.length&&f!==v){const E=new ku(v);f=f.filter(F=>E.has(F)),f.length||Xn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[In(f)]:u[t]={scale:t,value:st}}o==null||o.call(this,b,f,M,_,u);const A=Object.fromEntries(Object.entries(u).map(([E,F])=>[E,{...F,value:et(f,F.value)}]));return w&&(h=g.filterFacets(f,A)),{data:f,facets:h,channels:A}}const l=ci(a).initializer,c=e(i,ci({...a,initializer:s},l));return i==null?(u=c.channels,c.channels={}):u={},c.ariaLabel=r,c.clip===void 0&&(c.clip=!1),c}function Ax(e,t){const[n,r]=Ft(e.range());return(r-n)/t}function T2(e,t,n,r,i){return{value:kf(e,t,n,r,i)}}function kf(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&vt(t)?l9(e.type,t,i)??Ar:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Ar:typeof r=="string"?(vt(e.domain())?Ba:gi)(r):Ia(r)}function rl(e,t,n){return e.range(t,e.offset(e.floor(n)))}const Ex={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},Cx={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},kx={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},Tx={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function $2(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function D2(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&F2(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!a)return r;if(a===!0){const o=mM(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function N2(e="auto"){return bt(e)?!1:typeof e=="boolean"?e:Jt(e,"labelArrow",["auto","up","right","down","left"])}function F2(e){return vt(e.domain())}function Od(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function $x(e,{opacity:t,...n}={}){if(!Dr(e)&&!Wg(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return B2(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",ft(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Dx(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:bt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...u}={},s){const[f,h]=Ln(t),[d,m]=Ln(r),p=Od(s,f),g=Od(s,d),w=o*o*Math.PI;return n=ft(n)[1],i=ft(i)[1],a=ft(a)[1],B2(e,u,(b,v,y,M)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",y).attr("height",M).attr("fill",f==="color"?_=>p.scale(_):h).attr("fill-opacity",n).attr("stroke",d==="color"?_=>g.scale(_):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",_=>{const x=Vn();return e.scale(_).draw(x,w),x}))}function B2(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=Kg(e),swatchSize:o=15,swatchWidth:u=o,swatchHeight:s=o,marginLeft:l=0,className:c,style:f,width:h}=t;const d=mf(t);c=hf(c),i=kf(e.scale,e.domain,void 0,i);const m=ze("div",d).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,u,s).call(g=>g.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,u,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(g=>g.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",l?`${+l}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",rt(a,"normal")).call(df,f).node()}const oc=new Map([["symbol",Dx],["color",R2],["opacity",Fx]]);function Nx(e,t,n={}){return(r,i)=>{if(!oc.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return oc.get(r)(e[r],L2(t,n[r],i),a=>e[a])}}function L2({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return $9(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function R2(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return $x(e,n);case"ramp":return OM(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function Fx({type:e,interpolate:t,...n},{legend:r=!0,color:i=Kn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return R2({type:e,...n,interpolate:Bx(i)},{legend:r,...a})}function Bx(e){const{r:t,g:n,b:r}=Kn(e)||Kn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function Lx(e,t,n){const r=[];for(const[i,a]of oc){const o=n[i];if(o!=null&&o.legend&&i in e){const u=a(e[i],L2(t,e[i],o),s=>e[s]);u!=null&&r.push(u)}}return r}const Rx={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Ix={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Ox extends ht{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:u=r,rx:s,ry:l}=t;super(Eo,void 0,t,n==null?Rx:Ix),this.anchor=lg(n,"anchor",["top","right","bottom","left"]),this.insetTop=Fe(i),this.insetRight=Fe(a),this.insetBottom=Fe(o),this.insetLeft=Fe(u),this.rx=Fe(s),this.ry=Fe(l)}render(t,n,r,i,a){const{marginTop:o,marginRight:u,marginBottom:s,marginLeft:l,width:c,height:f}=i,{anchor:h,insetTop:d,insetRight:m,insetBottom:p,insetLeft:g,rx:w,ry:b}=this,v=l+g,y=c-u-m,M=o+d,_=f-s-p;return ze(h?"svg:line":"svg:rect",a).datum(0).call(Ut,this,i,a).call(zt,this).call(qn,this,r).call(Tt,this,{}).call(h==="left"?x=>x.attr("x1",v).attr("x2",v).attr("y1",M).attr("y2",_):h==="right"?x=>x.attr("x1",y).attr("x2",y).attr("y1",M).attr("y2",_):h==="top"?x=>x.attr("x1",v).attr("x2",y).attr("y1",M).attr("y2",M):h==="bottom"?x=>x.attr("x1",v).attr("x2",y).attr("y1",_).attr("y2",_):x=>x.attr("x",v).attr("y",M).attr("width",y-v).attr("height",_-M).attr("rx",w).attr("ry",b)).node()}}function qx(e){return new Ox(e)}const il={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},Gx=new Set(["geometry","href","src","ariaLabel","scales"]);class Ux extends ht{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ir(t)&&dg(t)&&(n={...n,title:st});const{x:r,y:i,x1:a,x2:o,y1:u,y2:s,anchor:l,preferredAnchor:c="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:g,lineHeight:w=1,lineWidth:b=20,frameAnchor:v,format:y,textAnchor:M="start",textOverflow:_,textPadding:x=8,title:A,pointerSize:E=12,pathFilter:F="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:u!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:u,scale:"y",optional:s==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:s,scale:"y",optional:u==null},title:{value:A,optional:!0}},n,il),this.anchor=Jl(l,"anchor"),this.preferredAnchor=Jl(c,"preferredAnchor"),this.frameAnchor=as(v),this.textAnchor=rt(M,"middle"),this.textPadding=+x,this.pointerSize=+E,this.pathFilter=ct(F),this.lineHeight=+w,this.lineWidth=+b,this.textOverflow=l2(_),this.monospace=!!f,this.fontFamily=ct(h),this.fontSize=Fe(d),this.fontStyle=ct(m),this.fontVariant=ct(p),this.fontWeight=ct(g);for(const S in il)S in this.channels&&(this[S]=il[S]);this.splitLines=f2(this),this.clipLine=h2(this),this.format={...y}}render(t,n,r,i,a){const o=this,{x:u,y:s,fx:l,fy:c}=n,{ownerSVGElement:f,document:h}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:g}=this,{textPadding:w,pointerSize:b,pathFilter:v}=this,{marginTop:y,marginLeft:M}=i,{x1:_,y1:x,x2:A,y2:E,x:F=_??A,y:S=x??E}=r,D=l?l(t.fx)-M:0,O=c?c(t.fy)-y:0,[L,C]=Ha(this,i),q=Xg(r,L),ie=Zg(r,C),te=m?Cf:Ef,J=te(Xr);let z,H;"title"in r?(z=r.channels,H=Yx):(z=Vx.call(this,r,n),H=jx);const T=ze("svg:g",a).call(Ut,this,i,a).call(c2,this).call(Tt,this,{x:F&&u,y:S&&s}).call(ue=>ue.selectAll().data(t).enter().append("g").attr("transform",ae=>`translate(${Math.round(q(ae))},${Math.round(ie(ae))})`).call(zt,this).call(ae=>ae.append("path").attr("filter",v)).call(ae=>ae.append("text").each(function(V){const Y=Vi(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const B=H.call(o,V,t,z,n,r);if(typeof B=="string")for(const W of o.splitLines(B))G(Y,{value:o.clipLine(W)});else{const W=new Set;for(const j of B){const{label:$=""}=j;$&&W.has($)||(W.add($),G(Y,j))}}})));function G(ue,{label:ae,value:V,color:Y,opacity:B}){ae??(ae=""),V??(V="");const W=Y!=null||B!=null;let j,$=g*100;const[ge]=hi(ae,$,te,J);if(ge>=0)ae=ae.slice(0,ge).trimEnd()+Xr,j=V.trim(),V="";else{(ae||!V&&!W)&&(V=" "+V);const[me]=hi(V,$-te(ae),te,J);me>=0&&(j=V.trim(),V=V.slice(0,me).trimEnd()+Xr)}const re=ue.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");ae&&re.append("tspan").attr("font-weight","bold").text(ae),V&&re.append(()=>h.createTextNode(V)),W&&re.append("tspan").text(" ").attr("fill",Y).attr("fill-opacity",B).style("user-select","none"),j&&re.append("title").text(j)}function ne(){const{width:ue,height:ae}=i.facet??i;T.selectChildren().each(function(V){let{x:Y,width:B,height:W}=this.getBBox();B=Math.round(B),W=Math.round(W);let j=d;if(j===void 0){const re=q(V)+D,me=ie(V)+O,Me=re+B+b+w*2<ue,Ue=re-B-b-w*2>0,nt=me+W+b+w*2<ae,De=me-W-b-w*2>0;j=Me&&Ue?nt&&De?o.preferredAnchor:De?"bottom":"top":nt&&De?Me?"left":"right":(Me||Ue)&&(nt||De)?`${De?"bottom":"top"}-${Me?"left":"right"}`:o.preferredAnchor}const $=this.firstChild,ge=this.lastChild;if($.setAttribute("d",Wx(j,b,w,B,W)),Y)for(const re of ge.childNodes)re.setAttribute("x",-Y);ge.setAttribute("y",`${+zx(j,ge.childNodes.length,p).toFixed(6)}em`),ge.setAttribute("transform",`translate(${Hx(j,b,w,B,W)})`)}),T.attr("visibility",null)}return t.length&&(T.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(ne):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ne)),T.node()}}function I2(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Oa(t,n)),new Ux(e,{...r,x:t,y:n})}function zx(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function Hx(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function Wx(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function Vx({channels:e},t){var i,a;const n={};let r=this.format;r=qd(r,e,"x"),r=qd(r,e,"y"),this.format=r;for(const o in r){const u=r[o];if(!(u===null||u===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const s=pd(e,o);s&&(n[o]=s)}}for(const o in e){if(o in n||o in r||Gx.has(o))continue;const u=pd(e,o);u&&(n[o]=u)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const u=this.format[o];if(typeof u=="string"){const s=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(vt(s)?Ba:gi)(u)}else if(u===void 0||u===!0){const s=t[o];this.format[o]=s!=null&&s.bandwidth?kf(s,s.domain()):Ar}}return n}function qd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([u])=>u===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function Yx(e,t,{title:n}){return Ar(n.value[e],e)}function*jx(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:wu(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:Ud(r,n,"x"),value:Gd(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:Ud(r,n,"y"),value:Gd(this.format.y2,n.y1,o,e)};else{const u=o.value[e],s=o.scale;if(!Jn(u)&&s==null)continue;yield{label:wu(r,n,a),value:this.format[a](u,e),color:s==="color"?i[a][e]:null,opacity:s==="opacity"?i[a][e]:null}}}}function Gd(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Ud(e,t,n){const r=wu(e,t,`${n}1`,n),i=wu(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function wu(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function dt(e={}){var J;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:u}=e,s=hf(e.className),l=e.marks===void 0?[]:Hd(e.marks);l.push(...nP(l));const c=eP(t,e),f=new Map;for(const z of l){const H=Wd(z,c,e);H&&f.set(z,H)}const h=new Map;c&&$i(h,[c],e),$i(h,f,e);const d=Hd(rP(l,h,e));for(const z of d){const H=Wd(z,c,e);H&&f.set(z,H)}l.unshift(...d);let m=PM(h,e);if(m!==void 0){const z=c?el(m,c):void 0;for(const T of l){if(T.facet===null||T.facet==="super")continue;const G=f.get(T);G!==void 0&&(G.facetsIndex=T.fx!=null||T.fy!=null?el(m,G):z)}const H=new Set;for(const{facetsIndex:T}of f.values())T==null||T.forEach((G,ne)=>{(G==null?void 0:G.length)>0&&H.add(ne)});m.forEach(0<H.size&&H.size<m.length?(T,G)=>T.empty=!H.has(G):T=>T.empty=!1);for(const T of l)if(T.facet==="exclude"){const G=f.get(T);G!==void 0&&(G.facetsIndex=EM(G.facetsIndex))}}for(const z of Ie.keys())Kl(e[z])&&z!=="fx"&&z!=="fy"&&h.set(z,[]);const p=new Map;for(const z of l){if(p.has(z))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:H,channels:T}=f.get(z)??{},{data:G,facets:ne,channels:ue}=z.initialize(H,T,e);Tf(ue,e),p.set(z,{data:G,facets:ne,channels:ue})}const g=rc($i(h,p,e),e),w=MM(g,l,e);hM(g,w);const b=Pd(g),{fx:v,fy:y}=b,M=v||y?Ug(g,w):w,_=v||y?cP(b,w):w,x=mf(e),A=x.document,E=Fu("svg").call(A.documentElement);let F=E;x.ownerSVGElement=E,x.className=s,x.projection=P8(e,M),x.filterFacets=(z,H)=>el(m,{channels:H,groups:wf(z,H)}),x.getMarkState=z=>{const H=p.get(z),T=f.get(z);return{...H,channels:{...H.channels,...T==null?void 0:T.channels}}},x.dispatchValue=z=>{F.value!==z&&(F.value=z,F.dispatchEvent(new Event("input",{bubbles:!0})))};const S=new Set;for(const[z,H]of p)if(z.initializer!=null){const T=z.facet==="super"?_:M,G=z.initializer(H.data,H.facets,H.channels,b,T,x);if(G.data!==void 0&&(H.data=G.data),G.facets!==void 0&&(H.facets=G.facets),G.channels!==void 0){const{fx:ne,fy:ue,...ae}=G.channels;Jx(ae),Object.assign(H.channels,ae);for(const V of Object.values(ae)){const{scale:Y}=V;Y!=null&&!N9(Ie.get(Y))&&(O2(V,e),S.add(Y))}(ne!=null||ue!=null)&&f.set(z,!0)}}if(S.size){const z=new Map;$i(z,p,e,ne=>S.has(ne)),$i(h,p,e,ne=>S.has(ne));const H=lP(rc(z,e),g),{scales:T,...G}=Pd(H);Object.assign(g,H),Object.assign(b,G),Object.assign(b.scales,T)}let D,O;m!==void 0&&(D={x:v==null?void 0:v.domain(),y:y==null?void 0:y.domain()},m=SM(m,D),O=AM(v,y,w));for(const[z,H]of p)H.values=z.scale(H.channels,b,x);const{width:L,height:C}=w;Vi(E).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",L).attr("height",C).attr("viewBox",`0 0 ${L} ${C}`).attr("aria-label",o).attr("aria-description",u).call(z=>z.append("style").text(`:where(.${s}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${s} text),
:where(.${s} tspan) {
  white-space: pre;
}`)).call(df,n);for(const z of l){const{channels:H,values:T,facets:G}=p.get(z);if(m===void 0||z.facet==="super"){let ne=null;if(G&&(ne=G[0],ne=z.filter(ne,H,T),ne.length===0))continue;const ue=z.render(ne,b,T,_,x);if(ue==null)continue;E.appendChild(ue)}else{let ne;for(const ue of m){if(!(((J=z.facetAnchor)==null?void 0:J.call(z,m,D,ue))??!ue.empty))continue;let ae=null;if(G){const Y=f.has(z);if(ae=G[Y?ue.i:0],ae=z.filter(ae,H,T),ae.length===0)continue;!Y&&ae===G[0]&&(ae=v9(ae)),ae.fx=ue.x,ae.fy=ue.y,ae.fi=ue.i}const V=z.render(ae,b,T,M,x);if(V!=null){(ne??(ne=Vi(E).append("g"))).append(()=>V).datum(ue);for(const Y of["aria-label","aria-description","aria-hidden","transform"])V.hasAttribute(Y)&&(ne.attr(Y,V.getAttribute(Y)),V.removeAttribute(Y))}}ne==null||ne.selectChildren().attr("transform",O)}}const q=Lx(g,x,e),{figure:ie=r!=null||i!=null||a!=null||q.length>0}=e;ie&&(F=A.createElement("figure"),F.className=`${s}-figure`,F.style.maxWidth="initial",r!=null&&F.append(zd(A,r,"h2")),i!=null&&F.append(zd(A,i,"h3")),F.append(...q,E),a!=null&&F.append(Xx(A,a))),F.scale=vM(b.scales),F.legend=Nx(g,x,e);const te=h8();return te>0&&Vi(E).append("text").attr("x",L).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${te.toLocaleString("en-US")} warning${te===1?"":"s"}. Please check the console.`),F}function zd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function Xx(e,t){const n=e.createElement("figcaption");return n.append(t),n}function Zx({marks:e=[],...t}={}){return dt({...t,marks:[...e,this]})}ht.prototype.plot=Zx;function Hd(e){return e.flat(1/0).filter(t=>t!=null).map(Kx)}function Kx(e){return typeof e.render=="function"?e:new Qx(e)}class Qx extends ht{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Tf(e,t){for(const n in e)O2(e[n],t);return e}function O2(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:u=a?s=>s*100:hg(o,i)}=t[n]??{};u!=null&&(e.value=Ve(e.value,u),e.transform=!1)}function Jx(e){for(const t in e)_g(t,e[t])}function $i(e,t,n,r=m9){var i,a;for(const{channels:o}of t.values())for(const u in o){const s=o[u],{scale:l}=s;if(l!=null&&r(l))if(l==="projection"){if(!C8(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,f=((a=n.y)==null?void 0:a.domain)===void 0;if(c||f){const[h,d]=T8(s);c&&al(e,"x",h),f&&al(e,"y",d)}}}else al(e,l,s)}return e}function al(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function eP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=kt(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=ma(i,{value:n,scale:"fx"})),r!=null&&(a.fy=ma(i,{value:r,scale:"fy"})),Tf(a,t);const o=wf(i,a);return{channels:a,groups:o,data:e.data}}function Wd(e,t,n){var s;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=kt(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const c={};return r!=null&&(c.fx=ma(l,{value:r,scale:"fx"})),i!=null&&(c.fy=ma(l,{value:i,scale:"fy"})),Tf(c,n),{channels:c,groups:wf(l,c)}}if(t===void 0)return;const{channels:a,groups:o,data:u}=t;if(e.facet!=="auto"||e.data===u)return{channels:a,groups:o};u.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((s=kt(e.data))==null?void 0:s.length)===u.length&&Xn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function tP(e,t={}){return ci({...t,x:null,y:null},(n,r,i,a,o,u)=>u.getMarkState(e))}function nP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?IM:/^y$/i.test(i)?Dd:jg,r=i(tP(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===Dd?"left":"bottom");const o=I2(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function rP(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:u={},axis:s,grid:l,facet:c={},facet:{axis:f=s,grid:h}=c,x:{axis:d=s,grid:m=d===null?null:l}=i,y:{axis:p=s,grid:g=p===null?null:l}=a,fx:{axis:w=f,grid:b=w===null?null:h}=o,fy:{axis:v=f,grid:y=v===null?null:h}=u}=n;(r||!Kl(i)&&!Vd("x",e))&&(d=m=null),(r||!Kl(a)&&!Vd("y",e))&&(p=g=null),t.has("fx")||(w=b=null),t.has("fy")||(v=y=null),d===void 0&&(d=!go(e,"x")),p===void 0&&(p=!go(e,"y")),w===void 0&&(w=!go(e,"fx")),v===void 0&&(v=!go(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),w===!0&&(w=d==="top"||d===null?"bottom":"top"),v===!0&&(v=p==="right"||p===null?"left":"right");const M=[];return bo(M,y,xx,u),po(M,v,bx,"right","left",c,u),bo(M,b,Sx,o),po(M,w,gx,"top","bottom",c,o),bo(M,g,Mx,a),po(M,p,M2,"left","right",n,a),bo(M,m,Px,i),po(M,d,x2,"bottom","top",n,i),M}function po(e,t,n,r,i,a,o){if(!t)return;const u=iP(t);o=aP(u?r:t,a,o);const{line:s}=o;(n===M2||n===x2)&&s&&!da(s)&&e.push(qx(oP(o))),e.push(n(o)),u&&e.push(n({...o,anchor:i,label:null}))}function bo(e,t,n,r){!t||da(t)||e.push(n(uP(t,r)))}function iP(e){return/^\s*both\s*$/i.test(e)}function aP(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:m,labelOffset:p}}function oP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function uP(e,{stroke:t=is(e)?e:void 0,ticks:n=sP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function sP(e){switch(typeof e){case"number":return!0;case"string":return!is(e)}return ir(e)||typeof(e==null?void 0:e.range)=="function"}function go(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function Vd(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function lP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function cP({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=yf(n),l=e&&Yd(e),c=t&&Yd(t);return{marginTop:t?c[0]:r,marginRight:e?u-l[1]:i,marginBottom:t?s-c[1]:a,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:u,height:s}}function Yd(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const fP=new Map([["basis",y4],["basis-closed",w4],["basis-open",v4],["bundle",_4],["bump-x",u4],["bump-y",s4],["cardinal",M4],["cardinal-closed",x4],["cardinal-open",P4],["catmull-rom",S4],["catmull-rom-closed",A4],["catmull-rom-open",E4],["linear",La],["linear-closed",C4],["monotone-x",k4],["monotone-y",T4],["natural",$4],["step",D4],["step-after",F4],["step-before",N4]]);function q2(e=La,t){if(typeof e=="function")return e;const n=fP.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function G2(e=di,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?di:q2(e,t)}function di(e){return La(e)}function hP(e={y:"count"},t={}){[e,t]=pP(e,t);const{x:n,y:r}=t;return mP(bP(n,t,st),null,null,r,e,_f(t))}function dP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=ff}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function U2(e={}){return dP(hP,"y",fs(e,"x"))}function mP(e,t,n,r,{data:i=vg,filter:a=yu,sort:o,reverse:u,...s}={},l={}){e=jd(e),t=jd(t),s=yP(s,l),i=W2(i,st),o=o==null?void 0:z2("sort",o,l),a=a==null?void 0:H2("filter",a,l),n!=null&&co(s,"x","x1","x2")&&(n=null),r!=null&&co(s,"y","y1","y2")&&(r=null);const[c,f]=Pn(e),[h,d]=Pn(e),[m,p]=Pn(t),[g,w]=Pn(t),[b,v]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[y,M]=Pn(b),{x:_,y:x,z:A,fill:E,stroke:F,x1:S,x2:D,y1:O,y2:L,domain:C,cumulative:q,thresholds:ie,interval:te,...J}=l,[z,H]=Pn(A),[T]=Ln(E),[G]=Ln(F),[ne,ue]=Pn(T),[ae,V]=Pn(G);return{..."z"in l&&{z:z||A},..."fill"in l&&{fill:ne||E},..."stroke"in l&&{stroke:ae||F},...us(J,(Y,B,W)=>{const j=fg(et(Y,b),W==null?void 0:W[v]),$=et(Y,A),ge=et(Y,T),re=et(Y,G),me=Y9(s,{z:$,fill:ge,stroke:re}),Me=[],Ue=[],nt=j&&M([]),De=$&&H([]),Mt=ge&&ue([]),Ne=re&&V([]),Nr=e&&f([]),Ht=e&&d([]),Te=t&&p([]),Mi=t&&w([]),tn=_P(e,t,Y);let He=0;for(const se of s)se.initialize(Y);o&&o.initialize(Y),a&&a.initialize(Y);for(const se of B){const K=[];for(const xe of s)xe.scope("facet",se);o&&o.scope("facet",se),a&&a.scope("facet",se);for(const[xe,R]of fd(se,me))for(const[ee,le]of fd(R,j))for(const[Ee,xt]of tn(le))if(!(a&&!a.reduce(Ee,xt))){K.push(He++),Ue.push(i.reduceIndex(Ee,Y,xt)),j&&nt.push(ee),$&&De.push(me===$?xe:$[(Ee.length>0?Ee:le)[0]]),ge&&Mt.push(me===ge?xe:ge[(Ee.length>0?Ee:le)[0]]),re&&Ne.push(me===re?xe:re[(Ee.length>0?Ee:le)[0]]),Nr&&(Nr.push(xt.x1),Ht.push(xt.x2)),Te&&(Te.push(xt.y1),Mi.push(xt.y2));for(const Fr of s)Fr.reduce(Ee,xt);o&&o.reduce(Ee)}Me.push(K)}return j9(Me,o,u),{data:Ue,facets:Me}}),...!co(s,"x")&&(c?{x1:c,x2:h,x:Ql(c,h)}:{x:_,x1:S,x2:D}),...!co(s,"y")&&(m?{y1:m,y2:g,y:Ql(m,g)}:{y:x,y1:O,y2:L}),...y&&{[v]:y},...Object.fromEntries(s.map(({name:Y,output:B})=>[Y,B]))}}function pP({cumulative:e,domain:t,thresholds:n,interval:r,...i},a){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...a}]}function bP(e,{cumulative:t,domain:n,thresholds:r,interval:i},a){return e={...qa(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=a),e.thresholds=gP(e.thresholds,e.interval),e}function jd(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Ft,thresholds:i}=e,a=o=>{let u=et(o,t),s;if(vt(u)||vP(i)){u=Ve(u,sg,Float64Array);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Hr(i)?i(u,c,f):i;typeof h=="number"&&(h=ip(c,f,h)),Hr(h)&&(r===Ft&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f))),s=h}else{u=un(u);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Hr(i)?i(u,c,f):i;if(typeof h=="number")if(r===Ft){let d=Go(c,f,h);if(isFinite(d))if(d>0){let m=Math.round(c/d),p=Math.round(f/d);m*d<=c||--m,p*d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let w=0;w<g;++w)h[w]=(m+w)*d}else if(d<0){d=-d;let m=Math.round(c*d),p=Math.round(f*d);m/d<=c||--m,p/d>f||++p;let g=p-m+1;h=new Float64Array(g);for(let w=0;w<g;++w)h[w]=(m+w)/d}else h=[c];else h=[c]}else h=ta(c,f,h);else Hr(h)&&(r===Ft&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f)));s=h}const l=[];if(s.length===1)l.push([s[0],s[0]]);else for(let c=1;c<s.length;++c)l.push([s[c-1],s[c]]);return l.bin=(n<0?xP:n>0?MP:$f)(l,s,u),l};return a.label=$r(t),a}function gP(e,t,n=Xd){if(e===void 0)return t===void 0?n:wi(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return C3;case"scott":return b1;case"sturges":return P3;case"auto":return Xd}return Jc(e)}return e}function yP(e,t){return H9(e,t,z2)}function z2(e,t,n){return yg(e,t,n,H2)}function H2(e,t,n){return wg(e,t,n,W2)}function W2(e,t){return cf(e,t,wP)}function wP(e){switch(`${e}`.toLowerCase()){case"x":return PP;case"x1":return AP;case"x2":return EP;case"y":return SP;case"y1":return CP;case"y2":return kP}throw new Error(`invalid bin reduce: ${e}`)}function Xd(e,t,n){return Math.min(200,b1(e,t,n))}function vP(e){return x9(e)||ir(e)&&vt(e)}function _P(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries()){const c=i.bin(o[u]);for(const[f,[h,d]]of i.entries())yield[c[f],{data:n,x1:s,y1:h,x2:l,y2:d}]}}:r?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries())yield[o[u],{data:n,x1:s,x2:l}]}:function*(a){const o=i.bin(a);for(const[u,[s,l]]of i.entries())yield[o[u],{data:n,y1:s,y2:l}]}}function $f(e,t,n){return t=un(t),r=>{var a;const i=e.map(()=>[]);for(const o of r)(a=i[Eu(t,n[o])-1])==null||a.push(o);return i}}function MP(e,t,n){const r=$f(e,t,n);return i=>{const a=r(i);for(let o=1,u=a.length;o<u;++o){const s=a[o-1],l=a[o];for(const c of s)l.push(c)}return a}}function xP(e,t,n){const r=$f(e,t,n);return i=>{const a=r(i);for(let o=a.length-2;o>=0;--o){const u=a[o+1],s=a[o];for(const l of u)s.push(l)}return a}}function V2(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const PP={reduceIndex(e,t,{x1:n,x2:r}){return V2(n,r)}},SP={reduceIndex(e,t,{y1:n,y2:r}){return V2(n,r)}},AP={reduceIndex(e,t,{x1:n}){return n}},EP={reduceIndex(e,t,{x2:n}){return n}},CP={reduceIndex(e,t,{y1:n}){return n}},kP={reduceIndex(e,t,{y2:n}){return n}};function Y2(e={}){return cg(e)?e:{...e,y:st}}function TP(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const u of t)for(const s of u)r[s]&&++i,r[s]=1;if(i===0)return{data:e,facets:t};e=ha(e);const a=e[og]=new Uint32Array(n+i);t=t.map(u=>ha(u,Uint32Array));let o=n;r.fill(0);for(const u of t)for(let s=0,l=u.length;s<l;++s){const c=u[s];r[c]?(u[s]=o,e[o]=e[c],a[o]=c,++o):a[c]=c,r[c]=1}return{data:e,facets:t}}function $P(e={},t={}){arguments.length===1&&([e,t]=DP(e));const{x1:n,x:r=n,y:i,...a}=t,[o,u,s,l]=FP(r,i,"x","y",e,a);return{...o,x1:n,x:u,y1:s,y2:l,y:Ql(s,l)}}function j2({y:e,y1:t,y2:n,...r}={}){return r=fs(r,"x"),t===void 0&&n===void 0?$P({y:e,...r}):([t,n]=w9(e,t,n),{...r,y1:t,y2:n})}function DP(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const NP={length:!0};function FP(e,t=d9,n,r,{offset:i,order:a,reverse:o},u){if(t===null)throw new Error(`stack requires ${r}`);const s=nf(u),[l,c]=Pn(e),[f,h]=gu(t),[d,m]=gu(t);return f.hint=d.hint=NP,i=BP(i),a=IP(a,i,r),[us(u,(p,g,w)=>{({data:p,facets:g}=TP(p,g));const b=e==null?void 0:c(fg(et(p,e),w==null?void 0:w[n])),v=et(p,t,Float64Array),y=et(p,s),M=a&&a(p,b,v,y),_=p.length,x=h(new Float64Array(_)),A=m(new Float64Array(_)),E=[];for(const F of g){const S=b?Array.from(Tu(F,D=>b[D]).values()):[F];if(M)for(const D of S)D.sort(M);for(const D of S){let O=0,L=0;o&&D.reverse();for(const C of D){const q=v[C];q<0?O=A[C]=(x[C]=O)+q:q>0?L=A[C]=(x[C]=L)+q:A[C]=x[C]=L}}E.push(S)}return i&&i(E,x,A,y),{data:p,facets:g}}),l,f,d]}function BP(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return LP;case"center":case"silhouette":return RP;case"wiggle":return Z2}throw new Error(`unknown offset: ${e}`)}}function X2(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function LP(e,t,n){for(const r of e)for(const i of r){const[a,o]=X2(i,n);for(const u of i){const s=1/(o-a||1);t[u]=s*(t[u]-a),n[u]=s*(n[u]-a)}}}function RP(e,t,n){for(const r of e){for(const i of r){const[a,o]=X2(i,n);for(const u of i){const s=(o+a)/2;t[u]-=s,n[u]-=s}}K2(r,t,n)}Q2(e,t,n)}function Z2(e,t,n,r){for(const i of e){const a=new yr;let o=0;for(const u of i){let s=-1;const l=u.map(d=>Math.abs(n[d]-t[d])),c=u.map(d=>{s=r?r[d]:++s;const m=n[d]-t[d],p=a.has(s)?m-a.get(s):0;return a.set(s,m),p}),f=[0,...y3(c)];for(const d of u)t[d]+=o,n[d]+=o;const h=Zn(l);h&&(o-=Zn(l,(d,m)=>(c[m]/2+f[m])*d)/h)}K2(i,t,n)}Q2(e,t,n)}function K2(e,t,n){const r=Dn(e,i=>Dn(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function Q2(e,t,n){const r=e.length;if(r===1)return;const i=e.map(u=>u.flat()),a=i.map(u=>(Dn(u,s=>t[s])+Ot(u,s=>n[s]))/2),o=Dn(a);for(let u=0;u<r;u++){const s=o-a[u];for(const l of i[u])t[l]+=s,n[l]+=s}}function IP(e,t,n){if(e===void 0&&t===Z2)return Zd(Kt);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?bu:Kt;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return OP(i);case"z":return qP(i);case"sum":return GP(i);case"appearance":return UP(i);case"inside-out":return Zd(i)}return Kd(ug(e))}if(typeof e=="function")return(e.length===1?Kd:zP)(e);if(Array.isArray(e))return HP(e);throw new Error(`invalid order: ${e}`)}}function OP(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function qP(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function GP(e){return ms(e,(t,n,r,i)=>_c(In(t),a=>Zn(a,o=>r[o]),a=>i[a]))}function UP(e){return ms(e,(t,n,r,i)=>_c(In(t),a=>n[p1(a,o=>r[o])],a=>i[a]))}function Zd(e){return ms(e,(t,n,r,i)=>{const a=In(t),o=_c(a,f=>n[p1(f,h=>r[h])],f=>i[f]),u=Vr(a,f=>Zn(f,h=>r[h]),f=>i[f]),s=[],l=[];let c=0;for(const f of o)c<0?(c+=u.get(f),s.push(f)):(c-=u.get(f),l.push(f));return l.reverse().concat(s)})}function Kd(e){return t=>{const n=et(t,e);return(r,i)=>Kt(n[r],n[i])}}function zP(e){return t=>(n,r)=>e(t[n],t[r])}function HP(e){return ms(Kt,()=>e)}function ms(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new yr(t(n,r,i,a).map((u,s)=>[u,s]));return(u,s)=>e(o.get(a[u]),o.get(a[s]))}}const WP={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class VP extends ht{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,z:u,curve:s,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:nf(n),optional:!0}},n,WP),this.z=u,this.curve=q2(s,l)}filter(t){return t}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r;return ze("svg:g",a).call(Ut,this,i,a).call(Tt,this,n,0,0).call(c=>c.selectAll().data(Sg(t,[o,u,s,l],this,r)).enter().append("path").call(zt,this).call(Pg,this,r).attr("d",o4().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>u[f]).x1(f=>s[f]).y1(f=>l[f]))).node()}}function YP(e,t){const{x:n=ns,...r}=U2(t);return new VP(e,j2(Y2({...r,x1:n,x2:void 0})))}const jP={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class XP extends ht{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:u,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,jP),this.curve=G2(u,s),Ya(this,n)}project(t,n,r){this.curve!==di&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r,{curve:c}=this;return ze("svg:g",a).call(Ut,this,i,a).call(Tt,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(zt,this).attr("d",c===di&&a.projection?ZP(a.projection,o,u,s,l):h=>{const d=Vn(),m=c(d);return m.lineStart(),m.point(o[h],u[h]),m.point(s[h],l[h]),m.lineEnd(),d}).call(qn,this,r).call(hs,this,r,a)).node()}}function ZP(e,t,n,r,i){const a=qu(e);return t=un(t),n=un(n),r=un(r),i=un(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function Df(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...u}={}){return[n,r]=Qd(t,n,r),[a,o]=Qd(i,a,o),new XP(e,{...u,x1:n,x2:r,y1:a,y2:o})}function Qd(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class J2 extends ht{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:u=a,insetBottom:s=a,insetLeft:l=a,rx:c,ry:f}=r;this.insetTop=Fe(o),this.insetRight=Fe(u),this.insetBottom=Fe(s),this.insetLeft=Fe(l),this.rx=rt(c,"auto"),this.ry=rt(f,"auto")}render(t,n,r,i,a){const{rx:o,ry:u}=this;return ze("svg:g",a).call(Ut,this,i,a).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("rect").call(zt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(fe,"rx",o).call(fe,"ry",u).call(qn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}}const KP={ariaLabel:"bar"};class QP extends J2{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,KP)}_transform(t,n,{y:r}){t.call(Tt,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return fi(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:u,insetBottom:s}=this;return fi(t)?o-i-a-u-s:l=>Math.max(0,Math.abs(r[l]-n[l])-u-s)}}function ey(e,t={}){return y9(t)||(t={...t,x:ns,y2:st}),new QP(e,j2(a2(Y2(t))))}const JP={ariaLabel:"cell"};class eS extends J2{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,JP)}_transform(t,n){t.call(Tt,n,{},0,0)}}function ty(e,{x:t,y:n,...r}={}){return[t,n]=Oa(t,n),new eS(e,{...r,x:t,y:n})}const tS={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function nS(e){return e.sort===void 0&&e.reverse===void 0?G9({channel:"-r"},e):e}class rS extends ht{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:u=ca,frameAnchor:s}=n,[l,c]=ft(o,0),[f,h]=O9(u),[d,m]=ft(a,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:es,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},nS(n),tS),this.r=m,this.rotate=c,this.symbol=h,this.frameAnchor=as(s);const{channels:p}=this,{symbol:g}=p;if(g){const{fill:w,stroke:b}=p;g.hint={fill:w?w.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,r:c,rotate:f,symbol:h}=r,{r:d,rotate:m,symbol:p}=this,[g,w]=Ha(this,i),b=p===ca,v=c?void 0:d*d*Math.PI;return Zc(d)&&(t=[]),ze("svg:g",a).call(Ut,this,i,a).call(Tt,this,{x:s&&o,y:l&&u}).call(y=>y.selectAll().data(t).enter().append(b?"circle":"path").call(zt,this).call(b?M=>{M.attr("cx",s?_=>s[_]:g).attr("cy",l?_=>l[_]:w).attr("r",c?_=>c[_]:d)}:M=>{M.attr("transform",Pf`translate(${s?_=>s[_]:g},${l?_=>l[_]:w})${f?_=>` rotate(${f[_]})`:m?` rotate(${m})`:""}`).attr("d",c&&h?_=>{const x=Vn();return h[_].draw(x,c[_]*c[_]*Math.PI),x}:c?_=>{const x=Vn();return p.draw(x,c[_]*c[_]*Math.PI),x}:h?_=>{const x=Vn();return h[_].draw(x,v),x}:(()=>{const _=Vn();return p.draw(_,v),_})())}).call(qn,this,r)).node()}}function Nf(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=Oa(t,n)),new rS(e,{...r,x:t,y:n})}const iS={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ny extends ht{constructor(t,n={}){const{x:r,y:i,z:a,curve:o,tension:u}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:nf(n),optional:!0}},n,iS),this.z=a,this.curve=G2(o,u),Ya(this,n)}filter(t){return t}project(t,n,r){this.curve!==di&&super.project(t,n,r)}render(t,n,r,i,a){const{x:o,y:u}=r,{curve:s}=this;return ze("svg:g",a).call(Ut,this,i,a).call(Tt,this,n).call(l=>l.selectAll().data(Sg(t,[o,u],this,r)).enter().append("path").call(zt,this).call(Pg,this,r).call(zM,this,r,a).attr("d",s===di&&a.projection?aS(a.projection,o,u):Ab().curve(s).defined(c=>c>=0).x(c=>o[c]).y(c=>u[c]))).node()}}function aS(e,t,n){const r=qu(e);return t=un(t),n=un(n),i=>{let a=[];const o=[a];for(const u of i)u===-1?(a=[],o.push(a)):a.push([t[u],n[u]]);return r({type:"MultiLineString",coordinates:o})}}function oS(e,{x:t,y:n,...r}={}){return[t,n]=Oa(t,n),new ny(e,{...r,x:t,y:n})}function ry(e,{x:t=ns,y:n=st,...r}={}){return new ny(e,U2({...r,x:t,y:n}))}const uS={ariaLabel:"tick",fill:null,stroke:"currentColor"};class sS extends ht{constructor(t,n,r){super(t,n,r,uS),Ya(this,r)}render(t,n,r,i,a){return ze("svg:g",a).call(Ut,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(zt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(qn,this,r).call(hs,this,r,a)).node()}}class lS extends sS{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Fe(o),this.insetBottom=Fe(u)}_transform(t,n,{x:r}){t.call(Tt,n,{x:r},gt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function ps(e,{x:t=st,...n}={}){return new lS(e,{...n,x:t})}function cS(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function fS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=dt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[ps(r,{x:l=>l})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class hS extends Ge{constructor(t){super(),qe(this,t,fS,cS,Oe,{pattern:3,width:0,height:1})}}function dS(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function mS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=dt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},marks:[ey(s,{x:(c,f)=>f+1,y:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class pS extends Ge{constructor(t){super(),qe(this,t,mS,dS,Oe,{pattern:3,width:0,height:1})}}function bS(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function gS(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=dt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[ty(s,{x:(c,f)=>f+1,fill:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Co extends Ge{constructor(t){super(),qe(this,t,gS,bS,Oe,{pattern:3,width:0,height:1})}}function yS(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),P(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[5](null)}}}function wS(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;_t(()=>{if(n(2,u.textContent="",u),!r)return;const l=dt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[ry(r,{x:(c,f)=>f/i,y:c=>c})]});u.appendChild(l)});function s(l){We[l?"unshift":"push"](()=>{u=l,n(2,u)})}return e.$$set=l=>{"audioData"in l&&n(3,r=l.audioData),"sampleRate"in l&&n(4,i=l.sampleRate),"width"in l&&n(0,a=l.width),"height"in l&&n(1,o=l.height)},[a,o,u,r,i,s]}class ko extends Ge{constructor(t){super(),qe(this,t,wS,yS,Oe,{audioData:3,sampleRate:4,width:0,height:1})}}function vS(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=I(),i=k("button"),i.textContent="play audio (p)",n.controls=!1},m(u,s){Z(u,t,s),P(t,n),e[5](n),P(t,r),P(t,i),a||(o=Qe(i,"click",e[1]),a=!0)},p:de,i:de,o:de,d(u){u&&X(t),e[5](null),a=!1,o()}}}function _S(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:a=-1}=t,o;const u=f=>{f&&o&&jc(f,i,o)},s=()=>{o&&(n(0,o.currentTime=0,o),o.play())},l=f=>{f.key==="p"&&s()};_a(()=>{document.querySelector("html").addEventListener("keyup",l),u(r)}),i3(()=>{document.querySelector("html").removeEventListener("keyup",l)});function c(f){We[f?"unshift":"push"](()=>{o=f,n(0,o)})}return e.$$set=f=>{"audioData"in f&&n(2,r=f.audioData),"sampleRate"in f&&n(3,i=f.sampleRate),"currentTrialNumber"in f&&n(4,a=f.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&window.setTimeout(s,250),e.$$.dirty&4&&u(r)},[o,s,r,i,a,c]}class iy extends Ge{constructor(t){super(),qe(this,t,_S,vS,Oe,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const ay=new Map,oy=new Map,MS=new Map,xS=new Map;function PS(e){return ay.get(e)}function uy(e){return oy.get(e)}const SS=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],AS=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],ES=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of SS)ay.set(e.pitch,e),oy.set(e.label,e);for(const e of AS)MS.set(e.number,e);for(const e of ES){const t=`${e.number}-${e.subnumber}`;xS.set(t,e)}var CS={value:()=>{}};function sy(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new To(n)}function To(e){this._=e}function kS(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}To.prototype=sy.prototype={constructor:To,on:function(e,t){var n=this._,r=kS(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=TS(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Jd(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Jd(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new To(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function TS(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Jd(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=CS,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var uc="http://www.w3.org/1999/xhtml";const e0={svg:"http://www.w3.org/2000/svg",xhtml:uc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),e0.hasOwnProperty(t)?{space:e0[t],local:e}:e}function $S(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===uc&&t.documentElement.namespaceURI===uc?t.createElement(e):t.createElementNS(n,e)}}function DS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ly(e){var t=bs(e);return(t.local?DS:$S)(t)}function NS(){}function Ff(e){return e==null?NS:function(){return this.querySelector(e)}}function FS(e){typeof e!="function"&&(e=Ff(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Gt(r,this._parents)}function cy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function BS(){return[]}function fy(e){return e==null?BS:function(){return this.querySelectorAll(e)}}function LS(e){return function(){var t=e.apply(this,arguments);return t==null?[]:cy(t)}}function RS(e){typeof e=="function"?e=LS(e):e=fy(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Gt(r,i)}function hy(e){return function(){return this.matches(e)}}function dy(e){return function(t){return t.matches(e)}}var IS=Array.prototype.find;function OS(e){return function(){return IS.call(this.children,e)}}function qS(){return this.firstElementChild}function GS(e){return this.select(e==null?qS:OS(typeof e=="function"?e:dy(e)))}var US=Array.prototype.filter;function zS(){return this.children}function HS(e){return function(){return US.call(this.children,e)}}function WS(e){return this.selectAll(e==null?zS:HS(typeof e=="function"?e:dy(e)))}function VS(e){typeof e!="function"&&(e=hy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Gt(r,this._parents)}function my(e){return new Array(e.length)}function YS(){return new Gt(this._enter||this._groups.map(my),this._parents)}function vu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}vu.prototype={constructor:vu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jS(e){return function(){return e}}function XS(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new vu(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function ZS(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new vu(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function KS(e){return e.__data__}function QS(e,t){if(!arguments.length)return Array.from(this,KS);var n=t?ZS:XS,r=this._parents,i=this._groups;typeof e!="function"&&(e=jS(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=cy(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=o[l]=new Array(m),w=s[l]=new Array(h);n(c,f,p,g,w,d,t);for(var b=0,v=0,y,M;b<m;++b)if(y=p[b]){for(b>=v&&(v=b+1);!(M=g[v])&&++v<m;);y._next=M||null}}return o=new Gt(o,r),o._enter=u,o._exit=s,o}function JS(){return new Gt(this._exit||this._groups.map(my),this._parents)}function eA(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function tA(e){if(!(e instanceof Gt))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Gt(o,this._parents)}function nA(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function rA(e){e||(e=iA);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Gt(i,this._parents).order()}function iA(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function aA(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function oA(){return Array.from(this)}function uA(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function sA(){let e=0;for(const t of this)++e;return e}function lA(){return!this.node()}function cA(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function fA(e){return function(){this.removeAttribute(e)}}function hA(e){return function(){this.removeAttributeNS(e.space,e.local)}}function dA(e,t){return function(){this.setAttribute(e,t)}}function mA(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function pA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function bA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function gA(e,t){var n=bs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?hA:fA:typeof t=="function"?n.local?bA:pA:n.local?mA:dA)(n,t))}function py(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yA(e){return function(){this.style.removeProperty(e)}}function wA(e,t,n){return function(){this.style.setProperty(e,t,n)}}function vA(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function _A(e,t,n){return arguments.length>1?this.each((t==null?yA:typeof t=="function"?vA:wA)(e,t,n??"")):mi(this.node(),e)}function mi(e,t){return e.style.getPropertyValue(t)||py(e).getComputedStyle(e,null).getPropertyValue(t)}function MA(e){return function(){delete this[e]}}function xA(e,t){return function(){this[e]=t}}function PA(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function SA(e,t){return arguments.length>1?this.each((t==null?MA:typeof t=="function"?PA:xA)(e,t)):this.node()[e]}function by(e){return e.trim().split(/^|\s+/)}function Bf(e){return e.classList||new gy(e)}function gy(e){this._node=e,this._names=by(e.getAttribute("class")||"")}gy.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yy(e,t){for(var n=Bf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function wy(e,t){for(var n=Bf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function AA(e){return function(){yy(this,e)}}function EA(e){return function(){wy(this,e)}}function CA(e,t){return function(){(t.apply(this,arguments)?yy:wy)(this,e)}}function kA(e,t){var n=by(e+"");if(arguments.length<2){for(var r=Bf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?CA:t?AA:EA)(n,t))}function TA(){this.textContent=""}function $A(e){return function(){this.textContent=e}}function DA(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function NA(e){return arguments.length?this.each(e==null?TA:(typeof e=="function"?DA:$A)(e)):this.node().textContent}function FA(){this.innerHTML=""}function BA(e){return function(){this.innerHTML=e}}function LA(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function RA(e){return arguments.length?this.each(e==null?FA:(typeof e=="function"?LA:BA)(e)):this.node().innerHTML}function IA(){this.nextSibling&&this.parentNode.appendChild(this)}function OA(){return this.each(IA)}function qA(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function GA(){return this.each(qA)}function UA(e){var t=typeof e=="function"?e:ly(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zA(){return null}function HA(e,t){var n=typeof e=="function"?e:ly(e),r=t==null?zA:typeof t=="function"?t:Ff(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function WA(){var e=this.parentNode;e&&e.removeChild(this)}function VA(){return this.each(WA)}function YA(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jA(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function XA(e){return this.select(e?jA:YA)}function ZA(e){return arguments.length?this.property("__data__",e):this.node().__data__}function KA(e){return function(t){e.call(this,t,this.__data__)}}function QA(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function JA(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function eE(e,t,n){return function(){var r=this.__on,i,a=KA(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function tE(e,t,n){var r=QA(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?eE:JA,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function vy(e,t,n){var r=py(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function nE(e,t){return function(){return vy(this,e,t)}}function rE(e,t){return function(){return vy(this,e,t.apply(this,arguments))}}function iE(e,t){return this.each((typeof t=="function"?rE:nE)(e,t))}function*aE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var oE=[null];function Gt(e,t){this._groups=e,this._parents=t}function ja(){return new Gt([[document.documentElement]],oE)}function uE(){return this}Gt.prototype=ja.prototype={constructor:Gt,select:FS,selectAll:RS,selectChild:GS,selectChildren:WS,filter:VS,data:QS,enter:YS,exit:JS,join:eA,merge:tA,selection:uE,order:nA,sort:rA,call:aA,nodes:oA,node:uA,size:sA,empty:lA,each:cA,attr:gA,style:_A,property:SA,classed:kA,text:NA,html:RA,raise:OA,lower:GA,append:UA,insert:HA,remove:VA,clone:XA,datum:ZA,on:tE,dispatch:iE,[Symbol.iterator]:aE};function Lf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _y(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xa(){}var ba=.7,_u=1/ba,Zr="\\s*([+-]?\\d+)\\s*",ga="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",dn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sE=/^#([0-9a-f]{3,8})$/,lE=new RegExp("^rgb\\("+[Zr,Zr,Zr]+"\\)$"),cE=new RegExp("^rgb\\("+[dn,dn,dn]+"\\)$"),fE=new RegExp("^rgba\\("+[Zr,Zr,Zr,ga]+"\\)$"),hE=new RegExp("^rgba\\("+[dn,dn,dn,ga]+"\\)$"),dE=new RegExp("^hsl\\("+[ga,dn,dn]+"\\)$"),mE=new RegExp("^hsla\\("+[ga,dn,dn,ga]+"\\)$"),t0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lf(Xa,ya,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:n0,formatHex:n0,formatHsl:pE,formatRgb:r0,toString:r0});function n0(){return this.rgb().formatHex()}function pE(){return My(this).formatHsl()}function r0(){return this.rgb().formatRgb()}function ya(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?i0(t):n===3?new St(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lE.exec(e))?new St(t[1],t[2],t[3],1):(t=cE.exec(e))?new St(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fE.exec(e))?yo(t[1],t[2],t[3],t[4]):(t=hE.exec(e))?yo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dE.exec(e))?u0(t[1],t[2]/100,t[3]/100,1):(t=mE.exec(e))?u0(t[1],t[2]/100,t[3]/100,t[4]):t0.hasOwnProperty(e)?i0(t0[e]):e==="transparent"?new St(NaN,NaN,NaN,0):null}function i0(e){return new St(e>>16&255,e>>8&255,e&255,1)}function yo(e,t,n,r){return r<=0&&(e=t=n=NaN),new St(e,t,n,r)}function bE(e){return e instanceof Xa||(e=ya(e)),e?(e=e.rgb(),new St(e.r,e.g,e.b,e.opacity)):new St}function sc(e,t,n,r){return arguments.length===1?bE(e):new St(e,t,n,r??1)}function St(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Lf(St,sc,_y(Xa,{brighter:function(e){return e=e==null?_u:Math.pow(_u,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?ba:Math.pow(ba,e),new St(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a0,formatHex:a0,formatRgb:o0,toString:o0}));function a0(){return"#"+ol(this.r)+ol(this.g)+ol(this.b)}function o0(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ol(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function u0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new on(e,t,n,r)}function My(e){if(e instanceof on)return new on(e.h,e.s,e.l,e.opacity);if(e instanceof Xa||(e=ya(e)),!e)return new on;if(e instanceof on)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new on(o,u,s,e.opacity)}function xy(e,t,n,r){return arguments.length===1?My(e):new on(e,t,n,r??1)}function on(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Lf(on,xy,_y(Xa,{brighter:function(e){return e=e==null?_u:Math.pow(_u,e),new on(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ba:Math.pow(ba,e),new on(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new St(ul(e>=240?e-240:e+120,i,r),ul(e,i,r),ul(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function ul(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Py=e=>()=>e;function gE(e,t){return function(n){return e+n*t}}function yE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function wE(e){return(e=+e)==1?Sy:function(t,n){return n-t?yE(t,n,e):Py(isNaN(t)?n:t)}}function Sy(e,t){var n=t-e;return n?gE(e,n):Py(isNaN(e)?t:e)}const lc=function e(t){var n=wE(t);function r(i,a){var o=n((i=sc(i)).r,(a=sc(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=Sy(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var cc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sl=new RegExp(cc.source,"g");function vE(e){return function(){return e}}function _E(e){return function(t){return e(t)+""}}function ME(e,t){var n=cc.lastIndex=sl.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=cc.exec(e))&&(i=sl.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:Wn(r,i)})),n=sl.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?_E(s[0].x):vE(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}var s0=180/Math.PI,fc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ay(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*s0,skewX:Math.atan(s)*s0,scaleX:o,scaleY:u}}var wo;function xE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fc:Ay(t.a,t.b,t.c,t.d,t.e,t.f)}function PE(e){return e==null||(wo||(wo=document.createElementNS("http://www.w3.org/2000/svg","g")),wo.setAttribute("transform",e),!(e=wo.transform.baseVal.consolidate()))?fc:(e=e.matrix,Ay(e.a,e.b,e.c,e.d,e.e,e.f))}function Ey(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Wn(l,f)},{i:p-2,x:Wn(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Wn(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Wn(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Wn(l,f)},{i:p-2,x:Wn(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var SE=Ey(xE,"px, ","px)","deg)"),AE=Ey(PE,", ",")",")"),pi=0,Ui=0,Di=0,Cy=1e3,Mu,zi,xu=0,Er=0,gs=0,wa=typeof performance=="object"&&performance.now?performance:Date,ky=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rf(){return Er||(ky(EE),Er=wa.now()+gs)}function EE(){Er=0}function Pu(){this._call=this._time=this._next=null}Pu.prototype=Ty.prototype={constructor:Pu,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Rf():+n)+(t==null?0:+t),!this._next&&zi!==this&&(zi?zi._next=this:Mu=this,zi=this),this._call=e,this._time=n,hc()},stop:function(){this._call&&(this._call=null,this._time=1/0,hc())}};function Ty(e,t,n){var r=new Pu;return r.restart(e,t,n),r}function CE(){Rf(),++pi;for(var e=Mu,t;e;)(t=Er-e._time)>=0&&e._call.call(null,t),e=e._next;--pi}function l0(){Er=(xu=wa.now())+gs,pi=Ui=0;try{CE()}finally{pi=0,TE(),Er=0}}function kE(){var e=wa.now(),t=e-xu;t>Cy&&(gs-=t,xu=e)}function TE(){for(var e,t=Mu,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Mu=n);zi=e,hc(r)}function hc(e){if(!pi){Ui&&(Ui=clearTimeout(Ui));var t=e-Er;t>24?(e<1/0&&(Ui=setTimeout(l0,e-wa.now()-gs)),Di&&(Di=clearInterval(Di))):(Di||(xu=wa.now(),Di=setInterval(kE,Cy)),pi=1,ky(l0))}}function c0(e,t,n){var r=new Pu;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var $E=sy("start","end","cancel","interrupt"),DE=[],$y=0,f0=1,dc=2,$o=3,h0=4,mc=5,Do=6;function ys(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;NE(e,n,{name:t,index:r,group:i,on:$E,tween:DE,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:$y})}function If(e,t){var n=en(e,t);if(n.state>$y)throw new Error("too late; already scheduled");return n}function wn(e,t){var n=en(e,t);if(n.state>$o)throw new Error("too late; already running");return n}function en(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function NE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ty(a,0,n.time);function a(l){n.state=f0,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==f0)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===$o)return c0(o);d.state===h0?(d.state=Do,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Do,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(c0(function(){n.state===$o&&(n.state=h0,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=dc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===dc){for(n.state=$o,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=mc,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===mc&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Do,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function FE(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>dc&&r.state<mc,r.state=Do,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function BE(e){return this.each(function(){FE(this,e)})}function LE(e,t){var n,r;return function(){var i=wn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function RE(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=wn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function IE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=en(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?LE:RE)(n,e,t))}function Of(e,t,n){var r=e._id;return e.each(function(){var i=wn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return en(i,r).value[t]}}function Dy(e,t){var n;return(typeof t=="number"?Wn:t instanceof ya?lc:(n=ya(t))?(t=n,lc):ME)(e,t)}function OE(e){return function(){this.removeAttribute(e)}}function qE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function GE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function UE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function zE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function HE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function WE(e,t){var n=bs(e),r=n==="transform"?AE:Dy;return this.attrTween(e,typeof t=="function"?(n.local?HE:zE)(n,r,Of(this,"attr."+e,t)):t==null?(n.local?qE:OE)(n):(n.local?UE:GE)(n,r,t))}function VE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function YE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function jE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&YE(e,a)),n}return i._value=t,i}function XE(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&VE(e,a)),n}return i._value=t,i}function ZE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=bs(e);return this.tween(n,(r.local?jE:XE)(r,t))}function KE(e,t){return function(){If(this,e).delay=+t.apply(this,arguments)}}function QE(e,t){return t=+t,function(){If(this,e).delay=t}}function JE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?KE:QE)(t,e)):en(this.node(),t).delay}function eC(e,t){return function(){wn(this,e).duration=+t.apply(this,arguments)}}function tC(e,t){return t=+t,function(){wn(this,e).duration=t}}function nC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eC:tC)(t,e)):en(this.node(),t).duration}function rC(e,t){if(typeof t!="function")throw new Error;return function(){wn(this,e).ease=t}}function iC(e){var t=this._id;return arguments.length?this.each(rC(t,e)):en(this.node(),t).ease}function aC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wn(this,e).ease=n}}function oC(e){if(typeof e!="function")throw new Error;return this.each(aC(this._id,e))}function uC(e){typeof e!="function"&&(e=hy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Rn(r,this._parents,this._name,this._id)}function sC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Rn(o,this._parents,this._name,this._id)}function lC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cC(e,t,n){var r,i,a=lC(t)?If:wn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function fC(e,t){var n=this._id;return arguments.length<2?en(this.node(),n).on.on(e):this.each(cC(n,e,t))}function hC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function dC(){return this.on("end.remove",hC(this._id))}function mC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ff(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,ys(l[h],t,n,h,l,en(c,n)));return new Rn(a,this._parents,t,n)}function pC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fy(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=en(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&ys(d,t,n,p,h,m);a.push(h),o.push(c)}return new Rn(a,o,t,n)}var bC=ja.prototype.constructor;function gC(){return new bC(this._groups,this._parents)}function yC(e,t){var n,r,i;return function(){var a=mi(this,e),o=(this.style.removeProperty(e),mi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Ny(e){return function(){this.style.removeProperty(e)}}function wC(e,t,n){var r,i=n+"",a;return function(){var o=mi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function vC(e,t,n){var r,i,a;return function(){var o=mi(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),mi(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function _C(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=wn(this,e),l=s.on,c=s.value[a]==null?u||(u=Ny(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function MC(e,t,n){var r=(e+="")=="transform"?SE:Dy;return t==null?this.styleTween(e,yC(e,r)).on("end.style."+e,Ny(e)):typeof t=="function"?this.styleTween(e,vC(e,r,Of(this,"style."+e,t))).each(_C(this._id,e)):this.styleTween(e,wC(e,r,t),n).on("end.style."+e,null)}function xC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function PC(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&xC(e,o,n)),r}return a._value=t,a}function SC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,PC(e,t,n??""))}function AC(e){return function(){this.textContent=e}}function EC(e){return function(){var t=e(this);this.textContent=t??""}}function CC(e){return this.tween("text",typeof e=="function"?EC(Of(this,"text",e)):AC(e==null?"":e+""))}function kC(e){return function(t){this.textContent=e.call(this,t)}}function TC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&kC(i)),t}return r._value=e,r}function $C(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,TC(e))}function DC(){for(var e=this._name,t=this._id,n=Fy(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=en(s,t);ys(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Rn(r,this._parents,e,n)}function NC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=wn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var FC=0;function Rn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Fy(){return++FC}var ur=ja.prototype;Rn.prototype={constructor:Rn,select:mC,selectAll:pC,filter:uC,merge:sC,selection:gC,transition:DC,call:ur.call,nodes:ur.nodes,node:ur.node,size:ur.size,empty:ur.empty,each:ur.each,on:fC,attr:WE,attrTween:ZE,style:MC,styleTween:SC,text:CC,textTween:$C,remove:dC,tween:IE,delay:JE,duration:nC,ease:iC,easeVarying:oC,end:NC,[Symbol.iterator]:ur[Symbol.iterator]};function BC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var LC={time:null,delay:0,duration:250,ease:BC};function RC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function IC(e){var t,n;e instanceof Rn?(t=e._id,e=e._name):(t=Fy(),(n=LC).time=Rf(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&ys(s,e,t,l,o,n||RC(s,t));return new Rn(r,this._parents,e,t)}ja.prototype.interrupt=BE;ja.prototype.transition=IC;function Hi(e,t,n){this.k=e,this.x=t,this.y=n}Hi.prototype={constructor:Hi,scale:function(e){return e===1?this:new Hi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Hi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Hi.prototype;var OC={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,u="",s,l,c=0;for(;c<r.length;)o=i.indexOf(r.charAt(c++))<<18|i.indexOf(r.charAt(c++))<<12|(s=i.indexOf(r.charAt(c++)))<<6|(l=i.indexOf(r.charAt(c++))),u+=s===64?String.fromCharCode(o>>16&255):l===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return u},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(u){i(n.Uint8(new Uint8Array(u.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let u=0;u<a;u++)o[u]=i.charCodeAt(u);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(s){return this.pointer+=s,this.pointer},readInt:function(s){if(s=Math.min(s,this.data.byteLength-this.pointer),s<1)return-1;let l=0;if(s>1)for(let c=1;c<=s-1;c++)l+=this.data.getUint8(this.pointer)*Math.pow(256,s-c),this.pointer++;return l+=this.data.getUint8(this.pointer),this.pointer++,l},readStr:function(s){let l="";for(let c=1;c<=s;c++)l+=String.fromCharCode(this.readInt(1));return l},readIntVLV:function(){let s=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)s=this.readInt(1);else{let l=[];for(;this.data.getUint8(this.pointer)>=128;)l.push(this.readInt(1)-128);let c=this.readInt(1);for(let f=1;f<=l.length;f++)s+=l[l.length-f]*Math.pow(128,f);s+=c}return s}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),u=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=u):a.timeDivision=o*256+u;for(let s=1;s<=a.tracks;s++){a.track[s-1]={event:[]};let l=i.readInt(4);if(l===-1)break;if(l!==1297379947)return!1;i.readInt(4);let c=0,f=!1,h,d;for(;!f&&(c++,a.track[s-1].event[c-1]={},a.track[s-1].event[c-1].deltaTime=i.readIntVLV(),h=i.readInt(1),h!==-1);)if(h>=128?d=h:(h=d,i.movePointer(-1)),h===255){a.track[s-1].event[c-1].type=255,a.track[s-1].event[c-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[s-1].event[c-1].metaType){case 47:case-1:f=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[s-1].event[c-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[s-1].event[c-1].data=i.readInt(m);break;case 84:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1),a.track[s-1].event[c-1].data[4]=i.readInt(1);break;case 88:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,m)),(this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)&&(i.readInt(m),a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(h=h.toString(16).split(""),h[1]||h.unshift("0"),a.track[s-1].event[c-1].type=parseInt(h[0],16),a.track[s-1].event[c-1].channel=parseInt(h[1],16),a.track[s-1].event[c-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].type,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1){let m=i.readIntVLV();a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[s-1].event[c-1].data=i.readInt(1);break;case-1:f=!0;break;default:if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(OC);function By(e){return 1/(e/60)}const Ly=[],qC=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of qC)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;Ly.push({type:e,dots:t,duration:n})}Ly.sort((e,t)=>e.duration-t.duration);class ce{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>uy(r).pitch),this.stringCount=n.length}}new ce("E stand.",["E2","A2","D3","G3","B3","E4"]),new ce("Drop D",["D2","A2","D3","G3","B3","E4"]),new ce("Drop C",["C2","G2","C3","F3","A3","D4"]),new ce("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new ce("1 down",["D2","G2","C3","F3","A3","D4"]),new ce("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new ce("2 down",["C2","F2","A#2","D#3","G3","C4"]),new ce("DADGAG",["D2","A2","D3","G3","A3","D4"]),new ce("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new ce("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new ce("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new ce("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new ce("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new ce("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new ce("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new ce("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new ce("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new ce("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new ce("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new ce("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new ce("E stand.",["E1","A1","D2","G2"]),new ce("Drop D",["D1","A1","D2","G2"]),new ce("1/2 down",["D#1","G#1","C#2","F#2"]),new ce("1 down",["D1","G1","C2","F2"]),new ce("1 1/2 down",["C#1","F#1","B1","E2"]),new ce("2 down",["C1","F1","A#1","D#2"]),new ce("B stand.",["B0","E1","A1","D2","G2"]),new ce("Drop A",["A0","D1","A1","D2","G2"]),new ce("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new ce("1 down",["A0","D1","G1","C2","F2"]),new ce("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new ce("2 down",["G0","C1","F1","A#1","D#2"]),new ce("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new ce("Drop E",["E0","A0","D1","A1","D2","G2"]),new ce("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new ce("1 down",["E1","A0","D1","G1","C2","F2"]),new ce("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new ce("2 down",["D0","G0","C1","F1","A#1","D#2"]),new ce("Hawaii",["G4","C4","E4","A4"]),new ce("Low G",["G3","C4","E4","A4"]),new ce("D-tuning",["A4","D4","F#4","B4"]),new ce("Canadian",["A3","D4","F#4","B4"]),new ce("Bariton",["D3","G3","B3","E4"]);function Ry(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function Iy(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var Oy=[0,2,4,-1,1,3,5],qy=Oy.map(e=>Math.floor(e*7/12));function Gy(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=Oy[t]+7*n;if(r===void 0)return[i*a];const o=r-qy[t]-4*n;return[i*a,i*o]}var GC=[3,0,4,1,5,2,6];function UC(e){const[t,n,r]=e,i=GC[zC(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+qy[i];return{step:i,alt:a,oct:o,dir:r}}function zC(e){const t=(e+1)%7;return t<0?7+t:t}var d0=(e,t)=>Array(Math.abs(t)+1).join(e),pc=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),HC="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",WC="(AA|A|P|M|m|d|dd)([-+]?\\d+)",VC=new RegExp("^"+HC+"|"+WC+"$");function YC(e){const t=VC.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var m0={};function Su(e){return typeof e=="string"?m0[e]||(m0[e]=jC(e)):Iy(e)?Su(ZC(e)):Ry(e)?Su(e.name):pc}var p0=[0,2,4,5,7,9,11],Uy="PMMPPMM";function jC(e){const t=YC(e);if(t[0]==="")return pc;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=Uy[i];if(a==="M"&&r==="P")return pc;const o=a==="M"?"majorable":"perfectable",u=""+n+r,s=n<0?-1:1,l=n===8||n===-8?n:s*(i+1),c=XC(o,r),f=Math.floor((Math.abs(n)-1)/7),h=s*(p0[i]+c+12*f),d=(s*(p0[i]+c)%12+12)%12,m=Gy({step:i,alt:c,oct:f,dir:s});return{empty:!1,name:u,num:n,q:r,step:i,alt:c,dir:s,type:o,simple:l,semitones:h,chroma:d,coord:m,oct:f}}function XC(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function ZC(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,u=i<0?"-":"",s=Uy[t]==="M"?"majorable":"perfectable";return u+o+KC(s,n)}function KC(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?d0("A",t):d0("d",e==="perfectable"?t:t+1)}var b0=(e,t)=>Array(Math.abs(t)+1).join(e),zy=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),g0=new Map,QC=e=>"CDEFGAB".charAt(e),JC=e=>e<0?b0("b",-e):b0("#",e),ek=e=>e[0]==="b"?-e.length:e.length;function va(e){const t=JSON.stringify(e),n=g0.get(t);if(n)return n;const r=typeof e=="string"?ak(e):Iy(e)?va(ok(e)):Ry(e)?va(e.name):zy;return g0.set(t,r),r}var tk=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function nk(e){const t=tk.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function rk(e){return va(UC(e))}var ik=(e,t)=>(e%t+t)%t,ll=[0,2,4,5,7,9,11];function ak(e){const t=nk(e);if(t[0]===""||t[3]!=="")return zy;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=ek(r),u=i.length?+i:void 0,s=Gy({step:a,alt:o,oct:u}),l=n+r+i,c=n+r,f=(ll[a]+o+120)%12,h=u===void 0?ik(ll[a]+o,12)-12*99:ll[a]+o+12*(u+1),d=h>=0&&h<=127?h:null,m=u===void 0?null:Math.pow(2,(h-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:f,coord:s,freq:m,height:h,letter:n,midi:d,name:l,oct:u,pc:c,step:a}}function ok(e){const{step:t,alt:n,oct:r}=e,i=QC(t);if(!i)return"";const a=i+JC(n);return r||r===0?a+r:a}function uk(e,t){const n=va(e),r=Array.isArray(t)?t:Su(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return rk(a).name}function Hy(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var er={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Wy=e=>Number(e).toString(2).padStart(12,"0"),y0=e=>parseInt(e,2),sk=/^[01]{12}$/;function Vy(e){return sk.test(e)}var lk=e=>typeof e=="number"&&e>=0&&e<=4095,ck=e=>e&&Vy(e.chroma),w0={[er.chroma]:er};function qf(e){const t=Vy(e)?e:lk(e)?Wy(e):Array.isArray(e)?pk(e):ck(e)?e.chroma:er.chroma;return w0[t]=w0[t]||mk(t)}var fk=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function hk(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(fk[n]);return t}function dk(e){const t=e.split("");return t.map((n,r)=>Hy(r,t).join(""))}function mk(e){const t=y0(e),n=dk(e).map(y0).filter(a=>a>=2048).sort()[0],r=Wy(n),i=hk(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function pk(e){if(e.length===0)return er.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=va(e[r]),t.empty&&(t=Su(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var bk=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],gk=bk;({...er});var Yy=[],No={};function yk(e,t,n){const r=vk(e),i={...qf(e),name:n||"",quality:r,intervals:e,aliases:t};Yy.push(i),i.name&&(No[i.name]=i),No[i.setNum]=i,No[i.chroma]=i,i.aliases.forEach(a=>wk(i,a))}function wk(e,t){No[t]=e}function vk(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}gk.forEach(([e,t,n])=>yk(e.split(" "),n.split(" "),t));Yy.sort((e,t)=>e.setNum-t.setNum);var _k=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],Mk=_k;({...er});var jy=[],Fo={};function xk(e,t,n){const r=Sk(e),i={...qf(e),name:n||"",quality:r,intervals:e,aliases:t};jy.push(i),i.name&&(Fo[i.name]=i),Fo[i.setNum]=i,Fo[i.chroma]=i,i.aliases.forEach(a=>Pk(i,a))}function Pk(e,t){Fo[t]=e}function Sk(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}Mk.forEach(([e,t,n])=>xk(e.split(" "),n.split(" "),t));jy.sort((e,t)=>e.setNum-t.setNum);var Ak=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],Ek=Ak,Ck={...er,intervals:[],aliases:[]},Ki={};function kk(e){return Ki[e]||Ck}function Tk(e,t,n=[]){const r={...qf(e),name:t,intervals:e,aliases:n};return Ki[r.name]=r,Ki[r.setNum]=r,Ki[r.chroma]=r,r.aliases.forEach(i=>$k(r,i)),r}function $k(e,t){Ki[t]=e}Ek.forEach(([e,t,...n])=>Tk(e.split(" "),t,n));var Gf=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],v0={...er,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Dk=Gf.map(Nk),bc={};Dk.forEach(e=>{bc[e.name]=e,e.aliases.forEach(t=>{bc[t]=e})});function Xy(e){return typeof e=="string"?bc[e.toLowerCase()]||v0:e&&e.name?Xy(e.name):v0}function Nk(e){const[t,n,r,i,a,o,u]=e,s=u?[u]:[],l=Number(n).toString(2);return{empty:!1,intervals:kk(i).intervals,modeNum:t,chroma:l,normalized:l,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:s}}function Zy(e){return(t,n)=>{const r=Xy(t);if(r.empty)return[];const i=Hy(r.modeNum,e),a=r.intervals.map(o=>uk(n,o));return i.map((o,u)=>a[u]+o)}}Zy(Gf.map(e=>e[4]));Zy(Gf.map(e=>e[5]));class Gn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>uy(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;const s=PS(i).name;n.set(i,{number:a,letterString:`${s}${o}`})}return[...n.values()].map(r=>r.letterString)}}new Gn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Gn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Gn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Gn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Gn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Gn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Gn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Gn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function Fk(e,t=1){const n=xy(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>Fk(e,.5));const Bk=lc("black","steelblue");Array.from({length:12}).map((e,t)=>Bk(t/11));function Lk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function Rk(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=dt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1,domain:["hihat","snare","bass"]},marks:[ps(r,{x:"time",y:"instr"})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Ik extends Ge{constructor(t){super(),qe(this,t,Rk,Lk,Oe,{pattern:3,width:0,height:1})}}function Ok(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function qk(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=Cn(r,c=>c.instr).map(([c,f])=>f.map((h,d)=>({index:d,instr:c,time:d===0?0:h.time-f[d-1].time}))).flat(),l=dt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},fy:{label:null,domain:["hihat","snare","bass"]},marks:[ey(s,{x:"index",y:"time",fy:"instr"})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Gk extends Ge{constructor(t){super(),qe(this,t,qk,Ok,Oe,{pattern:3,width:0,height:1})}}function Uk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),P(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function zk(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=Cn(r,c=>c.instr).map(([c,f])=>f.map((h,d)=>({index:d,instr:c,time:d===0?0:h.time-f[d-1].time}))).flat(),l=dt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},fy:{label:null,domain:["hihat","snare","bass"]},marks:[ty(s,{x:"index",fill:"time",fy:"instr"})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Hk extends Ge{constructor(t){super(),qe(this,t,zk,Uk,Oe,{pattern:3,width:0,height:1})}}function Wk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),P(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[5](null)}}}function Vk(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;const s=c=>dt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[ry(c.audio,{x:(f,h)=>h/i,y:f=>f})]});_t(()=>{if(n(2,u.textContent="",u),!!r)for(const c of r){const f=s(c);u.appendChild(f)}});function l(c){We[c?"unshift":"push"](()=>{u=c,n(2,u)})}return e.$$set=c=>{"audioData"in c&&n(3,r=c.audioData),"sampleRate"in c&&n(4,i=c.sampleRate),"width"in c&&n(0,a=c.width),"height"in c&&n(1,o=c.height)},[a,o,u,r,i,l]}class Yk extends Ge{constructor(t){super(),qe(this,t,Vk,Wk,Oe,{audioData:3,sampleRate:4,width:0,height:1})}}function jk(e,t,n){const r=e.slice();return r[16]=t[n],r}function Xk(e){let t;return{c(){t=k("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],at(t,t.__value)},m(n,r){Z(n,t,r)},p:de,d(n){n&&X(t)}}}function Zk(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,w,b,v,y,M,_,x,A,E,F,S,D,O,L,C,q,ie,te,J,z=Pt(["single note","single beat","only snare"]),H=[];for(let T=0;T<3;T+=1)H[T]=Xk(jk(e,z,T));return m=new iy({props:{audioData:e[2],sampleRate:e[4]}}),g=new ko({props:{audioData:e[2],width:Un,height:zn}}),b=new Yk({props:{audioData:e[3],width:Un,height:zn/3}}),y=new hS({props:{pattern:e[5],width:Un,height:zn}}),_=new Ik({props:{pattern:e[6],width:Un,height:zn}}),A=new pS({props:{pattern:e[5],width:Un,height:zn}}),F=new Gk({props:{pattern:e[6],width:Un,height:zn*2}}),D=new Co({props:{pattern:e[5],width:Un,height:zn}}),L=new Hk({props:{pattern:e[6],width:Un,height:zn}}),{c(){t=k("main"),n=k("h2"),n.textContent="Playground",r=I(),i=k("div"),a=k("label"),o=Ae(`error mode:
      `),u=k("select");for(let T=0;T<3;T+=1)H[T].c();s=I(),l=k("label"),c=Ae(`error severity (in seconds):
      `),f=k("input"),h=I(),d=k("div"),Pe(m.$$.fragment),p=I(),Pe(g.$$.fragment),w=I(),Pe(b.$$.fragment),v=I(),Pe(y.$$.fragment),M=I(),Pe(_.$$.fragment),x=I(),Pe(A.$$.fragment),E=I(),Pe(F.$$.fragment),S=I(),Pe(D.$$.fragment),O=I(),Pe(L.$$.fragment),C=I(),q=k("div"),q.innerHTML="<div>early</div> <div>late</div>",e[0]===void 0&&Ji(()=>e[7].call(u)),N(a,"class","svelte-1sot113"),N(f,"type","number"),N(f,"min","-0.5"),N(f,"max","0.5"),N(f,"step","0.01"),N(l,"class","svelte-1sot113"),N(d,"class","stimuli svelte-1sot113"),N(q,"class","examples")},m(T,G){Z(T,t,G),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u);for(let ne=0;ne<3;ne+=1)H[ne]&&H[ne].m(u,null);Ro(u,e[0],!0),P(i,s),P(i,l),P(l,c),P(l,f),at(f,e[1]),P(t,h),P(t,d),ve(m,d,null),P(d,p),ve(g,d,null),P(d,w),ve(b,d,null),P(d,v),ve(y,d,null),P(d,M),ve(_,d,null),P(d,x),ve(A,d,null),P(d,E),ve(F,d,null),P(d,S),ve(D,d,null),P(d,O),ve(L,d,null),P(t,C),P(t,q),ie=!0,te||(J=[Qe(u,"change",e[7]),Qe(f,"input",e[8])],te=!0)},p(T,[G]){G&1&&Ro(u,T[0]),G&2&&Kr(f.value)!==T[1]&&at(f,T[1]);const ne={};G&4&&(ne.audioData=T[2]),G&16&&(ne.sampleRate=T[4]),m.$set(ne);const ue={};G&4&&(ue.audioData=T[2]),g.$set(ue);const ae={};G&8&&(ae.audioData=T[3]),b.$set(ae);const V={};G&32&&(V.pattern=T[5]),y.$set(V);const Y={};G&64&&(Y.pattern=T[6]),_.$set(Y);const B={};G&32&&(B.pattern=T[5]),A.$set(B);const W={};G&64&&(W.pattern=T[6]),F.$set(W);const j={};G&32&&(j.pattern=T[5]),D.$set(j);const $={};G&64&&($.pattern=T[6]),L.$set($)},i(T){ie||(Q(m.$$.fragment,T),Q(g.$$.fragment,T),Q(b.$$.fragment,T),Q(y.$$.fragment,T),Q(_.$$.fragment,T),Q(A.$$.fragment,T),Q(F.$$.fragment,T),Q(D.$$.fragment,T),Q(L.$$.fragment,T),ie=!0)},o(T){oe(m.$$.fragment,T),oe(g.$$.fragment,T),oe(b.$$.fragment,T),oe(y.$$.fragment,T),oe(_.$$.fragment,T),oe(A.$$.fragment,T),oe(F.$$.fragment,T),oe(D.$$.fragment,T),oe(L.$$.fragment,T),ie=!1},d(T){T&&X(t),lr(H,T),_e(m),_e(g),_e(b),_e(y),_e(_),_e(A),_e(F),_e(D),_e(L),te=!1,bn(J)}}}let Un=600,zn=100,Kk=120;const _0=4;function Qk(e,t,n){let r="single note",i=0,a=By(Kk),o=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const u=_0*a;let s=null,l=[],c,f=[],h=[];const d=async()=>{o=await Promise.all(o.map(async v=>({...v,times:v.beats.map(y=>a*(y-1)),timesOriginal:v.beats.map(y=>a*(y-1)),audioBuffer:await Jb(v.sample)})))},m=(v="single note",y=0)=>{if(y===0)return o;console.log(`Adding error ${v} ${y}`);const M=p([o]),_=M.filter(A=>A.instrument==="snare")[0],x=M.filter(A=>A.instrument==="hihat")[0];return v==="single note"?_.times[1]=_.timesOriginal[1]+y:v==="single beat"?(_.times[1]=_.timesOriginal[1]+y,x.times[6]=x.timesOriginal[6]+y):v==="only snare"&&(_.times[0]=_.timesOriginal[0]+y,_.times[1]=_.timesOriginal[1]+y),M},p=v=>{console.log(`concat ${v.length} patterns`);const y=v[0].map(M=>({...M,beats:[...M.beats],times:[...M.times],timesOriginal:[...M.timesOriginal]}));for(let M=1;M<v.length;M++){const _=v[M];for(const x of _){const A=y.filter(E=>E.instrument===x.instrument)[0];A.beats=[...A.beats,...x.beats.map(E=>E+M*_0)],A.times=[...A.times,...x.times.map(E=>E+M*u)],A.timesOriginal=[...A.timesOriginal,...x.timesOriginal.map(E=>E+M*u)]}}return y},g=async(v,y)=>{if(!o[0].audioBuffer)return;const _=[m(v,y)],x=p(_);n(5,f=x.map(A=>A.times).flat().sort()),n(6,h=x.map(A=>A.times.map(E=>({time:E,instr:A.instrument}))).flat(1/0).sort((A,E)=>{A.time-E.time})),n(4,c=x[0].audioBuffer.sampleRate),n(2,s=Xl(x,u*_.length+.1,c)),n(3,l=x.map(A=>{const E=Xl([A],u*_.length+.1,c);return{instr:A.instrument,audio:E}}))};_a(async()=>{await d(),g()});function w(){r=o1(this),n(0,r)}function b(){i=Kr(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&g(r,i)},[r,i,s,l,c,f,h,w,b]}class Jk extends Ge{constructor(t){super(),qe(this,t,Qk,Zk,Oe,{})}}function eT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px")},m(a,o){Z(a,t,o),P(t,n),e[7](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i)},i:de,o:de,d(a){a&&X(t),e[7](null)}}}function tT(e,t,n){let{title:r=void 0}=t,{width:i=600}=t,{height:a=200}=t,{data:o}=t,{x:u="x"}=t,{y:s="y"}=t,l;_t(()=>{n(2,l.textContent="",l);const f=dt({title:r,width:i,height:a,x:{domain:[0,70]},marks:[oS(o,{x:u,y:s,stroke:"#ccc"}),xf([0])]});l.appendChild(f)});function c(f){We[f?"unshift":"push"](()=>{l=f,n(2,l)})}return e.$$set=f=>{"title"in f&&n(3,r=f.title),"width"in f&&n(0,i=f.width),"height"in f&&n(1,a=f.height),"data"in f&&n(4,o=f.data),"x"in f&&n(5,u=f.x),"y"in f&&n(6,s=f.y)},[i,a,l,r,o,u,s,c]}class nT extends Ge{constructor(t){super(),qe(this,t,tT,eT,Oe,{title:3,width:0,height:1,data:4,x:5,y:6})}}var Ky={exports:{}};(function(e,t){(function(n,r){r()})(ki,function(){function n(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,c,f){var h=new XMLHttpRequest;h.open("GET",l),h.responseType="blob",h.onload=function(){s(h.response,c,f)},h.onerror=function(){console.error("could not download file")},h.send()}function i(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ki=="object"&&ki.global===ki?ki:void 0,u=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(l,c,f){var h=o.URL||o.webkitURL,d=document.createElement("a");c=c||l.name||"download",d.download=c,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?a(d):i(d.href)?r(l,c,f):a(d,d.target="_blank")):(d.href=h.createObjectURL(l),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,f){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,f),c);else if(i(l))r(l,c,f);else{var h=document.createElement("a");h.href=l,h.target="_blank",setTimeout(function(){a(h)})}}:function(l,c,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof l=="string")return r(l,c,f);var d=l.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||u)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=p?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},g.readAsDataURL(l)}else{var w=o.URL||o.webkitURL,b=w.createObjectURL(l);h?h.location=b:location.href=b,h=null,setTimeout(function(){w.revokeObjectURL(b)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s})})(Ky);var rT=Ky.exports;const M0=Qb(rT);function iT(e){let t,n,r;return{c(){t=k("div"),N(t,"width",n=e[0]+"px"),N(t,"height",r=e[1]+"px")},m(i,a){Z(i,t,a),e[6](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&N(t,"width",n),a&2&&r!==(r=i[1]+"px")&&N(t,"height",r)},i:de,o:de,d(i){i&&X(t),e[6](null)}}}function aT(e,t,n){let{data:r}=t,{domain:i}=t,{title:a=""}=t,{width:o=800}=t,{height:u=100}=t,s;_t(()=>{const c=dt({width:o,height:u,marginLeft:70,marginRight:10,x:{label:a,domain:i},y:{axis:!1,type:"band"},marks:[ps(r,{x:f=>f}),Af(r,{x:f=>f,dx:7,y:(f,h)=>h,text:(f,h)=>`P${h+1}`})]});n(2,s.textContent="",s),s.appendChild(c)});function l(c){We[c?"unshift":"push"](()=>{s=c,n(2,s)})}return e.$$set=c=>{"data"in c&&n(3,r=c.data),"domain"in c&&n(4,i=c.domain),"title"in c&&n(5,a=c.title),"width"in c&&n(0,o=c.width),"height"in c&&n(1,u=c.height)},[o,u,s,r,i,a,l]}class oT extends Ge{constructor(t){super(),qe(this,t,aT,iT,Oe,{data:3,domain:4,title:5,width:0,height:1})}}function uT(e){let t,n,r;return{c(){t=k("div"),N(t,"width",n=e[0]+"px"),N(t,"height",r=e[1]+"px")},m(i,a){Z(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&N(t,"width",n),a&2&&r!==(r=i[1]+"px")&&N(t,"height",r)},i:de,o:de,d(i){i&&X(t),e[5](null)}}}function sT(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;_t(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.finals)})),c=dt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[Nf(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Df(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Mf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Du(l),m=1.96*(Cu(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){We[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class lT extends Ge{constructor(t){super(),qe(this,t,sT,uT,Oe,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function cT(e){let t,n,r;return{c(){t=k("div"),N(t,"width",n=e[0]+"px"),N(t,"height",r=e[1]+"px")},m(i,a){Z(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&N(t,"width",n),a&2&&r!==(r=i[1]+"px")&&N(t,"height",r)},i:de,o:de,d(i){i&&X(t),e[5](null)}}}function fT(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;_t(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.trialCounts)})),c=dt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[Nf(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Df(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Mf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Du(l),m=1.96*(Cu(l)/Math.sqrt(c)),p=f-m,g=f+m;return{mean:f,low:p,high:g}}function s(l){We[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class hT extends Ge{constructor(t){super(),qe(this,t,fT,cT,Oe,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function x0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function dT(e,t,n,r,i,a){const o=new Float64Array(a),u=(a-1)/(i-r);for(let s=0;s<e.length;++s){const l=e[s],c=t(l,s,e),f=n(l,s,e);if(!(Number.isFinite(c)&&Number.isFinite(f)))continue;const h=(c-r)*u,d=Math.floor(h),m=d+1;0<=d&&m<a?(o[d]+=(m-h)*f,o[m]+=(h-d)*f):d===-1?o[m]+=(h-d)*f:m===a&&(o[d]+=(m-h)*f)}return o}function P0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);mT(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,u=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:u}}function mT(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),u=.6318/n,s=1.997/n,l=Float64Array.of(-a*Math.cos(u),a*Math.sin(u),-a*Math.cos(-u),a*Math.sin(-u),-o*Math.cos(s),o*Math.sin(s),-o*Math.cos(-s),o*Math.sin(-s)),c=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(f[m]=l[m]*f[m-2]-l[m+1]*f[m-1],f[m+1]=l[m]*f[m-1]+l[m+1]*f[m-2],d=m-2;d>0;d-=2)f[d]+=l[m]*f[d-2]-l[m+1]*f[d-1],f[d+1]+=l[m]*f[d-1]+l[m+1]*f[d-2];for(d=0;d<=m;d+=2)f[d]+=i[m]*h[d]-i[m+1]*h[d+1],f[d+1]+=i[m]*h[d+1]+i[m+1]*h[d];for(h[m+2]=l[m]*h[m]-l[m+1]*h[m+1],h[m+3]=l[m]*h[m+1]+l[m+1]*h[m],d=m;d>0;d-=2)h[d]+=l[m]*h[d-2]-l[m+1]*h[d-1],h[d+1]+=l[m]*h[d-1]+l[m+1]*h[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=f[d]/c,e[m+1]=h[d+2]}function pT(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),u=i,s=bT){const l=r*2,c=r*3,f=r*4,h=r*n;let d,m;for(s(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=f;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-l]+e.b_causal[3]*t[d-c]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(s(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=h-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+l]+e.b_anticausal[3]*t[d+c]+e.b_anticausal[4]*t[d+f]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)u[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)u[d]=Math.max(0,i[m]+a[n-m-1]);return u}function bT(e,t,n,r,i,a,o,u,s,l){const c=Math.abs(r)*n,f=r<0?c+r:0;let h,d,m;for(d=0;d<u;++d)for(l[d]=d<=a?i[d]:0,m=1;m<=u&&m<=d;++m)l[d]-=o[m]*l[d-m];for(m=0;m<u;++m)for(e[m]=0,d=1;d<=m;++d)h=f+r*d,h>=0&&h<c&&(e[m]+=l[m-d]*t[h]);const p=t[f];if(p>0)for(m=0;m<u;++m)e[m]+=l[m]*p}function gT(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const u=t(e[o],o,e);u!=null&&(i===void 0?u>=u&&(i=a=u):(u<i&&(i=u),u>a&&(a=u)))}return[i-n,a+n]}function yT(e,t){const n=e.map(t).filter(l=>l!=null&&l>=l);n.sort((l,c)=>l-c);const r=wT(n),i=S0(n,.25),a=S0(n,.75),o=n.length,u=(a-i)/1.34;return 1.06*(Math.min(r,u)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function wT(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const u=e[o];r=u-i,i+=r/++n,a+=r*(u-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function S0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function vT(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=x0(t.x,w=>w),o=x0(t.weight,()=>1/e.length);let u=t.bandwidth??n*yT(e,a);const[s,l]=t.extent??gT(e,a,r*u),c=dT(e,a,o,s,l,i),f=(l-s)/(i-1),h=c.some(w=>w<0);let d=P0(u/f,h),m;function*p(w="x",b="y"){const v=g.grid(),y=1/f;for(let M=0;M<i;++M)yield{[w]:s+M*f,[b]:v[M]*y}}const g={[Symbol.iterator]:p,points:p,grid:()=>m||(m=pT(d,c,i)),extent:()=>[s,l],bandwidth(w){return arguments.length?(w!==u&&(u=w,m=null,d=P0(u/f,h)),g):u}};return g}function _T(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px")},m(a,o){Z(a,t,o),P(t,n),e[10](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i)},i:de,o:de,d(a){a&&X(t),e[10](null)}}}function MT(e,t,n){let r,{values:i}=t,{title:a=""}=t,{xLabel:o="some value"}=t,{xDomain:u=void 0}=t,{width:s=1e3}=t,{height:l=100}=t,{bandwidth:c=.25}=t,{bins:f=256}=t,{pad:h=4}=t,d;_t(()=>{const p=[...r.bandwidth(c)];n(2,d.textContent="",d);const g=dt({width:s,height:l,title:a,style:{background:"none"},grid:!0,x:{label:o,domain:u},y:{label:"density",type:"linear"},marks:[YP(p,{x:"x",y:"y",fill:"#ccc"}),ps(i,{x:w=>w,strokeWidth:.5}),xf([0])]});d.appendChild(g)});function m(p){We[p?"unshift":"push"](()=>{d=p,n(2,d)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,a=p.title),"xLabel"in p&&n(5,o=p.xLabel),"xDomain"in p&&n(6,u=p.xDomain),"width"in p&&n(0,s=p.width),"height"in p&&n(1,l=p.height),"bandwidth"in p&&n(7,c=p.bandwidth),"bins"in p&&n(8,f=p.bins),"pad"in p&&n(9,h=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=vT(i,{bandwidth:c,pad:h,bins:f}))},[s,l,d,i,a,o,u,c,f,h,m]}class xT extends Ge{constructor(t){super(),qe(this,t,MT,_T,Oe,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function PT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),N(n,"width",r=e[0]+"px"),N(n,"height",i=e[1]+"px")},m(a,o){Z(a,t,o),P(t,n),e[13](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&N(n,"width",r),o&2&&i!==(i=a[1]+"px")&&N(n,"height",i)},i:de,o:de,d(a){a&&X(t),e[13](null)}}}function ST(e,t,n){let{title:r=""}=t,{data:i}=t,{x:a="x"}=t,{y:o="y"}=t,{tipTitle:u=null}=t,{xLabel:s=null}=t,{yLabel:l=null}=t,{xDomain:c=void 0}=t,{yDomain:f=void 0}=t,{grid:h=!1}=t,{width:d=300}=t,{height:m=300}=t,p;_t(()=>{console.log(i,a,o),n(2,p.textContent="",p);const w=dt({width:d,height:m,title:r,grid:h,style:{background:"none"},x:{label:s||(typeof a=="string"?a:"x"),domain:c},y:{label:l||(typeof o=="string"?o:"y"),domain:f},marks:[Nf(i,{x:a,y:o}),I2(i,jg({x:a,y:o,title:u})),Df({length:1},{x1:c[0],x2:c[1],y1:f[0],y2:f[1],stroke:"#ccc"})]});p.appendChild(w)});function g(w){We[w?"unshift":"push"](()=>{p=w,n(2,p)})}return e.$$set=w=>{"title"in w&&n(3,r=w.title),"data"in w&&n(4,i=w.data),"x"in w&&n(5,a=w.x),"y"in w&&n(6,o=w.y),"tipTitle"in w&&n(7,u=w.tipTitle),"xLabel"in w&&n(8,s=w.xLabel),"yLabel"in w&&n(9,l=w.yLabel),"xDomain"in w&&n(10,c=w.xDomain),"yDomain"in w&&n(11,f=w.yDomain),"grid"in w&&n(12,h=w.grid),"width"in w&&n(0,d=w.width),"height"in w&&n(1,m=w.height)},[d,m,p,r,i,a,o,u,s,l,c,f,h,g]}class A0 extends Ge{constructor(t){super(),qe(this,t,ST,PT,Oe,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function E0(e,t,n){const r=e.slice();return r[12]=t[n],r}function C0(e,t,n){const r=e.slice();return r[15]=t[n],r}function k0(e,t,n){const r=e.slice();return r[18]=t[n],r}function T0(e,t,n){const r=e.slice();return r[21]=t[n],r}function $0(e,t,n){const r=e.slice();return r[24]=t[n],r}function D0(e,t,n){const r=e.slice();return r[27]=t[n][0],r[28]=t[n][1],r}function N0(e){let t,n=e[27]+"",r,i,a=e[28].length+"",o,u;return{c(){t=k("p"),r=Ae(n),i=Ae(": "),o=Ae(a),u=Ae(" times")},m(s,l){Z(s,t,l),P(t,r),P(t,i),P(t,o),P(t,u)},p(s,l){l&1&&n!==(n=s[27]+"")&&At(r,n),l&1&&a!==(a=s[28].length+"")&&At(o,a)},d(s){s&&X(t)}}}function F0(e){let t,n;return t=new xT({props:{title:`Density of final values for ${e[24][0]}`,values:e[24][1].map(U0),xLabel:"final values",xDomain:[-1,20],bandwidth:CT}}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=`Density of final values for ${r[24][0]}`),i&2&&(a.values=r[24][1].map(U0)),t.$set(a)},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function B0(e){let t,n=e[21].encoding+"",r,i,a,o;return a=new oT({props:{data:e[21].finals,title:e[21].encoding,domain:[0,e[2]]}}),{c(){t=k("b"),r=Ae(n),i=I(),Pe(a.$$.fragment)},m(u,s){Z(u,t,s),P(t,r),Z(u,i,s),ve(a,u,s),o=!0},p(u,s){(!o||s&8)&&n!==(n=u[21].encoding+"")&&At(r,n);const l={};s&8&&(l.data=u[21].finals),s&8&&(l.title=u[21].encoding),s&4&&(l.domain=[0,u[2]]),a.$set(l)},i(u){o||(Q(a.$$.fragment,u),o=!0)},o(u){oe(a.$$.fragment,u),o=!1},d(u){u&&(X(t),X(i)),_e(a,u)}}}function L0(e){let t,n=e[18]+"",r;return{c(){t=k("p"),r=Ae(n)},m(i,a){Z(i,t,a),P(t,r)},p(i,a){a&1&&n!==(n=i[18]+"")&&At(r,n)},d(i){i&&X(t)}}}function R0(e){let t,n,r,i=e[15].demographics.internalPID+"",a,o,u=e[15].demographics.partID+"",s,l,c,f=Pt(e[15].demographics.partFeedback.split(`
`)),h=[];for(let d=0;d<f.length;d+=1)h[d]=L0(k0(e,f,d));return{c(){t=k("div"),n=k("b"),r=Ae("P"),a=Ae(i),o=I(),s=Ae(u),l=Ae(`:
        `);for(let d=0;d<h.length;d+=1)h[d].c();c=I(),Ce(t,"text-align","left")},m(d,m){Z(d,t,m),P(t,n),P(n,r),P(n,a),P(t,o),P(t,s),P(t,l);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(t,null);P(t,c)},p(d,m){if(m&1&&i!==(i=d[15].demographics.internalPID+"")&&At(a,i),m&1&&u!==(u=d[15].demographics.partID+"")&&At(s,u),m&1){f=Pt(d[15].demographics.partFeedback.split(`
`));let p;for(p=0;p<f.length;p+=1){const g=k0(d,f,p);h[p]?h[p].p(g,m):(h[p]=L0(g),h[p].c(),h[p].m(t,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=f.length}},d(d){d&&X(t),lr(h,d)}}}function I0(e){let t,n;return t=new nT({props:{title:e[12].encoding,width:ET,height:150,data:e[12].data,x:TT,y:e[7]}}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=r[12].encoding),i&2&&(a.data=r[12].data),t.$set(a)},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function AT(e){let t,n,r,i,a,o,u,s,l,c,f,h=e[0].length+"",d,m,p=e[1].length+"",g,w,b=e[4].length+"",v,y,M,_,x,A,E,F,S,D,O,L,C,q,ie,te,J,z,H,T,G,ne,ue,ae,V,Y,B,W,j,$,ge,re,me,Me,Ue,nt=Pt(Cn(e[0],O0).sort(q0)),De=[];for(let R=0;R<nt.length;R+=1)De[R]=N0(D0(e,nt,R));let Mt=Pt(Cn(e[1],G0)),Ne=[];for(let R=0;R<Mt.length;R+=1)Ne[R]=F0($0(e,Mt,R));const Nr=R=>oe(Ne[R],1,1,()=>{Ne[R]=null});D=new A0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:e[0]}}),L=new A0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:e[0]}}),J=new lT({props:{stimuli:e[3]}}),ne=new hT({props:{stimuli:e[3]}});let Ht=Pt(e[3]),Te=[];for(let R=0;R<Ht.length;R+=1)Te[R]=B0(T0(e,Ht,R));const Mi=R=>oe(Te[R],1,1,()=>{Te[R]=null});let tn=Pt(e[0].filter(z0)),He=[];for(let R=0;R<tn.length;R+=1)He[R]=R0(C0(e,tn,R));let se=Pt(e[1]),K=[];for(let R=0;R<se.length;R+=1)K[R]=I0(E0(e,se,R));const xe=R=>oe(K[R],1,1,()=>{K[R]=null});return{c(){t=k("main"),n=k("h2"),n.textContent="Analysis",r=I(),i=k("div"),a=k("label"),o=Ae(`Results JSONs and Prolific demographics CSV
      `),u=k("input"),s=I(),l=k("button"),l.textContent="export JSON",c=I(),f=k("div"),d=Ae(h),m=Ae(` participants completed -
    `),g=Ae(p),w=Ae(` tests -
    `),v=Ae(b),y=Ae(" filtered tests"),M=I(),_=k("div"),x=k("h3"),x.textContent="Encoding order",A=I();for(let R=0;R<De.length;R+=1)De[R].c();E=I(),F=k("div");for(let R=0;R<Ne.length;R+=1)Ne[R].c();S=I(),Pe(D.$$.fragment),O=I(),Pe(L.$$.fragment),C=I(),q=k("div"),ie=k("h3"),ie.textContent="Mean and CI of Final Values",te=I(),Pe(J.$$.fragment),z=I(),H=k("div"),T=k("h3"),T.textContent="Mean and CI of Trial Counts",G=I(),Pe(ne.$$.fragment),ue=I(),ae=k("div"),V=k("h3"),V.textContent="Final Values for Each Stimulus and All Participants",Y=I();for(let R=0;R<Te.length;R+=1)Te[R].c();B=I(),W=k("div"),j=k("h3"),j.textContent="Feedback",$=I();for(let R=0;R<He.length;R+=1)He[R].c();ge=I(),re=k("div");for(let R=0;R<K.length;R+=1)K[R].c();N(u,"type","file"),N(u,"accept",".json,.csv"),u.multiple=!0},m(R,ee){Z(R,t,ee),P(t,n),P(t,r),P(t,i),P(i,a),P(a,o),P(a,u),P(i,s),P(i,l),P(t,c),P(t,f),P(f,d),P(f,m),P(f,g),P(f,w),P(f,v),P(f,y),P(t,M),P(t,_),P(_,x),P(_,A);for(let le=0;le<De.length;le+=1)De[le]&&De[le].m(_,null);P(t,E),P(t,F);for(let le=0;le<Ne.length;le+=1)Ne[le]&&Ne[le].m(F,null);P(t,S),ve(D,t,null),P(t,O),ve(L,t,null),P(t,C),P(t,q),P(q,ie),P(q,te),ve(J,q,null),P(t,z),P(t,H),P(H,T),P(H,G),ve(ne,H,null),P(t,ue),P(t,ae),P(ae,V),P(ae,Y);for(let le=0;le<Te.length;le+=1)Te[le]&&Te[le].m(ae,null);P(t,B),P(t,W),P(W,j),P(W,$);for(let le=0;le<He.length;le+=1)He[le]&&He[le].m(W,null);P(t,ge),P(t,re);for(let le=0;le<K.length;le+=1)K[le]&&K[le].m(re,null);me=!0,Me||(Ue=[Qe(u,"input",e[5]),Qe(l,"click",e[6])],Me=!0)},p(R,[ee]){if((!me||ee&1)&&h!==(h=R[0].length+"")&&At(d,h),(!me||ee&2)&&p!==(p=R[1].length+"")&&At(g,p),(!me||ee&16)&&b!==(b=R[4].length+"")&&At(v,b),ee&1){nt=Pt(Cn(R[0],O0).sort(q0));let U;for(U=0;U<nt.length;U+=1){const Xe=D0(R,nt,U);De[U]?De[U].p(Xe,ee):(De[U]=N0(Xe),De[U].c(),De[U].m(_,null))}for(;U<De.length;U+=1)De[U].d(1);De.length=nt.length}if(ee&2){Mt=Pt(Cn(R[1],G0));let U;for(U=0;U<Mt.length;U+=1){const Xe=$0(R,Mt,U);Ne[U]?(Ne[U].p(Xe,ee),Q(Ne[U],1)):(Ne[U]=F0(Xe),Ne[U].c(),Q(Ne[U],1),Ne[U].m(F,null))}for(ln(),U=Mt.length;U<Ne.length;U+=1)Nr(U);cn()}const le={};ee&1&&(le.data=R[0]),D.$set(le);const Ee={};ee&1&&(Ee.data=R[0]),L.$set(Ee);const xt={};ee&8&&(xt.stimuli=R[3]),J.$set(xt);const Fr={};if(ee&8&&(Fr.stimuli=R[3]),ne.$set(Fr),ee&12){Ht=Pt(R[3]);let U;for(U=0;U<Ht.length;U+=1){const Xe=T0(R,Ht,U);Te[U]?(Te[U].p(Xe,ee),Q(Te[U],1)):(Te[U]=B0(Xe),Te[U].c(),Q(Te[U],1),Te[U].m(ae,null))}for(ln(),U=Ht.length;U<Te.length;U+=1)Mi(U);cn()}if(ee&1){tn=Pt(R[0].filter(z0));let U;for(U=0;U<tn.length;U+=1){const Xe=C0(R,tn,U);He[U]?He[U].p(Xe,ee):(He[U]=R0(Xe),He[U].c(),He[U].m(W,null))}for(;U<He.length;U+=1)He[U].d(1);He.length=tn.length}if(ee&2){se=Pt(R[1]);let U;for(U=0;U<se.length;U+=1){const Xe=E0(R,se,U);K[U]?(K[U].p(Xe,ee),Q(K[U],1)):(K[U]=I0(Xe),K[U].c(),Q(K[U],1),K[U].m(re,null))}for(ln(),U=se.length;U<K.length;U+=1)xe(U);cn()}},i(R){if(!me){for(let ee=0;ee<Mt.length;ee+=1)Q(Ne[ee]);Q(D.$$.fragment,R),Q(L.$$.fragment,R),Q(J.$$.fragment,R),Q(ne.$$.fragment,R);for(let ee=0;ee<Ht.length;ee+=1)Q(Te[ee]);for(let ee=0;ee<se.length;ee+=1)Q(K[ee]);me=!0}},o(R){Ne=Ne.filter(Boolean);for(let ee=0;ee<Ne.length;ee+=1)oe(Ne[ee]);oe(D.$$.fragment,R),oe(L.$$.fragment,R),oe(J.$$.fragment,R),oe(ne.$$.fragment,R),Te=Te.filter(Boolean);for(let ee=0;ee<Te.length;ee+=1)oe(Te[ee]);K=K.filter(Boolean);for(let ee=0;ee<K.length;ee+=1)oe(K[ee]);me=!1},d(R){R&&X(t),lr(De,R),lr(Ne,R),_e(D),_e(L),_e(J),_e(ne),lr(Te,R),lr(He,R),lr(K,R),Me=!1,bn(Ue)}}}const ET=800;let CT=1,kT=20;const O0=e=>e.encodingOrder,q0=(e,t)=>e[1].lenght-t[1].length,G0=e=>e.testType,U0=e=>e.final,z0=e=>e.demographics.partFeedback.trim().length>0,TT=(e,t)=>t;function $T(e,t,n){let r,i,a,o,u=[],s=null;const l=async p=>{const g=[];for(const b of p.target.files)if(b.name.endsWith(".csv")){const v=await b.text();s=P5(v),console.log("p demo",s)}else{const v=await b.text();g.push(JSON.parse(v))}const w=Cn(g,b=>b.demographics.partID);console.log(`${w.length} participants`,w),n(0,u=g.filter(b=>b.studyStep==="feedback").map((b,v)=>({...b,demographics:{...b.demographics,internalPID:v+1},prolificDemogr:s.filter(y=>y["Participant id"]===b.demographics.partID)[0],finalAudio:b.tests.filter(y=>y.encoding.startsWith("audio"))[0].final,finalColor:b.tests.filter(y=>y.encoding.startsWith("color"))[0].final,finalWaveform:b.tests.filter(y=>y.encoding.startsWith("waveform"))[0].final,encodingOrder:b.tests.map(y=>y.encoding).join(", ")}))),console.log("participants",u)},c=p=>{if(p.lenght===0)return[];const g=(b,v=5)=>{const y=Math.floor(b/v)*v;return`${y}-${y+v-1}`},w=[];for(const b of p)for(const[v,y]of b.tests.entries()){let M=y.encoding;(y.encoding==="audio"||y.encoding==="waveform")&&(M=`${y.encoding} + ${y.audioFile.startsWith("./Fluid")?"piano":"drums"}`),w.push({...b.demographics,partAge:b.demographics.partAge?b.demographics.partAge:g(b.prolificDemogr.Age),partSex:b.demographics.partGender?b.demographics.partGender:b.prolificDemogr.Sex,countryBirth:b.prolificDemogr["Country of birth"],countryResidence:b.prolificDemogr["Country of residence"],prolificApprovals:b.prolificDemogr["Total approvals"],...y,date:b.date,testType:M,testOrder:v})}return console.log("tests",w),w},f=(p,g)=>p.filter(w=>w.final<g),h=p=>p.length===0?[]:Cn(p,w=>w.testType).map(([w,b])=>{const v=b.map(y=>y.final);return{encoding:w,testType:w,finals:v,finalMean:Du(v),finalVar:vc(v),trialCounts:b.map(y=>y.trialCount)}}),d=()=>{const p=JSON.stringify(u,void 0,2),g=new Blob([p],{type:"text/plain;charset=utf-8"});M0(g,"participants.json");const w=JSON.stringify(r,void 0,2),b=new Blob([w],{type:"text/plain;charset=utf-8"});M0(b,"tests.json")},m=p=>Math.abs(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=c(u)),e.$$.dirty&2&&n(4,i=f(r,kT)),e.$$.dirty&2&&n(3,a=h(r)),e.$$.dirty&2&&n(2,o=Ot(r.map(p=>Math.abs(p.final)))),e.$$.dirty&2&&console.log("tests by enc",Cn(r,p=>p.testType))},[u,r,o,a,i,l,d,m]}class DT extends Ge{constructor(t){super(),qe(this,t,$T,AT,Oe,{})}}function Be(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}Be.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};Be.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};Be.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};Be.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=Qy(0,e.length-1);return this.activate(e[t]),this};Be.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=Qy(0,e.length-1);this.activate(e[t])};Be.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};Be.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};Be.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};Be.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Be.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};Be.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};Be.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};Be.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};Be.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};Be.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};Be.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};Be.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};Be.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};Be.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};Be.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};Be.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const Uf=function(){};Uf.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};Uf.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};Be.prototype.checkErr=new Uf;function Qy(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Bo(e,t){return new URLSearchParams(e.location.search).get(t)}function NT(e){let t,n,r,i,a,o,u;return{c(){t=k("main"),n=k("audio"),r=I(),i=k("button"),a=Ae(e[0]),n.controls=!1},m(s,l){Z(s,t,l),P(t,n),e[5](n),P(t,r),P(t,i),P(i,a),o||(u=Qe(i,"click",e[2]),o=!0)},p(s,[l]){l&1&&At(a,s[0])},i:de,o:de,d(s){s&&X(t),e[5](null),o=!1,u()}}}function FT(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:a="play audio"}=t,o=null,u;const s=(f,h)=>{h&&u&&(o=t9(h,f),jc(o,h.sampleRate,u))};_a(()=>s(r,i));const l=async()=>{u&&(n(1,u.currentTime=0,u),u.play())};function c(f){We[f?"unshift":"push"](()=>{u=f,n(1,u)})}return e.$$set=f=>{"pattern"in f&&n(3,r=f.pattern),"cachedAudio"in f&&n(4,i=f.cachedAudio),"label"in f&&n(0,a=f.label)},[a,u,l,r,i,c]}class Lo extends Ge{constructor(t){super(),qe(this,t,FT,NT,Oe,{pattern:3,cachedAudio:4,label:0})}}function BT(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=I(),i=k("button"),i.textContent="play audio",n.controls=!1},m(u,s){Z(u,t,s),P(t,n),e[4](n),P(t,r),P(t,i),a||(o=Qe(i,"click",e[1]),a=!0)},p:de,i:de,o:de,d(u){u&&X(t),e[4](null),a=!1,o()}}}function LT(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,a;const o=l=>{l&&a&&jc(l,i,a)};_a(()=>o(r));const u=()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(l){We[l?"unshift":"push"](()=>{a=l,n(0,a)})}return e.$$set=l=>{"audioData"in l&&n(2,r=l.audioData),"sampleRate"in l&&n(3,i=l.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&o(r)},[a,u,r,i,s]}class H0 extends Ge{constructor(t){super(),qe(this,t,LT,BT,Oe,{audioData:2,sampleRate:3})}}function W0(e){let t;return{c(){t=k("div"),t.innerHTML=`<p class="svelte-wlo9ru">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-wlo9ru">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-wlo9ru">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-wlo9ru">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){Z(n,t,r)},d(n){n&&X(t)}}}function V0(e){let t,n,r,i,a,o,u,s,l;return i=new Lo({props:{pattern:[.1,.6,1.1],cachedAudio:e[15][2].audioBuffer}}),{c(){t=k("div"),n=k("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=I(),Pe(i.$$.fragment),a=I(),o=k("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",u=I(),s=k("a"),s.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",N(n,"class","svelte-wlo9ru"),N(o,"class","svelte-wlo9ru"),N(s,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(c,f){Z(c,t,f),P(t,n),P(t,r),ve(i,t,null),P(t,a),P(t,o),P(t,u),P(t,s),l=!0},p(c,f){const h={};f[0]&32768&&(h.cachedAudio=c[15][2].audioBuffer),i.$set(h)},i(c){l||(Q(i.$$.fragment,c),l=!0)},o(c){oe(i.$$.fragment,c),l=!1},d(c){c&&X(t),_e(i)}}}function Y0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,w,b;return{c(){t=k("div"),n=k("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=I(),i=k("div"),a=k("button"),a.textContent="+",o=I(),u=k("button"),u.textContent="-",s=I(),l=Hf("svg"),c=Hf("rect"),p=I(),g=k("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,N(n,"class","svelte-wlo9ru"),N(c,"width",f=e[0]*.52),N(c,"height",h=e[23]*2),N(c,"fill","#ccc"),N(c,"rx","8"),N(l,"width",d=e[0]*.52+"px"),N(l,"height",m=e[23]*2+"px"),N(g,"class","svelte-wlo9ru")},m(v,y){Z(v,t,y),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(t,s),P(t,l),P(l,c),P(t,p),P(t,g),w||(b=[Qe(a,"click",e[25]),Qe(u,"click",e[26])],w=!0)},p(v,y){y[0]&1&&f!==(f=v[0]*.52)&&N(c,"width",f),y[0]&8388608&&h!==(h=v[23]*2)&&N(c,"height",h),y[0]&1&&d!==(d=v[0]*.52+"px")&&N(l,"width",d),y[0]&8388608&&m!==(m=v[23]*2+"px")&&N(l,"height",m)},d(v){v&&X(t),w=!1,bn(b)}}}function j0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,w,b,v;return h=new Lo({props:{pattern:[.1],cachedAudio:e[15][0].audioBuffer,label:"hi-hat"}}),m=new Lo({props:{pattern:[.1],cachedAudio:e[15][1].audioBuffer,label:"snare drum"}}),g=new Lo({props:{pattern:[.1],cachedAudio:e[15][2].audioBuffer,label:"bass drum"}}),{c(){t=k("div"),n=k("div"),n.innerHTML=`<p class="svelte-wlo9ru">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-wlo9ru">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-wlo9ru">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played togehter will still be played at
          the same time, but this time will be either too early or too late.</p>`,r=Ae(`
      This is what the pattern looks like in sheet music:
      `),i=k("div"),a=k("img"),s=I(),l=k("div"),c=k("span"),c.textContent="Click to hear the different sounds:",f=I(),Pe(h.$$.fragment),d=I(),Pe(m.$$.fragment),p=I(),Pe(g.$$.fragment),w=Ae(`
      This is what the full, correctly played pattern sounds like:
      `),b=k("div"),b.innerHTML='<audio src="drum-pattern-correct-once.wav" controls=""></audio>',N(a,"width",o=e[0]+"px"),t3(a.src,u="drum-pattern-labels2.png")||N(a,"src",u),N(a,"alt","drum pattern as sheet music"),Ce(l,"display","grid"),Ce(l,"grid-template-columns","repeat(4,max-content)"),Ce(l,"gap","10px"),Ce(l,"align-items","center")},m(y,M){Z(y,t,M),P(t,n),P(t,r),P(t,i),P(i,a),P(t,s),P(t,l),P(l,c),P(l,f),ve(h,l,null),P(l,d),ve(m,l,null),P(l,p),ve(g,l,null),P(t,w),P(t,b),v=!0},p(y,M){(!v||M[0]&1&&o!==(o=y[0]+"px"))&&N(a,"width",o);const _={};M[0]&32768&&(_.cachedAudio=y[15][0].audioBuffer),h.$set(_);const x={};M[0]&32768&&(x.cachedAudio=y[15][1].audioBuffer),m.$set(x);const A={};M[0]&32768&&(A.cachedAudio=y[15][2].audioBuffer),g.$set(A)},i(y){v||(Q(h.$$.fragment,y),Q(m.$$.fragment,y),Q(g.$$.fragment,y),v=!0)},o(y){oe(h.$$.fragment,y),oe(m.$$.fragment,y),oe(g.$$.fragment,y),v=!1},d(y){y&&X(t),_e(h),_e(m),_e(g)}}}function X0(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,g,w,b,v,y,M,_,x,A,E,F,S,D,O;return{c(){t=k("div"),n=k("p"),n.textContent="Please answer the following questions about yourself:",r=I(),i=k("label"),a=k("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=I(),u=k("select"),s=k("option"),s.textContent="none",l=k("option"),l.textContent="high school",c=k("option"),c.textContent="bachelor",f=k("option"),f.textContent="master",h=k("option"),h.textContent="phd",d=I(),m=k("label"),p=k("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=I(),w=k("input"),b=I(),v=k("label"),y=k("span"),y.textContent="For how many years do you roughly play it/them?",M=I(),_=k("input"),x=I(),A=k("label"),E=k("span"),E.textContent=`How many years of experience do you have with information
          visualization?`,F=I(),S=k("input"),N(n,"class","svelte-wlo9ru"),s.__value="none",at(s,s.__value),l.__value="highs",at(l,l.__value),c.__value="bachelor",at(c,c.__value),f.__value="master",at(f,f.__value),h.__value="phd",at(h,h.__value),e[4]===void 0&&Ji(()=>e[27].call(u)),N(i,"class","svelte-wlo9ru"),N(w,"type","text"),N(w,"placeholder","free text"),N(m,"class","svelte-wlo9ru"),N(_,"type","number"),N(_,"min","0"),N(_,"step","1"),N(v,"class","svelte-wlo9ru"),N(S,"type","number"),N(S,"min","0"),N(S,"step","1"),N(A,"class","svelte-wlo9ru"),N(t,"class","demo-form svelte-wlo9ru")},m(L,C){Z(L,t,C),P(t,n),P(t,r),P(t,i),P(i,a),P(i,o),P(i,u),P(u,s),P(u,l),P(u,c),P(u,f),P(u,h),Ro(u,e[4],!0),P(t,d),P(t,m),P(m,p),P(m,g),P(m,w),at(w,e[5]),P(t,b),P(t,v),P(v,y),P(v,M),P(v,_),at(_,e[6]),P(t,x),P(t,A),P(A,E),P(A,F),P(A,S),at(S,e[7]),D||(O=[Qe(u,"change",e[27]),Qe(w,"input",e[28]),Qe(_,"input",e[29]),Qe(S,"input",e[30])],D=!0)},p(L,C){C[0]&16&&Ro(u,L[4]),C[0]&32&&w.value!==L[5]&&at(w,L[5]),C[0]&64&&Kr(_.value)!==L[6]&&at(_,L[6]),C[0]&128&&Kr(S.value)!==L[7]&&at(S,L[7])},d(L){L&&X(t),D=!1,bn(O)}}}function Z0(e){let t,n,r=e[10]&&K0(e);return{c(){r&&r.c(),t=gc()},m(i,a){r&&r.m(i,a),Z(i,t,a),n=!0},p(i,a){i[10]?r?(r.p(i,a),a[0]&1024&&Q(r,1)):(r=K0(i),r.c(),Q(r,1),r.m(t.parentNode,t)):r&&(ln(),oe(r,1,1,()=>{r=null}),cn())},i(i){n||(Q(r),n=!0)},o(i){oe(r),n=!1},d(i){i&&X(t),r&&r.d(i)}}}function K0(e){let t,n,r=e[3]+1+"",i,a,o=e[1].length+"",u,s,l,c,f,h,d,m=e[9]+1+"",p,g,w,b,v,y;function M(S,D){if(S[14]==="only-hihat")return OT;if(S[14]==="hihat-snare")return IT;if(S[14]==="hihat-bass")return RT}let _=M(e),x=_&&_(e);const A=[GT,qT],E=[];function F(S,D){return S[13]==="audio"?0:S[12]===!1?1:-1}return~(w=F(e))&&(b=E[w]=A[w](e)),{c(){t=k("p"),n=Ae("Test number "),i=Ae(r),a=Ae(" of "),u=Ae(o),s=I(),x&&x.c(),l=I(),c=k("p"),c.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,f=I(),h=k("p"),d=Ae("Trial number "),p=Ae(m),g=I(),b&&b.c(),v=gc(),N(t,"class","svelte-wlo9ru"),N(c,"class","svelte-wlo9ru"),N(h,"class","svelte-wlo9ru")},m(S,D){Z(S,t,D),P(t,n),P(t,i),P(t,a),P(t,u),Z(S,s,D),x&&x.m(S,D),Z(S,l,D),Z(S,c,D),Z(S,f,D),Z(S,h,D),P(h,d),P(h,p),Z(S,g,D),~w&&E[w].m(S,D),Z(S,v,D),y=!0},p(S,D){(!y||D[0]&8)&&r!==(r=S[3]+1+"")&&At(i,r),(!y||D[0]&2)&&o!==(o=S[1].length+"")&&At(u,o),_!==(_=M(S))&&(x&&x.d(1),x=_&&_(S),x&&(x.c(),x.m(l.parentNode,l))),(!y||D[0]&512)&&m!==(m=S[9]+1+"")&&At(p,m);let O=w;w=F(S),w===O?~w&&E[w].p(S,D):(b&&(ln(),oe(E[O],1,1,()=>{E[O]=null}),cn()),~w?(b=E[w],b?b.p(S,D):(b=E[w]=A[w](S),b.c()),Q(b,1),b.m(v.parentNode,v)):b=null)},i(S){y||(Q(b),y=!0)},o(S){oe(b),y=!1},d(S){S&&(X(t),X(s),X(l),X(c),X(f),X(h),X(g),X(v)),x&&x.d(S),~w&&E[w].d(S)}}}function RT(e){let t;return{c(){t=k("p"),t.innerHTML="In this test, a beat with a <b>hi-hat and a bass</b> note is shifted.",N(t,"class","svelte-wlo9ru")},m(n,r){Z(n,t,r)},d(n){n&&X(t)}}}function IT(e){let t;return{c(){t=k("p"),t.innerHTML="In this test, a beat with a <b>hi-hat and a snare</b> note is shifted.",N(t,"class","svelte-wlo9ru")},m(n,r){Z(n,t,r)},d(n){n&&X(t)}}}function OT(e){let t;return{c(){t=k("p"),t.innerHTML="In this test, only a <b>single hi-hat</b> note is shifted.",N(t,"class","svelte-wlo9ru")},m(n,r){Z(n,t,r)},d(n){n&&X(t)}}}function qT(e){let t,n,r,i;const a=[zT,UT],o=[];function u(s,l){return s[13]==="waveform"?0:s[13]==="color"?1:-1}return~(t=u(e))&&(n=o[t]=a[t](e)),{c(){n&&n.c(),r=gc()},m(s,l){~t&&o[t].m(s,l),Z(s,r,l),i=!0},p(s,l){let c=t;t=u(s),t===c?~t&&o[t].p(s,l):(n&&(ln(),oe(o[c],1,1,()=>{o[c]=null}),cn()),~t?(n=o[t],n?n.p(s,l):(n=o[t]=a[t](s),n.c()),Q(n,1),n.m(r.parentNode,r)):n=null)},i(s){i||(Q(n),i=!0)},o(s){oe(n),i=!1},d(s){s&&X(r),~t&&o[t].d(s)}}}function GT(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new H0({props:{audioData:e[17],sampleRate:e[19]}}),o=new H0({props:{audioData:e[18],sampleRate:e[19]}}),h=new iy({props:{audioData:e[16],sampleRate:e[19],currentTrialNumber:e[9]}}),{c(){t=k("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=I(),r=k("div"),Pe(i.$$.fragment),a=I(),Pe(o.$$.fragment),u=I(),s=k("div"),s.textContent="Example for early",l=I(),c=k("div"),c.textContent="Example for late",f=I(),Pe(h.$$.fragment),N(t,"class","svelte-wlo9ru"),N(s,"class","svelte-wlo9ru"),N(c,"class","svelte-wlo9ru"),N(r,"class","vis-example svelte-wlo9ru")},m(m,p){Z(m,t,p),Z(m,n,p),Z(m,r,p),ve(i,r,null),P(r,a),ve(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),Z(m,f,p),ve(h,m,p),d=!0},p(m,p){const g={};p[0]&131072&&(g.audioData=m[17]),p[0]&524288&&(g.sampleRate=m[19]),i.$set(g);const w={};p[0]&262144&&(w.audioData=m[18]),p[0]&524288&&(w.sampleRate=m[19]),o.$set(w);const b={};p[0]&65536&&(b.audioData=m[16]),p[0]&524288&&(b.sampleRate=m[19]),p[0]&512&&(b.currentTrialNumber=m[9]),h.$set(b)},i(m){d||(Q(i.$$.fragment,m),Q(o.$$.fragment,m),Q(h.$$.fragment,m),d=!0)},o(m){oe(i.$$.fragment,m),oe(o.$$.fragment,m),oe(h.$$.fragment,m),d=!1},d(m){m&&(X(t),X(n),X(r),X(f)),_e(i),_e(o),_e(h,m)}}}function UT(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new Co({props:{pattern:e[21],width:e[0]/2,height:e[23]*.7}}),o=new Co({props:{pattern:e[22],width:e[0]/2,height:e[23]*.7}}),h=new Co({props:{pattern:e[20],width:e[0],height:e[23]}}),{c(){t=k("p"),t.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Brighter bars show smaller gaps (early),
            darker bars show wider gaps (late).`,n=I(),r=k("div"),Pe(i.$$.fragment),a=I(),Pe(o.$$.fragment),u=I(),s=k("div"),s.textContent="Example for early",l=I(),c=k("div"),c.textContent="Example for late",f=I(),Pe(h.$$.fragment),N(t,"class","svelte-wlo9ru"),N(s,"class","svelte-wlo9ru"),N(c,"class","svelte-wlo9ru"),N(r,"class","vis-example svelte-wlo9ru")},m(m,p){Z(m,t,p),Z(m,n,p),Z(m,r,p),ve(i,r,null),P(r,a),ve(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),Z(m,f,p),ve(h,m,p),d=!0},p(m,p){const g={};p[0]&2097152&&(g.pattern=m[21]),p[0]&1&&(g.width=m[0]/2),p[0]&8388608&&(g.height=m[23]*.7),i.$set(g);const w={};p[0]&4194304&&(w.pattern=m[22]),p[0]&1&&(w.width=m[0]/2),p[0]&8388608&&(w.height=m[23]*.7),o.$set(w);const b={};p[0]&1048576&&(b.pattern=m[20]),p[0]&1&&(b.width=m[0]),p[0]&8388608&&(b.height=m[23]),h.$set(b)},i(m){d||(Q(i.$$.fragment,m),Q(o.$$.fragment,m),Q(h.$$.fragment,m),d=!0)},o(m){oe(i.$$.fragment,m),oe(o.$$.fragment,m),oe(h.$$.fragment,m),d=!1},d(m){m&&(X(t),X(n),X(r),X(f)),_e(i),_e(o),_e(h,m)}}}function zT(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new ko({props:{audioData:e[17],width:e[0]/2,height:e[23]/2}}),o=new ko({props:{audioData:e[18],width:e[0]/2,height:e[23]/2}}),h=new ko({props:{audioData:e[16],width:e[0],height:e[23]}}),{c(){t=k("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=I(),r=k("div"),Pe(i.$$.fragment),a=I(),Pe(o.$$.fragment),u=I(),s=k("div"),s.textContent="Example for early",l=I(),c=k("div"),c.textContent="Example for late",f=I(),Pe(h.$$.fragment),N(t,"class","svelte-wlo9ru"),N(s,"class","svelte-wlo9ru"),N(c,"class","svelte-wlo9ru"),N(r,"class","vis-example svelte-wlo9ru")},m(m,p){Z(m,t,p),Z(m,n,p),Z(m,r,p),ve(i,r,null),P(r,a),ve(o,r,null),P(r,u),P(r,s),P(r,l),P(r,c),Z(m,f,p),ve(h,m,p),d=!0},p(m,p){const g={};p[0]&131072&&(g.audioData=m[17]),p[0]&1&&(g.width=m[0]/2),p[0]&8388608&&(g.height=m[23]/2),i.$set(g);const w={};p[0]&262144&&(w.audioData=m[18]),p[0]&1&&(w.width=m[0]/2),p[0]&8388608&&(w.height=m[23]/2),o.$set(w);const b={};p[0]&65536&&(b.audioData=m[16]),p[0]&1&&(b.width=m[0]),p[0]&8388608&&(b.height=m[23]),h.$set(b)},i(m){d||(Q(i.$$.fragment,m),Q(o.$$.fragment,m),Q(h.$$.fragment,m),d=!0)},o(m){oe(i.$$.fragment,m),oe(o.$$.fragment,m),oe(h.$$.fragment,m),d=!1},d(m){m&&(X(t),X(n),X(r),X(f)),_e(i),_e(o),_e(h,m)}}}function Q0(e){let t,n,r,i,a,o,u;return{c(){t=k("div"),n=Ae(`Almost done!
      `),r=k("p"),r.textContent="Do you have any final feedback/comments?",i=I(),a=k("textarea"),N(r,"class","svelte-wlo9ru")},m(s,l){Z(s,t,l),P(t,n),P(t,r),P(t,i),P(t,a),at(a,e[8]),o||(u=Qe(a,"input",e[31]),o=!0)},p(s,l){l[0]&256&&at(a,s[8])},d(s){s&&X(t),o=!1,u()}}}function J0(e){let t,n,r;return{c(){t=k("div"),t.textContent="Thanks for participating!",n=I(),r=k("a"),r.textContent="click here to get your compensation",N(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){Z(i,t,a),Z(i,n,a),Z(i,r,a)},d(i){i&&(X(t),X(n),X(r))}}}function e1(e){let t,n,r;return{c(){t=k("button"),t.textContent="next step",N(t,"class","next-btn svelte-wlo9ru")},m(i,a){Z(i,t,a),n||(r=Qe(t,"click",e[24]),n=!0)},p:de,d(i){i&&X(t),n=!1,r()}}}function HT(e){let t,n,r,i,a,o,u,s,l,c,f=e[2]==="consent"&&W0(),h=e[2]==="start1"&&V0(e),d=e[2]==="start2"&&Y0(e),m=e[2]==="start3"&&j0(e),p=e[2]==="demo"&&X0(e),g=e[2]==="tests"&&Z0(e),w=e[2]==="feedback"&&Q0(e),b=e[2]==="done"&&J0(),v=!e[11]&&e[2]!=="done"&&e1(e);return{c(){t=k("main"),f&&f.c(),n=I(),h&&h.c(),r=I(),d&&d.c(),i=I(),m&&m.c(),a=I(),p&&p.c(),o=I(),g&&g.c(),u=I(),w&&w.c(),s=I(),b&&b.c(),l=I(),v&&v.c(),N(t,"class","svelte-wlo9ru")},m(y,M){Z(y,t,M),f&&f.m(t,null),P(t,n),h&&h.m(t,null),P(t,r),d&&d.m(t,null),P(t,i),m&&m.m(t,null),P(t,a),p&&p.m(t,null),P(t,o),g&&g.m(t,null),P(t,u),w&&w.m(t,null),P(t,s),b&&b.m(t,null),P(t,l),v&&v.m(t,null),c=!0},p(y,M){y[2]==="consent"?f||(f=W0(),f.c(),f.m(t,n)):f&&(f.d(1),f=null),y[2]==="start1"?h?(h.p(y,M),M[0]&4&&Q(h,1)):(h=V0(y),h.c(),Q(h,1),h.m(t,r)):h&&(ln(),oe(h,1,1,()=>{h=null}),cn()),y[2]==="start2"?d?d.p(y,M):(d=Y0(y),d.c(),d.m(t,i)):d&&(d.d(1),d=null),y[2]==="start3"?m?(m.p(y,M),M[0]&4&&Q(m,1)):(m=j0(y),m.c(),Q(m,1),m.m(t,a)):m&&(ln(),oe(m,1,1,()=>{m=null}),cn()),y[2]==="demo"?p?p.p(y,M):(p=X0(y),p.c(),p.m(t,o)):p&&(p.d(1),p=null),y[2]==="tests"?g?(g.p(y,M),M[0]&4&&Q(g,1)):(g=Z0(y),g.c(),Q(g,1),g.m(t,u)):g&&(ln(),oe(g,1,1,()=>{g=null}),cn()),y[2]==="feedback"?w?w.p(y,M):(w=Q0(y),w.c(),w.m(t,s)):w&&(w.d(1),w=null),y[2]==="done"?b||(b=J0(),b.c(),b.m(t,l)):b&&(b.d(1),b=null),!y[11]&&y[2]!=="done"?v?v.p(y,M):(v=e1(y),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(y){c||(Q(h),Q(m),Q(g),c=!0)},o(y){oe(h),oe(m),oe(g),c=!1},d(y){y&&X(t),f&&f.d(),h&&h.d(),d&&d.d(),m&&m.d(),p&&p.d(),g&&g.d(),w&&w.d(),b&&b.d(),v&&v.d()}}}const WT="/store",VT=120,vo=.2,t1=.05,n1=4;function YT(e,t,n){let r,i=Bo(window,"PROLIFIC_PID"),a=Bo(window,"STUDY_ID"),o=Bo(window,"SESSION_ID"),l=l1(["audio","waveform","color"],["only-hihat","hihat-snare","hihat-bass"]).map(([se,K])=>({encoding:se,pattern:K}));console.log({tests:l});let c="consent",f=0,h,d="",m="",p=0,g=0,w="",b=0,v,y={},M=[],_,x,A=!1,E=!1,F=!1,S="tick",D="only-hihat",O=600,L=[],C=0;const q=[];_a(()=>{document.querySelector("html").addEventListener("keyup",ne)});const ie=()=>{x=new Be({ratio:{firstVal:vo,down:2,up:1,stepSizeDown:t1,stepSizeUp:t1*.5488,limits:[0,vo],direction:-1,reversalLimit:5,verbosity:0}}),x.init()};function te(){c==="consent"?n(2,c="start1"):c==="start1"?n(2,c="start2"):c==="start2"?n(2,c="start3"):c==="start3"?(n(1,l=n9(l)),n(2,c="demo")):c==="demo"?d==""||m==""?alert("please fill the form first"):(n(2,c="tests"),n(3,f=0)):c==="tests"?f<l.length?J():n(2,c="feedback"):c==="feedback"&&(ae(),n(2,c="done"))}function J(){ie(),n(13,S=l[f].encoding),n(14,D=l[f].pattern);const se=Mt(D,-vo),K=Mt(D,vo);n(21,me=se.noteTimes),n(22,Me=K.noteTimes),n(17,j=se.renderedAudio),n(18,$=K.renderedAudio),n(9,b=0),v=0,_=0,n(10,A=!0),L=[],M=[],h=new Date,z()}function z(){console.log("Starting trial "+b),y={},n(11,E=!0),H()}function H(){let K=x.getLast("ratio");K=Math.random()<.5?K:-K,y.deviation=K;const xe=Mt(D,K);n(20,re=xe.noteTimes),xe.noteTimesSeparate,n(19,ge=xe.sampleRate),n(16,W=xe.renderedAudio),console.log("generated pattern"),n(12,F=!0),window.setTimeout(()=>{n(12,F=!1),y.startTime=new Date},1e3)}function T(se){if(!E)return;n(11,E=!1),y.decisionChoice=se,y.errorCode=0,y.timeTaken=(new Date-y.startTime)/1e3;const K=_;(y.decisionChoice==0&&y.deviation<0||y.decisionChoice==1&&y.deviation>0)&&y.errorCode==0&&_++,y.errorCode==0&&(x.next(K!=_),M[M.length]=y),y.errorCode==0&&v++,n(9,b++,b),x.reversalLimitReached("ratio")?G():z()}function G(){n(10,A=!1),n(11,E=!1),ue(),L=[],C=x.getFinalVal("ratio");for(let K=0;K<M.length;K++)L[K]=M[K].deviation;console.log(L);const se=new Date;q.push({encoding:S,pattern:D,final:C,data:L,score:_,testNumber:f,trialCount:b+1,trials:M,validTrialCount:v+1,testTimeSeconds:(se-h)/1e3}),n(3,f++,f)}function ne(se){if(!F)switch(se.key){case"ArrowLeft":E&&T(0);break;case"ArrowRight":E&&T(1);break;case"PageDown":!E&&c!=="done"&&te()}}function ue(){`${_}`,b+1,`${(_/(b+1)*100).toFixed(1)}${x.getFinalVal("ratio")}`}function ae(){const se={studyStep:c,demographics:{partID:i,studyID:a,sessionID:o,partEduation:d,partMusicInstr:m,partMusicInstrYears:p,partVisExperienceYears:g,partFeedback:w,visWidth:O},date:new Date().toISOString(),tests:q};console.log("saving data",se);const K=JSON.stringify(se,void 0,2);fetch(WT,{method:"POST",headers:{"Content-Type":"application/json"},body:K}).then(xe=>{console.log("Data saved:",xe)})}let V=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}],Y=By(VT);const B=n1*Y;let W=null,j=null,$=null,ge,re=[],me=[],Me=[];(async()=>{n(15,V=await Promise.all(V.map(async se=>({...se,times:se.beats.map(K=>Y*(K-1)),timesOriginal:se.beats.map(K=>Y*(K-1)),audioBuffer:await Jb(se.sample)}))))})();const nt=(se,K=0)=>{if(K===0)return V;const xe=De([V]),R=xe.filter(Ee=>Ee.instrument==="hihat")[0],ee=xe.filter(Ee=>Ee.instrument==="snare")[0],le=xe.filter(Ee=>Ee.instrument==="bass")[0];return se==="only-hihat"?R.times[5]=R.timesOriginal[5]+K:se==="hihat-snare"?(ee.times[1]=ee.timesOriginal[1]+K,R.times[6]=R.timesOriginal[6]+K):se==="hihat-bass"?(le.times[1]=le.timesOriginal[1]+K,R.times[4]=R.timesOriginal[4]+K):alert("wrong error mode"),xe},De=se=>{const K=se[0].map(xe=>({...xe,beats:[...xe.beats],times:[...xe.times],timesOriginal:[...xe.timesOriginal]}));for(let xe=1;xe<se.length;xe++){const R=se[xe];for(const ee of R){const le=K.filter(Ee=>Ee.instrument===ee.instrument)[0];le.beats=[...le.beats,...ee.beats.map(Ee=>Ee+xe*n1)],le.times=[...le.times,...ee.times.map(Ee=>Ee+xe*B)],le.timesOriginal=[...le.timesOriginal,...ee.timesOriginal.map(Ee=>Ee+xe*B)]}}return K},Mt=(se,K)=>{if(!V[0].audioBuffer)return;const R=[nt(se,K)],ee=De(R),le=ee.map(U=>U.times).flat().sort(),Ee=ee.map(U=>U.times.map(Xe=>({time:Xe,instr:U.instrument}))).flat(1/0).sort((U,Xe)=>{U.time-Xe.time}),xt=ee[0].audioBuffer.sampleRate,Fr=Xl(ee,B*R.length+.1,xt);return{noteTimes:le,noteTimesSeparate:Ee,sampleRate:xt,renderedAudio:Fr}},Ne=()=>n(0,O*=1.05),Nr=()=>n(0,O*=.95);function Ht(){d=o1(this),n(4,d)}function Te(){m=this.value,n(5,m)}function Mi(){p=Kr(this.value),n(6,p)}function tn(){g=Kr(this.value),n(7,g)}function He(){w=this.value,n(8,w)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(23,r=O/6)},[O,l,c,f,d,m,p,g,w,b,A,E,F,S,D,V,W,j,$,ge,re,me,Me,r,te,Ne,Nr,Ht,Te,Mi,tn,He]}class jT extends Ge{constructor(t){super(),qe(this,t,YT,HT,Oe,{},null,[-1,-1,-1])}}function r1(e){let t,n,r,i,a,o,u,s;return{c(){t=k("div"),n=k("button"),n.textContent="Playground",r=I(),i=k("button"),i.textContent="Study",a=I(),o=k("button"),o.textContent="Analysis"},m(l,c){Z(l,t,c),P(t,n),P(t,r),P(t,i),P(t,a),P(t,o),u||(s=[Qe(n,"click",e[1]),Qe(i,"click",e[2]),Qe(o,"click",e[3])],u=!0)},p:de,d(l){l&&X(t),u=!1,bn(s)}}}function XT(e){let t,n;return t=new DT({}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function ZT(e){let t,n;return t=new jT({}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function KT(e){let t,n;return t=new Jk({}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function QT(e){let t,n,r,i,a,o,u,s=e[0]!=="study_drums"&&r1(e);const l=[KT,ZT,XT],c=[];function f(h,d){return h[0]==="playground"?0:h[0]==="study_drums"?1:h[0]==="analysis"?2:-1}return~(a=f(e))&&(o=c[a]=l[a](e)),{c(){t=k("main"),n=k("h1"),n.textContent="Rhythm Error Sensitivity Study",r=I(),s&&s.c(),i=I(),o&&o.c()},m(h,d){Z(h,t,d),P(t,n),P(t,r),s&&s.m(t,null),P(t,i),~a&&c[a].m(t,null),u=!0},p(h,[d]){h[0]!=="study_drums"?s?s.p(h,d):(s=r1(h),s.c(),s.m(t,i)):s&&(s.d(1),s=null);let m=a;a=f(h),a!==m&&(o&&(ln(),oe(c[m],1,1,()=>{c[m]=null}),cn()),~a?(o=c[a],o||(o=c[a]=l[a](h),o.c()),Q(o,1),o.m(t,null)):o=null)},i(h){u||(Q(o),u=!0)},o(h){oe(o),u=!1},d(h){h&&X(t),s&&s.d(),~a&&c[a].d()}}}function JT(e,t,n){let r=Bo(window,"p")??"study_prolific";return r="playground",r="study_drums",[r,()=>n(0,r="playground"),()=>n(0,r="study_drums"),()=>n(0,r="analysis")]}class e$ extends Ge{constructor(t){super(),qe(this,t,JT,QT,Oe,{})}}new e$({target:document.getElementById("app")});export{Qb as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-BtgXmuIM.js","assets/index-B7403uK9.js","assets/browser-CfSu9DH-.js","assets/index-CCbttyT8.js","assets/index-DKrb-GDM.js","assets/index-B0pw5zsw.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
